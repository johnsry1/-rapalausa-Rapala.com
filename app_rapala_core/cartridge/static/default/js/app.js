(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";

// rawAsap provides everything we need except exception management.
var rawAsap = require("./raw");
// RawTasks are recycled to reduce GC churn.
var freeTasks = [];
// We queue errors to ensure they are thrown in right order (FIFO).
// Array-as-queue is good enough here, since we are just dealing with exceptions.
var pendingErrors = [];
var requestErrorThrow = rawAsap.makeRequestCallFromTimer(throwFirstError);

function throwFirstError() {
    if (pendingErrors.length) {
        throw pendingErrors.shift();
    }
}

/**
 * Calls a task as soon as possible after returning, in its own event, with priority
 * over other events like animation, reflow, and repaint. An error thrown from an
 * event will not interrupt, nor even substantially slow down the processing of
 * other events, but will be rather postponed to a lower priority event.
 * @param {{call}} task A callable object, typically a function that takes no
 * arguments.
 */
module.exports = asap;
function asap(task) {
    var rawTask;
    if (freeTasks.length) {
        rawTask = freeTasks.pop();
    } else {
        rawTask = new RawTask();
    }
    rawTask.task = task;
    rawAsap(rawTask);
}

// We wrap tasks with recyclable task objects.  A task object implements
// `call`, just like a function.
function RawTask() {
    this.task = null;
}

// The sole purpose of wrapping the task is to catch the exception and recycle
// the task object after its single use.
RawTask.prototype.call = function () {
    try {
        this.task.call();
    } catch (error) {
        if (asap.onerror) {
            // This hook exists purely for testing purposes.
            // Its name will be periodically randomized to break any code that
            // depends on its existence.
            asap.onerror(error);
        } else {
            // In a web browser, exceptions are not fatal. However, to avoid
            // slowing down the queue of pending tasks, we rethrow the error in a
            // lower priority turn.
            pendingErrors.push(error);
            requestErrorThrow();
        }
    } finally {
        this.task = null;
        freeTasks[freeTasks.length] = this;
    }
};

},{"./raw":2}],2:[function(require,module,exports){
(function (global){
"use strict";

// Use the fastest means possible to execute a task in its own turn, with
// priority over other events including IO, animation, reflow, and redraw
// events in browsers.
//
// An exception thrown by a task will permanently interrupt the processing of
// subsequent tasks. The higher level `asap` function ensures that if an
// exception is thrown by a task, that the task queue will continue flushing as
// soon as possible, but if you use `rawAsap` directly, you are responsible to
// either ensure that no exceptions are thrown from your task, or to manually
// call `rawAsap.requestFlush` if an exception is thrown.
module.exports = rawAsap;
function rawAsap(task) {
    if (!queue.length) {
        requestFlush();
        flushing = true;
    }
    // Equivalent to push, but avoids a function call.
    queue[queue.length] = task;
}

var queue = [];
// Once a flush has been requested, no further calls to `requestFlush` are
// necessary until the next `flush` completes.
var flushing = false;
// `requestFlush` is an implementation-specific method that attempts to kick
// off a `flush` event as quickly as possible. `flush` will attempt to exhaust
// the event queue before yielding to the browser's own event loop.
var requestFlush;
// The position of the next task to execute in the task queue. This is
// preserved between calls to `flush` so that it can be resumed if
// a task throws an exception.
var index = 0;
// If a task schedules additional tasks recursively, the task queue can grow
// unbounded. To prevent memory exhaustion, the task queue will periodically
// truncate already-completed tasks.
var capacity = 1024;

// The flush function processes all tasks that have been scheduled with
// `rawAsap` unless and until one of those tasks throws an exception.
// If a task throws an exception, `flush` ensures that its state will remain
// consistent and will resume where it left off when called again.
// However, `flush` does not make any arrangements to be called again if an
// exception is thrown.
function flush() {
    while (index < queue.length) {
        var currentIndex = index;
        // Advance the index before calling the task. This ensures that we will
        // begin flushing on the next task the task throws an error.
        index = index + 1;
        queue[currentIndex].call();
        // Prevent leaking memory for long chains of recursive calls to `asap`.
        // If we call `asap` within tasks scheduled by `asap`, the queue will
        // grow, but to avoid an O(n) walk for every task we execute, we don't
        // shift tasks off the queue after they have been executed.
        // Instead, we periodically shift 1024 tasks off the queue.
        if (index > capacity) {
            // Manually shift all values starting at the index back to the
            // beginning of the queue.
            for (var scan = 0, newLength = queue.length - index; scan < newLength; scan++) {
                queue[scan] = queue[scan + index];
            }
            queue.length -= index;
            index = 0;
        }
    }
    queue.length = 0;
    index = 0;
    flushing = false;
}

// `requestFlush` is implemented using a strategy based on data collected from
// every available SauceLabs Selenium web driver worker at time of writing.
// https://docs.google.com/spreadsheets/d/1mG-5UYGup5qxGdEMWkhP6BWCz053NUb2E1QoUTU16uA/edit#gid=783724593

// Safari 6 and 6.1 for desktop, iPad, and iPhone are the only browsers that
// have WebKitMutationObserver but not un-prefixed MutationObserver.
// Must use `global` or `self` instead of `window` to work in both frames and web
// workers. `global` is a provision of Browserify, Mr, Mrs, or Mop.

/* globals self */
var scope = typeof global !== "undefined" ? global : self;
var BrowserMutationObserver = scope.MutationObserver || scope.WebKitMutationObserver;

// MutationObservers are desirable because they have high priority and work
// reliably everywhere they are implemented.
// They are implemented in all modern browsers.
//
// - Android 4-4.3
// - Chrome 26-34
// - Firefox 14-29
// - Internet Explorer 11
// - iPad Safari 6-7.1
// - iPhone Safari 7-7.1
// - Safari 6-7
if (typeof BrowserMutationObserver === "function") {
    requestFlush = makeRequestCallFromMutationObserver(flush);

// MessageChannels are desirable because they give direct access to the HTML
// task queue, are implemented in Internet Explorer 10, Safari 5.0-1, and Opera
// 11-12, and in web workers in many engines.
// Although message channels yield to any queued rendering and IO tasks, they
// would be better than imposing the 4ms delay of timers.
// However, they do not work reliably in Internet Explorer or Safari.

// Internet Explorer 10 is the only browser that has setImmediate but does
// not have MutationObservers.
// Although setImmediate yields to the browser's renderer, it would be
// preferrable to falling back to setTimeout since it does not have
// the minimum 4ms penalty.
// Unfortunately there appears to be a bug in Internet Explorer 10 Mobile (and
// Desktop to a lesser extent) that renders both setImmediate and
// MessageChannel useless for the purposes of ASAP.
// https://github.com/kriskowal/q/issues/396

// Timers are implemented universally.
// We fall back to timers in workers in most engines, and in foreground
// contexts in the following browsers.
// However, note that even this simple case requires nuances to operate in a
// broad spectrum of browsers.
//
// - Firefox 3-13
// - Internet Explorer 6-9
// - iPad Safari 4.3
// - Lynx 2.8.7
} else {
    requestFlush = makeRequestCallFromTimer(flush);
}

// `requestFlush` requests that the high priority event queue be flushed as
// soon as possible.
// This is useful to prevent an error thrown in a task from stalling the event
// queue if the exception handled by Node.jsâ€™s
// `process.on("uncaughtException")` or by a domain.
rawAsap.requestFlush = requestFlush;

// To request a high priority event, we induce a mutation observer by toggling
// the text of a text node between "1" and "-1".
function makeRequestCallFromMutationObserver(callback) {
    var toggle = 1;
    var observer = new BrowserMutationObserver(callback);
    var node = document.createTextNode("");
    observer.observe(node, {characterData: true});
    return function requestCall() {
        toggle = -toggle;
        node.data = toggle;
    };
}

// The message channel technique was discovered by Malte Ubl and was the
// original foundation for this library.
// http://www.nonblocking.io/2011/06/windownexttick.html

// Safari 6.0.5 (at least) intermittently fails to create message ports on a
// page's first load. Thankfully, this version of Safari supports
// MutationObservers, so we don't need to fall back in that case.

// function makeRequestCallFromMessageChannel(callback) {
//     var channel = new MessageChannel();
//     channel.port1.onmessage = callback;
//     return function requestCall() {
//         channel.port2.postMessage(0);
//     };
// }

// For reasons explained above, we are also unable to use `setImmediate`
// under any circumstances.
// Even if we were, there is another bug in Internet Explorer 10.
// It is not sufficient to assign `setImmediate` to `requestFlush` because
// `setImmediate` must be called *by name* and therefore must be wrapped in a
// closure.
// Never forget.

// function makeRequestCallFromSetImmediate(callback) {
//     return function requestCall() {
//         setImmediate(callback);
//     };
// }

// Safari 6.0 has a problem where timers will get lost while the user is
// scrolling. This problem does not impact ASAP because Safari 6.0 supports
// mutation observers, so that implementation is used instead.
// However, if we ever elect to use timers in Safari, the prevalent work-around
// is to add a scroll event listener that calls for a flush.

// `setTimeout` does not call the passed callback if the delay is less than
// approximately 7 in web workers in Firefox 8 through 18, and sometimes not
// even then.

function makeRequestCallFromTimer(callback) {
    return function requestCall() {
        // We dispatch a timeout with a specified delay of 0 for engines that
        // can reliably accommodate that request. This will usually be snapped
        // to a 4 milisecond delay, but once we're flushing, there's no delay
        // between events.
        var timeoutHandle = setTimeout(handleTimer, 0);
        // However, since this timer gets frequently dropped in Firefox
        // workers, we enlist an interval handle that will try to fire
        // an event 20 times per second until it succeeds.
        var intervalHandle = setInterval(handleTimer, 50);

        function handleTimer() {
            // Whichever timer succeeds will cancel both timers and
            // execute the callback.
            clearTimeout(timeoutHandle);
            clearInterval(intervalHandle);
            callback();
        }
    };
}

// This is for `asap.js` only.
// Its name will be periodically randomized to break any code that depends on
// its existence.
rawAsap.makeRequestCallFromTimer = makeRequestCallFromTimer;

// ASAP was originally a nextTick shim included in Q. This was factored out
// into this ASAP package. It was later adapted to RSVP which made further
// amendments. These decisions, particularly to marginalize MessageChannel and
// to capture the MutationObserver implementation in a closure, were integrated
// back into ASAP proper.
// https://github.com/tildeio/rsvp.js/blob/cddf7232546a9cf858524b75cde6f9edf72620a7/lib/rsvp/asap.js

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],3:[function(require,module,exports){
/**
 * EvEmitter v1.1.0
 * Lil' event emitter
 * MIT License
 */

/* jshint unused: true, undef: true, strict: true */

( function( global, factory ) {
  // universal module definition
  /* jshint strict: false */ /* globals define, module, window */
  if ( typeof define == 'function' && define.amd ) {
    // AMD - RequireJS
    define( factory );
  } else if ( typeof module == 'object' && module.exports ) {
    // CommonJS - Browserify, Webpack
    module.exports = factory();
  } else {
    // Browser globals
    global.EvEmitter = factory();
  }

}( typeof window != 'undefined' ? window : this, function() {

"use strict";

function EvEmitter() {}

var proto = EvEmitter.prototype;

proto.on = function( eventName, listener ) {
  if ( !eventName || !listener ) {
    return;
  }
  // set events hash
  var events = this._events = this._events || {};
  // set listeners array
  var listeners = events[ eventName ] = events[ eventName ] || [];
  // only add once
  if ( listeners.indexOf( listener ) == -1 ) {
    listeners.push( listener );
  }

  return this;
};

proto.once = function( eventName, listener ) {
  if ( !eventName || !listener ) {
    return;
  }
  // add event
  this.on( eventName, listener );
  // set once flag
  // set onceEvents hash
  var onceEvents = this._onceEvents = this._onceEvents || {};
  // set onceListeners object
  var onceListeners = onceEvents[ eventName ] = onceEvents[ eventName ] || {};
  // set flag
  onceListeners[ listener ] = true;

  return this;
};

proto.off = function( eventName, listener ) {
  var listeners = this._events && this._events[ eventName ];
  if ( !listeners || !listeners.length ) {
    return;
  }
  var index = listeners.indexOf( listener );
  if ( index != -1 ) {
    listeners.splice( index, 1 );
  }

  return this;
};

proto.emitEvent = function( eventName, args ) {
  var listeners = this._events && this._events[ eventName ];
  if ( !listeners || !listeners.length ) {
    return;
  }
  // copy over to avoid interference if .off() in listener
  listeners = listeners.slice(0);
  args = args || [];
  // once stuff
  var onceListeners = this._onceEvents && this._onceEvents[ eventName ];

  for ( var i=0; i < listeners.length; i++ ) {
    var listener = listeners[i]
    var isOnce = onceListeners && onceListeners[ listener ];
    if ( isOnce ) {
      // remove listener
      // remove before trigger to prevent recursion
      this.off( eventName, listener );
      // unset once flag
      delete onceListeners[ listener ];
    }
    // trigger listener
    listener.apply( this, args );
  }

  return this;
};

proto.allOff = function() {
  delete this._events;
  delete this._onceEvents;
};

return EvEmitter;

}));

},{}],4:[function(require,module,exports){
/*!
 * imagesLoaded v4.1.4
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */

( function( window, factory ) { 'use strict';
  // universal module definition

  /*global define: false, module: false, require: false */

  if ( typeof define == 'function' && define.amd ) {
    // AMD
    define( [
      'ev-emitter/ev-emitter'
    ], function( EvEmitter ) {
      return factory( window, EvEmitter );
    });
  } else if ( typeof module == 'object' && module.exports ) {
    // CommonJS
    module.exports = factory(
      window,
      require('ev-emitter')
    );
  } else {
    // browser global
    window.imagesLoaded = factory(
      window,
      window.EvEmitter
    );
  }

})( typeof window !== 'undefined' ? window : this,

// --------------------------  factory -------------------------- //

function factory( window, EvEmitter ) {

'use strict';

var $ = window.jQuery;
var console = window.console;

// -------------------------- helpers -------------------------- //

// extend objects
function extend( a, b ) {
  for ( var prop in b ) {
    a[ prop ] = b[ prop ];
  }
  return a;
}

var arraySlice = Array.prototype.slice;

// turn element or nodeList into an array
function makeArray( obj ) {
  if ( Array.isArray( obj ) ) {
    // use object if already an array
    return obj;
  }

  var isArrayLike = typeof obj == 'object' && typeof obj.length == 'number';
  if ( isArrayLike ) {
    // convert nodeList to array
    return arraySlice.call( obj );
  }

  // array of single index
  return [ obj ];
}

// -------------------------- imagesLoaded -------------------------- //

/**
 * @param {Array, Element, NodeList, String} elem
 * @param {Object or Function} options - if function, use as callback
 * @param {Function} onAlways - callback function
 */
function ImagesLoaded( elem, options, onAlways ) {
  // coerce ImagesLoaded() without new, to be new ImagesLoaded()
  if ( !( this instanceof ImagesLoaded ) ) {
    return new ImagesLoaded( elem, options, onAlways );
  }
  // use elem as selector string
  var queryElem = elem;
  if ( typeof elem == 'string' ) {
    queryElem = document.querySelectorAll( elem );
  }
  // bail if bad element
  if ( !queryElem ) {
    console.error( 'Bad element for imagesLoaded ' + ( queryElem || elem ) );
    return;
  }

  this.elements = makeArray( queryElem );
  this.options = extend( {}, this.options );
  // shift arguments if no options set
  if ( typeof options == 'function' ) {
    onAlways = options;
  } else {
    extend( this.options, options );
  }

  if ( onAlways ) {
    this.on( 'always', onAlways );
  }

  this.getImages();

  if ( $ ) {
    // add jQuery Deferred object
    this.jqDeferred = new $.Deferred();
  }

  // HACK check async to allow time to bind listeners
  setTimeout( this.check.bind( this ) );
}

ImagesLoaded.prototype = Object.create( EvEmitter.prototype );

ImagesLoaded.prototype.options = {};

ImagesLoaded.prototype.getImages = function() {
  this.images = [];

  // filter & find items if we have an item selector
  this.elements.forEach( this.addElementImages, this );
};

/**
 * @param {Node} element
 */
ImagesLoaded.prototype.addElementImages = function( elem ) {
  // filter siblings
  if ( elem.nodeName == 'IMG' ) {
    this.addImage( elem );
  }
  // get background image on element
  if ( this.options.background === true ) {
    this.addElementBackgroundImages( elem );
  }

  // find children
  // no non-element nodes, #143
  var nodeType = elem.nodeType;
  if ( !nodeType || !elementNodeTypes[ nodeType ] ) {
    return;
  }
  var childImgs = elem.querySelectorAll('img');
  // concat childElems to filterFound array
  for ( var i=0; i < childImgs.length; i++ ) {
    var img = childImgs[i];
    this.addImage( img );
  }

  // get child background images
  if ( typeof this.options.background == 'string' ) {
    var children = elem.querySelectorAll( this.options.background );
    for ( i=0; i < children.length; i++ ) {
      var child = children[i];
      this.addElementBackgroundImages( child );
    }
  }
};

var elementNodeTypes = {
  1: true,
  9: true,
  11: true
};

ImagesLoaded.prototype.addElementBackgroundImages = function( elem ) {
  var style = getComputedStyle( elem );
  if ( !style ) {
    // Firefox returns null if in a hidden iframe https://bugzil.la/548397
    return;
  }
  // get url inside url("...")
  var reURL = /url\((['"])?(.*?)\1\)/gi;
  var matches = reURL.exec( style.backgroundImage );
  while ( matches !== null ) {
    var url = matches && matches[2];
    if ( url ) {
      this.addBackground( url, elem );
    }
    matches = reURL.exec( style.backgroundImage );
  }
};

/**
 * @param {Image} img
 */
ImagesLoaded.prototype.addImage = function( img ) {
  var loadingImage = new LoadingImage( img );
  this.images.push( loadingImage );
};

ImagesLoaded.prototype.addBackground = function( url, elem ) {
  var background = new Background( url, elem );
  this.images.push( background );
};

ImagesLoaded.prototype.check = function() {
  var _this = this;
  this.progressedCount = 0;
  this.hasAnyBroken = false;
  // complete if no images
  if ( !this.images.length ) {
    this.complete();
    return;
  }

  function onProgress( image, elem, message ) {
    // HACK - Chrome triggers event before object properties have changed. #83
    setTimeout( function() {
      _this.progress( image, elem, message );
    });
  }

  this.images.forEach( function( loadingImage ) {
    loadingImage.once( 'progress', onProgress );
    loadingImage.check();
  });
};

ImagesLoaded.prototype.progress = function( image, elem, message ) {
  this.progressedCount++;
  this.hasAnyBroken = this.hasAnyBroken || !image.isLoaded;
  // progress event
  this.emitEvent( 'progress', [ this, image, elem ] );
  if ( this.jqDeferred && this.jqDeferred.notify ) {
    this.jqDeferred.notify( this, image );
  }
  // check if completed
  if ( this.progressedCount == this.images.length ) {
    this.complete();
  }

  if ( this.options.debug && console ) {
    console.log( 'progress: ' + message, image, elem );
  }
};

ImagesLoaded.prototype.complete = function() {
  var eventName = this.hasAnyBroken ? 'fail' : 'done';
  this.isComplete = true;
  this.emitEvent( eventName, [ this ] );
  this.emitEvent( 'always', [ this ] );
  if ( this.jqDeferred ) {
    var jqMethod = this.hasAnyBroken ? 'reject' : 'resolve';
    this.jqDeferred[ jqMethod ]( this );
  }
};

// --------------------------  -------------------------- //

function LoadingImage( img ) {
  this.img = img;
}

LoadingImage.prototype = Object.create( EvEmitter.prototype );

LoadingImage.prototype.check = function() {
  // If complete is true and browser supports natural sizes,
  // try to check for image status manually.
  var isComplete = this.getIsImageComplete();
  if ( isComplete ) {
    // report based on naturalWidth
    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );
    return;
  }

  // If none of the checks above matched, simulate loading on detached element.
  this.proxyImage = new Image();
  this.proxyImage.addEventListener( 'load', this );
  this.proxyImage.addEventListener( 'error', this );
  // bind to image as well for Firefox. #191
  this.img.addEventListener( 'load', this );
  this.img.addEventListener( 'error', this );
  this.proxyImage.src = this.img.src;
};

LoadingImage.prototype.getIsImageComplete = function() {
  // check for non-zero, non-undefined naturalWidth
  // fixes Safari+InfiniteScroll+Masonry bug infinite-scroll#671
  return this.img.complete && this.img.naturalWidth;
};

LoadingImage.prototype.confirm = function( isLoaded, message ) {
  this.isLoaded = isLoaded;
  this.emitEvent( 'progress', [ this, this.img, message ] );
};

// ----- events ----- //

// trigger specified handler for event type
LoadingImage.prototype.handleEvent = function( event ) {
  var method = 'on' + event.type;
  if ( this[ method ] ) {
    this[ method ]( event );
  }
};

LoadingImage.prototype.onload = function() {
  this.confirm( true, 'onload' );
  this.unbindEvents();
};

LoadingImage.prototype.onerror = function() {
  this.confirm( false, 'onerror' );
  this.unbindEvents();
};

LoadingImage.prototype.unbindEvents = function() {
  this.proxyImage.removeEventListener( 'load', this );
  this.proxyImage.removeEventListener( 'error', this );
  this.img.removeEventListener( 'load', this );
  this.img.removeEventListener( 'error', this );
};

// -------------------------- Background -------------------------- //

function Background( url, element ) {
  this.url = url;
  this.element = element;
  this.img = new Image();
}

// inherit LoadingImage prototype
Background.prototype = Object.create( LoadingImage.prototype );

Background.prototype.check = function() {
  this.img.addEventListener( 'load', this );
  this.img.addEventListener( 'error', this );
  this.img.src = this.url;
  // check if image is already complete
  var isComplete = this.getIsImageComplete();
  if ( isComplete ) {
    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );
    this.unbindEvents();
  }
};

Background.prototype.unbindEvents = function() {
  this.img.removeEventListener( 'load', this );
  this.img.removeEventListener( 'error', this );
};

Background.prototype.confirm = function( isLoaded, message ) {
  this.isLoaded = isLoaded;
  this.emitEvent( 'progress', [ this, this.element, message ] );
};

// -------------------------- jQuery -------------------------- //

ImagesLoaded.makeJQueryPlugin = function( jQuery ) {
  jQuery = jQuery || window.jQuery;
  if ( !jQuery ) {
    return;
  }
  // set local variable
  $ = jQuery;
  // $().imagesLoaded()
  $.fn.imagesLoaded = function( options, callback ) {
    var instance = new ImagesLoaded( this, options, callback );
    return instance.jqDeferred.promise( $(this) );
  };
};
// try making plugin
ImagesLoaded.makeJQueryPlugin();

// --------------------------  -------------------------- //

return ImagesLoaded;

});

},{"ev-emitter":3}],5:[function(require,module,exports){
(function (global){
/**
 * @license
 * lodash 3.10.1 (Custom Build) <https://lodash.com/>
 * Build: `lodash modern -d -o ./index.js`
 * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <https://lodash.com/license>
 */
;(function() {

  /** Used as a safe reference for `undefined` in pre-ES5 environments. */
  var undefined;

  /** Used as the semantic version number. */
  var VERSION = '3.10.1';

  /** Used to compose bitmasks for wrapper metadata. */
  var BIND_FLAG = 1,
      BIND_KEY_FLAG = 2,
      CURRY_BOUND_FLAG = 4,
      CURRY_FLAG = 8,
      CURRY_RIGHT_FLAG = 16,
      PARTIAL_FLAG = 32,
      PARTIAL_RIGHT_FLAG = 64,
      ARY_FLAG = 128,
      REARG_FLAG = 256;

  /** Used as default options for `_.trunc`. */
  var DEFAULT_TRUNC_LENGTH = 30,
      DEFAULT_TRUNC_OMISSION = '...';

  /** Used to detect when a function becomes hot. */
  var HOT_COUNT = 150,
      HOT_SPAN = 16;

  /** Used as the size to enable large array optimizations. */
  var LARGE_ARRAY_SIZE = 200;

  /** Used to indicate the type of lazy iteratees. */
  var LAZY_FILTER_FLAG = 1,
      LAZY_MAP_FLAG = 2;

  /** Used as the `TypeError` message for "Functions" methods. */
  var FUNC_ERROR_TEXT = 'Expected a function';

  /** Used as the internal argument placeholder. */
  var PLACEHOLDER = '__lodash_placeholder__';

  /** `Object#toString` result references. */
  var argsTag = '[object Arguments]',
      arrayTag = '[object Array]',
      boolTag = '[object Boolean]',
      dateTag = '[object Date]',
      errorTag = '[object Error]',
      funcTag = '[object Function]',
      mapTag = '[object Map]',
      numberTag = '[object Number]',
      objectTag = '[object Object]',
      regexpTag = '[object RegExp]',
      setTag = '[object Set]',
      stringTag = '[object String]',
      weakMapTag = '[object WeakMap]';

  var arrayBufferTag = '[object ArrayBuffer]',
      float32Tag = '[object Float32Array]',
      float64Tag = '[object Float64Array]',
      int8Tag = '[object Int8Array]',
      int16Tag = '[object Int16Array]',
      int32Tag = '[object Int32Array]',
      uint8Tag = '[object Uint8Array]',
      uint8ClampedTag = '[object Uint8ClampedArray]',
      uint16Tag = '[object Uint16Array]',
      uint32Tag = '[object Uint32Array]';

  /** Used to match empty string literals in compiled template source. */
  var reEmptyStringLeading = /\b__p \+= '';/g,
      reEmptyStringMiddle = /\b(__p \+=) '' \+/g,
      reEmptyStringTrailing = /(__e\(.*?\)|\b__t\)) \+\n'';/g;

  /** Used to match HTML entities and HTML characters. */
  var reEscapedHtml = /&(?:amp|lt|gt|quot|#39|#96);/g,
      reUnescapedHtml = /[&<>"'`]/g,
      reHasEscapedHtml = RegExp(reEscapedHtml.source),
      reHasUnescapedHtml = RegExp(reUnescapedHtml.source);

  /** Used to match template delimiters. */
  var reEscape = /<%-([\s\S]+?)%>/g,
      reEvaluate = /<%([\s\S]+?)%>/g,
      reInterpolate = /<%=([\s\S]+?)%>/g;

  /** Used to match property names within property paths. */
  var reIsDeepProp = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,
      reIsPlainProp = /^\w*$/,
      rePropName = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g;

  /**
   * Used to match `RegExp` [syntax characters](http://ecma-international.org/ecma-262/6.0/#sec-patterns)
   * and those outlined by [`EscapeRegExpPattern`](http://ecma-international.org/ecma-262/6.0/#sec-escaperegexppattern).
   */
  var reRegExpChars = /^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,
      reHasRegExpChars = RegExp(reRegExpChars.source);

  /** Used to match [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks). */
  var reComboMark = /[\u0300-\u036f\ufe20-\ufe23]/g;

  /** Used to match backslashes in property paths. */
  var reEscapeChar = /\\(\\)?/g;

  /** Used to match [ES template delimiters](http://ecma-international.org/ecma-262/6.0/#sec-template-literal-lexical-components). */
  var reEsTemplate = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;

  /** Used to match `RegExp` flags from their coerced string values. */
  var reFlags = /\w*$/;

  /** Used to detect hexadecimal string values. */
  var reHasHexPrefix = /^0[xX]/;

  /** Used to detect host constructors (Safari > 5). */
  var reIsHostCtor = /^\[object .+?Constructor\]$/;

  /** Used to detect unsigned integer values. */
  var reIsUint = /^\d+$/;

  /** Used to match latin-1 supplementary letters (excluding mathematical operators). */
  var reLatin1 = /[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g;

  /** Used to ensure capturing order of template delimiters. */
  var reNoMatch = /($^)/;

  /** Used to match unescaped characters in compiled string literals. */
  var reUnescapedString = /['\n\r\u2028\u2029\\]/g;

  /** Used to match words to create compound words. */
  var reWords = (function() {
    var upper = '[A-Z\\xc0-\\xd6\\xd8-\\xde]',
        lower = '[a-z\\xdf-\\xf6\\xf8-\\xff]+';

    return RegExp(upper + '+(?=' + upper + lower + ')|' + upper + '?' + lower + '|' + upper + '+|[0-9]+', 'g');
  }());

  /** Used to assign default `context` object properties. */
  var contextProps = [
    'Array', 'ArrayBuffer', 'Date', 'Error', 'Float32Array', 'Float64Array',
    'Function', 'Int8Array', 'Int16Array', 'Int32Array', 'Math', 'Number',
    'Object', 'RegExp', 'Set', 'String', '_', 'clearTimeout', 'isFinite',
    'parseFloat', 'parseInt', 'setTimeout', 'TypeError', 'Uint8Array',
    'Uint8ClampedArray', 'Uint16Array', 'Uint32Array', 'WeakMap'
  ];

  /** Used to make template sourceURLs easier to identify. */
  var templateCounter = -1;

  /** Used to identify `toStringTag` values of typed arrays. */
  var typedArrayTags = {};
  typedArrayTags[float32Tag] = typedArrayTags[float64Tag] =
  typedArrayTags[int8Tag] = typedArrayTags[int16Tag] =
  typedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =
  typedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =
  typedArrayTags[uint32Tag] = true;
  typedArrayTags[argsTag] = typedArrayTags[arrayTag] =
  typedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =
  typedArrayTags[dateTag] = typedArrayTags[errorTag] =
  typedArrayTags[funcTag] = typedArrayTags[mapTag] =
  typedArrayTags[numberTag] = typedArrayTags[objectTag] =
  typedArrayTags[regexpTag] = typedArrayTags[setTag] =
  typedArrayTags[stringTag] = typedArrayTags[weakMapTag] = false;

  /** Used to identify `toStringTag` values supported by `_.clone`. */
  var cloneableTags = {};
  cloneableTags[argsTag] = cloneableTags[arrayTag] =
  cloneableTags[arrayBufferTag] = cloneableTags[boolTag] =
  cloneableTags[dateTag] = cloneableTags[float32Tag] =
  cloneableTags[float64Tag] = cloneableTags[int8Tag] =
  cloneableTags[int16Tag] = cloneableTags[int32Tag] =
  cloneableTags[numberTag] = cloneableTags[objectTag] =
  cloneableTags[regexpTag] = cloneableTags[stringTag] =
  cloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =
  cloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;
  cloneableTags[errorTag] = cloneableTags[funcTag] =
  cloneableTags[mapTag] = cloneableTags[setTag] =
  cloneableTags[weakMapTag] = false;

  /** Used to map latin-1 supplementary letters to basic latin letters. */
  var deburredLetters = {
    '\xc0': 'A',  '\xc1': 'A', '\xc2': 'A', '\xc3': 'A', '\xc4': 'A', '\xc5': 'A',
    '\xe0': 'a',  '\xe1': 'a', '\xe2': 'a', '\xe3': 'a', '\xe4': 'a', '\xe5': 'a',
    '\xc7': 'C',  '\xe7': 'c',
    '\xd0': 'D',  '\xf0': 'd',
    '\xc8': 'E',  '\xc9': 'E', '\xca': 'E', '\xcb': 'E',
    '\xe8': 'e',  '\xe9': 'e', '\xea': 'e', '\xeb': 'e',
    '\xcC': 'I',  '\xcd': 'I', '\xce': 'I', '\xcf': 'I',
    '\xeC': 'i',  '\xed': 'i', '\xee': 'i', '\xef': 'i',
    '\xd1': 'N',  '\xf1': 'n',
    '\xd2': 'O',  '\xd3': 'O', '\xd4': 'O', '\xd5': 'O', '\xd6': 'O', '\xd8': 'O',
    '\xf2': 'o',  '\xf3': 'o', '\xf4': 'o', '\xf5': 'o', '\xf6': 'o', '\xf8': 'o',
    '\xd9': 'U',  '\xda': 'U', '\xdb': 'U', '\xdc': 'U',
    '\xf9': 'u',  '\xfa': 'u', '\xfb': 'u', '\xfc': 'u',
    '\xdd': 'Y',  '\xfd': 'y', '\xff': 'y',
    '\xc6': 'Ae', '\xe6': 'ae',
    '\xde': 'Th', '\xfe': 'th',
    '\xdf': 'ss'
  };

  /** Used to map characters to HTML entities. */
  var htmlEscapes = {
    '&': '&amp;',
    '<': '&lt;',
    '>': '&gt;',
    '"': '&quot;',
    "'": '&#39;',
    '`': '&#96;'
  };

  /** Used to map HTML entities to characters. */
  var htmlUnescapes = {
    '&amp;': '&',
    '&lt;': '<',
    '&gt;': '>',
    '&quot;': '"',
    '&#39;': "'",
    '&#96;': '`'
  };

  /** Used to determine if values are of the language type `Object`. */
  var objectTypes = {
    'function': true,
    'object': true
  };

  /** Used to escape characters for inclusion in compiled regexes. */
  var regexpEscapes = {
    '0': 'x30', '1': 'x31', '2': 'x32', '3': 'x33', '4': 'x34',
    '5': 'x35', '6': 'x36', '7': 'x37', '8': 'x38', '9': 'x39',
    'A': 'x41', 'B': 'x42', 'C': 'x43', 'D': 'x44', 'E': 'x45', 'F': 'x46',
    'a': 'x61', 'b': 'x62', 'c': 'x63', 'd': 'x64', 'e': 'x65', 'f': 'x66',
    'n': 'x6e', 'r': 'x72', 't': 'x74', 'u': 'x75', 'v': 'x76', 'x': 'x78'
  };

  /** Used to escape characters for inclusion in compiled string literals. */
  var stringEscapes = {
    '\\': '\\',
    "'": "'",
    '\n': 'n',
    '\r': 'r',
    '\u2028': 'u2028',
    '\u2029': 'u2029'
  };

  /** Detect free variable `exports`. */
  var freeExports = objectTypes[typeof exports] && exports && !exports.nodeType && exports;

  /** Detect free variable `module`. */
  var freeModule = objectTypes[typeof module] && module && !module.nodeType && module;

  /** Detect free variable `global` from Node.js. */
  var freeGlobal = freeExports && freeModule && typeof global == 'object' && global && global.Object && global;

  /** Detect free variable `self`. */
  var freeSelf = objectTypes[typeof self] && self && self.Object && self;

  /** Detect free variable `window`. */
  var freeWindow = objectTypes[typeof window] && window && window.Object && window;

  /** Detect the popular CommonJS extension `module.exports`. */
  var moduleExports = freeModule && freeModule.exports === freeExports && freeExports;

  /**
   * Used as a reference to the global object.
   *
   * The `this` value is used if it's the global object to avoid Greasemonkey's
   * restricted `window` object, otherwise the `window` object is used.
   */
  var root = freeGlobal || ((freeWindow !== (this && this.window)) && freeWindow) || freeSelf || this;

  /*--------------------------------------------------------------------------*/

  /**
   * The base implementation of `compareAscending` which compares values and
   * sorts them in ascending order without guaranteeing a stable sort.
   *
   * @private
   * @param {*} value The value to compare.
   * @param {*} other The other value to compare.
   * @returns {number} Returns the sort order indicator for `value`.
   */
  function baseCompareAscending(value, other) {
    if (value !== other) {
      var valIsNull = value === null,
          valIsUndef = value === undefined,
          valIsReflexive = value === value;

      var othIsNull = other === null,
          othIsUndef = other === undefined,
          othIsReflexive = other === other;

      if ((value > other && !othIsNull) || !valIsReflexive ||
          (valIsNull && !othIsUndef && othIsReflexive) ||
          (valIsUndef && othIsReflexive)) {
        return 1;
      }
      if ((value < other && !valIsNull) || !othIsReflexive ||
          (othIsNull && !valIsUndef && valIsReflexive) ||
          (othIsUndef && valIsReflexive)) {
        return -1;
      }
    }
    return 0;
  }

  /**
   * The base implementation of `_.findIndex` and `_.findLastIndex` without
   * support for callback shorthands and `this` binding.
   *
   * @private
   * @param {Array} array The array to search.
   * @param {Function} predicate The function invoked per iteration.
   * @param {boolean} [fromRight] Specify iterating from right to left.
   * @returns {number} Returns the index of the matched value, else `-1`.
   */
  function baseFindIndex(array, predicate, fromRight) {
    var length = array.length,
        index = fromRight ? length : -1;

    while ((fromRight ? index-- : ++index < length)) {
      if (predicate(array[index], index, array)) {
        return index;
      }
    }
    return -1;
  }

  /**
   * The base implementation of `_.indexOf` without support for binary searches.
   *
   * @private
   * @param {Array} array The array to search.
   * @param {*} value The value to search for.
   * @param {number} fromIndex The index to search from.
   * @returns {number} Returns the index of the matched value, else `-1`.
   */
  function baseIndexOf(array, value, fromIndex) {
    if (value !== value) {
      return indexOfNaN(array, fromIndex);
    }
    var index = fromIndex - 1,
        length = array.length;

    while (++index < length) {
      if (array[index] === value) {
        return index;
      }
    }
    return -1;
  }

  /**
   * The base implementation of `_.isFunction` without support for environments
   * with incorrect `typeof` results.
   *
   * @private
   * @param {*} value The value to check.
   * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.
   */
  function baseIsFunction(value) {
    // Avoid a Chakra JIT bug in compatibility modes of IE 11.
    // See https://github.com/jashkenas/underscore/issues/1621 for more details.
    return typeof value == 'function' || false;
  }

  /**
   * Converts `value` to a string if it's not one. An empty string is returned
   * for `null` or `undefined` values.
   *
   * @private
   * @param {*} value The value to process.
   * @returns {string} Returns the string.
   */
  function baseToString(value) {
    return value == null ? '' : (value + '');
  }

  /**
   * Used by `_.trim` and `_.trimLeft` to get the index of the first character
   * of `string` that is not found in `chars`.
   *
   * @private
   * @param {string} string The string to inspect.
   * @param {string} chars The characters to find.
   * @returns {number} Returns the index of the first character not found in `chars`.
   */
  function charsLeftIndex(string, chars) {
    var index = -1,
        length = string.length;

    while (++index < length && chars.indexOf(string.charAt(index)) > -1) {}
    return index;
  }

  /**
   * Used by `_.trim` and `_.trimRight` to get the index of the last character
   * of `string` that is not found in `chars`.
   *
   * @private
   * @param {string} string The string to inspect.
   * @param {string} chars The characters to find.
   * @returns {number} Returns the index of the last character not found in `chars`.
   */
  function charsRightIndex(string, chars) {
    var index = string.length;

    while (index-- && chars.indexOf(string.charAt(index)) > -1) {}
    return index;
  }

  /**
   * Used by `_.sortBy` to compare transformed elements of a collection and stable
   * sort them in ascending order.
   *
   * @private
   * @param {Object} object The object to compare.
   * @param {Object} other The other object to compare.
   * @returns {number} Returns the sort order indicator for `object`.
   */
  function compareAscending(object, other) {
    return baseCompareAscending(object.criteria, other.criteria) || (object.index - other.index);
  }

  /**
   * Used by `_.sortByOrder` to compare multiple properties of a value to another
   * and stable sort them.
   *
   * If `orders` is unspecified, all valuess are sorted in ascending order. Otherwise,
   * a value is sorted in ascending order if its corresponding order is "asc", and
   * descending if "desc".
   *
   * @private
   * @param {Object} object The object to compare.
   * @param {Object} other The other object to compare.
   * @param {boolean[]} orders The order to sort by for each property.
   * @returns {number} Returns the sort order indicator for `object`.
   */
  function compareMultiple(object, other, orders) {
    var index = -1,
        objCriteria = object.criteria,
        othCriteria = other.criteria,
        length = objCriteria.length,
        ordersLength = orders.length;

    while (++index < length) {
      var result = baseCompareAscending(objCriteria[index], othCriteria[index]);
      if (result) {
        if (index >= ordersLength) {
          return result;
        }
        var order = orders[index];
        return result * ((order === 'asc' || order === true) ? 1 : -1);
      }
    }
    // Fixes an `Array#sort` bug in the JS engine embedded in Adobe applications
    // that causes it, under certain circumstances, to provide the same value for
    // `object` and `other`. See https://github.com/jashkenas/underscore/pull/1247
    // for more details.
    //
    // This also ensures a stable sort in V8 and other engines.
    // See https://code.google.com/p/v8/issues/detail?id=90 for more details.
    return object.index - other.index;
  }

  /**
   * Used by `_.deburr` to convert latin-1 supplementary letters to basic latin letters.
   *
   * @private
   * @param {string} letter The matched letter to deburr.
   * @returns {string} Returns the deburred letter.
   */
  function deburrLetter(letter) {
    return deburredLetters[letter];
  }

  /**
   * Used by `_.escape` to convert characters to HTML entities.
   *
   * @private
   * @param {string} chr The matched character to escape.
   * @returns {string} Returns the escaped character.
   */
  function escapeHtmlChar(chr) {
    return htmlEscapes[chr];
  }

  /**
   * Used by `_.escapeRegExp` to escape characters for inclusion in compiled regexes.
   *
   * @private
   * @param {string} chr The matched character to escape.
   * @param {string} leadingChar The capture group for a leading character.
   * @param {string} whitespaceChar The capture group for a whitespace character.
   * @returns {string} Returns the escaped character.
   */
  function escapeRegExpChar(chr, leadingChar, whitespaceChar) {
    if (leadingChar) {
      chr = regexpEscapes[chr];
    } else if (whitespaceChar) {
      chr = stringEscapes[chr];
    }
    return '\\' + chr;
  }

  /**
   * Used by `_.template` to escape characters for inclusion in compiled string literals.
   *
   * @private
   * @param {string} chr The matched character to escape.
   * @returns {string} Returns the escaped character.
   */
  function escapeStringChar(chr) {
    return '\\' + stringEscapes[chr];
  }

  /**
   * Gets the index at which the first occurrence of `NaN` is found in `array`.
   *
   * @private
   * @param {Array} array The array to search.
   * @param {number} fromIndex The index to search from.
   * @param {boolean} [fromRight] Specify iterating from right to left.
   * @returns {number} Returns the index of the matched `NaN`, else `-1`.
   */
  function indexOfNaN(array, fromIndex, fromRight) {
    var length = array.length,
        index = fromIndex + (fromRight ? 0 : -1);

    while ((fromRight ? index-- : ++index < length)) {
      var other = array[index];
      if (other !== other) {
        return index;
      }
    }
    return -1;
  }

  /**
   * Checks if `value` is object-like.
   *
   * @private
   * @param {*} value The value to check.
   * @returns {boolean} Returns `true` if `value` is object-like, else `false`.
   */
  function isObjectLike(value) {
    return !!value && typeof value == 'object';
  }

  /**
   * Used by `trimmedLeftIndex` and `trimmedRightIndex` to determine if a
   * character code is whitespace.
   *
   * @private
   * @param {number} charCode The character code to inspect.
   * @returns {boolean} Returns `true` if `charCode` is whitespace, else `false`.
   */
  function isSpace(charCode) {
    return ((charCode <= 160 && (charCode >= 9 && charCode <= 13) || charCode == 32 || charCode == 160) || charCode == 5760 || charCode == 6158 ||
      (charCode >= 8192 && (charCode <= 8202 || charCode == 8232 || charCode == 8233 || charCode == 8239 || charCode == 8287 || charCode == 12288 || charCode == 65279)));
  }

  /**
   * Replaces all `placeholder` elements in `array` with an internal placeholder
   * and returns an array of their indexes.
   *
   * @private
   * @param {Array} array The array to modify.
   * @param {*} placeholder The placeholder to replace.
   * @returns {Array} Returns the new array of placeholder indexes.
   */
  function replaceHolders(array, placeholder) {
    var index = -1,
        length = array.length,
        resIndex = -1,
        result = [];

    while (++index < length) {
      if (array[index] === placeholder) {
        array[index] = PLACEHOLDER;
        result[++resIndex] = index;
      }
    }
    return result;
  }

  /**
   * An implementation of `_.uniq` optimized for sorted arrays without support
   * for callback shorthands and `this` binding.
   *
   * @private
   * @param {Array} array The array to inspect.
   * @param {Function} [iteratee] The function invoked per iteration.
   * @returns {Array} Returns the new duplicate-value-free array.
   */
  function sortedUniq(array, iteratee) {
    var seen,
        index = -1,
        length = array.length,
        resIndex = -1,
        result = [];

    while (++index < length) {
      var value = array[index],
          computed = iteratee ? iteratee(value, index, array) : value;

      if (!index || seen !== computed) {
        seen = computed;
        result[++resIndex] = value;
      }
    }
    return result;
  }

  /**
   * Used by `_.trim` and `_.trimLeft` to get the index of the first non-whitespace
   * character of `string`.
   *
   * @private
   * @param {string} string The string to inspect.
   * @returns {number} Returns the index of the first non-whitespace character.
   */
  function trimmedLeftIndex(string) {
    var index = -1,
        length = string.length;

    while (++index < length && isSpace(string.charCodeAt(index))) {}
    return index;
  }

  /**
   * Used by `_.trim` and `_.trimRight` to get the index of the last non-whitespace
   * character of `string`.
   *
   * @private
   * @param {string} string The string to inspect.
   * @returns {number} Returns the index of the last non-whitespace character.
   */
  function trimmedRightIndex(string) {
    var index = string.length;

    while (index-- && isSpace(string.charCodeAt(index))) {}
    return index;
  }

  /**
   * Used by `_.unescape` to convert HTML entities to characters.
   *
   * @private
   * @param {string} chr The matched character to unescape.
   * @returns {string} Returns the unescaped character.
   */
  function unescapeHtmlChar(chr) {
    return htmlUnescapes[chr];
  }

  /*--------------------------------------------------------------------------*/

  /**
   * Create a new pristine `lodash` function using the given `context` object.
   *
   * @static
   * @memberOf _
   * @category Utility
   * @param {Object} [context=root] The context object.
   * @returns {Function} Returns a new `lodash` function.
   * @example
   *
   * _.mixin({ 'foo': _.constant('foo') });
   *
   * var lodash = _.runInContext();
   * lodash.mixin({ 'bar': lodash.constant('bar') });
   *
   * _.isFunction(_.foo);
   * // => true
   * _.isFunction(_.bar);
   * // => false
   *
   * lodash.isFunction(lodash.foo);
   * // => false
   * lodash.isFunction(lodash.bar);
   * // => true
   *
   * // using `context` to mock `Date#getTime` use in `_.now`
   * var mock = _.runInContext({
   *   'Date': function() {
   *     return { 'getTime': getTimeMock };
   *   }
   * });
   *
   * // or creating a suped-up `defer` in Node.js
   * var defer = _.runInContext({ 'setTimeout': setImmediate }).defer;
   */
  function runInContext(context) {
    // Avoid issues with some ES3 environments that attempt to use values, named
    // after built-in constructors like `Object`, for the creation of literals.
    // ES5 clears this up by stating that literals must use built-in constructors.
    // See https://es5.github.io/#x11.1.5 for more details.
    context = context ? _.defaults(root.Object(), context, _.pick(root, contextProps)) : root;

    /** Native constructor references. */
    var Array = context.Array,
        Date = context.Date,
        Error = context.Error,
        Function = context.Function,
        Math = context.Math,
        Number = context.Number,
        Object = context.Object,
        RegExp = context.RegExp,
        String = context.String,
        TypeError = context.TypeError;

    /** Used for native method references. */
    var arrayProto = Array.prototype,
        objectProto = Object.prototype,
        stringProto = String.prototype;

    /** Used to resolve the decompiled source of functions. */
    var fnToString = Function.prototype.toString;

    /** Used to check objects for own properties. */
    var hasOwnProperty = objectProto.hasOwnProperty;

    /** Used to generate unique IDs. */
    var idCounter = 0;

    /**
     * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)
     * of values.
     */
    var objToString = objectProto.toString;

    /** Used to restore the original `_` reference in `_.noConflict`. */
    var oldDash = root._;

    /** Used to detect if a method is native. */
    var reIsNative = RegExp('^' +
      fnToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g, '\\$&')
      .replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, '$1.*?') + '$'
    );

    /** Native method references. */
    var ArrayBuffer = context.ArrayBuffer,
        clearTimeout = context.clearTimeout,
        parseFloat = context.parseFloat,
        pow = Math.pow,
        propertyIsEnumerable = objectProto.propertyIsEnumerable,
        Set = getNative(context, 'Set'),
        setTimeout = context.setTimeout,
        splice = arrayProto.splice,
        Uint8Array = context.Uint8Array,
        WeakMap = getNative(context, 'WeakMap');

    /* Native method references for those with the same name as other `lodash` methods. */
    var nativeCeil = Math.ceil,
        nativeCreate = getNative(Object, 'create'),
        nativeFloor = Math.floor,
        nativeIsArray = getNative(Array, 'isArray'),
        nativeIsFinite = context.isFinite,
        nativeKeys = getNative(Object, 'keys'),
        nativeMax = Math.max,
        nativeMin = Math.min,
        nativeNow = getNative(Date, 'now'),
        nativeParseInt = context.parseInt,
        nativeRandom = Math.random;

    /** Used as references for `-Infinity` and `Infinity`. */
    var NEGATIVE_INFINITY = Number.NEGATIVE_INFINITY,
        POSITIVE_INFINITY = Number.POSITIVE_INFINITY;

    /** Used as references for the maximum length and index of an array. */
    var MAX_ARRAY_LENGTH = 4294967295,
        MAX_ARRAY_INDEX = MAX_ARRAY_LENGTH - 1,
        HALF_MAX_ARRAY_LENGTH = MAX_ARRAY_LENGTH >>> 1;

    /**
     * Used as the [maximum length](http://ecma-international.org/ecma-262/6.0/#sec-number.max_safe_integer)
     * of an array-like value.
     */
    var MAX_SAFE_INTEGER = 9007199254740991;

    /** Used to store function metadata. */
    var metaMap = WeakMap && new WeakMap;

    /** Used to lookup unminified function names. */
    var realNames = {};

    /*------------------------------------------------------------------------*/

    /**
     * Creates a `lodash` object which wraps `value` to enable implicit chaining.
     * Methods that operate on and return arrays, collections, and functions can
     * be chained together. Methods that retrieve a single value or may return a
     * primitive value will automatically end the chain returning the unwrapped
     * value. Explicit chaining may be enabled using `_.chain`. The execution of
     * chained methods is lazy, that is, execution is deferred until `_#value`
     * is implicitly or explicitly called.
     *
     * Lazy evaluation allows several methods to support shortcut fusion. Shortcut
     * fusion is an optimization strategy which merge iteratee calls; this can help
     * to avoid the creation of intermediate data structures and greatly reduce the
     * number of iteratee executions.
     *
     * Chaining is supported in custom builds as long as the `_#value` method is
     * directly or indirectly included in the build.
     *
     * In addition to lodash methods, wrappers have `Array` and `String` methods.
     *
     * The wrapper `Array` methods are:
     * `concat`, `join`, `pop`, `push`, `reverse`, `shift`, `slice`, `sort`,
     * `splice`, and `unshift`
     *
     * The wrapper `String` methods are:
     * `replace` and `split`
     *
     * The wrapper methods that support shortcut fusion are:
     * `compact`, `drop`, `dropRight`, `dropRightWhile`, `dropWhile`, `filter`,
     * `first`, `initial`, `last`, `map`, `pluck`, `reject`, `rest`, `reverse`,
     * `slice`, `take`, `takeRight`, `takeRightWhile`, `takeWhile`, `toArray`,
     * and `where`
     *
     * The chainable wrapper methods are:
     * `after`, `ary`, `assign`, `at`, `before`, `bind`, `bindAll`, `bindKey`,
     * `callback`, `chain`, `chunk`, `commit`, `compact`, `concat`, `constant`,
     * `countBy`, `create`, `curry`, `debounce`, `defaults`, `defaultsDeep`,
     * `defer`, `delay`, `difference`, `drop`, `dropRight`, `dropRightWhile`,
     * `dropWhile`, `fill`, `filter`, `flatten`, `flattenDeep`, `flow`, `flowRight`,
     * `forEach`, `forEachRight`, `forIn`, `forInRight`, `forOwn`, `forOwnRight`,
     * `functions`, `groupBy`, `indexBy`, `initial`, `intersection`, `invert`,
     * `invoke`, `keys`, `keysIn`, `map`, `mapKeys`, `mapValues`, `matches`,
     * `matchesProperty`, `memoize`, `merge`, `method`, `methodOf`, `mixin`,
     * `modArgs`, `negate`, `omit`, `once`, `pairs`, `partial`, `partialRight`,
     * `partition`, `pick`, `plant`, `pluck`, `property`, `propertyOf`, `pull`,
     * `pullAt`, `push`, `range`, `rearg`, `reject`, `remove`, `rest`, `restParam`,
     * `reverse`, `set`, `shuffle`, `slice`, `sort`, `sortBy`, `sortByAll`,
     * `sortByOrder`, `splice`, `spread`, `take`, `takeRight`, `takeRightWhile`,
     * `takeWhile`, `tap`, `throttle`, `thru`, `times`, `toArray`, `toPlainObject`,
     * `transform`, `union`, `uniq`, `unshift`, `unzip`, `unzipWith`, `values`,
     * `valuesIn`, `where`, `without`, `wrap`, `xor`, `zip`, `zipObject`, `zipWith`
     *
     * The wrapper methods that are **not** chainable by default are:
     * `add`, `attempt`, `camelCase`, `capitalize`, `ceil`, `clone`, `cloneDeep`,
     * `deburr`, `endsWith`, `escape`, `escapeRegExp`, `every`, `find`, `findIndex`,
     * `findKey`, `findLast`, `findLastIndex`, `findLastKey`, `findWhere`, `first`,
     * `floor`, `get`, `gt`, `gte`, `has`, `identity`, `includes`, `indexOf`,
     * `inRange`, `isArguments`, `isArray`, `isBoolean`, `isDate`, `isElement`,
     * `isEmpty`, `isEqual`, `isError`, `isFinite` `isFunction`, `isMatch`,
     * `isNative`, `isNaN`, `isNull`, `isNumber`, `isObject`, `isPlainObject`,
     * `isRegExp`, `isString`, `isUndefined`, `isTypedArray`, `join`, `kebabCase`,
     * `last`, `lastIndexOf`, `lt`, `lte`, `max`, `min`, `noConflict`, `noop`,
     * `now`, `pad`, `padLeft`, `padRight`, `parseInt`, `pop`, `random`, `reduce`,
     * `reduceRight`, `repeat`, `result`, `round`, `runInContext`, `shift`, `size`,
     * `snakeCase`, `some`, `sortedIndex`, `sortedLastIndex`, `startCase`,
     * `startsWith`, `sum`, `template`, `trim`, `trimLeft`, `trimRight`, `trunc`,
     * `unescape`, `uniqueId`, `value`, and `words`
     *
     * The wrapper method `sample` will return a wrapped value when `n` is provided,
     * otherwise an unwrapped value is returned.
     *
     * @name _
     * @constructor
     * @category Chain
     * @param {*} value The value to wrap in a `lodash` instance.
     * @returns {Object} Returns the new `lodash` wrapper instance.
     * @example
     *
     * var wrapped = _([1, 2, 3]);
     *
     * // returns an unwrapped value
     * wrapped.reduce(function(total, n) {
     *   return total + n;
     * });
     * // => 6
     *
     * // returns a wrapped value
     * var squares = wrapped.map(function(n) {
     *   return n * n;
     * });
     *
     * _.isArray(squares);
     * // => false
     *
     * _.isArray(squares.value());
     * // => true
     */
    function lodash(value) {
      if (isObjectLike(value) && !isArray(value) && !(value instanceof LazyWrapper)) {
        if (value instanceof LodashWrapper) {
          return value;
        }
        if (hasOwnProperty.call(value, '__chain__') && hasOwnProperty.call(value, '__wrapped__')) {
          return wrapperClone(value);
        }
      }
      return new LodashWrapper(value);
    }

    /**
     * The function whose prototype all chaining wrappers inherit from.
     *
     * @private
     */
    function baseLodash() {
      // No operation performed.
    }

    /**
     * The base constructor for creating `lodash` wrapper objects.
     *
     * @private
     * @param {*} value The value to wrap.
     * @param {boolean} [chainAll] Enable chaining for all wrapper methods.
     * @param {Array} [actions=[]] Actions to peform to resolve the unwrapped value.
     */
    function LodashWrapper(value, chainAll, actions) {
      this.__wrapped__ = value;
      this.__actions__ = actions || [];
      this.__chain__ = !!chainAll;
    }

    /**
     * An object environment feature flags.
     *
     * @static
     * @memberOf _
     * @type Object
     */
    var support = lodash.support = {};

    /**
     * By default, the template delimiters used by lodash are like those in
     * embedded Ruby (ERB). Change the following template settings to use
     * alternative delimiters.
     *
     * @static
     * @memberOf _
     * @type Object
     */
    lodash.templateSettings = {

      /**
       * Used to detect `data` property values to be HTML-escaped.
       *
       * @memberOf _.templateSettings
       * @type RegExp
       */
      'escape': reEscape,

      /**
       * Used to detect code to be evaluated.
       *
       * @memberOf _.templateSettings
       * @type RegExp
       */
      'evaluate': reEvaluate,

      /**
       * Used to detect `data` property values to inject.
       *
       * @memberOf _.templateSettings
       * @type RegExp
       */
      'interpolate': reInterpolate,

      /**
       * Used to reference the data object in the template text.
       *
       * @memberOf _.templateSettings
       * @type string
       */
      'variable': '',

      /**
       * Used to import variables into the compiled template.
       *
       * @memberOf _.templateSettings
       * @type Object
       */
      'imports': {

        /**
         * A reference to the `lodash` function.
         *
         * @memberOf _.templateSettings.imports
         * @type Function
         */
        '_': lodash
      }
    };

    /*------------------------------------------------------------------------*/

    /**
     * Creates a lazy wrapper object which wraps `value` to enable lazy evaluation.
     *
     * @private
     * @param {*} value The value to wrap.
     */
    function LazyWrapper(value) {
      this.__wrapped__ = value;
      this.__actions__ = [];
      this.__dir__ = 1;
      this.__filtered__ = false;
      this.__iteratees__ = [];
      this.__takeCount__ = POSITIVE_INFINITY;
      this.__views__ = [];
    }

    /**
     * Creates a clone of the lazy wrapper object.
     *
     * @private
     * @name clone
     * @memberOf LazyWrapper
     * @returns {Object} Returns the cloned `LazyWrapper` object.
     */
    function lazyClone() {
      var result = new LazyWrapper(this.__wrapped__);
      result.__actions__ = arrayCopy(this.__actions__);
      result.__dir__ = this.__dir__;
      result.__filtered__ = this.__filtered__;
      result.__iteratees__ = arrayCopy(this.__iteratees__);
      result.__takeCount__ = this.__takeCount__;
      result.__views__ = arrayCopy(this.__views__);
      return result;
    }

    /**
     * Reverses the direction of lazy iteration.
     *
     * @private
     * @name reverse
     * @memberOf LazyWrapper
     * @returns {Object} Returns the new reversed `LazyWrapper` object.
     */
    function lazyReverse() {
      if (this.__filtered__) {
        var result = new LazyWrapper(this);
        result.__dir__ = -1;
        result.__filtered__ = true;
      } else {
        result = this.clone();
        result.__dir__ *= -1;
      }
      return result;
    }

    /**
     * Extracts the unwrapped value from its lazy wrapper.
     *
     * @private
     * @name value
     * @memberOf LazyWrapper
     * @returns {*} Returns the unwrapped value.
     */
    function lazyValue() {
      var array = this.__wrapped__.value(),
          dir = this.__dir__,
          isArr = isArray(array),
          isRight = dir < 0,
          arrLength = isArr ? array.length : 0,
          view = getView(0, arrLength, this.__views__),
          start = view.start,
          end = view.end,
          length = end - start,
          index = isRight ? end : (start - 1),
          iteratees = this.__iteratees__,
          iterLength = iteratees.length,
          resIndex = 0,
          takeCount = nativeMin(length, this.__takeCount__);

      if (!isArr || arrLength < LARGE_ARRAY_SIZE || (arrLength == length && takeCount == length)) {
        return baseWrapperValue((isRight && isArr) ? array.reverse() : array, this.__actions__);
      }
      var result = [];

      outer:
      while (length-- && resIndex < takeCount) {
        index += dir;

        var iterIndex = -1,
            value = array[index];

        while (++iterIndex < iterLength) {
          var data = iteratees[iterIndex],
              iteratee = data.iteratee,
              type = data.type,
              computed = iteratee(value);

          if (type == LAZY_MAP_FLAG) {
            value = computed;
          } else if (!computed) {
            if (type == LAZY_FILTER_FLAG) {
              continue outer;
            } else {
              break outer;
            }
          }
        }
        result[resIndex++] = value;
      }
      return result;
    }

    /*------------------------------------------------------------------------*/

    /**
     * Creates a cache object to store key/value pairs.
     *
     * @private
     * @static
     * @name Cache
     * @memberOf _.memoize
     */
    function MapCache() {
      this.__data__ = {};
    }

    /**
     * Removes `key` and its value from the cache.
     *
     * @private
     * @name delete
     * @memberOf _.memoize.Cache
     * @param {string} key The key of the value to remove.
     * @returns {boolean} Returns `true` if the entry was removed successfully, else `false`.
     */
    function mapDelete(key) {
      return this.has(key) && delete this.__data__[key];
    }

    /**
     * Gets the cached value for `key`.
     *
     * @private
     * @name get
     * @memberOf _.memoize.Cache
     * @param {string} key The key of the value to get.
     * @returns {*} Returns the cached value.
     */
    function mapGet(key) {
      return key == '__proto__' ? undefined : this.__data__[key];
    }

    /**
     * Checks if a cached value for `key` exists.
     *
     * @private
     * @name has
     * @memberOf _.memoize.Cache
     * @param {string} key The key of the entry to check.
     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
     */
    function mapHas(key) {
      return key != '__proto__' && hasOwnProperty.call(this.__data__, key);
    }

    /**
     * Sets `value` to `key` of the cache.
     *
     * @private
     * @name set
     * @memberOf _.memoize.Cache
     * @param {string} key The key of the value to cache.
     * @param {*} value The value to cache.
     * @returns {Object} Returns the cache object.
     */
    function mapSet(key, value) {
      if (key != '__proto__') {
        this.__data__[key] = value;
      }
      return this;
    }

    /*------------------------------------------------------------------------*/

    /**
     *
     * Creates a cache object to store unique values.
     *
     * @private
     * @param {Array} [values] The values to cache.
     */
    function SetCache(values) {
      var length = values ? values.length : 0;

      this.data = { 'hash': nativeCreate(null), 'set': new Set };
      while (length--) {
        this.push(values[length]);
      }
    }

    /**
     * Checks if `value` is in `cache` mimicking the return signature of
     * `_.indexOf` by returning `0` if the value is found, else `-1`.
     *
     * @private
     * @param {Object} cache The cache to search.
     * @param {*} value The value to search for.
     * @returns {number} Returns `0` if `value` is found, else `-1`.
     */
    function cacheIndexOf(cache, value) {
      var data = cache.data,
          result = (typeof value == 'string' || isObject(value)) ? data.set.has(value) : data.hash[value];

      return result ? 0 : -1;
    }

    /**
     * Adds `value` to the cache.
     *
     * @private
     * @name push
     * @memberOf SetCache
     * @param {*} value The value to cache.
     */
    function cachePush(value) {
      var data = this.data;
      if (typeof value == 'string' || isObject(value)) {
        data.set.add(value);
      } else {
        data.hash[value] = true;
      }
    }

    /*------------------------------------------------------------------------*/

    /**
     * Creates a new array joining `array` with `other`.
     *
     * @private
     * @param {Array} array The array to join.
     * @param {Array} other The other array to join.
     * @returns {Array} Returns the new concatenated array.
     */
    function arrayConcat(array, other) {
      var index = -1,
          length = array.length,
          othIndex = -1,
          othLength = other.length,
          result = Array(length + othLength);

      while (++index < length) {
        result[index] = array[index];
      }
      while (++othIndex < othLength) {
        result[index++] = other[othIndex];
      }
      return result;
    }

    /**
     * Copies the values of `source` to `array`.
     *
     * @private
     * @param {Array} source The array to copy values from.
     * @param {Array} [array=[]] The array to copy values to.
     * @returns {Array} Returns `array`.
     */
    function arrayCopy(source, array) {
      var index = -1,
          length = source.length;

      array || (array = Array(length));
      while (++index < length) {
        array[index] = source[index];
      }
      return array;
    }

    /**
     * A specialized version of `_.forEach` for arrays without support for callback
     * shorthands and `this` binding.
     *
     * @private
     * @param {Array} array The array to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @returns {Array} Returns `array`.
     */
    function arrayEach(array, iteratee) {
      var index = -1,
          length = array.length;

      while (++index < length) {
        if (iteratee(array[index], index, array) === false) {
          break;
        }
      }
      return array;
    }

    /**
     * A specialized version of `_.forEachRight` for arrays without support for
     * callback shorthands and `this` binding.
     *
     * @private
     * @param {Array} array The array to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @returns {Array} Returns `array`.
     */
    function arrayEachRight(array, iteratee) {
      var length = array.length;

      while (length--) {
        if (iteratee(array[length], length, array) === false) {
          break;
        }
      }
      return array;
    }

    /**
     * A specialized version of `_.every` for arrays without support for callback
     * shorthands and `this` binding.
     *
     * @private
     * @param {Array} array The array to iterate over.
     * @param {Function} predicate The function invoked per iteration.
     * @returns {boolean} Returns `true` if all elements pass the predicate check,
     *  else `false`.
     */
    function arrayEvery(array, predicate) {
      var index = -1,
          length = array.length;

      while (++index < length) {
        if (!predicate(array[index], index, array)) {
          return false;
        }
      }
      return true;
    }

    /**
     * A specialized version of `baseExtremum` for arrays which invokes `iteratee`
     * with one argument: (value).
     *
     * @private
     * @param {Array} array The array to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @param {Function} comparator The function used to compare values.
     * @param {*} exValue The initial extremum value.
     * @returns {*} Returns the extremum value.
     */
    function arrayExtremum(array, iteratee, comparator, exValue) {
      var index = -1,
          length = array.length,
          computed = exValue,
          result = computed;

      while (++index < length) {
        var value = array[index],
            current = +iteratee(value);

        if (comparator(current, computed)) {
          computed = current;
          result = value;
        }
      }
      return result;
    }

    /**
     * A specialized version of `_.filter` for arrays without support for callback
     * shorthands and `this` binding.
     *
     * @private
     * @param {Array} array The array to iterate over.
     * @param {Function} predicate The function invoked per iteration.
     * @returns {Array} Returns the new filtered array.
     */
    function arrayFilter(array, predicate) {
      var index = -1,
          length = array.length,
          resIndex = -1,
          result = [];

      while (++index < length) {
        var value = array[index];
        if (predicate(value, index, array)) {
          result[++resIndex] = value;
        }
      }
      return result;
    }

    /**
     * A specialized version of `_.map` for arrays without support for callback
     * shorthands and `this` binding.
     *
     * @private
     * @param {Array} array The array to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @returns {Array} Returns the new mapped array.
     */
    function arrayMap(array, iteratee) {
      var index = -1,
          length = array.length,
          result = Array(length);

      while (++index < length) {
        result[index] = iteratee(array[index], index, array);
      }
      return result;
    }

    /**
     * Appends the elements of `values` to `array`.
     *
     * @private
     * @param {Array} array The array to modify.
     * @param {Array} values The values to append.
     * @returns {Array} Returns `array`.
     */
    function arrayPush(array, values) {
      var index = -1,
          length = values.length,
          offset = array.length;

      while (++index < length) {
        array[offset + index] = values[index];
      }
      return array;
    }

    /**
     * A specialized version of `_.reduce` for arrays without support for callback
     * shorthands and `this` binding.
     *
     * @private
     * @param {Array} array The array to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @param {*} [accumulator] The initial value.
     * @param {boolean} [initFromArray] Specify using the first element of `array`
     *  as the initial value.
     * @returns {*} Returns the accumulated value.
     */
    function arrayReduce(array, iteratee, accumulator, initFromArray) {
      var index = -1,
          length = array.length;

      if (initFromArray && length) {
        accumulator = array[++index];
      }
      while (++index < length) {
        accumulator = iteratee(accumulator, array[index], index, array);
      }
      return accumulator;
    }

    /**
     * A specialized version of `_.reduceRight` for arrays without support for
     * callback shorthands and `this` binding.
     *
     * @private
     * @param {Array} array The array to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @param {*} [accumulator] The initial value.
     * @param {boolean} [initFromArray] Specify using the last element of `array`
     *  as the initial value.
     * @returns {*} Returns the accumulated value.
     */
    function arrayReduceRight(array, iteratee, accumulator, initFromArray) {
      var length = array.length;
      if (initFromArray && length) {
        accumulator = array[--length];
      }
      while (length--) {
        accumulator = iteratee(accumulator, array[length], length, array);
      }
      return accumulator;
    }

    /**
     * A specialized version of `_.some` for arrays without support for callback
     * shorthands and `this` binding.
     *
     * @private
     * @param {Array} array The array to iterate over.
     * @param {Function} predicate The function invoked per iteration.
     * @returns {boolean} Returns `true` if any element passes the predicate check,
     *  else `false`.
     */
    function arraySome(array, predicate) {
      var index = -1,
          length = array.length;

      while (++index < length) {
        if (predicate(array[index], index, array)) {
          return true;
        }
      }
      return false;
    }

    /**
     * A specialized version of `_.sum` for arrays without support for callback
     * shorthands and `this` binding..
     *
     * @private
     * @param {Array} array The array to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @returns {number} Returns the sum.
     */
    function arraySum(array, iteratee) {
      var length = array.length,
          result = 0;

      while (length--) {
        result += +iteratee(array[length]) || 0;
      }
      return result;
    }

    /**
     * Used by `_.defaults` to customize its `_.assign` use.
     *
     * @private
     * @param {*} objectValue The destination object property value.
     * @param {*} sourceValue The source object property value.
     * @returns {*} Returns the value to assign to the destination object.
     */
    function assignDefaults(objectValue, sourceValue) {
      return objectValue === undefined ? sourceValue : objectValue;
    }

    /**
     * Used by `_.template` to customize its `_.assign` use.
     *
     * **Note:** This function is like `assignDefaults` except that it ignores
     * inherited property values when checking if a property is `undefined`.
     *
     * @private
     * @param {*} objectValue The destination object property value.
     * @param {*} sourceValue The source object property value.
     * @param {string} key The key associated with the object and source values.
     * @param {Object} object The destination object.
     * @returns {*} Returns the value to assign to the destination object.
     */
    function assignOwnDefaults(objectValue, sourceValue, key, object) {
      return (objectValue === undefined || !hasOwnProperty.call(object, key))
        ? sourceValue
        : objectValue;
    }

    /**
     * A specialized version of `_.assign` for customizing assigned values without
     * support for argument juggling, multiple sources, and `this` binding `customizer`
     * functions.
     *
     * @private
     * @param {Object} object The destination object.
     * @param {Object} source The source object.
     * @param {Function} customizer The function to customize assigned values.
     * @returns {Object} Returns `object`.
     */
    function assignWith(object, source, customizer) {
      var index = -1,
          props = keys(source),
          length = props.length;

      while (++index < length) {
        var key = props[index],
            value = object[key],
            result = customizer(value, source[key], key, object, source);

        if ((result === result ? (result !== value) : (value === value)) ||
            (value === undefined && !(key in object))) {
          object[key] = result;
        }
      }
      return object;
    }

    /**
     * The base implementation of `_.assign` without support for argument juggling,
     * multiple sources, and `customizer` functions.
     *
     * @private
     * @param {Object} object The destination object.
     * @param {Object} source The source object.
     * @returns {Object} Returns `object`.
     */
    function baseAssign(object, source) {
      return source == null
        ? object
        : baseCopy(source, keys(source), object);
    }

    /**
     * The base implementation of `_.at` without support for string collections
     * and individual key arguments.
     *
     * @private
     * @param {Array|Object} collection The collection to iterate over.
     * @param {number[]|string[]} props The property names or indexes of elements to pick.
     * @returns {Array} Returns the new array of picked elements.
     */
    function baseAt(collection, props) {
      var index = -1,
          isNil = collection == null,
          isArr = !isNil && isArrayLike(collection),
          length = isArr ? collection.length : 0,
          propsLength = props.length,
          result = Array(propsLength);

      while(++index < propsLength) {
        var key = props[index];
        if (isArr) {
          result[index] = isIndex(key, length) ? collection[key] : undefined;
        } else {
          result[index] = isNil ? undefined : collection[key];
        }
      }
      return result;
    }

    /**
     * Copies properties of `source` to `object`.
     *
     * @private
     * @param {Object} source The object to copy properties from.
     * @param {Array} props The property names to copy.
     * @param {Object} [object={}] The object to copy properties to.
     * @returns {Object} Returns `object`.
     */
    function baseCopy(source, props, object) {
      object || (object = {});

      var index = -1,
          length = props.length;

      while (++index < length) {
        var key = props[index];
        object[key] = source[key];
      }
      return object;
    }

    /**
     * The base implementation of `_.callback` which supports specifying the
     * number of arguments to provide to `func`.
     *
     * @private
     * @param {*} [func=_.identity] The value to convert to a callback.
     * @param {*} [thisArg] The `this` binding of `func`.
     * @param {number} [argCount] The number of arguments to provide to `func`.
     * @returns {Function} Returns the callback.
     */
    function baseCallback(func, thisArg, argCount) {
      var type = typeof func;
      if (type == 'function') {
        return thisArg === undefined
          ? func
          : bindCallback(func, thisArg, argCount);
      }
      if (func == null) {
        return identity;
      }
      if (type == 'object') {
        return baseMatches(func);
      }
      return thisArg === undefined
        ? property(func)
        : baseMatchesProperty(func, thisArg);
    }

    /**
     * The base implementation of `_.clone` without support for argument juggling
     * and `this` binding `customizer` functions.
     *
     * @private
     * @param {*} value The value to clone.
     * @param {boolean} [isDeep] Specify a deep clone.
     * @param {Function} [customizer] The function to customize cloning values.
     * @param {string} [key] The key of `value`.
     * @param {Object} [object] The object `value` belongs to.
     * @param {Array} [stackA=[]] Tracks traversed source objects.
     * @param {Array} [stackB=[]] Associates clones with source counterparts.
     * @returns {*} Returns the cloned value.
     */
    function baseClone(value, isDeep, customizer, key, object, stackA, stackB) {
      var result;
      if (customizer) {
        result = object ? customizer(value, key, object) : customizer(value);
      }
      if (result !== undefined) {
        return result;
      }
      if (!isObject(value)) {
        return value;
      }
      var isArr = isArray(value);
      if (isArr) {
        result = initCloneArray(value);
        if (!isDeep) {
          return arrayCopy(value, result);
        }
      } else {
        var tag = objToString.call(value),
            isFunc = tag == funcTag;

        if (tag == objectTag || tag == argsTag || (isFunc && !object)) {
          result = initCloneObject(isFunc ? {} : value);
          if (!isDeep) {
            return baseAssign(result, value);
          }
        } else {
          return cloneableTags[tag]
            ? initCloneByTag(value, tag, isDeep)
            : (object ? value : {});
        }
      }
      // Check for circular references and return its corresponding clone.
      stackA || (stackA = []);
      stackB || (stackB = []);

      var length = stackA.length;
      while (length--) {
        if (stackA[length] == value) {
          return stackB[length];
        }
      }
      // Add the source value to the stack of traversed objects and associate it with its clone.
      stackA.push(value);
      stackB.push(result);

      // Recursively populate clone (susceptible to call stack limits).
      (isArr ? arrayEach : baseForOwn)(value, function(subValue, key) {
        result[key] = baseClone(subValue, isDeep, customizer, key, value, stackA, stackB);
      });
      return result;
    }

    /**
     * The base implementation of `_.create` without support for assigning
     * properties to the created object.
     *
     * @private
     * @param {Object} prototype The object to inherit from.
     * @returns {Object} Returns the new object.
     */
    var baseCreate = (function() {
      function object() {}
      return function(prototype) {
        if (isObject(prototype)) {
          object.prototype = prototype;
          var result = new object;
          object.prototype = undefined;
        }
        return result || {};
      };
    }());

    /**
     * The base implementation of `_.delay` and `_.defer` which accepts an index
     * of where to slice the arguments to provide to `func`.
     *
     * @private
     * @param {Function} func The function to delay.
     * @param {number} wait The number of milliseconds to delay invocation.
     * @param {Object} args The arguments provide to `func`.
     * @returns {number} Returns the timer id.
     */
    function baseDelay(func, wait, args) {
      if (typeof func != 'function') {
        throw new TypeError(FUNC_ERROR_TEXT);
      }
      return setTimeout(function() { func.apply(undefined, args); }, wait);
    }

    /**
     * The base implementation of `_.difference` which accepts a single array
     * of values to exclude.
     *
     * @private
     * @param {Array} array The array to inspect.
     * @param {Array} values The values to exclude.
     * @returns {Array} Returns the new array of filtered values.
     */
    function baseDifference(array, values) {
      var length = array ? array.length : 0,
          result = [];

      if (!length) {
        return result;
      }
      var index = -1,
          indexOf = getIndexOf(),
          isCommon = indexOf == baseIndexOf,
          cache = (isCommon && values.length >= LARGE_ARRAY_SIZE) ? createCache(values) : null,
          valuesLength = values.length;

      if (cache) {
        indexOf = cacheIndexOf;
        isCommon = false;
        values = cache;
      }
      outer:
      while (++index < length) {
        var value = array[index];

        if (isCommon && value === value) {
          var valuesIndex = valuesLength;
          while (valuesIndex--) {
            if (values[valuesIndex] === value) {
              continue outer;
            }
          }
          result.push(value);
        }
        else if (indexOf(values, value, 0) < 0) {
          result.push(value);
        }
      }
      return result;
    }

    /**
     * The base implementation of `_.forEach` without support for callback
     * shorthands and `this` binding.
     *
     * @private
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @returns {Array|Object|string} Returns `collection`.
     */
    var baseEach = createBaseEach(baseForOwn);

    /**
     * The base implementation of `_.forEachRight` without support for callback
     * shorthands and `this` binding.
     *
     * @private
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @returns {Array|Object|string} Returns `collection`.
     */
    var baseEachRight = createBaseEach(baseForOwnRight, true);

    /**
     * The base implementation of `_.every` without support for callback
     * shorthands and `this` binding.
     *
     * @private
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} predicate The function invoked per iteration.
     * @returns {boolean} Returns `true` if all elements pass the predicate check,
     *  else `false`
     */
    function baseEvery(collection, predicate) {
      var result = true;
      baseEach(collection, function(value, index, collection) {
        result = !!predicate(value, index, collection);
        return result;
      });
      return result;
    }

    /**
     * Gets the extremum value of `collection` invoking `iteratee` for each value
     * in `collection` to generate the criterion by which the value is ranked.
     * The `iteratee` is invoked with three arguments: (value, index|key, collection).
     *
     * @private
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @param {Function} comparator The function used to compare values.
     * @param {*} exValue The initial extremum value.
     * @returns {*} Returns the extremum value.
     */
    function baseExtremum(collection, iteratee, comparator, exValue) {
      var computed = exValue,
          result = computed;

      baseEach(collection, function(value, index, collection) {
        var current = +iteratee(value, index, collection);
        if (comparator(current, computed) || (current === exValue && current === result)) {
          computed = current;
          result = value;
        }
      });
      return result;
    }

    /**
     * The base implementation of `_.fill` without an iteratee call guard.
     *
     * @private
     * @param {Array} array The array to fill.
     * @param {*} value The value to fill `array` with.
     * @param {number} [start=0] The start position.
     * @param {number} [end=array.length] The end position.
     * @returns {Array} Returns `array`.
     */
    function baseFill(array, value, start, end) {
      var length = array.length;

      start = start == null ? 0 : (+start || 0);
      if (start < 0) {
        start = -start > length ? 0 : (length + start);
      }
      end = (end === undefined || end > length) ? length : (+end || 0);
      if (end < 0) {
        end += length;
      }
      length = start > end ? 0 : (end >>> 0);
      start >>>= 0;

      while (start < length) {
        array[start++] = value;
      }
      return array;
    }

    /**
     * The base implementation of `_.filter` without support for callback
     * shorthands and `this` binding.
     *
     * @private
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} predicate The function invoked per iteration.
     * @returns {Array} Returns the new filtered array.
     */
    function baseFilter(collection, predicate) {
      var result = [];
      baseEach(collection, function(value, index, collection) {
        if (predicate(value, index, collection)) {
          result.push(value);
        }
      });
      return result;
    }

    /**
     * The base implementation of `_.find`, `_.findLast`, `_.findKey`, and `_.findLastKey`,
     * without support for callback shorthands and `this` binding, which iterates
     * over `collection` using the provided `eachFunc`.
     *
     * @private
     * @param {Array|Object|string} collection The collection to search.
     * @param {Function} predicate The function invoked per iteration.
     * @param {Function} eachFunc The function to iterate over `collection`.
     * @param {boolean} [retKey] Specify returning the key of the found element
     *  instead of the element itself.
     * @returns {*} Returns the found element or its key, else `undefined`.
     */
    function baseFind(collection, predicate, eachFunc, retKey) {
      var result;
      eachFunc(collection, function(value, key, collection) {
        if (predicate(value, key, collection)) {
          result = retKey ? key : value;
          return false;
        }
      });
      return result;
    }

    /**
     * The base implementation of `_.flatten` with added support for restricting
     * flattening and specifying the start index.
     *
     * @private
     * @param {Array} array The array to flatten.
     * @param {boolean} [isDeep] Specify a deep flatten.
     * @param {boolean} [isStrict] Restrict flattening to arrays-like objects.
     * @param {Array} [result=[]] The initial result value.
     * @returns {Array} Returns the new flattened array.
     */
    function baseFlatten(array, isDeep, isStrict, result) {
      result || (result = []);

      var index = -1,
          length = array.length;

      while (++index < length) {
        var value = array[index];
        if (isObjectLike(value) && isArrayLike(value) &&
            (isStrict || isArray(value) || isArguments(value))) {
          if (isDeep) {
            // Recursively flatten arrays (susceptible to call stack limits).
            baseFlatten(value, isDeep, isStrict, result);
          } else {
            arrayPush(result, value);
          }
        } else if (!isStrict) {
          result[result.length] = value;
        }
      }
      return result;
    }

    /**
     * The base implementation of `baseForIn` and `baseForOwn` which iterates
     * over `object` properties returned by `keysFunc` invoking `iteratee` for
     * each property. Iteratee functions may exit iteration early by explicitly
     * returning `false`.
     *
     * @private
     * @param {Object} object The object to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @param {Function} keysFunc The function to get the keys of `object`.
     * @returns {Object} Returns `object`.
     */
    var baseFor = createBaseFor();

    /**
     * This function is like `baseFor` except that it iterates over properties
     * in the opposite order.
     *
     * @private
     * @param {Object} object The object to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @param {Function} keysFunc The function to get the keys of `object`.
     * @returns {Object} Returns `object`.
     */
    var baseForRight = createBaseFor(true);

    /**
     * The base implementation of `_.forIn` without support for callback
     * shorthands and `this` binding.
     *
     * @private
     * @param {Object} object The object to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @returns {Object} Returns `object`.
     */
    function baseForIn(object, iteratee) {
      return baseFor(object, iteratee, keysIn);
    }

    /**
     * The base implementation of `_.forOwn` without support for callback
     * shorthands and `this` binding.
     *
     * @private
     * @param {Object} object The object to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @returns {Object} Returns `object`.
     */
    function baseForOwn(object, iteratee) {
      return baseFor(object, iteratee, keys);
    }

    /**
     * The base implementation of `_.forOwnRight` without support for callback
     * shorthands and `this` binding.
     *
     * @private
     * @param {Object} object The object to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @returns {Object} Returns `object`.
     */
    function baseForOwnRight(object, iteratee) {
      return baseForRight(object, iteratee, keys);
    }

    /**
     * The base implementation of `_.functions` which creates an array of
     * `object` function property names filtered from those provided.
     *
     * @private
     * @param {Object} object The object to inspect.
     * @param {Array} props The property names to filter.
     * @returns {Array} Returns the new array of filtered property names.
     */
    function baseFunctions(object, props) {
      var index = -1,
          length = props.length,
          resIndex = -1,
          result = [];

      while (++index < length) {
        var key = props[index];
        if (isFunction(object[key])) {
          result[++resIndex] = key;
        }
      }
      return result;
    }

    /**
     * The base implementation of `get` without support for string paths
     * and default values.
     *
     * @private
     * @param {Object} object The object to query.
     * @param {Array} path The path of the property to get.
     * @param {string} [pathKey] The key representation of path.
     * @returns {*} Returns the resolved value.
     */
    function baseGet(object, path, pathKey) {
      if (object == null) {
        return;
      }
      if (pathKey !== undefined && pathKey in toObject(object)) {
        path = [pathKey];
      }
      var index = 0,
          length = path.length;

      while (object != null && index < length) {
        object = object[path[index++]];
      }
      return (index && index == length) ? object : undefined;
    }

    /**
     * The base implementation of `_.isEqual` without support for `this` binding
     * `customizer` functions.
     *
     * @private
     * @param {*} value The value to compare.
     * @param {*} other The other value to compare.
     * @param {Function} [customizer] The function to customize comparing values.
     * @param {boolean} [isLoose] Specify performing partial comparisons.
     * @param {Array} [stackA] Tracks traversed `value` objects.
     * @param {Array} [stackB] Tracks traversed `other` objects.
     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.
     */
    function baseIsEqual(value, other, customizer, isLoose, stackA, stackB) {
      if (value === other) {
        return true;
      }
      if (value == null || other == null || (!isObject(value) && !isObjectLike(other))) {
        return value !== value && other !== other;
      }
      return baseIsEqualDeep(value, other, baseIsEqual, customizer, isLoose, stackA, stackB);
    }

    /**
     * A specialized version of `baseIsEqual` for arrays and objects which performs
     * deep comparisons and tracks traversed objects enabling objects with circular
     * references to be compared.
     *
     * @private
     * @param {Object} object The object to compare.
     * @param {Object} other The other object to compare.
     * @param {Function} equalFunc The function to determine equivalents of values.
     * @param {Function} [customizer] The function to customize comparing objects.
     * @param {boolean} [isLoose] Specify performing partial comparisons.
     * @param {Array} [stackA=[]] Tracks traversed `value` objects.
     * @param {Array} [stackB=[]] Tracks traversed `other` objects.
     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.
     */
    function baseIsEqualDeep(object, other, equalFunc, customizer, isLoose, stackA, stackB) {
      var objIsArr = isArray(object),
          othIsArr = isArray(other),
          objTag = arrayTag,
          othTag = arrayTag;

      if (!objIsArr) {
        objTag = objToString.call(object);
        if (objTag == argsTag) {
          objTag = objectTag;
        } else if (objTag != objectTag) {
          objIsArr = isTypedArray(object);
        }
      }
      if (!othIsArr) {
        othTag = objToString.call(other);
        if (othTag == argsTag) {
          othTag = objectTag;
        } else if (othTag != objectTag) {
          othIsArr = isTypedArray(other);
        }
      }
      var objIsObj = objTag == objectTag,
          othIsObj = othTag == objectTag,
          isSameTag = objTag == othTag;

      if (isSameTag && !(objIsArr || objIsObj)) {
        return equalByTag(object, other, objTag);
      }
      if (!isLoose) {
        var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),
            othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');

        if (objIsWrapped || othIsWrapped) {
          return equalFunc(objIsWrapped ? object.value() : object, othIsWrapped ? other.value() : other, customizer, isLoose, stackA, stackB);
        }
      }
      if (!isSameTag) {
        return false;
      }
      // Assume cyclic values are equal.
      // For more information on detecting circular references see https://es5.github.io/#JO.
      stackA || (stackA = []);
      stackB || (stackB = []);

      var length = stackA.length;
      while (length--) {
        if (stackA[length] == object) {
          return stackB[length] == other;
        }
      }
      // Add `object` and `other` to the stack of traversed objects.
      stackA.push(object);
      stackB.push(other);

      var result = (objIsArr ? equalArrays : equalObjects)(object, other, equalFunc, customizer, isLoose, stackA, stackB);

      stackA.pop();
      stackB.pop();

      return result;
    }

    /**
     * The base implementation of `_.isMatch` without support for callback
     * shorthands and `this` binding.
     *
     * @private
     * @param {Object} object The object to inspect.
     * @param {Array} matchData The propery names, values, and compare flags to match.
     * @param {Function} [customizer] The function to customize comparing objects.
     * @returns {boolean} Returns `true` if `object` is a match, else `false`.
     */
    function baseIsMatch(object, matchData, customizer) {
      var index = matchData.length,
          length = index,
          noCustomizer = !customizer;

      if (object == null) {
        return !length;
      }
      object = toObject(object);
      while (index--) {
        var data = matchData[index];
        if ((noCustomizer && data[2])
              ? data[1] !== object[data[0]]
              : !(data[0] in object)
            ) {
          return false;
        }
      }
      while (++index < length) {
        data = matchData[index];
        var key = data[0],
            objValue = object[key],
            srcValue = data[1];

        if (noCustomizer && data[2]) {
          if (objValue === undefined && !(key in object)) {
            return false;
          }
        } else {
          var result = customizer ? customizer(objValue, srcValue, key) : undefined;
          if (!(result === undefined ? baseIsEqual(srcValue, objValue, customizer, true) : result)) {
            return false;
          }
        }
      }
      return true;
    }

    /**
     * The base implementation of `_.map` without support for callback shorthands
     * and `this` binding.
     *
     * @private
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @returns {Array} Returns the new mapped array.
     */
    function baseMap(collection, iteratee) {
      var index = -1,
          result = isArrayLike(collection) ? Array(collection.length) : [];

      baseEach(collection, function(value, key, collection) {
        result[++index] = iteratee(value, key, collection);
      });
      return result;
    }

    /**
     * The base implementation of `_.matches` which does not clone `source`.
     *
     * @private
     * @param {Object} source The object of property values to match.
     * @returns {Function} Returns the new function.
     */
    function baseMatches(source) {
      var matchData = getMatchData(source);
      if (matchData.length == 1 && matchData[0][2]) {
        var key = matchData[0][0],
            value = matchData[0][1];

        return function(object) {
          if (object == null) {
            return false;
          }
          return object[key] === value && (value !== undefined || (key in toObject(object)));
        };
      }
      return function(object) {
        return baseIsMatch(object, matchData);
      };
    }

    /**
     * The base implementation of `_.matchesProperty` which does not clone `srcValue`.
     *
     * @private
     * @param {string} path The path of the property to get.
     * @param {*} srcValue The value to compare.
     * @returns {Function} Returns the new function.
     */
    function baseMatchesProperty(path, srcValue) {
      var isArr = isArray(path),
          isCommon = isKey(path) && isStrictComparable(srcValue),
          pathKey = (path + '');

      path = toPath(path);
      return function(object) {
        if (object == null) {
          return false;
        }
        var key = pathKey;
        object = toObject(object);
        if ((isArr || !isCommon) && !(key in object)) {
          object = path.length == 1 ? object : baseGet(object, baseSlice(path, 0, -1));
          if (object == null) {
            return false;
          }
          key = last(path);
          object = toObject(object);
        }
        return object[key] === srcValue
          ? (srcValue !== undefined || (key in object))
          : baseIsEqual(srcValue, object[key], undefined, true);
      };
    }

    /**
     * The base implementation of `_.merge` without support for argument juggling,
     * multiple sources, and `this` binding `customizer` functions.
     *
     * @private
     * @param {Object} object The destination object.
     * @param {Object} source The source object.
     * @param {Function} [customizer] The function to customize merged values.
     * @param {Array} [stackA=[]] Tracks traversed source objects.
     * @param {Array} [stackB=[]] Associates values with source counterparts.
     * @returns {Object} Returns `object`.
     */
    function baseMerge(object, source, customizer, stackA, stackB) {
      if (!isObject(object)) {
        return object;
      }
      var isSrcArr = isArrayLike(source) && (isArray(source) || isTypedArray(source)),
          props = isSrcArr ? undefined : keys(source);

      arrayEach(props || source, function(srcValue, key) {
        if (props) {
          key = srcValue;
          srcValue = source[key];
        }
        if (isObjectLike(srcValue)) {
          stackA || (stackA = []);
          stackB || (stackB = []);
          baseMergeDeep(object, source, key, baseMerge, customizer, stackA, stackB);
        }
        else {
          var value = object[key],
              result = customizer ? customizer(value, srcValue, key, object, source) : undefined,
              isCommon = result === undefined;

          if (isCommon) {
            result = srcValue;
          }
          if ((result !== undefined || (isSrcArr && !(key in object))) &&
              (isCommon || (result === result ? (result !== value) : (value === value)))) {
            object[key] = result;
          }
        }
      });
      return object;
    }

    /**
     * A specialized version of `baseMerge` for arrays and objects which performs
     * deep merges and tracks traversed objects enabling objects with circular
     * references to be merged.
     *
     * @private
     * @param {Object} object The destination object.
     * @param {Object} source The source object.
     * @param {string} key The key of the value to merge.
     * @param {Function} mergeFunc The function to merge values.
     * @param {Function} [customizer] The function to customize merged values.
     * @param {Array} [stackA=[]] Tracks traversed source objects.
     * @param {Array} [stackB=[]] Associates values with source counterparts.
     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.
     */
    function baseMergeDeep(object, source, key, mergeFunc, customizer, stackA, stackB) {
      var length = stackA.length,
          srcValue = source[key];

      while (length--) {
        if (stackA[length] == srcValue) {
          object[key] = stackB[length];
          return;
        }
      }
      var value = object[key],
          result = customizer ? customizer(value, srcValue, key, object, source) : undefined,
          isCommon = result === undefined;

      if (isCommon) {
        result = srcValue;
        if (isArrayLike(srcValue) && (isArray(srcValue) || isTypedArray(srcValue))) {
          result = isArray(value)
            ? value
            : (isArrayLike(value) ? arrayCopy(value) : []);
        }
        else if (isPlainObject(srcValue) || isArguments(srcValue)) {
          result = isArguments(value)
            ? toPlainObject(value)
            : (isPlainObject(value) ? value : {});
        }
        else {
          isCommon = false;
        }
      }
      // Add the source value to the stack of traversed objects and associate
      // it with its merged value.
      stackA.push(srcValue);
      stackB.push(result);

      if (isCommon) {
        // Recursively merge objects and arrays (susceptible to call stack limits).
        object[key] = mergeFunc(result, srcValue, customizer, stackA, stackB);
      } else if (result === result ? (result !== value) : (value === value)) {
        object[key] = result;
      }
    }

    /**
     * The base implementation of `_.property` without support for deep paths.
     *
     * @private
     * @param {string} key The key of the property to get.
     * @returns {Function} Returns the new function.
     */
    function baseProperty(key) {
      return function(object) {
        return object == null ? undefined : object[key];
      };
    }

    /**
     * A specialized version of `baseProperty` which supports deep paths.
     *
     * @private
     * @param {Array|string} path The path of the property to get.
     * @returns {Function} Returns the new function.
     */
    function basePropertyDeep(path) {
      var pathKey = (path + '');
      path = toPath(path);
      return function(object) {
        return baseGet(object, path, pathKey);
      };
    }

    /**
     * The base implementation of `_.pullAt` without support for individual
     * index arguments and capturing the removed elements.
     *
     * @private
     * @param {Array} array The array to modify.
     * @param {number[]} indexes The indexes of elements to remove.
     * @returns {Array} Returns `array`.
     */
    function basePullAt(array, indexes) {
      var length = array ? indexes.length : 0;
      while (length--) {
        var index = indexes[length];
        if (index != previous && isIndex(index)) {
          var previous = index;
          splice.call(array, index, 1);
        }
      }
      return array;
    }

    /**
     * The base implementation of `_.random` without support for argument juggling
     * and returning floating-point numbers.
     *
     * @private
     * @param {number} min The minimum possible value.
     * @param {number} max The maximum possible value.
     * @returns {number} Returns the random number.
     */
    function baseRandom(min, max) {
      return min + nativeFloor(nativeRandom() * (max - min + 1));
    }

    /**
     * The base implementation of `_.reduce` and `_.reduceRight` without support
     * for callback shorthands and `this` binding, which iterates over `collection`
     * using the provided `eachFunc`.
     *
     * @private
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @param {*} accumulator The initial value.
     * @param {boolean} initFromCollection Specify using the first or last element
     *  of `collection` as the initial value.
     * @param {Function} eachFunc The function to iterate over `collection`.
     * @returns {*} Returns the accumulated value.
     */
    function baseReduce(collection, iteratee, accumulator, initFromCollection, eachFunc) {
      eachFunc(collection, function(value, index, collection) {
        accumulator = initFromCollection
          ? (initFromCollection = false, value)
          : iteratee(accumulator, value, index, collection);
      });
      return accumulator;
    }

    /**
     * The base implementation of `setData` without support for hot loop detection.
     *
     * @private
     * @param {Function} func The function to associate metadata with.
     * @param {*} data The metadata.
     * @returns {Function} Returns `func`.
     */
    var baseSetData = !metaMap ? identity : function(func, data) {
      metaMap.set(func, data);
      return func;
    };

    /**
     * The base implementation of `_.slice` without an iteratee call guard.
     *
     * @private
     * @param {Array} array The array to slice.
     * @param {number} [start=0] The start position.
     * @param {number} [end=array.length] The end position.
     * @returns {Array} Returns the slice of `array`.
     */
    function baseSlice(array, start, end) {
      var index = -1,
          length = array.length;

      start = start == null ? 0 : (+start || 0);
      if (start < 0) {
        start = -start > length ? 0 : (length + start);
      }
      end = (end === undefined || end > length) ? length : (+end || 0);
      if (end < 0) {
        end += length;
      }
      length = start > end ? 0 : ((end - start) >>> 0);
      start >>>= 0;

      var result = Array(length);
      while (++index < length) {
        result[index] = array[index + start];
      }
      return result;
    }

    /**
     * The base implementation of `_.some` without support for callback shorthands
     * and `this` binding.
     *
     * @private
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} predicate The function invoked per iteration.
     * @returns {boolean} Returns `true` if any element passes the predicate check,
     *  else `false`.
     */
    function baseSome(collection, predicate) {
      var result;

      baseEach(collection, function(value, index, collection) {
        result = predicate(value, index, collection);
        return !result;
      });
      return !!result;
    }

    /**
     * The base implementation of `_.sortBy` which uses `comparer` to define
     * the sort order of `array` and replaces criteria objects with their
     * corresponding values.
     *
     * @private
     * @param {Array} array The array to sort.
     * @param {Function} comparer The function to define sort order.
     * @returns {Array} Returns `array`.
     */
    function baseSortBy(array, comparer) {
      var length = array.length;

      array.sort(comparer);
      while (length--) {
        array[length] = array[length].value;
      }
      return array;
    }

    /**
     * The base implementation of `_.sortByOrder` without param guards.
     *
     * @private
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function[]|Object[]|string[]} iteratees The iteratees to sort by.
     * @param {boolean[]} orders The sort orders of `iteratees`.
     * @returns {Array} Returns the new sorted array.
     */
    function baseSortByOrder(collection, iteratees, orders) {
      var callback = getCallback(),
          index = -1;

      iteratees = arrayMap(iteratees, function(iteratee) { return callback(iteratee); });

      var result = baseMap(collection, function(value) {
        var criteria = arrayMap(iteratees, function(iteratee) { return iteratee(value); });
        return { 'criteria': criteria, 'index': ++index, 'value': value };
      });

      return baseSortBy(result, function(object, other) {
        return compareMultiple(object, other, orders);
      });
    }

    /**
     * The base implementation of `_.sum` without support for callback shorthands
     * and `this` binding.
     *
     * @private
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @returns {number} Returns the sum.
     */
    function baseSum(collection, iteratee) {
      var result = 0;
      baseEach(collection, function(value, index, collection) {
        result += +iteratee(value, index, collection) || 0;
      });
      return result;
    }

    /**
     * The base implementation of `_.uniq` without support for callback shorthands
     * and `this` binding.
     *
     * @private
     * @param {Array} array The array to inspect.
     * @param {Function} [iteratee] The function invoked per iteration.
     * @returns {Array} Returns the new duplicate-value-free array.
     */
    function baseUniq(array, iteratee) {
      var index = -1,
          indexOf = getIndexOf(),
          length = array.length,
          isCommon = indexOf == baseIndexOf,
          isLarge = isCommon && length >= LARGE_ARRAY_SIZE,
          seen = isLarge ? createCache() : null,
          result = [];

      if (seen) {
        indexOf = cacheIndexOf;
        isCommon = false;
      } else {
        isLarge = false;
        seen = iteratee ? [] : result;
      }
      outer:
      while (++index < length) {
        var value = array[index],
            computed = iteratee ? iteratee(value, index, array) : value;

        if (isCommon && value === value) {
          var seenIndex = seen.length;
          while (seenIndex--) {
            if (seen[seenIndex] === computed) {
              continue outer;
            }
          }
          if (iteratee) {
            seen.push(computed);
          }
          result.push(value);
        }
        else if (indexOf(seen, computed, 0) < 0) {
          if (iteratee || isLarge) {
            seen.push(computed);
          }
          result.push(value);
        }
      }
      return result;
    }

    /**
     * The base implementation of `_.values` and `_.valuesIn` which creates an
     * array of `object` property values corresponding to the property names
     * of `props`.
     *
     * @private
     * @param {Object} object The object to query.
     * @param {Array} props The property names to get values for.
     * @returns {Object} Returns the array of property values.
     */
    function baseValues(object, props) {
      var index = -1,
          length = props.length,
          result = Array(length);

      while (++index < length) {
        result[index] = object[props[index]];
      }
      return result;
    }

    /**
     * The base implementation of `_.dropRightWhile`, `_.dropWhile`, `_.takeRightWhile`,
     * and `_.takeWhile` without support for callback shorthands and `this` binding.
     *
     * @private
     * @param {Array} array The array to query.
     * @param {Function} predicate The function invoked per iteration.
     * @param {boolean} [isDrop] Specify dropping elements instead of taking them.
     * @param {boolean} [fromRight] Specify iterating from right to left.
     * @returns {Array} Returns the slice of `array`.
     */
    function baseWhile(array, predicate, isDrop, fromRight) {
      var length = array.length,
          index = fromRight ? length : -1;

      while ((fromRight ? index-- : ++index < length) && predicate(array[index], index, array)) {}
      return isDrop
        ? baseSlice(array, (fromRight ? 0 : index), (fromRight ? index + 1 : length))
        : baseSlice(array, (fromRight ? index + 1 : 0), (fromRight ? length : index));
    }

    /**
     * The base implementation of `wrapperValue` which returns the result of
     * performing a sequence of actions on the unwrapped `value`, where each
     * successive action is supplied the return value of the previous.
     *
     * @private
     * @param {*} value The unwrapped value.
     * @param {Array} actions Actions to peform to resolve the unwrapped value.
     * @returns {*} Returns the resolved value.
     */
    function baseWrapperValue(value, actions) {
      var result = value;
      if (result instanceof LazyWrapper) {
        result = result.value();
      }
      var index = -1,
          length = actions.length;

      while (++index < length) {
        var action = actions[index];
        result = action.func.apply(action.thisArg, arrayPush([result], action.args));
      }
      return result;
    }

    /**
     * Performs a binary search of `array` to determine the index at which `value`
     * should be inserted into `array` in order to maintain its sort order.
     *
     * @private
     * @param {Array} array The sorted array to inspect.
     * @param {*} value The value to evaluate.
     * @param {boolean} [retHighest] Specify returning the highest qualified index.
     * @returns {number} Returns the index at which `value` should be inserted
     *  into `array`.
     */
    function binaryIndex(array, value, retHighest) {
      var low = 0,
          high = array ? array.length : low;

      if (typeof value == 'number' && value === value && high <= HALF_MAX_ARRAY_LENGTH) {
        while (low < high) {
          var mid = (low + high) >>> 1,
              computed = array[mid];

          if ((retHighest ? (computed <= value) : (computed < value)) && computed !== null) {
            low = mid + 1;
          } else {
            high = mid;
          }
        }
        return high;
      }
      return binaryIndexBy(array, value, identity, retHighest);
    }

    /**
     * This function is like `binaryIndex` except that it invokes `iteratee` for
     * `value` and each element of `array` to compute their sort ranking. The
     * iteratee is invoked with one argument; (value).
     *
     * @private
     * @param {Array} array The sorted array to inspect.
     * @param {*} value The value to evaluate.
     * @param {Function} iteratee The function invoked per iteration.
     * @param {boolean} [retHighest] Specify returning the highest qualified index.
     * @returns {number} Returns the index at which `value` should be inserted
     *  into `array`.
     */
    function binaryIndexBy(array, value, iteratee, retHighest) {
      value = iteratee(value);

      var low = 0,
          high = array ? array.length : 0,
          valIsNaN = value !== value,
          valIsNull = value === null,
          valIsUndef = value === undefined;

      while (low < high) {
        var mid = nativeFloor((low + high) / 2),
            computed = iteratee(array[mid]),
            isDef = computed !== undefined,
            isReflexive = computed === computed;

        if (valIsNaN) {
          var setLow = isReflexive || retHighest;
        } else if (valIsNull) {
          setLow = isReflexive && isDef && (retHighest || computed != null);
        } else if (valIsUndef) {
          setLow = isReflexive && (retHighest || isDef);
        } else if (computed == null) {
          setLow = false;
        } else {
          setLow = retHighest ? (computed <= value) : (computed < value);
        }
        if (setLow) {
          low = mid + 1;
        } else {
          high = mid;
        }
      }
      return nativeMin(high, MAX_ARRAY_INDEX);
    }

    /**
     * A specialized version of `baseCallback` which only supports `this` binding
     * and specifying the number of arguments to provide to `func`.
     *
     * @private
     * @param {Function} func The function to bind.
     * @param {*} thisArg The `this` binding of `func`.
     * @param {number} [argCount] The number of arguments to provide to `func`.
     * @returns {Function} Returns the callback.
     */
    function bindCallback(func, thisArg, argCount) {
      if (typeof func != 'function') {
        return identity;
      }
      if (thisArg === undefined) {
        return func;
      }
      switch (argCount) {
        case 1: return function(value) {
          return func.call(thisArg, value);
        };
        case 3: return function(value, index, collection) {
          return func.call(thisArg, value, index, collection);
        };
        case 4: return function(accumulator, value, index, collection) {
          return func.call(thisArg, accumulator, value, index, collection);
        };
        case 5: return function(value, other, key, object, source) {
          return func.call(thisArg, value, other, key, object, source);
        };
      }
      return function() {
        return func.apply(thisArg, arguments);
      };
    }

    /**
     * Creates a clone of the given array buffer.
     *
     * @private
     * @param {ArrayBuffer} buffer The array buffer to clone.
     * @returns {ArrayBuffer} Returns the cloned array buffer.
     */
    function bufferClone(buffer) {
      var result = new ArrayBuffer(buffer.byteLength),
          view = new Uint8Array(result);

      view.set(new Uint8Array(buffer));
      return result;
    }

    /**
     * Creates an array that is the composition of partially applied arguments,
     * placeholders, and provided arguments into a single array of arguments.
     *
     * @private
     * @param {Array|Object} args The provided arguments.
     * @param {Array} partials The arguments to prepend to those provided.
     * @param {Array} holders The `partials` placeholder indexes.
     * @returns {Array} Returns the new array of composed arguments.
     */
    function composeArgs(args, partials, holders) {
      var holdersLength = holders.length,
          argsIndex = -1,
          argsLength = nativeMax(args.length - holdersLength, 0),
          leftIndex = -1,
          leftLength = partials.length,
          result = Array(leftLength + argsLength);

      while (++leftIndex < leftLength) {
        result[leftIndex] = partials[leftIndex];
      }
      while (++argsIndex < holdersLength) {
        result[holders[argsIndex]] = args[argsIndex];
      }
      while (argsLength--) {
        result[leftIndex++] = args[argsIndex++];
      }
      return result;
    }

    /**
     * This function is like `composeArgs` except that the arguments composition
     * is tailored for `_.partialRight`.
     *
     * @private
     * @param {Array|Object} args The provided arguments.
     * @param {Array} partials The arguments to append to those provided.
     * @param {Array} holders The `partials` placeholder indexes.
     * @returns {Array} Returns the new array of composed arguments.
     */
    function composeArgsRight(args, partials, holders) {
      var holdersIndex = -1,
          holdersLength = holders.length,
          argsIndex = -1,
          argsLength = nativeMax(args.length - holdersLength, 0),
          rightIndex = -1,
          rightLength = partials.length,
          result = Array(argsLength + rightLength);

      while (++argsIndex < argsLength) {
        result[argsIndex] = args[argsIndex];
      }
      var offset = argsIndex;
      while (++rightIndex < rightLength) {
        result[offset + rightIndex] = partials[rightIndex];
      }
      while (++holdersIndex < holdersLength) {
        result[offset + holders[holdersIndex]] = args[argsIndex++];
      }
      return result;
    }

    /**
     * Creates a `_.countBy`, `_.groupBy`, `_.indexBy`, or `_.partition` function.
     *
     * @private
     * @param {Function} setter The function to set keys and values of the accumulator object.
     * @param {Function} [initializer] The function to initialize the accumulator object.
     * @returns {Function} Returns the new aggregator function.
     */
    function createAggregator(setter, initializer) {
      return function(collection, iteratee, thisArg) {
        var result = initializer ? initializer() : {};
        iteratee = getCallback(iteratee, thisArg, 3);

        if (isArray(collection)) {
          var index = -1,
              length = collection.length;

          while (++index < length) {
            var value = collection[index];
            setter(result, value, iteratee(value, index, collection), collection);
          }
        } else {
          baseEach(collection, function(value, key, collection) {
            setter(result, value, iteratee(value, key, collection), collection);
          });
        }
        return result;
      };
    }

    /**
     * Creates a `_.assign`, `_.defaults`, or `_.merge` function.
     *
     * @private
     * @param {Function} assigner The function to assign values.
     * @returns {Function} Returns the new assigner function.
     */
    function createAssigner(assigner) {
      return restParam(function(object, sources) {
        var index = -1,
            length = object == null ? 0 : sources.length,
            customizer = length > 2 ? sources[length - 2] : undefined,
            guard = length > 2 ? sources[2] : undefined,
            thisArg = length > 1 ? sources[length - 1] : undefined;

        if (typeof customizer == 'function') {
          customizer = bindCallback(customizer, thisArg, 5);
          length -= 2;
        } else {
          customizer = typeof thisArg == 'function' ? thisArg : undefined;
          length -= (customizer ? 1 : 0);
        }
        if (guard && isIterateeCall(sources[0], sources[1], guard)) {
          customizer = length < 3 ? undefined : customizer;
          length = 1;
        }
        while (++index < length) {
          var source = sources[index];
          if (source) {
            assigner(object, source, customizer);
          }
        }
        return object;
      });
    }

    /**
     * Creates a `baseEach` or `baseEachRight` function.
     *
     * @private
     * @param {Function} eachFunc The function to iterate over a collection.
     * @param {boolean} [fromRight] Specify iterating from right to left.
     * @returns {Function} Returns the new base function.
     */
    function createBaseEach(eachFunc, fromRight) {
      return function(collection, iteratee) {
        var length = collection ? getLength(collection) : 0;
        if (!isLength(length)) {
          return eachFunc(collection, iteratee);
        }
        var index = fromRight ? length : -1,
            iterable = toObject(collection);

        while ((fromRight ? index-- : ++index < length)) {
          if (iteratee(iterable[index], index, iterable) === false) {
            break;
          }
        }
        return collection;
      };
    }

    /**
     * Creates a base function for `_.forIn` or `_.forInRight`.
     *
     * @private
     * @param {boolean} [fromRight] Specify iterating from right to left.
     * @returns {Function} Returns the new base function.
     */
    function createBaseFor(fromRight) {
      return function(object, iteratee, keysFunc) {
        var iterable = toObject(object),
            props = keysFunc(object),
            length = props.length,
            index = fromRight ? length : -1;

        while ((fromRight ? index-- : ++index < length)) {
          var key = props[index];
          if (iteratee(iterable[key], key, iterable) === false) {
            break;
          }
        }
        return object;
      };
    }

    /**
     * Creates a function that wraps `func` and invokes it with the `this`
     * binding of `thisArg`.
     *
     * @private
     * @param {Function} func The function to bind.
     * @param {*} [thisArg] The `this` binding of `func`.
     * @returns {Function} Returns the new bound function.
     */
    function createBindWrapper(func, thisArg) {
      var Ctor = createCtorWrapper(func);

      function wrapper() {
        var fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;
        return fn.apply(thisArg, arguments);
      }
      return wrapper;
    }

    /**
     * Creates a `Set` cache object to optimize linear searches of large arrays.
     *
     * @private
     * @param {Array} [values] The values to cache.
     * @returns {null|Object} Returns the new cache object if `Set` is supported, else `null`.
     */
    function createCache(values) {
      return (nativeCreate && Set) ? new SetCache(values) : null;
    }

    /**
     * Creates a function that produces compound words out of the words in a
     * given string.
     *
     * @private
     * @param {Function} callback The function to combine each word.
     * @returns {Function} Returns the new compounder function.
     */
    function createCompounder(callback) {
      return function(string) {
        var index = -1,
            array = words(deburr(string)),
            length = array.length,
            result = '';

        while (++index < length) {
          result = callback(result, array[index], index);
        }
        return result;
      };
    }

    /**
     * Creates a function that produces an instance of `Ctor` regardless of
     * whether it was invoked as part of a `new` expression or by `call` or `apply`.
     *
     * @private
     * @param {Function} Ctor The constructor to wrap.
     * @returns {Function} Returns the new wrapped function.
     */
    function createCtorWrapper(Ctor) {
      return function() {
        // Use a `switch` statement to work with class constructors.
        // See http://ecma-international.org/ecma-262/6.0/#sec-ecmascript-function-objects-call-thisargument-argumentslist
        // for more details.
        var args = arguments;
        switch (args.length) {
          case 0: return new Ctor;
          case 1: return new Ctor(args[0]);
          case 2: return new Ctor(args[0], args[1]);
          case 3: return new Ctor(args[0], args[1], args[2]);
          case 4: return new Ctor(args[0], args[1], args[2], args[3]);
          case 5: return new Ctor(args[0], args[1], args[2], args[3], args[4]);
          case 6: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5]);
          case 7: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5], args[6]);
        }
        var thisBinding = baseCreate(Ctor.prototype),
            result = Ctor.apply(thisBinding, args);

        // Mimic the constructor's `return` behavior.
        // See https://es5.github.io/#x13.2.2 for more details.
        return isObject(result) ? result : thisBinding;
      };
    }

    /**
     * Creates a `_.curry` or `_.curryRight` function.
     *
     * @private
     * @param {boolean} flag The curry bit flag.
     * @returns {Function} Returns the new curry function.
     */
    function createCurry(flag) {
      function curryFunc(func, arity, guard) {
        if (guard && isIterateeCall(func, arity, guard)) {
          arity = undefined;
        }
        var result = createWrapper(func, flag, undefined, undefined, undefined, undefined, undefined, arity);
        result.placeholder = curryFunc.placeholder;
        return result;
      }
      return curryFunc;
    }

    /**
     * Creates a `_.defaults` or `_.defaultsDeep` function.
     *
     * @private
     * @param {Function} assigner The function to assign values.
     * @param {Function} customizer The function to customize assigned values.
     * @returns {Function} Returns the new defaults function.
     */
    function createDefaults(assigner, customizer) {
      return restParam(function(args) {
        var object = args[0];
        if (object == null) {
          return object;
        }
        args.push(customizer);
        return assigner.apply(undefined, args);
      });
    }

    /**
     * Creates a `_.max` or `_.min` function.
     *
     * @private
     * @param {Function} comparator The function used to compare values.
     * @param {*} exValue The initial extremum value.
     * @returns {Function} Returns the new extremum function.
     */
    function createExtremum(comparator, exValue) {
      return function(collection, iteratee, thisArg) {
        if (thisArg && isIterateeCall(collection, iteratee, thisArg)) {
          iteratee = undefined;
        }
        iteratee = getCallback(iteratee, thisArg, 3);
        if (iteratee.length == 1) {
          collection = isArray(collection) ? collection : toIterable(collection);
          var result = arrayExtremum(collection, iteratee, comparator, exValue);
          if (!(collection.length && result === exValue)) {
            return result;
          }
        }
        return baseExtremum(collection, iteratee, comparator, exValue);
      };
    }

    /**
     * Creates a `_.find` or `_.findLast` function.
     *
     * @private
     * @param {Function} eachFunc The function to iterate over a collection.
     * @param {boolean} [fromRight] Specify iterating from right to left.
     * @returns {Function} Returns the new find function.
     */
    function createFind(eachFunc, fromRight) {
      return function(collection, predicate, thisArg) {
        predicate = getCallback(predicate, thisArg, 3);
        if (isArray(collection)) {
          var index = baseFindIndex(collection, predicate, fromRight);
          return index > -1 ? collection[index] : undefined;
        }
        return baseFind(collection, predicate, eachFunc);
      };
    }

    /**
     * Creates a `_.findIndex` or `_.findLastIndex` function.
     *
     * @private
     * @param {boolean} [fromRight] Specify iterating from right to left.
     * @returns {Function} Returns the new find function.
     */
    function createFindIndex(fromRight) {
      return function(array, predicate, thisArg) {
        if (!(array && array.length)) {
          return -1;
        }
        predicate = getCallback(predicate, thisArg, 3);
        return baseFindIndex(array, predicate, fromRight);
      };
    }

    /**
     * Creates a `_.findKey` or `_.findLastKey` function.
     *
     * @private
     * @param {Function} objectFunc The function to iterate over an object.
     * @returns {Function} Returns the new find function.
     */
    function createFindKey(objectFunc) {
      return function(object, predicate, thisArg) {
        predicate = getCallback(predicate, thisArg, 3);
        return baseFind(object, predicate, objectFunc, true);
      };
    }

    /**
     * Creates a `_.flow` or `_.flowRight` function.
     *
     * @private
     * @param {boolean} [fromRight] Specify iterating from right to left.
     * @returns {Function} Returns the new flow function.
     */
    function createFlow(fromRight) {
      return function() {
        var wrapper,
            length = arguments.length,
            index = fromRight ? length : -1,
            leftIndex = 0,
            funcs = Array(length);

        while ((fromRight ? index-- : ++index < length)) {
          var func = funcs[leftIndex++] = arguments[index];
          if (typeof func != 'function') {
            throw new TypeError(FUNC_ERROR_TEXT);
          }
          if (!wrapper && LodashWrapper.prototype.thru && getFuncName(func) == 'wrapper') {
            wrapper = new LodashWrapper([], true);
          }
        }
        index = wrapper ? -1 : length;
        while (++index < length) {
          func = funcs[index];

          var funcName = getFuncName(func),
              data = funcName == 'wrapper' ? getData(func) : undefined;

          if (data && isLaziable(data[0]) && data[1] == (ARY_FLAG | CURRY_FLAG | PARTIAL_FLAG | REARG_FLAG) && !data[4].length && data[9] == 1) {
            wrapper = wrapper[getFuncName(data[0])].apply(wrapper, data[3]);
          } else {
            wrapper = (func.length == 1 && isLaziable(func)) ? wrapper[funcName]() : wrapper.thru(func);
          }
        }
        return function() {
          var args = arguments,
              value = args[0];

          if (wrapper && args.length == 1 && isArray(value) && value.length >= LARGE_ARRAY_SIZE) {
            return wrapper.plant(value).value();
          }
          var index = 0,
              result = length ? funcs[index].apply(this, args) : value;

          while (++index < length) {
            result = funcs[index].call(this, result);
          }
          return result;
        };
      };
    }

    /**
     * Creates a function for `_.forEach` or `_.forEachRight`.
     *
     * @private
     * @param {Function} arrayFunc The function to iterate over an array.
     * @param {Function} eachFunc The function to iterate over a collection.
     * @returns {Function} Returns the new each function.
     */
    function createForEach(arrayFunc, eachFunc) {
      return function(collection, iteratee, thisArg) {
        return (typeof iteratee == 'function' && thisArg === undefined && isArray(collection))
          ? arrayFunc(collection, iteratee)
          : eachFunc(collection, bindCallback(iteratee, thisArg, 3));
      };
    }

    /**
     * Creates a function for `_.forIn` or `_.forInRight`.
     *
     * @private
     * @param {Function} objectFunc The function to iterate over an object.
     * @returns {Function} Returns the new each function.
     */
    function createForIn(objectFunc) {
      return function(object, iteratee, thisArg) {
        if (typeof iteratee != 'function' || thisArg !== undefined) {
          iteratee = bindCallback(iteratee, thisArg, 3);
        }
        return objectFunc(object, iteratee, keysIn);
      };
    }

    /**
     * Creates a function for `_.forOwn` or `_.forOwnRight`.
     *
     * @private
     * @param {Function} objectFunc The function to iterate over an object.
     * @returns {Function} Returns the new each function.
     */
    function createForOwn(objectFunc) {
      return function(object, iteratee, thisArg) {
        if (typeof iteratee != 'function' || thisArg !== undefined) {
          iteratee = bindCallback(iteratee, thisArg, 3);
        }
        return objectFunc(object, iteratee);
      };
    }

    /**
     * Creates a function for `_.mapKeys` or `_.mapValues`.
     *
     * @private
     * @param {boolean} [isMapKeys] Specify mapping keys instead of values.
     * @returns {Function} Returns the new map function.
     */
    function createObjectMapper(isMapKeys) {
      return function(object, iteratee, thisArg) {
        var result = {};
        iteratee = getCallback(iteratee, thisArg, 3);

        baseForOwn(object, function(value, key, object) {
          var mapped = iteratee(value, key, object);
          key = isMapKeys ? mapped : key;
          value = isMapKeys ? value : mapped;
          result[key] = value;
        });
        return result;
      };
    }

    /**
     * Creates a function for `_.padLeft` or `_.padRight`.
     *
     * @private
     * @param {boolean} [fromRight] Specify padding from the right.
     * @returns {Function} Returns the new pad function.
     */
    function createPadDir(fromRight) {
      return function(string, length, chars) {
        string = baseToString(string);
        return (fromRight ? string : '') + createPadding(string, length, chars) + (fromRight ? '' : string);
      };
    }

    /**
     * Creates a `_.partial` or `_.partialRight` function.
     *
     * @private
     * @param {boolean} flag The partial bit flag.
     * @returns {Function} Returns the new partial function.
     */
    function createPartial(flag) {
      var partialFunc = restParam(function(func, partials) {
        var holders = replaceHolders(partials, partialFunc.placeholder);
        return createWrapper(func, flag, undefined, partials, holders);
      });
      return partialFunc;
    }

    /**
     * Creates a function for `_.reduce` or `_.reduceRight`.
     *
     * @private
     * @param {Function} arrayFunc The function to iterate over an array.
     * @param {Function} eachFunc The function to iterate over a collection.
     * @returns {Function} Returns the new each function.
     */
    function createReduce(arrayFunc, eachFunc) {
      return function(collection, iteratee, accumulator, thisArg) {
        var initFromArray = arguments.length < 3;
        return (typeof iteratee == 'function' && thisArg === undefined && isArray(collection))
          ? arrayFunc(collection, iteratee, accumulator, initFromArray)
          : baseReduce(collection, getCallback(iteratee, thisArg, 4), accumulator, initFromArray, eachFunc);
      };
    }

    /**
     * Creates a function that wraps `func` and invokes it with optional `this`
     * binding of, partial application, and currying.
     *
     * @private
     * @param {Function|string} func The function or method name to reference.
     * @param {number} bitmask The bitmask of flags. See `createWrapper` for more details.
     * @param {*} [thisArg] The `this` binding of `func`.
     * @param {Array} [partials] The arguments to prepend to those provided to the new function.
     * @param {Array} [holders] The `partials` placeholder indexes.
     * @param {Array} [partialsRight] The arguments to append to those provided to the new function.
     * @param {Array} [holdersRight] The `partialsRight` placeholder indexes.
     * @param {Array} [argPos] The argument positions of the new function.
     * @param {number} [ary] The arity cap of `func`.
     * @param {number} [arity] The arity of `func`.
     * @returns {Function} Returns the new wrapped function.
     */
    function createHybridWrapper(func, bitmask, thisArg, partials, holders, partialsRight, holdersRight, argPos, ary, arity) {
      var isAry = bitmask & ARY_FLAG,
          isBind = bitmask & BIND_FLAG,
          isBindKey = bitmask & BIND_KEY_FLAG,
          isCurry = bitmask & CURRY_FLAG,
          isCurryBound = bitmask & CURRY_BOUND_FLAG,
          isCurryRight = bitmask & CURRY_RIGHT_FLAG,
          Ctor = isBindKey ? undefined : createCtorWrapper(func);

      function wrapper() {
        // Avoid `arguments` object use disqualifying optimizations by
        // converting it to an array before providing it to other functions.
        var length = arguments.length,
            index = length,
            args = Array(length);

        while (index--) {
          args[index] = arguments[index];
        }
        if (partials) {
          args = composeArgs(args, partials, holders);
        }
        if (partialsRight) {
          args = composeArgsRight(args, partialsRight, holdersRight);
        }
        if (isCurry || isCurryRight) {
          var placeholder = wrapper.placeholder,
              argsHolders = replaceHolders(args, placeholder);

          length -= argsHolders.length;
          if (length < arity) {
            var newArgPos = argPos ? arrayCopy(argPos) : undefined,
                newArity = nativeMax(arity - length, 0),
                newsHolders = isCurry ? argsHolders : undefined,
                newHoldersRight = isCurry ? undefined : argsHolders,
                newPartials = isCurry ? args : undefined,
                newPartialsRight = isCurry ? undefined : args;

            bitmask |= (isCurry ? PARTIAL_FLAG : PARTIAL_RIGHT_FLAG);
            bitmask &= ~(isCurry ? PARTIAL_RIGHT_FLAG : PARTIAL_FLAG);

            if (!isCurryBound) {
              bitmask &= ~(BIND_FLAG | BIND_KEY_FLAG);
            }
            var newData = [func, bitmask, thisArg, newPartials, newsHolders, newPartialsRight, newHoldersRight, newArgPos, ary, newArity],
                result = createHybridWrapper.apply(undefined, newData);

            if (isLaziable(func)) {
              setData(result, newData);
            }
            result.placeholder = placeholder;
            return result;
          }
        }
        var thisBinding = isBind ? thisArg : this,
            fn = isBindKey ? thisBinding[func] : func;

        if (argPos) {
          args = reorder(args, argPos);
        }
        if (isAry && ary < args.length) {
          args.length = ary;
        }
        if (this && this !== root && this instanceof wrapper) {
          fn = Ctor || createCtorWrapper(func);
        }
        return fn.apply(thisBinding, args);
      }
      return wrapper;
    }

    /**
     * Creates the padding required for `string` based on the given `length`.
     * The `chars` string is truncated if the number of characters exceeds `length`.
     *
     * @private
     * @param {string} string The string to create padding for.
     * @param {number} [length=0] The padding length.
     * @param {string} [chars=' '] The string used as padding.
     * @returns {string} Returns the pad for `string`.
     */
    function createPadding(string, length, chars) {
      var strLength = string.length;
      length = +length;

      if (strLength >= length || !nativeIsFinite(length)) {
        return '';
      }
      var padLength = length - strLength;
      chars = chars == null ? ' ' : (chars + '');
      return repeat(chars, nativeCeil(padLength / chars.length)).slice(0, padLength);
    }

    /**
     * Creates a function that wraps `func` and invokes it with the optional `this`
     * binding of `thisArg` and the `partials` prepended to those provided to
     * the wrapper.
     *
     * @private
     * @param {Function} func The function to partially apply arguments to.
     * @param {number} bitmask The bitmask of flags. See `createWrapper` for more details.
     * @param {*} thisArg The `this` binding of `func`.
     * @param {Array} partials The arguments to prepend to those provided to the new function.
     * @returns {Function} Returns the new bound function.
     */
    function createPartialWrapper(func, bitmask, thisArg, partials) {
      var isBind = bitmask & BIND_FLAG,
          Ctor = createCtorWrapper(func);

      function wrapper() {
        // Avoid `arguments` object use disqualifying optimizations by
        // converting it to an array before providing it `func`.
        var argsIndex = -1,
            argsLength = arguments.length,
            leftIndex = -1,
            leftLength = partials.length,
            args = Array(leftLength + argsLength);

        while (++leftIndex < leftLength) {
          args[leftIndex] = partials[leftIndex];
        }
        while (argsLength--) {
          args[leftIndex++] = arguments[++argsIndex];
        }
        var fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;
        return fn.apply(isBind ? thisArg : this, args);
      }
      return wrapper;
    }

    /**
     * Creates a `_.ceil`, `_.floor`, or `_.round` function.
     *
     * @private
     * @param {string} methodName The name of the `Math` method to use when rounding.
     * @returns {Function} Returns the new round function.
     */
    function createRound(methodName) {
      var func = Math[methodName];
      return function(number, precision) {
        precision = precision === undefined ? 0 : (+precision || 0);
        if (precision) {
          precision = pow(10, precision);
          return func(number * precision) / precision;
        }
        return func(number);
      };
    }

    /**
     * Creates a `_.sortedIndex` or `_.sortedLastIndex` function.
     *
     * @private
     * @param {boolean} [retHighest] Specify returning the highest qualified index.
     * @returns {Function} Returns the new index function.
     */
    function createSortedIndex(retHighest) {
      return function(array, value, iteratee, thisArg) {
        var callback = getCallback(iteratee);
        return (iteratee == null && callback === baseCallback)
          ? binaryIndex(array, value, retHighest)
          : binaryIndexBy(array, value, callback(iteratee, thisArg, 1), retHighest);
      };
    }

    /**
     * Creates a function that either curries or invokes `func` with optional
     * `this` binding and partially applied arguments.
     *
     * @private
     * @param {Function|string} func The function or method name to reference.
     * @param {number} bitmask The bitmask of flags.
     *  The bitmask may be composed of the following flags:
     *     1 - `_.bind`
     *     2 - `_.bindKey`
     *     4 - `_.curry` or `_.curryRight` of a bound function
     *     8 - `_.curry`
     *    16 - `_.curryRight`
     *    32 - `_.partial`
     *    64 - `_.partialRight`
     *   128 - `_.rearg`
     *   256 - `_.ary`
     * @param {*} [thisArg] The `this` binding of `func`.
     * @param {Array} [partials] The arguments to be partially applied.
     * @param {Array} [holders] The `partials` placeholder indexes.
     * @param {Array} [argPos] The argument positions of the new function.
     * @param {number} [ary] The arity cap of `func`.
     * @param {number} [arity] The arity of `func`.
     * @returns {Function} Returns the new wrapped function.
     */
    function createWrapper(func, bitmask, thisArg, partials, holders, argPos, ary, arity) {
      var isBindKey = bitmask & BIND_KEY_FLAG;
      if (!isBindKey && typeof func != 'function') {
        throw new TypeError(FUNC_ERROR_TEXT);
      }
      var length = partials ? partials.length : 0;
      if (!length) {
        bitmask &= ~(PARTIAL_FLAG | PARTIAL_RIGHT_FLAG);
        partials = holders = undefined;
      }
      length -= (holders ? holders.length : 0);
      if (bitmask & PARTIAL_RIGHT_FLAG) {
        var partialsRight = partials,
            holdersRight = holders;

        partials = holders = undefined;
      }
      var data = isBindKey ? undefined : getData(func),
          newData = [func, bitmask, thisArg, partials, holders, partialsRight, holdersRight, argPos, ary, arity];

      if (data) {
        mergeData(newData, data);
        bitmask = newData[1];
        arity = newData[9];
      }
      newData[9] = arity == null
        ? (isBindKey ? 0 : func.length)
        : (nativeMax(arity - length, 0) || 0);

      if (bitmask == BIND_FLAG) {
        var result = createBindWrapper(newData[0], newData[2]);
      } else if ((bitmask == PARTIAL_FLAG || bitmask == (BIND_FLAG | PARTIAL_FLAG)) && !newData[4].length) {
        result = createPartialWrapper.apply(undefined, newData);
      } else {
        result = createHybridWrapper.apply(undefined, newData);
      }
      var setter = data ? baseSetData : setData;
      return setter(result, newData);
    }

    /**
     * A specialized version of `baseIsEqualDeep` for arrays with support for
     * partial deep comparisons.
     *
     * @private
     * @param {Array} array The array to compare.
     * @param {Array} other The other array to compare.
     * @param {Function} equalFunc The function to determine equivalents of values.
     * @param {Function} [customizer] The function to customize comparing arrays.
     * @param {boolean} [isLoose] Specify performing partial comparisons.
     * @param {Array} [stackA] Tracks traversed `value` objects.
     * @param {Array} [stackB] Tracks traversed `other` objects.
     * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.
     */
    function equalArrays(array, other, equalFunc, customizer, isLoose, stackA, stackB) {
      var index = -1,
          arrLength = array.length,
          othLength = other.length;

      if (arrLength != othLength && !(isLoose && othLength > arrLength)) {
        return false;
      }
      // Ignore non-index properties.
      while (++index < arrLength) {
        var arrValue = array[index],
            othValue = other[index],
            result = customizer ? customizer(isLoose ? othValue : arrValue, isLoose ? arrValue : othValue, index) : undefined;

        if (result !== undefined) {
          if (result) {
            continue;
          }
          return false;
        }
        // Recursively compare arrays (susceptible to call stack limits).
        if (isLoose) {
          if (!arraySome(other, function(othValue) {
                return arrValue === othValue || equalFunc(arrValue, othValue, customizer, isLoose, stackA, stackB);
              })) {
            return false;
          }
        } else if (!(arrValue === othValue || equalFunc(arrValue, othValue, customizer, isLoose, stackA, stackB))) {
          return false;
        }
      }
      return true;
    }

    /**
     * A specialized version of `baseIsEqualDeep` for comparing objects of
     * the same `toStringTag`.
     *
     * **Note:** This function only supports comparing values with tags of
     * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.
     *
     * @private
     * @param {Object} object The object to compare.
     * @param {Object} other The other object to compare.
     * @param {string} tag The `toStringTag` of the objects to compare.
     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.
     */
    function equalByTag(object, other, tag) {
      switch (tag) {
        case boolTag:
        case dateTag:
          // Coerce dates and booleans to numbers, dates to milliseconds and booleans
          // to `1` or `0` treating invalid dates coerced to `NaN` as not equal.
          return +object == +other;

        case errorTag:
          return object.name == other.name && object.message == other.message;

        case numberTag:
          // Treat `NaN` vs. `NaN` as equal.
          return (object != +object)
            ? other != +other
            : object == +other;

        case regexpTag:
        case stringTag:
          // Coerce regexes to strings and treat strings primitives and string
          // objects as equal. See https://es5.github.io/#x15.10.6.4 for more details.
          return object == (other + '');
      }
      return false;
    }

    /**
     * A specialized version of `baseIsEqualDeep` for objects with support for
     * partial deep comparisons.
     *
     * @private
     * @param {Object} object The object to compare.
     * @param {Object} other The other object to compare.
     * @param {Function} equalFunc The function to determine equivalents of values.
     * @param {Function} [customizer] The function to customize comparing values.
     * @param {boolean} [isLoose] Specify performing partial comparisons.
     * @param {Array} [stackA] Tracks traversed `value` objects.
     * @param {Array} [stackB] Tracks traversed `other` objects.
     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.
     */
    function equalObjects(object, other, equalFunc, customizer, isLoose, stackA, stackB) {
      var objProps = keys(object),
          objLength = objProps.length,
          othProps = keys(other),
          othLength = othProps.length;

      if (objLength != othLength && !isLoose) {
        return false;
      }
      var index = objLength;
      while (index--) {
        var key = objProps[index];
        if (!(isLoose ? key in other : hasOwnProperty.call(other, key))) {
          return false;
        }
      }
      var skipCtor = isLoose;
      while (++index < objLength) {
        key = objProps[index];
        var objValue = object[key],
            othValue = other[key],
            result = customizer ? customizer(isLoose ? othValue : objValue, isLoose? objValue : othValue, key) : undefined;

        // Recursively compare objects (susceptible to call stack limits).
        if (!(result === undefined ? equalFunc(objValue, othValue, customizer, isLoose, stackA, stackB) : result)) {
          return false;
        }
        skipCtor || (skipCtor = key == 'constructor');
      }
      if (!skipCtor) {
        var objCtor = object.constructor,
            othCtor = other.constructor;

        // Non `Object` object instances with different constructors are not equal.
        if (objCtor != othCtor &&
            ('constructor' in object && 'constructor' in other) &&
            !(typeof objCtor == 'function' && objCtor instanceof objCtor &&
              typeof othCtor == 'function' && othCtor instanceof othCtor)) {
          return false;
        }
      }
      return true;
    }

    /**
     * Gets the appropriate "callback" function. If the `_.callback` method is
     * customized this function returns the custom method, otherwise it returns
     * the `baseCallback` function. If arguments are provided the chosen function
     * is invoked with them and its result is returned.
     *
     * @private
     * @returns {Function} Returns the chosen function or its result.
     */
    function getCallback(func, thisArg, argCount) {
      var result = lodash.callback || callback;
      result = result === callback ? baseCallback : result;
      return argCount ? result(func, thisArg, argCount) : result;
    }

    /**
     * Gets metadata for `func`.
     *
     * @private
     * @param {Function} func The function to query.
     * @returns {*} Returns the metadata for `func`.
     */
    var getData = !metaMap ? noop : function(func) {
      return metaMap.get(func);
    };

    /**
     * Gets the name of `func`.
     *
     * @private
     * @param {Function} func The function to query.
     * @returns {string} Returns the function name.
     */
    function getFuncName(func) {
      var result = func.name,
          array = realNames[result],
          length = array ? array.length : 0;

      while (length--) {
        var data = array[length],
            otherFunc = data.func;
        if (otherFunc == null || otherFunc == func) {
          return data.name;
        }
      }
      return result;
    }

    /**
     * Gets the appropriate "indexOf" function. If the `_.indexOf` method is
     * customized this function returns the custom method, otherwise it returns
     * the `baseIndexOf` function. If arguments are provided the chosen function
     * is invoked with them and its result is returned.
     *
     * @private
     * @returns {Function|number} Returns the chosen function or its result.
     */
    function getIndexOf(collection, target, fromIndex) {
      var result = lodash.indexOf || indexOf;
      result = result === indexOf ? baseIndexOf : result;
      return collection ? result(collection, target, fromIndex) : result;
    }

    /**
     * Gets the "length" property value of `object`.
     *
     * **Note:** This function is used to avoid a [JIT bug](https://bugs.webkit.org/show_bug.cgi?id=142792)
     * that affects Safari on at least iOS 8.1-8.3 ARM64.
     *
     * @private
     * @param {Object} object The object to query.
     * @returns {*} Returns the "length" value.
     */
    var getLength = baseProperty('length');

    /**
     * Gets the propery names, values, and compare flags of `object`.
     *
     * @private
     * @param {Object} object The object to query.
     * @returns {Array} Returns the match data of `object`.
     */
    function getMatchData(object) {
      var result = pairs(object),
          length = result.length;

      while (length--) {
        result[length][2] = isStrictComparable(result[length][1]);
      }
      return result;
    }

    /**
     * Gets the native function at `key` of `object`.
     *
     * @private
     * @param {Object} object The object to query.
     * @param {string} key The key of the method to get.
     * @returns {*} Returns the function if it's native, else `undefined`.
     */
    function getNative(object, key) {
      var value = object == null ? undefined : object[key];
      return isNative(value) ? value : undefined;
    }

    /**
     * Gets the view, applying any `transforms` to the `start` and `end` positions.
     *
     * @private
     * @param {number} start The start of the view.
     * @param {number} end The end of the view.
     * @param {Array} transforms The transformations to apply to the view.
     * @returns {Object} Returns an object containing the `start` and `end`
     *  positions of the view.
     */
    function getView(start, end, transforms) {
      var index = -1,
          length = transforms.length;

      while (++index < length) {
        var data = transforms[index],
            size = data.size;

        switch (data.type) {
          case 'drop':      start += size; break;
          case 'dropRight': end -= size; break;
          case 'take':      end = nativeMin(end, start + size); break;
          case 'takeRight': start = nativeMax(start, end - size); break;
        }
      }
      return { 'start': start, 'end': end };
    }

    /**
     * Initializes an array clone.
     *
     * @private
     * @param {Array} array The array to clone.
     * @returns {Array} Returns the initialized clone.
     */
    function initCloneArray(array) {
      var length = array.length,
          result = new array.constructor(length);

      // Add array properties assigned by `RegExp#exec`.
      if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {
        result.index = array.index;
        result.input = array.input;
      }
      return result;
    }

    /**
     * Initializes an object clone.
     *
     * @private
     * @param {Object} object The object to clone.
     * @returns {Object} Returns the initialized clone.
     */
    function initCloneObject(object) {
      var Ctor = object.constructor;
      if (!(typeof Ctor == 'function' && Ctor instanceof Ctor)) {
        Ctor = Object;
      }
      return new Ctor;
    }

    /**
     * Initializes an object clone based on its `toStringTag`.
     *
     * **Note:** This function only supports cloning values with tags of
     * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.
     *
     * @private
     * @param {Object} object The object to clone.
     * @param {string} tag The `toStringTag` of the object to clone.
     * @param {boolean} [isDeep] Specify a deep clone.
     * @returns {Object} Returns the initialized clone.
     */
    function initCloneByTag(object, tag, isDeep) {
      var Ctor = object.constructor;
      switch (tag) {
        case arrayBufferTag:
          return bufferClone(object);

        case boolTag:
        case dateTag:
          return new Ctor(+object);

        case float32Tag: case float64Tag:
        case int8Tag: case int16Tag: case int32Tag:
        case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:
          var buffer = object.buffer;
          return new Ctor(isDeep ? bufferClone(buffer) : buffer, object.byteOffset, object.length);

        case numberTag:
        case stringTag:
          return new Ctor(object);

        case regexpTag:
          var result = new Ctor(object.source, reFlags.exec(object));
          result.lastIndex = object.lastIndex;
      }
      return result;
    }

    /**
     * Invokes the method at `path` on `object`.
     *
     * @private
     * @param {Object} object The object to query.
     * @param {Array|string} path The path of the method to invoke.
     * @param {Array} args The arguments to invoke the method with.
     * @returns {*} Returns the result of the invoked method.
     */
    function invokePath(object, path, args) {
      if (object != null && !isKey(path, object)) {
        path = toPath(path);
        object = path.length == 1 ? object : baseGet(object, baseSlice(path, 0, -1));
        path = last(path);
      }
      var func = object == null ? object : object[path];
      return func == null ? undefined : func.apply(object, args);
    }

    /**
     * Checks if `value` is array-like.
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is array-like, else `false`.
     */
    function isArrayLike(value) {
      return value != null && isLength(getLength(value));
    }

    /**
     * Checks if `value` is a valid array-like index.
     *
     * @private
     * @param {*} value The value to check.
     * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.
     * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.
     */
    function isIndex(value, length) {
      value = (typeof value == 'number' || reIsUint.test(value)) ? +value : -1;
      length = length == null ? MAX_SAFE_INTEGER : length;
      return value > -1 && value % 1 == 0 && value < length;
    }

    /**
     * Checks if the provided arguments are from an iteratee call.
     *
     * @private
     * @param {*} value The potential iteratee value argument.
     * @param {*} index The potential iteratee index or key argument.
     * @param {*} object The potential iteratee object argument.
     * @returns {boolean} Returns `true` if the arguments are from an iteratee call, else `false`.
     */
    function isIterateeCall(value, index, object) {
      if (!isObject(object)) {
        return false;
      }
      var type = typeof index;
      if (type == 'number'
          ? (isArrayLike(object) && isIndex(index, object.length))
          : (type == 'string' && index in object)) {
        var other = object[index];
        return value === value ? (value === other) : (other !== other);
      }
      return false;
    }

    /**
     * Checks if `value` is a property name and not a property path.
     *
     * @private
     * @param {*} value The value to check.
     * @param {Object} [object] The object to query keys on.
     * @returns {boolean} Returns `true` if `value` is a property name, else `false`.
     */
    function isKey(value, object) {
      var type = typeof value;
      if ((type == 'string' && reIsPlainProp.test(value)) || type == 'number') {
        return true;
      }
      if (isArray(value)) {
        return false;
      }
      var result = !reIsDeepProp.test(value);
      return result || (object != null && value in toObject(object));
    }

    /**
     * Checks if `func` has a lazy counterpart.
     *
     * @private
     * @param {Function} func The function to check.
     * @returns {boolean} Returns `true` if `func` has a lazy counterpart, else `false`.
     */
    function isLaziable(func) {
      var funcName = getFuncName(func);
      if (!(funcName in LazyWrapper.prototype)) {
        return false;
      }
      var other = lodash[funcName];
      if (func === other) {
        return true;
      }
      var data = getData(other);
      return !!data && func === data[0];
    }

    /**
     * Checks if `value` is a valid array-like length.
     *
     * **Note:** This function is based on [`ToLength`](http://ecma-international.org/ecma-262/6.0/#sec-tolength).
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.
     */
    function isLength(value) {
      return typeof value == 'number' && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;
    }

    /**
     * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` if suitable for strict
     *  equality comparisons, else `false`.
     */
    function isStrictComparable(value) {
      return value === value && !isObject(value);
    }

    /**
     * Merges the function metadata of `source` into `data`.
     *
     * Merging metadata reduces the number of wrappers required to invoke a function.
     * This is possible because methods like `_.bind`, `_.curry`, and `_.partial`
     * may be applied regardless of execution order. Methods like `_.ary` and `_.rearg`
     * augment function arguments, making the order in which they are executed important,
     * preventing the merging of metadata. However, we make an exception for a safe
     * common case where curried functions have `_.ary` and or `_.rearg` applied.
     *
     * @private
     * @param {Array} data The destination metadata.
     * @param {Array} source The source metadata.
     * @returns {Array} Returns `data`.
     */
    function mergeData(data, source) {
      var bitmask = data[1],
          srcBitmask = source[1],
          newBitmask = bitmask | srcBitmask,
          isCommon = newBitmask < ARY_FLAG;

      var isCombo =
        (srcBitmask == ARY_FLAG && bitmask == CURRY_FLAG) ||
        (srcBitmask == ARY_FLAG && bitmask == REARG_FLAG && data[7].length <= source[8]) ||
        (srcBitmask == (ARY_FLAG | REARG_FLAG) && bitmask == CURRY_FLAG);

      // Exit early if metadata can't be merged.
      if (!(isCommon || isCombo)) {
        return data;
      }
      // Use source `thisArg` if available.
      if (srcBitmask & BIND_FLAG) {
        data[2] = source[2];
        // Set when currying a bound function.
        newBitmask |= (bitmask & BIND_FLAG) ? 0 : CURRY_BOUND_FLAG;
      }
      // Compose partial arguments.
      var value = source[3];
      if (value) {
        var partials = data[3];
        data[3] = partials ? composeArgs(partials, value, source[4]) : arrayCopy(value);
        data[4] = partials ? replaceHolders(data[3], PLACEHOLDER) : arrayCopy(source[4]);
      }
      // Compose partial right arguments.
      value = source[5];
      if (value) {
        partials = data[5];
        data[5] = partials ? composeArgsRight(partials, value, source[6]) : arrayCopy(value);
        data[6] = partials ? replaceHolders(data[5], PLACEHOLDER) : arrayCopy(source[6]);
      }
      // Use source `argPos` if available.
      value = source[7];
      if (value) {
        data[7] = arrayCopy(value);
      }
      // Use source `ary` if it's smaller.
      if (srcBitmask & ARY_FLAG) {
        data[8] = data[8] == null ? source[8] : nativeMin(data[8], source[8]);
      }
      // Use source `arity` if one is not provided.
      if (data[9] == null) {
        data[9] = source[9];
      }
      // Use source `func` and merge bitmasks.
      data[0] = source[0];
      data[1] = newBitmask;

      return data;
    }

    /**
     * Used by `_.defaultsDeep` to customize its `_.merge` use.
     *
     * @private
     * @param {*} objectValue The destination object property value.
     * @param {*} sourceValue The source object property value.
     * @returns {*} Returns the value to assign to the destination object.
     */
    function mergeDefaults(objectValue, sourceValue) {
      return objectValue === undefined ? sourceValue : merge(objectValue, sourceValue, mergeDefaults);
    }

    /**
     * A specialized version of `_.pick` which picks `object` properties specified
     * by `props`.
     *
     * @private
     * @param {Object} object The source object.
     * @param {string[]} props The property names to pick.
     * @returns {Object} Returns the new object.
     */
    function pickByArray(object, props) {
      object = toObject(object);

      var index = -1,
          length = props.length,
          result = {};

      while (++index < length) {
        var key = props[index];
        if (key in object) {
          result[key] = object[key];
        }
      }
      return result;
    }

    /**
     * A specialized version of `_.pick` which picks `object` properties `predicate`
     * returns truthy for.
     *
     * @private
     * @param {Object} object The source object.
     * @param {Function} predicate The function invoked per iteration.
     * @returns {Object} Returns the new object.
     */
    function pickByCallback(object, predicate) {
      var result = {};
      baseForIn(object, function(value, key, object) {
        if (predicate(value, key, object)) {
          result[key] = value;
        }
      });
      return result;
    }

    /**
     * Reorder `array` according to the specified indexes where the element at
     * the first index is assigned as the first element, the element at
     * the second index is assigned as the second element, and so on.
     *
     * @private
     * @param {Array} array The array to reorder.
     * @param {Array} indexes The arranged array indexes.
     * @returns {Array} Returns `array`.
     */
    function reorder(array, indexes) {
      var arrLength = array.length,
          length = nativeMin(indexes.length, arrLength),
          oldArray = arrayCopy(array);

      while (length--) {
        var index = indexes[length];
        array[length] = isIndex(index, arrLength) ? oldArray[index] : undefined;
      }
      return array;
    }

    /**
     * Sets metadata for `func`.
     *
     * **Note:** If this function becomes hot, i.e. is invoked a lot in a short
     * period of time, it will trip its breaker and transition to an identity function
     * to avoid garbage collection pauses in V8. See [V8 issue 2070](https://code.google.com/p/v8/issues/detail?id=2070)
     * for more details.
     *
     * @private
     * @param {Function} func The function to associate metadata with.
     * @param {*} data The metadata.
     * @returns {Function} Returns `func`.
     */
    var setData = (function() {
      var count = 0,
          lastCalled = 0;

      return function(key, value) {
        var stamp = now(),
            remaining = HOT_SPAN - (stamp - lastCalled);

        lastCalled = stamp;
        if (remaining > 0) {
          if (++count >= HOT_COUNT) {
            return key;
          }
        } else {
          count = 0;
        }
        return baseSetData(key, value);
      };
    }());

    /**
     * A fallback implementation of `Object.keys` which creates an array of the
     * own enumerable property names of `object`.
     *
     * @private
     * @param {Object} object The object to query.
     * @returns {Array} Returns the array of property names.
     */
    function shimKeys(object) {
      var props = keysIn(object),
          propsLength = props.length,
          length = propsLength && object.length;

      var allowIndexes = !!length && isLength(length) &&
        (isArray(object) || isArguments(object));

      var index = -1,
          result = [];

      while (++index < propsLength) {
        var key = props[index];
        if ((allowIndexes && isIndex(key, length)) || hasOwnProperty.call(object, key)) {
          result.push(key);
        }
      }
      return result;
    }

    /**
     * Converts `value` to an array-like object if it's not one.
     *
     * @private
     * @param {*} value The value to process.
     * @returns {Array|Object} Returns the array-like object.
     */
    function toIterable(value) {
      if (value == null) {
        return [];
      }
      if (!isArrayLike(value)) {
        return values(value);
      }
      return isObject(value) ? value : Object(value);
    }

    /**
     * Converts `value` to an object if it's not one.
     *
     * @private
     * @param {*} value The value to process.
     * @returns {Object} Returns the object.
     */
    function toObject(value) {
      return isObject(value) ? value : Object(value);
    }

    /**
     * Converts `value` to property path array if it's not one.
     *
     * @private
     * @param {*} value The value to process.
     * @returns {Array} Returns the property path array.
     */
    function toPath(value) {
      if (isArray(value)) {
        return value;
      }
      var result = [];
      baseToString(value).replace(rePropName, function(match, number, quote, string) {
        result.push(quote ? string.replace(reEscapeChar, '$1') : (number || match));
      });
      return result;
    }

    /**
     * Creates a clone of `wrapper`.
     *
     * @private
     * @param {Object} wrapper The wrapper to clone.
     * @returns {Object} Returns the cloned wrapper.
     */
    function wrapperClone(wrapper) {
      return wrapper instanceof LazyWrapper
        ? wrapper.clone()
        : new LodashWrapper(wrapper.__wrapped__, wrapper.__chain__, arrayCopy(wrapper.__actions__));
    }

    /*------------------------------------------------------------------------*/

    /**
     * Creates an array of elements split into groups the length of `size`.
     * If `collection` can't be split evenly, the final chunk will be the remaining
     * elements.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to process.
     * @param {number} [size=1] The length of each chunk.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {Array} Returns the new array containing chunks.
     * @example
     *
     * _.chunk(['a', 'b', 'c', 'd'], 2);
     * // => [['a', 'b'], ['c', 'd']]
     *
     * _.chunk(['a', 'b', 'c', 'd'], 3);
     * // => [['a', 'b', 'c'], ['d']]
     */
    function chunk(array, size, guard) {
      if (guard ? isIterateeCall(array, size, guard) : size == null) {
        size = 1;
      } else {
        size = nativeMax(nativeFloor(size) || 1, 1);
      }
      var index = 0,
          length = array ? array.length : 0,
          resIndex = -1,
          result = Array(nativeCeil(length / size));

      while (index < length) {
        result[++resIndex] = baseSlice(array, index, (index += size));
      }
      return result;
    }

    /**
     * Creates an array with all falsey values removed. The values `false`, `null`,
     * `0`, `""`, `undefined`, and `NaN` are falsey.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to compact.
     * @returns {Array} Returns the new array of filtered values.
     * @example
     *
     * _.compact([0, 1, false, 2, '', 3]);
     * // => [1, 2, 3]
     */
    function compact(array) {
      var index = -1,
          length = array ? array.length : 0,
          resIndex = -1,
          result = [];

      while (++index < length) {
        var value = array[index];
        if (value) {
          result[++resIndex] = value;
        }
      }
      return result;
    }

    /**
     * Creates an array of unique `array` values not included in the other
     * provided arrays using [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)
     * for equality comparisons.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to inspect.
     * @param {...Array} [values] The arrays of values to exclude.
     * @returns {Array} Returns the new array of filtered values.
     * @example
     *
     * _.difference([1, 2, 3], [4, 2]);
     * // => [1, 3]
     */
    var difference = restParam(function(array, values) {
      return (isObjectLike(array) && isArrayLike(array))
        ? baseDifference(array, baseFlatten(values, false, true))
        : [];
    });

    /**
     * Creates a slice of `array` with `n` elements dropped from the beginning.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to query.
     * @param {number} [n=1] The number of elements to drop.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * _.drop([1, 2, 3]);
     * // => [2, 3]
     *
     * _.drop([1, 2, 3], 2);
     * // => [3]
     *
     * _.drop([1, 2, 3], 5);
     * // => []
     *
     * _.drop([1, 2, 3], 0);
     * // => [1, 2, 3]
     */
    function drop(array, n, guard) {
      var length = array ? array.length : 0;
      if (!length) {
        return [];
      }
      if (guard ? isIterateeCall(array, n, guard) : n == null) {
        n = 1;
      }
      return baseSlice(array, n < 0 ? 0 : n);
    }

    /**
     * Creates a slice of `array` with `n` elements dropped from the end.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to query.
     * @param {number} [n=1] The number of elements to drop.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * _.dropRight([1, 2, 3]);
     * // => [1, 2]
     *
     * _.dropRight([1, 2, 3], 2);
     * // => [1]
     *
     * _.dropRight([1, 2, 3], 5);
     * // => []
     *
     * _.dropRight([1, 2, 3], 0);
     * // => [1, 2, 3]
     */
    function dropRight(array, n, guard) {
      var length = array ? array.length : 0;
      if (!length) {
        return [];
      }
      if (guard ? isIterateeCall(array, n, guard) : n == null) {
        n = 1;
      }
      n = length - (+n || 0);
      return baseSlice(array, 0, n < 0 ? 0 : n);
    }

    /**
     * Creates a slice of `array` excluding elements dropped from the end.
     * Elements are dropped until `predicate` returns falsey. The predicate is
     * bound to `thisArg` and invoked with three arguments: (value, index, array).
     *
     * If a property name is provided for `predicate` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `predicate` the created `_.matches` style
     * callback returns `true` for elements that match the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to query.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * _.dropRightWhile([1, 2, 3], function(n) {
     *   return n > 1;
     * });
     * // => [1]
     *
     * var users = [
     *   { 'user': 'barney',  'active': true },
     *   { 'user': 'fred',    'active': false },
     *   { 'user': 'pebbles', 'active': false }
     * ];
     *
     * // using the `_.matches` callback shorthand
     * _.pluck(_.dropRightWhile(users, { 'user': 'pebbles', 'active': false }), 'user');
     * // => ['barney', 'fred']
     *
     * // using the `_.matchesProperty` callback shorthand
     * _.pluck(_.dropRightWhile(users, 'active', false), 'user');
     * // => ['barney']
     *
     * // using the `_.property` callback shorthand
     * _.pluck(_.dropRightWhile(users, 'active'), 'user');
     * // => ['barney', 'fred', 'pebbles']
     */
    function dropRightWhile(array, predicate, thisArg) {
      return (array && array.length)
        ? baseWhile(array, getCallback(predicate, thisArg, 3), true, true)
        : [];
    }

    /**
     * Creates a slice of `array` excluding elements dropped from the beginning.
     * Elements are dropped until `predicate` returns falsey. The predicate is
     * bound to `thisArg` and invoked with three arguments: (value, index, array).
     *
     * If a property name is provided for `predicate` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `predicate` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to query.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * _.dropWhile([1, 2, 3], function(n) {
     *   return n < 3;
     * });
     * // => [3]
     *
     * var users = [
     *   { 'user': 'barney',  'active': false },
     *   { 'user': 'fred',    'active': false },
     *   { 'user': 'pebbles', 'active': true }
     * ];
     *
     * // using the `_.matches` callback shorthand
     * _.pluck(_.dropWhile(users, { 'user': 'barney', 'active': false }), 'user');
     * // => ['fred', 'pebbles']
     *
     * // using the `_.matchesProperty` callback shorthand
     * _.pluck(_.dropWhile(users, 'active', false), 'user');
     * // => ['pebbles']
     *
     * // using the `_.property` callback shorthand
     * _.pluck(_.dropWhile(users, 'active'), 'user');
     * // => ['barney', 'fred', 'pebbles']
     */
    function dropWhile(array, predicate, thisArg) {
      return (array && array.length)
        ? baseWhile(array, getCallback(predicate, thisArg, 3), true)
        : [];
    }

    /**
     * Fills elements of `array` with `value` from `start` up to, but not
     * including, `end`.
     *
     * **Note:** This method mutates `array`.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to fill.
     * @param {*} value The value to fill `array` with.
     * @param {number} [start=0] The start position.
     * @param {number} [end=array.length] The end position.
     * @returns {Array} Returns `array`.
     * @example
     *
     * var array = [1, 2, 3];
     *
     * _.fill(array, 'a');
     * console.log(array);
     * // => ['a', 'a', 'a']
     *
     * _.fill(Array(3), 2);
     * // => [2, 2, 2]
     *
     * _.fill([4, 6, 8], '*', 1, 2);
     * // => [4, '*', 8]
     */
    function fill(array, value, start, end) {
      var length = array ? array.length : 0;
      if (!length) {
        return [];
      }
      if (start && typeof start != 'number' && isIterateeCall(array, value, start)) {
        start = 0;
        end = length;
      }
      return baseFill(array, value, start, end);
    }

    /**
     * This method is like `_.find` except that it returns the index of the first
     * element `predicate` returns truthy for instead of the element itself.
     *
     * If a property name is provided for `predicate` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `predicate` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to search.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {number} Returns the index of the found element, else `-1`.
     * @example
     *
     * var users = [
     *   { 'user': 'barney',  'active': false },
     *   { 'user': 'fred',    'active': false },
     *   { 'user': 'pebbles', 'active': true }
     * ];
     *
     * _.findIndex(users, function(chr) {
     *   return chr.user == 'barney';
     * });
     * // => 0
     *
     * // using the `_.matches` callback shorthand
     * _.findIndex(users, { 'user': 'fred', 'active': false });
     * // => 1
     *
     * // using the `_.matchesProperty` callback shorthand
     * _.findIndex(users, 'active', false);
     * // => 0
     *
     * // using the `_.property` callback shorthand
     * _.findIndex(users, 'active');
     * // => 2
     */
    var findIndex = createFindIndex();

    /**
     * This method is like `_.findIndex` except that it iterates over elements
     * of `collection` from right to left.
     *
     * If a property name is provided for `predicate` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `predicate` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to search.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {number} Returns the index of the found element, else `-1`.
     * @example
     *
     * var users = [
     *   { 'user': 'barney',  'active': true },
     *   { 'user': 'fred',    'active': false },
     *   { 'user': 'pebbles', 'active': false }
     * ];
     *
     * _.findLastIndex(users, function(chr) {
     *   return chr.user == 'pebbles';
     * });
     * // => 2
     *
     * // using the `_.matches` callback shorthand
     * _.findLastIndex(users, { 'user': 'barney', 'active': true });
     * // => 0
     *
     * // using the `_.matchesProperty` callback shorthand
     * _.findLastIndex(users, 'active', false);
     * // => 2
     *
     * // using the `_.property` callback shorthand
     * _.findLastIndex(users, 'active');
     * // => 0
     */
    var findLastIndex = createFindIndex(true);

    /**
     * Gets the first element of `array`.
     *
     * @static
     * @memberOf _
     * @alias head
     * @category Array
     * @param {Array} array The array to query.
     * @returns {*} Returns the first element of `array`.
     * @example
     *
     * _.first([1, 2, 3]);
     * // => 1
     *
     * _.first([]);
     * // => undefined
     */
    function first(array) {
      return array ? array[0] : undefined;
    }

    /**
     * Flattens a nested array. If `isDeep` is `true` the array is recursively
     * flattened, otherwise it is only flattened a single level.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to flatten.
     * @param {boolean} [isDeep] Specify a deep flatten.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {Array} Returns the new flattened array.
     * @example
     *
     * _.flatten([1, [2, 3, [4]]]);
     * // => [1, 2, 3, [4]]
     *
     * // using `isDeep`
     * _.flatten([1, [2, 3, [4]]], true);
     * // => [1, 2, 3, 4]
     */
    function flatten(array, isDeep, guard) {
      var length = array ? array.length : 0;
      if (guard && isIterateeCall(array, isDeep, guard)) {
        isDeep = false;
      }
      return length ? baseFlatten(array, isDeep) : [];
    }

    /**
     * Recursively flattens a nested array.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to recursively flatten.
     * @returns {Array} Returns the new flattened array.
     * @example
     *
     * _.flattenDeep([1, [2, 3, [4]]]);
     * // => [1, 2, 3, 4]
     */
    function flattenDeep(array) {
      var length = array ? array.length : 0;
      return length ? baseFlatten(array, true) : [];
    }

    /**
     * Gets the index at which the first occurrence of `value` is found in `array`
     * using [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)
     * for equality comparisons. If `fromIndex` is negative, it is used as the offset
     * from the end of `array`. If `array` is sorted providing `true` for `fromIndex`
     * performs a faster binary search.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to search.
     * @param {*} value The value to search for.
     * @param {boolean|number} [fromIndex=0] The index to search from or `true`
     *  to perform a binary search on a sorted array.
     * @returns {number} Returns the index of the matched value, else `-1`.
     * @example
     *
     * _.indexOf([1, 2, 1, 2], 2);
     * // => 1
     *
     * // using `fromIndex`
     * _.indexOf([1, 2, 1, 2], 2, 2);
     * // => 3
     *
     * // performing a binary search
     * _.indexOf([1, 1, 2, 2], 2, true);
     * // => 2
     */
    function indexOf(array, value, fromIndex) {
      var length = array ? array.length : 0;
      if (!length) {
        return -1;
      }
      if (typeof fromIndex == 'number') {
        fromIndex = fromIndex < 0 ? nativeMax(length + fromIndex, 0) : fromIndex;
      } else if (fromIndex) {
        var index = binaryIndex(array, value);
        if (index < length &&
            (value === value ? (value === array[index]) : (array[index] !== array[index]))) {
          return index;
        }
        return -1;
      }
      return baseIndexOf(array, value, fromIndex || 0);
    }

    /**
     * Gets all but the last element of `array`.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to query.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * _.initial([1, 2, 3]);
     * // => [1, 2]
     */
    function initial(array) {
      return dropRight(array, 1);
    }

    /**
     * Creates an array of unique values that are included in all of the provided
     * arrays using [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)
     * for equality comparisons.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {...Array} [arrays] The arrays to inspect.
     * @returns {Array} Returns the new array of shared values.
     * @example
     * _.intersection([1, 2], [4, 2], [2, 1]);
     * // => [2]
     */
    var intersection = restParam(function(arrays) {
      var othLength = arrays.length,
          othIndex = othLength,
          caches = Array(length),
          indexOf = getIndexOf(),
          isCommon = indexOf == baseIndexOf,
          result = [];

      while (othIndex--) {
        var value = arrays[othIndex] = isArrayLike(value = arrays[othIndex]) ? value : [];
        caches[othIndex] = (isCommon && value.length >= 120) ? createCache(othIndex && value) : null;
      }
      var array = arrays[0],
          index = -1,
          length = array ? array.length : 0,
          seen = caches[0];

      outer:
      while (++index < length) {
        value = array[index];
        if ((seen ? cacheIndexOf(seen, value) : indexOf(result, value, 0)) < 0) {
          var othIndex = othLength;
          while (--othIndex) {
            var cache = caches[othIndex];
            if ((cache ? cacheIndexOf(cache, value) : indexOf(arrays[othIndex], value, 0)) < 0) {
              continue outer;
            }
          }
          if (seen) {
            seen.push(value);
          }
          result.push(value);
        }
      }
      return result;
    });

    /**
     * Gets the last element of `array`.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to query.
     * @returns {*} Returns the last element of `array`.
     * @example
     *
     * _.last([1, 2, 3]);
     * // => 3
     */
    function last(array) {
      var length = array ? array.length : 0;
      return length ? array[length - 1] : undefined;
    }

    /**
     * This method is like `_.indexOf` except that it iterates over elements of
     * `array` from right to left.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to search.
     * @param {*} value The value to search for.
     * @param {boolean|number} [fromIndex=array.length-1] The index to search from
     *  or `true` to perform a binary search on a sorted array.
     * @returns {number} Returns the index of the matched value, else `-1`.
     * @example
     *
     * _.lastIndexOf([1, 2, 1, 2], 2);
     * // => 3
     *
     * // using `fromIndex`
     * _.lastIndexOf([1, 2, 1, 2], 2, 2);
     * // => 1
     *
     * // performing a binary search
     * _.lastIndexOf([1, 1, 2, 2], 2, true);
     * // => 3
     */
    function lastIndexOf(array, value, fromIndex) {
      var length = array ? array.length : 0;
      if (!length) {
        return -1;
      }
      var index = length;
      if (typeof fromIndex == 'number') {
        index = (fromIndex < 0 ? nativeMax(length + fromIndex, 0) : nativeMin(fromIndex || 0, length - 1)) + 1;
      } else if (fromIndex) {
        index = binaryIndex(array, value, true) - 1;
        var other = array[index];
        if (value === value ? (value === other) : (other !== other)) {
          return index;
        }
        return -1;
      }
      if (value !== value) {
        return indexOfNaN(array, index, true);
      }
      while (index--) {
        if (array[index] === value) {
          return index;
        }
      }
      return -1;
    }

    /**
     * Removes all provided values from `array` using
     * [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)
     * for equality comparisons.
     *
     * **Note:** Unlike `_.without`, this method mutates `array`.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to modify.
     * @param {...*} [values] The values to remove.
     * @returns {Array} Returns `array`.
     * @example
     *
     * var array = [1, 2, 3, 1, 2, 3];
     *
     * _.pull(array, 2, 3);
     * console.log(array);
     * // => [1, 1]
     */
    function pull() {
      var args = arguments,
          array = args[0];

      if (!(array && array.length)) {
        return array;
      }
      var index = 0,
          indexOf = getIndexOf(),
          length = args.length;

      while (++index < length) {
        var fromIndex = 0,
            value = args[index];

        while ((fromIndex = indexOf(array, value, fromIndex)) > -1) {
          splice.call(array, fromIndex, 1);
        }
      }
      return array;
    }

    /**
     * Removes elements from `array` corresponding to the given indexes and returns
     * an array of the removed elements. Indexes may be specified as an array of
     * indexes or as individual arguments.
     *
     * **Note:** Unlike `_.at`, this method mutates `array`.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to modify.
     * @param {...(number|number[])} [indexes] The indexes of elements to remove,
     *  specified as individual indexes or arrays of indexes.
     * @returns {Array} Returns the new array of removed elements.
     * @example
     *
     * var array = [5, 10, 15, 20];
     * var evens = _.pullAt(array, 1, 3);
     *
     * console.log(array);
     * // => [5, 15]
     *
     * console.log(evens);
     * // => [10, 20]
     */
    var pullAt = restParam(function(array, indexes) {
      indexes = baseFlatten(indexes);

      var result = baseAt(array, indexes);
      basePullAt(array, indexes.sort(baseCompareAscending));
      return result;
    });

    /**
     * Removes all elements from `array` that `predicate` returns truthy for
     * and returns an array of the removed elements. The predicate is bound to
     * `thisArg` and invoked with three arguments: (value, index, array).
     *
     * If a property name is provided for `predicate` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `predicate` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * **Note:** Unlike `_.filter`, this method mutates `array`.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to modify.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {Array} Returns the new array of removed elements.
     * @example
     *
     * var array = [1, 2, 3, 4];
     * var evens = _.remove(array, function(n) {
     *   return n % 2 == 0;
     * });
     *
     * console.log(array);
     * // => [1, 3]
     *
     * console.log(evens);
     * // => [2, 4]
     */
    function remove(array, predicate, thisArg) {
      var result = [];
      if (!(array && array.length)) {
        return result;
      }
      var index = -1,
          indexes = [],
          length = array.length;

      predicate = getCallback(predicate, thisArg, 3);
      while (++index < length) {
        var value = array[index];
        if (predicate(value, index, array)) {
          result.push(value);
          indexes.push(index);
        }
      }
      basePullAt(array, indexes);
      return result;
    }

    /**
     * Gets all but the first element of `array`.
     *
     * @static
     * @memberOf _
     * @alias tail
     * @category Array
     * @param {Array} array The array to query.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * _.rest([1, 2, 3]);
     * // => [2, 3]
     */
    function rest(array) {
      return drop(array, 1);
    }

    /**
     * Creates a slice of `array` from `start` up to, but not including, `end`.
     *
     * **Note:** This method is used instead of `Array#slice` to support node
     * lists in IE < 9 and to ensure dense arrays are returned.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to slice.
     * @param {number} [start=0] The start position.
     * @param {number} [end=array.length] The end position.
     * @returns {Array} Returns the slice of `array`.
     */
    function slice(array, start, end) {
      var length = array ? array.length : 0;
      if (!length) {
        return [];
      }
      if (end && typeof end != 'number' && isIterateeCall(array, start, end)) {
        start = 0;
        end = length;
      }
      return baseSlice(array, start, end);
    }

    /**
     * Uses a binary search to determine the lowest index at which `value` should
     * be inserted into `array` in order to maintain its sort order. If an iteratee
     * function is provided it is invoked for `value` and each element of `array`
     * to compute their sort ranking. The iteratee is bound to `thisArg` and
     * invoked with one argument; (value).
     *
     * If a property name is provided for `iteratee` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `iteratee` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The sorted array to inspect.
     * @param {*} value The value to evaluate.
     * @param {Function|Object|string} [iteratee=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {number} Returns the index at which `value` should be inserted
     *  into `array`.
     * @example
     *
     * _.sortedIndex([30, 50], 40);
     * // => 1
     *
     * _.sortedIndex([4, 4, 5, 5], 5);
     * // => 2
     *
     * var dict = { 'data': { 'thirty': 30, 'forty': 40, 'fifty': 50 } };
     *
     * // using an iteratee function
     * _.sortedIndex(['thirty', 'fifty'], 'forty', function(word) {
     *   return this.data[word];
     * }, dict);
     * // => 1
     *
     * // using the `_.property` callback shorthand
     * _.sortedIndex([{ 'x': 30 }, { 'x': 50 }], { 'x': 40 }, 'x');
     * // => 1
     */
    var sortedIndex = createSortedIndex();

    /**
     * This method is like `_.sortedIndex` except that it returns the highest
     * index at which `value` should be inserted into `array` in order to
     * maintain its sort order.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The sorted array to inspect.
     * @param {*} value The value to evaluate.
     * @param {Function|Object|string} [iteratee=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {number} Returns the index at which `value` should be inserted
     *  into `array`.
     * @example
     *
     * _.sortedLastIndex([4, 4, 5, 5], 5);
     * // => 4
     */
    var sortedLastIndex = createSortedIndex(true);

    /**
     * Creates a slice of `array` with `n` elements taken from the beginning.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to query.
     * @param {number} [n=1] The number of elements to take.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * _.take([1, 2, 3]);
     * // => [1]
     *
     * _.take([1, 2, 3], 2);
     * // => [1, 2]
     *
     * _.take([1, 2, 3], 5);
     * // => [1, 2, 3]
     *
     * _.take([1, 2, 3], 0);
     * // => []
     */
    function take(array, n, guard) {
      var length = array ? array.length : 0;
      if (!length) {
        return [];
      }
      if (guard ? isIterateeCall(array, n, guard) : n == null) {
        n = 1;
      }
      return baseSlice(array, 0, n < 0 ? 0 : n);
    }

    /**
     * Creates a slice of `array` with `n` elements taken from the end.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to query.
     * @param {number} [n=1] The number of elements to take.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * _.takeRight([1, 2, 3]);
     * // => [3]
     *
     * _.takeRight([1, 2, 3], 2);
     * // => [2, 3]
     *
     * _.takeRight([1, 2, 3], 5);
     * // => [1, 2, 3]
     *
     * _.takeRight([1, 2, 3], 0);
     * // => []
     */
    function takeRight(array, n, guard) {
      var length = array ? array.length : 0;
      if (!length) {
        return [];
      }
      if (guard ? isIterateeCall(array, n, guard) : n == null) {
        n = 1;
      }
      n = length - (+n || 0);
      return baseSlice(array, n < 0 ? 0 : n);
    }

    /**
     * Creates a slice of `array` with elements taken from the end. Elements are
     * taken until `predicate` returns falsey. The predicate is bound to `thisArg`
     * and invoked with three arguments: (value, index, array).
     *
     * If a property name is provided for `predicate` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `predicate` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to query.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * _.takeRightWhile([1, 2, 3], function(n) {
     *   return n > 1;
     * });
     * // => [2, 3]
     *
     * var users = [
     *   { 'user': 'barney',  'active': true },
     *   { 'user': 'fred',    'active': false },
     *   { 'user': 'pebbles', 'active': false }
     * ];
     *
     * // using the `_.matches` callback shorthand
     * _.pluck(_.takeRightWhile(users, { 'user': 'pebbles', 'active': false }), 'user');
     * // => ['pebbles']
     *
     * // using the `_.matchesProperty` callback shorthand
     * _.pluck(_.takeRightWhile(users, 'active', false), 'user');
     * // => ['fred', 'pebbles']
     *
     * // using the `_.property` callback shorthand
     * _.pluck(_.takeRightWhile(users, 'active'), 'user');
     * // => []
     */
    function takeRightWhile(array, predicate, thisArg) {
      return (array && array.length)
        ? baseWhile(array, getCallback(predicate, thisArg, 3), false, true)
        : [];
    }

    /**
     * Creates a slice of `array` with elements taken from the beginning. Elements
     * are taken until `predicate` returns falsey. The predicate is bound to
     * `thisArg` and invoked with three arguments: (value, index, array).
     *
     * If a property name is provided for `predicate` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `predicate` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to query.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * _.takeWhile([1, 2, 3], function(n) {
     *   return n < 3;
     * });
     * // => [1, 2]
     *
     * var users = [
     *   { 'user': 'barney',  'active': false },
     *   { 'user': 'fred',    'active': false},
     *   { 'user': 'pebbles', 'active': true }
     * ];
     *
     * // using the `_.matches` callback shorthand
     * _.pluck(_.takeWhile(users, { 'user': 'barney', 'active': false }), 'user');
     * // => ['barney']
     *
     * // using the `_.matchesProperty` callback shorthand
     * _.pluck(_.takeWhile(users, 'active', false), 'user');
     * // => ['barney', 'fred']
     *
     * // using the `_.property` callback shorthand
     * _.pluck(_.takeWhile(users, 'active'), 'user');
     * // => []
     */
    function takeWhile(array, predicate, thisArg) {
      return (array && array.length)
        ? baseWhile(array, getCallback(predicate, thisArg, 3))
        : [];
    }

    /**
     * Creates an array of unique values, in order, from all of the provided arrays
     * using [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)
     * for equality comparisons.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {...Array} [arrays] The arrays to inspect.
     * @returns {Array} Returns the new array of combined values.
     * @example
     *
     * _.union([1, 2], [4, 2], [2, 1]);
     * // => [1, 2, 4]
     */
    var union = restParam(function(arrays) {
      return baseUniq(baseFlatten(arrays, false, true));
    });

    /**
     * Creates a duplicate-free version of an array, using
     * [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)
     * for equality comparisons, in which only the first occurence of each element
     * is kept. Providing `true` for `isSorted` performs a faster search algorithm
     * for sorted arrays. If an iteratee function is provided it is invoked for
     * each element in the array to generate the criterion by which uniqueness
     * is computed. The `iteratee` is bound to `thisArg` and invoked with three
     * arguments: (value, index, array).
     *
     * If a property name is provided for `iteratee` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `iteratee` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @alias unique
     * @category Array
     * @param {Array} array The array to inspect.
     * @param {boolean} [isSorted] Specify the array is sorted.
     * @param {Function|Object|string} [iteratee] The function invoked per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Array} Returns the new duplicate-value-free array.
     * @example
     *
     * _.uniq([2, 1, 2]);
     * // => [2, 1]
     *
     * // using `isSorted`
     * _.uniq([1, 1, 2], true);
     * // => [1, 2]
     *
     * // using an iteratee function
     * _.uniq([1, 2.5, 1.5, 2], function(n) {
     *   return this.floor(n);
     * }, Math);
     * // => [1, 2.5]
     *
     * // using the `_.property` callback shorthand
     * _.uniq([{ 'x': 1 }, { 'x': 2 }, { 'x': 1 }], 'x');
     * // => [{ 'x': 1 }, { 'x': 2 }]
     */
    function uniq(array, isSorted, iteratee, thisArg) {
      var length = array ? array.length : 0;
      if (!length) {
        return [];
      }
      if (isSorted != null && typeof isSorted != 'boolean') {
        thisArg = iteratee;
        iteratee = isIterateeCall(array, isSorted, thisArg) ? undefined : isSorted;
        isSorted = false;
      }
      var callback = getCallback();
      if (!(iteratee == null && callback === baseCallback)) {
        iteratee = callback(iteratee, thisArg, 3);
      }
      return (isSorted && getIndexOf() == baseIndexOf)
        ? sortedUniq(array, iteratee)
        : baseUniq(array, iteratee);
    }

    /**
     * This method is like `_.zip` except that it accepts an array of grouped
     * elements and creates an array regrouping the elements to their pre-zip
     * configuration.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array of grouped elements to process.
     * @returns {Array} Returns the new array of regrouped elements.
     * @example
     *
     * var zipped = _.zip(['fred', 'barney'], [30, 40], [true, false]);
     * // => [['fred', 30, true], ['barney', 40, false]]
     *
     * _.unzip(zipped);
     * // => [['fred', 'barney'], [30, 40], [true, false]]
     */
    function unzip(array) {
      if (!(array && array.length)) {
        return [];
      }
      var index = -1,
          length = 0;

      array = arrayFilter(array, function(group) {
        if (isArrayLike(group)) {
          length = nativeMax(group.length, length);
          return true;
        }
      });
      var result = Array(length);
      while (++index < length) {
        result[index] = arrayMap(array, baseProperty(index));
      }
      return result;
    }

    /**
     * This method is like `_.unzip` except that it accepts an iteratee to specify
     * how regrouped values should be combined. The `iteratee` is bound to `thisArg`
     * and invoked with four arguments: (accumulator, value, index, group).
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array of grouped elements to process.
     * @param {Function} [iteratee] The function to combine regrouped values.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Array} Returns the new array of regrouped elements.
     * @example
     *
     * var zipped = _.zip([1, 2], [10, 20], [100, 200]);
     * // => [[1, 10, 100], [2, 20, 200]]
     *
     * _.unzipWith(zipped, _.add);
     * // => [3, 30, 300]
     */
    function unzipWith(array, iteratee, thisArg) {
      var length = array ? array.length : 0;
      if (!length) {
        return [];
      }
      var result = unzip(array);
      if (iteratee == null) {
        return result;
      }
      iteratee = bindCallback(iteratee, thisArg, 4);
      return arrayMap(result, function(group) {
        return arrayReduce(group, iteratee, undefined, true);
      });
    }

    /**
     * Creates an array excluding all provided values using
     * [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)
     * for equality comparisons.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to filter.
     * @param {...*} [values] The values to exclude.
     * @returns {Array} Returns the new array of filtered values.
     * @example
     *
     * _.without([1, 2, 1, 3], 1, 2);
     * // => [3]
     */
    var without = restParam(function(array, values) {
      return isArrayLike(array)
        ? baseDifference(array, values)
        : [];
    });

    /**
     * Creates an array of unique values that is the [symmetric difference](https://en.wikipedia.org/wiki/Symmetric_difference)
     * of the provided arrays.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {...Array} [arrays] The arrays to inspect.
     * @returns {Array} Returns the new array of values.
     * @example
     *
     * _.xor([1, 2], [4, 2]);
     * // => [1, 4]
     */
    function xor() {
      var index = -1,
          length = arguments.length;

      while (++index < length) {
        var array = arguments[index];
        if (isArrayLike(array)) {
          var result = result
            ? arrayPush(baseDifference(result, array), baseDifference(array, result))
            : array;
        }
      }
      return result ? baseUniq(result) : [];
    }

    /**
     * Creates an array of grouped elements, the first of which contains the first
     * elements of the given arrays, the second of which contains the second elements
     * of the given arrays, and so on.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {...Array} [arrays] The arrays to process.
     * @returns {Array} Returns the new array of grouped elements.
     * @example
     *
     * _.zip(['fred', 'barney'], [30, 40], [true, false]);
     * // => [['fred', 30, true], ['barney', 40, false]]
     */
    var zip = restParam(unzip);

    /**
     * The inverse of `_.pairs`; this method returns an object composed from arrays
     * of property names and values. Provide either a single two dimensional array,
     * e.g. `[[key1, value1], [key2, value2]]` or two arrays, one of property names
     * and one of corresponding values.
     *
     * @static
     * @memberOf _
     * @alias object
     * @category Array
     * @param {Array} props The property names.
     * @param {Array} [values=[]] The property values.
     * @returns {Object} Returns the new object.
     * @example
     *
     * _.zipObject([['fred', 30], ['barney', 40]]);
     * // => { 'fred': 30, 'barney': 40 }
     *
     * _.zipObject(['fred', 'barney'], [30, 40]);
     * // => { 'fred': 30, 'barney': 40 }
     */
    function zipObject(props, values) {
      var index = -1,
          length = props ? props.length : 0,
          result = {};

      if (length && !values && !isArray(props[0])) {
        values = [];
      }
      while (++index < length) {
        var key = props[index];
        if (values) {
          result[key] = values[index];
        } else if (key) {
          result[key[0]] = key[1];
        }
      }
      return result;
    }

    /**
     * This method is like `_.zip` except that it accepts an iteratee to specify
     * how grouped values should be combined. The `iteratee` is bound to `thisArg`
     * and invoked with four arguments: (accumulator, value, index, group).
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {...Array} [arrays] The arrays to process.
     * @param {Function} [iteratee] The function to combine grouped values.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Array} Returns the new array of grouped elements.
     * @example
     *
     * _.zipWith([1, 2], [10, 20], [100, 200], _.add);
     * // => [111, 222]
     */
    var zipWith = restParam(function(arrays) {
      var length = arrays.length,
          iteratee = length > 2 ? arrays[length - 2] : undefined,
          thisArg = length > 1 ? arrays[length - 1] : undefined;

      if (length > 2 && typeof iteratee == 'function') {
        length -= 2;
      } else {
        iteratee = (length > 1 && typeof thisArg == 'function') ? (--length, thisArg) : undefined;
        thisArg = undefined;
      }
      arrays.length = length;
      return unzipWith(arrays, iteratee, thisArg);
    });

    /*------------------------------------------------------------------------*/

    /**
     * Creates a `lodash` object that wraps `value` with explicit method
     * chaining enabled.
     *
     * @static
     * @memberOf _
     * @category Chain
     * @param {*} value The value to wrap.
     * @returns {Object} Returns the new `lodash` wrapper instance.
     * @example
     *
     * var users = [
     *   { 'user': 'barney',  'age': 36 },
     *   { 'user': 'fred',    'age': 40 },
     *   { 'user': 'pebbles', 'age': 1 }
     * ];
     *
     * var youngest = _.chain(users)
     *   .sortBy('age')
     *   .map(function(chr) {
     *     return chr.user + ' is ' + chr.age;
     *   })
     *   .first()
     *   .value();
     * // => 'pebbles is 1'
     */
    function chain(value) {
      var result = lodash(value);
      result.__chain__ = true;
      return result;
    }

    /**
     * This method invokes `interceptor` and returns `value`. The interceptor is
     * bound to `thisArg` and invoked with one argument; (value). The purpose of
     * this method is to "tap into" a method chain in order to perform operations
     * on intermediate results within the chain.
     *
     * @static
     * @memberOf _
     * @category Chain
     * @param {*} value The value to provide to `interceptor`.
     * @param {Function} interceptor The function to invoke.
     * @param {*} [thisArg] The `this` binding of `interceptor`.
     * @returns {*} Returns `value`.
     * @example
     *
     * _([1, 2, 3])
     *  .tap(function(array) {
     *    array.pop();
     *  })
     *  .reverse()
     *  .value();
     * // => [2, 1]
     */
    function tap(value, interceptor, thisArg) {
      interceptor.call(thisArg, value);
      return value;
    }

    /**
     * This method is like `_.tap` except that it returns the result of `interceptor`.
     *
     * @static
     * @memberOf _
     * @category Chain
     * @param {*} value The value to provide to `interceptor`.
     * @param {Function} interceptor The function to invoke.
     * @param {*} [thisArg] The `this` binding of `interceptor`.
     * @returns {*} Returns the result of `interceptor`.
     * @example
     *
     * _('  abc  ')
     *  .chain()
     *  .trim()
     *  .thru(function(value) {
     *    return [value];
     *  })
     *  .value();
     * // => ['abc']
     */
    function thru(value, interceptor, thisArg) {
      return interceptor.call(thisArg, value);
    }

    /**
     * Enables explicit method chaining on the wrapper object.
     *
     * @name chain
     * @memberOf _
     * @category Chain
     * @returns {Object} Returns the new `lodash` wrapper instance.
     * @example
     *
     * var users = [
     *   { 'user': 'barney', 'age': 36 },
     *   { 'user': 'fred',   'age': 40 }
     * ];
     *
     * // without explicit chaining
     * _(users).first();
     * // => { 'user': 'barney', 'age': 36 }
     *
     * // with explicit chaining
     * _(users).chain()
     *   .first()
     *   .pick('user')
     *   .value();
     * // => { 'user': 'barney' }
     */
    function wrapperChain() {
      return chain(this);
    }

    /**
     * Executes the chained sequence and returns the wrapped result.
     *
     * @name commit
     * @memberOf _
     * @category Chain
     * @returns {Object} Returns the new `lodash` wrapper instance.
     * @example
     *
     * var array = [1, 2];
     * var wrapped = _(array).push(3);
     *
     * console.log(array);
     * // => [1, 2]
     *
     * wrapped = wrapped.commit();
     * console.log(array);
     * // => [1, 2, 3]
     *
     * wrapped.last();
     * // => 3
     *
     * console.log(array);
     * // => [1, 2, 3]
     */
    function wrapperCommit() {
      return new LodashWrapper(this.value(), this.__chain__);
    }

    /**
     * Creates a new array joining a wrapped array with any additional arrays
     * and/or values.
     *
     * @name concat
     * @memberOf _
     * @category Chain
     * @param {...*} [values] The values to concatenate.
     * @returns {Array} Returns the new concatenated array.
     * @example
     *
     * var array = [1];
     * var wrapped = _(array).concat(2, [3], [[4]]);
     *
     * console.log(wrapped.value());
     * // => [1, 2, 3, [4]]
     *
     * console.log(array);
     * // => [1]
     */
    var wrapperConcat = restParam(function(values) {
      values = baseFlatten(values);
      return this.thru(function(array) {
        return arrayConcat(isArray(array) ? array : [toObject(array)], values);
      });
    });

    /**
     * Creates a clone of the chained sequence planting `value` as the wrapped value.
     *
     * @name plant
     * @memberOf _
     * @category Chain
     * @returns {Object} Returns the new `lodash` wrapper instance.
     * @example
     *
     * var array = [1, 2];
     * var wrapped = _(array).map(function(value) {
     *   return Math.pow(value, 2);
     * });
     *
     * var other = [3, 4];
     * var otherWrapped = wrapped.plant(other);
     *
     * otherWrapped.value();
     * // => [9, 16]
     *
     * wrapped.value();
     * // => [1, 4]
     */
    function wrapperPlant(value) {
      var result,
          parent = this;

      while (parent instanceof baseLodash) {
        var clone = wrapperClone(parent);
        if (result) {
          previous.__wrapped__ = clone;
        } else {
          result = clone;
        }
        var previous = clone;
        parent = parent.__wrapped__;
      }
      previous.__wrapped__ = value;
      return result;
    }

    /**
     * Reverses the wrapped array so the first element becomes the last, the
     * second element becomes the second to last, and so on.
     *
     * **Note:** This method mutates the wrapped array.
     *
     * @name reverse
     * @memberOf _
     * @category Chain
     * @returns {Object} Returns the new reversed `lodash` wrapper instance.
     * @example
     *
     * var array = [1, 2, 3];
     *
     * _(array).reverse().value()
     * // => [3, 2, 1]
     *
     * console.log(array);
     * // => [3, 2, 1]
     */
    function wrapperReverse() {
      var value = this.__wrapped__;

      var interceptor = function(value) {
        return (wrapped && wrapped.__dir__ < 0) ? value : value.reverse();
      };
      if (value instanceof LazyWrapper) {
        var wrapped = value;
        if (this.__actions__.length) {
          wrapped = new LazyWrapper(this);
        }
        wrapped = wrapped.reverse();
        wrapped.__actions__.push({ 'func': thru, 'args': [interceptor], 'thisArg': undefined });
        return new LodashWrapper(wrapped, this.__chain__);
      }
      return this.thru(interceptor);
    }

    /**
     * Produces the result of coercing the unwrapped value to a string.
     *
     * @name toString
     * @memberOf _
     * @category Chain
     * @returns {string} Returns the coerced string value.
     * @example
     *
     * _([1, 2, 3]).toString();
     * // => '1,2,3'
     */
    function wrapperToString() {
      return (this.value() + '');
    }

    /**
     * Executes the chained sequence to extract the unwrapped value.
     *
     * @name value
     * @memberOf _
     * @alias run, toJSON, valueOf
     * @category Chain
     * @returns {*} Returns the resolved unwrapped value.
     * @example
     *
     * _([1, 2, 3]).value();
     * // => [1, 2, 3]
     */
    function wrapperValue() {
      return baseWrapperValue(this.__wrapped__, this.__actions__);
    }

    /*------------------------------------------------------------------------*/

    /**
     * Creates an array of elements corresponding to the given keys, or indexes,
     * of `collection`. Keys may be specified as individual arguments or as arrays
     * of keys.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {...(number|number[]|string|string[])} [props] The property names
     *  or indexes of elements to pick, specified individually or in arrays.
     * @returns {Array} Returns the new array of picked elements.
     * @example
     *
     * _.at(['a', 'b', 'c'], [0, 2]);
     * // => ['a', 'c']
     *
     * _.at(['barney', 'fred', 'pebbles'], 0, 2);
     * // => ['barney', 'pebbles']
     */
    var at = restParam(function(collection, props) {
      return baseAt(collection, baseFlatten(props));
    });

    /**
     * Creates an object composed of keys generated from the results of running
     * each element of `collection` through `iteratee`. The corresponding value
     * of each key is the number of times the key was returned by `iteratee`.
     * The `iteratee` is bound to `thisArg` and invoked with three arguments:
     * (value, index|key, collection).
     *
     * If a property name is provided for `iteratee` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `iteratee` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [iteratee=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Object} Returns the composed aggregate object.
     * @example
     *
     * _.countBy([4.3, 6.1, 6.4], function(n) {
     *   return Math.floor(n);
     * });
     * // => { '4': 1, '6': 2 }
     *
     * _.countBy([4.3, 6.1, 6.4], function(n) {
     *   return this.floor(n);
     * }, Math);
     * // => { '4': 1, '6': 2 }
     *
     * _.countBy(['one', 'two', 'three'], 'length');
     * // => { '3': 2, '5': 1 }
     */
    var countBy = createAggregator(function(result, value, key) {
      hasOwnProperty.call(result, key) ? ++result[key] : (result[key] = 1);
    });

    /**
     * Checks if `predicate` returns truthy for **all** elements of `collection`.
     * The predicate is bound to `thisArg` and invoked with three arguments:
     * (value, index|key, collection).
     *
     * If a property name is provided for `predicate` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `predicate` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @alias all
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {boolean} Returns `true` if all elements pass the predicate check,
     *  else `false`.
     * @example
     *
     * _.every([true, 1, null, 'yes'], Boolean);
     * // => false
     *
     * var users = [
     *   { 'user': 'barney', 'active': false },
     *   { 'user': 'fred',   'active': false }
     * ];
     *
     * // using the `_.matches` callback shorthand
     * _.every(users, { 'user': 'barney', 'active': false });
     * // => false
     *
     * // using the `_.matchesProperty` callback shorthand
     * _.every(users, 'active', false);
     * // => true
     *
     * // using the `_.property` callback shorthand
     * _.every(users, 'active');
     * // => false
     */
    function every(collection, predicate, thisArg) {
      var func = isArray(collection) ? arrayEvery : baseEvery;
      if (thisArg && isIterateeCall(collection, predicate, thisArg)) {
        predicate = undefined;
      }
      if (typeof predicate != 'function' || thisArg !== undefined) {
        predicate = getCallback(predicate, thisArg, 3);
      }
      return func(collection, predicate);
    }

    /**
     * Iterates over elements of `collection`, returning an array of all elements
     * `predicate` returns truthy for. The predicate is bound to `thisArg` and
     * invoked with three arguments: (value, index|key, collection).
     *
     * If a property name is provided for `predicate` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `predicate` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @alias select
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {Array} Returns the new filtered array.
     * @example
     *
     * _.filter([4, 5, 6], function(n) {
     *   return n % 2 == 0;
     * });
     * // => [4, 6]
     *
     * var users = [
     *   { 'user': 'barney', 'age': 36, 'active': true },
     *   { 'user': 'fred',   'age': 40, 'active': false }
     * ];
     *
     * // using the `_.matches` callback shorthand
     * _.pluck(_.filter(users, { 'age': 36, 'active': true }), 'user');
     * // => ['barney']
     *
     * // using the `_.matchesProperty` callback shorthand
     * _.pluck(_.filter(users, 'active', false), 'user');
     * // => ['fred']
     *
     * // using the `_.property` callback shorthand
     * _.pluck(_.filter(users, 'active'), 'user');
     * // => ['barney']
     */
    function filter(collection, predicate, thisArg) {
      var func = isArray(collection) ? arrayFilter : baseFilter;
      predicate = getCallback(predicate, thisArg, 3);
      return func(collection, predicate);
    }

    /**
     * Iterates over elements of `collection`, returning the first element
     * `predicate` returns truthy for. The predicate is bound to `thisArg` and
     * invoked with three arguments: (value, index|key, collection).
     *
     * If a property name is provided for `predicate` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `predicate` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @alias detect
     * @category Collection
     * @param {Array|Object|string} collection The collection to search.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {*} Returns the matched element, else `undefined`.
     * @example
     *
     * var users = [
     *   { 'user': 'barney',  'age': 36, 'active': true },
     *   { 'user': 'fred',    'age': 40, 'active': false },
     *   { 'user': 'pebbles', 'age': 1,  'active': true }
     * ];
     *
     * _.result(_.find(users, function(chr) {
     *   return chr.age < 40;
     * }), 'user');
     * // => 'barney'
     *
     * // using the `_.matches` callback shorthand
     * _.result(_.find(users, { 'age': 1, 'active': true }), 'user');
     * // => 'pebbles'
     *
     * // using the `_.matchesProperty` callback shorthand
     * _.result(_.find(users, 'active', false), 'user');
     * // => 'fred'
     *
     * // using the `_.property` callback shorthand
     * _.result(_.find(users, 'active'), 'user');
     * // => 'barney'
     */
    var find = createFind(baseEach);

    /**
     * This method is like `_.find` except that it iterates over elements of
     * `collection` from right to left.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to search.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {*} Returns the matched element, else `undefined`.
     * @example
     *
     * _.findLast([1, 2, 3, 4], function(n) {
     *   return n % 2 == 1;
     * });
     * // => 3
     */
    var findLast = createFind(baseEachRight, true);

    /**
     * Performs a deep comparison between each element in `collection` and the
     * source object, returning the first element that has equivalent property
     * values.
     *
     * **Note:** This method supports comparing arrays, booleans, `Date` objects,
     * numbers, `Object` objects, regexes, and strings. Objects are compared by
     * their own, not inherited, enumerable properties. For comparing a single
     * own or inherited property value see `_.matchesProperty`.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to search.
     * @param {Object} source The object of property values to match.
     * @returns {*} Returns the matched element, else `undefined`.
     * @example
     *
     * var users = [
     *   { 'user': 'barney', 'age': 36, 'active': true },
     *   { 'user': 'fred',   'age': 40, 'active': false }
     * ];
     *
     * _.result(_.findWhere(users, { 'age': 36, 'active': true }), 'user');
     * // => 'barney'
     *
     * _.result(_.findWhere(users, { 'age': 40, 'active': false }), 'user');
     * // => 'fred'
     */
    function findWhere(collection, source) {
      return find(collection, baseMatches(source));
    }

    /**
     * Iterates over elements of `collection` invoking `iteratee` for each element.
     * The `iteratee` is bound to `thisArg` and invoked with three arguments:
     * (value, index|key, collection). Iteratee functions may exit iteration early
     * by explicitly returning `false`.
     *
     * **Note:** As with other "Collections" methods, objects with a "length" property
     * are iterated like arrays. To avoid this behavior `_.forIn` or `_.forOwn`
     * may be used for object iteration.
     *
     * @static
     * @memberOf _
     * @alias each
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Array|Object|string} Returns `collection`.
     * @example
     *
     * _([1, 2]).forEach(function(n) {
     *   console.log(n);
     * }).value();
     * // => logs each value from left to right and returns the array
     *
     * _.forEach({ 'a': 1, 'b': 2 }, function(n, key) {
     *   console.log(n, key);
     * });
     * // => logs each value-key pair and returns the object (iteration order is not guaranteed)
     */
    var forEach = createForEach(arrayEach, baseEach);

    /**
     * This method is like `_.forEach` except that it iterates over elements of
     * `collection` from right to left.
     *
     * @static
     * @memberOf _
     * @alias eachRight
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Array|Object|string} Returns `collection`.
     * @example
     *
     * _([1, 2]).forEachRight(function(n) {
     *   console.log(n);
     * }).value();
     * // => logs each value from right to left and returns the array
     */
    var forEachRight = createForEach(arrayEachRight, baseEachRight);

    /**
     * Creates an object composed of keys generated from the results of running
     * each element of `collection` through `iteratee`. The corresponding value
     * of each key is an array of the elements responsible for generating the key.
     * The `iteratee` is bound to `thisArg` and invoked with three arguments:
     * (value, index|key, collection).
     *
     * If a property name is provided for `iteratee` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `iteratee` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [iteratee=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Object} Returns the composed aggregate object.
     * @example
     *
     * _.groupBy([4.2, 6.1, 6.4], function(n) {
     *   return Math.floor(n);
     * });
     * // => { '4': [4.2], '6': [6.1, 6.4] }
     *
     * _.groupBy([4.2, 6.1, 6.4], function(n) {
     *   return this.floor(n);
     * }, Math);
     * // => { '4': [4.2], '6': [6.1, 6.4] }
     *
     * // using the `_.property` callback shorthand
     * _.groupBy(['one', 'two', 'three'], 'length');
     * // => { '3': ['one', 'two'], '5': ['three'] }
     */
    var groupBy = createAggregator(function(result, value, key) {
      if (hasOwnProperty.call(result, key)) {
        result[key].push(value);
      } else {
        result[key] = [value];
      }
    });

    /**
     * Checks if `value` is in `collection` using
     * [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)
     * for equality comparisons. If `fromIndex` is negative, it is used as the offset
     * from the end of `collection`.
     *
     * @static
     * @memberOf _
     * @alias contains, include
     * @category Collection
     * @param {Array|Object|string} collection The collection to search.
     * @param {*} target The value to search for.
     * @param {number} [fromIndex=0] The index to search from.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.reduce`.
     * @returns {boolean} Returns `true` if a matching element is found, else `false`.
     * @example
     *
     * _.includes([1, 2, 3], 1);
     * // => true
     *
     * _.includes([1, 2, 3], 1, 2);
     * // => false
     *
     * _.includes({ 'user': 'fred', 'age': 40 }, 'fred');
     * // => true
     *
     * _.includes('pebbles', 'eb');
     * // => true
     */
    function includes(collection, target, fromIndex, guard) {
      var length = collection ? getLength(collection) : 0;
      if (!isLength(length)) {
        collection = values(collection);
        length = collection.length;
      }
      if (typeof fromIndex != 'number' || (guard && isIterateeCall(target, fromIndex, guard))) {
        fromIndex = 0;
      } else {
        fromIndex = fromIndex < 0 ? nativeMax(length + fromIndex, 0) : (fromIndex || 0);
      }
      return (typeof collection == 'string' || !isArray(collection) && isString(collection))
        ? (fromIndex <= length && collection.indexOf(target, fromIndex) > -1)
        : (!!length && getIndexOf(collection, target, fromIndex) > -1);
    }

    /**
     * Creates an object composed of keys generated from the results of running
     * each element of `collection` through `iteratee`. The corresponding value
     * of each key is the last element responsible for generating the key. The
     * iteratee function is bound to `thisArg` and invoked with three arguments:
     * (value, index|key, collection).
     *
     * If a property name is provided for `iteratee` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `iteratee` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [iteratee=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Object} Returns the composed aggregate object.
     * @example
     *
     * var keyData = [
     *   { 'dir': 'left', 'code': 97 },
     *   { 'dir': 'right', 'code': 100 }
     * ];
     *
     * _.indexBy(keyData, 'dir');
     * // => { 'left': { 'dir': 'left', 'code': 97 }, 'right': { 'dir': 'right', 'code': 100 } }
     *
     * _.indexBy(keyData, function(object) {
     *   return String.fromCharCode(object.code);
     * });
     * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }
     *
     * _.indexBy(keyData, function(object) {
     *   return this.fromCharCode(object.code);
     * }, String);
     * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }
     */
    var indexBy = createAggregator(function(result, value, key) {
      result[key] = value;
    });

    /**
     * Invokes the method at `path` of each element in `collection`, returning
     * an array of the results of each invoked method. Any additional arguments
     * are provided to each invoked method. If `methodName` is a function it is
     * invoked for, and `this` bound to, each element in `collection`.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Array|Function|string} path The path of the method to invoke or
     *  the function invoked per iteration.
     * @param {...*} [args] The arguments to invoke the method with.
     * @returns {Array} Returns the array of results.
     * @example
     *
     * _.invoke([[5, 1, 7], [3, 2, 1]], 'sort');
     * // => [[1, 5, 7], [1, 2, 3]]
     *
     * _.invoke([123, 456], String.prototype.split, '');
     * // => [['1', '2', '3'], ['4', '5', '6']]
     */
    var invoke = restParam(function(collection, path, args) {
      var index = -1,
          isFunc = typeof path == 'function',
          isProp = isKey(path),
          result = isArrayLike(collection) ? Array(collection.length) : [];

      baseEach(collection, function(value) {
        var func = isFunc ? path : ((isProp && value != null) ? value[path] : undefined);
        result[++index] = func ? func.apply(value, args) : invokePath(value, path, args);
      });
      return result;
    });

    /**
     * Creates an array of values by running each element in `collection` through
     * `iteratee`. The `iteratee` is bound to `thisArg` and invoked with three
     * arguments: (value, index|key, collection).
     *
     * If a property name is provided for `iteratee` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `iteratee` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * Many lodash methods are guarded to work as iteratees for methods like
     * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.
     *
     * The guarded methods are:
     * `ary`, `callback`, `chunk`, `clone`, `create`, `curry`, `curryRight`,
     * `drop`, `dropRight`, `every`, `fill`, `flatten`, `invert`, `max`, `min`,
     * `parseInt`, `slice`, `sortBy`, `take`, `takeRight`, `template`, `trim`,
     * `trimLeft`, `trimRight`, `trunc`, `random`, `range`, `sample`, `some`,
     * `sum`, `uniq`, and `words`
     *
     * @static
     * @memberOf _
     * @alias collect
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [iteratee=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Array} Returns the new mapped array.
     * @example
     *
     * function timesThree(n) {
     *   return n * 3;
     * }
     *
     * _.map([1, 2], timesThree);
     * // => [3, 6]
     *
     * _.map({ 'a': 1, 'b': 2 }, timesThree);
     * // => [3, 6] (iteration order is not guaranteed)
     *
     * var users = [
     *   { 'user': 'barney' },
     *   { 'user': 'fred' }
     * ];
     *
     * // using the `_.property` callback shorthand
     * _.map(users, 'user');
     * // => ['barney', 'fred']
     */
    function map(collection, iteratee, thisArg) {
      var func = isArray(collection) ? arrayMap : baseMap;
      iteratee = getCallback(iteratee, thisArg, 3);
      return func(collection, iteratee);
    }

    /**
     * Creates an array of elements split into two groups, the first of which
     * contains elements `predicate` returns truthy for, while the second of which
     * contains elements `predicate` returns falsey for. The predicate is bound
     * to `thisArg` and invoked with three arguments: (value, index|key, collection).
     *
     * If a property name is provided for `predicate` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `predicate` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {Array} Returns the array of grouped elements.
     * @example
     *
     * _.partition([1, 2, 3], function(n) {
     *   return n % 2;
     * });
     * // => [[1, 3], [2]]
     *
     * _.partition([1.2, 2.3, 3.4], function(n) {
     *   return this.floor(n) % 2;
     * }, Math);
     * // => [[1.2, 3.4], [2.3]]
     *
     * var users = [
     *   { 'user': 'barney',  'age': 36, 'active': false },
     *   { 'user': 'fred',    'age': 40, 'active': true },
     *   { 'user': 'pebbles', 'age': 1,  'active': false }
     * ];
     *
     * var mapper = function(array) {
     *   return _.pluck(array, 'user');
     * };
     *
     * // using the `_.matches` callback shorthand
     * _.map(_.partition(users, { 'age': 1, 'active': false }), mapper);
     * // => [['pebbles'], ['barney', 'fred']]
     *
     * // using the `_.matchesProperty` callback shorthand
     * _.map(_.partition(users, 'active', false), mapper);
     * // => [['barney', 'pebbles'], ['fred']]
     *
     * // using the `_.property` callback shorthand
     * _.map(_.partition(users, 'active'), mapper);
     * // => [['fred'], ['barney', 'pebbles']]
     */
    var partition = createAggregator(function(result, value, key) {
      result[key ? 0 : 1].push(value);
    }, function() { return [[], []]; });

    /**
     * Gets the property value of `path` from all elements in `collection`.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Array|string} path The path of the property to pluck.
     * @returns {Array} Returns the property values.
     * @example
     *
     * var users = [
     *   { 'user': 'barney', 'age': 36 },
     *   { 'user': 'fred',   'age': 40 }
     * ];
     *
     * _.pluck(users, 'user');
     * // => ['barney', 'fred']
     *
     * var userIndex = _.indexBy(users, 'user');
     * _.pluck(userIndex, 'age');
     * // => [36, 40] (iteration order is not guaranteed)
     */
    function pluck(collection, path) {
      return map(collection, property(path));
    }

    /**
     * Reduces `collection` to a value which is the accumulated result of running
     * each element in `collection` through `iteratee`, where each successive
     * invocation is supplied the return value of the previous. If `accumulator`
     * is not provided the first element of `collection` is used as the initial
     * value. The `iteratee` is bound to `thisArg` and invoked with four arguments:
     * (accumulator, value, index|key, collection).
     *
     * Many lodash methods are guarded to work as iteratees for methods like
     * `_.reduce`, `_.reduceRight`, and `_.transform`.
     *
     * The guarded methods are:
     * `assign`, `defaults`, `defaultsDeep`, `includes`, `merge`, `sortByAll`,
     * and `sortByOrder`
     *
     * @static
     * @memberOf _
     * @alias foldl, inject
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @param {*} [accumulator] The initial value.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {*} Returns the accumulated value.
     * @example
     *
     * _.reduce([1, 2], function(total, n) {
     *   return total + n;
     * });
     * // => 3
     *
     * _.reduce({ 'a': 1, 'b': 2 }, function(result, n, key) {
     *   result[key] = n * 3;
     *   return result;
     * }, {});
     * // => { 'a': 3, 'b': 6 } (iteration order is not guaranteed)
     */
    var reduce = createReduce(arrayReduce, baseEach);

    /**
     * This method is like `_.reduce` except that it iterates over elements of
     * `collection` from right to left.
     *
     * @static
     * @memberOf _
     * @alias foldr
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @param {*} [accumulator] The initial value.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {*} Returns the accumulated value.
     * @example
     *
     * var array = [[0, 1], [2, 3], [4, 5]];
     *
     * _.reduceRight(array, function(flattened, other) {
     *   return flattened.concat(other);
     * }, []);
     * // => [4, 5, 2, 3, 0, 1]
     */
    var reduceRight = createReduce(arrayReduceRight, baseEachRight);

    /**
     * The opposite of `_.filter`; this method returns the elements of `collection`
     * that `predicate` does **not** return truthy for.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {Array} Returns the new filtered array.
     * @example
     *
     * _.reject([1, 2, 3, 4], function(n) {
     *   return n % 2 == 0;
     * });
     * // => [1, 3]
     *
     * var users = [
     *   { 'user': 'barney', 'age': 36, 'active': false },
     *   { 'user': 'fred',   'age': 40, 'active': true }
     * ];
     *
     * // using the `_.matches` callback shorthand
     * _.pluck(_.reject(users, { 'age': 40, 'active': true }), 'user');
     * // => ['barney']
     *
     * // using the `_.matchesProperty` callback shorthand
     * _.pluck(_.reject(users, 'active', false), 'user');
     * // => ['fred']
     *
     * // using the `_.property` callback shorthand
     * _.pluck(_.reject(users, 'active'), 'user');
     * // => ['barney']
     */
    function reject(collection, predicate, thisArg) {
      var func = isArray(collection) ? arrayFilter : baseFilter;
      predicate = getCallback(predicate, thisArg, 3);
      return func(collection, function(value, index, collection) {
        return !predicate(value, index, collection);
      });
    }

    /**
     * Gets a random element or `n` random elements from a collection.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to sample.
     * @param {number} [n] The number of elements to sample.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {*} Returns the random sample(s).
     * @example
     *
     * _.sample([1, 2, 3, 4]);
     * // => 2
     *
     * _.sample([1, 2, 3, 4], 2);
     * // => [3, 1]
     */
    function sample(collection, n, guard) {
      if (guard ? isIterateeCall(collection, n, guard) : n == null) {
        collection = toIterable(collection);
        var length = collection.length;
        return length > 0 ? collection[baseRandom(0, length - 1)] : undefined;
      }
      var index = -1,
          result = toArray(collection),
          length = result.length,
          lastIndex = length - 1;

      n = nativeMin(n < 0 ? 0 : (+n || 0), length);
      while (++index < n) {
        var rand = baseRandom(index, lastIndex),
            value = result[rand];

        result[rand] = result[index];
        result[index] = value;
      }
      result.length = n;
      return result;
    }

    /**
     * Creates an array of shuffled values, using a version of the
     * [Fisher-Yates shuffle](https://en.wikipedia.org/wiki/Fisher-Yates_shuffle).
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to shuffle.
     * @returns {Array} Returns the new shuffled array.
     * @example
     *
     * _.shuffle([1, 2, 3, 4]);
     * // => [4, 1, 3, 2]
     */
    function shuffle(collection) {
      return sample(collection, POSITIVE_INFINITY);
    }

    /**
     * Gets the size of `collection` by returning its length for array-like
     * values or the number of own enumerable properties for objects.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to inspect.
     * @returns {number} Returns the size of `collection`.
     * @example
     *
     * _.size([1, 2, 3]);
     * // => 3
     *
     * _.size({ 'a': 1, 'b': 2 });
     * // => 2
     *
     * _.size('pebbles');
     * // => 7
     */
    function size(collection) {
      var length = collection ? getLength(collection) : 0;
      return isLength(length) ? length : keys(collection).length;
    }

    /**
     * Checks if `predicate` returns truthy for **any** element of `collection`.
     * The function returns as soon as it finds a passing value and does not iterate
     * over the entire collection. The predicate is bound to `thisArg` and invoked
     * with three arguments: (value, index|key, collection).
     *
     * If a property name is provided for `predicate` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `predicate` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @alias any
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {boolean} Returns `true` if any element passes the predicate check,
     *  else `false`.
     * @example
     *
     * _.some([null, 0, 'yes', false], Boolean);
     * // => true
     *
     * var users = [
     *   { 'user': 'barney', 'active': true },
     *   { 'user': 'fred',   'active': false }
     * ];
     *
     * // using the `_.matches` callback shorthand
     * _.some(users, { 'user': 'barney', 'active': false });
     * // => false
     *
     * // using the `_.matchesProperty` callback shorthand
     * _.some(users, 'active', false);
     * // => true
     *
     * // using the `_.property` callback shorthand
     * _.some(users, 'active');
     * // => true
     */
    function some(collection, predicate, thisArg) {
      var func = isArray(collection) ? arraySome : baseSome;
      if (thisArg && isIterateeCall(collection, predicate, thisArg)) {
        predicate = undefined;
      }
      if (typeof predicate != 'function' || thisArg !== undefined) {
        predicate = getCallback(predicate, thisArg, 3);
      }
      return func(collection, predicate);
    }

    /**
     * Creates an array of elements, sorted in ascending order by the results of
     * running each element in a collection through `iteratee`. This method performs
     * a stable sort, that is, it preserves the original sort order of equal elements.
     * The `iteratee` is bound to `thisArg` and invoked with three arguments:
     * (value, index|key, collection).
     *
     * If a property name is provided for `iteratee` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `iteratee` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [iteratee=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Array} Returns the new sorted array.
     * @example
     *
     * _.sortBy([1, 2, 3], function(n) {
     *   return Math.sin(n);
     * });
     * // => [3, 1, 2]
     *
     * _.sortBy([1, 2, 3], function(n) {
     *   return this.sin(n);
     * }, Math);
     * // => [3, 1, 2]
     *
     * var users = [
     *   { 'user': 'fred' },
     *   { 'user': 'pebbles' },
     *   { 'user': 'barney' }
     * ];
     *
     * // using the `_.property` callback shorthand
     * _.pluck(_.sortBy(users, 'user'), 'user');
     * // => ['barney', 'fred', 'pebbles']
     */
    function sortBy(collection, iteratee, thisArg) {
      if (collection == null) {
        return [];
      }
      if (thisArg && isIterateeCall(collection, iteratee, thisArg)) {
        iteratee = undefined;
      }
      var index = -1;
      iteratee = getCallback(iteratee, thisArg, 3);

      var result = baseMap(collection, function(value, key, collection) {
        return { 'criteria': iteratee(value, key, collection), 'index': ++index, 'value': value };
      });
      return baseSortBy(result, compareAscending);
    }

    /**
     * This method is like `_.sortBy` except that it can sort by multiple iteratees
     * or property names.
     *
     * If a property name is provided for an iteratee the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If an object is provided for an iteratee the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {...(Function|Function[]|Object|Object[]|string|string[])} iteratees
     *  The iteratees to sort by, specified as individual values or arrays of values.
     * @returns {Array} Returns the new sorted array.
     * @example
     *
     * var users = [
     *   { 'user': 'fred',   'age': 48 },
     *   { 'user': 'barney', 'age': 36 },
     *   { 'user': 'fred',   'age': 42 },
     *   { 'user': 'barney', 'age': 34 }
     * ];
     *
     * _.map(_.sortByAll(users, ['user', 'age']), _.values);
     * // => [['barney', 34], ['barney', 36], ['fred', 42], ['fred', 48]]
     *
     * _.map(_.sortByAll(users, 'user', function(chr) {
     *   return Math.floor(chr.age / 10);
     * }), _.values);
     * // => [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 42]]
     */
    var sortByAll = restParam(function(collection, iteratees) {
      if (collection == null) {
        return [];
      }
      var guard = iteratees[2];
      if (guard && isIterateeCall(iteratees[0], iteratees[1], guard)) {
        iteratees.length = 1;
      }
      return baseSortByOrder(collection, baseFlatten(iteratees), []);
    });

    /**
     * This method is like `_.sortByAll` except that it allows specifying the
     * sort orders of the iteratees to sort by. If `orders` is unspecified, all
     * values are sorted in ascending order. Otherwise, a value is sorted in
     * ascending order if its corresponding order is "asc", and descending if "desc".
     *
     * If a property name is provided for an iteratee the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If an object is provided for an iteratee the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function[]|Object[]|string[]} iteratees The iteratees to sort by.
     * @param {boolean[]} [orders] The sort orders of `iteratees`.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.reduce`.
     * @returns {Array} Returns the new sorted array.
     * @example
     *
     * var users = [
     *   { 'user': 'fred',   'age': 48 },
     *   { 'user': 'barney', 'age': 34 },
     *   { 'user': 'fred',   'age': 42 },
     *   { 'user': 'barney', 'age': 36 }
     * ];
     *
     * // sort by `user` in ascending order and by `age` in descending order
     * _.map(_.sortByOrder(users, ['user', 'age'], ['asc', 'desc']), _.values);
     * // => [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 42]]
     */
    function sortByOrder(collection, iteratees, orders, guard) {
      if (collection == null) {
        return [];
      }
      if (guard && isIterateeCall(iteratees, orders, guard)) {
        orders = undefined;
      }
      if (!isArray(iteratees)) {
        iteratees = iteratees == null ? [] : [iteratees];
      }
      if (!isArray(orders)) {
        orders = orders == null ? [] : [orders];
      }
      return baseSortByOrder(collection, iteratees, orders);
    }

    /**
     * Performs a deep comparison between each element in `collection` and the
     * source object, returning an array of all elements that have equivalent
     * property values.
     *
     * **Note:** This method supports comparing arrays, booleans, `Date` objects,
     * numbers, `Object` objects, regexes, and strings. Objects are compared by
     * their own, not inherited, enumerable properties. For comparing a single
     * own or inherited property value see `_.matchesProperty`.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to search.
     * @param {Object} source The object of property values to match.
     * @returns {Array} Returns the new filtered array.
     * @example
     *
     * var users = [
     *   { 'user': 'barney', 'age': 36, 'active': false, 'pets': ['hoppy'] },
     *   { 'user': 'fred',   'age': 40, 'active': true, 'pets': ['baby puss', 'dino'] }
     * ];
     *
     * _.pluck(_.where(users, { 'age': 36, 'active': false }), 'user');
     * // => ['barney']
     *
     * _.pluck(_.where(users, { 'pets': ['dino'] }), 'user');
     * // => ['fred']
     */
    function where(collection, source) {
      return filter(collection, baseMatches(source));
    }

    /*------------------------------------------------------------------------*/

    /**
     * Gets the number of milliseconds that have elapsed since the Unix epoch
     * (1 January 1970 00:00:00 UTC).
     *
     * @static
     * @memberOf _
     * @category Date
     * @example
     *
     * _.defer(function(stamp) {
     *   console.log(_.now() - stamp);
     * }, _.now());
     * // => logs the number of milliseconds it took for the deferred function to be invoked
     */
    var now = nativeNow || function() {
      return new Date().getTime();
    };

    /*------------------------------------------------------------------------*/

    /**
     * The opposite of `_.before`; this method creates a function that invokes
     * `func` once it is called `n` or more times.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {number} n The number of calls before `func` is invoked.
     * @param {Function} func The function to restrict.
     * @returns {Function} Returns the new restricted function.
     * @example
     *
     * var saves = ['profile', 'settings'];
     *
     * var done = _.after(saves.length, function() {
     *   console.log('done saving!');
     * });
     *
     * _.forEach(saves, function(type) {
     *   asyncSave({ 'type': type, 'complete': done });
     * });
     * // => logs 'done saving!' after the two async saves have completed
     */
    function after(n, func) {
      if (typeof func != 'function') {
        if (typeof n == 'function') {
          var temp = n;
          n = func;
          func = temp;
        } else {
          throw new TypeError(FUNC_ERROR_TEXT);
        }
      }
      n = nativeIsFinite(n = +n) ? n : 0;
      return function() {
        if (--n < 1) {
          return func.apply(this, arguments);
        }
      };
    }

    /**
     * Creates a function that accepts up to `n` arguments ignoring any
     * additional arguments.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to cap arguments for.
     * @param {number} [n=func.length] The arity cap.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {Function} Returns the new function.
     * @example
     *
     * _.map(['6', '8', '10'], _.ary(parseInt, 1));
     * // => [6, 8, 10]
     */
    function ary(func, n, guard) {
      if (guard && isIterateeCall(func, n, guard)) {
        n = undefined;
      }
      n = (func && n == null) ? func.length : nativeMax(+n || 0, 0);
      return createWrapper(func, ARY_FLAG, undefined, undefined, undefined, undefined, n);
    }

    /**
     * Creates a function that invokes `func`, with the `this` binding and arguments
     * of the created function, while it is called less than `n` times. Subsequent
     * calls to the created function return the result of the last `func` invocation.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {number} n The number of calls at which `func` is no longer invoked.
     * @param {Function} func The function to restrict.
     * @returns {Function} Returns the new restricted function.
     * @example
     *
     * jQuery('#add').on('click', _.before(5, addContactToList));
     * // => allows adding up to 4 contacts to the list
     */
    function before(n, func) {
      var result;
      if (typeof func != 'function') {
        if (typeof n == 'function') {
          var temp = n;
          n = func;
          func = temp;
        } else {
          throw new TypeError(FUNC_ERROR_TEXT);
        }
      }
      return function() {
        if (--n > 0) {
          result = func.apply(this, arguments);
        }
        if (n <= 1) {
          func = undefined;
        }
        return result;
      };
    }

    /**
     * Creates a function that invokes `func` with the `this` binding of `thisArg`
     * and prepends any additional `_.bind` arguments to those provided to the
     * bound function.
     *
     * The `_.bind.placeholder` value, which defaults to `_` in monolithic builds,
     * may be used as a placeholder for partially applied arguments.
     *
     * **Note:** Unlike native `Function#bind` this method does not set the "length"
     * property of bound functions.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to bind.
     * @param {*} thisArg The `this` binding of `func`.
     * @param {...*} [partials] The arguments to be partially applied.
     * @returns {Function} Returns the new bound function.
     * @example
     *
     * var greet = function(greeting, punctuation) {
     *   return greeting + ' ' + this.user + punctuation;
     * };
     *
     * var object = { 'user': 'fred' };
     *
     * var bound = _.bind(greet, object, 'hi');
     * bound('!');
     * // => 'hi fred!'
     *
     * // using placeholders
     * var bound = _.bind(greet, object, _, '!');
     * bound('hi');
     * // => 'hi fred!'
     */
    var bind = restParam(function(func, thisArg, partials) {
      var bitmask = BIND_FLAG;
      if (partials.length) {
        var holders = replaceHolders(partials, bind.placeholder);
        bitmask |= PARTIAL_FLAG;
      }
      return createWrapper(func, bitmask, thisArg, partials, holders);
    });

    /**
     * Binds methods of an object to the object itself, overwriting the existing
     * method. Method names may be specified as individual arguments or as arrays
     * of method names. If no method names are provided all enumerable function
     * properties, own and inherited, of `object` are bound.
     *
     * **Note:** This method does not set the "length" property of bound functions.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Object} object The object to bind and assign the bound methods to.
     * @param {...(string|string[])} [methodNames] The object method names to bind,
     *  specified as individual method names or arrays of method names.
     * @returns {Object} Returns `object`.
     * @example
     *
     * var view = {
     *   'label': 'docs',
     *   'onClick': function() {
     *     console.log('clicked ' + this.label);
     *   }
     * };
     *
     * _.bindAll(view);
     * jQuery('#docs').on('click', view.onClick);
     * // => logs 'clicked docs' when the element is clicked
     */
    var bindAll = restParam(function(object, methodNames) {
      methodNames = methodNames.length ? baseFlatten(methodNames) : functions(object);

      var index = -1,
          length = methodNames.length;

      while (++index < length) {
        var key = methodNames[index];
        object[key] = createWrapper(object[key], BIND_FLAG, object);
      }
      return object;
    });

    /**
     * Creates a function that invokes the method at `object[key]` and prepends
     * any additional `_.bindKey` arguments to those provided to the bound function.
     *
     * This method differs from `_.bind` by allowing bound functions to reference
     * methods that may be redefined or don't yet exist.
     * See [Peter Michaux's article](http://peter.michaux.ca/articles/lazy-function-definition-pattern)
     * for more details.
     *
     * The `_.bindKey.placeholder` value, which defaults to `_` in monolithic
     * builds, may be used as a placeholder for partially applied arguments.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Object} object The object the method belongs to.
     * @param {string} key The key of the method.
     * @param {...*} [partials] The arguments to be partially applied.
     * @returns {Function} Returns the new bound function.
     * @example
     *
     * var object = {
     *   'user': 'fred',
     *   'greet': function(greeting, punctuation) {
     *     return greeting + ' ' + this.user + punctuation;
     *   }
     * };
     *
     * var bound = _.bindKey(object, 'greet', 'hi');
     * bound('!');
     * // => 'hi fred!'
     *
     * object.greet = function(greeting, punctuation) {
     *   return greeting + 'ya ' + this.user + punctuation;
     * };
     *
     * bound('!');
     * // => 'hiya fred!'
     *
     * // using placeholders
     * var bound = _.bindKey(object, 'greet', _, '!');
     * bound('hi');
     * // => 'hiya fred!'
     */
    var bindKey = restParam(function(object, key, partials) {
      var bitmask = BIND_FLAG | BIND_KEY_FLAG;
      if (partials.length) {
        var holders = replaceHolders(partials, bindKey.placeholder);
        bitmask |= PARTIAL_FLAG;
      }
      return createWrapper(key, bitmask, object, partials, holders);
    });

    /**
     * Creates a function that accepts one or more arguments of `func` that when
     * called either invokes `func` returning its result, if all `func` arguments
     * have been provided, or returns a function that accepts one or more of the
     * remaining `func` arguments, and so on. The arity of `func` may be specified
     * if `func.length` is not sufficient.
     *
     * The `_.curry.placeholder` value, which defaults to `_` in monolithic builds,
     * may be used as a placeholder for provided arguments.
     *
     * **Note:** This method does not set the "length" property of curried functions.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to curry.
     * @param {number} [arity=func.length] The arity of `func`.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {Function} Returns the new curried function.
     * @example
     *
     * var abc = function(a, b, c) {
     *   return [a, b, c];
     * };
     *
     * var curried = _.curry(abc);
     *
     * curried(1)(2)(3);
     * // => [1, 2, 3]
     *
     * curried(1, 2)(3);
     * // => [1, 2, 3]
     *
     * curried(1, 2, 3);
     * // => [1, 2, 3]
     *
     * // using placeholders
     * curried(1)(_, 3)(2);
     * // => [1, 2, 3]
     */
    var curry = createCurry(CURRY_FLAG);

    /**
     * This method is like `_.curry` except that arguments are applied to `func`
     * in the manner of `_.partialRight` instead of `_.partial`.
     *
     * The `_.curryRight.placeholder` value, which defaults to `_` in monolithic
     * builds, may be used as a placeholder for provided arguments.
     *
     * **Note:** This method does not set the "length" property of curried functions.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to curry.
     * @param {number} [arity=func.length] The arity of `func`.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {Function} Returns the new curried function.
     * @example
     *
     * var abc = function(a, b, c) {
     *   return [a, b, c];
     * };
     *
     * var curried = _.curryRight(abc);
     *
     * curried(3)(2)(1);
     * // => [1, 2, 3]
     *
     * curried(2, 3)(1);
     * // => [1, 2, 3]
     *
     * curried(1, 2, 3);
     * // => [1, 2, 3]
     *
     * // using placeholders
     * curried(3)(1, _)(2);
     * // => [1, 2, 3]
     */
    var curryRight = createCurry(CURRY_RIGHT_FLAG);

    /**
     * Creates a debounced function that delays invoking `func` until after `wait`
     * milliseconds have elapsed since the last time the debounced function was
     * invoked. The debounced function comes with a `cancel` method to cancel
     * delayed invocations. Provide an options object to indicate that `func`
     * should be invoked on the leading and/or trailing edge of the `wait` timeout.
     * Subsequent calls to the debounced function return the result of the last
     * `func` invocation.
     *
     * **Note:** If `leading` and `trailing` options are `true`, `func` is invoked
     * on the trailing edge of the timeout only if the the debounced function is
     * invoked more than once during the `wait` timeout.
     *
     * See [David Corbacho's article](http://drupalmotion.com/article/debounce-and-throttle-visual-explanation)
     * for details over the differences between `_.debounce` and `_.throttle`.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to debounce.
     * @param {number} [wait=0] The number of milliseconds to delay.
     * @param {Object} [options] The options object.
     * @param {boolean} [options.leading=false] Specify invoking on the leading
     *  edge of the timeout.
     * @param {number} [options.maxWait] The maximum time `func` is allowed to be
     *  delayed before it is invoked.
     * @param {boolean} [options.trailing=true] Specify invoking on the trailing
     *  edge of the timeout.
     * @returns {Function} Returns the new debounced function.
     * @example
     *
     * // avoid costly calculations while the window size is in flux
     * jQuery(window).on('resize', _.debounce(calculateLayout, 150));
     *
     * // invoke `sendMail` when the click event is fired, debouncing subsequent calls
     * jQuery('#postbox').on('click', _.debounce(sendMail, 300, {
     *   'leading': true,
     *   'trailing': false
     * }));
     *
     * // ensure `batchLog` is invoked once after 1 second of debounced calls
     * var source = new EventSource('/stream');
     * jQuery(source).on('message', _.debounce(batchLog, 250, {
     *   'maxWait': 1000
     * }));
     *
     * // cancel a debounced call
     * var todoChanges = _.debounce(batchLog, 1000);
     * Object.observe(models.todo, todoChanges);
     *
     * Object.observe(models, function(changes) {
     *   if (_.find(changes, { 'user': 'todo', 'type': 'delete'})) {
     *     todoChanges.cancel();
     *   }
     * }, ['delete']);
     *
     * // ...at some point `models.todo` is changed
     * models.todo.completed = true;
     *
     * // ...before 1 second has passed `models.todo` is deleted
     * // which cancels the debounced `todoChanges` call
     * delete models.todo;
     */
    function debounce(func, wait, options) {
      var args,
          maxTimeoutId,
          result,
          stamp,
          thisArg,
          timeoutId,
          trailingCall,
          lastCalled = 0,
          maxWait = false,
          trailing = true;

      if (typeof func != 'function') {
        throw new TypeError(FUNC_ERROR_TEXT);
      }
      wait = wait < 0 ? 0 : (+wait || 0);
      if (options === true) {
        var leading = true;
        trailing = false;
      } else if (isObject(options)) {
        leading = !!options.leading;
        maxWait = 'maxWait' in options && nativeMax(+options.maxWait || 0, wait);
        trailing = 'trailing' in options ? !!options.trailing : trailing;
      }

      function cancel() {
        if (timeoutId) {
          clearTimeout(timeoutId);
        }
        if (maxTimeoutId) {
          clearTimeout(maxTimeoutId);
        }
        lastCalled = 0;
        maxTimeoutId = timeoutId = trailingCall = undefined;
      }

      function complete(isCalled, id) {
        if (id) {
          clearTimeout(id);
        }
        maxTimeoutId = timeoutId = trailingCall = undefined;
        if (isCalled) {
          lastCalled = now();
          result = func.apply(thisArg, args);
          if (!timeoutId && !maxTimeoutId) {
            args = thisArg = undefined;
          }
        }
      }

      function delayed() {
        var remaining = wait - (now() - stamp);
        if (remaining <= 0 || remaining > wait) {
          complete(trailingCall, maxTimeoutId);
        } else {
          timeoutId = setTimeout(delayed, remaining);
        }
      }

      function maxDelayed() {
        complete(trailing, timeoutId);
      }

      function debounced() {
        args = arguments;
        stamp = now();
        thisArg = this;
        trailingCall = trailing && (timeoutId || !leading);

        if (maxWait === false) {
          var leadingCall = leading && !timeoutId;
        } else {
          if (!maxTimeoutId && !leading) {
            lastCalled = stamp;
          }
          var remaining = maxWait - (stamp - lastCalled),
              isCalled = remaining <= 0 || remaining > maxWait;

          if (isCalled) {
            if (maxTimeoutId) {
              maxTimeoutId = clearTimeout(maxTimeoutId);
            }
            lastCalled = stamp;
            result = func.apply(thisArg, args);
          }
          else if (!maxTimeoutId) {
            maxTimeoutId = setTimeout(maxDelayed, remaining);
          }
        }
        if (isCalled && timeoutId) {
          timeoutId = clearTimeout(timeoutId);
        }
        else if (!timeoutId && wait !== maxWait) {
          timeoutId = setTimeout(delayed, wait);
        }
        if (leadingCall) {
          isCalled = true;
          result = func.apply(thisArg, args);
        }
        if (isCalled && !timeoutId && !maxTimeoutId) {
          args = thisArg = undefined;
        }
        return result;
      }
      debounced.cancel = cancel;
      return debounced;
    }

    /**
     * Defers invoking the `func` until the current call stack has cleared. Any
     * additional arguments are provided to `func` when it is invoked.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to defer.
     * @param {...*} [args] The arguments to invoke the function with.
     * @returns {number} Returns the timer id.
     * @example
     *
     * _.defer(function(text) {
     *   console.log(text);
     * }, 'deferred');
     * // logs 'deferred' after one or more milliseconds
     */
    var defer = restParam(function(func, args) {
      return baseDelay(func, 1, args);
    });

    /**
     * Invokes `func` after `wait` milliseconds. Any additional arguments are
     * provided to `func` when it is invoked.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to delay.
     * @param {number} wait The number of milliseconds to delay invocation.
     * @param {...*} [args] The arguments to invoke the function with.
     * @returns {number} Returns the timer id.
     * @example
     *
     * _.delay(function(text) {
     *   console.log(text);
     * }, 1000, 'later');
     * // => logs 'later' after one second
     */
    var delay = restParam(function(func, wait, args) {
      return baseDelay(func, wait, args);
    });

    /**
     * Creates a function that returns the result of invoking the provided
     * functions with the `this` binding of the created function, where each
     * successive invocation is supplied the return value of the previous.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {...Function} [funcs] Functions to invoke.
     * @returns {Function} Returns the new function.
     * @example
     *
     * function square(n) {
     *   return n * n;
     * }
     *
     * var addSquare = _.flow(_.add, square);
     * addSquare(1, 2);
     * // => 9
     */
    var flow = createFlow();

    /**
     * This method is like `_.flow` except that it creates a function that
     * invokes the provided functions from right to left.
     *
     * @static
     * @memberOf _
     * @alias backflow, compose
     * @category Function
     * @param {...Function} [funcs] Functions to invoke.
     * @returns {Function} Returns the new function.
     * @example
     *
     * function square(n) {
     *   return n * n;
     * }
     *
     * var addSquare = _.flowRight(square, _.add);
     * addSquare(1, 2);
     * // => 9
     */
    var flowRight = createFlow(true);

    /**
     * Creates a function that memoizes the result of `func`. If `resolver` is
     * provided it determines the cache key for storing the result based on the
     * arguments provided to the memoized function. By default, the first argument
     * provided to the memoized function is coerced to a string and used as the
     * cache key. The `func` is invoked with the `this` binding of the memoized
     * function.
     *
     * **Note:** The cache is exposed as the `cache` property on the memoized
     * function. Its creation may be customized by replacing the `_.memoize.Cache`
     * constructor with one whose instances implement the [`Map`](http://ecma-international.org/ecma-262/6.0/#sec-properties-of-the-map-prototype-object)
     * method interface of `get`, `has`, and `set`.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to have its output memoized.
     * @param {Function} [resolver] The function to resolve the cache key.
     * @returns {Function} Returns the new memoizing function.
     * @example
     *
     * var upperCase = _.memoize(function(string) {
     *   return string.toUpperCase();
     * });
     *
     * upperCase('fred');
     * // => 'FRED'
     *
     * // modifying the result cache
     * upperCase.cache.set('fred', 'BARNEY');
     * upperCase('fred');
     * // => 'BARNEY'
     *
     * // replacing `_.memoize.Cache`
     * var object = { 'user': 'fred' };
     * var other = { 'user': 'barney' };
     * var identity = _.memoize(_.identity);
     *
     * identity(object);
     * // => { 'user': 'fred' }
     * identity(other);
     * // => { 'user': 'fred' }
     *
     * _.memoize.Cache = WeakMap;
     * var identity = _.memoize(_.identity);
     *
     * identity(object);
     * // => { 'user': 'fred' }
     * identity(other);
     * // => { 'user': 'barney' }
     */
    function memoize(func, resolver) {
      if (typeof func != 'function' || (resolver && typeof resolver != 'function')) {
        throw new TypeError(FUNC_ERROR_TEXT);
      }
      var memoized = function() {
        var args = arguments,
            key = resolver ? resolver.apply(this, args) : args[0],
            cache = memoized.cache;

        if (cache.has(key)) {
          return cache.get(key);
        }
        var result = func.apply(this, args);
        memoized.cache = cache.set(key, result);
        return result;
      };
      memoized.cache = new memoize.Cache;
      return memoized;
    }

    /**
     * Creates a function that runs each argument through a corresponding
     * transform function.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to wrap.
     * @param {...(Function|Function[])} [transforms] The functions to transform
     * arguments, specified as individual functions or arrays of functions.
     * @returns {Function} Returns the new function.
     * @example
     *
     * function doubled(n) {
     *   return n * 2;
     * }
     *
     * function square(n) {
     *   return n * n;
     * }
     *
     * var modded = _.modArgs(function(x, y) {
     *   return [x, y];
     * }, square, doubled);
     *
     * modded(1, 2);
     * // => [1, 4]
     *
     * modded(5, 10);
     * // => [25, 20]
     */
    var modArgs = restParam(function(func, transforms) {
      transforms = baseFlatten(transforms);
      if (typeof func != 'function' || !arrayEvery(transforms, baseIsFunction)) {
        throw new TypeError(FUNC_ERROR_TEXT);
      }
      var length = transforms.length;
      return restParam(function(args) {
        var index = nativeMin(args.length, length);
        while (index--) {
          args[index] = transforms[index](args[index]);
        }
        return func.apply(this, args);
      });
    });

    /**
     * Creates a function that negates the result of the predicate `func`. The
     * `func` predicate is invoked with the `this` binding and arguments of the
     * created function.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} predicate The predicate to negate.
     * @returns {Function} Returns the new function.
     * @example
     *
     * function isEven(n) {
     *   return n % 2 == 0;
     * }
     *
     * _.filter([1, 2, 3, 4, 5, 6], _.negate(isEven));
     * // => [1, 3, 5]
     */
    function negate(predicate) {
      if (typeof predicate != 'function') {
        throw new TypeError(FUNC_ERROR_TEXT);
      }
      return function() {
        return !predicate.apply(this, arguments);
      };
    }

    /**
     * Creates a function that is restricted to invoking `func` once. Repeat calls
     * to the function return the value of the first call. The `func` is invoked
     * with the `this` binding and arguments of the created function.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to restrict.
     * @returns {Function} Returns the new restricted function.
     * @example
     *
     * var initialize = _.once(createApplication);
     * initialize();
     * initialize();
     * // `initialize` invokes `createApplication` once
     */
    function once(func) {
      return before(2, func);
    }

    /**
     * Creates a function that invokes `func` with `partial` arguments prepended
     * to those provided to the new function. This method is like `_.bind` except
     * it does **not** alter the `this` binding.
     *
     * The `_.partial.placeholder` value, which defaults to `_` in monolithic
     * builds, may be used as a placeholder for partially applied arguments.
     *
     * **Note:** This method does not set the "length" property of partially
     * applied functions.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to partially apply arguments to.
     * @param {...*} [partials] The arguments to be partially applied.
     * @returns {Function} Returns the new partially applied function.
     * @example
     *
     * var greet = function(greeting, name) {
     *   return greeting + ' ' + name;
     * };
     *
     * var sayHelloTo = _.partial(greet, 'hello');
     * sayHelloTo('fred');
     * // => 'hello fred'
     *
     * // using placeholders
     * var greetFred = _.partial(greet, _, 'fred');
     * greetFred('hi');
     * // => 'hi fred'
     */
    var partial = createPartial(PARTIAL_FLAG);

    /**
     * This method is like `_.partial` except that partially applied arguments
     * are appended to those provided to the new function.
     *
     * The `_.partialRight.placeholder` value, which defaults to `_` in monolithic
     * builds, may be used as a placeholder for partially applied arguments.
     *
     * **Note:** This method does not set the "length" property of partially
     * applied functions.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to partially apply arguments to.
     * @param {...*} [partials] The arguments to be partially applied.
     * @returns {Function} Returns the new partially applied function.
     * @example
     *
     * var greet = function(greeting, name) {
     *   return greeting + ' ' + name;
     * };
     *
     * var greetFred = _.partialRight(greet, 'fred');
     * greetFred('hi');
     * // => 'hi fred'
     *
     * // using placeholders
     * var sayHelloTo = _.partialRight(greet, 'hello', _);
     * sayHelloTo('fred');
     * // => 'hello fred'
     */
    var partialRight = createPartial(PARTIAL_RIGHT_FLAG);

    /**
     * Creates a function that invokes `func` with arguments arranged according
     * to the specified indexes where the argument value at the first index is
     * provided as the first argument, the argument value at the second index is
     * provided as the second argument, and so on.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to rearrange arguments for.
     * @param {...(number|number[])} indexes The arranged argument indexes,
     *  specified as individual indexes or arrays of indexes.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var rearged = _.rearg(function(a, b, c) {
     *   return [a, b, c];
     * }, 2, 0, 1);
     *
     * rearged('b', 'c', 'a')
     * // => ['a', 'b', 'c']
     *
     * var map = _.rearg(_.map, [1, 0]);
     * map(function(n) {
     *   return n * 3;
     * }, [1, 2, 3]);
     * // => [3, 6, 9]
     */
    var rearg = restParam(function(func, indexes) {
      return createWrapper(func, REARG_FLAG, undefined, undefined, undefined, baseFlatten(indexes));
    });

    /**
     * Creates a function that invokes `func` with the `this` binding of the
     * created function and arguments from `start` and beyond provided as an array.
     *
     * **Note:** This method is based on the [rest parameter](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters).
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to apply a rest parameter to.
     * @param {number} [start=func.length-1] The start position of the rest parameter.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var say = _.restParam(function(what, names) {
     *   return what + ' ' + _.initial(names).join(', ') +
     *     (_.size(names) > 1 ? ', & ' : '') + _.last(names);
     * });
     *
     * say('hello', 'fred', 'barney', 'pebbles');
     * // => 'hello fred, barney, & pebbles'
     */
    function restParam(func, start) {
      if (typeof func != 'function') {
        throw new TypeError(FUNC_ERROR_TEXT);
      }
      start = nativeMax(start === undefined ? (func.length - 1) : (+start || 0), 0);
      return function() {
        var args = arguments,
            index = -1,
            length = nativeMax(args.length - start, 0),
            rest = Array(length);

        while (++index < length) {
          rest[index] = args[start + index];
        }
        switch (start) {
          case 0: return func.call(this, rest);
          case 1: return func.call(this, args[0], rest);
          case 2: return func.call(this, args[0], args[1], rest);
        }
        var otherArgs = Array(start + 1);
        index = -1;
        while (++index < start) {
          otherArgs[index] = args[index];
        }
        otherArgs[start] = rest;
        return func.apply(this, otherArgs);
      };
    }

    /**
     * Creates a function that invokes `func` with the `this` binding of the created
     * function and an array of arguments much like [`Function#apply`](https://es5.github.io/#x15.3.4.3).
     *
     * **Note:** This method is based on the [spread operator](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_operator).
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to spread arguments over.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var say = _.spread(function(who, what) {
     *   return who + ' says ' + what;
     * });
     *
     * say(['fred', 'hello']);
     * // => 'fred says hello'
     *
     * // with a Promise
     * var numbers = Promise.all([
     *   Promise.resolve(40),
     *   Promise.resolve(36)
     * ]);
     *
     * numbers.then(_.spread(function(x, y) {
     *   return x + y;
     * }));
     * // => a Promise of 76
     */
    function spread(func) {
      if (typeof func != 'function') {
        throw new TypeError(FUNC_ERROR_TEXT);
      }
      return function(array) {
        return func.apply(this, array);
      };
    }

    /**
     * Creates a throttled function that only invokes `func` at most once per
     * every `wait` milliseconds. The throttled function comes with a `cancel`
     * method to cancel delayed invocations. Provide an options object to indicate
     * that `func` should be invoked on the leading and/or trailing edge of the
     * `wait` timeout. Subsequent calls to the throttled function return the
     * result of the last `func` call.
     *
     * **Note:** If `leading` and `trailing` options are `true`, `func` is invoked
     * on the trailing edge of the timeout only if the the throttled function is
     * invoked more than once during the `wait` timeout.
     *
     * See [David Corbacho's article](http://drupalmotion.com/article/debounce-and-throttle-visual-explanation)
     * for details over the differences between `_.throttle` and `_.debounce`.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to throttle.
     * @param {number} [wait=0] The number of milliseconds to throttle invocations to.
     * @param {Object} [options] The options object.
     * @param {boolean} [options.leading=true] Specify invoking on the leading
     *  edge of the timeout.
     * @param {boolean} [options.trailing=true] Specify invoking on the trailing
     *  edge of the timeout.
     * @returns {Function} Returns the new throttled function.
     * @example
     *
     * // avoid excessively updating the position while scrolling
     * jQuery(window).on('scroll', _.throttle(updatePosition, 100));
     *
     * // invoke `renewToken` when the click event is fired, but not more than once every 5 minutes
     * jQuery('.interactive').on('click', _.throttle(renewToken, 300000, {
     *   'trailing': false
     * }));
     *
     * // cancel a trailing throttled call
     * jQuery(window).on('popstate', throttled.cancel);
     */
    function throttle(func, wait, options) {
      var leading = true,
          trailing = true;

      if (typeof func != 'function') {
        throw new TypeError(FUNC_ERROR_TEXT);
      }
      if (options === false) {
        leading = false;
      } else if (isObject(options)) {
        leading = 'leading' in options ? !!options.leading : leading;
        trailing = 'trailing' in options ? !!options.trailing : trailing;
      }
      return debounce(func, wait, { 'leading': leading, 'maxWait': +wait, 'trailing': trailing });
    }

    /**
     * Creates a function that provides `value` to the wrapper function as its
     * first argument. Any additional arguments provided to the function are
     * appended to those provided to the wrapper function. The wrapper is invoked
     * with the `this` binding of the created function.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {*} value The value to wrap.
     * @param {Function} wrapper The wrapper function.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var p = _.wrap(_.escape, function(func, text) {
     *   return '<p>' + func(text) + '</p>';
     * });
     *
     * p('fred, barney, & pebbles');
     * // => '<p>fred, barney, &amp; pebbles</p>'
     */
    function wrap(value, wrapper) {
      wrapper = wrapper == null ? identity : wrapper;
      return createWrapper(wrapper, PARTIAL_FLAG, undefined, [value], []);
    }

    /*------------------------------------------------------------------------*/

    /**
     * Creates a clone of `value`. If `isDeep` is `true` nested objects are cloned,
     * otherwise they are assigned by reference. If `customizer` is provided it is
     * invoked to produce the cloned values. If `customizer` returns `undefined`
     * cloning is handled by the method instead. The `customizer` is bound to
     * `thisArg` and invoked with two argument; (value [, index|key, object]).
     *
     * **Note:** This method is loosely based on the
     * [structured clone algorithm](http://www.w3.org/TR/html5/infrastructure.html#internal-structured-cloning-algorithm).
     * The enumerable properties of `arguments` objects and objects created by
     * constructors other than `Object` are cloned to plain `Object` objects. An
     * empty object is returned for uncloneable values such as functions, DOM nodes,
     * Maps, Sets, and WeakMaps.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to clone.
     * @param {boolean} [isDeep] Specify a deep clone.
     * @param {Function} [customizer] The function to customize cloning values.
     * @param {*} [thisArg] The `this` binding of `customizer`.
     * @returns {*} Returns the cloned value.
     * @example
     *
     * var users = [
     *   { 'user': 'barney' },
     *   { 'user': 'fred' }
     * ];
     *
     * var shallow = _.clone(users);
     * shallow[0] === users[0];
     * // => true
     *
     * var deep = _.clone(users, true);
     * deep[0] === users[0];
     * // => false
     *
     * // using a customizer callback
     * var el = _.clone(document.body, function(value) {
     *   if (_.isElement(value)) {
     *     return value.cloneNode(false);
     *   }
     * });
     *
     * el === document.body
     * // => false
     * el.nodeName
     * // => BODY
     * el.childNodes.length;
     * // => 0
     */
    function clone(value, isDeep, customizer, thisArg) {
      if (isDeep && typeof isDeep != 'boolean' && isIterateeCall(value, isDeep, customizer)) {
        isDeep = false;
      }
      else if (typeof isDeep == 'function') {
        thisArg = customizer;
        customizer = isDeep;
        isDeep = false;
      }
      return typeof customizer == 'function'
        ? baseClone(value, isDeep, bindCallback(customizer, thisArg, 1))
        : baseClone(value, isDeep);
    }

    /**
     * Creates a deep clone of `value`. If `customizer` is provided it is invoked
     * to produce the cloned values. If `customizer` returns `undefined` cloning
     * is handled by the method instead. The `customizer` is bound to `thisArg`
     * and invoked with two argument; (value [, index|key, object]).
     *
     * **Note:** This method is loosely based on the
     * [structured clone algorithm](http://www.w3.org/TR/html5/infrastructure.html#internal-structured-cloning-algorithm).
     * The enumerable properties of `arguments` objects and objects created by
     * constructors other than `Object` are cloned to plain `Object` objects. An
     * empty object is returned for uncloneable values such as functions, DOM nodes,
     * Maps, Sets, and WeakMaps.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to deep clone.
     * @param {Function} [customizer] The function to customize cloning values.
     * @param {*} [thisArg] The `this` binding of `customizer`.
     * @returns {*} Returns the deep cloned value.
     * @example
     *
     * var users = [
     *   { 'user': 'barney' },
     *   { 'user': 'fred' }
     * ];
     *
     * var deep = _.cloneDeep(users);
     * deep[0] === users[0];
     * // => false
     *
     * // using a customizer callback
     * var el = _.cloneDeep(document.body, function(value) {
     *   if (_.isElement(value)) {
     *     return value.cloneNode(true);
     *   }
     * });
     *
     * el === document.body
     * // => false
     * el.nodeName
     * // => BODY
     * el.childNodes.length;
     * // => 20
     */
    function cloneDeep(value, customizer, thisArg) {
      return typeof customizer == 'function'
        ? baseClone(value, true, bindCallback(customizer, thisArg, 1))
        : baseClone(value, true);
    }

    /**
     * Checks if `value` is greater than `other`.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to compare.
     * @param {*} other The other value to compare.
     * @returns {boolean} Returns `true` if `value` is greater than `other`, else `false`.
     * @example
     *
     * _.gt(3, 1);
     * // => true
     *
     * _.gt(3, 3);
     * // => false
     *
     * _.gt(1, 3);
     * // => false
     */
    function gt(value, other) {
      return value > other;
    }

    /**
     * Checks if `value` is greater than or equal to `other`.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to compare.
     * @param {*} other The other value to compare.
     * @returns {boolean} Returns `true` if `value` is greater than or equal to `other`, else `false`.
     * @example
     *
     * _.gte(3, 1);
     * // => true
     *
     * _.gte(3, 3);
     * // => true
     *
     * _.gte(1, 3);
     * // => false
     */
    function gte(value, other) {
      return value >= other;
    }

    /**
     * Checks if `value` is classified as an `arguments` object.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.
     * @example
     *
     * _.isArguments(function() { return arguments; }());
     * // => true
     *
     * _.isArguments([1, 2, 3]);
     * // => false
     */
    function isArguments(value) {
      return isObjectLike(value) && isArrayLike(value) &&
        hasOwnProperty.call(value, 'callee') && !propertyIsEnumerable.call(value, 'callee');
    }

    /**
     * Checks if `value` is classified as an `Array` object.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.
     * @example
     *
     * _.isArray([1, 2, 3]);
     * // => true
     *
     * _.isArray(function() { return arguments; }());
     * // => false
     */
    var isArray = nativeIsArray || function(value) {
      return isObjectLike(value) && isLength(value.length) && objToString.call(value) == arrayTag;
    };

    /**
     * Checks if `value` is classified as a boolean primitive or object.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.
     * @example
     *
     * _.isBoolean(false);
     * // => true
     *
     * _.isBoolean(null);
     * // => false
     */
    function isBoolean(value) {
      return value === true || value === false || (isObjectLike(value) && objToString.call(value) == boolTag);
    }

    /**
     * Checks if `value` is classified as a `Date` object.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.
     * @example
     *
     * _.isDate(new Date);
     * // => true
     *
     * _.isDate('Mon April 23 2012');
     * // => false
     */
    function isDate(value) {
      return isObjectLike(value) && objToString.call(value) == dateTag;
    }

    /**
     * Checks if `value` is a DOM element.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a DOM element, else `false`.
     * @example
     *
     * _.isElement(document.body);
     * // => true
     *
     * _.isElement('<body>');
     * // => false
     */
    function isElement(value) {
      return !!value && value.nodeType === 1 && isObjectLike(value) && !isPlainObject(value);
    }

    /**
     * Checks if `value` is empty. A value is considered empty unless it is an
     * `arguments` object, array, string, or jQuery-like collection with a length
     * greater than `0` or an object with own enumerable properties.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {Array|Object|string} value The value to inspect.
     * @returns {boolean} Returns `true` if `value` is empty, else `false`.
     * @example
     *
     * _.isEmpty(null);
     * // => true
     *
     * _.isEmpty(true);
     * // => true
     *
     * _.isEmpty(1);
     * // => true
     *
     * _.isEmpty([1, 2, 3]);
     * // => false
     *
     * _.isEmpty({ 'a': 1 });
     * // => false
     */
    function isEmpty(value) {
      if (value == null) {
        return true;
      }
      if (isArrayLike(value) && (isArray(value) || isString(value) || isArguments(value) ||
          (isObjectLike(value) && isFunction(value.splice)))) {
        return !value.length;
      }
      return !keys(value).length;
    }

    /**
     * Performs a deep comparison between two values to determine if they are
     * equivalent. If `customizer` is provided it is invoked to compare values.
     * If `customizer` returns `undefined` comparisons are handled by the method
     * instead. The `customizer` is bound to `thisArg` and invoked with three
     * arguments: (value, other [, index|key]).
     *
     * **Note:** This method supports comparing arrays, booleans, `Date` objects,
     * numbers, `Object` objects, regexes, and strings. Objects are compared by
     * their own, not inherited, enumerable properties. Functions and DOM nodes
     * are **not** supported. Provide a customizer function to extend support
     * for comparing other values.
     *
     * @static
     * @memberOf _
     * @alias eq
     * @category Lang
     * @param {*} value The value to compare.
     * @param {*} other The other value to compare.
     * @param {Function} [customizer] The function to customize value comparisons.
     * @param {*} [thisArg] The `this` binding of `customizer`.
     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.
     * @example
     *
     * var object = { 'user': 'fred' };
     * var other = { 'user': 'fred' };
     *
     * object == other;
     * // => false
     *
     * _.isEqual(object, other);
     * // => true
     *
     * // using a customizer callback
     * var array = ['hello', 'goodbye'];
     * var other = ['hi', 'goodbye'];
     *
     * _.isEqual(array, other, function(value, other) {
     *   if (_.every([value, other], RegExp.prototype.test, /^h(?:i|ello)$/)) {
     *     return true;
     *   }
     * });
     * // => true
     */
    function isEqual(value, other, customizer, thisArg) {
      customizer = typeof customizer == 'function' ? bindCallback(customizer, thisArg, 3) : undefined;
      var result = customizer ? customizer(value, other) : undefined;
      return  result === undefined ? baseIsEqual(value, other, customizer) : !!result;
    }

    /**
     * Checks if `value` is an `Error`, `EvalError`, `RangeError`, `ReferenceError`,
     * `SyntaxError`, `TypeError`, or `URIError` object.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is an error object, else `false`.
     * @example
     *
     * _.isError(new Error);
     * // => true
     *
     * _.isError(Error);
     * // => false
     */
    function isError(value) {
      return isObjectLike(value) && typeof value.message == 'string' && objToString.call(value) == errorTag;
    }

    /**
     * Checks if `value` is a finite primitive number.
     *
     * **Note:** This method is based on [`Number.isFinite`](http://ecma-international.org/ecma-262/6.0/#sec-number.isfinite).
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a finite number, else `false`.
     * @example
     *
     * _.isFinite(10);
     * // => true
     *
     * _.isFinite('10');
     * // => false
     *
     * _.isFinite(true);
     * // => false
     *
     * _.isFinite(Object(10));
     * // => false
     *
     * _.isFinite(Infinity);
     * // => false
     */
    function isFinite(value) {
      return typeof value == 'number' && nativeIsFinite(value);
    }

    /**
     * Checks if `value` is classified as a `Function` object.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.
     * @example
     *
     * _.isFunction(_);
     * // => true
     *
     * _.isFunction(/abc/);
     * // => false
     */
    function isFunction(value) {
      // The use of `Object#toString` avoids issues with the `typeof` operator
      // in older versions of Chrome and Safari which return 'function' for regexes
      // and Safari 8 equivalents which return 'object' for typed array constructors.
      return isObject(value) && objToString.call(value) == funcTag;
    }

    /**
     * Checks if `value` is the [language type](https://es5.github.io/#x8) of `Object`.
     * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is an object, else `false`.
     * @example
     *
     * _.isObject({});
     * // => true
     *
     * _.isObject([1, 2, 3]);
     * // => true
     *
     * _.isObject(1);
     * // => false
     */
    function isObject(value) {
      // Avoid a V8 JIT bug in Chrome 19-20.
      // See https://code.google.com/p/v8/issues/detail?id=2291 for more details.
      var type = typeof value;
      return !!value && (type == 'object' || type == 'function');
    }

    /**
     * Performs a deep comparison between `object` and `source` to determine if
     * `object` contains equivalent property values. If `customizer` is provided
     * it is invoked to compare values. If `customizer` returns `undefined`
     * comparisons are handled by the method instead. The `customizer` is bound
     * to `thisArg` and invoked with three arguments: (value, other, index|key).
     *
     * **Note:** This method supports comparing properties of arrays, booleans,
     * `Date` objects, numbers, `Object` objects, regexes, and strings. Functions
     * and DOM nodes are **not** supported. Provide a customizer function to extend
     * support for comparing other values.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {Object} object The object to inspect.
     * @param {Object} source The object of property values to match.
     * @param {Function} [customizer] The function to customize value comparisons.
     * @param {*} [thisArg] The `this` binding of `customizer`.
     * @returns {boolean} Returns `true` if `object` is a match, else `false`.
     * @example
     *
     * var object = { 'user': 'fred', 'age': 40 };
     *
     * _.isMatch(object, { 'age': 40 });
     * // => true
     *
     * _.isMatch(object, { 'age': 36 });
     * // => false
     *
     * // using a customizer callback
     * var object = { 'greeting': 'hello' };
     * var source = { 'greeting': 'hi' };
     *
     * _.isMatch(object, source, function(value, other) {
     *   return _.every([value, other], RegExp.prototype.test, /^h(?:i|ello)$/) || undefined;
     * });
     * // => true
     */
    function isMatch(object, source, customizer, thisArg) {
      customizer = typeof customizer == 'function' ? bindCallback(customizer, thisArg, 3) : undefined;
      return baseIsMatch(object, getMatchData(source), customizer);
    }

    /**
     * Checks if `value` is `NaN`.
     *
     * **Note:** This method is not the same as [`isNaN`](https://es5.github.io/#x15.1.2.4)
     * which returns `true` for `undefined` and other non-numeric values.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.
     * @example
     *
     * _.isNaN(NaN);
     * // => true
     *
     * _.isNaN(new Number(NaN));
     * // => true
     *
     * isNaN(undefined);
     * // => true
     *
     * _.isNaN(undefined);
     * // => false
     */
    function isNaN(value) {
      // An `NaN` primitive is the only value that is not equal to itself.
      // Perform the `toStringTag` check first to avoid errors with some host objects in IE.
      return isNumber(value) && value != +value;
    }

    /**
     * Checks if `value` is a native function.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a native function, else `false`.
     * @example
     *
     * _.isNative(Array.prototype.push);
     * // => true
     *
     * _.isNative(_);
     * // => false
     */
    function isNative(value) {
      if (value == null) {
        return false;
      }
      if (isFunction(value)) {
        return reIsNative.test(fnToString.call(value));
      }
      return isObjectLike(value) && reIsHostCtor.test(value);
    }

    /**
     * Checks if `value` is `null`.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is `null`, else `false`.
     * @example
     *
     * _.isNull(null);
     * // => true
     *
     * _.isNull(void 0);
     * // => false
     */
    function isNull(value) {
      return value === null;
    }

    /**
     * Checks if `value` is classified as a `Number` primitive or object.
     *
     * **Note:** To exclude `Infinity`, `-Infinity`, and `NaN`, which are classified
     * as numbers, use the `_.isFinite` method.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.
     * @example
     *
     * _.isNumber(8.4);
     * // => true
     *
     * _.isNumber(NaN);
     * // => true
     *
     * _.isNumber('8.4');
     * // => false
     */
    function isNumber(value) {
      return typeof value == 'number' || (isObjectLike(value) && objToString.call(value) == numberTag);
    }

    /**
     * Checks if `value` is a plain object, that is, an object created by the
     * `Object` constructor or one with a `[[Prototype]]` of `null`.
     *
     * **Note:** This method assumes objects created by the `Object` constructor
     * have no inherited enumerable properties.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     * }
     *
     * _.isPlainObject(new Foo);
     * // => false
     *
     * _.isPlainObject([1, 2, 3]);
     * // => false
     *
     * _.isPlainObject({ 'x': 0, 'y': 0 });
     * // => true
     *
     * _.isPlainObject(Object.create(null));
     * // => true
     */
    function isPlainObject(value) {
      var Ctor;

      // Exit early for non `Object` objects.
      if (!(isObjectLike(value) && objToString.call(value) == objectTag && !isArguments(value)) ||
          (!hasOwnProperty.call(value, 'constructor') && (Ctor = value.constructor, typeof Ctor == 'function' && !(Ctor instanceof Ctor)))) {
        return false;
      }
      // IE < 9 iterates inherited properties before own properties. If the first
      // iterated property is an object's own property then there are no inherited
      // enumerable properties.
      var result;
      // In most environments an object's own properties are iterated before
      // its inherited properties. If the last iterated property is an object's
      // own property then there are no inherited enumerable properties.
      baseForIn(value, function(subValue, key) {
        result = key;
      });
      return result === undefined || hasOwnProperty.call(value, result);
    }

    /**
     * Checks if `value` is classified as a `RegExp` object.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.
     * @example
     *
     * _.isRegExp(/abc/);
     * // => true
     *
     * _.isRegExp('/abc/');
     * // => false
     */
    function isRegExp(value) {
      return isObject(value) && objToString.call(value) == regexpTag;
    }

    /**
     * Checks if `value` is classified as a `String` primitive or object.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.
     * @example
     *
     * _.isString('abc');
     * // => true
     *
     * _.isString(1);
     * // => false
     */
    function isString(value) {
      return typeof value == 'string' || (isObjectLike(value) && objToString.call(value) == stringTag);
    }

    /**
     * Checks if `value` is classified as a typed array.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.
     * @example
     *
     * _.isTypedArray(new Uint8Array);
     * // => true
     *
     * _.isTypedArray([]);
     * // => false
     */
    function isTypedArray(value) {
      return isObjectLike(value) && isLength(value.length) && !!typedArrayTags[objToString.call(value)];
    }

    /**
     * Checks if `value` is `undefined`.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is `undefined`, else `false`.
     * @example
     *
     * _.isUndefined(void 0);
     * // => true
     *
     * _.isUndefined(null);
     * // => false
     */
    function isUndefined(value) {
      return value === undefined;
    }

    /**
     * Checks if `value` is less than `other`.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to compare.
     * @param {*} other The other value to compare.
     * @returns {boolean} Returns `true` if `value` is less than `other`, else `false`.
     * @example
     *
     * _.lt(1, 3);
     * // => true
     *
     * _.lt(3, 3);
     * // => false
     *
     * _.lt(3, 1);
     * // => false
     */
    function lt(value, other) {
      return value < other;
    }

    /**
     * Checks if `value` is less than or equal to `other`.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to compare.
     * @param {*} other The other value to compare.
     * @returns {boolean} Returns `true` if `value` is less than or equal to `other`, else `false`.
     * @example
     *
     * _.lte(1, 3);
     * // => true
     *
     * _.lte(3, 3);
     * // => true
     *
     * _.lte(3, 1);
     * // => false
     */
    function lte(value, other) {
      return value <= other;
    }

    /**
     * Converts `value` to an array.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to convert.
     * @returns {Array} Returns the converted array.
     * @example
     *
     * (function() {
     *   return _.toArray(arguments).slice(1);
     * }(1, 2, 3));
     * // => [2, 3]
     */
    function toArray(value) {
      var length = value ? getLength(value) : 0;
      if (!isLength(length)) {
        return values(value);
      }
      if (!length) {
        return [];
      }
      return arrayCopy(value);
    }

    /**
     * Converts `value` to a plain object flattening inherited enumerable
     * properties of `value` to own properties of the plain object.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to convert.
     * @returns {Object} Returns the converted plain object.
     * @example
     *
     * function Foo() {
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.assign({ 'a': 1 }, new Foo);
     * // => { 'a': 1, 'b': 2 }
     *
     * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));
     * // => { 'a': 1, 'b': 2, 'c': 3 }
     */
    function toPlainObject(value) {
      return baseCopy(value, keysIn(value));
    }

    /*------------------------------------------------------------------------*/

    /**
     * Recursively merges own enumerable properties of the source object(s), that
     * don't resolve to `undefined` into the destination object. Subsequent sources
     * overwrite property assignments of previous sources. If `customizer` is
     * provided it is invoked to produce the merged values of the destination and
     * source properties. If `customizer` returns `undefined` merging is handled
     * by the method instead. The `customizer` is bound to `thisArg` and invoked
     * with five arguments: (objectValue, sourceValue, key, object, source).
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The destination object.
     * @param {...Object} [sources] The source objects.
     * @param {Function} [customizer] The function to customize assigned values.
     * @param {*} [thisArg] The `this` binding of `customizer`.
     * @returns {Object} Returns `object`.
     * @example
     *
     * var users = {
     *   'data': [{ 'user': 'barney' }, { 'user': 'fred' }]
     * };
     *
     * var ages = {
     *   'data': [{ 'age': 36 }, { 'age': 40 }]
     * };
     *
     * _.merge(users, ages);
     * // => { 'data': [{ 'user': 'barney', 'age': 36 }, { 'user': 'fred', 'age': 40 }] }
     *
     * // using a customizer callback
     * var object = {
     *   'fruits': ['apple'],
     *   'vegetables': ['beet']
     * };
     *
     * var other = {
     *   'fruits': ['banana'],
     *   'vegetables': ['carrot']
     * };
     *
     * _.merge(object, other, function(a, b) {
     *   if (_.isArray(a)) {
     *     return a.concat(b);
     *   }
     * });
     * // => { 'fruits': ['apple', 'banana'], 'vegetables': ['beet', 'carrot'] }
     */
    var merge = createAssigner(baseMerge);

    /**
     * Assigns own enumerable properties of source object(s) to the destination
     * object. Subsequent sources overwrite property assignments of previous sources.
     * If `customizer` is provided it is invoked to produce the assigned values.
     * The `customizer` is bound to `thisArg` and invoked with five arguments:
     * (objectValue, sourceValue, key, object, source).
     *
     * **Note:** This method mutates `object` and is based on
     * [`Object.assign`](http://ecma-international.org/ecma-262/6.0/#sec-object.assign).
     *
     * @static
     * @memberOf _
     * @alias extend
     * @category Object
     * @param {Object} object The destination object.
     * @param {...Object} [sources] The source objects.
     * @param {Function} [customizer] The function to customize assigned values.
     * @param {*} [thisArg] The `this` binding of `customizer`.
     * @returns {Object} Returns `object`.
     * @example
     *
     * _.assign({ 'user': 'barney' }, { 'age': 40 }, { 'user': 'fred' });
     * // => { 'user': 'fred', 'age': 40 }
     *
     * // using a customizer callback
     * var defaults = _.partialRight(_.assign, function(value, other) {
     *   return _.isUndefined(value) ? other : value;
     * });
     *
     * defaults({ 'user': 'barney' }, { 'age': 36 }, { 'user': 'fred' });
     * // => { 'user': 'barney', 'age': 36 }
     */
    var assign = createAssigner(function(object, source, customizer) {
      return customizer
        ? assignWith(object, source, customizer)
        : baseAssign(object, source);
    });

    /**
     * Creates an object that inherits from the given `prototype` object. If a
     * `properties` object is provided its own enumerable properties are assigned
     * to the created object.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} prototype The object to inherit from.
     * @param {Object} [properties] The properties to assign to the object.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {Object} Returns the new object.
     * @example
     *
     * function Shape() {
     *   this.x = 0;
     *   this.y = 0;
     * }
     *
     * function Circle() {
     *   Shape.call(this);
     * }
     *
     * Circle.prototype = _.create(Shape.prototype, {
     *   'constructor': Circle
     * });
     *
     * var circle = new Circle;
     * circle instanceof Circle;
     * // => true
     *
     * circle instanceof Shape;
     * // => true
     */
    function create(prototype, properties, guard) {
      var result = baseCreate(prototype);
      if (guard && isIterateeCall(prototype, properties, guard)) {
        properties = undefined;
      }
      return properties ? baseAssign(result, properties) : result;
    }

    /**
     * Assigns own enumerable properties of source object(s) to the destination
     * object for all destination properties that resolve to `undefined`. Once a
     * property is set, additional values of the same property are ignored.
     *
     * **Note:** This method mutates `object`.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The destination object.
     * @param {...Object} [sources] The source objects.
     * @returns {Object} Returns `object`.
     * @example
     *
     * _.defaults({ 'user': 'barney' }, { 'age': 36 }, { 'user': 'fred' });
     * // => { 'user': 'barney', 'age': 36 }
     */
    var defaults = createDefaults(assign, assignDefaults);

    /**
     * This method is like `_.defaults` except that it recursively assigns
     * default properties.
     *
     * **Note:** This method mutates `object`.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The destination object.
     * @param {...Object} [sources] The source objects.
     * @returns {Object} Returns `object`.
     * @example
     *
     * _.defaultsDeep({ 'user': { 'name': 'barney' } }, { 'user': { 'name': 'fred', 'age': 36 } });
     * // => { 'user': { 'name': 'barney', 'age': 36 } }
     *
     */
    var defaultsDeep = createDefaults(merge, mergeDefaults);

    /**
     * This method is like `_.find` except that it returns the key of the first
     * element `predicate` returns truthy for instead of the element itself.
     *
     * If a property name is provided for `predicate` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `predicate` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to search.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {string|undefined} Returns the key of the matched element, else `undefined`.
     * @example
     *
     * var users = {
     *   'barney':  { 'age': 36, 'active': true },
     *   'fred':    { 'age': 40, 'active': false },
     *   'pebbles': { 'age': 1,  'active': true }
     * };
     *
     * _.findKey(users, function(chr) {
     *   return chr.age < 40;
     * });
     * // => 'barney' (iteration order is not guaranteed)
     *
     * // using the `_.matches` callback shorthand
     * _.findKey(users, { 'age': 1, 'active': true });
     * // => 'pebbles'
     *
     * // using the `_.matchesProperty` callback shorthand
     * _.findKey(users, 'active', false);
     * // => 'fred'
     *
     * // using the `_.property` callback shorthand
     * _.findKey(users, 'active');
     * // => 'barney'
     */
    var findKey = createFindKey(baseForOwn);

    /**
     * This method is like `_.findKey` except that it iterates over elements of
     * a collection in the opposite order.
     *
     * If a property name is provided for `predicate` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `predicate` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to search.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {string|undefined} Returns the key of the matched element, else `undefined`.
     * @example
     *
     * var users = {
     *   'barney':  { 'age': 36, 'active': true },
     *   'fred':    { 'age': 40, 'active': false },
     *   'pebbles': { 'age': 1,  'active': true }
     * };
     *
     * _.findLastKey(users, function(chr) {
     *   return chr.age < 40;
     * });
     * // => returns `pebbles` assuming `_.findKey` returns `barney`
     *
     * // using the `_.matches` callback shorthand
     * _.findLastKey(users, { 'age': 36, 'active': true });
     * // => 'barney'
     *
     * // using the `_.matchesProperty` callback shorthand
     * _.findLastKey(users, 'active', false);
     * // => 'fred'
     *
     * // using the `_.property` callback shorthand
     * _.findLastKey(users, 'active');
     * // => 'pebbles'
     */
    var findLastKey = createFindKey(baseForOwnRight);

    /**
     * Iterates over own and inherited enumerable properties of an object invoking
     * `iteratee` for each property. The `iteratee` is bound to `thisArg` and invoked
     * with three arguments: (value, key, object). Iteratee functions may exit
     * iteration early by explicitly returning `false`.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Object} Returns `object`.
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.forIn(new Foo, function(value, key) {
     *   console.log(key);
     * });
     * // => logs 'a', 'b', and 'c' (iteration order is not guaranteed)
     */
    var forIn = createForIn(baseFor);

    /**
     * This method is like `_.forIn` except that it iterates over properties of
     * `object` in the opposite order.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Object} Returns `object`.
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.forInRight(new Foo, function(value, key) {
     *   console.log(key);
     * });
     * // => logs 'c', 'b', and 'a' assuming `_.forIn ` logs 'a', 'b', and 'c'
     */
    var forInRight = createForIn(baseForRight);

    /**
     * Iterates over own enumerable properties of an object invoking `iteratee`
     * for each property. The `iteratee` is bound to `thisArg` and invoked with
     * three arguments: (value, key, object). Iteratee functions may exit iteration
     * early by explicitly returning `false`.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Object} Returns `object`.
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.forOwn(new Foo, function(value, key) {
     *   console.log(key);
     * });
     * // => logs 'a' and 'b' (iteration order is not guaranteed)
     */
    var forOwn = createForOwn(baseForOwn);

    /**
     * This method is like `_.forOwn` except that it iterates over properties of
     * `object` in the opposite order.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Object} Returns `object`.
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.forOwnRight(new Foo, function(value, key) {
     *   console.log(key);
     * });
     * // => logs 'b' and 'a' assuming `_.forOwn` logs 'a' and 'b'
     */
    var forOwnRight = createForOwn(baseForOwnRight);

    /**
     * Creates an array of function property names from all enumerable properties,
     * own and inherited, of `object`.
     *
     * @static
     * @memberOf _
     * @alias methods
     * @category Object
     * @param {Object} object The object to inspect.
     * @returns {Array} Returns the new array of property names.
     * @example
     *
     * _.functions(_);
     * // => ['after', 'ary', 'assign', ...]
     */
    function functions(object) {
      return baseFunctions(object, keysIn(object));
    }

    /**
     * Gets the property value at `path` of `object`. If the resolved value is
     * `undefined` the `defaultValue` is used in its place.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to query.
     * @param {Array|string} path The path of the property to get.
     * @param {*} [defaultValue] The value returned if the resolved value is `undefined`.
     * @returns {*} Returns the resolved value.
     * @example
     *
     * var object = { 'a': [{ 'b': { 'c': 3 } }] };
     *
     * _.get(object, 'a[0].b.c');
     * // => 3
     *
     * _.get(object, ['a', '0', 'b', 'c']);
     * // => 3
     *
     * _.get(object, 'a.b.c', 'default');
     * // => 'default'
     */
    function get(object, path, defaultValue) {
      var result = object == null ? undefined : baseGet(object, toPath(path), path + '');
      return result === undefined ? defaultValue : result;
    }

    /**
     * Checks if `path` is a direct property.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to query.
     * @param {Array|string} path The path to check.
     * @returns {boolean} Returns `true` if `path` is a direct property, else `false`.
     * @example
     *
     * var object = { 'a': { 'b': { 'c': 3 } } };
     *
     * _.has(object, 'a');
     * // => true
     *
     * _.has(object, 'a.b.c');
     * // => true
     *
     * _.has(object, ['a', 'b', 'c']);
     * // => true
     */
    function has(object, path) {
      if (object == null) {
        return false;
      }
      var result = hasOwnProperty.call(object, path);
      if (!result && !isKey(path)) {
        path = toPath(path);
        object = path.length == 1 ? object : baseGet(object, baseSlice(path, 0, -1));
        if (object == null) {
          return false;
        }
        path = last(path);
        result = hasOwnProperty.call(object, path);
      }
      return result || (isLength(object.length) && isIndex(path, object.length) &&
        (isArray(object) || isArguments(object)));
    }

    /**
     * Creates an object composed of the inverted keys and values of `object`.
     * If `object` contains duplicate values, subsequent values overwrite property
     * assignments of previous values unless `multiValue` is `true`.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to invert.
     * @param {boolean} [multiValue] Allow multiple values per key.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {Object} Returns the new inverted object.
     * @example
     *
     * var object = { 'a': 1, 'b': 2, 'c': 1 };
     *
     * _.invert(object);
     * // => { '1': 'c', '2': 'b' }
     *
     * // with `multiValue`
     * _.invert(object, true);
     * // => { '1': ['a', 'c'], '2': ['b'] }
     */
    function invert(object, multiValue, guard) {
      if (guard && isIterateeCall(object, multiValue, guard)) {
        multiValue = undefined;
      }
      var index = -1,
          props = keys(object),
          length = props.length,
          result = {};

      while (++index < length) {
        var key = props[index],
            value = object[key];

        if (multiValue) {
          if (hasOwnProperty.call(result, value)) {
            result[value].push(key);
          } else {
            result[value] = [key];
          }
        }
        else {
          result[value] = key;
        }
      }
      return result;
    }

    /**
     * Creates an array of the own enumerable property names of `object`.
     *
     * **Note:** Non-object values are coerced to objects. See the
     * [ES spec](http://ecma-international.org/ecma-262/6.0/#sec-object.keys)
     * for more details.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to query.
     * @returns {Array} Returns the array of property names.
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.keys(new Foo);
     * // => ['a', 'b'] (iteration order is not guaranteed)
     *
     * _.keys('hi');
     * // => ['0', '1']
     */
    var keys = !nativeKeys ? shimKeys : function(object) {
      var Ctor = object == null ? undefined : object.constructor;
      if ((typeof Ctor == 'function' && Ctor.prototype === object) ||
          (typeof object != 'function' && isArrayLike(object))) {
        return shimKeys(object);
      }
      return isObject(object) ? nativeKeys(object) : [];
    };

    /**
     * Creates an array of the own and inherited enumerable property names of `object`.
     *
     * **Note:** Non-object values are coerced to objects.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to query.
     * @returns {Array} Returns the array of property names.
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.keysIn(new Foo);
     * // => ['a', 'b', 'c'] (iteration order is not guaranteed)
     */
    function keysIn(object) {
      if (object == null) {
        return [];
      }
      if (!isObject(object)) {
        object = Object(object);
      }
      var length = object.length;
      length = (length && isLength(length) &&
        (isArray(object) || isArguments(object)) && length) || 0;

      var Ctor = object.constructor,
          index = -1,
          isProto = typeof Ctor == 'function' && Ctor.prototype === object,
          result = Array(length),
          skipIndexes = length > 0;

      while (++index < length) {
        result[index] = (index + '');
      }
      for (var key in object) {
        if (!(skipIndexes && isIndex(key, length)) &&
            !(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {
          result.push(key);
        }
      }
      return result;
    }

    /**
     * The opposite of `_.mapValues`; this method creates an object with the
     * same values as `object` and keys generated by running each own enumerable
     * property of `object` through `iteratee`.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to iterate over.
     * @param {Function|Object|string} [iteratee=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Object} Returns the new mapped object.
     * @example
     *
     * _.mapKeys({ 'a': 1, 'b': 2 }, function(value, key) {
     *   return key + value;
     * });
     * // => { 'a1': 1, 'b2': 2 }
     */
    var mapKeys = createObjectMapper(true);

    /**
     * Creates an object with the same keys as `object` and values generated by
     * running each own enumerable property of `object` through `iteratee`. The
     * iteratee function is bound to `thisArg` and invoked with three arguments:
     * (value, key, object).
     *
     * If a property name is provided for `iteratee` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `iteratee` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to iterate over.
     * @param {Function|Object|string} [iteratee=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Object} Returns the new mapped object.
     * @example
     *
     * _.mapValues({ 'a': 1, 'b': 2 }, function(n) {
     *   return n * 3;
     * });
     * // => { 'a': 3, 'b': 6 }
     *
     * var users = {
     *   'fred':    { 'user': 'fred',    'age': 40 },
     *   'pebbles': { 'user': 'pebbles', 'age': 1 }
     * };
     *
     * // using the `_.property` callback shorthand
     * _.mapValues(users, 'age');
     * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)
     */
    var mapValues = createObjectMapper();

    /**
     * The opposite of `_.pick`; this method creates an object composed of the
     * own and inherited enumerable properties of `object` that are not omitted.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The source object.
     * @param {Function|...(string|string[])} [predicate] The function invoked per
     *  iteration or property names to omit, specified as individual property
     *  names or arrays of property names.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {Object} Returns the new object.
     * @example
     *
     * var object = { 'user': 'fred', 'age': 40 };
     *
     * _.omit(object, 'age');
     * // => { 'user': 'fred' }
     *
     * _.omit(object, _.isNumber);
     * // => { 'user': 'fred' }
     */
    var omit = restParam(function(object, props) {
      if (object == null) {
        return {};
      }
      if (typeof props[0] != 'function') {
        var props = arrayMap(baseFlatten(props), String);
        return pickByArray(object, baseDifference(keysIn(object), props));
      }
      var predicate = bindCallback(props[0], props[1], 3);
      return pickByCallback(object, function(value, key, object) {
        return !predicate(value, key, object);
      });
    });

    /**
     * Creates a two dimensional array of the key-value pairs for `object`,
     * e.g. `[[key1, value1], [key2, value2]]`.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to query.
     * @returns {Array} Returns the new array of key-value pairs.
     * @example
     *
     * _.pairs({ 'barney': 36, 'fred': 40 });
     * // => [['barney', 36], ['fred', 40]] (iteration order is not guaranteed)
     */
    function pairs(object) {
      object = toObject(object);

      var index = -1,
          props = keys(object),
          length = props.length,
          result = Array(length);

      while (++index < length) {
        var key = props[index];
        result[index] = [key, object[key]];
      }
      return result;
    }

    /**
     * Creates an object composed of the picked `object` properties. Property
     * names may be specified as individual arguments or as arrays of property
     * names. If `predicate` is provided it is invoked for each property of `object`
     * picking the properties `predicate` returns truthy for. The predicate is
     * bound to `thisArg` and invoked with three arguments: (value, key, object).
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The source object.
     * @param {Function|...(string|string[])} [predicate] The function invoked per
     *  iteration or property names to pick, specified as individual property
     *  names or arrays of property names.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {Object} Returns the new object.
     * @example
     *
     * var object = { 'user': 'fred', 'age': 40 };
     *
     * _.pick(object, 'user');
     * // => { 'user': 'fred' }
     *
     * _.pick(object, _.isString);
     * // => { 'user': 'fred' }
     */
    var pick = restParam(function(object, props) {
      if (object == null) {
        return {};
      }
      return typeof props[0] == 'function'
        ? pickByCallback(object, bindCallback(props[0], props[1], 3))
        : pickByArray(object, baseFlatten(props));
    });

    /**
     * This method is like `_.get` except that if the resolved value is a function
     * it is invoked with the `this` binding of its parent object and its result
     * is returned.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to query.
     * @param {Array|string} path The path of the property to resolve.
     * @param {*} [defaultValue] The value returned if the resolved value is `undefined`.
     * @returns {*} Returns the resolved value.
     * @example
     *
     * var object = { 'a': [{ 'b': { 'c1': 3, 'c2': _.constant(4) } }] };
     *
     * _.result(object, 'a[0].b.c1');
     * // => 3
     *
     * _.result(object, 'a[0].b.c2');
     * // => 4
     *
     * _.result(object, 'a.b.c', 'default');
     * // => 'default'
     *
     * _.result(object, 'a.b.c', _.constant('default'));
     * // => 'default'
     */
    function result(object, path, defaultValue) {
      var result = object == null ? undefined : object[path];
      if (result === undefined) {
        if (object != null && !isKey(path, object)) {
          path = toPath(path);
          object = path.length == 1 ? object : baseGet(object, baseSlice(path, 0, -1));
          result = object == null ? undefined : object[last(path)];
        }
        result = result === undefined ? defaultValue : result;
      }
      return isFunction(result) ? result.call(object) : result;
    }

    /**
     * Sets the property value of `path` on `object`. If a portion of `path`
     * does not exist it is created.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to augment.
     * @param {Array|string} path The path of the property to set.
     * @param {*} value The value to set.
     * @returns {Object} Returns `object`.
     * @example
     *
     * var object = { 'a': [{ 'b': { 'c': 3 } }] };
     *
     * _.set(object, 'a[0].b.c', 4);
     * console.log(object.a[0].b.c);
     * // => 4
     *
     * _.set(object, 'x[0].y.z', 5);
     * console.log(object.x[0].y.z);
     * // => 5
     */
    function set(object, path, value) {
      if (object == null) {
        return object;
      }
      var pathKey = (path + '');
      path = (object[pathKey] != null || isKey(path, object)) ? [pathKey] : toPath(path);

      var index = -1,
          length = path.length,
          lastIndex = length - 1,
          nested = object;

      while (nested != null && ++index < length) {
        var key = path[index];
        if (isObject(nested)) {
          if (index == lastIndex) {
            nested[key] = value;
          } else if (nested[key] == null) {
            nested[key] = isIndex(path[index + 1]) ? [] : {};
          }
        }
        nested = nested[key];
      }
      return object;
    }

    /**
     * An alternative to `_.reduce`; this method transforms `object` to a new
     * `accumulator` object which is the result of running each of its own enumerable
     * properties through `iteratee`, with each invocation potentially mutating
     * the `accumulator` object. The `iteratee` is bound to `thisArg` and invoked
     * with four arguments: (accumulator, value, key, object). Iteratee functions
     * may exit iteration early by explicitly returning `false`.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Array|Object} object The object to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @param {*} [accumulator] The custom accumulator value.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {*} Returns the accumulated value.
     * @example
     *
     * _.transform([2, 3, 4], function(result, n) {
     *   result.push(n *= n);
     *   return n % 2 == 0;
     * });
     * // => [4, 9]
     *
     * _.transform({ 'a': 1, 'b': 2 }, function(result, n, key) {
     *   result[key] = n * 3;
     * });
     * // => { 'a': 3, 'b': 6 }
     */
    function transform(object, iteratee, accumulator, thisArg) {
      var isArr = isArray(object) || isTypedArray(object);
      iteratee = getCallback(iteratee, thisArg, 4);

      if (accumulator == null) {
        if (isArr || isObject(object)) {
          var Ctor = object.constructor;
          if (isArr) {
            accumulator = isArray(object) ? new Ctor : [];
          } else {
            accumulator = baseCreate(isFunction(Ctor) ? Ctor.prototype : undefined);
          }
        } else {
          accumulator = {};
        }
      }
      (isArr ? arrayEach : baseForOwn)(object, function(value, index, object) {
        return iteratee(accumulator, value, index, object);
      });
      return accumulator;
    }

    /**
     * Creates an array of the own enumerable property values of `object`.
     *
     * **Note:** Non-object values are coerced to objects.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to query.
     * @returns {Array} Returns the array of property values.
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.values(new Foo);
     * // => [1, 2] (iteration order is not guaranteed)
     *
     * _.values('hi');
     * // => ['h', 'i']
     */
    function values(object) {
      return baseValues(object, keys(object));
    }

    /**
     * Creates an array of the own and inherited enumerable property values
     * of `object`.
     *
     * **Note:** Non-object values are coerced to objects.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to query.
     * @returns {Array} Returns the array of property values.
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.valuesIn(new Foo);
     * // => [1, 2, 3] (iteration order is not guaranteed)
     */
    function valuesIn(object) {
      return baseValues(object, keysIn(object));
    }

    /*------------------------------------------------------------------------*/

    /**
     * Checks if `n` is between `start` and up to but not including, `end`. If
     * `end` is not specified it is set to `start` with `start` then set to `0`.
     *
     * @static
     * @memberOf _
     * @category Number
     * @param {number} n The number to check.
     * @param {number} [start=0] The start of the range.
     * @param {number} end The end of the range.
     * @returns {boolean} Returns `true` if `n` is in the range, else `false`.
     * @example
     *
     * _.inRange(3, 2, 4);
     * // => true
     *
     * _.inRange(4, 8);
     * // => true
     *
     * _.inRange(4, 2);
     * // => false
     *
     * _.inRange(2, 2);
     * // => false
     *
     * _.inRange(1.2, 2);
     * // => true
     *
     * _.inRange(5.2, 4);
     * // => false
     */
    function inRange(value, start, end) {
      start = +start || 0;
      if (end === undefined) {
        end = start;
        start = 0;
      } else {
        end = +end || 0;
      }
      return value >= nativeMin(start, end) && value < nativeMax(start, end);
    }

    /**
     * Produces a random number between `min` and `max` (inclusive). If only one
     * argument is provided a number between `0` and the given number is returned.
     * If `floating` is `true`, or either `min` or `max` are floats, a floating-point
     * number is returned instead of an integer.
     *
     * @static
     * @memberOf _
     * @category Number
     * @param {number} [min=0] The minimum possible value.
     * @param {number} [max=1] The maximum possible value.
     * @param {boolean} [floating] Specify returning a floating-point number.
     * @returns {number} Returns the random number.
     * @example
     *
     * _.random(0, 5);
     * // => an integer between 0 and 5
     *
     * _.random(5);
     * // => also an integer between 0 and 5
     *
     * _.random(5, true);
     * // => a floating-point number between 0 and 5
     *
     * _.random(1.2, 5.2);
     * // => a floating-point number between 1.2 and 5.2
     */
    function random(min, max, floating) {
      if (floating && isIterateeCall(min, max, floating)) {
        max = floating = undefined;
      }
      var noMin = min == null,
          noMax = max == null;

      if (floating == null) {
        if (noMax && typeof min == 'boolean') {
          floating = min;
          min = 1;
        }
        else if (typeof max == 'boolean') {
          floating = max;
          noMax = true;
        }
      }
      if (noMin && noMax) {
        max = 1;
        noMax = false;
      }
      min = +min || 0;
      if (noMax) {
        max = min;
        min = 0;
      } else {
        max = +max || 0;
      }
      if (floating || min % 1 || max % 1) {
        var rand = nativeRandom();
        return nativeMin(min + (rand * (max - min + parseFloat('1e-' + ((rand + '').length - 1)))), max);
      }
      return baseRandom(min, max);
    }

    /*------------------------------------------------------------------------*/

    /**
     * Converts `string` to [camel case](https://en.wikipedia.org/wiki/CamelCase).
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to convert.
     * @returns {string} Returns the camel cased string.
     * @example
     *
     * _.camelCase('Foo Bar');
     * // => 'fooBar'
     *
     * _.camelCase('--foo-bar');
     * // => 'fooBar'
     *
     * _.camelCase('__foo_bar__');
     * // => 'fooBar'
     */
    var camelCase = createCompounder(function(result, word, index) {
      word = word.toLowerCase();
      return result + (index ? (word.charAt(0).toUpperCase() + word.slice(1)) : word);
    });

    /**
     * Capitalizes the first character of `string`.
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to capitalize.
     * @returns {string} Returns the capitalized string.
     * @example
     *
     * _.capitalize('fred');
     * // => 'Fred'
     */
    function capitalize(string) {
      string = baseToString(string);
      return string && (string.charAt(0).toUpperCase() + string.slice(1));
    }

    /**
     * Deburrs `string` by converting [latin-1 supplementary letters](https://en.wikipedia.org/wiki/Latin-1_Supplement_(Unicode_block)#Character_table)
     * to basic latin letters and removing [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks).
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to deburr.
     * @returns {string} Returns the deburred string.
     * @example
     *
     * _.deburr('dÃ©jÃ  vu');
     * // => 'deja vu'
     */
    function deburr(string) {
      string = baseToString(string);
      return string && string.replace(reLatin1, deburrLetter).replace(reComboMark, '');
    }

    /**
     * Checks if `string` ends with the given target string.
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to search.
     * @param {string} [target] The string to search for.
     * @param {number} [position=string.length] The position to search from.
     * @returns {boolean} Returns `true` if `string` ends with `target`, else `false`.
     * @example
     *
     * _.endsWith('abc', 'c');
     * // => true
     *
     * _.endsWith('abc', 'b');
     * // => false
     *
     * _.endsWith('abc', 'b', 2);
     * // => true
     */
    function endsWith(string, target, position) {
      string = baseToString(string);
      target = (target + '');

      var length = string.length;
      position = position === undefined
        ? length
        : nativeMin(position < 0 ? 0 : (+position || 0), length);

      position -= target.length;
      return position >= 0 && string.indexOf(target, position) == position;
    }

    /**
     * Converts the characters "&", "<", ">", '"', "'", and "\`", in `string` to
     * their corresponding HTML entities.
     *
     * **Note:** No other characters are escaped. To escape additional characters
     * use a third-party library like [_he_](https://mths.be/he).
     *
     * Though the ">" character is escaped for symmetry, characters like
     * ">" and "/" don't need escaping in HTML and have no special meaning
     * unless they're part of a tag or unquoted attribute value.
     * See [Mathias Bynens's article](https://mathiasbynens.be/notes/ambiguous-ampersands)
     * (under "semi-related fun fact") for more details.
     *
     * Backticks are escaped because in Internet Explorer < 9, they can break out
     * of attribute values or HTML comments. See [#59](https://html5sec.org/#59),
     * [#102](https://html5sec.org/#102), [#108](https://html5sec.org/#108), and
     * [#133](https://html5sec.org/#133) of the [HTML5 Security Cheatsheet](https://html5sec.org/)
     * for more details.
     *
     * When working with HTML you should always [quote attribute values](http://wonko.com/post/html-escaping)
     * to reduce XSS vectors.
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to escape.
     * @returns {string} Returns the escaped string.
     * @example
     *
     * _.escape('fred, barney, & pebbles');
     * // => 'fred, barney, &amp; pebbles'
     */
    function escape(string) {
      // Reset `lastIndex` because in IE < 9 `String#replace` does not.
      string = baseToString(string);
      return (string && reHasUnescapedHtml.test(string))
        ? string.replace(reUnescapedHtml, escapeHtmlChar)
        : string;
    }

    /**
     * Escapes the `RegExp` special characters "\", "/", "^", "$", ".", "|", "?",
     * "*", "+", "(", ")", "[", "]", "{" and "}" in `string`.
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to escape.
     * @returns {string} Returns the escaped string.
     * @example
     *
     * _.escapeRegExp('[lodash](https://lodash.com/)');
     * // => '\[lodash\]\(https:\/\/lodash\.com\/\)'
     */
    function escapeRegExp(string) {
      string = baseToString(string);
      return (string && reHasRegExpChars.test(string))
        ? string.replace(reRegExpChars, escapeRegExpChar)
        : (string || '(?:)');
    }

    /**
     * Converts `string` to [kebab case](https://en.wikipedia.org/wiki/Letter_case#Special_case_styles).
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to convert.
     * @returns {string} Returns the kebab cased string.
     * @example
     *
     * _.kebabCase('Foo Bar');
     * // => 'foo-bar'
     *
     * _.kebabCase('fooBar');
     * // => 'foo-bar'
     *
     * _.kebabCase('__foo_bar__');
     * // => 'foo-bar'
     */
    var kebabCase = createCompounder(function(result, word, index) {
      return result + (index ? '-' : '') + word.toLowerCase();
    });

    /**
     * Pads `string` on the left and right sides if it's shorter than `length`.
     * Padding characters are truncated if they can't be evenly divided by `length`.
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to pad.
     * @param {number} [length=0] The padding length.
     * @param {string} [chars=' '] The string used as padding.
     * @returns {string} Returns the padded string.
     * @example
     *
     * _.pad('abc', 8);
     * // => '  abc   '
     *
     * _.pad('abc', 8, '_-');
     * // => '_-abc_-_'
     *
     * _.pad('abc', 3);
     * // => 'abc'
     */
    function pad(string, length, chars) {
      string = baseToString(string);
      length = +length;

      var strLength = string.length;
      if (strLength >= length || !nativeIsFinite(length)) {
        return string;
      }
      var mid = (length - strLength) / 2,
          leftLength = nativeFloor(mid),
          rightLength = nativeCeil(mid);

      chars = createPadding('', rightLength, chars);
      return chars.slice(0, leftLength) + string + chars;
    }

    /**
     * Pads `string` on the left side if it's shorter than `length`. Padding
     * characters are truncated if they exceed `length`.
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to pad.
     * @param {number} [length=0] The padding length.
     * @param {string} [chars=' '] The string used as padding.
     * @returns {string} Returns the padded string.
     * @example
     *
     * _.padLeft('abc', 6);
     * // => '   abc'
     *
     * _.padLeft('abc', 6, '_-');
     * // => '_-_abc'
     *
     * _.padLeft('abc', 3);
     * // => 'abc'
     */
    var padLeft = createPadDir();

    /**
     * Pads `string` on the right side if it's shorter than `length`. Padding
     * characters are truncated if they exceed `length`.
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to pad.
     * @param {number} [length=0] The padding length.
     * @param {string} [chars=' '] The string used as padding.
     * @returns {string} Returns the padded string.
     * @example
     *
     * _.padRight('abc', 6);
     * // => 'abc   '
     *
     * _.padRight('abc', 6, '_-');
     * // => 'abc_-_'
     *
     * _.padRight('abc', 3);
     * // => 'abc'
     */
    var padRight = createPadDir(true);

    /**
     * Converts `string` to an integer of the specified radix. If `radix` is
     * `undefined` or `0`, a `radix` of `10` is used unless `value` is a hexadecimal,
     * in which case a `radix` of `16` is used.
     *
     * **Note:** This method aligns with the [ES5 implementation](https://es5.github.io/#E)
     * of `parseInt`.
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} string The string to convert.
     * @param {number} [radix] The radix to interpret `value` by.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {number} Returns the converted integer.
     * @example
     *
     * _.parseInt('08');
     * // => 8
     *
     * _.map(['6', '08', '10'], _.parseInt);
     * // => [6, 8, 10]
     */
    function parseInt(string, radix, guard) {
      // Firefox < 21 and Opera < 15 follow ES3 for `parseInt`.
      // Chrome fails to trim leading <BOM> whitespace characters.
      // See https://code.google.com/p/v8/issues/detail?id=3109 for more details.
      if (guard ? isIterateeCall(string, radix, guard) : radix == null) {
        radix = 0;
      } else if (radix) {
        radix = +radix;
      }
      string = trim(string);
      return nativeParseInt(string, radix || (reHasHexPrefix.test(string) ? 16 : 10));
    }

    /**
     * Repeats the given string `n` times.
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to repeat.
     * @param {number} [n=0] The number of times to repeat the string.
     * @returns {string} Returns the repeated string.
     * @example
     *
     * _.repeat('*', 3);
     * // => '***'
     *
     * _.repeat('abc', 2);
     * // => 'abcabc'
     *
     * _.repeat('abc', 0);
     * // => ''
     */
    function repeat(string, n) {
      var result = '';
      string = baseToString(string);
      n = +n;
      if (n < 1 || !string || !nativeIsFinite(n)) {
        return result;
      }
      // Leverage the exponentiation by squaring algorithm for a faster repeat.
      // See https://en.wikipedia.org/wiki/Exponentiation_by_squaring for more details.
      do {
        if (n % 2) {
          result += string;
        }
        n = nativeFloor(n / 2);
        string += string;
      } while (n);

      return result;
    }

    /**
     * Converts `string` to [snake case](https://en.wikipedia.org/wiki/Snake_case).
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to convert.
     * @returns {string} Returns the snake cased string.
     * @example
     *
     * _.snakeCase('Foo Bar');
     * // => 'foo_bar'
     *
     * _.snakeCase('fooBar');
     * // => 'foo_bar'
     *
     * _.snakeCase('--foo-bar');
     * // => 'foo_bar'
     */
    var snakeCase = createCompounder(function(result, word, index) {
      return result + (index ? '_' : '') + word.toLowerCase();
    });

    /**
     * Converts `string` to [start case](https://en.wikipedia.org/wiki/Letter_case#Stylistic_or_specialised_usage).
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to convert.
     * @returns {string} Returns the start cased string.
     * @example
     *
     * _.startCase('--foo-bar');
     * // => 'Foo Bar'
     *
     * _.startCase('fooBar');
     * // => 'Foo Bar'
     *
     * _.startCase('__foo_bar__');
     * // => 'Foo Bar'
     */
    var startCase = createCompounder(function(result, word, index) {
      return result + (index ? ' ' : '') + (word.charAt(0).toUpperCase() + word.slice(1));
    });

    /**
     * Checks if `string` starts with the given target string.
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to search.
     * @param {string} [target] The string to search for.
     * @param {number} [position=0] The position to search from.
     * @returns {boolean} Returns `true` if `string` starts with `target`, else `false`.
     * @example
     *
     * _.startsWith('abc', 'a');
     * // => true
     *
     * _.startsWith('abc', 'b');
     * // => false
     *
     * _.startsWith('abc', 'b', 1);
     * // => true
     */
    function startsWith(string, target, position) {
      string = baseToString(string);
      position = position == null
        ? 0
        : nativeMin(position < 0 ? 0 : (+position || 0), string.length);

      return string.lastIndexOf(target, position) == position;
    }

    /**
     * Creates a compiled template function that can interpolate data properties
     * in "interpolate" delimiters, HTML-escape interpolated data properties in
     * "escape" delimiters, and execute JavaScript in "evaluate" delimiters. Data
     * properties may be accessed as free variables in the template. If a setting
     * object is provided it takes precedence over `_.templateSettings` values.
     *
     * **Note:** In the development build `_.template` utilizes
     * [sourceURLs](http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/#toc-sourceurl)
     * for easier debugging.
     *
     * For more information on precompiling templates see
     * [lodash's custom builds documentation](https://lodash.com/custom-builds).
     *
     * For more information on Chrome extension sandboxes see
     * [Chrome's extensions documentation](https://developer.chrome.com/extensions/sandboxingEval).
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The template string.
     * @param {Object} [options] The options object.
     * @param {RegExp} [options.escape] The HTML "escape" delimiter.
     * @param {RegExp} [options.evaluate] The "evaluate" delimiter.
     * @param {Object} [options.imports] An object to import into the template as free variables.
     * @param {RegExp} [options.interpolate] The "interpolate" delimiter.
     * @param {string} [options.sourceURL] The sourceURL of the template's compiled source.
     * @param {string} [options.variable] The data object variable name.
     * @param- {Object} [otherOptions] Enables the legacy `options` param signature.
     * @returns {Function} Returns the compiled template function.
     * @example
     *
     * // using the "interpolate" delimiter to create a compiled template
     * var compiled = _.template('hello <%= user %>!');
     * compiled({ 'user': 'fred' });
     * // => 'hello fred!'
     *
     * // using the HTML "escape" delimiter to escape data property values
     * var compiled = _.template('<b><%- value %></b>');
     * compiled({ 'value': '<script>' });
     * // => '<b>&lt;script&gt;</b>'
     *
     * // using the "evaluate" delimiter to execute JavaScript and generate HTML
     * var compiled = _.template('<% _.forEach(users, function(user) { %><li><%- user %></li><% }); %>');
     * compiled({ 'users': ['fred', 'barney'] });
     * // => '<li>fred</li><li>barney</li>'
     *
     * // using the internal `print` function in "evaluate" delimiters
     * var compiled = _.template('<% print("hello " + user); %>!');
     * compiled({ 'user': 'barney' });
     * // => 'hello barney!'
     *
     * // using the ES delimiter as an alternative to the default "interpolate" delimiter
     * var compiled = _.template('hello ${ user }!');
     * compiled({ 'user': 'pebbles' });
     * // => 'hello pebbles!'
     *
     * // using custom template delimiters
     * _.templateSettings.interpolate = /{{([\s\S]+?)}}/g;
     * var compiled = _.template('hello {{ user }}!');
     * compiled({ 'user': 'mustache' });
     * // => 'hello mustache!'
     *
     * // using backslashes to treat delimiters as plain text
     * var compiled = _.template('<%= "\\<%- value %\\>" %>');
     * compiled({ 'value': 'ignored' });
     * // => '<%- value %>'
     *
     * // using the `imports` option to import `jQuery` as `jq`
     * var text = '<% jq.each(users, function(user) { %><li><%- user %></li><% }); %>';
     * var compiled = _.template(text, { 'imports': { 'jq': jQuery } });
     * compiled({ 'users': ['fred', 'barney'] });
     * // => '<li>fred</li><li>barney</li>'
     *
     * // using the `sourceURL` option to specify a custom sourceURL for the template
     * var compiled = _.template('hello <%= user %>!', { 'sourceURL': '/basic/greeting.jst' });
     * compiled(data);
     * // => find the source of "greeting.jst" under the Sources tab or Resources panel of the web inspector
     *
     * // using the `variable` option to ensure a with-statement isn't used in the compiled template
     * var compiled = _.template('hi <%= data.user %>!', { 'variable': 'data' });
     * compiled.source;
     * // => function(data) {
     * //   var __t, __p = '';
     * //   __p += 'hi ' + ((__t = ( data.user )) == null ? '' : __t) + '!';
     * //   return __p;
     * // }
     *
     * // using the `source` property to inline compiled templates for meaningful
     * // line numbers in error messages and a stack trace
     * fs.writeFileSync(path.join(cwd, 'jst.js'), '\
     *   var JST = {\
     *     "main": ' + _.template(mainText).source + '\
     *   };\
     * ');
     */
    function template(string, options, otherOptions) {
      // Based on John Resig's `tmpl` implementation (http://ejohn.org/blog/javascript-micro-templating/)
      // and Laura Doktorova's doT.js (https://github.com/olado/doT).
      var settings = lodash.templateSettings;

      if (otherOptions && isIterateeCall(string, options, otherOptions)) {
        options = otherOptions = undefined;
      }
      string = baseToString(string);
      options = assignWith(baseAssign({}, otherOptions || options), settings, assignOwnDefaults);

      var imports = assignWith(baseAssign({}, options.imports), settings.imports, assignOwnDefaults),
          importsKeys = keys(imports),
          importsValues = baseValues(imports, importsKeys);

      var isEscaping,
          isEvaluating,
          index = 0,
          interpolate = options.interpolate || reNoMatch,
          source = "__p += '";

      // Compile the regexp to match each delimiter.
      var reDelimiters = RegExp(
        (options.escape || reNoMatch).source + '|' +
        interpolate.source + '|' +
        (interpolate === reInterpolate ? reEsTemplate : reNoMatch).source + '|' +
        (options.evaluate || reNoMatch).source + '|$'
      , 'g');

      // Use a sourceURL for easier debugging.
      var sourceURL = '//# sourceURL=' +
        ('sourceURL' in options
          ? options.sourceURL
          : ('lodash.templateSources[' + (++templateCounter) + ']')
        ) + '\n';

      string.replace(reDelimiters, function(match, escapeValue, interpolateValue, esTemplateValue, evaluateValue, offset) {
        interpolateValue || (interpolateValue = esTemplateValue);

        // Escape characters that can't be included in string literals.
        source += string.slice(index, offset).replace(reUnescapedString, escapeStringChar);

        // Replace delimiters with snippets.
        if (escapeValue) {
          isEscaping = true;
          source += "' +\n__e(" + escapeValue + ") +\n'";
        }
        if (evaluateValue) {
          isEvaluating = true;
          source += "';\n" + evaluateValue + ";\n__p += '";
        }
        if (interpolateValue) {
          source += "' +\n((__t = (" + interpolateValue + ")) == null ? '' : __t) +\n'";
        }
        index = offset + match.length;

        // The JS engine embedded in Adobe products requires returning the `match`
        // string in order to produce the correct `offset` value.
        return match;
      });

      source += "';\n";

      // If `variable` is not specified wrap a with-statement around the generated
      // code to add the data object to the top of the scope chain.
      var variable = options.variable;
      if (!variable) {
        source = 'with (obj) {\n' + source + '\n}\n';
      }
      // Cleanup code by stripping empty strings.
      source = (isEvaluating ? source.replace(reEmptyStringLeading, '') : source)
        .replace(reEmptyStringMiddle, '$1')
        .replace(reEmptyStringTrailing, '$1;');

      // Frame code as the function body.
      source = 'function(' + (variable || 'obj') + ') {\n' +
        (variable
          ? ''
          : 'obj || (obj = {});\n'
        ) +
        "var __t, __p = ''" +
        (isEscaping
           ? ', __e = _.escape'
           : ''
        ) +
        (isEvaluating
          ? ', __j = Array.prototype.join;\n' +
            "function print() { __p += __j.call(arguments, '') }\n"
          : ';\n'
        ) +
        source +
        'return __p\n}';

      var result = attempt(function() {
        return Function(importsKeys, sourceURL + 'return ' + source).apply(undefined, importsValues);
      });

      // Provide the compiled function's source by its `toString` method or
      // the `source` property as a convenience for inlining compiled templates.
      result.source = source;
      if (isError(result)) {
        throw result;
      }
      return result;
    }

    /**
     * Removes leading and trailing whitespace or specified characters from `string`.
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to trim.
     * @param {string} [chars=whitespace] The characters to trim.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {string} Returns the trimmed string.
     * @example
     *
     * _.trim('  abc  ');
     * // => 'abc'
     *
     * _.trim('-_-abc-_-', '_-');
     * // => 'abc'
     *
     * _.map(['  foo  ', '  bar  '], _.trim);
     * // => ['foo', 'bar']
     */
    function trim(string, chars, guard) {
      var value = string;
      string = baseToString(string);
      if (!string) {
        return string;
      }
      if (guard ? isIterateeCall(value, chars, guard) : chars == null) {
        return string.slice(trimmedLeftIndex(string), trimmedRightIndex(string) + 1);
      }
      chars = (chars + '');
      return string.slice(charsLeftIndex(string, chars), charsRightIndex(string, chars) + 1);
    }

    /**
     * Removes leading whitespace or specified characters from `string`.
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to trim.
     * @param {string} [chars=whitespace] The characters to trim.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {string} Returns the trimmed string.
     * @example
     *
     * _.trimLeft('  abc  ');
     * // => 'abc  '
     *
     * _.trimLeft('-_-abc-_-', '_-');
     * // => 'abc-_-'
     */
    function trimLeft(string, chars, guard) {
      var value = string;
      string = baseToString(string);
      if (!string) {
        return string;
      }
      if (guard ? isIterateeCall(value, chars, guard) : chars == null) {
        return string.slice(trimmedLeftIndex(string));
      }
      return string.slice(charsLeftIndex(string, (chars + '')));
    }

    /**
     * Removes trailing whitespace or specified characters from `string`.
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to trim.
     * @param {string} [chars=whitespace] The characters to trim.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {string} Returns the trimmed string.
     * @example
     *
     * _.trimRight('  abc  ');
     * // => '  abc'
     *
     * _.trimRight('-_-abc-_-', '_-');
     * // => '-_-abc'
     */
    function trimRight(string, chars, guard) {
      var value = string;
      string = baseToString(string);
      if (!string) {
        return string;
      }
      if (guard ? isIterateeCall(value, chars, guard) : chars == null) {
        return string.slice(0, trimmedRightIndex(string) + 1);
      }
      return string.slice(0, charsRightIndex(string, (chars + '')) + 1);
    }

    /**
     * Truncates `string` if it's longer than the given maximum string length.
     * The last characters of the truncated string are replaced with the omission
     * string which defaults to "...".
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to truncate.
     * @param {Object|number} [options] The options object or maximum string length.
     * @param {number} [options.length=30] The maximum string length.
     * @param {string} [options.omission='...'] The string to indicate text is omitted.
     * @param {RegExp|string} [options.separator] The separator pattern to truncate to.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {string} Returns the truncated string.
     * @example
     *
     * _.trunc('hi-diddly-ho there, neighborino');
     * // => 'hi-diddly-ho there, neighbo...'
     *
     * _.trunc('hi-diddly-ho there, neighborino', 24);
     * // => 'hi-diddly-ho there, n...'
     *
     * _.trunc('hi-diddly-ho there, neighborino', {
     *   'length': 24,
     *   'separator': ' '
     * });
     * // => 'hi-diddly-ho there,...'
     *
     * _.trunc('hi-diddly-ho there, neighborino', {
     *   'length': 24,
     *   'separator': /,? +/
     * });
     * // => 'hi-diddly-ho there...'
     *
     * _.trunc('hi-diddly-ho there, neighborino', {
     *   'omission': ' [...]'
     * });
     * // => 'hi-diddly-ho there, neig [...]'
     */
    function trunc(string, options, guard) {
      if (guard && isIterateeCall(string, options, guard)) {
        options = undefined;
      }
      var length = DEFAULT_TRUNC_LENGTH,
          omission = DEFAULT_TRUNC_OMISSION;

      if (options != null) {
        if (isObject(options)) {
          var separator = 'separator' in options ? options.separator : separator;
          length = 'length' in options ? (+options.length || 0) : length;
          omission = 'omission' in options ? baseToString(options.omission) : omission;
        } else {
          length = +options || 0;
        }
      }
      string = baseToString(string);
      if (length >= string.length) {
        return string;
      }
      var end = length - omission.length;
      if (end < 1) {
        return omission;
      }
      var result = string.slice(0, end);
      if (separator == null) {
        return result + omission;
      }
      if (isRegExp(separator)) {
        if (string.slice(end).search(separator)) {
          var match,
              newEnd,
              substring = string.slice(0, end);

          if (!separator.global) {
            separator = RegExp(separator.source, (reFlags.exec(separator) || '') + 'g');
          }
          separator.lastIndex = 0;
          while ((match = separator.exec(substring))) {
            newEnd = match.index;
          }
          result = result.slice(0, newEnd == null ? end : newEnd);
        }
      } else if (string.indexOf(separator, end) != end) {
        var index = result.lastIndexOf(separator);
        if (index > -1) {
          result = result.slice(0, index);
        }
      }
      return result + omission;
    }

    /**
     * The inverse of `_.escape`; this method converts the HTML entities
     * `&amp;`, `&lt;`, `&gt;`, `&quot;`, `&#39;`, and `&#96;` in `string` to their
     * corresponding characters.
     *
     * **Note:** No other HTML entities are unescaped. To unescape additional HTML
     * entities use a third-party library like [_he_](https://mths.be/he).
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to unescape.
     * @returns {string} Returns the unescaped string.
     * @example
     *
     * _.unescape('fred, barney, &amp; pebbles');
     * // => 'fred, barney, & pebbles'
     */
    function unescape(string) {
      string = baseToString(string);
      return (string && reHasEscapedHtml.test(string))
        ? string.replace(reEscapedHtml, unescapeHtmlChar)
        : string;
    }

    /**
     * Splits `string` into an array of its words.
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to inspect.
     * @param {RegExp|string} [pattern] The pattern to match words.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {Array} Returns the words of `string`.
     * @example
     *
     * _.words('fred, barney, & pebbles');
     * // => ['fred', 'barney', 'pebbles']
     *
     * _.words('fred, barney, & pebbles', /[^, ]+/g);
     * // => ['fred', 'barney', '&', 'pebbles']
     */
    function words(string, pattern, guard) {
      if (guard && isIterateeCall(string, pattern, guard)) {
        pattern = undefined;
      }
      string = baseToString(string);
      return string.match(pattern || reWords) || [];
    }

    /*------------------------------------------------------------------------*/

    /**
     * Attempts to invoke `func`, returning either the result or the caught error
     * object. Any additional arguments are provided to `func` when it is invoked.
     *
     * @static
     * @memberOf _
     * @category Utility
     * @param {Function} func The function to attempt.
     * @returns {*} Returns the `func` result or error object.
     * @example
     *
     * // avoid throwing errors for invalid selectors
     * var elements = _.attempt(function(selector) {
     *   return document.querySelectorAll(selector);
     * }, '>_>');
     *
     * if (_.isError(elements)) {
     *   elements = [];
     * }
     */
    var attempt = restParam(function(func, args) {
      try {
        return func.apply(undefined, args);
      } catch(e) {
        return isError(e) ? e : new Error(e);
      }
    });

    /**
     * Creates a function that invokes `func` with the `this` binding of `thisArg`
     * and arguments of the created function. If `func` is a property name the
     * created callback returns the property value for a given element. If `func`
     * is an object the created callback returns `true` for elements that contain
     * the equivalent object properties, otherwise it returns `false`.
     *
     * @static
     * @memberOf _
     * @alias iteratee
     * @category Utility
     * @param {*} [func=_.identity] The value to convert to a callback.
     * @param {*} [thisArg] The `this` binding of `func`.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {Function} Returns the callback.
     * @example
     *
     * var users = [
     *   { 'user': 'barney', 'age': 36 },
     *   { 'user': 'fred',   'age': 40 }
     * ];
     *
     * // wrap to create custom callback shorthands
     * _.callback = _.wrap(_.callback, function(callback, func, thisArg) {
     *   var match = /^(.+?)__([gl]t)(.+)$/.exec(func);
     *   if (!match) {
     *     return callback(func, thisArg);
     *   }
     *   return function(object) {
     *     return match[2] == 'gt'
     *       ? object[match[1]] > match[3]
     *       : object[match[1]] < match[3];
     *   };
     * });
     *
     * _.filter(users, 'age__gt36');
     * // => [{ 'user': 'fred', 'age': 40 }]
     */
    function callback(func, thisArg, guard) {
      if (guard && isIterateeCall(func, thisArg, guard)) {
        thisArg = undefined;
      }
      return isObjectLike(func)
        ? matches(func)
        : baseCallback(func, thisArg);
    }

    /**
     * Creates a function that returns `value`.
     *
     * @static
     * @memberOf _
     * @category Utility
     * @param {*} value The value to return from the new function.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var object = { 'user': 'fred' };
     * var getter = _.constant(object);
     *
     * getter() === object;
     * // => true
     */
    function constant(value) {
      return function() {
        return value;
      };
    }

    /**
     * This method returns the first argument provided to it.
     *
     * @static
     * @memberOf _
     * @category Utility
     * @param {*} value Any value.
     * @returns {*} Returns `value`.
     * @example
     *
     * var object = { 'user': 'fred' };
     *
     * _.identity(object) === object;
     * // => true
     */
    function identity(value) {
      return value;
    }

    /**
     * Creates a function that performs a deep comparison between a given object
     * and `source`, returning `true` if the given object has equivalent property
     * values, else `false`.
     *
     * **Note:** This method supports comparing arrays, booleans, `Date` objects,
     * numbers, `Object` objects, regexes, and strings. Objects are compared by
     * their own, not inherited, enumerable properties. For comparing a single
     * own or inherited property value see `_.matchesProperty`.
     *
     * @static
     * @memberOf _
     * @category Utility
     * @param {Object} source The object of property values to match.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var users = [
     *   { 'user': 'barney', 'age': 36, 'active': true },
     *   { 'user': 'fred',   'age': 40, 'active': false }
     * ];
     *
     * _.filter(users, _.matches({ 'age': 40, 'active': false }));
     * // => [{ 'user': 'fred', 'age': 40, 'active': false }]
     */
    function matches(source) {
      return baseMatches(baseClone(source, true));
    }

    /**
     * Creates a function that compares the property value of `path` on a given
     * object to `value`.
     *
     * **Note:** This method supports comparing arrays, booleans, `Date` objects,
     * numbers, `Object` objects, regexes, and strings. Objects are compared by
     * their own, not inherited, enumerable properties.
     *
     * @static
     * @memberOf _
     * @category Utility
     * @param {Array|string} path The path of the property to get.
     * @param {*} srcValue The value to match.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var users = [
     *   { 'user': 'barney' },
     *   { 'user': 'fred' }
     * ];
     *
     * _.find(users, _.matchesProperty('user', 'fred'));
     * // => { 'user': 'fred' }
     */
    function matchesProperty(path, srcValue) {
      return baseMatchesProperty(path, baseClone(srcValue, true));
    }

    /**
     * Creates a function that invokes the method at `path` on a given object.
     * Any additional arguments are provided to the invoked method.
     *
     * @static
     * @memberOf _
     * @category Utility
     * @param {Array|string} path The path of the method to invoke.
     * @param {...*} [args] The arguments to invoke the method with.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var objects = [
     *   { 'a': { 'b': { 'c': _.constant(2) } } },
     *   { 'a': { 'b': { 'c': _.constant(1) } } }
     * ];
     *
     * _.map(objects, _.method('a.b.c'));
     * // => [2, 1]
     *
     * _.invoke(_.sortBy(objects, _.method(['a', 'b', 'c'])), 'a.b.c');
     * // => [1, 2]
     */
    var method = restParam(function(path, args) {
      return function(object) {
        return invokePath(object, path, args);
      };
    });

    /**
     * The opposite of `_.method`; this method creates a function that invokes
     * the method at a given path on `object`. Any additional arguments are
     * provided to the invoked method.
     *
     * @static
     * @memberOf _
     * @category Utility
     * @param {Object} object The object to query.
     * @param {...*} [args] The arguments to invoke the method with.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var array = _.times(3, _.constant),
     *     object = { 'a': array, 'b': array, 'c': array };
     *
     * _.map(['a[2]', 'c[0]'], _.methodOf(object));
     * // => [2, 0]
     *
     * _.map([['a', '2'], ['c', '0']], _.methodOf(object));
     * // => [2, 0]
     */
    var methodOf = restParam(function(object, args) {
      return function(path) {
        return invokePath(object, path, args);
      };
    });

    /**
     * Adds all own enumerable function properties of a source object to the
     * destination object. If `object` is a function then methods are added to
     * its prototype as well.
     *
     * **Note:** Use `_.runInContext` to create a pristine `lodash` function to
     * avoid conflicts caused by modifying the original.
     *
     * @static
     * @memberOf _
     * @category Utility
     * @param {Function|Object} [object=lodash] The destination object.
     * @param {Object} source The object of functions to add.
     * @param {Object} [options] The options object.
     * @param {boolean} [options.chain=true] Specify whether the functions added
     *  are chainable.
     * @returns {Function|Object} Returns `object`.
     * @example
     *
     * function vowels(string) {
     *   return _.filter(string, function(v) {
     *     return /[aeiou]/i.test(v);
     *   });
     * }
     *
     * _.mixin({ 'vowels': vowels });
     * _.vowels('fred');
     * // => ['e']
     *
     * _('fred').vowels().value();
     * // => ['e']
     *
     * _.mixin({ 'vowels': vowels }, { 'chain': false });
     * _('fred').vowels();
     * // => ['e']
     */
    function mixin(object, source, options) {
      if (options == null) {
        var isObj = isObject(source),
            props = isObj ? keys(source) : undefined,
            methodNames = (props && props.length) ? baseFunctions(source, props) : undefined;

        if (!(methodNames ? methodNames.length : isObj)) {
          methodNames = false;
          options = source;
          source = object;
          object = this;
        }
      }
      if (!methodNames) {
        methodNames = baseFunctions(source, keys(source));
      }
      var chain = true,
          index = -1,
          isFunc = isFunction(object),
          length = methodNames.length;

      if (options === false) {
        chain = false;
      } else if (isObject(options) && 'chain' in options) {
        chain = options.chain;
      }
      while (++index < length) {
        var methodName = methodNames[index],
            func = source[methodName];

        object[methodName] = func;
        if (isFunc) {
          object.prototype[methodName] = (function(func) {
            return function() {
              var chainAll = this.__chain__;
              if (chain || chainAll) {
                var result = object(this.__wrapped__),
                    actions = result.__actions__ = arrayCopy(this.__actions__);

                actions.push({ 'func': func, 'args': arguments, 'thisArg': object });
                result.__chain__ = chainAll;
                return result;
              }
              return func.apply(object, arrayPush([this.value()], arguments));
            };
          }(func));
        }
      }
      return object;
    }

    /**
     * Reverts the `_` variable to its previous value and returns a reference to
     * the `lodash` function.
     *
     * @static
     * @memberOf _
     * @category Utility
     * @returns {Function} Returns the `lodash` function.
     * @example
     *
     * var lodash = _.noConflict();
     */
    function noConflict() {
      root._ = oldDash;
      return this;
    }

    /**
     * A no-operation function that returns `undefined` regardless of the
     * arguments it receives.
     *
     * @static
     * @memberOf _
     * @category Utility
     * @example
     *
     * var object = { 'user': 'fred' };
     *
     * _.noop(object) === undefined;
     * // => true
     */
    function noop() {
      // No operation performed.
    }

    /**
     * Creates a function that returns the property value at `path` on a
     * given object.
     *
     * @static
     * @memberOf _
     * @category Utility
     * @param {Array|string} path The path of the property to get.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var objects = [
     *   { 'a': { 'b': { 'c': 2 } } },
     *   { 'a': { 'b': { 'c': 1 } } }
     * ];
     *
     * _.map(objects, _.property('a.b.c'));
     * // => [2, 1]
     *
     * _.pluck(_.sortBy(objects, _.property(['a', 'b', 'c'])), 'a.b.c');
     * // => [1, 2]
     */
    function property(path) {
      return isKey(path) ? baseProperty(path) : basePropertyDeep(path);
    }

    /**
     * The opposite of `_.property`; this method creates a function that returns
     * the property value at a given path on `object`.
     *
     * @static
     * @memberOf _
     * @category Utility
     * @param {Object} object The object to query.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var array = [0, 1, 2],
     *     object = { 'a': array, 'b': array, 'c': array };
     *
     * _.map(['a[2]', 'c[0]'], _.propertyOf(object));
     * // => [2, 0]
     *
     * _.map([['a', '2'], ['c', '0']], _.propertyOf(object));
     * // => [2, 0]
     */
    function propertyOf(object) {
      return function(path) {
        return baseGet(object, toPath(path), path + '');
      };
    }

    /**
     * Creates an array of numbers (positive and/or negative) progressing from
     * `start` up to, but not including, `end`. If `end` is not specified it is
     * set to `start` with `start` then set to `0`. If `end` is less than `start`
     * a zero-length range is created unless a negative `step` is specified.
     *
     * @static
     * @memberOf _
     * @category Utility
     * @param {number} [start=0] The start of the range.
     * @param {number} end The end of the range.
     * @param {number} [step=1] The value to increment or decrement by.
     * @returns {Array} Returns the new array of numbers.
     * @example
     *
     * _.range(4);
     * // => [0, 1, 2, 3]
     *
     * _.range(1, 5);
     * // => [1, 2, 3, 4]
     *
     * _.range(0, 20, 5);
     * // => [0, 5, 10, 15]
     *
     * _.range(0, -4, -1);
     * // => [0, -1, -2, -3]
     *
     * _.range(1, 4, 0);
     * // => [1, 1, 1]
     *
     * _.range(0);
     * // => []
     */
    function range(start, end, step) {
      if (step && isIterateeCall(start, end, step)) {
        end = step = undefined;
      }
      start = +start || 0;
      step = step == null ? 1 : (+step || 0);

      if (end == null) {
        end = start;
        start = 0;
      } else {
        end = +end || 0;
      }
      // Use `Array(length)` so engines like Chakra and V8 avoid slower modes.
      // See https://youtu.be/XAqIpGU8ZZk#t=17m25s for more details.
      var index = -1,
          length = nativeMax(nativeCeil((end - start) / (step || 1)), 0),
          result = Array(length);

      while (++index < length) {
        result[index] = start;
        start += step;
      }
      return result;
    }

    /**
     * Invokes the iteratee function `n` times, returning an array of the results
     * of each invocation. The `iteratee` is bound to `thisArg` and invoked with
     * one argument; (index).
     *
     * @static
     * @memberOf _
     * @category Utility
     * @param {number} n The number of times to invoke `iteratee`.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Array} Returns the array of results.
     * @example
     *
     * var diceRolls = _.times(3, _.partial(_.random, 1, 6, false));
     * // => [3, 6, 4]
     *
     * _.times(3, function(n) {
     *   mage.castSpell(n);
     * });
     * // => invokes `mage.castSpell(n)` three times with `n` of `0`, `1`, and `2`
     *
     * _.times(3, function(n) {
     *   this.cast(n);
     * }, mage);
     * // => also invokes `mage.castSpell(n)` three times
     */
    function times(n, iteratee, thisArg) {
      n = nativeFloor(n);

      // Exit early to avoid a JSC JIT bug in Safari 8
      // where `Array(0)` is treated as `Array(1)`.
      if (n < 1 || !nativeIsFinite(n)) {
        return [];
      }
      var index = -1,
          result = Array(nativeMin(n, MAX_ARRAY_LENGTH));

      iteratee = bindCallback(iteratee, thisArg, 1);
      while (++index < n) {
        if (index < MAX_ARRAY_LENGTH) {
          result[index] = iteratee(index);
        } else {
          iteratee(index);
        }
      }
      return result;
    }

    /**
     * Generates a unique ID. If `prefix` is provided the ID is appended to it.
     *
     * @static
     * @memberOf _
     * @category Utility
     * @param {string} [prefix] The value to prefix the ID with.
     * @returns {string} Returns the unique ID.
     * @example
     *
     * _.uniqueId('contact_');
     * // => 'contact_104'
     *
     * _.uniqueId();
     * // => '105'
     */
    function uniqueId(prefix) {
      var id = ++idCounter;
      return baseToString(prefix) + id;
    }

    /*------------------------------------------------------------------------*/

    /**
     * Adds two numbers.
     *
     * @static
     * @memberOf _
     * @category Math
     * @param {number} augend The first number to add.
     * @param {number} addend The second number to add.
     * @returns {number} Returns the sum.
     * @example
     *
     * _.add(6, 4);
     * // => 10
     */
    function add(augend, addend) {
      return (+augend || 0) + (+addend || 0);
    }

    /**
     * Calculates `n` rounded up to `precision`.
     *
     * @static
     * @memberOf _
     * @category Math
     * @param {number} n The number to round up.
     * @param {number} [precision=0] The precision to round up to.
     * @returns {number} Returns the rounded up number.
     * @example
     *
     * _.ceil(4.006);
     * // => 5
     *
     * _.ceil(6.004, 2);
     * // => 6.01
     *
     * _.ceil(6040, -2);
     * // => 6100
     */
    var ceil = createRound('ceil');

    /**
     * Calculates `n` rounded down to `precision`.
     *
     * @static
     * @memberOf _
     * @category Math
     * @param {number} n The number to round down.
     * @param {number} [precision=0] The precision to round down to.
     * @returns {number} Returns the rounded down number.
     * @example
     *
     * _.floor(4.006);
     * // => 4
     *
     * _.floor(0.046, 2);
     * // => 0.04
     *
     * _.floor(4060, -2);
     * // => 4000
     */
    var floor = createRound('floor');

    /**
     * Gets the maximum value of `collection`. If `collection` is empty or falsey
     * `-Infinity` is returned. If an iteratee function is provided it is invoked
     * for each value in `collection` to generate the criterion by which the value
     * is ranked. The `iteratee` is bound to `thisArg` and invoked with three
     * arguments: (value, index, collection).
     *
     * If a property name is provided for `iteratee` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `iteratee` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Math
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [iteratee] The function invoked per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {*} Returns the maximum value.
     * @example
     *
     * _.max([4, 2, 8, 6]);
     * // => 8
     *
     * _.max([]);
     * // => -Infinity
     *
     * var users = [
     *   { 'user': 'barney', 'age': 36 },
     *   { 'user': 'fred',   'age': 40 }
     * ];
     *
     * _.max(users, function(chr) {
     *   return chr.age;
     * });
     * // => { 'user': 'fred', 'age': 40 }
     *
     * // using the `_.property` callback shorthand
     * _.max(users, 'age');
     * // => { 'user': 'fred', 'age': 40 }
     */
    var max = createExtremum(gt, NEGATIVE_INFINITY);

    /**
     * Gets the minimum value of `collection`. If `collection` is empty or falsey
     * `Infinity` is returned. If an iteratee function is provided it is invoked
     * for each value in `collection` to generate the criterion by which the value
     * is ranked. The `iteratee` is bound to `thisArg` and invoked with three
     * arguments: (value, index, collection).
     *
     * If a property name is provided for `iteratee` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `iteratee` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Math
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [iteratee] The function invoked per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {*} Returns the minimum value.
     * @example
     *
     * _.min([4, 2, 8, 6]);
     * // => 2
     *
     * _.min([]);
     * // => Infinity
     *
     * var users = [
     *   { 'user': 'barney', 'age': 36 },
     *   { 'user': 'fred',   'age': 40 }
     * ];
     *
     * _.min(users, function(chr) {
     *   return chr.age;
     * });
     * // => { 'user': 'barney', 'age': 36 }
     *
     * // using the `_.property` callback shorthand
     * _.min(users, 'age');
     * // => { 'user': 'barney', 'age': 36 }
     */
    var min = createExtremum(lt, POSITIVE_INFINITY);

    /**
     * Calculates `n` rounded to `precision`.
     *
     * @static
     * @memberOf _
     * @category Math
     * @param {number} n The number to round.
     * @param {number} [precision=0] The precision to round to.
     * @returns {number} Returns the rounded number.
     * @example
     *
     * _.round(4.006);
     * // => 4
     *
     * _.round(4.006, 2);
     * // => 4.01
     *
     * _.round(4060, -2);
     * // => 4100
     */
    var round = createRound('round');

    /**
     * Gets the sum of the values in `collection`.
     *
     * @static
     * @memberOf _
     * @category Math
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [iteratee] The function invoked per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {number} Returns the sum.
     * @example
     *
     * _.sum([4, 6]);
     * // => 10
     *
     * _.sum({ 'a': 4, 'b': 6 });
     * // => 10
     *
     * var objects = [
     *   { 'n': 4 },
     *   { 'n': 6 }
     * ];
     *
     * _.sum(objects, function(object) {
     *   return object.n;
     * });
     * // => 10
     *
     * // using the `_.property` callback shorthand
     * _.sum(objects, 'n');
     * // => 10
     */
    function sum(collection, iteratee, thisArg) {
      if (thisArg && isIterateeCall(collection, iteratee, thisArg)) {
        iteratee = undefined;
      }
      iteratee = getCallback(iteratee, thisArg, 3);
      return iteratee.length == 1
        ? arraySum(isArray(collection) ? collection : toIterable(collection), iteratee)
        : baseSum(collection, iteratee);
    }

    /*------------------------------------------------------------------------*/

    // Ensure wrappers are instances of `baseLodash`.
    lodash.prototype = baseLodash.prototype;

    LodashWrapper.prototype = baseCreate(baseLodash.prototype);
    LodashWrapper.prototype.constructor = LodashWrapper;

    LazyWrapper.prototype = baseCreate(baseLodash.prototype);
    LazyWrapper.prototype.constructor = LazyWrapper;

    // Add functions to the `Map` cache.
    MapCache.prototype['delete'] = mapDelete;
    MapCache.prototype.get = mapGet;
    MapCache.prototype.has = mapHas;
    MapCache.prototype.set = mapSet;

    // Add functions to the `Set` cache.
    SetCache.prototype.push = cachePush;

    // Assign cache to `_.memoize`.
    memoize.Cache = MapCache;

    // Add functions that return wrapped values when chaining.
    lodash.after = after;
    lodash.ary = ary;
    lodash.assign = assign;
    lodash.at = at;
    lodash.before = before;
    lodash.bind = bind;
    lodash.bindAll = bindAll;
    lodash.bindKey = bindKey;
    lodash.callback = callback;
    lodash.chain = chain;
    lodash.chunk = chunk;
    lodash.compact = compact;
    lodash.constant = constant;
    lodash.countBy = countBy;
    lodash.create = create;
    lodash.curry = curry;
    lodash.curryRight = curryRight;
    lodash.debounce = debounce;
    lodash.defaults = defaults;
    lodash.defaultsDeep = defaultsDeep;
    lodash.defer = defer;
    lodash.delay = delay;
    lodash.difference = difference;
    lodash.drop = drop;
    lodash.dropRight = dropRight;
    lodash.dropRightWhile = dropRightWhile;
    lodash.dropWhile = dropWhile;
    lodash.fill = fill;
    lodash.filter = filter;
    lodash.flatten = flatten;
    lodash.flattenDeep = flattenDeep;
    lodash.flow = flow;
    lodash.flowRight = flowRight;
    lodash.forEach = forEach;
    lodash.forEachRight = forEachRight;
    lodash.forIn = forIn;
    lodash.forInRight = forInRight;
    lodash.forOwn = forOwn;
    lodash.forOwnRight = forOwnRight;
    lodash.functions = functions;
    lodash.groupBy = groupBy;
    lodash.indexBy = indexBy;
    lodash.initial = initial;
    lodash.intersection = intersection;
    lodash.invert = invert;
    lodash.invoke = invoke;
    lodash.keys = keys;
    lodash.keysIn = keysIn;
    lodash.map = map;
    lodash.mapKeys = mapKeys;
    lodash.mapValues = mapValues;
    lodash.matches = matches;
    lodash.matchesProperty = matchesProperty;
    lodash.memoize = memoize;
    lodash.merge = merge;
    lodash.method = method;
    lodash.methodOf = methodOf;
    lodash.mixin = mixin;
    lodash.modArgs = modArgs;
    lodash.negate = negate;
    lodash.omit = omit;
    lodash.once = once;
    lodash.pairs = pairs;
    lodash.partial = partial;
    lodash.partialRight = partialRight;
    lodash.partition = partition;
    lodash.pick = pick;
    lodash.pluck = pluck;
    lodash.property = property;
    lodash.propertyOf = propertyOf;
    lodash.pull = pull;
    lodash.pullAt = pullAt;
    lodash.range = range;
    lodash.rearg = rearg;
    lodash.reject = reject;
    lodash.remove = remove;
    lodash.rest = rest;
    lodash.restParam = restParam;
    lodash.set = set;
    lodash.shuffle = shuffle;
    lodash.slice = slice;
    lodash.sortBy = sortBy;
    lodash.sortByAll = sortByAll;
    lodash.sortByOrder = sortByOrder;
    lodash.spread = spread;
    lodash.take = take;
    lodash.takeRight = takeRight;
    lodash.takeRightWhile = takeRightWhile;
    lodash.takeWhile = takeWhile;
    lodash.tap = tap;
    lodash.throttle = throttle;
    lodash.thru = thru;
    lodash.times = times;
    lodash.toArray = toArray;
    lodash.toPlainObject = toPlainObject;
    lodash.transform = transform;
    lodash.union = union;
    lodash.uniq = uniq;
    lodash.unzip = unzip;
    lodash.unzipWith = unzipWith;
    lodash.values = values;
    lodash.valuesIn = valuesIn;
    lodash.where = where;
    lodash.without = without;
    lodash.wrap = wrap;
    lodash.xor = xor;
    lodash.zip = zip;
    lodash.zipObject = zipObject;
    lodash.zipWith = zipWith;

    // Add aliases.
    lodash.backflow = flowRight;
    lodash.collect = map;
    lodash.compose = flowRight;
    lodash.each = forEach;
    lodash.eachRight = forEachRight;
    lodash.extend = assign;
    lodash.iteratee = callback;
    lodash.methods = functions;
    lodash.object = zipObject;
    lodash.select = filter;
    lodash.tail = rest;
    lodash.unique = uniq;

    // Add functions to `lodash.prototype`.
    mixin(lodash, lodash);

    /*------------------------------------------------------------------------*/

    // Add functions that return unwrapped values when chaining.
    lodash.add = add;
    lodash.attempt = attempt;
    lodash.camelCase = camelCase;
    lodash.capitalize = capitalize;
    lodash.ceil = ceil;
    lodash.clone = clone;
    lodash.cloneDeep = cloneDeep;
    lodash.deburr = deburr;
    lodash.endsWith = endsWith;
    lodash.escape = escape;
    lodash.escapeRegExp = escapeRegExp;
    lodash.every = every;
    lodash.find = find;
    lodash.findIndex = findIndex;
    lodash.findKey = findKey;
    lodash.findLast = findLast;
    lodash.findLastIndex = findLastIndex;
    lodash.findLastKey = findLastKey;
    lodash.findWhere = findWhere;
    lodash.first = first;
    lodash.floor = floor;
    lodash.get = get;
    lodash.gt = gt;
    lodash.gte = gte;
    lodash.has = has;
    lodash.identity = identity;
    lodash.includes = includes;
    lodash.indexOf = indexOf;
    lodash.inRange = inRange;
    lodash.isArguments = isArguments;
    lodash.isArray = isArray;
    lodash.isBoolean = isBoolean;
    lodash.isDate = isDate;
    lodash.isElement = isElement;
    lodash.isEmpty = isEmpty;
    lodash.isEqual = isEqual;
    lodash.isError = isError;
    lodash.isFinite = isFinite;
    lodash.isFunction = isFunction;
    lodash.isMatch = isMatch;
    lodash.isNaN = isNaN;
    lodash.isNative = isNative;
    lodash.isNull = isNull;
    lodash.isNumber = isNumber;
    lodash.isObject = isObject;
    lodash.isPlainObject = isPlainObject;
    lodash.isRegExp = isRegExp;
    lodash.isString = isString;
    lodash.isTypedArray = isTypedArray;
    lodash.isUndefined = isUndefined;
    lodash.kebabCase = kebabCase;
    lodash.last = last;
    lodash.lastIndexOf = lastIndexOf;
    lodash.lt = lt;
    lodash.lte = lte;
    lodash.max = max;
    lodash.min = min;
    lodash.noConflict = noConflict;
    lodash.noop = noop;
    lodash.now = now;
    lodash.pad = pad;
    lodash.padLeft = padLeft;
    lodash.padRight = padRight;
    lodash.parseInt = parseInt;
    lodash.random = random;
    lodash.reduce = reduce;
    lodash.reduceRight = reduceRight;
    lodash.repeat = repeat;
    lodash.result = result;
    lodash.round = round;
    lodash.runInContext = runInContext;
    lodash.size = size;
    lodash.snakeCase = snakeCase;
    lodash.some = some;
    lodash.sortedIndex = sortedIndex;
    lodash.sortedLastIndex = sortedLastIndex;
    lodash.startCase = startCase;
    lodash.startsWith = startsWith;
    lodash.sum = sum;
    lodash.template = template;
    lodash.trim = trim;
    lodash.trimLeft = trimLeft;
    lodash.trimRight = trimRight;
    lodash.trunc = trunc;
    lodash.unescape = unescape;
    lodash.uniqueId = uniqueId;
    lodash.words = words;

    // Add aliases.
    lodash.all = every;
    lodash.any = some;
    lodash.contains = includes;
    lodash.eq = isEqual;
    lodash.detect = find;
    lodash.foldl = reduce;
    lodash.foldr = reduceRight;
    lodash.head = first;
    lodash.include = includes;
    lodash.inject = reduce;

    mixin(lodash, (function() {
      var source = {};
      baseForOwn(lodash, function(func, methodName) {
        if (!lodash.prototype[methodName]) {
          source[methodName] = func;
        }
      });
      return source;
    }()), false);

    /*------------------------------------------------------------------------*/

    // Add functions capable of returning wrapped and unwrapped values when chaining.
    lodash.sample = sample;

    lodash.prototype.sample = function(n) {
      if (!this.__chain__ && n == null) {
        return sample(this.value());
      }
      return this.thru(function(value) {
        return sample(value, n);
      });
    };

    /*------------------------------------------------------------------------*/

    /**
     * The semantic version number.
     *
     * @static
     * @memberOf _
     * @type string
     */
    lodash.VERSION = VERSION;

    // Assign default placeholders.
    arrayEach(['bind', 'bindKey', 'curry', 'curryRight', 'partial', 'partialRight'], function(methodName) {
      lodash[methodName].placeholder = lodash;
    });

    // Add `LazyWrapper` methods for `_.drop` and `_.take` variants.
    arrayEach(['drop', 'take'], function(methodName, index) {
      LazyWrapper.prototype[methodName] = function(n) {
        var filtered = this.__filtered__;
        if (filtered && !index) {
          return new LazyWrapper(this);
        }
        n = n == null ? 1 : nativeMax(nativeFloor(n) || 0, 0);

        var result = this.clone();
        if (filtered) {
          result.__takeCount__ = nativeMin(result.__takeCount__, n);
        } else {
          result.__views__.push({ 'size': n, 'type': methodName + (result.__dir__ < 0 ? 'Right' : '') });
        }
        return result;
      };

      LazyWrapper.prototype[methodName + 'Right'] = function(n) {
        return this.reverse()[methodName](n).reverse();
      };
    });

    // Add `LazyWrapper` methods that accept an `iteratee` value.
    arrayEach(['filter', 'map', 'takeWhile'], function(methodName, index) {
      var type = index + 1,
          isFilter = type != LAZY_MAP_FLAG;

      LazyWrapper.prototype[methodName] = function(iteratee, thisArg) {
        var result = this.clone();
        result.__iteratees__.push({ 'iteratee': getCallback(iteratee, thisArg, 1), 'type': type });
        result.__filtered__ = result.__filtered__ || isFilter;
        return result;
      };
    });

    // Add `LazyWrapper` methods for `_.first` and `_.last`.
    arrayEach(['first', 'last'], function(methodName, index) {
      var takeName = 'take' + (index ? 'Right' : '');

      LazyWrapper.prototype[methodName] = function() {
        return this[takeName](1).value()[0];
      };
    });

    // Add `LazyWrapper` methods for `_.initial` and `_.rest`.
    arrayEach(['initial', 'rest'], function(methodName, index) {
      var dropName = 'drop' + (index ? '' : 'Right');

      LazyWrapper.prototype[methodName] = function() {
        return this.__filtered__ ? new LazyWrapper(this) : this[dropName](1);
      };
    });

    // Add `LazyWrapper` methods for `_.pluck` and `_.where`.
    arrayEach(['pluck', 'where'], function(methodName, index) {
      var operationName = index ? 'filter' : 'map',
          createCallback = index ? baseMatches : property;

      LazyWrapper.prototype[methodName] = function(value) {
        return this[operationName](createCallback(value));
      };
    });

    LazyWrapper.prototype.compact = function() {
      return this.filter(identity);
    };

    LazyWrapper.prototype.reject = function(predicate, thisArg) {
      predicate = getCallback(predicate, thisArg, 1);
      return this.filter(function(value) {
        return !predicate(value);
      });
    };

    LazyWrapper.prototype.slice = function(start, end) {
      start = start == null ? 0 : (+start || 0);

      var result = this;
      if (result.__filtered__ && (start > 0 || end < 0)) {
        return new LazyWrapper(result);
      }
      if (start < 0) {
        result = result.takeRight(-start);
      } else if (start) {
        result = result.drop(start);
      }
      if (end !== undefined) {
        end = (+end || 0);
        result = end < 0 ? result.dropRight(-end) : result.take(end - start);
      }
      return result;
    };

    LazyWrapper.prototype.takeRightWhile = function(predicate, thisArg) {
      return this.reverse().takeWhile(predicate, thisArg).reverse();
    };

    LazyWrapper.prototype.toArray = function() {
      return this.take(POSITIVE_INFINITY);
    };

    // Add `LazyWrapper` methods to `lodash.prototype`.
    baseForOwn(LazyWrapper.prototype, function(func, methodName) {
      var checkIteratee = /^(?:filter|map|reject)|While$/.test(methodName),
          retUnwrapped = /^(?:first|last)$/.test(methodName),
          lodashFunc = lodash[retUnwrapped ? ('take' + (methodName == 'last' ? 'Right' : '')) : methodName];

      if (!lodashFunc) {
        return;
      }
      lodash.prototype[methodName] = function() {
        var args = retUnwrapped ? [1] : arguments,
            chainAll = this.__chain__,
            value = this.__wrapped__,
            isHybrid = !!this.__actions__.length,
            isLazy = value instanceof LazyWrapper,
            iteratee = args[0],
            useLazy = isLazy || isArray(value);

        if (useLazy && checkIteratee && typeof iteratee == 'function' && iteratee.length != 1) {
          // Avoid lazy use if the iteratee has a "length" value other than `1`.
          isLazy = useLazy = false;
        }
        var interceptor = function(value) {
          return (retUnwrapped && chainAll)
            ? lodashFunc(value, 1)[0]
            : lodashFunc.apply(undefined, arrayPush([value], args));
        };

        var action = { 'func': thru, 'args': [interceptor], 'thisArg': undefined },
            onlyLazy = isLazy && !isHybrid;

        if (retUnwrapped && !chainAll) {
          if (onlyLazy) {
            value = value.clone();
            value.__actions__.push(action);
            return func.call(value);
          }
          return lodashFunc.call(undefined, this.value())[0];
        }
        if (!retUnwrapped && useLazy) {
          value = onlyLazy ? value : new LazyWrapper(this);
          var result = func.apply(value, args);
          result.__actions__.push(action);
          return new LodashWrapper(result, chainAll);
        }
        return this.thru(interceptor);
      };
    });

    // Add `Array` and `String` methods to `lodash.prototype`.
    arrayEach(['join', 'pop', 'push', 'replace', 'shift', 'sort', 'splice', 'split', 'unshift'], function(methodName) {
      var func = (/^(?:replace|split)$/.test(methodName) ? stringProto : arrayProto)[methodName],
          chainName = /^(?:push|sort|unshift)$/.test(methodName) ? 'tap' : 'thru',
          retUnwrapped = /^(?:join|pop|replace|shift)$/.test(methodName);

      lodash.prototype[methodName] = function() {
        var args = arguments;
        if (retUnwrapped && !this.__chain__) {
          return func.apply(this.value(), args);
        }
        return this[chainName](function(value) {
          return func.apply(value, args);
        });
      };
    });

    // Map minified function names to their real names.
    baseForOwn(LazyWrapper.prototype, function(func, methodName) {
      var lodashFunc = lodash[methodName];
      if (lodashFunc) {
        var key = lodashFunc.name,
            names = realNames[key] || (realNames[key] = []);

        names.push({ 'name': methodName, 'func': lodashFunc });
      }
    });

    realNames[createHybridWrapper(undefined, BIND_KEY_FLAG).name] = [{ 'name': 'wrapper', 'func': undefined }];

    // Add functions to the lazy wrapper.
    LazyWrapper.prototype.clone = lazyClone;
    LazyWrapper.prototype.reverse = lazyReverse;
    LazyWrapper.prototype.value = lazyValue;

    // Add chaining functions to the `lodash` wrapper.
    lodash.prototype.chain = wrapperChain;
    lodash.prototype.commit = wrapperCommit;
    lodash.prototype.concat = wrapperConcat;
    lodash.prototype.plant = wrapperPlant;
    lodash.prototype.reverse = wrapperReverse;
    lodash.prototype.toString = wrapperToString;
    lodash.prototype.run = lodash.prototype.toJSON = lodash.prototype.valueOf = lodash.prototype.value = wrapperValue;

    // Add function aliases to the `lodash` wrapper.
    lodash.prototype.collect = lodash.prototype.map;
    lodash.prototype.head = lodash.prototype.first;
    lodash.prototype.select = lodash.prototype.filter;
    lodash.prototype.tail = lodash.prototype.rest;

    return lodash;
  }

  /*--------------------------------------------------------------------------*/

  // Export lodash.
  var _ = runInContext();

  // Some AMD build optimizers like r.js check for condition patterns like the following:
  if (typeof define == 'function' && typeof define.amd == 'object' && define.amd) {
    // Expose lodash to the global object when an AMD loader is present to avoid
    // errors in cases where lodash is loaded by a script tag and not intended
    // as an AMD module. See http://requirejs.org/docs/errors.html#mismatch for
    // more details.
    root._ = _;

    // Define as an anonymous module so, through path mapping, it can be
    // referenced as the "underscore" module.
    define(function() {
      return _;
    });
  }
  // Check for `exports` after `define` in case a build optimizer adds an `exports` object.
  else if (freeExports && freeModule) {
    // Export for Node.js or RingoJS.
    if (moduleExports) {
      (freeModule.exports = _)._ = _;
    }
    // Export for Rhino with CommonJS support.
    else {
      freeExports._ = _;
    }
  }
  else {
    // Export for a browser or Rhino.
    root._ = _;
  }
}.call(this));

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],6:[function(require,module,exports){
'use strict';

module.exports = require('./lib')

},{"./lib":11}],7:[function(require,module,exports){
'use strict';

var asap = require('asap/raw');

function noop() {}

// States:
//
// 0 - pending
// 1 - fulfilled with _value
// 2 - rejected with _value
// 3 - adopted the state of another promise, _value
//
// once the state is no longer pending (0) it is immutable

// All `_` prefixed properties will be reduced to `_{random number}`
// at build time to obfuscate them and discourage their use.
// We don't use symbols or Object.defineProperty to fully hide them
// because the performance isn't good enough.


// to avoid using try/catch inside critical functions, we
// extract them to here.
var LAST_ERROR = null;
var IS_ERROR = {};
function getThen(obj) {
  try {
    return obj.then;
  } catch (ex) {
    LAST_ERROR = ex;
    return IS_ERROR;
  }
}

function tryCallOne(fn, a) {
  try {
    return fn(a);
  } catch (ex) {
    LAST_ERROR = ex;
    return IS_ERROR;
  }
}
function tryCallTwo(fn, a, b) {
  try {
    fn(a, b);
  } catch (ex) {
    LAST_ERROR = ex;
    return IS_ERROR;
  }
}

module.exports = Promise;

function Promise(fn) {
  if (typeof this !== 'object') {
    throw new TypeError('Promises must be constructed via new');
  }
  if (typeof fn !== 'function') {
    throw new TypeError('Promise constructor\'s argument is not a function');
  }
  this._40 = 0;
  this._65 = 0;
  this._55 = null;
  this._72 = null;
  if (fn === noop) return;
  doResolve(fn, this);
}
Promise._37 = null;
Promise._87 = null;
Promise._61 = noop;

Promise.prototype.then = function(onFulfilled, onRejected) {
  if (this.constructor !== Promise) {
    return safeThen(this, onFulfilled, onRejected);
  }
  var res = new Promise(noop);
  handle(this, new Handler(onFulfilled, onRejected, res));
  return res;
};

function safeThen(self, onFulfilled, onRejected) {
  return new self.constructor(function (resolve, reject) {
    var res = new Promise(noop);
    res.then(resolve, reject);
    handle(self, new Handler(onFulfilled, onRejected, res));
  });
}
function handle(self, deferred) {
  while (self._65 === 3) {
    self = self._55;
  }
  if (Promise._37) {
    Promise._37(self);
  }
  if (self._65 === 0) {
    if (self._40 === 0) {
      self._40 = 1;
      self._72 = deferred;
      return;
    }
    if (self._40 === 1) {
      self._40 = 2;
      self._72 = [self._72, deferred];
      return;
    }
    self._72.push(deferred);
    return;
  }
  handleResolved(self, deferred);
}

function handleResolved(self, deferred) {
  asap(function() {
    var cb = self._65 === 1 ? deferred.onFulfilled : deferred.onRejected;
    if (cb === null) {
      if (self._65 === 1) {
        resolve(deferred.promise, self._55);
      } else {
        reject(deferred.promise, self._55);
      }
      return;
    }
    var ret = tryCallOne(cb, self._55);
    if (ret === IS_ERROR) {
      reject(deferred.promise, LAST_ERROR);
    } else {
      resolve(deferred.promise, ret);
    }
  });
}
function resolve(self, newValue) {
  // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure
  if (newValue === self) {
    return reject(
      self,
      new TypeError('A promise cannot be resolved with itself.')
    );
  }
  if (
    newValue &&
    (typeof newValue === 'object' || typeof newValue === 'function')
  ) {
    var then = getThen(newValue);
    if (then === IS_ERROR) {
      return reject(self, LAST_ERROR);
    }
    if (
      then === self.then &&
      newValue instanceof Promise
    ) {
      self._65 = 3;
      self._55 = newValue;
      finale(self);
      return;
    } else if (typeof then === 'function') {
      doResolve(then.bind(newValue), self);
      return;
    }
  }
  self._65 = 1;
  self._55 = newValue;
  finale(self);
}

function reject(self, newValue) {
  self._65 = 2;
  self._55 = newValue;
  if (Promise._87) {
    Promise._87(self, newValue);
  }
  finale(self);
}
function finale(self) {
  if (self._40 === 1) {
    handle(self, self._72);
    self._72 = null;
  }
  if (self._40 === 2) {
    for (var i = 0; i < self._72.length; i++) {
      handle(self, self._72[i]);
    }
    self._72 = null;
  }
}

function Handler(onFulfilled, onRejected, promise){
  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;
  this.onRejected = typeof onRejected === 'function' ? onRejected : null;
  this.promise = promise;
}

/**
 * Take a potentially misbehaving resolver function and make sure
 * onFulfilled and onRejected are only called once.
 *
 * Makes no guarantees about asynchrony.
 */
function doResolve(fn, promise) {
  var done = false;
  var res = tryCallTwo(fn, function (value) {
    if (done) return;
    done = true;
    resolve(promise, value);
  }, function (reason) {
    if (done) return;
    done = true;
    reject(promise, reason);
  });
  if (!done && res === IS_ERROR) {
    done = true;
    reject(promise, LAST_ERROR);
  }
}

},{"asap/raw":2}],8:[function(require,module,exports){
'use strict';

var Promise = require('./core.js');

module.exports = Promise;
Promise.prototype.done = function (onFulfilled, onRejected) {
  var self = arguments.length ? this.then.apply(this, arguments) : this;
  self.then(null, function (err) {
    setTimeout(function () {
      throw err;
    }, 0);
  });
};

},{"./core.js":7}],9:[function(require,module,exports){
'use strict';

//This file contains the ES6 extensions to the core Promises/A+ API

var Promise = require('./core.js');

module.exports = Promise;

/* Static Functions */

var TRUE = valuePromise(true);
var FALSE = valuePromise(false);
var NULL = valuePromise(null);
var UNDEFINED = valuePromise(undefined);
var ZERO = valuePromise(0);
var EMPTYSTRING = valuePromise('');

function valuePromise(value) {
  var p = new Promise(Promise._61);
  p._65 = 1;
  p._55 = value;
  return p;
}
Promise.resolve = function (value) {
  if (value instanceof Promise) return value;

  if (value === null) return NULL;
  if (value === undefined) return UNDEFINED;
  if (value === true) return TRUE;
  if (value === false) return FALSE;
  if (value === 0) return ZERO;
  if (value === '') return EMPTYSTRING;

  if (typeof value === 'object' || typeof value === 'function') {
    try {
      var then = value.then;
      if (typeof then === 'function') {
        return new Promise(then.bind(value));
      }
    } catch (ex) {
      return new Promise(function (resolve, reject) {
        reject(ex);
      });
    }
  }
  return valuePromise(value);
};

Promise.all = function (arr) {
  var args = Array.prototype.slice.call(arr);

  return new Promise(function (resolve, reject) {
    if (args.length === 0) return resolve([]);
    var remaining = args.length;
    function res(i, val) {
      if (val && (typeof val === 'object' || typeof val === 'function')) {
        if (val instanceof Promise && val.then === Promise.prototype.then) {
          while (val._65 === 3) {
            val = val._55;
          }
          if (val._65 === 1) return res(i, val._55);
          if (val._65 === 2) reject(val._55);
          val.then(function (val) {
            res(i, val);
          }, reject);
          return;
        } else {
          var then = val.then;
          if (typeof then === 'function') {
            var p = new Promise(then.bind(val));
            p.then(function (val) {
              res(i, val);
            }, reject);
            return;
          }
        }
      }
      args[i] = val;
      if (--remaining === 0) {
        resolve(args);
      }
    }
    for (var i = 0; i < args.length; i++) {
      res(i, args[i]);
    }
  });
};

Promise.reject = function (value) {
  return new Promise(function (resolve, reject) {
    reject(value);
  });
};

Promise.race = function (values) {
  return new Promise(function (resolve, reject) {
    values.forEach(function(value){
      Promise.resolve(value).then(resolve, reject);
    });
  });
};

/* Prototype Methods */

Promise.prototype['catch'] = function (onRejected) {
  return this.then(null, onRejected);
};

},{"./core.js":7}],10:[function(require,module,exports){
'use strict';

var Promise = require('./core.js');

module.exports = Promise;
Promise.prototype['finally'] = function (f) {
  return this.then(function (value) {
    return Promise.resolve(f()).then(function () {
      return value;
    });
  }, function (err) {
    return Promise.resolve(f()).then(function () {
      throw err;
    });
  });
};

},{"./core.js":7}],11:[function(require,module,exports){
'use strict';

module.exports = require('./core.js');
require('./done.js');
require('./finally.js');
require('./es6-extensions.js');
require('./node-extensions.js');
require('./synchronous.js');

},{"./core.js":7,"./done.js":8,"./es6-extensions.js":9,"./finally.js":10,"./node-extensions.js":12,"./synchronous.js":13}],12:[function(require,module,exports){
'use strict';

// This file contains then/promise specific extensions that are only useful
// for node.js interop

var Promise = require('./core.js');
var asap = require('asap');

module.exports = Promise;

/* Static Functions */

Promise.denodeify = function (fn, argumentCount) {
  if (
    typeof argumentCount === 'number' && argumentCount !== Infinity
  ) {
    return denodeifyWithCount(fn, argumentCount);
  } else {
    return denodeifyWithoutCount(fn);
  }
};

var callbackFn = (
  'function (err, res) {' +
  'if (err) { rj(err); } else { rs(res); }' +
  '}'
);
function denodeifyWithCount(fn, argumentCount) {
  var args = [];
  for (var i = 0; i < argumentCount; i++) {
    args.push('a' + i);
  }
  var body = [
    'return function (' + args.join(',') + ') {',
    'var self = this;',
    'return new Promise(function (rs, rj) {',
    'var res = fn.call(',
    ['self'].concat(args).concat([callbackFn]).join(','),
    ');',
    'if (res &&',
    '(typeof res === "object" || typeof res === "function") &&',
    'typeof res.then === "function"',
    ') {rs(res);}',
    '});',
    '};'
  ].join('');
  return Function(['Promise', 'fn'], body)(Promise, fn);
}
function denodeifyWithoutCount(fn) {
  var fnLength = Math.max(fn.length - 1, 3);
  var args = [];
  for (var i = 0; i < fnLength; i++) {
    args.push('a' + i);
  }
  var body = [
    'return function (' + args.join(',') + ') {',
    'var self = this;',
    'var args;',
    'var argLength = arguments.length;',
    'if (arguments.length > ' + fnLength + ') {',
    'args = new Array(arguments.length + 1);',
    'for (var i = 0; i < arguments.length; i++) {',
    'args[i] = arguments[i];',
    '}',
    '}',
    'return new Promise(function (rs, rj) {',
    'var cb = ' + callbackFn + ';',
    'var res;',
    'switch (argLength) {',
    args.concat(['extra']).map(function (_, index) {
      return (
        'case ' + (index) + ':' +
        'res = fn.call(' + ['self'].concat(args.slice(0, index)).concat('cb').join(',') + ');' +
        'break;'
      );
    }).join(''),
    'default:',
    'args[argLength] = cb;',
    'res = fn.apply(self, args);',
    '}',
    
    'if (res &&',
    '(typeof res === "object" || typeof res === "function") &&',
    'typeof res.then === "function"',
    ') {rs(res);}',
    '});',
    '};'
  ].join('');

  return Function(
    ['Promise', 'fn'],
    body
  )(Promise, fn);
}

Promise.nodeify = function (fn) {
  return function () {
    var args = Array.prototype.slice.call(arguments);
    var callback =
      typeof args[args.length - 1] === 'function' ? args.pop() : null;
    var ctx = this;
    try {
      return fn.apply(this, arguments).nodeify(callback, ctx);
    } catch (ex) {
      if (callback === null || typeof callback == 'undefined') {
        return new Promise(function (resolve, reject) {
          reject(ex);
        });
      } else {
        asap(function () {
          callback.call(ctx, ex);
        })
      }
    }
  }
};

Promise.prototype.nodeify = function (callback, ctx) {
  if (typeof callback != 'function') return this;

  this.then(function (value) {
    asap(function () {
      callback.call(ctx, null, value);
    });
  }, function (err) {
    asap(function () {
      callback.call(ctx, err);
    });
  });
};

},{"./core.js":7,"asap":1}],13:[function(require,module,exports){
'use strict';

var Promise = require('./core.js');

module.exports = Promise;
Promise.enableSynchronous = function () {
  Promise.prototype.isPending = function() {
    return this.getState() == 0;
  };

  Promise.prototype.isFulfilled = function() {
    return this.getState() == 1;
  };

  Promise.prototype.isRejected = function() {
    return this.getState() == 2;
  };

  Promise.prototype.getValue = function () {
    if (this._65 === 3) {
      return this._55.getValue();
    }

    if (!this.isFulfilled()) {
      throw new Error('Cannot get a value of an unfulfilled promise.');
    }

    return this._55;
  };

  Promise.prototype.getReason = function () {
    if (this._65 === 3) {
      return this._55.getReason();
    }

    if (!this.isRejected()) {
      throw new Error('Cannot get a rejection reason of a non-rejected promise.');
    }

    return this._55;
  };

  Promise.prototype.getState = function () {
    if (this._65 === 3) {
      return this._55.getState();
    }
    if (this._65 === -1 || this._65 === -2) {
      return 0;
    }

    return this._65;
  };
};

Promise.disableSynchronous = function() {
  Promise.prototype.isPending = undefined;
  Promise.prototype.isFulfilled = undefined;
  Promise.prototype.isRejected = undefined;
  Promise.prototype.getValue = undefined;
  Promise.prototype.getReason = undefined;
  Promise.prototype.getState = undefined;
};

},{"./core.js":7}],14:[function(require,module,exports){
'use strict';

var dialog = require('./dialog');

var $cache = {};

function initializeCache() {
    $cache.primary = $('#primary');
    $cache.checkoutForm = $cache.primary.find('.checkout-shipping.address').length > 0 ? $cache.primary.find('.checkout-shipping.address') : $cache.primary.find('.checkout-billing.address');
    $cache.submitFormButton = $cache.checkoutForm.find('button.saveShipping').length > 0 ? $cache.checkoutForm.find('button.saveShipping') : $cache.checkoutForm.find('button[name$=_save]');
    $cache.validatoionDialog = $cache.primary.find('#address-validation-dialog');
    $cache.byPassDAV = $cache.checkoutForm.find('.bypassDAV');
    $cache.address1 = $cache.checkoutForm.find('input[name$="_address1"]');
    $cache.address2 = $cache.checkoutForm.find('input[name$="_address2"]');
    $cache.city = $cache.checkoutForm.find('input[name$="_city"]');
    $cache.stateCode = $cache.checkoutForm.find('select[id$="_state"]');
    $cache.countryCode = $cache.checkoutForm.find('select[id$="_country"]');
    $cache.postalCode = $cache.checkoutForm.find('input[name$="_postal"]');
}

function initializeDom() {
    if ($cache.validatoionDialog.length > 0) {

        var dlg = dialog.create({
            target: $cache.validatoionDialog,
            options: {
                width: 300,
                dialogClass: 'address-validation-dialog',
                open: initializeEvents
            }
        });

        $cache.validatoionDialog.show();
        dlg.dialog('open');
    }
}

function initializeEvents() {

    $cache.validatoionDialog.on('click', '#original-address-edit', function () {
        $cache.validatoionDialog.dialog('close');
        $('.shipping-address-field-section').removeClass('hide');
        $('.selected-shipping-address').addClass('hide');
        $('.new-address-field').addClass('hide');

        /*jQuery('html, body').animate({
            scrollTop: $('#navigation').position().top
        }, 500);*/
    });
    $cache.validatoionDialog.on('click', '#suggested-address-edit-1', function () {

        $('.shipping-address-field-section').removeClass('hide');
        $('.selected-shipping-address').addClass('hide');
    });

    $cache.validatoionDialog.on('click', '#ship-to-original-address', function () {

        $cache.validatoionDialog.dialog('close');
        $cache.byPassDAV.attr('value', 'true');
        $cache.submitFormButton.click();
    });

    $cache.validatoionDialog.on('click', '[id|="suggested-address-edit"]', function () {
        var selectedAddress = $(this).data('address').split('||');
        $cache.address1.val(selectedAddress[0]);
        if (selectedAddress[1] !== 'undefined' && selectedAddress[1] !== '') {
            $cache.address2.val(selectedAddress[1]);
        }
        $cache.city.val(selectedAddress[2]);
        $cache.stateCode.val(selectedAddress[3]);
        $cache.countryCode.val(selectedAddress[4]);
        $cache.postalCode.val(selectedAddress[5]);
        $cache.validatoionDialog.dialog('close');
        jQuery('html, body').animate({
            scrollTop: $('#navigation').position().top
        }, 500);
    });

    $cache.validatoionDialog.on('click', '[id|="ship-to-address-selected"]', function () {
        var selectedAddress = $(this).data('address').split('||');
        $cache.address1.val(selectedAddress[0]);
        if (selectedAddress[1] !== 'undefined' && selectedAddress[1] !== '') {
            $cache.address2.val(selectedAddress[1]);
        }
        $cache.city.val(selectedAddress[2]);
        $cache.stateCode.val(selectedAddress[3]);
        $cache.countryCode.val(selectedAddress[4]);
        $cache.postalCode.val(selectedAddress[5]);
        $cache.byPassDAV.attr('value', 'true');
        $cache.validatoionDialog.dialog('close');

        $cache.submitFormButton.click();
    });
}

exports.init = function () {
    initializeCache();
    initializeDom();
};

},{"./dialog":23}],15:[function(require,module,exports){
'use strict';

var progress = require('./progress'),
    util = require('./util');

var currentRequests = [];

/**
 * @function
 * @description Ajax request to get json response
 * @param {Boolean} async  Asynchronous or not
 * @param {String} url URI for the request
 * @param {Object} data Name/Value pair data request
 * @param {Function} callback  Callback function to be called
 */
var getJson = function getJson(options) {
    options.url = util.toAbsoluteUrl(options.url);
    // return if no url exists or url matches a current request
    if (!options.url || currentRequests[options.url]) {
        return;
    }

    currentRequests[options.url] = true;

    // make the server call
    $.ajax({
        dataType: 'json',
        url: options.url,
        async: typeof options.async === 'undefined' || options.async === null ? true : options.async,
        data: options.data || {},
        type: options.type || 'GET' //PREVAIL-Added to handle security form issues.
    })
    // success
    .done(function (response) {
        if (options.callback) {
            options.callback(response);
        }
    })
    // failed
    .fail(function (xhr, textStatus) {
        if (textStatus === 'parsererror') {
            window.alert(Resources.BAD_RESPONSE);
        }
        if (options.callback) {
            options.callback(null);
        }
    })
    // executed on success or fail
    .always(function () {
        // remove current request from hash
        if (currentRequests[options.url]) {
            delete currentRequests[options.url];
        }
    });
};
/**
 * @function
 * @description ajax request to load html response in a given container
 * @param {String} url URI for the request
 * @param {Object} data Name/Value pair data request
 * @param {Function} callback  Callback function to be called
 * @param {Object} target Selector or element that will receive content
 */
var load = function load(options) {
    options.url = util.toAbsoluteUrl(options.url);
    // return if no url exists or url matches a current request
    if (!options.url || currentRequests[options.url]) {
        return;
    }

    currentRequests[options.url] = true;

    // make the server call
    $.ajax({
        dataType: 'html',
        url: util.appendParamToURL(options.url, 'format', 'ajax'),
        data: options.data,
        xhrFields: {
            withCredentials: true
        },
        type: options.type || 'GET' //PREVAIL-Added to handle security form issues.
    }).done(function (response) {
        // success
        if (options.target) {
            $(options.target).empty().html(response);
        }
        if (options.callback) {
            options.callback(response);
        }
    }).fail(function (xhr, textStatus) {
        // failed
        if (textStatus === 'parsererror') {
            window.alert(Resources.BAD_RESPONSE);
        }
        options.callback(null, textStatus);
    }).always(function () {
        progress.hide();
        // remove current request from hash
        if (currentRequests[options.url]) {
            delete currentRequests[options.url];
        }
    });
};

exports.getJson = getJson;
exports.load = load;

},{"./progress":52,"./util":63}],16:[function(require,module,exports){
/**
 *    (c) 2009-2014 Demandware Inc.
 *    Subject to standard usage terms and conditions
 *    For all details and documentation:
 *    https://bitbucket.com/demandware/sitegenesis
 */
'use strict';

var countries = require('./countries'),
    dialog = require('./dialog'),
    minicart = require('./minicart'),
    page = require('./page'),
    searchplaceholder = require('./searchplaceholder'),
    searchsuggest = require('./searchsuggest'),
    tooltip = require('./tooltip'),
    util = require('./util'),
    validator = require('./validator'),
    megamenu = require('./megamenu'),
    headerinit = require('./headerinit'),
    uievents = require('./uievents'),

//progress = require('./progress'),
tls = require('./tls'),
    tagmanager = require('./tagmanager'),
    quickviewAsset = require('./quickview-asset');

// if jQuery has not been loaded, load from google cdn
if (!window.jQuery) {
    var s = document.createElement('script');
    s.setAttribute('src', 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js');
    s.setAttribute('type', 'text/javascript');
    document.getElementsByTagName('head')[0].appendChild(s);
}

require('./jquery-ext')();
require('./cookieprivacy')();
require('./captcha')();

var $ = window.jQuery;

function resetPasswordEvents() {
    $('body').find('.PasswordResetDialog .field-wrapper input').off('change').on('click change', function () {
        $(this).removeClass('errorclient');
        $(this).closest('.passwordreset').find('#message').hide();
        $(this).closest('.formfield').find('.label').find('span.errorclient').remove();
        $(this).closest('.formfield').find('.form-row , .label span').removeClass('inputlabel');
    });
    if ($('.PasswordResetDialog').length > 0) {
        $('.PasswordResetDialog').find('.formfield').each(function () {
            if ($(this).find('.field-wrapper .clearbutton').length == 0 && $(this).find('.field-wrapper input[type="text"]').length > 0 || $(this).find('.field-wrapper input[type="password"]').length > 0) {
                $(this).find('.field-wrapper').append('<a class="clearbutton"></a>');
            }
        });
    }
    $('body').find('.PasswordResetDialog a.clearbutton').on('click', function () {
        $(this).closest('.field-wrapper').find('span').remove();
        $(this).closest('.field-wrapper').find('.required').removeClass('errorclient');
        $(this).closest('.formfield ').find('.form-row , .label span').removeClass('inputlabel');
        $(this).closest('.formfield').find('input').val('');
        $(this).closest('.formfield').find('a.clearbutton').hide();
        $(this).closest('.formfield').find('span.logerror , .existing_register').hide();
    });
    // Attach keypress handler to input box.  Submit form if user presses 'enter' key.
    $('body').find('.PasswordResetDialog input.resetold').keypress(function (e) {
        if (e.which == 13) {
            //jQuery('#sendBtn').click();
            return false;
        }
        return true;
    });
    $('body').find('.PasswordResetDialog .field-wrapper input').on('keyup input blur', function () {
        if ($(this).val() != undefined) {
            if ($(this).val().length > 0) {
                $(this).closest('.formfield').find('a.clearbutton').show();
            } else {
                $(this).closest('.formfield').find('a.clearbutton').hide();
            }
        }
    });
    var $requestPasswordForm = $('[name$="_requestpassword"]'),
        $submit = $requestPasswordForm.find('[name$="_requestpassword_send"]');
    $($submit).on('click', function (e) {
        if (!$requestPasswordForm.valid()) {
            return;
        }
        e.preventDefault();
        dialog.submit($submit.attr('name'));
        setTimeout(function () {
            resetPasswordEvents();
        }, 1300);
    });
    validator.init();
}

function initializeEvents() {
    var isSafari = navigator.userAgent.indexOf('Safari') > -1;
    var isChrome = navigator.userAgent.indexOf('Chrome') > -1;
    var isExplorer = navigator.userAgent.indexOf('MSIE') > -1;
    var isFirefox = navigator.userAgent.indexOf('Firefox') > -1;
    //var is_safari = navigator.userAgent.indexOf('Safari') > -1;
    var isOpera = navigator.userAgent.toLowerCase().indexOf('op') > -1;
    if (isChrome && isSafari) {
        isSafari = false;
    }
    if (isChrome && isOpera) {
        isChrome = false;
    }
    if (isSafari) {
        $('body').addClass('safari-browser');
    } else if (isFirefox) {
        $('body').addClass('firefox-browser');
    } else if (isExplorer) {
        $('body').addClass('ie-browser');
    } else if (isChrome) {
        $('body').addClass('chrome-browser');
    }
    if (navigator.userAgent.indexOf('Mac OS X') != -1) {
        $('body').addClass('mac');
    } else {
        $('body').addClass('pc');
    }
    var controlKeys = ['8', '13', '46', '45', '36', '35', '38', '37', '40', '39'];

    //PREVAIL-Added to handle form dialog boxes server side issues.
    $('body').on('click', '.dialogify, [data-dlg-options], [data-dlg-action]', require('./dialogify').setDialogify).on('keydown', 'textarea[data-character-limit]', function (e) {
        var text = $.trim($(this).val()),
            charsLimit = $(this).data('character-limit'),
            charsUsed = text.length;

        if (charsUsed >= charsLimit && controlKeys.indexOf(e.which.toString()) < 0) {
            e.preventDefault();
        }
    }).on('change keyup mouseup', 'textarea[data-character-limit]', function () {
        var text = $.trim($(this).val()),
            charsLimit = $(this).data('character-limit'),
            charsUsed = text.length,
            charsRemain = charsLimit - charsUsed;

        if (charsRemain < 0) {
            $(this).val(text.slice(0, charsRemain));
            charsRemain = 0;
        }

        $(this).next('div.char-count').find('.char-remain-count').html(charsRemain);
    });

    /**
     * initialize search suggestions, pending the value of the site preference(enhancedSearchSuggestions)
     * this will either init the legacy(false) or the beta versions(true) of the the search suggest feature.
     * */

    /*** minicart hide ***/
    var minicartlink = $('#headerwrapper #header .row.column1 #minicart .minicarttotal .minicarticon-cont .minicart-button');
    minicartlink.on('click', function () {
        if ($(window).width() < 959) {
            $('#minicart .minicartcontent').hide();
        }
    });

    var $searchContainer = $('.site-suggestion-section');
    searchsuggest.init($searchContainer, Resources.SIMPLE_SEARCH);

    $('#password-reset').on('click', function (e) {
        e.preventDefault();
        dialog.open({
            url: $(e.target).attr('href'),
            options: {
                //Start JIRA PREV-334 : Title is missing for the Forgot password overlay.
                title: Resources.FORGOT_PASSWORD,
                width: 475,
                dialogClass: 'PasswordResetDialog',
                open: function open() {
                    resetPasswordEvents();
                }
            }
        });
    });

    // print handler
    $('.print-page').on('click', function () {
        window.print();
        return false;
    });

    $('.mobile-banner-stuff').on('click', function (e) {
        e.preventDefault();
        if ($('.calloutexist').length > 0) {
            var promoCallOut = $('.calloutexist').html();
            var bannerDialogOpen = dialog.create({
                target: '#calloutexist',
                options: {
                    dialogClass: 'dialogBanner'
                }
            });
            util.scrollBrowser($('html').offset().top);
            bannerDialogOpen.html(promoCallOut);
            $('.ui-dialog-content:visible').each(function () {
                $(this).dialog('option', 'position', $(this).dialog('option', 'position'));
            });
            bannerDialogOpen.dialog('open');
        }
    });
    $(document).on('click', '.dialogBanner #closeBtn01', function (e) {
        e.preventDefault();
        $(this).parents('.dialogBanner').find('.ui-dialog-titlebar-close').trigger('click');
    });
    //footer change region event
    $('.change-region-footer').hover(function () {
        $('.domainswitch').show();
    }, function () {
        $('.domainswitch').hide();
    });
    $('.domainswitch').hover(function () {
        $(this).show();
    }, function () {
        $(this).hide();
    });
    $('div.pseudo_self_label').each(function () {
        var $this = jQuery(this);
        var $input = $this.children('input[type="text"]');
        $input.data('toggle', $input.val());
        //used to add a class to placeholder for styling
        if ($('.emailinput.emailfooter').attr('data-placeholder') == $input.val()) {
            $('.emailinput.emailfooter').addClass('footerplace');
        }
        /**
         * if(jQuery.trim($input.val()) != "") {
             * $input.data('toggle').hide(); } else
         *if($input.data('toggle') &&
         * $input.data('toggle').size() >= 1) {
             * $input.val($input.data('toggle')); }
         */
        $input.blur(function () {
            var $this = jQuery(this);
            if (jQuery.trim($this.val()) == '') {
                // $this.data('toggle').show();
                $this.val($this.data('toggle'));
                //used to add a class to placeholder for styling
                if ($('.emailinput.emailfooter').attr('data-placeholder') == $input.val()) {
                    $('.emailinput.emailfooter').addClass('footerplace');
                }
            }
        });
        $input.focus(function () {
            $('.emailinput.emailfooter').removeClass('footerplace');
            var $this = jQuery(this);
            if ($this.data('toggle') && jQuery.trim($this.val()) == jQuery.trim($this.data('toggle'))) {
                // $this.data('toggle').show();
                $this.val('');
            }
        });
        $this.parents('form').submit(function () {
            var $this = jQuery(this);
            $this.find('div.pseudo_self_label input').each(function () {
                var $this = jQuery(this);
                if ($this.data('toggle') && $this.data('toggle') == $this.val()) {
                    $this.val('');
                }
            });
        });
    });

    //
    $('body').on('submit', '#customercontactus', function (e) {
        e.preventDefault();
        var res = $('#g-recaptcha-response').val();
        if (res == '' || res == undefined || res.length == 0) {
            $('.recaprcha-error').removeClass('hide');
            return false;
        }
        var $form = $(this);
        if ($form.valid()) {
            // set the action
            $('<input/>').attr({
                name: $form.attr('action'),
                type: 'hidden'
            }).appendTo($form);
            // serialize the form and get the post url
            var data = $form.serialize();
            var url = $form.attr('action');
            // make sure the server knows this is an ajax request
            if (data.indexOf('ajax') === -1) {
                data += '&format=ajax';
            }

            $.ajax({
                url: url,
                type: 'POST',
                dataType: 'html',
                data: data
            }).done(function (response) {
                if (navigator.userAgent.match(/(\(iPod|\(iPhone|\(iPad)/)) {
                    window.setTimeout(function () {
                        window.scrollTo(0, 0);
                    }, 0);
                }
                $('.column.colspan2').empty().html(response);
            });
        }
    });

    $('.first-level').on('click', function () {
        $(this).children('.second-level').toggle();
        $(this).toggleClass('list-active');
    });
    $('.first-level li.active').closest('.first-level').click();
    $('.first-level li a').click(function (event) {
        event.stopPropagation();
    });
    $('.first-levell').on('click', function () {
        $(this).children('.second-levell').toggle();
        //$(this).toggleClass('list-active');
    });
    $(window).load(function () {
        var currentItem = null;
        if ($('.newMargin').length > 0) {
            currentItem = $('.newMargin');
            currentItem.parents('.cell-header').addClass('new-margin-update');
        }
        if ($('.newMargin-one').length > 0) {
            currentItem = $('.newMargin-one');
            currentItem.parents('.cell-header').addClass('new-margin-updateone');
        }
        if ($('.vmc-manufacturer-margin').length > 0) {
            currentItem = $('.vmc-manufacturer-margin');
            currentItem.parents('.cell-header').addClass('manufacture-margin-update');
        }
        if ($('.strikemaster-paragraph').length > 0) {
            currentItem = $('.strikemaster-paragraph');
            currentItem.parents('.cell-header').addClass('strikemaster-margin-update');
        }
        var spancountleftnav = $('.pt_customerservice .customer .column .contentbox .left-nav-top .contentboxcontent .nav-group li span');
        spancountleftnav.each(function () {
            if ($(this).height() > 19) {
                $(this).addClass('newone');
            } else {
                $(this).removeClass('newone');
            }
        });
        spancountleftnav = $('.pt_customerservice .style-cservice .column .contentbox .left-nav-top .contentboxcontent .nav-group li span');
        spancountleftnav.each(function () {
            if ($(this).height() > 19) {
                $(this).addClass('newone');
            } else {
                $(this).removeClass('newone');
            }
        });
        if ($('.shadow-box').length > 0) {
            currentItem = $('.shadow-box');
            currentItem.parents('.pt_customerservice').addClass('pt_customerservice-box');
        }
        if ($('.zero-margin').length > 0) {
            currentItem = $('.zero-margin');
            currentItem.parents('.cell-header').addClass('zero-margin-cell-header');
        }
        if ($('.checkoutloginsignin').find('.TokenExpired').length > 0) {
            $('#password-reset').trigger('click');
            setTimeout(function () {
                $('#dialog-container').find('p').hide();
                if ($('#dialog-container #PasswordResetForm').length > 0) {
                    $('#dialog-container #PasswordResetForm').prepend('<div class="TokenExpireError">We&#39;re sorry, the link to reset your password has expired. Reset Password links expire after 30 minutes for security purposes. Please submit your email again.</div>');
                    $('#dialog-container #PasswordResetForm .passwordemail').prepend('<div class="Emaillabel">Enter your email address to get reset password instructions sent to your inbox.</div>');
                }
            }, 2000);
        }
    });
    $(window).resize(function () {
        if ($(window).width() > 960) {
            if ($('#container').hasClass('js-container-active')) {
                $('#container, .open-menu-wrap').removeAttr('style');
                $('#container').removeClass('js-container-active').find('.menu-toggle').removeClass('js-menu-toggle');
                $('#main, #footernew').unwrap();
                $('#brand-tabs-header').unwrap();
            }
            //megamenu.init();
        }
    });
    // add generic toggle functionality
    $('.toggle').next('.toggle-content').hide();
    if ($('.pt_checkout').length == 0) {
        if ($('.pt_customerservice').length == 0) {
            $('.toggle').off('click').on('click', function (e) {
                e.preventDefault(); //JIRA PREV-90 : When click on advance search from gift registry login page, focus is happening towards top of the page.
                $(this).toggleClass('expanded').next('ul, .toggle-content').toggle();
            });
        }
    }
    // toggle for customer service FAQ
    if ($('.pt_customerservice').length > 0) {
        $('.section a.toggle').off('click').on('click', function (e) {
            e.preventDefault();
            $(this).parent().next('.reveal').slideToggle('fast', function () {});
            return false;
        });
    }

    $('#footernew .footer-main #linkheading').click(function () {
        $(this).toggleClass('show');
        $(this).closest('div').toggleClass('expanded');
        if ($('#about, #customer-service, #More-ways-to-shop').hasClass('expanded')) {
            $('#rapala_insider').addClass('new');
        } else {
            $('#rapala_insider').removeClass('new');
        }
        if ($('#busniness').hasClass('expanded')) {
            $('#follow_us').addClass('new');
        } else {
            $('#follow_us').removeClass('new');
        }
    });

    function isTouchDevice() {
        return true == ('ontouchstart' in window || window.DocumentTouch && document instanceof DocumentTouch);
    }

    if (isTouchDevice() === true) {
        //alert('Touch Device'); //your logic for touch device here
        $('.old-swim').removeClass('show').addClass('hide');
        $('.new-swim').removeClass('hide').addClass('show');
    } else {
        //alert('Not a Touch Device');//your logic for non touch device here
        $('.old-swim').removeClass('hide').addClass('show');
        $('.new-swim').removeClass('show').addClass('hide');
    }
    $(window).bind('scroll resize', function () {
        if ($('.rapala_device').length > 0 && $(window).width() < 768) {
            if ($('#footerEmailDialog.ui-dialog-content').length > 0) {
                $('.ui-dialog').css({ 'left': ($(document).width() - $('.ui-dialog').width()) / 2, 'top': '100px' });
            } else {
                $('.ui-dialog').css({ 'left': ($(document).width() - $('.ui-dialog').width()) / 2 });
            }
        }
    });

    $('.tabsHeader').bind('click', function () {
        var currentItem = $(this);
        currentItem.closest('.mobile-tabs-section').toggleClass('active');
    });

    $(document).on('click', '.upgradenow-link', function () {
        $('html, body').animate({
            scrollTop: $('.viploginsignin').offset().top
        }, 2000);
    });
    $('.menu-category li .menu-item-toggle').on('click', function (e) {
        e.preventDefault();
        var $parentLi = $(e.target).closest('li');
        $parentLi.siblings('li').removeClass('active').find('.menu-item-toggle').removeClass('fa-chevron-up active').addClass('fa-chevron-right');
        $parentLi.toggleClass('active');
        $(e.target).toggleClass('fa-chevron-right fa-chevron-up active');
    });

    $('body').on('click', '.dialog-close', function () {
        $(this).closest('.ui-dialog').find('.ui-dialog-titlebar-close').trigger('click');
    });
    if ($(window).width() > 959) {
        var item = $('.sign-up-blk'),
            clickItem = item.find('.userlogin');

        clickItem.on('click', function () {
            return false;
        });
    }

    $('.email-subscribe').submit(function (e) {
        e.preventDefault();
        var $form = $(this);
        if ($form.valid()) {
            // set the action
            $('<input/>').attr({
                name: $form.attr('action'),
                type: 'hidden'
            }).appendTo($form);
            // serialize the form and get the post url
            var data = $form.serialize();
            var url = $form.attr('action');
            // make sure the server knows this is an ajax request
            if (data.indexOf('ajax') === -1) {
                data += '&format=ajax';
            }

            dialog.open({
                url: url,
                data: data,
                options: {
                    title: 'email',
                    width: 800,
                    height: 530,
                    dialogClass: 'footerEmailDialog'
                },
                open: function open() {}
            });
        }
    });
}

/**
 * @private
 * @function
 * @description Adds class ('js') to html for css targeting and loads js specific styles.
 */
function initializeDom() {
    // add class to html for css targeting
    $('html').addClass('js');
    if (SitePreferences.LISTING_INFINITE_SCROLL) {
        $('html').addClass('infinite-scroll');
    }
    // load js specific styles//
    util.limitCharacters();
}

var pages = {
    account: require('./pages/account'),
    cart: require('./pages/cart'),
    checkout: require('./pages/checkout'),
    compare: require('./pages/compare'),
    product: require('./pages/product'),
    registry: require('./pages/registry'),
    search: require('./pages/search'),
    storefront: require('./pages/storefront'),
    wishlist: require('./pages/wishlist'),
    rapalainsider: require('./pages/rapalainsider'),
    storelocator: require('./pages/storelocator'),
    international: require('./pages/international'),
    blog: require('./pages/blog')
};

var app = {
    init: function init() {
        if (typeof geoipCountryCode == 'function') {
            var IPGeoCode = geoipCountryCode();
            var allowedCountries = $('.allowed-countries').text();
            if (allowedCountries == null || allowedCountries == 'null' || allowedCountries == 'undefined') {
                allowedCountries = 'US';
            }
            if (allowedCountries.indexOf(IPGeoCode) == -1) {
                $('html').addClass('no-pricing');
                $('.non-usa-alert').removeClass('hide');
                $('.ui-customer,.dividers.pipe,.ui-email,.ui-storelocator,.ui-wishlist,.ui-login,.handle-non-us,.welcomemessage,.anonymous,.site-suggestion-section').addClass('hide');
                $('.minicart, .promotional-message, .product-colors-size').css({ 'display': 'none' });
                $('#customer-returns,#customer-shipping,#customer-warranty').addClass('hide');
                $('.addtowishlist').addClass('hide');
                $('.non-us-contactus geo,.us-contactus').addClass('hide');
                $('.non-us-contactus-non').removeClass('hide');
                $('.desktopHide.handle-non-us.geo').removeClass('desktopHide');
                $('.mobileHide.handle-non-us.geo').removeClass('mobileHide');
                var contactusNonusUrl = Urls.contactusnonus;
                $('.handle-non-us.geo').addClass('hide');
                $('.ca-contactus-link').attr('href', contactusNonusUrl);
                $('.cust-non-us').find('a').attr('href', contactusNonusUrl);
                $('.ui-login,.magnifier-icon').css({ 'background': 'none' });
                $('.handle-non-us-vh').addClass('vhide');
                $('.subscribe').prop('disabled', true);
                setTimeout(function () {
                    $('.product-promo, .newrecommendation').css({ 'display': 'none' });
                }, 5000);
            }
        }

        // Check TLS status if indicated by site preference
        var checkTLS = SitePreferences.CHECK_TLS;
        if (checkTLS == true) {
            var tlsBroswer = tls.getUserAgent();
            if (tlsBroswer.name == 'Chrome' && tlsBroswer.version < 22 || tlsBroswer.name == 'Firefox' && tlsBroswer.version < 27 || tlsBroswer.name == 'Safari' && tlsBroswer.version < 5 || tlsBroswer.name == 'MSIE' && tlsBroswer.version < 11) {
                if (tlsBroswer.name == 'MSIE') {
                    tlsBroswer.name = 'Internet Explorer';
                }
                $('.browser-compatibility-alert').removeClass('hide');
                $('.browser-compatibility-alert p').find('.browser_version').text(' ' + tlsBroswer.name + ' ' + tlsBroswer.version + '.');
            }
        }
        initializeDom();
        // init specific global components
        countries.init();
        tooltip.init();
        minicart.init();
        validator.init();
        uievents.init();
        megamenu.init();
        headerinit.init();
        searchplaceholder.init();
        if (SitePreferences.GTM_ENABLED) {
            tagmanager.init(window.pageContext.ns);
        }
        quickviewAsset.init();

        // execute page specific initializations
        $.extend(page, window.pageContext);
        var ns = page.ns;
        if (ns && pages[ns] && pages[ns].init) {
            pages[ns].init();
        }
        initializeEvents();
        require('./browsera').init();
    }
};

// general extension functions
(function () {
    String.format = function () {
        var s = arguments[0];
        var i,
            len = arguments.length - 1;
        for (i = 0; i < len; i++) {
            var reg = new RegExp('\\{' + i + '\\}', 'gm');
            s = s.replace(reg, arguments[i + 1]);
        }
        return s;
    };
})();

jQuery(function () {
    jQuery('.accordion').hover(function () {
        var $this = jQuery(this);
        if ($this.hasClass('highlight')) {
            $this.addClass('contentbox');
        } else {
            $this.removeClass('contentbox').addClass('tabover');
        }
    }, function () {
        jQuery(this).removeClass('tabover').addClass('contentbox');
    }).click(function () {
        var $this = jQuery(this);
        if ($this.find('.expandcontent').length > 0) {
            $this.find('h1').toggleClass('downarrow').next().toggle('fast');
            $this.toggleClass('highlight').toggleClass('tabover').toggleClass('contentbox');
        } else {
            window.location.href = $this.find('a').attr('href');
        }
    });
});

// initialize app
$(document).ready(function () {
    app.init();
});

},{"./browsera":18,"./captcha":19,"./cookieprivacy":21,"./countries":22,"./dialog":23,"./dialogify":24,"./headerinit":26,"./jquery-ext":27,"./megamenu":28,"./minicart":29,"./page":30,"./pages/account":31,"./pages/blog":32,"./pages/cart":33,"./pages/checkout":37,"./pages/compare":40,"./pages/international":41,"./pages/product":43,"./pages/rapalainsider":45,"./pages/registry":46,"./pages/search":47,"./pages/storefront":48,"./pages/storelocator":49,"./pages/wishlist":50,"./quickview-asset":53,"./searchplaceholder":55,"./searchsuggest":56,"./tagmanager":59,"./tls":60,"./tooltip":61,"./uievents":62,"./util":63,"./validator":64}],17:[function(require,module,exports){
'use strict';

var dialog = require('./dialog'),
    page = require('./page'),
    util = require('./util');

var selectedList = [];
var maxItems = 1;
var bliUUID = '';

/**
 * @private
 * @function
 * description Gets a list of bonus products related to a promoted product
 */
function getBonusProducts() {
    var bonusproducts = [];

    var i, len;
    for (i = 0, len = selectedList.length; i < len; i++) {
        var p = {
            pid: selectedList[i].pid,
            qty: selectedList[i].qty,
            options: {}
        };
        var a,
            alen,
            bp = selectedList[i];
        if (bp.options) {
            for (a = 0, alen = bp.options.length; a < alen; a++) {
                var opt = bp.options[a];
                p.options = { optionName: opt.name, optionValue: opt.value };
            }
        }
        bonusproducts.push({ product: p });
    }
    return { bonusproducts: bonusproducts };
}

var selectedItemTemplate = function selectedItemTemplate(data) {
    var attributes = '';
    for (var attrID in data.attributes) {
        var attr = data.attributes[attrID];
        attributes += '<li data-attribute-id="' + attrID + '">\n';
        attributes += '<span class="display-name">' + attr.displayName + '</span>: ';
        attributes += '<span class="display-value">' + attr.displayValue + '</span>\n';
        attributes += '</li>';
    }
    attributes += '<li class="item-qty">\n';
    attributes += '<span class="display-name">Qty</span>: ';
    attributes += '<span class="display-value">' + data.qty + '</span>';
    return ['<li class="selected-bonus-item" data-uuid="' + data.uuid + '" data-pid="' + data.pid + '">', '<i class="remove-link fa fa-remove" title="Remove this product" href="#"></i>', '<div class="item-name">' + data.name + '</div>', '<ul class="item-attributes">', attributes, '<ul>', '<li>'].join('\n');
};

// hide swatches that are not selected or not part of a Product Variation Group
var hideSwatches = function hideSwatches() {
    $('.bonus-product-item:not([data-producttype="master"]) .swatches li').not('.selected').not('.variation-group-value').hide();
    // prevent unselecting the selected variant
    $('.bonus-product-item .swatches .selected').on('click', function () {
        return false;
    });
};

/**
 * @private
 * @function
 * @description Updates the summary page with the selected bonus product
 */
function updateSummary() {
    var $bonusProductList = $('#bonus-product-list');
    if (!selectedList.length) {
        $bonusProductList.find('li.selected-bonus-item').remove();
    } else {
        var ulList = $bonusProductList.find('ul.selected-bonus-items').first();
        var i, len;
        for (i = 0, len = selectedList.length; i < len; i++) {
            var item = selectedList[i];
            var li = selectedItemTemplate(item);
            $(li).appendTo(ulList);
        }
    }

    // get remaining item count
    var remain = maxItems - selectedList.length;
    $bonusProductList.find('.bonus-items-available').text(remain);
    if (remain <= 0) {
        $bonusProductList.find('.select-bonus-item').attr('disabled', 'disabled');
    } else {
        $bonusProductList.find('.select-bonus-item').removeAttr('disabled');
    }
}

function initializeGrid() {
    var $bonusProduct = $('#bonus-product-dialog'),
        $bonusProductList = $('#bonus-product-list'),
        bliData = $bonusProductList.data('line-item-detail');
    maxItems = bliData.maxItems;
    bliUUID = bliData.uuid;

    if (bliData.itemCount >= maxItems) {
        $bonusProductList.find('.select-bonus-item').attr('disabled', 'disabled');
    }

    var cartItems = $bonusProductList.find('.selected-bonus-item');
    cartItems.each(function () {
        var ci = $(this);
        var product = {
            uuid: ci.data('uuid'),
            pid: ci.data('pid'),
            qty: ci.find('.item-qty').text(),
            name: ci.find('.item-name').html(),
            attributes: {}
        };
        var attributes = ci.find('ul.item-attributes li');
        attributes.each(function () {
            var li = $(this);
            product.attributes[li.data('attributeId')] = {
                displayName: li.children('.display-name').html(),
                displayValue: li.children('.display-value').html()
            };
        });
        selectedList.push(product);
    });

    $bonusProductList.on('click', '.bonus-product-item a[href].swatchanchor', function (e) {
        e.preventDefault();
        var url = this.href,
            $this = $(this);
        url = util.appendParamsToUrl(url, {
            'source': 'bonus',
            'format': 'ajax'
        });
        $.ajax({
            url: url,
            success: function success(response) {
                $this.closest('.bonus-product-item').empty().html(response);
                hideSwatches();
            }
        });
    }).on('change', '.input-text', function () {
        $bonusProductList.find('.select-bonus-item').removeAttr('disabled');
        $(this).closest('.bonus-product-form').find('.quantity-error').text('');
    }).on('click', '.select-bonus-item', function (e) {
        e.preventDefault();
        if (selectedList.length >= maxItems) {
            $bonusProductList.find('.select-bonus-item').attr('disabled', 'disabled');
            $bonusProductList.find('.bonus-items-available').text('0');
            return;
        }

        var form = $(this).closest('.bonus-product-form'),
            detail = $(this).closest('.product-detail'),
            uuid = form.find('input[name="productUUID"]').val(),
            qtyVal = form.find('input[name="Quantity"]').val(),
            qty = isNaN(qtyVal) ? 1 : +qtyVal;

        if (qty > maxItems) {
            $bonusProductList.find('.select-bonus-item').attr('disabled', 'disabled');
            form.find('.quantity-error').text(Resources.BONUS_PRODUCT_TOOMANY);
            return;
        }

        var product = {
            uuid: uuid,
            pid: form.find('input[name="pid"]').val(),
            qty: qty,
            name: detail.find('.product-name').text(),
            attributes: detail.find('.product-variations').data('attributes'),
            options: []
        };

        var optionSelects = form.find('.product-option');

        optionSelects.each(function () {
            product.options.push({
                name: this.name,
                value: $(this).val(),
                display: $(this).children(':selected').first().html()
            });
        });
        selectedList.push(product);
        updateSummary();
    }).on('click', '.remove-link', function (e) {
        e.preventDefault();
        var container = $(this).closest('.selected-bonus-item');
        if (!container.data('uuid')) {
            return;
        }

        var uuid = container.data('uuid');
        var i,
            len = selectedList.length;
        for (i = 0; i < len; i++) {
            if (selectedList[i].uuid === uuid) {
                selectedList.splice(i, 1);
                break;
            }
        }
        updateSummary();
    }).on('click', '.add-to-cart-bonus', function (e) {
        e.preventDefault();
        var url = util.appendParamsToUrl(Urls.addBonusProduct, { bonusDiscountLineItemUUID: bliUUID });
        var bonusProducts = getBonusProducts();
        if (bonusProducts.bonusproducts[0].product.qty > maxItems) {
            bonusProducts.bonusproducts[0].product.qty = maxItems;
        }
        // make the server call
        $.ajax({
            type: 'POST',
            dataType: 'json',
            cache: false,
            contentType: 'application/json',
            url: url,
            data: JSON.stringify(bonusProducts)
        }).done(function () {
            // success
            page.refresh();
        }).fail(function (xhr, textStatus) {
            // failed
            if (textStatus === 'parsererror') {
                window.alert(Resources.BAD_RESPONSE);
            } else {
                window.alert(Resources.SERVER_CONNECTION_ERROR);
            }
        }).always(function () {
            $bonusProduct.dialog('close');
        });
    }).on('click', '#more-bonus-products', function (e) {
        e.preventDefault();
        var uuid = $('#bonus-product-list').data().lineItemDetail.uuid;

        //get the next page of choice of bonus products
        var lineItemDetail = JSON.parse($('#bonus-product-list').attr('data-line-item-detail'));
        lineItemDetail.pageStart = lineItemDetail.pageStart + lineItemDetail.pageSize;
        $('#bonus-product-list').attr('data-line-item-detail', JSON.stringify(lineItemDetail));

        var url = util.appendParamsToUrl(Urls.getBonusProducts, {
            bonusDiscountLineItemUUID: uuid,
            format: 'ajax',
            lazyLoad: 'true',
            pageStart: lineItemDetail.pageStart,
            pageSize: $('#bonus-product-list').data().lineItemDetail.pageSize,
            bonusProductsTotal: $('#bonus-product-list').data().lineItemDetail.bpTotal
        });

        $.ajax({
            type: 'GET',
            cache: false,
            contentType: 'application/json',
            url: url
        }).done(function (data) {
            //add the new page to DOM and remove 'More' link if it is the last page of results
            $('#more-bonus-products').before(data);
            if (lineItemDetail.pageStart + lineItemDetail.pageSize >= $('#bonus-product-list').data().lineItemDetail.bpTotal) {
                $('#more-bonus-products').remove();
            }
        }).fail(function (xhr, textStatus) {
            if (textStatus === 'parsererror') {
                window.alert(Resources.BAD_RESPONSE);
            } else {
                window.alert(Resources.SERVER_CONNECTION_ERROR);
            }
        });
    });
}

var bonusProductsView = {
    /**
     * @function
     * @description Open the list of bonus products selection dialog
     */
    show: function show(url) {
        var $bonusProduct = $('#bonus-product-dialog');
        // create the dialog
        dialog.open({
            target: $bonusProduct,
            url: url,
            options: {
                width: 795,
                title: Resources.BONUS_PRODUCTS
            },
            callback: function callback() {
                initializeGrid();
                hideSwatches();
            }
        });
    },
    /**
     * @function
     * @description Open bonus product promo prompt dialog
     */
    loadBonusOption: function loadBonusOption() {
        var self = this,
            bonusDiscountContainer = document.querySelector('.bonus-discount-container');
        if (!bonusDiscountContainer) {
            return;
        }

        // get the html from minicart, then trash it
        var bonusDiscountContainerHtml = bonusDiscountContainer.outerHTML;
        bonusDiscountContainer.parentNode.removeChild(bonusDiscountContainer);

        dialog.open({
            html: bonusDiscountContainerHtml,
            options: {
                width: 400,
                title: Resources.BONUS_PRODUCT,
                buttons: [{
                    text: Resources.SELECT_BONUS_PRODUCTS,
                    click: function click() {
                        var uuid = $('.bonus-product-promo').data('lineitemid'),
                            url = util.appendParamsToUrl(Urls.getBonusProducts, {
                            bonusDiscountLineItemUUID: uuid,
                            source: 'bonus',
                            format: 'ajax',
                            lazyLoad: 'false',
                            pageStart: 0,
                            pageSize: 10,
                            bonusProductsTotal: -1
                        });
                        $(this).dialog('close');
                        self.show(url);
                    }
                }, {
                    text: Resources.NO_THANKS,
                    click: function click() {
                        $(this).dialog('close');
                    }
                }]
            },
            callback: function callback() {
                // show hide promo details
                $('.show-promo-details').on('click', function () {
                    $('.promo-details').toggleClass('visible');
                });
            }
        });
    }
};

module.exports = bonusProductsView;

},{"./dialog":23,"./page":30,"./util":63}],18:[function(require,module,exports){
'use strict';

function getUrlVars() {
    var vars = [],
        hash;
    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
    for (var i = 0; i < hashes.length; i++) {
        hash = hashes[i].split('=');
        vars.push(hash[0]);
        vars[hash[0]] = hash[1];
    }
    return vars;
}

function runBrowseraTest() {

    var hoverSelector = decodeURI(getUrlVars().hover);
    if (hoverSelector !== '') {
        hoverSelector = hoverSelector.replace(' eq ', '=');
        if ($(hoverSelector).length > 0) {
            $(hoverSelector).trigger('mouseenter');
        }
    }
    var clickSelector = decodeURI(getUrlVars().click);
    if (clickSelector !== '') {
        clickSelector = clickSelector.replace(' eq ', '=');
        if ($(clickSelector).length > 0) {
            $(clickSelector).trigger('click');
        }
    }
}

exports.init = function () {
    runBrowseraTest();
};

},{}],19:[function(require,module,exports){
'use strict';

var dialog = require('./dialog');
var util = require('./util');
var SessionAttributes = window.SessionAttributes;

/**
 * @function captcha    Used to display/control the scrim containing the simulated captcha code
 **/
module.exports = function () {
    /**
     * if the session.privacy.ratelimited element is present then show the notification
     * NOTE: You will probably want to replace this with a call to an actual CAPTCHA system to replace the simple one here
     */
    if (SessionAttributes.SHOW_CAPTCHA) {
        dialog.open({
            html: '<h1>' + Resources.ARE_YOU_HUMAN + '</h1>',
            options: {
                closeOnEscape: false,
                dialogClass: 'no-close',
                buttons: [{
                    text: Resources.OK,
                    click: function click() {
                        var url = util.appendParamsToUrl(Urls.rateLimiterReset, { format: 'ajax' });
                        $.ajax({
                            url: url
                        });
                        $(this).dialog('close');
                    }
                }]
            }
        });
    }
};

},{"./dialog":23,"./util":63}],20:[function(require,module,exports){
'use strict';

var page = require('./page'),
    util = require('./util'),
    TPromise = require('promise');

var _currentCategory = '',
    MAX_ACTIVE = 6;

/**
 * @private
 * @function
 * @description Verifies the number of elements in the compare container and updates it with sequential classes for ui targeting
 */
function refreshContainer() {
    var $compareContainer = $('.compare-items');
    var $compareItems = $compareContainer.find('.compare-item');
    var numActive = $compareItems.filter('.active').length;

    if (numActive < 2) {
        $('#compare-items-button').attr('disabled', 'disabled');
    } else {
        $('#compare-items-button').removeAttr('disabled');
    }
    /*Start JIRA PREV-234 : PLP - Not able to remove individual product from the compare grid from PLP.*/
    for (var i = 0; i < $compareItems.length; i++) {
        $($compareItems[i]).find('.compare-item-number').text(i + 1);
    }
    /*End JIRA PREV-234*/
    $compareContainer.toggle(numActive > 0);
}

/**
 * @private
 * @function
 * @description Adds an item to the compare container and refreshes it
 */
function addToList(data) {
    // get the first compare-item not currently active
    var $item = $('.compare-items .compare-item').not('.active').first(),
        $productTile = $('#' + data.uuid);

    if ($item.length === 0) {
        if ($productTile.length > 0) {
            $productTile.find('.compare-check')[0].checked = false;
        }
        window.alert(Resources.COMPARE_ADD_FAIL);
        return;
    }

    // if already added somehow, return
    if ($('[data-uuid="' + data.uuid + '"]').length > 0) {
        return;
    }
    // set as active item
    $item.addClass('active').attr('data-uuid', data.uuid).attr('data-itemid', data.itemid).data('uuid', data.uuid).data('itemid', data.itemid).append($(data.img).clone().addClass('compare-item-image'));
}

/**
 * @private
 * @function
 * description Removes an item from the compare container and refreshes it
 */
function removeFromList($item) {
    if ($item.length === 0) {
        return;
    }
    // remove class, data and id from item
    $item.removeClass('active').removeAttr('data-uuid').removeAttr('data-itemid').data('uuid', '').data('itemid', '')
    // remove the image
    .find('.compare-item-image').remove();

    /*Start JIRA PREV-234 : PLP - Not able to remove individual product from the compare grid from PLP.*/
    var $cloneItem = $item.clone();
    $item.remove();
    $cloneItem.appendTo('.compare-items-panel');
    refreshContainer();
    /*End JIRA PREV-234*/
}

function addProductAjax(args) {
    var promise = new TPromise(function (resolve, reject) {
        $.ajax({
            url: Urls.compareAdd,
            data: {
                pid: args.itemid,
                category: _currentCategory
            },
            dataType: 'json'
        }).done(function (response) {
            if (!response || !response.success) {
                reject(new Error(Resources.COMPARE_ADD_FAIL));
            } else {
                resolve(response);
                initializeEvents(); // JIRA PREV-234 : PLP - Not able to remove individual product from the compare grid from PLP.
            }
        }).fail(function (jqxhr, status, err) {
            reject(new Error(err));
        });
    });
    return promise;
}

function removeProductAjax(args) {
    var promise = new TPromise(function (resolve, reject) {
        $.ajax({
            url: Urls.compareRemove,
            data: {
                pid: args.itemid,
                category: _currentCategory
            },
            dataType: 'json'
        }).done(function (response) {
            if (!response || !response.success) {
                reject(new Error(Resources.COMPARE_REMOVE_FAIL));
            } else {
                resolve(response);
            }
        }).fail(function (jqxhr, status, err) {
            reject(new Error(err));
        });
    });
    return promise;
}

function shiftImages() {
    return new TPromise(function (resolve) {
        var $items = $('.compare-items .compare-item');
        $items.each(function (i, item) {
            var $item = $(item);
            // last item
            if (i === $items.length - 1) {
                return removeFromList($item);
            }
            var $next = $items.eq(i); //JIRA PREV-261 : PLP: When more than 6 product compared then Comparesection not displaying all the product images. Removed +1
            if ($next.hasClass('active')) {
                // remove its own image
                $next.find('.compare-item-image').detach().appendTo($item);
                $item.addClass('active').attr('data-uuid', $next.data('uuid')).attr('data-itemid', $next.data('itemid')).data('uuid', $next.data('uuid')).data('itemid', $next.data('itemid'));
            }
        });
        resolve();
    });
}

/**
 * @function
 * @description Adds product to the compare table
 */
function addProduct(args) {
    var promise;
    var $items = $('.compare-items .compare-item');
    var $cb = $(args.cb);
    var numActive = $items.filter('.active').length;
    if (numActive === MAX_ACTIVE) {
        if (!window.confirm(Resources.COMPARE_CONFIRMATION)) {
            $cb[0].checked = false;
            return;
        }

        // remove product using id
        var $firstItem = $items.first();
        promise = removeItem($firstItem).then(function () {
            return shiftImages();
        });
    } else {
        promise = TPromise.resolve(0);
    }
    return promise.then(function () {
        return addProductAjax(args).then(function () {
            addToList(args);
            if ($cb && $cb.length > 0) {
                $cb[0].checked = true;
            }
            refreshContainer();
        });
    }).then(null, function () {
        if ($cb && $cb.length > 0) {
            $cb[0].checked = false;
        }
    });
}

/**
 * @function
 * @description Removes product from the compare table
 * @param {object} args - the arguments object should have the following properties: itemid, uuid and cb (checkbox)
 */
function removeProduct(args) {
    var $cb = args.cb ? $(args.cb) : null;
    return removeProductAjax(args).then(function () {
        var $item = $('[data-uuid="' + args.uuid + '"]');
        removeFromList($item);
        if ($cb && $cb.length > 0) {
            $cb[0].checked = false;
        }
        refreshContainer();
    }, function () {
        if ($cb && $cb.length > 0) {
            $cb[0].checked = true;
        }
    });
}

function removeItem($item) {
    var uuid = $item.data('uuid'),
        $productTile = $('#' + uuid);
    return removeProduct({
        itemid: $item.data('itemid'),
        uuid: uuid,
        cb: $productTile.length === 0 ? null : $productTile.find('.compare-check')
    });
}

/**
 * @private
 * @function
 * @description Initializes the DOM-Object of the compare container
 */
function initializeDom() {
    var $compareContainer = $('.compare-items');
    _currentCategory = $compareContainer.data('category') || '';
    var $active = $compareContainer.find('.compare-item').filter('.active');
    $active.each(function () {
        var $productTile = $('#' + $(this).data('uuid'));
        if ($productTile.length === 0) {
            return;
        }
        $productTile.find('.compare-check')[0].checked = true;
    });
    // set container state
    refreshContainer();
}

/**
 * @private
 * @function
 * @description Initializes the events on the compare container
 */
function initializeEvents() {
    // add event to buttons to remove products
    $('.compare-item').on('click', '.compare-item-remove', function () {
        removeItem($(this).closest('.compare-item'));
    });

    // Button to go to compare page
    $('#compare-items-button').on('click', function () {
        page.redirect(util.appendParamToURL(Urls.compareShow, 'category', _currentCategory));
    });

    // Button to clear all compared items
    // rely on refreshContainer to take care of hiding the container
    $('#clear-compared-items').on('click', function () {
        $('.compare-items .active').each(function () {
            removeItem($(this));
        });
    });
}

exports.init = function () {
    initializeDom();
    initializeEvents();
};

exports.addProduct = addProduct;
exports.removeProduct = removeProduct;

},{"./page":30,"./util":63,"promise":6}],21:[function(require,module,exports){
'use strict';

var dialog = require('./dialog');

/**
 * @function cookieprivacy    Used to display/control the scrim containing the cookie privacy code
 **/
module.exports = function () {
    /**
     * If we have not accepted cookies AND we're not on the Privacy Policy page, then show the notification
     * NOTE: You will probably want to adjust the Privacy Page test to match your site's specific privacy / cookie page
     */
    if (SitePreferences.COOKIE_HINT === true && document.cookie.indexOf('dw_cookies_accepted') < 0) {
        // check for privacy policy page
        if ($('.privacy-policy').length === 0) {
            dialog.open({
                url: Urls.cookieHint,
                options: {
                    closeOnEscape: false,
                    dialogClass: 'no-close',
                    buttons: [{
                        text: Resources.I_AGREE,
                        click: function click() {
                            $(this).dialog('close');
                            enableCookies();
                        }
                    }]
                }
            });
        }
    } else {
        // Otherwise, we don't need to show the asset, just enable the cookies
        enableCookies();
    }

    function enableCookies() {
        if (document.cookie.indexOf('dw=1') < 0) {
            document.cookie = 'dw=1; path=/';
        }
        if (document.cookie.indexOf('dw_cookies_accepted') < 0) {
            document.cookie = 'dw_cookies_accepted=1; path=/';
        }
    }

    if (document.cookie.indexOf('dw_alert_message') > 0) {
        $('#alert-message').hide();
    }

    $('#close-non-us-alert').on('click', function (e) {
        e.preventDefault();
        $('#alert-message').hide();
        if (document.cookie.indexOf('dw_alert_message') < 0) {
            document.cookie = 'dw_alert_message=1; path=/';
        }
    });
};

},{"./dialog":23}],22:[function(require,module,exports){
'use strict';

exports.init = function init() {
    $('.country-selector .current-country').on('click', function () {
        $('.country-selector .selector').toggleClass('active');
        $(this).toggleClass('selector-active');
    });
    // set currency first before reload
    $('.country-selector .selector .locale').on('click', function (e) {
        e.preventDefault();
        var url = this.href;
        var currency = this.getAttribute('data-currency');
        $.ajax({
            dataType: 'json',
            url: Urls.setSessionCurrency,
            data: {
                format: 'ajax',
                currencyMnemonic: currency
            }
        }).done(function (response) {
            if (!response.success) {
                throw new Error('Unable to set currency');
            }
            window.location.href = url;
        });
    });
};

},{}],23:[function(require,module,exports){
'use strict';

var ajax = require('./ajax'),
    util = require('./util'),
    _ = require('lodash'),
    imagesLoaded = require('imagesloaded');

var dialog = {
    /**
     * @function
     * @description Appends a dialog to a given container (target)
     * @param {Object} params  params.target can be an id selector or an jquery object
     */
    create: function create(params) {
        var $target, id;

        if (_.isString(params.target)) {
            if (params.target.charAt(0) === '#') {
                $target = $(params.target);
            } else {
                $target = $('#' + params.target);
            }
        } else if (params.target instanceof jQuery) {
            $target = params.target;
        } else {
            $target = $('#dialog-container');
        }

        // if no element found, create one
        if ($target.length === 0) {
            if ($target.selector && $target.selector.charAt(0) === '#') {
                id = $target.selector.substr(1);
                $target = $('<div>').attr('id', id).addClass('dialog-content').appendTo('body');
            }
        }

        // create the dialog
        this.$container = $target;
        this.$container.dialog(_.merge({}, this.settings, params.options || {}));
        return this.$container; // PREVAIL-Added Return value.
    },
    /**
     * @function
     * @description Opens a dialog using the given url (params.url) or html (params.html)
     * @param {Object} params
     * @param {Object} params.url should contain the url
     * @param {String} params.html contains the html of the dialog content
     */
    open: function open(params) {
        // close any open dialog
        this.close();
        this.create(params);
        this.replace(params);
    },
    /**
     * @description populate the dialog with html content, then open it
     **/
    openWithContent: function openWithContent(params) {
        var content, position, callback;

        if (!this.$container) {
            return;
        }
        content = params.content || params.html;
        if (!content) {
            return;
        }
        this.$container.empty().html(content);
        if (!this.$container.dialog('isOpen')) {
            this.$container.dialog('open');
        }

        if (params.options) {
            position = params.options.position;
        }
        if (!position) {
            position = this.settings.position;
        }
        imagesLoaded(this.$container).on('done', function () {
            this.$container.dialog('option', 'position', position);
        }.bind(this));

        callback = typeof params.callback === 'function' ? params.callback : function () {};
        callback();
    },
    /**
     * @description Replace the content of current dialog
     * @param {object} params
     * @param {string} params.url - If the url property is provided, an ajax call is performed to get the content to replace
     * @param {string} params.html - If no url property is provided, use html provided to replace
     */
    replace: function replace(params) {
        if (!this.$container) {
            return;
        }
        if (params.url) {
            params.url = util.appendParamToURL(params.url, 'format', 'ajax');
            ajax.load({
                url: params.url,
                data: params.data,
                callback: function (response) {
                    params.content = response;
                    this.openWithContent(params);
                }.bind(this)
            });
        } else if (params.html) {
            this.openWithContent(params);
        }
    },
    /**
     * @function
     * @description Closes the dialog
     */
    close: function close() {
        if (!this.$container) {
            return;
        }
        this.$container.dialog('close');
    },
    /**
     * @function
     * @description Submits the dialog form with the given action
     * @param {String} The action which will be triggered upon form submit
     */
    submit: function submit(action) {
        var $form = this.$container.find('form:first');
        // set the action
        $('<input/>').attr({
            name: action,
            type: 'hidden'
        }).appendTo($form);
        // serialize the form and get the post url
        var data = $form.serialize();
        var url = $form.attr('action');
        // make sure the server knows this is an ajax request
        if (data.indexOf('ajax') === -1) {
            data += '&format=ajax';
        }
        // post the data and replace current content with response content
        $.ajax({
            type: 'POST',
            url: url,
            data: data,
            dataType: 'html',
            success: function (html) {
                this.$container.html(html);
                $('.ui-dialog-content:visible').each(function () {
                    $(this).dialog('option', 'position', $(this).dialog('option', 'position'));
                });
            }.bind(this),
            failure: function failure() {
                window.alert(Resources.SERVER_ERROR);
            }
        });
    },
    exists: function exists() {
        return this.$container && this.$container.length > 0;
    },
    isActive: function isActive() {
        return this.exists() && this.$container.children.length > 0;
    },
    settings: {
        autoOpen: false,
        height: 'auto',
        modal: true,
        overlay: {
            opacity: 0.5,
            background: 'black'
        },
        resizable: false,
        title: '',
        width: '800',
        close: function close() {
            $(this).dialog('close');
        },
        position: {
            my: 'center',
            at: 'center',
            of: window,
            collision: 'flipfit'
        }
    }
};

module.exports = dialog;

},{"./ajax":15,"./util":63,"imagesloaded":4,"lodash":5}],24:[function(require,module,exports){
'use strict';

var ajax = require('./ajax'),
    util = require('./util'),
    tooltip = require('./tooltip'),
    validator = require('./validator'),
    dialog = require('./dialog');

var setDialogify = function setDialogify(e) {
    e.preventDefault();
    var actionSource = $(this),
        dlgAction = $(actionSource).data('dlg-action') || {},
        // url, target, isForm
    dlgOptions = $.extend({}, dialog.settings, $(actionSource).data('dlg-options') || {});

    dlgOptions.title = dlgOptions.title || $(actionSource).attr('title') || '';

    var url = dlgAction.url // url from data
    || (dlgAction.isForm ? $(actionSource).closest('form').attr('action') : null) // or url from form action if isForm=true
    || $(actionSource).attr('href'); // or url from href

    if (!url) {
        return;
    }

    var form = jQuery(this).parents('form');
    var method = form.attr('method') || 'POST';

    if (actionSource[0].tagName === 'BUTTON' && !form.valid() || actionSource[0].tagName === 'INPUT' && !form.valid()) {
        return false;
    }

    // if this is a content link, update url from Page-Show to Page-Include
    if ($(this).hasClass('attributecontentlink')) {
        var uri = util.getUri(url);
        url = Urls.pageInclude + uri.query;
    }
    var postData;
    if (method && method.toUpperCase() === 'POST') {
        postData = form.serialize() + '&' + jQuery(this).attr('name') + '=submit';
    } else {
        if (url.indexOf('?') === -1) {
            url += '?';
        } else {
            url += '&';
        }
        url += form.serialize();
        url = util.appendParamToURL(url, jQuery(this).attr('name'), 'submit');
    }

    var dlg = dialog.create({
        target: dlgAction.target,
        options: dlgOptions
    });

    ajax.load({
        url: $(actionSource).attr('href') || $(actionSource).closest('form').attr('action'),
        target: dlg,
        callback: function callback() {
            dlg.dialog('open'); // open after load to ensure dialog is centered
            validator.init();
            tooltip.init();
            if (dlg.find('.closedialog').length > 0) {
                dialog.close();
            }
        },
        data: !$(actionSource).attr('href') ? postData : null,
        type: method

    });
};

exports.setDialogify = setDialogify;

},{"./ajax":15,"./dialog":23,"./tooltip":61,"./util":63,"./validator":64}],25:[function(require,module,exports){
'use strict';

var ajax = require('./ajax'),
    minicart = require('./minicart'),
    util = require('./util');

var setAddToCartHandler = function setAddToCartHandler(e) {
    e.preventDefault();
    var form = $(this).closest('form');

    var options = {
        url: util.ajaxUrl(form.attr('action')),
        method: 'POST',
        cache: false,
        data: form.serialize()
    };
    $.ajax(options).done(function (response) {
        if (response.success) {
            ajax.load({
                url: Urls.minicartGC,
                data: {
                    lineItemId: response.result.lineItemId
                },
                callback: function callback(response) {
                    minicart.show(response);
                    form.find('input,textarea').val('');
                }
            });
        } else {
            form.find('span.error').hide();
            for (var id in response.errors.FormErrors) {
                var $errorEl = $('#' + id).addClass('error').removeClass('valid').next('.error');
                if (!$errorEl || $errorEl.length === 0) {
                    $errorEl = $('<span for="' + id + '" generated="true" class="error" style=""></span>');
                    $('#' + id).after($errorEl);
                }
                $errorEl.text(response.errors.FormErrors[id].replace(/\\'/g, '\'')).show();
            }
        }
    }).fail(function (xhr, textStatus) {
        // failed
        if (textStatus === 'parsererror') {
            window.alert(Resources.BAD_RESPONSE);
        } else {
            window.alert(Resources.SERVER_CONNECTION_ERROR);
        }
    });
};

exports.init = function () {
    $('#AddToBasketButton').on('click', setAddToCartHandler);
};

},{"./ajax":15,"./minicart":29,"./util":63}],26:[function(require,module,exports){
'use strict';

var //uievents = require('./uievents'),
dialog = require('./dialog'),
    progress = require('./progress');

//var $con = $('body');
var appGlobal = {
    globalTimer: 0
};
var headerEvents = {
    initializeEvent: function initializeEvent() {
        $('body').find('input, select.input-select').focusin(function () {
            $(this).closest('.formfield').removeClass('inputlabel');
            $(this).closest('.formfield').find('.form-row , .label span').removeClass('inputlabel');
            $(this).removeClass('errorclient');
            $(this).closest('.formfield').find('.logerror , .existing_register').css('display', 'none');
        });
        if ($('.logincustomers').length > 0) {
            var crrobj = $(this).find('.formfield  .logerror');
            $(crrobj).closest('.formfield').find('.form-row , .label span').removeClass('inputlabel');
        }

        $('.privacy-policy').on('click', function (e) {
            e.preventDefault();
            dialog.open({
                url: $(e.target).attr('href'),
                options: {
                    height: 600
                }
            });
        });
        //label text color change on submit
        if ($('.account-logs').length > 0 || $('.new-register').length > 0 || $('.wish-logs').length > 0 || $('.createan-account').length > 0 || $('.headercustomerinfo').length > 0 || $('.ui-login').length > 0 || $('.passwordreset').length > 0) {
            $('.formactions button').click(function () {
                $('span.existing_register').hide();
                var crrobj = $(this).closest('form').find('.field-wrapper .required');
                $(crrobj).each(function () {
                    if ($(this).hasClass('errorclient')) {
                        $(this).closest('.formfield').find('.label .labeltext').addClass('inputlabel');
                        $(this).closest('.formfield').find('.label .requiredindicator').addClass('inputlabel');
                    } else {
                        $(this).closest('.formfield').find('.label .labeltext').removeClass('inputlabel');
                        $(this).closest('.formfield').find('.label .requiredindicator').removeClass('inputlabel');
                    }
                });
            });
        }
        //login & wish list validations
        if ($('.account-logs').length > 0 || $('.new-register').length > 0 || $('.wish-logs').length > 0 || $('.createan-account').length > 0 || $('.headercustomerinfo').length > 0 || $('.ui-login').length > 0) {
            $('a.clearbutton').click(function () {
                $(this).closest('.formfield').find('input').val('');
                $(this).closest('.formfield').find('textarea').val('');
                $(this).closest('.field-wrapper').find('span').remove();
                $(this).closest('.field-wrapper').find('.required').removeClass('errorclient');
                $(this).closest('.formfield').find('a.clearbutton').hide();
                $(this).closest('.formfield ').find('.form-row').removeClass('inputlabel');
                $(this).closest('.formfield').find('.form-row , .label span').removeClass('inputlabel');
                $(this).closest('.formfield').find('span.logerror , .existing_register').hide();
            });
        }
        $('.ui-login .sign-up-blk > a').on('mouseenter click', function (e) {
            if ($(window).width() < 960) {
                return true;
            } else {
                if (e.type == 'click' && $('.accountcontent').is(':visible')) {
                    clearTimeout(appGlobal.globalTimer);
                    //appGlobal.globalTimer == 0;
                    $('.accountcontent').hide();
                    $('.headermask').hide();
                    $('.confirmationcontainer').hide();
                    return false;
                }
                if ($('.header-create').is(':visible')) {
                    return false;
                }
                $('.accountcontent').removeClass('js-entered');
                $('.accountcontent').hide();
                $('.sign-up-blk').addClass('js-active');
                if (!$(this).closest('.ui-login').find('.header-sign-in').is(':visible')) {
                    headerEvents.accountContPos($('.ui-login .sign-up-blk > a'), $(this).closest('.ui-login').find('.header-sign-in'));
                    $(this).closest('.ui-login').find('.header-sign-in').show();
                }
                $('.headermask').show();
                /*if(appGlobal.util.readCookie("emailId")){
                    $('.header-sign-in.accountcontent .guestemail').val(appGlobal.util.readCookie("emailId"));
                    $('.header-sign-in.accountcontent .login_password').removeAttr('placeholder').val('');
                }*/
                clearTimeout(appGlobal.globalTimer);
                //appGlobal.globalTimer == 0;
                appGlobal.globalTimer = setTimeout(function () {
                    $('.accountcontent').hide();
                    $('.headermask').hide();
                    $('.headercustomerinfo').find('.js-active').removeClass('js-active');
                }, 5000);
                $('.confirmationcontainer').hide();
            }
        });
        $('.signingin').click(function (e) {
            e.preventDefault();
            $('.accountcontent').hide();
            var validator = $(this).closest('form').validate();
            if (validator.element($(this).closest('form').find('.guestemail'))) {
                $('.accountcontent .guestemail').val($(this).closest('.accountcontent').find('.guestemail').val());
                $('.accountcontent .guestemail').removeClass('error');
                $('.accountcontent .guestemail').next('span.error').remove();
                $('.login_password').removeClass('error');
                $('.login_password').next('span.error').remove();
                $('.accountcontent .guestemail').addClass('click-mark valid');
            }
            $(this).closest('.ui-login').find('.header-sign-in').show();
            $('.header-sign-in .signin_main .loginfail.errormessage').hide();
            $('.headermask').addClass('no-hide').show();
        });

        $('.sign-message a, .ExistedUser-error .createaccount').click(function (e) {
            e.preventDefault();
            $('.accountcontent').hide();
            $(this).closest('.ui-login').find('.header-create').show();
            var validator = $(this).closest('form').validate();
            if (validator.element($(this).closest('form').find('.guestemail'))) {
                $('.accountcontent .guestemail').val($(this).closest('.accountcontent').find('.guestemail').val());
                $('.accountcontent .guestemail').removeClass('error');
                $('.accountcontent .guestemail').next('span.error').remove();
                $('.accountcontent .guestemail').addClass('click-mark valid');
            }
            headerEvents.accountContPos($('.ui-login .sign-up-blk > a'), $(this).closest('.ui-login').find('.header-create'));
            $('.headermask').show();
            $('.PasswordFormat-error').hide();
            $('.ExistedUser-error').hide();
            clearTimeout(appGlobal.globalTimer);
            //appGlobal.globalTimer == 0;
            appGlobal.globalTimer = setTimeout(function () {
                $('.accountcontent').hide();
                $('.headermask').hide();
                $('.headercustomerinfo').find('.js-active').removeClass('js-active');
            }, 5000);
        });

        $('.forgot-password a').click(function (e) {
            e.preventDefault();
            $('.accountcontent').hide();
            $('.header-forgot-pwd span.reset_email_error').hide();
            $(this).closest('.ui-login').find('.header-forgot-pwd').show();
            headerEvents.accountContPos($('.ui-login .sign-up-blk > a'), $(this).closest('.ui-login').find('.header-forgot-pwd'));
            $('.headermask').show();
            var validator = $(this).closest('form').validate({
                onkeyup: false
            });
            if (validator.element($(this).closest('form').find('.guestemail'))) {
                $('.accountcontent .guestemail').val($(this).closest('.accountcontent').find('.guestemail').val());
                $('.accountcontent .guestemail').removeClass('error');
                $('.accountcontent .guestemail').next('span.error').remove();
                $('.accountcontent .guestemail').addClass('click-mark valid');
            }
            clearTimeout(appGlobal.globalTimer);
            //appGlobal.globalTimer == 0;
            appGlobal.globalTimer = setTimeout(function () {
                $('.accountcontent').hide();
                $('.headermask').hide();
                $('.headercustomerinfo').find('.js-active').removeClass('js-active');
            }, 5000);
        });

        $('.accountcontent').mouseenter(function () {
            $('.headermask').removeClass('no-hide');
            $('.headermask').show();
            $('.confirmationcontainer').hide();
            $('.sign-up-blk').addClass('js-active');
            clearTimeout(appGlobal.globalTimer);
            //appGlobal.globalTimer == 0;
        });

        $('.headermask').click(function (e) {
            headerEvents.maskEvent(e);
        });

        $('.headermask').mouseenter(function (e) {
            headerEvents.maskEvent(e);
        });
        $('.accountcontent').mouseenter(function () {
            $('.headermask').removeClass('no-hide');
            $('.headermask').show();
            $('.confirmationcontainer').hide();
            $('.sign-up-blk').addClass('js-active');
            clearTimeout(appGlobal.globalTimer);
            //appGlobal.globalTimer == 0;
        });
        $('.user-account').on('click', function (e) {
            e.preventDefault();
            $(this).parent('.user-info').toggleClass('active');
        });
        $('.change-regionnew').mouseenter(function () {
            $('.domainswitch-header').show();
            $('.headermask').show();
        });
        $('.change-region').mouseenter(function () {
            jQuery('.domainswitch').show();
            $('.region_overlay').show();
        });
        $('.region_overlay').mouseenter(function () {
            jQuery('.domainswitch').hide();
            $(this).hide();
        });
        $('button').on('click', function () {
            if ($('.resetpassword').is(':Visible')) {
                $('.resetpassword').closest('div.dialog-content').addClass('confirmationcontainer');
            }
        });
        $('.sample-section').click(function () {
            if (!$(this).find('.sample_mail_main').is(':visible')) {
                $(this).find('.sample_mail_main').slideDown(500);
            }
        });
        $('.signupfor-email .seesamples').click(function () {
            $(this).closest('.signupfor-email').find('.sample_mail_main').slideToggle(500);
        });

        $('body').click(function (event) {
            if (!$(event.target).is('.signupfor-email .seesamples') && !$(event.target).is('.create_email_checkbox .seesamples')) {
                $('.sample_mail_main').slideUp(500);
            }
        });
        /**This is used to get the tick mark for create account when the field is valid*/
        $('.ui-login input.required').blur(function () {
            if ($(this).hasClass('valid')) {
                $(this).addClass('click-mark');
            } else {
                $(this).removeClass('click-mark');
            }
        });

        $('.back-link, .signingin').click(function () {
            $('.accountcontent').hide();
            $(this).closest('.ui-login').find('.header-sign-in').show();
            $('.header-sign-in .signin_main .loginfail.errormessage').hide();
        });

        $('.forgot_create').click(function () {
            $('.header-forgot-pwd').hide();
            $('.header-create').show();
            $('.header-create .errormessage').hide();
        });

        $('.loggeduser a, .headercustomerinfo .second_name').on('mouseenter', function (e) {
            e.preventDefault();
            if ($('.rapala_device').length == 0) {
                $('.accountcontent').hide();
                headerEvents.accountContPos($('.headercustomerinfo .loggeduser a'), $('.user-info'));
                $('.user-info').show();
            }
        });

        $('.rapala_device .loggeduser a,.headercustomerinfo .second_name').on('click', function (e) {
            e.preventDefault();
            $('.accountcontent').hide();
            headerEvents.accountContPos($('.headercustomerinfo .loggeduser a'), $('.user-info'));
            $('.user-info').show();
            $('.headermask').show();
        });
        jQuery(window).bind('message', function (e) {
            var str;
            e = e.originalEvent;
            if (e.origin.indexOf(document.location.host) === -1) {
                return;
            }
            var obj = e.data;
            try {
                str = JSON.parse(obj);
            } catch (err) {
                return;
            }
            if (str.process !== 'sign-in') {
                return;
            }

            if (str.status === 'success') {
                if (typeof str.email === 'string') {
                    headerEvents.userCookie(str.email);
                }
                document.location.reload(true);
            } else {
                $('.ExistedUser-error').hide();
                $('.PasswordFormat-error').hide();
                $('.custom_signin').find('.loading').remove();
                progress.hide();
                $('.custom_signin input[type="text"], .custom_signin input[type="password"]').addClass('errorclient');
                $('.loginfail').show();
                $('.accountcontent .loading').remove();
            }
        });
        jQuery('.signin-button').click(function (e) {
            e.preventDefault();
            var realForm = $(this).closest('form');
            if (!realForm.valid()) {
                return false;
            }
            $('.loginfail').hide();
            progress.show('.header-sign-in.accountcontent');
            var iframeId = 'js-header-signin-iframe';
            var formId = 'js-header-signin-form';
            $('#' + iframeId).remove();
            $('#' + formId).remove();
            var $form = $('<form></form>');
            $form.attr('id', formId);
            $form.attr('action', realForm.attr('action'));
            $form.attr('target', iframeId);
            $form.attr('method', 'POST');

            $('<iframe name="' + iframeId + '" id="' + iframeId + '" />').appendTo('body');
            $('#' + iframeId).attr('style', 'display: none;');

            realForm.find('input, select, textarea').each(function () {
                var $input = $(this).clone();
                $form.append($input);
            });

            $('body').append($form);
            $form.hide();
            $form.submit();
        });
        /*$(".PasswordResetForm").on("keyup",".guestemail",function(e){
                if(e.keyCode == 13) {
                    $('.lost_btn .send').trigger("click");
                }
            });*/
        $('.PasswordResetForm').unbind('submit').on('submit', function (e) {
            $('.header-forgot-pwd span.reset_email_error').hide();
            $('.lost_btn .send').addClass('clickedButton');
            e.preventDefault();
            var $form = $(this);
            if (!$form.valid()) {
                return false;
            }
            progress.show('.header-forgot-pwd.accountcontent');
            $.ajax({
                dataType: 'html',
                url: $form.attr('action'),
                data: $form.serialize(),
                success: function success(data) {
                    if ($(data).find('div#messages.error').length > 0) {
                        progress.hide();
                        $('.header-forgot-pwd').show();
                        $('.header-forgot-pwd span.reset_email_error').show();
                        $('.accountcontent .loading').remove();
                    } else {
                        progress.hide();
                        $('.header-forgot-pwd').hide();
                        $('.confirmationcontainer').fadeIn(400);
                        //to display the messeage
                        headerEvents.initializeEvent();
                        headerEvents.accountContPos($('.ui-login .sign-up-blk > a'), $('.confirmationcontainer'));
                        $('.accountcontent .loading').remove();
                        $('.confirmationcontainer').find('.headermask').hide();
                        $('.confirmationcontainer').delay(4000).fadeOut();
                    }
                }
            });
            return false;
        });
        jQuery(window).bind('message', function (e) {
            var str;
            e = e.originalEvent;
            if (e.origin.indexOf(document.location.host) === -1) {
                return;
            }
            var obj = e.data;
            try {
                str = JSON.parse(obj);
            } catch (err) {
                return;
            }
            if (str.process !== 'create-account') {
                return;
            }

            if (str.status === 'success') {
                if (typeof str.email === 'string') {
                    headerEvents.userCookie(str.email);
                }
                $.ajax({
                    dataType: 'html',
                    url: document.location.toString(),
                    success: function success(data) {
                        progress.hide();
                        $('.headermask').removeClass('no-hide').hide();
                        $('.header-sign-in.accountcontent').remove();
                        $('.headercustomerinfo #user').html($(data).find('#user').html());
                        $('#userinfo').html($(data).find('#userinfo').html());
                        headerEvents.accountContPos($('.headercustomerinfo .loggeduser a'), $('.congrats-message.accountcontent'));
                        $('.congrats-message').fadeIn(400).show().delay(3000).fadeOut(400);
                        headerEvents.initializeEvent();
                    }
                });
            } else {
                $('.accountcontent').hide();
                progress.hide();
                if (str.passwordinvalidformat) {
                    $('.PasswordFormat-error').show();
                } else {
                    $('.ExistedUser-error').show();
                }
                $('.errormessage').hide();
                $('.ui-login').find('.header-sign-in').show();
                //$('.ui-login').find('.header-sign-in .accountemail').val(emailId);
                $('.accountcontent .guestemail').removeClass('errorclient');
                $('.accountcontent .guestemail').next('span.errorclient').remove();
                $('.ui-login').find('.header-sign-in .accountemail').addClass('click-mark valid');
                $('.headermask').addClass('no-hide').show();
                $('.custom_signup input[type="text"], .custom_signup input[type="password"]').removeClass('errorclient');
            }
        });

        jQuery('.create-account').unbind('click').click(function (e) {
            e.preventDefault();
            var realForm = $(this).closest('form');
            if (!realForm.valid()) {
                return false;
            }
            progress.show('.header-create.accountcontent');
            var iframeId = 'js-header-create-account-iframe';
            var formId = 'js-header-create-account-form';
            $('#' + iframeId).remove();
            $('#' + formId).remove();
            var $form = $('<form></form>');
            $form.attr('id', formId);
            $form.attr('action', realForm.attr('action'));
            $form.attr('target', iframeId);
            $form.attr('method', 'POST');

            $('<iframe name="' + iframeId + '" id="' + iframeId + '" />').appendTo('body');
            $('#' + iframeId).attr('style', 'display: none;');

            realForm.find('input, select, textarea').each(function () {
                var $input = $(this).clone();
                $form.append($input);
            });

            $('body').append($form);
            $form.hide();
            $form.submit();
        });

        if ($('#user').length > 0) {
            firstnamesplit();
        }

        function firstnamesplit() {
            var firstname = $('.loggeduser > a span.username').text();
            var firstnameWords = firstname.split(' ');
            var textlength = 0;
            var limit = 19;
            var nameLength = $('.loggeduser > a span.username').text() + ' ' + $.trim($('.loggeduser > a .prostaff-header.badge-header').text());
            if (nameLength.length <= 19) {
                $('.loggeduser > a span.username').text($('.loggeduser > a span.username').text() + ' ' + $.trim($('.loggeduser > a .prostaff-header.badge-header').text()));
                $('.loggeduser > a .prostaff-header.badge-header').remove();
            } else if (firstnameWords.length > 0) {
                $('.loggeduser > a span.username').text('');
                if ($('.loggeduser > a span.username .first_name').length == 0) {
                    $('.loggeduser > a span.username').html('<span class="first_name"></span>');
                }
                if ($('.headercustomerinfo .second_name').length == 0) {
                    $('.headercustomerinfo').append('<span class="second_name"></span>');
                }

                var fName = $('.loggeduser > a span.username span.first_name').eq(0);
                var Lname = $('.headercustomerinfo > .second_name');

                jQuery.each(firstnameWords, function (i, v) {
                    textlength = textlength == 0 ? textlength + v.length : textlength + v.length + 1;
                    if (i == 0 && v.length > limit) {
                        fName.text(v.substr(0, 16) + '...');
                    } else if (textlength < 20) {
                        if (fName.text().length == 0) {
                            fName.text(v);
                        } else {
                            fName.text(fName.text() + ' ' + v);
                        }
                    } else {
                        if (Lname.text().length == 0) {
                            Lname.text(v);
                        } else {
                            Lname.text(Lname.text() + ' ' + v);
                        }
                    }
                });
                Lname.text(Lname.text() + ' ' + $.trim($('.loggeduser > a .badge-mini').text()));
                if ($('#user .loggeduser').width() > Lname.width()) {
                    $('.loggeduser').append(Lname.clone());
                    Lname.remove();
                }
                $('.loggeduser > a .prostaff-header.badge-header').remove();
                $('.loggeduser > a .badge-mini').remove();
            } else {
                $('.loggeduser > a span.username span').hide();
            }
        }

        $('.accountcontent input[type="text"], .accountcontent input[type="password"]').bind('keyup', function (e) {
            var keycode = e.keyCode ? e.keyCode : e.which;
            if (!$(this).closest('.accountcontent').hasClass('js-entered')) {
                $(this).closest('.accountcontent').addClass('js-entered');
            }

            if (keycode == 13) {
                $(this).closest('form').find('.formactions button').trigger('click');
            }
            clearTimeout(appGlobal.globalTimer);
            //appGlobal.globalTimer == 0;
        });

        $('.rapala_device .user-profile a').on('hover', function () {
            window.location.href = $(this).attr('href');
        });
    },
    /** ON HOVER */
    accountContPos: function accountContPos($source, $destiny) {
        var leftPos = $source.offset().left + $source.width() - $('.headercustomerinfo').offset().left - $destiny.width() / 2;
        var arrowPos = ($destiny.width() - $destiny.find('.top_arrow').width()) / 2 - 4;
        $('.accountcontent .loading').remove();
        if ($destiny.length != 0) {
            $destiny.css('left', leftPos);
            $destiny.find('.top_arrow').css('left', arrowPos);
        }
        $('.accountcontent .formfield .label .errorlabel').addClass('labeltext').removeClass('errorlabel');
    },
    userCookie: function userCookie() {
        var dateObj = new Date();
        dateObj.setTime(dateObj.getTime() + 365 * 24 * 60 * 60 * 1000);
        //document.cookie="emailId="+$val+"; expires="+dateObj.toUTCString()+"; path=/";
    },
    maskEvent: function maskEvent(ele) {
        $('.domainswitch-header').hide();
        $('.domainswitch').hide();
        if (!$('.headermask').hasClass('no-hide')) {
            clearTimeout(appGlobal.globalTimer);
            //appGlobal.globalTimer == 0;
            if (ele.type != 'click' && $('.rapala_device').length == 0 && ele.pageY > 60 && ele.pageY < 100) {
                $('.headermask').hide();
            }
            if (ele.type == 'click') {
                $('.headermask').hide();
                $('.accountcontent').hide();
                $('.headercustomerinfo').find('.js-active').removeClass('js-active');
            } else {
                clearTimeout(appGlobal.globalTimer);
                //appGlobal.globalTimer == 0;
                if ($('.accountcontent:visible').hasClass('js-entered')) {
                    appGlobal.globalTimer = setTimeout(function () {
                        $('.accountcontent').hide();
                        $('.headermask').hide();
                    }, 5000);
                } else {
                    $('.accountcontent').hide();
                    $('.headermask').hide();
                }
            }
        }
    }
};
var headerinit = {
    init: function init() {
        headerEvents.initializeEvent();
    }
};

module.exports = headerinit;

},{"./dialog":23,"./progress":52}],27:[function(require,module,exports){
'use strict';
// jQuery extensions

module.exports = function () {
    // params
    // toggleClass - required
    // triggerSelector - optional. the selector for the element that triggers the event handler. defaults to the child elements of the list.
    // eventName - optional. defaults to 'click'
    $.fn.toggledList = function (options) {
        if (!options.toggleClass) {
            return this;
        }
        var list = this;
        return list.on(options.eventName || 'click', options.triggerSelector || list.children(), function (e) {
            e.preventDefault();
            var classTarget = options.triggerSelector ? $(this).parent() : $(this);
            classTarget.toggleClass(options.toggleClass);
            // execute callback if exists
            if (options.callback) {
                options.callback();
            }
        });
    };

    $.fn.syncHeight = function () {
        var arr = $.makeArray(this);
        arr.sort(function (a, b) {
            return $(a).height() - $(b).height();
        });
        return this.height($(arr[arr.length - 1]).height());
    };
};

},{}],28:[function(require,module,exports){
'use strict';

var $main = $('#main'),
    $footer = $('#footernew'),
    $banner = $('.banner_prostaff');

var megamenu = {
    globalTimer: 0,
    init: function init() {
        megamenu.megamenuEvent();
    },
    open: function open() {

        //var $width = $('#brand-tabs-header').width();
        // To make default menu based on the brand active
        $('#brand-tabs-header > ul > li.active .mobile-main-menu-heading').trigger('click');
        $('#container').addClass('js-container-active');
        $('.menu-toggle').addClass('js-menu-toggle');
        $('.menu-open-shadow').remove();
        $main.wrap('<div class=\'open-menu-wrap\'></div>');
        $('body').addClass('js-body');
        $('.open-menu-wrap').prepend($banner);
        $('.open-menu-wrap').append($footer).prepend('<a href=\'javascript:void(0);\' class=\'menu-open-shadow\'></a>');
        //$("#main, #footernew").prepend("<div class='menu-open-shadow'></div>")
        $('#container, .open-menu-wrap').animate({ marginLeft: '280px' }, 300);
        $('#brand-tabs-header').wrap('<div class=\'brand-active\'></div>');
        $('.brand-active').animate({ left: '0' }, 300);
        $('.banner_prostaff').animate({ left: '280px' }, 300);
        $('.owl-carousel').find('.owl-item, .owl-item img').trigger('mouseenter');
    },
    close: function close() {
        $('#container, .open-menu-wrap').animate({ marginLeft: '0' }, 300);
        $('.banner_prostaff').animate({ left: '0' }, 300);
        $('#container').removeClass('js-container-active');
        $('body').removeClass('js-body');
        $('.owl-carousel').find('.owl-item, .owl-item img').trigger('mouseout');
        $('#main, #footernew').unwrap();
        $('.magnifier-icon').removeClass('js-magnifier-icon-active');
        $('.menu-toggle').removeClass('js-menu-toggle');
        $('#brand-tabs-header').unwrap();
        setTimeout(function () {
            $(window).scrollTop(0);
        }, 300);
    },
    megamenuEvent: function megamenuEvent($con) {
        if ($con == null) {
            $con = $('#brand-tabs-header > ul > li .megamenudrop');
        }
        $con.each(function () {
            var maxlength = 24;
            var $mega = $(this);
            //var textlinklength = $(this).find('> a').length;
            var divlength = 4;
            if ($(this).attr('id') == 'rapala') {
                divlength = 6;
            } else if ($(this).attr('id') == 'vmc') {
                divlength = 6;
            } else if ($(this).attr('id') == 'luhrjensen') {
                divlength = 4;
            } else if ($(this).attr('id') == 'sufix') {
                divlength = 6;
            } else if ($(this).attr('id') == 'storm') {
                divlength = 4;
            } else if ($(this).attr('id') == 'triggerx') {
                divlength = 4;
            } else if ($(this).attr('id') == 'bluefox') {
                divlength = 4;
            } else if ($(this).attr('id') == 'terminator') {
                divlength = 4;
            } else if ($(this).attr('id') == 'williamson') {
                divlength = 4;
            } else if ($(this).attr('id') == 'strikemaster') {
                divlength = 6;
            } else if ($(this).attr('id') == 'marcum') {
                divlength = 6;
            } else if ($(this).attr('id') == 'otter') {
                divlength = 6;
            } else if ($(this).attr('id') == 'iceforce') {
                divlength = 4;
            }
            //var intial = 0;
            var end = maxlength;
            var datalist = '';
            var brandlist = $(this).find('.brand-assets').clone();
            var containerwidth = $('.megamenu-drop .wrapper').width() / divlength + 'px';
            var lasttext = '';
            var prev = '';
            //var next = '';
            $mega.find('.brand-assets').remove();

            for (var i = 1; i <= divlength; i++) {
                $mega.append('<div class="menulist menulist-' + i + '" style="width:' + containerwidth + '"></div>');
                $mega.find('.mega_subcategory').each(function () {
                    if ($(this).find('a.level-1').eq(0).hasClass('column-' + i)) {
                        datalist = $(this).html();
                        $mega.find('.menulist-' + i).append(datalist);
                    }
                });
                if (i == divlength) {
                    $mega.find('.menulist-' + i).append(brandlist);
                }
            }

            $mega.find('.menulist').each(function ($i) {
                $i = $i + 1;
                if ($(this).find('> a').length > maxlength) {
                    end = $(this).find('> a').length;
                    if (end > maxlength) {
                        datalist = $(this).find('> a').slice(maxlength, end).clone();
                        if ($mega.find('.menulist-' + ($i + 1)).length != 0) {
                            $mega.find('.menulist-' + ($i + 1)).prepend(datalist);
                        }
                    }
                }
                if ($i != 1) {
                    if ($mega.find('.menulist-' + $i + '> a').eq(0).hasClass('level-2')) {
                        prev = $i - 1;
                        lasttext = $mega.find('.menulist-' + prev + '> a.level-1').last().attr('hreflang');
                        $mega.find('.menulist-' + $i).prepend('<div class="level-continue">' + lasttext + ', Continued</div>');
                    }
                }
                $(this).find('> a').slice(maxlength, end).remove();
            });
            $mega.find('.mega_subcategory').remove();
        });
        /* Click event for brands to see sub menus in mobile */
        $('#brand-tabs-header > ul > li .mobile-main-menu-heading').on('click', function (e) {
            if ($(window).width() <= 959) {
                e.preventDefault();
                var $this = $(this).closest('li');
                $this.closest('ul').addClass('hide-after');
                $this.siblings('li').removeClass('js-sub-menu-active').addClass('js-sub-menu-inactive');
                $this.removeClass('js-sub-menu-inactive').addClass('js-sub-menu-active');
                $this.find('.megamenu-drop').animate({ 'left': [0, 'easeOutExpo'] });
                $this.find('.shop-rapala').each(function () {
                    var $curObj = $(this);
                    if (!$curObj.closest('.sub-category-section-1').hasClass('js-active-sub-menu')) {
                        $curObj.next('.sub-cat-drop-down').trigger('click');
                    }
                });
                $this.find('.menulist .sub-category-section-1 > a').each(function () {
                    var menuList = $(this).closest('.menulist');
                    var mainContent = $(this).closest('.sub-category-section-1');
                    $(mainContent).find('.sub-cat-drop-down').removeAttr('style');
                    var achorWidth = $(this).width();
                    var dropDownWisth = $(menuList).width() - achorWidth;
                    dropDownWisth = dropDownWisth - 70;
                    if (dropDownWisth > 17) {
                        $(mainContent).find('.sub-cat-drop-down').width(dropDownWisth);
                    }
                });
            } else if ($(window).width() > 959 && $(window).width() < 1025) {
                var deviceAgent = navigator.userAgent.toLowerCase(),
                    deviceType = deviceAgent.match(/(iphone|ipod|ipad|android|blackBerry)/);
                if (deviceType[0] == 'iphone' || deviceType[0] == 'ipad') {
                    /*$(".mobile-main-menu-heading > a").removeClass("selected");
                    if(!$(this).hasClass('selected')) {
                        e.preventDefault();
                        megamenu.megamenuEvent();
                        $(this).addClass('selected');
                        return false;
                    }
                    else {
                        return true;
                    }*/
                }
            }
        });
        /* Click event for to see all the brands in mobile */
        $('body').off('click', '.see-all-brands').on('click', '.see-all-brands', function (e) {
            //var $width = $('#brand-tabs-header').width();
            if ($(window).width() <= 959) {
                e.preventDefault();
                var $width = $('#brand-tabs-header').width();
                var $this = $(this).closest('li');
                $this.find('.megamenu-drop').animate({ 'left': [$width, 'easeOutExpo'] });
                $this.siblings('li').removeClass('js-sub-menu-inactive');
                $this.closest('ul').removeClass('hide-after');
                setTimeout(function () {
                    if ($this.find('.megamenu-drop').position().left == $width) {

                        $this.removeClass('js-sub-menu-active');
                    }
                }, 400);
            }
        });

        /* Click event for sub menu drop down in mobile */
        $('body').off('click', '.sub-category-section-1 .sub-cat-drop-down').on('click', '.sub-category-section-1 .sub-cat-drop-down', function (e) {
            if ($(window).width() <= 959) {
                if (!$(this).hasClass('no-click')) {
                    e.preventDefault();
                    var $this = $(this).closest('.sub-category-section-1');
                    if (!$this.hasClass('js-active-sub-menu')) {
                        $this.addClass('js-active-sub-menu');
                        $this.find('.sub-category-section-2').removeAttr('style');
                        $this.find('.sub-category-section-2').slideDown();
                    } else {
                        $this.find('.sub-category-section-2').slideUp();
                        $this.delay(1000).removeClass('js-active-sub-menu');
                    }
                }
            }
        });
        // main menu toggle
        $('body').off('click', '.menu-toggle').on('click', '.menu-toggle', function (e) {
            e.preventDefault();
            if ($(window).width() <= 959) {
                if (!$('#container').hasClass('js-container-active')) {
                    megamenu.open();
                } else {
                    megamenu.close();
                }
            }
        });
        $('body').off('touchstart click', 'a.menu-open-shadow').on('touchstart click', 'a.menu-open-shadow', function (e) {
            e.preventDefault();
            if ($(window).width() <= 959) {
                if (!$('#container').hasClass('js-container-active')) {
                    megamenu.open();
                } else {
                    megamenu.close();
                }
            }
        });
        $('body').off('click', 'a.magnifier-icon').on('click', 'a.magnifier-icon', function (e) {
            e.preventDefault();
            if ($(window).width() <= 959) {
                //var $width = $('#brand-tabs-header').width();
                if (!$('#container').hasClass('js-container-active')) {
                    $('.magnifier-icon').addClass('js-magnifier-icon-active');
                    megamenu.open();
                    if ($('.magnifier-icon').hasClass('js-magnifier-icon-active')) {
                        $('#container').find('.simplesearchinput').focus();
                    }
                }
            }
        });

        // Mega menu events for window width greater than 959
        $('#brand-tabs-header > ul > li').mouseenter(function () {
            var $id = $(this).find('.mobile-main-menu-heading > a').attr('class');
            var $this = $(this);

            if ($(window).width() > 959) {
                $('.owl-carousel').find('.owl-item, .owl-item img').trigger('mouseenter');
                $this.siblings('li').find('.megamenudrop, .megamenu-drop').hide();
                $('.accountcontent').hide();
                clearTimeout(megamenu.globalTimer);
                //megamenu.globalTimer == 0;
                $('#brand-tabs-header li').removeClass('current');
                if ($this.find('.megamenudrop').find('a').length != 0) {
                    $this.find('.megamenudrop').show();
                    $this.find('.megamenu-drop').show();
                    //$('.megamenudrop[id="'+ $id +'"]').closest('.mega-menu').find('.mask').css('left',$(this).offset().left);
                    //$('.megamenudrop[id="'+ $id +'"]').closest('.mega-menu').find('.mask').attr('href',$(this).find('a').attr('href'));
                }
                var containerwidth = $('.megamenu-drop .wrapper').width() / $('#' + $id + ' .menulist').length;
                containerwidth = containerwidth - 21;
                $('#' + $id + ' .menulist').removeAttr('style');
                $('#' + $id + ' .menulist').width(containerwidth);
                megamenu.syncheight($('#' + $id + '.megamenudrop .menulist'));

                $(this).addClass('current');
                if (!$(this).hasClass('active')) {
                    $('#brand-tabs-header li.active').addClass('inactive');
                } else {
                    $(this).removeClass('inactive');
                }
                $('.brand-tabs-header-mask').show();
            }
        }).mouseleave(function () {

            if ($(window).width() > 959) {
                $('.owl-carousel').find('.owl-item, .owl-item img').trigger('mouseout');
                /*var deviceAgent = navigator.userAgent.toLowerCase(),
                deviceType = deviceAgent.match(/(iphone|ipod|ipad|android|blackBerry)/);
                if(deviceType[0] == "iphone" || deviceType[0] == "ipad"){
                    var $this = $(this);
                    $this.find(".mobile-main-menu-heading > a").removeClass('selected');
                }*/
            }
        });

        /** single click redirecting of megamenu categories*/
        /*$('.rapala_device .menulist a').mouseenter(function(){
            window.location.href = $(this).attr('href');
        });*/
        $('#brand-tabs-header').mouseleave(function () {
            if ($(window).width() > 959) {
                $('.megamenu-drop').hide();
                $('.megamenudrop').hide();
                $('#brand-tabs-header > ul > li.active').removeClass('inactive');
                $('#brand-tabs-header > ul > li').removeClass('current');
            }
        });

        $('.brand-tabs-header-mask').mouseenter(function () {
            if ($(window).width() > 959) {
                $('.megamenu-drop').hide();
                $('.megamenudrop').hide();
                $('#brand-tabs-header > ul > li.active').removeClass('inactive');
                $('#brand-tabs-header > ul > li').removeClass('current');
                $(this).hide();
            }
        });

        /*$(".rapala_device #brand-tabs-header a").click(function(e){
            e.preventDefault();
            if($(this).hasClass('selected')){
                $(this).removeClass('selected');
                window.location.href = $(this).attr('href');
            }else{
                $(this).closest("li").siblings().find("a").removeClass('selected');
                $(this).addClass('selected');
            }
        });*/
    },
    syncheight: function syncheight($sel) {
        var current = 0;
        if ($($sel).hasClass('menulist')) {
            $sel.each(function () {
                if ($(this).height() > current) {
                    current = $(this).height();
                }
            });
        } else {
            $sel.each(function () {
                if ($(this).height() > current) {
                    current = $(this).height();
                }
            });
        }
        $sel.height(current);
    }
};

module.exports = megamenu;

},{}],29:[function(require,module,exports){
'use strict';

var util = require('./util');
//bonusProductsView = require('./bonus-products-view');

var timer = {
    id: null,
    clear: function clear() {
        if (this.id) {
            window.clearTimeout(this.id);
            delete this.id;
        }
    },
    start: function start(duration, callback) {
        this.id = setTimeout(callback, duration);
    }
};

var minicart = {
    url: util.ajaxUrl(Urls.addProduct),
    init: function init() {
        minicart.reset();
        $('.checkoutminicart').slimscroll();
        this.$el = $('#minicart');
        this.$content = this.$el.find('.minicartcontent');
        jQuery('.minicarticon-cont').on('mouseover touchstart', function () {
            if (!minicart.isShow()) {
                minicart.hoverSlide();
            }
            $('.Custom-tooltip, .cvc_tooltip, .ordergothrough_tooltip').each(function () {
                if ($('.rapala_device').length == 1) {
                    jQuery(this).tooltipster({
                        content: jQuery(this).find('.tooltipcontainer').html(),
                        contentAsHTML: true,
                        maxWidth: 300,
                        touchDevices: true,
                        trigger: 'click'
                    });
                } else {
                    jQuery(this).tooltipster({
                        content: jQuery(this).find('.tooltipcontainer').html(),
                        contentAsHTML: true,
                        maxWidth: 300,
                        touchDevices: true
                    });
                }
            });
        });
        // register close button event
        $('.minicartcontent .minicartclose').click(function () {
            // reset all the events bindings
            minicart.reset();
            minicart.close(0);
            $('.rapala_device .minicart-button').removeClass('clicked');
        });
        $('.minicartcontent').click(function () {
            clearTimeout(minicart.timer);
            minicart.timer = null;
        });
        $('.minicart').mouseenter(function () {
            minicart.setminicarheight();
            clearTimeout(minicart.timer);
            minicart.timer = null;
            if ($('.minicartcontent').is(':animated')) {
                $('.minicartcontent').stop();
                $('.minicartcontent').css({ 'opacity': '1', 'height': 'auto' });
                minicart.init();
            }
        }).mouseleave(function () {
            $('.rapala_device .minicart-button').removeClass('clicked');
            clearTimeout(minicart.timer);
            minicart.timer = null;
            // after a time out automatically close it
            minicart.timer = setTimeout('minicart.close()', 30);
            minicart.close();
        });

        if ($('.mini-cart-product').length > 1) {
            $('.minicartcontent').removeClass('lessone');
            $('.minicartcontent .slimScrollDiv').removeClass('less');
        } else {
            $('.minicartcontent').addClass('lessone');
            $('.minicartcontent .slimScrollDiv').addClass('less');
        }
    },

    // returns a boolean if a minicart is visible/shown or hidden
    isShow: function isShow() {
        return jQuery('.minicartcontent').css('display') == 'none' ? false : true;
    },

    // reset minicart
    reset: function reset() {
        jQuery('.minicarticon-cont').unbind('hover');
        jQuery('.minicart').unbind('mouseenter').unbind('mouseleave');
    },

    enablehovereffect: function enablehovereffect() {
        jQuery('.minicarttotal').mouseenter(function () {
            minicart.setminicarheight();
            //clearTimeout(minicart.timer);
            //minicart.timer = null;
            timer.clear();
            if ($('.minicartcontent').is(':animated')) {
                $('.minicartcontent').stop();
                $('.minicartcontent').css({ 'opacity': '1', 'height': 'auto' });
                minicart.init();
            }
        });
        jQuery('.minicarttotal').mouseleave(function () {
            jQuery('.minicartcontent').fadeOut(1000);
            $('.rapala_device .minicart-button').removeClass('clicked');
        });
    },
    /**
     * @function
     * @description Shows the given content in the mini cart
     * @param {String} A HTML string with the content which will be shown
     */
    // shows the given content in the mini cart
    show: function show(html) {
        jQuery('#minicart').html(html);
        // bind all the events
        minicart.init();
        if (minicart.suppressSlideDown && minicart.suppressSlideDown()) {
            // do nothing
            // the hook 'MiniCart.suppressSlideDown()' should have done
            // the refresh
        } else {
            minicart.slide();
        }
    },
    setminicarheight: function setminicarheight() {
        var scrollheight = $('.mini-cart-product:eq(0)').height();
        if ($('.mini-cart-product').length > 1) {
            var scrollheight2 = $('.mini-cart-product:eq(1)').height();
            var avgheight = (scrollheight + scrollheight2) / 2;
            var newscrollheight = avgheight + (avgheight - avgheight / 4) + 20;

            $('.slimScrollDiv').css('height', newscrollheight + 'px');
            $('.checkoutminicart').css('height', newscrollheight + 'px');
        } else {
            var heightImg = $('.minibrandcolumn').find('a').height();
            var heightImg1 = $('.minibrandcolumn').find('img').height();

            while (scrollheight < heightImg + heightImg1) {
                heightImg = $('.minibrandcolumn').find('a').height();
                scrollheight = $('.tr_rotation').height();
                $('.slimScrollDiv').css('height', scrollheight + 'px');

                var scrollheight1 = $('.checkoutminicart').height();
                if (scrollheight1 > scrollheight) {
                    $('.checkoutminicart').css('height', scrollheight1 + 'px');
                } else {
                    $('.checkoutminicart').css('height', scrollheight + 'px');
                }
            }
        }
    },
    // hook which can be replaced by individual pages/page types (e.g.
    // cart)
    suppressSlideDown: function suppressSlideDown() {
        return false;
    },
    /**
     * @function
     * @description Slides down and show the contents of the mini cart
     */
    slide: function slide() {
        timer.clear();
        // show the item
        this.$content.slideDown('slow');
        // after a time out automatically close it
        timer.start(6000, this.close.bind(this));

        if (minicart.suppressSlideDown && minicart.suppressSlideDown()) {
            return;
        }
        // register close button event
        jQuery('.minicartcontent .minicartclose').click(function () {
            // reset all the events bindings
            minicart.reset();
            minicart.close(0);
            $('.rapala_device .minicart-button').removeClass('clicked');
        });

        //Removing padding from the banner if it doesnot contains data/image
        if ($('.slot_banner').find('img').length == 0) {
            $('.slot_banner').css('padding', '0 0 0px 0');
        }

        // register the mouseout events
        jQuery('.minicartcontent').mouseenter(function () {
            minicart.setminicarheight();
            clearTimeout(minicart.timer);
            minicart.timer = null;
            if ($(this).is(':animated')) {
                $(this).stop();
                $(this).css({ 'opacity': '1', 'height': 'auto' });
                minicart.init();
            }
        });
        $('.minicart').mouseleave(function () {
            $('.rapala_device .minicart-button').removeClass('clicked');
            clearTimeout(minicart.timer);
            minicart.timer = null;
            // after a time out automatically close it
            minicart.timer = setTimeout('minicart.close()', 30);
            minicart.init();
            minicart.close();
        });

        // show the item
        jQuery('.minicartcontent').slideDown('2000', function () {
            minicart.setminicarheight();
        });
        // show("slide",
        // { direction:
        // "up" },
        // 1000);

        // add the open class to the total
        jQuery('.minicart .minicarttotal').addClass('open');

        jQuery('.summaryproduct').each(function () {
            var $this = jQuery(this);
            var height = '';
            if ($this.find('.imageexpanded').is(':visible')) {
                $this.find('.hideoncollapse').hide().end().find('.attribute').addClass('collapsed');
                height = $(this).find('.attributes').height();
                height += $(this).find('.name').height();
                jQuery(this).find('.image').css({
                    'min-height': height
                });
            }
            if ($this.find('.imagecollapsed').is(':visible')) {
                height = $(this).find('.attributes').height();
                height += $(this).find('.name').height() + 30;
                jQuery(this).find('.image').css({
                    'min-height': height
                });
            }
        });

        clearTimeout(minicart.timer);
        minicart.timer = null;

        // after a time out automatically close it
        minicart.timer = setTimeout('minicart.close()', 1000);

        // Google Analytics code to track mini cart open.
        if (isEventTrackingEnabled && isGoogleAnalyticsEnabled) {
            googleAnalyticsEvents.miniCart();
        }
    },
    hoverSlide: function hoverSlide() {
        if (minicart.suppressSlideDown && minicart.suppressSlideDown()) {
            return;
        }
        // register close button event
        jQuery('.minicartcontent .minicartclose').click(function () {
            // reset all the events bindings
            minicart.reset();
            minicart.close(0);
            $('.rapala_device .minicart-button').removeClass('clicked');
        });

        //Removing padding from the banner if it doesnot contains data/image
        if ($('.slot_banner').find('img').length == 0) {
            $('.slot_banner').css('padding', '0 0 0px 0');
        }

        // register the mouseout events
        jQuery('.minicartcontent').mouseenter(function () {
            minicart.setminicarheight();
            clearTimeout(minicart.timer);
            minicart.timer = null;
            if ($(this).is(':animated')) {
                $(this).stop();
                $(this).css({ 'opacity': '1', 'height': 'auto' });
                minicart.init();
            }
        });
        $('.minicart').mouseleave(function () {
            $('.rapala_device .minicart-button').removeClass('clicked');
            clearTimeout(minicart.timer);
            minicart.timer = null;
            // after a time out automatically close it
            minicart.timer = setTimeout('minicart.close()', 30);
            minicart.close();
        });

        // show the item
        jQuery('.minicartcontent').slideDown('2000', function () {
            minicart.setminicarheight();
        });
        // show("slide",
        // { direction:
        // "up" },
        // 1000);

        // add the open class to the total
        jQuery('.minicart .minicarttotal').addClass('open');

        jQuery('.summaryproduct').each(function () {
            var $this = jQuery(this);
            var height = '';
            if ($this.find('.imageexpanded').is(':visible')) {
                $this.find('.hideoncollapse').hide().end().find('.attribute').addClass('collapsed');
                height = $(this).find('.attributes').height();
                height += $(this).find('.name').height();
                jQuery(this).find('.image').css({
                    'min-height': height
                });
            }
            if ($this.find('.imagecollapsed').is(':visible')) {
                height = $(this).find('.attributes').height();
                height += $(this).find('.name').height() + 30;
                jQuery(this).find('.image').css({
                    'min-height': height
                });
            }
        });

        // Google Analytics code to track mini cart open.
        if (isEventTrackingEnabled && isGoogleAnalyticsEnabled) {
            googleAnalyticsEvents.miniCart();
        }

        jQuery('.minicarttotal').addClass('enablehover');
        minicart.enablehovereffect();

        $('#main , #header , #footernew, #footernew .row').unbind('touchstart').bind('touchstart', function (e) {
            if ($('.minicartcontent').is(':visible')) {
                var currentLinkLength = $(e.target).closest('.minicartcontent').length;
                var minicarttotal = $(e.target).closest('.minicart-button').length;
                if (currentLinkLength === 0 && minicarttotal === 0) {
                    clearTimeout(minicart.timer);
                    minicart.timer = null;
                    // after a time out automatically close it
                    minicart.timer = setTimeout('minicart.close()', 30);
                    minicart.reset();
                    minicart.close();
                    minicart.init();
                    $('.rapala_device .minicart-button').removeClass('clicked');
                } else if (minicarttotal > 0) {
                    $('.rapala_device .minicart-button').trigger('click');
                }
            }
        });
    },
    // adds a product to the mini cart
    // @params
    // progressImageSrc - source/url of the image to show when the item
    // is being added to the cart
    // postdata - form data containing the product information to be
    // added to mini-cart
    // callback - call back function/handler
    add: function add(progressImageSrc, postdata, callback) {
        // get the data of the form as serialized string
        //var postdata = postdata;

        // get button reference
        var addButtons = [];

        // the button to update
        var addButton = null;

        // it is an array of buttons, but we need only one all
        // other combinations are strange so far
        if (addButtons.length == 1) {
            addButton = addButtons[0];
        }

        var previousImageSrc = null;

        // show progress indicator
        if (addButton != null) {
            previousImageSrc = addButton.src;
            addButton.src = progressImageSrc;
        }

        // handles successful add to cart
        var handlerFunc = function handlerFunc(req) {
            // hide progress indicator
            if (addButton != null) {
                addButton.src = previousImageSrc;
            }

            // replace the content
            jQuery('#minicart').html(req);

            // bind all the events
            minicart.init();
            if ($('.mini-cart-product').length > 1) {
                $('.checkoutminicart').slimscroll({
                    railVisible: true,
                    alwaysVisible: true
                });
                $('.minicarttable').find('thead').first().addClass('theadfixedTop');
                $('.checkoutminicart').find('.cartordertotals').removeClass('carttotals');
                $('.checkoutminicart').find('.minicarttable').removeClass('miniwithoutScroll');
                $('.minicartcontent').find('.minicarttableheader').removeClass('miniwithoutScrollhead');
                $('.minicarttableheader').css('border-bottom', '1px solid #ccc');
            } else {
                $('.minicarttable').find('.theadfixedTop').removeClass('theadfixedTop');
                $('.minicarttable').find('.fixedTop').removeClass('fixedTop');
                $('.minicart').find('.cartordertotals').addClass('carttotals');
                $('.checkoutminicart').find('.minicarttable').addClass('miniwithoutScroll');
                $('.minicartcontent').find('.minicarttableheader').addClass('miniwithoutScrollhead');
                $('.minicarttableheader').css('border-bottom', '1px solid #ccc');
            }
            $('.minicarttable .mini-cart-product:last-child').find('.mini-cart-product').css('border', '0px');

            if ($('body').hasClass('rapala_device')) {
                $('.checkoutminicart').find('.minicarttable').removeClass('miniwithoutScroll');
                // $(".minicarttable .tr_rotation:last-child").find('.minirow').css('border','1px');
                $('.minicarttable').find('thead').first().addClass('theadfixedTop');
                $('.minicarttable .mini-cart-product:last-child').find('.mini-cart-product').css('border', '0px');
                $('.minicarttableheader').css('border-bottom', '1px solid #ccc');
            }

            if (minicart.suppressSlideDown && minicart.suppressSlideDown()) {
                // do nothing
                // the hook 'MiniCart.suppressSlideDown()' should have
                // done the refresh
            } else {
                minicart.slide();
                minicart.setminicarheight();
                if (callback) {
                    callback();
                }
            }
            $('#pdpMain .addtocartconfirm-tooltip').fadeIn(400).show().delay(1500).fadeOut(400);
            // fire the BonusDiscountLineItemCheck event so we can check
            // if there is a bonus discount line item
            /*eslint-disable */
            jQuery(document).trigger(jQuery.Event('BonusDiscountLineItemCheck'));
            /*eslint-enable */
        };

        // handles add to cart error
        var errFunc = function errFunc() {
            // hide progress indicator
            if (addButton != null) {
                addButton.src = previousImageSrc;
            }
        };

        // closes a previous mini cart
        minicart.close();

        // add the product
        jQuery.ajax({
            type: 'POST',
            url: minicart.url,
            cache: true,
            data: postdata,
            success: handlerFunc,
            error: errFunc
        });
    },

    // closes the mini cart with given delay
    close: function close(delay) {
        if (minicart.timer != null || delay == 0) {
            clearTimeout(minicart.timer);
            minicart.timer = null;
            jQuery('.minicartcontent').fadeOut(1000);
            // hide with "slide" causes to fire mouse enter/leave events
            // sometimes infinitely thus changed it to fadeOut
            // add the open class to the total
            jQuery('.minicart .minicarttotal').removeClass('open');
            jQuery('.minicartcontent .minicartclose').unbind('click');
        }
    }
};

module.exports = minicart;

},{"./util":63}],30:[function(require,module,exports){
'use strict';

var util = require('./util');

var page = {
    title: '',
    type: '',
    params: util.getQueryStringParams(window.location.search.substr(1)),
    redirect: function redirect(newURL) {
        setTimeout(function () {
            window.location.href = newURL;
        }, 0);
    },
    refresh: function refresh() {
        setTimeout(function () {
            window.location.assign(window.location.href);
        }, 500);
    }
};

module.exports = page;

},{"./util":63}],31:[function(require,module,exports){
'use strict';

var giftcert = require('../giftcert'),
    tooltip = require('../tooltip'),
    util = require('../util'),
    dialog = require('../dialog'),
    page = require('../page'),
    validator = require('../validator');

/**
 * @function
 * @description Initializes the events on the address form (apply, cancel, delete)
 * @param {Element} form The form which will be initialized
 */
function initializeAddressForm() {
    var $form = $('#edit-address-form');

    $form.find('input[name="format"]').remove();
    tooltip.init();
    //$("<input/>").attr({type:"hidden", name:"format", value:"ajax"}).appendTo(form);

    $form.on('click', '.apply-button', function (e) {
        e.preventDefault();
        if (!$form.valid()) {
            return false;
        }
        var url = util.appendParamToURL($form.attr('action'), 'format', 'ajax');
        var applyName = $form.find('.apply-button').attr('name');
        var options = {
            url: url,
            data: $form.serialize() + '&' + applyName + '=x',
            type: 'POST'
        };
        $.ajax(options).done(function (data) {
            if (typeof data !== 'string') {
                if (data.success) {
                    dialog.close();
                    page.refresh();
                } else {
                    window.alert(data.message);
                    return false;
                }
            } else {
                $('#dialog-container').html(data);
                account.init();
                tooltip.init();
            }
        });
    }).on('click', '.cancel-button, .close-button', function (e) {
        e.preventDefault();
        dialog.close();
    }).on('click', '.delete-button', function (e) {
        e.preventDefault();
        if (window.confirm(String.format(Resources.CONFIRM_DELETE, Resources.TITLE_ADDRESS))) {
            var url = util.appendParamsToUrl(Urls.deleteAddress, {
                AddressID: $form.find('#addressid').val(),
                format: 'ajax'
            });
            $.ajax({
                url: url,
                method: 'POST',
                dataType: 'json'
            }).done(function (data) {
                if (data.status.toLowerCase() === 'ok') {
                    dialog.close();
                    page.refresh();
                } else if (data.message.length > 0) {
                    window.alert(data.message);
                    return false;
                } else {
                    dialog.close();
                    page.refresh();
                }
            });
        }
    });
    if ($('.logerror:visible').length > 0) {
        $('.account-logs .returningcustomers').find('.accountemail').addClass('errorclient');
        $('.account-logs .logincustomers .login_password').addClass('errorclient');
        //$(".pt_account .wrapper .account-section .returningcustomers .value ").css("margin-bottom", "0");
    }
    $('.registration-button').click(function () {
        var maskheight = $('.createan-account .formsubmit').parent('div').outerHeight();
        var realForm = jQuery(this).closest('form');
        if (!realForm.valid()) {
            $(this).closest('.form-row').addClass('inputlabel');
            realForm.find('.max-length-error').each(function () {
                if ($(this).closest('.value').find('input').val().length > 0) {
                    realForm.find('.max-length-error').remove();
                }
            });
            return false;
        } else {
            $('.registration-button span.loadImage').css('display', 'block');
            $('.createan-account .formsubmit').css({ 'height': maskheight + 'px', 'display': 'block' });
        }
    });
    if ($('.existing_register:visible').length > 0) {
        $('.createan-account .registration').find('.accountemail').addClass('errorclient');
        $('.createan-account .registration').find('.formfield_email').find('.labeltext').addClass('inputlabel');
        $('.createan-account .registration').find('.formfield_email').find('.requiredindicator').addClass('inputlabel');
        if ($('.registration').find('input.required').val().length > 0) {
            $('.registration').find('.clearbutton').show();
        }
    }
    if ($('.account-email.err.log_error:visible').length > 0) {
        $('.returningcustomers').find('.formfield_email').find('.labeltext').addClass('inputlabel');
        $('.returningcustomers').find('.formfield_email').find('.requiredindicator').addClass('inputlabel');
    }
    $('.signinbtn').click(function () {
        var maskheight = $('.account-logs .formsubmit').parent('div').outerHeight();
        var maskheightwishlist = $('.wish-logs .formsubmit').parent('div').outerHeight();
        var realForm = jQuery(this).closest('form');
        if (!realForm.valid()) {
            return false;
        } else {
            //$(this).closest('.formactions').addClass('loadImage');
            $('.signinbtn span.loadImage').css('display', 'block');
            $('.account-logs .formsubmit').css({ 'height': maskheight + 'px', 'display': 'block' });
            $(this).closest('.wish-logs').find('.formsubmit').css({
                'height': maskheightwishlist + 'px',
                'display': 'block'
            });
        }
    });
    if ($('.ui-login .header-forgot-pwd').length > 0) {
        $(this).find('input.required').bind('keydown keyup focusin focusout keypress', function () {
            //e.stopPropagation();
            $(this).closest('.value').find('errorclient').remove();
        });
        $('.ui-login header-forgot-pwd').find('input.required').bind('focusin', function () {
            $(this).closest('.value').find('errorclient').remove();
        });
    }
    $('.sample-section').click(function () {
        if (!$(this).find('.sample_mail_main').is(':visible')) {
            $(this).find('.sample_mail_main').slideDown(500);
        }
    });
    validator.init();
}

/**
 * @private
 * @function
 * @description Toggles the list of Orders
 */
function toggleFullOrder() {
    $('.order-items').find('li.hidden:first').prev('li').append('<a class="toggle">View All</a>').children('.toggle').click(function () {
        $(this).parent().siblings('li.hidden').show();
        $(this).remove();
    });
}

/**
 * @private
 * @function
 * @description Binds the events on the address form (edit, create, delete)
 */
function initAddressEvents() {
    var addresses = $('#addresses');
    if (addresses.length === 0) {
        return;
    }

    addresses.on('click', '.address-edit, .address-create', function (e) {
        e.preventDefault();
        dialog.open({
            url: this.href,
            options: {
                dialogClass: 'addressadd',
                open: initializeAddressForm
            }
        });
    }).on('click', '.delete', function (e) {
        e.preventDefault();
        if (window.confirm(String.format(Resources.CONFIRM_DELETE, Resources.TITLE_ADDRESS))) {
            $.ajax({
                url: util.appendParamToURL($(this).attr('href'), 'format', 'ajax'),
                dataType: 'json'
            }).done(function (data) {
                if (data.status.toLowerCase() === 'ok') {
                    page.redirect(Urls.addressesList);
                } else if (data.message.length > 0) {
                    window.alert(data.message);
                } else {
                    page.refresh();
                }
            });
        }
    });
}

/**
 * @private
 * @function
 * @description Binds the events of the payment methods list (delete card)
 */
function initPaymentEvents() {
    $('.add-card').on('click', function (e) {
        e.preventDefault();
        dialog.open({
            //PREVAIL-Added  to handle validation issues
            url: $(e.target).attr('href'),
            options: {
                dialogClass: 'payment-settings',
                open: initializePaymentForm
            }
        });
    });

    var paymentList = $('.payment-list');
    if (paymentList.length === 0) {
        return;
    }

    util.setDeleteConfirmation(paymentList, String.format(Resources.CONFIRM_DELETE, Resources.TITLE_CREDITCARD));

    $('form[name="payment-remove"]').on('submit', function (e) {
        e.preventDefault();
        // override form submission in order to prevent refresh issues
        var button = $(this).find('.delete');
        $('<input/>').attr({
            type: 'hidden',
            name: button.attr('name'),
            value: button.attr('value') || 'delete card'
        }).appendTo($(this));
        var data = $(this).serialize();
        $.ajax({
            type: 'POST',
            url: $(this).attr('action'),
            data: data
        }).done(function () {
            page.redirect(Urls.paymentsList);
        });
    });
}

function initializePaymentForm() {

    $('#CreditCardForm').on('click', '.cancel-button', function (e) {
        e.preventDefault();
        dialog.close();
    });
}

/**
 * @private
 * @function
 * @description init events for the loginPage
 */
function initLoginPage() {
    //o-auth binding for which icon is clicked
    $('.oAuthIcon').bind('click', function () {
        $('#OAuthProvider').val(this.id);
    });

    //toggle the value of the rememberme checkbox
    $('#dwfrm_login_rememberme').bind('change', function () {
        if ($('#dwfrm_login_rememberme').attr('checked')) {
            $('#rememberme').val('true');
        } else {
            $('#rememberme').val('false');
        }
    });
}

/**
 * @private
 * @function
 * @description Binds the events of the order, address and payment pages
 */
function initializeEvents() {
    initializeAddressForm(); // JIRA PREV-63: 'Add Address' or 'Edit address' overlay changing to page after click on Apply button,when there is an error message on overlay.
    toggleFullOrder();
    initAddressEvents();
    initPaymentEvents();
    initLoginPage();
    if ($('.server-error').length > 0) {
        $(window).scrollTop($('.server-error').offset().top);
    }
    $('body').on('change input', '.desktop-accesscode', function () {
        var curValue = $(this).val();
        $('body').find('.mobile-accesscode').val(curValue);
        $('body').find('.mobile-accesscode').attr('value', curValue);
    });
    $('body').on('change input', '.mobile-accesscode', function () {
        var curValue = $(this).val();
        $('body').find('.desktop-accesscode').val(curValue);
        $('body').find('.desktop-accesscode').attr('value', curValue);
    });
}

var account = {
    init: function init() {
        initializeEvents();
        giftcert.init();
    },
    initCartLogin: function initCartLogin() {
        initLoginPage();
    }
};

module.exports = account;

},{"../dialog":23,"../giftcert":25,"../page":30,"../tooltip":61,"../util":63,"../validator":64}],32:[function(require,module,exports){
'use strict';

/**
 * @function Initializes the page events depending on the checkout stage (shipping/billing)
 */

exports.init = function () {
    var $blogLeftNav = $('#blog-left-nav'),
        $blogShowNav = $('#blog-nav-show');

    $blogLeftNav.on('click', '.arrow-light-container', function () {
        $(this).parents('.toggle-blog').toggleClass('expanded');
    });

    $blogShowNav.on('click', function () {
        $(this).toggleClass('active');
        $blogLeftNav.toggleClass('active');
    });
    $blogLeftNav.find('.blog-nav-level-2 li').each(function () {
        if ($(this).hasClass('active')) {
            $(this).parents('.toggle-blog').addClass('expanded');
        }
    });
};

},{}],33:[function(require,module,exports){
'use strict';

var account = require('./account'),
    bonusProductsView = require('../bonus-products-view'),
    quickview = require('../quickview'),
    validator = require('../validator'),
    cartStoreInventory = require('../storeinventory/cart');

/**
 * @private
 * @function
 * @description Binds events to the cart page (edit item's details, bonus item's actions, coupon code entry)
 */

function initQuickViewrecommButtons() {
    var $qvButton = $('.pt_cart .producttile #quickviewbutton');
    var $link = $(this).find('.thumb-link');
    $qvButton.attr({
        'href': $link.attr('href'),
        'title': $link.attr('title')
    }).appendTo(this);
    $qvButton.off('click').on('click', function (e) {
        e.preventDefault();
        quickview.show({
            url: $(this).attr('href').split('#')[0], //PREV JIRA PREV-255 :PLP: On Click Quick view navigating to a wrong page when user first changes the swatches. Taking only href.
            source: 'quickview'
        });
    });
}

function initQuickVieweditButtons() {
    var $qvButton = $('.pt_cart  table#cart-table td.itemtotalcolumn.cartactions .item-edit-details #quickviewbutton');
    var $link = $(this);
    $qvButton.attr({
        'href': $link.attr('href'),
        'title': $link.attr('title')
    }).appendTo(this);
    $qvButton.off('click').on('click', function (e) {
        e.preventDefault();
        quickview.show({
            url: $(this).attr('href').split('#')[0], //PREV JIRA PREV-255 :PLP: On Click Quick view navigating to a wrong page when user first changes the swatches. Taking only href.
            source: 'quickview'
        });
    });
}

function initializeEvents() {
    quickview.init();
    validator.init();
    initQuickViewrecommButtons();
    initQuickVieweditButtons();
    $('#cart-table').on('click', '.bonus-item-actions a, .item-details .bonusproducts a', function (e) {
        e.preventDefault();
        bonusProductsView.show(this.href);
    });
    /* used to slide toggle event in cart page promo code*/
    if ($('.pt_cart').length > 0) {
        $(this).find('.applycoupon .label').text('Have a Promo Code?');
        $('.couponcode .label').click(function () {
            var $curObj = $(this);
            var fieldSection = '';
            if ($(this).hasClass('pre_label')) {

                fieldSection = $curObj.closest('.cart-coupon-code').find('.promo-sec.pre-promo');
                if ($(fieldSection).is(':visible') == true) {
                    $(fieldSection).slideUp();
                } else {
                    $(fieldSection).slideDown();
                }
            } else if ($(this).hasClass('post-couponcode')) {
                fieldSection = $curObj.closest('.cart-coupon-code').find('.promo-sec.bottom-promo-section');
                if ($(fieldSection).is(':visible') == true) {
                    $(fieldSection).slideUp();
                } else {
                    $(fieldSection).slideDown();
                }
            }
        });
        var $curObj = $('.couponcode .label.post-couponcode');
        var fieldSection = $curObj.closest('.cart-coupon-code').find('.promo-sec.bottom-promo-section');
        if ($(fieldSection).length > 0) {
            if ($('.promo-sec.bottom-promo-section .error').length > 0) {
                $(fieldSection).slideDown();
                $('.promo-sec.bottom-promo-section').find('.couponinput').addClass('inputlabel');
                if ($(window).width() < 481) {
                    $('body, html').animate({
                        scrollTop: $('.couponcode .label.post-couponcode').offset().top
                    }, 600);
                }
            }
        }
        var $curObjtop = $('.couponcode .label.pre_label');
        var fieldSectiontop = $curObjtop.closest('.cart-coupon-code').find('.promo-sec.pre-promo');
        if ($(fieldSectiontop).length > 0) {
            if ($('.promo-sec.pre-promo .error').length > 0) {
                $(fieldSectiontop).slideDown();
                $('.promo-sec.pre-promo').find('.couponinput').addClass('inputlabel');
                $('body, html').animate({
                    scrollTop: $('.couponcode .label.pre_label').offset().top
                }, 600);
            }
        }
    }
    $('.promo-sec').find('.couponinput').click(function () {
        $('.promo-sec').find('.couponinput').removeClass('inputlabel');
    });

    var cartpromo = $('.pt_cart .upshift.cell.contentbox .contentboxcontent table#cart-table tr.cart-row td.itemtotalcolumn');
    cartpromo.each(function () {
        if ($(this).find('.promo-adjustment').length >= 1) {
            $(this).addClass('promodiv');
        } else {
            $(this).removeClass('promodiv');
        }
    });

    $('body').on('click', '.cartcoupon-apply', function () {
        var $curObj = $('.couponcode .label');
        var fieldSection = '';
        if ($(this).closest('.bottom-promo-section').length > 0) {
            $('.promo-applied-position').val('bottomsection');
            $('.promo-applied-position').attr('value', 'bottomsection');
            fieldSection = $curObj.closest('.cart-coupon-code').find('.promo-sec.bottom-promo-section');
            if ($(fieldSection).length > 0) {
                if ($('.error').length > 0) {
                    $(fieldSection).slideDown();
                    $('.promo-sec.bottom-promo-section').find('.couponinput').addClass('inputlabel');
                }
            }
        } else if ($(this).closest('.top-promo-section').length > 0) {
            $('.promo-applied-position').val('topsection');
            $('.promo-applied-position').attr('value', 'topsection');
            fieldSection = $curObj.closest('.cart-coupon-code').find('.promo-sec.top-promo-section');
            if ($(fieldSection).length > 0) {
                if ($('.error').length > 0) {
                    $(fieldSection).slideDown();
                    $('.promo-sec.top-promo-section').find('.couponinput').addClass('inputlabel');
                }
            }
        }
    });
    $('.pt_cart .cartrecommads_cont').css('height', '44px');
    // override enter key for coupon code entry
    $('form input.couponinput').on('keydown', function (e) {
        if (e.which === 13) {
            e.preventDefault();
            $(this).closest('form').find('.cartcoupon-apply').click();
        } // JIRA PREV-30 : Cart page:  Coupon Code is not applying, when the user hit enter key.
    });

    $('body').on('change,input', function () {
        var $curObj = $(this);
        $('body').find('.couponinput').val($curObj.val());
        $('body').find('.couponinput').attr('value', $curObj.val());
    });
    //to prevent multiple submissions of the form when removing a product from the cart
    var removeItemEvent = false;
    $('button[name$="deleteProduct"]').on('click', function (e) {
        if (removeItemEvent) {
            e.preventDefault();
        } else {
            removeItemEvent = true;
        }
    });
    var owl = $('.owl-carousel');
    owl.owlCarousel({
        items: 3,
        slideBy: 3,
        rewind: true,
        nav: true,
        loop: true,
        dots: false
    });
}

exports.init = function () {
    initializeEvents();
    if (SitePreferences.STORE_PICKUP) {
        cartStoreInventory.init();
    }
    account.initCartLogin();
};

},{"../bonus-products-view":17,"../quickview":54,"../storeinventory/cart":57,"../validator":64,"./account":31}],34:[function(require,module,exports){
'use strict';

var util = require('../../util'),
    uievents = require('../../uievents'),
    shipping = require('./shipping');

/**
 * @function
 * @description Selects the first address from the list of addresses
 */
exports.init = function () {
    var $form = $('.address');
    // select address from list
    $('select[name$="_addressList"]', $form).on('change', function () {
        var selected = $(this).children(':selected').first();
        var selectedAddress = $(selected).data('address');
        if (!selectedAddress) {
            if ($('.checkout').hasClass('billingsection')) {
                $('.addressoptions-addToAddressBook,.addressoptions-makedefault ').removeClass('hide');
                $('input[name$=\'shippingAddress_selectedaddress\']').val('');
                $('.selected-shipping-address').empty();
                $('input[name$=\'_addressid\']').val('');
                $('input[name$=\'_addressFields_firstName\']').val('');
                $('input[name$=\'_addressFields_lastName\']').val('');
                $('input[name$=\'_addressFields_address1\']').val('');
                $('input[name$=\'_addressFields_address2\']').val('');
                $('input[name$=\'_addressFields_city\']').val('');
                $('input[name$=\'_addressFields_postal\']').val('');
                $('input[name$=\'_addressFields_phone\']').val('');
                uievents.changeFormSelection(jQuery('select[name$=\'_addressFields_states_state\']')[0], '');
                uievents.changeFormSelection(jQuery('select.address-select')[0], '');
                $('.shipping-address-field-section').removeClass('hide');
                $('.selected-shipping-address, .new-address-field, .edit-address-field').addClass('hide');
                $('input[name$=\'_addressFields_phone\']').closest('div.phone').find('span.errorclient').remove();
                $('input[name$=\'_addressFields_postal\']').closest('div.zip').find('span.errorclient').remove();
                $('.addressform .form-row.custom-select').removeClass('customselect-error');
                $('.custom-select').each(function () {
                    var selectVal = $(this).find(':selected').text();
                    $(this).find('.selectorOut').text(selectVal);
                });
                $('a.clearbutton').hide();
                $('.shipping-address-field-section .form-row').find('input').removeClass('errorclient');
                uievents.customFields();
            } else {
                $('.selected-shipping-address, .new-address-field').addClass('hide');
                $('.shipping-address-field-section').removeClass('hide');
            }
            uievents.synccheckoutH();
            return;
        }
        $('.selected-shipping-address').empty();
        if (selectedAddress.address2 == null) {
            selectedAddress.address2 = '';
        }
        $('.selected-shipping-address').append(selectedAddress.firstName + ' ' + selectedAddress.lastName + '<br/>' + selectedAddress.address1 + ' ' + selectedAddress.address2 + '<br/>' + selectedAddress.city + ' ' + selectedAddress.stateCode + ' ' + selectedAddress.postalCode + '<br/>' + selectedAddress.phone);
        if ($('.checkout').hasClass('billingsection')) {
            var editAddressObject = {
                firstName: selectedAddress.firstName,
                lastName: selectedAddress.lastName,
                address1: selectedAddress.address1,
                address2: selectedAddress.address2,
                postalCode: selectedAddress.postalCode,
                city: selectedAddress.city,
                stateCode: selectedAddress.stateCode,
                countryCode: 'US',
                phone: selectedAddress.phone
            };
            $('.new-address-field').addClass('hide');
            $('.edit-address-field').attr('data-address', editAddressObject);
            $('.selected-shipping-address, .edit-address-field').removeClass('hide');
        } else {
            $('.selected-shipping-address, .new-address-field').removeClass('hide');
        }
        $('.shipping-address-field-section').addClass('hide');
        util.fillAddressFields(selectedAddress, $form);
        $('body').find('input[name$=_sameasshippingaddress]').removeAttr('checked');
        $('body').find('input[name$=_sameasshippingaddress]').closest('.custom-checkbox').find('.custom-link').removeClass('active');
        uievents.synccheckoutH();
        shipping.updateShippingMethodList();
        // re-validate the form
        /* JIRA PREV-95 : Highlighting the Credit card  details field, when the user select any saved address from the 'Select An Address' drop down.
           (logged-in user) .Commented to prevent form from re-validation.
        */
        //$form.validate().form();
    });
    /* if($("body").find("input[name$=_sameasshippingaddress]").is(":checked")) {
          var pageLoadSelectedAddress = $('select[name$="_addressList"]').children(':selected').first();
             var onPageLoadSelectedAddress = $(pageLoadSelectedAddress).data('address');
             if (!onPageLoadSelectedAddress) {
                 $(".selected-shipping-address, .new-address-field").addClass("hide");
                 return;
             }
             else {
                 var selectedAddress = onPageLoadSelectedAddress;
                 $(".selected-shipping-address").empty();
                 $(".selected-shipping-address").append(selectedAddress.firstName+" "+selectedAddress.lastName+"<br/>"+selectedAddress.address1+" "+selectedAddress.address2+"<br/>"+selectedAddress.city+" "+selectedAddress.stateCode+" "+selectedAddress.postalCode+"<br/>"+selectedAddress.phone);
                 $(".selected-shipping-address, .new-address-field").removeClass("hide");
                 $(".shipping-address-field-section").addClass("hide");
             }
       }*/
};

},{"../../uievents":62,"../../util":63,"./shipping":39}],35:[function(require,module,exports){
'use strict';

var ajax = require('../../ajax'),

//formPrepare = require('./formPrepare'),
uievents = require('../../uievents'),
    tooltip = require('../../tooltip'),
    progress = require('../../progress'),
    validator = require('../../validator'),

//giftcard = require('../../giftcard'),
util = require('../../util');

/**
 * @function
 * @description updates the order summary based on a possibly recalculated basket after a shipping promotion has been applied
 */
var flageallotmentcover = $('input.flageallotmentcover').val();
var allotmentAmount = parseInt($('input.allotmentAmount').val(), 10);
var couponMenthods = {
    updateSummary: function updateSummary() {
        var $summary = $('#secondary .new-summery-cart');
        // indicate progress
        $(function () {
            if (navigator.userAgent.match(/Trident\/7\./)) {
                $summary.append('<div class="loader"><div class="loader-indicator"></div><div class="loader-bg"></div></div>');
            }
        });
        progress.show($summary);
        var stateValue = $('body').find('.shipping-state').val();
        var url = util.appendParamToURL(Urls.summaryRefreshURL, 'selectedState', stateValue);
        // load the updated summary area
        $summary.load(url, function () {
            // hide edit shipping method link
            $summary.fadeIn('fast');
            $summary.find('.checkout-mini-cart .minishipment .header a').hide();
            $summary.find('.order-totals-table .order-shipping .label a').hide();
            uievents.synccheckoutH();
        });
    },
    updatecartsummary: function updatecartsummary() {
        var url = util.appendParamToURL(Urls.UpdateCartSummary);
        // load the updated cart summary area
        jQuery.ajax({
            url: url,
            dataType: 'html',
            success: function success(data) {
                jQuery('.ajax-cartsummary').html(data);
                uievents.synccheckoutH();
            }
        });
    },
    setCouponRedemptionInfo: function setCouponRedemptionInfo(redemption) {
        if (!redemption) {
            return;
        }
        //var redeemMsg = "${Resource.msg('billing.couponnotapplied','checkout',null)}";
        //if(redemption.applied) redeemMsg = "${Resource.msg('billing.couponapplied','checkout',null)}";
        //jQuery("${'#'}couponentry .redemption").append("<div class=\"discount-success\">${Resource.msg('billing.couponlabel','checkout',null)} <span class=\"submitedcoupon\">" + redemption.couponCode + "</span> " + redeemMsg + "<button  value="+redemption.couponCode+" class='removecoupon'>Remove</button></div>");
        var url = util.appendParamToURL(Urls.SuccessDisplayCoupon);
        jQuery.get(url, function (data) {
            jQuery('#couponentry .redemption').html(data);
            uievents.synccheckoutH();
        });
    },
    setCouponError: function setCouponError(msg) {
        var $couponcode = jQuery('input[name$=\'_billing_couponCode\']').closest('.couponcode');
        if (!msg) {
            jQuery('#couponentry span.error').remove();
            return;
        }
        if ($couponcode.find('span.error').length == 0) {
            $('input[name$=\'_billing_couponCode\']').closest('.couponcode').append('<span class=\'error\'><\/span>');
        }
        $couponcode.find('span.error').html(msg);
        jQuery('input[name$=\'_billing_couponCode\']').addClass('errorclient');
    },
    setGiftCertError: function setGiftCertError(msg) {
        var $redeemcode = jQuery('input[name$=\'_billing_giftCertCode\']').closest('.giftcertfields');
        if (!msg) {
            jQuery('.giftcertfields .error').remove();
            jQuery('input[name$=\'_billing_couponCode\']').removeClass('errorclient');
            return;
        }
        if ($redeemcode.find('span.error').length == 0) {
            jQuery('input[name$=\'_billing_giftCertCode\']').closest('.giftcertfields').append('<span class=\'error\'><\/span>');
        }
        $redeemcode.find('span.error').html(msg);
        jQuery('input[name$=\'_billing_giftCertCode\']').addClass('errorclient');
        //jQuery("input[name=${pdict.CurrentForms.billinggiftcert.giftCertCode.htmlName}]").parent().append("<span class=\"errormessage\">" + msg + "<\/span>");
    },
    //refresh CC form
    refreshCC: function refreshCC() {
        var url = util.appendParamToURL(Urls.ClearCCForm);
        jQuery.ajax({
            url: url,
            dataType: 'html',
            success: function success() {
                uievents.synccheckoutH();
            }
        });
    },
    setPaymentSection: function setPaymentSection(orderBalance) {

        /*if(!orderBalance) {
            return;
        }*/

        if (orderBalance <= 0) {
            //Clearing the CC Form if the remaining balance after allotment and GC is zero
            couponMenthods.refreshCC();

            // if the whole order total was paid with gift certs then hide other payment methods and show a message
            $('#paymentmethods').hide();
            $('.continuecheckoutbutton .continuecheckout').removeAttr('disabled');
            // if the order total is zero, determine was it because of the gift certificate use or a promotion? and show appropriate message
            if (flageallotmentcover == 'true') {
                $('.giftcertused').addClass('allotmentcover');
                $('.giftcertused').html('<p class=\'first-para\'>Your allotment balance will cover the full cost of this order.</p><p>No further payment will be necessary.</p>').show();
            } else {
                if (allotmentAmount > 0) {
                    $('.giftcertused').addClass('allotmentcover');
                    var allotmentMessage = '<div class="greater-than-767"><p class="first-para">Your allotment balance will cover the full cost of this order.</p><p>No further payment will be necessary.</p></div><div class="less-than-767"><p>Your allotment balance will cover the full cost of this order. No further payment will be necessary.</p></div>';
                    $('.giftcertused').html(allotmentMessage).show();
                } else {
                    $('.giftcertused').addClass('merchantcover').html($('.giftcertpi').length > 0 ? '<p class=\'first-para\'>' + Resources.GIFTCERT_NO + '</p>' : '<p class=\'first-para\'>' + Resources.ZERO_BALANCE + '</p>').show();
                }
            }
            $('.cardnotworking').hide();
        }
        if (orderBalance > 0 && $('input[name$="paymentMethods_selectedPaymentMethodID"]:checked').val() == 'CREDIT_CARD') {
            $('.cardnotworking').show();
        } else {
            $('.cardnotworking').hide();
        }
    },
    ordertotals: function ordertotals() {
        var url = Urls.GetOrderTotalJson;
        ajax.getJson({
            url: url,
            callback: function callback(data) {
                if (data.Total.OrderTotal.indexOf('0.00') != -1) {
                    couponMenthods.setPaymentSection('0.0');
                } else {
                    $('#paymentmethods').show();
                    jQuery('.giftcertused ').removeClass('merchantcover').hide();
                }
                uievents.synccheckoutH();
            }
        });
    },
    removeGiftCertificate: function removeGiftCertificate(giftCertificateId) {
        jQuery('.balance').empty();
        // remove gift certificate
        var url = util.appendParamToURL(Urls.RemoveGiftCertificate, 'giftCertificateID', giftCertificateId);
        ajax.getJson({
            url: url,
            callback: function callback(data) {
                if (!data || !data.giftCertificate || !data.giftCertificate.removed) {
                    couponMenthods.setGiftCertError(Resources.GIFTCERT_ERROR);
                    return false;
                }
                // remove message in UI
                $('#gc-' + giftCertificateId).remove();
                // reinstate payment methods section which might have been hidden if the whole order was paid with gift certs
                if (!flageallotmentcover) {
                    $('#paymentmethods').show();
                }
                // hide gift cert used for otder total message
                if (!flageallotmentcover) {
                    jQuery('.giftcertused').hide();
                }
                //commenting this since we don't need to clear the payment form on applying GC as in order CC fields are first.
                //var countryCode = jQuery("input[name=${pdict.CurrentForms.billing.billingAddress.addressFields.country.htmlName}]").val();
                //updatePaymentMethods( countryCode );
                var countryCode = jQuery('input[name$=\'addressFields_country\']').val();
                if (typeof countryCode == 'undefined') {
                    countryCode = 'US';
                }
                couponMenthods.updatePaymentMethods(countryCode);
                couponMenthods.updateSummary();
                couponMenthods.ordertotals();
                uievents.synccheckoutH();
                if ($('#paymentmethods .toggle').eq(0).hasClass('active')) {
                    $('.cardnotworking').show();
                }
            }
        });
    },
    bindGiftCertificateRemoval: function bindGiftCertificateRemoval() {
        $('#giftcertentry a.remove').unbind('click').bind('click', function () {
            var gcId = util.trimPrefix($(this).attr('id'), 'rgc-');
            couponMenthods.removeGiftCertificate(gcId);
            uievents.synccheckoutH();
            return false;
        });
    },
    setGiftCertRedemptionInfo: function setGiftCertRedemptionInfo(giftCertificateId, amountExpr) {

        if (!giftCertificateId || !giftCertificateId) {
            return;
        }
        $('#gc-' + giftCertificateId).remove();
        /*jQuery("${'#'}giftcertentry .redemption").append("<div class='success giftcertpi' id='gc-"+ giftCertificateId+"'><div class='gcremove discount-success'><div class='gcremove_icon'><a id='rgc-"+giftCertificateId +"' class='remove' href='${'#'}'><img src='${URLUtils.staticURL('/images/icon_remove.gif')}' alt='${Resource.msg('global.remove','locale',null)}'/></a></div><div class='gc_idlabel'>${Resource.msg('minibillinginfo.giftcertificate','checkout',null)} - "+giftCertificateId+" </div><div class='gcredeemamount'>"+'-'+""+amountExpr+"</div></div><div class='gcdiscapplied'>"+ amountExpr+" "+' '+" ${Resource.msg('billing.giftcertredeemed','checkout',null)}</div></div>");*/
        $('#giftcertentry .redemption').append('<div class=\'success giftcertpi\' id=\'gc-' + giftCertificateId + '\'><div class=\'gcremove discount-success\'><div class=\'gc_idlabel\'>' + giftCertificateId + ' </div><div class=\'gcredeemamount\'>' + ' - ' + '' + amountExpr + ' ' + Resources.GIFT_CERTIFICATE_CREDIT + '</div><div class=\'gcremove_icon\'><a id=\'rgc-' + giftCertificateId + '\' class=\'remove\' href=\'#\'><span>' + Resources.REMOVE + '</span></a></div></div></div>');
        $('.giftcertfields').css({ 'display': 'none' });
        couponMenthods.bindGiftCertificateRemoval();
    },
    // initializes the payment method forms
    initPaymentMethodSelection: function initPaymentMethodSelection() {

        // get selected payment method from payment method form
        var paymentMethodID = jQuery('input[name$=\'_selectedPaymentMethodID\']:checked').val();
        if (!paymentMethodID) {
            // if necessary fall back to default payment method (first non-gift-certificate method)
            paymentMethodID = $('input[value=\'CREDIT_CARD\']').attr('id');
        }

        // show payment method section
        couponMenthods.changePaymentMethod(paymentMethodID);
    },
    // changes the payment method form
    changePaymentMethod: function changePaymentMethod(paymentMethodID) {
        //if (jQuery(".giftcertused").css("display") != "none") return;
        /*
           jQuery(".paymentform").hide();
           jQuery("#PaymentMethod_" + paymentMethodID).show();
           if( jQuery("#PaymentMethod_" + paymentMethodID).length == 0 )
           {
               jQuery("#PaymentMethod_Custom").show();
           }
             // ensure checkbox of payment method is checked
           jQuery("#is-" + paymentMethodID).attr("checked", true);
           if($("#PaymentMethod_CREDIT_CARD").is(':visible')){
               if(paymentMethodID == "PayPal"){
                   $('.cardnotworking').hide();
               }else{
                   $('.cardnotworking').show();
                   jQuery('.paymentform.paypal .paypalmsg').removeClass('error');
               }
           }*/

        var $paymentMethods = $('.payment-method');
        $paymentMethods.removeClass('payment-method-expanded');

        var $selectedPaymentMethod = $paymentMethods.filter('[data-method="' + paymentMethodID + '"]');
        if ($selectedPaymentMethod.length === 0) {
            $selectedPaymentMethod = $('[data-method="Custom"]');
        }
        $selectedPaymentMethod.addClass('payment-method-expanded');

        // ensure checkbox of payment method is checked
        $('input[name$="_selectedPaymentMethodID"]').removeAttr('checked');
        $('input[value=' + paymentMethodID + ']').prop('checked', 'checked');
    },
    bindCreditCardPopulationHandler: function bindCreditCardPopulationHandler() {
        // select credit card from list
        $('.creditcardlist select').change(function () {
            var cardUUID = $(this).val();
            if (!cardUUID) {
                jQuery('input[name$=\'paymentMethods_creditCard_owner\']').val('');
                jQuery('input[name$=\'paymentMethods_creditCard_number\']').val('');
                jQuery('select[name$=\'paymentMethods_creditCard_month\']').val('');
                jQuery('select[name$=\'paymentMethods_creditCard_year\']').val('');
                jQuery('select[name$=\'paymentMethods_creditCard_cvn\']').val('');
                $('.cardtypeimg > div').hide();
                $('.expirationdate.error').hide();
                jQuery('.paymentform a.clearbutton').hide();
                $('.custom-select').each(function () {
                    var selectVal = $(this).find(':selected').text();
                    $(this).find('.selectorOut').text(selectVal);
                });
                return false;
            } else {
                jQuery('form[id$=\'paymentMethods_creditCard\'] input, form[id$=\'paymentMethods_creditCard\'] select').removeClass('errorclient');
                jQuery('form[id$=\'paymentMethods_creditCard\'] span.errorclient').hide();
                jQuery('form[id$=\'paymentMethods_creditCard\'] .custom-select').removeClass('customselect-error');
                jQuery('form[id$=\'paymentMethods_creditCard\'] .expirationdate.error').hide();
            }
            couponMenthods.populateCreditCardForm(cardUUID);
            uievents.synccheckoutH();
            return false;
        });
    },
    bindPaymentMethodChangeHandler: function bindPaymentMethodChangeHandler() {
        // bind payment method change handler
        $('#paymentmethods .toggle').click(function () {
            if (jQuery('input[name$="billing_paypalprocessed"]').val() != 'true') {
                $('#paymentmethods .toggle').removeClass('active');
                $(this).addClass('active');
                var selectedID = jQuery(this).find('input[name$="_billing_paymentMethods_selectedPaymentMethodID"]').val();
                if (selectedID == 'PayPal') {
                    var paypalStatus = jQuery('input[name$="_billing_paypalval_paypalprocessed"]').val();
                    $('.cardnotworking').hide();
                    if (paypalStatus == 'true') {
                        //$('.continuecheckoutbutton .continuecheckout').removeAttr('disabled');
                    } else {
                            //$('.continuecheckoutbutton .continuecheckout').attr('disabled', 'disabled');
                        }
                } else if (selectedID == 'CREDIT_CARD') {
                    if (!$('input[name$="_creditCard_owner"]').hasClass('errorclient') && !$('input[name$="_creditCard_number"]').hasClass('errorclient') && !$('input[name$="_creditCard_cvn"]').hasClass('errorclient') && !$('select[name$="paymentMethods_creditCard_year"]').hasClass('errorclient') && !$('select[name$="paymentMethods_creditCard_month"]').hasClass('errorclient') && $('input[name$="_creditCard_owner"]').val() != '' && $('input[name$="_creditCard_number"]').val() != '' && $('input[name$="_creditCard_cvn"]').val() != '' && $('select[name$="paymentMethods_creditCard_expiration_month"]').val() != '' && $('select[name$="paymentMethods_creditCard_expiration_month"]').val() != '') {
                        //$('.continuecheckoutbutton .continuecheckout').removeAttr('disabled');
                    } else {
                            //$('.continuecheckoutbutton .continuecheckout').attr('disabled', 'disabled');
                        }
                }
                $(this).find('input[name="billing_paymentMethods_selectedPaymentMethodID"]').prop('checked', true);
                couponMenthods.changePaymentMethod(selectedID);
            }
        });
        $('#paymentmethods .paymentform.creditcardpayment').click(function () {
            $('.paymentmethods .toggle input#is-CREDIT_CARD').closest('.toggle').addClass('active');
        });
        $('#paymentmethods .paymentform.paypal').click(function () {
            $('.paymentmethods .toggle input#is-PayPal').closest('.toggle').addClass('active');
        });
    },
    updatePaymentMethods: function updatePaymentMethods(countryCode) {

        var url = util.appendParamToURL(Urls.RefreshPaymentMethods, 'countryCode', countryCode);

        // indicate progress
        progress.show('#paymentmethodform');

        // load the updated payment method area
        $('#paymentmethodform').load(url, function () {
            $('#paymentmethodform').fadeIn('fast');
            //$('.continuecheckoutbutton .continuecheckout').attr('disabled', 'disabled');
            //couponMenthods.initPaymentMethodSelection();
            couponMenthods.bindPaymentMethodChangeHandler();
            couponMenthods.bindCreditCardPopulationHandler();
            validator.init();
            tooltip.init();
            util.cardtype.init();
            $('.expirationdate .custom-select select');
            $('#PaymentMethod_CREDIT_CARD input');
            $('#PaymentMethod_CREDIT_CARD select');
            uievents.init($('#paymentmethodform'));
            //load checking for payment type
            var $paySelected = jQuery('#paymentmethods').find('input[name$="paymentMethods_selectedPaymentMethodID"]:checked');
            if ($paySelected.length == 1) {
                $paySelected.closest('.toggle').addClass('active');
                var selectedID = $paySelected.val();
                couponMenthods.changePaymentMethod(selectedID);
            }
            couponMenthods.ordertotals();
            uievents.synccheckoutH();
        });
        //app.execUjs();
    },
    removeCouponCode: function removeCouponCode(couponCode) {
        couponMenthods.setCouponError(null);
        // nothing entered
        if (!couponCode) {
            couponMenthods.setCouponError(Resources.BILLING_COUPONMIS);
            return;
        }
        // attempt to remove
        jQuery('input[name$=\'billing_couponCode\']').val('');

        var url = util.appendParamToURL(Urls.RemoveCoupon, 'couponCode', couponCode);
        $.get(url, function (data) {
            couponMenthods.updateSummary();
            couponMenthods.updatecartsummary();
            var giftCertificates = jQuery(data).filter('#giftCertificateData').text();
            if (giftCertificates != 'undefined' && giftCertificates.length > 0) {
                var giftCertificatedata = giftCertificates.split('|');
                for (var index = 0; index < giftCertificatedata.length; index++) {
                    couponMenthods.setGiftCertRedemptionInfo(giftCertificatedata[index].split('-')[0].trim(), giftCertificatedata[index].split('-')[1].trim());
                }
            }
            uievents.synccheckoutH();
        });
        var countryCode = jQuery('input[name$=\'addressFields_country\']').val();
        if (typeof countryCode == 'undefined') {
            countryCode = 'US';
        }
        couponMenthods.updatePaymentMethods(countryCode);
        couponMenthods.ordertotals();

        // Determine if a bonus-product promotion was triggered by the coupon.
        // If so, display a popup alert and give the customer a chance to
        // return to the cart and select the bonus product.

        /*$('.noBonusBtn').unbind("click").click( function() {
            $('.bonusdiscountcontainer').dialog('close');
          });*/
    },
    populateCreditCardForm: function populateCreditCardForm(cardID) {
        // load card details
        var url = Urls.billingSelectCC;
        url = util.appendParamToURL(url, 'creditCardUUID', cardID);
        var result = ajax.getJson({
            url: url,
            callback: function callback(data) {
                if (!data) {
                    alert(Resources.CC_LOAD_ERROR);
                    return false;
                }
                var $creditCard = $('body').find('.creditcardpayment');
                // fill the form / clear the former cvn input
                $creditCard.find('input[name$="creditCard_owner"]').val(data.holder).trigger('change');
                $creditCard.find('select[name$="_type"]').val(data.type).trigger('change');
                $creditCard.find('.creditCard-number').val(data.maskedNumber).trigger('change');
                $creditCard.find('[name$="_month"]').val(data.expirationMonth).trigger('change');
                var date = new Date();
                var currentYear = date.getFullYear();
                if (data.expirationYear <= currentYear) {
                    $creditCard.find('[name$="_year"]').val('').change();
                } else {
                    $creditCard.find('[name$="_year"]').val(data.expirationYear).trigger('change');
                }
                $creditCard.find('input[name$="_cvn"]').val('').trigger('change');
                jQuery('input[name$="creditCard_owner"]').val(data.creditCard.holder);
                uievents.changeFormSelection($('select[name$="_type"]')[0], data.creditCard.type);
                $('.creditCard-number').val(data.creditCard.maskedNumber);
                uievents.changeFormSelection($('[name$="_month"]')[0], data.creditCard.expirationMonth);
                uievents.changeFormSelection($('[name$="_year"]')[0], data.creditCard.expirationYear);
                $('input[name$="_cvn"]').val('');
                // remove error messaging
                $('#PaymentMethod_CREDIT_CARD span.errormessage').remove();
                $('#PaymentMethod_CREDIT_CARD input.errormessage').removeClass('errormessage');
                $('#PaymentMethod_CREDIT_CARD .errorlabel').removeClass('errorlabel');

                $('.paymentform.creditcardpayment .formfield .field-wrapper').each(function () {
                    if ($(this).find('input').val() != undefined) {
                        if ($(this).find('input').val().length > 0) {
                            $(this).parent('.formfield').find('a.clearbutton').show();
                        } else {
                            $(this).parent('.formfield').find('a.clearbutton').hide();
                        }
                    }
                });
                if (data.creditCard.type == 'Visa') {
                    result = 'Visa';
                    //visa
                } else if (data.creditCard.type == 'Discover') {
                    result = 'Discover';
                    //Discover
                } else if (data.creditCard.type == 'Amex') {
                    result = 'Amex';
                    //American Express
                } else if (data.creditCard.type == 'MasterCard') {
                    result = 'MasterCard';
                    //Master Card
                }
                //errorspan.hide();
                $('#paymentmethods').find('select[name$="_paymentMethods_creditCard_type"]').val(result);
                $('.cardtypeimg > div').hide();
                $('.cardtypeimg > div.' + result).show();
            }
        });
    },
    setGiftCertBalanceInfo: function setGiftCertBalanceInfo(amountExpr) {
        if (!amountExpr) {
            jQuery('.balance').empty();
            return;
        }
        $('.balance').append('<div class=\'balanceamt\'>' + Resources.GIFT_CERT_BALANCE + ' ' + amountExpr + ' </div>');
    },
    redeemGiftCert: function redeemGiftCert(giftCertificateId) {
        couponMenthods.setGiftCertError(null);
        couponMenthods.setGiftCertBalanceInfo(null);
        // nothing entered
        if (!giftCertificateId) {
            couponMenthods.setGiftCertError(Resources.GIFT_CERT_INVALID);
            return;
        }
        // attempt to redeem
        var url = util.appendParamsToUrl(Urls.redeemGiftCert, { giftCertificateID: giftCertificateId, format: 'ajax' });
        ajax.getJson({
            url: url,
            callback: function callback(data) {
                if (!data) {
                    couponMenthods.setGiftCertError(Resources.GIFT_CERT_INVALID);
                    return false;
                }
                if (data.redemptionErrorMsg) {
                    couponMenthods.setGiftCertError(data.redemptionErrorMsg);
                    return false;
                }
                if (!data.redemption) {
                    couponMenthods.setGiftCertError(Resources.GIFT_CERT_INVALID);
                    return false;
                }
                // empty input field and display redemption in UI
                $('input[name$=\'billing_giftCertCode\']').val('');
                //couponMenthods.setGiftCertRedemptionInfo(data.redemption.giftCertificateID, data.redemption.amount);
                var countryCode = $('input[name$=\'_addressFields_country\']').val();
                if (typeof countryCode == 'undefined') {
                    countryCode = 'US';
                }
                couponMenthods.updatePaymentMethods(countryCode);
                couponMenthods.updateSummary();
                couponMenthods.ordertotals();
                uievents.synccheckoutH();
            }
        });
    },
    checkGiftCertBalance: function checkGiftCertBalance(giftCertificateId) {
        couponMenthods.setGiftCertError(null);
        couponMenthods.setGiftCertBalanceInfo(null);
        // nothing entered
        if (!giftCertificateId) {
            couponMenthods.setGiftCertError(Resources.GIFT_CERT_MISSING);
            return;
        }
        // load gift certificate details
        var url = util.appendParamsToUrl(Urls.GetGiftCertificateBalance, {
            giftCertificateID: giftCertificateId,
            format: 'ajax'
        });
        ajax.getJson({
            url: url,
            callback: function callback(data) {
                if (!data || !data.giftCertificate) {
                    couponMenthods.setGiftCertError(Resources.GIFT_CERT_INVALID);
                    return false;
                }
                // display details in UI
                couponMenthods.setGiftCertBalanceInfo(data.giftCertificate.balance);
                uievents.synccheckoutH();
            }
        });
    }
};

/**
 * @function
 * @description Fills the Credit Card form with the passed data-parameter and clears the former cvn input
 * @param {Object} data The Credit Card data (holder, type, masked number, expiration month/year)
 */
function setCCFields(data) {

    var $creditCard = $('[data-method="CREDIT_CARD"]');
    $creditCard.find('input[name$="creditCard_owner"]').val(data.holder).trigger('change');
    $creditCard.find('input[name$="creditCard_owner"]').val(data.holder).trigger('blur');
    $creditCard.find('select[name$="_type"]').val(data.type).trigger('change');
    $creditCard.find('select[name$="_type"]').val(data.type).trigger('blur');
    $creditCard.find('input[name*="_creditCard_number"]').val(data.maskedNumber).trigger('change');
    $creditCard.find('input[name*="_creditCard_number"]').val(data.maskedNumber).trigger('blur');
    $creditCard.find('[name$="_expiration_month"]').val(data.expirationMonth).trigger('change');
    var date = new Date();
    var currentYear = date.getFullYear();
    if (data.expirationYear <= currentYear) {
        $creditCard.find('[name$="_year"]').val('').change();
    } else {
        $creditCard.find('[name$="_year"]').val(data.expirationYear).trigger('change');
    }
    $creditCard.find('[name$="_expiration_month"]').val(data.expirationMonth).trigger('blur');
    if (data.expirationYear <= currentYear) {
        $creditCard.find('[name$="_year"]').val('').blur();
    } else {
        $creditCard.find('[name$="_year"]').val(data.expirationYear).trigger('blur');
    }
    $creditCard.find('input[name$="_cvn"]').val('').trigger('change');
    $creditCard.find('input[name$="_cvn"]').val('').trigger('blur');
    uievents.synccheckoutH();
}

/**
 * @function
 * @description Updates the credit card form with the attributes of a given card
 * @param {String} cardID the credit card ID of a given card
 */
function populateCreditCardForm(cardID) {
    // load card details
    var url = util.appendParamToURL(Urls.billingSelectCC, 'creditCardUUID', cardID);
    ajax.getJson({
        url: url,
        callback: function callback(data) {
            uievents.synccheckoutH();
            if (!data) {
                window.alert(Resources.CC_LOAD_ERROR);
                return false;
            }
            setCCFields(data);
            uievents.synccheckoutH();
        }
    });
}

/**
 * @function
 * @description Changes the payment method form depending on the passed paymentMethodID
 * @param {String} paymentMethodID the ID of the payment method, to which the payment method form should be changed to
 */
function updatePaymentMethod(paymentMethodID) {
    var $paymentMethods = $('.payment-method');
    $paymentMethods.removeClass('payment-method-expanded');

    var $selectedPaymentMethod = $paymentMethods.filter('[data-method="' + paymentMethodID + '"]');
    if ($selectedPaymentMethod.length === 0) {
        $selectedPaymentMethod = $('[data-method="Custom"]');
    }
    $selectedPaymentMethod.addClass('payment-method-expanded');

    // ensure checkbox of payment method is checked
    $('input[name$="_selectedPaymentMethodID"]').removeAttr('checked');
    $('input[value=' + paymentMethodID + ']').prop('checked', 'checked');

    //formPrepare.validateForm();
}

/**
 * @function
 * @description loads billing address, Gift Certificates, Coupon and Payment methods
 */
exports.init = function () {
    //var $checkoutForm = $('.checkout-billing');
    //var $addGiftCert = $('#add-giftcert');
    //var $giftCertCode = $('input[name$="_giftCertCode"]');
    //var $addCoupon = $('#add-coupon');
    //var $couponCode = $('input[name$="_couponCode"]');
    var $selectPaymentMethod = $('.payment-method-options');
    var selectedPaymentMethod = $selectPaymentMethod.find(':checked').val();

    /* formPrepare.init({
         formSelector: 'form[id$="billing"]',
         continueSelector: '[name$="billing_save"]'
     });*/
    var activePaymentMethodID = $('body').find('.paymentmethods_cont .input-radio:checked').attr('id');
    if (activePaymentMethodID == 'is-PayPal') {
        $('.paymentform .textinput, .paymentform .yearselect select, .paymentform .monthselect select, .addressoptions .checkinput').removeClass('required');
        $('.cardnotworking').hide();
    } else {
        $('.paymentform .textinput, .paymentform .yearselect select, .paymentform .monthselect select, .addressoptions .checkinput').addClass('required');
        $('.cardnotworking').show();
    }
    if (!jQuery('.creditcardlist select').val()) {
        $('.creditcard_name').val('');
        $('.creditCard-number').val('');
        $('.monthselect').val('');
        $('.yearselect').val('');
        $('.creditcard_cvn').val('');
        $('.cardtypeimg > div').hide();
        $('.expirationdate.error').hide();
        $('.expirationdatevalid.error').hide();
        $('.paymentform a.clearbutton').hide();
    }
    $('.expirationdate .custom-select select').on('blur', function () {
        var d = new Date(),
            mth = d.getMonth() + 1,
            yy = d.getFullYear();
        if (!jQuery(this).val()) {
            $('.expirationdate.error').show();
            $('.expirationdatevalid.error').hide();
        } else {
            if (jQuery('.expirationdate .custom-select.customselect-error').length == 0) {
                $('.expirationdate.error').hide();
                $('.expirationdatevalid.error').hide();
            }
            var selectedMth = $('.expirationdate .custom-select select[id$=\'billing_paymentMethods_creditCard_expiration_month\']').val();
            var selectedyear = $('.expirationdate .custom-select select[id$=\'billing_paymentMethods_creditCard_expiration_year\']').val();
            if (selectedyear && selectedMth) {
                selectedyear = selectedyear.replace(',', '');
                if (selectedyear <= yy && selectedMth < mth) {
                    $('.expirationdate.error').hide();
                    $('.expirationdatevalid.error').show();
                }
            }
        }
    });
    $('body').on('click', '.redemption .discount-success button.remove-cop', function (e) {
        e.preventDefault();
        var url = $(this).val();
        couponMenthods.removeCouponCode(url);
        return false;
    });
    /* JIRA PREV-135 : Disabled Credit Card in BM is displaying in the application.
       Changed default option from 'CREDIT_CARD' to first available payment method.*/
    updatePaymentMethod(selectedPaymentMethod ? selectedPaymentMethod : $('.payment-method-options input').first().val());
    $('body').on('click', '.payment-method-options input[type="radio"]', function () {
        updatePaymentMethod($(this).val());
        if ($(this).is(':checked')) {
            $(this).closest('.toggle').siblings('.toggle').removeClass('active');
            if ($(this).attr('id') == 'is-PayPal') {
                $('.paymentform .textinput, .paymentform .yearselect select, .paymentform .monthselect select, .addressoptions .checkinput').removeClass('required');
                $('.cardnotworking').hide();
            } else {
                $('.paymentform .textinput, .paymentform .yearselect select, .paymentform .monthselect select, .addressoptions .checkinput').addClass('required');
                $('.cardnotworking').show();
            }
            $(this).closest('.toggle').addClass('active');
        }
        uievents.customFields();
        uievents.synccheckoutH();
    });
    $('body').on('click', '.payment-method-options .toggle  img', function () {
        $(this).closest('label').find('input[type="radio"]').trigger('click');
    });

    // select credit card from list
    $('body').on('change', '#creditCardList', function () {
        var cardUUID = $(this).val();
        if (!cardUUID) {
            return;
        }
        populateCreditCardForm(cardUUID);

        // remove server side error
        $('.required.error').removeClass('error');
        $('.error-message').remove();
    });
    $('body').on('click', '#giftcertentry a.remove', function () {
        var gcId = util.trimPrefix($(this).attr('id'), 'rgc-');
        couponMenthods.removeGiftCertificate(gcId);
        return false;
    });
    $('body').on('click', '#check-giftcert', function (e) {
        e.preventDefault();
        var gcId = jQuery('input[name$=\'billing_giftCertCode\']').val().toUpperCase();
        couponMenthods.checkGiftCertBalance(gcId);
        uievents.synccheckoutH();
        return false;
    });

    $('body').on('click', '#add-giftcert', function (e) {
        e.preventDefault();
        var gcId = jQuery('input[name$=\'billing_giftCertCode\']').val().toUpperCase();
        couponMenthods.redeemGiftCert(gcId);
        uievents.synccheckoutH();
        return false;
    });

    $('body').on('click', '#add-coupon', function (e) {
        e.preventDefault();
        var //$error = $checkoutForm.find('.coupon-error'),
        code = $('input[name$="_couponCode"]').val();
        couponMenthods.setCouponError(null);
        if (code.length === 0) {
            couponMenthods.setCouponError(Resources.COUPON_CODE_MISSING);
            return false;
        }

        var url = util.appendParamsToUrl(Urls.addCoupon, {
            couponCode: code,
            format: 'ajax'
        });
        $.getJSON(url, function (data) {
            var msg = '';
            if (!data) {
                msg = Resources.COUPON_INVALID;
                couponMenthods.setCouponError(msg);
                return false;
            }
            if (data.redemption.redemptionErrorMsg) {
                couponMenthods.setCouponError(data.redemption.redemptionErrorMsg);
                return false;
            }
            if (!data.redemption) {
                msg = Resources.COUPON_INVALID;
                couponMenthods.setCouponError(msg);
                return false;
            }
            // empty input field and display redemption in UI
            jQuery('input[name$=\'_billing_couponCode\']').val('');
            jQuery('input[name$=\'_billing_couponCode\']').removeClass('errorclient');
            couponMenthods.setCouponRedemptionInfo(data.redemption);
            // update gift card redemptions as amounts might have changed after coupon
            jQuery.each(data.redemption.gcRedemptions, function () {
                couponMenthods.setGiftCertRedemptionInfo(this.giftCertificateID, this.amount);
            });
            var countryCode = $('input[name$=\'_addressFields_country\']').val();
            if (typeof countryCode == 'undefined') {
                countryCode = 'US';
            }

            couponMenthods.updateSummary();
            couponMenthods.updatecartsummary();
            couponMenthods.updatePaymentMethods(countryCode);
            couponMenthods.ordertotals();
            uievents.synccheckoutH();
            // Determine if a bonus-product promotion was triggered by the coupon.
            // If so, display a popup alert and give the customer a chance to
            // return to the cart and select the bonus product.
            if (data.redemption.bonusPromotionApplied) {
                $('.bonusdiscountcontainer .bonusproductpromo').append(data.redemption.bonusPromotionCallout);
                $('.bonusdiscountcontainer div.details').html(data.redemption.bonusPromotionDetails);

                $('.bonusdiscountcontainer').show();
                $('.bonusdiscountcontainer').dialog({
                    title: Resources.BONUS_PRODUCT,
                    bgiframe: true,
                    autoOpen: false,
                    modal: true,
                    height: 250,
                    width: 500,
                    resizable: false
                });
                jQuery('.bonusdiscountcontainer').dialog('open');
            }

            jQuery('.selectBonusBtn').unbind('click').click(function () {
                jQuery('.bonusdiscountcontainer').dialog('close');
                location.href = '${URLUtils.https(\'Cart-Show\')}';
                return false;
            });

            jQuery('.noBonusBtn').unbind('click').click(function () {
                jQuery('.bonusdiscountcontainer').dialog('close');
            });
        });
    });

    // trigger events on enter
    $('body').on('keydown', 'input[name$="_couponCode"]', function (e) {
        if (e.which === 13) {
            e.preventDefault();
            $('#add-coupon').click();
        }
    });
    $('body').on('keydown', 'input[name$="_giftCertCode"]', function (e) {
        if (e.which === 13) {
            e.preventDefault();
            $('#add-giftcert').click();
        }
    });

    $('.trypaypal').on('click', function () {
        $('.continuecheckout-paypallogin').trigger('click');
    });

    if ($('.pt_checkout .paymentform.paypal .error-paypal-heading').length > 0 || $('.pt_checkout .paymentform.paypal .paypalmsg.success-paypal').length > 0) {
        $('body, html').animate({
            scrollTop: $('#paymentmethodform legend').offset().top
        }, 600);
    }

    $('.switchtocredit').on('click', function () {
        $('.paymentmethods_cont .toggle').eq(0).find('.input-radio').trigger('click');
    });
    //PREVAIL - init Address Validation
    require('../../addressvalidation').init();

    util.cardtype.init();
    $('body').on('click', '.couponcode .label', function () {
        if ($('.promo-input-button').is(':visible') == true) {
            $('.promo-input-button').hide();
            $(this).closest('.couponcode').find('span.error').hide();
        } else {
            $('.promo-input-button').show();
            $(this).closest('.couponcode').find('span.error').show();
        }
        uievents.synccheckoutH();
    });
    if ($('.guestbillingform .password .errormessage').length > 0) {
        $('.guestbillingform .password .errormessage').remove();
    }

    $('.guestbillingform .billing-conpassword').blur(function () {
        var billingPas = $('.guestbillingform .billing-password').val();
        var billingConpas = $('.guestbillingform .billing-conpassword').val();
        $('.guestbillingform .password .errormessage').remove();
        if (billingPas.length > 0) {
            if (billingConpas.length < 5) {
                $('.guestbillingform .billing-conpassword').addClass('errorclient');
                $('.billingconfpassword').text(Resources.billingpasswordconfirm_min).removeClass('hide');
                //$('.continuecheckoutbutton .continuecheckout').attr('disabled', 'disabled');
            } else if (billingPas != billingConpas) {
                $('.guestbillingform .billing-conpassword').addClass('errorclient');
                $('.billingconfpassword').text(Resources.billingpasswordconfirm).removeClass('hide');
                //$('.continuecheckoutbutton .continuecheckout').attr('disabled', 'disabled');
            } else {
                $('.guestbillingform .billing-conpassword').removeClass('errorclient');
                $('.billingconfpassword').text(Resources.billingpasswordconfirm).addClass('hide');
                if (!$('input[name$="_creditCard_owner"]').hasClass('errorclient') && !$('input[name$="_creditCard_number"]').hasClass('errorclient') && !$('input[name$="_creditCard_cvn"]').hasClass('errorclient') && !$('select[name$="paymentMethods_creditCard_year"]').hasClass('errorclient') && !$('select[name$="paymentMethods_creditCard_month"]').hasClass('errorclient') && $('input[name$="_creditCard_owner"]').val() != '' && $('input[name$="_creditCard_number"]').val() != '' && $('input[name$="_creditCard_cvn"]').val() != '' && $('select[name$="paymentMethods_creditCard_year"]').val() != '' && $('select[name$="paymentMethods_creditCard_month"]').val() != '') {
                    //$('.continuecheckoutbutton .continuecheckout').removeAttr('disabled');
                }
            }
        } else {
            $('.guestbillingform .billing-conpassword').removeClass('errorclient');
            $('.billingconfpassword').text(Resources.billingpasswordconfirm).addClass('hide');
            if (!$('input[name$="_creditCard_owner"]').hasClass('errorclient') && !$('input[name$="_creditCard_number"]').hasClass('errorclient') && !$('input[name$="_creditCard_cvn"]').hasClass('errorclient') && !$('select[name$="paymentMethods_creditCard_year"]').hasClass('errorclient') && !$('select[name$="paymentMethods_creditCard_month"]').hasClass('errorclient') && $('input[name$="_creditCard_owner"]').val() != '' && $('input[name$="_creditCard_number"]').val() != '' && $('input[name$="_creditCard_cvn"]').val() != '' && $('select[name$="paymentMethods_creditCard_year"]').val() != '' && $('select[name$="paymentMethods_creditCard_month"]').val() != '') {
                //$('.continuecheckoutbutton .continuecheckout').removeAttr('disabled');
            }
        }
    });
    $('.guestbillingform .billing-password').bind('blur', function () {
        var billingPas = $('.guestbillingform .billing-password').val();
        var billingConpas = $('.guestbillingform .billing-conpassword').val();
        //$('.continuecheckoutbutton .continuecheckout').attr('disabled', 'disabled');

        if ($(this).length > 0) {
            $('.guestbillingform .billing-conpassword').addClass('required');
        } else {
            $('.guestbillingform .billing-conpassword').removeClass('required');
            $('.guestbillingform .billing-conpassword').removeClass('errorclient');
        }
        if (billingPas.length > 0) {
            if (billingPas.length < 5) {
                $('.guestbillingform .billing-password').addClass('errorclient');
                $('.billingpassword').text(Resources.billingpasswordconfirm_min).removeClass('hide');
                //$('.continuecheckoutbutton .continuecheckout').attr('disabled', 'disabled');
            } else {
                $('.guestbillingform .billing-password').removeClass('errorclient');
                $('.billingpassword').addClass('hide');
            }
        } else {
            $('.guestbillingform .billing-password').removeClass('errorclient');
            $('.billingpassword').addClass('hide');
        }

        if (billingPas == billingConpas && billingPas.length >= 5) {
            if (!$('input[name$="_creditCard_owner"]').hasClass('errorclient') && !$('input[name$="_creditCard_number"]').hasClass('errorclient') && !$('input[name$="_creditCard_cvn"]').hasClass('errorclient') && !$('select[name$="paymentMethods_creditCard_year"]').hasClass('errorclient') && !$('select[name$="paymentMethods_creditCard_month"]').hasClass('errorclient') && $('input[name$="_creditCard_owner"]').val() != '' && $('input[name$="_creditCard_number"]').val() != '' && $('input[name$="_creditCard_cvn"]').val() != '' && $('select[name$="paymentMethods_creditCard_year"]').val() != '' && $('select[name$="paymentMethods_creditCard_month"]').val() != '') {
                //$('.continuecheckoutbutton .continuecheckout').removeAttr('disabled');
            }
        }
    });

    if ($('.expirationdate .custom-select .field-wrapper span.errormessage').length > 0) {
        $('.expirationdate .custom-select span.errormessage').hide();
        $('.expirationdate.error').show();
    }
    $('.checkoutbilling .continue-checkout-button .continuecheckout').click(function () {
        var $checkoutButton = $('.continuecheckout.place-order-btn');
        if (navigator.userAgent.match(/Trident\/7\./)) {
            $('.continuecheckout.place-order-btn').append('<div class="loader"><div class="loader-indicator"></div><div class="loader-bg"></div></div>');
        } else {
            progress.show($checkoutButton);
        }
        var errorcount = 0;
        if (!$('#PaymentMethod_CREDIT_CARD').is(':visible')) {
            $('.paymentform .textinput, .paymentform select').removeClass('required');
        }
        if (!jQuery('form[id$="_billing"]').valid()) {
            progress.hide();
            $(function () {
                if (navigator.userAgent.match(/Trident\/7\./)) {
                    $('.continuecheckout.place-order-btn .loader').remove();
                }
            });
            jQuery('.state-blk select').trigger('blur');
            if (jQuery('.billing-address-fields').hasClass('hide')) {
                $('select[name$=billing_addressList]').val('');
                $('input[name$="billingAddress_selectedbillingadd"]').val('');
                $('.custom-select').each(function () {
                    var selectVal = $(this).find(':selected').text();
                    $(this).find('.selectorOut').text(selectVal);
                });
                jQuery('.billing-address-fields').removeClass('hide');
                jQuery('.selected-billing-address , .selected-shipping-address').addClass('hide');
                uievents.customFields();
            }
            errorcount++;
        }
        if ($('#PaymentMethod_CREDIT_CARD').is(':visible')) {
            if (!$('form[id$="dwfrm_billing"]').valid()) {
                progress.hide();
                $('.expirationdate select').trigger('blur');

                if ($('.vip-terms .custom-link').is(':visible') && !$('input[name$="_isvip"]').is(':checked')) {
                    if ($('.vip-terms .custom-checkbox .vip-message #message').length == 0) {
                        $('.vip-terms .custom-checkbox .vip-message').prepend('<span id="message" class="error vipcheckmessage">Please check the box to confirm you have read and agree to the Rapala VIP Terms & Conditions.</span>');
                        $('.singleshipping_error').show();
                    }
                    $('.vip-terms .custom-checkbox .custom-link').addClass('error');
                    uievents.synccheckoutH();
                }
                if ($('.knife .custom-link.agecheck-link').is(':visible') && !$('input[name$="agecheck_ischeck"]').is(':checked')) {
                    if ($('.addressoptions.knife .agecheck_message #message').length == 0) {
                        $('.addressoptions.knife .agecheck_message').prepend('<span id="message" class="error agecheckmessage">Please Verify you are 18 years of age or older, or remove all knives from your cart.</span>');
                        $('.singleshipping_error').show();
                    }
                    $('.addressoptions.knife > .custom-checkbox .custom-link').addClass('error');
                    uievents.synccheckoutH();
                }
                errorcount++;
            } else {

                if ($('.vip-terms .custom-link').is(':visible') && !$('input[name$="_isvip"]').is(':checked')) {
                    if ($('.vip-terms .custom-checkbox .vip-message #message').length == 0) {
                        $('.vip-terms .custom-checkbox .vip-message').prepend('<span id="message" class="error vipcheckmessage">Please check the box to confirm you have read and agree to the Rapala VIP Terms & Conditions.</span>');
                        $('.singleshipping_error').show();
                    }
                    $('.vip-terms .custom-checkbox .custom-link').addClass('error');
                    uievents.synccheckoutH();
                    errorcount++;
                }
                if ($('.knife .custom-link.agecheck-link').is(':visible') && !$('input[name$="agecheck_ischeck"]').is(':checked')) {
                    if ($('.addressoptions.knife .agecheck_message #message').length == 0) {
                        $('.addressoptions.knife .agecheck_message').prepend('<span id="message" class="error agecheckmessage">Please Verify you are 18 years of age or older, or remove all knives from your cart.</span>');
                        $('.singleshipping_error').show();
                    }
                    $('.addressoptions.knife > .custom-checkbox .custom-link').addClass('error');
                    uievents.synccheckoutH();
                    errorcount++;
                }
            }
        } else {
            if ($('.vip-terms .custom-link').is(':visible') && !$('input[name$="_isvip"]').is(':checked')) {
                if ($('.vip-terms .custom-checkbox .vip-message #message').length == 0) {
                    $('.vip-terms .custom-checkbox .vip-message').prepend('<span id="message" class="error vipcheckmessage">Please check the box to confirm you have read and agree to the Rapala VIP Terms & Conditions.</span>');
                    $('.singleshipping_error').show();
                }
                $('.vip-terms .custom-checkbox .custom-link').addClass('error');
                uievents.synccheckoutH();
                errorcount++;
            }
            if ($('.knife .custom-link.agecheck-link').is(':visible') && !$('input[name$="agecheck_ischeck"]').is(':checked')) {
                if ($('.addressoptions.knife .agecheck_message #message').length == 0) {
                    $('.addressoptions.knife  .agecheck_message').prepend('<span id="message" class="error agecheckmessage">Please Verify you are 18 years of age or older, or remove all knives from your cart.</span>');
                    $('.singleshipping_error').show();
                }
                $('.addressoptions.knife  > .custom-checkbox .custom-link').addClass('error');
                uievents.synccheckoutH();
                errorcount++;
            }
            /*     if(!$('input.paypalprocessed').val()){
                     $('.paymentform.paypal .paypalmsg').addClass('error');
                      return false;
                   }*/
        }
        if (errorcount > 0) {
            progress.hide();
            $('.singleshipping_error').show();
            return false;
        }
        if ($('.billing-address-fields').is(':visible')) {
            $('.billing-address-fields .state-blk select').blur();
        }
    });
    //JIRA PREV-38 : Billing page_Credit Card Section: CVV number should not pre-populate.
    /*if ($('.bypassDAV').length === 0) {
        $('.spc-billing .form-row.cvn input').val('');
    }*/
    if ($('.invalidCreditcard').length > 0) {
        //$('.singleshipping_error').show();
        $('.cardnumber input').addClass('errorclient');
        $('.cardnumber .labeltext').addClass('error');
        $('<span class="invalidcredit error">- Invalid Credit Card Number</span>').appendTo('.cardnumber .field-wrapper');
        //$('.singleshipping_error').show();
        $('.cardnumber .errormessage').css('display', 'none');
    }
};

},{"../../addressvalidation":14,"../../ajax":15,"../../progress":52,"../../tooltip":61,"../../uievents":62,"../../util":63,"../../validator":64}],36:[function(require,module,exports){
'use strict';

var _ = require('lodash');

var $form, $requiredInputs, validator;

var hasEmptyRequired = function hasEmptyRequired() {
    // filter out only the visible fields
    var requiredValues = $requiredInputs.filter(':visible').map(function () {
        return $(this).val();
    });
    return _(requiredValues).contains('');
};

var validateForm = function validateForm() {
    // only validate form when all required fields are filled to avoid
    // throwing errors on empty form
    if (!validator) {
        return;
    }
    if (!hasEmptyRequired()) {
        if (validator.form()) {
            //$continue.removeAttr('disabled');
        }
    } else {
            //$continue.attr('disabled', 'disabled');
        }
};

var validateEl = function validateEl() {
    if ($(this).val() === '') {
        // $continue.attr('disabled', 'disabled');
    } else {
        // enable continue button on last required field that is valid
        // only validate single field
        if (validator.element(this) && !hasEmptyRequired()) {
            //$continue.removeAttr('disabled');
        } else {
                //$continue.attr('disabled', 'disabled');
            }
    }
};

var init = function init(opts) {
    if (!opts.formSelector || !opts.continueSelector) {
        throw new Error('Missing form and continue action selectors.');
    }
    $form = $(opts.formSelector);
    //$continue = $(opts.continueSelector);
    validator = $form.validate();
    $requiredInputs = $('.required', $form).find(':input');
    validateForm();
    // start listening
    $requiredInputs.on('change', validateEl);
    $requiredInputs.filter('input').on('keyup', _.debounce(validateEl, 200));
};

exports.init = init;
exports.validateForm = validateForm;
exports.validateEl = validateEl;

},{"lodash":5}],37:[function(require,module,exports){
'use strict';

var address = require('./address'),
    billing = require('./billing'),
    multiship = require('./multiship'),
    uievents = require('../../uievents'),
    util = require('../../util'),
    shipping = require('./shipping');

/**
 * @function Initializes the page events depending on the checkout stage (shipping/billing)
 */
exports.init = function () {
    address.init();
    if ($('.allotment-label').length > 0 || $('.brand-rapala-checkout').length > 0) {
        $('body').find('#main').addClass('allotment-available');
    }
    if ($('.checkout-shipping').length > 0) {
        shipping.init();
    } else if ($('.checkout-multi-shipping').length > 0) {
        multiship.init();
    } else {
        billing.init();
    }
    $(window).resize(function () {
        $('.ui-dialog-content:visible').each(function () {
            $(this).dialog('option', 'position', $(this).dialog('option', 'position'));
        });
    });
    $('body').find('.form-row').each(function () {
        if ($(this).find('.field-wrapper .clearbutton').length == 0 && $(this).find('.field-wrapper').find('input[type=\'text\']').length > 0) {
            $(this).find('.field-wrapper').append('<a class="clearbutton"></a>');
            if ($(this).find('.field-wrapper').find('input[type=\'text\']').val().length > 0) {
                $(this).find('.field-wrapper').find('.clearbutton').show();
            }
        } else if ($(this).find('.field-wrapper .clearbutton').length == 0 && $(this).find('.field-wrapper').find('input[type=\'password\']').length > 0) {
            $(this).find('.field-wrapper').append('<a class="clearbutton"></a>');
            if ($(this).find('.field-wrapper').find('input[type=\'password\']').val().length > 0) {
                $(this).find('.field-wrapper').find('.clearbutton').show();
            }
        }
    });
    $('body').find('.form-row .field-wrapper input').on('focus', function () {
        if ($(this).hasClass('errorclient')) {
            $(this).removeClass('errorclient');
        }
    });
    $('body').find('.form-row .field-wrapper input').on('keyup input blur', function () {
        if ($(this).val() != undefined) {
            if ($(this).val().length > 0) {
                $(this).closest('.form-row').find('a.clearbutton').show();
            } else {
                $(this).closest('.form-row').find('a.clearbutton').hide();
            }
        }
    });
    $('body').find('input').focusin(function () {
        $(this).closest('.formfield, .form-row').removeClass('inputlabel');
        $(this).closest('.formfield').find('.form-row , .label span').removeClass('inputlabel');
        $(this).removeClass('errorclient');
        $(this).closest('.formfield , .form-row').find('.logerror , .existing_register').css('display', 'none');
    });
    $('body').find('.form-row a.clearbutton').on('click', function () {
        $(this).closest('.field-wrapper').find('span').remove();
        $(this).closest('.field-wrapper').find('.required').removeClass('errorclient');
        $(this).closest('.form-row').find('.form-row , .label span').removeClass('inputlabel');
        $(this).closest('.form-row').find('input').val('');
        $(this).closest('.form-row').find('a.clearbutton').hide();
        $(this).closest('.form-row').find('span.logerror , .existing_register').hide();
    });

    $('.pt_checkout .textinput, .pt_checkout .custom-select-wrap, .pt_checkout .textinputpw').bind('keyup blur', function () {
        if (jQuery('.New-shipping-authentication-detail').find('input[name$=\'_ProcessWay\']').val() == 2) {
            var errordiv = '<div class=\'error loginerror\'>' + Resources.checkout_login_error + '</div>';
            if ($('.shippinglogindetails').is(':visible') || !$('.checkoutshipping form[id$="_login"]').valid()) {
                if ($('.checkout .loginerror').length > 0) {
                    $('.checkout .loginerror').remove();
                }
                jQuery('.state-blk .stateerror.error').hide();
                if ($(this).closest('.formfield').find('.loginerror').length == 0) {
                    $(this).closest('.formfield').append(errordiv);
                }
            }
        }
        setTimeout(function () {
            uievents.synccheckoutH();
        }, 100);
    });

    $('.new-address-button').bind('click', function () {
        //jQuery("input[name=${pdict.CurrentForms.singleshipping.shippingAddress.makedefault.htmlName}]").attr('checked', true);
        $('.addressoptions-addToAddressBook,.addressoptions-makedefault ').removeClass('hide');
        $('input[name$=\'shippingAddress_selectedaddress\']').val('');
        $('.selected-shipping-address').empty();
        $('input[name$=\'_addressid\']').val('');
        $('input[name$=\'_addressFields_firstName\']').val('');
        $('input[name$=\'_addressFields_lastName\']').val('');
        $('input[name$=\'_addressFields_address1\']').val('');
        $('input[name$=\'_addressFields_address2\']').val('');
        $('input[name$=\'_addressFields_city\']').val('');
        $('input[name$=\'_addressFields_postal\']').val('');
        $('input[name$=\'_addressFields_phone\']').val('');
        $('input[name$=\'_addressFields_states_state\']').val('');
        uievents.changeFormSelection(jQuery('select[name$=\'_addressFields_title\']')[0], '');
        uievents.changeFormSelection(jQuery('select[name$=\'_addressFields_country\']')[0], '');
        uievents.changeFormSelection(jQuery('select[name$=\'_addressFields_states_state\']')[0], '');
        uievents.changeFormSelection(jQuery('select.address-select')[0], '');
        $('.shipping-address-field-section').removeClass('hide');
        $('.selected-shipping-address, .new-address-field').addClass('hide');
        $('input[name$=\'_addressFields_phone\']').closest('div.phone').find('span.errorclient').remove();
        $('input[name$=\'_addressFields_postal\']').closest('div.zip').find('span.errorclient').remove();
        $('.addressform .form-row.custom-select').removeClass('customselect-error');
        $('.custom-select').each(function () {
            var selectVal = $(this).find(':selected').text();
            $(this).find('.selectorOut').text(selectVal);
        });
        if ($('.checkout').hasClass('billingsection')) {
            $('body').find('input[name$=_sameasshippingaddress]').removeAttr('checked');
            $('body').find('input[name$=_sameasshippingaddress]').closest('.custom-checkbox').find('.custom-link').removeClass('active');
        }
        $('a.clearbutton').hide();
        $('.shipping-address-field-section .form-row').find('input').removeClass('errorclient');
        uievents.customFields();
        uievents.synccheckoutH();
    });
    $('.edit-address-field .edit-billing-button').bind('click', function () {
        var $form = $('.address');
        var selectedAddress = $(this).closest('.edit-address-field').data('address');
        util.fillAddressFields(selectedAddress, $form);
        $('.edit-address-field').addClass('hide');
        $('.selected-shipping-address, .new-address-field').addClass('hide');
        $('.billing-address-fields').removeClass('hide');
        uievents.customFields();
        uievents.synccheckoutH();
    });
    uievents.synccheckoutH();
    //if on the order review page and there are products that are not available diable the submit order button
    /* if ($('.order-summary-footer').length > 0) {
         if ($('.notavailable').length > 0) {
             $('.order-summary-footer .submit-order .button-fancy-large').attr('disabled', 'disabled');
         }
     }*/
};

},{"../../uievents":62,"../../util":63,"./address":34,"./billing":35,"./multiship":38,"./shipping":39}],38:[function(require,module,exports){
'use strict';

var address = require('./address'),
    formPrepare = require('./formPrepare'),
    dialog = require('../../dialog'),
    util = require('../../util'),
    shipping = require('./shipping'),
    //JIRA PREV-99 : shipping methods is not displayed for 2nd address in right nav.
ajax = require('../../ajax'); //JIRA PREV-99 : shipping methods is not displayed for 2nd address in right nav.

/**
 * @function
 * @description Initializes gift message box for multiship shipping, the message box starts off as hidden and this will display it if the radio button is checked to yes, also added event handler to listen for when a radio button is pressed to display the message box
 */
function initMultiGiftMessageBox() {
    $.each($('.item-list'), function () {
        var $this = $(this);
        var $giftMessage = $this.find('.gift-message-text');

        //handle initial load
        $giftMessage.toggleClass('hidden', $('input[name$="_isGift"]:checked', this).val() !== 'true');

        //set event listeners
        $this.on('change', function () {
            $giftMessage.toggleClass('hidden', $('input[name$="_isGift"]:checked', this).val() !== 'true');
        });
    });
}

/**
 * @function
 * @description capture add edit adddress form events
 */
function addEditAddress(target) {
    var $addressForm = $('form[name$="multishipping_editAddress"]'),
        $addressDropdown = $addressForm.find('select[name$=_addressList]'),
        $addressList = $addressForm.find('.address-list'),
        add = true,
        selectedAddressUUID = $(target).parent().siblings('.select-address').val();

    $addressDropdown.on('change', function (e) {
        e.preventDefault();
        var selectedAddress = $addressList.find('select').val();
        if (selectedAddress !== 'newAddress') {
            selectedAddress = $.grep($addressList.data('addresses'), function (add) {
                return add.UUID === selectedAddress;
            })[0];
            add = false;
            // proceed to fill the form with the selected address
            util.fillAddressFields(selectedAddress, $addressForm);
        } else {
            //reset the form if the value of the option is not a UUID
            add = true; //PREVAIL - Added to handle back and forth scenarios.
            $addressForm.find('.input-text, .input-select').val('');
        }
    });

    $addressForm.on('click', '.cancel', function (e) {
        e.preventDefault();
        dialog.close();
    });

    $addressForm.on('submit', function (e) {
        e.preventDefault();

        // PREV-98: validation error messages are not displayed when adding address in Multi-Shipping. Added the following IF block.
        if (!$addressForm.valid()) {
            return false;
        }
        $.getJSON(Urls.addEditAddress, $addressForm.serialize(), function (response) {
            if (!response.success) {
                // @TODO: figure out a way to handle error on the form
                return;
            }
            var address = response.address,
                $shippingAddress = $(target).closest('.shippingaddress'),
                $select = $shippingAddress.find('.select-address'),
                $selected = $select.find('option:selected'),
                newOption = '<option value="' + address.UUID + '">' + (address.ID ? '(' + address.ID + ')' : address.firstName + ' ' + address.lastName) + ', ' + address.address1 + ', ' + address.city + ', ' + address.stateCode + ', ' + address.postalCode + '</option>';
            dialog.close();
            if (add) {
                $('.shippingaddress select').removeClass('no-option').append(newOption);
                $('.no-address').hide();
            } else {
                $('.shippingaddress select').find('option[value="' + address.UUID + '"]').html(newOption);
            }
            // if there's no previously selected option, select it
            if ($selected.length === 0 || $selected.val() === '') {
                $select.find('option[value="' + address.UUID + '"]').prop('selected', 'selected').trigger('change');
            }
        });
    });

    //preserve the uuid of the option for the hop up form
    if (selectedAddressUUID) {
        //update the form with selected address
        $addressList.find('option').each(function () {
            //check the values of the options
            if ($(this).attr('value') === selectedAddressUUID) {
                $(this).prop('selected', 'selected');
                $addressDropdown.trigger('change');
            }
        });
    }
}

/**
 * @function
 * @description shows gift message box in multiship, and if the page is the multi shipping address page it will call initmultishipshipaddress() to initialize the form
 */
exports.init = function () {
    initMultiGiftMessageBox();
    if ($('.cart-row .shippingaddress .select-address').length > 0) {
        formPrepare.init({
            continueSelector: '[name$="addressSelection_save"]',
            formSelector: '[id$="multishipping_addressSelection"]'
        });
    }
    $('.edit-address').on('click', 'a', function (e) {
        e.preventDefault(); //JIRA PREV-205-Checkout Multiple Shipping Page - In Add/Edit address page cancel button not responding
        dialog.open({
            url: this.href,
            options: {
                open: function open() {
                    address.init();
                    addEditAddress(e.target);
                    require('../../validator').init(); //JIRA PREV-98 : validation error messages are not displayed when adding  multiple address.re-init validator.
                    require('../../tooltip').init(); // JIRA PREV-84 : Multiple shipping page: Not displaying Tool tip. re-init tooltips.
                }
            }
        });
    });

    /*
      Start JIRA PREV-99 : shipping methods is not displayed for 2nd address in right nav
      Start JIRA PREV-103 : Selected shipping method will not update automatically in right nav
    */
    $(document).find('.checkoutmultishipping select[name$="_shippingMethodID"]').on('change', function () {
        var shipmentID = $(this).data('shipmentid');
        var shippingMethodId = $('option:selected', this).attr('value');
        ajax.getJson({
            url: Urls.multiShippingSelectSM,
            data: {
                'shipmentID': shipmentID,
                'shippingMethodId': shippingMethodId
            },
            callback: function callback(data) {
                shipping.updateSummary();
                if (!data || !data.success) {
                    window.alert('Could not select shipping method.');
                    return false;
                }
            }
        });
    });
    /*End JIRA PREV-103, PREV-99*/
};

},{"../../ajax":15,"../../dialog":23,"../../tooltip":61,"../../util":63,"../../validator":64,"./address":34,"./formPrepare":36,"./shipping":39}],39:[function(require,module,exports){
'use strict';

var ajax = require('../../ajax'),
    progress = require('../../progress'),
    tooltip = require('../../tooltip'),
    util = require('../../util'),
    dialog = require('../../dialog'),
    uievents = require('../../uievents'),
    $submitButton = $('button.continue-checkout');

/**
 * @function
 * @description Initializes gift message box, if shipment is gift
 */
function giftMessageBox() {
    // show gift message box, if shipment is gift
    $('.gift-message-text').toggleClass('hidden', $('input[name$="_shippingAddress_isGift"]:checked').val() !== 'true');
}

/**
 * @function
 * @description shows the spinning icon on the Continue To Billing button for IE11
 */
function updateButtonIE() {
    // indicate progress
    $submitButton.append('<div class="loader"><div class="loader-indicator"></div><div class="loader-bg"></div></div>');
}

/**
 * @function
 * @description updates the order summary based on a possibly recalculated basket after a shipping promotion has been applied
 */
function updateSummary() {
    var $summary = $('#secondary .new-summery-cart');
    // indicate progress
    if (navigator.userAgent.match(/Trident\/7\./)) {
        updateButtonIE();
    }
    progress.show($summary);
    var stateValue = $('body').find('select[id$="_addressFields_states_state"]').val();
    var url = util.appendParamToURL(Urls.summaryRefreshURL, 'selectedState', stateValue);
    // load the updated summary area
    $summary.load(url, function () {
        // hide edit shipping method link
        $summary.fadeIn('fast');
        $summary.find('.checkout-mini-cart .minishipment .header a').hide();
        $summary.find('.order-totals-table .order-shipping .label a').hide();
        uievents.synccheckoutH();
    });
}

/**
 * @function
 * @description shows the spinning icon on the Continue To Billing button
 */
function updateButton() {
    // indicate progress
    $(function () {
        if (navigator.userAgent.match(/Trident\/7\./)) {
            $submitButton.append('<div class="loader"><div class="loader-indicator"></div><div class="loader-bg"></div></div>');
        }
    });
    progress.show($submitButton);
}

/**
 * @function
 * @description Helper method which constructs a URL for an AJAX request using the
 * entered address information as URL request parameters.
 */
function getShippingMethodURL(url, extraParams) {
    var $form = $('.address');
    var params = {
        address1: $form.find('input[name$="_address1"]').val(),
        address2: $form.find('input[name$="_address2"]').val(),
        countryCode: $form.find('select[id$="_country"]').val(),
        stateCode: $form.find('select[id$="_state"]').val(),
        postalCode: $form.find('input[name$="_postal"]').val(),
        city: $form.find('input[name$="_city"]').val()
    };
    return util.appendParamsToUrl(url, $.extend(params, extraParams));
}

/**
 * @function
 * @description selects a shipping method for the default shipment and updates the summary section on the right hand side
 * @param
 */
function selectShippingMethod(shippingMethodID) {
    // nothing entered
    if (!shippingMethodID) {
        return;
    }

    // attempt to set shipping method
    var url = getShippingMethodURL(Urls.selectShippingMethodsList, {
        shippingMethodID: shippingMethodID
    });
    ajax.getJson({
        url: url,
        callback: function callback(data) {
            updateSummary();
            $('button.continue-checkout .loader').remove();
            uievents.synccheckoutH();
            if (!data || !data.shippingMethodID) {
                window.alert('Couldn\'t select shipping method.');
                return false;
            }
            // display promotion in UI and update the summary section,
            // if some promotions were applied
            $('.shippingpromotions').empty();

            // if (data.shippingPriceAdjustments && data.shippingPriceAdjustments.length > 0) {
            // 	var len = data.shippingPriceAdjustments.length;
            // 	for (var i=0; i < len; i++) {
            // 		var spa = data.shippingPriceAdjustments[i];
            // 	}
            // }
        }
    });
}

/**
 * @function
 * @description Make an AJAX request to the server to retrieve the list of applicable shipping methods
 * based on the merchandise in the cart and the currently entered shipping address
 * (the address may be only partially entered).  If the list of applicable shipping methods
 * has changed because new address information has been entered, then issue another AJAX
 * request which updates the currently selected shipping method (if needed) and also updates
 * the UI.
 */
function updateShippingMethodList() {
    var $shippingMethodList = $('#shipping-method-list');
    if (!$shippingMethodList || $shippingMethodList.length === 0) {
        return;
    }

    if (navigator.userAgent.match(/Trident\/7\./)) {
        updateButtonIE();
    }
    var url = getShippingMethodURL(Urls.shippingMethodsJSON);

    ajax.getJson({
        url: url,
        callback: function callback(data) {
            if (!data) {
                window.alert('Couldn\'t get list of applicable shipping methods.');
                return false;
            }
            /*if (false && shippingMethods && shippingMethods.toString() === data.toString()) { // PREVAIL-Added for 'false' to handle SPC.
                // No need to update the UI.  The list has not changed.
                return true;
            }*/

            // We need to update the UI.  The list has changed.
            // Cache the array of returned shipping methods.
            //shippingMethods = data;
            // indicate progress
            progress.show($shippingMethodList);
            updateButton();
            // load the shipping method form
            var smlUrl = getShippingMethodURL(Urls.shippingMethodsList);
            $shippingMethodList.load(smlUrl, function () {
                $shippingMethodList.fadeIn('fast');
                // rebind the radio buttons onclick function to a handler.
                $shippingMethodList.find('[name$="_shippingMethodID"]').click(function () {
                    updateButton();
                    $('.shipping-methods .shipping-method .value .custom-link ').removeClass('active');
                    $(this).closest('.custom-link').addClass('active');
                    selectShippingMethod($(this).val());
                });

                // update the summary
                updateSummary();
                uievents.synccheckoutH();
                progress.hide();
                tooltip.init();
                //if nothing is selected in the shipping methods select the first one
                if ($shippingMethodList.find('.input-radio:checked').length === 0) {
                    $shippingMethodList.find('.input-radio:first').prop('checked', 'checked');
                }
                $(function () {
                    if (navigator.userAgent.match(/Trident\/7\./)) {
                        $('button.continue-checkout .loader').remove();
                    }
                });
            });
        }
    });
}

function signin() {
    $('#addressform .textinput').addClass('blured');
    $('#addressform .custom-select').addClass('blured');
    $('#addressform .custom-checkbox').addClass('blured');
    $('.signintomyaccount-block,.shipping-createrapalaaccount,.shipping-confirmemailaddress,.shipping-emailaddress,.shipping-guestconfirmemailaddress,.shipping-guestemailaddress,.shipping-password,.shipping-confirmpassword,.shipping-checkoutasguest,.or1,.createaccountmsg').addClass('hide');
    $('.checkoutasguest-block,.shippinglogindetails,.createanaccount-block,.or2,.addressoptions-addToAddressBook,.addressoptions-makedefault,.addressid').removeClass('hide');
    $('.shippinglogindetails').find('input[name$=\'_username\'],input[name$=\'_password\']').addClass('required');
    $('.New-shipping-authentication-detail').find('input[name$=\'_passwordconfirm\'],input[name$=\'_password\'],input[name$=\'_email\'],input[name$=\'_emailconfirm\'],input[name$=\'_guestemailconfirm\'],input[name$=\'_guestemail\']').removeClass('required');
    $('.New-shipping-authentication-detail').find('input[name$=\'_ProcessWay\']').val('2');
    $('.New-shipping-authentication-detail').find('input[name$=\'_passwordconfirm\'],input[name$=\'_password\']').val('');
    $('.checkout .shipping-address-field-section .formfield span.errorclient').remove();
    $('.shipping-address-field-section').addClass('signin-error');
    uievents.synccheckoutH();
}

exports.init = function () {
    if ($(document).find('.address-select').val() != '' && $(document).find('.address-select').val() != undefined) {
        $(document).find('.shipping-address-field-section').addClass('hide');
    } else {
        $(document).find('.shipping-address-field-section').removeClass('hide');
        $(document).find('.selected-shipping-address').addClass('hide');
        $(document).find('.new-address-field').addClass('hide');
    }
    if ($(document).find('.fromreturn1').val() == 'true') {
        $(document).find('.shipping-address-field-section').removeClass('hide');
    }
    $('input[name$="_shippingAddress_isGift"]').on('click', giftMessageBox);

    $('.address').on('change', 'input[name$="_addressFields_address1"], input[name$="_addressFields_address2"], select[name$="_addressFields_states_state"], input[name$="_addressFields_city"], input[name$="_addressFields_postal"]', // PREVAIL-Changed ZIP to postal
    updateShippingMethodList);

    giftMessageBox();
    updateShippingMethodList();

    $('.continue-checkout-button .continue-checkout').on('click', function () {

        updateButton();
        var form = $(this).closest('form[id$="_shippingAddress"]');
        if ($('.state-blk select').valid() == 0) {
            if (!$('.state-blk.custom-select').hasClass('blured')) {
                $('.state-blk.custom-select').addClass('customselect-error');
                //$('.state-blk .stateerror').show();
            }
        } else {
            //$('.state-blk  .stateerror').hide();
            $('.state-blk.custom-select').removeClass('customselect-error');
        }

        if (!$('.checkoutasguestbutton').is(':visible')) {
            $('.guestemailcon').blur();
            $('.guestemail').blur();
        }
        if (!form.valid()) {
            progress.hide();
            if (navigator.userAgent.match(/Trident\/7\./)) {
                $('button.continue-checkout .loader').remove();
            }
            if (jQuery('.shipping-address-field-section').hasClass('hide')) {
                $('select[name$=singleshipping_addressList]').val('');
                $('input[name$="singleshipping_shippingAddress_selectedaddress"]').val('');
                $('.custom-select').each(function () {
                    var selectVal = $(this).find(':selected').text();
                    $(this).find('.selectorOut').text(selectVal);
                });
                $('.shipping-address-field-section').removeClass('hide');
                $('.selected-shipping-address').addClass('hide');
            }
            if (!$('.shippinglogindetails').is(':visible')) {
                $('.singleshipping_error').removeClass('hide');
                $('.signinabove').hide();
            } else if ($('.shippinglogindetails').is(':visible')) {
                if (!$('.shippinglogindetails form').valid()) {
                    $('.shippinglogindetails .username .textinput, .shippinglogindetails .textinputpw').blur();
                    $('button[name$="login_login"]').trigger('click');
                }
                var errormsg = '<div id=\'message\' class=\'error-alert signinabove\' style=\'text-align: left;\'>Please Log in above to continue</div>';
                if ($('#dwfrm_singleshipping_shippingAddress .formactions #message').length > 0 || $('#dwfrm_singleshipping_shippingAddress .formactions .singleshipping_error').length > 0) {
                    jQuery('#dwfrm_singleshipping_shippingAddress .formactions #message').remove();
                    jQuery('#dwfrm_singleshipping_shippingAddress .formactions .singleshipping_error').hide();
                }
                jQuery('.singleshipping_error').hide();
                jQuery('#dwfrm_singleshipping_shippingAddress .formactions').prepend(errormsg);
                uievents.synccheckoutH();
                return false;
            }
        } else {
            $('.singleshipping_error').addClass('hide');
        }
        uievents.synccheckoutH();
    });

    $('body').on('click', '.go-as-guest-checkout', function () {
        $('.shipping-checkoutasguest, .signintomyaccount-block').removeClass('hide');
        $('.shippinglogindetails , .addressid').addClass('hide');
        uievents.synccheckoutH();
    });
    if ($('.state-shipping-valid-dialog').length > 0) {
        var dialogWidth = 511;
        var singOutDialog = dialog.create({
            target: '#dialog-container',
            options: {
                bgiframe: true,
                autoOpen: false,
                modal: true,
                width: dialogWidth,
                dialogClass: 'state-shipping-dialog'
            }
        });
        $(singOutDialog).empty().append($('.state-shipping-valid-dialog').html());
        singOutDialog.dialog('open');
    }
    $('body').on('click', '.shippingsignout', function (e) {
        e.preventDefault();
        $.ajax({
            url: this.href,
            success: function success(data) {
                var dialogWidth = 500;
                /*if( $(window).width() < 767 ){
                    dialogWidth = 300
                }*/
                var singOutDialog = dialog.create({
                    target: '#dialog-container',
                    options: {
                        bgiframe: true,
                        autoOpen: false,
                        modal: true,
                        width: dialogWidth,
                        dialogClass: 'sing-out-dialog'
                    }
                });
                $(singOutDialog).empty().append(data);
                singOutDialog.dialog('open');
            }
        });
    });
    $('body').on('click', '.signintomyaccountbutton', function () {
        signin();
        $('form[id$="_login"] .formfield.username, form[id$="_login"] .formfield.password').each(function () {
            $(this).find('.value input').val('').removeClass('errorclient');
            $(this).find('.value span.errorclient').hide();
        });
        $('form[id$="_login"] .wrongaddress').hide();
        $('form[id$="_login"] .#message.error').remove();

        $('.singleshipping_error').hide();
        $('.shipping-emaildetaillinks').addClass('loginactive');
        $('.shipping-emaildetaillinks').removeClass('reginactive');
        $('.New-shipping-authentication-detail input[id$="shippingAddress_email"]').removeClass('accemail');
        $('.New-shipping-authentication-detail input[id$="shippingAddress_emailconfirm"]').removeClass('accemailcon');
        $('.New-shipping-authentication-detail input[name$=\'_guestemailconfirm\']').removeClass('guestemailcon');
        $('.New-shipping-authentication-detail input[name$=\'_guestemail\']').removeClass('guestemail');
        $('.shippinglogindetails input[name$=\'login_username\']').addClass('loggedemail');
        $('.shippinglogindetails .correctaddress').removeClass('error').hide();
        if ($('.emailhidden').val()) {
            $('input[id$="login_username"]').val($('.emailhidden').val());
            $('input[id$="login_username"]').blur();
            $('input[id$="login_username"]').closest('.formfield').find('.correctaddress').show();
        }
        $('.New-shipping-authentication-detail input[name$=\'shippingAddress_password\']').removeClass('c_password');
        $('.New-shipping-authentication-detail input[name$=\'shippingAddress_passwordconfirm\']').removeClass('cm_password');
        $('.shippinglogindetails input[name$=\'login_password\']').addClass('login_password');
        $('.shipping-address-field-section .value input').removeClass('errorclient');
        $('.shipping-address-field-section .value span.errorclient').hide();
        $('.custom-select').removeClass('customselect-error');
        $('.stateerror').hide();
        uievents.synccheckoutH();
    });

    $('.shipping-guestemailaddress .textinput, .shipping-guestconfirmemailaddress .textinput, .shippinglogindetails .username .textinput, .shippinglogindetails .textinputpw, .shipping-emailaddress .textinput, .shipping-confirmemailaddress .textinput, .shipping-password .textinputpw, .shipping-confirmpassword .textinputpw').blur(function () {
        if ($(this).valid() == 0) {
            $(this).closest('.formfield').find('.correctaddress').addClass('error').show();
        } else {
            $(this).closest('.formfield').find('.correctaddress').removeClass('error').show();
        }
    });
    //PREVAIL - init Address Validation
    require('../../addressvalidation').init();
};

exports.updateShippingMethodList = updateShippingMethodList;
exports.updateSummary = updateSummary; //JIRA PREV-99 : shipping methods is not displayed for 2nd address in right nav.

},{"../../addressvalidation":14,"../../ajax":15,"../../dialog":23,"../../progress":52,"../../tooltip":61,"../../uievents":62,"../../util":63}],40:[function(require,module,exports){
'use strict';

var addProductToCart = require('./product/addToCart'),
    ajax = require('../ajax'),
    page = require('../page'),
    productTile = require('../product-tile'),
    quickview = require('../quickview');

/**
 * @private
 * @function
 * @description Binds the click events to the remove-link and quick-view button
 */
function initializeEvents() {
    $('#compare-table').on('click', '.remove-link', function (e) {
        e.preventDefault();
        ajax.getJson({
            url: this.href,
            callback: function callback(response) {
                /* Start JIRA PREV-74 : Compare page: Not navigating to PLP, When user clicks the "Remove (X)" icon on the last product,present in the product compare page.
                   Added condition to check for the last product removal if so navigate back to previous PLP.
                 */
                if (response.success && $('#compare-table .product-tile').length <= 1 && $('#compare-category-list').length === 0) {
                    window.location.href = $('.back').attr('href');
                } else if (response.success && $('#compare-table .product-tile').length <= 1 && $('#compare-category-list').length > 0) {
                    $('#compare-category-list option:selected').remove();
                    $('#compare-category-list').trigger('change');
                } else {
                    page.refresh();
                }
                /*End JIRA PREV-74 */
            }
        });
    }).on('click', '.open-quick-view', function (e) {
        e.preventDefault();
        var url = $(this).closest('.product').find('.thumb-link').attr('href');
        quickview.show({
            url: url,
            source: 'quickview'
        });
    });

    $('#compare-category-list').on('change', function () {
        $(this).closest('form').submit();
    });
}

exports.init = function () {
    productTile.init();
    initializeEvents();
    addProductToCart();
};

},{"../ajax":15,"../page":30,"../product-tile":51,"../quickview":54,"./product/addToCart":42}],41:[function(require,module,exports){
'use strict';

var util = require('../util');

function initializationEvent() {
    var currentSiteID = '';
    var currentSessionSite = $('body').find('.current-session-site').val();
    switch (currentSessionSite) {
        case 'rapala':
            currentSiteID = '1';
            break;
        case 'sufix':
            currentSiteID = '2';
            break;
        case 'triggerx':
            currentSiteID = '3';
            break;
        case 'storm':
            currentSiteID = '4';
            break;
        case 'luhrjensen':
            currentSiteID = '5';
            break;
        case 'vmc':
            currentSiteID = '6';
            break;
        case 'terminator':
            currentSiteID = '7';
            break;
        case 'bluefox':
            currentSiteID = '8';
            break;
        case 'williamson':
            currentSiteID = '9';
            break;
        case 'marcum':
            currentSiteID = '10';
            break;
        case 'strikemaster':
            currentSiteID = '11';
            break;
        case 'iceforce':
            currentSiteID = '20';
            break;
        case 'otter':
            currentSiteID = '21';
            break;
        default:
            currentSiteID = '1';
    }

    if (document.location.pathname.indexOf('ChangeRegion') < 0) {
        if (typeof geoipCountryCode == 'function') {
            var IPGeoCode = geoipCountryCode();
            var allowedCountries = $('.allowed-countries').text();
            if (allowedCountries == null || allowedCountries == 'null' || allowedCountries == 'undefined') {
                allowedCountries = 'US';
            }
            if (allowedCountries.indexOf(IPGeoCode) != -1) {
                var url = util.appendParamToURL(Urls.internationalHomeShow, 'id', currentSiteID);
                window.location.href = url;
            }
        }
    }
}

var international = {
    init: function init() {
        initializationEvent();
    }
};
module.exports = international;

},{"../util":63}],42:[function(require,module,exports){
'use strict';

var dialog = require('../../dialog'),
    minicart = require('../../minicart'),
    util = require('../../util'),
    TPromise = require('promise'),
    _ = require('lodash');

/**
 * @description Handler to handle the add all items to cart event
 */
var addAllToCart = function addAllToCart(e) {
    e.preventDefault();

    //PREVAIL-Added for GA integration
    //GAcommented
    if (isEventTrackingEnabled && isGoogleAnalyticsEnabled) {
        googleAnalyticsEvents.addProductSet();
    }

    var $productForms = $('#product-set-list').find('form').toArray();
    TPromise.all(_.map($productForms, addToCart)).then(function (responses) {
        dialog.close();
        // show the final response only, which would include all the other items
        minicart.show(responses[responses.length - 1]);
    });
};

/**
 * @function
 * @description Binds the click event to a given target for the add-to-cart handling
 */
// adds a product to the mini cart
// @params
// progressImageSrc - source/url of the image to show when the item
// is being added to the cart
// postdata - form data containing the product information to be
// added to mini-cart
// callback - call back function/handler
var addToCart = {
    init: function init() {
        $('.checkoutminicart').slimscroll();
        $('.add-to-cart[disabled]').attr('title', $('.availability-msg').text());
        //Start JIRA PREV-454, PREV-469 : Application navigation not consistent when click of add to cart button of the Product set page
        $('#add-all-to-cart').on('click', addAllToCart);
        if ($('.mini-cart-product').length > 1) {
            $('.minicartcontent .slimScrollDiv').removeClass('less');
            $('.minicartcontent .slimScrollDiv .slimScrollBar').show();
        } else {
            $('.minicartcontent .slimScrollDiv').addClass('less');
            $('.minicartcontent .slimScrollDiv .slimScrollBar').hide();
        }
    },
    add: function add(progressImageSrc, postdata, callback) {
        // get the data of the form as serialized string
        //var postdata = postdata;

        fbq('track', 'AddToCart', {
            'content_ids': [postdata.pid],
            'content_type': 'product'
        });

        // get button reference
        var addButtons = [];

        // the button to update
        var addButton = null;

        // it is an array of buttons, but we need only one all
        // other combinations are strange so far
        if (addButtons.length == 1) {
            addButton = addButtons[0];
        }

        var previousImageSrc = null;

        // show progress indicator
        if (addButton != null) {
            previousImageSrc = addButton.src;
            addButton.src = progressImageSrc;
        }

        // handles successful add to cart
        var handlerFunc = function handlerFunc(req) {

            if ($('#container').hasClass('pt_cart')) {
                window.location.href = window.location.href;
            }
            // hide progress indicator
            if (addButton != null) {
                addButton.src = previousImageSrc;
            }

            // replace the content
            jQuery('#minicart').html(req);
            addToCart.init();
            if ($('.minirow').length > 1 && !$('body').hasClass('rapala_device')) {
                $('.checkoutminicart').slimscroll({
                    railVisible: true,
                    alwaysVisible: true
                });
                $('.minicarttable').find('thead').first().addClass('theadfixedTop');
                $('.checkoutminicart').find('.cartordertotals').removeClass('carttotals');
                $('.checkoutminicart').find('.minicarttable').removeClass('miniwithoutScroll');
                $('.minicartcontent').find('.minicarttableheader').removeClass('miniwithoutScrollhead');
                $('.minicarttableheader').css('border-bottom', '1px solid #ccc');
            } else {
                $('.minicarttable').find('.theadfixedTop').removeClass('theadfixedTop');
                $('.minicarttable').find('.fixedTop').removeClass('fixedTop');
                $('.minicart').find('.cartordertotals').addClass('carttotals');
                $('.checkoutminicart').find('.minicarttable').addClass('miniwithoutScroll');
                $('.minicartcontent').find('.minicarttableheader').addClass('miniwithoutScrollhead');
                $('.minicarttableheader').css('border-bottom', '1px solid #ccc');
            }

            if ($('body').hasClass('rapala_device')) {
                $('.checkoutminicart').find('.minicarttable').removeClass('miniwithoutScroll');
                // $(".minicarttable .tr_rotation:last-child").find('.minirow').css('border','1px');
                $('.minicarttable').find('thead').first().addClass('theadfixedTop');
                $('.minicarttable .tr_rotation:last-child').find('.minirow').css('border', '0px');
                $('.minicarttableheader').css('border-bottom', '1px solid #ccc');
            }
            $('.minicarttable .tr_rotation:last-child').find('.minirow').css('border', '0px');

            if (minicart.suppressSlideDown && minicart.suppressSlideDown()) {
                // do nothing
                // the hook 'MiniCart.suppressSlideDown()' should have
                // done the refresh
            } else {
                minicart.slide();
                minicart.setminicarheight();
                if (callback) {
                    callback();
                }
            }
            $('#pdpMain .addtocartconfirm-tooltip').fadeIn(400).show().delay(1500).fadeOut(400);
            // fire the BonusDiscountLineItemCheck event so we can check
            // if there is a bonus discount line item
            jQuery(document).trigger(
            /*eslint-disable */
            jQuery.Event('BonusDiscountLineItemCheck'));
            /*eslint-enable */
        };

        // handles add to cart error
        var errFunc = function errFunc() {
            // hide progress indicator
            if (addButton != null) {
                addButton.src = previousImageSrc;
            }
        };

        // closes a previous mini cart
        minicart.close();

        var url = Urls.addProduct;

        // add the product
        //Looks the below commented code is not required and this is stopping not able add variation product from quick view in cart page.
        /* if ($('#container').hasClass('pt_cart') && $('.addTo-cart-section').find('.recommendation_cart').length == 0) {
            var plItemId = $('input.line-itemid').val();
            var params = {
                updateQty: 'true',
                lineItemId: plItemId
            };
            url = util.appendParamsToUrl(Urls.editLineItem, params);
        } */

        $.ajax({
            type: 'POST',
            url: util.ajaxUrl(url),
            cache: true,
            data: postdata,
            success: handlerFunc,
            error: errFunc
        });
    }
};
module.exports = addToCart;

},{"../../dialog":23,"../../minicart":29,"../../util":63,"lodash":5,"promise":6}],43:[function(require,module,exports){
'use strict';

var pdpEvents = require('./pdpEvents'),
    addToCart = require('./addToCart');

var product = {
    init: function init() {
        //initializeDom();
        //initializeEvents();
        addToCart.init();
        pdpEvents.init();
    }
};

module.exports = product;

},{"./addToCart":42,"./pdpEvents":44}],44:[function(require,module,exports){
'use strict';

var util = require('../../util'),
    dialog = require('../../dialog'),

//tooltip = require('../../tooltip'),
//uievents = require('../../uievents'),
//quickview = require('../../quickview'),
addToCart = require('./addToCart'),
    progress = require('../../progress'),
    ajax = require('../../ajax');

var product = function product(response) {
    // product private data

    // product json data
    var model = response;

    // div cotainer id
    var myContainerId = '';

    // boolean flag to track the variants data request, reset in loadVariants() when the variants data is loaded
    var isLoadingVar = false;

    // helper function to load variants data from the server
    // once the data is retrieved, it fires VariationsLoaded event so that UI can be refreshed appropriately
    var loadVariants = function loadVariants(thisProduct) {
        isLoadingVar = true;
        // build the url and load variants data
        ajax.getJson({
            url: Urls.getVariants,
            data: { 'pid': thisProduct.pid, 'format': 'json' },
            callback: function callback(data) {

                if (!data || !data.variations || !data.variations.variants) {
                    return;
                }
                model.variations.variants = data.variations.variants;
                isLoadingVar = false; // we have loaded the variants
                jQuery(thisProduct).trigger('VariationsLoaded');
            }
        });
    };

    // helper function to reload availability data.
    // by default, availability data is based on a quantity of 1.
    // if a customer changes the quantity, use this method
    // to reload the availability based on the new quantity.
    var reloadAvailability = function reloadAvailability(thisProduct, quantity) {

        var id = '';
        if (thisProduct.master || thisProduct.variant) {
            id = thisProduct.selectedVar.id;
        } else {
            id = thisProduct.pid;
        }

        ajax.getJson({
            url: Urls.getAvailability,
            data: { 'pid': id, 'Quantity': quantity, 'format': 'json' },
            callback: function callback(data) {

                if (!data || !data.levels) {
                    return;
                }

                // update the data in the variant
                if ((thisProduct.master || thisProduct.variant) && thisProduct.selectedVar) {
                    thisProduct.selectedVar.avLevels = data.levels;
                    thisProduct.selectedVar.avStatus = data.status;
                    thisProduct.selectedVar.avStatusQuantity = data.statusQuantity;
                } else {
                    model.avLevels = data.levels;
                    model.avStatus = data.status;
                    model.avStatusQuantity = data.status;
                }
                jQuery(thisProduct).trigger('ReloadAvailability');
            }
        });
    };
    // returns the aggregate available to sell value
    // from all variants
    var getATS = function getATS(variants) {

        var atsCount = 0;
        var variant;
        for (var i = 0; i < variants.length; i++) {
            variant = variants[i];
            if (variant.ATS > 0) {
                atsCount = atsCount + variant.ATS;
            }
        }
        return atsCount;
    };

    // returns the aggregate available to sell value
    // from all variants
    var getAvailability = function getAvailability(variants) {

        var available = false;
        var variant;
        for (var i = 0; i < variants.length; i++) {
            variant = variants[i];
            if (variant.avStatus !== 'NOT_AVAILABLE') {
                available = true;
                break;
            }
        }
        return available;
    };

    // helper function to bind product options drop downs event handlers
    // Intializes the product.selectedOptions object with the currently selected options
    // it also shows the computed/updated price
    var getOptionsDiv = function getOptionsDiv(thisProduct) {

        if (model.isOption) {

            var pdpOpt = jQuery(thisProduct.containerId + ' .product_options:last select');

            pdpOpt.change(function () {
                var vals = this.options[this.selectedIndex].value.split('%?%'); // 0 = value, 1 = price
                thisProduct.selectedOptions[this.id] = vals[0];
                thisProduct.selectedPrice[this.id] = vals[1];
                thisProduct.showUpdatedPrice(computePrice(thisProduct), model.pricing.standard);
            });

            // let us get the currently selected value and intilize the ui
            pdpOpt.each(function () {
                var vals = this.options[this.selectedIndex].value.split('%?%'); // 0 = value, 1 = price

                thisProduct.selectedOptions[this.id] = vals[0];
                thisProduct.selectedPrice[this.id] = vals[1];
                thisProduct.showUpdatedPrice(computePrice(thisProduct), model.pricing.standard);
            });
        }
    };

    // binds A2C button click handler
    var getAddToCartBtn = function getAddToCartBtn(thisProduct) {
        var addToCartBtn = jQuery(thisProduct.containerId + ' .addtocartbutton:last').click(function () {
            if (model.master || model.variant) {
                if (thisProduct.selectedVar == null) {
                    return false;
                }

                // it is necessary to update the option id to be variant-specific
                jQuery(thisProduct.containerId + ' .product_options:last select').each(function () {
                    var value = thisProduct.selectedOptions[this.id];
                    var newId = this.id.replace(thisProduct.pid, thisProduct.selectedVar.id);
                    thisProduct.selectedOptions[newId] = value;
                    delete thisProduct.selectedOptions[this.id];
                });

                thisProduct.selectedOptions.pid = thisProduct.selectedVar.id;
                thisProduct.selectedOptions.masterPid = thisProduct.pid;
            } else {
                var tempQty = '';
                // check if we are adding a bundle/productset to the cart
                if (model.bundle || model.productSet) {
                    var subProducts = thisProduct.subProducts;
                    var comma = ',';
                    var subproduct = null;

                    thisProduct.selectedOptions.childPids = '';

                    if (model.productSet) {
                        thisProduct.selectedOptions.Quantity = '';
                    }

                    // process each individual products in the set/bundle
                    // and prepare product.selectedOptions for final submission
                    for (var i = 0; i < subProducts.length; i++) {
                        subproduct = subProducts[i];

                        if (i == subProducts.length - 1) {
                            comma = ''; // at the end of the list
                        }

                        // see if any of the sub products are variations, if so then get the selected variation id
                        // from selectedVar property and make it a comma separated list
                        if ((subproduct.variant || subproduct.master) && subproduct.selectedVar == null) return false;
                        if (subproduct.variant || subproduct.master) {
                            thisProduct.selectedOptions.childPids += subproduct.selectedVar.id + comma;
                        } else {
                            thisProduct.selectedOptions.childPids += subproduct.pid + comma;
                        }

                        var tempPid = subproduct.selectedOptions.pid;
                        subproduct.selectedOptions.pid = null;
                        // merge selected options of sub product with the main product
                        thisProduct.selectedOptions = jQuery.extend({}, thisProduct.selectedOptions, subproduct.selectedOptions);
                        subproduct.selectedOptions.pid = tempPid;

                        // if it is a product set then sub products can have their separate qty
                        if (model.productSet) {
                            tempQty += subproduct.selectedOptions.Quantity + comma;
                        }
                    }
                }

                // if it is a product set then sub products can have their separate qty
                // tempQty is a comma separated list of qty for each product in the set
                if (model.productSet) {
                    thisProduct.selectedOptions.Quantity = tempQty;
                }

                // make sure the pid which gets submitted is for the main product
                thisProduct.selectedOptions.pid = thisProduct.pid;
            }

            if (model.bundle) {
                thisProduct.selectedOptions.Quantity = 1; // hard coded qty=1 when we the product is a bundle
            } else if (!model.productSet) {
                // grab the user entered qty
                thisProduct.selectedOptions.Quantity = jQuery(thisProduct.containerId + ' .quantityinput:last').val();
            }

            // if it is not a productset then make sure qty is specified greater than 0
            if (model.productSet || thisProduct.selectedOptions.Quantity > 0) {
                // disable a2c button
                addToCartBtn.prop('disabled', true);

                // find if there is a handler bound to AddToCart event e.g. cart -> edit details or wishlist -> edit details etc.
                // then fire it otherewise call addToCart.add to add the selected product to the cart and show minicart
                /*eslint-disable */
                var event = jQuery.Event('AddToCart');
                /*eslint-enable */
                event.selectedOptions = thisProduct.selectedOptions;

                if (jQuery.event.global.AddToCart == undefined || jQuery.event.global.AddToCart == null) {
                    addToCart.add('', thisProduct.selectedOptions, function () {
                        addToCartBtn.prop('disabled', false);
                    });
                } else {
                    jQuery(document).trigger(event);
                }
            }
            return false;
        });

        return addToCartBtn;
    };

    // bind qty box keyup handler
    // the handler grabs the value and updates
    // product.selectedOption.Quantity
    // show the updated availabilty message in case the available qty is different than available etc.
    // trigger AddtoCartEnabled event
    var getQtyBox = function getQtyBox(thisProduct) {

        jQuery(thisProduct.containerId + ' .quantityinput:last').keyup(function () {
            var val = null;
            try {
                val = parseInt(jQuery(thisProduct.containerId + ' .quantityinput:last').val(), 10);
            } catch (e) {
                val = null;
            }

            if (val) {
                thisProduct.selectedOptions.Quantity = val;

                // if the product has variations check for non selected ones and display missing value
                if (model.variations != undefined) {
                    var nonSelectedVars = [];

                    // get the non-selected variations
                    jQuery.each(model.variations.attributes, function () {
                        if (!thisProduct.selectedVarAttribs[this.id] || thisProduct.selectedVarAttribs[this.id] == '') {
                            nonSelectedVars.push(this.name);
                        }
                    });

                    if (nonSelectedVars.length > 0) {

                        // make sure there is something to sell
                        var atsCount = getATS(model.variations.variants);
                        if (atsCount == 0) {
                            return;
                        }

                        var tooltipStr = getNonSelectedTooltip(nonSelectedVars);
                        var missingMsg = $.validator.format(Resources.MISSING_VAL, tooltipStr);
                        setAvailabilityMsg(missingMsg);
                        return;
                    }
                }

                // If the quantity value is different than
                // when we loaded the availability data, then
                // refresh availability data for this variant
                if (val != thisProduct.getAvailabilityQty()) {
                    reloadAvailability(thisProduct, val);
                }
                //JCK: this isn't being run AFTER AJAX?
                //setAvailabilityMsg(createAvMessage(thisProduct, val));
                //jQuery(thisProduct).trigger("AddtoCartEnabled");
            }
        });

        // grab the currently displayed value basically the initial displayed value
        thisProduct.selectedOptions.Quantity = jQuery(thisProduct.containerId + ' .quantityinput:last').val();

        if (!isLoadingVar) {
            // show proper availability message
            setAvailabilityMsg(createAvMessage(thisProduct, thisProduct.selectedOptions.Quantity));
        }
    };

    // create product tabs i.e. description, Attributes, Reviews etc.
    // it depends on jQuery to create tab display.
    // also bind tab print button click handler
    var getTabs = function getTabs(containerId) {

        var tabsDiv = jQuery(containerId + ' #tabs');
        tabsDiv.tabs();

        // tab print handler
        jQuery('a.printpage').click(function () {
            window.print();
            return false;
        });
    };

    // register initializations here
    //show and hide handling of specific country.
    if (typeof geoipCountryCode == 'function') {
        var IPGeoCode = geoipCountryCode();
        var allowedCountries = $('.allowed-countries').text();
        if (allowedCountries == null || allowedCountries == 'null' || allowedCountries == 'undefined') {
            allowedCountries = 'US';
        }
        if (allowedCountries.indexOf(IPGeoCode) == -1) {
            $('.addtowishlist').addClass('hide');
        }
    }

    // bind addtowishlist, giftregistry, send to friend click handlers
    // bind handlers to AddtoCartDisabled, AddtoCartEnabled events for disabling/enabling wishlist/gift registry links
    var getMiscLinks = function getMiscLinks(thisProduct) {

        var disablelinks = function disablelinks() {
            if ((model.master || model.variant) && thisProduct.selectedVar == null) {
                // disable wishlist/gift registry links for master products
                jQuery(thisProduct.containerId + ' .addtowishlist, ' + thisProduct.containerId + ' .addtoregistry').addClass('unselectable');
            }
        };

        disablelinks(); // call it for initial display and then register it with AddtoCartDisabled event

        jQuery(thisProduct).bind('AddtoCartDisabled', {}, disablelinks);

        jQuery(thisProduct).bind('AddtoCartEnabled', {}, function () {
            // enable wishlist/gift registry links for variant products
            jQuery(thisProduct.containerId + ' .addtowishlist, ' + thisProduct.containerId + ' .addtoregistry').removeClass('unselectable');
        });

        // listen for availability reload events
        jQuery(thisProduct).bind('ReloadAvailability', {}, function (e) {
            // update the availability message
            var variant = e.target.selectedVar;
            setAvailabilityMsg(createAvMessage(e.target, variant == null ? model.avStatusQuantity : variant.avStatusQuantity));
            jQuery(e.target).trigger('AddtoCartEnabled');
        });

        // Add to wishlist, Add to gift registry click handler

        jQuery(thisProduct.containerId + ' .addtowishlist a.auth').click(function () {
            // append the currently selectied options to the url

            // create a local copy of the selected options
            var selectedOptions = jQuery.extend({}, {}, thisProduct.selectedOptions);

            if (model.master || model.variant) {
                if (thisProduct.selectedVar != null) {
                    selectedOptions.pid = thisProduct.selectedVar.id;
                } else {
                    return false; // do not allow master product to be added to gift registry/wishlist
                }
            } else {
                selectedOptions.pid = thisProduct.pid;
            }

            var tempUrl = this.href;

            if (!(tempUrl.indexOf('?') > 0)) {
                tempUrl = tempUrl + '?';
            } else {
                tempUrl = tempUrl + '&';
            }
            // serialize the name/value into url query string and append it to the url, make request
            var url = tempUrl + jQuery.param(selectedOptions);
            $.ajax({
                type: 'GET',
                url: url,
                dataType: 'html',
                success: function success() {
                    jQuery('#pdpMain .addtowishlist .addtowish-tooltip').fadeIn(400).delay(1500).fadeOut(400);
                },
                failure: function failure() {
                    alert('${Resource.msg(\'global.serverconnection\',\'locale\',null)}');
                }
            });
            setTimeout(function () {
                $('.ui-dialog-titlebar-close').trigger('click');
            }, 1500);
            //window.location = tempUrl + jQuery.param(selectedOptions);
            return false;
        });

        // Add to wishlist, Add to gift registry click handler
        jQuery(thisProduct.containerId + ' .addtowishlist a.non-auth, ' + thisProduct.containerId + ' .addtoregistry a').click(function () {
            // append the currently selectied options to the url

            // create a local copy of the selected options
            var selectedOptions = jQuery.extend({}, {}, thisProduct.selectedOptions);

            if (model.master || model.variant) {
                if (thisProduct.selectedVar != null) {
                    selectedOptions.pid = thisProduct.selectedVar.id;
                } else {
                    return false; // do not allow master product to be added to gift registry/wishlist
                }
            } else {
                selectedOptions.pid = thisProduct.pid;
            }

            var tempUrl = this.href;

            if (!(tempUrl.indexOf('?') > 0)) {
                tempUrl = tempUrl + '?';
            } else {
                tempUrl = tempUrl + '&';
            }
            // serialize the name/value into url query string and append it to the url, make request
            //var url = tempUrl + jQuery.param(selectedOptions);
            window.location = tempUrl + jQuery.param(selectedOptions);
            return false;
        });

        jQuery(thisProduct.containerId + ' .sendtofriend').click(function () {
            // create a local copy of the selected options
            var selectedOptions = jQuery.extend({}, {}, thisProduct.selectedOptions);

            if ((model.master || model.variant) && thisProduct.selectedVar != null) {
                selectedOptions.pid = thisProduct.selectedVar.id;
            } else {
                selectedOptions.pid = thisProduct.pid;
            }
            var tempURL = Urls.sendToFriend + '?' + jQuery.param(selectedOptions);
            dialog.open(tempURL, Resources.SEND_TO_FRIEND);
            return false;
        });
    };

    // binds product reviews click handlers
    // read review link opens reviews tab
    var getRatingSection = function getRatingSection(containerId) {

        jQuery(containerId + ' #pdpReadReview').click(function () {
            jQuery(containerId + ' #tabs').tabs('select', 'pdpReviewsTab');
        });

        jQuery(containerId + ' #pdpWriteReview').click(function () {});
    };

    // based on availability status, creates a message
    // param val - the stock value to compare i.e. qty entered by user
    var createAvMessage = function createAvMessage(thisProduct, val) {

        var avStatus = thisProduct.getAvStatus(); // availability status
        var avMessage = Resources[avStatus];
        var ats = thisProduct.getATS(); // get available to sell qty
        var avLevels = thisProduct.getAvLevels();
        var nonCloseoutLowQtyThreshold = thisProduct.getNonCloseoutLowQtyThreshold();

        // get ats levels per-status
        var inStockLevel = avLevels[Constants.AVAIL_STATUS_IN_STOCK];
        var backOrderLevel = avLevels[Constants.AVAIL_STATUS_BACKORDER];
        var preOrderLevel = avLevels[Constants.AVAIL_STATUS_PREORDER];
        //var notAvailLevel = avLevels[Constants.AVAIL_STATUS_NOT_AVAILABLE];

        if (avStatus === Constants.AVAIL_STATUS_IN_STOCK) {
            avMessage = '<span class=\'in-stock\'>' + avMessage + '</span>';
        }
        if (avStatus === 'NOT_AVAILABLE') {
            avMessage = '<span class=\'out-of-stock\'>' + avMessage + '</span>';
        }
        if (avStatus === Constants.AVAIL_STATUS_BACKORDER || avStatus === Constants.AVAIL_STATUS_PREORDER) {
            if (val > ats && ats > 0) {
                avMessage = avMessage + '<span class=\'in-stock\'>' + $.validator.format(Resources['QTY_' + avStatus], ats) + '</span>';
            }
            // display backorder/preorder availability
            avMessage = avMessage + getInStockDateMsg(thisProduct);
        } else if (val > inStockLevel && avStatus !== Constants.AVAIL_STATUS_NOT_AVAILABLE) {

            avMessage = '';
            if (inStockLevel > 0) {
                avMessage = avMessage + '<span class=\'in-stock\'>' + $.validator.format(Resources['QTY_' + Constants.AVAIL_STATUS_IN_STOCK], inStockLevel) + '</span>';
            }
            if (backOrderLevel > 0) {
                avMessage = avMessage + $.validator.format(Resources['QTY_' + Constants.AVAIL_STATUS_BACKORDER], backOrderLevel);
                // uncomment the following line to display availability message with back order information
                // avMessage = avMessage + getInStockDateMsg(thisProduct);
            }
            if (preOrderLevel > 0) {
                avMessage = avMessage + $.validator.format(Resources['QTY_' + Constants.AVAIL_STATUS_PREORDER], preOrderLevel);
                // uncomment the following line to display availability message with back order information
                // avMessage = avMessage + getInStockDateMsg(thisProduct);
            }
        } else if (ats !== 0 && ats <= nonCloseoutLowQtyThreshold) {
            avMessage = '<span class=\'low\'>' + $.validator.format(Resources.LOW, nonCloseoutLowQtyThreshold) + '</span>';
        }
        var standardPrice = thisProduct.selectedVar != null ? Number(thisProduct.selectedVar.pricing.standard || 0) : Number(model.pricing.standard || 0);

        var salePrice = Number(computePrice(thisProduct) || 0);

        if (standardPrice === 0 && salePrice === 0) {
            if (thisProduct.selectedVar != null) {
                if (thisProduct.selectedVar.earlyBirdMessage != '') {
                    avMessage = '<span class=\'coming-soon\'>' + thisProduct.selectedVar.earlyBirdMessage + '</span>';
                } else {
                    avMessage = '';
                }
            } else {
                if ($('.ebm-std-prod').length > 0 && $.trim($('.ebm-std-prod').text()) != '') {
                    avMessage = '<span class=\'coming-soon\'>' + $('.ebm-std-prod').text() + '</span>';
                } else {
                    avMessage = '';
                }
            }
        }
        return avMessage;
    };

    // helper function that returns the in-stock date
    var getInStockDateMsg = function getInStockDateMsg(product) {
        var msg = '';
        if (product.getInStockDate() && product.getInStockDate() != 'null') {
            msg = $.validator.format(Resources.IN_STOCK_DATE, new Date(product.getInStockDate()).toDateString());
        }
        return msg;
    };

    // helper function to set availability message
    var setAvailabilityMsg = function setAvailabilityMsg(msg) {
        jQuery(myContainerId + ' .availability:last .value').html(msg);
    };

    /**
     * Private. Computes price of a given product instance based on the selected options.
     *
     * @param thisProduct - the product instance
     * @return price of the product to 2 decimal points.
     */
    var computePrice = function computePrice(thisProduct) {

        var price = thisProduct.selectedVar != null ? thisProduct.selectedVar.pricing.sale : model.pricing.sale;
        // calculate price based on the selected options prices
        jQuery.each(thisProduct.selectedPrice, function () {
            price = (new Number(price) + new Number(this)).toFixed(2);
        });

        return price;
    };
    // Load the youtube videos only on demand
    // when the user clicks on the videos tab, then the youtube videos will be fetched dynamically
    // and loads the content in the pdpVideoTab div.
    jQuery('.videoTab').click(function () {
        if ($(this).hasClass('loaded')) {
            return false;
        }
        $(this).addClass('loaded');
        var target = $('#pdpVideoTab');
        var url = $('#productURL').val();
        ajax.load({
            url: url,
            dataType: 'html',
            callback: function callback(data) {
                target.html(data);
            }
        });
    });
    // bind click handlers for prev/next buttons on pdp from search
    var getNavLinks = function getNavLinks() {

        // NOTE:  WE COMMENT THIS OUT BECAUSE POWER REVIEWS RENDERING LIBRARY DOES NOT
        // WORK IN SOME BROWSERS WHEN A PRODUCT DETAIL PAGE IS PARTIALLY RELOADED USING AJAX.
        // IF WE DO NOT BIND EVENTS, THEN THE PREV/NEXT ANCHORS JUST WORK AS STANDARD
        // HYPERLINKS AND POWERREVIEWS WORKS FINE.

        // bind events
        //jQuery(".productnavigation a").click(function(e) {
        //	app.getProduct({url: this.href, source: "search"});
        //	return false;
        //});
    };

    // size chart link click binding
    var getSizeChart = function getSizeChart() {
        jQuery('.attributecontentlink').click(function () {
            // add size chart dialog container div if its not added yet
            // only added once
            if (jQuery('#sizeChartDialog').length == 0) {
                jQuery('<div/>').attr('id', 'sizeChartDialog').appendTo(document.body);
            }

            var sizeChartDialog = dialog.create({
                id: 'sizeChartDialog', options: {
                    height: 530,
                    width: 800,
                    title: Resources.SIZECHART_TITLE
                }
            });

            sizeChartDialog.dialog('open');

            // make the server call to load the size chart html
            $('#sizeChartDialog').load(this.href);

            return false;
        });

        $('.product-specifications').ready(function () {
            $('.product-specifications').load(jQuery('.attributecontentlink').attr('href'));
        });
    };
    // build the tooltip string for non selected variations
    var getNonSelectedTooltip = function getNonSelectedTooltip(nonSelectedVars) {
        var tooltipStr = '';
        var nsLen = nonSelectedVars.length;
        if (nsLen == 1 || nsLen == 2) {
            tooltipStr = nonSelectedVars.join(' & ');
        } else {
            for (var i = 0; i < nsLen; i++) {
                if (i == nsLen - 2) {
                    tooltipStr += nonSelectedVars[i] + ' & ' + nonSelectedVars[i + 1];
                    break;
                } else {
                    tooltipStr += nonSelectedVars[i] + ', ';
                }
            }
        }

        return tooltipStr;
    };

    // Product instance
    return {
        pid: model.ID,
        name: model.name,
        variant: model.variant,
        master: model.master,
        bundled: model.bundled,
        selectedVarAttribs: {}, // object containing variation attributes values as name value e.g. {color: "blue", size: "3", width: ""}
        selectedVar: null, // currently selected variant
        selectedOptions: {}, // holds currently selected options object {optionName, selected val}
        selectedPrice: {}, // holds prices for selected options as {warranty: ""}
        containerId: null, // holds the html container id of this product
        subProducts: [], // array to keep sub products instances
        bonusProduct: false,

        /**
         * Enable Add to Cart Button.
         */
        enableA2CButton: function enableA2CButton() {
            jQuery(this.containerId + ' .addtocart input, ' + this.containerId + ' .addtocartbutton:last').prop('disabled', false);
            jQuery(this.containerId + ' .addtocartbutton:last, ' + this.containerId + ' .addtocart').removeClass('disabled');
        },

        /**
         * Disable Add to Cart Button.
         */
        disableA2CButton: function disableA2CButton() {
            jQuery(this.containerId + ' .addtocart input, ' + this.containerId + ' .addtocartbutton:last').prop('disabled', true);
            jQuery(this.containerId + ' .addtocartbutton:last, ' + this.containerId + ' .addtocart').addClass('disabled');
        },

        removeA2CButton: function removeA2CButton() {

            jQuery('.addtocart').css('display', 'none');
            jQuery('.productinfo .price').css('display', 'none');
            if (ProductCache.master) {
                jQuery('.productinfo .productid').css('display', 'none');
            }
            //jQuery(this.containerId+" .variationattributes").css('display','none');
        },
        // show availability
        showAvailability: function showAvailability() {
            jQuery(this.containerId + ' .availability').show();
        },
        // hide availability
        hideAvailability: function hideAvailability() {
            jQuery(this.containerId + ' .availability').hide();
        },
        // show selected item #
        showItemNo: function showItemNo() {
            jQuery(this.containerId + ' .productid .value').html(this.selectedVar.id);
        },
        // removes  item #
        removeItemNo: function removeItemNo() {
            jQuery(this.containerId + ' .productid .value').empty();
        },
        revertPrice: function revertPrice() {
            var $price = jQuery(this.containerId + ' .productinfo .price:first');
            if (!$price.data('originalPrice')) {
                $price.data('originalPrice', $price.html());
            } else {
                $price.html($price.data('originalPrice'));
            }
        },
        // determine if this product is part of a bundle/product set VIEW
        setBonusProduct: function setBonusProduct(bonusProduct) {
            this.bonusProduct = bonusProduct;
        },

        // determine if this product is part of a bundle/product set VIEW
        isBonusProduct: function isBonusProduct() {
            return this.bonusProduct;
        },

        // determine if this product is part of a bundle/product set VIEW
        isSubProduct: function isSubProduct() {
            return model.bundled || model.productSetProduct;
        },

        // show the selected variation attribute value next to the attribute label e.g. Color: Beige
        showSelectedVarAttrVal: function showSelectedVarAttrVal(varId, val) {
            jQuery(this.containerId + ' .variationattributes div:not(.clear)').each(function () {
                var id = jQuery(this).data('data');

                if (varId === id) {
                    jQuery(this).find('span.selectedvarval').html(val);
                }
            });
        },

        // selects review tab
        readReviews: function readReviews() {
            jQuery(this.containerId + ' #tabs').tabs('select', 'pdpReviewsTab');
        },

        // shows product images and thumbnails
        // @param selectedVal - currently selected variation attr val
        // @param vals - total available variation attr values
        showImages: function showImages(selectedVal, vals) {
            var that = this;
            vals = vals || {};

            // show swatch related images for the current variation value
            jQuery.each(vals, function () {
                var imgCounter = -1;
                var thisVal = this;
                if (this.val === selectedVal && this.images) {

                    if (this.images.small.length > 0) {
                        jQuery(that.containerId + ' .productthumbnails:last').html('');
                        /**
                         * Show MagicZoom data - added by lgelberg 9/14/11
                         */
                        var zoomimageurl = thisVal.images.original.length > 0 ? thisVal.images.original[0].url : '';
                        //jQuery('.productdetailcolumn .productimage img, .productdetailcolumn .quickviewproductimage img').attr('src',thisVal.images.large[i].url);
                        jQuery('.MagicZoom').attr('href', zoomimageurl);
                        $('body').find('.MagicZoom img').attr('src', zoomimageurl);
                        MagicZoom.update('product-image', zoomimageurl, zoomimageurl);
                        // jQuery(that.containerId+" .productimage").html("").append(jQuery("<img/>").attr("src", thisVal.images.large[0].url).attr("alt", thisVal.images.large[0].alt).attr("title", thisVal.images.large[0].title));
                    }

                    // make sure to show number of images based on the smallest of large or small as these have to have 1-1 correspondence.
                    var noOfImages = this.images.large.length >= this.images.small.length ? this.images.small.length : this.images.large.length;

                    // show thumbnails only if more than 1 or if this is a subproduct (bundled/subproduct)
                    if ((this.images.small.length > 1 || that.isSubProduct()) && !that.isBonusProduct()) {
                        jQuery.each(this.images.small, function (index) {
                            imgCounter++;
                            //var imageInd = imgCounter;
                            if (imgCounter > noOfImages - 1) {
                                return;
                            }
                            var href = null;
                            if ($('#container').hasClass('pt_product-details')) {
                                href = thisVal.images.original[index].url;
                            } else {
                                // In quick view since magic zoom is not there, Hence we need to set javascript:void(0); for a tag href value
                                href = 'javascript:void(0);';
                            }
                            $(that.containerId + ' .productthumbnails:last').append('<div class=\'alternate-images\'><a data-zoom-id=\'product-image\' href=\'' + href + '\' class=\'alternate-image\' data-image=\'' + thisVal.images.original[index].url + '\'><img class=\'index' + index + '\' src=\'' + this.url + '\' title=\'' + this.title + '\' alt=\'' + this.alt + '\'/></a></div>');
                            if (that.containerId.indexOf('ui-dialog') == 1) {
                                $(that.containerId + ' .productthumbnails:last .alternate-image img').on('click touchstart', function (e) {
                                    e.preventDefault();
                                    $(this).closest('.owl-item').siblings('.owl-item').find('a.alternate-image').removeClass('selected');
                                    $(this).closest('.owl-item').find('a.alternate-image').addClass('selected');
                                    var zoomimageurl = $(this).closest('.alternate-image').data('image');
                                    //jQuery('.productdetailcolumn .productimage img, .productdetailcolumn .quickviewproductimage img').attr('src',thisVal.images.large[imageInd].url);
                                    $('body').find('.MagicZoom').attr('href', zoomimageurl);
                                    $('body').find('.MagicZoom img').attr('src', zoomimageurl);
                                    MagicZoom.update('product-image', zoomimageurl, zoomimageurl);
                                    MagicZoom.update('primary-image', zoomimageurl, zoomimageurl);
                                    //$("body").find('.product-image').trigger("click");
                                });
                            }
                        });
                        jQuery(that.containerId + ' .productthumbnails:last .owl-item').first().find('img').click();
                        //var $images = jQuery(that.containerId+" .productthumbnails:last .owl-item img");
                        //var numOfRows = Math.ceil($images.size()/6);
                        //$images.slice(numOfRows * 6 - 6, numOfRows * 6 - 1).css('margin-bottom','0');
                        var desktopItems = 4;
                        if (that.containerId.indexOf('ui-dialog') == 1) {
                            desktopItems = 3;
                        }
                        var pdpOwlCarousel = $('.pdp-owl-customization');
                        if ($(window).width() > 480) {
                            if (this.images.small.length > 4) {
                                pdpOwlCarousel.owlCarousel({
                                    margin: 10,
                                    navRewind: false,
                                    rewind: false,
                                    nav: true,
                                    dots: true,
                                    navigation: false,
                                    responsive: {
                                        0: {
                                            items: 1,
                                            slideBy: 1
                                        },
                                        481: {
                                            items: 3,
                                            slideBy: 3
                                        },
                                        960: {
                                            items: desktopItems,
                                            slideBy: desktopItems
                                        }
                                    }
                                });
                                $('img.index0').parents('.owl-item').find('a.alternate-image').addClass('selected');
                            } else {

                                if ($(pdpOwlCarousel).hasClass('owl-carousel')) {
                                    pdpOwlCarousel.trigger('destroy.owl.carousel');
                                }
                                pdpOwlCarousel.owlCarousel({
                                    items: desktopItems,
                                    navRewind: false,
                                    margin: 10,
                                    rewind: false,
                                    nav: false,
                                    dots: false,
                                    navigation: false,
                                    responsive: {
                                        0: {
                                            items: 1,
                                            slideBy: 1
                                        },
                                        481: {
                                            items: 3,
                                            slideBy: 3
                                        },
                                        960: {
                                            items: desktopItems,
                                            slideBy: desktopItems
                                        }
                                    }
                                });
                                $('img.index0').parents('.owl-item').find('a.alternate-image').addClass('selected');
                            }
                        } else if ($(window).width() < 481) {
                            pdpOwlCarousel.owlCarousel({
                                items: 1,
                                slideBy: 1,
                                margin: 10,
                                navRewind: false,
                                rewind: false,
                                nav: true,
                                dots: true,
                                navigation: false,
                                responsive: {
                                    0: {
                                        items: 1,
                                        slideBy: 1
                                    },
                                    481: {
                                        items: 3,
                                        slideBy: 3
                                    },
                                    960: {
                                        items: desktopItems,
                                        slideBy: desktopItems
                                    }
                                }
                            });
                        }
                    }
                }
            });
        },

        /**
         * Event handler when a variation attribute is selected/deselected.
         */
        varAttrSelected: function varAttrSelected(e) {
            // update the selected value node
            this.showSelectedVarAttrVal(e.data.id, e.data.val || '');

            this.selectedVarAttribs[e.data.id] = e.data.val;

            // if this is a deselection and user landed on a variant page then reset its variant flag
            // as now user has deselected an attribute thus making it essentially a master product view
            if (e.data.val == null && this.variant) {
                this.variant = false;
                this.master = true;
            }

            // store this ref
            var that = this;

            // trigger update event which will update every other variation attribute i.e. enable/disable etc.

            // first reset the contents of each attribute display
            // when we have got the varriations data
            if (!isLoadingVar) {
                // find variants which match the current selection
                var selectedVarAttrVariants = e.data.val != null ? this.findVariations({
                    id: e.data.id,
                    val: e.data.val
                }) : null;
                var selectedVarAttrs = jQuery.extend({}, {}, this.selectedVarAttribs);
                var validVariants = null;
                var unselectedVarAttrs = new Array();

                // for each selected variation attribute find valid variants
                for (var selectedVar in selectedVarAttrs) {
                    if (selectedVarAttrs[selectedVar]) {
                        validVariants = this.findVariations({
                            id: selectedVar,
                            val: selectedVarAttrs[selectedVar]
                        }, validVariants);
                    } else {
                        unselectedVarAttrs.push(selectedVar);
                    }
                }
                // update each variation attribute display
                jQuery.each(model.variations.attributes, function () {
                    if ((this.id != e.data.id || e.data.val == null) && selectedVarAttrs[this.id] == null) {
                        that.varAttrDisplayHandler(this.id, validVariants);
                    } else if (this.id != e.data.id && selectedVarAttrs[this.id] != null) {
                        that.varAttrDisplayHandler(this.id, selectedVarAttrVariants);
                    } else {
                        // show swatch related images for the current value
                        that.showImages(e.data.val, this.vals);
                    }
                });

                // based on the currently selected variation attribute values, try to find a matching variant
                this.selectedVar = this.findVariation(this.selectedVarAttribs);
            }

            // lets fire refresh view event to enable/disable variations attrs
            this.refreshView();
        },

        /**
         * go thru all variations attr and disable which are not available
         */
        resetVariations: function resetVariations() {
            if (isLoadingVar) {
                return; // we don't have the complete data yet
            }
            var that = this;
            var validVariants = model.variations.variants;
            if (this.selectedVarAttribs) {
                for (var selectedVarAttr in this.selectedVarAttribs) {
                    if (this.selectedVarAttribs[selectedVarAttr]) {
                        validVariants = that.findVariations({
                            id: selectedVarAttr,
                            val: this.selectedVarAttribs[selectedVarAttr]
                        }, validVariants);
                    }
                }
            }

            jQuery(this.containerId + ' .variationattributes .swatches').not('.current').not('.selected').each(function () {
                var dataa = jQuery(this).data('data'); // data is id set via app.hiddenData api
                jQuery(this).find('a.swatchanchor').each(function () {
                    // find A variation with this val
                    var filteredVariants = that.findVariations({ id: dataa, val: this.title }, validVariants);
                    if (filteredVariants.length > 0) {
                        // found at least 1 so keep it enabled
                        jQuery(this).parent().removeClass('unselectable');
                    } else {
                        jQuery(this).parent().addClass('unselectable');
                        jQuery(this).parent().removeClass('selected');
                    }
                });
            });
            jQuery(this.containerId + ' .variationattributes .variantdropdown select').not('.current select').not('.selected select').each(function () {
                var $select = jQuery(this);
                var vaId = $select.data('data').id; // data is id set via app.hiddenData api
                var options = $select.data('options');
                if (!options) {
                    options = [];
                    $select.find('option').each(function () {
                        var $option = jQuery(this);
                        options.push({ value: $option.val(), text: $option.text(), selected: false });
                    });
                    $select.data('options', options);
                }
                var len = options.length;
                var selectedVal = $select.val();
                $select.empty();
                jQuery.each(options, function (index, value) {

                    if (len > 1 && index == 0) {
                        $select.append(jQuery('<option></option>').text(value.text).val(value.value));
                        return; // very first option when the length is greater than 1 is 'Select ...' message so skip it
                    }
                    var filteredVariants = that.findVariations({ id: vaId, val: value.value }, validVariants);
                    if (filteredVariants.length > 0) {
                        //add it
                        $select.append(jQuery('<option></option>').text(value.text).val(value.value));
                    } else {
                        // no variant found with this value combination so disable it
                        //this.disabled = true;

                        /**if (this.selected) {
                        // remove the currently selected value if the value is not selectable
                        that.showSelectedVarAttrVal(attrId, "");
                        that.selectedVarAttribs[attrId] = null;
                        }*/
                        // remove current selection
                        //this.selected = false;
                    }
                });
                $select.val(selectedVal);
            });
        },

        /**
         * given a variation attribute id and valid variants, it would adjust the ui i.e. enable/disable
         * appropriate attribute values.
         *
         * @param attrId - String, id of the variation attribute
         * @param validVariants - Array of json objects of valid variants for the given attribute id
         * */
        varAttrDisplayHandler: function varAttrDisplayHandler(attrId, validVariants) {
            var that = this; // preserve this instance
            var futureVariants = validVariants;
            if (this.selectedVarAttribs) {
                for (var selectedVarAttr in this.selectedVarAttribs) {
                    if (this.selectedVarAttribs[selectedVarAttr]) {
                        futureVariants = that.findVariations({
                            id: selectedVarAttr,
                            val: this.selectedVarAttribs[selectedVarAttr]
                        }, futureVariants);
                    }
                }
            }
            // loop thru all non-dropdown ui elements i.e. swatches e.g. color, width, length etc.
            jQuery(this.containerId + ' .variationattributes .swatches.future, ' + this.containerId + ' .variationattributes .swatches.current').each(function () {
                var $swatch = jQuery(this);
                var swatchId = $swatch.data('data'); // data is id set via app.hiddenData api

                if (swatchId === attrId && validVariants) {

                    $swatch.find('a.swatchanchor').each(function () {
                        var $this = jQuery(this);
                        var parentLi = $this.parent();

                        // find A variation with this val
                        var filteredVariants = $swatch.hasClass('future') ? that.findVariations({ id: attrId, val: this.title }, futureVariants) : that.findVariations({ id: attrId, val: this.title }, validVariants);
                        if (filteredVariants.length > 0) {
                            // found at least 1 so keep it enabled
                            parentLi.removeClass('unselectable');
                            if ($swatch.hasClass('color')) {
                                if (!getAvailability(filteredVariants)) {
                                    if ($this.find('.out-of-stock').size() === 0) {
                                        $this.prepend('<span class=\'out-of-stock\'></span>');
                                    }
                                } else {
                                    $this.find('.out-of-stock').remove();
                                }
                            } else {
                                if (!getAvailability(filteredVariants)) {
                                    if ($this.find('span').text().indexOf('Out of Stock') === -1) {
                                        if ($this.find('span').text().indexOf('New') !== -1) {
                                            $this.find('span').text($this.find('span').text() + ' / Out of Stock');
                                        } else {
                                            $this.find('span').text('Out of Stock');
                                        }
                                    }
                                } else {
                                    if ($this.find('span').text().indexOf('New') !== -1) {
                                        $this.find('span').text($this.find('span').text().replace(' / Out of Stock', ''));
                                    } else {
                                        $this.find('span').text($this.find('span').text().replace('Out of Stock', ''));
                                    }
                                }
                            }
                        } else {
                            // no variant found with this value combination so disable it
                            parentLi.addClass('unselectable');

                            if (parentLi.hasClass('selected')) {
                                // remove the currently selected value if the value is not selectable
                                that.showSelectedVarAttrVal(attrId, '');
                                that.selectedVarAttribs[attrId] = null;
                            }
                            // remove current selection
                            parentLi.removeClass('selected');
                        }
                    });
                }
            });

            // loop thru all the non-swatches(drop down) attributes
            jQuery(this.containerId + ' .variationattributes .variantdropdown.future select, ' + this.containerId + ' .variationattributes .variantdropdown.current select').each(function () {
                var $select = jQuery(this);
                var vaId = $select.data('data').id; // data is id set via app.hiddenData api
                if (vaId === attrId && validVariants) {

                    var options = $select.data('options');
                    if (!options) {
                        options = [];
                        $select.find('option').each(function () {
                            var $option = jQuery(this);
                            options.push({ value: $option.val(), text: $option.text(), selected: false });
                        });
                        $select.data('options', options);
                    }
                    var len = options.length;
                    var selectedVal = $select.val();
                    $select.empty();
                    jQuery.each(options, function (index, value) {

                        if (len > 1 && index == 0) {
                            $select.append(jQuery('<option></option>').text(value.text).val(value.value));
                            return; // very first option when the length is greater than 1 is 'Select ...' message so skip it
                        }

                        // find A variation with this val
                        var filteredVariants = $select.closest('.variantdropdown').hasClass('future') ? that.findVariations({ id: attrId, val: value.value }, futureVariants) : that.findVariations({ id: attrId, val: value.value }, validVariants);
                        if (filteredVariants.length > 0) {
                            // found at least 1 so keep it enabled
                            var oos = '';
                            if (!getAvailability(filteredVariants)) {
                                oos = ' - Out of Stock';
                            }
                            //add it
                            $select.append(jQuery('<option></option>').text(value.text + oos).val(value.value));
                        } else {
                            // no variant found with this value combination so disable it
                            //this.disabled = true;

                            /**if (this.selected) {
                            // remove the currently selected value if the value is not selectable
                            that.showSelectedVarAttrVal(attrId, "");
                            that.selectedVarAttribs[attrId] = null;
                            }*/
                            // remove current selection
                            //this.selected = false;
                        }
                    });
                    $select.val(selectedVal);
                }
            });
        },

        /**
         * refresh the UI i.e. availability, price, A2C button and variation attributes display
         */
        refreshView: function refreshView() {
            var thisProduct = this;

            if (!isLoadingVar && this.selectedVar == null) {
                // if we have loaded the variations data then lets if the user has already selected some values
                // find a matching variation
                this.selectedVar = this.findVariation(this.selectedVarAttribs);
            }

            if (!isLoadingVar && this.selectedVar != null) {
                //Facebook Pixel Code for variant view
                fbq('track', 'ViewContent', {
                    'content_ids': [thisProduct.selectedVar.id],
                    'content_type': 'product'
                });
                // update availability
                reloadAvailability(thisProduct, thisProduct.selectedOptions.Quantity);
                // update price
                this.showUpdatedPrice(computePrice(thisProduct), this.selectedVar.pricing.standard);

                if (!(!this.selectedVar.inStock && this.selectedVar.avStatus === Constants.AVAIL_STATUS_NOT_AVAILABLE) && (this.getPrice() > 0 || this.isPromoPrice())) {
                    // Replace the hero shot with the specific variant chosen
                    var varID = this.selectedVar.id;
                    var imageUrl = model.images.variants[varID];
                    var zoomImageUrl = model.images.zoomvariants[varID];
                    // load the fully qualified variation image
                    if (imageUrl != null) {
                        //jQuery('.productdetailcolumn .productimage img, .productdetailcolumn .quickviewproductimage img').attr('src',imageUrl);
                        jQuery('.MagicZoom').attr('href', zoomImageUrl);
                        $('body').find('.MagicZoom img').attr('src', zoomImageUrl);
                        MagicZoom.update('product-image', zoomImageUrl, zoomImageUrl);
                    }

                    this.showItemNo();
                    this.showAvailability();
                    // enable add to cart button
                    this.enableA2CButton();
                    jQuery(this).trigger('AddtoCartEnabled');
                    if ($('#Quantity').val() < 1) {
                        $('addtocartbutton:last').prop('disabled', true);
                        $('.addtocart').addClass('disabled');
                    }
                } else if (this.selectedVar.earlyBirdMessage != '') {
                    this.showItemNo();
                    //this.hideAvailability();
                    this.disableA2CButton();
                    jQuery(this).trigger('AddtoCartDisabled');
                } else {
                    //this.removeItemNo();
                    this.showItemNo();
                    this.showAvailability();
                    //this.revertPrice();
                    this.disableA2CButton();
                    jQuery(this).trigger('AddtoCartDisabled');
                }
                if (this.selectedVar.avStatus === Constants.AVAIL_STATUS_NOT_AVAILABLE) {
                    //this.removeA2CButton();
                }
            } else {
                if (isLoadingVar) {
                    // update availability
                    setAvailabilityMsg(progress.show('productloader'));
                } else {
                    setAvailabilityMsg(Resources.NON_SELECTED);
                }
                this.removeItemNo();
                this.showAvailability();
                this.revertPrice();
                // disable add to cart button
                this.disableA2CButton();
                jQuery(this).trigger('AddtoCartDisabled');
            }

            var nonSelectedVars = [];

            var validVariants = null;

            for (var selectedVar in this.selectedVarAttribs) {
                if (this.selectedVarAttribs[selectedVar]) {
                    validVariants = this.findVariations({
                        id: selectedVar,
                        val: this.selectedVarAttribs[selectedVar]
                    }, validVariants);
                }
            }

            // update selected var attr vals and refresh their display
            jQuery.each(model.variations.attributes, function () {
                thisProduct.showSelectedVarAttrVal(this.id, thisProduct.selectedVarAttribs[this.id]);

                if (!thisProduct.selectedVarAttribs[this.id] || thisProduct.selectedVarAttribs[this.id] == '') {
                    nonSelectedVars.push(this.name);

                    thisProduct.varAttrDisplayHandler(this.id, validVariants);
                }
            });

            // process non-selected vals and show updated tooltip for A2C button as a reminder
            // and show it along availability
            var tooltipStr = getNonSelectedTooltip(nonSelectedVars);
            //var missingvalue = $(".missingvalue").val();
            if (nonSelectedVars.length > 0) {
                var availMsg = $.validator.format(Resources.MISSING_VAL, tooltipStr);
                setAvailabilityMsg(availMsg);
                //jQuery(thisProduct.containerId+" .addtocartbutton:last").attr("title", availMsg);
            }
        },

        /**
         * renders pricing div given a sale price and optional standard price
         * To format the price display, it goes to server via an ajax call.
         *
         * @param sale - sale price
         * @param standard - standard price
         */
        showUpdatedPrice: function showUpdatedPrice(sale, standard) {
            var standardPrice = Number(standard || 0);
            var salePrice = Number(sale || 0);
            var priceHtml = '';
            var formattedPrices = { 'salePrice': salePrice, 'standardPrice': standardPrice };

            // send server request to format the money baed on site settings using Money api
            ajax.getJson({
                url: Urls.formatMoney,
                cache: true,
                async: false,
                data: { 'salePrice': salePrice, 'standardPrice': standardPrice },
                callback: function callback(data) {
                    formattedPrices = data;
                }
            });

            // in case it is a promotional price then we do not care if it is 0
            priceHtml = salePrice > 0 || this.isPromoPrice() ? '<div class="salesprice">' + formattedPrices.salePrice + '</div>' : ' <div class="salesprice">N/A</div>';

            if (standardPrice > 0 && standardPrice > salePrice) {
                // show both prices
                priceHtml = '<div class="standardprice">' + formattedPrices.standardPrice + '</div>' + priceHtml;
            }
            if (standardPrice === 0 && salePrice === 0) {
                if (this.selectedVar.earlyBirdMessage != '') {
                    priceHtml = '<div class="salesprice">' + this.selectedVar.earlyBirdMessage + '</div>';
                } else {
                    priceHtml = '<div class="salesprice"></div>';
                }
            }
            var $price = jQuery(this.containerId + ' .productinfo .price:first');
            if (!$price.data('originalPrice')) {
                $price.data('originalPrice', $price.html());
            }
            $price.html(priceHtml);
            // containerId contains #, get rid of it before finding the right price div
            jQuery(this.containerId + ' #pdpATCDiv' + this.containerId.substring(1) + ' .price').html(priceHtml);
        },

        /**
         * returns a computed price for this product
         */
        getPrice: function getPrice() {
            return computePrice(this);
        },

        /**
         * Determines if the selected product has promotional price.
         *             *
         * @return boolean true if promotional price is present otherwise false
         */
        isPromoPrice: function isPromoPrice() {
            return this.selectedVar != null ? this.selectedVar.pricing.isPromoPrice : model.pricing.isPromoPrice;
        },

        /**
         * receives 2 or 1 variation attribute values and tries to figure out if there is a variant with these values.
         *
         * @param val1 - variation attribute value
         * @param val2 - variation attribute value
         * @return boolean - true if a variant exists otherwise false
         */
        isVariation: function isVariation(val1, val2) {
            var variant = null;

            for (var i = 0; i < model.variations.variants.length; i++) {
                variant = model.variations.variants[i];
                if (variant.attributes[val1.id] == val1.val && (val2 == undefined || variant.attributes[val2.id] == val2.val)) {
                    return true;
                }
            }
            /**
             * apparently there is no way to break out of jQuery.each half way :(
             jQuery.each(model.variations.variants, function(){
            if (!found && this.attributes[val1.id] == val1.val && this.attributes[val2.id] == val2.val) {
            found = true;
            return;
            }
            });*/
            return false;
        },

        /**
         * find 0 or more variants matching the given attribs object(s) and in stock
         * return null or found variants
         */
        findVariations: function findVariations(attr, variants) {
            var foundVariants = new Array();
            variants = variants || model.variations.variants;

            var variant = null;
            for (var i = 0; i < variants.length; i++) {
                variant = variants[i];
                if (variant.attributes[attr.id] === attr.val) /*&&
                                                              //(variant.inStock || (variant.avStatus === app.constants.AVAIL_STATUS_BACKORDER && variant.ATS > 0) || (variant.avStatus === app.constants.AVAIL_STATUS_PREORDER && variant.ATS > 0))*/
                    {
                        foundVariants.push(variant);
                    }
            }

            return foundVariants;
        },

        /**
         * find a variant with the given attribs object
         * return null or found variation json
         */
        findVariation: function findVariation(attrs) {
            if (!this.checkAttrs(attrs)) {
                return null;
            }

            var attrToStr = function attrToStr(attrObj) {
                var result = '';
                jQuery.each(model.variations.attributes, function () {
                    result += attrObj[this.id];
                });
                return result;
            };

            var attrsStr = attrToStr(attrs);
            var variant = null;
            for (var i = 0; i < model.variations.variants.length; i++) {
                variant = model.variations.variants[i];
                if (attrToStr(variant.attributes) === attrsStr) {
                    return variant;
                }
            }
            return null;
        },

        // find a variation with the give id otherwise empty object
        findVariationById: function findVariationById(id) {

            for (var i = 0; i < model.variations.variants.length; i++) {
                // IE7 does NOT support this!!!
                //for each(var variation in model.variations.variants) {
                var variation = model.variations.variants[i];
                if (variation && variation.id === id) {
                    return variation;
                }
            }

            return {};
        },

        /**
         * see if the specified attrs object has all the variation attributes present in it
         * return true/false
         */
        checkAttrs: function checkAttrs(attrs) {
            for (var i = 0; i < model.variations.attributes.length; i++) {
                if (attrs[model.variations.attributes[i].id] == null) {
                    return false;
                }
            }
            return true;
        },

        // given an id, return attr definition from model.variations.attributes
        getAttrByID: function getAttrByID(id) {
            for (var i = 0; i < model.variations.attributes.length; i++) {
                if (model.variations.attributes[i].id === id) {
                    return model.variations.attributes[i];
                }
            }
            return {};
        },

        // returns current availability status e.g. in_stock, preorder etc.
        getAvStatus: function getAvStatus() {
            if ((this.variant || this.master) && this.selectedVar != null) {
                return this.selectedVar.avStatus;
            } else {
                return model.avStatus;
            }
        },

        // return available to sell qty
        getATS: function getATS() {
            if ((this.variant || this.master) && this.selectedVar != null) {
                return this.selectedVar.ATS;
            } else {
                return model.ATS;
            }
        },

        // return non-closeout low qty threshold
        getNonCloseoutLowQtyThreshold: function getNonCloseoutLowQtyThreshold() {
            if ((this.variant || this.master) && this.selectedVar != null) {
                return this.selectedVar.nonCloseoutLowQtyThreshold;
            } else {
                return model.nonCloseoutLowQtyThreshold;
            }
        },

        // return the quantity that was used to calculate availability
        getAvailabilityQty: function getAvailabilityQty() {
            if ((this.variant || this.master) && this.selectedVar != null) {
                return this.selectedVar.avStatusQuantity;
            } else {
                return model.avStatusQuantity;
            }
        },

        // return the availability levels
        getAvLevels: function getAvLevels() {
            if ((this.variant || this.master) && this.selectedVar != null) {
                return this.selectedVar.avLevels;
            } else {
                return model.avLevels;
            }
        },

        // returns in stock date
        getInStockDate: function getInStockDate() {
            if ((this.variant || this.master) && this.selectedVar != null) {
                return this.selectedVar.inStockDate;
            } else {
                return model.inStockDate;
            }
        },

        // set the add to cart button and bind handlers for bundle/product set
        getSubProductsBinding: function getSubProductsBinding() {
            var thisProduct = this;

            // For bundles and product-sets, enable or disable the add-to-cart button.
            // The button should be disabled if the add-to-cart button of any subproduct is disabled, enabled otherwise.
            // For product-sets, display a price which is the sum of the set-products prices as long as the add-to-cart button is enabled.
            if (model.bundle || model.productSet) {

                var bundleA2CEnabled = false;
                var price = new Number();
                for (var i = 0; i < thisProduct.subProducts.length; i++) {
                    var subProduct = thisProduct.subProducts[i];
                    bundleA2CEnabled = subProduct.isA2CEnabled();
                    if (!bundleA2CEnabled) {
                        break;
                    }

                    // collect price info
                    price += new Number(subProduct.getPrice());
                }

                // if any of the bundled product has its A2C button disabled then the bundle is not orderable
                if (!bundleA2CEnabled) {
                    this.disableA2CButton();
                } else {
                    this.enableA2CButton();

                    // show total price except for a bundle
                    if (!model.bundle) {
                        thisProduct.showUpdatedPrice(price);
                    }
                }
            }

            // bind AddtoCartDisabled event for each subproduct (bundle or product set)
            jQuery.each(thisProduct.subProducts, function () {
                jQuery(this).bind('AddtoCartDisabled', {},
                /**
                 * Event handler when a subproduct of a product set or a bundle is selected.
                 * disable the add to cart button
                 */
                function () {
                    thisProduct.disableA2CButton();
                });
            });

            // see if have any sub-products and bind AddtoCartEnabled event
            jQuery.each(thisProduct.subProducts, function () {
                jQuery(this).bind('AddtoCartEnabled', {},
                /**
                 * Event handler when a subproduct of a product set or a bundle is selected.
                 * Basically enable the add to cart button or do other  refresh if needed like price etc.
                 */
                function () {
                    // enable Add to cart button if all the sub products have been selected
                    // and show the updated price
                    var enableAddToCart = true;
                    var subProducts = thisProduct.subProducts;
                    var price = new Number();

                    for (var i = 0; i < subProducts.length; i++) {
                        if ((subProducts[i].variant || subProducts[i].master) && subProducts[i].selectedVar == null || !subProducts[i].bundled && (subProducts[i].selectedOptions.Quantity == undefined || subProducts[i].selectedOptions.Quantity <= 0)) {
                            enableAddToCart = false;
                            break;
                        } else {
                            if (subProducts[i].selectedVar != null) {
                                subProducts[i].selectedOptions.pid = subProducts[i].selectedVar.pid;
                            } else {
                                subProducts[i].selectedOptions.pid = subProducts[i].pid;
                            }

                            // Multiply the subproduct quantity-one price by the entered quantity.
                            // Important note:  This value will be incorrect if subproduct uses
                            // tiered pricing !!!!!
                            var subproductQuantity = subProducts[i].selectedOptions.Quantity;
                            if (subproductQuantity == undefined) {
                                subproductQuantity = 1;
                            }
                            price += new Number(subproductQuantity * subProducts[i].getPrice());
                        }
                    }

                    if (enableAddToCart && (model.productSet || model.inStock) && (price > 0 || thisProduct.isPromoPrice())) {
                        thisProduct.enableA2CButton();

                        // show total price except for a bundle
                        if (!model.bundle) {
                            thisProduct.showUpdatedPrice(price);
                        }
                    } else {
                        thisProduct.disableA2CButton();
                    }
                });
            });
        },

        // determine if A2C button is enabled or disabled
        // true if enabled, false otherwise
        isA2CEnabled: function isA2CEnabled() {
            if (this.variant || this.master) {
                if (this.selectedVar != null) {
                    return this.selectedVar.avStatus === Constants.AVAIL_STATUS_IN_STOCK || this.selectedVar.avStatus === Constants.AVAIL_STATUS_BACKORDER || this.selectedVar.avStatus === Constants.AVAIL_STATUS_PREORDER;
                } else {
                    return false;
                }
            } else {
                return model.avStatus === Constants.AVAIL_STATUS_IN_STOCK || model.avStatus === Constants.AVAIL_STATUS_BACKORDER || model.avStatus === Constants.AVAIL_STATUS_PREORDER;
            }
        },

        /**
         * work horse of the product detail page getting everything tied together i.e. all the dynamic stuff
         * and one time initialization. called only ONCE
         * bind all the product display events and handlers
         * load variants in case this is a variation product
         * bind subproducts a2c button enable event handler
         *
         * @param options.cotainerId - id of the containing div
         * @param options.source - source of this product show request, mainly quickview
         */
        show: function show(options) {
            // preserve this instance
            var thisProduct = this;

            // bind VariationsLoaded which gets fired when the variation data is received from the server
            // and we need to refresh the ui
            jQuery(this).bind('VariationsLoaded', {}, function () {
                // enable/disable unavailable values
                // and set the currently selected values
                // reset the currently selected variation attributes i.e. reset the ui
                thisProduct.resetVariations();

                // create the default availability message based on ATS count
                // from the variants
                var atsCount = getATS(model.variations.variants);
                if (atsCount == 0) {
                    setAvailabilityMsg('<span class=\'out-of-stock\'>' + Resources[Constants.AVAIL_STATUS_NOT_AVAILABLE] + '</span>');
                }
                // We will use this in the 2nd of the two following loops
                var someAreNotSelected = false;
                // Determine the selected state of each option
                var $attributes = jQuery(thisProduct.containerId + ' .variationattributes .swatches,' + thisProduct.containerId + ' .variationattributes .variantdropdown');
                $attributes.each(function () {
                    var $this = jQuery(this);
                    if ($this.hasClass('swatches')) {
                        //if it is swatches, find the selected swatch
                        if ($this.find('.selected').size() > 0) {
                            $this.addClass('selected');
                        } else {
                            $this.removeClass('selected');
                        }
                    } else {
                        var selectBox = $this.find('select').get(0);
                        if ($(selectBox).find('option').length == 2) {
                            $(selectBox).find('option').eq(1).prop('selected', true);
                        }
                        if (selectBox.selectedIndex >= 0 && selectBox.options[selectBox.selectedIndex].value != '') {
                            $this.addClass('selected');
                        } else {
                            $this.removeClass('selected');
                        }
                    }
                }).each(function (index) {
                    var $this = jQuery(this);
                    if (someAreNotSelected) {
                        $this.removeClass('selected').addClass('future').find('.selected').removeClass('selected');
                        $this.find('.optionwrapper').slideUp();
                    }
                    if (!$this.hasClass('selected')) {
                        if (!someAreNotSelected) {
                            $this.addClass('current');
                            someAreNotSelected = true;
                        }
                    } else {
                        // if it's not the last item, hide the selections and leave the button enabled
                        if ($attributes.size() - 1 != index) {
                            $this.find('.optionwrapper').slideUp().find('button').removeClass('non-selectable');
                        } else {
                            //it is the last item, and it's selected, so it's current
                            $this.removeClass('selected').addClass('current');
                        }
                    }
                });

                // Grab the currently selected values and update the UI
                // swatch variation attributes
                jQuery(thisProduct.containerId + ' .variationattributes .swatches, ' + thisProduct.containerId + ' .variationattributes .variantdropdown select').each(function (index) {
                    if (index === 0) {
                        var $swatch = jQuery(this);
                        var swatchId = $swatch.data('data'); // data is id set via app.hiddenData api

                        if (model.variations.variants) {
                            if (typeof this.selectedIndex === 'undefined') {
                                $swatch.find('a.swatchanchor').each(function () {
                                    var $this = jQuery(this);
                                    //var parentLi = $this.parent();
                                    // find A variation with this val
                                    var filteredVariants = thisProduct.findVariations({
                                        id: swatchId,
                                        val: this.title
                                    }, model.variations.variants);

                                    if ($swatch.hasClass('color')) {
                                        if (!getAvailability(filteredVariants)) {
                                            if ($this.find('.out-of-stock').size() === 0) {
                                                $this.prepend('<span class=\'out-of-stock\'></span>');
                                            }
                                        } else {
                                            $this.find('.out-of-stock').remove();
                                        }
                                    } else {
                                        if (!getAvailability(filteredVariants)) {
                                            if ($this.find('span').text().indexOf('Out of Stock') === -1) {
                                                if ($this.find('span').text().indexOf('New') !== -1) {
                                                    $this.find('span').addClass('outofstockpdp');
                                                    $this.find('span').text($this.find('span').text() + ' / Out of Stock');
                                                } else {
                                                    $this.find('span').addClass('outofstockpdp');
                                                    $this.find('span').text('Out of Stock');
                                                }
                                            }
                                        } else {
                                            if ($this.find('span').text().indexOf('New') !== -1) {
                                                $this.find('span').text($this.find('span').text().replace(' / Out of Stock', ''));
                                            } else {

                                                $this.find('span').text($this.find('span').text().replace('Out of Stock', ''));
                                            }
                                        }
                                    }
                                });
                            } else {

                                $swatch.find('option').each(function () {
                                    if (this.value !== '') {
                                        var filteredVariants = thisProduct.findVariations({
                                            id: swatchId.id,
                                            val: this.value
                                        }, model.variations.variants);
                                        if (!getAvailability(filteredVariants)) {
                                            this.text = this.text + ' - Out of Stock';
                                        }
                                    }
                                });
                            }
                        }
                    }

                    if (typeof this.selectedIndex === 'undefined') {
                        var thisSwatch = jQuery(this),
                            pdpVarId = thisSwatch.data('data'); // data is id which is set via app.hiddenData onload

                        // grab the currently selected variation attribute val
                        thisSwatch.find('.selected a').each(function () {
                            thisProduct.varAttrSelected({ data: { id: pdpVarId, val: this.title } });
                        });
                    } else {
                        // non-swatch variation attributes
                        if (this.selectedIndex >= 0 && this.options[this.selectedIndex].value != '') {
                            // grab the currently selected val by firing update ui api
                            // when dealing with a select element, data returns an object so we must ask for id
                            thisProduct.varAttrSelected({
                                data: {
                                    id: jQuery(this).data('data').id,
                                    val: this.options[this.selectedIndex].value
                                }
                            });
                        }
                    }
                });
                /**
                 // loop thru all non-dropdown ui elements i.e. swatches e.g. color, width, length etc.
                 jQuery(this.containerId + " .variationattributes .swatches").each(function(){
                });*/
            });

            this.containerId = '#' + options.containerId;
            var isQuickView = false;

            if (options.source && options.source == 'quickview') {
                isQuickView = true;
                this.containerId = '.ui-dialog #' + options.containerId;
            }

            myContainerId = this.containerId;

            // bind click handlers for prev/next links
            getNavLinks();

            // size chart click binding
            getSizeChart();

            // variation attributes handling in case it is a master or a variant product
            if (model.master || model.variant) {
                loadVariants(this); // make a server call to load the variants, this is due to the performance reasons
                // meanwhile display the available variation attributes

                // bind the "next" buttons in the picker
                jQuery('button.next').click(function () {
                    /**var $this = jQuery(this);
                     if(!$this.hasClass("non-selectable")) {
                    $this.closest(".swatches, .variantdropdown").find(".optionwrapper").slideUp(400,function(){
                    jQuery(this).closest(".swatches, .variantdropdown")
                    .removeClass("current").addClass("selected")
                    .nextUntil(".swatches, .variantdropdown").next()
                    .addClass("current").removeClass("future")
                    .find(".optionwrapper").slideDown().find('select').change();
                    });
                    }*/
                });

                //bind the "previous" buttons in the picker
                jQuery('a.previous').click(function (e) {
                    e.preventDefault();
                    jQuery(this).closest('.swatches, .variantdropdown').prevUntil('.swatches, .variantdropdown').prev().find('a.filter').click();
                });
                $('.MagicZoom img.primary-image').bind('click', function () {
                    $('.new-swim,.old-swim').addClass('swimHide');

                    setTimeout(function () {
                        //var zoomedContent = $('.mz-expand-stage').html();
                        $('.mz-button-close').on('click', function () {
                            $('.new-swim,.old-swim').removeClass('swimHide');
                        });
                    }, 500);
                });
                // clicking on a previous step
                jQuery('.variationattributes').delegate('.selected a.filter', 'click', function (e) {
                    e.preventDefault();
                    var $this = jQuery(this).closest('.selected');
                    jQuery('.variationattributes .swatches,.variationattributes .variantdropdown').removeClass('current');
                    $this.removeClass('selected').addClass('current');
                    $this.nextAll('.swatches, .variantdropdown').each(function () {
                        var $variant = jQuery(this);
                        $variant.addClass('future').removeClass('selected');
                        if ($variant.hasClass('swatches')) {
                            $variant.find('.selected a').click();
                        } else if ($variant.hasClass('variantdropdown')) {
                            var $select = $variant.find('select');
                            if ($select.find('option').size() > 1) {
                                $select.val('').change();
                            }
                        }
                    });
                    $(this).parent().find('.swatchesdisplay .selected a').click();
                    $(this).parent().find('select').val('');

                    jQuery('.variationattributes').find('.future .optionwrapper').slideUp(400, function () {
                        jQuery('.current .optionwrapper').slideDown(400, function () {
                            $(this).find('.filter .value').text('');
                        });
                    });
                    jQuery('.variationattributes').find('.current .optionwrapper').slideDown(400, function () {
                        $(this).closest('.current').find('.filter .value').text('');
                    });
                });

                // bind the "learn more" links
                jQuery('span.learnmore a').click(function (e) {
                    e.preventDefault();
                    // add learn more dialog container div if its not added yet
                    // only added once
                    if (jQuery('#learnMoreDialog').length == 0) {
                        jQuery('<div></div>').attr('id', 'learnMoreDialog').appendTo(document.body);
                    }

                    var learnMoreDialog = dialog.create({
                        id: 'learnMoreDialog', options: {
                            height: 530,
                            width: 800,
                            title: Resources.SIZECHART_TITLE
                        }
                    });

                    learnMoreDialog.dialog('open');

                    // make the server call to load the learn more html
                    jQuery('#learnMoreDialog').load(this.href);
                });

                // loop thru all the swatches and bind events etc.
                jQuery(thisProduct.containerId + ' .variationattributes .swatches').each(function () {
                    var thisSwatch = jQuery(this);
                    var pdpVarId = thisSwatch.data('data'); // data is id which is set via app.hiddenData onload
                    var attrDef = thisProduct.getAttrByID(pdpVarId);

                    if (!attrDef) {
                        return;
                    }

                    // click handler for swatches links
                    var varEventHandler = function varEventHandler(e) {
                        var thisObj = jQuery(this);

                        e.data = { id: pdpVarId, val: this.title };

                        if (thisObj.parent().hasClass('unselectable')) {
                            return false;
                        } else if (thisObj.parent().hasClass('selected')) {
                            // deselection
                            e.data = { id: pdpVarId, val: null };
                            thisObj.parent().removeClass('selected');
                            // clear the current selection
                            thisProduct.varAttrSelected(e);

                            thisProduct.resetVariations();
                        } else {
                            // selection
                            e.data = { id: pdpVarId, val: this.title };
                            // remove the current selection
                            thisSwatch.find('.selected').removeClass('selected');
                            if (thisObj.closest('.swatches').nextUntil('.swatches, .variantdropdown').next().size() > 0) {
                                thisObj.parent().addClass('selected').closest('.swatches').find('button').removeClass('non-selectable');
                                var $this = jQuery(this);
                                if (!$this.hasClass('non-selectable')) {
                                    $this.closest('.swatches').find('.optionwrapper').slideUp(400, function () {
                                        jQuery(this).closest('.swatches').removeClass('current').addClass('selected').nextUntil('.swatches').next().not('.clear').first().addClass('current').removeClass('future').find('.optionwrapper').slideDown(400, function () {
                                            jQuery(this).find('select option').each(function (index) {
                                                if ($(this).closest('select').find('option').length == 2 && index == 1) {
                                                    $(this).prop('selected', true).trigger('change');
                                                    //$(this).attr('selected','selected').trigger('change');
                                                }
                                            });
                                        }).find('select').change();
                                    });
                                }
                            } else {
                                thisObj.parent().addClass('selected');
                            }
                            thisProduct.varAttrSelected(e);
                        }

                        return false;
                    };

                    // all swtach anchors
                    var varJqryObjs = thisSwatch.find('a.swatchanchor');

                    // if its a color attr then render its swatches and images
                    if (pdpVarId === 'color') {
                        var colorAttrDef = thisProduct.getAttrByID('color');

                        varJqryObjs.each(function () {

                            // given a variation attr value, find its swatch image url
                            var findSwatch = function findSwatch(val) {
                                for (var i = 0; i < colorAttrDef.vals.length; i++) {
                                    if (colorAttrDef.vals[i].val === val) {
                                        return colorAttrDef.vals[i].images.swatch;
                                    }
                                }
                                return ''; // no swatch image found
                            };

                            var swatchUrl = findSwatch(this.title).url; // find swatch url

                            if (swatchUrl && swatchUrl != '') {
                                //jQuery(this).css("color", "transparent").parent().css("background", "url(" + swatchUrl + ")");
                                jQuery(this).css('text-indent', '-9999px').prepend('<img alt="' + this.title + '" src="' + swatchUrl + '"/>');
                            } else {
                                jQuery(this).css('color', 'transparent'); // no swatch image found
                            }
                        });

                        // swatches click, hover and mouseleave event handlers
                        varJqryObjs.data('data', { id: pdpVarId }).click(varEventHandler);
                        if ($(window).width() > 1024) {
                            varJqryObjs.data('data', { id: pdpVarId }).mouseenter(function () {
                                thisProduct.showSelectedVarAttrVal('color', this.title);
                                thisProduct.showImages(this.title, colorAttrDef.vals);
                            }).mouseleave(function () {
                                if (thisProduct.selectedVar) {
                                    thisProduct.showImages(thisProduct.selectedVar.id, [{
                                        'val': thisProduct.selectedVar.id,
                                        'images': {
                                            'original': [{ 'url': model.images.zoomvariants[thisProduct.selectedVar.id] }],
                                            'small': [{ 'url': model.images.variants[thisProduct.selectedVar.id] }],
                                            'large': [{ 'url': model.images.variants[thisProduct.selectedVar.id] }]
                                        }
                                    }]);
                                } else if (thisProduct.selectedVarAttribs.color) {
                                    thisProduct.showImages(thisProduct.selectedVarAttribs.color, colorAttrDef.vals);
                                } else {
                                    thisProduct.showImages('', [{ val: '', images: model.images }]);
                                }

                                thisProduct.showSelectedVarAttrVal('color', thisProduct.selectedVarAttribs.color || '');
                            });
                        }
                    } else {
                        // not a color swatch, we only have click handler for this type of variation attribute e.g. width, length etc.
                        varJqryObjs.data('data', { id: pdpVarId }).click(varEventHandler);
                    }
                });

                jQuery(thisProduct.containerId + ' .variationattributes .variantdropdown select option').each(function (index) {
                    if (jQuery(thisProduct.containerId + ' .variationattributes .variantdropdown select option').length == 2 && index == 1) {
                        $(this).prop('selected', true).trigger('change');
                    }
                });

                // loop thru all the non-swatches attributes and bind events etc.
                jQuery(thisProduct.containerId + ' .variationattributes .variantdropdown select').each(function () {
                    // default ui i.e. drop downy
                    jQuery(this).data('data', { id: jQuery(this).data('data'), val: '' }).change(function (e) {
                        // if there is only 1 value to be selected then return i.e. no deselection available
                        //if (this.selectedIndex == 0 && this.options.length == 1) { return; }

                        e.data = jQuery(this).data('data'); // data is id
                        // this.selectedIndex == 0, it is deselection
                        e.data.val = this.selectedIndex == 0 && this.options.length > 1 ? null : this.options[this.selectedIndex].value;

                        if (this.selectedIndex == 0 && this.options.length > 1) {
                            // deselection
                            //jQuery(this).closest(".variantdropdown").find("button").addClass("non-selectable");
                        } else {
                            // selection
                            //jQuery(this).closest(".variantdropdown").find("button").removeClass("non-selectable");
                            jQuery(this).closest('.variantdropdown').find('.optionwrapper').slideUp(400, function () {
                                jQuery(this).closest('.variantdropdown').removeClass('current').addClass('selected').nextUntil('.future').next().addClass('current').removeClass('future').find('.optionwrapper').slideDown(400, function () {
                                    jQuery(this).find('select option').each(function (index) {
                                        if ($(this).closest('select').find('option').length == 2 && index == 1) {
                                            $(this).prop('selected', true).trigger('change');
                                            //$(this).attr('selected','selected').trigger('change');
                                        }
                                    });
                                }).find('select').change();
                            });
                        }

                        thisProduct.varAttrSelected(e);
                        if (this.selectedIndex == 0 && this.options.length > 1) {
                            // clear the current selection
                            thisProduct.resetVariations();
                        }
                    });
                });

                if (thisProduct.selectedVarAttribs.color) {
                    // show swatch related images for the current value
                    thisProduct.showImages(thisProduct.selectedVarAttribs.color, thisProduct.getAttrByID('color').vals);
                } else {
                    // show images and bind hover event handlers for small/thumbnails to toggle large image
                    thisProduct.showImages('', [{ val: '', images: model.images }]);
                }
            } else {
                // show images and bind hover event handlers for small/thumbnails to toggle large image
                thisProduct.showImages('', [{ val: '', images: model.images }]);
            }

            // bind product options event(s)
            getOptionsDiv(this);

            if (!model.productSet) {
                // quantity box
                if (!model.bundle) {
                    getQtyBox(this);
                } else if (model.bundle) {
                    // update avaiability for a bundle product, for everything else its done inside getQtyBox
                    setAvailabilityMsg(createAvMessage(this, 1));
                }
            }

            // Add to cart button click binding
            getAddToCartBtn(this);
            // intial display of A2C button
            // if the price is 0 or not available, its disabled
            // if not in stock, its disabled
            // isPromoPrice would be true in case if a product has a promotional price which could make product's price 0
            if (!(this.getPrice() > 0 || this.isPromoPrice()) || model.master || model.variant || model.productSet || model.bundle || !model.inStock && model.avStatus === Constants.AVAIL_STATUS_NOT_AVAILABLE && !model.productSet) {
                this.disableA2CButton();
                /** if((this.getPrice() == 0 && !this.isPromoPrice())) {
                this.hideAvailability();
                }*/
            }
            if (model.avStatus === Constants.AVAIL_STATUS_NOT_AVAILABLE) {}
            //this.removeA2CButton();


            // customer rating section only displayed for the main product
            if (!model.productSetProduct && !model.bundled) {
                if (!model.productSet && !isQuickView && !model.bundle) {
                    getRatingSection(this.containerId);
                }
            }

            // wish list, sent to friend, add to gift
            getMiscLinks(this);

            // product tabs
            getTabs(this.containerId);

            // setup bundle/product set
            this.getSubProductsBinding();
        },
        toString: function toString() {
            return this.model;
        }
    };
}; // Product defintion end
var ProductCache = null;
var quickviewShow = function quickviewShow(options) {
    var url = options.url;
    url = url = util.appendParamToURL(url, 'source', options.source);
    $('#QuickViewDialog').html('');
    var quickViewDialog = dialog.create({
        target: '#QuickViewDialog',
        options: {
            height: 530,
            width: 760,
            dialogClass: 'quickview',
            title: Resources.QUICK_VIEW_POPUP
        }
    });
    quickViewDialog.dialog('open');
    progress.show('#QuickViewDialog');

    $.ajax({
        url: url,
        success: function success(data) {
            $(quickViewDialog).html('').append(data);
            util.hiddenData();
            var ProductCache = null;
            var producJson = $('#QuickViewDialog .productjson').data('productjson');
            ProductCache = product(producJson);
            ProductCache.show({ containerId: 'pdpMain', append: false, source: options.source });
            addToCart.init();
            $('body').find('.quantityinput').off('keydown').on('keydown', function (e) {
                if (e.keyCode == 13) {
                    e.preventDefault();
                }
            });
            progress.hide();
        }
    });
};
var pdpEvents = {
    init: function init() {
        util.hiddenData();
        var producJson = $('body').find('.productjson').data('productjson');
        var sourceValue = $('body').find('.http-source').val();
        ProductCache = product(producJson);
        ProductCache.show({ containerId: 'pdpMain', append: false, source: sourceValue });
        $('#tabs').find('a[href="#pdpTab1"]').trigger('click');
        //var getDataOption = $('.product-primary-image').find('a').attr('data-options');
        $('body').find('.quantityinput').on('keydown', function (e) {
            if (e.keyCode == 13) {
                e.preventDefault();
            }
        });
        $('#Quantity').keyup(function (e) {
            var key = e.charCode || e.keyCode || e.which || 0;
            if ($.isNumeric($('#Quantity').val()) && key == 13) {
                $('#add-to-cart').trigger('click');
            } else if (!$.isNumeric($('#Quantity').val())) {
                $('.addtocartbutton:last').prop('disabled', true);
                $('.addtocart, .addtocartbutton').addClass('disabled');
                return false;
            } else {
                if ($(this).val() < 1) {
                    $('addtocartbutton:last').prop('disabled', true);
                    $('.addtocart').addClass('disabled');
                } else {
                    $('.addtocartbutton:last').prop('disabled', false);
                    $('.addtocart, .addtocartbutton').removeClass('disabled');
                }
            }
        });
        $(document).on('click', '.youtube-list-video a', function () {
            if ($(window).width() > 480 && $(window).width() < 959) {
                util.scrollBrowser($('.tab-sec').offset().top);
            } else if ($(window).width() < 481) {
                util.scrollBrowser($('.mobile-tabs-section .tabsHeader.videoTab').offset().top);
            }
        });
        $(document).on('click', '.video-link', function () {
            if ($(window).width() > 480) {
                util.scrollBrowser($('.tab-sec').offset().top);
                $('#tabs #videoTab').find('a[href="#pdpVideoTab"]').trigger('click');
            } else if ($(window).width() < 481) {
                util.scrollBrowser($('.mobile-tabs-section .tabsHeader.videoTab').offset().top);
                $('.tabsHeader.videoTab').parent('.mobile-tabs-section ').addClass('active');
                if ($('.videoTab').hasClass('loaded')) {
                    return false;
                }
                $('.videoTab').addClass('loaded');
                var target = $('#pdpVideoTab');
                var url = $('#productURL').val();
                ajax.load({
                    url: url,
                    dataType: 'html',
                    callback: function callback(data) {
                        target.html(data);
                    }
                });
            }
        });
        $('#add-to-cart').bind('click', function () {
            if ($('#Quantity').val() > 0) {
                $('.addedto-cartoverlay').addClass('added-overlay');
                setTimeout(function () {
                    $('.addedto-cartoverlay').removeClass('added-overlay');
                }, 2000);
            }
        });
        $('#QuickViewDialog .product-primary-image').find('.product-image').click(function () {
            return false;
        });
        if ($('.provideo-spec-link').length > 0) {
            if (!($('.video-link').length > 0)) {
                if ($(window).width() > 480) {
                    $('.productname.h-one-tag').css({
                        'width': 'auto',
                        'margin-bottom': '-26px',
                        'float': 'left',
                        'padding-bottom': '8px'
                    });
                }
            }
        } else {
            if ($(window).width() > 480) {
                $('.productname.h-one-tag').css({ 'padding-bottom': '4px' });
            }
        }
        $(document).on('click', '.specChart-link', function () {
            if ($(window).width() > 480) {
                util.scrollBrowser($('.tab-sec').offset().top);
                $('#tabs').find('a[href="#specChartTab"]').trigger('click');
            } else if ($(window).width() < 481) {
                util.scrollBrowser($('.mobile-tabs-section .tabsHeader.specTab').offset().top);
                $('.tabsHeader.specTab').parent('.mobile-tabs-section ').addClass('active');
            }
        });
        var pdpRecomendation = function pdpRecomendation() {
            var pdpRecomendationCarousel = $('.pt_product-details .jcarouselcont .recommendations').find('.pdprecomo-owl');
            pdpRecomendationCarousel.owlCarousel({
                nav: true,
                dots: true,
                navigation: false,
                navRewind: false,
                rewind: false,
                loop: false,
                items: 5,
                responsiveClass: true,
                responsive: {
                    0: {
                        items: 2,
                        slideBy: 2
                    },
                    767: {
                        items: 2,
                        slideBy: 2
                    },
                    768: {
                        items: 5,
                        slideBy: 5
                    }
                }
            });
            var viewport = jQuery(window).width();
            var itemCount = jQuery('.owl-carousel .item').length;
            if (viewport >= 959 && itemCount > 5 || //desktop
            viewport >= 481 && viewport < 600 && itemCount > 3 //tablet
            || viewport < 480 && itemCount > 2 //mobile
            ) {
                    $('.pdprecomo-owl').find('.owl-prev, .owl-next').show();
                    $('.pdprecomo-owl').find('.owl-dots').show();
                } else {
                $('.pdprecomo-owl').find('.owl-prev, .owl-next').hide();
                $('.pdprecomo-owl').find('.owl-dots').hide();
            }
            $('.product-listing').find('h2.hide').removeClass('hide');
            var height = $('.owl-item').height();
            $('.pdprecomo-owl').find('.owl-item').find('.product-tile.item').height(height - 100);
            $('.pt_product-details .product-tile .product-image').on('mouseenter', function () {
                var $qvButton = $('#quickviewbutton');
                if ($qvButton.length === 0) {
                    $qvButton = $('<a id="quickviewbutton" class="quickview">' + Resources.QUICK_VIEW + '<i class="fa fa-arrows-alt"></i></a>');
                }
                var $link = $(this).find('.thumb-link');
                $qvButton.attr({
                    'href': $link.attr('href'),
                    'title': $link.attr('title')
                }).appendTo(this);
                $qvButton.off('click').on('click', function (e) {
                    e.preventDefault();
                    var options = {
                        url: $(this).attr('href'), //PREV JIRA PREV-255 :PLP: On Click Quick view navigating to a wrong page when user first changes the swatches. Taking only href.
                        source: 'quickview'
                    };
                    quickviewShow(options);
                });
            });
        };
        setTimeout(pdpRecomendation, 5500);
    }
};

module.exports = pdpEvents;

},{"../../ajax":15,"../../dialog":23,"../../progress":52,"../../util":63,"./addToCart":42}],45:[function(require,module,exports){
'use strict';

var progress = require('../progress'),
    uievents = require('../uievents'),
    tooltip = require('../tooltip'),
    validator = require('../validator'),
    ajax = require('../ajax'),
    util = require('../util');

var rapalainsider = {
    init: function init() {
        tooltip.init();
        validator.init();
        uievents.init();
        if (jQuery('#dialogcontainer123').length == 0) {
            jQuery(document.body).append('<div id=\'dialogcontainer123\' class=\'vipinsider-container\'></div>');
        }
        jQuery.each(jQuery('form:not(.suppress)'), function () {
            jQuery(this).validate(validator.settings);
        });

        var $vipinsider = $('.vipinsider-container');
        //vipform = $('.VipinsiderForm');
        //var validatorinit = $(this).closest('form').validate();
        $('#PasswordReset123').click(function (e) {
            e.preventDefault();
            $vipinsider.load(Urls.vipInsider, function () {
                $vipinsider.dialog({
                    bgiframe: true,
                    autoOpen: false,
                    modal: true,
                    overlay: {
                        opacity: 0.5,
                        background: 'white'
                    },
                    width: 358,
                    dialogClass: 'vipInsider-dlg',
                    resizable: false,
                    open: function open() {
                        tooltip.init();
                        validator.init();
                        uievents.init();
                        rapalainsider.dialogEvents();
                        rapalainsider.formPrepare({
                            formSelector: '#VipinsiderForm',
                            continueSelector: '#VIPInsider-form-sbmt-id',
                            type: 'opacity'
                        });
                        rapalainsider.vipinsiderevents();
                        if ($(window).width() > 1200) {
                            rapalainsider.customselecteventsb();
                        }
                        rapalainsider.textarearapala();
                        rapalainsider.clearbuttonfunct();
                        $('.remove').click(function (e) {
                            e.preventDefault();
                            var filename = $(this).attr('data-file');
                            var form = $(this).closest('form');
                            var url = form.attr('action');
                            var finalURL = util.appendParamToURL(url, 'filename', filename);
                            ajax.load({
                                url: finalURL,
                                callback: function callback() {}
                            });
                        });
                    }
                });
                jQuery('#dialogcontainer123').dialog('open');
                $(window).scrollTop(0);
            });
        });
    },
    dialogEvents: function dialogEvents() {
        var $vipinsider = $('.vipinsider-container');
        //vipform = $('.VipinsiderForm');
        rapalainsider.clearbuttonfunct();
        $vipinsider.find('#VIPInsider-form-sbmt-id').on('click', function (e) {
            e.preventDefault();
            var prodid = $('.fieldstaff form .dyn-cat-select select').find(':selected').val();
            if ($('.trigger_singleupload').is(':visible') && prodid != 'donation') {
                if (!($('.vip-uploadform-holder .filelist').find('.updatetext').length != 0)) {
                    $('.vip-uploadform-holder').find('.empty-attachment-error').removeClass('hide');
                    if (!$(this).closest('form').valid()) {
                        return false;
                    }
                    return false;
                }
            }
            if (!$(this).closest('form').valid()) {
                return false;
            }
            $('.vip-uploadform-holder').find('.empty-attachment-error').addClass('hide');
            var vipURL = $(this).closest('form').attr('action');
            var vipData = $(this).closest('form').serialize();
            progress.show($('.fieldstaff form'));
            jQuery('#msgcontianer').remove();
            $('<div/>').attr('id', 'msgcontianer').html(' ').appendTo(document.body);
            ajax.load({
                url: vipURL,
                data: vipData,
                type: 'POST',
                callback: function callback(vipData) {
                    $('body').find('.vipInsider-dlg .ui-dialog-titlebar-close').trigger('click');
                    var present = $(vipData).find('.exiting_user').length,
                        width = present > 0 ? '316px' : '358px',
                        height = present > 0 ? 'auto' : '184',
                        dlgClass = present > 0 ? 'existinguserdlg' : 'newuserdlg';
                    $('#msgcontianer').find('.regcheck').remove();
                    jQuery('#msgcontianer').append(vipData);
                    jQuery('#msgcontianer').dialog({
                        bgiframe: true,
                        autoOpen: false,
                        modal: true,
                        overlay: {
                            opacity: 0.5,
                            background: 'white'
                        },
                        width: width,
                        height: height,
                        dialogClass: 'vipInsider-dlg ' + dlgClass,
                        resizable: false,
                        open: function open() {}
                    });
                    jQuery('#msgcontianer').dialog('open');
                    $('.vipInsider-dlg.ui-dialog.existinguserdlg button.close, .vipInsider-dlg.ui-dialog.newuserdlg button.close').on('click', function (e) {
                        e.preventDefault();
                        $(this).closest('.ui-dialog').find('.ui-dialog-titlebar-close').trigger('click');
                    });
                }
            });
        });
        $('.vipInsider-dlg.ui-dialog.existinguserdlg button.close, .vipInsider-dlg.ui-dialog.newuserdlg button.close').on('click', function (e) {
            e.preventDefault();
            $(this).closest('.ui-dialog').find('.ui-dialog-titlebar-close').trigger('click');
        });
        $vipinsider.find('.trigger_singleupload input[type="file"]').on('click', function () {
            if ($(this).closest('.vip-uploadform-holder').find('.empty-attachment-error').is(':visible')) {
                $(this).closest('.vip-uploadform-holder').find('.empty-attachment-error').addClass('hide');
            }
        });
        //VIP insider dropdown change
        $('.fieldstaff form').find('.dyn-cat-select select').off('change').on('change', function (e) {
            e.preventDefault();
            var $curObj = $(this);
            var prodid = '';
            if ($(this).closest('.dyn-cat-select').find('.sbHolder').length > 0) {
                var selectedText = $(this).closest('.dyn-cat-select').find('.sbSelector').text();
                prodid = $(this).find('option[label="' + selectedText + '"]').attr('value');
            } else {
                prodid = $(this).find(':selected').val();
            }
            //alert($(this).find(':selected').val());
            var url = Urls.vipInsiderDynamicForms;

            if (prodid == 'field' || prodid == 'sports' || prodid == 'industry' || prodid == 'donation') {
                if (prodid == 'sports') {
                    $('.vip-uploadform-holder').find('span.text-holder-upload').replaceWith('<span class="text-holder-upload">*Upload Business Card or Pay Stub</span>');
                    $('.vip-uploadform-holder').find('.trigger_singleupload .empty-attachment-error').text('Please upload Business card or Pay Stub');
                }
                if (prodid == 'field') {
                    $('.vip-uploadform-holder').find('span.text-holder-upload').replaceWith('<span class="text-holder-upload">*Attach Resume</span>');
                    $('.vip-uploadform-holder').find('.trigger_singleupload .empty-attachment-error').text('Please upload your Resume');
                }
                if (prodid == 'industry') {
                    $('.vip-uploadform-holder').find('span.text-holder-upload').replaceWith('<span class="text-holder-upload">*Upload Business Card</span>');
                    $('.vip-uploadform-holder').find('.trigger_singleupload .empty-attachment-error').text('Please upload a Business Card');
                }
                if (prodid == 'donation') {
                    $('.vip-uploadform-holder').find('span.text-holder-upload').replaceWith('<span class="text-holder-upload">Upload Flyer</span>');
                    //$('.vip-uploadform-holder').find('.trigger_singleupload .empty-attachment-error').text('Please upload a Flyer');
                    //$('.vip-uploadform-holder').find('span.text-holder-upload').closest('form').removeClass('trigger_singleupload');
                }
                $('.vip-uploadform-holder').removeClass('hide');
            } else {
                $('.vip-uploadform-holder').addClass('hide');
            }

            if (prodid != undefined && prodid != null && prodid.length > 0) {
                url = url + '?prodid=' + prodid;
            } else {
                return false;
            }

            progress.show($('.fieldstaff form'));
            ajax.load({
                url: url,
                callback: function callback(data) {
                    if ($('.fieldstaff form .dynamic-content-holder-vip') != undefined && $('.fieldstaff form .dynamic-content-holder-vip').length > 0 && $(data).filter('.vipinsider-onload-data-holder') != undefined && $(data).filter('.vipinsider-onload-data-holder').length > 0) {
                        $('.fieldstaff form .dynamic-content-holder-vip').html($(data).filter('.vipinsider-onload-data-holder').html());
                        $('.trigger_singleupload .pro_id').val(prodid);
                        var dateObj = new Date();
                        dateObj.setTime(dateObj.getTime() + 60 * 60 * 1000);
                        document.cookie = 'progcookie=' + prodid + '; expires=' + dateObj.toUTCString() + '; path=/';
                        progress.hide();
                        if ($(window).width() > 1200) {
                            rapalainsider.customselecteventsb();
                        }
                        rapalainsider.textarearapala();
                        rapalainsider.clearbuttonfunct();
                        rapalainsider.formPrepare({
                            formSelector: '#VipinsiderForm',
                            continueSelector: '#VIPInsider-form-sbmt-id',
                            type: 'opacity'
                        });
                        if ($curObj.closest('.dyn-cat-select').find('.sbHolder').length > 0) {
                            var selectedText = $curObj.closest('.dyn-cat-select').find('.sbSelector').text();
                            prodid = $curObj.find('option[label="' + selectedText + '"]').attr('value');
                        } else {
                            prodid = $curObj.find(':selected').val();
                        }
                        if (prodid != 'Select A Program') {
                            $('.dyn-cat-select').find('.label').removeClass('erroroccured');
                            $('.dyn-cat-select').find('.label span.errorclient.inputlabel').remove();
                            $('.dyn-cat-select').find('.label span').removeClass('inputlabel');
                            $('.dyn-cat-select').find('select').removeClass('errorclient').addClass('valid');
                        }
                        if ($('.filelist').find('ul').length > 0) {
                            $('.filelist').find('ul').css({ 'display': 'none' });
                        }
                    }
                }
            });
        });
    },
    // sub namespace app.ajax.* contains application specific ajax
    // components
    ajax: {
        Success: 'success',
        currentRequests: {}, // request cache

        // ajax request to get json response
        // @param - reqName - String - name of the request
        // @param - async - boolean - asynchronous or not
        // @param - url - String - uri for the request
        // @param - data - name/value pair data request
        // @param - callback - function - callback function to be called
        getJson: function getJson(options) {
            var thisAjax = this;

            // do not bother if the request is already in progress
            // and let go null reqName
            if (!options.reqName || !this.currentRequests[options.reqName]) {
                this.currentRequests[options.reqName] = true;
                if (options.async == 'undefined') {
                    options.async = true;
                }
                // make the server call
                jQuery.ajax({
                    contentType: 'application/json; charset=utf-8',
                    dataType: 'json',
                    url: options.url,
                    cache: true,
                    async: options.async,
                    data: options.data,

                    success: function success(response, textStatus) {
                        thisAjax.currentRequests[options.reqName] = false;

                        if (!response.Success) {
                            // handle failure
                        }

                        options.callback(response, textStatus);
                    },

                    error: function error(request, textStatus) {
                        if (textStatus === 'parsererror') {
                            alert(Resources.BAD_RESPONSE);
                        }

                        options.callback({
                            Success: false,
                            data: {}
                        });
                    }
                });
            }
        },

        // ajax request to load html response in a given container
        // @param - reqName - String - name of the request
        // @param - url - String - uri for the request
        // @param - data - name/value pair data request
        // @param - callback - function - callback function to be called
        // @param - selector - string - id of the container div/span
        // (#mycontainer) - it must start with '#'
        load: function load(options) {

            var thisAjax = this;

            // do not bother if the request is already in progress
            // and let go null reqname
            if (!options.reqName || !this.currentRequests[options.reqName]) {
                this.currentRequests[options.reqName] = true;
                // make the server call
                jQuery.ajax({
                    dataType: 'html',
                    url: options.url,
                    cache: true,
                    data: options.data,

                    success: function success(response, textStatus) {
                        thisAjax.currentRequests[options.reqName] = false;

                        if (options.selector) {
                            jQuery(options.selector).html(response);
                        }

                        if (options.callback != undefined) {
                            options.callback(response, textStatus);
                        }
                    },

                    error: function error(request, textStatus) {
                        if (textStatus === 'parsererror') {
                            alert(Resources.BAD_RESPONSE);
                        }

                        options.callback(null, textStatus);
                    }
                });
            }
        }
    },

    vipinsiderevents: function vipinsiderevents() {
        var $vipinsider = $('.vipinsider-container');
        //vipform = $('.VipinsiderForm');
        $vipinsider.find('.trigger_singleupload input[type="file"]').unbind('change').change(function () {

            var xhr = new XMLHttpRequest(),
                data = new FormData(),
                files = $('#fileid').get(0).files,
                form = $(this).closest('form');
            //if($(this).hasClass('errorclient')){ $(this).trigger('blur'); }
            var totalsize = 0;
            totalsize = $('.vip-uploadform-holder .remove_singleupload span.updatetext').eq(0).attr('value');

            if (this.files[0].size / 1024 / 1024 > 2 || totalsize > 2) {
                $vipinsider.find('.vip-uploadform-holder .file-size-exceed-error').removeClass('hide');
                return false;
            }

            var extension = this.files[0].name.split('.')[1].toLowerCase();
            if (extension != 'jpg' && extension != 'png' && extension != 'PNG' && extension != 'jpeg' && extension != 'pdf' && extension != 'gif' && extension != 'doc' && extension != 'docx' && extension != 'pages') {
                $vipinsider.find('.vip-uploadform-holder .file-format-exceed-error').removeClass('hide');
                return false;
            }

            $vipinsider.find('.vip-uploadform-holder .file-format-exceed-error').addClass('hide');
            $vipinsider.find('.vip-uploadform-holder .file-size-exceed-error').addClass('hide');
            form.find('.progressbar').fadeIn(500);

            for (var i = 0; i < files.length; i++) {
                data.append(files[i].name, files[i]);
            }
            xhr.upload.addEventListener('progress', function (evt) {
                if (evt.lengthComputable) {
                    var progress = Math.round(evt.loaded * 100 / evt.total);
                    form.find('.progressbar .count').text(progress + '% Complete');
                    form.find('.progressbar .progressload').width(progress + '%');
                }
            }, false);
            xhr.open('POST', form.attr('action'));
            xhr.send(data);

            xhr.upload.addEventListener('loadend', function () {
                form.find('#fileid').val('');
                setTimeout(function () {
                    form.find('.progressbar').fadeOut(100, function () {
                        form.find('.progressbar .count').text('0%');
                        form.find('.progressbar .progressload').width('0');
                    });
                }, 500);
            });

            xhr.onload = function () {
                $('.vip-uploadform-holder .filelist').html(xhr.responseText);
                rapalainsider.vipinsiderevents();
            };
        });

        if ($(window).width() <= 767) {
            $('.insider_body.rapala_device [maxlength]').bind('keypress keyup', function () {
                var $this = $(this);
                var val = $this.val();
                var valLength = val.length;
                var maxCount = $this.attr('maxlength');
                if (valLength > maxCount) {
                    $this.val($this.val().substring(0, maxCount));
                }
            });
        }

        $vipinsider.find('.remove').unbind('click').click(function (e) {
            e.preventDefault();
            var filename = $(this).attr('data-file');
            var form = $(this).closest('form');
            var url = form.attr('action');
            var finalURL = util.appendParamToURL(url, 'filename', filename);
            ajax.load({
                url: finalURL,
                type: 'POST',
                callback: function callback(data) {
                    $('.vip-uploadform-holder .filelist').html(data);
                    rapalainsider.vipinsiderevents();
                }
            });
        });
    },

    formPrepare: function formPrepare(opts) {

        var $form, $continue, $requiredInputs, validator;

        var hasEmptyRequired = function hasEmptyRequired() {
            // filter out only the visible fields
            var requiredValues = $requiredInputs.filter(':visible').map(function () {
                return $(this).val();
            });
            return $.inArray('', requiredValues) != -1;
        };

        var validateForm = function validateForm() {
            // only validate form when all required fields are filled to avoid
            // throwing errors on empty form
            if (!hasEmptyRequired() && validator.form()) {
                $continue.removeAttr('disabled').removeClass('button_invisible');
            } else {
                if (opts.type == 'disable') {
                    $continue.attr('disabled', 'disabled');
                } else {
                    $continue.addClass('button_invisible');
                }
            }
        };

        var validateEl = function validateEl() {
            if ($(this).val() === '') {
                if (opts.type == 'disable') {
                    $continue.attr('disabled', 'disabled');
                } else {
                    $continue.addClass('button_invisible');
                }
            } else {
                // enable continue button on last required field that is valid
                // only validate single field
                if (validator.element(this) && !hasEmptyRequired()) {
                    $continue.removeAttr('disabled').removeClass('button_invisible');
                } else {
                    if (opts.type == 'disable') {
                        $continue.attr('disabled', 'disabled');
                    } else {
                        $continue.addClass('button_invisible');
                    }
                }
            }
        };
        //type optional value disable or opacity
        $form = $(opts.formSelector);
        $continue = $(opts.continueSelector);
        validator = $form.validate();
        $requiredInputs = $('.required', $form).filter(':input');
        validateForm();
        // start listening
        $requiredInputs.change(validateEl);
        $requiredInputs.filter('input').blur(validateEl);
    },

    customselecteventsb: function customselecteventsb() {
        if (!$('body').hasClass('rapala_device')) {
            var $con = $('body');
            $con.find('.customized-select').find('select').each(function () {
                if ($(this).attr('disabled')) {
                    $(this).selectbox('disable');
                } else {
                    $(this).selectbox();
                }
                $('.sbOptions li:last').addClass('last');
            }).focus(function () {
                $(this).next('.sbHolder').trigger('focus');
            });
        }
    },

    textarearapala: function textarearapala() {
        $('textarea[maxlength]').each(function () {
            charcount($(this));
            // trigger the keydown event so that any existing character data is calculated
        }).on('keyup keypress', function () {
            charcount($(this));
        });

        function charcount($this) {
            var characterLimit = '1200';
            var charRemains = characterLimit - $this.val().trim().length;
            //var charCountContainer = '';
            var charCountHtml = 'Characters Remaining ' + charRemains;
            if ($this.hasClass('vip-textarea')) {
                if ($this.next('div.char-count').length === 0) {
                    $('<div class="char-count"/>').insertAfter($this);
                }
                $this.next('div.char-count').html(charCountHtml);
            } else {
                if ($this.prev('div.char-count').length === 0) {
                    $('<div class="char-count"/>').insertBefore($this);
                }
                $this.prev('div.char-count').html(charCountHtml);
            }
        }
    },

    clearbuttonfunct: function clearbuttonfunct() {
        if ($('#dialogcontainer123').length > 0) {
            $('#dialogcontainer123').find('.formfield').each(function () {
                if ($(this).find('.field-wrapper .clearbutton').length == 0 && $(this).find('.field-wrapper input[type="text"]').length > 0 || $(this).find('.field-wrapper input[type="password"]').length > 0 || $(this).find('.field-wrapper textarea').length > 0) {
                    $(this).find('.field-wrapper').append('<a class="clearbutton"></a>');
                }
            });
        }
        $('body').find('#dialogcontainer123 .field-wrapper input, textarea').on('keyup input blur', function () {
            if ($(this).val() != undefined) {
                if ($(this).val().length > 0) {
                    $(this).closest('.formfield').find('a.clearbutton').show();
                } else {
                    $(this).closest('.formfield').find('a.clearbutton').hide();
                }
            }
        });

        $('body').find('#dialogcontainer123 .field-wrapper a.clearbutton').on('click', function () {
            var characterLimit = 'Characters Remaining 1200';
            $(this).closest('.formfield').find('input').val('');
            $(this).closest('.formfield').find('textarea').val('');
            $(this).closest('.field-wrapper').find('span').remove();
            $(this).closest('.field-wrapper').find('.required').removeClass('errorclient');
            $(this).closest('.formfield').find('a.clearbutton').hide();
            $(this).closest('.formfield ').find('.form-row').removeClass('inputlabel');
            $(this).closest('.formfield').find('.form-row , .label span').removeClass('inputlabel');
            $(this).closest('.formfield').find('span.logerror , .existing_register').hide();
            $('div.char-count').html(characterLimit);
        });
    }

};
module.exports = rapalainsider;

},{"../ajax":15,"../progress":52,"../tooltip":61,"../uievents":62,"../util":63,"../validator":64}],46:[function(require,module,exports){
'use strict';

var addProductToCart = require('./product/addToCart'),
    ajax = require('../ajax'),
    quickview = require('../quickview'),
    account = require('./account'),
    util = require('../util');

/**
 * @function
 * @description Loads address details to a given address and fills the address form
 * @param {String} addressID The ID of the address to which data will be loaded
 */
function populateForm(addressID, $form) {
    // load address details
    var url = Urls.giftRegAdd + addressID;
    ajax.getJson({
        url: url,
        callback: function callback(data) {
            if (!data || !data.address) {
                window.alert(Resources.REG_ADDR_ERROR);
                return false;
            }
            // fill the form
            $form.find('[name$="_addressid"]').val(data.address.ID);
            $form.find('[name$="_firstname"]').val(data.address.firstName);
            $form.find('[name$="_lastname"]').val(data.address.lastName);
            $form.find('[name$="_address1"]').val(data.address.address1);
            $form.find('[name$="_address2"]').val(data.address.address2);
            $form.find('[name$="_city"]').val(data.address.city);
            $form.find('[name$="_country"]').val(data.address.countryCode).trigger('change');
            $form.find('[name$="_postal"]').val(data.address.postalCode);
            $form.find('[name$="_state"]').val(data.address.stateCode);
            $form.find('[name$="_phone"]').val(data.address.phone);
            // $form.parent('form').validate().form();
        }
    });
}

/**
 * @private
 * @function
 * @description Initializes events for the gift registration
 */
function initializeEvents() {
    var $eventAddressForm = $('form[name$="_giftregistry"]'),
        $beforeAddress = $eventAddressForm.find('fieldset[name="address-before"]'),
        $afterAddress = $eventAddressForm.find('fieldset[name="address-after"]');

    $('.usepreevent').on('click', function () {
        // filter out storefront toolkit
        $(':input', $beforeAddress).not('[id^="ext"]').not('select[name$="_addressBeforeList"]').each(function () {
            var fieldName = $(this).attr('name'),
                $afterField = $afterAddress.find('[name="' + fieldName.replace('Before', 'After') + '"]');
            $afterField.val($(this).val()).trigger('change');
        });
    });

    $eventAddressForm.on('change', 'select[name$="_addressBeforeList"]', function () {
        var addressID = $(this).val();
        if (addressID.length === 0) {
            return;
        }
        populateForm(addressID, $beforeAddress);
    }).on('change', 'select[name$="_addressAfterList"]', function () {
        var addressID = $(this).val();
        if (addressID.length === 0) {
            return;
        }
        populateForm(addressID, $afterAddress);
    });

    $('form[name$="_giftregistry_items"]').on('click', '.item-details a', function (e) {
        e.preventDefault();
        var productListID = $('input[name=productListID]').val();
        quickview.show({
            url: e.target.href,
            source: 'giftregistry',
            productlistid: productListID
        });
    });
}

exports.init = function () {
    initializeEvents();
    addProductToCart();
    //Start JIRA PREV-333 : On click of Forgot Password link navigates to the page instead of overlay.
    account.initCartLogin();
    util.setDeleteConfirmation('.item-list', String.format(Resources.CONFIRM_DELETE, Resources.TITLE_GIFTREGISTRY));
};

},{"../ajax":15,"../quickview":54,"../util":63,"./account":31,"./product/addToCart":42}],47:[function(require,module,exports){
'use strict';

var compareWidget = require('../compare-widget'),
    productTile = require('../product-tile'),
    progress = require('../progress'),
    uievents = require('../uievents'),

//imagesLoaded = require('imagesloaded'),
util = require('../util');

function infiniteScroll() {
    // getting the hidden div, which is the placeholder for the next page
    var loadingPlaceHolder = $('.infinite-scroll-placeholder[data-loading-state="unloaded"]');
    // get url hidden in DOM
    var gridUrl = loadingPlaceHolder.attr('data-grid-url');
    if (loadingPlaceHolder.length === 1 && util.elementInViewport(loadingPlaceHolder.get(0), 250)) {
        // switch state to 'loading'
        // - switches state, so the above selector is only matching once
        // - shows loading indicator
        loadingPlaceHolder.attr('data-loading-state', 'loading');
        loadingPlaceHolder.addClass('infinite-scroll-loading');

        // named wrapper function, which can either be called, if cache is hit, or ajax repsonse is received
        var fillEndlessScrollChunk = function fillEndlessScrollChunk(html) {
            loadingPlaceHolder.removeClass('infinite-scroll-loading');
            loadingPlaceHolder.attr('data-loading-state', 'loaded');
            $('div.search-result-content').append(html);
        };

        // old condition for caching was `'sessionStorage' in window && sessionStorage["scroll-cache_" + gridUrl]`
        // it was removed to temporarily address RAP-2649

        $.ajax({
            type: 'GET',
            dataType: 'html',
            url: gridUrl,
            success: function success(response) {
                // put response into cache
                try {
                    sessionStorage['scroll-cache_' + gridUrl] = response;
                } catch (e) {}
                // nothing to catch in case of out of memory of session storage
                // it will fall back to load via ajax

                // update UI
                fillEndlessScrollChunk(response);
                productTile.init();
            }
        });
    }
}

/**
 * @private
 * @function
 * @description replaces breadcrumbs, lefthand nav and product listing with ajax and puts a loading indicator over the product listing
 */
function updateProductListing(url) {
    if (url == null) {
        return;
    }
    $('#main').addClass('hidecontent');
    progress.show('#main');
    $('#main').load(util.appendParamToURL(url, 'format', 'ajax'), function () {
        searchRefinment.searchRefinementToggle();
        uievents.init();
        compareWidget.init();
        productTile.init();
        owlcarousel();
        /* $('.scrollable').each(function(){
             $(this).slimScroll({
                 size: '10px',
                 height: '200px',
                 railVisible: true,
                 alwaysVisible: true
             });
           });*/

        progress.hide();
        $('#main').removeClass('hidecontent');
        history.pushState(undefined, '', url);
        $('html, body').animate({ scrollTop: 0 }, 'fast');
        if ($('.pt_product-search-result .search-blk').length > 0) {
            $('.pt_product-search-result').find('#primary').addClass('search-result');
        }
        if ($('.refine-display.refine-values .breadcrumb-refinement').length > 0) {
            $('.pt_product-search-result.searchresult').find('#primary').addClass('search-result');
            $('.pt_product-search-result.categorylanding').find('#primary').addClass('search-result');
        } else {
            $('.pt_product-search-result.searchresult').find('#primary').addClass('search-result');
            $('.pt_product-search-result.categorylanding').find('#primary').removeClass('search-result');
        }
        gridSyncheight();
        $('#secondary').removeClass('visible-hidden').addClass('secondary-hide');
    });
}

// updates the grid using the 'post hash' refinement values
function gridSyncheight() {
    $('.tiles-container .product-tile').syncHeight();
}

function owlcarousel() {
    setTimeout(function () {
        var owl = $('.owl-carousel');
        owl.owlCarousel({
            items: 5,
            slideBy: 5,
            rewind: false,
            nav: true,
            navRewind: false,
            loop: false,
            dots: true,
            responsive: {
                0: {
                    items: 2,
                    slideBy: 2
                },
                767: {
                    items: 2,
                    slideBy: 2
                },
                768: {
                    items: 5,
                    slideBy: 5
                }
            }
        });

        var viewport = jQuery(window).width();
        //var current = $(this);
        var itemCount = $('.recommendations.cross-sell.Recommended.For.You .owl-carousel .owl-item').length;
        if (viewport >= 768 && itemCount > 5 || viewport < 768 && itemCount > 2) {
            $('.recommendations.cross-sell.Recommended.For.You .pdprecomo-owl').find('.owl-prev, .owl-next').show();
            $('.recommendations.cross-sell.Recommended.For.You .pdprecomo-owl').find('.owl-dots').show();
        } else {
            $('.recommendations.cross-sell.Recommended.For.You .pdprecomo-owl').find('.owl-prev, .owl-next').hide();
            $('.recommendations.cross-sell.Recommended.For.You .pdprecomo-owl').find('.owl-dots').hide();
        }

        //var viewportone = jQuery(window).width();
        //var currentone = $(this);
        var itemCountone = $('.recommendations.cross-sell.Recently.Viewed .owl-carousel .owl-item').length;

        if (viewport >= 768 && itemCountone > 5 || viewport < 768 && itemCountone > 2) {
            $('.recommendations.cross-sell.Recently.Viewed .pdprecomo-owl').find('.owl-prev, .owl-next').show();
            $('.recommendations.cross-sell.Recently.Viewed .pdprecomo-owl').find('.owl-dots').show();
        } else {
            $('.recommendations.cross-sell.Recently.Viewed .pdprecomo-owl').find('.owl-prev, .owl-next').hide();
            $('.recommendations.cross-sell.Recently.Viewed .pdprecomo-owl').find('.owl-dots').hide();
        }
        $('.product-listing').find('h2.hide').removeClass('hide');

        productTile.init();
        $('.pt_product-search-result .recommendations.cross-sell .search-result-items .product-tile.item').last().addClass('recomlast');
    }, 5500);
}

var searchRefinment = {
    searchRefinementToggle: function searchRefinementToggle() {
        //$("#secondary").removeAttr("style");
        $('.js-scrollbar').each(function ($i) {
            //var curObj = $(this);
            //var thresholdValue = $(curObj).closest('.refinement').find('.device-refine').val();
            if ($('.rapala_device').length == 0) {
                if ($(this).closest('.navgroup').hasClass('refinement')) {
                    if ($(this).find('li').length > 8) {
                        $(this).addClass('js-scrollbar-height');
                        $(this).find('.overview').slimScroll({
                            railVisible: true,
                            height: '200px',
                            size: '10px',
                            railColor: 'transparent',
                            color: '#a0a0a0',
                            alwaysVisible: true
                        });
                        //$(this).tinyscrollbar({trackSize : 200});
                    } else {
                        $(this).find('.overview').css('position', 'static');
                    }
                } else {
                    //$(this).tinyscrollbar({trackSize : 200});
                    $(this).find('.overview').slimScroll({
                        railVisible: true,
                        height: '200px',
                        size: '10px',
                        railColor: 'transparent',
                        color: '#a0a0a0',
                        alwaysVisible: true
                    });
                }
            } else {
                /*if($(this).find('li').length > thresholdValue && $(this).find('.seeMoreRefinements').length == 0){
                    if($(this).find('.seeNextRefinements').length == 0 && $(this).find('.seePrevRefinements').length == 0){
                        $(this).append('<a href="#" class="seeNextRefinements">See Next</a>');
                        $(this).append('<a href="#" class="seePrevRefinements">See Previous</a>');
                    }
                    thresholdValue -= 1;
                    $(this).find('li').eq(thresholdValue).nextAll('li').hide();
                    $('.seePrevRefinements').hide();
                }
                else{
                    $(this).find('li').show();
                    $(this).find('.seeNextRefinements').hide();
                }*/
            }

            if ($i == $('.js-scrollbar').length - 1) {
                $('#searchrefinements div.navgroup').each(function (i) {
                    if ($(window).width() < 960) {
                        if ($(this).find('li.selected').length == 0) {
                            $(this).find('div.refineattributes').hide();
                            $(this).find('.filter').addClass('expand');
                            $(this).addClass('collapse-expand');
                        }
                    } else {
                        if (i > 2 && $(this).find('li.selected').length == 0) {
                            $(this).find('div.refineattributes').hide();
                            $(this).find('.filter').addClass('expand');
                            $(this).addClass('collapse-expand');
                        } else if (i < 3) {
                            $(this).find('div.refineattributes').show();
                            $(this).find('.filter').removeClass('expand');
                            $(this).removeClass('collapse-expand');
                        }
                    }
                });
            }
        });

        // init refinement toggling
        $('#searchrefinements .filter').off('click').on('click', function (e) {
            e.preventDefault();
            jQuery(this).toggleClass('expand');
            $(this).closest('.navgroup').toggleClass('collapse-expand');
            jQuery(this).closest('.navgroup').find('div.refineattributes').toggle();
            //jQuery(this).closest('.navgroup').find(".js-scrollbar").tinyscrollbar({trackSize : 200});
        });

        $(window).load(function () {
            $('#secondary').removeClass('visible-hidden').addClass('secondary-hide');
        });
        if ($(window).width() > 959) {
            $('.mobile-filter-by').removeClass('js-filter-active');
            $('#secondary').removeClass('.visible-hidden').removeAttr('style');
        }
    }
};

/**
 * @private
 * @function
 * @description Initializes events for the following elements:<br/>
 * <p>refinement blocks</p>
 * <p>updating grid: refinements, pagination, breadcrumb</p>
 * <p>item click</p>
 * <p>sorting changes</p>
 */
function initializeEvents() {
    owlcarousel();
    gridSyncheight();
    productTile.init();
    var $main = $('#main');
    // compare checked
    $main.on('click', 'input[type="checkbox"].compare-check', function () {
        var cb = $(this);
        var tile = cb.closest('.product-tile');

        var func = this.checked ? compareWidget.addProduct : compareWidget.removeProduct;
        var itemImg = tile.find('.product-image a img').first();
        func({
            itemid: tile.data('itemid'),
            uuid: tile[0].id,
            img: itemImg,
            cb: cb
        });
    });

    if ($('.contentAsset-new').find('.html-slot-container').length > 0) {
        var current = $('.contentAsset-new').find('.html-slot-container');
        current.parents('.desktop').removeClass('promohide').addClass('promoshow');
    } else {
        $('.desktop').removeClass('promoshow').addClass('promohide');
    }

    $main.on('click', '.mobile-filter-by', function () {
        if (!$('.mobile-filter-by').hasClass('js-filter-active')) {
            $('.mobile-filter-by').addClass('js-filter-active');
            $('#secondary').show();
            //$("#secondary").css("top",secondaryTop+"px");
        } else {
            $('.mobile-filter-by').removeClass('js-filter-active');
            $('#secondary').hide();
            //$("#secondary").css("top",secondaryTop+"px");
        }
    });
    $('#tabs a').click(function (e) {
        e.preventDefault();
        $(this).prev('input[type="radio"]').prop('checked', true);
        var href = $(this).attr('href');
        window.location = href;
    });

    $main.on('click', '#tabs input[type="radio"]', function () {
        var checked = $(this).prop('checked', true);
        if (checked) {
            $(this).prop('checked', false);
        } else {
            $(this).prop('checked', true);
        }
        $(this).next('a').trigger('click');
        $(this).prop('checked', true);
    });

    //searchcontent-section
    $main.on('click', '.mobile-filter-by.results-content', function () {
        if (!$('.mobile-filter-by.results-content').hasClass('js-filter-active')) {
            $('.mobile-filter-by.results-content').addClass('js-filter-active');
            $('#secondary.searchResult-refinement').show();
            //$("#secondary").css("top",secondaryTop+"px");
        } else {
            $('.mobile-filter-by.results-content').removeClass('js-filter-active');
            $('#secondary.searchResult-refinement').hide();
            //$("#secondary").css("top",secondaryTop+"px");
        }
    });

    if ($('.pt_product-search-result .search-blk').length > 0) {
        $('.pt_product-search-result').find('#primary').addClass('search-result');
    }

    if ($('.pt_content-search-result .folder-content-list').length > 0) {
        $('.pt_content-search-result').find('#tabs #producttab').prop('checked', false);
        $('.pt_content-search-result').find('#tabs #contenttab').prop('checked', true);
    }

    $main.on('click', '.sortby-button', function () {
        if ($(window).width() >= 481 && $(window).width() <= 959) {
            if (!$('.sortby-button').hasClass('js-sort-active')) {
                $('.sortby-button').addClass('js-sort-active');
                $('.search-result-options').addClass('show-sort');
                $('.mobile-sort-by-content').show();
            } else {
                $('.sortby-button').removeClass('js-sort-active');
                $('.search-result-options').removeClass('show-sort');
                $('.mobile-sort-by-content').hide();
            }
        }
    });

    searchRefinment.searchRefinementToggle();

    /*$(window).resize(function(){
    searchRefinment.searchRefinementToggle();
    });*/

    /* $('.scrollable').each(function(){
    	$(this).slimScroll({
            size: '10px',
            height: '200px',
            railVisible: true,
            alwaysVisible: true
        });
      });*/
    // handle toggle refinement blocks
    /* $main.on('click', '.refinement h3', function () {
          if( !$(this).hasClass('expand') ){
              $(this).addClass('expand').closest('.navgroup').addClass('collapse-expand').find('.sub-refinement').hide();
            }else {
              $(this).removeClass('expand').closest('.navgroup').removeClass('collapse-expand').find('.sub-refinement').show();
          }
     });*/

    // color swatches events //
    $main.on('click', '.product-swatches .product-swatches-all', function () {
        if ($(this).hasClass('loaded')) {
            $(this).next('.swatch-list.swatch-toggle').show();
            return false;
        }
        $(this).addClass('loaded');
        var cont = $(this).parent().find('ul.swatch-list.swatch-toggle');
        cont.show().focus();
        $(this).parent().find('ul.swatch-toggle li > a').each(function () {
            if ($(this).data('href')) {
                $(this).find('img').attr('src', $(this).data('href'));
            }
        });
        cont.show().focus();
    });
    // prepare swatch palettes and thumbnails
    // show the palette

    // hide the palette
    $('#content div.product-swatches div.swatch-image').mouseout(function (e) {
        // fix for event bubbling (http://www.quirksmode.org/js/events_mouse.html)
        if (!e) {
            e = window.event;
        }
        var tg = window.event ? e.srcElement : e.target;
        if (tg.nodeName != 'DIV') {
            return;
        }
        var reltg = e.relatedTarget ? e.relatedTarget : e.toElement;
        while (reltg != tg && reltg.nodeName != 'BODY') {
            reltg = reltg.parentNode;
        }
        if (reltg == tg) {
            return;
        }

        // mouseout took place when mouse actually left layer
        // handle event now
        $(this).hide();
        return false;
    });

    $('.swatch-list.swatch-toggle').mouseleave(function () {
        $('.swatch-list.swatch-toggle').hide();
    });

    jQuery('#content .producttile div.swatches div.invisible').hide();
    jQuery('#content .producttile div.swatches a.swatch img.hiddenthumbnail').hide();

    $('#content.product-swatches .product-swatches-all.loaded').click(function () {
        //var swatch = jQuery(this);
        updateProductListing(this.href);
        // omit following the swatch link
        return false;
    });

    $('body').mouseleave(function () {
        if ($(window).width() > 960) {
            $('.swatch-list.swatch-toggle').hide();
        }
    });
    $('body').bind('blur', function () {
        $('.swatch-list.swatch-toggle').hide();
    });

    // handle events for updating grid
    $main.on('click', '.refinement a, .sorthitscontainer .pagination a, .breadcrumb-refinement-value a, .mobile-sort-by-content a', function (e) {
        // don't intercept for category and folder refinements, as well as unselectable
        if ($(this).parents('.category-refinement').length > 0 || $(this).parents('.folder-refinement').length > 0 || $(this).parent().hasClass('unselectable')) {
            return;
        }
        e.preventDefault();
        var query = util.getQueryString(this.href);
        window.location.hash = query;
        if (this.href === window.location.href) {
            return;
        }
        updateProductListing(this.href);
    });

    $('.productlisting.sub-cat').each(function () {
        $(this).find('.product.producttile.cell').first().addClass('subfirst');
    });

    // handle events item click. append params.
    $main.on('click', '.product-tile a:not("#quickviewbutton")', function () {
        var a = $(this);
        // get current page refinement values
        var wl = window.location;

        var qsParams = wl.search.length > 1 ? util.getQueryStringParams(wl.search.substr(1)) : {};
        var hashParams = wl.hash.length > 1 ? util.getQueryStringParams(wl.hash.substr(1)) : {};

        // merge hash params with querystring params
        var params = $.extend(hashParams, qsParams);
        if (!params.start) {
            params.start = 0;
        }
        // get the index of the selected item and save as start parameter
        var tile = a.closest('.product-tile');
        var idx = tile.data('idx') ? +tile.data('idx') : 0;

        /*Start JIRA PREV-50 : Next and Previous links will not be displayed on PDP if user navigate from Quick View.Added cgid to hash*/
        if (!params.cgid && tile.data('cgid') !== null && tile.data('cgid') !== '') {
            params.cgid = tile.data('cgid');
        }
        /*End JIRA PREV-50*/

        // convert params.start to integer and add index
        params.start = +params.start + (idx + 1);
        // set the hash and allow normal action to continue
        a[0].hash = $.param(params);
    });

    // handle sorting change
    $main.on('change', '.sort-by select', function (e) {
        var selectedOption = $('.sort-by option:selected').val().split('?')[1].split('&');
        //var url = $(this).val();
        var selectedOptionval = '';
        $.each(selectedOption, function (i, v) {
            if (v.indexOf('srule') != -1) {
                selectedOptionval = v.split('=')[1];
            }
        });

        if (selectedOptionval.length != 0) {
            var dateObj = new Date();
            dateObj.setTime(dateObj.getTime() + 60 * 60 * 1000);
            document.cookie = 'selectedOption=' + selectedOptionval + '; expires=' + dateObj.toUTCString() + '; path=/';
            /*
            var sortRule = url.split('?')[1].split('&');
            var sortType = '';
              $.each(sortRule, function (i, v) {
                if (v.indexOf('srule') != -1) {
                    sortType = v.split('=')[1];
                }
            });
            */
        }
        e.preventDefault();
        var query = util.getQueryString($(this).find('option:selected').val());
        window.location.hash = query;
        if ($(this).find('option:selected').val() === window.location.href) {
            return;
        }
        updateProductListing($(this).find('option:selected').val());
    }).on('change', '.items-per-page select', function () {
        var refineUrl = $(this).find('option:selected').val();
        if (refineUrl === 'INFINITE_SCROLL') {
            $('html').addClass('infinite-scroll').removeClass('disable-infinite-scroll');
        } else {
            $('html').addClass('disable-infinite-scroll').removeClass('infinite-scroll');
            var query = util.getQueryString(refineUrl);
            window.location.hash = query;
            if (refineUrl === window.location.href) {
                return;
            }
            updateProductListing(refineUrl);
        }
    });
}

exports.init = function () {
    compareWidget.init();
    if (SitePreferences.LISTING_INFINITE_SCROLL) {
        $(window).on('scroll', infiniteScroll);
    }
    productTile.init();
    initializeEvents();
};

},{"../compare-widget":20,"../product-tile":51,"../progress":52,"../uievents":62,"../util":63}],48:[function(require,module,exports){
'use strict';

exports.init = function () {
    var owl = $('.owl-carousel');
    owl.owlCarousel({
        items: 1,
        loop: true,
        dots: true,
        autoplay: true,
        autoplayTimeout: 7000,
        autoplayHoverPause: true,
        animateOut: 'fadeOut',
        responsive: {
            0: {
                items: 1
            },
            600: {
                items: 1
            },
            1000: {
                items: 1
            }
        }
    });
};

},{}],49:[function(require,module,exports){
'use strict';

var dialog = require('../dialog'),
    util = require('../util'),
    validator = require('../validator');

exports.init = function () {
    $('.store-details-link').on('click', function (e) {
        e.preventDefault();
        dialog.open({
            url: $(e.target).attr('href')
        });
    });
    storeLocator.init();
};
$('.customersubmit').on('click', function () {
    if ($('.floatleft.state.custom-select select').valid() == 0) {
        if (!$('.floatleft.state.custom-select').hasClass('blured')) {
            $('.floatleft.state.custom-select').addClass('customselect-error');
        }
    } else {
        $('.floatleft.state.custom-select').removeClass('customselect-error');
    }
});
var storeLocator = {
    init: function init() {
        validator.init();
        $('.googlemap').on('click', function () {
            window.open(this.name);
        });
        $('body').find('form.locatorForm').submit(function (e) {
            e.preventDefault();
            var $form = jQuery(this);
            if ($('#locatorForm button').prop('disabled')) {
                return false;
            }
            $('#noresultserror').hide();
            $('#message.success').hide();
            $('#results').hide();
            $('#locatorForm button').prop('disabled', true);
            var param = {
                countryCode: 'US',
                distanceUnit: 'mi',
                postalCode: $('.postalCheck').val(),
                maxdistance: $('.mxdistanceCheck').val(),
                rapala: $('.rapalaCheck').prop('checked'),
                vmc: $('.vmcCheck').prop('checked'),
                storm: $('.stormCheck').prop('checked'),
                luhrjensen: $('.luhrCheck').prop('checked'),
                bluefox: $('.bluefoxCheck').prop('checked'),
                terminator: $('.terminatorCheck').prop('checked'),
                williamson: $('.williamCheck').prop('checked'),
                triggerx: $('.triggerCheck').prop('checked'),
                sufix: $('.sufixCheck').prop('checked'),
                marcum: $('.marcumCheck').prop('checked'),
                strikemaster: $('.strikeCheck').prop('checked')
            },
                serviceParam = {
                countryCode: 'US',
                distanceUnit: 'mi',
                postalCode: $('.postalCheck').val(),
                maxdistance: $('.mxdistanceCheck').val()
            };
            var url = util.appendParamsToUrl(Urls.storeJson, param),
                serviceUrl = util.appendParamsToUrl(Urls.serviceStoreJson, serviceParam);
            if ($('.store-Locator-page').length > 0) {
                $.ajax({
                    type: 'POST',
                    url: url,
                    data: $form.serialize(),
                    success: function success(data) {
                        // alert(data);
                        $('#locatorForm button').removeProp('disabled');
                        if (data.storeCount > 0) {
                            $('#storeCount').html(data.storeCount);
                            $('#message.success').show();
                            var store = {};
                            var html = [];
                            var allStoreHtml = '';
                            for (var i = 0; i < data.stores.length; i++) {
                                store = data.stores[i];
                                html = [];
                                html.push('<div class="storeresult"><div class="storeinformation">');
                                html.push('<h2 class="input-style">' + store.name + '</h2>');
                                html.push('<div>' + store.address1 + '<br/>');
                                html.push(store.city);
                                if (store.city != '' && store.state != '') {
                                    html.push(',');
                                }
                                html.push(store.state + ' ' + store.postalCode + '<br />');
                                if (store.phone != '') {
                                    html.push('<div class="storephone">' + store.phone + '</div>');
                                }
                                if (store.storeHours != '') {
                                    html.push('<div class="storeHours">' + store.storeHours + '</div>');
                                }
                                if (store.storeEvents != '') {
                                    html.push('<div class="storeEvents">' + store.storeEvents + '</div>');
                                }
                                html.push('</div></div><div class="storebrands">');
                                html.push('<span class="brandlabel">' + Resources.BRAND_CATEGORY1 + '</span><hr></hr>');
                                if (store.custom.brands.rapala) {
                                    html.push('<img alt=' + Resources.STORELOCATER_RAPALA + ' class="logo medium" src=' + Urls.rapalalogo + '></img>');
                                }
                                if (store.custom.brands.vmc) {
                                    html.push('<img alt=' + Resources.STORELOCATER_VMC + ' class="logo medium" src=' + Urls.vmclogo + '></img>');
                                }
                                if (store.custom.brands.sufix) {
                                    html.push('<img alt=' + Resources.STORELOCATER_SUFIX + ' class="logo medium" src=' + Urls.sufixlogo + '></img>');
                                }
                                if (store.custom.brands.storm) {
                                    html.push('<img alt=' + Resources.STORELOCATER_STORM + ' class="logo medium" src=' + Urls.stormlogo + '></img>');
                                }
                                if (store.custom.brands.triggerx) {
                                    html.push('<img alt=' + Resources.STORELOCATER_TRIGGERX + ' class="logo medium" src=' + Urls.triggerxlogo + '></img>');
                                }
                                if (store.custom.brands.luhrjensen) {
                                    html.push('<img alt=' + Resources.STORELOCATER_LUHRJONSON + ' class="logo medium" src=' + Urls.luhrjonsonlogo + '></img>');
                                }
                                if (store.custom.brands.terminator) {
                                    html.push('<img alt=' + Resources.STORELOCATER_TERMINATOR + ' class="logo medium" src=' + Urls.terminatorlogo + '></img>');
                                }
                                if (store.custom.brands.bluefox) {
                                    html.push('<img alt=' + Resources.STORELOCATER_BLUEFOX + ' class="logo medium" src=' + Urls.bluefoxlogo + '></img>');
                                }
                                if (store.custom.brands.williamson) {
                                    html.push('<img alt=' + Resources.STORELOCATER_WILLIAMSON + ' class="logo medium" src=' + Urls.williamsonlogo + '></img>');
                                }
                                if (store.custom.brands.marcum) {
                                    html.push('<img alt=' + Resources.STORELOCATER_MARCUM + ' class="logo medium" src=' + Urls.marcumlogo + '></img>');
                                }
                                if (store.custom.brands.strikemaster) {
                                    html.push('<img alt=' + Resources.STORELOCATER_STRIKEMASTER + ' class="logo medium" src=' + Urls.strikemasterlogo + '></img>');
                                }
                                /* if(store.custom.brands.otter) {
                                    html.push('<img alt="${Resource.msg('storelocator.otter','forms',null)}" class="logo medium" src="${URLUtils.staticURL('/images/logo-otter.jpg')}"></img>');
                                } */
                                html.push('</div>');
                                html.push('<div class="storemap"><a class="button googlemap" name="' + store.map + '">' + Resources.STORELOCATER_MAP + '</a>');
                                if (store.website != '') {
                                    html.push('<br /><a target="_blank" class="button" href="' + store.website + '">' + Resources.STORELOCATER_WEBSITE + '</a>');
                                }
                                html.push('</div><div class="clear"><!-- FLOAT CLEAR --></div></div>');
                                allStoreHtml += html.join('');
                            }
                            $('div.storelocatorsearchresults').html(allStoreHtml);
                            $('#results').show();
                        } else {
                            $('#message.success').hide();
                            $('#results').hide();
                            $('#noresultserror').show();
                        }
                        if (data.Status === 400) {
                            jQuery('.email-form #message').removeClass('success-email').addClass('error-alert').html(data.Message).show();
                        } else {
                            // 200
                            $('.email-form #message').removeClass('error-alert').addClass('success-email').html('You have successfully subscribed to the Rapala Email Newsletter.').show();
                            $('.email-form input, .email-form select').val('');
                        }
                        $('.googlemap').on('click', function () {
                            window.open(this.name);
                        });
                    }
                });
            } else if ($('.service-locator-form').length > 0) {
                $.ajax({
                    type: 'POST',
                    url: serviceUrl,
                    data: $form.serialize(),
                    success: function success(data) {
                        // alert(data);
                        $('#locatorForm button').removeProp('disabled');
                        if (data.storeCount > 0) {
                            $('#storeCount').html(data.storeCount);
                            $('#message.success').show();
                            var store = {};
                            var html = [];
                            var allStoreHtml = '';
                            for (var i = 0; i < data.stores.length; i++) {
                                store = data.stores[i];
                                html = [];
                                html.push('<div class="storeresult"><div class="storeinformation">');
                                html.push('<h2 class="input-style">' + store.name + '</h2>');
                                html.push('<div>' + store.address1 + '<br/>');
                                html.push(store.city);
                                if (store.city != '' && store.state != '') {
                                    html.push(',');
                                }
                                html.push(store.state + ' ' + store.postalCode + '<br />');
                                if (store.phone != '') {
                                    html.push('<div class="storephone">' + store.phone + '</div>');
                                }
                                if (store.storeHours != '') {
                                    html.push('<div class="storeHours">' + store.storeHours + '</div>');
                                }
                                if (store.storeEvents != '') {
                                    html.push('<div class="storeEvents">' + store.storeEvents + '</div>');
                                }
                                html.push('</div></div>');
                                html.push('<div class="storemap"><div class="storedistance">' + store.distance + '</div><a class="button googlemap" name="' + store.map + '">' + Resources.STORELOCATER_MAP + '</a>');
                                if (store.website != '') {
                                    html.push('<br /><a target="_blank" class="button" href="' + store.website + '">' + Resources.STORELOCATER_WEBSITE + '</a>');
                                }
                                html.push('</div><div class="clear"><!-- FLOAT CLEAR --></div></div>');
                                allStoreHtml += html.join('');
                            }
                            $('div.storelocatorsearchresults').html(allStoreHtml);
                            $('#results').show();
                        } else {
                            $('#message.success').hide();
                            $('#results').hide();
                            $('#noresultserror').show();
                        }
                        $('.googlemap').on('click', function () {
                            window.open(this.name);
                        });
                    }
                });
            }
        });
        //$('#locatorForm').data('validator','').validate(storelocatorFormSettings);
    }
};
module.exports = storeLocator;

},{"../dialog":23,"../util":63,"../validator":64}],50:[function(require,module,exports){
'use strict';

var page = require('../page'),
    account = require('./account'),
    util = require('../util');

exports.init = function () {
    //Start JIRA PREV-412 : SG Issue: Password reset overlay displayed as a page
    account.initCartLogin();
    $('#editAddress').on('change', function () {
        page.redirect(util.appendParamToURL(Urls.wishlistAddress, 'AddressID', $(this).val()));
    });

    //add js logic to remove the , from the qty feild to pass regex expression on client side
    $('.option-quantity-desired input').on('focusout', function () {
        $(this).val($(this).val().replace(',', ''));
    });
};

},{"../page":30,"../util":63,"./account":31}],51:[function(require,module,exports){
'use strict';

var imagesLoaded = require('imagesloaded'),
    util = require('./util'),
    quickview = require('./quickview');

function initQuickViewButtons() {
    $('.product-tile .product-image').on('mouseenter', function () {
        var $qvButton = $('#quickviewbutton');
        if ($qvButton.length === 0) {
            $qvButton = $('<a id="quickviewbutton" class="quickview">' + Resources.QUICK_VIEW + '<i class="fa fa-arrows-alt"></i></a>');
        }
        var $link = $(this).find('.thumb-link');
        $qvButton.attr({
            'href': $link.attr('href'),
            'title': $link.attr('title')
        }).appendTo(this);
        $qvButton.off('click').on('click', function (e) {
            e.preventDefault();
            quickview.show({
                url: $(this).attr('href').split('#')[0], //PREV JIRA PREV-255 :PLP: On Click Quick view navigating to a wrong page when user first changes the swatches. Taking only href.
                source: 'quickview'
            });
        });
    });
}

function gridViewToggle() {
    var CookieImageValue = util.readCookie('ImageSize');
    //This is used to persist the ImageSizes overall site.
    if (CookieImageValue != null) {
        if (CookieImageValue == 'listview') {
            jQuery('.search-result-content').addClass('wide-tiles');
            jQuery('.product-image').addClass('grid');
            $('.toggle-grid i').removeClass('active');
            $('.toggle-grid .listview').addClass('active');
            $('.search-result-content.wide-tiles .product-tile .product-image img').each(function () {
                this.src = this.src.replace('sw=130&sh=92', 'sw=352&sh=251');
            });
            $('.product-img').each(function () {
                $(this).find('img').remove();
                $(this).append('<img src="' + $(this).attr('data-large-src') + '" title="' + $(this).attr('data-title') + '" alt="' + $(this).attr('data-alt') + '"></img>');
            });
        } else {
            jQuery('.search-result-content').removeClass('wide-tiles');
            jQuery('.product-image').removeClass('grid');
            $('.toggle-grid i').removeClass('active');
            $('.toggle-grid .gridview').addClass('active');
            $('.search-result-content.wide-tiles .product-tile .product-image img').each(function () {
                this.src = this.src.replace('sw=130&sh=92', 'sw=130&sh=92');
            });
            $('.product-img').each(function () {
                $(this).find('img').remove();
                $(this).append('<img src="' + $(this).attr('data-small-src') + '" title="' + $(this).attr('data-title') + '" alt="' + $(this).attr('data-alt') + '"></img>');
            });
        }

        if ($('.listview.active').length == 1) {
            $('.pt_product-search-result').attr('data-viewType', 'listview');
        } else {
            $('.pt_product-search-result').attr('data-viewType', 'gridview');
        }
    }

    $('.toggle-grid i').on('click', function () {
        var dateObj = new Date();
        dateObj.setTime(dateObj.getTime() + 60 * 60 * 1000);
        if ($(this).hasClass('gridview')) {
            document.cookie = 'ImageSize=' + 'gridview' + '; expires=' + dateObj.toUTCString() + '; path=/';
            $('.toggle-grid i').parent('.toggle-grid').removeClass('wide');
            $('.toggle-grid i').removeClass('active');
            $(this).parent('.toggle-grid').removeClass('wide');
            $(this).addClass('active');
            $('.search-result-content').removeClass('wide-tiles');
            $('.product-img').each(function () {
                $(this).find('img').remove();
                $(this).append('<img src="' + $(this).attr('data-large-src') + '" title="' + $(this).attr('data-title') + '" alt="' + $(this).attr('data-alt') + '"></img>');
            });
        } else if ($(this).hasClass('listview')) {
            document.cookie = 'ImageSize=' + 'listview' + '; expires=' + dateObj.toUTCString() + '; path=/';
            $('.toggle-grid i').parent('.toggle-grid').removeClass('wide');
            $('.toggle-grid i').removeClass('active');
            $(this).parent('.toggle-grid').addClass('wide');
            $(this).addClass('active');
            $('.search-result-content').addClass('wide-tiles');
            $('.search-result-content.wide-tiles .product-tile .product-image img').each(function () {
                this.src = this.src.replace('sw=130&sh=92', 'sw=352&sh=251');
            });
            $('.product-img').each(function () {
                $(this).find('img').remove();
                $(this).append('<img src="' + $(this).attr('data-small-src') + '" title="' + $(this).attr('data-title') + '" alt="' + $(this).attr('data-alt') + '"></img>');
            });
        }
        var currObj = $(this);
        jQuery('.toggle-grid .fa').removeClass('active');
        $(currObj).addClass('active');
        if ($('.large.active').length == 1) {
            $('.pt_product-search-result').attr('data-viewType', 'listview');
        } else {
            $('.pt_product-search-result').attr('data-viewType', 'gridview');
        }
    });
}

/**
 * @private
 * @function
 * @description Initializes events on the product-tile for the following elements:
 * - swatches
 * - thumbnails
 */
function initializeEvents() {
    initQuickViewButtons();
    gridViewToggle();
    $('.swatch-list').on('mouseleave', function () {
        // Restore current thumb image
        var $tile = $(this).closest('.product-tile'),
            $thumb = $tile.find('.product-image .thumb-link img').eq(0),
            data = $thumb.data('current');
        $thumb.attr({
            src: data.src,
            alt: data.alt,
            title: data.title
        });
        $('.search-result-content.wide-tiles .product-tile .product-image a.thumb-link.currentimg img').each(function () {
            this.src = this.src.replace('sw=130&sh=92', 'sw=352&sh=251');
        });
    });
    $('.swatch-list .swatch').on('click', function (e) {
        e.preventDefault();
        if ($(this).hasClass('selected')) {
            return;
        }

        var $tile = $(this).closest('.product-tile');
        $(this).closest('.swatch-list').find('.swatch.selected').removeClass('selected');
        $(this).addClass('selected');
        $tile.find('.thumb-link').attr('href', $(this).attr('href'));
        $tile.find('name-link').attr('href', $(this).attr('href'));

        var data = $(this).children('img').filter(':first').data('thumb');
        var $thumb = $tile.find('.product-image .thumb-link img').eq(0);
        var currentAttrs = {
            src: data.src,
            alt: data.alt,
            title: data.title
        };
        $thumb.closest('.thumb-link').addClass('currentimg');
        $thumb.attr(currentAttrs);
        $thumb.data('current', currentAttrs);

        /*Start JIRA PREV-466 : Product images are not updating in the compare section when the color swatches are changed in PLP.*/
        var pid = $(this).closest('.product-tile').attr('data-itemid');
        $('.compare-items-panel .compare-item').each(function () {
            var compareid = $(this).attr('data-itemid');
            if (pid === compareid) {
                var $compare = $(this).find('.compare-item-image').eq(0);
                $compare.attr(currentAttrs);
                $compare.data('current', currentAttrs);
            }
        });
        /*End JIRA PREV-466*/
    }).bind('mouseenter click', function () {
        // get current thumb details
        var $tile = $(this).closest('.product-tile'),
            $thumb = $tile.find('.product-image .thumb-link img').eq(0),
            data = $(this).children('img').filter(':first').data('thumb'),
            current = $thumb.data('current');

        // If this is the first time, then record the current img
        if (!current) {
            $thumb.data('current', {
                src: $thumb[0].src,
                alt: $thumb[0].alt,
                title: $thumb[0].title
            });
        }

        // Set the tile image to the values provided on the swatch data attributes
        $thumb.attr({
            src: data.src,
            alt: data.alt,
            title: data.title
        });
        $('.search-result-content.wide-tiles .product-tile .product-image a.thumb-link.currentimg img').each(function () {
            this.src = this.src.replace('sw=130&sh=92', 'sw=352&sh=251');
        });
    });
}

exports.init = function () {
    var $tiles = $('.tiles-container .product-tile');
    if ($tiles.length === 0) {
        return;
    }
    imagesLoaded('.tiles-container').on('done', function () {
        $tiles.syncHeight().each(function (idx) {
            $(this).data('idx', idx);
        });
    });
    initializeEvents();
};

},{"./quickview":54,"./util":63,"imagesloaded":4}],52:[function(require,module,exports){
'use strict';

var $loader;

/**
 * @function
 * @description Shows an AJAX-loader on top of a given container
 * @param {Element} container The Element on top of which the AJAX-Loader will be shown
 */
var show = function show(container) {
    var target = !container || $(container).length === 0 ? $('body') : $(container);
    $loader = $loader || $('.loader');

    if ($loader.length === 0) {
        $loader = $('<div/>').addClass('loader').append($('<div/>').addClass('loader-indicator'), $('<div/>').addClass('loader-bg'));
    }
    return $loader.appendTo(target).show();
};
/**
 * @function
 * @description Hides an AJAX-loader
 */
var hide = function hide() {
    if ($loader) {
        $loader.hide();
    }
};

exports.show = show;
exports.hide = hide;

},{}],53:[function(require,module,exports){
'use strict';

var quickview = require('./quickview');

function initQuickviewButtonAsset() {
    $('.product-buy-content-asset').on('click', function (e) {
        e.preventDefault();
        quickview.show({
            url: $(this).attr('href').split('#')[0],
            source: 'quickview'
        });
        if (window.innerWidth < 1024) {
            $('#QuickViewDialog').dialog('widget').position({
                my: 'top+20',
                at: 'top',
                of: window
            });
        }
    });
}
exports.init = function () {
    var $quickviewAsset = $('.product-buy-content-asset-init');
    if ($quickviewAsset.length === 0) {
        return;
    }
    initQuickviewButtonAsset();
};

},{"./quickview":54}],54:[function(require,module,exports){
'use strict';

var dialog = require('./dialog'),
    product = require('./pages/product'),
    progress = require('./progress'),
    util = require('./util'),
    _ = require('lodash');

var makeUrl = function makeUrl(url, source, productListID) {
    if (source) {
        url = util.appendParamToURL(url, 'source', source);
    }
    if (productListID) {
        url = util.appendParamToURL(url, 'productlistid', productListID);
    }
    return url;
};

var removeParam = function removeParam(url) {
    if (url.indexOf('?') !== -1) {
        return url.substring(0, url.indexOf('?'));
    } else {
        return url;
    }
};

var quickview = {
    init: function init() {
        if (!this.exists()) {
            this.$container = $('<div/>').attr('id', 'QuickViewDialog').appendTo(document.body);
        }
        this.productLinks = $('#search-result-items .thumb-link').map(function (index, thumbLink) {
            return $(thumbLink).attr('href');
        });
    },

    setup: function setup(qvUrl) {
        var $btnNext = $('.quickview-next'),
            $btnPrev = $('.quickview-prev');

        product.init();

        this.productLinkIndex = _(this.productLinks).findIndex(function (url) {
            return removeParam(url) === removeParam(qvUrl);
        });

        // hide the buttons on the compare page or when there are no other products
        if (this.productLinks.length <= 1 || $('.compareremovecell').length > 0) {
            $btnNext.hide();
            $btnPrev.hide();
            return;
        } else {
            /*  Start JIRA PREV-50: Next and Previous links will not be displayed on PDP if user navigate from Quick View.
              Added current URL parameters and index to viewfulldetails link
            */
            var a = $('#view-full-details');
            var wl = window.location;
            var qsParams = wl.search.length > 1 ? util.getQueryStringParams(wl.search.substr(1)) : {};
            var hashParams = wl.hash.length > 1 ? util.getQueryStringParams(wl.hash.substr(1)) : {};
            var params = $.extend(hashParams, qsParams);
            params.start = parseInt(this.productLinkIndex, 10) + 1;
            var tile = $('#search-result-items .product-tile').first();
            if (!params.cgid && tile.data('cgid') !== null && tile.data('cgid') !== '') {
                params.cgid = tile.data('cgid');
            }
            a.attr('href', a.attr('href') + '#' + $.param(params));
            /*End JIRA PREV-50*/
        }

        if (this.productLinkIndex === this.productLinks.length - 1) {
            $btnNext.attr('disabled', 'disabled');
        }
        if (this.productLinkIndex === 0) {
            $btnPrev.attr('disabled', 'disabled');
        }

        $btnNext.on('click', function (e) {
            e.preventDefault();
            this.navigateQuickview(1);
        }.bind(this));
        $btnPrev.on('click', function (e) {
            e.preventDefault();
            this.navigateQuickview(-1);
        }.bind(this));
    },

    /**
     * @param {Number} step - How many products away from current product to navigate to. Negative number means navigate backward
     */
    navigateQuickview: function navigateQuickview(step) {
        // default step to 0
        this.productLinkIndex += step ? step : 0;
        var url = makeUrl(this.productLinks[this.productLinkIndex], 'quickview');
        dialog.replace({
            url: url,
            callback: this.setup.bind(this, url)
        });
    },

    /**
     * @description show quick view dialog
     * @param {Object} options
     * @param {String} options.url - url of the product details
     * @param {String} options.source - source of the dialog to be appended to URL
     * @param {String} options.productlistid - to be appended to URL
     * @param {Function} options.callback - callback once the dialog is opened
     */
    show: function show(options) {
        var url;
        if (!this.exists()) {
            this.init();
        }
        url = makeUrl(options.url, options.source, options.productlistid);
        $('#QuickViewDialog').empty();
        var quickViewDialog = dialog.create({
            target: this.$container,
            options: {
                height: 530,
                width: 760,
                dialogClass: 'quickview',
                title: Resources.QUICK_VIEW_POPUP
            }
        });
        quickViewDialog.dialog('open');
        progress.show('#QuickViewDialog');
        $.ajax({
            url: url,
            success: function success(data) {
                $(quickViewDialog).append(data);
                product.init();
                progress.hide();
            }
        });
        //PREVAIL-Added for GA integration
        //GAcommented
        if (isEventTrackingEnabled && isGoogleAnalyticsEnabled) {
            googleAnalyticsEvents.quickView();
        }
    },
    exists: function exists() {
        return this.$container && this.$container.length > 0;
    },
    close: function close() {
        jQuery('#QuickViewDialog').dialog('close');
    }
};

module.exports = quickview;

},{"./dialog":23,"./pages/product":43,"./progress":52,"./util":63,"lodash":5}],55:[function(require,module,exports){
'use strict';

/**
 * @private
 * @function
 * @description Binds event to the place holder (.blur)
 */

function initializeEvents() {
    /* Start JIRA PREV-53:No search result page: When the search text field is
      empty,on clicking of "GO" button user is navigating to Home page.
      Replaced #q with 'input[name=q]'*/
    $('input[name=q]').focus(function () {
        var input = $(this);
        if (input.val() === input.attr('value')) {
            input.val('');
        }
    }).blur(function () {
        var input = $(this);
        /* Start JIRA PREV-53:No search result page: When the search text field is empty,on clicking of "GO"
             button user is navigating to Home page.Added $.trim(input.val()) === ""*/
        if ($.trim(input.val()) === '' || input.val() === '' || input.val() === input.attr('value')) {
            input.val(input.attr('value'));
        }
    }).blur();

    /* Start JIRA-PREV-54:General Error page: When the new search field empty, on clicking of "GO" user is navigating to Home page.
         Added condition for disabling search button in header and No search results page and error pages.
         Start JIRA-PREV-53:No search result page: When the search text field is empty,on clicking of "GO" button user is navigating to Home page.*/
    $('input[name=q]').closest('form').submit(function (e) {
        var input = $(this).find('input[name=q]');
        if ($.trim(input.val()) === input.attr('value') || $.trim(input.val()) === '') {
            e.preventDefault();
            return false;
        }
    });

    if ($('.pt_product-search-noresult .nohits .noresult-banner').length > 0) {
        $('.pt_product-search-noresult .nohits').css('height', 'auto');
    }
    /*End JIRA PREV-53,PREV-54 */
}

exports.init = initializeEvents;

},{}],56:[function(require,module,exports){
'use strict';

var util = require('./util');

var currentQuery = null,
    lastQuery = null,
    runningQuery = null,
    listTotal = -1,
    listCurrent = -1,
    delay = 30,
    $resultsContainer;

/**
 * @function
 * @description Handles keyboard's arrow keys
 * @param keyCode Code of an arrow key to be handled
 */
function handleArrowKeys(keyCode) {
    switch (keyCode) {
        case 38:
            // keyUp
            listCurrent = listCurrent <= 0 ? listTotal - 1 : listCurrent - 1;
            break;
        case 40:
            // keyDown
            listCurrent = listCurrent >= listTotal - 1 ? 0 : listCurrent + 1;
            break;
        default:
            // reset
            listCurrent = -1;
            return false;
    }

    $resultsContainer.children().removeClass('selected').eq(listCurrent).addClass('selected');
    $('input[name="q"]').val($resultsContainer.find('.selected .suggestionterm').first().text());
    return true;
}

var searchsuggest = {
    /**
     * @function
     * @description Configures parameters and required object instances
     */
    init: function init(container, defaultValue) {
        var $searchContainer = $(container);
        var $searchForm = $searchContainer.find('form[name="simpleSearch"]');
        var $searchField = $searchForm.find('input[name="q"]');

        // disable browser auto complete
        $searchField.attr('autocomplete', 'off');

        // on focus listener (clear default value)
        $searchField.focus(function () {
            if (!$resultsContainer) {
                // create results container if needed
                //$resultsContainer = $('<div/>').attr('id', 'search-suggestions').appendTo($searchContainer);
                $resultsContainer = $('<div/>').attr('class', 'suggestions').attr('id', 'suggestions').appendTo($searchContainer);
            }
            if ($searchField.val() === defaultValue) {
                $searchField.val('');
            }
        });
        $searchField.blur(function () {
            var temp = $searchField.val();
            if ($.trim(temp) == '') {
                $searchField.val('Search Entire Site...');
            }
        });
        $(document).on('click', function (e) {
            if (!$searchContainer.is(e.target)) {
                setTimeout(this.clearResults, 200);
            }
        }.bind(this));
        // on submit we do not submit the form, but change the window location
        // in order to avoid https to http warnings in the browser
        // only if it's not the default value and it's not empty
        $searchForm.submit(function () {
            var searchUrl = $searchForm.attr('action');
            var sessionId = jQuery('#footerhiddenid').text();
            var k = '';
            if (sessionId == 'rapala') {
                k = searchUrl + '?id=1';
            } else if (sessionId == 'sufix') {
                k = searchUrl + '?id=2';
            } else if (sessionId == 'triggerx') {
                k = searchUrl + '?id=3';
            } else if (sessionId == 'storm') {
                k = searchUrl + '?id=4';
            } else if (sessionId == 'luhrjensen') {
                k = searchUrl + '?id=5';
            } else if (sessionId == 'vmc') {
                k = searchUrl + '?id=6';
            } else if (sessionId == 'terminator') {
                k = searchUrl + '?id=7';
            } else if (sessionId == 'bluefox') {
                k = searchUrl + '?id=8';
            } else if (sessionId == 'williamson') {
                k = searchUrl + '?id=9';
            } else if (sessionId == 'marcum') {
                k = searchUrl + '?id=10';
            } else if (sessionId == 'strikemaster') {
                k = searchUrl + '?id=11';
            } else if (sessionId == 'otter') {
                k = searchUrl + '?id=21';
            }
            var searchTerm = $searchField.val();
            if (searchTerm != defaultValue && searchTerm != '') {
                window.location = util.appendParamToURL(k, 'q', searchTerm).replace('https', 'http');
            }
            return false;
        });
        // on key up listener
        $searchField.keyup(function (e) {

            // get keyCode (window.event is for IE)
            var keyCode = e.keyCode || window.event.keyCode;

            // check and treat up and down arrows
            if (handleArrowKeys(keyCode)) {
                return;
            }
            // check for an ENTER or ESC
            if (keyCode === 13 || keyCode === 27) {
                this.clearResults();
                return;
            }

            currentQuery = $searchField.val().trim();

            // no query currently running, init an update
            if (!runningQuery) {
                runningQuery = currentQuery;
                setTimeout(this.suggest.bind(this), delay);
            }
        }.bind(this));
    },

    /**
     * @function
     * @description trigger suggest action
     */
    suggest: function suggest() {
        // check whether query to execute (runningQuery) is still up to date and had not changed in the meanwhile
        // (we had a little delay)
        if (runningQuery !== currentQuery) {
            // update running query to the most recent search phrase
            runningQuery = currentQuery;
        }

        // if it's empty clear the results box and return
        if (runningQuery.length === 0) {
            this.clearResults();
            runningQuery = null;
            return;
        }

        // if the current search phrase is the same as for the last suggestion call, just return
        if (lastQuery === runningQuery) {
            runningQuery = null;
            return;
        }

        // build the request url
        var reqUrl = util.appendParamToURL(Urls.searchsuggest, 'q', runningQuery);

        // execute server call
        $.get(reqUrl, function (data) {
            var suggestionHTML = data,
                ansLength = suggestionHTML.trim().length;

            // if there are results populate the results div
            if (ansLength === 0) {
                this.clearResults();
            } else {
                // update the results div
                $resultsContainer.html(suggestionHTML).fadeIn(200);
            }

            // record the query that has been executed
            lastQuery = runningQuery;
            // reset currently running query
            runningQuery = null;

            // check for another required update (if current search phrase is different from just executed call)
            if (currentQuery !== lastQuery) {
                // ... and execute immediately if search has changed while this server call was in transit
                runningQuery = currentQuery;
                setTimeout(this.suggest.bind(this), delay);
            }
            this.hideLeftPanel();
        }.bind(this));
    },
    /**
     * @function
     * @description
     */
    clearResults: function clearResults() {
        if (!$resultsContainer) {
            return;
        }
        $resultsContainer.fadeOut(200, function () {
            $resultsContainer.empty();
        });
    },
    /**
     * @function
     * @description
     */
    hideLeftPanel: function hideLeftPanel() {
        //hide left panel if there is only a matching suggested custom phrase
        if ($('.search-suggestion-left-panel-hit').length === 1 && $('.search-phrase-suggestion a').text().replace(/(^[\s]+|[\s]+$)/g, '').toUpperCase() === $('.search-suggestion-left-panel-hit a').text().toUpperCase()) {
            $('.search-suggestion-left-panel').css('display', 'none');
            $('.search-suggestion-wrapper-full').addClass('search-suggestion-wrapper');
            $('.search-suggestion-wrapper').removeClass('search-suggestion-wrapper-full');
        }
    }
};

module.exports = searchsuggest;

},{"./util":63}],57:[function(require,module,exports){
'use strict';

var inventory = require('./');

var cartInventory = {
    setSelectedStore: function setSelectedStore(storeId) {
        var $selectedStore = $('.store-tile.' + storeId),
            $lineItem = $('.cart-row[data-uuid="' + this.uuid + '"]'),
            storeAddress = $selectedStore.find('.store-address').html(),
            storeStatus = $selectedStore.find('.store-status').data('status'),
            storeStatusText = $selectedStore.find('.store-status').text();
        this.selectedStore = storeId;

        $lineItem.find('.instore-delivery .selected-store-address').data('storeId', storeId).attr('data-store-id', storeId).html(storeAddress);
        $lineItem.find('.instore-delivery .selected-store-availability').data('status', storeStatus).attr('data-status', storeStatus).text(storeStatusText);
        $lineItem.find('.instore-delivery .delivery-option').removeAttr('disabled').trigger('click');
    },
    cartSelectStore: function cartSelectStore(selectedStore) {
        var self = this;
        inventory.getStoresInventory(this.uuid).then(function (stores) {
            inventory.selectStoreDialog({
                stores: stores,
                selectedStoreId: selectedStore,
                selectedStoreText: Resources.SELECTED_STORE,
                continueCallback: function continueCallback() {},
                selectStoreCallback: self.setSelectedStore.bind(self)
            });
        }).done();
    },
    setDeliveryOption: function setDeliveryOption(value, storeId) {
        // set loading state
        $('.item-delivery-options').addClass('loading').children().hide();

        var data = {
            plid: this.uuid,
            storepickup: value === 'store' ? true : false
        };
        if (value === 'store') {
            data.storepickup = true;
            data.storeid = storeId;
        } else {
            data.storepickup = false;
        }
        $.ajax({
            url: Urls.setStorePickup,
            data: data,
            success: function success() {
                // remove loading state
                $('.item-delivery-options').removeClass('loading').children().show();
            }
        });
    },
    init: function init() {
        var self = this;
        $('.item-delivery-options .set-preferred-store').on('click', function (e) {
            e.preventDefault();
            self.uuid = $(this).data('uuid');
            var selectedStore = $(this).closest('.instore-delivery').find('.selected-store-address').data('storeId');
            if (!User.zip) {
                inventory.zipPrompt(function () {
                    self.cartSelectStore(selectedStore);
                });
            } else {
                self.cartSelectStore(selectedStore);
            }
        });
        $('.item-delivery-options .delivery-option').on('click', function () {
            // reset the uuid
            var selectedStore = $(this).closest('.instore-delivery').find('.selected-store-address').data('storeId');
            self.uuid = $(this).closest('.cart-row').data('uuid');
            self.setDeliveryOption($(this).val(), selectedStore);
        });
    }
};

module.exports = cartInventory;

},{"./":58}],58:[function(require,module,exports){
'use strict';

var _ = require('lodash'),
    dialog = require('../dialog'),
    TPromise = require('promise'),
    util = require('../util');

var newLine = '\n';
var storeTemplate = function storeTemplate(store, selectedStoreId, selectedStoreText) {
    return ['<li class="store-tile ' + store.storeId + (store.storeId === selectedStoreId ? ' selected' : '') + '">', '	<p class="store-address">', '		' + store.address1 + '<br/>', '		' + store.city + ', ' + store.stateCode + ' ' + store.postalCode, '	</p>', '	<p class="store-status" data-status="' + store.statusclass + '">' + store.status + '</p>', '	<button class="select-store-button" data-store-id="' + store.storeId + '"' + (store.statusclass !== 'store-in-stock' ? 'disabled="disabled"' : '') + '>', '		' + (store.storeId === selectedStoreId ? selectedStoreText : Resources.SELECT_STORE), '	</button>', '</li>'].join(newLine);
};

var storeListTemplate = function storeListTemplate(stores, selectedStoreId, selectedStoreText) {
    if (stores && stores.length) {
        return ['<div class="store-list-container">', '<ul class="store-list">', _.map(stores, function (store) {
            return storeTemplate(store, selectedStoreId, selectedStoreText);
        }).join(newLine), '</ul>', '</div>', '<div class="store-list-pagination">', '</div>'].join(newLine);
    } else {
        return '<div class="no-results">' + Resources.INVALID_ZIP + '</div>';
    }
};

var zipPromptTemplate = function zipPromptTemplate() {
    return ['<div id="preferred-store-panel">', '	<input type="text" id="user-zip" placeholder="' + Resources.ENTER_ZIP + '" name="zipCode"/>', '</div>'].join(newLine);
};

/**
 * @description test whether zipcode is valid for either US or Canada
 * @return {Boolean} true if the zipcode is valid for either country, false if it's invalid for both
 **/
var validateZipCode = function validateZipCode(zipCode) {
    var regexes = {
        canada: /^[ABCEGHJKLMNPRSTVXY]\d[ABCEGHJKLMNPRSTVWXYZ]( )?\d[ABCEGHJKLMNPRSTVWXYZ]\d$/i,
        usa: /^\d{5}(-\d{4})?$/
    },
        valid = false;
    if (!zipCode) {
        return;
    }
    _.each(regexes, function (re) {
        var regexp = new RegExp(re);
        valid = regexp.test(zipCode);
    });
    return valid;
};

var storeinventory = {
    zipPrompt: function zipPrompt(callback) {
        var self = this;
        dialog.open({
            html: zipPromptTemplate(),
            options: {
                title: Resources.STORE_NEAR_YOU,
                width: 500,
                buttons: [{
                    text: Resources.SEARCH,
                    click: function click() {
                        var zipCode = $('#user-zip').val();
                        if (validateZipCode(zipCode)) {
                            self.setUserZip(zipCode);
                            if (callback) {
                                callback(zipCode);
                            }
                        }
                    }
                }],
                open: function open() {
                    $('#user-zip').on('keypress', function (e) {
                        if (e.which === 13) {
                            // trigger the search button
                            $('.ui-dialog-buttonset .ui-button').trigger('click');
                        }
                    });
                }
            }
        });
    },
    getStoresInventory: function getStoresInventory(pid) {
        return TPromise.resolve($.ajax({
            url: util.appendParamsToUrl(Urls.storesInventory, {
                pid: pid,
                zipCode: User.zip
            }),
            dataType: 'json'
        }));
    },
    /**
     * @description open the dialog to select store
     * @param {Array} options.stores
     * @param {String} options.selectedStoreId
     * @param {String} options.selectedStoreText
     * @param {Function} options.continueCallback
     * @param {Function} options.selectStoreCallback
     **/
    selectStoreDialog: function selectStoreDialog(options) {
        var self = this,
            stores = options.stores,
            selectedStoreId = options.selectedStoreId,
            selectedStoreText = options.selectedStoreText,
            storeList = storeListTemplate(stores, selectedStoreId, selectedStoreText);
        dialog.open({
            html: storeList,
            options: {
                title: Resources.SELECT_STORE + ' - ' + User.zip,
                buttons: [{
                    text: Resources.CHANGE_LOCATION,
                    click: function () {
                        self.setUserZip(null);
                        // trigger the event to start the process all over again
                        $('.set-preferred-store').trigger('click');
                    }.bind(this)
                }, {
                    text: Resources.CONTINUE,
                    click: function click() {
                        if (options.continueCallback) {
                            options.continueCallback(stores);
                        }
                        dialog.close();
                    }
                }],
                open: function open() {
                    $('.select-store-button').on('click', function (e) {
                        e.preventDefault();
                        var storeId = $(this).data('storeId');
                        // if the store is already selected, don't select again
                        if (storeId === selectedStoreId) {
                            return;
                        }
                        $('.store-list .store-tile.selected').removeClass('selected').find('.select-store-button').text(Resources.SELECT_STORE);
                        $(this).text(selectedStoreText).closest('.store-tile').addClass('selected');
                        if (options.selectStoreCallback) {
                            options.selectStoreCallback(storeId);
                        }
                    });
                }
            }
        });
    },
    setUserZip: function setUserZip(zip) {
        User.zip = zip;
        $.ajax({
            type: 'POST',
            url: Urls.setZipCode,
            data: {
                zipCode: zip
            }
        });
    },
    shippingLoad: function shippingLoad() {
        var $checkoutForm = $('.address');
        $checkoutForm.off('click');
        $checkoutForm.on('click', 'input[name$="_shippingAddress_isGift"]', function () {
            $(this).parent().siblings('.gift-message-text').toggleClass('hidden', $('input[name$="_shippingAddress_isGift"]:checked').val());
        });
    }
};

module.exports = storeinventory;

},{"../dialog":23,"../util":63,"lodash":5,"promise":6}],59:[function(require,module,exports){
'use strict';

/**
 * Events are divided up by name space so only the
 * events that are needed are initialized.
 */

var events = {
    account: function account() {},
    cart: function cart() {},
    checkout: function checkout() {
        $('[name$=_deleteProduct]').on('click', function () {
            removeFromCart($.parseJSON($(this).attr('data-gtmdata')), 1);
        });
    },
    compare: function compare() {},
    product: function product() {
        $('#add-to-cart').on('click', function () {
            addToCart($.parseJSON($(this).attr('data-gtmdata')), $(this).closest('div').find('[name=Quantity]').val());
        });
    },
    search: function search() {},
    storefront: function storefront() {},
    wishlist: function wishlist() {
        $('[name$=_addToCart]').on('click', function () {
            addToCart($.parseJSON($(this).attr('data-gtmdata')), $(this).closest('div').find('[name=Quantity]').val());
        });
    },
    // events that should happen on every page
    all: function all() {
        $('.name-link').on('click', function () {
            productClick($.parseJSON($(this).attr('data-gtmdata')));
        });
        $('.thumb-link').on('click', function () {
            productClick($.parseJSON($(this).attr('data-gtmdata')));
        });
        $('.has-sub-menu').on('click', function () {
            pushEvent('trackEvent', 'User Action', 'Header Click', $(this).html());
        });
        $('.primary-logo').on('click', function () {
            pushEvent('trackEvent', 'User Action', 'Header Click', 'Home Link');
        });
    }
};

/**
 * @param {Object} productObject The product data
 * @description gets the data for a product click
 */
function productClick(productObject) {
    var obj = {
        'event': 'productClick',
        'ecommerce': {
            'click': {
                'actionField': { 'list': 'SearchResults' },
                'products': []
            }
        }
    };
    obj.ecommerce.click.products.push(productObject);
    dataLayer.push(obj);
}

/**
 * @description Click event for add product to cart
 * @param {Object} productObject The product data
 * @param {String} quantity
 */
function addToCart(productObject, quantity) {
    var quantityObj = { 'quantity': quantity },
        obj = {
        'event': 'addToCart',
        'ecommerce': {
            'add': {
                'products': []
            }
        }
    };
    obj.ecommerce.add.products.push($.extend(productObject, quantityObj));
    dataLayer.push(obj);
}

/**
 *
 * @param {Object} productObject
 * @param {String|Number} quantity
 */
function removeFromCart(productObject, quantity) {
    var quantityObj = { 'quantity': quantity },
        obj = {
        'event': 'removeFromCart',
        'ecommerce': {
            'remove': {
                'products': []
            }
        }
    };
    obj.ecommerce.add.products.push($.extend(productObject, quantityObj));
    dataLayer.push(obj);
}

/**
 * @description Convenience method for creating a click event.
 * @param {String} event
 * @param {String} eventCategory
 * @param {String} eventAction
 * @param {String} eventLabel
 */
function pushEvent(event, eventCategory, eventAction, eventLabel) {
    dataLayer.push({
        'event': event,
        'eventCategory': eventCategory,
        'eventAction': eventAction,
        'eventLabel': eventLabel
    });
}

/**
 * @description Initialize the tag manager functionality
 * @param {String} nameSpace The current name space
 */
exports.init = function (nameSpace) {
    if (nameSpace && events[nameSpace]) {
        events[nameSpace]();
    }
    events.all();
};

},{}],60:[function(require,module,exports){
'use strict';

/**
 * Checks the TLS and displays a warning if appropriate
 * @function getUserAgent Checks the TLS and displays a warning if appropriate
 **/

function getUserAgent() {

    var ua = navigator.userAgent,
        tem,
        M = ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i) || [];
    if (/trident/i.test(M[1])) {
        tem = /\brv[ :]+(\d+)/g.exec(ua) || [];
        return { name: 'IE', version: tem[1] || '' };
    }
    if (M[1] === 'Chrome') {
        tem = ua.match(/\bOPR\/(\d+)/);
        if (tem != null) {
            return { name: 'Opera', version: tem[1] };
        }
    }
    M = M[2] ? [M[1], M[2]] : [navigator.appName, navigator.appVersion, '-?'];
    if ((tem = ua.match(/version\/(\d+)/i)) != null) {
        M.splice(1, 1, tem[1]);
    }
    return {
        name: M[0],
        version: M[1]
    };
}

/**
 * Export the getUserAgent function
 */

exports.getUserAgent = getUserAgent;

},{}],61:[function(require,module,exports){
'use strict';

/**
 * @function
 * @description Initializes the tooltip-content and layout
 */

var settings = {
    items: '.tooltip, .Custom-tooltip',
    delay: 0,
    track: false,
    showURL: false,
    extraClass: 'tooltipshadow',
    top: 5,
    left: -150
};
exports.init = function () {
    $(document).tooltip($.extend({}, settings, {
        content: function content() {
            return $(this).find('.tooltip-content , .tooltip-body').html();
        }
    }));
    /*$('.Custom-tooltip').tooltipster({
            content: jQuery(this).find('.tooltipcontainer').html(),
            contentAsHTML: true,
            maxWidth: 300,
            touchDevices: true,
            trigger: 'click'
    }); */
    $('.share-link').on('click', function (e) {
        e.preventDefault();
        var target = $(this).data('target');
        if (!target) {
            return;
        }
        $(target).toggleClass('active');
    });

    /*JIRA PREV-282 : DEV-32: SG issue- 'What is this' link in checkout billing page should not be clickable. Added the folloiwng block.*/
    $('a.tooltip').click(function (e) {
        e.preventDefault();
    });
};

},{}],62:[function(require,module,exports){
'use strict';

var util = require('./util');
/*function charcount($this){
	var characterLimit = parseInt($this.data("character-limit"));
	var charRemains = characterLimit - $this.val().trim().length;
	var charCountHtml = 'Characters Remaining ' + charRemains
	if($this.hasClass("vip-textarea")){
		if ($this.next('div.char-count').length === 0) {
			charCountContainer = $('<div class="char-count"/>').insertAfter($this);
		}
		$this.next('div.char-count').html(charCountHtml);
	}else {
		if ($this.prev('div.char-count').length === 0) {
			charCountContainer = $('<div class="char-count"/>').insertBefore($this);
		}
		$this.prev('div.char-count').html(charCountHtml);
	}
}*/
var uievents = {
    customFields: function customFields() {
        var $con = $('body');
        $con.find('.custom-checkbox').each(function () {
            if (jQuery(this).find('input[type="checkbox"]').is(':checked')) {
                jQuery(this).find('.custom-link').addClass('active');
            }
        });

        $con.find('.custom-checkbox .custom-link').off('click').on('click', function () {
            var $customcheck = $(this).closest('.custom-checkbox');
            $(this).removeClass('error');
            if ($customcheck.find('input[type="checkbox"]').is(':checked')) {
                $customcheck.find('input[type="checkbox"]').click();
                $customcheck.find('.custom-link').removeClass('active');
            } else {
                $customcheck.find('input[type="checkbox"]').click();
                $customcheck.find('.custom-link').addClass('active');
            }
        });
        /*if($('body').hasClass('rapala_device')){
            $con.find(".ui-dialog #dialogcontainer123 #VipinsiderForm .select-style .selectbox").off('click').on("click",function(){
                $(this).closest(".field-wrapper").addClass('expanded');
                }).on("blur change", function(){
                    $(this).closest(".field-wrapper").removeClass('expanded');
                });
        }*/

        // custom select implementation in VIP insider
        /*if(!$('body').hasClass('rapala_device')){
            $con.find(".customized-select").find("select").each(function(){
                if($(this).attr('disabled')){
                    $(this).selectbox('disable');
                }
             else{
                 $(this).selectbox();
             }
                $('.sbOptions li:last').addClass('last');
            }).focus(function(){
                $(this).next('.sbHolder').trigger('focus');
            });
          }
        */
        $con.find('.custom-checkbox input[type="checkbox"]').off('change').on('change', function () {
            $(this).closest('.custom-checkbox').find('.custom-link').removeClass('error');
            var $form = $('.address');
            if ($(this).is(':checked')) {
                $(this).closest('.custom-checkbox').find('.custom-link').addClass('active');
                if ($(this).is('[name$=_sameasshippingaddress]')) {
                    var selectedAddress = $(this).closest('.custom-checkbox').data('address');
                    $('.selected-shipping-address').empty();
                    $('.selected-shipping-address').append(selectedAddress.firstName + ' ' + selectedAddress.lastName + '<br/>' + selectedAddress.address1 + ' ' + selectedAddress.address2 + '<br/>' + selectedAddress.city + ' ' + selectedAddress.stateCode + ' ' + selectedAddress.postalCode + '<br/>' + selectedAddress.phone);
                    util.fillAddressFields(selectedAddress, $form);
                    $('.edit-address-field').addClass('hide');
                    $('.selected-shipping-address, .new-address-field').removeClass('hide');
                    $('.shipping-address-field-section').addClass('hide');
                    uievents.customFields();
                    uievents.synccheckoutH();
                }
            } else {
                $(this).closest('.custom-checkbox').find('.custom-link').removeClass('active');
                if ($(this).is('[name$=_sameasshippingaddress]')) {
                    $('.addressoptions-addToAddressBook,.addressoptions-makedefault ').removeClass('hide');
                    $('input[name$=\'shippingAddress_selectedaddress\']').val('');
                    $('.selected-shipping-address').empty();
                    $('input[name$=\'_addressid\']').val('');
                    $('input[name$=\'_addressFields_firstName\']').val('');
                    $('input[name$=\'_addressFields_lastName\']').val('');
                    $('input[name$=\'_addressFields_address1\']').val('');
                    $('input[name$=\'_addressFields_address2\']').val('');
                    $('input[name$=\'_addressFields_city\']').val('');
                    $('input[name$=\'_addressFields_postal\']').val('');
                    $('input[name$=\'_addressFields_phone\']').val('');
                    uievents.changeFormSelection(jQuery('select[name$=\'_addressFields_states_state\']')[0], '');
                    uievents.changeFormSelection(jQuery('select.address-select')[0], '');
                    $('.shipping-address-field-section').removeClass('hide');
                    $('.selected-shipping-address, .new-address-field, .edit-address-field').addClass('hide');
                    $('input[name$=\'_addressFields_phone\']').closest('div.phone').find('span.errorclient').remove();
                    $('input[name$=\'_addressFields_postal\']').closest('div.zip').find('span.errorclient').remove();
                    $('.addressform .form-row.custom-select').removeClass('customselect-error');
                    $('.custom-select').each(function () {
                        var selectVal = $(this).find(':selected').text();
                        $(this).find('.selectorOut').text(selectVal);
                    });
                    $('a.clearbutton').hide();
                    $('.shipping-address-field-section .form-row').find('input').removeClass('errorclient');
                    uievents.customFields();
                    uievents.synccheckoutH();
                }
            }
        });

        $con.find('.custom-select').each(function () {
            $(this).find('select').removeAttr('style');
            var selWidth = $(this).find('select').width();
            if ($(this).find('select').hasClass('input-longer')) {
                selWidth = selWidth - 17;
            }
            $(this).find('select').css({
                'width': selWidth + 20,
                'left': '0px',
                'line-height': '28px',
                'z-index': '99',
                'position': 'relative',
                'float': 'left',
                'padding': '0px'
            });
            $(this).find('.field-wrapper').css({
                'background-position': selWidth,
                'width': selWidth + 20,
                'padding': '0px'
            });
            if ($('.creditCard').length > 0) {
                $(this).css({
                    'background-position': selWidth,
                    'width': selWidth + 15,
                    'padding': '0px'
                });
            }

            if ($(this).find('.selectorOut').length == 0) {
                $(this).find('select').after('<div class=\'selectorOut\' style=\'position:absolute;top:0px;z-index:1;padding:0 20px 0 10px;\'></div>');
            }
            if ($(this).find('.selectorError').length == 0 && !$(this).closest('month') && !$(this).closest('year')) {
                $(this).closest('.formfield .field-wrapper').append('<div class=\'selectorError error\'></div>');
            }
            $(this).find('.selectorOut').text('').text($(this).find(':selected').text());
        }).change(function () {
            var str = '';
            str = $(this).find(':selected').text();
            $(this).find('.selectorOut').text('').text(str);
            if ($(this).hasClass('addresslist')) {
                if ($(this).find('.selectorOut').outerWidth() >= 298) {
                    str = str.substr(0, 34) + '...';
                    $(this).find('.selectorOut').text('').text(str);
                }
            }
        });

        $con.find('.custom-select select').bind('blur change', function () {
            if ($(this).hasClass('valid') || $(this).val().length > 0) {
                $(this).closest('.custom-select').removeClass('customselect-error');
                $(this).removeClass('errorclient').addClass('valid');
                //$(this).find("option[value="+$(this).val()+"]").attr("selected","selected");
                if (jQuery(this).closest('.formfield').hasClass('state')) {
                    $('.state-blk .stateerror.error').hide();
                }
            } else {
                $(this).closest('.custom-select').addClass('customselect-error');
                if (jQuery(this).closest('.formfield').hasClass('state') && !jQuery(this).closest('.custom-select').hasClass('blured')) {
                    jQuery('.state-blk .stateerror.error').show();
                }
            }
            if (jQuery(this).hasClass('yearselect') || jQuery(this).hasClass('monthselect')) {
                if (jQuery('.yearselect').valid() == 1 && jQuery('.monthselect').valid() == 1) {
                    jQuery('.expirationdatevalid.error').hide();
                    jQuery('.expirationdate.error').hide();
                }
            }
        });
    },
    //changes the selection of the given form select to the given value
    changeFormSelection: function changeFormSelection(selectElem, selectedValue) {
        if (!selectElem) {
            return;
        }
        var options = selectElem.options;
        if (options.length > 0) {
            // find index of value to select
            var idx = 0;
            for (var i = 0; i < options.length; i++) {
                if (options[i].value != selectedValue) {
                    continue;
                }
                idx = i;
                break;
            }
            selectElem.selectedIndex = idx;
            $('.custom-select').each(function () {
                var selectVal = $(this).find(':selected').text();
                $(this).find('.selectorOut').text(selectVal);
            });
        }
    },
    init: function init($con) {

        if ($con == null) {
            $con = $('body');
        }

        uievents.customFields();
        // Dynamicaly generating tabindex for VIP
        if ($('.ui-dialog').hasClass('vipInsider-dlg')) {
            $('.vipInsider-dlg .formfield').each(function (i) {
                $(this).find(':input:not(:hidden)').attr('tabindex', i + 21);
            });
        }
        /*$(document).ajaxComplete(function () {
            if($('.pt_productsearchresult').length > 0){app.search.searchRefinementToggle();}
            uievents.synccheckoutH();
        });*/
        $con.find('a.clearbutton').on('click touchstart', function () {
            $(this).closest('.formfield').find('input').val('');
            $(this).closest('.formfield').find('textarea').val('');
            $(this).closest('.formfield').find('a.clearbutton').hide();
            $(this).closest('.formfield').find('.correctaddress').hide();
            $(this).closest('.formfield').find('.form-row , .label span').removeClass('inputlabel');
            var textareMaxLength = $(this).closest('.field-wrapper').find('textarea').attr('maxlength');
            $(this).closest('.field-wrapper').find('.char-count').html('').html('Characters Remaining ' + textareMaxLength);
            if ($(this).closest('.formfield').find('input[name$="_creditCard_number"]').length > 0 && $(this).closest('.formfield').find('input[name$="_creditCard_number"]').val().length < 4) {
                $('.cardtypeimg > div').hide();
            }
            if ($(this).closest('.formfield').find('.field-wrapper .maxelement').length > 0) {
                $(this).closest('.formfield').find('.field-wrapper .maxelement').remove();
            }
        });
        $con.find('.promo-input-button .field-wrapper').on('keyup blur', function () {
            if ($(this).find('input').val() != undefined) {
                if ($(this).find('input').val().length > 0) {
                    $(this).find('a.clearbutton').show();
                } else {
                    $(this).find('a.clearbutton').hide();
                }
            }
        });
        $con.find('.giftcertfields .field-wrapper').on('keyup blur', function () {
            if ($(this).find('input').val() != undefined) {
                $(this).find('input').removeClass('errorclient');
                if ($(this).find('input').val().length > 0) {
                    $(this).find('a.clearbutton').show();
                } else {
                    $(this).find('a.clearbutton').hide();
                }
            }
        });

        if ($('.ui-login').length > 0 || $('.passwordreset').length > 0) {
            $con.find('.ui-login .formfield').each(function () {
                var $val = $(this).find('input[type="text"]').length > 0 ? $(this).find('input[type="text"]').val() : $(this).find('input[type="password"]').val();
                if ($(this).find('.field-wrapper .clearbutton').length == 0 && $(this).find('.field-wrapper input[type="text"]').length > 0 || $(this).find('.field-wrapper input[type="password"]').length > 0) {
                    $(this).find('.field-wrapper').append('<a class="clearbutton"></a>');
                    $(this).find('.clearbutton').hide();
                }
                if (($val != null || $val != undefined) && $val.length > 0) {
                    $(this).find('.clearbutton').show();
                }
            });
        }
        if ($('.account-section').length > 0 || $('.passwordreset').length > 0) {
            $con.find('.account-section .formfield').each(function () {
                var $val = $(this).find('input[type="text"]').length > 0 ? $(this).find('input[type="text"]').val() : $(this).find('input[type="password"]').val();
                if ($(this).find('.field-wrapper .clearbutton').length == 0 && $(this).find('.field-wrapper input[type="text"]').length > 0 || $(this).find('.field-wrapper input[type="password"]').length > 0) {
                    $(this).find('.field-wrapper').append('<a class="clearbutton"></a>');
                }
                if (($val != null || $val != undefined) && $val.length > 0) {
                    $(this).find('.clearbutton').show();
                }
            });
        }

        $con.find('.formfield .field-wrapper input,.formfield .field-wrapper textarea').on('keyup input blur', function () {
            if ($(this).val() != undefined) {
                if ($(this).val().length > 0) {
                    $(this).closest('.formfield').find('a.clearbutton').show();
                } else {
                    $(this).closest('.formfield').find('a.clearbutton').hide();
                }
            }
        });
        //var OSName = 'Unknown OS';
        if (navigator.appVersion.indexOf('Mac') != -1) {
            $('.pt_vipinsider').find('span.rapala-entity-holder i').addClass('macfont');
        }

        $('.paymentmethods_cont .toggle').click(function () {
            uievents.synccheckoutH();
        });

        $('button[name=\'dwfrm_login_login\']').click(function () {
            setTimeout(function () {
                uievents.synccheckoutH();
            }, 100);
        });
        $('button[name=\'dwfrm_billinggiftcert_redeemGiftCert\']').click(function () {
            setTimeout(function () {
                uievents.synccheckoutH();
            }, 100);
        });
        $('button[name=\'dwfrm_billingcoupon_applyCoupon\']').click(function () {
            setTimeout(function () {
                uievents.synccheckoutH();
            }, 100);
        });
        $('.checkbalance a').click(function () {
            setTimeout(function () {
                uievents.synccheckoutH();
            }, 100);
        });
        $('.giftcertcouponform .gift-heading').click(function () {
            if ($('.show-content').is(':visible') == true) {
                $('.show-content').hide();
                $(this).closest('.giftcertfield').find('span.error').hide();
            } else {
                $('.show-content').show();
                $(this).closest('.giftcertfield').find('span.error').show();
            }
            uievents.synccheckoutH();
        });
        $('body').on('keypress keyup', 'input[id$="_addressid"],input[id$="_addressFields_firstName"],input[id$="_addressFields_lastName"],input[id$="_addressFields_address1"],input[id$="_addressFields_address2"],input[id$="_addressFields_city"],input[id$="_addressFields_phone"],input[id$="_addressFields_postal"],input[id$="_contactus_phone"]', function (e) {
            var keycode = e.keyCode ? e.keyCode : e.which;
            var maxlength = $(this).attr('maxlength');
            var maxlmsg = 'This field is limited to ' + maxlength + ' characters.';
            if (jQuery(this).hasClass('phone') || jQuery(this).hasClass('phoneCDUS')) {
                maxlength = 14;
                $(this).attr('maxlength', maxlength);
                maxlmsg = 'This field is limited to 10 numbers.';
            }

            if (jQuery(this).hasClass('postal')) {
                maxlength = 10;
                $(this).attr('maxlength', maxlength);
                maxlmsg = 'This field is limited to 9 numbers.';
            }
            if (keycode != 86) {
                var maxElement = '<div class=\'maxelement hide\'>' + maxlmsg + '</div>';
                if ($(this).val().length >= maxlength && keycode != 9) {
                    if ($(this).closest('.field-wrapper').find('span.errorclient').length != 0) {
                        $(this).closest('.field-wrapper').find('span.errorclient').remove();
                    }
                    if ($(this).closest('.field-wrapper').find('.maxelement').length == 0) {
                        $(this).closest('.field-wrapper').append(maxElement);
                    } else {
                        $(this).closest('.field-wrapper').find('.maxelement').removeClass('hide');
                        $(this).val($(this).val().substr(0, maxlength));
                        return false;
                    }
                } else {
                    if ($(this).closest('.field-wrapper').find('.maxelement').length > 0) {
                        $(this).closest('.field-wrapper').find('.maxelement').remove();
                    }
                }
            }
        });
        $('body').on('blur', 'input[id$="_addressid"],input[id$="_addressFields_firstName"],input[id$="_addressFields_lastName"],input[id$="_addressFields_address1"],input[id$="_addressFields_address2"],input[id$="_addressFields_city"],input[id$="_addressFields_phone"],input[id$="_addressFields_postal"],input[id$="_contactus_phone"]', function () {
            $('.maxelement').addClass('hide');
            $('#customercontactus').find('span').removeClass('maxelement');
        });
        /* if($(".ordertotalsaving").length > 0 ) {
             $(".new-summery").removeClass("discount-available");
         }else {
             $(".new-summery").addClass("discount-available");
         }*/
        if ($('.ui-dialog').hasClass('vipInsider-dlg')) {
            $('.vipInsider-dlg .formfield').each(function () {
                if ($(this).find('.field-wrapper .clearbutton').length == 0 && $(this).find('.field-wrapper input[type="text"]').length > 0 || $(this).find('.field-wrapper textarea').length > 0 || $(this).find('.field-wrapper input[type="password"]').length > 0) {
                    $(this).find('.field-wrapper').append('<a class="clearbutton"></a>');
                }
                $(this).find('.field-wrapper input.textinput, .field-wrapper textarea').unbind('change').bind('click change', function () {
                    if ($(this).hasClass('errorclient')) {
                        $(this).removeClass('errorclient');
                        $(this).closest('.formfield').find('.label').find('span.errorclient').remove();
                        $(this).closest('.formfield').find('.label').removeClass('erroroccured');
                        $(this).closest('.formfield').find('.form-row , .label span').removeClass('inputlabel');
                    } else {
                        return false;
                    }
                });
                $(this).find('.field-wrapper select').unbind('change').bind('focusin change', function () {
                    if ($(this).hasClass('errorclient')) {
                        $(this).removeClass('errorclient');
                        $(this).closest('.formfield').find('.label').find('span.errorclient').remove();
                        $(this).closest('.formfield').find('.label').removeClass('erroroccured');
                        $(this).closest('.formfield').find('.form-row , .label span').removeClass('inputlabel');
                    }
                });
            });
            $('#VIPInsider-form-cancel-id').click(function () {
                $('.ui-dialog-titlebar-close').trigger('click');
            });

            /********************* vip phone and zip error exceed code **************************/

            $('input[id$="_vipinsider_customer_zip"],input[id$="_vipinsider_customer_phone"]').bind('keypress keyup', function (e) {
                var keycode = e.keyCode ? e.keyCode : e.which;
                var maxlength = $(this).attr('maxlength');
                var maxlmsg = 'This field is limited to ' + maxlength + ' characters.';
                if (jQuery(this).hasClass('vip-phone')) {
                    maxlength = 14;
                    $(this).attr('maxlength', maxlength);
                    maxlmsg = '-This field is limited to 10 numbers.';
                }
                if (jQuery(this).hasClass('vip-zip')) {
                    maxlength = 10;
                    $(this).attr('maxlength', maxlength);
                    maxlmsg = '-This field is limited to 9 numbers.';
                }
                if (keycode != 86) {
                    var maxElement = '<div class=\'maxelement hide\'>' + maxlmsg + '</div>';
                    if ($(this).val().length >= maxlength) {
                        if ($(this).closest('.field-wrapper').find('span.errorclient').length != 0) {
                            $(this).closest('.field-wrapper').find('span.errorclient').remove();
                        }
                        if ($(this).closest('.formfield').find('.maxelement').length == 0) {
                            $(this).closest('.formfield').find('.label').append(maxElement);
                        } else {
                            if (keycode > 47 && keycode < 58) {
                                $(this).closest('.formfield').find('.maxelement').removeClass('hide');
                                $(this).closest('.formfield').find('.label').addClass('erroroccured');
                                $(this).val($(this).val().substr(0, maxlength));
                                return false;
                            }
                        }
                    } else {
                        if ($(this).closest('.formfield').find('.maxelement').length > 0) {
                            $(this).closest('.formfield').find('.maxelement').remove();
                            $(this).closest('.formfield').find('.label').removeClass('erroroccured');
                        }
                    }
                }
            });
            //this is used after to remove the exceeding error message on blur for 1143 ticket
            jQuery('input[id$="_vipinsider_customer_zip"],input[id$="_vipinsider_customer_phone"]').bind('blur', function () {
                if ($(this).closest('.formfield').find('.label').find('.maxelement').is(':visible')) {
                    $('.maxelement').addClass('hide');
                    $('#VipinsiderForm').find('span').removeClass('maxelement');
                    $(this).closest('.formfield').find('.label').removeClass('erroroccured');
                }
            });
        }
        /**------- left nav----------------*/
        $con.find('.categorymenusnew li.active').closest('.category-top-level').addClass('current');
        $con.find('.category-top-level').each(function () {
            if ($(this).hasClass('current')) {
                var $this = $('.categorymenusnew li.active');
                /*
                var $notthis = $('.categorymenusnew li').filter(function () {
                    if ($(this).not('.active')) {
                        if ($(this).find('> ul').length > 0) {
                            $(this).find('> a .count-products').addClass('select_sublevelarrow');
                        }
                    }
                });
                */
                $this.find('> ul').show();
                $this.parents('ul').show();
                if ($this.find('> ul').length > 0) {
                    $this.find('> a .count-products').addClass('sublevelarrow');
                }
                $this.parents('li').not('li.active').find('> a .count-products').addClass('sublevelarrow');
                $this.find('li').each(function () {
                    if ($(this).find('> ul').length > 0) {
                        $(this).find('> a .count-products').addClass('select_sublevelarrow');
                    }
                });
            } else {
                if ($(this).find('> ul').length > 0) {
                    $(this).find('> a .count-products').addClass('select_sublevelarrow');
                }
            }
        });
        /*$('textarea[data-character-limit]').each(function(){
            charcount($(this));
            // trigger the keydown event so that any existing character data is calculated
        }).on('keyup keypress', function(){
            charcount($(this));
        });*/
    },
    synccheckoutH: function synccheckoutH() {
        if ($('.pt_checkout').length > 0) {
            $('.item-cart-scrollbar').removeAttr('style');
            $('.pt_checkout .summary-section .slimScrollDiv').removeAttr('style');
            $('.item-cart-scrollbar').removeClass('scrollbar-active');
            $('.pt_checkout  .ajax-cartsummary').find('.summary-carttable').removeClass('scrollbar-is-active');
            $('.item-cart-scrollbar').slimScroll({ destroy: true });
            var checkoutLeftH = $('.pt_checkout .checkout_cont').height(),
                summaryH = $('.pt_checkout .summary-section').height(),
                newsummaryH = $('.pt_checkout  .new-summery-cart').not('.mobile-view').height();

            var newHeightRight = summaryH + newsummaryH;
            if (newHeightRight >= checkoutLeftH) {
                var summaryHeight = checkoutLeftH - newsummaryH;
                var summaryHeightRightBottom = summaryHeight - 99;
                $('.pt_checkout .summary-section .slimScrollDiv').css({ 'height': summaryHeightRightBottom });
                $('.item-cart-scrollbar').addClass('scrollbar-active').css({ 'height': summaryHeightRightBottom });
                $('.item-cart-scrollbar').slimScroll({
                    railVisible: true,
                    color: '#a0a0a0',
                    alwaysVisible: true
                });
                $('.pt_checkout  .ajax-cartsummary').find('.summary-carttable').addClass('scrollbar-is-active');
            } else {
                $('.item-cart-scrollbar').css({ 'height': 'auto' });
                $('.pt_checkout .summary-section .slimScrollDiv').css({ 'height': 'auto', 'overflow-y': 'auto' });
                $('.item-cart-scrollbar').removeClass('scrollbar-active');
                $('.pt_checkout  .ajax-cartsummary').find('.summary-carttable').removeClass('scrollbar-is-active');
                $('.item-cart-scrollbar').slimScroll({ destroy: true });
            }
        }
    }
};
module.exports = uievents;

},{"./util":63}],63:[function(require,module,exports){
'use strict';

var _ = require('lodash');
var cardregex = {
    mastercard: /^5[1-5][0-9]{2,14}$/,
    visa: /^4[0-9]{3,15}$/,
    amex: /^3[47]([0-9]{2,13})$/,
    discover: /^6(?:011[0-9]{0,12}|5[0-9]{2,14})$/
};
var util = {
    /**
     * @function
     * @description appends the parameter with the given name and value to the given url and returns the changed url
     * @param {String} url the url to which the parameter will be added
     * @param {String} name the name of the parameter
     * @param {String} value the value of the parameter
     */
    appendParamToURL: function appendParamToURL(url, name, value) {
        // quit if the param already exists
        if (url.indexOf(name + '=') !== -1) {
            return url;
        }
        var separator = url.indexOf('?') !== -1 ? '&' : '?';
        return url + separator + name + '=' + encodeURIComponent(value);
    },
    hiddenData: function hiddenData() {
        jQuery.each(jQuery('.hidden'), function () {
            var hiddenStr = jQuery(this).html();

            if (hiddenStr === '') {
                return;
            }

            // see if its a json string
            if (jQuery(this).hasClass('json')) {
                // try to parse it as a json
                try {
                    hiddenStr = window.eval('(' + hiddenStr + ')');
                } catch (e) {
                    // Do Nothing
                }
            }

            jQuery(this).prev().data('data', hiddenStr);

            jQuery(this).remove();
        });
    },

    /**** Read cookieee  *****/
    readCookie: function readCookie(name) {
        var nameEQ = name + '=';
        var ca = document.cookie.split(';');
        for (var i = 0; i < ca.length; i++) {
            var c = ca[i];
            while (c.charAt(0) == ' ') {
                c = c.substring(1, c.length);
            }if (c.indexOf(nameEQ) == 0) {
                return c.substring(nameEQ.length, c.length);
            }
        }
        return null;
    },

    /***  Read cookie ***/
    /**
     * @function
     * @description appends the parameters to the given url and returns the changed url
     * @param {String} url the url to which the parameters will be added
     * @param {Object} params
     */
    appendParamsToUrl: function appendParamsToUrl(url, params) {
        var _url = url;
        _.each(params, function (value, name) {
            _url = this.appendParamToURL(_url, name, value);
        }.bind(this));
        return _url;
    },

    /**
     * @function
     * @description remove the parameter and its value from the given url and returns the changed url
     * @param {String} url the url from which the parameter will be removed
     * @param {String} name the name of parameter that will be removed from url
     */
    removeParamFromURL: function removeParamFromURL(url, name) {
        if (url.indexOf('?') === -1 || url.indexOf(name + '=') === -1) {
            return url;
        }
        var hash;
        var params;
        var domain = url.split('?')[0];
        var paramUrl = url.split('?')[1];
        var newParams = [];
        // if there is a hash at the end, store the hash
        if (paramUrl.indexOf('#') > -1) {
            hash = paramUrl.split('#')[1] || '';
            paramUrl = paramUrl.split('#')[0];
        }
        params = paramUrl.split('&');
        for (var i = 0; i < params.length; i++) {
            // put back param to newParams array if it is not the one to be removed
            if (params[i].split('=')[0] !== name) {
                newParams.push(params[i]);
            }
        }
        return domain + '?' + newParams.join('&') + (hash ? '#' + hash : '');
    },

    /**
     * @function
     * @description extract the query string from URL
     * @param {String} url the url to extra query string from
     **/
    getQueryString: function getQueryString(url) {
        var qs;
        if (!_.isString(url)) {
            return;
        }
        var a = document.createElement('a');
        a.href = url;
        if (a.search) {
            qs = a.search.substr(1); // remove the leading ?
        }
        return qs;
    },
    /**
     * @function
     * @description
     * @param {String}
     * @param {String}
     */
    elementInViewport: function elementInViewport(el, offsetToTop) {
        var top = el.offsetTop,
            left = el.offsetLeft,
            width = el.offsetWidth,
            height = el.offsetHeight;

        while (el.offsetParent) {
            el = el.offsetParent;
            top += el.offsetTop;
            left += el.offsetLeft;
        }

        if (typeof offsetToTop !== 'undefined') {
            top -= offsetToTop;
        }

        if (window.pageXOffset !== null) {
            return top < window.pageYOffset + window.innerHeight && left < window.pageXOffset + window.innerWidth && top + height > window.pageYOffset && left + width > window.pageXOffset;
        }

        if (document.compatMode === 'CSS1Compat') {
            return top < window.document.documentElement.scrollTop + window.document.documentElement.clientHeight && left < window.document.documentElement.scrollLeft + window.document.documentElement.clientWidth && top + height > window.document.documentElement.scrollTop && left + width > window.document.documentElement.scrollLeft;
        }
    },

    /**
     * @function
     * @description Appends the parameter 'format=ajax' to a given path
     * @param {String} path the relative path
     */
    ajaxUrl: function ajaxUrl(path) {
        return this.appendParamToURL(path, 'format', 'ajax');
    },

    /**
     * @function
     * @description
     * @param {String} url
     */
    toAbsoluteUrl: function toAbsoluteUrl(url) {
        if (url.indexOf('http') !== 0 && url.charAt(0) !== '/') {
            url = '/' + url;
        }
        return url;
    },
    /**
     * @function
     * @description Loads css dynamically from given urls
     * @param {Array} urls Array of urls from which css will be dynamically loaded.
     */
    loadDynamicCss: function loadDynamicCss(urls) {
        var i,
            len = urls.length;
        for (i = 0; i < len; i++) {
            this.loadedCssFiles.push(this.loadCssFile(urls[i]));
        }
    },

    /**
     * @function
     * @description Loads css file dynamically from given url
     * @param {String} url The url from which css file will be dynamically loaded.
     */
    loadCssFile: function loadCssFile(url) {
        return $('<link/>').appendTo($('head')).attr({
            type: 'text/css',
            rel: 'stylesheet'
        }).attr('href', url); // for i.e. <9, href must be added after link has been appended to head
    },
    // array to keep track of the dynamically loaded CSS files
    loadedCssFiles: [],

    /**
     * @function
     * @description Removes all css files which were dynamically loaded
     */
    clearDynamicCss: function clearDynamicCss() {
        var i = this.loadedCssFiles.length;
        while (0 > i--) {
            $(this.loadedCssFiles[i]).remove();
        }
        this.loadedCssFiles = [];
    },
    /**
     * @function
     * @description Extracts all parameters from a given query string into an object
     * @param {String} qs The query string from which the parameters will be extracted
     */
    getQueryStringParams: function getQueryStringParams(qs) {
        if (!qs || qs.length === 0) {
            return {};
        }
        var params = {},
            unescapedQS = decodeURIComponent(qs);
        // Use the String::replace method to iterate over each
        // name-value pair in the string.
        unescapedQS.replace(new RegExp('([^?=&]+)(=([^&]*))?', 'g'), function ($0, $1, $2, $3) {
            params[$1] = $3;
        });
        return params;
    },

    fillAddressFields: function fillAddressFields(address, $form) {
        for (var field in address) {
            if (field === 'ID' || field === 'UUID' || field === 'key') {
                continue;
            }
            // if the key in address object ends with 'Code', remove that suffix
            // keys that ends with 'Code' are postalCode, stateCode and countryCode
            $form.find('[name$="' + field.replace('Code', '') + '"]').val(address[field]);
            // update the state fields
            if (field === 'countryCode') {
                $form.find('[name$="country"]').trigger('change');
                // retrigger state selection after country has changed
                // this results in duplication of the state code, but is a necessary evil
                // for now because sometimes countryCode comes after stateCode
                $form.find('[name$="state"]').val(address.stateCode);
            }
        }
    },
    /**
     * @function
     * @description Updates the number of the remaining character
     * based on the character limit in a text area
     */
    limitCharacters: function limitCharacters() {
        $('form').find('textarea[data-character-limit]').each(function () {
            var characterLimit = $(this).data('character-limit');
            var charCountHtml = String.format(Resources.CHAR_LIMIT_MSG, '<span class="char-remain-count">' + characterLimit + '</span>', '<span class="char-allowed-count">' + characterLimit + '</span>');
            var charCountContainer = $(this).next('div.char-count');
            if (charCountContainer.length === 0) {
                charCountContainer = $('<div class="char-count"/>').insertAfter($(this));
            }
            charCountContainer.html(charCountHtml);
            // trigger the keydown event so that any existing character data is calculated
            $(this).change();
        });
    },
    trimPrefix: function trimPrefix(str, prefix) {
        return str.substring(prefix.length);
    },
    cardtype: {
        init: function init() {
            if ($('#paymentmethods').find('.creditCard-number').length > 0) {
                $('#paymentmethods').find('.creditCard-number').bind('keypress keyup', function () {
                    if ($(this).val().length) {
                        $('.carderror.error').hide();
                    }
                    if ($(this).val().length < 4) {
                        $('.cardtypeimg > div').hide();
                    }
                });
                $('.creditCard-number, .creditcard_cvn').on('keypress', function (e) {
                    e = e ? e : window.event;
                    var charCode = e.which ? e.which : e.keyCode;
                    if (charCode > 31 && (charCode < 48 || charCode > 57)) {
                        return false;
                    }
                    return true;
                });
                $('#paymentmethods').find('.creditCard-number').blur(function () {
                    var val = $.trim($(this).val());
                    //var regex = /^[a-zA-Z]+$/;
                    var errorspan = $(this).closest('.formfield').find('span.carderror');
                    if (!val) {
                        errorspan.hide();
                        return;
                    }
                    if (val.length) {
                        if ($('.carderror.error').length == 0) {
                            $(this).closest('.formfield').append('<span class="carderror error">Not a valid Credit Card Number, please try again.</span>');
                        }
                        $('.carderror.error').hide();
                        var cardTypeval = util.validatecardtype(val);
                        if (cardTypeval != 'Error') {
                            errorspan.hide();
                            $('#paymentmethods').find('select[name$="_paymentMethods_creditCard_type"]').val(cardTypeval);
                            $('.cardtypeimg > div').hide();
                            $('.cardtypeimg > div.' + cardTypeval).show();

                            if (cardTypeval == 'MasterCard' || cardTypeval == 'Visa' || cardTypeval == 'Discover') {
                                if (val.length < 16) {
                                    $('.carderror.error').show();
                                    $(this).addClass('errorclient');
                                }
                            } else if (cardTypeval == 'Amex') {
                                if (val.length < 15) {
                                    $('.carderror.error').show();
                                    $(this).addClass('errorclient');
                                }
                            } else {
                                $('.carderror.error').hide();
                                $(this).removeClass('errorclient');
                            }
                        } else {
                            if ($(this).val().indexOf('*') == -1) {
                                if (val.length < 16) {
                                    $('.carderror.error').show();
                                    $(this).addClass('errorclient');
                                    $('.cardtypeimg > div').hide();
                                }
                            }
                        }
                    }
                    if ($('#paymentmethods').find('.creditCard-number').val().length < 4) {
                        $('.cardtypeimg > div').hide();
                    }
                });
            }
        }

    },
    validatecardtype: function validatecardtype(val) {
        var result = ' ',
            carNo = val;

        if (cardregex.mastercard.test(carNo)) {
            // first check for MasterCard
            result = 'MasterCard';
        } else if (cardregex.visa.test(carNo)) {
            // then check for Visa
            result = 'Visa';
        } else if (cardregex.amex.test(carNo)) {
            // then check for AmEx
            result = 'Amex';
        } else if (cardregex.discover.test(carNo)) {
            result = 'Discover';
        } else {
            result = 'Error';
        }
        return result;
    },
    /**
     * @function
     * @description Binds the onclick-event to a delete button on a given container,
     * which opens a confirmation box with a given message
     * @param {String} container The name of element to which the function will be bind
     * @param {String} message The message the will be shown upon a click
     */
    setDeleteConfirmation: function setDeleteConfirmation(container, message) {
        $(container).on('click', '.delete', function () {
            return window.confirm(message);
        });
    },
    /**
     * @function
     * @description Scrolls a browser window to a given x point
     * @param {String} The x coordinate
     */
    scrollBrowser: function scrollBrowser(xLocation) {
        $('html, body').animate({
            scrollTop: xLocation
        }, 500);
    },

    isMobile: function isMobile() {
        var mobileAgentHash = ['mobile', 'tablet', 'phone', 'ipad', 'ipod', 'android', 'blackberry', 'windows ce', 'opera mini', 'palm'];
        var idx = 0;
        var isMobile = false;
        var userAgent = navigator.userAgent.toLowerCase();

        while (mobileAgentHash[idx] && !isMobile) {
            isMobile = userAgent.indexOf(mobileAgentHash[idx]) >= 0;
            idx++;
        }
        return isMobile;
    }
};

module.exports = util;

},{"lodash":5}],64:[function(require,module,exports){
'use strict';

var naPhone = /^\(?([2-9][0-8][0-9])\)?[\-\. ]?([2-9][0-9]{2})[\-\. ]?([0-9]{4})(\s*x[0-9]+)?$/;
var regex = {
    phone: {
        us: naPhone,
        ca: naPhone,
        fr: /^0[1-6]{1}(([0-9]{2}){4})|((\s[0-9]{2}){4})|((-[0-9]{2}){4})$/,
        it: /^(([0-9]{2,4})([-\s\/]{0,1})([0-9]{4,8}))?$/,
        jp: /^(0\d{1,4}- ?)?\d{1,4}-\d{4}$/,
        cn: /.*/,
        gb: /^((\(?0\d{4}\)?\s?\d{3}\s?\d{3})|(\(?0\d{3}\)?\s?\d{3}\s?\d{4})|(\(?0\d{2}\)?\s?\d{4}\s?\d{4}))(\s?\#(\d{4}|\d{3}))?$/
    },
    postal: {
        us: /^\d{5}(-\d{4})?$/,
        ca: /^[ABCEGHJKLMNPRSTVXY]{1}\d{1}[A-Z]{1} *\d{1}[A-Z]{1}\d{1}$/,
        fr: /^(F-)?((2[A|B])|[0-9]{2})[0-9]{3}$/,
        it: /^([0-9]){5}$/,
        jp: /^([0-9]){3}[-]([0-9]){4}$/,
        cn: /^([0-9]){6}$/,
        gb: /^([A-PR-UWYZ0-9][A-HK-Y0-9][AEHMNPRTVXY0-9]?[ABEHMNPRVWXY0-9]? {1,2}[0-9][ABD-HJLN-UW-Z]{2}|GIR 0AA)$/
    },
    notCC: /^(?!(([0-9 -]){13,19})).*$/
};
// global form validator settings
var settings = {
    errorClass: 'errorclient',
    errorElement: 'span',
    focusInvalid: true,
    onkeyup: function onkeyup(element) {
        if (!this.checkable(element)) {
            $(element).addClass('stopKeypress');
            if ($(element).val().length > 0) {
                this.element(element);
            }
            if ($('.account-logs').length > 0 || $('.new-register').length > 0 || $('.wish-logs').length > 0 || $('.forgot_old').length > 0 || $('.createan-account').length > 0 || $('.promo-sec').length > 0 || $('.headercustomerinfo').length > 0 || $('.ui-login').length > 0 || $('.vipInsider-dlg.ui-dialog ').length > 0 || $('.passwordreset').length > 0) {
                $(element).closest('.formfield').find('.label span').removeClass('inputlabel');
                $('.promo-sec').find('.couponinput').removeClass('inputlabel');
            }
        }
    },
    //focusCleanup: false,
    //onfocusout: false,

    onfocusout: function onfocusout(element) {
        if (!this.checkable(element)) {
            $(element).removeClass('stopKeypress');
            this.element(element);

            if ($('.account-logs').length > 0 || $('.new-register').length > 0 || $('.wish-logs').length > 0 || $('.forgot_old').length > 0 || $('.passwordreset').length > 0 || $('.vipInsider-dlg.ui-dialog ').length > 0 || $('.promo-sec').length > 0 || $('.pt_checkout').length > 0) {
                if ($(element).hasClass('errorclient')) {
                    $(element).closest('.form-row').addClass('inputlabel');
                    $(element).closest('.formfield').addClass('inputlabel');
                    $(element).closest('.formfield').find('.label span').addClass('inputlabel');
                    $(element).closest('.form-row').find('.label span').addClass('inputlabel');
                    $(element).closest('.formfield').find('.logerror , .existing_register').hide();
                } else {
                    $(element).closest('.form-row').removeClass('inputlabel');
                    $(element).closest('.formfield').removeClass('inputlabel');
                    $(element).closest('.form-row').find('.label span').removeClass('inputlabel');
                    $(element).closest('.formfield').find('.label span').removeClass('inputlabel');
                    $(element).closest('.formfield').find('.logerror , .existing_register').hide();
                }
            }
            /*** if($(element).closest('.ui-dialog').hasClass('vipInsider-dlg')) {
            if($(element).hasClass("errorclient")) {
            if($(element).closest(".formfield").find(".label span.errorclient").is(':visible')){
            $(element).closest(".form-row").addClass("erroroccured");
            }else {
            $(element).closest(".form-row").removeClass("erroroccured");
            }
            }
            } ***/
        }
    },
    errorPlacement: function errorPlacement(error, element) {
        if ($(element).hasClass('errorclient')) {
            $(element).closest('.form-row').addClass('inputlabel');
            $(element).closest('.formfield').addClass('inputlabel');
            $(element).closest('.formfield').find('.label span').addClass('inputlabel');
            $(element).closest('.form-row').find('.label span').addClass('inputlabel');
            $(element).closest('.formfield').find('.logerror , .existing_register').hide();
        } else {
            $(element).closest('.form-row').removeClass('inputlabel');
            $(element).closest('.formfield').removeClass('inputlabel');
            $(element).closest('.form-row').find('.label span').removeClass('inputlabel');
            $(element).closest('.formfield').find('.label span').removeClass('inputlabel');
            $(element).closest('.formfield').find('.logerror , .existing_register').hide();
        }
        if ($(element).hasClass('emailfooter')) {
            $(element).closest('#emailfooter').before(error);
        } else if ($(element).closest('.ui-dialog').hasClass('vipInsider-dlg')) {
            $(element).closest('.formfield').find('.label').append(error);
            if ($(element).closest('.formfield').find('.label span.errorclient').is(':visible') && !$(element).closest('.formfield').find('.label').hasClass('erroroccured')) {
                $(element).closest('.formfield').find('.label').addClass('erroroccured');
            } else {
                $(element).closest('.formfield').find('.label').removeClass('erroroccured');
            }
        } else {
            if ($('.passwordreset').find('button.send.clickedButton').length > 0) {
                $(element).after(error);
                $('.passwordreset').find('button.send.clickedButton').removeClass('clickedButton');
            } else {
                if ($('.header-forgot-pwd.accountcontent').css('display') == 'none') {
                    $(element).after(error);
                } else if ($('.header-forgot-pwd.accountcontent').css('display') == 'block') {
                    // Do Nothing
                } else {
                    if ($(element).hasClass('custom-select-wrap')) {
                        $(element).closest('.field-wrapper').after(error);
                    } else {
                        $(element).after(error);
                    }
                }
            }
        }
    }
};

//firstname validation
var ctrl = false;
var selectText = false;
$('input[attributemaxlength],textarea[attributemaxlength]').on('keydown', function (e) {
    //var j;
    if ($(this).hasClass('firstname')) {
        //j = document.getElementById('dwfrm_profile_customer_firstname');
    } else if ($(this).hasClass('lastname')) {
        //j = document.getElementById('dwfrm_profile_customer_lastname');
    }
    if (e.keyCode == 17) {
        ctrl = true;
    }

    if ($(this).hasClass('vip-textarea') && e.keyCode != 8 && e.keyCode != 46 && !selectText || (e.keyCode >= 48 && e.keyCode <= 90 || e.keyCode >= 96 && e.keyCode <= 105) && !ctrl && !selectText) {
        var currObj = $(this);
        var maxchars = $(this).attr('maxlength');
        var tlength = $(this).val().length;
        if (tlength >= maxchars) {
            $(this).val($(this).val().substring(0, maxchars));
            if ($(currObj).closest('.field-wrapper').find('.max-length-error').length == 0 && $(currObj).closest('.formfield').find('.max-length-error').length == 0) {
                var error = '<div class=\'max-length-error\'> This field is limited to 30 characters.</div>';
                if ($(currObj).hasClass('vip-textarea')) {
                    error = '<div class=\'max-length-error\'> -This field is limited to 1200 characters.</div>';
                }
                if ($(currObj).hasClass('vip-textarea1')) {
                    error = '<div class=\'max-length-error\'> -This field is limited to 30 characters.</div>';
                } else if ($(currObj).closest('form').hasClass('vipfieldstaff')) {
                    error = '<div class=\'max-length-error\'> -This field is limited to 30 characters.</div>';
                }

                if ($(this).closest('form').hasClass('vipfieldstaff') > 0) {
                    $(this).closest('.formfield').find('.label').append(error);
                } else {
                    $(this).closest('.field-wrapper').append(error);
                }

                $(this).closest('.formfield').find('.label span').addClass('countlabelerror');
                $(this).addClass('counterror');
            } else if (e.keyCode != 9) {
                if ($(this).closest('form').hasClass('vipfieldstaff') > 0) {
                    $(this).closest('.formfield').find('.label').find('.max-length-error').removeClass('hide');
                } else {
                    $(this).closest('.field-wrapper').find('.max-length-error').removeClass('hide');
                }
                $(this).addClass('counterror');
                $(this).closest('.formfield').find('.label span').addClass('countlabelerror');
                return false;
            }
        } else {
            $(this).removeClass('counterror');
            $('.max-length-error').remove();
            $(this).closest('.formfield').find('.label span').removeClass('countlabelerror');
        }
    } else if (e.keyCode >= 48 && e.keyCode <= 57 || e.keyCode >= 96 && e.keyCode <= 105) {
        if ($(this).hasClass('vipinsideremail')) {
            return true;
        } else {
            return false;
        }
    } else {
        $(this).closest('.formfield').find('.max-length-error').remove();
        $(this).removeClass('counterror');
        $(this).closest('.formfield').find('.label span').removeClass('countlabelerror');
        selectText = false;
    }
}).on('keyup', function () {
    ctrl = false;
    //var currObj = $(this);
    var maxchars = $(this).attr('maxlength');
    var tlength = $(this).val().length;
    if (tlength < maxchars) {
        $(this).removeClass('counterror');
        $('.max-length-error').remove();
        $(this).closest('.formfield').find('.label span').removeClass('countlabelerror');
    }
}).on('select', function () {
    selectText = true;
    $(this).removeClass('counterror');
    $(this).closest('.formfield').find('.label span').removeClass('countlabelerror');
});
$('input[attributemaxlength],textarea[attributemaxlength]').on('focusout', function () {
    $(this).removeClass('counterror');
    $(this).closest('.formfield').find('.label span').removeClass('countlabelerror');
    $(this).closest('.field-wrapper').find('.max-length-error').remove();
    $(this).closest('.formfield').find('.max-length-error').remove();
    //$(this).closest('.formfield').find('.label span').removeClass('inputlabel');
});
if ($('.loginfailedclass:visible').length > 0) {
    $('.registration .formfield_email').find('.labeltext').removeClass('inputlabel');
    $('.registration .formfield_email').find('.requiredindicator').removeClass('inputlabel');
    $('.registration .formfield_email').find('.requiredindicator').removeClass('inputlabel');
    $('.registration .formfield_email').find('.existing_register').hide();
}

//$("body").on('change input',".accountemail , .guestemail, .emailCMrapala, .guestemailcon, .vipinsideremail, .emailfooter, .accountemailconf, .accountEmailConfirmation, .resetemail, .accemailcon, .loggedemail", function (e) {
//	//$(this).val(this.value.replace(/[\s]/g, ''));
//
//});
$('.accountemail , .guestemail, .emailCMrapala, .guestemailcon, .vipinsideremail, .emailfooter, .accountemailconf, .accountEmailConfirmation, .resetemail, .accemailcon, .loggedemail').on({
    keydown: function keydown(e) {
        if (e.which === 32) {
            return false;
        }
    },
    change: function change() {
        this.value = this.value.replace(/\s/g, '');
    }
});
//override default required field message
$.validator.messages.required = function ($1, ele) {
    var requiredText = $(ele).closest('.form-row').attr('data-required-text');
    return requiredText || '';
};

/**
 * Add phone validation method to $ validation plugin. Text
 * fields must have 'phone' css class to be validated as phone
 * phoneUS is copied from
 * http://docs.$.com/Plugins/Validation/CustomMethods/phoneUS
 */
$.validator.addMethod('phone', function (phoneNumber, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        // find out the country code
        var data = $(element).data('data');
        var country = data && data.country && data.country != '' ? data.country : 'US'; // default to US phone
        // validation

        // preserve this instance
        var that = this;

        // country specific phone validation handlers
        //var phoneUS, phoneCA;

        var phone = function phone() {
            phoneNumber = phoneNumber.replace(/\s+/g, '');
            return that.optional(element) || phoneNumber.length > 9 && phoneNumber.match(/^(\d{10}|\d{3}(-\d{3})(-\d{4})$|^\d{3}(\s\d{3})?(\s\d{4})?)$/);
        };
        //phoneUS = phoneCA;
        //window.eval('var phoneHandler = (typeof phone' + country + ' != \'undefined\') ? phone' + country + ': null;');

        // call the country specific phone validation
        // handler
        return country === 'US' || country === 'CA' ? phone() : true;
    }
}, Resources.INVALID_PHONE);

$.validator.addMethod('phoneCDUS', function (phoneNumber, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        phoneNumber = phoneNumber.replace(/\s+/g, '');
        return this.optional(element) || phoneNumber.length > 9 && phoneNumber.match(/^\(?[\d]{3}\)?[\s-]?[\d]{3}[\s-]?[\d]{4}$/);
    }
}, 'Please specify a valid phone number');

$.validator.addMethod('phone', function (phoneNumber, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        phoneNumber = phoneNumber.replace(/\s+/g, '');
        return this.optional(element) || phoneNumber.length > 9 && phoneNumber.match(/^\(?[\d]{3}\)?[\s-]?[\d]{3}[\s-]?[\d]{4}$/);
    }
}, 'Please specify a valid phone number');

$.validator.addMethod('phoneUK', function (phoneNumber, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        return this.optional(element) || phoneNumber.length > 9 && phoneNumber.match(/^(\(?(0|\+44)[1-9]{1}\d{1,4}?\)?\s?\d{3,4}\s?\d{3,4})$/);
    }
}, 'Please specify a valid phone number');

$.validator.addMethod('postal', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        if (value == '') {
            return true;
        }
        return (/^\d{5}((-\d{4})|(\d{4}))?$/.test(value)
        );
    }
}, 'Please enter your 5 or 9 digit Zip Code with or without a hyphen');

$.validator.addMethod('zipCodeCustom', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        if (value == '') {
            return true;
        }
        return (/^\d{5}((-\d{4})|(\d{4}))?$/.test(value)
        );
    }
}, '- Please enter a valid ZipCode');

$.validator.addMethod('phoneCustom', function (phoneNumber, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        phoneNumber = phoneNumber.replace(/\s+/g, '');
        return this.optional(element) || phoneNumber.length > 9 && phoneNumber.match(/^\(?[\d]{3}\)?[\s-]?[\d]{3}[\s-]?[\d]{4}$/);
    }
}, '- Please specify a valid phone number');

$.validator.addMethod('emailCM', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        if (value == '') {
            return true;
        }
        return (/^[\w-\.]{1,}\@([\da-zA-Z-]{1,}\.){1,}[\da-zA-Z-]{2,4}$/.test(value)
        );
    }
}, 'Please specify a valid Email Id');

var customErrormsg = '';
var customError = function customError() {
    return customErrormsg;
};

$.validator.addMethod('emailCMrapala', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        var vIndex = value.length;
        var fchar = value.substring(0, 1);
        var lchar = value.substring(vIndex - 1);
        if (value.indexOf('@') != -1) {
            var splitval = value.split('@');
            fchar = splitval[0].substring(0, 1);
            lchar = splitval[0].substring(splitval[0].length - 1);
        }
        var fcharS = /^[a-zA-Z0-9]$/.test(fchar);
        var lcharS = /^[a-zA-Z0-9]$/.test(lchar);
        var emailCheck = /^[-0-9a-zA-Z.-_]+@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(value);
        if (fcharS == false || lcharS == false) {
            customErrormsg = '-Something doesn\'t look right, please try again.';
            return false;
        } else if (emailCheck == false) {
            customErrormsg = 'Oops - the email entered is not in a valid format.';
            return false;
        } else {
            return true;
        }
    }
}, customError);

$.validator.addMethod('creditcard_name', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        if (value == '') {
            return true;
        }
        return (/^[a-zA-Z ]+$/.test(value)
        );
    }
}, 'Only letters are valid for this field');

$.validator.addMethod('creditcard_cvn', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {

        var cardtype = $('.select-creditCard-type').val();
        var cvvLength = 3;
        if (value == '') {
            return true;
        }
        if (cardtype == 'Amex') {
            cvvLength = 4;
        }
        if (value.length != cvvLength) {
            $('.errorKeypress').remove();
            return false;
        } else {
            return true;
        }
    }
}, 'Please enter a valid Security Code for the Credit Card entered');

$.validator.addMethod('guestemailcon', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else if (!$('.checkoutasguestbutton').is(':visible')) {
        var vIndex = value.length;
        var fchar = value.substring(0, 1);
        var lchar = value.substring(vIndex - 1);
        if (value.indexOf('@') != -1) {
            var splitval = value.split('@');
            fchar = splitval[0].substring(0, 1);
            lchar = splitval[0].substring(splitval[0].length - 1);
        }
        var fcharS = /^[a-zA-Z0-9]$/.test(fchar);
        var lcharS = /^[a-zA-Z0-9]$/.test(lchar);
        var emailCheck = /^[-0-9a-zA-Z.-_]+@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(value);
        var emailVal = $(element).closest('.formfield').prev('.formfield').find('.guestemail').val();
        if (fcharS == false || lcharS == false) {
            customErrormsg = 'Something doesn\'t look right, please try again.';
            return false;
        } else if (emailCheck == false) {
            customErrormsg = 'Oops - the email entered is not in a valid format.';
            return false;
        } else if (emailVal != value) {
            customErrormsg = 'Please make sure emails match.';
            return false;
        } else {
            return true;
        }
    }
}, customError);

$.validator.addMethod('guestemail', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else if (!$('.checkoutasguestbutton').is(':visible')) {
        var vIndex = value.length;
        var fchar = value.substring(0, 1);
        var lchar = value.substring(vIndex - 1);
        if (value.indexOf('@') != -1) {
            var splitval = value.split('@');
            fchar = splitval[0].substring(0, 1);
            lchar = splitval[0].substring(splitval[0].length - 1);
        }

        var fcharS = /^[a-zA-Z0-9]$/.test(fchar);
        var lcharS = /^[a-zA-Z0-9]$/.test(lchar);
        var emailCheck = /^[-0-9a-zA-Z.-_]+@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(value);
        if (fcharS == false || lcharS == false) {
            customErrormsg = 'Something doesn\'t look right, please try again.';
            return false;
        } else if (emailCheck == false) {
            customErrormsg = 'Oops - the email entered is not in a valid format.';
            return false;
        } else {
            return true;
        }
    }
}, customError);

$.validator.addMethod('loggedemail', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else if (!$('.signintomyaccountbutton').is(':visible')) {
        var vIndex = value.length;
        var fchar = value.substring(0, 1);
        var lchar = value.substring(vIndex - 1);
        if (value.indexOf('@') != -1) {
            var splitval = value.split('@');
            fchar = splitval[0].substring(0, 1);
            lchar = splitval[0].substring(splitval[0].length - 1);
        }
        var fcharS = /^[a-zA-Z0-9]$/.test(fchar);
        var lcharS = /^[a-zA-Z0-9]$/.test(lchar);
        var emailCheck = /^[-0-9a-zA-Z.-_]+@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(value);
        //var emailVal = $(element).closest('.formfield').prev('.formfield').find('.guestemail').val();
        if (fcharS == false || lcharS == false) {
            customErrormsg = 'Something doesn\'t look right, please try again.';
            return false;
        } else if (emailCheck == false) {
            customErrormsg = 'Oops - the email entered is not in a valid format.';
            return false;
        } else {
            return true;
        }
    }
}, customError);

$.validator.addMethod('accemailcon', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else if (!$('.createanaccountbutton').is(':visible')) {
        var vIndex = value.length;
        var fchar = value.substring(0, 1);
        var lchar = value.substring(vIndex - 1);
        if (value.indexOf('@') != -1) {
            var splitval = value.split('@');
            fchar = splitval[0].substring(0, 1);
            lchar = splitval[0].substring(splitval[0].length - 1);
        }
        var fcharS = /^[a-zA-Z0-9]$/.test(fchar);
        var lcharS = /^[a-zA-Z0-9]$/.test(lchar);
        var emailCheck = /^[-0-9a-zA-Z.-_]+@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(value);
        var emailVal = $(element).closest('.formfield').prev('.formfield').find('.accemail').val();
        if (fcharS == false || lcharS == false) {
            customErrormsg = 'Something doesn\'t look right, please try again.';
            return false;
        } else if (emailCheck == false) {
            customErrormsg = 'Oops - the email entered is not in a valid format.';
            return false;
        } else if (emailVal != value) {
            customErrormsg = 'Please make sure emails match.';
            return false;
        } else {
            return true;
        }
    }
}, customError);

$.validator.addMethod('a-zA-Z0-9', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else if (!$('.createanaccountbutton').is(':visible')) {
        var vIndex = value.length;
        var fchar = value.substring(0, 1);
        var lchar = value.substring(vIndex - 1);
        if (value.indexOf('@') != -1) {
            var splitval = value.split('@');
            fchar = splitval[0].substring(0, 1);
            lchar = splitval[0].substring(splitval[0].length - 1);
        }

        var fcharS = /^[a-zA-Z]$/.test(fchar);
        var lcharS = /^[a-zA-Z0-9]$/.test(lchar);
        var emailCheck = /^[-0-9a-zA-Z.-_]+@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(value);
        //var emailVal = $(element).closest('.formfield').prev('.formfield').find('.email').val();

        if (fcharS == false || lcharS == false) {
            customErrormsg = 'Something doesn\'t look right, please try again.';
            return false;
        } else if (emailCheck == false) {
            customErrormsg = 'Oops - the email entered is not in a valid format.';
            return false;
        } else {
            return true;
        }
    }
}, customError);

$.validator.addMethod('cm_password', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else if (!$('.createanaccountbutton').is(':visible') && $(element).hasClass('required')) {
        var passwordVal = $('.c_password').val();
        if ($(element).closest('form').length > 0 && $(element).closest('form').attr('id') == 'RegistrationForm') {
            passwordVal = $(element).closest('form').find('.c_password').val();
        }

        if (value.length < 5) {
            customErrormsg = 'Passwords must contain a minimum of 5 characters and are CaSe SeNsItIvE.';
            return false;
        } else if (passwordVal != value) {
            customErrormsg = 'Oops - your passwords do not match.';
            return false;
        } else {
            return true;
        }
    } else {
        return true;
    }
}, customError);

$.validator.addMethod('confirm_password', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else if ($(element).hasClass('required')) {
        var passwordVal = $(element).closest('form').find('.c_password').val();
        if (value.length < 5) {
            customErrormsg = 'Passwords must contain a minimum of 5 characters and are CaSe SeNsItIvE.';
            return false;
        } else if (passwordVal != value) {
            customErrormsg = 'Oops - your passwords do not match.';
            return false;
        } else {
            return true;
        }
    } else {
        return true;
    }
}, customError);

$.validator.addMethod('c_password', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else if ($(element).hasClass('required') && value.length < 5) {
        customErrormsg = 'Passwords must contain a minimum of 5 characters and are CaSe SeNsItIvE.';
        return false;
    } else {
        return true;
    }
}, customError);

$.validator.addMethod('login_password', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else if ($(element).hasClass('required') && value.length < 5) {
        customErrormsg = 'Passwords must contain a minimum of 5 characters and are CaSe SeNsItIvE.';
        return false;
    } else {
        return true;
    }
}, customError);

$.validator.addMethod('resetemail', function (value, element) {
    var vIndex = value.length;
    var fchar = value.substring(0, 1);
    var lchar = value.substring(vIndex - 1);

    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        if (value.indexOf('@') != -1) {
            var splitval = value.split('@');
            fchar = splitval[0].substring(0, 1);
            lchar = splitval[0].substring(splitval[0].length - 1);
        }
        var fcharS = /^[a-zA-Z0-9]$/.test(fchar);
        var lcharS = /^[a-zA-Z0-9]$/.test(lchar);
        var emailCheck = /^[-0-9a-zA-Z.-_]+@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(value);
        if (fcharS == false || lcharS == false) {
            customErrormsg = 'Something doesn\'t look right, please try again.';
            return false;
        } else if (emailCheck == false) {
            customErrormsg = 'Oops - the email entered is not in a valid format.';

            return false;
        } else {
            return true;
        }
    }
}, customError);

$.validator.addMethod('accountemail', function (value, element) {
    var vIndex = value.length;
    var fchar = value.substring(0, 1);
    var lchar = value.substring(vIndex - 1);
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        if (value.indexOf('@') != -1) {
            var splitval = value.split('@');
            fchar = splitval[0].substring(0, 1);
            lchar = splitval[0].substring(splitval[0].length - 1);
        }
        var fcharS = /^[a-zA-Z0-9]$/.test(fchar);
        var lcharS = /^[a-zA-Z0-9]$/.test(lchar);
        var emailCheck = /^[-0-9a-zA-Z.-_]+@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(value);
        if (fcharS == false || lcharS == false) {
            customErrormsg = 'Something doesn\'t look right, please try again.';
            return false;
        } else if (emailCheck == false) {
            customErrormsg = 'Oops - the email entered is not in a valid format.';
            return false;
        } else {
            return true;
        }
    }
}, customError);

//email validation for vipinsider

$.validator.addMethod('vipinsideremail', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        var vIndex = value.length;
        var fchar = value.substring(0, 1);
        var lchar = value.substring(vIndex - 1);
        if (value.indexOf('@') != -1) {
            var splitval = value.split('@');
            fchar = splitval[0].substring(0, 1);
            lchar = splitval[0].substring(splitval[0].length - 1);
        }
        var fcharS = /^[a-zA-Z0-9]$/.test(fchar);
        var lcharS = /^[a-zA-Z0-9]$/.test(lchar);
        var emailCheck = /^[-0-9a-zA-Z.-_]+@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(value);
        if (fcharS == false || lcharS == false) {
            customErrormsg = '-Something doesn\'t look right, please try again.';
            return false;
        } else if (emailCheck == false) {
            customErrormsg = 'Oops - the email entered is not in a valid format.';
            return false;
        } else {
            return true;
        }
    }
}, customError);

$.validator.addMethod('emailfooter', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        var vIndex = value.length;
        if (vIndex > 0) {
            var fchar = value.substring(0, 1);
            var lchar = value.substring(vIndex - 1);
            if (value.indexOf('@') != -1) {
                var splitval = value.split('@');
                fchar = splitval[0].substring(0, 1);
                lchar = splitval[0].substring(splitval[0].length - 1);
            }
            var fcharS = /^[a-zA-Z0-9]$/.test(fchar);
            var lcharS = /^[a-zA-Z0-9]$/.test(lchar);
            var emailCheck = /^[-0-9a-zA-Z.-_]+@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(value);
            if (fcharS == false || lcharS == false) {
                customErrormsg = 'Something doesn\'t look right, please try again.';
                return false;
            } else if (emailCheck == false) {
                customErrormsg = 'Oops - the email entered is not in a valid format.';
                return false;
            } else {
                return true;
            }
        } else {
            customErrormsg = 'Please enter your email address.';
        }
    }
}, customError);

$.validator.addMethod('accountemailconf', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        var vIndex = value.length;
        var fchar = value.substring(0, 1);
        var lchar = value.substring(vIndex - 1);
        if (value.indexOf('@') != -1) {
            var splitval = value.split('@');
            fchar = splitval[0].substring(0, 1);
            lchar = splitval[0].substring(splitval[0].length - 1);
        }
        var fcharS = /^[a-zA-Z0-9]$/.test(fchar);
        var lcharS = /^[a-zA-Z0-9]$/.test(lchar);
        var emailCheck = /^[-0-9a-zA-Z.-_]+@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(value);
        var emailVal = $('.accountemail').val();
        if ($(element).closest('form').length > 0 && $(element).closest('form').attr('id') == 'RegistrationForm') {
            emailVal = $(element).closest('form').find('.accountemail').val();
        }
        if (fcharS == false || lcharS == false) {
            customErrormsg = 'Something doesn\'t look right, please try again.';
            return false;
        } else if (emailCheck == false) {
            customErrormsg = 'Oops - the email entered is not in a valid format.';
            return false;
        } else if (emailVal != value) {
            customErrormsg = 'Please make sure emails match.';
            return false;
        } else {
            return true;
        }
    }
}, customError);

$.validator.addMethod('accountEmailConfirmation', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        var vIndex = value.length;
        var fchar = value.substring(0, 1);
        var lchar = value.substring(vIndex - 1);
        if (value.indexOf('@') != -1) {
            var splitval = value.split('@');
            fchar = splitval[0].substring(0, 1);
            lchar = splitval[0].substring(splitval[0].length - 1);
        }
        var fcharS = /^[a-zA-Z0-9]$/.test(fchar);
        var lcharS = /^[a-zA-Z0-9]$/.test(lchar);
        var emailCheck = /^[-0-9a-zA-Z.-_]+@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(value);
        var emailVal = $(element).closest('form').find('.accountemail').val();
        if (fcharS == false || lcharS == false) {
            customErrormsg = 'Something doesn\'t look right, please try again.';
            return false;
        } else if (emailCheck == false) {
            customErrormsg = 'Oops - the email entered is not in a valid format.';
            return false;
        } else if (emailVal != value) {
            customErrormsg = 'Please make sure emails match.';
            return false;
        } else {
            return true;
        }
    }
}, customError);
/**
 * Add positive number validation method to $ validation
 * plugin. Text fields must have 'positivenumber' css class to be
 * validated as positivenumber it validates a number and throws
 * error if it is below 0 or if it is not a number.
 */
$.validator.addMethod('positivenumber', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        if (value == '') {
            return true;
        }
        return (/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(value) && Number(value) >= 0
        );
    }
}, ''); // "" should be replaced with error message if needed

$.validator.addMethod('monthselect', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        var d = new Date(),
            mth = d.getMonth() + 1,
            yy = d.getFullYear();
        var selectedMth = $('.custom-select select[id$=\'_expiration_month\']').val();

        var selectedyear = $('.custom-select select[id$=\'_expiration_year\']').val();

        if (selectedyear) {
            selectedyear = selectedyear.replace(',', '');
            if (selectedyear <= yy && selectedMth < mth) {
                return false;
            } else {
                return true;
            }
        }
    }
}, '');

$.validator.addMethod('yearselect', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        var d = new Date(),
            mth = d.getMonth() + 1,
            yy = d.getFullYear();
        var selectedMth = $('.custom-select select[id$=\'_expiration_month\']').val();

        var selectedyear = $('.custom-select select[id$=\'_expiration_year\']').val();

        if (selectedyear) {
            selectedyear = selectedyear.replace(',', '');
            if (selectedyear <= yy && selectedMth < mth) {
                return false;
            } else {
                return true;
            }
        }
    }
}, '');

// register form validator for form elements
// except for those which are marked "suppress"
$.each($('form:not(.suppress)'), function () {
    $(this).validate(settings);
});
/**
 * @function
 * @description Validates a given phone number against the countries phone regex
 * @param {String} value The phone number which will be validated
 * @param {String} el The input field
 */
/*var validatePhone = function (value, el) {
    var country = $(el).closest('form').find('.country');
    if (country.length === 0 || country.val().length === 0 || !regex.phone[country.val().toLowerCase()]) {
        return true;
    }

    var rgx = regex.phone[country.val().toLowerCase()];
    var isOptional = this.optional(el);
    var isValid = rgx.test($.trim(value));

    return isOptional || isValid;
};*/

/**
 * @function
 * @description Validates that a credit card owner is not a Credit card number
 * @param {String} value The owner field which will be validated
 * @param {String} el The input field
 */
/*var validateOwner = function (value) {
    var isValid = regex.notCC.test($.trim(value));
    return isValid;
};
*/
/**
 * Add phone validation method to $ validation plugin.
 * Text fields must have 'phone' css class to be validated as phone
 */
/*$.validator.addMethod('phone', validatePhone, Resources.INVALID_PHONE);*/

/**
 * Add CCOwner validation method to $ validation plugin.
 * Text fields must have 'owner' css class to be validated as not a credit card
 */
/*$.validator.addMethod('owner', validateOwner, Resources.INVALID_OWNER);*/

/**
 * Add gift cert amount validation method to $ validation plugin.
 * Text fields must have 'gift-cert-amont' css class to be validated
 */
$.validator.addMethod('gift-cert-amount', function (value, el) {
    var isOptional = this.optional(el);
    var isValid = !isNaN(value) && parseFloat(value) >= 5 && parseFloat(value) <= 5000;
    return isOptional || isValid;
}, Resources.GIFT_CERT_AMOUNT_INVALID);

/**
 * Add positive number validation method to $ validation plugin.
 * Text fields must have 'positivenumber' css class to be validated as positivenumber
 */
/*$.validator.addMethod('positivenumber', function (value) {
    if ($.trim(value).length === 0) { return true; }
    return (!isNaN(value) && Number(value) >= 0);
}, ''); // '' should be replaced with error message if needed
*/
/*Start JIRA PREV-77 : Zip code validation is not happening with respect to the State/Country.*/
/*function validateZip(value, el) {
    var country = $(el).closest('form').find('.country');
    if (country.length === 0 || country.val().length === 0 || !regex.postal[country.val().toLowerCase()]) {
        return true;
    }
    var isOptional = this.optional(el);
    var isValid = regex.postal[country.val().toLowerCase()].test($.trim(value));
    return isOptional || isValid;
}
$.validator.addMethod('postal', validateZip, Resources.INVALID_ZIP);*/
/*End JIRA PREV-77*/

$.extend($.validator.messages, {
    //required: Resources.VALIDATE_REQUIRED,
    remote: Resources.VALIDATE_REMOTE,
    email: Resources.VALIDATE_EMAIL,
    url: Resources.VALIDATE_URL,
    date: Resources.VALIDATE_DATE,
    dateISO: Resources.VALIDATE_DATEISO,
    number: Resources.VALIDATE_NUMBER,
    digits: Resources.VALIDATE_DIGITS,
    creditcard: Resources.VALIDATE_CREDITCARD,
    equalTo: Resources.VALIDATE_EQUALTO,
    maxlength: $.validator.format(Resources.VALIDATE_MAXLENGTH),
    minlength: $.validator.format(Resources.VALIDATE_MINLENGTH),
    rangelength: $.validator.format(Resources.VALIDATE_RANGELENGTH),
    range: $.validator.format(Resources.VALIDATE_RANGE),
    max: $.validator.format(Resources.VALIDATE_MAX),
    min: $.validator.format(Resources.VALIDATE_MIN)
});

var validator = {
    regex: regex,
    settings: settings,
    init: function init() {
        var self = this;
        $('form:not(.suppress)').each(function () {
            $(this).validate(self.settings);
        });
        validator.phoneValidation();
        validator.zipFormatter();
    },
    initForm: function initForm(f) {
        $(f).validate(this.settings);
    },
    phoneValidation: function phoneValidation() {
        // phone validation
        var isFirefox = navigator.userAgent.indexOf('Firefox') > -1;
        var isExplorer = navigator.userAgent.indexOf('MSIE') > -1;
        if (isFirefox || isExplorer) {
            $('input[name$=\'phone\']').bind('keyup keydown', function (e) {
                if (e.shiftKey || e.ctrlKey || e.altKey) {
                    e.preventDefault();
                } else {
                    var key = e.keyCode;
                    if (!(key == 8 || key == 9 || key == 46 || key >= 35 && key <= 40 || key >= 48 && key <= 57 || key >= 96 && key <= 105)) {
                        e.preventDefault();
                    }
                }
                //var curchr = $(this).val().length;
                var curval = $(this).val();

                var curval1 = curval.replace(/[A-Za-z` ~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi, '');
                var str1 = curval1.substring(0, 3);
                var str2 = curval1.substring(3, 6);
                var str3 = curval1.substring(6, 10);

                if (curval.indexOf('(') == -1 && curval.indexOf(')') == -1 && curval1.length == 3) {
                    $(this).val('(' + str1 + ') ');
                } else if (curval.indexOf('(') != -1 && curval.indexOf(')') == -1 && curval1.length == 4) {
                    $(this).val('(' + str1 + ') ' + str2);
                } else if (curval.indexOf('(') != -1 && curval.indexOf(')') != -1 && curval.indexOf(' ') == -1 && curval1.length == 6) {
                    $(this).val('(' + str1 + ') ' + str2);
                } else if (curval.indexOf('(') != -1 && curval.indexOf(')') != -1 && curval.indexOf(' ') != -1 && curval.indexOf('-') == -1 && curval1.length > 6) {
                    $(this).val('(' + str1 + ') ' + str2 + '-' + str3);
                }
                if (curval.length == 0) {
                    $(this).val('');
                }
            });
        } else {
            $('body').on('change input keyup', 'input[name$=\'phone\']', function (e) {
                //var curchr = $(this).val().length;
                $(this).val(this.value.replace(/[^\d]/g, ''));
                var curval = $(this).val();

                var curval1 = curval;
                var str1 = curval1.substring(0, 3);
                var str2 = curval1.substring(3, 6);
                var str3 = curval1.substring(6, 10);
                var key = event.which || event.keyCode || event.charCode;

                if (key == 8 || e.shiftKey || e.ctrlKey || e.altKey) {
                    e.preventDefault();
                    if (curval1.length == 4 || curval1.length == 5 || curval1.length == 6) {
                        $(this).val('(' + str1 + ') ' + str2);
                    } else if (curval1.length > 6) {
                        $(this).val('(' + str1 + ') ' + str2 + '-' + str3);
                    }
                } else {
                    if (curval1.length == 3) {
                        $(this).val('(' + str1 + ') ');
                    } else if (curval1.length == 4 || curval1.length == 5 || curval1.length == 6) {
                        $(this).val('(' + str1 + ') ' + str2);
                    } else if (curval1.length > 6) {
                        $(this).val('(' + str1 + ') ' + str2 + '-' + str3);
                    }
                    if (curval.length == 0) {
                        $(this).val('');
                    }
                }
            });
        }

        /* $("input[name$='phone']").blur(function (e) {
             $(this).val(this.value.replace(/[A-Za-z` ~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi, ''));
                 var curval = $(this).val();
                 var str1 = curval.substring(0, 3);
                 var str2 = curval.substring(3, 6);
                 var str3 = curval.substring(6, 10);
                 if(curval.length <= 3 && curval.length > 0){
                     $(this).val( "(" + str1 + ") ");
                 }
                 else  if(curval.length <= 6 && curval.length > 3){
                     $(this).val( "(" + str1 + ") " + str2 );
                 }
                 else  if(curval.length <= 10 && curval.length > 6){
                     $(this).val( "(" + str1 + ") " + str2 + "-" + str3);
                 }
         });*/
    },
    zipFormatter: function zipFormatter() {
        $('body').on('change input', 'input[name$=\'postal\'], input[name$=\'zip\']', function () {
            $(this).val(this.value.replace(/[^\d]/g, ''));
            var curval = $(this).val();
            if (curval.length > 5) {
                $(this).val(curval.substring(0, 5) + '-' + curval.substring(5, 9));
            }
        });
    }
};
module.exports = validator;

},{}]},{},[16])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvYXNhcC9icm93c2VyLWFzYXAuanMiLCJub2RlX21vZHVsZXMvYXNhcC9icm93c2VyLXJhdy5qcyIsIm5vZGVfbW9kdWxlcy9ldi1lbWl0dGVyL2V2LWVtaXR0ZXIuanMiLCJub2RlX21vZHVsZXMvaW1hZ2VzbG9hZGVkL2ltYWdlc2xvYWRlZC5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW5kZXguanMiLCJub2RlX21vZHVsZXMvcHJvbWlzZS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9wcm9taXNlL2xpYi9jb3JlLmpzIiwibm9kZV9tb2R1bGVzL3Byb21pc2UvbGliL2RvbmUuanMiLCJub2RlX21vZHVsZXMvcHJvbWlzZS9saWIvZXM2LWV4dGVuc2lvbnMuanMiLCJub2RlX21vZHVsZXMvcHJvbWlzZS9saWIvZmluYWxseS5qcyIsIm5vZGVfbW9kdWxlcy9wcm9taXNlL2xpYi9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9wcm9taXNlL2xpYi9ub2RlLWV4dGVuc2lvbnMuanMiLCJub2RlX21vZHVsZXMvcHJvbWlzZS9saWIvc3luY2hyb25vdXMuanMiLCJ0ZW1wLXJhcGFsYS9hZGRyZXNzdmFsaWRhdGlvbi5qcyIsInRlbXAtcmFwYWxhL2FqYXguanMiLCJ0ZW1wLXJhcGFsYS9hcHAuanMiLCJ0ZW1wLXJhcGFsYS9ib251cy1wcm9kdWN0cy12aWV3LmpzIiwidGVtcC1yYXBhbGEvYnJvd3NlcmEuanMiLCJ0ZW1wLXJhcGFsYS9jYXB0Y2hhLmpzIiwidGVtcC1yYXBhbGEvY29tcGFyZS13aWRnZXQuanMiLCJ0ZW1wLXJhcGFsYS9jb29raWVwcml2YWN5LmpzIiwidGVtcC1yYXBhbGEvY291bnRyaWVzLmpzIiwidGVtcC1yYXBhbGEvZGlhbG9nLmpzIiwidGVtcC1yYXBhbGEvZGlhbG9naWZ5LmpzIiwidGVtcC1yYXBhbGEvZ2lmdGNlcnQuanMiLCJ0ZW1wLXJhcGFsYS9oZWFkZXJpbml0LmpzIiwidGVtcC1yYXBhbGEvanF1ZXJ5LWV4dC5qcyIsInRlbXAtcmFwYWxhL21lZ2FtZW51LmpzIiwidGVtcC1yYXBhbGEvbWluaWNhcnQuanMiLCJ0ZW1wLXJhcGFsYS9wYWdlLmpzIiwidGVtcC1yYXBhbGEvcGFnZXMvYWNjb3VudC5qcyIsInRlbXAtcmFwYWxhL3BhZ2VzL2Jsb2cvaW5kZXguanMiLCJ0ZW1wLXJhcGFsYS9wYWdlcy9jYXJ0LmpzIiwidGVtcC1yYXBhbGEvcGFnZXMvY2hlY2tvdXQvYWRkcmVzcy5qcyIsInRlbXAtcmFwYWxhL3BhZ2VzL2NoZWNrb3V0L2JpbGxpbmcuanMiLCJ0ZW1wLXJhcGFsYS9wYWdlcy9jaGVja291dC9mb3JtUHJlcGFyZS5qcyIsInRlbXAtcmFwYWxhL3BhZ2VzL2NoZWNrb3V0L2luZGV4LmpzIiwidGVtcC1yYXBhbGEvcGFnZXMvY2hlY2tvdXQvbXVsdGlzaGlwLmpzIiwidGVtcC1yYXBhbGEvcGFnZXMvY2hlY2tvdXQvc2hpcHBpbmcuanMiLCJ0ZW1wLXJhcGFsYS9wYWdlcy9jb21wYXJlLmpzIiwidGVtcC1yYXBhbGEvcGFnZXMvaW50ZXJuYXRpb25hbC5qcyIsInRlbXAtcmFwYWxhL3BhZ2VzL3Byb2R1Y3QvYWRkVG9DYXJ0LmpzIiwidGVtcC1yYXBhbGEvcGFnZXMvcHJvZHVjdC9pbmRleC5qcyIsInRlbXAtcmFwYWxhL3BhZ2VzL3Byb2R1Y3QvcGRwRXZlbnRzLmpzIiwidGVtcC1yYXBhbGEvcGFnZXMvcmFwYWxhaW5zaWRlci5qcyIsInRlbXAtcmFwYWxhL3BhZ2VzL3JlZ2lzdHJ5LmpzIiwidGVtcC1yYXBhbGEvcGFnZXMvc2VhcmNoLmpzIiwidGVtcC1yYXBhbGEvcGFnZXMvc3RvcmVmcm9udC5qcyIsInRlbXAtcmFwYWxhL3BhZ2VzL3N0b3JlbG9jYXRvci5qcyIsInRlbXAtcmFwYWxhL3BhZ2VzL3dpc2hsaXN0LmpzIiwidGVtcC1yYXBhbGEvcHJvZHVjdC10aWxlLmpzIiwidGVtcC1yYXBhbGEvcHJvZ3Jlc3MuanMiLCJ0ZW1wLXJhcGFsYS9xdWlja3ZpZXctYXNzZXQuanMiLCJ0ZW1wLXJhcGFsYS9xdWlja3ZpZXcuanMiLCJ0ZW1wLXJhcGFsYS9zZWFyY2hwbGFjZWhvbGRlci5qcyIsInRlbXAtcmFwYWxhL3NlYXJjaHN1Z2dlc3QuanMiLCJ0ZW1wLXJhcGFsYS9zdG9yZWludmVudG9yeS9jYXJ0LmpzIiwidGVtcC1yYXBhbGEvc3RvcmVpbnZlbnRvcnkvaW5kZXguanMiLCJ0ZW1wLXJhcGFsYS90YWdtYW5hZ2VyLmpzIiwidGVtcC1yYXBhbGEvdGxzLmpzIiwidGVtcC1yYXBhbGEvdG9vbHRpcC5qcyIsInRlbXAtcmFwYWxhL3VpZXZlbnRzLmpzIiwidGVtcC1yYXBhbGEvdXRpbC5qcyIsInRlbXAtcmFwYWxhL3ZhbGlkYXRvci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNsRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQy9OQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3pYQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQy9qWUE7QUFDQTtBQUNBO0FBQ0E7O0FDSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDck5BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDYkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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RixFQUFRLEdBQVIsQ0FBWSxNQUFNLElBQU4sR0FBYSxJQUFiLEdBQW9CLElBQXBCLEdBQTJCLEdBQTNCLEdBQWlDLElBQTdDO0FBQ0g7QUFDRCx3QkFBSSxPQUFPLE1BQVAsSUFBaUIsQ0FBckIsRUFBd0I7QUFDcEIsMEJBQUUsSUFBRixFQUFRLEdBQVIsQ0FBWSxFQUFaO0FBQ0g7QUFDSjtBQUNKLGFBOUJEO0FBK0JIOztBQUVEOzs7Ozs7Ozs7Ozs7Ozs7O0FBaUJILEtBcEdXO0FBcUdaLGtCQUFjLHdCQUFZO0FBQ3RCLFVBQUUsTUFBRixFQUFVLEVBQVYsQ0FBYSxjQUFiLEVBQTZCLCtDQUE3QixFQUE4RSxZQUFZO0FBQ3RGLGNBQUUsSUFBRixFQUFRLEdBQVIsQ0FBWSxLQUFLLEtBQUwsQ0FBVyxPQUFYLENBQW1CLFFBQW5CLEVBQTZCLEVBQTdCLENBQVo7QUFDQSxnQkFBSSxTQUFTLEVBQUUsSUFBRixFQUFRLEdBQVIsRUFBYjtBQUNBLGdCQUFJLE9BQU8sTUFBUCxHQUFnQixDQUFwQixFQUF1QjtBQUNuQixrQkFBRSxJQUFGLEVBQVEsR0FBUixDQUFZLE9BQU8sU0FBUCxDQUFpQixDQUFqQixFQUFvQixDQUFwQixJQUF5QixHQUF6QixHQUErQixPQUFPLFNBQVAsQ0FBaUIsQ0FBakIsRUFBb0IsQ0FBcEIsQ0FBM0M7QUFDSDtBQUNKLFNBTkQ7QUFPSDtBQTdHVyxDQUFoQjtBQStHQSxPQUFPLE9BQVAsR0FBaUIsU0FBakIiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8vIHJhd0FzYXAgcHJvdmlkZXMgZXZlcnl0aGluZyB3ZSBuZWVkIGV4Y2VwdCBleGNlcHRpb24gbWFuYWdlbWVudC5cbnZhciByYXdBc2FwID0gcmVxdWlyZShcIi4vcmF3XCIpO1xuLy8gUmF3VGFza3MgYXJlIHJlY3ljbGVkIHRvIHJlZHVjZSBHQyBjaHVybi5cbnZhciBmcmVlVGFza3MgPSBbXTtcbi8vIFdlIHF1ZXVlIGVycm9ycyB0byBlbnN1cmUgdGhleSBhcmUgdGhyb3duIGluIHJpZ2h0IG9yZGVyIChGSUZPKS5cbi8vIEFycmF5LWFzLXF1ZXVlIGlzIGdvb2QgZW5vdWdoIGhlcmUsIHNpbmNlIHdlIGFyZSBqdXN0IGRlYWxpbmcgd2l0aCBleGNlcHRpb25zLlxudmFyIHBlbmRpbmdFcnJvcnMgPSBbXTtcbnZhciByZXF1ZXN0RXJyb3JUaHJvdyA9IHJhd0FzYXAubWFrZVJlcXVlc3RDYWxsRnJvbVRpbWVyKHRocm93Rmlyc3RFcnJvcik7XG5cbmZ1bmN0aW9uIHRocm93Rmlyc3RFcnJvcigpIHtcbiAgICBpZiAocGVuZGluZ0Vycm9ycy5sZW5ndGgpIHtcbiAgICAgICAgdGhyb3cgcGVuZGluZ0Vycm9ycy5zaGlmdCgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDYWxscyBhIHRhc2sgYXMgc29vbiBhcyBwb3NzaWJsZSBhZnRlciByZXR1cm5pbmcsIGluIGl0cyBvd24gZXZlbnQsIHdpdGggcHJpb3JpdHlcbiAqIG92ZXIgb3RoZXIgZXZlbnRzIGxpa2UgYW5pbWF0aW9uLCByZWZsb3csIGFuZCByZXBhaW50LiBBbiBlcnJvciB0aHJvd24gZnJvbSBhblxuICogZXZlbnQgd2lsbCBub3QgaW50ZXJydXB0LCBub3IgZXZlbiBzdWJzdGFudGlhbGx5IHNsb3cgZG93biB0aGUgcHJvY2Vzc2luZyBvZlxuICogb3RoZXIgZXZlbnRzLCBidXQgd2lsbCBiZSByYXRoZXIgcG9zdHBvbmVkIHRvIGEgbG93ZXIgcHJpb3JpdHkgZXZlbnQuXG4gKiBAcGFyYW0ge3tjYWxsfX0gdGFzayBBIGNhbGxhYmxlIG9iamVjdCwgdHlwaWNhbGx5IGEgZnVuY3Rpb24gdGhhdCB0YWtlcyBub1xuICogYXJndW1lbnRzLlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGFzYXA7XG5mdW5jdGlvbiBhc2FwKHRhc2spIHtcbiAgICB2YXIgcmF3VGFzaztcbiAgICBpZiAoZnJlZVRhc2tzLmxlbmd0aCkge1xuICAgICAgICByYXdUYXNrID0gZnJlZVRhc2tzLnBvcCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJhd1Rhc2sgPSBuZXcgUmF3VGFzaygpO1xuICAgIH1cbiAgICByYXdUYXNrLnRhc2sgPSB0YXNrO1xuICAgIHJhd0FzYXAocmF3VGFzayk7XG59XG5cbi8vIFdlIHdyYXAgdGFza3Mgd2l0aCByZWN5Y2xhYmxlIHRhc2sgb2JqZWN0cy4gIEEgdGFzayBvYmplY3QgaW1wbGVtZW50c1xuLy8gYGNhbGxgLCBqdXN0IGxpa2UgYSBmdW5jdGlvbi5cbmZ1bmN0aW9uIFJhd1Rhc2soKSB7XG4gICAgdGhpcy50YXNrID0gbnVsbDtcbn1cblxuLy8gVGhlIHNvbGUgcHVycG9zZSBvZiB3cmFwcGluZyB0aGUgdGFzayBpcyB0byBjYXRjaCB0aGUgZXhjZXB0aW9uIGFuZCByZWN5Y2xlXG4vLyB0aGUgdGFzayBvYmplY3QgYWZ0ZXIgaXRzIHNpbmdsZSB1c2UuXG5SYXdUYXNrLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIHRoaXMudGFzay5jYWxsKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgaWYgKGFzYXAub25lcnJvcikge1xuICAgICAgICAgICAgLy8gVGhpcyBob29rIGV4aXN0cyBwdXJlbHkgZm9yIHRlc3RpbmcgcHVycG9zZXMuXG4gICAgICAgICAgICAvLyBJdHMgbmFtZSB3aWxsIGJlIHBlcmlvZGljYWxseSByYW5kb21pemVkIHRvIGJyZWFrIGFueSBjb2RlIHRoYXRcbiAgICAgICAgICAgIC8vIGRlcGVuZHMgb24gaXRzIGV4aXN0ZW5jZS5cbiAgICAgICAgICAgIGFzYXAub25lcnJvcihlcnJvcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBJbiBhIHdlYiBicm93c2VyLCBleGNlcHRpb25zIGFyZSBub3QgZmF0YWwuIEhvd2V2ZXIsIHRvIGF2b2lkXG4gICAgICAgICAgICAvLyBzbG93aW5nIGRvd24gdGhlIHF1ZXVlIG9mIHBlbmRpbmcgdGFza3MsIHdlIHJldGhyb3cgdGhlIGVycm9yIGluIGFcbiAgICAgICAgICAgIC8vIGxvd2VyIHByaW9yaXR5IHR1cm4uXG4gICAgICAgICAgICBwZW5kaW5nRXJyb3JzLnB1c2goZXJyb3IpO1xuICAgICAgICAgICAgcmVxdWVzdEVycm9yVGhyb3coKTtcbiAgICAgICAgfVxuICAgIH0gZmluYWxseSB7XG4gICAgICAgIHRoaXMudGFzayA9IG51bGw7XG4gICAgICAgIGZyZWVUYXNrc1tmcmVlVGFza3MubGVuZ3RoXSA9IHRoaXM7XG4gICAgfVxufTtcbiIsIlwidXNlIHN0cmljdFwiO1xuXG4vLyBVc2UgdGhlIGZhc3Rlc3QgbWVhbnMgcG9zc2libGUgdG8gZXhlY3V0ZSBhIHRhc2sgaW4gaXRzIG93biB0dXJuLCB3aXRoXG4vLyBwcmlvcml0eSBvdmVyIG90aGVyIGV2ZW50cyBpbmNsdWRpbmcgSU8sIGFuaW1hdGlvbiwgcmVmbG93LCBhbmQgcmVkcmF3XG4vLyBldmVudHMgaW4gYnJvd3NlcnMuXG4vL1xuLy8gQW4gZXhjZXB0aW9uIHRocm93biBieSBhIHRhc2sgd2lsbCBwZXJtYW5lbnRseSBpbnRlcnJ1cHQgdGhlIHByb2Nlc3Npbmcgb2Zcbi8vIHN1YnNlcXVlbnQgdGFza3MuIFRoZSBoaWdoZXIgbGV2ZWwgYGFzYXBgIGZ1bmN0aW9uIGVuc3VyZXMgdGhhdCBpZiBhblxuLy8gZXhjZXB0aW9uIGlzIHRocm93biBieSBhIHRhc2ssIHRoYXQgdGhlIHRhc2sgcXVldWUgd2lsbCBjb250aW51ZSBmbHVzaGluZyBhc1xuLy8gc29vbiBhcyBwb3NzaWJsZSwgYnV0IGlmIHlvdSB1c2UgYHJhd0FzYXBgIGRpcmVjdGx5LCB5b3UgYXJlIHJlc3BvbnNpYmxlIHRvXG4vLyBlaXRoZXIgZW5zdXJlIHRoYXQgbm8gZXhjZXB0aW9ucyBhcmUgdGhyb3duIGZyb20geW91ciB0YXNrLCBvciB0byBtYW51YWxseVxuLy8gY2FsbCBgcmF3QXNhcC5yZXF1ZXN0Rmx1c2hgIGlmIGFuIGV4Y2VwdGlvbiBpcyB0aHJvd24uXG5tb2R1bGUuZXhwb3J0cyA9IHJhd0FzYXA7XG5mdW5jdGlvbiByYXdBc2FwKHRhc2spIHtcbiAgICBpZiAoIXF1ZXVlLmxlbmd0aCkge1xuICAgICAgICByZXF1ZXN0Rmx1c2goKTtcbiAgICAgICAgZmx1c2hpbmcgPSB0cnVlO1xuICAgIH1cbiAgICAvLyBFcXVpdmFsZW50IHRvIHB1c2gsIGJ1dCBhdm9pZHMgYSBmdW5jdGlvbiBjYWxsLlxuICAgIHF1ZXVlW3F1ZXVlLmxlbmd0aF0gPSB0YXNrO1xufVxuXG52YXIgcXVldWUgPSBbXTtcbi8vIE9uY2UgYSBmbHVzaCBoYXMgYmVlbiByZXF1ZXN0ZWQsIG5vIGZ1cnRoZXIgY2FsbHMgdG8gYHJlcXVlc3RGbHVzaGAgYXJlXG4vLyBuZWNlc3NhcnkgdW50aWwgdGhlIG5leHQgYGZsdXNoYCBjb21wbGV0ZXMuXG52YXIgZmx1c2hpbmcgPSBmYWxzZTtcbi8vIGByZXF1ZXN0Rmx1c2hgIGlzIGFuIGltcGxlbWVudGF0aW9uLXNwZWNpZmljIG1ldGhvZCB0aGF0IGF0dGVtcHRzIHRvIGtpY2tcbi8vIG9mZiBhIGBmbHVzaGAgZXZlbnQgYXMgcXVpY2tseSBhcyBwb3NzaWJsZS4gYGZsdXNoYCB3aWxsIGF0dGVtcHQgdG8gZXhoYXVzdFxuLy8gdGhlIGV2ZW50IHF1ZXVlIGJlZm9yZSB5aWVsZGluZyB0byB0aGUgYnJvd3NlcidzIG93biBldmVudCBsb29wLlxudmFyIHJlcXVlc3RGbHVzaDtcbi8vIFRoZSBwb3NpdGlvbiBvZiB0aGUgbmV4dCB0YXNrIHRvIGV4ZWN1dGUgaW4gdGhlIHRhc2sgcXVldWUuIFRoaXMgaXNcbi8vIHByZXNlcnZlZCBiZXR3ZWVuIGNhbGxzIHRvIGBmbHVzaGAgc28gdGhhdCBpdCBjYW4gYmUgcmVzdW1lZCBpZlxuLy8gYSB0YXNrIHRocm93cyBhbiBleGNlcHRpb24uXG52YXIgaW5kZXggPSAwO1xuLy8gSWYgYSB0YXNrIHNjaGVkdWxlcyBhZGRpdGlvbmFsIHRhc2tzIHJlY3Vyc2l2ZWx5LCB0aGUgdGFzayBxdWV1ZSBjYW4gZ3Jvd1xuLy8gdW5ib3VuZGVkLiBUbyBwcmV2ZW50IG1lbW9yeSBleGhhdXN0aW9uLCB0aGUgdGFzayBxdWV1ZSB3aWxsIHBlcmlvZGljYWxseVxuLy8gdHJ1bmNhdGUgYWxyZWFkeS1jb21wbGV0ZWQgdGFza3MuXG52YXIgY2FwYWNpdHkgPSAxMDI0O1xuXG4vLyBUaGUgZmx1c2ggZnVuY3Rpb24gcHJvY2Vzc2VzIGFsbCB0YXNrcyB0aGF0IGhhdmUgYmVlbiBzY2hlZHVsZWQgd2l0aFxuLy8gYHJhd0FzYXBgIHVubGVzcyBhbmQgdW50aWwgb25lIG9mIHRob3NlIHRhc2tzIHRocm93cyBhbiBleGNlcHRpb24uXG4vLyBJZiBhIHRhc2sgdGhyb3dzIGFuIGV4Y2VwdGlvbiwgYGZsdXNoYCBlbnN1cmVzIHRoYXQgaXRzIHN0YXRlIHdpbGwgcmVtYWluXG4vLyBjb25zaXN0ZW50IGFuZCB3aWxsIHJlc3VtZSB3aGVyZSBpdCBsZWZ0IG9mZiB3aGVuIGNhbGxlZCBhZ2Fpbi5cbi8vIEhvd2V2ZXIsIGBmbHVzaGAgZG9lcyBub3QgbWFrZSBhbnkgYXJyYW5nZW1lbnRzIHRvIGJlIGNhbGxlZCBhZ2FpbiBpZiBhblxuLy8gZXhjZXB0aW9uIGlzIHRocm93bi5cbmZ1bmN0aW9uIGZsdXNoKCkge1xuICAgIHdoaWxlIChpbmRleCA8IHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICB2YXIgY3VycmVudEluZGV4ID0gaW5kZXg7XG4gICAgICAgIC8vIEFkdmFuY2UgdGhlIGluZGV4IGJlZm9yZSBjYWxsaW5nIHRoZSB0YXNrLiBUaGlzIGVuc3VyZXMgdGhhdCB3ZSB3aWxsXG4gICAgICAgIC8vIGJlZ2luIGZsdXNoaW5nIG9uIHRoZSBuZXh0IHRhc2sgdGhlIHRhc2sgdGhyb3dzIGFuIGVycm9yLlxuICAgICAgICBpbmRleCA9IGluZGV4ICsgMTtcbiAgICAgICAgcXVldWVbY3VycmVudEluZGV4XS5jYWxsKCk7XG4gICAgICAgIC8vIFByZXZlbnQgbGVha2luZyBtZW1vcnkgZm9yIGxvbmcgY2hhaW5zIG9mIHJlY3Vyc2l2ZSBjYWxscyB0byBgYXNhcGAuXG4gICAgICAgIC8vIElmIHdlIGNhbGwgYGFzYXBgIHdpdGhpbiB0YXNrcyBzY2hlZHVsZWQgYnkgYGFzYXBgLCB0aGUgcXVldWUgd2lsbFxuICAgICAgICAvLyBncm93LCBidXQgdG8gYXZvaWQgYW4gTyhuKSB3YWxrIGZvciBldmVyeSB0YXNrIHdlIGV4ZWN1dGUsIHdlIGRvbid0XG4gICAgICAgIC8vIHNoaWZ0IHRhc2tzIG9mZiB0aGUgcXVldWUgYWZ0ZXIgdGhleSBoYXZlIGJlZW4gZXhlY3V0ZWQuXG4gICAgICAgIC8vIEluc3RlYWQsIHdlIHBlcmlvZGljYWxseSBzaGlmdCAxMDI0IHRhc2tzIG9mZiB0aGUgcXVldWUuXG4gICAgICAgIGlmIChpbmRleCA+IGNhcGFjaXR5KSB7XG4gICAgICAgICAgICAvLyBNYW51YWxseSBzaGlmdCBhbGwgdmFsdWVzIHN0YXJ0aW5nIGF0IHRoZSBpbmRleCBiYWNrIHRvIHRoZVxuICAgICAgICAgICAgLy8gYmVnaW5uaW5nIG9mIHRoZSBxdWV1ZS5cbiAgICAgICAgICAgIGZvciAodmFyIHNjYW4gPSAwLCBuZXdMZW5ndGggPSBxdWV1ZS5sZW5ndGggLSBpbmRleDsgc2NhbiA8IG5ld0xlbmd0aDsgc2NhbisrKSB7XG4gICAgICAgICAgICAgICAgcXVldWVbc2Nhbl0gPSBxdWV1ZVtzY2FuICsgaW5kZXhdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcXVldWUubGVuZ3RoIC09IGluZGV4O1xuICAgICAgICAgICAgaW5kZXggPSAwO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLmxlbmd0aCA9IDA7XG4gICAgaW5kZXggPSAwO1xuICAgIGZsdXNoaW5nID0gZmFsc2U7XG59XG5cbi8vIGByZXF1ZXN0Rmx1c2hgIGlzIGltcGxlbWVudGVkIHVzaW5nIGEgc3RyYXRlZ3kgYmFzZWQgb24gZGF0YSBjb2xsZWN0ZWQgZnJvbVxuLy8gZXZlcnkgYXZhaWxhYmxlIFNhdWNlTGFicyBTZWxlbml1bSB3ZWIgZHJpdmVyIHdvcmtlciBhdCB0aW1lIG9mIHdyaXRpbmcuXG4vLyBodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9zcHJlYWRzaGVldHMvZC8xbUctNVVZR3VwNXF4R2RFTVdraFA2QldDejA1M05VYjJFMVFvVVRVMTZ1QS9lZGl0I2dpZD03ODM3MjQ1OTNcblxuLy8gU2FmYXJpIDYgYW5kIDYuMSBmb3IgZGVza3RvcCwgaVBhZCwgYW5kIGlQaG9uZSBhcmUgdGhlIG9ubHkgYnJvd3NlcnMgdGhhdFxuLy8gaGF2ZSBXZWJLaXRNdXRhdGlvbk9ic2VydmVyIGJ1dCBub3QgdW4tcHJlZml4ZWQgTXV0YXRpb25PYnNlcnZlci5cbi8vIE11c3QgdXNlIGBnbG9iYWxgIG9yIGBzZWxmYCBpbnN0ZWFkIG9mIGB3aW5kb3dgIHRvIHdvcmsgaW4gYm90aCBmcmFtZXMgYW5kIHdlYlxuLy8gd29ya2Vycy4gYGdsb2JhbGAgaXMgYSBwcm92aXNpb24gb2YgQnJvd3NlcmlmeSwgTXIsIE1ycywgb3IgTW9wLlxuXG4vKiBnbG9iYWxzIHNlbGYgKi9cbnZhciBzY29wZSA9IHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiBzZWxmO1xudmFyIEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyID0gc2NvcGUuTXV0YXRpb25PYnNlcnZlciB8fCBzY29wZS5XZWJLaXRNdXRhdGlvbk9ic2VydmVyO1xuXG4vLyBNdXRhdGlvbk9ic2VydmVycyBhcmUgZGVzaXJhYmxlIGJlY2F1c2UgdGhleSBoYXZlIGhpZ2ggcHJpb3JpdHkgYW5kIHdvcmtcbi8vIHJlbGlhYmx5IGV2ZXJ5d2hlcmUgdGhleSBhcmUgaW1wbGVtZW50ZWQuXG4vLyBUaGV5IGFyZSBpbXBsZW1lbnRlZCBpbiBhbGwgbW9kZXJuIGJyb3dzZXJzLlxuLy9cbi8vIC0gQW5kcm9pZCA0LTQuM1xuLy8gLSBDaHJvbWUgMjYtMzRcbi8vIC0gRmlyZWZveCAxNC0yOVxuLy8gLSBJbnRlcm5ldCBFeHBsb3JlciAxMVxuLy8gLSBpUGFkIFNhZmFyaSA2LTcuMVxuLy8gLSBpUGhvbmUgU2FmYXJpIDctNy4xXG4vLyAtIFNhZmFyaSA2LTdcbmlmICh0eXBlb2YgQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIHJlcXVlc3RGbHVzaCA9IG1ha2VSZXF1ZXN0Q2FsbEZyb21NdXRhdGlvbk9ic2VydmVyKGZsdXNoKTtcblxuLy8gTWVzc2FnZUNoYW5uZWxzIGFyZSBkZXNpcmFibGUgYmVjYXVzZSB0aGV5IGdpdmUgZGlyZWN0IGFjY2VzcyB0byB0aGUgSFRNTFxuLy8gdGFzayBxdWV1ZSwgYXJlIGltcGxlbWVudGVkIGluIEludGVybmV0IEV4cGxvcmVyIDEwLCBTYWZhcmkgNS4wLTEsIGFuZCBPcGVyYVxuLy8gMTEtMTIsIGFuZCBpbiB3ZWIgd29ya2VycyBpbiBtYW55IGVuZ2luZXMuXG4vLyBBbHRob3VnaCBtZXNzYWdlIGNoYW5uZWxzIHlpZWxkIHRvIGFueSBxdWV1ZWQgcmVuZGVyaW5nIGFuZCBJTyB0YXNrcywgdGhleVxuLy8gd291bGQgYmUgYmV0dGVyIHRoYW4gaW1wb3NpbmcgdGhlIDRtcyBkZWxheSBvZiB0aW1lcnMuXG4vLyBIb3dldmVyLCB0aGV5IGRvIG5vdCB3b3JrIHJlbGlhYmx5IGluIEludGVybmV0IEV4cGxvcmVyIG9yIFNhZmFyaS5cblxuLy8gSW50ZXJuZXQgRXhwbG9yZXIgMTAgaXMgdGhlIG9ubHkgYnJvd3NlciB0aGF0IGhhcyBzZXRJbW1lZGlhdGUgYnV0IGRvZXNcbi8vIG5vdCBoYXZlIE11dGF0aW9uT2JzZXJ2ZXJzLlxuLy8gQWx0aG91Z2ggc2V0SW1tZWRpYXRlIHlpZWxkcyB0byB0aGUgYnJvd3NlcidzIHJlbmRlcmVyLCBpdCB3b3VsZCBiZVxuLy8gcHJlZmVycmFibGUgdG8gZmFsbGluZyBiYWNrIHRvIHNldFRpbWVvdXQgc2luY2UgaXQgZG9lcyBub3QgaGF2ZVxuLy8gdGhlIG1pbmltdW0gNG1zIHBlbmFsdHkuXG4vLyBVbmZvcnR1bmF0ZWx5IHRoZXJlIGFwcGVhcnMgdG8gYmUgYSBidWcgaW4gSW50ZXJuZXQgRXhwbG9yZXIgMTAgTW9iaWxlIChhbmRcbi8vIERlc2t0b3AgdG8gYSBsZXNzZXIgZXh0ZW50KSB0aGF0IHJlbmRlcnMgYm90aCBzZXRJbW1lZGlhdGUgYW5kXG4vLyBNZXNzYWdlQ2hhbm5lbCB1c2VsZXNzIGZvciB0aGUgcHVycG9zZXMgb2YgQVNBUC5cbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9rcmlza293YWwvcS9pc3N1ZXMvMzk2XG5cbi8vIFRpbWVycyBhcmUgaW1wbGVtZW50ZWQgdW5pdmVyc2FsbHkuXG4vLyBXZSBmYWxsIGJhY2sgdG8gdGltZXJzIGluIHdvcmtlcnMgaW4gbW9zdCBlbmdpbmVzLCBhbmQgaW4gZm9yZWdyb3VuZFxuLy8gY29udGV4dHMgaW4gdGhlIGZvbGxvd2luZyBicm93c2Vycy5cbi8vIEhvd2V2ZXIsIG5vdGUgdGhhdCBldmVuIHRoaXMgc2ltcGxlIGNhc2UgcmVxdWlyZXMgbnVhbmNlcyB0byBvcGVyYXRlIGluIGFcbi8vIGJyb2FkIHNwZWN0cnVtIG9mIGJyb3dzZXJzLlxuLy9cbi8vIC0gRmlyZWZveCAzLTEzXG4vLyAtIEludGVybmV0IEV4cGxvcmVyIDYtOVxuLy8gLSBpUGFkIFNhZmFyaSA0LjNcbi8vIC0gTHlueCAyLjguN1xufSBlbHNlIHtcbiAgICByZXF1ZXN0Rmx1c2ggPSBtYWtlUmVxdWVzdENhbGxGcm9tVGltZXIoZmx1c2gpO1xufVxuXG4vLyBgcmVxdWVzdEZsdXNoYCByZXF1ZXN0cyB0aGF0IHRoZSBoaWdoIHByaW9yaXR5IGV2ZW50IHF1ZXVlIGJlIGZsdXNoZWQgYXNcbi8vIHNvb24gYXMgcG9zc2libGUuXG4vLyBUaGlzIGlzIHVzZWZ1bCB0byBwcmV2ZW50IGFuIGVycm9yIHRocm93biBpbiBhIHRhc2sgZnJvbSBzdGFsbGluZyB0aGUgZXZlbnRcbi8vIHF1ZXVlIGlmIHRoZSBleGNlcHRpb24gaGFuZGxlZCBieSBOb2RlLmpz4oCZc1xuLy8gYHByb2Nlc3Mub24oXCJ1bmNhdWdodEV4Y2VwdGlvblwiKWAgb3IgYnkgYSBkb21haW4uXG5yYXdBc2FwLnJlcXVlc3RGbHVzaCA9IHJlcXVlc3RGbHVzaDtcblxuLy8gVG8gcmVxdWVzdCBhIGhpZ2ggcHJpb3JpdHkgZXZlbnQsIHdlIGluZHVjZSBhIG11dGF0aW9uIG9ic2VydmVyIGJ5IHRvZ2dsaW5nXG4vLyB0aGUgdGV4dCBvZiBhIHRleHQgbm9kZSBiZXR3ZWVuIFwiMVwiIGFuZCBcIi0xXCIuXG5mdW5jdGlvbiBtYWtlUmVxdWVzdENhbGxGcm9tTXV0YXRpb25PYnNlcnZlcihjYWxsYmFjaykge1xuICAgIHZhciB0b2dnbGUgPSAxO1xuICAgIHZhciBvYnNlcnZlciA9IG5ldyBCcm93c2VyTXV0YXRpb25PYnNlcnZlcihjYWxsYmFjayk7XG4gICAgdmFyIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIlwiKTtcbiAgICBvYnNlcnZlci5vYnNlcnZlKG5vZGUsIHtjaGFyYWN0ZXJEYXRhOiB0cnVlfSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHJlcXVlc3RDYWxsKCkge1xuICAgICAgICB0b2dnbGUgPSAtdG9nZ2xlO1xuICAgICAgICBub2RlLmRhdGEgPSB0b2dnbGU7XG4gICAgfTtcbn1cblxuLy8gVGhlIG1lc3NhZ2UgY2hhbm5lbCB0ZWNobmlxdWUgd2FzIGRpc2NvdmVyZWQgYnkgTWFsdGUgVWJsIGFuZCB3YXMgdGhlXG4vLyBvcmlnaW5hbCBmb3VuZGF0aW9uIGZvciB0aGlzIGxpYnJhcnkuXG4vLyBodHRwOi8vd3d3Lm5vbmJsb2NraW5nLmlvLzIwMTEvMDYvd2luZG93bmV4dHRpY2suaHRtbFxuXG4vLyBTYWZhcmkgNi4wLjUgKGF0IGxlYXN0KSBpbnRlcm1pdHRlbnRseSBmYWlscyB0byBjcmVhdGUgbWVzc2FnZSBwb3J0cyBvbiBhXG4vLyBwYWdlJ3MgZmlyc3QgbG9hZC4gVGhhbmtmdWxseSwgdGhpcyB2ZXJzaW9uIG9mIFNhZmFyaSBzdXBwb3J0c1xuLy8gTXV0YXRpb25PYnNlcnZlcnMsIHNvIHdlIGRvbid0IG5lZWQgdG8gZmFsbCBiYWNrIGluIHRoYXQgY2FzZS5cblxuLy8gZnVuY3Rpb24gbWFrZVJlcXVlc3RDYWxsRnJvbU1lc3NhZ2VDaGFubmVsKGNhbGxiYWNrKSB7XG4vLyAgICAgdmFyIGNoYW5uZWwgPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTtcbi8vICAgICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGNhbGxiYWNrO1xuLy8gICAgIHJldHVybiBmdW5jdGlvbiByZXF1ZXN0Q2FsbCgpIHtcbi8vICAgICAgICAgY2hhbm5lbC5wb3J0Mi5wb3N0TWVzc2FnZSgwKTtcbi8vICAgICB9O1xuLy8gfVxuXG4vLyBGb3IgcmVhc29ucyBleHBsYWluZWQgYWJvdmUsIHdlIGFyZSBhbHNvIHVuYWJsZSB0byB1c2UgYHNldEltbWVkaWF0ZWBcbi8vIHVuZGVyIGFueSBjaXJjdW1zdGFuY2VzLlxuLy8gRXZlbiBpZiB3ZSB3ZXJlLCB0aGVyZSBpcyBhbm90aGVyIGJ1ZyBpbiBJbnRlcm5ldCBFeHBsb3JlciAxMC5cbi8vIEl0IGlzIG5vdCBzdWZmaWNpZW50IHRvIGFzc2lnbiBgc2V0SW1tZWRpYXRlYCB0byBgcmVxdWVzdEZsdXNoYCBiZWNhdXNlXG4vLyBgc2V0SW1tZWRpYXRlYCBtdXN0IGJlIGNhbGxlZCAqYnkgbmFtZSogYW5kIHRoZXJlZm9yZSBtdXN0IGJlIHdyYXBwZWQgaW4gYVxuLy8gY2xvc3VyZS5cbi8vIE5ldmVyIGZvcmdldC5cblxuLy8gZnVuY3Rpb24gbWFrZVJlcXVlc3RDYWxsRnJvbVNldEltbWVkaWF0ZShjYWxsYmFjaykge1xuLy8gICAgIHJldHVybiBmdW5jdGlvbiByZXF1ZXN0Q2FsbCgpIHtcbi8vICAgICAgICAgc2V0SW1tZWRpYXRlKGNhbGxiYWNrKTtcbi8vICAgICB9O1xuLy8gfVxuXG4vLyBTYWZhcmkgNi4wIGhhcyBhIHByb2JsZW0gd2hlcmUgdGltZXJzIHdpbGwgZ2V0IGxvc3Qgd2hpbGUgdGhlIHVzZXIgaXNcbi8vIHNjcm9sbGluZy4gVGhpcyBwcm9ibGVtIGRvZXMgbm90IGltcGFjdCBBU0FQIGJlY2F1c2UgU2FmYXJpIDYuMCBzdXBwb3J0c1xuLy8gbXV0YXRpb24gb2JzZXJ2ZXJzLCBzbyB0aGF0IGltcGxlbWVudGF0aW9uIGlzIHVzZWQgaW5zdGVhZC5cbi8vIEhvd2V2ZXIsIGlmIHdlIGV2ZXIgZWxlY3QgdG8gdXNlIHRpbWVycyBpbiBTYWZhcmksIHRoZSBwcmV2YWxlbnQgd29yay1hcm91bmRcbi8vIGlzIHRvIGFkZCBhIHNjcm9sbCBldmVudCBsaXN0ZW5lciB0aGF0IGNhbGxzIGZvciBhIGZsdXNoLlxuXG4vLyBgc2V0VGltZW91dGAgZG9lcyBub3QgY2FsbCB0aGUgcGFzc2VkIGNhbGxiYWNrIGlmIHRoZSBkZWxheSBpcyBsZXNzIHRoYW5cbi8vIGFwcHJveGltYXRlbHkgNyBpbiB3ZWIgd29ya2VycyBpbiBGaXJlZm94IDggdGhyb3VnaCAxOCwgYW5kIHNvbWV0aW1lcyBub3Rcbi8vIGV2ZW4gdGhlbi5cblxuZnVuY3Rpb24gbWFrZVJlcXVlc3RDYWxsRnJvbVRpbWVyKGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHJlcXVlc3RDYWxsKCkge1xuICAgICAgICAvLyBXZSBkaXNwYXRjaCBhIHRpbWVvdXQgd2l0aCBhIHNwZWNpZmllZCBkZWxheSBvZiAwIGZvciBlbmdpbmVzIHRoYXRcbiAgICAgICAgLy8gY2FuIHJlbGlhYmx5IGFjY29tbW9kYXRlIHRoYXQgcmVxdWVzdC4gVGhpcyB3aWxsIHVzdWFsbHkgYmUgc25hcHBlZFxuICAgICAgICAvLyB0byBhIDQgbWlsaXNlY29uZCBkZWxheSwgYnV0IG9uY2Ugd2UncmUgZmx1c2hpbmcsIHRoZXJlJ3Mgbm8gZGVsYXlcbiAgICAgICAgLy8gYmV0d2VlbiBldmVudHMuXG4gICAgICAgIHZhciB0aW1lb3V0SGFuZGxlID0gc2V0VGltZW91dChoYW5kbGVUaW1lciwgMCk7XG4gICAgICAgIC8vIEhvd2V2ZXIsIHNpbmNlIHRoaXMgdGltZXIgZ2V0cyBmcmVxdWVudGx5IGRyb3BwZWQgaW4gRmlyZWZveFxuICAgICAgICAvLyB3b3JrZXJzLCB3ZSBlbmxpc3QgYW4gaW50ZXJ2YWwgaGFuZGxlIHRoYXQgd2lsbCB0cnkgdG8gZmlyZVxuICAgICAgICAvLyBhbiBldmVudCAyMCB0aW1lcyBwZXIgc2Vjb25kIHVudGlsIGl0IHN1Y2NlZWRzLlxuICAgICAgICB2YXIgaW50ZXJ2YWxIYW5kbGUgPSBzZXRJbnRlcnZhbChoYW5kbGVUaW1lciwgNTApO1xuXG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZVRpbWVyKCkge1xuICAgICAgICAgICAgLy8gV2hpY2hldmVyIHRpbWVyIHN1Y2NlZWRzIHdpbGwgY2FuY2VsIGJvdGggdGltZXJzIGFuZFxuICAgICAgICAgICAgLy8gZXhlY3V0ZSB0aGUgY2FsbGJhY2suXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dEhhbmRsZSk7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsSGFuZGxlKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG4vLyBUaGlzIGlzIGZvciBgYXNhcC5qc2Agb25seS5cbi8vIEl0cyBuYW1lIHdpbGwgYmUgcGVyaW9kaWNhbGx5IHJhbmRvbWl6ZWQgdG8gYnJlYWsgYW55IGNvZGUgdGhhdCBkZXBlbmRzIG9uXG4vLyBpdHMgZXhpc3RlbmNlLlxucmF3QXNhcC5tYWtlUmVxdWVzdENhbGxGcm9tVGltZXIgPSBtYWtlUmVxdWVzdENhbGxGcm9tVGltZXI7XG5cbi8vIEFTQVAgd2FzIG9yaWdpbmFsbHkgYSBuZXh0VGljayBzaGltIGluY2x1ZGVkIGluIFEuIFRoaXMgd2FzIGZhY3RvcmVkIG91dFxuLy8gaW50byB0aGlzIEFTQVAgcGFja2FnZS4gSXQgd2FzIGxhdGVyIGFkYXB0ZWQgdG8gUlNWUCB3aGljaCBtYWRlIGZ1cnRoZXJcbi8vIGFtZW5kbWVudHMuIFRoZXNlIGRlY2lzaW9ucywgcGFydGljdWxhcmx5IHRvIG1hcmdpbmFsaXplIE1lc3NhZ2VDaGFubmVsIGFuZFxuLy8gdG8gY2FwdHVyZSB0aGUgTXV0YXRpb25PYnNlcnZlciBpbXBsZW1lbnRhdGlvbiBpbiBhIGNsb3N1cmUsIHdlcmUgaW50ZWdyYXRlZFxuLy8gYmFjayBpbnRvIEFTQVAgcHJvcGVyLlxuLy8gaHR0cHM6Ly9naXRodWIuY29tL3RpbGRlaW8vcnN2cC5qcy9ibG9iL2NkZGY3MjMyNTQ2YTljZjg1ODUyNGI3NWNkZTZmOWVkZjcyNjIwYTcvbGliL3JzdnAvYXNhcC5qc1xuIiwiLyoqXG4gKiBFdkVtaXR0ZXIgdjEuMS4wXG4gKiBMaWwnIGV2ZW50IGVtaXR0ZXJcbiAqIE1JVCBMaWNlbnNlXG4gKi9cblxuLyoganNoaW50IHVudXNlZDogdHJ1ZSwgdW5kZWY6IHRydWUsIHN0cmljdDogdHJ1ZSAqL1xuXG4oIGZ1bmN0aW9uKCBnbG9iYWwsIGZhY3RvcnkgKSB7XG4gIC8vIHVuaXZlcnNhbCBtb2R1bGUgZGVmaW5pdGlvblxuICAvKiBqc2hpbnQgc3RyaWN0OiBmYWxzZSAqLyAvKiBnbG9iYWxzIGRlZmluZSwgbW9kdWxlLCB3aW5kb3cgKi9cbiAgaWYgKCB0eXBlb2YgZGVmaW5lID09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCApIHtcbiAgICAvLyBBTUQgLSBSZXF1aXJlSlNcbiAgICBkZWZpbmUoIGZhY3RvcnkgKTtcbiAgfSBlbHNlIGlmICggdHlwZW9mIG1vZHVsZSA9PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cyApIHtcbiAgICAvLyBDb21tb25KUyAtIEJyb3dzZXJpZnksIFdlYnBhY2tcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBCcm93c2VyIGdsb2JhbHNcbiAgICBnbG9iYWwuRXZFbWl0dGVyID0gZmFjdG9yeSgpO1xuICB9XG5cbn0oIHR5cGVvZiB3aW5kb3cgIT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB0aGlzLCBmdW5jdGlvbigpIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbmZ1bmN0aW9uIEV2RW1pdHRlcigpIHt9XG5cbnZhciBwcm90byA9IEV2RW1pdHRlci5wcm90b3R5cGU7XG5cbnByb3RvLm9uID0gZnVuY3Rpb24oIGV2ZW50TmFtZSwgbGlzdGVuZXIgKSB7XG4gIGlmICggIWV2ZW50TmFtZSB8fCAhbGlzdGVuZXIgKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8vIHNldCBldmVudHMgaGFzaFxuICB2YXIgZXZlbnRzID0gdGhpcy5fZXZlbnRzID0gdGhpcy5fZXZlbnRzIHx8IHt9O1xuICAvLyBzZXQgbGlzdGVuZXJzIGFycmF5XG4gIHZhciBsaXN0ZW5lcnMgPSBldmVudHNbIGV2ZW50TmFtZSBdID0gZXZlbnRzWyBldmVudE5hbWUgXSB8fCBbXTtcbiAgLy8gb25seSBhZGQgb25jZVxuICBpZiAoIGxpc3RlbmVycy5pbmRleE9mKCBsaXN0ZW5lciApID09IC0xICkge1xuICAgIGxpc3RlbmVycy5wdXNoKCBsaXN0ZW5lciApO1xuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5wcm90by5vbmNlID0gZnVuY3Rpb24oIGV2ZW50TmFtZSwgbGlzdGVuZXIgKSB7XG4gIGlmICggIWV2ZW50TmFtZSB8fCAhbGlzdGVuZXIgKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8vIGFkZCBldmVudFxuICB0aGlzLm9uKCBldmVudE5hbWUsIGxpc3RlbmVyICk7XG4gIC8vIHNldCBvbmNlIGZsYWdcbiAgLy8gc2V0IG9uY2VFdmVudHMgaGFzaFxuICB2YXIgb25jZUV2ZW50cyA9IHRoaXMuX29uY2VFdmVudHMgPSB0aGlzLl9vbmNlRXZlbnRzIHx8IHt9O1xuICAvLyBzZXQgb25jZUxpc3RlbmVycyBvYmplY3RcbiAgdmFyIG9uY2VMaXN0ZW5lcnMgPSBvbmNlRXZlbnRzWyBldmVudE5hbWUgXSA9IG9uY2VFdmVudHNbIGV2ZW50TmFtZSBdIHx8IHt9O1xuICAvLyBzZXQgZmxhZ1xuICBvbmNlTGlzdGVuZXJzWyBsaXN0ZW5lciBdID0gdHJ1ZTtcblxuICByZXR1cm4gdGhpcztcbn07XG5cbnByb3RvLm9mZiA9IGZ1bmN0aW9uKCBldmVudE5hbWUsIGxpc3RlbmVyICkge1xuICB2YXIgbGlzdGVuZXJzID0gdGhpcy5fZXZlbnRzICYmIHRoaXMuX2V2ZW50c1sgZXZlbnROYW1lIF07XG4gIGlmICggIWxpc3RlbmVycyB8fCAhbGlzdGVuZXJzLmxlbmd0aCApIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIGluZGV4ID0gbGlzdGVuZXJzLmluZGV4T2YoIGxpc3RlbmVyICk7XG4gIGlmICggaW5kZXggIT0gLTEgKSB7XG4gICAgbGlzdGVuZXJzLnNwbGljZSggaW5kZXgsIDEgKTtcbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufTtcblxucHJvdG8uZW1pdEV2ZW50ID0gZnVuY3Rpb24oIGV2ZW50TmFtZSwgYXJncyApIHtcbiAgdmFyIGxpc3RlbmVycyA9IHRoaXMuX2V2ZW50cyAmJiB0aGlzLl9ldmVudHNbIGV2ZW50TmFtZSBdO1xuICBpZiAoICFsaXN0ZW5lcnMgfHwgIWxpc3RlbmVycy5sZW5ndGggKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8vIGNvcHkgb3ZlciB0byBhdm9pZCBpbnRlcmZlcmVuY2UgaWYgLm9mZigpIGluIGxpc3RlbmVyXG4gIGxpc3RlbmVycyA9IGxpc3RlbmVycy5zbGljZSgwKTtcbiAgYXJncyA9IGFyZ3MgfHwgW107XG4gIC8vIG9uY2Ugc3R1ZmZcbiAgdmFyIG9uY2VMaXN0ZW5lcnMgPSB0aGlzLl9vbmNlRXZlbnRzICYmIHRoaXMuX29uY2VFdmVudHNbIGV2ZW50TmFtZSBdO1xuXG4gIGZvciAoIHZhciBpPTA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyBpKysgKSB7XG4gICAgdmFyIGxpc3RlbmVyID0gbGlzdGVuZXJzW2ldXG4gICAgdmFyIGlzT25jZSA9IG9uY2VMaXN0ZW5lcnMgJiYgb25jZUxpc3RlbmVyc1sgbGlzdGVuZXIgXTtcbiAgICBpZiAoIGlzT25jZSApIHtcbiAgICAgIC8vIHJlbW92ZSBsaXN0ZW5lclxuICAgICAgLy8gcmVtb3ZlIGJlZm9yZSB0cmlnZ2VyIHRvIHByZXZlbnQgcmVjdXJzaW9uXG4gICAgICB0aGlzLm9mZiggZXZlbnROYW1lLCBsaXN0ZW5lciApO1xuICAgICAgLy8gdW5zZXQgb25jZSBmbGFnXG4gICAgICBkZWxldGUgb25jZUxpc3RlbmVyc1sgbGlzdGVuZXIgXTtcbiAgICB9XG4gICAgLy8gdHJpZ2dlciBsaXN0ZW5lclxuICAgIGxpc3RlbmVyLmFwcGx5KCB0aGlzLCBhcmdzICk7XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn07XG5cbnByb3RvLmFsbE9mZiA9IGZ1bmN0aW9uKCkge1xuICBkZWxldGUgdGhpcy5fZXZlbnRzO1xuICBkZWxldGUgdGhpcy5fb25jZUV2ZW50cztcbn07XG5cbnJldHVybiBFdkVtaXR0ZXI7XG5cbn0pKTtcbiIsIi8qIVxuICogaW1hZ2VzTG9hZGVkIHY0LjEuNFxuICogSmF2YVNjcmlwdCBpcyBhbGwgbGlrZSBcIllvdSBpbWFnZXMgYXJlIGRvbmUgeWV0IG9yIHdoYXQ/XCJcbiAqIE1JVCBMaWNlbnNlXG4gKi9cblxuKCBmdW5jdGlvbiggd2luZG93LCBmYWN0b3J5ICkgeyAndXNlIHN0cmljdCc7XG4gIC8vIHVuaXZlcnNhbCBtb2R1bGUgZGVmaW5pdGlvblxuXG4gIC8qZ2xvYmFsIGRlZmluZTogZmFsc2UsIG1vZHVsZTogZmFsc2UsIHJlcXVpcmU6IGZhbHNlICovXG5cbiAgaWYgKCB0eXBlb2YgZGVmaW5lID09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCApIHtcbiAgICAvLyBBTURcbiAgICBkZWZpbmUoIFtcbiAgICAgICdldi1lbWl0dGVyL2V2LWVtaXR0ZXInXG4gICAgXSwgZnVuY3Rpb24oIEV2RW1pdHRlciApIHtcbiAgICAgIHJldHVybiBmYWN0b3J5KCB3aW5kb3csIEV2RW1pdHRlciApO1xuICAgIH0pO1xuICB9IGVsc2UgaWYgKCB0eXBlb2YgbW9kdWxlID09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzICkge1xuICAgIC8vIENvbW1vbkpTXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KFxuICAgICAgd2luZG93LFxuICAgICAgcmVxdWlyZSgnZXYtZW1pdHRlcicpXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBicm93c2VyIGdsb2JhbFxuICAgIHdpbmRvdy5pbWFnZXNMb2FkZWQgPSBmYWN0b3J5KFxuICAgICAgd2luZG93LFxuICAgICAgd2luZG93LkV2RW1pdHRlclxuICAgICk7XG4gIH1cblxufSkoIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogdGhpcyxcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gIGZhY3RvcnkgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cblxuZnVuY3Rpb24gZmFjdG9yeSggd2luZG93LCBFdkVtaXR0ZXIgKSB7XG5cbid1c2Ugc3RyaWN0JztcblxudmFyICQgPSB3aW5kb3cualF1ZXJ5O1xudmFyIGNvbnNvbGUgPSB3aW5kb3cuY29uc29sZTtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gaGVscGVycyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG4vLyBleHRlbmQgb2JqZWN0c1xuZnVuY3Rpb24gZXh0ZW5kKCBhLCBiICkge1xuICBmb3IgKCB2YXIgcHJvcCBpbiBiICkge1xuICAgIGFbIHByb3AgXSA9IGJbIHByb3AgXTtcbiAgfVxuICByZXR1cm4gYTtcbn1cblxudmFyIGFycmF5U2xpY2UgPSBBcnJheS5wcm90b3R5cGUuc2xpY2U7XG5cbi8vIHR1cm4gZWxlbWVudCBvciBub2RlTGlzdCBpbnRvIGFuIGFycmF5XG5mdW5jdGlvbiBtYWtlQXJyYXkoIG9iaiApIHtcbiAgaWYgKCBBcnJheS5pc0FycmF5KCBvYmogKSApIHtcbiAgICAvLyB1c2Ugb2JqZWN0IGlmIGFscmVhZHkgYW4gYXJyYXlcbiAgICByZXR1cm4gb2JqO1xuICB9XG5cbiAgdmFyIGlzQXJyYXlMaWtlID0gdHlwZW9mIG9iaiA9PSAnb2JqZWN0JyAmJiB0eXBlb2Ygb2JqLmxlbmd0aCA9PSAnbnVtYmVyJztcbiAgaWYgKCBpc0FycmF5TGlrZSApIHtcbiAgICAvLyBjb252ZXJ0IG5vZGVMaXN0IHRvIGFycmF5XG4gICAgcmV0dXJuIGFycmF5U2xpY2UuY2FsbCggb2JqICk7XG4gIH1cblxuICAvLyBhcnJheSBvZiBzaW5nbGUgaW5kZXhcbiAgcmV0dXJuIFsgb2JqIF07XG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIGltYWdlc0xvYWRlZCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXksIEVsZW1lbnQsIE5vZGVMaXN0LCBTdHJpbmd9IGVsZW1cbiAqIEBwYXJhbSB7T2JqZWN0IG9yIEZ1bmN0aW9ufSBvcHRpb25zIC0gaWYgZnVuY3Rpb24sIHVzZSBhcyBjYWxsYmFja1xuICogQHBhcmFtIHtGdW5jdGlvbn0gb25BbHdheXMgLSBjYWxsYmFjayBmdW5jdGlvblxuICovXG5mdW5jdGlvbiBJbWFnZXNMb2FkZWQoIGVsZW0sIG9wdGlvbnMsIG9uQWx3YXlzICkge1xuICAvLyBjb2VyY2UgSW1hZ2VzTG9hZGVkKCkgd2l0aG91dCBuZXcsIHRvIGJlIG5ldyBJbWFnZXNMb2FkZWQoKVxuICBpZiAoICEoIHRoaXMgaW5zdGFuY2VvZiBJbWFnZXNMb2FkZWQgKSApIHtcbiAgICByZXR1cm4gbmV3IEltYWdlc0xvYWRlZCggZWxlbSwgb3B0aW9ucywgb25BbHdheXMgKTtcbiAgfVxuICAvLyB1c2UgZWxlbSBhcyBzZWxlY3RvciBzdHJpbmdcbiAgdmFyIHF1ZXJ5RWxlbSA9IGVsZW07XG4gIGlmICggdHlwZW9mIGVsZW0gPT0gJ3N0cmluZycgKSB7XG4gICAgcXVlcnlFbGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCggZWxlbSApO1xuICB9XG4gIC8vIGJhaWwgaWYgYmFkIGVsZW1lbnRcbiAgaWYgKCAhcXVlcnlFbGVtICkge1xuICAgIGNvbnNvbGUuZXJyb3IoICdCYWQgZWxlbWVudCBmb3IgaW1hZ2VzTG9hZGVkICcgKyAoIHF1ZXJ5RWxlbSB8fCBlbGVtICkgKTtcbiAgICByZXR1cm47XG4gIH1cblxuICB0aGlzLmVsZW1lbnRzID0gbWFrZUFycmF5KCBxdWVyeUVsZW0gKTtcbiAgdGhpcy5vcHRpb25zID0gZXh0ZW5kKCB7fSwgdGhpcy5vcHRpb25zICk7XG4gIC8vIHNoaWZ0IGFyZ3VtZW50cyBpZiBubyBvcHRpb25zIHNldFxuICBpZiAoIHR5cGVvZiBvcHRpb25zID09ICdmdW5jdGlvbicgKSB7XG4gICAgb25BbHdheXMgPSBvcHRpb25zO1xuICB9IGVsc2Uge1xuICAgIGV4dGVuZCggdGhpcy5vcHRpb25zLCBvcHRpb25zICk7XG4gIH1cblxuICBpZiAoIG9uQWx3YXlzICkge1xuICAgIHRoaXMub24oICdhbHdheXMnLCBvbkFsd2F5cyApO1xuICB9XG5cbiAgdGhpcy5nZXRJbWFnZXMoKTtcblxuICBpZiAoICQgKSB7XG4gICAgLy8gYWRkIGpRdWVyeSBEZWZlcnJlZCBvYmplY3RcbiAgICB0aGlzLmpxRGVmZXJyZWQgPSBuZXcgJC5EZWZlcnJlZCgpO1xuICB9XG5cbiAgLy8gSEFDSyBjaGVjayBhc3luYyB0byBhbGxvdyB0aW1lIHRvIGJpbmQgbGlzdGVuZXJzXG4gIHNldFRpbWVvdXQoIHRoaXMuY2hlY2suYmluZCggdGhpcyApICk7XG59XG5cbkltYWdlc0xvYWRlZC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBFdkVtaXR0ZXIucHJvdG90eXBlICk7XG5cbkltYWdlc0xvYWRlZC5wcm90b3R5cGUub3B0aW9ucyA9IHt9O1xuXG5JbWFnZXNMb2FkZWQucHJvdG90eXBlLmdldEltYWdlcyA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLmltYWdlcyA9IFtdO1xuXG4gIC8vIGZpbHRlciAmIGZpbmQgaXRlbXMgaWYgd2UgaGF2ZSBhbiBpdGVtIHNlbGVjdG9yXG4gIHRoaXMuZWxlbWVudHMuZm9yRWFjaCggdGhpcy5hZGRFbGVtZW50SW1hZ2VzLCB0aGlzICk7XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7Tm9kZX0gZWxlbWVudFxuICovXG5JbWFnZXNMb2FkZWQucHJvdG90eXBlLmFkZEVsZW1lbnRJbWFnZXMgPSBmdW5jdGlvbiggZWxlbSApIHtcbiAgLy8gZmlsdGVyIHNpYmxpbmdzXG4gIGlmICggZWxlbS5ub2RlTmFtZSA9PSAnSU1HJyApIHtcbiAgICB0aGlzLmFkZEltYWdlKCBlbGVtICk7XG4gIH1cbiAgLy8gZ2V0IGJhY2tncm91bmQgaW1hZ2Ugb24gZWxlbWVudFxuICBpZiAoIHRoaXMub3B0aW9ucy5iYWNrZ3JvdW5kID09PSB0cnVlICkge1xuICAgIHRoaXMuYWRkRWxlbWVudEJhY2tncm91bmRJbWFnZXMoIGVsZW0gKTtcbiAgfVxuXG4gIC8vIGZpbmQgY2hpbGRyZW5cbiAgLy8gbm8gbm9uLWVsZW1lbnQgbm9kZXMsICMxNDNcbiAgdmFyIG5vZGVUeXBlID0gZWxlbS5ub2RlVHlwZTtcbiAgaWYgKCAhbm9kZVR5cGUgfHwgIWVsZW1lbnROb2RlVHlwZXNbIG5vZGVUeXBlIF0gKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBjaGlsZEltZ3MgPSBlbGVtLnF1ZXJ5U2VsZWN0b3JBbGwoJ2ltZycpO1xuICAvLyBjb25jYXQgY2hpbGRFbGVtcyB0byBmaWx0ZXJGb3VuZCBhcnJheVxuICBmb3IgKCB2YXIgaT0wOyBpIDwgY2hpbGRJbWdzLmxlbmd0aDsgaSsrICkge1xuICAgIHZhciBpbWcgPSBjaGlsZEltZ3NbaV07XG4gICAgdGhpcy5hZGRJbWFnZSggaW1nICk7XG4gIH1cblxuICAvLyBnZXQgY2hpbGQgYmFja2dyb3VuZCBpbWFnZXNcbiAgaWYgKCB0eXBlb2YgdGhpcy5vcHRpb25zLmJhY2tncm91bmQgPT0gJ3N0cmluZycgKSB7XG4gICAgdmFyIGNoaWxkcmVuID0gZWxlbS5xdWVyeVNlbGVjdG9yQWxsKCB0aGlzLm9wdGlvbnMuYmFja2dyb3VuZCApO1xuICAgIGZvciAoIGk9MDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrICkge1xuICAgICAgdmFyIGNoaWxkID0gY2hpbGRyZW5baV07XG4gICAgICB0aGlzLmFkZEVsZW1lbnRCYWNrZ3JvdW5kSW1hZ2VzKCBjaGlsZCApO1xuICAgIH1cbiAgfVxufTtcblxudmFyIGVsZW1lbnROb2RlVHlwZXMgPSB7XG4gIDE6IHRydWUsXG4gIDk6IHRydWUsXG4gIDExOiB0cnVlXG59O1xuXG5JbWFnZXNMb2FkZWQucHJvdG90eXBlLmFkZEVsZW1lbnRCYWNrZ3JvdW5kSW1hZ2VzID0gZnVuY3Rpb24oIGVsZW0gKSB7XG4gIHZhciBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoIGVsZW0gKTtcbiAgaWYgKCAhc3R5bGUgKSB7XG4gICAgLy8gRmlyZWZveCByZXR1cm5zIG51bGwgaWYgaW4gYSBoaWRkZW4gaWZyYW1lIGh0dHBzOi8vYnVnemlsLmxhLzU0ODM5N1xuICAgIHJldHVybjtcbiAgfVxuICAvLyBnZXQgdXJsIGluc2lkZSB1cmwoXCIuLi5cIilcbiAgdmFyIHJlVVJMID0gL3VybFxcKChbJ1wiXSk/KC4qPylcXDFcXCkvZ2k7XG4gIHZhciBtYXRjaGVzID0gcmVVUkwuZXhlYyggc3R5bGUuYmFja2dyb3VuZEltYWdlICk7XG4gIHdoaWxlICggbWF0Y2hlcyAhPT0gbnVsbCApIHtcbiAgICB2YXIgdXJsID0gbWF0Y2hlcyAmJiBtYXRjaGVzWzJdO1xuICAgIGlmICggdXJsICkge1xuICAgICAgdGhpcy5hZGRCYWNrZ3JvdW5kKCB1cmwsIGVsZW0gKTtcbiAgICB9XG4gICAgbWF0Y2hlcyA9IHJlVVJMLmV4ZWMoIHN0eWxlLmJhY2tncm91bmRJbWFnZSApO1xuICB9XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7SW1hZ2V9IGltZ1xuICovXG5JbWFnZXNMb2FkZWQucHJvdG90eXBlLmFkZEltYWdlID0gZnVuY3Rpb24oIGltZyApIHtcbiAgdmFyIGxvYWRpbmdJbWFnZSA9IG5ldyBMb2FkaW5nSW1hZ2UoIGltZyApO1xuICB0aGlzLmltYWdlcy5wdXNoKCBsb2FkaW5nSW1hZ2UgKTtcbn07XG5cbkltYWdlc0xvYWRlZC5wcm90b3R5cGUuYWRkQmFja2dyb3VuZCA9IGZ1bmN0aW9uKCB1cmwsIGVsZW0gKSB7XG4gIHZhciBiYWNrZ3JvdW5kID0gbmV3IEJhY2tncm91bmQoIHVybCwgZWxlbSApO1xuICB0aGlzLmltYWdlcy5wdXNoKCBiYWNrZ3JvdW5kICk7XG59O1xuXG5JbWFnZXNMb2FkZWQucHJvdG90eXBlLmNoZWNrID0gZnVuY3Rpb24oKSB7XG4gIHZhciBfdGhpcyA9IHRoaXM7XG4gIHRoaXMucHJvZ3Jlc3NlZENvdW50ID0gMDtcbiAgdGhpcy5oYXNBbnlCcm9rZW4gPSBmYWxzZTtcbiAgLy8gY29tcGxldGUgaWYgbm8gaW1hZ2VzXG4gIGlmICggIXRoaXMuaW1hZ2VzLmxlbmd0aCApIHtcbiAgICB0aGlzLmNvbXBsZXRlKCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgZnVuY3Rpb24gb25Qcm9ncmVzcyggaW1hZ2UsIGVsZW0sIG1lc3NhZ2UgKSB7XG4gICAgLy8gSEFDSyAtIENocm9tZSB0cmlnZ2VycyBldmVudCBiZWZvcmUgb2JqZWN0IHByb3BlcnRpZXMgaGF2ZSBjaGFuZ2VkLiAjODNcbiAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcbiAgICAgIF90aGlzLnByb2dyZXNzKCBpbWFnZSwgZWxlbSwgbWVzc2FnZSApO1xuICAgIH0pO1xuICB9XG5cbiAgdGhpcy5pbWFnZXMuZm9yRWFjaCggZnVuY3Rpb24oIGxvYWRpbmdJbWFnZSApIHtcbiAgICBsb2FkaW5nSW1hZ2Uub25jZSggJ3Byb2dyZXNzJywgb25Qcm9ncmVzcyApO1xuICAgIGxvYWRpbmdJbWFnZS5jaGVjaygpO1xuICB9KTtcbn07XG5cbkltYWdlc0xvYWRlZC5wcm90b3R5cGUucHJvZ3Jlc3MgPSBmdW5jdGlvbiggaW1hZ2UsIGVsZW0sIG1lc3NhZ2UgKSB7XG4gIHRoaXMucHJvZ3Jlc3NlZENvdW50Kys7XG4gIHRoaXMuaGFzQW55QnJva2VuID0gdGhpcy5oYXNBbnlCcm9rZW4gfHwgIWltYWdlLmlzTG9hZGVkO1xuICAvLyBwcm9ncmVzcyBldmVudFxuICB0aGlzLmVtaXRFdmVudCggJ3Byb2dyZXNzJywgWyB0aGlzLCBpbWFnZSwgZWxlbSBdICk7XG4gIGlmICggdGhpcy5qcURlZmVycmVkICYmIHRoaXMuanFEZWZlcnJlZC5ub3RpZnkgKSB7XG4gICAgdGhpcy5qcURlZmVycmVkLm5vdGlmeSggdGhpcywgaW1hZ2UgKTtcbiAgfVxuICAvLyBjaGVjayBpZiBjb21wbGV0ZWRcbiAgaWYgKCB0aGlzLnByb2dyZXNzZWRDb3VudCA9PSB0aGlzLmltYWdlcy5sZW5ndGggKSB7XG4gICAgdGhpcy5jb21wbGV0ZSgpO1xuICB9XG5cbiAgaWYgKCB0aGlzLm9wdGlvbnMuZGVidWcgJiYgY29uc29sZSApIHtcbiAgICBjb25zb2xlLmxvZyggJ3Byb2dyZXNzOiAnICsgbWVzc2FnZSwgaW1hZ2UsIGVsZW0gKTtcbiAgfVxufTtcblxuSW1hZ2VzTG9hZGVkLnByb3RvdHlwZS5jb21wbGV0ZSA9IGZ1bmN0aW9uKCkge1xuICB2YXIgZXZlbnROYW1lID0gdGhpcy5oYXNBbnlCcm9rZW4gPyAnZmFpbCcgOiAnZG9uZSc7XG4gIHRoaXMuaXNDb21wbGV0ZSA9IHRydWU7XG4gIHRoaXMuZW1pdEV2ZW50KCBldmVudE5hbWUsIFsgdGhpcyBdICk7XG4gIHRoaXMuZW1pdEV2ZW50KCAnYWx3YXlzJywgWyB0aGlzIF0gKTtcbiAgaWYgKCB0aGlzLmpxRGVmZXJyZWQgKSB7XG4gICAgdmFyIGpxTWV0aG9kID0gdGhpcy5oYXNBbnlCcm9rZW4gPyAncmVqZWN0JyA6ICdyZXNvbHZlJztcbiAgICB0aGlzLmpxRGVmZXJyZWRbIGpxTWV0aG9kIF0oIHRoaXMgKTtcbiAgfVxufTtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbmZ1bmN0aW9uIExvYWRpbmdJbWFnZSggaW1nICkge1xuICB0aGlzLmltZyA9IGltZztcbn1cblxuTG9hZGluZ0ltYWdlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEV2RW1pdHRlci5wcm90b3R5cGUgKTtcblxuTG9hZGluZ0ltYWdlLnByb3RvdHlwZS5jaGVjayA9IGZ1bmN0aW9uKCkge1xuICAvLyBJZiBjb21wbGV0ZSBpcyB0cnVlIGFuZCBicm93c2VyIHN1cHBvcnRzIG5hdHVyYWwgc2l6ZXMsXG4gIC8vIHRyeSB0byBjaGVjayBmb3IgaW1hZ2Ugc3RhdHVzIG1hbnVhbGx5LlxuICB2YXIgaXNDb21wbGV0ZSA9IHRoaXMuZ2V0SXNJbWFnZUNvbXBsZXRlKCk7XG4gIGlmICggaXNDb21wbGV0ZSApIHtcbiAgICAvLyByZXBvcnQgYmFzZWQgb24gbmF0dXJhbFdpZHRoXG4gICAgdGhpcy5jb25maXJtKCB0aGlzLmltZy5uYXR1cmFsV2lkdGggIT09IDAsICduYXR1cmFsV2lkdGgnICk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gSWYgbm9uZSBvZiB0aGUgY2hlY2tzIGFib3ZlIG1hdGNoZWQsIHNpbXVsYXRlIGxvYWRpbmcgb24gZGV0YWNoZWQgZWxlbWVudC5cbiAgdGhpcy5wcm94eUltYWdlID0gbmV3IEltYWdlKCk7XG4gIHRoaXMucHJveHlJbWFnZS5hZGRFdmVudExpc3RlbmVyKCAnbG9hZCcsIHRoaXMgKTtcbiAgdGhpcy5wcm94eUltYWdlLmFkZEV2ZW50TGlzdGVuZXIoICdlcnJvcicsIHRoaXMgKTtcbiAgLy8gYmluZCB0byBpbWFnZSBhcyB3ZWxsIGZvciBGaXJlZm94LiAjMTkxXG4gIHRoaXMuaW1nLmFkZEV2ZW50TGlzdGVuZXIoICdsb2FkJywgdGhpcyApO1xuICB0aGlzLmltZy5hZGRFdmVudExpc3RlbmVyKCAnZXJyb3InLCB0aGlzICk7XG4gIHRoaXMucHJveHlJbWFnZS5zcmMgPSB0aGlzLmltZy5zcmM7XG59O1xuXG5Mb2FkaW5nSW1hZ2UucHJvdG90eXBlLmdldElzSW1hZ2VDb21wbGV0ZSA9IGZ1bmN0aW9uKCkge1xuICAvLyBjaGVjayBmb3Igbm9uLXplcm8sIG5vbi11bmRlZmluZWQgbmF0dXJhbFdpZHRoXG4gIC8vIGZpeGVzIFNhZmFyaStJbmZpbml0ZVNjcm9sbCtNYXNvbnJ5IGJ1ZyBpbmZpbml0ZS1zY3JvbGwjNjcxXG4gIHJldHVybiB0aGlzLmltZy5jb21wbGV0ZSAmJiB0aGlzLmltZy5uYXR1cmFsV2lkdGg7XG59O1xuXG5Mb2FkaW5nSW1hZ2UucHJvdG90eXBlLmNvbmZpcm0gPSBmdW5jdGlvbiggaXNMb2FkZWQsIG1lc3NhZ2UgKSB7XG4gIHRoaXMuaXNMb2FkZWQgPSBpc0xvYWRlZDtcbiAgdGhpcy5lbWl0RXZlbnQoICdwcm9ncmVzcycsIFsgdGhpcywgdGhpcy5pbWcsIG1lc3NhZ2UgXSApO1xufTtcblxuLy8gLS0tLS0gZXZlbnRzIC0tLS0tIC8vXG5cbi8vIHRyaWdnZXIgc3BlY2lmaWVkIGhhbmRsZXIgZm9yIGV2ZW50IHR5cGVcbkxvYWRpbmdJbWFnZS5wcm90b3R5cGUuaGFuZGxlRXZlbnQgPSBmdW5jdGlvbiggZXZlbnQgKSB7XG4gIHZhciBtZXRob2QgPSAnb24nICsgZXZlbnQudHlwZTtcbiAgaWYgKCB0aGlzWyBtZXRob2QgXSApIHtcbiAgICB0aGlzWyBtZXRob2QgXSggZXZlbnQgKTtcbiAgfVxufTtcblxuTG9hZGluZ0ltYWdlLnByb3RvdHlwZS5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5jb25maXJtKCB0cnVlLCAnb25sb2FkJyApO1xuICB0aGlzLnVuYmluZEV2ZW50cygpO1xufTtcblxuTG9hZGluZ0ltYWdlLnByb3RvdHlwZS5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuY29uZmlybSggZmFsc2UsICdvbmVycm9yJyApO1xuICB0aGlzLnVuYmluZEV2ZW50cygpO1xufTtcblxuTG9hZGluZ0ltYWdlLnByb3RvdHlwZS51bmJpbmRFdmVudHMgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5wcm94eUltYWdlLnJlbW92ZUV2ZW50TGlzdGVuZXIoICdsb2FkJywgdGhpcyApO1xuICB0aGlzLnByb3h5SW1hZ2UucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ2Vycm9yJywgdGhpcyApO1xuICB0aGlzLmltZy5yZW1vdmVFdmVudExpc3RlbmVyKCAnbG9hZCcsIHRoaXMgKTtcbiAgdGhpcy5pbWcucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ2Vycm9yJywgdGhpcyApO1xufTtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gQmFja2dyb3VuZCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG5mdW5jdGlvbiBCYWNrZ3JvdW5kKCB1cmwsIGVsZW1lbnQgKSB7XG4gIHRoaXMudXJsID0gdXJsO1xuICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICB0aGlzLmltZyA9IG5ldyBJbWFnZSgpO1xufVxuXG4vLyBpbmhlcml0IExvYWRpbmdJbWFnZSBwcm90b3R5cGVcbkJhY2tncm91bmQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggTG9hZGluZ0ltYWdlLnByb3RvdHlwZSApO1xuXG5CYWNrZ3JvdW5kLnByb3RvdHlwZS5jaGVjayA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLmltZy5hZGRFdmVudExpc3RlbmVyKCAnbG9hZCcsIHRoaXMgKTtcbiAgdGhpcy5pbWcuYWRkRXZlbnRMaXN0ZW5lciggJ2Vycm9yJywgdGhpcyApO1xuICB0aGlzLmltZy5zcmMgPSB0aGlzLnVybDtcbiAgLy8gY2hlY2sgaWYgaW1hZ2UgaXMgYWxyZWFkeSBjb21wbGV0ZVxuICB2YXIgaXNDb21wbGV0ZSA9IHRoaXMuZ2V0SXNJbWFnZUNvbXBsZXRlKCk7XG4gIGlmICggaXNDb21wbGV0ZSApIHtcbiAgICB0aGlzLmNvbmZpcm0oIHRoaXMuaW1nLm5hdHVyYWxXaWR0aCAhPT0gMCwgJ25hdHVyYWxXaWR0aCcgKTtcbiAgICB0aGlzLnVuYmluZEV2ZW50cygpO1xuICB9XG59O1xuXG5CYWNrZ3JvdW5kLnByb3RvdHlwZS51bmJpbmRFdmVudHMgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5pbWcucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ2xvYWQnLCB0aGlzICk7XG4gIHRoaXMuaW1nLnJlbW92ZUV2ZW50TGlzdGVuZXIoICdlcnJvcicsIHRoaXMgKTtcbn07XG5cbkJhY2tncm91bmQucHJvdG90eXBlLmNvbmZpcm0gPSBmdW5jdGlvbiggaXNMb2FkZWQsIG1lc3NhZ2UgKSB7XG4gIHRoaXMuaXNMb2FkZWQgPSBpc0xvYWRlZDtcbiAgdGhpcy5lbWl0RXZlbnQoICdwcm9ncmVzcycsIFsgdGhpcywgdGhpcy5lbGVtZW50LCBtZXNzYWdlIF0gKTtcbn07XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIGpRdWVyeSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG5JbWFnZXNMb2FkZWQubWFrZUpRdWVyeVBsdWdpbiA9IGZ1bmN0aW9uKCBqUXVlcnkgKSB7XG4gIGpRdWVyeSA9IGpRdWVyeSB8fCB3aW5kb3cualF1ZXJ5O1xuICBpZiAoICFqUXVlcnkgKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8vIHNldCBsb2NhbCB2YXJpYWJsZVxuICAkID0galF1ZXJ5O1xuICAvLyAkKCkuaW1hZ2VzTG9hZGVkKClcbiAgJC5mbi5pbWFnZXNMb2FkZWQgPSBmdW5jdGlvbiggb3B0aW9ucywgY2FsbGJhY2sgKSB7XG4gICAgdmFyIGluc3RhbmNlID0gbmV3IEltYWdlc0xvYWRlZCggdGhpcywgb3B0aW9ucywgY2FsbGJhY2sgKTtcbiAgICByZXR1cm4gaW5zdGFuY2UuanFEZWZlcnJlZC5wcm9taXNlKCAkKHRoaXMpICk7XG4gIH07XG59O1xuLy8gdHJ5IG1ha2luZyBwbHVnaW5cbkltYWdlc0xvYWRlZC5tYWtlSlF1ZXJ5UGx1Z2luKCk7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG5yZXR1cm4gSW1hZ2VzTG9hZGVkO1xuXG59KTtcbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIGxvZGFzaCAzLjEwLjEgKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG4gKiBCdWlsZDogYGxvZGFzaCBtb2Rlcm4gLWQgLW8gLi9pbmRleC5qc2BcbiAqIENvcHlyaWdodCAyMDEyLTIwMTUgVGhlIERvam8gRm91bmRhdGlvbiA8aHR0cDovL2Rvam9mb3VuZGF0aW9uLm9yZy8+XG4gKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuICogQ29weXJpZ2h0IDIwMDktMjAxNSBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuICogQXZhaWxhYmxlIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cbiAqL1xuOyhmdW5jdGlvbigpIHtcblxuICAvKiogVXNlZCBhcyBhIHNhZmUgcmVmZXJlbmNlIGZvciBgdW5kZWZpbmVkYCBpbiBwcmUtRVM1IGVudmlyb25tZW50cy4gKi9cbiAgdmFyIHVuZGVmaW5lZDtcblxuICAvKiogVXNlZCBhcyB0aGUgc2VtYW50aWMgdmVyc2lvbiBudW1iZXIuICovXG4gIHZhciBWRVJTSU9OID0gJzMuMTAuMSc7XG5cbiAgLyoqIFVzZWQgdG8gY29tcG9zZSBiaXRtYXNrcyBmb3Igd3JhcHBlciBtZXRhZGF0YS4gKi9cbiAgdmFyIEJJTkRfRkxBRyA9IDEsXG4gICAgICBCSU5EX0tFWV9GTEFHID0gMixcbiAgICAgIENVUlJZX0JPVU5EX0ZMQUcgPSA0LFxuICAgICAgQ1VSUllfRkxBRyA9IDgsXG4gICAgICBDVVJSWV9SSUdIVF9GTEFHID0gMTYsXG4gICAgICBQQVJUSUFMX0ZMQUcgPSAzMixcbiAgICAgIFBBUlRJQUxfUklHSFRfRkxBRyA9IDY0LFxuICAgICAgQVJZX0ZMQUcgPSAxMjgsXG4gICAgICBSRUFSR19GTEFHID0gMjU2O1xuXG4gIC8qKiBVc2VkIGFzIGRlZmF1bHQgb3B0aW9ucyBmb3IgYF8udHJ1bmNgLiAqL1xuICB2YXIgREVGQVVMVF9UUlVOQ19MRU5HVEggPSAzMCxcbiAgICAgIERFRkFVTFRfVFJVTkNfT01JU1NJT04gPSAnLi4uJztcblxuICAvKiogVXNlZCB0byBkZXRlY3Qgd2hlbiBhIGZ1bmN0aW9uIGJlY29tZXMgaG90LiAqL1xuICB2YXIgSE9UX0NPVU5UID0gMTUwLFxuICAgICAgSE9UX1NQQU4gPSAxNjtcblxuICAvKiogVXNlZCBhcyB0aGUgc2l6ZSB0byBlbmFibGUgbGFyZ2UgYXJyYXkgb3B0aW1pemF0aW9ucy4gKi9cbiAgdmFyIExBUkdFX0FSUkFZX1NJWkUgPSAyMDA7XG5cbiAgLyoqIFVzZWQgdG8gaW5kaWNhdGUgdGhlIHR5cGUgb2YgbGF6eSBpdGVyYXRlZXMuICovXG4gIHZhciBMQVpZX0ZJTFRFUl9GTEFHID0gMSxcbiAgICAgIExBWllfTUFQX0ZMQUcgPSAyO1xuXG4gIC8qKiBVc2VkIGFzIHRoZSBgVHlwZUVycm9yYCBtZXNzYWdlIGZvciBcIkZ1bmN0aW9uc1wiIG1ldGhvZHMuICovXG4gIHZhciBGVU5DX0VSUk9SX1RFWFQgPSAnRXhwZWN0ZWQgYSBmdW5jdGlvbic7XG5cbiAgLyoqIFVzZWQgYXMgdGhlIGludGVybmFsIGFyZ3VtZW50IHBsYWNlaG9sZGVyLiAqL1xuICB2YXIgUExBQ0VIT0xERVIgPSAnX19sb2Rhc2hfcGxhY2Vob2xkZXJfXyc7XG5cbiAgLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xuICB2YXIgYXJnc1RhZyA9ICdbb2JqZWN0IEFyZ3VtZW50c10nLFxuICAgICAgYXJyYXlUYWcgPSAnW29iamVjdCBBcnJheV0nLFxuICAgICAgYm9vbFRhZyA9ICdbb2JqZWN0IEJvb2xlYW5dJyxcbiAgICAgIGRhdGVUYWcgPSAnW29iamVjdCBEYXRlXScsXG4gICAgICBlcnJvclRhZyA9ICdbb2JqZWN0IEVycm9yXScsXG4gICAgICBmdW5jVGFnID0gJ1tvYmplY3QgRnVuY3Rpb25dJyxcbiAgICAgIG1hcFRhZyA9ICdbb2JqZWN0IE1hcF0nLFxuICAgICAgbnVtYmVyVGFnID0gJ1tvYmplY3QgTnVtYmVyXScsXG4gICAgICBvYmplY3RUYWcgPSAnW29iamVjdCBPYmplY3RdJyxcbiAgICAgIHJlZ2V4cFRhZyA9ICdbb2JqZWN0IFJlZ0V4cF0nLFxuICAgICAgc2V0VGFnID0gJ1tvYmplY3QgU2V0XScsXG4gICAgICBzdHJpbmdUYWcgPSAnW29iamVjdCBTdHJpbmddJyxcbiAgICAgIHdlYWtNYXBUYWcgPSAnW29iamVjdCBXZWFrTWFwXSc7XG5cbiAgdmFyIGFycmF5QnVmZmVyVGFnID0gJ1tvYmplY3QgQXJyYXlCdWZmZXJdJyxcbiAgICAgIGZsb2F0MzJUYWcgPSAnW29iamVjdCBGbG9hdDMyQXJyYXldJyxcbiAgICAgIGZsb2F0NjRUYWcgPSAnW29iamVjdCBGbG9hdDY0QXJyYXldJyxcbiAgICAgIGludDhUYWcgPSAnW29iamVjdCBJbnQ4QXJyYXldJyxcbiAgICAgIGludDE2VGFnID0gJ1tvYmplY3QgSW50MTZBcnJheV0nLFxuICAgICAgaW50MzJUYWcgPSAnW29iamVjdCBJbnQzMkFycmF5XScsXG4gICAgICB1aW50OFRhZyA9ICdbb2JqZWN0IFVpbnQ4QXJyYXldJyxcbiAgICAgIHVpbnQ4Q2xhbXBlZFRhZyA9ICdbb2JqZWN0IFVpbnQ4Q2xhbXBlZEFycmF5XScsXG4gICAgICB1aW50MTZUYWcgPSAnW29iamVjdCBVaW50MTZBcnJheV0nLFxuICAgICAgdWludDMyVGFnID0gJ1tvYmplY3QgVWludDMyQXJyYXldJztcblxuICAvKiogVXNlZCB0byBtYXRjaCBlbXB0eSBzdHJpbmcgbGl0ZXJhbHMgaW4gY29tcGlsZWQgdGVtcGxhdGUgc291cmNlLiAqL1xuICB2YXIgcmVFbXB0eVN0cmluZ0xlYWRpbmcgPSAvXFxiX19wIFxcKz0gJyc7L2csXG4gICAgICByZUVtcHR5U3RyaW5nTWlkZGxlID0gL1xcYihfX3AgXFwrPSkgJycgXFwrL2csXG4gICAgICByZUVtcHR5U3RyaW5nVHJhaWxpbmcgPSAvKF9fZVxcKC4qP1xcKXxcXGJfX3RcXCkpIFxcK1xcbicnOy9nO1xuXG4gIC8qKiBVc2VkIHRvIG1hdGNoIEhUTUwgZW50aXRpZXMgYW5kIEhUTUwgY2hhcmFjdGVycy4gKi9cbiAgdmFyIHJlRXNjYXBlZEh0bWwgPSAvJig/OmFtcHxsdHxndHxxdW90fCMzOXwjOTYpOy9nLFxuICAgICAgcmVVbmVzY2FwZWRIdG1sID0gL1smPD5cIidgXS9nLFxuICAgICAgcmVIYXNFc2NhcGVkSHRtbCA9IFJlZ0V4cChyZUVzY2FwZWRIdG1sLnNvdXJjZSksXG4gICAgICByZUhhc1VuZXNjYXBlZEh0bWwgPSBSZWdFeHAocmVVbmVzY2FwZWRIdG1sLnNvdXJjZSk7XG5cbiAgLyoqIFVzZWQgdG8gbWF0Y2ggdGVtcGxhdGUgZGVsaW1pdGVycy4gKi9cbiAgdmFyIHJlRXNjYXBlID0gLzwlLShbXFxzXFxTXSs/KSU+L2csXG4gICAgICByZUV2YWx1YXRlID0gLzwlKFtcXHNcXFNdKz8pJT4vZyxcbiAgICAgIHJlSW50ZXJwb2xhdGUgPSAvPCU9KFtcXHNcXFNdKz8pJT4vZztcblxuICAvKiogVXNlZCB0byBtYXRjaCBwcm9wZXJ0eSBuYW1lcyB3aXRoaW4gcHJvcGVydHkgcGF0aHMuICovXG4gIHZhciByZUlzRGVlcFByb3AgPSAvXFwufFxcWyg/OlteW1xcXV0qfChbXCInXSkoPzooPyFcXDEpW15cXG5cXFxcXXxcXFxcLikqP1xcMSlcXF0vLFxuICAgICAgcmVJc1BsYWluUHJvcCA9IC9eXFx3KiQvLFxuICAgICAgcmVQcm9wTmFtZSA9IC9bXi5bXFxdXSt8XFxbKD86KC0/XFxkKyg/OlxcLlxcZCspPyl8KFtcIiddKSgoPzooPyFcXDIpW15cXG5cXFxcXXxcXFxcLikqPylcXDIpXFxdL2c7XG5cbiAgLyoqXG4gICAqIFVzZWQgdG8gbWF0Y2ggYFJlZ0V4cGAgW3N5bnRheCBjaGFyYWN0ZXJzXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1wYXR0ZXJucylcbiAgICogYW5kIHRob3NlIG91dGxpbmVkIGJ5IFtgRXNjYXBlUmVnRXhwUGF0dGVybmBdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLWVzY2FwZXJlZ2V4cHBhdHRlcm4pLlxuICAgKi9cbiAgdmFyIHJlUmVnRXhwQ2hhcnMgPSAvXls6ISxdfFtcXFxcXiQuKis/KClbXFxde318XFwvXXwoXlswLTlhLWZBLUZucnR1dnhdKXwoW1xcblxcclxcdTIwMjhcXHUyMDI5XSkvZyxcbiAgICAgIHJlSGFzUmVnRXhwQ2hhcnMgPSBSZWdFeHAocmVSZWdFeHBDaGFycy5zb3VyY2UpO1xuXG4gIC8qKiBVc2VkIHRvIG1hdGNoIFtjb21iaW5pbmcgZGlhY3JpdGljYWwgbWFya3NdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0NvbWJpbmluZ19EaWFjcml0aWNhbF9NYXJrcykuICovXG4gIHZhciByZUNvbWJvTWFyayA9IC9bXFx1MDMwMC1cXHUwMzZmXFx1ZmUyMC1cXHVmZTIzXS9nO1xuXG4gIC8qKiBVc2VkIHRvIG1hdGNoIGJhY2tzbGFzaGVzIGluIHByb3BlcnR5IHBhdGhzLiAqL1xuICB2YXIgcmVFc2NhcGVDaGFyID0gL1xcXFwoXFxcXCk/L2c7XG5cbiAgLyoqIFVzZWQgdG8gbWF0Y2ggW0VTIHRlbXBsYXRlIGRlbGltaXRlcnNdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLXRlbXBsYXRlLWxpdGVyYWwtbGV4aWNhbC1jb21wb25lbnRzKS4gKi9cbiAgdmFyIHJlRXNUZW1wbGF0ZSA9IC9cXCRcXHsoW15cXFxcfV0qKD86XFxcXC5bXlxcXFx9XSopKilcXH0vZztcblxuICAvKiogVXNlZCB0byBtYXRjaCBgUmVnRXhwYCBmbGFncyBmcm9tIHRoZWlyIGNvZXJjZWQgc3RyaW5nIHZhbHVlcy4gKi9cbiAgdmFyIHJlRmxhZ3MgPSAvXFx3KiQvO1xuXG4gIC8qKiBVc2VkIHRvIGRldGVjdCBoZXhhZGVjaW1hbCBzdHJpbmcgdmFsdWVzLiAqL1xuICB2YXIgcmVIYXNIZXhQcmVmaXggPSAvXjBbeFhdLztcblxuICAvKiogVXNlZCB0byBkZXRlY3QgaG9zdCBjb25zdHJ1Y3RvcnMgKFNhZmFyaSA+IDUpLiAqL1xuICB2YXIgcmVJc0hvc3RDdG9yID0gL15cXFtvYmplY3QgLis/Q29uc3RydWN0b3JcXF0kLztcblxuICAvKiogVXNlZCB0byBkZXRlY3QgdW5zaWduZWQgaW50ZWdlciB2YWx1ZXMuICovXG4gIHZhciByZUlzVWludCA9IC9eXFxkKyQvO1xuXG4gIC8qKiBVc2VkIHRvIG1hdGNoIGxhdGluLTEgc3VwcGxlbWVudGFyeSBsZXR0ZXJzIChleGNsdWRpbmcgbWF0aGVtYXRpY2FsIG9wZXJhdG9ycykuICovXG4gIHZhciByZUxhdGluMSA9IC9bXFx4YzAtXFx4ZDZcXHhkOC1cXHhkZVxceGRmLVxceGY2XFx4ZjgtXFx4ZmZdL2c7XG5cbiAgLyoqIFVzZWQgdG8gZW5zdXJlIGNhcHR1cmluZyBvcmRlciBvZiB0ZW1wbGF0ZSBkZWxpbWl0ZXJzLiAqL1xuICB2YXIgcmVOb01hdGNoID0gLygkXikvO1xuXG4gIC8qKiBVc2VkIHRvIG1hdGNoIHVuZXNjYXBlZCBjaGFyYWN0ZXJzIGluIGNvbXBpbGVkIHN0cmluZyBsaXRlcmFscy4gKi9cbiAgdmFyIHJlVW5lc2NhcGVkU3RyaW5nID0gL1snXFxuXFxyXFx1MjAyOFxcdTIwMjlcXFxcXS9nO1xuXG4gIC8qKiBVc2VkIHRvIG1hdGNoIHdvcmRzIHRvIGNyZWF0ZSBjb21wb3VuZCB3b3Jkcy4gKi9cbiAgdmFyIHJlV29yZHMgPSAoZnVuY3Rpb24oKSB7XG4gICAgdmFyIHVwcGVyID0gJ1tBLVpcXFxceGMwLVxcXFx4ZDZcXFxceGQ4LVxcXFx4ZGVdJyxcbiAgICAgICAgbG93ZXIgPSAnW2EtelxcXFx4ZGYtXFxcXHhmNlxcXFx4ZjgtXFxcXHhmZl0rJztcblxuICAgIHJldHVybiBSZWdFeHAodXBwZXIgKyAnKyg/PScgKyB1cHBlciArIGxvd2VyICsgJyl8JyArIHVwcGVyICsgJz8nICsgbG93ZXIgKyAnfCcgKyB1cHBlciArICcrfFswLTldKycsICdnJyk7XG4gIH0oKSk7XG5cbiAgLyoqIFVzZWQgdG8gYXNzaWduIGRlZmF1bHQgYGNvbnRleHRgIG9iamVjdCBwcm9wZXJ0aWVzLiAqL1xuICB2YXIgY29udGV4dFByb3BzID0gW1xuICAgICdBcnJheScsICdBcnJheUJ1ZmZlcicsICdEYXRlJywgJ0Vycm9yJywgJ0Zsb2F0MzJBcnJheScsICdGbG9hdDY0QXJyYXknLFxuICAgICdGdW5jdGlvbicsICdJbnQ4QXJyYXknLCAnSW50MTZBcnJheScsICdJbnQzMkFycmF5JywgJ01hdGgnLCAnTnVtYmVyJyxcbiAgICAnT2JqZWN0JywgJ1JlZ0V4cCcsICdTZXQnLCAnU3RyaW5nJywgJ18nLCAnY2xlYXJUaW1lb3V0JywgJ2lzRmluaXRlJyxcbiAgICAncGFyc2VGbG9hdCcsICdwYXJzZUludCcsICdzZXRUaW1lb3V0JywgJ1R5cGVFcnJvcicsICdVaW50OEFycmF5JyxcbiAgICAnVWludDhDbGFtcGVkQXJyYXknLCAnVWludDE2QXJyYXknLCAnVWludDMyQXJyYXknLCAnV2Vha01hcCdcbiAgXTtcblxuICAvKiogVXNlZCB0byBtYWtlIHRlbXBsYXRlIHNvdXJjZVVSTHMgZWFzaWVyIHRvIGlkZW50aWZ5LiAqL1xuICB2YXIgdGVtcGxhdGVDb3VudGVyID0gLTE7XG5cbiAgLyoqIFVzZWQgdG8gaWRlbnRpZnkgYHRvU3RyaW5nVGFnYCB2YWx1ZXMgb2YgdHlwZWQgYXJyYXlzLiAqL1xuICB2YXIgdHlwZWRBcnJheVRhZ3MgPSB7fTtcbiAgdHlwZWRBcnJheVRhZ3NbZmxvYXQzMlRhZ10gPSB0eXBlZEFycmF5VGFnc1tmbG9hdDY0VGFnXSA9XG4gIHR5cGVkQXJyYXlUYWdzW2ludDhUYWddID0gdHlwZWRBcnJheVRhZ3NbaW50MTZUYWddID1cbiAgdHlwZWRBcnJheVRhZ3NbaW50MzJUYWddID0gdHlwZWRBcnJheVRhZ3NbdWludDhUYWddID1cbiAgdHlwZWRBcnJheVRhZ3NbdWludDhDbGFtcGVkVGFnXSA9IHR5cGVkQXJyYXlUYWdzW3VpbnQxNlRhZ10gPVxuICB0eXBlZEFycmF5VGFnc1t1aW50MzJUYWddID0gdHJ1ZTtcbiAgdHlwZWRBcnJheVRhZ3NbYXJnc1RhZ10gPSB0eXBlZEFycmF5VGFnc1thcnJheVRhZ10gPVxuICB0eXBlZEFycmF5VGFnc1thcnJheUJ1ZmZlclRhZ10gPSB0eXBlZEFycmF5VGFnc1tib29sVGFnXSA9XG4gIHR5cGVkQXJyYXlUYWdzW2RhdGVUYWddID0gdHlwZWRBcnJheVRhZ3NbZXJyb3JUYWddID1cbiAgdHlwZWRBcnJheVRhZ3NbZnVuY1RhZ10gPSB0eXBlZEFycmF5VGFnc1ttYXBUYWddID1cbiAgdHlwZWRBcnJheVRhZ3NbbnVtYmVyVGFnXSA9IHR5cGVkQXJyYXlUYWdzW29iamVjdFRhZ10gPVxuICB0eXBlZEFycmF5VGFnc1tyZWdleHBUYWddID0gdHlwZWRBcnJheVRhZ3Nbc2V0VGFnXSA9XG4gIHR5cGVkQXJyYXlUYWdzW3N0cmluZ1RhZ10gPSB0eXBlZEFycmF5VGFnc1t3ZWFrTWFwVGFnXSA9IGZhbHNlO1xuXG4gIC8qKiBVc2VkIHRvIGlkZW50aWZ5IGB0b1N0cmluZ1RhZ2AgdmFsdWVzIHN1cHBvcnRlZCBieSBgXy5jbG9uZWAuICovXG4gIHZhciBjbG9uZWFibGVUYWdzID0ge307XG4gIGNsb25lYWJsZVRhZ3NbYXJnc1RhZ10gPSBjbG9uZWFibGVUYWdzW2FycmF5VGFnXSA9XG4gIGNsb25lYWJsZVRhZ3NbYXJyYXlCdWZmZXJUYWddID0gY2xvbmVhYmxlVGFnc1tib29sVGFnXSA9XG4gIGNsb25lYWJsZVRhZ3NbZGF0ZVRhZ10gPSBjbG9uZWFibGVUYWdzW2Zsb2F0MzJUYWddID1cbiAgY2xvbmVhYmxlVGFnc1tmbG9hdDY0VGFnXSA9IGNsb25lYWJsZVRhZ3NbaW50OFRhZ10gPVxuICBjbG9uZWFibGVUYWdzW2ludDE2VGFnXSA9IGNsb25lYWJsZVRhZ3NbaW50MzJUYWddID1cbiAgY2xvbmVhYmxlVGFnc1tudW1iZXJUYWddID0gY2xvbmVhYmxlVGFnc1tvYmplY3RUYWddID1cbiAgY2xvbmVhYmxlVGFnc1tyZWdleHBUYWddID0gY2xvbmVhYmxlVGFnc1tzdHJpbmdUYWddID1cbiAgY2xvbmVhYmxlVGFnc1t1aW50OFRhZ10gPSBjbG9uZWFibGVUYWdzW3VpbnQ4Q2xhbXBlZFRhZ10gPVxuICBjbG9uZWFibGVUYWdzW3VpbnQxNlRhZ10gPSBjbG9uZWFibGVUYWdzW3VpbnQzMlRhZ10gPSB0cnVlO1xuICBjbG9uZWFibGVUYWdzW2Vycm9yVGFnXSA9IGNsb25lYWJsZVRhZ3NbZnVuY1RhZ10gPVxuICBjbG9uZWFibGVUYWdzW21hcFRhZ10gPSBjbG9uZWFibGVUYWdzW3NldFRhZ10gPVxuICBjbG9uZWFibGVUYWdzW3dlYWtNYXBUYWddID0gZmFsc2U7XG5cbiAgLyoqIFVzZWQgdG8gbWFwIGxhdGluLTEgc3VwcGxlbWVudGFyeSBsZXR0ZXJzIHRvIGJhc2ljIGxhdGluIGxldHRlcnMuICovXG4gIHZhciBkZWJ1cnJlZExldHRlcnMgPSB7XG4gICAgJ1xceGMwJzogJ0EnLCAgJ1xceGMxJzogJ0EnLCAnXFx4YzInOiAnQScsICdcXHhjMyc6ICdBJywgJ1xceGM0JzogJ0EnLCAnXFx4YzUnOiAnQScsXG4gICAgJ1xceGUwJzogJ2EnLCAgJ1xceGUxJzogJ2EnLCAnXFx4ZTInOiAnYScsICdcXHhlMyc6ICdhJywgJ1xceGU0JzogJ2EnLCAnXFx4ZTUnOiAnYScsXG4gICAgJ1xceGM3JzogJ0MnLCAgJ1xceGU3JzogJ2MnLFxuICAgICdcXHhkMCc6ICdEJywgICdcXHhmMCc6ICdkJyxcbiAgICAnXFx4YzgnOiAnRScsICAnXFx4YzknOiAnRScsICdcXHhjYSc6ICdFJywgJ1xceGNiJzogJ0UnLFxuICAgICdcXHhlOCc6ICdlJywgICdcXHhlOSc6ICdlJywgJ1xceGVhJzogJ2UnLCAnXFx4ZWInOiAnZScsXG4gICAgJ1xceGNDJzogJ0knLCAgJ1xceGNkJzogJ0knLCAnXFx4Y2UnOiAnSScsICdcXHhjZic6ICdJJyxcbiAgICAnXFx4ZUMnOiAnaScsICAnXFx4ZWQnOiAnaScsICdcXHhlZSc6ICdpJywgJ1xceGVmJzogJ2knLFxuICAgICdcXHhkMSc6ICdOJywgICdcXHhmMSc6ICduJyxcbiAgICAnXFx4ZDInOiAnTycsICAnXFx4ZDMnOiAnTycsICdcXHhkNCc6ICdPJywgJ1xceGQ1JzogJ08nLCAnXFx4ZDYnOiAnTycsICdcXHhkOCc6ICdPJyxcbiAgICAnXFx4ZjInOiAnbycsICAnXFx4ZjMnOiAnbycsICdcXHhmNCc6ICdvJywgJ1xceGY1JzogJ28nLCAnXFx4ZjYnOiAnbycsICdcXHhmOCc6ICdvJyxcbiAgICAnXFx4ZDknOiAnVScsICAnXFx4ZGEnOiAnVScsICdcXHhkYic6ICdVJywgJ1xceGRjJzogJ1UnLFxuICAgICdcXHhmOSc6ICd1JywgICdcXHhmYSc6ICd1JywgJ1xceGZiJzogJ3UnLCAnXFx4ZmMnOiAndScsXG4gICAgJ1xceGRkJzogJ1knLCAgJ1xceGZkJzogJ3knLCAnXFx4ZmYnOiAneScsXG4gICAgJ1xceGM2JzogJ0FlJywgJ1xceGU2JzogJ2FlJyxcbiAgICAnXFx4ZGUnOiAnVGgnLCAnXFx4ZmUnOiAndGgnLFxuICAgICdcXHhkZic6ICdzcydcbiAgfTtcblxuICAvKiogVXNlZCB0byBtYXAgY2hhcmFjdGVycyB0byBIVE1MIGVudGl0aWVzLiAqL1xuICB2YXIgaHRtbEVzY2FwZXMgPSB7XG4gICAgJyYnOiAnJmFtcDsnLFxuICAgICc8JzogJyZsdDsnLFxuICAgICc+JzogJyZndDsnLFxuICAgICdcIic6ICcmcXVvdDsnLFxuICAgIFwiJ1wiOiAnJiMzOTsnLFxuICAgICdgJzogJyYjOTY7J1xuICB9O1xuXG4gIC8qKiBVc2VkIHRvIG1hcCBIVE1MIGVudGl0aWVzIHRvIGNoYXJhY3RlcnMuICovXG4gIHZhciBodG1sVW5lc2NhcGVzID0ge1xuICAgICcmYW1wOyc6ICcmJyxcbiAgICAnJmx0Oyc6ICc8JyxcbiAgICAnJmd0Oyc6ICc+JyxcbiAgICAnJnF1b3Q7JzogJ1wiJyxcbiAgICAnJiMzOTsnOiBcIidcIixcbiAgICAnJiM5NjsnOiAnYCdcbiAgfTtcblxuICAvKiogVXNlZCB0byBkZXRlcm1pbmUgaWYgdmFsdWVzIGFyZSBvZiB0aGUgbGFuZ3VhZ2UgdHlwZSBgT2JqZWN0YC4gKi9cbiAgdmFyIG9iamVjdFR5cGVzID0ge1xuICAgICdmdW5jdGlvbic6IHRydWUsXG4gICAgJ29iamVjdCc6IHRydWVcbiAgfTtcblxuICAvKiogVXNlZCB0byBlc2NhcGUgY2hhcmFjdGVycyBmb3IgaW5jbHVzaW9uIGluIGNvbXBpbGVkIHJlZ2V4ZXMuICovXG4gIHZhciByZWdleHBFc2NhcGVzID0ge1xuICAgICcwJzogJ3gzMCcsICcxJzogJ3gzMScsICcyJzogJ3gzMicsICczJzogJ3gzMycsICc0JzogJ3gzNCcsXG4gICAgJzUnOiAneDM1JywgJzYnOiAneDM2JywgJzcnOiAneDM3JywgJzgnOiAneDM4JywgJzknOiAneDM5JyxcbiAgICAnQSc6ICd4NDEnLCAnQic6ICd4NDInLCAnQyc6ICd4NDMnLCAnRCc6ICd4NDQnLCAnRSc6ICd4NDUnLCAnRic6ICd4NDYnLFxuICAgICdhJzogJ3g2MScsICdiJzogJ3g2MicsICdjJzogJ3g2MycsICdkJzogJ3g2NCcsICdlJzogJ3g2NScsICdmJzogJ3g2NicsXG4gICAgJ24nOiAneDZlJywgJ3InOiAneDcyJywgJ3QnOiAneDc0JywgJ3UnOiAneDc1JywgJ3YnOiAneDc2JywgJ3gnOiAneDc4J1xuICB9O1xuXG4gIC8qKiBVc2VkIHRvIGVzY2FwZSBjaGFyYWN0ZXJzIGZvciBpbmNsdXNpb24gaW4gY29tcGlsZWQgc3RyaW5nIGxpdGVyYWxzLiAqL1xuICB2YXIgc3RyaW5nRXNjYXBlcyA9IHtcbiAgICAnXFxcXCc6ICdcXFxcJyxcbiAgICBcIidcIjogXCInXCIsXG4gICAgJ1xcbic6ICduJyxcbiAgICAnXFxyJzogJ3InLFxuICAgICdcXHUyMDI4JzogJ3UyMDI4JyxcbiAgICAnXFx1MjAyOSc6ICd1MjAyOSdcbiAgfTtcblxuICAvKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYGV4cG9ydHNgLiAqL1xuICB2YXIgZnJlZUV4cG9ydHMgPSBvYmplY3RUeXBlc1t0eXBlb2YgZXhwb3J0c10gJiYgZXhwb3J0cyAmJiAhZXhwb3J0cy5ub2RlVHlwZSAmJiBleHBvcnRzO1xuXG4gIC8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgbW9kdWxlYC4gKi9cbiAgdmFyIGZyZWVNb2R1bGUgPSBvYmplY3RUeXBlc1t0eXBlb2YgbW9kdWxlXSAmJiBtb2R1bGUgJiYgIW1vZHVsZS5ub2RlVHlwZSAmJiBtb2R1bGU7XG5cbiAgLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBnbG9iYWxgIGZyb20gTm9kZS5qcy4gKi9cbiAgdmFyIGZyZWVHbG9iYWwgPSBmcmVlRXhwb3J0cyAmJiBmcmVlTW9kdWxlICYmIHR5cGVvZiBnbG9iYWwgPT0gJ29iamVjdCcgJiYgZ2xvYmFsICYmIGdsb2JhbC5PYmplY3QgJiYgZ2xvYmFsO1xuXG4gIC8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgc2VsZmAuICovXG4gIHZhciBmcmVlU2VsZiA9IG9iamVjdFR5cGVzW3R5cGVvZiBzZWxmXSAmJiBzZWxmICYmIHNlbGYuT2JqZWN0ICYmIHNlbGY7XG5cbiAgLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGB3aW5kb3dgLiAqL1xuICB2YXIgZnJlZVdpbmRvdyA9IG9iamVjdFR5cGVzW3R5cGVvZiB3aW5kb3ddICYmIHdpbmRvdyAmJiB3aW5kb3cuT2JqZWN0ICYmIHdpbmRvdztcblxuICAvKiogRGV0ZWN0IHRoZSBwb3B1bGFyIENvbW1vbkpTIGV4dGVuc2lvbiBgbW9kdWxlLmV4cG9ydHNgLiAqL1xuICB2YXIgbW9kdWxlRXhwb3J0cyA9IGZyZWVNb2R1bGUgJiYgZnJlZU1vZHVsZS5leHBvcnRzID09PSBmcmVlRXhwb3J0cyAmJiBmcmVlRXhwb3J0cztcblxuICAvKipcbiAgICogVXNlZCBhcyBhIHJlZmVyZW5jZSB0byB0aGUgZ2xvYmFsIG9iamVjdC5cbiAgICpcbiAgICogVGhlIGB0aGlzYCB2YWx1ZSBpcyB1c2VkIGlmIGl0J3MgdGhlIGdsb2JhbCBvYmplY3QgdG8gYXZvaWQgR3JlYXNlbW9ua2V5J3NcbiAgICogcmVzdHJpY3RlZCBgd2luZG93YCBvYmplY3QsIG90aGVyd2lzZSB0aGUgYHdpbmRvd2Agb2JqZWN0IGlzIHVzZWQuXG4gICAqL1xuICB2YXIgcm9vdCA9IGZyZWVHbG9iYWwgfHwgKChmcmVlV2luZG93ICE9PSAodGhpcyAmJiB0aGlzLndpbmRvdykpICYmIGZyZWVXaW5kb3cpIHx8IGZyZWVTZWxmIHx8IHRoaXM7XG5cbiAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgLyoqXG4gICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBjb21wYXJlQXNjZW5kaW5nYCB3aGljaCBjb21wYXJlcyB2YWx1ZXMgYW5kXG4gICAqIHNvcnRzIHRoZW0gaW4gYXNjZW5kaW5nIG9yZGVyIHdpdGhvdXQgZ3VhcmFudGVlaW5nIGEgc3RhYmxlIHNvcnQuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbXBhcmUuXG4gICAqIEBwYXJhbSB7Kn0gb3RoZXIgVGhlIG90aGVyIHZhbHVlIHRvIGNvbXBhcmUuXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHNvcnQgb3JkZXIgaW5kaWNhdG9yIGZvciBgdmFsdWVgLlxuICAgKi9cbiAgZnVuY3Rpb24gYmFzZUNvbXBhcmVBc2NlbmRpbmcodmFsdWUsIG90aGVyKSB7XG4gICAgaWYgKHZhbHVlICE9PSBvdGhlcikge1xuICAgICAgdmFyIHZhbElzTnVsbCA9IHZhbHVlID09PSBudWxsLFxuICAgICAgICAgIHZhbElzVW5kZWYgPSB2YWx1ZSA9PT0gdW5kZWZpbmVkLFxuICAgICAgICAgIHZhbElzUmVmbGV4aXZlID0gdmFsdWUgPT09IHZhbHVlO1xuXG4gICAgICB2YXIgb3RoSXNOdWxsID0gb3RoZXIgPT09IG51bGwsXG4gICAgICAgICAgb3RoSXNVbmRlZiA9IG90aGVyID09PSB1bmRlZmluZWQsXG4gICAgICAgICAgb3RoSXNSZWZsZXhpdmUgPSBvdGhlciA9PT0gb3RoZXI7XG5cbiAgICAgIGlmICgodmFsdWUgPiBvdGhlciAmJiAhb3RoSXNOdWxsKSB8fCAhdmFsSXNSZWZsZXhpdmUgfHxcbiAgICAgICAgICAodmFsSXNOdWxsICYmICFvdGhJc1VuZGVmICYmIG90aElzUmVmbGV4aXZlKSB8fFxuICAgICAgICAgICh2YWxJc1VuZGVmICYmIG90aElzUmVmbGV4aXZlKSkge1xuICAgICAgICByZXR1cm4gMTtcbiAgICAgIH1cbiAgICAgIGlmICgodmFsdWUgPCBvdGhlciAmJiAhdmFsSXNOdWxsKSB8fCAhb3RoSXNSZWZsZXhpdmUgfHxcbiAgICAgICAgICAob3RoSXNOdWxsICYmICF2YWxJc1VuZGVmICYmIHZhbElzUmVmbGV4aXZlKSB8fFxuICAgICAgICAgIChvdGhJc1VuZGVmICYmIHZhbElzUmVmbGV4aXZlKSkge1xuICAgICAgICByZXR1cm4gLTE7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAwO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmZpbmRJbmRleGAgYW5kIGBfLmZpbmRMYXN0SW5kZXhgIHdpdGhvdXRcbiAgICogc3VwcG9ydCBmb3IgY2FsbGJhY2sgc2hvcnRoYW5kcyBhbmQgYHRoaXNgIGJpbmRpbmcuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBzZWFyY2guXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtmcm9tUmlnaHRdIFNwZWNpZnkgaXRlcmF0aW5nIGZyb20gcmlnaHQgdG8gbGVmdC5cbiAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIG1hdGNoZWQgdmFsdWUsIGVsc2UgYC0xYC5cbiAgICovXG4gIGZ1bmN0aW9uIGJhc2VGaW5kSW5kZXgoYXJyYXksIHByZWRpY2F0ZSwgZnJvbVJpZ2h0KSB7XG4gICAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aCxcbiAgICAgICAgaW5kZXggPSBmcm9tUmlnaHQgPyBsZW5ndGggOiAtMTtcblxuICAgIHdoaWxlICgoZnJvbVJpZ2h0ID8gaW5kZXgtLSA6ICsraW5kZXggPCBsZW5ndGgpKSB7XG4gICAgICBpZiAocHJlZGljYXRlKGFycmF5W2luZGV4XSwgaW5kZXgsIGFycmF5KSkge1xuICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAtMTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pbmRleE9mYCB3aXRob3V0IHN1cHBvcnQgZm9yIGJpbmFyeSBzZWFyY2hlcy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHNlYXJjaC5cbiAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2VhcmNoIGZvci5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGZyb21JbmRleCBUaGUgaW5kZXggdG8gc2VhcmNoIGZyb20uXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBtYXRjaGVkIHZhbHVlLCBlbHNlIGAtMWAuXG4gICAqL1xuICBmdW5jdGlvbiBiYXNlSW5kZXhPZihhcnJheSwgdmFsdWUsIGZyb21JbmRleCkge1xuICAgIGlmICh2YWx1ZSAhPT0gdmFsdWUpIHtcbiAgICAgIHJldHVybiBpbmRleE9mTmFOKGFycmF5LCBmcm9tSW5kZXgpO1xuICAgIH1cbiAgICB2YXIgaW5kZXggPSBmcm9tSW5kZXggLSAxLFxuICAgICAgICBsZW5ndGggPSBhcnJheS5sZW5ndGg7XG5cbiAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgaWYgKGFycmF5W2luZGV4XSA9PT0gdmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gLTE7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXNGdW5jdGlvbmAgd2l0aG91dCBzdXBwb3J0IGZvciBlbnZpcm9ubWVudHNcbiAgICogd2l0aCBpbmNvcnJlY3QgYHR5cGVvZmAgcmVzdWx0cy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGNvcnJlY3RseSBjbGFzc2lmaWVkLCBlbHNlIGBmYWxzZWAuXG4gICAqL1xuICBmdW5jdGlvbiBiYXNlSXNGdW5jdGlvbih2YWx1ZSkge1xuICAgIC8vIEF2b2lkIGEgQ2hha3JhIEpJVCBidWcgaW4gY29tcGF0aWJpbGl0eSBtb2RlcyBvZiBJRSAxMS5cbiAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2phc2hrZW5hcy91bmRlcnNjb3JlL2lzc3Vlcy8xNjIxIGZvciBtb3JlIGRldGFpbHMuXG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnZnVuY3Rpb24nIHx8IGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBzdHJpbmcgaWYgaXQncyBub3Qgb25lLiBBbiBlbXB0eSBzdHJpbmcgaXMgcmV0dXJuZWRcbiAgICogZm9yIGBudWxsYCBvciBgdW5kZWZpbmVkYCB2YWx1ZXMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHN0cmluZy5cbiAgICovXG4gIGZ1bmN0aW9uIGJhc2VUb1N0cmluZyh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSA9PSBudWxsID8gJycgOiAodmFsdWUgKyAnJyk7XG4gIH1cblxuICAvKipcbiAgICogVXNlZCBieSBgXy50cmltYCBhbmQgYF8udHJpbUxlZnRgIHRvIGdldCB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGNoYXJhY3RlclxuICAgKiBvZiBgc3RyaW5nYCB0aGF0IGlzIG5vdCBmb3VuZCBpbiBgY2hhcnNgLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIFRoZSBzdHJpbmcgdG8gaW5zcGVjdC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGNoYXJzIFRoZSBjaGFyYWN0ZXJzIHRvIGZpbmQuXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBjaGFyYWN0ZXIgbm90IGZvdW5kIGluIGBjaGFyc2AuXG4gICAqL1xuICBmdW5jdGlvbiBjaGFyc0xlZnRJbmRleChzdHJpbmcsIGNoYXJzKSB7XG4gICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgIGxlbmd0aCA9IHN0cmluZy5sZW5ndGg7XG5cbiAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCAmJiBjaGFycy5pbmRleE9mKHN0cmluZy5jaGFyQXQoaW5kZXgpKSA+IC0xKSB7fVxuICAgIHJldHVybiBpbmRleDtcbiAgfVxuXG4gIC8qKlxuICAgKiBVc2VkIGJ5IGBfLnRyaW1gIGFuZCBgXy50cmltUmlnaHRgIHRvIGdldCB0aGUgaW5kZXggb2YgdGhlIGxhc3QgY2hhcmFjdGVyXG4gICAqIG9mIGBzdHJpbmdgIHRoYXQgaXMgbm90IGZvdW5kIGluIGBjaGFyc2AuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmcgVGhlIHN0cmluZyB0byBpbnNwZWN0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gY2hhcnMgVGhlIGNoYXJhY3RlcnMgdG8gZmluZC5cbiAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGxhc3QgY2hhcmFjdGVyIG5vdCBmb3VuZCBpbiBgY2hhcnNgLlxuICAgKi9cbiAgZnVuY3Rpb24gY2hhcnNSaWdodEluZGV4KHN0cmluZywgY2hhcnMpIHtcbiAgICB2YXIgaW5kZXggPSBzdHJpbmcubGVuZ3RoO1xuXG4gICAgd2hpbGUgKGluZGV4LS0gJiYgY2hhcnMuaW5kZXhPZihzdHJpbmcuY2hhckF0KGluZGV4KSkgPiAtMSkge31cbiAgICByZXR1cm4gaW5kZXg7XG4gIH1cblxuICAvKipcbiAgICogVXNlZCBieSBgXy5zb3J0QnlgIHRvIGNvbXBhcmUgdHJhbnNmb3JtZWQgZWxlbWVudHMgb2YgYSBjb2xsZWN0aW9uIGFuZCBzdGFibGVcbiAgICogc29ydCB0aGVtIGluIGFzY2VuZGluZyBvcmRlci5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGNvbXBhcmUuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvdGhlciBUaGUgb3RoZXIgb2JqZWN0IHRvIGNvbXBhcmUuXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHNvcnQgb3JkZXIgaW5kaWNhdG9yIGZvciBgb2JqZWN0YC5cbiAgICovXG4gIGZ1bmN0aW9uIGNvbXBhcmVBc2NlbmRpbmcob2JqZWN0LCBvdGhlcikge1xuICAgIHJldHVybiBiYXNlQ29tcGFyZUFzY2VuZGluZyhvYmplY3QuY3JpdGVyaWEsIG90aGVyLmNyaXRlcmlhKSB8fCAob2JqZWN0LmluZGV4IC0gb3RoZXIuaW5kZXgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVzZWQgYnkgYF8uc29ydEJ5T3JkZXJgIHRvIGNvbXBhcmUgbXVsdGlwbGUgcHJvcGVydGllcyBvZiBhIHZhbHVlIHRvIGFub3RoZXJcbiAgICogYW5kIHN0YWJsZSBzb3J0IHRoZW0uXG4gICAqXG4gICAqIElmIGBvcmRlcnNgIGlzIHVuc3BlY2lmaWVkLCBhbGwgdmFsdWVzcyBhcmUgc29ydGVkIGluIGFzY2VuZGluZyBvcmRlci4gT3RoZXJ3aXNlLFxuICAgKiBhIHZhbHVlIGlzIHNvcnRlZCBpbiBhc2NlbmRpbmcgb3JkZXIgaWYgaXRzIGNvcnJlc3BvbmRpbmcgb3JkZXIgaXMgXCJhc2NcIiwgYW5kXG4gICAqIGRlc2NlbmRpbmcgaWYgXCJkZXNjXCIuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjb21wYXJlLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3RoZXIgVGhlIG90aGVyIG9iamVjdCB0byBjb21wYXJlLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW5bXX0gb3JkZXJzIFRoZSBvcmRlciB0byBzb3J0IGJ5IGZvciBlYWNoIHByb3BlcnR5LlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBzb3J0IG9yZGVyIGluZGljYXRvciBmb3IgYG9iamVjdGAuXG4gICAqL1xuICBmdW5jdGlvbiBjb21wYXJlTXVsdGlwbGUob2JqZWN0LCBvdGhlciwgb3JkZXJzKSB7XG4gICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgIG9iakNyaXRlcmlhID0gb2JqZWN0LmNyaXRlcmlhLFxuICAgICAgICBvdGhDcml0ZXJpYSA9IG90aGVyLmNyaXRlcmlhLFxuICAgICAgICBsZW5ndGggPSBvYmpDcml0ZXJpYS5sZW5ndGgsXG4gICAgICAgIG9yZGVyc0xlbmd0aCA9IG9yZGVycy5sZW5ndGg7XG5cbiAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgdmFyIHJlc3VsdCA9IGJhc2VDb21wYXJlQXNjZW5kaW5nKG9iakNyaXRlcmlhW2luZGV4XSwgb3RoQ3JpdGVyaWFbaW5kZXhdKTtcbiAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgaWYgKGluZGV4ID49IG9yZGVyc0xlbmd0aCkge1xuICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG9yZGVyID0gb3JkZXJzW2luZGV4XTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdCAqICgob3JkZXIgPT09ICdhc2MnIHx8IG9yZGVyID09PSB0cnVlKSA/IDEgOiAtMSk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIEZpeGVzIGFuIGBBcnJheSNzb3J0YCBidWcgaW4gdGhlIEpTIGVuZ2luZSBlbWJlZGRlZCBpbiBBZG9iZSBhcHBsaWNhdGlvbnNcbiAgICAvLyB0aGF0IGNhdXNlcyBpdCwgdW5kZXIgY2VydGFpbiBjaXJjdW1zdGFuY2VzLCB0byBwcm92aWRlIHRoZSBzYW1lIHZhbHVlIGZvclxuICAgIC8vIGBvYmplY3RgIGFuZCBgb3RoZXJgLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2phc2hrZW5hcy91bmRlcnNjb3JlL3B1bGwvMTI0N1xuICAgIC8vIGZvciBtb3JlIGRldGFpbHMuXG4gICAgLy9cbiAgICAvLyBUaGlzIGFsc28gZW5zdXJlcyBhIHN0YWJsZSBzb3J0IGluIFY4IGFuZCBvdGhlciBlbmdpbmVzLlxuICAgIC8vIFNlZSBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9OTAgZm9yIG1vcmUgZGV0YWlscy5cbiAgICByZXR1cm4gb2JqZWN0LmluZGV4IC0gb3RoZXIuaW5kZXg7XG4gIH1cblxuICAvKipcbiAgICogVXNlZCBieSBgXy5kZWJ1cnJgIHRvIGNvbnZlcnQgbGF0aW4tMSBzdXBwbGVtZW50YXJ5IGxldHRlcnMgdG8gYmFzaWMgbGF0aW4gbGV0dGVycy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IGxldHRlciBUaGUgbWF0Y2hlZCBsZXR0ZXIgdG8gZGVidXJyLlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBkZWJ1cnJlZCBsZXR0ZXIuXG4gICAqL1xuICBmdW5jdGlvbiBkZWJ1cnJMZXR0ZXIobGV0dGVyKSB7XG4gICAgcmV0dXJuIGRlYnVycmVkTGV0dGVyc1tsZXR0ZXJdO1xuICB9XG5cbiAgLyoqXG4gICAqIFVzZWQgYnkgYF8uZXNjYXBlYCB0byBjb252ZXJ0IGNoYXJhY3RlcnMgdG8gSFRNTCBlbnRpdGllcy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNociBUaGUgbWF0Y2hlZCBjaGFyYWN0ZXIgdG8gZXNjYXBlLlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBlc2NhcGVkIGNoYXJhY3Rlci5cbiAgICovXG4gIGZ1bmN0aW9uIGVzY2FwZUh0bWxDaGFyKGNocikge1xuICAgIHJldHVybiBodG1sRXNjYXBlc1tjaHJdO1xuICB9XG5cbiAgLyoqXG4gICAqIFVzZWQgYnkgYF8uZXNjYXBlUmVnRXhwYCB0byBlc2NhcGUgY2hhcmFjdGVycyBmb3IgaW5jbHVzaW9uIGluIGNvbXBpbGVkIHJlZ2V4ZXMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjaHIgVGhlIG1hdGNoZWQgY2hhcmFjdGVyIHRvIGVzY2FwZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGxlYWRpbmdDaGFyIFRoZSBjYXB0dXJlIGdyb3VwIGZvciBhIGxlYWRpbmcgY2hhcmFjdGVyLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gd2hpdGVzcGFjZUNoYXIgVGhlIGNhcHR1cmUgZ3JvdXAgZm9yIGEgd2hpdGVzcGFjZSBjaGFyYWN0ZXIuXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGVzY2FwZWQgY2hhcmFjdGVyLlxuICAgKi9cbiAgZnVuY3Rpb24gZXNjYXBlUmVnRXhwQ2hhcihjaHIsIGxlYWRpbmdDaGFyLCB3aGl0ZXNwYWNlQ2hhcikge1xuICAgIGlmIChsZWFkaW5nQ2hhcikge1xuICAgICAgY2hyID0gcmVnZXhwRXNjYXBlc1tjaHJdO1xuICAgIH0gZWxzZSBpZiAod2hpdGVzcGFjZUNoYXIpIHtcbiAgICAgIGNociA9IHN0cmluZ0VzY2FwZXNbY2hyXTtcbiAgICB9XG4gICAgcmV0dXJuICdcXFxcJyArIGNocjtcbiAgfVxuXG4gIC8qKlxuICAgKiBVc2VkIGJ5IGBfLnRlbXBsYXRlYCB0byBlc2NhcGUgY2hhcmFjdGVycyBmb3IgaW5jbHVzaW9uIGluIGNvbXBpbGVkIHN0cmluZyBsaXRlcmFscy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNociBUaGUgbWF0Y2hlZCBjaGFyYWN0ZXIgdG8gZXNjYXBlLlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBlc2NhcGVkIGNoYXJhY3Rlci5cbiAgICovXG4gIGZ1bmN0aW9uIGVzY2FwZVN0cmluZ0NoYXIoY2hyKSB7XG4gICAgcmV0dXJuICdcXFxcJyArIHN0cmluZ0VzY2FwZXNbY2hyXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBpbmRleCBhdCB3aGljaCB0aGUgZmlyc3Qgb2NjdXJyZW5jZSBvZiBgTmFOYCBpcyBmb3VuZCBpbiBgYXJyYXlgLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gc2VhcmNoLlxuICAgKiBAcGFyYW0ge251bWJlcn0gZnJvbUluZGV4IFRoZSBpbmRleCB0byBzZWFyY2ggZnJvbS5cbiAgICogQHBhcmFtIHtib29sZWFufSBbZnJvbVJpZ2h0XSBTcGVjaWZ5IGl0ZXJhdGluZyBmcm9tIHJpZ2h0IHRvIGxlZnQuXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBtYXRjaGVkIGBOYU5gLCBlbHNlIGAtMWAuXG4gICAqL1xuICBmdW5jdGlvbiBpbmRleE9mTmFOKGFycmF5LCBmcm9tSW5kZXgsIGZyb21SaWdodCkge1xuICAgIHZhciBsZW5ndGggPSBhcnJheS5sZW5ndGgsXG4gICAgICAgIGluZGV4ID0gZnJvbUluZGV4ICsgKGZyb21SaWdodCA/IDAgOiAtMSk7XG5cbiAgICB3aGlsZSAoKGZyb21SaWdodCA/IGluZGV4LS0gOiArK2luZGV4IDwgbGVuZ3RoKSkge1xuICAgICAgdmFyIG90aGVyID0gYXJyYXlbaW5kZXhdO1xuICAgICAgaWYgKG90aGVyICE9PSBvdGhlcikge1xuICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAtMTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZS5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLCBlbHNlIGBmYWxzZWAuXG4gICAqL1xuICBmdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcbiAgICByZXR1cm4gISF2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCc7XG4gIH1cblxuICAvKipcbiAgICogVXNlZCBieSBgdHJpbW1lZExlZnRJbmRleGAgYW5kIGB0cmltbWVkUmlnaHRJbmRleGAgdG8gZGV0ZXJtaW5lIGlmIGFcbiAgICogY2hhcmFjdGVyIGNvZGUgaXMgd2hpdGVzcGFjZS5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtudW1iZXJ9IGNoYXJDb2RlIFRoZSBjaGFyYWN0ZXIgY29kZSB0byBpbnNwZWN0LlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYGNoYXJDb2RlYCBpcyB3aGl0ZXNwYWNlLCBlbHNlIGBmYWxzZWAuXG4gICAqL1xuICBmdW5jdGlvbiBpc1NwYWNlKGNoYXJDb2RlKSB7XG4gICAgcmV0dXJuICgoY2hhckNvZGUgPD0gMTYwICYmIChjaGFyQ29kZSA+PSA5ICYmIGNoYXJDb2RlIDw9IDEzKSB8fCBjaGFyQ29kZSA9PSAzMiB8fCBjaGFyQ29kZSA9PSAxNjApIHx8IGNoYXJDb2RlID09IDU3NjAgfHwgY2hhckNvZGUgPT0gNjE1OCB8fFxuICAgICAgKGNoYXJDb2RlID49IDgxOTIgJiYgKGNoYXJDb2RlIDw9IDgyMDIgfHwgY2hhckNvZGUgPT0gODIzMiB8fCBjaGFyQ29kZSA9PSA4MjMzIHx8IGNoYXJDb2RlID09IDgyMzkgfHwgY2hhckNvZGUgPT0gODI4NyB8fCBjaGFyQ29kZSA9PSAxMjI4OCB8fCBjaGFyQ29kZSA9PSA2NTI3OSkpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXBsYWNlcyBhbGwgYHBsYWNlaG9sZGVyYCBlbGVtZW50cyBpbiBgYXJyYXlgIHdpdGggYW4gaW50ZXJuYWwgcGxhY2Vob2xkZXJcbiAgICogYW5kIHJldHVybnMgYW4gYXJyYXkgb2YgdGhlaXIgaW5kZXhlcy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIG1vZGlmeS5cbiAgICogQHBhcmFtIHsqfSBwbGFjZWhvbGRlciBUaGUgcGxhY2Vob2xkZXIgdG8gcmVwbGFjZS5cbiAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgYXJyYXkgb2YgcGxhY2Vob2xkZXIgaW5kZXhlcy5cbiAgICovXG4gIGZ1bmN0aW9uIHJlcGxhY2VIb2xkZXJzKGFycmF5LCBwbGFjZWhvbGRlcikge1xuICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICBsZW5ndGggPSBhcnJheS5sZW5ndGgsXG4gICAgICAgIHJlc0luZGV4ID0gLTEsXG4gICAgICAgIHJlc3VsdCA9IFtdO1xuXG4gICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgIGlmIChhcnJheVtpbmRleF0gPT09IHBsYWNlaG9sZGVyKSB7XG4gICAgICAgIGFycmF5W2luZGV4XSA9IFBMQUNFSE9MREVSO1xuICAgICAgICByZXN1bHRbKytyZXNJbmRleF0gPSBpbmRleDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiBgXy51bmlxYCBvcHRpbWl6ZWQgZm9yIHNvcnRlZCBhcnJheXMgd2l0aG91dCBzdXBwb3J0XG4gICAqIGZvciBjYWxsYmFjayBzaG9ydGhhbmRzIGFuZCBgdGhpc2AgYmluZGluZy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGluc3BlY3QuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtpdGVyYXRlZV0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgZHVwbGljYXRlLXZhbHVlLWZyZWUgYXJyYXkuXG4gICAqL1xuICBmdW5jdGlvbiBzb3J0ZWRVbmlxKGFycmF5LCBpdGVyYXRlZSkge1xuICAgIHZhciBzZWVuLFxuICAgICAgICBpbmRleCA9IC0xLFxuICAgICAgICBsZW5ndGggPSBhcnJheS5sZW5ndGgsXG4gICAgICAgIHJlc0luZGV4ID0gLTEsXG4gICAgICAgIHJlc3VsdCA9IFtdO1xuXG4gICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgIHZhciB2YWx1ZSA9IGFycmF5W2luZGV4XSxcbiAgICAgICAgICBjb21wdXRlZCA9IGl0ZXJhdGVlID8gaXRlcmF0ZWUodmFsdWUsIGluZGV4LCBhcnJheSkgOiB2YWx1ZTtcblxuICAgICAgaWYgKCFpbmRleCB8fCBzZWVuICE9PSBjb21wdXRlZCkge1xuICAgICAgICBzZWVuID0gY29tcHV0ZWQ7XG4gICAgICAgIHJlc3VsdFsrK3Jlc0luZGV4XSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIFVzZWQgYnkgYF8udHJpbWAgYW5kIGBfLnRyaW1MZWZ0YCB0byBnZXQgdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBub24td2hpdGVzcGFjZVxuICAgKiBjaGFyYWN0ZXIgb2YgYHN0cmluZ2AuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmcgVGhlIHN0cmluZyB0byBpbnNwZWN0LlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgZmlyc3Qgbm9uLXdoaXRlc3BhY2UgY2hhcmFjdGVyLlxuICAgKi9cbiAgZnVuY3Rpb24gdHJpbW1lZExlZnRJbmRleChzdHJpbmcpIHtcbiAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgbGVuZ3RoID0gc3RyaW5nLmxlbmd0aDtcblxuICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoICYmIGlzU3BhY2Uoc3RyaW5nLmNoYXJDb2RlQXQoaW5kZXgpKSkge31cbiAgICByZXR1cm4gaW5kZXg7XG4gIH1cblxuICAvKipcbiAgICogVXNlZCBieSBgXy50cmltYCBhbmQgYF8udHJpbVJpZ2h0YCB0byBnZXQgdGhlIGluZGV4IG9mIHRoZSBsYXN0IG5vbi13aGl0ZXNwYWNlXG4gICAqIGNoYXJhY3RlciBvZiBgc3RyaW5nYC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyBUaGUgc3RyaW5nIHRvIGluc3BlY3QuXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBsYXN0IG5vbi13aGl0ZXNwYWNlIGNoYXJhY3Rlci5cbiAgICovXG4gIGZ1bmN0aW9uIHRyaW1tZWRSaWdodEluZGV4KHN0cmluZykge1xuICAgIHZhciBpbmRleCA9IHN0cmluZy5sZW5ndGg7XG5cbiAgICB3aGlsZSAoaW5kZXgtLSAmJiBpc1NwYWNlKHN0cmluZy5jaGFyQ29kZUF0KGluZGV4KSkpIHt9XG4gICAgcmV0dXJuIGluZGV4O1xuICB9XG5cbiAgLyoqXG4gICAqIFVzZWQgYnkgYF8udW5lc2NhcGVgIHRvIGNvbnZlcnQgSFRNTCBlbnRpdGllcyB0byBjaGFyYWN0ZXJzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gY2hyIFRoZSBtYXRjaGVkIGNoYXJhY3RlciB0byB1bmVzY2FwZS5cbiAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgdW5lc2NhcGVkIGNoYXJhY3Rlci5cbiAgICovXG4gIGZ1bmN0aW9uIHVuZXNjYXBlSHRtbENoYXIoY2hyKSB7XG4gICAgcmV0dXJuIGh0bWxVbmVzY2FwZXNbY2hyXTtcbiAgfVxuXG4gIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgcHJpc3RpbmUgYGxvZGFzaGAgZnVuY3Rpb24gdXNpbmcgdGhlIGdpdmVuIGBjb250ZXh0YCBvYmplY3QuXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlck9mIF9cbiAgICogQGNhdGVnb3J5IFV0aWxpdHlcbiAgICogQHBhcmFtIHtPYmplY3R9IFtjb250ZXh0PXJvb3RdIFRoZSBjb250ZXh0IG9iamVjdC5cbiAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIGEgbmV3IGBsb2Rhc2hgIGZ1bmN0aW9uLlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBfLm1peGluKHsgJ2Zvbyc6IF8uY29uc3RhbnQoJ2ZvbycpIH0pO1xuICAgKlxuICAgKiB2YXIgbG9kYXNoID0gXy5ydW5JbkNvbnRleHQoKTtcbiAgICogbG9kYXNoLm1peGluKHsgJ2Jhcic6IGxvZGFzaC5jb25zdGFudCgnYmFyJykgfSk7XG4gICAqXG4gICAqIF8uaXNGdW5jdGlvbihfLmZvbyk7XG4gICAqIC8vID0+IHRydWVcbiAgICogXy5pc0Z1bmN0aW9uKF8uYmFyKTtcbiAgICogLy8gPT4gZmFsc2VcbiAgICpcbiAgICogbG9kYXNoLmlzRnVuY3Rpb24obG9kYXNoLmZvbyk7XG4gICAqIC8vID0+IGZhbHNlXG4gICAqIGxvZGFzaC5pc0Z1bmN0aW9uKGxvZGFzaC5iYXIpO1xuICAgKiAvLyA9PiB0cnVlXG4gICAqXG4gICAqIC8vIHVzaW5nIGBjb250ZXh0YCB0byBtb2NrIGBEYXRlI2dldFRpbWVgIHVzZSBpbiBgXy5ub3dgXG4gICAqIHZhciBtb2NrID0gXy5ydW5JbkNvbnRleHQoe1xuICAgKiAgICdEYXRlJzogZnVuY3Rpb24oKSB7XG4gICAqICAgICByZXR1cm4geyAnZ2V0VGltZSc6IGdldFRpbWVNb2NrIH07XG4gICAqICAgfVxuICAgKiB9KTtcbiAgICpcbiAgICogLy8gb3IgY3JlYXRpbmcgYSBzdXBlZC11cCBgZGVmZXJgIGluIE5vZGUuanNcbiAgICogdmFyIGRlZmVyID0gXy5ydW5JbkNvbnRleHQoeyAnc2V0VGltZW91dCc6IHNldEltbWVkaWF0ZSB9KS5kZWZlcjtcbiAgICovXG4gIGZ1bmN0aW9uIHJ1bkluQ29udGV4dChjb250ZXh0KSB7XG4gICAgLy8gQXZvaWQgaXNzdWVzIHdpdGggc29tZSBFUzMgZW52aXJvbm1lbnRzIHRoYXQgYXR0ZW1wdCB0byB1c2UgdmFsdWVzLCBuYW1lZFxuICAgIC8vIGFmdGVyIGJ1aWx0LWluIGNvbnN0cnVjdG9ycyBsaWtlIGBPYmplY3RgLCBmb3IgdGhlIGNyZWF0aW9uIG9mIGxpdGVyYWxzLlxuICAgIC8vIEVTNSBjbGVhcnMgdGhpcyB1cCBieSBzdGF0aW5nIHRoYXQgbGl0ZXJhbHMgbXVzdCB1c2UgYnVpbHQtaW4gY29uc3RydWN0b3JzLlxuICAgIC8vIFNlZSBodHRwczovL2VzNS5naXRodWIuaW8vI3gxMS4xLjUgZm9yIG1vcmUgZGV0YWlscy5cbiAgICBjb250ZXh0ID0gY29udGV4dCA/IF8uZGVmYXVsdHMocm9vdC5PYmplY3QoKSwgY29udGV4dCwgXy5waWNrKHJvb3QsIGNvbnRleHRQcm9wcykpIDogcm9vdDtcblxuICAgIC8qKiBOYXRpdmUgY29uc3RydWN0b3IgcmVmZXJlbmNlcy4gKi9cbiAgICB2YXIgQXJyYXkgPSBjb250ZXh0LkFycmF5LFxuICAgICAgICBEYXRlID0gY29udGV4dC5EYXRlLFxuICAgICAgICBFcnJvciA9IGNvbnRleHQuRXJyb3IsXG4gICAgICAgIEZ1bmN0aW9uID0gY29udGV4dC5GdW5jdGlvbixcbiAgICAgICAgTWF0aCA9IGNvbnRleHQuTWF0aCxcbiAgICAgICAgTnVtYmVyID0gY29udGV4dC5OdW1iZXIsXG4gICAgICAgIE9iamVjdCA9IGNvbnRleHQuT2JqZWN0LFxuICAgICAgICBSZWdFeHAgPSBjb250ZXh0LlJlZ0V4cCxcbiAgICAgICAgU3RyaW5nID0gY29udGV4dC5TdHJpbmcsXG4gICAgICAgIFR5cGVFcnJvciA9IGNvbnRleHQuVHlwZUVycm9yO1xuXG4gICAgLyoqIFVzZWQgZm9yIG5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbiAgICB2YXIgYXJyYXlQcm90byA9IEFycmF5LnByb3RvdHlwZSxcbiAgICAgICAgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlLFxuICAgICAgICBzdHJpbmdQcm90byA9IFN0cmluZy5wcm90b3R5cGU7XG5cbiAgICAvKiogVXNlZCB0byByZXNvbHZlIHRoZSBkZWNvbXBpbGVkIHNvdXJjZSBvZiBmdW5jdGlvbnMuICovXG4gICAgdmFyIGZuVG9TdHJpbmcgPSBGdW5jdGlvbi5wcm90b3R5cGUudG9TdHJpbmc7XG5cbiAgICAvKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cbiAgICB2YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblxuICAgIC8qKiBVc2VkIHRvIGdlbmVyYXRlIHVuaXF1ZSBJRHMuICovXG4gICAgdmFyIGlkQ291bnRlciA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBVc2VkIHRvIHJlc29sdmUgdGhlIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICAgICAqIG9mIHZhbHVlcy5cbiAgICAgKi9cbiAgICB2YXIgb2JqVG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuICAgIC8qKiBVc2VkIHRvIHJlc3RvcmUgdGhlIG9yaWdpbmFsIGBfYCByZWZlcmVuY2UgaW4gYF8ubm9Db25mbGljdGAuICovXG4gICAgdmFyIG9sZERhc2ggPSByb290Ll87XG5cbiAgICAvKiogVXNlZCB0byBkZXRlY3QgaWYgYSBtZXRob2QgaXMgbmF0aXZlLiAqL1xuICAgIHZhciByZUlzTmF0aXZlID0gUmVnRXhwKCdeJyArXG4gICAgICBmblRvU3RyaW5nLmNhbGwoaGFzT3duUHJvcGVydHkpLnJlcGxhY2UoL1tcXFxcXiQuKis/KClbXFxde318XS9nLCAnXFxcXCQmJylcbiAgICAgIC5yZXBsYWNlKC9oYXNPd25Qcm9wZXJ0eXwoZnVuY3Rpb24pLio/KD89XFxcXFxcKCl8IGZvciAuKz8oPz1cXFxcXFxdKS9nLCAnJDEuKj8nKSArICckJ1xuICAgICk7XG5cbiAgICAvKiogTmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xuICAgIHZhciBBcnJheUJ1ZmZlciA9IGNvbnRleHQuQXJyYXlCdWZmZXIsXG4gICAgICAgIGNsZWFyVGltZW91dCA9IGNvbnRleHQuY2xlYXJUaW1lb3V0LFxuICAgICAgICBwYXJzZUZsb2F0ID0gY29udGV4dC5wYXJzZUZsb2F0LFxuICAgICAgICBwb3cgPSBNYXRoLnBvdyxcbiAgICAgICAgcHJvcGVydHlJc0VudW1lcmFibGUgPSBvYmplY3RQcm90by5wcm9wZXJ0eUlzRW51bWVyYWJsZSxcbiAgICAgICAgU2V0ID0gZ2V0TmF0aXZlKGNvbnRleHQsICdTZXQnKSxcbiAgICAgICAgc2V0VGltZW91dCA9IGNvbnRleHQuc2V0VGltZW91dCxcbiAgICAgICAgc3BsaWNlID0gYXJyYXlQcm90by5zcGxpY2UsXG4gICAgICAgIFVpbnQ4QXJyYXkgPSBjb250ZXh0LlVpbnQ4QXJyYXksXG4gICAgICAgIFdlYWtNYXAgPSBnZXROYXRpdmUoY29udGV4dCwgJ1dlYWtNYXAnKTtcblxuICAgIC8qIE5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG4gICAgdmFyIG5hdGl2ZUNlaWwgPSBNYXRoLmNlaWwsXG4gICAgICAgIG5hdGl2ZUNyZWF0ZSA9IGdldE5hdGl2ZShPYmplY3QsICdjcmVhdGUnKSxcbiAgICAgICAgbmF0aXZlRmxvb3IgPSBNYXRoLmZsb29yLFxuICAgICAgICBuYXRpdmVJc0FycmF5ID0gZ2V0TmF0aXZlKEFycmF5LCAnaXNBcnJheScpLFxuICAgICAgICBuYXRpdmVJc0Zpbml0ZSA9IGNvbnRleHQuaXNGaW5pdGUsXG4gICAgICAgIG5hdGl2ZUtleXMgPSBnZXROYXRpdmUoT2JqZWN0LCAna2V5cycpLFxuICAgICAgICBuYXRpdmVNYXggPSBNYXRoLm1heCxcbiAgICAgICAgbmF0aXZlTWluID0gTWF0aC5taW4sXG4gICAgICAgIG5hdGl2ZU5vdyA9IGdldE5hdGl2ZShEYXRlLCAnbm93JyksXG4gICAgICAgIG5hdGl2ZVBhcnNlSW50ID0gY29udGV4dC5wYXJzZUludCxcbiAgICAgICAgbmF0aXZlUmFuZG9tID0gTWF0aC5yYW5kb207XG5cbiAgICAvKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciBgLUluZmluaXR5YCBhbmQgYEluZmluaXR5YC4gKi9cbiAgICB2YXIgTkVHQVRJVkVfSU5GSU5JVFkgPSBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksXG4gICAgICAgIFBPU0lUSVZFX0lORklOSVRZID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO1xuXG4gICAgLyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdGhlIG1heGltdW0gbGVuZ3RoIGFuZCBpbmRleCBvZiBhbiBhcnJheS4gKi9cbiAgICB2YXIgTUFYX0FSUkFZX0xFTkdUSCA9IDQyOTQ5NjcyOTUsXG4gICAgICAgIE1BWF9BUlJBWV9JTkRFWCA9IE1BWF9BUlJBWV9MRU5HVEggLSAxLFxuICAgICAgICBIQUxGX01BWF9BUlJBWV9MRU5HVEggPSBNQVhfQVJSQVlfTEVOR1RIID4+PiAxO1xuXG4gICAgLyoqXG4gICAgICogVXNlZCBhcyB0aGUgW21heGltdW0gbGVuZ3RoXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1udW1iZXIubWF4X3NhZmVfaW50ZWdlcilcbiAgICAgKiBvZiBhbiBhcnJheS1saWtlIHZhbHVlLlxuICAgICAqL1xuICAgIHZhciBNQVhfU0FGRV9JTlRFR0VSID0gOTAwNzE5OTI1NDc0MDk5MTtcblxuICAgIC8qKiBVc2VkIHRvIHN0b3JlIGZ1bmN0aW9uIG1ldGFkYXRhLiAqL1xuICAgIHZhciBtZXRhTWFwID0gV2Vha01hcCAmJiBuZXcgV2Vha01hcDtcblxuICAgIC8qKiBVc2VkIHRvIGxvb2t1cCB1bm1pbmlmaWVkIGZ1bmN0aW9uIG5hbWVzLiAqL1xuICAgIHZhciByZWFsTmFtZXMgPSB7fTtcblxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBgbG9kYXNoYCBvYmplY3Qgd2hpY2ggd3JhcHMgYHZhbHVlYCB0byBlbmFibGUgaW1wbGljaXQgY2hhaW5pbmcuXG4gICAgICogTWV0aG9kcyB0aGF0IG9wZXJhdGUgb24gYW5kIHJldHVybiBhcnJheXMsIGNvbGxlY3Rpb25zLCBhbmQgZnVuY3Rpb25zIGNhblxuICAgICAqIGJlIGNoYWluZWQgdG9nZXRoZXIuIE1ldGhvZHMgdGhhdCByZXRyaWV2ZSBhIHNpbmdsZSB2YWx1ZSBvciBtYXkgcmV0dXJuIGFcbiAgICAgKiBwcmltaXRpdmUgdmFsdWUgd2lsbCBhdXRvbWF0aWNhbGx5IGVuZCB0aGUgY2hhaW4gcmV0dXJuaW5nIHRoZSB1bndyYXBwZWRcbiAgICAgKiB2YWx1ZS4gRXhwbGljaXQgY2hhaW5pbmcgbWF5IGJlIGVuYWJsZWQgdXNpbmcgYF8uY2hhaW5gLiBUaGUgZXhlY3V0aW9uIG9mXG4gICAgICogY2hhaW5lZCBtZXRob2RzIGlzIGxhenksIHRoYXQgaXMsIGV4ZWN1dGlvbiBpcyBkZWZlcnJlZCB1bnRpbCBgXyN2YWx1ZWBcbiAgICAgKiBpcyBpbXBsaWNpdGx5IG9yIGV4cGxpY2l0bHkgY2FsbGVkLlxuICAgICAqXG4gICAgICogTGF6eSBldmFsdWF0aW9uIGFsbG93cyBzZXZlcmFsIG1ldGhvZHMgdG8gc3VwcG9ydCBzaG9ydGN1dCBmdXNpb24uIFNob3J0Y3V0XG4gICAgICogZnVzaW9uIGlzIGFuIG9wdGltaXphdGlvbiBzdHJhdGVneSB3aGljaCBtZXJnZSBpdGVyYXRlZSBjYWxsczsgdGhpcyBjYW4gaGVscFxuICAgICAqIHRvIGF2b2lkIHRoZSBjcmVhdGlvbiBvZiBpbnRlcm1lZGlhdGUgZGF0YSBzdHJ1Y3R1cmVzIGFuZCBncmVhdGx5IHJlZHVjZSB0aGVcbiAgICAgKiBudW1iZXIgb2YgaXRlcmF0ZWUgZXhlY3V0aW9ucy5cbiAgICAgKlxuICAgICAqIENoYWluaW5nIGlzIHN1cHBvcnRlZCBpbiBjdXN0b20gYnVpbGRzIGFzIGxvbmcgYXMgdGhlIGBfI3ZhbHVlYCBtZXRob2QgaXNcbiAgICAgKiBkaXJlY3RseSBvciBpbmRpcmVjdGx5IGluY2x1ZGVkIGluIHRoZSBidWlsZC5cbiAgICAgKlxuICAgICAqIEluIGFkZGl0aW9uIHRvIGxvZGFzaCBtZXRob2RzLCB3cmFwcGVycyBoYXZlIGBBcnJheWAgYW5kIGBTdHJpbmdgIG1ldGhvZHMuXG4gICAgICpcbiAgICAgKiBUaGUgd3JhcHBlciBgQXJyYXlgIG1ldGhvZHMgYXJlOlxuICAgICAqIGBjb25jYXRgLCBgam9pbmAsIGBwb3BgLCBgcHVzaGAsIGByZXZlcnNlYCwgYHNoaWZ0YCwgYHNsaWNlYCwgYHNvcnRgLFxuICAgICAqIGBzcGxpY2VgLCBhbmQgYHVuc2hpZnRgXG4gICAgICpcbiAgICAgKiBUaGUgd3JhcHBlciBgU3RyaW5nYCBtZXRob2RzIGFyZTpcbiAgICAgKiBgcmVwbGFjZWAgYW5kIGBzcGxpdGBcbiAgICAgKlxuICAgICAqIFRoZSB3cmFwcGVyIG1ldGhvZHMgdGhhdCBzdXBwb3J0IHNob3J0Y3V0IGZ1c2lvbiBhcmU6XG4gICAgICogYGNvbXBhY3RgLCBgZHJvcGAsIGBkcm9wUmlnaHRgLCBgZHJvcFJpZ2h0V2hpbGVgLCBgZHJvcFdoaWxlYCwgYGZpbHRlcmAsXG4gICAgICogYGZpcnN0YCwgYGluaXRpYWxgLCBgbGFzdGAsIGBtYXBgLCBgcGx1Y2tgLCBgcmVqZWN0YCwgYHJlc3RgLCBgcmV2ZXJzZWAsXG4gICAgICogYHNsaWNlYCwgYHRha2VgLCBgdGFrZVJpZ2h0YCwgYHRha2VSaWdodFdoaWxlYCwgYHRha2VXaGlsZWAsIGB0b0FycmF5YCxcbiAgICAgKiBhbmQgYHdoZXJlYFxuICAgICAqXG4gICAgICogVGhlIGNoYWluYWJsZSB3cmFwcGVyIG1ldGhvZHMgYXJlOlxuICAgICAqIGBhZnRlcmAsIGBhcnlgLCBgYXNzaWduYCwgYGF0YCwgYGJlZm9yZWAsIGBiaW5kYCwgYGJpbmRBbGxgLCBgYmluZEtleWAsXG4gICAgICogYGNhbGxiYWNrYCwgYGNoYWluYCwgYGNodW5rYCwgYGNvbW1pdGAsIGBjb21wYWN0YCwgYGNvbmNhdGAsIGBjb25zdGFudGAsXG4gICAgICogYGNvdW50QnlgLCBgY3JlYXRlYCwgYGN1cnJ5YCwgYGRlYm91bmNlYCwgYGRlZmF1bHRzYCwgYGRlZmF1bHRzRGVlcGAsXG4gICAgICogYGRlZmVyYCwgYGRlbGF5YCwgYGRpZmZlcmVuY2VgLCBgZHJvcGAsIGBkcm9wUmlnaHRgLCBgZHJvcFJpZ2h0V2hpbGVgLFxuICAgICAqIGBkcm9wV2hpbGVgLCBgZmlsbGAsIGBmaWx0ZXJgLCBgZmxhdHRlbmAsIGBmbGF0dGVuRGVlcGAsIGBmbG93YCwgYGZsb3dSaWdodGAsXG4gICAgICogYGZvckVhY2hgLCBgZm9yRWFjaFJpZ2h0YCwgYGZvckluYCwgYGZvckluUmlnaHRgLCBgZm9yT3duYCwgYGZvck93blJpZ2h0YCxcbiAgICAgKiBgZnVuY3Rpb25zYCwgYGdyb3VwQnlgLCBgaW5kZXhCeWAsIGBpbml0aWFsYCwgYGludGVyc2VjdGlvbmAsIGBpbnZlcnRgLFxuICAgICAqIGBpbnZva2VgLCBga2V5c2AsIGBrZXlzSW5gLCBgbWFwYCwgYG1hcEtleXNgLCBgbWFwVmFsdWVzYCwgYG1hdGNoZXNgLFxuICAgICAqIGBtYXRjaGVzUHJvcGVydHlgLCBgbWVtb2l6ZWAsIGBtZXJnZWAsIGBtZXRob2RgLCBgbWV0aG9kT2ZgLCBgbWl4aW5gLFxuICAgICAqIGBtb2RBcmdzYCwgYG5lZ2F0ZWAsIGBvbWl0YCwgYG9uY2VgLCBgcGFpcnNgLCBgcGFydGlhbGAsIGBwYXJ0aWFsUmlnaHRgLFxuICAgICAqIGBwYXJ0aXRpb25gLCBgcGlja2AsIGBwbGFudGAsIGBwbHVja2AsIGBwcm9wZXJ0eWAsIGBwcm9wZXJ0eU9mYCwgYHB1bGxgLFxuICAgICAqIGBwdWxsQXRgLCBgcHVzaGAsIGByYW5nZWAsIGByZWFyZ2AsIGByZWplY3RgLCBgcmVtb3ZlYCwgYHJlc3RgLCBgcmVzdFBhcmFtYCxcbiAgICAgKiBgcmV2ZXJzZWAsIGBzZXRgLCBgc2h1ZmZsZWAsIGBzbGljZWAsIGBzb3J0YCwgYHNvcnRCeWAsIGBzb3J0QnlBbGxgLFxuICAgICAqIGBzb3J0QnlPcmRlcmAsIGBzcGxpY2VgLCBgc3ByZWFkYCwgYHRha2VgLCBgdGFrZVJpZ2h0YCwgYHRha2VSaWdodFdoaWxlYCxcbiAgICAgKiBgdGFrZVdoaWxlYCwgYHRhcGAsIGB0aHJvdHRsZWAsIGB0aHJ1YCwgYHRpbWVzYCwgYHRvQXJyYXlgLCBgdG9QbGFpbk9iamVjdGAsXG4gICAgICogYHRyYW5zZm9ybWAsIGB1bmlvbmAsIGB1bmlxYCwgYHVuc2hpZnRgLCBgdW56aXBgLCBgdW56aXBXaXRoYCwgYHZhbHVlc2AsXG4gICAgICogYHZhbHVlc0luYCwgYHdoZXJlYCwgYHdpdGhvdXRgLCBgd3JhcGAsIGB4b3JgLCBgemlwYCwgYHppcE9iamVjdGAsIGB6aXBXaXRoYFxuICAgICAqXG4gICAgICogVGhlIHdyYXBwZXIgbWV0aG9kcyB0aGF0IGFyZSAqKm5vdCoqIGNoYWluYWJsZSBieSBkZWZhdWx0IGFyZTpcbiAgICAgKiBgYWRkYCwgYGF0dGVtcHRgLCBgY2FtZWxDYXNlYCwgYGNhcGl0YWxpemVgLCBgY2VpbGAsIGBjbG9uZWAsIGBjbG9uZURlZXBgLFxuICAgICAqIGBkZWJ1cnJgLCBgZW5kc1dpdGhgLCBgZXNjYXBlYCwgYGVzY2FwZVJlZ0V4cGAsIGBldmVyeWAsIGBmaW5kYCwgYGZpbmRJbmRleGAsXG4gICAgICogYGZpbmRLZXlgLCBgZmluZExhc3RgLCBgZmluZExhc3RJbmRleGAsIGBmaW5kTGFzdEtleWAsIGBmaW5kV2hlcmVgLCBgZmlyc3RgLFxuICAgICAqIGBmbG9vcmAsIGBnZXRgLCBgZ3RgLCBgZ3RlYCwgYGhhc2AsIGBpZGVudGl0eWAsIGBpbmNsdWRlc2AsIGBpbmRleE9mYCxcbiAgICAgKiBgaW5SYW5nZWAsIGBpc0FyZ3VtZW50c2AsIGBpc0FycmF5YCwgYGlzQm9vbGVhbmAsIGBpc0RhdGVgLCBgaXNFbGVtZW50YCxcbiAgICAgKiBgaXNFbXB0eWAsIGBpc0VxdWFsYCwgYGlzRXJyb3JgLCBgaXNGaW5pdGVgIGBpc0Z1bmN0aW9uYCwgYGlzTWF0Y2hgLFxuICAgICAqIGBpc05hdGl2ZWAsIGBpc05hTmAsIGBpc051bGxgLCBgaXNOdW1iZXJgLCBgaXNPYmplY3RgLCBgaXNQbGFpbk9iamVjdGAsXG4gICAgICogYGlzUmVnRXhwYCwgYGlzU3RyaW5nYCwgYGlzVW5kZWZpbmVkYCwgYGlzVHlwZWRBcnJheWAsIGBqb2luYCwgYGtlYmFiQ2FzZWAsXG4gICAgICogYGxhc3RgLCBgbGFzdEluZGV4T2ZgLCBgbHRgLCBgbHRlYCwgYG1heGAsIGBtaW5gLCBgbm9Db25mbGljdGAsIGBub29wYCxcbiAgICAgKiBgbm93YCwgYHBhZGAsIGBwYWRMZWZ0YCwgYHBhZFJpZ2h0YCwgYHBhcnNlSW50YCwgYHBvcGAsIGByYW5kb21gLCBgcmVkdWNlYCxcbiAgICAgKiBgcmVkdWNlUmlnaHRgLCBgcmVwZWF0YCwgYHJlc3VsdGAsIGByb3VuZGAsIGBydW5JbkNvbnRleHRgLCBgc2hpZnRgLCBgc2l6ZWAsXG4gICAgICogYHNuYWtlQ2FzZWAsIGBzb21lYCwgYHNvcnRlZEluZGV4YCwgYHNvcnRlZExhc3RJbmRleGAsIGBzdGFydENhc2VgLFxuICAgICAqIGBzdGFydHNXaXRoYCwgYHN1bWAsIGB0ZW1wbGF0ZWAsIGB0cmltYCwgYHRyaW1MZWZ0YCwgYHRyaW1SaWdodGAsIGB0cnVuY2AsXG4gICAgICogYHVuZXNjYXBlYCwgYHVuaXF1ZUlkYCwgYHZhbHVlYCwgYW5kIGB3b3Jkc2BcbiAgICAgKlxuICAgICAqIFRoZSB3cmFwcGVyIG1ldGhvZCBgc2FtcGxlYCB3aWxsIHJldHVybiBhIHdyYXBwZWQgdmFsdWUgd2hlbiBgbmAgaXMgcHJvdmlkZWQsXG4gICAgICogb3RoZXJ3aXNlIGFuIHVud3JhcHBlZCB2YWx1ZSBpcyByZXR1cm5lZC5cbiAgICAgKlxuICAgICAqIEBuYW1lIF9cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAY2F0ZWdvcnkgQ2hhaW5cbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byB3cmFwIGluIGEgYGxvZGFzaGAgaW5zdGFuY2UuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbmV3IGBsb2Rhc2hgIHdyYXBwZXIgaW5zdGFuY2UuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciB3cmFwcGVkID0gXyhbMSwgMiwgM10pO1xuICAgICAqXG4gICAgICogLy8gcmV0dXJucyBhbiB1bndyYXBwZWQgdmFsdWVcbiAgICAgKiB3cmFwcGVkLnJlZHVjZShmdW5jdGlvbih0b3RhbCwgbikge1xuICAgICAqICAgcmV0dXJuIHRvdGFsICsgbjtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiA2XG4gICAgICpcbiAgICAgKiAvLyByZXR1cm5zIGEgd3JhcHBlZCB2YWx1ZVxuICAgICAqIHZhciBzcXVhcmVzID0gd3JhcHBlZC5tYXAoZnVuY3Rpb24obikge1xuICAgICAqICAgcmV0dXJuIG4gKiBuO1xuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogXy5pc0FycmF5KHNxdWFyZXMpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICpcbiAgICAgKiBfLmlzQXJyYXkoc3F1YXJlcy52YWx1ZSgpKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICovXG4gICAgZnVuY3Rpb24gbG9kYXNoKHZhbHVlKSB7XG4gICAgICBpZiAoaXNPYmplY3RMaWtlKHZhbHVlKSAmJiAhaXNBcnJheSh2YWx1ZSkgJiYgISh2YWx1ZSBpbnN0YW5jZW9mIExhenlXcmFwcGVyKSkge1xuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBMb2Rhc2hXcmFwcGVyKSB7XG4gICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbHVlLCAnX19jaGFpbl9fJykgJiYgaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwgJ19fd3JhcHBlZF9fJykpIHtcbiAgICAgICAgICByZXR1cm4gd3JhcHBlckNsb25lKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBMb2Rhc2hXcmFwcGVyKHZhbHVlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgZnVuY3Rpb24gd2hvc2UgcHJvdG90eXBlIGFsbCBjaGFpbmluZyB3cmFwcGVycyBpbmhlcml0IGZyb20uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VMb2Rhc2goKSB7XG4gICAgICAvLyBObyBvcGVyYXRpb24gcGVyZm9ybWVkLlxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGNvbnN0cnVjdG9yIGZvciBjcmVhdGluZyBgbG9kYXNoYCB3cmFwcGVyIG9iamVjdHMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHdyYXAuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbY2hhaW5BbGxdIEVuYWJsZSBjaGFpbmluZyBmb3IgYWxsIHdyYXBwZXIgbWV0aG9kcy5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbYWN0aW9ucz1bXV0gQWN0aW9ucyB0byBwZWZvcm0gdG8gcmVzb2x2ZSB0aGUgdW53cmFwcGVkIHZhbHVlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIExvZGFzaFdyYXBwZXIodmFsdWUsIGNoYWluQWxsLCBhY3Rpb25zKSB7XG4gICAgICB0aGlzLl9fd3JhcHBlZF9fID0gdmFsdWU7XG4gICAgICB0aGlzLl9fYWN0aW9uc19fID0gYWN0aW9ucyB8fCBbXTtcbiAgICAgIHRoaXMuX19jaGFpbl9fID0gISFjaGFpbkFsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBbiBvYmplY3QgZW52aXJvbm1lbnQgZmVhdHVyZSBmbGFncy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEB0eXBlIE9iamVjdFxuICAgICAqL1xuICAgIHZhciBzdXBwb3J0ID0gbG9kYXNoLnN1cHBvcnQgPSB7fTtcblxuICAgIC8qKlxuICAgICAqIEJ5IGRlZmF1bHQsIHRoZSB0ZW1wbGF0ZSBkZWxpbWl0ZXJzIHVzZWQgYnkgbG9kYXNoIGFyZSBsaWtlIHRob3NlIGluXG4gICAgICogZW1iZWRkZWQgUnVieSAoRVJCKS4gQ2hhbmdlIHRoZSBmb2xsb3dpbmcgdGVtcGxhdGUgc2V0dGluZ3MgdG8gdXNlXG4gICAgICogYWx0ZXJuYXRpdmUgZGVsaW1pdGVycy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEB0eXBlIE9iamVjdFxuICAgICAqL1xuICAgIGxvZGFzaC50ZW1wbGF0ZVNldHRpbmdzID0ge1xuXG4gICAgICAvKipcbiAgICAgICAqIFVzZWQgdG8gZGV0ZWN0IGBkYXRhYCBwcm9wZXJ0eSB2YWx1ZXMgdG8gYmUgSFRNTC1lc2NhcGVkLlxuICAgICAgICpcbiAgICAgICAqIEBtZW1iZXJPZiBfLnRlbXBsYXRlU2V0dGluZ3NcbiAgICAgICAqIEB0eXBlIFJlZ0V4cFxuICAgICAgICovXG4gICAgICAnZXNjYXBlJzogcmVFc2NhcGUsXG5cbiAgICAgIC8qKlxuICAgICAgICogVXNlZCB0byBkZXRlY3QgY29kZSB0byBiZSBldmFsdWF0ZWQuXG4gICAgICAgKlxuICAgICAgICogQG1lbWJlck9mIF8udGVtcGxhdGVTZXR0aW5nc1xuICAgICAgICogQHR5cGUgUmVnRXhwXG4gICAgICAgKi9cbiAgICAgICdldmFsdWF0ZSc6IHJlRXZhbHVhdGUsXG5cbiAgICAgIC8qKlxuICAgICAgICogVXNlZCB0byBkZXRlY3QgYGRhdGFgIHByb3BlcnR5IHZhbHVlcyB0byBpbmplY3QuXG4gICAgICAgKlxuICAgICAgICogQG1lbWJlck9mIF8udGVtcGxhdGVTZXR0aW5nc1xuICAgICAgICogQHR5cGUgUmVnRXhwXG4gICAgICAgKi9cbiAgICAgICdpbnRlcnBvbGF0ZSc6IHJlSW50ZXJwb2xhdGUsXG5cbiAgICAgIC8qKlxuICAgICAgICogVXNlZCB0byByZWZlcmVuY2UgdGhlIGRhdGEgb2JqZWN0IGluIHRoZSB0ZW1wbGF0ZSB0ZXh0LlxuICAgICAgICpcbiAgICAgICAqIEBtZW1iZXJPZiBfLnRlbXBsYXRlU2V0dGluZ3NcbiAgICAgICAqIEB0eXBlIHN0cmluZ1xuICAgICAgICovXG4gICAgICAndmFyaWFibGUnOiAnJyxcblxuICAgICAgLyoqXG4gICAgICAgKiBVc2VkIHRvIGltcG9ydCB2YXJpYWJsZXMgaW50byB0aGUgY29tcGlsZWQgdGVtcGxhdGUuXG4gICAgICAgKlxuICAgICAgICogQG1lbWJlck9mIF8udGVtcGxhdGVTZXR0aW5nc1xuICAgICAgICogQHR5cGUgT2JqZWN0XG4gICAgICAgKi9cbiAgICAgICdpbXBvcnRzJzoge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIHJlZmVyZW5jZSB0byB0aGUgYGxvZGFzaGAgZnVuY3Rpb24uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXJPZiBfLnRlbXBsYXRlU2V0dGluZ3MuaW1wb3J0c1xuICAgICAgICAgKiBAdHlwZSBGdW5jdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgJ18nOiBsb2Rhc2hcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGxhenkgd3JhcHBlciBvYmplY3Qgd2hpY2ggd3JhcHMgYHZhbHVlYCB0byBlbmFibGUgbGF6eSBldmFsdWF0aW9uLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byB3cmFwLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIExhenlXcmFwcGVyKHZhbHVlKSB7XG4gICAgICB0aGlzLl9fd3JhcHBlZF9fID0gdmFsdWU7XG4gICAgICB0aGlzLl9fYWN0aW9uc19fID0gW107XG4gICAgICB0aGlzLl9fZGlyX18gPSAxO1xuICAgICAgdGhpcy5fX2ZpbHRlcmVkX18gPSBmYWxzZTtcbiAgICAgIHRoaXMuX19pdGVyYXRlZXNfXyA9IFtdO1xuICAgICAgdGhpcy5fX3Rha2VDb3VudF9fID0gUE9TSVRJVkVfSU5GSU5JVFk7XG4gICAgICB0aGlzLl9fdmlld3NfXyA9IFtdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBjbG9uZSBvZiB0aGUgbGF6eSB3cmFwcGVyIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQG5hbWUgY2xvbmVcbiAgICAgKiBAbWVtYmVyT2YgTGF6eVdyYXBwZXJcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBjbG9uZWQgYExhenlXcmFwcGVyYCBvYmplY3QuXG4gICAgICovXG4gICAgZnVuY3Rpb24gbGF6eUNsb25lKCkge1xuICAgICAgdmFyIHJlc3VsdCA9IG5ldyBMYXp5V3JhcHBlcih0aGlzLl9fd3JhcHBlZF9fKTtcbiAgICAgIHJlc3VsdC5fX2FjdGlvbnNfXyA9IGFycmF5Q29weSh0aGlzLl9fYWN0aW9uc19fKTtcbiAgICAgIHJlc3VsdC5fX2Rpcl9fID0gdGhpcy5fX2Rpcl9fO1xuICAgICAgcmVzdWx0Ll9fZmlsdGVyZWRfXyA9IHRoaXMuX19maWx0ZXJlZF9fO1xuICAgICAgcmVzdWx0Ll9faXRlcmF0ZWVzX18gPSBhcnJheUNvcHkodGhpcy5fX2l0ZXJhdGVlc19fKTtcbiAgICAgIHJlc3VsdC5fX3Rha2VDb3VudF9fID0gdGhpcy5fX3Rha2VDb3VudF9fO1xuICAgICAgcmVzdWx0Ll9fdmlld3NfXyA9IGFycmF5Q29weSh0aGlzLl9fdmlld3NfXyk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldmVyc2VzIHRoZSBkaXJlY3Rpb24gb2YgbGF6eSBpdGVyYXRpb24uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBuYW1lIHJldmVyc2VcbiAgICAgKiBAbWVtYmVyT2YgTGF6eVdyYXBwZXJcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBuZXcgcmV2ZXJzZWQgYExhenlXcmFwcGVyYCBvYmplY3QuXG4gICAgICovXG4gICAgZnVuY3Rpb24gbGF6eVJldmVyc2UoKSB7XG4gICAgICBpZiAodGhpcy5fX2ZpbHRlcmVkX18pIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBMYXp5V3JhcHBlcih0aGlzKTtcbiAgICAgICAgcmVzdWx0Ll9fZGlyX18gPSAtMTtcbiAgICAgICAgcmVzdWx0Ll9fZmlsdGVyZWRfXyA9IHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQgPSB0aGlzLmNsb25lKCk7XG4gICAgICAgIHJlc3VsdC5fX2Rpcl9fICo9IC0xO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFeHRyYWN0cyB0aGUgdW53cmFwcGVkIHZhbHVlIGZyb20gaXRzIGxhenkgd3JhcHBlci5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQG5hbWUgdmFsdWVcbiAgICAgKiBAbWVtYmVyT2YgTGF6eVdyYXBwZXJcbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgdW53cmFwcGVkIHZhbHVlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGxhenlWYWx1ZSgpIHtcbiAgICAgIHZhciBhcnJheSA9IHRoaXMuX193cmFwcGVkX18udmFsdWUoKSxcbiAgICAgICAgICBkaXIgPSB0aGlzLl9fZGlyX18sXG4gICAgICAgICAgaXNBcnIgPSBpc0FycmF5KGFycmF5KSxcbiAgICAgICAgICBpc1JpZ2h0ID0gZGlyIDwgMCxcbiAgICAgICAgICBhcnJMZW5ndGggPSBpc0FyciA/IGFycmF5Lmxlbmd0aCA6IDAsXG4gICAgICAgICAgdmlldyA9IGdldFZpZXcoMCwgYXJyTGVuZ3RoLCB0aGlzLl9fdmlld3NfXyksXG4gICAgICAgICAgc3RhcnQgPSB2aWV3LnN0YXJ0LFxuICAgICAgICAgIGVuZCA9IHZpZXcuZW5kLFxuICAgICAgICAgIGxlbmd0aCA9IGVuZCAtIHN0YXJ0LFxuICAgICAgICAgIGluZGV4ID0gaXNSaWdodCA/IGVuZCA6IChzdGFydCAtIDEpLFxuICAgICAgICAgIGl0ZXJhdGVlcyA9IHRoaXMuX19pdGVyYXRlZXNfXyxcbiAgICAgICAgICBpdGVyTGVuZ3RoID0gaXRlcmF0ZWVzLmxlbmd0aCxcbiAgICAgICAgICByZXNJbmRleCA9IDAsXG4gICAgICAgICAgdGFrZUNvdW50ID0gbmF0aXZlTWluKGxlbmd0aCwgdGhpcy5fX3Rha2VDb3VudF9fKTtcblxuICAgICAgaWYgKCFpc0FyciB8fCBhcnJMZW5ndGggPCBMQVJHRV9BUlJBWV9TSVpFIHx8IChhcnJMZW5ndGggPT0gbGVuZ3RoICYmIHRha2VDb3VudCA9PSBsZW5ndGgpKSB7XG4gICAgICAgIHJldHVybiBiYXNlV3JhcHBlclZhbHVlKChpc1JpZ2h0ICYmIGlzQXJyKSA/IGFycmF5LnJldmVyc2UoKSA6IGFycmF5LCB0aGlzLl9fYWN0aW9uc19fKTtcbiAgICAgIH1cbiAgICAgIHZhciByZXN1bHQgPSBbXTtcblxuICAgICAgb3V0ZXI6XG4gICAgICB3aGlsZSAobGVuZ3RoLS0gJiYgcmVzSW5kZXggPCB0YWtlQ291bnQpIHtcbiAgICAgICAgaW5kZXggKz0gZGlyO1xuXG4gICAgICAgIHZhciBpdGVySW5kZXggPSAtMSxcbiAgICAgICAgICAgIHZhbHVlID0gYXJyYXlbaW5kZXhdO1xuXG4gICAgICAgIHdoaWxlICgrK2l0ZXJJbmRleCA8IGl0ZXJMZW5ndGgpIHtcbiAgICAgICAgICB2YXIgZGF0YSA9IGl0ZXJhdGVlc1tpdGVySW5kZXhdLFxuICAgICAgICAgICAgICBpdGVyYXRlZSA9IGRhdGEuaXRlcmF0ZWUsXG4gICAgICAgICAgICAgIHR5cGUgPSBkYXRhLnR5cGUsXG4gICAgICAgICAgICAgIGNvbXB1dGVkID0gaXRlcmF0ZWUodmFsdWUpO1xuXG4gICAgICAgICAgaWYgKHR5cGUgPT0gTEFaWV9NQVBfRkxBRykge1xuICAgICAgICAgICAgdmFsdWUgPSBjb21wdXRlZDtcbiAgICAgICAgICB9IGVsc2UgaWYgKCFjb21wdXRlZCkge1xuICAgICAgICAgICAgaWYgKHR5cGUgPT0gTEFaWV9GSUxURVJfRkxBRykge1xuICAgICAgICAgICAgICBjb250aW51ZSBvdXRlcjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGJyZWFrIG91dGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXN1bHRbcmVzSW5kZXgrK10gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGNhY2hlIG9iamVjdCB0byBzdG9yZSBrZXkvdmFsdWUgcGFpcnMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbmFtZSBDYWNoZVxuICAgICAqIEBtZW1iZXJPZiBfLm1lbW9pemVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBNYXBDYWNoZSgpIHtcbiAgICAgIHRoaXMuX19kYXRhX18gPSB7fTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGBrZXlgIGFuZCBpdHMgdmFsdWUgZnJvbSB0aGUgY2FjaGUuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBuYW1lIGRlbGV0ZVxuICAgICAqIEBtZW1iZXJPZiBfLm1lbW9pemUuQ2FjaGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHJlbW92ZS5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGVudHJ5IHdhcyByZW1vdmVkIHN1Y2Nlc3NmdWxseSwgZWxzZSBgZmFsc2VgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1hcERlbGV0ZShrZXkpIHtcbiAgICAgIHJldHVybiB0aGlzLmhhcyhrZXkpICYmIGRlbGV0ZSB0aGlzLl9fZGF0YV9fW2tleV07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgY2FjaGVkIHZhbHVlIGZvciBga2V5YC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQG5hbWUgZ2V0XG4gICAgICogQG1lbWJlck9mIF8ubWVtb2l6ZS5DYWNoZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gZ2V0LlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBjYWNoZWQgdmFsdWUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gbWFwR2V0KGtleSkge1xuICAgICAgcmV0dXJuIGtleSA9PSAnX19wcm90b19fJyA/IHVuZGVmaW5lZCA6IHRoaXMuX19kYXRhX19ba2V5XTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYSBjYWNoZWQgdmFsdWUgZm9yIGBrZXlgIGV4aXN0cy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQG5hbWUgaGFzXG4gICAgICogQG1lbWJlck9mIF8ubWVtb2l6ZS5DYWNoZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFuIGVudHJ5IGZvciBga2V5YCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBtYXBIYXMoa2V5KSB7XG4gICAgICByZXR1cm4ga2V5ICE9ICdfX3Byb3RvX18nICYmIGhhc093blByb3BlcnR5LmNhbGwodGhpcy5fX2RhdGFfXywga2V5KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIGB2YWx1ZWAgdG8gYGtleWAgb2YgdGhlIGNhY2hlLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAbmFtZSBzZXRcbiAgICAgKiBAbWVtYmVyT2YgXy5tZW1vaXplLkNhY2hlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBjYWNoZS5cbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjYWNoZS5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBjYWNoZSBvYmplY3QuXG4gICAgICovXG4gICAgZnVuY3Rpb24gbWFwU2V0KGtleSwgdmFsdWUpIHtcbiAgICAgIGlmIChrZXkgIT0gJ19fcHJvdG9fXycpIHtcbiAgICAgICAgdGhpcy5fX2RhdGFfX1trZXldID0gdmFsdWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIENyZWF0ZXMgYSBjYWNoZSBvYmplY3QgdG8gc3RvcmUgdW5pcXVlIHZhbHVlcy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gW3ZhbHVlc10gVGhlIHZhbHVlcyB0byBjYWNoZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBTZXRDYWNoZSh2YWx1ZXMpIHtcbiAgICAgIHZhciBsZW5ndGggPSB2YWx1ZXMgPyB2YWx1ZXMubGVuZ3RoIDogMDtcblxuICAgICAgdGhpcy5kYXRhID0geyAnaGFzaCc6IG5hdGl2ZUNyZWF0ZShudWxsKSwgJ3NldCc6IG5ldyBTZXQgfTtcbiAgICAgIHdoaWxlIChsZW5ndGgtLSkge1xuICAgICAgICB0aGlzLnB1c2godmFsdWVzW2xlbmd0aF0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGluIGBjYWNoZWAgbWltaWNraW5nIHRoZSByZXR1cm4gc2lnbmF0dXJlIG9mXG4gICAgICogYF8uaW5kZXhPZmAgYnkgcmV0dXJuaW5nIGAwYCBpZiB0aGUgdmFsdWUgaXMgZm91bmQsIGVsc2UgYC0xYC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGNhY2hlIFRoZSBjYWNoZSB0byBzZWFyY2guXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2VhcmNoIGZvci5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIGAwYCBpZiBgdmFsdWVgIGlzIGZvdW5kLCBlbHNlIGAtMWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gY2FjaGVJbmRleE9mKGNhY2hlLCB2YWx1ZSkge1xuICAgICAgdmFyIGRhdGEgPSBjYWNoZS5kYXRhLFxuICAgICAgICAgIHJlc3VsdCA9ICh0eXBlb2YgdmFsdWUgPT0gJ3N0cmluZycgfHwgaXNPYmplY3QodmFsdWUpKSA/IGRhdGEuc2V0Lmhhcyh2YWx1ZSkgOiBkYXRhLmhhc2hbdmFsdWVdO1xuXG4gICAgICByZXR1cm4gcmVzdWx0ID8gMCA6IC0xO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgYHZhbHVlYCB0byB0aGUgY2FjaGUuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBuYW1lIHB1c2hcbiAgICAgKiBAbWVtYmVyT2YgU2V0Q2FjaGVcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjYWNoZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjYWNoZVB1c2godmFsdWUpIHtcbiAgICAgIHZhciBkYXRhID0gdGhpcy5kYXRhO1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJyB8fCBpc09iamVjdCh2YWx1ZSkpIHtcbiAgICAgICAgZGF0YS5zZXQuYWRkKHZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRhdGEuaGFzaFt2YWx1ZV0gPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgYXJyYXkgam9pbmluZyBgYXJyYXlgIHdpdGggYG90aGVyYC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGpvaW4uXG4gICAgICogQHBhcmFtIHtBcnJheX0gb3RoZXIgVGhlIG90aGVyIGFycmF5IHRvIGpvaW4uXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgY29uY2F0ZW5hdGVkIGFycmF5LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFycmF5Q29uY2F0KGFycmF5LCBvdGhlcikge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gYXJyYXkubGVuZ3RoLFxuICAgICAgICAgIG90aEluZGV4ID0gLTEsXG4gICAgICAgICAgb3RoTGVuZ3RoID0gb3RoZXIubGVuZ3RoLFxuICAgICAgICAgIHJlc3VsdCA9IEFycmF5KGxlbmd0aCArIG90aExlbmd0aCk7XG5cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHJlc3VsdFtpbmRleF0gPSBhcnJheVtpbmRleF07XG4gICAgICB9XG4gICAgICB3aGlsZSAoKytvdGhJbmRleCA8IG90aExlbmd0aCkge1xuICAgICAgICByZXN1bHRbaW5kZXgrK10gPSBvdGhlcltvdGhJbmRleF07XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvcGllcyB0aGUgdmFsdWVzIG9mIGBzb3VyY2VgIHRvIGBhcnJheWAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHNvdXJjZSBUaGUgYXJyYXkgdG8gY29weSB2YWx1ZXMgZnJvbS5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbYXJyYXk9W11dIFRoZSBhcnJheSB0byBjb3B5IHZhbHVlcyB0by5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYGFycmF5YC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhcnJheUNvcHkoc291cmNlLCBhcnJheSkge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gc291cmNlLmxlbmd0aDtcblxuICAgICAgYXJyYXkgfHwgKGFycmF5ID0gQXJyYXkobGVuZ3RoKSk7XG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICBhcnJheVtpbmRleF0gPSBzb3VyY2VbaW5kZXhdO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFycmF5O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgXy5mb3JFYWNoYCBmb3IgYXJyYXlzIHdpdGhvdXQgc3VwcG9ydCBmb3IgY2FsbGJhY2tcbiAgICAgKiBzaG9ydGhhbmRzIGFuZCBgdGhpc2AgYmluZGluZy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBgYXJyYXlgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFycmF5RWFjaChhcnJheSwgaXRlcmF0ZWUpIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcblxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgaWYgKGl0ZXJhdGVlKGFycmF5W2luZGV4XSwgaW5kZXgsIGFycmF5KSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGFycmF5O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgXy5mb3JFYWNoUmlnaHRgIGZvciBhcnJheXMgd2l0aG91dCBzdXBwb3J0IGZvclxuICAgICAqIGNhbGxiYWNrIHNob3J0aGFuZHMgYW5kIGB0aGlzYCBiaW5kaW5nLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGBhcnJheWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYXJyYXlFYWNoUmlnaHQoYXJyYXksIGl0ZXJhdGVlKSB7XG4gICAgICB2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuXG4gICAgICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICAgICAgaWYgKGl0ZXJhdGVlKGFycmF5W2xlbmd0aF0sIGxlbmd0aCwgYXJyYXkpID09PSBmYWxzZSkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gYXJyYXk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBfLmV2ZXJ5YCBmb3IgYXJyYXlzIHdpdGhvdXQgc3VwcG9ydCBmb3IgY2FsbGJhY2tcbiAgICAgKiBzaG9ydGhhbmRzIGFuZCBgdGhpc2AgYmluZGluZy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYWxsIGVsZW1lbnRzIHBhc3MgdGhlIHByZWRpY2F0ZSBjaGVjayxcbiAgICAgKiAgZWxzZSBgZmFsc2VgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFycmF5RXZlcnkoYXJyYXksIHByZWRpY2F0ZSkge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuXG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICBpZiAoIXByZWRpY2F0ZShhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSkpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUV4dHJlbXVtYCBmb3IgYXJyYXlzIHdoaWNoIGludm9rZXMgYGl0ZXJhdGVlYFxuICAgICAqIHdpdGggb25lIGFyZ3VtZW50OiAodmFsdWUpLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY29tcGFyYXRvciBUaGUgZnVuY3Rpb24gdXNlZCB0byBjb21wYXJlIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0geyp9IGV4VmFsdWUgVGhlIGluaXRpYWwgZXh0cmVtdW0gdmFsdWUuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGV4dHJlbXVtIHZhbHVlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFycmF5RXh0cmVtdW0oYXJyYXksIGl0ZXJhdGVlLCBjb21wYXJhdG9yLCBleFZhbHVlKSB7XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSBhcnJheS5sZW5ndGgsXG4gICAgICAgICAgY29tcHV0ZWQgPSBleFZhbHVlLFxuICAgICAgICAgIHJlc3VsdCA9IGNvbXB1dGVkO1xuXG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICB2YXIgdmFsdWUgPSBhcnJheVtpbmRleF0sXG4gICAgICAgICAgICBjdXJyZW50ID0gK2l0ZXJhdGVlKHZhbHVlKTtcblxuICAgICAgICBpZiAoY29tcGFyYXRvcihjdXJyZW50LCBjb21wdXRlZCkpIHtcbiAgICAgICAgICBjb21wdXRlZCA9IGN1cnJlbnQ7XG4gICAgICAgICAgcmVzdWx0ID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBfLmZpbHRlcmAgZm9yIGFycmF5cyB3aXRob3V0IHN1cHBvcnQgZm9yIGNhbGxiYWNrXG4gICAgICogc2hvcnRoYW5kcyBhbmQgYHRoaXNgIGJpbmRpbmcuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZGljYXRlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgZmlsdGVyZWQgYXJyYXkuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYXJyYXlGaWx0ZXIoYXJyYXksIHByZWRpY2F0ZSkge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gYXJyYXkubGVuZ3RoLFxuICAgICAgICAgIHJlc0luZGV4ID0gLTEsXG4gICAgICAgICAgcmVzdWx0ID0gW107XG5cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IGFycmF5W2luZGV4XTtcbiAgICAgICAgaWYgKHByZWRpY2F0ZSh2YWx1ZSwgaW5kZXgsIGFycmF5KSkge1xuICAgICAgICAgIHJlc3VsdFsrK3Jlc0luZGV4XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgXy5tYXBgIGZvciBhcnJheXMgd2l0aG91dCBzdXBwb3J0IGZvciBjYWxsYmFja1xuICAgICAqIHNob3J0aGFuZHMgYW5kIGB0aGlzYCBiaW5kaW5nLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgbWFwcGVkIGFycmF5LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFycmF5TWFwKGFycmF5LCBpdGVyYXRlZSkge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gYXJyYXkubGVuZ3RoLFxuICAgICAgICAgIHJlc3VsdCA9IEFycmF5KGxlbmd0aCk7XG5cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHJlc3VsdFtpbmRleF0gPSBpdGVyYXRlZShhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFwcGVuZHMgdGhlIGVsZW1lbnRzIG9mIGB2YWx1ZXNgIHRvIGBhcnJheWAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBtb2RpZnkuXG4gICAgICogQHBhcmFtIHtBcnJheX0gdmFsdWVzIFRoZSB2YWx1ZXMgdG8gYXBwZW5kLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBgYXJyYXlgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFycmF5UHVzaChhcnJheSwgdmFsdWVzKSB7XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSB2YWx1ZXMubGVuZ3RoLFxuICAgICAgICAgIG9mZnNldCA9IGFycmF5Lmxlbmd0aDtcblxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgYXJyYXlbb2Zmc2V0ICsgaW5kZXhdID0gdmFsdWVzW2luZGV4XTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhcnJheTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYF8ucmVkdWNlYCBmb3IgYXJyYXlzIHdpdGhvdXQgc3VwcG9ydCBmb3IgY2FsbGJhY2tcbiAgICAgKiBzaG9ydGhhbmRzIGFuZCBgdGhpc2AgYmluZGluZy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW2FjY3VtdWxhdG9yXSBUaGUgaW5pdGlhbCB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpbml0RnJvbUFycmF5XSBTcGVjaWZ5IHVzaW5nIHRoZSBmaXJzdCBlbGVtZW50IG9mIGBhcnJheWBcbiAgICAgKiAgYXMgdGhlIGluaXRpYWwgdmFsdWUuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGFjY3VtdWxhdGVkIHZhbHVlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFycmF5UmVkdWNlKGFycmF5LCBpdGVyYXRlZSwgYWNjdW11bGF0b3IsIGluaXRGcm9tQXJyYXkpIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcblxuICAgICAgaWYgKGluaXRGcm9tQXJyYXkgJiYgbGVuZ3RoKSB7XG4gICAgICAgIGFjY3VtdWxhdG9yID0gYXJyYXlbKytpbmRleF07XG4gICAgICB9XG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICBhY2N1bXVsYXRvciA9IGl0ZXJhdGVlKGFjY3VtdWxhdG9yLCBhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gYWNjdW11bGF0b3I7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBfLnJlZHVjZVJpZ2h0YCBmb3IgYXJyYXlzIHdpdGhvdXQgc3VwcG9ydCBmb3JcbiAgICAgKiBjYWxsYmFjayBzaG9ydGhhbmRzIGFuZCBgdGhpc2AgYmluZGluZy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW2FjY3VtdWxhdG9yXSBUaGUgaW5pdGlhbCB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpbml0RnJvbUFycmF5XSBTcGVjaWZ5IHVzaW5nIHRoZSBsYXN0IGVsZW1lbnQgb2YgYGFycmF5YFxuICAgICAqICBhcyB0aGUgaW5pdGlhbCB2YWx1ZS5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgYWNjdW11bGF0ZWQgdmFsdWUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYXJyYXlSZWR1Y2VSaWdodChhcnJheSwgaXRlcmF0ZWUsIGFjY3VtdWxhdG9yLCBpbml0RnJvbUFycmF5KSB7XG4gICAgICB2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuICAgICAgaWYgKGluaXRGcm9tQXJyYXkgJiYgbGVuZ3RoKSB7XG4gICAgICAgIGFjY3VtdWxhdG9yID0gYXJyYXlbLS1sZW5ndGhdO1xuICAgICAgfVxuICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICAgIGFjY3VtdWxhdG9yID0gaXRlcmF0ZWUoYWNjdW11bGF0b3IsIGFycmF5W2xlbmd0aF0sIGxlbmd0aCwgYXJyYXkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFjY3VtdWxhdG9yO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgXy5zb21lYCBmb3IgYXJyYXlzIHdpdGhvdXQgc3VwcG9ydCBmb3IgY2FsbGJhY2tcbiAgICAgKiBzaG9ydGhhbmRzIGFuZCBgdGhpc2AgYmluZGluZy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW55IGVsZW1lbnQgcGFzc2VzIHRoZSBwcmVkaWNhdGUgY2hlY2ssXG4gICAgICogIGVsc2UgYGZhbHNlYC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhcnJheVNvbWUoYXJyYXksIHByZWRpY2F0ZSkge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuXG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICBpZiAocHJlZGljYXRlKGFycmF5W2luZGV4XSwgaW5kZXgsIGFycmF5KSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBfLnN1bWAgZm9yIGFycmF5cyB3aXRob3V0IHN1cHBvcnQgZm9yIGNhbGxiYWNrXG4gICAgICogc2hvcnRoYW5kcyBhbmQgYHRoaXNgIGJpbmRpbmcuLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgc3VtLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFycmF5U3VtKGFycmF5LCBpdGVyYXRlZSkge1xuICAgICAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aCxcbiAgICAgICAgICByZXN1bHQgPSAwO1xuXG4gICAgICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICAgICAgcmVzdWx0ICs9ICtpdGVyYXRlZShhcnJheVtsZW5ndGhdKSB8fCAwO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVc2VkIGJ5IGBfLmRlZmF1bHRzYCB0byBjdXN0b21pemUgaXRzIGBfLmFzc2lnbmAgdXNlLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0geyp9IG9iamVjdFZhbHVlIFRoZSBkZXN0aW5hdGlvbiBvYmplY3QgcHJvcGVydHkgdmFsdWUuXG4gICAgICogQHBhcmFtIHsqfSBzb3VyY2VWYWx1ZSBUaGUgc291cmNlIG9iamVjdCBwcm9wZXJ0eSB2YWx1ZS5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgdmFsdWUgdG8gYXNzaWduIHRvIHRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYXNzaWduRGVmYXVsdHMob2JqZWN0VmFsdWUsIHNvdXJjZVZhbHVlKSB7XG4gICAgICByZXR1cm4gb2JqZWN0VmFsdWUgPT09IHVuZGVmaW5lZCA/IHNvdXJjZVZhbHVlIDogb2JqZWN0VmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXNlZCBieSBgXy50ZW1wbGF0ZWAgdG8gY3VzdG9taXplIGl0cyBgXy5hc3NpZ25gIHVzZS5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIGZ1bmN0aW9uIGlzIGxpa2UgYGFzc2lnbkRlZmF1bHRzYCBleGNlcHQgdGhhdCBpdCBpZ25vcmVzXG4gICAgICogaW5oZXJpdGVkIHByb3BlcnR5IHZhbHVlcyB3aGVuIGNoZWNraW5nIGlmIGEgcHJvcGVydHkgaXMgYHVuZGVmaW5lZGAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Kn0gb2JqZWN0VmFsdWUgVGhlIGRlc3RpbmF0aW9uIG9iamVjdCBwcm9wZXJ0eSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0geyp9IHNvdXJjZVZhbHVlIFRoZSBzb3VyY2Ugb2JqZWN0IHByb3BlcnR5IHZhbHVlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBhc3NvY2lhdGVkIHdpdGggdGhlIG9iamVjdCBhbmQgc291cmNlIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHZhbHVlIHRvIGFzc2lnbiB0byB0aGUgZGVzdGluYXRpb24gb2JqZWN0LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFzc2lnbk93bkRlZmF1bHRzKG9iamVjdFZhbHVlLCBzb3VyY2VWYWx1ZSwga2V5LCBvYmplY3QpIHtcbiAgICAgIHJldHVybiAob2JqZWN0VmFsdWUgPT09IHVuZGVmaW5lZCB8fCAhaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIGtleSkpXG4gICAgICAgID8gc291cmNlVmFsdWVcbiAgICAgICAgOiBvYmplY3RWYWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYF8uYXNzaWduYCBmb3IgY3VzdG9taXppbmcgYXNzaWduZWQgdmFsdWVzIHdpdGhvdXRcbiAgICAgKiBzdXBwb3J0IGZvciBhcmd1bWVudCBqdWdnbGluZywgbXVsdGlwbGUgc291cmNlcywgYW5kIGB0aGlzYCBiaW5kaW5nIGBjdXN0b21pemVyYFxuICAgICAqIGZ1bmN0aW9ucy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgZGVzdGluYXRpb24gb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgVGhlIHNvdXJjZSBvYmplY3QuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY3VzdG9taXplciBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGFzc2lnbmVkIHZhbHVlcy5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFzc2lnbldpdGgob2JqZWN0LCBzb3VyY2UsIGN1c3RvbWl6ZXIpIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIHByb3BzID0ga2V5cyhzb3VyY2UpLFxuICAgICAgICAgIGxlbmd0aCA9IHByb3BzLmxlbmd0aDtcblxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgdmFyIGtleSA9IHByb3BzW2luZGV4XSxcbiAgICAgICAgICAgIHZhbHVlID0gb2JqZWN0W2tleV0sXG4gICAgICAgICAgICByZXN1bHQgPSBjdXN0b21pemVyKHZhbHVlLCBzb3VyY2Vba2V5XSwga2V5LCBvYmplY3QsIHNvdXJjZSk7XG5cbiAgICAgICAgaWYgKChyZXN1bHQgPT09IHJlc3VsdCA/IChyZXN1bHQgIT09IHZhbHVlKSA6ICh2YWx1ZSA9PT0gdmFsdWUpKSB8fFxuICAgICAgICAgICAgKHZhbHVlID09PSB1bmRlZmluZWQgJiYgIShrZXkgaW4gb2JqZWN0KSkpIHtcbiAgICAgICAgICBvYmplY3Rba2V5XSA9IHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5hc3NpZ25gIHdpdGhvdXQgc3VwcG9ydCBmb3IgYXJndW1lbnQganVnZ2xpbmcsXG4gICAgICogbXVsdGlwbGUgc291cmNlcywgYW5kIGBjdXN0b21pemVyYCBmdW5jdGlvbnMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIGRlc3RpbmF0aW9uIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gc291cmNlIFRoZSBzb3VyY2Ugb2JqZWN0LlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZUFzc2lnbihvYmplY3QsIHNvdXJjZSkge1xuICAgICAgcmV0dXJuIHNvdXJjZSA9PSBudWxsXG4gICAgICAgID8gb2JqZWN0XG4gICAgICAgIDogYmFzZUNvcHkoc291cmNlLCBrZXlzKHNvdXJjZSksIG9iamVjdCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uYXRgIHdpdGhvdXQgc3VwcG9ydCBmb3Igc3RyaW5nIGNvbGxlY3Rpb25zXG4gICAgICogYW5kIGluZGl2aWR1YWwga2V5IGFyZ3VtZW50cy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyW118c3RyaW5nW119IHByb3BzIFRoZSBwcm9wZXJ0eSBuYW1lcyBvciBpbmRleGVzIG9mIGVsZW1lbnRzIHRvIHBpY2suXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgYXJyYXkgb2YgcGlja2VkIGVsZW1lbnRzLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VBdChjb2xsZWN0aW9uLCBwcm9wcykge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgaXNOaWwgPSBjb2xsZWN0aW9uID09IG51bGwsXG4gICAgICAgICAgaXNBcnIgPSAhaXNOaWwgJiYgaXNBcnJheUxpa2UoY29sbGVjdGlvbiksXG4gICAgICAgICAgbGVuZ3RoID0gaXNBcnIgPyBjb2xsZWN0aW9uLmxlbmd0aCA6IDAsXG4gICAgICAgICAgcHJvcHNMZW5ndGggPSBwcm9wcy5sZW5ndGgsXG4gICAgICAgICAgcmVzdWx0ID0gQXJyYXkocHJvcHNMZW5ndGgpO1xuXG4gICAgICB3aGlsZSgrK2luZGV4IDwgcHJvcHNMZW5ndGgpIHtcbiAgICAgICAgdmFyIGtleSA9IHByb3BzW2luZGV4XTtcbiAgICAgICAgaWYgKGlzQXJyKSB7XG4gICAgICAgICAgcmVzdWx0W2luZGV4XSA9IGlzSW5kZXgoa2V5LCBsZW5ndGgpID8gY29sbGVjdGlvbltrZXldIDogdW5kZWZpbmVkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdFtpbmRleF0gPSBpc05pbCA/IHVuZGVmaW5lZCA6IGNvbGxlY3Rpb25ba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb3BpZXMgcHJvcGVydGllcyBvZiBgc291cmNlYCB0byBgb2JqZWN0YC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZSBUaGUgb2JqZWN0IHRvIGNvcHkgcHJvcGVydGllcyBmcm9tLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHByb3BzIFRoZSBwcm9wZXJ0eSBuYW1lcyB0byBjb3B5LlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb2JqZWN0PXt9XSBUaGUgb2JqZWN0IHRvIGNvcHkgcHJvcGVydGllcyB0by5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VDb3B5KHNvdXJjZSwgcHJvcHMsIG9iamVjdCkge1xuICAgICAgb2JqZWN0IHx8IChvYmplY3QgPSB7fSk7XG5cbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IHByb3BzLmxlbmd0aDtcblxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgdmFyIGtleSA9IHByb3BzW2luZGV4XTtcbiAgICAgICAgb2JqZWN0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uY2FsbGJhY2tgIHdoaWNoIHN1cHBvcnRzIHNwZWNpZnlpbmcgdGhlXG4gICAgICogbnVtYmVyIG9mIGFyZ3VtZW50cyB0byBwcm92aWRlIHRvIGBmdW5jYC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHsqfSBbZnVuYz1fLmlkZW50aXR5XSBUaGUgdmFsdWUgdG8gY29udmVydCB0byBhIGNhbGxiYWNrLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgZnVuY2AuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFthcmdDb3VudF0gVGhlIG51bWJlciBvZiBhcmd1bWVudHMgdG8gcHJvdmlkZSB0byBgZnVuY2AuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBjYWxsYmFjay5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlQ2FsbGJhY2soZnVuYywgdGhpc0FyZywgYXJnQ291bnQpIHtcbiAgICAgIHZhciB0eXBlID0gdHlwZW9mIGZ1bmM7XG4gICAgICBpZiAodHlwZSA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiB0aGlzQXJnID09PSB1bmRlZmluZWRcbiAgICAgICAgICA/IGZ1bmNcbiAgICAgICAgICA6IGJpbmRDYWxsYmFjayhmdW5jLCB0aGlzQXJnLCBhcmdDb3VudCk7XG4gICAgICB9XG4gICAgICBpZiAoZnVuYyA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBpZGVudGl0eTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlID09ICdvYmplY3QnKSB7XG4gICAgICAgIHJldHVybiBiYXNlTWF0Y2hlcyhmdW5jKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzQXJnID09PSB1bmRlZmluZWRcbiAgICAgICAgPyBwcm9wZXJ0eShmdW5jKVxuICAgICAgICA6IGJhc2VNYXRjaGVzUHJvcGVydHkoZnVuYywgdGhpc0FyZyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uY2xvbmVgIHdpdGhvdXQgc3VwcG9ydCBmb3IgYXJndW1lbnQganVnZ2xpbmdcbiAgICAgKiBhbmQgYHRoaXNgIGJpbmRpbmcgYGN1c3RvbWl6ZXJgIGZ1bmN0aW9ucy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2xvbmUuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbaXNEZWVwXSBTcGVjaWZ5IGEgZGVlcCBjbG9uZS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY3VzdG9taXplcl0gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjbG9uaW5nIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2tleV0gVGhlIGtleSBvZiBgdmFsdWVgLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb2JqZWN0XSBUaGUgb2JqZWN0IGB2YWx1ZWAgYmVsb25ncyB0by5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbc3RhY2tBPVtdXSBUcmFja3MgdHJhdmVyc2VkIHNvdXJjZSBvYmplY3RzLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0I9W11dIEFzc29jaWF0ZXMgY2xvbmVzIHdpdGggc291cmNlIGNvdW50ZXJwYXJ0cy5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgY2xvbmVkIHZhbHVlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VDbG9uZSh2YWx1ZSwgaXNEZWVwLCBjdXN0b21pemVyLCBrZXksIG9iamVjdCwgc3RhY2tBLCBzdGFja0IpIHtcbiAgICAgIHZhciByZXN1bHQ7XG4gICAgICBpZiAoY3VzdG9taXplcikge1xuICAgICAgICByZXN1bHQgPSBvYmplY3QgPyBjdXN0b21pemVyKHZhbHVlLCBrZXksIG9iamVjdCkgOiBjdXN0b21pemVyKHZhbHVlKTtcbiAgICAgIH1cbiAgICAgIGlmIChyZXN1bHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgICAgaWYgKCFpc09iamVjdCh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuICAgICAgdmFyIGlzQXJyID0gaXNBcnJheSh2YWx1ZSk7XG4gICAgICBpZiAoaXNBcnIpIHtcbiAgICAgICAgcmVzdWx0ID0gaW5pdENsb25lQXJyYXkodmFsdWUpO1xuICAgICAgICBpZiAoIWlzRGVlcCkge1xuICAgICAgICAgIHJldHVybiBhcnJheUNvcHkodmFsdWUsIHJlc3VsdCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciB0YWcgPSBvYmpUb1N0cmluZy5jYWxsKHZhbHVlKSxcbiAgICAgICAgICAgIGlzRnVuYyA9IHRhZyA9PSBmdW5jVGFnO1xuXG4gICAgICAgIGlmICh0YWcgPT0gb2JqZWN0VGFnIHx8IHRhZyA9PSBhcmdzVGFnIHx8IChpc0Z1bmMgJiYgIW9iamVjdCkpIHtcbiAgICAgICAgICByZXN1bHQgPSBpbml0Q2xvbmVPYmplY3QoaXNGdW5jID8ge30gOiB2YWx1ZSk7XG4gICAgICAgICAgaWYgKCFpc0RlZXApIHtcbiAgICAgICAgICAgIHJldHVybiBiYXNlQXNzaWduKHJlc3VsdCwgdmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gY2xvbmVhYmxlVGFnc1t0YWddXG4gICAgICAgICAgICA/IGluaXRDbG9uZUJ5VGFnKHZhbHVlLCB0YWcsIGlzRGVlcClcbiAgICAgICAgICAgIDogKG9iamVjdCA/IHZhbHVlIDoge30pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBDaGVjayBmb3IgY2lyY3VsYXIgcmVmZXJlbmNlcyBhbmQgcmV0dXJuIGl0cyBjb3JyZXNwb25kaW5nIGNsb25lLlxuICAgICAgc3RhY2tBIHx8IChzdGFja0EgPSBbXSk7XG4gICAgICBzdGFja0IgfHwgKHN0YWNrQiA9IFtdKTtcblxuICAgICAgdmFyIGxlbmd0aCA9IHN0YWNrQS5sZW5ndGg7XG4gICAgICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICAgICAgaWYgKHN0YWNrQVtsZW5ndGhdID09IHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIHN0YWNrQltsZW5ndGhdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBBZGQgdGhlIHNvdXJjZSB2YWx1ZSB0byB0aGUgc3RhY2sgb2YgdHJhdmVyc2VkIG9iamVjdHMgYW5kIGFzc29jaWF0ZSBpdCB3aXRoIGl0cyBjbG9uZS5cbiAgICAgIHN0YWNrQS5wdXNoKHZhbHVlKTtcbiAgICAgIHN0YWNrQi5wdXNoKHJlc3VsdCk7XG5cbiAgICAgIC8vIFJlY3Vyc2l2ZWx5IHBvcHVsYXRlIGNsb25lIChzdXNjZXB0aWJsZSB0byBjYWxsIHN0YWNrIGxpbWl0cykuXG4gICAgICAoaXNBcnIgPyBhcnJheUVhY2ggOiBiYXNlRm9yT3duKSh2YWx1ZSwgZnVuY3Rpb24oc3ViVmFsdWUsIGtleSkge1xuICAgICAgICByZXN1bHRba2V5XSA9IGJhc2VDbG9uZShzdWJWYWx1ZSwgaXNEZWVwLCBjdXN0b21pemVyLCBrZXksIHZhbHVlLCBzdGFja0EsIHN0YWNrQik7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uY3JlYXRlYCB3aXRob3V0IHN1cHBvcnQgZm9yIGFzc2lnbmluZ1xuICAgICAqIHByb3BlcnRpZXMgdG8gdGhlIGNyZWF0ZWQgb2JqZWN0LlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcHJvdG90eXBlIFRoZSBvYmplY3QgdG8gaW5oZXJpdCBmcm9tLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG5ldyBvYmplY3QuXG4gICAgICovXG4gICAgdmFyIGJhc2VDcmVhdGUgPSAoZnVuY3Rpb24oKSB7XG4gICAgICBmdW5jdGlvbiBvYmplY3QoKSB7fVxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHByb3RvdHlwZSkge1xuICAgICAgICBpZiAoaXNPYmplY3QocHJvdG90eXBlKSkge1xuICAgICAgICAgIG9iamVjdC5wcm90b3R5cGUgPSBwcm90b3R5cGU7XG4gICAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBvYmplY3Q7XG4gICAgICAgICAgb2JqZWN0LnByb3RvdHlwZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0IHx8IHt9O1xuICAgICAgfTtcbiAgICB9KCkpO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uZGVsYXlgIGFuZCBgXy5kZWZlcmAgd2hpY2ggYWNjZXB0cyBhbiBpbmRleFxuICAgICAqIG9mIHdoZXJlIHRvIHNsaWNlIHRoZSBhcmd1bWVudHMgdG8gcHJvdmlkZSB0byBgZnVuY2AuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRlbGF5LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB3YWl0IFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIGRlbGF5IGludm9jYXRpb24uXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGFyZ3MgVGhlIGFyZ3VtZW50cyBwcm92aWRlIHRvIGBmdW5jYC5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSB0aW1lciBpZC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlRGVsYXkoZnVuYywgd2FpdCwgYXJncykge1xuICAgICAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IGZ1bmMuYXBwbHkodW5kZWZpbmVkLCBhcmdzKTsgfSwgd2FpdCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uZGlmZmVyZW5jZWAgd2hpY2ggYWNjZXB0cyBhIHNpbmdsZSBhcnJheVxuICAgICAqIG9mIHZhbHVlcyB0byBleGNsdWRlLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaW5zcGVjdC5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSB2YWx1ZXMgVGhlIHZhbHVlcyB0byBleGNsdWRlLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGFycmF5IG9mIGZpbHRlcmVkIHZhbHVlcy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlRGlmZmVyZW5jZShhcnJheSwgdmFsdWVzKSB7XG4gICAgICB2YXIgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwLFxuICAgICAgICAgIHJlc3VsdCA9IFtdO1xuXG4gICAgICBpZiAoIWxlbmd0aCkge1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgaW5kZXhPZiA9IGdldEluZGV4T2YoKSxcbiAgICAgICAgICBpc0NvbW1vbiA9IGluZGV4T2YgPT0gYmFzZUluZGV4T2YsXG4gICAgICAgICAgY2FjaGUgPSAoaXNDb21tb24gJiYgdmFsdWVzLmxlbmd0aCA+PSBMQVJHRV9BUlJBWV9TSVpFKSA/IGNyZWF0ZUNhY2hlKHZhbHVlcykgOiBudWxsLFxuICAgICAgICAgIHZhbHVlc0xlbmd0aCA9IHZhbHVlcy5sZW5ndGg7XG5cbiAgICAgIGlmIChjYWNoZSkge1xuICAgICAgICBpbmRleE9mID0gY2FjaGVJbmRleE9mO1xuICAgICAgICBpc0NvbW1vbiA9IGZhbHNlO1xuICAgICAgICB2YWx1ZXMgPSBjYWNoZTtcbiAgICAgIH1cbiAgICAgIG91dGVyOlxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gYXJyYXlbaW5kZXhdO1xuXG4gICAgICAgIGlmIChpc0NvbW1vbiAmJiB2YWx1ZSA9PT0gdmFsdWUpIHtcbiAgICAgICAgICB2YXIgdmFsdWVzSW5kZXggPSB2YWx1ZXNMZW5ndGg7XG4gICAgICAgICAgd2hpbGUgKHZhbHVlc0luZGV4LS0pIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZXNbdmFsdWVzSW5kZXhdID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgICBjb250aW51ZSBvdXRlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGluZGV4T2YodmFsdWVzLCB2YWx1ZSwgMCkgPCAwKSB7XG4gICAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmZvckVhY2hgIHdpdGhvdXQgc3VwcG9ydCBmb3IgY2FsbGJhY2tcbiAgICAgKiBzaG9ydGhhbmRzIGFuZCBgdGhpc2AgYmluZGluZy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEByZXR1cm5zIHtBcnJheXxPYmplY3R8c3RyaW5nfSBSZXR1cm5zIGBjb2xsZWN0aW9uYC5cbiAgICAgKi9cbiAgICB2YXIgYmFzZUVhY2ggPSBjcmVhdGVCYXNlRWFjaChiYXNlRm9yT3duKTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmZvckVhY2hSaWdodGAgd2l0aG91dCBzdXBwb3J0IGZvciBjYWxsYmFja1xuICAgICAqIHNob3J0aGFuZHMgYW5kIGB0aGlzYCBiaW5kaW5nLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHJldHVybnMge0FycmF5fE9iamVjdHxzdHJpbmd9IFJldHVybnMgYGNvbGxlY3Rpb25gLlxuICAgICAqL1xuICAgIHZhciBiYXNlRWFjaFJpZ2h0ID0gY3JlYXRlQmFzZUVhY2goYmFzZUZvck93blJpZ2h0LCB0cnVlKTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmV2ZXJ5YCB3aXRob3V0IHN1cHBvcnQgZm9yIGNhbGxiYWNrXG4gICAgICogc2hvcnRoYW5kcyBhbmQgYHRoaXNgIGJpbmRpbmcuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZGljYXRlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFsbCBlbGVtZW50cyBwYXNzIHRoZSBwcmVkaWNhdGUgY2hlY2ssXG4gICAgICogIGVsc2UgYGZhbHNlYFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VFdmVyeShjb2xsZWN0aW9uLCBwcmVkaWNhdGUpIHtcbiAgICAgIHZhciByZXN1bHQgPSB0cnVlO1xuICAgICAgYmFzZUVhY2goY29sbGVjdGlvbiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSB7XG4gICAgICAgIHJlc3VsdCA9ICEhcHJlZGljYXRlKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbik7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgZXh0cmVtdW0gdmFsdWUgb2YgYGNvbGxlY3Rpb25gIGludm9raW5nIGBpdGVyYXRlZWAgZm9yIGVhY2ggdmFsdWVcbiAgICAgKiBpbiBgY29sbGVjdGlvbmAgdG8gZ2VuZXJhdGUgdGhlIGNyaXRlcmlvbiBieSB3aGljaCB0aGUgdmFsdWUgaXMgcmFua2VkLlxuICAgICAqIFRoZSBgaXRlcmF0ZWVgIGlzIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM6ICh2YWx1ZSwgaW5kZXh8a2V5LCBjb2xsZWN0aW9uKS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNvbXBhcmF0b3IgVGhlIGZ1bmN0aW9uIHVzZWQgdG8gY29tcGFyZSB2YWx1ZXMuXG4gICAgICogQHBhcmFtIHsqfSBleFZhbHVlIFRoZSBpbml0aWFsIGV4dHJlbXVtIHZhbHVlLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBleHRyZW11bSB2YWx1ZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlRXh0cmVtdW0oY29sbGVjdGlvbiwgaXRlcmF0ZWUsIGNvbXBhcmF0b3IsIGV4VmFsdWUpIHtcbiAgICAgIHZhciBjb21wdXRlZCA9IGV4VmFsdWUsXG4gICAgICAgICAgcmVzdWx0ID0gY29tcHV0ZWQ7XG5cbiAgICAgIGJhc2VFYWNoKGNvbGxlY3Rpb24sIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikge1xuICAgICAgICB2YXIgY3VycmVudCA9ICtpdGVyYXRlZSh2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pO1xuICAgICAgICBpZiAoY29tcGFyYXRvcihjdXJyZW50LCBjb21wdXRlZCkgfHwgKGN1cnJlbnQgPT09IGV4VmFsdWUgJiYgY3VycmVudCA9PT0gcmVzdWx0KSkge1xuICAgICAgICAgIGNvbXB1dGVkID0gY3VycmVudDtcbiAgICAgICAgICByZXN1bHQgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmZpbGxgIHdpdGhvdXQgYW4gaXRlcmF0ZWUgY2FsbCBndWFyZC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGZpbGwuXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gZmlsbCBgYXJyYXlgIHdpdGguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtzdGFydD0wXSBUaGUgc3RhcnQgcG9zaXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtlbmQ9YXJyYXkubGVuZ3RoXSBUaGUgZW5kIHBvc2l0aW9uLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBgYXJyYXlgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VGaWxsKGFycmF5LCB2YWx1ZSwgc3RhcnQsIGVuZCkge1xuICAgICAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcblxuICAgICAgc3RhcnQgPSBzdGFydCA9PSBudWxsID8gMCA6ICgrc3RhcnQgfHwgMCk7XG4gICAgICBpZiAoc3RhcnQgPCAwKSB7XG4gICAgICAgIHN0YXJ0ID0gLXN0YXJ0ID4gbGVuZ3RoID8gMCA6IChsZW5ndGggKyBzdGFydCk7XG4gICAgICB9XG4gICAgICBlbmQgPSAoZW5kID09PSB1bmRlZmluZWQgfHwgZW5kID4gbGVuZ3RoKSA/IGxlbmd0aCA6ICgrZW5kIHx8IDApO1xuICAgICAgaWYgKGVuZCA8IDApIHtcbiAgICAgICAgZW5kICs9IGxlbmd0aDtcbiAgICAgIH1cbiAgICAgIGxlbmd0aCA9IHN0YXJ0ID4gZW5kID8gMCA6IChlbmQgPj4+IDApO1xuICAgICAgc3RhcnQgPj4+PSAwO1xuXG4gICAgICB3aGlsZSAoc3RhcnQgPCBsZW5ndGgpIHtcbiAgICAgICAgYXJyYXlbc3RhcnQrK10gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhcnJheTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5maWx0ZXJgIHdpdGhvdXQgc3VwcG9ydCBmb3IgY2FsbGJhY2tcbiAgICAgKiBzaG9ydGhhbmRzIGFuZCBgdGhpc2AgYmluZGluZy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBmaWx0ZXJlZCBhcnJheS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlRmlsdGVyKGNvbGxlY3Rpb24sIHByZWRpY2F0ZSkge1xuICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgYmFzZUVhY2goY29sbGVjdGlvbiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSB7XG4gICAgICAgIGlmIChwcmVkaWNhdGUodmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSkge1xuICAgICAgICAgIHJlc3VsdC5wdXNoKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmZpbmRgLCBgXy5maW5kTGFzdGAsIGBfLmZpbmRLZXlgLCBhbmQgYF8uZmluZExhc3RLZXlgLFxuICAgICAqIHdpdGhvdXQgc3VwcG9ydCBmb3IgY2FsbGJhY2sgc2hvcnRoYW5kcyBhbmQgYHRoaXNgIGJpbmRpbmcsIHdoaWNoIGl0ZXJhdGVzXG4gICAgICogb3ZlciBgY29sbGVjdGlvbmAgdXNpbmcgdGhlIHByb3ZpZGVkIGBlYWNoRnVuY2AuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBzZWFyY2guXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZGljYXRlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZWFjaEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGl0ZXJhdGUgb3ZlciBgY29sbGVjdGlvbmAuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbcmV0S2V5XSBTcGVjaWZ5IHJldHVybmluZyB0aGUga2V5IG9mIHRoZSBmb3VuZCBlbGVtZW50XG4gICAgICogIGluc3RlYWQgb2YgdGhlIGVsZW1lbnQgaXRzZWxmLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBmb3VuZCBlbGVtZW50IG9yIGl0cyBrZXksIGVsc2UgYHVuZGVmaW5lZGAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZUZpbmQoY29sbGVjdGlvbiwgcHJlZGljYXRlLCBlYWNoRnVuYywgcmV0S2V5KSB7XG4gICAgICB2YXIgcmVzdWx0O1xuICAgICAgZWFjaEZ1bmMoY29sbGVjdGlvbiwgZnVuY3Rpb24odmFsdWUsIGtleSwgY29sbGVjdGlvbikge1xuICAgICAgICBpZiAocHJlZGljYXRlKHZhbHVlLCBrZXksIGNvbGxlY3Rpb24pKSB7XG4gICAgICAgICAgcmVzdWx0ID0gcmV0S2V5ID8ga2V5IDogdmFsdWU7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uZmxhdHRlbmAgd2l0aCBhZGRlZCBzdXBwb3J0IGZvciByZXN0cmljdGluZ1xuICAgICAqIGZsYXR0ZW5pbmcgYW5kIHNwZWNpZnlpbmcgdGhlIHN0YXJ0IGluZGV4LlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gZmxhdHRlbi5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc0RlZXBdIFNwZWNpZnkgYSBkZWVwIGZsYXR0ZW4uXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbaXNTdHJpY3RdIFJlc3RyaWN0IGZsYXR0ZW5pbmcgdG8gYXJyYXlzLWxpa2Ugb2JqZWN0cy5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbcmVzdWx0PVtdXSBUaGUgaW5pdGlhbCByZXN1bHQgdmFsdWUuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgZmxhdHRlbmVkIGFycmF5LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VGbGF0dGVuKGFycmF5LCBpc0RlZXAsIGlzU3RyaWN0LCByZXN1bHQpIHtcbiAgICAgIHJlc3VsdCB8fCAocmVzdWx0ID0gW10pO1xuXG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSBhcnJheS5sZW5ndGg7XG5cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IGFycmF5W2luZGV4XTtcbiAgICAgICAgaWYgKGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgaXNBcnJheUxpa2UodmFsdWUpICYmXG4gICAgICAgICAgICAoaXNTdHJpY3QgfHwgaXNBcnJheSh2YWx1ZSkgfHwgaXNBcmd1bWVudHModmFsdWUpKSkge1xuICAgICAgICAgIGlmIChpc0RlZXApIHtcbiAgICAgICAgICAgIC8vIFJlY3Vyc2l2ZWx5IGZsYXR0ZW4gYXJyYXlzIChzdXNjZXB0aWJsZSB0byBjYWxsIHN0YWNrIGxpbWl0cykuXG4gICAgICAgICAgICBiYXNlRmxhdHRlbih2YWx1ZSwgaXNEZWVwLCBpc1N0cmljdCwgcmVzdWx0KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXJyYXlQdXNoKHJlc3VsdCwgdmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICghaXNTdHJpY3QpIHtcbiAgICAgICAgICByZXN1bHRbcmVzdWx0Lmxlbmd0aF0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgYmFzZUZvckluYCBhbmQgYGJhc2VGb3JPd25gIHdoaWNoIGl0ZXJhdGVzXG4gICAgICogb3ZlciBgb2JqZWN0YCBwcm9wZXJ0aWVzIHJldHVybmVkIGJ5IGBrZXlzRnVuY2AgaW52b2tpbmcgYGl0ZXJhdGVlYCBmb3JcbiAgICAgKiBlYWNoIHByb3BlcnR5LiBJdGVyYXRlZSBmdW5jdGlvbnMgbWF5IGV4aXQgaXRlcmF0aW9uIGVhcmx5IGJ5IGV4cGxpY2l0bHlcbiAgICAgKiByZXR1cm5pbmcgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGtleXNGdW5jIFRoZSBmdW5jdGlvbiB0byBnZXQgdGhlIGtleXMgb2YgYG9iamVjdGAuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAgICAgKi9cbiAgICB2YXIgYmFzZUZvciA9IGNyZWF0ZUJhc2VGb3IoKTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gaXMgbGlrZSBgYmFzZUZvcmAgZXhjZXB0IHRoYXQgaXQgaXRlcmF0ZXMgb3ZlciBwcm9wZXJ0aWVzXG4gICAgICogaW4gdGhlIG9wcG9zaXRlIG9yZGVyLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0ga2V5c0Z1bmMgVGhlIGZ1bmN0aW9uIHRvIGdldCB0aGUga2V5cyBvZiBgb2JqZWN0YC5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICAgICAqL1xuICAgIHZhciBiYXNlRm9yUmlnaHQgPSBjcmVhdGVCYXNlRm9yKHRydWUpO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uZm9ySW5gIHdpdGhvdXQgc3VwcG9ydCBmb3IgY2FsbGJhY2tcbiAgICAgKiBzaG9ydGhhbmRzIGFuZCBgdGhpc2AgYmluZGluZy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZUZvckluKG9iamVjdCwgaXRlcmF0ZWUpIHtcbiAgICAgIHJldHVybiBiYXNlRm9yKG9iamVjdCwgaXRlcmF0ZWUsIGtleXNJbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uZm9yT3duYCB3aXRob3V0IHN1cHBvcnQgZm9yIGNhbGxiYWNrXG4gICAgICogc2hvcnRoYW5kcyBhbmQgYHRoaXNgIGJpbmRpbmcuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VGb3JPd24ob2JqZWN0LCBpdGVyYXRlZSkge1xuICAgICAgcmV0dXJuIGJhc2VGb3Iob2JqZWN0LCBpdGVyYXRlZSwga2V5cyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uZm9yT3duUmlnaHRgIHdpdGhvdXQgc3VwcG9ydCBmb3IgY2FsbGJhY2tcbiAgICAgKiBzaG9ydGhhbmRzIGFuZCBgdGhpc2AgYmluZGluZy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZUZvck93blJpZ2h0KG9iamVjdCwgaXRlcmF0ZWUpIHtcbiAgICAgIHJldHVybiBiYXNlRm9yUmlnaHQob2JqZWN0LCBpdGVyYXRlZSwga2V5cyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uZnVuY3Rpb25zYCB3aGljaCBjcmVhdGVzIGFuIGFycmF5IG9mXG4gICAgICogYG9iamVjdGAgZnVuY3Rpb24gcHJvcGVydHkgbmFtZXMgZmlsdGVyZWQgZnJvbSB0aG9zZSBwcm92aWRlZC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGluc3BlY3QuXG4gICAgICogQHBhcmFtIHtBcnJheX0gcHJvcHMgVGhlIHByb3BlcnR5IG5hbWVzIHRvIGZpbHRlci5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBhcnJheSBvZiBmaWx0ZXJlZCBwcm9wZXJ0eSBuYW1lcy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlRnVuY3Rpb25zKG9iamVjdCwgcHJvcHMpIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IHByb3BzLmxlbmd0aCxcbiAgICAgICAgICByZXNJbmRleCA9IC0xLFxuICAgICAgICAgIHJlc3VsdCA9IFtdO1xuXG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICB2YXIga2V5ID0gcHJvcHNbaW5kZXhdO1xuICAgICAgICBpZiAoaXNGdW5jdGlvbihvYmplY3Rba2V5XSkpIHtcbiAgICAgICAgICByZXN1bHRbKytyZXNJbmRleF0gPSBrZXk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYGdldGAgd2l0aG91dCBzdXBwb3J0IGZvciBzdHJpbmcgcGF0aHNcbiAgICAgKiBhbmQgZGVmYXVsdCB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBwYXRoIFRoZSBwYXRoIG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtwYXRoS2V5XSBUaGUga2V5IHJlcHJlc2VudGF0aW9uIG9mIHBhdGguXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHJlc29sdmVkIHZhbHVlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VHZXQob2JqZWN0LCBwYXRoLCBwYXRoS2V5KSB7XG4gICAgICBpZiAob2JqZWN0ID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHBhdGhLZXkgIT09IHVuZGVmaW5lZCAmJiBwYXRoS2V5IGluIHRvT2JqZWN0KG9iamVjdCkpIHtcbiAgICAgICAgcGF0aCA9IFtwYXRoS2V5XTtcbiAgICAgIH1cbiAgICAgIHZhciBpbmRleCA9IDAsXG4gICAgICAgICAgbGVuZ3RoID0gcGF0aC5sZW5ndGg7XG5cbiAgICAgIHdoaWxlIChvYmplY3QgIT0gbnVsbCAmJiBpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICBvYmplY3QgPSBvYmplY3RbcGF0aFtpbmRleCsrXV07XG4gICAgICB9XG4gICAgICByZXR1cm4gKGluZGV4ICYmIGluZGV4ID09IGxlbmd0aCkgPyBvYmplY3QgOiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXNFcXVhbGAgd2l0aG91dCBzdXBwb3J0IGZvciBgdGhpc2AgYmluZGluZ1xuICAgICAqIGBjdXN0b21pemVyYCBmdW5jdGlvbnMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbXBhcmUuXG4gICAgICogQHBhcmFtIHsqfSBvdGhlciBUaGUgb3RoZXIgdmFsdWUgdG8gY29tcGFyZS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY3VzdG9taXplcl0gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpbmcgdmFsdWVzLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzTG9vc2VdIFNwZWNpZnkgcGVyZm9ybWluZyBwYXJ0aWFsIGNvbXBhcmlzb25zLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0FdIFRyYWNrcyB0cmF2ZXJzZWQgYHZhbHVlYCBvYmplY3RzLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0JdIFRyYWNrcyB0cmF2ZXJzZWQgYG90aGVyYCBvYmplY3RzLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgdmFsdWVzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZUlzRXF1YWwodmFsdWUsIG90aGVyLCBjdXN0b21pemVyLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQikge1xuICAgICAgaWYgKHZhbHVlID09PSBvdGhlcikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmICh2YWx1ZSA9PSBudWxsIHx8IG90aGVyID09IG51bGwgfHwgKCFpc09iamVjdCh2YWx1ZSkgJiYgIWlzT2JqZWN0TGlrZShvdGhlcikpKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZSAhPT0gdmFsdWUgJiYgb3RoZXIgIT09IG90aGVyO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGJhc2VJc0VxdWFsRGVlcCh2YWx1ZSwgb3RoZXIsIGJhc2VJc0VxdWFsLCBjdXN0b21pemVyLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlSXNFcXVhbGAgZm9yIGFycmF5cyBhbmQgb2JqZWN0cyB3aGljaCBwZXJmb3Jtc1xuICAgICAqIGRlZXAgY29tcGFyaXNvbnMgYW5kIHRyYWNrcyB0cmF2ZXJzZWQgb2JqZWN0cyBlbmFibGluZyBvYmplY3RzIHdpdGggY2lyY3VsYXJcbiAgICAgKiByZWZlcmVuY2VzIHRvIGJlIGNvbXBhcmVkLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gY29tcGFyZS5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3RoZXIgVGhlIG90aGVyIG9iamVjdCB0byBjb21wYXJlLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGVxdWFsRnVuYyBUaGUgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIGVxdWl2YWxlbnRzIG9mIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY3VzdG9taXplcl0gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpbmcgb2JqZWN0cy5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc0xvb3NlXSBTcGVjaWZ5IHBlcmZvcm1pbmcgcGFydGlhbCBjb21wYXJpc29ucy5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbc3RhY2tBPVtdXSBUcmFja3MgdHJhdmVyc2VkIGB2YWx1ZWAgb2JqZWN0cy5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbc3RhY2tCPVtdXSBUcmFja3MgdHJhdmVyc2VkIGBvdGhlcmAgb2JqZWN0cy5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9iamVjdHMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlSXNFcXVhbERlZXAob2JqZWN0LCBvdGhlciwgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQikge1xuICAgICAgdmFyIG9iaklzQXJyID0gaXNBcnJheShvYmplY3QpLFxuICAgICAgICAgIG90aElzQXJyID0gaXNBcnJheShvdGhlciksXG4gICAgICAgICAgb2JqVGFnID0gYXJyYXlUYWcsXG4gICAgICAgICAgb3RoVGFnID0gYXJyYXlUYWc7XG5cbiAgICAgIGlmICghb2JqSXNBcnIpIHtcbiAgICAgICAgb2JqVGFnID0gb2JqVG9TdHJpbmcuY2FsbChvYmplY3QpO1xuICAgICAgICBpZiAob2JqVGFnID09IGFyZ3NUYWcpIHtcbiAgICAgICAgICBvYmpUYWcgPSBvYmplY3RUYWc7XG4gICAgICAgIH0gZWxzZSBpZiAob2JqVGFnICE9IG9iamVjdFRhZykge1xuICAgICAgICAgIG9iaklzQXJyID0gaXNUeXBlZEFycmF5KG9iamVjdCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICghb3RoSXNBcnIpIHtcbiAgICAgICAgb3RoVGFnID0gb2JqVG9TdHJpbmcuY2FsbChvdGhlcik7XG4gICAgICAgIGlmIChvdGhUYWcgPT0gYXJnc1RhZykge1xuICAgICAgICAgIG90aFRhZyA9IG9iamVjdFRhZztcbiAgICAgICAgfSBlbHNlIGlmIChvdGhUYWcgIT0gb2JqZWN0VGFnKSB7XG4gICAgICAgICAgb3RoSXNBcnIgPSBpc1R5cGVkQXJyYXkob3RoZXIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB2YXIgb2JqSXNPYmogPSBvYmpUYWcgPT0gb2JqZWN0VGFnLFxuICAgICAgICAgIG90aElzT2JqID0gb3RoVGFnID09IG9iamVjdFRhZyxcbiAgICAgICAgICBpc1NhbWVUYWcgPSBvYmpUYWcgPT0gb3RoVGFnO1xuXG4gICAgICBpZiAoaXNTYW1lVGFnICYmICEob2JqSXNBcnIgfHwgb2JqSXNPYmopKSB7XG4gICAgICAgIHJldHVybiBlcXVhbEJ5VGFnKG9iamVjdCwgb3RoZXIsIG9ialRhZyk7XG4gICAgICB9XG4gICAgICBpZiAoIWlzTG9vc2UpIHtcbiAgICAgICAgdmFyIG9iaklzV3JhcHBlZCA9IG9iaklzT2JqICYmIGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCAnX193cmFwcGVkX18nKSxcbiAgICAgICAgICAgIG90aElzV3JhcHBlZCA9IG90aElzT2JqICYmIGhhc093blByb3BlcnR5LmNhbGwob3RoZXIsICdfX3dyYXBwZWRfXycpO1xuXG4gICAgICAgIGlmIChvYmpJc1dyYXBwZWQgfHwgb3RoSXNXcmFwcGVkKSB7XG4gICAgICAgICAgcmV0dXJuIGVxdWFsRnVuYyhvYmpJc1dyYXBwZWQgPyBvYmplY3QudmFsdWUoKSA6IG9iamVjdCwgb3RoSXNXcmFwcGVkID8gb3RoZXIudmFsdWUoKSA6IG90aGVyLCBjdXN0b21pemVyLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICghaXNTYW1lVGFnKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIC8vIEFzc3VtZSBjeWNsaWMgdmFsdWVzIGFyZSBlcXVhbC5cbiAgICAgIC8vIEZvciBtb3JlIGluZm9ybWF0aW9uIG9uIGRldGVjdGluZyBjaXJjdWxhciByZWZlcmVuY2VzIHNlZSBodHRwczovL2VzNS5naXRodWIuaW8vI0pPLlxuICAgICAgc3RhY2tBIHx8IChzdGFja0EgPSBbXSk7XG4gICAgICBzdGFja0IgfHwgKHN0YWNrQiA9IFtdKTtcblxuICAgICAgdmFyIGxlbmd0aCA9IHN0YWNrQS5sZW5ndGg7XG4gICAgICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICAgICAgaWYgKHN0YWNrQVtsZW5ndGhdID09IG9iamVjdCkge1xuICAgICAgICAgIHJldHVybiBzdGFja0JbbGVuZ3RoXSA9PSBvdGhlcjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gQWRkIGBvYmplY3RgIGFuZCBgb3RoZXJgIHRvIHRoZSBzdGFjayBvZiB0cmF2ZXJzZWQgb2JqZWN0cy5cbiAgICAgIHN0YWNrQS5wdXNoKG9iamVjdCk7XG4gICAgICBzdGFja0IucHVzaChvdGhlcik7XG5cbiAgICAgIHZhciByZXN1bHQgPSAob2JqSXNBcnIgPyBlcXVhbEFycmF5cyA6IGVxdWFsT2JqZWN0cykob2JqZWN0LCBvdGhlciwgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQik7XG5cbiAgICAgIHN0YWNrQS5wb3AoKTtcbiAgICAgIHN0YWNrQi5wb3AoKTtcblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pc01hdGNoYCB3aXRob3V0IHN1cHBvcnQgZm9yIGNhbGxiYWNrXG4gICAgICogc2hvcnRoYW5kcyBhbmQgYHRoaXNgIGJpbmRpbmcuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpbnNwZWN0LlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IG1hdGNoRGF0YSBUaGUgcHJvcGVyeSBuYW1lcywgdmFsdWVzLCBhbmQgY29tcGFyZSBmbGFncyB0byBtYXRjaC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY3VzdG9taXplcl0gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpbmcgb2JqZWN0cy5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYG9iamVjdGAgaXMgYSBtYXRjaCwgZWxzZSBgZmFsc2VgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VJc01hdGNoKG9iamVjdCwgbWF0Y2hEYXRhLCBjdXN0b21pemVyKSB7XG4gICAgICB2YXIgaW5kZXggPSBtYXRjaERhdGEubGVuZ3RoLFxuICAgICAgICAgIGxlbmd0aCA9IGluZGV4LFxuICAgICAgICAgIG5vQ3VzdG9taXplciA9ICFjdXN0b21pemVyO1xuXG4gICAgICBpZiAob2JqZWN0ID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuICFsZW5ndGg7XG4gICAgICB9XG4gICAgICBvYmplY3QgPSB0b09iamVjdChvYmplY3QpO1xuICAgICAgd2hpbGUgKGluZGV4LS0pIHtcbiAgICAgICAgdmFyIGRhdGEgPSBtYXRjaERhdGFbaW5kZXhdO1xuICAgICAgICBpZiAoKG5vQ3VzdG9taXplciAmJiBkYXRhWzJdKVxuICAgICAgICAgICAgICA/IGRhdGFbMV0gIT09IG9iamVjdFtkYXRhWzBdXVxuICAgICAgICAgICAgICA6ICEoZGF0YVswXSBpbiBvYmplY3QpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIGRhdGEgPSBtYXRjaERhdGFbaW5kZXhdO1xuICAgICAgICB2YXIga2V5ID0gZGF0YVswXSxcbiAgICAgICAgICAgIG9ialZhbHVlID0gb2JqZWN0W2tleV0sXG4gICAgICAgICAgICBzcmNWYWx1ZSA9IGRhdGFbMV07XG5cbiAgICAgICAgaWYgKG5vQ3VzdG9taXplciAmJiBkYXRhWzJdKSB7XG4gICAgICAgICAgaWYgKG9ialZhbHVlID09PSB1bmRlZmluZWQgJiYgIShrZXkgaW4gb2JqZWN0KSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgcmVzdWx0ID0gY3VzdG9taXplciA/IGN1c3RvbWl6ZXIob2JqVmFsdWUsIHNyY1ZhbHVlLCBrZXkpIDogdW5kZWZpbmVkO1xuICAgICAgICAgIGlmICghKHJlc3VsdCA9PT0gdW5kZWZpbmVkID8gYmFzZUlzRXF1YWwoc3JjVmFsdWUsIG9ialZhbHVlLCBjdXN0b21pemVyLCB0cnVlKSA6IHJlc3VsdCkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLm1hcGAgd2l0aG91dCBzdXBwb3J0IGZvciBjYWxsYmFjayBzaG9ydGhhbmRzXG4gICAgICogYW5kIGB0aGlzYCBiaW5kaW5nLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgbWFwcGVkIGFycmF5LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VNYXAoY29sbGVjdGlvbiwgaXRlcmF0ZWUpIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIHJlc3VsdCA9IGlzQXJyYXlMaWtlKGNvbGxlY3Rpb24pID8gQXJyYXkoY29sbGVjdGlvbi5sZW5ndGgpIDogW107XG5cbiAgICAgIGJhc2VFYWNoKGNvbGxlY3Rpb24sIGZ1bmN0aW9uKHZhbHVlLCBrZXksIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgcmVzdWx0WysraW5kZXhdID0gaXRlcmF0ZWUodmFsdWUsIGtleSwgY29sbGVjdGlvbik7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ubWF0Y2hlc2Agd2hpY2ggZG9lcyBub3QgY2xvbmUgYHNvdXJjZWAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgVGhlIG9iamVjdCBvZiBwcm9wZXJ0eSB2YWx1ZXMgdG8gbWF0Y2guXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZU1hdGNoZXMoc291cmNlKSB7XG4gICAgICB2YXIgbWF0Y2hEYXRhID0gZ2V0TWF0Y2hEYXRhKHNvdXJjZSk7XG4gICAgICBpZiAobWF0Y2hEYXRhLmxlbmd0aCA9PSAxICYmIG1hdGNoRGF0YVswXVsyXSkge1xuICAgICAgICB2YXIga2V5ID0gbWF0Y2hEYXRhWzBdWzBdLFxuICAgICAgICAgICAgdmFsdWUgPSBtYXRjaERhdGFbMF1bMV07XG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuICAgICAgICAgIGlmIChvYmplY3QgPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gb2JqZWN0W2tleV0gPT09IHZhbHVlICYmICh2YWx1ZSAhPT0gdW5kZWZpbmVkIHx8IChrZXkgaW4gdG9PYmplY3Qob2JqZWN0KSkpO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuICAgICAgICByZXR1cm4gYmFzZUlzTWF0Y2gob2JqZWN0LCBtYXRjaERhdGEpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5tYXRjaGVzUHJvcGVydHlgIHdoaWNoIGRvZXMgbm90IGNsb25lIGBzcmNWYWx1ZWAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIFRoZSBwYXRoIG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG4gICAgICogQHBhcmFtIHsqfSBzcmNWYWx1ZSBUaGUgdmFsdWUgdG8gY29tcGFyZS5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlTWF0Y2hlc1Byb3BlcnR5KHBhdGgsIHNyY1ZhbHVlKSB7XG4gICAgICB2YXIgaXNBcnIgPSBpc0FycmF5KHBhdGgpLFxuICAgICAgICAgIGlzQ29tbW9uID0gaXNLZXkocGF0aCkgJiYgaXNTdHJpY3RDb21wYXJhYmxlKHNyY1ZhbHVlKSxcbiAgICAgICAgICBwYXRoS2V5ID0gKHBhdGggKyAnJyk7XG5cbiAgICAgIHBhdGggPSB0b1BhdGgocGF0aCk7XG4gICAgICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgICAgIGlmIChvYmplY3QgPT0gbnVsbCkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIga2V5ID0gcGF0aEtleTtcbiAgICAgICAgb2JqZWN0ID0gdG9PYmplY3Qob2JqZWN0KTtcbiAgICAgICAgaWYgKChpc0FyciB8fCAhaXNDb21tb24pICYmICEoa2V5IGluIG9iamVjdCkpIHtcbiAgICAgICAgICBvYmplY3QgPSBwYXRoLmxlbmd0aCA9PSAxID8gb2JqZWN0IDogYmFzZUdldChvYmplY3QsIGJhc2VTbGljZShwYXRoLCAwLCAtMSkpO1xuICAgICAgICAgIGlmIChvYmplY3QgPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBrZXkgPSBsYXN0KHBhdGgpO1xuICAgICAgICAgIG9iamVjdCA9IHRvT2JqZWN0KG9iamVjdCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iamVjdFtrZXldID09PSBzcmNWYWx1ZVxuICAgICAgICAgID8gKHNyY1ZhbHVlICE9PSB1bmRlZmluZWQgfHwgKGtleSBpbiBvYmplY3QpKVxuICAgICAgICAgIDogYmFzZUlzRXF1YWwoc3JjVmFsdWUsIG9iamVjdFtrZXldLCB1bmRlZmluZWQsIHRydWUpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5tZXJnZWAgd2l0aG91dCBzdXBwb3J0IGZvciBhcmd1bWVudCBqdWdnbGluZyxcbiAgICAgKiBtdWx0aXBsZSBzb3VyY2VzLCBhbmQgYHRoaXNgIGJpbmRpbmcgYGN1c3RvbWl6ZXJgIGZ1bmN0aW9ucy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgZGVzdGluYXRpb24gb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgVGhlIHNvdXJjZSBvYmplY3QuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgbWVyZ2VkIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbc3RhY2tBPVtdXSBUcmFja3MgdHJhdmVyc2VkIHNvdXJjZSBvYmplY3RzLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0I9W11dIEFzc29jaWF0ZXMgdmFsdWVzIHdpdGggc291cmNlIGNvdW50ZXJwYXJ0cy5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VNZXJnZShvYmplY3QsIHNvdXJjZSwgY3VzdG9taXplciwgc3RhY2tBLCBzdGFja0IpIHtcbiAgICAgIGlmICghaXNPYmplY3Qob2JqZWN0KSkge1xuICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgfVxuICAgICAgdmFyIGlzU3JjQXJyID0gaXNBcnJheUxpa2Uoc291cmNlKSAmJiAoaXNBcnJheShzb3VyY2UpIHx8IGlzVHlwZWRBcnJheShzb3VyY2UpKSxcbiAgICAgICAgICBwcm9wcyA9IGlzU3JjQXJyID8gdW5kZWZpbmVkIDoga2V5cyhzb3VyY2UpO1xuXG4gICAgICBhcnJheUVhY2gocHJvcHMgfHwgc291cmNlLCBmdW5jdGlvbihzcmNWYWx1ZSwga2V5KSB7XG4gICAgICAgIGlmIChwcm9wcykge1xuICAgICAgICAgIGtleSA9IHNyY1ZhbHVlO1xuICAgICAgICAgIHNyY1ZhbHVlID0gc291cmNlW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzT2JqZWN0TGlrZShzcmNWYWx1ZSkpIHtcbiAgICAgICAgICBzdGFja0EgfHwgKHN0YWNrQSA9IFtdKTtcbiAgICAgICAgICBzdGFja0IgfHwgKHN0YWNrQiA9IFtdKTtcbiAgICAgICAgICBiYXNlTWVyZ2VEZWVwKG9iamVjdCwgc291cmNlLCBrZXksIGJhc2VNZXJnZSwgY3VzdG9taXplciwgc3RhY2tBLCBzdGFja0IpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHZhciB2YWx1ZSA9IG9iamVjdFtrZXldLFxuICAgICAgICAgICAgICByZXN1bHQgPSBjdXN0b21pemVyID8gY3VzdG9taXplcih2YWx1ZSwgc3JjVmFsdWUsIGtleSwgb2JqZWN0LCBzb3VyY2UpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICBpc0NvbW1vbiA9IHJlc3VsdCA9PT0gdW5kZWZpbmVkO1xuXG4gICAgICAgICAgaWYgKGlzQ29tbW9uKSB7XG4gICAgICAgICAgICByZXN1bHQgPSBzcmNWYWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKChyZXN1bHQgIT09IHVuZGVmaW5lZCB8fCAoaXNTcmNBcnIgJiYgIShrZXkgaW4gb2JqZWN0KSkpICYmXG4gICAgICAgICAgICAgIChpc0NvbW1vbiB8fCAocmVzdWx0ID09PSByZXN1bHQgPyAocmVzdWx0ICE9PSB2YWx1ZSkgOiAodmFsdWUgPT09IHZhbHVlKSkpKSB7XG4gICAgICAgICAgICBvYmplY3Rba2V5XSA9IHJlc3VsdDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VNZXJnZWAgZm9yIGFycmF5cyBhbmQgb2JqZWN0cyB3aGljaCBwZXJmb3Jtc1xuICAgICAqIGRlZXAgbWVyZ2VzIGFuZCB0cmFja3MgdHJhdmVyc2VkIG9iamVjdHMgZW5hYmxpbmcgb2JqZWN0cyB3aXRoIGNpcmN1bGFyXG4gICAgICogcmVmZXJlbmNlcyB0byBiZSBtZXJnZWQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIGRlc3RpbmF0aW9uIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gc291cmNlIFRoZSBzb3VyY2Ugb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gbWVyZ2UuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gbWVyZ2VGdW5jIFRoZSBmdW5jdGlvbiB0byBtZXJnZSB2YWx1ZXMuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgbWVyZ2VkIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbc3RhY2tBPVtdXSBUcmFja3MgdHJhdmVyc2VkIHNvdXJjZSBvYmplY3RzLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0I9W11dIEFzc29jaWF0ZXMgdmFsdWVzIHdpdGggc291cmNlIGNvdW50ZXJwYXJ0cy5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9iamVjdHMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlTWVyZ2VEZWVwKG9iamVjdCwgc291cmNlLCBrZXksIG1lcmdlRnVuYywgY3VzdG9taXplciwgc3RhY2tBLCBzdGFja0IpIHtcbiAgICAgIHZhciBsZW5ndGggPSBzdGFja0EubGVuZ3RoLFxuICAgICAgICAgIHNyY1ZhbHVlID0gc291cmNlW2tleV07XG5cbiAgICAgIHdoaWxlIChsZW5ndGgtLSkge1xuICAgICAgICBpZiAoc3RhY2tBW2xlbmd0aF0gPT0gc3JjVmFsdWUpIHtcbiAgICAgICAgICBvYmplY3Rba2V5XSA9IHN0YWNrQltsZW5ndGhdO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdmFyIHZhbHVlID0gb2JqZWN0W2tleV0sXG4gICAgICAgICAgcmVzdWx0ID0gY3VzdG9taXplciA/IGN1c3RvbWl6ZXIodmFsdWUsIHNyY1ZhbHVlLCBrZXksIG9iamVjdCwgc291cmNlKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICBpc0NvbW1vbiA9IHJlc3VsdCA9PT0gdW5kZWZpbmVkO1xuXG4gICAgICBpZiAoaXNDb21tb24pIHtcbiAgICAgICAgcmVzdWx0ID0gc3JjVmFsdWU7XG4gICAgICAgIGlmIChpc0FycmF5TGlrZShzcmNWYWx1ZSkgJiYgKGlzQXJyYXkoc3JjVmFsdWUpIHx8IGlzVHlwZWRBcnJheShzcmNWYWx1ZSkpKSB7XG4gICAgICAgICAgcmVzdWx0ID0gaXNBcnJheSh2YWx1ZSlcbiAgICAgICAgICAgID8gdmFsdWVcbiAgICAgICAgICAgIDogKGlzQXJyYXlMaWtlKHZhbHVlKSA/IGFycmF5Q29weSh2YWx1ZSkgOiBbXSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNQbGFpbk9iamVjdChzcmNWYWx1ZSkgfHwgaXNBcmd1bWVudHMoc3JjVmFsdWUpKSB7XG4gICAgICAgICAgcmVzdWx0ID0gaXNBcmd1bWVudHModmFsdWUpXG4gICAgICAgICAgICA/IHRvUGxhaW5PYmplY3QodmFsdWUpXG4gICAgICAgICAgICA6IChpc1BsYWluT2JqZWN0KHZhbHVlKSA/IHZhbHVlIDoge30pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGlzQ29tbW9uID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIEFkZCB0aGUgc291cmNlIHZhbHVlIHRvIHRoZSBzdGFjayBvZiB0cmF2ZXJzZWQgb2JqZWN0cyBhbmQgYXNzb2NpYXRlXG4gICAgICAvLyBpdCB3aXRoIGl0cyBtZXJnZWQgdmFsdWUuXG4gICAgICBzdGFja0EucHVzaChzcmNWYWx1ZSk7XG4gICAgICBzdGFja0IucHVzaChyZXN1bHQpO1xuXG4gICAgICBpZiAoaXNDb21tb24pIHtcbiAgICAgICAgLy8gUmVjdXJzaXZlbHkgbWVyZ2Ugb2JqZWN0cyBhbmQgYXJyYXlzIChzdXNjZXB0aWJsZSB0byBjYWxsIHN0YWNrIGxpbWl0cykuXG4gICAgICAgIG9iamVjdFtrZXldID0gbWVyZ2VGdW5jKHJlc3VsdCwgc3JjVmFsdWUsIGN1c3RvbWl6ZXIsIHN0YWNrQSwgc3RhY2tCKTtcbiAgICAgIH0gZWxzZSBpZiAocmVzdWx0ID09PSByZXN1bHQgPyAocmVzdWx0ICE9PSB2YWx1ZSkgOiAodmFsdWUgPT09IHZhbHVlKSkge1xuICAgICAgICBvYmplY3Rba2V5XSA9IHJlc3VsdDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5wcm9wZXJ0eWAgd2l0aG91dCBzdXBwb3J0IGZvciBkZWVwIHBhdGhzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlUHJvcGVydHkoa2V5KSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiBvYmplY3QgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG9iamVjdFtrZXldO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VQcm9wZXJ0eWAgd2hpY2ggc3VwcG9ydHMgZGVlcCBwYXRocy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlUHJvcGVydHlEZWVwKHBhdGgpIHtcbiAgICAgIHZhciBwYXRoS2V5ID0gKHBhdGggKyAnJyk7XG4gICAgICBwYXRoID0gdG9QYXRoKHBhdGgpO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuICAgICAgICByZXR1cm4gYmFzZUdldChvYmplY3QsIHBhdGgsIHBhdGhLZXkpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5wdWxsQXRgIHdpdGhvdXQgc3VwcG9ydCBmb3IgaW5kaXZpZHVhbFxuICAgICAqIGluZGV4IGFyZ3VtZW50cyBhbmQgY2FwdHVyaW5nIHRoZSByZW1vdmVkIGVsZW1lbnRzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gbW9kaWZ5LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyW119IGluZGV4ZXMgVGhlIGluZGV4ZXMgb2YgZWxlbWVudHMgdG8gcmVtb3ZlLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBgYXJyYXlgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VQdWxsQXQoYXJyYXksIGluZGV4ZXMpIHtcbiAgICAgIHZhciBsZW5ndGggPSBhcnJheSA/IGluZGV4ZXMubGVuZ3RoIDogMDtcbiAgICAgIHdoaWxlIChsZW5ndGgtLSkge1xuICAgICAgICB2YXIgaW5kZXggPSBpbmRleGVzW2xlbmd0aF07XG4gICAgICAgIGlmIChpbmRleCAhPSBwcmV2aW91cyAmJiBpc0luZGV4KGluZGV4KSkge1xuICAgICAgICAgIHZhciBwcmV2aW91cyA9IGluZGV4O1xuICAgICAgICAgIHNwbGljZS5jYWxsKGFycmF5LCBpbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBhcnJheTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5yYW5kb21gIHdpdGhvdXQgc3VwcG9ydCBmb3IgYXJndW1lbnQganVnZ2xpbmdcbiAgICAgKiBhbmQgcmV0dXJuaW5nIGZsb2F0aW5nLXBvaW50IG51bWJlcnMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtaW4gVGhlIG1pbmltdW0gcG9zc2libGUgdmFsdWUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1heCBUaGUgbWF4aW11bSBwb3NzaWJsZSB2YWx1ZS5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSByYW5kb20gbnVtYmVyLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VSYW5kb20obWluLCBtYXgpIHtcbiAgICAgIHJldHVybiBtaW4gKyBuYXRpdmVGbG9vcihuYXRpdmVSYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ucmVkdWNlYCBhbmQgYF8ucmVkdWNlUmlnaHRgIHdpdGhvdXQgc3VwcG9ydFxuICAgICAqIGZvciBjYWxsYmFjayBzaG9ydGhhbmRzIGFuZCBgdGhpc2AgYmluZGluZywgd2hpY2ggaXRlcmF0ZXMgb3ZlciBgY29sbGVjdGlvbmBcbiAgICAgKiB1c2luZyB0aGUgcHJvdmlkZWQgYGVhY2hGdW5jYC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gYWNjdW11bGF0b3IgVGhlIGluaXRpYWwgdmFsdWUuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBpbml0RnJvbUNvbGxlY3Rpb24gU3BlY2lmeSB1c2luZyB0aGUgZmlyc3Qgb3IgbGFzdCBlbGVtZW50XG4gICAgICogIG9mIGBjb2xsZWN0aW9uYCBhcyB0aGUgaW5pdGlhbCB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBlYWNoRnVuYyBUaGUgZnVuY3Rpb24gdG8gaXRlcmF0ZSBvdmVyIGBjb2xsZWN0aW9uYC5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgYWNjdW11bGF0ZWQgdmFsdWUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZVJlZHVjZShjb2xsZWN0aW9uLCBpdGVyYXRlZSwgYWNjdW11bGF0b3IsIGluaXRGcm9tQ29sbGVjdGlvbiwgZWFjaEZ1bmMpIHtcbiAgICAgIGVhY2hGdW5jKGNvbGxlY3Rpb24sIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikge1xuICAgICAgICBhY2N1bXVsYXRvciA9IGluaXRGcm9tQ29sbGVjdGlvblxuICAgICAgICAgID8gKGluaXRGcm9tQ29sbGVjdGlvbiA9IGZhbHNlLCB2YWx1ZSlcbiAgICAgICAgICA6IGl0ZXJhdGVlKGFjY3VtdWxhdG9yLCB2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gYWNjdW11bGF0b3I7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYHNldERhdGFgIHdpdGhvdXQgc3VwcG9ydCBmb3IgaG90IGxvb3AgZGV0ZWN0aW9uLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBhc3NvY2lhdGUgbWV0YWRhdGEgd2l0aC5cbiAgICAgKiBAcGFyYW0geyp9IGRhdGEgVGhlIG1ldGFkYXRhLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyBgZnVuY2AuXG4gICAgICovXG4gICAgdmFyIGJhc2VTZXREYXRhID0gIW1ldGFNYXAgPyBpZGVudGl0eSA6IGZ1bmN0aW9uKGZ1bmMsIGRhdGEpIHtcbiAgICAgIG1ldGFNYXAuc2V0KGZ1bmMsIGRhdGEpO1xuICAgICAgcmV0dXJuIGZ1bmM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnNsaWNlYCB3aXRob3V0IGFuIGl0ZXJhdGVlIGNhbGwgZ3VhcmQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBzbGljZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3N0YXJ0PTBdIFRoZSBzdGFydCBwb3NpdGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2VuZD1hcnJheS5sZW5ndGhdIFRoZSBlbmQgcG9zaXRpb24uXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBzbGljZSBvZiBgYXJyYXlgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VTbGljZShhcnJheSwgc3RhcnQsIGVuZCkge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuXG4gICAgICBzdGFydCA9IHN0YXJ0ID09IG51bGwgPyAwIDogKCtzdGFydCB8fCAwKTtcbiAgICAgIGlmIChzdGFydCA8IDApIHtcbiAgICAgICAgc3RhcnQgPSAtc3RhcnQgPiBsZW5ndGggPyAwIDogKGxlbmd0aCArIHN0YXJ0KTtcbiAgICAgIH1cbiAgICAgIGVuZCA9IChlbmQgPT09IHVuZGVmaW5lZCB8fCBlbmQgPiBsZW5ndGgpID8gbGVuZ3RoIDogKCtlbmQgfHwgMCk7XG4gICAgICBpZiAoZW5kIDwgMCkge1xuICAgICAgICBlbmQgKz0gbGVuZ3RoO1xuICAgICAgfVxuICAgICAgbGVuZ3RoID0gc3RhcnQgPiBlbmQgPyAwIDogKChlbmQgLSBzdGFydCkgPj4+IDApO1xuICAgICAgc3RhcnQgPj4+PSAwO1xuXG4gICAgICB2YXIgcmVzdWx0ID0gQXJyYXkobGVuZ3RoKTtcbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHJlc3VsdFtpbmRleF0gPSBhcnJheVtpbmRleCArIHN0YXJ0XTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uc29tZWAgd2l0aG91dCBzdXBwb3J0IGZvciBjYWxsYmFjayBzaG9ydGhhbmRzXG4gICAgICogYW5kIGB0aGlzYCBiaW5kaW5nLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbnkgZWxlbWVudCBwYXNzZXMgdGhlIHByZWRpY2F0ZSBjaGVjayxcbiAgICAgKiAgZWxzZSBgZmFsc2VgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VTb21lKGNvbGxlY3Rpb24sIHByZWRpY2F0ZSkge1xuICAgICAgdmFyIHJlc3VsdDtcblxuICAgICAgYmFzZUVhY2goY29sbGVjdGlvbiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSB7XG4gICAgICAgIHJlc3VsdCA9IHByZWRpY2F0ZSh2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pO1xuICAgICAgICByZXR1cm4gIXJlc3VsdDtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuICEhcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnNvcnRCeWAgd2hpY2ggdXNlcyBgY29tcGFyZXJgIHRvIGRlZmluZVxuICAgICAqIHRoZSBzb3J0IG9yZGVyIG9mIGBhcnJheWAgYW5kIHJlcGxhY2VzIGNyaXRlcmlhIG9iamVjdHMgd2l0aCB0aGVpclxuICAgICAqIGNvcnJlc3BvbmRpbmcgdmFsdWVzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gc29ydC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjb21wYXJlciBUaGUgZnVuY3Rpb24gdG8gZGVmaW5lIHNvcnQgb3JkZXIuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGBhcnJheWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZVNvcnRCeShhcnJheSwgY29tcGFyZXIpIHtcbiAgICAgIHZhciBsZW5ndGggPSBhcnJheS5sZW5ndGg7XG5cbiAgICAgIGFycmF5LnNvcnQoY29tcGFyZXIpO1xuICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICAgIGFycmF5W2xlbmd0aF0gPSBhcnJheVtsZW5ndGhdLnZhbHVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFycmF5O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnNvcnRCeU9yZGVyYCB3aXRob3V0IHBhcmFtIGd1YXJkcy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9uW118T2JqZWN0W118c3RyaW5nW119IGl0ZXJhdGVlcyBUaGUgaXRlcmF0ZWVzIHRvIHNvcnQgYnkuXG4gICAgICogQHBhcmFtIHtib29sZWFuW119IG9yZGVycyBUaGUgc29ydCBvcmRlcnMgb2YgYGl0ZXJhdGVlc2AuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgc29ydGVkIGFycmF5LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VTb3J0QnlPcmRlcihjb2xsZWN0aW9uLCBpdGVyYXRlZXMsIG9yZGVycykge1xuICAgICAgdmFyIGNhbGxiYWNrID0gZ2V0Q2FsbGJhY2soKSxcbiAgICAgICAgICBpbmRleCA9IC0xO1xuXG4gICAgICBpdGVyYXRlZXMgPSBhcnJheU1hcChpdGVyYXRlZXMsIGZ1bmN0aW9uKGl0ZXJhdGVlKSB7IHJldHVybiBjYWxsYmFjayhpdGVyYXRlZSk7IH0pO1xuXG4gICAgICB2YXIgcmVzdWx0ID0gYmFzZU1hcChjb2xsZWN0aW9uLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICB2YXIgY3JpdGVyaWEgPSBhcnJheU1hcChpdGVyYXRlZXMsIGZ1bmN0aW9uKGl0ZXJhdGVlKSB7IHJldHVybiBpdGVyYXRlZSh2YWx1ZSk7IH0pO1xuICAgICAgICByZXR1cm4geyAnY3JpdGVyaWEnOiBjcml0ZXJpYSwgJ2luZGV4JzogKytpbmRleCwgJ3ZhbHVlJzogdmFsdWUgfTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gYmFzZVNvcnRCeShyZXN1bHQsIGZ1bmN0aW9uKG9iamVjdCwgb3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIGNvbXBhcmVNdWx0aXBsZShvYmplY3QsIG90aGVyLCBvcmRlcnMpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uc3VtYCB3aXRob3V0IHN1cHBvcnQgZm9yIGNhbGxiYWNrIHNob3J0aGFuZHNcbiAgICAgKiBhbmQgYHRoaXNgIGJpbmRpbmcuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBzdW0uXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZVN1bShjb2xsZWN0aW9uLCBpdGVyYXRlZSkge1xuICAgICAgdmFyIHJlc3VsdCA9IDA7XG4gICAgICBiYXNlRWFjaChjb2xsZWN0aW9uLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgcmVzdWx0ICs9ICtpdGVyYXRlZSh2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHx8IDA7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8udW5pcWAgd2l0aG91dCBzdXBwb3J0IGZvciBjYWxsYmFjayBzaG9ydGhhbmRzXG4gICAgICogYW5kIGB0aGlzYCBiaW5kaW5nLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaW5zcGVjdC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbaXRlcmF0ZWVdIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgZHVwbGljYXRlLXZhbHVlLWZyZWUgYXJyYXkuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZVVuaXEoYXJyYXksIGl0ZXJhdGVlKSB7XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBpbmRleE9mID0gZ2V0SW5kZXhPZigpLFxuICAgICAgICAgIGxlbmd0aCA9IGFycmF5Lmxlbmd0aCxcbiAgICAgICAgICBpc0NvbW1vbiA9IGluZGV4T2YgPT0gYmFzZUluZGV4T2YsXG4gICAgICAgICAgaXNMYXJnZSA9IGlzQ29tbW9uICYmIGxlbmd0aCA+PSBMQVJHRV9BUlJBWV9TSVpFLFxuICAgICAgICAgIHNlZW4gPSBpc0xhcmdlID8gY3JlYXRlQ2FjaGUoKSA6IG51bGwsXG4gICAgICAgICAgcmVzdWx0ID0gW107XG5cbiAgICAgIGlmIChzZWVuKSB7XG4gICAgICAgIGluZGV4T2YgPSBjYWNoZUluZGV4T2Y7XG4gICAgICAgIGlzQ29tbW9uID0gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpc0xhcmdlID0gZmFsc2U7XG4gICAgICAgIHNlZW4gPSBpdGVyYXRlZSA/IFtdIDogcmVzdWx0O1xuICAgICAgfVxuICAgICAgb3V0ZXI6XG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICB2YXIgdmFsdWUgPSBhcnJheVtpbmRleF0sXG4gICAgICAgICAgICBjb21wdXRlZCA9IGl0ZXJhdGVlID8gaXRlcmF0ZWUodmFsdWUsIGluZGV4LCBhcnJheSkgOiB2YWx1ZTtcblxuICAgICAgICBpZiAoaXNDb21tb24gJiYgdmFsdWUgPT09IHZhbHVlKSB7XG4gICAgICAgICAgdmFyIHNlZW5JbmRleCA9IHNlZW4ubGVuZ3RoO1xuICAgICAgICAgIHdoaWxlIChzZWVuSW5kZXgtLSkge1xuICAgICAgICAgICAgaWYgKHNlZW5bc2VlbkluZGV4XSA9PT0gY29tcHV0ZWQpIHtcbiAgICAgICAgICAgICAgY29udGludWUgb3V0ZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpdGVyYXRlZSkge1xuICAgICAgICAgICAgc2Vlbi5wdXNoKGNvbXB1dGVkKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGluZGV4T2Yoc2VlbiwgY29tcHV0ZWQsIDApIDwgMCkge1xuICAgICAgICAgIGlmIChpdGVyYXRlZSB8fCBpc0xhcmdlKSB7XG4gICAgICAgICAgICBzZWVuLnB1c2goY29tcHV0ZWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXN1bHQucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8udmFsdWVzYCBhbmQgYF8udmFsdWVzSW5gIHdoaWNoIGNyZWF0ZXMgYW5cbiAgICAgKiBhcnJheSBvZiBgb2JqZWN0YCBwcm9wZXJ0eSB2YWx1ZXMgY29ycmVzcG9uZGluZyB0byB0aGUgcHJvcGVydHkgbmFtZXNcbiAgICAgKiBvZiBgcHJvcHNgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gICAgICogQHBhcmFtIHtBcnJheX0gcHJvcHMgVGhlIHByb3BlcnR5IG5hbWVzIHRvIGdldCB2YWx1ZXMgZm9yLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IHZhbHVlcy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlVmFsdWVzKG9iamVjdCwgcHJvcHMpIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IHByb3BzLmxlbmd0aCxcbiAgICAgICAgICByZXN1bHQgPSBBcnJheShsZW5ndGgpO1xuXG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICByZXN1bHRbaW5kZXhdID0gb2JqZWN0W3Byb3BzW2luZGV4XV07XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmRyb3BSaWdodFdoaWxlYCwgYF8uZHJvcFdoaWxlYCwgYF8udGFrZVJpZ2h0V2hpbGVgLFxuICAgICAqIGFuZCBgXy50YWtlV2hpbGVgIHdpdGhvdXQgc3VwcG9ydCBmb3IgY2FsbGJhY2sgc2hvcnRoYW5kcyBhbmQgYHRoaXNgIGJpbmRpbmcuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBxdWVyeS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc0Ryb3BdIFNwZWNpZnkgZHJvcHBpbmcgZWxlbWVudHMgaW5zdGVhZCBvZiB0YWtpbmcgdGhlbS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtmcm9tUmlnaHRdIFNwZWNpZnkgaXRlcmF0aW5nIGZyb20gcmlnaHQgdG8gbGVmdC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHNsaWNlIG9mIGBhcnJheWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZVdoaWxlKGFycmF5LCBwcmVkaWNhdGUsIGlzRHJvcCwgZnJvbVJpZ2h0KSB7XG4gICAgICB2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoLFxuICAgICAgICAgIGluZGV4ID0gZnJvbVJpZ2h0ID8gbGVuZ3RoIDogLTE7XG5cbiAgICAgIHdoaWxlICgoZnJvbVJpZ2h0ID8gaW5kZXgtLSA6ICsraW5kZXggPCBsZW5ndGgpICYmIHByZWRpY2F0ZShhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSkpIHt9XG4gICAgICByZXR1cm4gaXNEcm9wXG4gICAgICAgID8gYmFzZVNsaWNlKGFycmF5LCAoZnJvbVJpZ2h0ID8gMCA6IGluZGV4KSwgKGZyb21SaWdodCA/IGluZGV4ICsgMSA6IGxlbmd0aCkpXG4gICAgICAgIDogYmFzZVNsaWNlKGFycmF5LCAoZnJvbVJpZ2h0ID8gaW5kZXggKyAxIDogMCksIChmcm9tUmlnaHQgPyBsZW5ndGggOiBpbmRleCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGB3cmFwcGVyVmFsdWVgIHdoaWNoIHJldHVybnMgdGhlIHJlc3VsdCBvZlxuICAgICAqIHBlcmZvcm1pbmcgYSBzZXF1ZW5jZSBvZiBhY3Rpb25zIG9uIHRoZSB1bndyYXBwZWQgYHZhbHVlYCwgd2hlcmUgZWFjaFxuICAgICAqIHN1Y2Nlc3NpdmUgYWN0aW9uIGlzIHN1cHBsaWVkIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIHByZXZpb3VzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB1bndyYXBwZWQgdmFsdWUuXG4gICAgICogQHBhcmFtIHtBcnJheX0gYWN0aW9ucyBBY3Rpb25zIHRvIHBlZm9ybSB0byByZXNvbHZlIHRoZSB1bndyYXBwZWQgdmFsdWUuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHJlc29sdmVkIHZhbHVlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VXcmFwcGVyVmFsdWUodmFsdWUsIGFjdGlvbnMpIHtcbiAgICAgIHZhciByZXN1bHQgPSB2YWx1ZTtcbiAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBMYXp5V3JhcHBlcikge1xuICAgICAgICByZXN1bHQgPSByZXN1bHQudmFsdWUoKTtcbiAgICAgIH1cbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IGFjdGlvbnMubGVuZ3RoO1xuXG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICB2YXIgYWN0aW9uID0gYWN0aW9uc1tpbmRleF07XG4gICAgICAgIHJlc3VsdCA9IGFjdGlvbi5mdW5jLmFwcGx5KGFjdGlvbi50aGlzQXJnLCBhcnJheVB1c2goW3Jlc3VsdF0sIGFjdGlvbi5hcmdzKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBlcmZvcm1zIGEgYmluYXJ5IHNlYXJjaCBvZiBgYXJyYXlgIHRvIGRldGVybWluZSB0aGUgaW5kZXggYXQgd2hpY2ggYHZhbHVlYFxuICAgICAqIHNob3VsZCBiZSBpbnNlcnRlZCBpbnRvIGBhcnJheWAgaW4gb3JkZXIgdG8gbWFpbnRhaW4gaXRzIHNvcnQgb3JkZXIuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBzb3J0ZWQgYXJyYXkgdG8gaW5zcGVjdC5cbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBldmFsdWF0ZS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtyZXRIaWdoZXN0XSBTcGVjaWZ5IHJldHVybmluZyB0aGUgaGlnaGVzdCBxdWFsaWZpZWQgaW5kZXguXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggYXQgd2hpY2ggYHZhbHVlYCBzaG91bGQgYmUgaW5zZXJ0ZWRcbiAgICAgKiAgaW50byBgYXJyYXlgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJpbmFyeUluZGV4KGFycmF5LCB2YWx1ZSwgcmV0SGlnaGVzdCkge1xuICAgICAgdmFyIGxvdyA9IDAsXG4gICAgICAgICAgaGlnaCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogbG93O1xuXG4gICAgICBpZiAodHlwZW9mIHZhbHVlID09ICdudW1iZXInICYmIHZhbHVlID09PSB2YWx1ZSAmJiBoaWdoIDw9IEhBTEZfTUFYX0FSUkFZX0xFTkdUSCkge1xuICAgICAgICB3aGlsZSAobG93IDwgaGlnaCkge1xuICAgICAgICAgIHZhciBtaWQgPSAobG93ICsgaGlnaCkgPj4+IDEsXG4gICAgICAgICAgICAgIGNvbXB1dGVkID0gYXJyYXlbbWlkXTtcblxuICAgICAgICAgIGlmICgocmV0SGlnaGVzdCA/IChjb21wdXRlZCA8PSB2YWx1ZSkgOiAoY29tcHV0ZWQgPCB2YWx1ZSkpICYmIGNvbXB1dGVkICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsb3cgPSBtaWQgKyAxO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBoaWdoID0gbWlkO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaGlnaDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBiaW5hcnlJbmRleEJ5KGFycmF5LCB2YWx1ZSwgaWRlbnRpdHksIHJldEhpZ2hlc3QpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gaXMgbGlrZSBgYmluYXJ5SW5kZXhgIGV4Y2VwdCB0aGF0IGl0IGludm9rZXMgYGl0ZXJhdGVlYCBmb3JcbiAgICAgKiBgdmFsdWVgIGFuZCBlYWNoIGVsZW1lbnQgb2YgYGFycmF5YCB0byBjb21wdXRlIHRoZWlyIHNvcnQgcmFua2luZy4gVGhlXG4gICAgICogaXRlcmF0ZWUgaXMgaW52b2tlZCB3aXRoIG9uZSBhcmd1bWVudDsgKHZhbHVlKS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIHNvcnRlZCBhcnJheSB0byBpbnNwZWN0LlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGV2YWx1YXRlLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbcmV0SGlnaGVzdF0gU3BlY2lmeSByZXR1cm5pbmcgdGhlIGhpZ2hlc3QgcXVhbGlmaWVkIGluZGV4LlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IGF0IHdoaWNoIGB2YWx1ZWAgc2hvdWxkIGJlIGluc2VydGVkXG4gICAgICogIGludG8gYGFycmF5YC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiaW5hcnlJbmRleEJ5KGFycmF5LCB2YWx1ZSwgaXRlcmF0ZWUsIHJldEhpZ2hlc3QpIHtcbiAgICAgIHZhbHVlID0gaXRlcmF0ZWUodmFsdWUpO1xuXG4gICAgICB2YXIgbG93ID0gMCxcbiAgICAgICAgICBoaWdoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwLFxuICAgICAgICAgIHZhbElzTmFOID0gdmFsdWUgIT09IHZhbHVlLFxuICAgICAgICAgIHZhbElzTnVsbCA9IHZhbHVlID09PSBudWxsLFxuICAgICAgICAgIHZhbElzVW5kZWYgPSB2YWx1ZSA9PT0gdW5kZWZpbmVkO1xuXG4gICAgICB3aGlsZSAobG93IDwgaGlnaCkge1xuICAgICAgICB2YXIgbWlkID0gbmF0aXZlRmxvb3IoKGxvdyArIGhpZ2gpIC8gMiksXG4gICAgICAgICAgICBjb21wdXRlZCA9IGl0ZXJhdGVlKGFycmF5W21pZF0pLFxuICAgICAgICAgICAgaXNEZWYgPSBjb21wdXRlZCAhPT0gdW5kZWZpbmVkLFxuICAgICAgICAgICAgaXNSZWZsZXhpdmUgPSBjb21wdXRlZCA9PT0gY29tcHV0ZWQ7XG5cbiAgICAgICAgaWYgKHZhbElzTmFOKSB7XG4gICAgICAgICAgdmFyIHNldExvdyA9IGlzUmVmbGV4aXZlIHx8IHJldEhpZ2hlc3Q7XG4gICAgICAgIH0gZWxzZSBpZiAodmFsSXNOdWxsKSB7XG4gICAgICAgICAgc2V0TG93ID0gaXNSZWZsZXhpdmUgJiYgaXNEZWYgJiYgKHJldEhpZ2hlc3QgfHwgY29tcHV0ZWQgIT0gbnVsbCk7XG4gICAgICAgIH0gZWxzZSBpZiAodmFsSXNVbmRlZikge1xuICAgICAgICAgIHNldExvdyA9IGlzUmVmbGV4aXZlICYmIChyZXRIaWdoZXN0IHx8IGlzRGVmKTtcbiAgICAgICAgfSBlbHNlIGlmIChjb21wdXRlZCA9PSBudWxsKSB7XG4gICAgICAgICAgc2V0TG93ID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2V0TG93ID0gcmV0SGlnaGVzdCA/IChjb21wdXRlZCA8PSB2YWx1ZSkgOiAoY29tcHV0ZWQgPCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNldExvdykge1xuICAgICAgICAgIGxvdyA9IG1pZCArIDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaGlnaCA9IG1pZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG5hdGl2ZU1pbihoaWdoLCBNQVhfQVJSQVlfSU5ERVgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUNhbGxiYWNrYCB3aGljaCBvbmx5IHN1cHBvcnRzIGB0aGlzYCBiaW5kaW5nXG4gICAgICogYW5kIHNwZWNpZnlpbmcgdGhlIG51bWJlciBvZiBhcmd1bWVudHMgdG8gcHJvdmlkZSB0byBgZnVuY2AuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGJpbmQuXG4gICAgICogQHBhcmFtIHsqfSB0aGlzQXJnIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgZnVuY2AuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFthcmdDb3VudF0gVGhlIG51bWJlciBvZiBhcmd1bWVudHMgdG8gcHJvdmlkZSB0byBgZnVuY2AuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBjYWxsYmFjay5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiaW5kQ2FsbGJhY2soZnVuYywgdGhpc0FyZywgYXJnQ291bnQpIHtcbiAgICAgIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiBpZGVudGl0eTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzQXJnID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmM7XG4gICAgICB9XG4gICAgICBzd2l0Y2ggKGFyZ0NvdW50KSB7XG4gICAgICAgIGNhc2UgMTogcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCB2YWx1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIGNhc2UgMzogcmV0dXJuIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikge1xuICAgICAgICAgIHJldHVybiBmdW5jLmNhbGwodGhpc0FyZywgdmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKTtcbiAgICAgICAgfTtcbiAgICAgICAgY2FzZSA0OiByZXR1cm4gZnVuY3Rpb24oYWNjdW11bGF0b3IsIHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikge1xuICAgICAgICAgIHJldHVybiBmdW5jLmNhbGwodGhpc0FyZywgYWNjdW11bGF0b3IsIHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbik7XG4gICAgICAgIH07XG4gICAgICAgIGNhc2UgNTogcmV0dXJuIGZ1bmN0aW9uKHZhbHVlLCBvdGhlciwga2V5LCBvYmplY3QsIHNvdXJjZSkge1xuICAgICAgICAgIHJldHVybiBmdW5jLmNhbGwodGhpc0FyZywgdmFsdWUsIG90aGVyLCBrZXksIG9iamVjdCwgc291cmNlKTtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkodGhpc0FyZywgYXJndW1lbnRzKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGNsb25lIG9mIHRoZSBnaXZlbiBhcnJheSBidWZmZXIuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXlCdWZmZXJ9IGJ1ZmZlciBUaGUgYXJyYXkgYnVmZmVyIHRvIGNsb25lLlxuICAgICAqIEByZXR1cm5zIHtBcnJheUJ1ZmZlcn0gUmV0dXJucyB0aGUgY2xvbmVkIGFycmF5IGJ1ZmZlci5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBidWZmZXJDbG9uZShidWZmZXIpIHtcbiAgICAgIHZhciByZXN1bHQgPSBuZXcgQXJyYXlCdWZmZXIoYnVmZmVyLmJ5dGVMZW5ndGgpLFxuICAgICAgICAgIHZpZXcgPSBuZXcgVWludDhBcnJheShyZXN1bHQpO1xuXG4gICAgICB2aWV3LnNldChuZXcgVWludDhBcnJheShidWZmZXIpKTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhcnJheSB0aGF0IGlzIHRoZSBjb21wb3NpdGlvbiBvZiBwYXJ0aWFsbHkgYXBwbGllZCBhcmd1bWVudHMsXG4gICAgICogcGxhY2Vob2xkZXJzLCBhbmQgcHJvdmlkZWQgYXJndW1lbnRzIGludG8gYSBzaW5nbGUgYXJyYXkgb2YgYXJndW1lbnRzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdH0gYXJncyBUaGUgcHJvdmlkZWQgYXJndW1lbnRzLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHBhcnRpYWxzIFRoZSBhcmd1bWVudHMgdG8gcHJlcGVuZCB0byB0aG9zZSBwcm92aWRlZC5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBob2xkZXJzIFRoZSBgcGFydGlhbHNgIHBsYWNlaG9sZGVyIGluZGV4ZXMuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgYXJyYXkgb2YgY29tcG9zZWQgYXJndW1lbnRzLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNvbXBvc2VBcmdzKGFyZ3MsIHBhcnRpYWxzLCBob2xkZXJzKSB7XG4gICAgICB2YXIgaG9sZGVyc0xlbmd0aCA9IGhvbGRlcnMubGVuZ3RoLFxuICAgICAgICAgIGFyZ3NJbmRleCA9IC0xLFxuICAgICAgICAgIGFyZ3NMZW5ndGggPSBuYXRpdmVNYXgoYXJncy5sZW5ndGggLSBob2xkZXJzTGVuZ3RoLCAwKSxcbiAgICAgICAgICBsZWZ0SW5kZXggPSAtMSxcbiAgICAgICAgICBsZWZ0TGVuZ3RoID0gcGFydGlhbHMubGVuZ3RoLFxuICAgICAgICAgIHJlc3VsdCA9IEFycmF5KGxlZnRMZW5ndGggKyBhcmdzTGVuZ3RoKTtcblxuICAgICAgd2hpbGUgKCsrbGVmdEluZGV4IDwgbGVmdExlbmd0aCkge1xuICAgICAgICByZXN1bHRbbGVmdEluZGV4XSA9IHBhcnRpYWxzW2xlZnRJbmRleF07XG4gICAgICB9XG4gICAgICB3aGlsZSAoKythcmdzSW5kZXggPCBob2xkZXJzTGVuZ3RoKSB7XG4gICAgICAgIHJlc3VsdFtob2xkZXJzW2FyZ3NJbmRleF1dID0gYXJnc1thcmdzSW5kZXhdO1xuICAgICAgfVxuICAgICAgd2hpbGUgKGFyZ3NMZW5ndGgtLSkge1xuICAgICAgICByZXN1bHRbbGVmdEluZGV4KytdID0gYXJnc1thcmdzSW5kZXgrK107XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gaXMgbGlrZSBgY29tcG9zZUFyZ3NgIGV4Y2VwdCB0aGF0IHRoZSBhcmd1bWVudHMgY29tcG9zaXRpb25cbiAgICAgKiBpcyB0YWlsb3JlZCBmb3IgYF8ucGFydGlhbFJpZ2h0YC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R9IGFyZ3MgVGhlIHByb3ZpZGVkIGFyZ3VtZW50cy5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBwYXJ0aWFscyBUaGUgYXJndW1lbnRzIHRvIGFwcGVuZCB0byB0aG9zZSBwcm92aWRlZC5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBob2xkZXJzIFRoZSBgcGFydGlhbHNgIHBsYWNlaG9sZGVyIGluZGV4ZXMuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgYXJyYXkgb2YgY29tcG9zZWQgYXJndW1lbnRzLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNvbXBvc2VBcmdzUmlnaHQoYXJncywgcGFydGlhbHMsIGhvbGRlcnMpIHtcbiAgICAgIHZhciBob2xkZXJzSW5kZXggPSAtMSxcbiAgICAgICAgICBob2xkZXJzTGVuZ3RoID0gaG9sZGVycy5sZW5ndGgsXG4gICAgICAgICAgYXJnc0luZGV4ID0gLTEsXG4gICAgICAgICAgYXJnc0xlbmd0aCA9IG5hdGl2ZU1heChhcmdzLmxlbmd0aCAtIGhvbGRlcnNMZW5ndGgsIDApLFxuICAgICAgICAgIHJpZ2h0SW5kZXggPSAtMSxcbiAgICAgICAgICByaWdodExlbmd0aCA9IHBhcnRpYWxzLmxlbmd0aCxcbiAgICAgICAgICByZXN1bHQgPSBBcnJheShhcmdzTGVuZ3RoICsgcmlnaHRMZW5ndGgpO1xuXG4gICAgICB3aGlsZSAoKythcmdzSW5kZXggPCBhcmdzTGVuZ3RoKSB7XG4gICAgICAgIHJlc3VsdFthcmdzSW5kZXhdID0gYXJnc1thcmdzSW5kZXhdO1xuICAgICAgfVxuICAgICAgdmFyIG9mZnNldCA9IGFyZ3NJbmRleDtcbiAgICAgIHdoaWxlICgrK3JpZ2h0SW5kZXggPCByaWdodExlbmd0aCkge1xuICAgICAgICByZXN1bHRbb2Zmc2V0ICsgcmlnaHRJbmRleF0gPSBwYXJ0aWFsc1tyaWdodEluZGV4XTtcbiAgICAgIH1cbiAgICAgIHdoaWxlICgrK2hvbGRlcnNJbmRleCA8IGhvbGRlcnNMZW5ndGgpIHtcbiAgICAgICAgcmVzdWx0W29mZnNldCArIGhvbGRlcnNbaG9sZGVyc0luZGV4XV0gPSBhcmdzW2FyZ3NJbmRleCsrXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGBfLmNvdW50QnlgLCBgXy5ncm91cEJ5YCwgYF8uaW5kZXhCeWAsIG9yIGBfLnBhcnRpdGlvbmAgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHNldHRlciBUaGUgZnVuY3Rpb24gdG8gc2V0IGtleXMgYW5kIHZhbHVlcyBvZiB0aGUgYWNjdW11bGF0b3Igb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtpbml0aWFsaXplcl0gVGhlIGZ1bmN0aW9uIHRvIGluaXRpYWxpemUgdGhlIGFjY3VtdWxhdG9yIG9iamVjdC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBhZ2dyZWdhdG9yIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZUFnZ3JlZ2F0b3Ioc2V0dGVyLCBpbml0aWFsaXplcikge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGNvbGxlY3Rpb24sIGl0ZXJhdGVlLCB0aGlzQXJnKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBpbml0aWFsaXplciA/IGluaXRpYWxpemVyKCkgOiB7fTtcbiAgICAgICAgaXRlcmF0ZWUgPSBnZXRDYWxsYmFjayhpdGVyYXRlZSwgdGhpc0FyZywgMyk7XG5cbiAgICAgICAgaWYgKGlzQXJyYXkoY29sbGVjdGlvbikpIHtcbiAgICAgICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICAgICAgbGVuZ3RoID0gY29sbGVjdGlvbi5sZW5ndGg7XG5cbiAgICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gY29sbGVjdGlvbltpbmRleF07XG4gICAgICAgICAgICBzZXR0ZXIocmVzdWx0LCB2YWx1ZSwgaXRlcmF0ZWUodmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSwgY29sbGVjdGlvbik7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGJhc2VFYWNoKGNvbGxlY3Rpb24sIGZ1bmN0aW9uKHZhbHVlLCBrZXksIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgICAgIHNldHRlcihyZXN1bHQsIHZhbHVlLCBpdGVyYXRlZSh2YWx1ZSwga2V5LCBjb2xsZWN0aW9uKSwgY29sbGVjdGlvbik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGBfLmFzc2lnbmAsIGBfLmRlZmF1bHRzYCwgb3IgYF8ubWVyZ2VgIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBhc3NpZ25lciBUaGUgZnVuY3Rpb24gdG8gYXNzaWduIHZhbHVlcy5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBhc3NpZ25lciBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVBc3NpZ25lcihhc3NpZ25lcikge1xuICAgICAgcmV0dXJuIHJlc3RQYXJhbShmdW5jdGlvbihvYmplY3QsIHNvdXJjZXMpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgICBsZW5ndGggPSBvYmplY3QgPT0gbnVsbCA/IDAgOiBzb3VyY2VzLmxlbmd0aCxcbiAgICAgICAgICAgIGN1c3RvbWl6ZXIgPSBsZW5ndGggPiAyID8gc291cmNlc1tsZW5ndGggLSAyXSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGd1YXJkID0gbGVuZ3RoID4gMiA/IHNvdXJjZXNbMl0gOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB0aGlzQXJnID0gbGVuZ3RoID4gMSA/IHNvdXJjZXNbbGVuZ3RoIC0gMV0gOiB1bmRlZmluZWQ7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBjdXN0b21pemVyID09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBjdXN0b21pemVyID0gYmluZENhbGxiYWNrKGN1c3RvbWl6ZXIsIHRoaXNBcmcsIDUpO1xuICAgICAgICAgIGxlbmd0aCAtPSAyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGN1c3RvbWl6ZXIgPSB0eXBlb2YgdGhpc0FyZyA9PSAnZnVuY3Rpb24nID8gdGhpc0FyZyA6IHVuZGVmaW5lZDtcbiAgICAgICAgICBsZW5ndGggLT0gKGN1c3RvbWl6ZXIgPyAxIDogMCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGd1YXJkICYmIGlzSXRlcmF0ZWVDYWxsKHNvdXJjZXNbMF0sIHNvdXJjZXNbMV0sIGd1YXJkKSkge1xuICAgICAgICAgIGN1c3RvbWl6ZXIgPSBsZW5ndGggPCAzID8gdW5kZWZpbmVkIDogY3VzdG9taXplcjtcbiAgICAgICAgICBsZW5ndGggPSAxO1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgICAgdmFyIHNvdXJjZSA9IHNvdXJjZXNbaW5kZXhdO1xuICAgICAgICAgIGlmIChzb3VyY2UpIHtcbiAgICAgICAgICAgIGFzc2lnbmVyKG9iamVjdCwgc291cmNlLCBjdXN0b21pemVyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBgYmFzZUVhY2hgIG9yIGBiYXNlRWFjaFJpZ2h0YCBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZWFjaEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGl0ZXJhdGUgb3ZlciBhIGNvbGxlY3Rpb24uXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbZnJvbVJpZ2h0XSBTcGVjaWZ5IGl0ZXJhdGluZyBmcm9tIHJpZ2h0IHRvIGxlZnQuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgYmFzZSBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVCYXNlRWFjaChlYWNoRnVuYywgZnJvbVJpZ2h0KSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oY29sbGVjdGlvbiwgaXRlcmF0ZWUpIHtcbiAgICAgICAgdmFyIGxlbmd0aCA9IGNvbGxlY3Rpb24gPyBnZXRMZW5ndGgoY29sbGVjdGlvbikgOiAwO1xuICAgICAgICBpZiAoIWlzTGVuZ3RoKGxlbmd0aCkpIHtcbiAgICAgICAgICByZXR1cm4gZWFjaEZ1bmMoY29sbGVjdGlvbiwgaXRlcmF0ZWUpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBpbmRleCA9IGZyb21SaWdodCA/IGxlbmd0aCA6IC0xLFxuICAgICAgICAgICAgaXRlcmFibGUgPSB0b09iamVjdChjb2xsZWN0aW9uKTtcblxuICAgICAgICB3aGlsZSAoKGZyb21SaWdodCA/IGluZGV4LS0gOiArK2luZGV4IDwgbGVuZ3RoKSkge1xuICAgICAgICAgIGlmIChpdGVyYXRlZShpdGVyYWJsZVtpbmRleF0sIGluZGV4LCBpdGVyYWJsZSkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbGxlY3Rpb247XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBiYXNlIGZ1bmN0aW9uIGZvciBgXy5mb3JJbmAgb3IgYF8uZm9ySW5SaWdodGAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2Zyb21SaWdodF0gU3BlY2lmeSBpdGVyYXRpbmcgZnJvbSByaWdodCB0byBsZWZ0LlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGJhc2UgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlQmFzZUZvcihmcm9tUmlnaHQpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihvYmplY3QsIGl0ZXJhdGVlLCBrZXlzRnVuYykge1xuICAgICAgICB2YXIgaXRlcmFibGUgPSB0b09iamVjdChvYmplY3QpLFxuICAgICAgICAgICAgcHJvcHMgPSBrZXlzRnVuYyhvYmplY3QpLFxuICAgICAgICAgICAgbGVuZ3RoID0gcHJvcHMubGVuZ3RoLFxuICAgICAgICAgICAgaW5kZXggPSBmcm9tUmlnaHQgPyBsZW5ndGggOiAtMTtcblxuICAgICAgICB3aGlsZSAoKGZyb21SaWdodCA/IGluZGV4LS0gOiArK2luZGV4IDwgbGVuZ3RoKSkge1xuICAgICAgICAgIHZhciBrZXkgPSBwcm9wc1tpbmRleF07XG4gICAgICAgICAgaWYgKGl0ZXJhdGVlKGl0ZXJhYmxlW2tleV0sIGtleSwgaXRlcmFibGUpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IHdyYXBzIGBmdW5jYCBhbmQgaW52b2tlcyBpdCB3aXRoIHRoZSBgdGhpc2BcbiAgICAgKiBiaW5kaW5nIG9mIGB0aGlzQXJnYC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gYmluZC5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGZ1bmNgLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGJvdW5kIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZUJpbmRXcmFwcGVyKGZ1bmMsIHRoaXNBcmcpIHtcbiAgICAgIHZhciBDdG9yID0gY3JlYXRlQ3RvcldyYXBwZXIoZnVuYyk7XG5cbiAgICAgIGZ1bmN0aW9uIHdyYXBwZXIoKSB7XG4gICAgICAgIHZhciBmbiA9ICh0aGlzICYmIHRoaXMgIT09IHJvb3QgJiYgdGhpcyBpbnN0YW5jZW9mIHdyYXBwZXIpID8gQ3RvciA6IGZ1bmM7XG4gICAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzQXJnLCBhcmd1bWVudHMpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHdyYXBwZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGBTZXRgIGNhY2hlIG9iamVjdCB0byBvcHRpbWl6ZSBsaW5lYXIgc2VhcmNoZXMgb2YgbGFyZ2UgYXJyYXlzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbdmFsdWVzXSBUaGUgdmFsdWVzIHRvIGNhY2hlLlxuICAgICAqIEByZXR1cm5zIHtudWxsfE9iamVjdH0gUmV0dXJucyB0aGUgbmV3IGNhY2hlIG9iamVjdCBpZiBgU2V0YCBpcyBzdXBwb3J0ZWQsIGVsc2UgYG51bGxgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZUNhY2hlKHZhbHVlcykge1xuICAgICAgcmV0dXJuIChuYXRpdmVDcmVhdGUgJiYgU2V0KSA/IG5ldyBTZXRDYWNoZSh2YWx1ZXMpIDogbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBwcm9kdWNlcyBjb21wb3VuZCB3b3JkcyBvdXQgb2YgdGhlIHdvcmRzIGluIGFcbiAgICAgKiBnaXZlbiBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIFRoZSBmdW5jdGlvbiB0byBjb21iaW5lIGVhY2ggd29yZC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBjb21wb3VuZGVyIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZUNvbXBvdW5kZXIoY2FsbGJhY2spIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihzdHJpbmcpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgICBhcnJheSA9IHdvcmRzKGRlYnVycihzdHJpbmcpKSxcbiAgICAgICAgICAgIGxlbmd0aCA9IGFycmF5Lmxlbmd0aCxcbiAgICAgICAgICAgIHJlc3VsdCA9ICcnO1xuXG4gICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgICAgcmVzdWx0ID0gY2FsbGJhY2socmVzdWx0LCBhcnJheVtpbmRleF0sIGluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBwcm9kdWNlcyBhbiBpbnN0YW5jZSBvZiBgQ3RvcmAgcmVnYXJkbGVzcyBvZlxuICAgICAqIHdoZXRoZXIgaXQgd2FzIGludm9rZWQgYXMgcGFydCBvZiBhIGBuZXdgIGV4cHJlc3Npb24gb3IgYnkgYGNhbGxgIG9yIGBhcHBseWAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IEN0b3IgVGhlIGNvbnN0cnVjdG9yIHRvIHdyYXAuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgd3JhcHBlZCBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVDdG9yV3JhcHBlcihDdG9yKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIFVzZSBhIGBzd2l0Y2hgIHN0YXRlbWVudCB0byB3b3JrIHdpdGggY2xhc3MgY29uc3RydWN0b3JzLlxuICAgICAgICAvLyBTZWUgaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtZWNtYXNjcmlwdC1mdW5jdGlvbi1vYmplY3RzLWNhbGwtdGhpc2FyZ3VtZW50LWFyZ3VtZW50c2xpc3RcbiAgICAgICAgLy8gZm9yIG1vcmUgZGV0YWlscy5cbiAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICAgIHN3aXRjaCAoYXJncy5sZW5ndGgpIHtcbiAgICAgICAgICBjYXNlIDA6IHJldHVybiBuZXcgQ3RvcjtcbiAgICAgICAgICBjYXNlIDE6IHJldHVybiBuZXcgQ3RvcihhcmdzWzBdKTtcbiAgICAgICAgICBjYXNlIDI6IHJldHVybiBuZXcgQ3RvcihhcmdzWzBdLCBhcmdzWzFdKTtcbiAgICAgICAgICBjYXNlIDM6IHJldHVybiBuZXcgQ3RvcihhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKTtcbiAgICAgICAgICBjYXNlIDQ6IHJldHVybiBuZXcgQ3RvcihhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdLCBhcmdzWzNdKTtcbiAgICAgICAgICBjYXNlIDU6IHJldHVybiBuZXcgQ3RvcihhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdLCBhcmdzWzNdLCBhcmdzWzRdKTtcbiAgICAgICAgICBjYXNlIDY6IHJldHVybiBuZXcgQ3RvcihhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdLCBhcmdzWzNdLCBhcmdzWzRdLCBhcmdzWzVdKTtcbiAgICAgICAgICBjYXNlIDc6IHJldHVybiBuZXcgQ3RvcihhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdLCBhcmdzWzNdLCBhcmdzWzRdLCBhcmdzWzVdLCBhcmdzWzZdKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGhpc0JpbmRpbmcgPSBiYXNlQ3JlYXRlKEN0b3IucHJvdG90eXBlKSxcbiAgICAgICAgICAgIHJlc3VsdCA9IEN0b3IuYXBwbHkodGhpc0JpbmRpbmcsIGFyZ3MpO1xuXG4gICAgICAgIC8vIE1pbWljIHRoZSBjb25zdHJ1Y3RvcidzIGByZXR1cm5gIGJlaGF2aW9yLlxuICAgICAgICAvLyBTZWUgaHR0cHM6Ly9lczUuZ2l0aHViLmlvLyN4MTMuMi4yIGZvciBtb3JlIGRldGFpbHMuXG4gICAgICAgIHJldHVybiBpc09iamVjdChyZXN1bHQpID8gcmVzdWx0IDogdGhpc0JpbmRpbmc7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBgXy5jdXJyeWAgb3IgYF8uY3VycnlSaWdodGAgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gZmxhZyBUaGUgY3VycnkgYml0IGZsYWcuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgY3VycnkgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlQ3VycnkoZmxhZykge1xuICAgICAgZnVuY3Rpb24gY3VycnlGdW5jKGZ1bmMsIGFyaXR5LCBndWFyZCkge1xuICAgICAgICBpZiAoZ3VhcmQgJiYgaXNJdGVyYXRlZUNhbGwoZnVuYywgYXJpdHksIGd1YXJkKSkge1xuICAgICAgICAgIGFyaXR5ID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHZhciByZXN1bHQgPSBjcmVhdGVXcmFwcGVyKGZ1bmMsIGZsYWcsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBhcml0eSk7XG4gICAgICAgIHJlc3VsdC5wbGFjZWhvbGRlciA9IGN1cnJ5RnVuYy5wbGFjZWhvbGRlcjtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjdXJyeUZ1bmM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGBfLmRlZmF1bHRzYCBvciBgXy5kZWZhdWx0c0RlZXBgIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBhc3NpZ25lciBUaGUgZnVuY3Rpb24gdG8gYXNzaWduIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjdXN0b21pemVyIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgYXNzaWduZWQgdmFsdWVzLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGRlZmF1bHRzIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZURlZmF1bHRzKGFzc2lnbmVyLCBjdXN0b21pemVyKSB7XG4gICAgICByZXR1cm4gcmVzdFBhcmFtKGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgdmFyIG9iamVjdCA9IGFyZ3NbMF07XG4gICAgICAgIGlmIChvYmplY3QgPT0gbnVsbCkge1xuICAgICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICAgIH1cbiAgICAgICAgYXJncy5wdXNoKGN1c3RvbWl6ZXIpO1xuICAgICAgICByZXR1cm4gYXNzaWduZXIuYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBgXy5tYXhgIG9yIGBfLm1pbmAgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNvbXBhcmF0b3IgVGhlIGZ1bmN0aW9uIHVzZWQgdG8gY29tcGFyZSB2YWx1ZXMuXG4gICAgICogQHBhcmFtIHsqfSBleFZhbHVlIFRoZSBpbml0aWFsIGV4dHJlbXVtIHZhbHVlLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGV4dHJlbXVtIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZUV4dHJlbXVtKGNvbXBhcmF0b3IsIGV4VmFsdWUpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihjb2xsZWN0aW9uLCBpdGVyYXRlZSwgdGhpc0FyZykge1xuICAgICAgICBpZiAodGhpc0FyZyAmJiBpc0l0ZXJhdGVlQ2FsbChjb2xsZWN0aW9uLCBpdGVyYXRlZSwgdGhpc0FyZykpIHtcbiAgICAgICAgICBpdGVyYXRlZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBpdGVyYXRlZSA9IGdldENhbGxiYWNrKGl0ZXJhdGVlLCB0aGlzQXJnLCAzKTtcbiAgICAgICAgaWYgKGl0ZXJhdGVlLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgICAgY29sbGVjdGlvbiA9IGlzQXJyYXkoY29sbGVjdGlvbikgPyBjb2xsZWN0aW9uIDogdG9JdGVyYWJsZShjb2xsZWN0aW9uKTtcbiAgICAgICAgICB2YXIgcmVzdWx0ID0gYXJyYXlFeHRyZW11bShjb2xsZWN0aW9uLCBpdGVyYXRlZSwgY29tcGFyYXRvciwgZXhWYWx1ZSk7XG4gICAgICAgICAgaWYgKCEoY29sbGVjdGlvbi5sZW5ndGggJiYgcmVzdWx0ID09PSBleFZhbHVlKSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJhc2VFeHRyZW11bShjb2xsZWN0aW9uLCBpdGVyYXRlZSwgY29tcGFyYXRvciwgZXhWYWx1ZSk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBgXy5maW5kYCBvciBgXy5maW5kTGFzdGAgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGVhY2hGdW5jIFRoZSBmdW5jdGlvbiB0byBpdGVyYXRlIG92ZXIgYSBjb2xsZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2Zyb21SaWdodF0gU3BlY2lmeSBpdGVyYXRpbmcgZnJvbSByaWdodCB0byBsZWZ0LlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZpbmQgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlRmluZChlYWNoRnVuYywgZnJvbVJpZ2h0KSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oY29sbGVjdGlvbiwgcHJlZGljYXRlLCB0aGlzQXJnKSB7XG4gICAgICAgIHByZWRpY2F0ZSA9IGdldENhbGxiYWNrKHByZWRpY2F0ZSwgdGhpc0FyZywgMyk7XG4gICAgICAgIGlmIChpc0FycmF5KGNvbGxlY3Rpb24pKSB7XG4gICAgICAgICAgdmFyIGluZGV4ID0gYmFzZUZpbmRJbmRleChjb2xsZWN0aW9uLCBwcmVkaWNhdGUsIGZyb21SaWdodCk7XG4gICAgICAgICAgcmV0dXJuIGluZGV4ID4gLTEgPyBjb2xsZWN0aW9uW2luZGV4XSA6IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYmFzZUZpbmQoY29sbGVjdGlvbiwgcHJlZGljYXRlLCBlYWNoRnVuYyk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBgXy5maW5kSW5kZXhgIG9yIGBfLmZpbmRMYXN0SW5kZXhgIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtmcm9tUmlnaHRdIFNwZWNpZnkgaXRlcmF0aW5nIGZyb20gcmlnaHQgdG8gbGVmdC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmaW5kIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZUZpbmRJbmRleChmcm9tUmlnaHQpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihhcnJheSwgcHJlZGljYXRlLCB0aGlzQXJnKSB7XG4gICAgICAgIGlmICghKGFycmF5ICYmIGFycmF5Lmxlbmd0aCkpIHtcbiAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH1cbiAgICAgICAgcHJlZGljYXRlID0gZ2V0Q2FsbGJhY2socHJlZGljYXRlLCB0aGlzQXJnLCAzKTtcbiAgICAgICAgcmV0dXJuIGJhc2VGaW5kSW5kZXgoYXJyYXksIHByZWRpY2F0ZSwgZnJvbVJpZ2h0KTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGBfLmZpbmRLZXlgIG9yIGBfLmZpbmRMYXN0S2V5YCBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gb2JqZWN0RnVuYyBUaGUgZnVuY3Rpb24gdG8gaXRlcmF0ZSBvdmVyIGFuIG9iamVjdC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmaW5kIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZUZpbmRLZXkob2JqZWN0RnVuYykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCwgcHJlZGljYXRlLCB0aGlzQXJnKSB7XG4gICAgICAgIHByZWRpY2F0ZSA9IGdldENhbGxiYWNrKHByZWRpY2F0ZSwgdGhpc0FyZywgMyk7XG4gICAgICAgIHJldHVybiBiYXNlRmluZChvYmplY3QsIHByZWRpY2F0ZSwgb2JqZWN0RnVuYywgdHJ1ZSk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBgXy5mbG93YCBvciBgXy5mbG93UmlnaHRgIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtmcm9tUmlnaHRdIFNwZWNpZnkgaXRlcmF0aW5nIGZyb20gcmlnaHQgdG8gbGVmdC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmbG93IGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZUZsb3coZnJvbVJpZ2h0KSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB3cmFwcGVyLFxuICAgICAgICAgICAgbGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aCxcbiAgICAgICAgICAgIGluZGV4ID0gZnJvbVJpZ2h0ID8gbGVuZ3RoIDogLTEsXG4gICAgICAgICAgICBsZWZ0SW5kZXggPSAwLFxuICAgICAgICAgICAgZnVuY3MgPSBBcnJheShsZW5ndGgpO1xuXG4gICAgICAgIHdoaWxlICgoZnJvbVJpZ2h0ID8gaW5kZXgtLSA6ICsraW5kZXggPCBsZW5ndGgpKSB7XG4gICAgICAgICAgdmFyIGZ1bmMgPSBmdW5jc1tsZWZ0SW5kZXgrK10gPSBhcmd1bWVudHNbaW5kZXhdO1xuICAgICAgICAgIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghd3JhcHBlciAmJiBMb2Rhc2hXcmFwcGVyLnByb3RvdHlwZS50aHJ1ICYmIGdldEZ1bmNOYW1lKGZ1bmMpID09ICd3cmFwcGVyJykge1xuICAgICAgICAgICAgd3JhcHBlciA9IG5ldyBMb2Rhc2hXcmFwcGVyKFtdLCB0cnVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaW5kZXggPSB3cmFwcGVyID8gLTEgOiBsZW5ndGg7XG4gICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgICAgZnVuYyA9IGZ1bmNzW2luZGV4XTtcblxuICAgICAgICAgIHZhciBmdW5jTmFtZSA9IGdldEZ1bmNOYW1lKGZ1bmMpLFxuICAgICAgICAgICAgICBkYXRhID0gZnVuY05hbWUgPT0gJ3dyYXBwZXInID8gZ2V0RGF0YShmdW5jKSA6IHVuZGVmaW5lZDtcblxuICAgICAgICAgIGlmIChkYXRhICYmIGlzTGF6aWFibGUoZGF0YVswXSkgJiYgZGF0YVsxXSA9PSAoQVJZX0ZMQUcgfCBDVVJSWV9GTEFHIHwgUEFSVElBTF9GTEFHIHwgUkVBUkdfRkxBRykgJiYgIWRhdGFbNF0ubGVuZ3RoICYmIGRhdGFbOV0gPT0gMSkge1xuICAgICAgICAgICAgd3JhcHBlciA9IHdyYXBwZXJbZ2V0RnVuY05hbWUoZGF0YVswXSldLmFwcGx5KHdyYXBwZXIsIGRhdGFbM10pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB3cmFwcGVyID0gKGZ1bmMubGVuZ3RoID09IDEgJiYgaXNMYXppYWJsZShmdW5jKSkgPyB3cmFwcGVyW2Z1bmNOYW1lXSgpIDogd3JhcHBlci50aHJ1KGZ1bmMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHMsXG4gICAgICAgICAgICAgIHZhbHVlID0gYXJnc1swXTtcblxuICAgICAgICAgIGlmICh3cmFwcGVyICYmIGFyZ3MubGVuZ3RoID09IDEgJiYgaXNBcnJheSh2YWx1ZSkgJiYgdmFsdWUubGVuZ3RoID49IExBUkdFX0FSUkFZX1NJWkUpIHtcbiAgICAgICAgICAgIHJldHVybiB3cmFwcGVyLnBsYW50KHZhbHVlKS52YWx1ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgaW5kZXggPSAwLFxuICAgICAgICAgICAgICByZXN1bHQgPSBsZW5ndGggPyBmdW5jc1tpbmRleF0uYXBwbHkodGhpcywgYXJncykgOiB2YWx1ZTtcblxuICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgICAgICByZXN1bHQgPSBmdW5jc1tpbmRleF0uY2FsbCh0aGlzLCByZXN1bHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gZm9yIGBfLmZvckVhY2hgIG9yIGBfLmZvckVhY2hSaWdodGAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGFycmF5RnVuYyBUaGUgZnVuY3Rpb24gdG8gaXRlcmF0ZSBvdmVyIGFuIGFycmF5LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGVhY2hGdW5jIFRoZSBmdW5jdGlvbiB0byBpdGVyYXRlIG92ZXIgYSBjb2xsZWN0aW9uLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGVhY2ggZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlRm9yRWFjaChhcnJheUZ1bmMsIGVhY2hGdW5jKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oY29sbGVjdGlvbiwgaXRlcmF0ZWUsIHRoaXNBcmcpIHtcbiAgICAgICAgcmV0dXJuICh0eXBlb2YgaXRlcmF0ZWUgPT0gJ2Z1bmN0aW9uJyAmJiB0aGlzQXJnID09PSB1bmRlZmluZWQgJiYgaXNBcnJheShjb2xsZWN0aW9uKSlcbiAgICAgICAgICA/IGFycmF5RnVuYyhjb2xsZWN0aW9uLCBpdGVyYXRlZSlcbiAgICAgICAgICA6IGVhY2hGdW5jKGNvbGxlY3Rpb24sIGJpbmRDYWxsYmFjayhpdGVyYXRlZSwgdGhpc0FyZywgMykpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gZm9yIGBfLmZvckluYCBvciBgXy5mb3JJblJpZ2h0YC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gb2JqZWN0RnVuYyBUaGUgZnVuY3Rpb24gdG8gaXRlcmF0ZSBvdmVyIGFuIG9iamVjdC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBlYWNoIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZUZvckluKG9iamVjdEZ1bmMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihvYmplY3QsIGl0ZXJhdGVlLCB0aGlzQXJnKSB7XG4gICAgICAgIGlmICh0eXBlb2YgaXRlcmF0ZWUgIT0gJ2Z1bmN0aW9uJyB8fCB0aGlzQXJnICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBpdGVyYXRlZSA9IGJpbmRDYWxsYmFjayhpdGVyYXRlZSwgdGhpc0FyZywgMyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iamVjdEZ1bmMob2JqZWN0LCBpdGVyYXRlZSwga2V5c0luKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIGZvciBgXy5mb3JPd25gIG9yIGBfLmZvck93blJpZ2h0YC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gb2JqZWN0RnVuYyBUaGUgZnVuY3Rpb24gdG8gaXRlcmF0ZSBvdmVyIGFuIG9iamVjdC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBlYWNoIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZUZvck93bihvYmplY3RGdW5jKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0LCBpdGVyYXRlZSwgdGhpc0FyZykge1xuICAgICAgICBpZiAodHlwZW9mIGl0ZXJhdGVlICE9ICdmdW5jdGlvbicgfHwgdGhpc0FyZyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgaXRlcmF0ZWUgPSBiaW5kQ2FsbGJhY2soaXRlcmF0ZWUsIHRoaXNBcmcsIDMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmplY3RGdW5jKG9iamVjdCwgaXRlcmF0ZWUpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gZm9yIGBfLm1hcEtleXNgIG9yIGBfLm1hcFZhbHVlc2AuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzTWFwS2V5c10gU3BlY2lmeSBtYXBwaW5nIGtleXMgaW5zdGVhZCBvZiB2YWx1ZXMuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgbWFwIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZU9iamVjdE1hcHBlcihpc01hcEtleXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihvYmplY3QsIGl0ZXJhdGVlLCB0aGlzQXJnKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgICAgaXRlcmF0ZWUgPSBnZXRDYWxsYmFjayhpdGVyYXRlZSwgdGhpc0FyZywgMyk7XG5cbiAgICAgICAgYmFzZUZvck93bihvYmplY3QsIGZ1bmN0aW9uKHZhbHVlLCBrZXksIG9iamVjdCkge1xuICAgICAgICAgIHZhciBtYXBwZWQgPSBpdGVyYXRlZSh2YWx1ZSwga2V5LCBvYmplY3QpO1xuICAgICAgICAgIGtleSA9IGlzTWFwS2V5cyA/IG1hcHBlZCA6IGtleTtcbiAgICAgICAgICB2YWx1ZSA9IGlzTWFwS2V5cyA/IHZhbHVlIDogbWFwcGVkO1xuICAgICAgICAgIHJlc3VsdFtrZXldID0gdmFsdWU7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gZm9yIGBfLnBhZExlZnRgIG9yIGBfLnBhZFJpZ2h0YC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbZnJvbVJpZ2h0XSBTcGVjaWZ5IHBhZGRpbmcgZnJvbSB0aGUgcmlnaHQuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgcGFkIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZVBhZERpcihmcm9tUmlnaHQpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihzdHJpbmcsIGxlbmd0aCwgY2hhcnMpIHtcbiAgICAgICAgc3RyaW5nID0gYmFzZVRvU3RyaW5nKHN0cmluZyk7XG4gICAgICAgIHJldHVybiAoZnJvbVJpZ2h0ID8gc3RyaW5nIDogJycpICsgY3JlYXRlUGFkZGluZyhzdHJpbmcsIGxlbmd0aCwgY2hhcnMpICsgKGZyb21SaWdodCA/ICcnIDogc3RyaW5nKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGBfLnBhcnRpYWxgIG9yIGBfLnBhcnRpYWxSaWdodGAgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gZmxhZyBUaGUgcGFydGlhbCBiaXQgZmxhZy5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBwYXJ0aWFsIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZVBhcnRpYWwoZmxhZykge1xuICAgICAgdmFyIHBhcnRpYWxGdW5jID0gcmVzdFBhcmFtKGZ1bmN0aW9uKGZ1bmMsIHBhcnRpYWxzKSB7XG4gICAgICAgIHZhciBob2xkZXJzID0gcmVwbGFjZUhvbGRlcnMocGFydGlhbHMsIHBhcnRpYWxGdW5jLnBsYWNlaG9sZGVyKTtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVdyYXBwZXIoZnVuYywgZmxhZywgdW5kZWZpbmVkLCBwYXJ0aWFscywgaG9sZGVycyk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBwYXJ0aWFsRnVuYztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gZm9yIGBfLnJlZHVjZWAgb3IgYF8ucmVkdWNlUmlnaHRgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBhcnJheUZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGl0ZXJhdGUgb3ZlciBhbiBhcnJheS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBlYWNoRnVuYyBUaGUgZnVuY3Rpb24gdG8gaXRlcmF0ZSBvdmVyIGEgY29sbGVjdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBlYWNoIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZVJlZHVjZShhcnJheUZ1bmMsIGVhY2hGdW5jKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oY29sbGVjdGlvbiwgaXRlcmF0ZWUsIGFjY3VtdWxhdG9yLCB0aGlzQXJnKSB7XG4gICAgICAgIHZhciBpbml0RnJvbUFycmF5ID0gYXJndW1lbnRzLmxlbmd0aCA8IDM7XG4gICAgICAgIHJldHVybiAodHlwZW9mIGl0ZXJhdGVlID09ICdmdW5jdGlvbicgJiYgdGhpc0FyZyA9PT0gdW5kZWZpbmVkICYmIGlzQXJyYXkoY29sbGVjdGlvbikpXG4gICAgICAgICAgPyBhcnJheUZ1bmMoY29sbGVjdGlvbiwgaXRlcmF0ZWUsIGFjY3VtdWxhdG9yLCBpbml0RnJvbUFycmF5KVxuICAgICAgICAgIDogYmFzZVJlZHVjZShjb2xsZWN0aW9uLCBnZXRDYWxsYmFjayhpdGVyYXRlZSwgdGhpc0FyZywgNCksIGFjY3VtdWxhdG9yLCBpbml0RnJvbUFycmF5LCBlYWNoRnVuYyk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IHdyYXBzIGBmdW5jYCBhbmQgaW52b2tlcyBpdCB3aXRoIG9wdGlvbmFsIGB0aGlzYFxuICAgICAqIGJpbmRpbmcgb2YsIHBhcnRpYWwgYXBwbGljYXRpb24sIGFuZCBjdXJyeWluZy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxzdHJpbmd9IGZ1bmMgVGhlIGZ1bmN0aW9uIG9yIG1ldGhvZCBuYW1lIHRvIHJlZmVyZW5jZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYml0bWFzayBUaGUgYml0bWFzayBvZiBmbGFncy4gU2VlIGBjcmVhdGVXcmFwcGVyYCBmb3IgbW9yZSBkZXRhaWxzLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgZnVuY2AuXG4gICAgICogQHBhcmFtIHtBcnJheX0gW3BhcnRpYWxzXSBUaGUgYXJndW1lbnRzIHRvIHByZXBlbmQgdG8gdGhvc2UgcHJvdmlkZWQgdG8gdGhlIG5ldyBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbaG9sZGVyc10gVGhlIGBwYXJ0aWFsc2AgcGxhY2Vob2xkZXIgaW5kZXhlcy5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbcGFydGlhbHNSaWdodF0gVGhlIGFyZ3VtZW50cyB0byBhcHBlbmQgdG8gdGhvc2UgcHJvdmlkZWQgdG8gdGhlIG5ldyBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbaG9sZGVyc1JpZ2h0XSBUaGUgYHBhcnRpYWxzUmlnaHRgIHBsYWNlaG9sZGVyIGluZGV4ZXMuXG4gICAgICogQHBhcmFtIHtBcnJheX0gW2FyZ1Bvc10gVGhlIGFyZ3VtZW50IHBvc2l0aW9ucyBvZiB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbYXJ5XSBUaGUgYXJpdHkgY2FwIG9mIGBmdW5jYC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2FyaXR5XSBUaGUgYXJpdHkgb2YgYGZ1bmNgLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHdyYXBwZWQgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlSHlicmlkV3JhcHBlcihmdW5jLCBiaXRtYXNrLCB0aGlzQXJnLCBwYXJ0aWFscywgaG9sZGVycywgcGFydGlhbHNSaWdodCwgaG9sZGVyc1JpZ2h0LCBhcmdQb3MsIGFyeSwgYXJpdHkpIHtcbiAgICAgIHZhciBpc0FyeSA9IGJpdG1hc2sgJiBBUllfRkxBRyxcbiAgICAgICAgICBpc0JpbmQgPSBiaXRtYXNrICYgQklORF9GTEFHLFxuICAgICAgICAgIGlzQmluZEtleSA9IGJpdG1hc2sgJiBCSU5EX0tFWV9GTEFHLFxuICAgICAgICAgIGlzQ3VycnkgPSBiaXRtYXNrICYgQ1VSUllfRkxBRyxcbiAgICAgICAgICBpc0N1cnJ5Qm91bmQgPSBiaXRtYXNrICYgQ1VSUllfQk9VTkRfRkxBRyxcbiAgICAgICAgICBpc0N1cnJ5UmlnaHQgPSBiaXRtYXNrICYgQ1VSUllfUklHSFRfRkxBRyxcbiAgICAgICAgICBDdG9yID0gaXNCaW5kS2V5ID8gdW5kZWZpbmVkIDogY3JlYXRlQ3RvcldyYXBwZXIoZnVuYyk7XG5cbiAgICAgIGZ1bmN0aW9uIHdyYXBwZXIoKSB7XG4gICAgICAgIC8vIEF2b2lkIGBhcmd1bWVudHNgIG9iamVjdCB1c2UgZGlzcXVhbGlmeWluZyBvcHRpbWl6YXRpb25zIGJ5XG4gICAgICAgIC8vIGNvbnZlcnRpbmcgaXQgdG8gYW4gYXJyYXkgYmVmb3JlIHByb3ZpZGluZyBpdCB0byBvdGhlciBmdW5jdGlvbnMuXG4gICAgICAgIHZhciBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoLFxuICAgICAgICAgICAgaW5kZXggPSBsZW5ndGgsXG4gICAgICAgICAgICBhcmdzID0gQXJyYXkobGVuZ3RoKTtcblxuICAgICAgICB3aGlsZSAoaW5kZXgtLSkge1xuICAgICAgICAgIGFyZ3NbaW5kZXhdID0gYXJndW1lbnRzW2luZGV4XTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFydGlhbHMpIHtcbiAgICAgICAgICBhcmdzID0gY29tcG9zZUFyZ3MoYXJncywgcGFydGlhbHMsIGhvbGRlcnMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJ0aWFsc1JpZ2h0KSB7XG4gICAgICAgICAgYXJncyA9IGNvbXBvc2VBcmdzUmlnaHQoYXJncywgcGFydGlhbHNSaWdodCwgaG9sZGVyc1JpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNDdXJyeSB8fCBpc0N1cnJ5UmlnaHQpIHtcbiAgICAgICAgICB2YXIgcGxhY2Vob2xkZXIgPSB3cmFwcGVyLnBsYWNlaG9sZGVyLFxuICAgICAgICAgICAgICBhcmdzSG9sZGVycyA9IHJlcGxhY2VIb2xkZXJzKGFyZ3MsIHBsYWNlaG9sZGVyKTtcblxuICAgICAgICAgIGxlbmd0aCAtPSBhcmdzSG9sZGVycy5sZW5ndGg7XG4gICAgICAgICAgaWYgKGxlbmd0aCA8IGFyaXR5KSB7XG4gICAgICAgICAgICB2YXIgbmV3QXJnUG9zID0gYXJnUG9zID8gYXJyYXlDb3B5KGFyZ1BvcykgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgbmV3QXJpdHkgPSBuYXRpdmVNYXgoYXJpdHkgLSBsZW5ndGgsIDApLFxuICAgICAgICAgICAgICAgIG5ld3NIb2xkZXJzID0gaXNDdXJyeSA/IGFyZ3NIb2xkZXJzIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIG5ld0hvbGRlcnNSaWdodCA9IGlzQ3VycnkgPyB1bmRlZmluZWQgOiBhcmdzSG9sZGVycyxcbiAgICAgICAgICAgICAgICBuZXdQYXJ0aWFscyA9IGlzQ3VycnkgPyBhcmdzIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIG5ld1BhcnRpYWxzUmlnaHQgPSBpc0N1cnJ5ID8gdW5kZWZpbmVkIDogYXJncztcblxuICAgICAgICAgICAgYml0bWFzayB8PSAoaXNDdXJyeSA/IFBBUlRJQUxfRkxBRyA6IFBBUlRJQUxfUklHSFRfRkxBRyk7XG4gICAgICAgICAgICBiaXRtYXNrICY9IH4oaXNDdXJyeSA/IFBBUlRJQUxfUklHSFRfRkxBRyA6IFBBUlRJQUxfRkxBRyk7XG5cbiAgICAgICAgICAgIGlmICghaXNDdXJyeUJvdW5kKSB7XG4gICAgICAgICAgICAgIGJpdG1hc2sgJj0gfihCSU5EX0ZMQUcgfCBCSU5EX0tFWV9GTEFHKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBuZXdEYXRhID0gW2Z1bmMsIGJpdG1hc2ssIHRoaXNBcmcsIG5ld1BhcnRpYWxzLCBuZXdzSG9sZGVycywgbmV3UGFydGlhbHNSaWdodCwgbmV3SG9sZGVyc1JpZ2h0LCBuZXdBcmdQb3MsIGFyeSwgbmV3QXJpdHldLFxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGNyZWF0ZUh5YnJpZFdyYXBwZXIuYXBwbHkodW5kZWZpbmVkLCBuZXdEYXRhKTtcblxuICAgICAgICAgICAgaWYgKGlzTGF6aWFibGUoZnVuYykpIHtcbiAgICAgICAgICAgICAgc2V0RGF0YShyZXN1bHQsIG5ld0RhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzdWx0LnBsYWNlaG9sZGVyID0gcGxhY2Vob2xkZXI7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgdGhpc0JpbmRpbmcgPSBpc0JpbmQgPyB0aGlzQXJnIDogdGhpcyxcbiAgICAgICAgICAgIGZuID0gaXNCaW5kS2V5ID8gdGhpc0JpbmRpbmdbZnVuY10gOiBmdW5jO1xuXG4gICAgICAgIGlmIChhcmdQb3MpIHtcbiAgICAgICAgICBhcmdzID0gcmVvcmRlcihhcmdzLCBhcmdQb3MpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0FyeSAmJiBhcnkgPCBhcmdzLmxlbmd0aCkge1xuICAgICAgICAgIGFyZ3MubGVuZ3RoID0gYXJ5O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzICYmIHRoaXMgIT09IHJvb3QgJiYgdGhpcyBpbnN0YW5jZW9mIHdyYXBwZXIpIHtcbiAgICAgICAgICBmbiA9IEN0b3IgfHwgY3JlYXRlQ3RvcldyYXBwZXIoZnVuYyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZuLmFwcGx5KHRoaXNCaW5kaW5nLCBhcmdzKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB3cmFwcGVyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgdGhlIHBhZGRpbmcgcmVxdWlyZWQgZm9yIGBzdHJpbmdgIGJhc2VkIG9uIHRoZSBnaXZlbiBgbGVuZ3RoYC5cbiAgICAgKiBUaGUgYGNoYXJzYCBzdHJpbmcgaXMgdHJ1bmNhdGVkIGlmIHRoZSBudW1iZXIgb2YgY2hhcmFjdGVycyBleGNlZWRzIGBsZW5ndGhgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIFRoZSBzdHJpbmcgdG8gY3JlYXRlIHBhZGRpbmcgZm9yLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoPTBdIFRoZSBwYWRkaW5nIGxlbmd0aC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2NoYXJzPScgJ10gVGhlIHN0cmluZyB1c2VkIGFzIHBhZGRpbmcuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgcGFkIGZvciBgc3RyaW5nYC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVQYWRkaW5nKHN0cmluZywgbGVuZ3RoLCBjaGFycykge1xuICAgICAgdmFyIHN0ckxlbmd0aCA9IHN0cmluZy5sZW5ndGg7XG4gICAgICBsZW5ndGggPSArbGVuZ3RoO1xuXG4gICAgICBpZiAoc3RyTGVuZ3RoID49IGxlbmd0aCB8fCAhbmF0aXZlSXNGaW5pdGUobGVuZ3RoKSkge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgICB9XG4gICAgICB2YXIgcGFkTGVuZ3RoID0gbGVuZ3RoIC0gc3RyTGVuZ3RoO1xuICAgICAgY2hhcnMgPSBjaGFycyA9PSBudWxsID8gJyAnIDogKGNoYXJzICsgJycpO1xuICAgICAgcmV0dXJuIHJlcGVhdChjaGFycywgbmF0aXZlQ2VpbChwYWRMZW5ndGggLyBjaGFycy5sZW5ndGgpKS5zbGljZSgwLCBwYWRMZW5ndGgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IHdyYXBzIGBmdW5jYCBhbmQgaW52b2tlcyBpdCB3aXRoIHRoZSBvcHRpb25hbCBgdGhpc2BcbiAgICAgKiBiaW5kaW5nIG9mIGB0aGlzQXJnYCBhbmQgdGhlIGBwYXJ0aWFsc2AgcHJlcGVuZGVkIHRvIHRob3NlIHByb3ZpZGVkIHRvXG4gICAgICogdGhlIHdyYXBwZXIuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHBhcnRpYWxseSBhcHBseSBhcmd1bWVudHMgdG8uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGJpdG1hc2sgVGhlIGJpdG1hc2sgb2YgZmxhZ3MuIFNlZSBgY3JlYXRlV3JhcHBlcmAgZm9yIG1vcmUgZGV0YWlscy5cbiAgICAgKiBAcGFyYW0geyp9IHRoaXNBcmcgVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBmdW5jYC5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBwYXJ0aWFscyBUaGUgYXJndW1lbnRzIHRvIHByZXBlbmQgdG8gdGhvc2UgcHJvdmlkZWQgdG8gdGhlIG5ldyBmdW5jdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBib3VuZCBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVQYXJ0aWFsV3JhcHBlcihmdW5jLCBiaXRtYXNrLCB0aGlzQXJnLCBwYXJ0aWFscykge1xuICAgICAgdmFyIGlzQmluZCA9IGJpdG1hc2sgJiBCSU5EX0ZMQUcsXG4gICAgICAgICAgQ3RvciA9IGNyZWF0ZUN0b3JXcmFwcGVyKGZ1bmMpO1xuXG4gICAgICBmdW5jdGlvbiB3cmFwcGVyKCkge1xuICAgICAgICAvLyBBdm9pZCBgYXJndW1lbnRzYCBvYmplY3QgdXNlIGRpc3F1YWxpZnlpbmcgb3B0aW1pemF0aW9ucyBieVxuICAgICAgICAvLyBjb252ZXJ0aW5nIGl0IHRvIGFuIGFycmF5IGJlZm9yZSBwcm92aWRpbmcgaXQgYGZ1bmNgLlxuICAgICAgICB2YXIgYXJnc0luZGV4ID0gLTEsXG4gICAgICAgICAgICBhcmdzTGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aCxcbiAgICAgICAgICAgIGxlZnRJbmRleCA9IC0xLFxuICAgICAgICAgICAgbGVmdExlbmd0aCA9IHBhcnRpYWxzLmxlbmd0aCxcbiAgICAgICAgICAgIGFyZ3MgPSBBcnJheShsZWZ0TGVuZ3RoICsgYXJnc0xlbmd0aCk7XG5cbiAgICAgICAgd2hpbGUgKCsrbGVmdEluZGV4IDwgbGVmdExlbmd0aCkge1xuICAgICAgICAgIGFyZ3NbbGVmdEluZGV4XSA9IHBhcnRpYWxzW2xlZnRJbmRleF07XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKGFyZ3NMZW5ndGgtLSkge1xuICAgICAgICAgIGFyZ3NbbGVmdEluZGV4KytdID0gYXJndW1lbnRzWysrYXJnc0luZGV4XTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZm4gPSAodGhpcyAmJiB0aGlzICE9PSByb290ICYmIHRoaXMgaW5zdGFuY2VvZiB3cmFwcGVyKSA/IEN0b3IgOiBmdW5jO1xuICAgICAgICByZXR1cm4gZm4uYXBwbHkoaXNCaW5kID8gdGhpc0FyZyA6IHRoaXMsIGFyZ3MpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHdyYXBwZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGBfLmNlaWxgLCBgXy5mbG9vcmAsIG9yIGBfLnJvdW5kYCBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1ldGhvZE5hbWUgVGhlIG5hbWUgb2YgdGhlIGBNYXRoYCBtZXRob2QgdG8gdXNlIHdoZW4gcm91bmRpbmcuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgcm91bmQgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlUm91bmQobWV0aG9kTmFtZSkge1xuICAgICAgdmFyIGZ1bmMgPSBNYXRoW21ldGhvZE5hbWVdO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKG51bWJlciwgcHJlY2lzaW9uKSB7XG4gICAgICAgIHByZWNpc2lvbiA9IHByZWNpc2lvbiA9PT0gdW5kZWZpbmVkID8gMCA6ICgrcHJlY2lzaW9uIHx8IDApO1xuICAgICAgICBpZiAocHJlY2lzaW9uKSB7XG4gICAgICAgICAgcHJlY2lzaW9uID0gcG93KDEwLCBwcmVjaXNpb24pO1xuICAgICAgICAgIHJldHVybiBmdW5jKG51bWJlciAqIHByZWNpc2lvbikgLyBwcmVjaXNpb247XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZ1bmMobnVtYmVyKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGBfLnNvcnRlZEluZGV4YCBvciBgXy5zb3J0ZWRMYXN0SW5kZXhgIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtyZXRIaWdoZXN0XSBTcGVjaWZ5IHJldHVybmluZyB0aGUgaGlnaGVzdCBxdWFsaWZpZWQgaW5kZXguXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgaW5kZXggZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlU29ydGVkSW5kZXgocmV0SGlnaGVzdCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGFycmF5LCB2YWx1ZSwgaXRlcmF0ZWUsIHRoaXNBcmcpIHtcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gZ2V0Q2FsbGJhY2soaXRlcmF0ZWUpO1xuICAgICAgICByZXR1cm4gKGl0ZXJhdGVlID09IG51bGwgJiYgY2FsbGJhY2sgPT09IGJhc2VDYWxsYmFjaylcbiAgICAgICAgICA/IGJpbmFyeUluZGV4KGFycmF5LCB2YWx1ZSwgcmV0SGlnaGVzdClcbiAgICAgICAgICA6IGJpbmFyeUluZGV4QnkoYXJyYXksIHZhbHVlLCBjYWxsYmFjayhpdGVyYXRlZSwgdGhpc0FyZywgMSksIHJldEhpZ2hlc3QpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBlaXRoZXIgY3VycmllcyBvciBpbnZva2VzIGBmdW5jYCB3aXRoIG9wdGlvbmFsXG4gICAgICogYHRoaXNgIGJpbmRpbmcgYW5kIHBhcnRpYWxseSBhcHBsaWVkIGFyZ3VtZW50cy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxzdHJpbmd9IGZ1bmMgVGhlIGZ1bmN0aW9uIG9yIG1ldGhvZCBuYW1lIHRvIHJlZmVyZW5jZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYml0bWFzayBUaGUgYml0bWFzayBvZiBmbGFncy5cbiAgICAgKiAgVGhlIGJpdG1hc2sgbWF5IGJlIGNvbXBvc2VkIG9mIHRoZSBmb2xsb3dpbmcgZmxhZ3M6XG4gICAgICogICAgIDEgLSBgXy5iaW5kYFxuICAgICAqICAgICAyIC0gYF8uYmluZEtleWBcbiAgICAgKiAgICAgNCAtIGBfLmN1cnJ5YCBvciBgXy5jdXJyeVJpZ2h0YCBvZiBhIGJvdW5kIGZ1bmN0aW9uXG4gICAgICogICAgIDggLSBgXy5jdXJyeWBcbiAgICAgKiAgICAxNiAtIGBfLmN1cnJ5UmlnaHRgXG4gICAgICogICAgMzIgLSBgXy5wYXJ0aWFsYFxuICAgICAqICAgIDY0IC0gYF8ucGFydGlhbFJpZ2h0YFxuICAgICAqICAgMTI4IC0gYF8ucmVhcmdgXG4gICAgICogICAyNTYgLSBgXy5hcnlgXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBmdW5jYC5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbcGFydGlhbHNdIFRoZSBhcmd1bWVudHMgdG8gYmUgcGFydGlhbGx5IGFwcGxpZWQuXG4gICAgICogQHBhcmFtIHtBcnJheX0gW2hvbGRlcnNdIFRoZSBgcGFydGlhbHNgIHBsYWNlaG9sZGVyIGluZGV4ZXMuXG4gICAgICogQHBhcmFtIHtBcnJheX0gW2FyZ1Bvc10gVGhlIGFyZ3VtZW50IHBvc2l0aW9ucyBvZiB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbYXJ5XSBUaGUgYXJpdHkgY2FwIG9mIGBmdW5jYC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2FyaXR5XSBUaGUgYXJpdHkgb2YgYGZ1bmNgLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHdyYXBwZWQgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlV3JhcHBlcihmdW5jLCBiaXRtYXNrLCB0aGlzQXJnLCBwYXJ0aWFscywgaG9sZGVycywgYXJnUG9zLCBhcnksIGFyaXR5KSB7XG4gICAgICB2YXIgaXNCaW5kS2V5ID0gYml0bWFzayAmIEJJTkRfS0VZX0ZMQUc7XG4gICAgICBpZiAoIWlzQmluZEtleSAmJiB0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcbiAgICAgIH1cbiAgICAgIHZhciBsZW5ndGggPSBwYXJ0aWFscyA/IHBhcnRpYWxzLmxlbmd0aCA6IDA7XG4gICAgICBpZiAoIWxlbmd0aCkge1xuICAgICAgICBiaXRtYXNrICY9IH4oUEFSVElBTF9GTEFHIHwgUEFSVElBTF9SSUdIVF9GTEFHKTtcbiAgICAgICAgcGFydGlhbHMgPSBob2xkZXJzID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgbGVuZ3RoIC09IChob2xkZXJzID8gaG9sZGVycy5sZW5ndGggOiAwKTtcbiAgICAgIGlmIChiaXRtYXNrICYgUEFSVElBTF9SSUdIVF9GTEFHKSB7XG4gICAgICAgIHZhciBwYXJ0aWFsc1JpZ2h0ID0gcGFydGlhbHMsXG4gICAgICAgICAgICBob2xkZXJzUmlnaHQgPSBob2xkZXJzO1xuXG4gICAgICAgIHBhcnRpYWxzID0gaG9sZGVycyA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIHZhciBkYXRhID0gaXNCaW5kS2V5ID8gdW5kZWZpbmVkIDogZ2V0RGF0YShmdW5jKSxcbiAgICAgICAgICBuZXdEYXRhID0gW2Z1bmMsIGJpdG1hc2ssIHRoaXNBcmcsIHBhcnRpYWxzLCBob2xkZXJzLCBwYXJ0aWFsc1JpZ2h0LCBob2xkZXJzUmlnaHQsIGFyZ1BvcywgYXJ5LCBhcml0eV07XG5cbiAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgIG1lcmdlRGF0YShuZXdEYXRhLCBkYXRhKTtcbiAgICAgICAgYml0bWFzayA9IG5ld0RhdGFbMV07XG4gICAgICAgIGFyaXR5ID0gbmV3RGF0YVs5XTtcbiAgICAgIH1cbiAgICAgIG5ld0RhdGFbOV0gPSBhcml0eSA9PSBudWxsXG4gICAgICAgID8gKGlzQmluZEtleSA/IDAgOiBmdW5jLmxlbmd0aClcbiAgICAgICAgOiAobmF0aXZlTWF4KGFyaXR5IC0gbGVuZ3RoLCAwKSB8fCAwKTtcblxuICAgICAgaWYgKGJpdG1hc2sgPT0gQklORF9GTEFHKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBjcmVhdGVCaW5kV3JhcHBlcihuZXdEYXRhWzBdLCBuZXdEYXRhWzJdKTtcbiAgICAgIH0gZWxzZSBpZiAoKGJpdG1hc2sgPT0gUEFSVElBTF9GTEFHIHx8IGJpdG1hc2sgPT0gKEJJTkRfRkxBRyB8IFBBUlRJQUxfRkxBRykpICYmICFuZXdEYXRhWzRdLmxlbmd0aCkge1xuICAgICAgICByZXN1bHQgPSBjcmVhdGVQYXJ0aWFsV3JhcHBlci5hcHBseSh1bmRlZmluZWQsIG5ld0RhdGEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0ID0gY3JlYXRlSHlicmlkV3JhcHBlci5hcHBseSh1bmRlZmluZWQsIG5ld0RhdGEpO1xuICAgICAgfVxuICAgICAgdmFyIHNldHRlciA9IGRhdGEgPyBiYXNlU2V0RGF0YSA6IHNldERhdGE7XG4gICAgICByZXR1cm4gc2V0dGVyKHJlc3VsdCwgbmV3RGF0YSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlSXNFcXVhbERlZXBgIGZvciBhcnJheXMgd2l0aCBzdXBwb3J0IGZvclxuICAgICAqIHBhcnRpYWwgZGVlcCBjb21wYXJpc29ucy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGNvbXBhcmUuXG4gICAgICogQHBhcmFtIHtBcnJheX0gb3RoZXIgVGhlIG90aGVyIGFycmF5IHRvIGNvbXBhcmUuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZXF1YWxGdW5jIFRoZSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgZXF1aXZhbGVudHMgb2YgdmFsdWVzLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmluZyBhcnJheXMuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbaXNMb29zZV0gU3BlY2lmeSBwZXJmb3JtaW5nIHBhcnRpYWwgY29tcGFyaXNvbnMuXG4gICAgICogQHBhcmFtIHtBcnJheX0gW3N0YWNrQV0gVHJhY2tzIHRyYXZlcnNlZCBgdmFsdWVgIG9iamVjdHMuXG4gICAgICogQHBhcmFtIHtBcnJheX0gW3N0YWNrQl0gVHJhY2tzIHRyYXZlcnNlZCBgb3RoZXJgIG9iamVjdHMuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBhcnJheXMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBlcXVhbEFycmF5cyhhcnJheSwgb3RoZXIsIGVxdWFsRnVuYywgY3VzdG9taXplciwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGFyckxlbmd0aCA9IGFycmF5Lmxlbmd0aCxcbiAgICAgICAgICBvdGhMZW5ndGggPSBvdGhlci5sZW5ndGg7XG5cbiAgICAgIGlmIChhcnJMZW5ndGggIT0gb3RoTGVuZ3RoICYmICEoaXNMb29zZSAmJiBvdGhMZW5ndGggPiBhcnJMZW5ndGgpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIC8vIElnbm9yZSBub24taW5kZXggcHJvcGVydGllcy5cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgYXJyTGVuZ3RoKSB7XG4gICAgICAgIHZhciBhcnJWYWx1ZSA9IGFycmF5W2luZGV4XSxcbiAgICAgICAgICAgIG90aFZhbHVlID0gb3RoZXJbaW5kZXhdLFxuICAgICAgICAgICAgcmVzdWx0ID0gY3VzdG9taXplciA/IGN1c3RvbWl6ZXIoaXNMb29zZSA/IG90aFZhbHVlIDogYXJyVmFsdWUsIGlzTG9vc2UgPyBhcnJWYWx1ZSA6IG90aFZhbHVlLCBpbmRleCkgOiB1bmRlZmluZWQ7XG5cbiAgICAgICAgaWYgKHJlc3VsdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBSZWN1cnNpdmVseSBjb21wYXJlIGFycmF5cyAoc3VzY2VwdGlibGUgdG8gY2FsbCBzdGFjayBsaW1pdHMpLlxuICAgICAgICBpZiAoaXNMb29zZSkge1xuICAgICAgICAgIGlmICghYXJyYXlTb21lKG90aGVyLCBmdW5jdGlvbihvdGhWYWx1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhcnJWYWx1ZSA9PT0gb3RoVmFsdWUgfHwgZXF1YWxGdW5jKGFyclZhbHVlLCBvdGhWYWx1ZSwgY3VzdG9taXplciwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpO1xuICAgICAgICAgICAgICB9KSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICghKGFyclZhbHVlID09PSBvdGhWYWx1ZSB8fCBlcXVhbEZ1bmMoYXJyVmFsdWUsIG90aFZhbHVlLCBjdXN0b21pemVyLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQikpKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VJc0VxdWFsRGVlcGAgZm9yIGNvbXBhcmluZyBvYmplY3RzIG9mXG4gICAgICogdGhlIHNhbWUgYHRvU3RyaW5nVGFnYC5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIGZ1bmN0aW9uIG9ubHkgc3VwcG9ydHMgY29tcGFyaW5nIHZhbHVlcyB3aXRoIHRhZ3Mgb2ZcbiAgICAgKiBgQm9vbGVhbmAsIGBEYXRlYCwgYEVycm9yYCwgYE51bWJlcmAsIGBSZWdFeHBgLCBvciBgU3RyaW5nYC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGNvbXBhcmUuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG90aGVyIFRoZSBvdGhlciBvYmplY3QgdG8gY29tcGFyZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGFnIFRoZSBgdG9TdHJpbmdUYWdgIG9mIHRoZSBvYmplY3RzIHRvIGNvbXBhcmUuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBvYmplY3RzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gZXF1YWxCeVRhZyhvYmplY3QsIG90aGVyLCB0YWcpIHtcbiAgICAgIHN3aXRjaCAodGFnKSB7XG4gICAgICAgIGNhc2UgYm9vbFRhZzpcbiAgICAgICAgY2FzZSBkYXRlVGFnOlxuICAgICAgICAgIC8vIENvZXJjZSBkYXRlcyBhbmQgYm9vbGVhbnMgdG8gbnVtYmVycywgZGF0ZXMgdG8gbWlsbGlzZWNvbmRzIGFuZCBib29sZWFuc1xuICAgICAgICAgIC8vIHRvIGAxYCBvciBgMGAgdHJlYXRpbmcgaW52YWxpZCBkYXRlcyBjb2VyY2VkIHRvIGBOYU5gIGFzIG5vdCBlcXVhbC5cbiAgICAgICAgICByZXR1cm4gK29iamVjdCA9PSArb3RoZXI7XG5cbiAgICAgICAgY2FzZSBlcnJvclRhZzpcbiAgICAgICAgICByZXR1cm4gb2JqZWN0Lm5hbWUgPT0gb3RoZXIubmFtZSAmJiBvYmplY3QubWVzc2FnZSA9PSBvdGhlci5tZXNzYWdlO1xuXG4gICAgICAgIGNhc2UgbnVtYmVyVGFnOlxuICAgICAgICAgIC8vIFRyZWF0IGBOYU5gIHZzLiBgTmFOYCBhcyBlcXVhbC5cbiAgICAgICAgICByZXR1cm4gKG9iamVjdCAhPSArb2JqZWN0KVxuICAgICAgICAgICAgPyBvdGhlciAhPSArb3RoZXJcbiAgICAgICAgICAgIDogb2JqZWN0ID09ICtvdGhlcjtcblxuICAgICAgICBjYXNlIHJlZ2V4cFRhZzpcbiAgICAgICAgY2FzZSBzdHJpbmdUYWc6XG4gICAgICAgICAgLy8gQ29lcmNlIHJlZ2V4ZXMgdG8gc3RyaW5ncyBhbmQgdHJlYXQgc3RyaW5ncyBwcmltaXRpdmVzIGFuZCBzdHJpbmdcbiAgICAgICAgICAvLyBvYmplY3RzIGFzIGVxdWFsLiBTZWUgaHR0cHM6Ly9lczUuZ2l0aHViLmlvLyN4MTUuMTAuNi40IGZvciBtb3JlIGRldGFpbHMuXG4gICAgICAgICAgcmV0dXJuIG9iamVjdCA9PSAob3RoZXIgKyAnJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlSXNFcXVhbERlZXBgIGZvciBvYmplY3RzIHdpdGggc3VwcG9ydCBmb3JcbiAgICAgKiBwYXJ0aWFsIGRlZXAgY29tcGFyaXNvbnMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjb21wYXJlLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvdGhlciBUaGUgb3RoZXIgb2JqZWN0IHRvIGNvbXBhcmUuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZXF1YWxGdW5jIFRoZSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgZXF1aXZhbGVudHMgb2YgdmFsdWVzLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmluZyB2YWx1ZXMuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbaXNMb29zZV0gU3BlY2lmeSBwZXJmb3JtaW5nIHBhcnRpYWwgY29tcGFyaXNvbnMuXG4gICAgICogQHBhcmFtIHtBcnJheX0gW3N0YWNrQV0gVHJhY2tzIHRyYXZlcnNlZCBgdmFsdWVgIG9iamVjdHMuXG4gICAgICogQHBhcmFtIHtBcnJheX0gW3N0YWNrQl0gVHJhY2tzIHRyYXZlcnNlZCBgb3RoZXJgIG9iamVjdHMuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBvYmplY3RzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gZXF1YWxPYmplY3RzKG9iamVjdCwgb3RoZXIsIGVxdWFsRnVuYywgY3VzdG9taXplciwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpIHtcbiAgICAgIHZhciBvYmpQcm9wcyA9IGtleXMob2JqZWN0KSxcbiAgICAgICAgICBvYmpMZW5ndGggPSBvYmpQcm9wcy5sZW5ndGgsXG4gICAgICAgICAgb3RoUHJvcHMgPSBrZXlzKG90aGVyKSxcbiAgICAgICAgICBvdGhMZW5ndGggPSBvdGhQcm9wcy5sZW5ndGg7XG5cbiAgICAgIGlmIChvYmpMZW5ndGggIT0gb3RoTGVuZ3RoICYmICFpc0xvb3NlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHZhciBpbmRleCA9IG9iakxlbmd0aDtcbiAgICAgIHdoaWxlIChpbmRleC0tKSB7XG4gICAgICAgIHZhciBrZXkgPSBvYmpQcm9wc1tpbmRleF07XG4gICAgICAgIGlmICghKGlzTG9vc2UgPyBrZXkgaW4gb3RoZXIgOiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG90aGVyLCBrZXkpKSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdmFyIHNraXBDdG9yID0gaXNMb29zZTtcbiAgICAgIHdoaWxlICgrK2luZGV4IDwgb2JqTGVuZ3RoKSB7XG4gICAgICAgIGtleSA9IG9ialByb3BzW2luZGV4XTtcbiAgICAgICAgdmFyIG9ialZhbHVlID0gb2JqZWN0W2tleV0sXG4gICAgICAgICAgICBvdGhWYWx1ZSA9IG90aGVyW2tleV0sXG4gICAgICAgICAgICByZXN1bHQgPSBjdXN0b21pemVyID8gY3VzdG9taXplcihpc0xvb3NlID8gb3RoVmFsdWUgOiBvYmpWYWx1ZSwgaXNMb29zZT8gb2JqVmFsdWUgOiBvdGhWYWx1ZSwga2V5KSA6IHVuZGVmaW5lZDtcblxuICAgICAgICAvLyBSZWN1cnNpdmVseSBjb21wYXJlIG9iamVjdHMgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKS5cbiAgICAgICAgaWYgKCEocmVzdWx0ID09PSB1bmRlZmluZWQgPyBlcXVhbEZ1bmMob2JqVmFsdWUsIG90aFZhbHVlLCBjdXN0b21pemVyLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQikgOiByZXN1bHQpKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHNraXBDdG9yIHx8IChza2lwQ3RvciA9IGtleSA9PSAnY29uc3RydWN0b3InKTtcbiAgICAgIH1cbiAgICAgIGlmICghc2tpcEN0b3IpIHtcbiAgICAgICAgdmFyIG9iakN0b3IgPSBvYmplY3QuY29uc3RydWN0b3IsXG4gICAgICAgICAgICBvdGhDdG9yID0gb3RoZXIuY29uc3RydWN0b3I7XG5cbiAgICAgICAgLy8gTm9uIGBPYmplY3RgIG9iamVjdCBpbnN0YW5jZXMgd2l0aCBkaWZmZXJlbnQgY29uc3RydWN0b3JzIGFyZSBub3QgZXF1YWwuXG4gICAgICAgIGlmIChvYmpDdG9yICE9IG90aEN0b3IgJiZcbiAgICAgICAgICAgICgnY29uc3RydWN0b3InIGluIG9iamVjdCAmJiAnY29uc3RydWN0b3InIGluIG90aGVyKSAmJlxuICAgICAgICAgICAgISh0eXBlb2Ygb2JqQ3RvciA9PSAnZnVuY3Rpb24nICYmIG9iakN0b3IgaW5zdGFuY2VvZiBvYmpDdG9yICYmXG4gICAgICAgICAgICAgIHR5cGVvZiBvdGhDdG9yID09ICdmdW5jdGlvbicgJiYgb3RoQ3RvciBpbnN0YW5jZW9mIG90aEN0b3IpKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBhcHByb3ByaWF0ZSBcImNhbGxiYWNrXCIgZnVuY3Rpb24uIElmIHRoZSBgXy5jYWxsYmFja2AgbWV0aG9kIGlzXG4gICAgICogY3VzdG9taXplZCB0aGlzIGZ1bmN0aW9uIHJldHVybnMgdGhlIGN1c3RvbSBtZXRob2QsIG90aGVyd2lzZSBpdCByZXR1cm5zXG4gICAgICogdGhlIGBiYXNlQ2FsbGJhY2tgIGZ1bmN0aW9uLiBJZiBhcmd1bWVudHMgYXJlIHByb3ZpZGVkIHRoZSBjaG9zZW4gZnVuY3Rpb25cbiAgICAgKiBpcyBpbnZva2VkIHdpdGggdGhlbSBhbmQgaXRzIHJlc3VsdCBpcyByZXR1cm5lZC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBjaG9zZW4gZnVuY3Rpb24gb3IgaXRzIHJlc3VsdC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRDYWxsYmFjayhmdW5jLCB0aGlzQXJnLCBhcmdDb3VudCkge1xuICAgICAgdmFyIHJlc3VsdCA9IGxvZGFzaC5jYWxsYmFjayB8fCBjYWxsYmFjaztcbiAgICAgIHJlc3VsdCA9IHJlc3VsdCA9PT0gY2FsbGJhY2sgPyBiYXNlQ2FsbGJhY2sgOiByZXN1bHQ7XG4gICAgICByZXR1cm4gYXJnQ291bnQgPyByZXN1bHQoZnVuYywgdGhpc0FyZywgYXJnQ291bnQpIDogcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgbWV0YWRhdGEgZm9yIGBmdW5jYC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gcXVlcnkuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIG1ldGFkYXRhIGZvciBgZnVuY2AuXG4gICAgICovXG4gICAgdmFyIGdldERhdGEgPSAhbWV0YU1hcCA/IG5vb3AgOiBmdW5jdGlvbihmdW5jKSB7XG4gICAgICByZXR1cm4gbWV0YU1hcC5nZXQoZnVuYyk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIG5hbWUgb2YgYGZ1bmNgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBxdWVyeS5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBmdW5jdGlvbiBuYW1lLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldEZ1bmNOYW1lKGZ1bmMpIHtcbiAgICAgIHZhciByZXN1bHQgPSBmdW5jLm5hbWUsXG4gICAgICAgICAgYXJyYXkgPSByZWFsTmFtZXNbcmVzdWx0XSxcbiAgICAgICAgICBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDA7XG5cbiAgICAgIHdoaWxlIChsZW5ndGgtLSkge1xuICAgICAgICB2YXIgZGF0YSA9IGFycmF5W2xlbmd0aF0sXG4gICAgICAgICAgICBvdGhlckZ1bmMgPSBkYXRhLmZ1bmM7XG4gICAgICAgIGlmIChvdGhlckZ1bmMgPT0gbnVsbCB8fCBvdGhlckZ1bmMgPT0gZnVuYykge1xuICAgICAgICAgIHJldHVybiBkYXRhLm5hbWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgYXBwcm9wcmlhdGUgXCJpbmRleE9mXCIgZnVuY3Rpb24uIElmIHRoZSBgXy5pbmRleE9mYCBtZXRob2QgaXNcbiAgICAgKiBjdXN0b21pemVkIHRoaXMgZnVuY3Rpb24gcmV0dXJucyB0aGUgY3VzdG9tIG1ldGhvZCwgb3RoZXJ3aXNlIGl0IHJldHVybnNcbiAgICAgKiB0aGUgYGJhc2VJbmRleE9mYCBmdW5jdGlvbi4gSWYgYXJndW1lbnRzIGFyZSBwcm92aWRlZCB0aGUgY2hvc2VuIGZ1bmN0aW9uXG4gICAgICogaXMgaW52b2tlZCB3aXRoIHRoZW0gYW5kIGl0cyByZXN1bHQgaXMgcmV0dXJuZWQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbnxudW1iZXJ9IFJldHVybnMgdGhlIGNob3NlbiBmdW5jdGlvbiBvciBpdHMgcmVzdWx0LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldEluZGV4T2YoY29sbGVjdGlvbiwgdGFyZ2V0LCBmcm9tSW5kZXgpIHtcbiAgICAgIHZhciByZXN1bHQgPSBsb2Rhc2guaW5kZXhPZiB8fCBpbmRleE9mO1xuICAgICAgcmVzdWx0ID0gcmVzdWx0ID09PSBpbmRleE9mID8gYmFzZUluZGV4T2YgOiByZXN1bHQ7XG4gICAgICByZXR1cm4gY29sbGVjdGlvbiA/IHJlc3VsdChjb2xsZWN0aW9uLCB0YXJnZXQsIGZyb21JbmRleCkgOiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgXCJsZW5ndGhcIiBwcm9wZXJ0eSB2YWx1ZSBvZiBgb2JqZWN0YC5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gYXZvaWQgYSBbSklUIGJ1Z10oaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTE0Mjc5MilcbiAgICAgKiB0aGF0IGFmZmVjdHMgU2FmYXJpIG9uIGF0IGxlYXN0IGlPUyA4LjEtOC4zIEFSTTY0LlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIFwibGVuZ3RoXCIgdmFsdWUuXG4gICAgICovXG4gICAgdmFyIGdldExlbmd0aCA9IGJhc2VQcm9wZXJ0eSgnbGVuZ3RoJyk7XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBwcm9wZXJ5IG5hbWVzLCB2YWx1ZXMsIGFuZCBjb21wYXJlIGZsYWdzIG9mIGBvYmplY3RgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBtYXRjaCBkYXRhIG9mIGBvYmplY3RgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldE1hdGNoRGF0YShvYmplY3QpIHtcbiAgICAgIHZhciByZXN1bHQgPSBwYWlycyhvYmplY3QpLFxuICAgICAgICAgIGxlbmd0aCA9IHJlc3VsdC5sZW5ndGg7XG5cbiAgICAgIHdoaWxlIChsZW5ndGgtLSkge1xuICAgICAgICByZXN1bHRbbGVuZ3RoXVsyXSA9IGlzU3RyaWN0Q29tcGFyYWJsZShyZXN1bHRbbGVuZ3RoXVsxXSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIG5hdGl2ZSBmdW5jdGlvbiBhdCBga2V5YCBvZiBgb2JqZWN0YC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgbWV0aG9kIHRvIGdldC5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZnVuY3Rpb24gaWYgaXQncyBuYXRpdmUsIGVsc2UgYHVuZGVmaW5lZGAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0TmF0aXZlKG9iamVjdCwga2V5KSB7XG4gICAgICB2YXIgdmFsdWUgPSBvYmplY3QgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG9iamVjdFtrZXldO1xuICAgICAgcmV0dXJuIGlzTmF0aXZlKHZhbHVlKSA/IHZhbHVlIDogdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHZpZXcsIGFwcGx5aW5nIGFueSBgdHJhbnNmb3Jtc2AgdG8gdGhlIGBzdGFydGAgYW5kIGBlbmRgIHBvc2l0aW9ucy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0IFRoZSBzdGFydCBvZiB0aGUgdmlldy5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZW5kIFRoZSBlbmQgb2YgdGhlIHZpZXcuXG4gICAgICogQHBhcmFtIHtBcnJheX0gdHJhbnNmb3JtcyBUaGUgdHJhbnNmb3JtYXRpb25zIHRvIGFwcGx5IHRvIHRoZSB2aWV3LlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGBzdGFydGAgYW5kIGBlbmRgXG4gICAgICogIHBvc2l0aW9ucyBvZiB0aGUgdmlldy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRWaWV3KHN0YXJ0LCBlbmQsIHRyYW5zZm9ybXMpIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IHRyYW5zZm9ybXMubGVuZ3RoO1xuXG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICB2YXIgZGF0YSA9IHRyYW5zZm9ybXNbaW5kZXhdLFxuICAgICAgICAgICAgc2l6ZSA9IGRhdGEuc2l6ZTtcblxuICAgICAgICBzd2l0Y2ggKGRhdGEudHlwZSkge1xuICAgICAgICAgIGNhc2UgJ2Ryb3AnOiAgICAgIHN0YXJ0ICs9IHNpemU7IGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ2Ryb3BSaWdodCc6IGVuZCAtPSBzaXplOyBicmVhaztcbiAgICAgICAgICBjYXNlICd0YWtlJzogICAgICBlbmQgPSBuYXRpdmVNaW4oZW5kLCBzdGFydCArIHNpemUpOyBicmVhaztcbiAgICAgICAgICBjYXNlICd0YWtlUmlnaHQnOiBzdGFydCA9IG5hdGl2ZU1heChzdGFydCwgZW5kIC0gc2l6ZSk7IGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4geyAnc3RhcnQnOiBzdGFydCwgJ2VuZCc6IGVuZCB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemVzIGFuIGFycmF5IGNsb25lLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gY2xvbmUuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBpbml0aWFsaXplZCBjbG9uZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpbml0Q2xvbmVBcnJheShhcnJheSkge1xuICAgICAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aCxcbiAgICAgICAgICByZXN1bHQgPSBuZXcgYXJyYXkuY29uc3RydWN0b3IobGVuZ3RoKTtcblxuICAgICAgLy8gQWRkIGFycmF5IHByb3BlcnRpZXMgYXNzaWduZWQgYnkgYFJlZ0V4cCNleGVjYC5cbiAgICAgIGlmIChsZW5ndGggJiYgdHlwZW9mIGFycmF5WzBdID09ICdzdHJpbmcnICYmIGhhc093blByb3BlcnR5LmNhbGwoYXJyYXksICdpbmRleCcpKSB7XG4gICAgICAgIHJlc3VsdC5pbmRleCA9IGFycmF5LmluZGV4O1xuICAgICAgICByZXN1bHQuaW5wdXQgPSBhcnJheS5pbnB1dDtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZXMgYW4gb2JqZWN0IGNsb25lLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gY2xvbmUuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgaW5pdGlhbGl6ZWQgY2xvbmUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gaW5pdENsb25lT2JqZWN0KG9iamVjdCkge1xuICAgICAgdmFyIEN0b3IgPSBvYmplY3QuY29uc3RydWN0b3I7XG4gICAgICBpZiAoISh0eXBlb2YgQ3RvciA9PSAnZnVuY3Rpb24nICYmIEN0b3IgaW5zdGFuY2VvZiBDdG9yKSkge1xuICAgICAgICBDdG9yID0gT2JqZWN0O1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBDdG9yO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemVzIGFuIG9iamVjdCBjbG9uZSBiYXNlZCBvbiBpdHMgYHRvU3RyaW5nVGFnYC5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIGZ1bmN0aW9uIG9ubHkgc3VwcG9ydHMgY2xvbmluZyB2YWx1ZXMgd2l0aCB0YWdzIG9mXG4gICAgICogYEJvb2xlYW5gLCBgRGF0ZWAsIGBFcnJvcmAsIGBOdW1iZXJgLCBgUmVnRXhwYCwgb3IgYFN0cmluZ2AuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjbG9uZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGFnIFRoZSBgdG9TdHJpbmdUYWdgIG9mIHRoZSBvYmplY3QgdG8gY2xvbmUuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbaXNEZWVwXSBTcGVjaWZ5IGEgZGVlcCBjbG9uZS5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBpbml0aWFsaXplZCBjbG9uZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpbml0Q2xvbmVCeVRhZyhvYmplY3QsIHRhZywgaXNEZWVwKSB7XG4gICAgICB2YXIgQ3RvciA9IG9iamVjdC5jb25zdHJ1Y3RvcjtcbiAgICAgIHN3aXRjaCAodGFnKSB7XG4gICAgICAgIGNhc2UgYXJyYXlCdWZmZXJUYWc6XG4gICAgICAgICAgcmV0dXJuIGJ1ZmZlckNsb25lKG9iamVjdCk7XG5cbiAgICAgICAgY2FzZSBib29sVGFnOlxuICAgICAgICBjYXNlIGRhdGVUYWc6XG4gICAgICAgICAgcmV0dXJuIG5ldyBDdG9yKCtvYmplY3QpO1xuXG4gICAgICAgIGNhc2UgZmxvYXQzMlRhZzogY2FzZSBmbG9hdDY0VGFnOlxuICAgICAgICBjYXNlIGludDhUYWc6IGNhc2UgaW50MTZUYWc6IGNhc2UgaW50MzJUYWc6XG4gICAgICAgIGNhc2UgdWludDhUYWc6IGNhc2UgdWludDhDbGFtcGVkVGFnOiBjYXNlIHVpbnQxNlRhZzogY2FzZSB1aW50MzJUYWc6XG4gICAgICAgICAgdmFyIGJ1ZmZlciA9IG9iamVjdC5idWZmZXI7XG4gICAgICAgICAgcmV0dXJuIG5ldyBDdG9yKGlzRGVlcCA/IGJ1ZmZlckNsb25lKGJ1ZmZlcikgOiBidWZmZXIsIG9iamVjdC5ieXRlT2Zmc2V0LCBvYmplY3QubGVuZ3RoKTtcblxuICAgICAgICBjYXNlIG51bWJlclRhZzpcbiAgICAgICAgY2FzZSBzdHJpbmdUYWc6XG4gICAgICAgICAgcmV0dXJuIG5ldyBDdG9yKG9iamVjdCk7XG5cbiAgICAgICAgY2FzZSByZWdleHBUYWc6XG4gICAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBDdG9yKG9iamVjdC5zb3VyY2UsIHJlRmxhZ3MuZXhlYyhvYmplY3QpKTtcbiAgICAgICAgICByZXN1bHQubGFzdEluZGV4ID0gb2JqZWN0Lmxhc3RJbmRleDtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW52b2tlcyB0aGUgbWV0aG9kIGF0IGBwYXRoYCBvbiBgb2JqZWN0YC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICAgICAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBwYXRoIFRoZSBwYXRoIG9mIHRoZSBtZXRob2QgdG8gaW52b2tlLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFyZ3MgVGhlIGFyZ3VtZW50cyB0byBpbnZva2UgdGhlIG1ldGhvZCB3aXRoLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSByZXN1bHQgb2YgdGhlIGludm9rZWQgbWV0aG9kLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGludm9rZVBhdGgob2JqZWN0LCBwYXRoLCBhcmdzKSB7XG4gICAgICBpZiAob2JqZWN0ICE9IG51bGwgJiYgIWlzS2V5KHBhdGgsIG9iamVjdCkpIHtcbiAgICAgICAgcGF0aCA9IHRvUGF0aChwYXRoKTtcbiAgICAgICAgb2JqZWN0ID0gcGF0aC5sZW5ndGggPT0gMSA/IG9iamVjdCA6IGJhc2VHZXQob2JqZWN0LCBiYXNlU2xpY2UocGF0aCwgMCwgLTEpKTtcbiAgICAgICAgcGF0aCA9IGxhc3QocGF0aCk7XG4gICAgICB9XG4gICAgICB2YXIgZnVuYyA9IG9iamVjdCA9PSBudWxsID8gb2JqZWN0IDogb2JqZWN0W3BhdGhdO1xuICAgICAgcmV0dXJuIGZ1bmMgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IGZ1bmMuYXBwbHkob2JqZWN0LCBhcmdzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhcnJheS1saWtlLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhcnJheS1saWtlLCBlbHNlIGBmYWxzZWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNBcnJheUxpa2UodmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZSAhPSBudWxsICYmIGlzTGVuZ3RoKGdldExlbmd0aCh2YWx1ZSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgYXJyYXktbGlrZSBpbmRleC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGg9TUFYX1NBRkVfSU5URUdFUl0gVGhlIHVwcGVyIGJvdW5kcyBvZiBhIHZhbGlkIGluZGV4LlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgaW5kZXgsIGVsc2UgYGZhbHNlYC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc0luZGV4KHZhbHVlLCBsZW5ndGgpIHtcbiAgICAgIHZhbHVlID0gKHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJyB8fCByZUlzVWludC50ZXN0KHZhbHVlKSkgPyArdmFsdWUgOiAtMTtcbiAgICAgIGxlbmd0aCA9IGxlbmd0aCA9PSBudWxsID8gTUFYX1NBRkVfSU5URUdFUiA6IGxlbmd0aDtcbiAgICAgIHJldHVybiB2YWx1ZSA+IC0xICYmIHZhbHVlICUgMSA9PSAwICYmIHZhbHVlIDwgbGVuZ3RoO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiB0aGUgcHJvdmlkZWQgYXJndW1lbnRzIGFyZSBmcm9tIGFuIGl0ZXJhdGVlIGNhbGwuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHBvdGVudGlhbCBpdGVyYXRlZSB2YWx1ZSBhcmd1bWVudC5cbiAgICAgKiBAcGFyYW0geyp9IGluZGV4IFRoZSBwb3RlbnRpYWwgaXRlcmF0ZWUgaW5kZXggb3Iga2V5IGFyZ3VtZW50LlxuICAgICAqIEBwYXJhbSB7Kn0gb2JqZWN0IFRoZSBwb3RlbnRpYWwgaXRlcmF0ZWUgb2JqZWN0IGFyZ3VtZW50LlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYXJndW1lbnRzIGFyZSBmcm9tIGFuIGl0ZXJhdGVlIGNhbGwsIGVsc2UgYGZhbHNlYC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc0l0ZXJhdGVlQ2FsbCh2YWx1ZSwgaW5kZXgsIG9iamVjdCkge1xuICAgICAgaWYgKCFpc09iamVjdChvYmplY3QpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHZhciB0eXBlID0gdHlwZW9mIGluZGV4O1xuICAgICAgaWYgKHR5cGUgPT0gJ251bWJlcidcbiAgICAgICAgICA/IChpc0FycmF5TGlrZShvYmplY3QpICYmIGlzSW5kZXgoaW5kZXgsIG9iamVjdC5sZW5ndGgpKVxuICAgICAgICAgIDogKHR5cGUgPT0gJ3N0cmluZycgJiYgaW5kZXggaW4gb2JqZWN0KSkge1xuICAgICAgICB2YXIgb3RoZXIgPSBvYmplY3RbaW5kZXhdO1xuICAgICAgICByZXR1cm4gdmFsdWUgPT09IHZhbHVlID8gKHZhbHVlID09PSBvdGhlcikgOiAob3RoZXIgIT09IG90aGVyKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHByb3BlcnR5IG5hbWUgYW5kIG5vdCBhIHByb3BlcnR5IHBhdGguXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb2JqZWN0XSBUaGUgb2JqZWN0IHRvIHF1ZXJ5IGtleXMgb24uXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBwcm9wZXJ0eSBuYW1lLCBlbHNlIGBmYWxzZWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNLZXkodmFsdWUsIG9iamVjdCkge1xuICAgICAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gICAgICBpZiAoKHR5cGUgPT0gJ3N0cmluZycgJiYgcmVJc1BsYWluUHJvcC50ZXN0KHZhbHVlKSkgfHwgdHlwZSA9PSAnbnVtYmVyJykge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICB2YXIgcmVzdWx0ID0gIXJlSXNEZWVwUHJvcC50ZXN0KHZhbHVlKTtcbiAgICAgIHJldHVybiByZXN1bHQgfHwgKG9iamVjdCAhPSBudWxsICYmIHZhbHVlIGluIHRvT2JqZWN0KG9iamVjdCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgZnVuY2AgaGFzIGEgbGF6eSBjb3VudGVycGFydC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBmdW5jYCBoYXMgYSBsYXp5IGNvdW50ZXJwYXJ0LCBlbHNlIGBmYWxzZWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNMYXppYWJsZShmdW5jKSB7XG4gICAgICB2YXIgZnVuY05hbWUgPSBnZXRGdW5jTmFtZShmdW5jKTtcbiAgICAgIGlmICghKGZ1bmNOYW1lIGluIExhenlXcmFwcGVyLnByb3RvdHlwZSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgdmFyIG90aGVyID0gbG9kYXNoW2Z1bmNOYW1lXTtcbiAgICAgIGlmIChmdW5jID09PSBvdGhlcikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHZhciBkYXRhID0gZ2V0RGF0YShvdGhlcik7XG4gICAgICByZXR1cm4gISFkYXRhICYmIGZ1bmMgPT09IGRhdGFbMF07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBhcnJheS1saWtlIGxlbmd0aC5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIGZ1bmN0aW9uIGlzIGJhc2VkIG9uIFtgVG9MZW5ndGhgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy10b2xlbmd0aCkuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgbGVuZ3RoLCBlbHNlIGBmYWxzZWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNMZW5ndGgodmFsdWUpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgJiYgdmFsdWUgPiAtMSAmJiB2YWx1ZSAlIDEgPT0gMCAmJiB2YWx1ZSA8PSBNQVhfU0FGRV9JTlRFR0VSO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHN1aXRhYmxlIGZvciBzdHJpY3QgZXF1YWxpdHkgY29tcGFyaXNvbnMsIGkuZS4gYD09PWAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlmIHN1aXRhYmxlIGZvciBzdHJpY3RcbiAgICAgKiAgZXF1YWxpdHkgY29tcGFyaXNvbnMsIGVsc2UgYGZhbHNlYC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc1N0cmljdENvbXBhcmFibGUodmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZSA9PT0gdmFsdWUgJiYgIWlzT2JqZWN0KHZhbHVlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNZXJnZXMgdGhlIGZ1bmN0aW9uIG1ldGFkYXRhIG9mIGBzb3VyY2VgIGludG8gYGRhdGFgLlxuICAgICAqXG4gICAgICogTWVyZ2luZyBtZXRhZGF0YSByZWR1Y2VzIHRoZSBudW1iZXIgb2Ygd3JhcHBlcnMgcmVxdWlyZWQgdG8gaW52b2tlIGEgZnVuY3Rpb24uXG4gICAgICogVGhpcyBpcyBwb3NzaWJsZSBiZWNhdXNlIG1ldGhvZHMgbGlrZSBgXy5iaW5kYCwgYF8uY3VycnlgLCBhbmQgYF8ucGFydGlhbGBcbiAgICAgKiBtYXkgYmUgYXBwbGllZCByZWdhcmRsZXNzIG9mIGV4ZWN1dGlvbiBvcmRlci4gTWV0aG9kcyBsaWtlIGBfLmFyeWAgYW5kIGBfLnJlYXJnYFxuICAgICAqIGF1Z21lbnQgZnVuY3Rpb24gYXJndW1lbnRzLCBtYWtpbmcgdGhlIG9yZGVyIGluIHdoaWNoIHRoZXkgYXJlIGV4ZWN1dGVkIGltcG9ydGFudCxcbiAgICAgKiBwcmV2ZW50aW5nIHRoZSBtZXJnaW5nIG9mIG1ldGFkYXRhLiBIb3dldmVyLCB3ZSBtYWtlIGFuIGV4Y2VwdGlvbiBmb3IgYSBzYWZlXG4gICAgICogY29tbW9uIGNhc2Ugd2hlcmUgY3VycmllZCBmdW5jdGlvbnMgaGF2ZSBgXy5hcnlgIGFuZCBvciBgXy5yZWFyZ2AgYXBwbGllZC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gZGF0YSBUaGUgZGVzdGluYXRpb24gbWV0YWRhdGEuXG4gICAgICogQHBhcmFtIHtBcnJheX0gc291cmNlIFRoZSBzb3VyY2UgbWV0YWRhdGEuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGBkYXRhYC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBtZXJnZURhdGEoZGF0YSwgc291cmNlKSB7XG4gICAgICB2YXIgYml0bWFzayA9IGRhdGFbMV0sXG4gICAgICAgICAgc3JjQml0bWFzayA9IHNvdXJjZVsxXSxcbiAgICAgICAgICBuZXdCaXRtYXNrID0gYml0bWFzayB8IHNyY0JpdG1hc2ssXG4gICAgICAgICAgaXNDb21tb24gPSBuZXdCaXRtYXNrIDwgQVJZX0ZMQUc7XG5cbiAgICAgIHZhciBpc0NvbWJvID1cbiAgICAgICAgKHNyY0JpdG1hc2sgPT0gQVJZX0ZMQUcgJiYgYml0bWFzayA9PSBDVVJSWV9GTEFHKSB8fFxuICAgICAgICAoc3JjQml0bWFzayA9PSBBUllfRkxBRyAmJiBiaXRtYXNrID09IFJFQVJHX0ZMQUcgJiYgZGF0YVs3XS5sZW5ndGggPD0gc291cmNlWzhdKSB8fFxuICAgICAgICAoc3JjQml0bWFzayA9PSAoQVJZX0ZMQUcgfCBSRUFSR19GTEFHKSAmJiBiaXRtYXNrID09IENVUlJZX0ZMQUcpO1xuXG4gICAgICAvLyBFeGl0IGVhcmx5IGlmIG1ldGFkYXRhIGNhbid0IGJlIG1lcmdlZC5cbiAgICAgIGlmICghKGlzQ29tbW9uIHx8IGlzQ29tYm8pKSB7XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgfVxuICAgICAgLy8gVXNlIHNvdXJjZSBgdGhpc0FyZ2AgaWYgYXZhaWxhYmxlLlxuICAgICAgaWYgKHNyY0JpdG1hc2sgJiBCSU5EX0ZMQUcpIHtcbiAgICAgICAgZGF0YVsyXSA9IHNvdXJjZVsyXTtcbiAgICAgICAgLy8gU2V0IHdoZW4gY3VycnlpbmcgYSBib3VuZCBmdW5jdGlvbi5cbiAgICAgICAgbmV3Qml0bWFzayB8PSAoYml0bWFzayAmIEJJTkRfRkxBRykgPyAwIDogQ1VSUllfQk9VTkRfRkxBRztcbiAgICAgIH1cbiAgICAgIC8vIENvbXBvc2UgcGFydGlhbCBhcmd1bWVudHMuXG4gICAgICB2YXIgdmFsdWUgPSBzb3VyY2VbM107XG4gICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgdmFyIHBhcnRpYWxzID0gZGF0YVszXTtcbiAgICAgICAgZGF0YVszXSA9IHBhcnRpYWxzID8gY29tcG9zZUFyZ3MocGFydGlhbHMsIHZhbHVlLCBzb3VyY2VbNF0pIDogYXJyYXlDb3B5KHZhbHVlKTtcbiAgICAgICAgZGF0YVs0XSA9IHBhcnRpYWxzID8gcmVwbGFjZUhvbGRlcnMoZGF0YVszXSwgUExBQ0VIT0xERVIpIDogYXJyYXlDb3B5KHNvdXJjZVs0XSk7XG4gICAgICB9XG4gICAgICAvLyBDb21wb3NlIHBhcnRpYWwgcmlnaHQgYXJndW1lbnRzLlxuICAgICAgdmFsdWUgPSBzb3VyY2VbNV07XG4gICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgcGFydGlhbHMgPSBkYXRhWzVdO1xuICAgICAgICBkYXRhWzVdID0gcGFydGlhbHMgPyBjb21wb3NlQXJnc1JpZ2h0KHBhcnRpYWxzLCB2YWx1ZSwgc291cmNlWzZdKSA6IGFycmF5Q29weSh2YWx1ZSk7XG4gICAgICAgIGRhdGFbNl0gPSBwYXJ0aWFscyA/IHJlcGxhY2VIb2xkZXJzKGRhdGFbNV0sIFBMQUNFSE9MREVSKSA6IGFycmF5Q29weShzb3VyY2VbNl0pO1xuICAgICAgfVxuICAgICAgLy8gVXNlIHNvdXJjZSBgYXJnUG9zYCBpZiBhdmFpbGFibGUuXG4gICAgICB2YWx1ZSA9IHNvdXJjZVs3XTtcbiAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICBkYXRhWzddID0gYXJyYXlDb3B5KHZhbHVlKTtcbiAgICAgIH1cbiAgICAgIC8vIFVzZSBzb3VyY2UgYGFyeWAgaWYgaXQncyBzbWFsbGVyLlxuICAgICAgaWYgKHNyY0JpdG1hc2sgJiBBUllfRkxBRykge1xuICAgICAgICBkYXRhWzhdID0gZGF0YVs4XSA9PSBudWxsID8gc291cmNlWzhdIDogbmF0aXZlTWluKGRhdGFbOF0sIHNvdXJjZVs4XSk7XG4gICAgICB9XG4gICAgICAvLyBVc2Ugc291cmNlIGBhcml0eWAgaWYgb25lIGlzIG5vdCBwcm92aWRlZC5cbiAgICAgIGlmIChkYXRhWzldID09IG51bGwpIHtcbiAgICAgICAgZGF0YVs5XSA9IHNvdXJjZVs5XTtcbiAgICAgIH1cbiAgICAgIC8vIFVzZSBzb3VyY2UgYGZ1bmNgIGFuZCBtZXJnZSBiaXRtYXNrcy5cbiAgICAgIGRhdGFbMF0gPSBzb3VyY2VbMF07XG4gICAgICBkYXRhWzFdID0gbmV3Qml0bWFzaztcblxuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXNlZCBieSBgXy5kZWZhdWx0c0RlZXBgIHRvIGN1c3RvbWl6ZSBpdHMgYF8ubWVyZ2VgIHVzZS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHsqfSBvYmplY3RWYWx1ZSBUaGUgZGVzdGluYXRpb24gb2JqZWN0IHByb3BlcnR5IHZhbHVlLlxuICAgICAqIEBwYXJhbSB7Kn0gc291cmNlVmFsdWUgVGhlIHNvdXJjZSBvYmplY3QgcHJvcGVydHkgdmFsdWUuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHZhbHVlIHRvIGFzc2lnbiB0byB0aGUgZGVzdGluYXRpb24gb2JqZWN0LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1lcmdlRGVmYXVsdHMob2JqZWN0VmFsdWUsIHNvdXJjZVZhbHVlKSB7XG4gICAgICByZXR1cm4gb2JqZWN0VmFsdWUgPT09IHVuZGVmaW5lZCA/IHNvdXJjZVZhbHVlIDogbWVyZ2Uob2JqZWN0VmFsdWUsIHNvdXJjZVZhbHVlLCBtZXJnZURlZmF1bHRzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYF8ucGlja2Agd2hpY2ggcGlja3MgYG9iamVjdGAgcHJvcGVydGllcyBzcGVjaWZpZWRcbiAgICAgKiBieSBgcHJvcHNgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBzb3VyY2Ugb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nW119IHByb3BzIFRoZSBwcm9wZXJ0eSBuYW1lcyB0byBwaWNrLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG5ldyBvYmplY3QuXG4gICAgICovXG4gICAgZnVuY3Rpb24gcGlja0J5QXJyYXkob2JqZWN0LCBwcm9wcykge1xuICAgICAgb2JqZWN0ID0gdG9PYmplY3Qob2JqZWN0KTtcblxuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gcHJvcHMubGVuZ3RoLFxuICAgICAgICAgIHJlc3VsdCA9IHt9O1xuXG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICB2YXIga2V5ID0gcHJvcHNbaW5kZXhdO1xuICAgICAgICBpZiAoa2V5IGluIG9iamVjdCkge1xuICAgICAgICAgIHJlc3VsdFtrZXldID0gb2JqZWN0W2tleV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBfLnBpY2tgIHdoaWNoIHBpY2tzIGBvYmplY3RgIHByb3BlcnRpZXMgYHByZWRpY2F0ZWBcbiAgICAgKiByZXR1cm5zIHRydXRoeSBmb3IuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIHNvdXJjZSBvYmplY3QuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZGljYXRlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbmV3IG9iamVjdC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBwaWNrQnlDYWxsYmFjayhvYmplY3QsIHByZWRpY2F0ZSkge1xuICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgYmFzZUZvckluKG9iamVjdCwgZnVuY3Rpb24odmFsdWUsIGtleSwgb2JqZWN0KSB7XG4gICAgICAgIGlmIChwcmVkaWNhdGUodmFsdWUsIGtleSwgb2JqZWN0KSkge1xuICAgICAgICAgIHJlc3VsdFtrZXldID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW9yZGVyIGBhcnJheWAgYWNjb3JkaW5nIHRvIHRoZSBzcGVjaWZpZWQgaW5kZXhlcyB3aGVyZSB0aGUgZWxlbWVudCBhdFxuICAgICAqIHRoZSBmaXJzdCBpbmRleCBpcyBhc3NpZ25lZCBhcyB0aGUgZmlyc3QgZWxlbWVudCwgdGhlIGVsZW1lbnQgYXRcbiAgICAgKiB0aGUgc2Vjb25kIGluZGV4IGlzIGFzc2lnbmVkIGFzIHRoZSBzZWNvbmQgZWxlbWVudCwgYW5kIHNvIG9uLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gcmVvcmRlci5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBpbmRleGVzIFRoZSBhcnJhbmdlZCBhcnJheSBpbmRleGVzLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBgYXJyYXlgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlb3JkZXIoYXJyYXksIGluZGV4ZXMpIHtcbiAgICAgIHZhciBhcnJMZW5ndGggPSBhcnJheS5sZW5ndGgsXG4gICAgICAgICAgbGVuZ3RoID0gbmF0aXZlTWluKGluZGV4ZXMubGVuZ3RoLCBhcnJMZW5ndGgpLFxuICAgICAgICAgIG9sZEFycmF5ID0gYXJyYXlDb3B5KGFycmF5KTtcblxuICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICAgIHZhciBpbmRleCA9IGluZGV4ZXNbbGVuZ3RoXTtcbiAgICAgICAgYXJyYXlbbGVuZ3RoXSA9IGlzSW5kZXgoaW5kZXgsIGFyckxlbmd0aCkgPyBvbGRBcnJheVtpbmRleF0gOiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gYXJyYXk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyBtZXRhZGF0YSBmb3IgYGZ1bmNgLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIElmIHRoaXMgZnVuY3Rpb24gYmVjb21lcyBob3QsIGkuZS4gaXMgaW52b2tlZCBhIGxvdCBpbiBhIHNob3J0XG4gICAgICogcGVyaW9kIG9mIHRpbWUsIGl0IHdpbGwgdHJpcCBpdHMgYnJlYWtlciBhbmQgdHJhbnNpdGlvbiB0byBhbiBpZGVudGl0eSBmdW5jdGlvblxuICAgICAqIHRvIGF2b2lkIGdhcmJhZ2UgY29sbGVjdGlvbiBwYXVzZXMgaW4gVjguIFNlZSBbVjggaXNzdWUgMjA3MF0oaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTIwNzApXG4gICAgICogZm9yIG1vcmUgZGV0YWlscy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gYXNzb2NpYXRlIG1ldGFkYXRhIHdpdGguXG4gICAgICogQHBhcmFtIHsqfSBkYXRhIFRoZSBtZXRhZGF0YS5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgYGZ1bmNgLlxuICAgICAqL1xuICAgIHZhciBzZXREYXRhID0gKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGNvdW50ID0gMCxcbiAgICAgICAgICBsYXN0Q2FsbGVkID0gMDtcblxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcbiAgICAgICAgdmFyIHN0YW1wID0gbm93KCksXG4gICAgICAgICAgICByZW1haW5pbmcgPSBIT1RfU1BBTiAtIChzdGFtcCAtIGxhc3RDYWxsZWQpO1xuXG4gICAgICAgIGxhc3RDYWxsZWQgPSBzdGFtcDtcbiAgICAgICAgaWYgKHJlbWFpbmluZyA+IDApIHtcbiAgICAgICAgICBpZiAoKytjb3VudCA+PSBIT1RfQ09VTlQpIHtcbiAgICAgICAgICAgIHJldHVybiBrZXk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvdW50ID0gMDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYmFzZVNldERhdGEoa2V5LCB2YWx1ZSk7XG4gICAgICB9O1xuICAgIH0oKSk7XG5cbiAgICAvKipcbiAgICAgKiBBIGZhbGxiYWNrIGltcGxlbWVudGF0aW9uIG9mIGBPYmplY3Qua2V5c2Agd2hpY2ggY3JlYXRlcyBhbiBhcnJheSBvZiB0aGVcbiAgICAgKiBvd24gZW51bWVyYWJsZSBwcm9wZXJ0eSBuYW1lcyBvZiBgb2JqZWN0YC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gc2hpbUtleXMob2JqZWN0KSB7XG4gICAgICB2YXIgcHJvcHMgPSBrZXlzSW4ob2JqZWN0KSxcbiAgICAgICAgICBwcm9wc0xlbmd0aCA9IHByb3BzLmxlbmd0aCxcbiAgICAgICAgICBsZW5ndGggPSBwcm9wc0xlbmd0aCAmJiBvYmplY3QubGVuZ3RoO1xuXG4gICAgICB2YXIgYWxsb3dJbmRleGVzID0gISFsZW5ndGggJiYgaXNMZW5ndGgobGVuZ3RoKSAmJlxuICAgICAgICAoaXNBcnJheShvYmplY3QpIHx8IGlzQXJndW1lbnRzKG9iamVjdCkpO1xuXG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICByZXN1bHQgPSBbXTtcblxuICAgICAgd2hpbGUgKCsraW5kZXggPCBwcm9wc0xlbmd0aCkge1xuICAgICAgICB2YXIga2V5ID0gcHJvcHNbaW5kZXhdO1xuICAgICAgICBpZiAoKGFsbG93SW5kZXhlcyAmJiBpc0luZGV4KGtleSwgbGVuZ3RoKSkgfHwgaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIGtleSkpIHtcbiAgICAgICAgICByZXN1bHQucHVzaChrZXkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYW4gYXJyYXktbGlrZSBvYmplY3QgaWYgaXQncyBub3Qgb25lLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuICAgICAqIEByZXR1cm5zIHtBcnJheXxPYmplY3R9IFJldHVybnMgdGhlIGFycmF5LWxpa2Ugb2JqZWN0LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHRvSXRlcmFibGUodmFsdWUpIHtcbiAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICAgIGlmICghaXNBcnJheUxpa2UodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZXModmFsdWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGlzT2JqZWN0KHZhbHVlKSA/IHZhbHVlIDogT2JqZWN0KHZhbHVlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGFuIG9iamVjdCBpZiBpdCdzIG5vdCBvbmUuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgb2JqZWN0LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHRvT2JqZWN0KHZhbHVlKSB7XG4gICAgICByZXR1cm4gaXNPYmplY3QodmFsdWUpID8gdmFsdWUgOiBPYmplY3QodmFsdWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gcHJvcGVydHkgcGF0aCBhcnJheSBpZiBpdCdzIG5vdCBvbmUuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBwcm9wZXJ0eSBwYXRoIGFycmF5LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHRvUGF0aCh2YWx1ZSkge1xuICAgICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH1cbiAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgIGJhc2VUb1N0cmluZyh2YWx1ZSkucmVwbGFjZShyZVByb3BOYW1lLCBmdW5jdGlvbihtYXRjaCwgbnVtYmVyLCBxdW90ZSwgc3RyaW5nKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKHF1b3RlID8gc3RyaW5nLnJlcGxhY2UocmVFc2NhcGVDaGFyLCAnJDEnKSA6IChudW1iZXIgfHwgbWF0Y2gpKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgY2xvbmUgb2YgYHdyYXBwZXJgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gd3JhcHBlciBUaGUgd3JhcHBlciB0byBjbG9uZS5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBjbG9uZWQgd3JhcHBlci5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB3cmFwcGVyQ2xvbmUod3JhcHBlcikge1xuICAgICAgcmV0dXJuIHdyYXBwZXIgaW5zdGFuY2VvZiBMYXp5V3JhcHBlclxuICAgICAgICA/IHdyYXBwZXIuY2xvbmUoKVxuICAgICAgICA6IG5ldyBMb2Rhc2hXcmFwcGVyKHdyYXBwZXIuX193cmFwcGVkX18sIHdyYXBwZXIuX19jaGFpbl9fLCBhcnJheUNvcHkod3JhcHBlci5fX2FjdGlvbnNfXykpO1xuICAgIH1cblxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgZWxlbWVudHMgc3BsaXQgaW50byBncm91cHMgdGhlIGxlbmd0aCBvZiBgc2l6ZWAuXG4gICAgICogSWYgYGNvbGxlY3Rpb25gIGNhbid0IGJlIHNwbGl0IGV2ZW5seSwgdGhlIGZpbmFsIGNodW5rIHdpbGwgYmUgdGhlIHJlbWFpbmluZ1xuICAgICAqIGVsZW1lbnRzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHByb2Nlc3MuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtzaXplPTFdIFRoZSBsZW5ndGggb2YgZWFjaCBjaHVuay5cbiAgICAgKiBAcGFyYW0tIHtPYmplY3R9IFtndWFyZF0gRW5hYmxlcyB1c2UgYXMgYSBjYWxsYmFjayBmb3IgZnVuY3Rpb25zIGxpa2UgYF8ubWFwYC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBhcnJheSBjb250YWluaW5nIGNodW5rcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5jaHVuayhbJ2EnLCAnYicsICdjJywgJ2QnXSwgMik7XG4gICAgICogLy8gPT4gW1snYScsICdiJ10sIFsnYycsICdkJ11dXG4gICAgICpcbiAgICAgKiBfLmNodW5rKFsnYScsICdiJywgJ2MnLCAnZCddLCAzKTtcbiAgICAgKiAvLyA9PiBbWydhJywgJ2InLCAnYyddLCBbJ2QnXV1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjaHVuayhhcnJheSwgc2l6ZSwgZ3VhcmQpIHtcbiAgICAgIGlmIChndWFyZCA/IGlzSXRlcmF0ZWVDYWxsKGFycmF5LCBzaXplLCBndWFyZCkgOiBzaXplID09IG51bGwpIHtcbiAgICAgICAgc2l6ZSA9IDE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzaXplID0gbmF0aXZlTWF4KG5hdGl2ZUZsb29yKHNpemUpIHx8IDEsIDEpO1xuICAgICAgfVxuICAgICAgdmFyIGluZGV4ID0gMCxcbiAgICAgICAgICBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDAsXG4gICAgICAgICAgcmVzSW5kZXggPSAtMSxcbiAgICAgICAgICByZXN1bHQgPSBBcnJheShuYXRpdmVDZWlsKGxlbmd0aCAvIHNpemUpKTtcblxuICAgICAgd2hpbGUgKGluZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHJlc3VsdFsrK3Jlc0luZGV4XSA9IGJhc2VTbGljZShhcnJheSwgaW5kZXgsIChpbmRleCArPSBzaXplKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgd2l0aCBhbGwgZmFsc2V5IHZhbHVlcyByZW1vdmVkLiBUaGUgdmFsdWVzIGBmYWxzZWAsIGBudWxsYCxcbiAgICAgKiBgMGAsIGBcIlwiYCwgYHVuZGVmaW5lZGAsIGFuZCBgTmFOYCBhcmUgZmFsc2V5LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGNvbXBhY3QuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgYXJyYXkgb2YgZmlsdGVyZWQgdmFsdWVzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmNvbXBhY3QoWzAsIDEsIGZhbHNlLCAyLCAnJywgM10pO1xuICAgICAqIC8vID0+IFsxLCAyLCAzXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNvbXBhY3QoYXJyYXkpIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMCxcbiAgICAgICAgICByZXNJbmRleCA9IC0xLFxuICAgICAgICAgIHJlc3VsdCA9IFtdO1xuXG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICB2YXIgdmFsdWUgPSBhcnJheVtpbmRleF07XG4gICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgIHJlc3VsdFsrK3Jlc0luZGV4XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgdW5pcXVlIGBhcnJheWAgdmFsdWVzIG5vdCBpbmNsdWRlZCBpbiB0aGUgb3RoZXJcbiAgICAgKiBwcm92aWRlZCBhcnJheXMgdXNpbmcgW2BTYW1lVmFsdWVaZXJvYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtc2FtZXZhbHVlemVybylcbiAgICAgKiBmb3IgZXF1YWxpdHkgY29tcGFyaXNvbnMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaW5zcGVjdC5cbiAgICAgKiBAcGFyYW0gey4uLkFycmF5fSBbdmFsdWVzXSBUaGUgYXJyYXlzIG9mIHZhbHVlcyB0byBleGNsdWRlLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGFycmF5IG9mIGZpbHRlcmVkIHZhbHVlcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5kaWZmZXJlbmNlKFsxLCAyLCAzXSwgWzQsIDJdKTtcbiAgICAgKiAvLyA9PiBbMSwgM11cbiAgICAgKi9cbiAgICB2YXIgZGlmZmVyZW5jZSA9IHJlc3RQYXJhbShmdW5jdGlvbihhcnJheSwgdmFsdWVzKSB7XG4gICAgICByZXR1cm4gKGlzT2JqZWN0TGlrZShhcnJheSkgJiYgaXNBcnJheUxpa2UoYXJyYXkpKVxuICAgICAgICA/IGJhc2VEaWZmZXJlbmNlKGFycmF5LCBiYXNlRmxhdHRlbih2YWx1ZXMsIGZhbHNlLCB0cnVlKSlcbiAgICAgICAgOiBbXTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBzbGljZSBvZiBgYXJyYXlgIHdpdGggYG5gIGVsZW1lbnRzIGRyb3BwZWQgZnJvbSB0aGUgYmVnaW5uaW5nLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHF1ZXJ5LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbj0xXSBUaGUgbnVtYmVyIG9mIGVsZW1lbnRzIHRvIGRyb3AuXG4gICAgICogQHBhcmFtLSB7T2JqZWN0fSBbZ3VhcmRdIEVuYWJsZXMgdXNlIGFzIGEgY2FsbGJhY2sgZm9yIGZ1bmN0aW9ucyBsaWtlIGBfLm1hcGAuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBzbGljZSBvZiBgYXJyYXlgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmRyb3AoWzEsIDIsIDNdKTtcbiAgICAgKiAvLyA9PiBbMiwgM11cbiAgICAgKlxuICAgICAqIF8uZHJvcChbMSwgMiwgM10sIDIpO1xuICAgICAqIC8vID0+IFszXVxuICAgICAqXG4gICAgICogXy5kcm9wKFsxLCAyLCAzXSwgNSk7XG4gICAgICogLy8gPT4gW11cbiAgICAgKlxuICAgICAqIF8uZHJvcChbMSwgMiwgM10sIDApO1xuICAgICAqIC8vID0+IFsxLCAyLCAzXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGRyb3AoYXJyYXksIG4sIGd1YXJkKSB7XG4gICAgICB2YXIgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwO1xuICAgICAgaWYgKCFsZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgICAgaWYgKGd1YXJkID8gaXNJdGVyYXRlZUNhbGwoYXJyYXksIG4sIGd1YXJkKSA6IG4gPT0gbnVsbCkge1xuICAgICAgICBuID0gMTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBiYXNlU2xpY2UoYXJyYXksIG4gPCAwID8gMCA6IG4pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBzbGljZSBvZiBgYXJyYXlgIHdpdGggYG5gIGVsZW1lbnRzIGRyb3BwZWQgZnJvbSB0aGUgZW5kLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHF1ZXJ5LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbj0xXSBUaGUgbnVtYmVyIG9mIGVsZW1lbnRzIHRvIGRyb3AuXG4gICAgICogQHBhcmFtLSB7T2JqZWN0fSBbZ3VhcmRdIEVuYWJsZXMgdXNlIGFzIGEgY2FsbGJhY2sgZm9yIGZ1bmN0aW9ucyBsaWtlIGBfLm1hcGAuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBzbGljZSBvZiBgYXJyYXlgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmRyb3BSaWdodChbMSwgMiwgM10pO1xuICAgICAqIC8vID0+IFsxLCAyXVxuICAgICAqXG4gICAgICogXy5kcm9wUmlnaHQoWzEsIDIsIDNdLCAyKTtcbiAgICAgKiAvLyA9PiBbMV1cbiAgICAgKlxuICAgICAqIF8uZHJvcFJpZ2h0KFsxLCAyLCAzXSwgNSk7XG4gICAgICogLy8gPT4gW11cbiAgICAgKlxuICAgICAqIF8uZHJvcFJpZ2h0KFsxLCAyLCAzXSwgMCk7XG4gICAgICogLy8gPT4gWzEsIDIsIDNdXG4gICAgICovXG4gICAgZnVuY3Rpb24gZHJvcFJpZ2h0KGFycmF5LCBuLCBndWFyZCkge1xuICAgICAgdmFyIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMDtcbiAgICAgIGlmICghbGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICAgIGlmIChndWFyZCA/IGlzSXRlcmF0ZWVDYWxsKGFycmF5LCBuLCBndWFyZCkgOiBuID09IG51bGwpIHtcbiAgICAgICAgbiA9IDE7XG4gICAgICB9XG4gICAgICBuID0gbGVuZ3RoIC0gKCtuIHx8IDApO1xuICAgICAgcmV0dXJuIGJhc2VTbGljZShhcnJheSwgMCwgbiA8IDAgPyAwIDogbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHNsaWNlIG9mIGBhcnJheWAgZXhjbHVkaW5nIGVsZW1lbnRzIGRyb3BwZWQgZnJvbSB0aGUgZW5kLlxuICAgICAqIEVsZW1lbnRzIGFyZSBkcm9wcGVkIHVudGlsIGBwcmVkaWNhdGVgIHJldHVybnMgZmFsc2V5LiBUaGUgcHJlZGljYXRlIGlzXG4gICAgICogYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdGhyZWUgYXJndW1lbnRzOiAodmFsdWUsIGluZGV4LCBhcnJheSkuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBwcmVkaWNhdGVgIHRoZSBjcmVhdGVkIGBfLnByb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYSB2YWx1ZSBpcyBhbHNvIHByb3ZpZGVkIGZvciBgdGhpc0FyZ2AgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc1Byb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgYSBtYXRjaGluZyBwcm9wZXJ0eVxuICAgICAqIHZhbHVlLCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBwcmVkaWNhdGVgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNgIHN0eWxlXG4gICAgICogY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgbWF0Y2ggdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuXG4gICAgICogb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gcXVlcnkuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbcHJlZGljYXRlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkXG4gICAgICogIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBwcmVkaWNhdGVgLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgc2xpY2Ugb2YgYGFycmF5YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5kcm9wUmlnaHRXaGlsZShbMSwgMiwgM10sIGZ1bmN0aW9uKG4pIHtcbiAgICAgKiAgIHJldHVybiBuID4gMTtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiBbMV1cbiAgICAgKlxuICAgICAqIHZhciB1c2VycyA9IFtcbiAgICAgKiAgIHsgJ3VzZXInOiAnYmFybmV5JywgICdhY3RpdmUnOiB0cnVlIH0sXG4gICAgICogICB7ICd1c2VyJzogJ2ZyZWQnLCAgICAnYWN0aXZlJzogZmFsc2UgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAncGViYmxlcycsICdhY3RpdmUnOiBmYWxzZSB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5tYXRjaGVzYCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLnBsdWNrKF8uZHJvcFJpZ2h0V2hpbGUodXNlcnMsIHsgJ3VzZXInOiAncGViYmxlcycsICdhY3RpdmUnOiBmYWxzZSB9KSwgJ3VzZXInKTtcbiAgICAgKiAvLyA9PiBbJ2Jhcm5leScsICdmcmVkJ11cbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5tYXRjaGVzUHJvcGVydHlgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8ucGx1Y2soXy5kcm9wUmlnaHRXaGlsZSh1c2VycywgJ2FjdGl2ZScsIGZhbHNlKSwgJ3VzZXInKTtcbiAgICAgKiAvLyA9PiBbJ2Jhcm5leSddXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ucHJvcGVydHlgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8ucGx1Y2soXy5kcm9wUmlnaHRXaGlsZSh1c2VycywgJ2FjdGl2ZScpLCAndXNlcicpO1xuICAgICAqIC8vID0+IFsnYmFybmV5JywgJ2ZyZWQnLCAncGViYmxlcyddXG4gICAgICovXG4gICAgZnVuY3Rpb24gZHJvcFJpZ2h0V2hpbGUoYXJyYXksIHByZWRpY2F0ZSwgdGhpc0FyZykge1xuICAgICAgcmV0dXJuIChhcnJheSAmJiBhcnJheS5sZW5ndGgpXG4gICAgICAgID8gYmFzZVdoaWxlKGFycmF5LCBnZXRDYWxsYmFjayhwcmVkaWNhdGUsIHRoaXNBcmcsIDMpLCB0cnVlLCB0cnVlKVxuICAgICAgICA6IFtdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBzbGljZSBvZiBgYXJyYXlgIGV4Y2x1ZGluZyBlbGVtZW50cyBkcm9wcGVkIGZyb20gdGhlIGJlZ2lubmluZy5cbiAgICAgKiBFbGVtZW50cyBhcmUgZHJvcHBlZCB1bnRpbCBgcHJlZGljYXRlYCByZXR1cm5zIGZhbHNleS4gVGhlIHByZWRpY2F0ZSBpc1xuICAgICAqIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50czogKHZhbHVlLCBpbmRleCwgYXJyYXkpLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgcHJlZGljYXRlYCB0aGUgY3JlYXRlZCBgXy5wcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGEgdmFsdWUgaXMgYWxzbyBwcm92aWRlZCBmb3IgYHRoaXNBcmdgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNQcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIGEgbWF0Y2hpbmcgcHJvcGVydHlcbiAgICAgKiB2YWx1ZSwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgcHJlZGljYXRlYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzYCBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuXG4gICAgICogb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gcXVlcnkuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbcHJlZGljYXRlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkXG4gICAgICogIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBwcmVkaWNhdGVgLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgc2xpY2Ugb2YgYGFycmF5YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5kcm9wV2hpbGUoWzEsIDIsIDNdLCBmdW5jdGlvbihuKSB7XG4gICAgICogICByZXR1cm4gbiA8IDM7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gWzNdXG4gICAgICpcbiAgICAgKiB2YXIgdXNlcnMgPSBbXG4gICAgICogICB7ICd1c2VyJzogJ2Jhcm5leScsICAnYWN0aXZlJzogZmFsc2UgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAnZnJlZCcsICAgICdhY3RpdmUnOiBmYWxzZSB9LFxuICAgICAqICAgeyAndXNlcic6ICdwZWJibGVzJywgJ2FjdGl2ZSc6IHRydWUgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ubWF0Y2hlc2AgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5wbHVjayhfLmRyb3BXaGlsZSh1c2VycywgeyAndXNlcic6ICdiYXJuZXknLCAnYWN0aXZlJzogZmFsc2UgfSksICd1c2VyJyk7XG4gICAgICogLy8gPT4gWydmcmVkJywgJ3BlYmJsZXMnXVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLm1hdGNoZXNQcm9wZXJ0eWAgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5wbHVjayhfLmRyb3BXaGlsZSh1c2VycywgJ2FjdGl2ZScsIGZhbHNlKSwgJ3VzZXInKTtcbiAgICAgKiAvLyA9PiBbJ3BlYmJsZXMnXVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLnByb3BlcnR5YCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLnBsdWNrKF8uZHJvcFdoaWxlKHVzZXJzLCAnYWN0aXZlJyksICd1c2VyJyk7XG4gICAgICogLy8gPT4gWydiYXJuZXknLCAnZnJlZCcsICdwZWJibGVzJ11cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBkcm9wV2hpbGUoYXJyYXksIHByZWRpY2F0ZSwgdGhpc0FyZykge1xuICAgICAgcmV0dXJuIChhcnJheSAmJiBhcnJheS5sZW5ndGgpXG4gICAgICAgID8gYmFzZVdoaWxlKGFycmF5LCBnZXRDYWxsYmFjayhwcmVkaWNhdGUsIHRoaXNBcmcsIDMpLCB0cnVlKVxuICAgICAgICA6IFtdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZpbGxzIGVsZW1lbnRzIG9mIGBhcnJheWAgd2l0aCBgdmFsdWVgIGZyb20gYHN0YXJ0YCB1cCB0bywgYnV0IG5vdFxuICAgICAqIGluY2x1ZGluZywgYGVuZGAuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgbXV0YXRlcyBgYXJyYXlgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGZpbGwuXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gZmlsbCBgYXJyYXlgIHdpdGguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtzdGFydD0wXSBUaGUgc3RhcnQgcG9zaXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtlbmQ9YXJyYXkubGVuZ3RoXSBUaGUgZW5kIHBvc2l0aW9uLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBgYXJyYXlgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgYXJyYXkgPSBbMSwgMiwgM107XG4gICAgICpcbiAgICAgKiBfLmZpbGwoYXJyYXksICdhJyk7XG4gICAgICogY29uc29sZS5sb2coYXJyYXkpO1xuICAgICAqIC8vID0+IFsnYScsICdhJywgJ2EnXVxuICAgICAqXG4gICAgICogXy5maWxsKEFycmF5KDMpLCAyKTtcbiAgICAgKiAvLyA9PiBbMiwgMiwgMl1cbiAgICAgKlxuICAgICAqIF8uZmlsbChbNCwgNiwgOF0sICcqJywgMSwgMik7XG4gICAgICogLy8gPT4gWzQsICcqJywgOF1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBmaWxsKGFycmF5LCB2YWx1ZSwgc3RhcnQsIGVuZCkge1xuICAgICAgdmFyIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMDtcbiAgICAgIGlmICghbGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICAgIGlmIChzdGFydCAmJiB0eXBlb2Ygc3RhcnQgIT0gJ251bWJlcicgJiYgaXNJdGVyYXRlZUNhbGwoYXJyYXksIHZhbHVlLCBzdGFydCkpIHtcbiAgICAgICAgc3RhcnQgPSAwO1xuICAgICAgICBlbmQgPSBsZW5ndGg7XG4gICAgICB9XG4gICAgICByZXR1cm4gYmFzZUZpbGwoYXJyYXksIHZhbHVlLCBzdGFydCwgZW5kKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmZpbmRgIGV4Y2VwdCB0aGF0IGl0IHJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBmaXJzdFxuICAgICAqIGVsZW1lbnQgYHByZWRpY2F0ZWAgcmV0dXJucyB0cnV0aHkgZm9yIGluc3RlYWQgb2YgdGhlIGVsZW1lbnQgaXRzZWxmLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgcHJlZGljYXRlYCB0aGUgY3JlYXRlZCBgXy5wcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGEgdmFsdWUgaXMgYWxzbyBwcm92aWRlZCBmb3IgYHRoaXNBcmdgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNQcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIGEgbWF0Y2hpbmcgcHJvcGVydHlcbiAgICAgKiB2YWx1ZSwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgcHJlZGljYXRlYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzYCBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuXG4gICAgICogb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gc2VhcmNoLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW3ByZWRpY2F0ZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZFxuICAgICAqICBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgcHJlZGljYXRlYC5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgZm91bmQgZWxlbWVudCwgZWxzZSBgLTFgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgdXNlcnMgPSBbXG4gICAgICogICB7ICd1c2VyJzogJ2Jhcm5leScsICAnYWN0aXZlJzogZmFsc2UgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAnZnJlZCcsICAgICdhY3RpdmUnOiBmYWxzZSB9LFxuICAgICAqICAgeyAndXNlcic6ICdwZWJibGVzJywgJ2FjdGl2ZSc6IHRydWUgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiBfLmZpbmRJbmRleCh1c2VycywgZnVuY3Rpb24oY2hyKSB7XG4gICAgICogICByZXR1cm4gY2hyLnVzZXIgPT0gJ2Jhcm5leSc7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gMFxuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLm1hdGNoZXNgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8uZmluZEluZGV4KHVzZXJzLCB7ICd1c2VyJzogJ2ZyZWQnLCAnYWN0aXZlJzogZmFsc2UgfSk7XG4gICAgICogLy8gPT4gMVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLm1hdGNoZXNQcm9wZXJ0eWAgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5maW5kSW5kZXgodXNlcnMsICdhY3RpdmUnLCBmYWxzZSk7XG4gICAgICogLy8gPT4gMFxuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLnByb3BlcnR5YCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLmZpbmRJbmRleCh1c2VycywgJ2FjdGl2ZScpO1xuICAgICAqIC8vID0+IDJcbiAgICAgKi9cbiAgICB2YXIgZmluZEluZGV4ID0gY3JlYXRlRmluZEluZGV4KCk7XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmZpbmRJbmRleGAgZXhjZXB0IHRoYXQgaXQgaXRlcmF0ZXMgb3ZlciBlbGVtZW50c1xuICAgICAqIG9mIGBjb2xsZWN0aW9uYCBmcm9tIHJpZ2h0IHRvIGxlZnQuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBwcmVkaWNhdGVgIHRoZSBjcmVhdGVkIGBfLnByb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYSB2YWx1ZSBpcyBhbHNvIHByb3ZpZGVkIGZvciBgdGhpc0FyZ2AgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc1Byb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgYSBtYXRjaGluZyBwcm9wZXJ0eVxuICAgICAqIHZhbHVlLCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBwcmVkaWNhdGVgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNgIHN0eWxlXG4gICAgICogY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW5cbiAgICAgKiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBzZWFyY2guXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbcHJlZGljYXRlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkXG4gICAgICogIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBwcmVkaWNhdGVgLlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBmb3VuZCBlbGVtZW50LCBlbHNlIGAtMWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciB1c2VycyA9IFtcbiAgICAgKiAgIHsgJ3VzZXInOiAnYmFybmV5JywgICdhY3RpdmUnOiB0cnVlIH0sXG4gICAgICogICB7ICd1c2VyJzogJ2ZyZWQnLCAgICAnYWN0aXZlJzogZmFsc2UgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAncGViYmxlcycsICdhY3RpdmUnOiBmYWxzZSB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIF8uZmluZExhc3RJbmRleCh1c2VycywgZnVuY3Rpb24oY2hyKSB7XG4gICAgICogICByZXR1cm4gY2hyLnVzZXIgPT0gJ3BlYmJsZXMnO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IDJcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5tYXRjaGVzYCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLmZpbmRMYXN0SW5kZXgodXNlcnMsIHsgJ3VzZXInOiAnYmFybmV5JywgJ2FjdGl2ZSc6IHRydWUgfSk7XG4gICAgICogLy8gPT4gMFxuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLm1hdGNoZXNQcm9wZXJ0eWAgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5maW5kTGFzdEluZGV4KHVzZXJzLCAnYWN0aXZlJywgZmFsc2UpO1xuICAgICAqIC8vID0+IDJcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5wcm9wZXJ0eWAgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5maW5kTGFzdEluZGV4KHVzZXJzLCAnYWN0aXZlJyk7XG4gICAgICogLy8gPT4gMFxuICAgICAqL1xuICAgIHZhciBmaW5kTGFzdEluZGV4ID0gY3JlYXRlRmluZEluZGV4KHRydWUpO1xuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgZmlyc3QgZWxlbWVudCBvZiBgYXJyYXlgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGFsaWFzIGhlYWRcbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gcXVlcnkuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGZpcnN0IGVsZW1lbnQgb2YgYGFycmF5YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5maXJzdChbMSwgMiwgM10pO1xuICAgICAqIC8vID0+IDFcbiAgICAgKlxuICAgICAqIF8uZmlyc3QoW10pO1xuICAgICAqIC8vID0+IHVuZGVmaW5lZFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGZpcnN0KGFycmF5KSB7XG4gICAgICByZXR1cm4gYXJyYXkgPyBhcnJheVswXSA6IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGbGF0dGVucyBhIG5lc3RlZCBhcnJheS4gSWYgYGlzRGVlcGAgaXMgYHRydWVgIHRoZSBhcnJheSBpcyByZWN1cnNpdmVseVxuICAgICAqIGZsYXR0ZW5lZCwgb3RoZXJ3aXNlIGl0IGlzIG9ubHkgZmxhdHRlbmVkIGEgc2luZ2xlIGxldmVsLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGZsYXR0ZW4uXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbaXNEZWVwXSBTcGVjaWZ5IGEgZGVlcCBmbGF0dGVuLlxuICAgICAqIEBwYXJhbS0ge09iamVjdH0gW2d1YXJkXSBFbmFibGVzIHVzZSBhcyBhIGNhbGxiYWNrIGZvciBmdW5jdGlvbnMgbGlrZSBgXy5tYXBgLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGZsYXR0ZW5lZCBhcnJheS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5mbGF0dGVuKFsxLCBbMiwgMywgWzRdXV0pO1xuICAgICAqIC8vID0+IFsxLCAyLCAzLCBbNF1dXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBgaXNEZWVwYFxuICAgICAqIF8uZmxhdHRlbihbMSwgWzIsIDMsIFs0XV1dLCB0cnVlKTtcbiAgICAgKiAvLyA9PiBbMSwgMiwgMywgNF1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBmbGF0dGVuKGFycmF5LCBpc0RlZXAsIGd1YXJkKSB7XG4gICAgICB2YXIgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwO1xuICAgICAgaWYgKGd1YXJkICYmIGlzSXRlcmF0ZWVDYWxsKGFycmF5LCBpc0RlZXAsIGd1YXJkKSkge1xuICAgICAgICBpc0RlZXAgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBsZW5ndGggPyBiYXNlRmxhdHRlbihhcnJheSwgaXNEZWVwKSA6IFtdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlY3Vyc2l2ZWx5IGZsYXR0ZW5zIGEgbmVzdGVkIGFycmF5LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHJlY3Vyc2l2ZWx5IGZsYXR0ZW4uXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgZmxhdHRlbmVkIGFycmF5LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmZsYXR0ZW5EZWVwKFsxLCBbMiwgMywgWzRdXV0pO1xuICAgICAqIC8vID0+IFsxLCAyLCAzLCA0XVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGZsYXR0ZW5EZWVwKGFycmF5KSB7XG4gICAgICB2YXIgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwO1xuICAgICAgcmV0dXJuIGxlbmd0aCA/IGJhc2VGbGF0dGVuKGFycmF5LCB0cnVlKSA6IFtdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGluZGV4IGF0IHdoaWNoIHRoZSBmaXJzdCBvY2N1cnJlbmNlIG9mIGB2YWx1ZWAgaXMgZm91bmQgaW4gYGFycmF5YFxuICAgICAqIHVzaW5nIFtgU2FtZVZhbHVlWmVyb2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLXNhbWV2YWx1ZXplcm8pXG4gICAgICogZm9yIGVxdWFsaXR5IGNvbXBhcmlzb25zLiBJZiBgZnJvbUluZGV4YCBpcyBuZWdhdGl2ZSwgaXQgaXMgdXNlZCBhcyB0aGUgb2Zmc2V0XG4gICAgICogZnJvbSB0aGUgZW5kIG9mIGBhcnJheWAuIElmIGBhcnJheWAgaXMgc29ydGVkIHByb3ZpZGluZyBgdHJ1ZWAgZm9yIGBmcm9tSW5kZXhgXG4gICAgICogcGVyZm9ybXMgYSBmYXN0ZXIgYmluYXJ5IHNlYXJjaC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBzZWFyY2guXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2VhcmNoIGZvci5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW58bnVtYmVyfSBbZnJvbUluZGV4PTBdIFRoZSBpbmRleCB0byBzZWFyY2ggZnJvbSBvciBgdHJ1ZWBcbiAgICAgKiAgdG8gcGVyZm9ybSBhIGJpbmFyeSBzZWFyY2ggb24gYSBzb3J0ZWQgYXJyYXkuXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIG1hdGNoZWQgdmFsdWUsIGVsc2UgYC0xYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pbmRleE9mKFsxLCAyLCAxLCAyXSwgMik7XG4gICAgICogLy8gPT4gMVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgYGZyb21JbmRleGBcbiAgICAgKiBfLmluZGV4T2YoWzEsIDIsIDEsIDJdLCAyLCAyKTtcbiAgICAgKiAvLyA9PiAzXG4gICAgICpcbiAgICAgKiAvLyBwZXJmb3JtaW5nIGEgYmluYXJ5IHNlYXJjaFxuICAgICAqIF8uaW5kZXhPZihbMSwgMSwgMiwgMl0sIDIsIHRydWUpO1xuICAgICAqIC8vID0+IDJcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpbmRleE9mKGFycmF5LCB2YWx1ZSwgZnJvbUluZGV4KSB7XG4gICAgICB2YXIgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwO1xuICAgICAgaWYgKCFsZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBmcm9tSW5kZXggPT0gJ251bWJlcicpIHtcbiAgICAgICAgZnJvbUluZGV4ID0gZnJvbUluZGV4IDwgMCA/IG5hdGl2ZU1heChsZW5ndGggKyBmcm9tSW5kZXgsIDApIDogZnJvbUluZGV4O1xuICAgICAgfSBlbHNlIGlmIChmcm9tSW5kZXgpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gYmluYXJ5SW5kZXgoYXJyYXksIHZhbHVlKTtcbiAgICAgICAgaWYgKGluZGV4IDwgbGVuZ3RoICYmXG4gICAgICAgICAgICAodmFsdWUgPT09IHZhbHVlID8gKHZhbHVlID09PSBhcnJheVtpbmRleF0pIDogKGFycmF5W2luZGV4XSAhPT0gYXJyYXlbaW5kZXhdKSkpIHtcbiAgICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGJhc2VJbmRleE9mKGFycmF5LCB2YWx1ZSwgZnJvbUluZGV4IHx8IDApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgYWxsIGJ1dCB0aGUgbGFzdCBlbGVtZW50IG9mIGBhcnJheWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gcXVlcnkuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBzbGljZSBvZiBgYXJyYXlgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmluaXRpYWwoWzEsIDIsIDNdKTtcbiAgICAgKiAvLyA9PiBbMSwgMl1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpbml0aWFsKGFycmF5KSB7XG4gICAgICByZXR1cm4gZHJvcFJpZ2h0KGFycmF5LCAxKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIHVuaXF1ZSB2YWx1ZXMgdGhhdCBhcmUgaW5jbHVkZWQgaW4gYWxsIG9mIHRoZSBwcm92aWRlZFxuICAgICAqIGFycmF5cyB1c2luZyBbYFNhbWVWYWx1ZVplcm9gXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1zYW1ldmFsdWV6ZXJvKVxuICAgICAqIGZvciBlcXVhbGl0eSBjb21wYXJpc29ucy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7Li4uQXJyYXl9IFthcnJheXNdIFRoZSBhcnJheXMgdG8gaW5zcGVjdC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBhcnJheSBvZiBzaGFyZWQgdmFsdWVzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICogXy5pbnRlcnNlY3Rpb24oWzEsIDJdLCBbNCwgMl0sIFsyLCAxXSk7XG4gICAgICogLy8gPT4gWzJdXG4gICAgICovXG4gICAgdmFyIGludGVyc2VjdGlvbiA9IHJlc3RQYXJhbShmdW5jdGlvbihhcnJheXMpIHtcbiAgICAgIHZhciBvdGhMZW5ndGggPSBhcnJheXMubGVuZ3RoLFxuICAgICAgICAgIG90aEluZGV4ID0gb3RoTGVuZ3RoLFxuICAgICAgICAgIGNhY2hlcyA9IEFycmF5KGxlbmd0aCksXG4gICAgICAgICAgaW5kZXhPZiA9IGdldEluZGV4T2YoKSxcbiAgICAgICAgICBpc0NvbW1vbiA9IGluZGV4T2YgPT0gYmFzZUluZGV4T2YsXG4gICAgICAgICAgcmVzdWx0ID0gW107XG5cbiAgICAgIHdoaWxlIChvdGhJbmRleC0tKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IGFycmF5c1tvdGhJbmRleF0gPSBpc0FycmF5TGlrZSh2YWx1ZSA9IGFycmF5c1tvdGhJbmRleF0pID8gdmFsdWUgOiBbXTtcbiAgICAgICAgY2FjaGVzW290aEluZGV4XSA9IChpc0NvbW1vbiAmJiB2YWx1ZS5sZW5ndGggPj0gMTIwKSA/IGNyZWF0ZUNhY2hlKG90aEluZGV4ICYmIHZhbHVlKSA6IG51bGw7XG4gICAgICB9XG4gICAgICB2YXIgYXJyYXkgPSBhcnJheXNbMF0sXG4gICAgICAgICAgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDAsXG4gICAgICAgICAgc2VlbiA9IGNhY2hlc1swXTtcblxuICAgICAgb3V0ZXI6XG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICB2YWx1ZSA9IGFycmF5W2luZGV4XTtcbiAgICAgICAgaWYgKChzZWVuID8gY2FjaGVJbmRleE9mKHNlZW4sIHZhbHVlKSA6IGluZGV4T2YocmVzdWx0LCB2YWx1ZSwgMCkpIDwgMCkge1xuICAgICAgICAgIHZhciBvdGhJbmRleCA9IG90aExlbmd0aDtcbiAgICAgICAgICB3aGlsZSAoLS1vdGhJbmRleCkge1xuICAgICAgICAgICAgdmFyIGNhY2hlID0gY2FjaGVzW290aEluZGV4XTtcbiAgICAgICAgICAgIGlmICgoY2FjaGUgPyBjYWNoZUluZGV4T2YoY2FjaGUsIHZhbHVlKSA6IGluZGV4T2YoYXJyYXlzW290aEluZGV4XSwgdmFsdWUsIDApKSA8IDApIHtcbiAgICAgICAgICAgICAgY29udGludWUgb3V0ZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChzZWVuKSB7XG4gICAgICAgICAgICBzZWVuLnB1c2godmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXN1bHQucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBsYXN0IGVsZW1lbnQgb2YgYGFycmF5YC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBxdWVyeS5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgbGFzdCBlbGVtZW50IG9mIGBhcnJheWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ubGFzdChbMSwgMiwgM10pO1xuICAgICAqIC8vID0+IDNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBsYXN0KGFycmF5KSB7XG4gICAgICB2YXIgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwO1xuICAgICAgcmV0dXJuIGxlbmd0aCA/IGFycmF5W2xlbmd0aCAtIDFdIDogdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uaW5kZXhPZmAgZXhjZXB0IHRoYXQgaXQgaXRlcmF0ZXMgb3ZlciBlbGVtZW50cyBvZlxuICAgICAqIGBhcnJheWAgZnJvbSByaWdodCB0byBsZWZ0LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHNlYXJjaC5cbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZWFyY2ggZm9yLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbnxudW1iZXJ9IFtmcm9tSW5kZXg9YXJyYXkubGVuZ3RoLTFdIFRoZSBpbmRleCB0byBzZWFyY2ggZnJvbVxuICAgICAqICBvciBgdHJ1ZWAgdG8gcGVyZm9ybSBhIGJpbmFyeSBzZWFyY2ggb24gYSBzb3J0ZWQgYXJyYXkuXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIG1hdGNoZWQgdmFsdWUsIGVsc2UgYC0xYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5sYXN0SW5kZXhPZihbMSwgMiwgMSwgMl0sIDIpO1xuICAgICAqIC8vID0+IDNcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIGBmcm9tSW5kZXhgXG4gICAgICogXy5sYXN0SW5kZXhPZihbMSwgMiwgMSwgMl0sIDIsIDIpO1xuICAgICAqIC8vID0+IDFcbiAgICAgKlxuICAgICAqIC8vIHBlcmZvcm1pbmcgYSBiaW5hcnkgc2VhcmNoXG4gICAgICogXy5sYXN0SW5kZXhPZihbMSwgMSwgMiwgMl0sIDIsIHRydWUpO1xuICAgICAqIC8vID0+IDNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBsYXN0SW5kZXhPZihhcnJheSwgdmFsdWUsIGZyb21JbmRleCkge1xuICAgICAgdmFyIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMDtcbiAgICAgIGlmICghbGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiAtMTtcbiAgICAgIH1cbiAgICAgIHZhciBpbmRleCA9IGxlbmd0aDtcbiAgICAgIGlmICh0eXBlb2YgZnJvbUluZGV4ID09ICdudW1iZXInKSB7XG4gICAgICAgIGluZGV4ID0gKGZyb21JbmRleCA8IDAgPyBuYXRpdmVNYXgobGVuZ3RoICsgZnJvbUluZGV4LCAwKSA6IG5hdGl2ZU1pbihmcm9tSW5kZXggfHwgMCwgbGVuZ3RoIC0gMSkpICsgMTtcbiAgICAgIH0gZWxzZSBpZiAoZnJvbUluZGV4KSB7XG4gICAgICAgIGluZGV4ID0gYmluYXJ5SW5kZXgoYXJyYXksIHZhbHVlLCB0cnVlKSAtIDE7XG4gICAgICAgIHZhciBvdGhlciA9IGFycmF5W2luZGV4XTtcbiAgICAgICAgaWYgKHZhbHVlID09PSB2YWx1ZSA/ICh2YWx1ZSA9PT0gb3RoZXIpIDogKG90aGVyICE9PSBvdGhlcikpIHtcbiAgICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgfVxuICAgICAgaWYgKHZhbHVlICE9PSB2YWx1ZSkge1xuICAgICAgICByZXR1cm4gaW5kZXhPZk5hTihhcnJheSwgaW5kZXgsIHRydWUpO1xuICAgICAgfVxuICAgICAgd2hpbGUgKGluZGV4LS0pIHtcbiAgICAgICAgaWYgKGFycmF5W2luZGV4XSA9PT0gdmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiAtMTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGFsbCBwcm92aWRlZCB2YWx1ZXMgZnJvbSBgYXJyYXlgIHVzaW5nXG4gICAgICogW2BTYW1lVmFsdWVaZXJvYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtc2FtZXZhbHVlemVybylcbiAgICAgKiBmb3IgZXF1YWxpdHkgY29tcGFyaXNvbnMuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVW5saWtlIGBfLndpdGhvdXRgLCB0aGlzIG1ldGhvZCBtdXRhdGVzIGBhcnJheWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gbW9kaWZ5LlxuICAgICAqIEBwYXJhbSB7Li4uKn0gW3ZhbHVlc10gVGhlIHZhbHVlcyB0byByZW1vdmUuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGBhcnJheWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBhcnJheSA9IFsxLCAyLCAzLCAxLCAyLCAzXTtcbiAgICAgKlxuICAgICAqIF8ucHVsbChhcnJheSwgMiwgMyk7XG4gICAgICogY29uc29sZS5sb2coYXJyYXkpO1xuICAgICAqIC8vID0+IFsxLCAxXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHB1bGwoKSB7XG4gICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cyxcbiAgICAgICAgICBhcnJheSA9IGFyZ3NbMF07XG5cbiAgICAgIGlmICghKGFycmF5ICYmIGFycmF5Lmxlbmd0aCkpIHtcbiAgICAgICAgcmV0dXJuIGFycmF5O1xuICAgICAgfVxuICAgICAgdmFyIGluZGV4ID0gMCxcbiAgICAgICAgICBpbmRleE9mID0gZ2V0SW5kZXhPZigpLFxuICAgICAgICAgIGxlbmd0aCA9IGFyZ3MubGVuZ3RoO1xuXG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICB2YXIgZnJvbUluZGV4ID0gMCxcbiAgICAgICAgICAgIHZhbHVlID0gYXJnc1tpbmRleF07XG5cbiAgICAgICAgd2hpbGUgKChmcm9tSW5kZXggPSBpbmRleE9mKGFycmF5LCB2YWx1ZSwgZnJvbUluZGV4KSkgPiAtMSkge1xuICAgICAgICAgIHNwbGljZS5jYWxsKGFycmF5LCBmcm9tSW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gYXJyYXk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBlbGVtZW50cyBmcm9tIGBhcnJheWAgY29ycmVzcG9uZGluZyB0byB0aGUgZ2l2ZW4gaW5kZXhlcyBhbmQgcmV0dXJuc1xuICAgICAqIGFuIGFycmF5IG9mIHRoZSByZW1vdmVkIGVsZW1lbnRzLiBJbmRleGVzIG1heSBiZSBzcGVjaWZpZWQgYXMgYW4gYXJyYXkgb2ZcbiAgICAgKiBpbmRleGVzIG9yIGFzIGluZGl2aWR1YWwgYXJndW1lbnRzLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFVubGlrZSBgXy5hdGAsIHRoaXMgbWV0aG9kIG11dGF0ZXMgYGFycmF5YC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBtb2RpZnkuXG4gICAgICogQHBhcmFtIHsuLi4obnVtYmVyfG51bWJlcltdKX0gW2luZGV4ZXNdIFRoZSBpbmRleGVzIG9mIGVsZW1lbnRzIHRvIHJlbW92ZSxcbiAgICAgKiAgc3BlY2lmaWVkIGFzIGluZGl2aWR1YWwgaW5kZXhlcyBvciBhcnJheXMgb2YgaW5kZXhlcy5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBhcnJheSBvZiByZW1vdmVkIGVsZW1lbnRzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgYXJyYXkgPSBbNSwgMTAsIDE1LCAyMF07XG4gICAgICogdmFyIGV2ZW5zID0gXy5wdWxsQXQoYXJyYXksIDEsIDMpO1xuICAgICAqXG4gICAgICogY29uc29sZS5sb2coYXJyYXkpO1xuICAgICAqIC8vID0+IFs1LCAxNV1cbiAgICAgKlxuICAgICAqIGNvbnNvbGUubG9nKGV2ZW5zKTtcbiAgICAgKiAvLyA9PiBbMTAsIDIwXVxuICAgICAqL1xuICAgIHZhciBwdWxsQXQgPSByZXN0UGFyYW0oZnVuY3Rpb24oYXJyYXksIGluZGV4ZXMpIHtcbiAgICAgIGluZGV4ZXMgPSBiYXNlRmxhdHRlbihpbmRleGVzKTtcblxuICAgICAgdmFyIHJlc3VsdCA9IGJhc2VBdChhcnJheSwgaW5kZXhlcyk7XG4gICAgICBiYXNlUHVsbEF0KGFycmF5LCBpbmRleGVzLnNvcnQoYmFzZUNvbXBhcmVBc2NlbmRpbmcpKTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGFsbCBlbGVtZW50cyBmcm9tIGBhcnJheWAgdGhhdCBgcHJlZGljYXRlYCByZXR1cm5zIHRydXRoeSBmb3JcbiAgICAgKiBhbmQgcmV0dXJucyBhbiBhcnJheSBvZiB0aGUgcmVtb3ZlZCBlbGVtZW50cy4gVGhlIHByZWRpY2F0ZSBpcyBib3VuZCB0b1xuICAgICAqIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50czogKHZhbHVlLCBpbmRleCwgYXJyYXkpLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgcHJlZGljYXRlYCB0aGUgY3JlYXRlZCBgXy5wcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGEgdmFsdWUgaXMgYWxzbyBwcm92aWRlZCBmb3IgYHRoaXNBcmdgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNQcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIGEgbWF0Y2hpbmcgcHJvcGVydHlcbiAgICAgKiB2YWx1ZSwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgcHJlZGljYXRlYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzYCBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuXG4gICAgICogb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVW5saWtlIGBfLmZpbHRlcmAsIHRoaXMgbWV0aG9kIG11dGF0ZXMgYGFycmF5YC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBtb2RpZnkuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbcHJlZGljYXRlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkXG4gICAgICogIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBwcmVkaWNhdGVgLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGFycmF5IG9mIHJlbW92ZWQgZWxlbWVudHMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBhcnJheSA9IFsxLCAyLCAzLCA0XTtcbiAgICAgKiB2YXIgZXZlbnMgPSBfLnJlbW92ZShhcnJheSwgZnVuY3Rpb24obikge1xuICAgICAqICAgcmV0dXJuIG4gJSAyID09IDA7XG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiBjb25zb2xlLmxvZyhhcnJheSk7XG4gICAgICogLy8gPT4gWzEsIDNdXG4gICAgICpcbiAgICAgKiBjb25zb2xlLmxvZyhldmVucyk7XG4gICAgICogLy8gPT4gWzIsIDRdXG4gICAgICovXG4gICAgZnVuY3Rpb24gcmVtb3ZlKGFycmF5LCBwcmVkaWNhdGUsIHRoaXNBcmcpIHtcbiAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgIGlmICghKGFycmF5ICYmIGFycmF5Lmxlbmd0aCkpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGluZGV4ZXMgPSBbXSxcbiAgICAgICAgICBsZW5ndGggPSBhcnJheS5sZW5ndGg7XG5cbiAgICAgIHByZWRpY2F0ZSA9IGdldENhbGxiYWNrKHByZWRpY2F0ZSwgdGhpc0FyZywgMyk7XG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICB2YXIgdmFsdWUgPSBhcnJheVtpbmRleF07XG4gICAgICAgIGlmIChwcmVkaWNhdGUodmFsdWUsIGluZGV4LCBhcnJheSkpIHtcbiAgICAgICAgICByZXN1bHQucHVzaCh2YWx1ZSk7XG4gICAgICAgICAgaW5kZXhlcy5wdXNoKGluZGV4KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYmFzZVB1bGxBdChhcnJheSwgaW5kZXhlcyk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgYWxsIGJ1dCB0aGUgZmlyc3QgZWxlbWVudCBvZiBgYXJyYXlgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGFsaWFzIHRhaWxcbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gcXVlcnkuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBzbGljZSBvZiBgYXJyYXlgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnJlc3QoWzEsIDIsIDNdKTtcbiAgICAgKiAvLyA9PiBbMiwgM11cbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZXN0KGFycmF5KSB7XG4gICAgICByZXR1cm4gZHJvcChhcnJheSwgMSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHNsaWNlIG9mIGBhcnJheWAgZnJvbSBgc3RhcnRgIHVwIHRvLCBidXQgbm90IGluY2x1ZGluZywgYGVuZGAuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgaXMgdXNlZCBpbnN0ZWFkIG9mIGBBcnJheSNzbGljZWAgdG8gc3VwcG9ydCBub2RlXG4gICAgICogbGlzdHMgaW4gSUUgPCA5IGFuZCB0byBlbnN1cmUgZGVuc2UgYXJyYXlzIGFyZSByZXR1cm5lZC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBzbGljZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3N0YXJ0PTBdIFRoZSBzdGFydCBwb3NpdGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2VuZD1hcnJheS5sZW5ndGhdIFRoZSBlbmQgcG9zaXRpb24uXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBzbGljZSBvZiBgYXJyYXlgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHNsaWNlKGFycmF5LCBzdGFydCwgZW5kKSB7XG4gICAgICB2YXIgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwO1xuICAgICAgaWYgKCFsZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgICAgaWYgKGVuZCAmJiB0eXBlb2YgZW5kICE9ICdudW1iZXInICYmIGlzSXRlcmF0ZWVDYWxsKGFycmF5LCBzdGFydCwgZW5kKSkge1xuICAgICAgICBzdGFydCA9IDA7XG4gICAgICAgIGVuZCA9IGxlbmd0aDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBiYXNlU2xpY2UoYXJyYXksIHN0YXJ0LCBlbmQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVzZXMgYSBiaW5hcnkgc2VhcmNoIHRvIGRldGVybWluZSB0aGUgbG93ZXN0IGluZGV4IGF0IHdoaWNoIGB2YWx1ZWAgc2hvdWxkXG4gICAgICogYmUgaW5zZXJ0ZWQgaW50byBgYXJyYXlgIGluIG9yZGVyIHRvIG1haW50YWluIGl0cyBzb3J0IG9yZGVyLiBJZiBhbiBpdGVyYXRlZVxuICAgICAqIGZ1bmN0aW9uIGlzIHByb3ZpZGVkIGl0IGlzIGludm9rZWQgZm9yIGB2YWx1ZWAgYW5kIGVhY2ggZWxlbWVudCBvZiBgYXJyYXlgXG4gICAgICogdG8gY29tcHV0ZSB0aGVpciBzb3J0IHJhbmtpbmcuIFRoZSBpdGVyYXRlZSBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kXG4gICAgICogaW52b2tlZCB3aXRoIG9uZSBhcmd1bWVudDsgKHZhbHVlKS5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGl0ZXJhdGVlYCB0aGUgY3JlYXRlZCBgXy5wcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGEgdmFsdWUgaXMgYWxzbyBwcm92aWRlZCBmb3IgYHRoaXNBcmdgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNQcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIGEgbWF0Y2hpbmcgcHJvcGVydHlcbiAgICAgKiB2YWx1ZSwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgaXRlcmF0ZWVgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNgIHN0eWxlXG4gICAgICogY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW5cbiAgICAgKiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBzb3J0ZWQgYXJyYXkgdG8gaW5zcGVjdC5cbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBldmFsdWF0ZS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtpdGVyYXRlZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZFxuICAgICAqICBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgaXRlcmF0ZWVgLlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IGF0IHdoaWNoIGB2YWx1ZWAgc2hvdWxkIGJlIGluc2VydGVkXG4gICAgICogIGludG8gYGFycmF5YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5zb3J0ZWRJbmRleChbMzAsIDUwXSwgNDApO1xuICAgICAqIC8vID0+IDFcbiAgICAgKlxuICAgICAqIF8uc29ydGVkSW5kZXgoWzQsIDQsIDUsIDVdLCA1KTtcbiAgICAgKiAvLyA9PiAyXG4gICAgICpcbiAgICAgKiB2YXIgZGljdCA9IHsgJ2RhdGEnOiB7ICd0aGlydHknOiAzMCwgJ2ZvcnR5JzogNDAsICdmaWZ0eSc6IDUwIH0gfTtcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIGFuIGl0ZXJhdGVlIGZ1bmN0aW9uXG4gICAgICogXy5zb3J0ZWRJbmRleChbJ3RoaXJ0eScsICdmaWZ0eSddLCAnZm9ydHknLCBmdW5jdGlvbih3b3JkKSB7XG4gICAgICogICByZXR1cm4gdGhpcy5kYXRhW3dvcmRdO1xuICAgICAqIH0sIGRpY3QpO1xuICAgICAqIC8vID0+IDFcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5wcm9wZXJ0eWAgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5zb3J0ZWRJbmRleChbeyAneCc6IDMwIH0sIHsgJ3gnOiA1MCB9XSwgeyAneCc6IDQwIH0sICd4Jyk7XG4gICAgICogLy8gPT4gMVxuICAgICAqL1xuICAgIHZhciBzb3J0ZWRJbmRleCA9IGNyZWF0ZVNvcnRlZEluZGV4KCk7XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLnNvcnRlZEluZGV4YCBleGNlcHQgdGhhdCBpdCByZXR1cm5zIHRoZSBoaWdoZXN0XG4gICAgICogaW5kZXggYXQgd2hpY2ggYHZhbHVlYCBzaG91bGQgYmUgaW5zZXJ0ZWQgaW50byBgYXJyYXlgIGluIG9yZGVyIHRvXG4gICAgICogbWFpbnRhaW4gaXRzIHNvcnQgb3JkZXIuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgc29ydGVkIGFycmF5IHRvIGluc3BlY3QuXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gZXZhbHVhdGUuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbaXRlcmF0ZWU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWRcbiAgICAgKiAgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGl0ZXJhdGVlYC5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBhdCB3aGljaCBgdmFsdWVgIHNob3VsZCBiZSBpbnNlcnRlZFxuICAgICAqICBpbnRvIGBhcnJheWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uc29ydGVkTGFzdEluZGV4KFs0LCA0LCA1LCA1XSwgNSk7XG4gICAgICogLy8gPT4gNFxuICAgICAqL1xuICAgIHZhciBzb3J0ZWRMYXN0SW5kZXggPSBjcmVhdGVTb3J0ZWRJbmRleCh0cnVlKTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBzbGljZSBvZiBgYXJyYXlgIHdpdGggYG5gIGVsZW1lbnRzIHRha2VuIGZyb20gdGhlIGJlZ2lubmluZy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBxdWVyeS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW249MV0gVGhlIG51bWJlciBvZiBlbGVtZW50cyB0byB0YWtlLlxuICAgICAqIEBwYXJhbS0ge09iamVjdH0gW2d1YXJkXSBFbmFibGVzIHVzZSBhcyBhIGNhbGxiYWNrIGZvciBmdW5jdGlvbnMgbGlrZSBgXy5tYXBgLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgc2xpY2Ugb2YgYGFycmF5YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy50YWtlKFsxLCAyLCAzXSk7XG4gICAgICogLy8gPT4gWzFdXG4gICAgICpcbiAgICAgKiBfLnRha2UoWzEsIDIsIDNdLCAyKTtcbiAgICAgKiAvLyA9PiBbMSwgMl1cbiAgICAgKlxuICAgICAqIF8udGFrZShbMSwgMiwgM10sIDUpO1xuICAgICAqIC8vID0+IFsxLCAyLCAzXVxuICAgICAqXG4gICAgICogXy50YWtlKFsxLCAyLCAzXSwgMCk7XG4gICAgICogLy8gPT4gW11cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB0YWtlKGFycmF5LCBuLCBndWFyZCkge1xuICAgICAgdmFyIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMDtcbiAgICAgIGlmICghbGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICAgIGlmIChndWFyZCA/IGlzSXRlcmF0ZWVDYWxsKGFycmF5LCBuLCBndWFyZCkgOiBuID09IG51bGwpIHtcbiAgICAgICAgbiA9IDE7XG4gICAgICB9XG4gICAgICByZXR1cm4gYmFzZVNsaWNlKGFycmF5LCAwLCBuIDwgMCA/IDAgOiBuKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgc2xpY2Ugb2YgYGFycmF5YCB3aXRoIGBuYCBlbGVtZW50cyB0YWtlbiBmcm9tIHRoZSBlbmQuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gcXVlcnkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtuPTFdIFRoZSBudW1iZXIgb2YgZWxlbWVudHMgdG8gdGFrZS5cbiAgICAgKiBAcGFyYW0tIHtPYmplY3R9IFtndWFyZF0gRW5hYmxlcyB1c2UgYXMgYSBjYWxsYmFjayBmb3IgZnVuY3Rpb25zIGxpa2UgYF8ubWFwYC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHNsaWNlIG9mIGBhcnJheWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8udGFrZVJpZ2h0KFsxLCAyLCAzXSk7XG4gICAgICogLy8gPT4gWzNdXG4gICAgICpcbiAgICAgKiBfLnRha2VSaWdodChbMSwgMiwgM10sIDIpO1xuICAgICAqIC8vID0+IFsyLCAzXVxuICAgICAqXG4gICAgICogXy50YWtlUmlnaHQoWzEsIDIsIDNdLCA1KTtcbiAgICAgKiAvLyA9PiBbMSwgMiwgM11cbiAgICAgKlxuICAgICAqIF8udGFrZVJpZ2h0KFsxLCAyLCAzXSwgMCk7XG4gICAgICogLy8gPT4gW11cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB0YWtlUmlnaHQoYXJyYXksIG4sIGd1YXJkKSB7XG4gICAgICB2YXIgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwO1xuICAgICAgaWYgKCFsZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgICAgaWYgKGd1YXJkID8gaXNJdGVyYXRlZUNhbGwoYXJyYXksIG4sIGd1YXJkKSA6IG4gPT0gbnVsbCkge1xuICAgICAgICBuID0gMTtcbiAgICAgIH1cbiAgICAgIG4gPSBsZW5ndGggLSAoK24gfHwgMCk7XG4gICAgICByZXR1cm4gYmFzZVNsaWNlKGFycmF5LCBuIDwgMCA/IDAgOiBuKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgc2xpY2Ugb2YgYGFycmF5YCB3aXRoIGVsZW1lbnRzIHRha2VuIGZyb20gdGhlIGVuZC4gRWxlbWVudHMgYXJlXG4gICAgICogdGFrZW4gdW50aWwgYHByZWRpY2F0ZWAgcmV0dXJucyBmYWxzZXkuIFRoZSBwcmVkaWNhdGUgaXMgYm91bmQgdG8gYHRoaXNBcmdgXG4gICAgICogYW5kIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM6ICh2YWx1ZSwgaW5kZXgsIGFycmF5KS5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYHByZWRpY2F0ZWAgdGhlIGNyZWF0ZWQgYF8ucHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhIHZhbHVlIGlzIGFsc28gcHJvdmlkZWQgZm9yIGB0aGlzQXJnYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzUHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSBhIG1hdGNoaW5nIHByb3BlcnR5XG4gICAgICogdmFsdWUsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYHByZWRpY2F0ZWAgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc2Agc3R5bGVcbiAgICAgKiBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlblxuICAgICAqIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHF1ZXJ5LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW3ByZWRpY2F0ZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZFxuICAgICAqICBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgcHJlZGljYXRlYC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHNsaWNlIG9mIGBhcnJheWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8udGFrZVJpZ2h0V2hpbGUoWzEsIDIsIDNdLCBmdW5jdGlvbihuKSB7XG4gICAgICogICByZXR1cm4gbiA+IDE7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gWzIsIDNdXG4gICAgICpcbiAgICAgKiB2YXIgdXNlcnMgPSBbXG4gICAgICogICB7ICd1c2VyJzogJ2Jhcm5leScsICAnYWN0aXZlJzogdHJ1ZSB9LFxuICAgICAqICAgeyAndXNlcic6ICdmcmVkJywgICAgJ2FjdGl2ZSc6IGZhbHNlIH0sXG4gICAgICogICB7ICd1c2VyJzogJ3BlYmJsZXMnLCAnYWN0aXZlJzogZmFsc2UgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ubWF0Y2hlc2AgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5wbHVjayhfLnRha2VSaWdodFdoaWxlKHVzZXJzLCB7ICd1c2VyJzogJ3BlYmJsZXMnLCAnYWN0aXZlJzogZmFsc2UgfSksICd1c2VyJyk7XG4gICAgICogLy8gPT4gWydwZWJibGVzJ11cbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5tYXRjaGVzUHJvcGVydHlgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8ucGx1Y2soXy50YWtlUmlnaHRXaGlsZSh1c2VycywgJ2FjdGl2ZScsIGZhbHNlKSwgJ3VzZXInKTtcbiAgICAgKiAvLyA9PiBbJ2ZyZWQnLCAncGViYmxlcyddXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ucHJvcGVydHlgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8ucGx1Y2soXy50YWtlUmlnaHRXaGlsZSh1c2VycywgJ2FjdGl2ZScpLCAndXNlcicpO1xuICAgICAqIC8vID0+IFtdXG4gICAgICovXG4gICAgZnVuY3Rpb24gdGFrZVJpZ2h0V2hpbGUoYXJyYXksIHByZWRpY2F0ZSwgdGhpc0FyZykge1xuICAgICAgcmV0dXJuIChhcnJheSAmJiBhcnJheS5sZW5ndGgpXG4gICAgICAgID8gYmFzZVdoaWxlKGFycmF5LCBnZXRDYWxsYmFjayhwcmVkaWNhdGUsIHRoaXNBcmcsIDMpLCBmYWxzZSwgdHJ1ZSlcbiAgICAgICAgOiBbXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgc2xpY2Ugb2YgYGFycmF5YCB3aXRoIGVsZW1lbnRzIHRha2VuIGZyb20gdGhlIGJlZ2lubmluZy4gRWxlbWVudHNcbiAgICAgKiBhcmUgdGFrZW4gdW50aWwgYHByZWRpY2F0ZWAgcmV0dXJucyBmYWxzZXkuIFRoZSBwcmVkaWNhdGUgaXMgYm91bmQgdG9cbiAgICAgKiBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM6ICh2YWx1ZSwgaW5kZXgsIGFycmF5KS5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYHByZWRpY2F0ZWAgdGhlIGNyZWF0ZWQgYF8ucHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhIHZhbHVlIGlzIGFsc28gcHJvdmlkZWQgZm9yIGB0aGlzQXJnYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzUHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSBhIG1hdGNoaW5nIHByb3BlcnR5XG4gICAgICogdmFsdWUsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYHByZWRpY2F0ZWAgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc2Agc3R5bGVcbiAgICAgKiBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlblxuICAgICAqIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHF1ZXJ5LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW3ByZWRpY2F0ZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZFxuICAgICAqICBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgcHJlZGljYXRlYC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHNsaWNlIG9mIGBhcnJheWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8udGFrZVdoaWxlKFsxLCAyLCAzXSwgZnVuY3Rpb24obikge1xuICAgICAqICAgcmV0dXJuIG4gPCAzO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IFsxLCAyXVxuICAgICAqXG4gICAgICogdmFyIHVzZXJzID0gW1xuICAgICAqICAgeyAndXNlcic6ICdiYXJuZXknLCAgJ2FjdGl2ZSc6IGZhbHNlIH0sXG4gICAgICogICB7ICd1c2VyJzogJ2ZyZWQnLCAgICAnYWN0aXZlJzogZmFsc2V9LFxuICAgICAqICAgeyAndXNlcic6ICdwZWJibGVzJywgJ2FjdGl2ZSc6IHRydWUgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ubWF0Y2hlc2AgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5wbHVjayhfLnRha2VXaGlsZSh1c2VycywgeyAndXNlcic6ICdiYXJuZXknLCAnYWN0aXZlJzogZmFsc2UgfSksICd1c2VyJyk7XG4gICAgICogLy8gPT4gWydiYXJuZXknXVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLm1hdGNoZXNQcm9wZXJ0eWAgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5wbHVjayhfLnRha2VXaGlsZSh1c2VycywgJ2FjdGl2ZScsIGZhbHNlKSwgJ3VzZXInKTtcbiAgICAgKiAvLyA9PiBbJ2Jhcm5leScsICdmcmVkJ11cbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5wcm9wZXJ0eWAgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5wbHVjayhfLnRha2VXaGlsZSh1c2VycywgJ2FjdGl2ZScpLCAndXNlcicpO1xuICAgICAqIC8vID0+IFtdXG4gICAgICovXG4gICAgZnVuY3Rpb24gdGFrZVdoaWxlKGFycmF5LCBwcmVkaWNhdGUsIHRoaXNBcmcpIHtcbiAgICAgIHJldHVybiAoYXJyYXkgJiYgYXJyYXkubGVuZ3RoKVxuICAgICAgICA/IGJhc2VXaGlsZShhcnJheSwgZ2V0Q2FsbGJhY2socHJlZGljYXRlLCB0aGlzQXJnLCAzKSlcbiAgICAgICAgOiBbXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIHVuaXF1ZSB2YWx1ZXMsIGluIG9yZGVyLCBmcm9tIGFsbCBvZiB0aGUgcHJvdmlkZWQgYXJyYXlzXG4gICAgICogdXNpbmcgW2BTYW1lVmFsdWVaZXJvYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtc2FtZXZhbHVlemVybylcbiAgICAgKiBmb3IgZXF1YWxpdHkgY29tcGFyaXNvbnMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0gey4uLkFycmF5fSBbYXJyYXlzXSBUaGUgYXJyYXlzIHRvIGluc3BlY3QuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgYXJyYXkgb2YgY29tYmluZWQgdmFsdWVzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnVuaW9uKFsxLCAyXSwgWzQsIDJdLCBbMiwgMV0pO1xuICAgICAqIC8vID0+IFsxLCAyLCA0XVxuICAgICAqL1xuICAgIHZhciB1bmlvbiA9IHJlc3RQYXJhbShmdW5jdGlvbihhcnJheXMpIHtcbiAgICAgIHJldHVybiBiYXNlVW5pcShiYXNlRmxhdHRlbihhcnJheXMsIGZhbHNlLCB0cnVlKSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZHVwbGljYXRlLWZyZWUgdmVyc2lvbiBvZiBhbiBhcnJheSwgdXNpbmdcbiAgICAgKiBbYFNhbWVWYWx1ZVplcm9gXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1zYW1ldmFsdWV6ZXJvKVxuICAgICAqIGZvciBlcXVhbGl0eSBjb21wYXJpc29ucywgaW4gd2hpY2ggb25seSB0aGUgZmlyc3Qgb2NjdXJlbmNlIG9mIGVhY2ggZWxlbWVudFxuICAgICAqIGlzIGtlcHQuIFByb3ZpZGluZyBgdHJ1ZWAgZm9yIGBpc1NvcnRlZGAgcGVyZm9ybXMgYSBmYXN0ZXIgc2VhcmNoIGFsZ29yaXRobVxuICAgICAqIGZvciBzb3J0ZWQgYXJyYXlzLiBJZiBhbiBpdGVyYXRlZSBmdW5jdGlvbiBpcyBwcm92aWRlZCBpdCBpcyBpbnZva2VkIGZvclxuICAgICAqIGVhY2ggZWxlbWVudCBpbiB0aGUgYXJyYXkgdG8gZ2VuZXJhdGUgdGhlIGNyaXRlcmlvbiBieSB3aGljaCB1bmlxdWVuZXNzXG4gICAgICogaXMgY29tcHV0ZWQuIFRoZSBgaXRlcmF0ZWVgIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIHRocmVlXG4gICAgICogYXJndW1lbnRzOiAodmFsdWUsIGluZGV4LCBhcnJheSkuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBpdGVyYXRlZWAgdGhlIGNyZWF0ZWQgYF8ucHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhIHZhbHVlIGlzIGFsc28gcHJvdmlkZWQgZm9yIGB0aGlzQXJnYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzUHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSBhIG1hdGNoaW5nIHByb3BlcnR5XG4gICAgICogdmFsdWUsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGl0ZXJhdGVlYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzYCBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuXG4gICAgICogb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAYWxpYXMgdW5pcXVlXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGluc3BlY3QuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbaXNTb3J0ZWRdIFNwZWNpZnkgdGhlIGFycmF5IGlzIHNvcnRlZC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtpdGVyYXRlZV0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGl0ZXJhdGVlYC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBkdXBsaWNhdGUtdmFsdWUtZnJlZSBhcnJheS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy51bmlxKFsyLCAxLCAyXSk7XG4gICAgICogLy8gPT4gWzIsIDFdXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBgaXNTb3J0ZWRgXG4gICAgICogXy51bmlxKFsxLCAxLCAyXSwgdHJ1ZSk7XG4gICAgICogLy8gPT4gWzEsIDJdXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBhbiBpdGVyYXRlZSBmdW5jdGlvblxuICAgICAqIF8udW5pcShbMSwgMi41LCAxLjUsIDJdLCBmdW5jdGlvbihuKSB7XG4gICAgICogICByZXR1cm4gdGhpcy5mbG9vcihuKTtcbiAgICAgKiB9LCBNYXRoKTtcbiAgICAgKiAvLyA9PiBbMSwgMi41XVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLnByb3BlcnR5YCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLnVuaXEoW3sgJ3gnOiAxIH0sIHsgJ3gnOiAyIH0sIHsgJ3gnOiAxIH1dLCAneCcpO1xuICAgICAqIC8vID0+IFt7ICd4JzogMSB9LCB7ICd4JzogMiB9XVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHVuaXEoYXJyYXksIGlzU29ydGVkLCBpdGVyYXRlZSwgdGhpc0FyZykge1xuICAgICAgdmFyIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMDtcbiAgICAgIGlmICghbGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICAgIGlmIChpc1NvcnRlZCAhPSBudWxsICYmIHR5cGVvZiBpc1NvcnRlZCAhPSAnYm9vbGVhbicpIHtcbiAgICAgICAgdGhpc0FyZyA9IGl0ZXJhdGVlO1xuICAgICAgICBpdGVyYXRlZSA9IGlzSXRlcmF0ZWVDYWxsKGFycmF5LCBpc1NvcnRlZCwgdGhpc0FyZykgPyB1bmRlZmluZWQgOiBpc1NvcnRlZDtcbiAgICAgICAgaXNTb3J0ZWQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHZhciBjYWxsYmFjayA9IGdldENhbGxiYWNrKCk7XG4gICAgICBpZiAoIShpdGVyYXRlZSA9PSBudWxsICYmIGNhbGxiYWNrID09PSBiYXNlQ2FsbGJhY2spKSB7XG4gICAgICAgIGl0ZXJhdGVlID0gY2FsbGJhY2soaXRlcmF0ZWUsIHRoaXNBcmcsIDMpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIChpc1NvcnRlZCAmJiBnZXRJbmRleE9mKCkgPT0gYmFzZUluZGV4T2YpXG4gICAgICAgID8gc29ydGVkVW5pcShhcnJheSwgaXRlcmF0ZWUpXG4gICAgICAgIDogYmFzZVVuaXEoYXJyYXksIGl0ZXJhdGVlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLnppcGAgZXhjZXB0IHRoYXQgaXQgYWNjZXB0cyBhbiBhcnJheSBvZiBncm91cGVkXG4gICAgICogZWxlbWVudHMgYW5kIGNyZWF0ZXMgYW4gYXJyYXkgcmVncm91cGluZyB0aGUgZWxlbWVudHMgdG8gdGhlaXIgcHJlLXppcFxuICAgICAqIGNvbmZpZ3VyYXRpb24uXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgb2YgZ3JvdXBlZCBlbGVtZW50cyB0byBwcm9jZXNzLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGFycmF5IG9mIHJlZ3JvdXBlZCBlbGVtZW50cy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIHppcHBlZCA9IF8uemlwKFsnZnJlZCcsICdiYXJuZXknXSwgWzMwLCA0MF0sIFt0cnVlLCBmYWxzZV0pO1xuICAgICAqIC8vID0+IFtbJ2ZyZWQnLCAzMCwgdHJ1ZV0sIFsnYmFybmV5JywgNDAsIGZhbHNlXV1cbiAgICAgKlxuICAgICAqIF8udW56aXAoemlwcGVkKTtcbiAgICAgKiAvLyA9PiBbWydmcmVkJywgJ2Jhcm5leSddLCBbMzAsIDQwXSwgW3RydWUsIGZhbHNlXV1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB1bnppcChhcnJheSkge1xuICAgICAgaWYgKCEoYXJyYXkgJiYgYXJyYXkubGVuZ3RoKSkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSAwO1xuXG4gICAgICBhcnJheSA9IGFycmF5RmlsdGVyKGFycmF5LCBmdW5jdGlvbihncm91cCkge1xuICAgICAgICBpZiAoaXNBcnJheUxpa2UoZ3JvdXApKSB7XG4gICAgICAgICAgbGVuZ3RoID0gbmF0aXZlTWF4KGdyb3VwLmxlbmd0aCwgbGVuZ3RoKTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICB2YXIgcmVzdWx0ID0gQXJyYXkobGVuZ3RoKTtcbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHJlc3VsdFtpbmRleF0gPSBhcnJheU1hcChhcnJheSwgYmFzZVByb3BlcnR5KGluZGV4KSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8udW56aXBgIGV4Y2VwdCB0aGF0IGl0IGFjY2VwdHMgYW4gaXRlcmF0ZWUgdG8gc3BlY2lmeVxuICAgICAqIGhvdyByZWdyb3VwZWQgdmFsdWVzIHNob3VsZCBiZSBjb21iaW5lZC4gVGhlIGBpdGVyYXRlZWAgaXMgYm91bmQgdG8gYHRoaXNBcmdgXG4gICAgICogYW5kIGludm9rZWQgd2l0aCBmb3VyIGFyZ3VtZW50czogKGFjY3VtdWxhdG9yLCB2YWx1ZSwgaW5kZXgsIGdyb3VwKS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSBvZiBncm91cGVkIGVsZW1lbnRzIHRvIHByb2Nlc3MuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2l0ZXJhdGVlXSBUaGUgZnVuY3Rpb24gdG8gY29tYmluZSByZWdyb3VwZWQgdmFsdWVzLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgaXRlcmF0ZWVgLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGFycmF5IG9mIHJlZ3JvdXBlZCBlbGVtZW50cy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIHppcHBlZCA9IF8uemlwKFsxLCAyXSwgWzEwLCAyMF0sIFsxMDAsIDIwMF0pO1xuICAgICAqIC8vID0+IFtbMSwgMTAsIDEwMF0sIFsyLCAyMCwgMjAwXV1cbiAgICAgKlxuICAgICAqIF8udW56aXBXaXRoKHppcHBlZCwgXy5hZGQpO1xuICAgICAqIC8vID0+IFszLCAzMCwgMzAwXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHVuemlwV2l0aChhcnJheSwgaXRlcmF0ZWUsIHRoaXNBcmcpIHtcbiAgICAgIHZhciBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDA7XG4gICAgICBpZiAoIWxlbmd0aCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgICB2YXIgcmVzdWx0ID0gdW56aXAoYXJyYXkpO1xuICAgICAgaWYgKGl0ZXJhdGVlID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICAgIGl0ZXJhdGVlID0gYmluZENhbGxiYWNrKGl0ZXJhdGVlLCB0aGlzQXJnLCA0KTtcbiAgICAgIHJldHVybiBhcnJheU1hcChyZXN1bHQsIGZ1bmN0aW9uKGdyb3VwKSB7XG4gICAgICAgIHJldHVybiBhcnJheVJlZHVjZShncm91cCwgaXRlcmF0ZWUsIHVuZGVmaW5lZCwgdHJ1ZSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IGV4Y2x1ZGluZyBhbGwgcHJvdmlkZWQgdmFsdWVzIHVzaW5nXG4gICAgICogW2BTYW1lVmFsdWVaZXJvYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtc2FtZXZhbHVlemVybylcbiAgICAgKiBmb3IgZXF1YWxpdHkgY29tcGFyaXNvbnMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gZmlsdGVyLlxuICAgICAqIEBwYXJhbSB7Li4uKn0gW3ZhbHVlc10gVGhlIHZhbHVlcyB0byBleGNsdWRlLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGFycmF5IG9mIGZpbHRlcmVkIHZhbHVlcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy53aXRob3V0KFsxLCAyLCAxLCAzXSwgMSwgMik7XG4gICAgICogLy8gPT4gWzNdXG4gICAgICovXG4gICAgdmFyIHdpdGhvdXQgPSByZXN0UGFyYW0oZnVuY3Rpb24oYXJyYXksIHZhbHVlcykge1xuICAgICAgcmV0dXJuIGlzQXJyYXlMaWtlKGFycmF5KVxuICAgICAgICA/IGJhc2VEaWZmZXJlbmNlKGFycmF5LCB2YWx1ZXMpXG4gICAgICAgIDogW107XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIHVuaXF1ZSB2YWx1ZXMgdGhhdCBpcyB0aGUgW3N5bW1ldHJpYyBkaWZmZXJlbmNlXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9TeW1tZXRyaWNfZGlmZmVyZW5jZSlcbiAgICAgKiBvZiB0aGUgcHJvdmlkZWQgYXJyYXlzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHsuLi5BcnJheX0gW2FycmF5c10gVGhlIGFycmF5cyB0byBpbnNwZWN0LlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGFycmF5IG9mIHZhbHVlcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy54b3IoWzEsIDJdLCBbNCwgMl0pO1xuICAgICAqIC8vID0+IFsxLCA0XVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHhvcigpIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGg7XG5cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHZhciBhcnJheSA9IGFyZ3VtZW50c1tpbmRleF07XG4gICAgICAgIGlmIChpc0FycmF5TGlrZShhcnJheSkpIHtcbiAgICAgICAgICB2YXIgcmVzdWx0ID0gcmVzdWx0XG4gICAgICAgICAgICA/IGFycmF5UHVzaChiYXNlRGlmZmVyZW5jZShyZXN1bHQsIGFycmF5KSwgYmFzZURpZmZlcmVuY2UoYXJyYXksIHJlc3VsdCkpXG4gICAgICAgICAgICA6IGFycmF5O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0ID8gYmFzZVVuaXEocmVzdWx0KSA6IFtdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgZ3JvdXBlZCBlbGVtZW50cywgdGhlIGZpcnN0IG9mIHdoaWNoIGNvbnRhaW5zIHRoZSBmaXJzdFxuICAgICAqIGVsZW1lbnRzIG9mIHRoZSBnaXZlbiBhcnJheXMsIHRoZSBzZWNvbmQgb2Ygd2hpY2ggY29udGFpbnMgdGhlIHNlY29uZCBlbGVtZW50c1xuICAgICAqIG9mIHRoZSBnaXZlbiBhcnJheXMsIGFuZCBzbyBvbi5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7Li4uQXJyYXl9IFthcnJheXNdIFRoZSBhcnJheXMgdG8gcHJvY2Vzcy5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBhcnJheSBvZiBncm91cGVkIGVsZW1lbnRzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnppcChbJ2ZyZWQnLCAnYmFybmV5J10sIFszMCwgNDBdLCBbdHJ1ZSwgZmFsc2VdKTtcbiAgICAgKiAvLyA9PiBbWydmcmVkJywgMzAsIHRydWVdLCBbJ2Jhcm5leScsIDQwLCBmYWxzZV1dXG4gICAgICovXG4gICAgdmFyIHppcCA9IHJlc3RQYXJhbSh1bnppcCk7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgaW52ZXJzZSBvZiBgXy5wYWlyc2A7IHRoaXMgbWV0aG9kIHJldHVybnMgYW4gb2JqZWN0IGNvbXBvc2VkIGZyb20gYXJyYXlzXG4gICAgICogb2YgcHJvcGVydHkgbmFtZXMgYW5kIHZhbHVlcy4gUHJvdmlkZSBlaXRoZXIgYSBzaW5nbGUgdHdvIGRpbWVuc2lvbmFsIGFycmF5LFxuICAgICAqIGUuZy4gYFtba2V5MSwgdmFsdWUxXSwgW2tleTIsIHZhbHVlMl1dYCBvciB0d28gYXJyYXlzLCBvbmUgb2YgcHJvcGVydHkgbmFtZXNcbiAgICAgKiBhbmQgb25lIG9mIGNvcnJlc3BvbmRpbmcgdmFsdWVzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGFsaWFzIG9iamVjdFxuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHByb3BzIFRoZSBwcm9wZXJ0eSBuYW1lcy5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbdmFsdWVzPVtdXSBUaGUgcHJvcGVydHkgdmFsdWVzLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG5ldyBvYmplY3QuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uemlwT2JqZWN0KFtbJ2ZyZWQnLCAzMF0sIFsnYmFybmV5JywgNDBdXSk7XG4gICAgICogLy8gPT4geyAnZnJlZCc6IDMwLCAnYmFybmV5JzogNDAgfVxuICAgICAqXG4gICAgICogXy56aXBPYmplY3QoWydmcmVkJywgJ2Jhcm5leSddLCBbMzAsIDQwXSk7XG4gICAgICogLy8gPT4geyAnZnJlZCc6IDMwLCAnYmFybmV5JzogNDAgfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHppcE9iamVjdChwcm9wcywgdmFsdWVzKSB7XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSBwcm9wcyA/IHByb3BzLmxlbmd0aCA6IDAsXG4gICAgICAgICAgcmVzdWx0ID0ge307XG5cbiAgICAgIGlmIChsZW5ndGggJiYgIXZhbHVlcyAmJiAhaXNBcnJheShwcm9wc1swXSkpIHtcbiAgICAgICAgdmFsdWVzID0gW107XG4gICAgICB9XG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICB2YXIga2V5ID0gcHJvcHNbaW5kZXhdO1xuICAgICAgICBpZiAodmFsdWVzKSB7XG4gICAgICAgICAgcmVzdWx0W2tleV0gPSB2YWx1ZXNbaW5kZXhdO1xuICAgICAgICB9IGVsc2UgaWYgKGtleSkge1xuICAgICAgICAgIHJlc3VsdFtrZXlbMF1dID0ga2V5WzFdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uemlwYCBleGNlcHQgdGhhdCBpdCBhY2NlcHRzIGFuIGl0ZXJhdGVlIHRvIHNwZWNpZnlcbiAgICAgKiBob3cgZ3JvdXBlZCB2YWx1ZXMgc2hvdWxkIGJlIGNvbWJpbmVkLiBUaGUgYGl0ZXJhdGVlYCBpcyBib3VuZCB0byBgdGhpc0FyZ2BcbiAgICAgKiBhbmQgaW52b2tlZCB3aXRoIGZvdXIgYXJndW1lbnRzOiAoYWNjdW11bGF0b3IsIHZhbHVlLCBpbmRleCwgZ3JvdXApLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHsuLi5BcnJheX0gW2FycmF5c10gVGhlIGFycmF5cyB0byBwcm9jZXNzLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtpdGVyYXRlZV0gVGhlIGZ1bmN0aW9uIHRvIGNvbWJpbmUgZ3JvdXBlZCB2YWx1ZXMuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBpdGVyYXRlZWAuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgYXJyYXkgb2YgZ3JvdXBlZCBlbGVtZW50cy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy56aXBXaXRoKFsxLCAyXSwgWzEwLCAyMF0sIFsxMDAsIDIwMF0sIF8uYWRkKTtcbiAgICAgKiAvLyA9PiBbMTExLCAyMjJdXG4gICAgICovXG4gICAgdmFyIHppcFdpdGggPSByZXN0UGFyYW0oZnVuY3Rpb24oYXJyYXlzKSB7XG4gICAgICB2YXIgbGVuZ3RoID0gYXJyYXlzLmxlbmd0aCxcbiAgICAgICAgICBpdGVyYXRlZSA9IGxlbmd0aCA+IDIgPyBhcnJheXNbbGVuZ3RoIC0gMl0gOiB1bmRlZmluZWQsXG4gICAgICAgICAgdGhpc0FyZyA9IGxlbmd0aCA+IDEgPyBhcnJheXNbbGVuZ3RoIC0gMV0gOiB1bmRlZmluZWQ7XG5cbiAgICAgIGlmIChsZW5ndGggPiAyICYmIHR5cGVvZiBpdGVyYXRlZSA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGxlbmd0aCAtPSAyO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaXRlcmF0ZWUgPSAobGVuZ3RoID4gMSAmJiB0eXBlb2YgdGhpc0FyZyA9PSAnZnVuY3Rpb24nKSA/ICgtLWxlbmd0aCwgdGhpc0FyZykgOiB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXNBcmcgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICBhcnJheXMubGVuZ3RoID0gbGVuZ3RoO1xuICAgICAgcmV0dXJuIHVuemlwV2l0aChhcnJheXMsIGl0ZXJhdGVlLCB0aGlzQXJnKTtcbiAgICB9KTtcblxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBgbG9kYXNoYCBvYmplY3QgdGhhdCB3cmFwcyBgdmFsdWVgIHdpdGggZXhwbGljaXQgbWV0aG9kXG4gICAgICogY2hhaW5pbmcgZW5hYmxlZC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBDaGFpblxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHdyYXAuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbmV3IGBsb2Rhc2hgIHdyYXBwZXIgaW5zdGFuY2UuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciB1c2VycyA9IFtcbiAgICAgKiAgIHsgJ3VzZXInOiAnYmFybmV5JywgICdhZ2UnOiAzNiB9LFxuICAgICAqICAgeyAndXNlcic6ICdmcmVkJywgICAgJ2FnZSc6IDQwIH0sXG4gICAgICogICB7ICd1c2VyJzogJ3BlYmJsZXMnLCAnYWdlJzogMSB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIHZhciB5b3VuZ2VzdCA9IF8uY2hhaW4odXNlcnMpXG4gICAgICogICAuc29ydEJ5KCdhZ2UnKVxuICAgICAqICAgLm1hcChmdW5jdGlvbihjaHIpIHtcbiAgICAgKiAgICAgcmV0dXJuIGNoci51c2VyICsgJyBpcyAnICsgY2hyLmFnZTtcbiAgICAgKiAgIH0pXG4gICAgICogICAuZmlyc3QoKVxuICAgICAqICAgLnZhbHVlKCk7XG4gICAgICogLy8gPT4gJ3BlYmJsZXMgaXMgMSdcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjaGFpbih2YWx1ZSkge1xuICAgICAgdmFyIHJlc3VsdCA9IGxvZGFzaCh2YWx1ZSk7XG4gICAgICByZXN1bHQuX19jaGFpbl9fID0gdHJ1ZTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaW52b2tlcyBgaW50ZXJjZXB0b3JgIGFuZCByZXR1cm5zIGB2YWx1ZWAuIFRoZSBpbnRlcmNlcHRvciBpc1xuICAgICAqIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIG9uZSBhcmd1bWVudDsgKHZhbHVlKS4gVGhlIHB1cnBvc2Ugb2ZcbiAgICAgKiB0aGlzIG1ldGhvZCBpcyB0byBcInRhcCBpbnRvXCIgYSBtZXRob2QgY2hhaW4gaW4gb3JkZXIgdG8gcGVyZm9ybSBvcGVyYXRpb25zXG4gICAgICogb24gaW50ZXJtZWRpYXRlIHJlc3VsdHMgd2l0aGluIHRoZSBjaGFpbi5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBDaGFpblxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb3ZpZGUgdG8gYGludGVyY2VwdG9yYC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpbnRlcmNlcHRvciBUaGUgZnVuY3Rpb24gdG8gaW52b2tlLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgaW50ZXJjZXB0b3JgLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIGB2YWx1ZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8oWzEsIDIsIDNdKVxuICAgICAqICAudGFwKGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgICogICAgYXJyYXkucG9wKCk7XG4gICAgICogIH0pXG4gICAgICogIC5yZXZlcnNlKClcbiAgICAgKiAgLnZhbHVlKCk7XG4gICAgICogLy8gPT4gWzIsIDFdXG4gICAgICovXG4gICAgZnVuY3Rpb24gdGFwKHZhbHVlLCBpbnRlcmNlcHRvciwgdGhpc0FyZykge1xuICAgICAgaW50ZXJjZXB0b3IuY2FsbCh0aGlzQXJnLCB2YWx1ZSk7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy50YXBgIGV4Y2VwdCB0aGF0IGl0IHJldHVybnMgdGhlIHJlc3VsdCBvZiBgaW50ZXJjZXB0b3JgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IENoYWluXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvdmlkZSB0byBgaW50ZXJjZXB0b3JgLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGludGVyY2VwdG9yIFRoZSBmdW5jdGlvbiB0byBpbnZva2UuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBpbnRlcmNlcHRvcmAuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHJlc3VsdCBvZiBgaW50ZXJjZXB0b3JgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfKCcgIGFiYyAgJylcbiAgICAgKiAgLmNoYWluKClcbiAgICAgKiAgLnRyaW0oKVxuICAgICAqICAudGhydShmdW5jdGlvbih2YWx1ZSkge1xuICAgICAqICAgIHJldHVybiBbdmFsdWVdO1xuICAgICAqICB9KVxuICAgICAqICAudmFsdWUoKTtcbiAgICAgKiAvLyA9PiBbJ2FiYyddXG4gICAgICovXG4gICAgZnVuY3Rpb24gdGhydSh2YWx1ZSwgaW50ZXJjZXB0b3IsIHRoaXNBcmcpIHtcbiAgICAgIHJldHVybiBpbnRlcmNlcHRvci5jYWxsKHRoaXNBcmcsIHZhbHVlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFbmFibGVzIGV4cGxpY2l0IG1ldGhvZCBjaGFpbmluZyBvbiB0aGUgd3JhcHBlciBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAbmFtZSBjaGFpblxuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IENoYWluXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbmV3IGBsb2Rhc2hgIHdyYXBwZXIgaW5zdGFuY2UuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciB1c2VycyA9IFtcbiAgICAgKiAgIHsgJ3VzZXInOiAnYmFybmV5JywgJ2FnZSc6IDM2IH0sXG4gICAgICogICB7ICd1c2VyJzogJ2ZyZWQnLCAgICdhZ2UnOiA0MCB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIC8vIHdpdGhvdXQgZXhwbGljaXQgY2hhaW5pbmdcbiAgICAgKiBfKHVzZXJzKS5maXJzdCgpO1xuICAgICAqIC8vID0+IHsgJ3VzZXInOiAnYmFybmV5JywgJ2FnZSc6IDM2IH1cbiAgICAgKlxuICAgICAqIC8vIHdpdGggZXhwbGljaXQgY2hhaW5pbmdcbiAgICAgKiBfKHVzZXJzKS5jaGFpbigpXG4gICAgICogICAuZmlyc3QoKVxuICAgICAqICAgLnBpY2soJ3VzZXInKVxuICAgICAqICAgLnZhbHVlKCk7XG4gICAgICogLy8gPT4geyAndXNlcic6ICdiYXJuZXknIH1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB3cmFwcGVyQ2hhaW4oKSB7XG4gICAgICByZXR1cm4gY2hhaW4odGhpcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXhlY3V0ZXMgdGhlIGNoYWluZWQgc2VxdWVuY2UgYW5kIHJldHVybnMgdGhlIHdyYXBwZWQgcmVzdWx0LlxuICAgICAqXG4gICAgICogQG5hbWUgY29tbWl0XG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQ2hhaW5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBuZXcgYGxvZGFzaGAgd3JhcHBlciBpbnN0YW5jZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGFycmF5ID0gWzEsIDJdO1xuICAgICAqIHZhciB3cmFwcGVkID0gXyhhcnJheSkucHVzaCgzKTtcbiAgICAgKlxuICAgICAqIGNvbnNvbGUubG9nKGFycmF5KTtcbiAgICAgKiAvLyA9PiBbMSwgMl1cbiAgICAgKlxuICAgICAqIHdyYXBwZWQgPSB3cmFwcGVkLmNvbW1pdCgpO1xuICAgICAqIGNvbnNvbGUubG9nKGFycmF5KTtcbiAgICAgKiAvLyA9PiBbMSwgMiwgM11cbiAgICAgKlxuICAgICAqIHdyYXBwZWQubGFzdCgpO1xuICAgICAqIC8vID0+IDNcbiAgICAgKlxuICAgICAqIGNvbnNvbGUubG9nKGFycmF5KTtcbiAgICAgKiAvLyA9PiBbMSwgMiwgM11cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB3cmFwcGVyQ29tbWl0KCkge1xuICAgICAgcmV0dXJuIG5ldyBMb2Rhc2hXcmFwcGVyKHRoaXMudmFsdWUoKSwgdGhpcy5fX2NoYWluX18pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgYXJyYXkgam9pbmluZyBhIHdyYXBwZWQgYXJyYXkgd2l0aCBhbnkgYWRkaXRpb25hbCBhcnJheXNcbiAgICAgKiBhbmQvb3IgdmFsdWVzLlxuICAgICAqXG4gICAgICogQG5hbWUgY29uY2F0XG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQ2hhaW5cbiAgICAgKiBAcGFyYW0gey4uLip9IFt2YWx1ZXNdIFRoZSB2YWx1ZXMgdG8gY29uY2F0ZW5hdGUuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgY29uY2F0ZW5hdGVkIGFycmF5LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgYXJyYXkgPSBbMV07XG4gICAgICogdmFyIHdyYXBwZWQgPSBfKGFycmF5KS5jb25jYXQoMiwgWzNdLCBbWzRdXSk7XG4gICAgICpcbiAgICAgKiBjb25zb2xlLmxvZyh3cmFwcGVkLnZhbHVlKCkpO1xuICAgICAqIC8vID0+IFsxLCAyLCAzLCBbNF1dXG4gICAgICpcbiAgICAgKiBjb25zb2xlLmxvZyhhcnJheSk7XG4gICAgICogLy8gPT4gWzFdXG4gICAgICovXG4gICAgdmFyIHdyYXBwZXJDb25jYXQgPSByZXN0UGFyYW0oZnVuY3Rpb24odmFsdWVzKSB7XG4gICAgICB2YWx1ZXMgPSBiYXNlRmxhdHRlbih2YWx1ZXMpO1xuICAgICAgcmV0dXJuIHRoaXMudGhydShmdW5jdGlvbihhcnJheSkge1xuICAgICAgICByZXR1cm4gYXJyYXlDb25jYXQoaXNBcnJheShhcnJheSkgPyBhcnJheSA6IFt0b09iamVjdChhcnJheSldLCB2YWx1ZXMpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgY2xvbmUgb2YgdGhlIGNoYWluZWQgc2VxdWVuY2UgcGxhbnRpbmcgYHZhbHVlYCBhcyB0aGUgd3JhcHBlZCB2YWx1ZS5cbiAgICAgKlxuICAgICAqIEBuYW1lIHBsYW50XG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQ2hhaW5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBuZXcgYGxvZGFzaGAgd3JhcHBlciBpbnN0YW5jZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGFycmF5ID0gWzEsIDJdO1xuICAgICAqIHZhciB3cmFwcGVkID0gXyhhcnJheSkubWFwKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICogICByZXR1cm4gTWF0aC5wb3codmFsdWUsIDIpO1xuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogdmFyIG90aGVyID0gWzMsIDRdO1xuICAgICAqIHZhciBvdGhlcldyYXBwZWQgPSB3cmFwcGVkLnBsYW50KG90aGVyKTtcbiAgICAgKlxuICAgICAqIG90aGVyV3JhcHBlZC52YWx1ZSgpO1xuICAgICAqIC8vID0+IFs5LCAxNl1cbiAgICAgKlxuICAgICAqIHdyYXBwZWQudmFsdWUoKTtcbiAgICAgKiAvLyA9PiBbMSwgNF1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB3cmFwcGVyUGxhbnQodmFsdWUpIHtcbiAgICAgIHZhciByZXN1bHQsXG4gICAgICAgICAgcGFyZW50ID0gdGhpcztcblxuICAgICAgd2hpbGUgKHBhcmVudCBpbnN0YW5jZW9mIGJhc2VMb2Rhc2gpIHtcbiAgICAgICAgdmFyIGNsb25lID0gd3JhcHBlckNsb25lKHBhcmVudCk7XG4gICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICBwcmV2aW91cy5fX3dyYXBwZWRfXyA9IGNsb25lO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdCA9IGNsb25lO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwcmV2aW91cyA9IGNsb25lO1xuICAgICAgICBwYXJlbnQgPSBwYXJlbnQuX193cmFwcGVkX187XG4gICAgICB9XG4gICAgICBwcmV2aW91cy5fX3dyYXBwZWRfXyA9IHZhbHVlO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXZlcnNlcyB0aGUgd3JhcHBlZCBhcnJheSBzbyB0aGUgZmlyc3QgZWxlbWVudCBiZWNvbWVzIHRoZSBsYXN0LCB0aGVcbiAgICAgKiBzZWNvbmQgZWxlbWVudCBiZWNvbWVzIHRoZSBzZWNvbmQgdG8gbGFzdCwgYW5kIHNvIG9uLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoaXMgbWV0aG9kIG11dGF0ZXMgdGhlIHdyYXBwZWQgYXJyYXkuXG4gICAgICpcbiAgICAgKiBAbmFtZSByZXZlcnNlXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQ2hhaW5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBuZXcgcmV2ZXJzZWQgYGxvZGFzaGAgd3JhcHBlciBpbnN0YW5jZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGFycmF5ID0gWzEsIDIsIDNdO1xuICAgICAqXG4gICAgICogXyhhcnJheSkucmV2ZXJzZSgpLnZhbHVlKClcbiAgICAgKiAvLyA9PiBbMywgMiwgMV1cbiAgICAgKlxuICAgICAqIGNvbnNvbGUubG9nKGFycmF5KTtcbiAgICAgKiAvLyA9PiBbMywgMiwgMV1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB3cmFwcGVyUmV2ZXJzZSgpIHtcbiAgICAgIHZhciB2YWx1ZSA9IHRoaXMuX193cmFwcGVkX187XG5cbiAgICAgIHZhciBpbnRlcmNlcHRvciA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiAod3JhcHBlZCAmJiB3cmFwcGVkLl9fZGlyX18gPCAwKSA/IHZhbHVlIDogdmFsdWUucmV2ZXJzZSgpO1xuICAgICAgfTtcbiAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIExhenlXcmFwcGVyKSB7XG4gICAgICAgIHZhciB3cmFwcGVkID0gdmFsdWU7XG4gICAgICAgIGlmICh0aGlzLl9fYWN0aW9uc19fLmxlbmd0aCkge1xuICAgICAgICAgIHdyYXBwZWQgPSBuZXcgTGF6eVdyYXBwZXIodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgd3JhcHBlZCA9IHdyYXBwZWQucmV2ZXJzZSgpO1xuICAgICAgICB3cmFwcGVkLl9fYWN0aW9uc19fLnB1c2goeyAnZnVuYyc6IHRocnUsICdhcmdzJzogW2ludGVyY2VwdG9yXSwgJ3RoaXNBcmcnOiB1bmRlZmluZWQgfSk7XG4gICAgICAgIHJldHVybiBuZXcgTG9kYXNoV3JhcHBlcih3cmFwcGVkLCB0aGlzLl9fY2hhaW5fXyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy50aHJ1KGludGVyY2VwdG9yKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQcm9kdWNlcyB0aGUgcmVzdWx0IG9mIGNvZXJjaW5nIHRoZSB1bndyYXBwZWQgdmFsdWUgdG8gYSBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAbmFtZSB0b1N0cmluZ1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IENoYWluXG4gICAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgY29lcmNlZCBzdHJpbmcgdmFsdWUuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8oWzEsIDIsIDNdKS50b1N0cmluZygpO1xuICAgICAqIC8vID0+ICcxLDIsMydcbiAgICAgKi9cbiAgICBmdW5jdGlvbiB3cmFwcGVyVG9TdHJpbmcoKSB7XG4gICAgICByZXR1cm4gKHRoaXMudmFsdWUoKSArICcnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFeGVjdXRlcyB0aGUgY2hhaW5lZCBzZXF1ZW5jZSB0byBleHRyYWN0IHRoZSB1bndyYXBwZWQgdmFsdWUuXG4gICAgICpcbiAgICAgKiBAbmFtZSB2YWx1ZVxuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGFsaWFzIHJ1biwgdG9KU09OLCB2YWx1ZU9mXG4gICAgICogQGNhdGVnb3J5IENoYWluXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHJlc29sdmVkIHVud3JhcHBlZCB2YWx1ZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXyhbMSwgMiwgM10pLnZhbHVlKCk7XG4gICAgICogLy8gPT4gWzEsIDIsIDNdXG4gICAgICovXG4gICAgZnVuY3Rpb24gd3JhcHBlclZhbHVlKCkge1xuICAgICAgcmV0dXJuIGJhc2VXcmFwcGVyVmFsdWUodGhpcy5fX3dyYXBwZWRfXywgdGhpcy5fX2FjdGlvbnNfXyk7XG4gICAgfVxuXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhcnJheSBvZiBlbGVtZW50cyBjb3JyZXNwb25kaW5nIHRvIHRoZSBnaXZlbiBrZXlzLCBvciBpbmRleGVzLFxuICAgICAqIG9mIGBjb2xsZWN0aW9uYC4gS2V5cyBtYXkgYmUgc3BlY2lmaWVkIGFzIGluZGl2aWR1YWwgYXJndW1lbnRzIG9yIGFzIGFycmF5c1xuICAgICAqIG9mIGtleXMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvblxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHsuLi4obnVtYmVyfG51bWJlcltdfHN0cmluZ3xzdHJpbmdbXSl9IFtwcm9wc10gVGhlIHByb3BlcnR5IG5hbWVzXG4gICAgICogIG9yIGluZGV4ZXMgb2YgZWxlbWVudHMgdG8gcGljaywgc3BlY2lmaWVkIGluZGl2aWR1YWxseSBvciBpbiBhcnJheXMuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgYXJyYXkgb2YgcGlja2VkIGVsZW1lbnRzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmF0KFsnYScsICdiJywgJ2MnXSwgWzAsIDJdKTtcbiAgICAgKiAvLyA9PiBbJ2EnLCAnYyddXG4gICAgICpcbiAgICAgKiBfLmF0KFsnYmFybmV5JywgJ2ZyZWQnLCAncGViYmxlcyddLCAwLCAyKTtcbiAgICAgKiAvLyA9PiBbJ2Jhcm5leScsICdwZWJibGVzJ11cbiAgICAgKi9cbiAgICB2YXIgYXQgPSByZXN0UGFyYW0oZnVuY3Rpb24oY29sbGVjdGlvbiwgcHJvcHMpIHtcbiAgICAgIHJldHVybiBiYXNlQXQoY29sbGVjdGlvbiwgYmFzZUZsYXR0ZW4ocHJvcHMpKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gb2JqZWN0IGNvbXBvc2VkIG9mIGtleXMgZ2VuZXJhdGVkIGZyb20gdGhlIHJlc3VsdHMgb2YgcnVubmluZ1xuICAgICAqIGVhY2ggZWxlbWVudCBvZiBgY29sbGVjdGlvbmAgdGhyb3VnaCBgaXRlcmF0ZWVgLiBUaGUgY29ycmVzcG9uZGluZyB2YWx1ZVxuICAgICAqIG9mIGVhY2gga2V5IGlzIHRoZSBudW1iZXIgb2YgdGltZXMgdGhlIGtleSB3YXMgcmV0dXJuZWQgYnkgYGl0ZXJhdGVlYC5cbiAgICAgKiBUaGUgYGl0ZXJhdGVlYCBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM6XG4gICAgICogKHZhbHVlLCBpbmRleHxrZXksIGNvbGxlY3Rpb24pLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgaXRlcmF0ZWVgIHRoZSBjcmVhdGVkIGBfLnByb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYSB2YWx1ZSBpcyBhbHNvIHByb3ZpZGVkIGZvciBgdGhpc0FyZ2AgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc1Byb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgYSBtYXRjaGluZyBwcm9wZXJ0eVxuICAgICAqIHZhbHVlLCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBpdGVyYXRlZWAgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc2Agc3R5bGVcbiAgICAgKiBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlblxuICAgICAqIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25cbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2l0ZXJhdGVlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkXG4gICAgICogIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBpdGVyYXRlZWAuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgY29tcG9zZWQgYWdncmVnYXRlIG9iamVjdC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5jb3VudEJ5KFs0LjMsIDYuMSwgNi40XSwgZnVuY3Rpb24obikge1xuICAgICAqICAgcmV0dXJuIE1hdGguZmxvb3Iobik7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4geyAnNCc6IDEsICc2JzogMiB9XG4gICAgICpcbiAgICAgKiBfLmNvdW50QnkoWzQuMywgNi4xLCA2LjRdLCBmdW5jdGlvbihuKSB7XG4gICAgICogICByZXR1cm4gdGhpcy5mbG9vcihuKTtcbiAgICAgKiB9LCBNYXRoKTtcbiAgICAgKiAvLyA9PiB7ICc0JzogMSwgJzYnOiAyIH1cbiAgICAgKlxuICAgICAqIF8uY291bnRCeShbJ29uZScsICd0d28nLCAndGhyZWUnXSwgJ2xlbmd0aCcpO1xuICAgICAqIC8vID0+IHsgJzMnOiAyLCAnNSc6IDEgfVxuICAgICAqL1xuICAgIHZhciBjb3VudEJ5ID0gY3JlYXRlQWdncmVnYXRvcihmdW5jdGlvbihyZXN1bHQsIHZhbHVlLCBrZXkpIHtcbiAgICAgIGhhc093blByb3BlcnR5LmNhbGwocmVzdWx0LCBrZXkpID8gKytyZXN1bHRba2V5XSA6IChyZXN1bHRba2V5XSA9IDEpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGBwcmVkaWNhdGVgIHJldHVybnMgdHJ1dGh5IGZvciAqKmFsbCoqIGVsZW1lbnRzIG9mIGBjb2xsZWN0aW9uYC5cbiAgICAgKiBUaGUgcHJlZGljYXRlIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50czpcbiAgICAgKiAodmFsdWUsIGluZGV4fGtleSwgY29sbGVjdGlvbikuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBwcmVkaWNhdGVgIHRoZSBjcmVhdGVkIGBfLnByb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYSB2YWx1ZSBpcyBhbHNvIHByb3ZpZGVkIGZvciBgdGhpc0FyZ2AgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc1Byb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgYSBtYXRjaGluZyBwcm9wZXJ0eVxuICAgICAqIHZhbHVlLCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBwcmVkaWNhdGVgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNgIHN0eWxlXG4gICAgICogY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW5cbiAgICAgKiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBhbGlhcyBhbGxcbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvblxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbcHJlZGljYXRlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkXG4gICAgICogIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBwcmVkaWNhdGVgLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbGwgZWxlbWVudHMgcGFzcyB0aGUgcHJlZGljYXRlIGNoZWNrLFxuICAgICAqICBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uZXZlcnkoW3RydWUsIDEsIG51bGwsICd5ZXMnXSwgQm9vbGVhbik7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKlxuICAgICAqIHZhciB1c2VycyA9IFtcbiAgICAgKiAgIHsgJ3VzZXInOiAnYmFybmV5JywgJ2FjdGl2ZSc6IGZhbHNlIH0sXG4gICAgICogICB7ICd1c2VyJzogJ2ZyZWQnLCAgICdhY3RpdmUnOiBmYWxzZSB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5tYXRjaGVzYCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLmV2ZXJ5KHVzZXJzLCB7ICd1c2VyJzogJ2Jhcm5leScsICdhY3RpdmUnOiBmYWxzZSB9KTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLm1hdGNoZXNQcm9wZXJ0eWAgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5ldmVyeSh1c2VycywgJ2FjdGl2ZScsIGZhbHNlKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ucHJvcGVydHlgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8uZXZlcnkodXNlcnMsICdhY3RpdmUnKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGV2ZXJ5KGNvbGxlY3Rpb24sIHByZWRpY2F0ZSwgdGhpc0FyZykge1xuICAgICAgdmFyIGZ1bmMgPSBpc0FycmF5KGNvbGxlY3Rpb24pID8gYXJyYXlFdmVyeSA6IGJhc2VFdmVyeTtcbiAgICAgIGlmICh0aGlzQXJnICYmIGlzSXRlcmF0ZWVDYWxsKGNvbGxlY3Rpb24sIHByZWRpY2F0ZSwgdGhpc0FyZykpIHtcbiAgICAgICAgcHJlZGljYXRlID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBwcmVkaWNhdGUgIT0gJ2Z1bmN0aW9uJyB8fCB0aGlzQXJnICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcHJlZGljYXRlID0gZ2V0Q2FsbGJhY2socHJlZGljYXRlLCB0aGlzQXJnLCAzKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmdW5jKGNvbGxlY3Rpb24sIHByZWRpY2F0ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgb3ZlciBlbGVtZW50cyBvZiBgY29sbGVjdGlvbmAsIHJldHVybmluZyBhbiBhcnJheSBvZiBhbGwgZWxlbWVudHNcbiAgICAgKiBgcHJlZGljYXRlYCByZXR1cm5zIHRydXRoeSBmb3IuIFRoZSBwcmVkaWNhdGUgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZFxuICAgICAqIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM6ICh2YWx1ZSwgaW5kZXh8a2V5LCBjb2xsZWN0aW9uKS5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYHByZWRpY2F0ZWAgdGhlIGNyZWF0ZWQgYF8ucHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhIHZhbHVlIGlzIGFsc28gcHJvdmlkZWQgZm9yIGB0aGlzQXJnYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzUHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSBhIG1hdGNoaW5nIHByb3BlcnR5XG4gICAgICogdmFsdWUsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYHByZWRpY2F0ZWAgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc2Agc3R5bGVcbiAgICAgKiBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlblxuICAgICAqIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGFsaWFzIHNlbGVjdFxuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtwcmVkaWNhdGU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWRcbiAgICAgKiAgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYHByZWRpY2F0ZWAuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgZmlsdGVyZWQgYXJyYXkuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uZmlsdGVyKFs0LCA1LCA2XSwgZnVuY3Rpb24obikge1xuICAgICAqICAgcmV0dXJuIG4gJSAyID09IDA7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gWzQsIDZdXG4gICAgICpcbiAgICAgKiB2YXIgdXNlcnMgPSBbXG4gICAgICogICB7ICd1c2VyJzogJ2Jhcm5leScsICdhZ2UnOiAzNiwgJ2FjdGl2ZSc6IHRydWUgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAnZnJlZCcsICAgJ2FnZSc6IDQwLCAnYWN0aXZlJzogZmFsc2UgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ubWF0Y2hlc2AgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5wbHVjayhfLmZpbHRlcih1c2VycywgeyAnYWdlJzogMzYsICdhY3RpdmUnOiB0cnVlIH0pLCAndXNlcicpO1xuICAgICAqIC8vID0+IFsnYmFybmV5J11cbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5tYXRjaGVzUHJvcGVydHlgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8ucGx1Y2soXy5maWx0ZXIodXNlcnMsICdhY3RpdmUnLCBmYWxzZSksICd1c2VyJyk7XG4gICAgICogLy8gPT4gWydmcmVkJ11cbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5wcm9wZXJ0eWAgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5wbHVjayhfLmZpbHRlcih1c2VycywgJ2FjdGl2ZScpLCAndXNlcicpO1xuICAgICAqIC8vID0+IFsnYmFybmV5J11cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBmaWx0ZXIoY29sbGVjdGlvbiwgcHJlZGljYXRlLCB0aGlzQXJnKSB7XG4gICAgICB2YXIgZnVuYyA9IGlzQXJyYXkoY29sbGVjdGlvbikgPyBhcnJheUZpbHRlciA6IGJhc2VGaWx0ZXI7XG4gICAgICBwcmVkaWNhdGUgPSBnZXRDYWxsYmFjayhwcmVkaWNhdGUsIHRoaXNBcmcsIDMpO1xuICAgICAgcmV0dXJuIGZ1bmMoY29sbGVjdGlvbiwgcHJlZGljYXRlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJdGVyYXRlcyBvdmVyIGVsZW1lbnRzIG9mIGBjb2xsZWN0aW9uYCwgcmV0dXJuaW5nIHRoZSBmaXJzdCBlbGVtZW50XG4gICAgICogYHByZWRpY2F0ZWAgcmV0dXJucyB0cnV0aHkgZm9yLiBUaGUgcHJlZGljYXRlIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmRcbiAgICAgKiBpbnZva2VkIHdpdGggdGhyZWUgYXJndW1lbnRzOiAodmFsdWUsIGluZGV4fGtleSwgY29sbGVjdGlvbikuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBwcmVkaWNhdGVgIHRoZSBjcmVhdGVkIGBfLnByb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYSB2YWx1ZSBpcyBhbHNvIHByb3ZpZGVkIGZvciBgdGhpc0FyZ2AgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc1Byb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgYSBtYXRjaGluZyBwcm9wZXJ0eVxuICAgICAqIHZhbHVlLCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBwcmVkaWNhdGVgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNgIHN0eWxlXG4gICAgICogY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW5cbiAgICAgKiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBhbGlhcyBkZXRlY3RcbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvblxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBzZWFyY2guXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbcHJlZGljYXRlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkXG4gICAgICogIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBwcmVkaWNhdGVgLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBtYXRjaGVkIGVsZW1lbnQsIGVsc2UgYHVuZGVmaW5lZGAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciB1c2VycyA9IFtcbiAgICAgKiAgIHsgJ3VzZXInOiAnYmFybmV5JywgICdhZ2UnOiAzNiwgJ2FjdGl2ZSc6IHRydWUgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAnZnJlZCcsICAgICdhZ2UnOiA0MCwgJ2FjdGl2ZSc6IGZhbHNlIH0sXG4gICAgICogICB7ICd1c2VyJzogJ3BlYmJsZXMnLCAnYWdlJzogMSwgICdhY3RpdmUnOiB0cnVlIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogXy5yZXN1bHQoXy5maW5kKHVzZXJzLCBmdW5jdGlvbihjaHIpIHtcbiAgICAgKiAgIHJldHVybiBjaHIuYWdlIDwgNDA7XG4gICAgICogfSksICd1c2VyJyk7XG4gICAgICogLy8gPT4gJ2Jhcm5leSdcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5tYXRjaGVzYCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLnJlc3VsdChfLmZpbmQodXNlcnMsIHsgJ2FnZSc6IDEsICdhY3RpdmUnOiB0cnVlIH0pLCAndXNlcicpO1xuICAgICAqIC8vID0+ICdwZWJibGVzJ1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLm1hdGNoZXNQcm9wZXJ0eWAgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5yZXN1bHQoXy5maW5kKHVzZXJzLCAnYWN0aXZlJywgZmFsc2UpLCAndXNlcicpO1xuICAgICAqIC8vID0+ICdmcmVkJ1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLnByb3BlcnR5YCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLnJlc3VsdChfLmZpbmQodXNlcnMsICdhY3RpdmUnKSwgJ3VzZXInKTtcbiAgICAgKiAvLyA9PiAnYmFybmV5J1xuICAgICAqL1xuICAgIHZhciBmaW5kID0gY3JlYXRlRmluZChiYXNlRWFjaCk7XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmZpbmRgIGV4Y2VwdCB0aGF0IGl0IGl0ZXJhdGVzIG92ZXIgZWxlbWVudHMgb2ZcbiAgICAgKiBgY29sbGVjdGlvbmAgZnJvbSByaWdodCB0byBsZWZ0LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25cbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gc2VhcmNoLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW3ByZWRpY2F0ZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZFxuICAgICAqICBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgcHJlZGljYXRlYC5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgbWF0Y2hlZCBlbGVtZW50LCBlbHNlIGB1bmRlZmluZWRgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmZpbmRMYXN0KFsxLCAyLCAzLCA0XSwgZnVuY3Rpb24obikge1xuICAgICAqICAgcmV0dXJuIG4gJSAyID09IDE7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gM1xuICAgICAqL1xuICAgIHZhciBmaW5kTGFzdCA9IGNyZWF0ZUZpbmQoYmFzZUVhY2hSaWdodCwgdHJ1ZSk7XG5cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBhIGRlZXAgY29tcGFyaXNvbiBiZXR3ZWVuIGVhY2ggZWxlbWVudCBpbiBgY29sbGVjdGlvbmAgYW5kIHRoZVxuICAgICAqIHNvdXJjZSBvYmplY3QsIHJldHVybmluZyB0aGUgZmlyc3QgZWxlbWVudCB0aGF0IGhhcyBlcXVpdmFsZW50IHByb3BlcnR5XG4gICAgICogdmFsdWVzLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoaXMgbWV0aG9kIHN1cHBvcnRzIGNvbXBhcmluZyBhcnJheXMsIGJvb2xlYW5zLCBgRGF0ZWAgb2JqZWN0cyxcbiAgICAgKiBudW1iZXJzLCBgT2JqZWN0YCBvYmplY3RzLCByZWdleGVzLCBhbmQgc3RyaW5ncy4gT2JqZWN0cyBhcmUgY29tcGFyZWQgYnlcbiAgICAgKiB0aGVpciBvd24sIG5vdCBpbmhlcml0ZWQsIGVudW1lcmFibGUgcHJvcGVydGllcy4gRm9yIGNvbXBhcmluZyBhIHNpbmdsZVxuICAgICAqIG93biBvciBpbmhlcml0ZWQgcHJvcGVydHkgdmFsdWUgc2VlIGBfLm1hdGNoZXNQcm9wZXJ0eWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvblxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBzZWFyY2guXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZSBUaGUgb2JqZWN0IG9mIHByb3BlcnR5IHZhbHVlcyB0byBtYXRjaC5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgbWF0Y2hlZCBlbGVtZW50LCBlbHNlIGB1bmRlZmluZWRgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgdXNlcnMgPSBbXG4gICAgICogICB7ICd1c2VyJzogJ2Jhcm5leScsICdhZ2UnOiAzNiwgJ2FjdGl2ZSc6IHRydWUgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAnZnJlZCcsICAgJ2FnZSc6IDQwLCAnYWN0aXZlJzogZmFsc2UgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiBfLnJlc3VsdChfLmZpbmRXaGVyZSh1c2VycywgeyAnYWdlJzogMzYsICdhY3RpdmUnOiB0cnVlIH0pLCAndXNlcicpO1xuICAgICAqIC8vID0+ICdiYXJuZXknXG4gICAgICpcbiAgICAgKiBfLnJlc3VsdChfLmZpbmRXaGVyZSh1c2VycywgeyAnYWdlJzogNDAsICdhY3RpdmUnOiBmYWxzZSB9KSwgJ3VzZXInKTtcbiAgICAgKiAvLyA9PiAnZnJlZCdcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBmaW5kV2hlcmUoY29sbGVjdGlvbiwgc291cmNlKSB7XG4gICAgICByZXR1cm4gZmluZChjb2xsZWN0aW9uLCBiYXNlTWF0Y2hlcyhzb3VyY2UpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJdGVyYXRlcyBvdmVyIGVsZW1lbnRzIG9mIGBjb2xsZWN0aW9uYCBpbnZva2luZyBgaXRlcmF0ZWVgIGZvciBlYWNoIGVsZW1lbnQuXG4gICAgICogVGhlIGBpdGVyYXRlZWAgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdGhyZWUgYXJndW1lbnRzOlxuICAgICAqICh2YWx1ZSwgaW5kZXh8a2V5LCBjb2xsZWN0aW9uKS4gSXRlcmF0ZWUgZnVuY3Rpb25zIG1heSBleGl0IGl0ZXJhdGlvbiBlYXJseVxuICAgICAqIGJ5IGV4cGxpY2l0bHkgcmV0dXJuaW5nIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogQXMgd2l0aCBvdGhlciBcIkNvbGxlY3Rpb25zXCIgbWV0aG9kcywgb2JqZWN0cyB3aXRoIGEgXCJsZW5ndGhcIiBwcm9wZXJ0eVxuICAgICAqIGFyZSBpdGVyYXRlZCBsaWtlIGFycmF5cy4gVG8gYXZvaWQgdGhpcyBiZWhhdmlvciBgXy5mb3JJbmAgb3IgYF8uZm9yT3duYFxuICAgICAqIG1heSBiZSB1c2VkIGZvciBvYmplY3QgaXRlcmF0aW9uLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGFsaWFzIGVhY2hcbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvblxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2l0ZXJhdGVlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBpdGVyYXRlZWAuXG4gICAgICogQHJldHVybnMge0FycmF5fE9iamVjdHxzdHJpbmd9IFJldHVybnMgYGNvbGxlY3Rpb25gLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfKFsxLCAyXSkuZm9yRWFjaChmdW5jdGlvbihuKSB7XG4gICAgICogICBjb25zb2xlLmxvZyhuKTtcbiAgICAgKiB9KS52YWx1ZSgpO1xuICAgICAqIC8vID0+IGxvZ3MgZWFjaCB2YWx1ZSBmcm9tIGxlZnQgdG8gcmlnaHQgYW5kIHJldHVybnMgdGhlIGFycmF5XG4gICAgICpcbiAgICAgKiBfLmZvckVhY2goeyAnYSc6IDEsICdiJzogMiB9LCBmdW5jdGlvbihuLCBrZXkpIHtcbiAgICAgKiAgIGNvbnNvbGUubG9nKG4sIGtleSk7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gbG9ncyBlYWNoIHZhbHVlLWtleSBwYWlyIGFuZCByZXR1cm5zIHRoZSBvYmplY3QgKGl0ZXJhdGlvbiBvcmRlciBpcyBub3QgZ3VhcmFudGVlZClcbiAgICAgKi9cbiAgICB2YXIgZm9yRWFjaCA9IGNyZWF0ZUZvckVhY2goYXJyYXlFYWNoLCBiYXNlRWFjaCk7XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmZvckVhY2hgIGV4Y2VwdCB0aGF0IGl0IGl0ZXJhdGVzIG92ZXIgZWxlbWVudHMgb2ZcbiAgICAgKiBgY29sbGVjdGlvbmAgZnJvbSByaWdodCB0byBsZWZ0LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGFsaWFzIGVhY2hSaWdodFxuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbaXRlcmF0ZWU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGl0ZXJhdGVlYC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl8T2JqZWN0fHN0cmluZ30gUmV0dXJucyBgY29sbGVjdGlvbmAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8oWzEsIDJdKS5mb3JFYWNoUmlnaHQoZnVuY3Rpb24obikge1xuICAgICAqICAgY29uc29sZS5sb2cobik7XG4gICAgICogfSkudmFsdWUoKTtcbiAgICAgKiAvLyA9PiBsb2dzIGVhY2ggdmFsdWUgZnJvbSByaWdodCB0byBsZWZ0IGFuZCByZXR1cm5zIHRoZSBhcnJheVxuICAgICAqL1xuICAgIHZhciBmb3JFYWNoUmlnaHQgPSBjcmVhdGVGb3JFYWNoKGFycmF5RWFjaFJpZ2h0LCBiYXNlRWFjaFJpZ2h0KTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gb2JqZWN0IGNvbXBvc2VkIG9mIGtleXMgZ2VuZXJhdGVkIGZyb20gdGhlIHJlc3VsdHMgb2YgcnVubmluZ1xuICAgICAqIGVhY2ggZWxlbWVudCBvZiBgY29sbGVjdGlvbmAgdGhyb3VnaCBgaXRlcmF0ZWVgLiBUaGUgY29ycmVzcG9uZGluZyB2YWx1ZVxuICAgICAqIG9mIGVhY2gga2V5IGlzIGFuIGFycmF5IG9mIHRoZSBlbGVtZW50cyByZXNwb25zaWJsZSBmb3IgZ2VuZXJhdGluZyB0aGUga2V5LlxuICAgICAqIFRoZSBgaXRlcmF0ZWVgIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50czpcbiAgICAgKiAodmFsdWUsIGluZGV4fGtleSwgY29sbGVjdGlvbikuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBpdGVyYXRlZWAgdGhlIGNyZWF0ZWQgYF8ucHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhIHZhbHVlIGlzIGFsc28gcHJvdmlkZWQgZm9yIGB0aGlzQXJnYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzUHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSBhIG1hdGNoaW5nIHByb3BlcnR5XG4gICAgICogdmFsdWUsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGl0ZXJhdGVlYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzYCBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuXG4gICAgICogb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvblxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbaXRlcmF0ZWU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWRcbiAgICAgKiAgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGl0ZXJhdGVlYC5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBjb21wb3NlZCBhZ2dyZWdhdGUgb2JqZWN0LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmdyb3VwQnkoWzQuMiwgNi4xLCA2LjRdLCBmdW5jdGlvbihuKSB7XG4gICAgICogICByZXR1cm4gTWF0aC5mbG9vcihuKTtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiB7ICc0JzogWzQuMl0sICc2JzogWzYuMSwgNi40XSB9XG4gICAgICpcbiAgICAgKiBfLmdyb3VwQnkoWzQuMiwgNi4xLCA2LjRdLCBmdW5jdGlvbihuKSB7XG4gICAgICogICByZXR1cm4gdGhpcy5mbG9vcihuKTtcbiAgICAgKiB9LCBNYXRoKTtcbiAgICAgKiAvLyA9PiB7ICc0JzogWzQuMl0sICc2JzogWzYuMSwgNi40XSB9XG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ucHJvcGVydHlgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8uZ3JvdXBCeShbJ29uZScsICd0d28nLCAndGhyZWUnXSwgJ2xlbmd0aCcpO1xuICAgICAqIC8vID0+IHsgJzMnOiBbJ29uZScsICd0d28nXSwgJzUnOiBbJ3RocmVlJ10gfVxuICAgICAqL1xuICAgIHZhciBncm91cEJ5ID0gY3JlYXRlQWdncmVnYXRvcihmdW5jdGlvbihyZXN1bHQsIHZhbHVlLCBrZXkpIHtcbiAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKHJlc3VsdCwga2V5KSkge1xuICAgICAgICByZXN1bHRba2V5XS5wdXNoKHZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdFtrZXldID0gW3ZhbHVlXTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGluIGBjb2xsZWN0aW9uYCB1c2luZ1xuICAgICAqIFtgU2FtZVZhbHVlWmVyb2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLXNhbWV2YWx1ZXplcm8pXG4gICAgICogZm9yIGVxdWFsaXR5IGNvbXBhcmlzb25zLiBJZiBgZnJvbUluZGV4YCBpcyBuZWdhdGl2ZSwgaXQgaXMgdXNlZCBhcyB0aGUgb2Zmc2V0XG4gICAgICogZnJvbSB0aGUgZW5kIG9mIGBjb2xsZWN0aW9uYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBhbGlhcyBjb250YWlucywgaW5jbHVkZVxuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIHNlYXJjaC5cbiAgICAgKiBAcGFyYW0geyp9IHRhcmdldCBUaGUgdmFsdWUgdG8gc2VhcmNoIGZvci5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2Zyb21JbmRleD0wXSBUaGUgaW5kZXggdG8gc2VhcmNoIGZyb20uXG4gICAgICogQHBhcmFtLSB7T2JqZWN0fSBbZ3VhcmRdIEVuYWJsZXMgdXNlIGFzIGEgY2FsbGJhY2sgZm9yIGZ1bmN0aW9ucyBsaWtlIGBfLnJlZHVjZWAuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGEgbWF0Y2hpbmcgZWxlbWVudCBpcyBmb3VuZCwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmluY2x1ZGVzKFsxLCAyLCAzXSwgMSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pbmNsdWRlcyhbMSwgMiwgM10sIDEsIDIpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICpcbiAgICAgKiBfLmluY2x1ZGVzKHsgJ3VzZXInOiAnZnJlZCcsICdhZ2UnOiA0MCB9LCAnZnJlZCcpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaW5jbHVkZXMoJ3BlYmJsZXMnLCAnZWInKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaW5jbHVkZXMoY29sbGVjdGlvbiwgdGFyZ2V0LCBmcm9tSW5kZXgsIGd1YXJkKSB7XG4gICAgICB2YXIgbGVuZ3RoID0gY29sbGVjdGlvbiA/IGdldExlbmd0aChjb2xsZWN0aW9uKSA6IDA7XG4gICAgICBpZiAoIWlzTGVuZ3RoKGxlbmd0aCkpIHtcbiAgICAgICAgY29sbGVjdGlvbiA9IHZhbHVlcyhjb2xsZWN0aW9uKTtcbiAgICAgICAgbGVuZ3RoID0gY29sbGVjdGlvbi5sZW5ndGg7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGZyb21JbmRleCAhPSAnbnVtYmVyJyB8fCAoZ3VhcmQgJiYgaXNJdGVyYXRlZUNhbGwodGFyZ2V0LCBmcm9tSW5kZXgsIGd1YXJkKSkpIHtcbiAgICAgICAgZnJvbUluZGV4ID0gMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZyb21JbmRleCA9IGZyb21JbmRleCA8IDAgPyBuYXRpdmVNYXgobGVuZ3RoICsgZnJvbUluZGV4LCAwKSA6IChmcm9tSW5kZXggfHwgMCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gKHR5cGVvZiBjb2xsZWN0aW9uID09ICdzdHJpbmcnIHx8ICFpc0FycmF5KGNvbGxlY3Rpb24pICYmIGlzU3RyaW5nKGNvbGxlY3Rpb24pKVxuICAgICAgICA/IChmcm9tSW5kZXggPD0gbGVuZ3RoICYmIGNvbGxlY3Rpb24uaW5kZXhPZih0YXJnZXQsIGZyb21JbmRleCkgPiAtMSlcbiAgICAgICAgOiAoISFsZW5ndGggJiYgZ2V0SW5kZXhPZihjb2xsZWN0aW9uLCB0YXJnZXQsIGZyb21JbmRleCkgPiAtMSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBvYmplY3QgY29tcG9zZWQgb2Yga2V5cyBnZW5lcmF0ZWQgZnJvbSB0aGUgcmVzdWx0cyBvZiBydW5uaW5nXG4gICAgICogZWFjaCBlbGVtZW50IG9mIGBjb2xsZWN0aW9uYCB0aHJvdWdoIGBpdGVyYXRlZWAuIFRoZSBjb3JyZXNwb25kaW5nIHZhbHVlXG4gICAgICogb2YgZWFjaCBrZXkgaXMgdGhlIGxhc3QgZWxlbWVudCByZXNwb25zaWJsZSBmb3IgZ2VuZXJhdGluZyB0aGUga2V5LiBUaGVcbiAgICAgKiBpdGVyYXRlZSBmdW5jdGlvbiBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM6XG4gICAgICogKHZhbHVlLCBpbmRleHxrZXksIGNvbGxlY3Rpb24pLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgaXRlcmF0ZWVgIHRoZSBjcmVhdGVkIGBfLnByb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYSB2YWx1ZSBpcyBhbHNvIHByb3ZpZGVkIGZvciBgdGhpc0FyZ2AgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc1Byb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgYSBtYXRjaGluZyBwcm9wZXJ0eVxuICAgICAqIHZhbHVlLCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBpdGVyYXRlZWAgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc2Agc3R5bGVcbiAgICAgKiBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlblxuICAgICAqIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25cbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2l0ZXJhdGVlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkXG4gICAgICogIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBpdGVyYXRlZWAuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgY29tcG9zZWQgYWdncmVnYXRlIG9iamVjdC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGtleURhdGEgPSBbXG4gICAgICogICB7ICdkaXInOiAnbGVmdCcsICdjb2RlJzogOTcgfSxcbiAgICAgKiAgIHsgJ2Rpcic6ICdyaWdodCcsICdjb2RlJzogMTAwIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogXy5pbmRleEJ5KGtleURhdGEsICdkaXInKTtcbiAgICAgKiAvLyA9PiB7ICdsZWZ0JzogeyAnZGlyJzogJ2xlZnQnLCAnY29kZSc6IDk3IH0sICdyaWdodCc6IHsgJ2Rpcic6ICdyaWdodCcsICdjb2RlJzogMTAwIH0gfVxuICAgICAqXG4gICAgICogXy5pbmRleEJ5KGtleURhdGEsIGZ1bmN0aW9uKG9iamVjdCkge1xuICAgICAqICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUob2JqZWN0LmNvZGUpO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IHsgJ2EnOiB7ICdkaXInOiAnbGVmdCcsICdjb2RlJzogOTcgfSwgJ2QnOiB7ICdkaXInOiAncmlnaHQnLCAnY29kZSc6IDEwMCB9IH1cbiAgICAgKlxuICAgICAqIF8uaW5kZXhCeShrZXlEYXRhLCBmdW5jdGlvbihvYmplY3QpIHtcbiAgICAgKiAgIHJldHVybiB0aGlzLmZyb21DaGFyQ29kZShvYmplY3QuY29kZSk7XG4gICAgICogfSwgU3RyaW5nKTtcbiAgICAgKiAvLyA9PiB7ICdhJzogeyAnZGlyJzogJ2xlZnQnLCAnY29kZSc6IDk3IH0sICdkJzogeyAnZGlyJzogJ3JpZ2h0JywgJ2NvZGUnOiAxMDAgfSB9XG4gICAgICovXG4gICAgdmFyIGluZGV4QnkgPSBjcmVhdGVBZ2dyZWdhdG9yKGZ1bmN0aW9uKHJlc3VsdCwgdmFsdWUsIGtleSkge1xuICAgICAgcmVzdWx0W2tleV0gPSB2YWx1ZTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEludm9rZXMgdGhlIG1ldGhvZCBhdCBgcGF0aGAgb2YgZWFjaCBlbGVtZW50IGluIGBjb2xsZWN0aW9uYCwgcmV0dXJuaW5nXG4gICAgICogYW4gYXJyYXkgb2YgdGhlIHJlc3VsdHMgb2YgZWFjaCBpbnZva2VkIG1ldGhvZC4gQW55IGFkZGl0aW9uYWwgYXJndW1lbnRzXG4gICAgICogYXJlIHByb3ZpZGVkIHRvIGVhY2ggaW52b2tlZCBtZXRob2QuIElmIGBtZXRob2ROYW1lYCBpcyBhIGZ1bmN0aW9uIGl0IGlzXG4gICAgICogaW52b2tlZCBmb3IsIGFuZCBgdGhpc2AgYm91bmQgdG8sIGVhY2ggZWxlbWVudCBpbiBgY29sbGVjdGlvbmAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvblxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtBcnJheXxGdW5jdGlvbnxzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIG1ldGhvZCB0byBpbnZva2Ugb3JcbiAgICAgKiAgdGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0gey4uLip9IFthcmdzXSBUaGUgYXJndW1lbnRzIHRvIGludm9rZSB0aGUgbWV0aG9kIHdpdGguXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiByZXN1bHRzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmludm9rZShbWzUsIDEsIDddLCBbMywgMiwgMV1dLCAnc29ydCcpO1xuICAgICAqIC8vID0+IFtbMSwgNSwgN10sIFsxLCAyLCAzXV1cbiAgICAgKlxuICAgICAqIF8uaW52b2tlKFsxMjMsIDQ1Nl0sIFN0cmluZy5wcm90b3R5cGUuc3BsaXQsICcnKTtcbiAgICAgKiAvLyA9PiBbWycxJywgJzInLCAnMyddLCBbJzQnLCAnNScsICc2J11dXG4gICAgICovXG4gICAgdmFyIGludm9rZSA9IHJlc3RQYXJhbShmdW5jdGlvbihjb2xsZWN0aW9uLCBwYXRoLCBhcmdzKSB7XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBpc0Z1bmMgPSB0eXBlb2YgcGF0aCA9PSAnZnVuY3Rpb24nLFxuICAgICAgICAgIGlzUHJvcCA9IGlzS2V5KHBhdGgpLFxuICAgICAgICAgIHJlc3VsdCA9IGlzQXJyYXlMaWtlKGNvbGxlY3Rpb24pID8gQXJyYXkoY29sbGVjdGlvbi5sZW5ndGgpIDogW107XG5cbiAgICAgIGJhc2VFYWNoKGNvbGxlY3Rpb24sIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHZhciBmdW5jID0gaXNGdW5jID8gcGF0aCA6ICgoaXNQcm9wICYmIHZhbHVlICE9IG51bGwpID8gdmFsdWVbcGF0aF0gOiB1bmRlZmluZWQpO1xuICAgICAgICByZXN1bHRbKytpbmRleF0gPSBmdW5jID8gZnVuYy5hcHBseSh2YWx1ZSwgYXJncykgOiBpbnZva2VQYXRoKHZhbHVlLCBwYXRoLCBhcmdzKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgdmFsdWVzIGJ5IHJ1bm5pbmcgZWFjaCBlbGVtZW50IGluIGBjb2xsZWN0aW9uYCB0aHJvdWdoXG4gICAgICogYGl0ZXJhdGVlYC4gVGhlIGBpdGVyYXRlZWAgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdGhyZWVcbiAgICAgKiBhcmd1bWVudHM6ICh2YWx1ZSwgaW5kZXh8a2V5LCBjb2xsZWN0aW9uKS5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGl0ZXJhdGVlYCB0aGUgY3JlYXRlZCBgXy5wcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGEgdmFsdWUgaXMgYWxzbyBwcm92aWRlZCBmb3IgYHRoaXNBcmdgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNQcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIGEgbWF0Y2hpbmcgcHJvcGVydHlcbiAgICAgKiB2YWx1ZSwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgaXRlcmF0ZWVgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNgIHN0eWxlXG4gICAgICogY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW5cbiAgICAgKiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIE1hbnkgbG9kYXNoIG1ldGhvZHMgYXJlIGd1YXJkZWQgdG8gd29yayBhcyBpdGVyYXRlZXMgZm9yIG1ldGhvZHMgbGlrZVxuICAgICAqIGBfLmV2ZXJ5YCwgYF8uZmlsdGVyYCwgYF8ubWFwYCwgYF8ubWFwVmFsdWVzYCwgYF8ucmVqZWN0YCwgYW5kIGBfLnNvbWVgLlxuICAgICAqXG4gICAgICogVGhlIGd1YXJkZWQgbWV0aG9kcyBhcmU6XG4gICAgICogYGFyeWAsIGBjYWxsYmFja2AsIGBjaHVua2AsIGBjbG9uZWAsIGBjcmVhdGVgLCBgY3VycnlgLCBgY3VycnlSaWdodGAsXG4gICAgICogYGRyb3BgLCBgZHJvcFJpZ2h0YCwgYGV2ZXJ5YCwgYGZpbGxgLCBgZmxhdHRlbmAsIGBpbnZlcnRgLCBgbWF4YCwgYG1pbmAsXG4gICAgICogYHBhcnNlSW50YCwgYHNsaWNlYCwgYHNvcnRCeWAsIGB0YWtlYCwgYHRha2VSaWdodGAsIGB0ZW1wbGF0ZWAsIGB0cmltYCxcbiAgICAgKiBgdHJpbUxlZnRgLCBgdHJpbVJpZ2h0YCwgYHRydW5jYCwgYHJhbmRvbWAsIGByYW5nZWAsIGBzYW1wbGVgLCBgc29tZWAsXG4gICAgICogYHN1bWAsIGB1bmlxYCwgYW5kIGB3b3Jkc2BcbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBhbGlhcyBjb2xsZWN0XG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25cbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2l0ZXJhdGVlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkXG4gICAgICogIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBpdGVyYXRlZWAuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgbWFwcGVkIGFycmF5LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBmdW5jdGlvbiB0aW1lc1RocmVlKG4pIHtcbiAgICAgKiAgIHJldHVybiBuICogMztcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBfLm1hcChbMSwgMl0sIHRpbWVzVGhyZWUpO1xuICAgICAqIC8vID0+IFszLCA2XVxuICAgICAqXG4gICAgICogXy5tYXAoeyAnYSc6IDEsICdiJzogMiB9LCB0aW1lc1RocmVlKTtcbiAgICAgKiAvLyA9PiBbMywgNl0gKGl0ZXJhdGlvbiBvcmRlciBpcyBub3QgZ3VhcmFudGVlZClcbiAgICAgKlxuICAgICAqIHZhciB1c2VycyA9IFtcbiAgICAgKiAgIHsgJ3VzZXInOiAnYmFybmV5JyB9LFxuICAgICAqICAgeyAndXNlcic6ICdmcmVkJyB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5wcm9wZXJ0eWAgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5tYXAodXNlcnMsICd1c2VyJyk7XG4gICAgICogLy8gPT4gWydiYXJuZXknLCAnZnJlZCddXG4gICAgICovXG4gICAgZnVuY3Rpb24gbWFwKGNvbGxlY3Rpb24sIGl0ZXJhdGVlLCB0aGlzQXJnKSB7XG4gICAgICB2YXIgZnVuYyA9IGlzQXJyYXkoY29sbGVjdGlvbikgPyBhcnJheU1hcCA6IGJhc2VNYXA7XG4gICAgICBpdGVyYXRlZSA9IGdldENhbGxiYWNrKGl0ZXJhdGVlLCB0aGlzQXJnLCAzKTtcbiAgICAgIHJldHVybiBmdW5jKGNvbGxlY3Rpb24sIGl0ZXJhdGVlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIGVsZW1lbnRzIHNwbGl0IGludG8gdHdvIGdyb3VwcywgdGhlIGZpcnN0IG9mIHdoaWNoXG4gICAgICogY29udGFpbnMgZWxlbWVudHMgYHByZWRpY2F0ZWAgcmV0dXJucyB0cnV0aHkgZm9yLCB3aGlsZSB0aGUgc2Vjb25kIG9mIHdoaWNoXG4gICAgICogY29udGFpbnMgZWxlbWVudHMgYHByZWRpY2F0ZWAgcmV0dXJucyBmYWxzZXkgZm9yLiBUaGUgcHJlZGljYXRlIGlzIGJvdW5kXG4gICAgICogdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdGhyZWUgYXJndW1lbnRzOiAodmFsdWUsIGluZGV4fGtleSwgY29sbGVjdGlvbikuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBwcmVkaWNhdGVgIHRoZSBjcmVhdGVkIGBfLnByb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYSB2YWx1ZSBpcyBhbHNvIHByb3ZpZGVkIGZvciBgdGhpc0FyZ2AgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc1Byb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgYSBtYXRjaGluZyBwcm9wZXJ0eVxuICAgICAqIHZhbHVlLCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBwcmVkaWNhdGVgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNgIHN0eWxlXG4gICAgICogY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW5cbiAgICAgKiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtwcmVkaWNhdGU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWRcbiAgICAgKiAgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYHByZWRpY2F0ZWAuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBncm91cGVkIGVsZW1lbnRzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnBhcnRpdGlvbihbMSwgMiwgM10sIGZ1bmN0aW9uKG4pIHtcbiAgICAgKiAgIHJldHVybiBuICUgMjtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiBbWzEsIDNdLCBbMl1dXG4gICAgICpcbiAgICAgKiBfLnBhcnRpdGlvbihbMS4yLCAyLjMsIDMuNF0sIGZ1bmN0aW9uKG4pIHtcbiAgICAgKiAgIHJldHVybiB0aGlzLmZsb29yKG4pICUgMjtcbiAgICAgKiB9LCBNYXRoKTtcbiAgICAgKiAvLyA9PiBbWzEuMiwgMy40XSwgWzIuM11dXG4gICAgICpcbiAgICAgKiB2YXIgdXNlcnMgPSBbXG4gICAgICogICB7ICd1c2VyJzogJ2Jhcm5leScsICAnYWdlJzogMzYsICdhY3RpdmUnOiBmYWxzZSB9LFxuICAgICAqICAgeyAndXNlcic6ICdmcmVkJywgICAgJ2FnZSc6IDQwLCAnYWN0aXZlJzogdHJ1ZSB9LFxuICAgICAqICAgeyAndXNlcic6ICdwZWJibGVzJywgJ2FnZSc6IDEsICAnYWN0aXZlJzogZmFsc2UgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiB2YXIgbWFwcGVyID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICAgKiAgIHJldHVybiBfLnBsdWNrKGFycmF5LCAndXNlcicpO1xuICAgICAqIH07XG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ubWF0Y2hlc2AgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5tYXAoXy5wYXJ0aXRpb24odXNlcnMsIHsgJ2FnZSc6IDEsICdhY3RpdmUnOiBmYWxzZSB9KSwgbWFwcGVyKTtcbiAgICAgKiAvLyA9PiBbWydwZWJibGVzJ10sIFsnYmFybmV5JywgJ2ZyZWQnXV1cbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5tYXRjaGVzUHJvcGVydHlgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8ubWFwKF8ucGFydGl0aW9uKHVzZXJzLCAnYWN0aXZlJywgZmFsc2UpLCBtYXBwZXIpO1xuICAgICAqIC8vID0+IFtbJ2Jhcm5leScsICdwZWJibGVzJ10sIFsnZnJlZCddXVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLnByb3BlcnR5YCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLm1hcChfLnBhcnRpdGlvbih1c2VycywgJ2FjdGl2ZScpLCBtYXBwZXIpO1xuICAgICAqIC8vID0+IFtbJ2ZyZWQnXSwgWydiYXJuZXknLCAncGViYmxlcyddXVxuICAgICAqL1xuICAgIHZhciBwYXJ0aXRpb24gPSBjcmVhdGVBZ2dyZWdhdG9yKGZ1bmN0aW9uKHJlc3VsdCwgdmFsdWUsIGtleSkge1xuICAgICAgcmVzdWx0W2tleSA/IDAgOiAxXS5wdXNoKHZhbHVlKTtcbiAgICB9LCBmdW5jdGlvbigpIHsgcmV0dXJuIFtbXSwgW11dOyB9KTtcblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHByb3BlcnR5IHZhbHVlIG9mIGBwYXRoYCBmcm9tIGFsbCBlbGVtZW50cyBpbiBgY29sbGVjdGlvbmAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvblxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIHBsdWNrLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWVzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgdXNlcnMgPSBbXG4gICAgICogICB7ICd1c2VyJzogJ2Jhcm5leScsICdhZ2UnOiAzNiB9LFxuICAgICAqICAgeyAndXNlcic6ICdmcmVkJywgICAnYWdlJzogNDAgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiBfLnBsdWNrKHVzZXJzLCAndXNlcicpO1xuICAgICAqIC8vID0+IFsnYmFybmV5JywgJ2ZyZWQnXVxuICAgICAqXG4gICAgICogdmFyIHVzZXJJbmRleCA9IF8uaW5kZXhCeSh1c2VycywgJ3VzZXInKTtcbiAgICAgKiBfLnBsdWNrKHVzZXJJbmRleCwgJ2FnZScpO1xuICAgICAqIC8vID0+IFszNiwgNDBdIChpdGVyYXRpb24gb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQpXG4gICAgICovXG4gICAgZnVuY3Rpb24gcGx1Y2soY29sbGVjdGlvbiwgcGF0aCkge1xuICAgICAgcmV0dXJuIG1hcChjb2xsZWN0aW9uLCBwcm9wZXJ0eShwYXRoKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVkdWNlcyBgY29sbGVjdGlvbmAgdG8gYSB2YWx1ZSB3aGljaCBpcyB0aGUgYWNjdW11bGF0ZWQgcmVzdWx0IG9mIHJ1bm5pbmdcbiAgICAgKiBlYWNoIGVsZW1lbnQgaW4gYGNvbGxlY3Rpb25gIHRocm91Z2ggYGl0ZXJhdGVlYCwgd2hlcmUgZWFjaCBzdWNjZXNzaXZlXG4gICAgICogaW52b2NhdGlvbiBpcyBzdXBwbGllZCB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBwcmV2aW91cy4gSWYgYGFjY3VtdWxhdG9yYFxuICAgICAqIGlzIG5vdCBwcm92aWRlZCB0aGUgZmlyc3QgZWxlbWVudCBvZiBgY29sbGVjdGlvbmAgaXMgdXNlZCBhcyB0aGUgaW5pdGlhbFxuICAgICAqIHZhbHVlLiBUaGUgYGl0ZXJhdGVlYCBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCBmb3VyIGFyZ3VtZW50czpcbiAgICAgKiAoYWNjdW11bGF0b3IsIHZhbHVlLCBpbmRleHxrZXksIGNvbGxlY3Rpb24pLlxuICAgICAqXG4gICAgICogTWFueSBsb2Rhc2ggbWV0aG9kcyBhcmUgZ3VhcmRlZCB0byB3b3JrIGFzIGl0ZXJhdGVlcyBmb3IgbWV0aG9kcyBsaWtlXG4gICAgICogYF8ucmVkdWNlYCwgYF8ucmVkdWNlUmlnaHRgLCBhbmQgYF8udHJhbnNmb3JtYC5cbiAgICAgKlxuICAgICAqIFRoZSBndWFyZGVkIG1ldGhvZHMgYXJlOlxuICAgICAqIGBhc3NpZ25gLCBgZGVmYXVsdHNgLCBgZGVmYXVsdHNEZWVwYCwgYGluY2x1ZGVzYCwgYG1lcmdlYCwgYHNvcnRCeUFsbGAsXG4gICAgICogYW5kIGBzb3J0QnlPcmRlcmBcbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBhbGlhcyBmb2xkbCwgaW5qZWN0XG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25cbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtpdGVyYXRlZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW2FjY3VtdWxhdG9yXSBUaGUgaW5pdGlhbCB2YWx1ZS5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGl0ZXJhdGVlYC5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgYWNjdW11bGF0ZWQgdmFsdWUuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ucmVkdWNlKFsxLCAyXSwgZnVuY3Rpb24odG90YWwsIG4pIHtcbiAgICAgKiAgIHJldHVybiB0b3RhbCArIG47XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gM1xuICAgICAqXG4gICAgICogXy5yZWR1Y2UoeyAnYSc6IDEsICdiJzogMiB9LCBmdW5jdGlvbihyZXN1bHQsIG4sIGtleSkge1xuICAgICAqICAgcmVzdWx0W2tleV0gPSBuICogMztcbiAgICAgKiAgIHJldHVybiByZXN1bHQ7XG4gICAgICogfSwge30pO1xuICAgICAqIC8vID0+IHsgJ2EnOiAzLCAnYic6IDYgfSAoaXRlcmF0aW9uIG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkKVxuICAgICAqL1xuICAgIHZhciByZWR1Y2UgPSBjcmVhdGVSZWR1Y2UoYXJyYXlSZWR1Y2UsIGJhc2VFYWNoKTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8ucmVkdWNlYCBleGNlcHQgdGhhdCBpdCBpdGVyYXRlcyBvdmVyIGVsZW1lbnRzIG9mXG4gICAgICogYGNvbGxlY3Rpb25gIGZyb20gcmlnaHQgdG8gbGVmdC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBhbGlhcyBmb2xkclxuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbaXRlcmF0ZWU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFthY2N1bXVsYXRvcl0gVGhlIGluaXRpYWwgdmFsdWUuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBpdGVyYXRlZWAuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGFjY3VtdWxhdGVkIHZhbHVlLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgYXJyYXkgPSBbWzAsIDFdLCBbMiwgM10sIFs0LCA1XV07XG4gICAgICpcbiAgICAgKiBfLnJlZHVjZVJpZ2h0KGFycmF5LCBmdW5jdGlvbihmbGF0dGVuZWQsIG90aGVyKSB7XG4gICAgICogICByZXR1cm4gZmxhdHRlbmVkLmNvbmNhdChvdGhlcik7XG4gICAgICogfSwgW10pO1xuICAgICAqIC8vID0+IFs0LCA1LCAyLCAzLCAwLCAxXVxuICAgICAqL1xuICAgIHZhciByZWR1Y2VSaWdodCA9IGNyZWF0ZVJlZHVjZShhcnJheVJlZHVjZVJpZ2h0LCBiYXNlRWFjaFJpZ2h0KTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBvcHBvc2l0ZSBvZiBgXy5maWx0ZXJgOyB0aGlzIG1ldGhvZCByZXR1cm5zIHRoZSBlbGVtZW50cyBvZiBgY29sbGVjdGlvbmBcbiAgICAgKiB0aGF0IGBwcmVkaWNhdGVgIGRvZXMgKipub3QqKiByZXR1cm4gdHJ1dGh5IGZvci5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtwcmVkaWNhdGU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWRcbiAgICAgKiAgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYHByZWRpY2F0ZWAuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgZmlsdGVyZWQgYXJyYXkuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ucmVqZWN0KFsxLCAyLCAzLCA0XSwgZnVuY3Rpb24obikge1xuICAgICAqICAgcmV0dXJuIG4gJSAyID09IDA7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gWzEsIDNdXG4gICAgICpcbiAgICAgKiB2YXIgdXNlcnMgPSBbXG4gICAgICogICB7ICd1c2VyJzogJ2Jhcm5leScsICdhZ2UnOiAzNiwgJ2FjdGl2ZSc6IGZhbHNlIH0sXG4gICAgICogICB7ICd1c2VyJzogJ2ZyZWQnLCAgICdhZ2UnOiA0MCwgJ2FjdGl2ZSc6IHRydWUgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ubWF0Y2hlc2AgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5wbHVjayhfLnJlamVjdCh1c2VycywgeyAnYWdlJzogNDAsICdhY3RpdmUnOiB0cnVlIH0pLCAndXNlcicpO1xuICAgICAqIC8vID0+IFsnYmFybmV5J11cbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5tYXRjaGVzUHJvcGVydHlgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8ucGx1Y2soXy5yZWplY3QodXNlcnMsICdhY3RpdmUnLCBmYWxzZSksICd1c2VyJyk7XG4gICAgICogLy8gPT4gWydmcmVkJ11cbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5wcm9wZXJ0eWAgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5wbHVjayhfLnJlamVjdCh1c2VycywgJ2FjdGl2ZScpLCAndXNlcicpO1xuICAgICAqIC8vID0+IFsnYmFybmV5J11cbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZWplY3QoY29sbGVjdGlvbiwgcHJlZGljYXRlLCB0aGlzQXJnKSB7XG4gICAgICB2YXIgZnVuYyA9IGlzQXJyYXkoY29sbGVjdGlvbikgPyBhcnJheUZpbHRlciA6IGJhc2VGaWx0ZXI7XG4gICAgICBwcmVkaWNhdGUgPSBnZXRDYWxsYmFjayhwcmVkaWNhdGUsIHRoaXNBcmcsIDMpO1xuICAgICAgcmV0dXJuIGZ1bmMoY29sbGVjdGlvbiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiAhcHJlZGljYXRlKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbik7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIGEgcmFuZG9tIGVsZW1lbnQgb3IgYG5gIHJhbmRvbSBlbGVtZW50cyBmcm9tIGEgY29sbGVjdGlvbi5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIHNhbXBsZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW25dIFRoZSBudW1iZXIgb2YgZWxlbWVudHMgdG8gc2FtcGxlLlxuICAgICAqIEBwYXJhbS0ge09iamVjdH0gW2d1YXJkXSBFbmFibGVzIHVzZSBhcyBhIGNhbGxiYWNrIGZvciBmdW5jdGlvbnMgbGlrZSBgXy5tYXBgLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSByYW5kb20gc2FtcGxlKHMpLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnNhbXBsZShbMSwgMiwgMywgNF0pO1xuICAgICAqIC8vID0+IDJcbiAgICAgKlxuICAgICAqIF8uc2FtcGxlKFsxLCAyLCAzLCA0XSwgMik7XG4gICAgICogLy8gPT4gWzMsIDFdXG4gICAgICovXG4gICAgZnVuY3Rpb24gc2FtcGxlKGNvbGxlY3Rpb24sIG4sIGd1YXJkKSB7XG4gICAgICBpZiAoZ3VhcmQgPyBpc0l0ZXJhdGVlQ2FsbChjb2xsZWN0aW9uLCBuLCBndWFyZCkgOiBuID09IG51bGwpIHtcbiAgICAgICAgY29sbGVjdGlvbiA9IHRvSXRlcmFibGUoY29sbGVjdGlvbik7XG4gICAgICAgIHZhciBsZW5ndGggPSBjb2xsZWN0aW9uLmxlbmd0aDtcbiAgICAgICAgcmV0dXJuIGxlbmd0aCA+IDAgPyBjb2xsZWN0aW9uW2Jhc2VSYW5kb20oMCwgbGVuZ3RoIC0gMSldIDogdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgcmVzdWx0ID0gdG9BcnJheShjb2xsZWN0aW9uKSxcbiAgICAgICAgICBsZW5ndGggPSByZXN1bHQubGVuZ3RoLFxuICAgICAgICAgIGxhc3RJbmRleCA9IGxlbmd0aCAtIDE7XG5cbiAgICAgIG4gPSBuYXRpdmVNaW4obiA8IDAgPyAwIDogKCtuIHx8IDApLCBsZW5ndGgpO1xuICAgICAgd2hpbGUgKCsraW5kZXggPCBuKSB7XG4gICAgICAgIHZhciByYW5kID0gYmFzZVJhbmRvbShpbmRleCwgbGFzdEluZGV4KSxcbiAgICAgICAgICAgIHZhbHVlID0gcmVzdWx0W3JhbmRdO1xuXG4gICAgICAgIHJlc3VsdFtyYW5kXSA9IHJlc3VsdFtpbmRleF07XG4gICAgICAgIHJlc3VsdFtpbmRleF0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICAgIHJlc3VsdC5sZW5ndGggPSBuO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIHNodWZmbGVkIHZhbHVlcywgdXNpbmcgYSB2ZXJzaW9uIG9mIHRoZVxuICAgICAqIFtGaXNoZXItWWF0ZXMgc2h1ZmZsZV0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRmlzaGVyLVlhdGVzX3NodWZmbGUpLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25cbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gc2h1ZmZsZS5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBzaHVmZmxlZCBhcnJheS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5zaHVmZmxlKFsxLCAyLCAzLCA0XSk7XG4gICAgICogLy8gPT4gWzQsIDEsIDMsIDJdXG4gICAgICovXG4gICAgZnVuY3Rpb24gc2h1ZmZsZShjb2xsZWN0aW9uKSB7XG4gICAgICByZXR1cm4gc2FtcGxlKGNvbGxlY3Rpb24sIFBPU0lUSVZFX0lORklOSVRZKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBzaXplIG9mIGBjb2xsZWN0aW9uYCBieSByZXR1cm5pbmcgaXRzIGxlbmd0aCBmb3IgYXJyYXktbGlrZVxuICAgICAqIHZhbHVlcyBvciB0aGUgbnVtYmVyIG9mIG93biBlbnVtZXJhYmxlIHByb3BlcnRpZXMgZm9yIG9iamVjdHMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvblxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpbnNwZWN0LlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHNpemUgb2YgYGNvbGxlY3Rpb25gLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnNpemUoWzEsIDIsIDNdKTtcbiAgICAgKiAvLyA9PiAzXG4gICAgICpcbiAgICAgKiBfLnNpemUoeyAnYSc6IDEsICdiJzogMiB9KTtcbiAgICAgKiAvLyA9PiAyXG4gICAgICpcbiAgICAgKiBfLnNpemUoJ3BlYmJsZXMnKTtcbiAgICAgKiAvLyA9PiA3XG4gICAgICovXG4gICAgZnVuY3Rpb24gc2l6ZShjb2xsZWN0aW9uKSB7XG4gICAgICB2YXIgbGVuZ3RoID0gY29sbGVjdGlvbiA/IGdldExlbmd0aChjb2xsZWN0aW9uKSA6IDA7XG4gICAgICByZXR1cm4gaXNMZW5ndGgobGVuZ3RoKSA/IGxlbmd0aCA6IGtleXMoY29sbGVjdGlvbikubGVuZ3RoO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgcHJlZGljYXRlYCByZXR1cm5zIHRydXRoeSBmb3IgKiphbnkqKiBlbGVtZW50IG9mIGBjb2xsZWN0aW9uYC5cbiAgICAgKiBUaGUgZnVuY3Rpb24gcmV0dXJucyBhcyBzb29uIGFzIGl0IGZpbmRzIGEgcGFzc2luZyB2YWx1ZSBhbmQgZG9lcyBub3QgaXRlcmF0ZVxuICAgICAqIG92ZXIgdGhlIGVudGlyZSBjb2xsZWN0aW9uLiBUaGUgcHJlZGljYXRlIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZFxuICAgICAqIHdpdGggdGhyZWUgYXJndW1lbnRzOiAodmFsdWUsIGluZGV4fGtleSwgY29sbGVjdGlvbikuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBwcmVkaWNhdGVgIHRoZSBjcmVhdGVkIGBfLnByb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYSB2YWx1ZSBpcyBhbHNvIHByb3ZpZGVkIGZvciBgdGhpc0FyZ2AgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc1Byb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgYSBtYXRjaGluZyBwcm9wZXJ0eVxuICAgICAqIHZhbHVlLCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBwcmVkaWNhdGVgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNgIHN0eWxlXG4gICAgICogY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW5cbiAgICAgKiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBhbGlhcyBhbnlcbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvblxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbcHJlZGljYXRlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkXG4gICAgICogIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBwcmVkaWNhdGVgLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbnkgZWxlbWVudCBwYXNzZXMgdGhlIHByZWRpY2F0ZSBjaGVjayxcbiAgICAgKiAgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnNvbWUoW251bGwsIDAsICd5ZXMnLCBmYWxzZV0sIEJvb2xlYW4pO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIHZhciB1c2VycyA9IFtcbiAgICAgKiAgIHsgJ3VzZXInOiAnYmFybmV5JywgJ2FjdGl2ZSc6IHRydWUgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAnZnJlZCcsICAgJ2FjdGl2ZSc6IGZhbHNlIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLm1hdGNoZXNgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8uc29tZSh1c2VycywgeyAndXNlcic6ICdiYXJuZXknLCAnYWN0aXZlJzogZmFsc2UgfSk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5tYXRjaGVzUHJvcGVydHlgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8uc29tZSh1c2VycywgJ2FjdGl2ZScsIGZhbHNlKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ucHJvcGVydHlgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8uc29tZSh1c2VycywgJ2FjdGl2ZScpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzb21lKGNvbGxlY3Rpb24sIHByZWRpY2F0ZSwgdGhpc0FyZykge1xuICAgICAgdmFyIGZ1bmMgPSBpc0FycmF5KGNvbGxlY3Rpb24pID8gYXJyYXlTb21lIDogYmFzZVNvbWU7XG4gICAgICBpZiAodGhpc0FyZyAmJiBpc0l0ZXJhdGVlQ2FsbChjb2xsZWN0aW9uLCBwcmVkaWNhdGUsIHRoaXNBcmcpKSB7XG4gICAgICAgIHByZWRpY2F0ZSA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgcHJlZGljYXRlICE9ICdmdW5jdGlvbicgfHwgdGhpc0FyZyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHByZWRpY2F0ZSA9IGdldENhbGxiYWNrKHByZWRpY2F0ZSwgdGhpc0FyZywgMyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZnVuYyhjb2xsZWN0aW9uLCBwcmVkaWNhdGUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgZWxlbWVudHMsIHNvcnRlZCBpbiBhc2NlbmRpbmcgb3JkZXIgYnkgdGhlIHJlc3VsdHMgb2ZcbiAgICAgKiBydW5uaW5nIGVhY2ggZWxlbWVudCBpbiBhIGNvbGxlY3Rpb24gdGhyb3VnaCBgaXRlcmF0ZWVgLiBUaGlzIG1ldGhvZCBwZXJmb3Jtc1xuICAgICAqIGEgc3RhYmxlIHNvcnQsIHRoYXQgaXMsIGl0IHByZXNlcnZlcyB0aGUgb3JpZ2luYWwgc29ydCBvcmRlciBvZiBlcXVhbCBlbGVtZW50cy5cbiAgICAgKiBUaGUgYGl0ZXJhdGVlYCBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM6XG4gICAgICogKHZhbHVlLCBpbmRleHxrZXksIGNvbGxlY3Rpb24pLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgaXRlcmF0ZWVgIHRoZSBjcmVhdGVkIGBfLnByb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYSB2YWx1ZSBpcyBhbHNvIHByb3ZpZGVkIGZvciBgdGhpc0FyZ2AgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc1Byb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgYSBtYXRjaGluZyBwcm9wZXJ0eVxuICAgICAqIHZhbHVlLCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBpdGVyYXRlZWAgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc2Agc3R5bGVcbiAgICAgKiBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlblxuICAgICAqIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25cbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2l0ZXJhdGVlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkXG4gICAgICogIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBpdGVyYXRlZWAuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgc29ydGVkIGFycmF5LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnNvcnRCeShbMSwgMiwgM10sIGZ1bmN0aW9uKG4pIHtcbiAgICAgKiAgIHJldHVybiBNYXRoLnNpbihuKTtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiBbMywgMSwgMl1cbiAgICAgKlxuICAgICAqIF8uc29ydEJ5KFsxLCAyLCAzXSwgZnVuY3Rpb24obikge1xuICAgICAqICAgcmV0dXJuIHRoaXMuc2luKG4pO1xuICAgICAqIH0sIE1hdGgpO1xuICAgICAqIC8vID0+IFszLCAxLCAyXVxuICAgICAqXG4gICAgICogdmFyIHVzZXJzID0gW1xuICAgICAqICAgeyAndXNlcic6ICdmcmVkJyB9LFxuICAgICAqICAgeyAndXNlcic6ICdwZWJibGVzJyB9LFxuICAgICAqICAgeyAndXNlcic6ICdiYXJuZXknIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLnByb3BlcnR5YCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLnBsdWNrKF8uc29ydEJ5KHVzZXJzLCAndXNlcicpLCAndXNlcicpO1xuICAgICAqIC8vID0+IFsnYmFybmV5JywgJ2ZyZWQnLCAncGViYmxlcyddXG4gICAgICovXG4gICAgZnVuY3Rpb24gc29ydEJ5KGNvbGxlY3Rpb24sIGl0ZXJhdGVlLCB0aGlzQXJnKSB7XG4gICAgICBpZiAoY29sbGVjdGlvbiA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzQXJnICYmIGlzSXRlcmF0ZWVDYWxsKGNvbGxlY3Rpb24sIGl0ZXJhdGVlLCB0aGlzQXJnKSkge1xuICAgICAgICBpdGVyYXRlZSA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIHZhciBpbmRleCA9IC0xO1xuICAgICAgaXRlcmF0ZWUgPSBnZXRDYWxsYmFjayhpdGVyYXRlZSwgdGhpc0FyZywgMyk7XG5cbiAgICAgIHZhciByZXN1bHQgPSBiYXNlTWFwKGNvbGxlY3Rpb24sIGZ1bmN0aW9uKHZhbHVlLCBrZXksIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIHsgJ2NyaXRlcmlhJzogaXRlcmF0ZWUodmFsdWUsIGtleSwgY29sbGVjdGlvbiksICdpbmRleCc6ICsraW5kZXgsICd2YWx1ZSc6IHZhbHVlIH07XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBiYXNlU29ydEJ5KHJlc3VsdCwgY29tcGFyZUFzY2VuZGluZyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5zb3J0QnlgIGV4Y2VwdCB0aGF0IGl0IGNhbiBzb3J0IGJ5IG11bHRpcGxlIGl0ZXJhdGVlc1xuICAgICAqIG9yIHByb3BlcnR5IG5hbWVzLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBhbiBpdGVyYXRlZSB0aGUgY3JlYXRlZCBgXy5wcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYW4gaXRlcmF0ZWUgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc2Agc3R5bGVcbiAgICAgKiBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlblxuICAgICAqIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25cbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7Li4uKEZ1bmN0aW9ufEZ1bmN0aW9uW118T2JqZWN0fE9iamVjdFtdfHN0cmluZ3xzdHJpbmdbXSl9IGl0ZXJhdGVlc1xuICAgICAqICBUaGUgaXRlcmF0ZWVzIHRvIHNvcnQgYnksIHNwZWNpZmllZCBhcyBpbmRpdmlkdWFsIHZhbHVlcyBvciBhcnJheXMgb2YgdmFsdWVzLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IHNvcnRlZCBhcnJheS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIHVzZXJzID0gW1xuICAgICAqICAgeyAndXNlcic6ICdmcmVkJywgICAnYWdlJzogNDggfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAnYmFybmV5JywgJ2FnZSc6IDM2IH0sXG4gICAgICogICB7ICd1c2VyJzogJ2ZyZWQnLCAgICdhZ2UnOiA0MiB9LFxuICAgICAqICAgeyAndXNlcic6ICdiYXJuZXknLCAnYWdlJzogMzQgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiBfLm1hcChfLnNvcnRCeUFsbCh1c2VycywgWyd1c2VyJywgJ2FnZSddKSwgXy52YWx1ZXMpO1xuICAgICAqIC8vID0+IFtbJ2Jhcm5leScsIDM0XSwgWydiYXJuZXknLCAzNl0sIFsnZnJlZCcsIDQyXSwgWydmcmVkJywgNDhdXVxuICAgICAqXG4gICAgICogXy5tYXAoXy5zb3J0QnlBbGwodXNlcnMsICd1c2VyJywgZnVuY3Rpb24oY2hyKSB7XG4gICAgICogICByZXR1cm4gTWF0aC5mbG9vcihjaHIuYWdlIC8gMTApO1xuICAgICAqIH0pLCBfLnZhbHVlcyk7XG4gICAgICogLy8gPT4gW1snYmFybmV5JywgMzZdLCBbJ2Jhcm5leScsIDM0XSwgWydmcmVkJywgNDhdLCBbJ2ZyZWQnLCA0Ml1dXG4gICAgICovXG4gICAgdmFyIHNvcnRCeUFsbCA9IHJlc3RQYXJhbShmdW5jdGlvbihjb2xsZWN0aW9uLCBpdGVyYXRlZXMpIHtcbiAgICAgIGlmIChjb2xsZWN0aW9uID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgICAgdmFyIGd1YXJkID0gaXRlcmF0ZWVzWzJdO1xuICAgICAgaWYgKGd1YXJkICYmIGlzSXRlcmF0ZWVDYWxsKGl0ZXJhdGVlc1swXSwgaXRlcmF0ZWVzWzFdLCBndWFyZCkpIHtcbiAgICAgICAgaXRlcmF0ZWVzLmxlbmd0aCA9IDE7XG4gICAgICB9XG4gICAgICByZXR1cm4gYmFzZVNvcnRCeU9yZGVyKGNvbGxlY3Rpb24sIGJhc2VGbGF0dGVuKGl0ZXJhdGVlcyksIFtdKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uc29ydEJ5QWxsYCBleGNlcHQgdGhhdCBpdCBhbGxvd3Mgc3BlY2lmeWluZyB0aGVcbiAgICAgKiBzb3J0IG9yZGVycyBvZiB0aGUgaXRlcmF0ZWVzIHRvIHNvcnQgYnkuIElmIGBvcmRlcnNgIGlzIHVuc3BlY2lmaWVkLCBhbGxcbiAgICAgKiB2YWx1ZXMgYXJlIHNvcnRlZCBpbiBhc2NlbmRpbmcgb3JkZXIuIE90aGVyd2lzZSwgYSB2YWx1ZSBpcyBzb3J0ZWQgaW5cbiAgICAgKiBhc2NlbmRpbmcgb3JkZXIgaWYgaXRzIGNvcnJlc3BvbmRpbmcgb3JkZXIgaXMgXCJhc2NcIiwgYW5kIGRlc2NlbmRpbmcgaWYgXCJkZXNjXCIuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGFuIGl0ZXJhdGVlIHRoZSBjcmVhdGVkIGBfLnByb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBhbiBpdGVyYXRlZSB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzYCBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuXG4gICAgICogb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvblxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbltdfE9iamVjdFtdfHN0cmluZ1tdfSBpdGVyYXRlZXMgVGhlIGl0ZXJhdGVlcyB0byBzb3J0IGJ5LlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbltdfSBbb3JkZXJzXSBUaGUgc29ydCBvcmRlcnMgb2YgYGl0ZXJhdGVlc2AuXG4gICAgICogQHBhcmFtLSB7T2JqZWN0fSBbZ3VhcmRdIEVuYWJsZXMgdXNlIGFzIGEgY2FsbGJhY2sgZm9yIGZ1bmN0aW9ucyBsaWtlIGBfLnJlZHVjZWAuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgc29ydGVkIGFycmF5LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgdXNlcnMgPSBbXG4gICAgICogICB7ICd1c2VyJzogJ2ZyZWQnLCAgICdhZ2UnOiA0OCB9LFxuICAgICAqICAgeyAndXNlcic6ICdiYXJuZXknLCAnYWdlJzogMzQgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAnZnJlZCcsICAgJ2FnZSc6IDQyIH0sXG4gICAgICogICB7ICd1c2VyJzogJ2Jhcm5leScsICdhZ2UnOiAzNiB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIC8vIHNvcnQgYnkgYHVzZXJgIGluIGFzY2VuZGluZyBvcmRlciBhbmQgYnkgYGFnZWAgaW4gZGVzY2VuZGluZyBvcmRlclxuICAgICAqIF8ubWFwKF8uc29ydEJ5T3JkZXIodXNlcnMsIFsndXNlcicsICdhZ2UnXSwgWydhc2MnLCAnZGVzYyddKSwgXy52YWx1ZXMpO1xuICAgICAqIC8vID0+IFtbJ2Jhcm5leScsIDM2XSwgWydiYXJuZXknLCAzNF0sIFsnZnJlZCcsIDQ4XSwgWydmcmVkJywgNDJdXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHNvcnRCeU9yZGVyKGNvbGxlY3Rpb24sIGl0ZXJhdGVlcywgb3JkZXJzLCBndWFyZCkge1xuICAgICAgaWYgKGNvbGxlY3Rpb24gPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgICBpZiAoZ3VhcmQgJiYgaXNJdGVyYXRlZUNhbGwoaXRlcmF0ZWVzLCBvcmRlcnMsIGd1YXJkKSkge1xuICAgICAgICBvcmRlcnMgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICBpZiAoIWlzQXJyYXkoaXRlcmF0ZWVzKSkge1xuICAgICAgICBpdGVyYXRlZXMgPSBpdGVyYXRlZXMgPT0gbnVsbCA/IFtdIDogW2l0ZXJhdGVlc107XG4gICAgICB9XG4gICAgICBpZiAoIWlzQXJyYXkob3JkZXJzKSkge1xuICAgICAgICBvcmRlcnMgPSBvcmRlcnMgPT0gbnVsbCA/IFtdIDogW29yZGVyc107XG4gICAgICB9XG4gICAgICByZXR1cm4gYmFzZVNvcnRCeU9yZGVyKGNvbGxlY3Rpb24sIGl0ZXJhdGVlcywgb3JkZXJzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBhIGRlZXAgY29tcGFyaXNvbiBiZXR3ZWVuIGVhY2ggZWxlbWVudCBpbiBgY29sbGVjdGlvbmAgYW5kIHRoZVxuICAgICAqIHNvdXJjZSBvYmplY3QsIHJldHVybmluZyBhbiBhcnJheSBvZiBhbGwgZWxlbWVudHMgdGhhdCBoYXZlIGVxdWl2YWxlbnRcbiAgICAgKiBwcm9wZXJ0eSB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVGhpcyBtZXRob2Qgc3VwcG9ydHMgY29tcGFyaW5nIGFycmF5cywgYm9vbGVhbnMsIGBEYXRlYCBvYmplY3RzLFxuICAgICAqIG51bWJlcnMsIGBPYmplY3RgIG9iamVjdHMsIHJlZ2V4ZXMsIGFuZCBzdHJpbmdzLiBPYmplY3RzIGFyZSBjb21wYXJlZCBieVxuICAgICAqIHRoZWlyIG93biwgbm90IGluaGVyaXRlZCwgZW51bWVyYWJsZSBwcm9wZXJ0aWVzLiBGb3IgY29tcGFyaW5nIGEgc2luZ2xlXG4gICAgICogb3duIG9yIGluaGVyaXRlZCBwcm9wZXJ0eSB2YWx1ZSBzZWUgYF8ubWF0Y2hlc1Byb3BlcnR5YC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIHNlYXJjaC5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gc291cmNlIFRoZSBvYmplY3Qgb2YgcHJvcGVydHkgdmFsdWVzIHRvIG1hdGNoLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGZpbHRlcmVkIGFycmF5LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgdXNlcnMgPSBbXG4gICAgICogICB7ICd1c2VyJzogJ2Jhcm5leScsICdhZ2UnOiAzNiwgJ2FjdGl2ZSc6IGZhbHNlLCAncGV0cyc6IFsnaG9wcHknXSB9LFxuICAgICAqICAgeyAndXNlcic6ICdmcmVkJywgICAnYWdlJzogNDAsICdhY3RpdmUnOiB0cnVlLCAncGV0cyc6IFsnYmFieSBwdXNzJywgJ2Rpbm8nXSB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIF8ucGx1Y2soXy53aGVyZSh1c2VycywgeyAnYWdlJzogMzYsICdhY3RpdmUnOiBmYWxzZSB9KSwgJ3VzZXInKTtcbiAgICAgKiAvLyA9PiBbJ2Jhcm5leSddXG4gICAgICpcbiAgICAgKiBfLnBsdWNrKF8ud2hlcmUodXNlcnMsIHsgJ3BldHMnOiBbJ2Rpbm8nXSB9KSwgJ3VzZXInKTtcbiAgICAgKiAvLyA9PiBbJ2ZyZWQnXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHdoZXJlKGNvbGxlY3Rpb24sIHNvdXJjZSkge1xuICAgICAgcmV0dXJuIGZpbHRlcihjb2xsZWN0aW9uLCBiYXNlTWF0Y2hlcyhzb3VyY2UpKTtcbiAgICB9XG5cbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRoYXQgaGF2ZSBlbGFwc2VkIHNpbmNlIHRoZSBVbml4IGVwb2NoXG4gICAgICogKDEgSmFudWFyeSAxOTcwIDAwOjAwOjAwIFVUQykuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgRGF0ZVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmRlZmVyKGZ1bmN0aW9uKHN0YW1wKSB7XG4gICAgICogICBjb25zb2xlLmxvZyhfLm5vdygpIC0gc3RhbXApO1xuICAgICAqIH0sIF8ubm93KCkpO1xuICAgICAqIC8vID0+IGxvZ3MgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgaXQgdG9vayBmb3IgdGhlIGRlZmVycmVkIGZ1bmN0aW9uIHRvIGJlIGludm9rZWRcbiAgICAgKi9cbiAgICB2YXIgbm93ID0gbmF0aXZlTm93IHx8IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgIH07XG5cbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAvKipcbiAgICAgKiBUaGUgb3Bwb3NpdGUgb2YgYF8uYmVmb3JlYDsgdGhpcyBtZXRob2QgY3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgaW52b2tlc1xuICAgICAqIGBmdW5jYCBvbmNlIGl0IGlzIGNhbGxlZCBgbmAgb3IgbW9yZSB0aW1lcy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBuIFRoZSBudW1iZXIgb2YgY2FsbHMgYmVmb3JlIGBmdW5jYCBpcyBpbnZva2VkLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHJlc3RyaWN0LlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHJlc3RyaWN0ZWQgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBzYXZlcyA9IFsncHJvZmlsZScsICdzZXR0aW5ncyddO1xuICAgICAqXG4gICAgICogdmFyIGRvbmUgPSBfLmFmdGVyKHNhdmVzLmxlbmd0aCwgZnVuY3Rpb24oKSB7XG4gICAgICogICBjb25zb2xlLmxvZygnZG9uZSBzYXZpbmchJyk7XG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiBfLmZvckVhY2goc2F2ZXMsIGZ1bmN0aW9uKHR5cGUpIHtcbiAgICAgKiAgIGFzeW5jU2F2ZSh7ICd0eXBlJzogdHlwZSwgJ2NvbXBsZXRlJzogZG9uZSB9KTtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiBsb2dzICdkb25lIHNhdmluZyEnIGFmdGVyIHRoZSB0d28gYXN5bmMgc2F2ZXMgaGF2ZSBjb21wbGV0ZWRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhZnRlcihuLCBmdW5jKSB7XG4gICAgICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBpZiAodHlwZW9mIG4gPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHZhciB0ZW1wID0gbjtcbiAgICAgICAgICBuID0gZnVuYztcbiAgICAgICAgICBmdW5jID0gdGVtcDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIG4gPSBuYXRpdmVJc0Zpbml0ZShuID0gK24pID8gbiA6IDA7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICgtLW4gPCAxKSB7XG4gICAgICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBhY2NlcHRzIHVwIHRvIGBuYCBhcmd1bWVudHMgaWdub3JpbmcgYW55XG4gICAgICogYWRkaXRpb25hbCBhcmd1bWVudHMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBjYXAgYXJndW1lbnRzIGZvci5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW249ZnVuYy5sZW5ndGhdIFRoZSBhcml0eSBjYXAuXG4gICAgICogQHBhcmFtLSB7T2JqZWN0fSBbZ3VhcmRdIEVuYWJsZXMgdXNlIGFzIGEgY2FsbGJhY2sgZm9yIGZ1bmN0aW9ucyBsaWtlIGBfLm1hcGAuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ubWFwKFsnNicsICc4JywgJzEwJ10sIF8uYXJ5KHBhcnNlSW50LCAxKSk7XG4gICAgICogLy8gPT4gWzYsIDgsIDEwXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFyeShmdW5jLCBuLCBndWFyZCkge1xuICAgICAgaWYgKGd1YXJkICYmIGlzSXRlcmF0ZWVDYWxsKGZ1bmMsIG4sIGd1YXJkKSkge1xuICAgICAgICBuID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgbiA9IChmdW5jICYmIG4gPT0gbnVsbCkgPyBmdW5jLmxlbmd0aCA6IG5hdGl2ZU1heCgrbiB8fCAwLCAwKTtcbiAgICAgIHJldHVybiBjcmVhdGVXcmFwcGVyKGZ1bmMsIEFSWV9GTEFHLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIG4pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGludm9rZXMgYGZ1bmNgLCB3aXRoIHRoZSBgdGhpc2AgYmluZGluZyBhbmQgYXJndW1lbnRzXG4gICAgICogb2YgdGhlIGNyZWF0ZWQgZnVuY3Rpb24sIHdoaWxlIGl0IGlzIGNhbGxlZCBsZXNzIHRoYW4gYG5gIHRpbWVzLiBTdWJzZXF1ZW50XG4gICAgICogY2FsbHMgdG8gdGhlIGNyZWF0ZWQgZnVuY3Rpb24gcmV0dXJuIHRoZSByZXN1bHQgb2YgdGhlIGxhc3QgYGZ1bmNgIGludm9jYXRpb24uXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbiBUaGUgbnVtYmVyIG9mIGNhbGxzIGF0IHdoaWNoIGBmdW5jYCBpcyBubyBsb25nZXIgaW52b2tlZC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byByZXN0cmljdC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyByZXN0cmljdGVkIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBqUXVlcnkoJyNhZGQnKS5vbignY2xpY2snLCBfLmJlZm9yZSg1LCBhZGRDb250YWN0VG9MaXN0KSk7XG4gICAgICogLy8gPT4gYWxsb3dzIGFkZGluZyB1cCB0byA0IGNvbnRhY3RzIHRvIHRoZSBsaXN0XG4gICAgICovXG4gICAgZnVuY3Rpb24gYmVmb3JlKG4sIGZ1bmMpIHtcbiAgICAgIHZhciByZXN1bHQ7XG4gICAgICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBpZiAodHlwZW9mIG4gPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHZhciB0ZW1wID0gbjtcbiAgICAgICAgICBuID0gZnVuYztcbiAgICAgICAgICBmdW5jID0gdGVtcDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKC0tbiA+IDApIHtcbiAgICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG4gPD0gMSkge1xuICAgICAgICAgIGZ1bmMgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgaW52b2tlcyBgZnVuY2Agd2l0aCB0aGUgYHRoaXNgIGJpbmRpbmcgb2YgYHRoaXNBcmdgXG4gICAgICogYW5kIHByZXBlbmRzIGFueSBhZGRpdGlvbmFsIGBfLmJpbmRgIGFyZ3VtZW50cyB0byB0aG9zZSBwcm92aWRlZCB0byB0aGVcbiAgICAgKiBib3VuZCBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIFRoZSBgXy5iaW5kLnBsYWNlaG9sZGVyYCB2YWx1ZSwgd2hpY2ggZGVmYXVsdHMgdG8gYF9gIGluIG1vbm9saXRoaWMgYnVpbGRzLFxuICAgICAqIG1heSBiZSB1c2VkIGFzIGEgcGxhY2Vob2xkZXIgZm9yIHBhcnRpYWxseSBhcHBsaWVkIGFyZ3VtZW50cy5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBVbmxpa2UgbmF0aXZlIGBGdW5jdGlvbiNiaW5kYCB0aGlzIG1ldGhvZCBkb2VzIG5vdCBzZXQgdGhlIFwibGVuZ3RoXCJcbiAgICAgKiBwcm9wZXJ0eSBvZiBib3VuZCBmdW5jdGlvbnMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBiaW5kLlxuICAgICAqIEBwYXJhbSB7Kn0gdGhpc0FyZyBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGZ1bmNgLlxuICAgICAqIEBwYXJhbSB7Li4uKn0gW3BhcnRpYWxzXSBUaGUgYXJndW1lbnRzIHRvIGJlIHBhcnRpYWxseSBhcHBsaWVkLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGJvdW5kIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgZ3JlZXQgPSBmdW5jdGlvbihncmVldGluZywgcHVuY3R1YXRpb24pIHtcbiAgICAgKiAgIHJldHVybiBncmVldGluZyArICcgJyArIHRoaXMudXNlciArIHB1bmN0dWF0aW9uO1xuICAgICAqIH07XG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0ID0geyAndXNlcic6ICdmcmVkJyB9O1xuICAgICAqXG4gICAgICogdmFyIGJvdW5kID0gXy5iaW5kKGdyZWV0LCBvYmplY3QsICdoaScpO1xuICAgICAqIGJvdW5kKCchJyk7XG4gICAgICogLy8gPT4gJ2hpIGZyZWQhJ1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgcGxhY2Vob2xkZXJzXG4gICAgICogdmFyIGJvdW5kID0gXy5iaW5kKGdyZWV0LCBvYmplY3QsIF8sICchJyk7XG4gICAgICogYm91bmQoJ2hpJyk7XG4gICAgICogLy8gPT4gJ2hpIGZyZWQhJ1xuICAgICAqL1xuICAgIHZhciBiaW5kID0gcmVzdFBhcmFtKGZ1bmN0aW9uKGZ1bmMsIHRoaXNBcmcsIHBhcnRpYWxzKSB7XG4gICAgICB2YXIgYml0bWFzayA9IEJJTkRfRkxBRztcbiAgICAgIGlmIChwYXJ0aWFscy5sZW5ndGgpIHtcbiAgICAgICAgdmFyIGhvbGRlcnMgPSByZXBsYWNlSG9sZGVycyhwYXJ0aWFscywgYmluZC5wbGFjZWhvbGRlcik7XG4gICAgICAgIGJpdG1hc2sgfD0gUEFSVElBTF9GTEFHO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNyZWF0ZVdyYXBwZXIoZnVuYywgYml0bWFzaywgdGhpc0FyZywgcGFydGlhbHMsIGhvbGRlcnMpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQmluZHMgbWV0aG9kcyBvZiBhbiBvYmplY3QgdG8gdGhlIG9iamVjdCBpdHNlbGYsIG92ZXJ3cml0aW5nIHRoZSBleGlzdGluZ1xuICAgICAqIG1ldGhvZC4gTWV0aG9kIG5hbWVzIG1heSBiZSBzcGVjaWZpZWQgYXMgaW5kaXZpZHVhbCBhcmd1bWVudHMgb3IgYXMgYXJyYXlzXG4gICAgICogb2YgbWV0aG9kIG5hbWVzLiBJZiBubyBtZXRob2QgbmFtZXMgYXJlIHByb3ZpZGVkIGFsbCBlbnVtZXJhYmxlIGZ1bmN0aW9uXG4gICAgICogcHJvcGVydGllcywgb3duIGFuZCBpbmhlcml0ZWQsIG9mIGBvYmplY3RgIGFyZSBib3VuZC5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBkb2VzIG5vdCBzZXQgdGhlIFwibGVuZ3RoXCIgcHJvcGVydHkgb2YgYm91bmQgZnVuY3Rpb25zLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGJpbmQgYW5kIGFzc2lnbiB0aGUgYm91bmQgbWV0aG9kcyB0by5cbiAgICAgKiBAcGFyYW0gey4uLihzdHJpbmd8c3RyaW5nW10pfSBbbWV0aG9kTmFtZXNdIFRoZSBvYmplY3QgbWV0aG9kIG5hbWVzIHRvIGJpbmQsXG4gICAgICogIHNwZWNpZmllZCBhcyBpbmRpdmlkdWFsIG1ldGhvZCBuYW1lcyBvciBhcnJheXMgb2YgbWV0aG9kIG5hbWVzLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciB2aWV3ID0ge1xuICAgICAqICAgJ2xhYmVsJzogJ2RvY3MnLFxuICAgICAqICAgJ29uQ2xpY2snOiBmdW5jdGlvbigpIHtcbiAgICAgKiAgICAgY29uc29sZS5sb2coJ2NsaWNrZWQgJyArIHRoaXMubGFiZWwpO1xuICAgICAqICAgfVxuICAgICAqIH07XG4gICAgICpcbiAgICAgKiBfLmJpbmRBbGwodmlldyk7XG4gICAgICogalF1ZXJ5KCcjZG9jcycpLm9uKCdjbGljaycsIHZpZXcub25DbGljayk7XG4gICAgICogLy8gPT4gbG9ncyAnY2xpY2tlZCBkb2NzJyB3aGVuIHRoZSBlbGVtZW50IGlzIGNsaWNrZWRcbiAgICAgKi9cbiAgICB2YXIgYmluZEFsbCA9IHJlc3RQYXJhbShmdW5jdGlvbihvYmplY3QsIG1ldGhvZE5hbWVzKSB7XG4gICAgICBtZXRob2ROYW1lcyA9IG1ldGhvZE5hbWVzLmxlbmd0aCA/IGJhc2VGbGF0dGVuKG1ldGhvZE5hbWVzKSA6IGZ1bmN0aW9ucyhvYmplY3QpO1xuXG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSBtZXRob2ROYW1lcy5sZW5ndGg7XG5cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHZhciBrZXkgPSBtZXRob2ROYW1lc1tpbmRleF07XG4gICAgICAgIG9iamVjdFtrZXldID0gY3JlYXRlV3JhcHBlcihvYmplY3Rba2V5XSwgQklORF9GTEFHLCBvYmplY3QpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGludm9rZXMgdGhlIG1ldGhvZCBhdCBgb2JqZWN0W2tleV1gIGFuZCBwcmVwZW5kc1xuICAgICAqIGFueSBhZGRpdGlvbmFsIGBfLmJpbmRLZXlgIGFyZ3VtZW50cyB0byB0aG9zZSBwcm92aWRlZCB0byB0aGUgYm91bmQgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBkaWZmZXJzIGZyb20gYF8uYmluZGAgYnkgYWxsb3dpbmcgYm91bmQgZnVuY3Rpb25zIHRvIHJlZmVyZW5jZVxuICAgICAqIG1ldGhvZHMgdGhhdCBtYXkgYmUgcmVkZWZpbmVkIG9yIGRvbid0IHlldCBleGlzdC5cbiAgICAgKiBTZWUgW1BldGVyIE1pY2hhdXgncyBhcnRpY2xlXShodHRwOi8vcGV0ZXIubWljaGF1eC5jYS9hcnRpY2xlcy9sYXp5LWZ1bmN0aW9uLWRlZmluaXRpb24tcGF0dGVybilcbiAgICAgKiBmb3IgbW9yZSBkZXRhaWxzLlxuICAgICAqXG4gICAgICogVGhlIGBfLmJpbmRLZXkucGxhY2Vob2xkZXJgIHZhbHVlLCB3aGljaCBkZWZhdWx0cyB0byBgX2AgaW4gbW9ub2xpdGhpY1xuICAgICAqIGJ1aWxkcywgbWF5IGJlIHVzZWQgYXMgYSBwbGFjZWhvbGRlciBmb3IgcGFydGlhbGx5IGFwcGxpZWQgYXJndW1lbnRzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRoZSBtZXRob2QgYmVsb25ncyB0by5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIG1ldGhvZC5cbiAgICAgKiBAcGFyYW0gey4uLip9IFtwYXJ0aWFsc10gVGhlIGFyZ3VtZW50cyB0byBiZSBwYXJ0aWFsbHkgYXBwbGllZC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBib3VuZCBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIG9iamVjdCA9IHtcbiAgICAgKiAgICd1c2VyJzogJ2ZyZWQnLFxuICAgICAqICAgJ2dyZWV0JzogZnVuY3Rpb24oZ3JlZXRpbmcsIHB1bmN0dWF0aW9uKSB7XG4gICAgICogICAgIHJldHVybiBncmVldGluZyArICcgJyArIHRoaXMudXNlciArIHB1bmN0dWF0aW9uO1xuICAgICAqICAgfVxuICAgICAqIH07XG4gICAgICpcbiAgICAgKiB2YXIgYm91bmQgPSBfLmJpbmRLZXkob2JqZWN0LCAnZ3JlZXQnLCAnaGknKTtcbiAgICAgKiBib3VuZCgnIScpO1xuICAgICAqIC8vID0+ICdoaSBmcmVkISdcbiAgICAgKlxuICAgICAqIG9iamVjdC5ncmVldCA9IGZ1bmN0aW9uKGdyZWV0aW5nLCBwdW5jdHVhdGlvbikge1xuICAgICAqICAgcmV0dXJuIGdyZWV0aW5nICsgJ3lhICcgKyB0aGlzLnVzZXIgKyBwdW5jdHVhdGlvbjtcbiAgICAgKiB9O1xuICAgICAqXG4gICAgICogYm91bmQoJyEnKTtcbiAgICAgKiAvLyA9PiAnaGl5YSBmcmVkISdcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHBsYWNlaG9sZGVyc1xuICAgICAqIHZhciBib3VuZCA9IF8uYmluZEtleShvYmplY3QsICdncmVldCcsIF8sICchJyk7XG4gICAgICogYm91bmQoJ2hpJyk7XG4gICAgICogLy8gPT4gJ2hpeWEgZnJlZCEnXG4gICAgICovXG4gICAgdmFyIGJpbmRLZXkgPSByZXN0UGFyYW0oZnVuY3Rpb24ob2JqZWN0LCBrZXksIHBhcnRpYWxzKSB7XG4gICAgICB2YXIgYml0bWFzayA9IEJJTkRfRkxBRyB8IEJJTkRfS0VZX0ZMQUc7XG4gICAgICBpZiAocGFydGlhbHMubGVuZ3RoKSB7XG4gICAgICAgIHZhciBob2xkZXJzID0gcmVwbGFjZUhvbGRlcnMocGFydGlhbHMsIGJpbmRLZXkucGxhY2Vob2xkZXIpO1xuICAgICAgICBiaXRtYXNrIHw9IFBBUlRJQUxfRkxBRztcbiAgICAgIH1cbiAgICAgIHJldHVybiBjcmVhdGVXcmFwcGVyKGtleSwgYml0bWFzaywgb2JqZWN0LCBwYXJ0aWFscywgaG9sZGVycyk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBhY2NlcHRzIG9uZSBvciBtb3JlIGFyZ3VtZW50cyBvZiBgZnVuY2AgdGhhdCB3aGVuXG4gICAgICogY2FsbGVkIGVpdGhlciBpbnZva2VzIGBmdW5jYCByZXR1cm5pbmcgaXRzIHJlc3VsdCwgaWYgYWxsIGBmdW5jYCBhcmd1bWVudHNcbiAgICAgKiBoYXZlIGJlZW4gcHJvdmlkZWQsIG9yIHJldHVybnMgYSBmdW5jdGlvbiB0aGF0IGFjY2VwdHMgb25lIG9yIG1vcmUgb2YgdGhlXG4gICAgICogcmVtYWluaW5nIGBmdW5jYCBhcmd1bWVudHMsIGFuZCBzbyBvbi4gVGhlIGFyaXR5IG9mIGBmdW5jYCBtYXkgYmUgc3BlY2lmaWVkXG4gICAgICogaWYgYGZ1bmMubGVuZ3RoYCBpcyBub3Qgc3VmZmljaWVudC5cbiAgICAgKlxuICAgICAqIFRoZSBgXy5jdXJyeS5wbGFjZWhvbGRlcmAgdmFsdWUsIHdoaWNoIGRlZmF1bHRzIHRvIGBfYCBpbiBtb25vbGl0aGljIGJ1aWxkcyxcbiAgICAgKiBtYXkgYmUgdXNlZCBhcyBhIHBsYWNlaG9sZGVyIGZvciBwcm92aWRlZCBhcmd1bWVudHMuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgZG9lcyBub3Qgc2V0IHRoZSBcImxlbmd0aFwiIHByb3BlcnR5IG9mIGN1cnJpZWQgZnVuY3Rpb25zLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gY3VycnkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFthcml0eT1mdW5jLmxlbmd0aF0gVGhlIGFyaXR5IG9mIGBmdW5jYC5cbiAgICAgKiBAcGFyYW0tIHtPYmplY3R9IFtndWFyZF0gRW5hYmxlcyB1c2UgYXMgYSBjYWxsYmFjayBmb3IgZnVuY3Rpb25zIGxpa2UgYF8ubWFwYC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBjdXJyaWVkIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgYWJjID0gZnVuY3Rpb24oYSwgYiwgYykge1xuICAgICAqICAgcmV0dXJuIFthLCBiLCBjXTtcbiAgICAgKiB9O1xuICAgICAqXG4gICAgICogdmFyIGN1cnJpZWQgPSBfLmN1cnJ5KGFiYyk7XG4gICAgICpcbiAgICAgKiBjdXJyaWVkKDEpKDIpKDMpO1xuICAgICAqIC8vID0+IFsxLCAyLCAzXVxuICAgICAqXG4gICAgICogY3VycmllZCgxLCAyKSgzKTtcbiAgICAgKiAvLyA9PiBbMSwgMiwgM11cbiAgICAgKlxuICAgICAqIGN1cnJpZWQoMSwgMiwgMyk7XG4gICAgICogLy8gPT4gWzEsIDIsIDNdXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBwbGFjZWhvbGRlcnNcbiAgICAgKiBjdXJyaWVkKDEpKF8sIDMpKDIpO1xuICAgICAqIC8vID0+IFsxLCAyLCAzXVxuICAgICAqL1xuICAgIHZhciBjdXJyeSA9IGNyZWF0ZUN1cnJ5KENVUlJZX0ZMQUcpO1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5jdXJyeWAgZXhjZXB0IHRoYXQgYXJndW1lbnRzIGFyZSBhcHBsaWVkIHRvIGBmdW5jYFxuICAgICAqIGluIHRoZSBtYW5uZXIgb2YgYF8ucGFydGlhbFJpZ2h0YCBpbnN0ZWFkIG9mIGBfLnBhcnRpYWxgLlxuICAgICAqXG4gICAgICogVGhlIGBfLmN1cnJ5UmlnaHQucGxhY2Vob2xkZXJgIHZhbHVlLCB3aGljaCBkZWZhdWx0cyB0byBgX2AgaW4gbW9ub2xpdGhpY1xuICAgICAqIGJ1aWxkcywgbWF5IGJlIHVzZWQgYXMgYSBwbGFjZWhvbGRlciBmb3IgcHJvdmlkZWQgYXJndW1lbnRzLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoaXMgbWV0aG9kIGRvZXMgbm90IHNldCB0aGUgXCJsZW5ndGhcIiBwcm9wZXJ0eSBvZiBjdXJyaWVkIGZ1bmN0aW9ucy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGN1cnJ5LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbYXJpdHk9ZnVuYy5sZW5ndGhdIFRoZSBhcml0eSBvZiBgZnVuY2AuXG4gICAgICogQHBhcmFtLSB7T2JqZWN0fSBbZ3VhcmRdIEVuYWJsZXMgdXNlIGFzIGEgY2FsbGJhY2sgZm9yIGZ1bmN0aW9ucyBsaWtlIGBfLm1hcGAuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgY3VycmllZCBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGFiYyA9IGZ1bmN0aW9uKGEsIGIsIGMpIHtcbiAgICAgKiAgIHJldHVybiBbYSwgYiwgY107XG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIHZhciBjdXJyaWVkID0gXy5jdXJyeVJpZ2h0KGFiYyk7XG4gICAgICpcbiAgICAgKiBjdXJyaWVkKDMpKDIpKDEpO1xuICAgICAqIC8vID0+IFsxLCAyLCAzXVxuICAgICAqXG4gICAgICogY3VycmllZCgyLCAzKSgxKTtcbiAgICAgKiAvLyA9PiBbMSwgMiwgM11cbiAgICAgKlxuICAgICAqIGN1cnJpZWQoMSwgMiwgMyk7XG4gICAgICogLy8gPT4gWzEsIDIsIDNdXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBwbGFjZWhvbGRlcnNcbiAgICAgKiBjdXJyaWVkKDMpKDEsIF8pKDIpO1xuICAgICAqIC8vID0+IFsxLCAyLCAzXVxuICAgICAqL1xuICAgIHZhciBjdXJyeVJpZ2h0ID0gY3JlYXRlQ3VycnkoQ1VSUllfUklHSFRfRkxBRyk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZGVib3VuY2VkIGZ1bmN0aW9uIHRoYXQgZGVsYXlzIGludm9raW5nIGBmdW5jYCB1bnRpbCBhZnRlciBgd2FpdGBcbiAgICAgKiBtaWxsaXNlY29uZHMgaGF2ZSBlbGFwc2VkIHNpbmNlIHRoZSBsYXN0IHRpbWUgdGhlIGRlYm91bmNlZCBmdW5jdGlvbiB3YXNcbiAgICAgKiBpbnZva2VkLiBUaGUgZGVib3VuY2VkIGZ1bmN0aW9uIGNvbWVzIHdpdGggYSBgY2FuY2VsYCBtZXRob2QgdG8gY2FuY2VsXG4gICAgICogZGVsYXllZCBpbnZvY2F0aW9ucy4gUHJvdmlkZSBhbiBvcHRpb25zIG9iamVjdCB0byBpbmRpY2F0ZSB0aGF0IGBmdW5jYFxuICAgICAqIHNob3VsZCBiZSBpbnZva2VkIG9uIHRoZSBsZWFkaW5nIGFuZC9vciB0cmFpbGluZyBlZGdlIG9mIHRoZSBgd2FpdGAgdGltZW91dC5cbiAgICAgKiBTdWJzZXF1ZW50IGNhbGxzIHRvIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gcmV0dXJuIHRoZSByZXN1bHQgb2YgdGhlIGxhc3RcbiAgICAgKiBgZnVuY2AgaW52b2NhdGlvbi5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBJZiBgbGVhZGluZ2AgYW5kIGB0cmFpbGluZ2Agb3B0aW9ucyBhcmUgYHRydWVgLCBgZnVuY2AgaXMgaW52b2tlZFxuICAgICAqIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0IG9ubHkgaWYgdGhlIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gaXNcbiAgICAgKiBpbnZva2VkIG1vcmUgdGhhbiBvbmNlIGR1cmluZyB0aGUgYHdhaXRgIHRpbWVvdXQuXG4gICAgICpcbiAgICAgKiBTZWUgW0RhdmlkIENvcmJhY2hvJ3MgYXJ0aWNsZV0oaHR0cDovL2RydXBhbG1vdGlvbi5jb20vYXJ0aWNsZS9kZWJvdW5jZS1hbmQtdGhyb3R0bGUtdmlzdWFsLWV4cGxhbmF0aW9uKVxuICAgICAqIGZvciBkZXRhaWxzIG92ZXIgdGhlIGRpZmZlcmVuY2VzIGJldHdlZW4gYF8uZGVib3VuY2VgIGFuZCBgXy50aHJvdHRsZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBkZWJvdW5jZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3dhaXQ9MF0gVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gZGVsYXkuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBUaGUgb3B0aW9ucyBvYmplY3QuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5sZWFkaW5nPWZhbHNlXSBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSBsZWFkaW5nXG4gICAgICogIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLm1heFdhaXRdIFRoZSBtYXhpbXVtIHRpbWUgYGZ1bmNgIGlzIGFsbG93ZWQgdG8gYmVcbiAgICAgKiAgZGVsYXllZCBiZWZvcmUgaXQgaXMgaW52b2tlZC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnRyYWlsaW5nPXRydWVdIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIHRyYWlsaW5nXG4gICAgICogIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZGVib3VuY2VkIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAvLyBhdm9pZCBjb3N0bHkgY2FsY3VsYXRpb25zIHdoaWxlIHRoZSB3aW5kb3cgc2l6ZSBpcyBpbiBmbHV4XG4gICAgICogalF1ZXJ5KHdpbmRvdykub24oJ3Jlc2l6ZScsIF8uZGVib3VuY2UoY2FsY3VsYXRlTGF5b3V0LCAxNTApKTtcbiAgICAgKlxuICAgICAqIC8vIGludm9rZSBgc2VuZE1haWxgIHdoZW4gdGhlIGNsaWNrIGV2ZW50IGlzIGZpcmVkLCBkZWJvdW5jaW5nIHN1YnNlcXVlbnQgY2FsbHNcbiAgICAgKiBqUXVlcnkoJyNwb3N0Ym94Jykub24oJ2NsaWNrJywgXy5kZWJvdW5jZShzZW5kTWFpbCwgMzAwLCB7XG4gICAgICogICAnbGVhZGluZyc6IHRydWUsXG4gICAgICogICAndHJhaWxpbmcnOiBmYWxzZVxuICAgICAqIH0pKTtcbiAgICAgKlxuICAgICAqIC8vIGVuc3VyZSBgYmF0Y2hMb2dgIGlzIGludm9rZWQgb25jZSBhZnRlciAxIHNlY29uZCBvZiBkZWJvdW5jZWQgY2FsbHNcbiAgICAgKiB2YXIgc291cmNlID0gbmV3IEV2ZW50U291cmNlKCcvc3RyZWFtJyk7XG4gICAgICogalF1ZXJ5KHNvdXJjZSkub24oJ21lc3NhZ2UnLCBfLmRlYm91bmNlKGJhdGNoTG9nLCAyNTAsIHtcbiAgICAgKiAgICdtYXhXYWl0JzogMTAwMFxuICAgICAqIH0pKTtcbiAgICAgKlxuICAgICAqIC8vIGNhbmNlbCBhIGRlYm91bmNlZCBjYWxsXG4gICAgICogdmFyIHRvZG9DaGFuZ2VzID0gXy5kZWJvdW5jZShiYXRjaExvZywgMTAwMCk7XG4gICAgICogT2JqZWN0Lm9ic2VydmUobW9kZWxzLnRvZG8sIHRvZG9DaGFuZ2VzKTtcbiAgICAgKlxuICAgICAqIE9iamVjdC5vYnNlcnZlKG1vZGVscywgZnVuY3Rpb24oY2hhbmdlcykge1xuICAgICAqICAgaWYgKF8uZmluZChjaGFuZ2VzLCB7ICd1c2VyJzogJ3RvZG8nLCAndHlwZSc6ICdkZWxldGUnfSkpIHtcbiAgICAgKiAgICAgdG9kb0NoYW5nZXMuY2FuY2VsKCk7XG4gICAgICogICB9XG4gICAgICogfSwgWydkZWxldGUnXSk7XG4gICAgICpcbiAgICAgKiAvLyAuLi5hdCBzb21lIHBvaW50IGBtb2RlbHMudG9kb2AgaXMgY2hhbmdlZFxuICAgICAqIG1vZGVscy50b2RvLmNvbXBsZXRlZCA9IHRydWU7XG4gICAgICpcbiAgICAgKiAvLyAuLi5iZWZvcmUgMSBzZWNvbmQgaGFzIHBhc3NlZCBgbW9kZWxzLnRvZG9gIGlzIGRlbGV0ZWRcbiAgICAgKiAvLyB3aGljaCBjYW5jZWxzIHRoZSBkZWJvdW5jZWQgYHRvZG9DaGFuZ2VzYCBjYWxsXG4gICAgICogZGVsZXRlIG1vZGVscy50b2RvO1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBhcmdzLFxuICAgICAgICAgIG1heFRpbWVvdXRJZCxcbiAgICAgICAgICByZXN1bHQsXG4gICAgICAgICAgc3RhbXAsXG4gICAgICAgICAgdGhpc0FyZyxcbiAgICAgICAgICB0aW1lb3V0SWQsXG4gICAgICAgICAgdHJhaWxpbmdDYWxsLFxuICAgICAgICAgIGxhc3RDYWxsZWQgPSAwLFxuICAgICAgICAgIG1heFdhaXQgPSBmYWxzZSxcbiAgICAgICAgICB0cmFpbGluZyA9IHRydWU7XG5cbiAgICAgIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcbiAgICAgIH1cbiAgICAgIHdhaXQgPSB3YWl0IDwgMCA/IDAgOiAoK3dhaXQgfHwgMCk7XG4gICAgICBpZiAob3B0aW9ucyA9PT0gdHJ1ZSkge1xuICAgICAgICB2YXIgbGVhZGluZyA9IHRydWU7XG4gICAgICAgIHRyYWlsaW5nID0gZmFsc2U7XG4gICAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KG9wdGlvbnMpKSB7XG4gICAgICAgIGxlYWRpbmcgPSAhIW9wdGlvbnMubGVhZGluZztcbiAgICAgICAgbWF4V2FpdCA9ICdtYXhXYWl0JyBpbiBvcHRpb25zICYmIG5hdGl2ZU1heCgrb3B0aW9ucy5tYXhXYWl0IHx8IDAsIHdhaXQpO1xuICAgICAgICB0cmFpbGluZyA9ICd0cmFpbGluZycgaW4gb3B0aW9ucyA/ICEhb3B0aW9ucy50cmFpbGluZyA6IHRyYWlsaW5nO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBjYW5jZWwoKSB7XG4gICAgICAgIGlmICh0aW1lb3V0SWQpIHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWF4VGltZW91dElkKSB7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KG1heFRpbWVvdXRJZCk7XG4gICAgICAgIH1cbiAgICAgICAgbGFzdENhbGxlZCA9IDA7XG4gICAgICAgIG1heFRpbWVvdXRJZCA9IHRpbWVvdXRJZCA9IHRyYWlsaW5nQ2FsbCA9IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gY29tcGxldGUoaXNDYWxsZWQsIGlkKSB7XG4gICAgICAgIGlmIChpZCkge1xuICAgICAgICAgIGNsZWFyVGltZW91dChpZCk7XG4gICAgICAgIH1cbiAgICAgICAgbWF4VGltZW91dElkID0gdGltZW91dElkID0gdHJhaWxpbmdDYWxsID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAoaXNDYWxsZWQpIHtcbiAgICAgICAgICBsYXN0Q2FsbGVkID0gbm93KCk7XG4gICAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzQXJnLCBhcmdzKTtcbiAgICAgICAgICBpZiAoIXRpbWVvdXRJZCAmJiAhbWF4VGltZW91dElkKSB7XG4gICAgICAgICAgICBhcmdzID0gdGhpc0FyZyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gZGVsYXllZCgpIHtcbiAgICAgICAgdmFyIHJlbWFpbmluZyA9IHdhaXQgLSAobm93KCkgLSBzdGFtcCk7XG4gICAgICAgIGlmIChyZW1haW5pbmcgPD0gMCB8fCByZW1haW5pbmcgPiB3YWl0KSB7XG4gICAgICAgICAgY29tcGxldGUodHJhaWxpbmdDYWxsLCBtYXhUaW1lb3V0SWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZGVsYXllZCwgcmVtYWluaW5nKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBtYXhEZWxheWVkKCkge1xuICAgICAgICBjb21wbGV0ZSh0cmFpbGluZywgdGltZW91dElkKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gZGVib3VuY2VkKCkge1xuICAgICAgICBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgICBzdGFtcCA9IG5vdygpO1xuICAgICAgICB0aGlzQXJnID0gdGhpcztcbiAgICAgICAgdHJhaWxpbmdDYWxsID0gdHJhaWxpbmcgJiYgKHRpbWVvdXRJZCB8fCAhbGVhZGluZyk7XG5cbiAgICAgICAgaWYgKG1heFdhaXQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgdmFyIGxlYWRpbmdDYWxsID0gbGVhZGluZyAmJiAhdGltZW91dElkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICghbWF4VGltZW91dElkICYmICFsZWFkaW5nKSB7XG4gICAgICAgICAgICBsYXN0Q2FsbGVkID0gc3RhbXA7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciByZW1haW5pbmcgPSBtYXhXYWl0IC0gKHN0YW1wIC0gbGFzdENhbGxlZCksXG4gICAgICAgICAgICAgIGlzQ2FsbGVkID0gcmVtYWluaW5nIDw9IDAgfHwgcmVtYWluaW5nID4gbWF4V2FpdDtcblxuICAgICAgICAgIGlmIChpc0NhbGxlZCkge1xuICAgICAgICAgICAgaWYgKG1heFRpbWVvdXRJZCkge1xuICAgICAgICAgICAgICBtYXhUaW1lb3V0SWQgPSBjbGVhclRpbWVvdXQobWF4VGltZW91dElkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxhc3RDYWxsZWQgPSBzdGFtcDtcbiAgICAgICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpc0FyZywgYXJncyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2UgaWYgKCFtYXhUaW1lb3V0SWQpIHtcbiAgICAgICAgICAgIG1heFRpbWVvdXRJZCA9IHNldFRpbWVvdXQobWF4RGVsYXllZCwgcmVtYWluaW5nKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzQ2FsbGVkICYmIHRpbWVvdXRJZCkge1xuICAgICAgICAgIHRpbWVvdXRJZCA9IGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCF0aW1lb3V0SWQgJiYgd2FpdCAhPT0gbWF4V2FpdCkge1xuICAgICAgICAgIHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZGVsYXllZCwgd2FpdCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxlYWRpbmdDYWxsKSB7XG4gICAgICAgICAgaXNDYWxsZWQgPSB0cnVlO1xuICAgICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpc0FyZywgYXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzQ2FsbGVkICYmICF0aW1lb3V0SWQgJiYgIW1heFRpbWVvdXRJZCkge1xuICAgICAgICAgIGFyZ3MgPSB0aGlzQXJnID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgICBkZWJvdW5jZWQuY2FuY2VsID0gY2FuY2VsO1xuICAgICAgcmV0dXJuIGRlYm91bmNlZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZWZlcnMgaW52b2tpbmcgdGhlIGBmdW5jYCB1bnRpbCB0aGUgY3VycmVudCBjYWxsIHN0YWNrIGhhcyBjbGVhcmVkLiBBbnlcbiAgICAgKiBhZGRpdGlvbmFsIGFyZ3VtZW50cyBhcmUgcHJvdmlkZWQgdG8gYGZ1bmNgIHdoZW4gaXQgaXMgaW52b2tlZC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRlZmVyLlxuICAgICAqIEBwYXJhbSB7Li4uKn0gW2FyZ3NdIFRoZSBhcmd1bWVudHMgdG8gaW52b2tlIHRoZSBmdW5jdGlvbiB3aXRoLlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHRpbWVyIGlkLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmRlZmVyKGZ1bmN0aW9uKHRleHQpIHtcbiAgICAgKiAgIGNvbnNvbGUubG9nKHRleHQpO1xuICAgICAqIH0sICdkZWZlcnJlZCcpO1xuICAgICAqIC8vIGxvZ3MgJ2RlZmVycmVkJyBhZnRlciBvbmUgb3IgbW9yZSBtaWxsaXNlY29uZHNcbiAgICAgKi9cbiAgICB2YXIgZGVmZXIgPSByZXN0UGFyYW0oZnVuY3Rpb24oZnVuYywgYXJncykge1xuICAgICAgcmV0dXJuIGJhc2VEZWxheShmdW5jLCAxLCBhcmdzKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEludm9rZXMgYGZ1bmNgIGFmdGVyIGB3YWl0YCBtaWxsaXNlY29uZHMuIEFueSBhZGRpdGlvbmFsIGFyZ3VtZW50cyBhcmVcbiAgICAgKiBwcm92aWRlZCB0byBgZnVuY2Agd2hlbiBpdCBpcyBpbnZva2VkLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gZGVsYXkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHdhaXQgVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gZGVsYXkgaW52b2NhdGlvbi5cbiAgICAgKiBAcGFyYW0gey4uLip9IFthcmdzXSBUaGUgYXJndW1lbnRzIHRvIGludm9rZSB0aGUgZnVuY3Rpb24gd2l0aC5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSB0aW1lciBpZC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5kZWxheShmdW5jdGlvbih0ZXh0KSB7XG4gICAgICogICBjb25zb2xlLmxvZyh0ZXh0KTtcbiAgICAgKiB9LCAxMDAwLCAnbGF0ZXInKTtcbiAgICAgKiAvLyA9PiBsb2dzICdsYXRlcicgYWZ0ZXIgb25lIHNlY29uZFxuICAgICAqL1xuICAgIHZhciBkZWxheSA9IHJlc3RQYXJhbShmdW5jdGlvbihmdW5jLCB3YWl0LCBhcmdzKSB7XG4gICAgICByZXR1cm4gYmFzZURlbGF5KGZ1bmMsIHdhaXQsIGFyZ3MpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgcmVzdWx0IG9mIGludm9raW5nIHRoZSBwcm92aWRlZFxuICAgICAqIGZ1bmN0aW9ucyB3aXRoIHRoZSBgdGhpc2AgYmluZGluZyBvZiB0aGUgY3JlYXRlZCBmdW5jdGlvbiwgd2hlcmUgZWFjaFxuICAgICAqIHN1Y2Nlc3NpdmUgaW52b2NhdGlvbiBpcyBzdXBwbGllZCB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBwcmV2aW91cy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBwYXJhbSB7Li4uRnVuY3Rpb259IFtmdW5jc10gRnVuY3Rpb25zIHRvIGludm9rZS5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogZnVuY3Rpb24gc3F1YXJlKG4pIHtcbiAgICAgKiAgIHJldHVybiBuICogbjtcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiB2YXIgYWRkU3F1YXJlID0gXy5mbG93KF8uYWRkLCBzcXVhcmUpO1xuICAgICAqIGFkZFNxdWFyZSgxLCAyKTtcbiAgICAgKiAvLyA9PiA5XG4gICAgICovXG4gICAgdmFyIGZsb3cgPSBjcmVhdGVGbG93KCk7XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmZsb3dgIGV4Y2VwdCB0aGF0IGl0IGNyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0XG4gICAgICogaW52b2tlcyB0aGUgcHJvdmlkZWQgZnVuY3Rpb25zIGZyb20gcmlnaHQgdG8gbGVmdC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBhbGlhcyBiYWNrZmxvdywgY29tcG9zZVxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBwYXJhbSB7Li4uRnVuY3Rpb259IFtmdW5jc10gRnVuY3Rpb25zIHRvIGludm9rZS5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogZnVuY3Rpb24gc3F1YXJlKG4pIHtcbiAgICAgKiAgIHJldHVybiBuICogbjtcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiB2YXIgYWRkU3F1YXJlID0gXy5mbG93UmlnaHQoc3F1YXJlLCBfLmFkZCk7XG4gICAgICogYWRkU3F1YXJlKDEsIDIpO1xuICAgICAqIC8vID0+IDlcbiAgICAgKi9cbiAgICB2YXIgZmxvd1JpZ2h0ID0gY3JlYXRlRmxvdyh0cnVlKTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IG1lbW9pemVzIHRoZSByZXN1bHQgb2YgYGZ1bmNgLiBJZiBgcmVzb2x2ZXJgIGlzXG4gICAgICogcHJvdmlkZWQgaXQgZGV0ZXJtaW5lcyB0aGUgY2FjaGUga2V5IGZvciBzdG9yaW5nIHRoZSByZXN1bHQgYmFzZWQgb24gdGhlXG4gICAgICogYXJndW1lbnRzIHByb3ZpZGVkIHRvIHRoZSBtZW1vaXplZCBmdW5jdGlvbi4gQnkgZGVmYXVsdCwgdGhlIGZpcnN0IGFyZ3VtZW50XG4gICAgICogcHJvdmlkZWQgdG8gdGhlIG1lbW9pemVkIGZ1bmN0aW9uIGlzIGNvZXJjZWQgdG8gYSBzdHJpbmcgYW5kIHVzZWQgYXMgdGhlXG4gICAgICogY2FjaGUga2V5LiBUaGUgYGZ1bmNgIGlzIGludm9rZWQgd2l0aCB0aGUgYHRoaXNgIGJpbmRpbmcgb2YgdGhlIG1lbW9pemVkXG4gICAgICogZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVGhlIGNhY2hlIGlzIGV4cG9zZWQgYXMgdGhlIGBjYWNoZWAgcHJvcGVydHkgb24gdGhlIG1lbW9pemVkXG4gICAgICogZnVuY3Rpb24uIEl0cyBjcmVhdGlvbiBtYXkgYmUgY3VzdG9taXplZCBieSByZXBsYWNpbmcgdGhlIGBfLm1lbW9pemUuQ2FjaGVgXG4gICAgICogY29uc3RydWN0b3Igd2l0aCBvbmUgd2hvc2UgaW5zdGFuY2VzIGltcGxlbWVudCB0aGUgW2BNYXBgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1wcm9wZXJ0aWVzLW9mLXRoZS1tYXAtcHJvdG90eXBlLW9iamVjdClcbiAgICAgKiBtZXRob2QgaW50ZXJmYWNlIG9mIGBnZXRgLCBgaGFzYCwgYW5kIGBzZXRgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gaGF2ZSBpdHMgb3V0cHV0IG1lbW9pemVkLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtyZXNvbHZlcl0gVGhlIGZ1bmN0aW9uIHRvIHJlc29sdmUgdGhlIGNhY2hlIGtleS5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBtZW1vaXppbmcgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciB1cHBlckNhc2UgPSBfLm1lbW9pemUoZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgICogICByZXR1cm4gc3RyaW5nLnRvVXBwZXJDYXNlKCk7XG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiB1cHBlckNhc2UoJ2ZyZWQnKTtcbiAgICAgKiAvLyA9PiAnRlJFRCdcbiAgICAgKlxuICAgICAqIC8vIG1vZGlmeWluZyB0aGUgcmVzdWx0IGNhY2hlXG4gICAgICogdXBwZXJDYXNlLmNhY2hlLnNldCgnZnJlZCcsICdCQVJORVknKTtcbiAgICAgKiB1cHBlckNhc2UoJ2ZyZWQnKTtcbiAgICAgKiAvLyA9PiAnQkFSTkVZJ1xuICAgICAqXG4gICAgICogLy8gcmVwbGFjaW5nIGBfLm1lbW9pemUuQ2FjaGVgXG4gICAgICogdmFyIG9iamVjdCA9IHsgJ3VzZXInOiAnZnJlZCcgfTtcbiAgICAgKiB2YXIgb3RoZXIgPSB7ICd1c2VyJzogJ2Jhcm5leScgfTtcbiAgICAgKiB2YXIgaWRlbnRpdHkgPSBfLm1lbW9pemUoXy5pZGVudGl0eSk7XG4gICAgICpcbiAgICAgKiBpZGVudGl0eShvYmplY3QpO1xuICAgICAqIC8vID0+IHsgJ3VzZXInOiAnZnJlZCcgfVxuICAgICAqIGlkZW50aXR5KG90aGVyKTtcbiAgICAgKiAvLyA9PiB7ICd1c2VyJzogJ2ZyZWQnIH1cbiAgICAgKlxuICAgICAqIF8ubWVtb2l6ZS5DYWNoZSA9IFdlYWtNYXA7XG4gICAgICogdmFyIGlkZW50aXR5ID0gXy5tZW1vaXplKF8uaWRlbnRpdHkpO1xuICAgICAqXG4gICAgICogaWRlbnRpdHkob2JqZWN0KTtcbiAgICAgKiAvLyA9PiB7ICd1c2VyJzogJ2ZyZWQnIH1cbiAgICAgKiBpZGVudGl0eShvdGhlcik7XG4gICAgICogLy8gPT4geyAndXNlcic6ICdiYXJuZXknIH1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBtZW1vaXplKGZ1bmMsIHJlc29sdmVyKSB7XG4gICAgICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJyB8fCAocmVzb2x2ZXIgJiYgdHlwZW9mIHJlc29sdmVyICE9ICdmdW5jdGlvbicpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcbiAgICAgIH1cbiAgICAgIHZhciBtZW1vaXplZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cyxcbiAgICAgICAgICAgIGtleSA9IHJlc29sdmVyID8gcmVzb2x2ZXIuYXBwbHkodGhpcywgYXJncykgOiBhcmdzWzBdLFxuICAgICAgICAgICAgY2FjaGUgPSBtZW1vaXplZC5jYWNoZTtcblxuICAgICAgICBpZiAoY2FjaGUuaGFzKGtleSkpIHtcbiAgICAgICAgICByZXR1cm4gY2FjaGUuZ2V0KGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgIG1lbW9pemVkLmNhY2hlID0gY2FjaGUuc2V0KGtleSwgcmVzdWx0KTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH07XG4gICAgICBtZW1vaXplZC5jYWNoZSA9IG5ldyBtZW1vaXplLkNhY2hlO1xuICAgICAgcmV0dXJuIG1lbW9pemVkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IHJ1bnMgZWFjaCBhcmd1bWVudCB0aHJvdWdoIGEgY29ycmVzcG9uZGluZ1xuICAgICAqIHRyYW5zZm9ybSBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHdyYXAuXG4gICAgICogQHBhcmFtIHsuLi4oRnVuY3Rpb258RnVuY3Rpb25bXSl9IFt0cmFuc2Zvcm1zXSBUaGUgZnVuY3Rpb25zIHRvIHRyYW5zZm9ybVxuICAgICAqIGFyZ3VtZW50cywgc3BlY2lmaWVkIGFzIGluZGl2aWR1YWwgZnVuY3Rpb25zIG9yIGFycmF5cyBvZiBmdW5jdGlvbnMuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGZ1bmN0aW9uIGRvdWJsZWQobikge1xuICAgICAqICAgcmV0dXJuIG4gKiAyO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIGZ1bmN0aW9uIHNxdWFyZShuKSB7XG4gICAgICogICByZXR1cm4gbiAqIG47XG4gICAgICogfVxuICAgICAqXG4gICAgICogdmFyIG1vZGRlZCA9IF8ubW9kQXJncyhmdW5jdGlvbih4LCB5KSB7XG4gICAgICogICByZXR1cm4gW3gsIHldO1xuICAgICAqIH0sIHNxdWFyZSwgZG91YmxlZCk7XG4gICAgICpcbiAgICAgKiBtb2RkZWQoMSwgMik7XG4gICAgICogLy8gPT4gWzEsIDRdXG4gICAgICpcbiAgICAgKiBtb2RkZWQoNSwgMTApO1xuICAgICAqIC8vID0+IFsyNSwgMjBdXG4gICAgICovXG4gICAgdmFyIG1vZEFyZ3MgPSByZXN0UGFyYW0oZnVuY3Rpb24oZnVuYywgdHJhbnNmb3Jtcykge1xuICAgICAgdHJhbnNmb3JtcyA9IGJhc2VGbGF0dGVuKHRyYW5zZm9ybXMpO1xuICAgICAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicgfHwgIWFycmF5RXZlcnkodHJhbnNmb3JtcywgYmFzZUlzRnVuY3Rpb24pKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcbiAgICAgIH1cbiAgICAgIHZhciBsZW5ndGggPSB0cmFuc2Zvcm1zLmxlbmd0aDtcbiAgICAgIHJldHVybiByZXN0UGFyYW0oZnVuY3Rpb24oYXJncykge1xuICAgICAgICB2YXIgaW5kZXggPSBuYXRpdmVNaW4oYXJncy5sZW5ndGgsIGxlbmd0aCk7XG4gICAgICAgIHdoaWxlIChpbmRleC0tKSB7XG4gICAgICAgICAgYXJnc1tpbmRleF0gPSB0cmFuc2Zvcm1zW2luZGV4XShhcmdzW2luZGV4XSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkodGhpcywgYXJncyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IG5lZ2F0ZXMgdGhlIHJlc3VsdCBvZiB0aGUgcHJlZGljYXRlIGBmdW5jYC4gVGhlXG4gICAgICogYGZ1bmNgIHByZWRpY2F0ZSBpcyBpbnZva2VkIHdpdGggdGhlIGB0aGlzYCBiaW5kaW5nIGFuZCBhcmd1bWVudHMgb2YgdGhlXG4gICAgICogY3JlYXRlZCBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSBUaGUgcHJlZGljYXRlIHRvIG5lZ2F0ZS5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogZnVuY3Rpb24gaXNFdmVuKG4pIHtcbiAgICAgKiAgIHJldHVybiBuICUgMiA9PSAwO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIF8uZmlsdGVyKFsxLCAyLCAzLCA0LCA1LCA2XSwgXy5uZWdhdGUoaXNFdmVuKSk7XG4gICAgICogLy8gPT4gWzEsIDMsIDVdXG4gICAgICovXG4gICAgZnVuY3Rpb24gbmVnYXRlKHByZWRpY2F0ZSkge1xuICAgICAgaWYgKHR5cGVvZiBwcmVkaWNhdGUgIT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAhcHJlZGljYXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGlzIHJlc3RyaWN0ZWQgdG8gaW52b2tpbmcgYGZ1bmNgIG9uY2UuIFJlcGVhdCBjYWxsc1xuICAgICAqIHRvIHRoZSBmdW5jdGlvbiByZXR1cm4gdGhlIHZhbHVlIG9mIHRoZSBmaXJzdCBjYWxsLiBUaGUgYGZ1bmNgIGlzIGludm9rZWRcbiAgICAgKiB3aXRoIHRoZSBgdGhpc2AgYmluZGluZyBhbmQgYXJndW1lbnRzIG9mIHRoZSBjcmVhdGVkIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gcmVzdHJpY3QuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgcmVzdHJpY3RlZCBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGluaXRpYWxpemUgPSBfLm9uY2UoY3JlYXRlQXBwbGljYXRpb24pO1xuICAgICAqIGluaXRpYWxpemUoKTtcbiAgICAgKiBpbml0aWFsaXplKCk7XG4gICAgICogLy8gYGluaXRpYWxpemVgIGludm9rZXMgYGNyZWF0ZUFwcGxpY2F0aW9uYCBvbmNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gb25jZShmdW5jKSB7XG4gICAgICByZXR1cm4gYmVmb3JlKDIsIGZ1bmMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGludm9rZXMgYGZ1bmNgIHdpdGggYHBhcnRpYWxgIGFyZ3VtZW50cyBwcmVwZW5kZWRcbiAgICAgKiB0byB0aG9zZSBwcm92aWRlZCB0byB0aGUgbmV3IGZ1bmN0aW9uLiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmJpbmRgIGV4Y2VwdFxuICAgICAqIGl0IGRvZXMgKipub3QqKiBhbHRlciB0aGUgYHRoaXNgIGJpbmRpbmcuXG4gICAgICpcbiAgICAgKiBUaGUgYF8ucGFydGlhbC5wbGFjZWhvbGRlcmAgdmFsdWUsIHdoaWNoIGRlZmF1bHRzIHRvIGBfYCBpbiBtb25vbGl0aGljXG4gICAgICogYnVpbGRzLCBtYXkgYmUgdXNlZCBhcyBhIHBsYWNlaG9sZGVyIGZvciBwYXJ0aWFsbHkgYXBwbGllZCBhcmd1bWVudHMuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgZG9lcyBub3Qgc2V0IHRoZSBcImxlbmd0aFwiIHByb3BlcnR5IG9mIHBhcnRpYWxseVxuICAgICAqIGFwcGxpZWQgZnVuY3Rpb25zLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gcGFydGlhbGx5IGFwcGx5IGFyZ3VtZW50cyB0by5cbiAgICAgKiBAcGFyYW0gey4uLip9IFtwYXJ0aWFsc10gVGhlIGFyZ3VtZW50cyB0byBiZSBwYXJ0aWFsbHkgYXBwbGllZC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBwYXJ0aWFsbHkgYXBwbGllZCBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGdyZWV0ID0gZnVuY3Rpb24oZ3JlZXRpbmcsIG5hbWUpIHtcbiAgICAgKiAgIHJldHVybiBncmVldGluZyArICcgJyArIG5hbWU7XG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIHZhciBzYXlIZWxsb1RvID0gXy5wYXJ0aWFsKGdyZWV0LCAnaGVsbG8nKTtcbiAgICAgKiBzYXlIZWxsb1RvKCdmcmVkJyk7XG4gICAgICogLy8gPT4gJ2hlbGxvIGZyZWQnXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBwbGFjZWhvbGRlcnNcbiAgICAgKiB2YXIgZ3JlZXRGcmVkID0gXy5wYXJ0aWFsKGdyZWV0LCBfLCAnZnJlZCcpO1xuICAgICAqIGdyZWV0RnJlZCgnaGknKTtcbiAgICAgKiAvLyA9PiAnaGkgZnJlZCdcbiAgICAgKi9cbiAgICB2YXIgcGFydGlhbCA9IGNyZWF0ZVBhcnRpYWwoUEFSVElBTF9GTEFHKTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8ucGFydGlhbGAgZXhjZXB0IHRoYXQgcGFydGlhbGx5IGFwcGxpZWQgYXJndW1lbnRzXG4gICAgICogYXJlIGFwcGVuZGVkIHRvIHRob3NlIHByb3ZpZGVkIHRvIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBUaGUgYF8ucGFydGlhbFJpZ2h0LnBsYWNlaG9sZGVyYCB2YWx1ZSwgd2hpY2ggZGVmYXVsdHMgdG8gYF9gIGluIG1vbm9saXRoaWNcbiAgICAgKiBidWlsZHMsIG1heSBiZSB1c2VkIGFzIGEgcGxhY2Vob2xkZXIgZm9yIHBhcnRpYWxseSBhcHBsaWVkIGFyZ3VtZW50cy5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBkb2VzIG5vdCBzZXQgdGhlIFwibGVuZ3RoXCIgcHJvcGVydHkgb2YgcGFydGlhbGx5XG4gICAgICogYXBwbGllZCBmdW5jdGlvbnMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBwYXJ0aWFsbHkgYXBwbHkgYXJndW1lbnRzIHRvLlxuICAgICAqIEBwYXJhbSB7Li4uKn0gW3BhcnRpYWxzXSBUaGUgYXJndW1lbnRzIHRvIGJlIHBhcnRpYWxseSBhcHBsaWVkLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHBhcnRpYWxseSBhcHBsaWVkIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgZ3JlZXQgPSBmdW5jdGlvbihncmVldGluZywgbmFtZSkge1xuICAgICAqICAgcmV0dXJuIGdyZWV0aW5nICsgJyAnICsgbmFtZTtcbiAgICAgKiB9O1xuICAgICAqXG4gICAgICogdmFyIGdyZWV0RnJlZCA9IF8ucGFydGlhbFJpZ2h0KGdyZWV0LCAnZnJlZCcpO1xuICAgICAqIGdyZWV0RnJlZCgnaGknKTtcbiAgICAgKiAvLyA9PiAnaGkgZnJlZCdcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHBsYWNlaG9sZGVyc1xuICAgICAqIHZhciBzYXlIZWxsb1RvID0gXy5wYXJ0aWFsUmlnaHQoZ3JlZXQsICdoZWxsbycsIF8pO1xuICAgICAqIHNheUhlbGxvVG8oJ2ZyZWQnKTtcbiAgICAgKiAvLyA9PiAnaGVsbG8gZnJlZCdcbiAgICAgKi9cbiAgICB2YXIgcGFydGlhbFJpZ2h0ID0gY3JlYXRlUGFydGlhbChQQVJUSUFMX1JJR0hUX0ZMQUcpO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgaW52b2tlcyBgZnVuY2Agd2l0aCBhcmd1bWVudHMgYXJyYW5nZWQgYWNjb3JkaW5nXG4gICAgICogdG8gdGhlIHNwZWNpZmllZCBpbmRleGVzIHdoZXJlIHRoZSBhcmd1bWVudCB2YWx1ZSBhdCB0aGUgZmlyc3QgaW5kZXggaXNcbiAgICAgKiBwcm92aWRlZCBhcyB0aGUgZmlyc3QgYXJndW1lbnQsIHRoZSBhcmd1bWVudCB2YWx1ZSBhdCB0aGUgc2Vjb25kIGluZGV4IGlzXG4gICAgICogcHJvdmlkZWQgYXMgdGhlIHNlY29uZCBhcmd1bWVudCwgYW5kIHNvIG9uLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gcmVhcnJhbmdlIGFyZ3VtZW50cyBmb3IuXG4gICAgICogQHBhcmFtIHsuLi4obnVtYmVyfG51bWJlcltdKX0gaW5kZXhlcyBUaGUgYXJyYW5nZWQgYXJndW1lbnQgaW5kZXhlcyxcbiAgICAgKiAgc3BlY2lmaWVkIGFzIGluZGl2aWR1YWwgaW5kZXhlcyBvciBhcnJheXMgb2YgaW5kZXhlcy5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIHJlYXJnZWQgPSBfLnJlYXJnKGZ1bmN0aW9uKGEsIGIsIGMpIHtcbiAgICAgKiAgIHJldHVybiBbYSwgYiwgY107XG4gICAgICogfSwgMiwgMCwgMSk7XG4gICAgICpcbiAgICAgKiByZWFyZ2VkKCdiJywgJ2MnLCAnYScpXG4gICAgICogLy8gPT4gWydhJywgJ2InLCAnYyddXG4gICAgICpcbiAgICAgKiB2YXIgbWFwID0gXy5yZWFyZyhfLm1hcCwgWzEsIDBdKTtcbiAgICAgKiBtYXAoZnVuY3Rpb24obikge1xuICAgICAqICAgcmV0dXJuIG4gKiAzO1xuICAgICAqIH0sIFsxLCAyLCAzXSk7XG4gICAgICogLy8gPT4gWzMsIDYsIDldXG4gICAgICovXG4gICAgdmFyIHJlYXJnID0gcmVzdFBhcmFtKGZ1bmN0aW9uKGZ1bmMsIGluZGV4ZXMpIHtcbiAgICAgIHJldHVybiBjcmVhdGVXcmFwcGVyKGZ1bmMsIFJFQVJHX0ZMQUcsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGJhc2VGbGF0dGVuKGluZGV4ZXMpKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGludm9rZXMgYGZ1bmNgIHdpdGggdGhlIGB0aGlzYCBiaW5kaW5nIG9mIHRoZVxuICAgICAqIGNyZWF0ZWQgZnVuY3Rpb24gYW5kIGFyZ3VtZW50cyBmcm9tIGBzdGFydGAgYW5kIGJleW9uZCBwcm92aWRlZCBhcyBhbiBhcnJheS5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBpcyBiYXNlZCBvbiB0aGUgW3Jlc3QgcGFyYW1ldGVyXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9GdW5jdGlvbnMvcmVzdF9wYXJhbWV0ZXJzKS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGFwcGx5IGEgcmVzdCBwYXJhbWV0ZXIgdG8uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtzdGFydD1mdW5jLmxlbmd0aC0xXSBUaGUgc3RhcnQgcG9zaXRpb24gb2YgdGhlIHJlc3QgcGFyYW1ldGVyLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgc2F5ID0gXy5yZXN0UGFyYW0oZnVuY3Rpb24od2hhdCwgbmFtZXMpIHtcbiAgICAgKiAgIHJldHVybiB3aGF0ICsgJyAnICsgXy5pbml0aWFsKG5hbWVzKS5qb2luKCcsICcpICtcbiAgICAgKiAgICAgKF8uc2l6ZShuYW1lcykgPiAxID8gJywgJiAnIDogJycpICsgXy5sYXN0KG5hbWVzKTtcbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIHNheSgnaGVsbG8nLCAnZnJlZCcsICdiYXJuZXknLCAncGViYmxlcycpO1xuICAgICAqIC8vID0+ICdoZWxsbyBmcmVkLCBiYXJuZXksICYgcGViYmxlcydcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZXN0UGFyYW0oZnVuYywgc3RhcnQpIHtcbiAgICAgIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcbiAgICAgIH1cbiAgICAgIHN0YXJ0ID0gbmF0aXZlTWF4KHN0YXJ0ID09PSB1bmRlZmluZWQgPyAoZnVuYy5sZW5ndGggLSAxKSA6ICgrc3RhcnQgfHwgMCksIDApO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cyxcbiAgICAgICAgICAgIGluZGV4ID0gLTEsXG4gICAgICAgICAgICBsZW5ndGggPSBuYXRpdmVNYXgoYXJncy5sZW5ndGggLSBzdGFydCwgMCksXG4gICAgICAgICAgICByZXN0ID0gQXJyYXkobGVuZ3RoKTtcblxuICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICAgIHJlc3RbaW5kZXhdID0gYXJnc1tzdGFydCArIGluZGV4XTtcbiAgICAgICAgfVxuICAgICAgICBzd2l0Y2ggKHN0YXJ0KSB7XG4gICAgICAgICAgY2FzZSAwOiByZXR1cm4gZnVuYy5jYWxsKHRoaXMsIHJlc3QpO1xuICAgICAgICAgIGNhc2UgMTogcmV0dXJuIGZ1bmMuY2FsbCh0aGlzLCBhcmdzWzBdLCByZXN0KTtcbiAgICAgICAgICBjYXNlIDI6IHJldHVybiBmdW5jLmNhbGwodGhpcywgYXJnc1swXSwgYXJnc1sxXSwgcmVzdCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG90aGVyQXJncyA9IEFycmF5KHN0YXJ0ICsgMSk7XG4gICAgICAgIGluZGV4ID0gLTE7XG4gICAgICAgIHdoaWxlICgrK2luZGV4IDwgc3RhcnQpIHtcbiAgICAgICAgICBvdGhlckFyZ3NbaW5kZXhdID0gYXJnc1tpbmRleF07XG4gICAgICAgIH1cbiAgICAgICAgb3RoZXJBcmdzW3N0YXJ0XSA9IHJlc3Q7XG4gICAgICAgIHJldHVybiBmdW5jLmFwcGx5KHRoaXMsIG90aGVyQXJncyk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGludm9rZXMgYGZ1bmNgIHdpdGggdGhlIGB0aGlzYCBiaW5kaW5nIG9mIHRoZSBjcmVhdGVkXG4gICAgICogZnVuY3Rpb24gYW5kIGFuIGFycmF5IG9mIGFyZ3VtZW50cyBtdWNoIGxpa2UgW2BGdW5jdGlvbiNhcHBseWBdKGh0dHBzOi8vZXM1LmdpdGh1Yi5pby8jeDE1LjMuNC4zKS5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBpcyBiYXNlZCBvbiB0aGUgW3NwcmVhZCBvcGVyYXRvcl0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvT3BlcmF0b3JzL1NwcmVhZF9vcGVyYXRvcikuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBzcHJlYWQgYXJndW1lbnRzIG92ZXIuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBzYXkgPSBfLnNwcmVhZChmdW5jdGlvbih3aG8sIHdoYXQpIHtcbiAgICAgKiAgIHJldHVybiB3aG8gKyAnIHNheXMgJyArIHdoYXQ7XG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiBzYXkoWydmcmVkJywgJ2hlbGxvJ10pO1xuICAgICAqIC8vID0+ICdmcmVkIHNheXMgaGVsbG8nXG4gICAgICpcbiAgICAgKiAvLyB3aXRoIGEgUHJvbWlzZVxuICAgICAqIHZhciBudW1iZXJzID0gUHJvbWlzZS5hbGwoW1xuICAgICAqICAgUHJvbWlzZS5yZXNvbHZlKDQwKSxcbiAgICAgKiAgIFByb21pc2UucmVzb2x2ZSgzNilcbiAgICAgKiBdKTtcbiAgICAgKlxuICAgICAqIG51bWJlcnMudGhlbihfLnNwcmVhZChmdW5jdGlvbih4LCB5KSB7XG4gICAgICogICByZXR1cm4geCArIHk7XG4gICAgICogfSkpO1xuICAgICAqIC8vID0+IGEgUHJvbWlzZSBvZiA3NlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHNwcmVhZChmdW5jKSB7XG4gICAgICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkodGhpcywgYXJyYXkpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgdGhyb3R0bGVkIGZ1bmN0aW9uIHRoYXQgb25seSBpbnZva2VzIGBmdW5jYCBhdCBtb3N0IG9uY2UgcGVyXG4gICAgICogZXZlcnkgYHdhaXRgIG1pbGxpc2Vjb25kcy4gVGhlIHRocm90dGxlZCBmdW5jdGlvbiBjb21lcyB3aXRoIGEgYGNhbmNlbGBcbiAgICAgKiBtZXRob2QgdG8gY2FuY2VsIGRlbGF5ZWQgaW52b2NhdGlvbnMuIFByb3ZpZGUgYW4gb3B0aW9ucyBvYmplY3QgdG8gaW5kaWNhdGVcbiAgICAgKiB0aGF0IGBmdW5jYCBzaG91bGQgYmUgaW52b2tlZCBvbiB0aGUgbGVhZGluZyBhbmQvb3IgdHJhaWxpbmcgZWRnZSBvZiB0aGVcbiAgICAgKiBgd2FpdGAgdGltZW91dC4gU3Vic2VxdWVudCBjYWxscyB0byB0aGUgdGhyb3R0bGVkIGZ1bmN0aW9uIHJldHVybiB0aGVcbiAgICAgKiByZXN1bHQgb2YgdGhlIGxhc3QgYGZ1bmNgIGNhbGwuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogSWYgYGxlYWRpbmdgIGFuZCBgdHJhaWxpbmdgIG9wdGlvbnMgYXJlIGB0cnVlYCwgYGZ1bmNgIGlzIGludm9rZWRcbiAgICAgKiBvbiB0aGUgdHJhaWxpbmcgZWRnZSBvZiB0aGUgdGltZW91dCBvbmx5IGlmIHRoZSB0aGUgdGhyb3R0bGVkIGZ1bmN0aW9uIGlzXG4gICAgICogaW52b2tlZCBtb3JlIHRoYW4gb25jZSBkdXJpbmcgdGhlIGB3YWl0YCB0aW1lb3V0LlxuICAgICAqXG4gICAgICogU2VlIFtEYXZpZCBDb3JiYWNobydzIGFydGljbGVdKGh0dHA6Ly9kcnVwYWxtb3Rpb24uY29tL2FydGljbGUvZGVib3VuY2UtYW5kLXRocm90dGxlLXZpc3VhbC1leHBsYW5hdGlvbilcbiAgICAgKiBmb3IgZGV0YWlscyBvdmVyIHRoZSBkaWZmZXJlbmNlcyBiZXR3ZWVuIGBfLnRocm90dGxlYCBhbmQgYF8uZGVib3VuY2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gdGhyb3R0bGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFt3YWl0PTBdIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIHRocm90dGxlIGludm9jYXRpb25zIHRvLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gVGhlIG9wdGlvbnMgb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMubGVhZGluZz10cnVlXSBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSBsZWFkaW5nXG4gICAgICogIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy50cmFpbGluZz10cnVlXSBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSB0cmFpbGluZ1xuICAgICAqICBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHRocm90dGxlZCBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogLy8gYXZvaWQgZXhjZXNzaXZlbHkgdXBkYXRpbmcgdGhlIHBvc2l0aW9uIHdoaWxlIHNjcm9sbGluZ1xuICAgICAqIGpRdWVyeSh3aW5kb3cpLm9uKCdzY3JvbGwnLCBfLnRocm90dGxlKHVwZGF0ZVBvc2l0aW9uLCAxMDApKTtcbiAgICAgKlxuICAgICAqIC8vIGludm9rZSBgcmVuZXdUb2tlbmAgd2hlbiB0aGUgY2xpY2sgZXZlbnQgaXMgZmlyZWQsIGJ1dCBub3QgbW9yZSB0aGFuIG9uY2UgZXZlcnkgNSBtaW51dGVzXG4gICAgICogalF1ZXJ5KCcuaW50ZXJhY3RpdmUnKS5vbignY2xpY2snLCBfLnRocm90dGxlKHJlbmV3VG9rZW4sIDMwMDAwMCwge1xuICAgICAqICAgJ3RyYWlsaW5nJzogZmFsc2VcbiAgICAgKiB9KSk7XG4gICAgICpcbiAgICAgKiAvLyBjYW5jZWwgYSB0cmFpbGluZyB0aHJvdHRsZWQgY2FsbFxuICAgICAqIGpRdWVyeSh3aW5kb3cpLm9uKCdwb3BzdGF0ZScsIHRocm90dGxlZC5jYW5jZWwpO1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIHRocm90dGxlKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBsZWFkaW5nID0gdHJ1ZSxcbiAgICAgICAgICB0cmFpbGluZyA9IHRydWU7XG5cbiAgICAgIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcbiAgICAgIH1cbiAgICAgIGlmIChvcHRpb25zID09PSBmYWxzZSkge1xuICAgICAgICBsZWFkaW5nID0gZmFsc2U7XG4gICAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KG9wdGlvbnMpKSB7XG4gICAgICAgIGxlYWRpbmcgPSAnbGVhZGluZycgaW4gb3B0aW9ucyA/ICEhb3B0aW9ucy5sZWFkaW5nIDogbGVhZGluZztcbiAgICAgICAgdHJhaWxpbmcgPSAndHJhaWxpbmcnIGluIG9wdGlvbnMgPyAhIW9wdGlvbnMudHJhaWxpbmcgOiB0cmFpbGluZztcbiAgICAgIH1cbiAgICAgIHJldHVybiBkZWJvdW5jZShmdW5jLCB3YWl0LCB7ICdsZWFkaW5nJzogbGVhZGluZywgJ21heFdhaXQnOiArd2FpdCwgJ3RyYWlsaW5nJzogdHJhaWxpbmcgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgcHJvdmlkZXMgYHZhbHVlYCB0byB0aGUgd3JhcHBlciBmdW5jdGlvbiBhcyBpdHNcbiAgICAgKiBmaXJzdCBhcmd1bWVudC4gQW55IGFkZGl0aW9uYWwgYXJndW1lbnRzIHByb3ZpZGVkIHRvIHRoZSBmdW5jdGlvbiBhcmVcbiAgICAgKiBhcHBlbmRlZCB0byB0aG9zZSBwcm92aWRlZCB0byB0aGUgd3JhcHBlciBmdW5jdGlvbi4gVGhlIHdyYXBwZXIgaXMgaW52b2tlZFxuICAgICAqIHdpdGggdGhlIGB0aGlzYCBiaW5kaW5nIG9mIHRoZSBjcmVhdGVkIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gd3JhcC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSB3cmFwcGVyIFRoZSB3cmFwcGVyIGZ1bmN0aW9uLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgcCA9IF8ud3JhcChfLmVzY2FwZSwgZnVuY3Rpb24oZnVuYywgdGV4dCkge1xuICAgICAqICAgcmV0dXJuICc8cD4nICsgZnVuYyh0ZXh0KSArICc8L3A+JztcbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIHAoJ2ZyZWQsIGJhcm5leSwgJiBwZWJibGVzJyk7XG4gICAgICogLy8gPT4gJzxwPmZyZWQsIGJhcm5leSwgJmFtcDsgcGViYmxlczwvcD4nXG4gICAgICovXG4gICAgZnVuY3Rpb24gd3JhcCh2YWx1ZSwgd3JhcHBlcikge1xuICAgICAgd3JhcHBlciA9IHdyYXBwZXIgPT0gbnVsbCA/IGlkZW50aXR5IDogd3JhcHBlcjtcbiAgICAgIHJldHVybiBjcmVhdGVXcmFwcGVyKHdyYXBwZXIsIFBBUlRJQUxfRkxBRywgdW5kZWZpbmVkLCBbdmFsdWVdLCBbXSk7XG4gICAgfVxuXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGNsb25lIG9mIGB2YWx1ZWAuIElmIGBpc0RlZXBgIGlzIGB0cnVlYCBuZXN0ZWQgb2JqZWN0cyBhcmUgY2xvbmVkLFxuICAgICAqIG90aGVyd2lzZSB0aGV5IGFyZSBhc3NpZ25lZCBieSByZWZlcmVuY2UuIElmIGBjdXN0b21pemVyYCBpcyBwcm92aWRlZCBpdCBpc1xuICAgICAqIGludm9rZWQgdG8gcHJvZHVjZSB0aGUgY2xvbmVkIHZhbHVlcy4gSWYgYGN1c3RvbWl6ZXJgIHJldHVybnMgYHVuZGVmaW5lZGBcbiAgICAgKiBjbG9uaW5nIGlzIGhhbmRsZWQgYnkgdGhlIG1ldGhvZCBpbnN0ZWFkLiBUaGUgYGN1c3RvbWl6ZXJgIGlzIGJvdW5kIHRvXG4gICAgICogYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdHdvIGFyZ3VtZW50OyAodmFsdWUgWywgaW5kZXh8a2V5LCBvYmplY3RdKS5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBpcyBsb29zZWx5IGJhc2VkIG9uIHRoZVxuICAgICAqIFtzdHJ1Y3R1cmVkIGNsb25lIGFsZ29yaXRobV0oaHR0cDovL3d3dy53My5vcmcvVFIvaHRtbDUvaW5mcmFzdHJ1Y3R1cmUuaHRtbCNpbnRlcm5hbC1zdHJ1Y3R1cmVkLWNsb25pbmctYWxnb3JpdGhtKS5cbiAgICAgKiBUaGUgZW51bWVyYWJsZSBwcm9wZXJ0aWVzIG9mIGBhcmd1bWVudHNgIG9iamVjdHMgYW5kIG9iamVjdHMgY3JlYXRlZCBieVxuICAgICAqIGNvbnN0cnVjdG9ycyBvdGhlciB0aGFuIGBPYmplY3RgIGFyZSBjbG9uZWQgdG8gcGxhaW4gYE9iamVjdGAgb2JqZWN0cy4gQW5cbiAgICAgKiBlbXB0eSBvYmplY3QgaXMgcmV0dXJuZWQgZm9yIHVuY2xvbmVhYmxlIHZhbHVlcyBzdWNoIGFzIGZ1bmN0aW9ucywgRE9NIG5vZGVzLFxuICAgICAqIE1hcHMsIFNldHMsIGFuZCBXZWFrTWFwcy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2xvbmUuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbaXNEZWVwXSBTcGVjaWZ5IGEgZGVlcCBjbG9uZS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY3VzdG9taXplcl0gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjbG9uaW5nIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGN1c3RvbWl6ZXJgLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBjbG9uZWQgdmFsdWUuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciB1c2VycyA9IFtcbiAgICAgKiAgIHsgJ3VzZXInOiAnYmFybmV5JyB9LFxuICAgICAqICAgeyAndXNlcic6ICdmcmVkJyB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIHZhciBzaGFsbG93ID0gXy5jbG9uZSh1c2Vycyk7XG4gICAgICogc2hhbGxvd1swXSA9PT0gdXNlcnNbMF07XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogdmFyIGRlZXAgPSBfLmNsb25lKHVzZXJzLCB0cnVlKTtcbiAgICAgKiBkZWVwWzBdID09PSB1c2Vyc1swXTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgYSBjdXN0b21pemVyIGNhbGxiYWNrXG4gICAgICogdmFyIGVsID0gXy5jbG9uZShkb2N1bWVudC5ib2R5LCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAqICAgaWYgKF8uaXNFbGVtZW50KHZhbHVlKSkge1xuICAgICAqICAgICByZXR1cm4gdmFsdWUuY2xvbmVOb2RlKGZhbHNlKTtcbiAgICAgKiAgIH1cbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIGVsID09PSBkb2N1bWVudC5ib2R5XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKiBlbC5ub2RlTmFtZVxuICAgICAqIC8vID0+IEJPRFlcbiAgICAgKiBlbC5jaGlsZE5vZGVzLmxlbmd0aDtcbiAgICAgKiAvLyA9PiAwXG4gICAgICovXG4gICAgZnVuY3Rpb24gY2xvbmUodmFsdWUsIGlzRGVlcCwgY3VzdG9taXplciwgdGhpc0FyZykge1xuICAgICAgaWYgKGlzRGVlcCAmJiB0eXBlb2YgaXNEZWVwICE9ICdib29sZWFuJyAmJiBpc0l0ZXJhdGVlQ2FsbCh2YWx1ZSwgaXNEZWVwLCBjdXN0b21pemVyKSkge1xuICAgICAgICBpc0RlZXAgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKHR5cGVvZiBpc0RlZXAgPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aGlzQXJnID0gY3VzdG9taXplcjtcbiAgICAgICAgY3VzdG9taXplciA9IGlzRGVlcDtcbiAgICAgICAgaXNEZWVwID0gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHlwZW9mIGN1c3RvbWl6ZXIgPT0gJ2Z1bmN0aW9uJ1xuICAgICAgICA/IGJhc2VDbG9uZSh2YWx1ZSwgaXNEZWVwLCBiaW5kQ2FsbGJhY2soY3VzdG9taXplciwgdGhpc0FyZywgMSkpXG4gICAgICAgIDogYmFzZUNsb25lKHZhbHVlLCBpc0RlZXApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBkZWVwIGNsb25lIG9mIGB2YWx1ZWAuIElmIGBjdXN0b21pemVyYCBpcyBwcm92aWRlZCBpdCBpcyBpbnZva2VkXG4gICAgICogdG8gcHJvZHVjZSB0aGUgY2xvbmVkIHZhbHVlcy4gSWYgYGN1c3RvbWl6ZXJgIHJldHVybnMgYHVuZGVmaW5lZGAgY2xvbmluZ1xuICAgICAqIGlzIGhhbmRsZWQgYnkgdGhlIG1ldGhvZCBpbnN0ZWFkLiBUaGUgYGN1c3RvbWl6ZXJgIGlzIGJvdW5kIHRvIGB0aGlzQXJnYFxuICAgICAqIGFuZCBpbnZva2VkIHdpdGggdHdvIGFyZ3VtZW50OyAodmFsdWUgWywgaW5kZXh8a2V5LCBvYmplY3RdKS5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBpcyBsb29zZWx5IGJhc2VkIG9uIHRoZVxuICAgICAqIFtzdHJ1Y3R1cmVkIGNsb25lIGFsZ29yaXRobV0oaHR0cDovL3d3dy53My5vcmcvVFIvaHRtbDUvaW5mcmFzdHJ1Y3R1cmUuaHRtbCNpbnRlcm5hbC1zdHJ1Y3R1cmVkLWNsb25pbmctYWxnb3JpdGhtKS5cbiAgICAgKiBUaGUgZW51bWVyYWJsZSBwcm9wZXJ0aWVzIG9mIGBhcmd1bWVudHNgIG9iamVjdHMgYW5kIG9iamVjdHMgY3JlYXRlZCBieVxuICAgICAqIGNvbnN0cnVjdG9ycyBvdGhlciB0aGFuIGBPYmplY3RgIGFyZSBjbG9uZWQgdG8gcGxhaW4gYE9iamVjdGAgb2JqZWN0cy4gQW5cbiAgICAgKiBlbXB0eSBvYmplY3QgaXMgcmV0dXJuZWQgZm9yIHVuY2xvbmVhYmxlIHZhbHVlcyBzdWNoIGFzIGZ1bmN0aW9ucywgRE9NIG5vZGVzLFxuICAgICAqIE1hcHMsIFNldHMsIGFuZCBXZWFrTWFwcy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gZGVlcCBjbG9uZS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY3VzdG9taXplcl0gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjbG9uaW5nIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGN1c3RvbWl6ZXJgLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBkZWVwIGNsb25lZCB2YWx1ZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIHVzZXJzID0gW1xuICAgICAqICAgeyAndXNlcic6ICdiYXJuZXknIH0sXG4gICAgICogICB7ICd1c2VyJzogJ2ZyZWQnIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogdmFyIGRlZXAgPSBfLmNsb25lRGVlcCh1c2Vycyk7XG4gICAgICogZGVlcFswXSA9PT0gdXNlcnNbMF07XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIGEgY3VzdG9taXplciBjYWxsYmFja1xuICAgICAqIHZhciBlbCA9IF8uY2xvbmVEZWVwKGRvY3VtZW50LmJvZHksIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICogICBpZiAoXy5pc0VsZW1lbnQodmFsdWUpKSB7XG4gICAgICogICAgIHJldHVybiB2YWx1ZS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICogICB9XG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiBlbCA9PT0gZG9jdW1lbnQuYm9keVxuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICogZWwubm9kZU5hbWVcbiAgICAgKiAvLyA9PiBCT0RZXG4gICAgICogZWwuY2hpbGROb2Rlcy5sZW5ndGg7XG4gICAgICogLy8gPT4gMjBcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjbG9uZURlZXAodmFsdWUsIGN1c3RvbWl6ZXIsIHRoaXNBcmcpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgY3VzdG9taXplciA9PSAnZnVuY3Rpb24nXG4gICAgICAgID8gYmFzZUNsb25lKHZhbHVlLCB0cnVlLCBiaW5kQ2FsbGJhY2soY3VzdG9taXplciwgdGhpc0FyZywgMSkpXG4gICAgICAgIDogYmFzZUNsb25lKHZhbHVlLCB0cnVlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBncmVhdGVyIHRoYW4gYG90aGVyYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29tcGFyZS5cbiAgICAgKiBAcGFyYW0geyp9IG90aGVyIFRoZSBvdGhlciB2YWx1ZSB0byBjb21wYXJlLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGdyZWF0ZXIgdGhhbiBgb3RoZXJgLCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uZ3QoMywgMSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5ndCgzLCAzKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqXG4gICAgICogXy5ndCgxLCAzKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGd0KHZhbHVlLCBvdGhlcikge1xuICAgICAgcmV0dXJuIHZhbHVlID4gb3RoZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIGBvdGhlcmAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbXBhcmUuXG4gICAgICogQHBhcmFtIHsqfSBvdGhlciBUaGUgb3RoZXIgdmFsdWUgdG8gY29tcGFyZS5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gYG90aGVyYCwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmd0ZSgzLCAxKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmd0ZSgzLCAzKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmd0ZSgxLCAzKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGd0ZSh2YWx1ZSwgb3RoZXIpIHtcbiAgICAgIHJldHVybiB2YWx1ZSA+PSBvdGhlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGFuIGBhcmd1bWVudHNgIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgY29ycmVjdGx5IGNsYXNzaWZpZWQsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pc0FyZ3VtZW50cyhmdW5jdGlvbigpIHsgcmV0dXJuIGFyZ3VtZW50czsgfSgpKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzQXJndW1lbnRzKFsxLCAyLCAzXSk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc0FyZ3VtZW50cyh2YWx1ZSkge1xuICAgICAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgaXNBcnJheUxpa2UodmFsdWUpICYmXG4gICAgICAgIGhhc093blByb3BlcnR5LmNhbGwodmFsdWUsICdjYWxsZWUnKSAmJiAhcHJvcGVydHlJc0VudW1lcmFibGUuY2FsbCh2YWx1ZSwgJ2NhbGxlZScpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYW4gYEFycmF5YCBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGNvcnJlY3RseSBjbGFzc2lmaWVkLCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaXNBcnJheShbMSwgMiwgM10pO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNBcnJheShmdW5jdGlvbigpIHsgcmV0dXJuIGFyZ3VtZW50czsgfSgpKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIHZhciBpc0FycmF5ID0gbmF0aXZlSXNBcnJheSB8fCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgaXNMZW5ndGgodmFsdWUubGVuZ3RoKSAmJiBvYmpUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBhcnJheVRhZztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGJvb2xlYW4gcHJpbWl0aXZlIG9yIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgY29ycmVjdGx5IGNsYXNzaWZpZWQsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pc0Jvb2xlYW4oZmFsc2UpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNCb29sZWFuKG51bGwpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNCb29sZWFuKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdmFsdWUgPT09IHRydWUgfHwgdmFsdWUgPT09IGZhbHNlIHx8IChpc09iamVjdExpa2UodmFsdWUpICYmIG9ialRvU3RyaW5nLmNhbGwodmFsdWUpID09IGJvb2xUYWcpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgRGF0ZWAgb2JqZWN0LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IExhbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBjb3JyZWN0bHkgY2xhc3NpZmllZCwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmlzRGF0ZShuZXcgRGF0ZSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc0RhdGUoJ01vbiBBcHJpbCAyMyAyMDEyJyk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc0RhdGUodmFsdWUpIHtcbiAgICAgIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmIG9ialRvU3RyaW5nLmNhbGwodmFsdWUpID09IGRhdGVUYWc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBET00gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBET00gZWxlbWVudCwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmlzRWxlbWVudChkb2N1bWVudC5ib2R5KTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzRWxlbWVudCgnPGJvZHk+Jyk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc0VsZW1lbnQodmFsdWUpIHtcbiAgICAgIHJldHVybiAhIXZhbHVlICYmIHZhbHVlLm5vZGVUeXBlID09PSAxICYmIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgIWlzUGxhaW5PYmplY3QodmFsdWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGVtcHR5LiBBIHZhbHVlIGlzIGNvbnNpZGVyZWQgZW1wdHkgdW5sZXNzIGl0IGlzIGFuXG4gICAgICogYGFyZ3VtZW50c2Agb2JqZWN0LCBhcnJheSwgc3RyaW5nLCBvciBqUXVlcnktbGlrZSBjb2xsZWN0aW9uIHdpdGggYSBsZW5ndGhcbiAgICAgKiBncmVhdGVyIHRoYW4gYDBgIG9yIGFuIG9iamVjdCB3aXRoIG93biBlbnVtZXJhYmxlIHByb3BlcnRpZXMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gdmFsdWUgVGhlIHZhbHVlIHRvIGluc3BlY3QuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgZW1wdHksIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pc0VtcHR5KG51bGwpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNFbXB0eSh0cnVlKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzRW1wdHkoMSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc0VtcHR5KFsxLCAyLCAzXSk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKlxuICAgICAqIF8uaXNFbXB0eSh7ICdhJzogMSB9KTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzRW1wdHkodmFsdWUpIHtcbiAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKGlzQXJyYXlMaWtlKHZhbHVlKSAmJiAoaXNBcnJheSh2YWx1ZSkgfHwgaXNTdHJpbmcodmFsdWUpIHx8IGlzQXJndW1lbnRzKHZhbHVlKSB8fFxuICAgICAgICAgIChpc09iamVjdExpa2UodmFsdWUpICYmIGlzRnVuY3Rpb24odmFsdWUuc3BsaWNlKSkpKSB7XG4gICAgICAgIHJldHVybiAhdmFsdWUubGVuZ3RoO1xuICAgICAgfVxuICAgICAgcmV0dXJuICFrZXlzKHZhbHVlKS5sZW5ndGg7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgYSBkZWVwIGNvbXBhcmlzb24gYmV0d2VlbiB0d28gdmFsdWVzIHRvIGRldGVybWluZSBpZiB0aGV5IGFyZVxuICAgICAqIGVxdWl2YWxlbnQuIElmIGBjdXN0b21pemVyYCBpcyBwcm92aWRlZCBpdCBpcyBpbnZva2VkIHRvIGNvbXBhcmUgdmFsdWVzLlxuICAgICAqIElmIGBjdXN0b21pemVyYCByZXR1cm5zIGB1bmRlZmluZWRgIGNvbXBhcmlzb25zIGFyZSBoYW5kbGVkIGJ5IHRoZSBtZXRob2RcbiAgICAgKiBpbnN0ZWFkLiBUaGUgYGN1c3RvbWl6ZXJgIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIHRocmVlXG4gICAgICogYXJndW1lbnRzOiAodmFsdWUsIG90aGVyIFssIGluZGV4fGtleV0pLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoaXMgbWV0aG9kIHN1cHBvcnRzIGNvbXBhcmluZyBhcnJheXMsIGJvb2xlYW5zLCBgRGF0ZWAgb2JqZWN0cyxcbiAgICAgKiBudW1iZXJzLCBgT2JqZWN0YCBvYmplY3RzLCByZWdleGVzLCBhbmQgc3RyaW5ncy4gT2JqZWN0cyBhcmUgY29tcGFyZWQgYnlcbiAgICAgKiB0aGVpciBvd24sIG5vdCBpbmhlcml0ZWQsIGVudW1lcmFibGUgcHJvcGVydGllcy4gRnVuY3Rpb25zIGFuZCBET00gbm9kZXNcbiAgICAgKiBhcmUgKipub3QqKiBzdXBwb3J0ZWQuIFByb3ZpZGUgYSBjdXN0b21pemVyIGZ1bmN0aW9uIHRvIGV4dGVuZCBzdXBwb3J0XG4gICAgICogZm9yIGNvbXBhcmluZyBvdGhlciB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAYWxpYXMgZXFcbiAgICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbXBhcmUuXG4gICAgICogQHBhcmFtIHsqfSBvdGhlciBUaGUgb3RoZXIgdmFsdWUgdG8gY29tcGFyZS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY3VzdG9taXplcl0gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSB2YWx1ZSBjb21wYXJpc29ucy5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGN1c3RvbWl6ZXJgLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgdmFsdWVzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBvYmplY3QgPSB7ICd1c2VyJzogJ2ZyZWQnIH07XG4gICAgICogdmFyIG90aGVyID0geyAndXNlcic6ICdmcmVkJyB9O1xuICAgICAqXG4gICAgICogb2JqZWN0ID09IG90aGVyO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICpcbiAgICAgKiBfLmlzRXF1YWwob2JqZWN0LCBvdGhlcik7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgYSBjdXN0b21pemVyIGNhbGxiYWNrXG4gICAgICogdmFyIGFycmF5ID0gWydoZWxsbycsICdnb29kYnllJ107XG4gICAgICogdmFyIG90aGVyID0gWydoaScsICdnb29kYnllJ107XG4gICAgICpcbiAgICAgKiBfLmlzRXF1YWwoYXJyYXksIG90aGVyLCBmdW5jdGlvbih2YWx1ZSwgb3RoZXIpIHtcbiAgICAgKiAgIGlmIChfLmV2ZXJ5KFt2YWx1ZSwgb3RoZXJdLCBSZWdFeHAucHJvdG90eXBlLnRlc3QsIC9eaCg/Oml8ZWxsbykkLykpIHtcbiAgICAgKiAgICAgcmV0dXJuIHRydWU7XG4gICAgICogICB9XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzRXF1YWwodmFsdWUsIG90aGVyLCBjdXN0b21pemVyLCB0aGlzQXJnKSB7XG4gICAgICBjdXN0b21pemVyID0gdHlwZW9mIGN1c3RvbWl6ZXIgPT0gJ2Z1bmN0aW9uJyA/IGJpbmRDYWxsYmFjayhjdXN0b21pemVyLCB0aGlzQXJnLCAzKSA6IHVuZGVmaW5lZDtcbiAgICAgIHZhciByZXN1bHQgPSBjdXN0b21pemVyID8gY3VzdG9taXplcih2YWx1ZSwgb3RoZXIpIDogdW5kZWZpbmVkO1xuICAgICAgcmV0dXJuICByZXN1bHQgPT09IHVuZGVmaW5lZCA/IGJhc2VJc0VxdWFsKHZhbHVlLCBvdGhlciwgY3VzdG9taXplcikgOiAhIXJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhbiBgRXJyb3JgLCBgRXZhbEVycm9yYCwgYFJhbmdlRXJyb3JgLCBgUmVmZXJlbmNlRXJyb3JgLFxuICAgICAqIGBTeW50YXhFcnJvcmAsIGBUeXBlRXJyb3JgLCBvciBgVVJJRXJyb3JgIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gZXJyb3Igb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaXNFcnJvcihuZXcgRXJyb3IpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNFcnJvcihFcnJvcik7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc0Vycm9yKHZhbHVlKSB7XG4gICAgICByZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJiB0eXBlb2YgdmFsdWUubWVzc2FnZSA9PSAnc3RyaW5nJyAmJiBvYmpUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBlcnJvclRhZztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIGZpbml0ZSBwcmltaXRpdmUgbnVtYmVyLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoaXMgbWV0aG9kIGlzIGJhc2VkIG9uIFtgTnVtYmVyLmlzRmluaXRlYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtbnVtYmVyLmlzZmluaXRlKS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBmaW5pdGUgbnVtYmVyLCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaXNGaW5pdGUoMTApO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNGaW5pdGUoJzEwJyk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKlxuICAgICAqIF8uaXNGaW5pdGUodHJ1ZSk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKlxuICAgICAqIF8uaXNGaW5pdGUoT2JqZWN0KDEwKSk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKlxuICAgICAqIF8uaXNGaW5pdGUoSW5maW5pdHkpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNGaW5pdGUodmFsdWUpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgJiYgbmF0aXZlSXNGaW5pdGUodmFsdWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgRnVuY3Rpb25gIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgY29ycmVjdGx5IGNsYXNzaWZpZWQsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pc0Z1bmN0aW9uKF8pO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNGdW5jdGlvbigvYWJjLyk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc0Z1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAvLyBUaGUgdXNlIG9mIGBPYmplY3QjdG9TdHJpbmdgIGF2b2lkcyBpc3N1ZXMgd2l0aCB0aGUgYHR5cGVvZmAgb3BlcmF0b3JcbiAgICAgIC8vIGluIG9sZGVyIHZlcnNpb25zIG9mIENocm9tZSBhbmQgU2FmYXJpIHdoaWNoIHJldHVybiAnZnVuY3Rpb24nIGZvciByZWdleGVzXG4gICAgICAvLyBhbmQgU2FmYXJpIDggZXF1aXZhbGVudHMgd2hpY2ggcmV0dXJuICdvYmplY3QnIGZvciB0eXBlZCBhcnJheSBjb25zdHJ1Y3RvcnMuXG4gICAgICByZXR1cm4gaXNPYmplY3QodmFsdWUpICYmIG9ialRvU3RyaW5nLmNhbGwodmFsdWUpID09IGZ1bmNUYWc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgdGhlIFtsYW5ndWFnZSB0eXBlXShodHRwczovL2VzNS5naXRodWIuaW8vI3g4KSBvZiBgT2JqZWN0YC5cbiAgICAgKiAoZS5nLiBhcnJheXMsIGZ1bmN0aW9ucywgb2JqZWN0cywgcmVnZXhlcywgYG5ldyBOdW1iZXIoMClgLCBhbmQgYG5ldyBTdHJpbmcoJycpYClcbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaXNPYmplY3Qoe30pO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzT2JqZWN0KDEpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcbiAgICAgIC8vIEF2b2lkIGEgVjggSklUIGJ1ZyBpbiBDaHJvbWUgMTktMjAuXG4gICAgICAvLyBTZWUgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTIyOTEgZm9yIG1vcmUgZGV0YWlscy5cbiAgICAgIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICAgICAgcmV0dXJuICEhdmFsdWUgJiYgKHR5cGUgPT0gJ29iamVjdCcgfHwgdHlwZSA9PSAnZnVuY3Rpb24nKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBhIGRlZXAgY29tcGFyaXNvbiBiZXR3ZWVuIGBvYmplY3RgIGFuZCBgc291cmNlYCB0byBkZXRlcm1pbmUgaWZcbiAgICAgKiBgb2JqZWN0YCBjb250YWlucyBlcXVpdmFsZW50IHByb3BlcnR5IHZhbHVlcy4gSWYgYGN1c3RvbWl6ZXJgIGlzIHByb3ZpZGVkXG4gICAgICogaXQgaXMgaW52b2tlZCB0byBjb21wYXJlIHZhbHVlcy4gSWYgYGN1c3RvbWl6ZXJgIHJldHVybnMgYHVuZGVmaW5lZGBcbiAgICAgKiBjb21wYXJpc29ucyBhcmUgaGFuZGxlZCBieSB0aGUgbWV0aG9kIGluc3RlYWQuIFRoZSBgY3VzdG9taXplcmAgaXMgYm91bmRcbiAgICAgKiB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM6ICh2YWx1ZSwgb3RoZXIsIGluZGV4fGtleSkuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVGhpcyBtZXRob2Qgc3VwcG9ydHMgY29tcGFyaW5nIHByb3BlcnRpZXMgb2YgYXJyYXlzLCBib29sZWFucyxcbiAgICAgKiBgRGF0ZWAgb2JqZWN0cywgbnVtYmVycywgYE9iamVjdGAgb2JqZWN0cywgcmVnZXhlcywgYW5kIHN0cmluZ3MuIEZ1bmN0aW9uc1xuICAgICAqIGFuZCBET00gbm9kZXMgYXJlICoqbm90Kiogc3VwcG9ydGVkLiBQcm92aWRlIGEgY3VzdG9taXplciBmdW5jdGlvbiB0byBleHRlbmRcbiAgICAgKiBzdXBwb3J0IGZvciBjb21wYXJpbmcgb3RoZXIgdmFsdWVzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IExhbmdcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaW5zcGVjdC5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gc291cmNlIFRoZSBvYmplY3Qgb2YgcHJvcGVydHkgdmFsdWVzIHRvIG1hdGNoLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIHZhbHVlIGNvbXBhcmlzb25zLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY3VzdG9taXplcmAuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBvYmplY3RgIGlzIGEgbWF0Y2gsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIG9iamVjdCA9IHsgJ3VzZXInOiAnZnJlZCcsICdhZ2UnOiA0MCB9O1xuICAgICAqXG4gICAgICogXy5pc01hdGNoKG9iamVjdCwgeyAnYWdlJzogNDAgfSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc01hdGNoKG9iamVjdCwgeyAnYWdlJzogMzYgfSk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIGEgY3VzdG9taXplciBjYWxsYmFja1xuICAgICAqIHZhciBvYmplY3QgPSB7ICdncmVldGluZyc6ICdoZWxsbycgfTtcbiAgICAgKiB2YXIgc291cmNlID0geyAnZ3JlZXRpbmcnOiAnaGknIH07XG4gICAgICpcbiAgICAgKiBfLmlzTWF0Y2gob2JqZWN0LCBzb3VyY2UsIGZ1bmN0aW9uKHZhbHVlLCBvdGhlcikge1xuICAgICAqICAgcmV0dXJuIF8uZXZlcnkoW3ZhbHVlLCBvdGhlcl0sIFJlZ0V4cC5wcm90b3R5cGUudGVzdCwgL15oKD86aXxlbGxvKSQvKSB8fCB1bmRlZmluZWQ7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzTWF0Y2gob2JqZWN0LCBzb3VyY2UsIGN1c3RvbWl6ZXIsIHRoaXNBcmcpIHtcbiAgICAgIGN1c3RvbWl6ZXIgPSB0eXBlb2YgY3VzdG9taXplciA9PSAnZnVuY3Rpb24nID8gYmluZENhbGxiYWNrKGN1c3RvbWl6ZXIsIHRoaXNBcmcsIDMpIDogdW5kZWZpbmVkO1xuICAgICAgcmV0dXJuIGJhc2VJc01hdGNoKG9iamVjdCwgZ2V0TWF0Y2hEYXRhKHNvdXJjZSksIGN1c3RvbWl6ZXIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGBOYU5gLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoaXMgbWV0aG9kIGlzIG5vdCB0aGUgc2FtZSBhcyBbYGlzTmFOYF0oaHR0cHM6Ly9lczUuZ2l0aHViLmlvLyN4MTUuMS4yLjQpXG4gICAgICogd2hpY2ggcmV0dXJucyBgdHJ1ZWAgZm9yIGB1bmRlZmluZWRgIGFuZCBvdGhlciBub24tbnVtZXJpYyB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGBOYU5gLCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaXNOYU4oTmFOKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzTmFOKG5ldyBOdW1iZXIoTmFOKSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogaXNOYU4odW5kZWZpbmVkKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzTmFOKHVuZGVmaW5lZCk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc05hTih2YWx1ZSkge1xuICAgICAgLy8gQW4gYE5hTmAgcHJpbWl0aXZlIGlzIHRoZSBvbmx5IHZhbHVlIHRoYXQgaXMgbm90IGVxdWFsIHRvIGl0c2VsZi5cbiAgICAgIC8vIFBlcmZvcm0gdGhlIGB0b1N0cmluZ1RhZ2AgY2hlY2sgZmlyc3QgdG8gYXZvaWQgZXJyb3JzIHdpdGggc29tZSBob3N0IG9iamVjdHMgaW4gSUUuXG4gICAgICByZXR1cm4gaXNOdW1iZXIodmFsdWUpICYmIHZhbHVlICE9ICt2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIG5hdGl2ZSBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBuYXRpdmUgZnVuY3Rpb24sIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pc05hdGl2ZShBcnJheS5wcm90b3R5cGUucHVzaCk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc05hdGl2ZShfKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzTmF0aXZlKHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAoaXNGdW5jdGlvbih2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHJlSXNOYXRpdmUudGVzdChmblRvU3RyaW5nLmNhbGwodmFsdWUpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmIHJlSXNIb3N0Q3Rvci50ZXN0KHZhbHVlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBgbnVsbGAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGBudWxsYCwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmlzTnVsbChudWxsKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzTnVsbCh2b2lkIDApO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNOdWxsKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdmFsdWUgPT09IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBOdW1iZXJgIHByaW1pdGl2ZSBvciBvYmplY3QuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVG8gZXhjbHVkZSBgSW5maW5pdHlgLCBgLUluZmluaXR5YCwgYW5kIGBOYU5gLCB3aGljaCBhcmUgY2xhc3NpZmllZFxuICAgICAqIGFzIG51bWJlcnMsIHVzZSB0aGUgYF8uaXNGaW5pdGVgIG1ldGhvZC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgY29ycmVjdGx5IGNsYXNzaWZpZWQsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pc051bWJlcig4LjQpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNOdW1iZXIoTmFOKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzTnVtYmVyKCc4LjQnKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzTnVtYmVyKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdudW1iZXInIHx8IChpc09iamVjdExpa2UodmFsdWUpICYmIG9ialRvU3RyaW5nLmNhbGwodmFsdWUpID09IG51bWJlclRhZyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBwbGFpbiBvYmplY3QsIHRoYXQgaXMsIGFuIG9iamVjdCBjcmVhdGVkIGJ5IHRoZVxuICAgICAqIGBPYmplY3RgIGNvbnN0cnVjdG9yIG9yIG9uZSB3aXRoIGEgYFtbUHJvdG90eXBlXV1gIG9mIGBudWxsYC5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBhc3N1bWVzIG9iamVjdHMgY3JlYXRlZCBieSB0aGUgYE9iamVjdGAgY29uc3RydWN0b3JcbiAgICAgKiBoYXZlIG5vIGluaGVyaXRlZCBlbnVtZXJhYmxlIHByb3BlcnRpZXMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgcGxhaW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGZ1bmN0aW9uIEZvbygpIHtcbiAgICAgKiAgIHRoaXMuYSA9IDE7XG4gICAgICogfVxuICAgICAqXG4gICAgICogXy5pc1BsYWluT2JqZWN0KG5ldyBGb28pO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICpcbiAgICAgKiBfLmlzUGxhaW5PYmplY3QoWzEsIDIsIDNdKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqXG4gICAgICogXy5pc1BsYWluT2JqZWN0KHsgJ3gnOiAwLCAneSc6IDAgfSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc1BsYWluT2JqZWN0KE9iamVjdC5jcmVhdGUobnVsbCkpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc1BsYWluT2JqZWN0KHZhbHVlKSB7XG4gICAgICB2YXIgQ3RvcjtcblxuICAgICAgLy8gRXhpdCBlYXJseSBmb3Igbm9uIGBPYmplY3RgIG9iamVjdHMuXG4gICAgICBpZiAoIShpc09iamVjdExpa2UodmFsdWUpICYmIG9ialRvU3RyaW5nLmNhbGwodmFsdWUpID09IG9iamVjdFRhZyAmJiAhaXNBcmd1bWVudHModmFsdWUpKSB8fFxuICAgICAgICAgICghaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwgJ2NvbnN0cnVjdG9yJykgJiYgKEN0b3IgPSB2YWx1ZS5jb25zdHJ1Y3RvciwgdHlwZW9mIEN0b3IgPT0gJ2Z1bmN0aW9uJyAmJiAhKEN0b3IgaW5zdGFuY2VvZiBDdG9yKSkpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIC8vIElFIDwgOSBpdGVyYXRlcyBpbmhlcml0ZWQgcHJvcGVydGllcyBiZWZvcmUgb3duIHByb3BlcnRpZXMuIElmIHRoZSBmaXJzdFxuICAgICAgLy8gaXRlcmF0ZWQgcHJvcGVydHkgaXMgYW4gb2JqZWN0J3Mgb3duIHByb3BlcnR5IHRoZW4gdGhlcmUgYXJlIG5vIGluaGVyaXRlZFxuICAgICAgLy8gZW51bWVyYWJsZSBwcm9wZXJ0aWVzLlxuICAgICAgdmFyIHJlc3VsdDtcbiAgICAgIC8vIEluIG1vc3QgZW52aXJvbm1lbnRzIGFuIG9iamVjdCdzIG93biBwcm9wZXJ0aWVzIGFyZSBpdGVyYXRlZCBiZWZvcmVcbiAgICAgIC8vIGl0cyBpbmhlcml0ZWQgcHJvcGVydGllcy4gSWYgdGhlIGxhc3QgaXRlcmF0ZWQgcHJvcGVydHkgaXMgYW4gb2JqZWN0J3NcbiAgICAgIC8vIG93biBwcm9wZXJ0eSB0aGVuIHRoZXJlIGFyZSBubyBpbmhlcml0ZWQgZW51bWVyYWJsZSBwcm9wZXJ0aWVzLlxuICAgICAgYmFzZUZvckluKHZhbHVlLCBmdW5jdGlvbihzdWJWYWx1ZSwga2V5KSB7XG4gICAgICAgIHJlc3VsdCA9IGtleTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3VsdCA9PT0gdW5kZWZpbmVkIHx8IGhhc093blByb3BlcnR5LmNhbGwodmFsdWUsIHJlc3VsdCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBSZWdFeHBgIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgY29ycmVjdGx5IGNsYXNzaWZpZWQsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pc1JlZ0V4cCgvYWJjLyk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc1JlZ0V4cCgnL2FiYy8nKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzUmVnRXhwKHZhbHVlKSB7XG4gICAgICByZXR1cm4gaXNPYmplY3QodmFsdWUpICYmIG9ialRvU3RyaW5nLmNhbGwodmFsdWUpID09IHJlZ2V4cFRhZztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYFN0cmluZ2AgcHJpbWl0aXZlIG9yIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgY29ycmVjdGx5IGNsYXNzaWZpZWQsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pc1N0cmluZygnYWJjJyk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc1N0cmluZygxKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzU3RyaW5nKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdzdHJpbmcnIHx8IChpc09iamVjdExpa2UodmFsdWUpICYmIG9ialRvU3RyaW5nLmNhbGwodmFsdWUpID09IHN0cmluZ1RhZyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIHR5cGVkIGFycmF5LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IExhbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBjb3JyZWN0bHkgY2xhc3NpZmllZCwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmlzVHlwZWRBcnJheShuZXcgVWludDhBcnJheSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc1R5cGVkQXJyYXkoW10pO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNUeXBlZEFycmF5KHZhbHVlKSB7XG4gICAgICByZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBpc0xlbmd0aCh2YWx1ZS5sZW5ndGgpICYmICEhdHlwZWRBcnJheVRhZ3Nbb2JqVG9TdHJpbmcuY2FsbCh2YWx1ZSldO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGB1bmRlZmluZWRgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IExhbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBgdW5kZWZpbmVkYCwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmlzVW5kZWZpbmVkKHZvaWQgMCk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc1VuZGVmaW5lZChudWxsKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzVW5kZWZpbmVkKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBsZXNzIHRoYW4gYG90aGVyYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29tcGFyZS5cbiAgICAgKiBAcGFyYW0geyp9IG90aGVyIFRoZSBvdGhlciB2YWx1ZSB0byBjb21wYXJlLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGxlc3MgdGhhbiBgb3RoZXJgLCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ubHQoMSwgMyk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5sdCgzLCAzKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqXG4gICAgICogXy5sdCgzLCAxKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGx0KHZhbHVlLCBvdGhlcikge1xuICAgICAgcmV0dXJuIHZhbHVlIDwgb3RoZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIGBvdGhlcmAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbXBhcmUuXG4gICAgICogQHBhcmFtIHsqfSBvdGhlciBUaGUgb3RoZXIgdmFsdWUgdG8gY29tcGFyZS5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gYG90aGVyYCwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmx0ZSgxLCAzKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmx0ZSgzLCAzKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmx0ZSgzLCAxKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGx0ZSh2YWx1ZSwgb3RoZXIpIHtcbiAgICAgIHJldHVybiB2YWx1ZSA8PSBvdGhlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGFuIGFycmF5LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IExhbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb252ZXJ0LlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgY29udmVydGVkIGFycmF5LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAoZnVuY3Rpb24oKSB7XG4gICAgICogICByZXR1cm4gXy50b0FycmF5KGFyZ3VtZW50cykuc2xpY2UoMSk7XG4gICAgICogfSgxLCAyLCAzKSk7XG4gICAgICogLy8gPT4gWzIsIDNdXG4gICAgICovXG4gICAgZnVuY3Rpb24gdG9BcnJheSh2YWx1ZSkge1xuICAgICAgdmFyIGxlbmd0aCA9IHZhbHVlID8gZ2V0TGVuZ3RoKHZhbHVlKSA6IDA7XG4gICAgICBpZiAoIWlzTGVuZ3RoKGxlbmd0aCkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlcyh2YWx1ZSk7XG4gICAgICB9XG4gICAgICBpZiAoIWxlbmd0aCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgICByZXR1cm4gYXJyYXlDb3B5KHZhbHVlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgcGxhaW4gb2JqZWN0IGZsYXR0ZW5pbmcgaW5oZXJpdGVkIGVudW1lcmFibGVcbiAgICAgKiBwcm9wZXJ0aWVzIG9mIGB2YWx1ZWAgdG8gb3duIHByb3BlcnRpZXMgb2YgdGhlIHBsYWluIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29udmVydC5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBjb252ZXJ0ZWQgcGxhaW4gb2JqZWN0LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBmdW5jdGlvbiBGb28oKSB7XG4gICAgICogICB0aGlzLmIgPSAyO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIEZvby5wcm90b3R5cGUuYyA9IDM7XG4gICAgICpcbiAgICAgKiBfLmFzc2lnbih7ICdhJzogMSB9LCBuZXcgRm9vKTtcbiAgICAgKiAvLyA9PiB7ICdhJzogMSwgJ2InOiAyIH1cbiAgICAgKlxuICAgICAqIF8uYXNzaWduKHsgJ2EnOiAxIH0sIF8udG9QbGFpbk9iamVjdChuZXcgRm9vKSk7XG4gICAgICogLy8gPT4geyAnYSc6IDEsICdiJzogMiwgJ2MnOiAzIH1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB0b1BsYWluT2JqZWN0KHZhbHVlKSB7XG4gICAgICByZXR1cm4gYmFzZUNvcHkodmFsdWUsIGtleXNJbih2YWx1ZSkpO1xuICAgIH1cblxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgIC8qKlxuICAgICAqIFJlY3Vyc2l2ZWx5IG1lcmdlcyBvd24gZW51bWVyYWJsZSBwcm9wZXJ0aWVzIG9mIHRoZSBzb3VyY2Ugb2JqZWN0KHMpLCB0aGF0XG4gICAgICogZG9uJ3QgcmVzb2x2ZSB0byBgdW5kZWZpbmVkYCBpbnRvIHRoZSBkZXN0aW5hdGlvbiBvYmplY3QuIFN1YnNlcXVlbnQgc291cmNlc1xuICAgICAqIG92ZXJ3cml0ZSBwcm9wZXJ0eSBhc3NpZ25tZW50cyBvZiBwcmV2aW91cyBzb3VyY2VzLiBJZiBgY3VzdG9taXplcmAgaXNcbiAgICAgKiBwcm92aWRlZCBpdCBpcyBpbnZva2VkIHRvIHByb2R1Y2UgdGhlIG1lcmdlZCB2YWx1ZXMgb2YgdGhlIGRlc3RpbmF0aW9uIGFuZFxuICAgICAqIHNvdXJjZSBwcm9wZXJ0aWVzLiBJZiBgY3VzdG9taXplcmAgcmV0dXJucyBgdW5kZWZpbmVkYCBtZXJnaW5nIGlzIGhhbmRsZWRcbiAgICAgKiBieSB0aGUgbWV0aG9kIGluc3RlYWQuIFRoZSBgY3VzdG9taXplcmAgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkXG4gICAgICogd2l0aCBmaXZlIGFyZ3VtZW50czogKG9iamVjdFZhbHVlLCBzb3VyY2VWYWx1ZSwga2V5LCBvYmplY3QsIHNvdXJjZSkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgZGVzdGluYXRpb24gb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7Li4uT2JqZWN0fSBbc291cmNlc10gVGhlIHNvdXJjZSBvYmplY3RzLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGFzc2lnbmVkIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGN1c3RvbWl6ZXJgLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciB1c2VycyA9IHtcbiAgICAgKiAgICdkYXRhJzogW3sgJ3VzZXInOiAnYmFybmV5JyB9LCB7ICd1c2VyJzogJ2ZyZWQnIH1dXG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIHZhciBhZ2VzID0ge1xuICAgICAqICAgJ2RhdGEnOiBbeyAnYWdlJzogMzYgfSwgeyAnYWdlJzogNDAgfV1cbiAgICAgKiB9O1xuICAgICAqXG4gICAgICogXy5tZXJnZSh1c2VycywgYWdlcyk7XG4gICAgICogLy8gPT4geyAnZGF0YSc6IFt7ICd1c2VyJzogJ2Jhcm5leScsICdhZ2UnOiAzNiB9LCB7ICd1c2VyJzogJ2ZyZWQnLCAnYWdlJzogNDAgfV0gfVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgYSBjdXN0b21pemVyIGNhbGxiYWNrXG4gICAgICogdmFyIG9iamVjdCA9IHtcbiAgICAgKiAgICdmcnVpdHMnOiBbJ2FwcGxlJ10sXG4gICAgICogICAndmVnZXRhYmxlcyc6IFsnYmVldCddXG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIHZhciBvdGhlciA9IHtcbiAgICAgKiAgICdmcnVpdHMnOiBbJ2JhbmFuYSddLFxuICAgICAqICAgJ3ZlZ2V0YWJsZXMnOiBbJ2NhcnJvdCddXG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIF8ubWVyZ2Uob2JqZWN0LCBvdGhlciwgZnVuY3Rpb24oYSwgYikge1xuICAgICAqICAgaWYgKF8uaXNBcnJheShhKSkge1xuICAgICAqICAgICByZXR1cm4gYS5jb25jYXQoYik7XG4gICAgICogICB9XG4gICAgICogfSk7XG4gICAgICogLy8gPT4geyAnZnJ1aXRzJzogWydhcHBsZScsICdiYW5hbmEnXSwgJ3ZlZ2V0YWJsZXMnOiBbJ2JlZXQnLCAnY2Fycm90J10gfVxuICAgICAqL1xuICAgIHZhciBtZXJnZSA9IGNyZWF0ZUFzc2lnbmVyKGJhc2VNZXJnZSk7XG5cbiAgICAvKipcbiAgICAgKiBBc3NpZ25zIG93biBlbnVtZXJhYmxlIHByb3BlcnRpZXMgb2Ygc291cmNlIG9iamVjdChzKSB0byB0aGUgZGVzdGluYXRpb25cbiAgICAgKiBvYmplY3QuIFN1YnNlcXVlbnQgc291cmNlcyBvdmVyd3JpdGUgcHJvcGVydHkgYXNzaWdubWVudHMgb2YgcHJldmlvdXMgc291cmNlcy5cbiAgICAgKiBJZiBgY3VzdG9taXplcmAgaXMgcHJvdmlkZWQgaXQgaXMgaW52b2tlZCB0byBwcm9kdWNlIHRoZSBhc3NpZ25lZCB2YWx1ZXMuXG4gICAgICogVGhlIGBjdXN0b21pemVyYCBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCBmaXZlIGFyZ3VtZW50czpcbiAgICAgKiAob2JqZWN0VmFsdWUsIHNvdXJjZVZhbHVlLCBrZXksIG9iamVjdCwgc291cmNlKS5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBtdXRhdGVzIGBvYmplY3RgIGFuZCBpcyBiYXNlZCBvblxuICAgICAqIFtgT2JqZWN0LmFzc2lnbmBdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLW9iamVjdC5hc3NpZ24pLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGFsaWFzIGV4dGVuZFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gICAgICogQHBhcmFtIHsuLi5PYmplY3R9IFtzb3VyY2VzXSBUaGUgc291cmNlIG9iamVjdHMuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgYXNzaWduZWQgdmFsdWVzLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY3VzdG9taXplcmAuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5hc3NpZ24oeyAndXNlcic6ICdiYXJuZXknIH0sIHsgJ2FnZSc6IDQwIH0sIHsgJ3VzZXInOiAnZnJlZCcgfSk7XG4gICAgICogLy8gPT4geyAndXNlcic6ICdmcmVkJywgJ2FnZSc6IDQwIH1cbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIGEgY3VzdG9taXplciBjYWxsYmFja1xuICAgICAqIHZhciBkZWZhdWx0cyA9IF8ucGFydGlhbFJpZ2h0KF8uYXNzaWduLCBmdW5jdGlvbih2YWx1ZSwgb3RoZXIpIHtcbiAgICAgKiAgIHJldHVybiBfLmlzVW5kZWZpbmVkKHZhbHVlKSA/IG90aGVyIDogdmFsdWU7XG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiBkZWZhdWx0cyh7ICd1c2VyJzogJ2Jhcm5leScgfSwgeyAnYWdlJzogMzYgfSwgeyAndXNlcic6ICdmcmVkJyB9KTtcbiAgICAgKiAvLyA9PiB7ICd1c2VyJzogJ2Jhcm5leScsICdhZ2UnOiAzNiB9XG4gICAgICovXG4gICAgdmFyIGFzc2lnbiA9IGNyZWF0ZUFzc2lnbmVyKGZ1bmN0aW9uKG9iamVjdCwgc291cmNlLCBjdXN0b21pemVyKSB7XG4gICAgICByZXR1cm4gY3VzdG9taXplclxuICAgICAgICA/IGFzc2lnbldpdGgob2JqZWN0LCBzb3VyY2UsIGN1c3RvbWl6ZXIpXG4gICAgICAgIDogYmFzZUFzc2lnbihvYmplY3QsIHNvdXJjZSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIG9iamVjdCB0aGF0IGluaGVyaXRzIGZyb20gdGhlIGdpdmVuIGBwcm90b3R5cGVgIG9iamVjdC4gSWYgYVxuICAgICAqIGBwcm9wZXJ0aWVzYCBvYmplY3QgaXMgcHJvdmlkZWQgaXRzIG93biBlbnVtZXJhYmxlIHByb3BlcnRpZXMgYXJlIGFzc2lnbmVkXG4gICAgICogdG8gdGhlIGNyZWF0ZWQgb2JqZWN0LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwcm90b3R5cGUgVGhlIG9iamVjdCB0byBpbmhlcml0IGZyb20uXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtwcm9wZXJ0aWVzXSBUaGUgcHJvcGVydGllcyB0byBhc3NpZ24gdG8gdGhlIG9iamVjdC5cbiAgICAgKiBAcGFyYW0tIHtPYmplY3R9IFtndWFyZF0gRW5hYmxlcyB1c2UgYXMgYSBjYWxsYmFjayBmb3IgZnVuY3Rpb25zIGxpa2UgYF8ubWFwYC5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBuZXcgb2JqZWN0LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBmdW5jdGlvbiBTaGFwZSgpIHtcbiAgICAgKiAgIHRoaXMueCA9IDA7XG4gICAgICogICB0aGlzLnkgPSAwO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIGZ1bmN0aW9uIENpcmNsZSgpIHtcbiAgICAgKiAgIFNoYXBlLmNhbGwodGhpcyk7XG4gICAgICogfVxuICAgICAqXG4gICAgICogQ2lyY2xlLnByb3RvdHlwZSA9IF8uY3JlYXRlKFNoYXBlLnByb3RvdHlwZSwge1xuICAgICAqICAgJ2NvbnN0cnVjdG9yJzogQ2lyY2xlXG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiB2YXIgY2lyY2xlID0gbmV3IENpcmNsZTtcbiAgICAgKiBjaXJjbGUgaW5zdGFuY2VvZiBDaXJjbGU7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogY2lyY2xlIGluc3RhbmNlb2YgU2hhcGU7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZShwcm90b3R5cGUsIHByb3BlcnRpZXMsIGd1YXJkKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gYmFzZUNyZWF0ZShwcm90b3R5cGUpO1xuICAgICAgaWYgKGd1YXJkICYmIGlzSXRlcmF0ZWVDYWxsKHByb3RvdHlwZSwgcHJvcGVydGllcywgZ3VhcmQpKSB7XG4gICAgICAgIHByb3BlcnRpZXMgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gcHJvcGVydGllcyA/IGJhc2VBc3NpZ24ocmVzdWx0LCBwcm9wZXJ0aWVzKSA6IHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBc3NpZ25zIG93biBlbnVtZXJhYmxlIHByb3BlcnRpZXMgb2Ygc291cmNlIG9iamVjdChzKSB0byB0aGUgZGVzdGluYXRpb25cbiAgICAgKiBvYmplY3QgZm9yIGFsbCBkZXN0aW5hdGlvbiBwcm9wZXJ0aWVzIHRoYXQgcmVzb2x2ZSB0byBgdW5kZWZpbmVkYC4gT25jZSBhXG4gICAgICogcHJvcGVydHkgaXMgc2V0LCBhZGRpdGlvbmFsIHZhbHVlcyBvZiB0aGUgc2FtZSBwcm9wZXJ0eSBhcmUgaWdub3JlZC5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBtdXRhdGVzIGBvYmplY3RgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIGRlc3RpbmF0aW9uIG9iamVjdC5cbiAgICAgKiBAcGFyYW0gey4uLk9iamVjdH0gW3NvdXJjZXNdIFRoZSBzb3VyY2Ugb2JqZWN0cy5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmRlZmF1bHRzKHsgJ3VzZXInOiAnYmFybmV5JyB9LCB7ICdhZ2UnOiAzNiB9LCB7ICd1c2VyJzogJ2ZyZWQnIH0pO1xuICAgICAqIC8vID0+IHsgJ3VzZXInOiAnYmFybmV5JywgJ2FnZSc6IDM2IH1cbiAgICAgKi9cbiAgICB2YXIgZGVmYXVsdHMgPSBjcmVhdGVEZWZhdWx0cyhhc3NpZ24sIGFzc2lnbkRlZmF1bHRzKTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uZGVmYXVsdHNgIGV4Y2VwdCB0aGF0IGl0IHJlY3Vyc2l2ZWx5IGFzc2lnbnNcbiAgICAgKiBkZWZhdWx0IHByb3BlcnRpZXMuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgbXV0YXRlcyBgb2JqZWN0YC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gICAgICogQHBhcmFtIHsuLi5PYmplY3R9IFtzb3VyY2VzXSBUaGUgc291cmNlIG9iamVjdHMuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5kZWZhdWx0c0RlZXAoeyAndXNlcic6IHsgJ25hbWUnOiAnYmFybmV5JyB9IH0sIHsgJ3VzZXInOiB7ICduYW1lJzogJ2ZyZWQnLCAnYWdlJzogMzYgfSB9KTtcbiAgICAgKiAvLyA9PiB7ICd1c2VyJzogeyAnbmFtZSc6ICdiYXJuZXknLCAnYWdlJzogMzYgfSB9XG4gICAgICpcbiAgICAgKi9cbiAgICB2YXIgZGVmYXVsdHNEZWVwID0gY3JlYXRlRGVmYXVsdHMobWVyZ2UsIG1lcmdlRGVmYXVsdHMpO1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5maW5kYCBleGNlcHQgdGhhdCBpdCByZXR1cm5zIHRoZSBrZXkgb2YgdGhlIGZpcnN0XG4gICAgICogZWxlbWVudCBgcHJlZGljYXRlYCByZXR1cm5zIHRydXRoeSBmb3IgaW5zdGVhZCBvZiB0aGUgZWxlbWVudCBpdHNlbGYuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBwcmVkaWNhdGVgIHRoZSBjcmVhdGVkIGBfLnByb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYSB2YWx1ZSBpcyBhbHNvIHByb3ZpZGVkIGZvciBgdGhpc0FyZ2AgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc1Byb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgYSBtYXRjaGluZyBwcm9wZXJ0eVxuICAgICAqIHZhbHVlLCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBwcmVkaWNhdGVgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNgIHN0eWxlXG4gICAgICogY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW5cbiAgICAgKiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gc2VhcmNoLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW3ByZWRpY2F0ZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZFxuICAgICAqICBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgcHJlZGljYXRlYC5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfHVuZGVmaW5lZH0gUmV0dXJucyB0aGUga2V5IG9mIHRoZSBtYXRjaGVkIGVsZW1lbnQsIGVsc2UgYHVuZGVmaW5lZGAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciB1c2VycyA9IHtcbiAgICAgKiAgICdiYXJuZXknOiAgeyAnYWdlJzogMzYsICdhY3RpdmUnOiB0cnVlIH0sXG4gICAgICogICAnZnJlZCc6ICAgIHsgJ2FnZSc6IDQwLCAnYWN0aXZlJzogZmFsc2UgfSxcbiAgICAgKiAgICdwZWJibGVzJzogeyAnYWdlJzogMSwgICdhY3RpdmUnOiB0cnVlIH1cbiAgICAgKiB9O1xuICAgICAqXG4gICAgICogXy5maW5kS2V5KHVzZXJzLCBmdW5jdGlvbihjaHIpIHtcbiAgICAgKiAgIHJldHVybiBjaHIuYWdlIDwgNDA7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gJ2Jhcm5leScgKGl0ZXJhdGlvbiBvcmRlciBpcyBub3QgZ3VhcmFudGVlZClcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5tYXRjaGVzYCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLmZpbmRLZXkodXNlcnMsIHsgJ2FnZSc6IDEsICdhY3RpdmUnOiB0cnVlIH0pO1xuICAgICAqIC8vID0+ICdwZWJibGVzJ1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLm1hdGNoZXNQcm9wZXJ0eWAgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5maW5kS2V5KHVzZXJzLCAnYWN0aXZlJywgZmFsc2UpO1xuICAgICAqIC8vID0+ICdmcmVkJ1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLnByb3BlcnR5YCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLmZpbmRLZXkodXNlcnMsICdhY3RpdmUnKTtcbiAgICAgKiAvLyA9PiAnYmFybmV5J1xuICAgICAqL1xuICAgIHZhciBmaW5kS2V5ID0gY3JlYXRlRmluZEtleShiYXNlRm9yT3duKTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uZmluZEtleWAgZXhjZXB0IHRoYXQgaXQgaXRlcmF0ZXMgb3ZlciBlbGVtZW50cyBvZlxuICAgICAqIGEgY29sbGVjdGlvbiBpbiB0aGUgb3Bwb3NpdGUgb3JkZXIuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBwcmVkaWNhdGVgIHRoZSBjcmVhdGVkIGBfLnByb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYSB2YWx1ZSBpcyBhbHNvIHByb3ZpZGVkIGZvciBgdGhpc0FyZ2AgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc1Byb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgYSBtYXRjaGluZyBwcm9wZXJ0eVxuICAgICAqIHZhbHVlLCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBwcmVkaWNhdGVgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNgIHN0eWxlXG4gICAgICogY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW5cbiAgICAgKiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gc2VhcmNoLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW3ByZWRpY2F0ZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZFxuICAgICAqICBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgcHJlZGljYXRlYC5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfHVuZGVmaW5lZH0gUmV0dXJucyB0aGUga2V5IG9mIHRoZSBtYXRjaGVkIGVsZW1lbnQsIGVsc2UgYHVuZGVmaW5lZGAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciB1c2VycyA9IHtcbiAgICAgKiAgICdiYXJuZXknOiAgeyAnYWdlJzogMzYsICdhY3RpdmUnOiB0cnVlIH0sXG4gICAgICogICAnZnJlZCc6ICAgIHsgJ2FnZSc6IDQwLCAnYWN0aXZlJzogZmFsc2UgfSxcbiAgICAgKiAgICdwZWJibGVzJzogeyAnYWdlJzogMSwgICdhY3RpdmUnOiB0cnVlIH1cbiAgICAgKiB9O1xuICAgICAqXG4gICAgICogXy5maW5kTGFzdEtleSh1c2VycywgZnVuY3Rpb24oY2hyKSB7XG4gICAgICogICByZXR1cm4gY2hyLmFnZSA8IDQwO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IHJldHVybnMgYHBlYmJsZXNgIGFzc3VtaW5nIGBfLmZpbmRLZXlgIHJldHVybnMgYGJhcm5leWBcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5tYXRjaGVzYCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLmZpbmRMYXN0S2V5KHVzZXJzLCB7ICdhZ2UnOiAzNiwgJ2FjdGl2ZSc6IHRydWUgfSk7XG4gICAgICogLy8gPT4gJ2Jhcm5leSdcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5tYXRjaGVzUHJvcGVydHlgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8uZmluZExhc3RLZXkodXNlcnMsICdhY3RpdmUnLCBmYWxzZSk7XG4gICAgICogLy8gPT4gJ2ZyZWQnXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ucHJvcGVydHlgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8uZmluZExhc3RLZXkodXNlcnMsICdhY3RpdmUnKTtcbiAgICAgKiAvLyA9PiAncGViYmxlcydcbiAgICAgKi9cbiAgICB2YXIgZmluZExhc3RLZXkgPSBjcmVhdGVGaW5kS2V5KGJhc2VGb3JPd25SaWdodCk7XG5cbiAgICAvKipcbiAgICAgKiBJdGVyYXRlcyBvdmVyIG93biBhbmQgaW5oZXJpdGVkIGVudW1lcmFibGUgcHJvcGVydGllcyBvZiBhbiBvYmplY3QgaW52b2tpbmdcbiAgICAgKiBgaXRlcmF0ZWVgIGZvciBlYWNoIHByb3BlcnR5LiBUaGUgYGl0ZXJhdGVlYCBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWRcbiAgICAgKiB3aXRoIHRocmVlIGFyZ3VtZW50czogKHZhbHVlLCBrZXksIG9iamVjdCkuIEl0ZXJhdGVlIGZ1bmN0aW9ucyBtYXkgZXhpdFxuICAgICAqIGl0ZXJhdGlvbiBlYXJseSBieSBleHBsaWNpdGx5IHJldHVybmluZyBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2l0ZXJhdGVlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBpdGVyYXRlZWAuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogZnVuY3Rpb24gRm9vKCkge1xuICAgICAqICAgdGhpcy5hID0gMTtcbiAgICAgKiAgIHRoaXMuYiA9IDI7XG4gICAgICogfVxuICAgICAqXG4gICAgICogRm9vLnByb3RvdHlwZS5jID0gMztcbiAgICAgKlxuICAgICAqIF8uZm9ySW4obmV3IEZvbywgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAqICAgY29uc29sZS5sb2coa2V5KTtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiBsb2dzICdhJywgJ2InLCBhbmQgJ2MnIChpdGVyYXRpb24gb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQpXG4gICAgICovXG4gICAgdmFyIGZvckluID0gY3JlYXRlRm9ySW4oYmFzZUZvcik7XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmZvckluYCBleGNlcHQgdGhhdCBpdCBpdGVyYXRlcyBvdmVyIHByb3BlcnRpZXMgb2ZcbiAgICAgKiBgb2JqZWN0YCBpbiB0aGUgb3Bwb3NpdGUgb3JkZXIuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbaXRlcmF0ZWU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGl0ZXJhdGVlYC5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBmdW5jdGlvbiBGb28oKSB7XG4gICAgICogICB0aGlzLmEgPSAxO1xuICAgICAqICAgdGhpcy5iID0gMjtcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBGb28ucHJvdG90eXBlLmMgPSAzO1xuICAgICAqXG4gICAgICogXy5mb3JJblJpZ2h0KG5ldyBGb28sIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgKiAgIGNvbnNvbGUubG9nKGtleSk7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gbG9ncyAnYycsICdiJywgYW5kICdhJyBhc3N1bWluZyBgXy5mb3JJbiBgIGxvZ3MgJ2EnLCAnYicsIGFuZCAnYydcbiAgICAgKi9cbiAgICB2YXIgZm9ySW5SaWdodCA9IGNyZWF0ZUZvckluKGJhc2VGb3JSaWdodCk7XG5cbiAgICAvKipcbiAgICAgKiBJdGVyYXRlcyBvdmVyIG93biBlbnVtZXJhYmxlIHByb3BlcnRpZXMgb2YgYW4gb2JqZWN0IGludm9raW5nIGBpdGVyYXRlZWBcbiAgICAgKiBmb3IgZWFjaCBwcm9wZXJ0eS4gVGhlIGBpdGVyYXRlZWAgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGhcbiAgICAgKiB0aHJlZSBhcmd1bWVudHM6ICh2YWx1ZSwga2V5LCBvYmplY3QpLiBJdGVyYXRlZSBmdW5jdGlvbnMgbWF5IGV4aXQgaXRlcmF0aW9uXG4gICAgICogZWFybHkgYnkgZXhwbGljaXRseSByZXR1cm5pbmcgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtpdGVyYXRlZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgaXRlcmF0ZWVgLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGZ1bmN0aW9uIEZvbygpIHtcbiAgICAgKiAgIHRoaXMuYSA9IDE7XG4gICAgICogICB0aGlzLmIgPSAyO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIEZvby5wcm90b3R5cGUuYyA9IDM7XG4gICAgICpcbiAgICAgKiBfLmZvck93bihuZXcgRm9vLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICogICBjb25zb2xlLmxvZyhrZXkpO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IGxvZ3MgJ2EnIGFuZCAnYicgKGl0ZXJhdGlvbiBvcmRlciBpcyBub3QgZ3VhcmFudGVlZClcbiAgICAgKi9cbiAgICB2YXIgZm9yT3duID0gY3JlYXRlRm9yT3duKGJhc2VGb3JPd24pO1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5mb3JPd25gIGV4Y2VwdCB0aGF0IGl0IGl0ZXJhdGVzIG92ZXIgcHJvcGVydGllcyBvZlxuICAgICAqIGBvYmplY3RgIGluIHRoZSBvcHBvc2l0ZSBvcmRlci5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtpdGVyYXRlZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgaXRlcmF0ZWVgLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGZ1bmN0aW9uIEZvbygpIHtcbiAgICAgKiAgIHRoaXMuYSA9IDE7XG4gICAgICogICB0aGlzLmIgPSAyO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIEZvby5wcm90b3R5cGUuYyA9IDM7XG4gICAgICpcbiAgICAgKiBfLmZvck93blJpZ2h0KG5ldyBGb28sIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgKiAgIGNvbnNvbGUubG9nKGtleSk7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gbG9ncyAnYicgYW5kICdhJyBhc3N1bWluZyBgXy5mb3JPd25gIGxvZ3MgJ2EnIGFuZCAnYidcbiAgICAgKi9cbiAgICB2YXIgZm9yT3duUmlnaHQgPSBjcmVhdGVGb3JPd24oYmFzZUZvck93blJpZ2h0KTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgZnVuY3Rpb24gcHJvcGVydHkgbmFtZXMgZnJvbSBhbGwgZW51bWVyYWJsZSBwcm9wZXJ0aWVzLFxuICAgICAqIG93biBhbmQgaW5oZXJpdGVkLCBvZiBgb2JqZWN0YC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBhbGlhcyBtZXRob2RzXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpbnNwZWN0LlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGFycmF5IG9mIHByb3BlcnR5IG5hbWVzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmZ1bmN0aW9ucyhfKTtcbiAgICAgKiAvLyA9PiBbJ2FmdGVyJywgJ2FyeScsICdhc3NpZ24nLCAuLi5dXG4gICAgICovXG4gICAgZnVuY3Rpb24gZnVuY3Rpb25zKG9iamVjdCkge1xuICAgICAgcmV0dXJuIGJhc2VGdW5jdGlvbnMob2JqZWN0LCBrZXlzSW4ob2JqZWN0KSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgcHJvcGVydHkgdmFsdWUgYXQgYHBhdGhgIG9mIGBvYmplY3RgLiBJZiB0aGUgcmVzb2x2ZWQgdmFsdWUgaXNcbiAgICAgKiBgdW5kZWZpbmVkYCB0aGUgYGRlZmF1bHRWYWx1ZWAgaXMgdXNlZCBpbiBpdHMgcGxhY2UuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICAgICAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBwYXRoIFRoZSBwYXRoIG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG4gICAgICogQHBhcmFtIHsqfSBbZGVmYXVsdFZhbHVlXSBUaGUgdmFsdWUgcmV0dXJuZWQgaWYgdGhlIHJlc29sdmVkIHZhbHVlIGlzIGB1bmRlZmluZWRgLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSByZXNvbHZlZCB2YWx1ZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIG9iamVjdCA9IHsgJ2EnOiBbeyAnYic6IHsgJ2MnOiAzIH0gfV0gfTtcbiAgICAgKlxuICAgICAqIF8uZ2V0KG9iamVjdCwgJ2FbMF0uYi5jJyk7XG4gICAgICogLy8gPT4gM1xuICAgICAqXG4gICAgICogXy5nZXQob2JqZWN0LCBbJ2EnLCAnMCcsICdiJywgJ2MnXSk7XG4gICAgICogLy8gPT4gM1xuICAgICAqXG4gICAgICogXy5nZXQob2JqZWN0LCAnYS5iLmMnLCAnZGVmYXVsdCcpO1xuICAgICAqIC8vID0+ICdkZWZhdWx0J1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldChvYmplY3QsIHBhdGgsIGRlZmF1bHRWYWx1ZSkge1xuICAgICAgdmFyIHJlc3VsdCA9IG9iamVjdCA9PSBudWxsID8gdW5kZWZpbmVkIDogYmFzZUdldChvYmplY3QsIHRvUGF0aChwYXRoKSwgcGF0aCArICcnKTtcbiAgICAgIHJldHVybiByZXN1bHQgPT09IHVuZGVmaW5lZCA/IGRlZmF1bHRWYWx1ZSA6IHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHBhdGhgIGlzIGEgZGlyZWN0IHByb3BlcnR5LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAgICAgKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHBhdGhgIGlzIGEgZGlyZWN0IHByb3BlcnR5LCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBvYmplY3QgPSB7ICdhJzogeyAnYic6IHsgJ2MnOiAzIH0gfSB9O1xuICAgICAqXG4gICAgICogXy5oYXMob2JqZWN0LCAnYScpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaGFzKG9iamVjdCwgJ2EuYi5jJyk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5oYXMob2JqZWN0LCBbJ2EnLCAnYicsICdjJ10pO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBoYXMob2JqZWN0LCBwYXRoKSB7XG4gICAgICBpZiAob2JqZWN0ID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgdmFyIHJlc3VsdCA9IGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwYXRoKTtcbiAgICAgIGlmICghcmVzdWx0ICYmICFpc0tleShwYXRoKSkge1xuICAgICAgICBwYXRoID0gdG9QYXRoKHBhdGgpO1xuICAgICAgICBvYmplY3QgPSBwYXRoLmxlbmd0aCA9PSAxID8gb2JqZWN0IDogYmFzZUdldChvYmplY3QsIGJhc2VTbGljZShwYXRoLCAwLCAtMSkpO1xuICAgICAgICBpZiAob2JqZWN0ID09IG51bGwpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcGF0aCA9IGxhc3QocGF0aCk7XG4gICAgICAgIHJlc3VsdCA9IGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwYXRoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQgfHwgKGlzTGVuZ3RoKG9iamVjdC5sZW5ndGgpICYmIGlzSW5kZXgocGF0aCwgb2JqZWN0Lmxlbmd0aCkgJiZcbiAgICAgICAgKGlzQXJyYXkob2JqZWN0KSB8fCBpc0FyZ3VtZW50cyhvYmplY3QpKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBvYmplY3QgY29tcG9zZWQgb2YgdGhlIGludmVydGVkIGtleXMgYW5kIHZhbHVlcyBvZiBgb2JqZWN0YC5cbiAgICAgKiBJZiBgb2JqZWN0YCBjb250YWlucyBkdXBsaWNhdGUgdmFsdWVzLCBzdWJzZXF1ZW50IHZhbHVlcyBvdmVyd3JpdGUgcHJvcGVydHlcbiAgICAgKiBhc3NpZ25tZW50cyBvZiBwcmV2aW91cyB2YWx1ZXMgdW5sZXNzIGBtdWx0aVZhbHVlYCBpcyBgdHJ1ZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGludmVydC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFttdWx0aVZhbHVlXSBBbGxvdyBtdWx0aXBsZSB2YWx1ZXMgcGVyIGtleS5cbiAgICAgKiBAcGFyYW0tIHtPYmplY3R9IFtndWFyZF0gRW5hYmxlcyB1c2UgYXMgYSBjYWxsYmFjayBmb3IgZnVuY3Rpb25zIGxpa2UgYF8ubWFwYC5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBuZXcgaW52ZXJ0ZWQgb2JqZWN0LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0ID0geyAnYSc6IDEsICdiJzogMiwgJ2MnOiAxIH07XG4gICAgICpcbiAgICAgKiBfLmludmVydChvYmplY3QpO1xuICAgICAqIC8vID0+IHsgJzEnOiAnYycsICcyJzogJ2InIH1cbiAgICAgKlxuICAgICAqIC8vIHdpdGggYG11bHRpVmFsdWVgXG4gICAgICogXy5pbnZlcnQob2JqZWN0LCB0cnVlKTtcbiAgICAgKiAvLyA9PiB7ICcxJzogWydhJywgJ2MnXSwgJzInOiBbJ2InXSB9XG4gICAgICovXG4gICAgZnVuY3Rpb24gaW52ZXJ0KG9iamVjdCwgbXVsdGlWYWx1ZSwgZ3VhcmQpIHtcbiAgICAgIGlmIChndWFyZCAmJiBpc0l0ZXJhdGVlQ2FsbChvYmplY3QsIG11bHRpVmFsdWUsIGd1YXJkKSkge1xuICAgICAgICBtdWx0aVZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgcHJvcHMgPSBrZXlzKG9iamVjdCksXG4gICAgICAgICAgbGVuZ3RoID0gcHJvcHMubGVuZ3RoLFxuICAgICAgICAgIHJlc3VsdCA9IHt9O1xuXG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICB2YXIga2V5ID0gcHJvcHNbaW5kZXhdLFxuICAgICAgICAgICAgdmFsdWUgPSBvYmplY3Rba2V5XTtcblxuICAgICAgICBpZiAobXVsdGlWYWx1ZSkge1xuICAgICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKHJlc3VsdCwgdmFsdWUpKSB7XG4gICAgICAgICAgICByZXN1bHRbdmFsdWVdLnB1c2goa2V5KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzdWx0W3ZhbHVlXSA9IFtrZXldO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICByZXN1bHRbdmFsdWVdID0ga2V5O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgdGhlIG93biBlbnVtZXJhYmxlIHByb3BlcnR5IG5hbWVzIG9mIGBvYmplY3RgLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIE5vbi1vYmplY3QgdmFsdWVzIGFyZSBjb2VyY2VkIHRvIG9iamVjdHMuIFNlZSB0aGVcbiAgICAgKiBbRVMgc3BlY10oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtb2JqZWN0LmtleXMpXG4gICAgICogZm9yIG1vcmUgZGV0YWlscy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogZnVuY3Rpb24gRm9vKCkge1xuICAgICAqICAgdGhpcy5hID0gMTtcbiAgICAgKiAgIHRoaXMuYiA9IDI7XG4gICAgICogfVxuICAgICAqXG4gICAgICogRm9vLnByb3RvdHlwZS5jID0gMztcbiAgICAgKlxuICAgICAqIF8ua2V5cyhuZXcgRm9vKTtcbiAgICAgKiAvLyA9PiBbJ2EnLCAnYiddIChpdGVyYXRpb24gb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQpXG4gICAgICpcbiAgICAgKiBfLmtleXMoJ2hpJyk7XG4gICAgICogLy8gPT4gWycwJywgJzEnXVxuICAgICAqL1xuICAgIHZhciBrZXlzID0gIW5hdGl2ZUtleXMgPyBzaGltS2V5cyA6IGZ1bmN0aW9uKG9iamVjdCkge1xuICAgICAgdmFyIEN0b3IgPSBvYmplY3QgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG9iamVjdC5jb25zdHJ1Y3RvcjtcbiAgICAgIGlmICgodHlwZW9mIEN0b3IgPT0gJ2Z1bmN0aW9uJyAmJiBDdG9yLnByb3RvdHlwZSA9PT0gb2JqZWN0KSB8fFxuICAgICAgICAgICh0eXBlb2Ygb2JqZWN0ICE9ICdmdW5jdGlvbicgJiYgaXNBcnJheUxpa2Uob2JqZWN0KSkpIHtcbiAgICAgICAgcmV0dXJuIHNoaW1LZXlzKG9iamVjdCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gaXNPYmplY3Qob2JqZWN0KSA/IG5hdGl2ZUtleXMob2JqZWN0KSA6IFtdO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIHRoZSBvd24gYW5kIGluaGVyaXRlZCBlbnVtZXJhYmxlIHByb3BlcnR5IG5hbWVzIG9mIGBvYmplY3RgLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIE5vbi1vYmplY3QgdmFsdWVzIGFyZSBjb2VyY2VkIHRvIG9iamVjdHMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGZ1bmN0aW9uIEZvbygpIHtcbiAgICAgKiAgIHRoaXMuYSA9IDE7XG4gICAgICogICB0aGlzLmIgPSAyO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIEZvby5wcm90b3R5cGUuYyA9IDM7XG4gICAgICpcbiAgICAgKiBfLmtleXNJbihuZXcgRm9vKTtcbiAgICAgKiAvLyA9PiBbJ2EnLCAnYicsICdjJ10gKGl0ZXJhdGlvbiBvcmRlciBpcyBub3QgZ3VhcmFudGVlZClcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBrZXlzSW4ob2JqZWN0KSB7XG4gICAgICBpZiAob2JqZWN0ID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgICAgaWYgKCFpc09iamVjdChvYmplY3QpKSB7XG4gICAgICAgIG9iamVjdCA9IE9iamVjdChvYmplY3QpO1xuICAgICAgfVxuICAgICAgdmFyIGxlbmd0aCA9IG9iamVjdC5sZW5ndGg7XG4gICAgICBsZW5ndGggPSAobGVuZ3RoICYmIGlzTGVuZ3RoKGxlbmd0aCkgJiZcbiAgICAgICAgKGlzQXJyYXkob2JqZWN0KSB8fCBpc0FyZ3VtZW50cyhvYmplY3QpKSAmJiBsZW5ndGgpIHx8IDA7XG5cbiAgICAgIHZhciBDdG9yID0gb2JqZWN0LmNvbnN0cnVjdG9yLFxuICAgICAgICAgIGluZGV4ID0gLTEsXG4gICAgICAgICAgaXNQcm90byA9IHR5cGVvZiBDdG9yID09ICdmdW5jdGlvbicgJiYgQ3Rvci5wcm90b3R5cGUgPT09IG9iamVjdCxcbiAgICAgICAgICByZXN1bHQgPSBBcnJheShsZW5ndGgpLFxuICAgICAgICAgIHNraXBJbmRleGVzID0gbGVuZ3RoID4gMDtcblxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgcmVzdWx0W2luZGV4XSA9IChpbmRleCArICcnKTtcbiAgICAgIH1cbiAgICAgIGZvciAodmFyIGtleSBpbiBvYmplY3QpIHtcbiAgICAgICAgaWYgKCEoc2tpcEluZGV4ZXMgJiYgaXNJbmRleChrZXksIGxlbmd0aCkpICYmXG4gICAgICAgICAgICAhKGtleSA9PSAnY29uc3RydWN0b3InICYmIChpc1Byb3RvIHx8ICFoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwga2V5KSkpKSB7XG4gICAgICAgICAgcmVzdWx0LnB1c2goa2V5KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgb3Bwb3NpdGUgb2YgYF8ubWFwVmFsdWVzYDsgdGhpcyBtZXRob2QgY3JlYXRlcyBhbiBvYmplY3Qgd2l0aCB0aGVcbiAgICAgKiBzYW1lIHZhbHVlcyBhcyBgb2JqZWN0YCBhbmQga2V5cyBnZW5lcmF0ZWQgYnkgcnVubmluZyBlYWNoIG93biBlbnVtZXJhYmxlXG4gICAgICogcHJvcGVydHkgb2YgYG9iamVjdGAgdGhyb3VnaCBgaXRlcmF0ZWVgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbaXRlcmF0ZWU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWRcbiAgICAgKiAgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGl0ZXJhdGVlYC5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBuZXcgbWFwcGVkIG9iamVjdC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5tYXBLZXlzKHsgJ2EnOiAxLCAnYic6IDIgfSwgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAqICAgcmV0dXJuIGtleSArIHZhbHVlO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IHsgJ2ExJzogMSwgJ2IyJzogMiB9XG4gICAgICovXG4gICAgdmFyIG1hcEtleXMgPSBjcmVhdGVPYmplY3RNYXBwZXIodHJ1ZSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIG9iamVjdCB3aXRoIHRoZSBzYW1lIGtleXMgYXMgYG9iamVjdGAgYW5kIHZhbHVlcyBnZW5lcmF0ZWQgYnlcbiAgICAgKiBydW5uaW5nIGVhY2ggb3duIGVudW1lcmFibGUgcHJvcGVydHkgb2YgYG9iamVjdGAgdGhyb3VnaCBgaXRlcmF0ZWVgLiBUaGVcbiAgICAgKiBpdGVyYXRlZSBmdW5jdGlvbiBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM6XG4gICAgICogKHZhbHVlLCBrZXksIG9iamVjdCkuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBpdGVyYXRlZWAgdGhlIGNyZWF0ZWQgYF8ucHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhIHZhbHVlIGlzIGFsc28gcHJvdmlkZWQgZm9yIGB0aGlzQXJnYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzUHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSBhIG1hdGNoaW5nIHByb3BlcnR5XG4gICAgICogdmFsdWUsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGl0ZXJhdGVlYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzYCBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuXG4gICAgICogb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtpdGVyYXRlZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZFxuICAgICAqICBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgaXRlcmF0ZWVgLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG5ldyBtYXBwZWQgb2JqZWN0LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLm1hcFZhbHVlcyh7ICdhJzogMSwgJ2InOiAyIH0sIGZ1bmN0aW9uKG4pIHtcbiAgICAgKiAgIHJldHVybiBuICogMztcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiB7ICdhJzogMywgJ2InOiA2IH1cbiAgICAgKlxuICAgICAqIHZhciB1c2VycyA9IHtcbiAgICAgKiAgICdmcmVkJzogICAgeyAndXNlcic6ICdmcmVkJywgICAgJ2FnZSc6IDQwIH0sXG4gICAgICogICAncGViYmxlcyc6IHsgJ3VzZXInOiAncGViYmxlcycsICdhZ2UnOiAxIH1cbiAgICAgKiB9O1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLnByb3BlcnR5YCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLm1hcFZhbHVlcyh1c2VycywgJ2FnZScpO1xuICAgICAqIC8vID0+IHsgJ2ZyZWQnOiA0MCwgJ3BlYmJsZXMnOiAxIH0gKGl0ZXJhdGlvbiBvcmRlciBpcyBub3QgZ3VhcmFudGVlZClcbiAgICAgKi9cbiAgICB2YXIgbWFwVmFsdWVzID0gY3JlYXRlT2JqZWN0TWFwcGVyKCk7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgb3Bwb3NpdGUgb2YgYF8ucGlja2A7IHRoaXMgbWV0aG9kIGNyZWF0ZXMgYW4gb2JqZWN0IGNvbXBvc2VkIG9mIHRoZVxuICAgICAqIG93biBhbmQgaW5oZXJpdGVkIGVudW1lcmFibGUgcHJvcGVydGllcyBvZiBgb2JqZWN0YCB0aGF0IGFyZSBub3Qgb21pdHRlZC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBzb3VyY2Ugb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258Li4uKHN0cmluZ3xzdHJpbmdbXSl9IFtwcmVkaWNhdGVdIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlclxuICAgICAqICBpdGVyYXRpb24gb3IgcHJvcGVydHkgbmFtZXMgdG8gb21pdCwgc3BlY2lmaWVkIGFzIGluZGl2aWR1YWwgcHJvcGVydHlcbiAgICAgKiAgbmFtZXMgb3IgYXJyYXlzIG9mIHByb3BlcnR5IG5hbWVzLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgcHJlZGljYXRlYC5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBuZXcgb2JqZWN0LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0ID0geyAndXNlcic6ICdmcmVkJywgJ2FnZSc6IDQwIH07XG4gICAgICpcbiAgICAgKiBfLm9taXQob2JqZWN0LCAnYWdlJyk7XG4gICAgICogLy8gPT4geyAndXNlcic6ICdmcmVkJyB9XG4gICAgICpcbiAgICAgKiBfLm9taXQob2JqZWN0LCBfLmlzTnVtYmVyKTtcbiAgICAgKiAvLyA9PiB7ICd1c2VyJzogJ2ZyZWQnIH1cbiAgICAgKi9cbiAgICB2YXIgb21pdCA9IHJlc3RQYXJhbShmdW5jdGlvbihvYmplY3QsIHByb3BzKSB7XG4gICAgICBpZiAob2JqZWN0ID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBwcm9wc1swXSAhPSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHZhciBwcm9wcyA9IGFycmF5TWFwKGJhc2VGbGF0dGVuKHByb3BzKSwgU3RyaW5nKTtcbiAgICAgICAgcmV0dXJuIHBpY2tCeUFycmF5KG9iamVjdCwgYmFzZURpZmZlcmVuY2Uoa2V5c0luKG9iamVjdCksIHByb3BzKSk7XG4gICAgICB9XG4gICAgICB2YXIgcHJlZGljYXRlID0gYmluZENhbGxiYWNrKHByb3BzWzBdLCBwcm9wc1sxXSwgMyk7XG4gICAgICByZXR1cm4gcGlja0J5Q2FsbGJhY2sob2JqZWN0LCBmdW5jdGlvbih2YWx1ZSwga2V5LCBvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuICFwcmVkaWNhdGUodmFsdWUsIGtleSwgb2JqZWN0KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHR3byBkaW1lbnNpb25hbCBhcnJheSBvZiB0aGUga2V5LXZhbHVlIHBhaXJzIGZvciBgb2JqZWN0YCxcbiAgICAgKiBlLmcuIGBbW2tleTEsIHZhbHVlMV0sIFtrZXkyLCB2YWx1ZTJdXWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGFycmF5IG9mIGtleS12YWx1ZSBwYWlycy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5wYWlycyh7ICdiYXJuZXknOiAzNiwgJ2ZyZWQnOiA0MCB9KTtcbiAgICAgKiAvLyA9PiBbWydiYXJuZXknLCAzNl0sIFsnZnJlZCcsIDQwXV0gKGl0ZXJhdGlvbiBvcmRlciBpcyBub3QgZ3VhcmFudGVlZClcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBwYWlycyhvYmplY3QpIHtcbiAgICAgIG9iamVjdCA9IHRvT2JqZWN0KG9iamVjdCk7XG5cbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIHByb3BzID0ga2V5cyhvYmplY3QpLFxuICAgICAgICAgIGxlbmd0aCA9IHByb3BzLmxlbmd0aCxcbiAgICAgICAgICByZXN1bHQgPSBBcnJheShsZW5ndGgpO1xuXG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICB2YXIga2V5ID0gcHJvcHNbaW5kZXhdO1xuICAgICAgICByZXN1bHRbaW5kZXhdID0gW2tleSwgb2JqZWN0W2tleV1dO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIG9iamVjdCBjb21wb3NlZCBvZiB0aGUgcGlja2VkIGBvYmplY3RgIHByb3BlcnRpZXMuIFByb3BlcnR5XG4gICAgICogbmFtZXMgbWF5IGJlIHNwZWNpZmllZCBhcyBpbmRpdmlkdWFsIGFyZ3VtZW50cyBvciBhcyBhcnJheXMgb2YgcHJvcGVydHlcbiAgICAgKiBuYW1lcy4gSWYgYHByZWRpY2F0ZWAgaXMgcHJvdmlkZWQgaXQgaXMgaW52b2tlZCBmb3IgZWFjaCBwcm9wZXJ0eSBvZiBgb2JqZWN0YFxuICAgICAqIHBpY2tpbmcgdGhlIHByb3BlcnRpZXMgYHByZWRpY2F0ZWAgcmV0dXJucyB0cnV0aHkgZm9yLiBUaGUgcHJlZGljYXRlIGlzXG4gICAgICogYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdGhyZWUgYXJndW1lbnRzOiAodmFsdWUsIGtleSwgb2JqZWN0KS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBzb3VyY2Ugb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258Li4uKHN0cmluZ3xzdHJpbmdbXSl9IFtwcmVkaWNhdGVdIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlclxuICAgICAqICBpdGVyYXRpb24gb3IgcHJvcGVydHkgbmFtZXMgdG8gcGljaywgc3BlY2lmaWVkIGFzIGluZGl2aWR1YWwgcHJvcGVydHlcbiAgICAgKiAgbmFtZXMgb3IgYXJyYXlzIG9mIHByb3BlcnR5IG5hbWVzLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgcHJlZGljYXRlYC5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBuZXcgb2JqZWN0LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0ID0geyAndXNlcic6ICdmcmVkJywgJ2FnZSc6IDQwIH07XG4gICAgICpcbiAgICAgKiBfLnBpY2sob2JqZWN0LCAndXNlcicpO1xuICAgICAqIC8vID0+IHsgJ3VzZXInOiAnZnJlZCcgfVxuICAgICAqXG4gICAgICogXy5waWNrKG9iamVjdCwgXy5pc1N0cmluZyk7XG4gICAgICogLy8gPT4geyAndXNlcic6ICdmcmVkJyB9XG4gICAgICovXG4gICAgdmFyIHBpY2sgPSByZXN0UGFyYW0oZnVuY3Rpb24ob2JqZWN0LCBwcm9wcykge1xuICAgICAgaWYgKG9iamVjdCA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiB7fTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0eXBlb2YgcHJvcHNbMF0gPT0gJ2Z1bmN0aW9uJ1xuICAgICAgICA/IHBpY2tCeUNhbGxiYWNrKG9iamVjdCwgYmluZENhbGxiYWNrKHByb3BzWzBdLCBwcm9wc1sxXSwgMykpXG4gICAgICAgIDogcGlja0J5QXJyYXkob2JqZWN0LCBiYXNlRmxhdHRlbihwcm9wcykpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5nZXRgIGV4Y2VwdCB0aGF0IGlmIHRoZSByZXNvbHZlZCB2YWx1ZSBpcyBhIGZ1bmN0aW9uXG4gICAgICogaXQgaXMgaW52b2tlZCB3aXRoIHRoZSBgdGhpc2AgYmluZGluZyBvZiBpdHMgcGFyZW50IG9iamVjdCBhbmQgaXRzIHJlc3VsdFxuICAgICAqIGlzIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAgICAgKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gcmVzb2x2ZS5cbiAgICAgKiBAcGFyYW0geyp9IFtkZWZhdWx0VmFsdWVdIFRoZSB2YWx1ZSByZXR1cm5lZCBpZiB0aGUgcmVzb2x2ZWQgdmFsdWUgaXMgYHVuZGVmaW5lZGAuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHJlc29sdmVkIHZhbHVlLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0ID0geyAnYSc6IFt7ICdiJzogeyAnYzEnOiAzLCAnYzInOiBfLmNvbnN0YW50KDQpIH0gfV0gfTtcbiAgICAgKlxuICAgICAqIF8ucmVzdWx0KG9iamVjdCwgJ2FbMF0uYi5jMScpO1xuICAgICAqIC8vID0+IDNcbiAgICAgKlxuICAgICAqIF8ucmVzdWx0KG9iamVjdCwgJ2FbMF0uYi5jMicpO1xuICAgICAqIC8vID0+IDRcbiAgICAgKlxuICAgICAqIF8ucmVzdWx0KG9iamVjdCwgJ2EuYi5jJywgJ2RlZmF1bHQnKTtcbiAgICAgKiAvLyA9PiAnZGVmYXVsdCdcbiAgICAgKlxuICAgICAqIF8ucmVzdWx0KG9iamVjdCwgJ2EuYi5jJywgXy5jb25zdGFudCgnZGVmYXVsdCcpKTtcbiAgICAgKiAvLyA9PiAnZGVmYXVsdCdcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZXN1bHQob2JqZWN0LCBwYXRoLCBkZWZhdWx0VmFsdWUpIHtcbiAgICAgIHZhciByZXN1bHQgPSBvYmplY3QgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG9iamVjdFtwYXRoXTtcbiAgICAgIGlmIChyZXN1bHQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAob2JqZWN0ICE9IG51bGwgJiYgIWlzS2V5KHBhdGgsIG9iamVjdCkpIHtcbiAgICAgICAgICBwYXRoID0gdG9QYXRoKHBhdGgpO1xuICAgICAgICAgIG9iamVjdCA9IHBhdGgubGVuZ3RoID09IDEgPyBvYmplY3QgOiBiYXNlR2V0KG9iamVjdCwgYmFzZVNsaWNlKHBhdGgsIDAsIC0xKSk7XG4gICAgICAgICAgcmVzdWx0ID0gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBvYmplY3RbbGFzdChwYXRoKV07XG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0ID0gcmVzdWx0ID09PSB1bmRlZmluZWQgPyBkZWZhdWx0VmFsdWUgOiByZXN1bHQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gaXNGdW5jdGlvbihyZXN1bHQpID8gcmVzdWx0LmNhbGwob2JqZWN0KSA6IHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiBgcGF0aGAgb24gYG9iamVjdGAuIElmIGEgcG9ydGlvbiBvZiBgcGF0aGBcbiAgICAgKiBkb2VzIG5vdCBleGlzdCBpdCBpcyBjcmVhdGVkLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBhdWdtZW50LlxuICAgICAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBwYXRoIFRoZSBwYXRoIG9mIHRoZSBwcm9wZXJ0eSB0byBzZXQuXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBvYmplY3QgPSB7ICdhJzogW3sgJ2InOiB7ICdjJzogMyB9IH1dIH07XG4gICAgICpcbiAgICAgKiBfLnNldChvYmplY3QsICdhWzBdLmIuYycsIDQpO1xuICAgICAqIGNvbnNvbGUubG9nKG9iamVjdC5hWzBdLmIuYyk7XG4gICAgICogLy8gPT4gNFxuICAgICAqXG4gICAgICogXy5zZXQob2JqZWN0LCAneFswXS55LnonLCA1KTtcbiAgICAgKiBjb25zb2xlLmxvZyhvYmplY3QueFswXS55LnopO1xuICAgICAqIC8vID0+IDVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzZXQob2JqZWN0LCBwYXRoLCB2YWx1ZSkge1xuICAgICAgaWYgKG9iamVjdCA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICB9XG4gICAgICB2YXIgcGF0aEtleSA9IChwYXRoICsgJycpO1xuICAgICAgcGF0aCA9IChvYmplY3RbcGF0aEtleV0gIT0gbnVsbCB8fCBpc0tleShwYXRoLCBvYmplY3QpKSA/IFtwYXRoS2V5XSA6IHRvUGF0aChwYXRoKTtcblxuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gcGF0aC5sZW5ndGgsXG4gICAgICAgICAgbGFzdEluZGV4ID0gbGVuZ3RoIC0gMSxcbiAgICAgICAgICBuZXN0ZWQgPSBvYmplY3Q7XG5cbiAgICAgIHdoaWxlIChuZXN0ZWQgIT0gbnVsbCAmJiArK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHZhciBrZXkgPSBwYXRoW2luZGV4XTtcbiAgICAgICAgaWYgKGlzT2JqZWN0KG5lc3RlZCkpIHtcbiAgICAgICAgICBpZiAoaW5kZXggPT0gbGFzdEluZGV4KSB7XG4gICAgICAgICAgICBuZXN0ZWRba2V5XSA9IHZhbHVlO1xuICAgICAgICAgIH0gZWxzZSBpZiAobmVzdGVkW2tleV0gPT0gbnVsbCkge1xuICAgICAgICAgICAgbmVzdGVkW2tleV0gPSBpc0luZGV4KHBhdGhbaW5kZXggKyAxXSkgPyBbXSA6IHt9O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBuZXN0ZWQgPSBuZXN0ZWRba2V5XTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQW4gYWx0ZXJuYXRpdmUgdG8gYF8ucmVkdWNlYDsgdGhpcyBtZXRob2QgdHJhbnNmb3JtcyBgb2JqZWN0YCB0byBhIG5ld1xuICAgICAqIGBhY2N1bXVsYXRvcmAgb2JqZWN0IHdoaWNoIGlzIHRoZSByZXN1bHQgb2YgcnVubmluZyBlYWNoIG9mIGl0cyBvd24gZW51bWVyYWJsZVxuICAgICAqIHByb3BlcnRpZXMgdGhyb3VnaCBgaXRlcmF0ZWVgLCB3aXRoIGVhY2ggaW52b2NhdGlvbiBwb3RlbnRpYWxseSBtdXRhdGluZ1xuICAgICAqIHRoZSBgYWNjdW11bGF0b3JgIG9iamVjdC4gVGhlIGBpdGVyYXRlZWAgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkXG4gICAgICogd2l0aCBmb3VyIGFyZ3VtZW50czogKGFjY3VtdWxhdG9yLCB2YWx1ZSwga2V5LCBvYmplY3QpLiBJdGVyYXRlZSBmdW5jdGlvbnNcbiAgICAgKiBtYXkgZXhpdCBpdGVyYXRpb24gZWFybHkgYnkgZXhwbGljaXRseSByZXR1cm5pbmcgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtpdGVyYXRlZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW2FjY3VtdWxhdG9yXSBUaGUgY3VzdG9tIGFjY3VtdWxhdG9yIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgaXRlcmF0ZWVgLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBhY2N1bXVsYXRlZCB2YWx1ZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy50cmFuc2Zvcm0oWzIsIDMsIDRdLCBmdW5jdGlvbihyZXN1bHQsIG4pIHtcbiAgICAgKiAgIHJlc3VsdC5wdXNoKG4gKj0gbik7XG4gICAgICogICByZXR1cm4gbiAlIDIgPT0gMDtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiBbNCwgOV1cbiAgICAgKlxuICAgICAqIF8udHJhbnNmb3JtKHsgJ2EnOiAxLCAnYic6IDIgfSwgZnVuY3Rpb24ocmVzdWx0LCBuLCBrZXkpIHtcbiAgICAgKiAgIHJlc3VsdFtrZXldID0gbiAqIDM7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4geyAnYSc6IDMsICdiJzogNiB9XG4gICAgICovXG4gICAgZnVuY3Rpb24gdHJhbnNmb3JtKG9iamVjdCwgaXRlcmF0ZWUsIGFjY3VtdWxhdG9yLCB0aGlzQXJnKSB7XG4gICAgICB2YXIgaXNBcnIgPSBpc0FycmF5KG9iamVjdCkgfHwgaXNUeXBlZEFycmF5KG9iamVjdCk7XG4gICAgICBpdGVyYXRlZSA9IGdldENhbGxiYWNrKGl0ZXJhdGVlLCB0aGlzQXJnLCA0KTtcblxuICAgICAgaWYgKGFjY3VtdWxhdG9yID09IG51bGwpIHtcbiAgICAgICAgaWYgKGlzQXJyIHx8IGlzT2JqZWN0KG9iamVjdCkpIHtcbiAgICAgICAgICB2YXIgQ3RvciA9IG9iamVjdC5jb25zdHJ1Y3RvcjtcbiAgICAgICAgICBpZiAoaXNBcnIpIHtcbiAgICAgICAgICAgIGFjY3VtdWxhdG9yID0gaXNBcnJheShvYmplY3QpID8gbmV3IEN0b3IgOiBbXTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYWNjdW11bGF0b3IgPSBiYXNlQ3JlYXRlKGlzRnVuY3Rpb24oQ3RvcikgPyBDdG9yLnByb3RvdHlwZSA6IHVuZGVmaW5lZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFjY3VtdWxhdG9yID0ge307XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIChpc0FyciA/IGFycmF5RWFjaCA6IGJhc2VGb3JPd24pKG9iamVjdCwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIGl0ZXJhdGVlKGFjY3VtdWxhdG9yLCB2YWx1ZSwgaW5kZXgsIG9iamVjdCk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBhY2N1bXVsYXRvcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIHRoZSBvd24gZW51bWVyYWJsZSBwcm9wZXJ0eSB2YWx1ZXMgb2YgYG9iamVjdGAuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogTm9uLW9iamVjdCB2YWx1ZXMgYXJlIGNvZXJjZWQgdG8gb2JqZWN0cy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSB2YWx1ZXMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGZ1bmN0aW9uIEZvbygpIHtcbiAgICAgKiAgIHRoaXMuYSA9IDE7XG4gICAgICogICB0aGlzLmIgPSAyO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIEZvby5wcm90b3R5cGUuYyA9IDM7XG4gICAgICpcbiAgICAgKiBfLnZhbHVlcyhuZXcgRm9vKTtcbiAgICAgKiAvLyA9PiBbMSwgMl0gKGl0ZXJhdGlvbiBvcmRlciBpcyBub3QgZ3VhcmFudGVlZClcbiAgICAgKlxuICAgICAqIF8udmFsdWVzKCdoaScpO1xuICAgICAqIC8vID0+IFsnaCcsICdpJ11cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB2YWx1ZXMob2JqZWN0KSB7XG4gICAgICByZXR1cm4gYmFzZVZhbHVlcyhvYmplY3QsIGtleXMob2JqZWN0KSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhcnJheSBvZiB0aGUgb3duIGFuZCBpbmhlcml0ZWQgZW51bWVyYWJsZSBwcm9wZXJ0eSB2YWx1ZXNcbiAgICAgKiBvZiBgb2JqZWN0YC5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBOb24tb2JqZWN0IHZhbHVlcyBhcmUgY29lcmNlZCB0byBvYmplY3RzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IHZhbHVlcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogZnVuY3Rpb24gRm9vKCkge1xuICAgICAqICAgdGhpcy5hID0gMTtcbiAgICAgKiAgIHRoaXMuYiA9IDI7XG4gICAgICogfVxuICAgICAqXG4gICAgICogRm9vLnByb3RvdHlwZS5jID0gMztcbiAgICAgKlxuICAgICAqIF8udmFsdWVzSW4obmV3IEZvbyk7XG4gICAgICogLy8gPT4gWzEsIDIsIDNdIChpdGVyYXRpb24gb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQpXG4gICAgICovXG4gICAgZnVuY3Rpb24gdmFsdWVzSW4ob2JqZWN0KSB7XG4gICAgICByZXR1cm4gYmFzZVZhbHVlcyhvYmplY3QsIGtleXNJbihvYmplY3QpKTtcbiAgICB9XG5cbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYG5gIGlzIGJldHdlZW4gYHN0YXJ0YCBhbmQgdXAgdG8gYnV0IG5vdCBpbmNsdWRpbmcsIGBlbmRgLiBJZlxuICAgICAqIGBlbmRgIGlzIG5vdCBzcGVjaWZpZWQgaXQgaXMgc2V0IHRvIGBzdGFydGAgd2l0aCBgc3RhcnRgIHRoZW4gc2V0IHRvIGAwYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBOdW1iZXJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbiBUaGUgbnVtYmVyIHRvIGNoZWNrLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbc3RhcnQ9MF0gVGhlIHN0YXJ0IG9mIHRoZSByYW5nZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZW5kIFRoZSBlbmQgb2YgdGhlIHJhbmdlLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgbmAgaXMgaW4gdGhlIHJhbmdlLCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaW5SYW5nZSgzLCAyLCA0KTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmluUmFuZ2UoNCwgOCk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pblJhbmdlKDQsIDIpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICpcbiAgICAgKiBfLmluUmFuZ2UoMiwgMik7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKlxuICAgICAqIF8uaW5SYW5nZSgxLjIsIDIpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaW5SYW5nZSg1LjIsIDQpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaW5SYW5nZSh2YWx1ZSwgc3RhcnQsIGVuZCkge1xuICAgICAgc3RhcnQgPSArc3RhcnQgfHwgMDtcbiAgICAgIGlmIChlbmQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBlbmQgPSBzdGFydDtcbiAgICAgICAgc3RhcnQgPSAwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZW5kID0gK2VuZCB8fCAwO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlID49IG5hdGl2ZU1pbihzdGFydCwgZW5kKSAmJiB2YWx1ZSA8IG5hdGl2ZU1heChzdGFydCwgZW5kKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQcm9kdWNlcyBhIHJhbmRvbSBudW1iZXIgYmV0d2VlbiBgbWluYCBhbmQgYG1heGAgKGluY2x1c2l2ZSkuIElmIG9ubHkgb25lXG4gICAgICogYXJndW1lbnQgaXMgcHJvdmlkZWQgYSBudW1iZXIgYmV0d2VlbiBgMGAgYW5kIHRoZSBnaXZlbiBudW1iZXIgaXMgcmV0dXJuZWQuXG4gICAgICogSWYgYGZsb2F0aW5nYCBpcyBgdHJ1ZWAsIG9yIGVpdGhlciBgbWluYCBvciBgbWF4YCBhcmUgZmxvYXRzLCBhIGZsb2F0aW5nLXBvaW50XG4gICAgICogbnVtYmVyIGlzIHJldHVybmVkIGluc3RlYWQgb2YgYW4gaW50ZWdlci5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBOdW1iZXJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW21pbj0wXSBUaGUgbWluaW11bSBwb3NzaWJsZSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW21heD0xXSBUaGUgbWF4aW11bSBwb3NzaWJsZSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtmbG9hdGluZ10gU3BlY2lmeSByZXR1cm5pbmcgYSBmbG9hdGluZy1wb2ludCBudW1iZXIuXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgcmFuZG9tIG51bWJlci5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5yYW5kb20oMCwgNSk7XG4gICAgICogLy8gPT4gYW4gaW50ZWdlciBiZXR3ZWVuIDAgYW5kIDVcbiAgICAgKlxuICAgICAqIF8ucmFuZG9tKDUpO1xuICAgICAqIC8vID0+IGFsc28gYW4gaW50ZWdlciBiZXR3ZWVuIDAgYW5kIDVcbiAgICAgKlxuICAgICAqIF8ucmFuZG9tKDUsIHRydWUpO1xuICAgICAqIC8vID0+IGEgZmxvYXRpbmctcG9pbnQgbnVtYmVyIGJldHdlZW4gMCBhbmQgNVxuICAgICAqXG4gICAgICogXy5yYW5kb20oMS4yLCA1LjIpO1xuICAgICAqIC8vID0+IGEgZmxvYXRpbmctcG9pbnQgbnVtYmVyIGJldHdlZW4gMS4yIGFuZCA1LjJcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByYW5kb20obWluLCBtYXgsIGZsb2F0aW5nKSB7XG4gICAgICBpZiAoZmxvYXRpbmcgJiYgaXNJdGVyYXRlZUNhbGwobWluLCBtYXgsIGZsb2F0aW5nKSkge1xuICAgICAgICBtYXggPSBmbG9hdGluZyA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIHZhciBub01pbiA9IG1pbiA9PSBudWxsLFxuICAgICAgICAgIG5vTWF4ID0gbWF4ID09IG51bGw7XG5cbiAgICAgIGlmIChmbG9hdGluZyA9PSBudWxsKSB7XG4gICAgICAgIGlmIChub01heCAmJiB0eXBlb2YgbWluID09ICdib29sZWFuJykge1xuICAgICAgICAgIGZsb2F0aW5nID0gbWluO1xuICAgICAgICAgIG1pbiA9IDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIG1heCA9PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICBmbG9hdGluZyA9IG1heDtcbiAgICAgICAgICBub01heCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChub01pbiAmJiBub01heCkge1xuICAgICAgICBtYXggPSAxO1xuICAgICAgICBub01heCA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgbWluID0gK21pbiB8fCAwO1xuICAgICAgaWYgKG5vTWF4KSB7XG4gICAgICAgIG1heCA9IG1pbjtcbiAgICAgICAgbWluID0gMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1heCA9ICttYXggfHwgMDtcbiAgICAgIH1cbiAgICAgIGlmIChmbG9hdGluZyB8fCBtaW4gJSAxIHx8IG1heCAlIDEpIHtcbiAgICAgICAgdmFyIHJhbmQgPSBuYXRpdmVSYW5kb20oKTtcbiAgICAgICAgcmV0dXJuIG5hdGl2ZU1pbihtaW4gKyAocmFuZCAqIChtYXggLSBtaW4gKyBwYXJzZUZsb2F0KCcxZS0nICsgKChyYW5kICsgJycpLmxlbmd0aCAtIDEpKSkpLCBtYXgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGJhc2VSYW5kb20obWluLCBtYXgpO1xuICAgIH1cblxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGBzdHJpbmdgIHRvIFtjYW1lbCBjYXNlXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9DYW1lbENhc2UpLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbc3RyaW5nPScnXSBUaGUgc3RyaW5nIHRvIGNvbnZlcnQuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgY2FtZWwgY2FzZWQgc3RyaW5nLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmNhbWVsQ2FzZSgnRm9vIEJhcicpO1xuICAgICAqIC8vID0+ICdmb29CYXInXG4gICAgICpcbiAgICAgKiBfLmNhbWVsQ2FzZSgnLS1mb28tYmFyJyk7XG4gICAgICogLy8gPT4gJ2Zvb0JhcidcbiAgICAgKlxuICAgICAqIF8uY2FtZWxDYXNlKCdfX2Zvb19iYXJfXycpO1xuICAgICAqIC8vID0+ICdmb29CYXInXG4gICAgICovXG4gICAgdmFyIGNhbWVsQ2FzZSA9IGNyZWF0ZUNvbXBvdW5kZXIoZnVuY3Rpb24ocmVzdWx0LCB3b3JkLCBpbmRleCkge1xuICAgICAgd29yZCA9IHdvcmQudG9Mb3dlckNhc2UoKTtcbiAgICAgIHJldHVybiByZXN1bHQgKyAoaW5kZXggPyAod29yZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHdvcmQuc2xpY2UoMSkpIDogd29yZCk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDYXBpdGFsaXplcyB0aGUgZmlyc3QgY2hhcmFjdGVyIG9mIGBzdHJpbmdgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbc3RyaW5nPScnXSBUaGUgc3RyaW5nIHRvIGNhcGl0YWxpemUuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgY2FwaXRhbGl6ZWQgc3RyaW5nLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmNhcGl0YWxpemUoJ2ZyZWQnKTtcbiAgICAgKiAvLyA9PiAnRnJlZCdcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjYXBpdGFsaXplKHN0cmluZykge1xuICAgICAgc3RyaW5nID0gYmFzZVRvU3RyaW5nKHN0cmluZyk7XG4gICAgICByZXR1cm4gc3RyaW5nICYmIChzdHJpbmcuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHJpbmcuc2xpY2UoMSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlYnVycnMgYHN0cmluZ2AgYnkgY29udmVydGluZyBbbGF0aW4tMSBzdXBwbGVtZW50YXJ5IGxldHRlcnNdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xhdGluLTFfU3VwcGxlbWVudF8oVW5pY29kZV9ibG9jaykjQ2hhcmFjdGVyX3RhYmxlKVxuICAgICAqIHRvIGJhc2ljIGxhdGluIGxldHRlcnMgYW5kIHJlbW92aW5nIFtjb21iaW5pbmcgZGlhY3JpdGljYWwgbWFya3NdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0NvbWJpbmluZ19EaWFjcml0aWNhbF9NYXJrcykuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgU3RyaW5nXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtzdHJpbmc9JyddIFRoZSBzdHJpbmcgdG8gZGVidXJyLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGRlYnVycmVkIHN0cmluZy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5kZWJ1cnIoJ2TDqWrDoCB2dScpO1xuICAgICAqIC8vID0+ICdkZWphIHZ1J1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGRlYnVycihzdHJpbmcpIHtcbiAgICAgIHN0cmluZyA9IGJhc2VUb1N0cmluZyhzdHJpbmcpO1xuICAgICAgcmV0dXJuIHN0cmluZyAmJiBzdHJpbmcucmVwbGFjZShyZUxhdGluMSwgZGVidXJyTGV0dGVyKS5yZXBsYWNlKHJlQ29tYm9NYXJrLCAnJyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGBzdHJpbmdgIGVuZHMgd2l0aCB0aGUgZ2l2ZW4gdGFyZ2V0IHN0cmluZy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZz0nJ10gVGhlIHN0cmluZyB0byBzZWFyY2guXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFt0YXJnZXRdIFRoZSBzdHJpbmcgdG8gc2VhcmNoIGZvci5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3Bvc2l0aW9uPXN0cmluZy5sZW5ndGhdIFRoZSBwb3NpdGlvbiB0byBzZWFyY2ggZnJvbS5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHN0cmluZ2AgZW5kcyB3aXRoIGB0YXJnZXRgLCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uZW5kc1dpdGgoJ2FiYycsICdjJyk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5lbmRzV2l0aCgnYWJjJywgJ2InKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqXG4gICAgICogXy5lbmRzV2l0aCgnYWJjJywgJ2InLCAyKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICovXG4gICAgZnVuY3Rpb24gZW5kc1dpdGgoc3RyaW5nLCB0YXJnZXQsIHBvc2l0aW9uKSB7XG4gICAgICBzdHJpbmcgPSBiYXNlVG9TdHJpbmcoc3RyaW5nKTtcbiAgICAgIHRhcmdldCA9ICh0YXJnZXQgKyAnJyk7XG5cbiAgICAgIHZhciBsZW5ndGggPSBzdHJpbmcubGVuZ3RoO1xuICAgICAgcG9zaXRpb24gPSBwb3NpdGlvbiA9PT0gdW5kZWZpbmVkXG4gICAgICAgID8gbGVuZ3RoXG4gICAgICAgIDogbmF0aXZlTWluKHBvc2l0aW9uIDwgMCA/IDAgOiAoK3Bvc2l0aW9uIHx8IDApLCBsZW5ndGgpO1xuXG4gICAgICBwb3NpdGlvbiAtPSB0YXJnZXQubGVuZ3RoO1xuICAgICAgcmV0dXJuIHBvc2l0aW9uID49IDAgJiYgc3RyaW5nLmluZGV4T2YodGFyZ2V0LCBwb3NpdGlvbikgPT0gcG9zaXRpb247XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udmVydHMgdGhlIGNoYXJhY3RlcnMgXCImXCIsIFwiPFwiLCBcIj5cIiwgJ1wiJywgXCInXCIsIGFuZCBcIlxcYFwiLCBpbiBgc3RyaW5nYCB0b1xuICAgICAqIHRoZWlyIGNvcnJlc3BvbmRpbmcgSFRNTCBlbnRpdGllcy5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBObyBvdGhlciBjaGFyYWN0ZXJzIGFyZSBlc2NhcGVkLiBUbyBlc2NhcGUgYWRkaXRpb25hbCBjaGFyYWN0ZXJzXG4gICAgICogdXNlIGEgdGhpcmQtcGFydHkgbGlicmFyeSBsaWtlIFtfaGVfXShodHRwczovL210aHMuYmUvaGUpLlxuICAgICAqXG4gICAgICogVGhvdWdoIHRoZSBcIj5cIiBjaGFyYWN0ZXIgaXMgZXNjYXBlZCBmb3Igc3ltbWV0cnksIGNoYXJhY3RlcnMgbGlrZVxuICAgICAqIFwiPlwiIGFuZCBcIi9cIiBkb24ndCBuZWVkIGVzY2FwaW5nIGluIEhUTUwgYW5kIGhhdmUgbm8gc3BlY2lhbCBtZWFuaW5nXG4gICAgICogdW5sZXNzIHRoZXkncmUgcGFydCBvZiBhIHRhZyBvciB1bnF1b3RlZCBhdHRyaWJ1dGUgdmFsdWUuXG4gICAgICogU2VlIFtNYXRoaWFzIEJ5bmVucydzIGFydGljbGVdKGh0dHBzOi8vbWF0aGlhc2J5bmVucy5iZS9ub3Rlcy9hbWJpZ3VvdXMtYW1wZXJzYW5kcylcbiAgICAgKiAodW5kZXIgXCJzZW1pLXJlbGF0ZWQgZnVuIGZhY3RcIikgZm9yIG1vcmUgZGV0YWlscy5cbiAgICAgKlxuICAgICAqIEJhY2t0aWNrcyBhcmUgZXNjYXBlZCBiZWNhdXNlIGluIEludGVybmV0IEV4cGxvcmVyIDwgOSwgdGhleSBjYW4gYnJlYWsgb3V0XG4gICAgICogb2YgYXR0cmlidXRlIHZhbHVlcyBvciBIVE1MIGNvbW1lbnRzLiBTZWUgWyM1OV0oaHR0cHM6Ly9odG1sNXNlYy5vcmcvIzU5KSxcbiAgICAgKiBbIzEwMl0oaHR0cHM6Ly9odG1sNXNlYy5vcmcvIzEwMiksIFsjMTA4XShodHRwczovL2h0bWw1c2VjLm9yZy8jMTA4KSwgYW5kXG4gICAgICogWyMxMzNdKGh0dHBzOi8vaHRtbDVzZWMub3JnLyMxMzMpIG9mIHRoZSBbSFRNTDUgU2VjdXJpdHkgQ2hlYXRzaGVldF0oaHR0cHM6Ly9odG1sNXNlYy5vcmcvKVxuICAgICAqIGZvciBtb3JlIGRldGFpbHMuXG4gICAgICpcbiAgICAgKiBXaGVuIHdvcmtpbmcgd2l0aCBIVE1MIHlvdSBzaG91bGQgYWx3YXlzIFtxdW90ZSBhdHRyaWJ1dGUgdmFsdWVzXShodHRwOi8vd29ua28uY29tL3Bvc3QvaHRtbC1lc2NhcGluZylcbiAgICAgKiB0byByZWR1Y2UgWFNTIHZlY3RvcnMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgU3RyaW5nXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtzdHJpbmc9JyddIFRoZSBzdHJpbmcgdG8gZXNjYXBlLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGVzY2FwZWQgc3RyaW5nLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmVzY2FwZSgnZnJlZCwgYmFybmV5LCAmIHBlYmJsZXMnKTtcbiAgICAgKiAvLyA9PiAnZnJlZCwgYmFybmV5LCAmYW1wOyBwZWJibGVzJ1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGVzY2FwZShzdHJpbmcpIHtcbiAgICAgIC8vIFJlc2V0IGBsYXN0SW5kZXhgIGJlY2F1c2UgaW4gSUUgPCA5IGBTdHJpbmcjcmVwbGFjZWAgZG9lcyBub3QuXG4gICAgICBzdHJpbmcgPSBiYXNlVG9TdHJpbmcoc3RyaW5nKTtcbiAgICAgIHJldHVybiAoc3RyaW5nICYmIHJlSGFzVW5lc2NhcGVkSHRtbC50ZXN0KHN0cmluZykpXG4gICAgICAgID8gc3RyaW5nLnJlcGxhY2UocmVVbmVzY2FwZWRIdG1sLCBlc2NhcGVIdG1sQ2hhcilcbiAgICAgICAgOiBzdHJpbmc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXNjYXBlcyB0aGUgYFJlZ0V4cGAgc3BlY2lhbCBjaGFyYWN0ZXJzIFwiXFxcIiwgXCIvXCIsIFwiXlwiLCBcIiRcIiwgXCIuXCIsIFwifFwiLCBcIj9cIixcbiAgICAgKiBcIipcIiwgXCIrXCIsIFwiKFwiLCBcIilcIiwgXCJbXCIsIFwiXVwiLCBcIntcIiBhbmQgXCJ9XCIgaW4gYHN0cmluZ2AuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgU3RyaW5nXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtzdHJpbmc9JyddIFRoZSBzdHJpbmcgdG8gZXNjYXBlLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGVzY2FwZWQgc3RyaW5nLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmVzY2FwZVJlZ0V4cCgnW2xvZGFzaF0oaHR0cHM6Ly9sb2Rhc2guY29tLyknKTtcbiAgICAgKiAvLyA9PiAnXFxbbG9kYXNoXFxdXFwoaHR0cHM6XFwvXFwvbG9kYXNoXFwuY29tXFwvXFwpJ1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGVzY2FwZVJlZ0V4cChzdHJpbmcpIHtcbiAgICAgIHN0cmluZyA9IGJhc2VUb1N0cmluZyhzdHJpbmcpO1xuICAgICAgcmV0dXJuIChzdHJpbmcgJiYgcmVIYXNSZWdFeHBDaGFycy50ZXN0KHN0cmluZykpXG4gICAgICAgID8gc3RyaW5nLnJlcGxhY2UocmVSZWdFeHBDaGFycywgZXNjYXBlUmVnRXhwQ2hhcilcbiAgICAgICAgOiAoc3RyaW5nIHx8ICcoPzopJyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udmVydHMgYHN0cmluZ2AgdG8gW2tlYmFiIGNhc2VdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xldHRlcl9jYXNlI1NwZWNpYWxfY2FzZV9zdHlsZXMpLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbc3RyaW5nPScnXSBUaGUgc3RyaW5nIHRvIGNvbnZlcnQuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUga2ViYWIgY2FzZWQgc3RyaW5nLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmtlYmFiQ2FzZSgnRm9vIEJhcicpO1xuICAgICAqIC8vID0+ICdmb28tYmFyJ1xuICAgICAqXG4gICAgICogXy5rZWJhYkNhc2UoJ2Zvb0JhcicpO1xuICAgICAqIC8vID0+ICdmb28tYmFyJ1xuICAgICAqXG4gICAgICogXy5rZWJhYkNhc2UoJ19fZm9vX2Jhcl9fJyk7XG4gICAgICogLy8gPT4gJ2Zvby1iYXInXG4gICAgICovXG4gICAgdmFyIGtlYmFiQ2FzZSA9IGNyZWF0ZUNvbXBvdW5kZXIoZnVuY3Rpb24ocmVzdWx0LCB3b3JkLCBpbmRleCkge1xuICAgICAgcmV0dXJuIHJlc3VsdCArIChpbmRleCA/ICctJyA6ICcnKSArIHdvcmQudG9Mb3dlckNhc2UoKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFBhZHMgYHN0cmluZ2Agb24gdGhlIGxlZnQgYW5kIHJpZ2h0IHNpZGVzIGlmIGl0J3Mgc2hvcnRlciB0aGFuIGBsZW5ndGhgLlxuICAgICAqIFBhZGRpbmcgY2hhcmFjdGVycyBhcmUgdHJ1bmNhdGVkIGlmIHRoZXkgY2FuJ3QgYmUgZXZlbmx5IGRpdmlkZWQgYnkgYGxlbmd0aGAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgU3RyaW5nXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtzdHJpbmc9JyddIFRoZSBzdHJpbmcgdG8gcGFkLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoPTBdIFRoZSBwYWRkaW5nIGxlbmd0aC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2NoYXJzPScgJ10gVGhlIHN0cmluZyB1c2VkIGFzIHBhZGRpbmcuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgcGFkZGVkIHN0cmluZy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5wYWQoJ2FiYycsIDgpO1xuICAgICAqIC8vID0+ICcgIGFiYyAgICdcbiAgICAgKlxuICAgICAqIF8ucGFkKCdhYmMnLCA4LCAnXy0nKTtcbiAgICAgKiAvLyA9PiAnXy1hYmNfLV8nXG4gICAgICpcbiAgICAgKiBfLnBhZCgnYWJjJywgMyk7XG4gICAgICogLy8gPT4gJ2FiYydcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBwYWQoc3RyaW5nLCBsZW5ndGgsIGNoYXJzKSB7XG4gICAgICBzdHJpbmcgPSBiYXNlVG9TdHJpbmcoc3RyaW5nKTtcbiAgICAgIGxlbmd0aCA9ICtsZW5ndGg7XG5cbiAgICAgIHZhciBzdHJMZW5ndGggPSBzdHJpbmcubGVuZ3RoO1xuICAgICAgaWYgKHN0ckxlbmd0aCA+PSBsZW5ndGggfHwgIW5hdGl2ZUlzRmluaXRlKGxlbmd0aCkpIHtcbiAgICAgICAgcmV0dXJuIHN0cmluZztcbiAgICAgIH1cbiAgICAgIHZhciBtaWQgPSAobGVuZ3RoIC0gc3RyTGVuZ3RoKSAvIDIsXG4gICAgICAgICAgbGVmdExlbmd0aCA9IG5hdGl2ZUZsb29yKG1pZCksXG4gICAgICAgICAgcmlnaHRMZW5ndGggPSBuYXRpdmVDZWlsKG1pZCk7XG5cbiAgICAgIGNoYXJzID0gY3JlYXRlUGFkZGluZygnJywgcmlnaHRMZW5ndGgsIGNoYXJzKTtcbiAgICAgIHJldHVybiBjaGFycy5zbGljZSgwLCBsZWZ0TGVuZ3RoKSArIHN0cmluZyArIGNoYXJzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBhZHMgYHN0cmluZ2Agb24gdGhlIGxlZnQgc2lkZSBpZiBpdCdzIHNob3J0ZXIgdGhhbiBgbGVuZ3RoYC4gUGFkZGluZ1xuICAgICAqIGNoYXJhY3RlcnMgYXJlIHRydW5jYXRlZCBpZiB0aGV5IGV4Y2VlZCBgbGVuZ3RoYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZz0nJ10gVGhlIHN0cmluZyB0byBwYWQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGg9MF0gVGhlIHBhZGRpbmcgbGVuZ3RoLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbY2hhcnM9JyAnXSBUaGUgc3RyaW5nIHVzZWQgYXMgcGFkZGluZy5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBwYWRkZWQgc3RyaW5nLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnBhZExlZnQoJ2FiYycsIDYpO1xuICAgICAqIC8vID0+ICcgICBhYmMnXG4gICAgICpcbiAgICAgKiBfLnBhZExlZnQoJ2FiYycsIDYsICdfLScpO1xuICAgICAqIC8vID0+ICdfLV9hYmMnXG4gICAgICpcbiAgICAgKiBfLnBhZExlZnQoJ2FiYycsIDMpO1xuICAgICAqIC8vID0+ICdhYmMnXG4gICAgICovXG4gICAgdmFyIHBhZExlZnQgPSBjcmVhdGVQYWREaXIoKTtcblxuICAgIC8qKlxuICAgICAqIFBhZHMgYHN0cmluZ2Agb24gdGhlIHJpZ2h0IHNpZGUgaWYgaXQncyBzaG9ydGVyIHRoYW4gYGxlbmd0aGAuIFBhZGRpbmdcbiAgICAgKiBjaGFyYWN0ZXJzIGFyZSB0cnVuY2F0ZWQgaWYgdGhleSBleGNlZWQgYGxlbmd0aGAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgU3RyaW5nXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtzdHJpbmc9JyddIFRoZSBzdHJpbmcgdG8gcGFkLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoPTBdIFRoZSBwYWRkaW5nIGxlbmd0aC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2NoYXJzPScgJ10gVGhlIHN0cmluZyB1c2VkIGFzIHBhZGRpbmcuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgcGFkZGVkIHN0cmluZy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5wYWRSaWdodCgnYWJjJywgNik7XG4gICAgICogLy8gPT4gJ2FiYyAgICdcbiAgICAgKlxuICAgICAqIF8ucGFkUmlnaHQoJ2FiYycsIDYsICdfLScpO1xuICAgICAqIC8vID0+ICdhYmNfLV8nXG4gICAgICpcbiAgICAgKiBfLnBhZFJpZ2h0KCdhYmMnLCAzKTtcbiAgICAgKiAvLyA9PiAnYWJjJ1xuICAgICAqL1xuICAgIHZhciBwYWRSaWdodCA9IGNyZWF0ZVBhZERpcih0cnVlKTtcblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGBzdHJpbmdgIHRvIGFuIGludGVnZXIgb2YgdGhlIHNwZWNpZmllZCByYWRpeC4gSWYgYHJhZGl4YCBpc1xuICAgICAqIGB1bmRlZmluZWRgIG9yIGAwYCwgYSBgcmFkaXhgIG9mIGAxMGAgaXMgdXNlZCB1bmxlc3MgYHZhbHVlYCBpcyBhIGhleGFkZWNpbWFsLFxuICAgICAqIGluIHdoaWNoIGNhc2UgYSBgcmFkaXhgIG9mIGAxNmAgaXMgdXNlZC5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBhbGlnbnMgd2l0aCB0aGUgW0VTNSBpbXBsZW1lbnRhdGlvbl0oaHR0cHM6Ly9lczUuZ2l0aHViLmlvLyNFKVxuICAgICAqIG9mIGBwYXJzZUludGAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgU3RyaW5nXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyBUaGUgc3RyaW5nIHRvIGNvbnZlcnQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtyYWRpeF0gVGhlIHJhZGl4IHRvIGludGVycHJldCBgdmFsdWVgIGJ5LlxuICAgICAqIEBwYXJhbS0ge09iamVjdH0gW2d1YXJkXSBFbmFibGVzIHVzZSBhcyBhIGNhbGxiYWNrIGZvciBmdW5jdGlvbnMgbGlrZSBgXy5tYXBgLlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGNvbnZlcnRlZCBpbnRlZ2VyLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnBhcnNlSW50KCcwOCcpO1xuICAgICAqIC8vID0+IDhcbiAgICAgKlxuICAgICAqIF8ubWFwKFsnNicsICcwOCcsICcxMCddLCBfLnBhcnNlSW50KTtcbiAgICAgKiAvLyA9PiBbNiwgOCwgMTBdXG4gICAgICovXG4gICAgZnVuY3Rpb24gcGFyc2VJbnQoc3RyaW5nLCByYWRpeCwgZ3VhcmQpIHtcbiAgICAgIC8vIEZpcmVmb3ggPCAyMSBhbmQgT3BlcmEgPCAxNSBmb2xsb3cgRVMzIGZvciBgcGFyc2VJbnRgLlxuICAgICAgLy8gQ2hyb21lIGZhaWxzIHRvIHRyaW0gbGVhZGluZyA8Qk9NPiB3aGl0ZXNwYWNlIGNoYXJhY3RlcnMuXG4gICAgICAvLyBTZWUgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTMxMDkgZm9yIG1vcmUgZGV0YWlscy5cbiAgICAgIGlmIChndWFyZCA/IGlzSXRlcmF0ZWVDYWxsKHN0cmluZywgcmFkaXgsIGd1YXJkKSA6IHJhZGl4ID09IG51bGwpIHtcbiAgICAgICAgcmFkaXggPSAwO1xuICAgICAgfSBlbHNlIGlmIChyYWRpeCkge1xuICAgICAgICByYWRpeCA9ICtyYWRpeDtcbiAgICAgIH1cbiAgICAgIHN0cmluZyA9IHRyaW0oc3RyaW5nKTtcbiAgICAgIHJldHVybiBuYXRpdmVQYXJzZUludChzdHJpbmcsIHJhZGl4IHx8IChyZUhhc0hleFByZWZpeC50ZXN0KHN0cmluZykgPyAxNiA6IDEwKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVwZWF0cyB0aGUgZ2l2ZW4gc3RyaW5nIGBuYCB0aW1lcy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZz0nJ10gVGhlIHN0cmluZyB0byByZXBlYXQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtuPTBdIFRoZSBudW1iZXIgb2YgdGltZXMgdG8gcmVwZWF0IHRoZSBzdHJpbmcuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgcmVwZWF0ZWQgc3RyaW5nLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnJlcGVhdCgnKicsIDMpO1xuICAgICAqIC8vID0+ICcqKionXG4gICAgICpcbiAgICAgKiBfLnJlcGVhdCgnYWJjJywgMik7XG4gICAgICogLy8gPT4gJ2FiY2FiYydcbiAgICAgKlxuICAgICAqIF8ucmVwZWF0KCdhYmMnLCAwKTtcbiAgICAgKiAvLyA9PiAnJ1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlcGVhdChzdHJpbmcsIG4pIHtcbiAgICAgIHZhciByZXN1bHQgPSAnJztcbiAgICAgIHN0cmluZyA9IGJhc2VUb1N0cmluZyhzdHJpbmcpO1xuICAgICAgbiA9ICtuO1xuICAgICAgaWYgKG4gPCAxIHx8ICFzdHJpbmcgfHwgIW5hdGl2ZUlzRmluaXRlKG4pKSB7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgICAvLyBMZXZlcmFnZSB0aGUgZXhwb25lbnRpYXRpb24gYnkgc3F1YXJpbmcgYWxnb3JpdGhtIGZvciBhIGZhc3RlciByZXBlYXQuXG4gICAgICAvLyBTZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRXhwb25lbnRpYXRpb25fYnlfc3F1YXJpbmcgZm9yIG1vcmUgZGV0YWlscy5cbiAgICAgIGRvIHtcbiAgICAgICAgaWYgKG4gJSAyKSB7XG4gICAgICAgICAgcmVzdWx0ICs9IHN0cmluZztcbiAgICAgICAgfVxuICAgICAgICBuID0gbmF0aXZlRmxvb3IobiAvIDIpO1xuICAgICAgICBzdHJpbmcgKz0gc3RyaW5nO1xuICAgICAgfSB3aGlsZSAobik7XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udmVydHMgYHN0cmluZ2AgdG8gW3NuYWtlIGNhc2VdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1NuYWtlX2Nhc2UpLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbc3RyaW5nPScnXSBUaGUgc3RyaW5nIHRvIGNvbnZlcnQuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc25ha2UgY2FzZWQgc3RyaW5nLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnNuYWtlQ2FzZSgnRm9vIEJhcicpO1xuICAgICAqIC8vID0+ICdmb29fYmFyJ1xuICAgICAqXG4gICAgICogXy5zbmFrZUNhc2UoJ2Zvb0JhcicpO1xuICAgICAqIC8vID0+ICdmb29fYmFyJ1xuICAgICAqXG4gICAgICogXy5zbmFrZUNhc2UoJy0tZm9vLWJhcicpO1xuICAgICAqIC8vID0+ICdmb29fYmFyJ1xuICAgICAqL1xuICAgIHZhciBzbmFrZUNhc2UgPSBjcmVhdGVDb21wb3VuZGVyKGZ1bmN0aW9uKHJlc3VsdCwgd29yZCwgaW5kZXgpIHtcbiAgICAgIHJldHVybiByZXN1bHQgKyAoaW5kZXggPyAnXycgOiAnJykgKyB3b3JkLnRvTG93ZXJDYXNlKCk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBgc3RyaW5nYCB0byBbc3RhcnQgY2FzZV0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTGV0dGVyX2Nhc2UjU3R5bGlzdGljX29yX3NwZWNpYWxpc2VkX3VzYWdlKS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZz0nJ10gVGhlIHN0cmluZyB0byBjb252ZXJ0LlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHN0YXJ0IGNhc2VkIHN0cmluZy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5zdGFydENhc2UoJy0tZm9vLWJhcicpO1xuICAgICAqIC8vID0+ICdGb28gQmFyJ1xuICAgICAqXG4gICAgICogXy5zdGFydENhc2UoJ2Zvb0JhcicpO1xuICAgICAqIC8vID0+ICdGb28gQmFyJ1xuICAgICAqXG4gICAgICogXy5zdGFydENhc2UoJ19fZm9vX2Jhcl9fJyk7XG4gICAgICogLy8gPT4gJ0ZvbyBCYXInXG4gICAgICovXG4gICAgdmFyIHN0YXJ0Q2FzZSA9IGNyZWF0ZUNvbXBvdW5kZXIoZnVuY3Rpb24ocmVzdWx0LCB3b3JkLCBpbmRleCkge1xuICAgICAgcmV0dXJuIHJlc3VsdCArIChpbmRleCA/ICcgJyA6ICcnKSArICh3b3JkLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgd29yZC5zbGljZSgxKSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHN0cmluZ2Agc3RhcnRzIHdpdGggdGhlIGdpdmVuIHRhcmdldCBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgU3RyaW5nXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtzdHJpbmc9JyddIFRoZSBzdHJpbmcgdG8gc2VhcmNoLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbdGFyZ2V0XSBUaGUgc3RyaW5nIHRvIHNlYXJjaCBmb3IuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtwb3NpdGlvbj0wXSBUaGUgcG9zaXRpb24gdG8gc2VhcmNoIGZyb20uXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBzdHJpbmdgIHN0YXJ0cyB3aXRoIGB0YXJnZXRgLCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uc3RhcnRzV2l0aCgnYWJjJywgJ2EnKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLnN0YXJ0c1dpdGgoJ2FiYycsICdiJyk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKlxuICAgICAqIF8uc3RhcnRzV2l0aCgnYWJjJywgJ2InLCAxKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICovXG4gICAgZnVuY3Rpb24gc3RhcnRzV2l0aChzdHJpbmcsIHRhcmdldCwgcG9zaXRpb24pIHtcbiAgICAgIHN0cmluZyA9IGJhc2VUb1N0cmluZyhzdHJpbmcpO1xuICAgICAgcG9zaXRpb24gPSBwb3NpdGlvbiA9PSBudWxsXG4gICAgICAgID8gMFxuICAgICAgICA6IG5hdGl2ZU1pbihwb3NpdGlvbiA8IDAgPyAwIDogKCtwb3NpdGlvbiB8fCAwKSwgc3RyaW5nLmxlbmd0aCk7XG5cbiAgICAgIHJldHVybiBzdHJpbmcubGFzdEluZGV4T2YodGFyZ2V0LCBwb3NpdGlvbikgPT0gcG9zaXRpb247XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGNvbXBpbGVkIHRlbXBsYXRlIGZ1bmN0aW9uIHRoYXQgY2FuIGludGVycG9sYXRlIGRhdGEgcHJvcGVydGllc1xuICAgICAqIGluIFwiaW50ZXJwb2xhdGVcIiBkZWxpbWl0ZXJzLCBIVE1MLWVzY2FwZSBpbnRlcnBvbGF0ZWQgZGF0YSBwcm9wZXJ0aWVzIGluXG4gICAgICogXCJlc2NhcGVcIiBkZWxpbWl0ZXJzLCBhbmQgZXhlY3V0ZSBKYXZhU2NyaXB0IGluIFwiZXZhbHVhdGVcIiBkZWxpbWl0ZXJzLiBEYXRhXG4gICAgICogcHJvcGVydGllcyBtYXkgYmUgYWNjZXNzZWQgYXMgZnJlZSB2YXJpYWJsZXMgaW4gdGhlIHRlbXBsYXRlLiBJZiBhIHNldHRpbmdcbiAgICAgKiBvYmplY3QgaXMgcHJvdmlkZWQgaXQgdGFrZXMgcHJlY2VkZW5jZSBvdmVyIGBfLnRlbXBsYXRlU2V0dGluZ3NgIHZhbHVlcy5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBJbiB0aGUgZGV2ZWxvcG1lbnQgYnVpbGQgYF8udGVtcGxhdGVgIHV0aWxpemVzXG4gICAgICogW3NvdXJjZVVSTHNdKGh0dHA6Ly93d3cuaHRtbDVyb2Nrcy5jb20vZW4vdHV0b3JpYWxzL2RldmVsb3BlcnRvb2xzL3NvdXJjZW1hcHMvI3RvYy1zb3VyY2V1cmwpXG4gICAgICogZm9yIGVhc2llciBkZWJ1Z2dpbmcuXG4gICAgICpcbiAgICAgKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiBvbiBwcmVjb21waWxpbmcgdGVtcGxhdGVzIHNlZVxuICAgICAqIFtsb2Rhc2gncyBjdXN0b20gYnVpbGRzIGRvY3VtZW50YXRpb25dKGh0dHBzOi8vbG9kYXNoLmNvbS9jdXN0b20tYnVpbGRzKS5cbiAgICAgKlxuICAgICAqIEZvciBtb3JlIGluZm9ybWF0aW9uIG9uIENocm9tZSBleHRlbnNpb24gc2FuZGJveGVzIHNlZVxuICAgICAqIFtDaHJvbWUncyBleHRlbnNpb25zIGRvY3VtZW50YXRpb25dKGh0dHBzOi8vZGV2ZWxvcGVyLmNocm9tZS5jb20vZXh0ZW5zaW9ucy9zYW5kYm94aW5nRXZhbCkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgU3RyaW5nXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtzdHJpbmc9JyddIFRoZSB0ZW1wbGF0ZSBzdHJpbmcuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBUaGUgb3B0aW9ucyBvYmplY3QuXG4gICAgICogQHBhcmFtIHtSZWdFeHB9IFtvcHRpb25zLmVzY2FwZV0gVGhlIEhUTUwgXCJlc2NhcGVcIiBkZWxpbWl0ZXIuXG4gICAgICogQHBhcmFtIHtSZWdFeHB9IFtvcHRpb25zLmV2YWx1YXRlXSBUaGUgXCJldmFsdWF0ZVwiIGRlbGltaXRlci5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnMuaW1wb3J0c10gQW4gb2JqZWN0IHRvIGltcG9ydCBpbnRvIHRoZSB0ZW1wbGF0ZSBhcyBmcmVlIHZhcmlhYmxlcy5cbiAgICAgKiBAcGFyYW0ge1JlZ0V4cH0gW29wdGlvbnMuaW50ZXJwb2xhdGVdIFRoZSBcImludGVycG9sYXRlXCIgZGVsaW1pdGVyLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5zb3VyY2VVUkxdIFRoZSBzb3VyY2VVUkwgb2YgdGhlIHRlbXBsYXRlJ3MgY29tcGlsZWQgc291cmNlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy52YXJpYWJsZV0gVGhlIGRhdGEgb2JqZWN0IHZhcmlhYmxlIG5hbWUuXG4gICAgICogQHBhcmFtLSB7T2JqZWN0fSBbb3RoZXJPcHRpb25zXSBFbmFibGVzIHRoZSBsZWdhY3kgYG9wdGlvbnNgIHBhcmFtIHNpZ25hdHVyZS5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIGNvbXBpbGVkIHRlbXBsYXRlIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgXCJpbnRlcnBvbGF0ZVwiIGRlbGltaXRlciB0byBjcmVhdGUgYSBjb21waWxlZCB0ZW1wbGF0ZVxuICAgICAqIHZhciBjb21waWxlZCA9IF8udGVtcGxhdGUoJ2hlbGxvIDwlPSB1c2VyICU+IScpO1xuICAgICAqIGNvbXBpbGVkKHsgJ3VzZXInOiAnZnJlZCcgfSk7XG4gICAgICogLy8gPT4gJ2hlbGxvIGZyZWQhJ1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIEhUTUwgXCJlc2NhcGVcIiBkZWxpbWl0ZXIgdG8gZXNjYXBlIGRhdGEgcHJvcGVydHkgdmFsdWVzXG4gICAgICogdmFyIGNvbXBpbGVkID0gXy50ZW1wbGF0ZSgnPGI+PCUtIHZhbHVlICU+PC9iPicpO1xuICAgICAqIGNvbXBpbGVkKHsgJ3ZhbHVlJzogJzxzY3JpcHQ+JyB9KTtcbiAgICAgKiAvLyA9PiAnPGI+Jmx0O3NjcmlwdCZndDs8L2I+J1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIFwiZXZhbHVhdGVcIiBkZWxpbWl0ZXIgdG8gZXhlY3V0ZSBKYXZhU2NyaXB0IGFuZCBnZW5lcmF0ZSBIVE1MXG4gICAgICogdmFyIGNvbXBpbGVkID0gXy50ZW1wbGF0ZSgnPCUgXy5mb3JFYWNoKHVzZXJzLCBmdW5jdGlvbih1c2VyKSB7ICU+PGxpPjwlLSB1c2VyICU+PC9saT48JSB9KTsgJT4nKTtcbiAgICAgKiBjb21waWxlZCh7ICd1c2Vycyc6IFsnZnJlZCcsICdiYXJuZXknXSB9KTtcbiAgICAgKiAvLyA9PiAnPGxpPmZyZWQ8L2xpPjxsaT5iYXJuZXk8L2xpPidcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBpbnRlcm5hbCBgcHJpbnRgIGZ1bmN0aW9uIGluIFwiZXZhbHVhdGVcIiBkZWxpbWl0ZXJzXG4gICAgICogdmFyIGNvbXBpbGVkID0gXy50ZW1wbGF0ZSgnPCUgcHJpbnQoXCJoZWxsbyBcIiArIHVzZXIpOyAlPiEnKTtcbiAgICAgKiBjb21waWxlZCh7ICd1c2VyJzogJ2Jhcm5leScgfSk7XG4gICAgICogLy8gPT4gJ2hlbGxvIGJhcm5leSEnXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgRVMgZGVsaW1pdGVyIGFzIGFuIGFsdGVybmF0aXZlIHRvIHRoZSBkZWZhdWx0IFwiaW50ZXJwb2xhdGVcIiBkZWxpbWl0ZXJcbiAgICAgKiB2YXIgY29tcGlsZWQgPSBfLnRlbXBsYXRlKCdoZWxsbyAkeyB1c2VyIH0hJyk7XG4gICAgICogY29tcGlsZWQoeyAndXNlcic6ICdwZWJibGVzJyB9KTtcbiAgICAgKiAvLyA9PiAnaGVsbG8gcGViYmxlcyEnXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBjdXN0b20gdGVtcGxhdGUgZGVsaW1pdGVyc1xuICAgICAqIF8udGVtcGxhdGVTZXR0aW5ncy5pbnRlcnBvbGF0ZSA9IC97eyhbXFxzXFxTXSs/KX19L2c7XG4gICAgICogdmFyIGNvbXBpbGVkID0gXy50ZW1wbGF0ZSgnaGVsbG8ge3sgdXNlciB9fSEnKTtcbiAgICAgKiBjb21waWxlZCh7ICd1c2VyJzogJ211c3RhY2hlJyB9KTtcbiAgICAgKiAvLyA9PiAnaGVsbG8gbXVzdGFjaGUhJ1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgYmFja3NsYXNoZXMgdG8gdHJlYXQgZGVsaW1pdGVycyBhcyBwbGFpbiB0ZXh0XG4gICAgICogdmFyIGNvbXBpbGVkID0gXy50ZW1wbGF0ZSgnPCU9IFwiXFxcXDwlLSB2YWx1ZSAlXFxcXD5cIiAlPicpO1xuICAgICAqIGNvbXBpbGVkKHsgJ3ZhbHVlJzogJ2lnbm9yZWQnIH0pO1xuICAgICAqIC8vID0+ICc8JS0gdmFsdWUgJT4nXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYGltcG9ydHNgIG9wdGlvbiB0byBpbXBvcnQgYGpRdWVyeWAgYXMgYGpxYFxuICAgICAqIHZhciB0ZXh0ID0gJzwlIGpxLmVhY2godXNlcnMsIGZ1bmN0aW9uKHVzZXIpIHsgJT48bGk+PCUtIHVzZXIgJT48L2xpPjwlIH0pOyAlPic7XG4gICAgICogdmFyIGNvbXBpbGVkID0gXy50ZW1wbGF0ZSh0ZXh0LCB7ICdpbXBvcnRzJzogeyAnanEnOiBqUXVlcnkgfSB9KTtcbiAgICAgKiBjb21waWxlZCh7ICd1c2Vycyc6IFsnZnJlZCcsICdiYXJuZXknXSB9KTtcbiAgICAgKiAvLyA9PiAnPGxpPmZyZWQ8L2xpPjxsaT5iYXJuZXk8L2xpPidcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgc291cmNlVVJMYCBvcHRpb24gdG8gc3BlY2lmeSBhIGN1c3RvbSBzb3VyY2VVUkwgZm9yIHRoZSB0ZW1wbGF0ZVxuICAgICAqIHZhciBjb21waWxlZCA9IF8udGVtcGxhdGUoJ2hlbGxvIDwlPSB1c2VyICU+IScsIHsgJ3NvdXJjZVVSTCc6ICcvYmFzaWMvZ3JlZXRpbmcuanN0JyB9KTtcbiAgICAgKiBjb21waWxlZChkYXRhKTtcbiAgICAgKiAvLyA9PiBmaW5kIHRoZSBzb3VyY2Ugb2YgXCJncmVldGluZy5qc3RcIiB1bmRlciB0aGUgU291cmNlcyB0YWIgb3IgUmVzb3VyY2VzIHBhbmVsIG9mIHRoZSB3ZWIgaW5zcGVjdG9yXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYHZhcmlhYmxlYCBvcHRpb24gdG8gZW5zdXJlIGEgd2l0aC1zdGF0ZW1lbnQgaXNuJ3QgdXNlZCBpbiB0aGUgY29tcGlsZWQgdGVtcGxhdGVcbiAgICAgKiB2YXIgY29tcGlsZWQgPSBfLnRlbXBsYXRlKCdoaSA8JT0gZGF0YS51c2VyICU+IScsIHsgJ3ZhcmlhYmxlJzogJ2RhdGEnIH0pO1xuICAgICAqIGNvbXBpbGVkLnNvdXJjZTtcbiAgICAgKiAvLyA9PiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICogLy8gICB2YXIgX190LCBfX3AgPSAnJztcbiAgICAgKiAvLyAgIF9fcCArPSAnaGkgJyArICgoX190ID0gKCBkYXRhLnVzZXIgKSkgPT0gbnVsbCA/ICcnIDogX190KSArICchJztcbiAgICAgKiAvLyAgIHJldHVybiBfX3A7XG4gICAgICogLy8gfVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBzb3VyY2VgIHByb3BlcnR5IHRvIGlubGluZSBjb21waWxlZCB0ZW1wbGF0ZXMgZm9yIG1lYW5pbmdmdWxcbiAgICAgKiAvLyBsaW5lIG51bWJlcnMgaW4gZXJyb3IgbWVzc2FnZXMgYW5kIGEgc3RhY2sgdHJhY2VcbiAgICAgKiBmcy53cml0ZUZpbGVTeW5jKHBhdGguam9pbihjd2QsICdqc3QuanMnKSwgJ1xcXG4gICAgICogICB2YXIgSlNUID0ge1xcXG4gICAgICogICAgIFwibWFpblwiOiAnICsgXy50ZW1wbGF0ZShtYWluVGV4dCkuc291cmNlICsgJ1xcXG4gICAgICogICB9O1xcXG4gICAgICogJyk7XG4gICAgICovXG4gICAgZnVuY3Rpb24gdGVtcGxhdGUoc3RyaW5nLCBvcHRpb25zLCBvdGhlck9wdGlvbnMpIHtcbiAgICAgIC8vIEJhc2VkIG9uIEpvaG4gUmVzaWcncyBgdG1wbGAgaW1wbGVtZW50YXRpb24gKGh0dHA6Ly9lam9obi5vcmcvYmxvZy9qYXZhc2NyaXB0LW1pY3JvLXRlbXBsYXRpbmcvKVxuICAgICAgLy8gYW5kIExhdXJhIERva3Rvcm92YSdzIGRvVC5qcyAoaHR0cHM6Ly9naXRodWIuY29tL29sYWRvL2RvVCkuXG4gICAgICB2YXIgc2V0dGluZ3MgPSBsb2Rhc2gudGVtcGxhdGVTZXR0aW5ncztcblxuICAgICAgaWYgKG90aGVyT3B0aW9ucyAmJiBpc0l0ZXJhdGVlQ2FsbChzdHJpbmcsIG9wdGlvbnMsIG90aGVyT3B0aW9ucykpIHtcbiAgICAgICAgb3B0aW9ucyA9IG90aGVyT3B0aW9ucyA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIHN0cmluZyA9IGJhc2VUb1N0cmluZyhzdHJpbmcpO1xuICAgICAgb3B0aW9ucyA9IGFzc2lnbldpdGgoYmFzZUFzc2lnbih7fSwgb3RoZXJPcHRpb25zIHx8IG9wdGlvbnMpLCBzZXR0aW5ncywgYXNzaWduT3duRGVmYXVsdHMpO1xuXG4gICAgICB2YXIgaW1wb3J0cyA9IGFzc2lnbldpdGgoYmFzZUFzc2lnbih7fSwgb3B0aW9ucy5pbXBvcnRzKSwgc2V0dGluZ3MuaW1wb3J0cywgYXNzaWduT3duRGVmYXVsdHMpLFxuICAgICAgICAgIGltcG9ydHNLZXlzID0ga2V5cyhpbXBvcnRzKSxcbiAgICAgICAgICBpbXBvcnRzVmFsdWVzID0gYmFzZVZhbHVlcyhpbXBvcnRzLCBpbXBvcnRzS2V5cyk7XG5cbiAgICAgIHZhciBpc0VzY2FwaW5nLFxuICAgICAgICAgIGlzRXZhbHVhdGluZyxcbiAgICAgICAgICBpbmRleCA9IDAsXG4gICAgICAgICAgaW50ZXJwb2xhdGUgPSBvcHRpb25zLmludGVycG9sYXRlIHx8IHJlTm9NYXRjaCxcbiAgICAgICAgICBzb3VyY2UgPSBcIl9fcCArPSAnXCI7XG5cbiAgICAgIC8vIENvbXBpbGUgdGhlIHJlZ2V4cCB0byBtYXRjaCBlYWNoIGRlbGltaXRlci5cbiAgICAgIHZhciByZURlbGltaXRlcnMgPSBSZWdFeHAoXG4gICAgICAgIChvcHRpb25zLmVzY2FwZSB8fCByZU5vTWF0Y2gpLnNvdXJjZSArICd8JyArXG4gICAgICAgIGludGVycG9sYXRlLnNvdXJjZSArICd8JyArXG4gICAgICAgIChpbnRlcnBvbGF0ZSA9PT0gcmVJbnRlcnBvbGF0ZSA/IHJlRXNUZW1wbGF0ZSA6IHJlTm9NYXRjaCkuc291cmNlICsgJ3wnICtcbiAgICAgICAgKG9wdGlvbnMuZXZhbHVhdGUgfHwgcmVOb01hdGNoKS5zb3VyY2UgKyAnfCQnXG4gICAgICAsICdnJyk7XG5cbiAgICAgIC8vIFVzZSBhIHNvdXJjZVVSTCBmb3IgZWFzaWVyIGRlYnVnZ2luZy5cbiAgICAgIHZhciBzb3VyY2VVUkwgPSAnLy8jIHNvdXJjZVVSTD0nICtcbiAgICAgICAgKCdzb3VyY2VVUkwnIGluIG9wdGlvbnNcbiAgICAgICAgICA/IG9wdGlvbnMuc291cmNlVVJMXG4gICAgICAgICAgOiAoJ2xvZGFzaC50ZW1wbGF0ZVNvdXJjZXNbJyArICgrK3RlbXBsYXRlQ291bnRlcikgKyAnXScpXG4gICAgICAgICkgKyAnXFxuJztcblxuICAgICAgc3RyaW5nLnJlcGxhY2UocmVEZWxpbWl0ZXJzLCBmdW5jdGlvbihtYXRjaCwgZXNjYXBlVmFsdWUsIGludGVycG9sYXRlVmFsdWUsIGVzVGVtcGxhdGVWYWx1ZSwgZXZhbHVhdGVWYWx1ZSwgb2Zmc2V0KSB7XG4gICAgICAgIGludGVycG9sYXRlVmFsdWUgfHwgKGludGVycG9sYXRlVmFsdWUgPSBlc1RlbXBsYXRlVmFsdWUpO1xuXG4gICAgICAgIC8vIEVzY2FwZSBjaGFyYWN0ZXJzIHRoYXQgY2FuJ3QgYmUgaW5jbHVkZWQgaW4gc3RyaW5nIGxpdGVyYWxzLlxuICAgICAgICBzb3VyY2UgKz0gc3RyaW5nLnNsaWNlKGluZGV4LCBvZmZzZXQpLnJlcGxhY2UocmVVbmVzY2FwZWRTdHJpbmcsIGVzY2FwZVN0cmluZ0NoYXIpO1xuXG4gICAgICAgIC8vIFJlcGxhY2UgZGVsaW1pdGVycyB3aXRoIHNuaXBwZXRzLlxuICAgICAgICBpZiAoZXNjYXBlVmFsdWUpIHtcbiAgICAgICAgICBpc0VzY2FwaW5nID0gdHJ1ZTtcbiAgICAgICAgICBzb3VyY2UgKz0gXCInICtcXG5fX2UoXCIgKyBlc2NhcGVWYWx1ZSArIFwiKSArXFxuJ1wiO1xuICAgICAgICB9XG4gICAgICAgIGlmIChldmFsdWF0ZVZhbHVlKSB7XG4gICAgICAgICAgaXNFdmFsdWF0aW5nID0gdHJ1ZTtcbiAgICAgICAgICBzb3VyY2UgKz0gXCInO1xcblwiICsgZXZhbHVhdGVWYWx1ZSArIFwiO1xcbl9fcCArPSAnXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGludGVycG9sYXRlVmFsdWUpIHtcbiAgICAgICAgICBzb3VyY2UgKz0gXCInICtcXG4oKF9fdCA9IChcIiArIGludGVycG9sYXRlVmFsdWUgKyBcIikpID09IG51bGwgPyAnJyA6IF9fdCkgK1xcbidcIjtcbiAgICAgICAgfVxuICAgICAgICBpbmRleCA9IG9mZnNldCArIG1hdGNoLmxlbmd0aDtcblxuICAgICAgICAvLyBUaGUgSlMgZW5naW5lIGVtYmVkZGVkIGluIEFkb2JlIHByb2R1Y3RzIHJlcXVpcmVzIHJldHVybmluZyB0aGUgYG1hdGNoYFxuICAgICAgICAvLyBzdHJpbmcgaW4gb3JkZXIgdG8gcHJvZHVjZSB0aGUgY29ycmVjdCBgb2Zmc2V0YCB2YWx1ZS5cbiAgICAgICAgcmV0dXJuIG1hdGNoO1xuICAgICAgfSk7XG5cbiAgICAgIHNvdXJjZSArPSBcIic7XFxuXCI7XG5cbiAgICAgIC8vIElmIGB2YXJpYWJsZWAgaXMgbm90IHNwZWNpZmllZCB3cmFwIGEgd2l0aC1zdGF0ZW1lbnQgYXJvdW5kIHRoZSBnZW5lcmF0ZWRcbiAgICAgIC8vIGNvZGUgdG8gYWRkIHRoZSBkYXRhIG9iamVjdCB0byB0aGUgdG9wIG9mIHRoZSBzY29wZSBjaGFpbi5cbiAgICAgIHZhciB2YXJpYWJsZSA9IG9wdGlvbnMudmFyaWFibGU7XG4gICAgICBpZiAoIXZhcmlhYmxlKSB7XG4gICAgICAgIHNvdXJjZSA9ICd3aXRoIChvYmopIHtcXG4nICsgc291cmNlICsgJ1xcbn1cXG4nO1xuICAgICAgfVxuICAgICAgLy8gQ2xlYW51cCBjb2RlIGJ5IHN0cmlwcGluZyBlbXB0eSBzdHJpbmdzLlxuICAgICAgc291cmNlID0gKGlzRXZhbHVhdGluZyA/IHNvdXJjZS5yZXBsYWNlKHJlRW1wdHlTdHJpbmdMZWFkaW5nLCAnJykgOiBzb3VyY2UpXG4gICAgICAgIC5yZXBsYWNlKHJlRW1wdHlTdHJpbmdNaWRkbGUsICckMScpXG4gICAgICAgIC5yZXBsYWNlKHJlRW1wdHlTdHJpbmdUcmFpbGluZywgJyQxOycpO1xuXG4gICAgICAvLyBGcmFtZSBjb2RlIGFzIHRoZSBmdW5jdGlvbiBib2R5LlxuICAgICAgc291cmNlID0gJ2Z1bmN0aW9uKCcgKyAodmFyaWFibGUgfHwgJ29iaicpICsgJykge1xcbicgK1xuICAgICAgICAodmFyaWFibGVcbiAgICAgICAgICA/ICcnXG4gICAgICAgICAgOiAnb2JqIHx8IChvYmogPSB7fSk7XFxuJ1xuICAgICAgICApICtcbiAgICAgICAgXCJ2YXIgX190LCBfX3AgPSAnJ1wiICtcbiAgICAgICAgKGlzRXNjYXBpbmdcbiAgICAgICAgICAgPyAnLCBfX2UgPSBfLmVzY2FwZSdcbiAgICAgICAgICAgOiAnJ1xuICAgICAgICApICtcbiAgICAgICAgKGlzRXZhbHVhdGluZ1xuICAgICAgICAgID8gJywgX19qID0gQXJyYXkucHJvdG90eXBlLmpvaW47XFxuJyArXG4gICAgICAgICAgICBcImZ1bmN0aW9uIHByaW50KCkgeyBfX3AgKz0gX19qLmNhbGwoYXJndW1lbnRzLCAnJykgfVxcblwiXG4gICAgICAgICAgOiAnO1xcbidcbiAgICAgICAgKSArXG4gICAgICAgIHNvdXJjZSArXG4gICAgICAgICdyZXR1cm4gX19wXFxufSc7XG5cbiAgICAgIHZhciByZXN1bHQgPSBhdHRlbXB0KGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gRnVuY3Rpb24oaW1wb3J0c0tleXMsIHNvdXJjZVVSTCArICdyZXR1cm4gJyArIHNvdXJjZSkuYXBwbHkodW5kZWZpbmVkLCBpbXBvcnRzVmFsdWVzKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBQcm92aWRlIHRoZSBjb21waWxlZCBmdW5jdGlvbidzIHNvdXJjZSBieSBpdHMgYHRvU3RyaW5nYCBtZXRob2Qgb3JcbiAgICAgIC8vIHRoZSBgc291cmNlYCBwcm9wZXJ0eSBhcyBhIGNvbnZlbmllbmNlIGZvciBpbmxpbmluZyBjb21waWxlZCB0ZW1wbGF0ZXMuXG4gICAgICByZXN1bHQuc291cmNlID0gc291cmNlO1xuICAgICAgaWYgKGlzRXJyb3IocmVzdWx0KSkge1xuICAgICAgICB0aHJvdyByZXN1bHQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgbGVhZGluZyBhbmQgdHJhaWxpbmcgd2hpdGVzcGFjZSBvciBzcGVjaWZpZWQgY2hhcmFjdGVycyBmcm9tIGBzdHJpbmdgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbc3RyaW5nPScnXSBUaGUgc3RyaW5nIHRvIHRyaW0uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtjaGFycz13aGl0ZXNwYWNlXSBUaGUgY2hhcmFjdGVycyB0byB0cmltLlxuICAgICAqIEBwYXJhbS0ge09iamVjdH0gW2d1YXJkXSBFbmFibGVzIHVzZSBhcyBhIGNhbGxiYWNrIGZvciBmdW5jdGlvbnMgbGlrZSBgXy5tYXBgLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHRyaW1tZWQgc3RyaW5nLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnRyaW0oJyAgYWJjICAnKTtcbiAgICAgKiAvLyA9PiAnYWJjJ1xuICAgICAqXG4gICAgICogXy50cmltKCctXy1hYmMtXy0nLCAnXy0nKTtcbiAgICAgKiAvLyA9PiAnYWJjJ1xuICAgICAqXG4gICAgICogXy5tYXAoWycgIGZvbyAgJywgJyAgYmFyICAnXSwgXy50cmltKTtcbiAgICAgKiAvLyA9PiBbJ2ZvbycsICdiYXInXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHRyaW0oc3RyaW5nLCBjaGFycywgZ3VhcmQpIHtcbiAgICAgIHZhciB2YWx1ZSA9IHN0cmluZztcbiAgICAgIHN0cmluZyA9IGJhc2VUb1N0cmluZyhzdHJpbmcpO1xuICAgICAgaWYgKCFzdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIHN0cmluZztcbiAgICAgIH1cbiAgICAgIGlmIChndWFyZCA/IGlzSXRlcmF0ZWVDYWxsKHZhbHVlLCBjaGFycywgZ3VhcmQpIDogY2hhcnMgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gc3RyaW5nLnNsaWNlKHRyaW1tZWRMZWZ0SW5kZXgoc3RyaW5nKSwgdHJpbW1lZFJpZ2h0SW5kZXgoc3RyaW5nKSArIDEpO1xuICAgICAgfVxuICAgICAgY2hhcnMgPSAoY2hhcnMgKyAnJyk7XG4gICAgICByZXR1cm4gc3RyaW5nLnNsaWNlKGNoYXJzTGVmdEluZGV4KHN0cmluZywgY2hhcnMpLCBjaGFyc1JpZ2h0SW5kZXgoc3RyaW5nLCBjaGFycykgKyAxKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGxlYWRpbmcgd2hpdGVzcGFjZSBvciBzcGVjaWZpZWQgY2hhcmFjdGVycyBmcm9tIGBzdHJpbmdgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbc3RyaW5nPScnXSBUaGUgc3RyaW5nIHRvIHRyaW0uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtjaGFycz13aGl0ZXNwYWNlXSBUaGUgY2hhcmFjdGVycyB0byB0cmltLlxuICAgICAqIEBwYXJhbS0ge09iamVjdH0gW2d1YXJkXSBFbmFibGVzIHVzZSBhcyBhIGNhbGxiYWNrIGZvciBmdW5jdGlvbnMgbGlrZSBgXy5tYXBgLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHRyaW1tZWQgc3RyaW5nLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnRyaW1MZWZ0KCcgIGFiYyAgJyk7XG4gICAgICogLy8gPT4gJ2FiYyAgJ1xuICAgICAqXG4gICAgICogXy50cmltTGVmdCgnLV8tYWJjLV8tJywgJ18tJyk7XG4gICAgICogLy8gPT4gJ2FiYy1fLSdcbiAgICAgKi9cbiAgICBmdW5jdGlvbiB0cmltTGVmdChzdHJpbmcsIGNoYXJzLCBndWFyZCkge1xuICAgICAgdmFyIHZhbHVlID0gc3RyaW5nO1xuICAgICAgc3RyaW5nID0gYmFzZVRvU3RyaW5nKHN0cmluZyk7XG4gICAgICBpZiAoIXN0cmluZykge1xuICAgICAgICByZXR1cm4gc3RyaW5nO1xuICAgICAgfVxuICAgICAgaWYgKGd1YXJkID8gaXNJdGVyYXRlZUNhbGwodmFsdWUsIGNoYXJzLCBndWFyZCkgOiBjaGFycyA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBzdHJpbmcuc2xpY2UodHJpbW1lZExlZnRJbmRleChzdHJpbmcpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzdHJpbmcuc2xpY2UoY2hhcnNMZWZ0SW5kZXgoc3RyaW5nLCAoY2hhcnMgKyAnJykpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRyYWlsaW5nIHdoaXRlc3BhY2Ugb3Igc3BlY2lmaWVkIGNoYXJhY3RlcnMgZnJvbSBgc3RyaW5nYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZz0nJ10gVGhlIHN0cmluZyB0byB0cmltLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbY2hhcnM9d2hpdGVzcGFjZV0gVGhlIGNoYXJhY3RlcnMgdG8gdHJpbS5cbiAgICAgKiBAcGFyYW0tIHtPYmplY3R9IFtndWFyZF0gRW5hYmxlcyB1c2UgYXMgYSBjYWxsYmFjayBmb3IgZnVuY3Rpb25zIGxpa2UgYF8ubWFwYC5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSB0cmltbWVkIHN0cmluZy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy50cmltUmlnaHQoJyAgYWJjICAnKTtcbiAgICAgKiAvLyA9PiAnICBhYmMnXG4gICAgICpcbiAgICAgKiBfLnRyaW1SaWdodCgnLV8tYWJjLV8tJywgJ18tJyk7XG4gICAgICogLy8gPT4gJy1fLWFiYydcbiAgICAgKi9cbiAgICBmdW5jdGlvbiB0cmltUmlnaHQoc3RyaW5nLCBjaGFycywgZ3VhcmQpIHtcbiAgICAgIHZhciB2YWx1ZSA9IHN0cmluZztcbiAgICAgIHN0cmluZyA9IGJhc2VUb1N0cmluZyhzdHJpbmcpO1xuICAgICAgaWYgKCFzdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIHN0cmluZztcbiAgICAgIH1cbiAgICAgIGlmIChndWFyZCA/IGlzSXRlcmF0ZWVDYWxsKHZhbHVlLCBjaGFycywgZ3VhcmQpIDogY2hhcnMgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gc3RyaW5nLnNsaWNlKDAsIHRyaW1tZWRSaWdodEluZGV4KHN0cmluZykgKyAxKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzdHJpbmcuc2xpY2UoMCwgY2hhcnNSaWdodEluZGV4KHN0cmluZywgKGNoYXJzICsgJycpKSArIDEpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRydW5jYXRlcyBgc3RyaW5nYCBpZiBpdCdzIGxvbmdlciB0aGFuIHRoZSBnaXZlbiBtYXhpbXVtIHN0cmluZyBsZW5ndGguXG4gICAgICogVGhlIGxhc3QgY2hhcmFjdGVycyBvZiB0aGUgdHJ1bmNhdGVkIHN0cmluZyBhcmUgcmVwbGFjZWQgd2l0aCB0aGUgb21pc3Npb25cbiAgICAgKiBzdHJpbmcgd2hpY2ggZGVmYXVsdHMgdG8gXCIuLi5cIi5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZz0nJ10gVGhlIHN0cmluZyB0byB0cnVuY2F0ZS5cbiAgICAgKiBAcGFyYW0ge09iamVjdHxudW1iZXJ9IFtvcHRpb25zXSBUaGUgb3B0aW9ucyBvYmplY3Qgb3IgbWF4aW11bSBzdHJpbmcgbGVuZ3RoLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5sZW5ndGg9MzBdIFRoZSBtYXhpbXVtIHN0cmluZyBsZW5ndGguXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLm9taXNzaW9uPScuLi4nXSBUaGUgc3RyaW5nIHRvIGluZGljYXRlIHRleHQgaXMgb21pdHRlZC5cbiAgICAgKiBAcGFyYW0ge1JlZ0V4cHxzdHJpbmd9IFtvcHRpb25zLnNlcGFyYXRvcl0gVGhlIHNlcGFyYXRvciBwYXR0ZXJuIHRvIHRydW5jYXRlIHRvLlxuICAgICAqIEBwYXJhbS0ge09iamVjdH0gW2d1YXJkXSBFbmFibGVzIHVzZSBhcyBhIGNhbGxiYWNrIGZvciBmdW5jdGlvbnMgbGlrZSBgXy5tYXBgLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHRydW5jYXRlZCBzdHJpbmcuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8udHJ1bmMoJ2hpLWRpZGRseS1obyB0aGVyZSwgbmVpZ2hib3Jpbm8nKTtcbiAgICAgKiAvLyA9PiAnaGktZGlkZGx5LWhvIHRoZXJlLCBuZWlnaGJvLi4uJ1xuICAgICAqXG4gICAgICogXy50cnVuYygnaGktZGlkZGx5LWhvIHRoZXJlLCBuZWlnaGJvcmlubycsIDI0KTtcbiAgICAgKiAvLyA9PiAnaGktZGlkZGx5LWhvIHRoZXJlLCBuLi4uJ1xuICAgICAqXG4gICAgICogXy50cnVuYygnaGktZGlkZGx5LWhvIHRoZXJlLCBuZWlnaGJvcmlubycsIHtcbiAgICAgKiAgICdsZW5ndGgnOiAyNCxcbiAgICAgKiAgICdzZXBhcmF0b3InOiAnICdcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiAnaGktZGlkZGx5LWhvIHRoZXJlLC4uLidcbiAgICAgKlxuICAgICAqIF8udHJ1bmMoJ2hpLWRpZGRseS1obyB0aGVyZSwgbmVpZ2hib3Jpbm8nLCB7XG4gICAgICogICAnbGVuZ3RoJzogMjQsXG4gICAgICogICAnc2VwYXJhdG9yJzogLyw/ICsvXG4gICAgICogfSk7XG4gICAgICogLy8gPT4gJ2hpLWRpZGRseS1obyB0aGVyZS4uLidcbiAgICAgKlxuICAgICAqIF8udHJ1bmMoJ2hpLWRpZGRseS1obyB0aGVyZSwgbmVpZ2hib3Jpbm8nLCB7XG4gICAgICogICAnb21pc3Npb24nOiAnIFsuLi5dJ1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+ICdoaS1kaWRkbHktaG8gdGhlcmUsIG5laWcgWy4uLl0nXG4gICAgICovXG4gICAgZnVuY3Rpb24gdHJ1bmMoc3RyaW5nLCBvcHRpb25zLCBndWFyZCkge1xuICAgICAgaWYgKGd1YXJkICYmIGlzSXRlcmF0ZWVDYWxsKHN0cmluZywgb3B0aW9ucywgZ3VhcmQpKSB7XG4gICAgICAgIG9wdGlvbnMgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICB2YXIgbGVuZ3RoID0gREVGQVVMVF9UUlVOQ19MRU5HVEgsXG4gICAgICAgICAgb21pc3Npb24gPSBERUZBVUxUX1RSVU5DX09NSVNTSU9OO1xuXG4gICAgICBpZiAob3B0aW9ucyAhPSBudWxsKSB7XG4gICAgICAgIGlmIChpc09iamVjdChvcHRpb25zKSkge1xuICAgICAgICAgIHZhciBzZXBhcmF0b3IgPSAnc2VwYXJhdG9yJyBpbiBvcHRpb25zID8gb3B0aW9ucy5zZXBhcmF0b3IgOiBzZXBhcmF0b3I7XG4gICAgICAgICAgbGVuZ3RoID0gJ2xlbmd0aCcgaW4gb3B0aW9ucyA/ICgrb3B0aW9ucy5sZW5ndGggfHwgMCkgOiBsZW5ndGg7XG4gICAgICAgICAgb21pc3Npb24gPSAnb21pc3Npb24nIGluIG9wdGlvbnMgPyBiYXNlVG9TdHJpbmcob3B0aW9ucy5vbWlzc2lvbikgOiBvbWlzc2lvbjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsZW5ndGggPSArb3B0aW9ucyB8fCAwO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBzdHJpbmcgPSBiYXNlVG9TdHJpbmcoc3RyaW5nKTtcbiAgICAgIGlmIChsZW5ndGggPj0gc3RyaW5nLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gc3RyaW5nO1xuICAgICAgfVxuICAgICAgdmFyIGVuZCA9IGxlbmd0aCAtIG9taXNzaW9uLmxlbmd0aDtcbiAgICAgIGlmIChlbmQgPCAxKSB7XG4gICAgICAgIHJldHVybiBvbWlzc2lvbjtcbiAgICAgIH1cbiAgICAgIHZhciByZXN1bHQgPSBzdHJpbmcuc2xpY2UoMCwgZW5kKTtcbiAgICAgIGlmIChzZXBhcmF0b3IgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gcmVzdWx0ICsgb21pc3Npb247XG4gICAgICB9XG4gICAgICBpZiAoaXNSZWdFeHAoc2VwYXJhdG9yKSkge1xuICAgICAgICBpZiAoc3RyaW5nLnNsaWNlKGVuZCkuc2VhcmNoKHNlcGFyYXRvcikpIHtcbiAgICAgICAgICB2YXIgbWF0Y2gsXG4gICAgICAgICAgICAgIG5ld0VuZCxcbiAgICAgICAgICAgICAgc3Vic3RyaW5nID0gc3RyaW5nLnNsaWNlKDAsIGVuZCk7XG5cbiAgICAgICAgICBpZiAoIXNlcGFyYXRvci5nbG9iYWwpIHtcbiAgICAgICAgICAgIHNlcGFyYXRvciA9IFJlZ0V4cChzZXBhcmF0b3Iuc291cmNlLCAocmVGbGFncy5leGVjKHNlcGFyYXRvcikgfHwgJycpICsgJ2cnKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2VwYXJhdG9yLmxhc3RJbmRleCA9IDA7XG4gICAgICAgICAgd2hpbGUgKChtYXRjaCA9IHNlcGFyYXRvci5leGVjKHN1YnN0cmluZykpKSB7XG4gICAgICAgICAgICBuZXdFbmQgPSBtYXRjaC5pbmRleDtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVzdWx0ID0gcmVzdWx0LnNsaWNlKDAsIG5ld0VuZCA9PSBudWxsID8gZW5kIDogbmV3RW5kKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChzdHJpbmcuaW5kZXhPZihzZXBhcmF0b3IsIGVuZCkgIT0gZW5kKSB7XG4gICAgICAgIHZhciBpbmRleCA9IHJlc3VsdC5sYXN0SW5kZXhPZihzZXBhcmF0b3IpO1xuICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC5zbGljZSgwLCBpbmRleCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQgKyBvbWlzc2lvbjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgaW52ZXJzZSBvZiBgXy5lc2NhcGVgOyB0aGlzIG1ldGhvZCBjb252ZXJ0cyB0aGUgSFRNTCBlbnRpdGllc1xuICAgICAqIGAmYW1wO2AsIGAmbHQ7YCwgYCZndDtgLCBgJnF1b3Q7YCwgYCYjMzk7YCwgYW5kIGAmIzk2O2AgaW4gYHN0cmluZ2AgdG8gdGhlaXJcbiAgICAgKiBjb3JyZXNwb25kaW5nIGNoYXJhY3RlcnMuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogTm8gb3RoZXIgSFRNTCBlbnRpdGllcyBhcmUgdW5lc2NhcGVkLiBUbyB1bmVzY2FwZSBhZGRpdGlvbmFsIEhUTUxcbiAgICAgKiBlbnRpdGllcyB1c2UgYSB0aGlyZC1wYXJ0eSBsaWJyYXJ5IGxpa2UgW19oZV9dKGh0dHBzOi8vbXRocy5iZS9oZSkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgU3RyaW5nXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtzdHJpbmc9JyddIFRoZSBzdHJpbmcgdG8gdW5lc2NhcGUuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgdW5lc2NhcGVkIHN0cmluZy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy51bmVzY2FwZSgnZnJlZCwgYmFybmV5LCAmYW1wOyBwZWJibGVzJyk7XG4gICAgICogLy8gPT4gJ2ZyZWQsIGJhcm5leSwgJiBwZWJibGVzJ1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIHVuZXNjYXBlKHN0cmluZykge1xuICAgICAgc3RyaW5nID0gYmFzZVRvU3RyaW5nKHN0cmluZyk7XG4gICAgICByZXR1cm4gKHN0cmluZyAmJiByZUhhc0VzY2FwZWRIdG1sLnRlc3Qoc3RyaW5nKSlcbiAgICAgICAgPyBzdHJpbmcucmVwbGFjZShyZUVzY2FwZWRIdG1sLCB1bmVzY2FwZUh0bWxDaGFyKVxuICAgICAgICA6IHN0cmluZztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTcGxpdHMgYHN0cmluZ2AgaW50byBhbiBhcnJheSBvZiBpdHMgd29yZHMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgU3RyaW5nXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtzdHJpbmc9JyddIFRoZSBzdHJpbmcgdG8gaW5zcGVjdC5cbiAgICAgKiBAcGFyYW0ge1JlZ0V4cHxzdHJpbmd9IFtwYXR0ZXJuXSBUaGUgcGF0dGVybiB0byBtYXRjaCB3b3Jkcy5cbiAgICAgKiBAcGFyYW0tIHtPYmplY3R9IFtndWFyZF0gRW5hYmxlcyB1c2UgYXMgYSBjYWxsYmFjayBmb3IgZnVuY3Rpb25zIGxpa2UgYF8ubWFwYC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHdvcmRzIG9mIGBzdHJpbmdgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLndvcmRzKCdmcmVkLCBiYXJuZXksICYgcGViYmxlcycpO1xuICAgICAqIC8vID0+IFsnZnJlZCcsICdiYXJuZXknLCAncGViYmxlcyddXG4gICAgICpcbiAgICAgKiBfLndvcmRzKCdmcmVkLCBiYXJuZXksICYgcGViYmxlcycsIC9bXiwgXSsvZyk7XG4gICAgICogLy8gPT4gWydmcmVkJywgJ2Jhcm5leScsICcmJywgJ3BlYmJsZXMnXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHdvcmRzKHN0cmluZywgcGF0dGVybiwgZ3VhcmQpIHtcbiAgICAgIGlmIChndWFyZCAmJiBpc0l0ZXJhdGVlQ2FsbChzdHJpbmcsIHBhdHRlcm4sIGd1YXJkKSkge1xuICAgICAgICBwYXR0ZXJuID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgc3RyaW5nID0gYmFzZVRvU3RyaW5nKHN0cmluZyk7XG4gICAgICByZXR1cm4gc3RyaW5nLm1hdGNoKHBhdHRlcm4gfHwgcmVXb3JkcykgfHwgW107XG4gICAgfVxuXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgLyoqXG4gICAgICogQXR0ZW1wdHMgdG8gaW52b2tlIGBmdW5jYCwgcmV0dXJuaW5nIGVpdGhlciB0aGUgcmVzdWx0IG9yIHRoZSBjYXVnaHQgZXJyb3JcbiAgICAgKiBvYmplY3QuIEFueSBhZGRpdGlvbmFsIGFyZ3VtZW50cyBhcmUgcHJvdmlkZWQgdG8gYGZ1bmNgIHdoZW4gaXQgaXMgaW52b2tlZC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBVdGlsaXR5XG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gYXR0ZW1wdC5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgYGZ1bmNgIHJlc3VsdCBvciBlcnJvciBvYmplY3QuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIC8vIGF2b2lkIHRocm93aW5nIGVycm9ycyBmb3IgaW52YWxpZCBzZWxlY3RvcnNcbiAgICAgKiB2YXIgZWxlbWVudHMgPSBfLmF0dGVtcHQoZnVuY3Rpb24oc2VsZWN0b3IpIHtcbiAgICAgKiAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcbiAgICAgKiB9LCAnPl8+Jyk7XG4gICAgICpcbiAgICAgKiBpZiAoXy5pc0Vycm9yKGVsZW1lbnRzKSkge1xuICAgICAqICAgZWxlbWVudHMgPSBbXTtcbiAgICAgKiB9XG4gICAgICovXG4gICAgdmFyIGF0dGVtcHQgPSByZXN0UGFyYW0oZnVuY3Rpb24oZnVuYywgYXJncykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcbiAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICByZXR1cm4gaXNFcnJvcihlKSA/IGUgOiBuZXcgRXJyb3IoZSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBpbnZva2VzIGBmdW5jYCB3aXRoIHRoZSBgdGhpc2AgYmluZGluZyBvZiBgdGhpc0FyZ2BcbiAgICAgKiBhbmQgYXJndW1lbnRzIG9mIHRoZSBjcmVhdGVkIGZ1bmN0aW9uLiBJZiBgZnVuY2AgaXMgYSBwcm9wZXJ0eSBuYW1lIHRoZVxuICAgICAqIGNyZWF0ZWQgY2FsbGJhY2sgcmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUgZm9yIGEgZ2l2ZW4gZWxlbWVudC4gSWYgYGZ1bmNgXG4gICAgICogaXMgYW4gb2JqZWN0IHRoZSBjcmVhdGVkIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGNvbnRhaW5cbiAgICAgKiB0aGUgZXF1aXZhbGVudCBvYmplY3QgcHJvcGVydGllcywgb3RoZXJ3aXNlIGl0IHJldHVybnMgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBhbGlhcyBpdGVyYXRlZVxuICAgICAqIEBjYXRlZ29yeSBVdGlsaXR5XG4gICAgICogQHBhcmFtIHsqfSBbZnVuYz1fLmlkZW50aXR5XSBUaGUgdmFsdWUgdG8gY29udmVydCB0byBhIGNhbGxiYWNrLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgZnVuY2AuXG4gICAgICogQHBhcmFtLSB7T2JqZWN0fSBbZ3VhcmRdIEVuYWJsZXMgdXNlIGFzIGEgY2FsbGJhY2sgZm9yIGZ1bmN0aW9ucyBsaWtlIGBfLm1hcGAuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBjYWxsYmFjay5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIHVzZXJzID0gW1xuICAgICAqICAgeyAndXNlcic6ICdiYXJuZXknLCAnYWdlJzogMzYgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAnZnJlZCcsICAgJ2FnZSc6IDQwIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogLy8gd3JhcCB0byBjcmVhdGUgY3VzdG9tIGNhbGxiYWNrIHNob3J0aGFuZHNcbiAgICAgKiBfLmNhbGxiYWNrID0gXy53cmFwKF8uY2FsbGJhY2ssIGZ1bmN0aW9uKGNhbGxiYWNrLCBmdW5jLCB0aGlzQXJnKSB7XG4gICAgICogICB2YXIgbWF0Y2ggPSAvXiguKz8pX18oW2dsXXQpKC4rKSQvLmV4ZWMoZnVuYyk7XG4gICAgICogICBpZiAoIW1hdGNoKSB7XG4gICAgICogICAgIHJldHVybiBjYWxsYmFjayhmdW5jLCB0aGlzQXJnKTtcbiAgICAgKiAgIH1cbiAgICAgKiAgIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcbiAgICAgKiAgICAgcmV0dXJuIG1hdGNoWzJdID09ICdndCdcbiAgICAgKiAgICAgICA/IG9iamVjdFttYXRjaFsxXV0gPiBtYXRjaFszXVxuICAgICAqICAgICAgIDogb2JqZWN0W21hdGNoWzFdXSA8IG1hdGNoWzNdO1xuICAgICAqICAgfTtcbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIF8uZmlsdGVyKHVzZXJzLCAnYWdlX19ndDM2Jyk7XG4gICAgICogLy8gPT4gW3sgJ3VzZXInOiAnZnJlZCcsICdhZ2UnOiA0MCB9XVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNhbGxiYWNrKGZ1bmMsIHRoaXNBcmcsIGd1YXJkKSB7XG4gICAgICBpZiAoZ3VhcmQgJiYgaXNJdGVyYXRlZUNhbGwoZnVuYywgdGhpc0FyZywgZ3VhcmQpKSB7XG4gICAgICAgIHRoaXNBcmcgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gaXNPYmplY3RMaWtlKGZ1bmMpXG4gICAgICAgID8gbWF0Y2hlcyhmdW5jKVxuICAgICAgICA6IGJhc2VDYWxsYmFjayhmdW5jLCB0aGlzQXJnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGB2YWx1ZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgVXRpbGl0eVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHJldHVybiBmcm9tIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBvYmplY3QgPSB7ICd1c2VyJzogJ2ZyZWQnIH07XG4gICAgICogdmFyIGdldHRlciA9IF8uY29uc3RhbnQob2JqZWN0KTtcbiAgICAgKlxuICAgICAqIGdldHRlcigpID09PSBvYmplY3Q7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNvbnN0YW50KHZhbHVlKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgcmV0dXJucyB0aGUgZmlyc3QgYXJndW1lbnQgcHJvdmlkZWQgdG8gaXQuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgVXRpbGl0eVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgQW55IHZhbHVlLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIGB2YWx1ZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBvYmplY3QgPSB7ICd1c2VyJzogJ2ZyZWQnIH07XG4gICAgICpcbiAgICAgKiBfLmlkZW50aXR5KG9iamVjdCkgPT09IG9iamVjdDtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaWRlbnRpdHkodmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBwZXJmb3JtcyBhIGRlZXAgY29tcGFyaXNvbiBiZXR3ZWVuIGEgZ2l2ZW4gb2JqZWN0XG4gICAgICogYW5kIGBzb3VyY2VgLCByZXR1cm5pbmcgYHRydWVgIGlmIHRoZSBnaXZlbiBvYmplY3QgaGFzIGVxdWl2YWxlbnQgcHJvcGVydHlcbiAgICAgKiB2YWx1ZXMsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBzdXBwb3J0cyBjb21wYXJpbmcgYXJyYXlzLCBib29sZWFucywgYERhdGVgIG9iamVjdHMsXG4gICAgICogbnVtYmVycywgYE9iamVjdGAgb2JqZWN0cywgcmVnZXhlcywgYW5kIHN0cmluZ3MuIE9iamVjdHMgYXJlIGNvbXBhcmVkIGJ5XG4gICAgICogdGhlaXIgb3duLCBub3QgaW5oZXJpdGVkLCBlbnVtZXJhYmxlIHByb3BlcnRpZXMuIEZvciBjb21wYXJpbmcgYSBzaW5nbGVcbiAgICAgKiBvd24gb3IgaW5oZXJpdGVkIHByb3BlcnR5IHZhbHVlIHNlZSBgXy5tYXRjaGVzUHJvcGVydHlgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFV0aWxpdHlcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gc291cmNlIFRoZSBvYmplY3Qgb2YgcHJvcGVydHkgdmFsdWVzIHRvIG1hdGNoLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgdXNlcnMgPSBbXG4gICAgICogICB7ICd1c2VyJzogJ2Jhcm5leScsICdhZ2UnOiAzNiwgJ2FjdGl2ZSc6IHRydWUgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAnZnJlZCcsICAgJ2FnZSc6IDQwLCAnYWN0aXZlJzogZmFsc2UgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiBfLmZpbHRlcih1c2VycywgXy5tYXRjaGVzKHsgJ2FnZSc6IDQwLCAnYWN0aXZlJzogZmFsc2UgfSkpO1xuICAgICAqIC8vID0+IFt7ICd1c2VyJzogJ2ZyZWQnLCAnYWdlJzogNDAsICdhY3RpdmUnOiBmYWxzZSB9XVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1hdGNoZXMoc291cmNlKSB7XG4gICAgICByZXR1cm4gYmFzZU1hdGNoZXMoYmFzZUNsb25lKHNvdXJjZSwgdHJ1ZSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGNvbXBhcmVzIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiBgcGF0aGAgb24gYSBnaXZlblxuICAgICAqIG9iamVjdCB0byBgdmFsdWVgLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoaXMgbWV0aG9kIHN1cHBvcnRzIGNvbXBhcmluZyBhcnJheXMsIGJvb2xlYW5zLCBgRGF0ZWAgb2JqZWN0cyxcbiAgICAgKiBudW1iZXJzLCBgT2JqZWN0YCBvYmplY3RzLCByZWdleGVzLCBhbmQgc3RyaW5ncy4gT2JqZWN0cyBhcmUgY29tcGFyZWQgYnlcbiAgICAgKiB0aGVpciBvd24sIG5vdCBpbmhlcml0ZWQsIGVudW1lcmFibGUgcHJvcGVydGllcy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBVdGlsaXR5XG4gICAgICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAgICAgKiBAcGFyYW0geyp9IHNyY1ZhbHVlIFRoZSB2YWx1ZSB0byBtYXRjaC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIHVzZXJzID0gW1xuICAgICAqICAgeyAndXNlcic6ICdiYXJuZXknIH0sXG4gICAgICogICB7ICd1c2VyJzogJ2ZyZWQnIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogXy5maW5kKHVzZXJzLCBfLm1hdGNoZXNQcm9wZXJ0eSgndXNlcicsICdmcmVkJykpO1xuICAgICAqIC8vID0+IHsgJ3VzZXInOiAnZnJlZCcgfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1hdGNoZXNQcm9wZXJ0eShwYXRoLCBzcmNWYWx1ZSkge1xuICAgICAgcmV0dXJuIGJhc2VNYXRjaGVzUHJvcGVydHkocGF0aCwgYmFzZUNsb25lKHNyY1ZhbHVlLCB0cnVlKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgaW52b2tlcyB0aGUgbWV0aG9kIGF0IGBwYXRoYCBvbiBhIGdpdmVuIG9iamVjdC5cbiAgICAgKiBBbnkgYWRkaXRpb25hbCBhcmd1bWVudHMgYXJlIHByb3ZpZGVkIHRvIHRoZSBpbnZva2VkIG1ldGhvZC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBVdGlsaXR5XG4gICAgICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIG1ldGhvZCB0byBpbnZva2UuXG4gICAgICogQHBhcmFtIHsuLi4qfSBbYXJnc10gVGhlIGFyZ3VtZW50cyB0byBpbnZva2UgdGhlIG1ldGhvZCB3aXRoLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0cyA9IFtcbiAgICAgKiAgIHsgJ2EnOiB7ICdiJzogeyAnYyc6IF8uY29uc3RhbnQoMikgfSB9IH0sXG4gICAgICogICB7ICdhJzogeyAnYic6IHsgJ2MnOiBfLmNvbnN0YW50KDEpIH0gfSB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIF8ubWFwKG9iamVjdHMsIF8ubWV0aG9kKCdhLmIuYycpKTtcbiAgICAgKiAvLyA9PiBbMiwgMV1cbiAgICAgKlxuICAgICAqIF8uaW52b2tlKF8uc29ydEJ5KG9iamVjdHMsIF8ubWV0aG9kKFsnYScsICdiJywgJ2MnXSkpLCAnYS5iLmMnKTtcbiAgICAgKiAvLyA9PiBbMSwgMl1cbiAgICAgKi9cbiAgICB2YXIgbWV0aG9kID0gcmVzdFBhcmFtKGZ1bmN0aW9uKHBhdGgsIGFyZ3MpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZVBhdGgob2JqZWN0LCBwYXRoLCBhcmdzKTtcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgb3Bwb3NpdGUgb2YgYF8ubWV0aG9kYDsgdGhpcyBtZXRob2QgY3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgaW52b2tlc1xuICAgICAqIHRoZSBtZXRob2QgYXQgYSBnaXZlbiBwYXRoIG9uIGBvYmplY3RgLiBBbnkgYWRkaXRpb25hbCBhcmd1bWVudHMgYXJlXG4gICAgICogcHJvdmlkZWQgdG8gdGhlIGludm9rZWQgbWV0aG9kLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFV0aWxpdHlcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gICAgICogQHBhcmFtIHsuLi4qfSBbYXJnc10gVGhlIGFyZ3VtZW50cyB0byBpbnZva2UgdGhlIG1ldGhvZCB3aXRoLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgYXJyYXkgPSBfLnRpbWVzKDMsIF8uY29uc3RhbnQpLFxuICAgICAqICAgICBvYmplY3QgPSB7ICdhJzogYXJyYXksICdiJzogYXJyYXksICdjJzogYXJyYXkgfTtcbiAgICAgKlxuICAgICAqIF8ubWFwKFsnYVsyXScsICdjWzBdJ10sIF8ubWV0aG9kT2Yob2JqZWN0KSk7XG4gICAgICogLy8gPT4gWzIsIDBdXG4gICAgICpcbiAgICAgKiBfLm1hcChbWydhJywgJzInXSwgWydjJywgJzAnXV0sIF8ubWV0aG9kT2Yob2JqZWN0KSk7XG4gICAgICogLy8gPT4gWzIsIDBdXG4gICAgICovXG4gICAgdmFyIG1ldGhvZE9mID0gcmVzdFBhcmFtKGZ1bmN0aW9uKG9iamVjdCwgYXJncykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHBhdGgpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZVBhdGgob2JqZWN0LCBwYXRoLCBhcmdzKTtcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGFsbCBvd24gZW51bWVyYWJsZSBmdW5jdGlvbiBwcm9wZXJ0aWVzIG9mIGEgc291cmNlIG9iamVjdCB0byB0aGVcbiAgICAgKiBkZXN0aW5hdGlvbiBvYmplY3QuIElmIGBvYmplY3RgIGlzIGEgZnVuY3Rpb24gdGhlbiBtZXRob2RzIGFyZSBhZGRlZCB0b1xuICAgICAqIGl0cyBwcm90b3R5cGUgYXMgd2VsbC5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBVc2UgYF8ucnVuSW5Db250ZXh0YCB0byBjcmVhdGUgYSBwcmlzdGluZSBgbG9kYXNoYCBmdW5jdGlvbiB0b1xuICAgICAqIGF2b2lkIGNvbmZsaWN0cyBjYXVzZWQgYnkgbW9kaWZ5aW5nIHRoZSBvcmlnaW5hbC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBVdGlsaXR5XG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R9IFtvYmplY3Q9bG9kYXNoXSBUaGUgZGVzdGluYXRpb24gb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgVGhlIG9iamVjdCBvZiBmdW5jdGlvbnMgdG8gYWRkLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gVGhlIG9wdGlvbnMgb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuY2hhaW49dHJ1ZV0gU3BlY2lmeSB3aGV0aGVyIHRoZSBmdW5jdGlvbnMgYWRkZWRcbiAgICAgKiAgYXJlIGNoYWluYWJsZS5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb258T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBmdW5jdGlvbiB2b3dlbHMoc3RyaW5nKSB7XG4gICAgICogICByZXR1cm4gXy5maWx0ZXIoc3RyaW5nLCBmdW5jdGlvbih2KSB7XG4gICAgICogICAgIHJldHVybiAvW2FlaW91XS9pLnRlc3Qodik7XG4gICAgICogICB9KTtcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBfLm1peGluKHsgJ3Zvd2Vscyc6IHZvd2VscyB9KTtcbiAgICAgKiBfLnZvd2VscygnZnJlZCcpO1xuICAgICAqIC8vID0+IFsnZSddXG4gICAgICpcbiAgICAgKiBfKCdmcmVkJykudm93ZWxzKCkudmFsdWUoKTtcbiAgICAgKiAvLyA9PiBbJ2UnXVxuICAgICAqXG4gICAgICogXy5taXhpbih7ICd2b3dlbHMnOiB2b3dlbHMgfSwgeyAnY2hhaW4nOiBmYWxzZSB9KTtcbiAgICAgKiBfKCdmcmVkJykudm93ZWxzKCk7XG4gICAgICogLy8gPT4gWydlJ11cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBtaXhpbihvYmplY3QsIHNvdXJjZSwgb3B0aW9ucykge1xuICAgICAgaWYgKG9wdGlvbnMgPT0gbnVsbCkge1xuICAgICAgICB2YXIgaXNPYmogPSBpc09iamVjdChzb3VyY2UpLFxuICAgICAgICAgICAgcHJvcHMgPSBpc09iaiA/IGtleXMoc291cmNlKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIG1ldGhvZE5hbWVzID0gKHByb3BzICYmIHByb3BzLmxlbmd0aCkgPyBiYXNlRnVuY3Rpb25zKHNvdXJjZSwgcHJvcHMpIDogdW5kZWZpbmVkO1xuXG4gICAgICAgIGlmICghKG1ldGhvZE5hbWVzID8gbWV0aG9kTmFtZXMubGVuZ3RoIDogaXNPYmopKSB7XG4gICAgICAgICAgbWV0aG9kTmFtZXMgPSBmYWxzZTtcbiAgICAgICAgICBvcHRpb25zID0gc291cmNlO1xuICAgICAgICAgIHNvdXJjZSA9IG9iamVjdDtcbiAgICAgICAgICBvYmplY3QgPSB0aGlzO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoIW1ldGhvZE5hbWVzKSB7XG4gICAgICAgIG1ldGhvZE5hbWVzID0gYmFzZUZ1bmN0aW9ucyhzb3VyY2UsIGtleXMoc291cmNlKSk7XG4gICAgICB9XG4gICAgICB2YXIgY2hhaW4gPSB0cnVlLFxuICAgICAgICAgIGluZGV4ID0gLTEsXG4gICAgICAgICAgaXNGdW5jID0gaXNGdW5jdGlvbihvYmplY3QpLFxuICAgICAgICAgIGxlbmd0aCA9IG1ldGhvZE5hbWVzLmxlbmd0aDtcblxuICAgICAgaWYgKG9wdGlvbnMgPT09IGZhbHNlKSB7XG4gICAgICAgIGNoYWluID0gZmFsc2U7XG4gICAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KG9wdGlvbnMpICYmICdjaGFpbicgaW4gb3B0aW9ucykge1xuICAgICAgICBjaGFpbiA9IG9wdGlvbnMuY2hhaW47XG4gICAgICB9XG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICB2YXIgbWV0aG9kTmFtZSA9IG1ldGhvZE5hbWVzW2luZGV4XSxcbiAgICAgICAgICAgIGZ1bmMgPSBzb3VyY2VbbWV0aG9kTmFtZV07XG5cbiAgICAgICAgb2JqZWN0W21ldGhvZE5hbWVdID0gZnVuYztcbiAgICAgICAgaWYgKGlzRnVuYykge1xuICAgICAgICAgIG9iamVjdC5wcm90b3R5cGVbbWV0aG9kTmFtZV0gPSAoZnVuY3Rpb24oZnVuYykge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICB2YXIgY2hhaW5BbGwgPSB0aGlzLl9fY2hhaW5fXztcbiAgICAgICAgICAgICAgaWYgKGNoYWluIHx8IGNoYWluQWxsKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IG9iamVjdCh0aGlzLl9fd3JhcHBlZF9fKSxcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9ucyA9IHJlc3VsdC5fX2FjdGlvbnNfXyA9IGFycmF5Q29weSh0aGlzLl9fYWN0aW9uc19fKTtcblxuICAgICAgICAgICAgICAgIGFjdGlvbnMucHVzaCh7ICdmdW5jJzogZnVuYywgJ2FyZ3MnOiBhcmd1bWVudHMsICd0aGlzQXJnJzogb2JqZWN0IH0pO1xuICAgICAgICAgICAgICAgIHJlc3VsdC5fX2NoYWluX18gPSBjaGFpbkFsbDtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJldHVybiBmdW5jLmFwcGx5KG9iamVjdCwgYXJyYXlQdXNoKFt0aGlzLnZhbHVlKCldLCBhcmd1bWVudHMpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfShmdW5jKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV2ZXJ0cyB0aGUgYF9gIHZhcmlhYmxlIHRvIGl0cyBwcmV2aW91cyB2YWx1ZSBhbmQgcmV0dXJucyBhIHJlZmVyZW5jZSB0b1xuICAgICAqIHRoZSBgbG9kYXNoYCBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBVdGlsaXR5XG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBgbG9kYXNoYCBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGxvZGFzaCA9IF8ubm9Db25mbGljdCgpO1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIG5vQ29uZmxpY3QoKSB7XG4gICAgICByb290Ll8gPSBvbGREYXNoO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBuby1vcGVyYXRpb24gZnVuY3Rpb24gdGhhdCByZXR1cm5zIGB1bmRlZmluZWRgIHJlZ2FyZGxlc3Mgb2YgdGhlXG4gICAgICogYXJndW1lbnRzIGl0IHJlY2VpdmVzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFV0aWxpdHlcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIG9iamVjdCA9IHsgJ3VzZXInOiAnZnJlZCcgfTtcbiAgICAgKlxuICAgICAqIF8ubm9vcChvYmplY3QpID09PSB1bmRlZmluZWQ7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG5vb3AoKSB7XG4gICAgICAvLyBObyBvcGVyYXRpb24gcGVyZm9ybWVkLlxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIHByb3BlcnR5IHZhbHVlIGF0IGBwYXRoYCBvbiBhXG4gICAgICogZ2l2ZW4gb2JqZWN0LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFV0aWxpdHlcbiAgICAgKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0cyA9IFtcbiAgICAgKiAgIHsgJ2EnOiB7ICdiJzogeyAnYyc6IDIgfSB9IH0sXG4gICAgICogICB7ICdhJzogeyAnYic6IHsgJ2MnOiAxIH0gfSB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIF8ubWFwKG9iamVjdHMsIF8ucHJvcGVydHkoJ2EuYi5jJykpO1xuICAgICAqIC8vID0+IFsyLCAxXVxuICAgICAqXG4gICAgICogXy5wbHVjayhfLnNvcnRCeShvYmplY3RzLCBfLnByb3BlcnR5KFsnYScsICdiJywgJ2MnXSkpLCAnYS5iLmMnKTtcbiAgICAgKiAvLyA9PiBbMSwgMl1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBwcm9wZXJ0eShwYXRoKSB7XG4gICAgICByZXR1cm4gaXNLZXkocGF0aCkgPyBiYXNlUHJvcGVydHkocGF0aCkgOiBiYXNlUHJvcGVydHlEZWVwKHBhdGgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBvcHBvc2l0ZSBvZiBgXy5wcm9wZXJ0eWA7IHRoaXMgbWV0aG9kIGNyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IHJldHVybnNcbiAgICAgKiB0aGUgcHJvcGVydHkgdmFsdWUgYXQgYSBnaXZlbiBwYXRoIG9uIGBvYmplY3RgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFV0aWxpdHlcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBhcnJheSA9IFswLCAxLCAyXSxcbiAgICAgKiAgICAgb2JqZWN0ID0geyAnYSc6IGFycmF5LCAnYic6IGFycmF5LCAnYyc6IGFycmF5IH07XG4gICAgICpcbiAgICAgKiBfLm1hcChbJ2FbMl0nLCAnY1swXSddLCBfLnByb3BlcnR5T2Yob2JqZWN0KSk7XG4gICAgICogLy8gPT4gWzIsIDBdXG4gICAgICpcbiAgICAgKiBfLm1hcChbWydhJywgJzInXSwgWydjJywgJzAnXV0sIF8ucHJvcGVydHlPZihvYmplY3QpKTtcbiAgICAgKiAvLyA9PiBbMiwgMF1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBwcm9wZXJ0eU9mKG9iamVjdCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHBhdGgpIHtcbiAgICAgICAgcmV0dXJuIGJhc2VHZXQob2JqZWN0LCB0b1BhdGgocGF0aCksIHBhdGggKyAnJyk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgbnVtYmVycyAocG9zaXRpdmUgYW5kL29yIG5lZ2F0aXZlKSBwcm9ncmVzc2luZyBmcm9tXG4gICAgICogYHN0YXJ0YCB1cCB0bywgYnV0IG5vdCBpbmNsdWRpbmcsIGBlbmRgLiBJZiBgZW5kYCBpcyBub3Qgc3BlY2lmaWVkIGl0IGlzXG4gICAgICogc2V0IHRvIGBzdGFydGAgd2l0aCBgc3RhcnRgIHRoZW4gc2V0IHRvIGAwYC4gSWYgYGVuZGAgaXMgbGVzcyB0aGFuIGBzdGFydGBcbiAgICAgKiBhIHplcm8tbGVuZ3RoIHJhbmdlIGlzIGNyZWF0ZWQgdW5sZXNzIGEgbmVnYXRpdmUgYHN0ZXBgIGlzIHNwZWNpZmllZC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBVdGlsaXR5XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtzdGFydD0wXSBUaGUgc3RhcnQgb2YgdGhlIHJhbmdlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgVGhlIGVuZCBvZiB0aGUgcmFuZ2UuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtzdGVwPTFdIFRoZSB2YWx1ZSB0byBpbmNyZW1lbnQgb3IgZGVjcmVtZW50IGJ5LlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGFycmF5IG9mIG51bWJlcnMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ucmFuZ2UoNCk7XG4gICAgICogLy8gPT4gWzAsIDEsIDIsIDNdXG4gICAgICpcbiAgICAgKiBfLnJhbmdlKDEsIDUpO1xuICAgICAqIC8vID0+IFsxLCAyLCAzLCA0XVxuICAgICAqXG4gICAgICogXy5yYW5nZSgwLCAyMCwgNSk7XG4gICAgICogLy8gPT4gWzAsIDUsIDEwLCAxNV1cbiAgICAgKlxuICAgICAqIF8ucmFuZ2UoMCwgLTQsIC0xKTtcbiAgICAgKiAvLyA9PiBbMCwgLTEsIC0yLCAtM11cbiAgICAgKlxuICAgICAqIF8ucmFuZ2UoMSwgNCwgMCk7XG4gICAgICogLy8gPT4gWzEsIDEsIDFdXG4gICAgICpcbiAgICAgKiBfLnJhbmdlKDApO1xuICAgICAqIC8vID0+IFtdXG4gICAgICovXG4gICAgZnVuY3Rpb24gcmFuZ2Uoc3RhcnQsIGVuZCwgc3RlcCkge1xuICAgICAgaWYgKHN0ZXAgJiYgaXNJdGVyYXRlZUNhbGwoc3RhcnQsIGVuZCwgc3RlcCkpIHtcbiAgICAgICAgZW5kID0gc3RlcCA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIHN0YXJ0ID0gK3N0YXJ0IHx8IDA7XG4gICAgICBzdGVwID0gc3RlcCA9PSBudWxsID8gMSA6ICgrc3RlcCB8fCAwKTtcblxuICAgICAgaWYgKGVuZCA9PSBudWxsKSB7XG4gICAgICAgIGVuZCA9IHN0YXJ0O1xuICAgICAgICBzdGFydCA9IDA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbmQgPSArZW5kIHx8IDA7XG4gICAgICB9XG4gICAgICAvLyBVc2UgYEFycmF5KGxlbmd0aClgIHNvIGVuZ2luZXMgbGlrZSBDaGFrcmEgYW5kIFY4IGF2b2lkIHNsb3dlciBtb2Rlcy5cbiAgICAgIC8vIFNlZSBodHRwczovL3lvdXR1LmJlL1hBcUlwR1U4WlprI3Q9MTdtMjVzIGZvciBtb3JlIGRldGFpbHMuXG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSBuYXRpdmVNYXgobmF0aXZlQ2VpbCgoZW5kIC0gc3RhcnQpIC8gKHN0ZXAgfHwgMSkpLCAwKSxcbiAgICAgICAgICByZXN1bHQgPSBBcnJheShsZW5ndGgpO1xuXG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICByZXN1bHRbaW5kZXhdID0gc3RhcnQ7XG4gICAgICAgIHN0YXJ0ICs9IHN0ZXA7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEludm9rZXMgdGhlIGl0ZXJhdGVlIGZ1bmN0aW9uIGBuYCB0aW1lcywgcmV0dXJuaW5nIGFuIGFycmF5IG9mIHRoZSByZXN1bHRzXG4gICAgICogb2YgZWFjaCBpbnZvY2F0aW9uLiBUaGUgYGl0ZXJhdGVlYCBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aFxuICAgICAqIG9uZSBhcmd1bWVudDsgKGluZGV4KS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBVdGlsaXR5XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG4gVGhlIG51bWJlciBvZiB0aW1lcyB0byBpbnZva2UgYGl0ZXJhdGVlYC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbaXRlcmF0ZWU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGl0ZXJhdGVlYC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHJlc3VsdHMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBkaWNlUm9sbHMgPSBfLnRpbWVzKDMsIF8ucGFydGlhbChfLnJhbmRvbSwgMSwgNiwgZmFsc2UpKTtcbiAgICAgKiAvLyA9PiBbMywgNiwgNF1cbiAgICAgKlxuICAgICAqIF8udGltZXMoMywgZnVuY3Rpb24obikge1xuICAgICAqICAgbWFnZS5jYXN0U3BlbGwobik7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gaW52b2tlcyBgbWFnZS5jYXN0U3BlbGwobilgIHRocmVlIHRpbWVzIHdpdGggYG5gIG9mIGAwYCwgYDFgLCBhbmQgYDJgXG4gICAgICpcbiAgICAgKiBfLnRpbWVzKDMsIGZ1bmN0aW9uKG4pIHtcbiAgICAgKiAgIHRoaXMuY2FzdChuKTtcbiAgICAgKiB9LCBtYWdlKTtcbiAgICAgKiAvLyA9PiBhbHNvIGludm9rZXMgYG1hZ2UuY2FzdFNwZWxsKG4pYCB0aHJlZSB0aW1lc1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIHRpbWVzKG4sIGl0ZXJhdGVlLCB0aGlzQXJnKSB7XG4gICAgICBuID0gbmF0aXZlRmxvb3Iobik7XG5cbiAgICAgIC8vIEV4aXQgZWFybHkgdG8gYXZvaWQgYSBKU0MgSklUIGJ1ZyBpbiBTYWZhcmkgOFxuICAgICAgLy8gd2hlcmUgYEFycmF5KDApYCBpcyB0cmVhdGVkIGFzIGBBcnJheSgxKWAuXG4gICAgICBpZiAobiA8IDEgfHwgIW5hdGl2ZUlzRmluaXRlKG4pKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIHJlc3VsdCA9IEFycmF5KG5hdGl2ZU1pbihuLCBNQVhfQVJSQVlfTEVOR1RIKSk7XG5cbiAgICAgIGl0ZXJhdGVlID0gYmluZENhbGxiYWNrKGl0ZXJhdGVlLCB0aGlzQXJnLCAxKTtcbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbikge1xuICAgICAgICBpZiAoaW5kZXggPCBNQVhfQVJSQVlfTEVOR1RIKSB7XG4gICAgICAgICAgcmVzdWx0W2luZGV4XSA9IGl0ZXJhdGVlKGluZGV4KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVyYXRlZShpbmRleCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2VuZXJhdGVzIGEgdW5pcXVlIElELiBJZiBgcHJlZml4YCBpcyBwcm92aWRlZCB0aGUgSUQgaXMgYXBwZW5kZWQgdG8gaXQuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgVXRpbGl0eVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbcHJlZml4XSBUaGUgdmFsdWUgdG8gcHJlZml4IHRoZSBJRCB3aXRoLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHVuaXF1ZSBJRC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy51bmlxdWVJZCgnY29udGFjdF8nKTtcbiAgICAgKiAvLyA9PiAnY29udGFjdF8xMDQnXG4gICAgICpcbiAgICAgKiBfLnVuaXF1ZUlkKCk7XG4gICAgICogLy8gPT4gJzEwNSdcbiAgICAgKi9cbiAgICBmdW5jdGlvbiB1bmlxdWVJZChwcmVmaXgpIHtcbiAgICAgIHZhciBpZCA9ICsraWRDb3VudGVyO1xuICAgICAgcmV0dXJuIGJhc2VUb1N0cmluZyhwcmVmaXgpICsgaWQ7XG4gICAgfVxuXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgLyoqXG4gICAgICogQWRkcyB0d28gbnVtYmVycy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBNYXRoXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGF1Z2VuZCBUaGUgZmlyc3QgbnVtYmVyIHRvIGFkZC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYWRkZW5kIFRoZSBzZWNvbmQgbnVtYmVyIHRvIGFkZC5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBzdW0uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uYWRkKDYsIDQpO1xuICAgICAqIC8vID0+IDEwXG4gICAgICovXG4gICAgZnVuY3Rpb24gYWRkKGF1Z2VuZCwgYWRkZW5kKSB7XG4gICAgICByZXR1cm4gKCthdWdlbmQgfHwgMCkgKyAoK2FkZGVuZCB8fCAwKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGVzIGBuYCByb3VuZGVkIHVwIHRvIGBwcmVjaXNpb25gLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE1hdGhcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbiBUaGUgbnVtYmVyIHRvIHJvdW5kIHVwLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbcHJlY2lzaW9uPTBdIFRoZSBwcmVjaXNpb24gdG8gcm91bmQgdXAgdG8uXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgcm91bmRlZCB1cCBudW1iZXIuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uY2VpbCg0LjAwNik7XG4gICAgICogLy8gPT4gNVxuICAgICAqXG4gICAgICogXy5jZWlsKDYuMDA0LCAyKTtcbiAgICAgKiAvLyA9PiA2LjAxXG4gICAgICpcbiAgICAgKiBfLmNlaWwoNjA0MCwgLTIpO1xuICAgICAqIC8vID0+IDYxMDBcbiAgICAgKi9cbiAgICB2YXIgY2VpbCA9IGNyZWF0ZVJvdW5kKCdjZWlsJyk7XG5cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGVzIGBuYCByb3VuZGVkIGRvd24gdG8gYHByZWNpc2lvbmAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgTWF0aFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBuIFRoZSBudW1iZXIgdG8gcm91bmQgZG93bi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3ByZWNpc2lvbj0wXSBUaGUgcHJlY2lzaW9uIHRvIHJvdW5kIGRvd24gdG8uXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgcm91bmRlZCBkb3duIG51bWJlci5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5mbG9vcig0LjAwNik7XG4gICAgICogLy8gPT4gNFxuICAgICAqXG4gICAgICogXy5mbG9vcigwLjA0NiwgMik7XG4gICAgICogLy8gPT4gMC4wNFxuICAgICAqXG4gICAgICogXy5mbG9vcig0MDYwLCAtMik7XG4gICAgICogLy8gPT4gNDAwMFxuICAgICAqL1xuICAgIHZhciBmbG9vciA9IGNyZWF0ZVJvdW5kKCdmbG9vcicpO1xuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgbWF4aW11bSB2YWx1ZSBvZiBgY29sbGVjdGlvbmAuIElmIGBjb2xsZWN0aW9uYCBpcyBlbXB0eSBvciBmYWxzZXlcbiAgICAgKiBgLUluZmluaXR5YCBpcyByZXR1cm5lZC4gSWYgYW4gaXRlcmF0ZWUgZnVuY3Rpb24gaXMgcHJvdmlkZWQgaXQgaXMgaW52b2tlZFxuICAgICAqIGZvciBlYWNoIHZhbHVlIGluIGBjb2xsZWN0aW9uYCB0byBnZW5lcmF0ZSB0aGUgY3JpdGVyaW9uIGJ5IHdoaWNoIHRoZSB2YWx1ZVxuICAgICAqIGlzIHJhbmtlZC4gVGhlIGBpdGVyYXRlZWAgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdGhyZWVcbiAgICAgKiBhcmd1bWVudHM6ICh2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgaXRlcmF0ZWVgIHRoZSBjcmVhdGVkIGBfLnByb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYSB2YWx1ZSBpcyBhbHNvIHByb3ZpZGVkIGZvciBgdGhpc0FyZ2AgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc1Byb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgYSBtYXRjaGluZyBwcm9wZXJ0eVxuICAgICAqIHZhbHVlLCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBpdGVyYXRlZWAgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc2Agc3R5bGVcbiAgICAgKiBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlblxuICAgICAqIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE1hdGhcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2l0ZXJhdGVlXSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgaXRlcmF0ZWVgLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBtYXhpbXVtIHZhbHVlLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLm1heChbNCwgMiwgOCwgNl0pO1xuICAgICAqIC8vID0+IDhcbiAgICAgKlxuICAgICAqIF8ubWF4KFtdKTtcbiAgICAgKiAvLyA9PiAtSW5maW5pdHlcbiAgICAgKlxuICAgICAqIHZhciB1c2VycyA9IFtcbiAgICAgKiAgIHsgJ3VzZXInOiAnYmFybmV5JywgJ2FnZSc6IDM2IH0sXG4gICAgICogICB7ICd1c2VyJzogJ2ZyZWQnLCAgICdhZ2UnOiA0MCB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIF8ubWF4KHVzZXJzLCBmdW5jdGlvbihjaHIpIHtcbiAgICAgKiAgIHJldHVybiBjaHIuYWdlO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IHsgJ3VzZXInOiAnZnJlZCcsICdhZ2UnOiA0MCB9XG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ucHJvcGVydHlgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8ubWF4KHVzZXJzLCAnYWdlJyk7XG4gICAgICogLy8gPT4geyAndXNlcic6ICdmcmVkJywgJ2FnZSc6IDQwIH1cbiAgICAgKi9cbiAgICB2YXIgbWF4ID0gY3JlYXRlRXh0cmVtdW0oZ3QsIE5FR0FUSVZFX0lORklOSVRZKTtcblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIG1pbmltdW0gdmFsdWUgb2YgYGNvbGxlY3Rpb25gLiBJZiBgY29sbGVjdGlvbmAgaXMgZW1wdHkgb3IgZmFsc2V5XG4gICAgICogYEluZmluaXR5YCBpcyByZXR1cm5lZC4gSWYgYW4gaXRlcmF0ZWUgZnVuY3Rpb24gaXMgcHJvdmlkZWQgaXQgaXMgaW52b2tlZFxuICAgICAqIGZvciBlYWNoIHZhbHVlIGluIGBjb2xsZWN0aW9uYCB0byBnZW5lcmF0ZSB0aGUgY3JpdGVyaW9uIGJ5IHdoaWNoIHRoZSB2YWx1ZVxuICAgICAqIGlzIHJhbmtlZC4gVGhlIGBpdGVyYXRlZWAgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdGhyZWVcbiAgICAgKiBhcmd1bWVudHM6ICh2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgaXRlcmF0ZWVgIHRoZSBjcmVhdGVkIGBfLnByb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYSB2YWx1ZSBpcyBhbHNvIHByb3ZpZGVkIGZvciBgdGhpc0FyZ2AgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc1Byb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgYSBtYXRjaGluZyBwcm9wZXJ0eVxuICAgICAqIHZhbHVlLCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBpdGVyYXRlZWAgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc2Agc3R5bGVcbiAgICAgKiBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlblxuICAgICAqIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE1hdGhcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2l0ZXJhdGVlXSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgaXRlcmF0ZWVgLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBtaW5pbXVtIHZhbHVlLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLm1pbihbNCwgMiwgOCwgNl0pO1xuICAgICAqIC8vID0+IDJcbiAgICAgKlxuICAgICAqIF8ubWluKFtdKTtcbiAgICAgKiAvLyA9PiBJbmZpbml0eVxuICAgICAqXG4gICAgICogdmFyIHVzZXJzID0gW1xuICAgICAqICAgeyAndXNlcic6ICdiYXJuZXknLCAnYWdlJzogMzYgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAnZnJlZCcsICAgJ2FnZSc6IDQwIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogXy5taW4odXNlcnMsIGZ1bmN0aW9uKGNocikge1xuICAgICAqICAgcmV0dXJuIGNoci5hZ2U7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4geyAndXNlcic6ICdiYXJuZXknLCAnYWdlJzogMzYgfVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLnByb3BlcnR5YCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLm1pbih1c2VycywgJ2FnZScpO1xuICAgICAqIC8vID0+IHsgJ3VzZXInOiAnYmFybmV5JywgJ2FnZSc6IDM2IH1cbiAgICAgKi9cbiAgICB2YXIgbWluID0gY3JlYXRlRXh0cmVtdW0obHQsIFBPU0lUSVZFX0lORklOSVRZKTtcblxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZXMgYG5gIHJvdW5kZWQgdG8gYHByZWNpc2lvbmAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgTWF0aFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBuIFRoZSBudW1iZXIgdG8gcm91bmQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtwcmVjaXNpb249MF0gVGhlIHByZWNpc2lvbiB0byByb3VuZCB0by5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSByb3VuZGVkIG51bWJlci5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5yb3VuZCg0LjAwNik7XG4gICAgICogLy8gPT4gNFxuICAgICAqXG4gICAgICogXy5yb3VuZCg0LjAwNiwgMik7XG4gICAgICogLy8gPT4gNC4wMVxuICAgICAqXG4gICAgICogXy5yb3VuZCg0MDYwLCAtMik7XG4gICAgICogLy8gPT4gNDEwMFxuICAgICAqL1xuICAgIHZhciByb3VuZCA9IGNyZWF0ZVJvdW5kKCdyb3VuZCcpO1xuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgc3VtIG9mIHRoZSB2YWx1ZXMgaW4gYGNvbGxlY3Rpb25gLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE1hdGhcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2l0ZXJhdGVlXSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgaXRlcmF0ZWVgLlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHN1bS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5zdW0oWzQsIDZdKTtcbiAgICAgKiAvLyA9PiAxMFxuICAgICAqXG4gICAgICogXy5zdW0oeyAnYSc6IDQsICdiJzogNiB9KTtcbiAgICAgKiAvLyA9PiAxMFxuICAgICAqXG4gICAgICogdmFyIG9iamVjdHMgPSBbXG4gICAgICogICB7ICduJzogNCB9LFxuICAgICAqICAgeyAnbic6IDYgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiBfLnN1bShvYmplY3RzLCBmdW5jdGlvbihvYmplY3QpIHtcbiAgICAgKiAgIHJldHVybiBvYmplY3QubjtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiAxMFxuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLnByb3BlcnR5YCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLnN1bShvYmplY3RzLCAnbicpO1xuICAgICAqIC8vID0+IDEwXG4gICAgICovXG4gICAgZnVuY3Rpb24gc3VtKGNvbGxlY3Rpb24sIGl0ZXJhdGVlLCB0aGlzQXJnKSB7XG4gICAgICBpZiAodGhpc0FyZyAmJiBpc0l0ZXJhdGVlQ2FsbChjb2xsZWN0aW9uLCBpdGVyYXRlZSwgdGhpc0FyZykpIHtcbiAgICAgICAgaXRlcmF0ZWUgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICBpdGVyYXRlZSA9IGdldENhbGxiYWNrKGl0ZXJhdGVlLCB0aGlzQXJnLCAzKTtcbiAgICAgIHJldHVybiBpdGVyYXRlZS5sZW5ndGggPT0gMVxuICAgICAgICA/IGFycmF5U3VtKGlzQXJyYXkoY29sbGVjdGlvbikgPyBjb2xsZWN0aW9uIDogdG9JdGVyYWJsZShjb2xsZWN0aW9uKSwgaXRlcmF0ZWUpXG4gICAgICAgIDogYmFzZVN1bShjb2xsZWN0aW9uLCBpdGVyYXRlZSk7XG4gICAgfVxuXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgLy8gRW5zdXJlIHdyYXBwZXJzIGFyZSBpbnN0YW5jZXMgb2YgYGJhc2VMb2Rhc2hgLlxuICAgIGxvZGFzaC5wcm90b3R5cGUgPSBiYXNlTG9kYXNoLnByb3RvdHlwZTtcblxuICAgIExvZGFzaFdyYXBwZXIucHJvdG90eXBlID0gYmFzZUNyZWF0ZShiYXNlTG9kYXNoLnByb3RvdHlwZSk7XG4gICAgTG9kYXNoV3JhcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBMb2Rhc2hXcmFwcGVyO1xuXG4gICAgTGF6eVdyYXBwZXIucHJvdG90eXBlID0gYmFzZUNyZWF0ZShiYXNlTG9kYXNoLnByb3RvdHlwZSk7XG4gICAgTGF6eVdyYXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTGF6eVdyYXBwZXI7XG5cbiAgICAvLyBBZGQgZnVuY3Rpb25zIHRvIHRoZSBgTWFwYCBjYWNoZS5cbiAgICBNYXBDYWNoZS5wcm90b3R5cGVbJ2RlbGV0ZSddID0gbWFwRGVsZXRlO1xuICAgIE1hcENhY2hlLnByb3RvdHlwZS5nZXQgPSBtYXBHZXQ7XG4gICAgTWFwQ2FjaGUucHJvdG90eXBlLmhhcyA9IG1hcEhhcztcbiAgICBNYXBDYWNoZS5wcm90b3R5cGUuc2V0ID0gbWFwU2V0O1xuXG4gICAgLy8gQWRkIGZ1bmN0aW9ucyB0byB0aGUgYFNldGAgY2FjaGUuXG4gICAgU2V0Q2FjaGUucHJvdG90eXBlLnB1c2ggPSBjYWNoZVB1c2g7XG5cbiAgICAvLyBBc3NpZ24gY2FjaGUgdG8gYF8ubWVtb2l6ZWAuXG4gICAgbWVtb2l6ZS5DYWNoZSA9IE1hcENhY2hlO1xuXG4gICAgLy8gQWRkIGZ1bmN0aW9ucyB0aGF0IHJldHVybiB3cmFwcGVkIHZhbHVlcyB3aGVuIGNoYWluaW5nLlxuICAgIGxvZGFzaC5hZnRlciA9IGFmdGVyO1xuICAgIGxvZGFzaC5hcnkgPSBhcnk7XG4gICAgbG9kYXNoLmFzc2lnbiA9IGFzc2lnbjtcbiAgICBsb2Rhc2guYXQgPSBhdDtcbiAgICBsb2Rhc2guYmVmb3JlID0gYmVmb3JlO1xuICAgIGxvZGFzaC5iaW5kID0gYmluZDtcbiAgICBsb2Rhc2guYmluZEFsbCA9IGJpbmRBbGw7XG4gICAgbG9kYXNoLmJpbmRLZXkgPSBiaW5kS2V5O1xuICAgIGxvZGFzaC5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgIGxvZGFzaC5jaGFpbiA9IGNoYWluO1xuICAgIGxvZGFzaC5jaHVuayA9IGNodW5rO1xuICAgIGxvZGFzaC5jb21wYWN0ID0gY29tcGFjdDtcbiAgICBsb2Rhc2guY29uc3RhbnQgPSBjb25zdGFudDtcbiAgICBsb2Rhc2guY291bnRCeSA9IGNvdW50Qnk7XG4gICAgbG9kYXNoLmNyZWF0ZSA9IGNyZWF0ZTtcbiAgICBsb2Rhc2guY3VycnkgPSBjdXJyeTtcbiAgICBsb2Rhc2guY3VycnlSaWdodCA9IGN1cnJ5UmlnaHQ7XG4gICAgbG9kYXNoLmRlYm91bmNlID0gZGVib3VuY2U7XG4gICAgbG9kYXNoLmRlZmF1bHRzID0gZGVmYXVsdHM7XG4gICAgbG9kYXNoLmRlZmF1bHRzRGVlcCA9IGRlZmF1bHRzRGVlcDtcbiAgICBsb2Rhc2guZGVmZXIgPSBkZWZlcjtcbiAgICBsb2Rhc2guZGVsYXkgPSBkZWxheTtcbiAgICBsb2Rhc2guZGlmZmVyZW5jZSA9IGRpZmZlcmVuY2U7XG4gICAgbG9kYXNoLmRyb3AgPSBkcm9wO1xuICAgIGxvZGFzaC5kcm9wUmlnaHQgPSBkcm9wUmlnaHQ7XG4gICAgbG9kYXNoLmRyb3BSaWdodFdoaWxlID0gZHJvcFJpZ2h0V2hpbGU7XG4gICAgbG9kYXNoLmRyb3BXaGlsZSA9IGRyb3BXaGlsZTtcbiAgICBsb2Rhc2guZmlsbCA9IGZpbGw7XG4gICAgbG9kYXNoLmZpbHRlciA9IGZpbHRlcjtcbiAgICBsb2Rhc2guZmxhdHRlbiA9IGZsYXR0ZW47XG4gICAgbG9kYXNoLmZsYXR0ZW5EZWVwID0gZmxhdHRlbkRlZXA7XG4gICAgbG9kYXNoLmZsb3cgPSBmbG93O1xuICAgIGxvZGFzaC5mbG93UmlnaHQgPSBmbG93UmlnaHQ7XG4gICAgbG9kYXNoLmZvckVhY2ggPSBmb3JFYWNoO1xuICAgIGxvZGFzaC5mb3JFYWNoUmlnaHQgPSBmb3JFYWNoUmlnaHQ7XG4gICAgbG9kYXNoLmZvckluID0gZm9ySW47XG4gICAgbG9kYXNoLmZvckluUmlnaHQgPSBmb3JJblJpZ2h0O1xuICAgIGxvZGFzaC5mb3JPd24gPSBmb3JPd247XG4gICAgbG9kYXNoLmZvck93blJpZ2h0ID0gZm9yT3duUmlnaHQ7XG4gICAgbG9kYXNoLmZ1bmN0aW9ucyA9IGZ1bmN0aW9ucztcbiAgICBsb2Rhc2guZ3JvdXBCeSA9IGdyb3VwQnk7XG4gICAgbG9kYXNoLmluZGV4QnkgPSBpbmRleEJ5O1xuICAgIGxvZGFzaC5pbml0aWFsID0gaW5pdGlhbDtcbiAgICBsb2Rhc2guaW50ZXJzZWN0aW9uID0gaW50ZXJzZWN0aW9uO1xuICAgIGxvZGFzaC5pbnZlcnQgPSBpbnZlcnQ7XG4gICAgbG9kYXNoLmludm9rZSA9IGludm9rZTtcbiAgICBsb2Rhc2gua2V5cyA9IGtleXM7XG4gICAgbG9kYXNoLmtleXNJbiA9IGtleXNJbjtcbiAgICBsb2Rhc2gubWFwID0gbWFwO1xuICAgIGxvZGFzaC5tYXBLZXlzID0gbWFwS2V5cztcbiAgICBsb2Rhc2gubWFwVmFsdWVzID0gbWFwVmFsdWVzO1xuICAgIGxvZGFzaC5tYXRjaGVzID0gbWF0Y2hlcztcbiAgICBsb2Rhc2gubWF0Y2hlc1Byb3BlcnR5ID0gbWF0Y2hlc1Byb3BlcnR5O1xuICAgIGxvZGFzaC5tZW1vaXplID0gbWVtb2l6ZTtcbiAgICBsb2Rhc2gubWVyZ2UgPSBtZXJnZTtcbiAgICBsb2Rhc2gubWV0aG9kID0gbWV0aG9kO1xuICAgIGxvZGFzaC5tZXRob2RPZiA9IG1ldGhvZE9mO1xuICAgIGxvZGFzaC5taXhpbiA9IG1peGluO1xuICAgIGxvZGFzaC5tb2RBcmdzID0gbW9kQXJncztcbiAgICBsb2Rhc2gubmVnYXRlID0gbmVnYXRlO1xuICAgIGxvZGFzaC5vbWl0ID0gb21pdDtcbiAgICBsb2Rhc2gub25jZSA9IG9uY2U7XG4gICAgbG9kYXNoLnBhaXJzID0gcGFpcnM7XG4gICAgbG9kYXNoLnBhcnRpYWwgPSBwYXJ0aWFsO1xuICAgIGxvZGFzaC5wYXJ0aWFsUmlnaHQgPSBwYXJ0aWFsUmlnaHQ7XG4gICAgbG9kYXNoLnBhcnRpdGlvbiA9IHBhcnRpdGlvbjtcbiAgICBsb2Rhc2gucGljayA9IHBpY2s7XG4gICAgbG9kYXNoLnBsdWNrID0gcGx1Y2s7XG4gICAgbG9kYXNoLnByb3BlcnR5ID0gcHJvcGVydHk7XG4gICAgbG9kYXNoLnByb3BlcnR5T2YgPSBwcm9wZXJ0eU9mO1xuICAgIGxvZGFzaC5wdWxsID0gcHVsbDtcbiAgICBsb2Rhc2gucHVsbEF0ID0gcHVsbEF0O1xuICAgIGxvZGFzaC5yYW5nZSA9IHJhbmdlO1xuICAgIGxvZGFzaC5yZWFyZyA9IHJlYXJnO1xuICAgIGxvZGFzaC5yZWplY3QgPSByZWplY3Q7XG4gICAgbG9kYXNoLnJlbW92ZSA9IHJlbW92ZTtcbiAgICBsb2Rhc2gucmVzdCA9IHJlc3Q7XG4gICAgbG9kYXNoLnJlc3RQYXJhbSA9IHJlc3RQYXJhbTtcbiAgICBsb2Rhc2guc2V0ID0gc2V0O1xuICAgIGxvZGFzaC5zaHVmZmxlID0gc2h1ZmZsZTtcbiAgICBsb2Rhc2guc2xpY2UgPSBzbGljZTtcbiAgICBsb2Rhc2guc29ydEJ5ID0gc29ydEJ5O1xuICAgIGxvZGFzaC5zb3J0QnlBbGwgPSBzb3J0QnlBbGw7XG4gICAgbG9kYXNoLnNvcnRCeU9yZGVyID0gc29ydEJ5T3JkZXI7XG4gICAgbG9kYXNoLnNwcmVhZCA9IHNwcmVhZDtcbiAgICBsb2Rhc2gudGFrZSA9IHRha2U7XG4gICAgbG9kYXNoLnRha2VSaWdodCA9IHRha2VSaWdodDtcbiAgICBsb2Rhc2gudGFrZVJpZ2h0V2hpbGUgPSB0YWtlUmlnaHRXaGlsZTtcbiAgICBsb2Rhc2gudGFrZVdoaWxlID0gdGFrZVdoaWxlO1xuICAgIGxvZGFzaC50YXAgPSB0YXA7XG4gICAgbG9kYXNoLnRocm90dGxlID0gdGhyb3R0bGU7XG4gICAgbG9kYXNoLnRocnUgPSB0aHJ1O1xuICAgIGxvZGFzaC50aW1lcyA9IHRpbWVzO1xuICAgIGxvZGFzaC50b0FycmF5ID0gdG9BcnJheTtcbiAgICBsb2Rhc2gudG9QbGFpbk9iamVjdCA9IHRvUGxhaW5PYmplY3Q7XG4gICAgbG9kYXNoLnRyYW5zZm9ybSA9IHRyYW5zZm9ybTtcbiAgICBsb2Rhc2gudW5pb24gPSB1bmlvbjtcbiAgICBsb2Rhc2gudW5pcSA9IHVuaXE7XG4gICAgbG9kYXNoLnVuemlwID0gdW56aXA7XG4gICAgbG9kYXNoLnVuemlwV2l0aCA9IHVuemlwV2l0aDtcbiAgICBsb2Rhc2gudmFsdWVzID0gdmFsdWVzO1xuICAgIGxvZGFzaC52YWx1ZXNJbiA9IHZhbHVlc0luO1xuICAgIGxvZGFzaC53aGVyZSA9IHdoZXJlO1xuICAgIGxvZGFzaC53aXRob3V0ID0gd2l0aG91dDtcbiAgICBsb2Rhc2gud3JhcCA9IHdyYXA7XG4gICAgbG9kYXNoLnhvciA9IHhvcjtcbiAgICBsb2Rhc2guemlwID0gemlwO1xuICAgIGxvZGFzaC56aXBPYmplY3QgPSB6aXBPYmplY3Q7XG4gICAgbG9kYXNoLnppcFdpdGggPSB6aXBXaXRoO1xuXG4gICAgLy8gQWRkIGFsaWFzZXMuXG4gICAgbG9kYXNoLmJhY2tmbG93ID0gZmxvd1JpZ2h0O1xuICAgIGxvZGFzaC5jb2xsZWN0ID0gbWFwO1xuICAgIGxvZGFzaC5jb21wb3NlID0gZmxvd1JpZ2h0O1xuICAgIGxvZGFzaC5lYWNoID0gZm9yRWFjaDtcbiAgICBsb2Rhc2guZWFjaFJpZ2h0ID0gZm9yRWFjaFJpZ2h0O1xuICAgIGxvZGFzaC5leHRlbmQgPSBhc3NpZ247XG4gICAgbG9kYXNoLml0ZXJhdGVlID0gY2FsbGJhY2s7XG4gICAgbG9kYXNoLm1ldGhvZHMgPSBmdW5jdGlvbnM7XG4gICAgbG9kYXNoLm9iamVjdCA9IHppcE9iamVjdDtcbiAgICBsb2Rhc2guc2VsZWN0ID0gZmlsdGVyO1xuICAgIGxvZGFzaC50YWlsID0gcmVzdDtcbiAgICBsb2Rhc2gudW5pcXVlID0gdW5pcTtcblxuICAgIC8vIEFkZCBmdW5jdGlvbnMgdG8gYGxvZGFzaC5wcm90b3R5cGVgLlxuICAgIG1peGluKGxvZGFzaCwgbG9kYXNoKTtcblxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgIC8vIEFkZCBmdW5jdGlvbnMgdGhhdCByZXR1cm4gdW53cmFwcGVkIHZhbHVlcyB3aGVuIGNoYWluaW5nLlxuICAgIGxvZGFzaC5hZGQgPSBhZGQ7XG4gICAgbG9kYXNoLmF0dGVtcHQgPSBhdHRlbXB0O1xuICAgIGxvZGFzaC5jYW1lbENhc2UgPSBjYW1lbENhc2U7XG4gICAgbG9kYXNoLmNhcGl0YWxpemUgPSBjYXBpdGFsaXplO1xuICAgIGxvZGFzaC5jZWlsID0gY2VpbDtcbiAgICBsb2Rhc2guY2xvbmUgPSBjbG9uZTtcbiAgICBsb2Rhc2guY2xvbmVEZWVwID0gY2xvbmVEZWVwO1xuICAgIGxvZGFzaC5kZWJ1cnIgPSBkZWJ1cnI7XG4gICAgbG9kYXNoLmVuZHNXaXRoID0gZW5kc1dpdGg7XG4gICAgbG9kYXNoLmVzY2FwZSA9IGVzY2FwZTtcbiAgICBsb2Rhc2guZXNjYXBlUmVnRXhwID0gZXNjYXBlUmVnRXhwO1xuICAgIGxvZGFzaC5ldmVyeSA9IGV2ZXJ5O1xuICAgIGxvZGFzaC5maW5kID0gZmluZDtcbiAgICBsb2Rhc2guZmluZEluZGV4ID0gZmluZEluZGV4O1xuICAgIGxvZGFzaC5maW5kS2V5ID0gZmluZEtleTtcbiAgICBsb2Rhc2guZmluZExhc3QgPSBmaW5kTGFzdDtcbiAgICBsb2Rhc2guZmluZExhc3RJbmRleCA9IGZpbmRMYXN0SW5kZXg7XG4gICAgbG9kYXNoLmZpbmRMYXN0S2V5ID0gZmluZExhc3RLZXk7XG4gICAgbG9kYXNoLmZpbmRXaGVyZSA9IGZpbmRXaGVyZTtcbiAgICBsb2Rhc2guZmlyc3QgPSBmaXJzdDtcbiAgICBsb2Rhc2guZmxvb3IgPSBmbG9vcjtcbiAgICBsb2Rhc2guZ2V0ID0gZ2V0O1xuICAgIGxvZGFzaC5ndCA9IGd0O1xuICAgIGxvZGFzaC5ndGUgPSBndGU7XG4gICAgbG9kYXNoLmhhcyA9IGhhcztcbiAgICBsb2Rhc2guaWRlbnRpdHkgPSBpZGVudGl0eTtcbiAgICBsb2Rhc2guaW5jbHVkZXMgPSBpbmNsdWRlcztcbiAgICBsb2Rhc2guaW5kZXhPZiA9IGluZGV4T2Y7XG4gICAgbG9kYXNoLmluUmFuZ2UgPSBpblJhbmdlO1xuICAgIGxvZGFzaC5pc0FyZ3VtZW50cyA9IGlzQXJndW1lbnRzO1xuICAgIGxvZGFzaC5pc0FycmF5ID0gaXNBcnJheTtcbiAgICBsb2Rhc2guaXNCb29sZWFuID0gaXNCb29sZWFuO1xuICAgIGxvZGFzaC5pc0RhdGUgPSBpc0RhdGU7XG4gICAgbG9kYXNoLmlzRWxlbWVudCA9IGlzRWxlbWVudDtcbiAgICBsb2Rhc2guaXNFbXB0eSA9IGlzRW1wdHk7XG4gICAgbG9kYXNoLmlzRXF1YWwgPSBpc0VxdWFsO1xuICAgIGxvZGFzaC5pc0Vycm9yID0gaXNFcnJvcjtcbiAgICBsb2Rhc2guaXNGaW5pdGUgPSBpc0Zpbml0ZTtcbiAgICBsb2Rhc2guaXNGdW5jdGlvbiA9IGlzRnVuY3Rpb247XG4gICAgbG9kYXNoLmlzTWF0Y2ggPSBpc01hdGNoO1xuICAgIGxvZGFzaC5pc05hTiA9IGlzTmFOO1xuICAgIGxvZGFzaC5pc05hdGl2ZSA9IGlzTmF0aXZlO1xuICAgIGxvZGFzaC5pc051bGwgPSBpc051bGw7XG4gICAgbG9kYXNoLmlzTnVtYmVyID0gaXNOdW1iZXI7XG4gICAgbG9kYXNoLmlzT2JqZWN0ID0gaXNPYmplY3Q7XG4gICAgbG9kYXNoLmlzUGxhaW5PYmplY3QgPSBpc1BsYWluT2JqZWN0O1xuICAgIGxvZGFzaC5pc1JlZ0V4cCA9IGlzUmVnRXhwO1xuICAgIGxvZGFzaC5pc1N0cmluZyA9IGlzU3RyaW5nO1xuICAgIGxvZGFzaC5pc1R5cGVkQXJyYXkgPSBpc1R5cGVkQXJyYXk7XG4gICAgbG9kYXNoLmlzVW5kZWZpbmVkID0gaXNVbmRlZmluZWQ7XG4gICAgbG9kYXNoLmtlYmFiQ2FzZSA9IGtlYmFiQ2FzZTtcbiAgICBsb2Rhc2gubGFzdCA9IGxhc3Q7XG4gICAgbG9kYXNoLmxhc3RJbmRleE9mID0gbGFzdEluZGV4T2Y7XG4gICAgbG9kYXNoLmx0ID0gbHQ7XG4gICAgbG9kYXNoLmx0ZSA9IGx0ZTtcbiAgICBsb2Rhc2gubWF4ID0gbWF4O1xuICAgIGxvZGFzaC5taW4gPSBtaW47XG4gICAgbG9kYXNoLm5vQ29uZmxpY3QgPSBub0NvbmZsaWN0O1xuICAgIGxvZGFzaC5ub29wID0gbm9vcDtcbiAgICBsb2Rhc2gubm93ID0gbm93O1xuICAgIGxvZGFzaC5wYWQgPSBwYWQ7XG4gICAgbG9kYXNoLnBhZExlZnQgPSBwYWRMZWZ0O1xuICAgIGxvZGFzaC5wYWRSaWdodCA9IHBhZFJpZ2h0O1xuICAgIGxvZGFzaC5wYXJzZUludCA9IHBhcnNlSW50O1xuICAgIGxvZGFzaC5yYW5kb20gPSByYW5kb207XG4gICAgbG9kYXNoLnJlZHVjZSA9IHJlZHVjZTtcbiAgICBsb2Rhc2gucmVkdWNlUmlnaHQgPSByZWR1Y2VSaWdodDtcbiAgICBsb2Rhc2gucmVwZWF0ID0gcmVwZWF0O1xuICAgIGxvZGFzaC5yZXN1bHQgPSByZXN1bHQ7XG4gICAgbG9kYXNoLnJvdW5kID0gcm91bmQ7XG4gICAgbG9kYXNoLnJ1bkluQ29udGV4dCA9IHJ1bkluQ29udGV4dDtcbiAgICBsb2Rhc2guc2l6ZSA9IHNpemU7XG4gICAgbG9kYXNoLnNuYWtlQ2FzZSA9IHNuYWtlQ2FzZTtcbiAgICBsb2Rhc2guc29tZSA9IHNvbWU7XG4gICAgbG9kYXNoLnNvcnRlZEluZGV4ID0gc29ydGVkSW5kZXg7XG4gICAgbG9kYXNoLnNvcnRlZExhc3RJbmRleCA9IHNvcnRlZExhc3RJbmRleDtcbiAgICBsb2Rhc2guc3RhcnRDYXNlID0gc3RhcnRDYXNlO1xuICAgIGxvZGFzaC5zdGFydHNXaXRoID0gc3RhcnRzV2l0aDtcbiAgICBsb2Rhc2guc3VtID0gc3VtO1xuICAgIGxvZGFzaC50ZW1wbGF0ZSA9IHRlbXBsYXRlO1xuICAgIGxvZGFzaC50cmltID0gdHJpbTtcbiAgICBsb2Rhc2gudHJpbUxlZnQgPSB0cmltTGVmdDtcbiAgICBsb2Rhc2gudHJpbVJpZ2h0ID0gdHJpbVJpZ2h0O1xuICAgIGxvZGFzaC50cnVuYyA9IHRydW5jO1xuICAgIGxvZGFzaC51bmVzY2FwZSA9IHVuZXNjYXBlO1xuICAgIGxvZGFzaC51bmlxdWVJZCA9IHVuaXF1ZUlkO1xuICAgIGxvZGFzaC53b3JkcyA9IHdvcmRzO1xuXG4gICAgLy8gQWRkIGFsaWFzZXMuXG4gICAgbG9kYXNoLmFsbCA9IGV2ZXJ5O1xuICAgIGxvZGFzaC5hbnkgPSBzb21lO1xuICAgIGxvZGFzaC5jb250YWlucyA9IGluY2x1ZGVzO1xuICAgIGxvZGFzaC5lcSA9IGlzRXF1YWw7XG4gICAgbG9kYXNoLmRldGVjdCA9IGZpbmQ7XG4gICAgbG9kYXNoLmZvbGRsID0gcmVkdWNlO1xuICAgIGxvZGFzaC5mb2xkciA9IHJlZHVjZVJpZ2h0O1xuICAgIGxvZGFzaC5oZWFkID0gZmlyc3Q7XG4gICAgbG9kYXNoLmluY2x1ZGUgPSBpbmNsdWRlcztcbiAgICBsb2Rhc2guaW5qZWN0ID0gcmVkdWNlO1xuXG4gICAgbWl4aW4obG9kYXNoLCAoZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc291cmNlID0ge307XG4gICAgICBiYXNlRm9yT3duKGxvZGFzaCwgZnVuY3Rpb24oZnVuYywgbWV0aG9kTmFtZSkge1xuICAgICAgICBpZiAoIWxvZGFzaC5wcm90b3R5cGVbbWV0aG9kTmFtZV0pIHtcbiAgICAgICAgICBzb3VyY2VbbWV0aG9kTmFtZV0gPSBmdW5jO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBzb3VyY2U7XG4gICAgfSgpKSwgZmFsc2UpO1xuXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgLy8gQWRkIGZ1bmN0aW9ucyBjYXBhYmxlIG9mIHJldHVybmluZyB3cmFwcGVkIGFuZCB1bndyYXBwZWQgdmFsdWVzIHdoZW4gY2hhaW5pbmcuXG4gICAgbG9kYXNoLnNhbXBsZSA9IHNhbXBsZTtcblxuICAgIGxvZGFzaC5wcm90b3R5cGUuc2FtcGxlID0gZnVuY3Rpb24obikge1xuICAgICAgaWYgKCF0aGlzLl9fY2hhaW5fXyAmJiBuID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHNhbXBsZSh0aGlzLnZhbHVlKCkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMudGhydShmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gc2FtcGxlKHZhbHVlLCBuKTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAvKipcbiAgICAgKiBUaGUgc2VtYW50aWMgdmVyc2lvbiBudW1iZXIuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAdHlwZSBzdHJpbmdcbiAgICAgKi9cbiAgICBsb2Rhc2guVkVSU0lPTiA9IFZFUlNJT047XG5cbiAgICAvLyBBc3NpZ24gZGVmYXVsdCBwbGFjZWhvbGRlcnMuXG4gICAgYXJyYXlFYWNoKFsnYmluZCcsICdiaW5kS2V5JywgJ2N1cnJ5JywgJ2N1cnJ5UmlnaHQnLCAncGFydGlhbCcsICdwYXJ0aWFsUmlnaHQnXSwgZnVuY3Rpb24obWV0aG9kTmFtZSkge1xuICAgICAgbG9kYXNoW21ldGhvZE5hbWVdLnBsYWNlaG9sZGVyID0gbG9kYXNoO1xuICAgIH0pO1xuXG4gICAgLy8gQWRkIGBMYXp5V3JhcHBlcmAgbWV0aG9kcyBmb3IgYF8uZHJvcGAgYW5kIGBfLnRha2VgIHZhcmlhbnRzLlxuICAgIGFycmF5RWFjaChbJ2Ryb3AnLCAndGFrZSddLCBmdW5jdGlvbihtZXRob2ROYW1lLCBpbmRleCkge1xuICAgICAgTGF6eVdyYXBwZXIucHJvdG90eXBlW21ldGhvZE5hbWVdID0gZnVuY3Rpb24obikge1xuICAgICAgICB2YXIgZmlsdGVyZWQgPSB0aGlzLl9fZmlsdGVyZWRfXztcbiAgICAgICAgaWYgKGZpbHRlcmVkICYmICFpbmRleCkge1xuICAgICAgICAgIHJldHVybiBuZXcgTGF6eVdyYXBwZXIodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgbiA9IG4gPT0gbnVsbCA/IDEgOiBuYXRpdmVNYXgobmF0aXZlRmxvb3IobikgfHwgMCwgMCk7XG5cbiAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuY2xvbmUoKTtcbiAgICAgICAgaWYgKGZpbHRlcmVkKSB7XG4gICAgICAgICAgcmVzdWx0Ll9fdGFrZUNvdW50X18gPSBuYXRpdmVNaW4ocmVzdWx0Ll9fdGFrZUNvdW50X18sIG4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdC5fX3ZpZXdzX18ucHVzaCh7ICdzaXplJzogbiwgJ3R5cGUnOiBtZXRob2ROYW1lICsgKHJlc3VsdC5fX2Rpcl9fIDwgMCA/ICdSaWdodCcgOiAnJykgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH07XG5cbiAgICAgIExhenlXcmFwcGVyLnByb3RvdHlwZVttZXRob2ROYW1lICsgJ1JpZ2h0J10gPSBmdW5jdGlvbihuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJldmVyc2UoKVttZXRob2ROYW1lXShuKS5yZXZlcnNlKCk7XG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgLy8gQWRkIGBMYXp5V3JhcHBlcmAgbWV0aG9kcyB0aGF0IGFjY2VwdCBhbiBgaXRlcmF0ZWVgIHZhbHVlLlxuICAgIGFycmF5RWFjaChbJ2ZpbHRlcicsICdtYXAnLCAndGFrZVdoaWxlJ10sIGZ1bmN0aW9uKG1ldGhvZE5hbWUsIGluZGV4KSB7XG4gICAgICB2YXIgdHlwZSA9IGluZGV4ICsgMSxcbiAgICAgICAgICBpc0ZpbHRlciA9IHR5cGUgIT0gTEFaWV9NQVBfRkxBRztcblxuICAgICAgTGF6eVdyYXBwZXIucHJvdG90eXBlW21ldGhvZE5hbWVdID0gZnVuY3Rpb24oaXRlcmF0ZWUsIHRoaXNBcmcpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuY2xvbmUoKTtcbiAgICAgICAgcmVzdWx0Ll9faXRlcmF0ZWVzX18ucHVzaCh7ICdpdGVyYXRlZSc6IGdldENhbGxiYWNrKGl0ZXJhdGVlLCB0aGlzQXJnLCAxKSwgJ3R5cGUnOiB0eXBlIH0pO1xuICAgICAgICByZXN1bHQuX19maWx0ZXJlZF9fID0gcmVzdWx0Ll9fZmlsdGVyZWRfXyB8fCBpc0ZpbHRlcjtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICAvLyBBZGQgYExhenlXcmFwcGVyYCBtZXRob2RzIGZvciBgXy5maXJzdGAgYW5kIGBfLmxhc3RgLlxuICAgIGFycmF5RWFjaChbJ2ZpcnN0JywgJ2xhc3QnXSwgZnVuY3Rpb24obWV0aG9kTmFtZSwgaW5kZXgpIHtcbiAgICAgIHZhciB0YWtlTmFtZSA9ICd0YWtlJyArIChpbmRleCA/ICdSaWdodCcgOiAnJyk7XG5cbiAgICAgIExhenlXcmFwcGVyLnByb3RvdHlwZVttZXRob2ROYW1lXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpc1t0YWtlTmFtZV0oMSkudmFsdWUoKVswXTtcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICAvLyBBZGQgYExhenlXcmFwcGVyYCBtZXRob2RzIGZvciBgXy5pbml0aWFsYCBhbmQgYF8ucmVzdGAuXG4gICAgYXJyYXlFYWNoKFsnaW5pdGlhbCcsICdyZXN0J10sIGZ1bmN0aW9uKG1ldGhvZE5hbWUsIGluZGV4KSB7XG4gICAgICB2YXIgZHJvcE5hbWUgPSAnZHJvcCcgKyAoaW5kZXggPyAnJyA6ICdSaWdodCcpO1xuXG4gICAgICBMYXp5V3JhcHBlci5wcm90b3R5cGVbbWV0aG9kTmFtZV0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX19maWx0ZXJlZF9fID8gbmV3IExhenlXcmFwcGVyKHRoaXMpIDogdGhpc1tkcm9wTmFtZV0oMSk7XG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgLy8gQWRkIGBMYXp5V3JhcHBlcmAgbWV0aG9kcyBmb3IgYF8ucGx1Y2tgIGFuZCBgXy53aGVyZWAuXG4gICAgYXJyYXlFYWNoKFsncGx1Y2snLCAnd2hlcmUnXSwgZnVuY3Rpb24obWV0aG9kTmFtZSwgaW5kZXgpIHtcbiAgICAgIHZhciBvcGVyYXRpb25OYW1lID0gaW5kZXggPyAnZmlsdGVyJyA6ICdtYXAnLFxuICAgICAgICAgIGNyZWF0ZUNhbGxiYWNrID0gaW5kZXggPyBiYXNlTWF0Y2hlcyA6IHByb3BlcnR5O1xuXG4gICAgICBMYXp5V3JhcHBlci5wcm90b3R5cGVbbWV0aG9kTmFtZV0gPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdGhpc1tvcGVyYXRpb25OYW1lXShjcmVhdGVDYWxsYmFjayh2YWx1ZSkpO1xuICAgICAgfTtcbiAgICB9KTtcblxuICAgIExhenlXcmFwcGVyLnByb3RvdHlwZS5jb21wYWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5maWx0ZXIoaWRlbnRpdHkpO1xuICAgIH07XG5cbiAgICBMYXp5V3JhcHBlci5wcm90b3R5cGUucmVqZWN0ID0gZnVuY3Rpb24ocHJlZGljYXRlLCB0aGlzQXJnKSB7XG4gICAgICBwcmVkaWNhdGUgPSBnZXRDYWxsYmFjayhwcmVkaWNhdGUsIHRoaXNBcmcsIDEpO1xuICAgICAgcmV0dXJuIHRoaXMuZmlsdGVyKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiAhcHJlZGljYXRlKHZhbHVlKTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBMYXp5V3JhcHBlci5wcm90b3R5cGUuc2xpY2UgPSBmdW5jdGlvbihzdGFydCwgZW5kKSB7XG4gICAgICBzdGFydCA9IHN0YXJ0ID09IG51bGwgPyAwIDogKCtzdGFydCB8fCAwKTtcblxuICAgICAgdmFyIHJlc3VsdCA9IHRoaXM7XG4gICAgICBpZiAocmVzdWx0Ll9fZmlsdGVyZWRfXyAmJiAoc3RhcnQgPiAwIHx8IGVuZCA8IDApKSB7XG4gICAgICAgIHJldHVybiBuZXcgTGF6eVdyYXBwZXIocmVzdWx0KTtcbiAgICAgIH1cbiAgICAgIGlmIChzdGFydCA8IDApIHtcbiAgICAgICAgcmVzdWx0ID0gcmVzdWx0LnRha2VSaWdodCgtc3RhcnQpO1xuICAgICAgfSBlbHNlIGlmIChzdGFydCkge1xuICAgICAgICByZXN1bHQgPSByZXN1bHQuZHJvcChzdGFydCk7XG4gICAgICB9XG4gICAgICBpZiAoZW5kICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZW5kID0gKCtlbmQgfHwgMCk7XG4gICAgICAgIHJlc3VsdCA9IGVuZCA8IDAgPyByZXN1bHQuZHJvcFJpZ2h0KC1lbmQpIDogcmVzdWx0LnRha2UoZW5kIC0gc3RhcnQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuXG4gICAgTGF6eVdyYXBwZXIucHJvdG90eXBlLnRha2VSaWdodFdoaWxlID0gZnVuY3Rpb24ocHJlZGljYXRlLCB0aGlzQXJnKSB7XG4gICAgICByZXR1cm4gdGhpcy5yZXZlcnNlKCkudGFrZVdoaWxlKHByZWRpY2F0ZSwgdGhpc0FyZykucmV2ZXJzZSgpO1xuICAgIH07XG5cbiAgICBMYXp5V3JhcHBlci5wcm90b3R5cGUudG9BcnJheSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMudGFrZShQT1NJVElWRV9JTkZJTklUWSk7XG4gICAgfTtcblxuICAgIC8vIEFkZCBgTGF6eVdyYXBwZXJgIG1ldGhvZHMgdG8gYGxvZGFzaC5wcm90b3R5cGVgLlxuICAgIGJhc2VGb3JPd24oTGF6eVdyYXBwZXIucHJvdG90eXBlLCBmdW5jdGlvbihmdW5jLCBtZXRob2ROYW1lKSB7XG4gICAgICB2YXIgY2hlY2tJdGVyYXRlZSA9IC9eKD86ZmlsdGVyfG1hcHxyZWplY3QpfFdoaWxlJC8udGVzdChtZXRob2ROYW1lKSxcbiAgICAgICAgICByZXRVbndyYXBwZWQgPSAvXig/OmZpcnN0fGxhc3QpJC8udGVzdChtZXRob2ROYW1lKSxcbiAgICAgICAgICBsb2Rhc2hGdW5jID0gbG9kYXNoW3JldFVud3JhcHBlZCA/ICgndGFrZScgKyAobWV0aG9kTmFtZSA9PSAnbGFzdCcgPyAnUmlnaHQnIDogJycpKSA6IG1ldGhvZE5hbWVdO1xuXG4gICAgICBpZiAoIWxvZGFzaEZ1bmMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgbG9kYXNoLnByb3RvdHlwZVttZXRob2ROYW1lXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgYXJncyA9IHJldFVud3JhcHBlZCA/IFsxXSA6IGFyZ3VtZW50cyxcbiAgICAgICAgICAgIGNoYWluQWxsID0gdGhpcy5fX2NoYWluX18sXG4gICAgICAgICAgICB2YWx1ZSA9IHRoaXMuX193cmFwcGVkX18sXG4gICAgICAgICAgICBpc0h5YnJpZCA9ICEhdGhpcy5fX2FjdGlvbnNfXy5sZW5ndGgsXG4gICAgICAgICAgICBpc0xhenkgPSB2YWx1ZSBpbnN0YW5jZW9mIExhenlXcmFwcGVyLFxuICAgICAgICAgICAgaXRlcmF0ZWUgPSBhcmdzWzBdLFxuICAgICAgICAgICAgdXNlTGF6eSA9IGlzTGF6eSB8fCBpc0FycmF5KHZhbHVlKTtcblxuICAgICAgICBpZiAodXNlTGF6eSAmJiBjaGVja0l0ZXJhdGVlICYmIHR5cGVvZiBpdGVyYXRlZSA9PSAnZnVuY3Rpb24nICYmIGl0ZXJhdGVlLmxlbmd0aCAhPSAxKSB7XG4gICAgICAgICAgLy8gQXZvaWQgbGF6eSB1c2UgaWYgdGhlIGl0ZXJhdGVlIGhhcyBhIFwibGVuZ3RoXCIgdmFsdWUgb3RoZXIgdGhhbiBgMWAuXG4gICAgICAgICAgaXNMYXp5ID0gdXNlTGF6eSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBpbnRlcmNlcHRvciA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIChyZXRVbndyYXBwZWQgJiYgY2hhaW5BbGwpXG4gICAgICAgICAgICA/IGxvZGFzaEZ1bmModmFsdWUsIDEpWzBdXG4gICAgICAgICAgICA6IGxvZGFzaEZ1bmMuYXBwbHkodW5kZWZpbmVkLCBhcnJheVB1c2goW3ZhbHVlXSwgYXJncykpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBhY3Rpb24gPSB7ICdmdW5jJzogdGhydSwgJ2FyZ3MnOiBbaW50ZXJjZXB0b3JdLCAndGhpc0FyZyc6IHVuZGVmaW5lZCB9LFxuICAgICAgICAgICAgb25seUxhenkgPSBpc0xhenkgJiYgIWlzSHlicmlkO1xuXG4gICAgICAgIGlmIChyZXRVbndyYXBwZWQgJiYgIWNoYWluQWxsKSB7XG4gICAgICAgICAgaWYgKG9ubHlMYXp5KSB7XG4gICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLmNsb25lKCk7XG4gICAgICAgICAgICB2YWx1ZS5fX2FjdGlvbnNfXy5wdXNoKGFjdGlvbik7XG4gICAgICAgICAgICByZXR1cm4gZnVuYy5jYWxsKHZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGxvZGFzaEZ1bmMuY2FsbCh1bmRlZmluZWQsIHRoaXMudmFsdWUoKSlbMF07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFyZXRVbndyYXBwZWQgJiYgdXNlTGF6eSkge1xuICAgICAgICAgIHZhbHVlID0gb25seUxhenkgPyB2YWx1ZSA6IG5ldyBMYXp5V3JhcHBlcih0aGlzKTtcbiAgICAgICAgICB2YXIgcmVzdWx0ID0gZnVuYy5hcHBseSh2YWx1ZSwgYXJncyk7XG4gICAgICAgICAgcmVzdWx0Ll9fYWN0aW9uc19fLnB1c2goYWN0aW9uKTtcbiAgICAgICAgICByZXR1cm4gbmV3IExvZGFzaFdyYXBwZXIocmVzdWx0LCBjaGFpbkFsbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMudGhydShpbnRlcmNlcHRvcik7XG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgLy8gQWRkIGBBcnJheWAgYW5kIGBTdHJpbmdgIG1ldGhvZHMgdG8gYGxvZGFzaC5wcm90b3R5cGVgLlxuICAgIGFycmF5RWFjaChbJ2pvaW4nLCAncG9wJywgJ3B1c2gnLCAncmVwbGFjZScsICdzaGlmdCcsICdzb3J0JywgJ3NwbGljZScsICdzcGxpdCcsICd1bnNoaWZ0J10sIGZ1bmN0aW9uKG1ldGhvZE5hbWUpIHtcbiAgICAgIHZhciBmdW5jID0gKC9eKD86cmVwbGFjZXxzcGxpdCkkLy50ZXN0KG1ldGhvZE5hbWUpID8gc3RyaW5nUHJvdG8gOiBhcnJheVByb3RvKVttZXRob2ROYW1lXSxcbiAgICAgICAgICBjaGFpbk5hbWUgPSAvXig/OnB1c2h8c29ydHx1bnNoaWZ0KSQvLnRlc3QobWV0aG9kTmFtZSkgPyAndGFwJyA6ICd0aHJ1JyxcbiAgICAgICAgICByZXRVbndyYXBwZWQgPSAvXig/OmpvaW58cG9wfHJlcGxhY2V8c2hpZnQpJC8udGVzdChtZXRob2ROYW1lKTtcblxuICAgICAgbG9kYXNoLnByb3RvdHlwZVttZXRob2ROYW1lXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgICAgaWYgKHJldFVud3JhcHBlZCAmJiAhdGhpcy5fX2NoYWluX18pIHtcbiAgICAgICAgICByZXR1cm4gZnVuYy5hcHBseSh0aGlzLnZhbHVlKCksIGFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzW2NoYWluTmFtZV0oZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gZnVuYy5hcHBseSh2YWx1ZSwgYXJncyk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9KTtcblxuICAgIC8vIE1hcCBtaW5pZmllZCBmdW5jdGlvbiBuYW1lcyB0byB0aGVpciByZWFsIG5hbWVzLlxuICAgIGJhc2VGb3JPd24oTGF6eVdyYXBwZXIucHJvdG90eXBlLCBmdW5jdGlvbihmdW5jLCBtZXRob2ROYW1lKSB7XG4gICAgICB2YXIgbG9kYXNoRnVuYyA9IGxvZGFzaFttZXRob2ROYW1lXTtcbiAgICAgIGlmIChsb2Rhc2hGdW5jKSB7XG4gICAgICAgIHZhciBrZXkgPSBsb2Rhc2hGdW5jLm5hbWUsXG4gICAgICAgICAgICBuYW1lcyA9IHJlYWxOYW1lc1trZXldIHx8IChyZWFsTmFtZXNba2V5XSA9IFtdKTtcblxuICAgICAgICBuYW1lcy5wdXNoKHsgJ25hbWUnOiBtZXRob2ROYW1lLCAnZnVuYyc6IGxvZGFzaEZ1bmMgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZWFsTmFtZXNbY3JlYXRlSHlicmlkV3JhcHBlcih1bmRlZmluZWQsIEJJTkRfS0VZX0ZMQUcpLm5hbWVdID0gW3sgJ25hbWUnOiAnd3JhcHBlcicsICdmdW5jJzogdW5kZWZpbmVkIH1dO1xuXG4gICAgLy8gQWRkIGZ1bmN0aW9ucyB0byB0aGUgbGF6eSB3cmFwcGVyLlxuICAgIExhenlXcmFwcGVyLnByb3RvdHlwZS5jbG9uZSA9IGxhenlDbG9uZTtcbiAgICBMYXp5V3JhcHBlci5wcm90b3R5cGUucmV2ZXJzZSA9IGxhenlSZXZlcnNlO1xuICAgIExhenlXcmFwcGVyLnByb3RvdHlwZS52YWx1ZSA9IGxhenlWYWx1ZTtcblxuICAgIC8vIEFkZCBjaGFpbmluZyBmdW5jdGlvbnMgdG8gdGhlIGBsb2Rhc2hgIHdyYXBwZXIuXG4gICAgbG9kYXNoLnByb3RvdHlwZS5jaGFpbiA9IHdyYXBwZXJDaGFpbjtcbiAgICBsb2Rhc2gucHJvdG90eXBlLmNvbW1pdCA9IHdyYXBwZXJDb21taXQ7XG4gICAgbG9kYXNoLnByb3RvdHlwZS5jb25jYXQgPSB3cmFwcGVyQ29uY2F0O1xuICAgIGxvZGFzaC5wcm90b3R5cGUucGxhbnQgPSB3cmFwcGVyUGxhbnQ7XG4gICAgbG9kYXNoLnByb3RvdHlwZS5yZXZlcnNlID0gd3JhcHBlclJldmVyc2U7XG4gICAgbG9kYXNoLnByb3RvdHlwZS50b1N0cmluZyA9IHdyYXBwZXJUb1N0cmluZztcbiAgICBsb2Rhc2gucHJvdG90eXBlLnJ1biA9IGxvZGFzaC5wcm90b3R5cGUudG9KU09OID0gbG9kYXNoLnByb3RvdHlwZS52YWx1ZU9mID0gbG9kYXNoLnByb3RvdHlwZS52YWx1ZSA9IHdyYXBwZXJWYWx1ZTtcblxuICAgIC8vIEFkZCBmdW5jdGlvbiBhbGlhc2VzIHRvIHRoZSBgbG9kYXNoYCB3cmFwcGVyLlxuICAgIGxvZGFzaC5wcm90b3R5cGUuY29sbGVjdCA9IGxvZGFzaC5wcm90b3R5cGUubWFwO1xuICAgIGxvZGFzaC5wcm90b3R5cGUuaGVhZCA9IGxvZGFzaC5wcm90b3R5cGUuZmlyc3Q7XG4gICAgbG9kYXNoLnByb3RvdHlwZS5zZWxlY3QgPSBsb2Rhc2gucHJvdG90eXBlLmZpbHRlcjtcbiAgICBsb2Rhc2gucHJvdG90eXBlLnRhaWwgPSBsb2Rhc2gucHJvdG90eXBlLnJlc3Q7XG5cbiAgICByZXR1cm4gbG9kYXNoO1xuICB9XG5cbiAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgLy8gRXhwb3J0IGxvZGFzaC5cbiAgdmFyIF8gPSBydW5JbkNvbnRleHQoKTtcblxuICAvLyBTb21lIEFNRCBidWlsZCBvcHRpbWl6ZXJzIGxpa2Ugci5qcyBjaGVjayBmb3IgY29uZGl0aW9uIHBhdHRlcm5zIGxpa2UgdGhlIGZvbGxvd2luZzpcbiAgaWYgKHR5cGVvZiBkZWZpbmUgPT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgZGVmaW5lLmFtZCA9PSAnb2JqZWN0JyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgLy8gRXhwb3NlIGxvZGFzaCB0byB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGFuIEFNRCBsb2FkZXIgaXMgcHJlc2VudCB0byBhdm9pZFxuICAgIC8vIGVycm9ycyBpbiBjYXNlcyB3aGVyZSBsb2Rhc2ggaXMgbG9hZGVkIGJ5IGEgc2NyaXB0IHRhZyBhbmQgbm90IGludGVuZGVkXG4gICAgLy8gYXMgYW4gQU1EIG1vZHVsZS4gU2VlIGh0dHA6Ly9yZXF1aXJlanMub3JnL2RvY3MvZXJyb3JzLmh0bWwjbWlzbWF0Y2ggZm9yXG4gICAgLy8gbW9yZSBkZXRhaWxzLlxuICAgIHJvb3QuXyA9IF87XG5cbiAgICAvLyBEZWZpbmUgYXMgYW4gYW5vbnltb3VzIG1vZHVsZSBzbywgdGhyb3VnaCBwYXRoIG1hcHBpbmcsIGl0IGNhbiBiZVxuICAgIC8vIHJlZmVyZW5jZWQgYXMgdGhlIFwidW5kZXJzY29yZVwiIG1vZHVsZS5cbiAgICBkZWZpbmUoZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gXztcbiAgICB9KTtcbiAgfVxuICAvLyBDaGVjayBmb3IgYGV4cG9ydHNgIGFmdGVyIGBkZWZpbmVgIGluIGNhc2UgYSBidWlsZCBvcHRpbWl6ZXIgYWRkcyBhbiBgZXhwb3J0c2Agb2JqZWN0LlxuICBlbHNlIGlmIChmcmVlRXhwb3J0cyAmJiBmcmVlTW9kdWxlKSB7XG4gICAgLy8gRXhwb3J0IGZvciBOb2RlLmpzIG9yIFJpbmdvSlMuXG4gICAgaWYgKG1vZHVsZUV4cG9ydHMpIHtcbiAgICAgIChmcmVlTW9kdWxlLmV4cG9ydHMgPSBfKS5fID0gXztcbiAgICB9XG4gICAgLy8gRXhwb3J0IGZvciBSaGlubyB3aXRoIENvbW1vbkpTIHN1cHBvcnQuXG4gICAgZWxzZSB7XG4gICAgICBmcmVlRXhwb3J0cy5fID0gXztcbiAgICB9XG4gIH1cbiAgZWxzZSB7XG4gICAgLy8gRXhwb3J0IGZvciBhIGJyb3dzZXIgb3IgUmhpbm8uXG4gICAgcm9vdC5fID0gXztcbiAgfVxufS5jYWxsKHRoaXMpKTtcbiIsIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2xpYicpXG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBhc2FwID0gcmVxdWlyZSgnYXNhcC9yYXcnKTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbi8vIFN0YXRlczpcbi8vXG4vLyAwIC0gcGVuZGluZ1xuLy8gMSAtIGZ1bGZpbGxlZCB3aXRoIF92YWx1ZVxuLy8gMiAtIHJlamVjdGVkIHdpdGggX3ZhbHVlXG4vLyAzIC0gYWRvcHRlZCB0aGUgc3RhdGUgb2YgYW5vdGhlciBwcm9taXNlLCBfdmFsdWVcbi8vXG4vLyBvbmNlIHRoZSBzdGF0ZSBpcyBubyBsb25nZXIgcGVuZGluZyAoMCkgaXQgaXMgaW1tdXRhYmxlXG5cbi8vIEFsbCBgX2AgcHJlZml4ZWQgcHJvcGVydGllcyB3aWxsIGJlIHJlZHVjZWQgdG8gYF97cmFuZG9tIG51bWJlcn1gXG4vLyBhdCBidWlsZCB0aW1lIHRvIG9iZnVzY2F0ZSB0aGVtIGFuZCBkaXNjb3VyYWdlIHRoZWlyIHVzZS5cbi8vIFdlIGRvbid0IHVzZSBzeW1ib2xzIG9yIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSB0byBmdWxseSBoaWRlIHRoZW1cbi8vIGJlY2F1c2UgdGhlIHBlcmZvcm1hbmNlIGlzbid0IGdvb2QgZW5vdWdoLlxuXG5cbi8vIHRvIGF2b2lkIHVzaW5nIHRyeS9jYXRjaCBpbnNpZGUgY3JpdGljYWwgZnVuY3Rpb25zLCB3ZVxuLy8gZXh0cmFjdCB0aGVtIHRvIGhlcmUuXG52YXIgTEFTVF9FUlJPUiA9IG51bGw7XG52YXIgSVNfRVJST1IgPSB7fTtcbmZ1bmN0aW9uIGdldFRoZW4ob2JqKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIG9iai50aGVuO1xuICB9IGNhdGNoIChleCkge1xuICAgIExBU1RfRVJST1IgPSBleDtcbiAgICByZXR1cm4gSVNfRVJST1I7XG4gIH1cbn1cblxuZnVuY3Rpb24gdHJ5Q2FsbE9uZShmbiwgYSkge1xuICB0cnkge1xuICAgIHJldHVybiBmbihhKTtcbiAgfSBjYXRjaCAoZXgpIHtcbiAgICBMQVNUX0VSUk9SID0gZXg7XG4gICAgcmV0dXJuIElTX0VSUk9SO1xuICB9XG59XG5mdW5jdGlvbiB0cnlDYWxsVHdvKGZuLCBhLCBiKSB7XG4gIHRyeSB7XG4gICAgZm4oYSwgYik7XG4gIH0gY2F0Y2ggKGV4KSB7XG4gICAgTEFTVF9FUlJPUiA9IGV4O1xuICAgIHJldHVybiBJU19FUlJPUjtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFByb21pc2U7XG5cbmZ1bmN0aW9uIFByb21pc2UoZm4pIHtcbiAgaWYgKHR5cGVvZiB0aGlzICE9PSAnb2JqZWN0Jykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Byb21pc2VzIG11c3QgYmUgY29uc3RydWN0ZWQgdmlhIG5ldycpO1xuICB9XG4gIGlmICh0eXBlb2YgZm4gIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdQcm9taXNlIGNvbnN0cnVjdG9yXFwncyBhcmd1bWVudCBpcyBub3QgYSBmdW5jdGlvbicpO1xuICB9XG4gIHRoaXMuXzQwID0gMDtcbiAgdGhpcy5fNjUgPSAwO1xuICB0aGlzLl81NSA9IG51bGw7XG4gIHRoaXMuXzcyID0gbnVsbDtcbiAgaWYgKGZuID09PSBub29wKSByZXR1cm47XG4gIGRvUmVzb2x2ZShmbiwgdGhpcyk7XG59XG5Qcm9taXNlLl8zNyA9IG51bGw7XG5Qcm9taXNlLl84NyA9IG51bGw7XG5Qcm9taXNlLl82MSA9IG5vb3A7XG5cblByb21pc2UucHJvdG90eXBlLnRoZW4gPSBmdW5jdGlvbihvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCkge1xuICBpZiAodGhpcy5jb25zdHJ1Y3RvciAhPT0gUHJvbWlzZSkge1xuICAgIHJldHVybiBzYWZlVGhlbih0aGlzLCBvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCk7XG4gIH1cbiAgdmFyIHJlcyA9IG5ldyBQcm9taXNlKG5vb3ApO1xuICBoYW5kbGUodGhpcywgbmV3IEhhbmRsZXIob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQsIHJlcykpO1xuICByZXR1cm4gcmVzO1xufTtcblxuZnVuY3Rpb24gc2FmZVRoZW4oc2VsZiwgb25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpIHtcbiAgcmV0dXJuIG5ldyBzZWxmLmNvbnN0cnVjdG9yKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICB2YXIgcmVzID0gbmV3IFByb21pc2Uobm9vcCk7XG4gICAgcmVzLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICBoYW5kbGUoc2VsZiwgbmV3IEhhbmRsZXIob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQsIHJlcykpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIGhhbmRsZShzZWxmLCBkZWZlcnJlZCkge1xuICB3aGlsZSAoc2VsZi5fNjUgPT09IDMpIHtcbiAgICBzZWxmID0gc2VsZi5fNTU7XG4gIH1cbiAgaWYgKFByb21pc2UuXzM3KSB7XG4gICAgUHJvbWlzZS5fMzcoc2VsZik7XG4gIH1cbiAgaWYgKHNlbGYuXzY1ID09PSAwKSB7XG4gICAgaWYgKHNlbGYuXzQwID09PSAwKSB7XG4gICAgICBzZWxmLl80MCA9IDE7XG4gICAgICBzZWxmLl83MiA9IGRlZmVycmVkO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoc2VsZi5fNDAgPT09IDEpIHtcbiAgICAgIHNlbGYuXzQwID0gMjtcbiAgICAgIHNlbGYuXzcyID0gW3NlbGYuXzcyLCBkZWZlcnJlZF07XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHNlbGYuXzcyLnB1c2goZGVmZXJyZWQpO1xuICAgIHJldHVybjtcbiAgfVxuICBoYW5kbGVSZXNvbHZlZChzZWxmLCBkZWZlcnJlZCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZVJlc29sdmVkKHNlbGYsIGRlZmVycmVkKSB7XG4gIGFzYXAoZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNiID0gc2VsZi5fNjUgPT09IDEgPyBkZWZlcnJlZC5vbkZ1bGZpbGxlZCA6IGRlZmVycmVkLm9uUmVqZWN0ZWQ7XG4gICAgaWYgKGNiID09PSBudWxsKSB7XG4gICAgICBpZiAoc2VsZi5fNjUgPT09IDEpIHtcbiAgICAgICAgcmVzb2x2ZShkZWZlcnJlZC5wcm9taXNlLCBzZWxmLl81NSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZWplY3QoZGVmZXJyZWQucHJvbWlzZSwgc2VsZi5fNTUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgcmV0ID0gdHJ5Q2FsbE9uZShjYiwgc2VsZi5fNTUpO1xuICAgIGlmIChyZXQgPT09IElTX0VSUk9SKSB7XG4gICAgICByZWplY3QoZGVmZXJyZWQucHJvbWlzZSwgTEFTVF9FUlJPUik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc29sdmUoZGVmZXJyZWQucHJvbWlzZSwgcmV0KTtcbiAgICB9XG4gIH0pO1xufVxuZnVuY3Rpb24gcmVzb2x2ZShzZWxmLCBuZXdWYWx1ZSkge1xuICAvLyBQcm9taXNlIFJlc29sdXRpb24gUHJvY2VkdXJlOiBodHRwczovL2dpdGh1Yi5jb20vcHJvbWlzZXMtYXBsdXMvcHJvbWlzZXMtc3BlYyN0aGUtcHJvbWlzZS1yZXNvbHV0aW9uLXByb2NlZHVyZVxuICBpZiAobmV3VmFsdWUgPT09IHNlbGYpIHtcbiAgICByZXR1cm4gcmVqZWN0KFxuICAgICAgc2VsZixcbiAgICAgIG5ldyBUeXBlRXJyb3IoJ0EgcHJvbWlzZSBjYW5ub3QgYmUgcmVzb2x2ZWQgd2l0aCBpdHNlbGYuJylcbiAgICApO1xuICB9XG4gIGlmIChcbiAgICBuZXdWYWx1ZSAmJlxuICAgICh0eXBlb2YgbmV3VmFsdWUgPT09ICdvYmplY3QnIHx8IHR5cGVvZiBuZXdWYWx1ZSA9PT0gJ2Z1bmN0aW9uJylcbiAgKSB7XG4gICAgdmFyIHRoZW4gPSBnZXRUaGVuKG5ld1ZhbHVlKTtcbiAgICBpZiAodGhlbiA9PT0gSVNfRVJST1IpIHtcbiAgICAgIHJldHVybiByZWplY3Qoc2VsZiwgTEFTVF9FUlJPUik7XG4gICAgfVxuICAgIGlmIChcbiAgICAgIHRoZW4gPT09IHNlbGYudGhlbiAmJlxuICAgICAgbmV3VmFsdWUgaW5zdGFuY2VvZiBQcm9taXNlXG4gICAgKSB7XG4gICAgICBzZWxmLl82NSA9IDM7XG4gICAgICBzZWxmLl81NSA9IG5ld1ZhbHVlO1xuICAgICAgZmluYWxlKHNlbGYpO1xuICAgICAgcmV0dXJuO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHRoZW4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGRvUmVzb2x2ZSh0aGVuLmJpbmQobmV3VmFsdWUpLCBzZWxmKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cbiAgc2VsZi5fNjUgPSAxO1xuICBzZWxmLl81NSA9IG5ld1ZhbHVlO1xuICBmaW5hbGUoc2VsZik7XG59XG5cbmZ1bmN0aW9uIHJlamVjdChzZWxmLCBuZXdWYWx1ZSkge1xuICBzZWxmLl82NSA9IDI7XG4gIHNlbGYuXzU1ID0gbmV3VmFsdWU7XG4gIGlmIChQcm9taXNlLl84Nykge1xuICAgIFByb21pc2UuXzg3KHNlbGYsIG5ld1ZhbHVlKTtcbiAgfVxuICBmaW5hbGUoc2VsZik7XG59XG5mdW5jdGlvbiBmaW5hbGUoc2VsZikge1xuICBpZiAoc2VsZi5fNDAgPT09IDEpIHtcbiAgICBoYW5kbGUoc2VsZiwgc2VsZi5fNzIpO1xuICAgIHNlbGYuXzcyID0gbnVsbDtcbiAgfVxuICBpZiAoc2VsZi5fNDAgPT09IDIpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGYuXzcyLmxlbmd0aDsgaSsrKSB7XG4gICAgICBoYW5kbGUoc2VsZiwgc2VsZi5fNzJbaV0pO1xuICAgIH1cbiAgICBzZWxmLl83MiA9IG51bGw7XG4gIH1cbn1cblxuZnVuY3Rpb24gSGFuZGxlcihvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCwgcHJvbWlzZSl7XG4gIHRoaXMub25GdWxmaWxsZWQgPSB0eXBlb2Ygb25GdWxmaWxsZWQgPT09ICdmdW5jdGlvbicgPyBvbkZ1bGZpbGxlZCA6IG51bGw7XG4gIHRoaXMub25SZWplY3RlZCA9IHR5cGVvZiBvblJlamVjdGVkID09PSAnZnVuY3Rpb24nID8gb25SZWplY3RlZCA6IG51bGw7XG4gIHRoaXMucHJvbWlzZSA9IHByb21pc2U7XG59XG5cbi8qKlxuICogVGFrZSBhIHBvdGVudGlhbGx5IG1pc2JlaGF2aW5nIHJlc29sdmVyIGZ1bmN0aW9uIGFuZCBtYWtlIHN1cmVcbiAqIG9uRnVsZmlsbGVkIGFuZCBvblJlamVjdGVkIGFyZSBvbmx5IGNhbGxlZCBvbmNlLlxuICpcbiAqIE1ha2VzIG5vIGd1YXJhbnRlZXMgYWJvdXQgYXN5bmNocm9ueS5cbiAqL1xuZnVuY3Rpb24gZG9SZXNvbHZlKGZuLCBwcm9taXNlKSB7XG4gIHZhciBkb25lID0gZmFsc2U7XG4gIHZhciByZXMgPSB0cnlDYWxsVHdvKGZuLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICBpZiAoZG9uZSkgcmV0dXJuO1xuICAgIGRvbmUgPSB0cnVlO1xuICAgIHJlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgaWYgKGRvbmUpIHJldHVybjtcbiAgICBkb25lID0gdHJ1ZTtcbiAgICByZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgfSk7XG4gIGlmICghZG9uZSAmJiByZXMgPT09IElTX0VSUk9SKSB7XG4gICAgZG9uZSA9IHRydWU7XG4gICAgcmVqZWN0KHByb21pc2UsIExBU1RfRVJST1IpO1xuICB9XG59XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBQcm9taXNlID0gcmVxdWlyZSgnLi9jb3JlLmpzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gUHJvbWlzZTtcblByb21pc2UucHJvdG90eXBlLmRvbmUgPSBmdW5jdGlvbiAob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpIHtcbiAgdmFyIHNlbGYgPSBhcmd1bWVudHMubGVuZ3RoID8gdGhpcy50aGVuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgOiB0aGlzO1xuICBzZWxmLnRoZW4obnVsbCwgZnVuY3Rpb24gKGVycikge1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH0sIDApO1xuICB9KTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbi8vVGhpcyBmaWxlIGNvbnRhaW5zIHRoZSBFUzYgZXh0ZW5zaW9ucyB0byB0aGUgY29yZSBQcm9taXNlcy9BKyBBUElcblxudmFyIFByb21pc2UgPSByZXF1aXJlKCcuL2NvcmUuanMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBQcm9taXNlO1xuXG4vKiBTdGF0aWMgRnVuY3Rpb25zICovXG5cbnZhciBUUlVFID0gdmFsdWVQcm9taXNlKHRydWUpO1xudmFyIEZBTFNFID0gdmFsdWVQcm9taXNlKGZhbHNlKTtcbnZhciBOVUxMID0gdmFsdWVQcm9taXNlKG51bGwpO1xudmFyIFVOREVGSU5FRCA9IHZhbHVlUHJvbWlzZSh1bmRlZmluZWQpO1xudmFyIFpFUk8gPSB2YWx1ZVByb21pc2UoMCk7XG52YXIgRU1QVFlTVFJJTkcgPSB2YWx1ZVByb21pc2UoJycpO1xuXG5mdW5jdGlvbiB2YWx1ZVByb21pc2UodmFsdWUpIHtcbiAgdmFyIHAgPSBuZXcgUHJvbWlzZShQcm9taXNlLl82MSk7XG4gIHAuXzY1ID0gMTtcbiAgcC5fNTUgPSB2YWx1ZTtcbiAgcmV0dXJuIHA7XG59XG5Qcm9taXNlLnJlc29sdmUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgaWYgKHZhbHVlIGluc3RhbmNlb2YgUHJvbWlzZSkgcmV0dXJuIHZhbHVlO1xuXG4gIGlmICh2YWx1ZSA9PT0gbnVsbCkgcmV0dXJuIE5VTEw7XG4gIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSByZXR1cm4gVU5ERUZJTkVEO1xuICBpZiAodmFsdWUgPT09IHRydWUpIHJldHVybiBUUlVFO1xuICBpZiAodmFsdWUgPT09IGZhbHNlKSByZXR1cm4gRkFMU0U7XG4gIGlmICh2YWx1ZSA9PT0gMCkgcmV0dXJuIFpFUk87XG4gIGlmICh2YWx1ZSA9PT0gJycpIHJldHVybiBFTVBUWVNUUklORztcblxuICBpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyB8fCB0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICB0cnkge1xuICAgICAgdmFyIHRoZW4gPSB2YWx1ZS50aGVuO1xuICAgICAgaWYgKHR5cGVvZiB0aGVuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSh0aGVuLmJpbmQodmFsdWUpKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChleCkge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgcmVqZWN0KGV4KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdmFsdWVQcm9taXNlKHZhbHVlKTtcbn07XG5cblByb21pc2UuYWxsID0gZnVuY3Rpb24gKGFycikge1xuICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFycik7XG5cbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICBpZiAoYXJncy5sZW5ndGggPT09IDApIHJldHVybiByZXNvbHZlKFtdKTtcbiAgICB2YXIgcmVtYWluaW5nID0gYXJncy5sZW5ndGg7XG4gICAgZnVuY3Rpb24gcmVzKGksIHZhbCkge1xuICAgICAgaWYgKHZhbCAmJiAodHlwZW9mIHZhbCA9PT0gJ29iamVjdCcgfHwgdHlwZW9mIHZhbCA9PT0gJ2Z1bmN0aW9uJykpIHtcbiAgICAgICAgaWYgKHZhbCBpbnN0YW5jZW9mIFByb21pc2UgJiYgdmFsLnRoZW4gPT09IFByb21pc2UucHJvdG90eXBlLnRoZW4pIHtcbiAgICAgICAgICB3aGlsZSAodmFsLl82NSA9PT0gMykge1xuICAgICAgICAgICAgdmFsID0gdmFsLl81NTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHZhbC5fNjUgPT09IDEpIHJldHVybiByZXMoaSwgdmFsLl81NSk7XG4gICAgICAgICAgaWYgKHZhbC5fNjUgPT09IDIpIHJlamVjdCh2YWwuXzU1KTtcbiAgICAgICAgICB2YWwudGhlbihmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICByZXMoaSwgdmFsKTtcbiAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgdGhlbiA9IHZhbC50aGVuO1xuICAgICAgICAgIGlmICh0eXBlb2YgdGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdmFyIHAgPSBuZXcgUHJvbWlzZSh0aGVuLmJpbmQodmFsKSk7XG4gICAgICAgICAgICBwLnRoZW4oZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgICByZXMoaSwgdmFsKTtcbiAgICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBhcmdzW2ldID0gdmFsO1xuICAgICAgaWYgKC0tcmVtYWluaW5nID09PSAwKSB7XG4gICAgICAgIHJlc29sdmUoYXJncyk7XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgICAgcmVzKGksIGFyZ3NbaV0pO1xuICAgIH1cbiAgfSk7XG59O1xuXG5Qcm9taXNlLnJlamVjdCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgIHJlamVjdCh2YWx1ZSk7XG4gIH0pO1xufTtcblxuUHJvbWlzZS5yYWNlID0gZnVuY3Rpb24gKHZhbHVlcykge1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgIHZhbHVlcy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAgIFByb21pc2UucmVzb2x2ZSh2YWx1ZSkudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgIH0pO1xuICB9KTtcbn07XG5cbi8qIFByb3RvdHlwZSBNZXRob2RzICovXG5cblByb21pc2UucHJvdG90eXBlWydjYXRjaCddID0gZnVuY3Rpb24gKG9uUmVqZWN0ZWQpIHtcbiAgcmV0dXJuIHRoaXMudGhlbihudWxsLCBvblJlamVjdGVkKTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBQcm9taXNlID0gcmVxdWlyZSgnLi9jb3JlLmpzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gUHJvbWlzZTtcblByb21pc2UucHJvdG90eXBlWydmaW5hbGx5J10gPSBmdW5jdGlvbiAoZikge1xuICByZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZigpKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9KTtcbiAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZigpKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgIHRocm93IGVycjtcbiAgICB9KTtcbiAgfSk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vY29yZS5qcycpO1xucmVxdWlyZSgnLi9kb25lLmpzJyk7XG5yZXF1aXJlKCcuL2ZpbmFsbHkuanMnKTtcbnJlcXVpcmUoJy4vZXM2LWV4dGVuc2lvbnMuanMnKTtcbnJlcXVpcmUoJy4vbm9kZS1leHRlbnNpb25zLmpzJyk7XG5yZXF1aXJlKCcuL3N5bmNocm9ub3VzLmpzJyk7XG4iLCIndXNlIHN0cmljdCc7XG5cbi8vIFRoaXMgZmlsZSBjb250YWlucyB0aGVuL3Byb21pc2Ugc3BlY2lmaWMgZXh0ZW5zaW9ucyB0aGF0IGFyZSBvbmx5IHVzZWZ1bFxuLy8gZm9yIG5vZGUuanMgaW50ZXJvcFxuXG52YXIgUHJvbWlzZSA9IHJlcXVpcmUoJy4vY29yZS5qcycpO1xudmFyIGFzYXAgPSByZXF1aXJlKCdhc2FwJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gUHJvbWlzZTtcblxuLyogU3RhdGljIEZ1bmN0aW9ucyAqL1xuXG5Qcm9taXNlLmRlbm9kZWlmeSA9IGZ1bmN0aW9uIChmbiwgYXJndW1lbnRDb3VudCkge1xuICBpZiAoXG4gICAgdHlwZW9mIGFyZ3VtZW50Q291bnQgPT09ICdudW1iZXInICYmIGFyZ3VtZW50Q291bnQgIT09IEluZmluaXR5XG4gICkge1xuICAgIHJldHVybiBkZW5vZGVpZnlXaXRoQ291bnQoZm4sIGFyZ3VtZW50Q291bnQpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBkZW5vZGVpZnlXaXRob3V0Q291bnQoZm4pO1xuICB9XG59O1xuXG52YXIgY2FsbGJhY2tGbiA9IChcbiAgJ2Z1bmN0aW9uIChlcnIsIHJlcykgeycgK1xuICAnaWYgKGVycikgeyByaihlcnIpOyB9IGVsc2UgeyBycyhyZXMpOyB9JyArXG4gICd9J1xuKTtcbmZ1bmN0aW9uIGRlbm9kZWlmeVdpdGhDb3VudChmbiwgYXJndW1lbnRDb3VudCkge1xuICB2YXIgYXJncyA9IFtdO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50Q291bnQ7IGkrKykge1xuICAgIGFyZ3MucHVzaCgnYScgKyBpKTtcbiAgfVxuICB2YXIgYm9keSA9IFtcbiAgICAncmV0dXJuIGZ1bmN0aW9uICgnICsgYXJncy5qb2luKCcsJykgKyAnKSB7JyxcbiAgICAndmFyIHNlbGYgPSB0aGlzOycsXG4gICAgJ3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocnMsIHJqKSB7JyxcbiAgICAndmFyIHJlcyA9IGZuLmNhbGwoJyxcbiAgICBbJ3NlbGYnXS5jb25jYXQoYXJncykuY29uY2F0KFtjYWxsYmFja0ZuXSkuam9pbignLCcpLFxuICAgICcpOycsXG4gICAgJ2lmIChyZXMgJiYnLFxuICAgICcodHlwZW9mIHJlcyA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgcmVzID09PSBcImZ1bmN0aW9uXCIpICYmJyxcbiAgICAndHlwZW9mIHJlcy50aGVuID09PSBcImZ1bmN0aW9uXCInLFxuICAgICcpIHtycyhyZXMpO30nLFxuICAgICd9KTsnLFxuICAgICd9OydcbiAgXS5qb2luKCcnKTtcbiAgcmV0dXJuIEZ1bmN0aW9uKFsnUHJvbWlzZScsICdmbiddLCBib2R5KShQcm9taXNlLCBmbik7XG59XG5mdW5jdGlvbiBkZW5vZGVpZnlXaXRob3V0Q291bnQoZm4pIHtcbiAgdmFyIGZuTGVuZ3RoID0gTWF0aC5tYXgoZm4ubGVuZ3RoIC0gMSwgMyk7XG4gIHZhciBhcmdzID0gW107XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgZm5MZW5ndGg7IGkrKykge1xuICAgIGFyZ3MucHVzaCgnYScgKyBpKTtcbiAgfVxuICB2YXIgYm9keSA9IFtcbiAgICAncmV0dXJuIGZ1bmN0aW9uICgnICsgYXJncy5qb2luKCcsJykgKyAnKSB7JyxcbiAgICAndmFyIHNlbGYgPSB0aGlzOycsXG4gICAgJ3ZhciBhcmdzOycsXG4gICAgJ3ZhciBhcmdMZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoOycsXG4gICAgJ2lmIChhcmd1bWVudHMubGVuZ3RoID4gJyArIGZuTGVuZ3RoICsgJykgeycsXG4gICAgJ2FyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCArIDEpOycsXG4gICAgJ2ZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7JyxcbiAgICAnYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTsnLFxuICAgICd9JyxcbiAgICAnfScsXG4gICAgJ3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocnMsIHJqKSB7JyxcbiAgICAndmFyIGNiID0gJyArIGNhbGxiYWNrRm4gKyAnOycsXG4gICAgJ3ZhciByZXM7JyxcbiAgICAnc3dpdGNoIChhcmdMZW5ndGgpIHsnLFxuICAgIGFyZ3MuY29uY2F0KFsnZXh0cmEnXSkubWFwKGZ1bmN0aW9uIChfLCBpbmRleCkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgJ2Nhc2UgJyArIChpbmRleCkgKyAnOicgK1xuICAgICAgICAncmVzID0gZm4uY2FsbCgnICsgWydzZWxmJ10uY29uY2F0KGFyZ3Muc2xpY2UoMCwgaW5kZXgpKS5jb25jYXQoJ2NiJykuam9pbignLCcpICsgJyk7JyArXG4gICAgICAgICdicmVhazsnXG4gICAgICApO1xuICAgIH0pLmpvaW4oJycpLFxuICAgICdkZWZhdWx0OicsXG4gICAgJ2FyZ3NbYXJnTGVuZ3RoXSA9IGNiOycsXG4gICAgJ3JlcyA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpOycsXG4gICAgJ30nLFxuICAgIFxuICAgICdpZiAocmVzICYmJyxcbiAgICAnKHR5cGVvZiByZXMgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIHJlcyA9PT0gXCJmdW5jdGlvblwiKSAmJicsXG4gICAgJ3R5cGVvZiByZXMudGhlbiA9PT0gXCJmdW5jdGlvblwiJyxcbiAgICAnKSB7cnMocmVzKTt9JyxcbiAgICAnfSk7JyxcbiAgICAnfTsnXG4gIF0uam9pbignJyk7XG5cbiAgcmV0dXJuIEZ1bmN0aW9uKFxuICAgIFsnUHJvbWlzZScsICdmbiddLFxuICAgIGJvZHlcbiAgKShQcm9taXNlLCBmbik7XG59XG5cblByb21pc2Uubm9kZWlmeSA9IGZ1bmN0aW9uIChmbikge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcbiAgICB2YXIgY2FsbGJhY2sgPVxuICAgICAgdHlwZW9mIGFyZ3NbYXJncy5sZW5ndGggLSAxXSA9PT0gJ2Z1bmN0aW9uJyA/IGFyZ3MucG9wKCkgOiBudWxsO1xuICAgIHZhciBjdHggPSB0aGlzO1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKS5ub2RlaWZ5KGNhbGxiYWNrLCBjdHgpO1xuICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICBpZiAoY2FsbGJhY2sgPT09IG51bGwgfHwgdHlwZW9mIGNhbGxiYWNrID09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgcmVqZWN0KGV4KTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhc2FwKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBjYWxsYmFjay5jYWxsKGN0eCwgZXgpO1xuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxuUHJvbWlzZS5wcm90b3R5cGUubm9kZWlmeSA9IGZ1bmN0aW9uIChjYWxsYmFjaywgY3R4KSB7XG4gIGlmICh0eXBlb2YgY2FsbGJhY2sgIT0gJ2Z1bmN0aW9uJykgcmV0dXJuIHRoaXM7XG5cbiAgdGhpcy50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIGFzYXAoZnVuY3Rpb24gKCkge1xuICAgICAgY2FsbGJhY2suY2FsbChjdHgsIG51bGwsIHZhbHVlKTtcbiAgICB9KTtcbiAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgIGFzYXAoZnVuY3Rpb24gKCkge1xuICAgICAgY2FsbGJhY2suY2FsbChjdHgsIGVycik7XG4gICAgfSk7XG4gIH0pO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIFByb21pc2UgPSByZXF1aXJlKCcuL2NvcmUuanMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBQcm9taXNlO1xuUHJvbWlzZS5lbmFibGVTeW5jaHJvbm91cyA9IGZ1bmN0aW9uICgpIHtcbiAgUHJvbWlzZS5wcm90b3R5cGUuaXNQZW5kaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0U3RhdGUoKSA9PSAwO1xuICB9O1xuXG4gIFByb21pc2UucHJvdG90eXBlLmlzRnVsZmlsbGVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0U3RhdGUoKSA9PSAxO1xuICB9O1xuXG4gIFByb21pc2UucHJvdG90eXBlLmlzUmVqZWN0ZWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRTdGF0ZSgpID09IDI7XG4gIH07XG5cbiAgUHJvbWlzZS5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuXzY1ID09PSAzKSB7XG4gICAgICByZXR1cm4gdGhpcy5fNTUuZ2V0VmFsdWUoKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuaXNGdWxmaWxsZWQoKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgZ2V0IGEgdmFsdWUgb2YgYW4gdW5mdWxmaWxsZWQgcHJvbWlzZS4nKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fNTU7XG4gIH07XG5cbiAgUHJvbWlzZS5wcm90b3R5cGUuZ2V0UmVhc29uID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLl82NSA9PT0gMykge1xuICAgICAgcmV0dXJuIHRoaXMuXzU1LmdldFJlYXNvbigpO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5pc1JlamVjdGVkKCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGdldCBhIHJlamVjdGlvbiByZWFzb24gb2YgYSBub24tcmVqZWN0ZWQgcHJvbWlzZS4nKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fNTU7XG4gIH07XG5cbiAgUHJvbWlzZS5wcm90b3R5cGUuZ2V0U3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuXzY1ID09PSAzKSB7XG4gICAgICByZXR1cm4gdGhpcy5fNTUuZ2V0U3RhdGUoKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuXzY1ID09PSAtMSB8fCB0aGlzLl82NSA9PT0gLTIpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl82NTtcbiAgfTtcbn07XG5cblByb21pc2UuZGlzYWJsZVN5bmNocm9ub3VzID0gZnVuY3Rpb24oKSB7XG4gIFByb21pc2UucHJvdG90eXBlLmlzUGVuZGluZyA9IHVuZGVmaW5lZDtcbiAgUHJvbWlzZS5wcm90b3R5cGUuaXNGdWxmaWxsZWQgPSB1bmRlZmluZWQ7XG4gIFByb21pc2UucHJvdG90eXBlLmlzUmVqZWN0ZWQgPSB1bmRlZmluZWQ7XG4gIFByb21pc2UucHJvdG90eXBlLmdldFZhbHVlID0gdW5kZWZpbmVkO1xuICBQcm9taXNlLnByb3RvdHlwZS5nZXRSZWFzb24gPSB1bmRlZmluZWQ7XG4gIFByb21pc2UucHJvdG90eXBlLmdldFN0YXRlID0gdW5kZWZpbmVkO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcclxudmFyIGRpYWxvZyA9IHJlcXVpcmUoJy4vZGlhbG9nJyk7XHJcblxyXG52YXIgJGNhY2hlID0ge307XHJcblxyXG5mdW5jdGlvbiBpbml0aWFsaXplQ2FjaGUoKSB7XHJcbiAgICAkY2FjaGUucHJpbWFyeSA9ICQoJyNwcmltYXJ5Jyk7XHJcbiAgICAkY2FjaGUuY2hlY2tvdXRGb3JtID0gJGNhY2hlLnByaW1hcnkuZmluZCgnLmNoZWNrb3V0LXNoaXBwaW5nLmFkZHJlc3MnKS5sZW5ndGggPiAwID8gJGNhY2hlLnByaW1hcnkuZmluZCgnLmNoZWNrb3V0LXNoaXBwaW5nLmFkZHJlc3MnKSA6ICRjYWNoZS5wcmltYXJ5LmZpbmQoJy5jaGVja291dC1iaWxsaW5nLmFkZHJlc3MnKTtcclxuICAgICRjYWNoZS5zdWJtaXRGb3JtQnV0dG9uID0gJGNhY2hlLmNoZWNrb3V0Rm9ybS5maW5kKCdidXR0b24uc2F2ZVNoaXBwaW5nJykubGVuZ3RoID4gMCA/ICRjYWNoZS5jaGVja291dEZvcm0uZmluZCgnYnV0dG9uLnNhdmVTaGlwcGluZycpIDogJGNhY2hlLmNoZWNrb3V0Rm9ybS5maW5kKCdidXR0b25bbmFtZSQ9X3NhdmVdJyk7XHJcbiAgICAkY2FjaGUudmFsaWRhdG9pb25EaWFsb2cgPSAkY2FjaGUucHJpbWFyeS5maW5kKCcjYWRkcmVzcy12YWxpZGF0aW9uLWRpYWxvZycpO1xyXG4gICAgJGNhY2hlLmJ5UGFzc0RBViA9ICRjYWNoZS5jaGVja291dEZvcm0uZmluZCgnLmJ5cGFzc0RBVicpO1xyXG4gICAgJGNhY2hlLmFkZHJlc3MxID0gJGNhY2hlLmNoZWNrb3V0Rm9ybS5maW5kKCdpbnB1dFtuYW1lJD1cIl9hZGRyZXNzMVwiXScpO1xyXG4gICAgJGNhY2hlLmFkZHJlc3MyID0gJGNhY2hlLmNoZWNrb3V0Rm9ybS5maW5kKCdpbnB1dFtuYW1lJD1cIl9hZGRyZXNzMlwiXScpO1xyXG4gICAgJGNhY2hlLmNpdHkgPSAkY2FjaGUuY2hlY2tvdXRGb3JtLmZpbmQoJ2lucHV0W25hbWUkPVwiX2NpdHlcIl0nKTtcclxuICAgICRjYWNoZS5zdGF0ZUNvZGUgPSAkY2FjaGUuY2hlY2tvdXRGb3JtLmZpbmQoJ3NlbGVjdFtpZCQ9XCJfc3RhdGVcIl0nKTtcclxuICAgICRjYWNoZS5jb3VudHJ5Q29kZSA9ICRjYWNoZS5jaGVja291dEZvcm0uZmluZCgnc2VsZWN0W2lkJD1cIl9jb3VudHJ5XCJdJyk7XHJcbiAgICAkY2FjaGUucG9zdGFsQ29kZSA9ICRjYWNoZS5jaGVja291dEZvcm0uZmluZCgnaW5wdXRbbmFtZSQ9XCJfcG9zdGFsXCJdJyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGluaXRpYWxpemVEb20oKSB7XHJcbiAgICBpZiAoJGNhY2hlLnZhbGlkYXRvaW9uRGlhbG9nLmxlbmd0aCA+IDApIHtcclxuXHJcbiAgICAgICAgdmFyIGRsZyA9IGRpYWxvZy5jcmVhdGUoe1xyXG4gICAgICAgICAgICB0YXJnZXQ6ICRjYWNoZS52YWxpZGF0b2lvbkRpYWxvZyxcclxuICAgICAgICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDMwMCxcclxuICAgICAgICAgICAgICAgIGRpYWxvZ0NsYXNzOiAnYWRkcmVzcy12YWxpZGF0aW9uLWRpYWxvZycsXHJcbiAgICAgICAgICAgICAgICBvcGVuOiBpbml0aWFsaXplRXZlbnRzXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJGNhY2hlLnZhbGlkYXRvaW9uRGlhbG9nLnNob3coKTtcclxuICAgICAgICBkbGcuZGlhbG9nKCdvcGVuJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGluaXRpYWxpemVFdmVudHMoKSB7XHJcblxyXG4gICAgJGNhY2hlLnZhbGlkYXRvaW9uRGlhbG9nLm9uKCdjbGljaycsICcjb3JpZ2luYWwtYWRkcmVzcy1lZGl0JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICRjYWNoZS52YWxpZGF0b2lvbkRpYWxvZy5kaWFsb2coJ2Nsb3NlJyk7XHJcbiAgICAgICAgJCgnLnNoaXBwaW5nLWFkZHJlc3MtZmllbGQtc2VjdGlvbicpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgJCgnLnNlbGVjdGVkLXNoaXBwaW5nLWFkZHJlc3MnKS5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICQoJy5uZXctYWRkcmVzcy1maWVsZCcpLmFkZENsYXNzKCdoaWRlJyk7XHJcblxyXG4gICAgICAgIC8qalF1ZXJ5KCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgIHNjcm9sbFRvcDogJCgnI25hdmlnYXRpb24nKS5wb3NpdGlvbigpLnRvcFxyXG4gICAgICAgIH0sIDUwMCk7Ki9cclxuICAgIH0pO1xyXG4gICAgJGNhY2hlLnZhbGlkYXRvaW9uRGlhbG9nLm9uKCdjbGljaycsICcjc3VnZ2VzdGVkLWFkZHJlc3MtZWRpdC0xJywgZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAkKCcuc2hpcHBpbmctYWRkcmVzcy1maWVsZC1zZWN0aW9uJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAkKCcuc2VsZWN0ZWQtc2hpcHBpbmctYWRkcmVzcycpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkY2FjaGUudmFsaWRhdG9pb25EaWFsb2cub24oJ2NsaWNrJywgJyNzaGlwLXRvLW9yaWdpbmFsLWFkZHJlc3MnLCBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICRjYWNoZS52YWxpZGF0b2lvbkRpYWxvZy5kaWFsb2coJ2Nsb3NlJyk7XHJcbiAgICAgICAgJGNhY2hlLmJ5UGFzc0RBVi5hdHRyKCd2YWx1ZScsICd0cnVlJyk7XHJcbiAgICAgICAgJGNhY2hlLnN1Ym1pdEZvcm1CdXR0b24uY2xpY2soKTtcclxuICAgIH0pO1xyXG5cclxuICAgICRjYWNoZS52YWxpZGF0b2lvbkRpYWxvZy5vbignY2xpY2snLCAnW2lkfD1cInN1Z2dlc3RlZC1hZGRyZXNzLWVkaXRcIl0nLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHNlbGVjdGVkQWRkcmVzcyA9ICQodGhpcykuZGF0YSgnYWRkcmVzcycpLnNwbGl0KCd8fCcpO1xyXG4gICAgICAgICRjYWNoZS5hZGRyZXNzMS52YWwoc2VsZWN0ZWRBZGRyZXNzWzBdKTtcclxuICAgICAgICBpZiAoc2VsZWN0ZWRBZGRyZXNzWzFdICE9PSAndW5kZWZpbmVkJyAmJiBzZWxlY3RlZEFkZHJlc3NbMV0gIT09ICcnKSB7XHJcbiAgICAgICAgICAgICRjYWNoZS5hZGRyZXNzMi52YWwoc2VsZWN0ZWRBZGRyZXNzWzFdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgJGNhY2hlLmNpdHkudmFsKHNlbGVjdGVkQWRkcmVzc1syXSk7XHJcbiAgICAgICAgJGNhY2hlLnN0YXRlQ29kZS52YWwoc2VsZWN0ZWRBZGRyZXNzWzNdKTtcclxuICAgICAgICAkY2FjaGUuY291bnRyeUNvZGUudmFsKHNlbGVjdGVkQWRkcmVzc1s0XSk7XHJcbiAgICAgICAgJGNhY2hlLnBvc3RhbENvZGUudmFsKHNlbGVjdGVkQWRkcmVzc1s1XSk7XHJcbiAgICAgICAgJGNhY2hlLnZhbGlkYXRvaW9uRGlhbG9nLmRpYWxvZygnY2xvc2UnKTtcclxuICAgICAgICBqUXVlcnkoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgc2Nyb2xsVG9wOiAkKCcjbmF2aWdhdGlvbicpLnBvc2l0aW9uKCkudG9wXHJcbiAgICAgICAgfSwgNTAwKTtcclxuICAgIH0pO1xyXG5cclxuICAgICRjYWNoZS52YWxpZGF0b2lvbkRpYWxvZy5vbignY2xpY2snLCAnW2lkfD1cInNoaXAtdG8tYWRkcmVzcy1zZWxlY3RlZFwiXScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgc2VsZWN0ZWRBZGRyZXNzID0gJCh0aGlzKS5kYXRhKCdhZGRyZXNzJykuc3BsaXQoJ3x8Jyk7XHJcbiAgICAgICAgJGNhY2hlLmFkZHJlc3MxLnZhbChzZWxlY3RlZEFkZHJlc3NbMF0pO1xyXG4gICAgICAgIGlmIChzZWxlY3RlZEFkZHJlc3NbMV0gIT09ICd1bmRlZmluZWQnICYmIHNlbGVjdGVkQWRkcmVzc1sxXSAhPT0gJycpIHtcclxuICAgICAgICAgICAgJGNhY2hlLmFkZHJlc3MyLnZhbChzZWxlY3RlZEFkZHJlc3NbMV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkY2FjaGUuY2l0eS52YWwoc2VsZWN0ZWRBZGRyZXNzWzJdKTtcclxuICAgICAgICAkY2FjaGUuc3RhdGVDb2RlLnZhbChzZWxlY3RlZEFkZHJlc3NbM10pO1xyXG4gICAgICAgICRjYWNoZS5jb3VudHJ5Q29kZS52YWwoc2VsZWN0ZWRBZGRyZXNzWzRdKTtcclxuICAgICAgICAkY2FjaGUucG9zdGFsQ29kZS52YWwoc2VsZWN0ZWRBZGRyZXNzWzVdKTtcclxuICAgICAgICAkY2FjaGUuYnlQYXNzREFWLmF0dHIoJ3ZhbHVlJywgJ3RydWUnKTtcclxuICAgICAgICAkY2FjaGUudmFsaWRhdG9pb25EaWFsb2cuZGlhbG9nKCdjbG9zZScpO1xyXG5cclxuICAgICAgICAkY2FjaGUuc3VibWl0Rm9ybUJ1dHRvbi5jbGljaygpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGluaXRpYWxpemVDYWNoZSgpO1xyXG4gICAgaW5pdGlhbGl6ZURvbSgpO1xyXG59O1xyXG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG52YXIgcHJvZ3Jlc3MgPSByZXF1aXJlKCcuL3Byb2dyZXNzJyksXHJcbiAgICB1dGlsID0gcmVxdWlyZSgnLi91dGlsJyk7XHJcblxyXG52YXIgY3VycmVudFJlcXVlc3RzID0gW107XHJcblxyXG4vKipcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBkZXNjcmlwdGlvbiBBamF4IHJlcXVlc3QgdG8gZ2V0IGpzb24gcmVzcG9uc2VcclxuICogQHBhcmFtIHtCb29sZWFufSBhc3luYyAgQXN5bmNocm9ub3VzIG9yIG5vdFxyXG4gKiBAcGFyYW0ge1N0cmluZ30gdXJsIFVSSSBmb3IgdGhlIHJlcXVlc3RcclxuICogQHBhcmFtIHtPYmplY3R9IGRhdGEgTmFtZS9WYWx1ZSBwYWlyIGRhdGEgcmVxdWVzdFxyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayAgQ2FsbGJhY2sgZnVuY3Rpb24gdG8gYmUgY2FsbGVkXHJcbiAqL1xyXG52YXIgZ2V0SnNvbiA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICBvcHRpb25zLnVybCA9IHV0aWwudG9BYnNvbHV0ZVVybChvcHRpb25zLnVybCk7XHJcbiAgICAvLyByZXR1cm4gaWYgbm8gdXJsIGV4aXN0cyBvciB1cmwgbWF0Y2hlcyBhIGN1cnJlbnQgcmVxdWVzdFxyXG4gICAgaWYgKCFvcHRpb25zLnVybCB8fCBjdXJyZW50UmVxdWVzdHNbb3B0aW9ucy51cmxdKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGN1cnJlbnRSZXF1ZXN0c1tvcHRpb25zLnVybF0gPSB0cnVlO1xyXG5cclxuICAgIC8vIG1ha2UgdGhlIHNlcnZlciBjYWxsXHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgdXJsOiBvcHRpb25zLnVybCxcclxuICAgICAgICBhc3luYzogKHR5cGVvZiBvcHRpb25zLmFzeW5jID09PSAndW5kZWZpbmVkJyB8fCBvcHRpb25zLmFzeW5jID09PSBudWxsKSA/IHRydWUgOiBvcHRpb25zLmFzeW5jLFxyXG4gICAgICAgIGRhdGE6IG9wdGlvbnMuZGF0YSB8fCB7fSxcclxuICAgICAgICB0eXBlOiBvcHRpb25zLnR5cGUgfHwgJ0dFVCcgLy9QUkVWQUlMLUFkZGVkIHRvIGhhbmRsZSBzZWN1cml0eSBmb3JtIGlzc3Vlcy5cclxuICAgIH0pXHJcbiAgICAvLyBzdWNjZXNzXHJcbiAgICAgICAgLmRvbmUoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICBvcHRpb25zLmNhbGxiYWNrKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLy8gZmFpbGVkXHJcbiAgICAgICAgLmZhaWwoZnVuY3Rpb24gKHhociwgdGV4dFN0YXR1cykge1xyXG4gICAgICAgICAgICBpZiAodGV4dFN0YXR1cyA9PT0gJ3BhcnNlcmVycm9yJykge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmFsZXJ0KFJlc291cmNlcy5CQURfUkVTUE9OU0UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICBvcHRpb25zLmNhbGxiYWNrKG51bGwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAvLyBleGVjdXRlZCBvbiBzdWNjZXNzIG9yIGZhaWxcclxuICAgICAgICAuYWx3YXlzKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gcmVtb3ZlIGN1cnJlbnQgcmVxdWVzdCBmcm9tIGhhc2hcclxuICAgICAgICAgICAgaWYgKGN1cnJlbnRSZXF1ZXN0c1tvcHRpb25zLnVybF0pIHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBjdXJyZW50UmVxdWVzdHNbb3B0aW9ucy51cmxdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbn07XHJcbi8qKlxyXG4gKiBAZnVuY3Rpb25cclxuICogQGRlc2NyaXB0aW9uIGFqYXggcmVxdWVzdCB0byBsb2FkIGh0bWwgcmVzcG9uc2UgaW4gYSBnaXZlbiBjb250YWluZXJcclxuICogQHBhcmFtIHtTdHJpbmd9IHVybCBVUkkgZm9yIHRoZSByZXF1ZXN0XHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhIE5hbWUvVmFsdWUgcGFpciBkYXRhIHJlcXVlc3RcclxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgIENhbGxiYWNrIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZFxyXG4gKiBAcGFyYW0ge09iamVjdH0gdGFyZ2V0IFNlbGVjdG9yIG9yIGVsZW1lbnQgdGhhdCB3aWxsIHJlY2VpdmUgY29udGVudFxyXG4gKi9cclxudmFyIGxvYWQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgb3B0aW9ucy51cmwgPSB1dGlsLnRvQWJzb2x1dGVVcmwob3B0aW9ucy51cmwpO1xyXG4gICAgLy8gcmV0dXJuIGlmIG5vIHVybCBleGlzdHMgb3IgdXJsIG1hdGNoZXMgYSBjdXJyZW50IHJlcXVlc3RcclxuICAgIGlmICghb3B0aW9ucy51cmwgfHwgY3VycmVudFJlcXVlc3RzW29wdGlvbnMudXJsXSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjdXJyZW50UmVxdWVzdHNbb3B0aW9ucy51cmxdID0gdHJ1ZTtcclxuXHJcbiAgICAvLyBtYWtlIHRoZSBzZXJ2ZXIgY2FsbFxyXG4gICAgJC5hamF4KHtcclxuICAgICAgICBkYXRhVHlwZTogJ2h0bWwnLFxyXG4gICAgICAgIHVybDogdXRpbC5hcHBlbmRQYXJhbVRvVVJMKG9wdGlvbnMudXJsLCAnZm9ybWF0JywgJ2FqYXgnKSxcclxuICAgICAgICBkYXRhOiBvcHRpb25zLmRhdGEsXHJcbiAgICAgICAgeGhyRmllbGRzOiB7XHJcbiAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdHlwZTogb3B0aW9ucy50eXBlIHx8ICdHRVQnIC8vUFJFVkFJTC1BZGRlZCB0byBoYW5kbGUgc2VjdXJpdHkgZm9ybSBpc3N1ZXMuXHJcbiAgICB9KVxyXG4gICAgICAgIC5kb25lKGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAvLyBzdWNjZXNzXHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgJChvcHRpb25zLnRhcmdldCkuZW1wdHkoKS5odG1sKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5jYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5jYWxsYmFjayhyZXNwb25zZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIC5mYWlsKGZ1bmN0aW9uICh4aHIsIHRleHRTdGF0dXMpIHtcclxuICAgICAgICAgICAgLy8gZmFpbGVkXHJcbiAgICAgICAgICAgIGlmICh0ZXh0U3RhdHVzID09PSAncGFyc2VyZXJyb3InKSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuYWxlcnQoUmVzb3VyY2VzLkJBRF9SRVNQT05TRSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3B0aW9ucy5jYWxsYmFjayhudWxsLCB0ZXh0U3RhdHVzKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5hbHdheXMoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBwcm9ncmVzcy5oaWRlKCk7XHJcbiAgICAgICAgICAgIC8vIHJlbW92ZSBjdXJyZW50IHJlcXVlc3QgZnJvbSBoYXNoXHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50UmVxdWVzdHNbb3B0aW9ucy51cmxdKSB7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgY3VycmVudFJlcXVlc3RzW29wdGlvbnMudXJsXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG59O1xyXG5cclxuZXhwb3J0cy5nZXRKc29uID0gZ2V0SnNvbjtcclxuZXhwb3J0cy5sb2FkID0gbG9hZDtcclxuIiwiLyoqXHJcbiAqICAgIChjKSAyMDA5LTIwMTQgRGVtYW5kd2FyZSBJbmMuXHJcbiAqICAgIFN1YmplY3QgdG8gc3RhbmRhcmQgdXNhZ2UgdGVybXMgYW5kIGNvbmRpdGlvbnNcclxuICogICAgRm9yIGFsbCBkZXRhaWxzIGFuZCBkb2N1bWVudGF0aW9uOlxyXG4gKiAgICBodHRwczovL2JpdGJ1Y2tldC5jb20vZGVtYW5kd2FyZS9zaXRlZ2VuZXNpc1xyXG4gKi9cclxuJ3VzZSBzdHJpY3QnO1xyXG5cclxudmFyIGNvdW50cmllcyA9IHJlcXVpcmUoJy4vY291bnRyaWVzJyksXHJcbiAgICBkaWFsb2cgPSByZXF1aXJlKCcuL2RpYWxvZycpLFxyXG4gICAgbWluaWNhcnQgPSByZXF1aXJlKCcuL21pbmljYXJ0JyksXHJcbiAgICBwYWdlID0gcmVxdWlyZSgnLi9wYWdlJyksXHJcbiAgICBzZWFyY2hwbGFjZWhvbGRlciA9IHJlcXVpcmUoJy4vc2VhcmNocGxhY2Vob2xkZXInKSxcclxuICAgIHNlYXJjaHN1Z2dlc3QgPSByZXF1aXJlKCcuL3NlYXJjaHN1Z2dlc3QnKSxcclxuICAgIHRvb2x0aXAgPSByZXF1aXJlKCcuL3Rvb2x0aXAnKSxcclxuICAgIHV0aWwgPSByZXF1aXJlKCcuL3V0aWwnKSxcclxuICAgIHZhbGlkYXRvciA9IHJlcXVpcmUoJy4vdmFsaWRhdG9yJyksXHJcbiAgICBtZWdhbWVudSA9IHJlcXVpcmUoJy4vbWVnYW1lbnUnKSxcclxuICAgIGhlYWRlcmluaXQgPSByZXF1aXJlKCcuL2hlYWRlcmluaXQnKSxcclxuICAgIHVpZXZlbnRzID0gcmVxdWlyZSgnLi91aWV2ZW50cycpLFxyXG4gICAgLy9wcm9ncmVzcyA9IHJlcXVpcmUoJy4vcHJvZ3Jlc3MnKSxcclxuICAgIHRscyA9IHJlcXVpcmUoJy4vdGxzJyksXHJcbiAgICB0YWdtYW5hZ2VyID0gcmVxdWlyZSgnLi90YWdtYW5hZ2VyJyksXHJcbiAgICBxdWlja3ZpZXdBc3NldCA9IHJlcXVpcmUoJy4vcXVpY2t2aWV3LWFzc2V0Jyk7XHJcblxyXG4vLyBpZiBqUXVlcnkgaGFzIG5vdCBiZWVuIGxvYWRlZCwgbG9hZCBmcm9tIGdvb2dsZSBjZG5cclxuaWYgKCF3aW5kb3cualF1ZXJ5KSB7XHJcbiAgICB2YXIgcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xyXG4gICAgcy5zZXRBdHRyaWJ1dGUoJ3NyYycsICdodHRwczovL2FqYXguZ29vZ2xlYXBpcy5jb20vYWpheC9saWJzL2pxdWVyeS8xLjcuMS9qcXVlcnkubWluLmpzJyk7XHJcbiAgICBzLnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0L2phdmFzY3JpcHQnKTtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF0uYXBwZW5kQ2hpbGQocyk7XHJcbn1cclxuXHJcbnJlcXVpcmUoJy4vanF1ZXJ5LWV4dCcpKCk7XHJcbnJlcXVpcmUoJy4vY29va2llcHJpdmFjeScpKCk7XHJcbnJlcXVpcmUoJy4vY2FwdGNoYScpKCk7XHJcblxyXG52YXIgJCA9IHdpbmRvdy5qUXVlcnk7XHJcblxyXG5mdW5jdGlvbiByZXNldFBhc3N3b3JkRXZlbnRzKCkge1xyXG4gICAgJCgnYm9keScpLmZpbmQoJy5QYXNzd29yZFJlc2V0RGlhbG9nIC5maWVsZC13cmFwcGVyIGlucHV0Jykub2ZmKCdjaGFuZ2UnKS5vbignY2xpY2sgY2hhbmdlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2Vycm9yY2xpZW50Jyk7XHJcbiAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcucGFzc3dvcmRyZXNldCcpLmZpbmQoJyNtZXNzYWdlJykuaGlkZSgpO1xyXG4gICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5sYWJlbCcpLmZpbmQoJ3NwYW4uZXJyb3JjbGllbnQnKS5yZW1vdmUoKTtcclxuICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcuZm9ybS1yb3cgLCAubGFiZWwgc3BhbicpLnJlbW92ZUNsYXNzKCdpbnB1dGxhYmVsJyk7XHJcbiAgICB9KTtcclxuICAgIGlmICgkKCcuUGFzc3dvcmRSZXNldERpYWxvZycpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAkKCcuUGFzc3dvcmRSZXNldERpYWxvZycpLmZpbmQoJy5mb3JtZmllbGQnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCQodGhpcykuZmluZCgnLmZpZWxkLXdyYXBwZXIgLmNsZWFyYnV0dG9uJykubGVuZ3RoID09IDAgJiYgJCh0aGlzKS5maW5kKCcuZmllbGQtd3JhcHBlciBpbnB1dFt0eXBlPVwidGV4dFwiXScpLmxlbmd0aCA+IDAgfHwgJCh0aGlzKS5maW5kKCcuZmllbGQtd3JhcHBlciBpbnB1dFt0eXBlPVwicGFzc3dvcmRcIl0nKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5maWVsZC13cmFwcGVyJykuYXBwZW5kKCc8YSBjbGFzcz1cImNsZWFyYnV0dG9uXCI+PC9hPicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAkKCdib2R5JykuZmluZCgnLlBhc3N3b3JkUmVzZXREaWFsb2cgYS5jbGVhcmJ1dHRvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5maWVsZC13cmFwcGVyJykuZmluZCgnc3BhbicpLnJlbW92ZSgpO1xyXG4gICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZpZWxkLXdyYXBwZXInKS5maW5kKCcucmVxdWlyZWQnKS5yZW1vdmVDbGFzcygnZXJyb3JjbGllbnQnKTtcclxuICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQgJykuZmluZCgnLmZvcm0tcm93ICwgLmxhYmVsIHNwYW4nKS5yZW1vdmVDbGFzcygnaW5wdXRsYWJlbCcpO1xyXG4gICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJ2lucHV0JykudmFsKCcnKTtcclxuICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCdhLmNsZWFyYnV0dG9uJykuaGlkZSgpO1xyXG4gICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJ3NwYW4ubG9nZXJyb3IgLCAuZXhpc3RpbmdfcmVnaXN0ZXInKS5oaWRlKCk7XHJcblxyXG4gICAgfSk7XHJcbiAgICAvLyBBdHRhY2gga2V5cHJlc3MgaGFuZGxlciB0byBpbnB1dCBib3guICBTdWJtaXQgZm9ybSBpZiB1c2VyIHByZXNzZXMgJ2VudGVyJyBrZXkuXHJcbiAgICAkKCdib2R5JykuZmluZCgnLlBhc3N3b3JkUmVzZXREaWFsb2cgaW5wdXQucmVzZXRvbGQnKS5rZXlwcmVzcyhmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGlmIChlLndoaWNoID09IDEzKSB7XHJcbiAgICAgICAgICAgIC8valF1ZXJ5KCcjc2VuZEJ0bicpLmNsaWNrKCk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9KTtcclxuICAgICQoJ2JvZHknKS5maW5kKCcuUGFzc3dvcmRSZXNldERpYWxvZyAuZmllbGQtd3JhcHBlciBpbnB1dCcpLm9uKCdrZXl1cCBpbnB1dCBibHVyJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICgkKHRoaXMpLnZhbCgpICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS52YWwoKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCdhLmNsZWFyYnV0dG9uJykuc2hvdygpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnYS5jbGVhcmJ1dHRvbicpLmhpZGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgdmFyICRyZXF1ZXN0UGFzc3dvcmRGb3JtID0gJCgnW25hbWUkPVwiX3JlcXVlc3RwYXNzd29yZFwiXScpLFxyXG4gICAgICAgICRzdWJtaXQgPSAkcmVxdWVzdFBhc3N3b3JkRm9ybS5maW5kKCdbbmFtZSQ9XCJfcmVxdWVzdHBhc3N3b3JkX3NlbmRcIl0nKTtcclxuICAgICQoJHN1Ym1pdCkub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBpZiAoISRyZXF1ZXN0UGFzc3dvcmRGb3JtLnZhbGlkKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgZGlhbG9nLnN1Ym1pdCgkc3VibWl0LmF0dHIoJ25hbWUnKSk7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJlc2V0UGFzc3dvcmRFdmVudHMoKTtcclxuICAgICAgICB9LCAxMzAwKTtcclxuICAgIH0pO1xyXG4gICAgdmFsaWRhdG9yLmluaXQoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaW5pdGlhbGl6ZUV2ZW50cygpIHtcclxuICAgIHZhciBpc1NhZmFyaSA9IG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignU2FmYXJpJykgPiAtMTtcclxuICAgIHZhciBpc0Nocm9tZSA9IG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignQ2hyb21lJykgPiAtMTtcclxuICAgIHZhciBpc0V4cGxvcmVyID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdNU0lFJykgPiAtMTtcclxuICAgIHZhciBpc0ZpcmVmb3ggPSBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ0ZpcmVmb3gnKSA+IC0xO1xyXG4gICAgLy92YXIgaXNfc2FmYXJpID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdTYWZhcmknKSA+IC0xO1xyXG4gICAgdmFyIGlzT3BlcmEgPSBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkuaW5kZXhPZignb3AnKSA+IC0xO1xyXG4gICAgaWYgKChpc0Nocm9tZSkgJiYgKGlzU2FmYXJpKSkge1xyXG4gICAgICAgIGlzU2FmYXJpID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBpZiAoKGlzQ2hyb21lKSAmJiAoaXNPcGVyYSkpIHtcclxuICAgICAgICBpc0Nocm9tZSA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgaWYgKGlzU2FmYXJpKSB7XHJcbiAgICAgICAgJCgnYm9keScpLmFkZENsYXNzKCdzYWZhcmktYnJvd3NlcicpO1xyXG4gICAgfSBlbHNlIGlmIChpc0ZpcmVmb3gpIHtcclxuICAgICAgICAkKCdib2R5JykuYWRkQ2xhc3MoJ2ZpcmVmb3gtYnJvd3NlcicpO1xyXG4gICAgfSBlbHNlIGlmIChpc0V4cGxvcmVyKSB7XHJcbiAgICAgICAgJCgnYm9keScpLmFkZENsYXNzKCdpZS1icm93c2VyJyk7XHJcbiAgICB9IGVsc2UgaWYgKGlzQ2hyb21lKSB7XHJcbiAgICAgICAgJCgnYm9keScpLmFkZENsYXNzKCdjaHJvbWUtYnJvd3NlcicpO1xyXG4gICAgfVxyXG4gICAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignTWFjIE9TIFgnKSAhPSAtMSkge1xyXG4gICAgICAgICQoJ2JvZHknKS5hZGRDbGFzcygnbWFjJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgICQoJ2JvZHknKS5hZGRDbGFzcygncGMnKTtcclxuICAgIH1cclxuICAgIHZhciBjb250cm9sS2V5cyA9IFsnOCcsICcxMycsICc0NicsICc0NScsICczNicsICczNScsICczOCcsICczNycsICc0MCcsICczOSddO1xyXG5cclxuICAgIC8vUFJFVkFJTC1BZGRlZCB0byBoYW5kbGUgZm9ybSBkaWFsb2cgYm94ZXMgc2VydmVyIHNpZGUgaXNzdWVzLlxyXG4gICAgJCgnYm9keScpLm9uKCdjbGljaycsICcuZGlhbG9naWZ5LCBbZGF0YS1kbGctb3B0aW9uc10sIFtkYXRhLWRsZy1hY3Rpb25dJywgcmVxdWlyZSgnLi9kaWFsb2dpZnknKS5zZXREaWFsb2dpZnkpXHJcbiAgICAgICAgLm9uKCdrZXlkb3duJywgJ3RleHRhcmVhW2RhdGEtY2hhcmFjdGVyLWxpbWl0XScsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIHZhciB0ZXh0ID0gJC50cmltKCQodGhpcykudmFsKCkpLFxyXG4gICAgICAgICAgICAgICAgY2hhcnNMaW1pdCA9ICQodGhpcykuZGF0YSgnY2hhcmFjdGVyLWxpbWl0JyksXHJcbiAgICAgICAgICAgICAgICBjaGFyc1VzZWQgPSB0ZXh0Lmxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgIGlmICgoY2hhcnNVc2VkID49IGNoYXJzTGltaXQpICYmIChjb250cm9sS2V5cy5pbmRleE9mKGUud2hpY2gudG9TdHJpbmcoKSkgPCAwKSkge1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAub24oJ2NoYW5nZSBrZXl1cCBtb3VzZXVwJywgJ3RleHRhcmVhW2RhdGEtY2hhcmFjdGVyLWxpbWl0XScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHRleHQgPSAkLnRyaW0oJCh0aGlzKS52YWwoKSksXHJcbiAgICAgICAgICAgICAgICBjaGFyc0xpbWl0ID0gJCh0aGlzKS5kYXRhKCdjaGFyYWN0ZXItbGltaXQnKSxcclxuICAgICAgICAgICAgICAgIGNoYXJzVXNlZCA9IHRleHQubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgY2hhcnNSZW1haW4gPSBjaGFyc0xpbWl0IC0gY2hhcnNVc2VkO1xyXG5cclxuICAgICAgICAgICAgaWYgKGNoYXJzUmVtYWluIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS52YWwodGV4dC5zbGljZSgwLCBjaGFyc1JlbWFpbikpO1xyXG4gICAgICAgICAgICAgICAgY2hhcnNSZW1haW4gPSAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAkKHRoaXMpLm5leHQoJ2Rpdi5jaGFyLWNvdW50JykuZmluZCgnLmNoYXItcmVtYWluLWNvdW50JykuaHRtbChjaGFyc1JlbWFpbik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBpbml0aWFsaXplIHNlYXJjaCBzdWdnZXN0aW9ucywgcGVuZGluZyB0aGUgdmFsdWUgb2YgdGhlIHNpdGUgcHJlZmVyZW5jZShlbmhhbmNlZFNlYXJjaFN1Z2dlc3Rpb25zKVxyXG4gICAgICogdGhpcyB3aWxsIGVpdGhlciBpbml0IHRoZSBsZWdhY3koZmFsc2UpIG9yIHRoZSBiZXRhIHZlcnNpb25zKHRydWUpIG9mIHRoZSB0aGUgc2VhcmNoIHN1Z2dlc3QgZmVhdHVyZS5cclxuICAgICAqICovXHJcblxyXG4gICAgLyoqKiBtaW5pY2FydCBoaWRlICoqKi9cclxuICAgIHZhciBtaW5pY2FydGxpbmsgPSAkKCcjaGVhZGVyd3JhcHBlciAjaGVhZGVyIC5yb3cuY29sdW1uMSAjbWluaWNhcnQgLm1pbmljYXJ0dG90YWwgLm1pbmljYXJ0aWNvbi1jb250IC5taW5pY2FydC1idXR0b24nKTtcclxuICAgIG1pbmljYXJ0bGluay5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpIDwgOTU5KSB7XHJcbiAgICAgICAgICAgICQoJyNtaW5pY2FydCAubWluaWNhcnRjb250ZW50JykuaGlkZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHZhciAkc2VhcmNoQ29udGFpbmVyID0gJCgnLnNpdGUtc3VnZ2VzdGlvbi1zZWN0aW9uJyk7XHJcbiAgICBzZWFyY2hzdWdnZXN0LmluaXQoJHNlYXJjaENvbnRhaW5lciwgUmVzb3VyY2VzLlNJTVBMRV9TRUFSQ0gpO1xyXG5cclxuICAgICQoJyNwYXNzd29yZC1yZXNldCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGRpYWxvZy5vcGVuKHtcclxuICAgICAgICAgICAgdXJsOiAkKGUudGFyZ2V0KS5hdHRyKCdocmVmJyksXHJcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcclxuICAgICAgICAgICAgICAgIC8vU3RhcnQgSklSQSBQUkVWLTMzNCA6IFRpdGxlIGlzIG1pc3NpbmcgZm9yIHRoZSBGb3Jnb3QgcGFzc3dvcmQgb3ZlcmxheS5cclxuICAgICAgICAgICAgICAgIHRpdGxlOiBSZXNvdXJjZXMuRk9SR09UX1BBU1NXT1JELFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDQ3NSxcclxuICAgICAgICAgICAgICAgIGRpYWxvZ0NsYXNzOiAnUGFzc3dvcmRSZXNldERpYWxvZycsXHJcbiAgICAgICAgICAgICAgICBvcGVuOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzZXRQYXNzd29yZEV2ZW50cygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBwcmludCBoYW5kbGVyXHJcbiAgICAkKCcucHJpbnQtcGFnZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB3aW5kb3cucHJpbnQoKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCcubW9iaWxlLWJhbm5lci1zdHVmZicpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGlmICgkKCcuY2FsbG91dGV4aXN0JykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB2YXIgcHJvbW9DYWxsT3V0ID0gJCgnLmNhbGxvdXRleGlzdCcpLmh0bWwoKTtcclxuICAgICAgICAgICAgdmFyIGJhbm5lckRpYWxvZ09wZW4gPSBkaWFsb2cuY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgIHRhcmdldDogJyNjYWxsb3V0ZXhpc3QnLFxyXG4gICAgICAgICAgICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgICAgICAgICAgICAgIGRpYWxvZ0NsYXNzOiAnZGlhbG9nQmFubmVyJ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdXRpbC5zY3JvbGxCcm93c2VyKCQoJ2h0bWwnKS5vZmZzZXQoKS50b3ApO1xyXG4gICAgICAgICAgICBiYW5uZXJEaWFsb2dPcGVuLmh0bWwocHJvbW9DYWxsT3V0KTtcclxuICAgICAgICAgICAgJCgnLnVpLWRpYWxvZy1jb250ZW50OnZpc2libGUnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuZGlhbG9nKCdvcHRpb24nLCAncG9zaXRpb24nLCAkKHRoaXMpLmRpYWxvZygnb3B0aW9uJywgJ3Bvc2l0aW9uJykpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgYmFubmVyRGlhbG9nT3Blbi5kaWFsb2coJ29wZW4nKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuZGlhbG9nQmFubmVyICNjbG9zZUJ0bjAxJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcuZGlhbG9nQmFubmVyJykuZmluZCgnLnVpLWRpYWxvZy10aXRsZWJhci1jbG9zZScpLnRyaWdnZXIoJ2NsaWNrJyk7XHJcbiAgICB9KTtcclxuICAgIC8vZm9vdGVyIGNoYW5nZSByZWdpb24gZXZlbnRcclxuICAgICQoJy5jaGFuZ2UtcmVnaW9uLWZvb3RlcicpLmhvdmVyKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCcuZG9tYWluc3dpdGNoJykuc2hvdygpO1xyXG4gICAgfSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJy5kb21haW5zd2l0Y2gnKS5oaWRlKCk7XHJcbiAgICB9KTtcclxuICAgICQoJy5kb21haW5zd2l0Y2gnKS5ob3ZlcihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCh0aGlzKS5zaG93KCk7XHJcbiAgICB9LCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCh0aGlzKS5oaWRlKCk7XHJcbiAgICB9KTtcclxuICAgICQoJ2Rpdi5wc2V1ZG9fc2VsZl9sYWJlbCcpLmVhY2goXHJcbiAgICAgICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgJHRoaXMgPSBqUXVlcnkodGhpcyk7XHJcbiAgICAgICAgICAgIHZhciAkaW5wdXQgPSAkdGhpc1xyXG4gICAgICAgICAgICAgICAgLmNoaWxkcmVuKCdpbnB1dFt0eXBlPVwidGV4dFwiXScpO1xyXG4gICAgICAgICAgICAkaW5wdXQuZGF0YSgndG9nZ2xlJywgJGlucHV0LnZhbCgpKTtcclxuICAgICAgICAgICAgLy91c2VkIHRvIGFkZCBhIGNsYXNzIHRvIHBsYWNlaG9sZGVyIGZvciBzdHlsaW5nXHJcbiAgICAgICAgICAgIGlmICgkKCcuZW1haWxpbnB1dC5lbWFpbGZvb3RlcicpLmF0dHIoJ2RhdGEtcGxhY2Vob2xkZXInKSA9PSAkaW5wdXQudmFsKCkpIHtcclxuICAgICAgICAgICAgICAgICQoJy5lbWFpbGlucHV0LmVtYWlsZm9vdGVyJykuYWRkQ2xhc3MoJ2Zvb3RlcnBsYWNlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIGlmKGpRdWVyeS50cmltKCRpbnB1dC52YWwoKSkgIT0gXCJcIikge1xyXG4gICAgICAgICAgICAgICAgICogJGlucHV0LmRhdGEoJ3RvZ2dsZScpLmhpZGUoKTsgfSBlbHNlXHJcbiAgICAgICAgICAgICAqaWYoJGlucHV0LmRhdGEoJ3RvZ2dsZScpICYmXHJcbiAgICAgICAgICAgICAqICRpbnB1dC5kYXRhKCd0b2dnbGUnKS5zaXplKCkgPj0gMSkge1xyXG4gICAgICAgICAgICAgICAgICogJGlucHV0LnZhbCgkaW5wdXQuZGF0YSgndG9nZ2xlJykpOyB9XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAkaW5wdXRcclxuICAgICAgICAgICAgICAgIC5ibHVyKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSBqUXVlcnkodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGpRdWVyeVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRyaW0oJHRoaXMudmFsKCkpID09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICR0aGlzLmRhdGEoJ3RvZ2dsZScpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC52YWwoJHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZGF0YSgndG9nZ2xlJykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3VzZWQgdG8gYWRkIGEgY2xhc3MgdG8gcGxhY2Vob2xkZXIgZm9yIHN0eWxpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCQoJy5lbWFpbGlucHV0LmVtYWlsZm9vdGVyJykuYXR0cignZGF0YS1wbGFjZWhvbGRlcicpID09ICRpbnB1dC52YWwoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmVtYWlsaW5wdXQuZW1haWxmb290ZXInKS5hZGRDbGFzcygnZm9vdGVycGxhY2UnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJGlucHV0XHJcbiAgICAgICAgICAgICAgICAuZm9jdXMoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5lbWFpbGlucHV0LmVtYWlsZm9vdGVyJykucmVtb3ZlQ2xhc3MoJ2Zvb3RlcnBsYWNlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyICR0aGlzID0galF1ZXJ5KHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkdGhpcy5kYXRhKCd0b2dnbGUnKSAmJiAoalF1ZXJ5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudHJpbSgkdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC52YWwoKSkgPT0galF1ZXJ5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudHJpbSgkdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5kYXRhKCd0b2dnbGUnKSkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICR0aGlzLmRhdGEoJ3RvZ2dsZScpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMudmFsKCcnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJHRoaXNcclxuICAgICAgICAgICAgICAgIC5wYXJlbnRzKCdmb3JtJylcclxuICAgICAgICAgICAgICAgIC5zdWJtaXQoXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSBqUXVlcnkodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmluZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2LnBzZXVkb19zZWxmX2xhYmVsIGlucHV0JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5lYWNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyICR0aGlzID0galF1ZXJ5KHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZGF0YSgndG9nZ2xlJykgJiYgJHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZGF0YSgndG9nZ2xlJykgPT0gJHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudmFsKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnZhbCgnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAvL1xyXG4gICAgJCgnYm9keScpLm9uKCdzdWJtaXQnLCAnI2N1c3RvbWVyY29udGFjdHVzJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdmFyIHJlcyA9ICQoJyNnLXJlY2FwdGNoYS1yZXNwb25zZScpLnZhbCgpO1xyXG4gICAgICAgIGlmIChyZXMgPT0gJycgfHwgcmVzID09IHVuZGVmaW5lZCB8fCByZXMubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgJCgnLnJlY2FwcmNoYS1lcnJvcicpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyICRmb3JtID0gJCh0aGlzKTtcclxuICAgICAgICBpZiAoJGZvcm0udmFsaWQoKSkge1xyXG4gICAgICAgICAgICAvLyBzZXQgdGhlIGFjdGlvblxyXG4gICAgICAgICAgICAkKCc8aW5wdXQvPicpLmF0dHIoe1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJGZvcm0uYXR0cignYWN0aW9uJyksXHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnaGlkZGVuJ1xyXG4gICAgICAgICAgICB9KS5hcHBlbmRUbygkZm9ybSk7XHJcbiAgICAgICAgICAgIC8vIHNlcmlhbGl6ZSB0aGUgZm9ybSBhbmQgZ2V0IHRoZSBwb3N0IHVybFxyXG4gICAgICAgICAgICB2YXIgZGF0YSA9ICRmb3JtLnNlcmlhbGl6ZSgpO1xyXG4gICAgICAgICAgICB2YXIgdXJsID0gJGZvcm0uYXR0cignYWN0aW9uJyk7XHJcbiAgICAgICAgICAgIC8vIG1ha2Ugc3VyZSB0aGUgc2VydmVyIGtub3dzIHRoaXMgaXMgYW4gYWpheCByZXF1ZXN0XHJcbiAgICAgICAgICAgIGlmIChkYXRhLmluZGV4T2YoJ2FqYXgnKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIGRhdGEgKz0gJyZmb3JtYXQ9YWpheCc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcclxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnaHRtbCcsXHJcbiAgICAgICAgICAgICAgICBkYXRhOiBkYXRhXHJcbiAgICAgICAgICAgIH0pLmRvbmUoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvKFxcKGlQb2R8XFwoaVBob25lfFxcKGlQYWQpLykpIHtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIDApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJCgnLmNvbHVtbi5jb2xzcGFuMicpLmVtcHR5KCkuaHRtbChyZXNwb25zZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgICQoJy5maXJzdC1sZXZlbCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKHRoaXMpLmNoaWxkcmVuKCcuc2Vjb25kLWxldmVsJykudG9nZ2xlKCk7XHJcbiAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygnbGlzdC1hY3RpdmUnKTtcclxuICAgIH0pO1xyXG4gICAgJCgnLmZpcnN0LWxldmVsIGxpLmFjdGl2ZScpLmNsb3Nlc3QoJy5maXJzdC1sZXZlbCcpLmNsaWNrKCk7XHJcbiAgICAkKCcuZmlyc3QtbGV2ZWwgbGkgYScpLmNsaWNrKGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfSk7XHJcbiAgICAkKCcuZmlyc3QtbGV2ZWxsJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQodGhpcykuY2hpbGRyZW4oJy5zZWNvbmQtbGV2ZWxsJykudG9nZ2xlKCk7XHJcbiAgICAgICAgLy8kKHRoaXMpLnRvZ2dsZUNsYXNzKCdsaXN0LWFjdGl2ZScpO1xyXG4gICAgfSk7XHJcbiAgICAkKHdpbmRvdykubG9hZChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGN1cnJlbnRJdGVtID0gbnVsbDtcclxuICAgICAgICBpZiAoJCgnLm5ld01hcmdpbicpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY3VycmVudEl0ZW0gPSAkKCcubmV3TWFyZ2luJyk7XHJcbiAgICAgICAgICAgIGN1cnJlbnRJdGVtLnBhcmVudHMoJy5jZWxsLWhlYWRlcicpLmFkZENsYXNzKCduZXctbWFyZ2luLXVwZGF0ZScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoJCgnLm5ld01hcmdpbi1vbmUnKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnRJdGVtID0gJCgnLm5ld01hcmdpbi1vbmUnKTtcclxuICAgICAgICAgICAgY3VycmVudEl0ZW0ucGFyZW50cygnLmNlbGwtaGVhZGVyJykuYWRkQ2xhc3MoJ25ldy1tYXJnaW4tdXBkYXRlb25lJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgkKCcudm1jLW1hbnVmYWN0dXJlci1tYXJnaW4nKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnRJdGVtID0gJCgnLnZtYy1tYW51ZmFjdHVyZXItbWFyZ2luJyk7XHJcbiAgICAgICAgICAgIGN1cnJlbnRJdGVtLnBhcmVudHMoJy5jZWxsLWhlYWRlcicpLmFkZENsYXNzKCdtYW51ZmFjdHVyZS1tYXJnaW4tdXBkYXRlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgkKCcuc3RyaWtlbWFzdGVyLXBhcmFncmFwaCcpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY3VycmVudEl0ZW0gPSAkKCcuc3RyaWtlbWFzdGVyLXBhcmFncmFwaCcpO1xyXG4gICAgICAgICAgICBjdXJyZW50SXRlbS5wYXJlbnRzKCcuY2VsbC1oZWFkZXInKS5hZGRDbGFzcygnc3RyaWtlbWFzdGVyLW1hcmdpbi11cGRhdGUnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHNwYW5jb3VudGxlZnRuYXYgPSAkKCcucHRfY3VzdG9tZXJzZXJ2aWNlIC5jdXN0b21lciAuY29sdW1uIC5jb250ZW50Ym94IC5sZWZ0LW5hdi10b3AgLmNvbnRlbnRib3hjb250ZW50IC5uYXYtZ3JvdXAgbGkgc3BhbicpO1xyXG4gICAgICAgIHNwYW5jb3VudGxlZnRuYXYuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmhlaWdodCgpID4gMTkpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ25ld29uZScpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnbmV3b25lJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBzcGFuY291bnRsZWZ0bmF2ID0gJCgnLnB0X2N1c3RvbWVyc2VydmljZSAuc3R5bGUtY3NlcnZpY2UgLmNvbHVtbiAuY29udGVudGJveCAubGVmdC1uYXYtdG9wIC5jb250ZW50Ym94Y29udGVudCAubmF2LWdyb3VwIGxpIHNwYW4nKTtcclxuICAgICAgICBzcGFuY291bnRsZWZ0bmF2LmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5oZWlnaHQoKSA+IDE5KSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCduZXdvbmUnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ25ld29uZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKCQoJy5zaGFkb3ctYm94JykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBjdXJyZW50SXRlbSA9ICQoJy5zaGFkb3ctYm94Jyk7XHJcbiAgICAgICAgICAgIGN1cnJlbnRJdGVtLnBhcmVudHMoJy5wdF9jdXN0b21lcnNlcnZpY2UnKS5hZGRDbGFzcygncHRfY3VzdG9tZXJzZXJ2aWNlLWJveCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoJCgnLnplcm8tbWFyZ2luJykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBjdXJyZW50SXRlbSA9ICQoJy56ZXJvLW1hcmdpbicpO1xyXG4gICAgICAgICAgICBjdXJyZW50SXRlbS5wYXJlbnRzKCcuY2VsbC1oZWFkZXInKS5hZGRDbGFzcygnemVyby1tYXJnaW4tY2VsbC1oZWFkZXInKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCQoJy5jaGVja291dGxvZ2luc2lnbmluJykuZmluZCgnLlRva2VuRXhwaXJlZCcpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgJCgnI3Bhc3N3b3JkLXJlc2V0JykudHJpZ2dlcignY2xpY2snKTtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcjZGlhbG9nLWNvbnRhaW5lcicpLmZpbmQoJ3AnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCgnI2RpYWxvZy1jb250YWluZXIgI1Bhc3N3b3JkUmVzZXRGb3JtJykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJyNkaWFsb2ctY29udGFpbmVyICNQYXNzd29yZFJlc2V0Rm9ybScpLnByZXBlbmQoJzxkaXYgY2xhc3M9XCJUb2tlbkV4cGlyZUVycm9yXCI+V2UmIzM5O3JlIHNvcnJ5LCB0aGUgbGluayB0byByZXNldCB5b3VyIHBhc3N3b3JkIGhhcyBleHBpcmVkLiBSZXNldCBQYXNzd29yZCBsaW5rcyBleHBpcmUgYWZ0ZXIgMzAgbWludXRlcyBmb3Igc2VjdXJpdHkgcHVycG9zZXMuIFBsZWFzZSBzdWJtaXQgeW91ciBlbWFpbCBhZ2Fpbi48L2Rpdj4nKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcjZGlhbG9nLWNvbnRhaW5lciAjUGFzc3dvcmRSZXNldEZvcm0gLnBhc3N3b3JkZW1haWwnKS5wcmVwZW5kKCc8ZGl2IGNsYXNzPVwiRW1haWxsYWJlbFwiPkVudGVyIHlvdXIgZW1haWwgYWRkcmVzcyB0byBnZXQgcmVzZXQgcGFzc3dvcmQgaW5zdHJ1Y3Rpb25zIHNlbnQgdG8geW91ciBpbmJveC48L2Rpdj4nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgMjAwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPiA5NjApIHtcclxuICAgICAgICAgICAgaWYgKCQoJyNjb250YWluZXInKS5oYXNDbGFzcygnanMtY29udGFpbmVyLWFjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcjY29udGFpbmVyLCAub3Blbi1tZW51LXdyYXAnKS5yZW1vdmVBdHRyKCdzdHlsZScpO1xyXG4gICAgICAgICAgICAgICAgJCgnI2NvbnRhaW5lcicpLnJlbW92ZUNsYXNzKCdqcy1jb250YWluZXItYWN0aXZlJykuZmluZCgnLm1lbnUtdG9nZ2xlJykucmVtb3ZlQ2xhc3MoJ2pzLW1lbnUtdG9nZ2xlJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcjbWFpbiwgI2Zvb3Rlcm5ldycpLnVud3JhcCgpO1xyXG4gICAgICAgICAgICAgICAgJCgnI2JyYW5kLXRhYnMtaGVhZGVyJykudW53cmFwKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy9tZWdhbWVudS5pbml0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAvLyBhZGQgZ2VuZXJpYyB0b2dnbGUgZnVuY3Rpb25hbGl0eVxyXG4gICAgJCgnLnRvZ2dsZScpLm5leHQoJy50b2dnbGUtY29udGVudCcpLmhpZGUoKTtcclxuICAgIGlmICgkKCcucHRfY2hlY2tvdXQnKS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgIGlmICgkKCcucHRfY3VzdG9tZXJzZXJ2aWNlJykubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgJCgnLnRvZ2dsZScpLm9mZignY2xpY2snKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOyAvL0pJUkEgUFJFVi05MCA6IFdoZW4gY2xpY2sgb24gYWR2YW5jZSBzZWFyY2ggZnJvbSBnaWZ0IHJlZ2lzdHJ5IGxvZ2luIHBhZ2UsIGZvY3VzIGlzIGhhcHBlbmluZyB0b3dhcmRzIHRvcCBvZiB0aGUgcGFnZS5cclxuICAgICAgICAgICAgICAgICQodGhpcykudG9nZ2xlQ2xhc3MoJ2V4cGFuZGVkJykubmV4dCgndWwsIC50b2dnbGUtY29udGVudCcpLnRvZ2dsZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyB0b2dnbGUgZm9yIGN1c3RvbWVyIHNlcnZpY2UgRkFRXHJcbiAgICBpZiAoJCgnLnB0X2N1c3RvbWVyc2VydmljZScpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAkKCcuc2VjdGlvbiBhLnRvZ2dsZScpLm9mZignY2xpY2snKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICQodGhpcykucGFyZW50KCkubmV4dCgnLnJldmVhbCcpLnNsaWRlVG9nZ2xlKCdmYXN0JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgICQoJyNmb290ZXJuZXcgLmZvb3Rlci1tYWluICNsaW5raGVhZGluZycpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdzaG93Jyk7XHJcbiAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCdkaXYnKS50b2dnbGVDbGFzcygnZXhwYW5kZWQnKTtcclxuICAgICAgICBpZiAoJCgnI2Fib3V0LCAjY3VzdG9tZXItc2VydmljZSwgI01vcmUtd2F5cy10by1zaG9wJykuaGFzQ2xhc3MoJ2V4cGFuZGVkJykpIHtcclxuICAgICAgICAgICAgJCgnI3JhcGFsYV9pbnNpZGVyJykuYWRkQ2xhc3MoJ25ldycpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICQoJyNyYXBhbGFfaW5zaWRlcicpLnJlbW92ZUNsYXNzKCduZXcnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCQoJyNidXNuaW5lc3MnKS5oYXNDbGFzcygnZXhwYW5kZWQnKSkge1xyXG4gICAgICAgICAgICAkKCcjZm9sbG93X3VzJykuYWRkQ2xhc3MoJ25ldycpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICQoJyNmb2xsb3dfdXMnKS5yZW1vdmVDbGFzcygnbmV3Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gaXNUb3VjaERldmljZSgpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZSA9PSAoJ29udG91Y2hzdGFydCcgaW4gd2luZG93IHx8IHdpbmRvdy5Eb2N1bWVudFRvdWNoICYmIGRvY3VtZW50IGluc3RhbmNlb2YgRG9jdW1lbnRUb3VjaCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGlzVG91Y2hEZXZpY2UoKSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgIC8vYWxlcnQoJ1RvdWNoIERldmljZScpOyAvL3lvdXIgbG9naWMgZm9yIHRvdWNoIGRldmljZSBoZXJlXHJcbiAgICAgICAgJCgnLm9sZC1zd2ltJykucmVtb3ZlQ2xhc3MoJ3Nob3cnKS5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICQoJy5uZXctc3dpbScpLnJlbW92ZUNsYXNzKCdoaWRlJykuYWRkQ2xhc3MoJ3Nob3cnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy9hbGVydCgnTm90IGEgVG91Y2ggRGV2aWNlJyk7Ly95b3VyIGxvZ2ljIGZvciBub24gdG91Y2ggZGV2aWNlIGhlcmVcclxuICAgICAgICAkKCcub2xkLXN3aW0nKS5yZW1vdmVDbGFzcygnaGlkZScpLmFkZENsYXNzKCdzaG93Jyk7XHJcbiAgICAgICAgJCgnLm5ldy1zd2ltJykucmVtb3ZlQ2xhc3MoJ3Nob3cnKS5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgfVxyXG4gICAgJCh3aW5kb3cpLmJpbmQoJ3Njcm9sbCByZXNpemUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCQoJy5yYXBhbGFfZGV2aWNlJykubGVuZ3RoID4gMCAmJiAkKHdpbmRvdykud2lkdGgoKSA8IDc2OCkge1xyXG4gICAgICAgICAgICBpZiAoJCgnI2Zvb3RlckVtYWlsRGlhbG9nLnVpLWRpYWxvZy1jb250ZW50JykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgJCgnLnVpLWRpYWxvZycpLmNzcyh7J2xlZnQnOiAoJChkb2N1bWVudCkud2lkdGgoKSAtICQoJy51aS1kaWFsb2cnKS53aWR0aCgpKSAvIDIsICd0b3AnOiAnMTAwcHgnfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkKCcudWktZGlhbG9nJykuY3NzKHsnbGVmdCc6ICgkKGRvY3VtZW50KS53aWR0aCgpIC0gJCgnLnVpLWRpYWxvZycpLndpZHRoKCkpIC8gMn0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgICQoJy50YWJzSGVhZGVyJykuYmluZCgnY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGN1cnJlbnRJdGVtID0gJCh0aGlzKTtcclxuICAgICAgICBjdXJyZW50SXRlbS5jbG9zZXN0KCcubW9iaWxlLXRhYnMtc2VjdGlvbicpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgIH0pO1xyXG5cclxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcudXBncmFkZW5vdy1saW5rJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgc2Nyb2xsVG9wOiAkKCcudmlwbG9naW5zaWduaW4nKS5vZmZzZXQoKS50b3BcclxuICAgICAgICB9LCAyMDAwKTtcclxuICAgIH0pO1xyXG4gICAgJCgnLm1lbnUtY2F0ZWdvcnkgbGkgLm1lbnUtaXRlbS10b2dnbGUnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB2YXIgJHBhcmVudExpID0gJChlLnRhcmdldCkuY2xvc2VzdCgnbGknKTtcclxuICAgICAgICAkcGFyZW50TGkuc2libGluZ3MoJ2xpJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpLmZpbmQoJy5tZW51LWl0ZW0tdG9nZ2xlJykucmVtb3ZlQ2xhc3MoJ2ZhLWNoZXZyb24tdXAgYWN0aXZlJykuYWRkQ2xhc3MoJ2ZhLWNoZXZyb24tcmlnaHQnKTtcclxuICAgICAgICAkcGFyZW50TGkudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICQoZS50YXJnZXQpLnRvZ2dsZUNsYXNzKCdmYS1jaGV2cm9uLXJpZ2h0IGZhLWNoZXZyb24tdXAgYWN0aXZlJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCdib2R5Jykub24oJ2NsaWNrJywgJy5kaWFsb2ctY2xvc2UnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcudWktZGlhbG9nJykuZmluZCgnLnVpLWRpYWxvZy10aXRsZWJhci1jbG9zZScpLnRyaWdnZXIoJ2NsaWNrJyk7XHJcbiAgICB9KTtcclxuICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA+IDk1OSkge1xyXG4gICAgICAgIHZhciBpdGVtID0gJCgnLnNpZ24tdXAtYmxrJyksXHJcbiAgICAgICAgICAgIGNsaWNrSXRlbSA9IGl0ZW0uZmluZCgnLnVzZXJsb2dpbicpO1xyXG5cclxuICAgICAgICBjbGlja0l0ZW0ub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgJCgnLmVtYWlsLXN1YnNjcmliZScpLnN1Ym1pdChmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB2YXIgJGZvcm0gPSAkKHRoaXMpO1xyXG4gICAgICAgIGlmICgkZm9ybS52YWxpZCgpKSB7XHJcbiAgICAgICAgICAgIC8vIHNldCB0aGUgYWN0aW9uXHJcbiAgICAgICAgICAgICQoJzxpbnB1dC8+JykuYXR0cih7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAkZm9ybS5hdHRyKCdhY3Rpb24nKSxcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdoaWRkZW4nXHJcbiAgICAgICAgICAgIH0pLmFwcGVuZFRvKCRmb3JtKTtcclxuICAgICAgICAgICAgLy8gc2VyaWFsaXplIHRoZSBmb3JtIGFuZCBnZXQgdGhlIHBvc3QgdXJsXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0gJGZvcm0uc2VyaWFsaXplKCk7XHJcbiAgICAgICAgICAgIHZhciB1cmwgPSAkZm9ybS5hdHRyKCdhY3Rpb24nKTtcclxuICAgICAgICAgICAgLy8gbWFrZSBzdXJlIHRoZSBzZXJ2ZXIga25vd3MgdGhpcyBpcyBhbiBhamF4IHJlcXVlc3RcclxuICAgICAgICAgICAgaWYgKGRhdGEuaW5kZXhPZignYWpheCcpID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgZGF0YSArPSAnJmZvcm1hdD1hamF4JztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZGlhbG9nLm9wZW4oe1xyXG4gICAgICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLFxyXG4gICAgICAgICAgICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnZW1haWwnLFxyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiA4MDAsXHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiA1MzAsXHJcbiAgICAgICAgICAgICAgICAgICAgZGlhbG9nQ2xhc3M6ICdmb290ZXJFbWFpbERpYWxvZydcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBvcGVuOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxufVxyXG5cclxuLyoqXHJcbiAqIEBwcml2YXRlXHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAZGVzY3JpcHRpb24gQWRkcyBjbGFzcyAoJ2pzJykgdG8gaHRtbCBmb3IgY3NzIHRhcmdldGluZyBhbmQgbG9hZHMganMgc3BlY2lmaWMgc3R5bGVzLlxyXG4gKi9cclxuZnVuY3Rpb24gaW5pdGlhbGl6ZURvbSgpIHtcclxuICAgIC8vIGFkZCBjbGFzcyB0byBodG1sIGZvciBjc3MgdGFyZ2V0aW5nXHJcbiAgICAkKCdodG1sJykuYWRkQ2xhc3MoJ2pzJyk7XHJcbiAgICBpZiAoU2l0ZVByZWZlcmVuY2VzLkxJU1RJTkdfSU5GSU5JVEVfU0NST0xMKSB7XHJcbiAgICAgICAgJCgnaHRtbCcpLmFkZENsYXNzKCdpbmZpbml0ZS1zY3JvbGwnKTtcclxuICAgIH1cclxuICAgIC8vIGxvYWQganMgc3BlY2lmaWMgc3R5bGVzLy9cclxuICAgIHV0aWwubGltaXRDaGFyYWN0ZXJzKCk7XHJcbn1cclxuXHJcbnZhciBwYWdlcyA9IHtcclxuICAgIGFjY291bnQ6IHJlcXVpcmUoJy4vcGFnZXMvYWNjb3VudCcpLFxyXG4gICAgY2FydDogcmVxdWlyZSgnLi9wYWdlcy9jYXJ0JyksXHJcbiAgICBjaGVja291dDogcmVxdWlyZSgnLi9wYWdlcy9jaGVja291dCcpLFxyXG4gICAgY29tcGFyZTogcmVxdWlyZSgnLi9wYWdlcy9jb21wYXJlJyksXHJcbiAgICBwcm9kdWN0OiByZXF1aXJlKCcuL3BhZ2VzL3Byb2R1Y3QnKSxcclxuICAgIHJlZ2lzdHJ5OiByZXF1aXJlKCcuL3BhZ2VzL3JlZ2lzdHJ5JyksXHJcbiAgICBzZWFyY2g6IHJlcXVpcmUoJy4vcGFnZXMvc2VhcmNoJyksXHJcbiAgICBzdG9yZWZyb250OiByZXF1aXJlKCcuL3BhZ2VzL3N0b3JlZnJvbnQnKSxcclxuICAgIHdpc2hsaXN0OiByZXF1aXJlKCcuL3BhZ2VzL3dpc2hsaXN0JyksXHJcbiAgICByYXBhbGFpbnNpZGVyOiByZXF1aXJlKCcuL3BhZ2VzL3JhcGFsYWluc2lkZXInKSxcclxuICAgIHN0b3JlbG9jYXRvcjogcmVxdWlyZSgnLi9wYWdlcy9zdG9yZWxvY2F0b3InKSxcclxuICAgIGludGVybmF0aW9uYWw6IHJlcXVpcmUoJy4vcGFnZXMvaW50ZXJuYXRpb25hbCcpLFxyXG4gICAgYmxvZzogcmVxdWlyZSgnLi9wYWdlcy9ibG9nJylcclxufTtcclxuXHJcbnZhciBhcHAgPSB7XHJcbiAgICBpbml0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBnZW9pcENvdW50cnlDb2RlID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgdmFyIElQR2VvQ29kZSA9IGdlb2lwQ291bnRyeUNvZGUoKTtcclxuICAgICAgICAgICAgdmFyIGFsbG93ZWRDb3VudHJpZXMgPSAkKCcuYWxsb3dlZC1jb3VudHJpZXMnKS50ZXh0KCk7XHJcbiAgICAgICAgICAgIGlmIChhbGxvd2VkQ291bnRyaWVzID09IG51bGwgfHwgYWxsb3dlZENvdW50cmllcyA9PSAnbnVsbCcgfHwgYWxsb3dlZENvdW50cmllcyA9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgYWxsb3dlZENvdW50cmllcyA9ICdVUyc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGFsbG93ZWRDb3VudHJpZXMuaW5kZXhPZihJUEdlb0NvZGUpID09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAkKCdodG1sJykuYWRkQ2xhc3MoJ25vLXByaWNpbmcnKTtcclxuICAgICAgICAgICAgICAgICQoJy5ub24tdXNhLWFsZXJ0JykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgICAgICQoJy51aS1jdXN0b21lciwuZGl2aWRlcnMucGlwZSwudWktZW1haWwsLnVpLXN0b3JlbG9jYXRvciwudWktd2lzaGxpc3QsLnVpLWxvZ2luLC5oYW5kbGUtbm9uLXVzLC53ZWxjb21lbWVzc2FnZSwuYW5vbnltb3VzLC5zaXRlLXN1Z2dlc3Rpb24tc2VjdGlvbicpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcubWluaWNhcnQsIC5wcm9tb3Rpb25hbC1tZXNzYWdlLCAucHJvZHVjdC1jb2xvcnMtc2l6ZScpLmNzcyh7J2Rpc3BsYXknOiAnbm9uZSd9KTtcclxuICAgICAgICAgICAgICAgICQoJyNjdXN0b21lci1yZXR1cm5zLCNjdXN0b21lci1zaGlwcGluZywjY3VzdG9tZXItd2FycmFudHknKS5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmFkZHRvd2lzaGxpc3QnKS5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICAgICAgJCgnLm5vbi11cy1jb250YWN0dXMgZ2VvLC51cy1jb250YWN0dXMnKS5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICAgICAgJCgnLm5vbi11cy1jb250YWN0dXMtbm9uJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgICAgICQoJy5kZXNrdG9wSGlkZS5oYW5kbGUtbm9uLXVzLmdlbycpLnJlbW92ZUNsYXNzKCdkZXNrdG9wSGlkZScpO1xyXG4gICAgICAgICAgICAgICAgJCgnLm1vYmlsZUhpZGUuaGFuZGxlLW5vbi11cy5nZW8nKS5yZW1vdmVDbGFzcygnbW9iaWxlSGlkZScpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbnRhY3R1c05vbnVzVXJsID0gVXJscy5jb250YWN0dXNub251cztcclxuICAgICAgICAgICAgICAgICQoJy5oYW5kbGUtbm9uLXVzLmdlbycpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcuY2EtY29udGFjdHVzLWxpbmsnKS5hdHRyKCdocmVmJywgY29udGFjdHVzTm9udXNVcmwpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmN1c3Qtbm9uLXVzJykuZmluZCgnYScpLmF0dHIoJ2hyZWYnLCBjb250YWN0dXNOb251c1VybCk7XHJcbiAgICAgICAgICAgICAgICAkKCcudWktbG9naW4sLm1hZ25pZmllci1pY29uJykuY3NzKHsnYmFja2dyb3VuZCc6ICdub25lJ30pO1xyXG4gICAgICAgICAgICAgICAgJCgnLmhhbmRsZS1ub24tdXMtdmgnKS5hZGRDbGFzcygndmhpZGUnKTtcclxuICAgICAgICAgICAgICAgICQoJy5zdWJzY3JpYmUnKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLnByb2R1Y3QtcHJvbW8sIC5uZXdyZWNvbW1lbmRhdGlvbicpLmNzcyh7J2Rpc3BsYXknOiAnbm9uZSd9KTtcclxuICAgICAgICAgICAgICAgIH0sIDUwMDApO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ2hlY2sgVExTIHN0YXR1cyBpZiBpbmRpY2F0ZWQgYnkgc2l0ZSBwcmVmZXJlbmNlXHJcbiAgICAgICAgdmFyIGNoZWNrVExTID0gU2l0ZVByZWZlcmVuY2VzLkNIRUNLX1RMUztcclxuICAgICAgICBpZiAoY2hlY2tUTFMgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICB2YXIgdGxzQnJvc3dlciA9IHRscy5nZXRVc2VyQWdlbnQoKTtcclxuICAgICAgICAgICAgaWYgKCh0bHNCcm9zd2VyLm5hbWUgPT0gJ0Nocm9tZScgJiYgdGxzQnJvc3dlci52ZXJzaW9uIDwgMjIpIHx8ICh0bHNCcm9zd2VyLm5hbWUgPT0gJ0ZpcmVmb3gnICYmIHRsc0Jyb3N3ZXIudmVyc2lvbiA8IDI3KSB8fCAodGxzQnJvc3dlci5uYW1lID09ICdTYWZhcmknICYmIHRsc0Jyb3N3ZXIudmVyc2lvbiA8IDUpIHx8ICh0bHNCcm9zd2VyLm5hbWUgPT0gJ01TSUUnICYmIHRsc0Jyb3N3ZXIudmVyc2lvbiA8IDExKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRsc0Jyb3N3ZXIubmFtZSA9PSAnTVNJRScpIHtcclxuICAgICAgICAgICAgICAgICAgICB0bHNCcm9zd2VyLm5hbWUgPSAnSW50ZXJuZXQgRXhwbG9yZXInO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJCgnLmJyb3dzZXItY29tcGF0aWJpbGl0eS1hbGVydCcpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcuYnJvd3Nlci1jb21wYXRpYmlsaXR5LWFsZXJ0IHAnKS5maW5kKCcuYnJvd3Nlcl92ZXJzaW9uJykudGV4dCgnICcgKyB0bHNCcm9zd2VyLm5hbWUgKyAnICcgKyB0bHNCcm9zd2VyLnZlcnNpb24gKyAnLicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGluaXRpYWxpemVEb20oKTtcclxuICAgICAgICAvLyBpbml0IHNwZWNpZmljIGdsb2JhbCBjb21wb25lbnRzXHJcbiAgICAgICAgY291bnRyaWVzLmluaXQoKTtcclxuICAgICAgICB0b29sdGlwLmluaXQoKTtcclxuICAgICAgICBtaW5pY2FydC5pbml0KCk7XHJcbiAgICAgICAgdmFsaWRhdG9yLmluaXQoKTtcclxuICAgICAgICB1aWV2ZW50cy5pbml0KCk7XHJcbiAgICAgICAgbWVnYW1lbnUuaW5pdCgpO1xyXG4gICAgICAgIGhlYWRlcmluaXQuaW5pdCgpO1xyXG4gICAgICAgIHNlYXJjaHBsYWNlaG9sZGVyLmluaXQoKTtcclxuICAgICAgICBpZiAoU2l0ZVByZWZlcmVuY2VzLkdUTV9FTkFCTEVEKSB7XHJcbiAgICAgICAgICAgIHRhZ21hbmFnZXIuaW5pdCh3aW5kb3cucGFnZUNvbnRleHQubnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBxdWlja3ZpZXdBc3NldC5pbml0KCk7XHJcblxyXG4gICAgICAgIC8vIGV4ZWN1dGUgcGFnZSBzcGVjaWZpYyBpbml0aWFsaXphdGlvbnNcclxuICAgICAgICAkLmV4dGVuZChwYWdlLCB3aW5kb3cucGFnZUNvbnRleHQpO1xyXG4gICAgICAgIHZhciBucyA9IHBhZ2UubnM7XHJcbiAgICAgICAgaWYgKG5zICYmIHBhZ2VzW25zXSAmJiBwYWdlc1tuc10uaW5pdCkge1xyXG4gICAgICAgICAgICBwYWdlc1tuc10uaW5pdCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbml0aWFsaXplRXZlbnRzKCk7XHJcbiAgICAgICAgcmVxdWlyZSgnLi9icm93c2VyYScpLmluaXQoKTtcclxuICAgIH1cclxufTtcclxuXHJcbi8vIGdlbmVyYWwgZXh0ZW5zaW9uIGZ1bmN0aW9uc1xyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgU3RyaW5nLmZvcm1hdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcyA9IGFyZ3VtZW50c1swXTtcclxuICAgICAgICB2YXIgaSwgbGVuID0gYXJndW1lbnRzLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciByZWcgPSBuZXcgUmVnRXhwKCdcXFxceycgKyBpICsgJ1xcXFx9JywgJ2dtJyk7XHJcbiAgICAgICAgICAgIHMgPSBzLnJlcGxhY2UocmVnLCBhcmd1bWVudHNbaSArIDFdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHM7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5cclxualF1ZXJ5KGZ1bmN0aW9uICgpIHtcclxuICAgIGpRdWVyeSgnLmFjY29yZGlvbicpXHJcbiAgICAgICAgLmhvdmVyKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyICR0aGlzID0galF1ZXJ5KHRoaXMpO1xyXG4gICAgICAgICAgICBpZiAoJHRoaXMuaGFzQ2xhc3MoJ2hpZ2hsaWdodCcpKSB7XHJcbiAgICAgICAgICAgICAgICAkdGhpcy5hZGRDbGFzcygnY29udGVudGJveCcpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJHRoaXMucmVtb3ZlQ2xhc3MoJ2NvbnRlbnRib3gnKS5hZGRDbGFzcygndGFib3ZlcicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMpLnJlbW92ZUNsYXNzKCd0YWJvdmVyJykuYWRkQ2xhc3MoJ2NvbnRlbnRib3gnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICkuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgJHRoaXMgPSBqUXVlcnkodGhpcyk7XHJcbiAgICAgICAgICAgIGlmICgkdGhpcy5maW5kKCcuZXhwYW5kY29udGVudCcpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoJ2gxJykudG9nZ2xlQ2xhc3MoJ2Rvd25hcnJvdycpLm5leHQoKS50b2dnbGUoJ2Zhc3QnKTtcclxuICAgICAgICAgICAgICAgICR0aGlzLnRvZ2dsZUNsYXNzKCdoaWdobGlnaHQnKS50b2dnbGVDbGFzcygndGFib3ZlcicpLnRvZ2dsZUNsYXNzKCdjb250ZW50Ym94Jyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICR0aGlzLmZpbmQoJ2EnKS5hdHRyKCdocmVmJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxufSk7XHJcblxyXG4vLyBpbml0aWFsaXplIGFwcFxyXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XHJcbiAgICBhcHAuaW5pdCgpO1xyXG59KTtcclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxudmFyIGRpYWxvZyA9IHJlcXVpcmUoJy4vZGlhbG9nJyksXHJcbiAgICBwYWdlID0gcmVxdWlyZSgnLi9wYWdlJyksXHJcbiAgICB1dGlsID0gcmVxdWlyZSgnLi91dGlsJyk7XHJcblxyXG52YXIgc2VsZWN0ZWRMaXN0ID0gW107XHJcbnZhciBtYXhJdGVtcyA9IDE7XHJcbnZhciBibGlVVUlEID0gJyc7XHJcblxyXG4vKipcclxuICogQHByaXZhdGVcclxuICogQGZ1bmN0aW9uXHJcbiAqIGRlc2NyaXB0aW9uIEdldHMgYSBsaXN0IG9mIGJvbnVzIHByb2R1Y3RzIHJlbGF0ZWQgdG8gYSBwcm9tb3RlZCBwcm9kdWN0XHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRCb251c1Byb2R1Y3RzKCkge1xyXG4gICAgdmFyIGJvbnVzcHJvZHVjdHMgPSBbXTtcclxuXHJcbiAgICB2YXIgaSwgbGVuO1xyXG4gICAgZm9yIChpID0gMCwgbGVuID0gc2VsZWN0ZWRMaXN0Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgdmFyIHAgPSB7XHJcbiAgICAgICAgICAgIHBpZDogc2VsZWN0ZWRMaXN0W2ldLnBpZCxcclxuICAgICAgICAgICAgcXR5OiBzZWxlY3RlZExpc3RbaV0ucXR5LFxyXG4gICAgICAgICAgICBvcHRpb25zOiB7fVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIGEsIGFsZW4sIGJwID0gc2VsZWN0ZWRMaXN0W2ldO1xyXG4gICAgICAgIGlmIChicC5vcHRpb25zKSB7XHJcbiAgICAgICAgICAgIGZvciAoYSA9IDAsIGFsZW4gPSBicC5vcHRpb25zLmxlbmd0aDsgYSA8IGFsZW47IGErKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIG9wdCA9IGJwLm9wdGlvbnNbYV07XHJcbiAgICAgICAgICAgICAgICBwLm9wdGlvbnMgPSB7b3B0aW9uTmFtZTogb3B0Lm5hbWUsIG9wdGlvblZhbHVlOiBvcHQudmFsdWV9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJvbnVzcHJvZHVjdHMucHVzaCh7cHJvZHVjdDogcH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHtib251c3Byb2R1Y3RzOiBib251c3Byb2R1Y3RzfTtcclxufVxyXG5cclxudmFyIHNlbGVjdGVkSXRlbVRlbXBsYXRlID0gZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgIHZhciBhdHRyaWJ1dGVzID0gJyc7XHJcbiAgICBmb3IgKHZhciBhdHRySUQgaW4gZGF0YS5hdHRyaWJ1dGVzKSB7XHJcbiAgICAgICAgdmFyIGF0dHIgPSBkYXRhLmF0dHJpYnV0ZXNbYXR0cklEXTtcclxuICAgICAgICBhdHRyaWJ1dGVzICs9ICc8bGkgZGF0YS1hdHRyaWJ1dGUtaWQ9XCInICsgYXR0cklEICsgJ1wiPlxcbic7XHJcbiAgICAgICAgYXR0cmlidXRlcyArPSAnPHNwYW4gY2xhc3M9XCJkaXNwbGF5LW5hbWVcIj4nICsgYXR0ci5kaXNwbGF5TmFtZSArICc8L3NwYW4+OiAnO1xyXG4gICAgICAgIGF0dHJpYnV0ZXMgKz0gJzxzcGFuIGNsYXNzPVwiZGlzcGxheS12YWx1ZVwiPicgKyBhdHRyLmRpc3BsYXlWYWx1ZSArICc8L3NwYW4+XFxuJztcclxuICAgICAgICBhdHRyaWJ1dGVzICs9ICc8L2xpPic7XHJcbiAgICB9XHJcbiAgICBhdHRyaWJ1dGVzICs9ICc8bGkgY2xhc3M9XCJpdGVtLXF0eVwiPlxcbic7XHJcbiAgICBhdHRyaWJ1dGVzICs9ICc8c3BhbiBjbGFzcz1cImRpc3BsYXktbmFtZVwiPlF0eTwvc3Bhbj46ICc7XHJcbiAgICBhdHRyaWJ1dGVzICs9ICc8c3BhbiBjbGFzcz1cImRpc3BsYXktdmFsdWVcIj4nICsgZGF0YS5xdHkgKyAnPC9zcGFuPic7XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgICc8bGkgY2xhc3M9XCJzZWxlY3RlZC1ib251cy1pdGVtXCIgZGF0YS11dWlkPVwiJyArIGRhdGEudXVpZCArICdcIiBkYXRhLXBpZD1cIicgKyBkYXRhLnBpZCArICdcIj4nLFxyXG4gICAgICAgICc8aSBjbGFzcz1cInJlbW92ZS1saW5rIGZhIGZhLXJlbW92ZVwiIHRpdGxlPVwiUmVtb3ZlIHRoaXMgcHJvZHVjdFwiIGhyZWY9XCIjXCI+PC9pPicsXHJcbiAgICAgICAgJzxkaXYgY2xhc3M9XCJpdGVtLW5hbWVcIj4nICsgZGF0YS5uYW1lICsgJzwvZGl2PicsXHJcbiAgICAgICAgJzx1bCBjbGFzcz1cIml0ZW0tYXR0cmlidXRlc1wiPicsXHJcbiAgICAgICAgYXR0cmlidXRlcyxcclxuICAgICAgICAnPHVsPicsXHJcbiAgICAgICAgJzxsaT4nXHJcbiAgICBdLmpvaW4oJ1xcbicpO1xyXG59O1xyXG5cclxuLy8gaGlkZSBzd2F0Y2hlcyB0aGF0IGFyZSBub3Qgc2VsZWN0ZWQgb3Igbm90IHBhcnQgb2YgYSBQcm9kdWN0IFZhcmlhdGlvbiBHcm91cFxyXG52YXIgaGlkZVN3YXRjaGVzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgJCgnLmJvbnVzLXByb2R1Y3QtaXRlbTpub3QoW2RhdGEtcHJvZHVjdHR5cGU9XCJtYXN0ZXJcIl0pIC5zd2F0Y2hlcyBsaScpLm5vdCgnLnNlbGVjdGVkJykubm90KCcudmFyaWF0aW9uLWdyb3VwLXZhbHVlJykuaGlkZSgpO1xyXG4gICAgLy8gcHJldmVudCB1bnNlbGVjdGluZyB0aGUgc2VsZWN0ZWQgdmFyaWFudFxyXG4gICAgJCgnLmJvbnVzLXByb2R1Y3QtaXRlbSAuc3dhdGNoZXMgLnNlbGVjdGVkJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEBwcml2YXRlXHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAZGVzY3JpcHRpb24gVXBkYXRlcyB0aGUgc3VtbWFyeSBwYWdlIHdpdGggdGhlIHNlbGVjdGVkIGJvbnVzIHByb2R1Y3RcclxuICovXHJcbmZ1bmN0aW9uIHVwZGF0ZVN1bW1hcnkoKSB7XHJcbiAgICB2YXIgJGJvbnVzUHJvZHVjdExpc3QgPSAkKCcjYm9udXMtcHJvZHVjdC1saXN0Jyk7XHJcbiAgICBpZiAoIXNlbGVjdGVkTGlzdC5sZW5ndGgpIHtcclxuICAgICAgICAkYm9udXNQcm9kdWN0TGlzdC5maW5kKCdsaS5zZWxlY3RlZC1ib251cy1pdGVtJykucmVtb3ZlKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZhciB1bExpc3QgPSAkYm9udXNQcm9kdWN0TGlzdC5maW5kKCd1bC5zZWxlY3RlZC1ib251cy1pdGVtcycpLmZpcnN0KCk7XHJcbiAgICAgICAgdmFyIGksIGxlbjtcclxuICAgICAgICBmb3IgKGkgPSAwLCBsZW4gPSBzZWxlY3RlZExpc3QubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIGl0ZW0gPSBzZWxlY3RlZExpc3RbaV07XHJcbiAgICAgICAgICAgIHZhciBsaSA9IHNlbGVjdGVkSXRlbVRlbXBsYXRlKGl0ZW0pO1xyXG4gICAgICAgICAgICAkKGxpKS5hcHBlbmRUbyh1bExpc3QpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBnZXQgcmVtYWluaW5nIGl0ZW0gY291bnRcclxuICAgIHZhciByZW1haW4gPSBtYXhJdGVtcyAtIHNlbGVjdGVkTGlzdC5sZW5ndGg7XHJcbiAgICAkYm9udXNQcm9kdWN0TGlzdC5maW5kKCcuYm9udXMtaXRlbXMtYXZhaWxhYmxlJykudGV4dChyZW1haW4pO1xyXG4gICAgaWYgKHJlbWFpbiA8PSAwKSB7XHJcbiAgICAgICAgJGJvbnVzUHJvZHVjdExpc3QuZmluZCgnLnNlbGVjdC1ib251cy1pdGVtJykuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJGJvbnVzUHJvZHVjdExpc3QuZmluZCgnLnNlbGVjdC1ib251cy1pdGVtJykucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gaW5pdGlhbGl6ZUdyaWQoKSB7XHJcbiAgICB2YXIgJGJvbnVzUHJvZHVjdCA9ICQoJyNib251cy1wcm9kdWN0LWRpYWxvZycpLFxyXG4gICAgICAgICRib251c1Byb2R1Y3RMaXN0ID0gJCgnI2JvbnVzLXByb2R1Y3QtbGlzdCcpLFxyXG4gICAgICAgIGJsaURhdGEgPSAkYm9udXNQcm9kdWN0TGlzdC5kYXRhKCdsaW5lLWl0ZW0tZGV0YWlsJyk7XHJcbiAgICBtYXhJdGVtcyA9IGJsaURhdGEubWF4SXRlbXM7XHJcbiAgICBibGlVVUlEID0gYmxpRGF0YS51dWlkO1xyXG5cclxuICAgIGlmIChibGlEYXRhLml0ZW1Db3VudCA+PSBtYXhJdGVtcykge1xyXG4gICAgICAgICRib251c1Byb2R1Y3RMaXN0LmZpbmQoJy5zZWxlY3QtYm9udXMtaXRlbScpLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGNhcnRJdGVtcyA9ICRib251c1Byb2R1Y3RMaXN0LmZpbmQoJy5zZWxlY3RlZC1ib251cy1pdGVtJyk7XHJcbiAgICBjYXJ0SXRlbXMuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGNpID0gJCh0aGlzKTtcclxuICAgICAgICB2YXIgcHJvZHVjdCA9IHtcclxuICAgICAgICAgICAgdXVpZDogY2kuZGF0YSgndXVpZCcpLFxyXG4gICAgICAgICAgICBwaWQ6IGNpLmRhdGEoJ3BpZCcpLFxyXG4gICAgICAgICAgICBxdHk6IGNpLmZpbmQoJy5pdGVtLXF0eScpLnRleHQoKSxcclxuICAgICAgICAgICAgbmFtZTogY2kuZmluZCgnLml0ZW0tbmFtZScpLmh0bWwoKSxcclxuICAgICAgICAgICAgYXR0cmlidXRlczoge31cclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBhdHRyaWJ1dGVzID0gY2kuZmluZCgndWwuaXRlbS1hdHRyaWJ1dGVzIGxpJyk7XHJcbiAgICAgICAgYXR0cmlidXRlcy5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGxpID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgcHJvZHVjdC5hdHRyaWJ1dGVzW2xpLmRhdGEoJ2F0dHJpYnV0ZUlkJyldID0ge1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheU5hbWU6IGxpLmNoaWxkcmVuKCcuZGlzcGxheS1uYW1lJykuaHRtbCgpLFxyXG4gICAgICAgICAgICAgICAgZGlzcGxheVZhbHVlOiBsaS5jaGlsZHJlbignLmRpc3BsYXktdmFsdWUnKS5odG1sKClcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBzZWxlY3RlZExpc3QucHVzaChwcm9kdWN0KTtcclxuICAgIH0pO1xyXG5cclxuICAgICRib251c1Byb2R1Y3RMaXN0Lm9uKCdjbGljaycsICcuYm9udXMtcHJvZHVjdC1pdGVtIGFbaHJlZl0uc3dhdGNoYW5jaG9yJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdmFyIHVybCA9IHRoaXMuaHJlZixcclxuICAgICAgICAgICAgJHRoaXMgPSAkKHRoaXMpO1xyXG4gICAgICAgIHVybCA9IHV0aWwuYXBwZW5kUGFyYW1zVG9VcmwodXJsLCB7XHJcbiAgICAgICAgICAgICdzb3VyY2UnOiAnYm9udXMnLFxyXG4gICAgICAgICAgICAnZm9ybWF0JzogJ2FqYXgnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgJHRoaXMuY2xvc2VzdCgnLmJvbnVzLXByb2R1Y3QtaXRlbScpLmVtcHR5KCkuaHRtbChyZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICBoaWRlU3dhdGNoZXMoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSlcclxuICAgICAgICAub24oJ2NoYW5nZScsICcuaW5wdXQtdGV4dCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJGJvbnVzUHJvZHVjdExpc3QuZmluZCgnLnNlbGVjdC1ib251cy1pdGVtJykucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuYm9udXMtcHJvZHVjdC1mb3JtJykuZmluZCgnLnF1YW50aXR5LWVycm9yJykudGV4dCgnJyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAub24oJ2NsaWNrJywgJy5zZWxlY3QtYm9udXMtaXRlbScsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgaWYgKHNlbGVjdGVkTGlzdC5sZW5ndGggPj0gbWF4SXRlbXMpIHtcclxuICAgICAgICAgICAgICAgICRib251c1Byb2R1Y3RMaXN0LmZpbmQoJy5zZWxlY3QtYm9udXMtaXRlbScpLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICAgICAgICAkYm9udXNQcm9kdWN0TGlzdC5maW5kKCcuYm9udXMtaXRlbXMtYXZhaWxhYmxlJykudGV4dCgnMCcpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZm9ybSA9ICQodGhpcykuY2xvc2VzdCgnLmJvbnVzLXByb2R1Y3QtZm9ybScpLFxyXG4gICAgICAgICAgICAgICAgZGV0YWlsID0gJCh0aGlzKS5jbG9zZXN0KCcucHJvZHVjdC1kZXRhaWwnKSxcclxuICAgICAgICAgICAgICAgIHV1aWQgPSBmb3JtLmZpbmQoJ2lucHV0W25hbWU9XCJwcm9kdWN0VVVJRFwiXScpLnZhbCgpLFxyXG4gICAgICAgICAgICAgICAgcXR5VmFsID0gZm9ybS5maW5kKCdpbnB1dFtuYW1lPVwiUXVhbnRpdHlcIl0nKS52YWwoKSxcclxuICAgICAgICAgICAgICAgIHF0eSA9IChpc05hTihxdHlWYWwpKSA/IDEgOiAoK3F0eVZhbCk7XHJcblxyXG4gICAgICAgICAgICBpZiAocXR5ID4gbWF4SXRlbXMpIHtcclxuICAgICAgICAgICAgICAgICRib251c1Byb2R1Y3RMaXN0LmZpbmQoJy5zZWxlY3QtYm9udXMtaXRlbScpLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICAgICAgICBmb3JtLmZpbmQoJy5xdWFudGl0eS1lcnJvcicpLnRleHQoUmVzb3VyY2VzLkJPTlVTX1BST0RVQ1RfVE9PTUFOWSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBwcm9kdWN0ID0ge1xyXG4gICAgICAgICAgICAgICAgdXVpZDogdXVpZCxcclxuICAgICAgICAgICAgICAgIHBpZDogZm9ybS5maW5kKCdpbnB1dFtuYW1lPVwicGlkXCJdJykudmFsKCksXHJcbiAgICAgICAgICAgICAgICBxdHk6IHF0eSxcclxuICAgICAgICAgICAgICAgIG5hbWU6IGRldGFpbC5maW5kKCcucHJvZHVjdC1uYW1lJykudGV4dCgpLFxyXG4gICAgICAgICAgICAgICAgYXR0cmlidXRlczogZGV0YWlsLmZpbmQoJy5wcm9kdWN0LXZhcmlhdGlvbnMnKS5kYXRhKCdhdHRyaWJ1dGVzJyksXHJcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBbXVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdmFyIG9wdGlvblNlbGVjdHMgPSBmb3JtLmZpbmQoJy5wcm9kdWN0LW9wdGlvbicpO1xyXG5cclxuICAgICAgICAgICAgb3B0aW9uU2VsZWN0cy5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHByb2R1Y3Qub3B0aW9ucy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICQodGhpcykudmFsKCksXHJcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogJCh0aGlzKS5jaGlsZHJlbignOnNlbGVjdGVkJykuZmlyc3QoKS5odG1sKClcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgc2VsZWN0ZWRMaXN0LnB1c2gocHJvZHVjdCk7XHJcbiAgICAgICAgICAgIHVwZGF0ZVN1bW1hcnkoKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5vbignY2xpY2snLCAnLnJlbW92ZS1saW5rJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB2YXIgY29udGFpbmVyID0gJCh0aGlzKS5jbG9zZXN0KCcuc2VsZWN0ZWQtYm9udXMtaXRlbScpO1xyXG4gICAgICAgICAgICBpZiAoIWNvbnRhaW5lci5kYXRhKCd1dWlkJykpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIHV1aWQgPSBjb250YWluZXIuZGF0YSgndXVpZCcpO1xyXG4gICAgICAgICAgICB2YXIgaSwgbGVuID0gc2VsZWN0ZWRMaXN0Lmxlbmd0aDtcclxuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWRMaXN0W2ldLnV1aWQgPT09IHV1aWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZExpc3Quc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHVwZGF0ZVN1bW1hcnkoKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5vbignY2xpY2snLCAnLmFkZC10by1jYXJ0LWJvbnVzJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB2YXIgdXJsID0gdXRpbC5hcHBlbmRQYXJhbXNUb1VybChVcmxzLmFkZEJvbnVzUHJvZHVjdCwge2JvbnVzRGlzY291bnRMaW5lSXRlbVVVSUQ6IGJsaVVVSUR9KTtcclxuICAgICAgICAgICAgdmFyIGJvbnVzUHJvZHVjdHMgPSBnZXRCb251c1Byb2R1Y3RzKCk7XHJcbiAgICAgICAgICAgIGlmIChib251c1Byb2R1Y3RzLmJvbnVzcHJvZHVjdHNbMF0ucHJvZHVjdC5xdHkgPiBtYXhJdGVtcykge1xyXG4gICAgICAgICAgICAgICAgYm9udXNQcm9kdWN0cy5ib251c3Byb2R1Y3RzWzBdLnByb2R1Y3QucXR5ID0gbWF4SXRlbXM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gbWFrZSB0aGUgc2VydmVyIGNhbGxcclxuICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcclxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgICAgICAgICBjYWNoZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShib251c1Byb2R1Y3RzKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmRvbmUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHN1Y2Nlc3NcclxuICAgICAgICAgICAgICAgICAgICBwYWdlLnJlZnJlc2goKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuZmFpbChmdW5jdGlvbiAoeGhyLCB0ZXh0U3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZmFpbGVkXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRleHRTdGF0dXMgPT09ICdwYXJzZXJlcnJvcicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmFsZXJ0KFJlc291cmNlcy5CQURfUkVTUE9OU0UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5hbGVydChSZXNvdXJjZXMuU0VSVkVSX0NPTk5FQ1RJT05fRVJST1IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuYWx3YXlzKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAkYm9udXNQcm9kdWN0LmRpYWxvZygnY2xvc2UnKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLm9uKCdjbGljaycsICcjbW9yZS1ib251cy1wcm9kdWN0cycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdmFyIHV1aWQgPSAkKCcjYm9udXMtcHJvZHVjdC1saXN0JykuZGF0YSgpLmxpbmVJdGVtRGV0YWlsLnV1aWQ7XHJcblxyXG4gICAgICAgICAgICAvL2dldCB0aGUgbmV4dCBwYWdlIG9mIGNob2ljZSBvZiBib251cyBwcm9kdWN0c1xyXG4gICAgICAgICAgICB2YXIgbGluZUl0ZW1EZXRhaWwgPSBKU09OLnBhcnNlKCQoJyNib251cy1wcm9kdWN0LWxpc3QnKS5hdHRyKCdkYXRhLWxpbmUtaXRlbS1kZXRhaWwnKSk7XHJcbiAgICAgICAgICAgIGxpbmVJdGVtRGV0YWlsLnBhZ2VTdGFydCA9IGxpbmVJdGVtRGV0YWlsLnBhZ2VTdGFydCArIGxpbmVJdGVtRGV0YWlsLnBhZ2VTaXplO1xyXG4gICAgICAgICAgICAkKCcjYm9udXMtcHJvZHVjdC1saXN0JykuYXR0cignZGF0YS1saW5lLWl0ZW0tZGV0YWlsJywgSlNPTi5zdHJpbmdpZnkobGluZUl0ZW1EZXRhaWwpKTtcclxuXHJcbiAgICAgICAgICAgIHZhciB1cmwgPSB1dGlsLmFwcGVuZFBhcmFtc1RvVXJsKFVybHMuZ2V0Qm9udXNQcm9kdWN0cywge1xyXG4gICAgICAgICAgICAgICAgYm9udXNEaXNjb3VudExpbmVJdGVtVVVJRDogdXVpZCxcclxuICAgICAgICAgICAgICAgIGZvcm1hdDogJ2FqYXgnLFxyXG4gICAgICAgICAgICAgICAgbGF6eUxvYWQ6ICd0cnVlJyxcclxuICAgICAgICAgICAgICAgIHBhZ2VTdGFydDogbGluZUl0ZW1EZXRhaWwucGFnZVN0YXJ0LFxyXG4gICAgICAgICAgICAgICAgcGFnZVNpemU6ICQoJyNib251cy1wcm9kdWN0LWxpc3QnKS5kYXRhKCkubGluZUl0ZW1EZXRhaWwucGFnZVNpemUsXHJcbiAgICAgICAgICAgICAgICBib251c1Byb2R1Y3RzVG90YWw6ICQoJyNib251cy1wcm9kdWN0LWxpc3QnKS5kYXRhKCkubGluZUl0ZW1EZXRhaWwuYnBUb3RhbFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnR0VUJyxcclxuICAgICAgICAgICAgICAgIGNhY2hlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgICAgICB1cmw6IHVybFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmRvbmUoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL2FkZCB0aGUgbmV3IHBhZ2UgdG8gRE9NIGFuZCByZW1vdmUgJ01vcmUnIGxpbmsgaWYgaXQgaXMgdGhlIGxhc3QgcGFnZSBvZiByZXN1bHRzXHJcbiAgICAgICAgICAgICAgICAgICAgJCgnI21vcmUtYm9udXMtcHJvZHVjdHMnKS5iZWZvcmUoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKChsaW5lSXRlbURldGFpbC5wYWdlU3RhcnQgKyBsaW5lSXRlbURldGFpbC5wYWdlU2l6ZSkgPj0gJCgnI2JvbnVzLXByb2R1Y3QtbGlzdCcpLmRhdGEoKS5saW5lSXRlbURldGFpbC5icFRvdGFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNtb3JlLWJvbnVzLXByb2R1Y3RzJykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5mYWlsKGZ1bmN0aW9uICh4aHIsIHRleHRTdGF0dXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGV4dFN0YXR1cyA9PT0gJ3BhcnNlcmVycm9yJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuYWxlcnQoUmVzb3VyY2VzLkJBRF9SRVNQT05TRSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmFsZXJ0KFJlc291cmNlcy5TRVJWRVJfQ09OTkVDVElPTl9FUlJPUik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbn1cclxuXHJcbnZhciBib251c1Byb2R1Y3RzVmlldyA9IHtcclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gT3BlbiB0aGUgbGlzdCBvZiBib251cyBwcm9kdWN0cyBzZWxlY3Rpb24gZGlhbG9nXHJcbiAgICAgKi9cclxuICAgIHNob3c6IGZ1bmN0aW9uICh1cmwpIHtcclxuICAgICAgICB2YXIgJGJvbnVzUHJvZHVjdCA9ICQoJyNib251cy1wcm9kdWN0LWRpYWxvZycpO1xyXG4gICAgICAgIC8vIGNyZWF0ZSB0aGUgZGlhbG9nXHJcbiAgICAgICAgZGlhbG9nLm9wZW4oe1xyXG4gICAgICAgICAgICB0YXJnZXQ6ICRib251c1Byb2R1Y3QsXHJcbiAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICBvcHRpb25zOiB7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogNzk1LFxyXG4gICAgICAgICAgICAgICAgdGl0bGU6IFJlc291cmNlcy5CT05VU19QUk9EVUNUU1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaW5pdGlhbGl6ZUdyaWQoKTtcclxuICAgICAgICAgICAgICAgIGhpZGVTd2F0Y2hlcygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb25cclxuICAgICAqIEBkZXNjcmlwdGlvbiBPcGVuIGJvbnVzIHByb2R1Y3QgcHJvbW8gcHJvbXB0IGRpYWxvZ1xyXG4gICAgICovXHJcbiAgICBsb2FkQm9udXNPcHRpb246IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXMsXHJcbiAgICAgICAgICAgIGJvbnVzRGlzY291bnRDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYm9udXMtZGlzY291bnQtY29udGFpbmVyJyk7XHJcbiAgICAgICAgaWYgKCFib251c0Rpc2NvdW50Q29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGdldCB0aGUgaHRtbCBmcm9tIG1pbmljYXJ0LCB0aGVuIHRyYXNoIGl0XHJcbiAgICAgICAgdmFyIGJvbnVzRGlzY291bnRDb250YWluZXJIdG1sID0gYm9udXNEaXNjb3VudENvbnRhaW5lci5vdXRlckhUTUw7XHJcbiAgICAgICAgYm9udXNEaXNjb3VudENvbnRhaW5lci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGJvbnVzRGlzY291bnRDb250YWluZXIpO1xyXG5cclxuICAgICAgICBkaWFsb2cub3Blbih7XHJcbiAgICAgICAgICAgIGh0bWw6IGJvbnVzRGlzY291bnRDb250YWluZXJIdG1sLFxyXG4gICAgICAgICAgICBvcHRpb25zOiB7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogNDAwLFxyXG4gICAgICAgICAgICAgICAgdGl0bGU6IFJlc291cmNlcy5CT05VU19QUk9EVUNULFxyXG4gICAgICAgICAgICAgICAgYnV0dG9uczogW3tcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBSZXNvdXJjZXMuU0VMRUNUX0JPTlVTX1BST0RVQ1RTLFxyXG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1dWlkID0gJCgnLmJvbnVzLXByb2R1Y3QtcHJvbW8nKS5kYXRhKCdsaW5laXRlbWlkJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmwgPSB1dGlsLmFwcGVuZFBhcmFtc1RvVXJsKFVybHMuZ2V0Qm9udXNQcm9kdWN0cywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbnVzRGlzY291bnRMaW5lSXRlbVVVSUQ6IHV1aWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlOiAnYm9udXMnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdDogJ2FqYXgnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhenlMb2FkOiAnZmFsc2UnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VTdGFydDogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlU2l6ZTogMTAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9udXNQcm9kdWN0c1RvdGFsOiAtMVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuZGlhbG9nKCdjbG9zZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNob3codXJsKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogUmVzb3VyY2VzLk5PX1RIQU5LUyxcclxuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmRpYWxvZygnY2xvc2UnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgLy8gc2hvdyBoaWRlIHByb21vIGRldGFpbHNcclxuICAgICAgICAgICAgICAgICQoJy5zaG93LXByb21vLWRldGFpbHMnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLnByb21vLWRldGFpbHMnKS50b2dnbGVDbGFzcygndmlzaWJsZScpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gYm9udXNQcm9kdWN0c1ZpZXc7XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuXHJcbmZ1bmN0aW9uIGdldFVybFZhcnMoKSB7XHJcbiAgICB2YXIgdmFycyA9IFtdLFxyXG4gICAgICAgIGhhc2g7XHJcbiAgICB2YXIgaGFzaGVzID0gd2luZG93LmxvY2F0aW9uLmhyZWYuc2xpY2Uod2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZignPycpICsgMSkuc3BsaXQoJyYnKTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGFzaGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaGFzaCA9IGhhc2hlc1tpXS5zcGxpdCgnPScpO1xyXG4gICAgICAgIHZhcnMucHVzaChoYXNoWzBdKTtcclxuICAgICAgICB2YXJzW2hhc2hbMF1dID0gaGFzaFsxXTtcclxuICAgIH1cclxuICAgIHJldHVybiB2YXJzO1xyXG59XHJcblxyXG5mdW5jdGlvbiBydW5Ccm93c2VyYVRlc3QoKSB7XHJcblxyXG4gICAgdmFyIGhvdmVyU2VsZWN0b3IgPSBkZWNvZGVVUkkoZ2V0VXJsVmFycygpLmhvdmVyKTtcclxuICAgIGlmIChob3ZlclNlbGVjdG9yICE9PSAnJykge1xyXG4gICAgICAgIGhvdmVyU2VsZWN0b3IgPSBob3ZlclNlbGVjdG9yLnJlcGxhY2UoJyBlcSAnLCAnPScpO1xyXG4gICAgICAgIGlmICgkKGhvdmVyU2VsZWN0b3IpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgJChob3ZlclNlbGVjdG9yKS50cmlnZ2VyKCdtb3VzZWVudGVyJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgdmFyIGNsaWNrU2VsZWN0b3IgPSBkZWNvZGVVUkkoZ2V0VXJsVmFycygpLmNsaWNrKTtcclxuICAgIGlmIChjbGlja1NlbGVjdG9yICE9PSAnJykge1xyXG4gICAgICAgIGNsaWNrU2VsZWN0b3IgPSBjbGlja1NlbGVjdG9yLnJlcGxhY2UoJyBlcSAnLCAnPScpO1xyXG4gICAgICAgIGlmICgkKGNsaWNrU2VsZWN0b3IpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgJChjbGlja1NlbGVjdG9yKS50cmlnZ2VyKCdjbGljaycpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICBydW5Ccm93c2VyYVRlc3QoKTtcclxufTtcclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxudmFyIGRpYWxvZyA9IHJlcXVpcmUoJy4vZGlhbG9nJyk7XHJcbnZhciB1dGlsID0gcmVxdWlyZSgnLi91dGlsJyk7XHJcbnZhciBTZXNzaW9uQXR0cmlidXRlcyA9IHdpbmRvdy5TZXNzaW9uQXR0cmlidXRlcztcclxuXHJcbi8qKlxyXG4gKiBAZnVuY3Rpb24gY2FwdGNoYSAgICBVc2VkIHRvIGRpc3BsYXkvY29udHJvbCB0aGUgc2NyaW0gY29udGFpbmluZyB0aGUgc2ltdWxhdGVkIGNhcHRjaGEgY29kZVxyXG4gKiovXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBpZiB0aGUgc2Vzc2lvbi5wcml2YWN5LnJhdGVsaW1pdGVkIGVsZW1lbnQgaXMgcHJlc2VudCB0aGVuIHNob3cgdGhlIG5vdGlmaWNhdGlvblxyXG4gICAgICogTk9URTogWW91IHdpbGwgcHJvYmFibHkgd2FudCB0byByZXBsYWNlIHRoaXMgd2l0aCBhIGNhbGwgdG8gYW4gYWN0dWFsIENBUFRDSEEgc3lzdGVtIHRvIHJlcGxhY2UgdGhlIHNpbXBsZSBvbmUgaGVyZVxyXG4gICAgICovXHJcbiAgICBpZiAoU2Vzc2lvbkF0dHJpYnV0ZXMuU0hPV19DQVBUQ0hBKSB7XHJcbiAgICAgICAgZGlhbG9nLm9wZW4oe1xyXG4gICAgICAgICAgICBodG1sOiAnPGgxPicgKyBSZXNvdXJjZXMuQVJFX1lPVV9IVU1BTiArICc8L2gxPicsXHJcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcclxuICAgICAgICAgICAgICAgIGNsb3NlT25Fc2NhcGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZGlhbG9nQ2xhc3M6ICduby1jbG9zZScsXHJcbiAgICAgICAgICAgICAgICBidXR0b25zOiBbe1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IFJlc291cmNlcy5PSyxcclxuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gdXRpbC5hcHBlbmRQYXJhbXNUb1VybChVcmxzLnJhdGVMaW1pdGVyUmVzZXQsIHtmb3JtYXQ6ICdhamF4J30pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiB1cmxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuZGlhbG9nKCdjbG9zZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1dXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufTtcclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxudmFyIHBhZ2UgPSByZXF1aXJlKCcuL3BhZ2UnKSxcclxuICAgIHV0aWwgPSByZXF1aXJlKCcuL3V0aWwnKSxcclxuICAgIFRQcm9taXNlID0gcmVxdWlyZSgncHJvbWlzZScpO1xyXG5cclxudmFyIF9jdXJyZW50Q2F0ZWdvcnkgPSAnJyxcclxuICAgIE1BWF9BQ1RJVkUgPSA2O1xyXG5cclxuLyoqXHJcbiAqIEBwcml2YXRlXHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAZGVzY3JpcHRpb24gVmVyaWZpZXMgdGhlIG51bWJlciBvZiBlbGVtZW50cyBpbiB0aGUgY29tcGFyZSBjb250YWluZXIgYW5kIHVwZGF0ZXMgaXQgd2l0aCBzZXF1ZW50aWFsIGNsYXNzZXMgZm9yIHVpIHRhcmdldGluZ1xyXG4gKi9cclxuZnVuY3Rpb24gcmVmcmVzaENvbnRhaW5lcigpIHtcclxuICAgIHZhciAkY29tcGFyZUNvbnRhaW5lciA9ICQoJy5jb21wYXJlLWl0ZW1zJyk7XHJcbiAgICB2YXIgJGNvbXBhcmVJdGVtcyA9ICRjb21wYXJlQ29udGFpbmVyLmZpbmQoJy5jb21wYXJlLWl0ZW0nKTtcclxuICAgIHZhciBudW1BY3RpdmUgPSAkY29tcGFyZUl0ZW1zLmZpbHRlcignLmFjdGl2ZScpLmxlbmd0aDtcclxuXHJcbiAgICBpZiAobnVtQWN0aXZlIDwgMikge1xyXG4gICAgICAgICQoJyNjb21wYXJlLWl0ZW1zLWJ1dHRvbicpLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgICQoJyNjb21wYXJlLWl0ZW1zLWJ1dHRvbicpLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7XHJcbiAgICB9XHJcbiAgICAvKlN0YXJ0IEpJUkEgUFJFVi0yMzQgOiBQTFAgLSBOb3QgYWJsZSB0byByZW1vdmUgaW5kaXZpZHVhbCBwcm9kdWN0IGZyb20gdGhlIGNvbXBhcmUgZ3JpZCBmcm9tIFBMUC4qL1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkY29tcGFyZUl0ZW1zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgJCgkY29tcGFyZUl0ZW1zW2ldKS5maW5kKCcuY29tcGFyZS1pdGVtLW51bWJlcicpLnRleHQoaSArIDEpO1xyXG4gICAgfVxyXG4gICAgLypFbmQgSklSQSBQUkVWLTIzNCovXHJcbiAgICAkY29tcGFyZUNvbnRhaW5lci50b2dnbGUobnVtQWN0aXZlID4gMCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAcHJpdmF0ZVxyXG4gKiBAZnVuY3Rpb25cclxuICogQGRlc2NyaXB0aW9uIEFkZHMgYW4gaXRlbSB0byB0aGUgY29tcGFyZSBjb250YWluZXIgYW5kIHJlZnJlc2hlcyBpdFxyXG4gKi9cclxuZnVuY3Rpb24gYWRkVG9MaXN0KGRhdGEpIHtcclxuICAgIC8vIGdldCB0aGUgZmlyc3QgY29tcGFyZS1pdGVtIG5vdCBjdXJyZW50bHkgYWN0aXZlXHJcbiAgICB2YXIgJGl0ZW0gPSAkKCcuY29tcGFyZS1pdGVtcyAuY29tcGFyZS1pdGVtJykubm90KCcuYWN0aXZlJykuZmlyc3QoKSxcclxuICAgICAgICAkcHJvZHVjdFRpbGUgPSAkKCcjJyArIGRhdGEudXVpZCk7XHJcblxyXG4gICAgaWYgKCRpdGVtLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIGlmICgkcHJvZHVjdFRpbGUubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAkcHJvZHVjdFRpbGUuZmluZCgnLmNvbXBhcmUtY2hlY2snKVswXS5jaGVja2VkID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHdpbmRvdy5hbGVydChSZXNvdXJjZXMuQ09NUEFSRV9BRERfRkFJTCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGlmIGFscmVhZHkgYWRkZWQgc29tZWhvdywgcmV0dXJuXHJcbiAgICBpZiAoJCgnW2RhdGEtdXVpZD1cIicgKyBkYXRhLnV1aWQgKyAnXCJdJykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIC8vIHNldCBhcyBhY3RpdmUgaXRlbVxyXG4gICAgJGl0ZW0uYWRkQ2xhc3MoJ2FjdGl2ZScpXHJcbiAgICAgICAgLmF0dHIoJ2RhdGEtdXVpZCcsIGRhdGEudXVpZClcclxuICAgICAgICAuYXR0cignZGF0YS1pdGVtaWQnLCBkYXRhLml0ZW1pZClcclxuICAgICAgICAuZGF0YSgndXVpZCcsIGRhdGEudXVpZClcclxuICAgICAgICAuZGF0YSgnaXRlbWlkJywgZGF0YS5pdGVtaWQpXHJcbiAgICAgICAgLmFwcGVuZCgkKGRhdGEuaW1nKS5jbG9uZSgpLmFkZENsYXNzKCdjb21wYXJlLWl0ZW0taW1hZ2UnKSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAcHJpdmF0ZVxyXG4gKiBAZnVuY3Rpb25cclxuICogZGVzY3JpcHRpb24gUmVtb3ZlcyBhbiBpdGVtIGZyb20gdGhlIGNvbXBhcmUgY29udGFpbmVyIGFuZCByZWZyZXNoZXMgaXRcclxuICovXHJcbmZ1bmN0aW9uIHJlbW92ZUZyb21MaXN0KCRpdGVtKSB7XHJcbiAgICBpZiAoJGl0ZW0ubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgLy8gcmVtb3ZlIGNsYXNzLCBkYXRhIGFuZCBpZCBmcm9tIGl0ZW1cclxuICAgICRpdGVtLnJlbW92ZUNsYXNzKCdhY3RpdmUnKVxyXG4gICAgICAgIC5yZW1vdmVBdHRyKCdkYXRhLXV1aWQnKVxyXG4gICAgICAgIC5yZW1vdmVBdHRyKCdkYXRhLWl0ZW1pZCcpXHJcbiAgICAgICAgLmRhdGEoJ3V1aWQnLCAnJylcclxuICAgICAgICAuZGF0YSgnaXRlbWlkJywgJycpXHJcbiAgICAgICAgLy8gcmVtb3ZlIHRoZSBpbWFnZVxyXG4gICAgICAgIC5maW5kKCcuY29tcGFyZS1pdGVtLWltYWdlJykucmVtb3ZlKCk7XHJcblxyXG4gICAgLypTdGFydCBKSVJBIFBSRVYtMjM0IDogUExQIC0gTm90IGFibGUgdG8gcmVtb3ZlIGluZGl2aWR1YWwgcHJvZHVjdCBmcm9tIHRoZSBjb21wYXJlIGdyaWQgZnJvbSBQTFAuKi9cclxuICAgIHZhciAkY2xvbmVJdGVtID0gJGl0ZW0uY2xvbmUoKTtcclxuICAgICRpdGVtLnJlbW92ZSgpO1xyXG4gICAgJGNsb25lSXRlbS5hcHBlbmRUbygnLmNvbXBhcmUtaXRlbXMtcGFuZWwnKTtcclxuICAgIHJlZnJlc2hDb250YWluZXIoKTtcclxuICAgIC8qRW5kIEpJUkEgUFJFVi0yMzQqL1xyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRQcm9kdWN0QWpheChhcmdzKSB7XHJcbiAgICB2YXIgcHJvbWlzZSA9IG5ldyBUUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiBVcmxzLmNvbXBhcmVBZGQsXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIHBpZDogYXJncy5pdGVtaWQsXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeTogX2N1cnJlbnRDYXRlZ29yeVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nXHJcbiAgICAgICAgfSkuZG9uZShmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgaWYgKCFyZXNwb25zZSB8fCAhcmVzcG9uc2Uuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihSZXNvdXJjZXMuQ09NUEFSRV9BRERfRkFJTCkpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICBpbml0aWFsaXplRXZlbnRzKCk7IC8vIEpJUkEgUFJFVi0yMzQgOiBQTFAgLSBOb3QgYWJsZSB0byByZW1vdmUgaW5kaXZpZHVhbCBwcm9kdWN0IGZyb20gdGhlIGNvbXBhcmUgZ3JpZCBmcm9tIFBMUC5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLmZhaWwoZnVuY3Rpb24gKGpxeGhyLCBzdGF0dXMsIGVycikge1xyXG4gICAgICAgICAgICByZWplY3QobmV3IEVycm9yKGVycikpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gcHJvbWlzZTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVtb3ZlUHJvZHVjdEFqYXgoYXJncykge1xyXG4gICAgdmFyIHByb21pc2UgPSBuZXcgVFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogVXJscy5jb21wYXJlUmVtb3ZlLFxyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICBwaWQ6IGFyZ3MuaXRlbWlkLFxyXG4gICAgICAgICAgICAgICAgY2F0ZWdvcnk6IF9jdXJyZW50Q2F0ZWdvcnlcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJ1xyXG4gICAgICAgIH0pLmRvbmUoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2UgfHwgIXJlc3BvbnNlLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoUmVzb3VyY2VzLkNPTVBBUkVfUkVNT1ZFX0ZBSUwpKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkuZmFpbChmdW5jdGlvbiAoanF4aHIsIHN0YXR1cywgZXJyKSB7XHJcbiAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoZXJyKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBwcm9taXNlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzaGlmdEltYWdlcygpIHtcclxuICAgIHJldHVybiBuZXcgVFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcclxuICAgICAgICB2YXIgJGl0ZW1zID0gJCgnLmNvbXBhcmUtaXRlbXMgLmNvbXBhcmUtaXRlbScpO1xyXG4gICAgICAgICRpdGVtcy5lYWNoKGZ1bmN0aW9uIChpLCBpdGVtKSB7XHJcbiAgICAgICAgICAgIHZhciAkaXRlbSA9ICQoaXRlbSk7XHJcbiAgICAgICAgICAgIC8vIGxhc3QgaXRlbVxyXG4gICAgICAgICAgICBpZiAoaSA9PT0gJGl0ZW1zLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZW1vdmVGcm9tTGlzdCgkaXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyICRuZXh0ID0gJGl0ZW1zLmVxKGkpOyAvL0pJUkEgUFJFVi0yNjEgOiBQTFA6IFdoZW4gbW9yZSB0aGFuIDYgcHJvZHVjdCBjb21wYXJlZCB0aGVuIENvbXBhcmVzZWN0aW9uIG5vdCBkaXNwbGF5aW5nIGFsbCB0aGUgcHJvZHVjdCBpbWFnZXMuIFJlbW92ZWQgKzFcclxuICAgICAgICAgICAgaWYgKCRuZXh0Lmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGl0cyBvd24gaW1hZ2VcclxuICAgICAgICAgICAgICAgICRuZXh0LmZpbmQoJy5jb21wYXJlLWl0ZW0taW1hZ2UnKS5kZXRhY2goKS5hcHBlbmRUbygkaXRlbSk7XHJcbiAgICAgICAgICAgICAgICAkaXRlbS5hZGRDbGFzcygnYWN0aXZlJylcclxuICAgICAgICAgICAgICAgICAgICAuYXR0cignZGF0YS11dWlkJywgJG5leHQuZGF0YSgndXVpZCcpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdkYXRhLWl0ZW1pZCcsICRuZXh0LmRhdGEoJ2l0ZW1pZCcpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5kYXRhKCd1dWlkJywgJG5leHQuZGF0YSgndXVpZCcpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5kYXRhKCdpdGVtaWQnLCAkbmV4dC5kYXRhKCdpdGVtaWQnKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXNvbHZlKCk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAZGVzY3JpcHRpb24gQWRkcyBwcm9kdWN0IHRvIHRoZSBjb21wYXJlIHRhYmxlXHJcbiAqL1xyXG5mdW5jdGlvbiBhZGRQcm9kdWN0KGFyZ3MpIHtcclxuICAgIHZhciBwcm9taXNlO1xyXG4gICAgdmFyICRpdGVtcyA9ICQoJy5jb21wYXJlLWl0ZW1zIC5jb21wYXJlLWl0ZW0nKTtcclxuICAgIHZhciAkY2IgPSAkKGFyZ3MuY2IpO1xyXG4gICAgdmFyIG51bUFjdGl2ZSA9ICRpdGVtcy5maWx0ZXIoJy5hY3RpdmUnKS5sZW5ndGg7XHJcbiAgICBpZiAobnVtQWN0aXZlID09PSBNQVhfQUNUSVZFKSB7XHJcbiAgICAgICAgaWYgKCF3aW5kb3cuY29uZmlybShSZXNvdXJjZXMuQ09NUEFSRV9DT05GSVJNQVRJT04pKSB7XHJcbiAgICAgICAgICAgICRjYlswXS5jaGVja2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHJlbW92ZSBwcm9kdWN0IHVzaW5nIGlkXHJcbiAgICAgICAgdmFyICRmaXJzdEl0ZW0gPSAkaXRlbXMuZmlyc3QoKTtcclxuICAgICAgICBwcm9taXNlID0gcmVtb3ZlSXRlbSgkZmlyc3RJdGVtKS50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNoaWZ0SW1hZ2VzKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHByb21pc2UgPSBUUHJvbWlzZS5yZXNvbHZlKDApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHByb21pc2UudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIGFkZFByb2R1Y3RBamF4KGFyZ3MpLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBhZGRUb0xpc3QoYXJncyk7XHJcbiAgICAgICAgICAgIGlmICgkY2IgJiYgJGNiLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICRjYlswXS5jaGVja2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZWZyZXNoQ29udGFpbmVyKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KS50aGVuKG51bGwsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoJGNiICYmICRjYi5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICRjYlswXS5jaGVja2VkID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAZnVuY3Rpb25cclxuICogQGRlc2NyaXB0aW9uIFJlbW92ZXMgcHJvZHVjdCBmcm9tIHRoZSBjb21wYXJlIHRhYmxlXHJcbiAqIEBwYXJhbSB7b2JqZWN0fSBhcmdzIC0gdGhlIGFyZ3VtZW50cyBvYmplY3Qgc2hvdWxkIGhhdmUgdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOiBpdGVtaWQsIHV1aWQgYW5kIGNiIChjaGVja2JveClcclxuICovXHJcbmZ1bmN0aW9uIHJlbW92ZVByb2R1Y3QoYXJncykge1xyXG4gICAgdmFyICRjYiA9IGFyZ3MuY2IgPyAkKGFyZ3MuY2IpIDogbnVsbDtcclxuICAgIHJldHVybiByZW1vdmVQcm9kdWN0QWpheChhcmdzKS50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgJGl0ZW0gPSAkKCdbZGF0YS11dWlkPVwiJyArIGFyZ3MudXVpZCArICdcIl0nKTtcclxuICAgICAgICByZW1vdmVGcm9tTGlzdCgkaXRlbSk7XHJcbiAgICAgICAgaWYgKCRjYiAmJiAkY2IubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAkY2JbMF0uY2hlY2tlZCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZWZyZXNoQ29udGFpbmVyKCk7XHJcbiAgICB9LCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCRjYiAmJiAkY2IubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAkY2JbMF0uY2hlY2tlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbW92ZUl0ZW0oJGl0ZW0pIHtcclxuICAgIHZhciB1dWlkID0gJGl0ZW0uZGF0YSgndXVpZCcpLFxyXG4gICAgICAgICRwcm9kdWN0VGlsZSA9ICQoJyMnICsgdXVpZCk7XHJcbiAgICByZXR1cm4gcmVtb3ZlUHJvZHVjdCh7XHJcbiAgICAgICAgaXRlbWlkOiAkaXRlbS5kYXRhKCdpdGVtaWQnKSxcclxuICAgICAgICB1dWlkOiB1dWlkLFxyXG4gICAgICAgIGNiOiAoJHByb2R1Y3RUaWxlLmxlbmd0aCA9PT0gMCkgPyBudWxsIDogJHByb2R1Y3RUaWxlLmZpbmQoJy5jb21wYXJlLWNoZWNrJylcclxuICAgIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogQHByaXZhdGVcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBkZXNjcmlwdGlvbiBJbml0aWFsaXplcyB0aGUgRE9NLU9iamVjdCBvZiB0aGUgY29tcGFyZSBjb250YWluZXJcclxuICovXHJcbmZ1bmN0aW9uIGluaXRpYWxpemVEb20oKSB7XHJcbiAgICB2YXIgJGNvbXBhcmVDb250YWluZXIgPSAkKCcuY29tcGFyZS1pdGVtcycpO1xyXG4gICAgX2N1cnJlbnRDYXRlZ29yeSA9ICRjb21wYXJlQ29udGFpbmVyLmRhdGEoJ2NhdGVnb3J5JykgfHwgJyc7XHJcbiAgICB2YXIgJGFjdGl2ZSA9ICRjb21wYXJlQ29udGFpbmVyLmZpbmQoJy5jb21wYXJlLWl0ZW0nKS5maWx0ZXIoJy5hY3RpdmUnKTtcclxuICAgICRhY3RpdmUuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyICRwcm9kdWN0VGlsZSA9ICQoJyMnICsgJCh0aGlzKS5kYXRhKCd1dWlkJykpO1xyXG4gICAgICAgIGlmICgkcHJvZHVjdFRpbGUubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgJHByb2R1Y3RUaWxlLmZpbmQoJy5jb21wYXJlLWNoZWNrJylbMF0uY2hlY2tlZCA9IHRydWU7XHJcbiAgICB9KTtcclxuICAgIC8vIHNldCBjb250YWluZXIgc3RhdGVcclxuICAgIHJlZnJlc2hDb250YWluZXIoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBwcml2YXRlXHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAZGVzY3JpcHRpb24gSW5pdGlhbGl6ZXMgdGhlIGV2ZW50cyBvbiB0aGUgY29tcGFyZSBjb250YWluZXJcclxuICovXHJcbmZ1bmN0aW9uIGluaXRpYWxpemVFdmVudHMoKSB7XHJcbiAgICAvLyBhZGQgZXZlbnQgdG8gYnV0dG9ucyB0byByZW1vdmUgcHJvZHVjdHNcclxuICAgICQoJy5jb21wYXJlLWl0ZW0nKS5vbignY2xpY2snLCAnLmNvbXBhcmUtaXRlbS1yZW1vdmUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmVtb3ZlSXRlbSgkKHRoaXMpLmNsb3Nlc3QoJy5jb21wYXJlLWl0ZW0nKSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBCdXR0b24gdG8gZ28gdG8gY29tcGFyZSBwYWdlXHJcbiAgICAkKCcjY29tcGFyZS1pdGVtcy1idXR0b24nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcGFnZS5yZWRpcmVjdCh1dGlsLmFwcGVuZFBhcmFtVG9VUkwoVXJscy5jb21wYXJlU2hvdywgJ2NhdGVnb3J5JywgX2N1cnJlbnRDYXRlZ29yeSkpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gQnV0dG9uIHRvIGNsZWFyIGFsbCBjb21wYXJlZCBpdGVtc1xyXG4gICAgLy8gcmVseSBvbiByZWZyZXNoQ29udGFpbmVyIHRvIHRha2UgY2FyZSBvZiBoaWRpbmcgdGhlIGNvbnRhaW5lclxyXG4gICAgJCgnI2NsZWFyLWNvbXBhcmVkLWl0ZW1zJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJy5jb21wYXJlLWl0ZW1zIC5hY3RpdmUnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmVtb3ZlSXRlbSgkKHRoaXMpKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnRzLmluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBpbml0aWFsaXplRG9tKCk7XHJcbiAgICBpbml0aWFsaXplRXZlbnRzKCk7XHJcbn07XHJcblxyXG5leHBvcnRzLmFkZFByb2R1Y3QgPSBhZGRQcm9kdWN0O1xyXG5leHBvcnRzLnJlbW92ZVByb2R1Y3QgPSByZW1vdmVQcm9kdWN0O1xyXG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG52YXIgZGlhbG9nID0gcmVxdWlyZSgnLi9kaWFsb2cnKTtcclxuXHJcbi8qKlxyXG4gKiBAZnVuY3Rpb24gY29va2llcHJpdmFjeSAgICBVc2VkIHRvIGRpc3BsYXkvY29udHJvbCB0aGUgc2NyaW0gY29udGFpbmluZyB0aGUgY29va2llIHByaXZhY3kgY29kZVxyXG4gKiovXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBJZiB3ZSBoYXZlIG5vdCBhY2NlcHRlZCBjb29raWVzIEFORCB3ZSdyZSBub3Qgb24gdGhlIFByaXZhY3kgUG9saWN5IHBhZ2UsIHRoZW4gc2hvdyB0aGUgbm90aWZpY2F0aW9uXHJcbiAgICAgKiBOT1RFOiBZb3Ugd2lsbCBwcm9iYWJseSB3YW50IHRvIGFkanVzdCB0aGUgUHJpdmFjeSBQYWdlIHRlc3QgdG8gbWF0Y2ggeW91ciBzaXRlJ3Mgc3BlY2lmaWMgcHJpdmFjeSAvIGNvb2tpZSBwYWdlXHJcbiAgICAgKi9cclxuICAgIGlmIChTaXRlUHJlZmVyZW5jZXMuQ09PS0lFX0hJTlQgPT09IHRydWUgJiYgZG9jdW1lbnQuY29va2llLmluZGV4T2YoJ2R3X2Nvb2tpZXNfYWNjZXB0ZWQnKSA8IDApIHtcclxuICAgICAgICAvLyBjaGVjayBmb3IgcHJpdmFjeSBwb2xpY3kgcGFnZVxyXG4gICAgICAgIGlmICgkKCcucHJpdmFjeS1wb2xpY3knKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgZGlhbG9nLm9wZW4oe1xyXG4gICAgICAgICAgICAgICAgdXJsOiBVcmxzLmNvb2tpZUhpbnQsXHJcbiAgICAgICAgICAgICAgICBvcHRpb25zOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xvc2VPbkVzY2FwZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgZGlhbG9nQ2xhc3M6ICduby1jbG9zZScsXHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uczogW3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogUmVzb3VyY2VzLklfQUdSRUUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmRpYWxvZygnY2xvc2UnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZUNvb2tpZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1dXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSBkb24ndCBuZWVkIHRvIHNob3cgdGhlIGFzc2V0LCBqdXN0IGVuYWJsZSB0aGUgY29va2llc1xyXG4gICAgICAgIGVuYWJsZUNvb2tpZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBlbmFibGVDb29raWVzKCkge1xyXG4gICAgICAgIGlmIChkb2N1bWVudC5jb29raWUuaW5kZXhPZignZHc9MScpIDwgMCkge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSAnZHc9MTsgcGF0aD0vJztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRvY3VtZW50LmNvb2tpZS5pbmRleE9mKCdkd19jb29raWVzX2FjY2VwdGVkJykgPCAwKSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmNvb2tpZSA9ICdkd19jb29raWVzX2FjY2VwdGVkPTE7IHBhdGg9Lyc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAoZG9jdW1lbnQuY29va2llLmluZGV4T2YoJ2R3X2FsZXJ0X21lc3NhZ2UnKSA+IDApIHtcclxuICAgICAgICAkKCcjYWxlcnQtbWVzc2FnZScpLmhpZGUoKTsgICAgXHJcbiAgICB9XHJcbiAgICBcclxuICAgICQoJyNjbG9zZS1ub24tdXMtYWxlcnQnKS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOyBcclxuICAgICAgICAkKCcjYWxlcnQtbWVzc2FnZScpLmhpZGUoKTtcclxuICAgICAgICBpZiAoZG9jdW1lbnQuY29va2llLmluZGV4T2YoJ2R3X2FsZXJ0X21lc3NhZ2UnKSA8IDApIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuY29va2llID0gJ2R3X2FsZXJ0X21lc3NhZ2U9MTsgcGF0aD0vJztcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbn07XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuXHJcbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uIGluaXQoKSB7XHJcbiAgICAkKCcuY291bnRyeS1zZWxlY3RvciAuY3VycmVudC1jb3VudHJ5Jykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJy5jb3VudHJ5LXNlbGVjdG9yIC5zZWxlY3RvcicpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdzZWxlY3Rvci1hY3RpdmUnKTtcclxuICAgIH0pO1xyXG4gICAgLy8gc2V0IGN1cnJlbmN5IGZpcnN0IGJlZm9yZSByZWxvYWRcclxuICAgICQoJy5jb3VudHJ5LXNlbGVjdG9yIC5zZWxlY3RvciAubG9jYWxlJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdmFyIHVybCA9IHRoaXMuaHJlZjtcclxuICAgICAgICB2YXIgY3VycmVuY3kgPSB0aGlzLmdldEF0dHJpYnV0ZSgnZGF0YS1jdXJyZW5jeScpO1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgICAgIHVybDogVXJscy5zZXRTZXNzaW9uQ3VycmVuY3ksXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIGZvcm1hdDogJ2FqYXgnLFxyXG4gICAgICAgICAgICAgICAgY3VycmVuY3lNbmVtb25pYzogY3VycmVuY3lcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5kb25lKGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmFibGUgdG8gc2V0IGN1cnJlbmN5Jyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHVybDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufTtcclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxudmFyIGFqYXggPSByZXF1aXJlKCcuL2FqYXgnKSxcclxuICAgIHV0aWwgPSByZXF1aXJlKCcuL3V0aWwnKSxcclxuICAgIF8gPSByZXF1aXJlKCdsb2Rhc2gnKSxcclxuICAgIGltYWdlc0xvYWRlZCA9IHJlcXVpcmUoJ2ltYWdlc2xvYWRlZCcpO1xyXG5cclxudmFyIGRpYWxvZyA9IHtcclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gQXBwZW5kcyBhIGRpYWxvZyB0byBhIGdpdmVuIGNvbnRhaW5lciAodGFyZ2V0KVxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtcyAgcGFyYW1zLnRhcmdldCBjYW4gYmUgYW4gaWQgc2VsZWN0b3Igb3IgYW4ganF1ZXJ5IG9iamVjdFxyXG4gICAgICovXHJcbiAgICBjcmVhdGU6IGZ1bmN0aW9uIChwYXJhbXMpIHtcclxuICAgICAgICB2YXIgJHRhcmdldCwgaWQ7XHJcblxyXG4gICAgICAgIGlmIChfLmlzU3RyaW5nKHBhcmFtcy50YXJnZXQpKSB7XHJcbiAgICAgICAgICAgIGlmIChwYXJhbXMudGFyZ2V0LmNoYXJBdCgwKSA9PT0gJyMnKSB7XHJcbiAgICAgICAgICAgICAgICAkdGFyZ2V0ID0gJChwYXJhbXMudGFyZ2V0KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICR0YXJnZXQgPSAkKCcjJyArIHBhcmFtcy50YXJnZXQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChwYXJhbXMudGFyZ2V0IGluc3RhbmNlb2YgalF1ZXJ5KSB7XHJcbiAgICAgICAgICAgICR0YXJnZXQgPSBwYXJhbXMudGFyZ2V0O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICR0YXJnZXQgPSAkKCcjZGlhbG9nLWNvbnRhaW5lcicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gaWYgbm8gZWxlbWVudCBmb3VuZCwgY3JlYXRlIG9uZVxyXG4gICAgICAgIGlmICgkdGFyZ2V0Lmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBpZiAoJHRhcmdldC5zZWxlY3RvciAmJiAkdGFyZ2V0LnNlbGVjdG9yLmNoYXJBdCgwKSA9PT0gJyMnKSB7XHJcbiAgICAgICAgICAgICAgICBpZCA9ICR0YXJnZXQuc2VsZWN0b3Iuc3Vic3RyKDEpO1xyXG4gICAgICAgICAgICAgICAgJHRhcmdldCA9ICQoJzxkaXY+JykuYXR0cignaWQnLCBpZCkuYWRkQ2xhc3MoJ2RpYWxvZy1jb250ZW50JykuYXBwZW5kVG8oJ2JvZHknKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gY3JlYXRlIHRoZSBkaWFsb2dcclxuICAgICAgICB0aGlzLiRjb250YWluZXIgPSAkdGFyZ2V0O1xyXG4gICAgICAgIHRoaXMuJGNvbnRhaW5lci5kaWFsb2coXy5tZXJnZSh7fSwgdGhpcy5zZXR0aW5ncywgcGFyYW1zLm9wdGlvbnMgfHwge30pKTtcclxuICAgICAgICByZXR1cm4gdGhpcy4kY29udGFpbmVyOyAvLyBQUkVWQUlMLUFkZGVkIFJldHVybiB2YWx1ZS5cclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEBmdW5jdGlvblxyXG4gICAgICogQGRlc2NyaXB0aW9uIE9wZW5zIGEgZGlhbG9nIHVzaW5nIHRoZSBnaXZlbiB1cmwgKHBhcmFtcy51cmwpIG9yIGh0bWwgKHBhcmFtcy5odG1sKVxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtc1xyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtcy51cmwgc2hvdWxkIGNvbnRhaW4gdGhlIHVybFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHBhcmFtcy5odG1sIGNvbnRhaW5zIHRoZSBodG1sIG9mIHRoZSBkaWFsb2cgY29udGVudFxyXG4gICAgICovXHJcbiAgICBvcGVuOiBmdW5jdGlvbiAocGFyYW1zKSB7XHJcbiAgICAgICAgLy8gY2xvc2UgYW55IG9wZW4gZGlhbG9nXHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIHRoaXMuY3JlYXRlKHBhcmFtcyk7XHJcbiAgICAgICAgdGhpcy5yZXBsYWNlKHBhcmFtcyk7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gcG9wdWxhdGUgdGhlIGRpYWxvZyB3aXRoIGh0bWwgY29udGVudCwgdGhlbiBvcGVuIGl0XHJcbiAgICAgKiovXHJcbiAgICBvcGVuV2l0aENvbnRlbnQ6IGZ1bmN0aW9uIChwYXJhbXMpIHtcclxuICAgICAgICB2YXIgY29udGVudCwgcG9zaXRpb24sIGNhbGxiYWNrO1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMuJGNvbnRhaW5lcikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnRlbnQgPSBwYXJhbXMuY29udGVudCB8fCBwYXJhbXMuaHRtbDtcclxuICAgICAgICBpZiAoIWNvbnRlbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLiRjb250YWluZXIuZW1wdHkoKS5odG1sKGNvbnRlbnQpO1xyXG4gICAgICAgIGlmICghdGhpcy4kY29udGFpbmVyLmRpYWxvZygnaXNPcGVuJykpIHtcclxuICAgICAgICAgICAgdGhpcy4kY29udGFpbmVyLmRpYWxvZygnb3BlbicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHBhcmFtcy5vcHRpb25zKSB7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uID0gcGFyYW1zLm9wdGlvbnMucG9zaXRpb247XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghcG9zaXRpb24pIHtcclxuICAgICAgICAgICAgcG9zaXRpb24gPSB0aGlzLnNldHRpbmdzLnBvc2l0aW9uO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbWFnZXNMb2FkZWQodGhpcy4kY29udGFpbmVyKS5vbignZG9uZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhpcy4kY29udGFpbmVyLmRpYWxvZygnb3B0aW9uJywgJ3Bvc2l0aW9uJywgcG9zaXRpb24pO1xyXG4gICAgICAgIH0uYmluZCh0aGlzKSk7XHJcblxyXG4gICAgICAgIGNhbGxiYWNrID0gKHR5cGVvZiBwYXJhbXMuY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpID8gcGFyYW1zLmNhbGxiYWNrIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgY2FsbGJhY2soKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEBkZXNjcmlwdGlvbiBSZXBsYWNlIHRoZSBjb250ZW50IG9mIGN1cnJlbnQgZGlhbG9nXHJcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gcGFyYW1zXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcGFyYW1zLnVybCAtIElmIHRoZSB1cmwgcHJvcGVydHkgaXMgcHJvdmlkZWQsIGFuIGFqYXggY2FsbCBpcyBwZXJmb3JtZWQgdG8gZ2V0IHRoZSBjb250ZW50IHRvIHJlcGxhY2VcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwYXJhbXMuaHRtbCAtIElmIG5vIHVybCBwcm9wZXJ0eSBpcyBwcm92aWRlZCwgdXNlIGh0bWwgcHJvdmlkZWQgdG8gcmVwbGFjZVxyXG4gICAgICovXHJcbiAgICByZXBsYWNlOiBmdW5jdGlvbiAocGFyYW1zKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLiRjb250YWluZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocGFyYW1zLnVybCkge1xyXG4gICAgICAgICAgICBwYXJhbXMudXJsID0gdXRpbC5hcHBlbmRQYXJhbVRvVVJMKHBhcmFtcy51cmwsICdmb3JtYXQnLCAnYWpheCcpO1xyXG4gICAgICAgICAgICBhamF4LmxvYWQoe1xyXG4gICAgICAgICAgICAgICAgdXJsOiBwYXJhbXMudXJsLFxyXG4gICAgICAgICAgICAgICAgZGF0YTogcGFyYW1zLmRhdGEsXHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zLmNvbnRlbnQgPSByZXNwb25zZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW5XaXRoQ29udGVudChwYXJhbXMpO1xyXG4gICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocGFyYW1zLmh0bWwpIHtcclxuICAgICAgICAgICAgdGhpcy5vcGVuV2l0aENvbnRlbnQocGFyYW1zKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb25cclxuICAgICAqIEBkZXNjcmlwdGlvbiBDbG9zZXMgdGhlIGRpYWxvZ1xyXG4gICAgICovXHJcbiAgICBjbG9zZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghdGhpcy4kY29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy4kY29udGFpbmVyLmRpYWxvZygnY2xvc2UnKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEBmdW5jdGlvblxyXG4gICAgICogQGRlc2NyaXB0aW9uIFN1Ym1pdHMgdGhlIGRpYWxvZyBmb3JtIHdpdGggdGhlIGdpdmVuIGFjdGlvblxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IFRoZSBhY3Rpb24gd2hpY2ggd2lsbCBiZSB0cmlnZ2VyZWQgdXBvbiBmb3JtIHN1Ym1pdFxyXG4gICAgICovXHJcbiAgICBzdWJtaXQ6IGZ1bmN0aW9uIChhY3Rpb24pIHtcclxuICAgICAgICB2YXIgJGZvcm0gPSB0aGlzLiRjb250YWluZXIuZmluZCgnZm9ybTpmaXJzdCcpO1xyXG4gICAgICAgIC8vIHNldCB0aGUgYWN0aW9uXHJcbiAgICAgICAgJCgnPGlucHV0Lz4nKS5hdHRyKHtcclxuICAgICAgICAgICAgbmFtZTogYWN0aW9uLFxyXG4gICAgICAgICAgICB0eXBlOiAnaGlkZGVuJ1xyXG4gICAgICAgIH0pLmFwcGVuZFRvKCRmb3JtKTtcclxuICAgICAgICAvLyBzZXJpYWxpemUgdGhlIGZvcm0gYW5kIGdldCB0aGUgcG9zdCB1cmxcclxuICAgICAgICB2YXIgZGF0YSA9ICRmb3JtLnNlcmlhbGl6ZSgpO1xyXG4gICAgICAgIHZhciB1cmwgPSAkZm9ybS5hdHRyKCdhY3Rpb24nKTtcclxuICAgICAgICAvLyBtYWtlIHN1cmUgdGhlIHNlcnZlciBrbm93cyB0aGlzIGlzIGFuIGFqYXggcmVxdWVzdFxyXG4gICAgICAgIGlmIChkYXRhLmluZGV4T2YoJ2FqYXgnKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgZGF0YSArPSAnJmZvcm1hdD1hamF4JztcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gcG9zdCB0aGUgZGF0YSBhbmQgcmVwbGFjZSBjdXJyZW50IGNvbnRlbnQgd2l0aCByZXNwb25zZSBjb250ZW50XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxyXG4gICAgICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICAgICAgZGF0YTogZGF0YSxcclxuICAgICAgICAgICAgZGF0YVR5cGU6ICdodG1sJyxcclxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGh0bWwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuJGNvbnRhaW5lci5odG1sKGh0bWwpO1xyXG4gICAgICAgICAgICAgICAgJCgnLnVpLWRpYWxvZy1jb250ZW50OnZpc2libGUnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmRpYWxvZygnb3B0aW9uJywgJ3Bvc2l0aW9uJywgJCh0aGlzKS5kaWFsb2coJ29wdGlvbicsICdwb3NpdGlvbicpKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9LmJpbmQodGhpcyksXHJcbiAgICAgICAgICAgIGZhaWx1cmU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5hbGVydChSZXNvdXJjZXMuU0VSVkVSX0VSUk9SKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIGV4aXN0czogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLiRjb250YWluZXIgJiYgKHRoaXMuJGNvbnRhaW5lci5sZW5ndGggPiAwKTtcclxuICAgIH0sXHJcbiAgICBpc0FjdGl2ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmV4aXN0cygpICYmICh0aGlzLiRjb250YWluZXIuY2hpbGRyZW4ubGVuZ3RoID4gMCk7XHJcbiAgICB9LFxyXG4gICAgc2V0dGluZ3M6IHtcclxuICAgICAgICBhdXRvT3BlbjogZmFsc2UsXHJcbiAgICAgICAgaGVpZ2h0OiAnYXV0bycsXHJcbiAgICAgICAgbW9kYWw6IHRydWUsXHJcbiAgICAgICAgb3ZlcmxheToge1xyXG4gICAgICAgICAgICBvcGFjaXR5OiAwLjUsXHJcbiAgICAgICAgICAgIGJhY2tncm91bmQ6ICdibGFjaydcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlc2l6YWJsZTogZmFsc2UsXHJcbiAgICAgICAgdGl0bGU6ICcnLFxyXG4gICAgICAgIHdpZHRoOiAnODAwJyxcclxuICAgICAgICBjbG9zZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLmRpYWxvZygnY2xvc2UnKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHBvc2l0aW9uOiB7XHJcbiAgICAgICAgICAgIG15OiAnY2VudGVyJyxcclxuICAgICAgICAgICAgYXQ6ICdjZW50ZXInLFxyXG4gICAgICAgICAgICBvZjogd2luZG93LFxyXG4gICAgICAgICAgICBjb2xsaXNpb246ICdmbGlwZml0J1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZGlhbG9nO1xyXG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG52YXIgYWpheCA9IHJlcXVpcmUoJy4vYWpheCcpLFxyXG4gICAgdXRpbCA9IHJlcXVpcmUoJy4vdXRpbCcpLFxyXG4gICAgdG9vbHRpcCA9IHJlcXVpcmUoJy4vdG9vbHRpcCcpLFxyXG4gICAgdmFsaWRhdG9yID0gcmVxdWlyZSgnLi92YWxpZGF0b3InKSxcclxuICAgIGRpYWxvZyA9IHJlcXVpcmUoJy4vZGlhbG9nJyk7XHJcblxyXG52YXIgc2V0RGlhbG9naWZ5ID0gZnVuY3Rpb24gKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIHZhciBhY3Rpb25Tb3VyY2UgPSAkKHRoaXMpLFxyXG4gICAgICAgIGRsZ0FjdGlvbiA9ICQoYWN0aW9uU291cmNlKS5kYXRhKCdkbGctYWN0aW9uJykgfHwge30sIC8vIHVybCwgdGFyZ2V0LCBpc0Zvcm1cclxuICAgICAgICBkbGdPcHRpb25zID0gJC5leHRlbmQoe30sIGRpYWxvZy5zZXR0aW5ncywgJChhY3Rpb25Tb3VyY2UpLmRhdGEoJ2RsZy1vcHRpb25zJykgfHwge30pO1xyXG5cclxuICAgIGRsZ09wdGlvbnMudGl0bGUgPSBkbGdPcHRpb25zLnRpdGxlIHx8ICQoYWN0aW9uU291cmNlKS5hdHRyKCd0aXRsZScpIHx8ICcnO1xyXG5cclxuICAgIHZhciB1cmwgPSBkbGdBY3Rpb24udXJsIC8vIHVybCBmcm9tIGRhdGFcclxuICAgICAgICB8fFxyXG4gICAgICAgIChkbGdBY3Rpb24uaXNGb3JtID8gJChhY3Rpb25Tb3VyY2UpLmNsb3Nlc3QoJ2Zvcm0nKS5hdHRyKCdhY3Rpb24nKSA6IG51bGwpIC8vIG9yIHVybCBmcm9tIGZvcm0gYWN0aW9uIGlmIGlzRm9ybT10cnVlXHJcbiAgICAgICAgfHxcclxuICAgICAgICAkKGFjdGlvblNvdXJjZSkuYXR0cignaHJlZicpOyAvLyBvciB1cmwgZnJvbSBocmVmXHJcblxyXG4gICAgaWYgKCF1cmwpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGZvcm0gPSBqUXVlcnkodGhpcykucGFyZW50cygnZm9ybScpO1xyXG4gICAgdmFyIG1ldGhvZCA9IGZvcm0uYXR0cignbWV0aG9kJykgfHwgJ1BPU1QnO1xyXG5cclxuICAgIGlmIChhY3Rpb25Tb3VyY2VbMF0udGFnTmFtZSA9PT0gJ0JVVFRPTicgJiYgIWZvcm0udmFsaWQoKSB8fCBhY3Rpb25Tb3VyY2VbMF0udGFnTmFtZSA9PT0gJ0lOUFVUJyAmJiAhZm9ybS52YWxpZCgpKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGlmIHRoaXMgaXMgYSBjb250ZW50IGxpbmssIHVwZGF0ZSB1cmwgZnJvbSBQYWdlLVNob3cgdG8gUGFnZS1JbmNsdWRlXHJcbiAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnYXR0cmlidXRlY29udGVudGxpbmsnKSkge1xyXG4gICAgICAgIHZhciB1cmkgPSB1dGlsLmdldFVyaSh1cmwpO1xyXG4gICAgICAgIHVybCA9IFVybHMucGFnZUluY2x1ZGUgKyB1cmkucXVlcnk7XHJcbiAgICB9XHJcbiAgICB2YXIgcG9zdERhdGE7XHJcbiAgICBpZiAobWV0aG9kICYmIG1ldGhvZC50b1VwcGVyQ2FzZSgpID09PSAnUE9TVCcpIHtcclxuICAgICAgICBwb3N0RGF0YSA9IGZvcm0uc2VyaWFsaXplKCkgKyAnJicgKyBqUXVlcnkodGhpcykuYXR0cignbmFtZScpICsgJz1zdWJtaXQnO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAodXJsLmluZGV4T2YoJz8nKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgdXJsICs9ICc/JztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB1cmwgKz0gJyYnO1xyXG4gICAgICAgIH1cclxuICAgICAgICB1cmwgKz0gZm9ybS5zZXJpYWxpemUoKTtcclxuICAgICAgICB1cmwgPSB1dGlsLmFwcGVuZFBhcmFtVG9VUkwodXJsLCBqUXVlcnkodGhpcykuYXR0cignbmFtZScpLCAnc3VibWl0Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGRsZyA9IGRpYWxvZy5jcmVhdGUoe1xyXG4gICAgICAgIHRhcmdldDogZGxnQWN0aW9uLnRhcmdldCxcclxuICAgICAgICBvcHRpb25zOiBkbGdPcHRpb25zXHJcbiAgICB9KTtcclxuXHJcbiAgICBhamF4LmxvYWQoe1xyXG4gICAgICAgIHVybDogJChhY3Rpb25Tb3VyY2UpLmF0dHIoJ2hyZWYnKSB8fCAkKGFjdGlvblNvdXJjZSkuY2xvc2VzdCgnZm9ybScpLmF0dHIoJ2FjdGlvbicpLFxyXG4gICAgICAgIHRhcmdldDogZGxnLFxyXG4gICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGRsZy5kaWFsb2coJ29wZW4nKTsgLy8gb3BlbiBhZnRlciBsb2FkIHRvIGVuc3VyZSBkaWFsb2cgaXMgY2VudGVyZWRcclxuICAgICAgICAgICAgdmFsaWRhdG9yLmluaXQoKTtcclxuICAgICAgICAgICAgdG9vbHRpcC5pbml0KCk7XHJcbiAgICAgICAgICAgIGlmIChkbGcuZmluZCgnLmNsb3NlZGlhbG9nJykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgZGlhbG9nLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGRhdGE6ICEkKGFjdGlvblNvdXJjZSkuYXR0cignaHJlZicpID8gcG9zdERhdGEgOiBudWxsLFxyXG4gICAgICAgIHR5cGU6IG1ldGhvZFxyXG5cclxuICAgIH0pO1xyXG59O1xyXG5cclxuZXhwb3J0cy5zZXREaWFsb2dpZnkgPSBzZXREaWFsb2dpZnk7XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuXHJcbnZhciBhamF4ID0gcmVxdWlyZSgnLi9hamF4JyksXHJcbiAgICBtaW5pY2FydCA9IHJlcXVpcmUoJy4vbWluaWNhcnQnKSxcclxuICAgIHV0aWwgPSByZXF1aXJlKCcuL3V0aWwnKTtcclxuXHJcbnZhciBzZXRBZGRUb0NhcnRIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIHZhciBmb3JtID0gJCh0aGlzKS5jbG9zZXN0KCdmb3JtJyk7XHJcblxyXG4gICAgdmFyIG9wdGlvbnMgPSB7XHJcbiAgICAgICAgdXJsOiB1dGlsLmFqYXhVcmwoZm9ybS5hdHRyKCdhY3Rpb24nKSksXHJcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgY2FjaGU6IGZhbHNlLFxyXG4gICAgICAgIGRhdGE6IGZvcm0uc2VyaWFsaXplKClcclxuICAgIH07XHJcbiAgICAkLmFqYXgob3B0aW9ucykuZG9uZShmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICBpZiAocmVzcG9uc2Uuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICBhamF4LmxvYWQoe1xyXG4gICAgICAgICAgICAgICAgdXJsOiBVcmxzLm1pbmljYXJ0R0MsXHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGluZUl0ZW1JZDogcmVzcG9uc2UucmVzdWx0LmxpbmVJdGVtSWRcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWluaWNhcnQuc2hvdyhyZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9ybS5maW5kKCdpbnB1dCx0ZXh0YXJlYScpLnZhbCgnJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvcm0uZmluZCgnc3Bhbi5lcnJvcicpLmhpZGUoKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaWQgaW4gcmVzcG9uc2UuZXJyb3JzLkZvcm1FcnJvcnMpIHtcclxuICAgICAgICAgICAgICAgIHZhciAkZXJyb3JFbCA9ICQoJyMnICsgaWQpLmFkZENsYXNzKCdlcnJvcicpLnJlbW92ZUNsYXNzKCd2YWxpZCcpLm5leHQoJy5lcnJvcicpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCEkZXJyb3JFbCB8fCAkZXJyb3JFbC5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAkZXJyb3JFbCA9ICQoJzxzcGFuIGZvcj1cIicgKyBpZCArICdcIiBnZW5lcmF0ZWQ9XCJ0cnVlXCIgY2xhc3M9XCJlcnJvclwiIHN0eWxlPVwiXCI+PC9zcGFuPicpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJyMnICsgaWQpLmFmdGVyKCRlcnJvckVsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICRlcnJvckVsLnRleHQocmVzcG9uc2UuZXJyb3JzLkZvcm1FcnJvcnNbaWRdLnJlcGxhY2UoL1xcXFwnL2csICdcXCcnKSkuc2hvdygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSkuZmFpbChmdW5jdGlvbiAoeGhyLCB0ZXh0U3RhdHVzKSB7XHJcbiAgICAgICAgLy8gZmFpbGVkXHJcbiAgICAgICAgaWYgKHRleHRTdGF0dXMgPT09ICdwYXJzZXJlcnJvcicpIHtcclxuICAgICAgICAgICAgd2luZG93LmFsZXJ0KFJlc291cmNlcy5CQURfUkVTUE9OU0UpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5hbGVydChSZXNvdXJjZXMuU0VSVkVSX0NPTk5FQ1RJT05fRVJST1IpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59O1xyXG5cclxuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgJCgnI0FkZFRvQmFza2V0QnV0dG9uJykub24oJ2NsaWNrJywgc2V0QWRkVG9DYXJ0SGFuZGxlcik7XHJcbn07XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuXHJcbnZhciAvL3VpZXZlbnRzID0gcmVxdWlyZSgnLi91aWV2ZW50cycpLFxyXG4gICAgZGlhbG9nID0gcmVxdWlyZSgnLi9kaWFsb2cnKSxcclxuICAgIHByb2dyZXNzID0gcmVxdWlyZSgnLi9wcm9ncmVzcycpO1xyXG5cclxuLy92YXIgJGNvbiA9ICQoJ2JvZHknKTtcclxudmFyIGFwcEdsb2JhbCA9IHtcclxuICAgIGdsb2JhbFRpbWVyOiAwXHJcbn07XHJcbnZhciBoZWFkZXJFdmVudHMgPSB7XHJcbiAgICBpbml0aWFsaXplRXZlbnQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCdib2R5JykuZmluZCgnaW5wdXQsIHNlbGVjdC5pbnB1dC1zZWxlY3QnKS5mb2N1c2luKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykucmVtb3ZlQ2xhc3MoJ2lucHV0bGFiZWwnKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmZvcm0tcm93ICwgLmxhYmVsIHNwYW4nKS5yZW1vdmVDbGFzcygnaW5wdXRsYWJlbCcpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdlcnJvcmNsaWVudCcpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcubG9nZXJyb3IgLCAuZXhpc3RpbmdfcmVnaXN0ZXInKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmICgkKCcubG9naW5jdXN0b21lcnMnKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHZhciBjcnJvYmogPSAkKHRoaXMpLmZpbmQoJy5mb3JtZmllbGQgIC5sb2dlcnJvcicpO1xyXG4gICAgICAgICAgICAkKGNycm9iaikuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5mb3JtLXJvdyAsIC5sYWJlbCBzcGFuJykucmVtb3ZlQ2xhc3MoJ2lucHV0bGFiZWwnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICQoJy5wcml2YWN5LXBvbGljeScpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgZGlhbG9nLm9wZW4oe1xyXG4gICAgICAgICAgICAgICAgdXJsOiAkKGUudGFyZ2V0KS5hdHRyKCdocmVmJyksXHJcbiAgICAgICAgICAgICAgICBvcHRpb25zOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiA2MDBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy9sYWJlbCB0ZXh0IGNvbG9yIGNoYW5nZSBvbiBzdWJtaXRcclxuICAgICAgICBpZiAoJCgnLmFjY291bnQtbG9ncycpLmxlbmd0aCA+IDAgfHwgJCgnLm5ldy1yZWdpc3RlcicpLmxlbmd0aCA+IDAgfHwgJCgnLndpc2gtbG9ncycpLmxlbmd0aCA+IDAgfHwgJCgnLmNyZWF0ZWFuLWFjY291bnQnKS5sZW5ndGggPiAwIHx8ICQoJy5oZWFkZXJjdXN0b21lcmluZm8nKS5sZW5ndGggPiAwIHx8ICQoJy51aS1sb2dpbicpLmxlbmd0aCA+IDAgfHwgJCgnLnBhc3N3b3JkcmVzZXQnKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICQoJy5mb3JtYWN0aW9ucyBidXR0b24nKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkKCdzcGFuLmV4aXN0aW5nX3JlZ2lzdGVyJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNycm9iaiA9ICQodGhpcykuY2xvc2VzdCgnZm9ybScpLmZpbmQoJy5maWVsZC13cmFwcGVyIC5yZXF1aXJlZCcpO1xyXG4gICAgICAgICAgICAgICAgJChjcnJvYmopLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdlcnJvcmNsaWVudCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5sYWJlbCAubGFiZWx0ZXh0JykuYWRkQ2xhc3MoJ2lucHV0bGFiZWwnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxhYmVsIC5yZXF1aXJlZGluZGljYXRvcicpLmFkZENsYXNzKCdpbnB1dGxhYmVsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxhYmVsIC5sYWJlbHRleHQnKS5yZW1vdmVDbGFzcygnaW5wdXRsYWJlbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcubGFiZWwgLnJlcXVpcmVkaW5kaWNhdG9yJykucmVtb3ZlQ2xhc3MoJ2lucHV0bGFiZWwnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vbG9naW4gJiB3aXNoIGxpc3QgdmFsaWRhdGlvbnNcclxuICAgICAgICBpZiAoJCgnLmFjY291bnQtbG9ncycpLmxlbmd0aCA+IDAgfHwgJCgnLm5ldy1yZWdpc3RlcicpLmxlbmd0aCA+IDAgfHwgJCgnLndpc2gtbG9ncycpLmxlbmd0aCA+IDAgfHwgJCgnLmNyZWF0ZWFuLWFjY291bnQnKS5sZW5ndGggPiAwIHx8ICQoJy5oZWFkZXJjdXN0b21lcmluZm8nKS5sZW5ndGggPiAwIHx8ICQoJy51aS1sb2dpbicpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgJCgnYS5jbGVhcmJ1dHRvbicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJ2lucHV0JykudmFsKCcnKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJ3RleHRhcmVhJykudmFsKCcnKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZpZWxkLXdyYXBwZXInKS5maW5kKCdzcGFuJykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5maWVsZC13cmFwcGVyJykuZmluZCgnLnJlcXVpcmVkJykucmVtb3ZlQ2xhc3MoJ2Vycm9yY2xpZW50Jyk7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCdhLmNsZWFyYnV0dG9uJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkICcpLmZpbmQoJy5mb3JtLXJvdycpLnJlbW92ZUNsYXNzKCdpbnB1dGxhYmVsJyk7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcuZm9ybS1yb3cgLCAubGFiZWwgc3BhbicpLnJlbW92ZUNsYXNzKCdpbnB1dGxhYmVsJyk7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCdzcGFuLmxvZ2Vycm9yICwgLmV4aXN0aW5nX3JlZ2lzdGVyJykuaGlkZSgpO1xyXG5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICQoJy51aS1sb2dpbiAuc2lnbi11cC1ibGsgPiBhJykub24oJ21vdXNlZW50ZXIgY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPCA5NjApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChlLnR5cGUgPT0gJ2NsaWNrJyAmJiAkKCcuYWNjb3VudGNvbnRlbnQnKS5pcygnOnZpc2libGUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChhcHBHbG9iYWwuZ2xvYmFsVGltZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vYXBwR2xvYmFsLmdsb2JhbFRpbWVyID09IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmFjY291bnRjb250ZW50JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5oZWFkZXJtYXNrJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5jb25maXJtYXRpb25jb250YWluZXInKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCQoJy5oZWFkZXItY3JlYXRlJykuaXMoJzp2aXNpYmxlJykpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkKCcuYWNjb3VudGNvbnRlbnQnKS5yZW1vdmVDbGFzcygnanMtZW50ZXJlZCcpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmFjY291bnRjb250ZW50JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgJCgnLnNpZ24tdXAtYmxrJykuYWRkQ2xhc3MoJ2pzLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCEkKHRoaXMpLmNsb3Nlc3QoJy51aS1sb2dpbicpLmZpbmQoJy5oZWFkZXItc2lnbi1pbicpLmlzKCc6dmlzaWJsZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyRXZlbnRzLmFjY291bnRDb250UG9zKCQoJy51aS1sb2dpbiAuc2lnbi11cC1ibGsgPiBhJyksICQodGhpcykuY2xvc2VzdCgnLnVpLWxvZ2luJykuZmluZCgnLmhlYWRlci1zaWduLWluJykpO1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLnVpLWxvZ2luJykuZmluZCgnLmhlYWRlci1zaWduLWluJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJCgnLmhlYWRlcm1hc2snKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAvKmlmKGFwcEdsb2JhbC51dGlsLnJlYWRDb29raWUoXCJlbWFpbElkXCIpKXtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuaGVhZGVyLXNpZ24taW4uYWNjb3VudGNvbnRlbnQgLmd1ZXN0ZW1haWwnKS52YWwoYXBwR2xvYmFsLnV0aWwucmVhZENvb2tpZShcImVtYWlsSWRcIikpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5oZWFkZXItc2lnbi1pbi5hY2NvdW50Y29udGVudCAubG9naW5fcGFzc3dvcmQnKS5yZW1vdmVBdHRyKCdwbGFjZWhvbGRlcicpLnZhbCgnJyk7XHJcbiAgICAgICAgICAgICAgICB9Ki9cclxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChhcHBHbG9iYWwuZ2xvYmFsVGltZXIpO1xyXG4gICAgICAgICAgICAgICAgLy9hcHBHbG9iYWwuZ2xvYmFsVGltZXIgPT0gMDtcclxuICAgICAgICAgICAgICAgIGFwcEdsb2JhbC5nbG9iYWxUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5hY2NvdW50Y29udGVudCcpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuaGVhZGVybWFzaycpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuaGVhZGVyY3VzdG9tZXJpbmZvJykuZmluZCgnLmpzLWFjdGl2ZScpLnJlbW92ZUNsYXNzKCdqcy1hY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIH0sIDUwMDApO1xyXG4gICAgICAgICAgICAgICAgJCgnLmNvbmZpcm1hdGlvbmNvbnRhaW5lcicpLmhpZGUoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9KTtcclxuICAgICAgICAkKCcuc2lnbmluZ2luJykuY2xpY2soZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAkKCcuYWNjb3VudGNvbnRlbnQnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgIHZhciB2YWxpZGF0b3IgPSAkKHRoaXMpLmNsb3Nlc3QoJ2Zvcm0nKS52YWxpZGF0ZSgpO1xyXG4gICAgICAgICAgICBpZiAodmFsaWRhdG9yLmVsZW1lbnQoJCh0aGlzKS5jbG9zZXN0KCdmb3JtJykuZmluZCgnLmd1ZXN0ZW1haWwnKSkpIHtcclxuICAgICAgICAgICAgICAgICQoJy5hY2NvdW50Y29udGVudCAuZ3Vlc3RlbWFpbCcpLnZhbCgkKHRoaXMpLmNsb3Nlc3QoJy5hY2NvdW50Y29udGVudCcpLmZpbmQoJy5ndWVzdGVtYWlsJykudmFsKCkpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmFjY291bnRjb250ZW50IC5ndWVzdGVtYWlsJykucmVtb3ZlQ2xhc3MoJ2Vycm9yJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcuYWNjb3VudGNvbnRlbnQgLmd1ZXN0ZW1haWwnKS5uZXh0KCdzcGFuLmVycm9yJykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcubG9naW5fcGFzc3dvcmQnKS5yZW1vdmVDbGFzcygnZXJyb3InKTtcclxuICAgICAgICAgICAgICAgICQoJy5sb2dpbl9wYXNzd29yZCcpLm5leHQoJ3NwYW4uZXJyb3InKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICQoJy5hY2NvdW50Y29udGVudCAuZ3Vlc3RlbWFpbCcpLmFkZENsYXNzKCdjbGljay1tYXJrIHZhbGlkJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcudWktbG9naW4nKS5maW5kKCcuaGVhZGVyLXNpZ24taW4nKS5zaG93KCk7XHJcbiAgICAgICAgICAgICQoJy5oZWFkZXItc2lnbi1pbiAuc2lnbmluX21haW4gLmxvZ2luZmFpbC5lcnJvcm1lc3NhZ2UnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICQoJy5oZWFkZXJtYXNrJykuYWRkQ2xhc3MoJ25vLWhpZGUnKS5zaG93KCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoJy5zaWduLW1lc3NhZ2UgYSwgLkV4aXN0ZWRVc2VyLWVycm9yIC5jcmVhdGVhY2NvdW50JykuY2xpY2soZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAkKCcuYWNjb3VudGNvbnRlbnQnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLnVpLWxvZ2luJykuZmluZCgnLmhlYWRlci1jcmVhdGUnKS5zaG93KCk7XHJcbiAgICAgICAgICAgIHZhciB2YWxpZGF0b3IgPSAkKHRoaXMpLmNsb3Nlc3QoJ2Zvcm0nKS52YWxpZGF0ZSgpO1xyXG4gICAgICAgICAgICBpZiAodmFsaWRhdG9yLmVsZW1lbnQoJCh0aGlzKS5jbG9zZXN0KCdmb3JtJykuZmluZCgnLmd1ZXN0ZW1haWwnKSkpIHtcclxuICAgICAgICAgICAgICAgICQoJy5hY2NvdW50Y29udGVudCAuZ3Vlc3RlbWFpbCcpLnZhbCgkKHRoaXMpLmNsb3Nlc3QoJy5hY2NvdW50Y29udGVudCcpLmZpbmQoJy5ndWVzdGVtYWlsJykudmFsKCkpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmFjY291bnRjb250ZW50IC5ndWVzdGVtYWlsJykucmVtb3ZlQ2xhc3MoJ2Vycm9yJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcuYWNjb3VudGNvbnRlbnQgLmd1ZXN0ZW1haWwnKS5uZXh0KCdzcGFuLmVycm9yJykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcuYWNjb3VudGNvbnRlbnQgLmd1ZXN0ZW1haWwnKS5hZGRDbGFzcygnY2xpY2stbWFyayB2YWxpZCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGhlYWRlckV2ZW50cy5hY2NvdW50Q29udFBvcygkKCcudWktbG9naW4gLnNpZ24tdXAtYmxrID4gYScpLCAkKHRoaXMpLmNsb3Nlc3QoJy51aS1sb2dpbicpLmZpbmQoJy5oZWFkZXItY3JlYXRlJykpO1xyXG4gICAgICAgICAgICAkKCcuaGVhZGVybWFzaycpLnNob3coKTtcclxuICAgICAgICAgICAgJCgnLlBhc3N3b3JkRm9ybWF0LWVycm9yJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKCcuRXhpc3RlZFVzZXItZXJyb3InKS5oaWRlKCk7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChhcHBHbG9iYWwuZ2xvYmFsVGltZXIpO1xyXG4gICAgICAgICAgICAvL2FwcEdsb2JhbC5nbG9iYWxUaW1lciA9PSAwO1xyXG4gICAgICAgICAgICBhcHBHbG9iYWwuZ2xvYmFsVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQoJy5hY2NvdW50Y29udGVudCcpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICQoJy5oZWFkZXJtYXNrJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmhlYWRlcmN1c3RvbWVyaW5mbycpLmZpbmQoJy5qcy1hY3RpdmUnKS5yZW1vdmVDbGFzcygnanMtYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH0sIDUwMDApO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKCcuZm9yZ290LXBhc3N3b3JkIGEnKS5jbGljayhmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICQoJy5hY2NvdW50Y29udGVudCcpLmhpZGUoKTtcclxuICAgICAgICAgICAgJCgnLmhlYWRlci1mb3Jnb3QtcHdkIHNwYW4ucmVzZXRfZW1haWxfZXJyb3InKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLnVpLWxvZ2luJykuZmluZCgnLmhlYWRlci1mb3Jnb3QtcHdkJykuc2hvdygpO1xyXG4gICAgICAgICAgICBoZWFkZXJFdmVudHMuYWNjb3VudENvbnRQb3MoJCgnLnVpLWxvZ2luIC5zaWduLXVwLWJsayA+IGEnKSwgJCh0aGlzKS5jbG9zZXN0KCcudWktbG9naW4nKS5maW5kKCcuaGVhZGVyLWZvcmdvdC1wd2QnKSk7XHJcbiAgICAgICAgICAgICQoJy5oZWFkZXJtYXNrJykuc2hvdygpO1xyXG4gICAgICAgICAgICB2YXIgdmFsaWRhdG9yID0gJCh0aGlzKS5jbG9zZXN0KCdmb3JtJykudmFsaWRhdGUoe1xyXG4gICAgICAgICAgICAgICAgb25rZXl1cDogZmFsc2VcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmICh2YWxpZGF0b3IuZWxlbWVudCgkKHRoaXMpLmNsb3Nlc3QoJ2Zvcm0nKS5maW5kKCcuZ3Vlc3RlbWFpbCcpKSkge1xyXG4gICAgICAgICAgICAgICAgJCgnLmFjY291bnRjb250ZW50IC5ndWVzdGVtYWlsJykudmFsKCQodGhpcykuY2xvc2VzdCgnLmFjY291bnRjb250ZW50JykuZmluZCgnLmd1ZXN0ZW1haWwnKS52YWwoKSk7XHJcbiAgICAgICAgICAgICAgICAkKCcuYWNjb3VudGNvbnRlbnQgLmd1ZXN0ZW1haWwnKS5yZW1vdmVDbGFzcygnZXJyb3InKTtcclxuICAgICAgICAgICAgICAgICQoJy5hY2NvdW50Y29udGVudCAuZ3Vlc3RlbWFpbCcpLm5leHQoJ3NwYW4uZXJyb3InKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICQoJy5hY2NvdW50Y29udGVudCAuZ3Vlc3RlbWFpbCcpLmFkZENsYXNzKCdjbGljay1tYXJrIHZhbGlkJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGFwcEdsb2JhbC5nbG9iYWxUaW1lcik7XHJcbiAgICAgICAgICAgIC8vYXBwR2xvYmFsLmdsb2JhbFRpbWVyID09IDA7XHJcbiAgICAgICAgICAgIGFwcEdsb2JhbC5nbG9iYWxUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJCgnLmFjY291bnRjb250ZW50JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmhlYWRlcm1hc2snKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcuaGVhZGVyY3VzdG9tZXJpbmZvJykuZmluZCgnLmpzLWFjdGl2ZScpLnJlbW92ZUNsYXNzKCdqcy1hY3RpdmUnKTtcclxuICAgICAgICAgICAgfSwgNTAwMCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoJy5hY2NvdW50Y29udGVudCcpLm1vdXNlZW50ZXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKCcuaGVhZGVybWFzaycpLnJlbW92ZUNsYXNzKCduby1oaWRlJyk7XHJcbiAgICAgICAgICAgICQoJy5oZWFkZXJtYXNrJykuc2hvdygpO1xyXG4gICAgICAgICAgICAkKCcuY29uZmlybWF0aW9uY29udGFpbmVyJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKCcuc2lnbi11cC1ibGsnKS5hZGRDbGFzcygnanMtYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChhcHBHbG9iYWwuZ2xvYmFsVGltZXIpO1xyXG4gICAgICAgICAgICAvL2FwcEdsb2JhbC5nbG9iYWxUaW1lciA9PSAwO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKCcuaGVhZGVybWFzaycpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGhlYWRlckV2ZW50cy5tYXNrRXZlbnQoZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoJy5oZWFkZXJtYXNrJykubW91c2VlbnRlcihmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBoZWFkZXJFdmVudHMubWFza0V2ZW50KGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoJy5hY2NvdW50Y29udGVudCcpLm1vdXNlZW50ZXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKCcuaGVhZGVybWFzaycpLnJlbW92ZUNsYXNzKCduby1oaWRlJyk7XHJcbiAgICAgICAgICAgICQoJy5oZWFkZXJtYXNrJykuc2hvdygpO1xyXG4gICAgICAgICAgICAkKCcuY29uZmlybWF0aW9uY29udGFpbmVyJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKCcuc2lnbi11cC1ibGsnKS5hZGRDbGFzcygnanMtYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChhcHBHbG9iYWwuZ2xvYmFsVGltZXIpO1xyXG4gICAgICAgICAgICAvL2FwcEdsb2JhbC5nbG9iYWxUaW1lciA9PSAwO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoJy51c2VyLWFjY291bnQnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICQodGhpcykucGFyZW50KCcudXNlci1pbmZvJykudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoJy5jaGFuZ2UtcmVnaW9ubmV3JykubW91c2VlbnRlcihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQoJy5kb21haW5zd2l0Y2gtaGVhZGVyJykuc2hvdygpO1xyXG4gICAgICAgICAgICAkKCcuaGVhZGVybWFzaycpLnNob3coKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKCcuY2hhbmdlLXJlZ2lvbicpLm1vdXNlZW50ZXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBqUXVlcnkoJy5kb21haW5zd2l0Y2gnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICQoJy5yZWdpb25fb3ZlcmxheScpLnNob3coKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKCcucmVnaW9uX292ZXJsYXknKS5tb3VzZWVudGVyKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgalF1ZXJ5KCcuZG9tYWluc3dpdGNoJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmhpZGUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKCdidXR0b24nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICgkKCcucmVzZXRwYXNzd29yZCcpLmlzKCc6VmlzaWJsZScpKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcucmVzZXRwYXNzd29yZCcpLmNsb3Nlc3QoJ2Rpdi5kaWFsb2ctY29udGVudCcpLmFkZENsYXNzKCdjb25maXJtYXRpb25jb250YWluZXInKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoJy5zYW1wbGUtc2VjdGlvbicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCEkKHRoaXMpLmZpbmQoJy5zYW1wbGVfbWFpbF9tYWluJykuaXMoJzp2aXNpYmxlJykpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLnNhbXBsZV9tYWlsX21haW4nKS5zbGlkZURvd24oNTAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoJy5zaWdudXBmb3ItZW1haWwgLnNlZXNhbXBsZXMnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLnNpZ251cGZvci1lbWFpbCcpLmZpbmQoJy5zYW1wbGVfbWFpbF9tYWluJykuc2xpZGVUb2dnbGUoNTAwKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJCgnYm9keScpLmNsaWNrKGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBpZiAoISQoZXZlbnQudGFyZ2V0KS5pcygnLnNpZ251cGZvci1lbWFpbCAuc2Vlc2FtcGxlcycpICYmICghJChldmVudC50YXJnZXQpLmlzKCcuY3JlYXRlX2VtYWlsX2NoZWNrYm94IC5zZWVzYW1wbGVzJykpKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcuc2FtcGxlX21haWxfbWFpbicpLnNsaWRlVXAoNTAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8qKlRoaXMgaXMgdXNlZCB0byBnZXQgdGhlIHRpY2sgbWFyayBmb3IgY3JlYXRlIGFjY291bnQgd2hlbiB0aGUgZmllbGQgaXMgdmFsaWQqL1xyXG4gICAgICAgICQoJy51aS1sb2dpbiBpbnB1dC5yZXF1aXJlZCcpLmJsdXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygndmFsaWQnKSkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnY2xpY2stbWFyaycpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnY2xpY2stbWFyaycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoJy5iYWNrLWxpbmssIC5zaWduaW5naW4nKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQoJy5hY2NvdW50Y29udGVudCcpLmhpZGUoKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcudWktbG9naW4nKS5maW5kKCcuaGVhZGVyLXNpZ24taW4nKS5zaG93KCk7XHJcbiAgICAgICAgICAgICQoJy5oZWFkZXItc2lnbi1pbiAuc2lnbmluX21haW4gLmxvZ2luZmFpbC5lcnJvcm1lc3NhZ2UnKS5oaWRlKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoJy5mb3Jnb3RfY3JlYXRlJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKCcuaGVhZGVyLWZvcmdvdC1wd2QnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICQoJy5oZWFkZXItY3JlYXRlJykuc2hvdygpO1xyXG4gICAgICAgICAgICAkKCcuaGVhZGVyLWNyZWF0ZSAuZXJyb3JtZXNzYWdlJykuaGlkZSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKCcubG9nZ2VkdXNlciBhLCAuaGVhZGVyY3VzdG9tZXJpbmZvIC5zZWNvbmRfbmFtZScpLm9uKCdtb3VzZWVudGVyJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBpZiAoJCgnLnJhcGFsYV9kZXZpY2UnKS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgJCgnLmFjY291bnRjb250ZW50JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgaGVhZGVyRXZlbnRzLmFjY291bnRDb250UG9zKCQoJy5oZWFkZXJjdXN0b21lcmluZm8gLmxvZ2dlZHVzZXIgYScpLCAkKCcudXNlci1pbmZvJykpO1xyXG4gICAgICAgICAgICAgICAgJCgnLnVzZXItaW5mbycpLnNob3coKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKCcucmFwYWxhX2RldmljZSAubG9nZ2VkdXNlciBhLC5oZWFkZXJjdXN0b21lcmluZm8gLnNlY29uZF9uYW1lJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAkKCcuYWNjb3VudGNvbnRlbnQnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgIGhlYWRlckV2ZW50cy5hY2NvdW50Q29udFBvcygkKCcuaGVhZGVyY3VzdG9tZXJpbmZvIC5sb2dnZWR1c2VyIGEnKSwgJCgnLnVzZXItaW5mbycpKTtcclxuICAgICAgICAgICAgJCgnLnVzZXItaW5mbycpLnNob3coKTtcclxuICAgICAgICAgICAgJCgnLmhlYWRlcm1hc2snKS5zaG93KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgalF1ZXJ5KHdpbmRvdykuYmluZCgnbWVzc2FnZScsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIHZhciBzdHI7XHJcbiAgICAgICAgICAgIGUgPSBlLm9yaWdpbmFsRXZlbnQ7XHJcbiAgICAgICAgICAgIGlmIChlLm9yaWdpbi5pbmRleE9mKGRvY3VtZW50LmxvY2F0aW9uLmhvc3QpID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBvYmogPSBlLmRhdGE7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBzdHIgPSBKU09OLnBhcnNlKG9iaik7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChzdHIucHJvY2VzcyAhPT0gJ3NpZ24taW4nKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChzdHIuc3RhdHVzID09PSAnc3VjY2VzcycpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc3RyLmVtYWlsID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlckV2ZW50cy51c2VyQ29va2llKHN0ci5lbWFpbCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5sb2NhdGlvbi5yZWxvYWQodHJ1ZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkKCcuRXhpc3RlZFVzZXItZXJyb3InKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcuUGFzc3dvcmRGb3JtYXQtZXJyb3InKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcuY3VzdG9tX3NpZ25pbicpLmZpbmQoJy5sb2FkaW5nJykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICBwcm9ncmVzcy5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcuY3VzdG9tX3NpZ25pbiBpbnB1dFt0eXBlPVwidGV4dFwiXSwgLmN1c3RvbV9zaWduaW4gaW5wdXRbdHlwZT1cInBhc3N3b3JkXCJdJykuYWRkQ2xhc3MoJ2Vycm9yY2xpZW50Jyk7XHJcbiAgICAgICAgICAgICAgICAkKCcubG9naW5mYWlsJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmFjY291bnRjb250ZW50IC5sb2FkaW5nJykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBqUXVlcnkoJy5zaWduaW4tYnV0dG9uJykuY2xpY2soZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB2YXIgcmVhbEZvcm0gPSAkKHRoaXMpLmNsb3Nlc3QoJ2Zvcm0nKTtcclxuICAgICAgICAgICAgaWYgKCFyZWFsRm9ybS52YWxpZCgpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJCgnLmxvZ2luZmFpbCcpLmhpZGUoKTtcclxuICAgICAgICAgICAgcHJvZ3Jlc3Muc2hvdygnLmhlYWRlci1zaWduLWluLmFjY291bnRjb250ZW50Jyk7XHJcbiAgICAgICAgICAgIHZhciBpZnJhbWVJZCA9ICdqcy1oZWFkZXItc2lnbmluLWlmcmFtZSc7XHJcbiAgICAgICAgICAgIHZhciBmb3JtSWQgPSAnanMtaGVhZGVyLXNpZ25pbi1mb3JtJztcclxuICAgICAgICAgICAgJCgnIycgKyBpZnJhbWVJZCkucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICQoJyMnICsgZm9ybUlkKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgdmFyICRmb3JtID0gJCgnPGZvcm0+PC9mb3JtPicpO1xyXG4gICAgICAgICAgICAkZm9ybS5hdHRyKCdpZCcsIGZvcm1JZCk7XHJcbiAgICAgICAgICAgICRmb3JtLmF0dHIoJ2FjdGlvbicsIHJlYWxGb3JtLmF0dHIoJ2FjdGlvbicpKTtcclxuICAgICAgICAgICAgJGZvcm0uYXR0cigndGFyZ2V0JywgaWZyYW1lSWQpO1xyXG4gICAgICAgICAgICAkZm9ybS5hdHRyKCdtZXRob2QnLCAnUE9TVCcpO1xyXG5cclxuICAgICAgICAgICAgJCgnPGlmcmFtZSBuYW1lPVwiJyArIGlmcmFtZUlkICsgJ1wiIGlkPVwiJyArIGlmcmFtZUlkICsgJ1wiIC8+JykuYXBwZW5kVG8oJ2JvZHknKTtcclxuICAgICAgICAgICAgJCgnIycgKyBpZnJhbWVJZCkuYXR0cignc3R5bGUnLCAnZGlzcGxheTogbm9uZTsnKTtcclxuXHJcbiAgICAgICAgICAgIHJlYWxGb3JtLmZpbmQoJ2lucHV0LCBzZWxlY3QsIHRleHRhcmVhJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgJGlucHV0ID0gJCh0aGlzKS5jbG9uZSgpO1xyXG4gICAgICAgICAgICAgICAgJGZvcm0uYXBwZW5kKCRpbnB1dCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgJCgnYm9keScpLmFwcGVuZCgkZm9ybSk7XHJcbiAgICAgICAgICAgICRmb3JtLmhpZGUoKTtcclxuICAgICAgICAgICAgJGZvcm0uc3VibWl0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLyokKFwiLlBhc3N3b3JkUmVzZXRGb3JtXCIpLm9uKFwia2V5dXBcIixcIi5ndWVzdGVtYWlsXCIsZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgICAgICAgICBpZihlLmtleUNvZGUgPT0gMTMpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcubG9zdF9idG4gLnNlbmQnKS50cmlnZ2VyKFwiY2xpY2tcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pOyovXHJcbiAgICAgICAgJCgnLlBhc3N3b3JkUmVzZXRGb3JtJykudW5iaW5kKCdzdWJtaXQnKS5vbignc3VibWl0JywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgJCgnLmhlYWRlci1mb3Jnb3QtcHdkIHNwYW4ucmVzZXRfZW1haWxfZXJyb3InKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICQoJy5sb3N0X2J0biAuc2VuZCcpLmFkZENsYXNzKCdjbGlja2VkQnV0dG9uJyk7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdmFyICRmb3JtID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgaWYgKCEkZm9ybS52YWxpZCgpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcHJvZ3Jlc3Muc2hvdygnLmhlYWRlci1mb3Jnb3QtcHdkLmFjY291bnRjb250ZW50Jyk7XHJcbiAgICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2h0bWwnLFxyXG4gICAgICAgICAgICAgICAgdXJsOiAkZm9ybS5hdHRyKCdhY3Rpb24nKSxcclxuICAgICAgICAgICAgICAgIGRhdGE6ICRmb3JtLnNlcmlhbGl6ZSgpLFxyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJChkYXRhKS5maW5kKCdkaXYjbWVzc2FnZXMuZXJyb3InKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmhlYWRlci1mb3Jnb3QtcHdkJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuaGVhZGVyLWZvcmdvdC1wd2Qgc3Bhbi5yZXNldF9lbWFpbF9lcnJvcicpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmFjY291bnRjb250ZW50IC5sb2FkaW5nJykucmVtb3ZlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmhlYWRlci1mb3Jnb3QtcHdkJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuY29uZmlybWF0aW9uY29udGFpbmVyJykuZmFkZUluKDQwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vdG8gZGlzcGxheSB0aGUgbWVzc2VhZ2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyRXZlbnRzLmluaXRpYWxpemVFdmVudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJFdmVudHMuYWNjb3VudENvbnRQb3MoJCgnLnVpLWxvZ2luIC5zaWduLXVwLWJsayA+IGEnKSwgJCgnLmNvbmZpcm1hdGlvbmNvbnRhaW5lcicpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmFjY291bnRjb250ZW50IC5sb2FkaW5nJykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5jb25maXJtYXRpb25jb250YWluZXInKS5maW5kKCcuaGVhZGVybWFzaycpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmNvbmZpcm1hdGlvbmNvbnRhaW5lcicpLmRlbGF5KDQwMDApLmZhZGVPdXQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgalF1ZXJ5KHdpbmRvdykuYmluZCgnbWVzc2FnZScsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIHZhciBzdHI7XHJcbiAgICAgICAgICAgIGUgPSBlLm9yaWdpbmFsRXZlbnQ7XHJcbiAgICAgICAgICAgIGlmIChlLm9yaWdpbi5pbmRleE9mKGRvY3VtZW50LmxvY2F0aW9uLmhvc3QpID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBvYmogPSBlLmRhdGE7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBzdHIgPSBKU09OLnBhcnNlKG9iaik7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChzdHIucHJvY2VzcyAhPT0gJ2NyZWF0ZS1hY2NvdW50Jykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoc3RyLnN0YXR1cyA9PT0gJ3N1Y2Nlc3MnKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHN0ci5lbWFpbCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJFdmVudHMudXNlckNvb2tpZShzdHIuZW1haWwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2h0bWwnLFxyXG4gICAgICAgICAgICAgICAgICAgIHVybDogZG9jdW1lbnQubG9jYXRpb24udG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5oZWFkZXJtYXNrJykucmVtb3ZlQ2xhc3MoJ25vLWhpZGUnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5oZWFkZXItc2lnbi1pbi5hY2NvdW50Y29udGVudCcpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuaGVhZGVyY3VzdG9tZXJpbmZvICN1c2VyJykuaHRtbCgkKGRhdGEpLmZpbmQoJyN1c2VyJykuaHRtbCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3VzZXJpbmZvJykuaHRtbCgkKGRhdGEpLmZpbmQoJyN1c2VyaW5mbycpLmh0bWwoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlckV2ZW50cy5hY2NvdW50Q29udFBvcygkKCcuaGVhZGVyY3VzdG9tZXJpbmZvIC5sb2dnZWR1c2VyIGEnKSwgJCgnLmNvbmdyYXRzLW1lc3NhZ2UuYWNjb3VudGNvbnRlbnQnKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5jb25ncmF0cy1tZXNzYWdlJykuZmFkZUluKDQwMCkuc2hvdygpLmRlbGF5KDMwMDApLmZhZGVPdXQoNDAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyRXZlbnRzLmluaXRpYWxpemVFdmVudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJCgnLmFjY291bnRjb250ZW50JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3MuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0ci5wYXNzd29yZGludmFsaWRmb3JtYXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuUGFzc3dvcmRGb3JtYXQtZXJyb3InKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5FeGlzdGVkVXNlci1lcnJvcicpLnNob3coKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICQoJy5lcnJvcm1lc3NhZ2UnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcudWktbG9naW4nKS5maW5kKCcuaGVhZGVyLXNpZ24taW4nKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAvLyQoJy51aS1sb2dpbicpLmZpbmQoJy5oZWFkZXItc2lnbi1pbiAuYWNjb3VudGVtYWlsJykudmFsKGVtYWlsSWQpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmFjY291bnRjb250ZW50IC5ndWVzdGVtYWlsJykucmVtb3ZlQ2xhc3MoJ2Vycm9yY2xpZW50Jyk7XHJcbiAgICAgICAgICAgICAgICAkKCcuYWNjb3VudGNvbnRlbnQgLmd1ZXN0ZW1haWwnKS5uZXh0KCdzcGFuLmVycm9yY2xpZW50JykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcudWktbG9naW4nKS5maW5kKCcuaGVhZGVyLXNpZ24taW4gLmFjY291bnRlbWFpbCcpLmFkZENsYXNzKCdjbGljay1tYXJrIHZhbGlkJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcuaGVhZGVybWFzaycpLmFkZENsYXNzKCduby1oaWRlJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmN1c3RvbV9zaWdudXAgaW5wdXRbdHlwZT1cInRleHRcIl0sIC5jdXN0b21fc2lnbnVwIGlucHV0W3R5cGU9XCJwYXNzd29yZFwiXScpLnJlbW92ZUNsYXNzKCdlcnJvcmNsaWVudCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGpRdWVyeSgnLmNyZWF0ZS1hY2NvdW50JykudW5iaW5kKCdjbGljaycpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdmFyIHJlYWxGb3JtID0gJCh0aGlzKS5jbG9zZXN0KCdmb3JtJyk7XHJcbiAgICAgICAgICAgIGlmICghcmVhbEZvcm0udmFsaWQoKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHByb2dyZXNzLnNob3coJy5oZWFkZXItY3JlYXRlLmFjY291bnRjb250ZW50Jyk7XHJcbiAgICAgICAgICAgIHZhciBpZnJhbWVJZCA9ICdqcy1oZWFkZXItY3JlYXRlLWFjY291bnQtaWZyYW1lJztcclxuICAgICAgICAgICAgdmFyIGZvcm1JZCA9ICdqcy1oZWFkZXItY3JlYXRlLWFjY291bnQtZm9ybSc7XHJcbiAgICAgICAgICAgICQoJyMnICsgaWZyYW1lSWQpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAkKCcjJyArIGZvcm1JZCkucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIHZhciAkZm9ybSA9ICQoJzxmb3JtPjwvZm9ybT4nKTtcclxuICAgICAgICAgICAgJGZvcm0uYXR0cignaWQnLCBmb3JtSWQpO1xyXG4gICAgICAgICAgICAkZm9ybS5hdHRyKCdhY3Rpb24nLCByZWFsRm9ybS5hdHRyKCdhY3Rpb24nKSk7XHJcbiAgICAgICAgICAgICRmb3JtLmF0dHIoJ3RhcmdldCcsIGlmcmFtZUlkKTtcclxuICAgICAgICAgICAgJGZvcm0uYXR0cignbWV0aG9kJywgJ1BPU1QnKTtcclxuXHJcbiAgICAgICAgICAgICQoJzxpZnJhbWUgbmFtZT1cIicgKyBpZnJhbWVJZCArICdcIiBpZD1cIicgKyBpZnJhbWVJZCArICdcIiAvPicpLmFwcGVuZFRvKCdib2R5Jyk7XHJcbiAgICAgICAgICAgICQoJyMnICsgaWZyYW1lSWQpLmF0dHIoJ3N0eWxlJywgJ2Rpc3BsYXk6IG5vbmU7Jyk7XHJcblxyXG4gICAgICAgICAgICByZWFsRm9ybS5maW5kKCdpbnB1dCwgc2VsZWN0LCB0ZXh0YXJlYScpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyICRpbnB1dCA9ICQodGhpcykuY2xvbmUoKTtcclxuICAgICAgICAgICAgICAgICRmb3JtLmFwcGVuZCgkaW5wdXQpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICQoJ2JvZHknKS5hcHBlbmQoJGZvcm0pO1xyXG4gICAgICAgICAgICAkZm9ybS5oaWRlKCk7XHJcbiAgICAgICAgICAgICRmb3JtLnN1Ym1pdCgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAoJCgnI3VzZXInKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGZpcnN0bmFtZXNwbGl0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBmaXJzdG5hbWVzcGxpdCgpIHtcclxuICAgICAgICAgICAgdmFyIGZpcnN0bmFtZSA9ICQoJy5sb2dnZWR1c2VyID4gYSBzcGFuLnVzZXJuYW1lJykudGV4dCgpO1xyXG4gICAgICAgICAgICB2YXIgZmlyc3RuYW1lV29yZHMgPSBmaXJzdG5hbWUuc3BsaXQoJyAnKTtcclxuICAgICAgICAgICAgdmFyIHRleHRsZW5ndGggPSAwO1xyXG4gICAgICAgICAgICB2YXIgbGltaXQgPSAxOTtcclxuICAgICAgICAgICAgdmFyIG5hbWVMZW5ndGggPSAkKCcubG9nZ2VkdXNlciA+IGEgc3Bhbi51c2VybmFtZScpLnRleHQoKSArICcgJyArICQudHJpbSgkKCcubG9nZ2VkdXNlciA+IGEgLnByb3N0YWZmLWhlYWRlci5iYWRnZS1oZWFkZXInKS50ZXh0KCkpO1xyXG4gICAgICAgICAgICBpZiAobmFtZUxlbmd0aC5sZW5ndGggPD0gMTkpIHtcclxuICAgICAgICAgICAgICAgICQoJy5sb2dnZWR1c2VyID4gYSBzcGFuLnVzZXJuYW1lJykudGV4dCgkKCcubG9nZ2VkdXNlciA+IGEgc3Bhbi51c2VybmFtZScpLnRleHQoKSArICcgJyArICQudHJpbSgkKCcubG9nZ2VkdXNlciA+IGEgLnByb3N0YWZmLWhlYWRlci5iYWRnZS1oZWFkZXInKS50ZXh0KCkpKTtcclxuICAgICAgICAgICAgICAgICQoJy5sb2dnZWR1c2VyID4gYSAucHJvc3RhZmYtaGVhZGVyLmJhZGdlLWhlYWRlcicpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGZpcnN0bmFtZVdvcmRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICQoJy5sb2dnZWR1c2VyID4gYSBzcGFuLnVzZXJuYW1lJykudGV4dCgnJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCgnLmxvZ2dlZHVzZXIgPiBhIHNwYW4udXNlcm5hbWUgLmZpcnN0X25hbWUnKS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5sb2dnZWR1c2VyID4gYSBzcGFuLnVzZXJuYW1lJykuaHRtbCgnPHNwYW4gY2xhc3M9XCJmaXJzdF9uYW1lXCI+PC9zcGFuPicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCQoJy5oZWFkZXJjdXN0b21lcmluZm8gLnNlY29uZF9uYW1lJykubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuaGVhZGVyY3VzdG9tZXJpbmZvJykuYXBwZW5kKCc8c3BhbiBjbGFzcz1cInNlY29uZF9uYW1lXCI+PC9zcGFuPicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBmTmFtZSA9ICQoJy5sb2dnZWR1c2VyID4gYSBzcGFuLnVzZXJuYW1lIHNwYW4uZmlyc3RfbmFtZScpLmVxKDApO1xyXG4gICAgICAgICAgICAgICAgdmFyIExuYW1lID0gJCgnLmhlYWRlcmN1c3RvbWVyaW5mbyA+IC5zZWNvbmRfbmFtZScpO1xyXG5cclxuICAgICAgICAgICAgICAgIGpRdWVyeS5lYWNoKGZpcnN0bmFtZVdvcmRzLCBmdW5jdGlvbiAoaSwgdikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHRsZW5ndGggPSB0ZXh0bGVuZ3RoID09IDAgPyB0ZXh0bGVuZ3RoICsgdi5sZW5ndGggOiB0ZXh0bGVuZ3RoICsgdi5sZW5ndGggKyAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpID09IDAgJiYgdi5sZW5ndGggPiBsaW1pdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmTmFtZS50ZXh0KHYuc3Vic3RyKDAsIDE2KSArICcuLi4nKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRleHRsZW5ndGggPCAyMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZk5hbWUudGV4dCgpLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmTmFtZS50ZXh0KHYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZk5hbWUudGV4dChmTmFtZS50ZXh0KCkgKyAnICcgKyB2KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChMbmFtZS50ZXh0KCkubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIExuYW1lLnRleHQodik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBMbmFtZS50ZXh0KExuYW1lLnRleHQoKSArICcgJyArIHYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgTG5hbWUudGV4dChMbmFtZS50ZXh0KCkgKyAnICcgKyAkLnRyaW0oJCgnLmxvZ2dlZHVzZXIgPiBhIC5iYWRnZS1taW5pJykudGV4dCgpKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCgnI3VzZXIgLmxvZ2dlZHVzZXInKS53aWR0aCgpID4gTG5hbWUud2lkdGgoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5sb2dnZWR1c2VyJykuYXBwZW5kKExuYW1lLmNsb25lKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIExuYW1lLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJCgnLmxvZ2dlZHVzZXIgPiBhIC5wcm9zdGFmZi1oZWFkZXIuYmFkZ2UtaGVhZGVyJykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcubG9nZ2VkdXNlciA+IGEgLmJhZGdlLW1pbmknKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICQoJy5sb2dnZWR1c2VyID4gYSBzcGFuLnVzZXJuYW1lIHNwYW4nKS5oaWRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICQoJy5hY2NvdW50Y29udGVudCBpbnB1dFt0eXBlPVwidGV4dFwiXSwgLmFjY291bnRjb250ZW50IGlucHV0W3R5cGU9XCJwYXNzd29yZFwiXScpLmJpbmQoJ2tleXVwJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgdmFyIGtleWNvZGUgPSBlLmtleUNvZGUgPyBlLmtleUNvZGUgOiBlLndoaWNoO1xyXG4gICAgICAgICAgICBpZiAoISQodGhpcykuY2xvc2VzdCgnLmFjY291bnRjb250ZW50JykuaGFzQ2xhc3MoJ2pzLWVudGVyZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuYWNjb3VudGNvbnRlbnQnKS5hZGRDbGFzcygnanMtZW50ZXJlZCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoa2V5Y29kZSA9PSAxMykge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCdmb3JtJykuZmluZCgnLmZvcm1hY3Rpb25zIGJ1dHRvbicpLnRyaWdnZXIoJ2NsaWNrJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGFwcEdsb2JhbC5nbG9iYWxUaW1lcik7XHJcbiAgICAgICAgICAgIC8vYXBwR2xvYmFsLmdsb2JhbFRpbWVyID09IDA7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoJy5yYXBhbGFfZGV2aWNlIC51c2VyLXByb2ZpbGUgYScpLm9uKCdob3ZlcicsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAkKHRoaXMpLmF0dHIoJ2hyZWYnKTtcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICAvKiogT04gSE9WRVIgKi9cclxuICAgIGFjY291bnRDb250UG9zOiBmdW5jdGlvbiAoJHNvdXJjZSwgJGRlc3RpbnkpIHtcclxuICAgICAgICB2YXIgbGVmdFBvcyA9ICRzb3VyY2Uub2Zmc2V0KCkubGVmdCArICRzb3VyY2Uud2lkdGgoKSAtICQoJy5oZWFkZXJjdXN0b21lcmluZm8nKS5vZmZzZXQoKS5sZWZ0IC0gJGRlc3Rpbnkud2lkdGgoKSAvIDI7XHJcbiAgICAgICAgdmFyIGFycm93UG9zID0gKCRkZXN0aW55LndpZHRoKCkgLSAkZGVzdGlueS5maW5kKCcudG9wX2Fycm93Jykud2lkdGgoKSkgLyAyIC0gNDtcclxuICAgICAgICAkKCcuYWNjb3VudGNvbnRlbnQgLmxvYWRpbmcnKS5yZW1vdmUoKTtcclxuICAgICAgICBpZiAoJGRlc3RpbnkubGVuZ3RoICE9IDApIHtcclxuICAgICAgICAgICAgJGRlc3RpbnkuY3NzKCdsZWZ0JywgbGVmdFBvcyk7XHJcbiAgICAgICAgICAgICRkZXN0aW55LmZpbmQoJy50b3BfYXJyb3cnKS5jc3MoJ2xlZnQnLCBhcnJvd1Bvcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICQoJy5hY2NvdW50Y29udGVudCAuZm9ybWZpZWxkIC5sYWJlbCAuZXJyb3JsYWJlbCcpLmFkZENsYXNzKCdsYWJlbHRleHQnKS5yZW1vdmVDbGFzcygnZXJyb3JsYWJlbCcpO1xyXG4gICAgfSxcclxuICAgIHVzZXJDb29raWU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZGF0ZU9iaiA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgZGF0ZU9iai5zZXRUaW1lKGRhdGVPYmouZ2V0VGltZSgpICsgKDM2NSAqIDI0ICogNjAgKiA2MCAqIDEwMDApKTtcclxuICAgICAgICAvL2RvY3VtZW50LmNvb2tpZT1cImVtYWlsSWQ9XCIrJHZhbCtcIjsgZXhwaXJlcz1cIitkYXRlT2JqLnRvVVRDU3RyaW5nKCkrXCI7IHBhdGg9L1wiO1xyXG4gICAgfSxcclxuICAgIG1hc2tFdmVudDogZnVuY3Rpb24gKGVsZSkge1xyXG4gICAgICAgICQoJy5kb21haW5zd2l0Y2gtaGVhZGVyJykuaGlkZSgpO1xyXG4gICAgICAgICQoJy5kb21haW5zd2l0Y2gnKS5oaWRlKCk7XHJcbiAgICAgICAgaWYgKCEkKCcuaGVhZGVybWFzaycpLmhhc0NsYXNzKCduby1oaWRlJykpIHtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGFwcEdsb2JhbC5nbG9iYWxUaW1lcik7XHJcbiAgICAgICAgICAgIC8vYXBwR2xvYmFsLmdsb2JhbFRpbWVyID09IDA7XHJcbiAgICAgICAgICAgIGlmIChlbGUudHlwZSAhPSAnY2xpY2snICYmICQoJy5yYXBhbGFfZGV2aWNlJykubGVuZ3RoID09IDAgJiYgZWxlLnBhZ2VZID4gNjAgJiYgZWxlLnBhZ2VZIDwgMTAwKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcuaGVhZGVybWFzaycpLmhpZGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZWxlLnR5cGUgPT0gJ2NsaWNrJykge1xyXG4gICAgICAgICAgICAgICAgJCgnLmhlYWRlcm1hc2snKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcuYWNjb3VudGNvbnRlbnQnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcuaGVhZGVyY3VzdG9tZXJpbmZvJykuZmluZCgnLmpzLWFjdGl2ZScpLnJlbW92ZUNsYXNzKCdqcy1hY3RpdmUnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChhcHBHbG9iYWwuZ2xvYmFsVGltZXIpO1xyXG4gICAgICAgICAgICAgICAgLy9hcHBHbG9iYWwuZ2xvYmFsVGltZXIgPT0gMDtcclxuICAgICAgICAgICAgICAgIGlmICgkKCcuYWNjb3VudGNvbnRlbnQ6dmlzaWJsZScpLmhhc0NsYXNzKCdqcy1lbnRlcmVkJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBhcHBHbG9iYWwuZ2xvYmFsVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmFjY291bnRjb250ZW50JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuaGVhZGVybWFzaycpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9LCA1MDAwKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmFjY291bnRjb250ZW50JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5oZWFkZXJtYXNrJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG52YXIgaGVhZGVyaW5pdCA9IHtcclxuICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBoZWFkZXJFdmVudHMuaW5pdGlhbGl6ZUV2ZW50KCk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGhlYWRlcmluaXQ7XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuLy8galF1ZXJ5IGV4dGVuc2lvbnNcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gcGFyYW1zXHJcbiAgICAvLyB0b2dnbGVDbGFzcyAtIHJlcXVpcmVkXHJcbiAgICAvLyB0cmlnZ2VyU2VsZWN0b3IgLSBvcHRpb25hbC4gdGhlIHNlbGVjdG9yIGZvciB0aGUgZWxlbWVudCB0aGF0IHRyaWdnZXJzIHRoZSBldmVudCBoYW5kbGVyLiBkZWZhdWx0cyB0byB0aGUgY2hpbGQgZWxlbWVudHMgb2YgdGhlIGxpc3QuXHJcbiAgICAvLyBldmVudE5hbWUgLSBvcHRpb25hbC4gZGVmYXVsdHMgdG8gJ2NsaWNrJ1xyXG4gICAgJC5mbi50b2dnbGVkTGlzdCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgaWYgKCFvcHRpb25zLnRvZ2dsZUNsYXNzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgbGlzdCA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIGxpc3Qub24ob3B0aW9ucy5ldmVudE5hbWUgfHwgJ2NsaWNrJywgb3B0aW9ucy50cmlnZ2VyU2VsZWN0b3IgfHwgbGlzdC5jaGlsZHJlbigpLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHZhciBjbGFzc1RhcmdldCA9IG9wdGlvbnMudHJpZ2dlclNlbGVjdG9yID8gJCh0aGlzKS5wYXJlbnQoKSA6ICQodGhpcyk7XHJcbiAgICAgICAgICAgIGNsYXNzVGFyZ2V0LnRvZ2dsZUNsYXNzKG9wdGlvbnMudG9nZ2xlQ2xhc3MpO1xyXG4gICAgICAgICAgICAvLyBleGVjdXRlIGNhbGxiYWNrIGlmIGV4aXN0c1xyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5jYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5jYWxsYmFjaygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgICQuZm4uc3luY0hlaWdodCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYXJyID0gJC5tYWtlQXJyYXkodGhpcyk7XHJcbiAgICAgICAgYXJyLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICAgICAgcmV0dXJuICQoYSkuaGVpZ2h0KCkgLSAkKGIpLmhlaWdodCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmhlaWdodCgkKGFyclthcnIubGVuZ3RoIC0gMV0pLmhlaWdodCgpKTtcclxuICAgIH07XHJcbn07XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuXHJcbnZhciAkbWFpbiA9ICQoJyNtYWluJyksXHJcbiAgICAkZm9vdGVyID0gJCgnI2Zvb3Rlcm5ldycpLFxyXG4gICAgJGJhbm5lciA9ICQoJy5iYW5uZXJfcHJvc3RhZmYnKTtcclxuXHJcbnZhciBtZWdhbWVudSA9IHtcclxuICAgIGdsb2JhbFRpbWVyOiAwLFxyXG4gICAgaW5pdDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIG1lZ2FtZW51Lm1lZ2FtZW51RXZlbnQoKTtcclxuICAgIH0sXHJcbiAgICBvcGVuOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIC8vdmFyICR3aWR0aCA9ICQoJyNicmFuZC10YWJzLWhlYWRlcicpLndpZHRoKCk7XHJcbiAgICAgICAgLy8gVG8gbWFrZSBkZWZhdWx0IG1lbnUgYmFzZWQgb24gdGhlIGJyYW5kIGFjdGl2ZVxyXG4gICAgICAgICQoJyNicmFuZC10YWJzLWhlYWRlciA+IHVsID4gbGkuYWN0aXZlIC5tb2JpbGUtbWFpbi1tZW51LWhlYWRpbmcnKS50cmlnZ2VyKCdjbGljaycpO1xyXG4gICAgICAgICQoJyNjb250YWluZXInKS5hZGRDbGFzcygnanMtY29udGFpbmVyLWFjdGl2ZScpO1xyXG4gICAgICAgICQoJy5tZW51LXRvZ2dsZScpLmFkZENsYXNzKCdqcy1tZW51LXRvZ2dsZScpO1xyXG4gICAgICAgICQoJy5tZW51LW9wZW4tc2hhZG93JykucmVtb3ZlKCk7XHJcbiAgICAgICAgJG1haW4ud3JhcCgnPGRpdiBjbGFzcz1cXCdvcGVuLW1lbnUtd3JhcFxcJz48L2Rpdj4nKTtcclxuICAgICAgICAkKCdib2R5JykuYWRkQ2xhc3MoJ2pzLWJvZHknKTtcclxuICAgICAgICAkKCcub3Blbi1tZW51LXdyYXAnKS5wcmVwZW5kKCRiYW5uZXIpO1xyXG4gICAgICAgICQoJy5vcGVuLW1lbnUtd3JhcCcpLmFwcGVuZCgkZm9vdGVyKS5wcmVwZW5kKCc8YSBocmVmPVxcJ2phdmFzY3JpcHQ6dm9pZCgwKTtcXCcgY2xhc3M9XFwnbWVudS1vcGVuLXNoYWRvd1xcJz48L2E+Jyk7XHJcbiAgICAgICAgLy8kKFwiI21haW4sICNmb290ZXJuZXdcIikucHJlcGVuZChcIjxkaXYgY2xhc3M9J21lbnUtb3Blbi1zaGFkb3cnPjwvZGl2PlwiKVxyXG4gICAgICAgICQoJyNjb250YWluZXIsIC5vcGVuLW1lbnUtd3JhcCcpLmFuaW1hdGUoe21hcmdpbkxlZnQ6ICcyODBweCd9LCAzMDApO1xyXG4gICAgICAgICQoJyNicmFuZC10YWJzLWhlYWRlcicpLndyYXAoJzxkaXYgY2xhc3M9XFwnYnJhbmQtYWN0aXZlXFwnPjwvZGl2PicpO1xyXG4gICAgICAgICQoJy5icmFuZC1hY3RpdmUnKS5hbmltYXRlKHtsZWZ0OiAnMCd9LCAzMDApO1xyXG4gICAgICAgICQoJy5iYW5uZXJfcHJvc3RhZmYnKS5hbmltYXRlKHtsZWZ0OiAnMjgwcHgnfSwgMzAwKTtcclxuICAgICAgICAkKCcub3dsLWNhcm91c2VsJykuZmluZCgnLm93bC1pdGVtLCAub3dsLWl0ZW0gaW1nJykudHJpZ2dlcignbW91c2VlbnRlcicpO1xyXG4gICAgfSxcclxuICAgIGNsb3NlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnI2NvbnRhaW5lciwgLm9wZW4tbWVudS13cmFwJykuYW5pbWF0ZSh7bWFyZ2luTGVmdDogJzAnfSwgMzAwKTtcclxuICAgICAgICAkKCcuYmFubmVyX3Byb3N0YWZmJykuYW5pbWF0ZSh7bGVmdDogJzAnfSwgMzAwKTtcclxuICAgICAgICAkKCcjY29udGFpbmVyJykucmVtb3ZlQ2xhc3MoJ2pzLWNvbnRhaW5lci1hY3RpdmUnKTtcclxuICAgICAgICAkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ2pzLWJvZHknKTtcclxuICAgICAgICAkKCcub3dsLWNhcm91c2VsJykuZmluZCgnLm93bC1pdGVtLCAub3dsLWl0ZW0gaW1nJykudHJpZ2dlcignbW91c2VvdXQnKTtcclxuICAgICAgICAkKCcjbWFpbiwgI2Zvb3Rlcm5ldycpLnVud3JhcCgpO1xyXG4gICAgICAgICQoJy5tYWduaWZpZXItaWNvbicpLnJlbW92ZUNsYXNzKCdqcy1tYWduaWZpZXItaWNvbi1hY3RpdmUnKTtcclxuICAgICAgICAkKCcubWVudS10b2dnbGUnKS5yZW1vdmVDbGFzcygnanMtbWVudS10b2dnbGUnKTtcclxuICAgICAgICAkKCcjYnJhbmQtdGFicy1oZWFkZXInKS51bndyYXAoKTtcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCh3aW5kb3cpLnNjcm9sbFRvcCgwKTtcclxuICAgICAgICB9LCAzMDApO1xyXG5cclxuICAgIH0sXHJcbiAgICBtZWdhbWVudUV2ZW50OiBmdW5jdGlvbiAoJGNvbikge1xyXG4gICAgICAgIGlmICgkY29uID09IG51bGwpIHtcclxuICAgICAgICAgICAgJGNvbiA9ICQoJyNicmFuZC10YWJzLWhlYWRlciA+IHVsID4gbGkgLm1lZ2FtZW51ZHJvcCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkY29uLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgbWF4bGVuZ3RoID0gMjQ7XHJcbiAgICAgICAgICAgIHZhciAkbWVnYSA9ICQodGhpcyk7XHJcbiAgICAgICAgICAgIC8vdmFyIHRleHRsaW5rbGVuZ3RoID0gJCh0aGlzKS5maW5kKCc+IGEnKS5sZW5ndGg7XHJcbiAgICAgICAgICAgIHZhciBkaXZsZW5ndGggPSA0O1xyXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5hdHRyKCdpZCcpID09ICdyYXBhbGEnKSB7XHJcbiAgICAgICAgICAgICAgICBkaXZsZW5ndGggPSA2O1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCQodGhpcykuYXR0cignaWQnKSA9PSAndm1jJykge1xyXG4gICAgICAgICAgICAgICAgZGl2bGVuZ3RoID0gNjtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICgkKHRoaXMpLmF0dHIoJ2lkJykgPT0gJ2x1aHJqZW5zZW4nKSB7XHJcbiAgICAgICAgICAgICAgICBkaXZsZW5ndGggPSA0O1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCQodGhpcykuYXR0cignaWQnKSA9PSAnc3VmaXgnKSB7XHJcbiAgICAgICAgICAgICAgICBkaXZsZW5ndGggPSA2O1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCQodGhpcykuYXR0cignaWQnKSA9PSAnc3Rvcm0nKSB7XHJcbiAgICAgICAgICAgICAgICBkaXZsZW5ndGggPSA0O1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCQodGhpcykuYXR0cignaWQnKSA9PSAndHJpZ2dlcngnKSB7XHJcbiAgICAgICAgICAgICAgICBkaXZsZW5ndGggPSA0O1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCQodGhpcykuYXR0cignaWQnKSA9PSAnYmx1ZWZveCcpIHtcclxuICAgICAgICAgICAgICAgIGRpdmxlbmd0aCA9IDQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoJCh0aGlzKS5hdHRyKCdpZCcpID09ICd0ZXJtaW5hdG9yJykge1xyXG4gICAgICAgICAgICAgICAgZGl2bGVuZ3RoID0gNDtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICgkKHRoaXMpLmF0dHIoJ2lkJykgPT0gJ3dpbGxpYW1zb24nKSB7XHJcbiAgICAgICAgICAgICAgICBkaXZsZW5ndGggPSA0O1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCQodGhpcykuYXR0cignaWQnKSA9PSAnc3RyaWtlbWFzdGVyJykge1xyXG4gICAgICAgICAgICAgICAgZGl2bGVuZ3RoID0gNjtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICgkKHRoaXMpLmF0dHIoJ2lkJykgPT0gJ21hcmN1bScpIHtcclxuICAgICAgICAgICAgICAgIGRpdmxlbmd0aCA9IDY7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoJCh0aGlzKS5hdHRyKCdpZCcpID09ICdvdHRlcicpIHtcclxuICAgICAgICAgICAgICAgIGRpdmxlbmd0aCA9IDY7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoJCh0aGlzKS5hdHRyKCdpZCcpID09ICdpY2Vmb3JjZScpIHtcclxuICAgICAgICAgICAgICAgIGRpdmxlbmd0aCA9IDQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy92YXIgaW50aWFsID0gMDtcclxuICAgICAgICAgICAgdmFyIGVuZCA9IG1heGxlbmd0aDtcclxuICAgICAgICAgICAgdmFyIGRhdGFsaXN0ID0gJyc7XHJcbiAgICAgICAgICAgIHZhciBicmFuZGxpc3QgPSAkKHRoaXMpLmZpbmQoJy5icmFuZC1hc3NldHMnKS5jbG9uZSgpO1xyXG4gICAgICAgICAgICB2YXIgY29udGFpbmVyd2lkdGggPSAkKCcubWVnYW1lbnUtZHJvcCAud3JhcHBlcicpLndpZHRoKCkgLyBkaXZsZW5ndGggKyAncHgnO1xyXG4gICAgICAgICAgICB2YXIgbGFzdHRleHQgPSAnJztcclxuICAgICAgICAgICAgdmFyIHByZXYgPSAnJztcclxuICAgICAgICAgICAgLy92YXIgbmV4dCA9ICcnO1xyXG4gICAgICAgICAgICAkbWVnYS5maW5kKCcuYnJhbmQtYXNzZXRzJykucmVtb3ZlKCk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8PSBkaXZsZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgJG1lZ2EuYXBwZW5kKCc8ZGl2IGNsYXNzPVwibWVudWxpc3QgbWVudWxpc3QtJyArIGkgKyAnXCIgc3R5bGU9XCJ3aWR0aDonICsgY29udGFpbmVyd2lkdGggKyAnXCI+PC9kaXY+Jyk7XHJcbiAgICAgICAgICAgICAgICAkbWVnYS5maW5kKCcubWVnYV9zdWJjYXRlZ29yeScpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmZpbmQoJ2EubGV2ZWwtMScpLmVxKDApLmhhc0NsYXNzKCdjb2x1bW4tJyArIGkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFsaXN0ID0gJCh0aGlzKS5odG1sKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRtZWdhLmZpbmQoJy5tZW51bGlzdC0nICsgaSkuYXBwZW5kKGRhdGFsaXN0KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGlmIChpID09IGRpdmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRtZWdhLmZpbmQoJy5tZW51bGlzdC0nICsgaSkuYXBwZW5kKGJyYW5kbGlzdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICRtZWdhLmZpbmQoJy5tZW51bGlzdCcpLmVhY2goZnVuY3Rpb24gKCRpKSB7XHJcbiAgICAgICAgICAgICAgICAkaSA9ICRpICsgMTtcclxuICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmZpbmQoJz4gYScpLmxlbmd0aCA+IG1heGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVuZCA9ICQodGhpcykuZmluZCgnPiBhJykubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbmQgPiBtYXhsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YWxpc3QgPSAkKHRoaXMpLmZpbmQoJz4gYScpLnNsaWNlKG1heGxlbmd0aCwgZW5kKS5jbG9uZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJG1lZ2EuZmluZCgnLm1lbnVsaXN0LScgKyAoJGkgKyAxKSkubGVuZ3RoICE9IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRtZWdhLmZpbmQoJy5tZW51bGlzdC0nICsgKCRpICsgMSkpLnByZXBlbmQoZGF0YWxpc3QpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCRpICE9IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJG1lZ2EuZmluZCgnLm1lbnVsaXN0LScgKyAkaSArICc+IGEnKS5lcSgwKS5oYXNDbGFzcygnbGV2ZWwtMicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXYgPSAkaSAtIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3R0ZXh0ID0gJG1lZ2EuZmluZCgnLm1lbnVsaXN0LScgKyBwcmV2ICsgJz4gYS5sZXZlbC0xJykubGFzdCgpLmF0dHIoJ2hyZWZsYW5nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRtZWdhLmZpbmQoJy5tZW51bGlzdC0nICsgJGkpLnByZXBlbmQoJzxkaXYgY2xhc3M9XCJsZXZlbC1jb250aW51ZVwiPicgKyBsYXN0dGV4dCArICcsIENvbnRpbnVlZDwvZGl2PicpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnPiBhJykuc2xpY2UobWF4bGVuZ3RoLCBlbmQpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJG1lZ2EuZmluZCgnLm1lZ2Ffc3ViY2F0ZWdvcnknKS5yZW1vdmUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvKiBDbGljayBldmVudCBmb3IgYnJhbmRzIHRvIHNlZSBzdWIgbWVudXMgaW4gbW9iaWxlICovXHJcbiAgICAgICAgJCgnI2JyYW5kLXRhYnMtaGVhZGVyID4gdWwgPiBsaSAubW9iaWxlLW1haW4tbWVudS1oZWFkaW5nJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpIDw9IDk1OSkge1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKS5jbG9zZXN0KCdsaScpO1xyXG4gICAgICAgICAgICAgICAgJHRoaXMuY2xvc2VzdCgndWwnKS5hZGRDbGFzcygnaGlkZS1hZnRlcicpO1xyXG4gICAgICAgICAgICAgICAgJHRoaXMuc2libGluZ3MoJ2xpJykucmVtb3ZlQ2xhc3MoJ2pzLXN1Yi1tZW51LWFjdGl2ZScpLmFkZENsYXNzKCdqcy1zdWItbWVudS1pbmFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgJHRoaXMucmVtb3ZlQ2xhc3MoJ2pzLXN1Yi1tZW51LWluYWN0aXZlJykuYWRkQ2xhc3MoJ2pzLXN1Yi1tZW51LWFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgJHRoaXMuZmluZCgnLm1lZ2FtZW51LWRyb3AnKS5hbmltYXRlKHsnbGVmdCc6IFswLCAnZWFzZU91dEV4cG8nXX0pO1xyXG4gICAgICAgICAgICAgICAgJHRoaXMuZmluZCgnLnNob3AtcmFwYWxhJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyICRjdXJPYmogPSAkKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghJGN1ck9iai5jbG9zZXN0KCcuc3ViLWNhdGVnb3J5LXNlY3Rpb24tMScpLmhhc0NsYXNzKCdqcy1hY3RpdmUtc3ViLW1lbnUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkY3VyT2JqLm5leHQoJy5zdWItY2F0LWRyb3AtZG93bicpLnRyaWdnZXIoJ2NsaWNrJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAkdGhpcy5maW5kKCcubWVudWxpc3QgLnN1Yi1jYXRlZ29yeS1zZWN0aW9uLTEgPiBhJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1lbnVMaXN0ID0gJCh0aGlzKS5jbG9zZXN0KCcubWVudWxpc3QnKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbWFpbkNvbnRlbnQgPSAkKHRoaXMpLmNsb3Nlc3QoJy5zdWItY2F0ZWdvcnktc2VjdGlvbi0xJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJChtYWluQ29udGVudCkuZmluZCgnLnN1Yi1jYXQtZHJvcC1kb3duJykucmVtb3ZlQXR0cignc3R5bGUnKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYWNob3JXaWR0aCA9ICQodGhpcykud2lkdGgoKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZHJvcERvd25XaXN0aCA9ICQobWVudUxpc3QpLndpZHRoKCkgLSBhY2hvcldpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgIGRyb3BEb3duV2lzdGggPSBkcm9wRG93bldpc3RoIC0gNzA7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRyb3BEb3duV2lzdGggPiAxNykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKG1haW5Db250ZW50KS5maW5kKCcuc3ViLWNhdC1kcm9wLWRvd24nKS53aWR0aChkcm9wRG93bldpc3RoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPiA5NTkgJiYgJCh3aW5kb3cpLndpZHRoKCkgPCAxMDI1KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGV2aWNlQWdlbnQgPSBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgZGV2aWNlVHlwZSA9IGRldmljZUFnZW50Lm1hdGNoKC8oaXBob25lfGlwb2R8aXBhZHxhbmRyb2lkfGJsYWNrQmVycnkpLyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGV2aWNlVHlwZVswXSA9PSAnaXBob25lJyB8fCBkZXZpY2VUeXBlWzBdID09ICdpcGFkJykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8qJChcIi5tb2JpbGUtbWFpbi1tZW51LWhlYWRpbmcgPiBhXCIpLnJlbW92ZUNsYXNzKFwic2VsZWN0ZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoISQodGhpcykuaGFzQ2xhc3MoJ3NlbGVjdGVkJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZWdhbWVudS5tZWdhbWVudUV2ZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0qL1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLyogQ2xpY2sgZXZlbnQgZm9yIHRvIHNlZSBhbGwgdGhlIGJyYW5kcyBpbiBtb2JpbGUgKi9cclxuICAgICAgICAkKCdib2R5Jykub2ZmKCdjbGljaycsICcuc2VlLWFsbC1icmFuZHMnKS5vbignY2xpY2snLCAnLnNlZS1hbGwtYnJhbmRzJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgLy92YXIgJHdpZHRoID0gJCgnI2JyYW5kLXRhYnMtaGVhZGVyJykud2lkdGgoKTtcclxuICAgICAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpIDw9IDk1OSkge1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyICR3aWR0aCA9ICQoJyNicmFuZC10YWJzLWhlYWRlcicpLndpZHRoKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpLmNsb3Nlc3QoJ2xpJyk7XHJcbiAgICAgICAgICAgICAgICAkdGhpcy5maW5kKCcubWVnYW1lbnUtZHJvcCcpLmFuaW1hdGUoeydsZWZ0JzogWyR3aWR0aCwgJ2Vhc2VPdXRFeHBvJ119KTtcclxuICAgICAgICAgICAgICAgICR0aGlzLnNpYmxpbmdzKCdsaScpLnJlbW92ZUNsYXNzKCdqcy1zdWItbWVudS1pbmFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgJHRoaXMuY2xvc2VzdCgndWwnKS5yZW1vdmVDbGFzcygnaGlkZS1hZnRlcicpO1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCR0aGlzLmZpbmQoJy5tZWdhbWVudS1kcm9wJykucG9zaXRpb24oKS5sZWZ0ID09ICR3aWR0aCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMucmVtb3ZlQ2xhc3MoJ2pzLXN1Yi1tZW51LWFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIDQwMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLyogQ2xpY2sgZXZlbnQgZm9yIHN1YiBtZW51IGRyb3AgZG93biBpbiBtb2JpbGUgKi9cclxuICAgICAgICAkKCdib2R5Jykub2ZmKCdjbGljaycsICcuc3ViLWNhdGVnb3J5LXNlY3Rpb24tMSAuc3ViLWNhdC1kcm9wLWRvd24nKS5vbignY2xpY2snLCAnLnN1Yi1jYXRlZ29yeS1zZWN0aW9uLTEgLnN1Yi1jYXQtZHJvcC1kb3duJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpIDw9IDk1OSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEkKHRoaXMpLmhhc0NsYXNzKCduby1jbGljaycpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcykuY2xvc2VzdCgnLnN1Yi1jYXRlZ29yeS1zZWN0aW9uLTEnKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISR0aGlzLmhhc0NsYXNzKCdqcy1hY3RpdmUtc3ViLW1lbnUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy5hZGRDbGFzcygnanMtYWN0aXZlLXN1Yi1tZW51Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoJy5zdWItY2F0ZWdvcnktc2VjdGlvbi0yJykucmVtb3ZlQXR0cignc3R5bGUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMuZmluZCgnLnN1Yi1jYXRlZ29yeS1zZWN0aW9uLTInKS5zbGlkZURvd24oKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy5maW5kKCcuc3ViLWNhdGVnb3J5LXNlY3Rpb24tMicpLnNsaWRlVXAoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMuZGVsYXkoMTAwMCkucmVtb3ZlQ2xhc3MoJ2pzLWFjdGl2ZS1zdWItbWVudScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBtYWluIG1lbnUgdG9nZ2xlXHJcbiAgICAgICAgJCgnYm9keScpLm9mZignY2xpY2snLCAnLm1lbnUtdG9nZ2xlJykub24oJ2NsaWNrJywgJy5tZW51LXRvZ2dsZScsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpIDw9IDk1OSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEkKCcjY29udGFpbmVyJykuaGFzQ2xhc3MoJ2pzLWNvbnRhaW5lci1hY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lZ2FtZW51Lm9wZW4oKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVnYW1lbnUuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoJ2JvZHknKS5vZmYoJ3RvdWNoc3RhcnQgY2xpY2snLCAnYS5tZW51LW9wZW4tc2hhZG93Jykub24oJ3RvdWNoc3RhcnQgY2xpY2snLCAnYS5tZW51LW9wZW4tc2hhZG93JywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPD0gOTU5KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoISQoJyNjb250YWluZXInKS5oYXNDbGFzcygnanMtY29udGFpbmVyLWFjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVnYW1lbnUub3BlbigpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBtZWdhbWVudS5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJCgnYm9keScpLm9mZignY2xpY2snLCAnYS5tYWduaWZpZXItaWNvbicpLm9uKCdjbGljaycsICdhLm1hZ25pZmllci1pY29uJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPD0gOTU5KSB7XHJcbiAgICAgICAgICAgICAgICAvL3ZhciAkd2lkdGggPSAkKCcjYnJhbmQtdGFicy1oZWFkZXInKS53aWR0aCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCEkKCcjY29udGFpbmVyJykuaGFzQ2xhc3MoJ2pzLWNvbnRhaW5lci1hY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5tYWduaWZpZXItaWNvbicpLmFkZENsYXNzKCdqcy1tYWduaWZpZXItaWNvbi1hY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICBtZWdhbWVudS5vcGVuKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQoJy5tYWduaWZpZXItaWNvbicpLmhhc0NsYXNzKCdqcy1tYWduaWZpZXItaWNvbi1hY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjY29udGFpbmVyJykuZmluZCgnLnNpbXBsZXNlYXJjaGlucHV0JykuZm9jdXMoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gTWVnYSBtZW51IGV2ZW50cyBmb3Igd2luZG93IHdpZHRoIGdyZWF0ZXIgdGhhbiA5NTlcclxuICAgICAgICAkKCcjYnJhbmQtdGFicy1oZWFkZXIgPiB1bCA+IGxpJykubW91c2VlbnRlcihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciAkaWQgPSAkKHRoaXMpLmZpbmQoJy5tb2JpbGUtbWFpbi1tZW51LWhlYWRpbmcgPiBhJykuYXR0cignY2xhc3MnKTtcclxuICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcclxuXHJcbiAgICAgICAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA+IDk1OSkge1xyXG4gICAgICAgICAgICAgICAgJCgnLm93bC1jYXJvdXNlbCcpLmZpbmQoJy5vd2wtaXRlbSwgLm93bC1pdGVtIGltZycpLnRyaWdnZXIoJ21vdXNlZW50ZXInKTtcclxuICAgICAgICAgICAgICAgICR0aGlzLnNpYmxpbmdzKCdsaScpLmZpbmQoJy5tZWdhbWVudWRyb3AsIC5tZWdhbWVudS1kcm9wJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmFjY291bnRjb250ZW50JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KG1lZ2FtZW51Lmdsb2JhbFRpbWVyKTtcclxuICAgICAgICAgICAgICAgIC8vbWVnYW1lbnUuZ2xvYmFsVGltZXIgPT0gMDtcclxuICAgICAgICAgICAgICAgICQoJyNicmFuZC10YWJzLWhlYWRlciBsaScpLnJlbW92ZUNsYXNzKCdjdXJyZW50Jyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoJHRoaXMuZmluZCgnLm1lZ2FtZW51ZHJvcCcpLmZpbmQoJ2EnKS5sZW5ndGggIT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoJy5tZWdhbWVudWRyb3AnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMuZmluZCgnLm1lZ2FtZW51LWRyb3AnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8kKCcubWVnYW1lbnVkcm9wW2lkPVwiJysgJGlkICsnXCJdJykuY2xvc2VzdCgnLm1lZ2EtbWVudScpLmZpbmQoJy5tYXNrJykuY3NzKCdsZWZ0JywkKHRoaXMpLm9mZnNldCgpLmxlZnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vJCgnLm1lZ2FtZW51ZHJvcFtpZD1cIicrICRpZCArJ1wiXScpLmNsb3Nlc3QoJy5tZWdhLW1lbnUnKS5maW5kKCcubWFzaycpLmF0dHIoJ2hyZWYnLCQodGhpcykuZmluZCgnYScpLmF0dHIoJ2hyZWYnKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgY29udGFpbmVyd2lkdGggPSAkKCcubWVnYW1lbnUtZHJvcCAud3JhcHBlcicpLndpZHRoKCkgLyAkKCcjJyArICRpZCArICcgLm1lbnVsaXN0JykubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyd2lkdGggPSBjb250YWluZXJ3aWR0aCAtIDIxO1xyXG4gICAgICAgICAgICAgICAgJCgnIycgKyAkaWQgKyAnIC5tZW51bGlzdCcpLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcjJyArICRpZCArICcgLm1lbnVsaXN0Jykud2lkdGgoY29udGFpbmVyd2lkdGgpO1xyXG4gICAgICAgICAgICAgICAgbWVnYW1lbnUuc3luY2hlaWdodCgkKCcjJyArICRpZCArICcubWVnYW1lbnVkcm9wIC5tZW51bGlzdCcpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdjdXJyZW50Jyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoISQodGhpcykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnI2JyYW5kLXRhYnMtaGVhZGVyIGxpLmFjdGl2ZScpLmFkZENsYXNzKCdpbmFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdpbmFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJCgnLmJyYW5kLXRhYnMtaGVhZGVyLW1hc2snKS5zaG93KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS5tb3VzZWxlYXZlKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA+IDk1OSkge1xyXG4gICAgICAgICAgICAgICAgJCgnLm93bC1jYXJvdXNlbCcpLmZpbmQoJy5vd2wtaXRlbSwgLm93bC1pdGVtIGltZycpLnRyaWdnZXIoJ21vdXNlb3V0Jyk7XHJcbiAgICAgICAgICAgICAgICAvKnZhciBkZXZpY2VBZ2VudCA9IG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSxcclxuICAgICAgICAgICAgICAgIGRldmljZVR5cGUgPSBkZXZpY2VBZ2VudC5tYXRjaCgvKGlwaG9uZXxpcG9kfGlwYWR8YW5kcm9pZHxibGFja0JlcnJ5KS8pO1xyXG4gICAgICAgICAgICAgICAgaWYoZGV2aWNlVHlwZVswXSA9PSBcImlwaG9uZVwiIHx8IGRldmljZVR5cGVbMF0gPT0gXCJpcGFkXCIpe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMuZmluZChcIi5tb2JpbGUtbWFpbi1tZW51LWhlYWRpbmcgPiBhXCIpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAgfSovXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLyoqIHNpbmdsZSBjbGljayByZWRpcmVjdGluZyBvZiBtZWdhbWVudSBjYXRlZ29yaWVzKi9cclxuICAgICAgICAvKiQoJy5yYXBhbGFfZGV2aWNlIC5tZW51bGlzdCBhJykubW91c2VlbnRlcihmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICQodGhpcykuYXR0cignaHJlZicpO1xyXG4gICAgICAgIH0pOyovXHJcbiAgICAgICAgJCgnI2JyYW5kLXRhYnMtaGVhZGVyJykubW91c2VsZWF2ZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA+IDk1OSkge1xyXG4gICAgICAgICAgICAgICAgJCgnLm1lZ2FtZW51LWRyb3AnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcubWVnYW1lbnVkcm9wJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgJCgnI2JyYW5kLXRhYnMtaGVhZGVyID4gdWwgPiBsaS5hY3RpdmUnKS5yZW1vdmVDbGFzcygnaW5hY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICQoJyNicmFuZC10YWJzLWhlYWRlciA+IHVsID4gbGknKS5yZW1vdmVDbGFzcygnY3VycmVudCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoJy5icmFuZC10YWJzLWhlYWRlci1tYXNrJykubW91c2VlbnRlcihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA+IDk1OSkge1xyXG4gICAgICAgICAgICAgICAgJCgnLm1lZ2FtZW51LWRyb3AnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcubWVnYW1lbnVkcm9wJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgJCgnI2JyYW5kLXRhYnMtaGVhZGVyID4gdWwgPiBsaS5hY3RpdmUnKS5yZW1vdmVDbGFzcygnaW5hY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICQoJyNicmFuZC10YWJzLWhlYWRlciA+IHVsID4gbGknKS5yZW1vdmVDbGFzcygnY3VycmVudCcpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5oaWRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLyokKFwiLnJhcGFsYV9kZXZpY2UgI2JyYW5kLXRhYnMtaGVhZGVyIGFcIikuY2xpY2soZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgaWYoJCh0aGlzKS5oYXNDbGFzcygnc2VsZWN0ZWQnKSl7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAkKHRoaXMpLmF0dHIoJ2hyZWYnKTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoXCJsaVwiKS5zaWJsaW5ncygpLmZpbmQoXCJhXCIpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pOyovXHJcbiAgICB9LFxyXG4gICAgc3luY2hlaWdodDogZnVuY3Rpb24gKCRzZWwpIHtcclxuICAgICAgICB2YXIgY3VycmVudCA9IDA7XHJcbiAgICAgICAgaWYgKCQoJHNlbCkuaGFzQ2xhc3MoJ21lbnVsaXN0JykpIHtcclxuICAgICAgICAgICAgJHNlbC5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmhlaWdodCgpID4gY3VycmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnQgPSAkKHRoaXMpLmhlaWdodCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkc2VsLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCQodGhpcykuaGVpZ2h0KCkgPiBjdXJyZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudCA9ICQodGhpcykuaGVpZ2h0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkc2VsLmhlaWdodChjdXJyZW50KTtcclxuICAgIH1cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gbWVnYW1lbnU7XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuXHJcbnZhciB1dGlsID0gcmVxdWlyZSgnLi91dGlsJyk7XHJcbiAgICAvL2JvbnVzUHJvZHVjdHNWaWV3ID0gcmVxdWlyZSgnLi9ib251cy1wcm9kdWN0cy12aWV3Jyk7XHJcblxyXG52YXIgdGltZXIgPSB7XHJcbiAgICBpZDogbnVsbCxcclxuICAgIGNsZWFyOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaWQpIHtcclxuICAgICAgICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLmlkKTtcclxuICAgICAgICAgICAgZGVsZXRlIHRoaXMuaWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIHN0YXJ0OiBmdW5jdGlvbiAoZHVyYXRpb24sIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5pZCA9IHNldFRpbWVvdXQoY2FsbGJhY2ssIGR1cmF0aW9uKTtcclxuICAgIH1cclxufTtcclxuXHJcbnZhciBtaW5pY2FydCA9IHtcclxuICAgIHVybDogdXRpbC5hamF4VXJsKFVybHMuYWRkUHJvZHVjdCksXHJcbiAgICBpbml0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbWluaWNhcnQucmVzZXQoKTtcclxuICAgICAgICAkKCcuY2hlY2tvdXRtaW5pY2FydCcpLnNsaW1zY3JvbGwoKTtcclxuICAgICAgICB0aGlzLiRlbCA9ICQoJyNtaW5pY2FydCcpO1xyXG4gICAgICAgIHRoaXMuJGNvbnRlbnQgPSB0aGlzLiRlbC5maW5kKCcubWluaWNhcnRjb250ZW50Jyk7XHJcbiAgICAgICAgalF1ZXJ5KCcubWluaWNhcnRpY29uLWNvbnQnKS5vbignbW91c2VvdmVyIHRvdWNoc3RhcnQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICghbWluaWNhcnQuaXNTaG93KCkpIHtcclxuICAgICAgICAgICAgICAgIG1pbmljYXJ0LmhvdmVyU2xpZGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkKCcuQ3VzdG9tLXRvb2x0aXAsIC5jdmNfdG9vbHRpcCwgLm9yZGVyZ290aHJvdWdoX3Rvb2x0aXAnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmICgkKCcucmFwYWxhX2RldmljZScpLmxlbmd0aCA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMpLnRvb2x0aXBzdGVyKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogalF1ZXJ5KHRoaXMpLmZpbmQoJy50b29sdGlwY29udGFpbmVyJykuaHRtbCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50QXNIVE1MOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhXaWR0aDogMzAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3VjaERldmljZXM6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXI6ICdjbGljaydcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMpLnRvb2x0aXBzdGVyKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogalF1ZXJ5KHRoaXMpLmZpbmQoJy50b29sdGlwY29udGFpbmVyJykuaHRtbCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50QXNIVE1MOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhXaWR0aDogMzAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3VjaERldmljZXM6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIHJlZ2lzdGVyIGNsb3NlIGJ1dHRvbiBldmVudFxyXG4gICAgICAgICQoJy5taW5pY2FydGNvbnRlbnQgLm1pbmljYXJ0Y2xvc2UnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIHJlc2V0IGFsbCB0aGUgZXZlbnRzIGJpbmRpbmdzXHJcbiAgICAgICAgICAgIG1pbmljYXJ0LnJlc2V0KCk7XHJcbiAgICAgICAgICAgIG1pbmljYXJ0LmNsb3NlKDApO1xyXG4gICAgICAgICAgICAkKCcucmFwYWxhX2RldmljZSAubWluaWNhcnQtYnV0dG9uJykucmVtb3ZlQ2xhc3MoJ2NsaWNrZWQnKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKCcubWluaWNhcnRjb250ZW50JykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQobWluaWNhcnQudGltZXIpO1xyXG4gICAgICAgICAgICBtaW5pY2FydC50aW1lciA9IG51bGw7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJCgnLm1pbmljYXJ0JykubW91c2VlbnRlcihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIG1pbmljYXJ0LnNldG1pbmljYXJoZWlnaHQoKTtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KG1pbmljYXJ0LnRpbWVyKTtcclxuICAgICAgICAgICAgbWluaWNhcnQudGltZXIgPSBudWxsO1xyXG4gICAgICAgICAgICBpZiAoJCgnLm1pbmljYXJ0Y29udGVudCcpLmlzKCc6YW5pbWF0ZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgJCgnLm1pbmljYXJ0Y29udGVudCcpLnN0b3AoKTtcclxuICAgICAgICAgICAgICAgICQoJy5taW5pY2FydGNvbnRlbnQnKS5jc3MoeydvcGFjaXR5JzogJzEnLCAnaGVpZ2h0JzogJ2F1dG8nfSk7XHJcbiAgICAgICAgICAgICAgICBtaW5pY2FydC5pbml0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS5tb3VzZWxlYXZlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCgnLnJhcGFsYV9kZXZpY2UgLm1pbmljYXJ0LWJ1dHRvbicpLnJlbW92ZUNsYXNzKCdjbGlja2VkJyk7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChtaW5pY2FydC50aW1lcik7XHJcbiAgICAgICAgICAgIG1pbmljYXJ0LnRpbWVyID0gbnVsbDtcclxuICAgICAgICAgICAgLy8gYWZ0ZXIgYSB0aW1lIG91dCBhdXRvbWF0aWNhbGx5IGNsb3NlIGl0XHJcbiAgICAgICAgICAgIG1pbmljYXJ0LnRpbWVyID0gc2V0VGltZW91dChcclxuICAgICAgICAgICAgICAgICdtaW5pY2FydC5jbG9zZSgpJywgMzApO1xyXG4gICAgICAgICAgICBtaW5pY2FydC5jbG9zZSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAoJCgnLm1pbmktY2FydC1wcm9kdWN0JykubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICAkKCcubWluaWNhcnRjb250ZW50JykucmVtb3ZlQ2xhc3MoJ2xlc3NvbmUnKTtcclxuICAgICAgICAgICAgJCgnLm1pbmljYXJ0Y29udGVudCAuc2xpbVNjcm9sbERpdicpLnJlbW92ZUNsYXNzKCdsZXNzJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJCgnLm1pbmljYXJ0Y29udGVudCcpLmFkZENsYXNzKCdsZXNzb25lJyk7XHJcbiAgICAgICAgICAgICQoJy5taW5pY2FydGNvbnRlbnQgLnNsaW1TY3JvbGxEaXYnKS5hZGRDbGFzcygnbGVzcycpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHJldHVybnMgYSBib29sZWFuIGlmIGEgbWluaWNhcnQgaXMgdmlzaWJsZS9zaG93biBvciBoaWRkZW5cclxuICAgIGlzU2hvdzogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBqUXVlcnkoJy5taW5pY2FydGNvbnRlbnQnKS5jc3MoJ2Rpc3BsYXknKSA9PSAnbm9uZScgPyBmYWxzZSA6IHRydWU7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHJlc2V0IG1pbmljYXJ0XHJcbiAgICByZXNldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGpRdWVyeSgnLm1pbmljYXJ0aWNvbi1jb250JykudW5iaW5kKCdob3ZlcicpO1xyXG4gICAgICAgIGpRdWVyeSgnLm1pbmljYXJ0JykudW5iaW5kKCdtb3VzZWVudGVyJykudW5iaW5kKFxyXG4gICAgICAgICAgICAnbW91c2VsZWF2ZScpO1xyXG4gICAgfSxcclxuXHJcbiAgICBlbmFibGVob3ZlcmVmZmVjdDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGpRdWVyeSgnLm1pbmljYXJ0dG90YWwnKS5tb3VzZWVudGVyKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgbWluaWNhcnQuc2V0bWluaWNhcmhlaWdodCgpO1xyXG4gICAgICAgICAgICAvL2NsZWFyVGltZW91dChtaW5pY2FydC50aW1lcik7XHJcbiAgICAgICAgICAgIC8vbWluaWNhcnQudGltZXIgPSBudWxsO1xyXG4gICAgICAgICAgICB0aW1lci5jbGVhcigpO1xyXG4gICAgICAgICAgICBpZiAoJCgnLm1pbmljYXJ0Y29udGVudCcpLmlzKCc6YW5pbWF0ZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgJCgnLm1pbmljYXJ0Y29udGVudCcpLnN0b3AoKTtcclxuICAgICAgICAgICAgICAgICQoJy5taW5pY2FydGNvbnRlbnQnKS5jc3MoeydvcGFjaXR5JzogJzEnLCAnaGVpZ2h0JzogJ2F1dG8nfSk7XHJcbiAgICAgICAgICAgICAgICBtaW5pY2FydC5pbml0KCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgalF1ZXJ5KCcubWluaWNhcnR0b3RhbCcpLm1vdXNlbGVhdmUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBqUXVlcnkoJy5taW5pY2FydGNvbnRlbnQnKS5mYWRlT3V0KDEwMDApO1xyXG4gICAgICAgICAgICAkKCcucmFwYWxhX2RldmljZSAubWluaWNhcnQtYnV0dG9uJykucmVtb3ZlQ2xhc3MoJ2NsaWNrZWQnKTtcclxuXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gU2hvd3MgdGhlIGdpdmVuIGNvbnRlbnQgaW4gdGhlIG1pbmkgY2FydFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IEEgSFRNTCBzdHJpbmcgd2l0aCB0aGUgY29udGVudCB3aGljaCB3aWxsIGJlIHNob3duXHJcbiAgICAgKi9cclxuICAgIC8vIHNob3dzIHRoZSBnaXZlbiBjb250ZW50IGluIHRoZSBtaW5pIGNhcnRcclxuICAgIHNob3c6IGZ1bmN0aW9uIChodG1sKSB7XHJcbiAgICAgICAgalF1ZXJ5KCcjbWluaWNhcnQnKS5odG1sKGh0bWwpO1xyXG4gICAgICAgIC8vIGJpbmQgYWxsIHRoZSBldmVudHNcclxuICAgICAgICBtaW5pY2FydC5pbml0KCk7XHJcbiAgICAgICAgaWYgKG1pbmljYXJ0LnN1cHByZXNzU2xpZGVEb3duICYmIG1pbmljYXJ0LnN1cHByZXNzU2xpZGVEb3duKCkpIHtcclxuICAgICAgICAgICAgLy8gZG8gbm90aGluZ1xyXG4gICAgICAgICAgICAvLyB0aGUgaG9vayAnTWluaUNhcnQuc3VwcHJlc3NTbGlkZURvd24oKScgc2hvdWxkIGhhdmUgZG9uZVxyXG4gICAgICAgICAgICAvLyB0aGUgcmVmcmVzaFxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG1pbmljYXJ0LnNsaWRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIHNldG1pbmljYXJoZWlnaHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgc2Nyb2xsaGVpZ2h0ID0gJCgnLm1pbmktY2FydC1wcm9kdWN0OmVxKDApJykuaGVpZ2h0KCk7XHJcbiAgICAgICAgaWYgKCQoJy5taW5pLWNhcnQtcHJvZHVjdCcpLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgdmFyIHNjcm9sbGhlaWdodDIgPSAkKCcubWluaS1jYXJ0LXByb2R1Y3Q6ZXEoMSknKS5oZWlnaHQoKTtcclxuICAgICAgICAgICAgdmFyIGF2Z2hlaWdodCA9IChzY3JvbGxoZWlnaHQgKyBzY3JvbGxoZWlnaHQyKSAvIDI7XHJcbiAgICAgICAgICAgIHZhciBuZXdzY3JvbGxoZWlnaHQgPSAoKGF2Z2hlaWdodCkgKyAoYXZnaGVpZ2h0IC0gKGF2Z2hlaWdodCAvIDQpKSkgKyAyMDtcclxuXHJcbiAgICAgICAgICAgICQoJy5zbGltU2Nyb2xsRGl2JykuY3NzKCdoZWlnaHQnLCBuZXdzY3JvbGxoZWlnaHQgKyAncHgnKTtcclxuICAgICAgICAgICAgJCgnLmNoZWNrb3V0bWluaWNhcnQnKS5jc3MoJ2hlaWdodCcsIG5ld3Njcm9sbGhlaWdodCArICdweCcpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBoZWlnaHRJbWcgPSAkKCcubWluaWJyYW5kY29sdW1uJykuZmluZCgnYScpLmhlaWdodCgpO1xyXG4gICAgICAgICAgICB2YXIgaGVpZ2h0SW1nMSA9ICQoJy5taW5pYnJhbmRjb2x1bW4nKS5maW5kKCdpbWcnKS5oZWlnaHQoKTtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlIChzY3JvbGxoZWlnaHQgPCBoZWlnaHRJbWcgKyBoZWlnaHRJbWcxKSB7XHJcbiAgICAgICAgICAgICAgICBoZWlnaHRJbWcgPSAkKCcubWluaWJyYW5kY29sdW1uJykuZmluZCgnYScpLmhlaWdodCgpO1xyXG4gICAgICAgICAgICAgICAgc2Nyb2xsaGVpZ2h0ID0gJCgnLnRyX3JvdGF0aW9uJykuaGVpZ2h0KCk7XHJcbiAgICAgICAgICAgICAgICAkKCcuc2xpbVNjcm9sbERpdicpLmNzcygnaGVpZ2h0Jywgc2Nyb2xsaGVpZ2h0ICsgJ3B4Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHNjcm9sbGhlaWdodDEgPSAkKCcuY2hlY2tvdXRtaW5pY2FydCcpLmhlaWdodCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNjcm9sbGhlaWdodDEgPiBzY3JvbGxoZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuY2hlY2tvdXRtaW5pY2FydCcpLmNzcygnaGVpZ2h0Jywgc2Nyb2xsaGVpZ2h0MSArICdweCcpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuY2hlY2tvdXRtaW5pY2FydCcpLmNzcygnaGVpZ2h0Jywgc2Nyb2xsaGVpZ2h0ICsgJ3B4Jyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy8gaG9vayB3aGljaCBjYW4gYmUgcmVwbGFjZWQgYnkgaW5kaXZpZHVhbCBwYWdlcy9wYWdlIHR5cGVzIChlLmcuXHJcbiAgICAvLyBjYXJ0KVxyXG4gICAgc3VwcHJlc3NTbGlkZURvd246IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb25cclxuICAgICAqIEBkZXNjcmlwdGlvbiBTbGlkZXMgZG93biBhbmQgc2hvdyB0aGUgY29udGVudHMgb2YgdGhlIG1pbmkgY2FydFxyXG4gICAgICovXHJcbiAgICBzbGlkZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRpbWVyLmNsZWFyKCk7XHJcbiAgICAgICAgLy8gc2hvdyB0aGUgaXRlbVxyXG4gICAgICAgIHRoaXMuJGNvbnRlbnQuc2xpZGVEb3duKCdzbG93Jyk7XHJcbiAgICAgICAgLy8gYWZ0ZXIgYSB0aW1lIG91dCBhdXRvbWF0aWNhbGx5IGNsb3NlIGl0XHJcbiAgICAgICAgdGltZXIuc3RhcnQoNjAwMCwgdGhpcy5jbG9zZS5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAgICAgaWYgKG1pbmljYXJ0LnN1cHByZXNzU2xpZGVEb3duICYmIG1pbmljYXJ0LnN1cHByZXNzU2xpZGVEb3duKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyByZWdpc3RlciBjbG9zZSBidXR0b24gZXZlbnRcclxuICAgICAgICBqUXVlcnkoJy5taW5pY2FydGNvbnRlbnQgLm1pbmljYXJ0Y2xvc2UnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIHJlc2V0IGFsbCB0aGUgZXZlbnRzIGJpbmRpbmdzXHJcbiAgICAgICAgICAgIG1pbmljYXJ0LnJlc2V0KCk7XHJcbiAgICAgICAgICAgIG1pbmljYXJ0LmNsb3NlKDApO1xyXG4gICAgICAgICAgICAkKCcucmFwYWxhX2RldmljZSAubWluaWNhcnQtYnV0dG9uJykucmVtb3ZlQ2xhc3MoJ2NsaWNrZWQnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy9SZW1vdmluZyBwYWRkaW5nIGZyb20gdGhlIGJhbm5lciBpZiBpdCBkb2Vzbm90IGNvbnRhaW5zIGRhdGEvaW1hZ2VcclxuICAgICAgICBpZiAoJCgnLnNsb3RfYmFubmVyJykuZmluZCgnaW1nJykubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgJCgnLnNsb3RfYmFubmVyJykuY3NzKCdwYWRkaW5nJywgJzAgMCAwcHggMCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gcmVnaXN0ZXIgdGhlIG1vdXNlb3V0IGV2ZW50c1xyXG4gICAgICAgIGpRdWVyeSgnLm1pbmljYXJ0Y29udGVudCcpLm1vdXNlZW50ZXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBtaW5pY2FydC5zZXRtaW5pY2FyaGVpZ2h0KCk7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChtaW5pY2FydC50aW1lcik7XHJcbiAgICAgICAgICAgIG1pbmljYXJ0LnRpbWVyID0gbnVsbDtcclxuICAgICAgICAgICAgaWYgKCQodGhpcykuaXMoJzphbmltYXRlZCcpKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnN0b3AoKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykuY3NzKHsnb3BhY2l0eSc6ICcxJywgJ2hlaWdodCc6ICdhdXRvJ30pO1xyXG4gICAgICAgICAgICAgICAgbWluaWNhcnQuaW5pdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJCgnLm1pbmljYXJ0JykubW91c2VsZWF2ZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQoJy5yYXBhbGFfZGV2aWNlIC5taW5pY2FydC1idXR0b24nKS5yZW1vdmVDbGFzcygnY2xpY2tlZCcpO1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQobWluaWNhcnQudGltZXIpO1xyXG4gICAgICAgICAgICBtaW5pY2FydC50aW1lciA9IG51bGw7XHJcbiAgICAgICAgICAgIC8vIGFmdGVyIGEgdGltZSBvdXQgYXV0b21hdGljYWxseSBjbG9zZSBpdFxyXG4gICAgICAgICAgICBtaW5pY2FydC50aW1lciA9IHNldFRpbWVvdXQoXHJcbiAgICAgICAgICAgICAgICAnbWluaWNhcnQuY2xvc2UoKScsIDMwKTtcclxuICAgICAgICAgICAgbWluaWNhcnQuaW5pdCgpO1xyXG4gICAgICAgICAgICBtaW5pY2FydC5jbG9zZSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBzaG93IHRoZSBpdGVtXHJcbiAgICAgICAgalF1ZXJ5KCcubWluaWNhcnRjb250ZW50Jykuc2xpZGVEb3duKCcyMDAwJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBtaW5pY2FydC5zZXRtaW5pY2FyaGVpZ2h0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gc2hvdyhcInNsaWRlXCIsXHJcbiAgICAgICAgLy8geyBkaXJlY3Rpb246XHJcbiAgICAgICAgLy8gXCJ1cFwiIH0sXHJcbiAgICAgICAgLy8gMTAwMCk7XHJcblxyXG4gICAgICAgIC8vIGFkZCB0aGUgb3BlbiBjbGFzcyB0byB0aGUgdG90YWxcclxuICAgICAgICBqUXVlcnkoJy5taW5pY2FydCAubWluaWNhcnR0b3RhbCcpLmFkZENsYXNzKCdvcGVuJyk7XHJcblxyXG4gICAgICAgIGpRdWVyeSgnLnN1bW1hcnlwcm9kdWN0JykuZWFjaChcclxuICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyICR0aGlzID0galF1ZXJ5KHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGhlaWdodCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgaWYgKCR0aGlzLmZpbmQoJy5pbWFnZWV4cGFuZGVkJykuaXMoJzp2aXNpYmxlJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAkdGhpcy5maW5kKCcuaGlkZW9uY29sbGFwc2UnKS5oaWRlKCkuZW5kKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQoJy5hdHRyaWJ1dGUnKS5hZGRDbGFzcyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2NvbGxhcHNlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodCA9ICQodGhpcykuZmluZCgnLmF0dHJpYnV0ZXMnKS5oZWlnaHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQgKz0gJCh0aGlzKS5maW5kKCcubmFtZScpLmhlaWdodCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzKS5maW5kKCcuaW1hZ2UnKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnbWluLWhlaWdodCc6IGhlaWdodFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCR0aGlzLmZpbmQoJy5pbWFnZWNvbGxhcHNlZCcpLmlzKCc6dmlzaWJsZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0ID0gJCh0aGlzKS5maW5kKCcuYXR0cmlidXRlcycpLmhlaWdodCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodCArPSAkKHRoaXMpLmZpbmQoJy5uYW1lJykuaGVpZ2h0KCkgKyAzMDtcclxuICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcykuZmluZCgnLmltYWdlJykuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ21pbi1oZWlnaHQnOiBoZWlnaHRcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNsZWFyVGltZW91dChtaW5pY2FydC50aW1lcik7XHJcbiAgICAgICAgbWluaWNhcnQudGltZXIgPSBudWxsO1xyXG5cclxuICAgICAgICAvLyBhZnRlciBhIHRpbWUgb3V0IGF1dG9tYXRpY2FsbHkgY2xvc2UgaXRcclxuICAgICAgICBtaW5pY2FydC50aW1lciA9IHNldFRpbWVvdXQoJ21pbmljYXJ0LmNsb3NlKCknLCAxMDAwKTtcclxuXHJcbiAgICAgICAgLy8gR29vZ2xlIEFuYWx5dGljcyBjb2RlIHRvIHRyYWNrIG1pbmkgY2FydCBvcGVuLlxyXG4gICAgICAgIGlmIChpc0V2ZW50VHJhY2tpbmdFbmFibGVkICYmIGlzR29vZ2xlQW5hbHl0aWNzRW5hYmxlZCkge1xyXG4gICAgICAgICAgICBnb29nbGVBbmFseXRpY3NFdmVudHMubWluaUNhcnQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfSxcclxuICAgIGhvdmVyU2xpZGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAobWluaWNhcnQuc3VwcHJlc3NTbGlkZURvd24gJiYgbWluaWNhcnQuc3VwcHJlc3NTbGlkZURvd24oKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHJlZ2lzdGVyIGNsb3NlIGJ1dHRvbiBldmVudFxyXG4gICAgICAgIGpRdWVyeSgnLm1pbmljYXJ0Y29udGVudCAubWluaWNhcnRjbG9zZScpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gcmVzZXQgYWxsIHRoZSBldmVudHMgYmluZGluZ3NcclxuICAgICAgICAgICAgbWluaWNhcnQucmVzZXQoKTtcclxuICAgICAgICAgICAgbWluaWNhcnQuY2xvc2UoMCk7XHJcbiAgICAgICAgICAgICQoJy5yYXBhbGFfZGV2aWNlIC5taW5pY2FydC1idXR0b24nKS5yZW1vdmVDbGFzcygnY2xpY2tlZCcpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvL1JlbW92aW5nIHBhZGRpbmcgZnJvbSB0aGUgYmFubmVyIGlmIGl0IGRvZXNub3QgY29udGFpbnMgZGF0YS9pbWFnZVxyXG4gICAgICAgIGlmICgkKCcuc2xvdF9iYW5uZXInKS5maW5kKCdpbWcnKS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAkKCcuc2xvdF9iYW5uZXInKS5jc3MoJ3BhZGRpbmcnLCAnMCAwIDBweCAwJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyByZWdpc3RlciB0aGUgbW91c2VvdXQgZXZlbnRzXHJcbiAgICAgICAgalF1ZXJ5KCcubWluaWNhcnRjb250ZW50JykubW91c2VlbnRlcihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIG1pbmljYXJ0LnNldG1pbmljYXJoZWlnaHQoKTtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KG1pbmljYXJ0LnRpbWVyKTtcclxuICAgICAgICAgICAgbWluaWNhcnQudGltZXIgPSBudWxsO1xyXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5pcygnOmFuaW1hdGVkJykpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuc3RvcCgpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoeydvcGFjaXR5JzogJzEnLCAnaGVpZ2h0JzogJ2F1dG8nfSk7XHJcbiAgICAgICAgICAgICAgICBtaW5pY2FydC5pbml0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAkKCcubWluaWNhcnQnKS5tb3VzZWxlYXZlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCgnLnJhcGFsYV9kZXZpY2UgLm1pbmljYXJ0LWJ1dHRvbicpLnJlbW92ZUNsYXNzKCdjbGlja2VkJyk7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChtaW5pY2FydC50aW1lcik7XHJcbiAgICAgICAgICAgIG1pbmljYXJ0LnRpbWVyID0gbnVsbDtcclxuICAgICAgICAgICAgLy8gYWZ0ZXIgYSB0aW1lIG91dCBhdXRvbWF0aWNhbGx5IGNsb3NlIGl0XHJcbiAgICAgICAgICAgIG1pbmljYXJ0LnRpbWVyID0gc2V0VGltZW91dChcclxuICAgICAgICAgICAgICAgICdtaW5pY2FydC5jbG9zZSgpJywgMzApO1xyXG4gICAgICAgICAgICBtaW5pY2FydC5jbG9zZSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBzaG93IHRoZSBpdGVtXHJcbiAgICAgICAgalF1ZXJ5KCcubWluaWNhcnRjb250ZW50Jykuc2xpZGVEb3duKCcyMDAwJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBtaW5pY2FydC5zZXRtaW5pY2FyaGVpZ2h0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gc2hvdyhcInNsaWRlXCIsXHJcbiAgICAgICAgLy8geyBkaXJlY3Rpb246XHJcbiAgICAgICAgLy8gXCJ1cFwiIH0sXHJcbiAgICAgICAgLy8gMTAwMCk7XHJcblxyXG4gICAgICAgIC8vIGFkZCB0aGUgb3BlbiBjbGFzcyB0byB0aGUgdG90YWxcclxuICAgICAgICBqUXVlcnkoJy5taW5pY2FydCAubWluaWNhcnR0b3RhbCcpLmFkZENsYXNzKCdvcGVuJyk7XHJcblxyXG4gICAgICAgIGpRdWVyeSgnLnN1bW1hcnlwcm9kdWN0JykuZWFjaChcclxuICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyICR0aGlzID0galF1ZXJ5KHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGhlaWdodCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgaWYgKCR0aGlzLmZpbmQoJy5pbWFnZWV4cGFuZGVkJykuaXMoJzp2aXNpYmxlJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAkdGhpcy5maW5kKCcuaGlkZW9uY29sbGFwc2UnKS5oaWRlKCkuZW5kKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQoJy5hdHRyaWJ1dGUnKS5hZGRDbGFzcyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2NvbGxhcHNlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodCA9ICQodGhpcykuZmluZCgnLmF0dHJpYnV0ZXMnKS5oZWlnaHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQgKz0gJCh0aGlzKS5maW5kKCcubmFtZScpLmhlaWdodCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzKS5maW5kKCcuaW1hZ2UnKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnbWluLWhlaWdodCc6IGhlaWdodFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCR0aGlzLmZpbmQoJy5pbWFnZWNvbGxhcHNlZCcpLmlzKCc6dmlzaWJsZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0ID0gJCh0aGlzKS5maW5kKCcuYXR0cmlidXRlcycpLmhlaWdodCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodCArPSAkKHRoaXMpLmZpbmQoJy5uYW1lJykuaGVpZ2h0KCkgKyAzMDtcclxuICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcykuZmluZCgnLmltYWdlJykuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ21pbi1oZWlnaHQnOiBoZWlnaHRcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIEdvb2dsZSBBbmFseXRpY3MgY29kZSB0byB0cmFjayBtaW5pIGNhcnQgb3Blbi5cclxuICAgICAgICBpZiAoaXNFdmVudFRyYWNraW5nRW5hYmxlZCAmJiBpc0dvb2dsZUFuYWx5dGljc0VuYWJsZWQpIHtcclxuICAgICAgICAgICAgZ29vZ2xlQW5hbHl0aWNzRXZlbnRzLm1pbmlDYXJ0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBqUXVlcnkoJy5taW5pY2FydHRvdGFsJykuYWRkQ2xhc3MoJ2VuYWJsZWhvdmVyJyk7XHJcbiAgICAgICAgbWluaWNhcnQuZW5hYmxlaG92ZXJlZmZlY3QoKTtcclxuXHJcbiAgICAgICAgJCgnI21haW4gLCAjaGVhZGVyICwgI2Zvb3Rlcm5ldywgI2Zvb3Rlcm5ldyAucm93JykudW5iaW5kKCd0b3VjaHN0YXJ0JykuYmluZCgndG91Y2hzdGFydCcsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGlmICgkKCcubWluaWNhcnRjb250ZW50JykuaXMoJzp2aXNpYmxlJykpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50TGlua0xlbmd0aCA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJy5taW5pY2FydGNvbnRlbnQnKS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWluaWNhcnR0b3RhbCA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJy5taW5pY2FydC1idXR0b24nKS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudExpbmtMZW5ndGggPT09IDAgJiYgbWluaWNhcnR0b3RhbCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChtaW5pY2FydC50aW1lcik7XHJcbiAgICAgICAgICAgICAgICAgICAgbWluaWNhcnQudGltZXIgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGFmdGVyIGEgdGltZSBvdXQgYXV0b21hdGljYWxseSBjbG9zZSBpdFxyXG4gICAgICAgICAgICAgICAgICAgIG1pbmljYXJ0LnRpbWVyID0gc2V0VGltZW91dChcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ21pbmljYXJ0LmNsb3NlKCknLCAzMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbWluaWNhcnQucmVzZXQoKTtcclxuICAgICAgICAgICAgICAgICAgICBtaW5pY2FydC5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1pbmljYXJ0LmluaXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcucmFwYWxhX2RldmljZSAubWluaWNhcnQtYnV0dG9uJykucmVtb3ZlQ2xhc3MoJ2NsaWNrZWQnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobWluaWNhcnR0b3RhbCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcucmFwYWxhX2RldmljZSAubWluaWNhcnQtYnV0dG9uJykudHJpZ2dlcignY2xpY2snKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICAvLyBhZGRzIGEgcHJvZHVjdCB0byB0aGUgbWluaSBjYXJ0XHJcbiAgICAvLyBAcGFyYW1zXHJcbiAgICAvLyBwcm9ncmVzc0ltYWdlU3JjIC0gc291cmNlL3VybCBvZiB0aGUgaW1hZ2UgdG8gc2hvdyB3aGVuIHRoZSBpdGVtXHJcbiAgICAvLyBpcyBiZWluZyBhZGRlZCB0byB0aGUgY2FydFxyXG4gICAgLy8gcG9zdGRhdGEgLSBmb3JtIGRhdGEgY29udGFpbmluZyB0aGUgcHJvZHVjdCBpbmZvcm1hdGlvbiB0byBiZVxyXG4gICAgLy8gYWRkZWQgdG8gbWluaS1jYXJ0XHJcbiAgICAvLyBjYWxsYmFjayAtIGNhbGwgYmFjayBmdW5jdGlvbi9oYW5kbGVyXHJcbiAgICBhZGQ6IGZ1bmN0aW9uIChwcm9ncmVzc0ltYWdlU3JjLCBwb3N0ZGF0YSwgY2FsbGJhY2spIHtcclxuICAgICAgICAvLyBnZXQgdGhlIGRhdGEgb2YgdGhlIGZvcm0gYXMgc2VyaWFsaXplZCBzdHJpbmdcclxuICAgICAgICAvL3ZhciBwb3N0ZGF0YSA9IHBvc3RkYXRhO1xyXG5cclxuICAgICAgICAvLyBnZXQgYnV0dG9uIHJlZmVyZW5jZVxyXG4gICAgICAgIHZhciBhZGRCdXR0b25zID0gW107XHJcblxyXG4gICAgICAgIC8vIHRoZSBidXR0b24gdG8gdXBkYXRlXHJcbiAgICAgICAgdmFyIGFkZEJ1dHRvbiA9IG51bGw7XHJcblxyXG4gICAgICAgIC8vIGl0IGlzIGFuIGFycmF5IG9mIGJ1dHRvbnMsIGJ1dCB3ZSBuZWVkIG9ubHkgb25lIGFsbFxyXG4gICAgICAgIC8vIG90aGVyIGNvbWJpbmF0aW9ucyBhcmUgc3RyYW5nZSBzbyBmYXJcclxuICAgICAgICBpZiAoYWRkQnV0dG9ucy5sZW5ndGggPT0gMSkge1xyXG4gICAgICAgICAgICBhZGRCdXR0b24gPSBhZGRCdXR0b25zWzBdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHByZXZpb3VzSW1hZ2VTcmMgPSBudWxsO1xyXG5cclxuICAgICAgICAvLyBzaG93IHByb2dyZXNzIGluZGljYXRvclxyXG4gICAgICAgIGlmIChhZGRCdXR0b24gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBwcmV2aW91c0ltYWdlU3JjID0gYWRkQnV0dG9uLnNyYztcclxuICAgICAgICAgICAgYWRkQnV0dG9uLnNyYyA9IHByb2dyZXNzSW1hZ2VTcmM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBoYW5kbGVzIHN1Y2Nlc3NmdWwgYWRkIHRvIGNhcnRcclxuICAgICAgICB2YXIgaGFuZGxlckZ1bmMgPSBmdW5jdGlvbiAocmVxKSB7XHJcbiAgICAgICAgICAgIC8vIGhpZGUgcHJvZ3Jlc3MgaW5kaWNhdG9yXHJcbiAgICAgICAgICAgIGlmIChhZGRCdXR0b24gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgYWRkQnV0dG9uLnNyYyA9IHByZXZpb3VzSW1hZ2VTcmM7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIHJlcGxhY2UgdGhlIGNvbnRlbnRcclxuICAgICAgICAgICAgalF1ZXJ5KCcjbWluaWNhcnQnKS5odG1sKHJlcSk7XHJcblxyXG4gICAgICAgICAgICAvLyBiaW5kIGFsbCB0aGUgZXZlbnRzXHJcbiAgICAgICAgICAgIG1pbmljYXJ0LmluaXQoKTtcclxuICAgICAgICAgICAgaWYgKCQoJy5taW5pLWNhcnQtcHJvZHVjdCcpLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgICAgICQoJy5jaGVja291dG1pbmljYXJ0Jykuc2xpbXNjcm9sbCh7XHJcbiAgICAgICAgICAgICAgICAgICAgcmFpbFZpc2libGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgYWx3YXlzVmlzaWJsZTogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAkKCcubWluaWNhcnR0YWJsZScpLmZpbmQoJ3RoZWFkJykuZmlyc3QoKS5hZGRDbGFzcygndGhlYWRmaXhlZFRvcCcpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmNoZWNrb3V0bWluaWNhcnQnKS5maW5kKCcuY2FydG9yZGVydG90YWxzJykucmVtb3ZlQ2xhc3MoJ2NhcnR0b3RhbHMnKTtcclxuICAgICAgICAgICAgICAgICQoJy5jaGVja291dG1pbmljYXJ0JykuZmluZCgnLm1pbmljYXJ0dGFibGUnKS5yZW1vdmVDbGFzcygnbWluaXdpdGhvdXRTY3JvbGwnKTtcclxuICAgICAgICAgICAgICAgICQoJy5taW5pY2FydGNvbnRlbnQnKS5maW5kKCcubWluaWNhcnR0YWJsZWhlYWRlcicpLnJlbW92ZUNsYXNzKCdtaW5pd2l0aG91dFNjcm9sbGhlYWQnKTtcclxuICAgICAgICAgICAgICAgICQoJy5taW5pY2FydHRhYmxlaGVhZGVyJykuY3NzKCdib3JkZXItYm90dG9tJywgJzFweCBzb2xpZCAjY2NjJyk7XHJcblxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJCgnLm1pbmljYXJ0dGFibGUnKS5maW5kKCcudGhlYWRmaXhlZFRvcCcpLnJlbW92ZUNsYXNzKCd0aGVhZGZpeGVkVG9wJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcubWluaWNhcnR0YWJsZScpLmZpbmQoJy5maXhlZFRvcCcpLnJlbW92ZUNsYXNzKCdmaXhlZFRvcCcpO1xyXG4gICAgICAgICAgICAgICAgJCgnLm1pbmljYXJ0JykuZmluZCgnLmNhcnRvcmRlcnRvdGFscycpLmFkZENsYXNzKCdjYXJ0dG90YWxzJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcuY2hlY2tvdXRtaW5pY2FydCcpLmZpbmQoJy5taW5pY2FydHRhYmxlJykuYWRkQ2xhc3MoJ21pbml3aXRob3V0U2Nyb2xsJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcubWluaWNhcnRjb250ZW50JykuZmluZCgnLm1pbmljYXJ0dGFibGVoZWFkZXInKS5hZGRDbGFzcygnbWluaXdpdGhvdXRTY3JvbGxoZWFkJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcubWluaWNhcnR0YWJsZWhlYWRlcicpLmNzcygnYm9yZGVyLWJvdHRvbScsICcxcHggc29saWQgI2NjYycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICQoJy5taW5pY2FydHRhYmxlIC5taW5pLWNhcnQtcHJvZHVjdDpsYXN0LWNoaWxkJykuZmluZCgnLm1pbmktY2FydC1wcm9kdWN0JykuY3NzKCdib3JkZXInLCAnMHB4Jyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoJCgnYm9keScpLmhhc0NsYXNzKCdyYXBhbGFfZGV2aWNlJykpIHtcclxuICAgICAgICAgICAgICAgICQoJy5jaGVja291dG1pbmljYXJ0JykuZmluZCgnLm1pbmljYXJ0dGFibGUnKS5yZW1vdmVDbGFzcygnbWluaXdpdGhvdXRTY3JvbGwnKTtcclxuICAgICAgICAgICAgICAgIC8vICQoXCIubWluaWNhcnR0YWJsZSAudHJfcm90YXRpb246bGFzdC1jaGlsZFwiKS5maW5kKCcubWluaXJvdycpLmNzcygnYm9yZGVyJywnMXB4Jyk7XHJcbiAgICAgICAgICAgICAgICAkKCcubWluaWNhcnR0YWJsZScpLmZpbmQoJ3RoZWFkJykuZmlyc3QoKS5hZGRDbGFzcygndGhlYWRmaXhlZFRvcCcpO1xyXG4gICAgICAgICAgICAgICAgJCgnLm1pbmljYXJ0dGFibGUgLm1pbmktY2FydC1wcm9kdWN0Omxhc3QtY2hpbGQnKS5maW5kKCcubWluaS1jYXJ0LXByb2R1Y3QnKS5jc3MoJ2JvcmRlcicsICcwcHgnKTtcclxuICAgICAgICAgICAgICAgICQoJy5taW5pY2FydHRhYmxlaGVhZGVyJykuY3NzKCdib3JkZXItYm90dG9tJywgJzFweCBzb2xpZCAjY2NjJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChtaW5pY2FydC5zdXBwcmVzc1NsaWRlRG93biAmJiBtaW5pY2FydC5zdXBwcmVzc1NsaWRlRG93bigpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBkbyBub3RoaW5nXHJcbiAgICAgICAgICAgICAgICAvLyB0aGUgaG9vayAnTWluaUNhcnQuc3VwcHJlc3NTbGlkZURvd24oKScgc2hvdWxkIGhhdmVcclxuICAgICAgICAgICAgICAgIC8vIGRvbmUgdGhlIHJlZnJlc2hcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG1pbmljYXJ0LnNsaWRlKCk7XHJcbiAgICAgICAgICAgICAgICBtaW5pY2FydC5zZXRtaW5pY2FyaGVpZ2h0KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICQoJyNwZHBNYWluIC5hZGR0b2NhcnRjb25maXJtLXRvb2x0aXAnKS5mYWRlSW4oNDAwKS5zaG93KClcclxuICAgICAgICAgICAgICAgIC5kZWxheSgxNTAwKS5mYWRlT3V0KDQwMCk7XHJcbiAgICAgICAgICAgIC8vIGZpcmUgdGhlIEJvbnVzRGlzY291bnRMaW5lSXRlbUNoZWNrIGV2ZW50IHNvIHdlIGNhbiBjaGVja1xyXG4gICAgICAgICAgICAvLyBpZiB0aGVyZSBpcyBhIGJvbnVzIGRpc2NvdW50IGxpbmUgaXRlbVxyXG4gICAgICAgICAgICAvKmVzbGludC1kaXNhYmxlICovXHJcbiAgICAgICAgICAgIGpRdWVyeShkb2N1bWVudCkudHJpZ2dlcihqUXVlcnkuRXZlbnQoJ0JvbnVzRGlzY291bnRMaW5lSXRlbUNoZWNrJykpO1xyXG4gICAgICAgICAgICAvKmVzbGludC1lbmFibGUgKi9cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBoYW5kbGVzIGFkZCB0byBjYXJ0IGVycm9yXHJcbiAgICAgICAgdmFyIGVyckZ1bmMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIGhpZGUgcHJvZ3Jlc3MgaW5kaWNhdG9yXHJcbiAgICAgICAgICAgIGlmIChhZGRCdXR0b24gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgYWRkQnV0dG9uLnNyYyA9IHByZXZpb3VzSW1hZ2VTcmM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBjbG9zZXMgYSBwcmV2aW91cyBtaW5pIGNhcnRcclxuICAgICAgICBtaW5pY2FydC5jbG9zZSgpO1xyXG5cclxuICAgICAgICAvLyBhZGQgdGhlIHByb2R1Y3RcclxuICAgICAgICBqUXVlcnkuYWpheCh7XHJcbiAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcclxuICAgICAgICAgICAgdXJsOiBtaW5pY2FydC51cmwsXHJcbiAgICAgICAgICAgIGNhY2hlOiB0cnVlLFxyXG4gICAgICAgICAgICBkYXRhOiBwb3N0ZGF0YSxcclxuICAgICAgICAgICAgc3VjY2VzczogaGFuZGxlckZ1bmMsXHJcbiAgICAgICAgICAgIGVycm9yOiBlcnJGdW5jXHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIGNsb3NlcyB0aGUgbWluaSBjYXJ0IHdpdGggZ2l2ZW4gZGVsYXlcclxuICAgIGNsb3NlOiBmdW5jdGlvbiAoZGVsYXkpIHtcclxuICAgICAgICBpZiAobWluaWNhcnQudGltZXIgIT0gbnVsbCB8fCBkZWxheSA9PSAwKSB7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChtaW5pY2FydC50aW1lcik7XHJcbiAgICAgICAgICAgIG1pbmljYXJ0LnRpbWVyID0gbnVsbDtcclxuICAgICAgICAgICAgalF1ZXJ5KCcubWluaWNhcnRjb250ZW50JykuZmFkZU91dCgxMDAwKTtcclxuICAgICAgICAgICAgLy8gaGlkZSB3aXRoIFwic2xpZGVcIiBjYXVzZXMgdG8gZmlyZSBtb3VzZSBlbnRlci9sZWF2ZSBldmVudHNcclxuICAgICAgICAgICAgLy8gc29tZXRpbWVzIGluZmluaXRlbHkgdGh1cyBjaGFuZ2VkIGl0IHRvIGZhZGVPdXRcclxuICAgICAgICAgICAgLy8gYWRkIHRoZSBvcGVuIGNsYXNzIHRvIHRoZSB0b3RhbFxyXG4gICAgICAgICAgICBqUXVlcnkoJy5taW5pY2FydCAubWluaWNhcnR0b3RhbCcpLnJlbW92ZUNsYXNzKCdvcGVuJyk7XHJcbiAgICAgICAgICAgIGpRdWVyeSgnLm1pbmljYXJ0Y29udGVudCAubWluaWNhcnRjbG9zZScpLnVuYmluZCgnY2xpY2snKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IG1pbmljYXJ0O1xyXG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG52YXIgdXRpbCA9IHJlcXVpcmUoJy4vdXRpbCcpO1xyXG5cclxudmFyIHBhZ2UgPSB7XHJcbiAgICB0aXRsZTogJycsXHJcbiAgICB0eXBlOiAnJyxcclxuICAgIHBhcmFtczogdXRpbC5nZXRRdWVyeVN0cmluZ1BhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoLnN1YnN0cigxKSksXHJcbiAgICByZWRpcmVjdDogZnVuY3Rpb24gKG5ld1VSTCkge1xyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IG5ld1VSTDtcclxuICAgICAgICB9LCAwKTtcclxuICAgIH0sXHJcbiAgICByZWZyZXNoOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5hc3NpZ24od2luZG93LmxvY2F0aW9uLmhyZWYpO1xyXG4gICAgICAgIH0sIDUwMCk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHBhZ2U7XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuXHJcbnZhciBnaWZ0Y2VydCA9IHJlcXVpcmUoJy4uL2dpZnRjZXJ0JyksXHJcbiAgICB0b29sdGlwID0gcmVxdWlyZSgnLi4vdG9vbHRpcCcpLFxyXG4gICAgdXRpbCA9IHJlcXVpcmUoJy4uL3V0aWwnKSxcclxuICAgIGRpYWxvZyA9IHJlcXVpcmUoJy4uL2RpYWxvZycpLFxyXG4gICAgcGFnZSA9IHJlcXVpcmUoJy4uL3BhZ2UnKSxcclxuICAgIHZhbGlkYXRvciA9IHJlcXVpcmUoJy4uL3ZhbGlkYXRvcicpO1xyXG5cclxuLyoqXHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAZGVzY3JpcHRpb24gSW5pdGlhbGl6ZXMgdGhlIGV2ZW50cyBvbiB0aGUgYWRkcmVzcyBmb3JtIChhcHBseSwgY2FuY2VsLCBkZWxldGUpXHJcbiAqIEBwYXJhbSB7RWxlbWVudH0gZm9ybSBUaGUgZm9ybSB3aGljaCB3aWxsIGJlIGluaXRpYWxpemVkXHJcbiAqL1xyXG5mdW5jdGlvbiBpbml0aWFsaXplQWRkcmVzc0Zvcm0oKSB7XHJcbiAgICB2YXIgJGZvcm0gPSAkKCcjZWRpdC1hZGRyZXNzLWZvcm0nKTtcclxuXHJcbiAgICAkZm9ybS5maW5kKCdpbnB1dFtuYW1lPVwiZm9ybWF0XCJdJykucmVtb3ZlKCk7XHJcbiAgICB0b29sdGlwLmluaXQoKTtcclxuICAgIC8vJChcIjxpbnB1dC8+XCIpLmF0dHIoe3R5cGU6XCJoaWRkZW5cIiwgbmFtZTpcImZvcm1hdFwiLCB2YWx1ZTpcImFqYXhcIn0pLmFwcGVuZFRvKGZvcm0pO1xyXG5cclxuICAgICRmb3JtLm9uKCdjbGljaycsICcuYXBwbHktYnV0dG9uJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgaWYgKCEkZm9ybS52YWxpZCgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHVybCA9IHV0aWwuYXBwZW5kUGFyYW1Ub1VSTCgkZm9ybS5hdHRyKCdhY3Rpb24nKSwgJ2Zvcm1hdCcsICdhamF4Jyk7XHJcbiAgICAgICAgdmFyIGFwcGx5TmFtZSA9ICRmb3JtLmZpbmQoJy5hcHBseS1idXR0b24nKS5hdHRyKCduYW1lJyk7XHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICBkYXRhOiAkZm9ybS5zZXJpYWxpemUoKSArICcmJyArIGFwcGx5TmFtZSArICc9eCcsXHJcbiAgICAgICAgICAgIHR5cGU6ICdQT1NUJ1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgJC5hamF4KG9wdGlvbnMpLmRvbmUoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZihkYXRhKSAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICBkaWFsb2cuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICBwYWdlLnJlZnJlc2goKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmFsZXJ0KGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJCgnI2RpYWxvZy1jb250YWluZXInKS5odG1sKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgYWNjb3VudC5pbml0KCk7XHJcbiAgICAgICAgICAgICAgICB0b29sdGlwLmluaXQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSlcclxuICAgICAgICAub24oJ2NsaWNrJywgJy5jYW5jZWwtYnV0dG9uLCAuY2xvc2UtYnV0dG9uJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBkaWFsb2cuY2xvc2UoKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5vbignY2xpY2snLCAnLmRlbGV0ZS1idXR0b24nLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGlmICh3aW5kb3cuY29uZmlybShTdHJpbmcuZm9ybWF0KFJlc291cmNlcy5DT05GSVJNX0RFTEVURSwgUmVzb3VyY2VzLlRJVExFX0FERFJFU1MpKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHVybCA9IHV0aWwuYXBwZW5kUGFyYW1zVG9VcmwoVXJscy5kZWxldGVBZGRyZXNzLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgQWRkcmVzc0lEOiAkZm9ybS5maW5kKCcjYWRkcmVzc2lkJykudmFsKCksXHJcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiAnYWpheCdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nXHJcbiAgICAgICAgICAgICAgICB9KS5kb25lKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuc3RhdHVzLnRvTG93ZXJDYXNlKCkgPT09ICdvaycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlhbG9nLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2UucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS5tZXNzYWdlLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmFsZXJ0KGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaWFsb2cuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFnZS5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIGlmICgkKCcubG9nZXJyb3I6dmlzaWJsZScpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAkKCcuYWNjb3VudC1sb2dzIC5yZXR1cm5pbmdjdXN0b21lcnMnKS5maW5kKCcuYWNjb3VudGVtYWlsJykuYWRkQ2xhc3MoJ2Vycm9yY2xpZW50Jyk7XHJcbiAgICAgICAgJCgnLmFjY291bnQtbG9ncyAubG9naW5jdXN0b21lcnMgLmxvZ2luX3Bhc3N3b3JkJykuYWRkQ2xhc3MoJ2Vycm9yY2xpZW50Jyk7XHJcbiAgICAgICAgLy8kKFwiLnB0X2FjY291bnQgLndyYXBwZXIgLmFjY291bnQtc2VjdGlvbiAucmV0dXJuaW5nY3VzdG9tZXJzIC52YWx1ZSBcIikuY3NzKFwibWFyZ2luLWJvdHRvbVwiLCBcIjBcIik7XHJcbiAgICB9XHJcbiAgICAkKCcucmVnaXN0cmF0aW9uLWJ1dHRvbicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgbWFza2hlaWdodCA9ICQoJy5jcmVhdGVhbi1hY2NvdW50IC5mb3Jtc3VibWl0JykucGFyZW50KCdkaXYnKS5vdXRlckhlaWdodCgpO1xyXG4gICAgICAgIHZhciByZWFsRm9ybSA9IGpRdWVyeSh0aGlzKS5jbG9zZXN0KCdmb3JtJyk7XHJcbiAgICAgICAgaWYgKCFyZWFsRm9ybS52YWxpZCgpKSB7XHJcbiAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm0tcm93JykuYWRkQ2xhc3MoJ2lucHV0bGFiZWwnKTtcclxuICAgICAgICAgICAgcmVhbEZvcm0uZmluZCgnLm1heC1sZW5ndGgtZXJyb3InKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmNsb3Nlc3QoJy52YWx1ZScpLmZpbmQoJ2lucHV0JykudmFsKCkubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlYWxGb3JtLmZpbmQoJy5tYXgtbGVuZ3RoLWVycm9yJykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJCgnLnJlZ2lzdHJhdGlvbi1idXR0b24gc3Bhbi5sb2FkSW1hZ2UnKS5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKTtcclxuICAgICAgICAgICAgJCgnLmNyZWF0ZWFuLWFjY291bnQgLmZvcm1zdWJtaXQnKS5jc3MoeydoZWlnaHQnOiBtYXNraGVpZ2h0ICsgJ3B4JywgJ2Rpc3BsYXknOiAnYmxvY2snfSk7XHJcblxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgaWYgKCQoJy5leGlzdGluZ19yZWdpc3Rlcjp2aXNpYmxlJykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICQoJy5jcmVhdGVhbi1hY2NvdW50IC5yZWdpc3RyYXRpb24nKS5maW5kKCcuYWNjb3VudGVtYWlsJykuYWRkQ2xhc3MoJ2Vycm9yY2xpZW50Jyk7XHJcbiAgICAgICAgJCgnLmNyZWF0ZWFuLWFjY291bnQgLnJlZ2lzdHJhdGlvbicpLmZpbmQoJy5mb3JtZmllbGRfZW1haWwnKS5maW5kKCcubGFiZWx0ZXh0JykuYWRkQ2xhc3MoJ2lucHV0bGFiZWwnKTtcclxuICAgICAgICAkKCcuY3JlYXRlYW4tYWNjb3VudCAucmVnaXN0cmF0aW9uJykuZmluZCgnLmZvcm1maWVsZF9lbWFpbCcpLmZpbmQoJy5yZXF1aXJlZGluZGljYXRvcicpLmFkZENsYXNzKCdpbnB1dGxhYmVsJyk7XHJcbiAgICAgICAgaWYgKCQoJy5yZWdpc3RyYXRpb24nKS5maW5kKCdpbnB1dC5yZXF1aXJlZCcpLnZhbCgpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgJCgnLnJlZ2lzdHJhdGlvbicpLmZpbmQoJy5jbGVhcmJ1dHRvbicpLnNob3coKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoJCgnLmFjY291bnQtZW1haWwuZXJyLmxvZ19lcnJvcjp2aXNpYmxlJykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICQoJy5yZXR1cm5pbmdjdXN0b21lcnMnKS5maW5kKCcuZm9ybWZpZWxkX2VtYWlsJykuZmluZCgnLmxhYmVsdGV4dCcpLmFkZENsYXNzKCdpbnB1dGxhYmVsJyk7XHJcbiAgICAgICAgJCgnLnJldHVybmluZ2N1c3RvbWVycycpLmZpbmQoJy5mb3JtZmllbGRfZW1haWwnKS5maW5kKCcucmVxdWlyZWRpbmRpY2F0b3InKS5hZGRDbGFzcygnaW5wdXRsYWJlbCcpO1xyXG4gICAgfVxyXG4gICAgJCgnLnNpZ25pbmJ0bicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgbWFza2hlaWdodCA9ICQoJy5hY2NvdW50LWxvZ3MgLmZvcm1zdWJtaXQnKS5wYXJlbnQoJ2RpdicpLm91dGVySGVpZ2h0KCk7XHJcbiAgICAgICAgdmFyIG1hc2toZWlnaHR3aXNobGlzdCA9ICQoJy53aXNoLWxvZ3MgLmZvcm1zdWJtaXQnKS5wYXJlbnQoJ2RpdicpLm91dGVySGVpZ2h0KCk7XHJcbiAgICAgICAgdmFyIHJlYWxGb3JtID0galF1ZXJ5KHRoaXMpLmNsb3Nlc3QoJ2Zvcm0nKTtcclxuICAgICAgICBpZiAoIXJlYWxGb3JtLnZhbGlkKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWFjdGlvbnMnKS5hZGRDbGFzcygnbG9hZEltYWdlJyk7XHJcbiAgICAgICAgICAgICQoJy5zaWduaW5idG4gc3Bhbi5sb2FkSW1hZ2UnKS5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKTtcclxuICAgICAgICAgICAgJCgnLmFjY291bnQtbG9ncyAuZm9ybXN1Ym1pdCcpLmNzcyh7J2hlaWdodCc6IG1hc2toZWlnaHQgKyAncHgnLCAnZGlzcGxheSc6ICdibG9jayd9KTtcclxuICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcud2lzaC1sb2dzJykuZmluZCgnLmZvcm1zdWJtaXQnKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgJ2hlaWdodCc6IG1hc2toZWlnaHR3aXNobGlzdCArICdweCcsXHJcbiAgICAgICAgICAgICAgICAnZGlzcGxheSc6ICdibG9jaydcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBpZiAoJCgnLnVpLWxvZ2luIC5oZWFkZXItZm9yZ290LXB3ZCcpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAkKHRoaXMpLmZpbmQoJ2lucHV0LnJlcXVpcmVkJykuYmluZCgna2V5ZG93biBrZXl1cCBmb2N1c2luIGZvY3Vzb3V0IGtleXByZXNzJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvL2Uuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLnZhbHVlJykuZmluZCgnZXJyb3JjbGllbnQnKS5yZW1vdmUoKTtcclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJCgnLnVpLWxvZ2luIGhlYWRlci1mb3Jnb3QtcHdkJykuZmluZCgnaW5wdXQucmVxdWlyZWQnKS5iaW5kKCdmb2N1c2luJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy52YWx1ZScpLmZpbmQoJ2Vycm9yY2xpZW50JykucmVtb3ZlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAkKCcuc2FtcGxlLXNlY3Rpb24nKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCEkKHRoaXMpLmZpbmQoJy5zYW1wbGVfbWFpbF9tYWluJykuaXMoJzp2aXNpYmxlJykpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuc2FtcGxlX21haWxfbWFpbicpLnNsaWRlRG93big1MDApO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgdmFsaWRhdG9yLmluaXQoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBwcml2YXRlXHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAZGVzY3JpcHRpb24gVG9nZ2xlcyB0aGUgbGlzdCBvZiBPcmRlcnNcclxuICovXHJcbmZ1bmN0aW9uIHRvZ2dsZUZ1bGxPcmRlcigpIHtcclxuICAgICQoJy5vcmRlci1pdGVtcycpXHJcbiAgICAgICAgLmZpbmQoJ2xpLmhpZGRlbjpmaXJzdCcpXHJcbiAgICAgICAgLnByZXYoJ2xpJylcclxuICAgICAgICAuYXBwZW5kKCc8YSBjbGFzcz1cInRvZ2dsZVwiPlZpZXcgQWxsPC9hPicpXHJcbiAgICAgICAgLmNoaWxkcmVuKCcudG9nZ2xlJylcclxuICAgICAgICAuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLnNpYmxpbmdzKCdsaS5oaWRkZW4nKS5zaG93KCk7XHJcbiAgICAgICAgICAgICQodGhpcykucmVtb3ZlKCk7XHJcbiAgICAgICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAcHJpdmF0ZVxyXG4gKiBAZnVuY3Rpb25cclxuICogQGRlc2NyaXB0aW9uIEJpbmRzIHRoZSBldmVudHMgb24gdGhlIGFkZHJlc3MgZm9ybSAoZWRpdCwgY3JlYXRlLCBkZWxldGUpXHJcbiAqL1xyXG5mdW5jdGlvbiBpbml0QWRkcmVzc0V2ZW50cygpIHtcclxuICAgIHZhciBhZGRyZXNzZXMgPSAkKCcjYWRkcmVzc2VzJyk7XHJcbiAgICBpZiAoYWRkcmVzc2VzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBhZGRyZXNzZXMub24oJ2NsaWNrJywgJy5hZGRyZXNzLWVkaXQsIC5hZGRyZXNzLWNyZWF0ZScsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGRpYWxvZy5vcGVuKHtcclxuICAgICAgICAgICAgdXJsOiB0aGlzLmhyZWYsXHJcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcclxuICAgICAgICAgICAgICAgIGRpYWxvZ0NsYXNzOiAnYWRkcmVzc2FkZCcsXHJcbiAgICAgICAgICAgICAgICBvcGVuOiBpbml0aWFsaXplQWRkcmVzc0Zvcm1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSkub24oJ2NsaWNrJywgJy5kZWxldGUnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBpZiAod2luZG93LmNvbmZpcm0oU3RyaW5nLmZvcm1hdChSZXNvdXJjZXMuQ09ORklSTV9ERUxFVEUsIFJlc291cmNlcy5USVRMRV9BRERSRVNTKSkpIHtcclxuICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgIHVybDogdXRpbC5hcHBlbmRQYXJhbVRvVVJMKCQodGhpcykuYXR0cignaHJlZicpLCAnZm9ybWF0JywgJ2FqYXgnKSxcclxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbidcclxuICAgICAgICAgICAgfSkuZG9uZShmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuc3RhdHVzLnRvTG93ZXJDYXNlKCkgPT09ICdvaycpIHtcclxuICAgICAgICAgICAgICAgICAgICBwYWdlLnJlZGlyZWN0KFVybHMuYWRkcmVzc2VzTGlzdCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEubWVzc2FnZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmFsZXJ0KGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2UucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBwcml2YXRlXHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAZGVzY3JpcHRpb24gQmluZHMgdGhlIGV2ZW50cyBvZiB0aGUgcGF5bWVudCBtZXRob2RzIGxpc3QgKGRlbGV0ZSBjYXJkKVxyXG4gKi9cclxuZnVuY3Rpb24gaW5pdFBheW1lbnRFdmVudHMoKSB7XHJcbiAgICAkKCcuYWRkLWNhcmQnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBkaWFsb2cub3Blbih7XHJcbiAgICAgICAgICAgIC8vUFJFVkFJTC1BZGRlZCAgdG8gaGFuZGxlIHZhbGlkYXRpb24gaXNzdWVzXHJcbiAgICAgICAgICAgIHVybDogJChlLnRhcmdldCkuYXR0cignaHJlZicpLFxyXG4gICAgICAgICAgICBvcHRpb25zOiB7XHJcbiAgICAgICAgICAgICAgICBkaWFsb2dDbGFzczogJ3BheW1lbnQtc2V0dGluZ3MnLFxyXG4gICAgICAgICAgICAgICAgb3BlbjogaW5pdGlhbGl6ZVBheW1lbnRGb3JtXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIHZhciBwYXltZW50TGlzdCA9ICQoJy5wYXltZW50LWxpc3QnKTtcclxuICAgIGlmIChwYXltZW50TGlzdC5sZW5ndGggPT09IDApIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdXRpbC5zZXREZWxldGVDb25maXJtYXRpb24ocGF5bWVudExpc3QsIFN0cmluZy5mb3JtYXQoUmVzb3VyY2VzLkNPTkZJUk1fREVMRVRFLCBSZXNvdXJjZXMuVElUTEVfQ1JFRElUQ0FSRCkpO1xyXG5cclxuICAgICQoJ2Zvcm1bbmFtZT1cInBheW1lbnQtcmVtb3ZlXCJdJykub24oJ3N1Ym1pdCcsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIC8vIG92ZXJyaWRlIGZvcm0gc3VibWlzc2lvbiBpbiBvcmRlciB0byBwcmV2ZW50IHJlZnJlc2ggaXNzdWVzXHJcbiAgICAgICAgdmFyIGJ1dHRvbiA9ICQodGhpcykuZmluZCgnLmRlbGV0ZScpO1xyXG4gICAgICAgICQoJzxpbnB1dC8+JykuYXR0cih7XHJcbiAgICAgICAgICAgIHR5cGU6ICdoaWRkZW4nLFxyXG4gICAgICAgICAgICBuYW1lOiBidXR0b24uYXR0cignbmFtZScpLFxyXG4gICAgICAgICAgICB2YWx1ZTogYnV0dG9uLmF0dHIoJ3ZhbHVlJykgfHwgJ2RlbGV0ZSBjYXJkJ1xyXG4gICAgICAgIH0pLmFwcGVuZFRvKCQodGhpcykpO1xyXG4gICAgICAgIHZhciBkYXRhID0gJCh0aGlzKS5zZXJpYWxpemUoKTtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB0eXBlOiAnUE9TVCcsXHJcbiAgICAgICAgICAgIHVybDogJCh0aGlzKS5hdHRyKCdhY3Rpb24nKSxcclxuICAgICAgICAgICAgZGF0YTogZGF0YVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5kb25lKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHBhZ2UucmVkaXJlY3QoVXJscy5wYXltZW50c0xpc3QpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpbml0aWFsaXplUGF5bWVudEZvcm0oKSB7XHJcblxyXG4gICAgJCgnI0NyZWRpdENhcmRGb3JtJykub24oJ2NsaWNrJywgJy5jYW5jZWwtYnV0dG9uJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgZGlhbG9nLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAcHJpdmF0ZVxyXG4gKiBAZnVuY3Rpb25cclxuICogQGRlc2NyaXB0aW9uIGluaXQgZXZlbnRzIGZvciB0aGUgbG9naW5QYWdlXHJcbiAqL1xyXG5mdW5jdGlvbiBpbml0TG9naW5QYWdlKCkge1xyXG4gICAgLy9vLWF1dGggYmluZGluZyBmb3Igd2hpY2ggaWNvbiBpcyBjbGlja2VkXHJcbiAgICAkKCcub0F1dGhJY29uJykuYmluZCgnY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnI09BdXRoUHJvdmlkZXInKS52YWwodGhpcy5pZCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvL3RvZ2dsZSB0aGUgdmFsdWUgb2YgdGhlIHJlbWVtYmVybWUgY2hlY2tib3hcclxuICAgICQoJyNkd2ZybV9sb2dpbl9yZW1lbWJlcm1lJykuYmluZCgnY2hhbmdlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICgkKCcjZHdmcm1fbG9naW5fcmVtZW1iZXJtZScpLmF0dHIoJ2NoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAkKCcjcmVtZW1iZXJtZScpLnZhbCgndHJ1ZScpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICQoJyNyZW1lbWJlcm1lJykudmFsKCdmYWxzZScpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogQHByaXZhdGVcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBkZXNjcmlwdGlvbiBCaW5kcyB0aGUgZXZlbnRzIG9mIHRoZSBvcmRlciwgYWRkcmVzcyBhbmQgcGF5bWVudCBwYWdlc1xyXG4gKi9cclxuZnVuY3Rpb24gaW5pdGlhbGl6ZUV2ZW50cygpIHtcclxuICAgIGluaXRpYWxpemVBZGRyZXNzRm9ybSgpOyAvLyBKSVJBIFBSRVYtNjM6ICdBZGQgQWRkcmVzcycgb3IgJ0VkaXQgYWRkcmVzcycgb3ZlcmxheSBjaGFuZ2luZyB0byBwYWdlIGFmdGVyIGNsaWNrIG9uIEFwcGx5IGJ1dHRvbix3aGVuIHRoZXJlIGlzIGFuIGVycm9yIG1lc3NhZ2Ugb24gb3ZlcmxheS5cclxuICAgIHRvZ2dsZUZ1bGxPcmRlcigpO1xyXG4gICAgaW5pdEFkZHJlc3NFdmVudHMoKTtcclxuICAgIGluaXRQYXltZW50RXZlbnRzKCk7XHJcbiAgICBpbml0TG9naW5QYWdlKCk7XHJcbiAgICBpZiAoJCgnLnNlcnZlci1lcnJvcicpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAkKHdpbmRvdykuc2Nyb2xsVG9wKCQoJy5zZXJ2ZXItZXJyb3InKS5vZmZzZXQoKS50b3ApO1xyXG4gICAgfVxyXG4gICAgJCgnYm9keScpLm9uKCdjaGFuZ2UgaW5wdXQnLCAnLmRlc2t0b3AtYWNjZXNzY29kZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgY3VyVmFsdWUgPSAkKHRoaXMpLnZhbCgpO1xyXG4gICAgICAgICQoJ2JvZHknKS5maW5kKCcubW9iaWxlLWFjY2Vzc2NvZGUnKS52YWwoY3VyVmFsdWUpO1xyXG4gICAgICAgICQoJ2JvZHknKS5maW5kKCcubW9iaWxlLWFjY2Vzc2NvZGUnKS5hdHRyKCd2YWx1ZScsIGN1clZhbHVlKTtcclxuICAgIH0pO1xyXG4gICAgJCgnYm9keScpLm9uKCdjaGFuZ2UgaW5wdXQnLCAnLm1vYmlsZS1hY2Nlc3Njb2RlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBjdXJWYWx1ZSA9ICQodGhpcykudmFsKCk7XHJcbiAgICAgICAgJCgnYm9keScpLmZpbmQoJy5kZXNrdG9wLWFjY2Vzc2NvZGUnKS52YWwoY3VyVmFsdWUpO1xyXG4gICAgICAgICQoJ2JvZHknKS5maW5kKCcuZGVza3RvcC1hY2Nlc3Njb2RlJykuYXR0cigndmFsdWUnLCBjdXJWYWx1ZSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxudmFyIGFjY291bnQgPSB7XHJcbiAgICBpbml0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaW5pdGlhbGl6ZUV2ZW50cygpO1xyXG4gICAgICAgIGdpZnRjZXJ0LmluaXQoKTtcclxuICAgIH0sXHJcbiAgICBpbml0Q2FydExvZ2luOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaW5pdExvZ2luUGFnZSgpO1xyXG4gICAgfVxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBhY2NvdW50O1xyXG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG4vKipcclxuICogQGZ1bmN0aW9uIEluaXRpYWxpemVzIHRoZSBwYWdlIGV2ZW50cyBkZXBlbmRpbmcgb24gdGhlIGNoZWNrb3V0IHN0YWdlIChzaGlwcGluZy9iaWxsaW5nKVxyXG4gKi9cclxuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyICRibG9nTGVmdE5hdiA9ICQoJyNibG9nLWxlZnQtbmF2JyksXHJcbiAgICAgICAgJGJsb2dTaG93TmF2ID0gJCgnI2Jsb2ctbmF2LXNob3cnKTtcclxuXHJcbiAgICAkYmxvZ0xlZnROYXYub24oJ2NsaWNrJywgJy5hcnJvdy1saWdodC1jb250YWluZXInLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcudG9nZ2xlLWJsb2cnKS50b2dnbGVDbGFzcygnZXhwYW5kZWQnKTtcclxuICAgIH0pO1xyXG5cclxuICAgICRibG9nU2hvd05hdi5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgJGJsb2dMZWZ0TmF2LnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgIH0pO1xyXG4gICAgJGJsb2dMZWZ0TmF2LmZpbmQoJy5ibG9nLW5hdi1sZXZlbC0yIGxpJykuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcudG9nZ2xlLWJsb2cnKS5hZGRDbGFzcygnZXhwYW5kZWQnKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufTtcclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxudmFyIGFjY291bnQgPSByZXF1aXJlKCcuL2FjY291bnQnKSxcclxuICAgIGJvbnVzUHJvZHVjdHNWaWV3ID0gcmVxdWlyZSgnLi4vYm9udXMtcHJvZHVjdHMtdmlldycpLFxyXG4gICAgcXVpY2t2aWV3ID0gcmVxdWlyZSgnLi4vcXVpY2t2aWV3JyksXHJcbiAgICB2YWxpZGF0b3IgPSByZXF1aXJlKCcuLi92YWxpZGF0b3InKSxcclxuICAgIGNhcnRTdG9yZUludmVudG9yeSA9IHJlcXVpcmUoJy4uL3N0b3JlaW52ZW50b3J5L2NhcnQnKTtcclxuXHJcbi8qKlxyXG4gKiBAcHJpdmF0ZVxyXG4gKiBAZnVuY3Rpb25cclxuICogQGRlc2NyaXB0aW9uIEJpbmRzIGV2ZW50cyB0byB0aGUgY2FydCBwYWdlIChlZGl0IGl0ZW0ncyBkZXRhaWxzLCBib251cyBpdGVtJ3MgYWN0aW9ucywgY291cG9uIGNvZGUgZW50cnkpXHJcbiAqL1xyXG5cclxuZnVuY3Rpb24gaW5pdFF1aWNrVmlld3JlY29tbUJ1dHRvbnMoKSB7XHJcbiAgICB2YXIgJHF2QnV0dG9uID0gJCgnLnB0X2NhcnQgLnByb2R1Y3R0aWxlICNxdWlja3ZpZXdidXR0b24nKTtcclxuICAgIHZhciAkbGluayA9ICQodGhpcykuZmluZCgnLnRodW1iLWxpbmsnKTtcclxuICAgICRxdkJ1dHRvbi5hdHRyKHtcclxuICAgICAgICAnaHJlZic6ICRsaW5rLmF0dHIoJ2hyZWYnKSxcclxuICAgICAgICAndGl0bGUnOiAkbGluay5hdHRyKCd0aXRsZScpXHJcbiAgICB9KS5hcHBlbmRUbyh0aGlzKTtcclxuICAgICRxdkJ1dHRvbi5vZmYoJ2NsaWNrJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgcXVpY2t2aWV3LnNob3coe1xyXG4gICAgICAgICAgICB1cmw6ICQodGhpcykuYXR0cignaHJlZicpLnNwbGl0KCcjJylbMF0sIC8vUFJFViBKSVJBIFBSRVYtMjU1IDpQTFA6IE9uIENsaWNrIFF1aWNrIHZpZXcgbmF2aWdhdGluZyB0byBhIHdyb25nIHBhZ2Ugd2hlbiB1c2VyIGZpcnN0IGNoYW5nZXMgdGhlIHN3YXRjaGVzLiBUYWtpbmcgb25seSBocmVmLlxyXG4gICAgICAgICAgICBzb3VyY2U6ICdxdWlja3ZpZXcnXHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaW5pdFF1aWNrVmlld2VkaXRCdXR0b25zKCkge1xyXG4gICAgdmFyICRxdkJ1dHRvbiA9ICQoJy5wdF9jYXJ0ICB0YWJsZSNjYXJ0LXRhYmxlIHRkLml0ZW10b3RhbGNvbHVtbi5jYXJ0YWN0aW9ucyAuaXRlbS1lZGl0LWRldGFpbHMgI3F1aWNrdmlld2J1dHRvbicpO1xyXG4gICAgdmFyICRsaW5rID0gJCh0aGlzKTtcclxuICAgICRxdkJ1dHRvbi5hdHRyKHtcclxuICAgICAgICAnaHJlZic6ICRsaW5rLmF0dHIoJ2hyZWYnKSxcclxuICAgICAgICAndGl0bGUnOiAkbGluay5hdHRyKCd0aXRsZScpXHJcbiAgICB9KS5hcHBlbmRUbyh0aGlzKTtcclxuICAgICRxdkJ1dHRvbi5vZmYoJ2NsaWNrJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgcXVpY2t2aWV3LnNob3coe1xyXG4gICAgICAgICAgICB1cmw6ICQodGhpcykuYXR0cignaHJlZicpLnNwbGl0KCcjJylbMF0sIC8vUFJFViBKSVJBIFBSRVYtMjU1IDpQTFA6IE9uIENsaWNrIFF1aWNrIHZpZXcgbmF2aWdhdGluZyB0byBhIHdyb25nIHBhZ2Ugd2hlbiB1c2VyIGZpcnN0IGNoYW5nZXMgdGhlIHN3YXRjaGVzLiBUYWtpbmcgb25seSBocmVmLlxyXG4gICAgICAgICAgICBzb3VyY2U6ICdxdWlja3ZpZXcnXHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaW5pdGlhbGl6ZUV2ZW50cygpIHtcclxuICAgIHF1aWNrdmlldy5pbml0KCk7XHJcbiAgICB2YWxpZGF0b3IuaW5pdCgpO1xyXG4gICAgaW5pdFF1aWNrVmlld3JlY29tbUJ1dHRvbnMoKTtcclxuICAgIGluaXRRdWlja1ZpZXdlZGl0QnV0dG9ucygpO1xyXG4gICAgJCgnI2NhcnQtdGFibGUnKS5vbignY2xpY2snLCAnLmJvbnVzLWl0ZW0tYWN0aW9ucyBhLCAuaXRlbS1kZXRhaWxzIC5ib251c3Byb2R1Y3RzIGEnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBib251c1Byb2R1Y3RzVmlldy5zaG93KHRoaXMuaHJlZik7XHJcbiAgICB9KTtcclxuICAgIC8qIHVzZWQgdG8gc2xpZGUgdG9nZ2xlIGV2ZW50IGluIGNhcnQgcGFnZSBwcm9tbyBjb2RlKi9cclxuICAgIGlmICgkKCcucHRfY2FydCcpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAkKHRoaXMpLmZpbmQoJy5hcHBseWNvdXBvbiAubGFiZWwnKS50ZXh0KCdIYXZlIGEgUHJvbW8gQ29kZT8nKTtcclxuICAgICAgICAkKCcuY291cG9uY29kZSAubGFiZWwnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciAkY3VyT2JqID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgdmFyIGZpZWxkU2VjdGlvbiA9ICcnO1xyXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygncHJlX2xhYmVsJykpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBmaWVsZFNlY3Rpb24gPSAkY3VyT2JqLmNsb3Nlc3QoJy5jYXJ0LWNvdXBvbi1jb2RlJykuZmluZCgnLnByb21vLXNlYy5wcmUtcHJvbW8nKTtcclxuICAgICAgICAgICAgICAgIGlmICgkKGZpZWxkU2VjdGlvbikuaXMoJzp2aXNpYmxlJykgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoZmllbGRTZWN0aW9uKS5zbGlkZVVwKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICQoZmllbGRTZWN0aW9uKS5zbGlkZURvd24oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdwb3N0LWNvdXBvbmNvZGUnKSkge1xyXG4gICAgICAgICAgICAgICAgZmllbGRTZWN0aW9uID0gJGN1ck9iai5jbG9zZXN0KCcuY2FydC1jb3Vwb24tY29kZScpLmZpbmQoJy5wcm9tby1zZWMuYm90dG9tLXByb21vLXNlY3Rpb24nKTtcclxuICAgICAgICAgICAgICAgIGlmICgkKGZpZWxkU2VjdGlvbikuaXMoJzp2aXNpYmxlJykgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoZmllbGRTZWN0aW9uKS5zbGlkZVVwKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICQoZmllbGRTZWN0aW9uKS5zbGlkZURvd24oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciAkY3VyT2JqID0gJCgnLmNvdXBvbmNvZGUgLmxhYmVsLnBvc3QtY291cG9uY29kZScpO1xyXG4gICAgICAgIHZhciBmaWVsZFNlY3Rpb24gPSAkY3VyT2JqLmNsb3Nlc3QoJy5jYXJ0LWNvdXBvbi1jb2RlJykuZmluZCgnLnByb21vLXNlYy5ib3R0b20tcHJvbW8tc2VjdGlvbicpO1xyXG4gICAgICAgIGlmICgkKGZpZWxkU2VjdGlvbikubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBpZiAoJCgnLnByb21vLXNlYy5ib3R0b20tcHJvbW8tc2VjdGlvbiAuZXJyb3InKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAkKGZpZWxkU2VjdGlvbikuc2xpZGVEb3duKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcucHJvbW8tc2VjLmJvdHRvbS1wcm9tby1zZWN0aW9uJykuZmluZCgnLmNvdXBvbmlucHV0JykuYWRkQ2xhc3MoJ2lucHV0bGFiZWwnKTtcclxuICAgICAgICAgICAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA8IDQ4MSkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJ2JvZHksIGh0bWwnKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiAkKCcuY291cG9uY29kZSAubGFiZWwucG9zdC1jb3Vwb25jb2RlJykub2Zmc2V0KCkudG9wXHJcbiAgICAgICAgICAgICAgICAgICAgfSwgNjAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgJGN1ck9ianRvcCA9ICQoJy5jb3Vwb25jb2RlIC5sYWJlbC5wcmVfbGFiZWwnKTtcclxuICAgICAgICB2YXIgZmllbGRTZWN0aW9udG9wID0gJGN1ck9ianRvcC5jbG9zZXN0KCcuY2FydC1jb3Vwb24tY29kZScpLmZpbmQoJy5wcm9tby1zZWMucHJlLXByb21vJyk7XHJcbiAgICAgICAgaWYgKCQoZmllbGRTZWN0aW9udG9wKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGlmICgkKCcucHJvbW8tc2VjLnByZS1wcm9tbyAuZXJyb3InKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAkKGZpZWxkU2VjdGlvbnRvcCkuc2xpZGVEb3duKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcucHJvbW8tc2VjLnByZS1wcm9tbycpLmZpbmQoJy5jb3Vwb25pbnB1dCcpLmFkZENsYXNzKCdpbnB1dGxhYmVsJyk7XHJcbiAgICAgICAgICAgICAgICAkKCdib2R5LCBodG1sJykuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiAkKCcuY291cG9uY29kZSAubGFiZWwucHJlX2xhYmVsJykub2Zmc2V0KCkudG9wXHJcbiAgICAgICAgICAgICAgICB9LCA2MDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuICAgICQoJy5wcm9tby1zZWMnKS5maW5kKCcuY291cG9uaW5wdXQnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnLnByb21vLXNlYycpLmZpbmQoJy5jb3Vwb25pbnB1dCcpLnJlbW92ZUNsYXNzKCdpbnB1dGxhYmVsJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgY2FydHByb21vID0gJCgnLnB0X2NhcnQgLnVwc2hpZnQuY2VsbC5jb250ZW50Ym94IC5jb250ZW50Ym94Y29udGVudCB0YWJsZSNjYXJ0LXRhYmxlIHRyLmNhcnQtcm93IHRkLml0ZW10b3RhbGNvbHVtbicpO1xyXG4gICAgY2FydHByb21vLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICgkKHRoaXMpLmZpbmQoJy5wcm9tby1hZGp1c3RtZW50JykubGVuZ3RoID49IDEpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygncHJvbW9kaXYnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdwcm9tb2RpdicpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgICQoJ2JvZHknKS5vbignY2xpY2snLCAnLmNhcnRjb3Vwb24tYXBwbHknLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyICRjdXJPYmogPSAkKCcuY291cG9uY29kZSAubGFiZWwnKTtcclxuICAgICAgICB2YXIgZmllbGRTZWN0aW9uID0gJyc7XHJcbiAgICAgICAgaWYgKCQodGhpcykuY2xvc2VzdCgnLmJvdHRvbS1wcm9tby1zZWN0aW9uJykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAkKCcucHJvbW8tYXBwbGllZC1wb3NpdGlvbicpLnZhbCgnYm90dG9tc2VjdGlvbicpO1xyXG4gICAgICAgICAgICAkKCcucHJvbW8tYXBwbGllZC1wb3NpdGlvbicpLmF0dHIoJ3ZhbHVlJywgJ2JvdHRvbXNlY3Rpb24nKTtcclxuICAgICAgICAgICAgZmllbGRTZWN0aW9uID0gJGN1ck9iai5jbG9zZXN0KCcuY2FydC1jb3Vwb24tY29kZScpLmZpbmQoJy5wcm9tby1zZWMuYm90dG9tLXByb21vLXNlY3Rpb24nKTtcclxuICAgICAgICAgICAgaWYgKCQoZmllbGRTZWN0aW9uKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCgnLmVycm9yJykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoZmllbGRTZWN0aW9uKS5zbGlkZURvd24oKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcucHJvbW8tc2VjLmJvdHRvbS1wcm9tby1zZWN0aW9uJykuZmluZCgnLmNvdXBvbmlucHV0JykuYWRkQ2xhc3MoJ2lucHV0bGFiZWwnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoJCh0aGlzKS5jbG9zZXN0KCcudG9wLXByb21vLXNlY3Rpb24nKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICQoJy5wcm9tby1hcHBsaWVkLXBvc2l0aW9uJykudmFsKCd0b3BzZWN0aW9uJyk7XHJcbiAgICAgICAgICAgICQoJy5wcm9tby1hcHBsaWVkLXBvc2l0aW9uJykuYXR0cigndmFsdWUnLCAndG9wc2VjdGlvbicpO1xyXG4gICAgICAgICAgICBmaWVsZFNlY3Rpb24gPSAkY3VyT2JqLmNsb3Nlc3QoJy5jYXJ0LWNvdXBvbi1jb2RlJykuZmluZCgnLnByb21vLXNlYy50b3AtcHJvbW8tc2VjdGlvbicpO1xyXG4gICAgICAgICAgICBpZiAoJChmaWVsZFNlY3Rpb24pLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGlmICgkKCcuZXJyb3InKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJChmaWVsZFNlY3Rpb24pLnNsaWRlRG93bigpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5wcm9tby1zZWMudG9wLXByb21vLXNlY3Rpb24nKS5maW5kKCcuY291cG9uaW5wdXQnKS5hZGRDbGFzcygnaW5wdXRsYWJlbCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAkKCcucHRfY2FydCAuY2FydHJlY29tbWFkc19jb250JykuY3NzKCdoZWlnaHQnLCAnNDRweCcpO1xyXG4gICAgLy8gb3ZlcnJpZGUgZW50ZXIga2V5IGZvciBjb3Vwb24gY29kZSBlbnRyeVxyXG4gICAgJCgnZm9ybSBpbnB1dC5jb3Vwb25pbnB1dCcpLm9uKCdrZXlkb3duJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBpZiAoZS53aGljaCA9PT0gMTMpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJ2Zvcm0nKS5maW5kKCcuY2FydGNvdXBvbi1hcHBseScpLmNsaWNrKCk7XHJcbiAgICAgICAgfSAvLyBKSVJBIFBSRVYtMzAgOiBDYXJ0IHBhZ2U6ICBDb3Vwb24gQ29kZSBpcyBub3QgYXBwbHlpbmcsIHdoZW4gdGhlIHVzZXIgaGl0IGVudGVyIGtleS5cclxuICAgIH0pO1xyXG5cclxuICAgICQoJ2JvZHknKS5vbignY2hhbmdlLGlucHV0JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciAkY3VyT2JqID0gJCh0aGlzKTtcclxuICAgICAgICAkKCdib2R5JykuZmluZCgnLmNvdXBvbmlucHV0JykudmFsKCRjdXJPYmoudmFsKCkpO1xyXG4gICAgICAgICQoJ2JvZHknKS5maW5kKCcuY291cG9uaW5wdXQnKS5hdHRyKCd2YWx1ZScsICRjdXJPYmoudmFsKCkpO1xyXG4gICAgfSk7XHJcbiAgICAvL3RvIHByZXZlbnQgbXVsdGlwbGUgc3VibWlzc2lvbnMgb2YgdGhlIGZvcm0gd2hlbiByZW1vdmluZyBhIHByb2R1Y3QgZnJvbSB0aGUgY2FydFxyXG4gICAgdmFyIHJlbW92ZUl0ZW1FdmVudCA9IGZhbHNlO1xyXG4gICAgJCgnYnV0dG9uW25hbWUkPVwiZGVsZXRlUHJvZHVjdFwiXScpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgaWYgKHJlbW92ZUl0ZW1FdmVudCkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmVtb3ZlSXRlbUV2ZW50ID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIHZhciBvd2wgPSAkKCcub3dsLWNhcm91c2VsJyk7XHJcbiAgICBvd2wub3dsQ2Fyb3VzZWwoe1xyXG4gICAgICAgIGl0ZW1zOiAzLFxyXG4gICAgICAgIHNsaWRlQnk6IDMsXHJcbiAgICAgICAgcmV3aW5kOiB0cnVlLFxyXG4gICAgICAgIG5hdjogdHJ1ZSxcclxuICAgICAgICBsb29wOiB0cnVlLFxyXG4gICAgICAgIGRvdHM6IGZhbHNlXHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgaW5pdGlhbGl6ZUV2ZW50cygpO1xyXG4gICAgaWYgKFNpdGVQcmVmZXJlbmNlcy5TVE9SRV9QSUNLVVApIHtcclxuICAgICAgICBjYXJ0U3RvcmVJbnZlbnRvcnkuaW5pdCgpO1xyXG4gICAgfVxyXG4gICAgYWNjb3VudC5pbml0Q2FydExvZ2luKCk7XHJcbn07XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuXHJcbnZhciB1dGlsID0gcmVxdWlyZSgnLi4vLi4vdXRpbCcpLFxyXG4gICAgdWlldmVudHMgPSByZXF1aXJlKCcuLi8uLi91aWV2ZW50cycpLFxyXG4gICAgc2hpcHBpbmcgPSByZXF1aXJlKCcuL3NoaXBwaW5nJyk7XHJcblxyXG4vKipcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBkZXNjcmlwdGlvbiBTZWxlY3RzIHRoZSBmaXJzdCBhZGRyZXNzIGZyb20gdGhlIGxpc3Qgb2YgYWRkcmVzc2VzXHJcbiAqL1xyXG5leHBvcnRzLmluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgJGZvcm0gPSAkKCcuYWRkcmVzcycpO1xyXG4gICAgLy8gc2VsZWN0IGFkZHJlc3MgZnJvbSBsaXN0XHJcbiAgICAkKCdzZWxlY3RbbmFtZSQ9XCJfYWRkcmVzc0xpc3RcIl0nLCAkZm9ybSkub24oJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgc2VsZWN0ZWQgPSAkKHRoaXMpLmNoaWxkcmVuKCc6c2VsZWN0ZWQnKS5maXJzdCgpO1xyXG4gICAgICAgIHZhciBzZWxlY3RlZEFkZHJlc3MgPSAkKHNlbGVjdGVkKS5kYXRhKCdhZGRyZXNzJyk7XHJcbiAgICAgICAgaWYgKCFzZWxlY3RlZEFkZHJlc3MpIHtcclxuICAgICAgICAgICAgaWYgKCQoJy5jaGVja291dCcpLmhhc0NsYXNzKCdiaWxsaW5nc2VjdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcuYWRkcmVzc29wdGlvbnMtYWRkVG9BZGRyZXNzQm9vaywuYWRkcmVzc29wdGlvbnMtbWFrZWRlZmF1bHQgJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgICAgICQoJ2lucHV0W25hbWUkPVxcJ3NoaXBwaW5nQWRkcmVzc19zZWxlY3RlZGFkZHJlc3NcXCddJykudmFsKCcnKTtcclxuICAgICAgICAgICAgICAgICQoJy5zZWxlY3RlZC1zaGlwcGluZy1hZGRyZXNzJykuZW1wdHkoKTtcclxuICAgICAgICAgICAgICAgICQoJ2lucHV0W25hbWUkPVxcJ19hZGRyZXNzaWRcXCddJykudmFsKCcnKTtcclxuICAgICAgICAgICAgICAgICQoJ2lucHV0W25hbWUkPVxcJ19hZGRyZXNzRmllbGRzX2ZpcnN0TmFtZVxcJ10nKS52YWwoJycpO1xyXG4gICAgICAgICAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XFwnX2FkZHJlc3NGaWVsZHNfbGFzdE5hbWVcXCddJykudmFsKCcnKTtcclxuICAgICAgICAgICAgICAgICQoJ2lucHV0W25hbWUkPVxcJ19hZGRyZXNzRmllbGRzX2FkZHJlc3MxXFwnXScpLnZhbCgnJyk7XHJcbiAgICAgICAgICAgICAgICAkKCdpbnB1dFtuYW1lJD1cXCdfYWRkcmVzc0ZpZWxkc19hZGRyZXNzMlxcJ10nKS52YWwoJycpO1xyXG4gICAgICAgICAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XFwnX2FkZHJlc3NGaWVsZHNfY2l0eVxcJ10nKS52YWwoJycpO1xyXG4gICAgICAgICAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XFwnX2FkZHJlc3NGaWVsZHNfcG9zdGFsXFwnXScpLnZhbCgnJyk7XHJcbiAgICAgICAgICAgICAgICAkKCdpbnB1dFtuYW1lJD1cXCdfYWRkcmVzc0ZpZWxkc19waG9uZVxcJ10nKS52YWwoJycpO1xyXG4gICAgICAgICAgICAgICAgdWlldmVudHMuY2hhbmdlRm9ybVNlbGVjdGlvbihqUXVlcnkoJ3NlbGVjdFtuYW1lJD1cXCdfYWRkcmVzc0ZpZWxkc19zdGF0ZXNfc3RhdGVcXCddJylbMF0sICcnKTtcclxuICAgICAgICAgICAgICAgIHVpZXZlbnRzLmNoYW5nZUZvcm1TZWxlY3Rpb24oalF1ZXJ5KCdzZWxlY3QuYWRkcmVzcy1zZWxlY3QnKVswXSwgJycpO1xyXG4gICAgICAgICAgICAgICAgJCgnLnNoaXBwaW5nLWFkZHJlc3MtZmllbGQtc2VjdGlvbicpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcuc2VsZWN0ZWQtc2hpcHBpbmctYWRkcmVzcywgLm5ldy1hZGRyZXNzLWZpZWxkLCAuZWRpdC1hZGRyZXNzLWZpZWxkJykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgICAgICQoJ2lucHV0W25hbWUkPVxcJ19hZGRyZXNzRmllbGRzX3Bob25lXFwnXScpLmNsb3Nlc3QoJ2Rpdi5waG9uZScpLmZpbmQoJ3NwYW4uZXJyb3JjbGllbnQnKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICQoJ2lucHV0W25hbWUkPVxcJ19hZGRyZXNzRmllbGRzX3Bvc3RhbFxcJ10nKS5jbG9zZXN0KCdkaXYuemlwJykuZmluZCgnc3Bhbi5lcnJvcmNsaWVudCcpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmFkZHJlc3Nmb3JtIC5mb3JtLXJvdy5jdXN0b20tc2VsZWN0JykucmVtb3ZlQ2xhc3MoJ2N1c3RvbXNlbGVjdC1lcnJvcicpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmN1c3RvbS1zZWxlY3QnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0VmFsID0gJCh0aGlzKS5maW5kKCc6c2VsZWN0ZWQnKS50ZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuc2VsZWN0b3JPdXQnKS50ZXh0KHNlbGVjdFZhbCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICQoJ2EuY2xlYXJidXR0b24nKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcuc2hpcHBpbmctYWRkcmVzcy1maWVsZC1zZWN0aW9uIC5mb3JtLXJvdycpLmZpbmQoJ2lucHV0JykucmVtb3ZlQ2xhc3MoJ2Vycm9yY2xpZW50Jyk7XHJcbiAgICAgICAgICAgICAgICB1aWV2ZW50cy5jdXN0b21GaWVsZHMoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICQoJy5zZWxlY3RlZC1zaGlwcGluZy1hZGRyZXNzLCAubmV3LWFkZHJlc3MtZmllbGQnKS5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICAgICAgJCgnLnNoaXBwaW5nLWFkZHJlc3MtZmllbGQtc2VjdGlvbicpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgICQoJy5zZWxlY3RlZC1zaGlwcGluZy1hZGRyZXNzJykuZW1wdHkoKTtcclxuICAgICAgICBpZiAoc2VsZWN0ZWRBZGRyZXNzLmFkZHJlc3MyID09IG51bGwpIHtcclxuICAgICAgICAgICAgc2VsZWN0ZWRBZGRyZXNzLmFkZHJlc3MyID0gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICQoJy5zZWxlY3RlZC1zaGlwcGluZy1hZGRyZXNzJykuYXBwZW5kKHNlbGVjdGVkQWRkcmVzcy5maXJzdE5hbWUgKyAnICcgKyBzZWxlY3RlZEFkZHJlc3MubGFzdE5hbWUgKyAnPGJyLz4nICsgc2VsZWN0ZWRBZGRyZXNzLmFkZHJlc3MxICsgJyAnICsgc2VsZWN0ZWRBZGRyZXNzLmFkZHJlc3MyICsgJzxici8+JyArIHNlbGVjdGVkQWRkcmVzcy5jaXR5ICsgJyAnICsgc2VsZWN0ZWRBZGRyZXNzLnN0YXRlQ29kZSArICcgJyArIHNlbGVjdGVkQWRkcmVzcy5wb3N0YWxDb2RlICsgJzxici8+JyArIHNlbGVjdGVkQWRkcmVzcy5waG9uZSk7XHJcbiAgICAgICAgaWYgKCQoJy5jaGVja291dCcpLmhhc0NsYXNzKCdiaWxsaW5nc2VjdGlvbicpKSB7XHJcbiAgICAgICAgICAgIHZhciBlZGl0QWRkcmVzc09iamVjdCA9IHtcclxuICAgICAgICAgICAgICAgIGZpcnN0TmFtZTogc2VsZWN0ZWRBZGRyZXNzLmZpcnN0TmFtZSxcclxuICAgICAgICAgICAgICAgIGxhc3ROYW1lOiBzZWxlY3RlZEFkZHJlc3MubGFzdE5hbWUsXHJcbiAgICAgICAgICAgICAgICBhZGRyZXNzMTogc2VsZWN0ZWRBZGRyZXNzLmFkZHJlc3MxLFxyXG4gICAgICAgICAgICAgICAgYWRkcmVzczI6IHNlbGVjdGVkQWRkcmVzcy5hZGRyZXNzMixcclxuICAgICAgICAgICAgICAgIHBvc3RhbENvZGU6IHNlbGVjdGVkQWRkcmVzcy5wb3N0YWxDb2RlLFxyXG4gICAgICAgICAgICAgICAgY2l0eTogc2VsZWN0ZWRBZGRyZXNzLmNpdHksXHJcbiAgICAgICAgICAgICAgICBzdGF0ZUNvZGU6IHNlbGVjdGVkQWRkcmVzcy5zdGF0ZUNvZGUsXHJcbiAgICAgICAgICAgICAgICBjb3VudHJ5Q29kZTogJ1VTJyxcclxuICAgICAgICAgICAgICAgIHBob25lOiBzZWxlY3RlZEFkZHJlc3MucGhvbmVcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgJCgnLm5ldy1hZGRyZXNzLWZpZWxkJykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgJCgnLmVkaXQtYWRkcmVzcy1maWVsZCcpLmF0dHIoJ2RhdGEtYWRkcmVzcycsIGVkaXRBZGRyZXNzT2JqZWN0KTtcclxuICAgICAgICAgICAgJCgnLnNlbGVjdGVkLXNoaXBwaW5nLWFkZHJlc3MsIC5lZGl0LWFkZHJlc3MtZmllbGQnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICQoJy5zZWxlY3RlZC1zaGlwcGluZy1hZGRyZXNzLCAubmV3LWFkZHJlc3MtZmllbGQnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkKCcuc2hpcHBpbmctYWRkcmVzcy1maWVsZC1zZWN0aW9uJykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICB1dGlsLmZpbGxBZGRyZXNzRmllbGRzKHNlbGVjdGVkQWRkcmVzcywgJGZvcm0pO1xyXG4gICAgICAgICQoJ2JvZHknKS5maW5kKCdpbnB1dFtuYW1lJD1fc2FtZWFzc2hpcHBpbmdhZGRyZXNzXScpLnJlbW92ZUF0dHIoJ2NoZWNrZWQnKTtcclxuICAgICAgICAkKCdib2R5JykuZmluZCgnaW5wdXRbbmFtZSQ9X3NhbWVhc3NoaXBwaW5nYWRkcmVzc10nKS5jbG9zZXN0KCcuY3VzdG9tLWNoZWNrYm94JykuZmluZCgnLmN1c3RvbS1saW5rJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcclxuICAgICAgICBzaGlwcGluZy51cGRhdGVTaGlwcGluZ01ldGhvZExpc3QoKTtcclxuICAgICAgICAvLyByZS12YWxpZGF0ZSB0aGUgZm9ybVxyXG4gICAgICAgIC8qIEpJUkEgUFJFVi05NSA6IEhpZ2hsaWdodGluZyB0aGUgQ3JlZGl0IGNhcmQgIGRldGFpbHMgZmllbGQsIHdoZW4gdGhlIHVzZXIgc2VsZWN0IGFueSBzYXZlZCBhZGRyZXNzIGZyb20gdGhlICdTZWxlY3QgQW4gQWRkcmVzcycgZHJvcCBkb3duLlxyXG4gICAgICAgICAgIChsb2dnZWQtaW4gdXNlcikgLkNvbW1lbnRlZCB0byBwcmV2ZW50IGZvcm0gZnJvbSByZS12YWxpZGF0aW9uLlxyXG5cdFx0Ki9cclxuICAgICAgICAvLyRmb3JtLnZhbGlkYXRlKCkuZm9ybSgpO1xyXG4gICAgfSk7XHJcbiAgICAvKiBpZigkKFwiYm9keVwiKS5maW5kKFwiaW5wdXRbbmFtZSQ9X3NhbWVhc3NoaXBwaW5nYWRkcmVzc11cIikuaXMoXCI6Y2hlY2tlZFwiKSkge1xyXG4gICAgICAgICAgdmFyIHBhZ2VMb2FkU2VsZWN0ZWRBZGRyZXNzID0gJCgnc2VsZWN0W25hbWUkPVwiX2FkZHJlc3NMaXN0XCJdJykuY2hpbGRyZW4oJzpzZWxlY3RlZCcpLmZpcnN0KCk7XHJcbiAgICAgICAgICAgICB2YXIgb25QYWdlTG9hZFNlbGVjdGVkQWRkcmVzcyA9ICQocGFnZUxvYWRTZWxlY3RlZEFkZHJlc3MpLmRhdGEoJ2FkZHJlc3MnKTtcclxuICAgICAgICAgICAgIGlmICghb25QYWdlTG9hZFNlbGVjdGVkQWRkcmVzcykge1xyXG4gICAgICAgICAgICAgICAgICQoXCIuc2VsZWN0ZWQtc2hpcHBpbmctYWRkcmVzcywgLm5ldy1hZGRyZXNzLWZpZWxkXCIpLmFkZENsYXNzKFwiaGlkZVwiKTtcclxuICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRBZGRyZXNzID0gb25QYWdlTG9hZFNlbGVjdGVkQWRkcmVzcztcclxuICAgICAgICAgICAgICAgICAkKFwiLnNlbGVjdGVkLXNoaXBwaW5nLWFkZHJlc3NcIikuZW1wdHkoKTtcclxuICAgICAgICAgICAgICAgICAkKFwiLnNlbGVjdGVkLXNoaXBwaW5nLWFkZHJlc3NcIikuYXBwZW5kKHNlbGVjdGVkQWRkcmVzcy5maXJzdE5hbWUrXCIgXCIrc2VsZWN0ZWRBZGRyZXNzLmxhc3ROYW1lK1wiPGJyLz5cIitzZWxlY3RlZEFkZHJlc3MuYWRkcmVzczErXCIgXCIrc2VsZWN0ZWRBZGRyZXNzLmFkZHJlc3MyK1wiPGJyLz5cIitzZWxlY3RlZEFkZHJlc3MuY2l0eStcIiBcIitzZWxlY3RlZEFkZHJlc3Muc3RhdGVDb2RlK1wiIFwiK3NlbGVjdGVkQWRkcmVzcy5wb3N0YWxDb2RlK1wiPGJyLz5cIitzZWxlY3RlZEFkZHJlc3MucGhvbmUpO1xyXG4gICAgICAgICAgICAgICAgICQoXCIuc2VsZWN0ZWQtc2hpcHBpbmctYWRkcmVzcywgLm5ldy1hZGRyZXNzLWZpZWxkXCIpLnJlbW92ZUNsYXNzKFwiaGlkZVwiKTtcclxuICAgICAgICAgICAgICAgICAkKFwiLnNoaXBwaW5nLWFkZHJlc3MtZmllbGQtc2VjdGlvblwiKS5hZGRDbGFzcyhcImhpZGVcIik7XHJcbiAgICAgICAgICAgICB9XHJcblxyXG4gICAgIH0qL1xyXG5cclxufTtcclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxudmFyIGFqYXggPSByZXF1aXJlKCcuLi8uLi9hamF4JyksXHJcbiAgICAvL2Zvcm1QcmVwYXJlID0gcmVxdWlyZSgnLi9mb3JtUHJlcGFyZScpLFxyXG4gICAgdWlldmVudHMgPSByZXF1aXJlKCcuLi8uLi91aWV2ZW50cycpLFxyXG4gICAgdG9vbHRpcCA9IHJlcXVpcmUoJy4uLy4uL3Rvb2x0aXAnKSxcclxuICAgIHByb2dyZXNzID0gcmVxdWlyZSgnLi4vLi4vcHJvZ3Jlc3MnKSxcclxuICAgIHZhbGlkYXRvciA9IHJlcXVpcmUoJy4uLy4uL3ZhbGlkYXRvcicpLFxyXG4gICAgLy9naWZ0Y2FyZCA9IHJlcXVpcmUoJy4uLy4uL2dpZnRjYXJkJyksXHJcbiAgICB1dGlsID0gcmVxdWlyZSgnLi4vLi4vdXRpbCcpO1xyXG5cclxuLyoqXHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAZGVzY3JpcHRpb24gdXBkYXRlcyB0aGUgb3JkZXIgc3VtbWFyeSBiYXNlZCBvbiBhIHBvc3NpYmx5IHJlY2FsY3VsYXRlZCBiYXNrZXQgYWZ0ZXIgYSBzaGlwcGluZyBwcm9tb3Rpb24gaGFzIGJlZW4gYXBwbGllZFxyXG4gKi9cclxudmFyIGZsYWdlYWxsb3RtZW50Y292ZXIgPSAkKCdpbnB1dC5mbGFnZWFsbG90bWVudGNvdmVyJykudmFsKCk7XHJcbnZhciBhbGxvdG1lbnRBbW91bnQgPSBwYXJzZUludCgkKCdpbnB1dC5hbGxvdG1lbnRBbW91bnQnKS52YWwoKSwgMTApO1xyXG52YXIgY291cG9uTWVudGhvZHMgPSB7XHJcbiAgICB1cGRhdGVTdW1tYXJ5OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyICRzdW1tYXJ5ID0gJCgnI3NlY29uZGFyeSAubmV3LXN1bW1lcnktY2FydCcpO1xyXG4gICAgICAgIC8vIGluZGljYXRlIHByb2dyZXNzXHJcbiAgICAgICAgJChmdW5jdGlvbiAoKXtcclxuICAgICAgICAgICAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL1RyaWRlbnRcXC83XFwuLykpIHtcclxuICAgICAgICAgICAgICAgICRzdW1tYXJ5LmFwcGVuZCgnPGRpdiBjbGFzcz1cImxvYWRlclwiPjxkaXYgY2xhc3M9XCJsb2FkZXItaW5kaWNhdG9yXCI+PC9kaXY+PGRpdiBjbGFzcz1cImxvYWRlci1iZ1wiPjwvZGl2PjwvZGl2PicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcHJvZ3Jlc3Muc2hvdygkc3VtbWFyeSk7XHJcbiAgICAgICAgdmFyIHN0YXRlVmFsdWUgPSAkKCdib2R5JykuZmluZCgnLnNoaXBwaW5nLXN0YXRlJykudmFsKCk7XHJcbiAgICAgICAgdmFyIHVybCA9IHV0aWwuYXBwZW5kUGFyYW1Ub1VSTChVcmxzLnN1bW1hcnlSZWZyZXNoVVJMLCAnc2VsZWN0ZWRTdGF0ZScsIHN0YXRlVmFsdWUpO1xyXG4gICAgICAgIC8vIGxvYWQgdGhlIHVwZGF0ZWQgc3VtbWFyeSBhcmVhXHJcbiAgICAgICAgJHN1bW1hcnkubG9hZCh1cmwsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gaGlkZSBlZGl0IHNoaXBwaW5nIG1ldGhvZCBsaW5rXHJcbiAgICAgICAgICAgICRzdW1tYXJ5LmZhZGVJbignZmFzdCcpO1xyXG4gICAgICAgICAgICAkc3VtbWFyeS5maW5kKCcuY2hlY2tvdXQtbWluaS1jYXJ0IC5taW5pc2hpcG1lbnQgLmhlYWRlciBhJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAkc3VtbWFyeS5maW5kKCcub3JkZXItdG90YWxzLXRhYmxlIC5vcmRlci1zaGlwcGluZyAubGFiZWwgYScpLmhpZGUoKTtcclxuICAgICAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIHVwZGF0ZWNhcnRzdW1tYXJ5OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHVybCA9IHV0aWwuYXBwZW5kUGFyYW1Ub1VSTChVcmxzLlVwZGF0ZUNhcnRTdW1tYXJ5KTtcclxuICAgICAgICAvLyBsb2FkIHRoZSB1cGRhdGVkIGNhcnQgc3VtbWFyeSBhcmVhXHJcbiAgICAgICAgalF1ZXJ5LmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICAgICAgZGF0YVR5cGU6ICdodG1sJyxcclxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGpRdWVyeSgnLmFqYXgtY2FydHN1bW1hcnknKS5odG1sKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgc2V0Q291cG9uUmVkZW1wdGlvbkluZm86IGZ1bmN0aW9uIChyZWRlbXB0aW9uKSB7XHJcbiAgICAgICAgaWYgKCFyZWRlbXB0aW9uKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy92YXIgcmVkZWVtTXNnID0gXCIke1Jlc291cmNlLm1zZygnYmlsbGluZy5jb3Vwb25ub3RhcHBsaWVkJywnY2hlY2tvdXQnLG51bGwpfVwiO1xyXG4gICAgICAgIC8vaWYocmVkZW1wdGlvbi5hcHBsaWVkKSByZWRlZW1Nc2cgPSBcIiR7UmVzb3VyY2UubXNnKCdiaWxsaW5nLmNvdXBvbmFwcGxpZWQnLCdjaGVja291dCcsbnVsbCl9XCI7XHJcbiAgICAgICAgLy9qUXVlcnkoXCIkeycjJ31jb3Vwb25lbnRyeSAucmVkZW1wdGlvblwiKS5hcHBlbmQoXCI8ZGl2IGNsYXNzPVxcXCJkaXNjb3VudC1zdWNjZXNzXFxcIj4ke1Jlc291cmNlLm1zZygnYmlsbGluZy5jb3Vwb25sYWJlbCcsJ2NoZWNrb3V0JyxudWxsKX0gPHNwYW4gY2xhc3M9XFxcInN1Ym1pdGVkY291cG9uXFxcIj5cIiArIHJlZGVtcHRpb24uY291cG9uQ29kZSArIFwiPC9zcGFuPiBcIiArIHJlZGVlbU1zZyArIFwiPGJ1dHRvbiAgdmFsdWU9XCIrcmVkZW1wdGlvbi5jb3Vwb25Db2RlK1wiIGNsYXNzPSdyZW1vdmVjb3Vwb24nPlJlbW92ZTwvYnV0dG9uPjwvZGl2PlwiKTtcclxuICAgICAgICB2YXIgdXJsID0gdXRpbC5hcHBlbmRQYXJhbVRvVVJMKFVybHMuU3VjY2Vzc0Rpc3BsYXlDb3Vwb24pO1xyXG4gICAgICAgIGpRdWVyeS5nZXQodXJsLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICBqUXVlcnkoJyNjb3Vwb25lbnRyeSAucmVkZW1wdGlvbicpLmh0bWwoZGF0YSk7XHJcbiAgICAgICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICBzZXRDb3Vwb25FcnJvcjogZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgIHZhciAkY291cG9uY29kZSA9IGpRdWVyeSgnaW5wdXRbbmFtZSQ9XFwnX2JpbGxpbmdfY291cG9uQ29kZVxcJ10nKS5jbG9zZXN0KCcuY291cG9uY29kZScpO1xyXG4gICAgICAgIGlmICghbXNnKSB7XHJcbiAgICAgICAgICAgIGpRdWVyeSgnI2NvdXBvbmVudHJ5IHNwYW4uZXJyb3InKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoJGNvdXBvbmNvZGUuZmluZCgnc3Bhbi5lcnJvcicpLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICQoJ2lucHV0W25hbWUkPVxcJ19iaWxsaW5nX2NvdXBvbkNvZGVcXCddJykuY2xvc2VzdCgnLmNvdXBvbmNvZGUnKS5hcHBlbmQoJzxzcGFuIGNsYXNzPVxcJ2Vycm9yXFwnPjxcXC9zcGFuPicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkY291cG9uY29kZS5maW5kKCdzcGFuLmVycm9yJykuaHRtbChtc2cpO1xyXG4gICAgICAgIGpRdWVyeSgnaW5wdXRbbmFtZSQ9XFwnX2JpbGxpbmdfY291cG9uQ29kZVxcJ10nKS5hZGRDbGFzcygnZXJyb3JjbGllbnQnKTtcclxuICAgIH0sXHJcbiAgICBzZXRHaWZ0Q2VydEVycm9yOiBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgdmFyICRyZWRlZW1jb2RlID0galF1ZXJ5KCdpbnB1dFtuYW1lJD1cXCdfYmlsbGluZ19naWZ0Q2VydENvZGVcXCddJykuY2xvc2VzdCgnLmdpZnRjZXJ0ZmllbGRzJyk7XHJcbiAgICAgICAgaWYgKCFtc2cpIHtcclxuICAgICAgICAgICAgalF1ZXJ5KCcuZ2lmdGNlcnRmaWVsZHMgLmVycm9yJykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIGpRdWVyeSgnaW5wdXRbbmFtZSQ9XFwnX2JpbGxpbmdfY291cG9uQ29kZVxcJ10nKS5yZW1vdmVDbGFzcygnZXJyb3JjbGllbnQnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoJHJlZGVlbWNvZGUuZmluZCgnc3Bhbi5lcnJvcicpLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgIGpRdWVyeSgnaW5wdXRbbmFtZSQ9XFwnX2JpbGxpbmdfZ2lmdENlcnRDb2RlXFwnXScpLmNsb3Nlc3QoJy5naWZ0Y2VydGZpZWxkcycpLmFwcGVuZCgnPHNwYW4gY2xhc3M9XFwnZXJyb3JcXCc+PFxcL3NwYW4+Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICRyZWRlZW1jb2RlLmZpbmQoJ3NwYW4uZXJyb3InKS5odG1sKG1zZyk7XHJcbiAgICAgICAgalF1ZXJ5KCdpbnB1dFtuYW1lJD1cXCdfYmlsbGluZ19naWZ0Q2VydENvZGVcXCddJykuYWRkQ2xhc3MoJ2Vycm9yY2xpZW50Jyk7XHJcbiAgICAgICAgLy9qUXVlcnkoXCJpbnB1dFtuYW1lPSR7cGRpY3QuQ3VycmVudEZvcm1zLmJpbGxpbmdnaWZ0Y2VydC5naWZ0Q2VydENvZGUuaHRtbE5hbWV9XVwiKS5wYXJlbnQoKS5hcHBlbmQoXCI8c3BhbiBjbGFzcz1cXFwiZXJyb3JtZXNzYWdlXFxcIj5cIiArIG1zZyArIFwiPFxcL3NwYW4+XCIpO1xyXG4gICAgfSxcclxuICAgIC8vcmVmcmVzaCBDQyBmb3JtXHJcbiAgICByZWZyZXNoQ0M6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdXJsID0gdXRpbC5hcHBlbmRQYXJhbVRvVVJMKFVybHMuQ2xlYXJDQ0Zvcm0pO1xyXG4gICAgICAgIGpRdWVyeS5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnaHRtbCcsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIHNldFBheW1lbnRTZWN0aW9uOiBmdW5jdGlvbiAob3JkZXJCYWxhbmNlKSB7XHJcblxyXG4gICAgICAgIC8qaWYoIW9yZGVyQmFsYW5jZSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfSovXHJcblxyXG4gICAgICAgIGlmIChvcmRlckJhbGFuY2UgPD0gMCkge1xyXG4gICAgICAgICAgICAvL0NsZWFyaW5nIHRoZSBDQyBGb3JtIGlmIHRoZSByZW1haW5pbmcgYmFsYW5jZSBhZnRlciBhbGxvdG1lbnQgYW5kIEdDIGlzIHplcm9cclxuICAgICAgICAgICAgY291cG9uTWVudGhvZHMucmVmcmVzaENDKCk7XHJcblxyXG4gICAgICAgICAgICAvLyBpZiB0aGUgd2hvbGUgb3JkZXIgdG90YWwgd2FzIHBhaWQgd2l0aCBnaWZ0IGNlcnRzIHRoZW4gaGlkZSBvdGhlciBwYXltZW50IG1ldGhvZHMgYW5kIHNob3cgYSBtZXNzYWdlXHJcbiAgICAgICAgICAgICQoJyNwYXltZW50bWV0aG9kcycpLmhpZGUoKTtcclxuICAgICAgICAgICAgJCgnLmNvbnRpbnVlY2hlY2tvdXRidXR0b24gLmNvbnRpbnVlY2hlY2tvdXQnKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgICAgICAvLyBpZiB0aGUgb3JkZXIgdG90YWwgaXMgemVybywgZGV0ZXJtaW5lIHdhcyBpdCBiZWNhdXNlIG9mIHRoZSBnaWZ0IGNlcnRpZmljYXRlIHVzZSBvciBhIHByb21vdGlvbj8gYW5kIHNob3cgYXBwcm9wcmlhdGUgbWVzc2FnZVxyXG4gICAgICAgICAgICBpZiAoZmxhZ2VhbGxvdG1lbnRjb3ZlciA9PSAndHJ1ZScpIHtcclxuICAgICAgICAgICAgICAgICQoJy5naWZ0Y2VydHVzZWQnKS5hZGRDbGFzcygnYWxsb3RtZW50Y292ZXInKTtcclxuICAgICAgICAgICAgICAgICQoJy5naWZ0Y2VydHVzZWQnKS5odG1sKCc8cCBjbGFzcz1cXCdmaXJzdC1wYXJhXFwnPllvdXIgYWxsb3RtZW50IGJhbGFuY2Ugd2lsbCBjb3ZlciB0aGUgZnVsbCBjb3N0IG9mIHRoaXMgb3JkZXIuPC9wPjxwPk5vIGZ1cnRoZXIgcGF5bWVudCB3aWxsIGJlIG5lY2Vzc2FyeS48L3A+Jykuc2hvdygpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGFsbG90bWVudEFtb3VudCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuZ2lmdGNlcnR1c2VkJykuYWRkQ2xhc3MoJ2FsbG90bWVudGNvdmVyJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFsbG90bWVudE1lc3NhZ2UgPSAnPGRpdiBjbGFzcz1cImdyZWF0ZXItdGhhbi03NjdcIj48cCBjbGFzcz1cImZpcnN0LXBhcmFcIj5Zb3VyIGFsbG90bWVudCBiYWxhbmNlIHdpbGwgY292ZXIgdGhlIGZ1bGwgY29zdCBvZiB0aGlzIG9yZGVyLjwvcD48cD5ObyBmdXJ0aGVyIHBheW1lbnQgd2lsbCBiZSBuZWNlc3NhcnkuPC9wPjwvZGl2PjxkaXYgY2xhc3M9XCJsZXNzLXRoYW4tNzY3XCI+PHA+WW91ciBhbGxvdG1lbnQgYmFsYW5jZSB3aWxsIGNvdmVyIHRoZSBmdWxsIGNvc3Qgb2YgdGhpcyBvcmRlci4gTm8gZnVydGhlciBwYXltZW50IHdpbGwgYmUgbmVjZXNzYXJ5LjwvcD48L2Rpdj4nO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5naWZ0Y2VydHVzZWQnKS5odG1sKGFsbG90bWVudE1lc3NhZ2UpLnNob3coKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmdpZnRjZXJ0dXNlZCcpLmFkZENsYXNzKCdtZXJjaGFudGNvdmVyJykuaHRtbCgkKCcuZ2lmdGNlcnRwaScpLmxlbmd0aCA+IDAgPyAnPHAgY2xhc3M9XFwnZmlyc3QtcGFyYVxcJz4nICsgUmVzb3VyY2VzLkdJRlRDRVJUX05PICsgJzwvcD4nIDogJzxwIGNsYXNzPVxcJ2ZpcnN0LXBhcmFcXCc+JyArIFJlc291cmNlcy5aRVJPX0JBTEFOQ0UgKyAnPC9wPicpLnNob3coKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkKCcuY2FyZG5vdHdvcmtpbmcnKS5oaWRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgob3JkZXJCYWxhbmNlID4gMCkgJiYgKCQoJ2lucHV0W25hbWUkPVwicGF5bWVudE1ldGhvZHNfc2VsZWN0ZWRQYXltZW50TWV0aG9kSURcIl06Y2hlY2tlZCcpLnZhbCgpID09ICdDUkVESVRfQ0FSRCcpKSB7XHJcbiAgICAgICAgICAgICQoJy5jYXJkbm90d29ya2luZycpLnNob3coKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkKCcuY2FyZG5vdHdvcmtpbmcnKS5oaWRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIG9yZGVydG90YWxzOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHVybCA9IFVybHMuR2V0T3JkZXJUb3RhbEpzb247XHJcbiAgICAgICAgYWpheC5nZXRKc29uKHtcclxuICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuVG90YWwuT3JkZXJUb3RhbC5pbmRleE9mKCcwLjAwJykgIT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb3Vwb25NZW50aG9kcy5zZXRQYXltZW50U2VjdGlvbignMC4wJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJyNwYXltZW50bWV0aG9kcycpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICBqUXVlcnkoJy5naWZ0Y2VydHVzZWQgJykucmVtb3ZlQ2xhc3MoJ21lcmNoYW50Y292ZXInKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB1aWV2ZW50cy5zeW5jY2hlY2tvdXRIKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICByZW1vdmVHaWZ0Q2VydGlmaWNhdGU6IGZ1bmN0aW9uIChnaWZ0Q2VydGlmaWNhdGVJZCkge1xyXG4gICAgICAgIGpRdWVyeSgnLmJhbGFuY2UnKS5lbXB0eSgpO1xyXG4gICAgICAgIC8vIHJlbW92ZSBnaWZ0IGNlcnRpZmljYXRlXHJcbiAgICAgICAgdmFyIHVybCA9IHV0aWwuYXBwZW5kUGFyYW1Ub1VSTChVcmxzLlJlbW92ZUdpZnRDZXJ0aWZpY2F0ZSwgJ2dpZnRDZXJ0aWZpY2F0ZUlEJywgZ2lmdENlcnRpZmljYXRlSWQpO1xyXG4gICAgICAgIGFqYXguZ2V0SnNvbih7XHJcbiAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmICghZGF0YSB8fCAhZGF0YS5naWZ0Q2VydGlmaWNhdGUgfHwgIWRhdGEuZ2lmdENlcnRpZmljYXRlLnJlbW92ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb3Vwb25NZW50aG9kcy5zZXRHaWZ0Q2VydEVycm9yKFJlc291cmNlcy5HSUZUQ0VSVF9FUlJPUik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gcmVtb3ZlIG1lc3NhZ2UgaW4gVUlcclxuICAgICAgICAgICAgICAgICQoJyNnYy0nICsgZ2lmdENlcnRpZmljYXRlSWQpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgLy8gcmVpbnN0YXRlIHBheW1lbnQgbWV0aG9kcyBzZWN0aW9uIHdoaWNoIG1pZ2h0IGhhdmUgYmVlbiBoaWRkZW4gaWYgdGhlIHdob2xlIG9yZGVyIHdhcyBwYWlkIHdpdGggZ2lmdCBjZXJ0c1xyXG4gICAgICAgICAgICAgICAgaWYgKCFmbGFnZWFsbG90bWVudGNvdmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnI3BheW1lbnRtZXRob2RzJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gaGlkZSBnaWZ0IGNlcnQgdXNlZCBmb3Igb3RkZXIgdG90YWwgbWVzc2FnZVxyXG4gICAgICAgICAgICAgICAgaWYgKCFmbGFnZWFsbG90bWVudGNvdmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KCcuZ2lmdGNlcnR1c2VkJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy9jb21tZW50aW5nIHRoaXMgc2luY2Ugd2UgZG9uJ3QgbmVlZCB0byBjbGVhciB0aGUgcGF5bWVudCBmb3JtIG9uIGFwcGx5aW5nIEdDIGFzIGluIG9yZGVyIENDIGZpZWxkcyBhcmUgZmlyc3QuXHJcbiAgICAgICAgICAgICAgICAvL3ZhciBjb3VudHJ5Q29kZSA9IGpRdWVyeShcImlucHV0W25hbWU9JHtwZGljdC5DdXJyZW50Rm9ybXMuYmlsbGluZy5iaWxsaW5nQWRkcmVzcy5hZGRyZXNzRmllbGRzLmNvdW50cnkuaHRtbE5hbWV9XVwiKS52YWwoKTtcclxuICAgICAgICAgICAgICAgIC8vdXBkYXRlUGF5bWVudE1ldGhvZHMoIGNvdW50cnlDb2RlICk7XHJcbiAgICAgICAgICAgICAgICB2YXIgY291bnRyeUNvZGUgPSBqUXVlcnkoJ2lucHV0W25hbWUkPVxcJ2FkZHJlc3NGaWVsZHNfY291bnRyeVxcJ10nKS52YWwoKTtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY291bnRyeUNvZGUgPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb3VudHJ5Q29kZSA9ICdVUyc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb3Vwb25NZW50aG9kcy51cGRhdGVQYXltZW50TWV0aG9kcyhjb3VudHJ5Q29kZSk7XHJcbiAgICAgICAgICAgICAgICBjb3Vwb25NZW50aG9kcy51cGRhdGVTdW1tYXJ5KCk7XHJcbiAgICAgICAgICAgICAgICBjb3Vwb25NZW50aG9kcy5vcmRlcnRvdGFscygpO1xyXG4gICAgICAgICAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCQoJyNwYXltZW50bWV0aG9kcyAudG9nZ2xlJykuZXEoMCkuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmNhcmRub3R3b3JraW5nJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIGJpbmRHaWZ0Q2VydGlmaWNhdGVSZW1vdmFsOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnI2dpZnRjZXJ0ZW50cnkgYS5yZW1vdmUnKS51bmJpbmQoJ2NsaWNrJykuYmluZCgnY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBnY0lkID0gdXRpbC50cmltUHJlZml4KCQodGhpcykuYXR0cignaWQnKSwgJ3JnYy0nKTtcclxuICAgICAgICAgICAgY291cG9uTWVudGhvZHMucmVtb3ZlR2lmdENlcnRpZmljYXRlKGdjSWQpO1xyXG4gICAgICAgICAgICB1aWV2ZW50cy5zeW5jY2hlY2tvdXRIKCk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICBzZXRHaWZ0Q2VydFJlZGVtcHRpb25JbmZvOiBmdW5jdGlvbiAoZ2lmdENlcnRpZmljYXRlSWQsIGFtb3VudEV4cHIpIHtcclxuXHJcbiAgICAgICAgaWYgKCFnaWZ0Q2VydGlmaWNhdGVJZCB8fCAhZ2lmdENlcnRpZmljYXRlSWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkKCcjZ2MtJyArIGdpZnRDZXJ0aWZpY2F0ZUlkKS5yZW1vdmUoKTtcclxuICAgICAgICAvKmpRdWVyeShcIiR7JyMnfWdpZnRjZXJ0ZW50cnkgLnJlZGVtcHRpb25cIikuYXBwZW5kKFwiPGRpdiBjbGFzcz0nc3VjY2VzcyBnaWZ0Y2VydHBpJyBpZD0nZ2MtXCIrIGdpZnRDZXJ0aWZpY2F0ZUlkK1wiJz48ZGl2IGNsYXNzPSdnY3JlbW92ZSBkaXNjb3VudC1zdWNjZXNzJz48ZGl2IGNsYXNzPSdnY3JlbW92ZV9pY29uJz48YSBpZD0ncmdjLVwiK2dpZnRDZXJ0aWZpY2F0ZUlkICtcIicgY2xhc3M9J3JlbW92ZScgaHJlZj0nJHsnIyd9Jz48aW1nIHNyYz0nJHtVUkxVdGlscy5zdGF0aWNVUkwoJy9pbWFnZXMvaWNvbl9yZW1vdmUuZ2lmJyl9JyBhbHQ9JyR7UmVzb3VyY2UubXNnKCdnbG9iYWwucmVtb3ZlJywnbG9jYWxlJyxudWxsKX0nLz48L2E+PC9kaXY+PGRpdiBjbGFzcz0nZ2NfaWRsYWJlbCc+JHtSZXNvdXJjZS5tc2coJ21pbmliaWxsaW5naW5mby5naWZ0Y2VydGlmaWNhdGUnLCdjaGVja291dCcsbnVsbCl9IC0gXCIrZ2lmdENlcnRpZmljYXRlSWQrXCIgPC9kaXY+PGRpdiBjbGFzcz0nZ2NyZWRlZW1hbW91bnQnPlwiKyctJytcIlwiK2Ftb3VudEV4cHIrXCI8L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPSdnY2Rpc2NhcHBsaWVkJz5cIisgYW1vdW50RXhwcitcIiBcIisnICcrXCIgJHtSZXNvdXJjZS5tc2coJ2JpbGxpbmcuZ2lmdGNlcnRyZWRlZW1lZCcsJ2NoZWNrb3V0JyxudWxsKX08L2Rpdj48L2Rpdj5cIik7Ki9cclxuICAgICAgICAkKCcjZ2lmdGNlcnRlbnRyeSAucmVkZW1wdGlvbicpLmFwcGVuZCgnPGRpdiBjbGFzcz1cXCdzdWNjZXNzIGdpZnRjZXJ0cGlcXCcgaWQ9XFwnZ2MtJyArIGdpZnRDZXJ0aWZpY2F0ZUlkICsgJ1xcJz48ZGl2IGNsYXNzPVxcJ2djcmVtb3ZlIGRpc2NvdW50LXN1Y2Nlc3NcXCc+PGRpdiBjbGFzcz1cXCdnY19pZGxhYmVsXFwnPicgKyBnaWZ0Q2VydGlmaWNhdGVJZCArICcgPC9kaXY+PGRpdiBjbGFzcz1cXCdnY3JlZGVlbWFtb3VudFxcJz4nICsgJyAtICcgKyAnJyArIGFtb3VudEV4cHIgKyAnICcgKyBSZXNvdXJjZXMuR0lGVF9DRVJUSUZJQ0FURV9DUkVESVQgKyAnPC9kaXY+PGRpdiBjbGFzcz1cXCdnY3JlbW92ZV9pY29uXFwnPjxhIGlkPVxcJ3JnYy0nICsgZ2lmdENlcnRpZmljYXRlSWQgKyAnXFwnIGNsYXNzPVxcJ3JlbW92ZVxcJyBocmVmPVxcJyNcXCc+PHNwYW4+JyArIFJlc291cmNlcy5SRU1PVkUgKyAnPC9zcGFuPjwvYT48L2Rpdj48L2Rpdj48L2Rpdj4nKTtcclxuICAgICAgICAkKCcuZ2lmdGNlcnRmaWVsZHMnKS5jc3MoeydkaXNwbGF5JzogJ25vbmUnfSk7XHJcbiAgICAgICAgY291cG9uTWVudGhvZHMuYmluZEdpZnRDZXJ0aWZpY2F0ZVJlbW92YWwoKTtcclxuICAgIH0sXHJcbiAgICAvLyBpbml0aWFsaXplcyB0aGUgcGF5bWVudCBtZXRob2QgZm9ybXNcclxuICAgIGluaXRQYXltZW50TWV0aG9kU2VsZWN0aW9uOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIC8vIGdldCBzZWxlY3RlZCBwYXltZW50IG1ldGhvZCBmcm9tIHBheW1lbnQgbWV0aG9kIGZvcm1cclxuICAgICAgICB2YXIgcGF5bWVudE1ldGhvZElEID0galF1ZXJ5KCdpbnB1dFtuYW1lJD1cXCdfc2VsZWN0ZWRQYXltZW50TWV0aG9kSURcXCddOmNoZWNrZWQnKS52YWwoKTtcclxuICAgICAgICBpZiAoIXBheW1lbnRNZXRob2RJRCkge1xyXG4gICAgICAgICAgICAvLyBpZiBuZWNlc3NhcnkgZmFsbCBiYWNrIHRvIGRlZmF1bHQgcGF5bWVudCBtZXRob2QgKGZpcnN0IG5vbi1naWZ0LWNlcnRpZmljYXRlIG1ldGhvZClcclxuICAgICAgICAgICAgcGF5bWVudE1ldGhvZElEID0gJCgnaW5wdXRbdmFsdWU9XFwnQ1JFRElUX0NBUkRcXCddJykuYXR0cignaWQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHNob3cgcGF5bWVudCBtZXRob2Qgc2VjdGlvblxyXG4gICAgICAgIGNvdXBvbk1lbnRob2RzLmNoYW5nZVBheW1lbnRNZXRob2QocGF5bWVudE1ldGhvZElEKTtcclxuICAgIH0sXHJcbiAgICAvLyBjaGFuZ2VzIHRoZSBwYXltZW50IG1ldGhvZCBmb3JtXHJcbiAgICBjaGFuZ2VQYXltZW50TWV0aG9kOiBmdW5jdGlvbiAocGF5bWVudE1ldGhvZElEKSB7XHJcbiAgICAgICAgLy9pZiAoalF1ZXJ5KFwiLmdpZnRjZXJ0dXNlZFwiKS5jc3MoXCJkaXNwbGF5XCIpICE9IFwibm9uZVwiKSByZXR1cm47XHJcbiAgICAgICAgLypcclxuICAgICAgICAgICBqUXVlcnkoXCIucGF5bWVudGZvcm1cIikuaGlkZSgpO1xyXG4gICAgICAgICAgIGpRdWVyeShcIiNQYXltZW50TWV0aG9kX1wiICsgcGF5bWVudE1ldGhvZElEKS5zaG93KCk7XHJcbiAgICAgICAgICAgaWYoIGpRdWVyeShcIiNQYXltZW50TWV0aG9kX1wiICsgcGF5bWVudE1ldGhvZElEKS5sZW5ndGggPT0gMCApXHJcbiAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICBqUXVlcnkoXCIjUGF5bWVudE1ldGhvZF9DdXN0b21cIikuc2hvdygpO1xyXG4gICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgLy8gZW5zdXJlIGNoZWNrYm94IG9mIHBheW1lbnQgbWV0aG9kIGlzIGNoZWNrZWRcclxuICAgICAgICAgICBqUXVlcnkoXCIjaXMtXCIgKyBwYXltZW50TWV0aG9kSUQpLmF0dHIoXCJjaGVja2VkXCIsIHRydWUpO1xyXG4gICAgICAgICAgIGlmKCQoXCIjUGF5bWVudE1ldGhvZF9DUkVESVRfQ0FSRFwiKS5pcygnOnZpc2libGUnKSl7XHJcbiAgICAgICAgICAgICAgIGlmKHBheW1lbnRNZXRob2RJRCA9PSBcIlBheVBhbFwiKXtcclxuICAgICAgICAgICAgICAgICAgICQoJy5jYXJkbm90d29ya2luZycpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAkKCcuY2FyZG5vdHdvcmtpbmcnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICBqUXVlcnkoJy5wYXltZW50Zm9ybS5wYXlwYWwgLnBheXBhbG1zZycpLnJlbW92ZUNsYXNzKCdlcnJvcicpO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgfSovXHJcblxyXG4gICAgICAgIHZhciAkcGF5bWVudE1ldGhvZHMgPSAkKCcucGF5bWVudC1tZXRob2QnKTtcclxuICAgICAgICAkcGF5bWVudE1ldGhvZHMucmVtb3ZlQ2xhc3MoJ3BheW1lbnQtbWV0aG9kLWV4cGFuZGVkJyk7XHJcblxyXG4gICAgICAgIHZhciAkc2VsZWN0ZWRQYXltZW50TWV0aG9kID0gJHBheW1lbnRNZXRob2RzLmZpbHRlcignW2RhdGEtbWV0aG9kPVwiJyArIHBheW1lbnRNZXRob2RJRCArICdcIl0nKTtcclxuICAgICAgICBpZiAoJHNlbGVjdGVkUGF5bWVudE1ldGhvZC5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgJHNlbGVjdGVkUGF5bWVudE1ldGhvZCA9ICQoJ1tkYXRhLW1ldGhvZD1cIkN1c3RvbVwiXScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkc2VsZWN0ZWRQYXltZW50TWV0aG9kLmFkZENsYXNzKCdwYXltZW50LW1ldGhvZC1leHBhbmRlZCcpO1xyXG5cclxuICAgICAgICAvLyBlbnN1cmUgY2hlY2tib3ggb2YgcGF5bWVudCBtZXRob2QgaXMgY2hlY2tlZFxyXG4gICAgICAgICQoJ2lucHV0W25hbWUkPVwiX3NlbGVjdGVkUGF5bWVudE1ldGhvZElEXCJdJykucmVtb3ZlQXR0cignY2hlY2tlZCcpO1xyXG4gICAgICAgICQoJ2lucHV0W3ZhbHVlPScgKyBwYXltZW50TWV0aG9kSUQgKyAnXScpLnByb3AoJ2NoZWNrZWQnLCAnY2hlY2tlZCcpO1xyXG4gICAgfSxcclxuICAgIGJpbmRDcmVkaXRDYXJkUG9wdWxhdGlvbkhhbmRsZXI6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBzZWxlY3QgY3JlZGl0IGNhcmQgZnJvbSBsaXN0XHJcbiAgICAgICAgJCgnLmNyZWRpdGNhcmRsaXN0IHNlbGVjdCcpLmNoYW5nZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBjYXJkVVVJRCA9ICQodGhpcykudmFsKCk7XHJcbiAgICAgICAgICAgIGlmICghY2FyZFVVSUQpIHtcclxuICAgICAgICAgICAgICAgIGpRdWVyeSgnaW5wdXRbbmFtZSQ9XFwncGF5bWVudE1ldGhvZHNfY3JlZGl0Q2FyZF9vd25lclxcJ10nKS52YWwoJycpO1xyXG4gICAgICAgICAgICAgICAgalF1ZXJ5KCdpbnB1dFtuYW1lJD1cXCdwYXltZW50TWV0aG9kc19jcmVkaXRDYXJkX251bWJlclxcJ10nKS52YWwoJycpO1xyXG4gICAgICAgICAgICAgICAgalF1ZXJ5KCdzZWxlY3RbbmFtZSQ9XFwncGF5bWVudE1ldGhvZHNfY3JlZGl0Q2FyZF9tb250aFxcJ10nKS52YWwoJycpO1xyXG4gICAgICAgICAgICAgICAgalF1ZXJ5KCdzZWxlY3RbbmFtZSQ9XFwncGF5bWVudE1ldGhvZHNfY3JlZGl0Q2FyZF95ZWFyXFwnXScpLnZhbCgnJyk7XHJcbiAgICAgICAgICAgICAgICBqUXVlcnkoJ3NlbGVjdFtuYW1lJD1cXCdwYXltZW50TWV0aG9kc19jcmVkaXRDYXJkX2N2blxcJ10nKS52YWwoJycpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmNhcmR0eXBlaW1nID4gZGl2JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmV4cGlyYXRpb25kYXRlLmVycm9yJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgalF1ZXJ5KCcucGF5bWVudGZvcm0gYS5jbGVhcmJ1dHRvbicpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICQoJy5jdXN0b20tc2VsZWN0JykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdFZhbCA9ICQodGhpcykuZmluZCgnOnNlbGVjdGVkJykudGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLnNlbGVjdG9yT3V0JykudGV4dChzZWxlY3RWYWwpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBqUXVlcnkoJ2Zvcm1baWQkPVxcJ3BheW1lbnRNZXRob2RzX2NyZWRpdENhcmRcXCddIGlucHV0LCBmb3JtW2lkJD1cXCdwYXltZW50TWV0aG9kc19jcmVkaXRDYXJkXFwnXSBzZWxlY3QnKS5yZW1vdmVDbGFzcygnZXJyb3JjbGllbnQnKTtcclxuICAgICAgICAgICAgICAgIGpRdWVyeSgnZm9ybVtpZCQ9XFwncGF5bWVudE1ldGhvZHNfY3JlZGl0Q2FyZFxcJ10gc3Bhbi5lcnJvcmNsaWVudCcpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIGpRdWVyeSgnZm9ybVtpZCQ9XFwncGF5bWVudE1ldGhvZHNfY3JlZGl0Q2FyZFxcJ10gLmN1c3RvbS1zZWxlY3QnKS5yZW1vdmVDbGFzcygnY3VzdG9tc2VsZWN0LWVycm9yJyk7XHJcbiAgICAgICAgICAgICAgICBqUXVlcnkoJ2Zvcm1baWQkPVxcJ3BheW1lbnRNZXRob2RzX2NyZWRpdENhcmRcXCddIC5leHBpcmF0aW9uZGF0ZS5lcnJvcicpLmhpZGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb3Vwb25NZW50aG9kcy5wb3B1bGF0ZUNyZWRpdENhcmRGb3JtKGNhcmRVVUlEKTtcclxuICAgICAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgYmluZFBheW1lbnRNZXRob2RDaGFuZ2VIYW5kbGVyOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gYmluZCBwYXltZW50IG1ldGhvZCBjaGFuZ2UgaGFuZGxlclxyXG4gICAgICAgICQoJyNwYXltZW50bWV0aG9kcyAudG9nZ2xlJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoalF1ZXJ5KCdpbnB1dFtuYW1lJD1cImJpbGxpbmdfcGF5cGFscHJvY2Vzc2VkXCJdJykudmFsKCkgIT0gJ3RydWUnKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcjcGF5bWVudG1ldGhvZHMgLnRvZ2dsZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkSUQgPSBqUXVlcnkodGhpcykuZmluZCgnaW5wdXRbbmFtZSQ9XCJfYmlsbGluZ19wYXltZW50TWV0aG9kc19zZWxlY3RlZFBheW1lbnRNZXRob2RJRFwiXScpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkSUQgPT0gJ1BheVBhbCcpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGF5cGFsU3RhdHVzID0galF1ZXJ5KCdpbnB1dFtuYW1lJD1cIl9iaWxsaW5nX3BheXBhbHZhbF9wYXlwYWxwcm9jZXNzZWRcIl0nKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuY2FyZG5vdHdvcmtpbmcnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBheXBhbFN0YXR1cyA9PSAndHJ1ZScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8kKCcuY29udGludWVjaGVja291dGJ1dHRvbiAuY29udGludWVjaGVja291dCcpLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8kKCcuY29udGludWVjaGVja291dGJ1dHRvbiAuY29udGludWVjaGVja291dCcpLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzZWxlY3RlZElEID09ICdDUkVESVRfQ0FSRCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISQoJ2lucHV0W25hbWUkPVwiX2NyZWRpdENhcmRfb3duZXJcIl0nKS5oYXNDbGFzcygnZXJyb3JjbGllbnQnKSAmJiAhJCgnaW5wdXRbbmFtZSQ9XCJfY3JlZGl0Q2FyZF9udW1iZXJcIl0nKS5oYXNDbGFzcygnZXJyb3JjbGllbnQnKSAmJiAhJCgnaW5wdXRbbmFtZSQ9XCJfY3JlZGl0Q2FyZF9jdm5cIl0nKS5oYXNDbGFzcygnZXJyb3JjbGllbnQnKSAmJiAhJCgnc2VsZWN0W25hbWUkPVwicGF5bWVudE1ldGhvZHNfY3JlZGl0Q2FyZF95ZWFyXCJdJykuaGFzQ2xhc3MoJ2Vycm9yY2xpZW50JykgJiYgISQoJ3NlbGVjdFtuYW1lJD1cInBheW1lbnRNZXRob2RzX2NyZWRpdENhcmRfbW9udGhcIl0nKS5oYXNDbGFzcygnZXJyb3JjbGllbnQnKSAmJiAkKCdpbnB1dFtuYW1lJD1cIl9jcmVkaXRDYXJkX293bmVyXCJdJykudmFsKCkgIT0gJycgJiYgJCgnaW5wdXRbbmFtZSQ9XCJfY3JlZGl0Q2FyZF9udW1iZXJcIl0nKS52YWwoKSAhPSAnJyAmJiAkKCdpbnB1dFtuYW1lJD1cIl9jcmVkaXRDYXJkX2N2blwiXScpLnZhbCgpICE9ICcnICYmICQoJ3NlbGVjdFtuYW1lJD1cInBheW1lbnRNZXRob2RzX2NyZWRpdENhcmRfZXhwaXJhdGlvbl9tb250aFwiXScpLnZhbCgpICE9ICcnICYmICQoJ3NlbGVjdFtuYW1lJD1cInBheW1lbnRNZXRob2RzX2NyZWRpdENhcmRfZXhwaXJhdGlvbl9tb250aFwiXScpLnZhbCgpICE9ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vJCgnLmNvbnRpbnVlY2hlY2tvdXRidXR0b24gLmNvbnRpbnVlY2hlY2tvdXQnKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vJCgnLmNvbnRpbnVlY2hlY2tvdXRidXR0b24gLmNvbnRpbnVlY2hlY2tvdXQnKS5hdHRyKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnaW5wdXRbbmFtZT1cImJpbGxpbmdfcGF5bWVudE1ldGhvZHNfc2VsZWN0ZWRQYXltZW50TWV0aG9kSURcIl0nKS5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBjb3Vwb25NZW50aG9kcy5jaGFuZ2VQYXltZW50TWV0aG9kKHNlbGVjdGVkSUQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJCgnI3BheW1lbnRtZXRob2RzIC5wYXltZW50Zm9ybS5jcmVkaXRjYXJkcGF5bWVudCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCgnLnBheW1lbnRtZXRob2RzIC50b2dnbGUgaW5wdXQjaXMtQ1JFRElUX0NBUkQnKS5jbG9zZXN0KCcudG9nZ2xlJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoJyNwYXltZW50bWV0aG9kcyAucGF5bWVudGZvcm0ucGF5cGFsJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKCcucGF5bWVudG1ldGhvZHMgLnRvZ2dsZSBpbnB1dCNpcy1QYXlQYWwnKS5jbG9zZXN0KCcudG9nZ2xlJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIHVwZGF0ZVBheW1lbnRNZXRob2RzOiBmdW5jdGlvbiAoY291bnRyeUNvZGUpIHtcclxuXHJcbiAgICAgICAgdmFyIHVybCA9IHV0aWwuYXBwZW5kUGFyYW1Ub1VSTChVcmxzLlJlZnJlc2hQYXltZW50TWV0aG9kcywgJ2NvdW50cnlDb2RlJywgY291bnRyeUNvZGUpO1xyXG5cclxuICAgICAgICAvLyBpbmRpY2F0ZSBwcm9ncmVzc1xyXG4gICAgICAgIHByb2dyZXNzLnNob3coJyNwYXltZW50bWV0aG9kZm9ybScpO1xyXG5cclxuICAgICAgICAvLyBsb2FkIHRoZSB1cGRhdGVkIHBheW1lbnQgbWV0aG9kIGFyZWFcclxuICAgICAgICAkKCcjcGF5bWVudG1ldGhvZGZvcm0nKS5sb2FkKHVybCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKCcjcGF5bWVudG1ldGhvZGZvcm0nKS5mYWRlSW4oJ2Zhc3QnKTtcclxuICAgICAgICAgICAgLy8kKCcuY29udGludWVjaGVja291dGJ1dHRvbiAuY29udGludWVjaGVja291dCcpLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICAgIC8vY291cG9uTWVudGhvZHMuaW5pdFBheW1lbnRNZXRob2RTZWxlY3Rpb24oKTtcclxuICAgICAgICAgICAgY291cG9uTWVudGhvZHMuYmluZFBheW1lbnRNZXRob2RDaGFuZ2VIYW5kbGVyKCk7XHJcbiAgICAgICAgICAgIGNvdXBvbk1lbnRob2RzLmJpbmRDcmVkaXRDYXJkUG9wdWxhdGlvbkhhbmRsZXIoKTtcclxuICAgICAgICAgICAgdmFsaWRhdG9yLmluaXQoKTtcclxuICAgICAgICAgICAgdG9vbHRpcC5pbml0KCk7XHJcbiAgICAgICAgICAgIHV0aWwuY2FyZHR5cGUuaW5pdCgpO1xyXG4gICAgICAgICAgICAkKCcuZXhwaXJhdGlvbmRhdGUgLmN1c3RvbS1zZWxlY3Qgc2VsZWN0Jyk7XHJcbiAgICAgICAgICAgICQoJyNQYXltZW50TWV0aG9kX0NSRURJVF9DQVJEIGlucHV0Jyk7XHJcbiAgICAgICAgICAgICQoJyNQYXltZW50TWV0aG9kX0NSRURJVF9DQVJEIHNlbGVjdCcpO1xyXG4gICAgICAgICAgICB1aWV2ZW50cy5pbml0KCQoJyNwYXltZW50bWV0aG9kZm9ybScpKTtcclxuICAgICAgICAgICAgLy9sb2FkIGNoZWNraW5nIGZvciBwYXltZW50IHR5cGVcclxuICAgICAgICAgICAgdmFyICRwYXlTZWxlY3RlZCA9IGpRdWVyeSgnI3BheW1lbnRtZXRob2RzJykuZmluZCgnaW5wdXRbbmFtZSQ9XCJwYXltZW50TWV0aG9kc19zZWxlY3RlZFBheW1lbnRNZXRob2RJRFwiXTpjaGVja2VkJyk7XHJcbiAgICAgICAgICAgIGlmICgkcGF5U2VsZWN0ZWQubGVuZ3RoID09IDEpIHtcclxuICAgICAgICAgICAgICAgICRwYXlTZWxlY3RlZC5jbG9zZXN0KCcudG9nZ2xlJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkSUQgPSAkcGF5U2VsZWN0ZWQudmFsKCk7XHJcbiAgICAgICAgICAgICAgICBjb3Vwb25NZW50aG9kcy5jaGFuZ2VQYXltZW50TWV0aG9kKHNlbGVjdGVkSUQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvdXBvbk1lbnRob2RzLm9yZGVydG90YWxzKCk7XHJcbiAgICAgICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvL2FwcC5leGVjVWpzKCk7XHJcbiAgICB9LFxyXG4gICAgcmVtb3ZlQ291cG9uQ29kZTogZnVuY3Rpb24gKGNvdXBvbkNvZGUpIHtcclxuICAgICAgICBjb3Vwb25NZW50aG9kcy5zZXRDb3Vwb25FcnJvcihudWxsKTtcclxuICAgICAgICAvLyBub3RoaW5nIGVudGVyZWRcclxuICAgICAgICBpZiAoIWNvdXBvbkNvZGUpIHtcclxuICAgICAgICAgICAgY291cG9uTWVudGhvZHMuc2V0Q291cG9uRXJyb3IoUmVzb3VyY2VzLkJJTExJTkdfQ09VUE9OTUlTKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBhdHRlbXB0IHRvIHJlbW92ZVxyXG4gICAgICAgIGpRdWVyeSgnaW5wdXRbbmFtZSQ9XFwnYmlsbGluZ19jb3Vwb25Db2RlXFwnXScpLnZhbCgnJyk7XHJcblxyXG4gICAgICAgIHZhciB1cmwgPSB1dGlsLmFwcGVuZFBhcmFtVG9VUkwoVXJscy5SZW1vdmVDb3Vwb24sICdjb3Vwb25Db2RlJywgY291cG9uQ29kZSk7XHJcbiAgICAgICAgJC5nZXQodXJsLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICBjb3Vwb25NZW50aG9kcy51cGRhdGVTdW1tYXJ5KCk7XHJcbiAgICAgICAgICAgIGNvdXBvbk1lbnRob2RzLnVwZGF0ZWNhcnRzdW1tYXJ5KCk7XHJcbiAgICAgICAgICAgIHZhciBnaWZ0Q2VydGlmaWNhdGVzID0galF1ZXJ5KGRhdGEpLmZpbHRlcignI2dpZnRDZXJ0aWZpY2F0ZURhdGEnKS50ZXh0KCk7XHJcbiAgICAgICAgICAgIGlmIChnaWZ0Q2VydGlmaWNhdGVzICE9ICd1bmRlZmluZWQnICYmIGdpZnRDZXJ0aWZpY2F0ZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGdpZnRDZXJ0aWZpY2F0ZWRhdGEgPSBnaWZ0Q2VydGlmaWNhdGVzLnNwbGl0KCd8Jyk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgZ2lmdENlcnRpZmljYXRlZGF0YS5sZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjb3Vwb25NZW50aG9kcy5zZXRHaWZ0Q2VydFJlZGVtcHRpb25JbmZvKGdpZnRDZXJ0aWZpY2F0ZWRhdGFbaW5kZXhdLnNwbGl0KCctJylbMF0udHJpbSgpLCBnaWZ0Q2VydGlmaWNhdGVkYXRhW2luZGV4XS5zcGxpdCgnLScpWzFdLnRyaW0oKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciBjb3VudHJ5Q29kZSA9IGpRdWVyeSgnaW5wdXRbbmFtZSQ9XFwnYWRkcmVzc0ZpZWxkc19jb3VudHJ5XFwnXScpLnZhbCgpO1xyXG4gICAgICAgIGlmICh0eXBlb2YgY291bnRyeUNvZGUgPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgY291bnRyeUNvZGUgPSAnVVMnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb3Vwb25NZW50aG9kcy51cGRhdGVQYXltZW50TWV0aG9kcyhjb3VudHJ5Q29kZSk7XHJcbiAgICAgICAgY291cG9uTWVudGhvZHMub3JkZXJ0b3RhbHMoKTtcclxuXHJcbiAgICAgICAgLy8gRGV0ZXJtaW5lIGlmIGEgYm9udXMtcHJvZHVjdCBwcm9tb3Rpb24gd2FzIHRyaWdnZXJlZCBieSB0aGUgY291cG9uLlxyXG4gICAgICAgIC8vIElmIHNvLCBkaXNwbGF5IGEgcG9wdXAgYWxlcnQgYW5kIGdpdmUgdGhlIGN1c3RvbWVyIGEgY2hhbmNlIHRvXHJcbiAgICAgICAgLy8gcmV0dXJuIHRvIHRoZSBjYXJ0IGFuZCBzZWxlY3QgdGhlIGJvbnVzIHByb2R1Y3QuXHJcblxyXG4gICAgICAgIC8qJCgnLm5vQm9udXNCdG4nKS51bmJpbmQoXCJjbGlja1wiKS5jbGljayggZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICQoJy5ib251c2Rpc2NvdW50Y29udGFpbmVyJykuZGlhbG9nKCdjbG9zZScpO1xyXG4gICAgICAgICAgfSk7Ki9cclxuICAgIH0sXHJcbiAgICBwb3B1bGF0ZUNyZWRpdENhcmRGb3JtOiBmdW5jdGlvbiAoY2FyZElEKSB7XHJcbiAgICAgICAgLy8gbG9hZCBjYXJkIGRldGFpbHNcclxuICAgICAgICB2YXIgdXJsID0gVXJscy5iaWxsaW5nU2VsZWN0Q0M7XHJcbiAgICAgICAgdXJsID0gdXRpbC5hcHBlbmRQYXJhbVRvVVJMKHVybCwgJ2NyZWRpdENhcmRVVUlEJywgY2FyZElEKTtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gYWpheC5nZXRKc29uKHtcclxuICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQoUmVzb3VyY2VzLkNDX0xPQURfRVJST1IpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciAkY3JlZGl0Q2FyZCA9ICQoJ2JvZHknKS5maW5kKCcuY3JlZGl0Y2FyZHBheW1lbnQnKTtcclxuICAgICAgICAgICAgICAgIC8vIGZpbGwgdGhlIGZvcm0gLyBjbGVhciB0aGUgZm9ybWVyIGN2biBpbnB1dFxyXG4gICAgICAgICAgICAgICAgJGNyZWRpdENhcmQuZmluZCgnaW5wdXRbbmFtZSQ9XCJjcmVkaXRDYXJkX293bmVyXCJdJykudmFsKGRhdGEuaG9sZGVyKS50cmlnZ2VyKCdjaGFuZ2UnKTtcclxuICAgICAgICAgICAgICAgICRjcmVkaXRDYXJkLmZpbmQoJ3NlbGVjdFtuYW1lJD1cIl90eXBlXCJdJykudmFsKGRhdGEudHlwZSkudHJpZ2dlcignY2hhbmdlJyk7XHJcbiAgICAgICAgICAgICAgICAkY3JlZGl0Q2FyZC5maW5kKCcuY3JlZGl0Q2FyZC1udW1iZXInKS52YWwoZGF0YS5tYXNrZWROdW1iZXIpLnRyaWdnZXIoJ2NoYW5nZScpO1xyXG4gICAgICAgICAgICAgICAgJGNyZWRpdENhcmQuZmluZCgnW25hbWUkPVwiX21vbnRoXCJdJykudmFsKGRhdGEuZXhwaXJhdGlvbk1vbnRoKS50cmlnZ2VyKCdjaGFuZ2UnKTtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50WWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICAgICAgICAgIGlmICgoZGF0YS5leHBpcmF0aW9uWWVhciA8PSBjdXJyZW50WWVhcikpIHtcclxuICAgICAgICAgICAgICAgICAgICAkY3JlZGl0Q2FyZC5maW5kKCdbbmFtZSQ9XCJfeWVhclwiXScpLnZhbCgnJykuY2hhbmdlKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICRjcmVkaXRDYXJkLmZpbmQoJ1tuYW1lJD1cIl95ZWFyXCJdJykudmFsKGRhdGEuZXhwaXJhdGlvblllYXIpLnRyaWdnZXIoJ2NoYW5nZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJGNyZWRpdENhcmQuZmluZCgnaW5wdXRbbmFtZSQ9XCJfY3ZuXCJdJykudmFsKCcnKS50cmlnZ2VyKCdjaGFuZ2UnKTtcclxuICAgICAgICAgICAgICAgIGpRdWVyeSgnaW5wdXRbbmFtZSQ9XCJjcmVkaXRDYXJkX293bmVyXCJdJykudmFsKGRhdGEuY3JlZGl0Q2FyZC5ob2xkZXIpO1xyXG4gICAgICAgICAgICAgICAgdWlldmVudHMuY2hhbmdlRm9ybVNlbGVjdGlvbigkKCdzZWxlY3RbbmFtZSQ9XCJfdHlwZVwiXScpWzBdLCBkYXRhLmNyZWRpdENhcmQudHlwZSk7XHJcbiAgICAgICAgICAgICAgICAkKCcuY3JlZGl0Q2FyZC1udW1iZXInKS52YWwoZGF0YS5jcmVkaXRDYXJkLm1hc2tlZE51bWJlcik7XHJcbiAgICAgICAgICAgICAgICB1aWV2ZW50cy5jaGFuZ2VGb3JtU2VsZWN0aW9uKCQoJ1tuYW1lJD1cIl9tb250aFwiXScpWzBdLCBkYXRhLmNyZWRpdENhcmQuZXhwaXJhdGlvbk1vbnRoKTtcclxuICAgICAgICAgICAgICAgIHVpZXZlbnRzLmNoYW5nZUZvcm1TZWxlY3Rpb24oJCgnW25hbWUkPVwiX3llYXJcIl0nKVswXSwgZGF0YS5jcmVkaXRDYXJkLmV4cGlyYXRpb25ZZWFyKTtcclxuICAgICAgICAgICAgICAgICQoJ2lucHV0W25hbWUkPVwiX2N2blwiXScpLnZhbCgnJyk7XHJcbiAgICAgICAgICAgICAgICAvLyByZW1vdmUgZXJyb3IgbWVzc2FnaW5nXHJcbiAgICAgICAgICAgICAgICAkKCcjUGF5bWVudE1ldGhvZF9DUkVESVRfQ0FSRCBzcGFuLmVycm9ybWVzc2FnZScpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgJCgnI1BheW1lbnRNZXRob2RfQ1JFRElUX0NBUkQgaW5wdXQuZXJyb3JtZXNzYWdlJykucmVtb3ZlQ2xhc3MoJ2Vycm9ybWVzc2FnZScpO1xyXG4gICAgICAgICAgICAgICAgJCgnI1BheW1lbnRNZXRob2RfQ1JFRElUX0NBUkQgLmVycm9ybGFiZWwnKS5yZW1vdmVDbGFzcygnZXJyb3JsYWJlbCcpO1xyXG5cclxuICAgICAgICAgICAgICAgICQoJy5wYXltZW50Zm9ybS5jcmVkaXRjYXJkcGF5bWVudCAuZm9ybWZpZWxkIC5maWVsZC13cmFwcGVyJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQodGhpcykuZmluZCgnaW5wdXQnKS52YWwoKSAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCQodGhpcykuZmluZCgnaW5wdXQnKS52YWwoKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgnLmZvcm1maWVsZCcpLmZpbmQoJ2EuY2xlYXJidXR0b24nKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgnLmZvcm1maWVsZCcpLmZpbmQoJ2EuY2xlYXJidXR0b24nKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhLmNyZWRpdENhcmQudHlwZSA9PSAnVmlzYScpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSAnVmlzYSc7XHJcbiAgICAgICAgICAgICAgICAgICAgLy92aXNhXHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEuY3JlZGl0Q2FyZC50eXBlID09ICdEaXNjb3ZlcicpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSAnRGlzY292ZXInO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vRGlzY292ZXJcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS5jcmVkaXRDYXJkLnR5cGUgPT0gJ0FtZXgnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gJ0FtZXgnO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vQW1lcmljYW4gRXhwcmVzc1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhLmNyZWRpdENhcmQudHlwZSA9PSAnTWFzdGVyQ2FyZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSAnTWFzdGVyQ2FyZCc7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9NYXN0ZXIgQ2FyZFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy9lcnJvcnNwYW4uaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgJCgnI3BheW1lbnRtZXRob2RzJykuZmluZCgnc2VsZWN0W25hbWUkPVwiX3BheW1lbnRNZXRob2RzX2NyZWRpdENhcmRfdHlwZVwiXScpLnZhbChyZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmNhcmR0eXBlaW1nID4gZGl2JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmNhcmR0eXBlaW1nID4gZGl2LicgKyByZXN1bHQpLnNob3coKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIHNldEdpZnRDZXJ0QmFsYW5jZUluZm86IGZ1bmN0aW9uIChhbW91bnRFeHByKSB7XHJcbiAgICAgICAgaWYgKCFhbW91bnRFeHByKSB7XHJcbiAgICAgICAgICAgIGpRdWVyeSgnLmJhbGFuY2UnKS5lbXB0eSgpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgICQoJy5iYWxhbmNlJykuYXBwZW5kKCc8ZGl2IGNsYXNzPVxcJ2JhbGFuY2VhbXRcXCc+JyArIFJlc291cmNlcy5HSUZUX0NFUlRfQkFMQU5DRSArICcgJyArIGFtb3VudEV4cHIgKyAnIDwvZGl2PicpO1xyXG4gICAgfSxcclxuICAgIHJlZGVlbUdpZnRDZXJ0OiBmdW5jdGlvbiAoZ2lmdENlcnRpZmljYXRlSWQpIHtcclxuICAgICAgICBjb3Vwb25NZW50aG9kcy5zZXRHaWZ0Q2VydEVycm9yKG51bGwpO1xyXG4gICAgICAgIGNvdXBvbk1lbnRob2RzLnNldEdpZnRDZXJ0QmFsYW5jZUluZm8obnVsbCk7XHJcbiAgICAgICAgLy8gbm90aGluZyBlbnRlcmVkXHJcbiAgICAgICAgaWYgKCFnaWZ0Q2VydGlmaWNhdGVJZCkge1xyXG4gICAgICAgICAgICBjb3Vwb25NZW50aG9kcy5zZXRHaWZ0Q2VydEVycm9yKFJlc291cmNlcy5HSUZUX0NFUlRfSU5WQUxJRCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gYXR0ZW1wdCB0byByZWRlZW1cclxuICAgICAgICB2YXIgdXJsID0gdXRpbC5hcHBlbmRQYXJhbXNUb1VybChVcmxzLnJlZGVlbUdpZnRDZXJ0LCB7Z2lmdENlcnRpZmljYXRlSUQ6IGdpZnRDZXJ0aWZpY2F0ZUlkLCBmb3JtYXQ6ICdhamF4J30pO1xyXG4gICAgICAgIGFqYXguZ2V0SnNvbih7XHJcbiAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmICghZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvdXBvbk1lbnRob2RzLnNldEdpZnRDZXJ0RXJyb3IoUmVzb3VyY2VzLkdJRlRfQ0VSVF9JTlZBTElEKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5yZWRlbXB0aW9uRXJyb3JNc2cpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb3Vwb25NZW50aG9kcy5zZXRHaWZ0Q2VydEVycm9yKGRhdGEucmVkZW1wdGlvbkVycm9yTXNnKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIWRhdGEucmVkZW1wdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvdXBvbk1lbnRob2RzLnNldEdpZnRDZXJ0RXJyb3IoUmVzb3VyY2VzLkdJRlRfQ0VSVF9JTlZBTElEKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBlbXB0eSBpbnB1dCBmaWVsZCBhbmQgZGlzcGxheSByZWRlbXB0aW9uIGluIFVJXHJcbiAgICAgICAgICAgICAgICAkKCdpbnB1dFtuYW1lJD1cXCdiaWxsaW5nX2dpZnRDZXJ0Q29kZVxcJ10nKS52YWwoJycpO1xyXG4gICAgICAgICAgICAgICAgLy9jb3Vwb25NZW50aG9kcy5zZXRHaWZ0Q2VydFJlZGVtcHRpb25JbmZvKGRhdGEucmVkZW1wdGlvbi5naWZ0Q2VydGlmaWNhdGVJRCwgZGF0YS5yZWRlbXB0aW9uLmFtb3VudCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgY291bnRyeUNvZGUgPSAkKCdpbnB1dFtuYW1lJD1cXCdfYWRkcmVzc0ZpZWxkc19jb3VudHJ5XFwnXScpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjb3VudHJ5Q29kZSA9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvdW50cnlDb2RlID0gJ1VTJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvdXBvbk1lbnRob2RzLnVwZGF0ZVBheW1lbnRNZXRob2RzKGNvdW50cnlDb2RlKTtcclxuICAgICAgICAgICAgICAgIGNvdXBvbk1lbnRob2RzLnVwZGF0ZVN1bW1hcnkoKTtcclxuICAgICAgICAgICAgICAgIGNvdXBvbk1lbnRob2RzLm9yZGVydG90YWxzKCk7XHJcbiAgICAgICAgICAgICAgICB1aWV2ZW50cy5zeW5jY2hlY2tvdXRIKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICBjaGVja0dpZnRDZXJ0QmFsYW5jZTogZnVuY3Rpb24gKGdpZnRDZXJ0aWZpY2F0ZUlkKSB7XHJcbiAgICAgICAgY291cG9uTWVudGhvZHMuc2V0R2lmdENlcnRFcnJvcihudWxsKTtcclxuICAgICAgICBjb3Vwb25NZW50aG9kcy5zZXRHaWZ0Q2VydEJhbGFuY2VJbmZvKG51bGwpO1xyXG4gICAgICAgIC8vIG5vdGhpbmcgZW50ZXJlZFxyXG4gICAgICAgIGlmICghZ2lmdENlcnRpZmljYXRlSWQpIHtcclxuICAgICAgICAgICAgY291cG9uTWVudGhvZHMuc2V0R2lmdENlcnRFcnJvcihSZXNvdXJjZXMuR0lGVF9DRVJUX01JU1NJTkcpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGxvYWQgZ2lmdCBjZXJ0aWZpY2F0ZSBkZXRhaWxzXHJcbiAgICAgICAgdmFyIHVybCA9IHV0aWwuYXBwZW5kUGFyYW1zVG9VcmwoVXJscy5HZXRHaWZ0Q2VydGlmaWNhdGVCYWxhbmNlLCB7XHJcbiAgICAgICAgICAgIGdpZnRDZXJ0aWZpY2F0ZUlEOiBnaWZ0Q2VydGlmaWNhdGVJZCxcclxuICAgICAgICAgICAgZm9ybWF0OiAnYWpheCdcclxuICAgICAgICB9KTtcclxuICAgICAgICBhamF4LmdldEpzb24oe1xyXG4gICAgICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWRhdGEgfHwgIWRhdGEuZ2lmdENlcnRpZmljYXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY291cG9uTWVudGhvZHMuc2V0R2lmdENlcnRFcnJvcihSZXNvdXJjZXMuR0lGVF9DRVJUX0lOVkFMSUQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIGRpc3BsYXkgZGV0YWlscyBpbiBVSVxyXG4gICAgICAgICAgICAgICAgY291cG9uTWVudGhvZHMuc2V0R2lmdENlcnRCYWxhbmNlSW5mbyhkYXRhLmdpZnRDZXJ0aWZpY2F0ZS5iYWxhbmNlKTtcclxuICAgICAgICAgICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAZGVzY3JpcHRpb24gRmlsbHMgdGhlIENyZWRpdCBDYXJkIGZvcm0gd2l0aCB0aGUgcGFzc2VkIGRhdGEtcGFyYW1ldGVyIGFuZCBjbGVhcnMgdGhlIGZvcm1lciBjdm4gaW5wdXRcclxuICogQHBhcmFtIHtPYmplY3R9IGRhdGEgVGhlIENyZWRpdCBDYXJkIGRhdGEgKGhvbGRlciwgdHlwZSwgbWFza2VkIG51bWJlciwgZXhwaXJhdGlvbiBtb250aC95ZWFyKVxyXG4gKi9cclxuZnVuY3Rpb24gc2V0Q0NGaWVsZHMoZGF0YSkge1xyXG5cclxuICAgIHZhciAkY3JlZGl0Q2FyZCA9ICQoJ1tkYXRhLW1ldGhvZD1cIkNSRURJVF9DQVJEXCJdJyk7XHJcbiAgICAkY3JlZGl0Q2FyZC5maW5kKCdpbnB1dFtuYW1lJD1cImNyZWRpdENhcmRfb3duZXJcIl0nKS52YWwoZGF0YS5ob2xkZXIpLnRyaWdnZXIoJ2NoYW5nZScpO1xyXG4gICAgJGNyZWRpdENhcmQuZmluZCgnaW5wdXRbbmFtZSQ9XCJjcmVkaXRDYXJkX293bmVyXCJdJykudmFsKGRhdGEuaG9sZGVyKS50cmlnZ2VyKCdibHVyJyk7XHJcbiAgICAkY3JlZGl0Q2FyZC5maW5kKCdzZWxlY3RbbmFtZSQ9XCJfdHlwZVwiXScpLnZhbChkYXRhLnR5cGUpLnRyaWdnZXIoJ2NoYW5nZScpO1xyXG4gICAgJGNyZWRpdENhcmQuZmluZCgnc2VsZWN0W25hbWUkPVwiX3R5cGVcIl0nKS52YWwoZGF0YS50eXBlKS50cmlnZ2VyKCdibHVyJyk7XHJcbiAgICAkY3JlZGl0Q2FyZC5maW5kKCdpbnB1dFtuYW1lKj1cIl9jcmVkaXRDYXJkX251bWJlclwiXScpLnZhbChkYXRhLm1hc2tlZE51bWJlcikudHJpZ2dlcignY2hhbmdlJyk7XHJcbiAgICAkY3JlZGl0Q2FyZC5maW5kKCdpbnB1dFtuYW1lKj1cIl9jcmVkaXRDYXJkX251bWJlclwiXScpLnZhbChkYXRhLm1hc2tlZE51bWJlcikudHJpZ2dlcignYmx1cicpO1xyXG4gICAgJGNyZWRpdENhcmQuZmluZCgnW25hbWUkPVwiX2V4cGlyYXRpb25fbW9udGhcIl0nKS52YWwoZGF0YS5leHBpcmF0aW9uTW9udGgpLnRyaWdnZXIoJ2NoYW5nZScpO1xyXG4gICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgdmFyIGN1cnJlbnRZZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xyXG4gICAgaWYgKChkYXRhLmV4cGlyYXRpb25ZZWFyIDw9IGN1cnJlbnRZZWFyKSkge1xyXG4gICAgICAgICRjcmVkaXRDYXJkLmZpbmQoJ1tuYW1lJD1cIl95ZWFyXCJdJykudmFsKCcnKS5jaGFuZ2UoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJGNyZWRpdENhcmQuZmluZCgnW25hbWUkPVwiX3llYXJcIl0nKS52YWwoZGF0YS5leHBpcmF0aW9uWWVhcikudHJpZ2dlcignY2hhbmdlJyk7XHJcbiAgICB9XHJcbiAgICAkY3JlZGl0Q2FyZC5maW5kKCdbbmFtZSQ9XCJfZXhwaXJhdGlvbl9tb250aFwiXScpLnZhbChkYXRhLmV4cGlyYXRpb25Nb250aCkudHJpZ2dlcignYmx1cicpO1xyXG4gICAgaWYgKChkYXRhLmV4cGlyYXRpb25ZZWFyIDw9IGN1cnJlbnRZZWFyKSkge1xyXG4gICAgICAgICRjcmVkaXRDYXJkLmZpbmQoJ1tuYW1lJD1cIl95ZWFyXCJdJykudmFsKCcnKS5ibHVyKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgICRjcmVkaXRDYXJkLmZpbmQoJ1tuYW1lJD1cIl95ZWFyXCJdJykudmFsKGRhdGEuZXhwaXJhdGlvblllYXIpLnRyaWdnZXIoJ2JsdXInKTtcclxuICAgIH1cclxuICAgICRjcmVkaXRDYXJkLmZpbmQoJ2lucHV0W25hbWUkPVwiX2N2blwiXScpLnZhbCgnJykudHJpZ2dlcignY2hhbmdlJyk7XHJcbiAgICAkY3JlZGl0Q2FyZC5maW5kKCdpbnB1dFtuYW1lJD1cIl9jdm5cIl0nKS52YWwoJycpLnRyaWdnZXIoJ2JsdXInKTtcclxuICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAZGVzY3JpcHRpb24gVXBkYXRlcyB0aGUgY3JlZGl0IGNhcmQgZm9ybSB3aXRoIHRoZSBhdHRyaWJ1dGVzIG9mIGEgZ2l2ZW4gY2FyZFxyXG4gKiBAcGFyYW0ge1N0cmluZ30gY2FyZElEIHRoZSBjcmVkaXQgY2FyZCBJRCBvZiBhIGdpdmVuIGNhcmRcclxuICovXHJcbmZ1bmN0aW9uIHBvcHVsYXRlQ3JlZGl0Q2FyZEZvcm0oY2FyZElEKSB7XHJcbiAgICAvLyBsb2FkIGNhcmQgZGV0YWlsc1xyXG4gICAgdmFyIHVybCA9IHV0aWwuYXBwZW5kUGFyYW1Ub1VSTChVcmxzLmJpbGxpbmdTZWxlY3RDQywgJ2NyZWRpdENhcmRVVUlEJywgY2FyZElEKTtcclxuICAgIGFqYXguZ2V0SnNvbih7XHJcbiAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcclxuICAgICAgICAgICAgaWYgKCFkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuYWxlcnQoUmVzb3VyY2VzLkNDX0xPQURfRVJST1IpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldENDRmllbGRzKGRhdGEpO1xyXG4gICAgICAgICAgICB1aWV2ZW50cy5zeW5jY2hlY2tvdXRIKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAZnVuY3Rpb25cclxuICogQGRlc2NyaXB0aW9uIENoYW5nZXMgdGhlIHBheW1lbnQgbWV0aG9kIGZvcm0gZGVwZW5kaW5nIG9uIHRoZSBwYXNzZWQgcGF5bWVudE1ldGhvZElEXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBwYXltZW50TWV0aG9kSUQgdGhlIElEIG9mIHRoZSBwYXltZW50IG1ldGhvZCwgdG8gd2hpY2ggdGhlIHBheW1lbnQgbWV0aG9kIGZvcm0gc2hvdWxkIGJlIGNoYW5nZWQgdG9cclxuICovXHJcbmZ1bmN0aW9uIHVwZGF0ZVBheW1lbnRNZXRob2QocGF5bWVudE1ldGhvZElEKSB7XHJcbiAgICB2YXIgJHBheW1lbnRNZXRob2RzID0gJCgnLnBheW1lbnQtbWV0aG9kJyk7XHJcbiAgICAkcGF5bWVudE1ldGhvZHMucmVtb3ZlQ2xhc3MoJ3BheW1lbnQtbWV0aG9kLWV4cGFuZGVkJyk7XHJcblxyXG4gICAgdmFyICRzZWxlY3RlZFBheW1lbnRNZXRob2QgPSAkcGF5bWVudE1ldGhvZHMuZmlsdGVyKCdbZGF0YS1tZXRob2Q9XCInICsgcGF5bWVudE1ldGhvZElEICsgJ1wiXScpO1xyXG4gICAgaWYgKCRzZWxlY3RlZFBheW1lbnRNZXRob2QubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgJHNlbGVjdGVkUGF5bWVudE1ldGhvZCA9ICQoJ1tkYXRhLW1ldGhvZD1cIkN1c3RvbVwiXScpO1xyXG4gICAgfVxyXG4gICAgJHNlbGVjdGVkUGF5bWVudE1ldGhvZC5hZGRDbGFzcygncGF5bWVudC1tZXRob2QtZXhwYW5kZWQnKTtcclxuXHJcbiAgICAvLyBlbnN1cmUgY2hlY2tib3ggb2YgcGF5bWVudCBtZXRob2QgaXMgY2hlY2tlZFxyXG4gICAgJCgnaW5wdXRbbmFtZSQ9XCJfc2VsZWN0ZWRQYXltZW50TWV0aG9kSURcIl0nKS5yZW1vdmVBdHRyKCdjaGVja2VkJyk7XHJcbiAgICAkKCdpbnB1dFt2YWx1ZT0nICsgcGF5bWVudE1ldGhvZElEICsgJ10nKS5wcm9wKCdjaGVja2VkJywgJ2NoZWNrZWQnKTtcclxuXHJcbiAgICAvL2Zvcm1QcmVwYXJlLnZhbGlkYXRlRm9ybSgpO1xyXG59XHJcblxyXG4vKipcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBkZXNjcmlwdGlvbiBsb2FkcyBiaWxsaW5nIGFkZHJlc3MsIEdpZnQgQ2VydGlmaWNhdGVzLCBDb3Vwb24gYW5kIFBheW1lbnQgbWV0aG9kc1xyXG4gKi9cclxuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgLy92YXIgJGNoZWNrb3V0Rm9ybSA9ICQoJy5jaGVja291dC1iaWxsaW5nJyk7XHJcbiAgICAvL3ZhciAkYWRkR2lmdENlcnQgPSAkKCcjYWRkLWdpZnRjZXJ0Jyk7XHJcbiAgICAvL3ZhciAkZ2lmdENlcnRDb2RlID0gJCgnaW5wdXRbbmFtZSQ9XCJfZ2lmdENlcnRDb2RlXCJdJyk7XHJcbiAgICAvL3ZhciAkYWRkQ291cG9uID0gJCgnI2FkZC1jb3Vwb24nKTtcclxuICAgIC8vdmFyICRjb3Vwb25Db2RlID0gJCgnaW5wdXRbbmFtZSQ9XCJfY291cG9uQ29kZVwiXScpO1xyXG4gICAgdmFyICRzZWxlY3RQYXltZW50TWV0aG9kID0gJCgnLnBheW1lbnQtbWV0aG9kLW9wdGlvbnMnKTtcclxuICAgIHZhciBzZWxlY3RlZFBheW1lbnRNZXRob2QgPSAkc2VsZWN0UGF5bWVudE1ldGhvZC5maW5kKCc6Y2hlY2tlZCcpLnZhbCgpO1xyXG5cclxuICAgIC8qIGZvcm1QcmVwYXJlLmluaXQoe1xyXG4gICAgICAgICBmb3JtU2VsZWN0b3I6ICdmb3JtW2lkJD1cImJpbGxpbmdcIl0nLFxyXG4gICAgICAgICBjb250aW51ZVNlbGVjdG9yOiAnW25hbWUkPVwiYmlsbGluZ19zYXZlXCJdJ1xyXG4gICAgIH0pOyovXHJcbiAgICB2YXIgYWN0aXZlUGF5bWVudE1ldGhvZElEID0gJCgnYm9keScpLmZpbmQoJy5wYXltZW50bWV0aG9kc19jb250IC5pbnB1dC1yYWRpbzpjaGVja2VkJykuYXR0cignaWQnKTtcclxuICAgIGlmIChhY3RpdmVQYXltZW50TWV0aG9kSUQgPT0gJ2lzLVBheVBhbCcpIHtcclxuICAgICAgICAkKCcucGF5bWVudGZvcm0gLnRleHRpbnB1dCwgLnBheW1lbnRmb3JtIC55ZWFyc2VsZWN0IHNlbGVjdCwgLnBheW1lbnRmb3JtIC5tb250aHNlbGVjdCBzZWxlY3QsIC5hZGRyZXNzb3B0aW9ucyAuY2hlY2tpbnB1dCcpLnJlbW92ZUNsYXNzKCdyZXF1aXJlZCcpO1xyXG4gICAgICAgICQoJy5jYXJkbm90d29ya2luZycpLmhpZGUoKTtcclxuXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgICQoJy5wYXltZW50Zm9ybSAudGV4dGlucHV0LCAucGF5bWVudGZvcm0gLnllYXJzZWxlY3Qgc2VsZWN0LCAucGF5bWVudGZvcm0gLm1vbnRoc2VsZWN0IHNlbGVjdCwgLmFkZHJlc3NvcHRpb25zIC5jaGVja2lucHV0JykuYWRkQ2xhc3MoJ3JlcXVpcmVkJyk7XHJcbiAgICAgICAgJCgnLmNhcmRub3R3b3JraW5nJykuc2hvdygpO1xyXG5cclxuICAgIH1cclxuICAgIGlmICghalF1ZXJ5KCcuY3JlZGl0Y2FyZGxpc3Qgc2VsZWN0JykudmFsKCkpIHtcclxuICAgICAgICAkKCcuY3JlZGl0Y2FyZF9uYW1lJykudmFsKCcnKTtcclxuICAgICAgICAkKCcuY3JlZGl0Q2FyZC1udW1iZXInKS52YWwoJycpO1xyXG4gICAgICAgICQoJy5tb250aHNlbGVjdCcpLnZhbCgnJyk7XHJcbiAgICAgICAgJCgnLnllYXJzZWxlY3QnKS52YWwoJycpO1xyXG4gICAgICAgICQoJy5jcmVkaXRjYXJkX2N2bicpLnZhbCgnJyk7XHJcbiAgICAgICAgJCgnLmNhcmR0eXBlaW1nID4gZGl2JykuaGlkZSgpO1xyXG4gICAgICAgICQoJy5leHBpcmF0aW9uZGF0ZS5lcnJvcicpLmhpZGUoKTtcclxuICAgICAgICAkKCcuZXhwaXJhdGlvbmRhdGV2YWxpZC5lcnJvcicpLmhpZGUoKTtcclxuICAgICAgICAkKCcucGF5bWVudGZvcm0gYS5jbGVhcmJ1dHRvbicpLmhpZGUoKTtcclxuICAgIH1cclxuICAgICQoJy5leHBpcmF0aW9uZGF0ZSAuY3VzdG9tLXNlbGVjdCBzZWxlY3QnKS5vbignYmx1cicsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZCA9IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgIG10aCA9IGQuZ2V0TW9udGgoKSArIDEsXHJcbiAgICAgICAgICAgIHl5ID0gZC5nZXRGdWxsWWVhcigpO1xyXG4gICAgICAgIGlmICghalF1ZXJ5KHRoaXMpLnZhbCgpKSB7XHJcbiAgICAgICAgICAgICQoJy5leHBpcmF0aW9uZGF0ZS5lcnJvcicpLnNob3coKTtcclxuICAgICAgICAgICAgJCgnLmV4cGlyYXRpb25kYXRldmFsaWQuZXJyb3InKS5oaWRlKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKGpRdWVyeSgnLmV4cGlyYXRpb25kYXRlIC5jdXN0b20tc2VsZWN0LmN1c3RvbXNlbGVjdC1lcnJvcicpLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcuZXhwaXJhdGlvbmRhdGUuZXJyb3InKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcuZXhwaXJhdGlvbmRhdGV2YWxpZC5lcnJvcicpLmhpZGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRNdGggPSAkKCcuZXhwaXJhdGlvbmRhdGUgLmN1c3RvbS1zZWxlY3Qgc2VsZWN0W2lkJD1cXCdiaWxsaW5nX3BheW1lbnRNZXRob2RzX2NyZWRpdENhcmRfZXhwaXJhdGlvbl9tb250aFxcJ10nKS52YWwoKTtcclxuICAgICAgICAgICAgdmFyIHNlbGVjdGVkeWVhciA9ICQoJy5leHBpcmF0aW9uZGF0ZSAuY3VzdG9tLXNlbGVjdCBzZWxlY3RbaWQkPVxcJ2JpbGxpbmdfcGF5bWVudE1ldGhvZHNfY3JlZGl0Q2FyZF9leHBpcmF0aW9uX3llYXJcXCddJykudmFsKCk7XHJcbiAgICAgICAgICAgIGlmIChzZWxlY3RlZHllYXIgJiYgc2VsZWN0ZWRNdGgpIHtcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkeWVhciA9IHNlbGVjdGVkeWVhci5yZXBsYWNlKCcsJywgJycpO1xyXG4gICAgICAgICAgICAgICAgaWYgKChzZWxlY3RlZHllYXIgPD0geXkpICYmIChzZWxlY3RlZE10aCA8IG10aCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuZXhwaXJhdGlvbmRhdGUuZXJyb3InKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmV4cGlyYXRpb25kYXRldmFsaWQuZXJyb3InKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgICQoJ2JvZHknKS5vbignY2xpY2snLCAnLnJlZGVtcHRpb24gLmRpc2NvdW50LXN1Y2Nlc3MgYnV0dG9uLnJlbW92ZS1jb3AnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB2YXIgdXJsID0gJCh0aGlzKS52YWwoKTtcclxuICAgICAgICBjb3Vwb25NZW50aG9kcy5yZW1vdmVDb3Vwb25Db2RlKHVybCk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSk7XHJcbiAgICAvKiBKSVJBIFBSRVYtMTM1IDogRGlzYWJsZWQgQ3JlZGl0IENhcmQgaW4gQk0gaXMgZGlzcGxheWluZyBpbiB0aGUgYXBwbGljYXRpb24uXHJcbiAgICAgICBDaGFuZ2VkIGRlZmF1bHQgb3B0aW9uIGZyb20gJ0NSRURJVF9DQVJEJyB0byBmaXJzdCBhdmFpbGFibGUgcGF5bWVudCBtZXRob2QuKi9cclxuICAgIHVwZGF0ZVBheW1lbnRNZXRob2QoKHNlbGVjdGVkUGF5bWVudE1ldGhvZCkgPyBzZWxlY3RlZFBheW1lbnRNZXRob2QgOiAkKCcucGF5bWVudC1tZXRob2Qtb3B0aW9ucyBpbnB1dCcpLmZpcnN0KCkudmFsKCkpO1xyXG4gICAgJCgnYm9keScpLm9uKCdjbGljaycsICcucGF5bWVudC1tZXRob2Qtb3B0aW9ucyBpbnB1dFt0eXBlPVwicmFkaW9cIl0nLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdXBkYXRlUGF5bWVudE1ldGhvZCgkKHRoaXMpLnZhbCgpKTtcclxuICAgICAgICBpZiAoJCh0aGlzKS5pcygnOmNoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy50b2dnbGUnKS5zaWJsaW5ncygnLnRvZ2dsZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgaWYgKCQodGhpcykuYXR0cignaWQnKSA9PSAnaXMtUGF5UGFsJykge1xyXG4gICAgICAgICAgICAgICAgJCgnLnBheW1lbnRmb3JtIC50ZXh0aW5wdXQsIC5wYXltZW50Zm9ybSAueWVhcnNlbGVjdCBzZWxlY3QsIC5wYXltZW50Zm9ybSAubW9udGhzZWxlY3Qgc2VsZWN0LCAuYWRkcmVzc29wdGlvbnMgLmNoZWNraW5wdXQnKS5yZW1vdmVDbGFzcygncmVxdWlyZWQnKTtcclxuICAgICAgICAgICAgICAgICQoJy5jYXJkbm90d29ya2luZycpLmhpZGUoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICQoJy5wYXltZW50Zm9ybSAudGV4dGlucHV0LCAucGF5bWVudGZvcm0gLnllYXJzZWxlY3Qgc2VsZWN0LCAucGF5bWVudGZvcm0gLm1vbnRoc2VsZWN0IHNlbGVjdCwgLmFkZHJlc3NvcHRpb25zIC5jaGVja2lucHV0JykuYWRkQ2xhc3MoJ3JlcXVpcmVkJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcuY2FyZG5vdHdvcmtpbmcnKS5zaG93KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcudG9nZ2xlJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB1aWV2ZW50cy5jdXN0b21GaWVsZHMoKTtcclxuICAgICAgICB1aWV2ZW50cy5zeW5jY2hlY2tvdXRIKCk7XHJcbiAgICB9KTtcclxuICAgICQoJ2JvZHknKS5vbignY2xpY2snLCAnLnBheW1lbnQtbWV0aG9kLW9wdGlvbnMgLnRvZ2dsZSAgaW1nJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQodGhpcykuY2xvc2VzdCgnbGFiZWwnKS5maW5kKCdpbnB1dFt0eXBlPVwicmFkaW9cIl0nKS50cmlnZ2VyKCdjbGljaycpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gc2VsZWN0IGNyZWRpdCBjYXJkIGZyb20gbGlzdFxyXG4gICAgJCgnYm9keScpLm9uKCdjaGFuZ2UnLCAnI2NyZWRpdENhcmRMaXN0JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBjYXJkVVVJRCA9ICQodGhpcykudmFsKCk7XHJcbiAgICAgICAgaWYgKCFjYXJkVVVJRCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHBvcHVsYXRlQ3JlZGl0Q2FyZEZvcm0oY2FyZFVVSUQpO1xyXG5cclxuICAgICAgICAvLyByZW1vdmUgc2VydmVyIHNpZGUgZXJyb3JcclxuICAgICAgICAkKCcucmVxdWlyZWQuZXJyb3InKS5yZW1vdmVDbGFzcygnZXJyb3InKTtcclxuICAgICAgICAkKCcuZXJyb3ItbWVzc2FnZScpLnJlbW92ZSgpO1xyXG4gICAgfSk7XHJcbiAgICAkKCdib2R5Jykub24oJ2NsaWNrJywgJyNnaWZ0Y2VydGVudHJ5IGEucmVtb3ZlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBnY0lkID0gdXRpbC50cmltUHJlZml4KCQodGhpcykuYXR0cignaWQnKSwgJ3JnYy0nKTtcclxuICAgICAgICBjb3Vwb25NZW50aG9kcy5yZW1vdmVHaWZ0Q2VydGlmaWNhdGUoZ2NJZCk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSk7XHJcbiAgICAkKCdib2R5Jykub24oJ2NsaWNrJywgJyNjaGVjay1naWZ0Y2VydCcsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHZhciBnY0lkID0galF1ZXJ5KCdpbnB1dFtuYW1lJD1cXCdiaWxsaW5nX2dpZnRDZXJ0Q29kZVxcJ10nKS52YWwoKS50b1VwcGVyQ2FzZSgpO1xyXG4gICAgICAgIGNvdXBvbk1lbnRob2RzLmNoZWNrR2lmdENlcnRCYWxhbmNlKGdjSWQpO1xyXG4gICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCdib2R5Jykub24oJ2NsaWNrJywgJyNhZGQtZ2lmdGNlcnQnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB2YXIgZ2NJZCA9IGpRdWVyeSgnaW5wdXRbbmFtZSQ9XFwnYmlsbGluZ19naWZ0Q2VydENvZGVcXCddJykudmFsKCkudG9VcHBlckNhc2UoKTtcclxuICAgICAgICBjb3Vwb25NZW50aG9kcy5yZWRlZW1HaWZ0Q2VydChnY0lkKTtcclxuICAgICAgICB1aWV2ZW50cy5zeW5jY2hlY2tvdXRIKCk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnYm9keScpLm9uKCdjbGljaycsICcjYWRkLWNvdXBvbicsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHZhciAvLyRlcnJvciA9ICRjaGVja291dEZvcm0uZmluZCgnLmNvdXBvbi1lcnJvcicpLFxyXG4gICAgICAgICAgICBjb2RlID0gJCgnaW5wdXRbbmFtZSQ9XCJfY291cG9uQ29kZVwiXScpLnZhbCgpO1xyXG4gICAgICAgIGNvdXBvbk1lbnRob2RzLnNldENvdXBvbkVycm9yKG51bGwpO1xyXG4gICAgICAgIGlmIChjb2RlLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBjb3Vwb25NZW50aG9kcy5zZXRDb3Vwb25FcnJvcihSZXNvdXJjZXMuQ09VUE9OX0NPREVfTUlTU0lORyk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciB1cmwgPSB1dGlsLmFwcGVuZFBhcmFtc1RvVXJsKFVybHMuYWRkQ291cG9uLCB7XHJcbiAgICAgICAgICAgIGNvdXBvbkNvZGU6IGNvZGUsXHJcbiAgICAgICAgICAgIGZvcm1hdDogJ2FqYXgnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJC5nZXRKU09OKHVybCwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgdmFyIG1zZyA9ICcnO1xyXG4gICAgICAgICAgICBpZiAoIWRhdGEpIHtcclxuICAgICAgICAgICAgICAgIG1zZyA9IFJlc291cmNlcy5DT1VQT05fSU5WQUxJRDtcclxuICAgICAgICAgICAgICAgIGNvdXBvbk1lbnRob2RzLnNldENvdXBvbkVycm9yKG1zZyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGRhdGEucmVkZW1wdGlvbi5yZWRlbXB0aW9uRXJyb3JNc2cpIHtcclxuICAgICAgICAgICAgICAgIGNvdXBvbk1lbnRob2RzLnNldENvdXBvbkVycm9yKGRhdGEucmVkZW1wdGlvbi5yZWRlbXB0aW9uRXJyb3JNc2cpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghZGF0YS5yZWRlbXB0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBtc2cgPSBSZXNvdXJjZXMuQ09VUE9OX0lOVkFMSUQ7XHJcbiAgICAgICAgICAgICAgICBjb3Vwb25NZW50aG9kcy5zZXRDb3Vwb25FcnJvcihtc2cpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGVtcHR5IGlucHV0IGZpZWxkIGFuZCBkaXNwbGF5IHJlZGVtcHRpb24gaW4gVUlcclxuICAgICAgICAgICAgalF1ZXJ5KCdpbnB1dFtuYW1lJD1cXCdfYmlsbGluZ19jb3Vwb25Db2RlXFwnXScpLnZhbCgnJyk7XHJcbiAgICAgICAgICAgIGpRdWVyeSgnaW5wdXRbbmFtZSQ9XFwnX2JpbGxpbmdfY291cG9uQ29kZVxcJ10nKS5yZW1vdmVDbGFzcygnZXJyb3JjbGllbnQnKTtcclxuICAgICAgICAgICAgY291cG9uTWVudGhvZHMuc2V0Q291cG9uUmVkZW1wdGlvbkluZm8oZGF0YS5yZWRlbXB0aW9uKTtcclxuICAgICAgICAgICAgLy8gdXBkYXRlIGdpZnQgY2FyZCByZWRlbXB0aW9ucyBhcyBhbW91bnRzIG1pZ2h0IGhhdmUgY2hhbmdlZCBhZnRlciBjb3Vwb25cclxuICAgICAgICAgICAgalF1ZXJ5LmVhY2goZGF0YS5yZWRlbXB0aW9uLmdjUmVkZW1wdGlvbnMsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGNvdXBvbk1lbnRob2RzLnNldEdpZnRDZXJ0UmVkZW1wdGlvbkluZm8odGhpcy5naWZ0Q2VydGlmaWNhdGVJRCwgdGhpcy5hbW91bnQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdmFyIGNvdW50cnlDb2RlID0gJCgnaW5wdXRbbmFtZSQ9XFwnX2FkZHJlc3NGaWVsZHNfY291bnRyeVxcJ10nKS52YWwoKTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBjb3VudHJ5Q29kZSA9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgY291bnRyeUNvZGUgPSAnVVMnO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb3Vwb25NZW50aG9kcy51cGRhdGVTdW1tYXJ5KCk7XHJcbiAgICAgICAgICAgIGNvdXBvbk1lbnRob2RzLnVwZGF0ZWNhcnRzdW1tYXJ5KCk7XHJcbiAgICAgICAgICAgIGNvdXBvbk1lbnRob2RzLnVwZGF0ZVBheW1lbnRNZXRob2RzKGNvdW50cnlDb2RlKTtcclxuICAgICAgICAgICAgY291cG9uTWVudGhvZHMub3JkZXJ0b3RhbHMoKTtcclxuICAgICAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xyXG4gICAgICAgICAgICAvLyBEZXRlcm1pbmUgaWYgYSBib251cy1wcm9kdWN0IHByb21vdGlvbiB3YXMgdHJpZ2dlcmVkIGJ5IHRoZSBjb3Vwb24uXHJcbiAgICAgICAgICAgIC8vIElmIHNvLCBkaXNwbGF5IGEgcG9wdXAgYWxlcnQgYW5kIGdpdmUgdGhlIGN1c3RvbWVyIGEgY2hhbmNlIHRvXHJcbiAgICAgICAgICAgIC8vIHJldHVybiB0byB0aGUgY2FydCBhbmQgc2VsZWN0IHRoZSBib251cyBwcm9kdWN0LlxyXG4gICAgICAgICAgICBpZiAoZGF0YS5yZWRlbXB0aW9uLmJvbnVzUHJvbW90aW9uQXBwbGllZCkge1xyXG4gICAgICAgICAgICAgICAgJCgnLmJvbnVzZGlzY291bnRjb250YWluZXIgLmJvbnVzcHJvZHVjdHByb21vJykuYXBwZW5kKGRhdGEucmVkZW1wdGlvbi5ib251c1Byb21vdGlvbkNhbGxvdXQpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmJvbnVzZGlzY291bnRjb250YWluZXIgZGl2LmRldGFpbHMnKS5odG1sKGRhdGEucmVkZW1wdGlvbi5ib251c1Byb21vdGlvbkRldGFpbHMpO1xyXG5cclxuICAgICAgICAgICAgICAgICQoJy5ib251c2Rpc2NvdW50Y29udGFpbmVyJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmJvbnVzZGlzY291bnRjb250YWluZXInKS5kaWFsb2coe1xyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBSZXNvdXJjZXMuQk9OVVNfUFJPRFVDVCxcclxuICAgICAgICAgICAgICAgICAgICBiZ2lmcmFtZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBhdXRvT3BlbjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9kYWw6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAyNTAsXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDUwMCxcclxuICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IGZhbHNlXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGpRdWVyeSgnLmJvbnVzZGlzY291bnRjb250YWluZXInKS5kaWFsb2coJ29wZW4nKTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGpRdWVyeSgnLnNlbGVjdEJvbnVzQnRuJykudW5iaW5kKCdjbGljaycpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGpRdWVyeSgnLmJvbnVzZGlzY291bnRjb250YWluZXInKS5kaWFsb2coJ2Nsb3NlJyk7XHJcbiAgICAgICAgICAgICAgICBsb2NhdGlvbi5ocmVmID0gJyR7VVJMVXRpbHMuaHR0cHMoXFwnQ2FydC1TaG93XFwnKX0nO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGpRdWVyeSgnLm5vQm9udXNCdG4nKS51bmJpbmQoJ2NsaWNrJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgalF1ZXJ5KCcuYm9udXNkaXNjb3VudGNvbnRhaW5lcicpLmRpYWxvZygnY2xvc2UnKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyB0cmlnZ2VyIGV2ZW50cyBvbiBlbnRlclxyXG4gICAgJCgnYm9keScpLm9uKCdrZXlkb3duJywgJ2lucHV0W25hbWUkPVwiX2NvdXBvbkNvZGVcIl0nLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGlmIChlLndoaWNoID09PSAxMykge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICQoJyNhZGQtY291cG9uJykuY2xpY2soKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgICQoJ2JvZHknKS5vbigna2V5ZG93bicsICdpbnB1dFtuYW1lJD1cIl9naWZ0Q2VydENvZGVcIl0nLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGlmIChlLndoaWNoID09PSAxMykge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICQoJyNhZGQtZ2lmdGNlcnQnKS5jbGljaygpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgICQoJy50cnlwYXlwYWwnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnLmNvbnRpbnVlY2hlY2tvdXQtcGF5cGFsbG9naW4nKS50cmlnZ2VyKCdjbGljaycpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKCQoJy5wdF9jaGVja291dCAucGF5bWVudGZvcm0ucGF5cGFsIC5lcnJvci1wYXlwYWwtaGVhZGluZycpLmxlbmd0aCA+IDAgfHwgJCgnLnB0X2NoZWNrb3V0IC5wYXltZW50Zm9ybS5wYXlwYWwgLnBheXBhbG1zZy5zdWNjZXNzLXBheXBhbCcpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAkKCdib2R5LCBodG1sJykuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgIHNjcm9sbFRvcDogJCgnI3BheW1lbnRtZXRob2Rmb3JtIGxlZ2VuZCcpLm9mZnNldCgpLnRvcFxyXG4gICAgICAgIH0sIDYwMCk7XHJcbiAgICB9XHJcblxyXG4gICAgJCgnLnN3aXRjaHRvY3JlZGl0Jykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJy5wYXltZW50bWV0aG9kc19jb250IC50b2dnbGUnKS5lcSgwKS5maW5kKCcuaW5wdXQtcmFkaW8nKS50cmlnZ2VyKCdjbGljaycpO1xyXG4gICAgfSk7XHJcbiAgICAvL1BSRVZBSUwgLSBpbml0IEFkZHJlc3MgVmFsaWRhdGlvblxyXG4gICAgcmVxdWlyZSgnLi4vLi4vYWRkcmVzc3ZhbGlkYXRpb24nKS5pbml0KCk7XHJcblxyXG4gICAgdXRpbC5jYXJkdHlwZS5pbml0KCk7XHJcbiAgICAkKCdib2R5Jykub24oJ2NsaWNrJywgJy5jb3Vwb25jb2RlIC5sYWJlbCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoJCgnLnByb21vLWlucHV0LWJ1dHRvbicpLmlzKCc6dmlzaWJsZScpID09IHRydWUpIHtcclxuICAgICAgICAgICAgJCgnLnByb21vLWlucHV0LWJ1dHRvbicpLmhpZGUoKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuY291cG9uY29kZScpLmZpbmQoJ3NwYW4uZXJyb3InKS5oaWRlKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJCgnLnByb21vLWlucHV0LWJ1dHRvbicpLnNob3coKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuY291cG9uY29kZScpLmZpbmQoJ3NwYW4uZXJyb3InKS5zaG93KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcclxuICAgIH0pO1xyXG4gICAgaWYgKCQoJy5ndWVzdGJpbGxpbmdmb3JtIC5wYXNzd29yZCAuZXJyb3JtZXNzYWdlJykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICQoJy5ndWVzdGJpbGxpbmdmb3JtIC5wYXNzd29yZCAuZXJyb3JtZXNzYWdlJykucmVtb3ZlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgJCgnLmd1ZXN0YmlsbGluZ2Zvcm0gLmJpbGxpbmctY29ucGFzc3dvcmQnKS5ibHVyKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYmlsbGluZ1BhcyA9ICQoJy5ndWVzdGJpbGxpbmdmb3JtIC5iaWxsaW5nLXBhc3N3b3JkJykudmFsKCk7XHJcbiAgICAgICAgdmFyIGJpbGxpbmdDb25wYXMgPSAkKCcuZ3Vlc3RiaWxsaW5nZm9ybSAuYmlsbGluZy1jb25wYXNzd29yZCcpLnZhbCgpO1xyXG4gICAgICAgICQoJy5ndWVzdGJpbGxpbmdmb3JtIC5wYXNzd29yZCAuZXJyb3JtZXNzYWdlJykucmVtb3ZlKCk7XHJcbiAgICAgICAgaWYgKGJpbGxpbmdQYXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBpZiAoYmlsbGluZ0NvbnBhcy5sZW5ndGggPCA1KSB7XHJcbiAgICAgICAgICAgICAgICAkKCcuZ3Vlc3RiaWxsaW5nZm9ybSAuYmlsbGluZy1jb25wYXNzd29yZCcpLmFkZENsYXNzKCdlcnJvcmNsaWVudCcpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmJpbGxpbmdjb25mcGFzc3dvcmQnKS50ZXh0KFJlc291cmNlcy5iaWxsaW5ncGFzc3dvcmRjb25maXJtX21pbikucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgICAgIC8vJCgnLmNvbnRpbnVlY2hlY2tvdXRidXR0b24gLmNvbnRpbnVlY2hlY2tvdXQnKS5hdHRyKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGJpbGxpbmdQYXMgIT0gYmlsbGluZ0NvbnBhcykge1xyXG4gICAgICAgICAgICAgICAgJCgnLmd1ZXN0YmlsbGluZ2Zvcm0gLmJpbGxpbmctY29ucGFzc3dvcmQnKS5hZGRDbGFzcygnZXJyb3JjbGllbnQnKTtcclxuICAgICAgICAgICAgICAgICQoJy5iaWxsaW5nY29uZnBhc3N3b3JkJykudGV4dChSZXNvdXJjZXMuYmlsbGluZ3Bhc3N3b3JkY29uZmlybSkucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgICAgIC8vJCgnLmNvbnRpbnVlY2hlY2tvdXRidXR0b24gLmNvbnRpbnVlY2hlY2tvdXQnKS5hdHRyKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJCgnLmd1ZXN0YmlsbGluZ2Zvcm0gLmJpbGxpbmctY29ucGFzc3dvcmQnKS5yZW1vdmVDbGFzcygnZXJyb3JjbGllbnQnKTtcclxuICAgICAgICAgICAgICAgICQoJy5iaWxsaW5nY29uZnBhc3N3b3JkJykudGV4dChSZXNvdXJjZXMuYmlsbGluZ3Bhc3N3b3JkY29uZmlybSkuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgICAgIGlmICghJCgnaW5wdXRbbmFtZSQ9XCJfY3JlZGl0Q2FyZF9vd25lclwiXScpLmhhc0NsYXNzKCdlcnJvcmNsaWVudCcpICYmICEkKCdpbnB1dFtuYW1lJD1cIl9jcmVkaXRDYXJkX251bWJlclwiXScpLmhhc0NsYXNzKCdlcnJvcmNsaWVudCcpICYmICEkKCdpbnB1dFtuYW1lJD1cIl9jcmVkaXRDYXJkX2N2blwiXScpLmhhc0NsYXNzKCdlcnJvcmNsaWVudCcpICYmICEkKCdzZWxlY3RbbmFtZSQ9XCJwYXltZW50TWV0aG9kc19jcmVkaXRDYXJkX3llYXJcIl0nKS5oYXNDbGFzcygnZXJyb3JjbGllbnQnKSAmJiAhJCgnc2VsZWN0W25hbWUkPVwicGF5bWVudE1ldGhvZHNfY3JlZGl0Q2FyZF9tb250aFwiXScpLmhhc0NsYXNzKCdlcnJvcmNsaWVudCcpICYmICQoJ2lucHV0W25hbWUkPVwiX2NyZWRpdENhcmRfb3duZXJcIl0nKS52YWwoKSAhPSAnJyAmJiAkKCdpbnB1dFtuYW1lJD1cIl9jcmVkaXRDYXJkX251bWJlclwiXScpLnZhbCgpICE9ICcnICYmICQoJ2lucHV0W25hbWUkPVwiX2NyZWRpdENhcmRfY3ZuXCJdJykudmFsKCkgIT0gJycgJiYgJCgnc2VsZWN0W25hbWUkPVwicGF5bWVudE1ldGhvZHNfY3JlZGl0Q2FyZF95ZWFyXCJdJykudmFsKCkgIT0gJycgJiYgJCgnc2VsZWN0W25hbWUkPVwicGF5bWVudE1ldGhvZHNfY3JlZGl0Q2FyZF9tb250aFwiXScpLnZhbCgpICE9ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8kKCcuY29udGludWVjaGVja291dGJ1dHRvbiAuY29udGludWVjaGVja291dCcpLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkKCcuZ3Vlc3RiaWxsaW5nZm9ybSAuYmlsbGluZy1jb25wYXNzd29yZCcpLnJlbW92ZUNsYXNzKCdlcnJvcmNsaWVudCcpO1xyXG4gICAgICAgICAgICAkKCcuYmlsbGluZ2NvbmZwYXNzd29yZCcpLnRleHQoUmVzb3VyY2VzLmJpbGxpbmdwYXNzd29yZGNvbmZpcm0pLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgIGlmICghJCgnaW5wdXRbbmFtZSQ9XCJfY3JlZGl0Q2FyZF9vd25lclwiXScpLmhhc0NsYXNzKCdlcnJvcmNsaWVudCcpICYmICEkKCdpbnB1dFtuYW1lJD1cIl9jcmVkaXRDYXJkX251bWJlclwiXScpLmhhc0NsYXNzKCdlcnJvcmNsaWVudCcpICYmICEkKCdpbnB1dFtuYW1lJD1cIl9jcmVkaXRDYXJkX2N2blwiXScpLmhhc0NsYXNzKCdlcnJvcmNsaWVudCcpICYmICEkKCdzZWxlY3RbbmFtZSQ9XCJwYXltZW50TWV0aG9kc19jcmVkaXRDYXJkX3llYXJcIl0nKS5oYXNDbGFzcygnZXJyb3JjbGllbnQnKSAmJiAhJCgnc2VsZWN0W25hbWUkPVwicGF5bWVudE1ldGhvZHNfY3JlZGl0Q2FyZF9tb250aFwiXScpLmhhc0NsYXNzKCdlcnJvcmNsaWVudCcpICYmICQoJ2lucHV0W25hbWUkPVwiX2NyZWRpdENhcmRfb3duZXJcIl0nKS52YWwoKSAhPSAnJyAmJiAkKCdpbnB1dFtuYW1lJD1cIl9jcmVkaXRDYXJkX251bWJlclwiXScpLnZhbCgpICE9ICcnICYmICQoJ2lucHV0W25hbWUkPVwiX2NyZWRpdENhcmRfY3ZuXCJdJykudmFsKCkgIT0gJycgJiYgJCgnc2VsZWN0W25hbWUkPVwicGF5bWVudE1ldGhvZHNfY3JlZGl0Q2FyZF95ZWFyXCJdJykudmFsKCkgIT0gJycgJiYgJCgnc2VsZWN0W25hbWUkPVwicGF5bWVudE1ldGhvZHNfY3JlZGl0Q2FyZF9tb250aFwiXScpLnZhbCgpICE9ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAvLyQoJy5jb250aW51ZWNoZWNrb3V0YnV0dG9uIC5jb250aW51ZWNoZWNrb3V0JykucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgJCgnLmd1ZXN0YmlsbGluZ2Zvcm0gLmJpbGxpbmctcGFzc3dvcmQnKS5iaW5kKCdibHVyJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBiaWxsaW5nUGFzID0gJCgnLmd1ZXN0YmlsbGluZ2Zvcm0gLmJpbGxpbmctcGFzc3dvcmQnKS52YWwoKTtcclxuICAgICAgICB2YXIgYmlsbGluZ0NvbnBhcyA9ICQoJy5ndWVzdGJpbGxpbmdmb3JtIC5iaWxsaW5nLWNvbnBhc3N3b3JkJykudmFsKCk7XHJcbiAgICAgICAgLy8kKCcuY29udGludWVjaGVja291dGJ1dHRvbiAuY29udGludWVjaGVja291dCcpLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XHJcblxyXG4gICAgICAgIGlmICgkKHRoaXMpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgJCgnLmd1ZXN0YmlsbGluZ2Zvcm0gLmJpbGxpbmctY29ucGFzc3dvcmQnKS5hZGRDbGFzcygncmVxdWlyZWQnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkKCcuZ3Vlc3RiaWxsaW5nZm9ybSAuYmlsbGluZy1jb25wYXNzd29yZCcpLnJlbW92ZUNsYXNzKCdyZXF1aXJlZCcpO1xyXG4gICAgICAgICAgICAkKCcuZ3Vlc3RiaWxsaW5nZm9ybSAuYmlsbGluZy1jb25wYXNzd29yZCcpLnJlbW92ZUNsYXNzKCdlcnJvcmNsaWVudCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYmlsbGluZ1Bhcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGlmIChiaWxsaW5nUGFzLmxlbmd0aCA8IDUpIHtcclxuICAgICAgICAgICAgICAgICQoJy5ndWVzdGJpbGxpbmdmb3JtIC5iaWxsaW5nLXBhc3N3b3JkJykuYWRkQ2xhc3MoJ2Vycm9yY2xpZW50Jyk7XHJcbiAgICAgICAgICAgICAgICAkKCcuYmlsbGluZ3Bhc3N3b3JkJykudGV4dChSZXNvdXJjZXMuYmlsbGluZ3Bhc3N3b3JkY29uZmlybV9taW4pLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgICAgICAvLyQoJy5jb250aW51ZWNoZWNrb3V0YnV0dG9uIC5jb250aW51ZWNoZWNrb3V0JykuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICQoJy5ndWVzdGJpbGxpbmdmb3JtIC5iaWxsaW5nLXBhc3N3b3JkJykucmVtb3ZlQ2xhc3MoJ2Vycm9yY2xpZW50Jyk7XHJcbiAgICAgICAgICAgICAgICAkKCcuYmlsbGluZ3Bhc3N3b3JkJykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICQoJy5ndWVzdGJpbGxpbmdmb3JtIC5iaWxsaW5nLXBhc3N3b3JkJykucmVtb3ZlQ2xhc3MoJ2Vycm9yY2xpZW50Jyk7XHJcbiAgICAgICAgICAgICQoJy5iaWxsaW5ncGFzc3dvcmQnKS5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKChiaWxsaW5nUGFzID09IGJpbGxpbmdDb25wYXMpICYmIChiaWxsaW5nUGFzLmxlbmd0aCA+PSA1KSkge1xyXG4gICAgICAgICAgICBpZiAoISQoJ2lucHV0W25hbWUkPVwiX2NyZWRpdENhcmRfb3duZXJcIl0nKS5oYXNDbGFzcygnZXJyb3JjbGllbnQnKSAmJiAhJCgnaW5wdXRbbmFtZSQ9XCJfY3JlZGl0Q2FyZF9udW1iZXJcIl0nKS5oYXNDbGFzcygnZXJyb3JjbGllbnQnKSAmJiAhJCgnaW5wdXRbbmFtZSQ9XCJfY3JlZGl0Q2FyZF9jdm5cIl0nKS5oYXNDbGFzcygnZXJyb3JjbGllbnQnKSAmJiAhJCgnc2VsZWN0W25hbWUkPVwicGF5bWVudE1ldGhvZHNfY3JlZGl0Q2FyZF95ZWFyXCJdJykuaGFzQ2xhc3MoJ2Vycm9yY2xpZW50JykgJiYgISQoJ3NlbGVjdFtuYW1lJD1cInBheW1lbnRNZXRob2RzX2NyZWRpdENhcmRfbW9udGhcIl0nKS5oYXNDbGFzcygnZXJyb3JjbGllbnQnKSAmJiAkKCdpbnB1dFtuYW1lJD1cIl9jcmVkaXRDYXJkX293bmVyXCJdJykudmFsKCkgIT0gJycgJiYgJCgnaW5wdXRbbmFtZSQ9XCJfY3JlZGl0Q2FyZF9udW1iZXJcIl0nKS52YWwoKSAhPSAnJyAmJiAkKCdpbnB1dFtuYW1lJD1cIl9jcmVkaXRDYXJkX2N2blwiXScpLnZhbCgpICE9ICcnICYmICQoJ3NlbGVjdFtuYW1lJD1cInBheW1lbnRNZXRob2RzX2NyZWRpdENhcmRfeWVhclwiXScpLnZhbCgpICE9ICcnICYmICQoJ3NlbGVjdFtuYW1lJD1cInBheW1lbnRNZXRob2RzX2NyZWRpdENhcmRfbW9udGhcIl0nKS52YWwoKSAhPSAnJykge1xyXG4gICAgICAgICAgICAgICAgLy8kKCcuY29udGludWVjaGVja291dGJ1dHRvbiAuY29udGludWVjaGVja291dCcpLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoJCgnLmV4cGlyYXRpb25kYXRlIC5jdXN0b20tc2VsZWN0IC5maWVsZC13cmFwcGVyIHNwYW4uZXJyb3JtZXNzYWdlJykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICQoJy5leHBpcmF0aW9uZGF0ZSAuY3VzdG9tLXNlbGVjdCBzcGFuLmVycm9ybWVzc2FnZScpLmhpZGUoKTtcclxuICAgICAgICAkKCcuZXhwaXJhdGlvbmRhdGUuZXJyb3InKS5zaG93KCk7XHJcbiAgICB9XHJcbiAgICAkKCcuY2hlY2tvdXRiaWxsaW5nIC5jb250aW51ZS1jaGVja291dC1idXR0b24gLmNvbnRpbnVlY2hlY2tvdXQnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyICRjaGVja291dEJ1dHRvbiA9ICQoJy5jb250aW51ZWNoZWNrb3V0LnBsYWNlLW9yZGVyLWJ0bicpO1xyXG4gICAgICAgIGlmIChuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9UcmlkZW50XFwvN1xcLi8pKSB7XHJcbiAgICAgICAgICAgICQoJy5jb250aW51ZWNoZWNrb3V0LnBsYWNlLW9yZGVyLWJ0bicpLmFwcGVuZCgnPGRpdiBjbGFzcz1cImxvYWRlclwiPjxkaXYgY2xhc3M9XCJsb2FkZXItaW5kaWNhdG9yXCI+PC9kaXY+PGRpdiBjbGFzcz1cImxvYWRlci1iZ1wiPjwvZGl2PjwvZGl2PicpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHByb2dyZXNzLnNob3coJGNoZWNrb3V0QnV0dG9uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGVycm9yY291bnQgPSAwO1xyXG4gICAgICAgIGlmICghKCQoJyNQYXltZW50TWV0aG9kX0NSRURJVF9DQVJEJykuaXMoJzp2aXNpYmxlJykpKSB7XHJcbiAgICAgICAgICAgICQoJy5wYXltZW50Zm9ybSAudGV4dGlucHV0LCAucGF5bWVudGZvcm0gc2VsZWN0JykucmVtb3ZlQ2xhc3MoJ3JlcXVpcmVkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghalF1ZXJ5KCdmb3JtW2lkJD1cIl9iaWxsaW5nXCJdJykudmFsaWQoKSkge1xyXG4gICAgICAgICAgICBwcm9ncmVzcy5oaWRlKCk7XHJcbiAgICAgICAgICAgICQoZnVuY3Rpb24gKCl7XHJcbiAgICAgICAgICAgICAgICBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvVHJpZGVudFxcLzdcXC4vKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5jb250aW51ZWNoZWNrb3V0LnBsYWNlLW9yZGVyLWJ0biAubG9hZGVyJykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIGpRdWVyeSgnLnN0YXRlLWJsayBzZWxlY3QnKS50cmlnZ2VyKCdibHVyJyk7XHJcbiAgICAgICAgICAgIGlmIChqUXVlcnkoJy5iaWxsaW5nLWFkZHJlc3MtZmllbGRzJykuaGFzQ2xhc3MoJ2hpZGUnKSkge1xyXG4gICAgICAgICAgICAgICAgJCgnc2VsZWN0W25hbWUkPWJpbGxpbmdfYWRkcmVzc0xpc3RdJykudmFsKCcnKTtcclxuICAgICAgICAgICAgICAgICQoJ2lucHV0W25hbWUkPVwiYmlsbGluZ0FkZHJlc3Nfc2VsZWN0ZWRiaWxsaW5nYWRkXCJdJykudmFsKCcnKTtcclxuICAgICAgICAgICAgICAgICQoJy5jdXN0b20tc2VsZWN0JykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdFZhbCA9ICQodGhpcykuZmluZCgnOnNlbGVjdGVkJykudGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLnNlbGVjdG9yT3V0JykudGV4dChzZWxlY3RWYWwpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBqUXVlcnkoJy5iaWxsaW5nLWFkZHJlc3MtZmllbGRzJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgICAgIGpRdWVyeSgnLnNlbGVjdGVkLWJpbGxpbmctYWRkcmVzcyAsIC5zZWxlY3RlZC1zaGlwcGluZy1hZGRyZXNzJykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgICAgIHVpZXZlbnRzLmN1c3RvbUZpZWxkcygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVycm9yY291bnQrKztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCQoJyNQYXltZW50TWV0aG9kX0NSRURJVF9DQVJEJykuaXMoJzp2aXNpYmxlJykpIHtcclxuICAgICAgICAgICAgaWYgKCEkKCdmb3JtW2lkJD1cImR3ZnJtX2JpbGxpbmdcIl0nKS52YWxpZCgpKSB7XHJcbiAgICAgICAgICAgICAgICBwcm9ncmVzcy5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcuZXhwaXJhdGlvbmRhdGUgc2VsZWN0JykudHJpZ2dlcignYmx1cicpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICgkKCcudmlwLXRlcm1zIC5jdXN0b20tbGluaycpLmlzKCc6dmlzaWJsZScpICYmICEkKCdpbnB1dFtuYW1lJD1cIl9pc3ZpcFwiXScpLmlzKCc6Y2hlY2tlZCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQoJy52aXAtdGVybXMgLmN1c3RvbS1jaGVja2JveCAudmlwLW1lc3NhZ2UgI21lc3NhZ2UnKS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcudmlwLXRlcm1zIC5jdXN0b20tY2hlY2tib3ggLnZpcC1tZXNzYWdlJykucHJlcGVuZCgnPHNwYW4gaWQ9XCJtZXNzYWdlXCIgY2xhc3M9XCJlcnJvciB2aXBjaGVja21lc3NhZ2VcIj5QbGVhc2UgY2hlY2sgdGhlIGJveCB0byBjb25maXJtIHlvdSBoYXZlIHJlYWQgYW5kIGFncmVlIHRvIHRoZSBSYXBhbGEgVklQIFRlcm1zICYgQ29uZGl0aW9ucy48L3NwYW4+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5zaW5nbGVzaGlwcGluZ19lcnJvcicpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLnZpcC10ZXJtcyAuY3VzdG9tLWNoZWNrYm94IC5jdXN0b20tbGluaycpLmFkZENsYXNzKCdlcnJvcicpO1xyXG4gICAgICAgICAgICAgICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICgkKCcua25pZmUgLmN1c3RvbS1saW5rLmFnZWNoZWNrLWxpbmsnKS5pcygnOnZpc2libGUnKSAmJiAhJCgnaW5wdXRbbmFtZSQ9XCJhZ2VjaGVja19pc2NoZWNrXCJdJykuaXMoJzpjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJCgnLmFkZHJlc3NvcHRpb25zLmtuaWZlIC5hZ2VjaGVja19tZXNzYWdlICNtZXNzYWdlJykubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmFkZHJlc3NvcHRpb25zLmtuaWZlIC5hZ2VjaGVja19tZXNzYWdlJykucHJlcGVuZCgnPHNwYW4gaWQ9XCJtZXNzYWdlXCIgY2xhc3M9XCJlcnJvciBhZ2VjaGVja21lc3NhZ2VcIj5QbGVhc2UgVmVyaWZ5IHlvdSBhcmUgMTggeWVhcnMgb2YgYWdlIG9yIG9sZGVyLCBvciByZW1vdmUgYWxsIGtuaXZlcyBmcm9tIHlvdXIgY2FydC48L3NwYW4+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5zaW5nbGVzaGlwcGluZ19lcnJvcicpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmFkZHJlc3NvcHRpb25zLmtuaWZlID4gLmN1c3RvbS1jaGVja2JveCAuY3VzdG9tLWxpbmsnKS5hZGRDbGFzcygnZXJyb3InKTtcclxuICAgICAgICAgICAgICAgICAgICB1aWV2ZW50cy5zeW5jY2hlY2tvdXRIKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlcnJvcmNvdW50Kys7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCQoJy52aXAtdGVybXMgLmN1c3RvbS1saW5rJykuaXMoJzp2aXNpYmxlJykgJiYgISQoJ2lucHV0W25hbWUkPVwiX2lzdmlwXCJdJykuaXMoJzpjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJCgnLnZpcC10ZXJtcyAuY3VzdG9tLWNoZWNrYm94IC52aXAtbWVzc2FnZSAjbWVzc2FnZScpLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy52aXAtdGVybXMgLmN1c3RvbS1jaGVja2JveCAudmlwLW1lc3NhZ2UnKS5wcmVwZW5kKCc8c3BhbiBpZD1cIm1lc3NhZ2VcIiBjbGFzcz1cImVycm9yIHZpcGNoZWNrbWVzc2FnZVwiPlBsZWFzZSBjaGVjayB0aGUgYm94IHRvIGNvbmZpcm0geW91IGhhdmUgcmVhZCBhbmQgYWdyZWUgdG8gdGhlIFJhcGFsYSBWSVAgVGVybXMgJiBDb25kaXRpb25zLjwvc3Bhbj4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnNpbmdsZXNoaXBwaW5nX2Vycm9yJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAkKCcudmlwLXRlcm1zIC5jdXN0b20tY2hlY2tib3ggLmN1c3RvbS1saW5rJykuYWRkQ2xhc3MoJ2Vycm9yJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yY291bnQrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICgkKCcua25pZmUgLmN1c3RvbS1saW5rLmFnZWNoZWNrLWxpbmsnKS5pcygnOnZpc2libGUnKSAmJiAhJCgnaW5wdXRbbmFtZSQ9XCJhZ2VjaGVja19pc2NoZWNrXCJdJykuaXMoJzpjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJCgnLmFkZHJlc3NvcHRpb25zLmtuaWZlIC5hZ2VjaGVja19tZXNzYWdlICNtZXNzYWdlJykubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmFkZHJlc3NvcHRpb25zLmtuaWZlIC5hZ2VjaGVja19tZXNzYWdlJykucHJlcGVuZCgnPHNwYW4gaWQ9XCJtZXNzYWdlXCIgY2xhc3M9XCJlcnJvciBhZ2VjaGVja21lc3NhZ2VcIj5QbGVhc2UgVmVyaWZ5IHlvdSBhcmUgMTggeWVhcnMgb2YgYWdlIG9yIG9sZGVyLCBvciByZW1vdmUgYWxsIGtuaXZlcyBmcm9tIHlvdXIgY2FydC48L3NwYW4+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5zaW5nbGVzaGlwcGluZ19lcnJvcicpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmFkZHJlc3NvcHRpb25zLmtuaWZlID4gLmN1c3RvbS1jaGVja2JveCAuY3VzdG9tLWxpbmsnKS5hZGRDbGFzcygnZXJyb3InKTtcclxuICAgICAgICAgICAgICAgICAgICB1aWV2ZW50cy5zeW5jY2hlY2tvdXRIKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3Jjb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKCQoJy52aXAtdGVybXMgLmN1c3RvbS1saW5rJykuaXMoJzp2aXNpYmxlJykgJiYgISQoJ2lucHV0W25hbWUkPVwiX2lzdmlwXCJdJykuaXMoJzpjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICAgIGlmICgkKCcudmlwLXRlcm1zIC5jdXN0b20tY2hlY2tib3ggLnZpcC1tZXNzYWdlICNtZXNzYWdlJykubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcudmlwLXRlcm1zIC5jdXN0b20tY2hlY2tib3ggLnZpcC1tZXNzYWdlJykucHJlcGVuZCgnPHNwYW4gaWQ9XCJtZXNzYWdlXCIgY2xhc3M9XCJlcnJvciB2aXBjaGVja21lc3NhZ2VcIj5QbGVhc2UgY2hlY2sgdGhlIGJveCB0byBjb25maXJtIHlvdSBoYXZlIHJlYWQgYW5kIGFncmVlIHRvIHRoZSBSYXBhbGEgVklQIFRlcm1zICYgQ29uZGl0aW9ucy48L3NwYW4+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLnNpbmdsZXNoaXBwaW5nX2Vycm9yJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJCgnLnZpcC10ZXJtcyAuY3VzdG9tLWNoZWNrYm94IC5jdXN0b20tbGluaycpLmFkZENsYXNzKCdlcnJvcicpO1xyXG4gICAgICAgICAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xyXG4gICAgICAgICAgICAgICAgZXJyb3Jjb3VudCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICgkKCcua25pZmUgLmN1c3RvbS1saW5rLmFnZWNoZWNrLWxpbmsnKS5pcygnOnZpc2libGUnKSAmJiAhJCgnaW5wdXRbbmFtZSQ9XCJhZ2VjaGVja19pc2NoZWNrXCJdJykuaXMoJzpjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICAgIGlmICgkKCcuYWRkcmVzc29wdGlvbnMua25pZmUgLmFnZWNoZWNrX21lc3NhZ2UgI21lc3NhZ2UnKS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5hZGRyZXNzb3B0aW9ucy5rbmlmZSAgLmFnZWNoZWNrX21lc3NhZ2UnKS5wcmVwZW5kKCc8c3BhbiBpZD1cIm1lc3NhZ2VcIiBjbGFzcz1cImVycm9yIGFnZWNoZWNrbWVzc2FnZVwiPlBsZWFzZSBWZXJpZnkgeW91IGFyZSAxOCB5ZWFycyBvZiBhZ2Ugb3Igb2xkZXIsIG9yIHJlbW92ZSBhbGwga25pdmVzIGZyb20geW91ciBjYXJ0Ljwvc3Bhbj4nKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuc2luZ2xlc2hpcHBpbmdfZXJyb3InKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkKCcuYWRkcmVzc29wdGlvbnMua25pZmUgID4gLmN1c3RvbS1jaGVja2JveCAuY3VzdG9tLWxpbmsnKS5hZGRDbGFzcygnZXJyb3InKTtcclxuICAgICAgICAgICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcclxuICAgICAgICAgICAgICAgIGVycm9yY291bnQrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvKiAgICAgaWYoISQoJ2lucHV0LnBheXBhbHByb2Nlc3NlZCcpLnZhbCgpKXtcclxuICAgICAgICAgICAgICAgICAgICAgJCgnLnBheW1lbnRmb3JtLnBheXBhbCAucGF5cGFsbXNnJykuYWRkQ2xhc3MoJ2Vycm9yJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgIH0qL1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZXJyb3Jjb3VudCA+IDApIHtcclxuICAgICAgICAgICAgcHJvZ3Jlc3MuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKCcuc2luZ2xlc2hpcHBpbmdfZXJyb3InKS5zaG93KCk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCQoJy5iaWxsaW5nLWFkZHJlc3MtZmllbGRzJykuaXMoJzp2aXNpYmxlJykpIHtcclxuICAgICAgICAgICAgJCgnLmJpbGxpbmctYWRkcmVzcy1maWVsZHMgLnN0YXRlLWJsayBzZWxlY3QnKS5ibHVyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAvL0pJUkEgUFJFVi0zOCA6IEJpbGxpbmcgcGFnZV9DcmVkaXQgQ2FyZCBTZWN0aW9uOiBDVlYgbnVtYmVyIHNob3VsZCBub3QgcHJlLXBvcHVsYXRlLlxyXG4gICAgLyppZiAoJCgnLmJ5cGFzc0RBVicpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICQoJy5zcGMtYmlsbGluZyAuZm9ybS1yb3cuY3ZuIGlucHV0JykudmFsKCcnKTtcclxuICAgIH0qL1xyXG4gICAgaWYgKCQoJy5pbnZhbGlkQ3JlZGl0Y2FyZCcpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAvLyQoJy5zaW5nbGVzaGlwcGluZ19lcnJvcicpLnNob3coKTtcclxuICAgICAgICAkKCcuY2FyZG51bWJlciBpbnB1dCcpLmFkZENsYXNzKCdlcnJvcmNsaWVudCcpO1xyXG4gICAgICAgICQoJy5jYXJkbnVtYmVyIC5sYWJlbHRleHQnKS5hZGRDbGFzcygnZXJyb3InKTtcclxuICAgICAgICAkKCc8c3BhbiBjbGFzcz1cImludmFsaWRjcmVkaXQgZXJyb3JcIj4tIEludmFsaWQgQ3JlZGl0IENhcmQgTnVtYmVyPC9zcGFuPicpLmFwcGVuZFRvKCcuY2FyZG51bWJlciAuZmllbGQtd3JhcHBlcicpO1xyXG4gICAgICAgIC8vJCgnLnNpbmdsZXNoaXBwaW5nX2Vycm9yJykuc2hvdygpO1xyXG4gICAgICAgICQoJy5jYXJkbnVtYmVyIC5lcnJvcm1lc3NhZ2UnKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xyXG4gICAgfVxyXG59O1xyXG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG52YXIgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xyXG5cclxudmFyICRmb3JtLCAkcmVxdWlyZWRJbnB1dHMsIHZhbGlkYXRvcjtcclxuXHJcbnZhciBoYXNFbXB0eVJlcXVpcmVkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gZmlsdGVyIG91dCBvbmx5IHRoZSB2aXNpYmxlIGZpZWxkc1xyXG4gICAgdmFyIHJlcXVpcmVkVmFsdWVzID0gJHJlcXVpcmVkSW5wdXRzLmZpbHRlcignOnZpc2libGUnKS5tYXAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiAkKHRoaXMpLnZhbCgpO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gXyhyZXF1aXJlZFZhbHVlcykuY29udGFpbnMoJycpO1xyXG59O1xyXG5cclxudmFyIHZhbGlkYXRlRm9ybSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vIG9ubHkgdmFsaWRhdGUgZm9ybSB3aGVuIGFsbCByZXF1aXJlZCBmaWVsZHMgYXJlIGZpbGxlZCB0byBhdm9pZFxyXG4gICAgLy8gdGhyb3dpbmcgZXJyb3JzIG9uIGVtcHR5IGZvcm1cclxuICAgIGlmICghdmFsaWRhdG9yKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKCFoYXNFbXB0eVJlcXVpcmVkKCkpIHtcclxuICAgICAgICBpZiAodmFsaWRhdG9yLmZvcm0oKSkge1xyXG4gICAgICAgICAgICAvLyRjb250aW51ZS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8kY29udGludWUuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcclxuICAgIH1cclxufTtcclxuXHJcbnZhciB2YWxpZGF0ZUVsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKCQodGhpcykudmFsKCkgPT09ICcnKSB7XHJcbiAgICAgICAgLy8gJGNvbnRpbnVlLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIGVuYWJsZSBjb250aW51ZSBidXR0b24gb24gbGFzdCByZXF1aXJlZCBmaWVsZCB0aGF0IGlzIHZhbGlkXHJcbiAgICAgICAgLy8gb25seSB2YWxpZGF0ZSBzaW5nbGUgZmllbGRcclxuICAgICAgICBpZiAodmFsaWRhdG9yLmVsZW1lbnQodGhpcykgJiYgIWhhc0VtcHR5UmVxdWlyZWQoKSkge1xyXG4gICAgICAgICAgICAvLyRjb250aW51ZS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vJGNvbnRpbnVlLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG5cclxudmFyIGluaXQgPSBmdW5jdGlvbiAob3B0cykge1xyXG4gICAgaWYgKCFvcHRzLmZvcm1TZWxlY3RvciB8fCAhb3B0cy5jb250aW51ZVNlbGVjdG9yKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGZvcm0gYW5kIGNvbnRpbnVlIGFjdGlvbiBzZWxlY3RvcnMuJyk7XHJcbiAgICB9XHJcbiAgICAkZm9ybSA9ICQob3B0cy5mb3JtU2VsZWN0b3IpO1xyXG4gICAgLy8kY29udGludWUgPSAkKG9wdHMuY29udGludWVTZWxlY3Rvcik7XHJcbiAgICB2YWxpZGF0b3IgPSAkZm9ybS52YWxpZGF0ZSgpO1xyXG4gICAgJHJlcXVpcmVkSW5wdXRzID0gJCgnLnJlcXVpcmVkJywgJGZvcm0pLmZpbmQoJzppbnB1dCcpO1xyXG4gICAgdmFsaWRhdGVGb3JtKCk7XHJcbiAgICAvLyBzdGFydCBsaXN0ZW5pbmdcclxuICAgICRyZXF1aXJlZElucHV0cy5vbignY2hhbmdlJywgdmFsaWRhdGVFbCk7XHJcbiAgICAkcmVxdWlyZWRJbnB1dHMuZmlsdGVyKCdpbnB1dCcpLm9uKCdrZXl1cCcsIF8uZGVib3VuY2UodmFsaWRhdGVFbCwgMjAwKSk7XHJcbn07XHJcblxyXG5leHBvcnRzLmluaXQgPSBpbml0O1xyXG5leHBvcnRzLnZhbGlkYXRlRm9ybSA9IHZhbGlkYXRlRm9ybTtcclxuZXhwb3J0cy52YWxpZGF0ZUVsID0gdmFsaWRhdGVFbDtcclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxudmFyIGFkZHJlc3MgPSByZXF1aXJlKCcuL2FkZHJlc3MnKSxcclxuICAgIGJpbGxpbmcgPSByZXF1aXJlKCcuL2JpbGxpbmcnKSxcclxuICAgIG11bHRpc2hpcCA9IHJlcXVpcmUoJy4vbXVsdGlzaGlwJyksXHJcbiAgICB1aWV2ZW50cyA9IHJlcXVpcmUoJy4uLy4uL3VpZXZlbnRzJyksXHJcbiAgICB1dGlsID0gcmVxdWlyZSgnLi4vLi4vdXRpbCcpLFxyXG4gICAgc2hpcHBpbmcgPSByZXF1aXJlKCcuL3NoaXBwaW5nJyk7XHJcblxyXG4vKipcclxuICogQGZ1bmN0aW9uIEluaXRpYWxpemVzIHRoZSBwYWdlIGV2ZW50cyBkZXBlbmRpbmcgb24gdGhlIGNoZWNrb3V0IHN0YWdlIChzaGlwcGluZy9iaWxsaW5nKVxyXG4gKi9cclxuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgYWRkcmVzcy5pbml0KCk7XHJcbiAgICBpZiAoJCgnLmFsbG90bWVudC1sYWJlbCcpLmxlbmd0aCA+IDAgfHwgJCgnLmJyYW5kLXJhcGFsYS1jaGVja291dCcpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAkKCdib2R5JykuZmluZCgnI21haW4nKS5hZGRDbGFzcygnYWxsb3RtZW50LWF2YWlsYWJsZScpO1xyXG4gICAgfVxyXG4gICAgaWYgKCQoJy5jaGVja291dC1zaGlwcGluZycpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBzaGlwcGluZy5pbml0KCk7XHJcbiAgICB9IGVsc2UgaWYgKCQoJy5jaGVja291dC1tdWx0aS1zaGlwcGluZycpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBtdWx0aXNoaXAuaW5pdCgpO1xyXG4gICAgfSAgZWxzZSB7XHJcbiAgICAgICAgYmlsbGluZy5pbml0KCk7XHJcbiAgICB9XHJcbiAgICAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCcudWktZGlhbG9nLWNvbnRlbnQ6dmlzaWJsZScpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLmRpYWxvZygnb3B0aW9uJywgJ3Bvc2l0aW9uJywgJCh0aGlzKS5kaWFsb2coJ29wdGlvbicsICdwb3NpdGlvbicpKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgJCgnYm9keScpLmZpbmQoJy5mb3JtLXJvdycpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICgkKHRoaXMpLmZpbmQoJy5maWVsZC13cmFwcGVyIC5jbGVhcmJ1dHRvbicpLmxlbmd0aCA9PSAwICYmICQodGhpcykuZmluZCgnLmZpZWxkLXdyYXBwZXInKS5maW5kKCdpbnB1dFt0eXBlPVxcJ3RleHRcXCddJykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5maWVsZC13cmFwcGVyJykuYXBwZW5kKCc8YSBjbGFzcz1cImNsZWFyYnV0dG9uXCI+PC9hPicpO1xyXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5maW5kKCcuZmllbGQtd3JhcHBlcicpLmZpbmQoJ2lucHV0W3R5cGU9XFwndGV4dFxcJ10nKS52YWwoKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5maWVsZC13cmFwcGVyJykuZmluZCgnLmNsZWFyYnV0dG9uJykuc2hvdygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmICgkKHRoaXMpLmZpbmQoJy5maWVsZC13cmFwcGVyIC5jbGVhcmJ1dHRvbicpLmxlbmd0aCA9PSAwICYmICQodGhpcykuZmluZCgnLmZpZWxkLXdyYXBwZXInKS5maW5kKCdpbnB1dFt0eXBlPVxcJ3Bhc3N3b3JkXFwnXScpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuZmllbGQtd3JhcHBlcicpLmFwcGVuZCgnPGEgY2xhc3M9XCJjbGVhcmJ1dHRvblwiPjwvYT4nKTtcclxuICAgICAgICAgICAgaWYgKCQodGhpcykuZmluZCgnLmZpZWxkLXdyYXBwZXInKS5maW5kKCdpbnB1dFt0eXBlPVxcJ3Bhc3N3b3JkXFwnXScpLnZhbCgpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLmZpZWxkLXdyYXBwZXInKS5maW5kKCcuY2xlYXJidXR0b24nKS5zaG93KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgICQoJ2JvZHknKS5maW5kKCcuZm9ybS1yb3cgLmZpZWxkLXdyYXBwZXIgaW5wdXQnKS5vbignZm9jdXMnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ2Vycm9yY2xpZW50JykpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnZXJyb3JjbGllbnQnKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgICQoJ2JvZHknKS5maW5kKCcuZm9ybS1yb3cgLmZpZWxkLXdyYXBwZXIgaW5wdXQnKS5vbigna2V5dXAgaW5wdXQgYmx1cicsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoJCh0aGlzKS52YWwoKSAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaWYgKCQodGhpcykudmFsKCkubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybS1yb3cnKS5maW5kKCdhLmNsZWFyYnV0dG9uJykuc2hvdygpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybS1yb3cnKS5maW5kKCdhLmNsZWFyYnV0dG9uJykuaGlkZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAkKCdib2R5JykuZmluZCgnaW5wdXQnKS5mb2N1c2luKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQsIC5mb3JtLXJvdycpLnJlbW92ZUNsYXNzKCdpbnB1dGxhYmVsJyk7XHJcbiAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmZvcm0tcm93ICwgLmxhYmVsIHNwYW4nKS5yZW1vdmVDbGFzcygnaW5wdXRsYWJlbCcpO1xyXG4gICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2Vycm9yY2xpZW50Jyk7XHJcbiAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkICwgLmZvcm0tcm93JykuZmluZCgnLmxvZ2Vycm9yICwgLmV4aXN0aW5nX3JlZ2lzdGVyJykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcclxuICAgIH0pO1xyXG4gICAgJCgnYm9keScpLmZpbmQoJy5mb3JtLXJvdyBhLmNsZWFyYnV0dG9uJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZpZWxkLXdyYXBwZXInKS5maW5kKCdzcGFuJykucmVtb3ZlKCk7XHJcbiAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZmllbGQtd3JhcHBlcicpLmZpbmQoJy5yZXF1aXJlZCcpLnJlbW92ZUNsYXNzKCdlcnJvcmNsaWVudCcpO1xyXG4gICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm0tcm93JykuZmluZCgnLmZvcm0tcm93ICwgLmxhYmVsIHNwYW4nKS5yZW1vdmVDbGFzcygnaW5wdXRsYWJlbCcpO1xyXG4gICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm0tcm93JykuZmluZCgnaW5wdXQnKS52YWwoJycpO1xyXG4gICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm0tcm93JykuZmluZCgnYS5jbGVhcmJ1dHRvbicpLmhpZGUoKTtcclxuICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtLXJvdycpLmZpbmQoJ3NwYW4ubG9nZXJyb3IgLCAuZXhpc3RpbmdfcmVnaXN0ZXInKS5oaWRlKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCcucHRfY2hlY2tvdXQgLnRleHRpbnB1dCwgLnB0X2NoZWNrb3V0IC5jdXN0b20tc2VsZWN0LXdyYXAsIC5wdF9jaGVja291dCAudGV4dGlucHV0cHcnKS5iaW5kKCdrZXl1cCBibHVyJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmIChqUXVlcnkoJy5OZXctc2hpcHBpbmctYXV0aGVudGljYXRpb24tZGV0YWlsJykuZmluZCgnaW5wdXRbbmFtZSQ9XFwnX1Byb2Nlc3NXYXlcXCddJykudmFsKCkgPT0gMikge1xyXG4gICAgICAgICAgICB2YXIgZXJyb3JkaXYgPSAnPGRpdiBjbGFzcz1cXCdlcnJvciBsb2dpbmVycm9yXFwnPicgKyBSZXNvdXJjZXMuY2hlY2tvdXRfbG9naW5fZXJyb3IgKyAnPC9kaXY+JztcclxuICAgICAgICAgICAgaWYgKCQoJy5zaGlwcGluZ2xvZ2luZGV0YWlscycpLmlzKCc6dmlzaWJsZScpIHx8ICEkKCcuY2hlY2tvdXRzaGlwcGluZyBmb3JtW2lkJD1cIl9sb2dpblwiXScpLnZhbGlkKCkpIHtcclxuICAgICAgICAgICAgICAgIGlmICgkKCcuY2hlY2tvdXQgLmxvZ2luZXJyb3InKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmNoZWNrb3V0IC5sb2dpbmVycm9yJykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBqUXVlcnkoJy5zdGF0ZS1ibGsgLnN0YXRlZXJyb3IuZXJyb3InKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxvZ2luZXJyb3InKS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmFwcGVuZChlcnJvcmRpdik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcclxuICAgICAgICB9LCAxMDApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnLm5ldy1hZGRyZXNzLWJ1dHRvbicpLmJpbmQoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8valF1ZXJ5KFwiaW5wdXRbbmFtZT0ke3BkaWN0LkN1cnJlbnRGb3Jtcy5zaW5nbGVzaGlwcGluZy5zaGlwcGluZ0FkZHJlc3MubWFrZWRlZmF1bHQuaHRtbE5hbWV9XVwiKS5hdHRyKCdjaGVja2VkJywgdHJ1ZSk7XHJcbiAgICAgICAgJCgnLmFkZHJlc3NvcHRpb25zLWFkZFRvQWRkcmVzc0Jvb2ssLmFkZHJlc3NvcHRpb25zLW1ha2VkZWZhdWx0ICcpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XFwnc2hpcHBpbmdBZGRyZXNzX3NlbGVjdGVkYWRkcmVzc1xcJ10nKS52YWwoJycpO1xyXG4gICAgICAgICQoJy5zZWxlY3RlZC1zaGlwcGluZy1hZGRyZXNzJykuZW1wdHkoKTtcclxuICAgICAgICAkKCdpbnB1dFtuYW1lJD1cXCdfYWRkcmVzc2lkXFwnXScpLnZhbCgnJyk7XHJcbiAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XFwnX2FkZHJlc3NGaWVsZHNfZmlyc3ROYW1lXFwnXScpLnZhbCgnJyk7XHJcbiAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XFwnX2FkZHJlc3NGaWVsZHNfbGFzdE5hbWVcXCddJykudmFsKCcnKTtcclxuICAgICAgICAkKCdpbnB1dFtuYW1lJD1cXCdfYWRkcmVzc0ZpZWxkc19hZGRyZXNzMVxcJ10nKS52YWwoJycpO1xyXG4gICAgICAgICQoJ2lucHV0W25hbWUkPVxcJ19hZGRyZXNzRmllbGRzX2FkZHJlc3MyXFwnXScpLnZhbCgnJyk7XHJcbiAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XFwnX2FkZHJlc3NGaWVsZHNfY2l0eVxcJ10nKS52YWwoJycpO1xyXG4gICAgICAgICQoJ2lucHV0W25hbWUkPVxcJ19hZGRyZXNzRmllbGRzX3Bvc3RhbFxcJ10nKS52YWwoJycpO1xyXG4gICAgICAgICQoJ2lucHV0W25hbWUkPVxcJ19hZGRyZXNzRmllbGRzX3Bob25lXFwnXScpLnZhbCgnJyk7XHJcbiAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XFwnX2FkZHJlc3NGaWVsZHNfc3RhdGVzX3N0YXRlXFwnXScpLnZhbCgnJyk7XHJcbiAgICAgICAgdWlldmVudHMuY2hhbmdlRm9ybVNlbGVjdGlvbihqUXVlcnkoJ3NlbGVjdFtuYW1lJD1cXCdfYWRkcmVzc0ZpZWxkc190aXRsZVxcJ10nKVswXSwgJycpO1xyXG4gICAgICAgIHVpZXZlbnRzLmNoYW5nZUZvcm1TZWxlY3Rpb24oalF1ZXJ5KCdzZWxlY3RbbmFtZSQ9XFwnX2FkZHJlc3NGaWVsZHNfY291bnRyeVxcJ10nKVswXSwgJycpO1xyXG4gICAgICAgIHVpZXZlbnRzLmNoYW5nZUZvcm1TZWxlY3Rpb24oalF1ZXJ5KCdzZWxlY3RbbmFtZSQ9XFwnX2FkZHJlc3NGaWVsZHNfc3RhdGVzX3N0YXRlXFwnXScpWzBdLCAnJyk7XHJcbiAgICAgICAgdWlldmVudHMuY2hhbmdlRm9ybVNlbGVjdGlvbihqUXVlcnkoJ3NlbGVjdC5hZGRyZXNzLXNlbGVjdCcpWzBdLCAnJyk7XHJcbiAgICAgICAgJCgnLnNoaXBwaW5nLWFkZHJlc3MtZmllbGQtc2VjdGlvbicpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgJCgnLnNlbGVjdGVkLXNoaXBwaW5nLWFkZHJlc3MsIC5uZXctYWRkcmVzcy1maWVsZCcpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XFwnX2FkZHJlc3NGaWVsZHNfcGhvbmVcXCddJykuY2xvc2VzdCgnZGl2LnBob25lJykuZmluZCgnc3Bhbi5lcnJvcmNsaWVudCcpLnJlbW92ZSgpO1xyXG4gICAgICAgICQoJ2lucHV0W25hbWUkPVxcJ19hZGRyZXNzRmllbGRzX3Bvc3RhbFxcJ10nKS5jbG9zZXN0KCdkaXYuemlwJykuZmluZCgnc3Bhbi5lcnJvcmNsaWVudCcpLnJlbW92ZSgpO1xyXG4gICAgICAgICQoJy5hZGRyZXNzZm9ybSAuZm9ybS1yb3cuY3VzdG9tLXNlbGVjdCcpLnJlbW92ZUNsYXNzKCdjdXN0b21zZWxlY3QtZXJyb3InKTtcclxuICAgICAgICAkKCcuY3VzdG9tLXNlbGVjdCcpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgc2VsZWN0VmFsID0gJCh0aGlzKS5maW5kKCc6c2VsZWN0ZWQnKS50ZXh0KCk7XHJcbiAgICAgICAgICAgICQodGhpcykuZmluZCgnLnNlbGVjdG9yT3V0JykudGV4dChzZWxlY3RWYWwpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmICgkKCcuY2hlY2tvdXQnKS5oYXNDbGFzcygnYmlsbGluZ3NlY3Rpb24nKSkge1xyXG4gICAgICAgICAgICAkKCdib2R5JykuZmluZCgnaW5wdXRbbmFtZSQ9X3NhbWVhc3NoaXBwaW5nYWRkcmVzc10nKS5yZW1vdmVBdHRyKCdjaGVja2VkJyk7XHJcbiAgICAgICAgICAgICQoJ2JvZHknKS5maW5kKCdpbnB1dFtuYW1lJD1fc2FtZWFzc2hpcHBpbmdhZGRyZXNzXScpLmNsb3Nlc3QoJy5jdXN0b20tY2hlY2tib3gnKS5maW5kKCcuY3VzdG9tLWxpbmsnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICQoJ2EuY2xlYXJidXR0b24nKS5oaWRlKCk7XHJcbiAgICAgICAgJCgnLnNoaXBwaW5nLWFkZHJlc3MtZmllbGQtc2VjdGlvbiAuZm9ybS1yb3cnKS5maW5kKCdpbnB1dCcpLnJlbW92ZUNsYXNzKCdlcnJvcmNsaWVudCcpO1xyXG4gICAgICAgIHVpZXZlbnRzLmN1c3RvbUZpZWxkcygpO1xyXG4gICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcclxuICAgIH0pO1xyXG4gICAgJCgnLmVkaXQtYWRkcmVzcy1maWVsZCAuZWRpdC1iaWxsaW5nLWJ1dHRvbicpLmJpbmQoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciAkZm9ybSA9ICQoJy5hZGRyZXNzJyk7XHJcbiAgICAgICAgdmFyIHNlbGVjdGVkQWRkcmVzcyA9ICQodGhpcykuY2xvc2VzdCgnLmVkaXQtYWRkcmVzcy1maWVsZCcpLmRhdGEoJ2FkZHJlc3MnKTtcclxuICAgICAgICB1dGlsLmZpbGxBZGRyZXNzRmllbGRzKHNlbGVjdGVkQWRkcmVzcywgJGZvcm0pO1xyXG4gICAgICAgICQoJy5lZGl0LWFkZHJlc3MtZmllbGQnKS5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICQoJy5zZWxlY3RlZC1zaGlwcGluZy1hZGRyZXNzLCAubmV3LWFkZHJlc3MtZmllbGQnKS5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICQoJy5iaWxsaW5nLWFkZHJlc3MtZmllbGRzJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICB1aWV2ZW50cy5jdXN0b21GaWVsZHMoKTtcclxuICAgICAgICB1aWV2ZW50cy5zeW5jY2hlY2tvdXRIKCk7XHJcbiAgICB9KTtcclxuICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcclxuICAgIC8vaWYgb24gdGhlIG9yZGVyIHJldmlldyBwYWdlIGFuZCB0aGVyZSBhcmUgcHJvZHVjdHMgdGhhdCBhcmUgbm90IGF2YWlsYWJsZSBkaWFibGUgdGhlIHN1Ym1pdCBvcmRlciBidXR0b25cclxuICAgIC8qIGlmICgkKCcub3JkZXItc3VtbWFyeS1mb290ZXInKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgIGlmICgkKCcubm90YXZhaWxhYmxlJykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgJCgnLm9yZGVyLXN1bW1hcnktZm9vdGVyIC5zdWJtaXQtb3JkZXIgLmJ1dHRvbi1mYW5jeS1sYXJnZScpLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgIH1cclxuICAgICB9Ki9cclxufTtcclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxudmFyIGFkZHJlc3MgPSByZXF1aXJlKCcuL2FkZHJlc3MnKSxcclxuICAgIGZvcm1QcmVwYXJlID0gcmVxdWlyZSgnLi9mb3JtUHJlcGFyZScpLFxyXG4gICAgZGlhbG9nID0gcmVxdWlyZSgnLi4vLi4vZGlhbG9nJyksXHJcbiAgICB1dGlsID0gcmVxdWlyZSgnLi4vLi4vdXRpbCcpLFxyXG4gICAgc2hpcHBpbmcgPSByZXF1aXJlKCcuL3NoaXBwaW5nJyksIC8vSklSQSBQUkVWLTk5IDogc2hpcHBpbmcgbWV0aG9kcyBpcyBub3QgZGlzcGxheWVkIGZvciAybmQgYWRkcmVzcyBpbiByaWdodCBuYXYuXHJcbiAgICBhamF4ID0gcmVxdWlyZSgnLi4vLi4vYWpheCcpOyAvL0pJUkEgUFJFVi05OSA6IHNoaXBwaW5nIG1ldGhvZHMgaXMgbm90IGRpc3BsYXllZCBmb3IgMm5kIGFkZHJlc3MgaW4gcmlnaHQgbmF2LlxyXG5cclxuLyoqXHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAZGVzY3JpcHRpb24gSW5pdGlhbGl6ZXMgZ2lmdCBtZXNzYWdlIGJveCBmb3IgbXVsdGlzaGlwIHNoaXBwaW5nLCB0aGUgbWVzc2FnZSBib3ggc3RhcnRzIG9mZiBhcyBoaWRkZW4gYW5kIHRoaXMgd2lsbCBkaXNwbGF5IGl0IGlmIHRoZSByYWRpbyBidXR0b24gaXMgY2hlY2tlZCB0byB5ZXMsIGFsc28gYWRkZWQgZXZlbnQgaGFuZGxlciB0byBsaXN0ZW4gZm9yIHdoZW4gYSByYWRpbyBidXR0b24gaXMgcHJlc3NlZCB0byBkaXNwbGF5IHRoZSBtZXNzYWdlIGJveFxyXG4gKi9cclxuZnVuY3Rpb24gaW5pdE11bHRpR2lmdE1lc3NhZ2VCb3goKSB7XHJcbiAgICAkLmVhY2goJCgnLml0ZW0tbGlzdCcpLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcclxuICAgICAgICB2YXIgJGdpZnRNZXNzYWdlID0gJHRoaXMuZmluZCgnLmdpZnQtbWVzc2FnZS10ZXh0Jyk7XHJcblxyXG4gICAgICAgIC8vaGFuZGxlIGluaXRpYWwgbG9hZFxyXG4gICAgICAgICRnaWZ0TWVzc2FnZS50b2dnbGVDbGFzcygnaGlkZGVuJywgJCgnaW5wdXRbbmFtZSQ9XCJfaXNHaWZ0XCJdOmNoZWNrZWQnLCB0aGlzKS52YWwoKSAhPT0gJ3RydWUnKTtcclxuXHJcbiAgICAgICAgLy9zZXQgZXZlbnQgbGlzdGVuZXJzXHJcbiAgICAgICAgJHRoaXMub24oJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJGdpZnRNZXNzYWdlLnRvZ2dsZUNsYXNzKCdoaWRkZW4nLCAkKCdpbnB1dFtuYW1lJD1cIl9pc0dpZnRcIl06Y2hlY2tlZCcsIHRoaXMpLnZhbCgpICE9PSAndHJ1ZScpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAZnVuY3Rpb25cclxuICogQGRlc2NyaXB0aW9uIGNhcHR1cmUgYWRkIGVkaXQgYWRkZHJlc3MgZm9ybSBldmVudHNcclxuICovXHJcbmZ1bmN0aW9uIGFkZEVkaXRBZGRyZXNzKHRhcmdldCkge1xyXG4gICAgdmFyICRhZGRyZXNzRm9ybSA9ICQoJ2Zvcm1bbmFtZSQ9XCJtdWx0aXNoaXBwaW5nX2VkaXRBZGRyZXNzXCJdJyksXHJcbiAgICAgICAgJGFkZHJlc3NEcm9wZG93biA9ICRhZGRyZXNzRm9ybS5maW5kKCdzZWxlY3RbbmFtZSQ9X2FkZHJlc3NMaXN0XScpLFxyXG4gICAgICAgICRhZGRyZXNzTGlzdCA9ICRhZGRyZXNzRm9ybS5maW5kKCcuYWRkcmVzcy1saXN0JyksXHJcbiAgICAgICAgYWRkID0gdHJ1ZSxcclxuICAgICAgICBzZWxlY3RlZEFkZHJlc3NVVUlEID0gJCh0YXJnZXQpLnBhcmVudCgpLnNpYmxpbmdzKCcuc2VsZWN0LWFkZHJlc3MnKS52YWwoKTtcclxuXHJcbiAgICAkYWRkcmVzc0Ryb3Bkb3duLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB2YXIgc2VsZWN0ZWRBZGRyZXNzID0gJGFkZHJlc3NMaXN0LmZpbmQoJ3NlbGVjdCcpLnZhbCgpO1xyXG4gICAgICAgIGlmIChzZWxlY3RlZEFkZHJlc3MgIT09ICduZXdBZGRyZXNzJykge1xyXG4gICAgICAgICAgICBzZWxlY3RlZEFkZHJlc3MgPSAkLmdyZXAoJGFkZHJlc3NMaXN0LmRhdGEoJ2FkZHJlc3NlcycpLCBmdW5jdGlvbiAoYWRkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYWRkLlVVSUQgPT09IHNlbGVjdGVkQWRkcmVzcztcclxuICAgICAgICAgICAgfSlbMF07XHJcbiAgICAgICAgICAgIGFkZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAvLyBwcm9jZWVkIHRvIGZpbGwgdGhlIGZvcm0gd2l0aCB0aGUgc2VsZWN0ZWQgYWRkcmVzc1xyXG4gICAgICAgICAgICB1dGlsLmZpbGxBZGRyZXNzRmllbGRzKHNlbGVjdGVkQWRkcmVzcywgJGFkZHJlc3NGb3JtKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvL3Jlc2V0IHRoZSBmb3JtIGlmIHRoZSB2YWx1ZSBvZiB0aGUgb3B0aW9uIGlzIG5vdCBhIFVVSURcclxuICAgICAgICAgICAgYWRkID0gdHJ1ZTsgLy9QUkVWQUlMIC0gQWRkZWQgdG8gaGFuZGxlIGJhY2sgYW5kIGZvcnRoIHNjZW5hcmlvcy5cclxuICAgICAgICAgICAgJGFkZHJlc3NGb3JtLmZpbmQoJy5pbnB1dC10ZXh0LCAuaW5wdXQtc2VsZWN0JykudmFsKCcnKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAkYWRkcmVzc0Zvcm0ub24oJ2NsaWNrJywgJy5jYW5jZWwnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBkaWFsb2cuY2xvc2UoKTtcclxuICAgIH0pO1xyXG5cclxuICAgICRhZGRyZXNzRm9ybS5vbignc3VibWl0JywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgIC8vIFBSRVYtOTg6IHZhbGlkYXRpb24gZXJyb3IgbWVzc2FnZXMgYXJlIG5vdCBkaXNwbGF5ZWQgd2hlbiBhZGRpbmcgYWRkcmVzcyBpbiBNdWx0aS1TaGlwcGluZy4gQWRkZWQgdGhlIGZvbGxvd2luZyBJRiBibG9jay5cclxuICAgICAgICBpZiAoISRhZGRyZXNzRm9ybS52YWxpZCgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgJC5nZXRKU09OKFVybHMuYWRkRWRpdEFkZHJlc3MsICRhZGRyZXNzRm9ybS5zZXJpYWxpemUoKSwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgLy8gQFRPRE86IGZpZ3VyZSBvdXQgYSB3YXkgdG8gaGFuZGxlIGVycm9yIG9uIHRoZSBmb3JtXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIGFkZHJlc3MgPSByZXNwb25zZS5hZGRyZXNzLFxyXG4gICAgICAgICAgICAgICAgJHNoaXBwaW5nQWRkcmVzcyA9ICQodGFyZ2V0KS5jbG9zZXN0KCcuc2hpcHBpbmdhZGRyZXNzJyksXHJcbiAgICAgICAgICAgICAgICAkc2VsZWN0ID0gJHNoaXBwaW5nQWRkcmVzcy5maW5kKCcuc2VsZWN0LWFkZHJlc3MnKSxcclxuICAgICAgICAgICAgICAgICRzZWxlY3RlZCA9ICRzZWxlY3QuZmluZCgnb3B0aW9uOnNlbGVjdGVkJyksXHJcbiAgICAgICAgICAgICAgICBuZXdPcHRpb24gPSAnPG9wdGlvbiB2YWx1ZT1cIicgKyBhZGRyZXNzLlVVSUQgKyAnXCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgKChhZGRyZXNzLklEKSA/ICcoJyArIGFkZHJlc3MuSUQgKyAnKScgOiBhZGRyZXNzLmZpcnN0TmFtZSArICcgJyArIGFkZHJlc3MubGFzdE5hbWUpICsgJywgJyArXHJcbiAgICAgICAgICAgICAgICAgICAgYWRkcmVzcy5hZGRyZXNzMSArICcsICcgKyBhZGRyZXNzLmNpdHkgKyAnLCAnICsgYWRkcmVzcy5zdGF0ZUNvZGUgKyAnLCAnICsgYWRkcmVzcy5wb3N0YWxDb2RlICtcclxuICAgICAgICAgICAgICAgICAgICAnPC9vcHRpb24+JztcclxuICAgICAgICAgICAgZGlhbG9nLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIGlmIChhZGQpIHtcclxuICAgICAgICAgICAgICAgICQoJy5zaGlwcGluZ2FkZHJlc3Mgc2VsZWN0JykucmVtb3ZlQ2xhc3MoJ25vLW9wdGlvbicpLmFwcGVuZChuZXdPcHRpb24pO1xyXG4gICAgICAgICAgICAgICAgJCgnLm5vLWFkZHJlc3MnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkKCcuc2hpcHBpbmdhZGRyZXNzIHNlbGVjdCcpLmZpbmQoJ29wdGlvblt2YWx1ZT1cIicgKyBhZGRyZXNzLlVVSUQgKyAnXCJdJykuaHRtbChuZXdPcHRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGlmIHRoZXJlJ3Mgbm8gcHJldmlvdXNseSBzZWxlY3RlZCBvcHRpb24sIHNlbGVjdCBpdFxyXG4gICAgICAgICAgICBpZiAoJHNlbGVjdGVkLmxlbmd0aCA9PT0gMCB8fCAkc2VsZWN0ZWQudmFsKCkgPT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAkc2VsZWN0LmZpbmQoJ29wdGlvblt2YWx1ZT1cIicgKyBhZGRyZXNzLlVVSUQgKyAnXCJdJykucHJvcCgnc2VsZWN0ZWQnLCAnc2VsZWN0ZWQnKS50cmlnZ2VyKCdjaGFuZ2UnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy9wcmVzZXJ2ZSB0aGUgdXVpZCBvZiB0aGUgb3B0aW9uIGZvciB0aGUgaG9wIHVwIGZvcm1cclxuICAgIGlmIChzZWxlY3RlZEFkZHJlc3NVVUlEKSB7XHJcbiAgICAgICAgLy91cGRhdGUgdGhlIGZvcm0gd2l0aCBzZWxlY3RlZCBhZGRyZXNzXHJcbiAgICAgICAgJGFkZHJlc3NMaXN0LmZpbmQoJ29wdGlvbicpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvL2NoZWNrIHRoZSB2YWx1ZXMgb2YgdGhlIG9wdGlvbnNcclxuICAgICAgICAgICAgaWYgKCQodGhpcykuYXR0cigndmFsdWUnKSA9PT0gc2VsZWN0ZWRBZGRyZXNzVVVJRCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5wcm9wKCdzZWxlY3RlZCcsICdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAgJGFkZHJlc3NEcm9wZG93bi50cmlnZ2VyKCdjaGFuZ2UnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBkZXNjcmlwdGlvbiBzaG93cyBnaWZ0IG1lc3NhZ2UgYm94IGluIG11bHRpc2hpcCwgYW5kIGlmIHRoZSBwYWdlIGlzIHRoZSBtdWx0aSBzaGlwcGluZyBhZGRyZXNzIHBhZ2UgaXQgd2lsbCBjYWxsIGluaXRtdWx0aXNoaXBzaGlwYWRkcmVzcygpIHRvIGluaXRpYWxpemUgdGhlIGZvcm1cclxuICovXHJcbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGluaXRNdWx0aUdpZnRNZXNzYWdlQm94KCk7XHJcbiAgICBpZiAoJCgnLmNhcnQtcm93IC5zaGlwcGluZ2FkZHJlc3MgLnNlbGVjdC1hZGRyZXNzJykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGZvcm1QcmVwYXJlLmluaXQoe1xyXG4gICAgICAgICAgICBjb250aW51ZVNlbGVjdG9yOiAnW25hbWUkPVwiYWRkcmVzc1NlbGVjdGlvbl9zYXZlXCJdJyxcclxuICAgICAgICAgICAgZm9ybVNlbGVjdG9yOiAnW2lkJD1cIm11bHRpc2hpcHBpbmdfYWRkcmVzc1NlbGVjdGlvblwiXSdcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgICQoJy5lZGl0LWFkZHJlc3MnKS5vbignY2xpY2snLCAnYScsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOyAvL0pJUkEgUFJFVi0yMDUtQ2hlY2tvdXQgTXVsdGlwbGUgU2hpcHBpbmcgUGFnZSAtIEluIEFkZC9FZGl0IGFkZHJlc3MgcGFnZSBjYW5jZWwgYnV0dG9uIG5vdCByZXNwb25kaW5nXHJcbiAgICAgICAgZGlhbG9nLm9wZW4oe1xyXG4gICAgICAgICAgICB1cmw6IHRoaXMuaHJlZixcclxuICAgICAgICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgICAgICAgICAgb3BlbjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZHJlc3MuaW5pdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZEVkaXRBZGRyZXNzKGUudGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgICAgICByZXF1aXJlKCcuLi8uLi92YWxpZGF0b3InKS5pbml0KCk7IC8vSklSQSBQUkVWLTk4IDogdmFsaWRhdGlvbiBlcnJvciBtZXNzYWdlcyBhcmUgbm90IGRpc3BsYXllZCB3aGVuIGFkZGluZyAgbXVsdGlwbGUgYWRkcmVzcy5yZS1pbml0IHZhbGlkYXRvci5cclxuICAgICAgICAgICAgICAgICAgICByZXF1aXJlKCcuLi8uLi90b29sdGlwJykuaW5pdCgpOyAvLyBKSVJBIFBSRVYtODQgOiBNdWx0aXBsZSBzaGlwcGluZyBwYWdlOiBOb3QgZGlzcGxheWluZyBUb29sIHRpcC4gcmUtaW5pdCB0b29sdGlwcy5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLypcclxuICAgICAgU3RhcnQgSklSQSBQUkVWLTk5IDogc2hpcHBpbmcgbWV0aG9kcyBpcyBub3QgZGlzcGxheWVkIGZvciAybmQgYWRkcmVzcyBpbiByaWdodCBuYXZcclxuICAgICAgU3RhcnQgSklSQSBQUkVWLTEwMyA6IFNlbGVjdGVkIHNoaXBwaW5nIG1ldGhvZCB3aWxsIG5vdCB1cGRhdGUgYXV0b21hdGljYWxseSBpbiByaWdodCBuYXZcclxuICAgICovXHJcbiAgICAkKGRvY3VtZW50KS5maW5kKCcuY2hlY2tvdXRtdWx0aXNoaXBwaW5nIHNlbGVjdFtuYW1lJD1cIl9zaGlwcGluZ01ldGhvZElEXCJdJykub24oJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgc2hpcG1lbnRJRCA9ICQodGhpcykuZGF0YSgnc2hpcG1lbnRpZCcpO1xyXG4gICAgICAgIHZhciBzaGlwcGluZ01ldGhvZElkID0gJCgnb3B0aW9uOnNlbGVjdGVkJywgdGhpcykuYXR0cigndmFsdWUnKTtcclxuICAgICAgICBhamF4LmdldEpzb24oe1xyXG4gICAgICAgICAgICB1cmw6IFVybHMubXVsdGlTaGlwcGluZ1NlbGVjdFNNLFxyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAnc2hpcG1lbnRJRCc6IHNoaXBtZW50SUQsXHJcbiAgICAgICAgICAgICAgICAnc2hpcHBpbmdNZXRob2RJZCc6IHNoaXBwaW5nTWV0aG9kSWRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBzaGlwcGluZy51cGRhdGVTdW1tYXJ5KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWRhdGEgfHwgIWRhdGEuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5hbGVydCgnQ291bGQgbm90IHNlbGVjdCBzaGlwcGluZyBtZXRob2QuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIC8qRW5kIEpJUkEgUFJFVi0xMDMsIFBSRVYtOTkqL1xyXG59O1xyXG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG52YXIgYWpheCA9IHJlcXVpcmUoJy4uLy4uL2FqYXgnKSxcclxuICAgIHByb2dyZXNzID0gcmVxdWlyZSgnLi4vLi4vcHJvZ3Jlc3MnKSxcclxuICAgIHRvb2x0aXAgPSByZXF1aXJlKCcuLi8uLi90b29sdGlwJyksXHJcbiAgICB1dGlsID0gcmVxdWlyZSgnLi4vLi4vdXRpbCcpLFxyXG4gICAgZGlhbG9nID0gcmVxdWlyZSgnLi4vLi4vZGlhbG9nJyksXHJcbiAgICB1aWV2ZW50cyA9IHJlcXVpcmUoJy4uLy4uL3VpZXZlbnRzJyksXHJcbiAgICAkc3VibWl0QnV0dG9uID0gJCgnYnV0dG9uLmNvbnRpbnVlLWNoZWNrb3V0Jyk7XHJcblxyXG4vKipcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBkZXNjcmlwdGlvbiBJbml0aWFsaXplcyBnaWZ0IG1lc3NhZ2UgYm94LCBpZiBzaGlwbWVudCBpcyBnaWZ0XHJcbiAqL1xyXG5mdW5jdGlvbiBnaWZ0TWVzc2FnZUJveCgpIHtcclxuICAgIC8vIHNob3cgZ2lmdCBtZXNzYWdlIGJveCwgaWYgc2hpcG1lbnQgaXMgZ2lmdFxyXG4gICAgJCgnLmdpZnQtbWVzc2FnZS10ZXh0JykudG9nZ2xlQ2xhc3MoJ2hpZGRlbicsICQoJ2lucHV0W25hbWUkPVwiX3NoaXBwaW5nQWRkcmVzc19pc0dpZnRcIl06Y2hlY2tlZCcpLnZhbCgpICE9PSAndHJ1ZScpO1xyXG59XHJcblxyXG4vKipcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBkZXNjcmlwdGlvbiBzaG93cyB0aGUgc3Bpbm5pbmcgaWNvbiBvbiB0aGUgQ29udGludWUgVG8gQmlsbGluZyBidXR0b24gZm9yIElFMTFcclxuICovXHJcbmZ1bmN0aW9uIHVwZGF0ZUJ1dHRvbklFKCkge1xyXG4gICAgLy8gaW5kaWNhdGUgcHJvZ3Jlc3NcclxuICAgICRzdWJtaXRCdXR0b24uYXBwZW5kKCc8ZGl2IGNsYXNzPVwibG9hZGVyXCI+PGRpdiBjbGFzcz1cImxvYWRlci1pbmRpY2F0b3JcIj48L2Rpdj48ZGl2IGNsYXNzPVwibG9hZGVyLWJnXCI+PC9kaXY+PC9kaXY+Jyk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAZnVuY3Rpb25cclxuICogQGRlc2NyaXB0aW9uIHVwZGF0ZXMgdGhlIG9yZGVyIHN1bW1hcnkgYmFzZWQgb24gYSBwb3NzaWJseSByZWNhbGN1bGF0ZWQgYmFza2V0IGFmdGVyIGEgc2hpcHBpbmcgcHJvbW90aW9uIGhhcyBiZWVuIGFwcGxpZWRcclxuICovXHJcbmZ1bmN0aW9uIHVwZGF0ZVN1bW1hcnkoKSB7XHJcbiAgICB2YXIgJHN1bW1hcnkgPSAkKCcjc2Vjb25kYXJ5IC5uZXctc3VtbWVyeS1jYXJ0Jyk7XHJcbiAgICAvLyBpbmRpY2F0ZSBwcm9ncmVzc1xyXG4gICAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL1RyaWRlbnRcXC83XFwuLykpIHtcclxuICAgICAgICB1cGRhdGVCdXR0b25JRSgpO1xyXG4gICAgfVxyXG4gICAgcHJvZ3Jlc3Muc2hvdygkc3VtbWFyeSk7XHJcbiAgICB2YXIgc3RhdGVWYWx1ZSA9ICQoJ2JvZHknKS5maW5kKCdzZWxlY3RbaWQkPVwiX2FkZHJlc3NGaWVsZHNfc3RhdGVzX3N0YXRlXCJdJykudmFsKCk7XHJcbiAgICB2YXIgdXJsID0gdXRpbC5hcHBlbmRQYXJhbVRvVVJMKFVybHMuc3VtbWFyeVJlZnJlc2hVUkwsICdzZWxlY3RlZFN0YXRlJywgc3RhdGVWYWx1ZSk7XHJcbiAgICAvLyBsb2FkIHRoZSB1cGRhdGVkIHN1bW1hcnkgYXJlYVxyXG4gICAgJHN1bW1hcnkubG9hZCh1cmwsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBoaWRlIGVkaXQgc2hpcHBpbmcgbWV0aG9kIGxpbmtcclxuICAgICAgICAkc3VtbWFyeS5mYWRlSW4oJ2Zhc3QnKTtcclxuICAgICAgICAkc3VtbWFyeS5maW5kKCcuY2hlY2tvdXQtbWluaS1jYXJ0IC5taW5pc2hpcG1lbnQgLmhlYWRlciBhJykuaGlkZSgpO1xyXG4gICAgICAgICRzdW1tYXJ5LmZpbmQoJy5vcmRlci10b3RhbHMtdGFibGUgLm9yZGVyLXNoaXBwaW5nIC5sYWJlbCBhJykuaGlkZSgpO1xyXG4gICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBkZXNjcmlwdGlvbiBzaG93cyB0aGUgc3Bpbm5pbmcgaWNvbiBvbiB0aGUgQ29udGludWUgVG8gQmlsbGluZyBidXR0b25cclxuICovXHJcbmZ1bmN0aW9uIHVwZGF0ZUJ1dHRvbigpIHtcclxuICAgIC8vIGluZGljYXRlIHByb2dyZXNzXHJcbiAgICAkKGZ1bmN0aW9uICgpe1xyXG4gICAgICAgIGlmIChuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9UcmlkZW50XFwvN1xcLi8pKSB7XHJcbiAgICAgICAgICAgICRzdWJtaXRCdXR0b24uYXBwZW5kKCc8ZGl2IGNsYXNzPVwibG9hZGVyXCI+PGRpdiBjbGFzcz1cImxvYWRlci1pbmRpY2F0b3JcIj48L2Rpdj48ZGl2IGNsYXNzPVwibG9hZGVyLWJnXCI+PC9kaXY+PC9kaXY+Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBwcm9ncmVzcy5zaG93KCRzdWJtaXRCdXR0b24pO1xyXG59XHJcblxyXG4vKipcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBkZXNjcmlwdGlvbiBIZWxwZXIgbWV0aG9kIHdoaWNoIGNvbnN0cnVjdHMgYSBVUkwgZm9yIGFuIEFKQVggcmVxdWVzdCB1c2luZyB0aGVcclxuICogZW50ZXJlZCBhZGRyZXNzIGluZm9ybWF0aW9uIGFzIFVSTCByZXF1ZXN0IHBhcmFtZXRlcnMuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRTaGlwcGluZ01ldGhvZFVSTCh1cmwsIGV4dHJhUGFyYW1zKSB7XHJcbiAgICB2YXIgJGZvcm0gPSAkKCcuYWRkcmVzcycpO1xyXG4gICAgdmFyIHBhcmFtcyA9IHtcclxuICAgICAgICBhZGRyZXNzMTogJGZvcm0uZmluZCgnaW5wdXRbbmFtZSQ9XCJfYWRkcmVzczFcIl0nKS52YWwoKSxcclxuICAgICAgICBhZGRyZXNzMjogJGZvcm0uZmluZCgnaW5wdXRbbmFtZSQ9XCJfYWRkcmVzczJcIl0nKS52YWwoKSxcclxuICAgICAgICBjb3VudHJ5Q29kZTogJGZvcm0uZmluZCgnc2VsZWN0W2lkJD1cIl9jb3VudHJ5XCJdJykudmFsKCksXHJcbiAgICAgICAgc3RhdGVDb2RlOiAkZm9ybS5maW5kKCdzZWxlY3RbaWQkPVwiX3N0YXRlXCJdJykudmFsKCksXHJcbiAgICAgICAgcG9zdGFsQ29kZTogJGZvcm0uZmluZCgnaW5wdXRbbmFtZSQ9XCJfcG9zdGFsXCJdJykudmFsKCksXHJcbiAgICAgICAgY2l0eTogJGZvcm0uZmluZCgnaW5wdXRbbmFtZSQ9XCJfY2l0eVwiXScpLnZhbCgpXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHV0aWwuYXBwZW5kUGFyYW1zVG9VcmwodXJsLCAkLmV4dGVuZChwYXJhbXMsIGV4dHJhUGFyYW1zKSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAZnVuY3Rpb25cclxuICogQGRlc2NyaXB0aW9uIHNlbGVjdHMgYSBzaGlwcGluZyBtZXRob2QgZm9yIHRoZSBkZWZhdWx0IHNoaXBtZW50IGFuZCB1cGRhdGVzIHRoZSBzdW1tYXJ5IHNlY3Rpb24gb24gdGhlIHJpZ2h0IGhhbmQgc2lkZVxyXG4gKiBAcGFyYW1cclxuICovXHJcbmZ1bmN0aW9uIHNlbGVjdFNoaXBwaW5nTWV0aG9kKHNoaXBwaW5nTWV0aG9kSUQpIHtcclxuICAgIC8vIG5vdGhpbmcgZW50ZXJlZFxyXG4gICAgaWYgKCFzaGlwcGluZ01ldGhvZElEKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGF0dGVtcHQgdG8gc2V0IHNoaXBwaW5nIG1ldGhvZFxyXG4gICAgdmFyIHVybCA9IGdldFNoaXBwaW5nTWV0aG9kVVJMKFVybHMuc2VsZWN0U2hpcHBpbmdNZXRob2RzTGlzdCwge1xyXG4gICAgICAgIHNoaXBwaW5nTWV0aG9kSUQ6IHNoaXBwaW5nTWV0aG9kSURcclxuICAgIH0pO1xyXG4gICAgYWpheC5nZXRKc29uKHtcclxuICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgdXBkYXRlU3VtbWFyeSgpO1xyXG4gICAgICAgICAgICAkKCdidXR0b24uY29udGludWUtY2hlY2tvdXQgLmxvYWRlcicpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB1aWV2ZW50cy5zeW5jY2hlY2tvdXRIKCk7XHJcbiAgICAgICAgICAgIGlmICghZGF0YSB8fCAhZGF0YS5zaGlwcGluZ01ldGhvZElEKSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuYWxlcnQoJ0NvdWxkblxcJ3Qgc2VsZWN0IHNoaXBwaW5nIG1ldGhvZC4nKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBkaXNwbGF5IHByb21vdGlvbiBpbiBVSSBhbmQgdXBkYXRlIHRoZSBzdW1tYXJ5IHNlY3Rpb24sXHJcbiAgICAgICAgICAgIC8vIGlmIHNvbWUgcHJvbW90aW9ucyB3ZXJlIGFwcGxpZWRcclxuICAgICAgICAgICAgJCgnLnNoaXBwaW5ncHJvbW90aW9ucycpLmVtcHR5KCk7XHJcblxyXG4gICAgICAgICAgICAvLyBpZiAoZGF0YS5zaGlwcGluZ1ByaWNlQWRqdXN0bWVudHMgJiYgZGF0YS5zaGlwcGluZ1ByaWNlQWRqdXN0bWVudHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAvLyBcdHZhciBsZW4gPSBkYXRhLnNoaXBwaW5nUHJpY2VBZGp1c3RtZW50cy5sZW5ndGg7XHJcbiAgICAgICAgICAgIC8vIFx0Zm9yICh2YXIgaT0wOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgICAgLy8gXHRcdHZhciBzcGEgPSBkYXRhLnNoaXBwaW5nUHJpY2VBZGp1c3RtZW50c1tpXTtcclxuICAgICAgICAgICAgLy8gXHR9XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAZGVzY3JpcHRpb24gTWFrZSBhbiBBSkFYIHJlcXVlc3QgdG8gdGhlIHNlcnZlciB0byByZXRyaWV2ZSB0aGUgbGlzdCBvZiBhcHBsaWNhYmxlIHNoaXBwaW5nIG1ldGhvZHNcclxuICogYmFzZWQgb24gdGhlIG1lcmNoYW5kaXNlIGluIHRoZSBjYXJ0IGFuZCB0aGUgY3VycmVudGx5IGVudGVyZWQgc2hpcHBpbmcgYWRkcmVzc1xyXG4gKiAodGhlIGFkZHJlc3MgbWF5IGJlIG9ubHkgcGFydGlhbGx5IGVudGVyZWQpLiAgSWYgdGhlIGxpc3Qgb2YgYXBwbGljYWJsZSBzaGlwcGluZyBtZXRob2RzXHJcbiAqIGhhcyBjaGFuZ2VkIGJlY2F1c2UgbmV3IGFkZHJlc3MgaW5mb3JtYXRpb24gaGFzIGJlZW4gZW50ZXJlZCwgdGhlbiBpc3N1ZSBhbm90aGVyIEFKQVhcclxuICogcmVxdWVzdCB3aGljaCB1cGRhdGVzIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgc2hpcHBpbmcgbWV0aG9kIChpZiBuZWVkZWQpIGFuZCBhbHNvIHVwZGF0ZXNcclxuICogdGhlIFVJLlxyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlU2hpcHBpbmdNZXRob2RMaXN0KCkge1xyXG4gICAgdmFyICRzaGlwcGluZ01ldGhvZExpc3QgPSAkKCcjc2hpcHBpbmctbWV0aG9kLWxpc3QnKTtcclxuICAgIGlmICghJHNoaXBwaW5nTWV0aG9kTGlzdCB8fCAkc2hpcHBpbmdNZXRob2RMaXN0Lmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvVHJpZGVudFxcLzdcXC4vKSkge1xyXG4gICAgICAgIHVwZGF0ZUJ1dHRvbklFKCk7XHJcbiAgICB9XHJcbiAgICB2YXIgdXJsID0gZ2V0U2hpcHBpbmdNZXRob2RVUkwoVXJscy5zaGlwcGluZ01ldGhvZHNKU09OKTtcclxuXHJcbiAgICBhamF4LmdldEpzb24oe1xyXG4gICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICBpZiAoIWRhdGEpIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5hbGVydCgnQ291bGRuXFwndCBnZXQgbGlzdCBvZiBhcHBsaWNhYmxlIHNoaXBwaW5nIG1ldGhvZHMuJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLyppZiAoZmFsc2UgJiYgc2hpcHBpbmdNZXRob2RzICYmIHNoaXBwaW5nTWV0aG9kcy50b1N0cmluZygpID09PSBkYXRhLnRvU3RyaW5nKCkpIHsgLy8gUFJFVkFJTC1BZGRlZCBmb3IgJ2ZhbHNlJyB0byBoYW5kbGUgU1BDLlxyXG4gICAgICAgICAgICAgICAgLy8gTm8gbmVlZCB0byB1cGRhdGUgdGhlIFVJLiAgVGhlIGxpc3QgaGFzIG5vdCBjaGFuZ2VkLlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0qL1xyXG5cclxuICAgICAgICAgICAgLy8gV2UgbmVlZCB0byB1cGRhdGUgdGhlIFVJLiAgVGhlIGxpc3QgaGFzIGNoYW5nZWQuXHJcbiAgICAgICAgICAgIC8vIENhY2hlIHRoZSBhcnJheSBvZiByZXR1cm5lZCBzaGlwcGluZyBtZXRob2RzLlxyXG4gICAgICAgICAgICAvL3NoaXBwaW5nTWV0aG9kcyA9IGRhdGE7XHJcbiAgICAgICAgICAgIC8vIGluZGljYXRlIHByb2dyZXNzXHJcbiAgICAgICAgICAgIHByb2dyZXNzLnNob3coJHNoaXBwaW5nTWV0aG9kTGlzdCk7XHJcbiAgICAgICAgICAgIHVwZGF0ZUJ1dHRvbigpO1xyXG4gICAgICAgICAgICAvLyBsb2FkIHRoZSBzaGlwcGluZyBtZXRob2QgZm9ybVxyXG4gICAgICAgICAgICB2YXIgc21sVXJsID0gZ2V0U2hpcHBpbmdNZXRob2RVUkwoVXJscy5zaGlwcGluZ01ldGhvZHNMaXN0KTtcclxuICAgICAgICAgICAgJHNoaXBwaW5nTWV0aG9kTGlzdC5sb2FkKHNtbFVybCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJHNoaXBwaW5nTWV0aG9kTGlzdC5mYWRlSW4oJ2Zhc3QnKTtcclxuICAgICAgICAgICAgICAgIC8vIHJlYmluZCB0aGUgcmFkaW8gYnV0dG9ucyBvbmNsaWNrIGZ1bmN0aW9uIHRvIGEgaGFuZGxlci5cclxuICAgICAgICAgICAgICAgICRzaGlwcGluZ01ldGhvZExpc3QuZmluZCgnW25hbWUkPVwiX3NoaXBwaW5nTWV0aG9kSURcIl0nKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlQnV0dG9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLnNoaXBwaW5nLW1ldGhvZHMgLnNoaXBwaW5nLW1ldGhvZCAudmFsdWUgLmN1c3RvbS1saW5rICcpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5jdXN0b20tbGluaycpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RTaGlwcGluZ01ldGhvZCgkKHRoaXMpLnZhbCgpKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgc3VtbWFyeVxyXG4gICAgICAgICAgICAgICAgdXBkYXRlU3VtbWFyeSgpO1xyXG4gICAgICAgICAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xyXG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3MuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgdG9vbHRpcC5pbml0KCk7XHJcbiAgICAgICAgICAgICAgICAvL2lmIG5vdGhpbmcgaXMgc2VsZWN0ZWQgaW4gdGhlIHNoaXBwaW5nIG1ldGhvZHMgc2VsZWN0IHRoZSBmaXJzdCBvbmVcclxuICAgICAgICAgICAgICAgIGlmICgkc2hpcHBpbmdNZXRob2RMaXN0LmZpbmQoJy5pbnB1dC1yYWRpbzpjaGVja2VkJykubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNoaXBwaW5nTWV0aG9kTGlzdC5maW5kKCcuaW5wdXQtcmFkaW86Zmlyc3QnKS5wcm9wKCdjaGVja2VkJywgJ2NoZWNrZWQnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICQoZnVuY3Rpb24gKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL1RyaWRlbnRcXC83XFwuLykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnYnV0dG9uLmNvbnRpbnVlLWNoZWNrb3V0IC5sb2FkZXInKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNpZ25pbigpIHtcclxuICAgICQoJyNhZGRyZXNzZm9ybSAudGV4dGlucHV0JykuYWRkQ2xhc3MoJ2JsdXJlZCcpO1xyXG4gICAgJCgnI2FkZHJlc3Nmb3JtIC5jdXN0b20tc2VsZWN0JykuYWRkQ2xhc3MoJ2JsdXJlZCcpO1xyXG4gICAgJCgnI2FkZHJlc3Nmb3JtIC5jdXN0b20tY2hlY2tib3gnKS5hZGRDbGFzcygnYmx1cmVkJyk7XHJcbiAgICAkKCcuc2lnbmludG9teWFjY291bnQtYmxvY2ssLnNoaXBwaW5nLWNyZWF0ZXJhcGFsYWFjY291bnQsLnNoaXBwaW5nLWNvbmZpcm1lbWFpbGFkZHJlc3MsLnNoaXBwaW5nLWVtYWlsYWRkcmVzcywuc2hpcHBpbmctZ3Vlc3Rjb25maXJtZW1haWxhZGRyZXNzLC5zaGlwcGluZy1ndWVzdGVtYWlsYWRkcmVzcywuc2hpcHBpbmctcGFzc3dvcmQsLnNoaXBwaW5nLWNvbmZpcm1wYXNzd29yZCwuc2hpcHBpbmctY2hlY2tvdXRhc2d1ZXN0LC5vcjEsLmNyZWF0ZWFjY291bnRtc2cnKVxyXG4gICAgICAgIC5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgJCgnLmNoZWNrb3V0YXNndWVzdC1ibG9jaywuc2hpcHBpbmdsb2dpbmRldGFpbHMsLmNyZWF0ZWFuYWNjb3VudC1ibG9jaywub3IyLC5hZGRyZXNzb3B0aW9ucy1hZGRUb0FkZHJlc3NCb29rLC5hZGRyZXNzb3B0aW9ucy1tYWtlZGVmYXVsdCwuYWRkcmVzc2lkJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgICQoJy5zaGlwcGluZ2xvZ2luZGV0YWlscycpLmZpbmQoJ2lucHV0W25hbWUkPVxcJ191c2VybmFtZVxcJ10saW5wdXRbbmFtZSQ9XFwnX3Bhc3N3b3JkXFwnXScpLmFkZENsYXNzKCdyZXF1aXJlZCcpO1xyXG4gICAgJCgnLk5ldy1zaGlwcGluZy1hdXRoZW50aWNhdGlvbi1kZXRhaWwnKS5maW5kKCdpbnB1dFtuYW1lJD1cXCdfcGFzc3dvcmRjb25maXJtXFwnXSxpbnB1dFtuYW1lJD1cXCdfcGFzc3dvcmRcXCddLGlucHV0W25hbWUkPVxcJ19lbWFpbFxcJ10saW5wdXRbbmFtZSQ9XFwnX2VtYWlsY29uZmlybVxcJ10saW5wdXRbbmFtZSQ9XFwnX2d1ZXN0ZW1haWxjb25maXJtXFwnXSxpbnB1dFtuYW1lJD1cXCdfZ3Vlc3RlbWFpbFxcJ10nKS5yZW1vdmVDbGFzcygncmVxdWlyZWQnKTtcclxuICAgICQoJy5OZXctc2hpcHBpbmctYXV0aGVudGljYXRpb24tZGV0YWlsJykuZmluZCgnaW5wdXRbbmFtZSQ9XFwnX1Byb2Nlc3NXYXlcXCddJykudmFsKCcyJyk7XHJcbiAgICAkKCcuTmV3LXNoaXBwaW5nLWF1dGhlbnRpY2F0aW9uLWRldGFpbCcpLmZpbmQoJ2lucHV0W25hbWUkPVxcJ19wYXNzd29yZGNvbmZpcm1cXCddLGlucHV0W25hbWUkPVxcJ19wYXNzd29yZFxcJ10nKS52YWwoJycpO1xyXG4gICAgJCgnLmNoZWNrb3V0IC5zaGlwcGluZy1hZGRyZXNzLWZpZWxkLXNlY3Rpb24gLmZvcm1maWVsZCBzcGFuLmVycm9yY2xpZW50JykucmVtb3ZlKCk7XHJcbiAgICAkKCcuc2hpcHBpbmctYWRkcmVzcy1maWVsZC1zZWN0aW9uJykuYWRkQ2xhc3MoJ3NpZ25pbi1lcnJvcicpO1xyXG4gICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xyXG59XHJcblxyXG5leHBvcnRzLmluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAoJChkb2N1bWVudCkuZmluZCgnLmFkZHJlc3Mtc2VsZWN0JykudmFsKCkgIT0gJycgJiYgJChkb2N1bWVudCkuZmluZCgnLmFkZHJlc3Mtc2VsZWN0JykudmFsKCkgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgJChkb2N1bWVudCkuZmluZCgnLnNoaXBwaW5nLWFkZHJlc3MtZmllbGQtc2VjdGlvbicpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgICQoZG9jdW1lbnQpLmZpbmQoJy5zaGlwcGluZy1hZGRyZXNzLWZpZWxkLXNlY3Rpb24nKS5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLmZpbmQoJy5zZWxlY3RlZC1zaGlwcGluZy1hZGRyZXNzJykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAkKGRvY3VtZW50KS5maW5kKCcubmV3LWFkZHJlc3MtZmllbGQnKS5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgfVxyXG4gICAgaWYgKCQoZG9jdW1lbnQpLmZpbmQoJy5mcm9tcmV0dXJuMScpLnZhbCgpID09ICd0cnVlJykge1xyXG4gICAgICAgICQoZG9jdW1lbnQpLmZpbmQoJy5zaGlwcGluZy1hZGRyZXNzLWZpZWxkLXNlY3Rpb24nKS5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG4gICAgfVxyXG4gICAgJCgnaW5wdXRbbmFtZSQ9XCJfc2hpcHBpbmdBZGRyZXNzX2lzR2lmdFwiXScpLm9uKCdjbGljaycsIGdpZnRNZXNzYWdlQm94KTtcclxuXHJcbiAgICAkKCcuYWRkcmVzcycpLm9uKCdjaGFuZ2UnLFxyXG4gICAgICAgICdpbnB1dFtuYW1lJD1cIl9hZGRyZXNzRmllbGRzX2FkZHJlc3MxXCJdLCBpbnB1dFtuYW1lJD1cIl9hZGRyZXNzRmllbGRzX2FkZHJlc3MyXCJdLCBzZWxlY3RbbmFtZSQ9XCJfYWRkcmVzc0ZpZWxkc19zdGF0ZXNfc3RhdGVcIl0sIGlucHV0W25hbWUkPVwiX2FkZHJlc3NGaWVsZHNfY2l0eVwiXSwgaW5wdXRbbmFtZSQ9XCJfYWRkcmVzc0ZpZWxkc19wb3N0YWxcIl0nLCAvLyBQUkVWQUlMLUNoYW5nZWQgWklQIHRvIHBvc3RhbFxyXG4gICAgICAgIHVwZGF0ZVNoaXBwaW5nTWV0aG9kTGlzdFxyXG4gICAgKTtcclxuXHJcbiAgICBnaWZ0TWVzc2FnZUJveCgpO1xyXG4gICAgdXBkYXRlU2hpcHBpbmdNZXRob2RMaXN0KCk7XHJcblxyXG4gICAgJCgnLmNvbnRpbnVlLWNoZWNrb3V0LWJ1dHRvbiAuY29udGludWUtY2hlY2tvdXQnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIHVwZGF0ZUJ1dHRvbigpO1xyXG4gICAgICAgIHZhciBmb3JtID0gJCh0aGlzKS5jbG9zZXN0KCdmb3JtW2lkJD1cIl9zaGlwcGluZ0FkZHJlc3NcIl0nKTtcclxuICAgICAgICBpZiAoJCgnLnN0YXRlLWJsayBzZWxlY3QnKS52YWxpZCgpID09IDApIHtcclxuICAgICAgICAgICAgaWYgKCEkKCcuc3RhdGUtYmxrLmN1c3RvbS1zZWxlY3QnKS5oYXNDbGFzcygnYmx1cmVkJykpIHtcclxuICAgICAgICAgICAgICAgICQoJy5zdGF0ZS1ibGsuY3VzdG9tLXNlbGVjdCcpLmFkZENsYXNzKCdjdXN0b21zZWxlY3QtZXJyb3InKTtcclxuICAgICAgICAgICAgICAgIC8vJCgnLnN0YXRlLWJsayAuc3RhdGVlcnJvcicpLnNob3coKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vJCgnLnN0YXRlLWJsayAgLnN0YXRlZXJyb3InKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICQoJy5zdGF0ZS1ibGsuY3VzdG9tLXNlbGVjdCcpLnJlbW92ZUNsYXNzKCdjdXN0b21zZWxlY3QtZXJyb3InKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghJCgnLmNoZWNrb3V0YXNndWVzdGJ1dHRvbicpLmlzKCc6dmlzaWJsZScpKSB7XHJcbiAgICAgICAgICAgICQoJy5ndWVzdGVtYWlsY29uJykuYmx1cigpO1xyXG4gICAgICAgICAgICAkKCcuZ3Vlc3RlbWFpbCcpLmJsdXIoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFmb3JtLnZhbGlkKCkpIHtcclxuICAgICAgICAgICAgcHJvZ3Jlc3MuaGlkZSgpO1xyXG4gICAgICAgICAgICBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvVHJpZGVudFxcLzdcXC4vKSkge1xyXG4gICAgICAgICAgICAgICAgJCgnYnV0dG9uLmNvbnRpbnVlLWNoZWNrb3V0IC5sb2FkZXInKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoalF1ZXJ5KCcuc2hpcHBpbmctYWRkcmVzcy1maWVsZC1zZWN0aW9uJykuaGFzQ2xhc3MoJ2hpZGUnKSkge1xyXG4gICAgICAgICAgICAgICAgJCgnc2VsZWN0W25hbWUkPXNpbmdsZXNoaXBwaW5nX2FkZHJlc3NMaXN0XScpLnZhbCgnJyk7XHJcbiAgICAgICAgICAgICAgICAkKCdpbnB1dFtuYW1lJD1cInNpbmdsZXNoaXBwaW5nX3NoaXBwaW5nQWRkcmVzc19zZWxlY3RlZGFkZHJlc3NcIl0nKS52YWwoJycpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmN1c3RvbS1zZWxlY3QnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0VmFsID0gJCh0aGlzKS5maW5kKCc6c2VsZWN0ZWQnKS50ZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuc2VsZWN0b3JPdXQnKS50ZXh0KHNlbGVjdFZhbCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICQoJy5zaGlwcGluZy1hZGRyZXNzLWZpZWxkLXNlY3Rpb24nKS5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICAgICAgJCgnLnNlbGVjdGVkLXNoaXBwaW5nLWFkZHJlc3MnKS5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghJCgnLnNoaXBwaW5nbG9naW5kZXRhaWxzJykuaXMoJzp2aXNpYmxlJykpIHtcclxuICAgICAgICAgICAgICAgICQoJy5zaW5nbGVzaGlwcGluZ19lcnJvcicpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcuc2lnbmluYWJvdmUnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoJCgnLnNoaXBwaW5nbG9naW5kZXRhaWxzJykuaXMoJzp2aXNpYmxlJykpIHtcclxuICAgICAgICAgICAgICAgIGlmICghJCgnLnNoaXBwaW5nbG9naW5kZXRhaWxzIGZvcm0nKS52YWxpZCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLnNoaXBwaW5nbG9naW5kZXRhaWxzIC51c2VybmFtZSAudGV4dGlucHV0LCAuc2hpcHBpbmdsb2dpbmRldGFpbHMgLnRleHRpbnB1dHB3JykuYmx1cigpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJ2J1dHRvbltuYW1lJD1cImxvZ2luX2xvZ2luXCJdJykudHJpZ2dlcignY2xpY2snKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciBlcnJvcm1zZyA9ICc8ZGl2IGlkPVxcJ21lc3NhZ2VcXCcgY2xhc3M9XFwnZXJyb3ItYWxlcnQgc2lnbmluYWJvdmVcXCcgc3R5bGU9XFwndGV4dC1hbGlnbjogbGVmdDtcXCc+UGxlYXNlIExvZyBpbiBhYm92ZSB0byBjb250aW51ZTwvZGl2Pic7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCgnI2R3ZnJtX3NpbmdsZXNoaXBwaW5nX3NoaXBwaW5nQWRkcmVzcyAuZm9ybWFjdGlvbnMgI21lc3NhZ2UnKS5sZW5ndGggPiAwIHx8ICQoJyNkd2ZybV9zaW5nbGVzaGlwcGluZ19zaGlwcGluZ0FkZHJlc3MgLmZvcm1hY3Rpb25zIC5zaW5nbGVzaGlwcGluZ19lcnJvcicpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBqUXVlcnkoJyNkd2ZybV9zaW5nbGVzaGlwcGluZ19zaGlwcGluZ0FkZHJlc3MgLmZvcm1hY3Rpb25zICNtZXNzYWdlJykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KCcjZHdmcm1fc2luZ2xlc2hpcHBpbmdfc2hpcHBpbmdBZGRyZXNzIC5mb3JtYWN0aW9ucyAuc2luZ2xlc2hpcHBpbmdfZXJyb3InKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBqUXVlcnkoJy5zaW5nbGVzaGlwcGluZ19lcnJvcicpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIGpRdWVyeSgnI2R3ZnJtX3NpbmdsZXNoaXBwaW5nX3NoaXBwaW5nQWRkcmVzcyAuZm9ybWFjdGlvbnMnKS5wcmVwZW5kKGVycm9ybXNnKTtcclxuICAgICAgICAgICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICQoJy5zaW5nbGVzaGlwcGluZ19lcnJvcicpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcclxuICAgIH0pO1xyXG5cclxuICAgICQoJ2JvZHknKS5vbignY2xpY2snLCAnLmdvLWFzLWd1ZXN0LWNoZWNrb3V0JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJy5zaGlwcGluZy1jaGVja291dGFzZ3Vlc3QsIC5zaWduaW50b215YWNjb3VudC1ibG9jaycpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgJCgnLnNoaXBwaW5nbG9naW5kZXRhaWxzICwgLmFkZHJlc3NpZCcpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xyXG4gICAgfSk7XHJcbiAgICBpZiAoJCgnLnN0YXRlLXNoaXBwaW5nLXZhbGlkLWRpYWxvZycpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICB2YXIgZGlhbG9nV2lkdGggPSA1MTE7XHJcbiAgICAgICAgdmFyIHNpbmdPdXREaWFsb2cgPSBkaWFsb2cuY3JlYXRlKHtcclxuICAgICAgICAgICAgdGFyZ2V0OiAnI2RpYWxvZy1jb250YWluZXInLFxyXG4gICAgICAgICAgICBvcHRpb25zOiB7XHJcbiAgICAgICAgICAgICAgICBiZ2lmcmFtZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGF1dG9PcGVuOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIG1vZGFsOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IGRpYWxvZ1dpZHRoLFxyXG4gICAgICAgICAgICAgICAgZGlhbG9nQ2xhc3M6ICdzdGF0ZS1zaGlwcGluZy1kaWFsb2cnXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAkKHNpbmdPdXREaWFsb2cpLmVtcHR5KCkuYXBwZW5kKCQoJy5zdGF0ZS1zaGlwcGluZy12YWxpZC1kaWFsb2cnKS5odG1sKCkpO1xyXG4gICAgICAgIHNpbmdPdXREaWFsb2cuZGlhbG9nKCdvcGVuJyk7XHJcbiAgICB9XHJcbiAgICAkKCdib2R5Jykub24oJ2NsaWNrJywgJy5zaGlwcGluZ3NpZ25vdXQnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6IHRoaXMuaHJlZixcclxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkaWFsb2dXaWR0aCA9IDUwMDtcclxuICAgICAgICAgICAgICAgIC8qaWYoICQod2luZG93KS53aWR0aCgpIDwgNzY3ICl7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlhbG9nV2lkdGggPSAzMDBcclxuICAgICAgICAgICAgICAgIH0qL1xyXG4gICAgICAgICAgICAgICAgdmFyIHNpbmdPdXREaWFsb2cgPSBkaWFsb2cuY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6ICcjZGlhbG9nLWNvbnRhaW5lcicsXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiZ2lmcmFtZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXV0b09wZW46IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RhbDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGRpYWxvZ1dpZHRoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaWFsb2dDbGFzczogJ3Npbmctb3V0LWRpYWxvZydcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICQoc2luZ091dERpYWxvZykuZW1wdHkoKS5hcHBlbmQoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICBzaW5nT3V0RGlhbG9nLmRpYWxvZygnb3BlbicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgICQoJ2JvZHknKS5vbignY2xpY2snLCAnLnNpZ25pbnRvbXlhY2NvdW50YnV0dG9uJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNpZ25pbigpO1xyXG4gICAgICAgICQoJ2Zvcm1baWQkPVwiX2xvZ2luXCJdIC5mb3JtZmllbGQudXNlcm5hbWUsIGZvcm1baWQkPVwiX2xvZ2luXCJdIC5mb3JtZmllbGQucGFzc3dvcmQnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcudmFsdWUgaW5wdXQnKS52YWwoJycpLnJlbW92ZUNsYXNzKCdlcnJvcmNsaWVudCcpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy52YWx1ZSBzcGFuLmVycm9yY2xpZW50JykuaGlkZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoJ2Zvcm1baWQkPVwiX2xvZ2luXCJdIC53cm9uZ2FkZHJlc3MnKS5oaWRlKCk7XHJcbiAgICAgICAgJCgnZm9ybVtpZCQ9XCJfbG9naW5cIl0gLiNtZXNzYWdlLmVycm9yJykucmVtb3ZlKCk7XHJcblxyXG4gICAgICAgICQoJy5zaW5nbGVzaGlwcGluZ19lcnJvcicpLmhpZGUoKTtcclxuICAgICAgICAkKCcuc2hpcHBpbmctZW1haWxkZXRhaWxsaW5rcycpLmFkZENsYXNzKCdsb2dpbmFjdGl2ZScpO1xyXG4gICAgICAgICQoJy5zaGlwcGluZy1lbWFpbGRldGFpbGxpbmtzJykucmVtb3ZlQ2xhc3MoJ3JlZ2luYWN0aXZlJyk7XHJcbiAgICAgICAgJCgnLk5ldy1zaGlwcGluZy1hdXRoZW50aWNhdGlvbi1kZXRhaWwgaW5wdXRbaWQkPVwic2hpcHBpbmdBZGRyZXNzX2VtYWlsXCJdJykucmVtb3ZlQ2xhc3MoJ2FjY2VtYWlsJyk7XHJcbiAgICAgICAgJCgnLk5ldy1zaGlwcGluZy1hdXRoZW50aWNhdGlvbi1kZXRhaWwgaW5wdXRbaWQkPVwic2hpcHBpbmdBZGRyZXNzX2VtYWlsY29uZmlybVwiXScpLnJlbW92ZUNsYXNzKCdhY2NlbWFpbGNvbicpO1xyXG4gICAgICAgICQoJy5OZXctc2hpcHBpbmctYXV0aGVudGljYXRpb24tZGV0YWlsIGlucHV0W25hbWUkPVxcJ19ndWVzdGVtYWlsY29uZmlybVxcJ10nKS5yZW1vdmVDbGFzcygnZ3Vlc3RlbWFpbGNvbicpO1xyXG4gICAgICAgICQoJy5OZXctc2hpcHBpbmctYXV0aGVudGljYXRpb24tZGV0YWlsIGlucHV0W25hbWUkPVxcJ19ndWVzdGVtYWlsXFwnXScpLnJlbW92ZUNsYXNzKCdndWVzdGVtYWlsJyk7XHJcbiAgICAgICAgJCgnLnNoaXBwaW5nbG9naW5kZXRhaWxzIGlucHV0W25hbWUkPVxcJ2xvZ2luX3VzZXJuYW1lXFwnXScpLmFkZENsYXNzKCdsb2dnZWRlbWFpbCcpO1xyXG4gICAgICAgICQoJy5zaGlwcGluZ2xvZ2luZGV0YWlscyAuY29ycmVjdGFkZHJlc3MnKS5yZW1vdmVDbGFzcygnZXJyb3InKS5oaWRlKCk7XHJcbiAgICAgICAgaWYgKCQoJy5lbWFpbGhpZGRlbicpLnZhbCgpKSB7XHJcbiAgICAgICAgICAgICQoJ2lucHV0W2lkJD1cImxvZ2luX3VzZXJuYW1lXCJdJykudmFsKCQoJy5lbWFpbGhpZGRlbicpLnZhbCgpKTtcclxuICAgICAgICAgICAgJCgnaW5wdXRbaWQkPVwibG9naW5fdXNlcm5hbWVcIl0nKS5ibHVyKCk7XHJcbiAgICAgICAgICAgICQoJ2lucHV0W2lkJD1cImxvZ2luX3VzZXJuYW1lXCJdJykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5jb3JyZWN0YWRkcmVzcycpLnNob3coKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgJCgnLk5ldy1zaGlwcGluZy1hdXRoZW50aWNhdGlvbi1kZXRhaWwgaW5wdXRbbmFtZSQ9XFwnc2hpcHBpbmdBZGRyZXNzX3Bhc3N3b3JkXFwnXScpLnJlbW92ZUNsYXNzKCdjX3Bhc3N3b3JkJyk7XHJcbiAgICAgICAgJCgnLk5ldy1zaGlwcGluZy1hdXRoZW50aWNhdGlvbi1kZXRhaWwgaW5wdXRbbmFtZSQ9XFwnc2hpcHBpbmdBZGRyZXNzX3Bhc3N3b3JkY29uZmlybVxcJ10nKS5yZW1vdmVDbGFzcygnY21fcGFzc3dvcmQnKTtcclxuICAgICAgICAkKCcuc2hpcHBpbmdsb2dpbmRldGFpbHMgaW5wdXRbbmFtZSQ9XFwnbG9naW5fcGFzc3dvcmRcXCddJykuYWRkQ2xhc3MoJ2xvZ2luX3Bhc3N3b3JkJyk7XHJcbiAgICAgICAgJCgnLnNoaXBwaW5nLWFkZHJlc3MtZmllbGQtc2VjdGlvbiAudmFsdWUgaW5wdXQnKS5yZW1vdmVDbGFzcygnZXJyb3JjbGllbnQnKTtcclxuICAgICAgICAkKCcuc2hpcHBpbmctYWRkcmVzcy1maWVsZC1zZWN0aW9uIC52YWx1ZSBzcGFuLmVycm9yY2xpZW50JykuaGlkZSgpO1xyXG4gICAgICAgICQoJy5jdXN0b20tc2VsZWN0JykucmVtb3ZlQ2xhc3MoJ2N1c3RvbXNlbGVjdC1lcnJvcicpO1xyXG4gICAgICAgICQoJy5zdGF0ZWVycm9yJykuaGlkZSgpO1xyXG4gICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcclxuICAgIH0pO1xyXG5cclxuICAgICQoJy5zaGlwcGluZy1ndWVzdGVtYWlsYWRkcmVzcyAudGV4dGlucHV0LCAuc2hpcHBpbmctZ3Vlc3Rjb25maXJtZW1haWxhZGRyZXNzIC50ZXh0aW5wdXQsIC5zaGlwcGluZ2xvZ2luZGV0YWlscyAudXNlcm5hbWUgLnRleHRpbnB1dCwgLnNoaXBwaW5nbG9naW5kZXRhaWxzIC50ZXh0aW5wdXRwdywgLnNoaXBwaW5nLWVtYWlsYWRkcmVzcyAudGV4dGlucHV0LCAuc2hpcHBpbmctY29uZmlybWVtYWlsYWRkcmVzcyAudGV4dGlucHV0LCAuc2hpcHBpbmctcGFzc3dvcmQgLnRleHRpbnB1dHB3LCAuc2hpcHBpbmctY29uZmlybXBhc3N3b3JkIC50ZXh0aW5wdXRwdycpLmJsdXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICgkKHRoaXMpLnZhbGlkKCkgPT0gMCkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcuY29ycmVjdGFkZHJlc3MnKS5hZGRDbGFzcygnZXJyb3InKS5zaG93KCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmNvcnJlY3RhZGRyZXNzJykucmVtb3ZlQ2xhc3MoJ2Vycm9yJykuc2hvdygpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgLy9QUkVWQUlMIC0gaW5pdCBBZGRyZXNzIFZhbGlkYXRpb25cclxuICAgIHJlcXVpcmUoJy4uLy4uL2FkZHJlc3N2YWxpZGF0aW9uJykuaW5pdCgpO1xyXG59O1xyXG5cclxuZXhwb3J0cy51cGRhdGVTaGlwcGluZ01ldGhvZExpc3QgPSB1cGRhdGVTaGlwcGluZ01ldGhvZExpc3Q7XHJcbmV4cG9ydHMudXBkYXRlU3VtbWFyeSA9IHVwZGF0ZVN1bW1hcnk7IC8vSklSQSBQUkVWLTk5IDogc2hpcHBpbmcgbWV0aG9kcyBpcyBub3QgZGlzcGxheWVkIGZvciAybmQgYWRkcmVzcyBpbiByaWdodCBuYXYuXHJcbiIsIid1c2Ugc3RyaWN0JztcclxuXHJcbnZhciBhZGRQcm9kdWN0VG9DYXJ0ID0gcmVxdWlyZSgnLi9wcm9kdWN0L2FkZFRvQ2FydCcpLFxyXG4gICAgYWpheCA9IHJlcXVpcmUoJy4uL2FqYXgnKSxcclxuICAgIHBhZ2UgPSByZXF1aXJlKCcuLi9wYWdlJyksXHJcbiAgICBwcm9kdWN0VGlsZSA9IHJlcXVpcmUoJy4uL3Byb2R1Y3QtdGlsZScpLFxyXG4gICAgcXVpY2t2aWV3ID0gcmVxdWlyZSgnLi4vcXVpY2t2aWV3Jyk7XHJcblxyXG4vKipcclxuICogQHByaXZhdGVcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBkZXNjcmlwdGlvbiBCaW5kcyB0aGUgY2xpY2sgZXZlbnRzIHRvIHRoZSByZW1vdmUtbGluayBhbmQgcXVpY2stdmlldyBidXR0b25cclxuICovXHJcbmZ1bmN0aW9uIGluaXRpYWxpemVFdmVudHMoKSB7XHJcbiAgICAkKCcjY29tcGFyZS10YWJsZScpLm9uKCdjbGljaycsICcucmVtb3ZlLWxpbmsnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBhamF4LmdldEpzb24oe1xyXG4gICAgICAgICAgICB1cmw6IHRoaXMuaHJlZixcclxuICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgLyogU3RhcnQgSklSQSBQUkVWLTc0IDogQ29tcGFyZSBwYWdlOiBOb3QgbmF2aWdhdGluZyB0byBQTFAsIFdoZW4gdXNlciBjbGlja3MgdGhlIFwiUmVtb3ZlIChYKVwiIGljb24gb24gdGhlIGxhc3QgcHJvZHVjdCxwcmVzZW50IGluIHRoZSBwcm9kdWN0IGNvbXBhcmUgcGFnZS5cclxuICAgICAgICAgICAgICAgICAgIEFkZGVkIGNvbmRpdGlvbiB0byBjaGVjayBmb3IgdGhlIGxhc3QgcHJvZHVjdCByZW1vdmFsIGlmIHNvIG5hdmlnYXRlIGJhY2sgdG8gcHJldmlvdXMgUExQLlxyXG4gICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiAkKCcjY29tcGFyZS10YWJsZSAucHJvZHVjdC10aWxlJykubGVuZ3RoIDw9IDEgJiYgJCgnI2NvbXBhcmUtY2F0ZWdvcnktbGlzdCcpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJCgnLmJhY2snKS5hdHRyKCdocmVmJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgJCgnI2NvbXBhcmUtdGFibGUgLnByb2R1Y3QtdGlsZScpLmxlbmd0aCA8PSAxICYmICQoJyNjb21wYXJlLWNhdGVnb3J5LWxpc3QnKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnI2NvbXBhcmUtY2F0ZWdvcnktbGlzdCBvcHRpb246c2VsZWN0ZWQnKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcjY29tcGFyZS1jYXRlZ29yeS1saXN0JykudHJpZ2dlcignY2hhbmdlJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2UucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLypFbmQgSklSQSBQUkVWLTc0ICovXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pXHJcbiAgICAgICAgLm9uKCdjbGljaycsICcub3Blbi1xdWljay12aWV3JywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB2YXIgdXJsID0gJCh0aGlzKS5jbG9zZXN0KCcucHJvZHVjdCcpLmZpbmQoJy50aHVtYi1saW5rJykuYXR0cignaHJlZicpO1xyXG4gICAgICAgICAgICBxdWlja3ZpZXcuc2hvdyh7XHJcbiAgICAgICAgICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICAgICAgICAgIHNvdXJjZTogJ3F1aWNrdmlldydcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgJCgnI2NvbXBhcmUtY2F0ZWdvcnktbGlzdCcpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCdmb3JtJykuc3VibWl0KCk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcHJvZHVjdFRpbGUuaW5pdCgpO1xyXG4gICAgaW5pdGlhbGl6ZUV2ZW50cygpO1xyXG4gICAgYWRkUHJvZHVjdFRvQ2FydCgpO1xyXG59O1xyXG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG52YXIgdXRpbCA9IHJlcXVpcmUoJy4uL3V0aWwnKTtcclxuXHJcbmZ1bmN0aW9uIGluaXRpYWxpemF0aW9uRXZlbnQoKSB7XHJcbiAgICB2YXIgY3VycmVudFNpdGVJRCA9ICcnO1xyXG4gICAgdmFyIGN1cnJlbnRTZXNzaW9uU2l0ZSA9ICQoJ2JvZHknKS5maW5kKCcuY3VycmVudC1zZXNzaW9uLXNpdGUnKS52YWwoKTtcclxuICAgIHN3aXRjaCAoY3VycmVudFNlc3Npb25TaXRlKSB7XHJcbiAgICAgICAgY2FzZSAncmFwYWxhJzpcclxuICAgICAgICAgICAgY3VycmVudFNpdGVJRCA9ICcxJztcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnc3VmaXgnOlxyXG4gICAgICAgICAgICBjdXJyZW50U2l0ZUlEID0gJzInO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICd0cmlnZ2VyeCc6XHJcbiAgICAgICAgICAgIGN1cnJlbnRTaXRlSUQgPSAnMyc7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ3N0b3JtJzpcclxuICAgICAgICAgICAgY3VycmVudFNpdGVJRCA9ICc0JztcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnbHVocmplbnNlbic6XHJcbiAgICAgICAgICAgIGN1cnJlbnRTaXRlSUQgPSAnNSc7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ3ZtYyc6XHJcbiAgICAgICAgICAgIGN1cnJlbnRTaXRlSUQgPSAnNic7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ3Rlcm1pbmF0b3InOlxyXG4gICAgICAgICAgICBjdXJyZW50U2l0ZUlEID0gJzcnO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdibHVlZm94JzpcclxuICAgICAgICAgICAgY3VycmVudFNpdGVJRCA9ICc4JztcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnd2lsbGlhbXNvbic6XHJcbiAgICAgICAgICAgIGN1cnJlbnRTaXRlSUQgPSAnOSc7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ21hcmN1bSc6XHJcbiAgICAgICAgICAgIGN1cnJlbnRTaXRlSUQgPSAnMTAnO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdzdHJpa2VtYXN0ZXInOlxyXG4gICAgICAgICAgICBjdXJyZW50U2l0ZUlEID0gJzExJztcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnaWNlZm9yY2UnOlxyXG4gICAgICAgICAgICBjdXJyZW50U2l0ZUlEID0gJzIwJztcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnb3R0ZXInOlxyXG4gICAgICAgICAgICBjdXJyZW50U2l0ZUlEID0gJzIxJztcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgY3VycmVudFNpdGVJRCA9ICcxJztcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZG9jdW1lbnQubG9jYXRpb24ucGF0aG5hbWUuaW5kZXhPZignQ2hhbmdlUmVnaW9uJykgPCAwKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBnZW9pcENvdW50cnlDb2RlID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgdmFyIElQR2VvQ29kZSA9IGdlb2lwQ291bnRyeUNvZGUoKTtcclxuICAgICAgICAgICAgdmFyIGFsbG93ZWRDb3VudHJpZXMgPSAkKCcuYWxsb3dlZC1jb3VudHJpZXMnKS50ZXh0KCk7XHJcbiAgICAgICAgICAgIGlmIChhbGxvd2VkQ291bnRyaWVzID09IG51bGwgfHwgYWxsb3dlZENvdW50cmllcyA9PSAnbnVsbCcgfHwgYWxsb3dlZENvdW50cmllcyA9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgYWxsb3dlZENvdW50cmllcyA9ICdVUyc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGFsbG93ZWRDb3VudHJpZXMuaW5kZXhPZihJUEdlb0NvZGUpICE9IC0xKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdXJsID0gdXRpbC5hcHBlbmRQYXJhbVRvVVJMKFVybHMuaW50ZXJuYXRpb25hbEhvbWVTaG93LCAnaWQnLCBjdXJyZW50U2l0ZUlEKTtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdXJsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufVxyXG5cclxudmFyIGludGVybmF0aW9uYWwgPSB7XHJcbiAgICBpbml0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaW5pdGlhbGl6YXRpb25FdmVudCgpO1xyXG4gICAgfVxyXG59O1xyXG5tb2R1bGUuZXhwb3J0cyA9IGludGVybmF0aW9uYWw7XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuXHJcbnZhciBkaWFsb2cgPSByZXF1aXJlKCcuLi8uLi9kaWFsb2cnKSxcclxuICAgIG1pbmljYXJ0ID0gcmVxdWlyZSgnLi4vLi4vbWluaWNhcnQnKSxcclxuICAgIHV0aWwgPSByZXF1aXJlKCcuLi8uLi91dGlsJyksXHJcbiAgICBUUHJvbWlzZSA9IHJlcXVpcmUoJ3Byb21pc2UnKSxcclxuICAgIF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcclxuXHJcbi8qKlxyXG4gKiBAZGVzY3JpcHRpb24gSGFuZGxlciB0byBoYW5kbGUgdGhlIGFkZCBhbGwgaXRlbXMgdG8gY2FydCBldmVudFxyXG4gKi9cclxudmFyIGFkZEFsbFRvQ2FydCA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgLy9QUkVWQUlMLUFkZGVkIGZvciBHQSBpbnRlZ3JhdGlvblxyXG4gICAgLy9HQWNvbW1lbnRlZFxyXG4gICAgaWYgKGlzRXZlbnRUcmFja2luZ0VuYWJsZWQgJiYgaXNHb29nbGVBbmFseXRpY3NFbmFibGVkKSB7XHJcbiAgICAgICAgZ29vZ2xlQW5hbHl0aWNzRXZlbnRzLmFkZFByb2R1Y3RTZXQoKTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgJHByb2R1Y3RGb3JtcyA9ICQoJyNwcm9kdWN0LXNldC1saXN0JykuZmluZCgnZm9ybScpLnRvQXJyYXkoKTtcclxuICAgIFRQcm9taXNlLmFsbChfLm1hcCgkcHJvZHVjdEZvcm1zLCBhZGRUb0NhcnQpKVxyXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZXMpIHtcclxuICAgICAgICAgICAgZGlhbG9nLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIC8vIHNob3cgdGhlIGZpbmFsIHJlc3BvbnNlIG9ubHksIHdoaWNoIHdvdWxkIGluY2x1ZGUgYWxsIHRoZSBvdGhlciBpdGVtc1xyXG4gICAgICAgICAgICBtaW5pY2FydC5zaG93KHJlc3BvbnNlc1tyZXNwb25zZXMubGVuZ3RoIC0gMV0pO1xyXG4gICAgICAgIH0pO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAZGVzY3JpcHRpb24gQmluZHMgdGhlIGNsaWNrIGV2ZW50IHRvIGEgZ2l2ZW4gdGFyZ2V0IGZvciB0aGUgYWRkLXRvLWNhcnQgaGFuZGxpbmdcclxuICovXHJcbi8vIGFkZHMgYSBwcm9kdWN0IHRvIHRoZSBtaW5pIGNhcnRcclxuLy8gQHBhcmFtc1xyXG4vLyBwcm9ncmVzc0ltYWdlU3JjIC0gc291cmNlL3VybCBvZiB0aGUgaW1hZ2UgdG8gc2hvdyB3aGVuIHRoZSBpdGVtXHJcbi8vIGlzIGJlaW5nIGFkZGVkIHRvIHRoZSBjYXJ0XHJcbi8vIHBvc3RkYXRhIC0gZm9ybSBkYXRhIGNvbnRhaW5pbmcgdGhlIHByb2R1Y3QgaW5mb3JtYXRpb24gdG8gYmVcclxuLy8gYWRkZWQgdG8gbWluaS1jYXJ0XHJcbi8vIGNhbGxiYWNrIC0gY2FsbCBiYWNrIGZ1bmN0aW9uL2hhbmRsZXJcclxudmFyIGFkZFRvQ2FydCA9IHtcclxuICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCcuY2hlY2tvdXRtaW5pY2FydCcpLnNsaW1zY3JvbGwoKTtcclxuICAgICAgICAkKCcuYWRkLXRvLWNhcnRbZGlzYWJsZWRdJykuYXR0cigndGl0bGUnLCAkKCcuYXZhaWxhYmlsaXR5LW1zZycpLnRleHQoKSk7XHJcbiAgICAgICAgLy9TdGFydCBKSVJBIFBSRVYtNDU0LCBQUkVWLTQ2OSA6IEFwcGxpY2F0aW9uIG5hdmlnYXRpb24gbm90IGNvbnNpc3RlbnQgd2hlbiBjbGljayBvZiBhZGQgdG8gY2FydCBidXR0b24gb2YgdGhlIFByb2R1Y3Qgc2V0IHBhZ2VcclxuICAgICAgICAkKCcjYWRkLWFsbC10by1jYXJ0Jykub24oJ2NsaWNrJywgYWRkQWxsVG9DYXJ0KTtcclxuICAgICAgICBpZiAoJCgnLm1pbmktY2FydC1wcm9kdWN0JykubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICAkKCcubWluaWNhcnRjb250ZW50IC5zbGltU2Nyb2xsRGl2JykucmVtb3ZlQ2xhc3MoJ2xlc3MnKTtcclxuICAgICAgICAgICAgJCgnLm1pbmljYXJ0Y29udGVudCAuc2xpbVNjcm9sbERpdiAuc2xpbVNjcm9sbEJhcicpLnNob3coKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkKCcubWluaWNhcnRjb250ZW50IC5zbGltU2Nyb2xsRGl2JykuYWRkQ2xhc3MoJ2xlc3MnKTtcclxuICAgICAgICAgICAgJCgnLm1pbmljYXJ0Y29udGVudCAuc2xpbVNjcm9sbERpdiAuc2xpbVNjcm9sbEJhcicpLmhpZGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgYWRkOiBmdW5jdGlvbiAocHJvZ3Jlc3NJbWFnZVNyYywgcG9zdGRhdGEsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgLy8gZ2V0IHRoZSBkYXRhIG9mIHRoZSBmb3JtIGFzIHNlcmlhbGl6ZWQgc3RyaW5nXHJcbiAgICAgICAgLy92YXIgcG9zdGRhdGEgPSBwb3N0ZGF0YTtcclxuXHJcbiAgICAgICAgZmJxKCd0cmFjaycsICdBZGRUb0NhcnQnLCB7XHJcbiAgICAgICAgICAgICdjb250ZW50X2lkcyc6IFtwb3N0ZGF0YS5waWRdLFxyXG4gICAgICAgICAgICAnY29udGVudF90eXBlJzogJ3Byb2R1Y3QnXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIGdldCBidXR0b24gcmVmZXJlbmNlXHJcbiAgICAgICAgdmFyIGFkZEJ1dHRvbnMgPSBbXTtcclxuXHJcbiAgICAgICAgLy8gdGhlIGJ1dHRvbiB0byB1cGRhdGVcclxuICAgICAgICB2YXIgYWRkQnV0dG9uID0gbnVsbDtcclxuXHJcbiAgICAgICAgLy8gaXQgaXMgYW4gYXJyYXkgb2YgYnV0dG9ucywgYnV0IHdlIG5lZWQgb25seSBvbmUgYWxsXHJcbiAgICAgICAgLy8gb3RoZXIgY29tYmluYXRpb25zIGFyZSBzdHJhbmdlIHNvIGZhclxyXG4gICAgICAgIGlmIChhZGRCdXR0b25zLmxlbmd0aCA9PSAxKSB7XHJcbiAgICAgICAgICAgIGFkZEJ1dHRvbiA9IGFkZEJ1dHRvbnNbMF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgcHJldmlvdXNJbWFnZVNyYyA9IG51bGw7XHJcblxyXG4gICAgICAgIC8vIHNob3cgcHJvZ3Jlc3MgaW5kaWNhdG9yXHJcbiAgICAgICAgaWYgKGFkZEJ1dHRvbiAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHByZXZpb3VzSW1hZ2VTcmMgPSBhZGRCdXR0b24uc3JjO1xyXG4gICAgICAgICAgICBhZGRCdXR0b24uc3JjID0gcHJvZ3Jlc3NJbWFnZVNyYztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGhhbmRsZXMgc3VjY2Vzc2Z1bCBhZGQgdG8gY2FydFxyXG4gICAgICAgIHZhciBoYW5kbGVyRnVuYyA9IGZ1bmN0aW9uIChyZXEpIHtcclxuXHJcbiAgICAgICAgICAgIGlmICgkKCcjY29udGFpbmVyJykuaGFzQ2xhc3MoJ3B0X2NhcnQnKSkge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBoaWRlIHByb2dyZXNzIGluZGljYXRvclxyXG4gICAgICAgICAgICBpZiAoYWRkQnV0dG9uICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGFkZEJ1dHRvbi5zcmMgPSBwcmV2aW91c0ltYWdlU3JjO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyByZXBsYWNlIHRoZSBjb250ZW50XHJcbiAgICAgICAgICAgIGpRdWVyeSgnI21pbmljYXJ0JykuaHRtbChyZXEpO1xyXG4gICAgICAgICAgICBhZGRUb0NhcnQuaW5pdCgpO1xyXG4gICAgICAgICAgICBpZiAoJCgnLm1pbmlyb3cnKS5sZW5ndGggPiAxICYmICEoJCgnYm9keScpLmhhc0NsYXNzKCdyYXBhbGFfZGV2aWNlJykpKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcuY2hlY2tvdXRtaW5pY2FydCcpLnNsaW1zY3JvbGwoe1xyXG4gICAgICAgICAgICAgICAgICAgIHJhaWxWaXNpYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGFsd2F5c1Zpc2libGU6IHRydWVcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgJCgnLm1pbmljYXJ0dGFibGUnKS5maW5kKCd0aGVhZCcpLmZpcnN0KCkuYWRkQ2xhc3MoJ3RoZWFkZml4ZWRUb3AnKTtcclxuICAgICAgICAgICAgICAgICQoJy5jaGVja291dG1pbmljYXJ0JykuZmluZCgnLmNhcnRvcmRlcnRvdGFscycpLnJlbW92ZUNsYXNzKCdjYXJ0dG90YWxzJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcuY2hlY2tvdXRtaW5pY2FydCcpLmZpbmQoJy5taW5pY2FydHRhYmxlJykucmVtb3ZlQ2xhc3MoJ21pbml3aXRob3V0U2Nyb2xsJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcubWluaWNhcnRjb250ZW50JykuZmluZCgnLm1pbmljYXJ0dGFibGVoZWFkZXInKS5yZW1vdmVDbGFzcygnbWluaXdpdGhvdXRTY3JvbGxoZWFkJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcubWluaWNhcnR0YWJsZWhlYWRlcicpLmNzcygnYm9yZGVyLWJvdHRvbScsICcxcHggc29saWQgI2NjYycpO1xyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICQoJy5taW5pY2FydHRhYmxlJykuZmluZCgnLnRoZWFkZml4ZWRUb3AnKS5yZW1vdmVDbGFzcygndGhlYWRmaXhlZFRvcCcpO1xyXG4gICAgICAgICAgICAgICAgJCgnLm1pbmljYXJ0dGFibGUnKS5maW5kKCcuZml4ZWRUb3AnKS5yZW1vdmVDbGFzcygnZml4ZWRUb3AnKTtcclxuICAgICAgICAgICAgICAgICQoJy5taW5pY2FydCcpLmZpbmQoJy5jYXJ0b3JkZXJ0b3RhbHMnKS5hZGRDbGFzcygnY2FydHRvdGFscycpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmNoZWNrb3V0bWluaWNhcnQnKS5maW5kKCcubWluaWNhcnR0YWJsZScpLmFkZENsYXNzKCdtaW5pd2l0aG91dFNjcm9sbCcpO1xyXG4gICAgICAgICAgICAgICAgJCgnLm1pbmljYXJ0Y29udGVudCcpLmZpbmQoJy5taW5pY2FydHRhYmxlaGVhZGVyJykuYWRkQ2xhc3MoJ21pbml3aXRob3V0U2Nyb2xsaGVhZCcpO1xyXG4gICAgICAgICAgICAgICAgJCgnLm1pbmljYXJ0dGFibGVoZWFkZXInKS5jc3MoJ2JvcmRlci1ib3R0b20nLCAnMXB4IHNvbGlkICNjY2MnKTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICgkKCdib2R5JykuaGFzQ2xhc3MoJ3JhcGFsYV9kZXZpY2UnKSkge1xyXG4gICAgICAgICAgICAgICAgJCgnLmNoZWNrb3V0bWluaWNhcnQnKS5maW5kKCcubWluaWNhcnR0YWJsZScpLnJlbW92ZUNsYXNzKCdtaW5pd2l0aG91dFNjcm9sbCcpO1xyXG4gICAgICAgICAgICAgICAgLy8gJChcIi5taW5pY2FydHRhYmxlIC50cl9yb3RhdGlvbjpsYXN0LWNoaWxkXCIpLmZpbmQoJy5taW5pcm93JykuY3NzKCdib3JkZXInLCcxcHgnKTtcclxuICAgICAgICAgICAgICAgICQoJy5taW5pY2FydHRhYmxlJykuZmluZCgndGhlYWQnKS5maXJzdCgpLmFkZENsYXNzKCd0aGVhZGZpeGVkVG9wJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcubWluaWNhcnR0YWJsZSAudHJfcm90YXRpb246bGFzdC1jaGlsZCcpLmZpbmQoJy5taW5pcm93JykuY3NzKCdib3JkZXInLCAnMHB4Jyk7XHJcbiAgICAgICAgICAgICAgICAkKCcubWluaWNhcnR0YWJsZWhlYWRlcicpLmNzcygnYm9yZGVyLWJvdHRvbScsICcxcHggc29saWQgI2NjYycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICQoJy5taW5pY2FydHRhYmxlIC50cl9yb3RhdGlvbjpsYXN0LWNoaWxkJykuZmluZCgnLm1pbmlyb3cnKS5jc3MoJ2JvcmRlcicsICcwcHgnKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChtaW5pY2FydC5zdXBwcmVzc1NsaWRlRG93biAmJiBtaW5pY2FydC5zdXBwcmVzc1NsaWRlRG93bigpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBkbyBub3RoaW5nXHJcbiAgICAgICAgICAgICAgICAvLyB0aGUgaG9vayAnTWluaUNhcnQuc3VwcHJlc3NTbGlkZURvd24oKScgc2hvdWxkIGhhdmVcclxuICAgICAgICAgICAgICAgIC8vIGRvbmUgdGhlIHJlZnJlc2hcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG1pbmljYXJ0LnNsaWRlKCk7XHJcbiAgICAgICAgICAgICAgICBtaW5pY2FydC5zZXRtaW5pY2FyaGVpZ2h0KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICQoJyNwZHBNYWluIC5hZGR0b2NhcnRjb25maXJtLXRvb2x0aXAnKS5mYWRlSW4oNDAwKS5zaG93KClcclxuICAgICAgICAgICAgICAgIC5kZWxheSgxNTAwKS5mYWRlT3V0KDQwMCk7XHJcbiAgICAgICAgICAgIC8vIGZpcmUgdGhlIEJvbnVzRGlzY291bnRMaW5lSXRlbUNoZWNrIGV2ZW50IHNvIHdlIGNhbiBjaGVja1xyXG4gICAgICAgICAgICAvLyBpZiB0aGVyZSBpcyBhIGJvbnVzIGRpc2NvdW50IGxpbmUgaXRlbVxyXG4gICAgICAgICAgICBqUXVlcnkoZG9jdW1lbnQpLnRyaWdnZXIoXHJcbiAgICAgICAgICAgICAgICAvKmVzbGludC1kaXNhYmxlICovXHJcbiAgICAgICAgICAgICAgICBqUXVlcnkuRXZlbnQoJ0JvbnVzRGlzY291bnRMaW5lSXRlbUNoZWNrJykpO1xyXG4gICAgICAgICAgICAgICAgLyplc2xpbnQtZW5hYmxlICovXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gaGFuZGxlcyBhZGQgdG8gY2FydCBlcnJvclxyXG4gICAgICAgIHZhciBlcnJGdW5jID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBoaWRlIHByb2dyZXNzIGluZGljYXRvclxyXG4gICAgICAgICAgICBpZiAoYWRkQnV0dG9uICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGFkZEJ1dHRvbi5zcmMgPSBwcmV2aW91c0ltYWdlU3JjO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gY2xvc2VzIGEgcHJldmlvdXMgbWluaSBjYXJ0XHJcbiAgICAgICAgbWluaWNhcnQuY2xvc2UoKTtcclxuXHJcbiAgICAgICAgdmFyIHVybCA9IFVybHMuYWRkUHJvZHVjdDtcclxuXHJcbiAgICAgICAgLy8gYWRkIHRoZSBwcm9kdWN0XHJcbiAgICAgICAgLy9Mb29rcyB0aGUgYmVsb3cgY29tbWVudGVkIGNvZGUgaXMgbm90IHJlcXVpcmVkIGFuZCB0aGlzIGlzIHN0b3BwaW5nIG5vdCBhYmxlIGFkZCB2YXJpYXRpb24gcHJvZHVjdCBmcm9tIHF1aWNrIHZpZXcgaW4gY2FydCBwYWdlLlxyXG4gICAgICAgIC8qIGlmICgkKCcjY29udGFpbmVyJykuaGFzQ2xhc3MoJ3B0X2NhcnQnKSAmJiAkKCcuYWRkVG8tY2FydC1zZWN0aW9uJykuZmluZCgnLnJlY29tbWVuZGF0aW9uX2NhcnQnKS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICB2YXIgcGxJdGVtSWQgPSAkKCdpbnB1dC5saW5lLWl0ZW1pZCcpLnZhbCgpO1xyXG4gICAgICAgICAgICB2YXIgcGFyYW1zID0ge1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlUXR5OiAndHJ1ZScsXHJcbiAgICAgICAgICAgICAgICBsaW5lSXRlbUlkOiBwbEl0ZW1JZFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB1cmwgPSB1dGlsLmFwcGVuZFBhcmFtc1RvVXJsKFVybHMuZWRpdExpbmVJdGVtLCBwYXJhbXMpO1xyXG4gICAgICAgIH0gKi9cclxuXHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxyXG4gICAgICAgICAgICB1cmw6IHV0aWwuYWpheFVybCh1cmwpLFxyXG4gICAgICAgICAgICBjYWNoZTogdHJ1ZSxcclxuICAgICAgICAgICAgZGF0YTogcG9zdGRhdGEsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGhhbmRsZXJGdW5jLFxyXG4gICAgICAgICAgICBlcnJvcjogZXJyRnVuY1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59O1xyXG5tb2R1bGUuZXhwb3J0cyA9IGFkZFRvQ2FydDtcclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxudmFyIHBkcEV2ZW50cyA9IHJlcXVpcmUoJy4vcGRwRXZlbnRzJyksXHJcbiAgICBhZGRUb0NhcnQgPSByZXF1aXJlKCcuL2FkZFRvQ2FydCcpO1xyXG5cclxudmFyIHByb2R1Y3QgPSB7XHJcbiAgICBpbml0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy9pbml0aWFsaXplRG9tKCk7XHJcbiAgICAgICAgLy9pbml0aWFsaXplRXZlbnRzKCk7XHJcbiAgICAgICAgYWRkVG9DYXJ0LmluaXQoKTtcclxuICAgICAgICBwZHBFdmVudHMuaW5pdCgpO1xyXG4gICAgfVxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBwcm9kdWN0O1xyXG4iLCIndXNlIHN0cmljdCc7XHJcbnZhciB1dGlsID0gcmVxdWlyZSgnLi4vLi4vdXRpbCcpLFxyXG4gICAgZGlhbG9nID0gcmVxdWlyZSgnLi4vLi4vZGlhbG9nJyksXHJcbiAgICAvL3Rvb2x0aXAgPSByZXF1aXJlKCcuLi8uLi90b29sdGlwJyksXHJcbiAgICAvL3VpZXZlbnRzID0gcmVxdWlyZSgnLi4vLi4vdWlldmVudHMnKSxcclxuICAgIC8vcXVpY2t2aWV3ID0gcmVxdWlyZSgnLi4vLi4vcXVpY2t2aWV3JyksXHJcbiAgICBhZGRUb0NhcnQgPSByZXF1aXJlKCcuL2FkZFRvQ2FydCcpLFxyXG4gICAgcHJvZ3Jlc3MgPSByZXF1aXJlKCcuLi8uLi9wcm9ncmVzcycpLFxyXG4gICAgYWpheCA9IHJlcXVpcmUoJy4uLy4uL2FqYXgnKTtcclxuXHJcbnZhciBwcm9kdWN0ID0gZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAvLyBwcm9kdWN0IHByaXZhdGUgZGF0YVxyXG5cclxuICAgIC8vIHByb2R1Y3QganNvbiBkYXRhXHJcbiAgICB2YXIgbW9kZWwgPSByZXNwb25zZTtcclxuXHJcbiAgICAvLyBkaXYgY290YWluZXIgaWRcclxuICAgIHZhciBteUNvbnRhaW5lcklkID0gJyc7XHJcblxyXG4gICAgLy8gYm9vbGVhbiBmbGFnIHRvIHRyYWNrIHRoZSB2YXJpYW50cyBkYXRhIHJlcXVlc3QsIHJlc2V0IGluIGxvYWRWYXJpYW50cygpIHdoZW4gdGhlIHZhcmlhbnRzIGRhdGEgaXMgbG9hZGVkXHJcbiAgICB2YXIgaXNMb2FkaW5nVmFyID0gZmFsc2U7XHJcblxyXG4gICAgLy8gaGVscGVyIGZ1bmN0aW9uIHRvIGxvYWQgdmFyaWFudHMgZGF0YSBmcm9tIHRoZSBzZXJ2ZXJcclxuICAgIC8vIG9uY2UgdGhlIGRhdGEgaXMgcmV0cmlldmVkLCBpdCBmaXJlcyBWYXJpYXRpb25zTG9hZGVkIGV2ZW50IHNvIHRoYXQgVUkgY2FuIGJlIHJlZnJlc2hlZCBhcHByb3ByaWF0ZWx5XHJcbiAgICB2YXIgbG9hZFZhcmlhbnRzID0gZnVuY3Rpb24gKHRoaXNQcm9kdWN0KSB7XHJcbiAgICAgICAgaXNMb2FkaW5nVmFyID0gdHJ1ZTtcclxuICAgICAgICAvLyBidWlsZCB0aGUgdXJsIGFuZCBsb2FkIHZhcmlhbnRzIGRhdGFcclxuICAgICAgICBhamF4LmdldEpzb24oe1xyXG4gICAgICAgICAgICB1cmw6IFVybHMuZ2V0VmFyaWFudHMsXHJcbiAgICAgICAgICAgIGRhdGE6IHsncGlkJzogdGhpc1Byb2R1Y3QucGlkLCAnZm9ybWF0JzogJ2pzb24nfSxcclxuICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChkYXRhKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFkYXRhIHx8ICFkYXRhLnZhcmlhdGlvbnMgfHwgIWRhdGEudmFyaWF0aW9ucy52YXJpYW50cykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG1vZGVsLnZhcmlhdGlvbnMudmFyaWFudHMgPSBkYXRhLnZhcmlhdGlvbnMudmFyaWFudHM7XHJcbiAgICAgICAgICAgICAgICBpc0xvYWRpbmdWYXIgPSBmYWxzZTsgLy8gd2UgaGF2ZSBsb2FkZWQgdGhlIHZhcmlhbnRzXHJcbiAgICAgICAgICAgICAgICBqUXVlcnkodGhpc1Byb2R1Y3QpLnRyaWdnZXIoJ1ZhcmlhdGlvbnNMb2FkZWQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBoZWxwZXIgZnVuY3Rpb24gdG8gcmVsb2FkIGF2YWlsYWJpbGl0eSBkYXRhLlxyXG4gICAgLy8gYnkgZGVmYXVsdCwgYXZhaWxhYmlsaXR5IGRhdGEgaXMgYmFzZWQgb24gYSBxdWFudGl0eSBvZiAxLlxyXG4gICAgLy8gaWYgYSBjdXN0b21lciBjaGFuZ2VzIHRoZSBxdWFudGl0eSwgdXNlIHRoaXMgbWV0aG9kXHJcbiAgICAvLyB0byByZWxvYWQgdGhlIGF2YWlsYWJpbGl0eSBiYXNlZCBvbiB0aGUgbmV3IHF1YW50aXR5LlxyXG4gICAgdmFyIHJlbG9hZEF2YWlsYWJpbGl0eSA9IGZ1bmN0aW9uICh0aGlzUHJvZHVjdCwgcXVhbnRpdHkpIHtcclxuXHJcbiAgICAgICAgdmFyIGlkID0gJyc7XHJcbiAgICAgICAgaWYgKHRoaXNQcm9kdWN0Lm1hc3RlciB8fCB0aGlzUHJvZHVjdC52YXJpYW50KSB7XHJcbiAgICAgICAgICAgIGlkID0gdGhpc1Byb2R1Y3Quc2VsZWN0ZWRWYXIuaWQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWQgPSB0aGlzUHJvZHVjdC5waWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBhamF4LmdldEpzb24oe1xyXG4gICAgICAgICAgICB1cmw6IFVybHMuZ2V0QXZhaWxhYmlsaXR5LFxyXG4gICAgICAgICAgICBkYXRhOiB7J3BpZCc6IGlkLCAnUXVhbnRpdHknOiBxdWFudGl0eSwgJ2Zvcm1hdCc6ICdqc29uJ30sXHJcbiAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoZGF0YSkge1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghZGF0YSB8fCAhZGF0YS5sZXZlbHMpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIHRoZSBkYXRhIGluIHRoZSB2YXJpYW50XHJcbiAgICAgICAgICAgICAgICBpZiAoKHRoaXNQcm9kdWN0Lm1hc3RlciB8fCB0aGlzUHJvZHVjdC52YXJpYW50KSAmJiB0aGlzUHJvZHVjdC5zZWxlY3RlZFZhcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LnNlbGVjdGVkVmFyLmF2TGV2ZWxzID0gZGF0YS5sZXZlbHM7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3Quc2VsZWN0ZWRWYXIuYXZTdGF0dXMgPSBkYXRhLnN0YXR1cztcclxuICAgICAgICAgICAgICAgICAgICB0aGlzUHJvZHVjdC5zZWxlY3RlZFZhci5hdlN0YXR1c1F1YW50aXR5ID0gZGF0YS5zdGF0dXNRdWFudGl0eTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kZWwuYXZMZXZlbHMgPSBkYXRhLmxldmVscztcclxuICAgICAgICAgICAgICAgICAgICBtb2RlbC5hdlN0YXR1cyA9IGRhdGEuc3RhdHVzO1xyXG4gICAgICAgICAgICAgICAgICAgIG1vZGVsLmF2U3RhdHVzUXVhbnRpdHkgPSBkYXRhLnN0YXR1cztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzUHJvZHVjdCkudHJpZ2dlcignUmVsb2FkQXZhaWxhYmlsaXR5Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9O1xyXG4gICAgLy8gcmV0dXJucyB0aGUgYWdncmVnYXRlIGF2YWlsYWJsZSB0byBzZWxsIHZhbHVlXHJcbiAgICAvLyBmcm9tIGFsbCB2YXJpYW50c1xyXG4gICAgdmFyIGdldEFUUyA9IGZ1bmN0aW9uICh2YXJpYW50cykge1xyXG5cclxuICAgICAgICB2YXIgYXRzQ291bnQgPSAwO1xyXG4gICAgICAgIHZhciB2YXJpYW50O1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFyaWFudHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyaWFudCA9IHZhcmlhbnRzW2ldO1xyXG4gICAgICAgICAgICBpZiAodmFyaWFudC5BVFMgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBhdHNDb3VudCA9IGF0c0NvdW50ICsgdmFyaWFudC5BVFM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGF0c0NvdW50O1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyByZXR1cm5zIHRoZSBhZ2dyZWdhdGUgYXZhaWxhYmxlIHRvIHNlbGwgdmFsdWVcclxuICAgIC8vIGZyb20gYWxsIHZhcmlhbnRzXHJcbiAgICB2YXIgZ2V0QXZhaWxhYmlsaXR5ID0gZnVuY3Rpb24gKHZhcmlhbnRzKSB7XHJcblxyXG4gICAgICAgIHZhciBhdmFpbGFibGUgPSBmYWxzZTtcclxuICAgICAgICB2YXIgdmFyaWFudDtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhcmlhbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhcmlhbnQgPSB2YXJpYW50c1tpXTtcclxuICAgICAgICAgICAgaWYgKHZhcmlhbnQuYXZTdGF0dXMgIT09ICdOT1RfQVZBSUxBQkxFJykge1xyXG4gICAgICAgICAgICAgICAgYXZhaWxhYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhdmFpbGFibGU7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGhlbHBlciBmdW5jdGlvbiB0byBiaW5kIHByb2R1Y3Qgb3B0aW9ucyBkcm9wIGRvd25zIGV2ZW50IGhhbmRsZXJzXHJcbiAgICAvLyBJbnRpYWxpemVzIHRoZSBwcm9kdWN0LnNlbGVjdGVkT3B0aW9ucyBvYmplY3Qgd2l0aCB0aGUgY3VycmVudGx5IHNlbGVjdGVkIG9wdGlvbnNcclxuICAgIC8vIGl0IGFsc28gc2hvd3MgdGhlIGNvbXB1dGVkL3VwZGF0ZWQgcHJpY2VcclxuICAgIHZhciBnZXRPcHRpb25zRGl2ID0gZnVuY3Rpb24gKHRoaXNQcm9kdWN0KSB7XHJcblxyXG4gICAgICAgIGlmIChtb2RlbC5pc09wdGlvbikge1xyXG5cclxuICAgICAgICAgICAgdmFyIHBkcE9wdCA9IGpRdWVyeSh0aGlzUHJvZHVjdC5jb250YWluZXJJZCArICcgLnByb2R1Y3Rfb3B0aW9uczpsYXN0IHNlbGVjdCcpO1xyXG5cclxuICAgICAgICAgICAgcGRwT3B0LmNoYW5nZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdmFscyA9IHRoaXMub3B0aW9uc1t0aGlzLnNlbGVjdGVkSW5kZXhdLnZhbHVlLnNwbGl0KCclPyUnKTsgLy8gMCA9IHZhbHVlLCAxID0gcHJpY2VcclxuICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LnNlbGVjdGVkT3B0aW9uc1t0aGlzLmlkXSA9IHZhbHNbMF07XHJcbiAgICAgICAgICAgICAgICB0aGlzUHJvZHVjdC5zZWxlY3RlZFByaWNlW3RoaXMuaWRdID0gdmFsc1sxXTtcclxuICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LnNob3dVcGRhdGVkUHJpY2UoY29tcHV0ZVByaWNlKHRoaXNQcm9kdWN0KSwgbW9kZWwucHJpY2luZy5zdGFuZGFyZCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gbGV0IHVzIGdldCB0aGUgY3VycmVudGx5IHNlbGVjdGVkIHZhbHVlIGFuZCBpbnRpbGl6ZSB0aGUgdWlcclxuICAgICAgICAgICAgcGRwT3B0LmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHZhbHMgPSB0aGlzLm9wdGlvbnNbdGhpcy5zZWxlY3RlZEluZGV4XS52YWx1ZS5zcGxpdCgnJT8lJyk7IC8vIDAgPSB2YWx1ZSwgMSA9IHByaWNlXHJcblxyXG4gICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3Quc2VsZWN0ZWRPcHRpb25zW3RoaXMuaWRdID0gdmFsc1swXTtcclxuICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LnNlbGVjdGVkUHJpY2VbdGhpcy5pZF0gPSB2YWxzWzFdO1xyXG4gICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3Quc2hvd1VwZGF0ZWRQcmljZShjb21wdXRlUHJpY2UodGhpc1Byb2R1Y3QpLCBtb2RlbC5wcmljaW5nLnN0YW5kYXJkKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBiaW5kcyBBMkMgYnV0dG9uIGNsaWNrIGhhbmRsZXJcclxuICAgIHZhciBnZXRBZGRUb0NhcnRCdG4gPSBmdW5jdGlvbiAodGhpc1Byb2R1Y3QpIHtcclxuICAgICAgICB2YXIgYWRkVG9DYXJ0QnRuID0galF1ZXJ5KHRoaXNQcm9kdWN0LmNvbnRhaW5lcklkICsgJyAuYWRkdG9jYXJ0YnV0dG9uOmxhc3QnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChtb2RlbC5tYXN0ZXIgfHwgbW9kZWwudmFyaWFudCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXNQcm9kdWN0LnNlbGVjdGVkVmFyID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gaXQgaXMgbmVjZXNzYXJ5IHRvIHVwZGF0ZSB0aGUgb3B0aW9uIGlkIHRvIGJlIHZhcmlhbnQtc3BlY2lmaWNcclxuICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzUHJvZHVjdC5jb250YWluZXJJZCArICcgLnByb2R1Y3Rfb3B0aW9uczpsYXN0IHNlbGVjdCcpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRoaXNQcm9kdWN0LnNlbGVjdGVkT3B0aW9uc1t0aGlzLmlkXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3SWQgPSB0aGlzLmlkLnJlcGxhY2UodGhpc1Byb2R1Y3QucGlkLCB0aGlzUHJvZHVjdC5zZWxlY3RlZFZhci5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3Quc2VsZWN0ZWRPcHRpb25zW25ld0lkXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzUHJvZHVjdC5zZWxlY3RlZE9wdGlvbnNbdGhpcy5pZF07XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzUHJvZHVjdC5zZWxlY3RlZE9wdGlvbnMucGlkID0gdGhpc1Byb2R1Y3Quc2VsZWN0ZWRWYXIuaWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzUHJvZHVjdC5zZWxlY3RlZE9wdGlvbnMubWFzdGVyUGlkID0gdGhpc1Byb2R1Y3QucGlkO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRlbXBRdHkgPSAnJztcclxuICAgICAgICAgICAgICAgIC8vIGNoZWNrIGlmIHdlIGFyZSBhZGRpbmcgYSBidW5kbGUvcHJvZHVjdHNldCB0byB0aGUgY2FydFxyXG4gICAgICAgICAgICAgICAgaWYgKG1vZGVsLmJ1bmRsZSB8fCBtb2RlbC5wcm9kdWN0U2V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN1YlByb2R1Y3RzID0gdGhpc1Byb2R1Y3Quc3ViUHJvZHVjdHM7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbW1hID0gJywnO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzdWJwcm9kdWN0ID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3Quc2VsZWN0ZWRPcHRpb25zLmNoaWxkUGlkcyA9ICcnO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAobW9kZWwucHJvZHVjdFNldCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzUHJvZHVjdC5zZWxlY3RlZE9wdGlvbnMuUXVhbnRpdHkgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHByb2Nlc3MgZWFjaCBpbmRpdmlkdWFsIHByb2R1Y3RzIGluIHRoZSBzZXQvYnVuZGxlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHByZXBhcmUgcHJvZHVjdC5zZWxlY3RlZE9wdGlvbnMgZm9yIGZpbmFsIHN1Ym1pc3Npb25cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN1YlByb2R1Y3RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnByb2R1Y3QgPSBzdWJQcm9kdWN0c1tpXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID09IHN1YlByb2R1Y3RzLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1hID0gJyc7IC8vIGF0IHRoZSBlbmQgb2YgdGhlIGxpc3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VlIGlmIGFueSBvZiB0aGUgc3ViIHByb2R1Y3RzIGFyZSB2YXJpYXRpb25zLCBpZiBzbyB0aGVuIGdldCB0aGUgc2VsZWN0ZWQgdmFyaWF0aW9uIGlkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZyb20gc2VsZWN0ZWRWYXIgcHJvcGVydHkgYW5kIG1ha2UgaXQgYSBjb21tYSBzZXBhcmF0ZWQgbGlzdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHN1YnByb2R1Y3QudmFyaWFudCB8fCBzdWJwcm9kdWN0Lm1hc3RlcikgJiYgc3VicHJvZHVjdC5zZWxlY3RlZFZhciA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3VicHJvZHVjdC52YXJpYW50IHx8IHN1YnByb2R1Y3QubWFzdGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzUHJvZHVjdC5zZWxlY3RlZE9wdGlvbnMuY2hpbGRQaWRzICs9IHN1YnByb2R1Y3Quc2VsZWN0ZWRWYXIuaWQgKyBjb21tYTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LnNlbGVjdGVkT3B0aW9ucy5jaGlsZFBpZHMgKz0gc3VicHJvZHVjdC5waWQgKyBjb21tYTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXBQaWQgPSBzdWJwcm9kdWN0LnNlbGVjdGVkT3B0aW9ucy5waWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnByb2R1Y3Quc2VsZWN0ZWRPcHRpb25zLnBpZCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1lcmdlIHNlbGVjdGVkIG9wdGlvbnMgb2Ygc3ViIHByb2R1Y3Qgd2l0aCB0aGUgbWFpbiBwcm9kdWN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LnNlbGVjdGVkT3B0aW9ucyA9IGpRdWVyeS5leHRlbmQoe30sIHRoaXNQcm9kdWN0LnNlbGVjdGVkT3B0aW9ucywgc3VicHJvZHVjdC5zZWxlY3RlZE9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJwcm9kdWN0LnNlbGVjdGVkT3B0aW9ucy5waWQgPSB0ZW1wUGlkO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgaXQgaXMgYSBwcm9kdWN0IHNldCB0aGVuIHN1YiBwcm9kdWN0cyBjYW4gaGF2ZSB0aGVpciBzZXBhcmF0ZSBxdHlcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1vZGVsLnByb2R1Y3RTZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBRdHkgKz0gc3VicHJvZHVjdC5zZWxlY3RlZE9wdGlvbnMuUXVhbnRpdHkgKyBjb21tYTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBpZiBpdCBpcyBhIHByb2R1Y3Qgc2V0IHRoZW4gc3ViIHByb2R1Y3RzIGNhbiBoYXZlIHRoZWlyIHNlcGFyYXRlIHF0eVxyXG4gICAgICAgICAgICAgICAgLy8gdGVtcFF0eSBpcyBhIGNvbW1hIHNlcGFyYXRlZCBsaXN0IG9mIHF0eSBmb3IgZWFjaCBwcm9kdWN0IGluIHRoZSBzZXRcclxuICAgICAgICAgICAgICAgIGlmIChtb2RlbC5wcm9kdWN0U2V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3Quc2VsZWN0ZWRPcHRpb25zLlF1YW50aXR5ID0gdGVtcFF0eTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBtYWtlIHN1cmUgdGhlIHBpZCB3aGljaCBnZXRzIHN1Ym1pdHRlZCBpcyBmb3IgdGhlIG1haW4gcHJvZHVjdFxyXG4gICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3Quc2VsZWN0ZWRPcHRpb25zLnBpZCA9IHRoaXNQcm9kdWN0LnBpZDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKG1vZGVsLmJ1bmRsZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3Quc2VsZWN0ZWRPcHRpb25zLlF1YW50aXR5ID0gMTsgLy8gaGFyZCBjb2RlZCBxdHk9MSB3aGVuIHdlIHRoZSBwcm9kdWN0IGlzIGEgYnVuZGxlXHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIW1vZGVsLnByb2R1Y3RTZXQpIHtcclxuICAgICAgICAgICAgICAgIC8vIGdyYWIgdGhlIHVzZXIgZW50ZXJlZCBxdHlcclxuICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LnNlbGVjdGVkT3B0aW9ucy5RdWFudGl0eSA9IGpRdWVyeSh0aGlzUHJvZHVjdC5jb250YWluZXJJZCArICcgLnF1YW50aXR5aW5wdXQ6bGFzdCcpLnZhbCgpO1xyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gaWYgaXQgaXMgbm90IGEgcHJvZHVjdHNldCB0aGVuIG1ha2Ugc3VyZSBxdHkgaXMgc3BlY2lmaWVkIGdyZWF0ZXIgdGhhbiAwXHJcbiAgICAgICAgICAgIGlmIChtb2RlbC5wcm9kdWN0U2V0IHx8IHRoaXNQcm9kdWN0LnNlbGVjdGVkT3B0aW9ucy5RdWFudGl0eSA+IDApIHtcclxuICAgICAgICAgICAgICAgIC8vIGRpc2FibGUgYTJjIGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgYWRkVG9DYXJ0QnRuLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gZmluZCBpZiB0aGVyZSBpcyBhIGhhbmRsZXIgYm91bmQgdG8gQWRkVG9DYXJ0IGV2ZW50IGUuZy4gY2FydCAtPiBlZGl0IGRldGFpbHMgb3Igd2lzaGxpc3QgLT4gZWRpdCBkZXRhaWxzIGV0Yy5cclxuICAgICAgICAgICAgICAgIC8vIHRoZW4gZmlyZSBpdCBvdGhlcmV3aXNlIGNhbGwgYWRkVG9DYXJ0LmFkZCB0byBhZGQgdGhlIHNlbGVjdGVkIHByb2R1Y3QgdG8gdGhlIGNhcnQgYW5kIHNob3cgbWluaWNhcnRcclxuICAgICAgICAgICAgICAgIC8qZXNsaW50LWRpc2FibGUgKi9cclxuICAgICAgICAgICAgICAgIHZhciBldmVudCA9IGpRdWVyeS5FdmVudCgnQWRkVG9DYXJ0Jyk7XHJcbiAgICAgICAgICAgICAgICAvKmVzbGludC1lbmFibGUgKi9cclxuICAgICAgICAgICAgICAgIGV2ZW50LnNlbGVjdGVkT3B0aW9ucyA9IHRoaXNQcm9kdWN0LnNlbGVjdGVkT3B0aW9ucztcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoalF1ZXJ5LmV2ZW50Lmdsb2JhbC5BZGRUb0NhcnQgPT0gdW5kZWZpbmVkIHx8IGpRdWVyeS5ldmVudC5nbG9iYWwuQWRkVG9DYXJ0ID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBhZGRUb0NhcnQuYWRkKCcnLCB0aGlzUHJvZHVjdC5zZWxlY3RlZE9wdGlvbnMsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkVG9DYXJ0QnRuLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBqUXVlcnkoZG9jdW1lbnQpLnRyaWdnZXIoZXZlbnQpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gYWRkVG9DYXJ0QnRuO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBiaW5kIHF0eSBib3gga2V5dXAgaGFuZGxlclxyXG4gICAgLy8gdGhlIGhhbmRsZXIgZ3JhYnMgdGhlIHZhbHVlIGFuZCB1cGRhdGVzXHJcbiAgICAvLyBwcm9kdWN0LnNlbGVjdGVkT3B0aW9uLlF1YW50aXR5XHJcbiAgICAvLyBzaG93IHRoZSB1cGRhdGVkIGF2YWlsYWJpbHR5IG1lc3NhZ2UgaW4gY2FzZSB0aGUgYXZhaWxhYmxlIHF0eSBpcyBkaWZmZXJlbnQgdGhhbiBhdmFpbGFibGUgZXRjLlxyXG4gICAgLy8gdHJpZ2dlciBBZGR0b0NhcnRFbmFibGVkIGV2ZW50XHJcbiAgICB2YXIgZ2V0UXR5Qm94ID0gZnVuY3Rpb24gKHRoaXNQcm9kdWN0KSB7XHJcblxyXG4gICAgICAgIGpRdWVyeSh0aGlzUHJvZHVjdC5jb250YWluZXJJZCArICcgLnF1YW50aXR5aW5wdXQ6bGFzdCcpLmtleXVwKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHZhbCA9IG51bGw7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUludChqUXVlcnkodGhpc1Byb2R1Y3QuY29udGFpbmVySWQgKyAnIC5xdWFudGl0eWlucHV0Omxhc3QnKS52YWwoKSwgMTApO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICB2YWwgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodmFsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzUHJvZHVjdC5zZWxlY3RlZE9wdGlvbnMuUXVhbnRpdHkgPSB2YWw7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gaWYgdGhlIHByb2R1Y3QgaGFzIHZhcmlhdGlvbnMgY2hlY2sgZm9yIG5vbiBzZWxlY3RlZCBvbmVzIGFuZCBkaXNwbGF5IG1pc3NpbmcgdmFsdWVcclxuICAgICAgICAgICAgICAgIGlmIChtb2RlbC52YXJpYXRpb25zICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBub25TZWxlY3RlZFZhcnMgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IHRoZSBub24tc2VsZWN0ZWQgdmFyaWF0aW9uc1xyXG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeS5lYWNoKG1vZGVsLnZhcmlhdGlvbnMuYXR0cmlidXRlcywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXNQcm9kdWN0LnNlbGVjdGVkVmFyQXR0cmlic1t0aGlzLmlkXSB8fCB0aGlzUHJvZHVjdC5zZWxlY3RlZFZhckF0dHJpYnNbdGhpcy5pZF0gPT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vblNlbGVjdGVkVmFycy5wdXNoKHRoaXMubmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vblNlbGVjdGVkVmFycy5sZW5ndGggPiAwKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBtYWtlIHN1cmUgdGhlcmUgaXMgc29tZXRoaW5nIHRvIHNlbGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGF0c0NvdW50ID0gZ2V0QVRTKG1vZGVsLnZhcmlhdGlvbnMudmFyaWFudHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXRzQ291bnQgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG9vbHRpcFN0ciA9IGdldE5vblNlbGVjdGVkVG9vbHRpcChub25TZWxlY3RlZFZhcnMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWlzc2luZ01zZyA9ICQudmFsaWRhdG9yLmZvcm1hdChSZXNvdXJjZXMuTUlTU0lOR19WQUwsIHRvb2x0aXBTdHIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRBdmFpbGFiaWxpdHlNc2cobWlzc2luZ01zZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIHF1YW50aXR5IHZhbHVlIGlzIGRpZmZlcmVudCB0aGFuXHJcbiAgICAgICAgICAgICAgICAvLyB3aGVuIHdlIGxvYWRlZCB0aGUgYXZhaWxhYmlsaXR5IGRhdGEsIHRoZW5cclxuICAgICAgICAgICAgICAgIC8vIHJlZnJlc2ggYXZhaWxhYmlsaXR5IGRhdGEgZm9yIHRoaXMgdmFyaWFudFxyXG4gICAgICAgICAgICAgICAgaWYgKHZhbCAhPSB0aGlzUHJvZHVjdC5nZXRBdmFpbGFiaWxpdHlRdHkoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbG9hZEF2YWlsYWJpbGl0eSh0aGlzUHJvZHVjdCwgdmFsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vSkNLOiB0aGlzIGlzbid0IGJlaW5nIHJ1biBBRlRFUiBBSkFYP1xyXG4gICAgICAgICAgICAgICAgLy9zZXRBdmFpbGFiaWxpdHlNc2coY3JlYXRlQXZNZXNzYWdlKHRoaXNQcm9kdWN0LCB2YWwpKTtcclxuICAgICAgICAgICAgICAgIC8valF1ZXJ5KHRoaXNQcm9kdWN0KS50cmlnZ2VyKFwiQWRkdG9DYXJ0RW5hYmxlZFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBncmFiIHRoZSBjdXJyZW50bHkgZGlzcGxheWVkIHZhbHVlIGJhc2ljYWxseSB0aGUgaW5pdGlhbCBkaXNwbGF5ZWQgdmFsdWVcclxuICAgICAgICB0aGlzUHJvZHVjdC5zZWxlY3RlZE9wdGlvbnMuUXVhbnRpdHkgPSBqUXVlcnkodGhpc1Byb2R1Y3QuY29udGFpbmVySWQgKyAnIC5xdWFudGl0eWlucHV0Omxhc3QnKS52YWwoKTtcclxuXHJcbiAgICAgICAgaWYgKCFpc0xvYWRpbmdWYXIpIHtcclxuICAgICAgICAgICAgLy8gc2hvdyBwcm9wZXIgYXZhaWxhYmlsaXR5IG1lc3NhZ2VcclxuICAgICAgICAgICAgc2V0QXZhaWxhYmlsaXR5TXNnKGNyZWF0ZUF2TWVzc2FnZSh0aGlzUHJvZHVjdCwgdGhpc1Byb2R1Y3Quc2VsZWN0ZWRPcHRpb25zLlF1YW50aXR5KSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBjcmVhdGUgcHJvZHVjdCB0YWJzIGkuZS4gZGVzY3JpcHRpb24sIEF0dHJpYnV0ZXMsIFJldmlld3MgZXRjLlxyXG4gICAgLy8gaXQgZGVwZW5kcyBvbiBqUXVlcnkgdG8gY3JlYXRlIHRhYiBkaXNwbGF5LlxyXG4gICAgLy8gYWxzbyBiaW5kIHRhYiBwcmludCBidXR0b24gY2xpY2sgaGFuZGxlclxyXG4gICAgdmFyIGdldFRhYnMgPSBmdW5jdGlvbiAoY29udGFpbmVySWQpIHtcclxuXHJcbiAgICAgICAgdmFyIHRhYnNEaXYgPSBqUXVlcnkoY29udGFpbmVySWQgKyAnICN0YWJzJyk7XHJcbiAgICAgICAgdGFic0Rpdi50YWJzKCk7XHJcblxyXG4gICAgICAgIC8vIHRhYiBwcmludCBoYW5kbGVyXHJcbiAgICAgICAgalF1ZXJ5KCdhLnByaW50cGFnZScpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgd2luZG93LnByaW50KCk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gcmVnaXN0ZXIgaW5pdGlhbGl6YXRpb25zIGhlcmVcclxuICAgIC8vc2hvdyBhbmQgaGlkZSBoYW5kbGluZyBvZiBzcGVjaWZpYyBjb3VudHJ5LlxyXG4gICAgaWYgKHR5cGVvZiBnZW9pcENvdW50cnlDb2RlID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICB2YXIgSVBHZW9Db2RlID0gZ2VvaXBDb3VudHJ5Q29kZSgpO1xyXG4gICAgICAgIHZhciBhbGxvd2VkQ291bnRyaWVzID0gJCgnLmFsbG93ZWQtY291bnRyaWVzJykudGV4dCgpO1xyXG4gICAgICAgIGlmIChhbGxvd2VkQ291bnRyaWVzID09IG51bGwgfHwgYWxsb3dlZENvdW50cmllcyA9PSAnbnVsbCcgfHwgYWxsb3dlZENvdW50cmllcyA9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICBhbGxvd2VkQ291bnRyaWVzID0gJ1VTJztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGFsbG93ZWRDb3VudHJpZXMuaW5kZXhPZihJUEdlb0NvZGUpID09IC0xKSB7XHJcbiAgICAgICAgICAgICQoJy5hZGR0b3dpc2hsaXN0JykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gYmluZCBhZGR0b3dpc2hsaXN0LCBnaWZ0cmVnaXN0cnksIHNlbmQgdG8gZnJpZW5kIGNsaWNrIGhhbmRsZXJzXHJcbiAgICAvLyBiaW5kIGhhbmRsZXJzIHRvIEFkZHRvQ2FydERpc2FibGVkLCBBZGR0b0NhcnRFbmFibGVkIGV2ZW50cyBmb3IgZGlzYWJsaW5nL2VuYWJsaW5nIHdpc2hsaXN0L2dpZnQgcmVnaXN0cnkgbGlua3NcclxuICAgIHZhciBnZXRNaXNjTGlua3MgPSBmdW5jdGlvbiAodGhpc1Byb2R1Y3QpIHtcclxuXHJcbiAgICAgICAgdmFyIGRpc2FibGVsaW5rcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKChtb2RlbC5tYXN0ZXIgfHwgbW9kZWwudmFyaWFudCkgJiYgdGhpc1Byb2R1Y3Quc2VsZWN0ZWRWYXIgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgLy8gZGlzYWJsZSB3aXNobGlzdC9naWZ0IHJlZ2lzdHJ5IGxpbmtzIGZvciBtYXN0ZXIgcHJvZHVjdHNcclxuICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzUHJvZHVjdC5jb250YWluZXJJZCArICcgLmFkZHRvd2lzaGxpc3QsICcgKyB0aGlzUHJvZHVjdC5jb250YWluZXJJZCArICcgLmFkZHRvcmVnaXN0cnknKS5hZGRDbGFzcygndW5zZWxlY3RhYmxlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBkaXNhYmxlbGlua3MoKTsgLy8gY2FsbCBpdCBmb3IgaW5pdGlhbCBkaXNwbGF5IGFuZCB0aGVuIHJlZ2lzdGVyIGl0IHdpdGggQWRkdG9DYXJ0RGlzYWJsZWQgZXZlbnRcclxuXHJcbiAgICAgICAgalF1ZXJ5KHRoaXNQcm9kdWN0KS5iaW5kKCdBZGR0b0NhcnREaXNhYmxlZCcsIHt9LCBkaXNhYmxlbGlua3MpO1xyXG5cclxuICAgICAgICBqUXVlcnkodGhpc1Byb2R1Y3QpLmJpbmQoJ0FkZHRvQ2FydEVuYWJsZWQnLCB7fSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBlbmFibGUgd2lzaGxpc3QvZ2lmdCByZWdpc3RyeSBsaW5rcyBmb3IgdmFyaWFudCBwcm9kdWN0c1xyXG4gICAgICAgICAgICBqUXVlcnkodGhpc1Byb2R1Y3QuY29udGFpbmVySWQgKyAnIC5hZGR0b3dpc2hsaXN0LCAnICsgdGhpc1Byb2R1Y3QuY29udGFpbmVySWQgKyAnIC5hZGR0b3JlZ2lzdHJ5JykucmVtb3ZlQ2xhc3MoJ3Vuc2VsZWN0YWJsZScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBsaXN0ZW4gZm9yIGF2YWlsYWJpbGl0eSByZWxvYWQgZXZlbnRzXHJcbiAgICAgICAgalF1ZXJ5KHRoaXNQcm9kdWN0KS5iaW5kKCdSZWxvYWRBdmFpbGFiaWxpdHknLCB7fSwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgLy8gdXBkYXRlIHRoZSBhdmFpbGFiaWxpdHkgbWVzc2FnZVxyXG4gICAgICAgICAgICB2YXIgdmFyaWFudCA9IGUudGFyZ2V0LnNlbGVjdGVkVmFyO1xyXG4gICAgICAgICAgICBzZXRBdmFpbGFiaWxpdHlNc2coY3JlYXRlQXZNZXNzYWdlKGUudGFyZ2V0LCAodmFyaWFudCA9PSBudWxsID8gbW9kZWwuYXZTdGF0dXNRdWFudGl0eSA6IHZhcmlhbnQuYXZTdGF0dXNRdWFudGl0eSkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5KGUudGFyZ2V0KS50cmlnZ2VyKCdBZGR0b0NhcnRFbmFibGVkJyk7XHJcblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBBZGQgdG8gd2lzaGxpc3QsIEFkZCB0byBnaWZ0IHJlZ2lzdHJ5IGNsaWNrIGhhbmRsZXJcclxuXHJcbiAgICAgICAgalF1ZXJ5KHRoaXNQcm9kdWN0LmNvbnRhaW5lcklkICsgJyAuYWRkdG93aXNobGlzdCBhLmF1dGgnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIGFwcGVuZCB0aGUgY3VycmVudGx5IHNlbGVjdGllZCBvcHRpb25zIHRvIHRoZSB1cmxcclxuXHJcbiAgICAgICAgICAgIC8vIGNyZWF0ZSBhIGxvY2FsIGNvcHkgb2YgdGhlIHNlbGVjdGVkIG9wdGlvbnNcclxuICAgICAgICAgICAgdmFyIHNlbGVjdGVkT3B0aW9ucyA9IGpRdWVyeS5leHRlbmQoe30sIHt9LCB0aGlzUHJvZHVjdC5zZWxlY3RlZE9wdGlvbnMpO1xyXG5cclxuICAgICAgICAgICAgaWYgKG1vZGVsLm1hc3RlciB8fCBtb2RlbC52YXJpYW50KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpc1Byb2R1Y3Quc2VsZWN0ZWRWYXIgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkT3B0aW9ucy5waWQgPSB0aGlzUHJvZHVjdC5zZWxlY3RlZFZhci5pZDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBkbyBub3QgYWxsb3cgbWFzdGVyIHByb2R1Y3QgdG8gYmUgYWRkZWQgdG8gZ2lmdCByZWdpc3RyeS93aXNobGlzdFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRPcHRpb25zLnBpZCA9IHRoaXNQcm9kdWN0LnBpZDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIHRlbXBVcmwgPSB0aGlzLmhyZWY7XHJcblxyXG4gICAgICAgICAgICBpZiAoISh0ZW1wVXJsLmluZGV4T2YoJz8nKSA+IDApKSB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wVXJsID0gdGVtcFVybCArICc/JztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRlbXBVcmwgPSB0ZW1wVXJsICsgJyYnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIHNlcmlhbGl6ZSB0aGUgbmFtZS92YWx1ZSBpbnRvIHVybCBxdWVyeSBzdHJpbmcgYW5kIGFwcGVuZCBpdCB0byB0aGUgdXJsLCBtYWtlIHJlcXVlc3RcclxuICAgICAgICAgICAgdmFyIHVybCA9IHRlbXBVcmwgKyBqUXVlcnkucGFyYW0oc2VsZWN0ZWRPcHRpb25zKTtcclxuICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdHRVQnLFxyXG4gICAgICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2h0bWwnLFxyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeSgnI3BkcE1haW4gLmFkZHRvd2lzaGxpc3QgLmFkZHRvd2lzaC10b29sdGlwJykuZmFkZUluKDQwMCkuZGVsYXkoMTUwMCkuZmFkZU91dCg0MDApO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGZhaWx1cmU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBhbGVydCgnJHtSZXNvdXJjZS5tc2coXFwnZ2xvYmFsLnNlcnZlcmNvbm5lY3Rpb25cXCcsXFwnbG9jYWxlXFwnLG51bGwpfScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcudWktZGlhbG9nLXRpdGxlYmFyLWNsb3NlJykudHJpZ2dlcignY2xpY2snKTtcclxuICAgICAgICAgICAgfSwgMTUwMCk7XHJcbiAgICAgICAgICAgIC8vd2luZG93LmxvY2F0aW9uID0gdGVtcFVybCArIGpRdWVyeS5wYXJhbShzZWxlY3RlZE9wdGlvbnMpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIEFkZCB0byB3aXNobGlzdCwgQWRkIHRvIGdpZnQgcmVnaXN0cnkgY2xpY2sgaGFuZGxlclxyXG4gICAgICAgIGpRdWVyeSh0aGlzUHJvZHVjdC5jb250YWluZXJJZCArICcgLmFkZHRvd2lzaGxpc3QgYS5ub24tYXV0aCwgJyArIHRoaXNQcm9kdWN0LmNvbnRhaW5lcklkICsgJyAuYWRkdG9yZWdpc3RyeSBhJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBhcHBlbmQgdGhlIGN1cnJlbnRseSBzZWxlY3RpZWQgb3B0aW9ucyB0byB0aGUgdXJsXHJcblxyXG4gICAgICAgICAgICAvLyBjcmVhdGUgYSBsb2NhbCBjb3B5IG9mIHRoZSBzZWxlY3RlZCBvcHRpb25zXHJcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZE9wdGlvbnMgPSBqUXVlcnkuZXh0ZW5kKHt9LCB7fSwgdGhpc1Byb2R1Y3Quc2VsZWN0ZWRPcHRpb25zKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChtb2RlbC5tYXN0ZXIgfHwgbW9kZWwudmFyaWFudCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXNQcm9kdWN0LnNlbGVjdGVkVmFyICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZE9wdGlvbnMucGlkID0gdGhpc1Byb2R1Y3Quc2VsZWN0ZWRWYXIuaWQ7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsgLy8gZG8gbm90IGFsbG93IG1hc3RlciBwcm9kdWN0IHRvIGJlIGFkZGVkIHRvIGdpZnQgcmVnaXN0cnkvd2lzaGxpc3RcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkT3B0aW9ucy5waWQgPSB0aGlzUHJvZHVjdC5waWQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciB0ZW1wVXJsID0gdGhpcy5ocmVmO1xyXG5cclxuICAgICAgICAgICAgaWYgKCEodGVtcFVybC5pbmRleE9mKCc/JykgPiAwKSkge1xyXG4gICAgICAgICAgICAgICAgdGVtcFVybCA9IHRlbXBVcmwgKyAnPyc7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wVXJsID0gdGVtcFVybCArICcmJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBzZXJpYWxpemUgdGhlIG5hbWUvdmFsdWUgaW50byB1cmwgcXVlcnkgc3RyaW5nIGFuZCBhcHBlbmQgaXQgdG8gdGhlIHVybCwgbWFrZSByZXF1ZXN0XHJcbiAgICAgICAgICAgIC8vdmFyIHVybCA9IHRlbXBVcmwgKyBqUXVlcnkucGFyYW0oc2VsZWN0ZWRPcHRpb25zKTtcclxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uID0gdGVtcFVybCArIGpRdWVyeS5wYXJhbShzZWxlY3RlZE9wdGlvbnMpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGpRdWVyeSh0aGlzUHJvZHVjdC5jb250YWluZXJJZCArICcgLnNlbmR0b2ZyaWVuZCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gY3JlYXRlIGEgbG9jYWwgY29weSBvZiB0aGUgc2VsZWN0ZWQgb3B0aW9uc1xyXG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRPcHRpb25zID0galF1ZXJ5LmV4dGVuZCh7fSwge30sIHRoaXNQcm9kdWN0LnNlbGVjdGVkT3B0aW9ucyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoKG1vZGVsLm1hc3RlciB8fCBtb2RlbC52YXJpYW50KSAmJiB0aGlzUHJvZHVjdC5zZWxlY3RlZFZhciAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZE9wdGlvbnMucGlkID0gdGhpc1Byb2R1Y3Quc2VsZWN0ZWRWYXIuaWQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZE9wdGlvbnMucGlkID0gdGhpc1Byb2R1Y3QucGlkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciB0ZW1wVVJMID0gVXJscy5zZW5kVG9GcmllbmQgKyAnPycgKyBqUXVlcnkucGFyYW0oc2VsZWN0ZWRPcHRpb25zKTtcclxuICAgICAgICAgICAgZGlhbG9nLm9wZW4odGVtcFVSTCwgUmVzb3VyY2VzLlNFTkRfVE9fRlJJRU5EKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBiaW5kcyBwcm9kdWN0IHJldmlld3MgY2xpY2sgaGFuZGxlcnNcclxuICAgIC8vIHJlYWQgcmV2aWV3IGxpbmsgb3BlbnMgcmV2aWV3cyB0YWJcclxuICAgIHZhciBnZXRSYXRpbmdTZWN0aW9uID0gZnVuY3Rpb24gKGNvbnRhaW5lcklkKSB7XHJcblxyXG4gICAgICAgIGpRdWVyeShjb250YWluZXJJZCArICcgI3BkcFJlYWRSZXZpZXcnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGpRdWVyeShjb250YWluZXJJZCArICcgI3RhYnMnKS50YWJzKCdzZWxlY3QnLCAncGRwUmV2aWV3c1RhYicpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBqUXVlcnkoY29udGFpbmVySWQgKyAnICNwZHBXcml0ZVJldmlldycpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gYmFzZWQgb24gYXZhaWxhYmlsaXR5IHN0YXR1cywgY3JlYXRlcyBhIG1lc3NhZ2VcclxuICAgIC8vIHBhcmFtIHZhbCAtIHRoZSBzdG9jayB2YWx1ZSB0byBjb21wYXJlIGkuZS4gcXR5IGVudGVyZWQgYnkgdXNlclxyXG4gICAgdmFyIGNyZWF0ZUF2TWVzc2FnZSA9IGZ1bmN0aW9uICh0aGlzUHJvZHVjdCwgdmFsKSB7XHJcblxyXG4gICAgICAgIHZhciBhdlN0YXR1cyA9IHRoaXNQcm9kdWN0LmdldEF2U3RhdHVzKCk7IC8vIGF2YWlsYWJpbGl0eSBzdGF0dXNcclxuICAgICAgICB2YXIgYXZNZXNzYWdlID0gUmVzb3VyY2VzW2F2U3RhdHVzXTtcclxuICAgICAgICB2YXIgYXRzID0gdGhpc1Byb2R1Y3QuZ2V0QVRTKCk7IC8vIGdldCBhdmFpbGFibGUgdG8gc2VsbCBxdHlcclxuICAgICAgICB2YXIgYXZMZXZlbHMgPSB0aGlzUHJvZHVjdC5nZXRBdkxldmVscygpO1xyXG4gICAgICAgIHZhciBub25DbG9zZW91dExvd1F0eVRocmVzaG9sZCA9IHRoaXNQcm9kdWN0LmdldE5vbkNsb3Nlb3V0TG93UXR5VGhyZXNob2xkKCk7XHJcblxyXG4gICAgICAgIC8vIGdldCBhdHMgbGV2ZWxzIHBlci1zdGF0dXNcclxuICAgICAgICB2YXIgaW5TdG9ja0xldmVsID0gYXZMZXZlbHNbQ29uc3RhbnRzLkFWQUlMX1NUQVRVU19JTl9TVE9DS107XHJcbiAgICAgICAgdmFyIGJhY2tPcmRlckxldmVsID0gYXZMZXZlbHNbQ29uc3RhbnRzLkFWQUlMX1NUQVRVU19CQUNLT1JERVJdO1xyXG4gICAgICAgIHZhciBwcmVPcmRlckxldmVsID0gYXZMZXZlbHNbQ29uc3RhbnRzLkFWQUlMX1NUQVRVU19QUkVPUkRFUl07XHJcbiAgICAgICAgLy92YXIgbm90QXZhaWxMZXZlbCA9IGF2TGV2ZWxzW0NvbnN0YW50cy5BVkFJTF9TVEFUVVNfTk9UX0FWQUlMQUJMRV07XHJcblxyXG4gICAgICAgIGlmIChhdlN0YXR1cyA9PT0gQ29uc3RhbnRzLkFWQUlMX1NUQVRVU19JTl9TVE9DSykge1xyXG4gICAgICAgICAgICBhdk1lc3NhZ2UgPSAnPHNwYW4gY2xhc3M9XFwnaW4tc3RvY2tcXCc+JyArIGF2TWVzc2FnZSArICc8L3NwYW4+JztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGF2U3RhdHVzID09PSAnTk9UX0FWQUlMQUJMRScpIHtcclxuICAgICAgICAgICAgYXZNZXNzYWdlID0gJzxzcGFuIGNsYXNzPVxcJ291dC1vZi1zdG9ja1xcJz4nICsgYXZNZXNzYWdlICsgJzwvc3Bhbj4nO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYXZTdGF0dXMgPT09IENvbnN0YW50cy5BVkFJTF9TVEFUVVNfQkFDS09SREVSIHx8XHJcbiAgICAgICAgICAgIGF2U3RhdHVzID09PSBDb25zdGFudHMuQVZBSUxfU1RBVFVTX1BSRU9SREVSKSB7XHJcbiAgICAgICAgICAgIGlmICh2YWwgPiBhdHMgJiYgYXRzID4gMCkge1xyXG4gICAgICAgICAgICAgICAgYXZNZXNzYWdlID0gYXZNZXNzYWdlICsgJzxzcGFuIGNsYXNzPVxcJ2luLXN0b2NrXFwnPicgKyAkLnZhbGlkYXRvci5mb3JtYXQoUmVzb3VyY2VzWydRVFlfJyArIGF2U3RhdHVzXSwgYXRzKSArICc8L3NwYW4+JztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBkaXNwbGF5IGJhY2tvcmRlci9wcmVvcmRlciBhdmFpbGFiaWxpdHlcclxuICAgICAgICAgICAgYXZNZXNzYWdlID0gYXZNZXNzYWdlICsgZ2V0SW5TdG9ja0RhdGVNc2codGhpc1Byb2R1Y3QpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodmFsID4gaW5TdG9ja0xldmVsICYmIGF2U3RhdHVzICE9PSBDb25zdGFudHMuQVZBSUxfU1RBVFVTX05PVF9BVkFJTEFCTEUpIHtcclxuXHJcbiAgICAgICAgICAgIGF2TWVzc2FnZSA9ICcnO1xyXG4gICAgICAgICAgICBpZiAoaW5TdG9ja0xldmVsID4gMCkge1xyXG4gICAgICAgICAgICAgICAgYXZNZXNzYWdlID0gYXZNZXNzYWdlICsgJzxzcGFuIGNsYXNzPVxcJ2luLXN0b2NrXFwnPicgKyAkLnZhbGlkYXRvci5mb3JtYXQoUmVzb3VyY2VzWydRVFlfJyArIENvbnN0YW50cy5BVkFJTF9TVEFUVVNfSU5fU1RPQ0tdLCBpblN0b2NrTGV2ZWwpICsgJzwvc3Bhbj4nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChiYWNrT3JkZXJMZXZlbCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGF2TWVzc2FnZSA9IGF2TWVzc2FnZSArICQudmFsaWRhdG9yLmZvcm1hdChSZXNvdXJjZXNbJ1FUWV8nICsgQ29uc3RhbnRzLkFWQUlMX1NUQVRVU19CQUNLT1JERVJdLCBiYWNrT3JkZXJMZXZlbCk7XHJcbiAgICAgICAgICAgICAgICAvLyB1bmNvbW1lbnQgdGhlIGZvbGxvd2luZyBsaW5lIHRvIGRpc3BsYXkgYXZhaWxhYmlsaXR5IG1lc3NhZ2Ugd2l0aCBiYWNrIG9yZGVyIGluZm9ybWF0aW9uXHJcbiAgICAgICAgICAgICAgICAvLyBhdk1lc3NhZ2UgPSBhdk1lc3NhZ2UgKyBnZXRJblN0b2NrRGF0ZU1zZyh0aGlzUHJvZHVjdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHByZU9yZGVyTGV2ZWwgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBhdk1lc3NhZ2UgPSBhdk1lc3NhZ2UgKyAkLnZhbGlkYXRvci5mb3JtYXQoUmVzb3VyY2VzWydRVFlfJyArIENvbnN0YW50cy5BVkFJTF9TVEFUVVNfUFJFT1JERVJdLCBwcmVPcmRlckxldmVsKTtcclxuICAgICAgICAgICAgICAgIC8vIHVuY29tbWVudCB0aGUgZm9sbG93aW5nIGxpbmUgdG8gZGlzcGxheSBhdmFpbGFiaWxpdHkgbWVzc2FnZSB3aXRoIGJhY2sgb3JkZXIgaW5mb3JtYXRpb25cclxuICAgICAgICAgICAgICAgIC8vIGF2TWVzc2FnZSA9IGF2TWVzc2FnZSArIGdldEluU3RvY2tEYXRlTXNnKHRoaXNQcm9kdWN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoYXRzICE9PSAwICYmIGF0cyA8PSBub25DbG9zZW91dExvd1F0eVRocmVzaG9sZCkge1xyXG4gICAgICAgICAgICBhdk1lc3NhZ2UgPSAnPHNwYW4gY2xhc3M9XFwnbG93XFwnPicgKyAkLnZhbGlkYXRvci5mb3JtYXQoUmVzb3VyY2VzLkxPVywgbm9uQ2xvc2VvdXRMb3dRdHlUaHJlc2hvbGQpICsgJzwvc3Bhbj4nO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgc3RhbmRhcmRQcmljZSA9IHRoaXNQcm9kdWN0LnNlbGVjdGVkVmFyICE9IG51bGwgPyBOdW1iZXIodGhpc1Byb2R1Y3Quc2VsZWN0ZWRWYXIucHJpY2luZy5zdGFuZGFyZCB8fCAwKSA6IE51bWJlcihtb2RlbC5wcmljaW5nLnN0YW5kYXJkIHx8IDApO1xyXG5cclxuICAgICAgICB2YXIgc2FsZVByaWNlID0gTnVtYmVyKGNvbXB1dGVQcmljZSh0aGlzUHJvZHVjdCkgfHwgMCk7XHJcblxyXG4gICAgICAgIGlmIChzdGFuZGFyZFByaWNlID09PSAwICYmIHNhbGVQcmljZSA9PT0gMCkge1xyXG4gICAgICAgICAgICBpZiAodGhpc1Byb2R1Y3Quc2VsZWN0ZWRWYXIgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXNQcm9kdWN0LnNlbGVjdGVkVmFyLmVhcmx5QmlyZE1lc3NhZ2UgIT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICBhdk1lc3NhZ2UgPSAnPHNwYW4gY2xhc3M9XFwnY29taW5nLXNvb25cXCc+JyArIHRoaXNQcm9kdWN0LnNlbGVjdGVkVmFyLmVhcmx5QmlyZE1lc3NhZ2UgKyAnPC9zcGFuPic7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGF2TWVzc2FnZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKCQoJy5lYm0tc3RkLXByb2QnKS5sZW5ndGggPiAwICYmICQudHJpbSgkKCcuZWJtLXN0ZC1wcm9kJykudGV4dCgpKSAhPSAnJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGF2TWVzc2FnZSA9ICc8c3BhbiBjbGFzcz1cXCdjb21pbmctc29vblxcJz4nICsgJCgnLmVibS1zdGQtcHJvZCcpLnRleHQoKSArICc8L3NwYW4+JztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXZNZXNzYWdlID0gJyc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGF2TWVzc2FnZTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gaGVscGVyIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgaW4tc3RvY2sgZGF0ZVxyXG4gICAgdmFyIGdldEluU3RvY2tEYXRlTXNnID0gZnVuY3Rpb24gKHByb2R1Y3QpIHtcclxuICAgICAgICB2YXIgbXNnID0gJyc7XHJcbiAgICAgICAgaWYgKHByb2R1Y3QuZ2V0SW5TdG9ja0RhdGUoKSAmJiBwcm9kdWN0LmdldEluU3RvY2tEYXRlKCkgIT0gJ251bGwnKSB7XHJcbiAgICAgICAgICAgIG1zZyA9ICQudmFsaWRhdG9yLmZvcm1hdChSZXNvdXJjZXMuSU5fU1RPQ0tfREFURSwgKG5ldyBEYXRlKHByb2R1Y3QuZ2V0SW5TdG9ja0RhdGUoKSkpLnRvRGF0ZVN0cmluZygpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG1zZztcclxuICAgIH07XHJcblxyXG4gICAgLy8gaGVscGVyIGZ1bmN0aW9uIHRvIHNldCBhdmFpbGFiaWxpdHkgbWVzc2FnZVxyXG4gICAgdmFyIHNldEF2YWlsYWJpbGl0eU1zZyA9IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICBqUXVlcnkobXlDb250YWluZXJJZCArICcgLmF2YWlsYWJpbGl0eTpsYXN0IC52YWx1ZScpLmh0bWwobXNnKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQcml2YXRlLiBDb21wdXRlcyBwcmljZSBvZiBhIGdpdmVuIHByb2R1Y3QgaW5zdGFuY2UgYmFzZWQgb24gdGhlIHNlbGVjdGVkIG9wdGlvbnMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHRoaXNQcm9kdWN0IC0gdGhlIHByb2R1Y3QgaW5zdGFuY2VcclxuICAgICAqIEByZXR1cm4gcHJpY2Ugb2YgdGhlIHByb2R1Y3QgdG8gMiBkZWNpbWFsIHBvaW50cy5cclxuICAgICAqL1xyXG4gICAgdmFyIGNvbXB1dGVQcmljZSA9IGZ1bmN0aW9uICh0aGlzUHJvZHVjdCkge1xyXG5cclxuICAgICAgICB2YXIgcHJpY2UgPSB0aGlzUHJvZHVjdC5zZWxlY3RlZFZhciAhPSBudWxsID8gdGhpc1Byb2R1Y3Quc2VsZWN0ZWRWYXIucHJpY2luZy5zYWxlIDogbW9kZWwucHJpY2luZy5zYWxlO1xyXG4gICAgICAgIC8vIGNhbGN1bGF0ZSBwcmljZSBiYXNlZCBvbiB0aGUgc2VsZWN0ZWQgb3B0aW9ucyBwcmljZXNcclxuICAgICAgICBqUXVlcnkuZWFjaCh0aGlzUHJvZHVjdC5zZWxlY3RlZFByaWNlLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHByaWNlID0gKG5ldyBOdW1iZXIocHJpY2UpICsgbmV3IE51bWJlcih0aGlzKSkudG9GaXhlZCgyKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHByaWNlO1xyXG4gICAgfTtcclxuICAgIC8vIExvYWQgdGhlIHlvdXR1YmUgdmlkZW9zIG9ubHkgb24gZGVtYW5kXHJcbiAgICAvLyB3aGVuIHRoZSB1c2VyIGNsaWNrcyBvbiB0aGUgdmlkZW9zIHRhYiwgdGhlbiB0aGUgeW91dHViZSB2aWRlb3Mgd2lsbCBiZSBmZXRjaGVkIGR5bmFtaWNhbGx5XHJcbiAgICAvLyBhbmQgbG9hZHMgdGhlIGNvbnRlbnQgaW4gdGhlIHBkcFZpZGVvVGFiIGRpdi5cclxuICAgIGpRdWVyeSgnLnZpZGVvVGFiJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdsb2FkZWQnKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2xvYWRlZCcpO1xyXG4gICAgICAgIHZhciB0YXJnZXQgPSAkKCcjcGRwVmlkZW9UYWInKTtcclxuICAgICAgICB2YXIgdXJsID0gJCgnI3Byb2R1Y3RVUkwnKS52YWwoKTtcclxuICAgICAgICBhamF4LmxvYWQoe1xyXG4gICAgICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICAgICAgZGF0YVR5cGU6ICdodG1sJyxcclxuICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXQuaHRtbChkYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICAvLyBiaW5kIGNsaWNrIGhhbmRsZXJzIGZvciBwcmV2L25leHQgYnV0dG9ucyBvbiBwZHAgZnJvbSBzZWFyY2hcclxuICAgIHZhciBnZXROYXZMaW5rcyA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgLy8gTk9URTogIFdFIENPTU1FTlQgVEhJUyBPVVQgQkVDQVVTRSBQT1dFUiBSRVZJRVdTIFJFTkRFUklORyBMSUJSQVJZIERPRVMgTk9UXHJcbiAgICAgICAgLy8gV09SSyBJTiBTT01FIEJST1dTRVJTIFdIRU4gQSBQUk9EVUNUIERFVEFJTCBQQUdFIElTIFBBUlRJQUxMWSBSRUxPQURFRCBVU0lORyBBSkFYLlxyXG4gICAgICAgIC8vIElGIFdFIERPIE5PVCBCSU5EIEVWRU5UUywgVEhFTiBUSEUgUFJFVi9ORVhUIEFOQ0hPUlMgSlVTVCBXT1JLIEFTIFNUQU5EQVJEXHJcbiAgICAgICAgLy8gSFlQRVJMSU5LUyBBTkQgUE9XRVJSRVZJRVdTIFdPUktTIEZJTkUuXHJcblxyXG4gICAgICAgIC8vIGJpbmQgZXZlbnRzXHJcbiAgICAgICAgLy9qUXVlcnkoXCIucHJvZHVjdG5hdmlnYXRpb24gYVwiKS5jbGljayhmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgLy9cdGFwcC5nZXRQcm9kdWN0KHt1cmw6IHRoaXMuaHJlZiwgc291cmNlOiBcInNlYXJjaFwifSk7XHJcbiAgICAgICAgLy9cdHJldHVybiBmYWxzZTtcclxuICAgICAgICAvL30pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBzaXplIGNoYXJ0IGxpbmsgY2xpY2sgYmluZGluZ1xyXG4gICAgdmFyIGdldFNpemVDaGFydCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBqUXVlcnkoJy5hdHRyaWJ1dGVjb250ZW50bGluaycpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gYWRkIHNpemUgY2hhcnQgZGlhbG9nIGNvbnRhaW5lciBkaXYgaWYgaXRzIG5vdCBhZGRlZCB5ZXRcclxuICAgICAgICAgICAgLy8gb25seSBhZGRlZCBvbmNlXHJcbiAgICAgICAgICAgIGlmIChqUXVlcnkoJyNzaXplQ2hhcnREaWFsb2cnKS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgalF1ZXJ5KCc8ZGl2Lz4nKS5hdHRyKCdpZCcsICdzaXplQ2hhcnREaWFsb2cnKS5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIHNpemVDaGFydERpYWxvZyA9IGRpYWxvZy5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgaWQ6ICdzaXplQ2hhcnREaWFsb2cnLCBvcHRpb25zOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiA1MzAsXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDgwMCxcclxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogUmVzb3VyY2VzLlNJWkVDSEFSVF9USVRMRVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHNpemVDaGFydERpYWxvZy5kaWFsb2coJ29wZW4nKTtcclxuXHJcbiAgICAgICAgICAgIC8vIG1ha2UgdGhlIHNlcnZlciBjYWxsIHRvIGxvYWQgdGhlIHNpemUgY2hhcnQgaHRtbFxyXG4gICAgICAgICAgICAkKCcjc2l6ZUNoYXJ0RGlhbG9nJykubG9hZCh0aGlzLmhyZWYpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKCcucHJvZHVjdC1zcGVjaWZpY2F0aW9ucycpLnJlYWR5KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCgnLnByb2R1Y3Qtc3BlY2lmaWNhdGlvbnMnKS5sb2FkKGpRdWVyeSgnLmF0dHJpYnV0ZWNvbnRlbnRsaW5rJykuYXR0cignaHJlZicpKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvLyBidWlsZCB0aGUgdG9vbHRpcCBzdHJpbmcgZm9yIG5vbiBzZWxlY3RlZCB2YXJpYXRpb25zXHJcbiAgICB2YXIgZ2V0Tm9uU2VsZWN0ZWRUb29sdGlwID0gZnVuY3Rpb24gKG5vblNlbGVjdGVkVmFycykge1xyXG4gICAgICAgIHZhciB0b29sdGlwU3RyID0gJyc7XHJcbiAgICAgICAgdmFyIG5zTGVuID0gbm9uU2VsZWN0ZWRWYXJzLmxlbmd0aDtcclxuICAgICAgICBpZiAobnNMZW4gPT0gMSB8fCBuc0xlbiA9PSAyKSB7XHJcbiAgICAgICAgICAgIHRvb2x0aXBTdHIgPSBub25TZWxlY3RlZFZhcnMuam9pbignICYgJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuc0xlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSA9PSBuc0xlbiAtIDIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0b29sdGlwU3RyICs9IG5vblNlbGVjdGVkVmFyc1tpXSArICcgJiAnICsgbm9uU2VsZWN0ZWRWYXJzW2kgKyAxXTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9vbHRpcFN0ciArPSBub25TZWxlY3RlZFZhcnNbaV0gKyAnLCAnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdG9vbHRpcFN0cjtcclxuICAgIH07XHJcblxyXG4gICAgLy8gUHJvZHVjdCBpbnN0YW5jZVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBwaWQ6IG1vZGVsLklELFxyXG4gICAgICAgIG5hbWU6IG1vZGVsLm5hbWUsXHJcbiAgICAgICAgdmFyaWFudDogbW9kZWwudmFyaWFudCxcclxuICAgICAgICBtYXN0ZXI6IG1vZGVsLm1hc3RlcixcclxuICAgICAgICBidW5kbGVkOiBtb2RlbC5idW5kbGVkLFxyXG4gICAgICAgIHNlbGVjdGVkVmFyQXR0cmliczoge30sIC8vIG9iamVjdCBjb250YWluaW5nIHZhcmlhdGlvbiBhdHRyaWJ1dGVzIHZhbHVlcyBhcyBuYW1lIHZhbHVlIGUuZy4ge2NvbG9yOiBcImJsdWVcIiwgc2l6ZTogXCIzXCIsIHdpZHRoOiBcIlwifVxyXG4gICAgICAgIHNlbGVjdGVkVmFyOiBudWxsLCAvLyBjdXJyZW50bHkgc2VsZWN0ZWQgdmFyaWFudFxyXG4gICAgICAgIHNlbGVjdGVkT3B0aW9uczoge30sIC8vIGhvbGRzIGN1cnJlbnRseSBzZWxlY3RlZCBvcHRpb25zIG9iamVjdCB7b3B0aW9uTmFtZSwgc2VsZWN0ZWQgdmFsfVxyXG4gICAgICAgIHNlbGVjdGVkUHJpY2U6IHt9LCAvLyBob2xkcyBwcmljZXMgZm9yIHNlbGVjdGVkIG9wdGlvbnMgYXMge3dhcnJhbnR5OiBcIlwifVxyXG4gICAgICAgIGNvbnRhaW5lcklkOiBudWxsLCAvLyBob2xkcyB0aGUgaHRtbCBjb250YWluZXIgaWQgb2YgdGhpcyBwcm9kdWN0XHJcbiAgICAgICAgc3ViUHJvZHVjdHM6IFtdLCAvLyBhcnJheSB0byBrZWVwIHN1YiBwcm9kdWN0cyBpbnN0YW5jZXNcclxuICAgICAgICBib251c1Byb2R1Y3Q6IGZhbHNlLFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBFbmFibGUgQWRkIHRvIENhcnQgQnV0dG9uLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGVuYWJsZUEyQ0J1dHRvbjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBqUXVlcnkodGhpcy5jb250YWluZXJJZCArICcgLmFkZHRvY2FydCBpbnB1dCwgJyArIHRoaXMuY29udGFpbmVySWQgKyAnIC5hZGR0b2NhcnRidXR0b246bGFzdCcpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICBqUXVlcnkodGhpcy5jb250YWluZXJJZCArICcgLmFkZHRvY2FydGJ1dHRvbjpsYXN0LCAnICsgdGhpcy5jb250YWluZXJJZCArICcgLmFkZHRvY2FydCcpLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xyXG5cclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEaXNhYmxlIEFkZCB0byBDYXJ0IEJ1dHRvbi5cclxuICAgICAgICAgKi9cclxuICAgICAgICBkaXNhYmxlQTJDQnV0dG9uOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGpRdWVyeSh0aGlzLmNvbnRhaW5lcklkICsgJyAuYWRkdG9jYXJ0IGlucHV0LCAnICsgdGhpcy5jb250YWluZXJJZCArICcgLmFkZHRvY2FydGJ1dHRvbjpsYXN0JykucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcclxuICAgICAgICAgICAgalF1ZXJ5KHRoaXMuY29udGFpbmVySWQgKyAnIC5hZGR0b2NhcnRidXR0b246bGFzdCwgJyArIHRoaXMuY29udGFpbmVySWQgKyAnIC5hZGR0b2NhcnQnKS5hZGRDbGFzcygnZGlzYWJsZWQnKTtcclxuXHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgcmVtb3ZlQTJDQnV0dG9uOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICBqUXVlcnkoJy5hZGR0b2NhcnQnKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xyXG4gICAgICAgICAgICBqUXVlcnkoJy5wcm9kdWN0aW5mbyAucHJpY2UnKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xyXG4gICAgICAgICAgICBpZiAoUHJvZHVjdENhY2hlLm1hc3Rlcikge1xyXG4gICAgICAgICAgICAgICAgalF1ZXJ5KCcucHJvZHVjdGluZm8gLnByb2R1Y3RpZCcpLmNzcygnZGlzcGxheScsICdub25lJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy9qUXVlcnkodGhpcy5jb250YWluZXJJZCtcIiAudmFyaWF0aW9uYXR0cmlidXRlc1wiKS5jc3MoJ2Rpc3BsYXknLCdub25lJyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICAvLyBzaG93IGF2YWlsYWJpbGl0eVxyXG4gICAgICAgIHNob3dBdmFpbGFiaWxpdHk6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgalF1ZXJ5KHRoaXMuY29udGFpbmVySWQgKyAnIC5hdmFpbGFiaWxpdHknKS5zaG93KCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICAvLyBoaWRlIGF2YWlsYWJpbGl0eVxyXG4gICAgICAgIGhpZGVBdmFpbGFiaWxpdHk6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgalF1ZXJ5KHRoaXMuY29udGFpbmVySWQgKyAnIC5hdmFpbGFiaWxpdHknKS5oaWRlKCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICAvLyBzaG93IHNlbGVjdGVkIGl0ZW0gI1xyXG4gICAgICAgIHNob3dJdGVtTm86IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgalF1ZXJ5KHRoaXMuY29udGFpbmVySWQgKyAnIC5wcm9kdWN0aWQgLnZhbHVlJykuaHRtbCh0aGlzLnNlbGVjdGVkVmFyLmlkKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIC8vIHJlbW92ZXMgIGl0ZW0gI1xyXG4gICAgICAgIHJlbW92ZUl0ZW1ObzogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBqUXVlcnkodGhpcy5jb250YWluZXJJZCArICcgLnByb2R1Y3RpZCAudmFsdWUnKS5lbXB0eSgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmV2ZXJ0UHJpY2U6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyICRwcmljZSA9IGpRdWVyeSh0aGlzLmNvbnRhaW5lcklkICsgJyAucHJvZHVjdGluZm8gLnByaWNlOmZpcnN0Jyk7XHJcbiAgICAgICAgICAgIGlmICghJHByaWNlLmRhdGEoJ29yaWdpbmFsUHJpY2UnKSkge1xyXG4gICAgICAgICAgICAgICAgJHByaWNlLmRhdGEoJ29yaWdpbmFsUHJpY2UnLCAkcHJpY2UuaHRtbCgpKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICRwcmljZS5odG1sKCRwcmljZS5kYXRhKCdvcmlnaW5hbFByaWNlJykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICAvLyBkZXRlcm1pbmUgaWYgdGhpcyBwcm9kdWN0IGlzIHBhcnQgb2YgYSBidW5kbGUvcHJvZHVjdCBzZXQgVklFV1xyXG4gICAgICAgIHNldEJvbnVzUHJvZHVjdDogZnVuY3Rpb24gKGJvbnVzUHJvZHVjdCkge1xyXG4gICAgICAgICAgICB0aGlzLmJvbnVzUHJvZHVjdCA9IGJvbnVzUHJvZHVjdDtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvLyBkZXRlcm1pbmUgaWYgdGhpcyBwcm9kdWN0IGlzIHBhcnQgb2YgYSBidW5kbGUvcHJvZHVjdCBzZXQgVklFV1xyXG4gICAgICAgIGlzQm9udXNQcm9kdWN0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJvbnVzUHJvZHVjdDtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvLyBkZXRlcm1pbmUgaWYgdGhpcyBwcm9kdWN0IGlzIHBhcnQgb2YgYSBidW5kbGUvcHJvZHVjdCBzZXQgVklFV1xyXG4gICAgICAgIGlzU3ViUHJvZHVjdDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gKG1vZGVsLmJ1bmRsZWQgfHwgbW9kZWwucHJvZHVjdFNldFByb2R1Y3QpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8vIHNob3cgdGhlIHNlbGVjdGVkIHZhcmlhdGlvbiBhdHRyaWJ1dGUgdmFsdWUgbmV4dCB0byB0aGUgYXR0cmlidXRlIGxhYmVsIGUuZy4gQ29sb3I6IEJlaWdlXHJcbiAgICAgICAgc2hvd1NlbGVjdGVkVmFyQXR0clZhbDogZnVuY3Rpb24gKHZhcklkLCB2YWwpIHtcclxuICAgICAgICAgICAgalF1ZXJ5KHRoaXMuY29udGFpbmVySWQgKyAnIC52YXJpYXRpb25hdHRyaWJ1dGVzIGRpdjpub3QoLmNsZWFyKScpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGlkID0galF1ZXJ5KHRoaXMpLmRhdGEoJ2RhdGEnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodmFySWQgPT09IGlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMpLmZpbmQoJ3NwYW4uc2VsZWN0ZWR2YXJ2YWwnKS5odG1sKHZhbCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8vIHNlbGVjdHMgcmV2aWV3IHRhYlxyXG4gICAgICAgIHJlYWRSZXZpZXdzOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGpRdWVyeSh0aGlzLmNvbnRhaW5lcklkICsgJyAjdGFicycpLnRhYnMoJ3NlbGVjdCcsICdwZHBSZXZpZXdzVGFiJyk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgLy8gc2hvd3MgcHJvZHVjdCBpbWFnZXMgYW5kIHRodW1ibmFpbHNcclxuICAgICAgICAvLyBAcGFyYW0gc2VsZWN0ZWRWYWwgLSBjdXJyZW50bHkgc2VsZWN0ZWQgdmFyaWF0aW9uIGF0dHIgdmFsXHJcbiAgICAgICAgLy8gQHBhcmFtIHZhbHMgLSB0b3RhbCBhdmFpbGFibGUgdmFyaWF0aW9uIGF0dHIgdmFsdWVzXHJcbiAgICAgICAgc2hvd0ltYWdlczogZnVuY3Rpb24gKHNlbGVjdGVkVmFsLCB2YWxzKSB7XHJcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICAgICAgdmFscyA9IHZhbHMgfHwge307XHJcblxyXG4gICAgICAgICAgICAvLyBzaG93IHN3YXRjaCByZWxhdGVkIGltYWdlcyBmb3IgdGhlIGN1cnJlbnQgdmFyaWF0aW9uIHZhbHVlXHJcbiAgICAgICAgICAgIGpRdWVyeS5lYWNoKHZhbHMsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBpbWdDb3VudGVyID0gLTE7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGhpc1ZhbCA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy52YWwgPT09IHNlbGVjdGVkVmFsICYmIHRoaXMuaW1hZ2VzKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmltYWdlcy5zbWFsbC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGF0LmNvbnRhaW5lcklkICsgJyAucHJvZHVjdHRodW1ibmFpbHM6bGFzdCcpLmh0bWwoJycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICAgICAgICAgICAgICogU2hvdyBNYWdpY1pvb20gZGF0YSAtIGFkZGVkIGJ5IGxnZWxiZXJnIDkvMTQvMTFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB6b29taW1hZ2V1cmwgPSAodGhpc1ZhbC5pbWFnZXMub3JpZ2luYWwubGVuZ3RoID4gMCkgPyB0aGlzVmFsLmltYWdlcy5vcmlnaW5hbFswXS51cmwgOiAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9qUXVlcnkoJy5wcm9kdWN0ZGV0YWlsY29sdW1uIC5wcm9kdWN0aW1hZ2UgaW1nLCAucHJvZHVjdGRldGFpbGNvbHVtbiAucXVpY2t2aWV3cHJvZHVjdGltYWdlIGltZycpLmF0dHIoJ3NyYycsdGhpc1ZhbC5pbWFnZXMubGFyZ2VbaV0udXJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KCcuTWFnaWNab29tJykuYXR0cignaHJlZicsIHpvb21pbWFnZXVybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJ2JvZHknKS5maW5kKCcuTWFnaWNab29tIGltZycpLmF0dHIoJ3NyYycsIHpvb21pbWFnZXVybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hZ2ljWm9vbS51cGRhdGUoJ3Byb2R1Y3QtaW1hZ2UnLCB6b29taW1hZ2V1cmwsIHpvb21pbWFnZXVybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGpRdWVyeSh0aGF0LmNvbnRhaW5lcklkK1wiIC5wcm9kdWN0aW1hZ2VcIikuaHRtbChcIlwiKS5hcHBlbmQoalF1ZXJ5KFwiPGltZy8+XCIpLmF0dHIoXCJzcmNcIiwgdGhpc1ZhbC5pbWFnZXMubGFyZ2VbMF0udXJsKS5hdHRyKFwiYWx0XCIsIHRoaXNWYWwuaW1hZ2VzLmxhcmdlWzBdLmFsdCkuYXR0cihcInRpdGxlXCIsIHRoaXNWYWwuaW1hZ2VzLmxhcmdlWzBdLnRpdGxlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBtYWtlIHN1cmUgdG8gc2hvdyBudW1iZXIgb2YgaW1hZ2VzIGJhc2VkIG9uIHRoZSBzbWFsbGVzdCBvZiBsYXJnZSBvciBzbWFsbCBhcyB0aGVzZSBoYXZlIHRvIGhhdmUgMS0xIGNvcnJlc3BvbmRlbmNlLlxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBub09mSW1hZ2VzID0gdGhpcy5pbWFnZXMubGFyZ2UubGVuZ3RoID49IHRoaXMuaW1hZ2VzLnNtYWxsLmxlbmd0aCA/IHRoaXMuaW1hZ2VzLnNtYWxsLmxlbmd0aCA6IHRoaXMuaW1hZ2VzLmxhcmdlLmxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gc2hvdyB0aHVtYm5haWxzIG9ubHkgaWYgbW9yZSB0aGFuIDEgb3IgaWYgdGhpcyBpcyBhIHN1YnByb2R1Y3QgKGJ1bmRsZWQvc3VicHJvZHVjdClcclxuICAgICAgICAgICAgICAgICAgICBpZiAoKHRoaXMuaW1hZ2VzLnNtYWxsLmxlbmd0aCA+IDEgfHwgdGhhdC5pc1N1YlByb2R1Y3QoKSkgJiYgIXRoYXQuaXNCb251c1Byb2R1Y3QoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkuZWFjaCh0aGlzLmltYWdlcy5zbWFsbCwgZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdDb3VudGVyKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3ZhciBpbWFnZUluZCA9IGltZ0NvdW50ZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW1nQ291bnRlciA+IG5vT2ZJbWFnZXMgLSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhyZWYgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCQoJyNjb250YWluZXInKS5oYXNDbGFzcygncHRfcHJvZHVjdC1kZXRhaWxzJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBocmVmID0gdGhpc1ZhbC5pbWFnZXMub3JpZ2luYWxbaW5kZXhdLnVybDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW4gcXVpY2sgdmlldyBzaW5jZSBtYWdpYyB6b29tIGlzIG5vdCB0aGVyZSwgSGVuY2Ugd2UgbmVlZCB0byBzZXQgamF2YXNjcmlwdDp2b2lkKDApOyBmb3IgYSB0YWcgaHJlZiB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhyZWYgPSAnamF2YXNjcmlwdDp2b2lkKDApOyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoYXQuY29udGFpbmVySWQgKyAnIC5wcm9kdWN0dGh1bWJuYWlsczpsYXN0JykuYXBwZW5kKCc8ZGl2IGNsYXNzPVxcJ2FsdGVybmF0ZS1pbWFnZXNcXCc+PGEgZGF0YS16b29tLWlkPVxcJ3Byb2R1Y3QtaW1hZ2VcXCcgaHJlZj1cXCcnICsgaHJlZiArICdcXCcgY2xhc3M9XFwnYWx0ZXJuYXRlLWltYWdlXFwnIGRhdGEtaW1hZ2U9XFwnJyArIHRoaXNWYWwuaW1hZ2VzLm9yaWdpbmFsW2luZGV4XS51cmwgKyAnXFwnPjxpbWcgY2xhc3M9XFwnaW5kZXgnICsgaW5kZXggKyAnXFwnIHNyYz1cXCcnICsgdGhpcy51cmwgKyAnXFwnIHRpdGxlPVxcJycgKyB0aGlzLnRpdGxlICsgJ1xcJyBhbHQ9XFwnJyArIHRoaXMuYWx0ICsgJ1xcJy8+PC9hPjwvZGl2PicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoYXQuY29udGFpbmVySWQuaW5kZXhPZigndWktZGlhbG9nJykgPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhhdC5jb250YWluZXJJZCArICcgLnByb2R1Y3R0aHVtYm5haWxzOmxhc3QgLmFsdGVybmF0ZS1pbWFnZSBpbWcnKS5vbignY2xpY2sgdG91Y2hzdGFydCcsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcub3dsLWl0ZW0nKS5zaWJsaW5ncygnLm93bC1pdGVtJykuZmluZCgnYS5hbHRlcm5hdGUtaW1hZ2UnKS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcub3dsLWl0ZW0nKS5maW5kKCdhLmFsdGVybmF0ZS1pbWFnZScpLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgem9vbWltYWdldXJsID0gJCh0aGlzKS5jbG9zZXN0KCcuYWx0ZXJuYXRlLWltYWdlJykuZGF0YSgnaW1hZ2UnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9qUXVlcnkoJy5wcm9kdWN0ZGV0YWlsY29sdW1uIC5wcm9kdWN0aW1hZ2UgaW1nLCAucHJvZHVjdGRldGFpbGNvbHVtbiAucXVpY2t2aWV3cHJvZHVjdGltYWdlIGltZycpLmF0dHIoJ3NyYycsdGhpc1ZhbC5pbWFnZXMubGFyZ2VbaW1hZ2VJbmRdLnVybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJ2JvZHknKS5maW5kKCcuTWFnaWNab29tJykuYXR0cignaHJlZicsIHpvb21pbWFnZXVybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJ2JvZHknKS5maW5kKCcuTWFnaWNab29tIGltZycpLmF0dHIoJ3NyYycsIHpvb21pbWFnZXVybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hZ2ljWm9vbS51cGRhdGUoJ3Byb2R1Y3QtaW1hZ2UnLCB6b29taW1hZ2V1cmwsIHpvb21pbWFnZXVybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hZ2ljWm9vbS51cGRhdGUoJ3ByaW1hcnktaW1hZ2UnLCB6b29taW1hZ2V1cmwsIHpvb21pbWFnZXVybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vJChcImJvZHlcIikuZmluZCgnLnByb2R1Y3QtaW1hZ2UnKS50cmlnZ2VyKFwiY2xpY2tcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhhdC5jb250YWluZXJJZCArICcgLnByb2R1Y3R0aHVtYm5haWxzOmxhc3QgLm93bC1pdGVtJykuZmlyc3QoKS5maW5kKCdpbWcnKS5jbGljaygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3ZhciAkaW1hZ2VzID0galF1ZXJ5KHRoYXQuY29udGFpbmVySWQrXCIgLnByb2R1Y3R0aHVtYm5haWxzOmxhc3QgLm93bC1pdGVtIGltZ1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy92YXIgbnVtT2ZSb3dzID0gTWF0aC5jZWlsKCRpbWFnZXMuc2l6ZSgpLzYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyRpbWFnZXMuc2xpY2UobnVtT2ZSb3dzICogNiAtIDYsIG51bU9mUm93cyAqIDYgLSAxKS5jc3MoJ21hcmdpbi1ib3R0b20nLCcwJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZXNrdG9wSXRlbXMgPSA0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhhdC5jb250YWluZXJJZC5pbmRleE9mKCd1aS1kaWFsb2cnKSA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNrdG9wSXRlbXMgPSAzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwZHBPd2xDYXJvdXNlbCA9ICQoJy5wZHAtb3dsLWN1c3RvbWl6YXRpb24nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpID4gNDgwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pbWFnZXMuc21hbGwubGVuZ3RoID4gNCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBkcE93bENhcm91c2VsLm93bENhcm91c2VsKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAxMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmF2UmV3aW5kOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV3aW5kOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmF2OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3RzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0aW9uOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2l2ZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlQnk6IDFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA0ODE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtczogMyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZUJ5OiAzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOTYwOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6IGRlc2t0b3BJdGVtcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZUJ5OiBkZXNrdG9wSXRlbXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJ2ltZy5pbmRleDAnKS5wYXJlbnRzKCcub3dsLWl0ZW0nKS5maW5kKCdhLmFsdGVybmF0ZS1pbWFnZScpLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCQocGRwT3dsQ2Fyb3VzZWwpLmhhc0NsYXNzKCdvd2wtY2Fyb3VzZWwnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZHBPd2xDYXJvdXNlbC50cmlnZ2VyKCdkZXN0cm95Lm93bC5jYXJvdXNlbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZHBPd2xDYXJvdXNlbC5vd2xDYXJvdXNlbCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zOiBkZXNrdG9wSXRlbXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdlJld2luZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbjogMTAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJld2luZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvdHM6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0aW9uOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2l2ZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlQnk6IDFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA0ODE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtczogMyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZUJ5OiAzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOTYwOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6IGRlc2t0b3BJdGVtcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZUJ5OiBkZXNrdG9wSXRlbXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJ2ltZy5pbmRleDAnKS5wYXJlbnRzKCcub3dsLWl0ZW0nKS5maW5kKCdhLmFsdGVybmF0ZS1pbWFnZScpLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCQod2luZG93KS53aWR0aCgpIDwgNDgxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZHBPd2xDYXJvdXNlbC5vd2xDYXJvdXNlbCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVCeTogMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDEwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdlJld2luZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV3aW5kOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYXY6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG90czogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0aW9uOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zaXZlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDA6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVCeTogMVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA0ODE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zOiAzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVCeTogM1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA5NjA6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zOiBkZXNrdG9wSXRlbXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZUJ5OiBkZXNrdG9wSXRlbXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBFdmVudCBoYW5kbGVyIHdoZW4gYSB2YXJpYXRpb24gYXR0cmlidXRlIGlzIHNlbGVjdGVkL2Rlc2VsZWN0ZWQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdmFyQXR0clNlbGVjdGVkOiBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAvLyB1cGRhdGUgdGhlIHNlbGVjdGVkIHZhbHVlIG5vZGVcclxuICAgICAgICAgICAgdGhpcy5zaG93U2VsZWN0ZWRWYXJBdHRyVmFsKGUuZGF0YS5pZCwgZS5kYXRhLnZhbCB8fCAnJyk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkVmFyQXR0cmlic1tlLmRhdGEuaWRdID0gZS5kYXRhLnZhbDtcclxuXHJcbiAgICAgICAgICAgIC8vIGlmIHRoaXMgaXMgYSBkZXNlbGVjdGlvbiBhbmQgdXNlciBsYW5kZWQgb24gYSB2YXJpYW50IHBhZ2UgdGhlbiByZXNldCBpdHMgdmFyaWFudCBmbGFnXHJcbiAgICAgICAgICAgIC8vIGFzIG5vdyB1c2VyIGhhcyBkZXNlbGVjdGVkIGFuIGF0dHJpYnV0ZSB0aHVzIG1ha2luZyBpdCBlc3NlbnRpYWxseSBhIG1hc3RlciBwcm9kdWN0IHZpZXdcclxuICAgICAgICAgICAgaWYgKGUuZGF0YS52YWwgPT0gbnVsbCAmJiB0aGlzLnZhcmlhbnQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudmFyaWFudCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXN0ZXIgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBzdG9yZSB0aGlzIHJlZlxyXG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICAvLyB0cmlnZ2VyIHVwZGF0ZSBldmVudCB3aGljaCB3aWxsIHVwZGF0ZSBldmVyeSBvdGhlciB2YXJpYXRpb24gYXR0cmlidXRlIGkuZS4gZW5hYmxlL2Rpc2FibGUgZXRjLlxyXG5cclxuICAgICAgICAgICAgLy8gZmlyc3QgcmVzZXQgdGhlIGNvbnRlbnRzIG9mIGVhY2ggYXR0cmlidXRlIGRpc3BsYXlcclxuICAgICAgICAgICAgLy8gd2hlbiB3ZSBoYXZlIGdvdCB0aGUgdmFycmlhdGlvbnMgZGF0YVxyXG4gICAgICAgICAgICBpZiAoIWlzTG9hZGluZ1Zhcikge1xyXG4gICAgICAgICAgICAgICAgLy8gZmluZCB2YXJpYW50cyB3aGljaCBtYXRjaCB0aGUgY3VycmVudCBzZWxlY3Rpb25cclxuICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZFZhckF0dHJWYXJpYW50cyA9IGUuZGF0YS52YWwgIT0gbnVsbCA/IHRoaXMuZmluZFZhcmlhdGlvbnMoe1xyXG4gICAgICAgICAgICAgICAgICAgIGlkOiBlLmRhdGEuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsOiBlLmRhdGEudmFsXHJcbiAgICAgICAgICAgICAgICB9KSA6IG51bGw7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRWYXJBdHRycyA9IGpRdWVyeS5leHRlbmQoe30sIHt9LCB0aGlzLnNlbGVjdGVkVmFyQXR0cmlicyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdmFsaWRWYXJpYW50cyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB2YXIgdW5zZWxlY3RlZFZhckF0dHJzID0gbmV3IEFycmF5KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gZm9yIGVhY2ggc2VsZWN0ZWQgdmFyaWF0aW9uIGF0dHJpYnV0ZSBmaW5kIHZhbGlkIHZhcmlhbnRzXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBzZWxlY3RlZFZhciBpbiBzZWxlY3RlZFZhckF0dHJzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkVmFyQXR0cnNbc2VsZWN0ZWRWYXJdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkVmFyaWFudHMgPSB0aGlzLmZpbmRWYXJpYXRpb25zKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBzZWxlY3RlZFZhcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbDogc2VsZWN0ZWRWYXJBdHRyc1tzZWxlY3RlZFZhcl1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgdmFsaWRWYXJpYW50cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdW5zZWxlY3RlZFZhckF0dHJzLnB1c2goc2VsZWN0ZWRWYXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBlYWNoIHZhcmlhdGlvbiBhdHRyaWJ1dGUgZGlzcGxheVxyXG4gICAgICAgICAgICAgICAgalF1ZXJ5LmVhY2gobW9kZWwudmFyaWF0aW9ucy5hdHRyaWJ1dGVzLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCh0aGlzLmlkICE9IGUuZGF0YS5pZCB8fCBlLmRhdGEudmFsID09IG51bGwpICYmIHNlbGVjdGVkVmFyQXR0cnNbdGhpcy5pZF0gPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0LnZhckF0dHJEaXNwbGF5SGFuZGxlcih0aGlzLmlkLCB2YWxpZFZhcmlhbnRzKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaWQgIT0gZS5kYXRhLmlkICYmIHNlbGVjdGVkVmFyQXR0cnNbdGhpcy5pZF0gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0LnZhckF0dHJEaXNwbGF5SGFuZGxlcih0aGlzLmlkLCBzZWxlY3RlZFZhckF0dHJWYXJpYW50cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2hvdyBzd2F0Y2ggcmVsYXRlZCBpbWFnZXMgZm9yIHRoZSBjdXJyZW50IHZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuc2hvd0ltYWdlcyhlLmRhdGEudmFsLCB0aGlzLnZhbHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIGJhc2VkIG9uIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgdmFyaWF0aW9uIGF0dHJpYnV0ZSB2YWx1ZXMsIHRyeSB0byBmaW5kIGEgbWF0Y2hpbmcgdmFyaWFudFxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFZhciA9IHRoaXMuZmluZFZhcmlhdGlvbih0aGlzLnNlbGVjdGVkVmFyQXR0cmlicyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGxldHMgZmlyZSByZWZyZXNoIHZpZXcgZXZlbnQgdG8gZW5hYmxlL2Rpc2FibGUgdmFyaWF0aW9ucyBhdHRyc1xyXG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hWaWV3KCk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogZ28gdGhydSBhbGwgdmFyaWF0aW9ucyBhdHRyIGFuZCBkaXNhYmxlIHdoaWNoIGFyZSBub3QgYXZhaWxhYmxlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcmVzZXRWYXJpYXRpb25zOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChpc0xvYWRpbmdWYXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjsgLy8gd2UgZG9uJ3QgaGF2ZSB0aGUgY29tcGxldGUgZGF0YSB5ZXRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgICAgIHZhciB2YWxpZFZhcmlhbnRzID0gbW9kZWwudmFyaWF0aW9ucy52YXJpYW50cztcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRWYXJBdHRyaWJzKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBzZWxlY3RlZFZhckF0dHIgaW4gdGhpcy5zZWxlY3RlZFZhckF0dHJpYnMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFZhckF0dHJpYnNbc2VsZWN0ZWRWYXJBdHRyXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZFZhcmlhbnRzID0gdGhhdC5maW5kVmFyaWF0aW9ucyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogc2VsZWN0ZWRWYXJBdHRyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsOiB0aGlzLnNlbGVjdGVkVmFyQXR0cmlic1tzZWxlY3RlZFZhckF0dHJdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHZhbGlkVmFyaWFudHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgalF1ZXJ5KHRoaXMuY29udGFpbmVySWQgKyAnIC52YXJpYXRpb25hdHRyaWJ1dGVzIC5zd2F0Y2hlcycpLm5vdCgnLmN1cnJlbnQnKS5ub3QoJy5zZWxlY3RlZCcpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGFhID0galF1ZXJ5KHRoaXMpLmRhdGEoJ2RhdGEnKTsgLy8gZGF0YSBpcyBpZCBzZXQgdmlhIGFwcC5oaWRkZW5EYXRhIGFwaVxyXG4gICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMpLmZpbmQoJ2Euc3dhdGNoYW5jaG9yJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZmluZCBBIHZhcmlhdGlvbiB3aXRoIHRoaXMgdmFsXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZpbHRlcmVkVmFyaWFudHMgPSB0aGF0LmZpbmRWYXJpYXRpb25zKHtpZDogZGF0YWEsIHZhbDogdGhpcy50aXRsZX0sIHZhbGlkVmFyaWFudHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWx0ZXJlZFZhcmlhbnRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZm91bmQgYXQgbGVhc3QgMSBzbyBrZWVwIGl0IGVuYWJsZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMpLnBhcmVudCgpLnJlbW92ZUNsYXNzKCd1bnNlbGVjdGFibGUnKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcykucGFyZW50KCkuYWRkQ2xhc3MoJ3Vuc2VsZWN0YWJsZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcykucGFyZW50KCkucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBqUXVlcnkodGhpcy5jb250YWluZXJJZCArICcgLnZhcmlhdGlvbmF0dHJpYnV0ZXMgLnZhcmlhbnRkcm9wZG93biBzZWxlY3QnKS5ub3QoJy5jdXJyZW50IHNlbGVjdCcpLm5vdCgnLnNlbGVjdGVkIHNlbGVjdCcpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyICRzZWxlY3QgPSBqUXVlcnkodGhpcyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdmFJZCA9ICRzZWxlY3QuZGF0YSgnZGF0YScpLmlkOyAgLy8gZGF0YSBpcyBpZCBzZXQgdmlhIGFwcC5oaWRkZW5EYXRhIGFwaVxyXG4gICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSAkc2VsZWN0LmRhdGEoJ29wdGlvbnMnKTtcclxuICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAkc2VsZWN0LmZpbmQoJ29wdGlvbicpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgJG9wdGlvbiA9IGpRdWVyeSh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5wdXNoKHt2YWx1ZTogJG9wdGlvbi52YWwoKSwgdGV4dDogJG9wdGlvbi50ZXh0KCksIHNlbGVjdGVkOiBmYWxzZX0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICRzZWxlY3QuZGF0YSgnb3B0aW9ucycsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIGxlbiA9IG9wdGlvbnMubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkVmFsID0gJHNlbGVjdC52YWwoKTtcclxuICAgICAgICAgICAgICAgICRzZWxlY3QuZW1wdHkoKTtcclxuICAgICAgICAgICAgICAgIGpRdWVyeS5lYWNoKG9wdGlvbnMsIGZ1bmN0aW9uIChpbmRleCwgdmFsdWUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxlbiA+IDEgJiYgaW5kZXggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2VsZWN0LmFwcGVuZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSgnPG9wdGlvbj48L29wdGlvbj4nKS50ZXh0KHZhbHVlLnRleHQpLnZhbCh2YWx1ZS52YWx1ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOyAvLyB2ZXJ5IGZpcnN0IG9wdGlvbiB3aGVuIHRoZSBsZW5ndGggaXMgZ3JlYXRlciB0aGFuIDEgaXMgJ1NlbGVjdCAuLi4nIG1lc3NhZ2Ugc28gc2tpcCBpdFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB2YXIgZmlsdGVyZWRWYXJpYW50cyA9IHRoYXQuZmluZFZhcmlhdGlvbnMoe2lkOiB2YUlkLCB2YWw6IHZhbHVlLnZhbHVlfSwgdmFsaWRWYXJpYW50cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbHRlcmVkVmFyaWFudHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2FkZCBpdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2VsZWN0LmFwcGVuZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSgnPG9wdGlvbj48L29wdGlvbj4nKS50ZXh0KHZhbHVlLnRleHQpLnZhbCh2YWx1ZS52YWx1ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBubyB2YXJpYW50IGZvdW5kIHdpdGggdGhpcyB2YWx1ZSBjb21iaW5hdGlvbiBzbyBkaXNhYmxlIGl0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vdGhpcy5kaXNhYmxlZCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKippZiAodGhpcy5zZWxlY3RlZCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gcmVtb3ZlIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgdmFsdWUgaWYgdGhlIHZhbHVlIGlzIG5vdCBzZWxlY3RhYmxlXHJcblx0XHRcdFx0XHRcdFx0XHR0aGF0LnNob3dTZWxlY3RlZFZhckF0dHJWYWwoYXR0cklkLCBcIlwiKTtcclxuXHRcdFx0XHRcdFx0XHRcdHRoYXQuc2VsZWN0ZWRWYXJBdHRyaWJzW2F0dHJJZF0gPSBudWxsO1xyXG5cdFx0XHRcdFx0XHRcdH0qL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgY3VycmVudCBzZWxlY3Rpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy90aGlzLnNlbGVjdGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgJHNlbGVjdC52YWwoc2VsZWN0ZWRWYWwpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBnaXZlbiBhIHZhcmlhdGlvbiBhdHRyaWJ1dGUgaWQgYW5kIHZhbGlkIHZhcmlhbnRzLCBpdCB3b3VsZCBhZGp1c3QgdGhlIHVpIGkuZS4gZW5hYmxlL2Rpc2FibGVcclxuICAgICAgICAgKiBhcHByb3ByaWF0ZSBhdHRyaWJ1dGUgdmFsdWVzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGF0dHJJZCAtIFN0cmluZywgaWQgb2YgdGhlIHZhcmlhdGlvbiBhdHRyaWJ1dGVcclxuICAgICAgICAgKiBAcGFyYW0gdmFsaWRWYXJpYW50cyAtIEFycmF5IG9mIGpzb24gb2JqZWN0cyBvZiB2YWxpZCB2YXJpYW50cyBmb3IgdGhlIGdpdmVuIGF0dHJpYnV0ZSBpZFxyXG4gICAgICAgICAqICovXHJcbiAgICAgICAgdmFyQXR0ckRpc3BsYXlIYW5kbGVyOiBmdW5jdGlvbiAoYXR0cklkLCB2YWxpZFZhcmlhbnRzKSB7XHJcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpczsgLy8gcHJlc2VydmUgdGhpcyBpbnN0YW5jZVxyXG4gICAgICAgICAgICB2YXIgZnV0dXJlVmFyaWFudHMgPSB2YWxpZFZhcmlhbnRzO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFZhckF0dHJpYnMpIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIHNlbGVjdGVkVmFyQXR0ciBpbiB0aGlzLnNlbGVjdGVkVmFyQXR0cmlicykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkVmFyQXR0cmlic1tzZWxlY3RlZFZhckF0dHJdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1dHVyZVZhcmlhbnRzID0gdGhhdC5maW5kVmFyaWF0aW9ucyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogc2VsZWN0ZWRWYXJBdHRyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsOiB0aGlzLnNlbGVjdGVkVmFyQXR0cmlic1tzZWxlY3RlZFZhckF0dHJdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1dHVyZVZhcmlhbnRzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gbG9vcCB0aHJ1IGFsbCBub24tZHJvcGRvd24gdWkgZWxlbWVudHMgaS5lLiBzd2F0Y2hlcyBlLmcuIGNvbG9yLCB3aWR0aCwgbGVuZ3RoIGV0Yy5cclxuICAgICAgICAgICAgalF1ZXJ5KHRoaXMuY29udGFpbmVySWQgKyAnIC52YXJpYXRpb25hdHRyaWJ1dGVzIC5zd2F0Y2hlcy5mdXR1cmUsICcgKyB0aGlzLmNvbnRhaW5lcklkICsgJyAudmFyaWF0aW9uYXR0cmlidXRlcyAuc3dhdGNoZXMuY3VycmVudCcpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyICRzd2F0Y2ggPSBqUXVlcnkodGhpcyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3dhdGNoSWQgPSAkc3dhdGNoLmRhdGEoJ2RhdGEnKTsgIC8vIGRhdGEgaXMgaWQgc2V0IHZpYSBhcHAuaGlkZGVuRGF0YSBhcGlcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoc3dhdGNoSWQgPT09IGF0dHJJZCAmJiB2YWxpZFZhcmlhbnRzKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICRzd2F0Y2guZmluZCgnYS5zd2F0Y2hhbmNob3InKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyICR0aGlzID0galF1ZXJ5KHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGFyZW50TGkgPSAkdGhpcy5wYXJlbnQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZpbmQgQSB2YXJpYXRpb24gd2l0aCB0aGlzIHZhbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmlsdGVyZWRWYXJpYW50cyA9ICRzd2F0Y2guaGFzQ2xhc3MoJ2Z1dHVyZScpID8gdGhhdC5maW5kVmFyaWF0aW9ucyh7aWQ6IGF0dHJJZCwgdmFsOiB0aGlzLnRpdGxlfSwgZnV0dXJlVmFyaWFudHMpIDogdGhhdC5maW5kVmFyaWF0aW9ucyh7aWQ6IGF0dHJJZCwgdmFsOiB0aGlzLnRpdGxlfSwgdmFsaWRWYXJpYW50cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWx0ZXJlZFZhcmlhbnRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZvdW5kIGF0IGxlYXN0IDEgc28ga2VlcCBpdCBlbmFibGVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRMaS5yZW1vdmVDbGFzcygndW5zZWxlY3RhYmxlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHN3YXRjaC5oYXNDbGFzcygnY29sb3InKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZ2V0QXZhaWxhYmlsaXR5KGZpbHRlcmVkVmFyaWFudHMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkdGhpcy5maW5kKCcub3V0LW9mLXN0b2NrJykuc2l6ZSgpID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy5wcmVwZW5kKCc8c3BhbiBjbGFzcz1cXCdvdXQtb2Ytc3RvY2tcXCc+PC9zcGFuPicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMuZmluZCgnLm91dC1vZi1zdG9jaycpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFnZXRBdmFpbGFiaWxpdHkoZmlsdGVyZWRWYXJpYW50cykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCR0aGlzLmZpbmQoJ3NwYW4nKS50ZXh0KCkuaW5kZXhPZignT3V0IG9mIFN0b2NrJykgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHRoaXMuZmluZCgnc3BhbicpLnRleHQoKS5pbmRleE9mKCdOZXcnKSAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy5maW5kKCdzcGFuJykudGV4dCgkdGhpcy5maW5kKCdzcGFuJykudGV4dCgpICsgJyAvIE91dCBvZiBTdG9jaycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy5maW5kKCdzcGFuJykudGV4dCgnT3V0IG9mIFN0b2NrJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHRoaXMuZmluZCgnc3BhbicpLnRleHQoKS5pbmRleE9mKCdOZXcnKSAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoJ3NwYW4nKS50ZXh0KCR0aGlzLmZpbmQoJ3NwYW4nKS50ZXh0KCkucmVwbGFjZSgnIC8gT3V0IG9mIFN0b2NrJywgJycpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoJ3NwYW4nKS50ZXh0KCR0aGlzLmZpbmQoJ3NwYW4nKS50ZXh0KCkucmVwbGFjZSgnT3V0IG9mIFN0b2NrJywgJycpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vIHZhcmlhbnQgZm91bmQgd2l0aCB0aGlzIHZhbHVlIGNvbWJpbmF0aW9uIHNvIGRpc2FibGUgaXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudExpLmFkZENsYXNzKCd1bnNlbGVjdGFibGUnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW50TGkuaGFzQ2xhc3MoJ3NlbGVjdGVkJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCB2YWx1ZSBpZiB0aGUgdmFsdWUgaXMgbm90IHNlbGVjdGFibGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LnNob3dTZWxlY3RlZFZhckF0dHJWYWwoYXR0cklkLCAnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5zZWxlY3RlZFZhckF0dHJpYnNbYXR0cklkXSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgY3VycmVudCBzZWxlY3Rpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudExpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gbG9vcCB0aHJ1IGFsbCB0aGUgbm9uLXN3YXRjaGVzKGRyb3AgZG93bikgYXR0cmlidXRlc1xyXG4gICAgICAgICAgICBqUXVlcnkodGhpcy5jb250YWluZXJJZCArICcgLnZhcmlhdGlvbmF0dHJpYnV0ZXMgLnZhcmlhbnRkcm9wZG93bi5mdXR1cmUgc2VsZWN0LCAnICsgdGhpcy5jb250YWluZXJJZCArICcgLnZhcmlhdGlvbmF0dHJpYnV0ZXMgLnZhcmlhbnRkcm9wZG93bi5jdXJyZW50IHNlbGVjdCcpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyICRzZWxlY3QgPSBqUXVlcnkodGhpcyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdmFJZCA9ICRzZWxlY3QuZGF0YSgnZGF0YScpLmlkOyAgLy8gZGF0YSBpcyBpZCBzZXQgdmlhIGFwcC5oaWRkZW5EYXRhIGFwaVxyXG4gICAgICAgICAgICAgICAgaWYgKHZhSWQgPT09IGF0dHJJZCAmJiB2YWxpZFZhcmlhbnRzKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvcHRpb25zID0gJHNlbGVjdC5kYXRhKCdvcHRpb25zJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFvcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNlbGVjdC5maW5kKCdvcHRpb24nKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkb3B0aW9uID0galF1ZXJ5KHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5wdXNoKHt2YWx1ZTogJG9wdGlvbi52YWwoKSwgdGV4dDogJG9wdGlvbi50ZXh0KCksIHNlbGVjdGVkOiBmYWxzZX0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNlbGVjdC5kYXRhKCdvcHRpb25zJywgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBsZW4gPSBvcHRpb25zLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRWYWwgPSAkc2VsZWN0LnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICRzZWxlY3QuZW1wdHkoKTtcclxuICAgICAgICAgICAgICAgICAgICBqUXVlcnkuZWFjaChvcHRpb25zLCBmdW5jdGlvbiAoaW5kZXgsIHZhbHVlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGVuID4gMSAmJiBpbmRleCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2VsZWN0LmFwcGVuZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkoJzxvcHRpb24+PC9vcHRpb24+JykudGV4dCh2YWx1ZS50ZXh0KS52YWwodmFsdWUudmFsdWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOyAvLyB2ZXJ5IGZpcnN0IG9wdGlvbiB3aGVuIHRoZSBsZW5ndGggaXMgZ3JlYXRlciB0aGFuIDEgaXMgJ1NlbGVjdCAuLi4nIG1lc3NhZ2Ugc28gc2tpcCBpdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBmaW5kIEEgdmFyaWF0aW9uIHdpdGggdGhpcyB2YWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpbHRlcmVkVmFyaWFudHMgPSAkc2VsZWN0LmNsb3Nlc3QoJy52YXJpYW50ZHJvcGRvd24nKS5oYXNDbGFzcygnZnV0dXJlJykgPyB0aGF0LmZpbmRWYXJpYXRpb25zKHtpZDogYXR0cklkLCB2YWw6IHZhbHVlLnZhbHVlfSwgZnV0dXJlVmFyaWFudHMpIDogdGhhdC5maW5kVmFyaWF0aW9ucyh7aWQ6IGF0dHJJZCwgdmFsOiB2YWx1ZS52YWx1ZX0sIHZhbGlkVmFyaWFudHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlsdGVyZWRWYXJpYW50cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmb3VuZCBhdCBsZWFzdCAxIHNvIGtlZXAgaXQgZW5hYmxlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9vcyA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFnZXRBdmFpbGFiaWxpdHkoZmlsdGVyZWRWYXJpYW50cykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvb3MgPSAnIC0gT3V0IG9mIFN0b2NrJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYWRkIGl0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2VsZWN0LmFwcGVuZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkoJzxvcHRpb24+PC9vcHRpb24+JykudGV4dCh2YWx1ZS50ZXh0ICsgb29zKS52YWwodmFsdWUudmFsdWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm8gdmFyaWFudCBmb3VuZCB3aXRoIHRoaXMgdmFsdWUgY29tYmluYXRpb24gc28gZGlzYWJsZSBpdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy90aGlzLmRpc2FibGVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKippZiAodGhpcy5zZWxlY3RlZCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gcmVtb3ZlIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgdmFsdWUgaWYgdGhlIHZhbHVlIGlzIG5vdCBzZWxlY3RhYmxlXHJcblx0XHRcdFx0XHRcdFx0XHR0aGF0LnNob3dTZWxlY3RlZFZhckF0dHJWYWwoYXR0cklkLCBcIlwiKTtcclxuXHRcdFx0XHRcdFx0XHRcdHRoYXQuc2VsZWN0ZWRWYXJBdHRyaWJzW2F0dHJJZF0gPSBudWxsO1xyXG5cdFx0XHRcdFx0XHRcdH0qL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGN1cnJlbnQgc2VsZWN0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3RoaXMuc2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICRzZWxlY3QudmFsKHNlbGVjdGVkVmFsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIHJlZnJlc2ggdGhlIFVJIGkuZS4gYXZhaWxhYmlsaXR5LCBwcmljZSwgQTJDIGJ1dHRvbiBhbmQgdmFyaWF0aW9uIGF0dHJpYnV0ZXMgZGlzcGxheVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHJlZnJlc2hWaWV3OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB0aGlzUHJvZHVjdCA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWlzTG9hZGluZ1ZhciAmJiB0aGlzLnNlbGVjdGVkVmFyID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIC8vIGlmIHdlIGhhdmUgbG9hZGVkIHRoZSB2YXJpYXRpb25zIGRhdGEgdGhlbiBsZXRzIGlmIHRoZSB1c2VyIGhhcyBhbHJlYWR5IHNlbGVjdGVkIHNvbWUgdmFsdWVzXHJcbiAgICAgICAgICAgICAgICAvLyBmaW5kIGEgbWF0Y2hpbmcgdmFyaWF0aW9uXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkVmFyID0gdGhpcy5maW5kVmFyaWF0aW9uKHRoaXMuc2VsZWN0ZWRWYXJBdHRyaWJzKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCFpc0xvYWRpbmdWYXIgJiYgdGhpcy5zZWxlY3RlZFZhciAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAvL0ZhY2Vib29rIFBpeGVsIENvZGUgZm9yIHZhcmlhbnQgdmlld1xyXG4gICAgICAgICAgICAgICAgZmJxKCd0cmFjaycsICdWaWV3Q29udGVudCcsIHtcclxuICAgICAgICAgICAgICAgICAgICAnY29udGVudF9pZHMnOiBbdGhpc1Byb2R1Y3Quc2VsZWN0ZWRWYXIuaWRdLFxyXG4gICAgICAgICAgICAgICAgICAgICdjb250ZW50X3R5cGUnOiAncHJvZHVjdCdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIGF2YWlsYWJpbGl0eVxyXG4gICAgICAgICAgICAgICAgcmVsb2FkQXZhaWxhYmlsaXR5KHRoaXNQcm9kdWN0LCB0aGlzUHJvZHVjdC5zZWxlY3RlZE9wdGlvbnMuUXVhbnRpdHkpO1xyXG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIHByaWNlXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dVcGRhdGVkUHJpY2UoY29tcHV0ZVByaWNlKHRoaXNQcm9kdWN0KSwgdGhpcy5zZWxlY3RlZFZhci5wcmljaW5nLnN0YW5kYXJkKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoISghdGhpcy5zZWxlY3RlZFZhci5pblN0b2NrICYmIHRoaXMuc2VsZWN0ZWRWYXIuYXZTdGF0dXMgPT09IENvbnN0YW50cy5BVkFJTF9TVEFUVVNfTk9UX0FWQUlMQUJMRSkgJiYgKHRoaXMuZ2V0UHJpY2UoKSA+IDAgfHwgdGhpcy5pc1Byb21vUHJpY2UoKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBSZXBsYWNlIHRoZSBoZXJvIHNob3Qgd2l0aCB0aGUgc3BlY2lmaWMgdmFyaWFudCBjaG9zZW5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgdmFySUQgPSB0aGlzLnNlbGVjdGVkVmFyLmlkO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbWFnZVVybCA9IG1vZGVsLmltYWdlcy52YXJpYW50c1t2YXJJRF07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHpvb21JbWFnZVVybCA9IG1vZGVsLmltYWdlcy56b29tdmFyaWFudHNbdmFySURdO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGxvYWQgdGhlIGZ1bGx5IHF1YWxpZmllZCB2YXJpYXRpb24gaW1hZ2VcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2VVcmwgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2pRdWVyeSgnLnByb2R1Y3RkZXRhaWxjb2x1bW4gLnByb2R1Y3RpbWFnZSBpbWcsIC5wcm9kdWN0ZGV0YWlsY29sdW1uIC5xdWlja3ZpZXdwcm9kdWN0aW1hZ2UgaW1nJykuYXR0cignc3JjJyxpbWFnZVVybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSgnLk1hZ2ljWm9vbScpLmF0dHIoJ2hyZWYnLCB6b29tSW1hZ2VVcmwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCdib2R5JykuZmluZCgnLk1hZ2ljWm9vbSBpbWcnKS5hdHRyKCdzcmMnLCB6b29tSW1hZ2VVcmwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBNYWdpY1pvb20udXBkYXRlKCdwcm9kdWN0LWltYWdlJywgem9vbUltYWdlVXJsLCB6b29tSW1hZ2VVcmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93SXRlbU5vKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93QXZhaWxhYmlsaXR5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZW5hYmxlIGFkZCB0byBjYXJ0IGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW5hYmxlQTJDQnV0dG9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMpLnRyaWdnZXIoJ0FkZHRvQ2FydEVuYWJsZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJCgnI1F1YW50aXR5JykudmFsKCkgPCAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJ2FkZHRvY2FydGJ1dHRvbjpsYXN0JykucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmFkZHRvY2FydCcpLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RlZFZhci5lYXJseUJpcmRNZXNzYWdlICE9ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93SXRlbU5vKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy90aGlzLmhpZGVBdmFpbGFiaWxpdHkoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc2FibGVBMkNCdXR0b24oKTtcclxuICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcykudHJpZ2dlcignQWRkdG9DYXJ0RGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy90aGlzLnJlbW92ZUl0ZW1ObygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0l0ZW1ObygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0F2YWlsYWJpbGl0eSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vdGhpcy5yZXZlcnRQcmljZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzYWJsZUEyQ0J1dHRvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzKS50cmlnZ2VyKCdBZGR0b0NhcnREaXNhYmxlZCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRWYXIuYXZTdGF0dXMgPT09IENvbnN0YW50cy5BVkFJTF9TVEFUVVNfTk9UX0FWQUlMQUJMRSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vdGhpcy5yZW1vdmVBMkNCdXR0b24oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChpc0xvYWRpbmdWYXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB1cGRhdGUgYXZhaWxhYmlsaXR5XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0QXZhaWxhYmlsaXR5TXNnKHByb2dyZXNzLnNob3coJ3Byb2R1Y3Rsb2FkZXInKSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldEF2YWlsYWJpbGl0eU1zZyhSZXNvdXJjZXMuTk9OX1NFTEVDVEVEKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlSXRlbU5vKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dBdmFpbGFiaWxpdHkoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmV2ZXJ0UHJpY2UoKTtcclxuICAgICAgICAgICAgICAgIC8vIGRpc2FibGUgYWRkIHRvIGNhcnQgYnV0dG9uXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc2FibGVBMkNCdXR0b24oKTtcclxuICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzKS50cmlnZ2VyKCdBZGR0b0NhcnREaXNhYmxlZCcpO1xyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIG5vblNlbGVjdGVkVmFycyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgdmFyIHZhbGlkVmFyaWFudHMgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgc2VsZWN0ZWRWYXIgaW4gdGhpcy5zZWxlY3RlZFZhckF0dHJpYnMpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkVmFyQXR0cmlic1tzZWxlY3RlZFZhcl0pIHtcclxuICAgICAgICAgICAgICAgICAgICB2YWxpZFZhcmlhbnRzID0gdGhpcy5maW5kVmFyaWF0aW9ucyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBzZWxlY3RlZFZhcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsOiB0aGlzLnNlbGVjdGVkVmFyQXR0cmlic1tzZWxlY3RlZFZhcl1cclxuICAgICAgICAgICAgICAgICAgICB9LCB2YWxpZFZhcmlhbnRzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gdXBkYXRlIHNlbGVjdGVkIHZhciBhdHRyIHZhbHMgYW5kIHJlZnJlc2ggdGhlaXIgZGlzcGxheVxyXG4gICAgICAgICAgICBqUXVlcnkuZWFjaChtb2RlbC52YXJpYXRpb25zLmF0dHJpYnV0ZXMsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LnNob3dTZWxlY3RlZFZhckF0dHJWYWwodGhpcy5pZCwgdGhpc1Byb2R1Y3Quc2VsZWN0ZWRWYXJBdHRyaWJzW3RoaXMuaWRdKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXNQcm9kdWN0LnNlbGVjdGVkVmFyQXR0cmlic1t0aGlzLmlkXSB8fCB0aGlzUHJvZHVjdC5zZWxlY3RlZFZhckF0dHJpYnNbdGhpcy5pZF0gPT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICBub25TZWxlY3RlZFZhcnMucHVzaCh0aGlzLm5hbWUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzUHJvZHVjdC52YXJBdHRyRGlzcGxheUhhbmRsZXIodGhpcy5pZCwgdmFsaWRWYXJpYW50cyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gcHJvY2VzcyBub24tc2VsZWN0ZWQgdmFscyBhbmQgc2hvdyB1cGRhdGVkIHRvb2x0aXAgZm9yIEEyQyBidXR0b24gYXMgYSByZW1pbmRlclxyXG4gICAgICAgICAgICAvLyBhbmQgc2hvdyBpdCBhbG9uZyBhdmFpbGFiaWxpdHlcclxuICAgICAgICAgICAgdmFyIHRvb2x0aXBTdHIgPSBnZXROb25TZWxlY3RlZFRvb2x0aXAobm9uU2VsZWN0ZWRWYXJzKTtcclxuICAgICAgICAgICAgLy92YXIgbWlzc2luZ3ZhbHVlID0gJChcIi5taXNzaW5ndmFsdWVcIikudmFsKCk7XHJcbiAgICAgICAgICAgIGlmIChub25TZWxlY3RlZFZhcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGF2YWlsTXNnID0gJC52YWxpZGF0b3IuZm9ybWF0KFJlc291cmNlcy5NSVNTSU5HX1ZBTCwgdG9vbHRpcFN0cik7XHJcbiAgICAgICAgICAgICAgICBzZXRBdmFpbGFiaWxpdHlNc2coYXZhaWxNc2cpO1xyXG4gICAgICAgICAgICAgICAgLy9qUXVlcnkodGhpc1Byb2R1Y3QuY29udGFpbmVySWQrXCIgLmFkZHRvY2FydGJ1dHRvbjpsYXN0XCIpLmF0dHIoXCJ0aXRsZVwiLCBhdmFpbE1zZyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiByZW5kZXJzIHByaWNpbmcgZGl2IGdpdmVuIGEgc2FsZSBwcmljZSBhbmQgb3B0aW9uYWwgc3RhbmRhcmQgcHJpY2VcclxuICAgICAgICAgKiBUbyBmb3JtYXQgdGhlIHByaWNlIGRpc3BsYXksIGl0IGdvZXMgdG8gc2VydmVyIHZpYSBhbiBhamF4IGNhbGwuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gc2FsZSAtIHNhbGUgcHJpY2VcclxuICAgICAgICAgKiBAcGFyYW0gc3RhbmRhcmQgLSBzdGFuZGFyZCBwcmljZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHNob3dVcGRhdGVkUHJpY2U6IGZ1bmN0aW9uIChzYWxlLCBzdGFuZGFyZCkge1xyXG4gICAgICAgICAgICB2YXIgc3RhbmRhcmRQcmljZSA9IE51bWJlcihzdGFuZGFyZCB8fCAwKTtcclxuICAgICAgICAgICAgdmFyIHNhbGVQcmljZSA9IE51bWJlcihzYWxlIHx8IDApO1xyXG4gICAgICAgICAgICB2YXIgcHJpY2VIdG1sID0gJyc7XHJcbiAgICAgICAgICAgIHZhciBmb3JtYXR0ZWRQcmljZXMgPSB7J3NhbGVQcmljZSc6IHNhbGVQcmljZSwgJ3N0YW5kYXJkUHJpY2UnOiBzdGFuZGFyZFByaWNlfTtcclxuXHJcbiAgICAgICAgICAgIC8vIHNlbmQgc2VydmVyIHJlcXVlc3QgdG8gZm9ybWF0IHRoZSBtb25leSBiYWVkIG9uIHNpdGUgc2V0dGluZ3MgdXNpbmcgTW9uZXkgYXBpXHJcbiAgICAgICAgICAgIGFqYXguZ2V0SnNvbih7XHJcbiAgICAgICAgICAgICAgICB1cmw6IFVybHMuZm9ybWF0TW9uZXksXHJcbiAgICAgICAgICAgICAgICBjYWNoZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGFzeW5jOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHsnc2FsZVByaWNlJzogc2FsZVByaWNlLCAnc3RhbmRhcmRQcmljZSc6IHN0YW5kYXJkUHJpY2V9LFxyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkUHJpY2VzID0gZGF0YTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBpbiBjYXNlIGl0IGlzIGEgcHJvbW90aW9uYWwgcHJpY2UgdGhlbiB3ZSBkbyBub3QgY2FyZSBpZiBpdCBpcyAwXHJcbiAgICAgICAgICAgIHByaWNlSHRtbCA9IChzYWxlUHJpY2UgPiAwIHx8IHRoaXMuaXNQcm9tb1ByaWNlKCkpID8gJzxkaXYgY2xhc3M9XCJzYWxlc3ByaWNlXCI+JyArIGZvcm1hdHRlZFByaWNlcy5zYWxlUHJpY2UgKyAnPC9kaXY+JyA6ICcgPGRpdiBjbGFzcz1cInNhbGVzcHJpY2VcIj5OL0E8L2Rpdj4nO1xyXG5cclxuICAgICAgICAgICAgaWYgKHN0YW5kYXJkUHJpY2UgPiAwICYmIHN0YW5kYXJkUHJpY2UgPiBzYWxlUHJpY2UpIHtcclxuICAgICAgICAgICAgICAgIC8vIHNob3cgYm90aCBwcmljZXNcclxuICAgICAgICAgICAgICAgIHByaWNlSHRtbCA9ICc8ZGl2IGNsYXNzPVwic3RhbmRhcmRwcmljZVwiPicgKyBmb3JtYXR0ZWRQcmljZXMuc3RhbmRhcmRQcmljZSArICc8L2Rpdj4nICsgcHJpY2VIdG1sO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChzdGFuZGFyZFByaWNlID09PSAwICYmIHNhbGVQcmljZSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRWYXIuZWFybHlCaXJkTWVzc2FnZSAhPSAnJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHByaWNlSHRtbCA9ICc8ZGl2IGNsYXNzPVwic2FsZXNwcmljZVwiPicgKyB0aGlzLnNlbGVjdGVkVmFyLmVhcmx5QmlyZE1lc3NhZ2UgKyAnPC9kaXY+JztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJpY2VIdG1sID0gJzxkaXYgY2xhc3M9XCJzYWxlc3ByaWNlXCI+PC9kaXY+JztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyICRwcmljZSA9IGpRdWVyeSh0aGlzLmNvbnRhaW5lcklkICsgJyAucHJvZHVjdGluZm8gLnByaWNlOmZpcnN0Jyk7XHJcbiAgICAgICAgICAgIGlmICghJHByaWNlLmRhdGEoJ29yaWdpbmFsUHJpY2UnKSkge1xyXG4gICAgICAgICAgICAgICAgJHByaWNlLmRhdGEoJ29yaWdpbmFsUHJpY2UnLCAkcHJpY2UuaHRtbCgpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkcHJpY2UuaHRtbChwcmljZUh0bWwpO1xyXG4gICAgICAgICAgICAvLyBjb250YWluZXJJZCBjb250YWlucyAjLCBnZXQgcmlkIG9mIGl0IGJlZm9yZSBmaW5kaW5nIHRoZSByaWdodCBwcmljZSBkaXZcclxuICAgICAgICAgICAgalF1ZXJ5KHRoaXMuY29udGFpbmVySWQgKyAnICNwZHBBVENEaXYnICsgdGhpcy5jb250YWluZXJJZC5zdWJzdHJpbmcoMSkgKyAnIC5wcmljZScpLmh0bWwocHJpY2VIdG1sKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiByZXR1cm5zIGEgY29tcHV0ZWQgcHJpY2UgZm9yIHRoaXMgcHJvZHVjdFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldFByaWNlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb21wdXRlUHJpY2UodGhpcyk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGV0ZXJtaW5lcyBpZiB0aGUgc2VsZWN0ZWQgcHJvZHVjdCBoYXMgcHJvbW90aW9uYWwgcHJpY2UuXHJcbiAgICAgICAgICogICAgICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4gYm9vbGVhbiB0cnVlIGlmIHByb21vdGlvbmFsIHByaWNlIGlzIHByZXNlbnQgb3RoZXJ3aXNlIGZhbHNlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgaXNQcm9tb1ByaWNlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAodGhpcy5zZWxlY3RlZFZhciAhPSBudWxsID8gdGhpcy5zZWxlY3RlZFZhci5wcmljaW5nLmlzUHJvbW9QcmljZSA6IG1vZGVsLnByaWNpbmcuaXNQcm9tb1ByaWNlKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiByZWNlaXZlcyAyIG9yIDEgdmFyaWF0aW9uIGF0dHJpYnV0ZSB2YWx1ZXMgYW5kIHRyaWVzIHRvIGZpZ3VyZSBvdXQgaWYgdGhlcmUgaXMgYSB2YXJpYW50IHdpdGggdGhlc2UgdmFsdWVzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHZhbDEgLSB2YXJpYXRpb24gYXR0cmlidXRlIHZhbHVlXHJcbiAgICAgICAgICogQHBhcmFtIHZhbDIgLSB2YXJpYXRpb24gYXR0cmlidXRlIHZhbHVlXHJcbiAgICAgICAgICogQHJldHVybiBib29sZWFuIC0gdHJ1ZSBpZiBhIHZhcmlhbnQgZXhpc3RzIG90aGVyd2lzZSBmYWxzZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGlzVmFyaWF0aW9uOiBmdW5jdGlvbiAodmFsMSwgdmFsMikge1xyXG4gICAgICAgICAgICB2YXIgdmFyaWFudCA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1vZGVsLnZhcmlhdGlvbnMudmFyaWFudHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhcmlhbnQgPSBtb2RlbC52YXJpYXRpb25zLnZhcmlhbnRzW2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhcmlhbnQuYXR0cmlidXRlc1t2YWwxLmlkXSA9PSB2YWwxLnZhbCAmJiAodmFsMiA9PSB1bmRlZmluZWQgfHwgdmFyaWFudC5hdHRyaWJ1dGVzW3ZhbDIuaWRdID09IHZhbDIudmFsKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBhcHBhcmVudGx5IHRoZXJlIGlzIG5vIHdheSB0byBicmVhayBvdXQgb2YgalF1ZXJ5LmVhY2ggaGFsZiB3YXkgOihcclxuICAgICAgICAgICAgIGpRdWVyeS5lYWNoKG1vZGVsLnZhcmlhdGlvbnMudmFyaWFudHMsIGZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0aWYgKCFmb3VuZCAmJiB0aGlzLmF0dHJpYnV0ZXNbdmFsMS5pZF0gPT0gdmFsMS52YWwgJiYgdGhpcy5hdHRyaWJ1dGVzW3ZhbDIuaWRdID09IHZhbDIudmFsKSB7XHJcblx0XHRcdFx0XHRmb3VuZCA9IHRydWU7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTsqL1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogZmluZCAwIG9yIG1vcmUgdmFyaWFudHMgbWF0Y2hpbmcgdGhlIGdpdmVuIGF0dHJpYnMgb2JqZWN0KHMpIGFuZCBpbiBzdG9ja1xyXG4gICAgICAgICAqIHJldHVybiBudWxsIG9yIGZvdW5kIHZhcmlhbnRzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZmluZFZhcmlhdGlvbnM6IGZ1bmN0aW9uIChhdHRyLCB2YXJpYW50cykge1xyXG4gICAgICAgICAgICB2YXIgZm91bmRWYXJpYW50cyA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgICAgICB2YXJpYW50cyA9IHZhcmlhbnRzIHx8IG1vZGVsLnZhcmlhdGlvbnMudmFyaWFudHM7XHJcblxyXG4gICAgICAgICAgICB2YXIgdmFyaWFudCA9IG51bGw7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFyaWFudHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhcmlhbnQgPSB2YXJpYW50c1tpXTtcclxuICAgICAgICAgICAgICAgIGlmICgodmFyaWFudC5hdHRyaWJ1dGVzW2F0dHIuaWRdID09PSBhdHRyLnZhbCkgLyomJlxyXG5cdFx0XHRcdFx0XHQvLyh2YXJpYW50LmluU3RvY2sgfHwgKHZhcmlhbnQuYXZTdGF0dXMgPT09IGFwcC5jb25zdGFudHMuQVZBSUxfU1RBVFVTX0JBQ0tPUkRFUiAmJiB2YXJpYW50LkFUUyA+IDApIHx8ICh2YXJpYW50LmF2U3RhdHVzID09PSBhcHAuY29uc3RhbnRzLkFWQUlMX1NUQVRVU19QUkVPUkRFUiAmJiB2YXJpYW50LkFUUyA+IDApKSovXHJcbiAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3VuZFZhcmlhbnRzLnB1c2godmFyaWFudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmb3VuZFZhcmlhbnRzO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIGZpbmQgYSB2YXJpYW50IHdpdGggdGhlIGdpdmVuIGF0dHJpYnMgb2JqZWN0XHJcbiAgICAgICAgICogcmV0dXJuIG51bGwgb3IgZm91bmQgdmFyaWF0aW9uIGpzb25cclxuICAgICAgICAgKi9cclxuICAgICAgICBmaW5kVmFyaWF0aW9uOiBmdW5jdGlvbiAoYXR0cnMpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmNoZWNrQXR0cnMoYXR0cnMpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGF0dHJUb1N0ciA9IGZ1bmN0aW9uIChhdHRyT2JqKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gJyc7XHJcbiAgICAgICAgICAgICAgICBqUXVlcnkuZWFjaChtb2RlbC52YXJpYXRpb25zLmF0dHJpYnV0ZXMsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gYXR0ck9ialt0aGlzLmlkXTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHZhciBhdHRyc1N0ciA9IGF0dHJUb1N0cihhdHRycyk7XHJcbiAgICAgICAgICAgIHZhciB2YXJpYW50ID0gbnVsbDtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtb2RlbC52YXJpYXRpb25zLnZhcmlhbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXJpYW50ID0gbW9kZWwudmFyaWF0aW9ucy52YXJpYW50c1tpXTtcclxuICAgICAgICAgICAgICAgIGlmIChhdHRyVG9TdHIodmFyaWFudC5hdHRyaWJ1dGVzKSA9PT0gYXR0cnNTdHIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFyaWFudDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvLyBmaW5kIGEgdmFyaWF0aW9uIHdpdGggdGhlIGdpdmUgaWQgb3RoZXJ3aXNlIGVtcHR5IG9iamVjdFxyXG4gICAgICAgIGZpbmRWYXJpYXRpb25CeUlkOiBmdW5jdGlvbiAoaWQpIHtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbW9kZWwudmFyaWF0aW9ucy52YXJpYW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgLy8gSUU3IGRvZXMgTk9UIHN1cHBvcnQgdGhpcyEhIVxyXG4gICAgICAgICAgICAgICAgLy9mb3IgZWFjaCh2YXIgdmFyaWF0aW9uIGluIG1vZGVsLnZhcmlhdGlvbnMudmFyaWFudHMpIHtcclxuICAgICAgICAgICAgICAgIHZhciB2YXJpYXRpb24gPSBtb2RlbC52YXJpYXRpb25zLnZhcmlhbnRzW2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhcmlhdGlvbiAmJiB2YXJpYXRpb24uaWQgPT09IGlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhcmlhdGlvbjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHt9O1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIHNlZSBpZiB0aGUgc3BlY2lmaWVkIGF0dHJzIG9iamVjdCBoYXMgYWxsIHRoZSB2YXJpYXRpb24gYXR0cmlidXRlcyBwcmVzZW50IGluIGl0XHJcbiAgICAgICAgICogcmV0dXJuIHRydWUvZmFsc2VcclxuICAgICAgICAgKi9cclxuICAgICAgICBjaGVja0F0dHJzOiBmdW5jdGlvbiAoYXR0cnMpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtb2RlbC52YXJpYXRpb25zLmF0dHJpYnV0ZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChhdHRyc1ttb2RlbC52YXJpYXRpb25zLmF0dHJpYnV0ZXNbaV0uaWRdID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgLy8gZ2l2ZW4gYW4gaWQsIHJldHVybiBhdHRyIGRlZmluaXRpb24gZnJvbSBtb2RlbC52YXJpYXRpb25zLmF0dHJpYnV0ZXNcclxuICAgICAgICBnZXRBdHRyQnlJRDogZnVuY3Rpb24gKGlkKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbW9kZWwudmFyaWF0aW9ucy5hdHRyaWJ1dGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobW9kZWwudmFyaWF0aW9ucy5hdHRyaWJ1dGVzW2ldLmlkID09PSBpZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtb2RlbC52YXJpYXRpb25zLmF0dHJpYnV0ZXNbaV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHt9O1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8vIHJldHVybnMgY3VycmVudCBhdmFpbGFiaWxpdHkgc3RhdHVzIGUuZy4gaW5fc3RvY2ssIHByZW9yZGVyIGV0Yy5cclxuICAgICAgICBnZXRBdlN0YXR1czogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoKHRoaXMudmFyaWFudCB8fCB0aGlzLm1hc3RlcikgJiYgdGhpcy5zZWxlY3RlZFZhciAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZFZhci5hdlN0YXR1cztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBtb2RlbC5hdlN0YXR1cztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8vIHJldHVybiBhdmFpbGFibGUgdG8gc2VsbCBxdHlcclxuICAgICAgICBnZXRBVFM6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCh0aGlzLnZhcmlhbnQgfHwgdGhpcy5tYXN0ZXIpICYmIHRoaXMuc2VsZWN0ZWRWYXIgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0ZWRWYXIuQVRTO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1vZGVsLkFUUztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8vIHJldHVybiBub24tY2xvc2VvdXQgbG93IHF0eSB0aHJlc2hvbGRcclxuICAgICAgICBnZXROb25DbG9zZW91dExvd1F0eVRocmVzaG9sZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoKHRoaXMudmFyaWFudCB8fCB0aGlzLm1hc3RlcikgJiYgdGhpcy5zZWxlY3RlZFZhciAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZFZhci5ub25DbG9zZW91dExvd1F0eVRocmVzaG9sZDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBtb2RlbC5ub25DbG9zZW91dExvd1F0eVRocmVzaG9sZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8vIHJldHVybiB0aGUgcXVhbnRpdHkgdGhhdCB3YXMgdXNlZCB0byBjYWxjdWxhdGUgYXZhaWxhYmlsaXR5XHJcbiAgICAgICAgZ2V0QXZhaWxhYmlsaXR5UXR5OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICgodGhpcy52YXJpYW50IHx8IHRoaXMubWFzdGVyKSAmJiB0aGlzLnNlbGVjdGVkVmFyICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkVmFyLmF2U3RhdHVzUXVhbnRpdHk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbW9kZWwuYXZTdGF0dXNRdWFudGl0eTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8vIHJldHVybiB0aGUgYXZhaWxhYmlsaXR5IGxldmVsc1xyXG4gICAgICAgIGdldEF2TGV2ZWxzOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICgodGhpcy52YXJpYW50IHx8IHRoaXMubWFzdGVyKSAmJiB0aGlzLnNlbGVjdGVkVmFyICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkVmFyLmF2TGV2ZWxzO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1vZGVsLmF2TGV2ZWxzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgLy8gcmV0dXJucyBpbiBzdG9jayBkYXRlXHJcbiAgICAgICAgZ2V0SW5TdG9ja0RhdGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCh0aGlzLnZhcmlhbnQgfHwgdGhpcy5tYXN0ZXIpICYmIHRoaXMuc2VsZWN0ZWRWYXIgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0ZWRWYXIuaW5TdG9ja0RhdGU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbW9kZWwuaW5TdG9ja0RhdGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvLyBzZXQgdGhlIGFkZCB0byBjYXJ0IGJ1dHRvbiBhbmQgYmluZCBoYW5kbGVycyBmb3IgYnVuZGxlL3Byb2R1Y3Qgc2V0XHJcbiAgICAgICAgZ2V0U3ViUHJvZHVjdHNCaW5kaW5nOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB0aGlzUHJvZHVjdCA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICAvLyBGb3IgYnVuZGxlcyBhbmQgcHJvZHVjdC1zZXRzLCBlbmFibGUgb3IgZGlzYWJsZSB0aGUgYWRkLXRvLWNhcnQgYnV0dG9uLlxyXG4gICAgICAgICAgICAvLyBUaGUgYnV0dG9uIHNob3VsZCBiZSBkaXNhYmxlZCBpZiB0aGUgYWRkLXRvLWNhcnQgYnV0dG9uIG9mIGFueSBzdWJwcm9kdWN0IGlzIGRpc2FibGVkLCBlbmFibGVkIG90aGVyd2lzZS5cclxuICAgICAgICAgICAgLy8gRm9yIHByb2R1Y3Qtc2V0cywgZGlzcGxheSBhIHByaWNlIHdoaWNoIGlzIHRoZSBzdW0gb2YgdGhlIHNldC1wcm9kdWN0cyBwcmljZXMgYXMgbG9uZyBhcyB0aGUgYWRkLXRvLWNhcnQgYnV0dG9uIGlzIGVuYWJsZWQuXHJcbiAgICAgICAgICAgIGlmIChtb2RlbC5idW5kbGUgfHwgbW9kZWwucHJvZHVjdFNldCkge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBidW5kbGVBMkNFbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB2YXIgcHJpY2UgPSBuZXcgTnVtYmVyKCk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXNQcm9kdWN0LnN1YlByb2R1Y3RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN1YlByb2R1Y3QgPSB0aGlzUHJvZHVjdC5zdWJQcm9kdWN0c1tpXTtcclxuICAgICAgICAgICAgICAgICAgICBidW5kbGVBMkNFbmFibGVkID0gc3ViUHJvZHVjdC5pc0EyQ0VuYWJsZWQoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWJ1bmRsZUEyQ0VuYWJsZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBjb2xsZWN0IHByaWNlIGluZm9cclxuICAgICAgICAgICAgICAgICAgICBwcmljZSArPSBuZXcgTnVtYmVyKHN1YlByb2R1Y3QuZ2V0UHJpY2UoKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gaWYgYW55IG9mIHRoZSBidW5kbGVkIHByb2R1Y3QgaGFzIGl0cyBBMkMgYnV0dG9uIGRpc2FibGVkIHRoZW4gdGhlIGJ1bmRsZSBpcyBub3Qgb3JkZXJhYmxlXHJcbiAgICAgICAgICAgICAgICBpZiAoIWJ1bmRsZUEyQ0VuYWJsZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc2FibGVBMkNCdXR0b24oKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmFibGVBMkNCdXR0b24oKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gc2hvdyB0b3RhbCBwcmljZSBleGNlcHQgZm9yIGEgYnVuZGxlXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFtb2RlbC5idW5kbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3Quc2hvd1VwZGF0ZWRQcmljZShwcmljZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBiaW5kIEFkZHRvQ2FydERpc2FibGVkIGV2ZW50IGZvciBlYWNoIHN1YnByb2R1Y3QgKGJ1bmRsZSBvciBwcm9kdWN0IHNldClcclxuICAgICAgICAgICAgalF1ZXJ5LmVhY2godGhpc1Byb2R1Y3Quc3ViUHJvZHVjdHMsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzKS5iaW5kKCdBZGR0b0NhcnREaXNhYmxlZCcsIHt9LFxyXG4gICAgICAgICAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgICAgICAgICAqIEV2ZW50IGhhbmRsZXIgd2hlbiBhIHN1YnByb2R1Y3Qgb2YgYSBwcm9kdWN0IHNldCBvciBhIGJ1bmRsZSBpcyBzZWxlY3RlZC5cclxuICAgICAgICAgICAgICAgICAgICAgKiBkaXNhYmxlIHRoZSBhZGQgdG8gY2FydCBidXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LmRpc2FibGVBMkNCdXR0b24oKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBzZWUgaWYgaGF2ZSBhbnkgc3ViLXByb2R1Y3RzIGFuZCBiaW5kIEFkZHRvQ2FydEVuYWJsZWQgZXZlbnRcclxuICAgICAgICAgICAgalF1ZXJ5LmVhY2godGhpc1Byb2R1Y3Quc3ViUHJvZHVjdHMsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzKS5iaW5kKCdBZGR0b0NhcnRFbmFibGVkJywge30sXHJcbiAgICAgICAgICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAgICAgICAgICogRXZlbnQgaGFuZGxlciB3aGVuIGEgc3VicHJvZHVjdCBvZiBhIHByb2R1Y3Qgc2V0IG9yIGEgYnVuZGxlIGlzIHNlbGVjdGVkLlxyXG4gICAgICAgICAgICAgICAgICAgICAqIEJhc2ljYWxseSBlbmFibGUgdGhlIGFkZCB0byBjYXJ0IGJ1dHRvbiBvciBkbyBvdGhlciAgcmVmcmVzaCBpZiBuZWVkZWQgbGlrZSBwcmljZSBldGMuXHJcbiAgICAgICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlbmFibGUgQWRkIHRvIGNhcnQgYnV0dG9uIGlmIGFsbCB0aGUgc3ViIHByb2R1Y3RzIGhhdmUgYmVlbiBzZWxlY3RlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmQgc2hvdyB0aGUgdXBkYXRlZCBwcmljZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW5hYmxlQWRkVG9DYXJ0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1YlByb2R1Y3RzID0gdGhpc1Byb2R1Y3Quc3ViUHJvZHVjdHM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcmljZSA9IG5ldyBOdW1iZXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3ViUHJvZHVjdHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoKHN1YlByb2R1Y3RzW2ldLnZhcmlhbnQgfHwgc3ViUHJvZHVjdHNbaV0ubWFzdGVyKSAmJiBzdWJQcm9kdWN0c1tpXS5zZWxlY3RlZFZhciA9PSBudWxsKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICghc3ViUHJvZHVjdHNbaV0uYnVuZGxlZCAmJiAoc3ViUHJvZHVjdHNbaV0uc2VsZWN0ZWRPcHRpb25zLlF1YW50aXR5ID09IHVuZGVmaW5lZCB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJQcm9kdWN0c1tpXS5zZWxlY3RlZE9wdGlvbnMuUXVhbnRpdHkgPD0gMCkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5hYmxlQWRkVG9DYXJ0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdWJQcm9kdWN0c1tpXS5zZWxlY3RlZFZhciAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YlByb2R1Y3RzW2ldLnNlbGVjdGVkT3B0aW9ucy5waWQgPSBzdWJQcm9kdWN0c1tpXS5zZWxlY3RlZFZhci5waWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViUHJvZHVjdHNbaV0uc2VsZWN0ZWRPcHRpb25zLnBpZCA9IHN1YlByb2R1Y3RzW2ldLnBpZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE11bHRpcGx5IHRoZSBzdWJwcm9kdWN0IHF1YW50aXR5LW9uZSBwcmljZSBieSB0aGUgZW50ZXJlZCBxdWFudGl0eS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbXBvcnRhbnQgbm90ZTogIFRoaXMgdmFsdWUgd2lsbCBiZSBpbmNvcnJlY3QgaWYgc3VicHJvZHVjdCB1c2VzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGllcmVkIHByaWNpbmcgISEhISFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3VicHJvZHVjdFF1YW50aXR5ID0gc3ViUHJvZHVjdHNbaV0uc2VsZWN0ZWRPcHRpb25zLlF1YW50aXR5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdWJwcm9kdWN0UXVhbnRpdHkgPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YnByb2R1Y3RRdWFudGl0eSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlICs9IG5ldyBOdW1iZXIoc3VicHJvZHVjdFF1YW50aXR5ICogc3ViUHJvZHVjdHNbaV0uZ2V0UHJpY2UoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbmFibGVBZGRUb0NhcnQgJiYgKG1vZGVsLnByb2R1Y3RTZXQgfHwgbW9kZWwuaW5TdG9jaykgJiYgKHByaWNlID4gMCB8fCB0aGlzUHJvZHVjdC5pc1Byb21vUHJpY2UoKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LmVuYWJsZUEyQ0J1dHRvbigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNob3cgdG90YWwgcHJpY2UgZXhjZXB0IGZvciBhIGJ1bmRsZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtb2RlbC5idW5kbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzUHJvZHVjdC5zaG93VXBkYXRlZFByaWNlKHByaWNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LmRpc2FibGVBMkNCdXR0b24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8vIGRldGVybWluZSBpZiBBMkMgYnV0dG9uIGlzIGVuYWJsZWQgb3IgZGlzYWJsZWRcclxuICAgICAgICAvLyB0cnVlIGlmIGVuYWJsZWQsIGZhbHNlIG90aGVyd2lzZVxyXG4gICAgICAgIGlzQTJDRW5hYmxlZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy52YXJpYW50IHx8IHRoaXMubWFzdGVyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFZhciAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICh0aGlzLnNlbGVjdGVkVmFyLmF2U3RhdHVzID09PSBDb25zdGFudHMuQVZBSUxfU1RBVFVTX0lOX1NUT0NLIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRWYXIuYXZTdGF0dXMgPT09IENvbnN0YW50cy5BVkFJTF9TVEFUVVNfQkFDS09SREVSIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRWYXIuYXZTdGF0dXMgPT09IENvbnN0YW50cy5BVkFJTF9TVEFUVVNfUFJFT1JERVIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKG1vZGVsLmF2U3RhdHVzID09PSBDb25zdGFudHMuQVZBSUxfU1RBVFVTX0lOX1NUT0NLIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kZWwuYXZTdGF0dXMgPT09IENvbnN0YW50cy5BVkFJTF9TVEFUVVNfQkFDS09SREVSIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kZWwuYXZTdGF0dXMgPT09IENvbnN0YW50cy5BVkFJTF9TVEFUVVNfUFJFT1JERVIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogd29yayBob3JzZSBvZiB0aGUgcHJvZHVjdCBkZXRhaWwgcGFnZSBnZXR0aW5nIGV2ZXJ5dGhpbmcgdGllZCB0b2dldGhlciBpLmUuIGFsbCB0aGUgZHluYW1pYyBzdHVmZlxyXG4gICAgICAgICAqIGFuZCBvbmUgdGltZSBpbml0aWFsaXphdGlvbi4gY2FsbGVkIG9ubHkgT05DRVxyXG4gICAgICAgICAqIGJpbmQgYWxsIHRoZSBwcm9kdWN0IGRpc3BsYXkgZXZlbnRzIGFuZCBoYW5kbGVyc1xyXG4gICAgICAgICAqIGxvYWQgdmFyaWFudHMgaW4gY2FzZSB0aGlzIGlzIGEgdmFyaWF0aW9uIHByb2R1Y3RcclxuICAgICAgICAgKiBiaW5kIHN1YnByb2R1Y3RzIGEyYyBidXR0b24gZW5hYmxlIGV2ZW50IGhhbmRsZXJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zLmNvdGFpbmVySWQgLSBpZCBvZiB0aGUgY29udGFpbmluZyBkaXZcclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucy5zb3VyY2UgLSBzb3VyY2Ugb2YgdGhpcyBwcm9kdWN0IHNob3cgcmVxdWVzdCwgbWFpbmx5IHF1aWNrdmlld1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHNob3c6IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIC8vIHByZXNlcnZlIHRoaXMgaW5zdGFuY2VcclxuICAgICAgICAgICAgdmFyIHRoaXNQcm9kdWN0ID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgIC8vIGJpbmQgVmFyaWF0aW9uc0xvYWRlZCB3aGljaCBnZXRzIGZpcmVkIHdoZW4gdGhlIHZhcmlhdGlvbiBkYXRhIGlzIHJlY2VpdmVkIGZyb20gdGhlIHNlcnZlclxyXG4gICAgICAgICAgICAvLyBhbmQgd2UgbmVlZCB0byByZWZyZXNoIHRoZSB1aVxyXG4gICAgICAgICAgICBqUXVlcnkodGhpcykuYmluZCgnVmFyaWF0aW9uc0xvYWRlZCcsIHt9LCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBlbmFibGUvZGlzYWJsZSB1bmF2YWlsYWJsZSB2YWx1ZXNcclxuICAgICAgICAgICAgICAgIC8vIGFuZCBzZXQgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCB2YWx1ZXNcclxuICAgICAgICAgICAgICAgIC8vIHJlc2V0IHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgdmFyaWF0aW9uIGF0dHJpYnV0ZXMgaS5lLiByZXNldCB0aGUgdWlcclxuICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LnJlc2V0VmFyaWF0aW9ucygpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIGNyZWF0ZSB0aGUgZGVmYXVsdCBhdmFpbGFiaWxpdHkgbWVzc2FnZSBiYXNlZCBvbiBBVFMgY291bnRcclxuICAgICAgICAgICAgICAgIC8vIGZyb20gdGhlIHZhcmlhbnRzXHJcbiAgICAgICAgICAgICAgICB2YXIgYXRzQ291bnQgPSBnZXRBVFMobW9kZWwudmFyaWF0aW9ucy52YXJpYW50cyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYXRzQ291bnQgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldEF2YWlsYWJpbGl0eU1zZygnPHNwYW4gY2xhc3M9XFwnb3V0LW9mLXN0b2NrXFwnPicgKyBSZXNvdXJjZXNbQ29uc3RhbnRzLkFWQUlMX1NUQVRVU19OT1RfQVZBSUxBQkxFXSArICc8L3NwYW4+Jyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBXZSB3aWxsIHVzZSB0aGlzIGluIHRoZSAybmQgb2YgdGhlIHR3byBmb2xsb3dpbmcgbG9vcHNcclxuICAgICAgICAgICAgICAgIHZhciBzb21lQXJlTm90U2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIC8vIERldGVybWluZSB0aGUgc2VsZWN0ZWQgc3RhdGUgb2YgZWFjaCBvcHRpb25cclxuICAgICAgICAgICAgICAgIHZhciAkYXR0cmlidXRlcyA9IGpRdWVyeSh0aGlzUHJvZHVjdC5jb250YWluZXJJZCArICcgLnZhcmlhdGlvbmF0dHJpYnV0ZXMgLnN3YXRjaGVzLCcgKyB0aGlzUHJvZHVjdC5jb250YWluZXJJZCArICcgLnZhcmlhdGlvbmF0dHJpYnV0ZXMgLnZhcmlhbnRkcm9wZG93bicpO1xyXG4gICAgICAgICAgICAgICAgJGF0dHJpYnV0ZXMuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyICR0aGlzID0galF1ZXJ5KHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkdGhpcy5oYXNDbGFzcygnc3dhdGNoZXMnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2lmIGl0IGlzIHN3YXRjaGVzLCBmaW5kIHRoZSBzZWxlY3RlZCBzd2F0Y2hcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCR0aGlzLmZpbmQoJy5zZWxlY3RlZCcpLnNpemUoKSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0Qm94ID0gJHRoaXMuZmluZCgnc2VsZWN0JykuZ2V0KDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJChzZWxlY3RCb3gpLmZpbmQoJ29wdGlvbicpLmxlbmd0aCA9PSAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHNlbGVjdEJveCkuZmluZCgnb3B0aW9uJykuZXEoMSkucHJvcCgnc2VsZWN0ZWQnLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0Qm94LnNlbGVjdGVkSW5kZXggPj0gMCAmJiBzZWxlY3RCb3gub3B0aW9uc1tzZWxlY3RCb3guc2VsZWN0ZWRJbmRleF0udmFsdWUgIT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSkuZWFjaChmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSBqUXVlcnkodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNvbWVBcmVOb3RTZWxlY3RlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKS5hZGRDbGFzcygnZnV0dXJlJykuZmluZCgnLnNlbGVjdGVkJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoJy5vcHRpb253cmFwcGVyJykuc2xpZGVVcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoISR0aGlzLmhhc0NsYXNzKCdzZWxlY3RlZCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc29tZUFyZU5vdFNlbGVjdGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy5hZGRDbGFzcygnY3VycmVudCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc29tZUFyZU5vdFNlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGl0J3Mgbm90IHRoZSBsYXN0IGl0ZW0sIGhpZGUgdGhlIHNlbGVjdGlvbnMgYW5kIGxlYXZlIHRoZSBidXR0b24gZW5hYmxlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJGF0dHJpYnV0ZXMuc2l6ZSgpIC0gMSAhPSBpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMuZmluZCgnLm9wdGlvbndyYXBwZXInKS5zbGlkZVVwKCkuZmluZCgnYnV0dG9uJykucmVtb3ZlQ2xhc3MoJ25vbi1zZWxlY3RhYmxlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2l0IGlzIHRoZSBsYXN0IGl0ZW0sIGFuZCBpdCdzIHNlbGVjdGVkLCBzbyBpdCdzIGN1cnJlbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpLmFkZENsYXNzKCdjdXJyZW50Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBHcmFiIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgdmFsdWVzIGFuZCB1cGRhdGUgdGhlIFVJXHJcbiAgICAgICAgICAgICAgICAvLyBzd2F0Y2ggdmFyaWF0aW9uIGF0dHJpYnV0ZXNcclxuICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzUHJvZHVjdC5jb250YWluZXJJZCArICcgLnZhcmlhdGlvbmF0dHJpYnV0ZXMgLnN3YXRjaGVzLCAnICsgdGhpc1Byb2R1Y3QuY29udGFpbmVySWQgKyAnIC52YXJpYXRpb25hdHRyaWJ1dGVzIC52YXJpYW50ZHJvcGRvd24gc2VsZWN0JykuZWFjaChmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRzd2F0Y2ggPSBqUXVlcnkodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzd2F0Y2hJZCA9ICRzd2F0Y2guZGF0YSgnZGF0YScpOyAgLy8gZGF0YSBpcyBpZCBzZXQgdmlhIGFwcC5oaWRkZW5EYXRhIGFwaVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1vZGVsLnZhcmlhdGlvbnMudmFyaWFudHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5zZWxlY3RlZEluZGV4ID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzd2F0Y2guZmluZCgnYS5zd2F0Y2hhbmNob3InKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyICR0aGlzID0galF1ZXJ5KHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3ZhciBwYXJlbnRMaSA9ICR0aGlzLnBhcmVudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmaW5kIEEgdmFyaWF0aW9uIHdpdGggdGhpcyB2YWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpbHRlcmVkVmFyaWFudHMgPSB0aGlzUHJvZHVjdC5maW5kVmFyaWF0aW9ucyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogc3dhdGNoSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWw6IHRoaXMudGl0bGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgbW9kZWwudmFyaWF0aW9ucy52YXJpYW50cyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHN3YXRjaC5oYXNDbGFzcygnY29sb3InKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFnZXRBdmFpbGFiaWxpdHkoZmlsdGVyZWRWYXJpYW50cykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHRoaXMuZmluZCgnLm91dC1vZi1zdG9jaycpLnNpemUoKSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy5wcmVwZW5kKCc8c3BhbiBjbGFzcz1cXCdvdXQtb2Ytc3RvY2tcXCc+PC9zcGFuPicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMuZmluZCgnLm91dC1vZi1zdG9jaycpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFnZXRBdmFpbGFiaWxpdHkoZmlsdGVyZWRWYXJpYW50cykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHRoaXMuZmluZCgnc3BhbicpLnRleHQoKS5pbmRleE9mKCdPdXQgb2YgU3RvY2snKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCR0aGlzLmZpbmQoJ3NwYW4nKS50ZXh0KCkuaW5kZXhPZignTmV3JykgIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy5maW5kKCdzcGFuJykuYWRkQ2xhc3MoJ291dG9mc3RvY2twZHAnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoJ3NwYW4nKS50ZXh0KCR0aGlzLmZpbmQoJ3NwYW4nKS50ZXh0KCkgKyAnIC8gT3V0IG9mIFN0b2NrJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy5maW5kKCdzcGFuJykuYWRkQ2xhc3MoJ291dG9mc3RvY2twZHAnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoJ3NwYW4nKS50ZXh0KCdPdXQgb2YgU3RvY2snKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCR0aGlzLmZpbmQoJ3NwYW4nKS50ZXh0KCkuaW5kZXhPZignTmV3JykgIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoJ3NwYW4nKS50ZXh0KCR0aGlzLmZpbmQoJ3NwYW4nKS50ZXh0KCkucmVwbGFjZSgnIC8gT3V0IG9mIFN0b2NrJywgJycpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMuZmluZCgnc3BhbicpLnRleHQoJHRoaXMuZmluZCgnc3BhbicpLnRleHQoKS5yZXBsYWNlKCdPdXQgb2YgU3RvY2snLCAnJykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHN3YXRjaC5maW5kKCdvcHRpb24nKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUgIT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmlsdGVyZWRWYXJpYW50cyA9IHRoaXNQcm9kdWN0LmZpbmRWYXJpYXRpb25zKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogc3dhdGNoSWQuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsOiB0aGlzLnZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBtb2RlbC52YXJpYXRpb25zLnZhcmlhbnRzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZ2V0QXZhaWxhYmlsaXR5KGZpbHRlcmVkVmFyaWFudHMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50ZXh0ID0gdGhpcy50ZXh0ICsgJyAtIE91dCBvZiBTdG9jayc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnNlbGVjdGVkSW5kZXggPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0aGlzU3dhdGNoID0galF1ZXJ5KHRoaXMpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGRwVmFySWQgPSB0aGlzU3dhdGNoLmRhdGEoJ2RhdGEnKTsgLy8gZGF0YSBpcyBpZCB3aGljaCBpcyBzZXQgdmlhIGFwcC5oaWRkZW5EYXRhIG9ubG9hZFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ3JhYiB0aGUgY3VycmVudGx5IHNlbGVjdGVkIHZhcmlhdGlvbiBhdHRyaWJ1dGUgdmFsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNTd2F0Y2guZmluZCgnLnNlbGVjdGVkIGEnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LnZhckF0dHJTZWxlY3RlZCh7ZGF0YToge2lkOiBwZHBWYXJJZCwgdmFsOiB0aGlzLnRpdGxlfX0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBub24tc3dhdGNoIHZhcmlhdGlvbiBhdHRyaWJ1dGVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkSW5kZXggPj0gMCAmJiB0aGlzLm9wdGlvbnNbdGhpcy5zZWxlY3RlZEluZGV4XS52YWx1ZSAhPSAnJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ3JhYiB0aGUgY3VycmVudGx5IHNlbGVjdGVkIHZhbCBieSBmaXJpbmcgdXBkYXRlIHVpIGFwaVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2hlbiBkZWFsaW5nIHdpdGggYSBzZWxlY3QgZWxlbWVudCwgZGF0YSByZXR1cm5zIGFuIG9iamVjdCBzbyB3ZSBtdXN0IGFzayBmb3IgaWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LnZhckF0dHJTZWxlY3RlZCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogalF1ZXJ5KHRoaXMpLmRhdGEoJ2RhdGEnKS5pZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsOiB0aGlzLm9wdGlvbnNbdGhpcy5zZWxlY3RlZEluZGV4XS52YWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICAgICAvLyBsb29wIHRocnUgYWxsIG5vbi1kcm9wZG93biB1aSBlbGVtZW50cyBpLmUuIHN3YXRjaGVzIGUuZy4gY29sb3IsIHdpZHRoLCBsZW5ndGggZXRjLlxyXG4gICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzLmNvbnRhaW5lcklkICsgXCIgLnZhcmlhdGlvbmF0dHJpYnV0ZXMgLnN3YXRjaGVzXCIpLmVhY2goZnVuY3Rpb24oKXtcclxuXHJcblx0XHRcdFx0fSk7Ki9cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lcklkID0gJyMnICsgb3B0aW9ucy5jb250YWluZXJJZDtcclxuICAgICAgICAgICAgdmFyIGlzUXVpY2tWaWV3ID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5zb3VyY2UgJiYgb3B0aW9ucy5zb3VyY2UgPT0gJ3F1aWNrdmlldycpIHtcclxuICAgICAgICAgICAgICAgIGlzUXVpY2tWaWV3ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVySWQgPSAnLnVpLWRpYWxvZyAjJyArIG9wdGlvbnMuY29udGFpbmVySWQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG15Q29udGFpbmVySWQgPSB0aGlzLmNvbnRhaW5lcklkO1xyXG5cclxuICAgICAgICAgICAgLy8gYmluZCBjbGljayBoYW5kbGVycyBmb3IgcHJldi9uZXh0IGxpbmtzXHJcbiAgICAgICAgICAgIGdldE5hdkxpbmtzKCk7XHJcblxyXG4gICAgICAgICAgICAvLyBzaXplIGNoYXJ0IGNsaWNrIGJpbmRpbmdcclxuICAgICAgICAgICAgZ2V0U2l6ZUNoYXJ0KCk7XHJcblxyXG4gICAgICAgICAgICAvLyB2YXJpYXRpb24gYXR0cmlidXRlcyBoYW5kbGluZyBpbiBjYXNlIGl0IGlzIGEgbWFzdGVyIG9yIGEgdmFyaWFudCBwcm9kdWN0XHJcbiAgICAgICAgICAgIGlmIChtb2RlbC5tYXN0ZXIgfHwgbW9kZWwudmFyaWFudCkge1xyXG4gICAgICAgICAgICAgICAgbG9hZFZhcmlhbnRzKHRoaXMpOyAvLyBtYWtlIGEgc2VydmVyIGNhbGwgdG8gbG9hZCB0aGUgdmFyaWFudHMsIHRoaXMgaXMgZHVlIHRvIHRoZSBwZXJmb3JtYW5jZSByZWFzb25zXHJcbiAgICAgICAgICAgICAgICAvLyBtZWFud2hpbGUgZGlzcGxheSB0aGUgYXZhaWxhYmxlIHZhcmlhdGlvbiBhdHRyaWJ1dGVzXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gYmluZCB0aGUgXCJuZXh0XCIgYnV0dG9ucyBpbiB0aGUgcGlja2VyXHJcbiAgICAgICAgICAgICAgICBqUXVlcnkoJ2J1dHRvbi5uZXh0JykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8qKnZhciAkdGhpcyA9IGpRdWVyeSh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICAgaWYoISR0aGlzLmhhc0NsYXNzKFwibm9uLXNlbGVjdGFibGVcIikpIHtcclxuXHRcdFx0XHRcdCR0aGlzLmNsb3Nlc3QoXCIuc3dhdGNoZXMsIC52YXJpYW50ZHJvcGRvd25cIikuZmluZChcIi5vcHRpb253cmFwcGVyXCIpLnNsaWRlVXAoNDAwLGZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0XHRcdGpRdWVyeSh0aGlzKS5jbG9zZXN0KFwiLnN3YXRjaGVzLCAudmFyaWFudGRyb3Bkb3duXCIpXHJcblx0XHRcdFx0XHRcdFx0LnJlbW92ZUNsYXNzKFwiY3VycmVudFwiKS5hZGRDbGFzcyhcInNlbGVjdGVkXCIpXHJcblx0XHRcdFx0XHRcdFx0Lm5leHRVbnRpbChcIi5zd2F0Y2hlcywgLnZhcmlhbnRkcm9wZG93blwiKS5uZXh0KClcclxuXHRcdFx0XHRcdFx0XHRcdC5hZGRDbGFzcyhcImN1cnJlbnRcIikucmVtb3ZlQ2xhc3MoXCJmdXR1cmVcIilcclxuXHRcdFx0XHRcdFx0XHRcdFx0LmZpbmQoXCIub3B0aW9ud3JhcHBlclwiKS5zbGlkZURvd24oKS5maW5kKCdzZWxlY3QnKS5jaGFuZ2UoKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fSovXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvL2JpbmQgdGhlIFwicHJldmlvdXNcIiBidXR0b25zIGluIHRoZSBwaWNrZXJcclxuICAgICAgICAgICAgICAgIGpRdWVyeSgnYS5wcmV2aW91cycpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xvc2VzdCgnLnN3YXRjaGVzLCAudmFyaWFudGRyb3Bkb3duJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnByZXZVbnRpbCgnLnN3YXRjaGVzLCAudmFyaWFudGRyb3Bkb3duJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnByZXYoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmluZCgnYS5maWx0ZXInKS5jbGljaygpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAkKCcuTWFnaWNab29tIGltZy5wcmltYXJ5LWltYWdlJykuYmluZCgnY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLm5ldy1zd2ltLC5vbGQtc3dpbScpLmFkZENsYXNzKCdzd2ltSGlkZScpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy92YXIgem9vbWVkQ29udGVudCA9ICQoJy5tei1leHBhbmQtc3RhZ2UnKS5odG1sKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5tei1idXR0b24tY2xvc2UnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcubmV3LXN3aW0sLm9sZC1zd2ltJykucmVtb3ZlQ2xhc3MoJ3N3aW1IaWRlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIDUwMCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIC8vIGNsaWNraW5nIG9uIGEgcHJldmlvdXMgc3RlcFxyXG4gICAgICAgICAgICAgICAgalF1ZXJ5KCcudmFyaWF0aW9uYXR0cmlidXRlcycpLmRlbGVnYXRlKCcuc2VsZWN0ZWQgYS5maWx0ZXInLCAnY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSBqUXVlcnkodGhpcykuY2xvc2VzdCgnLnNlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KCcudmFyaWF0aW9uYXR0cmlidXRlcyAuc3dhdGNoZXMsLnZhcmlhdGlvbmF0dHJpYnV0ZXMgLnZhcmlhbnRkcm9wZG93bicpLnJlbW92ZUNsYXNzKCdjdXJyZW50Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJykuYWRkQ2xhc3MoJ2N1cnJlbnQnKTtcclxuICAgICAgICAgICAgICAgICAgICAkdGhpcy5uZXh0QWxsKCcuc3dhdGNoZXMsIC52YXJpYW50ZHJvcGRvd24nKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyICR2YXJpYW50ID0galF1ZXJ5KHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkdmFyaWFudC5hZGRDbGFzcygnZnV0dXJlJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkdmFyaWFudC5oYXNDbGFzcygnc3dhdGNoZXMnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHZhcmlhbnQuZmluZCgnLnNlbGVjdGVkIGEnKS5jbGljaygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCR2YXJpYW50Lmhhc0NsYXNzKCd2YXJpYW50ZHJvcGRvd24nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRzZWxlY3QgPSAkdmFyaWFudC5maW5kKCdzZWxlY3QnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2VsZWN0LmZpbmQoJ29wdGlvbicpLnNpemUoKSA+IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2VsZWN0LnZhbCgnJykuY2hhbmdlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJy5zd2F0Y2hlc2Rpc3BsYXkgLnNlbGVjdGVkIGEnKS5jbGljaygpO1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50KCkuZmluZCgnc2VsZWN0JykudmFsKCcnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KCcudmFyaWF0aW9uYXR0cmlidXRlcycpLmZpbmQoJy5mdXR1cmUgLm9wdGlvbndyYXBwZXInKS5zbGlkZVVwKDQwMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkoJy5jdXJyZW50IC5vcHRpb253cmFwcGVyJykuc2xpZGVEb3duKDQwMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuZmlsdGVyIC52YWx1ZScpLnRleHQoJycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBqUXVlcnkoJy52YXJpYXRpb25hdHRyaWJ1dGVzJykuZmluZCgnLmN1cnJlbnQgLm9wdGlvbndyYXBwZXInKS5zbGlkZURvd24oNDAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmN1cnJlbnQnKS5maW5kKCcuZmlsdGVyIC52YWx1ZScpLnRleHQoJycpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gYmluZCB0aGUgXCJsZWFybiBtb3JlXCIgbGlua3NcclxuICAgICAgICAgICAgICAgIGpRdWVyeSgnc3Bhbi5sZWFybm1vcmUgYScpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGFkZCBsZWFybiBtb3JlIGRpYWxvZyBjb250YWluZXIgZGl2IGlmIGl0cyBub3QgYWRkZWQgeWV0XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gb25seSBhZGRlZCBvbmNlXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGpRdWVyeSgnI2xlYXJuTW9yZURpYWxvZycpLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSgnPGRpdj48L2Rpdj4nKS5hdHRyKCdpZCcsICdsZWFybk1vcmVEaWFsb2cnKS5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBsZWFybk1vcmVEaWFsb2cgPSBkaWFsb2cuY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICdsZWFybk1vcmVEaWFsb2cnLCBvcHRpb25zOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDUzMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiA4MDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogUmVzb3VyY2VzLlNJWkVDSEFSVF9USVRMRVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxlYXJuTW9yZURpYWxvZy5kaWFsb2coJ29wZW4nKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbWFrZSB0aGUgc2VydmVyIGNhbGwgdG8gbG9hZCB0aGUgbGVhcm4gbW9yZSBodG1sXHJcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KCcjbGVhcm5Nb3JlRGlhbG9nJykubG9hZCh0aGlzLmhyZWYpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gbG9vcCB0aHJ1IGFsbCB0aGUgc3dhdGNoZXMgYW5kIGJpbmQgZXZlbnRzIGV0Yy5cclxuICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzUHJvZHVjdC5jb250YWluZXJJZCArICcgLnZhcmlhdGlvbmF0dHJpYnV0ZXMgLnN3YXRjaGVzJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRoaXNTd2F0Y2ggPSBqUXVlcnkodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBkcFZhcklkID0gdGhpc1N3YXRjaC5kYXRhKCdkYXRhJyk7IC8vIGRhdGEgaXMgaWQgd2hpY2ggaXMgc2V0IHZpYSBhcHAuaGlkZGVuRGF0YSBvbmxvYWRcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYXR0ckRlZiA9IHRoaXNQcm9kdWN0LmdldEF0dHJCeUlEKHBkcFZhcklkKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhdHRyRGVmKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNsaWNrIGhhbmRsZXIgZm9yIHN3YXRjaGVzIGxpbmtzXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhckV2ZW50SGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0aGlzT2JqID0galF1ZXJ5KHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZS5kYXRhID0ge2lkOiBwZHBWYXJJZCwgdmFsOiB0aGlzLnRpdGxlfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzT2JqLnBhcmVudCgpLmhhc0NsYXNzKCd1bnNlbGVjdGFibGUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXNPYmoucGFyZW50KCkuaGFzQ2xhc3MoJ3NlbGVjdGVkJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlc2VsZWN0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmRhdGEgPSB7aWQ6IHBkcFZhcklkLCB2YWw6IG51bGx9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc09iai5wYXJlbnQoKS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNsZWFyIHRoZSBjdXJyZW50IHNlbGVjdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3QudmFyQXR0clNlbGVjdGVkKGUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LnJlc2V0VmFyaWF0aW9ucygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VsZWN0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmRhdGEgPSB7aWQ6IHBkcFZhcklkLCB2YWw6IHRoaXMudGl0bGV9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIHRoZSBjdXJyZW50IHNlbGVjdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1N3YXRjaC5maW5kKCcuc2VsZWN0ZWQnKS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzT2JqLmNsb3Nlc3QoJy5zd2F0Y2hlcycpLm5leHRVbnRpbCgnLnN3YXRjaGVzLCAudmFyaWFudGRyb3Bkb3duJykubmV4dCgpLnNpemUoKSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzT2JqLnBhcmVudCgpLmFkZENsYXNzKCdzZWxlY3RlZCcpLmNsb3Nlc3QoJy5zd2F0Y2hlcycpLmZpbmQoJ2J1dHRvbicpLnJlbW92ZUNsYXNzKCdub24tc2VsZWN0YWJsZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkdGhpcyA9IGpRdWVyeSh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISR0aGlzLmhhc0NsYXNzKCdub24tc2VsZWN0YWJsZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLmNsb3Nlc3QoJy5zd2F0Y2hlcycpLmZpbmQoJy5vcHRpb253cmFwcGVyJykuc2xpZGVVcCg0MDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzKS5jbG9zZXN0KCcuc3dhdGNoZXMnKS5yZW1vdmVDbGFzcygnY3VycmVudCcpLmFkZENsYXNzKCdzZWxlY3RlZCcpLm5leHRVbnRpbCgnLnN3YXRjaGVzJykubmV4dCgpLm5vdCgnLmNsZWFyJykuZmlyc3QoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcygnY3VycmVudCcpLnJlbW92ZUNsYXNzKCdmdXR1cmUnKS5maW5kKCcub3B0aW9ud3JhcHBlcicpLnNsaWRlRG93big0MDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMpLmZpbmQoJ3NlbGVjdCBvcHRpb24nKS5lYWNoKGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCQodGhpcykuY2xvc2VzdCgnc2VsZWN0JykuZmluZCgnb3B0aW9uJykubGVuZ3RoID09IDIgJiYgaW5kZXggPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykucHJvcCgnc2VsZWN0ZWQnLCB0cnVlKS50cmlnZ2VyKCdjaGFuZ2UnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyQodGhpcykuYXR0cignc2VsZWN0ZWQnLCdzZWxlY3RlZCcpLnRyaWdnZXIoJ2NoYW5nZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5maW5kKCdzZWxlY3QnKS5jaGFuZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzT2JqLnBhcmVudCgpLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3QudmFyQXR0clNlbGVjdGVkKGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYWxsIHN3dGFjaCBhbmNob3JzXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhckpxcnlPYmpzID0gdGhpc1N3YXRjaC5maW5kKCdhLnN3YXRjaGFuY2hvcicpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBpZiBpdHMgYSBjb2xvciBhdHRyIHRoZW4gcmVuZGVyIGl0cyBzd2F0Y2hlcyBhbmQgaW1hZ2VzXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBkcFZhcklkID09PSAnY29sb3InKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb2xvckF0dHJEZWYgPSB0aGlzUHJvZHVjdC5nZXRBdHRyQnlJRCgnY29sb3InKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhckpxcnlPYmpzLmVhY2goZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGdpdmVuIGEgdmFyaWF0aW9uIGF0dHIgdmFsdWUsIGZpbmQgaXRzIHN3YXRjaCBpbWFnZSB1cmxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaW5kU3dhdGNoID0gZnVuY3Rpb24gKHZhbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29sb3JBdHRyRGVmLnZhbHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbG9yQXR0ckRlZi52YWxzW2ldLnZhbCA9PT0gdmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29sb3JBdHRyRGVmLnZhbHNbaV0uaW1hZ2VzLnN3YXRjaDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJyc7IC8vIG5vIHN3YXRjaCBpbWFnZSBmb3VuZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3dhdGNoVXJsID0gKGZpbmRTd2F0Y2godGhpcy50aXRsZSkpLnVybDsgLy8gZmluZCBzd2F0Y2ggdXJsXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN3YXRjaFVybCAmJiBzd2F0Y2hVcmwgIT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2pRdWVyeSh0aGlzKS5jc3MoXCJjb2xvclwiLCBcInRyYW5zcGFyZW50XCIpLnBhcmVudCgpLmNzcyhcImJhY2tncm91bmRcIiwgXCJ1cmwoXCIgKyBzd2F0Y2hVcmwgKyBcIilcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMpLmNzcygndGV4dC1pbmRlbnQnLCAnLTk5OTlweCcpLnByZXBlbmQoJzxpbWcgYWx0PVwiJyArIHRoaXMudGl0bGUgKyAnXCIgc3JjPVwiJyArIHN3YXRjaFVybCArICdcIi8+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzKS5jc3MoJ2NvbG9yJywgJ3RyYW5zcGFyZW50Jyk7IC8vIG5vIHN3YXRjaCBpbWFnZSBmb3VuZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN3YXRjaGVzIGNsaWNrLCBob3ZlciBhbmQgbW91c2VsZWF2ZSBldmVudCBoYW5kbGVyc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXJKcXJ5T2Jqcy5kYXRhKCdkYXRhJywge2lkOiBwZHBWYXJJZH0pLmNsaWNrKHZhckV2ZW50SGFuZGxlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA+IDEwMjQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhckpxcnlPYmpzLmRhdGEoJ2RhdGEnLCB7aWQ6IHBkcFZhcklkfSkubW91c2VlbnRlcihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3Quc2hvd1NlbGVjdGVkVmFyQXR0clZhbCgnY29sb3InLCB0aGlzLnRpdGxlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzUHJvZHVjdC5zaG93SW1hZ2VzKHRoaXMudGl0bGUsIGNvbG9yQXR0ckRlZi52YWxzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLm1vdXNlbGVhdmUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzUHJvZHVjdC5zZWxlY3RlZFZhcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzUHJvZHVjdC5zaG93SW1hZ2VzKHRoaXNQcm9kdWN0LnNlbGVjdGVkVmFyLmlkLCBbe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3ZhbCc6IHRoaXNQcm9kdWN0LnNlbGVjdGVkVmFyLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2ltYWdlcyc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnb3JpZ2luYWwnOiBbeyd1cmwnOiBtb2RlbC5pbWFnZXMuem9vbXZhcmlhbnRzW3RoaXNQcm9kdWN0LnNlbGVjdGVkVmFyLmlkXX1dLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzbWFsbCc6IFt7J3VybCc6IG1vZGVsLmltYWdlcy52YXJpYW50c1t0aGlzUHJvZHVjdC5zZWxlY3RlZFZhci5pZF19XSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbGFyZ2UnOiBbeyd1cmwnOiBtb2RlbC5pbWFnZXMudmFyaWFudHNbdGhpc1Byb2R1Y3Quc2VsZWN0ZWRWYXIuaWRdfV1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpc1Byb2R1Y3Quc2VsZWN0ZWRWYXJBdHRyaWJzLmNvbG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LnNob3dJbWFnZXModGhpc1Byb2R1Y3Quc2VsZWN0ZWRWYXJBdHRyaWJzLmNvbG9yLCBjb2xvckF0dHJEZWYudmFscyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3Quc2hvd0ltYWdlcygnJywgW3t2YWw6ICcnLCBpbWFnZXM6IG1vZGVsLmltYWdlc31dKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LnNob3dTZWxlY3RlZFZhckF0dHJWYWwoJ2NvbG9yJywgdGhpc1Byb2R1Y3Quc2VsZWN0ZWRWYXJBdHRyaWJzLmNvbG9yIHx8ICcnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vdCBhIGNvbG9yIHN3YXRjaCwgd2Ugb25seSBoYXZlIGNsaWNrIGhhbmRsZXIgZm9yIHRoaXMgdHlwZSBvZiB2YXJpYXRpb24gYXR0cmlidXRlIGUuZy4gd2lkdGgsIGxlbmd0aCBldGMuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhckpxcnlPYmpzLmRhdGEoJ2RhdGEnLCB7aWQ6IHBkcFZhcklkfSkuY2xpY2sodmFyRXZlbnRIYW5kbGVyKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBqUXVlcnkodGhpc1Byb2R1Y3QuY29udGFpbmVySWQgKyAnIC52YXJpYXRpb25hdHRyaWJ1dGVzIC52YXJpYW50ZHJvcGRvd24gc2VsZWN0IG9wdGlvbicpLmVhY2goZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGpRdWVyeSh0aGlzUHJvZHVjdC5jb250YWluZXJJZCArICcgLnZhcmlhdGlvbmF0dHJpYnV0ZXMgLnZhcmlhbnRkcm9wZG93biBzZWxlY3Qgb3B0aW9uJykubGVuZ3RoID09IDIgJiYgaW5kZXggPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnByb3AoJ3NlbGVjdGVkJywgdHJ1ZSkudHJpZ2dlcignY2hhbmdlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gbG9vcCB0aHJ1IGFsbCB0aGUgbm9uLXN3YXRjaGVzIGF0dHJpYnV0ZXMgYW5kIGJpbmQgZXZlbnRzIGV0Yy5cclxuICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzUHJvZHVjdC5jb250YWluZXJJZCArICcgLnZhcmlhdGlvbmF0dHJpYnV0ZXMgLnZhcmlhbnRkcm9wZG93biBzZWxlY3QnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBkZWZhdWx0IHVpIGkuZS4gZHJvcCBkb3dueVxyXG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzKS5kYXRhKCdkYXRhJywge2lkOiBqUXVlcnkodGhpcykuZGF0YSgnZGF0YScpLCB2YWw6ICcnfSkuY2hhbmdlKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZXJlIGlzIG9ubHkgMSB2YWx1ZSB0byBiZSBzZWxlY3RlZCB0aGVuIHJldHVybiBpLmUuIG5vIGRlc2VsZWN0aW9uIGF2YWlsYWJsZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2lmICh0aGlzLnNlbGVjdGVkSW5kZXggPT0gMCAmJiB0aGlzLm9wdGlvbnMubGVuZ3RoID09IDEpIHsgcmV0dXJuOyB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlLmRhdGEgPSBqUXVlcnkodGhpcykuZGF0YSgnZGF0YScpOyAvLyBkYXRhIGlzIGlkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuc2VsZWN0ZWRJbmRleCA9PSAwLCBpdCBpcyBkZXNlbGVjdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlLmRhdGEudmFsID0gKHRoaXMuc2VsZWN0ZWRJbmRleCA9PSAwICYmIHRoaXMub3B0aW9ucy5sZW5ndGggPiAxKSA/IG51bGwgOiB0aGlzLm9wdGlvbnNbdGhpcy5zZWxlY3RlZEluZGV4XS52YWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkSW5kZXggPT0gMCAmJiB0aGlzLm9wdGlvbnMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVzZWxlY3Rpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8valF1ZXJ5KHRoaXMpLmNsb3Nlc3QoXCIudmFyaWFudGRyb3Bkb3duXCIpLmZpbmQoXCJidXR0b25cIikuYWRkQ2xhc3MoXCJub24tc2VsZWN0YWJsZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlbGVjdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9qUXVlcnkodGhpcykuY2xvc2VzdChcIi52YXJpYW50ZHJvcGRvd25cIikuZmluZChcImJ1dHRvblwiKS5yZW1vdmVDbGFzcyhcIm5vbi1zZWxlY3RhYmxlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMpLmNsb3Nlc3QoJy52YXJpYW50ZHJvcGRvd24nKS5maW5kKCcub3B0aW9ud3JhcHBlcicpLnNsaWRlVXAoNDAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMpLmNsb3Nlc3QoJy52YXJpYW50ZHJvcGRvd24nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ2N1cnJlbnQnKS5hZGRDbGFzcygnc2VsZWN0ZWQnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubmV4dFVudGlsKCcuZnV0dXJlJykubmV4dCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcygnY3VycmVudCcpLnJlbW92ZUNsYXNzKCdmdXR1cmUnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmluZCgnLm9wdGlvbndyYXBwZXInKS5zbGlkZURvd24oNDAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcykuZmluZCgnc2VsZWN0IG9wdGlvbicpLmVhY2goZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCQodGhpcykuY2xvc2VzdCgnc2VsZWN0JykuZmluZCgnb3B0aW9uJykubGVuZ3RoID09IDIgJiYgaW5kZXggPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnByb3AoJ3NlbGVjdGVkJywgdHJ1ZSkudHJpZ2dlcignY2hhbmdlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vJCh0aGlzKS5hdHRyKCdzZWxlY3RlZCcsJ3NlbGVjdGVkJykudHJpZ2dlcignY2hhbmdlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmZpbmQoJ3NlbGVjdCcpLmNoYW5nZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LnZhckF0dHJTZWxlY3RlZChlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRJbmRleCA9PSAwICYmIHRoaXMub3B0aW9ucy5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjbGVhciB0aGUgY3VycmVudCBzZWxlY3Rpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LnJlc2V0VmFyaWF0aW9ucygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpc1Byb2R1Y3Quc2VsZWN0ZWRWYXJBdHRyaWJzLmNvbG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gc2hvdyBzd2F0Y2ggcmVsYXRlZCBpbWFnZXMgZm9yIHRoZSBjdXJyZW50IHZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3Quc2hvd0ltYWdlcyh0aGlzUHJvZHVjdC5zZWxlY3RlZFZhckF0dHJpYnMuY29sb3IsIHRoaXNQcm9kdWN0LmdldEF0dHJCeUlEKCdjb2xvcicpLnZhbHMpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBzaG93IGltYWdlcyBhbmQgYmluZCBob3ZlciBldmVudCBoYW5kbGVycyBmb3Igc21hbGwvdGh1bWJuYWlscyB0byB0b2dnbGUgbGFyZ2UgaW1hZ2VcclxuICAgICAgICAgICAgICAgICAgICB0aGlzUHJvZHVjdC5zaG93SW1hZ2VzKCcnLCBbe3ZhbDogJycsIGltYWdlczogbW9kZWwuaW1hZ2VzfV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gc2hvdyBpbWFnZXMgYW5kIGJpbmQgaG92ZXIgZXZlbnQgaGFuZGxlcnMgZm9yIHNtYWxsL3RodW1ibmFpbHMgdG8gdG9nZ2xlIGxhcmdlIGltYWdlXHJcbiAgICAgICAgICAgICAgICB0aGlzUHJvZHVjdC5zaG93SW1hZ2VzKCcnLCBbe3ZhbDogJycsIGltYWdlczogbW9kZWwuaW1hZ2VzfV0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBiaW5kIHByb2R1Y3Qgb3B0aW9ucyBldmVudChzKVxyXG4gICAgICAgICAgICBnZXRPcHRpb25zRGl2KHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFtb2RlbC5wcm9kdWN0U2V0KSB7XHJcbiAgICAgICAgICAgICAgICAvLyBxdWFudGl0eSBib3hcclxuICAgICAgICAgICAgICAgIGlmICghbW9kZWwuYnVuZGxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2V0UXR5Qm94KHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtb2RlbC5idW5kbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB1cGRhdGUgYXZhaWFiaWxpdHkgZm9yIGEgYnVuZGxlIHByb2R1Y3QsIGZvciBldmVyeXRoaW5nIGVsc2UgaXRzIGRvbmUgaW5zaWRlIGdldFF0eUJveFxyXG4gICAgICAgICAgICAgICAgICAgIHNldEF2YWlsYWJpbGl0eU1zZyhjcmVhdGVBdk1lc3NhZ2UodGhpcywgMSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBBZGQgdG8gY2FydCBidXR0b24gY2xpY2sgYmluZGluZ1xyXG4gICAgICAgICAgICBnZXRBZGRUb0NhcnRCdG4odGhpcyk7XHJcbiAgICAgICAgICAgIC8vIGludGlhbCBkaXNwbGF5IG9mIEEyQyBidXR0b25cclxuICAgICAgICAgICAgLy8gaWYgdGhlIHByaWNlIGlzIDAgb3Igbm90IGF2YWlsYWJsZSwgaXRzIGRpc2FibGVkXHJcbiAgICAgICAgICAgIC8vIGlmIG5vdCBpbiBzdG9jaywgaXRzIGRpc2FibGVkXHJcbiAgICAgICAgICAgIC8vIGlzUHJvbW9QcmljZSB3b3VsZCBiZSB0cnVlIGluIGNhc2UgaWYgYSBwcm9kdWN0IGhhcyBhIHByb21vdGlvbmFsIHByaWNlIHdoaWNoIGNvdWxkIG1ha2UgcHJvZHVjdCdzIHByaWNlIDBcclxuICAgICAgICAgICAgaWYgKCEodGhpcy5nZXRQcmljZSgpID4gMCB8fCB0aGlzLmlzUHJvbW9QcmljZSgpKSB8fFxyXG4gICAgICAgICAgICAgICAgbW9kZWwubWFzdGVyIHx8IG1vZGVsLnZhcmlhbnQgfHwgbW9kZWwucHJvZHVjdFNldCB8fCBtb2RlbC5idW5kbGUgfHxcclxuICAgICAgICAgICAgICAgICghbW9kZWwuaW5TdG9jayAmJiBtb2RlbC5hdlN0YXR1cyA9PT0gQ29uc3RhbnRzLkFWQUlMX1NUQVRVU19OT1RfQVZBSUxBQkxFICYmICFtb2RlbC5wcm9kdWN0U2V0KSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNhYmxlQTJDQnV0dG9uKCk7XHJcbiAgICAgICAgICAgICAgICAvKiogaWYoKHRoaXMuZ2V0UHJpY2UoKSA9PSAwICYmICF0aGlzLmlzUHJvbW9QcmljZSgpKSkge1xyXG5cdFx0XHRcdFx0dGhpcy5oaWRlQXZhaWxhYmlsaXR5KCk7XHJcblx0XHRcdFx0fSovXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG1vZGVsLmF2U3RhdHVzID09PSBDb25zdGFudHMuQVZBSUxfU1RBVFVTX05PVF9BVkFJTEFCTEUpIHtcclxuICAgICAgICAgICAgICAgIC8vdGhpcy5yZW1vdmVBMkNCdXR0b24oKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gY3VzdG9tZXIgcmF0aW5nIHNlY3Rpb24gb25seSBkaXNwbGF5ZWQgZm9yIHRoZSBtYWluIHByb2R1Y3RcclxuICAgICAgICAgICAgaWYgKCFtb2RlbC5wcm9kdWN0U2V0UHJvZHVjdCAmJiAhbW9kZWwuYnVuZGxlZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFtb2RlbC5wcm9kdWN0U2V0ICYmICFpc1F1aWNrVmlldyAmJiAhbW9kZWwuYnVuZGxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2V0UmF0aW5nU2VjdGlvbih0aGlzLmNvbnRhaW5lcklkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gd2lzaCBsaXN0LCBzZW50IHRvIGZyaWVuZCwgYWRkIHRvIGdpZnRcclxuICAgICAgICAgICAgZ2V0TWlzY0xpbmtzKHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgLy8gcHJvZHVjdCB0YWJzXHJcbiAgICAgICAgICAgIGdldFRhYnModGhpcy5jb250YWluZXJJZCk7XHJcblxyXG4gICAgICAgICAgICAvLyBzZXR1cCBidW5kbGUvcHJvZHVjdCBzZXRcclxuICAgICAgICAgICAgdGhpcy5nZXRTdWJQcm9kdWN0c0JpbmRpbmcoKTtcclxuXHJcbiAgICAgICAgfSxcclxuICAgICAgICB0b1N0cmluZzogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tb2RlbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59OyAvLyBQcm9kdWN0IGRlZmludGlvbiBlbmRcclxudmFyIFByb2R1Y3RDYWNoZSA9IG51bGw7XHJcbnZhciBxdWlja3ZpZXdTaG93ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgIHZhciB1cmwgPSBvcHRpb25zLnVybDtcclxuICAgIHVybCA9IHVybCA9IHV0aWwuYXBwZW5kUGFyYW1Ub1VSTCh1cmwsICdzb3VyY2UnLCBvcHRpb25zLnNvdXJjZSk7XHJcbiAgICAkKCcjUXVpY2tWaWV3RGlhbG9nJykuaHRtbCgnJyk7XHJcbiAgICB2YXIgcXVpY2tWaWV3RGlhbG9nID0gZGlhbG9nLmNyZWF0ZSh7XHJcbiAgICAgICAgdGFyZ2V0OiAnI1F1aWNrVmlld0RpYWxvZycsXHJcbiAgICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgICAgICBoZWlnaHQ6IDUzMCxcclxuICAgICAgICAgICAgd2lkdGg6IDc2MCxcclxuICAgICAgICAgICAgZGlhbG9nQ2xhc3M6ICdxdWlja3ZpZXcnLFxyXG4gICAgICAgICAgICB0aXRsZTogUmVzb3VyY2VzLlFVSUNLX1ZJRVdfUE9QVVBcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIHF1aWNrVmlld0RpYWxvZy5kaWFsb2coJ29wZW4nKTtcclxuICAgIHByb2dyZXNzLnNob3coJyNRdWlja1ZpZXdEaWFsb2cnKTtcclxuXHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICQocXVpY2tWaWV3RGlhbG9nKS5odG1sKCcnKS5hcHBlbmQoZGF0YSk7XHJcbiAgICAgICAgICAgIHV0aWwuaGlkZGVuRGF0YSgpO1xyXG4gICAgICAgICAgICB2YXIgUHJvZHVjdENhY2hlID0gbnVsbDtcclxuICAgICAgICAgICAgdmFyIHByb2R1Y0pzb24gPSAkKCcjUXVpY2tWaWV3RGlhbG9nIC5wcm9kdWN0anNvbicpLmRhdGEoJ3Byb2R1Y3Rqc29uJyk7XHJcbiAgICAgICAgICAgIFByb2R1Y3RDYWNoZSA9IHByb2R1Y3QocHJvZHVjSnNvbik7XHJcbiAgICAgICAgICAgIFByb2R1Y3RDYWNoZS5zaG93KHtjb250YWluZXJJZDogJ3BkcE1haW4nLCBhcHBlbmQ6IGZhbHNlLCBzb3VyY2U6IG9wdGlvbnMuc291cmNlfSk7XHJcbiAgICAgICAgICAgIGFkZFRvQ2FydC5pbml0KCk7XHJcbiAgICAgICAgICAgICQoJ2JvZHknKS5maW5kKCcucXVhbnRpdHlpbnB1dCcpLm9mZigna2V5ZG93bicpLm9uKCdrZXlkb3duJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT0gMTMpIHtcclxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBwcm9ncmVzcy5oaWRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn07XHJcbnZhciBwZHBFdmVudHMgPSB7XHJcbiAgICBpbml0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdXRpbC5oaWRkZW5EYXRhKCk7XHJcbiAgICAgICAgdmFyIHByb2R1Y0pzb24gPSAkKCdib2R5JykuZmluZCgnLnByb2R1Y3Rqc29uJykuZGF0YSgncHJvZHVjdGpzb24nKTtcclxuICAgICAgICB2YXIgc291cmNlVmFsdWUgPSAkKCdib2R5JykuZmluZCgnLmh0dHAtc291cmNlJykudmFsKCk7XHJcbiAgICAgICAgUHJvZHVjdENhY2hlID0gcHJvZHVjdChwcm9kdWNKc29uKTtcclxuICAgICAgICBQcm9kdWN0Q2FjaGUuc2hvdyh7Y29udGFpbmVySWQ6ICdwZHBNYWluJywgYXBwZW5kOiBmYWxzZSwgc291cmNlOiBzb3VyY2VWYWx1ZX0pO1xyXG4gICAgICAgICQoJyN0YWJzJykuZmluZCgnYVtocmVmPVwiI3BkcFRhYjFcIl0nKS50cmlnZ2VyKCdjbGljaycpO1xyXG4gICAgICAgIC8vdmFyIGdldERhdGFPcHRpb24gPSAkKCcucHJvZHVjdC1wcmltYXJ5LWltYWdlJykuZmluZCgnYScpLmF0dHIoJ2RhdGEtb3B0aW9ucycpO1xyXG4gICAgICAgICQoJ2JvZHknKS5maW5kKCcucXVhbnRpdHlpbnB1dCcpLm9uKCdrZXlkb3duJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PSAxMykge1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJCgnI1F1YW50aXR5Jykua2V5dXAoZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICB2YXIga2V5ID0gZS5jaGFyQ29kZSB8fCBlLmtleUNvZGUgfHwgZS53aGljaCB8fCAwO1xyXG4gICAgICAgICAgICBpZiAoJC5pc051bWVyaWMoJCgnI1F1YW50aXR5JykudmFsKCkpICYmIChrZXkgPT0gMTMpKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcjYWRkLXRvLWNhcnQnKS50cmlnZ2VyKCdjbGljaycpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCEkLmlzTnVtZXJpYygkKCcjUXVhbnRpdHknKS52YWwoKSkpIHtcclxuICAgICAgICAgICAgICAgICQoJy5hZGR0b2NhcnRidXR0b246bGFzdCcpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAkKCcuYWRkdG9jYXJ0LCAuYWRkdG9jYXJ0YnV0dG9uJykuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS52YWwoKSA8IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCdhZGR0b2NhcnRidXR0b246bGFzdCcpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmFkZHRvY2FydCcpLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuYWRkdG9jYXJ0YnV0dG9uOmxhc3QnKS5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuYWRkdG9jYXJ0LCAuYWRkdG9jYXJ0YnV0dG9uJykucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLnlvdXR1YmUtbGlzdC12aWRlbyBhJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPiA0ODAgJiYgJCh3aW5kb3cpLndpZHRoKCkgPCA5NTkpIHtcclxuICAgICAgICAgICAgICAgIHV0aWwuc2Nyb2xsQnJvd3NlcigkKCcudGFiLXNlYycpLm9mZnNldCgpLnRvcCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPCA0ODEpIHtcclxuICAgICAgICAgICAgICAgIHV0aWwuc2Nyb2xsQnJvd3NlcigkKCcubW9iaWxlLXRhYnMtc2VjdGlvbiAudGFic0hlYWRlci52aWRlb1RhYicpLm9mZnNldCgpLnRvcCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLnZpZGVvLWxpbmsnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA+IDQ4MCkge1xyXG4gICAgICAgICAgICAgICAgdXRpbC5zY3JvbGxCcm93c2VyKCQoJy50YWItc2VjJykub2Zmc2V0KCkudG9wKTtcclxuICAgICAgICAgICAgICAgICQoJyN0YWJzICN2aWRlb1RhYicpLmZpbmQoJ2FbaHJlZj1cIiNwZHBWaWRlb1RhYlwiXScpLnRyaWdnZXIoJ2NsaWNrJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPCA0ODEpIHtcclxuICAgICAgICAgICAgICAgIHV0aWwuc2Nyb2xsQnJvd3NlcigkKCcubW9iaWxlLXRhYnMtc2VjdGlvbiAudGFic0hlYWRlci52aWRlb1RhYicpLm9mZnNldCgpLnRvcCk7XHJcbiAgICAgICAgICAgICAgICAkKCcudGFic0hlYWRlci52aWRlb1RhYicpLnBhcmVudCgnLm1vYmlsZS10YWJzLXNlY3Rpb24gJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCQoJy52aWRlb1RhYicpLmhhc0NsYXNzKCdsb2FkZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICQoJy52aWRlb1RhYicpLmFkZENsYXNzKCdsb2FkZWQnKTtcclxuICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSAkKCcjcGRwVmlkZW9UYWInKTtcclxuICAgICAgICAgICAgICAgIHZhciB1cmwgPSAkKCcjcHJvZHVjdFVSTCcpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgYWpheC5sb2FkKHtcclxuICAgICAgICAgICAgICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2h0bWwnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuaHRtbChkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoJyNhZGQtdG8tY2FydCcpLmJpbmQoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoJCgnI1F1YW50aXR5JykudmFsKCkgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcuYWRkZWR0by1jYXJ0b3ZlcmxheScpLmFkZENsYXNzKCdhZGRlZC1vdmVybGF5Jyk7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuYWRkZWR0by1jYXJ0b3ZlcmxheScpLnJlbW92ZUNsYXNzKCdhZGRlZC1vdmVybGF5Jyk7XHJcbiAgICAgICAgICAgICAgICB9LCAyMDAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoJyNRdWlja1ZpZXdEaWFsb2cgLnByb2R1Y3QtcHJpbWFyeS1pbWFnZScpLmZpbmQoJy5wcm9kdWN0LWltYWdlJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKCgkKCcucHJvdmlkZW8tc3BlYy1saW5rJykubGVuZ3RoID4gMCkpIHtcclxuICAgICAgICAgICAgaWYgKCEoJCgnLnZpZGVvLWxpbmsnKS5sZW5ndGggPiAwKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpID4gNDgwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLnByb2R1Y3RuYW1lLmgtb25lLXRhZycpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICd3aWR0aCc6ICdhdXRvJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ21hcmdpbi1ib3R0b20nOiAnLTI2cHgnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnZmxvYXQnOiAnbGVmdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdwYWRkaW5nLWJvdHRvbSc6ICc4cHgnXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPiA0ODApIHtcclxuICAgICAgICAgICAgICAgICQoJy5wcm9kdWN0bmFtZS5oLW9uZS10YWcnKS5jc3MoeydwYWRkaW5nLWJvdHRvbSc6ICc0cHgnfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5zcGVjQ2hhcnQtbGluaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpID4gNDgwKSB7XHJcbiAgICAgICAgICAgICAgICB1dGlsLnNjcm9sbEJyb3dzZXIoJCgnLnRhYi1zZWMnKS5vZmZzZXQoKS50b3ApO1xyXG4gICAgICAgICAgICAgICAgJCgnI3RhYnMnKS5maW5kKCdhW2hyZWY9XCIjc3BlY0NoYXJ0VGFiXCJdJykudHJpZ2dlcignY2xpY2snKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICgkKHdpbmRvdykud2lkdGgoKSA8IDQ4MSkge1xyXG4gICAgICAgICAgICAgICAgdXRpbC5zY3JvbGxCcm93c2VyKCQoJy5tb2JpbGUtdGFicy1zZWN0aW9uIC50YWJzSGVhZGVyLnNwZWNUYWInKS5vZmZzZXQoKS50b3ApO1xyXG4gICAgICAgICAgICAgICAgJCgnLnRhYnNIZWFkZXIuc3BlY1RhYicpLnBhcmVudCgnLm1vYmlsZS10YWJzLXNlY3Rpb24gJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyIHBkcFJlY29tZW5kYXRpb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBwZHBSZWNvbWVuZGF0aW9uQ2Fyb3VzZWwgPSAkKCcucHRfcHJvZHVjdC1kZXRhaWxzIC5qY2Fyb3VzZWxjb250IC5yZWNvbW1lbmRhdGlvbnMnKS5maW5kKCcucGRwcmVjb21vLW93bCcpO1xyXG4gICAgICAgICAgICBwZHBSZWNvbWVuZGF0aW9uQ2Fyb3VzZWwub3dsQ2Fyb3VzZWwoe1xyXG4gICAgICAgICAgICAgICAgbmF2OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgZG90czogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG5hdmlnYXRpb246IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgbmF2UmV3aW5kOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHJld2luZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBsb29wOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGl0ZW1zOiA1LFxyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2l2ZUNsYXNzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2l2ZToge1xyXG4gICAgICAgICAgICAgICAgICAgIDA6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6IDIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlQnk6IDJcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIDc2Nzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtczogMixcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVCeTogMlxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgNzY4OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zOiA1LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzbGlkZUJ5OiA1XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdmFyIHZpZXdwb3J0ID0galF1ZXJ5KHdpbmRvdykud2lkdGgoKTtcclxuICAgICAgICAgICAgdmFyIGl0ZW1Db3VudCA9IGpRdWVyeSgnLm93bC1jYXJvdXNlbCAuaXRlbScpLmxlbmd0aDtcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgKHZpZXdwb3J0ID49IDk1OSAmJiBpdGVtQ291bnQgPiA1KSAvL2Rlc2t0b3BcclxuICAgICAgICAgICAgICAgIHx8ICgodmlld3BvcnQgPj0gNDgxICYmIHZpZXdwb3J0IDwgNjAwKSAmJiBpdGVtQ291bnQgPiAzKSAvL3RhYmxldFxyXG4gICAgICAgICAgICAgICAgfHwgKHZpZXdwb3J0IDwgNDgwICYmIGl0ZW1Db3VudCA+IDIpIC8vbW9iaWxlXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgJCgnLnBkcHJlY29tby1vd2wnKS5maW5kKCcub3dsLXByZXYsIC5vd2wtbmV4dCcpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICQoJy5wZHByZWNvbW8tb3dsJykuZmluZCgnLm93bC1kb3RzJykuc2hvdygpO1xyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICQoJy5wZHByZWNvbW8tb3dsJykuZmluZCgnLm93bC1wcmV2LCAub3dsLW5leHQnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcucGRwcmVjb21vLW93bCcpLmZpbmQoJy5vd2wtZG90cycpLmhpZGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkKCcucHJvZHVjdC1saXN0aW5nJykuZmluZCgnaDIuaGlkZScpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSAkKCcub3dsLWl0ZW0nKS5oZWlnaHQoKTtcclxuICAgICAgICAgICAgJCgnLnBkcHJlY29tby1vd2wnKS5maW5kKCcub3dsLWl0ZW0nKS5maW5kKCcucHJvZHVjdC10aWxlLml0ZW0nKS5oZWlnaHQoaGVpZ2h0IC0gMTAwKTtcclxuICAgICAgICAgICAgJCgnLnB0X3Byb2R1Y3QtZGV0YWlscyAucHJvZHVjdC10aWxlIC5wcm9kdWN0LWltYWdlJykub24oJ21vdXNlZW50ZXInLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgJHF2QnV0dG9uID0gJCgnI3F1aWNrdmlld2J1dHRvbicpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCRxdkJ1dHRvbi5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAkcXZCdXR0b24gPSAkKCc8YSBpZD1cInF1aWNrdmlld2J1dHRvblwiIGNsYXNzPVwicXVpY2t2aWV3XCI+JyArIFJlc291cmNlcy5RVUlDS19WSUVXICsgJzxpIGNsYXNzPVwiZmEgZmEtYXJyb3dzLWFsdFwiPjwvaT48L2E+Jyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgJGxpbmsgPSAkKHRoaXMpLmZpbmQoJy50aHVtYi1saW5rJyk7XHJcbiAgICAgICAgICAgICAgICAkcXZCdXR0b24uYXR0cih7XHJcbiAgICAgICAgICAgICAgICAgICAgJ2hyZWYnOiAkbGluay5hdHRyKCdocmVmJyksXHJcbiAgICAgICAgICAgICAgICAgICAgJ3RpdGxlJzogJGxpbmsuYXR0cigndGl0bGUnKVxyXG4gICAgICAgICAgICAgICAgfSkuYXBwZW5kVG8odGhpcyk7XHJcbiAgICAgICAgICAgICAgICAkcXZCdXR0b24ub2ZmKCdjbGljaycpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cmw6ICQodGhpcykuYXR0cignaHJlZicpLCAvL1BSRVYgSklSQSBQUkVWLTI1NSA6UExQOiBPbiBDbGljayBRdWljayB2aWV3IG5hdmlnYXRpbmcgdG8gYSB3cm9uZyBwYWdlIHdoZW4gdXNlciBmaXJzdCBjaGFuZ2VzIHRoZSBzd2F0Y2hlcy4gVGFraW5nIG9ubHkgaHJlZi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlOiAncXVpY2t2aWV3J1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgcXVpY2t2aWV3U2hvdyhvcHRpb25zKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHNldFRpbWVvdXQocGRwUmVjb21lbmRhdGlvbiwgNTUwMCk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHBkcEV2ZW50cztcclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG52YXIgcHJvZ3Jlc3MgPSByZXF1aXJlKCcuLi9wcm9ncmVzcycpLFxyXG4gICAgdWlldmVudHMgPSByZXF1aXJlKCcuLi91aWV2ZW50cycpLFxyXG4gICAgdG9vbHRpcCA9IHJlcXVpcmUoJy4uL3Rvb2x0aXAnKSxcclxuICAgIHZhbGlkYXRvciA9IHJlcXVpcmUoJy4uL3ZhbGlkYXRvcicpLFxyXG4gICAgYWpheCA9IHJlcXVpcmUoJy4uL2FqYXgnKSxcclxuICAgIHV0aWwgPSByZXF1aXJlKCcuLi91dGlsJyk7XHJcblxyXG52YXIgcmFwYWxhaW5zaWRlciA9IHtcclxuICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0b29sdGlwLmluaXQoKTtcclxuICAgICAgICB2YWxpZGF0b3IuaW5pdCgpO1xyXG4gICAgICAgIHVpZXZlbnRzLmluaXQoKTtcclxuICAgICAgICBpZiAoalF1ZXJ5KCcjZGlhbG9nY29udGFpbmVyMTIzJykubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgalF1ZXJ5KGRvY3VtZW50LmJvZHkpLmFwcGVuZCgnPGRpdiBpZD1cXCdkaWFsb2djb250YWluZXIxMjNcXCcgY2xhc3M9XFwndmlwaW5zaWRlci1jb250YWluZXJcXCc+PC9kaXY+Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGpRdWVyeS5lYWNoKGpRdWVyeSgnZm9ybTpub3QoLnN1cHByZXNzKScpLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGpRdWVyeSh0aGlzKS52YWxpZGF0ZSh2YWxpZGF0b3Iuc2V0dGluZ3MpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB2YXIgJHZpcGluc2lkZXIgPSAkKCcudmlwaW5zaWRlci1jb250YWluZXInKTtcclxuICAgICAgICAgICAgLy92aXBmb3JtID0gJCgnLlZpcGluc2lkZXJGb3JtJyk7XHJcbiAgICAgICAgLy92YXIgdmFsaWRhdG9yaW5pdCA9ICQodGhpcykuY2xvc2VzdCgnZm9ybScpLnZhbGlkYXRlKCk7XHJcbiAgICAgICAgJCgnI1Bhc3N3b3JkUmVzZXQxMjMnKS5jbGljayhmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICR2aXBpbnNpZGVyLmxvYWQoVXJscy52aXBJbnNpZGVyLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkdmlwaW5zaWRlci5kaWFsb2coe1xyXG4gICAgICAgICAgICAgICAgICAgIGJnaWZyYW1lOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGF1dG9PcGVuOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBtb2RhbDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBvdmVybGF5OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuNSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogJ3doaXRlJ1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDM1OCxcclxuICAgICAgICAgICAgICAgICAgICBkaWFsb2dDbGFzczogJ3ZpcEluc2lkZXItZGxnJyxcclxuICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIG9wZW46IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHRpcC5pbml0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRvci5pbml0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVpZXZlbnRzLmluaXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmFwYWxhaW5zaWRlci5kaWFsb2dFdmVudHMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmFwYWxhaW5zaWRlci5mb3JtUHJlcGFyZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtU2VsZWN0b3I6ICcjVmlwaW5zaWRlckZvcm0nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWVTZWxlY3RvcjogJyNWSVBJbnNpZGVyLWZvcm0tc2JtdC1pZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnb3BhY2l0eSdcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhcGFsYWluc2lkZXIudmlwaW5zaWRlcmV2ZW50cygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPiAxMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYXBhbGFpbnNpZGVyLmN1c3RvbXNlbGVjdGV2ZW50c2IoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByYXBhbGFpbnNpZGVyLnRleHRhcmVhcmFwYWxhKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhcGFsYWluc2lkZXIuY2xlYXJidXR0b25mdW5jdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcucmVtb3ZlJykuY2xpY2soZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaWxlbmFtZSA9ICQodGhpcykuYXR0cignZGF0YS1maWxlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZm9ybSA9ICQodGhpcykuY2xvc2VzdCgnZm9ybScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9IGZvcm0uYXR0cignYWN0aW9uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmluYWxVUkwgPSB1dGlsLmFwcGVuZFBhcmFtVG9VUkwodXJsLCAnZmlsZW5hbWUnLCBmaWxlbmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhamF4LmxvYWQoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogZmluYWxVUkwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBqUXVlcnkoJyNkaWFsb2djb250YWluZXIxMjMnKS5kaWFsb2coJ29wZW4nKTtcclxuICAgICAgICAgICAgICAgICQod2luZG93KS5zY3JvbGxUb3AoMCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIGRpYWxvZ0V2ZW50czogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciAkdmlwaW5zaWRlciA9ICQoJy52aXBpbnNpZGVyLWNvbnRhaW5lcicpO1xyXG4gICAgICAgICAgICAvL3ZpcGZvcm0gPSAkKCcuVmlwaW5zaWRlckZvcm0nKTtcclxuICAgICAgICByYXBhbGFpbnNpZGVyLmNsZWFyYnV0dG9uZnVuY3QoKTtcclxuICAgICAgICAkdmlwaW5zaWRlci5maW5kKCcjVklQSW5zaWRlci1mb3JtLXNibXQtaWQnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHZhciBwcm9kaWQgPSAkKCcuZmllbGRzdGFmZiBmb3JtIC5keW4tY2F0LXNlbGVjdCBzZWxlY3QnKS5maW5kKCc6c2VsZWN0ZWQnKS52YWwoKTtcclxuICAgICAgICAgICAgaWYgKCQoJy50cmlnZ2VyX3NpbmdsZXVwbG9hZCcpLmlzKCc6dmlzaWJsZScpICYmIHByb2RpZCAhPSAnZG9uYXRpb24nKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoISgkKCcudmlwLXVwbG9hZGZvcm0taG9sZGVyIC5maWxlbGlzdCcpLmZpbmQoJy51cGRhdGV0ZXh0JykubGVuZ3RoICE9IDApKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLnZpcC11cGxvYWRmb3JtLWhvbGRlcicpLmZpbmQoJy5lbXB0eS1hdHRhY2htZW50LWVycm9yJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISQodGhpcykuY2xvc2VzdCgnZm9ybScpLnZhbGlkKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCEkKHRoaXMpLmNsb3Nlc3QoJ2Zvcm0nKS52YWxpZCgpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJCgnLnZpcC11cGxvYWRmb3JtLWhvbGRlcicpLmZpbmQoJy5lbXB0eS1hdHRhY2htZW50LWVycm9yJykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgdmFyIHZpcFVSTCA9ICQodGhpcykuY2xvc2VzdCgnZm9ybScpLmF0dHIoJ2FjdGlvbicpO1xyXG4gICAgICAgICAgICB2YXIgdmlwRGF0YSA9ICQodGhpcykuY2xvc2VzdCgnZm9ybScpLnNlcmlhbGl6ZSgpO1xyXG4gICAgICAgICAgICBwcm9ncmVzcy5zaG93KCQoJy5maWVsZHN0YWZmIGZvcm0nKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeSgnI21zZ2NvbnRpYW5lcicpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAkKCc8ZGl2Lz4nKS5hdHRyKCdpZCcsICdtc2djb250aWFuZXInKS5odG1sKCcgJykuYXBwZW5kVG8oZG9jdW1lbnQuYm9keSk7XHJcbiAgICAgICAgICAgIGFqYXgubG9hZCh7XHJcbiAgICAgICAgICAgICAgICB1cmw6IHZpcFVSTCxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHZpcERhdGEsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKHZpcERhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCdib2R5JykuZmluZCgnLnZpcEluc2lkZXItZGxnIC51aS1kaWFsb2ctdGl0bGViYXItY2xvc2UnKS50cmlnZ2VyKCdjbGljaycpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwcmVzZW50ID0gJCh2aXBEYXRhKS5maW5kKCcuZXhpdGluZ191c2VyJykubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aCA9IHByZXNlbnQgPiAwID8gJzMxNnB4JyA6ICczNThweCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodCA9IHByZXNlbnQgPiAwID8gJ2F1dG8nIDogJzE4NCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRsZ0NsYXNzID0gcHJlc2VudCA+IDAgPyAnZXhpc3Rpbmd1c2VyZGxnJyA6ICduZXd1c2VyZGxnJztcclxuICAgICAgICAgICAgICAgICAgICAkKCcjbXNnY29udGlhbmVyJykuZmluZCgnLnJlZ2NoZWNrJykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KCcjbXNnY29udGlhbmVyJykuYXBwZW5kKHZpcERhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeSgnI21zZ2NvbnRpYW5lcicpLmRpYWxvZyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJnaWZyYW1lOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRvT3BlbjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFsOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvdmVybGF5OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAnd2hpdGUnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiB3aWR0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBoZWlnaHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpYWxvZ0NsYXNzOiAndmlwSW5zaWRlci1kbGcgJyArIGRsZ0NsYXNzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcGVuOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBqUXVlcnkoJyNtc2djb250aWFuZXInKS5kaWFsb2coJ29wZW4nKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcudmlwSW5zaWRlci1kbGcudWktZGlhbG9nLmV4aXN0aW5ndXNlcmRsZyBidXR0b24uY2xvc2UsIC52aXBJbnNpZGVyLWRsZy51aS1kaWFsb2cubmV3dXNlcmRsZyBidXR0b24uY2xvc2UnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLnVpLWRpYWxvZycpLmZpbmQoJy51aS1kaWFsb2ctdGl0bGViYXItY2xvc2UnKS50cmlnZ2VyKCdjbGljaycpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKCcudmlwSW5zaWRlci1kbGcudWktZGlhbG9nLmV4aXN0aW5ndXNlcmRsZyBidXR0b24uY2xvc2UsIC52aXBJbnNpZGVyLWRsZy51aS1kaWFsb2cubmV3dXNlcmRsZyBidXR0b24uY2xvc2UnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLnVpLWRpYWxvZycpLmZpbmQoJy51aS1kaWFsb2ctdGl0bGViYXItY2xvc2UnKS50cmlnZ2VyKCdjbGljaycpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICR2aXBpbnNpZGVyLmZpbmQoJy50cmlnZ2VyX3NpbmdsZXVwbG9hZCBpbnB1dFt0eXBlPVwiZmlsZVwiXScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCQodGhpcykuY2xvc2VzdCgnLnZpcC11cGxvYWRmb3JtLWhvbGRlcicpLmZpbmQoJy5lbXB0eS1hdHRhY2htZW50LWVycm9yJykuaXMoJzp2aXNpYmxlJykpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLnZpcC11cGxvYWRmb3JtLWhvbGRlcicpLmZpbmQoJy5lbXB0eS1hdHRhY2htZW50LWVycm9yJykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vVklQIGluc2lkZXIgZHJvcGRvd24gY2hhbmdlXHJcbiAgICAgICAgJCgnLmZpZWxkc3RhZmYgZm9ybScpLmZpbmQoJy5keW4tY2F0LXNlbGVjdCBzZWxlY3QnKS5vZmYoJ2NoYW5nZScpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHZhciAkY3VyT2JqID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgdmFyIHByb2RpZCA9ICcnO1xyXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5jbG9zZXN0KCcuZHluLWNhdC1zZWxlY3QnKS5maW5kKCcuc2JIb2xkZXInKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRUZXh0ID0gJCh0aGlzKS5jbG9zZXN0KCcuZHluLWNhdC1zZWxlY3QnKS5maW5kKCcuc2JTZWxlY3RvcicpLnRleHQoKTtcclxuICAgICAgICAgICAgICAgIHByb2RpZCA9ICQodGhpcykuZmluZCgnb3B0aW9uW2xhYmVsPVwiJyArIHNlbGVjdGVkVGV4dCArICdcIl0nKS5hdHRyKCd2YWx1ZScpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcHJvZGlkID0gJCh0aGlzKS5maW5kKCc6c2VsZWN0ZWQnKS52YWwoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL2FsZXJ0KCQodGhpcykuZmluZCgnOnNlbGVjdGVkJykudmFsKCkpO1xyXG4gICAgICAgICAgICB2YXIgdXJsID0gVXJscy52aXBJbnNpZGVyRHluYW1pY0Zvcm1zO1xyXG5cclxuICAgICAgICAgICAgaWYgKHByb2RpZCA9PSAnZmllbGQnIHx8IHByb2RpZCA9PSAnc3BvcnRzJyB8fCBwcm9kaWQgPT0gJ2luZHVzdHJ5JyB8fCBwcm9kaWQgPT0gJ2RvbmF0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHByb2RpZCA9PSAnc3BvcnRzJykge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy52aXAtdXBsb2FkZm9ybS1ob2xkZXInKS5maW5kKCdzcGFuLnRleHQtaG9sZGVyLXVwbG9hZCcpLnJlcGxhY2VXaXRoKCc8c3BhbiBjbGFzcz1cInRleHQtaG9sZGVyLXVwbG9hZFwiPipVcGxvYWQgQnVzaW5lc3MgQ2FyZCBvciBQYXkgU3R1Yjwvc3Bhbj4nKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcudmlwLXVwbG9hZGZvcm0taG9sZGVyJykuZmluZCgnLnRyaWdnZXJfc2luZ2xldXBsb2FkIC5lbXB0eS1hdHRhY2htZW50LWVycm9yJykudGV4dCgnUGxlYXNlIHVwbG9hZCBCdXNpbmVzcyBjYXJkIG9yIFBheSBTdHViJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvZGlkID09ICdmaWVsZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcudmlwLXVwbG9hZGZvcm0taG9sZGVyJykuZmluZCgnc3Bhbi50ZXh0LWhvbGRlci11cGxvYWQnKS5yZXBsYWNlV2l0aCgnPHNwYW4gY2xhc3M9XCJ0ZXh0LWhvbGRlci11cGxvYWRcIj4qQXR0YWNoIFJlc3VtZTwvc3Bhbj4nKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcudmlwLXVwbG9hZGZvcm0taG9sZGVyJykuZmluZCgnLnRyaWdnZXJfc2luZ2xldXBsb2FkIC5lbXB0eS1hdHRhY2htZW50LWVycm9yJykudGV4dCgnUGxlYXNlIHVwbG9hZCB5b3VyIFJlc3VtZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHByb2RpZCA9PSAnaW5kdXN0cnknKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLnZpcC11cGxvYWRmb3JtLWhvbGRlcicpLmZpbmQoJ3NwYW4udGV4dC1ob2xkZXItdXBsb2FkJykucmVwbGFjZVdpdGgoJzxzcGFuIGNsYXNzPVwidGV4dC1ob2xkZXItdXBsb2FkXCI+KlVwbG9hZCBCdXNpbmVzcyBDYXJkPC9zcGFuPicpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy52aXAtdXBsb2FkZm9ybS1ob2xkZXInKS5maW5kKCcudHJpZ2dlcl9zaW5nbGV1cGxvYWQgLmVtcHR5LWF0dGFjaG1lbnQtZXJyb3InKS50ZXh0KCdQbGVhc2UgdXBsb2FkIGEgQnVzaW5lc3MgQ2FyZCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHByb2RpZCA9PSAnZG9uYXRpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLnZpcC11cGxvYWRmb3JtLWhvbGRlcicpLmZpbmQoJ3NwYW4udGV4dC1ob2xkZXItdXBsb2FkJykucmVwbGFjZVdpdGgoJzxzcGFuIGNsYXNzPVwidGV4dC1ob2xkZXItdXBsb2FkXCI+VXBsb2FkIEZseWVyPC9zcGFuPicpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vJCgnLnZpcC11cGxvYWRmb3JtLWhvbGRlcicpLmZpbmQoJy50cmlnZ2VyX3NpbmdsZXVwbG9hZCAuZW1wdHktYXR0YWNobWVudC1lcnJvcicpLnRleHQoJ1BsZWFzZSB1cGxvYWQgYSBGbHllcicpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vJCgnLnZpcC11cGxvYWRmb3JtLWhvbGRlcicpLmZpbmQoJ3NwYW4udGV4dC1ob2xkZXItdXBsb2FkJykuY2xvc2VzdCgnZm9ybScpLnJlbW92ZUNsYXNzKCd0cmlnZ2VyX3NpbmdsZXVwbG9hZCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJCgnLnZpcC11cGxvYWRmb3JtLWhvbGRlcicpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkKCcudmlwLXVwbG9hZGZvcm0taG9sZGVyJykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHByb2RpZCAhPSB1bmRlZmluZWQgJiYgcHJvZGlkICE9IG51bGwgJiYgcHJvZGlkLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHVybCA9IHVybCArICc/cHJvZGlkPScgKyBwcm9kaWQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHByb2dyZXNzLnNob3coJCgnLmZpZWxkc3RhZmYgZm9ybScpKTtcclxuICAgICAgICAgICAgYWpheC5sb2FkKHtcclxuICAgICAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCgkKCcuZmllbGRzdGFmZiBmb3JtIC5keW5hbWljLWNvbnRlbnQtaG9sZGVyLXZpcCcpICE9IHVuZGVmaW5lZCAmJiAkKCcuZmllbGRzdGFmZiBmb3JtIC5keW5hbWljLWNvbnRlbnQtaG9sZGVyLXZpcCcpLmxlbmd0aCA+IDApICYmICgkKGRhdGEpLmZpbHRlcignLnZpcGluc2lkZXItb25sb2FkLWRhdGEtaG9sZGVyJykgIT0gdW5kZWZpbmVkICYmICQoZGF0YSkuZmlsdGVyKCcudmlwaW5zaWRlci1vbmxvYWQtZGF0YS1ob2xkZXInKS5sZW5ndGggPiAwKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuZmllbGRzdGFmZiBmb3JtIC5keW5hbWljLWNvbnRlbnQtaG9sZGVyLXZpcCcpLmh0bWwoJChkYXRhKS5maWx0ZXIoJy52aXBpbnNpZGVyLW9ubG9hZC1kYXRhLWhvbGRlcicpLmh0bWwoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy50cmlnZ2VyX3NpbmdsZXVwbG9hZCAucHJvX2lkJykudmFsKHByb2RpZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRlT2JqID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZU9iai5zZXRUaW1lKGRhdGVPYmouZ2V0VGltZSgpICsgKDYwICogNjAgKiAxMDAwKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmNvb2tpZSA9ICdwcm9nY29va2llPScgKyBwcm9kaWQgKyAnOyBleHBpcmVzPScgKyBkYXRlT2JqLnRvVVRDU3RyaW5nKCkgKyAnOyBwYXRoPS8nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA+IDEyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhcGFsYWluc2lkZXIuY3VzdG9tc2VsZWN0ZXZlbnRzYigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhcGFsYWluc2lkZXIudGV4dGFyZWFyYXBhbGEoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmFwYWxhaW5zaWRlci5jbGVhcmJ1dHRvbmZ1bmN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhcGFsYWluc2lkZXIuZm9ybVByZXBhcmUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybVNlbGVjdG9yOiAnI1ZpcGluc2lkZXJGb3JtJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlU2VsZWN0b3I6ICcjVklQSW5zaWRlci1mb3JtLXNibXQtaWQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ29wYWNpdHknXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJGN1ck9iai5jbG9zZXN0KCcuZHluLWNhdC1zZWxlY3QnKS5maW5kKCcuc2JIb2xkZXInKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRUZXh0ID0gJGN1ck9iai5jbG9zZXN0KCcuZHluLWNhdC1zZWxlY3QnKS5maW5kKCcuc2JTZWxlY3RvcicpLnRleHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2RpZCA9ICRjdXJPYmouZmluZCgnb3B0aW9uW2xhYmVsPVwiJyArIHNlbGVjdGVkVGV4dCArICdcIl0nKS5hdHRyKCd2YWx1ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZGlkID0gJGN1ck9iai5maW5kKCc6c2VsZWN0ZWQnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvZGlkICE9ICdTZWxlY3QgQSBQcm9ncmFtJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmR5bi1jYXQtc2VsZWN0JykuZmluZCgnLmxhYmVsJykucmVtb3ZlQ2xhc3MoJ2Vycm9yb2NjdXJlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmR5bi1jYXQtc2VsZWN0JykuZmluZCgnLmxhYmVsIHNwYW4uZXJyb3JjbGllbnQuaW5wdXRsYWJlbCcpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmR5bi1jYXQtc2VsZWN0JykuZmluZCgnLmxhYmVsIHNwYW4nKS5yZW1vdmVDbGFzcygnaW5wdXRsYWJlbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmR5bi1jYXQtc2VsZWN0JykuZmluZCgnc2VsZWN0JykucmVtb3ZlQ2xhc3MoJ2Vycm9yY2xpZW50JykuYWRkQ2xhc3MoJ3ZhbGlkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCQoJy5maWxlbGlzdCcpLmZpbmQoJ3VsJykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmZpbGVsaXN0JykuZmluZCgndWwnKS5jc3MoeydkaXNwbGF5JzogJ25vbmUnfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIC8vIHN1YiBuYW1lc3BhY2UgYXBwLmFqYXguKiBjb250YWlucyBhcHBsaWNhdGlvbiBzcGVjaWZpYyBhamF4XHJcbiAgICAvLyBjb21wb25lbnRzXHJcbiAgICBhamF4OiB7XHJcbiAgICAgICAgU3VjY2VzczogJ3N1Y2Nlc3MnLFxyXG4gICAgICAgIGN1cnJlbnRSZXF1ZXN0czoge30sIC8vIHJlcXVlc3QgY2FjaGVcclxuXHJcbiAgICAgICAgLy8gYWpheCByZXF1ZXN0IHRvIGdldCBqc29uIHJlc3BvbnNlXHJcbiAgICAgICAgLy8gQHBhcmFtIC0gcmVxTmFtZSAtIFN0cmluZyAtIG5hbWUgb2YgdGhlIHJlcXVlc3RcclxuICAgICAgICAvLyBAcGFyYW0gLSBhc3luYyAtIGJvb2xlYW4gLSBhc3luY2hyb25vdXMgb3Igbm90XHJcbiAgICAgICAgLy8gQHBhcmFtIC0gdXJsIC0gU3RyaW5nIC0gdXJpIGZvciB0aGUgcmVxdWVzdFxyXG4gICAgICAgIC8vIEBwYXJhbSAtIGRhdGEgLSBuYW1lL3ZhbHVlIHBhaXIgZGF0YSByZXF1ZXN0XHJcbiAgICAgICAgLy8gQHBhcmFtIC0gY2FsbGJhY2sgLSBmdW5jdGlvbiAtIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZFxyXG4gICAgICAgIGdldEpzb246IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIHZhciB0aGlzQWpheCA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICAvLyBkbyBub3QgYm90aGVyIGlmIHRoZSByZXF1ZXN0IGlzIGFscmVhZHkgaW4gcHJvZ3Jlc3NcclxuICAgICAgICAgICAgLy8gYW5kIGxldCBnbyBudWxsIHJlcU5hbWVcclxuICAgICAgICAgICAgaWYgKCFvcHRpb25zLnJlcU5hbWUgfHwgIXRoaXMuY3VycmVudFJlcXVlc3RzW29wdGlvbnMucmVxTmFtZV0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFJlcXVlc3RzW29wdGlvbnMucmVxTmFtZV0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuYXN5bmMgPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmFzeW5jID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIG1ha2UgdGhlIHNlcnZlciBjYWxsXHJcbiAgICAgICAgICAgICAgICBqUXVlcnkuYWpheCh7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICAgICAgICAgICAgICAgIHVybDogb3B0aW9ucy51cmwsXHJcbiAgICAgICAgICAgICAgICAgICAgY2FjaGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgYXN5bmM6IG9wdGlvbnMuYXN5bmMsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogb3B0aW9ucy5kYXRhLFxyXG5cclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzcG9uc2UsIHRleHRTdGF0dXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc0FqYXguY3VycmVudFJlcXVlc3RzW29wdGlvbnMucmVxTmFtZV0gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2UuU3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaGFuZGxlIGZhaWx1cmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5jYWxsYmFjayhyZXNwb25zZSwgdGV4dFN0YXR1cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChyZXF1ZXN0LCB0ZXh0U3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZXh0U3RhdHVzID09PSAncGFyc2VyZXJyb3InKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydChSZXNvdXJjZXMuQkFEX1JFU1BPTlNFKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5jYWxsYmFjayh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHt9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgLy8gYWpheCByZXF1ZXN0IHRvIGxvYWQgaHRtbCByZXNwb25zZSBpbiBhIGdpdmVuIGNvbnRhaW5lclxyXG4gICAgICAgIC8vIEBwYXJhbSAtIHJlcU5hbWUgLSBTdHJpbmcgLSBuYW1lIG9mIHRoZSByZXF1ZXN0XHJcbiAgICAgICAgLy8gQHBhcmFtIC0gdXJsIC0gU3RyaW5nIC0gdXJpIGZvciB0aGUgcmVxdWVzdFxyXG4gICAgICAgIC8vIEBwYXJhbSAtIGRhdGEgLSBuYW1lL3ZhbHVlIHBhaXIgZGF0YSByZXF1ZXN0XHJcbiAgICAgICAgLy8gQHBhcmFtIC0gY2FsbGJhY2sgLSBmdW5jdGlvbiAtIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZFxyXG4gICAgICAgIC8vIEBwYXJhbSAtIHNlbGVjdG9yIC0gc3RyaW5nIC0gaWQgb2YgdGhlIGNvbnRhaW5lciBkaXYvc3BhblxyXG4gICAgICAgIC8vICgjbXljb250YWluZXIpIC0gaXQgbXVzdCBzdGFydCB3aXRoICcjJ1xyXG4gICAgICAgIGxvYWQ6IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgdGhpc0FqYXggPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgLy8gZG8gbm90IGJvdGhlciBpZiB0aGUgcmVxdWVzdCBpcyBhbHJlYWR5IGluIHByb2dyZXNzXHJcbiAgICAgICAgICAgIC8vIGFuZCBsZXQgZ28gbnVsbCByZXFuYW1lXHJcbiAgICAgICAgICAgIGlmICghb3B0aW9ucy5yZXFOYW1lIHx8ICF0aGlzLmN1cnJlbnRSZXF1ZXN0c1tvcHRpb25zLnJlcU5hbWVdKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRSZXF1ZXN0c1tvcHRpb25zLnJlcU5hbWVdID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIC8vIG1ha2UgdGhlIHNlcnZlciBjYWxsXHJcbiAgICAgICAgICAgICAgICBqUXVlcnkuYWpheCh7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdodG1sJyxcclxuICAgICAgICAgICAgICAgICAgICB1cmw6IG9wdGlvbnMudXJsLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhY2hlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IG9wdGlvbnMuZGF0YSxcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3BvbnNlLCB0ZXh0U3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNBamF4LmN1cnJlbnRSZXF1ZXN0c1tvcHRpb25zLnJlcU5hbWVdID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5zZWxlY3Rvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KG9wdGlvbnMuc2VsZWN0b3IpLmh0bWwocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5jYWxsYmFjayAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuY2FsbGJhY2socmVzcG9uc2UsIHRleHRTdGF0dXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChyZXF1ZXN0LCB0ZXh0U3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZXh0U3RhdHVzID09PSAncGFyc2VyZXJyb3InKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydChSZXNvdXJjZXMuQkFEX1JFU1BPTlNFKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5jYWxsYmFjayhudWxsLCB0ZXh0U3RhdHVzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgdmlwaW5zaWRlcmV2ZW50czogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciAkdmlwaW5zaWRlciA9ICQoJy52aXBpbnNpZGVyLWNvbnRhaW5lcicpO1xyXG4gICAgICAgICAgICAvL3ZpcGZvcm0gPSAkKCcuVmlwaW5zaWRlckZvcm0nKTtcclxuICAgICAgICAkdmlwaW5zaWRlci5maW5kKCcudHJpZ2dlcl9zaW5nbGV1cGxvYWQgaW5wdXRbdHlwZT1cImZpbGVcIl0nKS51bmJpbmQoJ2NoYW5nZScpLmNoYW5nZShmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCksXHJcbiAgICAgICAgICAgICAgICBkYXRhID0gbmV3IEZvcm1EYXRhKCksXHJcbiAgICAgICAgICAgICAgICBmaWxlcyA9ICQoJyNmaWxlaWQnKS5nZXQoMCkuZmlsZXMsXHJcbiAgICAgICAgICAgICAgICBmb3JtID0gJCh0aGlzKS5jbG9zZXN0KCdmb3JtJyk7XHJcbiAgICAgICAgICAgIC8vaWYoJCh0aGlzKS5oYXNDbGFzcygnZXJyb3JjbGllbnQnKSl7ICQodGhpcykudHJpZ2dlcignYmx1cicpOyB9XHJcbiAgICAgICAgICAgIHZhciB0b3RhbHNpemUgPSAwO1xyXG4gICAgICAgICAgICB0b3RhbHNpemUgPSAkKCcudmlwLXVwbG9hZGZvcm0taG9sZGVyIC5yZW1vdmVfc2luZ2xldXBsb2FkIHNwYW4udXBkYXRldGV4dCcpLmVxKDApLmF0dHIoJ3ZhbHVlJyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoKHRoaXMuZmlsZXNbMF0uc2l6ZSAvIDEwMjQgLyAxMDI0KSA+IDIgfHwgdG90YWxzaXplID4gMikge1xyXG4gICAgICAgICAgICAgICAgJHZpcGluc2lkZXIuZmluZCgnLnZpcC11cGxvYWRmb3JtLWhvbGRlciAuZmlsZS1zaXplLWV4Y2VlZC1lcnJvcicpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBleHRlbnNpb24gPSB0aGlzLmZpbGVzWzBdLm5hbWUuc3BsaXQoJy4nKVsxXS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICBpZiAoKGV4dGVuc2lvbiAhPSAnanBnJykgJiYgKGV4dGVuc2lvbiAhPSAncG5nJykgJiYgKGV4dGVuc2lvbiAhPSAnUE5HJykgJiYgKGV4dGVuc2lvbiAhPSAnanBlZycpICYmIChleHRlbnNpb24gIT0gJ3BkZicpICYmIChleHRlbnNpb24gIT0gJ2dpZicpICYmIChleHRlbnNpb24gIT0gJ2RvYycpICYmIChleHRlbnNpb24gIT0gJ2RvY3gnKSAmJiAoZXh0ZW5zaW9uICE9ICdwYWdlcycpKSB7XHJcbiAgICAgICAgICAgICAgICAkdmlwaW5zaWRlci5maW5kKCcudmlwLXVwbG9hZGZvcm0taG9sZGVyIC5maWxlLWZvcm1hdC1leGNlZWQtZXJyb3InKS5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAkdmlwaW5zaWRlci5maW5kKCcudmlwLXVwbG9hZGZvcm0taG9sZGVyIC5maWxlLWZvcm1hdC1leGNlZWQtZXJyb3InKS5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICAkdmlwaW5zaWRlci5maW5kKCcudmlwLXVwbG9hZGZvcm0taG9sZGVyIC5maWxlLXNpemUtZXhjZWVkLWVycm9yJykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgZm9ybS5maW5kKCcucHJvZ3Jlc3NiYXInKS5mYWRlSW4oNTAwKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmlsZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGRhdGEuYXBwZW5kKGZpbGVzW2ldLm5hbWUsIGZpbGVzW2ldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB4aHIudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoJ3Byb2dyZXNzJywgZnVuY3Rpb24gKGV2dCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGV2dC5sZW5ndGhDb21wdXRhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb2dyZXNzID0gTWF0aC5yb3VuZChldnQubG9hZGVkICogMTAwIC8gZXZ0LnRvdGFsKTtcclxuICAgICAgICAgICAgICAgICAgICBmb3JtLmZpbmQoJy5wcm9ncmVzc2JhciAuY291bnQnKS50ZXh0KHByb2dyZXNzICsgJyUgQ29tcGxldGUnKTtcclxuICAgICAgICAgICAgICAgICAgICBmb3JtLmZpbmQoJy5wcm9ncmVzc2JhciAucHJvZ3Jlc3Nsb2FkJykud2lkdGgocHJvZ3Jlc3MgKyAnJScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBmYWxzZSk7XHJcbiAgICAgICAgICAgIHhoci5vcGVuKCdQT1NUJywgZm9ybS5hdHRyKCdhY3Rpb24nKSk7XHJcbiAgICAgICAgICAgIHhoci5zZW5kKGRhdGEpO1xyXG5cclxuICAgICAgICAgICAgeGhyLnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKCdsb2FkZW5kJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgZm9ybS5maW5kKCcjZmlsZWlkJykudmFsKCcnKTtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcm0uZmluZCgnLnByb2dyZXNzYmFyJykuZmFkZU91dCgxMDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybS5maW5kKCcucHJvZ3Jlc3NiYXIgLmNvdW50JykudGV4dCgnMCUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybS5maW5kKCcucHJvZ3Jlc3NiYXIgLnByb2dyZXNzbG9hZCcpLndpZHRoKCcwJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9LCA1MDApO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcudmlwLXVwbG9hZGZvcm0taG9sZGVyIC5maWxlbGlzdCcpLmh0bWwoeGhyLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgICAgICByYXBhbGFpbnNpZGVyLnZpcGluc2lkZXJldmVudHMoKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpIDw9IDc2Nykge1xyXG4gICAgICAgICAgICAkKCcuaW5zaWRlcl9ib2R5LnJhcGFsYV9kZXZpY2UgW21heGxlbmd0aF0nKS5iaW5kKCdrZXlwcmVzcyBrZXl1cCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdmFsID0gJHRoaXMudmFsKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdmFsTGVuZ3RoID0gdmFsLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIHZhciBtYXhDb3VudCA9ICR0aGlzLmF0dHIoJ21heGxlbmd0aCcpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbExlbmd0aCA+IG1heENvdW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMudmFsKCR0aGlzLnZhbCgpLnN1YnN0cmluZygwLCBtYXhDb3VudCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICR2aXBpbnNpZGVyLmZpbmQoJy5yZW1vdmUnKS51bmJpbmQoJ2NsaWNrJykuY2xpY2soZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB2YXIgZmlsZW5hbWUgPSAkKHRoaXMpLmF0dHIoJ2RhdGEtZmlsZScpO1xyXG4gICAgICAgICAgICB2YXIgZm9ybSA9ICQodGhpcykuY2xvc2VzdCgnZm9ybScpO1xyXG4gICAgICAgICAgICB2YXIgdXJsID0gZm9ybS5hdHRyKCdhY3Rpb24nKTtcclxuICAgICAgICAgICAgdmFyIGZpbmFsVVJMID0gdXRpbC5hcHBlbmRQYXJhbVRvVVJMKHVybCwgJ2ZpbGVuYW1lJywgZmlsZW5hbWUpO1xyXG4gICAgICAgICAgICBhamF4LmxvYWQoe1xyXG4gICAgICAgICAgICAgICAgdXJsOiBmaW5hbFVSTCxcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy52aXAtdXBsb2FkZm9ybS1ob2xkZXIgLmZpbGVsaXN0JykuaHRtbChkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICByYXBhbGFpbnNpZGVyLnZpcGluc2lkZXJldmVudHMoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICBmb3JtUHJlcGFyZTogZnVuY3Rpb24gKG9wdHMpIHtcclxuXHJcbiAgICAgICAgdmFyICRmb3JtLCAkY29udGludWUsICRyZXF1aXJlZElucHV0cywgdmFsaWRhdG9yO1xyXG5cclxuICAgICAgICB2YXIgaGFzRW1wdHlSZXF1aXJlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gZmlsdGVyIG91dCBvbmx5IHRoZSB2aXNpYmxlIGZpZWxkc1xyXG4gICAgICAgICAgICB2YXIgcmVxdWlyZWRWYWx1ZXMgPSAkcmVxdWlyZWRJbnB1dHMuZmlsdGVyKCc6dmlzaWJsZScpLm1hcChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJCh0aGlzKS52YWwoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiAkLmluQXJyYXkoJycsIHJlcXVpcmVkVmFsdWVzKSAhPSAtMTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgdmFsaWRhdGVGb3JtID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBvbmx5IHZhbGlkYXRlIGZvcm0gd2hlbiBhbGwgcmVxdWlyZWQgZmllbGRzIGFyZSBmaWxsZWQgdG8gYXZvaWRcclxuICAgICAgICAgICAgLy8gdGhyb3dpbmcgZXJyb3JzIG9uIGVtcHR5IGZvcm1cclxuICAgICAgICAgICAgaWYgKCFoYXNFbXB0eVJlcXVpcmVkKCkgJiYgdmFsaWRhdG9yLmZvcm0oKSkge1xyXG4gICAgICAgICAgICAgICAgJGNvbnRpbnVlLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJykucmVtb3ZlQ2xhc3MoJ2J1dHRvbl9pbnZpc2libGUnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChvcHRzLnR5cGUgPT0gJ2Rpc2FibGUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGNvbnRpbnVlLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICRjb250aW51ZS5hZGRDbGFzcygnYnV0dG9uX2ludmlzaWJsZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIHZhbGlkYXRlRWwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLnZhbCgpID09PSAnJykge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdHMudHlwZSA9PSAnZGlzYWJsZScpIHtcclxuICAgICAgICAgICAgICAgICAgICAkY29udGludWUuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGNvbnRpbnVlLmFkZENsYXNzKCdidXR0b25faW52aXNpYmxlJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBlbmFibGUgY29udGludWUgYnV0dG9uIG9uIGxhc3QgcmVxdWlyZWQgZmllbGQgdGhhdCBpcyB2YWxpZFxyXG4gICAgICAgICAgICAgICAgLy8gb25seSB2YWxpZGF0ZSBzaW5nbGUgZmllbGRcclxuICAgICAgICAgICAgICAgIGlmICh2YWxpZGF0b3IuZWxlbWVudCh0aGlzKSAmJiAhaGFzRW1wdHlSZXF1aXJlZCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGNvbnRpbnVlLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJykucmVtb3ZlQ2xhc3MoJ2J1dHRvbl9pbnZpc2libGUnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdHMudHlwZSA9PSAnZGlzYWJsZScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGNvbnRpbnVlLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGNvbnRpbnVlLmFkZENsYXNzKCdidXR0b25faW52aXNpYmxlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvL3R5cGUgb3B0aW9uYWwgdmFsdWUgZGlzYWJsZSBvciBvcGFjaXR5XHJcbiAgICAgICAgJGZvcm0gPSAkKG9wdHMuZm9ybVNlbGVjdG9yKTtcclxuICAgICAgICAkY29udGludWUgPSAkKG9wdHMuY29udGludWVTZWxlY3Rvcik7XHJcbiAgICAgICAgdmFsaWRhdG9yID0gJGZvcm0udmFsaWRhdGUoKTtcclxuICAgICAgICAkcmVxdWlyZWRJbnB1dHMgPSAkKCcucmVxdWlyZWQnLCAkZm9ybSkuZmlsdGVyKCc6aW5wdXQnKTtcclxuICAgICAgICB2YWxpZGF0ZUZvcm0oKTtcclxuICAgICAgICAvLyBzdGFydCBsaXN0ZW5pbmdcclxuICAgICAgICAkcmVxdWlyZWRJbnB1dHMuY2hhbmdlKHZhbGlkYXRlRWwpO1xyXG4gICAgICAgICRyZXF1aXJlZElucHV0cy5maWx0ZXIoJ2lucHV0JykuYmx1cih2YWxpZGF0ZUVsKTtcclxuICAgIH0sXHJcblxyXG4gICAgY3VzdG9tc2VsZWN0ZXZlbnRzYjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghJCgnYm9keScpLmhhc0NsYXNzKCdyYXBhbGFfZGV2aWNlJykpIHtcclxuICAgICAgICAgICAgdmFyICRjb24gPSAkKCdib2R5Jyk7XHJcbiAgICAgICAgICAgICRjb24uZmluZCgnLmN1c3RvbWl6ZWQtc2VsZWN0JykuZmluZCgnc2VsZWN0JykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5hdHRyKCdkaXNhYmxlZCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5zZWxlY3Rib3goJ2Rpc2FibGUnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5zZWxlY3Rib3goKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICQoJy5zYk9wdGlvbnMgbGk6bGFzdCcpLmFkZENsYXNzKCdsYXN0Jyk7XHJcbiAgICAgICAgICAgIH0pLmZvY3VzKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykubmV4dCgnLnNiSG9sZGVyJykudHJpZ2dlcignZm9jdXMnKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9LFxyXG5cclxuICAgIHRleHRhcmVhcmFwYWxhOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgndGV4dGFyZWFbbWF4bGVuZ3RoXScpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjaGFyY291bnQoJCh0aGlzKSk7XHJcbiAgICAgICAgICAgIC8vIHRyaWdnZXIgdGhlIGtleWRvd24gZXZlbnQgc28gdGhhdCBhbnkgZXhpc3RpbmcgY2hhcmFjdGVyIGRhdGEgaXMgY2FsY3VsYXRlZFxyXG4gICAgICAgIH0pLm9uKCdrZXl1cCBrZXlwcmVzcycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY2hhcmNvdW50KCQodGhpcykpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBjaGFyY291bnQoJHRoaXMpIHtcclxuICAgICAgICAgICAgdmFyIGNoYXJhY3RlckxpbWl0ID0gJzEyMDAnO1xyXG4gICAgICAgICAgICB2YXIgY2hhclJlbWFpbnMgPSBjaGFyYWN0ZXJMaW1pdCAtICR0aGlzLnZhbCgpLnRyaW0oKS5sZW5ndGg7XHJcbiAgICAgICAgICAgIC8vdmFyIGNoYXJDb3VudENvbnRhaW5lciA9ICcnO1xyXG4gICAgICAgICAgICB2YXIgY2hhckNvdW50SHRtbCA9ICdDaGFyYWN0ZXJzIFJlbWFpbmluZyAnICsgY2hhclJlbWFpbnM7XHJcbiAgICAgICAgICAgIGlmICgkdGhpcy5oYXNDbGFzcygndmlwLXRleHRhcmVhJykpIHtcclxuICAgICAgICAgICAgICAgIGlmICgkdGhpcy5uZXh0KCdkaXYuY2hhci1jb3VudCcpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJzxkaXYgY2xhc3M9XCJjaGFyLWNvdW50XCIvPicpLmluc2VydEFmdGVyKCR0aGlzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICR0aGlzLm5leHQoJ2Rpdi5jaGFyLWNvdW50JykuaHRtbChjaGFyQ291bnRIdG1sKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICgkdGhpcy5wcmV2KCdkaXYuY2hhci1jb3VudCcpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJzxkaXYgY2xhc3M9XCJjaGFyLWNvdW50XCIvPicpLmluc2VydEJlZm9yZSgkdGhpcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkdGhpcy5wcmV2KCdkaXYuY2hhci1jb3VudCcpLmh0bWwoY2hhckNvdW50SHRtbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICBjbGVhcmJ1dHRvbmZ1bmN0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCQoJyNkaWFsb2djb250YWluZXIxMjMnKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICQoJyNkaWFsb2djb250YWluZXIxMjMnKS5maW5kKCcuZm9ybWZpZWxkJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5maW5kKCcuZmllbGQtd3JhcHBlciAuY2xlYXJidXR0b24nKS5sZW5ndGggPT0gMCAmJiAkKHRoaXMpLmZpbmQoJy5maWVsZC13cmFwcGVyIGlucHV0W3R5cGU9XCJ0ZXh0XCJdJykubGVuZ3RoID4gMCB8fCAkKHRoaXMpLmZpbmQoJy5maWVsZC13cmFwcGVyIGlucHV0W3R5cGU9XCJwYXNzd29yZFwiXScpLmxlbmd0aCA+IDAgfHwgJCh0aGlzKS5maW5kKCcuZmllbGQtd3JhcHBlciB0ZXh0YXJlYScpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5maWVsZC13cmFwcGVyJykuYXBwZW5kKCc8YSBjbGFzcz1cImNsZWFyYnV0dG9uXCI+PC9hPicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgJCgnYm9keScpLmZpbmQoJyNkaWFsb2djb250YWluZXIxMjMgLmZpZWxkLXdyYXBwZXIgaW5wdXQsIHRleHRhcmVhJykub24oJ2tleXVwIGlucHV0IGJsdXInLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLnZhbCgpICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCQodGhpcykudmFsKCkubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJ2EuY2xlYXJidXR0b24nKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJ2EuY2xlYXJidXR0b24nKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJCgnYm9keScpLmZpbmQoJyNkaWFsb2djb250YWluZXIxMjMgLmZpZWxkLXdyYXBwZXIgYS5jbGVhcmJ1dHRvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGNoYXJhY3RlckxpbWl0ID0gJ0NoYXJhY3RlcnMgUmVtYWluaW5nIDEyMDAnO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCdpbnB1dCcpLnZhbCgnJyk7XHJcbiAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJ3RleHRhcmVhJykudmFsKCcnKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZmllbGQtd3JhcHBlcicpLmZpbmQoJ3NwYW4nKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZmllbGQtd3JhcHBlcicpLmZpbmQoJy5yZXF1aXJlZCcpLnJlbW92ZUNsYXNzKCdlcnJvcmNsaWVudCcpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCdhLmNsZWFyYnV0dG9uJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQgJykuZmluZCgnLmZvcm0tcm93JykucmVtb3ZlQ2xhc3MoJ2lucHV0bGFiZWwnKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmZvcm0tcm93ICwgLmxhYmVsIHNwYW4nKS5yZW1vdmVDbGFzcygnaW5wdXRsYWJlbCcpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCdzcGFuLmxvZ2Vycm9yICwgLmV4aXN0aW5nX3JlZ2lzdGVyJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKCdkaXYuY2hhci1jb3VudCcpLmh0bWwoY2hhcmFjdGVyTGltaXQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxufTtcclxubW9kdWxlLmV4cG9ydHMgPSByYXBhbGFpbnNpZGVyO1xyXG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG52YXIgYWRkUHJvZHVjdFRvQ2FydCA9IHJlcXVpcmUoJy4vcHJvZHVjdC9hZGRUb0NhcnQnKSxcclxuICAgIGFqYXggPSByZXF1aXJlKCcuLi9hamF4JyksXHJcbiAgICBxdWlja3ZpZXcgPSByZXF1aXJlKCcuLi9xdWlja3ZpZXcnKSxcclxuICAgIGFjY291bnQgPSByZXF1aXJlKCcuL2FjY291bnQnKSxcclxuICAgIHV0aWwgPSByZXF1aXJlKCcuLi91dGlsJyk7XHJcblxyXG4vKipcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBkZXNjcmlwdGlvbiBMb2FkcyBhZGRyZXNzIGRldGFpbHMgdG8gYSBnaXZlbiBhZGRyZXNzIGFuZCBmaWxscyB0aGUgYWRkcmVzcyBmb3JtXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBhZGRyZXNzSUQgVGhlIElEIG9mIHRoZSBhZGRyZXNzIHRvIHdoaWNoIGRhdGEgd2lsbCBiZSBsb2FkZWRcclxuICovXHJcbmZ1bmN0aW9uIHBvcHVsYXRlRm9ybShhZGRyZXNzSUQsICRmb3JtKSB7XHJcbiAgICAvLyBsb2FkIGFkZHJlc3MgZGV0YWlsc1xyXG4gICAgdmFyIHVybCA9IFVybHMuZ2lmdFJlZ0FkZCArIGFkZHJlc3NJRDtcclxuICAgIGFqYXguZ2V0SnNvbih7XHJcbiAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGlmICghZGF0YSB8fCAhZGF0YS5hZGRyZXNzKSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuYWxlcnQoUmVzb3VyY2VzLlJFR19BRERSX0VSUk9SKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBmaWxsIHRoZSBmb3JtXHJcbiAgICAgICAgICAgICRmb3JtLmZpbmQoJ1tuYW1lJD1cIl9hZGRyZXNzaWRcIl0nKS52YWwoZGF0YS5hZGRyZXNzLklEKTtcclxuICAgICAgICAgICAgJGZvcm0uZmluZCgnW25hbWUkPVwiX2ZpcnN0bmFtZVwiXScpLnZhbChkYXRhLmFkZHJlc3MuZmlyc3ROYW1lKTtcclxuICAgICAgICAgICAgJGZvcm0uZmluZCgnW25hbWUkPVwiX2xhc3RuYW1lXCJdJykudmFsKGRhdGEuYWRkcmVzcy5sYXN0TmFtZSk7XHJcbiAgICAgICAgICAgICRmb3JtLmZpbmQoJ1tuYW1lJD1cIl9hZGRyZXNzMVwiXScpLnZhbChkYXRhLmFkZHJlc3MuYWRkcmVzczEpO1xyXG4gICAgICAgICAgICAkZm9ybS5maW5kKCdbbmFtZSQ9XCJfYWRkcmVzczJcIl0nKS52YWwoZGF0YS5hZGRyZXNzLmFkZHJlc3MyKTtcclxuICAgICAgICAgICAgJGZvcm0uZmluZCgnW25hbWUkPVwiX2NpdHlcIl0nKS52YWwoZGF0YS5hZGRyZXNzLmNpdHkpO1xyXG4gICAgICAgICAgICAkZm9ybS5maW5kKCdbbmFtZSQ9XCJfY291bnRyeVwiXScpLnZhbChkYXRhLmFkZHJlc3MuY291bnRyeUNvZGUpLnRyaWdnZXIoJ2NoYW5nZScpO1xyXG4gICAgICAgICAgICAkZm9ybS5maW5kKCdbbmFtZSQ9XCJfcG9zdGFsXCJdJykudmFsKGRhdGEuYWRkcmVzcy5wb3N0YWxDb2RlKTtcclxuICAgICAgICAgICAgJGZvcm0uZmluZCgnW25hbWUkPVwiX3N0YXRlXCJdJykudmFsKGRhdGEuYWRkcmVzcy5zdGF0ZUNvZGUpO1xyXG4gICAgICAgICAgICAkZm9ybS5maW5kKCdbbmFtZSQ9XCJfcGhvbmVcIl0nKS52YWwoZGF0YS5hZGRyZXNzLnBob25lKTtcclxuICAgICAgICAgICAgLy8gJGZvcm0ucGFyZW50KCdmb3JtJykudmFsaWRhdGUoKS5mb3JtKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAcHJpdmF0ZVxyXG4gKiBAZnVuY3Rpb25cclxuICogQGRlc2NyaXB0aW9uIEluaXRpYWxpemVzIGV2ZW50cyBmb3IgdGhlIGdpZnQgcmVnaXN0cmF0aW9uXHJcbiAqL1xyXG5mdW5jdGlvbiBpbml0aWFsaXplRXZlbnRzKCkge1xyXG4gICAgdmFyICRldmVudEFkZHJlc3NGb3JtID0gJCgnZm9ybVtuYW1lJD1cIl9naWZ0cmVnaXN0cnlcIl0nKSxcclxuICAgICAgICAkYmVmb3JlQWRkcmVzcyA9ICRldmVudEFkZHJlc3NGb3JtLmZpbmQoJ2ZpZWxkc2V0W25hbWU9XCJhZGRyZXNzLWJlZm9yZVwiXScpLFxyXG4gICAgICAgICRhZnRlckFkZHJlc3MgPSAkZXZlbnRBZGRyZXNzRm9ybS5maW5kKCdmaWVsZHNldFtuYW1lPVwiYWRkcmVzcy1hZnRlclwiXScpO1xyXG5cclxuICAgICQoJy51c2VwcmVldmVudCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBmaWx0ZXIgb3V0IHN0b3JlZnJvbnQgdG9vbGtpdFxyXG4gICAgICAgICQoJzppbnB1dCcsICRiZWZvcmVBZGRyZXNzKS5ub3QoJ1tpZF49XCJleHRcIl0nKS5ub3QoJ3NlbGVjdFtuYW1lJD1cIl9hZGRyZXNzQmVmb3JlTGlzdFwiXScpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZmllbGROYW1lID0gJCh0aGlzKS5hdHRyKCduYW1lJyksXHJcbiAgICAgICAgICAgICAgICAkYWZ0ZXJGaWVsZCA9ICRhZnRlckFkZHJlc3MuZmluZCgnW25hbWU9XCInICsgZmllbGROYW1lLnJlcGxhY2UoJ0JlZm9yZScsICdBZnRlcicpICsgJ1wiXScpO1xyXG4gICAgICAgICAgICAkYWZ0ZXJGaWVsZC52YWwoJCh0aGlzKS52YWwoKSkudHJpZ2dlcignY2hhbmdlJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkZXZlbnRBZGRyZXNzRm9ybS5vbignY2hhbmdlJywgJ3NlbGVjdFtuYW1lJD1cIl9hZGRyZXNzQmVmb3JlTGlzdFwiXScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYWRkcmVzc0lEID0gJCh0aGlzKS52YWwoKTtcclxuICAgICAgICBpZiAoYWRkcmVzc0lELmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHBvcHVsYXRlRm9ybShhZGRyZXNzSUQsICRiZWZvcmVBZGRyZXNzKTtcclxuICAgIH0pXHJcbiAgICAgICAgLm9uKCdjaGFuZ2UnLCAnc2VsZWN0W25hbWUkPVwiX2FkZHJlc3NBZnRlckxpc3RcIl0nLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBhZGRyZXNzSUQgPSAkKHRoaXMpLnZhbCgpO1xyXG4gICAgICAgICAgICBpZiAoYWRkcmVzc0lELmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHBvcHVsYXRlRm9ybShhZGRyZXNzSUQsICRhZnRlckFkZHJlc3MpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICQoJ2Zvcm1bbmFtZSQ9XCJfZ2lmdHJlZ2lzdHJ5X2l0ZW1zXCJdJykub24oJ2NsaWNrJywgJy5pdGVtLWRldGFpbHMgYScsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHZhciBwcm9kdWN0TGlzdElEID0gJCgnaW5wdXRbbmFtZT1wcm9kdWN0TGlzdElEXScpLnZhbCgpO1xyXG4gICAgICAgIHF1aWNrdmlldy5zaG93KHtcclxuICAgICAgICAgICAgdXJsOiBlLnRhcmdldC5ocmVmLFxyXG4gICAgICAgICAgICBzb3VyY2U6ICdnaWZ0cmVnaXN0cnknLFxyXG4gICAgICAgICAgICBwcm9kdWN0bGlzdGlkOiBwcm9kdWN0TGlzdElEXHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgaW5pdGlhbGl6ZUV2ZW50cygpO1xyXG4gICAgYWRkUHJvZHVjdFRvQ2FydCgpO1xyXG4gICAgLy9TdGFydCBKSVJBIFBSRVYtMzMzIDogT24gY2xpY2sgb2YgRm9yZ290IFBhc3N3b3JkIGxpbmsgbmF2aWdhdGVzIHRvIHRoZSBwYWdlIGluc3RlYWQgb2Ygb3ZlcmxheS5cclxuICAgIGFjY291bnQuaW5pdENhcnRMb2dpbigpO1xyXG4gICAgdXRpbC5zZXREZWxldGVDb25maXJtYXRpb24oJy5pdGVtLWxpc3QnLCBTdHJpbmcuZm9ybWF0KFJlc291cmNlcy5DT05GSVJNX0RFTEVURSwgUmVzb3VyY2VzLlRJVExFX0dJRlRSRUdJU1RSWSkpO1xyXG59O1xyXG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG52YXIgY29tcGFyZVdpZGdldCA9IHJlcXVpcmUoJy4uL2NvbXBhcmUtd2lkZ2V0JyksXHJcbiAgICBwcm9kdWN0VGlsZSA9IHJlcXVpcmUoJy4uL3Byb2R1Y3QtdGlsZScpLFxyXG4gICAgcHJvZ3Jlc3MgPSByZXF1aXJlKCcuLi9wcm9ncmVzcycpLFxyXG4gICAgdWlldmVudHMgPSByZXF1aXJlKCcuLi91aWV2ZW50cycpLFxyXG4gICAgLy9pbWFnZXNMb2FkZWQgPSByZXF1aXJlKCdpbWFnZXNsb2FkZWQnKSxcclxuICAgIHV0aWwgPSByZXF1aXJlKCcuLi91dGlsJyk7XHJcblxyXG5mdW5jdGlvbiBpbmZpbml0ZVNjcm9sbCgpIHtcclxuICAgIC8vIGdldHRpbmcgdGhlIGhpZGRlbiBkaXYsIHdoaWNoIGlzIHRoZSBwbGFjZWhvbGRlciBmb3IgdGhlIG5leHQgcGFnZVxyXG4gICAgdmFyIGxvYWRpbmdQbGFjZUhvbGRlciA9ICQoJy5pbmZpbml0ZS1zY3JvbGwtcGxhY2Vob2xkZXJbZGF0YS1sb2FkaW5nLXN0YXRlPVwidW5sb2FkZWRcIl0nKTtcclxuICAgIC8vIGdldCB1cmwgaGlkZGVuIGluIERPTVxyXG4gICAgdmFyIGdyaWRVcmwgPSBsb2FkaW5nUGxhY2VIb2xkZXIuYXR0cignZGF0YS1ncmlkLXVybCcpO1xyXG4gICAgaWYgKGxvYWRpbmdQbGFjZUhvbGRlci5sZW5ndGggPT09IDEgJiYgdXRpbC5lbGVtZW50SW5WaWV3cG9ydChsb2FkaW5nUGxhY2VIb2xkZXIuZ2V0KDApLCAyNTApKSB7XHJcbiAgICAgICAgLy8gc3dpdGNoIHN0YXRlIHRvICdsb2FkaW5nJ1xyXG4gICAgICAgIC8vIC0gc3dpdGNoZXMgc3RhdGUsIHNvIHRoZSBhYm92ZSBzZWxlY3RvciBpcyBvbmx5IG1hdGNoaW5nIG9uY2VcclxuICAgICAgICAvLyAtIHNob3dzIGxvYWRpbmcgaW5kaWNhdG9yXHJcbiAgICAgICAgbG9hZGluZ1BsYWNlSG9sZGVyLmF0dHIoJ2RhdGEtbG9hZGluZy1zdGF0ZScsICdsb2FkaW5nJyk7XHJcbiAgICAgICAgbG9hZGluZ1BsYWNlSG9sZGVyLmFkZENsYXNzKCdpbmZpbml0ZS1zY3JvbGwtbG9hZGluZycpO1xyXG5cclxuICAgICAgICAvLyBuYW1lZCB3cmFwcGVyIGZ1bmN0aW9uLCB3aGljaCBjYW4gZWl0aGVyIGJlIGNhbGxlZCwgaWYgY2FjaGUgaXMgaGl0LCBvciBhamF4IHJlcHNvbnNlIGlzIHJlY2VpdmVkXHJcbiAgICAgICAgdmFyIGZpbGxFbmRsZXNzU2Nyb2xsQ2h1bmsgPSBmdW5jdGlvbiAoaHRtbCkge1xyXG4gICAgICAgICAgICBsb2FkaW5nUGxhY2VIb2xkZXIucmVtb3ZlQ2xhc3MoJ2luZmluaXRlLXNjcm9sbC1sb2FkaW5nJyk7XHJcbiAgICAgICAgICAgIGxvYWRpbmdQbGFjZUhvbGRlci5hdHRyKCdkYXRhLWxvYWRpbmctc3RhdGUnLCAnbG9hZGVkJyk7XHJcbiAgICAgICAgICAgICQoJ2Rpdi5zZWFyY2gtcmVzdWx0LWNvbnRlbnQnKS5hcHBlbmQoaHRtbCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gb2xkIGNvbmRpdGlvbiBmb3IgY2FjaGluZyB3YXMgYCdzZXNzaW9uU3RvcmFnZScgaW4gd2luZG93ICYmIHNlc3Npb25TdG9yYWdlW1wic2Nyb2xsLWNhY2hlX1wiICsgZ3JpZFVybF1gXHJcbiAgICAgICAgLy8gaXQgd2FzIHJlbW92ZWQgdG8gdGVtcG9yYXJpbHkgYWRkcmVzcyBSQVAtMjY0OVxyXG5cclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB0eXBlOiAnR0VUJyxcclxuICAgICAgICAgICAgZGF0YVR5cGU6ICdodG1sJyxcclxuICAgICAgICAgICAgdXJsOiBncmlkVXJsLFxyXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgIC8vIHB1dCByZXNwb25zZSBpbnRvIGNhY2hlXHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlWydzY3JvbGwtY2FjaGVfJyArIGdyaWRVcmxdID0gcmVzcG9uc2U7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbm90aGluZyB0byBjYXRjaCBpbiBjYXNlIG9mIG91dCBvZiBtZW1vcnkgb2Ygc2Vzc2lvbiBzdG9yYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaXQgd2lsbCBmYWxsIGJhY2sgdG8gbG9hZCB2aWEgYWpheFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIFVJXHJcbiAgICAgICAgICAgICAgICBmaWxsRW5kbGVzc1Njcm9sbENodW5rKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgIHByb2R1Y3RUaWxlLmluaXQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogQHByaXZhdGVcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBkZXNjcmlwdGlvbiByZXBsYWNlcyBicmVhZGNydW1icywgbGVmdGhhbmQgbmF2IGFuZCBwcm9kdWN0IGxpc3Rpbmcgd2l0aCBhamF4IGFuZCBwdXRzIGEgbG9hZGluZyBpbmRpY2F0b3Igb3ZlciB0aGUgcHJvZHVjdCBsaXN0aW5nXHJcbiAqL1xyXG5mdW5jdGlvbiB1cGRhdGVQcm9kdWN0TGlzdGluZyh1cmwpIHtcclxuICAgIGlmICh1cmwgPT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgICQoJyNtYWluJykuYWRkQ2xhc3MoJ2hpZGVjb250ZW50Jyk7XHJcbiAgICBwcm9ncmVzcy5zaG93KCcjbWFpbicpO1xyXG4gICAgJCgnI21haW4nKS5sb2FkKHV0aWwuYXBwZW5kUGFyYW1Ub1VSTCh1cmwsICdmb3JtYXQnLCAnYWpheCcpLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VhcmNoUmVmaW5tZW50LnNlYXJjaFJlZmluZW1lbnRUb2dnbGUoKTtcclxuICAgICAgICB1aWV2ZW50cy5pbml0KCk7XHJcbiAgICAgICAgY29tcGFyZVdpZGdldC5pbml0KCk7XHJcbiAgICAgICAgcHJvZHVjdFRpbGUuaW5pdCgpO1xyXG4gICAgICAgIG93bGNhcm91c2VsKCk7XHJcbiAgICAgICAgLyogJCgnLnNjcm9sbGFibGUnKS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAkKHRoaXMpLnNsaW1TY3JvbGwoe1xyXG4gICAgICAgICAgICAgICAgIHNpemU6ICcxMHB4JyxcclxuICAgICAgICAgICAgICAgICBoZWlnaHQ6ICcyMDBweCcsXHJcbiAgICAgICAgICAgICAgICAgcmFpbFZpc2libGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgYWx3YXlzVmlzaWJsZTogdHJ1ZVxyXG4gICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICB9KTsqL1xyXG5cclxuICAgICAgICBwcm9ncmVzcy5oaWRlKCk7XHJcbiAgICAgICAgJCgnI21haW4nKS5yZW1vdmVDbGFzcygnaGlkZWNvbnRlbnQnKTtcclxuICAgICAgICBoaXN0b3J5LnB1c2hTdGF0ZSh1bmRlZmluZWQsICcnLCB1cmwpO1xyXG4gICAgICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtzY3JvbGxUb3A6IDB9LCAnZmFzdCcpO1xyXG4gICAgICAgIGlmICgkKCcucHRfcHJvZHVjdC1zZWFyY2gtcmVzdWx0IC5zZWFyY2gtYmxrJykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAkKCcucHRfcHJvZHVjdC1zZWFyY2gtcmVzdWx0JykuZmluZCgnI3ByaW1hcnknKS5hZGRDbGFzcygnc2VhcmNoLXJlc3VsdCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoJCgnLnJlZmluZS1kaXNwbGF5LnJlZmluZS12YWx1ZXMgLmJyZWFkY3J1bWItcmVmaW5lbWVudCcpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgJCgnLnB0X3Byb2R1Y3Qtc2VhcmNoLXJlc3VsdC5zZWFyY2hyZXN1bHQnKS5maW5kKCcjcHJpbWFyeScpLmFkZENsYXNzKCdzZWFyY2gtcmVzdWx0Jyk7XHJcbiAgICAgICAgICAgICQoJy5wdF9wcm9kdWN0LXNlYXJjaC1yZXN1bHQuY2F0ZWdvcnlsYW5kaW5nJykuZmluZCgnI3ByaW1hcnknKS5hZGRDbGFzcygnc2VhcmNoLXJlc3VsdCcpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICQoJy5wdF9wcm9kdWN0LXNlYXJjaC1yZXN1bHQuc2VhcmNocmVzdWx0JykuZmluZCgnI3ByaW1hcnknKS5hZGRDbGFzcygnc2VhcmNoLXJlc3VsdCcpO1xyXG4gICAgICAgICAgICAkKCcucHRfcHJvZHVjdC1zZWFyY2gtcmVzdWx0LmNhdGVnb3J5bGFuZGluZycpLmZpbmQoJyNwcmltYXJ5JykucmVtb3ZlQ2xhc3MoJ3NlYXJjaC1yZXN1bHQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZ3JpZFN5bmNoZWlnaHQoKTtcclxuICAgICAgICAkKCcjc2Vjb25kYXJ5JykucmVtb3ZlQ2xhc3MoJ3Zpc2libGUtaGlkZGVuJykuYWRkQ2xhc3MoJ3NlY29uZGFyeS1oaWRlJyk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLy8gdXBkYXRlcyB0aGUgZ3JpZCB1c2luZyB0aGUgJ3Bvc3QgaGFzaCcgcmVmaW5lbWVudCB2YWx1ZXNcclxuZnVuY3Rpb24gZ3JpZFN5bmNoZWlnaHQoKSB7XHJcbiAgICAkKCcudGlsZXMtY29udGFpbmVyIC5wcm9kdWN0LXRpbGUnKS5zeW5jSGVpZ2h0KCk7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBvd2xjYXJvdXNlbCgpIHtcclxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBvd2wgPSAkKCcub3dsLWNhcm91c2VsJyk7XHJcbiAgICAgICAgb3dsLm93bENhcm91c2VsKHtcclxuICAgICAgICAgICAgaXRlbXM6IDUsXHJcbiAgICAgICAgICAgIHNsaWRlQnk6IDUsXHJcbiAgICAgICAgICAgIHJld2luZDogZmFsc2UsXHJcbiAgICAgICAgICAgIG5hdjogdHJ1ZSxcclxuICAgICAgICAgICAgbmF2UmV3aW5kOiBmYWxzZSxcclxuICAgICAgICAgICAgbG9vcDogZmFsc2UsXHJcbiAgICAgICAgICAgIGRvdHM6IHRydWUsXHJcbiAgICAgICAgICAgIHJlc3BvbnNpdmU6IHtcclxuICAgICAgICAgICAgICAgIDA6IHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtczogMixcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZUJ5OiAyXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgNzY3OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbXM6IDIsXHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVCeTogMlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIDc2ODoge1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zOiA1LFxyXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlQnk6IDVcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB2YXIgdmlld3BvcnQgPSBqUXVlcnkod2luZG93KS53aWR0aCgpO1xyXG4gICAgICAgIC8vdmFyIGN1cnJlbnQgPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciBpdGVtQ291bnQgPSAkKCcucmVjb21tZW5kYXRpb25zLmNyb3NzLXNlbGwuUmVjb21tZW5kZWQuRm9yLllvdSAub3dsLWNhcm91c2VsIC5vd2wtaXRlbScpLmxlbmd0aDtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICh2aWV3cG9ydCA+PSA3NjggJiYgaXRlbUNvdW50ID4gNSkgfHwgKHZpZXdwb3J0IDwgNzY4ICYmIGl0ZW1Db3VudCA+IDIpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICQoJy5yZWNvbW1lbmRhdGlvbnMuY3Jvc3Mtc2VsbC5SZWNvbW1lbmRlZC5Gb3IuWW91IC5wZHByZWNvbW8tb3dsJykuZmluZCgnLm93bC1wcmV2LCAub3dsLW5leHQnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICQoJy5yZWNvbW1lbmRhdGlvbnMuY3Jvc3Mtc2VsbC5SZWNvbW1lbmRlZC5Gb3IuWW91IC5wZHByZWNvbW8tb3dsJykuZmluZCgnLm93bC1kb3RzJykuc2hvdygpO1xyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkKCcucmVjb21tZW5kYXRpb25zLmNyb3NzLXNlbGwuUmVjb21tZW5kZWQuRm9yLllvdSAucGRwcmVjb21vLW93bCcpLmZpbmQoJy5vd2wtcHJldiwgLm93bC1uZXh0JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKCcucmVjb21tZW5kYXRpb25zLmNyb3NzLXNlbGwuUmVjb21tZW5kZWQuRm9yLllvdSAucGRwcmVjb21vLW93bCcpLmZpbmQoJy5vd2wtZG90cycpLmhpZGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vdmFyIHZpZXdwb3J0b25lID0galF1ZXJ5KHdpbmRvdykud2lkdGgoKTtcclxuICAgICAgICAvL3ZhciBjdXJyZW50b25lID0gJCh0aGlzKTtcclxuICAgICAgICB2YXIgaXRlbUNvdW50b25lID0gJCgnLnJlY29tbWVuZGF0aW9ucy5jcm9zcy1zZWxsLlJlY2VudGx5LlZpZXdlZCAub3dsLWNhcm91c2VsIC5vd2wtaXRlbScpLmxlbmd0aDtcclxuXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAodmlld3BvcnQgPj0gNzY4ICYmIGl0ZW1Db3VudG9uZSA+IDUpIHx8ICh2aWV3cG9ydCA8IDc2OCAmJiBpdGVtQ291bnRvbmUgPiAyKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICAkKCcucmVjb21tZW5kYXRpb25zLmNyb3NzLXNlbGwuUmVjZW50bHkuVmlld2VkIC5wZHByZWNvbW8tb3dsJykuZmluZCgnLm93bC1wcmV2LCAub3dsLW5leHQnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICQoJy5yZWNvbW1lbmRhdGlvbnMuY3Jvc3Mtc2VsbC5SZWNlbnRseS5WaWV3ZWQgLnBkcHJlY29tby1vd2wnKS5maW5kKCcub3dsLWRvdHMnKS5zaG93KCk7XHJcblxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICQoJy5yZWNvbW1lbmRhdGlvbnMuY3Jvc3Mtc2VsbC5SZWNlbnRseS5WaWV3ZWQgLnBkcHJlY29tby1vd2wnKS5maW5kKCcub3dsLXByZXYsIC5vd2wtbmV4dCcpLmhpZGUoKTtcclxuICAgICAgICAgICAgJCgnLnJlY29tbWVuZGF0aW9ucy5jcm9zcy1zZWxsLlJlY2VudGx5LlZpZXdlZCAucGRwcmVjb21vLW93bCcpLmZpbmQoJy5vd2wtZG90cycpLmhpZGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgJCgnLnByb2R1Y3QtbGlzdGluZycpLmZpbmQoJ2gyLmhpZGUnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG5cclxuICAgICAgICBwcm9kdWN0VGlsZS5pbml0KCk7XHJcbiAgICAgICAgJCgnLnB0X3Byb2R1Y3Qtc2VhcmNoLXJlc3VsdCAucmVjb21tZW5kYXRpb25zLmNyb3NzLXNlbGwgLnNlYXJjaC1yZXN1bHQtaXRlbXMgLnByb2R1Y3QtdGlsZS5pdGVtJykubGFzdCgpLmFkZENsYXNzKCdyZWNvbWxhc3QnKTtcclxuICAgIH0sIDU1MDApO1xyXG5cclxufVxyXG5cclxudmFyIHNlYXJjaFJlZmlubWVudCA9IHtcclxuICAgIHNlYXJjaFJlZmluZW1lbnRUb2dnbGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyQoXCIjc2Vjb25kYXJ5XCIpLnJlbW92ZUF0dHIoXCJzdHlsZVwiKTtcclxuICAgICAgICAkKCcuanMtc2Nyb2xsYmFyJykuZWFjaChmdW5jdGlvbiAoJGkpIHtcclxuICAgICAgICAgICAgLy92YXIgY3VyT2JqID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgLy92YXIgdGhyZXNob2xkVmFsdWUgPSAkKGN1ck9iaikuY2xvc2VzdCgnLnJlZmluZW1lbnQnKS5maW5kKCcuZGV2aWNlLXJlZmluZScpLnZhbCgpO1xyXG4gICAgICAgICAgICBpZiAoJCgnLnJhcGFsYV9kZXZpY2UnKS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCQodGhpcykuY2xvc2VzdCgnLm5hdmdyb3VwJykuaGFzQ2xhc3MoJ3JlZmluZW1lbnQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmZpbmQoJ2xpJykubGVuZ3RoID4gOCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdqcy1zY3JvbGxiYXItaGVpZ2h0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLm92ZXJ2aWV3Jykuc2xpbVNjcm9sbCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYWlsVmlzaWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogJzIwMHB4JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU6ICcxMHB4JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhaWxDb2xvcjogJ3RyYW5zcGFyZW50JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnI2EwYTBhMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbHdheXNWaXNpYmxlOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyQodGhpcykudGlueXNjcm9sbGJhcih7dHJhY2tTaXplIDogMjAwfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcub3ZlcnZpZXcnKS5jc3MoJ3Bvc2l0aW9uJywgJ3N0YXRpYycpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vJCh0aGlzKS50aW55c2Nyb2xsYmFyKHt0cmFja1NpemUgOiAyMDB9KTtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5vdmVydmlldycpLnNsaW1TY3JvbGwoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByYWlsVmlzaWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAnMjAwcHgnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplOiAnMTBweCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhaWxDb2xvcjogJ3RyYW5zcGFyZW50JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjYTBhMGEwJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWx3YXlzVmlzaWJsZTogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8qaWYoJCh0aGlzKS5maW5kKCdsaScpLmxlbmd0aCA+IHRocmVzaG9sZFZhbHVlICYmICQodGhpcykuZmluZCgnLnNlZU1vcmVSZWZpbmVtZW50cycpLmxlbmd0aCA9PSAwKXtcclxuICAgICAgICAgICAgICAgICAgICBpZigkKHRoaXMpLmZpbmQoJy5zZWVOZXh0UmVmaW5lbWVudHMnKS5sZW5ndGggPT0gMCAmJiAkKHRoaXMpLmZpbmQoJy5zZWVQcmV2UmVmaW5lbWVudHMnKS5sZW5ndGggPT0gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuYXBwZW5kKCc8YSBocmVmPVwiI1wiIGNsYXNzPVwic2VlTmV4dFJlZmluZW1lbnRzXCI+U2VlIE5leHQ8L2E+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuYXBwZW5kKCc8YSBocmVmPVwiI1wiIGNsYXNzPVwic2VlUHJldlJlZmluZW1lbnRzXCI+U2VlIFByZXZpb3VzPC9hPicpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aHJlc2hvbGRWYWx1ZSAtPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnbGknKS5lcSh0aHJlc2hvbGRWYWx1ZSkubmV4dEFsbCgnbGknKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLnNlZVByZXZSZWZpbmVtZW50cycpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCdsaScpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5zZWVOZXh0UmVmaW5lbWVudHMnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICB9Ki9cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCRpID09ICgkKCcuanMtc2Nyb2xsYmFyJykubGVuZ3RoIC0gMSkpIHtcclxuICAgICAgICAgICAgICAgICQoJyNzZWFyY2hyZWZpbmVtZW50cyBkaXYubmF2Z3JvdXAnKS5lYWNoKGZ1bmN0aW9uIChpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpIDwgOTYwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmZpbmQoJ2xpLnNlbGVjdGVkJykubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnZGl2LnJlZmluZWF0dHJpYnV0ZXMnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5maWx0ZXInKS5hZGRDbGFzcygnZXhwYW5kJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdjb2xsYXBzZS1leHBhbmQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID4gMiAmJiAkKHRoaXMpLmZpbmQoJ2xpLnNlbGVjdGVkJykubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnZGl2LnJlZmluZWF0dHJpYnV0ZXMnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5maWx0ZXInKS5hZGRDbGFzcygnZXhwYW5kJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdjb2xsYXBzZS1leHBhbmQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpIDwgMykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCdkaXYucmVmaW5lYXR0cmlidXRlcycpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLmZpbHRlcicpLnJlbW92ZUNsYXNzKCdleHBhbmQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2NvbGxhcHNlLWV4cGFuZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIGluaXQgcmVmaW5lbWVudCB0b2dnbGluZ1xyXG4gICAgICAgICQoJyNzZWFyY2hyZWZpbmVtZW50cyAuZmlsdGVyJykub2ZmKCdjbGljaycpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgalF1ZXJ5KHRoaXMpLnRvZ2dsZUNsYXNzKCdleHBhbmQnKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcubmF2Z3JvdXAnKS50b2dnbGVDbGFzcygnY29sbGFwc2UtZXhwYW5kJyk7XHJcbiAgICAgICAgICAgIGpRdWVyeSh0aGlzKS5jbG9zZXN0KCcubmF2Z3JvdXAnKS5maW5kKCdkaXYucmVmaW5lYXR0cmlidXRlcycpLnRvZ2dsZSgpO1xyXG4gICAgICAgICAgICAvL2pRdWVyeSh0aGlzKS5jbG9zZXN0KCcubmF2Z3JvdXAnKS5maW5kKFwiLmpzLXNjcm9sbGJhclwiKS50aW55c2Nyb2xsYmFyKHt0cmFja1NpemUgOiAyMDB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJCh3aW5kb3cpLmxvYWQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKCcjc2Vjb25kYXJ5JykucmVtb3ZlQ2xhc3MoJ3Zpc2libGUtaGlkZGVuJykuYWRkQ2xhc3MoJ3NlY29uZGFyeS1oaWRlJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpID4gOTU5KSB7XHJcbiAgICAgICAgICAgICQoJy5tb2JpbGUtZmlsdGVyLWJ5JykucmVtb3ZlQ2xhc3MoJ2pzLWZpbHRlci1hY3RpdmUnKTtcclxuICAgICAgICAgICAgJCgnI3NlY29uZGFyeScpLnJlbW92ZUNsYXNzKCcudmlzaWJsZS1oaWRkZW4nKS5yZW1vdmVBdHRyKCdzdHlsZScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuXHJcbi8qKlxyXG4gKiBAcHJpdmF0ZVxyXG4gKiBAZnVuY3Rpb25cclxuICogQGRlc2NyaXB0aW9uIEluaXRpYWxpemVzIGV2ZW50cyBmb3IgdGhlIGZvbGxvd2luZyBlbGVtZW50czo8YnIvPlxyXG4gKiA8cD5yZWZpbmVtZW50IGJsb2NrczwvcD5cclxuICogPHA+dXBkYXRpbmcgZ3JpZDogcmVmaW5lbWVudHMsIHBhZ2luYXRpb24sIGJyZWFkY3J1bWI8L3A+XHJcbiAqIDxwPml0ZW0gY2xpY2s8L3A+XHJcbiAqIDxwPnNvcnRpbmcgY2hhbmdlczwvcD5cclxuICovXHJcbmZ1bmN0aW9uIGluaXRpYWxpemVFdmVudHMoKSB7XHJcbiAgICBvd2xjYXJvdXNlbCgpO1xyXG4gICAgZ3JpZFN5bmNoZWlnaHQoKTtcclxuICAgIHByb2R1Y3RUaWxlLmluaXQoKTtcclxuICAgIHZhciAkbWFpbiA9ICQoJyNtYWluJyk7XHJcbiAgICAvLyBjb21wYXJlIGNoZWNrZWRcclxuICAgICRtYWluLm9uKCdjbGljaycsICdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0uY29tcGFyZS1jaGVjaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgY2IgPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciB0aWxlID0gY2IuY2xvc2VzdCgnLnByb2R1Y3QtdGlsZScpO1xyXG5cclxuICAgICAgICB2YXIgZnVuYyA9IHRoaXMuY2hlY2tlZCA/IGNvbXBhcmVXaWRnZXQuYWRkUHJvZHVjdCA6IGNvbXBhcmVXaWRnZXQucmVtb3ZlUHJvZHVjdDtcclxuICAgICAgICB2YXIgaXRlbUltZyA9IHRpbGUuZmluZCgnLnByb2R1Y3QtaW1hZ2UgYSBpbWcnKS5maXJzdCgpO1xyXG4gICAgICAgIGZ1bmMoe1xyXG4gICAgICAgICAgICBpdGVtaWQ6IHRpbGUuZGF0YSgnaXRlbWlkJyksXHJcbiAgICAgICAgICAgIHV1aWQ6IHRpbGVbMF0uaWQsXHJcbiAgICAgICAgICAgIGltZzogaXRlbUltZyxcclxuICAgICAgICAgICAgY2I6IGNiXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKCQoJy5jb250ZW50QXNzZXQtbmV3JykuZmluZCgnLmh0bWwtc2xvdC1jb250YWluZXInKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgdmFyIGN1cnJlbnQgPSAkKCcuY29udGVudEFzc2V0LW5ldycpLmZpbmQoJy5odG1sLXNsb3QtY29udGFpbmVyJyk7XHJcbiAgICAgICAgY3VycmVudC5wYXJlbnRzKCcuZGVza3RvcCcpLnJlbW92ZUNsYXNzKCdwcm9tb2hpZGUnKS5hZGRDbGFzcygncHJvbW9zaG93Jyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgICQoJy5kZXNrdG9wJykucmVtb3ZlQ2xhc3MoJ3Byb21vc2hvdycpLmFkZENsYXNzKCdwcm9tb2hpZGUnKTtcclxuICAgIH1cclxuXHJcbiAgICAkbWFpbi5vbignY2xpY2snLCAnLm1vYmlsZS1maWx0ZXItYnknLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCEkKCcubW9iaWxlLWZpbHRlci1ieScpLmhhc0NsYXNzKCdqcy1maWx0ZXItYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgJCgnLm1vYmlsZS1maWx0ZXItYnknKS5hZGRDbGFzcygnanMtZmlsdGVyLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICAkKCcjc2Vjb25kYXJ5Jykuc2hvdygpO1xyXG4gICAgICAgICAgICAvLyQoXCIjc2Vjb25kYXJ5XCIpLmNzcyhcInRvcFwiLHNlY29uZGFyeVRvcCtcInB4XCIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICQoJy5tb2JpbGUtZmlsdGVyLWJ5JykucmVtb3ZlQ2xhc3MoJ2pzLWZpbHRlci1hY3RpdmUnKTtcclxuICAgICAgICAgICAgJCgnI3NlY29uZGFyeScpLmhpZGUoKTtcclxuICAgICAgICAgICAgLy8kKFwiI3NlY29uZGFyeVwiKS5jc3MoXCJ0b3BcIixzZWNvbmRhcnlUb3ArXCJweFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgICQoJyN0YWJzIGEnKS5jbGljayhmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKHRoaXMpLnByZXYoJ2lucHV0W3R5cGU9XCJyYWRpb1wiXScpLnByb3AoJ2NoZWNrZWQnLCB0cnVlKTtcclxuICAgICAgICB2YXIgaHJlZiA9ICQodGhpcykuYXR0cignaHJlZicpO1xyXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9IGhyZWY7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkbWFpbi5vbignY2xpY2snLCAnI3RhYnMgaW5wdXRbdHlwZT1cInJhZGlvXCJdJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBjaGVja2VkID0gJCh0aGlzKS5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XHJcbiAgICAgICAgaWYgKGNoZWNrZWQpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICQodGhpcykucHJvcCgnY2hlY2tlZCcsIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkKHRoaXMpLm5leHQoJ2EnKS50cmlnZ2VyKCdjbGljaycpO1xyXG4gICAgICAgICQodGhpcykucHJvcCgnY2hlY2tlZCcsIHRydWUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy9zZWFyY2hjb250ZW50LXNlY3Rpb25cclxuICAgICRtYWluLm9uKCdjbGljaycsICcubW9iaWxlLWZpbHRlci1ieS5yZXN1bHRzLWNvbnRlbnQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCEkKCcubW9iaWxlLWZpbHRlci1ieS5yZXN1bHRzLWNvbnRlbnQnKS5oYXNDbGFzcygnanMtZmlsdGVyLWFjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICQoJy5tb2JpbGUtZmlsdGVyLWJ5LnJlc3VsdHMtY29udGVudCcpLmFkZENsYXNzKCdqcy1maWx0ZXItYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICQoJyNzZWNvbmRhcnkuc2VhcmNoUmVzdWx0LXJlZmluZW1lbnQnKS5zaG93KCk7XHJcbiAgICAgICAgICAgIC8vJChcIiNzZWNvbmRhcnlcIikuY3NzKFwidG9wXCIsc2Vjb25kYXJ5VG9wK1wicHhcIik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJCgnLm1vYmlsZS1maWx0ZXItYnkucmVzdWx0cy1jb250ZW50JykucmVtb3ZlQ2xhc3MoJ2pzLWZpbHRlci1hY3RpdmUnKTtcclxuICAgICAgICAgICAgJCgnI3NlY29uZGFyeS5zZWFyY2hSZXN1bHQtcmVmaW5lbWVudCcpLmhpZGUoKTtcclxuICAgICAgICAgICAgLy8kKFwiI3NlY29uZGFyeVwiKS5jc3MoXCJ0b3BcIixzZWNvbmRhcnlUb3ArXCJweFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoJCgnLnB0X3Byb2R1Y3Qtc2VhcmNoLXJlc3VsdCAuc2VhcmNoLWJsaycpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAkKCcucHRfcHJvZHVjdC1zZWFyY2gtcmVzdWx0JykuZmluZCgnI3ByaW1hcnknKS5hZGRDbGFzcygnc2VhcmNoLXJlc3VsdCcpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICgkKCcucHRfY29udGVudC1zZWFyY2gtcmVzdWx0IC5mb2xkZXItY29udGVudC1saXN0JykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICQoJy5wdF9jb250ZW50LXNlYXJjaC1yZXN1bHQnKS5maW5kKCcjdGFicyAjcHJvZHVjdHRhYicpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgJCgnLnB0X2NvbnRlbnQtc2VhcmNoLXJlc3VsdCcpLmZpbmQoJyN0YWJzICNjb250ZW50dGFiJykucHJvcCgnY2hlY2tlZCcsIHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgICRtYWluLm9uKCdjbGljaycsICcuc29ydGJ5LWJ1dHRvbicsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPj0gNDgxICYmICQod2luZG93KS53aWR0aCgpIDw9IDk1OSkge1xyXG4gICAgICAgICAgICBpZiAoISQoJy5zb3J0YnktYnV0dG9uJykuaGFzQ2xhc3MoJ2pzLXNvcnQtYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAgICQoJy5zb3J0YnktYnV0dG9uJykuYWRkQ2xhc3MoJ2pzLXNvcnQtYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcuc2VhcmNoLXJlc3VsdC1vcHRpb25zJykuYWRkQ2xhc3MoJ3Nob3ctc29ydCcpO1xyXG4gICAgICAgICAgICAgICAgJCgnLm1vYmlsZS1zb3J0LWJ5LWNvbnRlbnQnKS5zaG93KCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkKCcuc29ydGJ5LWJ1dHRvbicpLnJlbW92ZUNsYXNzKCdqcy1zb3J0LWFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgJCgnLnNlYXJjaC1yZXN1bHQtb3B0aW9ucycpLnJlbW92ZUNsYXNzKCdzaG93LXNvcnQnKTtcclxuICAgICAgICAgICAgICAgICQoJy5tb2JpbGUtc29ydC1ieS1jb250ZW50JykuaGlkZSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHNlYXJjaFJlZmlubWVudC5zZWFyY2hSZWZpbmVtZW50VG9nZ2xlKCk7XHJcblxyXG4gICAgLyokKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uKCl7XHJcblx0XHRzZWFyY2hSZWZpbm1lbnQuc2VhcmNoUmVmaW5lbWVudFRvZ2dsZSgpO1xyXG4gICAgfSk7Ki9cclxuXHJcbiAgICAvKiAkKCcuc2Nyb2xsYWJsZScpLmVhY2goZnVuY3Rpb24oKXtcclxuICAgIFx0JCh0aGlzKS5zbGltU2Nyb2xsKHtcclxuICAgICAgICAgICAgc2l6ZTogJzEwcHgnLFxyXG4gICAgICAgICAgICBoZWlnaHQ6ICcyMDBweCcsXHJcbiAgICAgICAgICAgIHJhaWxWaXNpYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICBhbHdheXNWaXNpYmxlOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfSk7Ki9cclxuICAgIC8vIGhhbmRsZSB0b2dnbGUgcmVmaW5lbWVudCBibG9ja3NcclxuICAgIC8qICRtYWluLm9uKCdjbGljaycsICcucmVmaW5lbWVudCBoMycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgIGlmKCAhJCh0aGlzKS5oYXNDbGFzcygnZXhwYW5kJykgKXtcclxuICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdleHBhbmQnKS5jbG9zZXN0KCcubmF2Z3JvdXAnKS5hZGRDbGFzcygnY29sbGFwc2UtZXhwYW5kJykuZmluZCgnLnN1Yi1yZWZpbmVtZW50JykuaGlkZSgpO1xyXG5cclxuICAgICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdleHBhbmQnKS5jbG9zZXN0KCcubmF2Z3JvdXAnKS5yZW1vdmVDbGFzcygnY29sbGFwc2UtZXhwYW5kJykuZmluZCgnLnN1Yi1yZWZpbmVtZW50Jykuc2hvdygpO1xyXG4gICAgICAgICAgfVxyXG4gICAgIH0pOyovXHJcblxyXG4gICAgLy8gY29sb3Igc3dhdGNoZXMgZXZlbnRzIC8vXHJcbiAgICAkbWFpbi5vbignY2xpY2snLCAnLnByb2R1Y3Qtc3dhdGNoZXMgLnByb2R1Y3Qtc3dhdGNoZXMtYWxsJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdsb2FkZWQnKSkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLm5leHQoJy5zd2F0Y2gtbGlzdC5zd2F0Y2gtdG9nZ2xlJykuc2hvdygpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2xvYWRlZCcpO1xyXG4gICAgICAgIHZhciBjb250ID0gJCh0aGlzKS5wYXJlbnQoKS5maW5kKCd1bC5zd2F0Y2gtbGlzdC5zd2F0Y2gtdG9nZ2xlJyk7XHJcbiAgICAgICAgY29udC5zaG93KCkuZm9jdXMoKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJ3VsLnN3YXRjaC10b2dnbGUgbGkgPiBhJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmRhdGEoJ2hyZWYnKSkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCdpbWcnKS5hdHRyKCdzcmMnLCAkKHRoaXMpLmRhdGEoJ2hyZWYnKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29udC5zaG93KCkuZm9jdXMoKTtcclxuICAgIH0pO1xyXG4gICAgLy8gcHJlcGFyZSBzd2F0Y2ggcGFsZXR0ZXMgYW5kIHRodW1ibmFpbHNcclxuICAgIC8vIHNob3cgdGhlIHBhbGV0dGVcclxuXHJcbiAgICAvLyBoaWRlIHRoZSBwYWxldHRlXHJcbiAgICAkKCcjY29udGVudCBkaXYucHJvZHVjdC1zd2F0Y2hlcyBkaXYuc3dhdGNoLWltYWdlJykubW91c2VvdXQoZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAvLyBmaXggZm9yIGV2ZW50IGJ1YmJsaW5nIChodHRwOi8vd3d3LnF1aXJrc21vZGUub3JnL2pzL2V2ZW50c19tb3VzZS5odG1sKVxyXG4gICAgICAgIGlmICghZSkge1xyXG4gICAgICAgICAgICBlID0gd2luZG93LmV2ZW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgdGcgPSAod2luZG93LmV2ZW50KSA/IGUuc3JjRWxlbWVudCA6IGUudGFyZ2V0O1xyXG4gICAgICAgIGlmICh0Zy5ub2RlTmFtZSAhPSAnRElWJykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciByZWx0ZyA9IChlLnJlbGF0ZWRUYXJnZXQpID8gZS5yZWxhdGVkVGFyZ2V0IDogZS50b0VsZW1lbnQ7XHJcbiAgICAgICAgd2hpbGUgKHJlbHRnICE9IHRnICYmIHJlbHRnLm5vZGVOYW1lICE9ICdCT0RZJykge1xyXG4gICAgICAgICAgICByZWx0ZyA9IHJlbHRnLnBhcmVudE5vZGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyZWx0ZyA9PSB0Zykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBtb3VzZW91dCB0b29rIHBsYWNlIHdoZW4gbW91c2UgYWN0dWFsbHkgbGVmdCBsYXllclxyXG4gICAgICAgIC8vIGhhbmRsZSBldmVudCBub3dcclxuICAgICAgICAkKHRoaXMpLmhpZGUoKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCcuc3dhdGNoLWxpc3Quc3dhdGNoLXRvZ2dsZScpLm1vdXNlbGVhdmUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJy5zd2F0Y2gtbGlzdC5zd2F0Y2gtdG9nZ2xlJykuaGlkZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgalF1ZXJ5KCcjY29udGVudCAucHJvZHVjdHRpbGUgZGl2LnN3YXRjaGVzIGRpdi5pbnZpc2libGUnKS5oaWRlKCk7XHJcbiAgICBqUXVlcnkoJyNjb250ZW50IC5wcm9kdWN0dGlsZSBkaXYuc3dhdGNoZXMgYS5zd2F0Y2ggaW1nLmhpZGRlbnRodW1ibmFpbCcpLmhpZGUoKTtcclxuXHJcbiAgICAkKCcjY29udGVudC5wcm9kdWN0LXN3YXRjaGVzIC5wcm9kdWN0LXN3YXRjaGVzLWFsbC5sb2FkZWQnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy92YXIgc3dhdGNoID0galF1ZXJ5KHRoaXMpO1xyXG4gICAgICAgIHVwZGF0ZVByb2R1Y3RMaXN0aW5nKHRoaXMuaHJlZik7XHJcbiAgICAgICAgLy8gb21pdCBmb2xsb3dpbmcgdGhlIHN3YXRjaCBsaW5rXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnYm9keScpLm1vdXNlbGVhdmUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA+IDk2MCkge1xyXG4gICAgICAgICAgICAkKCcuc3dhdGNoLWxpc3Quc3dhdGNoLXRvZ2dsZScpLmhpZGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgICQoJ2JvZHknKS5iaW5kKCdibHVyJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJy5zd2F0Y2gtbGlzdC5zd2F0Y2gtdG9nZ2xlJykuaGlkZSgpO1xyXG5cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIGhhbmRsZSBldmVudHMgZm9yIHVwZGF0aW5nIGdyaWRcclxuICAgICRtYWluLm9uKCdjbGljaycsICcucmVmaW5lbWVudCBhLCAuc29ydGhpdHNjb250YWluZXIgLnBhZ2luYXRpb24gYSwgLmJyZWFkY3J1bWItcmVmaW5lbWVudC12YWx1ZSBhLCAubW9iaWxlLXNvcnQtYnktY29udGVudCBhJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAvLyBkb24ndCBpbnRlcmNlcHQgZm9yIGNhdGVnb3J5IGFuZCBmb2xkZXIgcmVmaW5lbWVudHMsIGFzIHdlbGwgYXMgdW5zZWxlY3RhYmxlXHJcbiAgICAgICAgaWYgKCQodGhpcykucGFyZW50cygnLmNhdGVnb3J5LXJlZmluZW1lbnQnKS5sZW5ndGggPiAwIHx8ICQodGhpcykucGFyZW50cygnLmZvbGRlci1yZWZpbmVtZW50JykubGVuZ3RoID4gMCB8fCAkKHRoaXMpLnBhcmVudCgpLmhhc0NsYXNzKCd1bnNlbGVjdGFibGUnKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB2YXIgcXVlcnkgPSB1dGlsLmdldFF1ZXJ5U3RyaW5nKHRoaXMuaHJlZik7XHJcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSBxdWVyeTtcclxuICAgICAgICBpZiAodGhpcy5ocmVmID09PSB3aW5kb3cubG9jYXRpb24uaHJlZikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHVwZGF0ZVByb2R1Y3RMaXN0aW5nKHRoaXMuaHJlZik7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCcucHJvZHVjdGxpc3Rpbmcuc3ViLWNhdCcpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQodGhpcykuZmluZCgnLnByb2R1Y3QucHJvZHVjdHRpbGUuY2VsbCcpLmZpcnN0KCkuYWRkQ2xhc3MoJ3N1YmZpcnN0Jyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBoYW5kbGUgZXZlbnRzIGl0ZW0gY2xpY2suIGFwcGVuZCBwYXJhbXMuXHJcbiAgICAkbWFpbi5vbignY2xpY2snLCAnLnByb2R1Y3QtdGlsZSBhOm5vdChcIiNxdWlja3ZpZXdidXR0b25cIiknLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGEgPSAkKHRoaXMpO1xyXG4gICAgICAgIC8vIGdldCBjdXJyZW50IHBhZ2UgcmVmaW5lbWVudCB2YWx1ZXNcclxuICAgICAgICB2YXIgd2wgPSB3aW5kb3cubG9jYXRpb247XHJcblxyXG4gICAgICAgIHZhciBxc1BhcmFtcyA9ICh3bC5zZWFyY2gubGVuZ3RoID4gMSkgPyB1dGlsLmdldFF1ZXJ5U3RyaW5nUGFyYW1zKHdsLnNlYXJjaC5zdWJzdHIoMSkpIDoge307XHJcbiAgICAgICAgdmFyIGhhc2hQYXJhbXMgPSAod2wuaGFzaC5sZW5ndGggPiAxKSA/IHV0aWwuZ2V0UXVlcnlTdHJpbmdQYXJhbXMod2wuaGFzaC5zdWJzdHIoMSkpIDoge307XHJcblxyXG4gICAgICAgIC8vIG1lcmdlIGhhc2ggcGFyYW1zIHdpdGggcXVlcnlzdHJpbmcgcGFyYW1zXHJcbiAgICAgICAgdmFyIHBhcmFtcyA9ICQuZXh0ZW5kKGhhc2hQYXJhbXMsIHFzUGFyYW1zKTtcclxuICAgICAgICBpZiAoIXBhcmFtcy5zdGFydCkge1xyXG4gICAgICAgICAgICBwYXJhbXMuc3RhcnQgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBnZXQgdGhlIGluZGV4IG9mIHRoZSBzZWxlY3RlZCBpdGVtIGFuZCBzYXZlIGFzIHN0YXJ0IHBhcmFtZXRlclxyXG4gICAgICAgIHZhciB0aWxlID0gYS5jbG9zZXN0KCcucHJvZHVjdC10aWxlJyk7XHJcbiAgICAgICAgdmFyIGlkeCA9IHRpbGUuZGF0YSgnaWR4JykgPyArdGlsZS5kYXRhKCdpZHgnKSA6IDA7XHJcblxyXG4gICAgICAgIC8qU3RhcnQgSklSQSBQUkVWLTUwIDogTmV4dCBhbmQgUHJldmlvdXMgbGlua3Mgd2lsbCBub3QgYmUgZGlzcGxheWVkIG9uIFBEUCBpZiB1c2VyIG5hdmlnYXRlIGZyb20gUXVpY2sgVmlldy5BZGRlZCBjZ2lkIHRvIGhhc2gqL1xyXG4gICAgICAgIGlmICghcGFyYW1zLmNnaWQgJiYgdGlsZS5kYXRhKCdjZ2lkJykgIT09IG51bGwgJiYgdGlsZS5kYXRhKCdjZ2lkJykgIT09ICcnKSB7XHJcbiAgICAgICAgICAgIHBhcmFtcy5jZ2lkID0gdGlsZS5kYXRhKCdjZ2lkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8qRW5kIEpJUkEgUFJFVi01MCovXHJcblxyXG4gICAgICAgIC8vIGNvbnZlcnQgcGFyYW1zLnN0YXJ0IHRvIGludGVnZXIgYW5kIGFkZCBpbmRleFxyXG4gICAgICAgIHBhcmFtcy5zdGFydCA9ICgrcGFyYW1zLnN0YXJ0KSArIChpZHggKyAxKTtcclxuICAgICAgICAvLyBzZXQgdGhlIGhhc2ggYW5kIGFsbG93IG5vcm1hbCBhY3Rpb24gdG8gY29udGludWVcclxuICAgICAgICBhWzBdLmhhc2ggPSAkLnBhcmFtKHBhcmFtcyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBoYW5kbGUgc29ydGluZyBjaGFuZ2VcclxuICAgICRtYWluLm9uKCdjaGFuZ2UnLCAnLnNvcnQtYnkgc2VsZWN0JywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICB2YXIgc2VsZWN0ZWRPcHRpb24gPSAkKCcuc29ydC1ieSBvcHRpb246c2VsZWN0ZWQnKS52YWwoKS5zcGxpdCgnPycpWzFdLnNwbGl0KCcmJyk7XHJcbiAgICAgICAgLy92YXIgdXJsID0gJCh0aGlzKS52YWwoKTtcclxuICAgICAgICB2YXIgc2VsZWN0ZWRPcHRpb252YWwgPSAnJztcclxuICAgICAgICAkLmVhY2goc2VsZWN0ZWRPcHRpb24sIGZ1bmN0aW9uIChpLCB2KSB7XHJcbiAgICAgICAgICAgIGlmICh2LmluZGV4T2YoJ3NydWxlJykgIT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkT3B0aW9udmFsID0gdi5zcGxpdCgnPScpWzFdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmIChzZWxlY3RlZE9wdGlvbnZhbC5sZW5ndGggIT0gMCkge1xyXG4gICAgICAgICAgICB2YXIgZGF0ZU9iaiA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgIGRhdGVPYmouc2V0VGltZShkYXRlT2JqLmdldFRpbWUoKSArICg2MCAqIDYwICogMTAwMCkpO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSAnc2VsZWN0ZWRPcHRpb249JyArIHNlbGVjdGVkT3B0aW9udmFsICsgJzsgZXhwaXJlcz0nICsgZGF0ZU9iai50b1VUQ1N0cmluZygpICsgJzsgcGF0aD0vJztcclxuICAgICAgICAgICAgLypcclxuICAgICAgICAgICAgdmFyIHNvcnRSdWxlID0gdXJsLnNwbGl0KCc/JylbMV0uc3BsaXQoJyYnKTtcclxuICAgICAgICAgICAgdmFyIHNvcnRUeXBlID0gJyc7XHJcblxyXG4gICAgICAgICAgICAkLmVhY2goc29ydFJ1bGUsIGZ1bmN0aW9uIChpLCB2KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodi5pbmRleE9mKCdzcnVsZScpICE9IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc29ydFR5cGUgPSB2LnNwbGl0KCc9JylbMV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAqL1xyXG4gICAgICAgIH1cclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdmFyIHF1ZXJ5ID0gdXRpbC5nZXRRdWVyeVN0cmluZygkKHRoaXMpLmZpbmQoJ29wdGlvbjpzZWxlY3RlZCcpLnZhbCgpKTtcclxuICAgICAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9IHF1ZXJ5O1xyXG4gICAgICAgIGlmICgkKHRoaXMpLmZpbmQoJ29wdGlvbjpzZWxlY3RlZCcpLnZhbCgpID09PSB3aW5kb3cubG9jYXRpb24uaHJlZikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHVwZGF0ZVByb2R1Y3RMaXN0aW5nKCQodGhpcykuZmluZCgnb3B0aW9uOnNlbGVjdGVkJykudmFsKCkpO1xyXG4gICAgfSkub24oJ2NoYW5nZScsICcuaXRlbXMtcGVyLXBhZ2Ugc2VsZWN0JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciByZWZpbmVVcmwgPSAkKHRoaXMpLmZpbmQoJ29wdGlvbjpzZWxlY3RlZCcpLnZhbCgpO1xyXG4gICAgICAgIGlmIChyZWZpbmVVcmwgPT09ICdJTkZJTklURV9TQ1JPTEwnKSB7XHJcbiAgICAgICAgICAgICQoJ2h0bWwnKS5hZGRDbGFzcygnaW5maW5pdGUtc2Nyb2xsJykucmVtb3ZlQ2xhc3MoJ2Rpc2FibGUtaW5maW5pdGUtc2Nyb2xsJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJCgnaHRtbCcpLmFkZENsYXNzKCdkaXNhYmxlLWluZmluaXRlLXNjcm9sbCcpLnJlbW92ZUNsYXNzKCdpbmZpbml0ZS1zY3JvbGwnKTtcclxuICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gdXRpbC5nZXRRdWVyeVN0cmluZyhyZWZpbmVVcmwpO1xyXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9IHF1ZXJ5O1xyXG4gICAgICAgICAgICBpZiAocmVmaW5lVXJsID09PSB3aW5kb3cubG9jYXRpb24uaHJlZikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHVwZGF0ZVByb2R1Y3RMaXN0aW5nKHJlZmluZVVybCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbXBhcmVXaWRnZXQuaW5pdCgpO1xyXG4gICAgaWYgKFNpdGVQcmVmZXJlbmNlcy5MSVNUSU5HX0lORklOSVRFX1NDUk9MTCkge1xyXG4gICAgICAgICQod2luZG93KS5vbignc2Nyb2xsJywgaW5maW5pdGVTY3JvbGwpO1xyXG4gICAgfVxyXG4gICAgcHJvZHVjdFRpbGUuaW5pdCgpO1xyXG4gICAgaW5pdGlhbGl6ZUV2ZW50cygpO1xyXG59O1xyXG4iLCIndXNlIHN0cmljdCc7XHJcbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBvd2wgPSAkKCcub3dsLWNhcm91c2VsJyk7XHJcbiAgICBvd2wub3dsQ2Fyb3VzZWwoe1xyXG4gICAgICAgIGl0ZW1zOiAxLFxyXG4gICAgICAgIGxvb3A6IHRydWUsXHJcbiAgICAgICAgZG90czogdHJ1ZSxcclxuICAgICAgICBhdXRvcGxheTogdHJ1ZSxcclxuICAgICAgICBhdXRvcGxheVRpbWVvdXQ6IDcwMDAsXHJcbiAgICAgICAgYXV0b3BsYXlIb3ZlclBhdXNlOiB0cnVlLFxyXG4gICAgICAgIGFuaW1hdGVPdXQ6ICdmYWRlT3V0JyxcclxuICAgICAgICByZXNwb25zaXZlOiB7XHJcbiAgICAgICAgICAgIDA6IHtcclxuICAgICAgICAgICAgICAgIGl0ZW1zOiAxXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIDYwMDoge1xyXG4gICAgICAgICAgICAgICAgaXRlbXM6IDFcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgMTAwMDoge1xyXG4gICAgICAgICAgICAgICAgaXRlbXM6IDFcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59O1xyXG4iLCIndXNlIHN0cmljdCc7XHJcbnZhciBkaWFsb2cgPSByZXF1aXJlKCcuLi9kaWFsb2cnKSxcclxuICAgIHV0aWwgPSByZXF1aXJlKCcuLi91dGlsJyksXHJcbiAgICB2YWxpZGF0b3IgPSByZXF1aXJlKCcuLi92YWxpZGF0b3InKTtcclxuXHJcbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICQoJy5zdG9yZS1kZXRhaWxzLWxpbmsnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBkaWFsb2cub3Blbih7XHJcbiAgICAgICAgICAgIHVybDogJChlLnRhcmdldCkuYXR0cignaHJlZicpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIHN0b3JlTG9jYXRvci5pbml0KCk7XHJcbn07XHJcbiQoJy5jdXN0b21lcnN1Ym1pdCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICgkKCcuZmxvYXRsZWZ0LnN0YXRlLmN1c3RvbS1zZWxlY3Qgc2VsZWN0JykudmFsaWQoKSA9PSAwKSB7XHJcbiAgICAgICAgaWYgKCEkKCcuZmxvYXRsZWZ0LnN0YXRlLmN1c3RvbS1zZWxlY3QnKS5oYXNDbGFzcygnYmx1cmVkJykpIHtcclxuICAgICAgICAgICAgJCgnLmZsb2F0bGVmdC5zdGF0ZS5jdXN0b20tc2VsZWN0JykuYWRkQ2xhc3MoJ2N1c3RvbXNlbGVjdC1lcnJvcicpO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJCgnLmZsb2F0bGVmdC5zdGF0ZS5jdXN0b20tc2VsZWN0JykucmVtb3ZlQ2xhc3MoJ2N1c3RvbXNlbGVjdC1lcnJvcicpO1xyXG4gICAgfVxyXG59KTtcclxudmFyIHN0b3JlTG9jYXRvciA9IHtcclxuICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YWxpZGF0b3IuaW5pdCgpO1xyXG4gICAgICAgICQoJy5nb29nbGVtYXAnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5vcGVuKHRoaXMubmFtZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJCgnYm9keScpLmZpbmQoJ2Zvcm0ubG9jYXRvckZvcm0nKS5zdWJtaXQoZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB2YXIgJGZvcm0gPSBqUXVlcnkodGhpcyk7XHJcbiAgICAgICAgICAgIGlmICgkKCcjbG9jYXRvckZvcm0gYnV0dG9uJykucHJvcCgnZGlzYWJsZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICQoJyNub3Jlc3VsdHNlcnJvcicpLmhpZGUoKTtcclxuICAgICAgICAgICAgJCgnI21lc3NhZ2Uuc3VjY2VzcycpLmhpZGUoKTtcclxuICAgICAgICAgICAgJCgnI3Jlc3VsdHMnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICQoJyNsb2NhdG9yRm9ybSBidXR0b24nKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgICAgICAgICB2YXIgcGFyYW0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY291bnRyeUNvZGU6ICdVUycsXHJcbiAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2VVbml0OiAnbWknLFxyXG4gICAgICAgICAgICAgICAgICAgIHBvc3RhbENvZGU6ICQoJy5wb3N0YWxDaGVjaycpLnZhbCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIG1heGRpc3RhbmNlOiAkKCcubXhkaXN0YW5jZUNoZWNrJykudmFsKCksXHJcbiAgICAgICAgICAgICAgICAgICAgcmFwYWxhOiAkKCcucmFwYWxhQ2hlY2snKS5wcm9wKCdjaGVja2VkJyksXHJcbiAgICAgICAgICAgICAgICAgICAgdm1jOiAkKCcudm1jQ2hlY2snKS5wcm9wKCdjaGVja2VkJyksXHJcbiAgICAgICAgICAgICAgICAgICAgc3Rvcm06ICQoJy5zdG9ybUNoZWNrJykucHJvcCgnY2hlY2tlZCcpLFxyXG4gICAgICAgICAgICAgICAgICAgIGx1aHJqZW5zZW46ICQoJy5sdWhyQ2hlY2snKS5wcm9wKCdjaGVja2VkJyksXHJcbiAgICAgICAgICAgICAgICAgICAgYmx1ZWZveDogJCgnLmJsdWVmb3hDaGVjaycpLnByb3AoJ2NoZWNrZWQnKSxcclxuICAgICAgICAgICAgICAgICAgICB0ZXJtaW5hdG9yOiAkKCcudGVybWluYXRvckNoZWNrJykucHJvcCgnY2hlY2tlZCcpLFxyXG4gICAgICAgICAgICAgICAgICAgIHdpbGxpYW1zb246ICQoJy53aWxsaWFtQ2hlY2snKS5wcm9wKCdjaGVja2VkJyksXHJcbiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcng6ICQoJy50cmlnZ2VyQ2hlY2snKS5wcm9wKCdjaGVja2VkJyksXHJcbiAgICAgICAgICAgICAgICAgICAgc3VmaXg6ICQoJy5zdWZpeENoZWNrJykucHJvcCgnY2hlY2tlZCcpLFxyXG4gICAgICAgICAgICAgICAgICAgIG1hcmN1bTogJCgnLm1hcmN1bUNoZWNrJykucHJvcCgnY2hlY2tlZCcpLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0cmlrZW1hc3RlcjogJCgnLnN0cmlrZUNoZWNrJykucHJvcCgnY2hlY2tlZCcpXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2VydmljZVBhcmFtID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvdW50cnlDb2RlOiAnVVMnLFxyXG4gICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlVW5pdDogJ21pJyxcclxuICAgICAgICAgICAgICAgICAgICBwb3N0YWxDb2RlOiAkKCcucG9zdGFsQ2hlY2snKS52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICBtYXhkaXN0YW5jZTogJCgnLm14ZGlzdGFuY2VDaGVjaycpLnZhbCgpXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2YXIgdXJsID0gdXRpbC5hcHBlbmRQYXJhbXNUb1VybChVcmxzLnN0b3JlSnNvbiwgcGFyYW0pLFxyXG4gICAgICAgICAgICAgICAgc2VydmljZVVybCA9IHV0aWwuYXBwZW5kUGFyYW1zVG9VcmwoVXJscy5zZXJ2aWNlU3RvcmVKc29uLCBzZXJ2aWNlUGFyYW0pO1xyXG4gICAgICAgICAgICBpZiAoJCgnLnN0b3JlLUxvY2F0b3ItcGFnZScpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6ICRmb3JtLnNlcmlhbGl6ZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFsZXJ0KGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjbG9jYXRvckZvcm0gYnV0dG9uJykucmVtb3ZlUHJvcCgnZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuc3RvcmVDb3VudCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNzdG9yZUNvdW50JykuaHRtbChkYXRhLnN0b3JlQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI21lc3NhZ2Uuc3VjY2VzcycpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdG9yZSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGh0bWwgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbGxTdG9yZUh0bWwgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5zdG9yZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9yZSA9IGRhdGEuc3RvcmVzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sLnB1c2goJzxkaXYgY2xhc3M9XCJzdG9yZXJlc3VsdFwiPjxkaXYgY2xhc3M9XCJzdG9yZWluZm9ybWF0aW9uXCI+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbC5wdXNoKCc8aDIgY2xhc3M9XCJpbnB1dC1zdHlsZVwiPicgKyBzdG9yZS5uYW1lICsgJzwvaDI+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbC5wdXNoKCc8ZGl2PicgKyBzdG9yZS5hZGRyZXNzMSArICc8YnIvPicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwucHVzaChzdG9yZS5jaXR5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RvcmUuY2l0eSAhPSAnJyAmJiBzdG9yZS5zdGF0ZSAhPSAnJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sLnB1c2goJywnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbC5wdXNoKHN0b3JlLnN0YXRlICsgJyAnICsgc3RvcmUucG9zdGFsQ29kZSArICc8YnIgLz4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RvcmUucGhvbmUgIT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbC5wdXNoKCc8ZGl2IGNsYXNzPVwic3RvcmVwaG9uZVwiPicgKyBzdG9yZS5waG9uZSArICc8L2Rpdj4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0b3JlLnN0b3JlSG91cnMgIT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbC5wdXNoKCc8ZGl2IGNsYXNzPVwic3RvcmVIb3Vyc1wiPicgKyBzdG9yZS5zdG9yZUhvdXJzICsgJzwvZGl2PicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RvcmUuc3RvcmVFdmVudHMgIT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbC5wdXNoKCc8ZGl2IGNsYXNzPVwic3RvcmVFdmVudHNcIj4nICsgc3RvcmUuc3RvcmVFdmVudHMgKyAnPC9kaXY+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwucHVzaCgnPC9kaXY+PC9kaXY+PGRpdiBjbGFzcz1cInN0b3JlYnJhbmRzXCI+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbC5wdXNoKCc8c3BhbiBjbGFzcz1cImJyYW5kbGFiZWxcIj4nICsgUmVzb3VyY2VzLkJSQU5EX0NBVEVHT1JZMSArICc8L3NwYW4+PGhyPjwvaHI+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0b3JlLmN1c3RvbS5icmFuZHMucmFwYWxhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwucHVzaCgnPGltZyBhbHQ9JyArIFJlc291cmNlcy5TVE9SRUxPQ0FURVJfUkFQQUxBICsgJyBjbGFzcz1cImxvZ28gbWVkaXVtXCIgc3JjPScgKyBVcmxzLnJhcGFsYWxvZ28gKyAnPjwvaW1nPicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RvcmUuY3VzdG9tLmJyYW5kcy52bWMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbC5wdXNoKCc8aW1nIGFsdD0nICsgUmVzb3VyY2VzLlNUT1JFTE9DQVRFUl9WTUMgKyAnIGNsYXNzPVwibG9nbyBtZWRpdW1cIiBzcmM9JyArIFVybHMudm1jbG9nbyArICc+PC9pbWc+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdG9yZS5jdXN0b20uYnJhbmRzLnN1Zml4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwucHVzaCgnPGltZyBhbHQ9JyArIFJlc291cmNlcy5TVE9SRUxPQ0FURVJfU1VGSVggKyAnIGNsYXNzPVwibG9nbyBtZWRpdW1cIiBzcmM9JyArIFVybHMuc3VmaXhsb2dvICsgJz48L2ltZz4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0b3JlLmN1c3RvbS5icmFuZHMuc3Rvcm0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbC5wdXNoKCc8aW1nIGFsdD0nICsgUmVzb3VyY2VzLlNUT1JFTE9DQVRFUl9TVE9STSArICcgY2xhc3M9XCJsb2dvIG1lZGl1bVwiIHNyYz0nICsgVXJscy5zdG9ybWxvZ28gKyAnPjwvaW1nPicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RvcmUuY3VzdG9tLmJyYW5kcy50cmlnZ2VyeCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sLnB1c2goJzxpbWcgYWx0PScgKyBSZXNvdXJjZXMuU1RPUkVMT0NBVEVSX1RSSUdHRVJYICsgJyBjbGFzcz1cImxvZ28gbWVkaXVtXCIgc3JjPScgKyBVcmxzLnRyaWdnZXJ4bG9nbyArICc+PC9pbWc+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdG9yZS5jdXN0b20uYnJhbmRzLmx1aHJqZW5zZW4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbC5wdXNoKCc8aW1nIGFsdD0nICsgUmVzb3VyY2VzLlNUT1JFTE9DQVRFUl9MVUhSSk9OU09OICsgJyBjbGFzcz1cImxvZ28gbWVkaXVtXCIgc3JjPScgKyBVcmxzLmx1aHJqb25zb25sb2dvICsgJz48L2ltZz4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0b3JlLmN1c3RvbS5icmFuZHMudGVybWluYXRvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sLnB1c2goJzxpbWcgYWx0PScgKyBSZXNvdXJjZXMuU1RPUkVMT0NBVEVSX1RFUk1JTkFUT1IgKyAnIGNsYXNzPVwibG9nbyBtZWRpdW1cIiBzcmM9JyArIFVybHMudGVybWluYXRvcmxvZ28gKyAnPjwvaW1nPicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RvcmUuY3VzdG9tLmJyYW5kcy5ibHVlZm94KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwucHVzaCgnPGltZyBhbHQ9JyArIFJlc291cmNlcy5TVE9SRUxPQ0FURVJfQkxVRUZPWCArICcgY2xhc3M9XCJsb2dvIG1lZGl1bVwiIHNyYz0nICsgVXJscy5ibHVlZm94bG9nbyArICc+PC9pbWc+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdG9yZS5jdXN0b20uYnJhbmRzLndpbGxpYW1zb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbC5wdXNoKCc8aW1nIGFsdD0nICsgUmVzb3VyY2VzLlNUT1JFTE9DQVRFUl9XSUxMSUFNU09OICsgJyBjbGFzcz1cImxvZ28gbWVkaXVtXCIgc3JjPScgKyBVcmxzLndpbGxpYW1zb25sb2dvICsgJz48L2ltZz4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0b3JlLmN1c3RvbS5icmFuZHMubWFyY3VtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwucHVzaCgnPGltZyBhbHQ9JyArIFJlc291cmNlcy5TVE9SRUxPQ0FURVJfTUFSQ1VNICsgJyBjbGFzcz1cImxvZ28gbWVkaXVtXCIgc3JjPScgKyBVcmxzLm1hcmN1bWxvZ28gKyAnPjwvaW1nPicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RvcmUuY3VzdG9tLmJyYW5kcy5zdHJpa2VtYXN0ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbC5wdXNoKCc8aW1nIGFsdD0nICsgUmVzb3VyY2VzLlNUT1JFTE9DQVRFUl9TVFJJS0VNQVNURVIgKyAnIGNsYXNzPVwibG9nbyBtZWRpdW1cIiBzcmM9JyArIFVybHMuc3RyaWtlbWFzdGVybG9nbyArICc+PC9pbWc+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIGlmKHN0b3JlLmN1c3RvbS5icmFuZHMub3R0ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbC5wdXNoKCc8aW1nIGFsdD1cIiR7UmVzb3VyY2UubXNnKCdzdG9yZWxvY2F0b3Iub3R0ZXInLCdmb3JtcycsbnVsbCl9XCIgY2xhc3M9XCJsb2dvIG1lZGl1bVwiIHNyYz1cIiR7VVJMVXRpbHMuc3RhdGljVVJMKCcvaW1hZ2VzL2xvZ28tb3R0ZXIuanBnJyl9XCI+PC9pbWc+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwucHVzaCgnPC9kaXY+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbC5wdXNoKCc8ZGl2IGNsYXNzPVwic3RvcmVtYXBcIj48YSBjbGFzcz1cImJ1dHRvbiBnb29nbGVtYXBcIiBuYW1lPVwiJyArIHN0b3JlLm1hcCArICdcIj4nICsgUmVzb3VyY2VzLlNUT1JFTE9DQVRFUl9NQVAgKyAnPC9hPicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdG9yZS53ZWJzaXRlICE9ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwucHVzaCgnPGJyIC8+PGEgdGFyZ2V0PVwiX2JsYW5rXCIgY2xhc3M9XCJidXR0b25cIiBocmVmPVwiJyArIHN0b3JlLndlYnNpdGUgKyAnXCI+JyArIFJlc291cmNlcy5TVE9SRUxPQ0FURVJfV0VCU0lURSArICc8L2E+Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sLnB1c2goJzwvZGl2PjxkaXYgY2xhc3M9XCJjbGVhclwiPjwhLS0gRkxPQVQgQ0xFQVIgLS0+PC9kaXY+PC9kaXY+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsU3RvcmVIdG1sICs9IGh0bWwuam9pbignJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCdkaXYuc3RvcmVsb2NhdG9yc2VhcmNocmVzdWx0cycpLmh0bWwoYWxsU3RvcmVIdG1sKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNyZXN1bHRzJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI21lc3NhZ2Uuc3VjY2VzcycpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNyZXN1bHRzJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI25vcmVzdWx0c2Vycm9yJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLlN0YXR1cyA9PT0gNDAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkoJy5lbWFpbC1mb3JtICNtZXNzYWdlJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ3N1Y2Nlc3MtZW1haWwnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcygnZXJyb3ItYWxlcnQnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5odG1sKGRhdGEuTWVzc2FnZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgeyAvLyAyMDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5lbWFpbC1mb3JtICNtZXNzYWdlJykucmVtb3ZlQ2xhc3MoJ2Vycm9yLWFsZXJ0JykuYWRkQ2xhc3MoJ3N1Y2Nlc3MtZW1haWwnKS5odG1sKCdZb3UgaGF2ZSBzdWNjZXNzZnVsbHkgc3Vic2NyaWJlZCB0byB0aGUgUmFwYWxhIEVtYWlsIE5ld3NsZXR0ZXIuJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmVtYWlsLWZvcm0gaW5wdXQsIC5lbWFpbC1mb3JtIHNlbGVjdCcpLnZhbCgnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmdvb2dsZW1hcCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuKHRoaXMubmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCQoJy5zZXJ2aWNlLWxvY2F0b3ItZm9ybScpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgICAgIHVybDogc2VydmljZVVybCxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiAkZm9ybS5zZXJpYWxpemUoKSxcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhbGVydChkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnI2xvY2F0b3JGb3JtIGJ1dHRvbicpLnJlbW92ZVByb3AoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLnN0b3JlQ291bnQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjc3RvcmVDb3VudCcpLmh0bWwoZGF0YS5zdG9yZUNvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNtZXNzYWdlLnN1Y2Nlc3MnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RvcmUgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBodG1sID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWxsU3RvcmVIdG1sID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEuc3RvcmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmUgPSBkYXRhLnN0b3Jlc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbC5wdXNoKCc8ZGl2IGNsYXNzPVwic3RvcmVyZXN1bHRcIj48ZGl2IGNsYXNzPVwic3RvcmVpbmZvcm1hdGlvblwiPicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwucHVzaCgnPGgyIGNsYXNzPVwiaW5wdXQtc3R5bGVcIj4nICsgc3RvcmUubmFtZSArICc8L2gyPicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwucHVzaCgnPGRpdj4nICsgc3RvcmUuYWRkcmVzczEgKyAnPGJyLz4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sLnB1c2goc3RvcmUuY2l0eSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0b3JlLmNpdHkgIT0gJycgJiYgc3RvcmUuc3RhdGUgIT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbC5wdXNoKCcsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwucHVzaChzdG9yZS5zdGF0ZSArICcgJyArIHN0b3JlLnBvc3RhbENvZGUgKyAnPGJyIC8+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0b3JlLnBob25lICE9ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwucHVzaCgnPGRpdiBjbGFzcz1cInN0b3JlcGhvbmVcIj4nICsgc3RvcmUucGhvbmUgKyAnPC9kaXY+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdG9yZS5zdG9yZUhvdXJzICE9ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwucHVzaCgnPGRpdiBjbGFzcz1cInN0b3JlSG91cnNcIj4nICsgc3RvcmUuc3RvcmVIb3VycyArICc8L2Rpdj4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0b3JlLnN0b3JlRXZlbnRzICE9ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwucHVzaCgnPGRpdiBjbGFzcz1cInN0b3JlRXZlbnRzXCI+JyArIHN0b3JlLnN0b3JlRXZlbnRzICsgJzwvZGl2PicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sLnB1c2goJzwvZGl2PjwvZGl2PicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwucHVzaCgnPGRpdiBjbGFzcz1cInN0b3JlbWFwXCI+PGRpdiBjbGFzcz1cInN0b3JlZGlzdGFuY2VcIj4nICsgc3RvcmUuZGlzdGFuY2UgKyAnPC9kaXY+PGEgY2xhc3M9XCJidXR0b24gZ29vZ2xlbWFwXCIgbmFtZT1cIicgKyBzdG9yZS5tYXAgKyAnXCI+JyArIFJlc291cmNlcy5TVE9SRUxPQ0FURVJfTUFQICsgJzwvYT4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RvcmUud2Vic2l0ZSAhPSAnJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sLnB1c2goJzxiciAvPjxhIHRhcmdldD1cIl9ibGFua1wiIGNsYXNzPVwiYnV0dG9uXCIgaHJlZj1cIicgKyBzdG9yZS53ZWJzaXRlICsgJ1wiPicgKyBSZXNvdXJjZXMuU1RPUkVMT0NBVEVSX1dFQlNJVEUgKyAnPC9hPicpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbC5wdXNoKCc8L2Rpdj48ZGl2IGNsYXNzPVwiY2xlYXJcIj48IS0tIEZMT0FUIENMRUFSIC0tPjwvZGl2PjwvZGl2PicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbFN0b3JlSHRtbCArPSBodG1sLmpvaW4oJycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnZGl2LnN0b3JlbG9jYXRvcnNlYXJjaHJlc3VsdHMnKS5odG1sKGFsbFN0b3JlSHRtbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjcmVzdWx0cycpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNtZXNzYWdlLnN1Y2Nlc3MnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjcmVzdWx0cycpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNub3Jlc3VsdHNlcnJvcicpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuZ29vZ2xlbWFwJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm9wZW4odGhpcy5uYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyQoJyNsb2NhdG9yRm9ybScpLmRhdGEoJ3ZhbGlkYXRvcicsJycpLnZhbGlkYXRlKHN0b3JlbG9jYXRvckZvcm1TZXR0aW5ncyk7XHJcbiAgICB9XHJcbn07XHJcbm1vZHVsZS5leHBvcnRzID0gc3RvcmVMb2NhdG9yO1xyXG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG52YXIgcGFnZSA9IHJlcXVpcmUoJy4uL3BhZ2UnKSxcclxuICAgIGFjY291bnQgPSByZXF1aXJlKCcuL2FjY291bnQnKSxcclxuICAgIHV0aWwgPSByZXF1aXJlKCcuLi91dGlsJyk7XHJcblxyXG5leHBvcnRzLmluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvL1N0YXJ0IEpJUkEgUFJFVi00MTIgOiBTRyBJc3N1ZTogUGFzc3dvcmQgcmVzZXQgb3ZlcmxheSBkaXNwbGF5ZWQgYXMgYSBwYWdlXHJcbiAgICBhY2NvdW50LmluaXRDYXJ0TG9naW4oKTtcclxuICAgICQoJyNlZGl0QWRkcmVzcycpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcGFnZS5yZWRpcmVjdCh1dGlsLmFwcGVuZFBhcmFtVG9VUkwoVXJscy53aXNobGlzdEFkZHJlc3MsICdBZGRyZXNzSUQnLCAkKHRoaXMpLnZhbCgpKSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvL2FkZCBqcyBsb2dpYyB0byByZW1vdmUgdGhlICwgZnJvbSB0aGUgcXR5IGZlaWxkIHRvIHBhc3MgcmVnZXggZXhwcmVzc2lvbiBvbiBjbGllbnQgc2lkZVxyXG4gICAgJCgnLm9wdGlvbi1xdWFudGl0eS1kZXNpcmVkIGlucHV0Jykub24oJ2ZvY3Vzb3V0JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQodGhpcykudmFsKCQodGhpcykudmFsKCkucmVwbGFjZSgnLCcsICcnKSk7XHJcbiAgICB9KTtcclxufTtcclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxudmFyIGltYWdlc0xvYWRlZCA9IHJlcXVpcmUoJ2ltYWdlc2xvYWRlZCcpLFxyXG4gICAgdXRpbCA9IHJlcXVpcmUoJy4vdXRpbCcpLFxyXG4gICAgcXVpY2t2aWV3ID0gcmVxdWlyZSgnLi9xdWlja3ZpZXcnKTtcclxuXHJcbmZ1bmN0aW9uIGluaXRRdWlja1ZpZXdCdXR0b25zKCkge1xyXG4gICAgJCgnLnByb2R1Y3QtdGlsZSAucHJvZHVjdC1pbWFnZScpLm9uKCdtb3VzZWVudGVyJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciAkcXZCdXR0b24gPSAkKCcjcXVpY2t2aWV3YnV0dG9uJyk7XHJcbiAgICAgICAgaWYgKCRxdkJ1dHRvbi5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgJHF2QnV0dG9uID0gJCgnPGEgaWQ9XCJxdWlja3ZpZXdidXR0b25cIiBjbGFzcz1cInF1aWNrdmlld1wiPicgKyBSZXNvdXJjZXMuUVVJQ0tfVklFVyArICc8aSBjbGFzcz1cImZhIGZhLWFycm93cy1hbHRcIj48L2k+PC9hPicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgJGxpbmsgPSAkKHRoaXMpLmZpbmQoJy50aHVtYi1saW5rJyk7XHJcbiAgICAgICAgJHF2QnV0dG9uLmF0dHIoe1xyXG4gICAgICAgICAgICAnaHJlZic6ICRsaW5rLmF0dHIoJ2hyZWYnKSxcclxuICAgICAgICAgICAgJ3RpdGxlJzogJGxpbmsuYXR0cigndGl0bGUnKVxyXG4gICAgICAgIH0pLmFwcGVuZFRvKHRoaXMpO1xyXG4gICAgICAgICRxdkJ1dHRvbi5vZmYoJ2NsaWNrJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBxdWlja3ZpZXcuc2hvdyh7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICQodGhpcykuYXR0cignaHJlZicpLnNwbGl0KCcjJylbMF0sIC8vUFJFViBKSVJBIFBSRVYtMjU1IDpQTFA6IE9uIENsaWNrIFF1aWNrIHZpZXcgbmF2aWdhdGluZyB0byBhIHdyb25nIHBhZ2Ugd2hlbiB1c2VyIGZpcnN0IGNoYW5nZXMgdGhlIHN3YXRjaGVzLiBUYWtpbmcgb25seSBocmVmLlxyXG4gICAgICAgICAgICAgICAgc291cmNlOiAncXVpY2t2aWV3J1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBncmlkVmlld1RvZ2dsZSgpIHtcclxuICAgIHZhciBDb29raWVJbWFnZVZhbHVlID0gdXRpbC5yZWFkQ29va2llKCdJbWFnZVNpemUnKTtcclxuICAgIC8vVGhpcyBpcyB1c2VkIHRvIHBlcnNpc3QgdGhlIEltYWdlU2l6ZXMgb3ZlcmFsbCBzaXRlLlxyXG4gICAgaWYgKENvb2tpZUltYWdlVmFsdWUgIT0gbnVsbCkge1xyXG4gICAgICAgIGlmIChDb29raWVJbWFnZVZhbHVlID09ICdsaXN0dmlldycpIHtcclxuICAgICAgICAgICAgalF1ZXJ5KCcuc2VhcmNoLXJlc3VsdC1jb250ZW50JykuYWRkQ2xhc3MoJ3dpZGUtdGlsZXMnKTtcclxuICAgICAgICAgICAgalF1ZXJ5KCcucHJvZHVjdC1pbWFnZScpLmFkZENsYXNzKCdncmlkJyk7XHJcbiAgICAgICAgICAgICQoJy50b2dnbGUtZ3JpZCBpJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAkKCcudG9nZ2xlLWdyaWQgLmxpc3R2aWV3JykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAkKCcuc2VhcmNoLXJlc3VsdC1jb250ZW50LndpZGUtdGlsZXMgLnByb2R1Y3QtdGlsZSAucHJvZHVjdC1pbWFnZSBpbWcnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3JjID0gdGhpcy5zcmMucmVwbGFjZSgnc3c9MTMwJnNoPTkyJywgJ3N3PTM1MiZzaD0yNTEnKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICQoJy5wcm9kdWN0LWltZycpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCdpbWcnKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykuYXBwZW5kKCc8aW1nIHNyYz1cIicgKyAkKHRoaXMpLmF0dHIoJ2RhdGEtbGFyZ2Utc3JjJykgKyAnXCIgdGl0bGU9XCInICsgJCh0aGlzKS5hdHRyKCdkYXRhLXRpdGxlJykgKyAnXCIgYWx0PVwiJyArICQodGhpcykuYXR0cignZGF0YS1hbHQnKSArICdcIj48L2ltZz4nKTtcclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBqUXVlcnkoJy5zZWFyY2gtcmVzdWx0LWNvbnRlbnQnKS5yZW1vdmVDbGFzcygnd2lkZS10aWxlcycpO1xyXG4gICAgICAgICAgICBqUXVlcnkoJy5wcm9kdWN0LWltYWdlJykucmVtb3ZlQ2xhc3MoJ2dyaWQnKTtcclxuICAgICAgICAgICAgJCgnLnRvZ2dsZS1ncmlkIGknKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICQoJy50b2dnbGUtZ3JpZCAuZ3JpZHZpZXcnKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICQoJy5zZWFyY2gtcmVzdWx0LWNvbnRlbnQud2lkZS10aWxlcyAucHJvZHVjdC10aWxlIC5wcm9kdWN0LWltYWdlIGltZycpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zcmMgPSB0aGlzLnNyYy5yZXBsYWNlKCdzdz0xMzAmc2g9OTInLCAnc3c9MTMwJnNoPTkyJyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAkKCcucHJvZHVjdC1pbWcnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnaW1nJykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmFwcGVuZCgnPGltZyBzcmM9XCInICsgJCh0aGlzKS5hdHRyKCdkYXRhLXNtYWxsLXNyYycpICsgJ1wiIHRpdGxlPVwiJyArICQodGhpcykuYXR0cignZGF0YS10aXRsZScpICsgJ1wiIGFsdD1cIicgKyAkKHRoaXMpLmF0dHIoJ2RhdGEtYWx0JykgKyAnXCI+PC9pbWc+Jyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCQoJy5saXN0dmlldy5hY3RpdmUnKS5sZW5ndGggPT0gMSkge1xyXG4gICAgICAgICAgICAkKCcucHRfcHJvZHVjdC1zZWFyY2gtcmVzdWx0JykuYXR0cignZGF0YS12aWV3VHlwZScsICdsaXN0dmlldycpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICQoJy5wdF9wcm9kdWN0LXNlYXJjaC1yZXN1bHQnKS5hdHRyKCdkYXRhLXZpZXdUeXBlJywgJ2dyaWR2aWV3Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgICQoJy50b2dnbGUtZ3JpZCBpJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBkYXRlT2JqID0gbmV3IERhdGUoKTtcclxuICAgICAgICBkYXRlT2JqLnNldFRpbWUoZGF0ZU9iai5nZXRUaW1lKCkgKyAoNjAgKiA2MCAqIDEwMDApKTtcclxuICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnZ3JpZHZpZXcnKSkge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSAnSW1hZ2VTaXplPScgKyAnZ3JpZHZpZXcnICsgJzsgZXhwaXJlcz0nICsgZGF0ZU9iai50b1VUQ1N0cmluZygpICsgJzsgcGF0aD0vJztcclxuICAgICAgICAgICAgJCgnLnRvZ2dsZS1ncmlkIGknKS5wYXJlbnQoJy50b2dnbGUtZ3JpZCcpLnJlbW92ZUNsYXNzKCd3aWRlJyk7XHJcbiAgICAgICAgICAgICQoJy50b2dnbGUtZ3JpZCBpJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgnLnRvZ2dsZS1ncmlkJykucmVtb3ZlQ2xhc3MoJ3dpZGUnKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICQoJy5zZWFyY2gtcmVzdWx0LWNvbnRlbnQnKS5yZW1vdmVDbGFzcygnd2lkZS10aWxlcycpO1xyXG4gICAgICAgICAgICAkKCcucHJvZHVjdC1pbWcnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnaW1nJykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmFwcGVuZCgnPGltZyBzcmM9XCInICsgJCh0aGlzKS5hdHRyKCdkYXRhLWxhcmdlLXNyYycpICsgJ1wiIHRpdGxlPVwiJyArICQodGhpcykuYXR0cignZGF0YS10aXRsZScpICsgJ1wiIGFsdD1cIicgKyAkKHRoaXMpLmF0dHIoJ2RhdGEtYWx0JykgKyAnXCI+PC9pbWc+Jyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoJCh0aGlzKS5oYXNDbGFzcygnbGlzdHZpZXcnKSkge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSAnSW1hZ2VTaXplPScgKyAnbGlzdHZpZXcnICsgJzsgZXhwaXJlcz0nICsgZGF0ZU9iai50b1VUQ1N0cmluZygpICsgJzsgcGF0aD0vJztcclxuICAgICAgICAgICAgJCgnLnRvZ2dsZS1ncmlkIGknKS5wYXJlbnQoJy50b2dnbGUtZ3JpZCcpLnJlbW92ZUNsYXNzKCd3aWRlJyk7XHJcbiAgICAgICAgICAgICQoJy50b2dnbGUtZ3JpZCBpJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgnLnRvZ2dsZS1ncmlkJykuYWRkQ2xhc3MoJ3dpZGUnKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICQoJy5zZWFyY2gtcmVzdWx0LWNvbnRlbnQnKS5hZGRDbGFzcygnd2lkZS10aWxlcycpO1xyXG4gICAgICAgICAgICAkKCcuc2VhcmNoLXJlc3VsdC1jb250ZW50LndpZGUtdGlsZXMgLnByb2R1Y3QtdGlsZSAucHJvZHVjdC1pbWFnZSBpbWcnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3JjID0gdGhpcy5zcmMucmVwbGFjZSgnc3c9MTMwJnNoPTkyJywgJ3N3PTM1MiZzaD0yNTEnKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICQoJy5wcm9kdWN0LWltZycpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCdpbWcnKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykuYXBwZW5kKCc8aW1nIHNyYz1cIicgKyAkKHRoaXMpLmF0dHIoJ2RhdGEtc21hbGwtc3JjJykgKyAnXCIgdGl0bGU9XCInICsgJCh0aGlzKS5hdHRyKCdkYXRhLXRpdGxlJykgKyAnXCIgYWx0PVwiJyArICQodGhpcykuYXR0cignZGF0YS1hbHQnKSArICdcIj48L2ltZz4nKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBjdXJyT2JqID0gJCh0aGlzKTtcclxuICAgICAgICBqUXVlcnkoJy50b2dnbGUtZ3JpZCAuZmEnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgJChjdXJyT2JqKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgaWYgKCQoJy5sYXJnZS5hY3RpdmUnKS5sZW5ndGggPT0gMSkge1xyXG4gICAgICAgICAgICAkKCcucHRfcHJvZHVjdC1zZWFyY2gtcmVzdWx0JykuYXR0cignZGF0YS12aWV3VHlwZScsICdsaXN0dmlldycpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICQoJy5wdF9wcm9kdWN0LXNlYXJjaC1yZXN1bHQnKS5hdHRyKCdkYXRhLXZpZXdUeXBlJywgJ2dyaWR2aWV3Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG59XHJcblxyXG4vKipcclxuICogQHByaXZhdGVcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBkZXNjcmlwdGlvbiBJbml0aWFsaXplcyBldmVudHMgb24gdGhlIHByb2R1Y3QtdGlsZSBmb3IgdGhlIGZvbGxvd2luZyBlbGVtZW50czpcclxuICogLSBzd2F0Y2hlc1xyXG4gKiAtIHRodW1ibmFpbHNcclxuICovXHJcbmZ1bmN0aW9uIGluaXRpYWxpemVFdmVudHMoKSB7XHJcbiAgICBpbml0UXVpY2tWaWV3QnV0dG9ucygpO1xyXG4gICAgZ3JpZFZpZXdUb2dnbGUoKTtcclxuICAgICQoJy5zd2F0Y2gtbGlzdCcpLm9uKCdtb3VzZWxlYXZlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIFJlc3RvcmUgY3VycmVudCB0aHVtYiBpbWFnZVxyXG4gICAgICAgIHZhciAkdGlsZSA9ICQodGhpcykuY2xvc2VzdCgnLnByb2R1Y3QtdGlsZScpLFxyXG4gICAgICAgICAgICAkdGh1bWIgPSAkdGlsZS5maW5kKCcucHJvZHVjdC1pbWFnZSAudGh1bWItbGluayBpbWcnKS5lcSgwKSxcclxuICAgICAgICAgICAgZGF0YSA9ICR0aHVtYi5kYXRhKCdjdXJyZW50Jyk7XHJcbiAgICAgICAgJHRodW1iLmF0dHIoe1xyXG4gICAgICAgICAgICBzcmM6IGRhdGEuc3JjLFxyXG4gICAgICAgICAgICBhbHQ6IGRhdGEuYWx0LFxyXG4gICAgICAgICAgICB0aXRsZTogZGF0YS50aXRsZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoJy5zZWFyY2gtcmVzdWx0LWNvbnRlbnQud2lkZS10aWxlcyAucHJvZHVjdC10aWxlIC5wcm9kdWN0LWltYWdlIGEudGh1bWItbGluay5jdXJyZW50aW1nIGltZycpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aGlzLnNyYyA9IHRoaXMuc3JjLnJlcGxhY2UoJ3N3PTEzMCZzaD05MicsICdzdz0zNTImc2g9MjUxJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgICQoJy5zd2F0Y2gtbGlzdCAuc3dhdGNoJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ3NlbGVjdGVkJykpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyICR0aWxlID0gJCh0aGlzKS5jbG9zZXN0KCcucHJvZHVjdC10aWxlJyk7XHJcbiAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuc3dhdGNoLWxpc3QnKS5maW5kKCcuc3dhdGNoLnNlbGVjdGVkJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcclxuICAgICAgICAkdGlsZS5maW5kKCcudGh1bWItbGluaycpLmF0dHIoJ2hyZWYnLCAkKHRoaXMpLmF0dHIoJ2hyZWYnKSk7XHJcbiAgICAgICAgJHRpbGUuZmluZCgnbmFtZS1saW5rJykuYXR0cignaHJlZicsICQodGhpcykuYXR0cignaHJlZicpKTtcclxuXHJcbiAgICAgICAgdmFyIGRhdGEgPSAkKHRoaXMpLmNoaWxkcmVuKCdpbWcnKS5maWx0ZXIoJzpmaXJzdCcpLmRhdGEoJ3RodW1iJyk7XHJcbiAgICAgICAgdmFyICR0aHVtYiA9ICR0aWxlLmZpbmQoJy5wcm9kdWN0LWltYWdlIC50aHVtYi1saW5rIGltZycpLmVxKDApO1xyXG4gICAgICAgIHZhciBjdXJyZW50QXR0cnMgPSB7XHJcbiAgICAgICAgICAgIHNyYzogZGF0YS5zcmMsXHJcbiAgICAgICAgICAgIGFsdDogZGF0YS5hbHQsXHJcbiAgICAgICAgICAgIHRpdGxlOiBkYXRhLnRpdGxlXHJcbiAgICAgICAgfTtcclxuICAgICAgICAkdGh1bWIuY2xvc2VzdCgnLnRodW1iLWxpbmsnKS5hZGRDbGFzcygnY3VycmVudGltZycpO1xyXG4gICAgICAgICR0aHVtYi5hdHRyKGN1cnJlbnRBdHRycyk7XHJcbiAgICAgICAgJHRodW1iLmRhdGEoJ2N1cnJlbnQnLCBjdXJyZW50QXR0cnMpO1xyXG5cclxuICAgICAgICAvKlN0YXJ0IEpJUkEgUFJFVi00NjYgOiBQcm9kdWN0IGltYWdlcyBhcmUgbm90IHVwZGF0aW5nIGluIHRoZSBjb21wYXJlIHNlY3Rpb24gd2hlbiB0aGUgY29sb3Igc3dhdGNoZXMgYXJlIGNoYW5nZWQgaW4gUExQLiovXHJcbiAgICAgICAgdmFyIHBpZCA9ICQodGhpcykuY2xvc2VzdCgnLnByb2R1Y3QtdGlsZScpLmF0dHIoJ2RhdGEtaXRlbWlkJyk7XHJcbiAgICAgICAgJCgnLmNvbXBhcmUtaXRlbXMtcGFuZWwgLmNvbXBhcmUtaXRlbScpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgY29tcGFyZWlkID0gJCh0aGlzKS5hdHRyKCdkYXRhLWl0ZW1pZCcpO1xyXG4gICAgICAgICAgICBpZiAocGlkID09PSBjb21wYXJlaWQpIHtcclxuICAgICAgICAgICAgICAgIHZhciAkY29tcGFyZSA9ICQodGhpcykuZmluZCgnLmNvbXBhcmUtaXRlbS1pbWFnZScpLmVxKDApO1xyXG4gICAgICAgICAgICAgICAgJGNvbXBhcmUuYXR0cihjdXJyZW50QXR0cnMpO1xyXG4gICAgICAgICAgICAgICAgJGNvbXBhcmUuZGF0YSgnY3VycmVudCcsIGN1cnJlbnRBdHRycyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAvKkVuZCBKSVJBIFBSRVYtNDY2Ki9cclxuICAgIH0pLmJpbmQoJ21vdXNlZW50ZXIgY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gZ2V0IGN1cnJlbnQgdGh1bWIgZGV0YWlsc1xyXG4gICAgICAgIHZhciAkdGlsZSA9ICQodGhpcykuY2xvc2VzdCgnLnByb2R1Y3QtdGlsZScpLFxyXG4gICAgICAgICAgICAkdGh1bWIgPSAkdGlsZS5maW5kKCcucHJvZHVjdC1pbWFnZSAudGh1bWItbGluayBpbWcnKS5lcSgwKSxcclxuICAgICAgICAgICAgZGF0YSA9ICQodGhpcykuY2hpbGRyZW4oJ2ltZycpLmZpbHRlcignOmZpcnN0JykuZGF0YSgndGh1bWInKSxcclxuICAgICAgICAgICAgY3VycmVudCA9ICR0aHVtYi5kYXRhKCdjdXJyZW50Jyk7XHJcblxyXG4gICAgICAgIC8vIElmIHRoaXMgaXMgdGhlIGZpcnN0IHRpbWUsIHRoZW4gcmVjb3JkIHRoZSBjdXJyZW50IGltZ1xyXG4gICAgICAgIGlmICghY3VycmVudCkge1xyXG4gICAgICAgICAgICAkdGh1bWIuZGF0YSgnY3VycmVudCcsIHtcclxuICAgICAgICAgICAgICAgIHNyYzogJHRodW1iWzBdLnNyYyxcclxuICAgICAgICAgICAgICAgIGFsdDogJHRodW1iWzBdLmFsdCxcclxuICAgICAgICAgICAgICAgIHRpdGxlOiAkdGh1bWJbMF0udGl0bGVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBTZXQgdGhlIHRpbGUgaW1hZ2UgdG8gdGhlIHZhbHVlcyBwcm92aWRlZCBvbiB0aGUgc3dhdGNoIGRhdGEgYXR0cmlidXRlc1xyXG4gICAgICAgICR0aHVtYi5hdHRyKHtcclxuICAgICAgICAgICAgc3JjOiBkYXRhLnNyYyxcclxuICAgICAgICAgICAgYWx0OiBkYXRhLmFsdCxcclxuICAgICAgICAgICAgdGl0bGU6IGRhdGEudGl0bGVcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKCcuc2VhcmNoLXJlc3VsdC1jb250ZW50LndpZGUtdGlsZXMgLnByb2R1Y3QtdGlsZSAucHJvZHVjdC1pbWFnZSBhLnRodW1iLWxpbmsuY3VycmVudGltZyBpbWcnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhpcy5zcmMgPSB0aGlzLnNyYy5yZXBsYWNlKCdzdz0xMzAmc2g9OTInLCAnc3c9MzUyJnNoPTI1MScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnRzLmluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgJHRpbGVzID0gJCgnLnRpbGVzLWNvbnRhaW5lciAucHJvZHVjdC10aWxlJyk7XHJcbiAgICBpZiAoJHRpbGVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGltYWdlc0xvYWRlZCgnLnRpbGVzLWNvbnRhaW5lcicpLm9uKCdkb25lJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICR0aWxlcy5zeW5jSGVpZ2h0KClcclxuICAgICAgICAgICAgLmVhY2goZnVuY3Rpb24gKGlkeCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5kYXRhKCdpZHgnLCBpZHgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgaW5pdGlhbGl6ZUV2ZW50cygpO1xyXG59O1xyXG5cclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxudmFyICRsb2FkZXI7XHJcblxyXG4vKipcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBkZXNjcmlwdGlvbiBTaG93cyBhbiBBSkFYLWxvYWRlciBvbiB0b3Agb2YgYSBnaXZlbiBjb250YWluZXJcclxuICogQHBhcmFtIHtFbGVtZW50fSBjb250YWluZXIgVGhlIEVsZW1lbnQgb24gdG9wIG9mIHdoaWNoIHRoZSBBSkFYLUxvYWRlciB3aWxsIGJlIHNob3duXHJcbiAqL1xyXG52YXIgc2hvdyA9IGZ1bmN0aW9uIChjb250YWluZXIpIHtcclxuICAgIHZhciB0YXJnZXQgPSAoIWNvbnRhaW5lciB8fCAkKGNvbnRhaW5lcikubGVuZ3RoID09PSAwKSA/ICQoJ2JvZHknKSA6ICQoY29udGFpbmVyKTtcclxuICAgICRsb2FkZXIgPSAkbG9hZGVyIHx8ICQoJy5sb2FkZXInKTtcclxuXHJcbiAgICBpZiAoJGxvYWRlci5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAkbG9hZGVyID0gJCgnPGRpdi8+JykuYWRkQ2xhc3MoJ2xvYWRlcicpXHJcbiAgICAgICAgICAgIC5hcHBlbmQoJCgnPGRpdi8+JykuYWRkQ2xhc3MoJ2xvYWRlci1pbmRpY2F0b3InKSwgJCgnPGRpdi8+JykuYWRkQ2xhc3MoJ2xvYWRlci1iZycpKTtcclxuICAgIH1cclxuICAgIHJldHVybiAkbG9hZGVyLmFwcGVuZFRvKHRhcmdldCkuc2hvdygpO1xyXG59O1xyXG4vKipcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBkZXNjcmlwdGlvbiBIaWRlcyBhbiBBSkFYLWxvYWRlclxyXG4gKi9cclxudmFyIGhpZGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAoJGxvYWRlcikge1xyXG4gICAgICAgICRsb2FkZXIuaGlkZSgpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuZXhwb3J0cy5zaG93ID0gc2hvdztcclxuZXhwb3J0cy5oaWRlID0gaGlkZTtcclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxudmFyIHF1aWNrdmlldyA9IHJlcXVpcmUoJy4vcXVpY2t2aWV3Jyk7XHJcblxyXG5mdW5jdGlvbiBpbml0UXVpY2t2aWV3QnV0dG9uQXNzZXQoKSB7XHJcbiAgICAkKCcucHJvZHVjdC1idXktY29udGVudC1hc3NldCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHF1aWNrdmlldy5zaG93KHtcclxuICAgICAgICAgICAgdXJsOiAkKHRoaXMpLmF0dHIoJ2hyZWYnKS5zcGxpdCgnIycpWzBdLFxyXG4gICAgICAgICAgICBzb3VyY2U6ICdxdWlja3ZpZXcnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoIDwgMTAyNCkge1xyXG4gICAgICAgICAgICAkKCcjUXVpY2tWaWV3RGlhbG9nJykuZGlhbG9nKCd3aWRnZXQnKS5wb3NpdGlvbih7XHJcbiAgICAgICAgICAgICAgICBteTogJ3RvcCsyMCcsXHJcbiAgICAgICAgICAgICAgICBhdDogJ3RvcCcsXHJcbiAgICAgICAgICAgICAgICBvZjogd2luZG93XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciAkcXVpY2t2aWV3QXNzZXQgPSAkKCcucHJvZHVjdC1idXktY29udGVudC1hc3NldC1pbml0Jyk7XHJcbiAgICBpZiAoJHF1aWNrdmlld0Fzc2V0Lmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGluaXRRdWlja3ZpZXdCdXR0b25Bc3NldCgpO1xyXG59XHJcblxyXG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG52YXIgZGlhbG9nID0gcmVxdWlyZSgnLi9kaWFsb2cnKSxcclxuICAgIHByb2R1Y3QgPSByZXF1aXJlKCcuL3BhZ2VzL3Byb2R1Y3QnKSxcclxuICAgIHByb2dyZXNzID0gcmVxdWlyZSgnLi9wcm9ncmVzcycpLFxyXG4gICAgdXRpbCA9IHJlcXVpcmUoJy4vdXRpbCcpLFxyXG4gICAgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xyXG5cclxudmFyIG1ha2VVcmwgPSBmdW5jdGlvbiAodXJsLCBzb3VyY2UsIHByb2R1Y3RMaXN0SUQpIHtcclxuICAgIGlmIChzb3VyY2UpIHtcclxuICAgICAgICB1cmwgPSB1dGlsLmFwcGVuZFBhcmFtVG9VUkwodXJsLCAnc291cmNlJywgc291cmNlKTtcclxuICAgIH1cclxuICAgIGlmIChwcm9kdWN0TGlzdElEKSB7XHJcbiAgICAgICAgdXJsID0gdXRpbC5hcHBlbmRQYXJhbVRvVVJMKHVybCwgJ3Byb2R1Y3RsaXN0aWQnLCBwcm9kdWN0TGlzdElEKTtcclxuICAgIH1cclxuICAgIHJldHVybiB1cmw7XHJcbn07XHJcblxyXG52YXIgcmVtb3ZlUGFyYW0gPSBmdW5jdGlvbiAodXJsKSB7XHJcbiAgICBpZiAodXJsLmluZGV4T2YoJz8nKSAhPT0gLTEpIHtcclxuICAgICAgICByZXR1cm4gdXJsLnN1YnN0cmluZygwLCB1cmwuaW5kZXhPZignPycpKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHVybDtcclxuICAgIH1cclxufTtcclxuXHJcbnZhciBxdWlja3ZpZXcgPSB7XHJcbiAgICBpbml0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmV4aXN0cygpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuJGNvbnRhaW5lciA9ICQoJzxkaXYvPicpLmF0dHIoJ2lkJywgJ1F1aWNrVmlld0RpYWxvZycpLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnByb2R1Y3RMaW5rcyA9ICQoJyNzZWFyY2gtcmVzdWx0LWl0ZW1zIC50aHVtYi1saW5rJykubWFwKGZ1bmN0aW9uIChpbmRleCwgdGh1bWJMaW5rKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkKHRodW1iTGluaykuYXR0cignaHJlZicpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuXHJcbiAgICBzZXR1cDogZnVuY3Rpb24gKHF2VXJsKSB7XHJcbiAgICAgICAgdmFyICRidG5OZXh0ID0gJCgnLnF1aWNrdmlldy1uZXh0JyksXHJcbiAgICAgICAgICAgICRidG5QcmV2ID0gJCgnLnF1aWNrdmlldy1wcmV2Jyk7XHJcblxyXG4gICAgICAgIHByb2R1Y3QuaW5pdCgpO1xyXG5cclxuICAgICAgICB0aGlzLnByb2R1Y3RMaW5rSW5kZXggPSBfKHRoaXMucHJvZHVjdExpbmtzKS5maW5kSW5kZXgoZnVuY3Rpb24gKHVybCkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVtb3ZlUGFyYW0odXJsKSA9PT0gcmVtb3ZlUGFyYW0ocXZVcmwpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBoaWRlIHRoZSBidXR0b25zIG9uIHRoZSBjb21wYXJlIHBhZ2Ugb3Igd2hlbiB0aGVyZSBhcmUgbm8gb3RoZXIgcHJvZHVjdHNcclxuICAgICAgICBpZiAodGhpcy5wcm9kdWN0TGlua3MubGVuZ3RoIDw9IDEgfHwgJCgnLmNvbXBhcmVyZW1vdmVjZWxsJykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAkYnRuTmV4dC5oaWRlKCk7XHJcbiAgICAgICAgICAgICRidG5QcmV2LmhpZGUoKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8qICBTdGFydCBKSVJBIFBSRVYtNTA6IE5leHQgYW5kIFByZXZpb3VzIGxpbmtzIHdpbGwgbm90IGJlIGRpc3BsYXllZCBvbiBQRFAgaWYgdXNlciBuYXZpZ2F0ZSBmcm9tIFF1aWNrIFZpZXcuXHJcbiAgICAgICAgICAgICAgQWRkZWQgY3VycmVudCBVUkwgcGFyYW1ldGVycyBhbmQgaW5kZXggdG8gdmlld2Z1bGxkZXRhaWxzIGxpbmtcclxuICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgdmFyIGEgPSAkKCcjdmlldy1mdWxsLWRldGFpbHMnKTtcclxuICAgICAgICAgICAgdmFyIHdsID0gd2luZG93LmxvY2F0aW9uO1xyXG4gICAgICAgICAgICB2YXIgcXNQYXJhbXMgPSAod2wuc2VhcmNoLmxlbmd0aCA+IDEpID8gdXRpbC5nZXRRdWVyeVN0cmluZ1BhcmFtcyh3bC5zZWFyY2guc3Vic3RyKDEpKSA6IHt9O1xyXG4gICAgICAgICAgICB2YXIgaGFzaFBhcmFtcyA9ICh3bC5oYXNoLmxlbmd0aCA+IDEpID8gdXRpbC5nZXRRdWVyeVN0cmluZ1BhcmFtcyh3bC5oYXNoLnN1YnN0cigxKSkgOiB7fTtcclxuICAgICAgICAgICAgdmFyIHBhcmFtcyA9ICQuZXh0ZW5kKGhhc2hQYXJhbXMsIHFzUGFyYW1zKTtcclxuICAgICAgICAgICAgcGFyYW1zLnN0YXJ0ID0gcGFyc2VJbnQodGhpcy5wcm9kdWN0TGlua0luZGV4LCAxMCkgKyAxO1xyXG4gICAgICAgICAgICB2YXIgdGlsZSA9ICQoJyNzZWFyY2gtcmVzdWx0LWl0ZW1zIC5wcm9kdWN0LXRpbGUnKS5maXJzdCgpO1xyXG4gICAgICAgICAgICBpZiAoIXBhcmFtcy5jZ2lkICYmIHRpbGUuZGF0YSgnY2dpZCcpICE9PSBudWxsICYmIHRpbGUuZGF0YSgnY2dpZCcpICE9PSAnJykge1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zLmNnaWQgPSB0aWxlLmRhdGEoJ2NnaWQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhLmF0dHIoJ2hyZWYnLCBhLmF0dHIoJ2hyZWYnKSArICcjJyArICQucGFyYW0ocGFyYW1zKSk7XHJcbiAgICAgICAgICAgIC8qRW5kIEpJUkEgUFJFVi01MCovXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5wcm9kdWN0TGlua0luZGV4ID09PSB0aGlzLnByb2R1Y3RMaW5rcy5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgICRidG5OZXh0LmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnByb2R1Y3RMaW5rSW5kZXggPT09IDApIHtcclxuICAgICAgICAgICAgJGJ0blByZXYuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRidG5OZXh0Lm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdGhpcy5uYXZpZ2F0ZVF1aWNrdmlldygxKTtcclxuICAgICAgICB9LmJpbmQodGhpcykpO1xyXG4gICAgICAgICRidG5QcmV2Lm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdGhpcy5uYXZpZ2F0ZVF1aWNrdmlldygtMSk7XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gc3RlcCAtIEhvdyBtYW55IHByb2R1Y3RzIGF3YXkgZnJvbSBjdXJyZW50IHByb2R1Y3QgdG8gbmF2aWdhdGUgdG8uIE5lZ2F0aXZlIG51bWJlciBtZWFucyBuYXZpZ2F0ZSBiYWNrd2FyZFxyXG4gICAgICovXHJcbiAgICBuYXZpZ2F0ZVF1aWNrdmlldzogZnVuY3Rpb24gKHN0ZXApIHtcclxuICAgICAgICAvLyBkZWZhdWx0IHN0ZXAgdG8gMFxyXG4gICAgICAgIHRoaXMucHJvZHVjdExpbmtJbmRleCArPSAoc3RlcCA/IHN0ZXAgOiAwKTtcclxuICAgICAgICB2YXIgdXJsID0gbWFrZVVybCh0aGlzLnByb2R1Y3RMaW5rc1t0aGlzLnByb2R1Y3RMaW5rSW5kZXhdLCAncXVpY2t2aWV3Jyk7XHJcbiAgICAgICAgZGlhbG9nLnJlcGxhY2Uoe1xyXG4gICAgICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICAgICAgY2FsbGJhY2s6IHRoaXMuc2V0dXAuYmluZCh0aGlzLCB1cmwpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGRlc2NyaXB0aW9uIHNob3cgcXVpY2sgdmlldyBkaWFsb2dcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gb3B0aW9ucy51cmwgLSB1cmwgb2YgdGhlIHByb2R1Y3QgZGV0YWlsc1xyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG9wdGlvbnMuc291cmNlIC0gc291cmNlIG9mIHRoZSBkaWFsb2cgdG8gYmUgYXBwZW5kZWQgdG8gVVJMXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gb3B0aW9ucy5wcm9kdWN0bGlzdGlkIC0gdG8gYmUgYXBwZW5kZWQgdG8gVVJMXHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcHRpb25zLmNhbGxiYWNrIC0gY2FsbGJhY2sgb25jZSB0aGUgZGlhbG9nIGlzIG9wZW5lZFxyXG4gICAgICovXHJcbiAgICBzaG93OiBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIHZhciB1cmw7XHJcbiAgICAgICAgaWYgKCF0aGlzLmV4aXN0cygpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5pdCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB1cmwgPSBtYWtlVXJsKG9wdGlvbnMudXJsLCBvcHRpb25zLnNvdXJjZSwgb3B0aW9ucy5wcm9kdWN0bGlzdGlkKTtcclxuICAgICAgICAkKCcjUXVpY2tWaWV3RGlhbG9nJykuZW1wdHkoKTtcclxuICAgICAgICB2YXIgcXVpY2tWaWV3RGlhbG9nID0gZGlhbG9nLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIHRhcmdldDogdGhpcy4kY29udGFpbmVyLFxyXG4gICAgICAgICAgICBvcHRpb25zOiB7XHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDUzMCxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiA3NjAsXHJcbiAgICAgICAgICAgICAgICBkaWFsb2dDbGFzczogJ3F1aWNrdmlldycsXHJcbiAgICAgICAgICAgICAgICB0aXRsZTogUmVzb3VyY2VzLlFVSUNLX1ZJRVdfUE9QVVBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHF1aWNrVmlld0RpYWxvZy5kaWFsb2coJ29wZW4nKTtcclxuICAgICAgICBwcm9ncmVzcy5zaG93KCcjUXVpY2tWaWV3RGlhbG9nJyk7XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAkKHF1aWNrVmlld0RpYWxvZykuYXBwZW5kKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgcHJvZHVjdC5pbml0KCk7XHJcbiAgICAgICAgICAgICAgICBwcm9ncmVzcy5oaWRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAvL1BSRVZBSUwtQWRkZWQgZm9yIEdBIGludGVncmF0aW9uXHJcbiAgICAgICAgLy9HQWNvbW1lbnRlZFxyXG4gICAgICAgIGlmIChpc0V2ZW50VHJhY2tpbmdFbmFibGVkICYmIGlzR29vZ2xlQW5hbHl0aWNzRW5hYmxlZCkge1xyXG4gICAgICAgICAgICBnb29nbGVBbmFseXRpY3NFdmVudHMucXVpY2tWaWV3KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIGV4aXN0czogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLiRjb250YWluZXIgJiYgKHRoaXMuJGNvbnRhaW5lci5sZW5ndGggPiAwKTtcclxuICAgIH0sXHJcbiAgICBjbG9zZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGpRdWVyeSgnI1F1aWNrVmlld0RpYWxvZycpLmRpYWxvZygnY2xvc2UnKTtcclxuICAgIH1cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcXVpY2t2aWV3O1xyXG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG4vKipcclxuICogQHByaXZhdGVcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBkZXNjcmlwdGlvbiBCaW5kcyBldmVudCB0byB0aGUgcGxhY2UgaG9sZGVyICguYmx1cilcclxuICovXHJcbmZ1bmN0aW9uIGluaXRpYWxpemVFdmVudHMoKSB7XHJcbiAgICAvKiBTdGFydCBKSVJBIFBSRVYtNTM6Tm8gc2VhcmNoIHJlc3VsdCBwYWdlOiBXaGVuIHRoZSBzZWFyY2ggdGV4dCBmaWVsZCBpc1xyXG4gICAgICBlbXB0eSxvbiBjbGlja2luZyBvZiBcIkdPXCIgYnV0dG9uIHVzZXIgaXMgbmF2aWdhdGluZyB0byBIb21lIHBhZ2UuXHJcbiAgICAgIFJlcGxhY2VkICNxIHdpdGggJ2lucHV0W25hbWU9cV0nKi9cclxuICAgICQoJ2lucHV0W25hbWU9cV0nKS5mb2N1cyhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGlucHV0ID0gJCh0aGlzKTtcclxuICAgICAgICBpZiAoaW5wdXQudmFsKCkgPT09IGlucHV0LmF0dHIoJ3ZhbHVlJykpIHtcclxuICAgICAgICAgICAgaW5wdXQudmFsKCcnKTtcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG4gICAgICAgIC5ibHVyKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGlucHV0ID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgLyogU3RhcnQgSklSQSBQUkVWLTUzOk5vIHNlYXJjaCByZXN1bHQgcGFnZTogV2hlbiB0aGUgc2VhcmNoIHRleHQgZmllbGQgaXMgZW1wdHksb24gY2xpY2tpbmcgb2YgXCJHT1wiXHJcbiAgICAgICAgICAgICAgICAgYnV0dG9uIHVzZXIgaXMgbmF2aWdhdGluZyB0byBIb21lIHBhZ2UuQWRkZWQgJC50cmltKGlucHV0LnZhbCgpKSA9PT0gXCJcIiovXHJcbiAgICAgICAgICAgIGlmICgkLnRyaW0oaW5wdXQudmFsKCkpID09PSAnJyB8fCBpbnB1dC52YWwoKSA9PT0gJycgfHwgaW5wdXQudmFsKCkgPT09IGlucHV0LmF0dHIoJ3ZhbHVlJykpIHtcclxuICAgICAgICAgICAgICAgIGlucHV0LnZhbChpbnB1dC5hdHRyKCd2YWx1ZScpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmJsdXIoKTtcclxuXHJcbiAgICAvKiBTdGFydCBKSVJBLVBSRVYtNTQ6R2VuZXJhbCBFcnJvciBwYWdlOiBXaGVuIHRoZSBuZXcgc2VhcmNoIGZpZWxkIGVtcHR5LCBvbiBjbGlja2luZyBvZiBcIkdPXCIgdXNlciBpcyBuYXZpZ2F0aW5nIHRvIEhvbWUgcGFnZS5cclxuICAgICAgICAgQWRkZWQgY29uZGl0aW9uIGZvciBkaXNhYmxpbmcgc2VhcmNoIGJ1dHRvbiBpbiBoZWFkZXIgYW5kIE5vIHNlYXJjaCByZXN1bHRzIHBhZ2UgYW5kIGVycm9yIHBhZ2VzLlxyXG4gICAgICAgICBTdGFydCBKSVJBLVBSRVYtNTM6Tm8gc2VhcmNoIHJlc3VsdCBwYWdlOiBXaGVuIHRoZSBzZWFyY2ggdGV4dCBmaWVsZCBpcyBlbXB0eSxvbiBjbGlja2luZyBvZiBcIkdPXCIgYnV0dG9uIHVzZXIgaXMgbmF2aWdhdGluZyB0byBIb21lIHBhZ2UuKi9cclxuICAgICQoJ2lucHV0W25hbWU9cV0nKS5jbG9zZXN0KCdmb3JtJykuc3VibWl0KGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgdmFyIGlucHV0ID0gJCh0aGlzKS5maW5kKCdpbnB1dFtuYW1lPXFdJyk7XHJcbiAgICAgICAgaWYgKCQudHJpbShpbnB1dC52YWwoKSkgPT09IGlucHV0LmF0dHIoJ3ZhbHVlJykgfHwgJC50cmltKGlucHV0LnZhbCgpKSA9PT0gJycpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKCQoJy5wdF9wcm9kdWN0LXNlYXJjaC1ub3Jlc3VsdCAubm9oaXRzIC5ub3Jlc3VsdC1iYW5uZXInKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgJCgnLnB0X3Byb2R1Y3Qtc2VhcmNoLW5vcmVzdWx0IC5ub2hpdHMnKS5jc3MoJ2hlaWdodCcsICdhdXRvJyk7XHJcbiAgICB9XHJcbiAgICAvKkVuZCBKSVJBIFBSRVYtNTMsUFJFVi01NCAqL1xyXG59XHJcblxyXG5leHBvcnRzLmluaXQgPSBpbml0aWFsaXplRXZlbnRzO1xyXG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG52YXIgdXRpbCA9IHJlcXVpcmUoJy4vdXRpbCcpO1xyXG5cclxudmFyIGN1cnJlbnRRdWVyeSA9IG51bGwsXHJcbiAgICBsYXN0UXVlcnkgPSBudWxsLFxyXG4gICAgcnVubmluZ1F1ZXJ5ID0gbnVsbCxcclxuICAgIGxpc3RUb3RhbCA9IC0xLFxyXG4gICAgbGlzdEN1cnJlbnQgPSAtMSxcclxuICAgIGRlbGF5ID0gMzAsXHJcbiAgICAkcmVzdWx0c0NvbnRhaW5lcjtcclxuXHJcbi8qKlxyXG4gKiBAZnVuY3Rpb25cclxuICogQGRlc2NyaXB0aW9uIEhhbmRsZXMga2V5Ym9hcmQncyBhcnJvdyBrZXlzXHJcbiAqIEBwYXJhbSBrZXlDb2RlIENvZGUgb2YgYW4gYXJyb3cga2V5IHRvIGJlIGhhbmRsZWRcclxuICovXHJcbmZ1bmN0aW9uIGhhbmRsZUFycm93S2V5cyhrZXlDb2RlKSB7XHJcbiAgICBzd2l0Y2ggKGtleUNvZGUpIHtcclxuICAgICAgICBjYXNlIDM4OlxyXG4gICAgICAgICAgICAvLyBrZXlVcFxyXG4gICAgICAgICAgICBsaXN0Q3VycmVudCA9IChsaXN0Q3VycmVudCA8PSAwKSA/IChsaXN0VG90YWwgLSAxKSA6IChsaXN0Q3VycmVudCAtIDEpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIDQwOlxyXG4gICAgICAgICAgICAvLyBrZXlEb3duXHJcbiAgICAgICAgICAgIGxpc3RDdXJyZW50ID0gKGxpc3RDdXJyZW50ID49IGxpc3RUb3RhbCAtIDEpID8gMCA6IGxpc3RDdXJyZW50ICsgMTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgLy8gcmVzZXRcclxuICAgICAgICAgICAgbGlzdEN1cnJlbnQgPSAtMTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgICRyZXN1bHRzQ29udGFpbmVyLmNoaWxkcmVuKCkucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJykuZXEobGlzdEN1cnJlbnQpLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xyXG4gICAgJCgnaW5wdXRbbmFtZT1cInFcIl0nKS52YWwoJHJlc3VsdHNDb250YWluZXIuZmluZCgnLnNlbGVjdGVkIC5zdWdnZXN0aW9udGVybScpLmZpcnN0KCkudGV4dCgpKTtcclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcblxyXG52YXIgc2VhcmNoc3VnZ2VzdCA9IHtcclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gQ29uZmlndXJlcyBwYXJhbWV0ZXJzIGFuZCByZXF1aXJlZCBvYmplY3QgaW5zdGFuY2VzXHJcbiAgICAgKi9cclxuICAgIGluaXQ6IGZ1bmN0aW9uIChjb250YWluZXIsIGRlZmF1bHRWYWx1ZSkge1xyXG4gICAgICAgIHZhciAkc2VhcmNoQ29udGFpbmVyID0gJChjb250YWluZXIpO1xyXG4gICAgICAgIHZhciAkc2VhcmNoRm9ybSA9ICRzZWFyY2hDb250YWluZXIuZmluZCgnZm9ybVtuYW1lPVwic2ltcGxlU2VhcmNoXCJdJyk7XHJcbiAgICAgICAgdmFyICRzZWFyY2hGaWVsZCA9ICRzZWFyY2hGb3JtLmZpbmQoJ2lucHV0W25hbWU9XCJxXCJdJyk7XHJcblxyXG4gICAgICAgIC8vIGRpc2FibGUgYnJvd3NlciBhdXRvIGNvbXBsZXRlXHJcbiAgICAgICAgJHNlYXJjaEZpZWxkLmF0dHIoJ2F1dG9jb21wbGV0ZScsICdvZmYnKTtcclxuXHJcbiAgICAgICAgLy8gb24gZm9jdXMgbGlzdGVuZXIgKGNsZWFyIGRlZmF1bHQgdmFsdWUpXHJcbiAgICAgICAgJHNlYXJjaEZpZWxkLmZvY3VzKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCEkcmVzdWx0c0NvbnRhaW5lcikge1xyXG4gICAgICAgICAgICAgICAgLy8gY3JlYXRlIHJlc3VsdHMgY29udGFpbmVyIGlmIG5lZWRlZFxyXG4gICAgICAgICAgICAgICAgLy8kcmVzdWx0c0NvbnRhaW5lciA9ICQoJzxkaXYvPicpLmF0dHIoJ2lkJywgJ3NlYXJjaC1zdWdnZXN0aW9ucycpLmFwcGVuZFRvKCRzZWFyY2hDb250YWluZXIpO1xyXG4gICAgICAgICAgICAgICAgJHJlc3VsdHNDb250YWluZXIgPSAkKCc8ZGl2Lz4nKS5hdHRyKCdjbGFzcycsICdzdWdnZXN0aW9ucycpLmF0dHIoJ2lkJywgJ3N1Z2dlc3Rpb25zJykuYXBwZW5kVG8oJHNlYXJjaENvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCRzZWFyY2hGaWVsZC52YWwoKSA9PT0gZGVmYXVsdFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAkc2VhcmNoRmllbGQudmFsKCcnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICRzZWFyY2hGaWVsZC5ibHVyKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHRlbXAgPSAkc2VhcmNoRmllbGQudmFsKCk7XHJcbiAgICAgICAgICAgIGlmICgkLnRyaW0odGVtcCkgPT0gJycpIHtcclxuICAgICAgICAgICAgICAgICRzZWFyY2hGaWVsZC52YWwoJ1NlYXJjaCBFbnRpcmUgU2l0ZS4uLicpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGlmICghJHNlYXJjaENvbnRhaW5lci5pcyhlLnRhcmdldCkpIHtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQodGhpcy5jbGVhclJlc3VsdHMsIDIwMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LmJpbmQodGhpcykpO1xyXG4gICAgICAgIC8vIG9uIHN1Ym1pdCB3ZSBkbyBub3Qgc3VibWl0IHRoZSBmb3JtLCBidXQgY2hhbmdlIHRoZSB3aW5kb3cgbG9jYXRpb25cclxuICAgICAgICAvLyBpbiBvcmRlciB0byBhdm9pZCBodHRwcyB0byBodHRwIHdhcm5pbmdzIGluIHRoZSBicm93c2VyXHJcbiAgICAgICAgLy8gb25seSBpZiBpdCdzIG5vdCB0aGUgZGVmYXVsdCB2YWx1ZSBhbmQgaXQncyBub3QgZW1wdHlcclxuICAgICAgICAkc2VhcmNoRm9ybS5zdWJtaXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgc2VhcmNoVXJsID0gJHNlYXJjaEZvcm0uYXR0cignYWN0aW9uJyk7XHJcbiAgICAgICAgICAgIHZhciBzZXNzaW9uSWQgPSBqUXVlcnkoJyNmb290ZXJoaWRkZW5pZCcpLnRleHQoKTtcclxuICAgICAgICAgICAgdmFyIGsgPSAnJ1xyXG4gICAgICAgICAgICBpZiAoc2Vzc2lvbklkID09ICdyYXBhbGEnKSB7XHJcbiAgICAgICAgICAgICAgICBrID0gc2VhcmNoVXJsICsgJz9pZD0xJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChzZXNzaW9uSWQgPT0gJ3N1Zml4Jykge1xyXG4gICAgICAgICAgICAgICAgayA9IHNlYXJjaFVybCArICc/aWQ9Mic7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2Vzc2lvbklkID09ICd0cmlnZ2VyeCcpIHtcclxuICAgICAgICAgICAgICAgIGsgPSBzZWFyY2hVcmwgKyAnP2lkPTMnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNlc3Npb25JZCA9PSAnc3Rvcm0nKSB7XHJcbiAgICAgICAgICAgICAgICBrID0gc2VhcmNoVXJsICsgJz9pZD00JztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChzZXNzaW9uSWQgPT0gJ2x1aHJqZW5zZW4nKSB7XHJcbiAgICAgICAgICAgICAgICBrID0gc2VhcmNoVXJsICsgJz9pZD01JztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChzZXNzaW9uSWQgPT0gJ3ZtYycpIHtcclxuICAgICAgICAgICAgICAgIGsgPSBzZWFyY2hVcmwgKyAnP2lkPTYnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNlc3Npb25JZCA9PSAndGVybWluYXRvcicpIHtcclxuICAgICAgICAgICAgICAgIGsgPSBzZWFyY2hVcmwgKyAnP2lkPTcnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNlc3Npb25JZCA9PSAnYmx1ZWZveCcpIHtcclxuICAgICAgICAgICAgICAgIGsgPSBzZWFyY2hVcmwgKyAnP2lkPTgnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNlc3Npb25JZCA9PSAnd2lsbGlhbXNvbicpIHtcclxuICAgICAgICAgICAgICAgIGsgPSBzZWFyY2hVcmwgKyAnP2lkPTknO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNlc3Npb25JZCA9PSAnbWFyY3VtJykge1xyXG4gICAgICAgICAgICAgICAgayA9IHNlYXJjaFVybCArICc/aWQ9MTAnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNlc3Npb25JZCA9PSAnc3RyaWtlbWFzdGVyJykge1xyXG4gICAgICAgICAgICAgICAgayA9IHNlYXJjaFVybCArICc/aWQ9MTEnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNlc3Npb25JZCA9PSAnb3R0ZXInKSB7XHJcbiAgICAgICAgICAgICAgICBrID0gc2VhcmNoVXJsICsgJz9pZD0yMSc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIHNlYXJjaFRlcm0gPSAkc2VhcmNoRmllbGQudmFsKCk7XHJcbiAgICAgICAgICAgIGlmIChzZWFyY2hUZXJtICE9IGRlZmF1bHRWYWx1ZSAmJiBzZWFyY2hUZXJtICE9ICcnKSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSB1dGlsLmFwcGVuZFBhcmFtVG9VUkwoaywgJ3EnLCBzZWFyY2hUZXJtKS5yZXBsYWNlKCdodHRwcycsICdodHRwJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIG9uIGtleSB1cCBsaXN0ZW5lclxyXG4gICAgICAgICRzZWFyY2hGaWVsZC5rZXl1cChmdW5jdGlvbiAoZSkge1xyXG5cclxuICAgICAgICAgICAgLy8gZ2V0IGtleUNvZGUgKHdpbmRvdy5ldmVudCBpcyBmb3IgSUUpXHJcbiAgICAgICAgICAgIHZhciBrZXlDb2RlID0gZS5rZXlDb2RlIHx8IHdpbmRvdy5ldmVudC5rZXlDb2RlO1xyXG5cclxuICAgICAgICAgICAgLy8gY2hlY2sgYW5kIHRyZWF0IHVwIGFuZCBkb3duIGFycm93c1xyXG4gICAgICAgICAgICBpZiAoaGFuZGxlQXJyb3dLZXlzKGtleUNvZGUpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gY2hlY2sgZm9yIGFuIEVOVEVSIG9yIEVTQ1xyXG4gICAgICAgICAgICBpZiAoa2V5Q29kZSA9PT0gMTMgfHwga2V5Q29kZSA9PT0gMjcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJSZXN1bHRzKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGN1cnJlbnRRdWVyeSA9ICRzZWFyY2hGaWVsZC52YWwoKS50cmltKCk7XHJcblxyXG4gICAgICAgICAgICAvLyBubyBxdWVyeSBjdXJyZW50bHkgcnVubmluZywgaW5pdCBhbiB1cGRhdGVcclxuICAgICAgICAgICAgaWYgKCFydW5uaW5nUXVlcnkpIHtcclxuICAgICAgICAgICAgICAgIHJ1bm5pbmdRdWVyeSA9IGN1cnJlbnRRdWVyeTtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQodGhpcy5zdWdnZXN0LmJpbmQodGhpcyksIGRlbGF5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gdHJpZ2dlciBzdWdnZXN0IGFjdGlvblxyXG4gICAgICovXHJcbiAgICBzdWdnZXN0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gY2hlY2sgd2hldGhlciBxdWVyeSB0byBleGVjdXRlIChydW5uaW5nUXVlcnkpIGlzIHN0aWxsIHVwIHRvIGRhdGUgYW5kIGhhZCBub3QgY2hhbmdlZCBpbiB0aGUgbWVhbndoaWxlXHJcbiAgICAgICAgLy8gKHdlIGhhZCBhIGxpdHRsZSBkZWxheSlcclxuICAgICAgICBpZiAocnVubmluZ1F1ZXJ5ICE9PSBjdXJyZW50UXVlcnkpIHtcclxuICAgICAgICAgICAgLy8gdXBkYXRlIHJ1bm5pbmcgcXVlcnkgdG8gdGhlIG1vc3QgcmVjZW50IHNlYXJjaCBwaHJhc2VcclxuICAgICAgICAgICAgcnVubmluZ1F1ZXJ5ID0gY3VycmVudFF1ZXJ5O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gaWYgaXQncyBlbXB0eSBjbGVhciB0aGUgcmVzdWx0cyBib3ggYW5kIHJldHVyblxyXG4gICAgICAgIGlmIChydW5uaW5nUXVlcnkubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xlYXJSZXN1bHRzKCk7XHJcbiAgICAgICAgICAgIHJ1bm5pbmdRdWVyeSA9IG51bGw7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGlmIHRoZSBjdXJyZW50IHNlYXJjaCBwaHJhc2UgaXMgdGhlIHNhbWUgYXMgZm9yIHRoZSBsYXN0IHN1Z2dlc3Rpb24gY2FsbCwganVzdCByZXR1cm5cclxuICAgICAgICBpZiAobGFzdFF1ZXJ5ID09PSBydW5uaW5nUXVlcnkpIHtcclxuICAgICAgICAgICAgcnVubmluZ1F1ZXJ5ID0gbnVsbDtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gYnVpbGQgdGhlIHJlcXVlc3QgdXJsXHJcbiAgICAgICAgdmFyIHJlcVVybCA9IHV0aWwuYXBwZW5kUGFyYW1Ub1VSTChVcmxzLnNlYXJjaHN1Z2dlc3QsICdxJywgcnVubmluZ1F1ZXJ5KTtcclxuXHJcbiAgICAgICAgLy8gZXhlY3V0ZSBzZXJ2ZXIgY2FsbFxyXG4gICAgICAgICQuZ2V0KHJlcVVybCwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgdmFyIHN1Z2dlc3Rpb25IVE1MID0gZGF0YSxcclxuICAgICAgICAgICAgICAgIGFuc0xlbmd0aCA9IHN1Z2dlc3Rpb25IVE1MLnRyaW0oKS5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICAvLyBpZiB0aGVyZSBhcmUgcmVzdWx0cyBwb3B1bGF0ZSB0aGUgcmVzdWx0cyBkaXZcclxuICAgICAgICAgICAgaWYgKGFuc0xlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhclJlc3VsdHMoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgcmVzdWx0cyBkaXZcclxuICAgICAgICAgICAgICAgICRyZXN1bHRzQ29udGFpbmVyLmh0bWwoc3VnZ2VzdGlvbkhUTUwpLmZhZGVJbigyMDApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyByZWNvcmQgdGhlIHF1ZXJ5IHRoYXQgaGFzIGJlZW4gZXhlY3V0ZWRcclxuICAgICAgICAgICAgbGFzdFF1ZXJ5ID0gcnVubmluZ1F1ZXJ5O1xyXG4gICAgICAgICAgICAvLyByZXNldCBjdXJyZW50bHkgcnVubmluZyBxdWVyeVxyXG4gICAgICAgICAgICBydW5uaW5nUXVlcnkgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgLy8gY2hlY2sgZm9yIGFub3RoZXIgcmVxdWlyZWQgdXBkYXRlIChpZiBjdXJyZW50IHNlYXJjaCBwaHJhc2UgaXMgZGlmZmVyZW50IGZyb20ganVzdCBleGVjdXRlZCBjYWxsKVxyXG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXJ5ICE9PSBsYXN0UXVlcnkpIHtcclxuICAgICAgICAgICAgICAgIC8vIC4uLiBhbmQgZXhlY3V0ZSBpbW1lZGlhdGVseSBpZiBzZWFyY2ggaGFzIGNoYW5nZWQgd2hpbGUgdGhpcyBzZXJ2ZXIgY2FsbCB3YXMgaW4gdHJhbnNpdFxyXG4gICAgICAgICAgICAgICAgcnVubmluZ1F1ZXJ5ID0gY3VycmVudFF1ZXJ5O1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCh0aGlzLnN1Z2dlc3QuYmluZCh0aGlzKSwgZGVsYXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZUxlZnRQYW5lbCgpO1xyXG4gICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb25cclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICovXHJcbiAgICBjbGVhclJlc3VsdHM6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoISRyZXN1bHRzQ29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgJHJlc3VsdHNDb250YWluZXIuZmFkZU91dCgyMDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJHJlc3VsdHNDb250YWluZXIuZW1wdHkoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEBmdW5jdGlvblxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKi9cclxuICAgIGhpZGVMZWZ0UGFuZWw6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvL2hpZGUgbGVmdCBwYW5lbCBpZiB0aGVyZSBpcyBvbmx5IGEgbWF0Y2hpbmcgc3VnZ2VzdGVkIGN1c3RvbSBwaHJhc2VcclxuICAgICAgICBpZiAoJCgnLnNlYXJjaC1zdWdnZXN0aW9uLWxlZnQtcGFuZWwtaGl0JykubGVuZ3RoID09PSAxICYmICQoJy5zZWFyY2gtcGhyYXNlLXN1Z2dlc3Rpb24gYScpLnRleHQoKS5yZXBsYWNlKC8oXltcXHNdK3xbXFxzXSskKS9nLCAnJykudG9VcHBlckNhc2UoKSA9PT0gJCgnLnNlYXJjaC1zdWdnZXN0aW9uLWxlZnQtcGFuZWwtaGl0IGEnKS50ZXh0KCkudG9VcHBlckNhc2UoKSkge1xyXG4gICAgICAgICAgICAkKCcuc2VhcmNoLXN1Z2dlc3Rpb24tbGVmdC1wYW5lbCcpLmNzcygnZGlzcGxheScsICdub25lJyk7XHJcbiAgICAgICAgICAgICQoJy5zZWFyY2gtc3VnZ2VzdGlvbi13cmFwcGVyLWZ1bGwnKS5hZGRDbGFzcygnc2VhcmNoLXN1Z2dlc3Rpb24td3JhcHBlcicpO1xyXG4gICAgICAgICAgICAkKCcuc2VhcmNoLXN1Z2dlc3Rpb24td3JhcHBlcicpLnJlbW92ZUNsYXNzKCdzZWFyY2gtc3VnZ2VzdGlvbi13cmFwcGVyLWZ1bGwnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHNlYXJjaHN1Z2dlc3Q7XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuXHJcbnZhciBpbnZlbnRvcnkgPSByZXF1aXJlKCcuLycpO1xyXG5cclxudmFyIGNhcnRJbnZlbnRvcnkgPSB7XHJcbiAgICBzZXRTZWxlY3RlZFN0b3JlOiBmdW5jdGlvbiAoc3RvcmVJZCkge1xyXG4gICAgICAgIHZhciAkc2VsZWN0ZWRTdG9yZSA9ICQoJy5zdG9yZS10aWxlLicgKyBzdG9yZUlkKSxcclxuICAgICAgICAgICAgJGxpbmVJdGVtID0gJCgnLmNhcnQtcm93W2RhdGEtdXVpZD1cIicgKyB0aGlzLnV1aWQgKyAnXCJdJyksXHJcbiAgICAgICAgICAgIHN0b3JlQWRkcmVzcyA9ICRzZWxlY3RlZFN0b3JlLmZpbmQoJy5zdG9yZS1hZGRyZXNzJykuaHRtbCgpLFxyXG4gICAgICAgICAgICBzdG9yZVN0YXR1cyA9ICRzZWxlY3RlZFN0b3JlLmZpbmQoJy5zdG9yZS1zdGF0dXMnKS5kYXRhKCdzdGF0dXMnKSxcclxuICAgICAgICAgICAgc3RvcmVTdGF0dXNUZXh0ID0gJHNlbGVjdGVkU3RvcmUuZmluZCgnLnN0b3JlLXN0YXR1cycpLnRleHQoKTtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkU3RvcmUgPSBzdG9yZUlkO1xyXG5cclxuICAgICAgICAkbGluZUl0ZW0uZmluZCgnLmluc3RvcmUtZGVsaXZlcnkgLnNlbGVjdGVkLXN0b3JlLWFkZHJlc3MnKVxyXG4gICAgICAgICAgICAuZGF0YSgnc3RvcmVJZCcsIHN0b3JlSWQpXHJcbiAgICAgICAgICAgIC5hdHRyKCdkYXRhLXN0b3JlLWlkJywgc3RvcmVJZClcclxuICAgICAgICAgICAgLmh0bWwoc3RvcmVBZGRyZXNzKTtcclxuICAgICAgICAkbGluZUl0ZW0uZmluZCgnLmluc3RvcmUtZGVsaXZlcnkgLnNlbGVjdGVkLXN0b3JlLWF2YWlsYWJpbGl0eScpXHJcbiAgICAgICAgICAgIC5kYXRhKCdzdGF0dXMnLCBzdG9yZVN0YXR1cylcclxuICAgICAgICAgICAgLmF0dHIoJ2RhdGEtc3RhdHVzJywgc3RvcmVTdGF0dXMpXHJcbiAgICAgICAgICAgIC50ZXh0KHN0b3JlU3RhdHVzVGV4dCk7XHJcbiAgICAgICAgJGxpbmVJdGVtLmZpbmQoJy5pbnN0b3JlLWRlbGl2ZXJ5IC5kZWxpdmVyeS1vcHRpb24nKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpLnRyaWdnZXIoJ2NsaWNrJyk7XHJcbiAgICB9LFxyXG4gICAgY2FydFNlbGVjdFN0b3JlOiBmdW5jdGlvbiAoc2VsZWN0ZWRTdG9yZSkge1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICBpbnZlbnRvcnkuZ2V0U3RvcmVzSW52ZW50b3J5KHRoaXMudXVpZCkudGhlbihmdW5jdGlvbiAoc3RvcmVzKSB7XHJcbiAgICAgICAgICAgIGludmVudG9yeS5zZWxlY3RTdG9yZURpYWxvZyh7XHJcbiAgICAgICAgICAgICAgICBzdG9yZXM6IHN0b3JlcyxcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkU3RvcmVJZDogc2VsZWN0ZWRTdG9yZSxcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkU3RvcmVUZXh0OiBSZXNvdXJjZXMuU0VMRUNURURfU1RPUkUsXHJcbiAgICAgICAgICAgICAgICBjb250aW51ZUNhbGxiYWNrOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2VsZWN0U3RvcmVDYWxsYmFjazogc2VsZi5zZXRTZWxlY3RlZFN0b3JlLmJpbmQoc2VsZilcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSkuZG9uZSgpO1xyXG4gICAgfSxcclxuICAgIHNldERlbGl2ZXJ5T3B0aW9uOiBmdW5jdGlvbiAodmFsdWUsIHN0b3JlSWQpIHtcclxuICAgICAgICAvLyBzZXQgbG9hZGluZyBzdGF0ZVxyXG4gICAgICAgICQoJy5pdGVtLWRlbGl2ZXJ5LW9wdGlvbnMnKVxyXG4gICAgICAgICAgICAuYWRkQ2xhc3MoJ2xvYWRpbmcnKVxyXG4gICAgICAgICAgICAuY2hpbGRyZW4oKS5oaWRlKCk7XHJcblxyXG4gICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICBwbGlkOiB0aGlzLnV1aWQsXHJcbiAgICAgICAgICAgIHN0b3JlcGlja3VwOiAodmFsdWUgPT09ICdzdG9yZScgPyB0cnVlIDogZmFsc2UpXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAodmFsdWUgPT09ICdzdG9yZScpIHtcclxuICAgICAgICAgICAgZGF0YS5zdG9yZXBpY2t1cCA9IHRydWU7XHJcbiAgICAgICAgICAgIGRhdGEuc3RvcmVpZCA9IHN0b3JlSWQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZGF0YS5zdG9yZXBpY2t1cCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6IFVybHMuc2V0U3RvcmVQaWNrdXAsXHJcbiAgICAgICAgICAgIGRhdGE6IGRhdGEsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBsb2FkaW5nIHN0YXRlXHJcbiAgICAgICAgICAgICAgICAkKCcuaXRlbS1kZWxpdmVyeS1vcHRpb25zJylcclxuICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ2xvYWRpbmcnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5jaGlsZHJlbigpLnNob3coKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgJCgnLml0ZW0tZGVsaXZlcnktb3B0aW9ucyAuc2V0LXByZWZlcnJlZC1zdG9yZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgc2VsZi51dWlkID0gJCh0aGlzKS5kYXRhKCd1dWlkJyk7XHJcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZFN0b3JlID0gJCh0aGlzKS5jbG9zZXN0KCcuaW5zdG9yZS1kZWxpdmVyeScpLmZpbmQoJy5zZWxlY3RlZC1zdG9yZS1hZGRyZXNzJykuZGF0YSgnc3RvcmVJZCcpO1xyXG4gICAgICAgICAgICBpZiAoIVVzZXIuemlwKSB7XHJcbiAgICAgICAgICAgICAgICBpbnZlbnRvcnkuemlwUHJvbXB0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmNhcnRTZWxlY3RTdG9yZShzZWxlY3RlZFN0b3JlKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5jYXJ0U2VsZWN0U3RvcmUoc2VsZWN0ZWRTdG9yZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAkKCcuaXRlbS1kZWxpdmVyeS1vcHRpb25zIC5kZWxpdmVyeS1vcHRpb24nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIHJlc2V0IHRoZSB1dWlkXHJcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZFN0b3JlID0gJCh0aGlzKS5jbG9zZXN0KCcuaW5zdG9yZS1kZWxpdmVyeScpLmZpbmQoJy5zZWxlY3RlZC1zdG9yZS1hZGRyZXNzJykuZGF0YSgnc3RvcmVJZCcpO1xyXG4gICAgICAgICAgICBzZWxmLnV1aWQgPSAkKHRoaXMpLmNsb3Nlc3QoJy5jYXJ0LXJvdycpLmRhdGEoJ3V1aWQnKTtcclxuICAgICAgICAgICAgc2VsZi5zZXREZWxpdmVyeU9wdGlvbigkKHRoaXMpLnZhbCgpLCBzZWxlY3RlZFN0b3JlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gY2FydEludmVudG9yeTtcclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxudmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gnKSxcclxuICAgIGRpYWxvZyA9IHJlcXVpcmUoJy4uL2RpYWxvZycpLFxyXG4gICAgVFByb21pc2UgPSByZXF1aXJlKCdwcm9taXNlJyksXHJcbiAgICB1dGlsID0gcmVxdWlyZSgnLi4vdXRpbCcpO1xyXG5cclxudmFyIG5ld0xpbmUgPSAnXFxuJztcclxudmFyIHN0b3JlVGVtcGxhdGUgPSBmdW5jdGlvbiAoc3RvcmUsIHNlbGVjdGVkU3RvcmVJZCwgc2VsZWN0ZWRTdG9yZVRleHQpIHtcclxuICAgIHJldHVybiBbXHJcbiAgICAgICAgJzxsaSBjbGFzcz1cInN0b3JlLXRpbGUgJyArIHN0b3JlLnN0b3JlSWQgKyAoc3RvcmUuc3RvcmVJZCA9PT0gc2VsZWN0ZWRTdG9yZUlkID8gJyBzZWxlY3RlZCcgOiAnJykgKyAnXCI+JyxcclxuICAgICAgICAnXHQ8cCBjbGFzcz1cInN0b3JlLWFkZHJlc3NcIj4nLFxyXG4gICAgICAgICdcdFx0JyArIHN0b3JlLmFkZHJlc3MxICsgJzxici8+JyxcclxuICAgICAgICAnXHRcdCcgKyBzdG9yZS5jaXR5ICsgJywgJyArIHN0b3JlLnN0YXRlQ29kZSArICcgJyArIHN0b3JlLnBvc3RhbENvZGUsXHJcbiAgICAgICAgJ1x0PC9wPicsXHJcbiAgICAgICAgJ1x0PHAgY2xhc3M9XCJzdG9yZS1zdGF0dXNcIiBkYXRhLXN0YXR1cz1cIicgKyBzdG9yZS5zdGF0dXNjbGFzcyArICdcIj4nICsgc3RvcmUuc3RhdHVzICsgJzwvcD4nLFxyXG4gICAgICAgICdcdDxidXR0b24gY2xhc3M9XCJzZWxlY3Qtc3RvcmUtYnV0dG9uXCIgZGF0YS1zdG9yZS1pZD1cIicgKyBzdG9yZS5zdG9yZUlkICsgJ1wiJyArXHJcbiAgICAgICAgKHN0b3JlLnN0YXR1c2NsYXNzICE9PSAnc3RvcmUtaW4tc3RvY2snID8gJ2Rpc2FibGVkPVwiZGlzYWJsZWRcIicgOiAnJykgKyAnPicsXHJcbiAgICAgICAgJ1x0XHQnICsgKHN0b3JlLnN0b3JlSWQgPT09IHNlbGVjdGVkU3RvcmVJZCA/IHNlbGVjdGVkU3RvcmVUZXh0IDogUmVzb3VyY2VzLlNFTEVDVF9TVE9SRSksXHJcbiAgICAgICAgJ1x0PC9idXR0b24+JyxcclxuICAgICAgICAnPC9saT4nXHJcbiAgICBdLmpvaW4obmV3TGluZSk7XHJcbn07XHJcblxyXG52YXIgc3RvcmVMaXN0VGVtcGxhdGUgPSBmdW5jdGlvbiAoc3RvcmVzLCBzZWxlY3RlZFN0b3JlSWQsIHNlbGVjdGVkU3RvcmVUZXh0KSB7XHJcbiAgICBpZiAoc3RvcmVzICYmIHN0b3Jlcy5sZW5ndGgpIHtcclxuICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICAnPGRpdiBjbGFzcz1cInN0b3JlLWxpc3QtY29udGFpbmVyXCI+JyxcclxuICAgICAgICAgICAgJzx1bCBjbGFzcz1cInN0b3JlLWxpc3RcIj4nLFxyXG4gICAgICAgICAgICBfLm1hcChzdG9yZXMsIGZ1bmN0aW9uIChzdG9yZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0b3JlVGVtcGxhdGUoc3RvcmUsIHNlbGVjdGVkU3RvcmVJZCwgc2VsZWN0ZWRTdG9yZVRleHQpO1xyXG4gICAgICAgICAgICB9KS5qb2luKG5ld0xpbmUpLFxyXG4gICAgICAgICAgICAnPC91bD4nLFxyXG4gICAgICAgICAgICAnPC9kaXY+JyxcclxuICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJzdG9yZS1saXN0LXBhZ2luYXRpb25cIj4nLFxyXG4gICAgICAgICAgICAnPC9kaXY+J1xyXG4gICAgICAgIF0uam9pbihuZXdMaW5lKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuICc8ZGl2IGNsYXNzPVwibm8tcmVzdWx0c1wiPicgKyBSZXNvdXJjZXMuSU5WQUxJRF9aSVAgKyAnPC9kaXY+JztcclxuICAgIH1cclxufTtcclxuXHJcbnZhciB6aXBQcm9tcHRUZW1wbGF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiBbXHJcbiAgICAgICAgJzxkaXYgaWQ9XCJwcmVmZXJyZWQtc3RvcmUtcGFuZWxcIj4nLFxyXG4gICAgICAgICdcdDxpbnB1dCB0eXBlPVwidGV4dFwiIGlkPVwidXNlci16aXBcIiBwbGFjZWhvbGRlcj1cIicgKyBSZXNvdXJjZXMuRU5URVJfWklQICsgJ1wiIG5hbWU9XCJ6aXBDb2RlXCIvPicsXHJcbiAgICAgICAgJzwvZGl2PidcclxuICAgIF0uam9pbihuZXdMaW5lKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBAZGVzY3JpcHRpb24gdGVzdCB3aGV0aGVyIHppcGNvZGUgaXMgdmFsaWQgZm9yIGVpdGhlciBVUyBvciBDYW5hZGFcclxuICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZSBpZiB0aGUgemlwY29kZSBpcyB2YWxpZCBmb3IgZWl0aGVyIGNvdW50cnksIGZhbHNlIGlmIGl0J3MgaW52YWxpZCBmb3IgYm90aFxyXG4gKiovXHJcbnZhciB2YWxpZGF0ZVppcENvZGUgPSBmdW5jdGlvbiAoemlwQ29kZSkge1xyXG4gICAgdmFyIHJlZ2V4ZXMgPSB7XHJcbiAgICAgICAgICAgIGNhbmFkYTogL15bQUJDRUdISktMTU5QUlNUVlhZXVxcZFtBQkNFR0hKS0xNTlBSU1RWV1hZWl0oICk/XFxkW0FCQ0VHSEpLTE1OUFJTVFZXWFlaXVxcZCQvaSxcclxuICAgICAgICAgICAgdXNhOiAvXlxcZHs1fSgtXFxkezR9KT8kL1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdmFsaWQgPSBmYWxzZTtcclxuICAgIGlmICghemlwQ29kZSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIF8uZWFjaChyZWdleGVzLCBmdW5jdGlvbiAocmUpIHtcclxuICAgICAgICB2YXIgcmVnZXhwID0gbmV3IFJlZ0V4cChyZSk7XHJcbiAgICAgICAgdmFsaWQgPSByZWdleHAudGVzdCh6aXBDb2RlKTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHZhbGlkO1xyXG59O1xyXG5cclxudmFyIHN0b3JlaW52ZW50b3J5ID0ge1xyXG4gICAgemlwUHJvbXB0OiBmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgZGlhbG9nLm9wZW4oe1xyXG4gICAgICAgICAgICBodG1sOiB6aXBQcm9tcHRUZW1wbGF0ZSgpLFxyXG4gICAgICAgICAgICBvcHRpb25zOiB7XHJcbiAgICAgICAgICAgICAgICB0aXRsZTogUmVzb3VyY2VzLlNUT1JFX05FQVJfWU9VLFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDUwMCxcclxuICAgICAgICAgICAgICAgIGJ1dHRvbnM6IFt7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogUmVzb3VyY2VzLlNFQVJDSCxcclxuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgemlwQ29kZSA9ICQoJyN1c2VyLXppcCcpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsaWRhdGVaaXBDb2RlKHppcENvZGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNldFVzZXJaaXAoemlwQ29kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayh6aXBDb2RlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1dLFxyXG4gICAgICAgICAgICAgICAgb3BlbjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJyN1c2VyLXppcCcpLm9uKCdrZXlwcmVzcycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLndoaWNoID09PSAxMykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHJpZ2dlciB0aGUgc2VhcmNoIGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnVpLWRpYWxvZy1idXR0b25zZXQgLnVpLWJ1dHRvbicpLnRyaWdnZXIoJ2NsaWNrJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIGdldFN0b3Jlc0ludmVudG9yeTogZnVuY3Rpb24gKHBpZCkge1xyXG4gICAgICAgIHJldHVybiBUUHJvbWlzZS5yZXNvbHZlKCQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogdXRpbC5hcHBlbmRQYXJhbXNUb1VybChVcmxzLnN0b3Jlc0ludmVudG9yeSwge1xyXG4gICAgICAgICAgICAgICAgcGlkOiBwaWQsXHJcbiAgICAgICAgICAgICAgICB6aXBDb2RlOiBVc2VyLnppcFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJ1xyXG4gICAgICAgIH0pKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEBkZXNjcmlwdGlvbiBvcGVuIHRoZSBkaWFsb2cgdG8gc2VsZWN0IHN0b3JlXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBvcHRpb25zLnN0b3Jlc1xyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG9wdGlvbnMuc2VsZWN0ZWRTdG9yZUlkXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gb3B0aW9ucy5zZWxlY3RlZFN0b3JlVGV4dFxyXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gb3B0aW9ucy5jb250aW51ZUNhbGxiYWNrXHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcHRpb25zLnNlbGVjdFN0b3JlQ2FsbGJhY2tcclxuICAgICAqKi9cclxuICAgIHNlbGVjdFN0b3JlRGlhbG9nOiBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcyxcclxuICAgICAgICAgICAgc3RvcmVzID0gb3B0aW9ucy5zdG9yZXMsXHJcbiAgICAgICAgICAgIHNlbGVjdGVkU3RvcmVJZCA9IG9wdGlvbnMuc2VsZWN0ZWRTdG9yZUlkLFxyXG4gICAgICAgICAgICBzZWxlY3RlZFN0b3JlVGV4dCA9IG9wdGlvbnMuc2VsZWN0ZWRTdG9yZVRleHQsXHJcbiAgICAgICAgICAgIHN0b3JlTGlzdCA9IHN0b3JlTGlzdFRlbXBsYXRlKHN0b3Jlcywgc2VsZWN0ZWRTdG9yZUlkLCBzZWxlY3RlZFN0b3JlVGV4dCk7XHJcbiAgICAgICAgZGlhbG9nLm9wZW4oe1xyXG4gICAgICAgICAgICBodG1sOiBzdG9yZUxpc3QsXHJcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcclxuICAgICAgICAgICAgICAgIHRpdGxlOiBSZXNvdXJjZXMuU0VMRUNUX1NUT1JFICsgJyAtICcgKyBVc2VyLnppcCxcclxuICAgICAgICAgICAgICAgIGJ1dHRvbnM6IFt7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogUmVzb3VyY2VzLkNIQU5HRV9MT0NBVElPTixcclxuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNldFVzZXJaaXAobnVsbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyaWdnZXIgdGhlIGV2ZW50IHRvIHN0YXJ0IHRoZSBwcm9jZXNzIGFsbCBvdmVyIGFnYWluXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5zZXQtcHJlZmVycmVkLXN0b3JlJykudHJpZ2dlcignY2xpY2snKTtcclxuICAgICAgICAgICAgICAgICAgICB9LmJpbmQodGhpcylcclxuICAgICAgICAgICAgICAgIH0sIHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBSZXNvdXJjZXMuQ09OVElOVUUsXHJcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuY29udGludWVDYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5jb250aW51ZUNhbGxiYWNrKHN0b3Jlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlhbG9nLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfV0sXHJcbiAgICAgICAgICAgICAgICBvcGVuOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLnNlbGVjdC1zdG9yZS1idXR0b24nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdG9yZUlkID0gJCh0aGlzKS5kYXRhKCdzdG9yZUlkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBzdG9yZSBpcyBhbHJlYWR5IHNlbGVjdGVkLCBkb24ndCBzZWxlY3QgYWdhaW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0b3JlSWQgPT09IHNlbGVjdGVkU3RvcmVJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5zdG9yZS1saXN0IC5zdG9yZS10aWxlLnNlbGVjdGVkJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKCcuc2VsZWN0LXN0b3JlLWJ1dHRvbicpLnRleHQoUmVzb3VyY2VzLlNFTEVDVF9TVE9SRSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykudGV4dChzZWxlY3RlZFN0b3JlVGV4dClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jbG9zZXN0KCcuc3RvcmUtdGlsZScpLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5zZWxlY3RTdG9yZUNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnNlbGVjdFN0b3JlQ2FsbGJhY2soc3RvcmVJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIHNldFVzZXJaaXA6IGZ1bmN0aW9uICh6aXApIHtcclxuICAgICAgICBVc2VyLnppcCA9IHppcDtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB0eXBlOiAnUE9TVCcsXHJcbiAgICAgICAgICAgIHVybDogVXJscy5zZXRaaXBDb2RlLFxyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICB6aXBDb2RlOiB6aXBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIHNoaXBwaW5nTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciAkY2hlY2tvdXRGb3JtID0gJCgnLmFkZHJlc3MnKTtcclxuICAgICAgICAkY2hlY2tvdXRGb3JtLm9mZignY2xpY2snKTtcclxuICAgICAgICAkY2hlY2tvdXRGb3JtLm9uKCdjbGljaycsICdpbnB1dFtuYW1lJD1cIl9zaGlwcGluZ0FkZHJlc3NfaXNHaWZ0XCJdJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLnNpYmxpbmdzKCcuZ2lmdC1tZXNzYWdlLXRleHQnKS50b2dnbGVDbGFzcygnaGlkZGVuJywgJCgnaW5wdXRbbmFtZSQ9XCJfc2hpcHBpbmdBZGRyZXNzX2lzR2lmdFwiXTpjaGVja2VkJykudmFsKCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBzdG9yZWludmVudG9yeTtcclxuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEV2ZW50cyBhcmUgZGl2aWRlZCB1cCBieSBuYW1lIHNwYWNlIHNvIG9ubHkgdGhlXG4gKiBldmVudHMgdGhhdCBhcmUgbmVlZGVkIGFyZSBpbml0aWFsaXplZC5cbiAqL1xudmFyIGV2ZW50cyA9IHtcbiAgICBhY2NvdW50OiBmdW5jdGlvbiAoKSB7fSxcbiAgICBjYXJ0OiBmdW5jdGlvbiAoKSB7fSxcbiAgICBjaGVja291dDogZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCdbbmFtZSQ9X2RlbGV0ZVByb2R1Y3RdJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmVtb3ZlRnJvbUNhcnQoJC5wYXJzZUpTT04oJCh0aGlzKS5hdHRyKCdkYXRhLWd0bWRhdGEnKSksIDEpO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIGNvbXBhcmU6IGZ1bmN0aW9uICgpIHt9LFxuICAgIHByb2R1Y3Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnI2FkZC10by1jYXJ0Jykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgYWRkVG9DYXJ0KCQucGFyc2VKU09OKCQodGhpcykuYXR0cignZGF0YS1ndG1kYXRhJykpLCAkKHRoaXMpLmNsb3Nlc3QoJ2RpdicpLmZpbmQoJ1tuYW1lPVF1YW50aXR5XScpLnZhbCgpKTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBzZWFyY2g6IGZ1bmN0aW9uICgpIHt9LFxuICAgIHN0b3JlZnJvbnQ6IGZ1bmN0aW9uICgpIHt9LFxuICAgIHdpc2hsaXN0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJ1tuYW1lJD1fYWRkVG9DYXJ0XScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGFkZFRvQ2FydCgkLnBhcnNlSlNPTigkKHRoaXMpLmF0dHIoJ2RhdGEtZ3RtZGF0YScpKSwgJCh0aGlzKS5jbG9zZXN0KCdkaXYnKS5maW5kKCdbbmFtZT1RdWFudGl0eV0nKS52YWwoKSk7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgLy8gZXZlbnRzIHRoYXQgc2hvdWxkIGhhcHBlbiBvbiBldmVyeSBwYWdlXG4gICAgYWxsOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJy5uYW1lLWxpbmsnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBwcm9kdWN0Q2xpY2soJC5wYXJzZUpTT04oJCh0aGlzKS5hdHRyKCdkYXRhLWd0bWRhdGEnKSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgJCgnLnRodW1iLWxpbmsnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBwcm9kdWN0Q2xpY2soJC5wYXJzZUpTT04oJCh0aGlzKS5hdHRyKCdkYXRhLWd0bWRhdGEnKSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgJCgnLmhhcy1zdWItbWVudScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHB1c2hFdmVudCgndHJhY2tFdmVudCcsICdVc2VyIEFjdGlvbicsICdIZWFkZXIgQ2xpY2snLCAkKHRoaXMpLmh0bWwoKSk7XG4gICAgICAgIH0pO1xuICAgICAgICAkKCcucHJpbWFyeS1sb2dvJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcHVzaEV2ZW50KCd0cmFja0V2ZW50JywgJ1VzZXIgQWN0aW9uJywgJ0hlYWRlciBDbGljaycsICdIb21lIExpbmsnKTtcbiAgICAgICAgfSk7XG4gICAgfVxufTtcblxuLyoqXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvZHVjdE9iamVjdCBUaGUgcHJvZHVjdCBkYXRhXG4gKiBAZGVzY3JpcHRpb24gZ2V0cyB0aGUgZGF0YSBmb3IgYSBwcm9kdWN0IGNsaWNrXG4gKi9cbmZ1bmN0aW9uIHByb2R1Y3RDbGljayAocHJvZHVjdE9iamVjdCkge1xuICAgIHZhciBvYmogPSB7XG4gICAgICAgICdldmVudCc6ICdwcm9kdWN0Q2xpY2snLFxuICAgICAgICAnZWNvbW1lcmNlJzoge1xuICAgICAgICAgICAgJ2NsaWNrJzoge1xuICAgICAgICAgICAgICAgICdhY3Rpb25GaWVsZCc6IHsnbGlzdCc6ICdTZWFyY2hSZXN1bHRzJ30sXG4gICAgICAgICAgICAgICAgJ3Byb2R1Y3RzJzogW11cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgb2JqLmVjb21tZXJjZS5jbGljay5wcm9kdWN0cy5wdXNoKHByb2R1Y3RPYmplY3QpO1xuICAgIGRhdGFMYXllci5wdXNoKG9iaik7XG59XG5cbi8qKlxuICogQGRlc2NyaXB0aW9uIENsaWNrIGV2ZW50IGZvciBhZGQgcHJvZHVjdCB0byBjYXJ0XG4gKiBAcGFyYW0ge09iamVjdH0gcHJvZHVjdE9iamVjdCBUaGUgcHJvZHVjdCBkYXRhXG4gKiBAcGFyYW0ge1N0cmluZ30gcXVhbnRpdHlcbiAqL1xuZnVuY3Rpb24gYWRkVG9DYXJ0IChwcm9kdWN0T2JqZWN0LCBxdWFudGl0eSkge1xuICAgIHZhciBxdWFudGl0eU9iaiA9IHsncXVhbnRpdHknOiBxdWFudGl0eX0sXG4gICAgICAgIG9iaiA9IHtcbiAgICAgICAgICAgICdldmVudCc6ICdhZGRUb0NhcnQnLFxuICAgICAgICAgICAgJ2Vjb21tZXJjZSc6IHtcbiAgICAgICAgICAgICAgICAnYWRkJzoge1xuICAgICAgICAgICAgICAgICAgICAncHJvZHVjdHMnOiBbXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICBvYmouZWNvbW1lcmNlLmFkZC5wcm9kdWN0cy5wdXNoKCQuZXh0ZW5kKHByb2R1Y3RPYmplY3QscXVhbnRpdHlPYmopKTtcbiAgICBkYXRhTGF5ZXIucHVzaChvYmopO1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvZHVjdE9iamVjdFxuICogQHBhcmFtIHtTdHJpbmd8TnVtYmVyfSBxdWFudGl0eVxuICovXG5mdW5jdGlvbiByZW1vdmVGcm9tQ2FydCAocHJvZHVjdE9iamVjdCwgcXVhbnRpdHkpIHtcbiAgICB2YXIgcXVhbnRpdHlPYmogPSB7J3F1YW50aXR5JzogcXVhbnRpdHl9LFxuICAgICAgICBvYmogPSB7XG4gICAgICAgICAgICAnZXZlbnQnOiAncmVtb3ZlRnJvbUNhcnQnLFxuICAgICAgICAgICAgJ2Vjb21tZXJjZSc6IHtcbiAgICAgICAgICAgICAgICAncmVtb3ZlJzoge1xuICAgICAgICAgICAgICAgICAgICAncHJvZHVjdHMnOiBbXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICBvYmouZWNvbW1lcmNlLmFkZC5wcm9kdWN0cy5wdXNoKCQuZXh0ZW5kKHByb2R1Y3RPYmplY3QscXVhbnRpdHlPYmopKTtcbiAgICBkYXRhTGF5ZXIucHVzaChvYmopO1xufVxuXG4vKipcbiAqIEBkZXNjcmlwdGlvbiBDb252ZW5pZW5jZSBtZXRob2QgZm9yIGNyZWF0aW5nIGEgY2xpY2sgZXZlbnQuXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudENhdGVnb3J5XG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRBY3Rpb25cbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudExhYmVsXG4gKi9cbmZ1bmN0aW9uIHB1c2hFdmVudCAoZXZlbnQsIGV2ZW50Q2F0ZWdvcnksIGV2ZW50QWN0aW9uLCBldmVudExhYmVsKSB7XG4gICAgZGF0YUxheWVyLnB1c2goe1xuICAgICAgICAnZXZlbnQnOiBldmVudCxcbiAgICAgICAgJ2V2ZW50Q2F0ZWdvcnknOiBldmVudENhdGVnb3J5LFxuICAgICAgICAnZXZlbnRBY3Rpb24nOiBldmVudEFjdGlvbixcbiAgICAgICAgJ2V2ZW50TGFiZWwnOiBldmVudExhYmVsXG4gICAgfSk7XG59XG5cbi8qKlxuICogQGRlc2NyaXB0aW9uIEluaXRpYWxpemUgdGhlIHRhZyBtYW5hZ2VyIGZ1bmN0aW9uYWxpdHlcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lU3BhY2UgVGhlIGN1cnJlbnQgbmFtZSBzcGFjZVxuICovXG5leHBvcnRzLmluaXQgPSBmdW5jdGlvbiAobmFtZVNwYWNlKSB7XG4gICAgaWYgKG5hbWVTcGFjZSAmJiBldmVudHNbbmFtZVNwYWNlXSkge1xuICAgICAgICBldmVudHNbbmFtZVNwYWNlXSgpO1xuICAgIH1cbiAgICBldmVudHMuYWxsKCk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxuLyoqXHJcbiAqIENoZWNrcyB0aGUgVExTIGFuZCBkaXNwbGF5cyBhIHdhcm5pbmcgaWYgYXBwcm9wcmlhdGVcclxuICogQGZ1bmN0aW9uIGdldFVzZXJBZ2VudCBDaGVja3MgdGhlIFRMUyBhbmQgZGlzcGxheXMgYSB3YXJuaW5nIGlmIGFwcHJvcHJpYXRlXHJcbiAqKi9cclxuZnVuY3Rpb24gZ2V0VXNlckFnZW50KCkge1xyXG5cclxuICAgIHZhciB1YSA9IG5hdmlnYXRvci51c2VyQWdlbnQsIHRlbSxcclxuICAgICAgICBNID0gdWEubWF0Y2goLyhvcGVyYXxjaHJvbWV8c2FmYXJpfGZpcmVmb3h8bXNpZXx0cmlkZW50KD89XFwvKSlcXC8/XFxzKihcXGQrKS9pKSB8fCBbXTtcclxuICAgIGlmICgvdHJpZGVudC9pLnRlc3QoTVsxXSkpIHtcclxuICAgICAgICB0ZW0gPSAoL1xcYnJ2WyA6XSsoXFxkKykvZykuZXhlYyh1YSkgfHwgW107XHJcbiAgICAgICAgcmV0dXJuIHtuYW1lOiAnSUUnLCB2ZXJzaW9uOiAodGVtWzFdIHx8ICcnKX07XHJcbiAgICB9XHJcbiAgICBpZiAoTVsxXSA9PT0gJ0Nocm9tZScpIHtcclxuICAgICAgICB0ZW0gPSB1YS5tYXRjaCgvXFxiT1BSXFwvKFxcZCspLyk7XHJcbiAgICAgICAgaWYgKHRlbSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7bmFtZTogJ09wZXJhJywgdmVyc2lvbjogdGVtWzFdfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBNID0gTVsyXSA/IFtNWzFdLCBNWzJdXSA6IFtuYXZpZ2F0b3IuYXBwTmFtZSwgbmF2aWdhdG9yLmFwcFZlcnNpb24sICctPyddO1xyXG4gICAgaWYgKCh0ZW0gPSB1YS5tYXRjaCgvdmVyc2lvblxcLyhcXGQrKS9pKSkgIT0gbnVsbCkge1xyXG4gICAgICAgIE0uc3BsaWNlKDEsIDEsIHRlbVsxXSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG5hbWU6IE1bMF0sXHJcbiAgICAgICAgdmVyc2lvbjogTVsxXVxyXG4gICAgfTtcclxuXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBFeHBvcnQgdGhlIGdldFVzZXJBZ2VudCBmdW5jdGlvblxyXG4gKi9cclxuXHJcbmV4cG9ydHMuZ2V0VXNlckFnZW50ID0gZ2V0VXNlckFnZW50O1xyXG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG4vKipcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBkZXNjcmlwdGlvbiBJbml0aWFsaXplcyB0aGUgdG9vbHRpcC1jb250ZW50IGFuZCBsYXlvdXRcclxuICovXHJcbnZhciBzZXR0aW5ncyA9IHtcclxuICAgIGl0ZW1zOiAnLnRvb2x0aXAsIC5DdXN0b20tdG9vbHRpcCcsXHJcbiAgICBkZWxheTogMCxcclxuICAgIHRyYWNrOiBmYWxzZSxcclxuICAgIHNob3dVUkw6IGZhbHNlLFxyXG4gICAgZXh0cmFDbGFzczogJ3Rvb2x0aXBzaGFkb3cnLFxyXG4gICAgdG9wOiA1LFxyXG4gICAgbGVmdDogLTE1MFxyXG59O1xyXG5leHBvcnRzLmluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAkKGRvY3VtZW50KS50b29sdGlwKFxyXG4gICAgICAgICQuZXh0ZW5kKHt9LCBzZXR0aW5ncywge1xyXG4gICAgICAgICAgICBjb250ZW50OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJCh0aGlzKS5maW5kKCcudG9vbHRpcC1jb250ZW50ICwgLnRvb2x0aXAtYm9keScpLmh0bWwoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pKTtcclxuICAgIC8qJCgnLkN1c3RvbS10b29sdGlwJykudG9vbHRpcHN0ZXIoe1xyXG4gICAgICAgICAgICBjb250ZW50OiBqUXVlcnkodGhpcykuZmluZCgnLnRvb2x0aXBjb250YWluZXInKS5odG1sKCksXHJcbiAgICAgICAgICAgIGNvbnRlbnRBc0hUTUw6IHRydWUsXHJcbiAgICAgICAgICAgIG1heFdpZHRoOiAzMDAsXHJcbiAgICAgICAgICAgIHRvdWNoRGV2aWNlczogdHJ1ZSxcclxuICAgICAgICAgICAgdHJpZ2dlcjogJ2NsaWNrJ1xyXG4gICAgfSk7ICovXHJcbiAgICAkKCcuc2hhcmUtbGluaycpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHZhciB0YXJnZXQgPSAkKHRoaXMpLmRhdGEoJ3RhcmdldCcpO1xyXG4gICAgICAgIGlmICghdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgJCh0YXJnZXQpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8qSklSQSBQUkVWLTI4MiA6IERFVi0zMjogU0cgaXNzdWUtICdXaGF0IGlzIHRoaXMnIGxpbmsgaW4gY2hlY2tvdXQgYmlsbGluZyBwYWdlIHNob3VsZCBub3QgYmUgY2xpY2thYmxlLiBBZGRlZCB0aGUgZm9sbG9pd25nIGJsb2NrLiovXHJcbiAgICAkKCdhLnRvb2x0aXAnKS5jbGljayhmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG59O1xyXG4iLCIndXNlIHN0cmljdCc7XHJcbnZhciB1dGlsID0gcmVxdWlyZSgnLi91dGlsJyk7XHJcbi8qZnVuY3Rpb24gY2hhcmNvdW50KCR0aGlzKXtcclxuXHR2YXIgY2hhcmFjdGVyTGltaXQgPSBwYXJzZUludCgkdGhpcy5kYXRhKFwiY2hhcmFjdGVyLWxpbWl0XCIpKTtcclxuXHR2YXIgY2hhclJlbWFpbnMgPSBjaGFyYWN0ZXJMaW1pdCAtICR0aGlzLnZhbCgpLnRyaW0oKS5sZW5ndGg7XHJcblx0dmFyIGNoYXJDb3VudEh0bWwgPSAnQ2hhcmFjdGVycyBSZW1haW5pbmcgJyArIGNoYXJSZW1haW5zXHJcblx0aWYoJHRoaXMuaGFzQ2xhc3MoXCJ2aXAtdGV4dGFyZWFcIikpe1xyXG5cdFx0aWYgKCR0aGlzLm5leHQoJ2Rpdi5jaGFyLWNvdW50JykubGVuZ3RoID09PSAwKSB7XHJcblx0XHRcdGNoYXJDb3VudENvbnRhaW5lciA9ICQoJzxkaXYgY2xhc3M9XCJjaGFyLWNvdW50XCIvPicpLmluc2VydEFmdGVyKCR0aGlzKTtcclxuXHRcdH1cclxuXHRcdCR0aGlzLm5leHQoJ2Rpdi5jaGFyLWNvdW50JykuaHRtbChjaGFyQ291bnRIdG1sKTtcclxuXHR9ZWxzZSB7XHJcblx0XHRpZiAoJHRoaXMucHJldignZGl2LmNoYXItY291bnQnKS5sZW5ndGggPT09IDApIHtcclxuXHRcdFx0Y2hhckNvdW50Q29udGFpbmVyID0gJCgnPGRpdiBjbGFzcz1cImNoYXItY291bnRcIi8+JykuaW5zZXJ0QmVmb3JlKCR0aGlzKTtcclxuXHRcdH1cclxuXHRcdCR0aGlzLnByZXYoJ2Rpdi5jaGFyLWNvdW50JykuaHRtbChjaGFyQ291bnRIdG1sKTtcclxuXHR9XHJcbn0qL1xyXG52YXIgdWlldmVudHMgPSB7XHJcbiAgICBjdXN0b21GaWVsZHM6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgJGNvbiA9ICQoJ2JvZHknKTtcclxuICAgICAgICAkY29uLmZpbmQoJy5jdXN0b20tY2hlY2tib3gnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKGpRdWVyeSh0aGlzKS5maW5kKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKS5pcygnOmNoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMpLmZpbmQoJy5jdXN0b20tbGluaycpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkY29uLmZpbmQoJy5jdXN0b20tY2hlY2tib3ggLmN1c3RvbS1saW5rJykub2ZmKCdjbGljaycpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyICRjdXN0b21jaGVjayA9ICQodGhpcykuY2xvc2VzdCgnLmN1c3RvbS1jaGVja2JveCcpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdlcnJvcicpO1xyXG4gICAgICAgICAgICBpZiAoJGN1c3RvbWNoZWNrLmZpbmQoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScpLmlzKCc6Y2hlY2tlZCcpKSB7XHJcbiAgICAgICAgICAgICAgICAkY3VzdG9tY2hlY2suZmluZCgnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJykuY2xpY2soKTtcclxuICAgICAgICAgICAgICAgICRjdXN0b21jaGVjay5maW5kKCcuY3VzdG9tLWxpbmsnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkY3VzdG9tY2hlY2suZmluZCgnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJykuY2xpY2soKTtcclxuICAgICAgICAgICAgICAgICRjdXN0b21jaGVjay5maW5kKCcuY3VzdG9tLWxpbmsnKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAvKmlmKCQoJ2JvZHknKS5oYXNDbGFzcygncmFwYWxhX2RldmljZScpKXtcclxuICAgICAgICAgICAgJGNvbi5maW5kKFwiLnVpLWRpYWxvZyAjZGlhbG9nY29udGFpbmVyMTIzICNWaXBpbnNpZGVyRm9ybSAuc2VsZWN0LXN0eWxlIC5zZWxlY3Rib3hcIikub2ZmKCdjbGljaycpLm9uKFwiY2xpY2tcIixmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KFwiLmZpZWxkLXdyYXBwZXJcIikuYWRkQ2xhc3MoJ2V4cGFuZGVkJyk7XHJcbiAgICAgICAgICAgICAgICB9KS5vbihcImJsdXIgY2hhbmdlXCIsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KFwiLmZpZWxkLXdyYXBwZXJcIikucmVtb3ZlQ2xhc3MoJ2V4cGFuZGVkJyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9Ki9cclxuXHJcbiAgICAgICAgLy8gY3VzdG9tIHNlbGVjdCBpbXBsZW1lbnRhdGlvbiBpbiBWSVAgaW5zaWRlclxyXG4gICAgICAgIC8qaWYoISQoJ2JvZHknKS5oYXNDbGFzcygncmFwYWxhX2RldmljZScpKXtcclxuICAgICAgICAgICAgJGNvbi5maW5kKFwiLmN1c3RvbWl6ZWQtc2VsZWN0XCIpLmZpbmQoXCJzZWxlY3RcIikuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgaWYoJCh0aGlzKS5hdHRyKCdkaXNhYmxlZCcpKXtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnNlbGVjdGJveCgnZGlzYWJsZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAkKHRoaXMpLnNlbGVjdGJveCgpO1xyXG4gICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJCgnLnNiT3B0aW9ucyBsaTpsYXN0JykuYWRkQ2xhc3MoJ2xhc3QnKTtcclxuICAgICAgICAgICAgfSkuZm9jdXMoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICQodGhpcykubmV4dCgnLnNiSG9sZGVyJykudHJpZ2dlcignZm9jdXMnKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH1cclxuICAgICovXHJcbiAgICAgICAgJGNvbi5maW5kKCcuY3VzdG9tLWNoZWNrYm94IGlucHV0W3R5cGU9XCJjaGVja2JveFwiXScpLm9mZignY2hhbmdlJykub24oJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuY3VzdG9tLWNoZWNrYm94JykuZmluZCgnLmN1c3RvbS1saW5rJykucmVtb3ZlQ2xhc3MoJ2Vycm9yJyk7XHJcbiAgICAgICAgICAgIHZhciAkZm9ybSA9ICQoJy5hZGRyZXNzJyk7XHJcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmlzKCc6Y2hlY2tlZCcpKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5jdXN0b20tY2hlY2tib3gnKS5maW5kKCcuY3VzdG9tLWxpbmsnKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5pcygnW25hbWUkPV9zYW1lYXNzaGlwcGluZ2FkZHJlc3NdJykpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRBZGRyZXNzID0gJCh0aGlzKS5jbG9zZXN0KCcuY3VzdG9tLWNoZWNrYm94JykuZGF0YSgnYWRkcmVzcycpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5zZWxlY3RlZC1zaGlwcGluZy1hZGRyZXNzJykuZW1wdHkoKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuc2VsZWN0ZWQtc2hpcHBpbmctYWRkcmVzcycpLmFwcGVuZChzZWxlY3RlZEFkZHJlc3MuZmlyc3ROYW1lICsgJyAnICsgc2VsZWN0ZWRBZGRyZXNzLmxhc3ROYW1lICsgJzxici8+JyArIHNlbGVjdGVkQWRkcmVzcy5hZGRyZXNzMSArICcgJyArIHNlbGVjdGVkQWRkcmVzcy5hZGRyZXNzMiArICc8YnIvPicgKyBzZWxlY3RlZEFkZHJlc3MuY2l0eSArICcgJyArIHNlbGVjdGVkQWRkcmVzcy5zdGF0ZUNvZGUgKyAnICcgKyBzZWxlY3RlZEFkZHJlc3MucG9zdGFsQ29kZSArICc8YnIvPicgKyBzZWxlY3RlZEFkZHJlc3MucGhvbmUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHV0aWwuZmlsbEFkZHJlc3NGaWVsZHMoc2VsZWN0ZWRBZGRyZXNzLCAkZm9ybSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmVkaXQtYWRkcmVzcy1maWVsZCcpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLnNlbGVjdGVkLXNoaXBwaW5nLWFkZHJlc3MsIC5uZXctYWRkcmVzcy1maWVsZCcpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLnNoaXBwaW5nLWFkZHJlc3MtZmllbGQtc2VjdGlvbicpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdWlldmVudHMuY3VzdG9tRmllbGRzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmN1c3RvbS1jaGVja2JveCcpLmZpbmQoJy5jdXN0b20tbGluaycpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmlzKCdbbmFtZSQ9X3NhbWVhc3NoaXBwaW5nYWRkcmVzc10nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5hZGRyZXNzb3B0aW9ucy1hZGRUb0FkZHJlc3NCb29rLC5hZGRyZXNzb3B0aW9ucy1tYWtlZGVmYXVsdCAnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJ2lucHV0W25hbWUkPVxcJ3NoaXBwaW5nQWRkcmVzc19zZWxlY3RlZGFkZHJlc3NcXCddJykudmFsKCcnKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuc2VsZWN0ZWQtc2hpcHBpbmctYWRkcmVzcycpLmVtcHR5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XFwnX2FkZHJlc3NpZFxcJ10nKS52YWwoJycpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJ2lucHV0W25hbWUkPVxcJ19hZGRyZXNzRmllbGRzX2ZpcnN0TmFtZVxcJ10nKS52YWwoJycpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJ2lucHV0W25hbWUkPVxcJ19hZGRyZXNzRmllbGRzX2xhc3ROYW1lXFwnXScpLnZhbCgnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XFwnX2FkZHJlc3NGaWVsZHNfYWRkcmVzczFcXCddJykudmFsKCcnKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCdpbnB1dFtuYW1lJD1cXCdfYWRkcmVzc0ZpZWxkc19hZGRyZXNzMlxcJ10nKS52YWwoJycpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJ2lucHV0W25hbWUkPVxcJ19hZGRyZXNzRmllbGRzX2NpdHlcXCddJykudmFsKCcnKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCdpbnB1dFtuYW1lJD1cXCdfYWRkcmVzc0ZpZWxkc19wb3N0YWxcXCddJykudmFsKCcnKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCdpbnB1dFtuYW1lJD1cXCdfYWRkcmVzc0ZpZWxkc19waG9uZVxcJ10nKS52YWwoJycpO1xyXG4gICAgICAgICAgICAgICAgICAgIHVpZXZlbnRzLmNoYW5nZUZvcm1TZWxlY3Rpb24oalF1ZXJ5KCdzZWxlY3RbbmFtZSQ9XFwnX2FkZHJlc3NGaWVsZHNfc3RhdGVzX3N0YXRlXFwnXScpWzBdLCAnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdWlldmVudHMuY2hhbmdlRm9ybVNlbGVjdGlvbihqUXVlcnkoJ3NlbGVjdC5hZGRyZXNzLXNlbGVjdCcpWzBdLCAnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLnNoaXBwaW5nLWFkZHJlc3MtZmllbGQtc2VjdGlvbicpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLnNlbGVjdGVkLXNoaXBwaW5nLWFkZHJlc3MsIC5uZXctYWRkcmVzcy1maWVsZCwgLmVkaXQtYWRkcmVzcy1maWVsZCcpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XFwnX2FkZHJlc3NGaWVsZHNfcGhvbmVcXCddJykuY2xvc2VzdCgnZGl2LnBob25lJykuZmluZCgnc3Bhbi5lcnJvcmNsaWVudCcpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJ2lucHV0W25hbWUkPVxcJ19hZGRyZXNzRmllbGRzX3Bvc3RhbFxcJ10nKS5jbG9zZXN0KCdkaXYuemlwJykuZmluZCgnc3Bhbi5lcnJvcmNsaWVudCcpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5hZGRyZXNzZm9ybSAuZm9ybS1yb3cuY3VzdG9tLXNlbGVjdCcpLnJlbW92ZUNsYXNzKCdjdXN0b21zZWxlY3QtZXJyb3InKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuY3VzdG9tLXNlbGVjdCcpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0VmFsID0gJCh0aGlzKS5maW5kKCc6c2VsZWN0ZWQnKS50ZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLnNlbGVjdG9yT3V0JykudGV4dChzZWxlY3RWYWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJ2EuY2xlYXJidXR0b24nKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLnNoaXBwaW5nLWFkZHJlc3MtZmllbGQtc2VjdGlvbiAuZm9ybS1yb3cnKS5maW5kKCdpbnB1dCcpLnJlbW92ZUNsYXNzKCdlcnJvcmNsaWVudCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHVpZXZlbnRzLmN1c3RvbUZpZWxkcygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJGNvbi5maW5kKCcuY3VzdG9tLXNlbGVjdCcpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ3NlbGVjdCcpLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XHJcbiAgICAgICAgICAgIHZhciBzZWxXaWR0aCA9ICQodGhpcykuZmluZCgnc2VsZWN0Jykud2lkdGgoKTtcclxuICAgICAgICAgICAgaWYgKCQodGhpcykuZmluZCgnc2VsZWN0JykuaGFzQ2xhc3MoJ2lucHV0LWxvbmdlcicpKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxXaWR0aCA9IHNlbFdpZHRoIC0gMTc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJCh0aGlzKS5maW5kKCdzZWxlY3QnKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgJ3dpZHRoJzogc2VsV2lkdGggKyAyMCxcclxuICAgICAgICAgICAgICAgICdsZWZ0JzogJzBweCcsXHJcbiAgICAgICAgICAgICAgICAnbGluZS1oZWlnaHQnOiAnMjhweCcsXHJcbiAgICAgICAgICAgICAgICAnei1pbmRleCc6ICc5OScsXHJcbiAgICAgICAgICAgICAgICAncG9zaXRpb24nOiAncmVsYXRpdmUnLFxyXG4gICAgICAgICAgICAgICAgJ2Zsb2F0JzogJ2xlZnQnLFxyXG4gICAgICAgICAgICAgICAgJ3BhZGRpbmcnOiAnMHB4J1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuZmllbGQtd3JhcHBlcicpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAnYmFja2dyb3VuZC1wb3NpdGlvbic6IHNlbFdpZHRoLFxyXG4gICAgICAgICAgICAgICAgJ3dpZHRoJzogc2VsV2lkdGggKyAyMCxcclxuICAgICAgICAgICAgICAgICdwYWRkaW5nJzogJzBweCdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmICgkKCcuY3JlZGl0Q2FyZCcpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICAnYmFja2dyb3VuZC1wb3NpdGlvbic6IHNlbFdpZHRoLFxyXG4gICAgICAgICAgICAgICAgICAgICd3aWR0aCc6IHNlbFdpZHRoICsgMTUsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3BhZGRpbmcnOiAnMHB4J1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmZpbmQoJy5zZWxlY3Rvck91dCcpLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ3NlbGVjdCcpLmFmdGVyKCc8ZGl2IGNsYXNzPVxcJ3NlbGVjdG9yT3V0XFwnIHN0eWxlPVxcJ3Bvc2l0aW9uOmFic29sdXRlO3RvcDowcHg7ei1pbmRleDoxO3BhZGRpbmc6MCAyMHB4IDAgMTBweDtcXCc+PC9kaXY+Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCQodGhpcykuZmluZCgnLnNlbGVjdG9yRXJyb3InKS5sZW5ndGggPT0gMCAmJiAhJCh0aGlzKS5jbG9zZXN0KCdtb250aCcpICYmICEkKHRoaXMpLmNsb3Nlc3QoJ3llYXInKSkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkIC5maWVsZC13cmFwcGVyJykuYXBwZW5kKCc8ZGl2IGNsYXNzPVxcJ3NlbGVjdG9yRXJyb3IgZXJyb3JcXCc+PC9kaXY+Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuc2VsZWN0b3JPdXQnKS50ZXh0KCcnKS50ZXh0KCQodGhpcykuZmluZCgnOnNlbGVjdGVkJykudGV4dCgpKTtcclxuXHJcbiAgICAgICAgfSkuY2hhbmdlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHN0ciA9ICcnO1xyXG4gICAgICAgICAgICBzdHIgPSAkKHRoaXMpLmZpbmQoJzpzZWxlY3RlZCcpLnRleHQoKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuc2VsZWN0b3JPdXQnKS50ZXh0KCcnKS50ZXh0KHN0cik7XHJcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdhZGRyZXNzbGlzdCcpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5maW5kKCcuc2VsZWN0b3JPdXQnKS5vdXRlcldpZHRoKCkgPj0gMjk4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RyID0gc3RyLnN1YnN0cigwLCAzNCkgKyAnLi4uJztcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5zZWxlY3Rvck91dCcpLnRleHQoJycpLnRleHQoc3RyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkY29uLmZpbmQoJy5jdXN0b20tc2VsZWN0IHNlbGVjdCcpLmJpbmQoJ2JsdXIgY2hhbmdlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygndmFsaWQnKSB8fCAkKHRoaXMpLnZhbCgpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmN1c3RvbS1zZWxlY3QnKS5yZW1vdmVDbGFzcygnY3VzdG9tc2VsZWN0LWVycm9yJyk7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdlcnJvcmNsaWVudCcpLmFkZENsYXNzKCd2YWxpZCcpO1xyXG4gICAgICAgICAgICAgICAgLy8kKHRoaXMpLmZpbmQoXCJvcHRpb25bdmFsdWU9XCIrJCh0aGlzKS52YWwoKStcIl1cIikuYXR0cihcInNlbGVjdGVkXCIsXCJzZWxlY3RlZFwiKTtcclxuICAgICAgICAgICAgICAgIGlmIChqUXVlcnkodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmhhc0NsYXNzKCdzdGF0ZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLnN0YXRlLWJsayAuc3RhdGVlcnJvci5lcnJvcicpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmN1c3RvbS1zZWxlY3QnKS5hZGRDbGFzcygnY3VzdG9tc2VsZWN0LWVycm9yJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoalF1ZXJ5KHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5oYXNDbGFzcygnc3RhdGUnKSAmJiAhalF1ZXJ5KHRoaXMpLmNsb3Nlc3QoJy5jdXN0b20tc2VsZWN0JykuaGFzQ2xhc3MoJ2JsdXJlZCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KCcuc3RhdGUtYmxrIC5zdGF0ZWVycm9yLmVycm9yJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChqUXVlcnkodGhpcykuaGFzQ2xhc3MoJ3llYXJzZWxlY3QnKSB8fCBqUXVlcnkodGhpcykuaGFzQ2xhc3MoJ21vbnRoc2VsZWN0JykpIHtcclxuICAgICAgICAgICAgICAgIGlmIChqUXVlcnkoJy55ZWFyc2VsZWN0JykudmFsaWQoKSA9PSAxICYmIGpRdWVyeSgnLm1vbnRoc2VsZWN0JykudmFsaWQoKSA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KCcuZXhwaXJhdGlvbmRhdGV2YWxpZC5lcnJvcicpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICBqUXVlcnkoJy5leHBpcmF0aW9uZGF0ZS5lcnJvcicpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIC8vY2hhbmdlcyB0aGUgc2VsZWN0aW9uIG9mIHRoZSBnaXZlbiBmb3JtIHNlbGVjdCB0byB0aGUgZ2l2ZW4gdmFsdWVcclxuICAgIGNoYW5nZUZvcm1TZWxlY3Rpb246IGZ1bmN0aW9uIChzZWxlY3RFbGVtLCBzZWxlY3RlZFZhbHVlKSB7XHJcbiAgICAgICAgaWYgKCFzZWxlY3RFbGVtKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBzZWxlY3RFbGVtLm9wdGlvbnM7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAvLyBmaW5kIGluZGV4IG9mIHZhbHVlIHRvIHNlbGVjdFxyXG4gICAgICAgICAgICB2YXIgaWR4ID0gMDtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvcHRpb25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9uc1tpXS52YWx1ZSAhPSBzZWxlY3RlZFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZHggPSBpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2VsZWN0RWxlbS5zZWxlY3RlZEluZGV4ID0gaWR4O1xyXG4gICAgICAgICAgICAkKCcuY3VzdG9tLXNlbGVjdCcpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdFZhbCA9ICQodGhpcykuZmluZCgnOnNlbGVjdGVkJykudGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuc2VsZWN0b3JPdXQnKS50ZXh0KHNlbGVjdFZhbCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBpbml0OiBmdW5jdGlvbiAoJGNvbikge1xyXG5cclxuICAgICAgICBpZiAoJGNvbiA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICRjb24gPSAkKCdib2R5Jyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB1aWV2ZW50cy5jdXN0b21GaWVsZHMoKTtcclxuICAgICAgICAvLyBEeW5hbWljYWx5IGdlbmVyYXRpbmcgdGFiaW5kZXggZm9yIFZJUFxyXG4gICAgICAgIGlmICgkKCcudWktZGlhbG9nJykuaGFzQ2xhc3MoJ3ZpcEluc2lkZXItZGxnJykpIHtcclxuICAgICAgICAgICAgJCgnLnZpcEluc2lkZXItZGxnIC5mb3JtZmllbGQnKS5lYWNoKGZ1bmN0aW9uIChpKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJzppbnB1dDpub3QoOmhpZGRlbiknKS5hdHRyKCd0YWJpbmRleCcsIGkgKyAyMSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvKiQoZG9jdW1lbnQpLmFqYXhDb21wbGV0ZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmKCQoJy5wdF9wcm9kdWN0c2VhcmNocmVzdWx0JykubGVuZ3RoID4gMCl7YXBwLnNlYXJjaC5zZWFyY2hSZWZpbmVtZW50VG9nZ2xlKCk7fVxyXG4gICAgICAgICAgICB1aWV2ZW50cy5zeW5jY2hlY2tvdXRIKCk7XHJcbiAgICAgICAgfSk7Ki9cclxuICAgICAgICAkY29uLmZpbmQoJ2EuY2xlYXJidXR0b24nKS5vbignY2xpY2sgdG91Y2hzdGFydCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnaW5wdXQnKS52YWwoJycpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCd0ZXh0YXJlYScpLnZhbCgnJyk7XHJcbiAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJ2EuY2xlYXJidXR0b24nKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5jb3JyZWN0YWRkcmVzcycpLmhpZGUoKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmZvcm0tcm93ICwgLmxhYmVsIHNwYW4nKS5yZW1vdmVDbGFzcygnaW5wdXRsYWJlbCcpO1xyXG4gICAgICAgICAgICB2YXIgdGV4dGFyZU1heExlbmd0aCA9ICQodGhpcykuY2xvc2VzdCgnLmZpZWxkLXdyYXBwZXInKS5maW5kKCd0ZXh0YXJlYScpLmF0dHIoJ21heGxlbmd0aCcpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5maWVsZC13cmFwcGVyJykuZmluZCgnLmNoYXItY291bnQnKS5odG1sKCcnKS5odG1sKCdDaGFyYWN0ZXJzIFJlbWFpbmluZyAnICsgdGV4dGFyZU1heExlbmd0aCk7XHJcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCdpbnB1dFtuYW1lJD1cIl9jcmVkaXRDYXJkX251bWJlclwiXScpLmxlbmd0aCA+IDAgJiYgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnaW5wdXRbbmFtZSQ9XCJfY3JlZGl0Q2FyZF9udW1iZXJcIl0nKS52YWwoKS5sZW5ndGggPCA0KSB7XHJcbiAgICAgICAgICAgICAgICAkKCcuY2FyZHR5cGVpbWcgPiBkaXYnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5maWVsZC13cmFwcGVyIC5tYXhlbGVtZW50JykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmZpZWxkLXdyYXBwZXIgLm1heGVsZW1lbnQnKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICRjb24uZmluZCgnLnByb21vLWlucHV0LWJ1dHRvbiAuZmllbGQtd3JhcHBlcicpLm9uKCdrZXl1cCBibHVyJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5maW5kKCdpbnB1dCcpLnZhbCgpICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCQodGhpcykuZmluZCgnaW5wdXQnKS52YWwoKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCdhLmNsZWFyYnV0dG9uJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ2EuY2xlYXJidXR0b24nKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAkY29uLmZpbmQoJy5naWZ0Y2VydGZpZWxkcyAuZmllbGQtd3JhcHBlcicpLm9uKCdrZXl1cCBibHVyJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5maW5kKCdpbnB1dCcpLnZhbCgpICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCdpbnB1dCcpLnJlbW92ZUNsYXNzKCdlcnJvcmNsaWVudCcpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCQodGhpcykuZmluZCgnaW5wdXQnKS52YWwoKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCdhLmNsZWFyYnV0dG9uJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ2EuY2xlYXJidXR0b24nKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKCQoJy51aS1sb2dpbicpLmxlbmd0aCA+IDAgfHwgJCgnLnBhc3N3b3JkcmVzZXQnKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICRjb24uZmluZCgnLnVpLWxvZ2luIC5mb3JtZmllbGQnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciAkdmFsID0gJCh0aGlzKS5maW5kKCdpbnB1dFt0eXBlPVwidGV4dFwiXScpLmxlbmd0aCA+IDAgPyAkKHRoaXMpLmZpbmQoJ2lucHV0W3R5cGU9XCJ0ZXh0XCJdJykudmFsKCkgOiAkKHRoaXMpLmZpbmQoJ2lucHV0W3R5cGU9XCJwYXNzd29yZFwiXScpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCQodGhpcykuZmluZCgnLmZpZWxkLXdyYXBwZXIgLmNsZWFyYnV0dG9uJykubGVuZ3RoID09IDAgJiYgJCh0aGlzKS5maW5kKCcuZmllbGQtd3JhcHBlciBpbnB1dFt0eXBlPVwidGV4dFwiXScpLmxlbmd0aCA+IDAgfHwgJCh0aGlzKS5maW5kKCcuZmllbGQtd3JhcHBlciBpbnB1dFt0eXBlPVwicGFzc3dvcmRcIl0nKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuZmllbGQtd3JhcHBlcicpLmFwcGVuZCgnPGEgY2xhc3M9XCJjbGVhcmJ1dHRvblwiPjwvYT4nKTtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5jbGVhcmJ1dHRvbicpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICgoJHZhbCAhPSBudWxsIHx8ICR2YWwgIT0gdW5kZWZpbmVkKSAmJiAkdmFsLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5jbGVhcmJ1dHRvbicpLnNob3coKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgkKCcuYWNjb3VudC1zZWN0aW9uJykubGVuZ3RoID4gMCB8fCAkKCcucGFzc3dvcmRyZXNldCcpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgJGNvbi5maW5kKCcuYWNjb3VudC1zZWN0aW9uIC5mb3JtZmllbGQnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciAkdmFsID0gJCh0aGlzKS5maW5kKCdpbnB1dFt0eXBlPVwidGV4dFwiXScpLmxlbmd0aCA+IDAgPyAkKHRoaXMpLmZpbmQoJ2lucHV0W3R5cGU9XCJ0ZXh0XCJdJykudmFsKCkgOiAkKHRoaXMpLmZpbmQoJ2lucHV0W3R5cGU9XCJwYXNzd29yZFwiXScpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCQodGhpcykuZmluZCgnLmZpZWxkLXdyYXBwZXIgLmNsZWFyYnV0dG9uJykubGVuZ3RoID09IDAgJiYgJCh0aGlzKS5maW5kKCcuZmllbGQtd3JhcHBlciBpbnB1dFt0eXBlPVwidGV4dFwiXScpLmxlbmd0aCA+IDAgfHwgJCh0aGlzKS5maW5kKCcuZmllbGQtd3JhcHBlciBpbnB1dFt0eXBlPVwicGFzc3dvcmRcIl0nKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuZmllbGQtd3JhcHBlcicpLmFwcGVuZCgnPGEgY2xhc3M9XCJjbGVhcmJ1dHRvblwiPjwvYT4nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICgoJHZhbCAhPSBudWxsIHx8ICR2YWwgIT0gdW5kZWZpbmVkKSAmJiAkdmFsLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5jbGVhcmJ1dHRvbicpLnNob3coKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY29uLmZpbmQoJy5mb3JtZmllbGQgLmZpZWxkLXdyYXBwZXIgaW5wdXQsLmZvcm1maWVsZCAuZmllbGQtd3JhcHBlciB0ZXh0YXJlYScpLm9uKCdrZXl1cCBpbnB1dCBibHVyJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS52YWwoKSAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLnZhbCgpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCdhLmNsZWFyYnV0dG9uJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCdhLmNsZWFyYnV0dG9uJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy92YXIgT1NOYW1lID0gJ1Vua25vd24gT1MnO1xyXG4gICAgICAgIGlmIChuYXZpZ2F0b3IuYXBwVmVyc2lvbi5pbmRleE9mKCdNYWMnKSAhPSAtMSkge1xyXG4gICAgICAgICAgICAkKCcucHRfdmlwaW5zaWRlcicpLmZpbmQoJ3NwYW4ucmFwYWxhLWVudGl0eS1ob2xkZXIgaScpLmFkZENsYXNzKCdtYWNmb250Jyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkKCcucGF5bWVudG1ldGhvZHNfY29udCAudG9nZ2xlJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB1aWV2ZW50cy5zeW5jY2hlY2tvdXRIKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoJ2J1dHRvbltuYW1lPVxcJ2R3ZnJtX2xvZ2luX2xvZ2luXFwnXScpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB1aWV2ZW50cy5zeW5jY2hlY2tvdXRIKCk7XHJcbiAgICAgICAgICAgIH0sIDEwMCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJCgnYnV0dG9uW25hbWU9XFwnZHdmcm1fYmlsbGluZ2dpZnRjZXJ0X3JlZGVlbUdpZnRDZXJ0XFwnXScpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB1aWV2ZW50cy5zeW5jY2hlY2tvdXRIKCk7XHJcbiAgICAgICAgICAgIH0sIDEwMCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJCgnYnV0dG9uW25hbWU9XFwnZHdmcm1fYmlsbGluZ2NvdXBvbl9hcHBseUNvdXBvblxcJ10nKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xyXG4gICAgICAgICAgICB9LCAxMDApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoJy5jaGVja2JhbGFuY2UgYScpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB1aWV2ZW50cy5zeW5jY2hlY2tvdXRIKCk7XHJcbiAgICAgICAgICAgIH0sIDEwMCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJCgnLmdpZnRjZXJ0Y291cG9uZm9ybSAuZ2lmdC1oZWFkaW5nJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoJCgnLnNob3ctY29udGVudCcpLmlzKCc6dmlzaWJsZScpID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICQoJy5zaG93LWNvbnRlbnQnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5naWZ0Y2VydGZpZWxkJykuZmluZCgnc3Bhbi5lcnJvcicpLmhpZGUoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICQoJy5zaG93LWNvbnRlbnQnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5naWZ0Y2VydGZpZWxkJykuZmluZCgnc3Bhbi5lcnJvcicpLnNob3coKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB1aWV2ZW50cy5zeW5jY2hlY2tvdXRIKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJCgnYm9keScpLm9uKCdrZXlwcmVzcyBrZXl1cCcsICdpbnB1dFtpZCQ9XCJfYWRkcmVzc2lkXCJdLGlucHV0W2lkJD1cIl9hZGRyZXNzRmllbGRzX2ZpcnN0TmFtZVwiXSxpbnB1dFtpZCQ9XCJfYWRkcmVzc0ZpZWxkc19sYXN0TmFtZVwiXSxpbnB1dFtpZCQ9XCJfYWRkcmVzc0ZpZWxkc19hZGRyZXNzMVwiXSxpbnB1dFtpZCQ9XCJfYWRkcmVzc0ZpZWxkc19hZGRyZXNzMlwiXSxpbnB1dFtpZCQ9XCJfYWRkcmVzc0ZpZWxkc19jaXR5XCJdLGlucHV0W2lkJD1cIl9hZGRyZXNzRmllbGRzX3Bob25lXCJdLGlucHV0W2lkJD1cIl9hZGRyZXNzRmllbGRzX3Bvc3RhbFwiXSxpbnB1dFtpZCQ9XCJfY29udGFjdHVzX3Bob25lXCJdJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgdmFyIGtleWNvZGUgPSBlLmtleUNvZGUgPyBlLmtleUNvZGUgOiBlLndoaWNoO1xyXG4gICAgICAgICAgICB2YXIgbWF4bGVuZ3RoID0gJCh0aGlzKS5hdHRyKCdtYXhsZW5ndGgnKTtcclxuICAgICAgICAgICAgdmFyIG1heGxtc2cgPSAnVGhpcyBmaWVsZCBpcyBsaW1pdGVkIHRvICcgKyBtYXhsZW5ndGggKyAnIGNoYXJhY3RlcnMuJztcclxuICAgICAgICAgICAgaWYgKGpRdWVyeSh0aGlzKS5oYXNDbGFzcygncGhvbmUnKSB8fCBqUXVlcnkodGhpcykuaGFzQ2xhc3MoJ3Bob25lQ0RVUycpKSB7XHJcbiAgICAgICAgICAgICAgICBtYXhsZW5ndGggPSAxNDtcclxuICAgICAgICAgICAgICAgICQodGhpcykuYXR0cignbWF4bGVuZ3RoJywgbWF4bGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgIG1heGxtc2cgPSAnVGhpcyBmaWVsZCBpcyBsaW1pdGVkIHRvIDEwIG51bWJlcnMuJztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGpRdWVyeSh0aGlzKS5oYXNDbGFzcygncG9zdGFsJykpIHtcclxuICAgICAgICAgICAgICAgIG1heGxlbmd0aCA9IDEwO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdtYXhsZW5ndGgnLCBtYXhsZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgbWF4bG1zZyA9ICdUaGlzIGZpZWxkIGlzIGxpbWl0ZWQgdG8gOSBudW1iZXJzLic7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGtleWNvZGUgIT0gODYpIHtcclxuICAgICAgICAgICAgICAgIHZhciBtYXhFbGVtZW50ID0gJzxkaXYgY2xhc3M9XFwnbWF4ZWxlbWVudCBoaWRlXFwnPicgKyBtYXhsbXNnICsgJzwvZGl2Pic7XHJcbiAgICAgICAgICAgICAgICBpZiAoKCQodGhpcykudmFsKCkubGVuZ3RoID49IG1heGxlbmd0aCkgJiYgKGtleWNvZGUgIT0gOSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5jbG9zZXN0KCcuZmllbGQtd3JhcHBlcicpLmZpbmQoJ3NwYW4uZXJyb3JjbGllbnQnKS5sZW5ndGggIT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5maWVsZC13cmFwcGVyJykuZmluZCgnc3Bhbi5lcnJvcmNsaWVudCcpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5jbG9zZXN0KCcuZmllbGQtd3JhcHBlcicpLmZpbmQoJy5tYXhlbGVtZW50JykubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZmllbGQtd3JhcHBlcicpLmFwcGVuZChtYXhFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5maWVsZC13cmFwcGVyJykuZmluZCgnLm1heGVsZW1lbnQnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnZhbCgkKHRoaXMpLnZhbCgpLnN1YnN0cigwLCBtYXhsZW5ndGgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQodGhpcykuY2xvc2VzdCgnLmZpZWxkLXdyYXBwZXInKS5maW5kKCcubWF4ZWxlbWVudCcpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZmllbGQtd3JhcHBlcicpLmZpbmQoJy5tYXhlbGVtZW50JykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoJ2JvZHknKS5vbignYmx1cicsICdpbnB1dFtpZCQ9XCJfYWRkcmVzc2lkXCJdLGlucHV0W2lkJD1cIl9hZGRyZXNzRmllbGRzX2ZpcnN0TmFtZVwiXSxpbnB1dFtpZCQ9XCJfYWRkcmVzc0ZpZWxkc19sYXN0TmFtZVwiXSxpbnB1dFtpZCQ9XCJfYWRkcmVzc0ZpZWxkc19hZGRyZXNzMVwiXSxpbnB1dFtpZCQ9XCJfYWRkcmVzc0ZpZWxkc19hZGRyZXNzMlwiXSxpbnB1dFtpZCQ9XCJfYWRkcmVzc0ZpZWxkc19jaXR5XCJdLGlucHV0W2lkJD1cIl9hZGRyZXNzRmllbGRzX3Bob25lXCJdLGlucHV0W2lkJD1cIl9hZGRyZXNzRmllbGRzX3Bvc3RhbFwiXSxpbnB1dFtpZCQ9XCJfY29udGFjdHVzX3Bob25lXCJdJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKCcubWF4ZWxlbWVudCcpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgICQoJyNjdXN0b21lcmNvbnRhY3R1cycpLmZpbmQoJ3NwYW4nKS5yZW1vdmVDbGFzcygnbWF4ZWxlbWVudCcpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8qIGlmKCQoXCIub3JkZXJ0b3RhbHNhdmluZ1wiKS5sZW5ndGggPiAwICkge1xyXG4gICAgICAgICAgICAgJChcIi5uZXctc3VtbWVyeVwiKS5yZW1vdmVDbGFzcyhcImRpc2NvdW50LWF2YWlsYWJsZVwiKTtcclxuICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgJChcIi5uZXctc3VtbWVyeVwiKS5hZGRDbGFzcyhcImRpc2NvdW50LWF2YWlsYWJsZVwiKTtcclxuICAgICAgICAgfSovXHJcbiAgICAgICAgaWYgKCQoJy51aS1kaWFsb2cnKS5oYXNDbGFzcygndmlwSW5zaWRlci1kbGcnKSkge1xyXG4gICAgICAgICAgICAkKCcudmlwSW5zaWRlci1kbGcgLmZvcm1maWVsZCcpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCQodGhpcykuZmluZCgnLmZpZWxkLXdyYXBwZXIgLmNsZWFyYnV0dG9uJykubGVuZ3RoID09IDAgJiYgJCh0aGlzKS5maW5kKCcuZmllbGQtd3JhcHBlciBpbnB1dFt0eXBlPVwidGV4dFwiXScpLmxlbmd0aCA+IDAgfHwgJCh0aGlzKS5maW5kKCcuZmllbGQtd3JhcHBlciB0ZXh0YXJlYScpLmxlbmd0aCA+IDAgfHwgJCh0aGlzKS5maW5kKCcuZmllbGQtd3JhcHBlciBpbnB1dFt0eXBlPVwicGFzc3dvcmRcIl0nKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuZmllbGQtd3JhcHBlcicpLmFwcGVuZCgnPGEgY2xhc3M9XCJjbGVhcmJ1dHRvblwiPjwvYT4nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLmZpZWxkLXdyYXBwZXIgaW5wdXQudGV4dGlucHV0LCAuZmllbGQtd3JhcHBlciB0ZXh0YXJlYScpLnVuYmluZCgnY2hhbmdlJykuYmluZCgnY2xpY2sgY2hhbmdlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdlcnJvcmNsaWVudCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2Vycm9yY2xpZW50Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5sYWJlbCcpLmZpbmQoJ3NwYW4uZXJyb3JjbGllbnQnKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxhYmVsJykucmVtb3ZlQ2xhc3MoJ2Vycm9yb2NjdXJlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcuZm9ybS1yb3cgLCAubGFiZWwgc3BhbicpLnJlbW92ZUNsYXNzKCdpbnB1dGxhYmVsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuZmllbGQtd3JhcHBlciBzZWxlY3QnKS51bmJpbmQoJ2NoYW5nZScpLmJpbmQoJ2ZvY3VzaW4gY2hhbmdlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdlcnJvcmNsaWVudCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2Vycm9yY2xpZW50Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5sYWJlbCcpLmZpbmQoJ3NwYW4uZXJyb3JjbGllbnQnKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxhYmVsJykucmVtb3ZlQ2xhc3MoJ2Vycm9yb2NjdXJlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcuZm9ybS1yb3cgLCAubGFiZWwgc3BhbicpLnJlbW92ZUNsYXNzKCdpbnB1dGxhYmVsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAkKCcjVklQSW5zaWRlci1mb3JtLWNhbmNlbC1pZCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQoJy51aS1kaWFsb2ctdGl0bGViYXItY2xvc2UnKS50cmlnZ2VyKCdjbGljaycpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKiogdmlwIHBob25lIGFuZCB6aXAgZXJyb3IgZXhjZWVkIGNvZGUgKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICAkKCdpbnB1dFtpZCQ9XCJfdmlwaW5zaWRlcl9jdXN0b21lcl96aXBcIl0saW5wdXRbaWQkPVwiX3ZpcGluc2lkZXJfY3VzdG9tZXJfcGhvbmVcIl0nKS5iaW5kKCdrZXlwcmVzcyBrZXl1cCcsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIga2V5Y29kZSA9IGUua2V5Q29kZSA/IGUua2V5Q29kZSA6IGUud2hpY2g7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWF4bGVuZ3RoID0gJCh0aGlzKS5hdHRyKCdtYXhsZW5ndGgnKTtcclxuICAgICAgICAgICAgICAgIHZhciBtYXhsbXNnID0gJ1RoaXMgZmllbGQgaXMgbGltaXRlZCB0byAnICsgbWF4bGVuZ3RoICsgJyBjaGFyYWN0ZXJzLic7XHJcbiAgICAgICAgICAgICAgICBpZiAoalF1ZXJ5KHRoaXMpLmhhc0NsYXNzKCd2aXAtcGhvbmUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1heGxlbmd0aCA9IDE0O1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuYXR0cignbWF4bGVuZ3RoJywgbWF4bGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgICAgICBtYXhsbXNnID0gJy1UaGlzIGZpZWxkIGlzIGxpbWl0ZWQgdG8gMTAgbnVtYmVycy4nO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGpRdWVyeSh0aGlzKS5oYXNDbGFzcygndmlwLXppcCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF4bGVuZ3RoID0gMTA7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdtYXhsZW5ndGgnLCBtYXhsZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1heGxtc2cgPSAnLVRoaXMgZmllbGQgaXMgbGltaXRlZCB0byA5IG51bWJlcnMuJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChrZXljb2RlICE9IDg2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1heEVsZW1lbnQgPSAnPGRpdiBjbGFzcz1cXCdtYXhlbGVtZW50IGhpZGVcXCc+JyArIG1heGxtc2cgKyAnPC9kaXY+JztcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS52YWwoKS5sZW5ndGggPj0gbWF4bGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmNsb3Nlc3QoJy5maWVsZC13cmFwcGVyJykuZmluZCgnc3Bhbi5lcnJvcmNsaWVudCcpLmxlbmd0aCAhPSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5maWVsZC13cmFwcGVyJykuZmluZCgnc3Bhbi5lcnJvcmNsaWVudCcpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcubWF4ZWxlbWVudCcpLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcubGFiZWwnKS5hcHBlbmQobWF4RWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGtleWNvZGUgPiA0NyAmJiBrZXljb2RlIDwgNTgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLm1heGVsZW1lbnQnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5sYWJlbCcpLmFkZENsYXNzKCdlcnJvcm9jY3VyZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnZhbCgkKHRoaXMpLnZhbCgpLnN1YnN0cigwLCBtYXhsZW5ndGgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLm1heGVsZW1lbnQnKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcubWF4ZWxlbWVudCcpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxhYmVsJykucmVtb3ZlQ2xhc3MoJ2Vycm9yb2NjdXJlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy90aGlzIGlzIHVzZWQgYWZ0ZXIgdG8gcmVtb3ZlIHRoZSBleGNlZWRpbmcgZXJyb3IgbWVzc2FnZSBvbiBibHVyIGZvciAxMTQzIHRpY2tldFxyXG4gICAgICAgICAgICBqUXVlcnkoJ2lucHV0W2lkJD1cIl92aXBpbnNpZGVyX2N1c3RvbWVyX3ppcFwiXSxpbnB1dFtpZCQ9XCJfdmlwaW5zaWRlcl9jdXN0b21lcl9waG9uZVwiXScpLmJpbmQoJ2JsdXInLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxhYmVsJykuZmluZCgnLm1heGVsZW1lbnQnKS5pcygnOnZpc2libGUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5tYXhlbGVtZW50JykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcjVmlwaW5zaWRlckZvcm0nKS5maW5kKCdzcGFuJykucmVtb3ZlQ2xhc3MoJ21heGVsZW1lbnQnKTtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcubGFiZWwnKS5yZW1vdmVDbGFzcygnZXJyb3JvY2N1cmVkJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvKiotLS0tLS0tIGxlZnQgbmF2LS0tLS0tLS0tLS0tLS0tLSovXHJcbiAgICAgICAgJGNvbi5maW5kKCcuY2F0ZWdvcnltZW51c25ldyBsaS5hY3RpdmUnKS5jbG9zZXN0KCcuY2F0ZWdvcnktdG9wLWxldmVsJykuYWRkQ2xhc3MoJ2N1cnJlbnQnKTtcclxuICAgICAgICAkY29uLmZpbmQoJy5jYXRlZ29yeS10b3AtbGV2ZWwnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ2N1cnJlbnQnKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyICR0aGlzID0gJCgnLmNhdGVnb3J5bWVudXNuZXcgbGkuYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICAgICAgdmFyICRub3R0aGlzID0gJCgnLmNhdGVnb3J5bWVudXNuZXcgbGknKS5maWx0ZXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLm5vdCgnLmFjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmZpbmQoJz4gdWwnKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJz4gYSAuY291bnQtcHJvZHVjdHMnKS5hZGRDbGFzcygnc2VsZWN0X3N1YmxldmVsYXJyb3cnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoJz4gdWwnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAkdGhpcy5wYXJlbnRzKCd1bCcpLnNob3coKTtcclxuICAgICAgICAgICAgICAgIGlmICgkdGhpcy5maW5kKCc+IHVsJykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoJz4gYSAuY291bnQtcHJvZHVjdHMnKS5hZGRDbGFzcygnc3VibGV2ZWxhcnJvdycpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJHRoaXMucGFyZW50cygnbGknKS5ub3QoJ2xpLmFjdGl2ZScpLmZpbmQoJz4gYSAuY291bnQtcHJvZHVjdHMnKS5hZGRDbGFzcygnc3VibGV2ZWxhcnJvdycpO1xyXG4gICAgICAgICAgICAgICAgJHRoaXMuZmluZCgnbGknKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5maW5kKCc+IHVsJykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJz4gYSAuY291bnQtcHJvZHVjdHMnKS5hZGRDbGFzcygnc2VsZWN0X3N1YmxldmVsYXJyb3cnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmZpbmQoJz4gdWwnKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCc+IGEgLmNvdW50LXByb2R1Y3RzJykuYWRkQ2xhc3MoJ3NlbGVjdF9zdWJsZXZlbGFycm93Jyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAvKiQoJ3RleHRhcmVhW2RhdGEtY2hhcmFjdGVyLWxpbWl0XScpLmVhY2goZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgY2hhcmNvdW50KCQodGhpcykpO1xyXG4gICAgICAgICAgICAvLyB0cmlnZ2VyIHRoZSBrZXlkb3duIGV2ZW50IHNvIHRoYXQgYW55IGV4aXN0aW5nIGNoYXJhY3RlciBkYXRhIGlzIGNhbGN1bGF0ZWRcclxuICAgICAgICB9KS5vbigna2V5dXAga2V5cHJlc3MnLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBjaGFyY291bnQoJCh0aGlzKSk7XHJcbiAgICAgICAgfSk7Ki9cclxuICAgIH0sXHJcbiAgICBzeW5jY2hlY2tvdXRIOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCQoJy5wdF9jaGVja291dCcpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgJCgnLml0ZW0tY2FydC1zY3JvbGxiYXInKS5yZW1vdmVBdHRyKCdzdHlsZScpO1xyXG4gICAgICAgICAgICAkKCcucHRfY2hlY2tvdXQgLnN1bW1hcnktc2VjdGlvbiAuc2xpbVNjcm9sbERpdicpLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XHJcbiAgICAgICAgICAgICQoJy5pdGVtLWNhcnQtc2Nyb2xsYmFyJykucmVtb3ZlQ2xhc3MoJ3Njcm9sbGJhci1hY3RpdmUnKTtcclxuICAgICAgICAgICAgJCgnLnB0X2NoZWNrb3V0ICAuYWpheC1jYXJ0c3VtbWFyeScpLmZpbmQoJy5zdW1tYXJ5LWNhcnR0YWJsZScpLnJlbW92ZUNsYXNzKCdzY3JvbGxiYXItaXMtYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICQoJy5pdGVtLWNhcnQtc2Nyb2xsYmFyJykuc2xpbVNjcm9sbCh7ZGVzdHJveTogdHJ1ZX0pO1xyXG4gICAgICAgICAgICB2YXIgY2hlY2tvdXRMZWZ0SCA9ICQoJy5wdF9jaGVja291dCAuY2hlY2tvdXRfY29udCcpLmhlaWdodCgpLFxyXG4gICAgICAgICAgICAgICAgc3VtbWFyeUggPSAkKCcucHRfY2hlY2tvdXQgLnN1bW1hcnktc2VjdGlvbicpLmhlaWdodCgpLFxyXG4gICAgICAgICAgICAgICAgbmV3c3VtbWFyeUggPSAkKCcucHRfY2hlY2tvdXQgIC5uZXctc3VtbWVyeS1jYXJ0Jykubm90KCcubW9iaWxlLXZpZXcnKS5oZWlnaHQoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBuZXdIZWlnaHRSaWdodCA9IHN1bW1hcnlIICsgbmV3c3VtbWFyeUg7XHJcbiAgICAgICAgICAgIGlmIChuZXdIZWlnaHRSaWdodCA+PSBjaGVja291dExlZnRIKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3VtbWFyeUhlaWdodCA9IGNoZWNrb3V0TGVmdEggLSBuZXdzdW1tYXJ5SDtcclxuICAgICAgICAgICAgICAgIHZhciBzdW1tYXJ5SGVpZ2h0UmlnaHRCb3R0b20gPSBzdW1tYXJ5SGVpZ2h0IC0gOTk7XHJcbiAgICAgICAgICAgICAgICAkKCcucHRfY2hlY2tvdXQgLnN1bW1hcnktc2VjdGlvbiAuc2xpbVNjcm9sbERpdicpLmNzcyh7J2hlaWdodCc6IHN1bW1hcnlIZWlnaHRSaWdodEJvdHRvbX0pO1xyXG4gICAgICAgICAgICAgICAgJCgnLml0ZW0tY2FydC1zY3JvbGxiYXInKS5hZGRDbGFzcygnc2Nyb2xsYmFyLWFjdGl2ZScpLmNzcyh7J2hlaWdodCc6IHN1bW1hcnlIZWlnaHRSaWdodEJvdHRvbX0pO1xyXG4gICAgICAgICAgICAgICAgJCgnLml0ZW0tY2FydC1zY3JvbGxiYXInKS5zbGltU2Nyb2xsKHtcclxuICAgICAgICAgICAgICAgICAgICByYWlsVmlzaWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogJyNhMGEwYTAnLFxyXG4gICAgICAgICAgICAgICAgICAgIGFsd2F5c1Zpc2libGU6IHRydWVcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgJCgnLnB0X2NoZWNrb3V0ICAuYWpheC1jYXJ0c3VtbWFyeScpLmZpbmQoJy5zdW1tYXJ5LWNhcnR0YWJsZScpLmFkZENsYXNzKCdzY3JvbGxiYXItaXMtYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkKCcuaXRlbS1jYXJ0LXNjcm9sbGJhcicpLmNzcyh7J2hlaWdodCc6ICdhdXRvJ30pO1xyXG4gICAgICAgICAgICAgICAgJCgnLnB0X2NoZWNrb3V0IC5zdW1tYXJ5LXNlY3Rpb24gLnNsaW1TY3JvbGxEaXYnKS5jc3MoeydoZWlnaHQnOiAnYXV0bycsICdvdmVyZmxvdy15JzogJ2F1dG8nfSk7XHJcbiAgICAgICAgICAgICAgICAkKCcuaXRlbS1jYXJ0LXNjcm9sbGJhcicpLnJlbW92ZUNsYXNzKCdzY3JvbGxiYXItYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcucHRfY2hlY2tvdXQgIC5hamF4LWNhcnRzdW1tYXJ5JykuZmluZCgnLnN1bW1hcnktY2FydHRhYmxlJykucmVtb3ZlQ2xhc3MoJ3Njcm9sbGJhci1pcy1hY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICQoJy5pdGVtLWNhcnQtc2Nyb2xsYmFyJykuc2xpbVNjcm9sbCh7ZGVzdHJveTogdHJ1ZX0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbm1vZHVsZS5leHBvcnRzID0gdWlldmVudHM7XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuXHJcbnZhciBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XHJcbnZhciBjYXJkcmVnZXggPSB7XHJcbiAgICBtYXN0ZXJjYXJkOiAvXjVbMS01XVswLTldezIsMTR9JC8sXHJcbiAgICB2aXNhOiAvXjRbMC05XXszLDE1fSQvLFxyXG4gICAgYW1leDogL14zWzQ3XShbMC05XXsyLDEzfSkkLyxcclxuICAgIGRpc2NvdmVyOiAvXjYoPzowMTFbMC05XXswLDEyfXw1WzAtOV17MiwxNH0pJC9cclxufTtcclxudmFyIHV0aWwgPSB7XHJcbiAgICAvKipcclxuICAgICAqIEBmdW5jdGlvblxyXG4gICAgICogQGRlc2NyaXB0aW9uIGFwcGVuZHMgdGhlIHBhcmFtZXRlciB3aXRoIHRoZSBnaXZlbiBuYW1lIGFuZCB2YWx1ZSB0byB0aGUgZ2l2ZW4gdXJsIGFuZCByZXR1cm5zIHRoZSBjaGFuZ2VkIHVybFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHVybCB0aGUgdXJsIHRvIHdoaWNoIHRoZSBwYXJhbWV0ZXIgd2lsbCBiZSBhZGRlZFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgdGhlIG5hbWUgb2YgdGhlIHBhcmFtZXRlclxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlIHRoZSB2YWx1ZSBvZiB0aGUgcGFyYW1ldGVyXHJcbiAgICAgKi9cclxuICAgIGFwcGVuZFBhcmFtVG9VUkw6IGZ1bmN0aW9uICh1cmwsIG5hbWUsIHZhbHVlKSB7XHJcbiAgICAgICAgLy8gcXVpdCBpZiB0aGUgcGFyYW0gYWxyZWFkeSBleGlzdHNcclxuICAgICAgICBpZiAodXJsLmluZGV4T2YobmFtZSArICc9JykgIT09IC0xKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1cmw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBzZXBhcmF0b3IgPSB1cmwuaW5kZXhPZignPycpICE9PSAtMSA/ICcmJyA6ICc/JztcclxuICAgICAgICByZXR1cm4gdXJsICsgc2VwYXJhdG9yICsgbmFtZSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7XHJcbiAgICB9LFxyXG4gICAgaGlkZGVuRGF0YTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGpRdWVyeS5lYWNoKGpRdWVyeSgnLmhpZGRlbicpLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBoaWRkZW5TdHIgPSBqUXVlcnkodGhpcykuaHRtbCgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGhpZGRlblN0ciA9PT0gJycpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gc2VlIGlmIGl0cyBhIGpzb24gc3RyaW5nXHJcbiAgICAgICAgICAgIGlmIChqUXVlcnkodGhpcykuaGFzQ2xhc3MoJ2pzb24nKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gdHJ5IHRvIHBhcnNlIGl0IGFzIGEganNvblxyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBoaWRkZW5TdHIgPSB3aW5kb3cuZXZhbCgnKCcgKyBoaWRkZW5TdHIgKyAnKScpO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIERvIE5vdGhpbmdcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgalF1ZXJ5KHRoaXMpLnByZXYoKS5kYXRhKCdkYXRhJywgaGlkZGVuU3RyKTtcclxuXHJcbiAgICAgICAgICAgIGpRdWVyeSh0aGlzKS5yZW1vdmUoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqKiogUmVhZCBjb29raWVlZSAgKioqKiovXHJcbiAgICByZWFkQ29va2llOiBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgIHZhciBuYW1lRVEgPSBuYW1lICsgJz0nO1xyXG4gICAgICAgIHZhciBjYSA9IGRvY3VtZW50LmNvb2tpZS5zcGxpdCgnOycpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2EubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIGMgPSBjYVtpXTtcclxuICAgICAgICAgICAgd2hpbGUgKGMuY2hhckF0KDApID09ICcgJykgYyA9IGMuc3Vic3RyaW5nKDEsIGMubGVuZ3RoKTtcclxuICAgICAgICAgICAgaWYgKGMuaW5kZXhPZihuYW1lRVEpID09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjLnN1YnN0cmluZyhuYW1lRVEubGVuZ3RoLCBjLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKiogIFJlYWQgY29va2llICoqKi9cclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gYXBwZW5kcyB0aGUgcGFyYW1ldGVycyB0byB0aGUgZ2l2ZW4gdXJsIGFuZCByZXR1cm5zIHRoZSBjaGFuZ2VkIHVybFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHVybCB0aGUgdXJsIHRvIHdoaWNoIHRoZSBwYXJhbWV0ZXJzIHdpbGwgYmUgYWRkZWRcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXNcclxuICAgICAqL1xyXG4gICAgYXBwZW5kUGFyYW1zVG9Vcmw6IGZ1bmN0aW9uICh1cmwsIHBhcmFtcykge1xyXG4gICAgICAgIHZhciBfdXJsID0gdXJsO1xyXG4gICAgICAgIF8uZWFjaChwYXJhbXMsIGZ1bmN0aW9uICh2YWx1ZSwgbmFtZSkge1xyXG4gICAgICAgICAgICBfdXJsID0gdGhpcy5hcHBlbmRQYXJhbVRvVVJMKF91cmwsIG5hbWUsIHZhbHVlKTtcclxuICAgICAgICB9LmJpbmQodGhpcykpO1xyXG4gICAgICAgIHJldHVybiBfdXJsO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBmdW5jdGlvblxyXG4gICAgICogQGRlc2NyaXB0aW9uIHJlbW92ZSB0aGUgcGFyYW1ldGVyIGFuZCBpdHMgdmFsdWUgZnJvbSB0aGUgZ2l2ZW4gdXJsIGFuZCByZXR1cm5zIHRoZSBjaGFuZ2VkIHVybFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHVybCB0aGUgdXJsIGZyb20gd2hpY2ggdGhlIHBhcmFtZXRlciB3aWxsIGJlIHJlbW92ZWRcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIHRoZSBuYW1lIG9mIHBhcmFtZXRlciB0aGF0IHdpbGwgYmUgcmVtb3ZlZCBmcm9tIHVybFxyXG4gICAgICovXHJcbiAgICByZW1vdmVQYXJhbUZyb21VUkw6IGZ1bmN0aW9uICh1cmwsIG5hbWUpIHtcclxuICAgICAgICBpZiAodXJsLmluZGV4T2YoJz8nKSA9PT0gLTEgfHwgdXJsLmluZGV4T2YobmFtZSArICc9JykgPT09IC0xKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1cmw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBoYXNoO1xyXG4gICAgICAgIHZhciBwYXJhbXM7XHJcbiAgICAgICAgdmFyIGRvbWFpbiA9IHVybC5zcGxpdCgnPycpWzBdO1xyXG4gICAgICAgIHZhciBwYXJhbVVybCA9IHVybC5zcGxpdCgnPycpWzFdO1xyXG4gICAgICAgIHZhciBuZXdQYXJhbXMgPSBbXTtcclxuICAgICAgICAvLyBpZiB0aGVyZSBpcyBhIGhhc2ggYXQgdGhlIGVuZCwgc3RvcmUgdGhlIGhhc2hcclxuICAgICAgICBpZiAocGFyYW1VcmwuaW5kZXhPZignIycpID4gLTEpIHtcclxuICAgICAgICAgICAgaGFzaCA9IHBhcmFtVXJsLnNwbGl0KCcjJylbMV0gfHwgJyc7XHJcbiAgICAgICAgICAgIHBhcmFtVXJsID0gcGFyYW1Vcmwuc3BsaXQoJyMnKVswXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcGFyYW1zID0gcGFyYW1Vcmwuc3BsaXQoJyYnKTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhcmFtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAvLyBwdXQgYmFjayBwYXJhbSB0byBuZXdQYXJhbXMgYXJyYXkgaWYgaXQgaXMgbm90IHRoZSBvbmUgdG8gYmUgcmVtb3ZlZFxyXG4gICAgICAgICAgICBpZiAocGFyYW1zW2ldLnNwbGl0KCc9JylbMF0gIT09IG5hbWUpIHtcclxuICAgICAgICAgICAgICAgIG5ld1BhcmFtcy5wdXNoKHBhcmFtc1tpXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRvbWFpbiArICc/JyArIG5ld1BhcmFtcy5qb2luKCcmJykgKyAoaGFzaCA/ICcjJyArIGhhc2ggOiAnJyk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gZXh0cmFjdCB0aGUgcXVlcnkgc3RyaW5nIGZyb20gVVJMXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdXJsIHRoZSB1cmwgdG8gZXh0cmEgcXVlcnkgc3RyaW5nIGZyb21cclxuICAgICAqKi9cclxuICAgIGdldFF1ZXJ5U3RyaW5nOiBmdW5jdGlvbiAodXJsKSB7XHJcbiAgICAgICAgdmFyIHFzO1xyXG4gICAgICAgIGlmICghXy5pc1N0cmluZyh1cmwpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XHJcbiAgICAgICAgYS5ocmVmID0gdXJsO1xyXG4gICAgICAgIGlmIChhLnNlYXJjaCkge1xyXG4gICAgICAgICAgICBxcyA9IGEuc2VhcmNoLnN1YnN0cigxKTsgLy8gcmVtb3ZlIHRoZSBsZWFkaW5nID9cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHFzO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfVxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9XHJcbiAgICAgKi9cclxuICAgIGVsZW1lbnRJblZpZXdwb3J0OiBmdW5jdGlvbiAoZWwsIG9mZnNldFRvVG9wKSB7XHJcbiAgICAgICAgdmFyIHRvcCA9IGVsLm9mZnNldFRvcCxcclxuICAgICAgICAgICAgbGVmdCA9IGVsLm9mZnNldExlZnQsXHJcbiAgICAgICAgICAgIHdpZHRoID0gZWwub2Zmc2V0V2lkdGgsXHJcbiAgICAgICAgICAgIGhlaWdodCA9IGVsLm9mZnNldEhlaWdodDtcclxuXHJcbiAgICAgICAgd2hpbGUgKGVsLm9mZnNldFBhcmVudCkge1xyXG4gICAgICAgICAgICBlbCA9IGVsLm9mZnNldFBhcmVudDtcclxuICAgICAgICAgICAgdG9wICs9IGVsLm9mZnNldFRvcDtcclxuICAgICAgICAgICAgbGVmdCArPSBlbC5vZmZzZXRMZWZ0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZihvZmZzZXRUb1RvcCkgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgIHRvcCAtPSBvZmZzZXRUb1RvcDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh3aW5kb3cucGFnZVhPZmZzZXQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgIHRvcCA8ICh3aW5kb3cucGFnZVlPZmZzZXQgKyB3aW5kb3cuaW5uZXJIZWlnaHQpICYmXHJcbiAgICAgICAgICAgICAgICBsZWZ0IDwgKHdpbmRvdy5wYWdlWE9mZnNldCArIHdpbmRvdy5pbm5lcldpZHRoKSAmJlxyXG4gICAgICAgICAgICAgICAgKHRvcCArIGhlaWdodCkgPiB3aW5kb3cucGFnZVlPZmZzZXQgJiZcclxuICAgICAgICAgICAgICAgIChsZWZ0ICsgd2lkdGgpID4gd2luZG93LnBhZ2VYT2Zmc2V0XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZG9jdW1lbnQuY29tcGF0TW9kZSA9PT0gJ0NTUzFDb21wYXQnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICB0b3AgPCAod2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgKyB3aW5kb3cuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCkgJiZcclxuICAgICAgICAgICAgICAgIGxlZnQgPCAod2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0ICsgd2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCkgJiZcclxuICAgICAgICAgICAgICAgICh0b3AgKyBoZWlnaHQpID4gd2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgJiZcclxuICAgICAgICAgICAgICAgIChsZWZ0ICsgd2lkdGgpID4gd2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBmdW5jdGlvblxyXG4gICAgICogQGRlc2NyaXB0aW9uIEFwcGVuZHMgdGhlIHBhcmFtZXRlciAnZm9ybWF0PWFqYXgnIHRvIGEgZ2l2ZW4gcGF0aFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGggdGhlIHJlbGF0aXZlIHBhdGhcclxuICAgICAqL1xyXG4gICAgYWpheFVybDogZnVuY3Rpb24gKHBhdGgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hcHBlbmRQYXJhbVRvVVJMKHBhdGgsICdmb3JtYXQnLCAnYWpheCcpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBmdW5jdGlvblxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdXJsXHJcbiAgICAgKi9cclxuICAgIHRvQWJzb2x1dGVVcmw6IGZ1bmN0aW9uICh1cmwpIHtcclxuICAgICAgICBpZiAodXJsLmluZGV4T2YoJ2h0dHAnKSAhPT0gMCAmJiB1cmwuY2hhckF0KDApICE9PSAnLycpIHtcclxuICAgICAgICAgICAgdXJsID0gJy8nICsgdXJsO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdXJsO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gTG9hZHMgY3NzIGR5bmFtaWNhbGx5IGZyb20gZ2l2ZW4gdXJsc1xyXG4gICAgICogQHBhcmFtIHtBcnJheX0gdXJscyBBcnJheSBvZiB1cmxzIGZyb20gd2hpY2ggY3NzIHdpbGwgYmUgZHluYW1pY2FsbHkgbG9hZGVkLlxyXG4gICAgICovXHJcbiAgICBsb2FkRHluYW1pY0NzczogZnVuY3Rpb24gKHVybHMpIHtcclxuICAgICAgICB2YXIgaSwgbGVuID0gdXJscy5sZW5ndGg7XHJcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZGVkQ3NzRmlsZXMucHVzaCh0aGlzLmxvYWRDc3NGaWxlKHVybHNbaV0pKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gTG9hZHMgY3NzIGZpbGUgZHluYW1pY2FsbHkgZnJvbSBnaXZlbiB1cmxcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB1cmwgVGhlIHVybCBmcm9tIHdoaWNoIGNzcyBmaWxlIHdpbGwgYmUgZHluYW1pY2FsbHkgbG9hZGVkLlxyXG4gICAgICovXHJcbiAgICBsb2FkQ3NzRmlsZTogZnVuY3Rpb24gKHVybCkge1xyXG4gICAgICAgIHJldHVybiAkKCc8bGluay8+JykuYXBwZW5kVG8oJCgnaGVhZCcpKS5hdHRyKHtcclxuICAgICAgICAgICAgdHlwZTogJ3RleHQvY3NzJyxcclxuICAgICAgICAgICAgcmVsOiAnc3R5bGVzaGVldCdcclxuICAgICAgICB9KS5hdHRyKCdocmVmJywgdXJsKTsgLy8gZm9yIGkuZS4gPDksIGhyZWYgbXVzdCBiZSBhZGRlZCBhZnRlciBsaW5rIGhhcyBiZWVuIGFwcGVuZGVkIHRvIGhlYWRcclxuICAgIH0sXHJcbiAgICAvLyBhcnJheSB0byBrZWVwIHRyYWNrIG9mIHRoZSBkeW5hbWljYWxseSBsb2FkZWQgQ1NTIGZpbGVzXHJcbiAgICBsb2FkZWRDc3NGaWxlczogW10sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb25cclxuICAgICAqIEBkZXNjcmlwdGlvbiBSZW1vdmVzIGFsbCBjc3MgZmlsZXMgd2hpY2ggd2VyZSBkeW5hbWljYWxseSBsb2FkZWRcclxuICAgICAqL1xyXG4gICAgY2xlYXJEeW5hbWljQ3NzOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGkgPSB0aGlzLmxvYWRlZENzc0ZpbGVzLmxlbmd0aDtcclxuICAgICAgICB3aGlsZSAoMCA+IGktLSkge1xyXG4gICAgICAgICAgICAkKHRoaXMubG9hZGVkQ3NzRmlsZXNbaV0pLnJlbW92ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmxvYWRlZENzc0ZpbGVzID0gW107XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb25cclxuICAgICAqIEBkZXNjcmlwdGlvbiBFeHRyYWN0cyBhbGwgcGFyYW1ldGVycyBmcm9tIGEgZ2l2ZW4gcXVlcnkgc3RyaW5nIGludG8gYW4gb2JqZWN0XHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcXMgVGhlIHF1ZXJ5IHN0cmluZyBmcm9tIHdoaWNoIHRoZSBwYXJhbWV0ZXJzIHdpbGwgYmUgZXh0cmFjdGVkXHJcbiAgICAgKi9cclxuICAgIGdldFF1ZXJ5U3RyaW5nUGFyYW1zOiBmdW5jdGlvbiAocXMpIHtcclxuICAgICAgICBpZiAoIXFzIHx8IHFzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4ge307XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBwYXJhbXMgPSB7fSxcclxuICAgICAgICAgICAgdW5lc2NhcGVkUVMgPSBkZWNvZGVVUklDb21wb25lbnQocXMpO1xyXG4gICAgICAgIC8vIFVzZSB0aGUgU3RyaW5nOjpyZXBsYWNlIG1ldGhvZCB0byBpdGVyYXRlIG92ZXIgZWFjaFxyXG4gICAgICAgIC8vIG5hbWUtdmFsdWUgcGFpciBpbiB0aGUgc3RyaW5nLlxyXG4gICAgICAgIHVuZXNjYXBlZFFTLnJlcGxhY2UobmV3IFJlZ0V4cCgnKFtePz0mXSspKD0oW14mXSopKT8nLCAnZycpLFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoJDAsICQxLCAkMiwgJDMpIHtcclxuICAgICAgICAgICAgICAgIHBhcmFtc1skMV0gPSAkMztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHBhcmFtcztcclxuICAgIH0sXHJcblxyXG4gICAgZmlsbEFkZHJlc3NGaWVsZHM6IGZ1bmN0aW9uIChhZGRyZXNzLCAkZm9ybSkge1xyXG4gICAgICAgIGZvciAodmFyIGZpZWxkIGluIGFkZHJlc3MpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkID09PSAnSUQnIHx8IGZpZWxkID09PSAnVVVJRCcgfHwgZmllbGQgPT09ICdrZXknKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBpZiB0aGUga2V5IGluIGFkZHJlc3Mgb2JqZWN0IGVuZHMgd2l0aCAnQ29kZScsIHJlbW92ZSB0aGF0IHN1ZmZpeFxyXG4gICAgICAgICAgICAvLyBrZXlzIHRoYXQgZW5kcyB3aXRoICdDb2RlJyBhcmUgcG9zdGFsQ29kZSwgc3RhdGVDb2RlIGFuZCBjb3VudHJ5Q29kZVxyXG4gICAgICAgICAgICAkZm9ybS5maW5kKCdbbmFtZSQ9XCInICsgZmllbGQucmVwbGFjZSgnQ29kZScsICcnKSArICdcIl0nKS52YWwoYWRkcmVzc1tmaWVsZF0pO1xyXG4gICAgICAgICAgICAvLyB1cGRhdGUgdGhlIHN0YXRlIGZpZWxkc1xyXG4gICAgICAgICAgICBpZiAoZmllbGQgPT09ICdjb3VudHJ5Q29kZScpIHtcclxuICAgICAgICAgICAgICAgICRmb3JtLmZpbmQoJ1tuYW1lJD1cImNvdW50cnlcIl0nKS50cmlnZ2VyKCdjaGFuZ2UnKTtcclxuICAgICAgICAgICAgICAgIC8vIHJldHJpZ2dlciBzdGF0ZSBzZWxlY3Rpb24gYWZ0ZXIgY291bnRyeSBoYXMgY2hhbmdlZFxyXG4gICAgICAgICAgICAgICAgLy8gdGhpcyByZXN1bHRzIGluIGR1cGxpY2F0aW9uIG9mIHRoZSBzdGF0ZSBjb2RlLCBidXQgaXMgYSBuZWNlc3NhcnkgZXZpbFxyXG4gICAgICAgICAgICAgICAgLy8gZm9yIG5vdyBiZWNhdXNlIHNvbWV0aW1lcyBjb3VudHJ5Q29kZSBjb21lcyBhZnRlciBzdGF0ZUNvZGVcclxuICAgICAgICAgICAgICAgICRmb3JtLmZpbmQoJ1tuYW1lJD1cInN0YXRlXCJdJykudmFsKGFkZHJlc3Muc3RhdGVDb2RlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEBmdW5jdGlvblxyXG4gICAgICogQGRlc2NyaXB0aW9uIFVwZGF0ZXMgdGhlIG51bWJlciBvZiB0aGUgcmVtYWluaW5nIGNoYXJhY3RlclxyXG4gICAgICogYmFzZWQgb24gdGhlIGNoYXJhY3RlciBsaW1pdCBpbiBhIHRleHQgYXJlYVxyXG4gICAgICovXHJcbiAgICBsaW1pdENoYXJhY3RlcnM6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCdmb3JtJykuZmluZCgndGV4dGFyZWFbZGF0YS1jaGFyYWN0ZXItbGltaXRdJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBjaGFyYWN0ZXJMaW1pdCA9ICQodGhpcykuZGF0YSgnY2hhcmFjdGVyLWxpbWl0Jyk7XHJcbiAgICAgICAgICAgIHZhciBjaGFyQ291bnRIdG1sID0gU3RyaW5nLmZvcm1hdChSZXNvdXJjZXMuQ0hBUl9MSU1JVF9NU0csXHJcbiAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9XCJjaGFyLXJlbWFpbi1jb3VudFwiPicgKyBjaGFyYWN0ZXJMaW1pdCArICc8L3NwYW4+JyxcclxuICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz1cImNoYXItYWxsb3dlZC1jb3VudFwiPicgKyBjaGFyYWN0ZXJMaW1pdCArICc8L3NwYW4+Jyk7XHJcbiAgICAgICAgICAgIHZhciBjaGFyQ291bnRDb250YWluZXIgPSAkKHRoaXMpLm5leHQoJ2Rpdi5jaGFyLWNvdW50Jyk7XHJcbiAgICAgICAgICAgIGlmIChjaGFyQ291bnRDb250YWluZXIubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBjaGFyQ291bnRDb250YWluZXIgPSAkKCc8ZGl2IGNsYXNzPVwiY2hhci1jb3VudFwiLz4nKS5pbnNlcnRBZnRlcigkKHRoaXMpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjaGFyQ291bnRDb250YWluZXIuaHRtbChjaGFyQ291bnRIdG1sKTtcclxuICAgICAgICAgICAgLy8gdHJpZ2dlciB0aGUga2V5ZG93biBldmVudCBzbyB0aGF0IGFueSBleGlzdGluZyBjaGFyYWN0ZXIgZGF0YSBpcyBjYWxjdWxhdGVkXHJcbiAgICAgICAgICAgICQodGhpcykuY2hhbmdlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgdHJpbVByZWZpeDogZnVuY3Rpb24gKHN0ciwgcHJlZml4KSB7XHJcbiAgICAgICAgcmV0dXJuIHN0ci5zdWJzdHJpbmcocHJlZml4Lmxlbmd0aCk7XHJcbiAgICB9LFxyXG4gICAgY2FyZHR5cGU6IHtcclxuICAgICAgICBpbml0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICgkKCcjcGF5bWVudG1ldGhvZHMnKS5maW5kKCcuY3JlZGl0Q2FyZC1udW1iZXInKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcjcGF5bWVudG1ldGhvZHMnKS5maW5kKCcuY3JlZGl0Q2FyZC1udW1iZXInKS5iaW5kKCdrZXlwcmVzcyBrZXl1cCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS52YWwoKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmNhcmRlcnJvci5lcnJvcicpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQodGhpcykudmFsKCkubGVuZ3RoIDwgNCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuY2FyZHR5cGVpbWcgPiBkaXYnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAkKCcuY3JlZGl0Q2FyZC1udW1iZXIsIC5jcmVkaXRjYXJkX2N2bicpLm9uKCdrZXlwcmVzcycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZSA9IChlKSA/IGUgOiB3aW5kb3cuZXZlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoYXJDb2RlID0gKGUud2hpY2gpID8gZS53aGljaCA6IGUua2V5Q29kZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2hhckNvZGUgPiAzMSAmJiAoY2hhckNvZGUgPCA0OCB8fCBjaGFyQ29kZSA+IDU3KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAkKCcjcGF5bWVudG1ldGhvZHMnKS5maW5kKCcuY3JlZGl0Q2FyZC1udW1iZXInKS5ibHVyKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsID0gJC50cmltKCQodGhpcykudmFsKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vdmFyIHJlZ2V4ID0gL15bYS16QS1aXSskLztcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZXJyb3JzcGFuID0gJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnc3Bhbi5jYXJkZXJyb3InKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXZhbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcnNwYW4uaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWwubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKCcuY2FyZGVycm9yLmVycm9yJykubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmFwcGVuZCgnPHNwYW4gY2xhc3M9XCJjYXJkZXJyb3IgZXJyb3JcIj5Ob3QgYSB2YWxpZCBDcmVkaXQgQ2FyZCBOdW1iZXIsIHBsZWFzZSB0cnkgYWdhaW4uPC9zcGFuPicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5jYXJkZXJyb3IuZXJyb3InKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYXJkVHlwZXZhbCA9IHV0aWwudmFsaWRhdGVjYXJkdHlwZSh2YWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FyZFR5cGV2YWwgIT0gJ0Vycm9yJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JzcGFuLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNwYXltZW50bWV0aG9kcycpLmZpbmQoJ3NlbGVjdFtuYW1lJD1cIl9wYXltZW50TWV0aG9kc19jcmVkaXRDYXJkX3R5cGVcIl0nKS52YWwoY2FyZFR5cGV2YWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmNhcmR0eXBlaW1nID4gZGl2JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmNhcmR0eXBlaW1nID4gZGl2LicgKyBjYXJkVHlwZXZhbCkuc2hvdygpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoY2FyZFR5cGV2YWwgPT0gJ01hc3RlckNhcmQnKSB8fCAoY2FyZFR5cGV2YWwgPT0gJ1Zpc2EnKSB8fCAoY2FyZFR5cGV2YWwgPT0gJ0Rpc2NvdmVyJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsLmxlbmd0aCA8IDE2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5jYXJkZXJyb3IuZXJyb3InKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2Vycm9yY2xpZW50Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjYXJkVHlwZXZhbCA9PSAnQW1leCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsLmxlbmd0aCA8IDE1KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5jYXJkZXJyb3IuZXJyb3InKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2Vycm9yY2xpZW50Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuY2FyZGVycm9yLmVycm9yJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2Vycm9yY2xpZW50Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS52YWwoKS5pbmRleE9mKCcqJykgPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsLmxlbmd0aCA8IDE2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5jYXJkZXJyb3IuZXJyb3InKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2Vycm9yY2xpZW50Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5jYXJkdHlwZWltZyA+IGRpdicpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQoJyNwYXltZW50bWV0aG9kcycpLmZpbmQoJy5jcmVkaXRDYXJkLW51bWJlcicpLnZhbCgpLmxlbmd0aCA8IDQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmNhcmR0eXBlaW1nID4gZGl2JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9LFxyXG4gICAgdmFsaWRhdGVjYXJkdHlwZTogZnVuY3Rpb24gKHZhbCkge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSAnICcsXHJcbiAgICAgICAgICAgIGNhck5vID0gdmFsO1xyXG5cclxuICAgICAgICBpZiAoY2FyZHJlZ2V4Lm1hc3RlcmNhcmQudGVzdChjYXJObykpIHsvLyBmaXJzdCBjaGVjayBmb3IgTWFzdGVyQ2FyZFxyXG4gICAgICAgICAgICByZXN1bHQgPSAnTWFzdGVyQ2FyZCc7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjYXJkcmVnZXgudmlzYS50ZXN0KGNhck5vKSkgey8vIHRoZW4gY2hlY2sgZm9yIFZpc2FcclxuICAgICAgICAgICAgcmVzdWx0ID0gJ1Zpc2EnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY2FyZHJlZ2V4LmFtZXgudGVzdChjYXJObykpIHsvLyB0aGVuIGNoZWNrIGZvciBBbUV4XHJcbiAgICAgICAgICAgIHJlc3VsdCA9ICdBbWV4JztcclxuICAgICAgICB9IGVsc2UgaWYgKGNhcmRyZWdleC5kaXNjb3Zlci50ZXN0KGNhck5vKSkge1xyXG4gICAgICAgICAgICByZXN1bHQgPSAnRGlzY292ZXInO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9ICdFcnJvcic7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb25cclxuICAgICAqIEBkZXNjcmlwdGlvbiBCaW5kcyB0aGUgb25jbGljay1ldmVudCB0byBhIGRlbGV0ZSBidXR0b24gb24gYSBnaXZlbiBjb250YWluZXIsXHJcbiAgICAgKiB3aGljaCBvcGVucyBhIGNvbmZpcm1hdGlvbiBib3ggd2l0aCBhIGdpdmVuIG1lc3NhZ2VcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBjb250YWluZXIgVGhlIG5hbWUgb2YgZWxlbWVudCB0byB3aGljaCB0aGUgZnVuY3Rpb24gd2lsbCBiZSBiaW5kXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBUaGUgbWVzc2FnZSB0aGUgd2lsbCBiZSBzaG93biB1cG9uIGEgY2xpY2tcclxuICAgICAqL1xyXG4gICAgc2V0RGVsZXRlQ29uZmlybWF0aW9uOiBmdW5jdGlvbiAoY29udGFpbmVyLCBtZXNzYWdlKSB7XHJcbiAgICAgICAgJChjb250YWluZXIpLm9uKCdjbGljaycsICcuZGVsZXRlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gd2luZG93LmNvbmZpcm0obWVzc2FnZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb25cclxuICAgICAqIEBkZXNjcmlwdGlvbiBTY3JvbGxzIGEgYnJvd3NlciB3aW5kb3cgdG8gYSBnaXZlbiB4IHBvaW50XHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gVGhlIHggY29vcmRpbmF0ZVxyXG4gICAgICovXHJcbiAgICBzY3JvbGxCcm93c2VyOiBmdW5jdGlvbiAoeExvY2F0aW9uKSB7XHJcbiAgICAgICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICBzY3JvbGxUb3A6IHhMb2NhdGlvblxyXG4gICAgICAgIH0sIDUwMCk7XHJcbiAgICB9LFxyXG5cclxuICAgIGlzTW9iaWxlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIG1vYmlsZUFnZW50SGFzaCA9IFsnbW9iaWxlJywgJ3RhYmxldCcsICdwaG9uZScsICdpcGFkJywgJ2lwb2QnLCAnYW5kcm9pZCcsICdibGFja2JlcnJ5JywgJ3dpbmRvd3MgY2UnLCAnb3BlcmEgbWluaScsICdwYWxtJ107XHJcbiAgICAgICAgdmFyIGlkeCA9IDA7XHJcbiAgICAgICAgdmFyIGlzTW9iaWxlID0gZmFsc2U7XHJcbiAgICAgICAgdmFyIHVzZXJBZ2VudCA9IChuYXZpZ2F0b3IudXNlckFnZW50KS50b0xvd2VyQ2FzZSgpO1xyXG5cclxuICAgICAgICB3aGlsZSAobW9iaWxlQWdlbnRIYXNoW2lkeF0gJiYgIWlzTW9iaWxlKSB7XHJcbiAgICAgICAgICAgIGlzTW9iaWxlID0gKHVzZXJBZ2VudC5pbmRleE9mKG1vYmlsZUFnZW50SGFzaFtpZHhdKSA+PSAwKTtcclxuICAgICAgICAgICAgaWR4Kys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpc01vYmlsZTtcclxuICAgIH1cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gdXRpbDtcclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxudmFyIG5hUGhvbmUgPSAvXlxcKD8oWzItOV1bMC04XVswLTldKVxcKT9bXFwtXFwuIF0/KFsyLTldWzAtOV17Mn0pW1xcLVxcLiBdPyhbMC05XXs0fSkoXFxzKnhbMC05XSspPyQvO1xyXG52YXIgcmVnZXggPSB7XHJcbiAgICBwaG9uZToge1xyXG4gICAgICAgIHVzOiBuYVBob25lLFxyXG4gICAgICAgIGNhOiBuYVBob25lLFxyXG4gICAgICAgIGZyOiAvXjBbMS02XXsxfSgoWzAtOV17Mn0pezR9KXwoKFxcc1swLTldezJ9KXs0fSl8KCgtWzAtOV17Mn0pezR9KSQvLFxyXG4gICAgICAgIGl0OiAvXigoWzAtOV17Miw0fSkoWy1cXHNcXC9dezAsMX0pKFswLTldezQsOH0pKT8kLyxcclxuICAgICAgICBqcDogL14oMFxcZHsxLDR9LSA/KT9cXGR7MSw0fS1cXGR7NH0kLyxcclxuICAgICAgICBjbjogLy4qLyxcclxuICAgICAgICBnYjogL14oKFxcKD8wXFxkezR9XFwpP1xccz9cXGR7M31cXHM/XFxkezN9KXwoXFwoPzBcXGR7M31cXCk/XFxzP1xcZHszfVxccz9cXGR7NH0pfChcXCg/MFxcZHsyfVxcKT9cXHM/XFxkezR9XFxzP1xcZHs0fSkpKFxccz9cXCMoXFxkezR9fFxcZHszfSkpPyQvXHJcbiAgICB9LFxyXG4gICAgcG9zdGFsOiB7XHJcbiAgICAgICAgdXM6IC9eXFxkezV9KC1cXGR7NH0pPyQvLFxyXG4gICAgICAgIGNhOiAvXltBQkNFR0hKS0xNTlBSU1RWWFldezF9XFxkezF9W0EtWl17MX0gKlxcZHsxfVtBLVpdezF9XFxkezF9JC8sXHJcbiAgICAgICAgZnI6IC9eKEYtKT8oKDJbQXxCXSl8WzAtOV17Mn0pWzAtOV17M30kLyxcclxuICAgICAgICBpdDogL14oWzAtOV0pezV9JC8sXHJcbiAgICAgICAganA6IC9eKFswLTldKXszfVstXShbMC05XSl7NH0kLyxcclxuICAgICAgICBjbjogL14oWzAtOV0pezZ9JC8sXHJcbiAgICAgICAgZ2I6IC9eKFtBLVBSLVVXWVowLTldW0EtSEstWTAtOV1bQUVITU5QUlRWWFkwLTldP1tBQkVITU5QUlZXWFkwLTldPyB7MSwyfVswLTldW0FCRC1ISkxOLVVXLVpdezJ9fEdJUiAwQUEpJC9cclxuICAgIH0sXHJcbiAgICBub3RDQzogL14oPyEoKFswLTkgLV0pezEzLDE5fSkpLiokL1xyXG59O1xyXG4vLyBnbG9iYWwgZm9ybSB2YWxpZGF0b3Igc2V0dGluZ3NcclxudmFyIHNldHRpbmdzID0ge1xyXG4gICAgZXJyb3JDbGFzczogJ2Vycm9yY2xpZW50JyxcclxuICAgIGVycm9yRWxlbWVudDogJ3NwYW4nLFxyXG4gICAgZm9jdXNJbnZhbGlkOiB0cnVlLFxyXG4gICAgb25rZXl1cDogZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICBpZiAoIXRoaXMuY2hlY2thYmxlKGVsZW1lbnQpKSB7XHJcbiAgICAgICAgICAgICQoZWxlbWVudCkuYWRkQ2xhc3MoJ3N0b3BLZXlwcmVzcycpO1xyXG4gICAgICAgICAgICBpZiAoJChlbGVtZW50KS52YWwoKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQoZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCQoJy5hY2NvdW50LWxvZ3MnKS5sZW5ndGggPiAwIHx8ICQoJy5uZXctcmVnaXN0ZXInKS5sZW5ndGggPiAwIHx8ICQoJy53aXNoLWxvZ3MnKS5sZW5ndGggPiAwIHx8ICQoJy5mb3Jnb3Rfb2xkJykubGVuZ3RoID4gMCB8fCAkKCcuY3JlYXRlYW4tYWNjb3VudCcpLmxlbmd0aCA+IDAgfHwgJCgnLnByb21vLXNlYycpLmxlbmd0aCA+IDAgfHwgJCgnLmhlYWRlcmN1c3RvbWVyaW5mbycpLmxlbmd0aCA+IDAgfHwgJCgnLnVpLWxvZ2luJykubGVuZ3RoID4gMCB8fCAkKCcudmlwSW5zaWRlci1kbGcudWktZGlhbG9nICcpLmxlbmd0aCA+IDAgfHwgJCgnLnBhc3N3b3JkcmVzZXQnKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAkKGVsZW1lbnQpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcubGFiZWwgc3BhbicpLnJlbW92ZUNsYXNzKCdpbnB1dGxhYmVsJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcucHJvbW8tc2VjJykuZmluZCgnLmNvdXBvbmlucHV0JykucmVtb3ZlQ2xhc3MoJ2lucHV0bGFiZWwnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvL2ZvY3VzQ2xlYW51cDogZmFsc2UsXHJcbiAgICAvL29uZm9jdXNvdXQ6IGZhbHNlLFxyXG5cclxuICAgIG9uZm9jdXNvdXQ6IGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmNoZWNrYWJsZShlbGVtZW50KSkge1xyXG4gICAgICAgICAgICAkKGVsZW1lbnQpLnJlbW92ZUNsYXNzKCdzdG9wS2V5cHJlc3MnKTtcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50KGVsZW1lbnQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCQoJy5hY2NvdW50LWxvZ3MnKS5sZW5ndGggPiAwIHx8ICQoJy5uZXctcmVnaXN0ZXInKS5sZW5ndGggPiAwIHx8ICQoJy53aXNoLWxvZ3MnKS5sZW5ndGggPiAwIHx8ICQoJy5mb3Jnb3Rfb2xkJykubGVuZ3RoID4gMCB8fCAkKCcucGFzc3dvcmRyZXNldCcpLmxlbmd0aCA+IDAgfHwgJCgnLnZpcEluc2lkZXItZGxnLnVpLWRpYWxvZyAnKS5sZW5ndGggPiAwIHx8ICQoJy5wcm9tby1zZWMnKS5sZW5ndGggPiAwIHx8ICQoJy5wdF9jaGVja291dCcpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGlmICgkKGVsZW1lbnQpLmhhc0NsYXNzKCdlcnJvcmNsaWVudCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJChlbGVtZW50KS5jbG9zZXN0KCcuZm9ybS1yb3cnKS5hZGRDbGFzcygnaW5wdXRsYWJlbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoZWxlbWVudCkuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmFkZENsYXNzKCdpbnB1dGxhYmVsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJChlbGVtZW50KS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxhYmVsIHNwYW4nKS5hZGRDbGFzcygnaW5wdXRsYWJlbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoZWxlbWVudCkuY2xvc2VzdCgnLmZvcm0tcm93JykuZmluZCgnLmxhYmVsIHNwYW4nKS5hZGRDbGFzcygnaW5wdXRsYWJlbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoZWxlbWVudCkuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5sb2dlcnJvciAsIC5leGlzdGluZ19yZWdpc3RlcicpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJChlbGVtZW50KS5jbG9zZXN0KCcuZm9ybS1yb3cnKS5yZW1vdmVDbGFzcygnaW5wdXRsYWJlbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoZWxlbWVudCkuY2xvc2VzdCgnLmZvcm1maWVsZCcpLnJlbW92ZUNsYXNzKCdpbnB1dGxhYmVsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJChlbGVtZW50KS5jbG9zZXN0KCcuZm9ybS1yb3cnKS5maW5kKCcubGFiZWwgc3BhbicpLnJlbW92ZUNsYXNzKCdpbnB1dGxhYmVsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJChlbGVtZW50KS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxhYmVsIHNwYW4nKS5yZW1vdmVDbGFzcygnaW5wdXRsYWJlbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoZWxlbWVudCkuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5sb2dlcnJvciAsIC5leGlzdGluZ19yZWdpc3RlcicpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvKioqIGlmKCQoZWxlbWVudCkuY2xvc2VzdCgnLnVpLWRpYWxvZycpLmhhc0NsYXNzKCd2aXBJbnNpZGVyLWRsZycpKSB7XHJcblx0XHRcdFx0aWYoJChlbGVtZW50KS5oYXNDbGFzcyhcImVycm9yY2xpZW50XCIpKSB7XHJcblx0XHRcdFx0XHRpZigkKGVsZW1lbnQpLmNsb3Nlc3QoXCIuZm9ybWZpZWxkXCIpLmZpbmQoXCIubGFiZWwgc3Bhbi5lcnJvcmNsaWVudFwiKS5pcygnOnZpc2libGUnKSl7XHJcblx0XHRcdFx0XHRcdCQoZWxlbWVudCkuY2xvc2VzdChcIi5mb3JtLXJvd1wiKS5hZGRDbGFzcyhcImVycm9yb2NjdXJlZFwiKTtcclxuXHRcdFx0XHRcdH1lbHNlIHtcclxuXHRcdFx0XHRcdFx0JChlbGVtZW50KS5jbG9zZXN0KFwiLmZvcm0tcm93XCIpLnJlbW92ZUNsYXNzKFwiZXJyb3JvY2N1cmVkXCIpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSAqKiovXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIGVycm9yUGxhY2VtZW50OiBmdW5jdGlvbiAoZXJyb3IsIGVsZW1lbnQpIHtcclxuICAgICAgICBpZiAoJChlbGVtZW50KS5oYXNDbGFzcygnZXJyb3JjbGllbnQnKSkge1xyXG4gICAgICAgICAgICAkKGVsZW1lbnQpLmNsb3Nlc3QoJy5mb3JtLXJvdycpLmFkZENsYXNzKCdpbnB1dGxhYmVsJyk7XHJcbiAgICAgICAgICAgICQoZWxlbWVudCkuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmFkZENsYXNzKCdpbnB1dGxhYmVsJyk7XHJcbiAgICAgICAgICAgICQoZWxlbWVudCkuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5sYWJlbCBzcGFuJykuYWRkQ2xhc3MoJ2lucHV0bGFiZWwnKTtcclxuICAgICAgICAgICAgJChlbGVtZW50KS5jbG9zZXN0KCcuZm9ybS1yb3cnKS5maW5kKCcubGFiZWwgc3BhbicpLmFkZENsYXNzKCdpbnB1dGxhYmVsJyk7XHJcbiAgICAgICAgICAgICQoZWxlbWVudCkuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5sb2dlcnJvciAsIC5leGlzdGluZ19yZWdpc3RlcicpLmhpZGUoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkKGVsZW1lbnQpLmNsb3Nlc3QoJy5mb3JtLXJvdycpLnJlbW92ZUNsYXNzKCdpbnB1dGxhYmVsJyk7XHJcbiAgICAgICAgICAgICQoZWxlbWVudCkuY2xvc2VzdCgnLmZvcm1maWVsZCcpLnJlbW92ZUNsYXNzKCdpbnB1dGxhYmVsJyk7XHJcbiAgICAgICAgICAgICQoZWxlbWVudCkuY2xvc2VzdCgnLmZvcm0tcm93JykuZmluZCgnLmxhYmVsIHNwYW4nKS5yZW1vdmVDbGFzcygnaW5wdXRsYWJlbCcpO1xyXG4gICAgICAgICAgICAkKGVsZW1lbnQpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcubGFiZWwgc3BhbicpLnJlbW92ZUNsYXNzKCdpbnB1dGxhYmVsJyk7XHJcbiAgICAgICAgICAgICQoZWxlbWVudCkuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5sb2dlcnJvciAsIC5leGlzdGluZ19yZWdpc3RlcicpLmhpZGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCQoZWxlbWVudCkuaGFzQ2xhc3MoJ2VtYWlsZm9vdGVyJykpIHtcclxuICAgICAgICAgICAgJChlbGVtZW50KS5jbG9zZXN0KCcjZW1haWxmb290ZXInKS5iZWZvcmUoZXJyb3IpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoJChlbGVtZW50KS5jbG9zZXN0KCcudWktZGlhbG9nJykuaGFzQ2xhc3MoJ3ZpcEluc2lkZXItZGxnJykpIHtcclxuICAgICAgICAgICAgJChlbGVtZW50KS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxhYmVsJykuYXBwZW5kKGVycm9yKTtcclxuICAgICAgICAgICAgaWYgKCQoZWxlbWVudCkuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5sYWJlbCBzcGFuLmVycm9yY2xpZW50JykuaXMoJzp2aXNpYmxlJykgJiYgISgkKGVsZW1lbnQpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcubGFiZWwnKS5oYXNDbGFzcygnZXJyb3JvY2N1cmVkJykpKSB7XHJcbiAgICAgICAgICAgICAgICAkKGVsZW1lbnQpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcubGFiZWwnKS5hZGRDbGFzcygnZXJyb3JvY2N1cmVkJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkKGVsZW1lbnQpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcubGFiZWwnKS5yZW1vdmVDbGFzcygnZXJyb3JvY2N1cmVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoJCgnLnBhc3N3b3JkcmVzZXQnKS5maW5kKCdidXR0b24uc2VuZC5jbGlja2VkQnV0dG9uJykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgJChlbGVtZW50KS5hZnRlcihlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAkKCcucGFzc3dvcmRyZXNldCcpLmZpbmQoJ2J1dHRvbi5zZW5kLmNsaWNrZWRCdXR0b24nKS5yZW1vdmVDbGFzcygnY2xpY2tlZEJ1dHRvbicpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKCQoJy5oZWFkZXItZm9yZ290LXB3ZC5hY2NvdW50Y29udGVudCcpLmNzcygnZGlzcGxheScpID09ICdub25lJykge1xyXG4gICAgICAgICAgICAgICAgICAgICQoZWxlbWVudCkuYWZ0ZXIoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgkKCcuaGVhZGVyLWZvcmdvdC1wd2QuYWNjb3VudGNvbnRlbnQnKS5jc3MoJ2Rpc3BsYXknKSA9PSAnYmxvY2snKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRG8gTm90aGluZ1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJChlbGVtZW50KS5oYXNDbGFzcygnY3VzdG9tLXNlbGVjdC13cmFwJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJChlbGVtZW50KS5jbG9zZXN0KCcuZmllbGQtd3JhcHBlcicpLmFmdGVyKGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKGVsZW1lbnQpLmFmdGVyKGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcblxyXG4vL2ZpcnN0bmFtZSB2YWxpZGF0aW9uXHJcbnZhciBjdHJsID0gZmFsc2U7XHJcbnZhciBzZWxlY3RUZXh0ID0gZmFsc2U7XHJcbiQoJ2lucHV0W2F0dHJpYnV0ZW1heGxlbmd0aF0sdGV4dGFyZWFbYXR0cmlidXRlbWF4bGVuZ3RoXScpLm9uKCdrZXlkb3duJywgZnVuY3Rpb24gKGUpIHtcclxuICAgIC8vdmFyIGo7XHJcbiAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnZmlyc3RuYW1lJykpIHtcclxuICAgICAgICAvL2ogPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZHdmcm1fcHJvZmlsZV9jdXN0b21lcl9maXJzdG5hbWUnKTtcclxuICAgIH0gZWxzZSBpZiAoJCh0aGlzKS5oYXNDbGFzcygnbGFzdG5hbWUnKSkge1xyXG4gICAgICAgIC8vaiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkd2ZybV9wcm9maWxlX2N1c3RvbWVyX2xhc3RuYW1lJyk7XHJcbiAgICB9XHJcbiAgICBpZiAoZS5rZXlDb2RlID09IDE3KSB7XHJcbiAgICAgICAgY3RybCA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCgkKHRoaXMpLmhhc0NsYXNzKCd2aXAtdGV4dGFyZWEnKSAmJiBlLmtleUNvZGUgIT0gOCAmJiBlLmtleUNvZGUgIT0gNDYgJiYgIXNlbGVjdFRleHQpIHx8ICgoKGUua2V5Q29kZSA+PSA0OCAmJiBlLmtleUNvZGUgPD0gOTApIHx8IChlLmtleUNvZGUgPj0gOTYgJiYgZS5rZXlDb2RlIDw9IDEwNSkpICYmICFjdHJsICYmICFzZWxlY3RUZXh0KSkge1xyXG4gICAgICAgIHZhciBjdXJyT2JqID0gJCh0aGlzKTtcclxuICAgICAgICB2YXIgbWF4Y2hhcnMgPSAkKHRoaXMpLmF0dHIoJ21heGxlbmd0aCcpO1xyXG4gICAgICAgIHZhciB0bGVuZ3RoID0gJCh0aGlzKS52YWwoKS5sZW5ndGg7XHJcbiAgICAgICAgaWYgKHRsZW5ndGggPj0gbWF4Y2hhcnMpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS52YWwoJCh0aGlzKS52YWwoKS5zdWJzdHJpbmcoMCwgbWF4Y2hhcnMpKTtcclxuICAgICAgICAgICAgaWYgKCQoY3Vyck9iaikuY2xvc2VzdCgnLmZpZWxkLXdyYXBwZXInKS5maW5kKCcubWF4LWxlbmd0aC1lcnJvcicpLmxlbmd0aCA9PSAwICYmICQoY3Vyck9iaikuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5tYXgtbGVuZ3RoLWVycm9yJykubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICc8ZGl2IGNsYXNzPVxcJ21heC1sZW5ndGgtZXJyb3JcXCc+IFRoaXMgZmllbGQgaXMgbGltaXRlZCB0byAzMCBjaGFyYWN0ZXJzLjwvZGl2Pic7XHJcbiAgICAgICAgICAgICAgICBpZiAoJChjdXJyT2JqKS5oYXNDbGFzcygndmlwLXRleHRhcmVhJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBlcnJvciA9ICc8ZGl2IGNsYXNzPVxcJ21heC1sZW5ndGgtZXJyb3JcXCc+IC1UaGlzIGZpZWxkIGlzIGxpbWl0ZWQgdG8gMTIwMCBjaGFyYWN0ZXJzLjwvZGl2Pic7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoJChjdXJyT2JqKS5oYXNDbGFzcygndmlwLXRleHRhcmVhMScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IgPSAnPGRpdiBjbGFzcz1cXCdtYXgtbGVuZ3RoLWVycm9yXFwnPiAtVGhpcyBmaWVsZCBpcyBsaW1pdGVkIHRvIDMwIGNoYXJhY3RlcnMuPC9kaXY+JztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJChjdXJyT2JqKS5jbG9zZXN0KCdmb3JtJykuaGFzQ2xhc3MoJ3ZpcGZpZWxkc3RhZmYnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yID0gJzxkaXYgY2xhc3M9XFwnbWF4LWxlbmd0aC1lcnJvclxcJz4gLVRoaXMgZmllbGQgaXMgbGltaXRlZCB0byAzMCBjaGFyYWN0ZXJzLjwvZGl2Pic7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCQodGhpcykuY2xvc2VzdCgnZm9ybScpLmhhc0NsYXNzKCd2aXBmaWVsZHN0YWZmJykgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxhYmVsJykuYXBwZW5kKGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZmllbGQtd3JhcHBlcicpLmFwcGVuZChlcnJvcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxhYmVsIHNwYW4nKS5hZGRDbGFzcygnY291bnRsYWJlbGVycm9yJyk7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdjb3VudGVycm9yJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5rZXlDb2RlICE9IDkpIHtcclxuICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmNsb3Nlc3QoJ2Zvcm0nKS5oYXNDbGFzcygndmlwZmllbGRzdGFmZicpID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5sYWJlbCcpLmZpbmQoJy5tYXgtbGVuZ3RoLWVycm9yJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZmllbGQtd3JhcHBlcicpLmZpbmQoJy5tYXgtbGVuZ3RoLWVycm9yJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2NvdW50ZXJyb3InKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5sYWJlbCBzcGFuJykuYWRkQ2xhc3MoJ2NvdW50bGFiZWxlcnJvcicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnY291bnRlcnJvcicpO1xyXG4gICAgICAgICAgICAkKCcubWF4LWxlbmd0aC1lcnJvcicpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcubGFiZWwgc3BhbicpLnJlbW92ZUNsYXNzKCdjb3VudGxhYmVsZXJyb3InKTtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKChlLmtleUNvZGUgPj0gNDggJiYgZS5rZXlDb2RlIDw9IDU3KSB8fCAoZS5rZXlDb2RlID49IDk2ICYmIGUua2V5Q29kZSA8PSAxMDUpKSB7XHJcbiAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ3ZpcGluc2lkZXJlbWFpbCcpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5tYXgtbGVuZ3RoLWVycm9yJykucmVtb3ZlKCk7XHJcbiAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnY291bnRlcnJvcicpO1xyXG4gICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5sYWJlbCBzcGFuJykucmVtb3ZlQ2xhc3MoJ2NvdW50bGFiZWxlcnJvcicpO1xyXG4gICAgICAgIHNlbGVjdFRleHQgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbn0pLm9uKCdrZXl1cCcsIGZ1bmN0aW9uICgpIHtcclxuICAgIGN0cmwgPSBmYWxzZTtcclxuICAgIC8vdmFyIGN1cnJPYmogPSAkKHRoaXMpO1xyXG4gICAgdmFyIG1heGNoYXJzID0gJCh0aGlzKS5hdHRyKCdtYXhsZW5ndGgnKTtcclxuICAgIHZhciB0bGVuZ3RoID0gJCh0aGlzKS52YWwoKS5sZW5ndGg7XHJcbiAgICBpZiAodGxlbmd0aCA8IG1heGNoYXJzKSB7XHJcbiAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnY291bnRlcnJvcicpO1xyXG4gICAgICAgICQoJy5tYXgtbGVuZ3RoLWVycm9yJykucmVtb3ZlKCk7XHJcbiAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxhYmVsIHNwYW4nKS5yZW1vdmVDbGFzcygnY291bnRsYWJlbGVycm9yJyk7XHJcbiAgICB9XHJcbn0pLm9uKCdzZWxlY3QnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBzZWxlY3RUZXh0ID0gdHJ1ZTtcclxuICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2NvdW50ZXJyb3InKTtcclxuICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5sYWJlbCBzcGFuJykucmVtb3ZlQ2xhc3MoJ2NvdW50bGFiZWxlcnJvcicpO1xyXG59KTtcclxuJCgnaW5wdXRbYXR0cmlidXRlbWF4bGVuZ3RoXSx0ZXh0YXJlYVthdHRyaWJ1dGVtYXhsZW5ndGhdJykub24oJ2ZvY3Vzb3V0JywgZnVuY3Rpb24gKCkge1xyXG4gICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnY291bnRlcnJvcicpO1xyXG4gICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxhYmVsIHNwYW4nKS5yZW1vdmVDbGFzcygnY291bnRsYWJlbGVycm9yJyk7XHJcbiAgICAkKHRoaXMpLmNsb3Nlc3QoJy5maWVsZC13cmFwcGVyJykuZmluZCgnLm1heC1sZW5ndGgtZXJyb3InKS5yZW1vdmUoKTtcclxuICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5tYXgtbGVuZ3RoLWVycm9yJykucmVtb3ZlKCk7XHJcbiAgICAvLyQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5sYWJlbCBzcGFuJykucmVtb3ZlQ2xhc3MoJ2lucHV0bGFiZWwnKTtcclxufSk7XHJcbmlmICgkKCcubG9naW5mYWlsZWRjbGFzczp2aXNpYmxlJykubGVuZ3RoID4gMCkge1xyXG4gICAgJCgnLnJlZ2lzdHJhdGlvbiAuZm9ybWZpZWxkX2VtYWlsJykuZmluZCgnLmxhYmVsdGV4dCcpLnJlbW92ZUNsYXNzKCdpbnB1dGxhYmVsJyk7XHJcbiAgICAkKCcucmVnaXN0cmF0aW9uIC5mb3JtZmllbGRfZW1haWwnKS5maW5kKCcucmVxdWlyZWRpbmRpY2F0b3InKS5yZW1vdmVDbGFzcygnaW5wdXRsYWJlbCcpO1xyXG4gICAgJCgnLnJlZ2lzdHJhdGlvbiAuZm9ybWZpZWxkX2VtYWlsJykuZmluZCgnLnJlcXVpcmVkaW5kaWNhdG9yJykucmVtb3ZlQ2xhc3MoJ2lucHV0bGFiZWwnKTtcclxuICAgICQoJy5yZWdpc3RyYXRpb24gLmZvcm1maWVsZF9lbWFpbCcpLmZpbmQoJy5leGlzdGluZ19yZWdpc3RlcicpLmhpZGUoKTtcclxufVxyXG5cclxuLy8kKFwiYm9keVwiKS5vbignY2hhbmdlIGlucHV0JyxcIi5hY2NvdW50ZW1haWwgLCAuZ3Vlc3RlbWFpbCwgLmVtYWlsQ01yYXBhbGEsIC5ndWVzdGVtYWlsY29uLCAudmlwaW5zaWRlcmVtYWlsLCAuZW1haWxmb290ZXIsIC5hY2NvdW50ZW1haWxjb25mLCAuYWNjb3VudEVtYWlsQ29uZmlybWF0aW9uLCAucmVzZXRlbWFpbCwgLmFjY2VtYWlsY29uLCAubG9nZ2VkZW1haWxcIiwgZnVuY3Rpb24gKGUpIHtcclxuLy9cdC8vJCh0aGlzKS52YWwodGhpcy52YWx1ZS5yZXBsYWNlKC9bXFxzXS9nLCAnJykpO1xyXG4vL1xyXG4vL30pO1xyXG4kKCcuYWNjb3VudGVtYWlsICwgLmd1ZXN0ZW1haWwsIC5lbWFpbENNcmFwYWxhLCAuZ3Vlc3RlbWFpbGNvbiwgLnZpcGluc2lkZXJlbWFpbCwgLmVtYWlsZm9vdGVyLCAuYWNjb3VudGVtYWlsY29uZiwgLmFjY291bnRFbWFpbENvbmZpcm1hdGlvbiwgLnJlc2V0ZW1haWwsIC5hY2NlbWFpbGNvbiwgLmxvZ2dlZGVtYWlsJykub24oe1xyXG4gICAga2V5ZG93bjogZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBpZiAoZS53aGljaCA9PT0gMzIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBjaGFuZ2U6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy52YWx1ZS5yZXBsYWNlKC9cXHMvZywgJycpO1xyXG4gICAgfVxyXG59KTtcclxuLy9vdmVycmlkZSBkZWZhdWx0IHJlcXVpcmVkIGZpZWxkIG1lc3NhZ2VcclxuJC52YWxpZGF0b3IubWVzc2FnZXMucmVxdWlyZWQgPSBmdW5jdGlvbiAoJDEsIGVsZSkge1xyXG4gICAgdmFyIHJlcXVpcmVkVGV4dCA9ICQoZWxlKS5jbG9zZXN0KCcuZm9ybS1yb3cnKS5hdHRyKFxyXG4gICAgICAgICdkYXRhLXJlcXVpcmVkLXRleHQnKTtcclxuICAgIHJldHVybiByZXF1aXJlZFRleHQgfHwgJyc7XHJcbn07XHJcblxyXG4vKipcclxuICogQWRkIHBob25lIHZhbGlkYXRpb24gbWV0aG9kIHRvICQgdmFsaWRhdGlvbiBwbHVnaW4uIFRleHRcclxuICogZmllbGRzIG11c3QgaGF2ZSAncGhvbmUnIGNzcyBjbGFzcyB0byBiZSB2YWxpZGF0ZWQgYXMgcGhvbmVcclxuICogcGhvbmVVUyBpcyBjb3BpZWQgZnJvbVxyXG4gKiBodHRwOi8vZG9jcy4kLmNvbS9QbHVnaW5zL1ZhbGlkYXRpb24vQ3VzdG9tTWV0aG9kcy9waG9uZVVTXHJcbiAqL1xyXG4kLnZhbGlkYXRvclxyXG4gICAgLmFkZE1ldGhvZChcclxuICAgICAgICAncGhvbmUnLFxyXG4gICAgICAgIGZ1bmN0aW9uIChwaG9uZU51bWJlciwgZWxlbWVudCkge1xyXG4gICAgICAgICAgICBpZiAoJChlbGVtZW50KS5oYXNDbGFzcygnc3RvcEtleXByZXNzJykpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gZmluZCBvdXQgdGhlIGNvdW50cnkgY29kZVxyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSAkKGVsZW1lbnQpLmRhdGEoJ2RhdGEnKTtcclxuICAgICAgICAgICAgICAgIHZhciBjb3VudHJ5ID0gKGRhdGEgJiYgZGF0YS5jb3VudHJ5ICYmIGRhdGEuY291bnRyeSAhPSAnJykgPyBkYXRhLmNvdW50cnkgOiAnVVMnOyAvLyBkZWZhdWx0IHRvIFVTIHBob25lXHJcbiAgICAgICAgICAgICAgICAvLyB2YWxpZGF0aW9uXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gcHJlc2VydmUgdGhpcyBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIGNvdW50cnkgc3BlY2lmaWMgcGhvbmUgdmFsaWRhdGlvbiBoYW5kbGVyc1xyXG4gICAgICAgICAgICAgICAgLy92YXIgcGhvbmVVUywgcGhvbmVDQTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgcGhvbmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGhvbmVOdW1iZXIgPSBwaG9uZU51bWJlci5yZXBsYWNlKC9cXHMrL2csICcnKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhhdC5vcHRpb25hbChlbGVtZW50KSB8fCBwaG9uZU51bWJlci5sZW5ndGggPiA5ICYmIHBob25lTnVtYmVyLm1hdGNoKC9eKFxcZHsxMH18XFxkezN9KC1cXGR7M30pKC1cXGR7NH0pJHxeXFxkezN9KFxcc1xcZHszfSk/KFxcc1xcZHs0fSk/KSQvKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAvL3Bob25lVVMgPSBwaG9uZUNBO1xyXG4gICAgICAgICAgICAgICAgLy93aW5kb3cuZXZhbCgndmFyIHBob25lSGFuZGxlciA9ICh0eXBlb2YgcGhvbmUnICsgY291bnRyeSArICcgIT0gXFwndW5kZWZpbmVkXFwnKSA/IHBob25lJyArIGNvdW50cnkgKyAnOiBudWxsOycpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIGNhbGwgdGhlIGNvdW50cnkgc3BlY2lmaWMgcGhvbmUgdmFsaWRhdGlvblxyXG4gICAgICAgICAgICAgICAgLy8gaGFuZGxlclxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvdW50cnkgPT09ICdVUycgfHwgY291bnRyeSA9PT0gJ0NBJyA/IHBob25lKCkgOiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgUmVzb3VyY2VzLklOVkFMSURfUEhPTkUpO1xyXG5cclxuJC52YWxpZGF0b3IuYWRkTWV0aG9kKCdwaG9uZUNEVVMnLCBmdW5jdGlvbiAocGhvbmVOdW1iZXIsIGVsZW1lbnQpIHtcclxuICAgIGlmICgkKGVsZW1lbnQpLmhhc0NsYXNzKCdzdG9wS2V5cHJlc3MnKSkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBwaG9uZU51bWJlciA9IHBob25lTnVtYmVyLnJlcGxhY2UoL1xccysvZywgJycpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbmFsKGVsZW1lbnQpIHx8IHBob25lTnVtYmVyLmxlbmd0aCA+IDkgJiYgcGhvbmVOdW1iZXJcclxuICAgICAgICAgICAgLm1hdGNoKC9eXFwoP1tcXGRdezN9XFwpP1tcXHMtXT9bXFxkXXszfVtcXHMtXT9bXFxkXXs0fSQvKTtcclxuICAgIH1cclxufSwgJ1BsZWFzZSBzcGVjaWZ5IGEgdmFsaWQgcGhvbmUgbnVtYmVyJyk7XHJcblxyXG4kLnZhbGlkYXRvci5hZGRNZXRob2QoJ3Bob25lJywgZnVuY3Rpb24gKHBob25lTnVtYmVyLCBlbGVtZW50KSB7XHJcbiAgICBpZiAoJChlbGVtZW50KS5oYXNDbGFzcygnc3RvcEtleXByZXNzJykpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcGhvbmVOdW1iZXIgPSBwaG9uZU51bWJlci5yZXBsYWNlKC9cXHMrL2csICcnKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25hbChlbGVtZW50KSB8fCBwaG9uZU51bWJlci5sZW5ndGggPiA5ICYmIHBob25lTnVtYmVyXHJcbiAgICAgICAgICAgIC5tYXRjaCgvXlxcKD9bXFxkXXszfVxcKT9bXFxzLV0/W1xcZF17M31bXFxzLV0/W1xcZF17NH0kLyk7XHJcbiAgICB9XHJcbn0sICdQbGVhc2Ugc3BlY2lmeSBhIHZhbGlkIHBob25lIG51bWJlcicpO1xyXG5cclxuJC52YWxpZGF0b3IuYWRkTWV0aG9kKCdwaG9uZVVLJywgZnVuY3Rpb24gKHBob25lTnVtYmVyLCBlbGVtZW50KSB7XHJcbiAgICBpZiAoJChlbGVtZW50KS5oYXNDbGFzcygnc3RvcEtleXByZXNzJykpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9uYWwoZWxlbWVudCkgfHwgcGhvbmVOdW1iZXIubGVuZ3RoID4gOSAmJiBwaG9uZU51bWJlclxyXG4gICAgICAgICAgICAubWF0Y2goL14oXFwoPygwfFxcKzQ0KVsxLTldezF9XFxkezEsNH0/XFwpP1xccz9cXGR7Myw0fVxccz9cXGR7Myw0fSkkLyk7XHJcbiAgICB9XHJcbn0sICdQbGVhc2Ugc3BlY2lmeSBhIHZhbGlkIHBob25lIG51bWJlcicpO1xyXG5cclxuJC52YWxpZGF0b3IuYWRkTWV0aG9kKCdwb3N0YWwnLCBmdW5jdGlvbiAodmFsdWUsIGVsZW1lbnQpIHtcclxuICAgIGlmICgkKGVsZW1lbnQpLmhhc0NsYXNzKCdzdG9wS2V5cHJlc3MnKSkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAodmFsdWUgPT0gJycpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAoL15cXGR7NX0oKC1cXGR7NH0pfChcXGR7NH0pKT8kLykudGVzdCh2YWx1ZSk7XHJcbiAgICB9XHJcbn0sICdQbGVhc2UgZW50ZXIgeW91ciA1IG9yIDkgZGlnaXQgWmlwIENvZGUgd2l0aCBvciB3aXRob3V0IGEgaHlwaGVuJyk7XHJcblxyXG4kLnZhbGlkYXRvci5hZGRNZXRob2QoJ3ppcENvZGVDdXN0b20nLCBmdW5jdGlvbiAodmFsdWUsIGVsZW1lbnQpIHtcclxuICAgIGlmICgkKGVsZW1lbnQpLmhhc0NsYXNzKCdzdG9wS2V5cHJlc3MnKSkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAodmFsdWUgPT0gJycpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAoL15cXGR7NX0oKC1cXGR7NH0pfChcXGR7NH0pKT8kLykudGVzdCh2YWx1ZSk7XHJcbiAgICB9XHJcbn0sICctIFBsZWFzZSBlbnRlciBhIHZhbGlkIFppcENvZGUnKTtcclxuXHJcbiQudmFsaWRhdG9yLmFkZE1ldGhvZCgncGhvbmVDdXN0b20nLCBmdW5jdGlvbiAocGhvbmVOdW1iZXIsIGVsZW1lbnQpIHtcclxuICAgIGlmICgkKGVsZW1lbnQpLmhhc0NsYXNzKCdzdG9wS2V5cHJlc3MnKSkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBwaG9uZU51bWJlciA9IHBob25lTnVtYmVyLnJlcGxhY2UoL1xccysvZywgJycpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbmFsKGVsZW1lbnQpIHx8IHBob25lTnVtYmVyLmxlbmd0aCA+IDkgJiYgcGhvbmVOdW1iZXJcclxuICAgICAgICAgICAgLm1hdGNoKC9eXFwoP1tcXGRdezN9XFwpP1tcXHMtXT9bXFxkXXszfVtcXHMtXT9bXFxkXXs0fSQvKTtcclxuICAgIH1cclxufSwgJy0gUGxlYXNlIHNwZWNpZnkgYSB2YWxpZCBwaG9uZSBudW1iZXInKTtcclxuXHJcbiQudmFsaWRhdG9yLmFkZE1ldGhvZCgnZW1haWxDTScsIGZ1bmN0aW9uICh2YWx1ZSwgZWxlbWVudCkge1xyXG4gICAgaWYgKCQoZWxlbWVudCkuaGFzQ2xhc3MoJ3N0b3BLZXlwcmVzcycpKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmICh2YWx1ZSA9PSAnJykge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuICgvXltcXHctXFwuXXsxLH1cXEAoW1xcZGEtekEtWi1dezEsfVxcLil7MSx9W1xcZGEtekEtWi1dezIsNH0kLykudGVzdCh2YWx1ZSk7XHJcbiAgICB9XHJcbn0sICdQbGVhc2Ugc3BlY2lmeSBhIHZhbGlkIEVtYWlsIElkJyk7XHJcblxyXG52YXIgY3VzdG9tRXJyb3Jtc2cgPSAnJztcclxudmFyIGN1c3RvbUVycm9yID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIGN1c3RvbUVycm9ybXNnO1xyXG59O1xyXG5cclxuJC52YWxpZGF0b3IuYWRkTWV0aG9kKCdlbWFpbENNcmFwYWxhJywgZnVuY3Rpb24gKHZhbHVlLCBlbGVtZW50KSB7XHJcbiAgICBpZiAoJChlbGVtZW50KS5oYXNDbGFzcygnc3RvcEtleXByZXNzJykpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdmFyIHZJbmRleCA9IHZhbHVlLmxlbmd0aDtcclxuICAgICAgICB2YXIgZmNoYXIgPSB2YWx1ZS5zdWJzdHJpbmcoMCwgMSk7XHJcbiAgICAgICAgdmFyIGxjaGFyID0gdmFsdWUuc3Vic3RyaW5nKHZJbmRleCAtIDEpO1xyXG4gICAgICAgIGlmICh2YWx1ZS5pbmRleE9mKCdAJykgIT0gLTEpIHtcclxuICAgICAgICAgICAgdmFyIHNwbGl0dmFsID0gdmFsdWUuc3BsaXQoJ0AnKTtcclxuICAgICAgICAgICAgZmNoYXIgPSBzcGxpdHZhbFswXS5zdWJzdHJpbmcoMCwgMSk7XHJcbiAgICAgICAgICAgIGxjaGFyID0gc3BsaXR2YWxbMF0uc3Vic3RyaW5nKHNwbGl0dmFsWzBdLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZmNoYXJTID0gKC9eW2EtekEtWjAtOV0kLykudGVzdChmY2hhcik7XHJcbiAgICAgICAgdmFyIGxjaGFyUyA9ICgvXlthLXpBLVowLTldJC8pLnRlc3QobGNoYXIpO1xyXG4gICAgICAgIHZhciBlbWFpbENoZWNrID0gKC9eWy0wLTlhLXpBLVouLV9dK0AoKFxcW1swLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXF0pfCgoW2EtekEtWlxcLTAtOV0rXFwuKStbYS16QS1aXXsyLH0pKSQvKS50ZXN0KHZhbHVlKTtcclxuICAgICAgICBpZiAoKGZjaGFyUyA9PSBmYWxzZSkgfHwgKGxjaGFyUyA9PSBmYWxzZSkpIHtcclxuICAgICAgICAgICAgY3VzdG9tRXJyb3Jtc2cgPSAnLVNvbWV0aGluZyBkb2VzblxcJ3QgbG9vayByaWdodCwgcGxlYXNlIHRyeSBhZ2Fpbi4nO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlbWFpbENoZWNrID09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIGN1c3RvbUVycm9ybXNnID0gJ09vcHMgLSB0aGUgZW1haWwgZW50ZXJlZCBpcyBub3QgaW4gYSB2YWxpZCBmb3JtYXQuJztcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSwgY3VzdG9tRXJyb3IpO1xyXG5cclxuJC52YWxpZGF0b3IuYWRkTWV0aG9kKCdjcmVkaXRjYXJkX25hbWUnLCBmdW5jdGlvbiAodmFsdWUsIGVsZW1lbnQpIHtcclxuICAgIGlmICgkKGVsZW1lbnQpLmhhc0NsYXNzKCdzdG9wS2V5cHJlc3MnKSkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAodmFsdWUgPT0gJycpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAoL15bYS16QS1aIF0rJC8pLnRlc3QodmFsdWUpO1xyXG4gICAgfVxyXG59LCAnT25seSBsZXR0ZXJzIGFyZSB2YWxpZCBmb3IgdGhpcyBmaWVsZCcpO1xyXG5cclxuJC52YWxpZGF0b3IuYWRkTWV0aG9kKCdjcmVkaXRjYXJkX2N2bicsIGZ1bmN0aW9uICh2YWx1ZSwgZWxlbWVudCkge1xyXG4gICAgaWYgKCQoZWxlbWVudCkuaGFzQ2xhc3MoJ3N0b3BLZXlwcmVzcycpKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICB2YXIgY2FyZHR5cGUgPSAkKCcuc2VsZWN0LWNyZWRpdENhcmQtdHlwZScpLnZhbCgpO1xyXG4gICAgICAgIHZhciBjdnZMZW5ndGggPSAzO1xyXG4gICAgICAgIGlmICh2YWx1ZSA9PSAnJykge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNhcmR0eXBlID09ICdBbWV4Jykge1xyXG4gICAgICAgICAgICBjdnZMZW5ndGggPSA0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoKHZhbHVlLmxlbmd0aCAhPSBjdnZMZW5ndGgpKSB7XHJcbiAgICAgICAgICAgICQoJy5lcnJvcktleXByZXNzJykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0sICdQbGVhc2UgZW50ZXIgYSB2YWxpZCBTZWN1cml0eSBDb2RlIGZvciB0aGUgQ3JlZGl0IENhcmQgZW50ZXJlZCcpO1xyXG5cclxuJC52YWxpZGF0b3IuYWRkTWV0aG9kKCdndWVzdGVtYWlsY29uJywgZnVuY3Rpb24gKHZhbHVlLCBlbGVtZW50KSB7XHJcbiAgICBpZiAoJChlbGVtZW50KS5oYXNDbGFzcygnc3RvcEtleXByZXNzJykpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gZWxzZSBpZiAoISQoJy5jaGVja291dGFzZ3Vlc3RidXR0b24nKS5pcygnOnZpc2libGUnKSkge1xyXG4gICAgICAgIHZhciB2SW5kZXggPSB2YWx1ZS5sZW5ndGg7XHJcbiAgICAgICAgdmFyIGZjaGFyID0gdmFsdWUuc3Vic3RyaW5nKDAsIDEpO1xyXG4gICAgICAgIHZhciBsY2hhciA9IHZhbHVlLnN1YnN0cmluZyh2SW5kZXggLSAxKTtcclxuICAgICAgICBpZiAodmFsdWUuaW5kZXhPZignQCcpICE9IC0xKSB7XHJcbiAgICAgICAgICAgIHZhciBzcGxpdHZhbCA9IHZhbHVlLnNwbGl0KCdAJyk7XHJcbiAgICAgICAgICAgIGZjaGFyID0gc3BsaXR2YWxbMF0uc3Vic3RyaW5nKDAsIDEpO1xyXG4gICAgICAgICAgICBsY2hhciA9IHNwbGl0dmFsWzBdLnN1YnN0cmluZyhzcGxpdHZhbFswXS5sZW5ndGggLSAxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGZjaGFyUyA9ICgvXlthLXpBLVowLTldJC8pLnRlc3QoZmNoYXIpO1xyXG4gICAgICAgIHZhciBsY2hhclMgPSAoL15bYS16QS1aMC05XSQvKS50ZXN0KGxjaGFyKTtcclxuICAgICAgICB2YXIgZW1haWxDaGVjayA9ICgvXlstMC05YS16QS1aLi1fXStAKChcXFtbMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFxdKXwoKFthLXpBLVpcXC0wLTldK1xcLikrW2EtekEtWl17Mix9KSkkLykudGVzdCh2YWx1ZSk7XHJcbiAgICAgICAgdmFyIGVtYWlsVmFsID0gJChlbGVtZW50KS5jbG9zZXN0KCcuZm9ybWZpZWxkJykucHJldignLmZvcm1maWVsZCcpLmZpbmQoJy5ndWVzdGVtYWlsJykudmFsKCk7XHJcbiAgICAgICAgaWYgKChmY2hhclMgPT0gZmFsc2UpIHx8IChsY2hhclMgPT0gZmFsc2UpKSB7XHJcbiAgICAgICAgICAgIGN1c3RvbUVycm9ybXNnID0gJ1NvbWV0aGluZyBkb2VzblxcJ3QgbG9vayByaWdodCwgcGxlYXNlIHRyeSBhZ2Fpbi4nO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlbWFpbENoZWNrID09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIGN1c3RvbUVycm9ybXNnID0gJ09vcHMgLSB0aGUgZW1haWwgZW50ZXJlZCBpcyBub3QgaW4gYSB2YWxpZCBmb3JtYXQuJztcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZW1haWxWYWwgIT0gdmFsdWUpIHtcclxuICAgICAgICAgICAgY3VzdG9tRXJyb3Jtc2cgPSAnUGxlYXNlIG1ha2Ugc3VyZSBlbWFpbHMgbWF0Y2guJztcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbn0sIGN1c3RvbUVycm9yKTtcclxuXHJcbiQudmFsaWRhdG9yLmFkZE1ldGhvZCgnZ3Vlc3RlbWFpbCcsIGZ1bmN0aW9uICh2YWx1ZSwgZWxlbWVudCkge1xyXG4gICAgaWYgKCQoZWxlbWVudCkuaGFzQ2xhc3MoJ3N0b3BLZXlwcmVzcycpKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGVsc2UgaWYgKCEkKCcuY2hlY2tvdXRhc2d1ZXN0YnV0dG9uJykuaXMoJzp2aXNpYmxlJykpIHtcclxuICAgICAgICB2YXIgdkluZGV4ID0gdmFsdWUubGVuZ3RoO1xyXG4gICAgICAgIHZhciBmY2hhciA9IHZhbHVlLnN1YnN0cmluZygwLCAxKTtcclxuICAgICAgICB2YXIgbGNoYXIgPSB2YWx1ZS5zdWJzdHJpbmcodkluZGV4IC0gMSk7XHJcbiAgICAgICAgaWYgKHZhbHVlLmluZGV4T2YoJ0AnKSAhPSAtMSkge1xyXG4gICAgICAgICAgICB2YXIgc3BsaXR2YWwgPSB2YWx1ZS5zcGxpdCgnQCcpO1xyXG4gICAgICAgICAgICBmY2hhciA9IHNwbGl0dmFsWzBdLnN1YnN0cmluZygwLCAxKTtcclxuICAgICAgICAgICAgbGNoYXIgPSBzcGxpdHZhbFswXS5zdWJzdHJpbmcoc3BsaXR2YWxbMF0ubGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZmNoYXJTID0gKC9eW2EtekEtWjAtOV0kLykudGVzdChmY2hhcik7XHJcbiAgICAgICAgdmFyIGxjaGFyUyA9ICgvXlthLXpBLVowLTldJC8pLnRlc3QobGNoYXIpO1xyXG4gICAgICAgIHZhciBlbWFpbENoZWNrID0gKC9eWy0wLTlhLXpBLVouLV9dK0AoKFxcW1swLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXF0pfCgoW2EtekEtWlxcLTAtOV0rXFwuKStbYS16QS1aXXsyLH0pKSQvKS50ZXN0KHZhbHVlKTtcclxuICAgICAgICBpZiAoKGZjaGFyUyA9PSBmYWxzZSkgfHwgKGxjaGFyUyA9PSBmYWxzZSkpIHtcclxuICAgICAgICAgICAgY3VzdG9tRXJyb3Jtc2cgPSAnU29tZXRoaW5nIGRvZXNuXFwndCBsb29rIHJpZ2h0LCBwbGVhc2UgdHJ5IGFnYWluLic7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2UgaWYgKGVtYWlsQ2hlY2sgPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgY3VzdG9tRXJyb3Jtc2cgPSAnT29wcyAtIHRoZSBlbWFpbCBlbnRlcmVkIGlzIG5vdCBpbiBhIHZhbGlkIGZvcm1hdC4nO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxufSwgY3VzdG9tRXJyb3IpO1xyXG5cclxuJC52YWxpZGF0b3IuYWRkTWV0aG9kKCdsb2dnZWRlbWFpbCcsIGZ1bmN0aW9uICh2YWx1ZSwgZWxlbWVudCkge1xyXG4gICAgaWYgKCQoZWxlbWVudCkuaGFzQ2xhc3MoJ3N0b3BLZXlwcmVzcycpKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGVsc2UgaWYgKCEkKCcuc2lnbmludG9teWFjY291bnRidXR0b24nKS5pcygnOnZpc2libGUnKSkge1xyXG4gICAgICAgIHZhciB2SW5kZXggPSB2YWx1ZS5sZW5ndGg7XHJcbiAgICAgICAgdmFyIGZjaGFyID0gdmFsdWUuc3Vic3RyaW5nKDAsIDEpO1xyXG4gICAgICAgIHZhciBsY2hhciA9IHZhbHVlLnN1YnN0cmluZyh2SW5kZXggLSAxKTtcclxuICAgICAgICBpZiAodmFsdWUuaW5kZXhPZignQCcpICE9IC0xKSB7XHJcbiAgICAgICAgICAgIHZhciBzcGxpdHZhbCA9IHZhbHVlLnNwbGl0KCdAJyk7XHJcbiAgICAgICAgICAgIGZjaGFyID0gc3BsaXR2YWxbMF0uc3Vic3RyaW5nKDAsIDEpO1xyXG4gICAgICAgICAgICBsY2hhciA9IHNwbGl0dmFsWzBdLnN1YnN0cmluZyhzcGxpdHZhbFswXS5sZW5ndGggLSAxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGZjaGFyUyA9ICgvXlthLXpBLVowLTldJC8pLnRlc3QoZmNoYXIpO1xyXG4gICAgICAgIHZhciBsY2hhclMgPSAoL15bYS16QS1aMC05XSQvKS50ZXN0KGxjaGFyKTtcclxuICAgICAgICB2YXIgZW1haWxDaGVjayA9ICgvXlstMC05YS16QS1aLi1fXStAKChcXFtbMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFxdKXwoKFthLXpBLVpcXC0wLTldK1xcLikrW2EtekEtWl17Mix9KSkkLykudGVzdCh2YWx1ZSk7XHJcbiAgICAgICAgLy92YXIgZW1haWxWYWwgPSAkKGVsZW1lbnQpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5wcmV2KCcuZm9ybWZpZWxkJykuZmluZCgnLmd1ZXN0ZW1haWwnKS52YWwoKTtcclxuICAgICAgICBpZiAoKGZjaGFyUyA9PSBmYWxzZSkgfHwgKGxjaGFyUyA9PSBmYWxzZSkpIHtcclxuICAgICAgICAgICAgY3VzdG9tRXJyb3Jtc2cgPSAnU29tZXRoaW5nIGRvZXNuXFwndCBsb29rIHJpZ2h0LCBwbGVhc2UgdHJ5IGFnYWluLic7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2UgaWYgKGVtYWlsQ2hlY2sgPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgY3VzdG9tRXJyb3Jtc2cgPSAnT29wcyAtIHRoZSBlbWFpbCBlbnRlcmVkIGlzIG5vdCBpbiBhIHZhbGlkIGZvcm1hdC4nO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxufSwgY3VzdG9tRXJyb3IpO1xyXG5cclxuJC52YWxpZGF0b3IuYWRkTWV0aG9kKCdhY2NlbWFpbGNvbicsIGZ1bmN0aW9uICh2YWx1ZSwgZWxlbWVudCkge1xyXG4gICAgaWYgKCQoZWxlbWVudCkuaGFzQ2xhc3MoJ3N0b3BLZXlwcmVzcycpKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGVsc2UgaWYgKCEkKCcuY3JlYXRlYW5hY2NvdW50YnV0dG9uJykuaXMoJzp2aXNpYmxlJykpIHtcclxuICAgICAgICB2YXIgdkluZGV4ID0gdmFsdWUubGVuZ3RoO1xyXG4gICAgICAgIHZhciBmY2hhciA9IHZhbHVlLnN1YnN0cmluZygwLCAxKTtcclxuICAgICAgICB2YXIgbGNoYXIgPSB2YWx1ZS5zdWJzdHJpbmcodkluZGV4IC0gMSk7XHJcbiAgICAgICAgaWYgKHZhbHVlLmluZGV4T2YoJ0AnKSAhPSAtMSkge1xyXG4gICAgICAgICAgICB2YXIgc3BsaXR2YWwgPSB2YWx1ZS5zcGxpdCgnQCcpO1xyXG4gICAgICAgICAgICBmY2hhciA9IHNwbGl0dmFsWzBdLnN1YnN0cmluZygwLCAxKTtcclxuICAgICAgICAgICAgbGNoYXIgPSBzcGxpdHZhbFswXS5zdWJzdHJpbmcoc3BsaXR2YWxbMF0ubGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBmY2hhclMgPSAoL15bYS16QS1aMC05XSQvKS50ZXN0KGZjaGFyKTtcclxuICAgICAgICB2YXIgbGNoYXJTID0gKC9eW2EtekEtWjAtOV0kLykudGVzdChsY2hhcik7XHJcbiAgICAgICAgdmFyIGVtYWlsQ2hlY2sgPSAoL15bLTAtOWEtekEtWi4tX10rQCgoXFxbWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcXSl8KChbYS16QS1aXFwtMC05XStcXC4pK1thLXpBLVpdezIsfSkpJC8pLnRlc3QodmFsdWUpO1xyXG4gICAgICAgIHZhciBlbWFpbFZhbCA9ICQoZWxlbWVudCkuY2xvc2VzdCgnLmZvcm1maWVsZCcpLnByZXYoJy5mb3JtZmllbGQnKS5maW5kKCcuYWNjZW1haWwnKS52YWwoKTtcclxuICAgICAgICBpZiAoKGZjaGFyUyA9PSBmYWxzZSkgfHwgKGxjaGFyUyA9PSBmYWxzZSkpIHtcclxuICAgICAgICAgICAgY3VzdG9tRXJyb3Jtc2cgPSAnU29tZXRoaW5nIGRvZXNuXFwndCBsb29rIHJpZ2h0LCBwbGVhc2UgdHJ5IGFnYWluLic7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2UgaWYgKGVtYWlsQ2hlY2sgPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgY3VzdG9tRXJyb3Jtc2cgPSAnT29wcyAtIHRoZSBlbWFpbCBlbnRlcmVkIGlzIG5vdCBpbiBhIHZhbGlkIGZvcm1hdC4nO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlbWFpbFZhbCAhPSB2YWx1ZSkge1xyXG4gICAgICAgICAgICBjdXN0b21FcnJvcm1zZyA9ICdQbGVhc2UgbWFrZSBzdXJlIGVtYWlscyBtYXRjaC4nO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59LCBjdXN0b21FcnJvcik7XHJcblxyXG4kLnZhbGlkYXRvci5hZGRNZXRob2QoJ2EtekEtWjAtOScsIGZ1bmN0aW9uICh2YWx1ZSwgZWxlbWVudCkge1xyXG4gICAgaWYgKCQoZWxlbWVudCkuaGFzQ2xhc3MoJ3N0b3BLZXlwcmVzcycpKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGVsc2UgaWYgKCEkKCcuY3JlYXRlYW5hY2NvdW50YnV0dG9uJykuaXMoJzp2aXNpYmxlJykpIHtcclxuICAgICAgICB2YXIgdkluZGV4ID0gdmFsdWUubGVuZ3RoO1xyXG4gICAgICAgIHZhciBmY2hhciA9IHZhbHVlLnN1YnN0cmluZygwLCAxKTtcclxuICAgICAgICB2YXIgbGNoYXIgPSB2YWx1ZS5zdWJzdHJpbmcodkluZGV4IC0gMSk7XHJcbiAgICAgICAgaWYgKHZhbHVlLmluZGV4T2YoJ0AnKSAhPSAtMSkge1xyXG4gICAgICAgICAgICB2YXIgc3BsaXR2YWwgPSB2YWx1ZS5zcGxpdCgnQCcpO1xyXG4gICAgICAgICAgICBmY2hhciA9IHNwbGl0dmFsWzBdLnN1YnN0cmluZygwLCAxKTtcclxuICAgICAgICAgICAgbGNoYXIgPSBzcGxpdHZhbFswXS5zdWJzdHJpbmcoc3BsaXR2YWxbMF0ubGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZmNoYXJTID0gKC9eW2EtekEtWl0kLykudGVzdChmY2hhcik7XHJcbiAgICAgICAgdmFyIGxjaGFyUyA9ICgvXlthLXpBLVowLTldJC8pLnRlc3QobGNoYXIpO1xyXG4gICAgICAgIHZhciBlbWFpbENoZWNrID0gKC9eWy0wLTlhLXpBLVouLV9dK0AoKFxcW1swLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXF0pfCgoW2EtekEtWlxcLTAtOV0rXFwuKStbYS16QS1aXXsyLH0pKSQvKS50ZXN0KHZhbHVlKTtcclxuICAgICAgICAvL3ZhciBlbWFpbFZhbCA9ICQoZWxlbWVudCkuY2xvc2VzdCgnLmZvcm1maWVsZCcpLnByZXYoJy5mb3JtZmllbGQnKS5maW5kKCcuZW1haWwnKS52YWwoKTtcclxuXHJcbiAgICAgICAgaWYgKChmY2hhclMgPT0gZmFsc2UpIHx8IChsY2hhclMgPT0gZmFsc2UpKSB7XHJcbiAgICAgICAgICAgIGN1c3RvbUVycm9ybXNnID0gJ1NvbWV0aGluZyBkb2VzblxcJ3QgbG9vayByaWdodCwgcGxlYXNlIHRyeSBhZ2Fpbi4nO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlbWFpbENoZWNrID09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIGN1c3RvbUVycm9ybXNnID0gJ09vcHMgLSB0aGUgZW1haWwgZW50ZXJlZCBpcyBub3QgaW4gYSB2YWxpZCBmb3JtYXQuJztcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSwgY3VzdG9tRXJyb3IpO1xyXG5cclxuJC52YWxpZGF0b3IuYWRkTWV0aG9kKCdjbV9wYXNzd29yZCcsIGZ1bmN0aW9uICh2YWx1ZSwgZWxlbWVudCkge1xyXG4gICAgaWYgKCQoZWxlbWVudCkuaGFzQ2xhc3MoJ3N0b3BLZXlwcmVzcycpKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGVsc2UgaWYgKCEkKCcuY3JlYXRlYW5hY2NvdW50YnV0dG9uJykuaXMoJzp2aXNpYmxlJykgJiYgJChlbGVtZW50KS5oYXNDbGFzcygncmVxdWlyZWQnKSkge1xyXG4gICAgICAgIHZhciBwYXNzd29yZFZhbCA9ICQoJy5jX3Bhc3N3b3JkJykudmFsKCk7XHJcbiAgICAgICAgaWYgKCQoZWxlbWVudCkuY2xvc2VzdCgnZm9ybScpLmxlbmd0aCA+IDAgJiYgJChlbGVtZW50KS5jbG9zZXN0KCdmb3JtJykuYXR0cignaWQnKSA9PSAnUmVnaXN0cmF0aW9uRm9ybScpIHtcclxuICAgICAgICAgICAgcGFzc3dvcmRWYWwgPSAkKGVsZW1lbnQpLmNsb3Nlc3QoJ2Zvcm0nKS5maW5kKCcuY19wYXNzd29yZCcpLnZhbCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA8IDUpIHtcclxuICAgICAgICAgICAgY3VzdG9tRXJyb3Jtc2cgPSAnUGFzc3dvcmRzIG11c3QgY29udGFpbiBhIG1pbmltdW0gb2YgNSBjaGFyYWN0ZXJzIGFuZCBhcmUgQ2FTZSBTZU5zSXRJdkUuJztcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocGFzc3dvcmRWYWwgIT0gdmFsdWUpIHtcclxuICAgICAgICAgICAgY3VzdG9tRXJyb3Jtc2cgPSAnT29wcyAtIHlvdXIgcGFzc3dvcmRzIGRvIG5vdCBtYXRjaC4nO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxufSwgY3VzdG9tRXJyb3IpO1xyXG5cclxuJC52YWxpZGF0b3IuYWRkTWV0aG9kKCdjb25maXJtX3Bhc3N3b3JkJywgZnVuY3Rpb24gKHZhbHVlLCBlbGVtZW50KSB7XHJcbiAgICBpZiAoJChlbGVtZW50KS5oYXNDbGFzcygnc3RvcEtleXByZXNzJykpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gZWxzZSBpZiAoJChlbGVtZW50KS5oYXNDbGFzcygncmVxdWlyZWQnKSkge1xyXG4gICAgICAgIHZhciBwYXNzd29yZFZhbCA9ICQoZWxlbWVudCkuY2xvc2VzdCgnZm9ybScpLmZpbmQoJy5jX3Bhc3N3b3JkJykudmFsKCk7XHJcbiAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA8IDUpIHtcclxuICAgICAgICAgICAgY3VzdG9tRXJyb3Jtc2cgPSAnUGFzc3dvcmRzIG11c3QgY29udGFpbiBhIG1pbmltdW0gb2YgNSBjaGFyYWN0ZXJzIGFuZCBhcmUgQ2FTZSBTZU5zSXRJdkUuJztcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocGFzc3dvcmRWYWwgIT0gdmFsdWUpIHtcclxuICAgICAgICAgICAgY3VzdG9tRXJyb3Jtc2cgPSAnT29wcyAtIHlvdXIgcGFzc3dvcmRzIGRvIG5vdCBtYXRjaC4nO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxufSwgY3VzdG9tRXJyb3IpO1xyXG5cclxuJC52YWxpZGF0b3IuYWRkTWV0aG9kKCdjX3Bhc3N3b3JkJywgZnVuY3Rpb24gKHZhbHVlLCBlbGVtZW50KSB7XHJcbiAgICBpZiAoJChlbGVtZW50KS5oYXNDbGFzcygnc3RvcEtleXByZXNzJykpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gZWxzZSBpZiAoJChlbGVtZW50KS5oYXNDbGFzcygncmVxdWlyZWQnKSAmJiAodmFsdWUubGVuZ3RoIDwgNSkpIHtcclxuICAgICAgICBjdXN0b21FcnJvcm1zZyA9ICdQYXNzd29yZHMgbXVzdCBjb250YWluIGEgbWluaW11bSBvZiA1IGNoYXJhY3RlcnMgYW5kIGFyZSBDYVNlIFNlTnNJdEl2RS4nO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbn0sIGN1c3RvbUVycm9yKTtcclxuXHJcbiQudmFsaWRhdG9yLmFkZE1ldGhvZCgnbG9naW5fcGFzc3dvcmQnLCBmdW5jdGlvbiAodmFsdWUsIGVsZW1lbnQpIHtcclxuICAgIGlmICgkKGVsZW1lbnQpLmhhc0NsYXNzKCdzdG9wS2V5cHJlc3MnKSkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBlbHNlIGlmICgkKGVsZW1lbnQpLmhhc0NsYXNzKCdyZXF1aXJlZCcpICYmICh2YWx1ZS5sZW5ndGggPCA1KSkge1xyXG4gICAgICAgIGN1c3RvbUVycm9ybXNnID0gJ1Bhc3N3b3JkcyBtdXN0IGNvbnRhaW4gYSBtaW5pbXVtIG9mIDUgY2hhcmFjdGVycyBhbmQgYXJlIENhU2UgU2VOc0l0SXZFLic7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxufSwgY3VzdG9tRXJyb3IpO1xyXG5cclxuJC52YWxpZGF0b3IuYWRkTWV0aG9kKCdyZXNldGVtYWlsJywgZnVuY3Rpb24gKHZhbHVlLCBlbGVtZW50KSB7XHJcbiAgICB2YXIgdkluZGV4ID0gdmFsdWUubGVuZ3RoO1xyXG4gICAgdmFyIGZjaGFyID0gdmFsdWUuc3Vic3RyaW5nKDAsIDEpO1xyXG4gICAgdmFyIGxjaGFyID0gdmFsdWUuc3Vic3RyaW5nKHZJbmRleCAtIDEpO1xyXG5cclxuICAgIGlmICgkKGVsZW1lbnQpLmhhc0NsYXNzKCdzdG9wS2V5cHJlc3MnKSkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAodmFsdWUuaW5kZXhPZignQCcpICE9IC0xKSB7XHJcbiAgICAgICAgICAgIHZhciBzcGxpdHZhbCA9IHZhbHVlLnNwbGl0KCdAJyk7XHJcbiAgICAgICAgICAgIGZjaGFyID0gc3BsaXR2YWxbMF0uc3Vic3RyaW5nKDAsIDEpO1xyXG4gICAgICAgICAgICBsY2hhciA9IHNwbGl0dmFsWzBdLnN1YnN0cmluZyhzcGxpdHZhbFswXS5sZW5ndGggLSAxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGZjaGFyUyA9ICgvXlthLXpBLVowLTldJC8pLnRlc3QoZmNoYXIpO1xyXG4gICAgICAgIHZhciBsY2hhclMgPSAoL15bYS16QS1aMC05XSQvKS50ZXN0KGxjaGFyKTtcclxuICAgICAgICB2YXIgZW1haWxDaGVjayA9ICgvXlstMC05YS16QS1aLi1fXStAKChcXFtbMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFxdKXwoKFthLXpBLVpcXC0wLTldK1xcLikrW2EtekEtWl17Mix9KSkkLykudGVzdCh2YWx1ZSk7XHJcbiAgICAgICAgaWYgKChmY2hhclMgPT0gZmFsc2UpIHx8IChsY2hhclMgPT0gZmFsc2UpKSB7XHJcbiAgICAgICAgICAgIGN1c3RvbUVycm9ybXNnID0gJ1NvbWV0aGluZyBkb2VzblxcJ3QgbG9vayByaWdodCwgcGxlYXNlIHRyeSBhZ2Fpbi4nO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlbWFpbENoZWNrID09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIGN1c3RvbUVycm9ybXNnID0gJ09vcHMgLSB0aGUgZW1haWwgZW50ZXJlZCBpcyBub3QgaW4gYSB2YWxpZCBmb3JtYXQuJztcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0sIGN1c3RvbUVycm9yKTtcclxuXHJcbiQudmFsaWRhdG9yLmFkZE1ldGhvZCgnYWNjb3VudGVtYWlsJywgZnVuY3Rpb24gKHZhbHVlLCBlbGVtZW50KSB7XHJcbiAgICB2YXIgdkluZGV4ID0gdmFsdWUubGVuZ3RoO1xyXG4gICAgdmFyIGZjaGFyID0gdmFsdWUuc3Vic3RyaW5nKDAsIDEpO1xyXG4gICAgdmFyIGxjaGFyID0gdmFsdWUuc3Vic3RyaW5nKHZJbmRleCAtIDEpO1xyXG4gICAgaWYgKCQoZWxlbWVudCkuaGFzQ2xhc3MoJ3N0b3BLZXlwcmVzcycpKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmICh2YWx1ZS5pbmRleE9mKCdAJykgIT0gLTEpIHtcclxuICAgICAgICAgICAgdmFyIHNwbGl0dmFsID0gdmFsdWUuc3BsaXQoJ0AnKTtcclxuICAgICAgICAgICAgZmNoYXIgPSBzcGxpdHZhbFswXS5zdWJzdHJpbmcoMCwgMSk7XHJcbiAgICAgICAgICAgIGxjaGFyID0gc3BsaXR2YWxbMF0uc3Vic3RyaW5nKHNwbGl0dmFsWzBdLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZmNoYXJTID0gKC9eW2EtekEtWjAtOV0kLykudGVzdChmY2hhcik7XHJcbiAgICAgICAgdmFyIGxjaGFyUyA9ICgvXlthLXpBLVowLTldJC8pLnRlc3QobGNoYXIpO1xyXG4gICAgICAgIHZhciBlbWFpbENoZWNrID0gKC9eWy0wLTlhLXpBLVouLV9dK0AoKFxcW1swLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXF0pfCgoW2EtekEtWlxcLTAtOV0rXFwuKStbYS16QS1aXXsyLH0pKSQvKS50ZXN0KHZhbHVlKTtcclxuICAgICAgICBpZiAoKGZjaGFyUyA9PSBmYWxzZSkgfHwgKGxjaGFyUyA9PSBmYWxzZSkpIHtcclxuICAgICAgICAgICAgY3VzdG9tRXJyb3Jtc2cgPSAnU29tZXRoaW5nIGRvZXNuXFwndCBsb29rIHJpZ2h0LCBwbGVhc2UgdHJ5IGFnYWluLic7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2UgaWYgKGVtYWlsQ2hlY2sgPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgY3VzdG9tRXJyb3Jtc2cgPSAnT29wcyAtIHRoZSBlbWFpbCBlbnRlcmVkIGlzIG5vdCBpbiBhIHZhbGlkIGZvcm1hdC4nO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufSwgY3VzdG9tRXJyb3IpO1xyXG5cclxuLy9lbWFpbCB2YWxpZGF0aW9uIGZvciB2aXBpbnNpZGVyXHJcblxyXG4kLnZhbGlkYXRvci5hZGRNZXRob2QoJ3ZpcGluc2lkZXJlbWFpbCcsIGZ1bmN0aW9uICh2YWx1ZSwgZWxlbWVudCkge1xyXG4gICAgaWYgKCQoZWxlbWVudCkuaGFzQ2xhc3MoJ3N0b3BLZXlwcmVzcycpKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZhciB2SW5kZXggPSB2YWx1ZS5sZW5ndGg7XHJcbiAgICAgICAgdmFyIGZjaGFyID0gdmFsdWUuc3Vic3RyaW5nKDAsIDEpO1xyXG4gICAgICAgIHZhciBsY2hhciA9IHZhbHVlLnN1YnN0cmluZyh2SW5kZXggLSAxKTtcclxuICAgICAgICBpZiAodmFsdWUuaW5kZXhPZignQCcpICE9IC0xKSB7XHJcbiAgICAgICAgICAgIHZhciBzcGxpdHZhbCA9IHZhbHVlLnNwbGl0KCdAJyk7XHJcbiAgICAgICAgICAgIGZjaGFyID0gc3BsaXR2YWxbMF0uc3Vic3RyaW5nKDAsIDEpO1xyXG4gICAgICAgICAgICBsY2hhciA9IHNwbGl0dmFsWzBdLnN1YnN0cmluZyhzcGxpdHZhbFswXS5sZW5ndGggLSAxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGZjaGFyUyA9ICgvXlthLXpBLVowLTldJC8pLnRlc3QoZmNoYXIpO1xyXG4gICAgICAgIHZhciBsY2hhclMgPSAoL15bYS16QS1aMC05XSQvKS50ZXN0KGxjaGFyKTtcclxuICAgICAgICB2YXIgZW1haWxDaGVjayA9ICgvXlstMC05YS16QS1aLi1fXStAKChcXFtbMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFxdKXwoKFthLXpBLVpcXC0wLTldK1xcLikrW2EtekEtWl17Mix9KSkkLykudGVzdCh2YWx1ZSk7XHJcbiAgICAgICAgaWYgKChmY2hhclMgPT0gZmFsc2UpIHx8IChsY2hhclMgPT0gZmFsc2UpKSB7XHJcbiAgICAgICAgICAgIGN1c3RvbUVycm9ybXNnID0gJy1Tb21ldGhpbmcgZG9lc25cXCd0IGxvb2sgcmlnaHQsIHBsZWFzZSB0cnkgYWdhaW4uJztcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZW1haWxDaGVjayA9PSBmYWxzZSkge1xyXG4gICAgICAgICAgICBjdXN0b21FcnJvcm1zZyA9ICdPb3BzIC0gdGhlIGVtYWlsIGVudGVyZWQgaXMgbm90IGluIGEgdmFsaWQgZm9ybWF0Lic7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0sIGN1c3RvbUVycm9yKTtcclxuXHJcbiQudmFsaWRhdG9yLmFkZE1ldGhvZCgnZW1haWxmb290ZXInLCBmdW5jdGlvbiAodmFsdWUsIGVsZW1lbnQpIHtcclxuICAgIGlmICgkKGVsZW1lbnQpLmhhc0NsYXNzKCdzdG9wS2V5cHJlc3MnKSkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB2YXIgdkluZGV4ID0gdmFsdWUubGVuZ3RoO1xyXG4gICAgICAgIGlmICh2SW5kZXggPiAwKSB7XHJcbiAgICAgICAgICAgIHZhciBmY2hhciA9IHZhbHVlLnN1YnN0cmluZygwLCAxKTtcclxuICAgICAgICAgICAgdmFyIGxjaGFyID0gdmFsdWUuc3Vic3RyaW5nKHZJbmRleCAtIDEpO1xyXG4gICAgICAgICAgICBpZiAodmFsdWUuaW5kZXhPZignQCcpICE9IC0xKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3BsaXR2YWwgPSB2YWx1ZS5zcGxpdCgnQCcpO1xyXG4gICAgICAgICAgICAgICAgZmNoYXIgPSBzcGxpdHZhbFswXS5zdWJzdHJpbmcoMCwgMSk7XHJcbiAgICAgICAgICAgICAgICBsY2hhciA9IHNwbGl0dmFsWzBdLnN1YnN0cmluZyhzcGxpdHZhbFswXS5sZW5ndGggLSAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgZmNoYXJTID0gKC9eW2EtekEtWjAtOV0kLykudGVzdChmY2hhcik7XHJcbiAgICAgICAgICAgIHZhciBsY2hhclMgPSAoL15bYS16QS1aMC05XSQvKS50ZXN0KGxjaGFyKTtcclxuICAgICAgICAgICAgdmFyIGVtYWlsQ2hlY2sgPSAoL15bLTAtOWEtekEtWi4tX10rQCgoXFxbWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcXSl8KChbYS16QS1aXFwtMC05XStcXC4pK1thLXpBLVpdezIsfSkpJC8pLnRlc3QodmFsdWUpO1xyXG4gICAgICAgICAgICBpZiAoKGZjaGFyUyA9PSBmYWxzZSkgfHwgKGxjaGFyUyA9PSBmYWxzZSkpIHtcclxuICAgICAgICAgICAgICAgIGN1c3RvbUVycm9ybXNnID0gJ1NvbWV0aGluZyBkb2VzblxcJ3QgbG9vayByaWdodCwgcGxlYXNlIHRyeSBhZ2Fpbi4nO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGVtYWlsQ2hlY2sgPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIGN1c3RvbUVycm9ybXNnID0gJ09vcHMgLSB0aGUgZW1haWwgZW50ZXJlZCBpcyBub3QgaW4gYSB2YWxpZCBmb3JtYXQuJztcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY3VzdG9tRXJyb3Jtc2cgPSAnUGxlYXNlIGVudGVyIHlvdXIgZW1haWwgYWRkcmVzcy4nO1xyXG5cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0sIGN1c3RvbUVycm9yKTtcclxuXHJcbiQudmFsaWRhdG9yLmFkZE1ldGhvZCgnYWNjb3VudGVtYWlsY29uZicsIGZ1bmN0aW9uICh2YWx1ZSwgZWxlbWVudCkge1xyXG4gICAgaWYgKCQoZWxlbWVudCkuaGFzQ2xhc3MoJ3N0b3BLZXlwcmVzcycpKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZhciB2SW5kZXggPSB2YWx1ZS5sZW5ndGg7XHJcbiAgICAgICAgdmFyIGZjaGFyID0gdmFsdWUuc3Vic3RyaW5nKDAsIDEpO1xyXG4gICAgICAgIHZhciBsY2hhciA9IHZhbHVlLnN1YnN0cmluZyh2SW5kZXggLSAxKTtcclxuICAgICAgICBpZiAodmFsdWUuaW5kZXhPZignQCcpICE9IC0xKSB7XHJcbiAgICAgICAgICAgIHZhciBzcGxpdHZhbCA9IHZhbHVlLnNwbGl0KCdAJyk7XHJcbiAgICAgICAgICAgIGZjaGFyID0gc3BsaXR2YWxbMF0uc3Vic3RyaW5nKDAsIDEpO1xyXG4gICAgICAgICAgICBsY2hhciA9IHNwbGl0dmFsWzBdLnN1YnN0cmluZyhzcGxpdHZhbFswXS5sZW5ndGggLSAxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGZjaGFyUyA9ICgvXlthLXpBLVowLTldJC8pLnRlc3QoZmNoYXIpO1xyXG4gICAgICAgIHZhciBsY2hhclMgPSAoL15bYS16QS1aMC05XSQvKS50ZXN0KGxjaGFyKTtcclxuICAgICAgICB2YXIgZW1haWxDaGVjayA9ICgvXlstMC05YS16QS1aLi1fXStAKChcXFtbMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFxdKXwoKFthLXpBLVpcXC0wLTldK1xcLikrW2EtekEtWl17Mix9KSkkLykudGVzdCh2YWx1ZSk7XHJcbiAgICAgICAgdmFyIGVtYWlsVmFsID0gJCgnLmFjY291bnRlbWFpbCcpLnZhbCgpO1xyXG4gICAgICAgIGlmICgkKGVsZW1lbnQpLmNsb3Nlc3QoJ2Zvcm0nKS5sZW5ndGggPiAwICYmICQoZWxlbWVudCkuY2xvc2VzdCgnZm9ybScpLmF0dHIoJ2lkJykgPT0gJ1JlZ2lzdHJhdGlvbkZvcm0nKSB7XHJcbiAgICAgICAgICAgIGVtYWlsVmFsID0gJChlbGVtZW50KS5jbG9zZXN0KCdmb3JtJykuZmluZCgnLmFjY291bnRlbWFpbCcpLnZhbCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoKGZjaGFyUyA9PSBmYWxzZSkgfHwgKGxjaGFyUyA9PSBmYWxzZSkpIHtcclxuICAgICAgICAgICAgY3VzdG9tRXJyb3Jtc2cgPSAnU29tZXRoaW5nIGRvZXNuXFwndCBsb29rIHJpZ2h0LCBwbGVhc2UgdHJ5IGFnYWluLic7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2UgaWYgKGVtYWlsQ2hlY2sgPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgY3VzdG9tRXJyb3Jtc2cgPSAnT29wcyAtIHRoZSBlbWFpbCBlbnRlcmVkIGlzIG5vdCBpbiBhIHZhbGlkIGZvcm1hdC4nO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlbWFpbFZhbCAhPSB2YWx1ZSkge1xyXG4gICAgICAgICAgICBjdXN0b21FcnJvcm1zZyA9ICdQbGVhc2UgbWFrZSBzdXJlIGVtYWlscyBtYXRjaC4nO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59LCBjdXN0b21FcnJvcik7XHJcblxyXG4kLnZhbGlkYXRvci5hZGRNZXRob2QoJ2FjY291bnRFbWFpbENvbmZpcm1hdGlvbicsIGZ1bmN0aW9uICh2YWx1ZSwgZWxlbWVudCkge1xyXG4gICAgaWYgKCQoZWxlbWVudCkuaGFzQ2xhc3MoJ3N0b3BLZXlwcmVzcycpKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZhciB2SW5kZXggPSB2YWx1ZS5sZW5ndGg7XHJcbiAgICAgICAgdmFyIGZjaGFyID0gdmFsdWUuc3Vic3RyaW5nKDAsIDEpO1xyXG4gICAgICAgIHZhciBsY2hhciA9IHZhbHVlLnN1YnN0cmluZyh2SW5kZXggLSAxKTtcclxuICAgICAgICBpZiAodmFsdWUuaW5kZXhPZignQCcpICE9IC0xKSB7XHJcbiAgICAgICAgICAgIHZhciBzcGxpdHZhbCA9IHZhbHVlLnNwbGl0KCdAJyk7XHJcbiAgICAgICAgICAgIGZjaGFyID0gc3BsaXR2YWxbMF0uc3Vic3RyaW5nKDAsIDEpO1xyXG4gICAgICAgICAgICBsY2hhciA9IHNwbGl0dmFsWzBdLnN1YnN0cmluZyhzcGxpdHZhbFswXS5sZW5ndGggLSAxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGZjaGFyUyA9ICgvXlthLXpBLVowLTldJC8pLnRlc3QoZmNoYXIpO1xyXG4gICAgICAgIHZhciBsY2hhclMgPSAoL15bYS16QS1aMC05XSQvKS50ZXN0KGxjaGFyKTtcclxuICAgICAgICB2YXIgZW1haWxDaGVjayA9ICgvXlstMC05YS16QS1aLi1fXStAKChcXFtbMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFxdKXwoKFthLXpBLVpcXC0wLTldK1xcLikrW2EtekEtWl17Mix9KSkkLykudGVzdCh2YWx1ZSk7XHJcbiAgICAgICAgdmFyIGVtYWlsVmFsID0gJChlbGVtZW50KS5jbG9zZXN0KCdmb3JtJykuZmluZCgnLmFjY291bnRlbWFpbCcpLnZhbCgpO1xyXG4gICAgICAgIGlmICgoZmNoYXJTID09IGZhbHNlKSB8fCAobGNoYXJTID09IGZhbHNlKSkge1xyXG4gICAgICAgICAgICBjdXN0b21FcnJvcm1zZyA9ICdTb21ldGhpbmcgZG9lc25cXCd0IGxvb2sgcmlnaHQsIHBsZWFzZSB0cnkgYWdhaW4uJztcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZW1haWxDaGVjayA9PSBmYWxzZSkge1xyXG4gICAgICAgICAgICBjdXN0b21FcnJvcm1zZyA9ICdPb3BzIC0gdGhlIGVtYWlsIGVudGVyZWQgaXMgbm90IGluIGEgdmFsaWQgZm9ybWF0Lic7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2UgaWYgKGVtYWlsVmFsICE9IHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGN1c3RvbUVycm9ybXNnID0gJ1BsZWFzZSBtYWtlIHN1cmUgZW1haWxzIG1hdGNoLic7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0sIGN1c3RvbUVycm9yKTtcclxuLyoqXHJcbiAqIEFkZCBwb3NpdGl2ZSBudW1iZXIgdmFsaWRhdGlvbiBtZXRob2QgdG8gJCB2YWxpZGF0aW9uXHJcbiAqIHBsdWdpbi4gVGV4dCBmaWVsZHMgbXVzdCBoYXZlICdwb3NpdGl2ZW51bWJlcicgY3NzIGNsYXNzIHRvIGJlXHJcbiAqIHZhbGlkYXRlZCBhcyBwb3NpdGl2ZW51bWJlciBpdCB2YWxpZGF0ZXMgYSBudW1iZXIgYW5kIHRocm93c1xyXG4gKiBlcnJvciBpZiBpdCBpcyBiZWxvdyAwIG9yIGlmIGl0IGlzIG5vdCBhIG51bWJlci5cclxuICovXHJcbiQudmFsaWRhdG9yLmFkZE1ldGhvZCgncG9zaXRpdmVudW1iZXInLCBmdW5jdGlvbiAodmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudCkge1xyXG4gICAgaWYgKCQoZWxlbWVudCkuaGFzQ2xhc3MoJ3N0b3BLZXlwcmVzcycpKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmICh2YWx1ZSA9PSAnJykge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuICgvXi0/KD86XFxkK3xcXGR7MSwzfSg/OixcXGR7M30pKykoPzpcXC5cXGQrKT8kLykudGVzdCh2YWx1ZSkgJiYgTnVtYmVyKHZhbHVlKSA+PSAwO1xyXG4gICAgfVxyXG59LCAnJyk7IC8vIFwiXCIgc2hvdWxkIGJlIHJlcGxhY2VkIHdpdGggZXJyb3IgbWVzc2FnZSBpZiBuZWVkZWRcclxuXHJcbiQudmFsaWRhdG9yLmFkZE1ldGhvZCgnbW9udGhzZWxlY3QnLCBmdW5jdGlvbiAodmFsdWUsIGVsZW1lbnQpIHtcclxuICAgIGlmICgkKGVsZW1lbnQpLmhhc0NsYXNzKCdzdG9wS2V5cHJlc3MnKSkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB2YXIgZCA9IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgIG10aCA9IGQuZ2V0TW9udGgoKSArIDEsXHJcbiAgICAgICAgICAgIHl5ID0gZC5nZXRGdWxsWWVhcigpO1xyXG4gICAgICAgIHZhciBzZWxlY3RlZE10aCA9ICQoJy5jdXN0b20tc2VsZWN0IHNlbGVjdFtpZCQ9XFwnX2V4cGlyYXRpb25fbW9udGhcXCddJykudmFsKCk7XHJcblxyXG4gICAgICAgIHZhciBzZWxlY3RlZHllYXIgPSAkKCcuY3VzdG9tLXNlbGVjdCBzZWxlY3RbaWQkPVxcJ19leHBpcmF0aW9uX3llYXJcXCddJykudmFsKCk7XHJcblxyXG4gICAgICAgIGlmIChzZWxlY3RlZHllYXIpIHtcclxuICAgICAgICAgICAgc2VsZWN0ZWR5ZWFyID0gc2VsZWN0ZWR5ZWFyLnJlcGxhY2UoJywnLCAnJyk7XHJcbiAgICAgICAgICAgIGlmICgoc2VsZWN0ZWR5ZWFyIDw9IHl5KSAmJiAoc2VsZWN0ZWRNdGggPCBtdGgpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSwgJycpO1xyXG5cclxuJC52YWxpZGF0b3IuYWRkTWV0aG9kKCd5ZWFyc2VsZWN0JywgZnVuY3Rpb24gKHZhbHVlLCBlbGVtZW50KSB7XHJcbiAgICBpZiAoJChlbGVtZW50KS5oYXNDbGFzcygnc3RvcEtleXByZXNzJykpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdmFyIGQgPSBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICBtdGggPSBkLmdldE1vbnRoKCkgKyAxLFxyXG4gICAgICAgICAgICB5eSA9IGQuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICB2YXIgc2VsZWN0ZWRNdGggPSAkKCcuY3VzdG9tLXNlbGVjdCBzZWxlY3RbaWQkPVxcJ19leHBpcmF0aW9uX21vbnRoXFwnXScpLnZhbCgpO1xyXG5cclxuICAgICAgICB2YXIgc2VsZWN0ZWR5ZWFyID0gJCgnLmN1c3RvbS1zZWxlY3Qgc2VsZWN0W2lkJD1cXCdfZXhwaXJhdGlvbl95ZWFyXFwnXScpLnZhbCgpO1xyXG5cclxuICAgICAgICBpZiAoc2VsZWN0ZWR5ZWFyKSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkeWVhciA9IHNlbGVjdGVkeWVhci5yZXBsYWNlKCcsJywgJycpO1xyXG4gICAgICAgICAgICBpZiAoKHNlbGVjdGVkeWVhciA8PSB5eSkgJiYgKHNlbGVjdGVkTXRoIDwgbXRoKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0sICcnKTtcclxuXHJcbi8vIHJlZ2lzdGVyIGZvcm0gdmFsaWRhdG9yIGZvciBmb3JtIGVsZW1lbnRzXHJcbi8vIGV4Y2VwdCBmb3IgdGhvc2Ugd2hpY2ggYXJlIG1hcmtlZCBcInN1cHByZXNzXCJcclxuJC5lYWNoKCQoJ2Zvcm06bm90KC5zdXBwcmVzcyknKSwgZnVuY3Rpb24gKCkge1xyXG4gICAgJCh0aGlzKS52YWxpZGF0ZShzZXR0aW5ncyk7XHJcbn0pO1xyXG4vKipcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBkZXNjcmlwdGlvbiBWYWxpZGF0ZXMgYSBnaXZlbiBwaG9uZSBudW1iZXIgYWdhaW5zdCB0aGUgY291bnRyaWVzIHBob25lIHJlZ2V4XHJcbiAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZSBUaGUgcGhvbmUgbnVtYmVyIHdoaWNoIHdpbGwgYmUgdmFsaWRhdGVkXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBlbCBUaGUgaW5wdXQgZmllbGRcclxuICovXHJcbi8qdmFyIHZhbGlkYXRlUGhvbmUgPSBmdW5jdGlvbiAodmFsdWUsIGVsKSB7XHJcbiAgICB2YXIgY291bnRyeSA9ICQoZWwpLmNsb3Nlc3QoJ2Zvcm0nKS5maW5kKCcuY291bnRyeScpO1xyXG4gICAgaWYgKGNvdW50cnkubGVuZ3RoID09PSAwIHx8IGNvdW50cnkudmFsKCkubGVuZ3RoID09PSAwIHx8ICFyZWdleC5waG9uZVtjb3VudHJ5LnZhbCgpLnRvTG93ZXJDYXNlKCldKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHJneCA9IHJlZ2V4LnBob25lW2NvdW50cnkudmFsKCkudG9Mb3dlckNhc2UoKV07XHJcbiAgICB2YXIgaXNPcHRpb25hbCA9IHRoaXMub3B0aW9uYWwoZWwpO1xyXG4gICAgdmFyIGlzVmFsaWQgPSByZ3gudGVzdCgkLnRyaW0odmFsdWUpKTtcclxuXHJcbiAgICByZXR1cm4gaXNPcHRpb25hbCB8fCBpc1ZhbGlkO1xyXG59OyovXHJcblxyXG4vKipcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBkZXNjcmlwdGlvbiBWYWxpZGF0ZXMgdGhhdCBhIGNyZWRpdCBjYXJkIG93bmVyIGlzIG5vdCBhIENyZWRpdCBjYXJkIG51bWJlclxyXG4gKiBAcGFyYW0ge1N0cmluZ30gdmFsdWUgVGhlIG93bmVyIGZpZWxkIHdoaWNoIHdpbGwgYmUgdmFsaWRhdGVkXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBlbCBUaGUgaW5wdXQgZmllbGRcclxuICovXHJcbi8qdmFyIHZhbGlkYXRlT3duZXIgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgIHZhciBpc1ZhbGlkID0gcmVnZXgubm90Q0MudGVzdCgkLnRyaW0odmFsdWUpKTtcclxuICAgIHJldHVybiBpc1ZhbGlkO1xyXG59O1xyXG4qL1xyXG4vKipcclxuICogQWRkIHBob25lIHZhbGlkYXRpb24gbWV0aG9kIHRvICQgdmFsaWRhdGlvbiBwbHVnaW4uXHJcbiAqIFRleHQgZmllbGRzIG11c3QgaGF2ZSAncGhvbmUnIGNzcyBjbGFzcyB0byBiZSB2YWxpZGF0ZWQgYXMgcGhvbmVcclxuICovXHJcbi8qJC52YWxpZGF0b3IuYWRkTWV0aG9kKCdwaG9uZScsIHZhbGlkYXRlUGhvbmUsIFJlc291cmNlcy5JTlZBTElEX1BIT05FKTsqL1xyXG5cclxuLyoqXHJcbiAqIEFkZCBDQ093bmVyIHZhbGlkYXRpb24gbWV0aG9kIHRvICQgdmFsaWRhdGlvbiBwbHVnaW4uXHJcbiAqIFRleHQgZmllbGRzIG11c3QgaGF2ZSAnb3duZXInIGNzcyBjbGFzcyB0byBiZSB2YWxpZGF0ZWQgYXMgbm90IGEgY3JlZGl0IGNhcmRcclxuICovXHJcbi8qJC52YWxpZGF0b3IuYWRkTWV0aG9kKCdvd25lcicsIHZhbGlkYXRlT3duZXIsIFJlc291cmNlcy5JTlZBTElEX09XTkVSKTsqL1xyXG5cclxuLyoqXHJcbiAqIEFkZCBnaWZ0IGNlcnQgYW1vdW50IHZhbGlkYXRpb24gbWV0aG9kIHRvICQgdmFsaWRhdGlvbiBwbHVnaW4uXHJcbiAqIFRleHQgZmllbGRzIG11c3QgaGF2ZSAnZ2lmdC1jZXJ0LWFtb250JyBjc3MgY2xhc3MgdG8gYmUgdmFsaWRhdGVkXHJcbiAqL1xyXG4kLnZhbGlkYXRvci5hZGRNZXRob2QoJ2dpZnQtY2VydC1hbW91bnQnLCBmdW5jdGlvbiAodmFsdWUsIGVsKSB7XHJcbiAgICB2YXIgaXNPcHRpb25hbCA9IHRoaXMub3B0aW9uYWwoZWwpO1xyXG4gICAgdmFyIGlzVmFsaWQgPSAoIWlzTmFOKHZhbHVlKSkgJiYgKHBhcnNlRmxvYXQodmFsdWUpID49IDUpICYmIChwYXJzZUZsb2F0KHZhbHVlKSA8PSA1MDAwKTtcclxuICAgIHJldHVybiBpc09wdGlvbmFsIHx8IGlzVmFsaWQ7XHJcbn0sIFJlc291cmNlcy5HSUZUX0NFUlRfQU1PVU5UX0lOVkFMSUQpO1xyXG5cclxuLyoqXHJcbiAqIEFkZCBwb3NpdGl2ZSBudW1iZXIgdmFsaWRhdGlvbiBtZXRob2QgdG8gJCB2YWxpZGF0aW9uIHBsdWdpbi5cclxuICogVGV4dCBmaWVsZHMgbXVzdCBoYXZlICdwb3NpdGl2ZW51bWJlcicgY3NzIGNsYXNzIHRvIGJlIHZhbGlkYXRlZCBhcyBwb3NpdGl2ZW51bWJlclxyXG4gKi9cclxuLyokLnZhbGlkYXRvci5hZGRNZXRob2QoJ3Bvc2l0aXZlbnVtYmVyJywgZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICBpZiAoJC50cmltKHZhbHVlKS5sZW5ndGggPT09IDApIHsgcmV0dXJuIHRydWU7IH1cclxuICAgIHJldHVybiAoIWlzTmFOKHZhbHVlKSAmJiBOdW1iZXIodmFsdWUpID49IDApO1xyXG59LCAnJyk7IC8vICcnIHNob3VsZCBiZSByZXBsYWNlZCB3aXRoIGVycm9yIG1lc3NhZ2UgaWYgbmVlZGVkXHJcbiovXHJcbi8qU3RhcnQgSklSQSBQUkVWLTc3IDogWmlwIGNvZGUgdmFsaWRhdGlvbiBpcyBub3QgaGFwcGVuaW5nIHdpdGggcmVzcGVjdCB0byB0aGUgU3RhdGUvQ291bnRyeS4qL1xyXG4vKmZ1bmN0aW9uIHZhbGlkYXRlWmlwKHZhbHVlLCBlbCkge1xyXG4gICAgdmFyIGNvdW50cnkgPSAkKGVsKS5jbG9zZXN0KCdmb3JtJykuZmluZCgnLmNvdW50cnknKTtcclxuICAgIGlmIChjb3VudHJ5Lmxlbmd0aCA9PT0gMCB8fCBjb3VudHJ5LnZhbCgpLmxlbmd0aCA9PT0gMCB8fCAhcmVnZXgucG9zdGFsW2NvdW50cnkudmFsKCkudG9Mb3dlckNhc2UoKV0pIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIHZhciBpc09wdGlvbmFsID0gdGhpcy5vcHRpb25hbChlbCk7XHJcbiAgICB2YXIgaXNWYWxpZCA9IHJlZ2V4LnBvc3RhbFtjb3VudHJ5LnZhbCgpLnRvTG93ZXJDYXNlKCldLnRlc3QoJC50cmltKHZhbHVlKSk7XHJcbiAgICByZXR1cm4gaXNPcHRpb25hbCB8fCBpc1ZhbGlkO1xyXG59XHJcbiQudmFsaWRhdG9yLmFkZE1ldGhvZCgncG9zdGFsJywgdmFsaWRhdGVaaXAsIFJlc291cmNlcy5JTlZBTElEX1pJUCk7Ki9cclxuLypFbmQgSklSQSBQUkVWLTc3Ki9cclxuXHJcbiQuZXh0ZW5kKCQudmFsaWRhdG9yLm1lc3NhZ2VzLCB7XHJcbiAgICAvL3JlcXVpcmVkOiBSZXNvdXJjZXMuVkFMSURBVEVfUkVRVUlSRUQsXHJcbiAgICByZW1vdGU6IFJlc291cmNlcy5WQUxJREFURV9SRU1PVEUsXHJcbiAgICBlbWFpbDogUmVzb3VyY2VzLlZBTElEQVRFX0VNQUlMLFxyXG4gICAgdXJsOiBSZXNvdXJjZXMuVkFMSURBVEVfVVJMLFxyXG4gICAgZGF0ZTogUmVzb3VyY2VzLlZBTElEQVRFX0RBVEUsXHJcbiAgICBkYXRlSVNPOiBSZXNvdXJjZXMuVkFMSURBVEVfREFURUlTTyxcclxuICAgIG51bWJlcjogUmVzb3VyY2VzLlZBTElEQVRFX05VTUJFUixcclxuICAgIGRpZ2l0czogUmVzb3VyY2VzLlZBTElEQVRFX0RJR0lUUyxcclxuICAgIGNyZWRpdGNhcmQ6IFJlc291cmNlcy5WQUxJREFURV9DUkVESVRDQVJELFxyXG4gICAgZXF1YWxUbzogUmVzb3VyY2VzLlZBTElEQVRFX0VRVUFMVE8sXHJcbiAgICBtYXhsZW5ndGg6ICQudmFsaWRhdG9yLmZvcm1hdChSZXNvdXJjZXMuVkFMSURBVEVfTUFYTEVOR1RIKSxcclxuICAgIG1pbmxlbmd0aDogJC52YWxpZGF0b3IuZm9ybWF0KFJlc291cmNlcy5WQUxJREFURV9NSU5MRU5HVEgpLFxyXG4gICAgcmFuZ2VsZW5ndGg6ICQudmFsaWRhdG9yLmZvcm1hdChSZXNvdXJjZXMuVkFMSURBVEVfUkFOR0VMRU5HVEgpLFxyXG4gICAgcmFuZ2U6ICQudmFsaWRhdG9yLmZvcm1hdChSZXNvdXJjZXMuVkFMSURBVEVfUkFOR0UpLFxyXG4gICAgbWF4OiAkLnZhbGlkYXRvci5mb3JtYXQoUmVzb3VyY2VzLlZBTElEQVRFX01BWCksXHJcbiAgICBtaW46ICQudmFsaWRhdG9yLmZvcm1hdChSZXNvdXJjZXMuVkFMSURBVEVfTUlOKVxyXG59KTtcclxuXHJcbnZhciB2YWxpZGF0b3IgPSB7XHJcbiAgICByZWdleDogcmVnZXgsXHJcbiAgICBzZXR0aW5nczogc2V0dGluZ3MsXHJcbiAgICBpbml0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICQoJ2Zvcm06bm90KC5zdXBwcmVzcyknKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS52YWxpZGF0ZShzZWxmLnNldHRpbmdzKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB2YWxpZGF0b3IucGhvbmVWYWxpZGF0aW9uKCk7XHJcbiAgICAgICAgdmFsaWRhdG9yLnppcEZvcm1hdHRlcigpO1xyXG4gICAgfSxcclxuICAgIGluaXRGb3JtOiBmdW5jdGlvbiAoZikge1xyXG4gICAgICAgICQoZikudmFsaWRhdGUodGhpcy5zZXR0aW5ncyk7XHJcbiAgICB9LFxyXG4gICAgcGhvbmVWYWxpZGF0aW9uOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gcGhvbmUgdmFsaWRhdGlvblxyXG4gICAgICAgIHZhciBpc0ZpcmVmb3ggPSBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ0ZpcmVmb3gnKSA+IC0xO1xyXG4gICAgICAgIHZhciBpc0V4cGxvcmVyID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdNU0lFJykgPiAtMTtcclxuICAgICAgICBpZiAoaXNGaXJlZm94IHx8IGlzRXhwbG9yZXIpIHtcclxuICAgICAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XFwncGhvbmVcXCddJykuYmluZCgna2V5dXAga2V5ZG93bicsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZS5zaGlmdEtleSB8fCBlLmN0cmxLZXkgfHwgZS5hbHRLZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSBlLmtleUNvZGU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoKGtleSA9PSA4KSB8fCAoa2V5ID09IDkpIHx8IChrZXkgPT0gNDYpIHx8IChrZXkgPj0gMzUgJiYga2V5IDw9IDQwKSB8fCAoa2V5ID49IDQ4ICYmIGtleSA8PSA1NykgfHwgKGtleSA+PSA5NiAmJiBrZXkgPD0gMTA1KSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vdmFyIGN1cmNociA9ICQodGhpcykudmFsKCkubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgdmFyIGN1cnZhbCA9ICQodGhpcykudmFsKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGN1cnZhbDEgPSBjdXJ2YWwucmVwbGFjZSgvW0EtWmEtemAgfiFAIyQlXiYqKClffCtcXC09Pzs6J1wiLC48Plxce1xcfVxcW1xcXVxcXFxcXC9dL2dpLCAnJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3RyMSA9IGN1cnZhbDEuc3Vic3RyaW5nKDAsIDMpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN0cjIgPSBjdXJ2YWwxLnN1YnN0cmluZygzLCA2KTtcclxuICAgICAgICAgICAgICAgIHZhciBzdHIzID0gY3VydmFsMS5zdWJzdHJpbmcoNiwgMTApO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjdXJ2YWwuaW5kZXhPZignKCcpID09IC0xICYmIGN1cnZhbC5pbmRleE9mKCcpJykgPT0gLTEgJiYgY3VydmFsMS5sZW5ndGggPT0gMykge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykudmFsKCcoJyArIHN0cjEgKyAnKSAnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VydmFsLmluZGV4T2YoJygnKSAhPSAtMSAmJiBjdXJ2YWwuaW5kZXhPZignKScpID09IC0xICYmIGN1cnZhbDEubGVuZ3RoID09IDQpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnZhbCgnKCcgKyBzdHIxICsgJykgJyArIHN0cjIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJ2YWwuaW5kZXhPZignKCcpICE9IC0xICYmIGN1cnZhbC5pbmRleE9mKCcpJykgIT0gLTEgJiYgY3VydmFsLmluZGV4T2YoJyAnKSA9PSAtMSAmJiBjdXJ2YWwxLmxlbmd0aCA9PSA2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS52YWwoJygnICsgc3RyMSArICcpICcgKyBzdHIyKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VydmFsLmluZGV4T2YoJygnKSAhPSAtMSAmJiBjdXJ2YWwuaW5kZXhPZignKScpICE9IC0xICYmIGN1cnZhbC5pbmRleE9mKCcgJykgIT0gLTEgJiYgY3VydmFsLmluZGV4T2YoJy0nKSA9PSAtMSAmJiBjdXJ2YWwxLmxlbmd0aCA+IDYpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnZhbCgnKCcgKyBzdHIxICsgJykgJyArIHN0cjIgKyAnLScgKyBzdHIzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChjdXJ2YWwubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnZhbCgnJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICQoJ2JvZHknKS5vbignY2hhbmdlIGlucHV0IGtleXVwJywgJ2lucHV0W25hbWUkPVxcJ3Bob25lXFwnXScsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAvL3ZhciBjdXJjaHIgPSAkKHRoaXMpLnZhbCgpLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICQodGhpcykudmFsKHRoaXMudmFsdWUucmVwbGFjZSgvW15cXGRdL2csICcnKSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgY3VydmFsID0gJCh0aGlzKS52YWwoKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgY3VydmFsMSA9IGN1cnZhbDtcclxuICAgICAgICAgICAgICAgIHZhciBzdHIxID0gY3VydmFsMS5zdWJzdHJpbmcoMCwgMyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3RyMiA9IGN1cnZhbDEuc3Vic3RyaW5nKDMsIDYpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN0cjMgPSBjdXJ2YWwxLnN1YnN0cmluZyg2LCAxMCk7XHJcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0gZXZlbnQud2hpY2ggfHwgZXZlbnQua2V5Q29kZSB8fCBldmVudC5jaGFyQ29kZTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoa2V5ID09IDggfHwgZS5zaGlmdEtleSB8fCBlLmN0cmxLZXkgfHwgZS5hbHRLZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnZhbDEubGVuZ3RoID09IDQgfHwgY3VydmFsMS5sZW5ndGggPT0gNSB8fCBjdXJ2YWwxLmxlbmd0aCA9PSA2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykudmFsKCcoJyArIHN0cjEgKyAnKSAnICsgc3RyMik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJ2YWwxLmxlbmd0aCA+IDYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS52YWwoJygnICsgc3RyMSArICcpICcgKyBzdHIyICsgJy0nICsgc3RyMyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VydmFsMS5sZW5ndGggPT0gMykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnZhbCgnKCcgKyBzdHIxICsgJykgJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJ2YWwxLmxlbmd0aCA9PSA0IHx8IGN1cnZhbDEubGVuZ3RoID09IDUgfHwgY3VydmFsMS5sZW5ndGggPT0gNikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnZhbCgnKCcgKyBzdHIxICsgJykgJyArIHN0cjIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VydmFsMS5sZW5ndGggPiA2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykudmFsKCcoJyArIHN0cjEgKyAnKSAnICsgc3RyMiArICctJyArIHN0cjMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VydmFsLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykudmFsKCcnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogJChcImlucHV0W25hbWUkPSdwaG9uZSddXCIpLmJsdXIoZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICQodGhpcykudmFsKHRoaXMudmFsdWUucmVwbGFjZSgvW0EtWmEtemAgfiFAIyQlXiYqKClffCtcXC09Pzs6J1wiLC48Plxce1xcfVxcW1xcXVxcXFxcXC9dL2dpLCAnJykpO1xyXG4gICAgICAgICAgICAgICAgIHZhciBjdXJ2YWwgPSAkKHRoaXMpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgIHZhciBzdHIxID0gY3VydmFsLnN1YnN0cmluZygwLCAzKTtcclxuICAgICAgICAgICAgICAgICB2YXIgc3RyMiA9IGN1cnZhbC5zdWJzdHJpbmcoMywgNik7XHJcbiAgICAgICAgICAgICAgICAgdmFyIHN0cjMgPSBjdXJ2YWwuc3Vic3RyaW5nKDYsIDEwKTtcclxuICAgICAgICAgICAgICAgICBpZihjdXJ2YWwubGVuZ3RoIDw9IDMgJiYgY3VydmFsLmxlbmd0aCA+IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnZhbCggXCIoXCIgKyBzdHIxICsgXCIpIFwiKTtcclxuICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgZWxzZSAgaWYoY3VydmFsLmxlbmd0aCA8PSA2ICYmIGN1cnZhbC5sZW5ndGggPiAzKXtcclxuICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS52YWwoIFwiKFwiICsgc3RyMSArIFwiKSBcIiArIHN0cjIgKTtcclxuICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgZWxzZSAgaWYoY3VydmFsLmxlbmd0aCA8PSAxMCAmJiBjdXJ2YWwubGVuZ3RoID4gNil7XHJcbiAgICAgICAgICAgICAgICAgICAgICQodGhpcykudmFsKCBcIihcIiArIHN0cjEgKyBcIikgXCIgKyBzdHIyICsgXCItXCIgKyBzdHIzKTtcclxuICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgIH0pOyovXHJcblxyXG4gICAgfSxcclxuICAgIHppcEZvcm1hdHRlcjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJ2JvZHknKS5vbignY2hhbmdlIGlucHV0JywgJ2lucHV0W25hbWUkPVxcJ3Bvc3RhbFxcJ10sIGlucHV0W25hbWUkPVxcJ3ppcFxcJ10nLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQodGhpcykudmFsKHRoaXMudmFsdWUucmVwbGFjZSgvW15cXGRdL2csICcnKSk7XHJcbiAgICAgICAgICAgIHZhciBjdXJ2YWwgPSAkKHRoaXMpLnZhbCgpO1xyXG4gICAgICAgICAgICBpZiAoY3VydmFsLmxlbmd0aCA+IDUpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykudmFsKGN1cnZhbC5zdWJzdHJpbmcoMCwgNSkgKyAnLScgKyBjdXJ2YWwuc3Vic3RyaW5nKDUsIDkpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59O1xyXG5tb2R1bGUuZXhwb3J0cyA9IHZhbGlkYXRvcjtcclxuIl19
