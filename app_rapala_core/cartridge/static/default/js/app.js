(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";

// rawAsap provides everything we need except exception management.
var rawAsap = require("./raw");
// RawTasks are recycled to reduce GC churn.
var freeTasks = [];
// We queue errors to ensure they are thrown in right order (FIFO).
// Array-as-queue is good enough here, since we are just dealing with exceptions.
var pendingErrors = [];
var requestErrorThrow = rawAsap.makeRequestCallFromTimer(throwFirstError);

function throwFirstError() {
    if (pendingErrors.length) {
        throw pendingErrors.shift();
    }
}

/**
 * Calls a task as soon as possible after returning, in its own event, with priority
 * over other events like animation, reflow, and repaint. An error thrown from an
 * event will not interrupt, nor even substantially slow down the processing of
 * other events, but will be rather postponed to a lower priority event.
 * @param {{call}} task A callable object, typically a function that takes no
 * arguments.
 */
module.exports = asap;
function asap(task) {
    var rawTask;
    if (freeTasks.length) {
        rawTask = freeTasks.pop();
    } else {
        rawTask = new RawTask();
    }
    rawTask.task = task;
    rawAsap(rawTask);
}

// We wrap tasks with recyclable task objects.  A task object implements
// `call`, just like a function.
function RawTask() {
    this.task = null;
}

// The sole purpose of wrapping the task is to catch the exception and recycle
// the task object after its single use.
RawTask.prototype.call = function () {
    try {
        this.task.call();
    } catch (error) {
        if (asap.onerror) {
            // This hook exists purely for testing purposes.
            // Its name will be periodically randomized to break any code that
            // depends on its existence.
            asap.onerror(error);
        } else {
            // In a web browser, exceptions are not fatal. However, to avoid
            // slowing down the queue of pending tasks, we rethrow the error in a
            // lower priority turn.
            pendingErrors.push(error);
            requestErrorThrow();
        }
    } finally {
        this.task = null;
        freeTasks[freeTasks.length] = this;
    }
};

},{"./raw":2}],2:[function(require,module,exports){
(function (global){
"use strict";

// Use the fastest means possible to execute a task in its own turn, with
// priority over other events including IO, animation, reflow, and redraw
// events in browsers.
//
// An exception thrown by a task will permanently interrupt the processing of
// subsequent tasks. The higher level `asap` function ensures that if an
// exception is thrown by a task, that the task queue will continue flushing as
// soon as possible, but if you use `rawAsap` directly, you are responsible to
// either ensure that no exceptions are thrown from your task, or to manually
// call `rawAsap.requestFlush` if an exception is thrown.
module.exports = rawAsap;
function rawAsap(task) {
    if (!queue.length) {
        requestFlush();
        flushing = true;
    }
    // Equivalent to push, but avoids a function call.
    queue[queue.length] = task;
}

var queue = [];
// Once a flush has been requested, no further calls to `requestFlush` are
// necessary until the next `flush` completes.
var flushing = false;
// `requestFlush` is an implementation-specific method that attempts to kick
// off a `flush` event as quickly as possible. `flush` will attempt to exhaust
// the event queue before yielding to the browser's own event loop.
var requestFlush;
// The position of the next task to execute in the task queue. This is
// preserved between calls to `flush` so that it can be resumed if
// a task throws an exception.
var index = 0;
// If a task schedules additional tasks recursively, the task queue can grow
// unbounded. To prevent memory exhaustion, the task queue will periodically
// truncate already-completed tasks.
var capacity = 1024;

// The flush function processes all tasks that have been scheduled with
// `rawAsap` unless and until one of those tasks throws an exception.
// If a task throws an exception, `flush` ensures that its state will remain
// consistent and will resume where it left off when called again.
// However, `flush` does not make any arrangements to be called again if an
// exception is thrown.
function flush() {
    while (index < queue.length) {
        var currentIndex = index;
        // Advance the index before calling the task. This ensures that we will
        // begin flushing on the next task the task throws an error.
        index = index + 1;
        queue[currentIndex].call();
        // Prevent leaking memory for long chains of recursive calls to `asap`.
        // If we call `asap` within tasks scheduled by `asap`, the queue will
        // grow, but to avoid an O(n) walk for every task we execute, we don't
        // shift tasks off the queue after they have been executed.
        // Instead, we periodically shift 1024 tasks off the queue.
        if (index > capacity) {
            // Manually shift all values starting at the index back to the
            // beginning of the queue.
            for (var scan = 0, newLength = queue.length - index; scan < newLength; scan++) {
                queue[scan] = queue[scan + index];
            }
            queue.length -= index;
            index = 0;
        }
    }
    queue.length = 0;
    index = 0;
    flushing = false;
}

// `requestFlush` is implemented using a strategy based on data collected from
// every available SauceLabs Selenium web driver worker at time of writing.
// https://docs.google.com/spreadsheets/d/1mG-5UYGup5qxGdEMWkhP6BWCz053NUb2E1QoUTU16uA/edit#gid=783724593

// Safari 6 and 6.1 for desktop, iPad, and iPhone are the only browsers that
// have WebKitMutationObserver but not un-prefixed MutationObserver.
// Must use `global` or `self` instead of `window` to work in both frames and web
// workers. `global` is a provision of Browserify, Mr, Mrs, or Mop.

/* globals self */
var scope = typeof global !== "undefined" ? global : self;
var BrowserMutationObserver = scope.MutationObserver || scope.WebKitMutationObserver;

// MutationObservers are desirable because they have high priority and work
// reliably everywhere they are implemented.
// They are implemented in all modern browsers.
//
// - Android 4-4.3
// - Chrome 26-34
// - Firefox 14-29
// - Internet Explorer 11
// - iPad Safari 6-7.1
// - iPhone Safari 7-7.1
// - Safari 6-7
if (typeof BrowserMutationObserver === "function") {
    requestFlush = makeRequestCallFromMutationObserver(flush);

// MessageChannels are desirable because they give direct access to the HTML
// task queue, are implemented in Internet Explorer 10, Safari 5.0-1, and Opera
// 11-12, and in web workers in many engines.
// Although message channels yield to any queued rendering and IO tasks, they
// would be better than imposing the 4ms delay of timers.
// However, they do not work reliably in Internet Explorer or Safari.

// Internet Explorer 10 is the only browser that has setImmediate but does
// not have MutationObservers.
// Although setImmediate yields to the browser's renderer, it would be
// preferrable to falling back to setTimeout since it does not have
// the minimum 4ms penalty.
// Unfortunately there appears to be a bug in Internet Explorer 10 Mobile (and
// Desktop to a lesser extent) that renders both setImmediate and
// MessageChannel useless for the purposes of ASAP.
// https://github.com/kriskowal/q/issues/396

// Timers are implemented universally.
// We fall back to timers in workers in most engines, and in foreground
// contexts in the following browsers.
// However, note that even this simple case requires nuances to operate in a
// broad spectrum of browsers.
//
// - Firefox 3-13
// - Internet Explorer 6-9
// - iPad Safari 4.3
// - Lynx 2.8.7
} else {
    requestFlush = makeRequestCallFromTimer(flush);
}

// `requestFlush` requests that the high priority event queue be flushed as
// soon as possible.
// This is useful to prevent an error thrown in a task from stalling the event
// queue if the exception handled by Node.jsâ€™s
// `process.on("uncaughtException")` or by a domain.
rawAsap.requestFlush = requestFlush;

// To request a high priority event, we induce a mutation observer by toggling
// the text of a text node between "1" and "-1".
function makeRequestCallFromMutationObserver(callback) {
    var toggle = 1;
    var observer = new BrowserMutationObserver(callback);
    var node = document.createTextNode("");
    observer.observe(node, {characterData: true});
    return function requestCall() {
        toggle = -toggle;
        node.data = toggle;
    };
}

// The message channel technique was discovered by Malte Ubl and was the
// original foundation for this library.
// http://www.nonblocking.io/2011/06/windownexttick.html

// Safari 6.0.5 (at least) intermittently fails to create message ports on a
// page's first load. Thankfully, this version of Safari supports
// MutationObservers, so we don't need to fall back in that case.

// function makeRequestCallFromMessageChannel(callback) {
//     var channel = new MessageChannel();
//     channel.port1.onmessage = callback;
//     return function requestCall() {
//         channel.port2.postMessage(0);
//     };
// }

// For reasons explained above, we are also unable to use `setImmediate`
// under any circumstances.
// Even if we were, there is another bug in Internet Explorer 10.
// It is not sufficient to assign `setImmediate` to `requestFlush` because
// `setImmediate` must be called *by name* and therefore must be wrapped in a
// closure.
// Never forget.

// function makeRequestCallFromSetImmediate(callback) {
//     return function requestCall() {
//         setImmediate(callback);
//     };
// }

// Safari 6.0 has a problem where timers will get lost while the user is
// scrolling. This problem does not impact ASAP because Safari 6.0 supports
// mutation observers, so that implementation is used instead.
// However, if we ever elect to use timers in Safari, the prevalent work-around
// is to add a scroll event listener that calls for a flush.

// `setTimeout` does not call the passed callback if the delay is less than
// approximately 7 in web workers in Firefox 8 through 18, and sometimes not
// even then.

function makeRequestCallFromTimer(callback) {
    return function requestCall() {
        // We dispatch a timeout with a specified delay of 0 for engines that
        // can reliably accommodate that request. This will usually be snapped
        // to a 4 milisecond delay, but once we're flushing, there's no delay
        // between events.
        var timeoutHandle = setTimeout(handleTimer, 0);
        // However, since this timer gets frequently dropped in Firefox
        // workers, we enlist an interval handle that will try to fire
        // an event 20 times per second until it succeeds.
        var intervalHandle = setInterval(handleTimer, 50);

        function handleTimer() {
            // Whichever timer succeeds will cancel both timers and
            // execute the callback.
            clearTimeout(timeoutHandle);
            clearInterval(intervalHandle);
            callback();
        }
    };
}

// This is for `asap.js` only.
// Its name will be periodically randomized to break any code that depends on
// its existence.
rawAsap.makeRequestCallFromTimer = makeRequestCallFromTimer;

// ASAP was originally a nextTick shim included in Q. This was factored out
// into this ASAP package. It was later adapted to RSVP which made further
// amendments. These decisions, particularly to marginalize MessageChannel and
// to capture the MutationObserver implementation in a closure, were integrated
// back into ASAP proper.
// https://github.com/tildeio/rsvp.js/blob/cddf7232546a9cf858524b75cde6f9edf72620a7/lib/rsvp/asap.js

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],3:[function(require,module,exports){
/**
 * EvEmitter v1.1.0
 * Lil' event emitter
 * MIT License
 */

/* jshint unused: true, undef: true, strict: true */

( function( global, factory ) {
  // universal module definition
  /* jshint strict: false */ /* globals define, module, window */
  if ( typeof define == 'function' && define.amd ) {
    // AMD - RequireJS
    define( factory );
  } else if ( typeof module == 'object' && module.exports ) {
    // CommonJS - Browserify, Webpack
    module.exports = factory();
  } else {
    // Browser globals
    global.EvEmitter = factory();
  }

}( typeof window != 'undefined' ? window : this, function() {

"use strict";

function EvEmitter() {}

var proto = EvEmitter.prototype;

proto.on = function( eventName, listener ) {
  if ( !eventName || !listener ) {
    return;
  }
  // set events hash
  var events = this._events = this._events || {};
  // set listeners array
  var listeners = events[ eventName ] = events[ eventName ] || [];
  // only add once
  if ( listeners.indexOf( listener ) == -1 ) {
    listeners.push( listener );
  }

  return this;
};

proto.once = function( eventName, listener ) {
  if ( !eventName || !listener ) {
    return;
  }
  // add event
  this.on( eventName, listener );
  // set once flag
  // set onceEvents hash
  var onceEvents = this._onceEvents = this._onceEvents || {};
  // set onceListeners object
  var onceListeners = onceEvents[ eventName ] = onceEvents[ eventName ] || {};
  // set flag
  onceListeners[ listener ] = true;

  return this;
};

proto.off = function( eventName, listener ) {
  var listeners = this._events && this._events[ eventName ];
  if ( !listeners || !listeners.length ) {
    return;
  }
  var index = listeners.indexOf( listener );
  if ( index != -1 ) {
    listeners.splice( index, 1 );
  }

  return this;
};

proto.emitEvent = function( eventName, args ) {
  var listeners = this._events && this._events[ eventName ];
  if ( !listeners || !listeners.length ) {
    return;
  }
  // copy over to avoid interference if .off() in listener
  listeners = listeners.slice(0);
  args = args || [];
  // once stuff
  var onceListeners = this._onceEvents && this._onceEvents[ eventName ];

  for ( var i=0; i < listeners.length; i++ ) {
    var listener = listeners[i]
    var isOnce = onceListeners && onceListeners[ listener ];
    if ( isOnce ) {
      // remove listener
      // remove before trigger to prevent recursion
      this.off( eventName, listener );
      // unset once flag
      delete onceListeners[ listener ];
    }
    // trigger listener
    listener.apply( this, args );
  }

  return this;
};

proto.allOff = function() {
  delete this._events;
  delete this._onceEvents;
};

return EvEmitter;

}));

},{}],4:[function(require,module,exports){
/*!
 * imagesLoaded v4.1.4
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */

( function( window, factory ) { 'use strict';
  // universal module definition

  /*global define: false, module: false, require: false */

  if ( typeof define == 'function' && define.amd ) {
    // AMD
    define( [
      'ev-emitter/ev-emitter'
    ], function( EvEmitter ) {
      return factory( window, EvEmitter );
    });
  } else if ( typeof module == 'object' && module.exports ) {
    // CommonJS
    module.exports = factory(
      window,
      require('ev-emitter')
    );
  } else {
    // browser global
    window.imagesLoaded = factory(
      window,
      window.EvEmitter
    );
  }

})( typeof window !== 'undefined' ? window : this,

// --------------------------  factory -------------------------- //

function factory( window, EvEmitter ) {

'use strict';

var $ = window.jQuery;
var console = window.console;

// -------------------------- helpers -------------------------- //

// extend objects
function extend( a, b ) {
  for ( var prop in b ) {
    a[ prop ] = b[ prop ];
  }
  return a;
}

var arraySlice = Array.prototype.slice;

// turn element or nodeList into an array
function makeArray( obj ) {
  if ( Array.isArray( obj ) ) {
    // use object if already an array
    return obj;
  }

  var isArrayLike = typeof obj == 'object' && typeof obj.length == 'number';
  if ( isArrayLike ) {
    // convert nodeList to array
    return arraySlice.call( obj );
  }

  // array of single index
  return [ obj ];
}

// -------------------------- imagesLoaded -------------------------- //

/**
 * @param {Array, Element, NodeList, String} elem
 * @param {Object or Function} options - if function, use as callback
 * @param {Function} onAlways - callback function
 */
function ImagesLoaded( elem, options, onAlways ) {
  // coerce ImagesLoaded() without new, to be new ImagesLoaded()
  if ( !( this instanceof ImagesLoaded ) ) {
    return new ImagesLoaded( elem, options, onAlways );
  }
  // use elem as selector string
  var queryElem = elem;
  if ( typeof elem == 'string' ) {
    queryElem = document.querySelectorAll( elem );
  }
  // bail if bad element
  if ( !queryElem ) {
    console.error( 'Bad element for imagesLoaded ' + ( queryElem || elem ) );
    return;
  }

  this.elements = makeArray( queryElem );
  this.options = extend( {}, this.options );
  // shift arguments if no options set
  if ( typeof options == 'function' ) {
    onAlways = options;
  } else {
    extend( this.options, options );
  }

  if ( onAlways ) {
    this.on( 'always', onAlways );
  }

  this.getImages();

  if ( $ ) {
    // add jQuery Deferred object
    this.jqDeferred = new $.Deferred();
  }

  // HACK check async to allow time to bind listeners
  setTimeout( this.check.bind( this ) );
}

ImagesLoaded.prototype = Object.create( EvEmitter.prototype );

ImagesLoaded.prototype.options = {};

ImagesLoaded.prototype.getImages = function() {
  this.images = [];

  // filter & find items if we have an item selector
  this.elements.forEach( this.addElementImages, this );
};

/**
 * @param {Node} element
 */
ImagesLoaded.prototype.addElementImages = function( elem ) {
  // filter siblings
  if ( elem.nodeName == 'IMG' ) {
    this.addImage( elem );
  }
  // get background image on element
  if ( this.options.background === true ) {
    this.addElementBackgroundImages( elem );
  }

  // find children
  // no non-element nodes, #143
  var nodeType = elem.nodeType;
  if ( !nodeType || !elementNodeTypes[ nodeType ] ) {
    return;
  }
  var childImgs = elem.querySelectorAll('img');
  // concat childElems to filterFound array
  for ( var i=0; i < childImgs.length; i++ ) {
    var img = childImgs[i];
    this.addImage( img );
  }

  // get child background images
  if ( typeof this.options.background == 'string' ) {
    var children = elem.querySelectorAll( this.options.background );
    for ( i=0; i < children.length; i++ ) {
      var child = children[i];
      this.addElementBackgroundImages( child );
    }
  }
};

var elementNodeTypes = {
  1: true,
  9: true,
  11: true
};

ImagesLoaded.prototype.addElementBackgroundImages = function( elem ) {
  var style = getComputedStyle( elem );
  if ( !style ) {
    // Firefox returns null if in a hidden iframe https://bugzil.la/548397
    return;
  }
  // get url inside url("...")
  var reURL = /url\((['"])?(.*?)\1\)/gi;
  var matches = reURL.exec( style.backgroundImage );
  while ( matches !== null ) {
    var url = matches && matches[2];
    if ( url ) {
      this.addBackground( url, elem );
    }
    matches = reURL.exec( style.backgroundImage );
  }
};

/**
 * @param {Image} img
 */
ImagesLoaded.prototype.addImage = function( img ) {
  var loadingImage = new LoadingImage( img );
  this.images.push( loadingImage );
};

ImagesLoaded.prototype.addBackground = function( url, elem ) {
  var background = new Background( url, elem );
  this.images.push( background );
};

ImagesLoaded.prototype.check = function() {
  var _this = this;
  this.progressedCount = 0;
  this.hasAnyBroken = false;
  // complete if no images
  if ( !this.images.length ) {
    this.complete();
    return;
  }

  function onProgress( image, elem, message ) {
    // HACK - Chrome triggers event before object properties have changed. #83
    setTimeout( function() {
      _this.progress( image, elem, message );
    });
  }

  this.images.forEach( function( loadingImage ) {
    loadingImage.once( 'progress', onProgress );
    loadingImage.check();
  });
};

ImagesLoaded.prototype.progress = function( image, elem, message ) {
  this.progressedCount++;
  this.hasAnyBroken = this.hasAnyBroken || !image.isLoaded;
  // progress event
  this.emitEvent( 'progress', [ this, image, elem ] );
  if ( this.jqDeferred && this.jqDeferred.notify ) {
    this.jqDeferred.notify( this, image );
  }
  // check if completed
  if ( this.progressedCount == this.images.length ) {
    this.complete();
  }

  if ( this.options.debug && console ) {
    console.log( 'progress: ' + message, image, elem );
  }
};

ImagesLoaded.prototype.complete = function() {
  var eventName = this.hasAnyBroken ? 'fail' : 'done';
  this.isComplete = true;
  this.emitEvent( eventName, [ this ] );
  this.emitEvent( 'always', [ this ] );
  if ( this.jqDeferred ) {
    var jqMethod = this.hasAnyBroken ? 'reject' : 'resolve';
    this.jqDeferred[ jqMethod ]( this );
  }
};

// --------------------------  -------------------------- //

function LoadingImage( img ) {
  this.img = img;
}

LoadingImage.prototype = Object.create( EvEmitter.prototype );

LoadingImage.prototype.check = function() {
  // If complete is true and browser supports natural sizes,
  // try to check for image status manually.
  var isComplete = this.getIsImageComplete();
  if ( isComplete ) {
    // report based on naturalWidth
    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );
    return;
  }

  // If none of the checks above matched, simulate loading on detached element.
  this.proxyImage = new Image();
  this.proxyImage.addEventListener( 'load', this );
  this.proxyImage.addEventListener( 'error', this );
  // bind to image as well for Firefox. #191
  this.img.addEventListener( 'load', this );
  this.img.addEventListener( 'error', this );
  this.proxyImage.src = this.img.src;
};

LoadingImage.prototype.getIsImageComplete = function() {
  // check for non-zero, non-undefined naturalWidth
  // fixes Safari+InfiniteScroll+Masonry bug infinite-scroll#671
  return this.img.complete && this.img.naturalWidth;
};

LoadingImage.prototype.confirm = function( isLoaded, message ) {
  this.isLoaded = isLoaded;
  this.emitEvent( 'progress', [ this, this.img, message ] );
};

// ----- events ----- //

// trigger specified handler for event type
LoadingImage.prototype.handleEvent = function( event ) {
  var method = 'on' + event.type;
  if ( this[ method ] ) {
    this[ method ]( event );
  }
};

LoadingImage.prototype.onload = function() {
  this.confirm( true, 'onload' );
  this.unbindEvents();
};

LoadingImage.prototype.onerror = function() {
  this.confirm( false, 'onerror' );
  this.unbindEvents();
};

LoadingImage.prototype.unbindEvents = function() {
  this.proxyImage.removeEventListener( 'load', this );
  this.proxyImage.removeEventListener( 'error', this );
  this.img.removeEventListener( 'load', this );
  this.img.removeEventListener( 'error', this );
};

// -------------------------- Background -------------------------- //

function Background( url, element ) {
  this.url = url;
  this.element = element;
  this.img = new Image();
}

// inherit LoadingImage prototype
Background.prototype = Object.create( LoadingImage.prototype );

Background.prototype.check = function() {
  this.img.addEventListener( 'load', this );
  this.img.addEventListener( 'error', this );
  this.img.src = this.url;
  // check if image is already complete
  var isComplete = this.getIsImageComplete();
  if ( isComplete ) {
    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );
    this.unbindEvents();
  }
};

Background.prototype.unbindEvents = function() {
  this.img.removeEventListener( 'load', this );
  this.img.removeEventListener( 'error', this );
};

Background.prototype.confirm = function( isLoaded, message ) {
  this.isLoaded = isLoaded;
  this.emitEvent( 'progress', [ this, this.element, message ] );
};

// -------------------------- jQuery -------------------------- //

ImagesLoaded.makeJQueryPlugin = function( jQuery ) {
  jQuery = jQuery || window.jQuery;
  if ( !jQuery ) {
    return;
  }
  // set local variable
  $ = jQuery;
  // $().imagesLoaded()
  $.fn.imagesLoaded = function( options, callback ) {
    var instance = new ImagesLoaded( this, options, callback );
    return instance.jqDeferred.promise( $(this) );
  };
};
// try making plugin
ImagesLoaded.makeJQueryPlugin();

// --------------------------  -------------------------- //

return ImagesLoaded;

});

},{"ev-emitter":3}],5:[function(require,module,exports){
(function (global){
/**
 * @license
 * lodash 3.10.1 (Custom Build) <https://lodash.com/>
 * Build: `lodash modern -d -o ./index.js`
 * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <https://lodash.com/license>
 */
;(function() {

  /** Used as a safe reference for `undefined` in pre-ES5 environments. */
  var undefined;

  /** Used as the semantic version number. */
  var VERSION = '3.10.1';

  /** Used to compose bitmasks for wrapper metadata. */
  var BIND_FLAG = 1,
      BIND_KEY_FLAG = 2,
      CURRY_BOUND_FLAG = 4,
      CURRY_FLAG = 8,
      CURRY_RIGHT_FLAG = 16,
      PARTIAL_FLAG = 32,
      PARTIAL_RIGHT_FLAG = 64,
      ARY_FLAG = 128,
      REARG_FLAG = 256;

  /** Used as default options for `_.trunc`. */
  var DEFAULT_TRUNC_LENGTH = 30,
      DEFAULT_TRUNC_OMISSION = '...';

  /** Used to detect when a function becomes hot. */
  var HOT_COUNT = 150,
      HOT_SPAN = 16;

  /** Used as the size to enable large array optimizations. */
  var LARGE_ARRAY_SIZE = 200;

  /** Used to indicate the type of lazy iteratees. */
  var LAZY_FILTER_FLAG = 1,
      LAZY_MAP_FLAG = 2;

  /** Used as the `TypeError` message for "Functions" methods. */
  var FUNC_ERROR_TEXT = 'Expected a function';

  /** Used as the internal argument placeholder. */
  var PLACEHOLDER = '__lodash_placeholder__';

  /** `Object#toString` result references. */
  var argsTag = '[object Arguments]',
      arrayTag = '[object Array]',
      boolTag = '[object Boolean]',
      dateTag = '[object Date]',
      errorTag = '[object Error]',
      funcTag = '[object Function]',
      mapTag = '[object Map]',
      numberTag = '[object Number]',
      objectTag = '[object Object]',
      regexpTag = '[object RegExp]',
      setTag = '[object Set]',
      stringTag = '[object String]',
      weakMapTag = '[object WeakMap]';

  var arrayBufferTag = '[object ArrayBuffer]',
      float32Tag = '[object Float32Array]',
      float64Tag = '[object Float64Array]',
      int8Tag = '[object Int8Array]',
      int16Tag = '[object Int16Array]',
      int32Tag = '[object Int32Array]',
      uint8Tag = '[object Uint8Array]',
      uint8ClampedTag = '[object Uint8ClampedArray]',
      uint16Tag = '[object Uint16Array]',
      uint32Tag = '[object Uint32Array]';

  /** Used to match empty string literals in compiled template source. */
  var reEmptyStringLeading = /\b__p \+= '';/g,
      reEmptyStringMiddle = /\b(__p \+=) '' \+/g,
      reEmptyStringTrailing = /(__e\(.*?\)|\b__t\)) \+\n'';/g;

  /** Used to match HTML entities and HTML characters. */
  var reEscapedHtml = /&(?:amp|lt|gt|quot|#39|#96);/g,
      reUnescapedHtml = /[&<>"'`]/g,
      reHasEscapedHtml = RegExp(reEscapedHtml.source),
      reHasUnescapedHtml = RegExp(reUnescapedHtml.source);

  /** Used to match template delimiters. */
  var reEscape = /<%-([\s\S]+?)%>/g,
      reEvaluate = /<%([\s\S]+?)%>/g,
      reInterpolate = /<%=([\s\S]+?)%>/g;

  /** Used to match property names within property paths. */
  var reIsDeepProp = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,
      reIsPlainProp = /^\w*$/,
      rePropName = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g;

  /**
   * Used to match `RegExp` [syntax characters](http://ecma-international.org/ecma-262/6.0/#sec-patterns)
   * and those outlined by [`EscapeRegExpPattern`](http://ecma-international.org/ecma-262/6.0/#sec-escaperegexppattern).
   */
  var reRegExpChars = /^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,
      reHasRegExpChars = RegExp(reRegExpChars.source);

  /** Used to match [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks). */
  var reComboMark = /[\u0300-\u036f\ufe20-\ufe23]/g;

  /** Used to match backslashes in property paths. */
  var reEscapeChar = /\\(\\)?/g;

  /** Used to match [ES template delimiters](http://ecma-international.org/ecma-262/6.0/#sec-template-literal-lexical-components). */
  var reEsTemplate = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;

  /** Used to match `RegExp` flags from their coerced string values. */
  var reFlags = /\w*$/;

  /** Used to detect hexadecimal string values. */
  var reHasHexPrefix = /^0[xX]/;

  /** Used to detect host constructors (Safari > 5). */
  var reIsHostCtor = /^\[object .+?Constructor\]$/;

  /** Used to detect unsigned integer values. */
  var reIsUint = /^\d+$/;

  /** Used to match latin-1 supplementary letters (excluding mathematical operators). */
  var reLatin1 = /[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g;

  /** Used to ensure capturing order of template delimiters. */
  var reNoMatch = /($^)/;

  /** Used to match unescaped characters in compiled string literals. */
  var reUnescapedString = /['\n\r\u2028\u2029\\]/g;

  /** Used to match words to create compound words. */
  var reWords = (function() {
    var upper = '[A-Z\\xc0-\\xd6\\xd8-\\xde]',
        lower = '[a-z\\xdf-\\xf6\\xf8-\\xff]+';

    return RegExp(upper + '+(?=' + upper + lower + ')|' + upper + '?' + lower + '|' + upper + '+|[0-9]+', 'g');
  }());

  /** Used to assign default `context` object properties. */
  var contextProps = [
    'Array', 'ArrayBuffer', 'Date', 'Error', 'Float32Array', 'Float64Array',
    'Function', 'Int8Array', 'Int16Array', 'Int32Array', 'Math', 'Number',
    'Object', 'RegExp', 'Set', 'String', '_', 'clearTimeout', 'isFinite',
    'parseFloat', 'parseInt', 'setTimeout', 'TypeError', 'Uint8Array',
    'Uint8ClampedArray', 'Uint16Array', 'Uint32Array', 'WeakMap'
  ];

  /** Used to make template sourceURLs easier to identify. */
  var templateCounter = -1;

  /** Used to identify `toStringTag` values of typed arrays. */
  var typedArrayTags = {};
  typedArrayTags[float32Tag] = typedArrayTags[float64Tag] =
  typedArrayTags[int8Tag] = typedArrayTags[int16Tag] =
  typedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =
  typedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =
  typedArrayTags[uint32Tag] = true;
  typedArrayTags[argsTag] = typedArrayTags[arrayTag] =
  typedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =
  typedArrayTags[dateTag] = typedArrayTags[errorTag] =
  typedArrayTags[funcTag] = typedArrayTags[mapTag] =
  typedArrayTags[numberTag] = typedArrayTags[objectTag] =
  typedArrayTags[regexpTag] = typedArrayTags[setTag] =
  typedArrayTags[stringTag] = typedArrayTags[weakMapTag] = false;

  /** Used to identify `toStringTag` values supported by `_.clone`. */
  var cloneableTags = {};
  cloneableTags[argsTag] = cloneableTags[arrayTag] =
  cloneableTags[arrayBufferTag] = cloneableTags[boolTag] =
  cloneableTags[dateTag] = cloneableTags[float32Tag] =
  cloneableTags[float64Tag] = cloneableTags[int8Tag] =
  cloneableTags[int16Tag] = cloneableTags[int32Tag] =
  cloneableTags[numberTag] = cloneableTags[objectTag] =
  cloneableTags[regexpTag] = cloneableTags[stringTag] =
  cloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =
  cloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;
  cloneableTags[errorTag] = cloneableTags[funcTag] =
  cloneableTags[mapTag] = cloneableTags[setTag] =
  cloneableTags[weakMapTag] = false;

  /** Used to map latin-1 supplementary letters to basic latin letters. */
  var deburredLetters = {
    '\xc0': 'A',  '\xc1': 'A', '\xc2': 'A', '\xc3': 'A', '\xc4': 'A', '\xc5': 'A',
    '\xe0': 'a',  '\xe1': 'a', '\xe2': 'a', '\xe3': 'a', '\xe4': 'a', '\xe5': 'a',
    '\xc7': 'C',  '\xe7': 'c',
    '\xd0': 'D',  '\xf0': 'd',
    '\xc8': 'E',  '\xc9': 'E', '\xca': 'E', '\xcb': 'E',
    '\xe8': 'e',  '\xe9': 'e', '\xea': 'e', '\xeb': 'e',
    '\xcC': 'I',  '\xcd': 'I', '\xce': 'I', '\xcf': 'I',
    '\xeC': 'i',  '\xed': 'i', '\xee': 'i', '\xef': 'i',
    '\xd1': 'N',  '\xf1': 'n',
    '\xd2': 'O',  '\xd3': 'O', '\xd4': 'O', '\xd5': 'O', '\xd6': 'O', '\xd8': 'O',
    '\xf2': 'o',  '\xf3': 'o', '\xf4': 'o', '\xf5': 'o', '\xf6': 'o', '\xf8': 'o',
    '\xd9': 'U',  '\xda': 'U', '\xdb': 'U', '\xdc': 'U',
    '\xf9': 'u',  '\xfa': 'u', '\xfb': 'u', '\xfc': 'u',
    '\xdd': 'Y',  '\xfd': 'y', '\xff': 'y',
    '\xc6': 'Ae', '\xe6': 'ae',
    '\xde': 'Th', '\xfe': 'th',
    '\xdf': 'ss'
  };

  /** Used to map characters to HTML entities. */
  var htmlEscapes = {
    '&': '&amp;',
    '<': '&lt;',
    '>': '&gt;',
    '"': '&quot;',
    "'": '&#39;',
    '`': '&#96;'
  };

  /** Used to map HTML entities to characters. */
  var htmlUnescapes = {
    '&amp;': '&',
    '&lt;': '<',
    '&gt;': '>',
    '&quot;': '"',
    '&#39;': "'",
    '&#96;': '`'
  };

  /** Used to determine if values are of the language type `Object`. */
  var objectTypes = {
    'function': true,
    'object': true
  };

  /** Used to escape characters for inclusion in compiled regexes. */
  var regexpEscapes = {
    '0': 'x30', '1': 'x31', '2': 'x32', '3': 'x33', '4': 'x34',
    '5': 'x35', '6': 'x36', '7': 'x37', '8': 'x38', '9': 'x39',
    'A': 'x41', 'B': 'x42', 'C': 'x43', 'D': 'x44', 'E': 'x45', 'F': 'x46',
    'a': 'x61', 'b': 'x62', 'c': 'x63', 'd': 'x64', 'e': 'x65', 'f': 'x66',
    'n': 'x6e', 'r': 'x72', 't': 'x74', 'u': 'x75', 'v': 'x76', 'x': 'x78'
  };

  /** Used to escape characters for inclusion in compiled string literals. */
  var stringEscapes = {
    '\\': '\\',
    "'": "'",
    '\n': 'n',
    '\r': 'r',
    '\u2028': 'u2028',
    '\u2029': 'u2029'
  };

  /** Detect free variable `exports`. */
  var freeExports = objectTypes[typeof exports] && exports && !exports.nodeType && exports;

  /** Detect free variable `module`. */
  var freeModule = objectTypes[typeof module] && module && !module.nodeType && module;

  /** Detect free variable `global` from Node.js. */
  var freeGlobal = freeExports && freeModule && typeof global == 'object' && global && global.Object && global;

  /** Detect free variable `self`. */
  var freeSelf = objectTypes[typeof self] && self && self.Object && self;

  /** Detect free variable `window`. */
  var freeWindow = objectTypes[typeof window] && window && window.Object && window;

  /** Detect the popular CommonJS extension `module.exports`. */
  var moduleExports = freeModule && freeModule.exports === freeExports && freeExports;

  /**
   * Used as a reference to the global object.
   *
   * The `this` value is used if it's the global object to avoid Greasemonkey's
   * restricted `window` object, otherwise the `window` object is used.
   */
  var root = freeGlobal || ((freeWindow !== (this && this.window)) && freeWindow) || freeSelf || this;

  /*--------------------------------------------------------------------------*/

  /**
   * The base implementation of `compareAscending` which compares values and
   * sorts them in ascending order without guaranteeing a stable sort.
   *
   * @private
   * @param {*} value The value to compare.
   * @param {*} other The other value to compare.
   * @returns {number} Returns the sort order indicator for `value`.
   */
  function baseCompareAscending(value, other) {
    if (value !== other) {
      var valIsNull = value === null,
          valIsUndef = value === undefined,
          valIsReflexive = value === value;

      var othIsNull = other === null,
          othIsUndef = other === undefined,
          othIsReflexive = other === other;

      if ((value > other && !othIsNull) || !valIsReflexive ||
          (valIsNull && !othIsUndef && othIsReflexive) ||
          (valIsUndef && othIsReflexive)) {
        return 1;
      }
      if ((value < other && !valIsNull) || !othIsReflexive ||
          (othIsNull && !valIsUndef && valIsReflexive) ||
          (othIsUndef && valIsReflexive)) {
        return -1;
      }
    }
    return 0;
  }

  /**
   * The base implementation of `_.findIndex` and `_.findLastIndex` without
   * support for callback shorthands and `this` binding.
   *
   * @private
   * @param {Array} array The array to search.
   * @param {Function} predicate The function invoked per iteration.
   * @param {boolean} [fromRight] Specify iterating from right to left.
   * @returns {number} Returns the index of the matched value, else `-1`.
   */
  function baseFindIndex(array, predicate, fromRight) {
    var length = array.length,
        index = fromRight ? length : -1;

    while ((fromRight ? index-- : ++index < length)) {
      if (predicate(array[index], index, array)) {
        return index;
      }
    }
    return -1;
  }

  /**
   * The base implementation of `_.indexOf` without support for binary searches.
   *
   * @private
   * @param {Array} array The array to search.
   * @param {*} value The value to search for.
   * @param {number} fromIndex The index to search from.
   * @returns {number} Returns the index of the matched value, else `-1`.
   */
  function baseIndexOf(array, value, fromIndex) {
    if (value !== value) {
      return indexOfNaN(array, fromIndex);
    }
    var index = fromIndex - 1,
        length = array.length;

    while (++index < length) {
      if (array[index] === value) {
        return index;
      }
    }
    return -1;
  }

  /**
   * The base implementation of `_.isFunction` without support for environments
   * with incorrect `typeof` results.
   *
   * @private
   * @param {*} value The value to check.
   * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.
   */
  function baseIsFunction(value) {
    // Avoid a Chakra JIT bug in compatibility modes of IE 11.
    // See https://github.com/jashkenas/underscore/issues/1621 for more details.
    return typeof value == 'function' || false;
  }

  /**
   * Converts `value` to a string if it's not one. An empty string is returned
   * for `null` or `undefined` values.
   *
   * @private
   * @param {*} value The value to process.
   * @returns {string} Returns the string.
   */
  function baseToString(value) {
    return value == null ? '' : (value + '');
  }

  /**
   * Used by `_.trim` and `_.trimLeft` to get the index of the first character
   * of `string` that is not found in `chars`.
   *
   * @private
   * @param {string} string The string to inspect.
   * @param {string} chars The characters to find.
   * @returns {number} Returns the index of the first character not found in `chars`.
   */
  function charsLeftIndex(string, chars) {
    var index = -1,
        length = string.length;

    while (++index < length && chars.indexOf(string.charAt(index)) > -1) {}
    return index;
  }

  /**
   * Used by `_.trim` and `_.trimRight` to get the index of the last character
   * of `string` that is not found in `chars`.
   *
   * @private
   * @param {string} string The string to inspect.
   * @param {string} chars The characters to find.
   * @returns {number} Returns the index of the last character not found in `chars`.
   */
  function charsRightIndex(string, chars) {
    var index = string.length;

    while (index-- && chars.indexOf(string.charAt(index)) > -1) {}
    return index;
  }

  /**
   * Used by `_.sortBy` to compare transformed elements of a collection and stable
   * sort them in ascending order.
   *
   * @private
   * @param {Object} object The object to compare.
   * @param {Object} other The other object to compare.
   * @returns {number} Returns the sort order indicator for `object`.
   */
  function compareAscending(object, other) {
    return baseCompareAscending(object.criteria, other.criteria) || (object.index - other.index);
  }

  /**
   * Used by `_.sortByOrder` to compare multiple properties of a value to another
   * and stable sort them.
   *
   * If `orders` is unspecified, all valuess are sorted in ascending order. Otherwise,
   * a value is sorted in ascending order if its corresponding order is "asc", and
   * descending if "desc".
   *
   * @private
   * @param {Object} object The object to compare.
   * @param {Object} other The other object to compare.
   * @param {boolean[]} orders The order to sort by for each property.
   * @returns {number} Returns the sort order indicator for `object`.
   */
  function compareMultiple(object, other, orders) {
    var index = -1,
        objCriteria = object.criteria,
        othCriteria = other.criteria,
        length = objCriteria.length,
        ordersLength = orders.length;

    while (++index < length) {
      var result = baseCompareAscending(objCriteria[index], othCriteria[index]);
      if (result) {
        if (index >= ordersLength) {
          return result;
        }
        var order = orders[index];
        return result * ((order === 'asc' || order === true) ? 1 : -1);
      }
    }
    // Fixes an `Array#sort` bug in the JS engine embedded in Adobe applications
    // that causes it, under certain circumstances, to provide the same value for
    // `object` and `other`. See https://github.com/jashkenas/underscore/pull/1247
    // for more details.
    //
    // This also ensures a stable sort in V8 and other engines.
    // See https://code.google.com/p/v8/issues/detail?id=90 for more details.
    return object.index - other.index;
  }

  /**
   * Used by `_.deburr` to convert latin-1 supplementary letters to basic latin letters.
   *
   * @private
   * @param {string} letter The matched letter to deburr.
   * @returns {string} Returns the deburred letter.
   */
  function deburrLetter(letter) {
    return deburredLetters[letter];
  }

  /**
   * Used by `_.escape` to convert characters to HTML entities.
   *
   * @private
   * @param {string} chr The matched character to escape.
   * @returns {string} Returns the escaped character.
   */
  function escapeHtmlChar(chr) {
    return htmlEscapes[chr];
  }

  /**
   * Used by `_.escapeRegExp` to escape characters for inclusion in compiled regexes.
   *
   * @private
   * @param {string} chr The matched character to escape.
   * @param {string} leadingChar The capture group for a leading character.
   * @param {string} whitespaceChar The capture group for a whitespace character.
   * @returns {string} Returns the escaped character.
   */
  function escapeRegExpChar(chr, leadingChar, whitespaceChar) {
    if (leadingChar) {
      chr = regexpEscapes[chr];
    } else if (whitespaceChar) {
      chr = stringEscapes[chr];
    }
    return '\\' + chr;
  }

  /**
   * Used by `_.template` to escape characters for inclusion in compiled string literals.
   *
   * @private
   * @param {string} chr The matched character to escape.
   * @returns {string} Returns the escaped character.
   */
  function escapeStringChar(chr) {
    return '\\' + stringEscapes[chr];
  }

  /**
   * Gets the index at which the first occurrence of `NaN` is found in `array`.
   *
   * @private
   * @param {Array} array The array to search.
   * @param {number} fromIndex The index to search from.
   * @param {boolean} [fromRight] Specify iterating from right to left.
   * @returns {number} Returns the index of the matched `NaN`, else `-1`.
   */
  function indexOfNaN(array, fromIndex, fromRight) {
    var length = array.length,
        index = fromIndex + (fromRight ? 0 : -1);

    while ((fromRight ? index-- : ++index < length)) {
      var other = array[index];
      if (other !== other) {
        return index;
      }
    }
    return -1;
  }

  /**
   * Checks if `value` is object-like.
   *
   * @private
   * @param {*} value The value to check.
   * @returns {boolean} Returns `true` if `value` is object-like, else `false`.
   */
  function isObjectLike(value) {
    return !!value && typeof value == 'object';
  }

  /**
   * Used by `trimmedLeftIndex` and `trimmedRightIndex` to determine if a
   * character code is whitespace.
   *
   * @private
   * @param {number} charCode The character code to inspect.
   * @returns {boolean} Returns `true` if `charCode` is whitespace, else `false`.
   */
  function isSpace(charCode) {
    return ((charCode <= 160 && (charCode >= 9 && charCode <= 13) || charCode == 32 || charCode == 160) || charCode == 5760 || charCode == 6158 ||
      (charCode >= 8192 && (charCode <= 8202 || charCode == 8232 || charCode == 8233 || charCode == 8239 || charCode == 8287 || charCode == 12288 || charCode == 65279)));
  }

  /**
   * Replaces all `placeholder` elements in `array` with an internal placeholder
   * and returns an array of their indexes.
   *
   * @private
   * @param {Array} array The array to modify.
   * @param {*} placeholder The placeholder to replace.
   * @returns {Array} Returns the new array of placeholder indexes.
   */
  function replaceHolders(array, placeholder) {
    var index = -1,
        length = array.length,
        resIndex = -1,
        result = [];

    while (++index < length) {
      if (array[index] === placeholder) {
        array[index] = PLACEHOLDER;
        result[++resIndex] = index;
      }
    }
    return result;
  }

  /**
   * An implementation of `_.uniq` optimized for sorted arrays without support
   * for callback shorthands and `this` binding.
   *
   * @private
   * @param {Array} array The array to inspect.
   * @param {Function} [iteratee] The function invoked per iteration.
   * @returns {Array} Returns the new duplicate-value-free array.
   */
  function sortedUniq(array, iteratee) {
    var seen,
        index = -1,
        length = array.length,
        resIndex = -1,
        result = [];

    while (++index < length) {
      var value = array[index],
          computed = iteratee ? iteratee(value, index, array) : value;

      if (!index || seen !== computed) {
        seen = computed;
        result[++resIndex] = value;
      }
    }
    return result;
  }

  /**
   * Used by `_.trim` and `_.trimLeft` to get the index of the first non-whitespace
   * character of `string`.
   *
   * @private
   * @param {string} string The string to inspect.
   * @returns {number} Returns the index of the first non-whitespace character.
   */
  function trimmedLeftIndex(string) {
    var index = -1,
        length = string.length;

    while (++index < length && isSpace(string.charCodeAt(index))) {}
    return index;
  }

  /**
   * Used by `_.trim` and `_.trimRight` to get the index of the last non-whitespace
   * character of `string`.
   *
   * @private
   * @param {string} string The string to inspect.
   * @returns {number} Returns the index of the last non-whitespace character.
   */
  function trimmedRightIndex(string) {
    var index = string.length;

    while (index-- && isSpace(string.charCodeAt(index))) {}
    return index;
  }

  /**
   * Used by `_.unescape` to convert HTML entities to characters.
   *
   * @private
   * @param {string} chr The matched character to unescape.
   * @returns {string} Returns the unescaped character.
   */
  function unescapeHtmlChar(chr) {
    return htmlUnescapes[chr];
  }

  /*--------------------------------------------------------------------------*/

  /**
   * Create a new pristine `lodash` function using the given `context` object.
   *
   * @static
   * @memberOf _
   * @category Utility
   * @param {Object} [context=root] The context object.
   * @returns {Function} Returns a new `lodash` function.
   * @example
   *
   * _.mixin({ 'foo': _.constant('foo') });
   *
   * var lodash = _.runInContext();
   * lodash.mixin({ 'bar': lodash.constant('bar') });
   *
   * _.isFunction(_.foo);
   * // => true
   * _.isFunction(_.bar);
   * // => false
   *
   * lodash.isFunction(lodash.foo);
   * // => false
   * lodash.isFunction(lodash.bar);
   * // => true
   *
   * // using `context` to mock `Date#getTime` use in `_.now`
   * var mock = _.runInContext({
   *   'Date': function() {
   *     return { 'getTime': getTimeMock };
   *   }
   * });
   *
   * // or creating a suped-up `defer` in Node.js
   * var defer = _.runInContext({ 'setTimeout': setImmediate }).defer;
   */
  function runInContext(context) {
    // Avoid issues with some ES3 environments that attempt to use values, named
    // after built-in constructors like `Object`, for the creation of literals.
    // ES5 clears this up by stating that literals must use built-in constructors.
    // See https://es5.github.io/#x11.1.5 for more details.
    context = context ? _.defaults(root.Object(), context, _.pick(root, contextProps)) : root;

    /** Native constructor references. */
    var Array = context.Array,
        Date = context.Date,
        Error = context.Error,
        Function = context.Function,
        Math = context.Math,
        Number = context.Number,
        Object = context.Object,
        RegExp = context.RegExp,
        String = context.String,
        TypeError = context.TypeError;

    /** Used for native method references. */
    var arrayProto = Array.prototype,
        objectProto = Object.prototype,
        stringProto = String.prototype;

    /** Used to resolve the decompiled source of functions. */
    var fnToString = Function.prototype.toString;

    /** Used to check objects for own properties. */
    var hasOwnProperty = objectProto.hasOwnProperty;

    /** Used to generate unique IDs. */
    var idCounter = 0;

    /**
     * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)
     * of values.
     */
    var objToString = objectProto.toString;

    /** Used to restore the original `_` reference in `_.noConflict`. */
    var oldDash = root._;

    /** Used to detect if a method is native. */
    var reIsNative = RegExp('^' +
      fnToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g, '\\$&')
      .replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, '$1.*?') + '$'
    );

    /** Native method references. */
    var ArrayBuffer = context.ArrayBuffer,
        clearTimeout = context.clearTimeout,
        parseFloat = context.parseFloat,
        pow = Math.pow,
        propertyIsEnumerable = objectProto.propertyIsEnumerable,
        Set = getNative(context, 'Set'),
        setTimeout = context.setTimeout,
        splice = arrayProto.splice,
        Uint8Array = context.Uint8Array,
        WeakMap = getNative(context, 'WeakMap');

    /* Native method references for those with the same name as other `lodash` methods. */
    var nativeCeil = Math.ceil,
        nativeCreate = getNative(Object, 'create'),
        nativeFloor = Math.floor,
        nativeIsArray = getNative(Array, 'isArray'),
        nativeIsFinite = context.isFinite,
        nativeKeys = getNative(Object, 'keys'),
        nativeMax = Math.max,
        nativeMin = Math.min,
        nativeNow = getNative(Date, 'now'),
        nativeParseInt = context.parseInt,
        nativeRandom = Math.random;

    /** Used as references for `-Infinity` and `Infinity`. */
    var NEGATIVE_INFINITY = Number.NEGATIVE_INFINITY,
        POSITIVE_INFINITY = Number.POSITIVE_INFINITY;

    /** Used as references for the maximum length and index of an array. */
    var MAX_ARRAY_LENGTH = 4294967295,
        MAX_ARRAY_INDEX = MAX_ARRAY_LENGTH - 1,
        HALF_MAX_ARRAY_LENGTH = MAX_ARRAY_LENGTH >>> 1;

    /**
     * Used as the [maximum length](http://ecma-international.org/ecma-262/6.0/#sec-number.max_safe_integer)
     * of an array-like value.
     */
    var MAX_SAFE_INTEGER = 9007199254740991;

    /** Used to store function metadata. */
    var metaMap = WeakMap && new WeakMap;

    /** Used to lookup unminified function names. */
    var realNames = {};

    /*------------------------------------------------------------------------*/

    /**
     * Creates a `lodash` object which wraps `value` to enable implicit chaining.
     * Methods that operate on and return arrays, collections, and functions can
     * be chained together. Methods that retrieve a single value or may return a
     * primitive value will automatically end the chain returning the unwrapped
     * value. Explicit chaining may be enabled using `_.chain`. The execution of
     * chained methods is lazy, that is, execution is deferred until `_#value`
     * is implicitly or explicitly called.
     *
     * Lazy evaluation allows several methods to support shortcut fusion. Shortcut
     * fusion is an optimization strategy which merge iteratee calls; this can help
     * to avoid the creation of intermediate data structures and greatly reduce the
     * number of iteratee executions.
     *
     * Chaining is supported in custom builds as long as the `_#value` method is
     * directly or indirectly included in the build.
     *
     * In addition to lodash methods, wrappers have `Array` and `String` methods.
     *
     * The wrapper `Array` methods are:
     * `concat`, `join`, `pop`, `push`, `reverse`, `shift`, `slice`, `sort`,
     * `splice`, and `unshift`
     *
     * The wrapper `String` methods are:
     * `replace` and `split`
     *
     * The wrapper methods that support shortcut fusion are:
     * `compact`, `drop`, `dropRight`, `dropRightWhile`, `dropWhile`, `filter`,
     * `first`, `initial`, `last`, `map`, `pluck`, `reject`, `rest`, `reverse`,
     * `slice`, `take`, `takeRight`, `takeRightWhile`, `takeWhile`, `toArray`,
     * and `where`
     *
     * The chainable wrapper methods are:
     * `after`, `ary`, `assign`, `at`, `before`, `bind`, `bindAll`, `bindKey`,
     * `callback`, `chain`, `chunk`, `commit`, `compact`, `concat`, `constant`,
     * `countBy`, `create`, `curry`, `debounce`, `defaults`, `defaultsDeep`,
     * `defer`, `delay`, `difference`, `drop`, `dropRight`, `dropRightWhile`,
     * `dropWhile`, `fill`, `filter`, `flatten`, `flattenDeep`, `flow`, `flowRight`,
     * `forEach`, `forEachRight`, `forIn`, `forInRight`, `forOwn`, `forOwnRight`,
     * `functions`, `groupBy`, `indexBy`, `initial`, `intersection`, `invert`,
     * `invoke`, `keys`, `keysIn`, `map`, `mapKeys`, `mapValues`, `matches`,
     * `matchesProperty`, `memoize`, `merge`, `method`, `methodOf`, `mixin`,
     * `modArgs`, `negate`, `omit`, `once`, `pairs`, `partial`, `partialRight`,
     * `partition`, `pick`, `plant`, `pluck`, `property`, `propertyOf`, `pull`,
     * `pullAt`, `push`, `range`, `rearg`, `reject`, `remove`, `rest`, `restParam`,
     * `reverse`, `set`, `shuffle`, `slice`, `sort`, `sortBy`, `sortByAll`,
     * `sortByOrder`, `splice`, `spread`, `take`, `takeRight`, `takeRightWhile`,
     * `takeWhile`, `tap`, `throttle`, `thru`, `times`, `toArray`, `toPlainObject`,
     * `transform`, `union`, `uniq`, `unshift`, `unzip`, `unzipWith`, `values`,
     * `valuesIn`, `where`, `without`, `wrap`, `xor`, `zip`, `zipObject`, `zipWith`
     *
     * The wrapper methods that are **not** chainable by default are:
     * `add`, `attempt`, `camelCase`, `capitalize`, `ceil`, `clone`, `cloneDeep`,
     * `deburr`, `endsWith`, `escape`, `escapeRegExp`, `every`, `find`, `findIndex`,
     * `findKey`, `findLast`, `findLastIndex`, `findLastKey`, `findWhere`, `first`,
     * `floor`, `get`, `gt`, `gte`, `has`, `identity`, `includes`, `indexOf`,
     * `inRange`, `isArguments`, `isArray`, `isBoolean`, `isDate`, `isElement`,
     * `isEmpty`, `isEqual`, `isError`, `isFinite` `isFunction`, `isMatch`,
     * `isNative`, `isNaN`, `isNull`, `isNumber`, `isObject`, `isPlainObject`,
     * `isRegExp`, `isString`, `isUndefined`, `isTypedArray`, `join`, `kebabCase`,
     * `last`, `lastIndexOf`, `lt`, `lte`, `max`, `min`, `noConflict`, `noop`,
     * `now`, `pad`, `padLeft`, `padRight`, `parseInt`, `pop`, `random`, `reduce`,
     * `reduceRight`, `repeat`, `result`, `round`, `runInContext`, `shift`, `size`,
     * `snakeCase`, `some`, `sortedIndex`, `sortedLastIndex`, `startCase`,
     * `startsWith`, `sum`, `template`, `trim`, `trimLeft`, `trimRight`, `trunc`,
     * `unescape`, `uniqueId`, `value`, and `words`
     *
     * The wrapper method `sample` will return a wrapped value when `n` is provided,
     * otherwise an unwrapped value is returned.
     *
     * @name _
     * @constructor
     * @category Chain
     * @param {*} value The value to wrap in a `lodash` instance.
     * @returns {Object} Returns the new `lodash` wrapper instance.
     * @example
     *
     * var wrapped = _([1, 2, 3]);
     *
     * // returns an unwrapped value
     * wrapped.reduce(function(total, n) {
     *   return total + n;
     * });
     * // => 6
     *
     * // returns a wrapped value
     * var squares = wrapped.map(function(n) {
     *   return n * n;
     * });
     *
     * _.isArray(squares);
     * // => false
     *
     * _.isArray(squares.value());
     * // => true
     */
    function lodash(value) {
      if (isObjectLike(value) && !isArray(value) && !(value instanceof LazyWrapper)) {
        if (value instanceof LodashWrapper) {
          return value;
        }
        if (hasOwnProperty.call(value, '__chain__') && hasOwnProperty.call(value, '__wrapped__')) {
          return wrapperClone(value);
        }
      }
      return new LodashWrapper(value);
    }

    /**
     * The function whose prototype all chaining wrappers inherit from.
     *
     * @private
     */
    function baseLodash() {
      // No operation performed.
    }

    /**
     * The base constructor for creating `lodash` wrapper objects.
     *
     * @private
     * @param {*} value The value to wrap.
     * @param {boolean} [chainAll] Enable chaining for all wrapper methods.
     * @param {Array} [actions=[]] Actions to peform to resolve the unwrapped value.
     */
    function LodashWrapper(value, chainAll, actions) {
      this.__wrapped__ = value;
      this.__actions__ = actions || [];
      this.__chain__ = !!chainAll;
    }

    /**
     * An object environment feature flags.
     *
     * @static
     * @memberOf _
     * @type Object
     */
    var support = lodash.support = {};

    /**
     * By default, the template delimiters used by lodash are like those in
     * embedded Ruby (ERB). Change the following template settings to use
     * alternative delimiters.
     *
     * @static
     * @memberOf _
     * @type Object
     */
    lodash.templateSettings = {

      /**
       * Used to detect `data` property values to be HTML-escaped.
       *
       * @memberOf _.templateSettings
       * @type RegExp
       */
      'escape': reEscape,

      /**
       * Used to detect code to be evaluated.
       *
       * @memberOf _.templateSettings
       * @type RegExp
       */
      'evaluate': reEvaluate,

      /**
       * Used to detect `data` property values to inject.
       *
       * @memberOf _.templateSettings
       * @type RegExp
       */
      'interpolate': reInterpolate,

      /**
       * Used to reference the data object in the template text.
       *
       * @memberOf _.templateSettings
       * @type string
       */
      'variable': '',

      /**
       * Used to import variables into the compiled template.
       *
       * @memberOf _.templateSettings
       * @type Object
       */
      'imports': {

        /**
         * A reference to the `lodash` function.
         *
         * @memberOf _.templateSettings.imports
         * @type Function
         */
        '_': lodash
      }
    };

    /*------------------------------------------------------------------------*/

    /**
     * Creates a lazy wrapper object which wraps `value` to enable lazy evaluation.
     *
     * @private
     * @param {*} value The value to wrap.
     */
    function LazyWrapper(value) {
      this.__wrapped__ = value;
      this.__actions__ = [];
      this.__dir__ = 1;
      this.__filtered__ = false;
      this.__iteratees__ = [];
      this.__takeCount__ = POSITIVE_INFINITY;
      this.__views__ = [];
    }

    /**
     * Creates a clone of the lazy wrapper object.
     *
     * @private
     * @name clone
     * @memberOf LazyWrapper
     * @returns {Object} Returns the cloned `LazyWrapper` object.
     */
    function lazyClone() {
      var result = new LazyWrapper(this.__wrapped__);
      result.__actions__ = arrayCopy(this.__actions__);
      result.__dir__ = this.__dir__;
      result.__filtered__ = this.__filtered__;
      result.__iteratees__ = arrayCopy(this.__iteratees__);
      result.__takeCount__ = this.__takeCount__;
      result.__views__ = arrayCopy(this.__views__);
      return result;
    }

    /**
     * Reverses the direction of lazy iteration.
     *
     * @private
     * @name reverse
     * @memberOf LazyWrapper
     * @returns {Object} Returns the new reversed `LazyWrapper` object.
     */
    function lazyReverse() {
      if (this.__filtered__) {
        var result = new LazyWrapper(this);
        result.__dir__ = -1;
        result.__filtered__ = true;
      } else {
        result = this.clone();
        result.__dir__ *= -1;
      }
      return result;
    }

    /**
     * Extracts the unwrapped value from its lazy wrapper.
     *
     * @private
     * @name value
     * @memberOf LazyWrapper
     * @returns {*} Returns the unwrapped value.
     */
    function lazyValue() {
      var array = this.__wrapped__.value(),
          dir = this.__dir__,
          isArr = isArray(array),
          isRight = dir < 0,
          arrLength = isArr ? array.length : 0,
          view = getView(0, arrLength, this.__views__),
          start = view.start,
          end = view.end,
          length = end - start,
          index = isRight ? end : (start - 1),
          iteratees = this.__iteratees__,
          iterLength = iteratees.length,
          resIndex = 0,
          takeCount = nativeMin(length, this.__takeCount__);

      if (!isArr || arrLength < LARGE_ARRAY_SIZE || (arrLength == length && takeCount == length)) {
        return baseWrapperValue((isRight && isArr) ? array.reverse() : array, this.__actions__);
      }
      var result = [];

      outer:
      while (length-- && resIndex < takeCount) {
        index += dir;

        var iterIndex = -1,
            value = array[index];

        while (++iterIndex < iterLength) {
          var data = iteratees[iterIndex],
              iteratee = data.iteratee,
              type = data.type,
              computed = iteratee(value);

          if (type == LAZY_MAP_FLAG) {
            value = computed;
          } else if (!computed) {
            if (type == LAZY_FILTER_FLAG) {
              continue outer;
            } else {
              break outer;
            }
          }
        }
        result[resIndex++] = value;
      }
      return result;
    }

    /*------------------------------------------------------------------------*/

    /**
     * Creates a cache object to store key/value pairs.
     *
     * @private
     * @static
     * @name Cache
     * @memberOf _.memoize
     */
    function MapCache() {
      this.__data__ = {};
    }

    /**
     * Removes `key` and its value from the cache.
     *
     * @private
     * @name delete
     * @memberOf _.memoize.Cache
     * @param {string} key The key of the value to remove.
     * @returns {boolean} Returns `true` if the entry was removed successfully, else `false`.
     */
    function mapDelete(key) {
      return this.has(key) && delete this.__data__[key];
    }

    /**
     * Gets the cached value for `key`.
     *
     * @private
     * @name get
     * @memberOf _.memoize.Cache
     * @param {string} key The key of the value to get.
     * @returns {*} Returns the cached value.
     */
    function mapGet(key) {
      return key == '__proto__' ? undefined : this.__data__[key];
    }

    /**
     * Checks if a cached value for `key` exists.
     *
     * @private
     * @name has
     * @memberOf _.memoize.Cache
     * @param {string} key The key of the entry to check.
     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
     */
    function mapHas(key) {
      return key != '__proto__' && hasOwnProperty.call(this.__data__, key);
    }

    /**
     * Sets `value` to `key` of the cache.
     *
     * @private
     * @name set
     * @memberOf _.memoize.Cache
     * @param {string} key The key of the value to cache.
     * @param {*} value The value to cache.
     * @returns {Object} Returns the cache object.
     */
    function mapSet(key, value) {
      if (key != '__proto__') {
        this.__data__[key] = value;
      }
      return this;
    }

    /*------------------------------------------------------------------------*/

    /**
     *
     * Creates a cache object to store unique values.
     *
     * @private
     * @param {Array} [values] The values to cache.
     */
    function SetCache(values) {
      var length = values ? values.length : 0;

      this.data = { 'hash': nativeCreate(null), 'set': new Set };
      while (length--) {
        this.push(values[length]);
      }
    }

    /**
     * Checks if `value` is in `cache` mimicking the return signature of
     * `_.indexOf` by returning `0` if the value is found, else `-1`.
     *
     * @private
     * @param {Object} cache The cache to search.
     * @param {*} value The value to search for.
     * @returns {number} Returns `0` if `value` is found, else `-1`.
     */
    function cacheIndexOf(cache, value) {
      var data = cache.data,
          result = (typeof value == 'string' || isObject(value)) ? data.set.has(value) : data.hash[value];

      return result ? 0 : -1;
    }

    /**
     * Adds `value` to the cache.
     *
     * @private
     * @name push
     * @memberOf SetCache
     * @param {*} value The value to cache.
     */
    function cachePush(value) {
      var data = this.data;
      if (typeof value == 'string' || isObject(value)) {
        data.set.add(value);
      } else {
        data.hash[value] = true;
      }
    }

    /*------------------------------------------------------------------------*/

    /**
     * Creates a new array joining `array` with `other`.
     *
     * @private
     * @param {Array} array The array to join.
     * @param {Array} other The other array to join.
     * @returns {Array} Returns the new concatenated array.
     */
    function arrayConcat(array, other) {
      var index = -1,
          length = array.length,
          othIndex = -1,
          othLength = other.length,
          result = Array(length + othLength);

      while (++index < length) {
        result[index] = array[index];
      }
      while (++othIndex < othLength) {
        result[index++] = other[othIndex];
      }
      return result;
    }

    /**
     * Copies the values of `source` to `array`.
     *
     * @private
     * @param {Array} source The array to copy values from.
     * @param {Array} [array=[]] The array to copy values to.
     * @returns {Array} Returns `array`.
     */
    function arrayCopy(source, array) {
      var index = -1,
          length = source.length;

      array || (array = Array(length));
      while (++index < length) {
        array[index] = source[index];
      }
      return array;
    }

    /**
     * A specialized version of `_.forEach` for arrays without support for callback
     * shorthands and `this` binding.
     *
     * @private
     * @param {Array} array The array to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @returns {Array} Returns `array`.
     */
    function arrayEach(array, iteratee) {
      var index = -1,
          length = array.length;

      while (++index < length) {
        if (iteratee(array[index], index, array) === false) {
          break;
        }
      }
      return array;
    }

    /**
     * A specialized version of `_.forEachRight` for arrays without support for
     * callback shorthands and `this` binding.
     *
     * @private
     * @param {Array} array The array to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @returns {Array} Returns `array`.
     */
    function arrayEachRight(array, iteratee) {
      var length = array.length;

      while (length--) {
        if (iteratee(array[length], length, array) === false) {
          break;
        }
      }
      return array;
    }

    /**
     * A specialized version of `_.every` for arrays without support for callback
     * shorthands and `this` binding.
     *
     * @private
     * @param {Array} array The array to iterate over.
     * @param {Function} predicate The function invoked per iteration.
     * @returns {boolean} Returns `true` if all elements pass the predicate check,
     *  else `false`.
     */
    function arrayEvery(array, predicate) {
      var index = -1,
          length = array.length;

      while (++index < length) {
        if (!predicate(array[index], index, array)) {
          return false;
        }
      }
      return true;
    }

    /**
     * A specialized version of `baseExtremum` for arrays which invokes `iteratee`
     * with one argument: (value).
     *
     * @private
     * @param {Array} array The array to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @param {Function} comparator The function used to compare values.
     * @param {*} exValue The initial extremum value.
     * @returns {*} Returns the extremum value.
     */
    function arrayExtremum(array, iteratee, comparator, exValue) {
      var index = -1,
          length = array.length,
          computed = exValue,
          result = computed;

      while (++index < length) {
        var value = array[index],
            current = +iteratee(value);

        if (comparator(current, computed)) {
          computed = current;
          result = value;
        }
      }
      return result;
    }

    /**
     * A specialized version of `_.filter` for arrays without support for callback
     * shorthands and `this` binding.
     *
     * @private
     * @param {Array} array The array to iterate over.
     * @param {Function} predicate The function invoked per iteration.
     * @returns {Array} Returns the new filtered array.
     */
    function arrayFilter(array, predicate) {
      var index = -1,
          length = array.length,
          resIndex = -1,
          result = [];

      while (++index < length) {
        var value = array[index];
        if (predicate(value, index, array)) {
          result[++resIndex] = value;
        }
      }
      return result;
    }

    /**
     * A specialized version of `_.map` for arrays without support for callback
     * shorthands and `this` binding.
     *
     * @private
     * @param {Array} array The array to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @returns {Array} Returns the new mapped array.
     */
    function arrayMap(array, iteratee) {
      var index = -1,
          length = array.length,
          result = Array(length);

      while (++index < length) {
        result[index] = iteratee(array[index], index, array);
      }
      return result;
    }

    /**
     * Appends the elements of `values` to `array`.
     *
     * @private
     * @param {Array} array The array to modify.
     * @param {Array} values The values to append.
     * @returns {Array} Returns `array`.
     */
    function arrayPush(array, values) {
      var index = -1,
          length = values.length,
          offset = array.length;

      while (++index < length) {
        array[offset + index] = values[index];
      }
      return array;
    }

    /**
     * A specialized version of `_.reduce` for arrays without support for callback
     * shorthands and `this` binding.
     *
     * @private
     * @param {Array} array The array to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @param {*} [accumulator] The initial value.
     * @param {boolean} [initFromArray] Specify using the first element of `array`
     *  as the initial value.
     * @returns {*} Returns the accumulated value.
     */
    function arrayReduce(array, iteratee, accumulator, initFromArray) {
      var index = -1,
          length = array.length;

      if (initFromArray && length) {
        accumulator = array[++index];
      }
      while (++index < length) {
        accumulator = iteratee(accumulator, array[index], index, array);
      }
      return accumulator;
    }

    /**
     * A specialized version of `_.reduceRight` for arrays without support for
     * callback shorthands and `this` binding.
     *
     * @private
     * @param {Array} array The array to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @param {*} [accumulator] The initial value.
     * @param {boolean} [initFromArray] Specify using the last element of `array`
     *  as the initial value.
     * @returns {*} Returns the accumulated value.
     */
    function arrayReduceRight(array, iteratee, accumulator, initFromArray) {
      var length = array.length;
      if (initFromArray && length) {
        accumulator = array[--length];
      }
      while (length--) {
        accumulator = iteratee(accumulator, array[length], length, array);
      }
      return accumulator;
    }

    /**
     * A specialized version of `_.some` for arrays without support for callback
     * shorthands and `this` binding.
     *
     * @private
     * @param {Array} array The array to iterate over.
     * @param {Function} predicate The function invoked per iteration.
     * @returns {boolean} Returns `true` if any element passes the predicate check,
     *  else `false`.
     */
    function arraySome(array, predicate) {
      var index = -1,
          length = array.length;

      while (++index < length) {
        if (predicate(array[index], index, array)) {
          return true;
        }
      }
      return false;
    }

    /**
     * A specialized version of `_.sum` for arrays without support for callback
     * shorthands and `this` binding..
     *
     * @private
     * @param {Array} array The array to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @returns {number} Returns the sum.
     */
    function arraySum(array, iteratee) {
      var length = array.length,
          result = 0;

      while (length--) {
        result += +iteratee(array[length]) || 0;
      }
      return result;
    }

    /**
     * Used by `_.defaults` to customize its `_.assign` use.
     *
     * @private
     * @param {*} objectValue The destination object property value.
     * @param {*} sourceValue The source object property value.
     * @returns {*} Returns the value to assign to the destination object.
     */
    function assignDefaults(objectValue, sourceValue) {
      return objectValue === undefined ? sourceValue : objectValue;
    }

    /**
     * Used by `_.template` to customize its `_.assign` use.
     *
     * **Note:** This function is like `assignDefaults` except that it ignores
     * inherited property values when checking if a property is `undefined`.
     *
     * @private
     * @param {*} objectValue The destination object property value.
     * @param {*} sourceValue The source object property value.
     * @param {string} key The key associated with the object and source values.
     * @param {Object} object The destination object.
     * @returns {*} Returns the value to assign to the destination object.
     */
    function assignOwnDefaults(objectValue, sourceValue, key, object) {
      return (objectValue === undefined || !hasOwnProperty.call(object, key))
        ? sourceValue
        : objectValue;
    }

    /**
     * A specialized version of `_.assign` for customizing assigned values without
     * support for argument juggling, multiple sources, and `this` binding `customizer`
     * functions.
     *
     * @private
     * @param {Object} object The destination object.
     * @param {Object} source The source object.
     * @param {Function} customizer The function to customize assigned values.
     * @returns {Object} Returns `object`.
     */
    function assignWith(object, source, customizer) {
      var index = -1,
          props = keys(source),
          length = props.length;

      while (++index < length) {
        var key = props[index],
            value = object[key],
            result = customizer(value, source[key], key, object, source);

        if ((result === result ? (result !== value) : (value === value)) ||
            (value === undefined && !(key in object))) {
          object[key] = result;
        }
      }
      return object;
    }

    /**
     * The base implementation of `_.assign` without support for argument juggling,
     * multiple sources, and `customizer` functions.
     *
     * @private
     * @param {Object} object The destination object.
     * @param {Object} source The source object.
     * @returns {Object} Returns `object`.
     */
    function baseAssign(object, source) {
      return source == null
        ? object
        : baseCopy(source, keys(source), object);
    }

    /**
     * The base implementation of `_.at` without support for string collections
     * and individual key arguments.
     *
     * @private
     * @param {Array|Object} collection The collection to iterate over.
     * @param {number[]|string[]} props The property names or indexes of elements to pick.
     * @returns {Array} Returns the new array of picked elements.
     */
    function baseAt(collection, props) {
      var index = -1,
          isNil = collection == null,
          isArr = !isNil && isArrayLike(collection),
          length = isArr ? collection.length : 0,
          propsLength = props.length,
          result = Array(propsLength);

      while(++index < propsLength) {
        var key = props[index];
        if (isArr) {
          result[index] = isIndex(key, length) ? collection[key] : undefined;
        } else {
          result[index] = isNil ? undefined : collection[key];
        }
      }
      return result;
    }

    /**
     * Copies properties of `source` to `object`.
     *
     * @private
     * @param {Object} source The object to copy properties from.
     * @param {Array} props The property names to copy.
     * @param {Object} [object={}] The object to copy properties to.
     * @returns {Object} Returns `object`.
     */
    function baseCopy(source, props, object) {
      object || (object = {});

      var index = -1,
          length = props.length;

      while (++index < length) {
        var key = props[index];
        object[key] = source[key];
      }
      return object;
    }

    /**
     * The base implementation of `_.callback` which supports specifying the
     * number of arguments to provide to `func`.
     *
     * @private
     * @param {*} [func=_.identity] The value to convert to a callback.
     * @param {*} [thisArg] The `this` binding of `func`.
     * @param {number} [argCount] The number of arguments to provide to `func`.
     * @returns {Function} Returns the callback.
     */
    function baseCallback(func, thisArg, argCount) {
      var type = typeof func;
      if (type == 'function') {
        return thisArg === undefined
          ? func
          : bindCallback(func, thisArg, argCount);
      }
      if (func == null) {
        return identity;
      }
      if (type == 'object') {
        return baseMatches(func);
      }
      return thisArg === undefined
        ? property(func)
        : baseMatchesProperty(func, thisArg);
    }

    /**
     * The base implementation of `_.clone` without support for argument juggling
     * and `this` binding `customizer` functions.
     *
     * @private
     * @param {*} value The value to clone.
     * @param {boolean} [isDeep] Specify a deep clone.
     * @param {Function} [customizer] The function to customize cloning values.
     * @param {string} [key] The key of `value`.
     * @param {Object} [object] The object `value` belongs to.
     * @param {Array} [stackA=[]] Tracks traversed source objects.
     * @param {Array} [stackB=[]] Associates clones with source counterparts.
     * @returns {*} Returns the cloned value.
     */
    function baseClone(value, isDeep, customizer, key, object, stackA, stackB) {
      var result;
      if (customizer) {
        result = object ? customizer(value, key, object) : customizer(value);
      }
      if (result !== undefined) {
        return result;
      }
      if (!isObject(value)) {
        return value;
      }
      var isArr = isArray(value);
      if (isArr) {
        result = initCloneArray(value);
        if (!isDeep) {
          return arrayCopy(value, result);
        }
      } else {
        var tag = objToString.call(value),
            isFunc = tag == funcTag;

        if (tag == objectTag || tag == argsTag || (isFunc && !object)) {
          result = initCloneObject(isFunc ? {} : value);
          if (!isDeep) {
            return baseAssign(result, value);
          }
        } else {
          return cloneableTags[tag]
            ? initCloneByTag(value, tag, isDeep)
            : (object ? value : {});
        }
      }
      // Check for circular references and return its corresponding clone.
      stackA || (stackA = []);
      stackB || (stackB = []);

      var length = stackA.length;
      while (length--) {
        if (stackA[length] == value) {
          return stackB[length];
        }
      }
      // Add the source value to the stack of traversed objects and associate it with its clone.
      stackA.push(value);
      stackB.push(result);

      // Recursively populate clone (susceptible to call stack limits).
      (isArr ? arrayEach : baseForOwn)(value, function(subValue, key) {
        result[key] = baseClone(subValue, isDeep, customizer, key, value, stackA, stackB);
      });
      return result;
    }

    /**
     * The base implementation of `_.create` without support for assigning
     * properties to the created object.
     *
     * @private
     * @param {Object} prototype The object to inherit from.
     * @returns {Object} Returns the new object.
     */
    var baseCreate = (function() {
      function object() {}
      return function(prototype) {
        if (isObject(prototype)) {
          object.prototype = prototype;
          var result = new object;
          object.prototype = undefined;
        }
        return result || {};
      };
    }());

    /**
     * The base implementation of `_.delay` and `_.defer` which accepts an index
     * of where to slice the arguments to provide to `func`.
     *
     * @private
     * @param {Function} func The function to delay.
     * @param {number} wait The number of milliseconds to delay invocation.
     * @param {Object} args The arguments provide to `func`.
     * @returns {number} Returns the timer id.
     */
    function baseDelay(func, wait, args) {
      if (typeof func != 'function') {
        throw new TypeError(FUNC_ERROR_TEXT);
      }
      return setTimeout(function() { func.apply(undefined, args); }, wait);
    }

    /**
     * The base implementation of `_.difference` which accepts a single array
     * of values to exclude.
     *
     * @private
     * @param {Array} array The array to inspect.
     * @param {Array} values The values to exclude.
     * @returns {Array} Returns the new array of filtered values.
     */
    function baseDifference(array, values) {
      var length = array ? array.length : 0,
          result = [];

      if (!length) {
        return result;
      }
      var index = -1,
          indexOf = getIndexOf(),
          isCommon = indexOf == baseIndexOf,
          cache = (isCommon && values.length >= LARGE_ARRAY_SIZE) ? createCache(values) : null,
          valuesLength = values.length;

      if (cache) {
        indexOf = cacheIndexOf;
        isCommon = false;
        values = cache;
      }
      outer:
      while (++index < length) {
        var value = array[index];

        if (isCommon && value === value) {
          var valuesIndex = valuesLength;
          while (valuesIndex--) {
            if (values[valuesIndex] === value) {
              continue outer;
            }
          }
          result.push(value);
        }
        else if (indexOf(values, value, 0) < 0) {
          result.push(value);
        }
      }
      return result;
    }

    /**
     * The base implementation of `_.forEach` without support for callback
     * shorthands and `this` binding.
     *
     * @private
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @returns {Array|Object|string} Returns `collection`.
     */
    var baseEach = createBaseEach(baseForOwn);

    /**
     * The base implementation of `_.forEachRight` without support for callback
     * shorthands and `this` binding.
     *
     * @private
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @returns {Array|Object|string} Returns `collection`.
     */
    var baseEachRight = createBaseEach(baseForOwnRight, true);

    /**
     * The base implementation of `_.every` without support for callback
     * shorthands and `this` binding.
     *
     * @private
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} predicate The function invoked per iteration.
     * @returns {boolean} Returns `true` if all elements pass the predicate check,
     *  else `false`
     */
    function baseEvery(collection, predicate) {
      var result = true;
      baseEach(collection, function(value, index, collection) {
        result = !!predicate(value, index, collection);
        return result;
      });
      return result;
    }

    /**
     * Gets the extremum value of `collection` invoking `iteratee` for each value
     * in `collection` to generate the criterion by which the value is ranked.
     * The `iteratee` is invoked with three arguments: (value, index|key, collection).
     *
     * @private
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @param {Function} comparator The function used to compare values.
     * @param {*} exValue The initial extremum value.
     * @returns {*} Returns the extremum value.
     */
    function baseExtremum(collection, iteratee, comparator, exValue) {
      var computed = exValue,
          result = computed;

      baseEach(collection, function(value, index, collection) {
        var current = +iteratee(value, index, collection);
        if (comparator(current, computed) || (current === exValue && current === result)) {
          computed = current;
          result = value;
        }
      });
      return result;
    }

    /**
     * The base implementation of `_.fill` without an iteratee call guard.
     *
     * @private
     * @param {Array} array The array to fill.
     * @param {*} value The value to fill `array` with.
     * @param {number} [start=0] The start position.
     * @param {number} [end=array.length] The end position.
     * @returns {Array} Returns `array`.
     */
    function baseFill(array, value, start, end) {
      var length = array.length;

      start = start == null ? 0 : (+start || 0);
      if (start < 0) {
        start = -start > length ? 0 : (length + start);
      }
      end = (end === undefined || end > length) ? length : (+end || 0);
      if (end < 0) {
        end += length;
      }
      length = start > end ? 0 : (end >>> 0);
      start >>>= 0;

      while (start < length) {
        array[start++] = value;
      }
      return array;
    }

    /**
     * The base implementation of `_.filter` without support for callback
     * shorthands and `this` binding.
     *
     * @private
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} predicate The function invoked per iteration.
     * @returns {Array} Returns the new filtered array.
     */
    function baseFilter(collection, predicate) {
      var result = [];
      baseEach(collection, function(value, index, collection) {
        if (predicate(value, index, collection)) {
          result.push(value);
        }
      });
      return result;
    }

    /**
     * The base implementation of `_.find`, `_.findLast`, `_.findKey`, and `_.findLastKey`,
     * without support for callback shorthands and `this` binding, which iterates
     * over `collection` using the provided `eachFunc`.
     *
     * @private
     * @param {Array|Object|string} collection The collection to search.
     * @param {Function} predicate The function invoked per iteration.
     * @param {Function} eachFunc The function to iterate over `collection`.
     * @param {boolean} [retKey] Specify returning the key of the found element
     *  instead of the element itself.
     * @returns {*} Returns the found element or its key, else `undefined`.
     */
    function baseFind(collection, predicate, eachFunc, retKey) {
      var result;
      eachFunc(collection, function(value, key, collection) {
        if (predicate(value, key, collection)) {
          result = retKey ? key : value;
          return false;
        }
      });
      return result;
    }

    /**
     * The base implementation of `_.flatten` with added support for restricting
     * flattening and specifying the start index.
     *
     * @private
     * @param {Array} array The array to flatten.
     * @param {boolean} [isDeep] Specify a deep flatten.
     * @param {boolean} [isStrict] Restrict flattening to arrays-like objects.
     * @param {Array} [result=[]] The initial result value.
     * @returns {Array} Returns the new flattened array.
     */
    function baseFlatten(array, isDeep, isStrict, result) {
      result || (result = []);

      var index = -1,
          length = array.length;

      while (++index < length) {
        var value = array[index];
        if (isObjectLike(value) && isArrayLike(value) &&
            (isStrict || isArray(value) || isArguments(value))) {
          if (isDeep) {
            // Recursively flatten arrays (susceptible to call stack limits).
            baseFlatten(value, isDeep, isStrict, result);
          } else {
            arrayPush(result, value);
          }
        } else if (!isStrict) {
          result[result.length] = value;
        }
      }
      return result;
    }

    /**
     * The base implementation of `baseForIn` and `baseForOwn` which iterates
     * over `object` properties returned by `keysFunc` invoking `iteratee` for
     * each property. Iteratee functions may exit iteration early by explicitly
     * returning `false`.
     *
     * @private
     * @param {Object} object The object to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @param {Function} keysFunc The function to get the keys of `object`.
     * @returns {Object} Returns `object`.
     */
    var baseFor = createBaseFor();

    /**
     * This function is like `baseFor` except that it iterates over properties
     * in the opposite order.
     *
     * @private
     * @param {Object} object The object to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @param {Function} keysFunc The function to get the keys of `object`.
     * @returns {Object} Returns `object`.
     */
    var baseForRight = createBaseFor(true);

    /**
     * The base implementation of `_.forIn` without support for callback
     * shorthands and `this` binding.
     *
     * @private
     * @param {Object} object The object to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @returns {Object} Returns `object`.
     */
    function baseForIn(object, iteratee) {
      return baseFor(object, iteratee, keysIn);
    }

    /**
     * The base implementation of `_.forOwn` without support for callback
     * shorthands and `this` binding.
     *
     * @private
     * @param {Object} object The object to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @returns {Object} Returns `object`.
     */
    function baseForOwn(object, iteratee) {
      return baseFor(object, iteratee, keys);
    }

    /**
     * The base implementation of `_.forOwnRight` without support for callback
     * shorthands and `this` binding.
     *
     * @private
     * @param {Object} object The object to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @returns {Object} Returns `object`.
     */
    function baseForOwnRight(object, iteratee) {
      return baseForRight(object, iteratee, keys);
    }

    /**
     * The base implementation of `_.functions` which creates an array of
     * `object` function property names filtered from those provided.
     *
     * @private
     * @param {Object} object The object to inspect.
     * @param {Array} props The property names to filter.
     * @returns {Array} Returns the new array of filtered property names.
     */
    function baseFunctions(object, props) {
      var index = -1,
          length = props.length,
          resIndex = -1,
          result = [];

      while (++index < length) {
        var key = props[index];
        if (isFunction(object[key])) {
          result[++resIndex] = key;
        }
      }
      return result;
    }

    /**
     * The base implementation of `get` without support for string paths
     * and default values.
     *
     * @private
     * @param {Object} object The object to query.
     * @param {Array} path The path of the property to get.
     * @param {string} [pathKey] The key representation of path.
     * @returns {*} Returns the resolved value.
     */
    function baseGet(object, path, pathKey) {
      if (object == null) {
        return;
      }
      if (pathKey !== undefined && pathKey in toObject(object)) {
        path = [pathKey];
      }
      var index = 0,
          length = path.length;

      while (object != null && index < length) {
        object = object[path[index++]];
      }
      return (index && index == length) ? object : undefined;
    }

    /**
     * The base implementation of `_.isEqual` without support for `this` binding
     * `customizer` functions.
     *
     * @private
     * @param {*} value The value to compare.
     * @param {*} other The other value to compare.
     * @param {Function} [customizer] The function to customize comparing values.
     * @param {boolean} [isLoose] Specify performing partial comparisons.
     * @param {Array} [stackA] Tracks traversed `value` objects.
     * @param {Array} [stackB] Tracks traversed `other` objects.
     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.
     */
    function baseIsEqual(value, other, customizer, isLoose, stackA, stackB) {
      if (value === other) {
        return true;
      }
      if (value == null || other == null || (!isObject(value) && !isObjectLike(other))) {
        return value !== value && other !== other;
      }
      return baseIsEqualDeep(value, other, baseIsEqual, customizer, isLoose, stackA, stackB);
    }

    /**
     * A specialized version of `baseIsEqual` for arrays and objects which performs
     * deep comparisons and tracks traversed objects enabling objects with circular
     * references to be compared.
     *
     * @private
     * @param {Object} object The object to compare.
     * @param {Object} other The other object to compare.
     * @param {Function} equalFunc The function to determine equivalents of values.
     * @param {Function} [customizer] The function to customize comparing objects.
     * @param {boolean} [isLoose] Specify performing partial comparisons.
     * @param {Array} [stackA=[]] Tracks traversed `value` objects.
     * @param {Array} [stackB=[]] Tracks traversed `other` objects.
     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.
     */
    function baseIsEqualDeep(object, other, equalFunc, customizer, isLoose, stackA, stackB) {
      var objIsArr = isArray(object),
          othIsArr = isArray(other),
          objTag = arrayTag,
          othTag = arrayTag;

      if (!objIsArr) {
        objTag = objToString.call(object);
        if (objTag == argsTag) {
          objTag = objectTag;
        } else if (objTag != objectTag) {
          objIsArr = isTypedArray(object);
        }
      }
      if (!othIsArr) {
        othTag = objToString.call(other);
        if (othTag == argsTag) {
          othTag = objectTag;
        } else if (othTag != objectTag) {
          othIsArr = isTypedArray(other);
        }
      }
      var objIsObj = objTag == objectTag,
          othIsObj = othTag == objectTag,
          isSameTag = objTag == othTag;

      if (isSameTag && !(objIsArr || objIsObj)) {
        return equalByTag(object, other, objTag);
      }
      if (!isLoose) {
        var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),
            othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');

        if (objIsWrapped || othIsWrapped) {
          return equalFunc(objIsWrapped ? object.value() : object, othIsWrapped ? other.value() : other, customizer, isLoose, stackA, stackB);
        }
      }
      if (!isSameTag) {
        return false;
      }
      // Assume cyclic values are equal.
      // For more information on detecting circular references see https://es5.github.io/#JO.
      stackA || (stackA = []);
      stackB || (stackB = []);

      var length = stackA.length;
      while (length--) {
        if (stackA[length] == object) {
          return stackB[length] == other;
        }
      }
      // Add `object` and `other` to the stack of traversed objects.
      stackA.push(object);
      stackB.push(other);

      var result = (objIsArr ? equalArrays : equalObjects)(object, other, equalFunc, customizer, isLoose, stackA, stackB);

      stackA.pop();
      stackB.pop();

      return result;
    }

    /**
     * The base implementation of `_.isMatch` without support for callback
     * shorthands and `this` binding.
     *
     * @private
     * @param {Object} object The object to inspect.
     * @param {Array} matchData The propery names, values, and compare flags to match.
     * @param {Function} [customizer] The function to customize comparing objects.
     * @returns {boolean} Returns `true` if `object` is a match, else `false`.
     */
    function baseIsMatch(object, matchData, customizer) {
      var index = matchData.length,
          length = index,
          noCustomizer = !customizer;

      if (object == null) {
        return !length;
      }
      object = toObject(object);
      while (index--) {
        var data = matchData[index];
        if ((noCustomizer && data[2])
              ? data[1] !== object[data[0]]
              : !(data[0] in object)
            ) {
          return false;
        }
      }
      while (++index < length) {
        data = matchData[index];
        var key = data[0],
            objValue = object[key],
            srcValue = data[1];

        if (noCustomizer && data[2]) {
          if (objValue === undefined && !(key in object)) {
            return false;
          }
        } else {
          var result = customizer ? customizer(objValue, srcValue, key) : undefined;
          if (!(result === undefined ? baseIsEqual(srcValue, objValue, customizer, true) : result)) {
            return false;
          }
        }
      }
      return true;
    }

    /**
     * The base implementation of `_.map` without support for callback shorthands
     * and `this` binding.
     *
     * @private
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @returns {Array} Returns the new mapped array.
     */
    function baseMap(collection, iteratee) {
      var index = -1,
          result = isArrayLike(collection) ? Array(collection.length) : [];

      baseEach(collection, function(value, key, collection) {
        result[++index] = iteratee(value, key, collection);
      });
      return result;
    }

    /**
     * The base implementation of `_.matches` which does not clone `source`.
     *
     * @private
     * @param {Object} source The object of property values to match.
     * @returns {Function} Returns the new function.
     */
    function baseMatches(source) {
      var matchData = getMatchData(source);
      if (matchData.length == 1 && matchData[0][2]) {
        var key = matchData[0][0],
            value = matchData[0][1];

        return function(object) {
          if (object == null) {
            return false;
          }
          return object[key] === value && (value !== undefined || (key in toObject(object)));
        };
      }
      return function(object) {
        return baseIsMatch(object, matchData);
      };
    }

    /**
     * The base implementation of `_.matchesProperty` which does not clone `srcValue`.
     *
     * @private
     * @param {string} path The path of the property to get.
     * @param {*} srcValue The value to compare.
     * @returns {Function} Returns the new function.
     */
    function baseMatchesProperty(path, srcValue) {
      var isArr = isArray(path),
          isCommon = isKey(path) && isStrictComparable(srcValue),
          pathKey = (path + '');

      path = toPath(path);
      return function(object) {
        if (object == null) {
          return false;
        }
        var key = pathKey;
        object = toObject(object);
        if ((isArr || !isCommon) && !(key in object)) {
          object = path.length == 1 ? object : baseGet(object, baseSlice(path, 0, -1));
          if (object == null) {
            return false;
          }
          key = last(path);
          object = toObject(object);
        }
        return object[key] === srcValue
          ? (srcValue !== undefined || (key in object))
          : baseIsEqual(srcValue, object[key], undefined, true);
      };
    }

    /**
     * The base implementation of `_.merge` without support for argument juggling,
     * multiple sources, and `this` binding `customizer` functions.
     *
     * @private
     * @param {Object} object The destination object.
     * @param {Object} source The source object.
     * @param {Function} [customizer] The function to customize merged values.
     * @param {Array} [stackA=[]] Tracks traversed source objects.
     * @param {Array} [stackB=[]] Associates values with source counterparts.
     * @returns {Object} Returns `object`.
     */
    function baseMerge(object, source, customizer, stackA, stackB) {
      if (!isObject(object)) {
        return object;
      }
      var isSrcArr = isArrayLike(source) && (isArray(source) || isTypedArray(source)),
          props = isSrcArr ? undefined : keys(source);

      arrayEach(props || source, function(srcValue, key) {
        if (props) {
          key = srcValue;
          srcValue = source[key];
        }
        if (isObjectLike(srcValue)) {
          stackA || (stackA = []);
          stackB || (stackB = []);
          baseMergeDeep(object, source, key, baseMerge, customizer, stackA, stackB);
        }
        else {
          var value = object[key],
              result = customizer ? customizer(value, srcValue, key, object, source) : undefined,
              isCommon = result === undefined;

          if (isCommon) {
            result = srcValue;
          }
          if ((result !== undefined || (isSrcArr && !(key in object))) &&
              (isCommon || (result === result ? (result !== value) : (value === value)))) {
            object[key] = result;
          }
        }
      });
      return object;
    }

    /**
     * A specialized version of `baseMerge` for arrays and objects which performs
     * deep merges and tracks traversed objects enabling objects with circular
     * references to be merged.
     *
     * @private
     * @param {Object} object The destination object.
     * @param {Object} source The source object.
     * @param {string} key The key of the value to merge.
     * @param {Function} mergeFunc The function to merge values.
     * @param {Function} [customizer] The function to customize merged values.
     * @param {Array} [stackA=[]] Tracks traversed source objects.
     * @param {Array} [stackB=[]] Associates values with source counterparts.
     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.
     */
    function baseMergeDeep(object, source, key, mergeFunc, customizer, stackA, stackB) {
      var length = stackA.length,
          srcValue = source[key];

      while (length--) {
        if (stackA[length] == srcValue) {
          object[key] = stackB[length];
          return;
        }
      }
      var value = object[key],
          result = customizer ? customizer(value, srcValue, key, object, source) : undefined,
          isCommon = result === undefined;

      if (isCommon) {
        result = srcValue;
        if (isArrayLike(srcValue) && (isArray(srcValue) || isTypedArray(srcValue))) {
          result = isArray(value)
            ? value
            : (isArrayLike(value) ? arrayCopy(value) : []);
        }
        else if (isPlainObject(srcValue) || isArguments(srcValue)) {
          result = isArguments(value)
            ? toPlainObject(value)
            : (isPlainObject(value) ? value : {});
        }
        else {
          isCommon = false;
        }
      }
      // Add the source value to the stack of traversed objects and associate
      // it with its merged value.
      stackA.push(srcValue);
      stackB.push(result);

      if (isCommon) {
        // Recursively merge objects and arrays (susceptible to call stack limits).
        object[key] = mergeFunc(result, srcValue, customizer, stackA, stackB);
      } else if (result === result ? (result !== value) : (value === value)) {
        object[key] = result;
      }
    }

    /**
     * The base implementation of `_.property` without support for deep paths.
     *
     * @private
     * @param {string} key The key of the property to get.
     * @returns {Function} Returns the new function.
     */
    function baseProperty(key) {
      return function(object) {
        return object == null ? undefined : object[key];
      };
    }

    /**
     * A specialized version of `baseProperty` which supports deep paths.
     *
     * @private
     * @param {Array|string} path The path of the property to get.
     * @returns {Function} Returns the new function.
     */
    function basePropertyDeep(path) {
      var pathKey = (path + '');
      path = toPath(path);
      return function(object) {
        return baseGet(object, path, pathKey);
      };
    }

    /**
     * The base implementation of `_.pullAt` without support for individual
     * index arguments and capturing the removed elements.
     *
     * @private
     * @param {Array} array The array to modify.
     * @param {number[]} indexes The indexes of elements to remove.
     * @returns {Array} Returns `array`.
     */
    function basePullAt(array, indexes) {
      var length = array ? indexes.length : 0;
      while (length--) {
        var index = indexes[length];
        if (index != previous && isIndex(index)) {
          var previous = index;
          splice.call(array, index, 1);
        }
      }
      return array;
    }

    /**
     * The base implementation of `_.random` without support for argument juggling
     * and returning floating-point numbers.
     *
     * @private
     * @param {number} min The minimum possible value.
     * @param {number} max The maximum possible value.
     * @returns {number} Returns the random number.
     */
    function baseRandom(min, max) {
      return min + nativeFloor(nativeRandom() * (max - min + 1));
    }

    /**
     * The base implementation of `_.reduce` and `_.reduceRight` without support
     * for callback shorthands and `this` binding, which iterates over `collection`
     * using the provided `eachFunc`.
     *
     * @private
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @param {*} accumulator The initial value.
     * @param {boolean} initFromCollection Specify using the first or last element
     *  of `collection` as the initial value.
     * @param {Function} eachFunc The function to iterate over `collection`.
     * @returns {*} Returns the accumulated value.
     */
    function baseReduce(collection, iteratee, accumulator, initFromCollection, eachFunc) {
      eachFunc(collection, function(value, index, collection) {
        accumulator = initFromCollection
          ? (initFromCollection = false, value)
          : iteratee(accumulator, value, index, collection);
      });
      return accumulator;
    }

    /**
     * The base implementation of `setData` without support for hot loop detection.
     *
     * @private
     * @param {Function} func The function to associate metadata with.
     * @param {*} data The metadata.
     * @returns {Function} Returns `func`.
     */
    var baseSetData = !metaMap ? identity : function(func, data) {
      metaMap.set(func, data);
      return func;
    };

    /**
     * The base implementation of `_.slice` without an iteratee call guard.
     *
     * @private
     * @param {Array} array The array to slice.
     * @param {number} [start=0] The start position.
     * @param {number} [end=array.length] The end position.
     * @returns {Array} Returns the slice of `array`.
     */
    function baseSlice(array, start, end) {
      var index = -1,
          length = array.length;

      start = start == null ? 0 : (+start || 0);
      if (start < 0) {
        start = -start > length ? 0 : (length + start);
      }
      end = (end === undefined || end > length) ? length : (+end || 0);
      if (end < 0) {
        end += length;
      }
      length = start > end ? 0 : ((end - start) >>> 0);
      start >>>= 0;

      var result = Array(length);
      while (++index < length) {
        result[index] = array[index + start];
      }
      return result;
    }

    /**
     * The base implementation of `_.some` without support for callback shorthands
     * and `this` binding.
     *
     * @private
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} predicate The function invoked per iteration.
     * @returns {boolean} Returns `true` if any element passes the predicate check,
     *  else `false`.
     */
    function baseSome(collection, predicate) {
      var result;

      baseEach(collection, function(value, index, collection) {
        result = predicate(value, index, collection);
        return !result;
      });
      return !!result;
    }

    /**
     * The base implementation of `_.sortBy` which uses `comparer` to define
     * the sort order of `array` and replaces criteria objects with their
     * corresponding values.
     *
     * @private
     * @param {Array} array The array to sort.
     * @param {Function} comparer The function to define sort order.
     * @returns {Array} Returns `array`.
     */
    function baseSortBy(array, comparer) {
      var length = array.length;

      array.sort(comparer);
      while (length--) {
        array[length] = array[length].value;
      }
      return array;
    }

    /**
     * The base implementation of `_.sortByOrder` without param guards.
     *
     * @private
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function[]|Object[]|string[]} iteratees The iteratees to sort by.
     * @param {boolean[]} orders The sort orders of `iteratees`.
     * @returns {Array} Returns the new sorted array.
     */
    function baseSortByOrder(collection, iteratees, orders) {
      var callback = getCallback(),
          index = -1;

      iteratees = arrayMap(iteratees, function(iteratee) { return callback(iteratee); });

      var result = baseMap(collection, function(value) {
        var criteria = arrayMap(iteratees, function(iteratee) { return iteratee(value); });
        return { 'criteria': criteria, 'index': ++index, 'value': value };
      });

      return baseSortBy(result, function(object, other) {
        return compareMultiple(object, other, orders);
      });
    }

    /**
     * The base implementation of `_.sum` without support for callback shorthands
     * and `this` binding.
     *
     * @private
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @returns {number} Returns the sum.
     */
    function baseSum(collection, iteratee) {
      var result = 0;
      baseEach(collection, function(value, index, collection) {
        result += +iteratee(value, index, collection) || 0;
      });
      return result;
    }

    /**
     * The base implementation of `_.uniq` without support for callback shorthands
     * and `this` binding.
     *
     * @private
     * @param {Array} array The array to inspect.
     * @param {Function} [iteratee] The function invoked per iteration.
     * @returns {Array} Returns the new duplicate-value-free array.
     */
    function baseUniq(array, iteratee) {
      var index = -1,
          indexOf = getIndexOf(),
          length = array.length,
          isCommon = indexOf == baseIndexOf,
          isLarge = isCommon && length >= LARGE_ARRAY_SIZE,
          seen = isLarge ? createCache() : null,
          result = [];

      if (seen) {
        indexOf = cacheIndexOf;
        isCommon = false;
      } else {
        isLarge = false;
        seen = iteratee ? [] : result;
      }
      outer:
      while (++index < length) {
        var value = array[index],
            computed = iteratee ? iteratee(value, index, array) : value;

        if (isCommon && value === value) {
          var seenIndex = seen.length;
          while (seenIndex--) {
            if (seen[seenIndex] === computed) {
              continue outer;
            }
          }
          if (iteratee) {
            seen.push(computed);
          }
          result.push(value);
        }
        else if (indexOf(seen, computed, 0) < 0) {
          if (iteratee || isLarge) {
            seen.push(computed);
          }
          result.push(value);
        }
      }
      return result;
    }

    /**
     * The base implementation of `_.values` and `_.valuesIn` which creates an
     * array of `object` property values corresponding to the property names
     * of `props`.
     *
     * @private
     * @param {Object} object The object to query.
     * @param {Array} props The property names to get values for.
     * @returns {Object} Returns the array of property values.
     */
    function baseValues(object, props) {
      var index = -1,
          length = props.length,
          result = Array(length);

      while (++index < length) {
        result[index] = object[props[index]];
      }
      return result;
    }

    /**
     * The base implementation of `_.dropRightWhile`, `_.dropWhile`, `_.takeRightWhile`,
     * and `_.takeWhile` without support for callback shorthands and `this` binding.
     *
     * @private
     * @param {Array} array The array to query.
     * @param {Function} predicate The function invoked per iteration.
     * @param {boolean} [isDrop] Specify dropping elements instead of taking them.
     * @param {boolean} [fromRight] Specify iterating from right to left.
     * @returns {Array} Returns the slice of `array`.
     */
    function baseWhile(array, predicate, isDrop, fromRight) {
      var length = array.length,
          index = fromRight ? length : -1;

      while ((fromRight ? index-- : ++index < length) && predicate(array[index], index, array)) {}
      return isDrop
        ? baseSlice(array, (fromRight ? 0 : index), (fromRight ? index + 1 : length))
        : baseSlice(array, (fromRight ? index + 1 : 0), (fromRight ? length : index));
    }

    /**
     * The base implementation of `wrapperValue` which returns the result of
     * performing a sequence of actions on the unwrapped `value`, where each
     * successive action is supplied the return value of the previous.
     *
     * @private
     * @param {*} value The unwrapped value.
     * @param {Array} actions Actions to peform to resolve the unwrapped value.
     * @returns {*} Returns the resolved value.
     */
    function baseWrapperValue(value, actions) {
      var result = value;
      if (result instanceof LazyWrapper) {
        result = result.value();
      }
      var index = -1,
          length = actions.length;

      while (++index < length) {
        var action = actions[index];
        result = action.func.apply(action.thisArg, arrayPush([result], action.args));
      }
      return result;
    }

    /**
     * Performs a binary search of `array` to determine the index at which `value`
     * should be inserted into `array` in order to maintain its sort order.
     *
     * @private
     * @param {Array} array The sorted array to inspect.
     * @param {*} value The value to evaluate.
     * @param {boolean} [retHighest] Specify returning the highest qualified index.
     * @returns {number} Returns the index at which `value` should be inserted
     *  into `array`.
     */
    function binaryIndex(array, value, retHighest) {
      var low = 0,
          high = array ? array.length : low;

      if (typeof value == 'number' && value === value && high <= HALF_MAX_ARRAY_LENGTH) {
        while (low < high) {
          var mid = (low + high) >>> 1,
              computed = array[mid];

          if ((retHighest ? (computed <= value) : (computed < value)) && computed !== null) {
            low = mid + 1;
          } else {
            high = mid;
          }
        }
        return high;
      }
      return binaryIndexBy(array, value, identity, retHighest);
    }

    /**
     * This function is like `binaryIndex` except that it invokes `iteratee` for
     * `value` and each element of `array` to compute their sort ranking. The
     * iteratee is invoked with one argument; (value).
     *
     * @private
     * @param {Array} array The sorted array to inspect.
     * @param {*} value The value to evaluate.
     * @param {Function} iteratee The function invoked per iteration.
     * @param {boolean} [retHighest] Specify returning the highest qualified index.
     * @returns {number} Returns the index at which `value` should be inserted
     *  into `array`.
     */
    function binaryIndexBy(array, value, iteratee, retHighest) {
      value = iteratee(value);

      var low = 0,
          high = array ? array.length : 0,
          valIsNaN = value !== value,
          valIsNull = value === null,
          valIsUndef = value === undefined;

      while (low < high) {
        var mid = nativeFloor((low + high) / 2),
            computed = iteratee(array[mid]),
            isDef = computed !== undefined,
            isReflexive = computed === computed;

        if (valIsNaN) {
          var setLow = isReflexive || retHighest;
        } else if (valIsNull) {
          setLow = isReflexive && isDef && (retHighest || computed != null);
        } else if (valIsUndef) {
          setLow = isReflexive && (retHighest || isDef);
        } else if (computed == null) {
          setLow = false;
        } else {
          setLow = retHighest ? (computed <= value) : (computed < value);
        }
        if (setLow) {
          low = mid + 1;
        } else {
          high = mid;
        }
      }
      return nativeMin(high, MAX_ARRAY_INDEX);
    }

    /**
     * A specialized version of `baseCallback` which only supports `this` binding
     * and specifying the number of arguments to provide to `func`.
     *
     * @private
     * @param {Function} func The function to bind.
     * @param {*} thisArg The `this` binding of `func`.
     * @param {number} [argCount] The number of arguments to provide to `func`.
     * @returns {Function} Returns the callback.
     */
    function bindCallback(func, thisArg, argCount) {
      if (typeof func != 'function') {
        return identity;
      }
      if (thisArg === undefined) {
        return func;
      }
      switch (argCount) {
        case 1: return function(value) {
          return func.call(thisArg, value);
        };
        case 3: return function(value, index, collection) {
          return func.call(thisArg, value, index, collection);
        };
        case 4: return function(accumulator, value, index, collection) {
          return func.call(thisArg, accumulator, value, index, collection);
        };
        case 5: return function(value, other, key, object, source) {
          return func.call(thisArg, value, other, key, object, source);
        };
      }
      return function() {
        return func.apply(thisArg, arguments);
      };
    }

    /**
     * Creates a clone of the given array buffer.
     *
     * @private
     * @param {ArrayBuffer} buffer The array buffer to clone.
     * @returns {ArrayBuffer} Returns the cloned array buffer.
     */
    function bufferClone(buffer) {
      var result = new ArrayBuffer(buffer.byteLength),
          view = new Uint8Array(result);

      view.set(new Uint8Array(buffer));
      return result;
    }

    /**
     * Creates an array that is the composition of partially applied arguments,
     * placeholders, and provided arguments into a single array of arguments.
     *
     * @private
     * @param {Array|Object} args The provided arguments.
     * @param {Array} partials The arguments to prepend to those provided.
     * @param {Array} holders The `partials` placeholder indexes.
     * @returns {Array} Returns the new array of composed arguments.
     */
    function composeArgs(args, partials, holders) {
      var holdersLength = holders.length,
          argsIndex = -1,
          argsLength = nativeMax(args.length - holdersLength, 0),
          leftIndex = -1,
          leftLength = partials.length,
          result = Array(leftLength + argsLength);

      while (++leftIndex < leftLength) {
        result[leftIndex] = partials[leftIndex];
      }
      while (++argsIndex < holdersLength) {
        result[holders[argsIndex]] = args[argsIndex];
      }
      while (argsLength--) {
        result[leftIndex++] = args[argsIndex++];
      }
      return result;
    }

    /**
     * This function is like `composeArgs` except that the arguments composition
     * is tailored for `_.partialRight`.
     *
     * @private
     * @param {Array|Object} args The provided arguments.
     * @param {Array} partials The arguments to append to those provided.
     * @param {Array} holders The `partials` placeholder indexes.
     * @returns {Array} Returns the new array of composed arguments.
     */
    function composeArgsRight(args, partials, holders) {
      var holdersIndex = -1,
          holdersLength = holders.length,
          argsIndex = -1,
          argsLength = nativeMax(args.length - holdersLength, 0),
          rightIndex = -1,
          rightLength = partials.length,
          result = Array(argsLength + rightLength);

      while (++argsIndex < argsLength) {
        result[argsIndex] = args[argsIndex];
      }
      var offset = argsIndex;
      while (++rightIndex < rightLength) {
        result[offset + rightIndex] = partials[rightIndex];
      }
      while (++holdersIndex < holdersLength) {
        result[offset + holders[holdersIndex]] = args[argsIndex++];
      }
      return result;
    }

    /**
     * Creates a `_.countBy`, `_.groupBy`, `_.indexBy`, or `_.partition` function.
     *
     * @private
     * @param {Function} setter The function to set keys and values of the accumulator object.
     * @param {Function} [initializer] The function to initialize the accumulator object.
     * @returns {Function} Returns the new aggregator function.
     */
    function createAggregator(setter, initializer) {
      return function(collection, iteratee, thisArg) {
        var result = initializer ? initializer() : {};
        iteratee = getCallback(iteratee, thisArg, 3);

        if (isArray(collection)) {
          var index = -1,
              length = collection.length;

          while (++index < length) {
            var value = collection[index];
            setter(result, value, iteratee(value, index, collection), collection);
          }
        } else {
          baseEach(collection, function(value, key, collection) {
            setter(result, value, iteratee(value, key, collection), collection);
          });
        }
        return result;
      };
    }

    /**
     * Creates a `_.assign`, `_.defaults`, or `_.merge` function.
     *
     * @private
     * @param {Function} assigner The function to assign values.
     * @returns {Function} Returns the new assigner function.
     */
    function createAssigner(assigner) {
      return restParam(function(object, sources) {
        var index = -1,
            length = object == null ? 0 : sources.length,
            customizer = length > 2 ? sources[length - 2] : undefined,
            guard = length > 2 ? sources[2] : undefined,
            thisArg = length > 1 ? sources[length - 1] : undefined;

        if (typeof customizer == 'function') {
          customizer = bindCallback(customizer, thisArg, 5);
          length -= 2;
        } else {
          customizer = typeof thisArg == 'function' ? thisArg : undefined;
          length -= (customizer ? 1 : 0);
        }
        if (guard && isIterateeCall(sources[0], sources[1], guard)) {
          customizer = length < 3 ? undefined : customizer;
          length = 1;
        }
        while (++index < length) {
          var source = sources[index];
          if (source) {
            assigner(object, source, customizer);
          }
        }
        return object;
      });
    }

    /**
     * Creates a `baseEach` or `baseEachRight` function.
     *
     * @private
     * @param {Function} eachFunc The function to iterate over a collection.
     * @param {boolean} [fromRight] Specify iterating from right to left.
     * @returns {Function} Returns the new base function.
     */
    function createBaseEach(eachFunc, fromRight) {
      return function(collection, iteratee) {
        var length = collection ? getLength(collection) : 0;
        if (!isLength(length)) {
          return eachFunc(collection, iteratee);
        }
        var index = fromRight ? length : -1,
            iterable = toObject(collection);

        while ((fromRight ? index-- : ++index < length)) {
          if (iteratee(iterable[index], index, iterable) === false) {
            break;
          }
        }
        return collection;
      };
    }

    /**
     * Creates a base function for `_.forIn` or `_.forInRight`.
     *
     * @private
     * @param {boolean} [fromRight] Specify iterating from right to left.
     * @returns {Function} Returns the new base function.
     */
    function createBaseFor(fromRight) {
      return function(object, iteratee, keysFunc) {
        var iterable = toObject(object),
            props = keysFunc(object),
            length = props.length,
            index = fromRight ? length : -1;

        while ((fromRight ? index-- : ++index < length)) {
          var key = props[index];
          if (iteratee(iterable[key], key, iterable) === false) {
            break;
          }
        }
        return object;
      };
    }

    /**
     * Creates a function that wraps `func` and invokes it with the `this`
     * binding of `thisArg`.
     *
     * @private
     * @param {Function} func The function to bind.
     * @param {*} [thisArg] The `this` binding of `func`.
     * @returns {Function} Returns the new bound function.
     */
    function createBindWrapper(func, thisArg) {
      var Ctor = createCtorWrapper(func);

      function wrapper() {
        var fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;
        return fn.apply(thisArg, arguments);
      }
      return wrapper;
    }

    /**
     * Creates a `Set` cache object to optimize linear searches of large arrays.
     *
     * @private
     * @param {Array} [values] The values to cache.
     * @returns {null|Object} Returns the new cache object if `Set` is supported, else `null`.
     */
    function createCache(values) {
      return (nativeCreate && Set) ? new SetCache(values) : null;
    }

    /**
     * Creates a function that produces compound words out of the words in a
     * given string.
     *
     * @private
     * @param {Function} callback The function to combine each word.
     * @returns {Function} Returns the new compounder function.
     */
    function createCompounder(callback) {
      return function(string) {
        var index = -1,
            array = words(deburr(string)),
            length = array.length,
            result = '';

        while (++index < length) {
          result = callback(result, array[index], index);
        }
        return result;
      };
    }

    /**
     * Creates a function that produces an instance of `Ctor` regardless of
     * whether it was invoked as part of a `new` expression or by `call` or `apply`.
     *
     * @private
     * @param {Function} Ctor The constructor to wrap.
     * @returns {Function} Returns the new wrapped function.
     */
    function createCtorWrapper(Ctor) {
      return function() {
        // Use a `switch` statement to work with class constructors.
        // See http://ecma-international.org/ecma-262/6.0/#sec-ecmascript-function-objects-call-thisargument-argumentslist
        // for more details.
        var args = arguments;
        switch (args.length) {
          case 0: return new Ctor;
          case 1: return new Ctor(args[0]);
          case 2: return new Ctor(args[0], args[1]);
          case 3: return new Ctor(args[0], args[1], args[2]);
          case 4: return new Ctor(args[0], args[1], args[2], args[3]);
          case 5: return new Ctor(args[0], args[1], args[2], args[3], args[4]);
          case 6: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5]);
          case 7: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5], args[6]);
        }
        var thisBinding = baseCreate(Ctor.prototype),
            result = Ctor.apply(thisBinding, args);

        // Mimic the constructor's `return` behavior.
        // See https://es5.github.io/#x13.2.2 for more details.
        return isObject(result) ? result : thisBinding;
      };
    }

    /**
     * Creates a `_.curry` or `_.curryRight` function.
     *
     * @private
     * @param {boolean} flag The curry bit flag.
     * @returns {Function} Returns the new curry function.
     */
    function createCurry(flag) {
      function curryFunc(func, arity, guard) {
        if (guard && isIterateeCall(func, arity, guard)) {
          arity = undefined;
        }
        var result = createWrapper(func, flag, undefined, undefined, undefined, undefined, undefined, arity);
        result.placeholder = curryFunc.placeholder;
        return result;
      }
      return curryFunc;
    }

    /**
     * Creates a `_.defaults` or `_.defaultsDeep` function.
     *
     * @private
     * @param {Function} assigner The function to assign values.
     * @param {Function} customizer The function to customize assigned values.
     * @returns {Function} Returns the new defaults function.
     */
    function createDefaults(assigner, customizer) {
      return restParam(function(args) {
        var object = args[0];
        if (object == null) {
          return object;
        }
        args.push(customizer);
        return assigner.apply(undefined, args);
      });
    }

    /**
     * Creates a `_.max` or `_.min` function.
     *
     * @private
     * @param {Function} comparator The function used to compare values.
     * @param {*} exValue The initial extremum value.
     * @returns {Function} Returns the new extremum function.
     */
    function createExtremum(comparator, exValue) {
      return function(collection, iteratee, thisArg) {
        if (thisArg && isIterateeCall(collection, iteratee, thisArg)) {
          iteratee = undefined;
        }
        iteratee = getCallback(iteratee, thisArg, 3);
        if (iteratee.length == 1) {
          collection = isArray(collection) ? collection : toIterable(collection);
          var result = arrayExtremum(collection, iteratee, comparator, exValue);
          if (!(collection.length && result === exValue)) {
            return result;
          }
        }
        return baseExtremum(collection, iteratee, comparator, exValue);
      };
    }

    /**
     * Creates a `_.find` or `_.findLast` function.
     *
     * @private
     * @param {Function} eachFunc The function to iterate over a collection.
     * @param {boolean} [fromRight] Specify iterating from right to left.
     * @returns {Function} Returns the new find function.
     */
    function createFind(eachFunc, fromRight) {
      return function(collection, predicate, thisArg) {
        predicate = getCallback(predicate, thisArg, 3);
        if (isArray(collection)) {
          var index = baseFindIndex(collection, predicate, fromRight);
          return index > -1 ? collection[index] : undefined;
        }
        return baseFind(collection, predicate, eachFunc);
      };
    }

    /**
     * Creates a `_.findIndex` or `_.findLastIndex` function.
     *
     * @private
     * @param {boolean} [fromRight] Specify iterating from right to left.
     * @returns {Function} Returns the new find function.
     */
    function createFindIndex(fromRight) {
      return function(array, predicate, thisArg) {
        if (!(array && array.length)) {
          return -1;
        }
        predicate = getCallback(predicate, thisArg, 3);
        return baseFindIndex(array, predicate, fromRight);
      };
    }

    /**
     * Creates a `_.findKey` or `_.findLastKey` function.
     *
     * @private
     * @param {Function} objectFunc The function to iterate over an object.
     * @returns {Function} Returns the new find function.
     */
    function createFindKey(objectFunc) {
      return function(object, predicate, thisArg) {
        predicate = getCallback(predicate, thisArg, 3);
        return baseFind(object, predicate, objectFunc, true);
      };
    }

    /**
     * Creates a `_.flow` or `_.flowRight` function.
     *
     * @private
     * @param {boolean} [fromRight] Specify iterating from right to left.
     * @returns {Function} Returns the new flow function.
     */
    function createFlow(fromRight) {
      return function() {
        var wrapper,
            length = arguments.length,
            index = fromRight ? length : -1,
            leftIndex = 0,
            funcs = Array(length);

        while ((fromRight ? index-- : ++index < length)) {
          var func = funcs[leftIndex++] = arguments[index];
          if (typeof func != 'function') {
            throw new TypeError(FUNC_ERROR_TEXT);
          }
          if (!wrapper && LodashWrapper.prototype.thru && getFuncName(func) == 'wrapper') {
            wrapper = new LodashWrapper([], true);
          }
        }
        index = wrapper ? -1 : length;
        while (++index < length) {
          func = funcs[index];

          var funcName = getFuncName(func),
              data = funcName == 'wrapper' ? getData(func) : undefined;

          if (data && isLaziable(data[0]) && data[1] == (ARY_FLAG | CURRY_FLAG | PARTIAL_FLAG | REARG_FLAG) && !data[4].length && data[9] == 1) {
            wrapper = wrapper[getFuncName(data[0])].apply(wrapper, data[3]);
          } else {
            wrapper = (func.length == 1 && isLaziable(func)) ? wrapper[funcName]() : wrapper.thru(func);
          }
        }
        return function() {
          var args = arguments,
              value = args[0];

          if (wrapper && args.length == 1 && isArray(value) && value.length >= LARGE_ARRAY_SIZE) {
            return wrapper.plant(value).value();
          }
          var index = 0,
              result = length ? funcs[index].apply(this, args) : value;

          while (++index < length) {
            result = funcs[index].call(this, result);
          }
          return result;
        };
      };
    }

    /**
     * Creates a function for `_.forEach` or `_.forEachRight`.
     *
     * @private
     * @param {Function} arrayFunc The function to iterate over an array.
     * @param {Function} eachFunc The function to iterate over a collection.
     * @returns {Function} Returns the new each function.
     */
    function createForEach(arrayFunc, eachFunc) {
      return function(collection, iteratee, thisArg) {
        return (typeof iteratee == 'function' && thisArg === undefined && isArray(collection))
          ? arrayFunc(collection, iteratee)
          : eachFunc(collection, bindCallback(iteratee, thisArg, 3));
      };
    }

    /**
     * Creates a function for `_.forIn` or `_.forInRight`.
     *
     * @private
     * @param {Function} objectFunc The function to iterate over an object.
     * @returns {Function} Returns the new each function.
     */
    function createForIn(objectFunc) {
      return function(object, iteratee, thisArg) {
        if (typeof iteratee != 'function' || thisArg !== undefined) {
          iteratee = bindCallback(iteratee, thisArg, 3);
        }
        return objectFunc(object, iteratee, keysIn);
      };
    }

    /**
     * Creates a function for `_.forOwn` or `_.forOwnRight`.
     *
     * @private
     * @param {Function} objectFunc The function to iterate over an object.
     * @returns {Function} Returns the new each function.
     */
    function createForOwn(objectFunc) {
      return function(object, iteratee, thisArg) {
        if (typeof iteratee != 'function' || thisArg !== undefined) {
          iteratee = bindCallback(iteratee, thisArg, 3);
        }
        return objectFunc(object, iteratee);
      };
    }

    /**
     * Creates a function for `_.mapKeys` or `_.mapValues`.
     *
     * @private
     * @param {boolean} [isMapKeys] Specify mapping keys instead of values.
     * @returns {Function} Returns the new map function.
     */
    function createObjectMapper(isMapKeys) {
      return function(object, iteratee, thisArg) {
        var result = {};
        iteratee = getCallback(iteratee, thisArg, 3);

        baseForOwn(object, function(value, key, object) {
          var mapped = iteratee(value, key, object);
          key = isMapKeys ? mapped : key;
          value = isMapKeys ? value : mapped;
          result[key] = value;
        });
        return result;
      };
    }

    /**
     * Creates a function for `_.padLeft` or `_.padRight`.
     *
     * @private
     * @param {boolean} [fromRight] Specify padding from the right.
     * @returns {Function} Returns the new pad function.
     */
    function createPadDir(fromRight) {
      return function(string, length, chars) {
        string = baseToString(string);
        return (fromRight ? string : '') + createPadding(string, length, chars) + (fromRight ? '' : string);
      };
    }

    /**
     * Creates a `_.partial` or `_.partialRight` function.
     *
     * @private
     * @param {boolean} flag The partial bit flag.
     * @returns {Function} Returns the new partial function.
     */
    function createPartial(flag) {
      var partialFunc = restParam(function(func, partials) {
        var holders = replaceHolders(partials, partialFunc.placeholder);
        return createWrapper(func, flag, undefined, partials, holders);
      });
      return partialFunc;
    }

    /**
     * Creates a function for `_.reduce` or `_.reduceRight`.
     *
     * @private
     * @param {Function} arrayFunc The function to iterate over an array.
     * @param {Function} eachFunc The function to iterate over a collection.
     * @returns {Function} Returns the new each function.
     */
    function createReduce(arrayFunc, eachFunc) {
      return function(collection, iteratee, accumulator, thisArg) {
        var initFromArray = arguments.length < 3;
        return (typeof iteratee == 'function' && thisArg === undefined && isArray(collection))
          ? arrayFunc(collection, iteratee, accumulator, initFromArray)
          : baseReduce(collection, getCallback(iteratee, thisArg, 4), accumulator, initFromArray, eachFunc);
      };
    }

    /**
     * Creates a function that wraps `func` and invokes it with optional `this`
     * binding of, partial application, and currying.
     *
     * @private
     * @param {Function|string} func The function or method name to reference.
     * @param {number} bitmask The bitmask of flags. See `createWrapper` for more details.
     * @param {*} [thisArg] The `this` binding of `func`.
     * @param {Array} [partials] The arguments to prepend to those provided to the new function.
     * @param {Array} [holders] The `partials` placeholder indexes.
     * @param {Array} [partialsRight] The arguments to append to those provided to the new function.
     * @param {Array} [holdersRight] The `partialsRight` placeholder indexes.
     * @param {Array} [argPos] The argument positions of the new function.
     * @param {number} [ary] The arity cap of `func`.
     * @param {number} [arity] The arity of `func`.
     * @returns {Function} Returns the new wrapped function.
     */
    function createHybridWrapper(func, bitmask, thisArg, partials, holders, partialsRight, holdersRight, argPos, ary, arity) {
      var isAry = bitmask & ARY_FLAG,
          isBind = bitmask & BIND_FLAG,
          isBindKey = bitmask & BIND_KEY_FLAG,
          isCurry = bitmask & CURRY_FLAG,
          isCurryBound = bitmask & CURRY_BOUND_FLAG,
          isCurryRight = bitmask & CURRY_RIGHT_FLAG,
          Ctor = isBindKey ? undefined : createCtorWrapper(func);

      function wrapper() {
        // Avoid `arguments` object use disqualifying optimizations by
        // converting it to an array before providing it to other functions.
        var length = arguments.length,
            index = length,
            args = Array(length);

        while (index--) {
          args[index] = arguments[index];
        }
        if (partials) {
          args = composeArgs(args, partials, holders);
        }
        if (partialsRight) {
          args = composeArgsRight(args, partialsRight, holdersRight);
        }
        if (isCurry || isCurryRight) {
          var placeholder = wrapper.placeholder,
              argsHolders = replaceHolders(args, placeholder);

          length -= argsHolders.length;
          if (length < arity) {
            var newArgPos = argPos ? arrayCopy(argPos) : undefined,
                newArity = nativeMax(arity - length, 0),
                newsHolders = isCurry ? argsHolders : undefined,
                newHoldersRight = isCurry ? undefined : argsHolders,
                newPartials = isCurry ? args : undefined,
                newPartialsRight = isCurry ? undefined : args;

            bitmask |= (isCurry ? PARTIAL_FLAG : PARTIAL_RIGHT_FLAG);
            bitmask &= ~(isCurry ? PARTIAL_RIGHT_FLAG : PARTIAL_FLAG);

            if (!isCurryBound) {
              bitmask &= ~(BIND_FLAG | BIND_KEY_FLAG);
            }
            var newData = [func, bitmask, thisArg, newPartials, newsHolders, newPartialsRight, newHoldersRight, newArgPos, ary, newArity],
                result = createHybridWrapper.apply(undefined, newData);

            if (isLaziable(func)) {
              setData(result, newData);
            }
            result.placeholder = placeholder;
            return result;
          }
        }
        var thisBinding = isBind ? thisArg : this,
            fn = isBindKey ? thisBinding[func] : func;

        if (argPos) {
          args = reorder(args, argPos);
        }
        if (isAry && ary < args.length) {
          args.length = ary;
        }
        if (this && this !== root && this instanceof wrapper) {
          fn = Ctor || createCtorWrapper(func);
        }
        return fn.apply(thisBinding, args);
      }
      return wrapper;
    }

    /**
     * Creates the padding required for `string` based on the given `length`.
     * The `chars` string is truncated if the number of characters exceeds `length`.
     *
     * @private
     * @param {string} string The string to create padding for.
     * @param {number} [length=0] The padding length.
     * @param {string} [chars=' '] The string used as padding.
     * @returns {string} Returns the pad for `string`.
     */
    function createPadding(string, length, chars) {
      var strLength = string.length;
      length = +length;

      if (strLength >= length || !nativeIsFinite(length)) {
        return '';
      }
      var padLength = length - strLength;
      chars = chars == null ? ' ' : (chars + '');
      return repeat(chars, nativeCeil(padLength / chars.length)).slice(0, padLength);
    }

    /**
     * Creates a function that wraps `func` and invokes it with the optional `this`
     * binding of `thisArg` and the `partials` prepended to those provided to
     * the wrapper.
     *
     * @private
     * @param {Function} func The function to partially apply arguments to.
     * @param {number} bitmask The bitmask of flags. See `createWrapper` for more details.
     * @param {*} thisArg The `this` binding of `func`.
     * @param {Array} partials The arguments to prepend to those provided to the new function.
     * @returns {Function} Returns the new bound function.
     */
    function createPartialWrapper(func, bitmask, thisArg, partials) {
      var isBind = bitmask & BIND_FLAG,
          Ctor = createCtorWrapper(func);

      function wrapper() {
        // Avoid `arguments` object use disqualifying optimizations by
        // converting it to an array before providing it `func`.
        var argsIndex = -1,
            argsLength = arguments.length,
            leftIndex = -1,
            leftLength = partials.length,
            args = Array(leftLength + argsLength);

        while (++leftIndex < leftLength) {
          args[leftIndex] = partials[leftIndex];
        }
        while (argsLength--) {
          args[leftIndex++] = arguments[++argsIndex];
        }
        var fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;
        return fn.apply(isBind ? thisArg : this, args);
      }
      return wrapper;
    }

    /**
     * Creates a `_.ceil`, `_.floor`, or `_.round` function.
     *
     * @private
     * @param {string} methodName The name of the `Math` method to use when rounding.
     * @returns {Function} Returns the new round function.
     */
    function createRound(methodName) {
      var func = Math[methodName];
      return function(number, precision) {
        precision = precision === undefined ? 0 : (+precision || 0);
        if (precision) {
          precision = pow(10, precision);
          return func(number * precision) / precision;
        }
        return func(number);
      };
    }

    /**
     * Creates a `_.sortedIndex` or `_.sortedLastIndex` function.
     *
     * @private
     * @param {boolean} [retHighest] Specify returning the highest qualified index.
     * @returns {Function} Returns the new index function.
     */
    function createSortedIndex(retHighest) {
      return function(array, value, iteratee, thisArg) {
        var callback = getCallback(iteratee);
        return (iteratee == null && callback === baseCallback)
          ? binaryIndex(array, value, retHighest)
          : binaryIndexBy(array, value, callback(iteratee, thisArg, 1), retHighest);
      };
    }

    /**
     * Creates a function that either curries or invokes `func` with optional
     * `this` binding and partially applied arguments.
     *
     * @private
     * @param {Function|string} func The function or method name to reference.
     * @param {number} bitmask The bitmask of flags.
     *  The bitmask may be composed of the following flags:
     *     1 - `_.bind`
     *     2 - `_.bindKey`
     *     4 - `_.curry` or `_.curryRight` of a bound function
     *     8 - `_.curry`
     *    16 - `_.curryRight`
     *    32 - `_.partial`
     *    64 - `_.partialRight`
     *   128 - `_.rearg`
     *   256 - `_.ary`
     * @param {*} [thisArg] The `this` binding of `func`.
     * @param {Array} [partials] The arguments to be partially applied.
     * @param {Array} [holders] The `partials` placeholder indexes.
     * @param {Array} [argPos] The argument positions of the new function.
     * @param {number} [ary] The arity cap of `func`.
     * @param {number} [arity] The arity of `func`.
     * @returns {Function} Returns the new wrapped function.
     */
    function createWrapper(func, bitmask, thisArg, partials, holders, argPos, ary, arity) {
      var isBindKey = bitmask & BIND_KEY_FLAG;
      if (!isBindKey && typeof func != 'function') {
        throw new TypeError(FUNC_ERROR_TEXT);
      }
      var length = partials ? partials.length : 0;
      if (!length) {
        bitmask &= ~(PARTIAL_FLAG | PARTIAL_RIGHT_FLAG);
        partials = holders = undefined;
      }
      length -= (holders ? holders.length : 0);
      if (bitmask & PARTIAL_RIGHT_FLAG) {
        var partialsRight = partials,
            holdersRight = holders;

        partials = holders = undefined;
      }
      var data = isBindKey ? undefined : getData(func),
          newData = [func, bitmask, thisArg, partials, holders, partialsRight, holdersRight, argPos, ary, arity];

      if (data) {
        mergeData(newData, data);
        bitmask = newData[1];
        arity = newData[9];
      }
      newData[9] = arity == null
        ? (isBindKey ? 0 : func.length)
        : (nativeMax(arity - length, 0) || 0);

      if (bitmask == BIND_FLAG) {
        var result = createBindWrapper(newData[0], newData[2]);
      } else if ((bitmask == PARTIAL_FLAG || bitmask == (BIND_FLAG | PARTIAL_FLAG)) && !newData[4].length) {
        result = createPartialWrapper.apply(undefined, newData);
      } else {
        result = createHybridWrapper.apply(undefined, newData);
      }
      var setter = data ? baseSetData : setData;
      return setter(result, newData);
    }

    /**
     * A specialized version of `baseIsEqualDeep` for arrays with support for
     * partial deep comparisons.
     *
     * @private
     * @param {Array} array The array to compare.
     * @param {Array} other The other array to compare.
     * @param {Function} equalFunc The function to determine equivalents of values.
     * @param {Function} [customizer] The function to customize comparing arrays.
     * @param {boolean} [isLoose] Specify performing partial comparisons.
     * @param {Array} [stackA] Tracks traversed `value` objects.
     * @param {Array} [stackB] Tracks traversed `other` objects.
     * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.
     */
    function equalArrays(array, other, equalFunc, customizer, isLoose, stackA, stackB) {
      var index = -1,
          arrLength = array.length,
          othLength = other.length;

      if (arrLength != othLength && !(isLoose && othLength > arrLength)) {
        return false;
      }
      // Ignore non-index properties.
      while (++index < arrLength) {
        var arrValue = array[index],
            othValue = other[index],
            result = customizer ? customizer(isLoose ? othValue : arrValue, isLoose ? arrValue : othValue, index) : undefined;

        if (result !== undefined) {
          if (result) {
            continue;
          }
          return false;
        }
        // Recursively compare arrays (susceptible to call stack limits).
        if (isLoose) {
          if (!arraySome(other, function(othValue) {
                return arrValue === othValue || equalFunc(arrValue, othValue, customizer, isLoose, stackA, stackB);
              })) {
            return false;
          }
        } else if (!(arrValue === othValue || equalFunc(arrValue, othValue, customizer, isLoose, stackA, stackB))) {
          return false;
        }
      }
      return true;
    }

    /**
     * A specialized version of `baseIsEqualDeep` for comparing objects of
     * the same `toStringTag`.
     *
     * **Note:** This function only supports comparing values with tags of
     * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.
     *
     * @private
     * @param {Object} object The object to compare.
     * @param {Object} other The other object to compare.
     * @param {string} tag The `toStringTag` of the objects to compare.
     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.
     */
    function equalByTag(object, other, tag) {
      switch (tag) {
        case boolTag:
        case dateTag:
          // Coerce dates and booleans to numbers, dates to milliseconds and booleans
          // to `1` or `0` treating invalid dates coerced to `NaN` as not equal.
          return +object == +other;

        case errorTag:
          return object.name == other.name && object.message == other.message;

        case numberTag:
          // Treat `NaN` vs. `NaN` as equal.
          return (object != +object)
            ? other != +other
            : object == +other;

        case regexpTag:
        case stringTag:
          // Coerce regexes to strings and treat strings primitives and string
          // objects as equal. See https://es5.github.io/#x15.10.6.4 for more details.
          return object == (other + '');
      }
      return false;
    }

    /**
     * A specialized version of `baseIsEqualDeep` for objects with support for
     * partial deep comparisons.
     *
     * @private
     * @param {Object} object The object to compare.
     * @param {Object} other The other object to compare.
     * @param {Function} equalFunc The function to determine equivalents of values.
     * @param {Function} [customizer] The function to customize comparing values.
     * @param {boolean} [isLoose] Specify performing partial comparisons.
     * @param {Array} [stackA] Tracks traversed `value` objects.
     * @param {Array} [stackB] Tracks traversed `other` objects.
     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.
     */
    function equalObjects(object, other, equalFunc, customizer, isLoose, stackA, stackB) {
      var objProps = keys(object),
          objLength = objProps.length,
          othProps = keys(other),
          othLength = othProps.length;

      if (objLength != othLength && !isLoose) {
        return false;
      }
      var index = objLength;
      while (index--) {
        var key = objProps[index];
        if (!(isLoose ? key in other : hasOwnProperty.call(other, key))) {
          return false;
        }
      }
      var skipCtor = isLoose;
      while (++index < objLength) {
        key = objProps[index];
        var objValue = object[key],
            othValue = other[key],
            result = customizer ? customizer(isLoose ? othValue : objValue, isLoose? objValue : othValue, key) : undefined;

        // Recursively compare objects (susceptible to call stack limits).
        if (!(result === undefined ? equalFunc(objValue, othValue, customizer, isLoose, stackA, stackB) : result)) {
          return false;
        }
        skipCtor || (skipCtor = key == 'constructor');
      }
      if (!skipCtor) {
        var objCtor = object.constructor,
            othCtor = other.constructor;

        // Non `Object` object instances with different constructors are not equal.
        if (objCtor != othCtor &&
            ('constructor' in object && 'constructor' in other) &&
            !(typeof objCtor == 'function' && objCtor instanceof objCtor &&
              typeof othCtor == 'function' && othCtor instanceof othCtor)) {
          return false;
        }
      }
      return true;
    }

    /**
     * Gets the appropriate "callback" function. If the `_.callback` method is
     * customized this function returns the custom method, otherwise it returns
     * the `baseCallback` function. If arguments are provided the chosen function
     * is invoked with them and its result is returned.
     *
     * @private
     * @returns {Function} Returns the chosen function or its result.
     */
    function getCallback(func, thisArg, argCount) {
      var result = lodash.callback || callback;
      result = result === callback ? baseCallback : result;
      return argCount ? result(func, thisArg, argCount) : result;
    }

    /**
     * Gets metadata for `func`.
     *
     * @private
     * @param {Function} func The function to query.
     * @returns {*} Returns the metadata for `func`.
     */
    var getData = !metaMap ? noop : function(func) {
      return metaMap.get(func);
    };

    /**
     * Gets the name of `func`.
     *
     * @private
     * @param {Function} func The function to query.
     * @returns {string} Returns the function name.
     */
    function getFuncName(func) {
      var result = func.name,
          array = realNames[result],
          length = array ? array.length : 0;

      while (length--) {
        var data = array[length],
            otherFunc = data.func;
        if (otherFunc == null || otherFunc == func) {
          return data.name;
        }
      }
      return result;
    }

    /**
     * Gets the appropriate "indexOf" function. If the `_.indexOf` method is
     * customized this function returns the custom method, otherwise it returns
     * the `baseIndexOf` function. If arguments are provided the chosen function
     * is invoked with them and its result is returned.
     *
     * @private
     * @returns {Function|number} Returns the chosen function or its result.
     */
    function getIndexOf(collection, target, fromIndex) {
      var result = lodash.indexOf || indexOf;
      result = result === indexOf ? baseIndexOf : result;
      return collection ? result(collection, target, fromIndex) : result;
    }

    /**
     * Gets the "length" property value of `object`.
     *
     * **Note:** This function is used to avoid a [JIT bug](https://bugs.webkit.org/show_bug.cgi?id=142792)
     * that affects Safari on at least iOS 8.1-8.3 ARM64.
     *
     * @private
     * @param {Object} object The object to query.
     * @returns {*} Returns the "length" value.
     */
    var getLength = baseProperty('length');

    /**
     * Gets the propery names, values, and compare flags of `object`.
     *
     * @private
     * @param {Object} object The object to query.
     * @returns {Array} Returns the match data of `object`.
     */
    function getMatchData(object) {
      var result = pairs(object),
          length = result.length;

      while (length--) {
        result[length][2] = isStrictComparable(result[length][1]);
      }
      return result;
    }

    /**
     * Gets the native function at `key` of `object`.
     *
     * @private
     * @param {Object} object The object to query.
     * @param {string} key The key of the method to get.
     * @returns {*} Returns the function if it's native, else `undefined`.
     */
    function getNative(object, key) {
      var value = object == null ? undefined : object[key];
      return isNative(value) ? value : undefined;
    }

    /**
     * Gets the view, applying any `transforms` to the `start` and `end` positions.
     *
     * @private
     * @param {number} start The start of the view.
     * @param {number} end The end of the view.
     * @param {Array} transforms The transformations to apply to the view.
     * @returns {Object} Returns an object containing the `start` and `end`
     *  positions of the view.
     */
    function getView(start, end, transforms) {
      var index = -1,
          length = transforms.length;

      while (++index < length) {
        var data = transforms[index],
            size = data.size;

        switch (data.type) {
          case 'drop':      start += size; break;
          case 'dropRight': end -= size; break;
          case 'take':      end = nativeMin(end, start + size); break;
          case 'takeRight': start = nativeMax(start, end - size); break;
        }
      }
      return { 'start': start, 'end': end };
    }

    /**
     * Initializes an array clone.
     *
     * @private
     * @param {Array} array The array to clone.
     * @returns {Array} Returns the initialized clone.
     */
    function initCloneArray(array) {
      var length = array.length,
          result = new array.constructor(length);

      // Add array properties assigned by `RegExp#exec`.
      if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {
        result.index = array.index;
        result.input = array.input;
      }
      return result;
    }

    /**
     * Initializes an object clone.
     *
     * @private
     * @param {Object} object The object to clone.
     * @returns {Object} Returns the initialized clone.
     */
    function initCloneObject(object) {
      var Ctor = object.constructor;
      if (!(typeof Ctor == 'function' && Ctor instanceof Ctor)) {
        Ctor = Object;
      }
      return new Ctor;
    }

    /**
     * Initializes an object clone based on its `toStringTag`.
     *
     * **Note:** This function only supports cloning values with tags of
     * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.
     *
     * @private
     * @param {Object} object The object to clone.
     * @param {string} tag The `toStringTag` of the object to clone.
     * @param {boolean} [isDeep] Specify a deep clone.
     * @returns {Object} Returns the initialized clone.
     */
    function initCloneByTag(object, tag, isDeep) {
      var Ctor = object.constructor;
      switch (tag) {
        case arrayBufferTag:
          return bufferClone(object);

        case boolTag:
        case dateTag:
          return new Ctor(+object);

        case float32Tag: case float64Tag:
        case int8Tag: case int16Tag: case int32Tag:
        case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:
          var buffer = object.buffer;
          return new Ctor(isDeep ? bufferClone(buffer) : buffer, object.byteOffset, object.length);

        case numberTag:
        case stringTag:
          return new Ctor(object);

        case regexpTag:
          var result = new Ctor(object.source, reFlags.exec(object));
          result.lastIndex = object.lastIndex;
      }
      return result;
    }

    /**
     * Invokes the method at `path` on `object`.
     *
     * @private
     * @param {Object} object The object to query.
     * @param {Array|string} path The path of the method to invoke.
     * @param {Array} args The arguments to invoke the method with.
     * @returns {*} Returns the result of the invoked method.
     */
    function invokePath(object, path, args) {
      if (object != null && !isKey(path, object)) {
        path = toPath(path);
        object = path.length == 1 ? object : baseGet(object, baseSlice(path, 0, -1));
        path = last(path);
      }
      var func = object == null ? object : object[path];
      return func == null ? undefined : func.apply(object, args);
    }

    /**
     * Checks if `value` is array-like.
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is array-like, else `false`.
     */
    function isArrayLike(value) {
      return value != null && isLength(getLength(value));
    }

    /**
     * Checks if `value` is a valid array-like index.
     *
     * @private
     * @param {*} value The value to check.
     * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.
     * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.
     */
    function isIndex(value, length) {
      value = (typeof value == 'number' || reIsUint.test(value)) ? +value : -1;
      length = length == null ? MAX_SAFE_INTEGER : length;
      return value > -1 && value % 1 == 0 && value < length;
    }

    /**
     * Checks if the provided arguments are from an iteratee call.
     *
     * @private
     * @param {*} value The potential iteratee value argument.
     * @param {*} index The potential iteratee index or key argument.
     * @param {*} object The potential iteratee object argument.
     * @returns {boolean} Returns `true` if the arguments are from an iteratee call, else `false`.
     */
    function isIterateeCall(value, index, object) {
      if (!isObject(object)) {
        return false;
      }
      var type = typeof index;
      if (type == 'number'
          ? (isArrayLike(object) && isIndex(index, object.length))
          : (type == 'string' && index in object)) {
        var other = object[index];
        return value === value ? (value === other) : (other !== other);
      }
      return false;
    }

    /**
     * Checks if `value` is a property name and not a property path.
     *
     * @private
     * @param {*} value The value to check.
     * @param {Object} [object] The object to query keys on.
     * @returns {boolean} Returns `true` if `value` is a property name, else `false`.
     */
    function isKey(value, object) {
      var type = typeof value;
      if ((type == 'string' && reIsPlainProp.test(value)) || type == 'number') {
        return true;
      }
      if (isArray(value)) {
        return false;
      }
      var result = !reIsDeepProp.test(value);
      return result || (object != null && value in toObject(object));
    }

    /**
     * Checks if `func` has a lazy counterpart.
     *
     * @private
     * @param {Function} func The function to check.
     * @returns {boolean} Returns `true` if `func` has a lazy counterpart, else `false`.
     */
    function isLaziable(func) {
      var funcName = getFuncName(func);
      if (!(funcName in LazyWrapper.prototype)) {
        return false;
      }
      var other = lodash[funcName];
      if (func === other) {
        return true;
      }
      var data = getData(other);
      return !!data && func === data[0];
    }

    /**
     * Checks if `value` is a valid array-like length.
     *
     * **Note:** This function is based on [`ToLength`](http://ecma-international.org/ecma-262/6.0/#sec-tolength).
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.
     */
    function isLength(value) {
      return typeof value == 'number' && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;
    }

    /**
     * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` if suitable for strict
     *  equality comparisons, else `false`.
     */
    function isStrictComparable(value) {
      return value === value && !isObject(value);
    }

    /**
     * Merges the function metadata of `source` into `data`.
     *
     * Merging metadata reduces the number of wrappers required to invoke a function.
     * This is possible because methods like `_.bind`, `_.curry`, and `_.partial`
     * may be applied regardless of execution order. Methods like `_.ary` and `_.rearg`
     * augment function arguments, making the order in which they are executed important,
     * preventing the merging of metadata. However, we make an exception for a safe
     * common case where curried functions have `_.ary` and or `_.rearg` applied.
     *
     * @private
     * @param {Array} data The destination metadata.
     * @param {Array} source The source metadata.
     * @returns {Array} Returns `data`.
     */
    function mergeData(data, source) {
      var bitmask = data[1],
          srcBitmask = source[1],
          newBitmask = bitmask | srcBitmask,
          isCommon = newBitmask < ARY_FLAG;

      var isCombo =
        (srcBitmask == ARY_FLAG && bitmask == CURRY_FLAG) ||
        (srcBitmask == ARY_FLAG && bitmask == REARG_FLAG && data[7].length <= source[8]) ||
        (srcBitmask == (ARY_FLAG | REARG_FLAG) && bitmask == CURRY_FLAG);

      // Exit early if metadata can't be merged.
      if (!(isCommon || isCombo)) {
        return data;
      }
      // Use source `thisArg` if available.
      if (srcBitmask & BIND_FLAG) {
        data[2] = source[2];
        // Set when currying a bound function.
        newBitmask |= (bitmask & BIND_FLAG) ? 0 : CURRY_BOUND_FLAG;
      }
      // Compose partial arguments.
      var value = source[3];
      if (value) {
        var partials = data[3];
        data[3] = partials ? composeArgs(partials, value, source[4]) : arrayCopy(value);
        data[4] = partials ? replaceHolders(data[3], PLACEHOLDER) : arrayCopy(source[4]);
      }
      // Compose partial right arguments.
      value = source[5];
      if (value) {
        partials = data[5];
        data[5] = partials ? composeArgsRight(partials, value, source[6]) : arrayCopy(value);
        data[6] = partials ? replaceHolders(data[5], PLACEHOLDER) : arrayCopy(source[6]);
      }
      // Use source `argPos` if available.
      value = source[7];
      if (value) {
        data[7] = arrayCopy(value);
      }
      // Use source `ary` if it's smaller.
      if (srcBitmask & ARY_FLAG) {
        data[8] = data[8] == null ? source[8] : nativeMin(data[8], source[8]);
      }
      // Use source `arity` if one is not provided.
      if (data[9] == null) {
        data[9] = source[9];
      }
      // Use source `func` and merge bitmasks.
      data[0] = source[0];
      data[1] = newBitmask;

      return data;
    }

    /**
     * Used by `_.defaultsDeep` to customize its `_.merge` use.
     *
     * @private
     * @param {*} objectValue The destination object property value.
     * @param {*} sourceValue The source object property value.
     * @returns {*} Returns the value to assign to the destination object.
     */
    function mergeDefaults(objectValue, sourceValue) {
      return objectValue === undefined ? sourceValue : merge(objectValue, sourceValue, mergeDefaults);
    }

    /**
     * A specialized version of `_.pick` which picks `object` properties specified
     * by `props`.
     *
     * @private
     * @param {Object} object The source object.
     * @param {string[]} props The property names to pick.
     * @returns {Object} Returns the new object.
     */
    function pickByArray(object, props) {
      object = toObject(object);

      var index = -1,
          length = props.length,
          result = {};

      while (++index < length) {
        var key = props[index];
        if (key in object) {
          result[key] = object[key];
        }
      }
      return result;
    }

    /**
     * A specialized version of `_.pick` which picks `object` properties `predicate`
     * returns truthy for.
     *
     * @private
     * @param {Object} object The source object.
     * @param {Function} predicate The function invoked per iteration.
     * @returns {Object} Returns the new object.
     */
    function pickByCallback(object, predicate) {
      var result = {};
      baseForIn(object, function(value, key, object) {
        if (predicate(value, key, object)) {
          result[key] = value;
        }
      });
      return result;
    }

    /**
     * Reorder `array` according to the specified indexes where the element at
     * the first index is assigned as the first element, the element at
     * the second index is assigned as the second element, and so on.
     *
     * @private
     * @param {Array} array The array to reorder.
     * @param {Array} indexes The arranged array indexes.
     * @returns {Array} Returns `array`.
     */
    function reorder(array, indexes) {
      var arrLength = array.length,
          length = nativeMin(indexes.length, arrLength),
          oldArray = arrayCopy(array);

      while (length--) {
        var index = indexes[length];
        array[length] = isIndex(index, arrLength) ? oldArray[index] : undefined;
      }
      return array;
    }

    /**
     * Sets metadata for `func`.
     *
     * **Note:** If this function becomes hot, i.e. is invoked a lot in a short
     * period of time, it will trip its breaker and transition to an identity function
     * to avoid garbage collection pauses in V8. See [V8 issue 2070](https://code.google.com/p/v8/issues/detail?id=2070)
     * for more details.
     *
     * @private
     * @param {Function} func The function to associate metadata with.
     * @param {*} data The metadata.
     * @returns {Function} Returns `func`.
     */
    var setData = (function() {
      var count = 0,
          lastCalled = 0;

      return function(key, value) {
        var stamp = now(),
            remaining = HOT_SPAN - (stamp - lastCalled);

        lastCalled = stamp;
        if (remaining > 0) {
          if (++count >= HOT_COUNT) {
            return key;
          }
        } else {
          count = 0;
        }
        return baseSetData(key, value);
      };
    }());

    /**
     * A fallback implementation of `Object.keys` which creates an array of the
     * own enumerable property names of `object`.
     *
     * @private
     * @param {Object} object The object to query.
     * @returns {Array} Returns the array of property names.
     */
    function shimKeys(object) {
      var props = keysIn(object),
          propsLength = props.length,
          length = propsLength && object.length;

      var allowIndexes = !!length && isLength(length) &&
        (isArray(object) || isArguments(object));

      var index = -1,
          result = [];

      while (++index < propsLength) {
        var key = props[index];
        if ((allowIndexes && isIndex(key, length)) || hasOwnProperty.call(object, key)) {
          result.push(key);
        }
      }
      return result;
    }

    /**
     * Converts `value` to an array-like object if it's not one.
     *
     * @private
     * @param {*} value The value to process.
     * @returns {Array|Object} Returns the array-like object.
     */
    function toIterable(value) {
      if (value == null) {
        return [];
      }
      if (!isArrayLike(value)) {
        return values(value);
      }
      return isObject(value) ? value : Object(value);
    }

    /**
     * Converts `value` to an object if it's not one.
     *
     * @private
     * @param {*} value The value to process.
     * @returns {Object} Returns the object.
     */
    function toObject(value) {
      return isObject(value) ? value : Object(value);
    }

    /**
     * Converts `value` to property path array if it's not one.
     *
     * @private
     * @param {*} value The value to process.
     * @returns {Array} Returns the property path array.
     */
    function toPath(value) {
      if (isArray(value)) {
        return value;
      }
      var result = [];
      baseToString(value).replace(rePropName, function(match, number, quote, string) {
        result.push(quote ? string.replace(reEscapeChar, '$1') : (number || match));
      });
      return result;
    }

    /**
     * Creates a clone of `wrapper`.
     *
     * @private
     * @param {Object} wrapper The wrapper to clone.
     * @returns {Object} Returns the cloned wrapper.
     */
    function wrapperClone(wrapper) {
      return wrapper instanceof LazyWrapper
        ? wrapper.clone()
        : new LodashWrapper(wrapper.__wrapped__, wrapper.__chain__, arrayCopy(wrapper.__actions__));
    }

    /*------------------------------------------------------------------------*/

    /**
     * Creates an array of elements split into groups the length of `size`.
     * If `collection` can't be split evenly, the final chunk will be the remaining
     * elements.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to process.
     * @param {number} [size=1] The length of each chunk.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {Array} Returns the new array containing chunks.
     * @example
     *
     * _.chunk(['a', 'b', 'c', 'd'], 2);
     * // => [['a', 'b'], ['c', 'd']]
     *
     * _.chunk(['a', 'b', 'c', 'd'], 3);
     * // => [['a', 'b', 'c'], ['d']]
     */
    function chunk(array, size, guard) {
      if (guard ? isIterateeCall(array, size, guard) : size == null) {
        size = 1;
      } else {
        size = nativeMax(nativeFloor(size) || 1, 1);
      }
      var index = 0,
          length = array ? array.length : 0,
          resIndex = -1,
          result = Array(nativeCeil(length / size));

      while (index < length) {
        result[++resIndex] = baseSlice(array, index, (index += size));
      }
      return result;
    }

    /**
     * Creates an array with all falsey values removed. The values `false`, `null`,
     * `0`, `""`, `undefined`, and `NaN` are falsey.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to compact.
     * @returns {Array} Returns the new array of filtered values.
     * @example
     *
     * _.compact([0, 1, false, 2, '', 3]);
     * // => [1, 2, 3]
     */
    function compact(array) {
      var index = -1,
          length = array ? array.length : 0,
          resIndex = -1,
          result = [];

      while (++index < length) {
        var value = array[index];
        if (value) {
          result[++resIndex] = value;
        }
      }
      return result;
    }

    /**
     * Creates an array of unique `array` values not included in the other
     * provided arrays using [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)
     * for equality comparisons.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to inspect.
     * @param {...Array} [values] The arrays of values to exclude.
     * @returns {Array} Returns the new array of filtered values.
     * @example
     *
     * _.difference([1, 2, 3], [4, 2]);
     * // => [1, 3]
     */
    var difference = restParam(function(array, values) {
      return (isObjectLike(array) && isArrayLike(array))
        ? baseDifference(array, baseFlatten(values, false, true))
        : [];
    });

    /**
     * Creates a slice of `array` with `n` elements dropped from the beginning.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to query.
     * @param {number} [n=1] The number of elements to drop.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * _.drop([1, 2, 3]);
     * // => [2, 3]
     *
     * _.drop([1, 2, 3], 2);
     * // => [3]
     *
     * _.drop([1, 2, 3], 5);
     * // => []
     *
     * _.drop([1, 2, 3], 0);
     * // => [1, 2, 3]
     */
    function drop(array, n, guard) {
      var length = array ? array.length : 0;
      if (!length) {
        return [];
      }
      if (guard ? isIterateeCall(array, n, guard) : n == null) {
        n = 1;
      }
      return baseSlice(array, n < 0 ? 0 : n);
    }

    /**
     * Creates a slice of `array` with `n` elements dropped from the end.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to query.
     * @param {number} [n=1] The number of elements to drop.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * _.dropRight([1, 2, 3]);
     * // => [1, 2]
     *
     * _.dropRight([1, 2, 3], 2);
     * // => [1]
     *
     * _.dropRight([1, 2, 3], 5);
     * // => []
     *
     * _.dropRight([1, 2, 3], 0);
     * // => [1, 2, 3]
     */
    function dropRight(array, n, guard) {
      var length = array ? array.length : 0;
      if (!length) {
        return [];
      }
      if (guard ? isIterateeCall(array, n, guard) : n == null) {
        n = 1;
      }
      n = length - (+n || 0);
      return baseSlice(array, 0, n < 0 ? 0 : n);
    }

    /**
     * Creates a slice of `array` excluding elements dropped from the end.
     * Elements are dropped until `predicate` returns falsey. The predicate is
     * bound to `thisArg` and invoked with three arguments: (value, index, array).
     *
     * If a property name is provided for `predicate` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `predicate` the created `_.matches` style
     * callback returns `true` for elements that match the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to query.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * _.dropRightWhile([1, 2, 3], function(n) {
     *   return n > 1;
     * });
     * // => [1]
     *
     * var users = [
     *   { 'user': 'barney',  'active': true },
     *   { 'user': 'fred',    'active': false },
     *   { 'user': 'pebbles', 'active': false }
     * ];
     *
     * // using the `_.matches` callback shorthand
     * _.pluck(_.dropRightWhile(users, { 'user': 'pebbles', 'active': false }), 'user');
     * // => ['barney', 'fred']
     *
     * // using the `_.matchesProperty` callback shorthand
     * _.pluck(_.dropRightWhile(users, 'active', false), 'user');
     * // => ['barney']
     *
     * // using the `_.property` callback shorthand
     * _.pluck(_.dropRightWhile(users, 'active'), 'user');
     * // => ['barney', 'fred', 'pebbles']
     */
    function dropRightWhile(array, predicate, thisArg) {
      return (array && array.length)
        ? baseWhile(array, getCallback(predicate, thisArg, 3), true, true)
        : [];
    }

    /**
     * Creates a slice of `array` excluding elements dropped from the beginning.
     * Elements are dropped until `predicate` returns falsey. The predicate is
     * bound to `thisArg` and invoked with three arguments: (value, index, array).
     *
     * If a property name is provided for `predicate` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `predicate` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to query.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * _.dropWhile([1, 2, 3], function(n) {
     *   return n < 3;
     * });
     * // => [3]
     *
     * var users = [
     *   { 'user': 'barney',  'active': false },
     *   { 'user': 'fred',    'active': false },
     *   { 'user': 'pebbles', 'active': true }
     * ];
     *
     * // using the `_.matches` callback shorthand
     * _.pluck(_.dropWhile(users, { 'user': 'barney', 'active': false }), 'user');
     * // => ['fred', 'pebbles']
     *
     * // using the `_.matchesProperty` callback shorthand
     * _.pluck(_.dropWhile(users, 'active', false), 'user');
     * // => ['pebbles']
     *
     * // using the `_.property` callback shorthand
     * _.pluck(_.dropWhile(users, 'active'), 'user');
     * // => ['barney', 'fred', 'pebbles']
     */
    function dropWhile(array, predicate, thisArg) {
      return (array && array.length)
        ? baseWhile(array, getCallback(predicate, thisArg, 3), true)
        : [];
    }

    /**
     * Fills elements of `array` with `value` from `start` up to, but not
     * including, `end`.
     *
     * **Note:** This method mutates `array`.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to fill.
     * @param {*} value The value to fill `array` with.
     * @param {number} [start=0] The start position.
     * @param {number} [end=array.length] The end position.
     * @returns {Array} Returns `array`.
     * @example
     *
     * var array = [1, 2, 3];
     *
     * _.fill(array, 'a');
     * console.log(array);
     * // => ['a', 'a', 'a']
     *
     * _.fill(Array(3), 2);
     * // => [2, 2, 2]
     *
     * _.fill([4, 6, 8], '*', 1, 2);
     * // => [4, '*', 8]
     */
    function fill(array, value, start, end) {
      var length = array ? array.length : 0;
      if (!length) {
        return [];
      }
      if (start && typeof start != 'number' && isIterateeCall(array, value, start)) {
        start = 0;
        end = length;
      }
      return baseFill(array, value, start, end);
    }

    /**
     * This method is like `_.find` except that it returns the index of the first
     * element `predicate` returns truthy for instead of the element itself.
     *
     * If a property name is provided for `predicate` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `predicate` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to search.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {number} Returns the index of the found element, else `-1`.
     * @example
     *
     * var users = [
     *   { 'user': 'barney',  'active': false },
     *   { 'user': 'fred',    'active': false },
     *   { 'user': 'pebbles', 'active': true }
     * ];
     *
     * _.findIndex(users, function(chr) {
     *   return chr.user == 'barney';
     * });
     * // => 0
     *
     * // using the `_.matches` callback shorthand
     * _.findIndex(users, { 'user': 'fred', 'active': false });
     * // => 1
     *
     * // using the `_.matchesProperty` callback shorthand
     * _.findIndex(users, 'active', false);
     * // => 0
     *
     * // using the `_.property` callback shorthand
     * _.findIndex(users, 'active');
     * // => 2
     */
    var findIndex = createFindIndex();

    /**
     * This method is like `_.findIndex` except that it iterates over elements
     * of `collection` from right to left.
     *
     * If a property name is provided for `predicate` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `predicate` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to search.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {number} Returns the index of the found element, else `-1`.
     * @example
     *
     * var users = [
     *   { 'user': 'barney',  'active': true },
     *   { 'user': 'fred',    'active': false },
     *   { 'user': 'pebbles', 'active': false }
     * ];
     *
     * _.findLastIndex(users, function(chr) {
     *   return chr.user == 'pebbles';
     * });
     * // => 2
     *
     * // using the `_.matches` callback shorthand
     * _.findLastIndex(users, { 'user': 'barney', 'active': true });
     * // => 0
     *
     * // using the `_.matchesProperty` callback shorthand
     * _.findLastIndex(users, 'active', false);
     * // => 2
     *
     * // using the `_.property` callback shorthand
     * _.findLastIndex(users, 'active');
     * // => 0
     */
    var findLastIndex = createFindIndex(true);

    /**
     * Gets the first element of `array`.
     *
     * @static
     * @memberOf _
     * @alias head
     * @category Array
     * @param {Array} array The array to query.
     * @returns {*} Returns the first element of `array`.
     * @example
     *
     * _.first([1, 2, 3]);
     * // => 1
     *
     * _.first([]);
     * // => undefined
     */
    function first(array) {
      return array ? array[0] : undefined;
    }

    /**
     * Flattens a nested array. If `isDeep` is `true` the array is recursively
     * flattened, otherwise it is only flattened a single level.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to flatten.
     * @param {boolean} [isDeep] Specify a deep flatten.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {Array} Returns the new flattened array.
     * @example
     *
     * _.flatten([1, [2, 3, [4]]]);
     * // => [1, 2, 3, [4]]
     *
     * // using `isDeep`
     * _.flatten([1, [2, 3, [4]]], true);
     * // => [1, 2, 3, 4]
     */
    function flatten(array, isDeep, guard) {
      var length = array ? array.length : 0;
      if (guard && isIterateeCall(array, isDeep, guard)) {
        isDeep = false;
      }
      return length ? baseFlatten(array, isDeep) : [];
    }

    /**
     * Recursively flattens a nested array.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to recursively flatten.
     * @returns {Array} Returns the new flattened array.
     * @example
     *
     * _.flattenDeep([1, [2, 3, [4]]]);
     * // => [1, 2, 3, 4]
     */
    function flattenDeep(array) {
      var length = array ? array.length : 0;
      return length ? baseFlatten(array, true) : [];
    }

    /**
     * Gets the index at which the first occurrence of `value` is found in `array`
     * using [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)
     * for equality comparisons. If `fromIndex` is negative, it is used as the offset
     * from the end of `array`. If `array` is sorted providing `true` for `fromIndex`
     * performs a faster binary search.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to search.
     * @param {*} value The value to search for.
     * @param {boolean|number} [fromIndex=0] The index to search from or `true`
     *  to perform a binary search on a sorted array.
     * @returns {number} Returns the index of the matched value, else `-1`.
     * @example
     *
     * _.indexOf([1, 2, 1, 2], 2);
     * // => 1
     *
     * // using `fromIndex`
     * _.indexOf([1, 2, 1, 2], 2, 2);
     * // => 3
     *
     * // performing a binary search
     * _.indexOf([1, 1, 2, 2], 2, true);
     * // => 2
     */
    function indexOf(array, value, fromIndex) {
      var length = array ? array.length : 0;
      if (!length) {
        return -1;
      }
      if (typeof fromIndex == 'number') {
        fromIndex = fromIndex < 0 ? nativeMax(length + fromIndex, 0) : fromIndex;
      } else if (fromIndex) {
        var index = binaryIndex(array, value);
        if (index < length &&
            (value === value ? (value === array[index]) : (array[index] !== array[index]))) {
          return index;
        }
        return -1;
      }
      return baseIndexOf(array, value, fromIndex || 0);
    }

    /**
     * Gets all but the last element of `array`.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to query.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * _.initial([1, 2, 3]);
     * // => [1, 2]
     */
    function initial(array) {
      return dropRight(array, 1);
    }

    /**
     * Creates an array of unique values that are included in all of the provided
     * arrays using [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)
     * for equality comparisons.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {...Array} [arrays] The arrays to inspect.
     * @returns {Array} Returns the new array of shared values.
     * @example
     * _.intersection([1, 2], [4, 2], [2, 1]);
     * // => [2]
     */
    var intersection = restParam(function(arrays) {
      var othLength = arrays.length,
          othIndex = othLength,
          caches = Array(length),
          indexOf = getIndexOf(),
          isCommon = indexOf == baseIndexOf,
          result = [];

      while (othIndex--) {
        var value = arrays[othIndex] = isArrayLike(value = arrays[othIndex]) ? value : [];
        caches[othIndex] = (isCommon && value.length >= 120) ? createCache(othIndex && value) : null;
      }
      var array = arrays[0],
          index = -1,
          length = array ? array.length : 0,
          seen = caches[0];

      outer:
      while (++index < length) {
        value = array[index];
        if ((seen ? cacheIndexOf(seen, value) : indexOf(result, value, 0)) < 0) {
          var othIndex = othLength;
          while (--othIndex) {
            var cache = caches[othIndex];
            if ((cache ? cacheIndexOf(cache, value) : indexOf(arrays[othIndex], value, 0)) < 0) {
              continue outer;
            }
          }
          if (seen) {
            seen.push(value);
          }
          result.push(value);
        }
      }
      return result;
    });

    /**
     * Gets the last element of `array`.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to query.
     * @returns {*} Returns the last element of `array`.
     * @example
     *
     * _.last([1, 2, 3]);
     * // => 3
     */
    function last(array) {
      var length = array ? array.length : 0;
      return length ? array[length - 1] : undefined;
    }

    /**
     * This method is like `_.indexOf` except that it iterates over elements of
     * `array` from right to left.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to search.
     * @param {*} value The value to search for.
     * @param {boolean|number} [fromIndex=array.length-1] The index to search from
     *  or `true` to perform a binary search on a sorted array.
     * @returns {number} Returns the index of the matched value, else `-1`.
     * @example
     *
     * _.lastIndexOf([1, 2, 1, 2], 2);
     * // => 3
     *
     * // using `fromIndex`
     * _.lastIndexOf([1, 2, 1, 2], 2, 2);
     * // => 1
     *
     * // performing a binary search
     * _.lastIndexOf([1, 1, 2, 2], 2, true);
     * // => 3
     */
    function lastIndexOf(array, value, fromIndex) {
      var length = array ? array.length : 0;
      if (!length) {
        return -1;
      }
      var index = length;
      if (typeof fromIndex == 'number') {
        index = (fromIndex < 0 ? nativeMax(length + fromIndex, 0) : nativeMin(fromIndex || 0, length - 1)) + 1;
      } else if (fromIndex) {
        index = binaryIndex(array, value, true) - 1;
        var other = array[index];
        if (value === value ? (value === other) : (other !== other)) {
          return index;
        }
        return -1;
      }
      if (value !== value) {
        return indexOfNaN(array, index, true);
      }
      while (index--) {
        if (array[index] === value) {
          return index;
        }
      }
      return -1;
    }

    /**
     * Removes all provided values from `array` using
     * [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)
     * for equality comparisons.
     *
     * **Note:** Unlike `_.without`, this method mutates `array`.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to modify.
     * @param {...*} [values] The values to remove.
     * @returns {Array} Returns `array`.
     * @example
     *
     * var array = [1, 2, 3, 1, 2, 3];
     *
     * _.pull(array, 2, 3);
     * console.log(array);
     * // => [1, 1]
     */
    function pull() {
      var args = arguments,
          array = args[0];

      if (!(array && array.length)) {
        return array;
      }
      var index = 0,
          indexOf = getIndexOf(),
          length = args.length;

      while (++index < length) {
        var fromIndex = 0,
            value = args[index];

        while ((fromIndex = indexOf(array, value, fromIndex)) > -1) {
          splice.call(array, fromIndex, 1);
        }
      }
      return array;
    }

    /**
     * Removes elements from `array` corresponding to the given indexes and returns
     * an array of the removed elements. Indexes may be specified as an array of
     * indexes or as individual arguments.
     *
     * **Note:** Unlike `_.at`, this method mutates `array`.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to modify.
     * @param {...(number|number[])} [indexes] The indexes of elements to remove,
     *  specified as individual indexes or arrays of indexes.
     * @returns {Array} Returns the new array of removed elements.
     * @example
     *
     * var array = [5, 10, 15, 20];
     * var evens = _.pullAt(array, 1, 3);
     *
     * console.log(array);
     * // => [5, 15]
     *
     * console.log(evens);
     * // => [10, 20]
     */
    var pullAt = restParam(function(array, indexes) {
      indexes = baseFlatten(indexes);

      var result = baseAt(array, indexes);
      basePullAt(array, indexes.sort(baseCompareAscending));
      return result;
    });

    /**
     * Removes all elements from `array` that `predicate` returns truthy for
     * and returns an array of the removed elements. The predicate is bound to
     * `thisArg` and invoked with three arguments: (value, index, array).
     *
     * If a property name is provided for `predicate` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `predicate` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * **Note:** Unlike `_.filter`, this method mutates `array`.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to modify.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {Array} Returns the new array of removed elements.
     * @example
     *
     * var array = [1, 2, 3, 4];
     * var evens = _.remove(array, function(n) {
     *   return n % 2 == 0;
     * });
     *
     * console.log(array);
     * // => [1, 3]
     *
     * console.log(evens);
     * // => [2, 4]
     */
    function remove(array, predicate, thisArg) {
      var result = [];
      if (!(array && array.length)) {
        return result;
      }
      var index = -1,
          indexes = [],
          length = array.length;

      predicate = getCallback(predicate, thisArg, 3);
      while (++index < length) {
        var value = array[index];
        if (predicate(value, index, array)) {
          result.push(value);
          indexes.push(index);
        }
      }
      basePullAt(array, indexes);
      return result;
    }

    /**
     * Gets all but the first element of `array`.
     *
     * @static
     * @memberOf _
     * @alias tail
     * @category Array
     * @param {Array} array The array to query.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * _.rest([1, 2, 3]);
     * // => [2, 3]
     */
    function rest(array) {
      return drop(array, 1);
    }

    /**
     * Creates a slice of `array` from `start` up to, but not including, `end`.
     *
     * **Note:** This method is used instead of `Array#slice` to support node
     * lists in IE < 9 and to ensure dense arrays are returned.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to slice.
     * @param {number} [start=0] The start position.
     * @param {number} [end=array.length] The end position.
     * @returns {Array} Returns the slice of `array`.
     */
    function slice(array, start, end) {
      var length = array ? array.length : 0;
      if (!length) {
        return [];
      }
      if (end && typeof end != 'number' && isIterateeCall(array, start, end)) {
        start = 0;
        end = length;
      }
      return baseSlice(array, start, end);
    }

    /**
     * Uses a binary search to determine the lowest index at which `value` should
     * be inserted into `array` in order to maintain its sort order. If an iteratee
     * function is provided it is invoked for `value` and each element of `array`
     * to compute their sort ranking. The iteratee is bound to `thisArg` and
     * invoked with one argument; (value).
     *
     * If a property name is provided for `iteratee` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `iteratee` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The sorted array to inspect.
     * @param {*} value The value to evaluate.
     * @param {Function|Object|string} [iteratee=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {number} Returns the index at which `value` should be inserted
     *  into `array`.
     * @example
     *
     * _.sortedIndex([30, 50], 40);
     * // => 1
     *
     * _.sortedIndex([4, 4, 5, 5], 5);
     * // => 2
     *
     * var dict = { 'data': { 'thirty': 30, 'forty': 40, 'fifty': 50 } };
     *
     * // using an iteratee function
     * _.sortedIndex(['thirty', 'fifty'], 'forty', function(word) {
     *   return this.data[word];
     * }, dict);
     * // => 1
     *
     * // using the `_.property` callback shorthand
     * _.sortedIndex([{ 'x': 30 }, { 'x': 50 }], { 'x': 40 }, 'x');
     * // => 1
     */
    var sortedIndex = createSortedIndex();

    /**
     * This method is like `_.sortedIndex` except that it returns the highest
     * index at which `value` should be inserted into `array` in order to
     * maintain its sort order.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The sorted array to inspect.
     * @param {*} value The value to evaluate.
     * @param {Function|Object|string} [iteratee=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {number} Returns the index at which `value` should be inserted
     *  into `array`.
     * @example
     *
     * _.sortedLastIndex([4, 4, 5, 5], 5);
     * // => 4
     */
    var sortedLastIndex = createSortedIndex(true);

    /**
     * Creates a slice of `array` with `n` elements taken from the beginning.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to query.
     * @param {number} [n=1] The number of elements to take.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * _.take([1, 2, 3]);
     * // => [1]
     *
     * _.take([1, 2, 3], 2);
     * // => [1, 2]
     *
     * _.take([1, 2, 3], 5);
     * // => [1, 2, 3]
     *
     * _.take([1, 2, 3], 0);
     * // => []
     */
    function take(array, n, guard) {
      var length = array ? array.length : 0;
      if (!length) {
        return [];
      }
      if (guard ? isIterateeCall(array, n, guard) : n == null) {
        n = 1;
      }
      return baseSlice(array, 0, n < 0 ? 0 : n);
    }

    /**
     * Creates a slice of `array` with `n` elements taken from the end.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to query.
     * @param {number} [n=1] The number of elements to take.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * _.takeRight([1, 2, 3]);
     * // => [3]
     *
     * _.takeRight([1, 2, 3], 2);
     * // => [2, 3]
     *
     * _.takeRight([1, 2, 3], 5);
     * // => [1, 2, 3]
     *
     * _.takeRight([1, 2, 3], 0);
     * // => []
     */
    function takeRight(array, n, guard) {
      var length = array ? array.length : 0;
      if (!length) {
        return [];
      }
      if (guard ? isIterateeCall(array, n, guard) : n == null) {
        n = 1;
      }
      n = length - (+n || 0);
      return baseSlice(array, n < 0 ? 0 : n);
    }

    /**
     * Creates a slice of `array` with elements taken from the end. Elements are
     * taken until `predicate` returns falsey. The predicate is bound to `thisArg`
     * and invoked with three arguments: (value, index, array).
     *
     * If a property name is provided for `predicate` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `predicate` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to query.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * _.takeRightWhile([1, 2, 3], function(n) {
     *   return n > 1;
     * });
     * // => [2, 3]
     *
     * var users = [
     *   { 'user': 'barney',  'active': true },
     *   { 'user': 'fred',    'active': false },
     *   { 'user': 'pebbles', 'active': false }
     * ];
     *
     * // using the `_.matches` callback shorthand
     * _.pluck(_.takeRightWhile(users, { 'user': 'pebbles', 'active': false }), 'user');
     * // => ['pebbles']
     *
     * // using the `_.matchesProperty` callback shorthand
     * _.pluck(_.takeRightWhile(users, 'active', false), 'user');
     * // => ['fred', 'pebbles']
     *
     * // using the `_.property` callback shorthand
     * _.pluck(_.takeRightWhile(users, 'active'), 'user');
     * // => []
     */
    function takeRightWhile(array, predicate, thisArg) {
      return (array && array.length)
        ? baseWhile(array, getCallback(predicate, thisArg, 3), false, true)
        : [];
    }

    /**
     * Creates a slice of `array` with elements taken from the beginning. Elements
     * are taken until `predicate` returns falsey. The predicate is bound to
     * `thisArg` and invoked with three arguments: (value, index, array).
     *
     * If a property name is provided for `predicate` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `predicate` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to query.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * _.takeWhile([1, 2, 3], function(n) {
     *   return n < 3;
     * });
     * // => [1, 2]
     *
     * var users = [
     *   { 'user': 'barney',  'active': false },
     *   { 'user': 'fred',    'active': false},
     *   { 'user': 'pebbles', 'active': true }
     * ];
     *
     * // using the `_.matches` callback shorthand
     * _.pluck(_.takeWhile(users, { 'user': 'barney', 'active': false }), 'user');
     * // => ['barney']
     *
     * // using the `_.matchesProperty` callback shorthand
     * _.pluck(_.takeWhile(users, 'active', false), 'user');
     * // => ['barney', 'fred']
     *
     * // using the `_.property` callback shorthand
     * _.pluck(_.takeWhile(users, 'active'), 'user');
     * // => []
     */
    function takeWhile(array, predicate, thisArg) {
      return (array && array.length)
        ? baseWhile(array, getCallback(predicate, thisArg, 3))
        : [];
    }

    /**
     * Creates an array of unique values, in order, from all of the provided arrays
     * using [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)
     * for equality comparisons.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {...Array} [arrays] The arrays to inspect.
     * @returns {Array} Returns the new array of combined values.
     * @example
     *
     * _.union([1, 2], [4, 2], [2, 1]);
     * // => [1, 2, 4]
     */
    var union = restParam(function(arrays) {
      return baseUniq(baseFlatten(arrays, false, true));
    });

    /**
     * Creates a duplicate-free version of an array, using
     * [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)
     * for equality comparisons, in which only the first occurence of each element
     * is kept. Providing `true` for `isSorted` performs a faster search algorithm
     * for sorted arrays. If an iteratee function is provided it is invoked for
     * each element in the array to generate the criterion by which uniqueness
     * is computed. The `iteratee` is bound to `thisArg` and invoked with three
     * arguments: (value, index, array).
     *
     * If a property name is provided for `iteratee` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `iteratee` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @alias unique
     * @category Array
     * @param {Array} array The array to inspect.
     * @param {boolean} [isSorted] Specify the array is sorted.
     * @param {Function|Object|string} [iteratee] The function invoked per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Array} Returns the new duplicate-value-free array.
     * @example
     *
     * _.uniq([2, 1, 2]);
     * // => [2, 1]
     *
     * // using `isSorted`
     * _.uniq([1, 1, 2], true);
     * // => [1, 2]
     *
     * // using an iteratee function
     * _.uniq([1, 2.5, 1.5, 2], function(n) {
     *   return this.floor(n);
     * }, Math);
     * // => [1, 2.5]
     *
     * // using the `_.property` callback shorthand
     * _.uniq([{ 'x': 1 }, { 'x': 2 }, { 'x': 1 }], 'x');
     * // => [{ 'x': 1 }, { 'x': 2 }]
     */
    function uniq(array, isSorted, iteratee, thisArg) {
      var length = array ? array.length : 0;
      if (!length) {
        return [];
      }
      if (isSorted != null && typeof isSorted != 'boolean') {
        thisArg = iteratee;
        iteratee = isIterateeCall(array, isSorted, thisArg) ? undefined : isSorted;
        isSorted = false;
      }
      var callback = getCallback();
      if (!(iteratee == null && callback === baseCallback)) {
        iteratee = callback(iteratee, thisArg, 3);
      }
      return (isSorted && getIndexOf() == baseIndexOf)
        ? sortedUniq(array, iteratee)
        : baseUniq(array, iteratee);
    }

    /**
     * This method is like `_.zip` except that it accepts an array of grouped
     * elements and creates an array regrouping the elements to their pre-zip
     * configuration.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array of grouped elements to process.
     * @returns {Array} Returns the new array of regrouped elements.
     * @example
     *
     * var zipped = _.zip(['fred', 'barney'], [30, 40], [true, false]);
     * // => [['fred', 30, true], ['barney', 40, false]]
     *
     * _.unzip(zipped);
     * // => [['fred', 'barney'], [30, 40], [true, false]]
     */
    function unzip(array) {
      if (!(array && array.length)) {
        return [];
      }
      var index = -1,
          length = 0;

      array = arrayFilter(array, function(group) {
        if (isArrayLike(group)) {
          length = nativeMax(group.length, length);
          return true;
        }
      });
      var result = Array(length);
      while (++index < length) {
        result[index] = arrayMap(array, baseProperty(index));
      }
      return result;
    }

    /**
     * This method is like `_.unzip` except that it accepts an iteratee to specify
     * how regrouped values should be combined. The `iteratee` is bound to `thisArg`
     * and invoked with four arguments: (accumulator, value, index, group).
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array of grouped elements to process.
     * @param {Function} [iteratee] The function to combine regrouped values.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Array} Returns the new array of regrouped elements.
     * @example
     *
     * var zipped = _.zip([1, 2], [10, 20], [100, 200]);
     * // => [[1, 10, 100], [2, 20, 200]]
     *
     * _.unzipWith(zipped, _.add);
     * // => [3, 30, 300]
     */
    function unzipWith(array, iteratee, thisArg) {
      var length = array ? array.length : 0;
      if (!length) {
        return [];
      }
      var result = unzip(array);
      if (iteratee == null) {
        return result;
      }
      iteratee = bindCallback(iteratee, thisArg, 4);
      return arrayMap(result, function(group) {
        return arrayReduce(group, iteratee, undefined, true);
      });
    }

    /**
     * Creates an array excluding all provided values using
     * [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)
     * for equality comparisons.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to filter.
     * @param {...*} [values] The values to exclude.
     * @returns {Array} Returns the new array of filtered values.
     * @example
     *
     * _.without([1, 2, 1, 3], 1, 2);
     * // => [3]
     */
    var without = restParam(function(array, values) {
      return isArrayLike(array)
        ? baseDifference(array, values)
        : [];
    });

    /**
     * Creates an array of unique values that is the [symmetric difference](https://en.wikipedia.org/wiki/Symmetric_difference)
     * of the provided arrays.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {...Array} [arrays] The arrays to inspect.
     * @returns {Array} Returns the new array of values.
     * @example
     *
     * _.xor([1, 2], [4, 2]);
     * // => [1, 4]
     */
    function xor() {
      var index = -1,
          length = arguments.length;

      while (++index < length) {
        var array = arguments[index];
        if (isArrayLike(array)) {
          var result = result
            ? arrayPush(baseDifference(result, array), baseDifference(array, result))
            : array;
        }
      }
      return result ? baseUniq(result) : [];
    }

    /**
     * Creates an array of grouped elements, the first of which contains the first
     * elements of the given arrays, the second of which contains the second elements
     * of the given arrays, and so on.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {...Array} [arrays] The arrays to process.
     * @returns {Array} Returns the new array of grouped elements.
     * @example
     *
     * _.zip(['fred', 'barney'], [30, 40], [true, false]);
     * // => [['fred', 30, true], ['barney', 40, false]]
     */
    var zip = restParam(unzip);

    /**
     * The inverse of `_.pairs`; this method returns an object composed from arrays
     * of property names and values. Provide either a single two dimensional array,
     * e.g. `[[key1, value1], [key2, value2]]` or two arrays, one of property names
     * and one of corresponding values.
     *
     * @static
     * @memberOf _
     * @alias object
     * @category Array
     * @param {Array} props The property names.
     * @param {Array} [values=[]] The property values.
     * @returns {Object} Returns the new object.
     * @example
     *
     * _.zipObject([['fred', 30], ['barney', 40]]);
     * // => { 'fred': 30, 'barney': 40 }
     *
     * _.zipObject(['fred', 'barney'], [30, 40]);
     * // => { 'fred': 30, 'barney': 40 }
     */
    function zipObject(props, values) {
      var index = -1,
          length = props ? props.length : 0,
          result = {};

      if (length && !values && !isArray(props[0])) {
        values = [];
      }
      while (++index < length) {
        var key = props[index];
        if (values) {
          result[key] = values[index];
        } else if (key) {
          result[key[0]] = key[1];
        }
      }
      return result;
    }

    /**
     * This method is like `_.zip` except that it accepts an iteratee to specify
     * how grouped values should be combined. The `iteratee` is bound to `thisArg`
     * and invoked with four arguments: (accumulator, value, index, group).
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {...Array} [arrays] The arrays to process.
     * @param {Function} [iteratee] The function to combine grouped values.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Array} Returns the new array of grouped elements.
     * @example
     *
     * _.zipWith([1, 2], [10, 20], [100, 200], _.add);
     * // => [111, 222]
     */
    var zipWith = restParam(function(arrays) {
      var length = arrays.length,
          iteratee = length > 2 ? arrays[length - 2] : undefined,
          thisArg = length > 1 ? arrays[length - 1] : undefined;

      if (length > 2 && typeof iteratee == 'function') {
        length -= 2;
      } else {
        iteratee = (length > 1 && typeof thisArg == 'function') ? (--length, thisArg) : undefined;
        thisArg = undefined;
      }
      arrays.length = length;
      return unzipWith(arrays, iteratee, thisArg);
    });

    /*------------------------------------------------------------------------*/

    /**
     * Creates a `lodash` object that wraps `value` with explicit method
     * chaining enabled.
     *
     * @static
     * @memberOf _
     * @category Chain
     * @param {*} value The value to wrap.
     * @returns {Object} Returns the new `lodash` wrapper instance.
     * @example
     *
     * var users = [
     *   { 'user': 'barney',  'age': 36 },
     *   { 'user': 'fred',    'age': 40 },
     *   { 'user': 'pebbles', 'age': 1 }
     * ];
     *
     * var youngest = _.chain(users)
     *   .sortBy('age')
     *   .map(function(chr) {
     *     return chr.user + ' is ' + chr.age;
     *   })
     *   .first()
     *   .value();
     * // => 'pebbles is 1'
     */
    function chain(value) {
      var result = lodash(value);
      result.__chain__ = true;
      return result;
    }

    /**
     * This method invokes `interceptor` and returns `value`. The interceptor is
     * bound to `thisArg` and invoked with one argument; (value). The purpose of
     * this method is to "tap into" a method chain in order to perform operations
     * on intermediate results within the chain.
     *
     * @static
     * @memberOf _
     * @category Chain
     * @param {*} value The value to provide to `interceptor`.
     * @param {Function} interceptor The function to invoke.
     * @param {*} [thisArg] The `this` binding of `interceptor`.
     * @returns {*} Returns `value`.
     * @example
     *
     * _([1, 2, 3])
     *  .tap(function(array) {
     *    array.pop();
     *  })
     *  .reverse()
     *  .value();
     * // => [2, 1]
     */
    function tap(value, interceptor, thisArg) {
      interceptor.call(thisArg, value);
      return value;
    }

    /**
     * This method is like `_.tap` except that it returns the result of `interceptor`.
     *
     * @static
     * @memberOf _
     * @category Chain
     * @param {*} value The value to provide to `interceptor`.
     * @param {Function} interceptor The function to invoke.
     * @param {*} [thisArg] The `this` binding of `interceptor`.
     * @returns {*} Returns the result of `interceptor`.
     * @example
     *
     * _('  abc  ')
     *  .chain()
     *  .trim()
     *  .thru(function(value) {
     *    return [value];
     *  })
     *  .value();
     * // => ['abc']
     */
    function thru(value, interceptor, thisArg) {
      return interceptor.call(thisArg, value);
    }

    /**
     * Enables explicit method chaining on the wrapper object.
     *
     * @name chain
     * @memberOf _
     * @category Chain
     * @returns {Object} Returns the new `lodash` wrapper instance.
     * @example
     *
     * var users = [
     *   { 'user': 'barney', 'age': 36 },
     *   { 'user': 'fred',   'age': 40 }
     * ];
     *
     * // without explicit chaining
     * _(users).first();
     * // => { 'user': 'barney', 'age': 36 }
     *
     * // with explicit chaining
     * _(users).chain()
     *   .first()
     *   .pick('user')
     *   .value();
     * // => { 'user': 'barney' }
     */
    function wrapperChain() {
      return chain(this);
    }

    /**
     * Executes the chained sequence and returns the wrapped result.
     *
     * @name commit
     * @memberOf _
     * @category Chain
     * @returns {Object} Returns the new `lodash` wrapper instance.
     * @example
     *
     * var array = [1, 2];
     * var wrapped = _(array).push(3);
     *
     * console.log(array);
     * // => [1, 2]
     *
     * wrapped = wrapped.commit();
     * console.log(array);
     * // => [1, 2, 3]
     *
     * wrapped.last();
     * // => 3
     *
     * console.log(array);
     * // => [1, 2, 3]
     */
    function wrapperCommit() {
      return new LodashWrapper(this.value(), this.__chain__);
    }

    /**
     * Creates a new array joining a wrapped array with any additional arrays
     * and/or values.
     *
     * @name concat
     * @memberOf _
     * @category Chain
     * @param {...*} [values] The values to concatenate.
     * @returns {Array} Returns the new concatenated array.
     * @example
     *
     * var array = [1];
     * var wrapped = _(array).concat(2, [3], [[4]]);
     *
     * console.log(wrapped.value());
     * // => [1, 2, 3, [4]]
     *
     * console.log(array);
     * // => [1]
     */
    var wrapperConcat = restParam(function(values) {
      values = baseFlatten(values);
      return this.thru(function(array) {
        return arrayConcat(isArray(array) ? array : [toObject(array)], values);
      });
    });

    /**
     * Creates a clone of the chained sequence planting `value` as the wrapped value.
     *
     * @name plant
     * @memberOf _
     * @category Chain
     * @returns {Object} Returns the new `lodash` wrapper instance.
     * @example
     *
     * var array = [1, 2];
     * var wrapped = _(array).map(function(value) {
     *   return Math.pow(value, 2);
     * });
     *
     * var other = [3, 4];
     * var otherWrapped = wrapped.plant(other);
     *
     * otherWrapped.value();
     * // => [9, 16]
     *
     * wrapped.value();
     * // => [1, 4]
     */
    function wrapperPlant(value) {
      var result,
          parent = this;

      while (parent instanceof baseLodash) {
        var clone = wrapperClone(parent);
        if (result) {
          previous.__wrapped__ = clone;
        } else {
          result = clone;
        }
        var previous = clone;
        parent = parent.__wrapped__;
      }
      previous.__wrapped__ = value;
      return result;
    }

    /**
     * Reverses the wrapped array so the first element becomes the last, the
     * second element becomes the second to last, and so on.
     *
     * **Note:** This method mutates the wrapped array.
     *
     * @name reverse
     * @memberOf _
     * @category Chain
     * @returns {Object} Returns the new reversed `lodash` wrapper instance.
     * @example
     *
     * var array = [1, 2, 3];
     *
     * _(array).reverse().value()
     * // => [3, 2, 1]
     *
     * console.log(array);
     * // => [3, 2, 1]
     */
    function wrapperReverse() {
      var value = this.__wrapped__;

      var interceptor = function(value) {
        return (wrapped && wrapped.__dir__ < 0) ? value : value.reverse();
      };
      if (value instanceof LazyWrapper) {
        var wrapped = value;
        if (this.__actions__.length) {
          wrapped = new LazyWrapper(this);
        }
        wrapped = wrapped.reverse();
        wrapped.__actions__.push({ 'func': thru, 'args': [interceptor], 'thisArg': undefined });
        return new LodashWrapper(wrapped, this.__chain__);
      }
      return this.thru(interceptor);
    }

    /**
     * Produces the result of coercing the unwrapped value to a string.
     *
     * @name toString
     * @memberOf _
     * @category Chain
     * @returns {string} Returns the coerced string value.
     * @example
     *
     * _([1, 2, 3]).toString();
     * // => '1,2,3'
     */
    function wrapperToString() {
      return (this.value() + '');
    }

    /**
     * Executes the chained sequence to extract the unwrapped value.
     *
     * @name value
     * @memberOf _
     * @alias run, toJSON, valueOf
     * @category Chain
     * @returns {*} Returns the resolved unwrapped value.
     * @example
     *
     * _([1, 2, 3]).value();
     * // => [1, 2, 3]
     */
    function wrapperValue() {
      return baseWrapperValue(this.__wrapped__, this.__actions__);
    }

    /*------------------------------------------------------------------------*/

    /**
     * Creates an array of elements corresponding to the given keys, or indexes,
     * of `collection`. Keys may be specified as individual arguments or as arrays
     * of keys.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {...(number|number[]|string|string[])} [props] The property names
     *  or indexes of elements to pick, specified individually or in arrays.
     * @returns {Array} Returns the new array of picked elements.
     * @example
     *
     * _.at(['a', 'b', 'c'], [0, 2]);
     * // => ['a', 'c']
     *
     * _.at(['barney', 'fred', 'pebbles'], 0, 2);
     * // => ['barney', 'pebbles']
     */
    var at = restParam(function(collection, props) {
      return baseAt(collection, baseFlatten(props));
    });

    /**
     * Creates an object composed of keys generated from the results of running
     * each element of `collection` through `iteratee`. The corresponding value
     * of each key is the number of times the key was returned by `iteratee`.
     * The `iteratee` is bound to `thisArg` and invoked with three arguments:
     * (value, index|key, collection).
     *
     * If a property name is provided for `iteratee` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `iteratee` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [iteratee=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Object} Returns the composed aggregate object.
     * @example
     *
     * _.countBy([4.3, 6.1, 6.4], function(n) {
     *   return Math.floor(n);
     * });
     * // => { '4': 1, '6': 2 }
     *
     * _.countBy([4.3, 6.1, 6.4], function(n) {
     *   return this.floor(n);
     * }, Math);
     * // => { '4': 1, '6': 2 }
     *
     * _.countBy(['one', 'two', 'three'], 'length');
     * // => { '3': 2, '5': 1 }
     */
    var countBy = createAggregator(function(result, value, key) {
      hasOwnProperty.call(result, key) ? ++result[key] : (result[key] = 1);
    });

    /**
     * Checks if `predicate` returns truthy for **all** elements of `collection`.
     * The predicate is bound to `thisArg` and invoked with three arguments:
     * (value, index|key, collection).
     *
     * If a property name is provided for `predicate` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `predicate` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @alias all
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {boolean} Returns `true` if all elements pass the predicate check,
     *  else `false`.
     * @example
     *
     * _.every([true, 1, null, 'yes'], Boolean);
     * // => false
     *
     * var users = [
     *   { 'user': 'barney', 'active': false },
     *   { 'user': 'fred',   'active': false }
     * ];
     *
     * // using the `_.matches` callback shorthand
     * _.every(users, { 'user': 'barney', 'active': false });
     * // => false
     *
     * // using the `_.matchesProperty` callback shorthand
     * _.every(users, 'active', false);
     * // => true
     *
     * // using the `_.property` callback shorthand
     * _.every(users, 'active');
     * // => false
     */
    function every(collection, predicate, thisArg) {
      var func = isArray(collection) ? arrayEvery : baseEvery;
      if (thisArg && isIterateeCall(collection, predicate, thisArg)) {
        predicate = undefined;
      }
      if (typeof predicate != 'function' || thisArg !== undefined) {
        predicate = getCallback(predicate, thisArg, 3);
      }
      return func(collection, predicate);
    }

    /**
     * Iterates over elements of `collection`, returning an array of all elements
     * `predicate` returns truthy for. The predicate is bound to `thisArg` and
     * invoked with three arguments: (value, index|key, collection).
     *
     * If a property name is provided for `predicate` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `predicate` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @alias select
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {Array} Returns the new filtered array.
     * @example
     *
     * _.filter([4, 5, 6], function(n) {
     *   return n % 2 == 0;
     * });
     * // => [4, 6]
     *
     * var users = [
     *   { 'user': 'barney', 'age': 36, 'active': true },
     *   { 'user': 'fred',   'age': 40, 'active': false }
     * ];
     *
     * // using the `_.matches` callback shorthand
     * _.pluck(_.filter(users, { 'age': 36, 'active': true }), 'user');
     * // => ['barney']
     *
     * // using the `_.matchesProperty` callback shorthand
     * _.pluck(_.filter(users, 'active', false), 'user');
     * // => ['fred']
     *
     * // using the `_.property` callback shorthand
     * _.pluck(_.filter(users, 'active'), 'user');
     * // => ['barney']
     */
    function filter(collection, predicate, thisArg) {
      var func = isArray(collection) ? arrayFilter : baseFilter;
      predicate = getCallback(predicate, thisArg, 3);
      return func(collection, predicate);
    }

    /**
     * Iterates over elements of `collection`, returning the first element
     * `predicate` returns truthy for. The predicate is bound to `thisArg` and
     * invoked with three arguments: (value, index|key, collection).
     *
     * If a property name is provided for `predicate` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `predicate` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @alias detect
     * @category Collection
     * @param {Array|Object|string} collection The collection to search.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {*} Returns the matched element, else `undefined`.
     * @example
     *
     * var users = [
     *   { 'user': 'barney',  'age': 36, 'active': true },
     *   { 'user': 'fred',    'age': 40, 'active': false },
     *   { 'user': 'pebbles', 'age': 1,  'active': true }
     * ];
     *
     * _.result(_.find(users, function(chr) {
     *   return chr.age < 40;
     * }), 'user');
     * // => 'barney'
     *
     * // using the `_.matches` callback shorthand
     * _.result(_.find(users, { 'age': 1, 'active': true }), 'user');
     * // => 'pebbles'
     *
     * // using the `_.matchesProperty` callback shorthand
     * _.result(_.find(users, 'active', false), 'user');
     * // => 'fred'
     *
     * // using the `_.property` callback shorthand
     * _.result(_.find(users, 'active'), 'user');
     * // => 'barney'
     */
    var find = createFind(baseEach);

    /**
     * This method is like `_.find` except that it iterates over elements of
     * `collection` from right to left.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to search.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {*} Returns the matched element, else `undefined`.
     * @example
     *
     * _.findLast([1, 2, 3, 4], function(n) {
     *   return n % 2 == 1;
     * });
     * // => 3
     */
    var findLast = createFind(baseEachRight, true);

    /**
     * Performs a deep comparison between each element in `collection` and the
     * source object, returning the first element that has equivalent property
     * values.
     *
     * **Note:** This method supports comparing arrays, booleans, `Date` objects,
     * numbers, `Object` objects, regexes, and strings. Objects are compared by
     * their own, not inherited, enumerable properties. For comparing a single
     * own or inherited property value see `_.matchesProperty`.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to search.
     * @param {Object} source The object of property values to match.
     * @returns {*} Returns the matched element, else `undefined`.
     * @example
     *
     * var users = [
     *   { 'user': 'barney', 'age': 36, 'active': true },
     *   { 'user': 'fred',   'age': 40, 'active': false }
     * ];
     *
     * _.result(_.findWhere(users, { 'age': 36, 'active': true }), 'user');
     * // => 'barney'
     *
     * _.result(_.findWhere(users, { 'age': 40, 'active': false }), 'user');
     * // => 'fred'
     */
    function findWhere(collection, source) {
      return find(collection, baseMatches(source));
    }

    /**
     * Iterates over elements of `collection` invoking `iteratee` for each element.
     * The `iteratee` is bound to `thisArg` and invoked with three arguments:
     * (value, index|key, collection). Iteratee functions may exit iteration early
     * by explicitly returning `false`.
     *
     * **Note:** As with other "Collections" methods, objects with a "length" property
     * are iterated like arrays. To avoid this behavior `_.forIn` or `_.forOwn`
     * may be used for object iteration.
     *
     * @static
     * @memberOf _
     * @alias each
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Array|Object|string} Returns `collection`.
     * @example
     *
     * _([1, 2]).forEach(function(n) {
     *   console.log(n);
     * }).value();
     * // => logs each value from left to right and returns the array
     *
     * _.forEach({ 'a': 1, 'b': 2 }, function(n, key) {
     *   console.log(n, key);
     * });
     * // => logs each value-key pair and returns the object (iteration order is not guaranteed)
     */
    var forEach = createForEach(arrayEach, baseEach);

    /**
     * This method is like `_.forEach` except that it iterates over elements of
     * `collection` from right to left.
     *
     * @static
     * @memberOf _
     * @alias eachRight
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Array|Object|string} Returns `collection`.
     * @example
     *
     * _([1, 2]).forEachRight(function(n) {
     *   console.log(n);
     * }).value();
     * // => logs each value from right to left and returns the array
     */
    var forEachRight = createForEach(arrayEachRight, baseEachRight);

    /**
     * Creates an object composed of keys generated from the results of running
     * each element of `collection` through `iteratee`. The corresponding value
     * of each key is an array of the elements responsible for generating the key.
     * The `iteratee` is bound to `thisArg` and invoked with three arguments:
     * (value, index|key, collection).
     *
     * If a property name is provided for `iteratee` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `iteratee` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [iteratee=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Object} Returns the composed aggregate object.
     * @example
     *
     * _.groupBy([4.2, 6.1, 6.4], function(n) {
     *   return Math.floor(n);
     * });
     * // => { '4': [4.2], '6': [6.1, 6.4] }
     *
     * _.groupBy([4.2, 6.1, 6.4], function(n) {
     *   return this.floor(n);
     * }, Math);
     * // => { '4': [4.2], '6': [6.1, 6.4] }
     *
     * // using the `_.property` callback shorthand
     * _.groupBy(['one', 'two', 'three'], 'length');
     * // => { '3': ['one', 'two'], '5': ['three'] }
     */
    var groupBy = createAggregator(function(result, value, key) {
      if (hasOwnProperty.call(result, key)) {
        result[key].push(value);
      } else {
        result[key] = [value];
      }
    });

    /**
     * Checks if `value` is in `collection` using
     * [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)
     * for equality comparisons. If `fromIndex` is negative, it is used as the offset
     * from the end of `collection`.
     *
     * @static
     * @memberOf _
     * @alias contains, include
     * @category Collection
     * @param {Array|Object|string} collection The collection to search.
     * @param {*} target The value to search for.
     * @param {number} [fromIndex=0] The index to search from.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.reduce`.
     * @returns {boolean} Returns `true` if a matching element is found, else `false`.
     * @example
     *
     * _.includes([1, 2, 3], 1);
     * // => true
     *
     * _.includes([1, 2, 3], 1, 2);
     * // => false
     *
     * _.includes({ 'user': 'fred', 'age': 40 }, 'fred');
     * // => true
     *
     * _.includes('pebbles', 'eb');
     * // => true
     */
    function includes(collection, target, fromIndex, guard) {
      var length = collection ? getLength(collection) : 0;
      if (!isLength(length)) {
        collection = values(collection);
        length = collection.length;
      }
      if (typeof fromIndex != 'number' || (guard && isIterateeCall(target, fromIndex, guard))) {
        fromIndex = 0;
      } else {
        fromIndex = fromIndex < 0 ? nativeMax(length + fromIndex, 0) : (fromIndex || 0);
      }
      return (typeof collection == 'string' || !isArray(collection) && isString(collection))
        ? (fromIndex <= length && collection.indexOf(target, fromIndex) > -1)
        : (!!length && getIndexOf(collection, target, fromIndex) > -1);
    }

    /**
     * Creates an object composed of keys generated from the results of running
     * each element of `collection` through `iteratee`. The corresponding value
     * of each key is the last element responsible for generating the key. The
     * iteratee function is bound to `thisArg` and invoked with three arguments:
     * (value, index|key, collection).
     *
     * If a property name is provided for `iteratee` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `iteratee` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [iteratee=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Object} Returns the composed aggregate object.
     * @example
     *
     * var keyData = [
     *   { 'dir': 'left', 'code': 97 },
     *   { 'dir': 'right', 'code': 100 }
     * ];
     *
     * _.indexBy(keyData, 'dir');
     * // => { 'left': { 'dir': 'left', 'code': 97 }, 'right': { 'dir': 'right', 'code': 100 } }
     *
     * _.indexBy(keyData, function(object) {
     *   return String.fromCharCode(object.code);
     * });
     * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }
     *
     * _.indexBy(keyData, function(object) {
     *   return this.fromCharCode(object.code);
     * }, String);
     * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }
     */
    var indexBy = createAggregator(function(result, value, key) {
      result[key] = value;
    });

    /**
     * Invokes the method at `path` of each element in `collection`, returning
     * an array of the results of each invoked method. Any additional arguments
     * are provided to each invoked method. If `methodName` is a function it is
     * invoked for, and `this` bound to, each element in `collection`.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Array|Function|string} path The path of the method to invoke or
     *  the function invoked per iteration.
     * @param {...*} [args] The arguments to invoke the method with.
     * @returns {Array} Returns the array of results.
     * @example
     *
     * _.invoke([[5, 1, 7], [3, 2, 1]], 'sort');
     * // => [[1, 5, 7], [1, 2, 3]]
     *
     * _.invoke([123, 456], String.prototype.split, '');
     * // => [['1', '2', '3'], ['4', '5', '6']]
     */
    var invoke = restParam(function(collection, path, args) {
      var index = -1,
          isFunc = typeof path == 'function',
          isProp = isKey(path),
          result = isArrayLike(collection) ? Array(collection.length) : [];

      baseEach(collection, function(value) {
        var func = isFunc ? path : ((isProp && value != null) ? value[path] : undefined);
        result[++index] = func ? func.apply(value, args) : invokePath(value, path, args);
      });
      return result;
    });

    /**
     * Creates an array of values by running each element in `collection` through
     * `iteratee`. The `iteratee` is bound to `thisArg` and invoked with three
     * arguments: (value, index|key, collection).
     *
     * If a property name is provided for `iteratee` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `iteratee` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * Many lodash methods are guarded to work as iteratees for methods like
     * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.
     *
     * The guarded methods are:
     * `ary`, `callback`, `chunk`, `clone`, `create`, `curry`, `curryRight`,
     * `drop`, `dropRight`, `every`, `fill`, `flatten`, `invert`, `max`, `min`,
     * `parseInt`, `slice`, `sortBy`, `take`, `takeRight`, `template`, `trim`,
     * `trimLeft`, `trimRight`, `trunc`, `random`, `range`, `sample`, `some`,
     * `sum`, `uniq`, and `words`
     *
     * @static
     * @memberOf _
     * @alias collect
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [iteratee=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Array} Returns the new mapped array.
     * @example
     *
     * function timesThree(n) {
     *   return n * 3;
     * }
     *
     * _.map([1, 2], timesThree);
     * // => [3, 6]
     *
     * _.map({ 'a': 1, 'b': 2 }, timesThree);
     * // => [3, 6] (iteration order is not guaranteed)
     *
     * var users = [
     *   { 'user': 'barney' },
     *   { 'user': 'fred' }
     * ];
     *
     * // using the `_.property` callback shorthand
     * _.map(users, 'user');
     * // => ['barney', 'fred']
     */
    function map(collection, iteratee, thisArg) {
      var func = isArray(collection) ? arrayMap : baseMap;
      iteratee = getCallback(iteratee, thisArg, 3);
      return func(collection, iteratee);
    }

    /**
     * Creates an array of elements split into two groups, the first of which
     * contains elements `predicate` returns truthy for, while the second of which
     * contains elements `predicate` returns falsey for. The predicate is bound
     * to `thisArg` and invoked with three arguments: (value, index|key, collection).
     *
     * If a property name is provided for `predicate` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `predicate` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {Array} Returns the array of grouped elements.
     * @example
     *
     * _.partition([1, 2, 3], function(n) {
     *   return n % 2;
     * });
     * // => [[1, 3], [2]]
     *
     * _.partition([1.2, 2.3, 3.4], function(n) {
     *   return this.floor(n) % 2;
     * }, Math);
     * // => [[1.2, 3.4], [2.3]]
     *
     * var users = [
     *   { 'user': 'barney',  'age': 36, 'active': false },
     *   { 'user': 'fred',    'age': 40, 'active': true },
     *   { 'user': 'pebbles', 'age': 1,  'active': false }
     * ];
     *
     * var mapper = function(array) {
     *   return _.pluck(array, 'user');
     * };
     *
     * // using the `_.matches` callback shorthand
     * _.map(_.partition(users, { 'age': 1, 'active': false }), mapper);
     * // => [['pebbles'], ['barney', 'fred']]
     *
     * // using the `_.matchesProperty` callback shorthand
     * _.map(_.partition(users, 'active', false), mapper);
     * // => [['barney', 'pebbles'], ['fred']]
     *
     * // using the `_.property` callback shorthand
     * _.map(_.partition(users, 'active'), mapper);
     * // => [['fred'], ['barney', 'pebbles']]
     */
    var partition = createAggregator(function(result, value, key) {
      result[key ? 0 : 1].push(value);
    }, function() { return [[], []]; });

    /**
     * Gets the property value of `path` from all elements in `collection`.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Array|string} path The path of the property to pluck.
     * @returns {Array} Returns the property values.
     * @example
     *
     * var users = [
     *   { 'user': 'barney', 'age': 36 },
     *   { 'user': 'fred',   'age': 40 }
     * ];
     *
     * _.pluck(users, 'user');
     * // => ['barney', 'fred']
     *
     * var userIndex = _.indexBy(users, 'user');
     * _.pluck(userIndex, 'age');
     * // => [36, 40] (iteration order is not guaranteed)
     */
    function pluck(collection, path) {
      return map(collection, property(path));
    }

    /**
     * Reduces `collection` to a value which is the accumulated result of running
     * each element in `collection` through `iteratee`, where each successive
     * invocation is supplied the return value of the previous. If `accumulator`
     * is not provided the first element of `collection` is used as the initial
     * value. The `iteratee` is bound to `thisArg` and invoked with four arguments:
     * (accumulator, value, index|key, collection).
     *
     * Many lodash methods are guarded to work as iteratees for methods like
     * `_.reduce`, `_.reduceRight`, and `_.transform`.
     *
     * The guarded methods are:
     * `assign`, `defaults`, `defaultsDeep`, `includes`, `merge`, `sortByAll`,
     * and `sortByOrder`
     *
     * @static
     * @memberOf _
     * @alias foldl, inject
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @param {*} [accumulator] The initial value.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {*} Returns the accumulated value.
     * @example
     *
     * _.reduce([1, 2], function(total, n) {
     *   return total + n;
     * });
     * // => 3
     *
     * _.reduce({ 'a': 1, 'b': 2 }, function(result, n, key) {
     *   result[key] = n * 3;
     *   return result;
     * }, {});
     * // => { 'a': 3, 'b': 6 } (iteration order is not guaranteed)
     */
    var reduce = createReduce(arrayReduce, baseEach);

    /**
     * This method is like `_.reduce` except that it iterates over elements of
     * `collection` from right to left.
     *
     * @static
     * @memberOf _
     * @alias foldr
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @param {*} [accumulator] The initial value.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {*} Returns the accumulated value.
     * @example
     *
     * var array = [[0, 1], [2, 3], [4, 5]];
     *
     * _.reduceRight(array, function(flattened, other) {
     *   return flattened.concat(other);
     * }, []);
     * // => [4, 5, 2, 3, 0, 1]
     */
    var reduceRight = createReduce(arrayReduceRight, baseEachRight);

    /**
     * The opposite of `_.filter`; this method returns the elements of `collection`
     * that `predicate` does **not** return truthy for.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {Array} Returns the new filtered array.
     * @example
     *
     * _.reject([1, 2, 3, 4], function(n) {
     *   return n % 2 == 0;
     * });
     * // => [1, 3]
     *
     * var users = [
     *   { 'user': 'barney', 'age': 36, 'active': false },
     *   { 'user': 'fred',   'age': 40, 'active': true }
     * ];
     *
     * // using the `_.matches` callback shorthand
     * _.pluck(_.reject(users, { 'age': 40, 'active': true }), 'user');
     * // => ['barney']
     *
     * // using the `_.matchesProperty` callback shorthand
     * _.pluck(_.reject(users, 'active', false), 'user');
     * // => ['fred']
     *
     * // using the `_.property` callback shorthand
     * _.pluck(_.reject(users, 'active'), 'user');
     * // => ['barney']
     */
    function reject(collection, predicate, thisArg) {
      var func = isArray(collection) ? arrayFilter : baseFilter;
      predicate = getCallback(predicate, thisArg, 3);
      return func(collection, function(value, index, collection) {
        return !predicate(value, index, collection);
      });
    }

    /**
     * Gets a random element or `n` random elements from a collection.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to sample.
     * @param {number} [n] The number of elements to sample.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {*} Returns the random sample(s).
     * @example
     *
     * _.sample([1, 2, 3, 4]);
     * // => 2
     *
     * _.sample([1, 2, 3, 4], 2);
     * // => [3, 1]
     */
    function sample(collection, n, guard) {
      if (guard ? isIterateeCall(collection, n, guard) : n == null) {
        collection = toIterable(collection);
        var length = collection.length;
        return length > 0 ? collection[baseRandom(0, length - 1)] : undefined;
      }
      var index = -1,
          result = toArray(collection),
          length = result.length,
          lastIndex = length - 1;

      n = nativeMin(n < 0 ? 0 : (+n || 0), length);
      while (++index < n) {
        var rand = baseRandom(index, lastIndex),
            value = result[rand];

        result[rand] = result[index];
        result[index] = value;
      }
      result.length = n;
      return result;
    }

    /**
     * Creates an array of shuffled values, using a version of the
     * [Fisher-Yates shuffle](https://en.wikipedia.org/wiki/Fisher-Yates_shuffle).
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to shuffle.
     * @returns {Array} Returns the new shuffled array.
     * @example
     *
     * _.shuffle([1, 2, 3, 4]);
     * // => [4, 1, 3, 2]
     */
    function shuffle(collection) {
      return sample(collection, POSITIVE_INFINITY);
    }

    /**
     * Gets the size of `collection` by returning its length for array-like
     * values or the number of own enumerable properties for objects.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to inspect.
     * @returns {number} Returns the size of `collection`.
     * @example
     *
     * _.size([1, 2, 3]);
     * // => 3
     *
     * _.size({ 'a': 1, 'b': 2 });
     * // => 2
     *
     * _.size('pebbles');
     * // => 7
     */
    function size(collection) {
      var length = collection ? getLength(collection) : 0;
      return isLength(length) ? length : keys(collection).length;
    }

    /**
     * Checks if `predicate` returns truthy for **any** element of `collection`.
     * The function returns as soon as it finds a passing value and does not iterate
     * over the entire collection. The predicate is bound to `thisArg` and invoked
     * with three arguments: (value, index|key, collection).
     *
     * If a property name is provided for `predicate` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `predicate` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @alias any
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {boolean} Returns `true` if any element passes the predicate check,
     *  else `false`.
     * @example
     *
     * _.some([null, 0, 'yes', false], Boolean);
     * // => true
     *
     * var users = [
     *   { 'user': 'barney', 'active': true },
     *   { 'user': 'fred',   'active': false }
     * ];
     *
     * // using the `_.matches` callback shorthand
     * _.some(users, { 'user': 'barney', 'active': false });
     * // => false
     *
     * // using the `_.matchesProperty` callback shorthand
     * _.some(users, 'active', false);
     * // => true
     *
     * // using the `_.property` callback shorthand
     * _.some(users, 'active');
     * // => true
     */
    function some(collection, predicate, thisArg) {
      var func = isArray(collection) ? arraySome : baseSome;
      if (thisArg && isIterateeCall(collection, predicate, thisArg)) {
        predicate = undefined;
      }
      if (typeof predicate != 'function' || thisArg !== undefined) {
        predicate = getCallback(predicate, thisArg, 3);
      }
      return func(collection, predicate);
    }

    /**
     * Creates an array of elements, sorted in ascending order by the results of
     * running each element in a collection through `iteratee`. This method performs
     * a stable sort, that is, it preserves the original sort order of equal elements.
     * The `iteratee` is bound to `thisArg` and invoked with three arguments:
     * (value, index|key, collection).
     *
     * If a property name is provided for `iteratee` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `iteratee` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [iteratee=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Array} Returns the new sorted array.
     * @example
     *
     * _.sortBy([1, 2, 3], function(n) {
     *   return Math.sin(n);
     * });
     * // => [3, 1, 2]
     *
     * _.sortBy([1, 2, 3], function(n) {
     *   return this.sin(n);
     * }, Math);
     * // => [3, 1, 2]
     *
     * var users = [
     *   { 'user': 'fred' },
     *   { 'user': 'pebbles' },
     *   { 'user': 'barney' }
     * ];
     *
     * // using the `_.property` callback shorthand
     * _.pluck(_.sortBy(users, 'user'), 'user');
     * // => ['barney', 'fred', 'pebbles']
     */
    function sortBy(collection, iteratee, thisArg) {
      if (collection == null) {
        return [];
      }
      if (thisArg && isIterateeCall(collection, iteratee, thisArg)) {
        iteratee = undefined;
      }
      var index = -1;
      iteratee = getCallback(iteratee, thisArg, 3);

      var result = baseMap(collection, function(value, key, collection) {
        return { 'criteria': iteratee(value, key, collection), 'index': ++index, 'value': value };
      });
      return baseSortBy(result, compareAscending);
    }

    /**
     * This method is like `_.sortBy` except that it can sort by multiple iteratees
     * or property names.
     *
     * If a property name is provided for an iteratee the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If an object is provided for an iteratee the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {...(Function|Function[]|Object|Object[]|string|string[])} iteratees
     *  The iteratees to sort by, specified as individual values or arrays of values.
     * @returns {Array} Returns the new sorted array.
     * @example
     *
     * var users = [
     *   { 'user': 'fred',   'age': 48 },
     *   { 'user': 'barney', 'age': 36 },
     *   { 'user': 'fred',   'age': 42 },
     *   { 'user': 'barney', 'age': 34 }
     * ];
     *
     * _.map(_.sortByAll(users, ['user', 'age']), _.values);
     * // => [['barney', 34], ['barney', 36], ['fred', 42], ['fred', 48]]
     *
     * _.map(_.sortByAll(users, 'user', function(chr) {
     *   return Math.floor(chr.age / 10);
     * }), _.values);
     * // => [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 42]]
     */
    var sortByAll = restParam(function(collection, iteratees) {
      if (collection == null) {
        return [];
      }
      var guard = iteratees[2];
      if (guard && isIterateeCall(iteratees[0], iteratees[1], guard)) {
        iteratees.length = 1;
      }
      return baseSortByOrder(collection, baseFlatten(iteratees), []);
    });

    /**
     * This method is like `_.sortByAll` except that it allows specifying the
     * sort orders of the iteratees to sort by. If `orders` is unspecified, all
     * values are sorted in ascending order. Otherwise, a value is sorted in
     * ascending order if its corresponding order is "asc", and descending if "desc".
     *
     * If a property name is provided for an iteratee the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If an object is provided for an iteratee the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function[]|Object[]|string[]} iteratees The iteratees to sort by.
     * @param {boolean[]} [orders] The sort orders of `iteratees`.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.reduce`.
     * @returns {Array} Returns the new sorted array.
     * @example
     *
     * var users = [
     *   { 'user': 'fred',   'age': 48 },
     *   { 'user': 'barney', 'age': 34 },
     *   { 'user': 'fred',   'age': 42 },
     *   { 'user': 'barney', 'age': 36 }
     * ];
     *
     * // sort by `user` in ascending order and by `age` in descending order
     * _.map(_.sortByOrder(users, ['user', 'age'], ['asc', 'desc']), _.values);
     * // => [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 42]]
     */
    function sortByOrder(collection, iteratees, orders, guard) {
      if (collection == null) {
        return [];
      }
      if (guard && isIterateeCall(iteratees, orders, guard)) {
        orders = undefined;
      }
      if (!isArray(iteratees)) {
        iteratees = iteratees == null ? [] : [iteratees];
      }
      if (!isArray(orders)) {
        orders = orders == null ? [] : [orders];
      }
      return baseSortByOrder(collection, iteratees, orders);
    }

    /**
     * Performs a deep comparison between each element in `collection` and the
     * source object, returning an array of all elements that have equivalent
     * property values.
     *
     * **Note:** This method supports comparing arrays, booleans, `Date` objects,
     * numbers, `Object` objects, regexes, and strings. Objects are compared by
     * their own, not inherited, enumerable properties. For comparing a single
     * own or inherited property value see `_.matchesProperty`.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to search.
     * @param {Object} source The object of property values to match.
     * @returns {Array} Returns the new filtered array.
     * @example
     *
     * var users = [
     *   { 'user': 'barney', 'age': 36, 'active': false, 'pets': ['hoppy'] },
     *   { 'user': 'fred',   'age': 40, 'active': true, 'pets': ['baby puss', 'dino'] }
     * ];
     *
     * _.pluck(_.where(users, { 'age': 36, 'active': false }), 'user');
     * // => ['barney']
     *
     * _.pluck(_.where(users, { 'pets': ['dino'] }), 'user');
     * // => ['fred']
     */
    function where(collection, source) {
      return filter(collection, baseMatches(source));
    }

    /*------------------------------------------------------------------------*/

    /**
     * Gets the number of milliseconds that have elapsed since the Unix epoch
     * (1 January 1970 00:00:00 UTC).
     *
     * @static
     * @memberOf _
     * @category Date
     * @example
     *
     * _.defer(function(stamp) {
     *   console.log(_.now() - stamp);
     * }, _.now());
     * // => logs the number of milliseconds it took for the deferred function to be invoked
     */
    var now = nativeNow || function() {
      return new Date().getTime();
    };

    /*------------------------------------------------------------------------*/

    /**
     * The opposite of `_.before`; this method creates a function that invokes
     * `func` once it is called `n` or more times.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {number} n The number of calls before `func` is invoked.
     * @param {Function} func The function to restrict.
     * @returns {Function} Returns the new restricted function.
     * @example
     *
     * var saves = ['profile', 'settings'];
     *
     * var done = _.after(saves.length, function() {
     *   console.log('done saving!');
     * });
     *
     * _.forEach(saves, function(type) {
     *   asyncSave({ 'type': type, 'complete': done });
     * });
     * // => logs 'done saving!' after the two async saves have completed
     */
    function after(n, func) {
      if (typeof func != 'function') {
        if (typeof n == 'function') {
          var temp = n;
          n = func;
          func = temp;
        } else {
          throw new TypeError(FUNC_ERROR_TEXT);
        }
      }
      n = nativeIsFinite(n = +n) ? n : 0;
      return function() {
        if (--n < 1) {
          return func.apply(this, arguments);
        }
      };
    }

    /**
     * Creates a function that accepts up to `n` arguments ignoring any
     * additional arguments.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to cap arguments for.
     * @param {number} [n=func.length] The arity cap.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {Function} Returns the new function.
     * @example
     *
     * _.map(['6', '8', '10'], _.ary(parseInt, 1));
     * // => [6, 8, 10]
     */
    function ary(func, n, guard) {
      if (guard && isIterateeCall(func, n, guard)) {
        n = undefined;
      }
      n = (func && n == null) ? func.length : nativeMax(+n || 0, 0);
      return createWrapper(func, ARY_FLAG, undefined, undefined, undefined, undefined, n);
    }

    /**
     * Creates a function that invokes `func`, with the `this` binding and arguments
     * of the created function, while it is called less than `n` times. Subsequent
     * calls to the created function return the result of the last `func` invocation.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {number} n The number of calls at which `func` is no longer invoked.
     * @param {Function} func The function to restrict.
     * @returns {Function} Returns the new restricted function.
     * @example
     *
     * jQuery('#add').on('click', _.before(5, addContactToList));
     * // => allows adding up to 4 contacts to the list
     */
    function before(n, func) {
      var result;
      if (typeof func != 'function') {
        if (typeof n == 'function') {
          var temp = n;
          n = func;
          func = temp;
        } else {
          throw new TypeError(FUNC_ERROR_TEXT);
        }
      }
      return function() {
        if (--n > 0) {
          result = func.apply(this, arguments);
        }
        if (n <= 1) {
          func = undefined;
        }
        return result;
      };
    }

    /**
     * Creates a function that invokes `func` with the `this` binding of `thisArg`
     * and prepends any additional `_.bind` arguments to those provided to the
     * bound function.
     *
     * The `_.bind.placeholder` value, which defaults to `_` in monolithic builds,
     * may be used as a placeholder for partially applied arguments.
     *
     * **Note:** Unlike native `Function#bind` this method does not set the "length"
     * property of bound functions.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to bind.
     * @param {*} thisArg The `this` binding of `func`.
     * @param {...*} [partials] The arguments to be partially applied.
     * @returns {Function} Returns the new bound function.
     * @example
     *
     * var greet = function(greeting, punctuation) {
     *   return greeting + ' ' + this.user + punctuation;
     * };
     *
     * var object = { 'user': 'fred' };
     *
     * var bound = _.bind(greet, object, 'hi');
     * bound('!');
     * // => 'hi fred!'
     *
     * // using placeholders
     * var bound = _.bind(greet, object, _, '!');
     * bound('hi');
     * // => 'hi fred!'
     */
    var bind = restParam(function(func, thisArg, partials) {
      var bitmask = BIND_FLAG;
      if (partials.length) {
        var holders = replaceHolders(partials, bind.placeholder);
        bitmask |= PARTIAL_FLAG;
      }
      return createWrapper(func, bitmask, thisArg, partials, holders);
    });

    /**
     * Binds methods of an object to the object itself, overwriting the existing
     * method. Method names may be specified as individual arguments or as arrays
     * of method names. If no method names are provided all enumerable function
     * properties, own and inherited, of `object` are bound.
     *
     * **Note:** This method does not set the "length" property of bound functions.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Object} object The object to bind and assign the bound methods to.
     * @param {...(string|string[])} [methodNames] The object method names to bind,
     *  specified as individual method names or arrays of method names.
     * @returns {Object} Returns `object`.
     * @example
     *
     * var view = {
     *   'label': 'docs',
     *   'onClick': function() {
     *     console.log('clicked ' + this.label);
     *   }
     * };
     *
     * _.bindAll(view);
     * jQuery('#docs').on('click', view.onClick);
     * // => logs 'clicked docs' when the element is clicked
     */
    var bindAll = restParam(function(object, methodNames) {
      methodNames = methodNames.length ? baseFlatten(methodNames) : functions(object);

      var index = -1,
          length = methodNames.length;

      while (++index < length) {
        var key = methodNames[index];
        object[key] = createWrapper(object[key], BIND_FLAG, object);
      }
      return object;
    });

    /**
     * Creates a function that invokes the method at `object[key]` and prepends
     * any additional `_.bindKey` arguments to those provided to the bound function.
     *
     * This method differs from `_.bind` by allowing bound functions to reference
     * methods that may be redefined or don't yet exist.
     * See [Peter Michaux's article](http://peter.michaux.ca/articles/lazy-function-definition-pattern)
     * for more details.
     *
     * The `_.bindKey.placeholder` value, which defaults to `_` in monolithic
     * builds, may be used as a placeholder for partially applied arguments.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Object} object The object the method belongs to.
     * @param {string} key The key of the method.
     * @param {...*} [partials] The arguments to be partially applied.
     * @returns {Function} Returns the new bound function.
     * @example
     *
     * var object = {
     *   'user': 'fred',
     *   'greet': function(greeting, punctuation) {
     *     return greeting + ' ' + this.user + punctuation;
     *   }
     * };
     *
     * var bound = _.bindKey(object, 'greet', 'hi');
     * bound('!');
     * // => 'hi fred!'
     *
     * object.greet = function(greeting, punctuation) {
     *   return greeting + 'ya ' + this.user + punctuation;
     * };
     *
     * bound('!');
     * // => 'hiya fred!'
     *
     * // using placeholders
     * var bound = _.bindKey(object, 'greet', _, '!');
     * bound('hi');
     * // => 'hiya fred!'
     */
    var bindKey = restParam(function(object, key, partials) {
      var bitmask = BIND_FLAG | BIND_KEY_FLAG;
      if (partials.length) {
        var holders = replaceHolders(partials, bindKey.placeholder);
        bitmask |= PARTIAL_FLAG;
      }
      return createWrapper(key, bitmask, object, partials, holders);
    });

    /**
     * Creates a function that accepts one or more arguments of `func` that when
     * called either invokes `func` returning its result, if all `func` arguments
     * have been provided, or returns a function that accepts one or more of the
     * remaining `func` arguments, and so on. The arity of `func` may be specified
     * if `func.length` is not sufficient.
     *
     * The `_.curry.placeholder` value, which defaults to `_` in monolithic builds,
     * may be used as a placeholder for provided arguments.
     *
     * **Note:** This method does not set the "length" property of curried functions.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to curry.
     * @param {number} [arity=func.length] The arity of `func`.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {Function} Returns the new curried function.
     * @example
     *
     * var abc = function(a, b, c) {
     *   return [a, b, c];
     * };
     *
     * var curried = _.curry(abc);
     *
     * curried(1)(2)(3);
     * // => [1, 2, 3]
     *
     * curried(1, 2)(3);
     * // => [1, 2, 3]
     *
     * curried(1, 2, 3);
     * // => [1, 2, 3]
     *
     * // using placeholders
     * curried(1)(_, 3)(2);
     * // => [1, 2, 3]
     */
    var curry = createCurry(CURRY_FLAG);

    /**
     * This method is like `_.curry` except that arguments are applied to `func`
     * in the manner of `_.partialRight` instead of `_.partial`.
     *
     * The `_.curryRight.placeholder` value, which defaults to `_` in monolithic
     * builds, may be used as a placeholder for provided arguments.
     *
     * **Note:** This method does not set the "length" property of curried functions.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to curry.
     * @param {number} [arity=func.length] The arity of `func`.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {Function} Returns the new curried function.
     * @example
     *
     * var abc = function(a, b, c) {
     *   return [a, b, c];
     * };
     *
     * var curried = _.curryRight(abc);
     *
     * curried(3)(2)(1);
     * // => [1, 2, 3]
     *
     * curried(2, 3)(1);
     * // => [1, 2, 3]
     *
     * curried(1, 2, 3);
     * // => [1, 2, 3]
     *
     * // using placeholders
     * curried(3)(1, _)(2);
     * // => [1, 2, 3]
     */
    var curryRight = createCurry(CURRY_RIGHT_FLAG);

    /**
     * Creates a debounced function that delays invoking `func` until after `wait`
     * milliseconds have elapsed since the last time the debounced function was
     * invoked. The debounced function comes with a `cancel` method to cancel
     * delayed invocations. Provide an options object to indicate that `func`
     * should be invoked on the leading and/or trailing edge of the `wait` timeout.
     * Subsequent calls to the debounced function return the result of the last
     * `func` invocation.
     *
     * **Note:** If `leading` and `trailing` options are `true`, `func` is invoked
     * on the trailing edge of the timeout only if the the debounced function is
     * invoked more than once during the `wait` timeout.
     *
     * See [David Corbacho's article](http://drupalmotion.com/article/debounce-and-throttle-visual-explanation)
     * for details over the differences between `_.debounce` and `_.throttle`.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to debounce.
     * @param {number} [wait=0] The number of milliseconds to delay.
     * @param {Object} [options] The options object.
     * @param {boolean} [options.leading=false] Specify invoking on the leading
     *  edge of the timeout.
     * @param {number} [options.maxWait] The maximum time `func` is allowed to be
     *  delayed before it is invoked.
     * @param {boolean} [options.trailing=true] Specify invoking on the trailing
     *  edge of the timeout.
     * @returns {Function} Returns the new debounced function.
     * @example
     *
     * // avoid costly calculations while the window size is in flux
     * jQuery(window).on('resize', _.debounce(calculateLayout, 150));
     *
     * // invoke `sendMail` when the click event is fired, debouncing subsequent calls
     * jQuery('#postbox').on('click', _.debounce(sendMail, 300, {
     *   'leading': true,
     *   'trailing': false
     * }));
     *
     * // ensure `batchLog` is invoked once after 1 second of debounced calls
     * var source = new EventSource('/stream');
     * jQuery(source).on('message', _.debounce(batchLog, 250, {
     *   'maxWait': 1000
     * }));
     *
     * // cancel a debounced call
     * var todoChanges = _.debounce(batchLog, 1000);
     * Object.observe(models.todo, todoChanges);
     *
     * Object.observe(models, function(changes) {
     *   if (_.find(changes, { 'user': 'todo', 'type': 'delete'})) {
     *     todoChanges.cancel();
     *   }
     * }, ['delete']);
     *
     * // ...at some point `models.todo` is changed
     * models.todo.completed = true;
     *
     * // ...before 1 second has passed `models.todo` is deleted
     * // which cancels the debounced `todoChanges` call
     * delete models.todo;
     */
    function debounce(func, wait, options) {
      var args,
          maxTimeoutId,
          result,
          stamp,
          thisArg,
          timeoutId,
          trailingCall,
          lastCalled = 0,
          maxWait = false,
          trailing = true;

      if (typeof func != 'function') {
        throw new TypeError(FUNC_ERROR_TEXT);
      }
      wait = wait < 0 ? 0 : (+wait || 0);
      if (options === true) {
        var leading = true;
        trailing = false;
      } else if (isObject(options)) {
        leading = !!options.leading;
        maxWait = 'maxWait' in options && nativeMax(+options.maxWait || 0, wait);
        trailing = 'trailing' in options ? !!options.trailing : trailing;
      }

      function cancel() {
        if (timeoutId) {
          clearTimeout(timeoutId);
        }
        if (maxTimeoutId) {
          clearTimeout(maxTimeoutId);
        }
        lastCalled = 0;
        maxTimeoutId = timeoutId = trailingCall = undefined;
      }

      function complete(isCalled, id) {
        if (id) {
          clearTimeout(id);
        }
        maxTimeoutId = timeoutId = trailingCall = undefined;
        if (isCalled) {
          lastCalled = now();
          result = func.apply(thisArg, args);
          if (!timeoutId && !maxTimeoutId) {
            args = thisArg = undefined;
          }
        }
      }

      function delayed() {
        var remaining = wait - (now() - stamp);
        if (remaining <= 0 || remaining > wait) {
          complete(trailingCall, maxTimeoutId);
        } else {
          timeoutId = setTimeout(delayed, remaining);
        }
      }

      function maxDelayed() {
        complete(trailing, timeoutId);
      }

      function debounced() {
        args = arguments;
        stamp = now();
        thisArg = this;
        trailingCall = trailing && (timeoutId || !leading);

        if (maxWait === false) {
          var leadingCall = leading && !timeoutId;
        } else {
          if (!maxTimeoutId && !leading) {
            lastCalled = stamp;
          }
          var remaining = maxWait - (stamp - lastCalled),
              isCalled = remaining <= 0 || remaining > maxWait;

          if (isCalled) {
            if (maxTimeoutId) {
              maxTimeoutId = clearTimeout(maxTimeoutId);
            }
            lastCalled = stamp;
            result = func.apply(thisArg, args);
          }
          else if (!maxTimeoutId) {
            maxTimeoutId = setTimeout(maxDelayed, remaining);
          }
        }
        if (isCalled && timeoutId) {
          timeoutId = clearTimeout(timeoutId);
        }
        else if (!timeoutId && wait !== maxWait) {
          timeoutId = setTimeout(delayed, wait);
        }
        if (leadingCall) {
          isCalled = true;
          result = func.apply(thisArg, args);
        }
        if (isCalled && !timeoutId && !maxTimeoutId) {
          args = thisArg = undefined;
        }
        return result;
      }
      debounced.cancel = cancel;
      return debounced;
    }

    /**
     * Defers invoking the `func` until the current call stack has cleared. Any
     * additional arguments are provided to `func` when it is invoked.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to defer.
     * @param {...*} [args] The arguments to invoke the function with.
     * @returns {number} Returns the timer id.
     * @example
     *
     * _.defer(function(text) {
     *   console.log(text);
     * }, 'deferred');
     * // logs 'deferred' after one or more milliseconds
     */
    var defer = restParam(function(func, args) {
      return baseDelay(func, 1, args);
    });

    /**
     * Invokes `func` after `wait` milliseconds. Any additional arguments are
     * provided to `func` when it is invoked.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to delay.
     * @param {number} wait The number of milliseconds to delay invocation.
     * @param {...*} [args] The arguments to invoke the function with.
     * @returns {number} Returns the timer id.
     * @example
     *
     * _.delay(function(text) {
     *   console.log(text);
     * }, 1000, 'later');
     * // => logs 'later' after one second
     */
    var delay = restParam(function(func, wait, args) {
      return baseDelay(func, wait, args);
    });

    /**
     * Creates a function that returns the result of invoking the provided
     * functions with the `this` binding of the created function, where each
     * successive invocation is supplied the return value of the previous.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {...Function} [funcs] Functions to invoke.
     * @returns {Function} Returns the new function.
     * @example
     *
     * function square(n) {
     *   return n * n;
     * }
     *
     * var addSquare = _.flow(_.add, square);
     * addSquare(1, 2);
     * // => 9
     */
    var flow = createFlow();

    /**
     * This method is like `_.flow` except that it creates a function that
     * invokes the provided functions from right to left.
     *
     * @static
     * @memberOf _
     * @alias backflow, compose
     * @category Function
     * @param {...Function} [funcs] Functions to invoke.
     * @returns {Function} Returns the new function.
     * @example
     *
     * function square(n) {
     *   return n * n;
     * }
     *
     * var addSquare = _.flowRight(square, _.add);
     * addSquare(1, 2);
     * // => 9
     */
    var flowRight = createFlow(true);

    /**
     * Creates a function that memoizes the result of `func`. If `resolver` is
     * provided it determines the cache key for storing the result based on the
     * arguments provided to the memoized function. By default, the first argument
     * provided to the memoized function is coerced to a string and used as the
     * cache key. The `func` is invoked with the `this` binding of the memoized
     * function.
     *
     * **Note:** The cache is exposed as the `cache` property on the memoized
     * function. Its creation may be customized by replacing the `_.memoize.Cache`
     * constructor with one whose instances implement the [`Map`](http://ecma-international.org/ecma-262/6.0/#sec-properties-of-the-map-prototype-object)
     * method interface of `get`, `has`, and `set`.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to have its output memoized.
     * @param {Function} [resolver] The function to resolve the cache key.
     * @returns {Function} Returns the new memoizing function.
     * @example
     *
     * var upperCase = _.memoize(function(string) {
     *   return string.toUpperCase();
     * });
     *
     * upperCase('fred');
     * // => 'FRED'
     *
     * // modifying the result cache
     * upperCase.cache.set('fred', 'BARNEY');
     * upperCase('fred');
     * // => 'BARNEY'
     *
     * // replacing `_.memoize.Cache`
     * var object = { 'user': 'fred' };
     * var other = { 'user': 'barney' };
     * var identity = _.memoize(_.identity);
     *
     * identity(object);
     * // => { 'user': 'fred' }
     * identity(other);
     * // => { 'user': 'fred' }
     *
     * _.memoize.Cache = WeakMap;
     * var identity = _.memoize(_.identity);
     *
     * identity(object);
     * // => { 'user': 'fred' }
     * identity(other);
     * // => { 'user': 'barney' }
     */
    function memoize(func, resolver) {
      if (typeof func != 'function' || (resolver && typeof resolver != 'function')) {
        throw new TypeError(FUNC_ERROR_TEXT);
      }
      var memoized = function() {
        var args = arguments,
            key = resolver ? resolver.apply(this, args) : args[0],
            cache = memoized.cache;

        if (cache.has(key)) {
          return cache.get(key);
        }
        var result = func.apply(this, args);
        memoized.cache = cache.set(key, result);
        return result;
      };
      memoized.cache = new memoize.Cache;
      return memoized;
    }

    /**
     * Creates a function that runs each argument through a corresponding
     * transform function.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to wrap.
     * @param {...(Function|Function[])} [transforms] The functions to transform
     * arguments, specified as individual functions or arrays of functions.
     * @returns {Function} Returns the new function.
     * @example
     *
     * function doubled(n) {
     *   return n * 2;
     * }
     *
     * function square(n) {
     *   return n * n;
     * }
     *
     * var modded = _.modArgs(function(x, y) {
     *   return [x, y];
     * }, square, doubled);
     *
     * modded(1, 2);
     * // => [1, 4]
     *
     * modded(5, 10);
     * // => [25, 20]
     */
    var modArgs = restParam(function(func, transforms) {
      transforms = baseFlatten(transforms);
      if (typeof func != 'function' || !arrayEvery(transforms, baseIsFunction)) {
        throw new TypeError(FUNC_ERROR_TEXT);
      }
      var length = transforms.length;
      return restParam(function(args) {
        var index = nativeMin(args.length, length);
        while (index--) {
          args[index] = transforms[index](args[index]);
        }
        return func.apply(this, args);
      });
    });

    /**
     * Creates a function that negates the result of the predicate `func`. The
     * `func` predicate is invoked with the `this` binding and arguments of the
     * created function.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} predicate The predicate to negate.
     * @returns {Function} Returns the new function.
     * @example
     *
     * function isEven(n) {
     *   return n % 2 == 0;
     * }
     *
     * _.filter([1, 2, 3, 4, 5, 6], _.negate(isEven));
     * // => [1, 3, 5]
     */
    function negate(predicate) {
      if (typeof predicate != 'function') {
        throw new TypeError(FUNC_ERROR_TEXT);
      }
      return function() {
        return !predicate.apply(this, arguments);
      };
    }

    /**
     * Creates a function that is restricted to invoking `func` once. Repeat calls
     * to the function return the value of the first call. The `func` is invoked
     * with the `this` binding and arguments of the created function.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to restrict.
     * @returns {Function} Returns the new restricted function.
     * @example
     *
     * var initialize = _.once(createApplication);
     * initialize();
     * initialize();
     * // `initialize` invokes `createApplication` once
     */
    function once(func) {
      return before(2, func);
    }

    /**
     * Creates a function that invokes `func` with `partial` arguments prepended
     * to those provided to the new function. This method is like `_.bind` except
     * it does **not** alter the `this` binding.
     *
     * The `_.partial.placeholder` value, which defaults to `_` in monolithic
     * builds, may be used as a placeholder for partially applied arguments.
     *
     * **Note:** This method does not set the "length" property of partially
     * applied functions.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to partially apply arguments to.
     * @param {...*} [partials] The arguments to be partially applied.
     * @returns {Function} Returns the new partially applied function.
     * @example
     *
     * var greet = function(greeting, name) {
     *   return greeting + ' ' + name;
     * };
     *
     * var sayHelloTo = _.partial(greet, 'hello');
     * sayHelloTo('fred');
     * // => 'hello fred'
     *
     * // using placeholders
     * var greetFred = _.partial(greet, _, 'fred');
     * greetFred('hi');
     * // => 'hi fred'
     */
    var partial = createPartial(PARTIAL_FLAG);

    /**
     * This method is like `_.partial` except that partially applied arguments
     * are appended to those provided to the new function.
     *
     * The `_.partialRight.placeholder` value, which defaults to `_` in monolithic
     * builds, may be used as a placeholder for partially applied arguments.
     *
     * **Note:** This method does not set the "length" property of partially
     * applied functions.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to partially apply arguments to.
     * @param {...*} [partials] The arguments to be partially applied.
     * @returns {Function} Returns the new partially applied function.
     * @example
     *
     * var greet = function(greeting, name) {
     *   return greeting + ' ' + name;
     * };
     *
     * var greetFred = _.partialRight(greet, 'fred');
     * greetFred('hi');
     * // => 'hi fred'
     *
     * // using placeholders
     * var sayHelloTo = _.partialRight(greet, 'hello', _);
     * sayHelloTo('fred');
     * // => 'hello fred'
     */
    var partialRight = createPartial(PARTIAL_RIGHT_FLAG);

    /**
     * Creates a function that invokes `func` with arguments arranged according
     * to the specified indexes where the argument value at the first index is
     * provided as the first argument, the argument value at the second index is
     * provided as the second argument, and so on.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to rearrange arguments for.
     * @param {...(number|number[])} indexes The arranged argument indexes,
     *  specified as individual indexes or arrays of indexes.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var rearged = _.rearg(function(a, b, c) {
     *   return [a, b, c];
     * }, 2, 0, 1);
     *
     * rearged('b', 'c', 'a')
     * // => ['a', 'b', 'c']
     *
     * var map = _.rearg(_.map, [1, 0]);
     * map(function(n) {
     *   return n * 3;
     * }, [1, 2, 3]);
     * // => [3, 6, 9]
     */
    var rearg = restParam(function(func, indexes) {
      return createWrapper(func, REARG_FLAG, undefined, undefined, undefined, baseFlatten(indexes));
    });

    /**
     * Creates a function that invokes `func` with the `this` binding of the
     * created function and arguments from `start` and beyond provided as an array.
     *
     * **Note:** This method is based on the [rest parameter](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters).
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to apply a rest parameter to.
     * @param {number} [start=func.length-1] The start position of the rest parameter.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var say = _.restParam(function(what, names) {
     *   return what + ' ' + _.initial(names).join(', ') +
     *     (_.size(names) > 1 ? ', & ' : '') + _.last(names);
     * });
     *
     * say('hello', 'fred', 'barney', 'pebbles');
     * // => 'hello fred, barney, & pebbles'
     */
    function restParam(func, start) {
      if (typeof func != 'function') {
        throw new TypeError(FUNC_ERROR_TEXT);
      }
      start = nativeMax(start === undefined ? (func.length - 1) : (+start || 0), 0);
      return function() {
        var args = arguments,
            index = -1,
            length = nativeMax(args.length - start, 0),
            rest = Array(length);

        while (++index < length) {
          rest[index] = args[start + index];
        }
        switch (start) {
          case 0: return func.call(this, rest);
          case 1: return func.call(this, args[0], rest);
          case 2: return func.call(this, args[0], args[1], rest);
        }
        var otherArgs = Array(start + 1);
        index = -1;
        while (++index < start) {
          otherArgs[index] = args[index];
        }
        otherArgs[start] = rest;
        return func.apply(this, otherArgs);
      };
    }

    /**
     * Creates a function that invokes `func` with the `this` binding of the created
     * function and an array of arguments much like [`Function#apply`](https://es5.github.io/#x15.3.4.3).
     *
     * **Note:** This method is based on the [spread operator](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_operator).
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to spread arguments over.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var say = _.spread(function(who, what) {
     *   return who + ' says ' + what;
     * });
     *
     * say(['fred', 'hello']);
     * // => 'fred says hello'
     *
     * // with a Promise
     * var numbers = Promise.all([
     *   Promise.resolve(40),
     *   Promise.resolve(36)
     * ]);
     *
     * numbers.then(_.spread(function(x, y) {
     *   return x + y;
     * }));
     * // => a Promise of 76
     */
    function spread(func) {
      if (typeof func != 'function') {
        throw new TypeError(FUNC_ERROR_TEXT);
      }
      return function(array) {
        return func.apply(this, array);
      };
    }

    /**
     * Creates a throttled function that only invokes `func` at most once per
     * every `wait` milliseconds. The throttled function comes with a `cancel`
     * method to cancel delayed invocations. Provide an options object to indicate
     * that `func` should be invoked on the leading and/or trailing edge of the
     * `wait` timeout. Subsequent calls to the throttled function return the
     * result of the last `func` call.
     *
     * **Note:** If `leading` and `trailing` options are `true`, `func` is invoked
     * on the trailing edge of the timeout only if the the throttled function is
     * invoked more than once during the `wait` timeout.
     *
     * See [David Corbacho's article](http://drupalmotion.com/article/debounce-and-throttle-visual-explanation)
     * for details over the differences between `_.throttle` and `_.debounce`.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to throttle.
     * @param {number} [wait=0] The number of milliseconds to throttle invocations to.
     * @param {Object} [options] The options object.
     * @param {boolean} [options.leading=true] Specify invoking on the leading
     *  edge of the timeout.
     * @param {boolean} [options.trailing=true] Specify invoking on the trailing
     *  edge of the timeout.
     * @returns {Function} Returns the new throttled function.
     * @example
     *
     * // avoid excessively updating the position while scrolling
     * jQuery(window).on('scroll', _.throttle(updatePosition, 100));
     *
     * // invoke `renewToken` when the click event is fired, but not more than once every 5 minutes
     * jQuery('.interactive').on('click', _.throttle(renewToken, 300000, {
     *   'trailing': false
     * }));
     *
     * // cancel a trailing throttled call
     * jQuery(window).on('popstate', throttled.cancel);
     */
    function throttle(func, wait, options) {
      var leading = true,
          trailing = true;

      if (typeof func != 'function') {
        throw new TypeError(FUNC_ERROR_TEXT);
      }
      if (options === false) {
        leading = false;
      } else if (isObject(options)) {
        leading = 'leading' in options ? !!options.leading : leading;
        trailing = 'trailing' in options ? !!options.trailing : trailing;
      }
      return debounce(func, wait, { 'leading': leading, 'maxWait': +wait, 'trailing': trailing });
    }

    /**
     * Creates a function that provides `value` to the wrapper function as its
     * first argument. Any additional arguments provided to the function are
     * appended to those provided to the wrapper function. The wrapper is invoked
     * with the `this` binding of the created function.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {*} value The value to wrap.
     * @param {Function} wrapper The wrapper function.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var p = _.wrap(_.escape, function(func, text) {
     *   return '<p>' + func(text) + '</p>';
     * });
     *
     * p('fred, barney, & pebbles');
     * // => '<p>fred, barney, &amp; pebbles</p>'
     */
    function wrap(value, wrapper) {
      wrapper = wrapper == null ? identity : wrapper;
      return createWrapper(wrapper, PARTIAL_FLAG, undefined, [value], []);
    }

    /*------------------------------------------------------------------------*/

    /**
     * Creates a clone of `value`. If `isDeep` is `true` nested objects are cloned,
     * otherwise they are assigned by reference. If `customizer` is provided it is
     * invoked to produce the cloned values. If `customizer` returns `undefined`
     * cloning is handled by the method instead. The `customizer` is bound to
     * `thisArg` and invoked with two argument; (value [, index|key, object]).
     *
     * **Note:** This method is loosely based on the
     * [structured clone algorithm](http://www.w3.org/TR/html5/infrastructure.html#internal-structured-cloning-algorithm).
     * The enumerable properties of `arguments` objects and objects created by
     * constructors other than `Object` are cloned to plain `Object` objects. An
     * empty object is returned for uncloneable values such as functions, DOM nodes,
     * Maps, Sets, and WeakMaps.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to clone.
     * @param {boolean} [isDeep] Specify a deep clone.
     * @param {Function} [customizer] The function to customize cloning values.
     * @param {*} [thisArg] The `this` binding of `customizer`.
     * @returns {*} Returns the cloned value.
     * @example
     *
     * var users = [
     *   { 'user': 'barney' },
     *   { 'user': 'fred' }
     * ];
     *
     * var shallow = _.clone(users);
     * shallow[0] === users[0];
     * // => true
     *
     * var deep = _.clone(users, true);
     * deep[0] === users[0];
     * // => false
     *
     * // using a customizer callback
     * var el = _.clone(document.body, function(value) {
     *   if (_.isElement(value)) {
     *     return value.cloneNode(false);
     *   }
     * });
     *
     * el === document.body
     * // => false
     * el.nodeName
     * // => BODY
     * el.childNodes.length;
     * // => 0
     */
    function clone(value, isDeep, customizer, thisArg) {
      if (isDeep && typeof isDeep != 'boolean' && isIterateeCall(value, isDeep, customizer)) {
        isDeep = false;
      }
      else if (typeof isDeep == 'function') {
        thisArg = customizer;
        customizer = isDeep;
        isDeep = false;
      }
      return typeof customizer == 'function'
        ? baseClone(value, isDeep, bindCallback(customizer, thisArg, 1))
        : baseClone(value, isDeep);
    }

    /**
     * Creates a deep clone of `value`. If `customizer` is provided it is invoked
     * to produce the cloned values. If `customizer` returns `undefined` cloning
     * is handled by the method instead. The `customizer` is bound to `thisArg`
     * and invoked with two argument; (value [, index|key, object]).
     *
     * **Note:** This method is loosely based on the
     * [structured clone algorithm](http://www.w3.org/TR/html5/infrastructure.html#internal-structured-cloning-algorithm).
     * The enumerable properties of `arguments` objects and objects created by
     * constructors other than `Object` are cloned to plain `Object` objects. An
     * empty object is returned for uncloneable values such as functions, DOM nodes,
     * Maps, Sets, and WeakMaps.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to deep clone.
     * @param {Function} [customizer] The function to customize cloning values.
     * @param {*} [thisArg] The `this` binding of `customizer`.
     * @returns {*} Returns the deep cloned value.
     * @example
     *
     * var users = [
     *   { 'user': 'barney' },
     *   { 'user': 'fred' }
     * ];
     *
     * var deep = _.cloneDeep(users);
     * deep[0] === users[0];
     * // => false
     *
     * // using a customizer callback
     * var el = _.cloneDeep(document.body, function(value) {
     *   if (_.isElement(value)) {
     *     return value.cloneNode(true);
     *   }
     * });
     *
     * el === document.body
     * // => false
     * el.nodeName
     * // => BODY
     * el.childNodes.length;
     * // => 20
     */
    function cloneDeep(value, customizer, thisArg) {
      return typeof customizer == 'function'
        ? baseClone(value, true, bindCallback(customizer, thisArg, 1))
        : baseClone(value, true);
    }

    /**
     * Checks if `value` is greater than `other`.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to compare.
     * @param {*} other The other value to compare.
     * @returns {boolean} Returns `true` if `value` is greater than `other`, else `false`.
     * @example
     *
     * _.gt(3, 1);
     * // => true
     *
     * _.gt(3, 3);
     * // => false
     *
     * _.gt(1, 3);
     * // => false
     */
    function gt(value, other) {
      return value > other;
    }

    /**
     * Checks if `value` is greater than or equal to `other`.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to compare.
     * @param {*} other The other value to compare.
     * @returns {boolean} Returns `true` if `value` is greater than or equal to `other`, else `false`.
     * @example
     *
     * _.gte(3, 1);
     * // => true
     *
     * _.gte(3, 3);
     * // => true
     *
     * _.gte(1, 3);
     * // => false
     */
    function gte(value, other) {
      return value >= other;
    }

    /**
     * Checks if `value` is classified as an `arguments` object.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.
     * @example
     *
     * _.isArguments(function() { return arguments; }());
     * // => true
     *
     * _.isArguments([1, 2, 3]);
     * // => false
     */
    function isArguments(value) {
      return isObjectLike(value) && isArrayLike(value) &&
        hasOwnProperty.call(value, 'callee') && !propertyIsEnumerable.call(value, 'callee');
    }

    /**
     * Checks if `value` is classified as an `Array` object.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.
     * @example
     *
     * _.isArray([1, 2, 3]);
     * // => true
     *
     * _.isArray(function() { return arguments; }());
     * // => false
     */
    var isArray = nativeIsArray || function(value) {
      return isObjectLike(value) && isLength(value.length) && objToString.call(value) == arrayTag;
    };

    /**
     * Checks if `value` is classified as a boolean primitive or object.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.
     * @example
     *
     * _.isBoolean(false);
     * // => true
     *
     * _.isBoolean(null);
     * // => false
     */
    function isBoolean(value) {
      return value === true || value === false || (isObjectLike(value) && objToString.call(value) == boolTag);
    }

    /**
     * Checks if `value` is classified as a `Date` object.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.
     * @example
     *
     * _.isDate(new Date);
     * // => true
     *
     * _.isDate('Mon April 23 2012');
     * // => false
     */
    function isDate(value) {
      return isObjectLike(value) && objToString.call(value) == dateTag;
    }

    /**
     * Checks if `value` is a DOM element.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a DOM element, else `false`.
     * @example
     *
     * _.isElement(document.body);
     * // => true
     *
     * _.isElement('<body>');
     * // => false
     */
    function isElement(value) {
      return !!value && value.nodeType === 1 && isObjectLike(value) && !isPlainObject(value);
    }

    /**
     * Checks if `value` is empty. A value is considered empty unless it is an
     * `arguments` object, array, string, or jQuery-like collection with a length
     * greater than `0` or an object with own enumerable properties.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {Array|Object|string} value The value to inspect.
     * @returns {boolean} Returns `true` if `value` is empty, else `false`.
     * @example
     *
     * _.isEmpty(null);
     * // => true
     *
     * _.isEmpty(true);
     * // => true
     *
     * _.isEmpty(1);
     * // => true
     *
     * _.isEmpty([1, 2, 3]);
     * // => false
     *
     * _.isEmpty({ 'a': 1 });
     * // => false
     */
    function isEmpty(value) {
      if (value == null) {
        return true;
      }
      if (isArrayLike(value) && (isArray(value) || isString(value) || isArguments(value) ||
          (isObjectLike(value) && isFunction(value.splice)))) {
        return !value.length;
      }
      return !keys(value).length;
    }

    /**
     * Performs a deep comparison between two values to determine if they are
     * equivalent. If `customizer` is provided it is invoked to compare values.
     * If `customizer` returns `undefined` comparisons are handled by the method
     * instead. The `customizer` is bound to `thisArg` and invoked with three
     * arguments: (value, other [, index|key]).
     *
     * **Note:** This method supports comparing arrays, booleans, `Date` objects,
     * numbers, `Object` objects, regexes, and strings. Objects are compared by
     * their own, not inherited, enumerable properties. Functions and DOM nodes
     * are **not** supported. Provide a customizer function to extend support
     * for comparing other values.
     *
     * @static
     * @memberOf _
     * @alias eq
     * @category Lang
     * @param {*} value The value to compare.
     * @param {*} other The other value to compare.
     * @param {Function} [customizer] The function to customize value comparisons.
     * @param {*} [thisArg] The `this` binding of `customizer`.
     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.
     * @example
     *
     * var object = { 'user': 'fred' };
     * var other = { 'user': 'fred' };
     *
     * object == other;
     * // => false
     *
     * _.isEqual(object, other);
     * // => true
     *
     * // using a customizer callback
     * var array = ['hello', 'goodbye'];
     * var other = ['hi', 'goodbye'];
     *
     * _.isEqual(array, other, function(value, other) {
     *   if (_.every([value, other], RegExp.prototype.test, /^h(?:i|ello)$/)) {
     *     return true;
     *   }
     * });
     * // => true
     */
    function isEqual(value, other, customizer, thisArg) {
      customizer = typeof customizer == 'function' ? bindCallback(customizer, thisArg, 3) : undefined;
      var result = customizer ? customizer(value, other) : undefined;
      return  result === undefined ? baseIsEqual(value, other, customizer) : !!result;
    }

    /**
     * Checks if `value` is an `Error`, `EvalError`, `RangeError`, `ReferenceError`,
     * `SyntaxError`, `TypeError`, or `URIError` object.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is an error object, else `false`.
     * @example
     *
     * _.isError(new Error);
     * // => true
     *
     * _.isError(Error);
     * // => false
     */
    function isError(value) {
      return isObjectLike(value) && typeof value.message == 'string' && objToString.call(value) == errorTag;
    }

    /**
     * Checks if `value` is a finite primitive number.
     *
     * **Note:** This method is based on [`Number.isFinite`](http://ecma-international.org/ecma-262/6.0/#sec-number.isfinite).
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a finite number, else `false`.
     * @example
     *
     * _.isFinite(10);
     * // => true
     *
     * _.isFinite('10');
     * // => false
     *
     * _.isFinite(true);
     * // => false
     *
     * _.isFinite(Object(10));
     * // => false
     *
     * _.isFinite(Infinity);
     * // => false
     */
    function isFinite(value) {
      return typeof value == 'number' && nativeIsFinite(value);
    }

    /**
     * Checks if `value` is classified as a `Function` object.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.
     * @example
     *
     * _.isFunction(_);
     * // => true
     *
     * _.isFunction(/abc/);
     * // => false
     */
    function isFunction(value) {
      // The use of `Object#toString` avoids issues with the `typeof` operator
      // in older versions of Chrome and Safari which return 'function' for regexes
      // and Safari 8 equivalents which return 'object' for typed array constructors.
      return isObject(value) && objToString.call(value) == funcTag;
    }

    /**
     * Checks if `value` is the [language type](https://es5.github.io/#x8) of `Object`.
     * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is an object, else `false`.
     * @example
     *
     * _.isObject({});
     * // => true
     *
     * _.isObject([1, 2, 3]);
     * // => true
     *
     * _.isObject(1);
     * // => false
     */
    function isObject(value) {
      // Avoid a V8 JIT bug in Chrome 19-20.
      // See https://code.google.com/p/v8/issues/detail?id=2291 for more details.
      var type = typeof value;
      return !!value && (type == 'object' || type == 'function');
    }

    /**
     * Performs a deep comparison between `object` and `source` to determine if
     * `object` contains equivalent property values. If `customizer` is provided
     * it is invoked to compare values. If `customizer` returns `undefined`
     * comparisons are handled by the method instead. The `customizer` is bound
     * to `thisArg` and invoked with three arguments: (value, other, index|key).
     *
     * **Note:** This method supports comparing properties of arrays, booleans,
     * `Date` objects, numbers, `Object` objects, regexes, and strings. Functions
     * and DOM nodes are **not** supported. Provide a customizer function to extend
     * support for comparing other values.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {Object} object The object to inspect.
     * @param {Object} source The object of property values to match.
     * @param {Function} [customizer] The function to customize value comparisons.
     * @param {*} [thisArg] The `this` binding of `customizer`.
     * @returns {boolean} Returns `true` if `object` is a match, else `false`.
     * @example
     *
     * var object = { 'user': 'fred', 'age': 40 };
     *
     * _.isMatch(object, { 'age': 40 });
     * // => true
     *
     * _.isMatch(object, { 'age': 36 });
     * // => false
     *
     * // using a customizer callback
     * var object = { 'greeting': 'hello' };
     * var source = { 'greeting': 'hi' };
     *
     * _.isMatch(object, source, function(value, other) {
     *   return _.every([value, other], RegExp.prototype.test, /^h(?:i|ello)$/) || undefined;
     * });
     * // => true
     */
    function isMatch(object, source, customizer, thisArg) {
      customizer = typeof customizer == 'function' ? bindCallback(customizer, thisArg, 3) : undefined;
      return baseIsMatch(object, getMatchData(source), customizer);
    }

    /**
     * Checks if `value` is `NaN`.
     *
     * **Note:** This method is not the same as [`isNaN`](https://es5.github.io/#x15.1.2.4)
     * which returns `true` for `undefined` and other non-numeric values.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.
     * @example
     *
     * _.isNaN(NaN);
     * // => true
     *
     * _.isNaN(new Number(NaN));
     * // => true
     *
     * isNaN(undefined);
     * // => true
     *
     * _.isNaN(undefined);
     * // => false
     */
    function isNaN(value) {
      // An `NaN` primitive is the only value that is not equal to itself.
      // Perform the `toStringTag` check first to avoid errors with some host objects in IE.
      return isNumber(value) && value != +value;
    }

    /**
     * Checks if `value` is a native function.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a native function, else `false`.
     * @example
     *
     * _.isNative(Array.prototype.push);
     * // => true
     *
     * _.isNative(_);
     * // => false
     */
    function isNative(value) {
      if (value == null) {
        return false;
      }
      if (isFunction(value)) {
        return reIsNative.test(fnToString.call(value));
      }
      return isObjectLike(value) && reIsHostCtor.test(value);
    }

    /**
     * Checks if `value` is `null`.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is `null`, else `false`.
     * @example
     *
     * _.isNull(null);
     * // => true
     *
     * _.isNull(void 0);
     * // => false
     */
    function isNull(value) {
      return value === null;
    }

    /**
     * Checks if `value` is classified as a `Number` primitive or object.
     *
     * **Note:** To exclude `Infinity`, `-Infinity`, and `NaN`, which are classified
     * as numbers, use the `_.isFinite` method.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.
     * @example
     *
     * _.isNumber(8.4);
     * // => true
     *
     * _.isNumber(NaN);
     * // => true
     *
     * _.isNumber('8.4');
     * // => false
     */
    function isNumber(value) {
      return typeof value == 'number' || (isObjectLike(value) && objToString.call(value) == numberTag);
    }

    /**
     * Checks if `value` is a plain object, that is, an object created by the
     * `Object` constructor or one with a `[[Prototype]]` of `null`.
     *
     * **Note:** This method assumes objects created by the `Object` constructor
     * have no inherited enumerable properties.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     * }
     *
     * _.isPlainObject(new Foo);
     * // => false
     *
     * _.isPlainObject([1, 2, 3]);
     * // => false
     *
     * _.isPlainObject({ 'x': 0, 'y': 0 });
     * // => true
     *
     * _.isPlainObject(Object.create(null));
     * // => true
     */
    function isPlainObject(value) {
      var Ctor;

      // Exit early for non `Object` objects.
      if (!(isObjectLike(value) && objToString.call(value) == objectTag && !isArguments(value)) ||
          (!hasOwnProperty.call(value, 'constructor') && (Ctor = value.constructor, typeof Ctor == 'function' && !(Ctor instanceof Ctor)))) {
        return false;
      }
      // IE < 9 iterates inherited properties before own properties. If the first
      // iterated property is an object's own property then there are no inherited
      // enumerable properties.
      var result;
      // In most environments an object's own properties are iterated before
      // its inherited properties. If the last iterated property is an object's
      // own property then there are no inherited enumerable properties.
      baseForIn(value, function(subValue, key) {
        result = key;
      });
      return result === undefined || hasOwnProperty.call(value, result);
    }

    /**
     * Checks if `value` is classified as a `RegExp` object.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.
     * @example
     *
     * _.isRegExp(/abc/);
     * // => true
     *
     * _.isRegExp('/abc/');
     * // => false
     */
    function isRegExp(value) {
      return isObject(value) && objToString.call(value) == regexpTag;
    }

    /**
     * Checks if `value` is classified as a `String` primitive or object.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.
     * @example
     *
     * _.isString('abc');
     * // => true
     *
     * _.isString(1);
     * // => false
     */
    function isString(value) {
      return typeof value == 'string' || (isObjectLike(value) && objToString.call(value) == stringTag);
    }

    /**
     * Checks if `value` is classified as a typed array.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.
     * @example
     *
     * _.isTypedArray(new Uint8Array);
     * // => true
     *
     * _.isTypedArray([]);
     * // => false
     */
    function isTypedArray(value) {
      return isObjectLike(value) && isLength(value.length) && !!typedArrayTags[objToString.call(value)];
    }

    /**
     * Checks if `value` is `undefined`.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is `undefined`, else `false`.
     * @example
     *
     * _.isUndefined(void 0);
     * // => true
     *
     * _.isUndefined(null);
     * // => false
     */
    function isUndefined(value) {
      return value === undefined;
    }

    /**
     * Checks if `value` is less than `other`.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to compare.
     * @param {*} other The other value to compare.
     * @returns {boolean} Returns `true` if `value` is less than `other`, else `false`.
     * @example
     *
     * _.lt(1, 3);
     * // => true
     *
     * _.lt(3, 3);
     * // => false
     *
     * _.lt(3, 1);
     * // => false
     */
    function lt(value, other) {
      return value < other;
    }

    /**
     * Checks if `value` is less than or equal to `other`.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to compare.
     * @param {*} other The other value to compare.
     * @returns {boolean} Returns `true` if `value` is less than or equal to `other`, else `false`.
     * @example
     *
     * _.lte(1, 3);
     * // => true
     *
     * _.lte(3, 3);
     * // => true
     *
     * _.lte(3, 1);
     * // => false
     */
    function lte(value, other) {
      return value <= other;
    }

    /**
     * Converts `value` to an array.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to convert.
     * @returns {Array} Returns the converted array.
     * @example
     *
     * (function() {
     *   return _.toArray(arguments).slice(1);
     * }(1, 2, 3));
     * // => [2, 3]
     */
    function toArray(value) {
      var length = value ? getLength(value) : 0;
      if (!isLength(length)) {
        return values(value);
      }
      if (!length) {
        return [];
      }
      return arrayCopy(value);
    }

    /**
     * Converts `value` to a plain object flattening inherited enumerable
     * properties of `value` to own properties of the plain object.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to convert.
     * @returns {Object} Returns the converted plain object.
     * @example
     *
     * function Foo() {
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.assign({ 'a': 1 }, new Foo);
     * // => { 'a': 1, 'b': 2 }
     *
     * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));
     * // => { 'a': 1, 'b': 2, 'c': 3 }
     */
    function toPlainObject(value) {
      return baseCopy(value, keysIn(value));
    }

    /*------------------------------------------------------------------------*/

    /**
     * Recursively merges own enumerable properties of the source object(s), that
     * don't resolve to `undefined` into the destination object. Subsequent sources
     * overwrite property assignments of previous sources. If `customizer` is
     * provided it is invoked to produce the merged values of the destination and
     * source properties. If `customizer` returns `undefined` merging is handled
     * by the method instead. The `customizer` is bound to `thisArg` and invoked
     * with five arguments: (objectValue, sourceValue, key, object, source).
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The destination object.
     * @param {...Object} [sources] The source objects.
     * @param {Function} [customizer] The function to customize assigned values.
     * @param {*} [thisArg] The `this` binding of `customizer`.
     * @returns {Object} Returns `object`.
     * @example
     *
     * var users = {
     *   'data': [{ 'user': 'barney' }, { 'user': 'fred' }]
     * };
     *
     * var ages = {
     *   'data': [{ 'age': 36 }, { 'age': 40 }]
     * };
     *
     * _.merge(users, ages);
     * // => { 'data': [{ 'user': 'barney', 'age': 36 }, { 'user': 'fred', 'age': 40 }] }
     *
     * // using a customizer callback
     * var object = {
     *   'fruits': ['apple'],
     *   'vegetables': ['beet']
     * };
     *
     * var other = {
     *   'fruits': ['banana'],
     *   'vegetables': ['carrot']
     * };
     *
     * _.merge(object, other, function(a, b) {
     *   if (_.isArray(a)) {
     *     return a.concat(b);
     *   }
     * });
     * // => { 'fruits': ['apple', 'banana'], 'vegetables': ['beet', 'carrot'] }
     */
    var merge = createAssigner(baseMerge);

    /**
     * Assigns own enumerable properties of source object(s) to the destination
     * object. Subsequent sources overwrite property assignments of previous sources.
     * If `customizer` is provided it is invoked to produce the assigned values.
     * The `customizer` is bound to `thisArg` and invoked with five arguments:
     * (objectValue, sourceValue, key, object, source).
     *
     * **Note:** This method mutates `object` and is based on
     * [`Object.assign`](http://ecma-international.org/ecma-262/6.0/#sec-object.assign).
     *
     * @static
     * @memberOf _
     * @alias extend
     * @category Object
     * @param {Object} object The destination object.
     * @param {...Object} [sources] The source objects.
     * @param {Function} [customizer] The function to customize assigned values.
     * @param {*} [thisArg] The `this` binding of `customizer`.
     * @returns {Object} Returns `object`.
     * @example
     *
     * _.assign({ 'user': 'barney' }, { 'age': 40 }, { 'user': 'fred' });
     * // => { 'user': 'fred', 'age': 40 }
     *
     * // using a customizer callback
     * var defaults = _.partialRight(_.assign, function(value, other) {
     *   return _.isUndefined(value) ? other : value;
     * });
     *
     * defaults({ 'user': 'barney' }, { 'age': 36 }, { 'user': 'fred' });
     * // => { 'user': 'barney', 'age': 36 }
     */
    var assign = createAssigner(function(object, source, customizer) {
      return customizer
        ? assignWith(object, source, customizer)
        : baseAssign(object, source);
    });

    /**
     * Creates an object that inherits from the given `prototype` object. If a
     * `properties` object is provided its own enumerable properties are assigned
     * to the created object.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} prototype The object to inherit from.
     * @param {Object} [properties] The properties to assign to the object.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {Object} Returns the new object.
     * @example
     *
     * function Shape() {
     *   this.x = 0;
     *   this.y = 0;
     * }
     *
     * function Circle() {
     *   Shape.call(this);
     * }
     *
     * Circle.prototype = _.create(Shape.prototype, {
     *   'constructor': Circle
     * });
     *
     * var circle = new Circle;
     * circle instanceof Circle;
     * // => true
     *
     * circle instanceof Shape;
     * // => true
     */
    function create(prototype, properties, guard) {
      var result = baseCreate(prototype);
      if (guard && isIterateeCall(prototype, properties, guard)) {
        properties = undefined;
      }
      return properties ? baseAssign(result, properties) : result;
    }

    /**
     * Assigns own enumerable properties of source object(s) to the destination
     * object for all destination properties that resolve to `undefined`. Once a
     * property is set, additional values of the same property are ignored.
     *
     * **Note:** This method mutates `object`.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The destination object.
     * @param {...Object} [sources] The source objects.
     * @returns {Object} Returns `object`.
     * @example
     *
     * _.defaults({ 'user': 'barney' }, { 'age': 36 }, { 'user': 'fred' });
     * // => { 'user': 'barney', 'age': 36 }
     */
    var defaults = createDefaults(assign, assignDefaults);

    /**
     * This method is like `_.defaults` except that it recursively assigns
     * default properties.
     *
     * **Note:** This method mutates `object`.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The destination object.
     * @param {...Object} [sources] The source objects.
     * @returns {Object} Returns `object`.
     * @example
     *
     * _.defaultsDeep({ 'user': { 'name': 'barney' } }, { 'user': { 'name': 'fred', 'age': 36 } });
     * // => { 'user': { 'name': 'barney', 'age': 36 } }
     *
     */
    var defaultsDeep = createDefaults(merge, mergeDefaults);

    /**
     * This method is like `_.find` except that it returns the key of the first
     * element `predicate` returns truthy for instead of the element itself.
     *
     * If a property name is provided for `predicate` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `predicate` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to search.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {string|undefined} Returns the key of the matched element, else `undefined`.
     * @example
     *
     * var users = {
     *   'barney':  { 'age': 36, 'active': true },
     *   'fred':    { 'age': 40, 'active': false },
     *   'pebbles': { 'age': 1,  'active': true }
     * };
     *
     * _.findKey(users, function(chr) {
     *   return chr.age < 40;
     * });
     * // => 'barney' (iteration order is not guaranteed)
     *
     * // using the `_.matches` callback shorthand
     * _.findKey(users, { 'age': 1, 'active': true });
     * // => 'pebbles'
     *
     * // using the `_.matchesProperty` callback shorthand
     * _.findKey(users, 'active', false);
     * // => 'fred'
     *
     * // using the `_.property` callback shorthand
     * _.findKey(users, 'active');
     * // => 'barney'
     */
    var findKey = createFindKey(baseForOwn);

    /**
     * This method is like `_.findKey` except that it iterates over elements of
     * a collection in the opposite order.
     *
     * If a property name is provided for `predicate` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `predicate` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to search.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {string|undefined} Returns the key of the matched element, else `undefined`.
     * @example
     *
     * var users = {
     *   'barney':  { 'age': 36, 'active': true },
     *   'fred':    { 'age': 40, 'active': false },
     *   'pebbles': { 'age': 1,  'active': true }
     * };
     *
     * _.findLastKey(users, function(chr) {
     *   return chr.age < 40;
     * });
     * // => returns `pebbles` assuming `_.findKey` returns `barney`
     *
     * // using the `_.matches` callback shorthand
     * _.findLastKey(users, { 'age': 36, 'active': true });
     * // => 'barney'
     *
     * // using the `_.matchesProperty` callback shorthand
     * _.findLastKey(users, 'active', false);
     * // => 'fred'
     *
     * // using the `_.property` callback shorthand
     * _.findLastKey(users, 'active');
     * // => 'pebbles'
     */
    var findLastKey = createFindKey(baseForOwnRight);

    /**
     * Iterates over own and inherited enumerable properties of an object invoking
     * `iteratee` for each property. The `iteratee` is bound to `thisArg` and invoked
     * with three arguments: (value, key, object). Iteratee functions may exit
     * iteration early by explicitly returning `false`.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Object} Returns `object`.
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.forIn(new Foo, function(value, key) {
     *   console.log(key);
     * });
     * // => logs 'a', 'b', and 'c' (iteration order is not guaranteed)
     */
    var forIn = createForIn(baseFor);

    /**
     * This method is like `_.forIn` except that it iterates over properties of
     * `object` in the opposite order.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Object} Returns `object`.
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.forInRight(new Foo, function(value, key) {
     *   console.log(key);
     * });
     * // => logs 'c', 'b', and 'a' assuming `_.forIn ` logs 'a', 'b', and 'c'
     */
    var forInRight = createForIn(baseForRight);

    /**
     * Iterates over own enumerable properties of an object invoking `iteratee`
     * for each property. The `iteratee` is bound to `thisArg` and invoked with
     * three arguments: (value, key, object). Iteratee functions may exit iteration
     * early by explicitly returning `false`.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Object} Returns `object`.
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.forOwn(new Foo, function(value, key) {
     *   console.log(key);
     * });
     * // => logs 'a' and 'b' (iteration order is not guaranteed)
     */
    var forOwn = createForOwn(baseForOwn);

    /**
     * This method is like `_.forOwn` except that it iterates over properties of
     * `object` in the opposite order.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Object} Returns `object`.
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.forOwnRight(new Foo, function(value, key) {
     *   console.log(key);
     * });
     * // => logs 'b' and 'a' assuming `_.forOwn` logs 'a' and 'b'
     */
    var forOwnRight = createForOwn(baseForOwnRight);

    /**
     * Creates an array of function property names from all enumerable properties,
     * own and inherited, of `object`.
     *
     * @static
     * @memberOf _
     * @alias methods
     * @category Object
     * @param {Object} object The object to inspect.
     * @returns {Array} Returns the new array of property names.
     * @example
     *
     * _.functions(_);
     * // => ['after', 'ary', 'assign', ...]
     */
    function functions(object) {
      return baseFunctions(object, keysIn(object));
    }

    /**
     * Gets the property value at `path` of `object`. If the resolved value is
     * `undefined` the `defaultValue` is used in its place.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to query.
     * @param {Array|string} path The path of the property to get.
     * @param {*} [defaultValue] The value returned if the resolved value is `undefined`.
     * @returns {*} Returns the resolved value.
     * @example
     *
     * var object = { 'a': [{ 'b': { 'c': 3 } }] };
     *
     * _.get(object, 'a[0].b.c');
     * // => 3
     *
     * _.get(object, ['a', '0', 'b', 'c']);
     * // => 3
     *
     * _.get(object, 'a.b.c', 'default');
     * // => 'default'
     */
    function get(object, path, defaultValue) {
      var result = object == null ? undefined : baseGet(object, toPath(path), path + '');
      return result === undefined ? defaultValue : result;
    }

    /**
     * Checks if `path` is a direct property.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to query.
     * @param {Array|string} path The path to check.
     * @returns {boolean} Returns `true` if `path` is a direct property, else `false`.
     * @example
     *
     * var object = { 'a': { 'b': { 'c': 3 } } };
     *
     * _.has(object, 'a');
     * // => true
     *
     * _.has(object, 'a.b.c');
     * // => true
     *
     * _.has(object, ['a', 'b', 'c']);
     * // => true
     */
    function has(object, path) {
      if (object == null) {
        return false;
      }
      var result = hasOwnProperty.call(object, path);
      if (!result && !isKey(path)) {
        path = toPath(path);
        object = path.length == 1 ? object : baseGet(object, baseSlice(path, 0, -1));
        if (object == null) {
          return false;
        }
        path = last(path);
        result = hasOwnProperty.call(object, path);
      }
      return result || (isLength(object.length) && isIndex(path, object.length) &&
        (isArray(object) || isArguments(object)));
    }

    /**
     * Creates an object composed of the inverted keys and values of `object`.
     * If `object` contains duplicate values, subsequent values overwrite property
     * assignments of previous values unless `multiValue` is `true`.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to invert.
     * @param {boolean} [multiValue] Allow multiple values per key.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {Object} Returns the new inverted object.
     * @example
     *
     * var object = { 'a': 1, 'b': 2, 'c': 1 };
     *
     * _.invert(object);
     * // => { '1': 'c', '2': 'b' }
     *
     * // with `multiValue`
     * _.invert(object, true);
     * // => { '1': ['a', 'c'], '2': ['b'] }
     */
    function invert(object, multiValue, guard) {
      if (guard && isIterateeCall(object, multiValue, guard)) {
        multiValue = undefined;
      }
      var index = -1,
          props = keys(object),
          length = props.length,
          result = {};

      while (++index < length) {
        var key = props[index],
            value = object[key];

        if (multiValue) {
          if (hasOwnProperty.call(result, value)) {
            result[value].push(key);
          } else {
            result[value] = [key];
          }
        }
        else {
          result[value] = key;
        }
      }
      return result;
    }

    /**
     * Creates an array of the own enumerable property names of `object`.
     *
     * **Note:** Non-object values are coerced to objects. See the
     * [ES spec](http://ecma-international.org/ecma-262/6.0/#sec-object.keys)
     * for more details.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to query.
     * @returns {Array} Returns the array of property names.
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.keys(new Foo);
     * // => ['a', 'b'] (iteration order is not guaranteed)
     *
     * _.keys('hi');
     * // => ['0', '1']
     */
    var keys = !nativeKeys ? shimKeys : function(object) {
      var Ctor = object == null ? undefined : object.constructor;
      if ((typeof Ctor == 'function' && Ctor.prototype === object) ||
          (typeof object != 'function' && isArrayLike(object))) {
        return shimKeys(object);
      }
      return isObject(object) ? nativeKeys(object) : [];
    };

    /**
     * Creates an array of the own and inherited enumerable property names of `object`.
     *
     * **Note:** Non-object values are coerced to objects.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to query.
     * @returns {Array} Returns the array of property names.
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.keysIn(new Foo);
     * // => ['a', 'b', 'c'] (iteration order is not guaranteed)
     */
    function keysIn(object) {
      if (object == null) {
        return [];
      }
      if (!isObject(object)) {
        object = Object(object);
      }
      var length = object.length;
      length = (length && isLength(length) &&
        (isArray(object) || isArguments(object)) && length) || 0;

      var Ctor = object.constructor,
          index = -1,
          isProto = typeof Ctor == 'function' && Ctor.prototype === object,
          result = Array(length),
          skipIndexes = length > 0;

      while (++index < length) {
        result[index] = (index + '');
      }
      for (var key in object) {
        if (!(skipIndexes && isIndex(key, length)) &&
            !(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {
          result.push(key);
        }
      }
      return result;
    }

    /**
     * The opposite of `_.mapValues`; this method creates an object with the
     * same values as `object` and keys generated by running each own enumerable
     * property of `object` through `iteratee`.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to iterate over.
     * @param {Function|Object|string} [iteratee=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Object} Returns the new mapped object.
     * @example
     *
     * _.mapKeys({ 'a': 1, 'b': 2 }, function(value, key) {
     *   return key + value;
     * });
     * // => { 'a1': 1, 'b2': 2 }
     */
    var mapKeys = createObjectMapper(true);

    /**
     * Creates an object with the same keys as `object` and values generated by
     * running each own enumerable property of `object` through `iteratee`. The
     * iteratee function is bound to `thisArg` and invoked with three arguments:
     * (value, key, object).
     *
     * If a property name is provided for `iteratee` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `iteratee` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to iterate over.
     * @param {Function|Object|string} [iteratee=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Object} Returns the new mapped object.
     * @example
     *
     * _.mapValues({ 'a': 1, 'b': 2 }, function(n) {
     *   return n * 3;
     * });
     * // => { 'a': 3, 'b': 6 }
     *
     * var users = {
     *   'fred':    { 'user': 'fred',    'age': 40 },
     *   'pebbles': { 'user': 'pebbles', 'age': 1 }
     * };
     *
     * // using the `_.property` callback shorthand
     * _.mapValues(users, 'age');
     * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)
     */
    var mapValues = createObjectMapper();

    /**
     * The opposite of `_.pick`; this method creates an object composed of the
     * own and inherited enumerable properties of `object` that are not omitted.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The source object.
     * @param {Function|...(string|string[])} [predicate] The function invoked per
     *  iteration or property names to omit, specified as individual property
     *  names or arrays of property names.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {Object} Returns the new object.
     * @example
     *
     * var object = { 'user': 'fred', 'age': 40 };
     *
     * _.omit(object, 'age');
     * // => { 'user': 'fred' }
     *
     * _.omit(object, _.isNumber);
     * // => { 'user': 'fred' }
     */
    var omit = restParam(function(object, props) {
      if (object == null) {
        return {};
      }
      if (typeof props[0] != 'function') {
        var props = arrayMap(baseFlatten(props), String);
        return pickByArray(object, baseDifference(keysIn(object), props));
      }
      var predicate = bindCallback(props[0], props[1], 3);
      return pickByCallback(object, function(value, key, object) {
        return !predicate(value, key, object);
      });
    });

    /**
     * Creates a two dimensional array of the key-value pairs for `object`,
     * e.g. `[[key1, value1], [key2, value2]]`.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to query.
     * @returns {Array} Returns the new array of key-value pairs.
     * @example
     *
     * _.pairs({ 'barney': 36, 'fred': 40 });
     * // => [['barney', 36], ['fred', 40]] (iteration order is not guaranteed)
     */
    function pairs(object) {
      object = toObject(object);

      var index = -1,
          props = keys(object),
          length = props.length,
          result = Array(length);

      while (++index < length) {
        var key = props[index];
        result[index] = [key, object[key]];
      }
      return result;
    }

    /**
     * Creates an object composed of the picked `object` properties. Property
     * names may be specified as individual arguments or as arrays of property
     * names. If `predicate` is provided it is invoked for each property of `object`
     * picking the properties `predicate` returns truthy for. The predicate is
     * bound to `thisArg` and invoked with three arguments: (value, key, object).
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The source object.
     * @param {Function|...(string|string[])} [predicate] The function invoked per
     *  iteration or property names to pick, specified as individual property
     *  names or arrays of property names.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {Object} Returns the new object.
     * @example
     *
     * var object = { 'user': 'fred', 'age': 40 };
     *
     * _.pick(object, 'user');
     * // => { 'user': 'fred' }
     *
     * _.pick(object, _.isString);
     * // => { 'user': 'fred' }
     */
    var pick = restParam(function(object, props) {
      if (object == null) {
        return {};
      }
      return typeof props[0] == 'function'
        ? pickByCallback(object, bindCallback(props[0], props[1], 3))
        : pickByArray(object, baseFlatten(props));
    });

    /**
     * This method is like `_.get` except that if the resolved value is a function
     * it is invoked with the `this` binding of its parent object and its result
     * is returned.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to query.
     * @param {Array|string} path The path of the property to resolve.
     * @param {*} [defaultValue] The value returned if the resolved value is `undefined`.
     * @returns {*} Returns the resolved value.
     * @example
     *
     * var object = { 'a': [{ 'b': { 'c1': 3, 'c2': _.constant(4) } }] };
     *
     * _.result(object, 'a[0].b.c1');
     * // => 3
     *
     * _.result(object, 'a[0].b.c2');
     * // => 4
     *
     * _.result(object, 'a.b.c', 'default');
     * // => 'default'
     *
     * _.result(object, 'a.b.c', _.constant('default'));
     * // => 'default'
     */
    function result(object, path, defaultValue) {
      var result = object == null ? undefined : object[path];
      if (result === undefined) {
        if (object != null && !isKey(path, object)) {
          path = toPath(path);
          object = path.length == 1 ? object : baseGet(object, baseSlice(path, 0, -1));
          result = object == null ? undefined : object[last(path)];
        }
        result = result === undefined ? defaultValue : result;
      }
      return isFunction(result) ? result.call(object) : result;
    }

    /**
     * Sets the property value of `path` on `object`. If a portion of `path`
     * does not exist it is created.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to augment.
     * @param {Array|string} path The path of the property to set.
     * @param {*} value The value to set.
     * @returns {Object} Returns `object`.
     * @example
     *
     * var object = { 'a': [{ 'b': { 'c': 3 } }] };
     *
     * _.set(object, 'a[0].b.c', 4);
     * console.log(object.a[0].b.c);
     * // => 4
     *
     * _.set(object, 'x[0].y.z', 5);
     * console.log(object.x[0].y.z);
     * // => 5
     */
    function set(object, path, value) {
      if (object == null) {
        return object;
      }
      var pathKey = (path + '');
      path = (object[pathKey] != null || isKey(path, object)) ? [pathKey] : toPath(path);

      var index = -1,
          length = path.length,
          lastIndex = length - 1,
          nested = object;

      while (nested != null && ++index < length) {
        var key = path[index];
        if (isObject(nested)) {
          if (index == lastIndex) {
            nested[key] = value;
          } else if (nested[key] == null) {
            nested[key] = isIndex(path[index + 1]) ? [] : {};
          }
        }
        nested = nested[key];
      }
      return object;
    }

    /**
     * An alternative to `_.reduce`; this method transforms `object` to a new
     * `accumulator` object which is the result of running each of its own enumerable
     * properties through `iteratee`, with each invocation potentially mutating
     * the `accumulator` object. The `iteratee` is bound to `thisArg` and invoked
     * with four arguments: (accumulator, value, key, object). Iteratee functions
     * may exit iteration early by explicitly returning `false`.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Array|Object} object The object to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @param {*} [accumulator] The custom accumulator value.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {*} Returns the accumulated value.
     * @example
     *
     * _.transform([2, 3, 4], function(result, n) {
     *   result.push(n *= n);
     *   return n % 2 == 0;
     * });
     * // => [4, 9]
     *
     * _.transform({ 'a': 1, 'b': 2 }, function(result, n, key) {
     *   result[key] = n * 3;
     * });
     * // => { 'a': 3, 'b': 6 }
     */
    function transform(object, iteratee, accumulator, thisArg) {
      var isArr = isArray(object) || isTypedArray(object);
      iteratee = getCallback(iteratee, thisArg, 4);

      if (accumulator == null) {
        if (isArr || isObject(object)) {
          var Ctor = object.constructor;
          if (isArr) {
            accumulator = isArray(object) ? new Ctor : [];
          } else {
            accumulator = baseCreate(isFunction(Ctor) ? Ctor.prototype : undefined);
          }
        } else {
          accumulator = {};
        }
      }
      (isArr ? arrayEach : baseForOwn)(object, function(value, index, object) {
        return iteratee(accumulator, value, index, object);
      });
      return accumulator;
    }

    /**
     * Creates an array of the own enumerable property values of `object`.
     *
     * **Note:** Non-object values are coerced to objects.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to query.
     * @returns {Array} Returns the array of property values.
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.values(new Foo);
     * // => [1, 2] (iteration order is not guaranteed)
     *
     * _.values('hi');
     * // => ['h', 'i']
     */
    function values(object) {
      return baseValues(object, keys(object));
    }

    /**
     * Creates an array of the own and inherited enumerable property values
     * of `object`.
     *
     * **Note:** Non-object values are coerced to objects.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to query.
     * @returns {Array} Returns the array of property values.
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.valuesIn(new Foo);
     * // => [1, 2, 3] (iteration order is not guaranteed)
     */
    function valuesIn(object) {
      return baseValues(object, keysIn(object));
    }

    /*------------------------------------------------------------------------*/

    /**
     * Checks if `n` is between `start` and up to but not including, `end`. If
     * `end` is not specified it is set to `start` with `start` then set to `0`.
     *
     * @static
     * @memberOf _
     * @category Number
     * @param {number} n The number to check.
     * @param {number} [start=0] The start of the range.
     * @param {number} end The end of the range.
     * @returns {boolean} Returns `true` if `n` is in the range, else `false`.
     * @example
     *
     * _.inRange(3, 2, 4);
     * // => true
     *
     * _.inRange(4, 8);
     * // => true
     *
     * _.inRange(4, 2);
     * // => false
     *
     * _.inRange(2, 2);
     * // => false
     *
     * _.inRange(1.2, 2);
     * // => true
     *
     * _.inRange(5.2, 4);
     * // => false
     */
    function inRange(value, start, end) {
      start = +start || 0;
      if (end === undefined) {
        end = start;
        start = 0;
      } else {
        end = +end || 0;
      }
      return value >= nativeMin(start, end) && value < nativeMax(start, end);
    }

    /**
     * Produces a random number between `min` and `max` (inclusive). If only one
     * argument is provided a number between `0` and the given number is returned.
     * If `floating` is `true`, or either `min` or `max` are floats, a floating-point
     * number is returned instead of an integer.
     *
     * @static
     * @memberOf _
     * @category Number
     * @param {number} [min=0] The minimum possible value.
     * @param {number} [max=1] The maximum possible value.
     * @param {boolean} [floating] Specify returning a floating-point number.
     * @returns {number} Returns the random number.
     * @example
     *
     * _.random(0, 5);
     * // => an integer between 0 and 5
     *
     * _.random(5);
     * // => also an integer between 0 and 5
     *
     * _.random(5, true);
     * // => a floating-point number between 0 and 5
     *
     * _.random(1.2, 5.2);
     * // => a floating-point number between 1.2 and 5.2
     */
    function random(min, max, floating) {
      if (floating && isIterateeCall(min, max, floating)) {
        max = floating = undefined;
      }
      var noMin = min == null,
          noMax = max == null;

      if (floating == null) {
        if (noMax && typeof min == 'boolean') {
          floating = min;
          min = 1;
        }
        else if (typeof max == 'boolean') {
          floating = max;
          noMax = true;
        }
      }
      if (noMin && noMax) {
        max = 1;
        noMax = false;
      }
      min = +min || 0;
      if (noMax) {
        max = min;
        min = 0;
      } else {
        max = +max || 0;
      }
      if (floating || min % 1 || max % 1) {
        var rand = nativeRandom();
        return nativeMin(min + (rand * (max - min + parseFloat('1e-' + ((rand + '').length - 1)))), max);
      }
      return baseRandom(min, max);
    }

    /*------------------------------------------------------------------------*/

    /**
     * Converts `string` to [camel case](https://en.wikipedia.org/wiki/CamelCase).
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to convert.
     * @returns {string} Returns the camel cased string.
     * @example
     *
     * _.camelCase('Foo Bar');
     * // => 'fooBar'
     *
     * _.camelCase('--foo-bar');
     * // => 'fooBar'
     *
     * _.camelCase('__foo_bar__');
     * // => 'fooBar'
     */
    var camelCase = createCompounder(function(result, word, index) {
      word = word.toLowerCase();
      return result + (index ? (word.charAt(0).toUpperCase() + word.slice(1)) : word);
    });

    /**
     * Capitalizes the first character of `string`.
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to capitalize.
     * @returns {string} Returns the capitalized string.
     * @example
     *
     * _.capitalize('fred');
     * // => 'Fred'
     */
    function capitalize(string) {
      string = baseToString(string);
      return string && (string.charAt(0).toUpperCase() + string.slice(1));
    }

    /**
     * Deburrs `string` by converting [latin-1 supplementary letters](https://en.wikipedia.org/wiki/Latin-1_Supplement_(Unicode_block)#Character_table)
     * to basic latin letters and removing [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks).
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to deburr.
     * @returns {string} Returns the deburred string.
     * @example
     *
     * _.deburr('dÃ©jÃ  vu');
     * // => 'deja vu'
     */
    function deburr(string) {
      string = baseToString(string);
      return string && string.replace(reLatin1, deburrLetter).replace(reComboMark, '');
    }

    /**
     * Checks if `string` ends with the given target string.
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to search.
     * @param {string} [target] The string to search for.
     * @param {number} [position=string.length] The position to search from.
     * @returns {boolean} Returns `true` if `string` ends with `target`, else `false`.
     * @example
     *
     * _.endsWith('abc', 'c');
     * // => true
     *
     * _.endsWith('abc', 'b');
     * // => false
     *
     * _.endsWith('abc', 'b', 2);
     * // => true
     */
    function endsWith(string, target, position) {
      string = baseToString(string);
      target = (target + '');

      var length = string.length;
      position = position === undefined
        ? length
        : nativeMin(position < 0 ? 0 : (+position || 0), length);

      position -= target.length;
      return position >= 0 && string.indexOf(target, position) == position;
    }

    /**
     * Converts the characters "&", "<", ">", '"', "'", and "\`", in `string` to
     * their corresponding HTML entities.
     *
     * **Note:** No other characters are escaped. To escape additional characters
     * use a third-party library like [_he_](https://mths.be/he).
     *
     * Though the ">" character is escaped for symmetry, characters like
     * ">" and "/" don't need escaping in HTML and have no special meaning
     * unless they're part of a tag or unquoted attribute value.
     * See [Mathias Bynens's article](https://mathiasbynens.be/notes/ambiguous-ampersands)
     * (under "semi-related fun fact") for more details.
     *
     * Backticks are escaped because in Internet Explorer < 9, they can break out
     * of attribute values or HTML comments. See [#59](https://html5sec.org/#59),
     * [#102](https://html5sec.org/#102), [#108](https://html5sec.org/#108), and
     * [#133](https://html5sec.org/#133) of the [HTML5 Security Cheatsheet](https://html5sec.org/)
     * for more details.
     *
     * When working with HTML you should always [quote attribute values](http://wonko.com/post/html-escaping)
     * to reduce XSS vectors.
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to escape.
     * @returns {string} Returns the escaped string.
     * @example
     *
     * _.escape('fred, barney, & pebbles');
     * // => 'fred, barney, &amp; pebbles'
     */
    function escape(string) {
      // Reset `lastIndex` because in IE < 9 `String#replace` does not.
      string = baseToString(string);
      return (string && reHasUnescapedHtml.test(string))
        ? string.replace(reUnescapedHtml, escapeHtmlChar)
        : string;
    }

    /**
     * Escapes the `RegExp` special characters "\", "/", "^", "$", ".", "|", "?",
     * "*", "+", "(", ")", "[", "]", "{" and "}" in `string`.
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to escape.
     * @returns {string} Returns the escaped string.
     * @example
     *
     * _.escapeRegExp('[lodash](https://lodash.com/)');
     * // => '\[lodash\]\(https:\/\/lodash\.com\/\)'
     */
    function escapeRegExp(string) {
      string = baseToString(string);
      return (string && reHasRegExpChars.test(string))
        ? string.replace(reRegExpChars, escapeRegExpChar)
        : (string || '(?:)');
    }

    /**
     * Converts `string` to [kebab case](https://en.wikipedia.org/wiki/Letter_case#Special_case_styles).
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to convert.
     * @returns {string} Returns the kebab cased string.
     * @example
     *
     * _.kebabCase('Foo Bar');
     * // => 'foo-bar'
     *
     * _.kebabCase('fooBar');
     * // => 'foo-bar'
     *
     * _.kebabCase('__foo_bar__');
     * // => 'foo-bar'
     */
    var kebabCase = createCompounder(function(result, word, index) {
      return result + (index ? '-' : '') + word.toLowerCase();
    });

    /**
     * Pads `string` on the left and right sides if it's shorter than `length`.
     * Padding characters are truncated if they can't be evenly divided by `length`.
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to pad.
     * @param {number} [length=0] The padding length.
     * @param {string} [chars=' '] The string used as padding.
     * @returns {string} Returns the padded string.
     * @example
     *
     * _.pad('abc', 8);
     * // => '  abc   '
     *
     * _.pad('abc', 8, '_-');
     * // => '_-abc_-_'
     *
     * _.pad('abc', 3);
     * // => 'abc'
     */
    function pad(string, length, chars) {
      string = baseToString(string);
      length = +length;

      var strLength = string.length;
      if (strLength >= length || !nativeIsFinite(length)) {
        return string;
      }
      var mid = (length - strLength) / 2,
          leftLength = nativeFloor(mid),
          rightLength = nativeCeil(mid);

      chars = createPadding('', rightLength, chars);
      return chars.slice(0, leftLength) + string + chars;
    }

    /**
     * Pads `string` on the left side if it's shorter than `length`. Padding
     * characters are truncated if they exceed `length`.
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to pad.
     * @param {number} [length=0] The padding length.
     * @param {string} [chars=' '] The string used as padding.
     * @returns {string} Returns the padded string.
     * @example
     *
     * _.padLeft('abc', 6);
     * // => '   abc'
     *
     * _.padLeft('abc', 6, '_-');
     * // => '_-_abc'
     *
     * _.padLeft('abc', 3);
     * // => 'abc'
     */
    var padLeft = createPadDir();

    /**
     * Pads `string` on the right side if it's shorter than `length`. Padding
     * characters are truncated if they exceed `length`.
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to pad.
     * @param {number} [length=0] The padding length.
     * @param {string} [chars=' '] The string used as padding.
     * @returns {string} Returns the padded string.
     * @example
     *
     * _.padRight('abc', 6);
     * // => 'abc   '
     *
     * _.padRight('abc', 6, '_-');
     * // => 'abc_-_'
     *
     * _.padRight('abc', 3);
     * // => 'abc'
     */
    var padRight = createPadDir(true);

    /**
     * Converts `string` to an integer of the specified radix. If `radix` is
     * `undefined` or `0`, a `radix` of `10` is used unless `value` is a hexadecimal,
     * in which case a `radix` of `16` is used.
     *
     * **Note:** This method aligns with the [ES5 implementation](https://es5.github.io/#E)
     * of `parseInt`.
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} string The string to convert.
     * @param {number} [radix] The radix to interpret `value` by.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {number} Returns the converted integer.
     * @example
     *
     * _.parseInt('08');
     * // => 8
     *
     * _.map(['6', '08', '10'], _.parseInt);
     * // => [6, 8, 10]
     */
    function parseInt(string, radix, guard) {
      // Firefox < 21 and Opera < 15 follow ES3 for `parseInt`.
      // Chrome fails to trim leading <BOM> whitespace characters.
      // See https://code.google.com/p/v8/issues/detail?id=3109 for more details.
      if (guard ? isIterateeCall(string, radix, guard) : radix == null) {
        radix = 0;
      } else if (radix) {
        radix = +radix;
      }
      string = trim(string);
      return nativeParseInt(string, radix || (reHasHexPrefix.test(string) ? 16 : 10));
    }

    /**
     * Repeats the given string `n` times.
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to repeat.
     * @param {number} [n=0] The number of times to repeat the string.
     * @returns {string} Returns the repeated string.
     * @example
     *
     * _.repeat('*', 3);
     * // => '***'
     *
     * _.repeat('abc', 2);
     * // => 'abcabc'
     *
     * _.repeat('abc', 0);
     * // => ''
     */
    function repeat(string, n) {
      var result = '';
      string = baseToString(string);
      n = +n;
      if (n < 1 || !string || !nativeIsFinite(n)) {
        return result;
      }
      // Leverage the exponentiation by squaring algorithm for a faster repeat.
      // See https://en.wikipedia.org/wiki/Exponentiation_by_squaring for more details.
      do {
        if (n % 2) {
          result += string;
        }
        n = nativeFloor(n / 2);
        string += string;
      } while (n);

      return result;
    }

    /**
     * Converts `string` to [snake case](https://en.wikipedia.org/wiki/Snake_case).
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to convert.
     * @returns {string} Returns the snake cased string.
     * @example
     *
     * _.snakeCase('Foo Bar');
     * // => 'foo_bar'
     *
     * _.snakeCase('fooBar');
     * // => 'foo_bar'
     *
     * _.snakeCase('--foo-bar');
     * // => 'foo_bar'
     */
    var snakeCase = createCompounder(function(result, word, index) {
      return result + (index ? '_' : '') + word.toLowerCase();
    });

    /**
     * Converts `string` to [start case](https://en.wikipedia.org/wiki/Letter_case#Stylistic_or_specialised_usage).
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to convert.
     * @returns {string} Returns the start cased string.
     * @example
     *
     * _.startCase('--foo-bar');
     * // => 'Foo Bar'
     *
     * _.startCase('fooBar');
     * // => 'Foo Bar'
     *
     * _.startCase('__foo_bar__');
     * // => 'Foo Bar'
     */
    var startCase = createCompounder(function(result, word, index) {
      return result + (index ? ' ' : '') + (word.charAt(0).toUpperCase() + word.slice(1));
    });

    /**
     * Checks if `string` starts with the given target string.
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to search.
     * @param {string} [target] The string to search for.
     * @param {number} [position=0] The position to search from.
     * @returns {boolean} Returns `true` if `string` starts with `target`, else `false`.
     * @example
     *
     * _.startsWith('abc', 'a');
     * // => true
     *
     * _.startsWith('abc', 'b');
     * // => false
     *
     * _.startsWith('abc', 'b', 1);
     * // => true
     */
    function startsWith(string, target, position) {
      string = baseToString(string);
      position = position == null
        ? 0
        : nativeMin(position < 0 ? 0 : (+position || 0), string.length);

      return string.lastIndexOf(target, position) == position;
    }

    /**
     * Creates a compiled template function that can interpolate data properties
     * in "interpolate" delimiters, HTML-escape interpolated data properties in
     * "escape" delimiters, and execute JavaScript in "evaluate" delimiters. Data
     * properties may be accessed as free variables in the template. If a setting
     * object is provided it takes precedence over `_.templateSettings` values.
     *
     * **Note:** In the development build `_.template` utilizes
     * [sourceURLs](http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/#toc-sourceurl)
     * for easier debugging.
     *
     * For more information on precompiling templates see
     * [lodash's custom builds documentation](https://lodash.com/custom-builds).
     *
     * For more information on Chrome extension sandboxes see
     * [Chrome's extensions documentation](https://developer.chrome.com/extensions/sandboxingEval).
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The template string.
     * @param {Object} [options] The options object.
     * @param {RegExp} [options.escape] The HTML "escape" delimiter.
     * @param {RegExp} [options.evaluate] The "evaluate" delimiter.
     * @param {Object} [options.imports] An object to import into the template as free variables.
     * @param {RegExp} [options.interpolate] The "interpolate" delimiter.
     * @param {string} [options.sourceURL] The sourceURL of the template's compiled source.
     * @param {string} [options.variable] The data object variable name.
     * @param- {Object} [otherOptions] Enables the legacy `options` param signature.
     * @returns {Function} Returns the compiled template function.
     * @example
     *
     * // using the "interpolate" delimiter to create a compiled template
     * var compiled = _.template('hello <%= user %>!');
     * compiled({ 'user': 'fred' });
     * // => 'hello fred!'
     *
     * // using the HTML "escape" delimiter to escape data property values
     * var compiled = _.template('<b><%- value %></b>');
     * compiled({ 'value': '<script>' });
     * // => '<b>&lt;script&gt;</b>'
     *
     * // using the "evaluate" delimiter to execute JavaScript and generate HTML
     * var compiled = _.template('<% _.forEach(users, function(user) { %><li><%- user %></li><% }); %>');
     * compiled({ 'users': ['fred', 'barney'] });
     * // => '<li>fred</li><li>barney</li>'
     *
     * // using the internal `print` function in "evaluate" delimiters
     * var compiled = _.template('<% print("hello " + user); %>!');
     * compiled({ 'user': 'barney' });
     * // => 'hello barney!'
     *
     * // using the ES delimiter as an alternative to the default "interpolate" delimiter
     * var compiled = _.template('hello ${ user }!');
     * compiled({ 'user': 'pebbles' });
     * // => 'hello pebbles!'
     *
     * // using custom template delimiters
     * _.templateSettings.interpolate = /{{([\s\S]+?)}}/g;
     * var compiled = _.template('hello {{ user }}!');
     * compiled({ 'user': 'mustache' });
     * // => 'hello mustache!'
     *
     * // using backslashes to treat delimiters as plain text
     * var compiled = _.template('<%= "\\<%- value %\\>" %>');
     * compiled({ 'value': 'ignored' });
     * // => '<%- value %>'
     *
     * // using the `imports` option to import `jQuery` as `jq`
     * var text = '<% jq.each(users, function(user) { %><li><%- user %></li><% }); %>';
     * var compiled = _.template(text, { 'imports': { 'jq': jQuery } });
     * compiled({ 'users': ['fred', 'barney'] });
     * // => '<li>fred</li><li>barney</li>'
     *
     * // using the `sourceURL` option to specify a custom sourceURL for the template
     * var compiled = _.template('hello <%= user %>!', { 'sourceURL': '/basic/greeting.jst' });
     * compiled(data);
     * // => find the source of "greeting.jst" under the Sources tab or Resources panel of the web inspector
     *
     * // using the `variable` option to ensure a with-statement isn't used in the compiled template
     * var compiled = _.template('hi <%= data.user %>!', { 'variable': 'data' });
     * compiled.source;
     * // => function(data) {
     * //   var __t, __p = '';
     * //   __p += 'hi ' + ((__t = ( data.user )) == null ? '' : __t) + '!';
     * //   return __p;
     * // }
     *
     * // using the `source` property to inline compiled templates for meaningful
     * // line numbers in error messages and a stack trace
     * fs.writeFileSync(path.join(cwd, 'jst.js'), '\
     *   var JST = {\
     *     "main": ' + _.template(mainText).source + '\
     *   };\
     * ');
     */
    function template(string, options, otherOptions) {
      // Based on John Resig's `tmpl` implementation (http://ejohn.org/blog/javascript-micro-templating/)
      // and Laura Doktorova's doT.js (https://github.com/olado/doT).
      var settings = lodash.templateSettings;

      if (otherOptions && isIterateeCall(string, options, otherOptions)) {
        options = otherOptions = undefined;
      }
      string = baseToString(string);
      options = assignWith(baseAssign({}, otherOptions || options), settings, assignOwnDefaults);

      var imports = assignWith(baseAssign({}, options.imports), settings.imports, assignOwnDefaults),
          importsKeys = keys(imports),
          importsValues = baseValues(imports, importsKeys);

      var isEscaping,
          isEvaluating,
          index = 0,
          interpolate = options.interpolate || reNoMatch,
          source = "__p += '";

      // Compile the regexp to match each delimiter.
      var reDelimiters = RegExp(
        (options.escape || reNoMatch).source + '|' +
        interpolate.source + '|' +
        (interpolate === reInterpolate ? reEsTemplate : reNoMatch).source + '|' +
        (options.evaluate || reNoMatch).source + '|$'
      , 'g');

      // Use a sourceURL for easier debugging.
      var sourceURL = '//# sourceURL=' +
        ('sourceURL' in options
          ? options.sourceURL
          : ('lodash.templateSources[' + (++templateCounter) + ']')
        ) + '\n';

      string.replace(reDelimiters, function(match, escapeValue, interpolateValue, esTemplateValue, evaluateValue, offset) {
        interpolateValue || (interpolateValue = esTemplateValue);

        // Escape characters that can't be included in string literals.
        source += string.slice(index, offset).replace(reUnescapedString, escapeStringChar);

        // Replace delimiters with snippets.
        if (escapeValue) {
          isEscaping = true;
          source += "' +\n__e(" + escapeValue + ") +\n'";
        }
        if (evaluateValue) {
          isEvaluating = true;
          source += "';\n" + evaluateValue + ";\n__p += '";
        }
        if (interpolateValue) {
          source += "' +\n((__t = (" + interpolateValue + ")) == null ? '' : __t) +\n'";
        }
        index = offset + match.length;

        // The JS engine embedded in Adobe products requires returning the `match`
        // string in order to produce the correct `offset` value.
        return match;
      });

      source += "';\n";

      // If `variable` is not specified wrap a with-statement around the generated
      // code to add the data object to the top of the scope chain.
      var variable = options.variable;
      if (!variable) {
        source = 'with (obj) {\n' + source + '\n}\n';
      }
      // Cleanup code by stripping empty strings.
      source = (isEvaluating ? source.replace(reEmptyStringLeading, '') : source)
        .replace(reEmptyStringMiddle, '$1')
        .replace(reEmptyStringTrailing, '$1;');

      // Frame code as the function body.
      source = 'function(' + (variable || 'obj') + ') {\n' +
        (variable
          ? ''
          : 'obj || (obj = {});\n'
        ) +
        "var __t, __p = ''" +
        (isEscaping
           ? ', __e = _.escape'
           : ''
        ) +
        (isEvaluating
          ? ', __j = Array.prototype.join;\n' +
            "function print() { __p += __j.call(arguments, '') }\n"
          : ';\n'
        ) +
        source +
        'return __p\n}';

      var result = attempt(function() {
        return Function(importsKeys, sourceURL + 'return ' + source).apply(undefined, importsValues);
      });

      // Provide the compiled function's source by its `toString` method or
      // the `source` property as a convenience for inlining compiled templates.
      result.source = source;
      if (isError(result)) {
        throw result;
      }
      return result;
    }

    /**
     * Removes leading and trailing whitespace or specified characters from `string`.
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to trim.
     * @param {string} [chars=whitespace] The characters to trim.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {string} Returns the trimmed string.
     * @example
     *
     * _.trim('  abc  ');
     * // => 'abc'
     *
     * _.trim('-_-abc-_-', '_-');
     * // => 'abc'
     *
     * _.map(['  foo  ', '  bar  '], _.trim);
     * // => ['foo', 'bar']
     */
    function trim(string, chars, guard) {
      var value = string;
      string = baseToString(string);
      if (!string) {
        return string;
      }
      if (guard ? isIterateeCall(value, chars, guard) : chars == null) {
        return string.slice(trimmedLeftIndex(string), trimmedRightIndex(string) + 1);
      }
      chars = (chars + '');
      return string.slice(charsLeftIndex(string, chars), charsRightIndex(string, chars) + 1);
    }

    /**
     * Removes leading whitespace or specified characters from `string`.
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to trim.
     * @param {string} [chars=whitespace] The characters to trim.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {string} Returns the trimmed string.
     * @example
     *
     * _.trimLeft('  abc  ');
     * // => 'abc  '
     *
     * _.trimLeft('-_-abc-_-', '_-');
     * // => 'abc-_-'
     */
    function trimLeft(string, chars, guard) {
      var value = string;
      string = baseToString(string);
      if (!string) {
        return string;
      }
      if (guard ? isIterateeCall(value, chars, guard) : chars == null) {
        return string.slice(trimmedLeftIndex(string));
      }
      return string.slice(charsLeftIndex(string, (chars + '')));
    }

    /**
     * Removes trailing whitespace or specified characters from `string`.
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to trim.
     * @param {string} [chars=whitespace] The characters to trim.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {string} Returns the trimmed string.
     * @example
     *
     * _.trimRight('  abc  ');
     * // => '  abc'
     *
     * _.trimRight('-_-abc-_-', '_-');
     * // => '-_-abc'
     */
    function trimRight(string, chars, guard) {
      var value = string;
      string = baseToString(string);
      if (!string) {
        return string;
      }
      if (guard ? isIterateeCall(value, chars, guard) : chars == null) {
        return string.slice(0, trimmedRightIndex(string) + 1);
      }
      return string.slice(0, charsRightIndex(string, (chars + '')) + 1);
    }

    /**
     * Truncates `string` if it's longer than the given maximum string length.
     * The last characters of the truncated string are replaced with the omission
     * string which defaults to "...".
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to truncate.
     * @param {Object|number} [options] The options object or maximum string length.
     * @param {number} [options.length=30] The maximum string length.
     * @param {string} [options.omission='...'] The string to indicate text is omitted.
     * @param {RegExp|string} [options.separator] The separator pattern to truncate to.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {string} Returns the truncated string.
     * @example
     *
     * _.trunc('hi-diddly-ho there, neighborino');
     * // => 'hi-diddly-ho there, neighbo...'
     *
     * _.trunc('hi-diddly-ho there, neighborino', 24);
     * // => 'hi-diddly-ho there, n...'
     *
     * _.trunc('hi-diddly-ho there, neighborino', {
     *   'length': 24,
     *   'separator': ' '
     * });
     * // => 'hi-diddly-ho there,...'
     *
     * _.trunc('hi-diddly-ho there, neighborino', {
     *   'length': 24,
     *   'separator': /,? +/
     * });
     * // => 'hi-diddly-ho there...'
     *
     * _.trunc('hi-diddly-ho there, neighborino', {
     *   'omission': ' [...]'
     * });
     * // => 'hi-diddly-ho there, neig [...]'
     */
    function trunc(string, options, guard) {
      if (guard && isIterateeCall(string, options, guard)) {
        options = undefined;
      }
      var length = DEFAULT_TRUNC_LENGTH,
          omission = DEFAULT_TRUNC_OMISSION;

      if (options != null) {
        if (isObject(options)) {
          var separator = 'separator' in options ? options.separator : separator;
          length = 'length' in options ? (+options.length || 0) : length;
          omission = 'omission' in options ? baseToString(options.omission) : omission;
        } else {
          length = +options || 0;
        }
      }
      string = baseToString(string);
      if (length >= string.length) {
        return string;
      }
      var end = length - omission.length;
      if (end < 1) {
        return omission;
      }
      var result = string.slice(0, end);
      if (separator == null) {
        return result + omission;
      }
      if (isRegExp(separator)) {
        if (string.slice(end).search(separator)) {
          var match,
              newEnd,
              substring = string.slice(0, end);

          if (!separator.global) {
            separator = RegExp(separator.source, (reFlags.exec(separator) || '') + 'g');
          }
          separator.lastIndex = 0;
          while ((match = separator.exec(substring))) {
            newEnd = match.index;
          }
          result = result.slice(0, newEnd == null ? end : newEnd);
        }
      } else if (string.indexOf(separator, end) != end) {
        var index = result.lastIndexOf(separator);
        if (index > -1) {
          result = result.slice(0, index);
        }
      }
      return result + omission;
    }

    /**
     * The inverse of `_.escape`; this method converts the HTML entities
     * `&amp;`, `&lt;`, `&gt;`, `&quot;`, `&#39;`, and `&#96;` in `string` to their
     * corresponding characters.
     *
     * **Note:** No other HTML entities are unescaped. To unescape additional HTML
     * entities use a third-party library like [_he_](https://mths.be/he).
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to unescape.
     * @returns {string} Returns the unescaped string.
     * @example
     *
     * _.unescape('fred, barney, &amp; pebbles');
     * // => 'fred, barney, & pebbles'
     */
    function unescape(string) {
      string = baseToString(string);
      return (string && reHasEscapedHtml.test(string))
        ? string.replace(reEscapedHtml, unescapeHtmlChar)
        : string;
    }

    /**
     * Splits `string` into an array of its words.
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to inspect.
     * @param {RegExp|string} [pattern] The pattern to match words.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {Array} Returns the words of `string`.
     * @example
     *
     * _.words('fred, barney, & pebbles');
     * // => ['fred', 'barney', 'pebbles']
     *
     * _.words('fred, barney, & pebbles', /[^, ]+/g);
     * // => ['fred', 'barney', '&', 'pebbles']
     */
    function words(string, pattern, guard) {
      if (guard && isIterateeCall(string, pattern, guard)) {
        pattern = undefined;
      }
      string = baseToString(string);
      return string.match(pattern || reWords) || [];
    }

    /*------------------------------------------------------------------------*/

    /**
     * Attempts to invoke `func`, returning either the result or the caught error
     * object. Any additional arguments are provided to `func` when it is invoked.
     *
     * @static
     * @memberOf _
     * @category Utility
     * @param {Function} func The function to attempt.
     * @returns {*} Returns the `func` result or error object.
     * @example
     *
     * // avoid throwing errors for invalid selectors
     * var elements = _.attempt(function(selector) {
     *   return document.querySelectorAll(selector);
     * }, '>_>');
     *
     * if (_.isError(elements)) {
     *   elements = [];
     * }
     */
    var attempt = restParam(function(func, args) {
      try {
        return func.apply(undefined, args);
      } catch(e) {
        return isError(e) ? e : new Error(e);
      }
    });

    /**
     * Creates a function that invokes `func` with the `this` binding of `thisArg`
     * and arguments of the created function. If `func` is a property name the
     * created callback returns the property value for a given element. If `func`
     * is an object the created callback returns `true` for elements that contain
     * the equivalent object properties, otherwise it returns `false`.
     *
     * @static
     * @memberOf _
     * @alias iteratee
     * @category Utility
     * @param {*} [func=_.identity] The value to convert to a callback.
     * @param {*} [thisArg] The `this` binding of `func`.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {Function} Returns the callback.
     * @example
     *
     * var users = [
     *   { 'user': 'barney', 'age': 36 },
     *   { 'user': 'fred',   'age': 40 }
     * ];
     *
     * // wrap to create custom callback shorthands
     * _.callback = _.wrap(_.callback, function(callback, func, thisArg) {
     *   var match = /^(.+?)__([gl]t)(.+)$/.exec(func);
     *   if (!match) {
     *     return callback(func, thisArg);
     *   }
     *   return function(object) {
     *     return match[2] == 'gt'
     *       ? object[match[1]] > match[3]
     *       : object[match[1]] < match[3];
     *   };
     * });
     *
     * _.filter(users, 'age__gt36');
     * // => [{ 'user': 'fred', 'age': 40 }]
     */
    function callback(func, thisArg, guard) {
      if (guard && isIterateeCall(func, thisArg, guard)) {
        thisArg = undefined;
      }
      return isObjectLike(func)
        ? matches(func)
        : baseCallback(func, thisArg);
    }

    /**
     * Creates a function that returns `value`.
     *
     * @static
     * @memberOf _
     * @category Utility
     * @param {*} value The value to return from the new function.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var object = { 'user': 'fred' };
     * var getter = _.constant(object);
     *
     * getter() === object;
     * // => true
     */
    function constant(value) {
      return function() {
        return value;
      };
    }

    /**
     * This method returns the first argument provided to it.
     *
     * @static
     * @memberOf _
     * @category Utility
     * @param {*} value Any value.
     * @returns {*} Returns `value`.
     * @example
     *
     * var object = { 'user': 'fred' };
     *
     * _.identity(object) === object;
     * // => true
     */
    function identity(value) {
      return value;
    }

    /**
     * Creates a function that performs a deep comparison between a given object
     * and `source`, returning `true` if the given object has equivalent property
     * values, else `false`.
     *
     * **Note:** This method supports comparing arrays, booleans, `Date` objects,
     * numbers, `Object` objects, regexes, and strings. Objects are compared by
     * their own, not inherited, enumerable properties. For comparing a single
     * own or inherited property value see `_.matchesProperty`.
     *
     * @static
     * @memberOf _
     * @category Utility
     * @param {Object} source The object of property values to match.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var users = [
     *   { 'user': 'barney', 'age': 36, 'active': true },
     *   { 'user': 'fred',   'age': 40, 'active': false }
     * ];
     *
     * _.filter(users, _.matches({ 'age': 40, 'active': false }));
     * // => [{ 'user': 'fred', 'age': 40, 'active': false }]
     */
    function matches(source) {
      return baseMatches(baseClone(source, true));
    }

    /**
     * Creates a function that compares the property value of `path` on a given
     * object to `value`.
     *
     * **Note:** This method supports comparing arrays, booleans, `Date` objects,
     * numbers, `Object` objects, regexes, and strings. Objects are compared by
     * their own, not inherited, enumerable properties.
     *
     * @static
     * @memberOf _
     * @category Utility
     * @param {Array|string} path The path of the property to get.
     * @param {*} srcValue The value to match.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var users = [
     *   { 'user': 'barney' },
     *   { 'user': 'fred' }
     * ];
     *
     * _.find(users, _.matchesProperty('user', 'fred'));
     * // => { 'user': 'fred' }
     */
    function matchesProperty(path, srcValue) {
      return baseMatchesProperty(path, baseClone(srcValue, true));
    }

    /**
     * Creates a function that invokes the method at `path` on a given object.
     * Any additional arguments are provided to the invoked method.
     *
     * @static
     * @memberOf _
     * @category Utility
     * @param {Array|string} path The path of the method to invoke.
     * @param {...*} [args] The arguments to invoke the method with.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var objects = [
     *   { 'a': { 'b': { 'c': _.constant(2) } } },
     *   { 'a': { 'b': { 'c': _.constant(1) } } }
     * ];
     *
     * _.map(objects, _.method('a.b.c'));
     * // => [2, 1]
     *
     * _.invoke(_.sortBy(objects, _.method(['a', 'b', 'c'])), 'a.b.c');
     * // => [1, 2]
     */
    var method = restParam(function(path, args) {
      return function(object) {
        return invokePath(object, path, args);
      };
    });

    /**
     * The opposite of `_.method`; this method creates a function that invokes
     * the method at a given path on `object`. Any additional arguments are
     * provided to the invoked method.
     *
     * @static
     * @memberOf _
     * @category Utility
     * @param {Object} object The object to query.
     * @param {...*} [args] The arguments to invoke the method with.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var array = _.times(3, _.constant),
     *     object = { 'a': array, 'b': array, 'c': array };
     *
     * _.map(['a[2]', 'c[0]'], _.methodOf(object));
     * // => [2, 0]
     *
     * _.map([['a', '2'], ['c', '0']], _.methodOf(object));
     * // => [2, 0]
     */
    var methodOf = restParam(function(object, args) {
      return function(path) {
        return invokePath(object, path, args);
      };
    });

    /**
     * Adds all own enumerable function properties of a source object to the
     * destination object. If `object` is a function then methods are added to
     * its prototype as well.
     *
     * **Note:** Use `_.runInContext` to create a pristine `lodash` function to
     * avoid conflicts caused by modifying the original.
     *
     * @static
     * @memberOf _
     * @category Utility
     * @param {Function|Object} [object=lodash] The destination object.
     * @param {Object} source The object of functions to add.
     * @param {Object} [options] The options object.
     * @param {boolean} [options.chain=true] Specify whether the functions added
     *  are chainable.
     * @returns {Function|Object} Returns `object`.
     * @example
     *
     * function vowels(string) {
     *   return _.filter(string, function(v) {
     *     return /[aeiou]/i.test(v);
     *   });
     * }
     *
     * _.mixin({ 'vowels': vowels });
     * _.vowels('fred');
     * // => ['e']
     *
     * _('fred').vowels().value();
     * // => ['e']
     *
     * _.mixin({ 'vowels': vowels }, { 'chain': false });
     * _('fred').vowels();
     * // => ['e']
     */
    function mixin(object, source, options) {
      if (options == null) {
        var isObj = isObject(source),
            props = isObj ? keys(source) : undefined,
            methodNames = (props && props.length) ? baseFunctions(source, props) : undefined;

        if (!(methodNames ? methodNames.length : isObj)) {
          methodNames = false;
          options = source;
          source = object;
          object = this;
        }
      }
      if (!methodNames) {
        methodNames = baseFunctions(source, keys(source));
      }
      var chain = true,
          index = -1,
          isFunc = isFunction(object),
          length = methodNames.length;

      if (options === false) {
        chain = false;
      } else if (isObject(options) && 'chain' in options) {
        chain = options.chain;
      }
      while (++index < length) {
        var methodName = methodNames[index],
            func = source[methodName];

        object[methodName] = func;
        if (isFunc) {
          object.prototype[methodName] = (function(func) {
            return function() {
              var chainAll = this.__chain__;
              if (chain || chainAll) {
                var result = object(this.__wrapped__),
                    actions = result.__actions__ = arrayCopy(this.__actions__);

                actions.push({ 'func': func, 'args': arguments, 'thisArg': object });
                result.__chain__ = chainAll;
                return result;
              }
              return func.apply(object, arrayPush([this.value()], arguments));
            };
          }(func));
        }
      }
      return object;
    }

    /**
     * Reverts the `_` variable to its previous value and returns a reference to
     * the `lodash` function.
     *
     * @static
     * @memberOf _
     * @category Utility
     * @returns {Function} Returns the `lodash` function.
     * @example
     *
     * var lodash = _.noConflict();
     */
    function noConflict() {
      root._ = oldDash;
      return this;
    }

    /**
     * A no-operation function that returns `undefined` regardless of the
     * arguments it receives.
     *
     * @static
     * @memberOf _
     * @category Utility
     * @example
     *
     * var object = { 'user': 'fred' };
     *
     * _.noop(object) === undefined;
     * // => true
     */
    function noop() {
      // No operation performed.
    }

    /**
     * Creates a function that returns the property value at `path` on a
     * given object.
     *
     * @static
     * @memberOf _
     * @category Utility
     * @param {Array|string} path The path of the property to get.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var objects = [
     *   { 'a': { 'b': { 'c': 2 } } },
     *   { 'a': { 'b': { 'c': 1 } } }
     * ];
     *
     * _.map(objects, _.property('a.b.c'));
     * // => [2, 1]
     *
     * _.pluck(_.sortBy(objects, _.property(['a', 'b', 'c'])), 'a.b.c');
     * // => [1, 2]
     */
    function property(path) {
      return isKey(path) ? baseProperty(path) : basePropertyDeep(path);
    }

    /**
     * The opposite of `_.property`; this method creates a function that returns
     * the property value at a given path on `object`.
     *
     * @static
     * @memberOf _
     * @category Utility
     * @param {Object} object The object to query.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var array = [0, 1, 2],
     *     object = { 'a': array, 'b': array, 'c': array };
     *
     * _.map(['a[2]', 'c[0]'], _.propertyOf(object));
     * // => [2, 0]
     *
     * _.map([['a', '2'], ['c', '0']], _.propertyOf(object));
     * // => [2, 0]
     */
    function propertyOf(object) {
      return function(path) {
        return baseGet(object, toPath(path), path + '');
      };
    }

    /**
     * Creates an array of numbers (positive and/or negative) progressing from
     * `start` up to, but not including, `end`. If `end` is not specified it is
     * set to `start` with `start` then set to `0`. If `end` is less than `start`
     * a zero-length range is created unless a negative `step` is specified.
     *
     * @static
     * @memberOf _
     * @category Utility
     * @param {number} [start=0] The start of the range.
     * @param {number} end The end of the range.
     * @param {number} [step=1] The value to increment or decrement by.
     * @returns {Array} Returns the new array of numbers.
     * @example
     *
     * _.range(4);
     * // => [0, 1, 2, 3]
     *
     * _.range(1, 5);
     * // => [1, 2, 3, 4]
     *
     * _.range(0, 20, 5);
     * // => [0, 5, 10, 15]
     *
     * _.range(0, -4, -1);
     * // => [0, -1, -2, -3]
     *
     * _.range(1, 4, 0);
     * // => [1, 1, 1]
     *
     * _.range(0);
     * // => []
     */
    function range(start, end, step) {
      if (step && isIterateeCall(start, end, step)) {
        end = step = undefined;
      }
      start = +start || 0;
      step = step == null ? 1 : (+step || 0);

      if (end == null) {
        end = start;
        start = 0;
      } else {
        end = +end || 0;
      }
      // Use `Array(length)` so engines like Chakra and V8 avoid slower modes.
      // See https://youtu.be/XAqIpGU8ZZk#t=17m25s for more details.
      var index = -1,
          length = nativeMax(nativeCeil((end - start) / (step || 1)), 0),
          result = Array(length);

      while (++index < length) {
        result[index] = start;
        start += step;
      }
      return result;
    }

    /**
     * Invokes the iteratee function `n` times, returning an array of the results
     * of each invocation. The `iteratee` is bound to `thisArg` and invoked with
     * one argument; (index).
     *
     * @static
     * @memberOf _
     * @category Utility
     * @param {number} n The number of times to invoke `iteratee`.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Array} Returns the array of results.
     * @example
     *
     * var diceRolls = _.times(3, _.partial(_.random, 1, 6, false));
     * // => [3, 6, 4]
     *
     * _.times(3, function(n) {
     *   mage.castSpell(n);
     * });
     * // => invokes `mage.castSpell(n)` three times with `n` of `0`, `1`, and `2`
     *
     * _.times(3, function(n) {
     *   this.cast(n);
     * }, mage);
     * // => also invokes `mage.castSpell(n)` three times
     */
    function times(n, iteratee, thisArg) {
      n = nativeFloor(n);

      // Exit early to avoid a JSC JIT bug in Safari 8
      // where `Array(0)` is treated as `Array(1)`.
      if (n < 1 || !nativeIsFinite(n)) {
        return [];
      }
      var index = -1,
          result = Array(nativeMin(n, MAX_ARRAY_LENGTH));

      iteratee = bindCallback(iteratee, thisArg, 1);
      while (++index < n) {
        if (index < MAX_ARRAY_LENGTH) {
          result[index] = iteratee(index);
        } else {
          iteratee(index);
        }
      }
      return result;
    }

    /**
     * Generates a unique ID. If `prefix` is provided the ID is appended to it.
     *
     * @static
     * @memberOf _
     * @category Utility
     * @param {string} [prefix] The value to prefix the ID with.
     * @returns {string} Returns the unique ID.
     * @example
     *
     * _.uniqueId('contact_');
     * // => 'contact_104'
     *
     * _.uniqueId();
     * // => '105'
     */
    function uniqueId(prefix) {
      var id = ++idCounter;
      return baseToString(prefix) + id;
    }

    /*------------------------------------------------------------------------*/

    /**
     * Adds two numbers.
     *
     * @static
     * @memberOf _
     * @category Math
     * @param {number} augend The first number to add.
     * @param {number} addend The second number to add.
     * @returns {number} Returns the sum.
     * @example
     *
     * _.add(6, 4);
     * // => 10
     */
    function add(augend, addend) {
      return (+augend || 0) + (+addend || 0);
    }

    /**
     * Calculates `n` rounded up to `precision`.
     *
     * @static
     * @memberOf _
     * @category Math
     * @param {number} n The number to round up.
     * @param {number} [precision=0] The precision to round up to.
     * @returns {number} Returns the rounded up number.
     * @example
     *
     * _.ceil(4.006);
     * // => 5
     *
     * _.ceil(6.004, 2);
     * // => 6.01
     *
     * _.ceil(6040, -2);
     * // => 6100
     */
    var ceil = createRound('ceil');

    /**
     * Calculates `n` rounded down to `precision`.
     *
     * @static
     * @memberOf _
     * @category Math
     * @param {number} n The number to round down.
     * @param {number} [precision=0] The precision to round down to.
     * @returns {number} Returns the rounded down number.
     * @example
     *
     * _.floor(4.006);
     * // => 4
     *
     * _.floor(0.046, 2);
     * // => 0.04
     *
     * _.floor(4060, -2);
     * // => 4000
     */
    var floor = createRound('floor');

    /**
     * Gets the maximum value of `collection`. If `collection` is empty or falsey
     * `-Infinity` is returned. If an iteratee function is provided it is invoked
     * for each value in `collection` to generate the criterion by which the value
     * is ranked. The `iteratee` is bound to `thisArg` and invoked with three
     * arguments: (value, index, collection).
     *
     * If a property name is provided for `iteratee` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `iteratee` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Math
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [iteratee] The function invoked per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {*} Returns the maximum value.
     * @example
     *
     * _.max([4, 2, 8, 6]);
     * // => 8
     *
     * _.max([]);
     * // => -Infinity
     *
     * var users = [
     *   { 'user': 'barney', 'age': 36 },
     *   { 'user': 'fred',   'age': 40 }
     * ];
     *
     * _.max(users, function(chr) {
     *   return chr.age;
     * });
     * // => { 'user': 'fred', 'age': 40 }
     *
     * // using the `_.property` callback shorthand
     * _.max(users, 'age');
     * // => { 'user': 'fred', 'age': 40 }
     */
    var max = createExtremum(gt, NEGATIVE_INFINITY);

    /**
     * Gets the minimum value of `collection`. If `collection` is empty or falsey
     * `Infinity` is returned. If an iteratee function is provided it is invoked
     * for each value in `collection` to generate the criterion by which the value
     * is ranked. The `iteratee` is bound to `thisArg` and invoked with three
     * arguments: (value, index, collection).
     *
     * If a property name is provided for `iteratee` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `iteratee` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Math
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [iteratee] The function invoked per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {*} Returns the minimum value.
     * @example
     *
     * _.min([4, 2, 8, 6]);
     * // => 2
     *
     * _.min([]);
     * // => Infinity
     *
     * var users = [
     *   { 'user': 'barney', 'age': 36 },
     *   { 'user': 'fred',   'age': 40 }
     * ];
     *
     * _.min(users, function(chr) {
     *   return chr.age;
     * });
     * // => { 'user': 'barney', 'age': 36 }
     *
     * // using the `_.property` callback shorthand
     * _.min(users, 'age');
     * // => { 'user': 'barney', 'age': 36 }
     */
    var min = createExtremum(lt, POSITIVE_INFINITY);

    /**
     * Calculates `n` rounded to `precision`.
     *
     * @static
     * @memberOf _
     * @category Math
     * @param {number} n The number to round.
     * @param {number} [precision=0] The precision to round to.
     * @returns {number} Returns the rounded number.
     * @example
     *
     * _.round(4.006);
     * // => 4
     *
     * _.round(4.006, 2);
     * // => 4.01
     *
     * _.round(4060, -2);
     * // => 4100
     */
    var round = createRound('round');

    /**
     * Gets the sum of the values in `collection`.
     *
     * @static
     * @memberOf _
     * @category Math
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [iteratee] The function invoked per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {number} Returns the sum.
     * @example
     *
     * _.sum([4, 6]);
     * // => 10
     *
     * _.sum({ 'a': 4, 'b': 6 });
     * // => 10
     *
     * var objects = [
     *   { 'n': 4 },
     *   { 'n': 6 }
     * ];
     *
     * _.sum(objects, function(object) {
     *   return object.n;
     * });
     * // => 10
     *
     * // using the `_.property` callback shorthand
     * _.sum(objects, 'n');
     * // => 10
     */
    function sum(collection, iteratee, thisArg) {
      if (thisArg && isIterateeCall(collection, iteratee, thisArg)) {
        iteratee = undefined;
      }
      iteratee = getCallback(iteratee, thisArg, 3);
      return iteratee.length == 1
        ? arraySum(isArray(collection) ? collection : toIterable(collection), iteratee)
        : baseSum(collection, iteratee);
    }

    /*------------------------------------------------------------------------*/

    // Ensure wrappers are instances of `baseLodash`.
    lodash.prototype = baseLodash.prototype;

    LodashWrapper.prototype = baseCreate(baseLodash.prototype);
    LodashWrapper.prototype.constructor = LodashWrapper;

    LazyWrapper.prototype = baseCreate(baseLodash.prototype);
    LazyWrapper.prototype.constructor = LazyWrapper;

    // Add functions to the `Map` cache.
    MapCache.prototype['delete'] = mapDelete;
    MapCache.prototype.get = mapGet;
    MapCache.prototype.has = mapHas;
    MapCache.prototype.set = mapSet;

    // Add functions to the `Set` cache.
    SetCache.prototype.push = cachePush;

    // Assign cache to `_.memoize`.
    memoize.Cache = MapCache;

    // Add functions that return wrapped values when chaining.
    lodash.after = after;
    lodash.ary = ary;
    lodash.assign = assign;
    lodash.at = at;
    lodash.before = before;
    lodash.bind = bind;
    lodash.bindAll = bindAll;
    lodash.bindKey = bindKey;
    lodash.callback = callback;
    lodash.chain = chain;
    lodash.chunk = chunk;
    lodash.compact = compact;
    lodash.constant = constant;
    lodash.countBy = countBy;
    lodash.create = create;
    lodash.curry = curry;
    lodash.curryRight = curryRight;
    lodash.debounce = debounce;
    lodash.defaults = defaults;
    lodash.defaultsDeep = defaultsDeep;
    lodash.defer = defer;
    lodash.delay = delay;
    lodash.difference = difference;
    lodash.drop = drop;
    lodash.dropRight = dropRight;
    lodash.dropRightWhile = dropRightWhile;
    lodash.dropWhile = dropWhile;
    lodash.fill = fill;
    lodash.filter = filter;
    lodash.flatten = flatten;
    lodash.flattenDeep = flattenDeep;
    lodash.flow = flow;
    lodash.flowRight = flowRight;
    lodash.forEach = forEach;
    lodash.forEachRight = forEachRight;
    lodash.forIn = forIn;
    lodash.forInRight = forInRight;
    lodash.forOwn = forOwn;
    lodash.forOwnRight = forOwnRight;
    lodash.functions = functions;
    lodash.groupBy = groupBy;
    lodash.indexBy = indexBy;
    lodash.initial = initial;
    lodash.intersection = intersection;
    lodash.invert = invert;
    lodash.invoke = invoke;
    lodash.keys = keys;
    lodash.keysIn = keysIn;
    lodash.map = map;
    lodash.mapKeys = mapKeys;
    lodash.mapValues = mapValues;
    lodash.matches = matches;
    lodash.matchesProperty = matchesProperty;
    lodash.memoize = memoize;
    lodash.merge = merge;
    lodash.method = method;
    lodash.methodOf = methodOf;
    lodash.mixin = mixin;
    lodash.modArgs = modArgs;
    lodash.negate = negate;
    lodash.omit = omit;
    lodash.once = once;
    lodash.pairs = pairs;
    lodash.partial = partial;
    lodash.partialRight = partialRight;
    lodash.partition = partition;
    lodash.pick = pick;
    lodash.pluck = pluck;
    lodash.property = property;
    lodash.propertyOf = propertyOf;
    lodash.pull = pull;
    lodash.pullAt = pullAt;
    lodash.range = range;
    lodash.rearg = rearg;
    lodash.reject = reject;
    lodash.remove = remove;
    lodash.rest = rest;
    lodash.restParam = restParam;
    lodash.set = set;
    lodash.shuffle = shuffle;
    lodash.slice = slice;
    lodash.sortBy = sortBy;
    lodash.sortByAll = sortByAll;
    lodash.sortByOrder = sortByOrder;
    lodash.spread = spread;
    lodash.take = take;
    lodash.takeRight = takeRight;
    lodash.takeRightWhile = takeRightWhile;
    lodash.takeWhile = takeWhile;
    lodash.tap = tap;
    lodash.throttle = throttle;
    lodash.thru = thru;
    lodash.times = times;
    lodash.toArray = toArray;
    lodash.toPlainObject = toPlainObject;
    lodash.transform = transform;
    lodash.union = union;
    lodash.uniq = uniq;
    lodash.unzip = unzip;
    lodash.unzipWith = unzipWith;
    lodash.values = values;
    lodash.valuesIn = valuesIn;
    lodash.where = where;
    lodash.without = without;
    lodash.wrap = wrap;
    lodash.xor = xor;
    lodash.zip = zip;
    lodash.zipObject = zipObject;
    lodash.zipWith = zipWith;

    // Add aliases.
    lodash.backflow = flowRight;
    lodash.collect = map;
    lodash.compose = flowRight;
    lodash.each = forEach;
    lodash.eachRight = forEachRight;
    lodash.extend = assign;
    lodash.iteratee = callback;
    lodash.methods = functions;
    lodash.object = zipObject;
    lodash.select = filter;
    lodash.tail = rest;
    lodash.unique = uniq;

    // Add functions to `lodash.prototype`.
    mixin(lodash, lodash);

    /*------------------------------------------------------------------------*/

    // Add functions that return unwrapped values when chaining.
    lodash.add = add;
    lodash.attempt = attempt;
    lodash.camelCase = camelCase;
    lodash.capitalize = capitalize;
    lodash.ceil = ceil;
    lodash.clone = clone;
    lodash.cloneDeep = cloneDeep;
    lodash.deburr = deburr;
    lodash.endsWith = endsWith;
    lodash.escape = escape;
    lodash.escapeRegExp = escapeRegExp;
    lodash.every = every;
    lodash.find = find;
    lodash.findIndex = findIndex;
    lodash.findKey = findKey;
    lodash.findLast = findLast;
    lodash.findLastIndex = findLastIndex;
    lodash.findLastKey = findLastKey;
    lodash.findWhere = findWhere;
    lodash.first = first;
    lodash.floor = floor;
    lodash.get = get;
    lodash.gt = gt;
    lodash.gte = gte;
    lodash.has = has;
    lodash.identity = identity;
    lodash.includes = includes;
    lodash.indexOf = indexOf;
    lodash.inRange = inRange;
    lodash.isArguments = isArguments;
    lodash.isArray = isArray;
    lodash.isBoolean = isBoolean;
    lodash.isDate = isDate;
    lodash.isElement = isElement;
    lodash.isEmpty = isEmpty;
    lodash.isEqual = isEqual;
    lodash.isError = isError;
    lodash.isFinite = isFinite;
    lodash.isFunction = isFunction;
    lodash.isMatch = isMatch;
    lodash.isNaN = isNaN;
    lodash.isNative = isNative;
    lodash.isNull = isNull;
    lodash.isNumber = isNumber;
    lodash.isObject = isObject;
    lodash.isPlainObject = isPlainObject;
    lodash.isRegExp = isRegExp;
    lodash.isString = isString;
    lodash.isTypedArray = isTypedArray;
    lodash.isUndefined = isUndefined;
    lodash.kebabCase = kebabCase;
    lodash.last = last;
    lodash.lastIndexOf = lastIndexOf;
    lodash.lt = lt;
    lodash.lte = lte;
    lodash.max = max;
    lodash.min = min;
    lodash.noConflict = noConflict;
    lodash.noop = noop;
    lodash.now = now;
    lodash.pad = pad;
    lodash.padLeft = padLeft;
    lodash.padRight = padRight;
    lodash.parseInt = parseInt;
    lodash.random = random;
    lodash.reduce = reduce;
    lodash.reduceRight = reduceRight;
    lodash.repeat = repeat;
    lodash.result = result;
    lodash.round = round;
    lodash.runInContext = runInContext;
    lodash.size = size;
    lodash.snakeCase = snakeCase;
    lodash.some = some;
    lodash.sortedIndex = sortedIndex;
    lodash.sortedLastIndex = sortedLastIndex;
    lodash.startCase = startCase;
    lodash.startsWith = startsWith;
    lodash.sum = sum;
    lodash.template = template;
    lodash.trim = trim;
    lodash.trimLeft = trimLeft;
    lodash.trimRight = trimRight;
    lodash.trunc = trunc;
    lodash.unescape = unescape;
    lodash.uniqueId = uniqueId;
    lodash.words = words;

    // Add aliases.
    lodash.all = every;
    lodash.any = some;
    lodash.contains = includes;
    lodash.eq = isEqual;
    lodash.detect = find;
    lodash.foldl = reduce;
    lodash.foldr = reduceRight;
    lodash.head = first;
    lodash.include = includes;
    lodash.inject = reduce;

    mixin(lodash, (function() {
      var source = {};
      baseForOwn(lodash, function(func, methodName) {
        if (!lodash.prototype[methodName]) {
          source[methodName] = func;
        }
      });
      return source;
    }()), false);

    /*------------------------------------------------------------------------*/

    // Add functions capable of returning wrapped and unwrapped values when chaining.
    lodash.sample = sample;

    lodash.prototype.sample = function(n) {
      if (!this.__chain__ && n == null) {
        return sample(this.value());
      }
      return this.thru(function(value) {
        return sample(value, n);
      });
    };

    /*------------------------------------------------------------------------*/

    /**
     * The semantic version number.
     *
     * @static
     * @memberOf _
     * @type string
     */
    lodash.VERSION = VERSION;

    // Assign default placeholders.
    arrayEach(['bind', 'bindKey', 'curry', 'curryRight', 'partial', 'partialRight'], function(methodName) {
      lodash[methodName].placeholder = lodash;
    });

    // Add `LazyWrapper` methods for `_.drop` and `_.take` variants.
    arrayEach(['drop', 'take'], function(methodName, index) {
      LazyWrapper.prototype[methodName] = function(n) {
        var filtered = this.__filtered__;
        if (filtered && !index) {
          return new LazyWrapper(this);
        }
        n = n == null ? 1 : nativeMax(nativeFloor(n) || 0, 0);

        var result = this.clone();
        if (filtered) {
          result.__takeCount__ = nativeMin(result.__takeCount__, n);
        } else {
          result.__views__.push({ 'size': n, 'type': methodName + (result.__dir__ < 0 ? 'Right' : '') });
        }
        return result;
      };

      LazyWrapper.prototype[methodName + 'Right'] = function(n) {
        return this.reverse()[methodName](n).reverse();
      };
    });

    // Add `LazyWrapper` methods that accept an `iteratee` value.
    arrayEach(['filter', 'map', 'takeWhile'], function(methodName, index) {
      var type = index + 1,
          isFilter = type != LAZY_MAP_FLAG;

      LazyWrapper.prototype[methodName] = function(iteratee, thisArg) {
        var result = this.clone();
        result.__iteratees__.push({ 'iteratee': getCallback(iteratee, thisArg, 1), 'type': type });
        result.__filtered__ = result.__filtered__ || isFilter;
        return result;
      };
    });

    // Add `LazyWrapper` methods for `_.first` and `_.last`.
    arrayEach(['first', 'last'], function(methodName, index) {
      var takeName = 'take' + (index ? 'Right' : '');

      LazyWrapper.prototype[methodName] = function() {
        return this[takeName](1).value()[0];
      };
    });

    // Add `LazyWrapper` methods for `_.initial` and `_.rest`.
    arrayEach(['initial', 'rest'], function(methodName, index) {
      var dropName = 'drop' + (index ? '' : 'Right');

      LazyWrapper.prototype[methodName] = function() {
        return this.__filtered__ ? new LazyWrapper(this) : this[dropName](1);
      };
    });

    // Add `LazyWrapper` methods for `_.pluck` and `_.where`.
    arrayEach(['pluck', 'where'], function(methodName, index) {
      var operationName = index ? 'filter' : 'map',
          createCallback = index ? baseMatches : property;

      LazyWrapper.prototype[methodName] = function(value) {
        return this[operationName](createCallback(value));
      };
    });

    LazyWrapper.prototype.compact = function() {
      return this.filter(identity);
    };

    LazyWrapper.prototype.reject = function(predicate, thisArg) {
      predicate = getCallback(predicate, thisArg, 1);
      return this.filter(function(value) {
        return !predicate(value);
      });
    };

    LazyWrapper.prototype.slice = function(start, end) {
      start = start == null ? 0 : (+start || 0);

      var result = this;
      if (result.__filtered__ && (start > 0 || end < 0)) {
        return new LazyWrapper(result);
      }
      if (start < 0) {
        result = result.takeRight(-start);
      } else if (start) {
        result = result.drop(start);
      }
      if (end !== undefined) {
        end = (+end || 0);
        result = end < 0 ? result.dropRight(-end) : result.take(end - start);
      }
      return result;
    };

    LazyWrapper.prototype.takeRightWhile = function(predicate, thisArg) {
      return this.reverse().takeWhile(predicate, thisArg).reverse();
    };

    LazyWrapper.prototype.toArray = function() {
      return this.take(POSITIVE_INFINITY);
    };

    // Add `LazyWrapper` methods to `lodash.prototype`.
    baseForOwn(LazyWrapper.prototype, function(func, methodName) {
      var checkIteratee = /^(?:filter|map|reject)|While$/.test(methodName),
          retUnwrapped = /^(?:first|last)$/.test(methodName),
          lodashFunc = lodash[retUnwrapped ? ('take' + (methodName == 'last' ? 'Right' : '')) : methodName];

      if (!lodashFunc) {
        return;
      }
      lodash.prototype[methodName] = function() {
        var args = retUnwrapped ? [1] : arguments,
            chainAll = this.__chain__,
            value = this.__wrapped__,
            isHybrid = !!this.__actions__.length,
            isLazy = value instanceof LazyWrapper,
            iteratee = args[0],
            useLazy = isLazy || isArray(value);

        if (useLazy && checkIteratee && typeof iteratee == 'function' && iteratee.length != 1) {
          // Avoid lazy use if the iteratee has a "length" value other than `1`.
          isLazy = useLazy = false;
        }
        var interceptor = function(value) {
          return (retUnwrapped && chainAll)
            ? lodashFunc(value, 1)[0]
            : lodashFunc.apply(undefined, arrayPush([value], args));
        };

        var action = { 'func': thru, 'args': [interceptor], 'thisArg': undefined },
            onlyLazy = isLazy && !isHybrid;

        if (retUnwrapped && !chainAll) {
          if (onlyLazy) {
            value = value.clone();
            value.__actions__.push(action);
            return func.call(value);
          }
          return lodashFunc.call(undefined, this.value())[0];
        }
        if (!retUnwrapped && useLazy) {
          value = onlyLazy ? value : new LazyWrapper(this);
          var result = func.apply(value, args);
          result.__actions__.push(action);
          return new LodashWrapper(result, chainAll);
        }
        return this.thru(interceptor);
      };
    });

    // Add `Array` and `String` methods to `lodash.prototype`.
    arrayEach(['join', 'pop', 'push', 'replace', 'shift', 'sort', 'splice', 'split', 'unshift'], function(methodName) {
      var func = (/^(?:replace|split)$/.test(methodName) ? stringProto : arrayProto)[methodName],
          chainName = /^(?:push|sort|unshift)$/.test(methodName) ? 'tap' : 'thru',
          retUnwrapped = /^(?:join|pop|replace|shift)$/.test(methodName);

      lodash.prototype[methodName] = function() {
        var args = arguments;
        if (retUnwrapped && !this.__chain__) {
          return func.apply(this.value(), args);
        }
        return this[chainName](function(value) {
          return func.apply(value, args);
        });
      };
    });

    // Map minified function names to their real names.
    baseForOwn(LazyWrapper.prototype, function(func, methodName) {
      var lodashFunc = lodash[methodName];
      if (lodashFunc) {
        var key = lodashFunc.name,
            names = realNames[key] || (realNames[key] = []);

        names.push({ 'name': methodName, 'func': lodashFunc });
      }
    });

    realNames[createHybridWrapper(undefined, BIND_KEY_FLAG).name] = [{ 'name': 'wrapper', 'func': undefined }];

    // Add functions to the lazy wrapper.
    LazyWrapper.prototype.clone = lazyClone;
    LazyWrapper.prototype.reverse = lazyReverse;
    LazyWrapper.prototype.value = lazyValue;

    // Add chaining functions to the `lodash` wrapper.
    lodash.prototype.chain = wrapperChain;
    lodash.prototype.commit = wrapperCommit;
    lodash.prototype.concat = wrapperConcat;
    lodash.prototype.plant = wrapperPlant;
    lodash.prototype.reverse = wrapperReverse;
    lodash.prototype.toString = wrapperToString;
    lodash.prototype.run = lodash.prototype.toJSON = lodash.prototype.valueOf = lodash.prototype.value = wrapperValue;

    // Add function aliases to the `lodash` wrapper.
    lodash.prototype.collect = lodash.prototype.map;
    lodash.prototype.head = lodash.prototype.first;
    lodash.prototype.select = lodash.prototype.filter;
    lodash.prototype.tail = lodash.prototype.rest;

    return lodash;
  }

  /*--------------------------------------------------------------------------*/

  // Export lodash.
  var _ = runInContext();

  // Some AMD build optimizers like r.js check for condition patterns like the following:
  if (typeof define == 'function' && typeof define.amd == 'object' && define.amd) {
    // Expose lodash to the global object when an AMD loader is present to avoid
    // errors in cases where lodash is loaded by a script tag and not intended
    // as an AMD module. See http://requirejs.org/docs/errors.html#mismatch for
    // more details.
    root._ = _;

    // Define as an anonymous module so, through path mapping, it can be
    // referenced as the "underscore" module.
    define(function() {
      return _;
    });
  }
  // Check for `exports` after `define` in case a build optimizer adds an `exports` object.
  else if (freeExports && freeModule) {
    // Export for Node.js or RingoJS.
    if (moduleExports) {
      (freeModule.exports = _)._ = _;
    }
    // Export for Rhino with CommonJS support.
    else {
      freeExports._ = _;
    }
  }
  else {
    // Export for a browser or Rhino.
    root._ = _;
  }
}.call(this));

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],6:[function(require,module,exports){
'use strict';

module.exports = require('./lib')

},{"./lib":11}],7:[function(require,module,exports){
'use strict';

var asap = require('asap/raw');

function noop() {}

// States:
//
// 0 - pending
// 1 - fulfilled with _value
// 2 - rejected with _value
// 3 - adopted the state of another promise, _value
//
// once the state is no longer pending (0) it is immutable

// All `_` prefixed properties will be reduced to `_{random number}`
// at build time to obfuscate them and discourage their use.
// We don't use symbols or Object.defineProperty to fully hide them
// because the performance isn't good enough.


// to avoid using try/catch inside critical functions, we
// extract them to here.
var LAST_ERROR = null;
var IS_ERROR = {};
function getThen(obj) {
  try {
    return obj.then;
  } catch (ex) {
    LAST_ERROR = ex;
    return IS_ERROR;
  }
}

function tryCallOne(fn, a) {
  try {
    return fn(a);
  } catch (ex) {
    LAST_ERROR = ex;
    return IS_ERROR;
  }
}
function tryCallTwo(fn, a, b) {
  try {
    fn(a, b);
  } catch (ex) {
    LAST_ERROR = ex;
    return IS_ERROR;
  }
}

module.exports = Promise;

function Promise(fn) {
  if (typeof this !== 'object') {
    throw new TypeError('Promises must be constructed via new');
  }
  if (typeof fn !== 'function') {
    throw new TypeError('Promise constructor\'s argument is not a function');
  }
  this._40 = 0;
  this._65 = 0;
  this._55 = null;
  this._72 = null;
  if (fn === noop) return;
  doResolve(fn, this);
}
Promise._37 = null;
Promise._87 = null;
Promise._61 = noop;

Promise.prototype.then = function(onFulfilled, onRejected) {
  if (this.constructor !== Promise) {
    return safeThen(this, onFulfilled, onRejected);
  }
  var res = new Promise(noop);
  handle(this, new Handler(onFulfilled, onRejected, res));
  return res;
};

function safeThen(self, onFulfilled, onRejected) {
  return new self.constructor(function (resolve, reject) {
    var res = new Promise(noop);
    res.then(resolve, reject);
    handle(self, new Handler(onFulfilled, onRejected, res));
  });
}
function handle(self, deferred) {
  while (self._65 === 3) {
    self = self._55;
  }
  if (Promise._37) {
    Promise._37(self);
  }
  if (self._65 === 0) {
    if (self._40 === 0) {
      self._40 = 1;
      self._72 = deferred;
      return;
    }
    if (self._40 === 1) {
      self._40 = 2;
      self._72 = [self._72, deferred];
      return;
    }
    self._72.push(deferred);
    return;
  }
  handleResolved(self, deferred);
}

function handleResolved(self, deferred) {
  asap(function() {
    var cb = self._65 === 1 ? deferred.onFulfilled : deferred.onRejected;
    if (cb === null) {
      if (self._65 === 1) {
        resolve(deferred.promise, self._55);
      } else {
        reject(deferred.promise, self._55);
      }
      return;
    }
    var ret = tryCallOne(cb, self._55);
    if (ret === IS_ERROR) {
      reject(deferred.promise, LAST_ERROR);
    } else {
      resolve(deferred.promise, ret);
    }
  });
}
function resolve(self, newValue) {
  // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure
  if (newValue === self) {
    return reject(
      self,
      new TypeError('A promise cannot be resolved with itself.')
    );
  }
  if (
    newValue &&
    (typeof newValue === 'object' || typeof newValue === 'function')
  ) {
    var then = getThen(newValue);
    if (then === IS_ERROR) {
      return reject(self, LAST_ERROR);
    }
    if (
      then === self.then &&
      newValue instanceof Promise
    ) {
      self._65 = 3;
      self._55 = newValue;
      finale(self);
      return;
    } else if (typeof then === 'function') {
      doResolve(then.bind(newValue), self);
      return;
    }
  }
  self._65 = 1;
  self._55 = newValue;
  finale(self);
}

function reject(self, newValue) {
  self._65 = 2;
  self._55 = newValue;
  if (Promise._87) {
    Promise._87(self, newValue);
  }
  finale(self);
}
function finale(self) {
  if (self._40 === 1) {
    handle(self, self._72);
    self._72 = null;
  }
  if (self._40 === 2) {
    for (var i = 0; i < self._72.length; i++) {
      handle(self, self._72[i]);
    }
    self._72 = null;
  }
}

function Handler(onFulfilled, onRejected, promise){
  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;
  this.onRejected = typeof onRejected === 'function' ? onRejected : null;
  this.promise = promise;
}

/**
 * Take a potentially misbehaving resolver function and make sure
 * onFulfilled and onRejected are only called once.
 *
 * Makes no guarantees about asynchrony.
 */
function doResolve(fn, promise) {
  var done = false;
  var res = tryCallTwo(fn, function (value) {
    if (done) return;
    done = true;
    resolve(promise, value);
  }, function (reason) {
    if (done) return;
    done = true;
    reject(promise, reason);
  });
  if (!done && res === IS_ERROR) {
    done = true;
    reject(promise, LAST_ERROR);
  }
}

},{"asap/raw":2}],8:[function(require,module,exports){
'use strict';

var Promise = require('./core.js');

module.exports = Promise;
Promise.prototype.done = function (onFulfilled, onRejected) {
  var self = arguments.length ? this.then.apply(this, arguments) : this;
  self.then(null, function (err) {
    setTimeout(function () {
      throw err;
    }, 0);
  });
};

},{"./core.js":7}],9:[function(require,module,exports){
'use strict';

//This file contains the ES6 extensions to the core Promises/A+ API

var Promise = require('./core.js');

module.exports = Promise;

/* Static Functions */

var TRUE = valuePromise(true);
var FALSE = valuePromise(false);
var NULL = valuePromise(null);
var UNDEFINED = valuePromise(undefined);
var ZERO = valuePromise(0);
var EMPTYSTRING = valuePromise('');

function valuePromise(value) {
  var p = new Promise(Promise._61);
  p._65 = 1;
  p._55 = value;
  return p;
}
Promise.resolve = function (value) {
  if (value instanceof Promise) return value;

  if (value === null) return NULL;
  if (value === undefined) return UNDEFINED;
  if (value === true) return TRUE;
  if (value === false) return FALSE;
  if (value === 0) return ZERO;
  if (value === '') return EMPTYSTRING;

  if (typeof value === 'object' || typeof value === 'function') {
    try {
      var then = value.then;
      if (typeof then === 'function') {
        return new Promise(then.bind(value));
      }
    } catch (ex) {
      return new Promise(function (resolve, reject) {
        reject(ex);
      });
    }
  }
  return valuePromise(value);
};

Promise.all = function (arr) {
  var args = Array.prototype.slice.call(arr);

  return new Promise(function (resolve, reject) {
    if (args.length === 0) return resolve([]);
    var remaining = args.length;
    function res(i, val) {
      if (val && (typeof val === 'object' || typeof val === 'function')) {
        if (val instanceof Promise && val.then === Promise.prototype.then) {
          while (val._65 === 3) {
            val = val._55;
          }
          if (val._65 === 1) return res(i, val._55);
          if (val._65 === 2) reject(val._55);
          val.then(function (val) {
            res(i, val);
          }, reject);
          return;
        } else {
          var then = val.then;
          if (typeof then === 'function') {
            var p = new Promise(then.bind(val));
            p.then(function (val) {
              res(i, val);
            }, reject);
            return;
          }
        }
      }
      args[i] = val;
      if (--remaining === 0) {
        resolve(args);
      }
    }
    for (var i = 0; i < args.length; i++) {
      res(i, args[i]);
    }
  });
};

Promise.reject = function (value) {
  return new Promise(function (resolve, reject) {
    reject(value);
  });
};

Promise.race = function (values) {
  return new Promise(function (resolve, reject) {
    values.forEach(function(value){
      Promise.resolve(value).then(resolve, reject);
    });
  });
};

/* Prototype Methods */

Promise.prototype['catch'] = function (onRejected) {
  return this.then(null, onRejected);
};

},{"./core.js":7}],10:[function(require,module,exports){
'use strict';

var Promise = require('./core.js');

module.exports = Promise;
Promise.prototype['finally'] = function (f) {
  return this.then(function (value) {
    return Promise.resolve(f()).then(function () {
      return value;
    });
  }, function (err) {
    return Promise.resolve(f()).then(function () {
      throw err;
    });
  });
};

},{"./core.js":7}],11:[function(require,module,exports){
'use strict';

module.exports = require('./core.js');
require('./done.js');
require('./finally.js');
require('./es6-extensions.js');
require('./node-extensions.js');
require('./synchronous.js');

},{"./core.js":7,"./done.js":8,"./es6-extensions.js":9,"./finally.js":10,"./node-extensions.js":12,"./synchronous.js":13}],12:[function(require,module,exports){
'use strict';

// This file contains then/promise specific extensions that are only useful
// for node.js interop

var Promise = require('./core.js');
var asap = require('asap');

module.exports = Promise;

/* Static Functions */

Promise.denodeify = function (fn, argumentCount) {
  if (
    typeof argumentCount === 'number' && argumentCount !== Infinity
  ) {
    return denodeifyWithCount(fn, argumentCount);
  } else {
    return denodeifyWithoutCount(fn);
  }
};

var callbackFn = (
  'function (err, res) {' +
  'if (err) { rj(err); } else { rs(res); }' +
  '}'
);
function denodeifyWithCount(fn, argumentCount) {
  var args = [];
  for (var i = 0; i < argumentCount; i++) {
    args.push('a' + i);
  }
  var body = [
    'return function (' + args.join(',') + ') {',
    'var self = this;',
    'return new Promise(function (rs, rj) {',
    'var res = fn.call(',
    ['self'].concat(args).concat([callbackFn]).join(','),
    ');',
    'if (res &&',
    '(typeof res === "object" || typeof res === "function") &&',
    'typeof res.then === "function"',
    ') {rs(res);}',
    '});',
    '};'
  ].join('');
  return Function(['Promise', 'fn'], body)(Promise, fn);
}
function denodeifyWithoutCount(fn) {
  var fnLength = Math.max(fn.length - 1, 3);
  var args = [];
  for (var i = 0; i < fnLength; i++) {
    args.push('a' + i);
  }
  var body = [
    'return function (' + args.join(',') + ') {',
    'var self = this;',
    'var args;',
    'var argLength = arguments.length;',
    'if (arguments.length > ' + fnLength + ') {',
    'args = new Array(arguments.length + 1);',
    'for (var i = 0; i < arguments.length; i++) {',
    'args[i] = arguments[i];',
    '}',
    '}',
    'return new Promise(function (rs, rj) {',
    'var cb = ' + callbackFn + ';',
    'var res;',
    'switch (argLength) {',
    args.concat(['extra']).map(function (_, index) {
      return (
        'case ' + (index) + ':' +
        'res = fn.call(' + ['self'].concat(args.slice(0, index)).concat('cb').join(',') + ');' +
        'break;'
      );
    }).join(''),
    'default:',
    'args[argLength] = cb;',
    'res = fn.apply(self, args);',
    '}',
    
    'if (res &&',
    '(typeof res === "object" || typeof res === "function") &&',
    'typeof res.then === "function"',
    ') {rs(res);}',
    '});',
    '};'
  ].join('');

  return Function(
    ['Promise', 'fn'],
    body
  )(Promise, fn);
}

Promise.nodeify = function (fn) {
  return function () {
    var args = Array.prototype.slice.call(arguments);
    var callback =
      typeof args[args.length - 1] === 'function' ? args.pop() : null;
    var ctx = this;
    try {
      return fn.apply(this, arguments).nodeify(callback, ctx);
    } catch (ex) {
      if (callback === null || typeof callback == 'undefined') {
        return new Promise(function (resolve, reject) {
          reject(ex);
        });
      } else {
        asap(function () {
          callback.call(ctx, ex);
        })
      }
    }
  }
};

Promise.prototype.nodeify = function (callback, ctx) {
  if (typeof callback != 'function') return this;

  this.then(function (value) {
    asap(function () {
      callback.call(ctx, null, value);
    });
  }, function (err) {
    asap(function () {
      callback.call(ctx, err);
    });
  });
};

},{"./core.js":7,"asap":1}],13:[function(require,module,exports){
'use strict';

var Promise = require('./core.js');

module.exports = Promise;
Promise.enableSynchronous = function () {
  Promise.prototype.isPending = function() {
    return this.getState() == 0;
  };

  Promise.prototype.isFulfilled = function() {
    return this.getState() == 1;
  };

  Promise.prototype.isRejected = function() {
    return this.getState() == 2;
  };

  Promise.prototype.getValue = function () {
    if (this._65 === 3) {
      return this._55.getValue();
    }

    if (!this.isFulfilled()) {
      throw new Error('Cannot get a value of an unfulfilled promise.');
    }

    return this._55;
  };

  Promise.prototype.getReason = function () {
    if (this._65 === 3) {
      return this._55.getReason();
    }

    if (!this.isRejected()) {
      throw new Error('Cannot get a rejection reason of a non-rejected promise.');
    }

    return this._55;
  };

  Promise.prototype.getState = function () {
    if (this._65 === 3) {
      return this._55.getState();
    }
    if (this._65 === -1 || this._65 === -2) {
      return 0;
    }

    return this._65;
  };
};

Promise.disableSynchronous = function() {
  Promise.prototype.isPending = undefined;
  Promise.prototype.isFulfilled = undefined;
  Promise.prototype.isRejected = undefined;
  Promise.prototype.getValue = undefined;
  Promise.prototype.getReason = undefined;
  Promise.prototype.getState = undefined;
};

},{"./core.js":7}],14:[function(require,module,exports){
'use strict';

var dialog = require('./dialog');

var $cache = {};

function initializeCache() {
    $cache.primary = $('#primary');
    $cache.checkoutForm = $cache.primary.find('.checkout-shipping.address').length > 0 ? $cache.primary.find('.checkout-shipping.address') : $cache.primary.find('.checkout-billing.address');
    $cache.submitFormButton = $cache.checkoutForm.find('button.saveShipping').length > 0 ? $cache.checkoutForm.find('button.saveShipping') : $cache.checkoutForm.find('button[name$=_save]');
    $cache.validatoionDialog = $cache.primary.find('#address-validation-dialog');
    $cache.byPassDAV = $cache.checkoutForm.find('.bypassDAV');
    $cache.address1 = $cache.checkoutForm.find('input[name$="_address1"]');
    $cache.address2 = $cache.checkoutForm.find('input[name$="_address2"]');
    $cache.city = $cache.checkoutForm.find('input[name$="_city"]');
    $cache.stateCode = $cache.checkoutForm.find('select[id$="_state"]');
    $cache.countryCode = $cache.checkoutForm.find('select[id$="_country"]');
    $cache.postalCode = $cache.checkoutForm.find('input[name$="_postal"]');
}

function initializeDom() {
    if ($cache.validatoionDialog.length > 0) {

        var dlg = dialog.create({
            target: $cache.validatoionDialog,
            options: {
                width: 300,
                dialogClass: 'address-validation-dialog',
                open: initializeEvents
            }
        });

        $cache.validatoionDialog.show();
        dlg.dialog('open');
    }
}

function initializeEvents() {

    $cache.validatoionDialog.on('click', '#original-address-edit', function () {
        $cache.validatoionDialog.dialog('close');
        $('.shipping-address-field-section').removeClass('hide');
        $('.selected-shipping-address').addClass('hide');
        $('.new-address-field').addClass('hide');

        /*jQuery('html, body').animate({
            scrollTop: $('#navigation').position().top
        }, 500);*/
    });
    $cache.validatoionDialog.on('click', '#suggested-address-edit-1', function () {

        $('.shipping-address-field-section').removeClass('hide');
        $('.selected-shipping-address').addClass('hide');
    });

    $cache.validatoionDialog.on('click', '#ship-to-original-address', function () {

        $cache.validatoionDialog.dialog('close');
        $cache.byPassDAV.attr('value', 'true');
        $cache.submitFormButton.click();
    });

    $cache.validatoionDialog.on('click', '[id|="suggested-address-edit"]', function () {
        var selectedAddress = $(this).data('address').split('||');
        $cache.address1.val(selectedAddress[0]);
        if (selectedAddress[1] !== 'undefined' && selectedAddress[1] !== '') {
            $cache.address2.val(selectedAddress[1]);
        }
        $cache.city.val(selectedAddress[2]);
        $cache.stateCode.val(selectedAddress[3]);
        $cache.countryCode.val(selectedAddress[4]);
        $cache.postalCode.val(selectedAddress[5]);
        $cache.validatoionDialog.dialog('close');
        jQuery('html, body').animate({
            scrollTop: $('#navigation').position().top
        }, 500);
    });

    $cache.validatoionDialog.on('click', '[id|="ship-to-address-selected"]', function () {
        var selectedAddress = $(this).data('address').split('||');
        $cache.address1.val(selectedAddress[0]);
        if (selectedAddress[1] !== 'undefined' && selectedAddress[1] !== '') {
            $cache.address2.val(selectedAddress[1]);
        }
        $cache.city.val(selectedAddress[2]);
        $cache.stateCode.val(selectedAddress[3]);
        $cache.countryCode.val(selectedAddress[4]);
        $cache.postalCode.val(selectedAddress[5]);
        $cache.byPassDAV.attr('value', 'true');
        $cache.validatoionDialog.dialog('close');

        $cache.submitFormButton.click();
    });
}

exports.init = function () {
    initializeCache();
    initializeDom();
};

},{"./dialog":23}],15:[function(require,module,exports){
'use strict';

var progress = require('./progress'),
    util = require('./util');

var currentRequests = [];

/**
 * @function
 * @description Ajax request to get json response
 * @param {Boolean} async  Asynchronous or not
 * @param {String} url URI for the request
 * @param {Object} data Name/Value pair data request
 * @param {Function} callback  Callback function to be called
 */
var getJson = function getJson(options) {
    options.url = util.toAbsoluteUrl(options.url);
    // return if no url exists or url matches a current request
    if (!options.url || currentRequests[options.url]) {
        return;
    }

    currentRequests[options.url] = true;

    // make the server call
    $.ajax({
        dataType: 'json',
        url: options.url,
        async: typeof options.async === 'undefined' || options.async === null ? true : options.async,
        data: options.data || {},
        type: options.type || 'GET' //PREVAIL-Added to handle security form issues.
    })
    // success
    .done(function (response) {
        if (options.callback) {
            options.callback(response);
        }
    })
    // failed
    .fail(function (xhr, textStatus) {
        if (textStatus === 'parsererror') {
            window.alert(Resources.BAD_RESPONSE);
        }
        if (options.callback) {
            options.callback(null);
        }
    })
    // executed on success or fail
    .always(function () {
        // remove current request from hash
        if (currentRequests[options.url]) {
            delete currentRequests[options.url];
        }
    });
};
/**
 * @function
 * @description ajax request to load html response in a given container
 * @param {String} url URI for the request
 * @param {Object} data Name/Value pair data request
 * @param {Function} callback  Callback function to be called
 * @param {Object} target Selector or element that will receive content
 */
var load = function load(options) {
    options.url = util.toAbsoluteUrl(options.url);
    // return if no url exists or url matches a current request
    if (!options.url || currentRequests[options.url]) {
        return;
    }

    currentRequests[options.url] = true;

    // make the server call
    $.ajax({
        dataType: 'html',
        url: util.appendParamToURL(options.url, 'format', 'ajax'),
        data: options.data,
        xhrFields: {
            withCredentials: true
        },
        type: options.type || 'GET' //PREVAIL-Added to handle security form issues.
    }).done(function (response) {
        // success
        if (options.target) {
            $(options.target).empty().html(response);
        }
        if (options.callback) {
            options.callback(response);
        }
    }).fail(function (xhr, textStatus) {
        // failed
        if (textStatus === 'parsererror') {
            window.alert(Resources.BAD_RESPONSE);
        }
        options.callback(null, textStatus);
    }).always(function () {
        progress.hide();
        // remove current request from hash
        if (currentRequests[options.url]) {
            delete currentRequests[options.url];
        }
    });
};

exports.getJson = getJson;
exports.load = load;

},{"./progress":52,"./util":63}],16:[function(require,module,exports){
/**
 *    (c) 2009-2014 Demandware Inc.
 *    Subject to standard usage terms and conditions
 *    For all details and documentation:
 *    https://bitbucket.com/demandware/sitegenesis
 */
'use strict';

var countries = require('./countries'),
    dialog = require('./dialog'),
    minicart = require('./minicart'),
    page = require('./page'),
    searchplaceholder = require('./searchplaceholder'),
    searchsuggest = require('./searchsuggest'),
    tooltip = require('./tooltip'),
    util = require('./util'),
    validator = require('./validator'),
    megamenu = require('./megamenu'),
    headerinit = require('./headerinit'),
    uievents = require('./uievents'),

//progress = require('./progress'),
tls = require('./tls'),
    tagmanager = require('./tagmanager'),
    quickviewAsset = require('./quickview-asset');

// if jQuery has not been loaded, load from google cdn
if (!window.jQuery) {
    var s = document.createElement('script');
    s.setAttribute('src', 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js');
    s.setAttribute('type', 'text/javascript');
    document.getElementsByTagName('head')[0].appendChild(s);
}

require('./jquery-ext')();
require('./cookieprivacy')();
require('./captcha')();

var $ = window.jQuery;

function resetPasswordEvents() {
    $('body').find('.PasswordResetDialog .field-wrapper input').off('change').on('click change', function () {
        $(this).removeClass('errorclient');
        $(this).closest('.passwordreset').find('#message').hide();
        $(this).closest('.formfield').find('.label').find('span.errorclient').remove();
        $(this).closest('.formfield').find('.form-row , .label span').removeClass('inputlabel');
    });
    if ($('.PasswordResetDialog').length > 0) {
        $('.PasswordResetDialog').find('.formfield').each(function () {
            if ($(this).find('.field-wrapper .clearbutton').length == 0 && $(this).find('.field-wrapper input[type="text"]').length > 0 || $(this).find('.field-wrapper input[type="password"]').length > 0) {
                $(this).find('.field-wrapper').append('<a class="clearbutton"></a>');
            }
        });
    }
    $('body').find('.PasswordResetDialog a.clearbutton').on('click', function () {
        $(this).closest('.field-wrapper').find('span').remove();
        $(this).closest('.field-wrapper').find('.required').removeClass('errorclient');
        $(this).closest('.formfield ').find('.form-row , .label span').removeClass('inputlabel');
        $(this).closest('.formfield').find('input').val('');
        $(this).closest('.formfield').find('a.clearbutton').hide();
        $(this).closest('.formfield').find('span.logerror , .existing_register').hide();
    });
    // Attach keypress handler to input box.  Submit form if user presses 'enter' key.
    $('body').find('.PasswordResetDialog input.resetold').keypress(function (e) {
        if (e.which == 13) {
            //jQuery('#sendBtn').click();
            return false;
        }
        return true;
    });
    $('body').find('.PasswordResetDialog .field-wrapper input').on('keyup input blur', function () {
        if ($(this).val() != undefined) {
            if ($(this).val().length > 0) {
                $(this).closest('.formfield').find('a.clearbutton').show();
            } else {
                $(this).closest('.formfield').find('a.clearbutton').hide();
            }
        }
    });
    var $requestPasswordForm = $('[name$="_requestpassword"]'),
        $submit = $requestPasswordForm.find('[name$="_requestpassword_send"]');
    $($submit).on('click', function (e) {
        if (!$requestPasswordForm.valid()) {
            return;
        }
        e.preventDefault();
        dialog.submit($submit.attr('name'));
        setTimeout(function () {
            resetPasswordEvents();
        }, 1300);
    });
    validator.init();
}

function initializeEvents() {
    var isSafari = navigator.userAgent.indexOf('Safari') > -1;
    var isChrome = navigator.userAgent.indexOf('Chrome') > -1;
    var isExplorer = navigator.userAgent.indexOf('MSIE') > -1;
    var isFirefox = navigator.userAgent.indexOf('Firefox') > -1;
    //var is_safari = navigator.userAgent.indexOf('Safari') > -1;
    var isOpera = navigator.userAgent.toLowerCase().indexOf('op') > -1;
    if (isChrome && isSafari) {
        isSafari = false;
    }
    if (isChrome && isOpera) {
        isChrome = false;
    }
    if (isSafari) {
        $('body').addClass('safari-browser');
    } else if (isFirefox) {
        $('body').addClass('firefox-browser');
    } else if (isExplorer) {
        $('body').addClass('ie-browser');
    } else if (isChrome) {
        $('body').addClass('chrome-browser');
    }
    if (navigator.userAgent.indexOf('Mac OS X') != -1) {
        $('body').addClass('mac');
    } else {
        $('body').addClass('pc');
    }
    var controlKeys = ['8', '13', '46', '45', '36', '35', '38', '37', '40', '39'];

    //PREVAIL-Added to handle form dialog boxes server side issues.
    $('body').on('click', '.dialogify, [data-dlg-options], [data-dlg-action]', require('./dialogify').setDialogify).on('keydown', 'textarea[data-character-limit]', function (e) {
        var text = $.trim($(this).val()),
            charsLimit = $(this).data('character-limit'),
            charsUsed = text.length;

        if (charsUsed >= charsLimit && controlKeys.indexOf(e.which.toString()) < 0) {
            e.preventDefault();
        }
    }).on('change keyup mouseup', 'textarea[data-character-limit]', function () {
        var text = $.trim($(this).val()),
            charsLimit = $(this).data('character-limit'),
            charsUsed = text.length,
            charsRemain = charsLimit - charsUsed;

        if (charsRemain < 0) {
            $(this).val(text.slice(0, charsRemain));
            charsRemain = 0;
        }

        $(this).next('div.char-count').find('.char-remain-count').html(charsRemain);
    });

    /**
     * initialize search suggestions, pending the value of the site preference(enhancedSearchSuggestions)
     * this will either init the legacy(false) or the beta versions(true) of the the search suggest feature.
     * */

    /*** minicart hide ***/
    var minicartlink = $('#headerwrapper #header .row.column1 #minicart .minicarttotal .minicarticon-cont .minicart-button');
    minicartlink.on('click', function () {
        if ($(window).width() < 959) {
            $('#minicart .minicartcontent').hide();
        }
    });

    var $searchContainer = $('.site-suggestion-section');
    searchsuggest.init($searchContainer, Resources.SIMPLE_SEARCH);

    $('#password-reset').on('click', function (e) {
        e.preventDefault();
        dialog.open({
            url: $(e.target).attr('href'),
            options: {
                //Start JIRA PREV-334 : Title is missing for the Forgot password overlay.
                title: Resources.FORGOT_PASSWORD,
                width: 475,
                dialogClass: 'PasswordResetDialog',
                open: function open() {
                    resetPasswordEvents();
                }
            }
        });
    });

    // print handler
    $('.print-page').on('click', function () {
        window.print();
        return false;
    });

    $('.mobile-banner-stuff').on('click', function (e) {
        e.preventDefault();
        if ($('.calloutexist').length > 0) {
            var promoCallOut = $('.calloutexist').html();
            var bannerDialogOpen = dialog.create({
                target: '#calloutexist',
                options: {
                    dialogClass: 'dialogBanner'
                }
            });
            util.scrollBrowser($('html').offset().top);
            bannerDialogOpen.html(promoCallOut);
            $('.ui-dialog-content:visible').each(function () {
                $(this).dialog('option', 'position', $(this).dialog('option', 'position'));
            });
            bannerDialogOpen.dialog('open');
        }
    });
    $(document).on('click', '.dialogBanner #closeBtn01', function (e) {
        e.preventDefault();
        $(this).parents('.dialogBanner').find('.ui-dialog-titlebar-close').trigger('click');
    });
    //footer change region event
    $('.change-region-footer').hover(function () {
        $('.domainswitch').show();
    }, function () {
        $('.domainswitch').hide();
    });
    $('.domainswitch').hover(function () {
        $(this).show();
    }, function () {
        $(this).hide();
    });
    $('div.pseudo_self_label').each(function () {
        var $this = jQuery(this);
        var $input = $this.children('input[type="text"]');
        $input.data('toggle', $input.val());
        //used to add a class to placeholder for styling
        if ($('.emailinput.emailfooter').attr('data-placeholder') == $input.val()) {
            $('.emailinput.emailfooter').addClass('footerplace');
        }
        /**
         * if(jQuery.trim($input.val()) != "") {
             * $input.data('toggle').hide(); } else
         *if($input.data('toggle') &&
         * $input.data('toggle').size() >= 1) {
             * $input.val($input.data('toggle')); }
         */
        $input.blur(function () {
            var $this = jQuery(this);
            if (jQuery.trim($this.val()) == '') {
                // $this.data('toggle').show();
                $this.val($this.data('toggle'));
                //used to add a class to placeholder for styling
                if ($('.emailinput.emailfooter').attr('data-placeholder') == $input.val()) {
                    $('.emailinput.emailfooter').addClass('footerplace');
                }
            }
        });
        $input.focus(function () {
            $('.emailinput.emailfooter').removeClass('footerplace');
            var $this = jQuery(this);
            if ($this.data('toggle') && jQuery.trim($this.val()) == jQuery.trim($this.data('toggle'))) {
                // $this.data('toggle').show();
                $this.val('');
            }
        });
        $this.parents('form').submit(function () {
            var $this = jQuery(this);
            $this.find('div.pseudo_self_label input').each(function () {
                var $this = jQuery(this);
                if ($this.data('toggle') && $this.data('toggle') == $this.val()) {
                    $this.val('');
                }
            });
        });
    });

    //
    $('body').on('submit', '#customercontactus', function (e) {
        e.preventDefault();
        var res = $('#g-recaptcha-response').val();
        if (res == '' || res == undefined || res.length == 0) {
            $('.recaprcha-error').removeClass('hide');
            return false;
        }
        var $form = $(this);
        if ($form.valid()) {
            // set the action
            $('<input/>').attr({
                name: $form.attr('action'),
                type: 'hidden'
            }).appendTo($form);
            // serialize the form and get the post url
            var data = $form.serialize();
            var url = $form.attr('action');
            // make sure the server knows this is an ajax request
            if (data.indexOf('ajax') === -1) {
                data += '&format=ajax';
            }

            $.ajax({
                url: url,
                type: 'POST',
                dataType: 'html',
                data: data
            }).done(function (response) {
                if (navigator.userAgent.match(/(\(iPod|\(iPhone|\(iPad)/)) {
                    window.setTimeout(function () {
                        window.scrollTo(0, 0);
                    }, 0);
                }
                $('.column.colspan2').empty().html(response);
            });
        }
    });

    $('.first-level').on('click', function () {
        $(this).children('.second-level').toggle();
        $(this).toggleClass('list-active');
    });
    $('.first-level li.active').closest('.first-level').click();
    $('.first-level li a').click(function (event) {
        event.stopPropagation();
    });
    $('.first-levell').on('click', function () {
        $(this).children('.second-levell').toggle();
        //$(this).toggleClass('list-active');
    });
    $(window).load(function () {
        var currentItem = null;
        if ($('.newMargin').length > 0) {
            currentItem = $('.newMargin');
            currentItem.parents('.cell-header').addClass('new-margin-update');
        }
        if ($('.newMargin-one').length > 0) {
            currentItem = $('.newMargin-one');
            currentItem.parents('.cell-header').addClass('new-margin-updateone');
        }
        if ($('.vmc-manufacturer-margin').length > 0) {
            currentItem = $('.vmc-manufacturer-margin');
            currentItem.parents('.cell-header').addClass('manufacture-margin-update');
        }
        if ($('.strikemaster-paragraph').length > 0) {
            currentItem = $('.strikemaster-paragraph');
            currentItem.parents('.cell-header').addClass('strikemaster-margin-update');
        }
        var spancountleftnav = $('.pt_customerservice .customer .column .contentbox .left-nav-top .contentboxcontent .nav-group li span');
        spancountleftnav.each(function () {
            if ($(this).height() > 19) {
                $(this).addClass('newone');
            } else {
                $(this).removeClass('newone');
            }
        });
        spancountleftnav = $('.pt_customerservice .style-cservice .column .contentbox .left-nav-top .contentboxcontent .nav-group li span');
        spancountleftnav.each(function () {
            if ($(this).height() > 19) {
                $(this).addClass('newone');
            } else {
                $(this).removeClass('newone');
            }
        });
        if ($('.shadow-box').length > 0) {
            currentItem = $('.shadow-box');
            currentItem.parents('.pt_customerservice').addClass('pt_customerservice-box');
        }
        if ($('.zero-margin').length > 0) {
            currentItem = $('.zero-margin');
            currentItem.parents('.cell-header').addClass('zero-margin-cell-header');
        }
        if ($('.checkoutloginsignin').find('.TokenExpired').length > 0) {
            $('#password-reset').trigger('click');
            setTimeout(function () {
                $('#dialog-container').find('p').hide();
                if ($('#dialog-container #PasswordResetForm').length > 0) {
                    $('#dialog-container #PasswordResetForm').prepend('<div class="TokenExpireError">We&#39;re sorry, the link to reset your password has expired. Reset Password links expire after 30 minutes for security purposes. Please submit your email again.</div>');
                    $('#dialog-container #PasswordResetForm .passwordemail').prepend('<div class="Emaillabel">Enter your email address to get reset password instructions sent to your inbox.</div>');
                }
            }, 2000);
        }
    });
    $(window).resize(function () {
        if ($(window).width() > 960) {
            if ($('#container').hasClass('js-container-active')) {
                $('#container, .open-menu-wrap').removeAttr('style');
                $('#container').removeClass('js-container-active').find('.menu-toggle').removeClass('js-menu-toggle');
                $('#main, #footernew').unwrap();
                $('#brand-tabs-header').unwrap();
            }
            //megamenu.init();
        }
    });
    // add generic toggle functionality
    $('.toggle').next('.toggle-content').hide();
    if ($('.pt_checkout').length == 0) {
        if ($('.pt_customerservice').length == 0) {
            $('.toggle').off('click').on('click', function (e) {
                e.preventDefault(); //JIRA PREV-90 : When click on advance search from gift registry login page, focus is happening towards top of the page.
                $(this).toggleClass('expanded').next('ul, .toggle-content').toggle();
            });
        }
    }
    // toggle for customer service FAQ
    if ($('.pt_customerservice').length > 0) {
        $('.section a.toggle').off('click').on('click', function (e) {
            e.preventDefault();
            $(this).parent().next('.reveal').slideToggle('fast', function () {});
            return false;
        });
    }

    $('#footernew .footer-main #linkheading').click(function () {
        $(this).toggleClass('show');
        $(this).closest('div').toggleClass('expanded');
        if ($('#about, #customer-service, #More-ways-to-shop').hasClass('expanded')) {
            $('#rapala_insider').addClass('new');
        } else {
            $('#rapala_insider').removeClass('new');
        }
        if ($('#busniness').hasClass('expanded')) {
            $('#follow_us').addClass('new');
        } else {
            $('#follow_us').removeClass('new');
        }
    });

    function isTouchDevice() {
        return true == ('ontouchstart' in window || window.DocumentTouch && document instanceof DocumentTouch);
    }

    if (isTouchDevice() === true) {
        //alert('Touch Device'); //your logic for touch device here
        $('.old-swim').removeClass('show').addClass('hide');
        $('.new-swim').removeClass('hide').addClass('show');
    } else {
        //alert('Not a Touch Device');//your logic for non touch device here
        $('.old-swim').removeClass('hide').addClass('show');
        $('.new-swim').removeClass('show').addClass('hide');
    }
    $(window).bind('scroll resize', function () {
        if ($('.rapala_device').length > 0 && $(window).width() < 768) {
            if ($('#footerEmailDialog.ui-dialog-content').length > 0) {
                $('.ui-dialog').css({ 'left': ($(document).width() - $('.ui-dialog').width()) / 2, 'top': '100px' });
            } else {
                $('.ui-dialog').css({ 'left': ($(document).width() - $('.ui-dialog').width()) / 2 });
            }
        }
    });

    $('.tabsHeader').bind('click', function () {
        var currentItem = $(this);
        currentItem.closest('.mobile-tabs-section').toggleClass('active');
    });

    $(document).on('click', '.upgradenow-link', function () {
        $('html, body').animate({
            scrollTop: $('.viploginsignin').offset().top
        }, 2000);
    });
    $('.menu-category li .menu-item-toggle').on('click', function (e) {
        e.preventDefault();
        var $parentLi = $(e.target).closest('li');
        $parentLi.siblings('li').removeClass('active').find('.menu-item-toggle').removeClass('fa-chevron-up active').addClass('fa-chevron-right');
        $parentLi.toggleClass('active');
        $(e.target).toggleClass('fa-chevron-right fa-chevron-up active');
    });

    $('body').on('click', '.dialog-close', function () {
        $(this).closest('.ui-dialog').find('.ui-dialog-titlebar-close').trigger('click');
    });
    if ($(window).width() > 959) {
        var item = $('.sign-up-blk'),
            clickItem = item.find('.userlogin');

        clickItem.on('click', function () {
            return false;
        });
    }

    $('.email-subscribe').submit(function (e) {
        e.preventDefault();
        var $form = $(this);
        if ($form.valid()) {
            // set the action
            $('<input/>').attr({
                name: $form.attr('action'),
                type: 'hidden'
            }).appendTo($form);
            // serialize the form and get the post url
            var data = $form.serialize();
            var url = $form.attr('action');
            // make sure the server knows this is an ajax request
            if (data.indexOf('ajax') === -1) {
                data += '&format=ajax';
            }

            dialog.open({
                url: url,
                data: data,
                options: {
                    title: 'email',
                    width: 800,
                    height: 530,
                    dialogClass: 'footerEmailDialog'
                },
                open: function open() {}
            });
        }
    });
}

/**
 * @private
 * @function
 * @description Adds class ('js') to html for css targeting and loads js specific styles.
 */
function initializeDom() {
    // add class to html for css targeting
    $('html').addClass('js');
    if (SitePreferences.LISTING_INFINITE_SCROLL) {
        $('html').addClass('infinite-scroll');
    }
    // load js specific styles//
    util.limitCharacters();
}

var pages = {
    account: require('./pages/account'),
    cart: require('./pages/cart'),
    checkout: require('./pages/checkout'),
    compare: require('./pages/compare'),
    product: require('./pages/product'),
    registry: require('./pages/registry'),
    search: require('./pages/search'),
    storefront: require('./pages/storefront'),
    wishlist: require('./pages/wishlist'),
    rapalainsider: require('./pages/rapalainsider'),
    storelocator: require('./pages/storelocator'),
    international: require('./pages/international'),
    blog: require('./pages/blog')
};

var app = {
    init: function init() {
        if (typeof geoipCountryCode == 'function') {
            var IPGeoCode = geoipCountryCode();
            var allowedCountries = $('.allowed-countries').text();
            if (allowedCountries == null || allowedCountries == 'null' || allowedCountries == 'undefined') {
                allowedCountries = 'US';
            }
            if (allowedCountries.indexOf(IPGeoCode) == -1) {
                $('html').addClass('no-pricing');
                $('.non-usa-alert').removeClass('hide');
                $('.ui-customer,.dividers.pipe,.ui-email,.ui-storelocator,.ui-wishlist,.ui-login,.handle-non-us,.welcomemessage,.anonymous,.site-suggestion-section').addClass('hide');
                $('.minicart, .promotional-message, .product-colors-size').css({ 'display': 'none' });
                $('#customer-returns,#customer-shipping,#customer-warranty').addClass('hide');
                $('.addtowishlist').addClass('hide');
                $('.non-us-contactus geo,.us-contactus').addClass('hide');
                $('.non-us-contactus-non').removeClass('hide');
                $('.desktopHide.handle-non-us.geo').removeClass('desktopHide');
                $('.mobileHide.handle-non-us.geo').removeClass('mobileHide');
                var contactusNonusUrl = Urls.contactusnonus;
                $('.handle-non-us.geo').addClass('hide');
                $('.ca-contactus-link').attr('href', contactusNonusUrl);
                $('.cust-non-us').find('a').attr('href', contactusNonusUrl);
                $('.ui-login,.magnifier-icon').css({ 'background': 'none' });
                $('.handle-non-us-vh').addClass('vhide');
                $('.subscribe').prop('disabled', true);
                setTimeout(function () {
                    $('.product-promo, .newrecommendation').css({ 'display': 'none' });
                }, 5000);
            }
        }

        // Check TLS status if indicated by site preference
        var checkTLS = SitePreferences.CHECK_TLS;
        if (checkTLS == true) {
            var tlsBroswer = tls.getUserAgent();
            if (tlsBroswer.name == 'Chrome' && tlsBroswer.version < 22 || tlsBroswer.name == 'Firefox' && tlsBroswer.version < 27 || tlsBroswer.name == 'Safari' && tlsBroswer.version < 5 || tlsBroswer.name == 'MSIE' && tlsBroswer.version < 11) {
                if (tlsBroswer.name == 'MSIE') {
                    tlsBroswer.name = 'Internet Explorer';
                }
                $('.browser-compatibility-alert').removeClass('hide');
                $('.browser-compatibility-alert p').find('.browser_version').text(' ' + tlsBroswer.name + ' ' + tlsBroswer.version + '.');
            }
        }
        initializeDom();
        // init specific global components
        countries.init();
        tooltip.init();
        minicart.init();
        validator.init();
        uievents.init();
        megamenu.init();
        headerinit.init();
        searchplaceholder.init();
        if (SitePreferences.GTM_ENABLED) {
            tagmanager.init(window.pageContext.ns);
        }
        quickviewAsset.init();

        // execute page specific initializations
        $.extend(page, window.pageContext);
        var ns = page.ns;
        if (ns && pages[ns] && pages[ns].init) {
            pages[ns].init();
        }
        initializeEvents();
        require('./browsera').init();
    }
};

// general extension functions
(function () {
    String.format = function () {
        var s = arguments[0];
        var i,
            len = arguments.length - 1;
        for (i = 0; i < len; i++) {
            var reg = new RegExp('\\{' + i + '\\}', 'gm');
            s = s.replace(reg, arguments[i + 1]);
        }
        return s;
    };
})();

jQuery(function () {
    jQuery('.accordion').hover(function () {
        var $this = jQuery(this);
        if ($this.hasClass('highlight')) {
            $this.addClass('contentbox');
        } else {
            $this.removeClass('contentbox').addClass('tabover');
        }
    }, function () {
        jQuery(this).removeClass('tabover').addClass('contentbox');
    }).click(function () {
        var $this = jQuery(this);
        if ($this.find('.expandcontent').length > 0) {
            $this.find('h1').toggleClass('downarrow').next().toggle('fast');
            $this.toggleClass('highlight').toggleClass('tabover').toggleClass('contentbox');
        } else {
            window.location.href = $this.find('a').attr('href');
        }
    });
});

// initialize app
$(document).ready(function () {
    app.init();
});

},{"./browsera":18,"./captcha":19,"./cookieprivacy":21,"./countries":22,"./dialog":23,"./dialogify":24,"./headerinit":26,"./jquery-ext":27,"./megamenu":28,"./minicart":29,"./page":30,"./pages/account":31,"./pages/blog":32,"./pages/cart":33,"./pages/checkout":37,"./pages/compare":40,"./pages/international":41,"./pages/product":43,"./pages/rapalainsider":45,"./pages/registry":46,"./pages/search":47,"./pages/storefront":48,"./pages/storelocator":49,"./pages/wishlist":50,"./quickview-asset":53,"./searchplaceholder":55,"./searchsuggest":56,"./tagmanager":59,"./tls":60,"./tooltip":61,"./uievents":62,"./util":63,"./validator":64}],17:[function(require,module,exports){
'use strict';

var dialog = require('./dialog'),
    page = require('./page'),
    util = require('./util');

var selectedList = [];
var maxItems = 1;
var bliUUID = '';

/**
 * @private
 * @function
 * description Gets a list of bonus products related to a promoted product
 */
function getBonusProducts() {
    var bonusproducts = [];

    var i, len;
    for (i = 0, len = selectedList.length; i < len; i++) {
        var p = {
            pid: selectedList[i].pid,
            qty: selectedList[i].qty,
            options: {}
        };
        var a,
            alen,
            bp = selectedList[i];
        if (bp.options) {
            for (a = 0, alen = bp.options.length; a < alen; a++) {
                var opt = bp.options[a];
                p.options = { optionName: opt.name, optionValue: opt.value };
            }
        }
        bonusproducts.push({ product: p });
    }
    return { bonusproducts: bonusproducts };
}

var selectedItemTemplate = function selectedItemTemplate(data) {
    var attributes = '';
    for (var attrID in data.attributes) {
        var attr = data.attributes[attrID];
        attributes += '<li data-attribute-id="' + attrID + '">\n';
        attributes += '<span class="display-name">' + attr.displayName + '</span>: ';
        attributes += '<span class="display-value">' + attr.displayValue + '</span>\n';
        attributes += '</li>';
    }
    attributes += '<li class="item-qty">\n';
    attributes += '<span class="display-name">Qty</span>: ';
    attributes += '<span class="display-value">' + data.qty + '</span>';
    return ['<li class="selected-bonus-item" data-uuid="' + data.uuid + '" data-pid="' + data.pid + '">', '<i class="remove-link fa fa-remove" title="Remove this product" href="#"></i>', '<div class="item-name">' + data.name + '</div>', '<ul class="item-attributes">', attributes, '<ul>', '<li>'].join('\n');
};

// hide swatches that are not selected or not part of a Product Variation Group
var hideSwatches = function hideSwatches() {
    $('.bonus-product-item:not([data-producttype="master"]) .swatches li').not('.selected').not('.variation-group-value').hide();
    // prevent unselecting the selected variant
    $('.bonus-product-item .swatches .selected').on('click', function () {
        return false;
    });
};

/**
 * @private
 * @function
 * @description Updates the summary page with the selected bonus product
 */
function updateSummary() {
    var $bonusProductList = $('#bonus-product-list');
    if (!selectedList.length) {
        $bonusProductList.find('li.selected-bonus-item').remove();
    } else {
        var ulList = $bonusProductList.find('ul.selected-bonus-items').first();
        var i, len;
        for (i = 0, len = selectedList.length; i < len; i++) {
            var item = selectedList[i];
            var li = selectedItemTemplate(item);
            $(li).appendTo(ulList);
        }
    }

    // get remaining item count
    var remain = maxItems - selectedList.length;
    $bonusProductList.find('.bonus-items-available').text(remain);
    if (remain <= 0) {
        $bonusProductList.find('.select-bonus-item').attr('disabled', 'disabled');
    } else {
        $bonusProductList.find('.select-bonus-item').removeAttr('disabled');
    }
}

function initializeGrid() {
    var $bonusProduct = $('#bonus-product-dialog'),
        $bonusProductList = $('#bonus-product-list'),
        bliData = $bonusProductList.data('line-item-detail');
    maxItems = bliData.maxItems;
    bliUUID = bliData.uuid;

    if (bliData.itemCount >= maxItems) {
        $bonusProductList.find('.select-bonus-item').attr('disabled', 'disabled');
    }

    var cartItems = $bonusProductList.find('.selected-bonus-item');
    cartItems.each(function () {
        var ci = $(this);
        var product = {
            uuid: ci.data('uuid'),
            pid: ci.data('pid'),
            qty: ci.find('.item-qty').text(),
            name: ci.find('.item-name').html(),
            attributes: {}
        };
        var attributes = ci.find('ul.item-attributes li');
        attributes.each(function () {
            var li = $(this);
            product.attributes[li.data('attributeId')] = {
                displayName: li.children('.display-name').html(),
                displayValue: li.children('.display-value').html()
            };
        });
        selectedList.push(product);
    });

    $bonusProductList.on('click', '.bonus-product-item a[href].swatchanchor', function (e) {
        e.preventDefault();
        var url = this.href,
            $this = $(this);
        url = util.appendParamsToUrl(url, {
            'source': 'bonus',
            'format': 'ajax'
        });
        $.ajax({
            url: url,
            success: function success(response) {
                $this.closest('.bonus-product-item').empty().html(response);
                hideSwatches();
            }
        });
    }).on('change', '.input-text', function () {
        $bonusProductList.find('.select-bonus-item').removeAttr('disabled');
        $(this).closest('.bonus-product-form').find('.quantity-error').text('');
    }).on('click', '.select-bonus-item', function (e) {
        e.preventDefault();
        if (selectedList.length >= maxItems) {
            $bonusProductList.find('.select-bonus-item').attr('disabled', 'disabled');
            $bonusProductList.find('.bonus-items-available').text('0');
            return;
        }

        var form = $(this).closest('.bonus-product-form'),
            detail = $(this).closest('.product-detail'),
            uuid = form.find('input[name="productUUID"]').val(),
            qtyVal = form.find('input[name="Quantity"]').val(),
            qty = isNaN(qtyVal) ? 1 : +qtyVal;

        if (qty > maxItems) {
            $bonusProductList.find('.select-bonus-item').attr('disabled', 'disabled');
            form.find('.quantity-error').text(Resources.BONUS_PRODUCT_TOOMANY);
            return;
        }

        var product = {
            uuid: uuid,
            pid: form.find('input[name="pid"]').val(),
            qty: qty,
            name: detail.find('.product-name').text(),
            attributes: detail.find('.product-variations').data('attributes'),
            options: []
        };

        var optionSelects = form.find('.product-option');

        optionSelects.each(function () {
            product.options.push({
                name: this.name,
                value: $(this).val(),
                display: $(this).children(':selected').first().html()
            });
        });
        selectedList.push(product);
        updateSummary();
    }).on('click', '.remove-link', function (e) {
        e.preventDefault();
        var container = $(this).closest('.selected-bonus-item');
        if (!container.data('uuid')) {
            return;
        }

        var uuid = container.data('uuid');
        var i,
            len = selectedList.length;
        for (i = 0; i < len; i++) {
            if (selectedList[i].uuid === uuid) {
                selectedList.splice(i, 1);
                break;
            }
        }
        updateSummary();
    }).on('click', '.add-to-cart-bonus', function (e) {
        e.preventDefault();
        var url = util.appendParamsToUrl(Urls.addBonusProduct, { bonusDiscountLineItemUUID: bliUUID });
        var bonusProducts = getBonusProducts();
        if (bonusProducts.bonusproducts[0].product.qty > maxItems) {
            bonusProducts.bonusproducts[0].product.qty = maxItems;
        }
        // make the server call
        $.ajax({
            type: 'POST',
            dataType: 'json',
            cache: false,
            contentType: 'application/json',
            url: url,
            data: JSON.stringify(bonusProducts)
        }).done(function () {
            // success
            page.refresh();
        }).fail(function (xhr, textStatus) {
            // failed
            if (textStatus === 'parsererror') {
                window.alert(Resources.BAD_RESPONSE);
            } else {
                window.alert(Resources.SERVER_CONNECTION_ERROR);
            }
        }).always(function () {
            $bonusProduct.dialog('close');
        });
    }).on('click', '#more-bonus-products', function (e) {
        e.preventDefault();
        var uuid = $('#bonus-product-list').data().lineItemDetail.uuid;

        //get the next page of choice of bonus products
        var lineItemDetail = JSON.parse($('#bonus-product-list').attr('data-line-item-detail'));
        lineItemDetail.pageStart = lineItemDetail.pageStart + lineItemDetail.pageSize;
        $('#bonus-product-list').attr('data-line-item-detail', JSON.stringify(lineItemDetail));

        var url = util.appendParamsToUrl(Urls.getBonusProducts, {
            bonusDiscountLineItemUUID: uuid,
            format: 'ajax',
            lazyLoad: 'true',
            pageStart: lineItemDetail.pageStart,
            pageSize: $('#bonus-product-list').data().lineItemDetail.pageSize,
            bonusProductsTotal: $('#bonus-product-list').data().lineItemDetail.bpTotal
        });

        $.ajax({
            type: 'GET',
            cache: false,
            contentType: 'application/json',
            url: url
        }).done(function (data) {
            //add the new page to DOM and remove 'More' link if it is the last page of results
            $('#more-bonus-products').before(data);
            if (lineItemDetail.pageStart + lineItemDetail.pageSize >= $('#bonus-product-list').data().lineItemDetail.bpTotal) {
                $('#more-bonus-products').remove();
            }
        }).fail(function (xhr, textStatus) {
            if (textStatus === 'parsererror') {
                window.alert(Resources.BAD_RESPONSE);
            } else {
                window.alert(Resources.SERVER_CONNECTION_ERROR);
            }
        });
    });
}

var bonusProductsView = {
    /**
     * @function
     * @description Open the list of bonus products selection dialog
     */
    show: function show(url) {
        var $bonusProduct = $('#bonus-product-dialog');
        // create the dialog
        dialog.open({
            target: $bonusProduct,
            url: url,
            options: {
                width: 795,
                title: Resources.BONUS_PRODUCTS
            },
            callback: function callback() {
                initializeGrid();
                hideSwatches();
            }
        });
    },
    /**
     * @function
     * @description Open bonus product promo prompt dialog
     */
    loadBonusOption: function loadBonusOption() {
        var self = this,
            bonusDiscountContainer = document.querySelector('.bonus-discount-container');
        if (!bonusDiscountContainer) {
            return;
        }

        // get the html from minicart, then trash it
        var bonusDiscountContainerHtml = bonusDiscountContainer.outerHTML;
        bonusDiscountContainer.parentNode.removeChild(bonusDiscountContainer);

        dialog.open({
            html: bonusDiscountContainerHtml,
            options: {
                width: 400,
                title: Resources.BONUS_PRODUCT,
                buttons: [{
                    text: Resources.SELECT_BONUS_PRODUCTS,
                    click: function click() {
                        var uuid = $('.bonus-product-promo').data('lineitemid'),
                            url = util.appendParamsToUrl(Urls.getBonusProducts, {
                            bonusDiscountLineItemUUID: uuid,
                            source: 'bonus',
                            format: 'ajax',
                            lazyLoad: 'false',
                            pageStart: 0,
                            pageSize: 10,
                            bonusProductsTotal: -1
                        });
                        $(this).dialog('close');
                        self.show(url);
                    }
                }, {
                    text: Resources.NO_THANKS,
                    click: function click() {
                        $(this).dialog('close');
                    }
                }]
            },
            callback: function callback() {
                // show hide promo details
                $('.show-promo-details').on('click', function () {
                    $('.promo-details').toggleClass('visible');
                });
            }
        });
    }
};

module.exports = bonusProductsView;

},{"./dialog":23,"./page":30,"./util":63}],18:[function(require,module,exports){
'use strict';

function getUrlVars() {
    var vars = [],
        hash;
    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
    for (var i = 0; i < hashes.length; i++) {
        hash = hashes[i].split('=');
        vars.push(hash[0]);
        vars[hash[0]] = hash[1];
    }
    return vars;
}

function runBrowseraTest() {

    var hoverSelector = decodeURI(getUrlVars().hover);
    if (hoverSelector !== '') {
        hoverSelector = hoverSelector.replace(' eq ', '=');
        if ($(hoverSelector).length > 0) {
            $(hoverSelector).trigger('mouseenter');
        }
    }
    var clickSelector = decodeURI(getUrlVars().click);
    if (clickSelector !== '') {
        clickSelector = clickSelector.replace(' eq ', '=');
        if ($(clickSelector).length > 0) {
            $(clickSelector).trigger('click');
        }
    }
}

exports.init = function () {
    runBrowseraTest();
};

},{}],19:[function(require,module,exports){
'use strict';

var dialog = require('./dialog');
var util = require('./util');
var SessionAttributes = window.SessionAttributes;

/**
 * @function captcha    Used to display/control the scrim containing the simulated captcha code
 **/
module.exports = function () {
    /**
     * if the session.privacy.ratelimited element is present then show the notification
     * NOTE: You will probably want to replace this with a call to an actual CAPTCHA system to replace the simple one here
     */
    if (SessionAttributes.SHOW_CAPTCHA) {
        dialog.open({
            html: '<h1>' + Resources.ARE_YOU_HUMAN + '</h1>',
            options: {
                closeOnEscape: false,
                dialogClass: 'no-close',
                buttons: [{
                    text: Resources.OK,
                    click: function click() {
                        var url = util.appendParamsToUrl(Urls.rateLimiterReset, { format: 'ajax' });
                        $.ajax({
                            url: url
                        });
                        $(this).dialog('close');
                    }
                }]
            }
        });
    }
};

},{"./dialog":23,"./util":63}],20:[function(require,module,exports){
'use strict';

var page = require('./page'),
    util = require('./util'),
    TPromise = require('promise');

var _currentCategory = '',
    MAX_ACTIVE = 6;

/**
 * @private
 * @function
 * @description Verifies the number of elements in the compare container and updates it with sequential classes for ui targeting
 */
function refreshContainer() {
    var $compareContainer = $('.compare-items');
    var $compareItems = $compareContainer.find('.compare-item');
    var numActive = $compareItems.filter('.active').length;

    if (numActive < 2) {
        $('#compare-items-button').attr('disabled', 'disabled');
    } else {
        $('#compare-items-button').removeAttr('disabled');
    }
    /*Start JIRA PREV-234 : PLP - Not able to remove individual product from the compare grid from PLP.*/
    for (var i = 0; i < $compareItems.length; i++) {
        $($compareItems[i]).find('.compare-item-number').text(i + 1);
    }
    /*End JIRA PREV-234*/
    $compareContainer.toggle(numActive > 0);
}

/**
 * @private
 * @function
 * @description Adds an item to the compare container and refreshes it
 */
function addToList(data) {
    // get the first compare-item not currently active
    var $item = $('.compare-items .compare-item').not('.active').first(),
        $productTile = $('#' + data.uuid);

    if ($item.length === 0) {
        if ($productTile.length > 0) {
            $productTile.find('.compare-check')[0].checked = false;
        }
        window.alert(Resources.COMPARE_ADD_FAIL);
        return;
    }

    // if already added somehow, return
    if ($('[data-uuid="' + data.uuid + '"]').length > 0) {
        return;
    }
    // set as active item
    $item.addClass('active').attr('data-uuid', data.uuid).attr('data-itemid', data.itemid).data('uuid', data.uuid).data('itemid', data.itemid).append($(data.img).clone().addClass('compare-item-image'));
}

/**
 * @private
 * @function
 * description Removes an item from the compare container and refreshes it
 */
function removeFromList($item) {
    if ($item.length === 0) {
        return;
    }
    // remove class, data and id from item
    $item.removeClass('active').removeAttr('data-uuid').removeAttr('data-itemid').data('uuid', '').data('itemid', '')
    // remove the image
    .find('.compare-item-image').remove();

    /*Start JIRA PREV-234 : PLP - Not able to remove individual product from the compare grid from PLP.*/
    var $cloneItem = $item.clone();
    $item.remove();
    $cloneItem.appendTo('.compare-items-panel');
    refreshContainer();
    /*End JIRA PREV-234*/
}

function addProductAjax(args) {
    var promise = new TPromise(function (resolve, reject) {
        $.ajax({
            url: Urls.compareAdd,
            data: {
                pid: args.itemid,
                category: _currentCategory
            },
            dataType: 'json'
        }).done(function (response) {
            if (!response || !response.success) {
                reject(new Error(Resources.COMPARE_ADD_FAIL));
            } else {
                resolve(response);
                initializeEvents(); // JIRA PREV-234 : PLP - Not able to remove individual product from the compare grid from PLP.
            }
        }).fail(function (jqxhr, status, err) {
            reject(new Error(err));
        });
    });
    return promise;
}

function removeProductAjax(args) {
    var promise = new TPromise(function (resolve, reject) {
        $.ajax({
            url: Urls.compareRemove,
            data: {
                pid: args.itemid,
                category: _currentCategory
            },
            dataType: 'json'
        }).done(function (response) {
            if (!response || !response.success) {
                reject(new Error(Resources.COMPARE_REMOVE_FAIL));
            } else {
                resolve(response);
            }
        }).fail(function (jqxhr, status, err) {
            reject(new Error(err));
        });
    });
    return promise;
}

function shiftImages() {
    return new TPromise(function (resolve) {
        var $items = $('.compare-items .compare-item');
        $items.each(function (i, item) {
            var $item = $(item);
            // last item
            if (i === $items.length - 1) {
                return removeFromList($item);
            }
            var $next = $items.eq(i); //JIRA PREV-261 : PLP: When more than 6 product compared then Comparesection not displaying all the product images. Removed +1
            if ($next.hasClass('active')) {
                // remove its own image
                $next.find('.compare-item-image').detach().appendTo($item);
                $item.addClass('active').attr('data-uuid', $next.data('uuid')).attr('data-itemid', $next.data('itemid')).data('uuid', $next.data('uuid')).data('itemid', $next.data('itemid'));
            }
        });
        resolve();
    });
}

/**
 * @function
 * @description Adds product to the compare table
 */
function addProduct(args) {
    var promise;
    var $items = $('.compare-items .compare-item');
    var $cb = $(args.cb);
    var numActive = $items.filter('.active').length;
    if (numActive === MAX_ACTIVE) {
        if (!window.confirm(Resources.COMPARE_CONFIRMATION)) {
            $cb[0].checked = false;
            return;
        }

        // remove product using id
        var $firstItem = $items.first();
        promise = removeItem($firstItem).then(function () {
            return shiftImages();
        });
    } else {
        promise = TPromise.resolve(0);
    }
    return promise.then(function () {
        return addProductAjax(args).then(function () {
            addToList(args);
            if ($cb && $cb.length > 0) {
                $cb[0].checked = true;
            }
            refreshContainer();
        });
    }).then(null, function () {
        if ($cb && $cb.length > 0) {
            $cb[0].checked = false;
        }
    });
}

/**
 * @function
 * @description Removes product from the compare table
 * @param {object} args - the arguments object should have the following properties: itemid, uuid and cb (checkbox)
 */
function removeProduct(args) {
    var $cb = args.cb ? $(args.cb) : null;
    return removeProductAjax(args).then(function () {
        var $item = $('[data-uuid="' + args.uuid + '"]');
        removeFromList($item);
        if ($cb && $cb.length > 0) {
            $cb[0].checked = false;
        }
        refreshContainer();
    }, function () {
        if ($cb && $cb.length > 0) {
            $cb[0].checked = true;
        }
    });
}

function removeItem($item) {
    var uuid = $item.data('uuid'),
        $productTile = $('#' + uuid);
    return removeProduct({
        itemid: $item.data('itemid'),
        uuid: uuid,
        cb: $productTile.length === 0 ? null : $productTile.find('.compare-check')
    });
}

/**
 * @private
 * @function
 * @description Initializes the DOM-Object of the compare container
 */
function initializeDom() {
    var $compareContainer = $('.compare-items');
    _currentCategory = $compareContainer.data('category') || '';
    var $active = $compareContainer.find('.compare-item').filter('.active');
    $active.each(function () {
        var $productTile = $('#' + $(this).data('uuid'));
        if ($productTile.length === 0) {
            return;
        }
        $productTile.find('.compare-check')[0].checked = true;
    });
    // set container state
    refreshContainer();
}

/**
 * @private
 * @function
 * @description Initializes the events on the compare container
 */
function initializeEvents() {
    // add event to buttons to remove products
    $('.compare-item').on('click', '.compare-item-remove', function () {
        removeItem($(this).closest('.compare-item'));
    });

    // Button to go to compare page
    $('#compare-items-button').on('click', function () {
        page.redirect(util.appendParamToURL(Urls.compareShow, 'category', _currentCategory));
    });

    // Button to clear all compared items
    // rely on refreshContainer to take care of hiding the container
    $('#clear-compared-items').on('click', function () {
        $('.compare-items .active').each(function () {
            removeItem($(this));
        });
    });
}

exports.init = function () {
    initializeDom();
    initializeEvents();
};

exports.addProduct = addProduct;
exports.removeProduct = removeProduct;

},{"./page":30,"./util":63,"promise":6}],21:[function(require,module,exports){
'use strict';

var dialog = require('./dialog');

/**
 * @function cookieprivacy    Used to display/control the scrim containing the cookie privacy code
 **/
module.exports = function () {
    /**
     * If we have not accepted cookies AND we're not on the Privacy Policy page, then show the notification
     * NOTE: You will probably want to adjust the Privacy Page test to match your site's specific privacy / cookie page
     */
    if (SitePreferences.COOKIE_HINT === true && document.cookie.indexOf('dw_cookies_accepted') < 0) {
        // check for privacy policy page
        if ($('.privacy-policy').length === 0) {
            dialog.open({
                url: Urls.cookieHint,
                options: {
                    closeOnEscape: false,
                    dialogClass: 'no-close',
                    buttons: [{
                        text: Resources.I_AGREE,
                        click: function click() {
                            $(this).dialog('close');
                            enableCookies();
                        }
                    }]
                }
            });
        }
    } else {
        // Otherwise, we don't need to show the asset, just enable the cookies
        enableCookies();
    }

    function enableCookies() {
        if (document.cookie.indexOf('dw=1') < 0) {
            document.cookie = 'dw=1; path=/';
        }
        if (document.cookie.indexOf('dw_cookies_accepted') < 0) {
            document.cookie = 'dw_cookies_accepted=1; path=/';
        }
    }

    if (document.cookie.indexOf('dw_alert_message') > 0) {
        $('#alert-message').hide();
    }

    $('#close-non-us-alert').on('click', function (e) {
        e.preventDefault();
        $('#alert-message').hide();
        if (document.cookie.indexOf('dw_alert_message') < 0) {
            document.cookie = 'dw_alert_message=1; path=/';
        }
    });
};

},{"./dialog":23}],22:[function(require,module,exports){
'use strict';

exports.init = function init() {
    $('.country-selector .current-country').on('click', function () {
        $('.country-selector .selector').toggleClass('active');
        $(this).toggleClass('selector-active');
    });
    // set currency first before reload
    $('.country-selector .selector .locale').on('click', function (e) {
        e.preventDefault();
        var url = this.href;
        var currency = this.getAttribute('data-currency');
        $.ajax({
            dataType: 'json',
            url: Urls.setSessionCurrency,
            data: {
                format: 'ajax',
                currencyMnemonic: currency
            }
        }).done(function (response) {
            if (!response.success) {
                throw new Error('Unable to set currency');
            }
            window.location.href = url;
        });
    });
};

},{}],23:[function(require,module,exports){
'use strict';

var ajax = require('./ajax'),
    util = require('./util'),
    _ = require('lodash'),
    imagesLoaded = require('imagesloaded');

var dialog = {
    /**
     * @function
     * @description Appends a dialog to a given container (target)
     * @param {Object} params  params.target can be an id selector or an jquery object
     */
    create: function create(params) {
        var $target, id;

        if (_.isString(params.target)) {
            if (params.target.charAt(0) === '#') {
                $target = $(params.target);
            } else {
                $target = $('#' + params.target);
            }
        } else if (params.target instanceof jQuery) {
            $target = params.target;
        } else {
            $target = $('#dialog-container');
        }

        // if no element found, create one
        if ($target.length === 0) {
            if ($target.selector && $target.selector.charAt(0) === '#') {
                id = $target.selector.substr(1);
                $target = $('<div>').attr('id', id).addClass('dialog-content').appendTo('body');
            }
        }

        // create the dialog
        this.$container = $target;
        this.$container.dialog(_.merge({}, this.settings, params.options || {}));
        return this.$container; // PREVAIL-Added Return value.
    },
    /**
     * @function
     * @description Opens a dialog using the given url (params.url) or html (params.html)
     * @param {Object} params
     * @param {Object} params.url should contain the url
     * @param {String} params.html contains the html of the dialog content
     */
    open: function open(params) {
        // close any open dialog
        this.close();
        this.create(params);
        this.replace(params);
    },
    /**
     * @description populate the dialog with html content, then open it
     **/
    openWithContent: function openWithContent(params) {
        var content, position, callback;

        if (!this.$container) {
            return;
        }
        content = params.content || params.html;
        if (!content) {
            return;
        }
        this.$container.empty().html(content);
        if (!this.$container.dialog('isOpen')) {
            this.$container.dialog('open');
        }

        if (params.options) {
            position = params.options.position;
        }
        if (!position) {
            position = this.settings.position;
        }
        imagesLoaded(this.$container).on('done', function () {
            this.$container.dialog('option', 'position', position);
        }.bind(this));

        callback = typeof params.callback === 'function' ? params.callback : function () {};
        callback();
    },
    /**
     * @description Replace the content of current dialog
     * @param {object} params
     * @param {string} params.url - If the url property is provided, an ajax call is performed to get the content to replace
     * @param {string} params.html - If no url property is provided, use html provided to replace
     */
    replace: function replace(params) {
        if (!this.$container) {
            return;
        }
        if (params.url) {
            params.url = util.appendParamToURL(params.url, 'format', 'ajax');
            ajax.load({
                url: params.url,
                data: params.data,
                callback: function (response) {
                    params.content = response;
                    this.openWithContent(params);
                }.bind(this)
            });
        } else if (params.html) {
            this.openWithContent(params);
        }
    },
    /**
     * @function
     * @description Closes the dialog
     */
    close: function close() {
        if (!this.$container) {
            return;
        }
        this.$container.dialog('close');
    },
    /**
     * @function
     * @description Submits the dialog form with the given action
     * @param {String} The action which will be triggered upon form submit
     */
    submit: function submit(action) {
        var $form = this.$container.find('form:first');
        // set the action
        $('<input/>').attr({
            name: action,
            type: 'hidden'
        }).appendTo($form);
        // serialize the form and get the post url
        var data = $form.serialize();
        var url = $form.attr('action');
        // make sure the server knows this is an ajax request
        if (data.indexOf('ajax') === -1) {
            data += '&format=ajax';
        }
        // post the data and replace current content with response content
        $.ajax({
            type: 'POST',
            url: url,
            data: data,
            dataType: 'html',
            success: function (html) {
                this.$container.html(html);
                $('.ui-dialog-content:visible').each(function () {
                    $(this).dialog('option', 'position', $(this).dialog('option', 'position'));
                });
            }.bind(this),
            failure: function failure() {
                window.alert(Resources.SERVER_ERROR);
            }
        });
    },
    exists: function exists() {
        return this.$container && this.$container.length > 0;
    },
    isActive: function isActive() {
        return this.exists() && this.$container.children.length > 0;
    },
    settings: {
        autoOpen: false,
        height: 'auto',
        modal: true,
        overlay: {
            opacity: 0.5,
            background: 'black'
        },
        resizable: false,
        title: '',
        width: '800',
        close: function close() {
            $(this).dialog('close');
        },
        position: {
            my: 'center',
            at: 'center',
            of: window,
            collision: 'flipfit'
        }
    }
};

module.exports = dialog;

},{"./ajax":15,"./util":63,"imagesloaded":4,"lodash":5}],24:[function(require,module,exports){
'use strict';

var ajax = require('./ajax'),
    util = require('./util'),
    tooltip = require('./tooltip'),
    validator = require('./validator'),
    dialog = require('./dialog');

var setDialogify = function setDialogify(e) {
    e.preventDefault();
    var actionSource = $(this),
        dlgAction = $(actionSource).data('dlg-action') || {},
        // url, target, isForm
    dlgOptions = $.extend({}, dialog.settings, $(actionSource).data('dlg-options') || {});

    dlgOptions.title = dlgOptions.title || $(actionSource).attr('title') || '';

    var url = dlgAction.url // url from data
    || (dlgAction.isForm ? $(actionSource).closest('form').attr('action') : null) // or url from form action if isForm=true
    || $(actionSource).attr('href'); // or url from href

    if (!url) {
        return;
    }

    var form = jQuery(this).parents('form');
    var method = form.attr('method') || 'POST';

    if (actionSource[0].tagName === 'BUTTON' && !form.valid() || actionSource[0].tagName === 'INPUT' && !form.valid()) {
        return false;
    }

    // if this is a content link, update url from Page-Show to Page-Include
    if ($(this).hasClass('attributecontentlink')) {
        var uri = util.getUri(url);
        url = Urls.pageInclude + uri.query;
    }
    var postData;
    if (method && method.toUpperCase() === 'POST') {
        postData = form.serialize() + '&' + jQuery(this).attr('name') + '=submit';
    } else {
        if (url.indexOf('?') === -1) {
            url += '?';
        } else {
            url += '&';
        }
        url += form.serialize();
        url = util.appendParamToURL(url, jQuery(this).attr('name'), 'submit');
    }

    var dlg = dialog.create({
        target: dlgAction.target,
        options: dlgOptions
    });

    ajax.load({
        url: $(actionSource).attr('href') || $(actionSource).closest('form').attr('action'),
        target: dlg,
        callback: function callback() {
            dlg.dialog('open'); // open after load to ensure dialog is centered
            validator.init();
            tooltip.init();
            if (dlg.find('.closedialog').length > 0) {
                dialog.close();
            }
        },
        data: !$(actionSource).attr('href') ? postData : null,
        type: method

    });
};

exports.setDialogify = setDialogify;

},{"./ajax":15,"./dialog":23,"./tooltip":61,"./util":63,"./validator":64}],25:[function(require,module,exports){
'use strict';

var ajax = require('./ajax'),
    minicart = require('./minicart'),
    util = require('./util');

var setAddToCartHandler = function setAddToCartHandler(e) {
    e.preventDefault();
    var form = $(this).closest('form');

    var options = {
        url: util.ajaxUrl(form.attr('action')),
        method: 'POST',
        cache: false,
        data: form.serialize()
    };
    $.ajax(options).done(function (response) {
        if (response.success) {
            ajax.load({
                url: Urls.minicartGC,
                data: {
                    lineItemId: response.result.lineItemId
                },
                callback: function callback(response) {
                    minicart.show(response);
                    form.find('input,textarea').val('');
                }
            });
        } else {
            form.find('span.error').hide();
            for (var id in response.errors.FormErrors) {
                var $errorEl = $('#' + id).addClass('error').removeClass('valid').next('.error');
                if (!$errorEl || $errorEl.length === 0) {
                    $errorEl = $('<span for="' + id + '" generated="true" class="error" style=""></span>');
                    $('#' + id).after($errorEl);
                }
                $errorEl.text(response.errors.FormErrors[id].replace(/\\'/g, '\'')).show();
            }
        }
    }).fail(function (xhr, textStatus) {
        // failed
        if (textStatus === 'parsererror') {
            window.alert(Resources.BAD_RESPONSE);
        } else {
            window.alert(Resources.SERVER_CONNECTION_ERROR);
        }
    });
};

exports.init = function () {
    $('#AddToBasketButton').on('click', setAddToCartHandler);
};

},{"./ajax":15,"./minicart":29,"./util":63}],26:[function(require,module,exports){
'use strict';

var //uievents = require('./uievents'),
dialog = require('./dialog'),
    progress = require('./progress');

//var $con = $('body');
var appGlobal = {
    globalTimer: 0
};
var headerEvents = {
    initializeEvent: function initializeEvent() {
        $('body').find('input, select.input-select').focusin(function () {
            $(this).closest('.formfield').removeClass('inputlabel');
            $(this).closest('.formfield').find('.form-row , .label span').removeClass('inputlabel');
            $(this).removeClass('errorclient');
            $(this).closest('.formfield').find('.logerror , .existing_register').css('display', 'none');
        });
        if ($('.logincustomers').length > 0) {
            var crrobj = $(this).find('.formfield  .logerror');
            $(crrobj).closest('.formfield').find('.form-row , .label span').removeClass('inputlabel');
        }

        $('.privacy-policy').on('click', function (e) {
            e.preventDefault();
            dialog.open({
                url: $(e.target).attr('href'),
                options: {
                    height: 600
                }
            });
        });
        //label text color change on submit
        if ($('.account-logs').length > 0 || $('.new-register').length > 0 || $('.wish-logs').length > 0 || $('.createan-account').length > 0 || $('.headercustomerinfo').length > 0 || $('.ui-login').length > 0 || $('.passwordreset').length > 0) {
            $('.formactions button').click(function () {
                $('span.existing_register').hide();
                var crrobj = $(this).closest('form').find('.field-wrapper .required');
                $(crrobj).each(function () {
                    if ($(this).hasClass('errorclient')) {
                        $(this).closest('.formfield').find('.label .labeltext').addClass('inputlabel');
                        $(this).closest('.formfield').find('.label .requiredindicator').addClass('inputlabel');
                    } else {
                        $(this).closest('.formfield').find('.label .labeltext').removeClass('inputlabel');
                        $(this).closest('.formfield').find('.label .requiredindicator').removeClass('inputlabel');
                    }
                });
            });
        }
        //login & wish list validations
        if ($('.account-logs').length > 0 || $('.new-register').length > 0 || $('.wish-logs').length > 0 || $('.createan-account').length > 0 || $('.headercustomerinfo').length > 0 || $('.ui-login').length > 0) {
            $('a.clearbutton').click(function () {
                $(this).closest('.formfield').find('input').val('');
                $(this).closest('.formfield').find('textarea').val('');
                $(this).closest('.field-wrapper').find('span').remove();
                $(this).closest('.field-wrapper').find('.required').removeClass('errorclient');
                $(this).closest('.formfield').find('a.clearbutton').hide();
                $(this).closest('.formfield ').find('.form-row').removeClass('inputlabel');
                $(this).closest('.formfield').find('.form-row , .label span').removeClass('inputlabel');
                $(this).closest('.formfield').find('span.logerror , .existing_register').hide();
            });
        }
        $('.ui-login .sign-up-blk > a').on('mouseenter click', function (e) {
            if ($(window).width() < 960) {
                return true;
            } else {
                if (e.type == 'click' && $('.accountcontent').is(':visible')) {
                    clearTimeout(appGlobal.globalTimer);
                    //appGlobal.globalTimer == 0;
                    $('.accountcontent').hide();
                    $('.headermask').hide();
                    $('.confirmationcontainer').hide();
                    return false;
                }
                if ($('.header-create').is(':visible')) {
                    return false;
                }
                $('.accountcontent').removeClass('js-entered');
                $('.accountcontent').hide();
                $('.sign-up-blk').addClass('js-active');
                if (!$(this).closest('.ui-login').find('.header-sign-in').is(':visible')) {
                    headerEvents.accountContPos($('.ui-login .sign-up-blk > a'), $(this).closest('.ui-login').find('.header-sign-in'));
                    $(this).closest('.ui-login').find('.header-sign-in').show();
                }
                $('.headermask').show();
                /*if(appGlobal.util.readCookie("emailId")){
                    $('.header-sign-in.accountcontent .guestemail').val(appGlobal.util.readCookie("emailId"));
                    $('.header-sign-in.accountcontent .login_password').removeAttr('placeholder').val('');
                }*/
                clearTimeout(appGlobal.globalTimer);
                //appGlobal.globalTimer == 0;
                appGlobal.globalTimer = setTimeout(function () {
                    $('.accountcontent').hide();
                    $('.headermask').hide();
                    $('.headercustomerinfo').find('.js-active').removeClass('js-active');
                }, 5000);
                $('.confirmationcontainer').hide();
            }
        });
        $('.signingin').click(function (e) {
            e.preventDefault();
            $('.accountcontent').hide();
            var validator = $(this).closest('form').validate();
            if (validator.element($(this).closest('form').find('.guestemail'))) {
                $('.accountcontent .guestemail').val($(this).closest('.accountcontent').find('.guestemail').val());
                $('.accountcontent .guestemail').removeClass('error');
                $('.accountcontent .guestemail').next('span.error').remove();
                $('.login_password').removeClass('error');
                $('.login_password').next('span.error').remove();
                $('.accountcontent .guestemail').addClass('click-mark valid');
            }
            $(this).closest('.ui-login').find('.header-sign-in').show();
            $('.header-sign-in .signin_main .loginfail.errormessage').hide();
            $('.headermask').addClass('no-hide').show();
        });

        $('.sign-message a, .ExistedUser-error .createaccount').click(function (e) {
            e.preventDefault();
            $('.accountcontent').hide();
            $(this).closest('.ui-login').find('.header-create').show();
            var validator = $(this).closest('form').validate();
            if (validator.element($(this).closest('form').find('.guestemail'))) {
                $('.accountcontent .guestemail').val($(this).closest('.accountcontent').find('.guestemail').val());
                $('.accountcontent .guestemail').removeClass('error');
                $('.accountcontent .guestemail').next('span.error').remove();
                $('.accountcontent .guestemail').addClass('click-mark valid');
            }
            headerEvents.accountContPos($('.ui-login .sign-up-blk > a'), $(this).closest('.ui-login').find('.header-create'));
            $('.headermask').show();
            $('.ExistedUser-error').hide();
            clearTimeout(appGlobal.globalTimer);
            //appGlobal.globalTimer == 0;
            appGlobal.globalTimer = setTimeout(function () {
                $('.accountcontent').hide();
                $('.headermask').hide();
                $('.headercustomerinfo').find('.js-active').removeClass('js-active');
            }, 5000);
        });

        $('.forgot-password a').click(function (e) {
            e.preventDefault();
            $('.accountcontent').hide();
            $('.header-forgot-pwd span.reset_email_error').hide();
            $(this).closest('.ui-login').find('.header-forgot-pwd').show();
            headerEvents.accountContPos($('.ui-login .sign-up-blk > a'), $(this).closest('.ui-login').find('.header-forgot-pwd'));
            $('.headermask').show();
            var validator = $(this).closest('form').validate({
                onkeyup: false
            });
            if (validator.element($(this).closest('form').find('.guestemail'))) {
                $('.accountcontent .guestemail').val($(this).closest('.accountcontent').find('.guestemail').val());
                $('.accountcontent .guestemail').removeClass('error');
                $('.accountcontent .guestemail').next('span.error').remove();
                $('.accountcontent .guestemail').addClass('click-mark valid');
            }
            clearTimeout(appGlobal.globalTimer);
            //appGlobal.globalTimer == 0;
            appGlobal.globalTimer = setTimeout(function () {
                $('.accountcontent').hide();
                $('.headermask').hide();
                $('.headercustomerinfo').find('.js-active').removeClass('js-active');
            }, 5000);
        });

        $('.accountcontent').mouseenter(function () {
            $('.headermask').removeClass('no-hide');
            $('.headermask').show();
            $('.confirmationcontainer').hide();
            $('.sign-up-blk').addClass('js-active');
            clearTimeout(appGlobal.globalTimer);
            //appGlobal.globalTimer == 0;
        });

        $('.headermask').click(function (e) {
            headerEvents.maskEvent(e);
        });

        $('.headermask').mouseenter(function (e) {
            headerEvents.maskEvent(e);
        });
        $('.accountcontent').mouseenter(function () {
            $('.headermask').removeClass('no-hide');
            $('.headermask').show();
            $('.confirmationcontainer').hide();
            $('.sign-up-blk').addClass('js-active');
            clearTimeout(appGlobal.globalTimer);
            //appGlobal.globalTimer == 0;
        });
        $('.user-account').on('click', function (e) {
            e.preventDefault();
            $(this).parent('.user-info').toggleClass('active');
        });
        $('.change-regionnew').mouseenter(function () {
            $('.domainswitch-header').show();
            $('.headermask').show();
        });
        $('.change-region').mouseenter(function () {
            jQuery('.domainswitch').show();
            $('.region_overlay').show();
        });
        $('.region_overlay').mouseenter(function () {
            jQuery('.domainswitch').hide();
            $(this).hide();
        });
        $('button').on('click', function () {
            if ($('.resetpassword').is(':Visible')) {
                $('.resetpassword').closest('div.dialog-content').addClass('confirmationcontainer');
            }
        });
        $('.sample-section').click(function () {
            if (!$(this).find('.sample_mail_main').is(':visible')) {
                $(this).find('.sample_mail_main').slideDown(500);
            }
        });
        $('.signupfor-email .seesamples').click(function () {
            $(this).closest('.signupfor-email').find('.sample_mail_main').slideToggle(500);
        });

        $('body').click(function (event) {
            if (!$(event.target).is('.signupfor-email .seesamples') && !$(event.target).is('.create_email_checkbox .seesamples')) {
                $('.sample_mail_main').slideUp(500);
            }
        });
        /**This is used to get the tick mark for create account when the field is valid*/
        $('.ui-login input.required').blur(function () {
            if ($(this).hasClass('valid')) {
                $(this).addClass('click-mark');
            } else {
                $(this).removeClass('click-mark');
            }
        });

        $('.back-link, .signingin').click(function () {
            $('.accountcontent').hide();
            $(this).closest('.ui-login').find('.header-sign-in').show();
            $('.header-sign-in .signin_main .loginfail.errormessage').hide();
        });

        $('.forgot_create').click(function () {
            $('.header-forgot-pwd').hide();
            $('.header-create').show();
            $('.header-create .errormessage').hide();
        });

        $('.loggeduser a, .headercustomerinfo .second_name').on('mouseenter', function (e) {
            e.preventDefault();
            if ($('.rapala_device').length == 0) {
                $('.accountcontent').hide();
                headerEvents.accountContPos($('.headercustomerinfo .loggeduser a'), $('.user-info'));
                $('.user-info').show();
            }
        });

        $('.rapala_device .loggeduser a,.headercustomerinfo .second_name').on('click', function (e) {
            e.preventDefault();
            $('.accountcontent').hide();
            headerEvents.accountContPos($('.headercustomerinfo .loggeduser a'), $('.user-info'));
            $('.user-info').show();
            $('.headermask').show();
        });
        jQuery(window).bind('message', function (e) {
            var str;
            e = e.originalEvent;
            if (e.origin.indexOf(document.location.host) === -1) {
                return;
            }
            var obj = e.data;
            try {
                str = JSON.parse(obj);
            } catch (err) {
                return;
            }
            if (str.process !== 'sign-in') {
                return;
            }

            if (str.status === 'success') {
                if (typeof str.email === 'string') {
                    headerEvents.userCookie(str.email);
                }
                document.location.reload(true);
            } else {
                $('.ExistedUser-error').hide();
                $('.custom_signin').find('.loading').remove();
                progress.hide();
                $('.custom_signin input[type="text"], .custom_signin input[type="password"]').addClass('errorclient');
                $('.loginfail').show();
                $('.accountcontent .loading').remove();
            }
        });
        jQuery('.signin-button').click(function (e) {
            e.preventDefault();
            var realForm = $(this).closest('form');
            if (!realForm.valid()) {
                return false;
            }
            $('.loginfail').hide();
            progress.show('.header-sign-in.accountcontent');
            var iframeId = 'js-header-signin-iframe';
            var formId = 'js-header-signin-form';
            $('#' + iframeId).remove();
            $('#' + formId).remove();
            var $form = $('<form></form>');
            $form.attr('id', formId);
            $form.attr('action', realForm.attr('action'));
            $form.attr('target', iframeId);
            $form.attr('method', 'POST');

            $('<iframe name="' + iframeId + '" id="' + iframeId + '" />').appendTo('body');
            $('#' + iframeId).attr('style', 'display: none;');

            realForm.find('input, select, textarea').each(function () {
                var $input = $(this).clone();
                $form.append($input);
            });

            $('body').append($form);
            $form.hide();
            $form.submit();
        });
        /*$(".PasswordResetForm").on("keyup",".guestemail",function(e){
                if(e.keyCode == 13) {
                    $('.lost_btn .send').trigger("click");
                }
            });*/
        $('.PasswordResetForm').unbind('submit').on('submit', function (e) {
            $('.header-forgot-pwd span.reset_email_error').hide();
            $('.lost_btn .send').addClass('clickedButton');
            e.preventDefault();
            var $form = $(this);
            if (!$form.valid()) {
                return false;
            }
            progress.show('.header-forgot-pwd.accountcontent');
            $.ajax({
                dataType: 'html',
                url: $form.attr('action'),
                data: $form.serialize(),
                success: function success(data) {
                    if ($(data).find('div#messages.error').length > 0) {
                        progress.hide();
                        $('.header-forgot-pwd').show();
                        $('.header-forgot-pwd span.reset_email_error').show();
                        $('.accountcontent .loading').remove();
                    } else {
                        progress.hide();
                        $('.header-forgot-pwd').hide();
                        $('.confirmationcontainer').fadeIn(400);
                        //to display the messeage
                        headerEvents.initializeEvent();
                        headerEvents.accountContPos($('.ui-login .sign-up-blk > a'), $('.confirmationcontainer'));
                        $('.accountcontent .loading').remove();
                        $('.confirmationcontainer').find('.headermask').hide();
                        $('.confirmationcontainer').delay(4000).fadeOut();
                    }
                }
            });
            return false;
        });
        jQuery(window).bind('message', function (e) {
            var str;
            e = e.originalEvent;
            if (e.origin.indexOf(document.location.host) === -1) {
                return;
            }
            var obj = e.data;
            try {
                str = JSON.parse(obj);
            } catch (err) {
                return;
            }
            if (str.process !== 'create-account') {
                return;
            }

            if (str.status === 'success') {
                if (typeof str.email === 'string') {
                    headerEvents.userCookie(str.email);
                }
                $.ajax({
                    dataType: 'html',
                    url: document.location.toString(),
                    success: function success(data) {
                        progress.hide();
                        $('.headermask').removeClass('no-hide').hide();
                        $('.header-sign-in.accountcontent').remove();
                        $('.headercustomerinfo #user').html($(data).find('#user').html());
                        $('#userinfo').html($(data).find('#userinfo').html());
                        headerEvents.accountContPos($('.headercustomerinfo .loggeduser a'), $('.congrats-message.accountcontent'));
                        $('.congrats-message').fadeIn(400).show().delay(3000).fadeOut(400);
                        headerEvents.initializeEvent();
                    }
                });
            } else {
                $('.accountcontent').hide();
                progress.hide();
                $('.ExistedUser-error').show();
                $('.errormessage').hide();
                $('.ui-login').find('.header-sign-in').show();
                //$('.ui-login').find('.header-sign-in .accountemail').val(emailId);
                $('.accountcontent .guestemail').removeClass('errorclient');
                $('.accountcontent .guestemail').next('span.errorclient').remove();
                $('.ui-login').find('.header-sign-in .accountemail').addClass('click-mark valid');
                $('.headermask').addClass('no-hide').show();
                $('.custom_signup input[type="text"], .custom_signup input[type="password"]').removeClass('errorclient');
            }
        });

        jQuery('.create-account').unbind('click').click(function (e) {
            e.preventDefault();
            var realForm = $(this).closest('form');
            if (!realForm.valid()) {
                return false;
            }
            progress.show('.header-create.accountcontent');
            var iframeId = 'js-header-create-account-iframe';
            var formId = 'js-header-create-account-form';
            $('#' + iframeId).remove();
            $('#' + formId).remove();
            var $form = $('<form></form>');
            $form.attr('id', formId);
            $form.attr('action', realForm.attr('action'));
            $form.attr('target', iframeId);
            $form.attr('method', 'POST');

            $('<iframe name="' + iframeId + '" id="' + iframeId + '" />').appendTo('body');
            $('#' + iframeId).attr('style', 'display: none;');

            realForm.find('input, select, textarea').each(function () {
                var $input = $(this).clone();
                $form.append($input);
            });

            $('body').append($form);
            $form.hide();
            $form.submit();
        });

        if ($('#user').length > 0) {
            firstnamesplit();
        }

        function firstnamesplit() {
            var firstname = $('.loggeduser > a span.username').text();
            var firstnameWords = firstname.split(' ');
            var textlength = 0;
            var limit = 19;
            var nameLength = $('.loggeduser > a span.username').text() + ' ' + $.trim($('.loggeduser > a .prostaff-header.badge-header').text());
            if (nameLength.length <= 19) {
                $('.loggeduser > a span.username').text($('.loggeduser > a span.username').text() + ' ' + $.trim($('.loggeduser > a .prostaff-header.badge-header').text()));
                $('.loggeduser > a .prostaff-header.badge-header').remove();
            } else if (firstnameWords.length > 0) {
                $('.loggeduser > a span.username').text('');
                if ($('.loggeduser > a span.username .first_name').length == 0) {
                    $('.loggeduser > a span.username').html('<span class="first_name"></span>');
                }
                if ($('.headercustomerinfo .second_name').length == 0) {
                    $('.headercustomerinfo').append('<span class="second_name"></span>');
                }

                var fName = $('.loggeduser > a span.username span.first_name').eq(0);
                var Lname = $('.headercustomerinfo > .second_name');

                jQuery.each(firstnameWords, function (i, v) {
                    textlength = textlength == 0 ? textlength + v.length : textlength + v.length + 1;
                    if (i == 0 && v.length > limit) {
                        fName.text(v.substr(0, 16) + '...');
                    } else if (textlength < 20) {
                        if (fName.text().length == 0) {
                            fName.text(v);
                        } else {
                            fName.text(fName.text() + ' ' + v);
                        }
                    } else {
                        if (Lname.text().length == 0) {
                            Lname.text(v);
                        } else {
                            Lname.text(Lname.text() + ' ' + v);
                        }
                    }
                });
                Lname.text(Lname.text() + ' ' + $.trim($('.loggeduser > a .badge-mini').text()));
                if ($('#user .loggeduser').width() > Lname.width()) {
                    $('.loggeduser').append(Lname.clone());
                    Lname.remove();
                }
                $('.loggeduser > a .prostaff-header.badge-header').remove();
                $('.loggeduser > a .badge-mini').remove();
            } else {
                $('.loggeduser > a span.username span').hide();
            }
        }

        $('.accountcontent input[type="text"], .accountcontent input[type="password"]').bind('keyup', function (e) {
            var keycode = e.keyCode ? e.keyCode : e.which;
            if (!$(this).closest('.accountcontent').hasClass('js-entered')) {
                $(this).closest('.accountcontent').addClass('js-entered');
            }

            if (keycode == 13) {
                $(this).closest('form').find('.formactions button').trigger('click');
            }
            clearTimeout(appGlobal.globalTimer);
            //appGlobal.globalTimer == 0;
        });

        $('.rapala_device .user-profile a').on('hover', function () {
            window.location.href = $(this).attr('href');
        });
    },
    /** ON HOVER */
    accountContPos: function accountContPos($source, $destiny) {
        var leftPos = $source.offset().left + $source.width() - $('.headercustomerinfo').offset().left - $destiny.width() / 2;
        var arrowPos = ($destiny.width() - $destiny.find('.top_arrow').width()) / 2 - 4;
        $('.accountcontent .loading').remove();
        if ($destiny.length != 0) {
            $destiny.css('left', leftPos);
            $destiny.find('.top_arrow').css('left', arrowPos);
        }
        $('.accountcontent .formfield .label .errorlabel').addClass('labeltext').removeClass('errorlabel');
    },
    userCookie: function userCookie() {
        var dateObj = new Date();
        dateObj.setTime(dateObj.getTime() + 365 * 24 * 60 * 60 * 1000);
        //document.cookie="emailId="+$val+"; expires="+dateObj.toUTCString()+"; path=/";
    },
    maskEvent: function maskEvent(ele) {
        $('.domainswitch-header').hide();
        $('.domainswitch').hide();
        if (!$('.headermask').hasClass('no-hide')) {
            clearTimeout(appGlobal.globalTimer);
            //appGlobal.globalTimer == 0;
            if (ele.type != 'click' && $('.rapala_device').length == 0 && ele.pageY > 60 && ele.pageY < 100) {
                $('.headermask').hide();
            }
            if (ele.type == 'click') {
                $('.headermask').hide();
                $('.accountcontent').hide();
                $('.headercustomerinfo').find('.js-active').removeClass('js-active');
            } else {
                clearTimeout(appGlobal.globalTimer);
                //appGlobal.globalTimer == 0;
                if ($('.accountcontent:visible').hasClass('js-entered')) {
                    appGlobal.globalTimer = setTimeout(function () {
                        $('.accountcontent').hide();
                        $('.headermask').hide();
                    }, 5000);
                } else {
                    $('.accountcontent').hide();
                    $('.headermask').hide();
                }
            }
        }
    }
};
var headerinit = {
    init: function init() {
        headerEvents.initializeEvent();
    }
};

module.exports = headerinit;

},{"./dialog":23,"./progress":52}],27:[function(require,module,exports){
'use strict';
// jQuery extensions

module.exports = function () {
    // params
    // toggleClass - required
    // triggerSelector - optional. the selector for the element that triggers the event handler. defaults to the child elements of the list.
    // eventName - optional. defaults to 'click'
    $.fn.toggledList = function (options) {
        if (!options.toggleClass) {
            return this;
        }
        var list = this;
        return list.on(options.eventName || 'click', options.triggerSelector || list.children(), function (e) {
            e.preventDefault();
            var classTarget = options.triggerSelector ? $(this).parent() : $(this);
            classTarget.toggleClass(options.toggleClass);
            // execute callback if exists
            if (options.callback) {
                options.callback();
            }
        });
    };

    $.fn.syncHeight = function () {
        var arr = $.makeArray(this);
        arr.sort(function (a, b) {
            return $(a).height() - $(b).height();
        });
        return this.height($(arr[arr.length - 1]).height());
    };
};

},{}],28:[function(require,module,exports){
'use strict';

var $main = $('#main'),
    $footer = $('#footernew'),
    $banner = $('.banner_prostaff');

var megamenu = {
    globalTimer: 0,
    init: function init() {
        megamenu.megamenuEvent();
    },
    open: function open() {

        //var $width = $('#brand-tabs-header').width();
        // To make default menu based on the brand active
        $('#brand-tabs-header > ul > li.active .mobile-main-menu-heading').trigger('click');
        $('#container').addClass('js-container-active');
        $('.menu-toggle').addClass('js-menu-toggle');
        $('.menu-open-shadow').remove();
        $main.wrap('<div class=\'open-menu-wrap\'></div>');
        $('body').addClass('js-body');
        $('.open-menu-wrap').prepend($banner);
        $('.open-menu-wrap').append($footer).prepend('<a href=\'javascript:void(0);\' class=\'menu-open-shadow\'></a>');
        //$("#main, #footernew").prepend("<div class='menu-open-shadow'></div>")
        $('#container, .open-menu-wrap').animate({ marginLeft: '280px' }, 300);
        $('#brand-tabs-header').wrap('<div class=\'brand-active\'></div>');
        $('.brand-active').animate({ left: '0' }, 300);
        $('.banner_prostaff').animate({ left: '280px' }, 300);
        $('.owl-carousel').find('.owl-item, .owl-item img').trigger('mouseenter');
    },
    close: function close() {
        $('#container, .open-menu-wrap').animate({ marginLeft: '0' }, 300);
        $('.banner_prostaff').animate({ left: '0' }, 300);
        $('#container').removeClass('js-container-active');
        $('body').removeClass('js-body');
        $('.owl-carousel').find('.owl-item, .owl-item img').trigger('mouseout');
        $('#main, #footernew').unwrap();
        $('.magnifier-icon').removeClass('js-magnifier-icon-active');
        $('.menu-toggle').removeClass('js-menu-toggle');
        $('#brand-tabs-header').unwrap();
        setTimeout(function () {
            $(window).scrollTop(0);
        }, 300);
    },
    megamenuEvent: function megamenuEvent($con) {
        if ($con == null) {
            $con = $('#brand-tabs-header > ul > li .megamenudrop');
        }
        $con.each(function () {
            var maxlength = 24;
            var $mega = $(this);
            //var textlinklength = $(this).find('> a').length;
            var divlength = 4;
            if ($(this).attr('id') == 'rapala') {
                divlength = 6;
            } else if ($(this).attr('id') == 'vmc') {
                divlength = 6;
            } else if ($(this).attr('id') == 'luhrjensen') {
                divlength = 4;
            } else if ($(this).attr('id') == 'sufix') {
                divlength = 6;
            } else if ($(this).attr('id') == 'storm') {
                divlength = 4;
            } else if ($(this).attr('id') == 'triggerx') {
                divlength = 4;
            } else if ($(this).attr('id') == 'bluefox') {
                divlength = 4;
            } else if ($(this).attr('id') == 'terminator') {
                divlength = 4;
            } else if ($(this).attr('id') == 'williamson') {
                divlength = 4;
            } else if ($(this).attr('id') == 'strikemaster') {
                divlength = 6;
            } else if ($(this).attr('id') == 'marcum') {
                divlength = 6;
            } else if ($(this).attr('id') == 'otter') {
                divlength = 6;
            } else if ($(this).attr('id') == 'iceforce') {
                divlength = 4;
            }
            //var intial = 0;
            var end = maxlength;
            var datalist = '';
            var brandlist = $(this).find('.brand-assets').clone();
            var containerwidth = $('.megamenu-drop .wrapper').width() / divlength + 'px';
            var lasttext = '';
            var prev = '';
            //var next = '';
            $mega.find('.brand-assets').remove();

            for (var i = 1; i <= divlength; i++) {
                $mega.append('<div class="menulist menulist-' + i + '" style="width:' + containerwidth + '"></div>');
                $mega.find('.mega_subcategory').each(function () {
                    if ($(this).find('a.level-1').eq(0).hasClass('column-' + i)) {
                        datalist = $(this).html();
                        $mega.find('.menulist-' + i).append(datalist);
                    }
                });
                if (i == divlength) {
                    $mega.find('.menulist-' + i).append(brandlist);
                }
            }

            $mega.find('.menulist').each(function ($i) {
                $i = $i + 1;
                if ($(this).find('> a').length > maxlength) {
                    end = $(this).find('> a').length;
                    if (end > maxlength) {
                        datalist = $(this).find('> a').slice(maxlength, end).clone();
                        if ($mega.find('.menulist-' + ($i + 1)).length != 0) {
                            $mega.find('.menulist-' + ($i + 1)).prepend(datalist);
                        }
                    }
                }
                if ($i != 1) {
                    if ($mega.find('.menulist-' + $i + '> a').eq(0).hasClass('level-2')) {
                        prev = $i - 1;
                        lasttext = $mega.find('.menulist-' + prev + '> a.level-1').last().attr('hreflang');
                        $mega.find('.menulist-' + $i).prepend('<div class="level-continue">' + lasttext + ', Continued</div>');
                    }
                }
                $(this).find('> a').slice(maxlength, end).remove();
            });
            $mega.find('.mega_subcategory').remove();
        });
        /* Click event for brands to see sub menus in mobile */
        $('#brand-tabs-header > ul > li .mobile-main-menu-heading').on('click', function (e) {
            if ($(window).width() <= 959) {
                e.preventDefault();
                var $this = $(this).closest('li');
                $this.closest('ul').addClass('hide-after');
                $this.siblings('li').removeClass('js-sub-menu-active').addClass('js-sub-menu-inactive');
                $this.removeClass('js-sub-menu-inactive').addClass('js-sub-menu-active');
                $this.find('.megamenu-drop').animate({ 'left': [0, 'easeOutExpo'] });
                $this.find('.shop-rapala').each(function () {
                    var $curObj = $(this);
                    if (!$curObj.closest('.sub-category-section-1').hasClass('js-active-sub-menu')) {
                        $curObj.next('.sub-cat-drop-down').trigger('click');
                    }
                });
                $this.find('.menulist .sub-category-section-1 > a').each(function () {
                    var menuList = $(this).closest('.menulist');
                    var mainContent = $(this).closest('.sub-category-section-1');
                    $(mainContent).find('.sub-cat-drop-down').removeAttr('style');
                    var achorWidth = $(this).width();
                    var dropDownWisth = $(menuList).width() - achorWidth;
                    dropDownWisth = dropDownWisth - 70;
                    if (dropDownWisth > 17) {
                        $(mainContent).find('.sub-cat-drop-down').width(dropDownWisth);
                    }
                });
            } else if ($(window).width() > 959 && $(window).width() < 1025) {
                var deviceAgent = navigator.userAgent.toLowerCase(),
                    deviceType = deviceAgent.match(/(iphone|ipod|ipad|android|blackBerry)/);
                if (deviceType[0] == 'iphone' || deviceType[0] == 'ipad') {
                    /*$(".mobile-main-menu-heading > a").removeClass("selected");
                    if(!$(this).hasClass('selected')) {
                        e.preventDefault();
                        megamenu.megamenuEvent();
                        $(this).addClass('selected');
                        return false;
                    }
                    else {
                        return true;
                    }*/
                }
            }
        });
        /* Click event for to see all the brands in mobile */
        $('body').off('click', '.see-all-brands').on('click', '.see-all-brands', function (e) {
            //var $width = $('#brand-tabs-header').width();
            if ($(window).width() <= 959) {
                e.preventDefault();
                var $width = $('#brand-tabs-header').width();
                var $this = $(this).closest('li');
                $this.find('.megamenu-drop').animate({ 'left': [$width, 'easeOutExpo'] });
                $this.siblings('li').removeClass('js-sub-menu-inactive');
                $this.closest('ul').removeClass('hide-after');
                setTimeout(function () {
                    if ($this.find('.megamenu-drop').position().left == $width) {

                        $this.removeClass('js-sub-menu-active');
                    }
                }, 400);
            }
        });

        /* Click event for sub menu drop down in mobile */
        $('body').off('click', '.sub-category-section-1 .sub-cat-drop-down').on('click', '.sub-category-section-1 .sub-cat-drop-down', function (e) {
            if ($(window).width() <= 959) {
                if (!$(this).hasClass('no-click')) {
                    e.preventDefault();
                    var $this = $(this).closest('.sub-category-section-1');
                    if (!$this.hasClass('js-active-sub-menu')) {
                        $this.addClass('js-active-sub-menu');
                        $this.find('.sub-category-section-2').removeAttr('style');
                        $this.find('.sub-category-section-2').slideDown();
                    } else {
                        $this.find('.sub-category-section-2').slideUp();
                        $this.delay(1000).removeClass('js-active-sub-menu');
                    }
                }
            }
        });
        // main menu toggle
        $('body').off('click', '.menu-toggle').on('click', '.menu-toggle', function (e) {
            e.preventDefault();
            if ($(window).width() <= 959) {
                if (!$('#container').hasClass('js-container-active')) {
                    megamenu.open();
                } else {
                    megamenu.close();
                }
            }
        });
        $('body').off('touchstart click', 'a.menu-open-shadow').on('touchstart click', 'a.menu-open-shadow', function (e) {
            e.preventDefault();
            if ($(window).width() <= 959) {
                if (!$('#container').hasClass('js-container-active')) {
                    megamenu.open();
                } else {
                    megamenu.close();
                }
            }
        });
        $('body').off('click', 'a.magnifier-icon').on('click', 'a.magnifier-icon', function (e) {
            e.preventDefault();
            if ($(window).width() <= 959) {
                //var $width = $('#brand-tabs-header').width();
                if (!$('#container').hasClass('js-container-active')) {
                    $('.magnifier-icon').addClass('js-magnifier-icon-active');
                    megamenu.open();
                    if ($('.magnifier-icon').hasClass('js-magnifier-icon-active')) {
                        $('#container').find('.simplesearchinput').focus();
                    }
                }
            }
        });

        // Mega menu events for window width greater than 959
        $('#brand-tabs-header > ul > li').mouseenter(function () {
            var $id = $(this).find('.mobile-main-menu-heading > a').attr('class');
            var $this = $(this);

            if ($(window).width() > 959) {
                $('.owl-carousel').find('.owl-item, .owl-item img').trigger('mouseenter');
                $this.siblings('li').find('.megamenudrop, .megamenu-drop').hide();
                $('.accountcontent').hide();
                clearTimeout(megamenu.globalTimer);
                //megamenu.globalTimer == 0;
                $('#brand-tabs-header li').removeClass('current');
                if ($this.find('.megamenudrop').find('a').length != 0) {
                    $this.find('.megamenudrop').show();
                    $this.find('.megamenu-drop').show();
                    //$('.megamenudrop[id="'+ $id +'"]').closest('.mega-menu').find('.mask').css('left',$(this).offset().left);
                    //$('.megamenudrop[id="'+ $id +'"]').closest('.mega-menu').find('.mask').attr('href',$(this).find('a').attr('href'));
                }
                var containerwidth = $('.megamenu-drop .wrapper').width() / $('#' + $id + ' .menulist').length;
                containerwidth = containerwidth - 21;
                $('#' + $id + ' .menulist').removeAttr('style');
                $('#' + $id + ' .menulist').width(containerwidth);
                megamenu.syncheight($('#' + $id + '.megamenudrop .menulist'));

                $(this).addClass('current');
                if (!$(this).hasClass('active')) {
                    $('#brand-tabs-header li.active').addClass('inactive');
                } else {
                    $(this).removeClass('inactive');
                }
                $('.brand-tabs-header-mask').show();
            }
        }).mouseleave(function () {

            if ($(window).width() > 959) {
                $('.owl-carousel').find('.owl-item, .owl-item img').trigger('mouseout');
                /*var deviceAgent = navigator.userAgent.toLowerCase(),
                deviceType = deviceAgent.match(/(iphone|ipod|ipad|android|blackBerry)/);
                if(deviceType[0] == "iphone" || deviceType[0] == "ipad"){
                    var $this = $(this);
                    $this.find(".mobile-main-menu-heading > a").removeClass('selected');
                }*/
            }
        });

        /** single click redirecting of megamenu categories*/
        /*$('.rapala_device .menulist a').mouseenter(function(){
            window.location.href = $(this).attr('href');
        });*/
        $('#brand-tabs-header').mouseleave(function () {
            if ($(window).width() > 959) {
                $('.megamenu-drop').hide();
                $('.megamenudrop').hide();
                $('#brand-tabs-header > ul > li.active').removeClass('inactive');
                $('#brand-tabs-header > ul > li').removeClass('current');
            }
        });

        $('.brand-tabs-header-mask').mouseenter(function () {
            if ($(window).width() > 959) {
                $('.megamenu-drop').hide();
                $('.megamenudrop').hide();
                $('#brand-tabs-header > ul > li.active').removeClass('inactive');
                $('#brand-tabs-header > ul > li').removeClass('current');
                $(this).hide();
            }
        });

        /*$(".rapala_device #brand-tabs-header a").click(function(e){
            e.preventDefault();
            if($(this).hasClass('selected')){
                $(this).removeClass('selected');
                window.location.href = $(this).attr('href');
            }else{
                $(this).closest("li").siblings().find("a").removeClass('selected');
                $(this).addClass('selected');
            }
        });*/
    },
    syncheight: function syncheight($sel) {
        var current = 0;
        if ($($sel).hasClass('menulist')) {
            $sel.each(function () {
                if ($(this).height() > current) {
                    current = $(this).height();
                }
            });
        } else {
            $sel.each(function () {
                if ($(this).height() > current) {
                    current = $(this).height();
                }
            });
        }
        $sel.height(current);
    }
};

module.exports = megamenu;

},{}],29:[function(require,module,exports){
'use strict';

var util = require('./util');
//bonusProductsView = require('./bonus-products-view');

var timer = {
    id: null,
    clear: function clear() {
        if (this.id) {
            window.clearTimeout(this.id);
            delete this.id;
        }
    },
    start: function start(duration, callback) {
        this.id = setTimeout(callback, duration);
    }
};

var minicart = {
    url: util.ajaxUrl(Urls.addProduct),
    init: function init() {
        minicart.reset();
        $('.checkoutminicart').slimscroll();
        this.$el = $('#minicart');
        this.$content = this.$el.find('.minicartcontent');
        jQuery('.minicarticon-cont').on('mouseover touchstart', function () {
            if (!minicart.isShow()) {
                minicart.hoverSlide();
            }
            $('.Custom-tooltip, .cvc_tooltip, .ordergothrough_tooltip').each(function () {
                if ($('.rapala_device').length == 1) {
                    jQuery(this).tooltipster({
                        content: jQuery(this).find('.tooltipcontainer').html(),
                        contentAsHTML: true,
                        maxWidth: 300,
                        touchDevices: true,
                        trigger: 'click'
                    });
                } else {
                    jQuery(this).tooltipster({
                        content: jQuery(this).find('.tooltipcontainer').html(),
                        contentAsHTML: true,
                        maxWidth: 300,
                        touchDevices: true
                    });
                }
            });
        });
        // register close button event
        $('.minicartcontent .minicartclose').click(function () {
            // reset all the events bindings
            minicart.reset();
            minicart.close(0);
            $('.rapala_device .minicart-button').removeClass('clicked');
        });
        $('.minicartcontent').click(function () {
            clearTimeout(minicart.timer);
            minicart.timer = null;
        });
        $('.minicart').mouseenter(function () {
            minicart.setminicarheight();
            clearTimeout(minicart.timer);
            minicart.timer = null;
            if ($('.minicartcontent').is(':animated')) {
                $('.minicartcontent').stop();
                $('.minicartcontent').css({ 'opacity': '1', 'height': 'auto' });
                minicart.init();
            }
        }).mouseleave(function () {
            $('.rapala_device .minicart-button').removeClass('clicked');
            clearTimeout(minicart.timer);
            minicart.timer = null;
            // after a time out automatically close it
            minicart.timer = setTimeout('minicart.close()', 30);
            minicart.close();
        });

        if ($('.mini-cart-product').length > 1) {
            $('.minicartcontent').removeClass('lessone');
            $('.minicartcontent .slimScrollDiv').removeClass('less');
        } else {
            $('.minicartcontent').addClass('lessone');
            $('.minicartcontent .slimScrollDiv').addClass('less');
        }
    },

    // returns a boolean if a minicart is visible/shown or hidden
    isShow: function isShow() {
        return jQuery('.minicartcontent').css('display') == 'none' ? false : true;
    },

    // reset minicart
    reset: function reset() {
        jQuery('.minicarticon-cont').unbind('hover');
        jQuery('.minicart').unbind('mouseenter').unbind('mouseleave');
    },

    enablehovereffect: function enablehovereffect() {
        jQuery('.minicarttotal').mouseenter(function () {
            minicart.setminicarheight();
            //clearTimeout(minicart.timer);
            //minicart.timer = null;
            timer.clear();
            if ($('.minicartcontent').is(':animated')) {
                $('.minicartcontent').stop();
                $('.minicartcontent').css({ 'opacity': '1', 'height': 'auto' });
                minicart.init();
            }
        });
        jQuery('.minicarttotal').mouseleave(function () {
            jQuery('.minicartcontent').fadeOut(1000);
            $('.rapala_device .minicart-button').removeClass('clicked');
        });
    },
    /**
     * @function
     * @description Shows the given content in the mini cart
     * @param {String} A HTML string with the content which will be shown
     */
    // shows the given content in the mini cart
    show: function show(html) {
        jQuery('#minicart').html(html);
        // bind all the events
        minicart.init();
        if (minicart.suppressSlideDown && minicart.suppressSlideDown()) {
            // do nothing
            // the hook 'MiniCart.suppressSlideDown()' should have done
            // the refresh
        } else {
            minicart.slide();
        }
    },
    setminicarheight: function setminicarheight() {
        var scrollheight = $('.mini-cart-product:eq(0)').height();
        if ($('.mini-cart-product').length > 1) {
            var scrollheight2 = $('.mini-cart-product:eq(1)').height();
            var avgheight = (scrollheight + scrollheight2) / 2;
            var newscrollheight = avgheight + (avgheight - avgheight / 4) + 20;

            $('.slimScrollDiv').css('height', newscrollheight + 'px');
            $('.checkoutminicart').css('height', newscrollheight + 'px');
        } else {
            var heightImg = $('.minibrandcolumn').find('a').height();
            var heightImg1 = $('.minibrandcolumn').find('img').height();

            while (scrollheight < heightImg + heightImg1) {
                heightImg = $('.minibrandcolumn').find('a').height();
                scrollheight = $('.tr_rotation').height();
                $('.slimScrollDiv').css('height', scrollheight + 'px');

                var scrollheight1 = $('.checkoutminicart').height();
                if (scrollheight1 > scrollheight) {
                    $('.checkoutminicart').css('height', scrollheight1 + 'px');
                } else {
                    $('.checkoutminicart').css('height', scrollheight + 'px');
                }
            }
        }
    },
    // hook which can be replaced by individual pages/page types (e.g.
    // cart)
    suppressSlideDown: function suppressSlideDown() {
        return false;
    },
    /**
     * @function
     * @description Slides down and show the contents of the mini cart
     */
    slide: function slide() {
        timer.clear();
        // show the item
        this.$content.slideDown('slow');
        // after a time out automatically close it
        timer.start(6000, this.close.bind(this));

        if (minicart.suppressSlideDown && minicart.suppressSlideDown()) {
            return;
        }
        // register close button event
        jQuery('.minicartcontent .minicartclose').click(function () {
            // reset all the events bindings
            minicart.reset();
            minicart.close(0);
            $('.rapala_device .minicart-button').removeClass('clicked');
        });

        //Removing padding from the banner if it doesnot contains data/image
        if ($('.slot_banner').find('img').length == 0) {
            $('.slot_banner').css('padding', '0 0 0px 0');
        }

        // register the mouseout events
        jQuery('.minicartcontent').mouseenter(function () {
            minicart.setminicarheight();
            clearTimeout(minicart.timer);
            minicart.timer = null;
            if ($(this).is(':animated')) {
                $(this).stop();
                $(this).css({ 'opacity': '1', 'height': 'auto' });
                minicart.init();
            }
        });
        $('.minicart').mouseleave(function () {
            $('.rapala_device .minicart-button').removeClass('clicked');
            clearTimeout(minicart.timer);
            minicart.timer = null;
            // after a time out automatically close it
            minicart.timer = setTimeout('minicart.close()', 30);
            minicart.init();
            minicart.close();
        });

        // show the item
        jQuery('.minicartcontent').slideDown('2000', function () {
            minicart.setminicarheight();
        });
        // show("slide",
        // { direction:
        // "up" },
        // 1000);

        // add the open class to the total
        jQuery('.minicart .minicarttotal').addClass('open');

        jQuery('.summaryproduct').each(function () {
            var $this = jQuery(this);
            var height = '';
            if ($this.find('.imageexpanded').is(':visible')) {
                $this.find('.hideoncollapse').hide().end().find('.attribute').addClass('collapsed');
                height = $(this).find('.attributes').height();
                height += $(this).find('.name').height();
                jQuery(this).find('.image').css({
                    'min-height': height
                });
            }
            if ($this.find('.imagecollapsed').is(':visible')) {
                height = $(this).find('.attributes').height();
                height += $(this).find('.name').height() + 30;
                jQuery(this).find('.image').css({
                    'min-height': height
                });
            }
        });

        clearTimeout(minicart.timer);
        minicart.timer = null;

        // after a time out automatically close it
        minicart.timer = setTimeout('minicart.close()', 1000);

        // Google Analytics code to track mini cart open.
        if (isEventTrackingEnabled && isGoogleAnalyticsEnabled) {
            googleAnalyticsEvents.miniCart();
        }
    },
    hoverSlide: function hoverSlide() {
        if (minicart.suppressSlideDown && minicart.suppressSlideDown()) {
            return;
        }
        // register close button event
        jQuery('.minicartcontent .minicartclose').click(function () {
            // reset all the events bindings
            minicart.reset();
            minicart.close(0);
            $('.rapala_device .minicart-button').removeClass('clicked');
        });

        //Removing padding from the banner if it doesnot contains data/image
        if ($('.slot_banner').find('img').length == 0) {
            $('.slot_banner').css('padding', '0 0 0px 0');
        }

        // register the mouseout events
        jQuery('.minicartcontent').mouseenter(function () {
            minicart.setminicarheight();
            clearTimeout(minicart.timer);
            minicart.timer = null;
            if ($(this).is(':animated')) {
                $(this).stop();
                $(this).css({ 'opacity': '1', 'height': 'auto' });
                minicart.init();
            }
        });
        $('.minicart').mouseleave(function () {
            $('.rapala_device .minicart-button').removeClass('clicked');
            clearTimeout(minicart.timer);
            minicart.timer = null;
            // after a time out automatically close it
            minicart.timer = setTimeout('minicart.close()', 30);
            minicart.close();
        });

        // show the item
        jQuery('.minicartcontent').slideDown('2000', function () {
            minicart.setminicarheight();
        });
        // show("slide",
        // { direction:
        // "up" },
        // 1000);

        // add the open class to the total
        jQuery('.minicart .minicarttotal').addClass('open');

        jQuery('.summaryproduct').each(function () {
            var $this = jQuery(this);
            var height = '';
            if ($this.find('.imageexpanded').is(':visible')) {
                $this.find('.hideoncollapse').hide().end().find('.attribute').addClass('collapsed');
                height = $(this).find('.attributes').height();
                height += $(this).find('.name').height();
                jQuery(this).find('.image').css({
                    'min-height': height
                });
            }
            if ($this.find('.imagecollapsed').is(':visible')) {
                height = $(this).find('.attributes').height();
                height += $(this).find('.name').height() + 30;
                jQuery(this).find('.image').css({
                    'min-height': height
                });
            }
        });

        // Google Analytics code to track mini cart open.
        if (isEventTrackingEnabled && isGoogleAnalyticsEnabled) {
            googleAnalyticsEvents.miniCart();
        }

        jQuery('.minicarttotal').addClass('enablehover');
        minicart.enablehovereffect();

        $('#main , #header , #footernew, #footernew .row').unbind('touchstart').bind('touchstart', function (e) {
            if ($('.minicartcontent').is(':visible')) {
                var currentLinkLength = $(e.target).closest('.minicartcontent').length;
                var minicarttotal = $(e.target).closest('.minicart-button').length;
                if (currentLinkLength === 0 && minicarttotal === 0) {
                    clearTimeout(minicart.timer);
                    minicart.timer = null;
                    // after a time out automatically close it
                    minicart.timer = setTimeout('minicart.close()', 30);
                    minicart.reset();
                    minicart.close();
                    minicart.init();
                    $('.rapala_device .minicart-button').removeClass('clicked');
                } else if (minicarttotal > 0) {
                    $('.rapala_device .minicart-button').trigger('click');
                }
            }
        });
    },
    // adds a product to the mini cart
    // @params
    // progressImageSrc - source/url of the image to show when the item
    // is being added to the cart
    // postdata - form data containing the product information to be
    // added to mini-cart
    // callback - call back function/handler
    add: function add(progressImageSrc, postdata, callback) {
        // get the data of the form as serialized string
        //var postdata = postdata;

        // get button reference
        var addButtons = [];

        // the button to update
        var addButton = null;

        // it is an array of buttons, but we need only one all
        // other combinations are strange so far
        if (addButtons.length == 1) {
            addButton = addButtons[0];
        }

        var previousImageSrc = null;

        // show progress indicator
        if (addButton != null) {
            previousImageSrc = addButton.src;
            addButton.src = progressImageSrc;
        }

        // handles successful add to cart
        var handlerFunc = function handlerFunc(req) {
            // hide progress indicator
            if (addButton != null) {
                addButton.src = previousImageSrc;
            }

            // replace the content
            jQuery('#minicart').html(req);

            // bind all the events
            minicart.init();
            if ($('.mini-cart-product').length > 1) {
                $('.checkoutminicart').slimscroll({
                    railVisible: true,
                    alwaysVisible: true
                });
                $('.minicarttable').find('thead').first().addClass('theadfixedTop');
                $('.checkoutminicart').find('.cartordertotals').removeClass('carttotals');
                $('.checkoutminicart').find('.minicarttable').removeClass('miniwithoutScroll');
                $('.minicartcontent').find('.minicarttableheader').removeClass('miniwithoutScrollhead');
                $('.minicarttableheader').css('border-bottom', '1px solid #ccc');
            } else {
                $('.minicarttable').find('.theadfixedTop').removeClass('theadfixedTop');
                $('.minicarttable').find('.fixedTop').removeClass('fixedTop');
                $('.minicart').find('.cartordertotals').addClass('carttotals');
                $('.checkoutminicart').find('.minicarttable').addClass('miniwithoutScroll');
                $('.minicartcontent').find('.minicarttableheader').addClass('miniwithoutScrollhead');
                $('.minicarttableheader').css('border-bottom', '1px solid #ccc');
            }
            $('.minicarttable .mini-cart-product:last-child').find('.mini-cart-product').css('border', '0px');

            if ($('body').hasClass('rapala_device')) {
                $('.checkoutminicart').find('.minicarttable').removeClass('miniwithoutScroll');
                // $(".minicarttable .tr_rotation:last-child").find('.minirow').css('border','1px');
                $('.minicarttable').find('thead').first().addClass('theadfixedTop');
                $('.minicarttable .mini-cart-product:last-child').find('.mini-cart-product').css('border', '0px');
                $('.minicarttableheader').css('border-bottom', '1px solid #ccc');
            }

            if (minicart.suppressSlideDown && minicart.suppressSlideDown()) {
                // do nothing
                // the hook 'MiniCart.suppressSlideDown()' should have
                // done the refresh
            } else {
                minicart.slide();
                minicart.setminicarheight();
                if (callback) {
                    callback();
                }
            }
            $('#pdpMain .addtocartconfirm-tooltip').fadeIn(400).show().delay(1500).fadeOut(400);
            // fire the BonusDiscountLineItemCheck event so we can check
            // if there is a bonus discount line item
            /*eslint-disable */
            jQuery(document).trigger(jQuery.Event('BonusDiscountLineItemCheck'));
            /*eslint-enable */
        };

        // handles add to cart error
        var errFunc = function errFunc() {
            // hide progress indicator
            if (addButton != null) {
                addButton.src = previousImageSrc;
            }
        };

        // closes a previous mini cart
        minicart.close();

        // add the product
        jQuery.ajax({
            type: 'POST',
            url: minicart.url,
            cache: true,
            data: postdata,
            success: handlerFunc,
            error: errFunc
        });
    },

    // closes the mini cart with given delay
    close: function close(delay) {
        if (minicart.timer != null || delay == 0) {
            clearTimeout(minicart.timer);
            minicart.timer = null;
            jQuery('.minicartcontent').fadeOut(1000);
            // hide with "slide" causes to fire mouse enter/leave events
            // sometimes infinitely thus changed it to fadeOut
            // add the open class to the total
            jQuery('.minicart .minicarttotal').removeClass('open');
            jQuery('.minicartcontent .minicartclose').unbind('click');
        }
    }
};

module.exports = minicart;

},{"./util":63}],30:[function(require,module,exports){
'use strict';

var util = require('./util');

var page = {
    title: '',
    type: '',
    params: util.getQueryStringParams(window.location.search.substr(1)),
    redirect: function redirect(newURL) {
        setTimeout(function () {
            window.location.href = newURL;
        }, 0);
    },
    refresh: function refresh() {
        setTimeout(function () {
            window.location.assign(window.location.href);
        }, 500);
    }
};

module.exports = page;

},{"./util":63}],31:[function(require,module,exports){
'use strict';

var giftcert = require('../giftcert'),
    tooltip = require('../tooltip'),
    util = require('../util'),
    dialog = require('../dialog'),
    page = require('../page'),
    validator = require('../validator');

/**
 * @function
 * @description Initializes the events on the address form (apply, cancel, delete)
 * @param {Element} form The form which will be initialized
 */
function initializeAddressForm() {
    var $form = $('#edit-address-form');

    $form.find('input[name="format"]').remove();
    tooltip.init();
    //$("<input/>").attr({type:"hidden", name:"format", value:"ajax"}).appendTo(form);

    $form.on('click', '.apply-button', function (e) {
        e.preventDefault();
        if (!$form.valid()) {
            return false;
        }
        var url = util.appendParamToURL($form.attr('action'), 'format', 'ajax');
        var applyName = $form.find('.apply-button').attr('name');
        var options = {
            url: url,
            data: $form.serialize() + '&' + applyName + '=x',
            type: 'POST'
        };
        $.ajax(options).done(function (data) {
            if (typeof data !== 'string') {
                if (data.success) {
                    dialog.close();
                    page.refresh();
                } else {
                    window.alert(data.message);
                    return false;
                }
            } else {
                $('#dialog-container').html(data);
                account.init();
                tooltip.init();
            }
        });
    }).on('click', '.cancel-button, .close-button', function (e) {
        e.preventDefault();
        dialog.close();
    }).on('click', '.delete-button', function (e) {
        e.preventDefault();
        if (window.confirm(String.format(Resources.CONFIRM_DELETE, Resources.TITLE_ADDRESS))) {
            var url = util.appendParamsToUrl(Urls.deleteAddress, {
                AddressID: $form.find('#addressid').val(),
                format: 'ajax'
            });
            $.ajax({
                url: url,
                method: 'POST',
                dataType: 'json'
            }).done(function (data) {
                if (data.status.toLowerCase() === 'ok') {
                    dialog.close();
                    page.refresh();
                } else if (data.message.length > 0) {
                    window.alert(data.message);
                    return false;
                } else {
                    dialog.close();
                    page.refresh();
                }
            });
        }
    });
    if ($('.logerror:visible').length > 0) {
        $('.account-logs .returningcustomers').find('.accountemail').addClass('errorclient');
        $('.account-logs .logincustomers .login_password').addClass('errorclient');
        //$(".pt_account .wrapper .account-section .returningcustomers .value ").css("margin-bottom", "0");
    }
    $('.registration-button').click(function () {
        var maskheight = $('.createan-account .formsubmit').parent('div').outerHeight();
        var realForm = jQuery(this).closest('form');
        if (!realForm.valid()) {
            $(this).closest('.form-row').addClass('inputlabel');
            realForm.find('.max-length-error').each(function () {
                if ($(this).closest('.value').find('input').val().length > 0) {
                    realForm.find('.max-length-error').remove();
                }
            });
            return false;
        } else {
            $('.registration-button span.loadImage').css('display', 'block');
            $('.createan-account .formsubmit').css({ 'height': maskheight + 'px', 'display': 'block' });
        }
    });
    if ($('.existing_register:visible').length > 0) {
        $('.createan-account .registration').find('.accountemail').addClass('errorclient');
        $('.createan-account .registration').find('.formfield_email').find('.labeltext').addClass('inputlabel');
        $('.createan-account .registration').find('.formfield_email').find('.requiredindicator').addClass('inputlabel');
        if ($('.registration').find('input.required').val().length > 0) {
            $('.registration').find('.clearbutton').show();
        }
    }
    if ($('.account-email.err.log_error:visible').length > 0) {
        $('.returningcustomers').find('.formfield_email').find('.labeltext').addClass('inputlabel');
        $('.returningcustomers').find('.formfield_email').find('.requiredindicator').addClass('inputlabel');
    }
    $('.signinbtn').click(function () {
        var maskheight = $('.account-logs .formsubmit').parent('div').outerHeight();
        var maskheightwishlist = $('.wish-logs .formsubmit').parent('div').outerHeight();
        var realForm = jQuery(this).closest('form');
        if (!realForm.valid()) {
            return false;
        } else {
            //$(this).closest('.formactions').addClass('loadImage');
            $('.signinbtn span.loadImage').css('display', 'block');
            $('.account-logs .formsubmit').css({ 'height': maskheight + 'px', 'display': 'block' });
            $(this).closest('.wish-logs').find('.formsubmit').css({
                'height': maskheightwishlist + 'px',
                'display': 'block'
            });
        }
    });
    if ($('.ui-login .header-forgot-pwd').length > 0) {
        $(this).find('input.required').bind('keydown keyup focusin focusout keypress', function () {
            //e.stopPropagation();
            $(this).closest('.value').find('errorclient').remove();
        });
        $('.ui-login header-forgot-pwd').find('input.required').bind('focusin', function () {
            $(this).closest('.value').find('errorclient').remove();
        });
    }
    $('.sample-section').click(function () {
        if (!$(this).find('.sample_mail_main').is(':visible')) {
            $(this).find('.sample_mail_main').slideDown(500);
        }
    });
    validator.init();
}

/**
 * @private
 * @function
 * @description Toggles the list of Orders
 */
function toggleFullOrder() {
    $('.order-items').find('li.hidden:first').prev('li').append('<a class="toggle">View All</a>').children('.toggle').click(function () {
        $(this).parent().siblings('li.hidden').show();
        $(this).remove();
    });
}

/**
 * @private
 * @function
 * @description Binds the events on the address form (edit, create, delete)
 */
function initAddressEvents() {
    var addresses = $('#addresses');
    if (addresses.length === 0) {
        return;
    }

    addresses.on('click', '.address-edit, .address-create', function (e) {
        e.preventDefault();
        dialog.open({
            url: this.href,
            options: {
                dialogClass: 'addressadd',
                open: initializeAddressForm
            }
        });
    }).on('click', '.delete', function (e) {
        e.preventDefault();
        if (window.confirm(String.format(Resources.CONFIRM_DELETE, Resources.TITLE_ADDRESS))) {
            $.ajax({
                url: util.appendParamToURL($(this).attr('href'), 'format', 'ajax'),
                dataType: 'json'
            }).done(function (data) {
                if (data.status.toLowerCase() === 'ok') {
                    page.redirect(Urls.addressesList);
                } else if (data.message.length > 0) {
                    window.alert(data.message);
                } else {
                    page.refresh();
                }
            });
        }
    });
}

/**
 * @private
 * @function
 * @description Binds the events of the payment methods list (delete card)
 */
function initPaymentEvents() {
    $('.add-card').on('click', function (e) {
        e.preventDefault();
        dialog.open({
            //PREVAIL-Added  to handle validation issues
            url: $(e.target).attr('href'),
            options: {
                dialogClass: 'payment-settings',
                open: initializePaymentForm
            }
        });
    });

    var paymentList = $('.payment-list');
    if (paymentList.length === 0) {
        return;
    }

    util.setDeleteConfirmation(paymentList, String.format(Resources.CONFIRM_DELETE, Resources.TITLE_CREDITCARD));

    $('form[name="payment-remove"]').on('submit', function (e) {
        e.preventDefault();
        // override form submission in order to prevent refresh issues
        var button = $(this).find('.delete');
        $('<input/>').attr({
            type: 'hidden',
            name: button.attr('name'),
            value: button.attr('value') || 'delete card'
        }).appendTo($(this));
        var data = $(this).serialize();
        $.ajax({
            type: 'POST',
            url: $(this).attr('action'),
            data: data
        }).done(function () {
            page.redirect(Urls.paymentsList);
        });
    });
}

function initializePaymentForm() {

    $('#CreditCardForm').on('click', '.cancel-button', function (e) {
        e.preventDefault();
        dialog.close();
    });
}

/**
 * @private
 * @function
 * @description init events for the loginPage
 */
function initLoginPage() {
    //o-auth binding for which icon is clicked
    $('.oAuthIcon').bind('click', function () {
        $('#OAuthProvider').val(this.id);
    });

    //toggle the value of the rememberme checkbox
    $('#dwfrm_login_rememberme').bind('change', function () {
        if ($('#dwfrm_login_rememberme').attr('checked')) {
            $('#rememberme').val('true');
        } else {
            $('#rememberme').val('false');
        }
    });
}

/**
 * @private
 * @function
 * @description Binds the events of the order, address and payment pages
 */
function initializeEvents() {
    initializeAddressForm(); // JIRA PREV-63: 'Add Address' or 'Edit address' overlay changing to page after click on Apply button,when there is an error message on overlay.
    toggleFullOrder();
    initAddressEvents();
    initPaymentEvents();
    initLoginPage();
    if ($('.server-error').length > 0) {
        $(window).scrollTop($('.server-error').offset().top);
    }
    $('body').on('change input', '.desktop-accesscode', function () {
        var curValue = $(this).val();
        $('body').find('.mobile-accesscode').val(curValue);
        $('body').find('.mobile-accesscode').attr('value', curValue);
    });
    $('body').on('change input', '.mobile-accesscode', function () {
        var curValue = $(this).val();
        $('body').find('.desktop-accesscode').val(curValue);
        $('body').find('.desktop-accesscode').attr('value', curValue);
    });
}

var account = {
    init: function init() {
        initializeEvents();
        giftcert.init();
    },
    initCartLogin: function initCartLogin() {
        initLoginPage();
    }
};

module.exports = account;

},{"../dialog":23,"../giftcert":25,"../page":30,"../tooltip":61,"../util":63,"../validator":64}],32:[function(require,module,exports){
'use strict';

/**
 * @function Initializes the page events depending on the checkout stage (shipping/billing)
 */

exports.init = function () {
    var $blogLeftNav = $('#blog-left-nav'),
        $blogShowNav = $('#blog-nav-show');

    $blogLeftNav.on('click', '.arrow-light-container', function () {
        $(this).parents('.toggle-blog').toggleClass('expanded');
    });

    $blogShowNav.on('click', function () {
        $(this).toggleClass('active');
        $blogLeftNav.toggleClass('active');
    });
    $blogLeftNav.find('.blog-nav-level-2 li').each(function () {
        if ($(this).hasClass('active')) {
            $(this).parents('.toggle-blog').addClass('expanded');
        }
    });
};

},{}],33:[function(require,module,exports){
'use strict';

var account = require('./account'),
    bonusProductsView = require('../bonus-products-view'),
    quickview = require('../quickview'),
    validator = require('../validator'),
    cartStoreInventory = require('../storeinventory/cart');

/**
 * @private
 * @function
 * @description Binds events to the cart page (edit item's details, bonus item's actions, coupon code entry)
 */

function initQuickViewrecommButtons() {
    var $qvButton = $('.pt_cart .producttile #quickviewbutton');
    var $link = $(this).find('.thumb-link');
    $qvButton.attr({
        'href': $link.attr('href'),
        'title': $link.attr('title')
    }).appendTo(this);
    $qvButton.off('click').on('click', function (e) {
        e.preventDefault();
        quickview.show({
            url: $(this).attr('href').split('#')[0], //PREV JIRA PREV-255 :PLP: On Click Quick view navigating to a wrong page when user first changes the swatches. Taking only href.
            source: 'quickview'
        });
    });
}

function initQuickVieweditButtons() {
    var $qvButton = $('.pt_cart  table#cart-table td.itemtotalcolumn.cartactions .item-edit-details #quickviewbutton');
    var $link = $(this);
    $qvButton.attr({
        'href': $link.attr('href'),
        'title': $link.attr('title')
    }).appendTo(this);
    $qvButton.off('click').on('click', function (e) {
        e.preventDefault();
        quickview.show({
            url: $(this).attr('href').split('#')[0], //PREV JIRA PREV-255 :PLP: On Click Quick view navigating to a wrong page when user first changes the swatches. Taking only href.
            source: 'quickview'
        });
    });
}

function initializeEvents() {
    quickview.init();
    validator.init();
    initQuickViewrecommButtons();
    initQuickVieweditButtons();
    $('#cart-table').on('click', '.bonus-item-actions a, .item-details .bonusproducts a', function (e) {
        e.preventDefault();
        bonusProductsView.show(this.href);
    });
    /* used to slide toggle event in cart page promo code*/
    if ($('.pt_cart').length > 0) {
        $(this).find('.applycoupon .label').text('Have a Promo Code?');
        $('.couponcode .label').click(function () {
            var $curObj = $(this);
            var fieldSection = '';
            if ($(this).hasClass('pre_label')) {

                fieldSection = $curObj.closest('.cart-coupon-code').find('.promo-sec.pre-promo');
                if ($(fieldSection).is(':visible') == true) {
                    $(fieldSection).slideUp();
                } else {
                    $(fieldSection).slideDown();
                }
            } else if ($(this).hasClass('post-couponcode')) {
                fieldSection = $curObj.closest('.cart-coupon-code').find('.promo-sec.bottom-promo-section');
                if ($(fieldSection).is(':visible') == true) {
                    $(fieldSection).slideUp();
                } else {
                    $(fieldSection).slideDown();
                }
            }
        });
        var $curObj = $('.couponcode .label.post-couponcode');
        var fieldSection = $curObj.closest('.cart-coupon-code').find('.promo-sec.bottom-promo-section');
        if ($(fieldSection).length > 0) {
            if ($('.promo-sec.bottom-promo-section .error').length > 0) {
                $(fieldSection).slideDown();
                $('.promo-sec.bottom-promo-section').find('.couponinput').addClass('inputlabel');
                if ($(window).width() < 481) {
                    $('body, html').animate({
                        scrollTop: $('.couponcode .label.post-couponcode').offset().top
                    }, 600);
                }
            }
        }
        var $curObjtop = $('.couponcode .label.pre_label');
        var fieldSectiontop = $curObjtop.closest('.cart-coupon-code').find('.promo-sec.pre-promo');
        if ($(fieldSectiontop).length > 0) {
            if ($('.promo-sec.pre-promo .error').length > 0) {
                $(fieldSectiontop).slideDown();
                $('.promo-sec.pre-promo').find('.couponinput').addClass('inputlabel');
                $('body, html').animate({
                    scrollTop: $('.couponcode .label.pre_label').offset().top
                }, 600);
            }
        }
    }
    $('.promo-sec').find('.couponinput').click(function () {
        $('.promo-sec').find('.couponinput').removeClass('inputlabel');
    });

    var cartpromo = $('.pt_cart .upshift.cell.contentbox .contentboxcontent table#cart-table tr.cart-row td.itemtotalcolumn');
    cartpromo.each(function () {
        if ($(this).find('.promo-adjustment').length >= 1) {
            $(this).addClass('promodiv');
        } else {
            $(this).removeClass('promodiv');
        }
    });

    $('body').on('click', '.cartcoupon-apply', function () {
        var $curObj = $('.couponcode .label');
        var fieldSection = '';
        if ($(this).closest('.bottom-promo-section').length > 0) {
            $('.promo-applied-position').val('bottomsection');
            $('.promo-applied-position').attr('value', 'bottomsection');
            fieldSection = $curObj.closest('.cart-coupon-code').find('.promo-sec.bottom-promo-section');
            if ($(fieldSection).length > 0) {
                if ($('.error').length > 0) {
                    $(fieldSection).slideDown();
                    $('.promo-sec.bottom-promo-section').find('.couponinput').addClass('inputlabel');
                }
            }
        } else if ($(this).closest('.top-promo-section').length > 0) {
            $('.promo-applied-position').val('topsection');
            $('.promo-applied-position').attr('value', 'topsection');
            fieldSection = $curObj.closest('.cart-coupon-code').find('.promo-sec.top-promo-section');
            if ($(fieldSection).length > 0) {
                if ($('.error').length > 0) {
                    $(fieldSection).slideDown();
                    $('.promo-sec.top-promo-section').find('.couponinput').addClass('inputlabel');
                }
            }
        }
    });
    $('.pt_cart .cartrecommads_cont').css('height', '44px');
    // override enter key for coupon code entry
    $('form input.couponinput').on('keydown', function (e) {
        if (e.which === 13) {
            e.preventDefault();
            $(this).closest('form').find('.cartcoupon-apply').click();
        } // JIRA PREV-30 : Cart page:  Coupon Code is not applying, when the user hit enter key.
    });

    $('body').on('change,input', function () {
        var $curObj = $(this);
        $('body').find('.couponinput').val($curObj.val());
        $('body').find('.couponinput').attr('value', $curObj.val());
    });
    //to prevent multiple submissions of the form when removing a product from the cart
    var removeItemEvent = false;
    $('button[name$="deleteProduct"]').on('click', function (e) {
        if (removeItemEvent) {
            e.preventDefault();
        } else {
            removeItemEvent = true;
        }
    });
    var owl = $('.owl-carousel');
    owl.owlCarousel({
        items: 3,
        slideBy: 3,
        rewind: true,
        nav: true,
        loop: true,
        dots: false
    });
}

exports.init = function () {
    initializeEvents();
    if (SitePreferences.STORE_PICKUP) {
        cartStoreInventory.init();
    }
    account.initCartLogin();
};

},{"../bonus-products-view":17,"../quickview":54,"../storeinventory/cart":57,"../validator":64,"./account":31}],34:[function(require,module,exports){
'use strict';

var util = require('../../util'),
    uievents = require('../../uievents'),
    shipping = require('./shipping');

/**
 * @function
 * @description Selects the first address from the list of addresses
 */
exports.init = function () {
    var $form = $('.address');
    // select address from list
    $('select[name$="_addressList"]', $form).on('change', function () {
        var selected = $(this).children(':selected').first();
        var selectedAddress = $(selected).data('address');
        if (!selectedAddress) {
            if ($('.checkout').hasClass('billingsection')) {
                $('.addressoptions-addToAddressBook,.addressoptions-makedefault ').removeClass('hide');
                $('input[name$=\'shippingAddress_selectedaddress\']').val('');
                $('.selected-shipping-address').empty();
                $('input[name$=\'_addressid\']').val('');
                $('input[name$=\'_addressFields_firstName\']').val('');
                $('input[name$=\'_addressFields_lastName\']').val('');
                $('input[name$=\'_addressFields_address1\']').val('');
                $('input[name$=\'_addressFields_address2\']').val('');
                $('input[name$=\'_addressFields_city\']').val('');
                $('input[name$=\'_addressFields_postal\']').val('');
                $('input[name$=\'_addressFields_phone\']').val('');
                uievents.changeFormSelection(jQuery('select[name$=\'_addressFields_states_state\']')[0], '');
                uievents.changeFormSelection(jQuery('select.address-select')[0], '');
                $('.shipping-address-field-section').removeClass('hide');
                $('.selected-shipping-address, .new-address-field, .edit-address-field').addClass('hide');
                $('input[name$=\'_addressFields_phone\']').closest('div.phone').find('span.errorclient').remove();
                $('input[name$=\'_addressFields_postal\']').closest('div.zip').find('span.errorclient').remove();
                $('.addressform .form-row.custom-select').removeClass('customselect-error');
                $('.custom-select').each(function () {
                    var selectVal = $(this).find(':selected').text();
                    $(this).find('.selectorOut').text(selectVal);
                });
                $('a.clearbutton').hide();
                $('.shipping-address-field-section .form-row').find('input').removeClass('errorclient');
                uievents.customFields();
            } else {
                $('.selected-shipping-address, .new-address-field').addClass('hide');
                $('.shipping-address-field-section').removeClass('hide');
            }
            uievents.synccheckoutH();
            return;
        }
        $('.selected-shipping-address').empty();
        if (selectedAddress.address2 == null) {
            selectedAddress.address2 = '';
        }
        $('.selected-shipping-address').append(selectedAddress.firstName + ' ' + selectedAddress.lastName + '<br/>' + selectedAddress.address1 + ' ' + selectedAddress.address2 + '<br/>' + selectedAddress.city + ' ' + selectedAddress.stateCode + ' ' + selectedAddress.postalCode + '<br/>' + selectedAddress.phone);
        if ($('.checkout').hasClass('billingsection')) {
            var editAddressObject = {
                firstName: selectedAddress.firstName,
                lastName: selectedAddress.lastName,
                address1: selectedAddress.address1,
                address2: selectedAddress.address2,
                postalCode: selectedAddress.postalCode,
                city: selectedAddress.city,
                stateCode: selectedAddress.stateCode,
                countryCode: 'US',
                phone: selectedAddress.phone
            };
            $('.new-address-field').addClass('hide');
            $('.edit-address-field').attr('data-address', editAddressObject);
            $('.selected-shipping-address, .edit-address-field').removeClass('hide');
        } else {
            $('.selected-shipping-address, .new-address-field').removeClass('hide');
        }
        $('.shipping-address-field-section').addClass('hide');
        util.fillAddressFields(selectedAddress, $form);
        $('body').find('input[name$=_sameasshippingaddress]').removeAttr('checked');
        $('body').find('input[name$=_sameasshippingaddress]').closest('.custom-checkbox').find('.custom-link').removeClass('active');
        uievents.synccheckoutH();
        shipping.updateShippingMethodList();
        // re-validate the form
        /* JIRA PREV-95 : Highlighting the Credit card  details field, when the user select any saved address from the 'Select An Address' drop down.
           (logged-in user) .Commented to prevent form from re-validation.
        */
        //$form.validate().form();
    });
    /* if($("body").find("input[name$=_sameasshippingaddress]").is(":checked")) {
          var pageLoadSelectedAddress = $('select[name$="_addressList"]').children(':selected').first();
             var onPageLoadSelectedAddress = $(pageLoadSelectedAddress).data('address');
             if (!onPageLoadSelectedAddress) {
                 $(".selected-shipping-address, .new-address-field").addClass("hide");
                 return;
             }
             else {
                 var selectedAddress = onPageLoadSelectedAddress;
                 $(".selected-shipping-address").empty();
                 $(".selected-shipping-address").append(selectedAddress.firstName+" "+selectedAddress.lastName+"<br/>"+selectedAddress.address1+" "+selectedAddress.address2+"<br/>"+selectedAddress.city+" "+selectedAddress.stateCode+" "+selectedAddress.postalCode+"<br/>"+selectedAddress.phone);
                 $(".selected-shipping-address, .new-address-field").removeClass("hide");
                 $(".shipping-address-field-section").addClass("hide");
             }
       }*/
};

},{"../../uievents":62,"../../util":63,"./shipping":39}],35:[function(require,module,exports){
'use strict';

var ajax = require('../../ajax'),

//formPrepare = require('./formPrepare'),
uievents = require('../../uievents'),
    tooltip = require('../../tooltip'),
    progress = require('../../progress'),
    validator = require('../../validator'),

//giftcard = require('../../giftcard'),
util = require('../../util');

/**
 * @function
 * @description updates the order summary based on a possibly recalculated basket after a shipping promotion has been applied
 */
var flageallotmentcover = $('input.flageallotmentcover').val();
var allotmentAmount = parseInt($('input.allotmentAmount').val(), 10);
var couponMenthods = {
    updateSummary: function updateSummary() {
        var $summary = $('#secondary .new-summery-cart');
        // indicate progress
        $(function () {
            if (navigator.userAgent.match(/Trident\/7\./)) {
                $summary.append('<div class="loader"><div class="loader-indicator"></div><div class="loader-bg"></div></div>');
            }
        });
        progress.show($summary);
        var stateValue = $('body').find('.shipping-state').val();
        var url = util.appendParamToURL(Urls.summaryRefreshURL, 'selectedState', stateValue);
        // load the updated summary area
        $summary.load(url, function () {
            // hide edit shipping method link
            $summary.fadeIn('fast');
            $summary.find('.checkout-mini-cart .minishipment .header a').hide();
            $summary.find('.order-totals-table .order-shipping .label a').hide();
            uievents.synccheckoutH();
        });
    },
    updatecartsummary: function updatecartsummary() {
        var url = util.appendParamToURL(Urls.UpdateCartSummary);
        // load the updated cart summary area
        jQuery.ajax({
            url: url,
            dataType: 'html',
            success: function success(data) {
                jQuery('.ajax-cartsummary').html(data);
                uievents.synccheckoutH();
            }
        });
    },
    setCouponRedemptionInfo: function setCouponRedemptionInfo(redemption) {
        if (!redemption) {
            return;
        }
        //var redeemMsg = "${Resource.msg('billing.couponnotapplied','checkout',null)}";
        //if(redemption.applied) redeemMsg = "${Resource.msg('billing.couponapplied','checkout',null)}";
        //jQuery("${'#'}couponentry .redemption").append("<div class=\"discount-success\">${Resource.msg('billing.couponlabel','checkout',null)} <span class=\"submitedcoupon\">" + redemption.couponCode + "</span> " + redeemMsg + "<button  value="+redemption.couponCode+" class='removecoupon'>Remove</button></div>");
        var url = util.appendParamToURL(Urls.SuccessDisplayCoupon);
        jQuery.get(url, function (data) {
            jQuery('#couponentry .redemption').html(data);
            uievents.synccheckoutH();
        });
    },
    setCouponError: function setCouponError(msg) {
        var $couponcode = jQuery('input[name$=\'_billing_couponCode\']').closest('.couponcode');
        if (!msg) {
            jQuery('#couponentry span.error').remove();
            return;
        }
        if ($couponcode.find('span.error').length == 0) {
            $('input[name$=\'_billing_couponCode\']').closest('.couponcode').append('<span class=\'error\'><\/span>');
        }
        $couponcode.find('span.error').html(msg);
        jQuery('input[name$=\'_billing_couponCode\']').addClass('errorclient');
    },
    setGiftCertError: function setGiftCertError(msg) {
        var $redeemcode = jQuery('input[name$=\'_billing_giftCertCode\']').closest('.giftcertfields');
        if (!msg) {
            jQuery('.giftcertfields .error').remove();
            jQuery('input[name$=\'_billing_couponCode\']').removeClass('errorclient');
            return;
        }
        if ($redeemcode.find('span.error').length == 0) {
            jQuery('input[name$=\'_billing_giftCertCode\']').closest('.giftcertfields').append('<span class=\'error\'><\/span>');
        }
        $redeemcode.find('span.error').html(msg);
        jQuery('input[name$=\'_billing_giftCertCode\']').addClass('errorclient');
        //jQuery("input[name=${pdict.CurrentForms.billinggiftcert.giftCertCode.htmlName}]").parent().append("<span class=\"errormessage\">" + msg + "<\/span>");
    },
    //refresh CC form
    refreshCC: function refreshCC() {
        var url = util.appendParamToURL(Urls.ClearCCForm);
        jQuery.ajax({
            url: url,
            dataType: 'html',
            success: function success() {
                uievents.synccheckoutH();
            }
        });
    },
    setPaymentSection: function setPaymentSection(orderBalance) {

        /*if(!orderBalance) {
            return;
        }*/

        if (orderBalance <= 0) {
            //Clearing the CC Form if the remaining balance after allotment and GC is zero
            couponMenthods.refreshCC();

            // if the whole order total was paid with gift certs then hide other payment methods and show a message
            $('#paymentmethods').hide();
            $('.continuecheckoutbutton .continuecheckout').removeAttr('disabled');
            // if the order total is zero, determine was it because of the gift certificate use or a promotion? and show appropriate message
            if (flageallotmentcover == 'true') {
                $('.giftcertused').addClass('allotmentcover');
                $('.giftcertused').html('<p class=\'first-para\'>Your allotment balance will cover the full cost of this order.</p><p>No further payment will be necessary.</p>').show();
            } else {
                if (allotmentAmount > 0) {
                    $('.giftcertused').addClass('allotmentcover');
                    var allotmentMessage = '<div class="greater-than-767"><p class="first-para">Your allotment balance will cover the full cost of this order.</p><p>No further payment will be necessary.</p></div><div class="less-than-767"><p>Your allotment balance will cover the full cost of this order. No further payment will be necessary.</p></div>';
                    $('.giftcertused').html(allotmentMessage).show();
                } else {
                    $('.giftcertused').addClass('merchantcover').html($('.giftcertpi').length > 0 ? '<p class=\'first-para\'>' + Resources.GIFTCERT_NO + '</p>' : '<p class=\'first-para\'>' + Resources.ZERO_BALANCE + '</p>').show();
                }
            }
            $('.cardnotworking').hide();
        }
        if (orderBalance > 0 && $('input[name$="paymentMethods_selectedPaymentMethodID"]:checked').val() == 'CREDIT_CARD') {
            $('.cardnotworking').show();
        } else {
            $('.cardnotworking').hide();
        }
    },
    ordertotals: function ordertotals() {
        var url = Urls.GetOrderTotalJson;
        ajax.getJson({
            url: url,
            callback: function callback(data) {
                if (data.Total.OrderTotal.indexOf('0.00') != -1) {
                    couponMenthods.setPaymentSection('0.0');
                } else {
                    $('#paymentmethods').show();
                    jQuery('.giftcertused ').removeClass('merchantcover').hide();
                }
                uievents.synccheckoutH();
            }
        });
    },
    removeGiftCertificate: function removeGiftCertificate(giftCertificateId) {
        jQuery('.balance').empty();
        // remove gift certificate
        var url = util.appendParamToURL(Urls.RemoveGiftCertificate, 'giftCertificateID', giftCertificateId);
        ajax.getJson({
            url: url,
            callback: function callback(data) {
                if (!data || !data.giftCertificate || !data.giftCertificate.removed) {
                    couponMenthods.setGiftCertError(Resources.GIFTCERT_ERROR);
                    return false;
                }
                // remove message in UI
                $('#gc-' + giftCertificateId).remove();
                // reinstate payment methods section which might have been hidden if the whole order was paid with gift certs
                if (!flageallotmentcover) {
                    $('#paymentmethods').show();
                }
                // hide gift cert used for otder total message
                if (!flageallotmentcover) {
                    jQuery('.giftcertused').hide();
                }
                //commenting this since we don't need to clear the payment form on applying GC as in order CC fields are first.
                //var countryCode = jQuery("input[name=${pdict.CurrentForms.billing.billingAddress.addressFields.country.htmlName}]").val();
                //updatePaymentMethods( countryCode );
                var countryCode = jQuery('input[name$=\'addressFields_country\']').val();
                if (typeof countryCode == 'undefined') {
                    countryCode = 'US';
                }
                couponMenthods.updatePaymentMethods(countryCode);
                couponMenthods.updateSummary();
                couponMenthods.ordertotals();
                uievents.synccheckoutH();
                if ($('#paymentmethods .toggle').eq(0).hasClass('active')) {
                    $('.cardnotworking').show();
                }
            }
        });
    },
    bindGiftCertificateRemoval: function bindGiftCertificateRemoval() {
        $('#giftcertentry a.remove').unbind('click').bind('click', function () {
            var gcId = util.trimPrefix($(this).attr('id'), 'rgc-');
            couponMenthods.removeGiftCertificate(gcId);
            uievents.synccheckoutH();
            return false;
        });
    },
    setGiftCertRedemptionInfo: function setGiftCertRedemptionInfo(giftCertificateId, amountExpr) {

        if (!giftCertificateId || !giftCertificateId) {
            return;
        }
        $('#gc-' + giftCertificateId).remove();
        /*jQuery("${'#'}giftcertentry .redemption").append("<div class='success giftcertpi' id='gc-"+ giftCertificateId+"'><div class='gcremove discount-success'><div class='gcremove_icon'><a id='rgc-"+giftCertificateId +"' class='remove' href='${'#'}'><img src='${URLUtils.staticURL('/images/icon_remove.gif')}' alt='${Resource.msg('global.remove','locale',null)}'/></a></div><div class='gc_idlabel'>${Resource.msg('minibillinginfo.giftcertificate','checkout',null)} - "+giftCertificateId+" </div><div class='gcredeemamount'>"+'-'+""+amountExpr+"</div></div><div class='gcdiscapplied'>"+ amountExpr+" "+' '+" ${Resource.msg('billing.giftcertredeemed','checkout',null)}</div></div>");*/
        $('#giftcertentry .redemption').append('<div class=\'success giftcertpi\' id=\'gc-' + giftCertificateId + '\'><div class=\'gcremove discount-success\'><div class=\'gc_idlabel\'>' + giftCertificateId + ' </div><div class=\'gcredeemamount\'>' + ' - ' + '' + amountExpr + ' ' + Resources.GIFT_CERTIFICATE_CREDIT + '</div><div class=\'gcremove_icon\'><a id=\'rgc-' + giftCertificateId + '\' class=\'remove\' href=\'#\'><span>' + Resources.REMOVE + '</span></a></div></div></div>');
        $('.giftcertfields').css({ 'display': 'none' });
        couponMenthods.bindGiftCertificateRemoval();
    },
    // initializes the payment method forms
    initPaymentMethodSelection: function initPaymentMethodSelection() {

        // get selected payment method from payment method form
        var paymentMethodID = jQuery('input[name$=\'_selectedPaymentMethodID\']:checked').val();
        if (!paymentMethodID) {
            // if necessary fall back to default payment method (first non-gift-certificate method)
            paymentMethodID = $('input[value=\'CREDIT_CARD\']').attr('id');
        }

        // show payment method section
        couponMenthods.changePaymentMethod(paymentMethodID);
    },
    // changes the payment method form
    changePaymentMethod: function changePaymentMethod(paymentMethodID) {
        //if (jQuery(".giftcertused").css("display") != "none") return;
        /*
           jQuery(".paymentform").hide();
           jQuery("#PaymentMethod_" + paymentMethodID).show();
           if( jQuery("#PaymentMethod_" + paymentMethodID).length == 0 )
           {
               jQuery("#PaymentMethod_Custom").show();
           }
             // ensure checkbox of payment method is checked
           jQuery("#is-" + paymentMethodID).attr("checked", true);
           if($("#PaymentMethod_CREDIT_CARD").is(':visible')){
               if(paymentMethodID == "PayPal"){
                   $('.cardnotworking').hide();
               }else{
                   $('.cardnotworking').show();
                   jQuery('.paymentform.paypal .paypalmsg').removeClass('error');
               }
           }*/

        var $paymentMethods = $('.payment-method');
        $paymentMethods.removeClass('payment-method-expanded');

        var $selectedPaymentMethod = $paymentMethods.filter('[data-method="' + paymentMethodID + '"]');
        if ($selectedPaymentMethod.length === 0) {
            $selectedPaymentMethod = $('[data-method="Custom"]');
        }
        $selectedPaymentMethod.addClass('payment-method-expanded');

        // ensure checkbox of payment method is checked
        $('input[name$="_selectedPaymentMethodID"]').removeAttr('checked');
        $('input[value=' + paymentMethodID + ']').prop('checked', 'checked');
    },
    bindCreditCardPopulationHandler: function bindCreditCardPopulationHandler() {
        // select credit card from list
        $('.creditcardlist select').change(function () {
            var cardUUID = $(this).val();
            if (!cardUUID) {
                jQuery('input[name$=\'paymentMethods_creditCard_owner\']').val('');
                jQuery('input[name$=\'paymentMethods_creditCard_number\']').val('');
                jQuery('select[name$=\'paymentMethods_creditCard_month\']').val('');
                jQuery('select[name$=\'paymentMethods_creditCard_year\']').val('');
                jQuery('select[name$=\'paymentMethods_creditCard_cvn\']').val('');
                $('.cardtypeimg > div').hide();
                $('.expirationdate.error').hide();
                jQuery('.paymentform a.clearbutton').hide();
                $('.custom-select').each(function () {
                    var selectVal = $(this).find(':selected').text();
                    $(this).find('.selectorOut').text(selectVal);
                });
                return false;
            } else {
                jQuery('form[id$=\'paymentMethods_creditCard\'] input, form[id$=\'paymentMethods_creditCard\'] select').removeClass('errorclient');
                jQuery('form[id$=\'paymentMethods_creditCard\'] span.errorclient').hide();
                jQuery('form[id$=\'paymentMethods_creditCard\'] .custom-select').removeClass('customselect-error');
                jQuery('form[id$=\'paymentMethods_creditCard\'] .expirationdate.error').hide();
            }
            couponMenthods.populateCreditCardForm(cardUUID);
            uievents.synccheckoutH();
            return false;
        });
    },
    bindPaymentMethodChangeHandler: function bindPaymentMethodChangeHandler() {
        // bind payment method change handler
        $('#paymentmethods .toggle').click(function () {
            if (jQuery('input[name$="billing_paypalprocessed"]').val() != 'true') {
                $('#paymentmethods .toggle').removeClass('active');
                $(this).addClass('active');
                var selectedID = jQuery(this).find('input[name$="_billing_paymentMethods_selectedPaymentMethodID"]').val();
                if (selectedID == 'PayPal') {
                    var paypalStatus = jQuery('input[name$="_billing_paypalval_paypalprocessed"]').val();
                    $('.cardnotworking').hide();
                    if (paypalStatus == 'true') {
                        //$('.continuecheckoutbutton .continuecheckout').removeAttr('disabled');
                    } else {
                            //$('.continuecheckoutbutton .continuecheckout').attr('disabled', 'disabled');
                        }
                } else if (selectedID == 'CREDIT_CARD') {
                    if (!$('input[name$="_creditCard_owner"]').hasClass('errorclient') && !$('input[name$="_creditCard_number"]').hasClass('errorclient') && !$('input[name$="_creditCard_cvn"]').hasClass('errorclient') && !$('select[name$="paymentMethods_creditCard_year"]').hasClass('errorclient') && !$('select[name$="paymentMethods_creditCard_month"]').hasClass('errorclient') && $('input[name$="_creditCard_owner"]').val() != '' && $('input[name$="_creditCard_number"]').val() != '' && $('input[name$="_creditCard_cvn"]').val() != '' && $('select[name$="paymentMethods_creditCard_expiration_month"]').val() != '' && $('select[name$="paymentMethods_creditCard_expiration_month"]').val() != '') {
                        //$('.continuecheckoutbutton .continuecheckout').removeAttr('disabled');
                    } else {
                            //$('.continuecheckoutbutton .continuecheckout').attr('disabled', 'disabled');
                        }
                }
                $(this).find('input[name="billing_paymentMethods_selectedPaymentMethodID"]').prop('checked', true);
                couponMenthods.changePaymentMethod(selectedID);
            }
        });
        $('#paymentmethods .paymentform.creditcardpayment').click(function () {
            $('.paymentmethods .toggle input#is-CREDIT_CARD').closest('.toggle').addClass('active');
        });
        $('#paymentmethods .paymentform.paypal').click(function () {
            $('.paymentmethods .toggle input#is-PayPal').closest('.toggle').addClass('active');
        });
    },
    updatePaymentMethods: function updatePaymentMethods(countryCode) {

        var url = util.appendParamToURL(Urls.RefreshPaymentMethods, 'countryCode', countryCode);

        // indicate progress
        progress.show('#paymentmethodform');

        // load the updated payment method area
        $('#paymentmethodform').load(url, function () {
            $('#paymentmethodform').fadeIn('fast');
            //$('.continuecheckoutbutton .continuecheckout').attr('disabled', 'disabled');
            //couponMenthods.initPaymentMethodSelection();
            couponMenthods.bindPaymentMethodChangeHandler();
            couponMenthods.bindCreditCardPopulationHandler();
            validator.init();
            tooltip.init();
            util.cardtype.init();
            $('.expirationdate .custom-select select');
            $('#PaymentMethod_CREDIT_CARD input');
            $('#PaymentMethod_CREDIT_CARD select');
            uievents.init($('#paymentmethodform'));
            //load checking for payment type
            var $paySelected = jQuery('#paymentmethods').find('input[name$="paymentMethods_selectedPaymentMethodID"]:checked');
            if ($paySelected.length == 1) {
                $paySelected.closest('.toggle').addClass('active');
                var selectedID = $paySelected.val();
                couponMenthods.changePaymentMethod(selectedID);
            }
            couponMenthods.ordertotals();
            uievents.synccheckoutH();
        });
        //app.execUjs();
    },
    removeCouponCode: function removeCouponCode(couponCode) {
        couponMenthods.setCouponError(null);
        // nothing entered
        if (!couponCode) {
            couponMenthods.setCouponError(Resources.BILLING_COUPONMIS);
            return;
        }
        // attempt to remove
        jQuery('input[name$=\'billing_couponCode\']').val('');

        var url = util.appendParamToURL(Urls.RemoveCoupon, 'couponCode', couponCode);
        $.get(url, function (data) {
            couponMenthods.updateSummary();
            couponMenthods.updatecartsummary();
            var giftCertificates = jQuery(data).filter('#giftCertificateData').text();
            if (giftCertificates != 'undefined' && giftCertificates.length > 0) {
                var giftCertificatedata = giftCertificates.split('|');
                for (var index = 0; index < giftCertificatedata.length; index++) {
                    couponMenthods.setGiftCertRedemptionInfo(giftCertificatedata[index].split('-')[0].trim(), giftCertificatedata[index].split('-')[1].trim());
                }
            }
            uievents.synccheckoutH();
        });
        var countryCode = jQuery('input[name$=\'addressFields_country\']').val();
        if (typeof countryCode == 'undefined') {
            countryCode = 'US';
        }
        couponMenthods.updatePaymentMethods(countryCode);
        couponMenthods.ordertotals();

        // Determine if a bonus-product promotion was triggered by the coupon.
        // If so, display a popup alert and give the customer a chance to
        // return to the cart and select the bonus product.

        /*$('.noBonusBtn').unbind("click").click( function() {
            $('.bonusdiscountcontainer').dialog('close');
          });*/
    },
    populateCreditCardForm: function populateCreditCardForm(cardID) {
        // load card details
        var url = Urls.billingSelectCC;
        url = util.appendParamToURL(url, 'creditCardUUID', cardID);
        var result = ajax.getJson({
            url: url,
            callback: function callback(data) {
                if (!data) {
                    alert(Resources.CC_LOAD_ERROR);
                    return false;
                }
                var $creditCard = $('body').find('.creditcardpayment');
                // fill the form / clear the former cvn input
                $creditCard.find('input[name$="creditCard_owner"]').val(data.holder).trigger('change');
                $creditCard.find('select[name$="_type"]').val(data.type).trigger('change');
                $creditCard.find('.creditCard-number').val(data.maskedNumber).trigger('change');
                $creditCard.find('[name$="_month"]').val(data.expirationMonth).trigger('change');
                var date = new Date();
                var currentYear = date.getFullYear();
                if (data.expirationYear <= currentYear) {
                    $creditCard.find('[name$="_year"]').val('').change();
                } else {
                    $creditCard.find('[name$="_year"]').val(data.expirationYear).trigger('change');
                }
                $creditCard.find('input[name$="_cvn"]').val('').trigger('change');
                jQuery('input[name$="creditCard_owner"]').val(data.creditCard.holder);
                uievents.changeFormSelection($('select[name$="_type"]')[0], data.creditCard.type);
                $('.creditCard-number').val(data.creditCard.maskedNumber);
                uievents.changeFormSelection($('[name$="_month"]')[0], data.creditCard.expirationMonth);
                uievents.changeFormSelection($('[name$="_year"]')[0], data.creditCard.expirationYear);
                $('input[name$="_cvn"]').val('');
                // remove error messaging
                $('#PaymentMethod_CREDIT_CARD span.errormessage').remove();
                $('#PaymentMethod_CREDIT_CARD input.errormessage').removeClass('errormessage');
                $('#PaymentMethod_CREDIT_CARD .errorlabel').removeClass('errorlabel');

                $('.paymentform.creditcardpayment .formfield .field-wrapper').each(function () {
                    if ($(this).find('input').val() != undefined) {
                        if ($(this).find('input').val().length > 0) {
                            $(this).parent('.formfield').find('a.clearbutton').show();
                        } else {
                            $(this).parent('.formfield').find('a.clearbutton').hide();
                        }
                    }
                });
                if (data.creditCard.type == 'Visa') {
                    result = 'Visa';
                    //visa
                } else if (data.creditCard.type == 'Discover') {
                    result = 'Discover';
                    //Discover
                } else if (data.creditCard.type == 'Amex') {
                    result = 'Amex';
                    //American Express
                } else if (data.creditCard.type == 'MasterCard') {
                    result = 'MasterCard';
                    //Master Card
                }
                //errorspan.hide();
                $('#paymentmethods').find('select[name$="_paymentMethods_creditCard_type"]').val(result);
                $('.cardtypeimg > div').hide();
                $('.cardtypeimg > div.' + result).show();
            }
        });
    },
    setGiftCertBalanceInfo: function setGiftCertBalanceInfo(amountExpr) {
        if (!amountExpr) {
            jQuery('.balance').empty();
            return;
        }
        $('.balance').append('<div class=\'balanceamt\'>' + Resources.GIFT_CERT_BALANCE + ' ' + amountExpr + ' </div>');
    },
    redeemGiftCert: function redeemGiftCert(giftCertificateId) {
        couponMenthods.setGiftCertError(null);
        couponMenthods.setGiftCertBalanceInfo(null);
        // nothing entered
        if (!giftCertificateId) {
            couponMenthods.setGiftCertError(Resources.GIFT_CERT_INVALID);
            return;
        }
        // attempt to redeem
        var url = util.appendParamsToUrl(Urls.redeemGiftCert, { giftCertificateID: giftCertificateId, format: 'ajax' });
        ajax.getJson({
            url: url,
            callback: function callback(data) {
                if (!data) {
                    couponMenthods.setGiftCertError(Resources.GIFT_CERT_INVALID);
                    return false;
                }
                if (data.redemptionErrorMsg) {
                    couponMenthods.setGiftCertError(data.redemptionErrorMsg);
                    return false;
                }
                if (!data.redemption) {
                    couponMenthods.setGiftCertError(Resources.GIFT_CERT_INVALID);
                    return false;
                }
                // empty input field and display redemption in UI
                $('input[name$=\'billing_giftCertCode\']').val('');
                //couponMenthods.setGiftCertRedemptionInfo(data.redemption.giftCertificateID, data.redemption.amount);
                var countryCode = $('input[name$=\'_addressFields_country\']').val();
                if (typeof countryCode == 'undefined') {
                    countryCode = 'US';
                }
                couponMenthods.updatePaymentMethods(countryCode);
                couponMenthods.updateSummary();
                couponMenthods.ordertotals();
                uievents.synccheckoutH();
            }
        });
    },
    checkGiftCertBalance: function checkGiftCertBalance(giftCertificateId) {
        couponMenthods.setGiftCertError(null);
        couponMenthods.setGiftCertBalanceInfo(null);
        // nothing entered
        if (!giftCertificateId) {
            couponMenthods.setGiftCertError(Resources.GIFT_CERT_MISSING);
            return;
        }
        // load gift certificate details
        var url = util.appendParamsToUrl(Urls.GetGiftCertificateBalance, {
            giftCertificateID: giftCertificateId,
            format: 'ajax'
        });
        ajax.getJson({
            url: url,
            callback: function callback(data) {
                if (!data || !data.giftCertificate) {
                    couponMenthods.setGiftCertError(Resources.GIFT_CERT_INVALID);
                    return false;
                }
                // display details in UI
                couponMenthods.setGiftCertBalanceInfo(data.giftCertificate.balance);
                uievents.synccheckoutH();
            }
        });
    }
};

/**
 * @function
 * @description Fills the Credit Card form with the passed data-parameter and clears the former cvn input
 * @param {Object} data The Credit Card data (holder, type, masked number, expiration month/year)
 */
function setCCFields(data) {

    var $creditCard = $('[data-method="CREDIT_CARD"]');
    $creditCard.find('input[name$="creditCard_owner"]').val(data.holder).trigger('change');
    $creditCard.find('input[name$="creditCard_owner"]').val(data.holder).trigger('blur');
    $creditCard.find('select[name$="_type"]').val(data.type).trigger('change');
    $creditCard.find('select[name$="_type"]').val(data.type).trigger('blur');
    $creditCard.find('input[name*="_creditCard_number"]').val(data.maskedNumber).trigger('change');
    $creditCard.find('input[name*="_creditCard_number"]').val(data.maskedNumber).trigger('blur');
    $creditCard.find('[name$="_expiration_month"]').val(data.expirationMonth).trigger('change');
    var date = new Date();
    var currentYear = date.getFullYear();
    if (data.expirationYear <= currentYear) {
        $creditCard.find('[name$="_year"]').val('').change();
    } else {
        $creditCard.find('[name$="_year"]').val(data.expirationYear).trigger('change');
    }
    $creditCard.find('[name$="_expiration_month"]').val(data.expirationMonth).trigger('blur');
    if (data.expirationYear <= currentYear) {
        $creditCard.find('[name$="_year"]').val('').blur();
    } else {
        $creditCard.find('[name$="_year"]').val(data.expirationYear).trigger('blur');
    }
    $creditCard.find('input[name$="_cvn"]').val('').trigger('change');
    $creditCard.find('input[name$="_cvn"]').val('').trigger('blur');
    uievents.synccheckoutH();
}

/**
 * @function
 * @description Updates the credit card form with the attributes of a given card
 * @param {String} cardID the credit card ID of a given card
 */
function populateCreditCardForm(cardID) {
    // load card details
    var url = util.appendParamToURL(Urls.billingSelectCC, 'creditCardUUID', cardID);
    ajax.getJson({
        url: url,
        callback: function callback(data) {
            uievents.synccheckoutH();
            if (!data) {
                window.alert(Resources.CC_LOAD_ERROR);
                return false;
            }
            setCCFields(data);
            uievents.synccheckoutH();
        }
    });
}

/**
 * @function
 * @description Changes the payment method form depending on the passed paymentMethodID
 * @param {String} paymentMethodID the ID of the payment method, to which the payment method form should be changed to
 */
function updatePaymentMethod(paymentMethodID) {
    var $paymentMethods = $('.payment-method');
    $paymentMethods.removeClass('payment-method-expanded');

    var $selectedPaymentMethod = $paymentMethods.filter('[data-method="' + paymentMethodID + '"]');
    if ($selectedPaymentMethod.length === 0) {
        $selectedPaymentMethod = $('[data-method="Custom"]');
    }
    $selectedPaymentMethod.addClass('payment-method-expanded');

    // ensure checkbox of payment method is checked
    $('input[name$="_selectedPaymentMethodID"]').removeAttr('checked');
    $('input[value=' + paymentMethodID + ']').prop('checked', 'checked');

    //formPrepare.validateForm();
}

/**
 * @function
 * @description loads billing address, Gift Certificates, Coupon and Payment methods
 */
exports.init = function () {
    //var $checkoutForm = $('.checkout-billing');
    //var $addGiftCert = $('#add-giftcert');
    //var $giftCertCode = $('input[name$="_giftCertCode"]');
    //var $addCoupon = $('#add-coupon');
    //var $couponCode = $('input[name$="_couponCode"]');
    var $selectPaymentMethod = $('.payment-method-options');
    var selectedPaymentMethod = $selectPaymentMethod.find(':checked').val();

    /* formPrepare.init({
         formSelector: 'form[id$="billing"]',
         continueSelector: '[name$="billing_save"]'
     });*/
    var activePaymentMethodID = $('body').find('.paymentmethods_cont .input-radio:checked').attr('id');
    if (activePaymentMethodID == 'is-PayPal') {
        $('.paymentform .textinput, .paymentform .yearselect select, .paymentform .monthselect select, .addressoptions .checkinput').removeClass('required');
        $('.cardnotworking').hide();
    } else {
        $('.paymentform .textinput, .paymentform .yearselect select, .paymentform .monthselect select, .addressoptions .checkinput').addClass('required');
        $('.cardnotworking').show();
    }
    if (!jQuery('.creditcardlist select').val()) {
        $('.creditcard_name').val('');
        $('.creditCard-number').val('');
        $('.monthselect').val('');
        $('.yearselect').val('');
        $('.creditcard_cvn').val('');
        $('.cardtypeimg > div').hide();
        $('.expirationdate.error').hide();
        $('.expirationdatevalid.error').hide();
        $('.paymentform a.clearbutton').hide();
    }
    $('.expirationdate .custom-select select').on('blur', function () {
        var d = new Date(),
            mth = d.getMonth() + 1,
            yy = d.getFullYear();
        if (!jQuery(this).val()) {
            $('.expirationdate.error').show();
            $('.expirationdatevalid.error').hide();
        } else {
            if (jQuery('.expirationdate .custom-select.customselect-error').length == 0) {
                $('.expirationdate.error').hide();
                $('.expirationdatevalid.error').hide();
            }
            var selectedMth = $('.expirationdate .custom-select select[id$=\'billing_paymentMethods_creditCard_expiration_month\']').val();
            var selectedyear = $('.expirationdate .custom-select select[id$=\'billing_paymentMethods_creditCard_expiration_year\']').val();
            if (selectedyear && selectedMth) {
                selectedyear = selectedyear.replace(',', '');
                if (selectedyear <= yy && selectedMth < mth) {
                    $('.expirationdate.error').hide();
                    $('.expirationdatevalid.error').show();
                }
            }
        }
    });
    $('body').on('click', '.redemption .discount-success button.remove-cop', function (e) {
        e.preventDefault();
        var url = $(this).val();
        couponMenthods.removeCouponCode(url);
        return false;
    });
    /* JIRA PREV-135 : Disabled Credit Card in BM is displaying in the application.
       Changed default option from 'CREDIT_CARD' to first available payment method.*/
    updatePaymentMethod(selectedPaymentMethod ? selectedPaymentMethod : $('.payment-method-options input').first().val());
    $('body').on('click', '.payment-method-options input[type="radio"]', function () {
        updatePaymentMethod($(this).val());
        if ($(this).is(':checked')) {
            $(this).closest('.toggle').siblings('.toggle').removeClass('active');
            if ($(this).attr('id') == 'is-PayPal') {
                $('.paymentform .textinput, .paymentform .yearselect select, .paymentform .monthselect select, .addressoptions .checkinput').removeClass('required');
                $('.cardnotworking').hide();
            } else {
                $('.paymentform .textinput, .paymentform .yearselect select, .paymentform .monthselect select, .addressoptions .checkinput').addClass('required');
                $('.cardnotworking').show();
            }
            $(this).closest('.toggle').addClass('active');
        }
        uievents.customFields();
        uievents.synccheckoutH();
    });
    $('body').on('click', '.payment-method-options .toggle  img', function () {
        $(this).closest('label').find('input[type="radio"]').trigger('click');
    });

    // select credit card from list
    $('body').on('change', '#creditCardList', function () {
        var cardUUID = $(this).val();
        if (!cardUUID) {
            return;
        }
        populateCreditCardForm(cardUUID);

        // remove server side error
        $('.required.error').removeClass('error');
        $('.error-message').remove();
    });
    $('body').on('click', '#giftcertentry a.remove', function () {
        var gcId = util.trimPrefix($(this).attr('id'), 'rgc-');
        couponMenthods.removeGiftCertificate(gcId);
        return false;
    });
    $('body').on('click', '#check-giftcert', function (e) {
        e.preventDefault();
        var gcId = jQuery('input[name$=\'billing_giftCertCode\']').val().toUpperCase();
        couponMenthods.checkGiftCertBalance(gcId);
        uievents.synccheckoutH();
        return false;
    });

    $('body').on('click', '#add-giftcert', function (e) {
        e.preventDefault();
        var gcId = jQuery('input[name$=\'billing_giftCertCode\']').val().toUpperCase();
        couponMenthods.redeemGiftCert(gcId);
        uievents.synccheckoutH();
        return false;
    });

    $('body').on('click', '#add-coupon', function (e) {
        e.preventDefault();
        var //$error = $checkoutForm.find('.coupon-error'),
        code = $('input[name$="_couponCode"]').val();
        couponMenthods.setCouponError(null);
        if (code.length === 0) {
            couponMenthods.setCouponError(Resources.COUPON_CODE_MISSING);
            return false;
        }

        var url = util.appendParamsToUrl(Urls.addCoupon, {
            couponCode: code,
            format: 'ajax'
        });
        $.getJSON(url, function (data) {
            var msg = '';
            if (!data) {
                msg = Resources.COUPON_INVALID;
                couponMenthods.setCouponError(msg);
                return false;
            }
            if (data.redemption.redemptionErrorMsg) {
                couponMenthods.setCouponError(data.redemption.redemptionErrorMsg);
                return false;
            }
            if (!data.redemption) {
                msg = Resources.COUPON_INVALID;
                couponMenthods.setCouponError(msg);
                return false;
            }
            // empty input field and display redemption in UI
            jQuery('input[name$=\'_billing_couponCode\']').val('');
            jQuery('input[name$=\'_billing_couponCode\']').removeClass('errorclient');
            couponMenthods.setCouponRedemptionInfo(data.redemption);
            // update gift card redemptions as amounts might have changed after coupon
            jQuery.each(data.redemption.gcRedemptions, function () {
                couponMenthods.setGiftCertRedemptionInfo(this.giftCertificateID, this.amount);
            });
            var countryCode = $('input[name$=\'_addressFields_country\']').val();
            if (typeof countryCode == 'undefined') {
                countryCode = 'US';
            }

            couponMenthods.updateSummary();
            couponMenthods.updatecartsummary();
            couponMenthods.updatePaymentMethods(countryCode);
            couponMenthods.ordertotals();
            uievents.synccheckoutH();
            // Determine if a bonus-product promotion was triggered by the coupon.
            // If so, display a popup alert and give the customer a chance to
            // return to the cart and select the bonus product.
            if (data.redemption.bonusPromotionApplied) {
                $('.bonusdiscountcontainer .bonusproductpromo').append(data.redemption.bonusPromotionCallout);
                $('.bonusdiscountcontainer div.details').html(data.redemption.bonusPromotionDetails);

                $('.bonusdiscountcontainer').show();
                $('.bonusdiscountcontainer').dialog({
                    title: Resources.BONUS_PRODUCT,
                    bgiframe: true,
                    autoOpen: false,
                    modal: true,
                    height: 250,
                    width: 500,
                    resizable: false
                });
                jQuery('.bonusdiscountcontainer').dialog('open');
            }

            jQuery('.selectBonusBtn').unbind('click').click(function () {
                jQuery('.bonusdiscountcontainer').dialog('close');
                location.href = '${URLUtils.https(\'Cart-Show\')}';
                return false;
            });

            jQuery('.noBonusBtn').unbind('click').click(function () {
                jQuery('.bonusdiscountcontainer').dialog('close');
            });
        });
    });

    // trigger events on enter
    $('body').on('keydown', 'input[name$="_couponCode"]', function (e) {
        if (e.which === 13) {
            e.preventDefault();
            $('#add-coupon').click();
        }
    });
    $('body').on('keydown', 'input[name$="_giftCertCode"]', function (e) {
        if (e.which === 13) {
            e.preventDefault();
            $('#add-giftcert').click();
        }
    });

    $('.trypaypal').on('click', function () {
        $('.continuecheckout-paypallogin').trigger('click');
    });

    if ($('.pt_checkout .paymentform.paypal .error-paypal-heading').length > 0 || $('.pt_checkout .paymentform.paypal .paypalmsg.success-paypal').length > 0) {
        $('body, html').animate({
            scrollTop: $('#paymentmethodform legend').offset().top
        }, 600);
    }

    $('.switchtocredit').on('click', function () {
        $('.paymentmethods_cont .toggle').eq(0).find('.input-radio').trigger('click');
    });
    //PREVAIL - init Address Validation
    require('../../addressvalidation').init();

    util.cardtype.init();
    $('body').on('click', '.couponcode .label', function () {
        if ($('.promo-input-button').is(':visible') == true) {
            $('.promo-input-button').hide();
            $(this).closest('.couponcode').find('span.error').hide();
        } else {
            $('.promo-input-button').show();
            $(this).closest('.couponcode').find('span.error').show();
        }
        uievents.synccheckoutH();
    });
    if ($('.guestbillingform .password .errormessage').length > 0) {
        $('.guestbillingform .password .errormessage').remove();
    }

    $('.guestbillingform .billing-conpassword').blur(function () {
        var billingPas = $('.guestbillingform .billing-password').val();
        var billingConpas = $('.guestbillingform .billing-conpassword').val();
        $('.guestbillingform .password .errormessage').remove();
        if (billingPas.length > 0) {
            if (billingConpas.length < 5) {
                $('.guestbillingform .billing-conpassword').addClass('errorclient');
                $('.billingconfpassword').text(Resources.billingpasswordconfirm_min).removeClass('hide');
                //$('.continuecheckoutbutton .continuecheckout').attr('disabled', 'disabled');
            } else if (billingPas != billingConpas) {
                $('.guestbillingform .billing-conpassword').addClass('errorclient');
                $('.billingconfpassword').text(Resources.billingpasswordconfirm).removeClass('hide');
                //$('.continuecheckoutbutton .continuecheckout').attr('disabled', 'disabled');
            } else {
                $('.guestbillingform .billing-conpassword').removeClass('errorclient');
                $('.billingconfpassword').text(Resources.billingpasswordconfirm).addClass('hide');
                if (!$('input[name$="_creditCard_owner"]').hasClass('errorclient') && !$('input[name$="_creditCard_number"]').hasClass('errorclient') && !$('input[name$="_creditCard_cvn"]').hasClass('errorclient') && !$('select[name$="paymentMethods_creditCard_year"]').hasClass('errorclient') && !$('select[name$="paymentMethods_creditCard_month"]').hasClass('errorclient') && $('input[name$="_creditCard_owner"]').val() != '' && $('input[name$="_creditCard_number"]').val() != '' && $('input[name$="_creditCard_cvn"]').val() != '' && $('select[name$="paymentMethods_creditCard_year"]').val() != '' && $('select[name$="paymentMethods_creditCard_month"]').val() != '') {
                    //$('.continuecheckoutbutton .continuecheckout').removeAttr('disabled');
                }
            }
        } else {
            $('.guestbillingform .billing-conpassword').removeClass('errorclient');
            $('.billingconfpassword').text(Resources.billingpasswordconfirm).addClass('hide');
            if (!$('input[name$="_creditCard_owner"]').hasClass('errorclient') && !$('input[name$="_creditCard_number"]').hasClass('errorclient') && !$('input[name$="_creditCard_cvn"]').hasClass('errorclient') && !$('select[name$="paymentMethods_creditCard_year"]').hasClass('errorclient') && !$('select[name$="paymentMethods_creditCard_month"]').hasClass('errorclient') && $('input[name$="_creditCard_owner"]').val() != '' && $('input[name$="_creditCard_number"]').val() != '' && $('input[name$="_creditCard_cvn"]').val() != '' && $('select[name$="paymentMethods_creditCard_year"]').val() != '' && $('select[name$="paymentMethods_creditCard_month"]').val() != '') {
                //$('.continuecheckoutbutton .continuecheckout').removeAttr('disabled');
            }
        }
    });
    $('.guestbillingform .billing-password').bind('blur', function () {
        var billingPas = $('.guestbillingform .billing-password').val();
        var billingConpas = $('.guestbillingform .billing-conpassword').val();
        //$('.continuecheckoutbutton .continuecheckout').attr('disabled', 'disabled');

        if ($(this).length > 0) {
            $('.guestbillingform .billing-conpassword').addClass('required');
        } else {
            $('.guestbillingform .billing-conpassword').removeClass('required');
            $('.guestbillingform .billing-conpassword').removeClass('errorclient');
        }
        if (billingPas.length > 0) {
            if (billingPas.length < 5) {
                $('.guestbillingform .billing-password').addClass('errorclient');
                $('.billingpassword').text(Resources.billingpasswordconfirm_min).removeClass('hide');
                //$('.continuecheckoutbutton .continuecheckout').attr('disabled', 'disabled');
            } else {
                $('.guestbillingform .billing-password').removeClass('errorclient');
                $('.billingpassword').addClass('hide');
            }
        } else {
            $('.guestbillingform .billing-password').removeClass('errorclient');
            $('.billingpassword').addClass('hide');
        }

        if (billingPas == billingConpas && billingPas.length >= 5) {
            if (!$('input[name$="_creditCard_owner"]').hasClass('errorclient') && !$('input[name$="_creditCard_number"]').hasClass('errorclient') && !$('input[name$="_creditCard_cvn"]').hasClass('errorclient') && !$('select[name$="paymentMethods_creditCard_year"]').hasClass('errorclient') && !$('select[name$="paymentMethods_creditCard_month"]').hasClass('errorclient') && $('input[name$="_creditCard_owner"]').val() != '' && $('input[name$="_creditCard_number"]').val() != '' && $('input[name$="_creditCard_cvn"]').val() != '' && $('select[name$="paymentMethods_creditCard_year"]').val() != '' && $('select[name$="paymentMethods_creditCard_month"]').val() != '') {
                //$('.continuecheckoutbutton .continuecheckout').removeAttr('disabled');
            }
        }
    });

    if ($('.expirationdate .custom-select .field-wrapper span.errormessage').length > 0) {
        $('.expirationdate .custom-select span.errormessage').hide();
        $('.expirationdate.error').show();
    }
    $('.checkoutbilling .continue-checkout-button .continuecheckout').click(function () {
        var $checkoutButton = $('.continuecheckout.place-order-btn');
        if (navigator.userAgent.match(/Trident\/7\./)) {
            $('.continuecheckout.place-order-btn').append('<div class="loader"><div class="loader-indicator"></div><div class="loader-bg"></div></div>');
        } else {
            progress.show($checkoutButton);
        }
        var errorcount = 0;
        if (!$('#PaymentMethod_CREDIT_CARD').is(':visible')) {
            $('.paymentform .textinput, .paymentform select').removeClass('required');
        }
        if (!jQuery('form[id$="_billing"]').valid()) {
            progress.hide();
            $(function () {
                if (navigator.userAgent.match(/Trident\/7\./)) {
                    $('.continuecheckout.place-order-btn .loader').remove();
                }
            });
            jQuery('.state-blk select').trigger('blur');
            if (jQuery('.billing-address-fields').hasClass('hide')) {
                $('select[name$=billing_addressList]').val('');
                $('input[name$="billingAddress_selectedbillingadd"]').val('');
                $('.custom-select').each(function () {
                    var selectVal = $(this).find(':selected').text();
                    $(this).find('.selectorOut').text(selectVal);
                });
                jQuery('.billing-address-fields').removeClass('hide');
                jQuery('.selected-billing-address , .selected-shipping-address').addClass('hide');
                uievents.customFields();
            }
            errorcount++;
        }
        if ($('#PaymentMethod_CREDIT_CARD').is(':visible')) {
            if (!$('form[id$="dwfrm_billing"]').valid()) {
                progress.hide();
                $('.expirationdate select').trigger('blur');

                if ($('.vip-terms .custom-link').is(':visible') && !$('input[name$="_isvip"]').is(':checked')) {
                    if ($('.vip-terms .custom-checkbox .vip-message #message').length == 0) {
                        $('.vip-terms .custom-checkbox .vip-message').prepend('<span id="message" class="error vipcheckmessage">Please check the box to confirm you have read and agree to the Rapala VIP Terms & Conditions.</span>');
                        $('.singleshipping_error').show();
                    }
                    $('.vip-terms .custom-checkbox .custom-link').addClass('error');
                    uievents.synccheckoutH();
                }
                if ($('.knife .custom-link.agecheck-link').is(':visible') && !$('input[name$="agecheck_ischeck"]').is(':checked')) {
                    if ($('.addressoptions.knife .agecheck_message #message').length == 0) {
                        $('.addressoptions.knife .agecheck_message').prepend('<span id="message" class="error agecheckmessage">Please Verify you are 18 years of age or older, or remove all knives from your cart.</span>');
                        $('.singleshipping_error').show();
                    }
                    $('.addressoptions.knife > .custom-checkbox .custom-link').addClass('error');
                    uievents.synccheckoutH();
                }
                errorcount++;
            } else {

                if ($('.vip-terms .custom-link').is(':visible') && !$('input[name$="_isvip"]').is(':checked')) {
                    if ($('.vip-terms .custom-checkbox .vip-message #message').length == 0) {
                        $('.vip-terms .custom-checkbox .vip-message').prepend('<span id="message" class="error vipcheckmessage">Please check the box to confirm you have read and agree to the Rapala VIP Terms & Conditions.</span>');
                        $('.singleshipping_error').show();
                    }
                    $('.vip-terms .custom-checkbox .custom-link').addClass('error');
                    uievents.synccheckoutH();
                    errorcount++;
                }
                if ($('.knife .custom-link.agecheck-link').is(':visible') && !$('input[name$="agecheck_ischeck"]').is(':checked')) {
                    if ($('.addressoptions.knife .agecheck_message #message').length == 0) {
                        $('.addressoptions.knife .agecheck_message').prepend('<span id="message" class="error agecheckmessage">Please Verify you are 18 years of age or older, or remove all knives from your cart.</span>');
                        $('.singleshipping_error').show();
                    }
                    $('.addressoptions.knife > .custom-checkbox .custom-link').addClass('error');
                    uievents.synccheckoutH();
                    errorcount++;
                }
            }
        } else {
            if ($('.vip-terms .custom-link').is(':visible') && !$('input[name$="_isvip"]').is(':checked')) {
                if ($('.vip-terms .custom-checkbox .vip-message #message').length == 0) {
                    $('.vip-terms .custom-checkbox .vip-message').prepend('<span id="message" class="error vipcheckmessage">Please check the box to confirm you have read and agree to the Rapala VIP Terms & Conditions.</span>');
                    $('.singleshipping_error').show();
                }
                $('.vip-terms .custom-checkbox .custom-link').addClass('error');
                uievents.synccheckoutH();
                errorcount++;
            }
            if ($('.knife .custom-link.agecheck-link').is(':visible') && !$('input[name$="agecheck_ischeck"]').is(':checked')) {
                if ($('.addressoptions.knife .agecheck_message #message').length == 0) {
                    $('.addressoptions.knife  .agecheck_message').prepend('<span id="message" class="error agecheckmessage">Please Verify you are 18 years of age or older, or remove all knives from your cart.</span>');
                    $('.singleshipping_error').show();
                }
                $('.addressoptions.knife  > .custom-checkbox .custom-link').addClass('error');
                uievents.synccheckoutH();
                errorcount++;
            }
            /*     if(!$('input.paypalprocessed').val()){
                     $('.paymentform.paypal .paypalmsg').addClass('error');
                      return false;
                   }*/
        }
        if (errorcount > 0) {
            progress.hide();
            $('.singleshipping_error').show();
            return false;
        }
        if ($('.billing-address-fields').is(':visible')) {
            $('.billing-address-fields .state-blk select').blur();
        }
    });
    //JIRA PREV-38 : Billing page_Credit Card Section: CVV number should not pre-populate.
    /*if ($('.bypassDAV').length === 0) {
        $('.spc-billing .form-row.cvn input').val('');
    }*/
    if ($('.invalidCreditcard').length > 0) {
        //$('.singleshipping_error').show();
        $('.cardnumber input').addClass('errorclient');
        $('.cardnumber .labeltext').addClass('error');
        $('<span class="invalidcredit error">- Invalid Credit Card Number</span>').appendTo('.cardnumber .field-wrapper');
        //$('.singleshipping_error').show();
        $('.cardnumber .errormessage').css('display', 'none');
    }
};

},{"../../addressvalidation":14,"../../ajax":15,"../../progress":52,"../../tooltip":61,"../../uievents":62,"../../util":63,"../../validator":64}],36:[function(require,module,exports){
'use strict';

var _ = require('lodash');

var $form, $requiredInputs, validator;

var hasEmptyRequired = function hasEmptyRequired() {
    // filter out only the visible fields
    var requiredValues = $requiredInputs.filter(':visible').map(function () {
        return $(this).val();
    });
    return _(requiredValues).contains('');
};

var validateForm = function validateForm() {
    // only validate form when all required fields are filled to avoid
    // throwing errors on empty form
    if (!validator) {
        return;
    }
    if (!hasEmptyRequired()) {
        if (validator.form()) {
            //$continue.removeAttr('disabled');
        }
    } else {
            //$continue.attr('disabled', 'disabled');
        }
};

var validateEl = function validateEl() {
    if ($(this).val() === '') {
        // $continue.attr('disabled', 'disabled');
    } else {
        // enable continue button on last required field that is valid
        // only validate single field
        if (validator.element(this) && !hasEmptyRequired()) {
            //$continue.removeAttr('disabled');
        } else {
                //$continue.attr('disabled', 'disabled');
            }
    }
};

var init = function init(opts) {
    if (!opts.formSelector || !opts.continueSelector) {
        throw new Error('Missing form and continue action selectors.');
    }
    $form = $(opts.formSelector);
    //$continue = $(opts.continueSelector);
    validator = $form.validate();
    $requiredInputs = $('.required', $form).find(':input');
    validateForm();
    // start listening
    $requiredInputs.on('change', validateEl);
    $requiredInputs.filter('input').on('keyup', _.debounce(validateEl, 200));
};

exports.init = init;
exports.validateForm = validateForm;
exports.validateEl = validateEl;

},{"lodash":5}],37:[function(require,module,exports){
'use strict';

var address = require('./address'),
    billing = require('./billing'),
    multiship = require('./multiship'),
    uievents = require('../../uievents'),
    util = require('../../util'),
    shipping = require('./shipping');

/**
 * @function Initializes the page events depending on the checkout stage (shipping/billing)
 */
exports.init = function () {
    address.init();
    if ($('.allotment-label').length > 0 || $('.brand-rapala-checkout').length > 0) {
        $('body').find('#main').addClass('allotment-available');
    }
    if ($('.checkout-shipping').length > 0) {
        shipping.init();
    } else if ($('.checkout-multi-shipping').length > 0) {
        multiship.init();
    } else {
        billing.init();
    }
    $(window).resize(function () {
        $('.ui-dialog-content:visible').each(function () {
            $(this).dialog('option', 'position', $(this).dialog('option', 'position'));
        });
    });
    $('body').find('.form-row').each(function () {
        if ($(this).find('.field-wrapper .clearbutton').length == 0 && $(this).find('.field-wrapper').find('input[type=\'text\']').length > 0) {
            $(this).find('.field-wrapper').append('<a class="clearbutton"></a>');
            if ($(this).find('.field-wrapper').find('input[type=\'text\']').val().length > 0) {
                $(this).find('.field-wrapper').find('.clearbutton').show();
            }
        } else if ($(this).find('.field-wrapper .clearbutton').length == 0 && $(this).find('.field-wrapper').find('input[type=\'password\']').length > 0) {
            $(this).find('.field-wrapper').append('<a class="clearbutton"></a>');
            if ($(this).find('.field-wrapper').find('input[type=\'password\']').val().length > 0) {
                $(this).find('.field-wrapper').find('.clearbutton').show();
            }
        }
    });
    $('body').find('.form-row .field-wrapper input').on('focus', function () {
        if ($(this).hasClass('errorclient')) {
            $(this).removeClass('errorclient');
        }
    });
    $('body').find('.form-row .field-wrapper input').on('keyup input blur', function () {
        if ($(this).val() != undefined) {
            if ($(this).val().length > 0) {
                $(this).closest('.form-row').find('a.clearbutton').show();
            } else {
                $(this).closest('.form-row').find('a.clearbutton').hide();
            }
        }
    });
    $('body').find('input').focusin(function () {
        $(this).closest('.formfield, .form-row').removeClass('inputlabel');
        $(this).closest('.formfield').find('.form-row , .label span').removeClass('inputlabel');
        $(this).removeClass('errorclient');
        $(this).closest('.formfield , .form-row').find('.logerror , .existing_register').css('display', 'none');
    });
    $('body').find('.form-row a.clearbutton').on('click', function () {
        $(this).closest('.field-wrapper').find('span').remove();
        $(this).closest('.field-wrapper').find('.required').removeClass('errorclient');
        $(this).closest('.form-row').find('.form-row , .label span').removeClass('inputlabel');
        $(this).closest('.form-row').find('input').val('');
        $(this).closest('.form-row').find('a.clearbutton').hide();
        $(this).closest('.form-row').find('span.logerror , .existing_register').hide();
    });

    $('.pt_checkout .textinput, .pt_checkout .custom-select-wrap, .pt_checkout .textinputpw').bind('keyup blur', function () {
        if (jQuery('.New-shipping-authentication-detail').find('input[name$=\'_ProcessWay\']').val() == 2) {
            var errordiv = '<div class=\'error loginerror\'>' + Resources.checkout_login_error + '</div>';
            if ($('.shippinglogindetails').is(':visible') || !$('.checkoutshipping form[id$="_login"]').valid()) {
                if ($('.checkout .loginerror').length > 0) {
                    $('.checkout .loginerror').remove();
                }
                jQuery('.state-blk .stateerror.error').hide();
                if ($(this).closest('.formfield').find('.loginerror').length == 0) {
                    $(this).closest('.formfield').append(errordiv);
                }
            }
        }
        setTimeout(function () {
            uievents.synccheckoutH();
        }, 100);
    });

    $('.new-address-button').bind('click', function () {
        //jQuery("input[name=${pdict.CurrentForms.singleshipping.shippingAddress.makedefault.htmlName}]").attr('checked', true);
        $('.addressoptions-addToAddressBook,.addressoptions-makedefault ').removeClass('hide');
        $('input[name$=\'shippingAddress_selectedaddress\']').val('');
        $('.selected-shipping-address').empty();
        $('input[name$=\'_addressid\']').val('');
        $('input[name$=\'_addressFields_firstName\']').val('');
        $('input[name$=\'_addressFields_lastName\']').val('');
        $('input[name$=\'_addressFields_address1\']').val('');
        $('input[name$=\'_addressFields_address2\']').val('');
        $('input[name$=\'_addressFields_city\']').val('');
        $('input[name$=\'_addressFields_postal\']').val('');
        $('input[name$=\'_addressFields_phone\']').val('');
        $('input[name$=\'_addressFields_states_state\']').val('');
        uievents.changeFormSelection(jQuery('select[name$=\'_addressFields_title\']')[0], '');
        uievents.changeFormSelection(jQuery('select[name$=\'_addressFields_country\']')[0], '');
        uievents.changeFormSelection(jQuery('select[name$=\'_addressFields_states_state\']')[0], '');
        uievents.changeFormSelection(jQuery('select.address-select')[0], '');
        $('.shipping-address-field-section').removeClass('hide');
        $('.selected-shipping-address, .new-address-field').addClass('hide');
        $('input[name$=\'_addressFields_phone\']').closest('div.phone').find('span.errorclient').remove();
        $('input[name$=\'_addressFields_postal\']').closest('div.zip').find('span.errorclient').remove();
        $('.addressform .form-row.custom-select').removeClass('customselect-error');
        $('.custom-select').each(function () {
            var selectVal = $(this).find(':selected').text();
            $(this).find('.selectorOut').text(selectVal);
        });
        if ($('.checkout').hasClass('billingsection')) {
            $('body').find('input[name$=_sameasshippingaddress]').removeAttr('checked');
            $('body').find('input[name$=_sameasshippingaddress]').closest('.custom-checkbox').find('.custom-link').removeClass('active');
        }
        $('a.clearbutton').hide();
        $('.shipping-address-field-section .form-row').find('input').removeClass('errorclient');
        uievents.customFields();
        uievents.synccheckoutH();
    });
    $('.edit-address-field .edit-billing-button').bind('click', function () {
        var $form = $('.address');
        var selectedAddress = $(this).closest('.edit-address-field').data('address');
        util.fillAddressFields(selectedAddress, $form);
        $('.edit-address-field').addClass('hide');
        $('.selected-shipping-address, .new-address-field').addClass('hide');
        $('.billing-address-fields').removeClass('hide');
        uievents.customFields();
        uievents.synccheckoutH();
    });
    uievents.synccheckoutH();
    //if on the order review page and there are products that are not available diable the submit order button
    /* if ($('.order-summary-footer').length > 0) {
         if ($('.notavailable').length > 0) {
             $('.order-summary-footer .submit-order .button-fancy-large').attr('disabled', 'disabled');
         }
     }*/
};

},{"../../uievents":62,"../../util":63,"./address":34,"./billing":35,"./multiship":38,"./shipping":39}],38:[function(require,module,exports){
'use strict';

var address = require('./address'),
    formPrepare = require('./formPrepare'),
    dialog = require('../../dialog'),
    util = require('../../util'),
    shipping = require('./shipping'),
    //JIRA PREV-99 : shipping methods is not displayed for 2nd address in right nav.
ajax = require('../../ajax'); //JIRA PREV-99 : shipping methods is not displayed for 2nd address in right nav.

/**
 * @function
 * @description Initializes gift message box for multiship shipping, the message box starts off as hidden and this will display it if the radio button is checked to yes, also added event handler to listen for when a radio button is pressed to display the message box
 */
function initMultiGiftMessageBox() {
    $.each($('.item-list'), function () {
        var $this = $(this);
        var $giftMessage = $this.find('.gift-message-text');

        //handle initial load
        $giftMessage.toggleClass('hidden', $('input[name$="_isGift"]:checked', this).val() !== 'true');

        //set event listeners
        $this.on('change', function () {
            $giftMessage.toggleClass('hidden', $('input[name$="_isGift"]:checked', this).val() !== 'true');
        });
    });
}

/**
 * @function
 * @description capture add edit adddress form events
 */
function addEditAddress(target) {
    var $addressForm = $('form[name$="multishipping_editAddress"]'),
        $addressDropdown = $addressForm.find('select[name$=_addressList]'),
        $addressList = $addressForm.find('.address-list'),
        add = true,
        selectedAddressUUID = $(target).parent().siblings('.select-address').val();

    $addressDropdown.on('change', function (e) {
        e.preventDefault();
        var selectedAddress = $addressList.find('select').val();
        if (selectedAddress !== 'newAddress') {
            selectedAddress = $.grep($addressList.data('addresses'), function (add) {
                return add.UUID === selectedAddress;
            })[0];
            add = false;
            // proceed to fill the form with the selected address
            util.fillAddressFields(selectedAddress, $addressForm);
        } else {
            //reset the form if the value of the option is not a UUID
            add = true; //PREVAIL - Added to handle back and forth scenarios.
            $addressForm.find('.input-text, .input-select').val('');
        }
    });

    $addressForm.on('click', '.cancel', function (e) {
        e.preventDefault();
        dialog.close();
    });

    $addressForm.on('submit', function (e) {
        e.preventDefault();

        // PREV-98: validation error messages are not displayed when adding address in Multi-Shipping. Added the following IF block.
        if (!$addressForm.valid()) {
            return false;
        }
        $.getJSON(Urls.addEditAddress, $addressForm.serialize(), function (response) {
            if (!response.success) {
                // @TODO: figure out a way to handle error on the form
                return;
            }
            var address = response.address,
                $shippingAddress = $(target).closest('.shippingaddress'),
                $select = $shippingAddress.find('.select-address'),
                $selected = $select.find('option:selected'),
                newOption = '<option value="' + address.UUID + '">' + (address.ID ? '(' + address.ID + ')' : address.firstName + ' ' + address.lastName) + ', ' + address.address1 + ', ' + address.city + ', ' + address.stateCode + ', ' + address.postalCode + '</option>';
            dialog.close();
            if (add) {
                $('.shippingaddress select').removeClass('no-option').append(newOption);
                $('.no-address').hide();
            } else {
                $('.shippingaddress select').find('option[value="' + address.UUID + '"]').html(newOption);
            }
            // if there's no previously selected option, select it
            if ($selected.length === 0 || $selected.val() === '') {
                $select.find('option[value="' + address.UUID + '"]').prop('selected', 'selected').trigger('change');
            }
        });
    });

    //preserve the uuid of the option for the hop up form
    if (selectedAddressUUID) {
        //update the form with selected address
        $addressList.find('option').each(function () {
            //check the values of the options
            if ($(this).attr('value') === selectedAddressUUID) {
                $(this).prop('selected', 'selected');
                $addressDropdown.trigger('change');
            }
        });
    }
}

/**
 * @function
 * @description shows gift message box in multiship, and if the page is the multi shipping address page it will call initmultishipshipaddress() to initialize the form
 */
exports.init = function () {
    initMultiGiftMessageBox();
    if ($('.cart-row .shippingaddress .select-address').length > 0) {
        formPrepare.init({
            continueSelector: '[name$="addressSelection_save"]',
            formSelector: '[id$="multishipping_addressSelection"]'
        });
    }
    $('.edit-address').on('click', 'a', function (e) {
        e.preventDefault(); //JIRA PREV-205-Checkout Multiple Shipping Page - In Add/Edit address page cancel button not responding
        dialog.open({
            url: this.href,
            options: {
                open: function open() {
                    address.init();
                    addEditAddress(e.target);
                    require('../../validator').init(); //JIRA PREV-98 : validation error messages are not displayed when adding  multiple address.re-init validator.
                    require('../../tooltip').init(); // JIRA PREV-84 : Multiple shipping page: Not displaying Tool tip. re-init tooltips.
                }
            }
        });
    });

    /*
      Start JIRA PREV-99 : shipping methods is not displayed for 2nd address in right nav
      Start JIRA PREV-103 : Selected shipping method will not update automatically in right nav
    */
    $(document).find('.checkoutmultishipping select[name$="_shippingMethodID"]').on('change', function () {
        var shipmentID = $(this).data('shipmentid');
        var shippingMethodId = $('option:selected', this).attr('value');
        ajax.getJson({
            url: Urls.multiShippingSelectSM,
            data: {
                'shipmentID': shipmentID,
                'shippingMethodId': shippingMethodId
            },
            callback: function callback(data) {
                shipping.updateSummary();
                if (!data || !data.success) {
                    window.alert('Could not select shipping method.');
                    return false;
                }
            }
        });
    });
    /*End JIRA PREV-103, PREV-99*/
};

},{"../../ajax":15,"../../dialog":23,"../../tooltip":61,"../../util":63,"../../validator":64,"./address":34,"./formPrepare":36,"./shipping":39}],39:[function(require,module,exports){
'use strict';

var ajax = require('../../ajax'),
    progress = require('../../progress'),
    tooltip = require('../../tooltip'),
    util = require('../../util'),
    dialog = require('../../dialog'),
    uievents = require('../../uievents'),
    $submitButton = $('button.continue-checkout');

/**
 * @function
 * @description Initializes gift message box, if shipment is gift
 */
function giftMessageBox() {
    // show gift message box, if shipment is gift
    $('.gift-message-text').toggleClass('hidden', $('input[name$="_shippingAddress_isGift"]:checked').val() !== 'true');
}

/**
 * @function
 * @description shows the spinning icon on the Continue To Billing button for IE11
 */
function updateButtonIE() {
    // indicate progress
    $submitButton.append('<div class="loader"><div class="loader-indicator"></div><div class="loader-bg"></div></div>');
}

/**
 * @function
 * @description updates the order summary based on a possibly recalculated basket after a shipping promotion has been applied
 */
function updateSummary() {
    var $summary = $('#secondary .new-summery-cart');
    // indicate progress
    if (navigator.userAgent.match(/Trident\/7\./)) {
        updateButtonIE();
    }
    progress.show($summary);
    var stateValue = $('body').find('select[id$="_addressFields_states_state"]').val();
    var url = util.appendParamToURL(Urls.summaryRefreshURL, 'selectedState', stateValue);
    // load the updated summary area
    $summary.load(url, function () {
        // hide edit shipping method link
        $summary.fadeIn('fast');
        $summary.find('.checkout-mini-cart .minishipment .header a').hide();
        $summary.find('.order-totals-table .order-shipping .label a').hide();
        uievents.synccheckoutH();
    });
}

/**
 * @function
 * @description shows the spinning icon on the Continue To Billing button
 */
function updateButton() {
    // indicate progress
    $(function () {
        if (navigator.userAgent.match(/Trident\/7\./)) {
            $submitButton.append('<div class="loader"><div class="loader-indicator"></div><div class="loader-bg"></div></div>');
        }
    });
    progress.show($submitButton);
}

/**
 * @function
 * @description Helper method which constructs a URL for an AJAX request using the
 * entered address information as URL request parameters.
 */
function getShippingMethodURL(url, extraParams) {
    var $form = $('.address');
    var params = {
        address1: $form.find('input[name$="_address1"]').val(),
        address2: $form.find('input[name$="_address2"]').val(),
        countryCode: $form.find('select[id$="_country"]').val(),
        stateCode: $form.find('select[id$="_state"]').val(),
        postalCode: $form.find('input[name$="_postal"]').val(),
        city: $form.find('input[name$="_city"]').val()
    };
    return util.appendParamsToUrl(url, $.extend(params, extraParams));
}

/**
 * @function
 * @description selects a shipping method for the default shipment and updates the summary section on the right hand side
 * @param
 */
function selectShippingMethod(shippingMethodID) {
    // nothing entered
    if (!shippingMethodID) {
        return;
    }

    // attempt to set shipping method
    var url = getShippingMethodURL(Urls.selectShippingMethodsList, {
        shippingMethodID: shippingMethodID
    });
    ajax.getJson({
        url: url,
        callback: function callback(data) {
            updateSummary();
            $('button.continue-checkout .loader').remove();
            uievents.synccheckoutH();
            if (!data || !data.shippingMethodID) {
                window.alert('Couldn\'t select shipping method.');
                return false;
            }
            // display promotion in UI and update the summary section,
            // if some promotions were applied
            $('.shippingpromotions').empty();

            // if (data.shippingPriceAdjustments && data.shippingPriceAdjustments.length > 0) {
            // 	var len = data.shippingPriceAdjustments.length;
            // 	for (var i=0; i < len; i++) {
            // 		var spa = data.shippingPriceAdjustments[i];
            // 	}
            // }
        }
    });
}

/**
 * @function
 * @description Make an AJAX request to the server to retrieve the list of applicable shipping methods
 * based on the merchandise in the cart and the currently entered shipping address
 * (the address may be only partially entered).  If the list of applicable shipping methods
 * has changed because new address information has been entered, then issue another AJAX
 * request which updates the currently selected shipping method (if needed) and also updates
 * the UI.
 */
function updateShippingMethodList() {
    var $shippingMethodList = $('#shipping-method-list');
    if (!$shippingMethodList || $shippingMethodList.length === 0) {
        return;
    }

    if (navigator.userAgent.match(/Trident\/7\./)) {
        updateButtonIE();
    }
    var url = getShippingMethodURL(Urls.shippingMethodsJSON);

    ajax.getJson({
        url: url,
        callback: function callback(data) {
            if (!data) {
                window.alert('Couldn\'t get list of applicable shipping methods.');
                return false;
            }
            /*if (false && shippingMethods && shippingMethods.toString() === data.toString()) { // PREVAIL-Added for 'false' to handle SPC.
                // No need to update the UI.  The list has not changed.
                return true;
            }*/

            // We need to update the UI.  The list has changed.
            // Cache the array of returned shipping methods.
            //shippingMethods = data;
            // indicate progress
            progress.show($shippingMethodList);
            updateButton();
            // load the shipping method form
            var smlUrl = getShippingMethodURL(Urls.shippingMethodsList);
            $shippingMethodList.load(smlUrl, function () {
                $shippingMethodList.fadeIn('fast');
                // rebind the radio buttons onclick function to a handler.
                $shippingMethodList.find('[name$="_shippingMethodID"]').click(function () {
                    updateButton();
                    $('.shipping-methods .shipping-method .value .custom-link ').removeClass('active');
                    $(this).closest('.custom-link').addClass('active');
                    selectShippingMethod($(this).val());
                });

                // update the summary
                updateSummary();
                uievents.synccheckoutH();
                progress.hide();
                tooltip.init();
                //if nothing is selected in the shipping methods select the first one
                if ($shippingMethodList.find('.input-radio:checked').length === 0) {
                    $shippingMethodList.find('.input-radio:first').prop('checked', 'checked');
                }
                $(function () {
                    if (navigator.userAgent.match(/Trident\/7\./)) {
                        $('button.continue-checkout .loader').remove();
                    }
                });
            });
        }
    });
}

function signin() {
    $('#addressform .textinput').addClass('blured');
    $('#addressform .custom-select').addClass('blured');
    $('#addressform .custom-checkbox').addClass('blured');
    $('.signintomyaccount-block,.shipping-createrapalaaccount,.shipping-confirmemailaddress,.shipping-emailaddress,.shipping-guestconfirmemailaddress,.shipping-guestemailaddress,.shipping-password,.shipping-confirmpassword,.shipping-checkoutasguest,.or1,.createaccountmsg').addClass('hide');
    $('.checkoutasguest-block,.shippinglogindetails,.createanaccount-block,.or2,.addressoptions-addToAddressBook,.addressoptions-makedefault,.addressid').removeClass('hide');
    $('.shippinglogindetails').find('input[name$=\'_username\'],input[name$=\'_password\']').addClass('required');
    $('.New-shipping-authentication-detail').find('input[name$=\'_passwordconfirm\'],input[name$=\'_password\'],input[name$=\'_email\'],input[name$=\'_emailconfirm\'],input[name$=\'_guestemailconfirm\'],input[name$=\'_guestemail\']').removeClass('required');
    $('.New-shipping-authentication-detail').find('input[name$=\'_ProcessWay\']').val('2');
    $('.New-shipping-authentication-detail').find('input[name$=\'_passwordconfirm\'],input[name$=\'_password\']').val('');
    $('.checkout .shipping-address-field-section .formfield span.errorclient').remove();
    $('.shipping-address-field-section').addClass('signin-error');
    uievents.synccheckoutH();
}

exports.init = function () {
    if ($(document).find('.address-select').val() != '' && $(document).find('.address-select').val() != undefined) {
        $(document).find('.shipping-address-field-section').addClass('hide');
    } else {
        $(document).find('.shipping-address-field-section').removeClass('hide');
        $(document).find('.selected-shipping-address').addClass('hide');
        $(document).find('.new-address-field').addClass('hide');
    }
    if ($(document).find('.fromreturn1').val() == 'true') {
        $(document).find('.shipping-address-field-section').removeClass('hide');
    }
    $('input[name$="_shippingAddress_isGift"]').on('click', giftMessageBox);

    $('.address').on('change', 'input[name$="_addressFields_address1"], input[name$="_addressFields_address2"], select[name$="_addressFields_states_state"], input[name$="_addressFields_city"], input[name$="_addressFields_postal"]', // PREVAIL-Changed ZIP to postal
    updateShippingMethodList);

    giftMessageBox();
    updateShippingMethodList();

    $('.continue-checkout-button .continue-checkout').on('click', function () {

        updateButton();
        var form = $(this).closest('form[id$="_shippingAddress"]');
        if ($('.state-blk select').valid() == 0) {
            if (!$('.state-blk.custom-select').hasClass('blured')) {
                $('.state-blk.custom-select').addClass('customselect-error');
                //$('.state-blk .stateerror').show();
            }
        } else {
            //$('.state-blk  .stateerror').hide();
            $('.state-blk.custom-select').removeClass('customselect-error');
        }

        if (!$('.checkoutasguestbutton').is(':visible')) {
            $('.guestemailcon').blur();
            $('.guestemail').blur();
        }
        if (!form.valid()) {
            progress.hide();
            if (navigator.userAgent.match(/Trident\/7\./)) {
                $('button.continue-checkout .loader').remove();
            }
            if (jQuery('.shipping-address-field-section').hasClass('hide')) {
                $('select[name$=singleshipping_addressList]').val('');
                $('input[name$="singleshipping_shippingAddress_selectedaddress"]').val('');
                $('.custom-select').each(function () {
                    var selectVal = $(this).find(':selected').text();
                    $(this).find('.selectorOut').text(selectVal);
                });
                $('.shipping-address-field-section').removeClass('hide');
                $('.selected-shipping-address').addClass('hide');
            }
            if (!$('.shippinglogindetails').is(':visible')) {
                $('.singleshipping_error').removeClass('hide');
                $('.signinabove').hide();
            } else if ($('.shippinglogindetails').is(':visible')) {
                if (!$('.shippinglogindetails form').valid()) {
                    $('.shippinglogindetails .username .textinput, .shippinglogindetails .textinputpw').blur();
                    $('button[name$="login_login"]').trigger('click');
                }
                var errormsg = '<div id=\'message\' class=\'error-alert signinabove\' style=\'text-align: left;\'>Please Log in above to continue</div>';
                if ($('#dwfrm_singleshipping_shippingAddress .formactions #message').length > 0 || $('#dwfrm_singleshipping_shippingAddress .formactions .singleshipping_error').length > 0) {
                    jQuery('#dwfrm_singleshipping_shippingAddress .formactions #message').remove();
                    jQuery('#dwfrm_singleshipping_shippingAddress .formactions .singleshipping_error').hide();
                }
                jQuery('.singleshipping_error').hide();
                jQuery('#dwfrm_singleshipping_shippingAddress .formactions').prepend(errormsg);
                uievents.synccheckoutH();
                return false;
            }
        } else {
            $('.singleshipping_error').addClass('hide');
        }
        uievents.synccheckoutH();
    });

    $('body').on('click', '.go-as-guest-checkout', function () {
        $('.shipping-checkoutasguest, .signintomyaccount-block').removeClass('hide');
        $('.shippinglogindetails , .addressid').addClass('hide');
        uievents.synccheckoutH();
    });
    if ($('.state-shipping-valid-dialog').length > 0) {
        var dialogWidth = 511;
        var singOutDialog = dialog.create({
            target: '#dialog-container',
            options: {
                bgiframe: true,
                autoOpen: false,
                modal: true,
                width: dialogWidth,
                dialogClass: 'state-shipping-dialog'
            }
        });
        $(singOutDialog).empty().append($('.state-shipping-valid-dialog').html());
        singOutDialog.dialog('open');
    }
    $('body').on('click', '.shippingsignout', function (e) {
        e.preventDefault();
        $.ajax({
            url: this.href,
            success: function success(data) {
                var dialogWidth = 500;
                /*if( $(window).width() < 767 ){
                    dialogWidth = 300
                }*/
                var singOutDialog = dialog.create({
                    target: '#dialog-container',
                    options: {
                        bgiframe: true,
                        autoOpen: false,
                        modal: true,
                        width: dialogWidth,
                        dialogClass: 'sing-out-dialog'
                    }
                });
                $(singOutDialog).empty().append(data);
                singOutDialog.dialog('open');
            }
        });
    });
    $('body').on('click', '.signintomyaccountbutton', function () {
        signin();
        $('form[id$="_login"] .formfield.username, form[id$="_login"] .formfield.password').each(function () {
            $(this).find('.value input').val('').removeClass('errorclient');
            $(this).find('.value span.errorclient').hide();
        });
        $('form[id$="_login"] .wrongaddress').hide();
        $('form[id$="_login"] .#message.error').remove();

        $('.singleshipping_error').hide();
        $('.shipping-emaildetaillinks').addClass('loginactive');
        $('.shipping-emaildetaillinks').removeClass('reginactive');
        $('.New-shipping-authentication-detail input[id$="shippingAddress_email"]').removeClass('accemail');
        $('.New-shipping-authentication-detail input[id$="shippingAddress_emailconfirm"]').removeClass('accemailcon');
        $('.New-shipping-authentication-detail input[name$=\'_guestemailconfirm\']').removeClass('guestemailcon');
        $('.New-shipping-authentication-detail input[name$=\'_guestemail\']').removeClass('guestemail');
        $('.shippinglogindetails input[name$=\'login_username\']').addClass('loggedemail');
        $('.shippinglogindetails .correctaddress').removeClass('error').hide();
        if ($('.emailhidden').val()) {
            $('input[id$="login_username"]').val($('.emailhidden').val());
            $('input[id$="login_username"]').blur();
            $('input[id$="login_username"]').closest('.formfield').find('.correctaddress').show();
        }
        $('.New-shipping-authentication-detail input[name$=\'shippingAddress_password\']').removeClass('c_password');
        $('.New-shipping-authentication-detail input[name$=\'shippingAddress_passwordconfirm\']').removeClass('cm_password');
        $('.shippinglogindetails input[name$=\'login_password\']').addClass('login_password');
        $('.shipping-address-field-section .value input').removeClass('errorclient');
        $('.shipping-address-field-section .value span.errorclient').hide();
        $('.custom-select').removeClass('customselect-error');
        $('.stateerror').hide();
        uievents.synccheckoutH();
    });

    $('.shipping-guestemailaddress .textinput, .shipping-guestconfirmemailaddress .textinput, .shippinglogindetails .username .textinput, .shippinglogindetails .textinputpw, .shipping-emailaddress .textinput, .shipping-confirmemailaddress .textinput, .shipping-password .textinputpw, .shipping-confirmpassword .textinputpw').blur(function () {
        if ($(this).valid() == 0) {
            $(this).closest('.formfield').find('.correctaddress').addClass('error').show();
        } else {
            $(this).closest('.formfield').find('.correctaddress').removeClass('error').show();
        }
    });
    //PREVAIL - init Address Validation
    require('../../addressvalidation').init();
};

exports.updateShippingMethodList = updateShippingMethodList;
exports.updateSummary = updateSummary; //JIRA PREV-99 : shipping methods is not displayed for 2nd address in right nav.

},{"../../addressvalidation":14,"../../ajax":15,"../../dialog":23,"../../progress":52,"../../tooltip":61,"../../uievents":62,"../../util":63}],40:[function(require,module,exports){
'use strict';

var addProductToCart = require('./product/addToCart'),
    ajax = require('../ajax'),
    page = require('../page'),
    productTile = require('../product-tile'),
    quickview = require('../quickview');

/**
 * @private
 * @function
 * @description Binds the click events to the remove-link and quick-view button
 */
function initializeEvents() {
    $('#compare-table').on('click', '.remove-link', function (e) {
        e.preventDefault();
        ajax.getJson({
            url: this.href,
            callback: function callback(response) {
                /* Start JIRA PREV-74 : Compare page: Not navigating to PLP, When user clicks the "Remove (X)" icon on the last product,present in the product compare page.
                   Added condition to check for the last product removal if so navigate back to previous PLP.
                 */
                if (response.success && $('#compare-table .product-tile').length <= 1 && $('#compare-category-list').length === 0) {
                    window.location.href = $('.back').attr('href');
                } else if (response.success && $('#compare-table .product-tile').length <= 1 && $('#compare-category-list').length > 0) {
                    $('#compare-category-list option:selected').remove();
                    $('#compare-category-list').trigger('change');
                } else {
                    page.refresh();
                }
                /*End JIRA PREV-74 */
            }
        });
    }).on('click', '.open-quick-view', function (e) {
        e.preventDefault();
        var url = $(this).closest('.product').find('.thumb-link').attr('href');
        quickview.show({
            url: url,
            source: 'quickview'
        });
    });

    $('#compare-category-list').on('change', function () {
        $(this).closest('form').submit();
    });
}

exports.init = function () {
    productTile.init();
    initializeEvents();
    addProductToCart();
};

},{"../ajax":15,"../page":30,"../product-tile":51,"../quickview":54,"./product/addToCart":42}],41:[function(require,module,exports){
'use strict';

var util = require('../util');

function initializationEvent() {
    var currentSiteID = '';
    var currentSessionSite = $('body').find('.current-session-site').val();
    switch (currentSessionSite) {
        case 'rapala':
            currentSiteID = '1';
            break;
        case 'sufix':
            currentSiteID = '2';
            break;
        case 'triggerx':
            currentSiteID = '3';
            break;
        case 'storm':
            currentSiteID = '4';
            break;
        case 'luhrjensen':
            currentSiteID = '5';
            break;
        case 'vmc':
            currentSiteID = '6';
            break;
        case 'terminator':
            currentSiteID = '7';
            break;
        case 'bluefox':
            currentSiteID = '8';
            break;
        case 'williamson':
            currentSiteID = '9';
            break;
        case 'marcum':
            currentSiteID = '10';
            break;
        case 'strikemaster':
            currentSiteID = '11';
            break;
        case 'iceforce':
            currentSiteID = '20';
            break;
        case 'otter':
            currentSiteID = '21';
            break;
        default:
            currentSiteID = '1';
    }

    if (document.location.pathname.indexOf('ChangeRegion') < 0) {
        if (typeof geoipCountryCode == 'function') {
            var IPGeoCode = geoipCountryCode();
            var allowedCountries = $('.allowed-countries').text();
            if (allowedCountries == null || allowedCountries == 'null' || allowedCountries == 'undefined') {
                allowedCountries = 'US';
            }
            if (allowedCountries.indexOf(IPGeoCode) != -1) {
                var url = util.appendParamToURL(Urls.internationalHomeShow, 'id', currentSiteID);
                window.location.href = url;
            }
        }
    }
}

var international = {
    init: function init() {
        initializationEvent();
    }
};
module.exports = international;

},{"../util":63}],42:[function(require,module,exports){
'use strict';

var dialog = require('../../dialog'),
    minicart = require('../../minicart'),
    util = require('../../util'),
    TPromise = require('promise'),
    _ = require('lodash');

/**
 * @description Handler to handle the add all items to cart event
 */
var addAllToCart = function addAllToCart(e) {
    e.preventDefault();

    //PREVAIL-Added for GA integration
    //GAcommented
    if (isEventTrackingEnabled && isGoogleAnalyticsEnabled) {
        googleAnalyticsEvents.addProductSet();
    }

    var $productForms = $('#product-set-list').find('form').toArray();
    TPromise.all(_.map($productForms, addToCart)).then(function (responses) {
        dialog.close();
        // show the final response only, which would include all the other items
        minicart.show(responses[responses.length - 1]);
    });
};

/**
 * @function
 * @description Binds the click event to a given target for the add-to-cart handling
 */
// adds a product to the mini cart
// @params
// progressImageSrc - source/url of the image to show when the item
// is being added to the cart
// postdata - form data containing the product information to be
// added to mini-cart
// callback - call back function/handler
var addToCart = {
    init: function init() {
        $('.checkoutminicart').slimscroll();
        $('.add-to-cart[disabled]').attr('title', $('.availability-msg').text());
        //Start JIRA PREV-454, PREV-469 : Application navigation not consistent when click of add to cart button of the Product set page
        $('#add-all-to-cart').on('click', addAllToCart);
        if ($('.mini-cart-product').length > 1) {
            $('.minicartcontent .slimScrollDiv').removeClass('less');
            $('.minicartcontent .slimScrollDiv .slimScrollBar').show();
        } else {
            $('.minicartcontent .slimScrollDiv').addClass('less');
            $('.minicartcontent .slimScrollDiv .slimScrollBar').hide();
        }
    },
    add: function add(progressImageSrc, postdata, callback) {
        // get the data of the form as serialized string
        //var postdata = postdata;

        fbq('track', 'AddToCart', {
            'content_ids': [postdata.pid],
            'content_type': 'product'
        });

        // get button reference
        var addButtons = [];

        // the button to update
        var addButton = null;

        // it is an array of buttons, but we need only one all
        // other combinations are strange so far
        if (addButtons.length == 1) {
            addButton = addButtons[0];
        }

        var previousImageSrc = null;

        // show progress indicator
        if (addButton != null) {
            previousImageSrc = addButton.src;
            addButton.src = progressImageSrc;
        }

        // handles successful add to cart
        var handlerFunc = function handlerFunc(req) {

            if ($('#container').hasClass('pt_cart')) {
                window.location.href = window.location.href;
            }
            // hide progress indicator
            if (addButton != null) {
                addButton.src = previousImageSrc;
            }

            // replace the content
            jQuery('#minicart').html(req);
            addToCart.init();
            if ($('.minirow').length > 1 && !$('body').hasClass('rapala_device')) {
                $('.checkoutminicart').slimscroll({
                    railVisible: true,
                    alwaysVisible: true
                });
                $('.minicarttable').find('thead').first().addClass('theadfixedTop');
                $('.checkoutminicart').find('.cartordertotals').removeClass('carttotals');
                $('.checkoutminicart').find('.minicarttable').removeClass('miniwithoutScroll');
                $('.minicartcontent').find('.minicarttableheader').removeClass('miniwithoutScrollhead');
                $('.minicarttableheader').css('border-bottom', '1px solid #ccc');
            } else {
                $('.minicarttable').find('.theadfixedTop').removeClass('theadfixedTop');
                $('.minicarttable').find('.fixedTop').removeClass('fixedTop');
                $('.minicart').find('.cartordertotals').addClass('carttotals');
                $('.checkoutminicart').find('.minicarttable').addClass('miniwithoutScroll');
                $('.minicartcontent').find('.minicarttableheader').addClass('miniwithoutScrollhead');
                $('.minicarttableheader').css('border-bottom', '1px solid #ccc');
            }

            if ($('body').hasClass('rapala_device')) {
                $('.checkoutminicart').find('.minicarttable').removeClass('miniwithoutScroll');
                // $(".minicarttable .tr_rotation:last-child").find('.minirow').css('border','1px');
                $('.minicarttable').find('thead').first().addClass('theadfixedTop');
                $('.minicarttable .tr_rotation:last-child').find('.minirow').css('border', '0px');
                $('.minicarttableheader').css('border-bottom', '1px solid #ccc');
            }
            $('.minicarttable .tr_rotation:last-child').find('.minirow').css('border', '0px');

            if (minicart.suppressSlideDown && minicart.suppressSlideDown()) {
                // do nothing
                // the hook 'MiniCart.suppressSlideDown()' should have
                // done the refresh
            } else {
                minicart.slide();
                minicart.setminicarheight();
                if (callback) {
                    callback();
                }
            }
            $('#pdpMain .addtocartconfirm-tooltip').fadeIn(400).show().delay(1500).fadeOut(400);
            // fire the BonusDiscountLineItemCheck event so we can check
            // if there is a bonus discount line item
            jQuery(document).trigger(
            /*eslint-disable */
            jQuery.Event('BonusDiscountLineItemCheck'));
            /*eslint-enable */
        };

        // handles add to cart error
        var errFunc = function errFunc() {
            // hide progress indicator
            if (addButton != null) {
                addButton.src = previousImageSrc;
            }
        };

        // closes a previous mini cart
        minicart.close();

        var url = Urls.addProduct;

        // add the product
        //Looks the below commented code is not required and this is stopping not able add variation product from quick view in cart page.
        /* if ($('#container').hasClass('pt_cart') && $('.addTo-cart-section').find('.recommendation_cart').length == 0) {
            var plItemId = $('input.line-itemid').val();
            var params = {
                updateQty: 'true',
                lineItemId: plItemId
            };
            url = util.appendParamsToUrl(Urls.editLineItem, params);
        } */

        $.ajax({
            type: 'POST',
            url: util.ajaxUrl(url),
            cache: true,
            data: postdata,
            success: handlerFunc,
            error: errFunc
        });
    }
};
module.exports = addToCart;

},{"../../dialog":23,"../../minicart":29,"../../util":63,"lodash":5,"promise":6}],43:[function(require,module,exports){
'use strict';

var pdpEvents = require('./pdpEvents'),
    addToCart = require('./addToCart');

var product = {
    init: function init() {
        //initializeDom();
        //initializeEvents();
        addToCart.init();
        pdpEvents.init();
    }
};

module.exports = product;

},{"./addToCart":42,"./pdpEvents":44}],44:[function(require,module,exports){
'use strict';

var util = require('../../util'),
    dialog = require('../../dialog'),

//tooltip = require('../../tooltip'),
//uievents = require('../../uievents'),
//quickview = require('../../quickview'),
addToCart = require('./addToCart'),
    progress = require('../../progress'),
    ajax = require('../../ajax');

var product = function product(response) {
    // product private data

    // product json data
    var model = response;

    // div cotainer id
    var myContainerId = '';

    // boolean flag to track the variants data request, reset in loadVariants() when the variants data is loaded
    var isLoadingVar = false;

    // helper function to load variants data from the server
    // once the data is retrieved, it fires VariationsLoaded event so that UI can be refreshed appropriately
    var loadVariants = function loadVariants(thisProduct) {
        isLoadingVar = true;
        // build the url and load variants data
        ajax.getJson({
            url: Urls.getVariants,
            data: { 'pid': thisProduct.pid, 'format': 'json' },
            callback: function callback(data) {

                if (!data || !data.variations || !data.variations.variants) {
                    return;
                }
                model.variations.variants = data.variations.variants;
                isLoadingVar = false; // we have loaded the variants
                jQuery(thisProduct).trigger('VariationsLoaded');
            }
        });
    };

    // helper function to reload availability data.
    // by default, availability data is based on a quantity of 1.
    // if a customer changes the quantity, use this method
    // to reload the availability based on the new quantity.
    var reloadAvailability = function reloadAvailability(thisProduct, quantity) {

        var id = '';
        if (thisProduct.master || thisProduct.variant) {
            id = thisProduct.selectedVar.id;
        } else {
            id = thisProduct.pid;
        }

        ajax.getJson({
            url: Urls.getAvailability,
            data: { 'pid': id, 'Quantity': quantity, 'format': 'json' },
            callback: function callback(data) {

                if (!data || !data.levels) {
                    return;
                }

                // update the data in the variant
                if ((thisProduct.master || thisProduct.variant) && thisProduct.selectedVar) {
                    thisProduct.selectedVar.avLevels = data.levels;
                    thisProduct.selectedVar.avStatus = data.status;
                    thisProduct.selectedVar.avStatusQuantity = data.statusQuantity;
                } else {
                    model.avLevels = data.levels;
                    model.avStatus = data.status;
                    model.avStatusQuantity = data.status;
                }
                jQuery(thisProduct).trigger('ReloadAvailability');
            }
        });
    };
    // returns the aggregate available to sell value
    // from all variants
    var getATS = function getATS(variants) {

        var atsCount = 0;
        var variant;
        for (var i = 0; i < variants.length; i++) {
            variant = variants[i];
            if (variant.ATS > 0) {
                atsCount = atsCount + variant.ATS;
            }
        }
        return atsCount;
    };

    // returns the aggregate available to sell value
    // from all variants
    var getAvailability = function getAvailability(variants) {

        var available = false;
        var variant;
        for (var i = 0; i < variants.length; i++) {
            variant = variants[i];
            if (variant.avStatus !== 'NOT_AVAILABLE') {
                available = true;
                break;
            }
        }
        return available;
    };

    // helper function to bind product options drop downs event handlers
    // Intializes the product.selectedOptions object with the currently selected options
    // it also shows the computed/updated price
    var getOptionsDiv = function getOptionsDiv(thisProduct) {

        if (model.isOption) {

            var pdpOpt = jQuery(thisProduct.containerId + ' .product_options:last select');

            pdpOpt.change(function () {
                var vals = this.options[this.selectedIndex].value.split('%?%'); // 0 = value, 1 = price
                thisProduct.selectedOptions[this.id] = vals[0];
                thisProduct.selectedPrice[this.id] = vals[1];
                thisProduct.showUpdatedPrice(computePrice(thisProduct), model.pricing.standard);
            });

            // let us get the currently selected value and intilize the ui
            pdpOpt.each(function () {
                var vals = this.options[this.selectedIndex].value.split('%?%'); // 0 = value, 1 = price

                thisProduct.selectedOptions[this.id] = vals[0];
                thisProduct.selectedPrice[this.id] = vals[1];
                thisProduct.showUpdatedPrice(computePrice(thisProduct), model.pricing.standard);
            });
        }
    };

    // binds A2C button click handler
    var getAddToCartBtn = function getAddToCartBtn(thisProduct) {
        var addToCartBtn = jQuery(thisProduct.containerId + ' .addtocartbutton:last').click(function () {
            if (model.master || model.variant) {
                if (thisProduct.selectedVar == null) {
                    return false;
                }

                // it is necessary to update the option id to be variant-specific
                jQuery(thisProduct.containerId + ' .product_options:last select').each(function () {
                    var value = thisProduct.selectedOptions[this.id];
                    var newId = this.id.replace(thisProduct.pid, thisProduct.selectedVar.id);
                    thisProduct.selectedOptions[newId] = value;
                    delete thisProduct.selectedOptions[this.id];
                });

                thisProduct.selectedOptions.pid = thisProduct.selectedVar.id;
                thisProduct.selectedOptions.masterPid = thisProduct.pid;
            } else {
                var tempQty = '';
                // check if we are adding a bundle/productset to the cart
                if (model.bundle || model.productSet) {
                    var subProducts = thisProduct.subProducts;
                    var comma = ',';
                    var subproduct = null;

                    thisProduct.selectedOptions.childPids = '';

                    if (model.productSet) {
                        thisProduct.selectedOptions.Quantity = '';
                    }

                    // process each individual products in the set/bundle
                    // and prepare product.selectedOptions for final submission
                    for (var i = 0; i < subProducts.length; i++) {
                        subproduct = subProducts[i];

                        if (i == subProducts.length - 1) {
                            comma = ''; // at the end of the list
                        }

                        // see if any of the sub products are variations, if so then get the selected variation id
                        // from selectedVar property and make it a comma separated list
                        if ((subproduct.variant || subproduct.master) && subproduct.selectedVar == null) return false;
                        if (subproduct.variant || subproduct.master) {
                            thisProduct.selectedOptions.childPids += subproduct.selectedVar.id + comma;
                        } else {
                            thisProduct.selectedOptions.childPids += subproduct.pid + comma;
                        }

                        var tempPid = subproduct.selectedOptions.pid;
                        subproduct.selectedOptions.pid = null;
                        // merge selected options of sub product with the main product
                        thisProduct.selectedOptions = jQuery.extend({}, thisProduct.selectedOptions, subproduct.selectedOptions);
                        subproduct.selectedOptions.pid = tempPid;

                        // if it is a product set then sub products can have their separate qty
                        if (model.productSet) {
                            tempQty += subproduct.selectedOptions.Quantity + comma;
                        }
                    }
                }

                // if it is a product set then sub products can have their separate qty
                // tempQty is a comma separated list of qty for each product in the set
                if (model.productSet) {
                    thisProduct.selectedOptions.Quantity = tempQty;
                }

                // make sure the pid which gets submitted is for the main product
                thisProduct.selectedOptions.pid = thisProduct.pid;
            }

            if (model.bundle) {
                thisProduct.selectedOptions.Quantity = 1; // hard coded qty=1 when we the product is a bundle
            } else if (!model.productSet) {
                // grab the user entered qty
                thisProduct.selectedOptions.Quantity = jQuery(thisProduct.containerId + ' .quantityinput:last').val();
            }

            // if it is not a productset then make sure qty is specified greater than 0
            if (model.productSet || thisProduct.selectedOptions.Quantity > 0) {
                // disable a2c button
                addToCartBtn.prop('disabled', true);

                // find if there is a handler bound to AddToCart event e.g. cart -> edit details or wishlist -> edit details etc.
                // then fire it otherewise call addToCart.add to add the selected product to the cart and show minicart
                /*eslint-disable */
                var event = jQuery.Event('AddToCart');
                /*eslint-enable */
                event.selectedOptions = thisProduct.selectedOptions;

                if (jQuery.event.global.AddToCart == undefined || jQuery.event.global.AddToCart == null) {
                    addToCart.add('', thisProduct.selectedOptions, function () {
                        addToCartBtn.prop('disabled', false);
                    });
                } else {
                    jQuery(document).trigger(event);
                }
            }
            return false;
        });

        return addToCartBtn;
    };

    // bind qty box keyup handler
    // the handler grabs the value and updates
    // product.selectedOption.Quantity
    // show the updated availabilty message in case the available qty is different than available etc.
    // trigger AddtoCartEnabled event
    var getQtyBox = function getQtyBox(thisProduct) {

        jQuery(thisProduct.containerId + ' .quantityinput:last').keyup(function () {
            var val = null;
            try {
                val = parseInt(jQuery(thisProduct.containerId + ' .quantityinput:last').val(), 10);
            } catch (e) {
                val = null;
            }

            if (val) {
                thisProduct.selectedOptions.Quantity = val;

                // if the product has variations check for non selected ones and display missing value
                if (model.variations != undefined) {
                    var nonSelectedVars = [];

                    // get the non-selected variations
                    jQuery.each(model.variations.attributes, function () {
                        if (!thisProduct.selectedVarAttribs[this.id] || thisProduct.selectedVarAttribs[this.id] == '') {
                            nonSelectedVars.push(this.name);
                        }
                    });

                    if (nonSelectedVars.length > 0) {

                        // make sure there is something to sell
                        var atsCount = getATS(model.variations.variants);
                        if (atsCount == 0) {
                            return;
                        }

                        var tooltipStr = getNonSelectedTooltip(nonSelectedVars);
                        var missingMsg = $.validator.format(Resources.MISSING_VAL, tooltipStr);
                        setAvailabilityMsg(missingMsg);
                        return;
                    }
                }

                // If the quantity value is different than
                // when we loaded the availability data, then
                // refresh availability data for this variant
                if (val != thisProduct.getAvailabilityQty()) {
                    reloadAvailability(thisProduct, val);
                }
                //JCK: this isn't being run AFTER AJAX?
                //setAvailabilityMsg(createAvMessage(thisProduct, val));
                //jQuery(thisProduct).trigger("AddtoCartEnabled");
            }
        });

        // grab the currently displayed value basically the initial displayed value
        thisProduct.selectedOptions.Quantity = jQuery(thisProduct.containerId + ' .quantityinput:last').val();

        if (!isLoadingVar) {
            // show proper availability message
            setAvailabilityMsg(createAvMessage(thisProduct, thisProduct.selectedOptions.Quantity));
        }
    };

    // create product tabs i.e. description, Attributes, Reviews etc.
    // it depends on jQuery to create tab display.
    // also bind tab print button click handler
    var getTabs = function getTabs(containerId) {

        var tabsDiv = jQuery(containerId + ' #tabs');
        tabsDiv.tabs();

        // tab print handler
        jQuery('a.printpage').click(function () {
            window.print();
            return false;
        });
    };

    // register initializations here
    //show and hide handling of specific country.
    if (typeof geoipCountryCode == 'function') {
        var IPGeoCode = geoipCountryCode();
        var allowedCountries = $('.allowed-countries').text();
        if (allowedCountries == null || allowedCountries == 'null' || allowedCountries == 'undefined') {
            allowedCountries = 'US';
        }
        if (allowedCountries.indexOf(IPGeoCode) == -1) {
            $('.addtowishlist').addClass('hide');
        }
    }

    // bind addtowishlist, giftregistry, send to friend click handlers
    // bind handlers to AddtoCartDisabled, AddtoCartEnabled events for disabling/enabling wishlist/gift registry links
    var getMiscLinks = function getMiscLinks(thisProduct) {

        var disablelinks = function disablelinks() {
            if ((model.master || model.variant) && thisProduct.selectedVar == null) {
                // disable wishlist/gift registry links for master products
                jQuery(thisProduct.containerId + ' .addtowishlist, ' + thisProduct.containerId + ' .addtoregistry').addClass('unselectable');
            }
        };

        disablelinks(); // call it for initial display and then register it with AddtoCartDisabled event

        jQuery(thisProduct).bind('AddtoCartDisabled', {}, disablelinks);

        jQuery(thisProduct).bind('AddtoCartEnabled', {}, function () {
            // enable wishlist/gift registry links for variant products
            jQuery(thisProduct.containerId + ' .addtowishlist, ' + thisProduct.containerId + ' .addtoregistry').removeClass('unselectable');
        });

        // listen for availability reload events
        jQuery(thisProduct).bind('ReloadAvailability', {}, function (e) {
            // update the availability message
            var variant = e.target.selectedVar;
            setAvailabilityMsg(createAvMessage(e.target, variant == null ? model.avStatusQuantity : variant.avStatusQuantity));
            jQuery(e.target).trigger('AddtoCartEnabled');
        });

        // Add to wishlist, Add to gift registry click handler

        jQuery(thisProduct.containerId + ' .addtowishlist a.auth').click(function () {
            // append the currently selectied options to the url

            // create a local copy of the selected options
            var selectedOptions = jQuery.extend({}, {}, thisProduct.selectedOptions);

            if (model.master || model.variant) {
                if (thisProduct.selectedVar != null) {
                    selectedOptions.pid = thisProduct.selectedVar.id;
                } else {
                    return false; // do not allow master product to be added to gift registry/wishlist
                }
            } else {
                selectedOptions.pid = thisProduct.pid;
            }

            var tempUrl = this.href;

            if (!(tempUrl.indexOf('?') > 0)) {
                tempUrl = tempUrl + '?';
            } else {
                tempUrl = tempUrl + '&';
            }
            // serialize the name/value into url query string and append it to the url, make request
            var url = tempUrl + jQuery.param(selectedOptions);
            $.ajax({
                type: 'GET',
                url: url,
                dataType: 'html',
                success: function success() {
                    jQuery('#pdpMain .addtowishlist .addtowish-tooltip').fadeIn(400).delay(1500).fadeOut(400);
                },
                failure: function failure() {
                    alert('${Resource.msg(\'global.serverconnection\',\'locale\',null)}');
                }
            });
            setTimeout(function () {
                $('.ui-dialog-titlebar-close').trigger('click');
            }, 1500);
            //window.location = tempUrl + jQuery.param(selectedOptions);
            return false;
        });

        // Add to wishlist, Add to gift registry click handler
        jQuery(thisProduct.containerId + ' .addtowishlist a.non-auth, ' + thisProduct.containerId + ' .addtoregistry a').click(function () {
            // append the currently selectied options to the url

            // create a local copy of the selected options
            var selectedOptions = jQuery.extend({}, {}, thisProduct.selectedOptions);

            if (model.master || model.variant) {
                if (thisProduct.selectedVar != null) {
                    selectedOptions.pid = thisProduct.selectedVar.id;
                } else {
                    return false; // do not allow master product to be added to gift registry/wishlist
                }
            } else {
                selectedOptions.pid = thisProduct.pid;
            }

            var tempUrl = this.href;

            if (!(tempUrl.indexOf('?') > 0)) {
                tempUrl = tempUrl + '?';
            } else {
                tempUrl = tempUrl + '&';
            }
            // serialize the name/value into url query string and append it to the url, make request
            //var url = tempUrl + jQuery.param(selectedOptions);
            window.location = tempUrl + jQuery.param(selectedOptions);
            return false;
        });

        jQuery(thisProduct.containerId + ' .sendtofriend').click(function () {
            // create a local copy of the selected options
            var selectedOptions = jQuery.extend({}, {}, thisProduct.selectedOptions);

            if ((model.master || model.variant) && thisProduct.selectedVar != null) {
                selectedOptions.pid = thisProduct.selectedVar.id;
            } else {
                selectedOptions.pid = thisProduct.pid;
            }
            var tempURL = Urls.sendToFriend + '?' + jQuery.param(selectedOptions);
            dialog.open(tempURL, Resources.SEND_TO_FRIEND);
            return false;
        });
    };

    // binds product reviews click handlers
    // read review link opens reviews tab
    var getRatingSection = function getRatingSection(containerId) {

        jQuery(containerId + ' #pdpReadReview').click(function () {
            jQuery(containerId + ' #tabs').tabs('select', 'pdpReviewsTab');
        });

        jQuery(containerId + ' #pdpWriteReview').click(function () {});
    };

    // based on availability status, creates a message
    // param val - the stock value to compare i.e. qty entered by user
    var createAvMessage = function createAvMessage(thisProduct, val) {

        var avStatus = thisProduct.getAvStatus(); // availability status
        var avMessage = Resources[avStatus];
        var ats = thisProduct.getATS(); // get available to sell qty
        var avLevels = thisProduct.getAvLevels();
        var nonCloseoutLowQtyThreshold = thisProduct.getNonCloseoutLowQtyThreshold();

        // get ats levels per-status
        var inStockLevel = avLevels[Constants.AVAIL_STATUS_IN_STOCK];
        var backOrderLevel = avLevels[Constants.AVAIL_STATUS_BACKORDER];
        var preOrderLevel = avLevels[Constants.AVAIL_STATUS_PREORDER];
        //var notAvailLevel = avLevels[Constants.AVAIL_STATUS_NOT_AVAILABLE];

        if (avStatus === Constants.AVAIL_STATUS_IN_STOCK) {
            avMessage = '<span class=\'in-stock\'>' + avMessage + '</span>';
        }
        if (avStatus === 'NOT_AVAILABLE') {
            avMessage = '<span class=\'out-of-stock\'>' + avMessage + '</span>';
        }
        if (avStatus === Constants.AVAIL_STATUS_BACKORDER || avStatus === Constants.AVAIL_STATUS_PREORDER) {
            if (val > ats && ats > 0) {
                avMessage = avMessage + '<span class=\'in-stock\'>' + $.validator.format(Resources['QTY_' + avStatus], ats) + '</span>';
            }
            // display backorder/preorder availability
            avMessage = avMessage + getInStockDateMsg(thisProduct);
        } else if (val > inStockLevel && avStatus !== Constants.AVAIL_STATUS_NOT_AVAILABLE) {

            avMessage = '';
            if (inStockLevel > 0) {
                avMessage = avMessage + '<span class=\'in-stock\'>' + $.validator.format(Resources['QTY_' + Constants.AVAIL_STATUS_IN_STOCK], inStockLevel) + '</span>';
            }
            if (backOrderLevel > 0) {
                avMessage = avMessage + $.validator.format(Resources['QTY_' + Constants.AVAIL_STATUS_BACKORDER], backOrderLevel);
                // uncomment the following line to display availability message with back order information
                // avMessage = avMessage + getInStockDateMsg(thisProduct);
            }
            if (preOrderLevel > 0) {
                avMessage = avMessage + $.validator.format(Resources['QTY_' + Constants.AVAIL_STATUS_PREORDER], preOrderLevel);
                // uncomment the following line to display availability message with back order information
                // avMessage = avMessage + getInStockDateMsg(thisProduct);
            }
        } else if (ats !== 0 && ats <= nonCloseoutLowQtyThreshold) {
            avMessage = '<span class=\'low\'>' + $.validator.format(Resources.LOW, nonCloseoutLowQtyThreshold) + '</span>';
        }
        var standardPrice = thisProduct.selectedVar != null ? Number(thisProduct.selectedVar.pricing.standard || 0) : Number(model.pricing.standard || 0);

        var salePrice = Number(computePrice(thisProduct) || 0);

        if (standardPrice === 0 && salePrice === 0) {
            if (thisProduct.selectedVar != null) {
                if (thisProduct.selectedVar.earlyBirdMessage != '') {
                    avMessage = '<span class=\'coming-soon\'>' + thisProduct.selectedVar.earlyBirdMessage + '</span>';
                } else {
                    avMessage = '';
                }
            } else {
                if ($('.ebm-std-prod').length > 0 && $.trim($('.ebm-std-prod').text()) != '') {
                    avMessage = '<span class=\'coming-soon\'>' + $('.ebm-std-prod').text() + '</span>';
                } else {
                    avMessage = '';
                }
            }
        }
        return avMessage;
    };

    // helper function that returns the in-stock date
    var getInStockDateMsg = function getInStockDateMsg(product) {
        var msg = '';
        if (product.getInStockDate() && product.getInStockDate() != 'null') {
            msg = $.validator.format(Resources.IN_STOCK_DATE, new Date(product.getInStockDate()).toDateString());
        }
        return msg;
    };

    // helper function to set availability message
    var setAvailabilityMsg = function setAvailabilityMsg(msg) {
        jQuery(myContainerId + ' .availability:last .value').html(msg);
    };

    /**
     * Private. Computes price of a given product instance based on the selected options.
     *
     * @param thisProduct - the product instance
     * @return price of the product to 2 decimal points.
     */
    var computePrice = function computePrice(thisProduct) {

        var price = thisProduct.selectedVar != null ? thisProduct.selectedVar.pricing.sale : model.pricing.sale;
        // calculate price based on the selected options prices
        jQuery.each(thisProduct.selectedPrice, function () {
            price = (new Number(price) + new Number(this)).toFixed(2);
        });

        return price;
    };
    // Load the youtube videos only on demand
    // when the user clicks on the videos tab, then the youtube videos will be fetched dynamically
    // and loads the content in the pdpVideoTab div.
    jQuery('.videoTab').click(function () {
        if ($(this).hasClass('loaded')) {
            return false;
        }
        $(this).addClass('loaded');
        var target = $('#pdpVideoTab');
        var url = $('#productURL').val();
        ajax.load({
            url: url,
            dataType: 'html',
            callback: function callback(data) {
                target.html(data);
            }
        });
    });
    // bind click handlers for prev/next buttons on pdp from search
    var getNavLinks = function getNavLinks() {

        // NOTE:  WE COMMENT THIS OUT BECAUSE POWER REVIEWS RENDERING LIBRARY DOES NOT
        // WORK IN SOME BROWSERS WHEN A PRODUCT DETAIL PAGE IS PARTIALLY RELOADED USING AJAX.
        // IF WE DO NOT BIND EVENTS, THEN THE PREV/NEXT ANCHORS JUST WORK AS STANDARD
        // HYPERLINKS AND POWERREVIEWS WORKS FINE.

        // bind events
        //jQuery(".productnavigation a").click(function(e) {
        //	app.getProduct({url: this.href, source: "search"});
        //	return false;
        //});
    };

    // size chart link click binding
    var getSizeChart = function getSizeChart() {
        jQuery('.attributecontentlink').click(function () {
            // add size chart dialog container div if its not added yet
            // only added once
            if (jQuery('#sizeChartDialog').length == 0) {
                jQuery('<div/>').attr('id', 'sizeChartDialog').appendTo(document.body);
            }

            var sizeChartDialog = dialog.create({
                id: 'sizeChartDialog', options: {
                    height: 530,
                    width: 800,
                    title: Resources.SIZECHART_TITLE
                }
            });

            sizeChartDialog.dialog('open');

            // make the server call to load the size chart html
            $('#sizeChartDialog').load(this.href);

            return false;
        });

        $('.product-specifications').ready(function () {
            $('.product-specifications').load(jQuery('.attributecontentlink').attr('href'));
        });
    };
    // build the tooltip string for non selected variations
    var getNonSelectedTooltip = function getNonSelectedTooltip(nonSelectedVars) {
        var tooltipStr = '';
        var nsLen = nonSelectedVars.length;
        if (nsLen == 1 || nsLen == 2) {
            tooltipStr = nonSelectedVars.join(' & ');
        } else {
            for (var i = 0; i < nsLen; i++) {
                if (i == nsLen - 2) {
                    tooltipStr += nonSelectedVars[i] + ' & ' + nonSelectedVars[i + 1];
                    break;
                } else {
                    tooltipStr += nonSelectedVars[i] + ', ';
                }
            }
        }

        return tooltipStr;
    };

    // Product instance
    return {
        pid: model.ID,
        name: model.name,
        variant: model.variant,
        master: model.master,
        bundled: model.bundled,
        selectedVarAttribs: {}, // object containing variation attributes values as name value e.g. {color: "blue", size: "3", width: ""}
        selectedVar: null, // currently selected variant
        selectedOptions: {}, // holds currently selected options object {optionName, selected val}
        selectedPrice: {}, // holds prices for selected options as {warranty: ""}
        containerId: null, // holds the html container id of this product
        subProducts: [], // array to keep sub products instances
        bonusProduct: false,

        /**
         * Enable Add to Cart Button.
         */
        enableA2CButton: function enableA2CButton() {
            jQuery(this.containerId + ' .addtocart input, ' + this.containerId + ' .addtocartbutton:last').prop('disabled', false);
            jQuery(this.containerId + ' .addtocartbutton:last, ' + this.containerId + ' .addtocart').removeClass('disabled');
        },

        /**
         * Disable Add to Cart Button.
         */
        disableA2CButton: function disableA2CButton() {
            jQuery(this.containerId + ' .addtocart input, ' + this.containerId + ' .addtocartbutton:last').prop('disabled', true);
            jQuery(this.containerId + ' .addtocartbutton:last, ' + this.containerId + ' .addtocart').addClass('disabled');
        },

        removeA2CButton: function removeA2CButton() {

            jQuery('.addtocart').css('display', 'none');
            jQuery('.productinfo .price').css('display', 'none');
            if (ProductCache.master) {
                jQuery('.productinfo .productid').css('display', 'none');
            }
            //jQuery(this.containerId+" .variationattributes").css('display','none');
        },
        // show availability
        showAvailability: function showAvailability() {
            jQuery(this.containerId + ' .availability').show();
        },
        // hide availability
        hideAvailability: function hideAvailability() {
            jQuery(this.containerId + ' .availability').hide();
        },
        // show selected item #
        showItemNo: function showItemNo() {
            jQuery(this.containerId + ' .productid .value').html(this.selectedVar.id);
        },
        // removes  item #
        removeItemNo: function removeItemNo() {
            jQuery(this.containerId + ' .productid .value').empty();
        },
        revertPrice: function revertPrice() {
            var $price = jQuery(this.containerId + ' .productinfo .price:first');
            if (!$price.data('originalPrice')) {
                $price.data('originalPrice', $price.html());
            } else {
                $price.html($price.data('originalPrice'));
            }
        },
        // determine if this product is part of a bundle/product set VIEW
        setBonusProduct: function setBonusProduct(bonusProduct) {
            this.bonusProduct = bonusProduct;
        },

        // determine if this product is part of a bundle/product set VIEW
        isBonusProduct: function isBonusProduct() {
            return this.bonusProduct;
        },

        // determine if this product is part of a bundle/product set VIEW
        isSubProduct: function isSubProduct() {
            return model.bundled || model.productSetProduct;
        },

        // show the selected variation attribute value next to the attribute label e.g. Color: Beige
        showSelectedVarAttrVal: function showSelectedVarAttrVal(varId, val) {
            jQuery(this.containerId + ' .variationattributes div:not(.clear)').each(function () {
                var id = jQuery(this).data('data');

                if (varId === id) {
                    jQuery(this).find('span.selectedvarval').html(val);
                }
            });
        },

        // selects review tab
        readReviews: function readReviews() {
            jQuery(this.containerId + ' #tabs').tabs('select', 'pdpReviewsTab');
        },

        // shows product images and thumbnails
        // @param selectedVal - currently selected variation attr val
        // @param vals - total available variation attr values
        showImages: function showImages(selectedVal, vals) {
            var that = this;
            vals = vals || {};

            // show swatch related images for the current variation value
            jQuery.each(vals, function () {
                var imgCounter = -1;
                var thisVal = this;
                if (this.val === selectedVal && this.images) {

                    if (this.images.small.length > 0) {
                        jQuery(that.containerId + ' .productthumbnails:last').html('');
                        /**
                         * Show MagicZoom data - added by lgelberg 9/14/11
                         */
                        var zoomimageurl = thisVal.images.original.length > 0 ? thisVal.images.original[0].url : '';
                        //jQuery('.productdetailcolumn .productimage img, .productdetailcolumn .quickviewproductimage img').attr('src',thisVal.images.large[i].url);
                        jQuery('.MagicZoom').attr('href', zoomimageurl);
                        $('body').find('.MagicZoom img').attr('src', zoomimageurl);
                        MagicZoom.update('product-image', zoomimageurl, zoomimageurl);
                        // jQuery(that.containerId+" .productimage").html("").append(jQuery("<img/>").attr("src", thisVal.images.large[0].url).attr("alt", thisVal.images.large[0].alt).attr("title", thisVal.images.large[0].title));
                    }

                    // make sure to show number of images based on the smallest of large or small as these have to have 1-1 correspondence.
                    var noOfImages = this.images.large.length >= this.images.small.length ? this.images.small.length : this.images.large.length;

                    // show thumbnails only if more than 1 or if this is a subproduct (bundled/subproduct)
                    if ((this.images.small.length > 1 || that.isSubProduct()) && !that.isBonusProduct()) {
                        jQuery.each(this.images.small, function (index) {
                            imgCounter++;
                            //var imageInd = imgCounter;
                            if (imgCounter > noOfImages - 1) {
                                return;
                            }
                            var href = null;
                            if ($('#container').hasClass('pt_product-details')) {
                                href = thisVal.images.original[index].url;
                            } else {
                                // In quick view since magic zoom is not there, Hence we need to set javascript:void(0); for a tag href value
                                href = 'javascript:void(0);';
                            }
                            $(that.containerId + ' .productthumbnails:last').append('<div class=\'alternate-images\'><a data-zoom-id=\'product-image\' href=\'' + href + '\' class=\'alternate-image\' data-image=\'' + thisVal.images.original[index].url + '\'><img class=\'index' + index + '\' src=\'' + this.url + '\' title=\'' + this.title + '\' alt=\'' + this.alt + '\'/></a></div>');
                            if (that.containerId.indexOf('ui-dialog') == 1) {
                                $(that.containerId + ' .productthumbnails:last .alternate-image img').on('click touchstart', function (e) {
                                    e.preventDefault();
                                    $(this).closest('.owl-item').siblings('.owl-item').find('a.alternate-image').removeClass('selected');
                                    $(this).closest('.owl-item').find('a.alternate-image').addClass('selected');
                                    var zoomimageurl = $(this).closest('.alternate-image').data('image');
                                    //jQuery('.productdetailcolumn .productimage img, .productdetailcolumn .quickviewproductimage img').attr('src',thisVal.images.large[imageInd].url);
                                    $('body').find('.MagicZoom').attr('href', zoomimageurl);
                                    $('body').find('.MagicZoom img').attr('src', zoomimageurl);
                                    MagicZoom.update('product-image', zoomimageurl, zoomimageurl);
                                    MagicZoom.update('primary-image', zoomimageurl, zoomimageurl);
                                    //$("body").find('.product-image').trigger("click");
                                });
                            }
                        });
                        jQuery(that.containerId + ' .productthumbnails:last .owl-item').first().find('img').click();
                        //var $images = jQuery(that.containerId+" .productthumbnails:last .owl-item img");
                        //var numOfRows = Math.ceil($images.size()/6);
                        //$images.slice(numOfRows * 6 - 6, numOfRows * 6 - 1).css('margin-bottom','0');
                        var desktopItems = 4;
                        if (that.containerId.indexOf('ui-dialog') == 1) {
                            desktopItems = 3;
                        }
                        var pdpOwlCarousel = $('.pdp-owl-customization');
                        if ($(window).width() > 480) {
                            if (this.images.small.length > 4) {
                                pdpOwlCarousel.owlCarousel({
                                    margin: 10,
                                    navRewind: false,
                                    rewind: false,
                                    nav: true,
                                    dots: true,
                                    navigation: false,
                                    responsive: {
                                        0: {
                                            items: 1,
                                            slideBy: 1
                                        },
                                        481: {
                                            items: 3,
                                            slideBy: 3
                                        },
                                        960: {
                                            items: desktopItems,
                                            slideBy: desktopItems
                                        }
                                    }
                                });
                                $('img.index0').parents('.owl-item').find('a.alternate-image').addClass('selected');
                            } else {

                                if ($(pdpOwlCarousel).hasClass('owl-carousel')) {
                                    pdpOwlCarousel.trigger('destroy.owl.carousel');
                                }
                                pdpOwlCarousel.owlCarousel({
                                    items: desktopItems,
                                    navRewind: false,
                                    margin: 10,
                                    rewind: false,
                                    nav: false,
                                    dots: false,
                                    navigation: false,
                                    responsive: {
                                        0: {
                                            items: 1,
                                            slideBy: 1
                                        },
                                        481: {
                                            items: 3,
                                            slideBy: 3
                                        },
                                        960: {
                                            items: desktopItems,
                                            slideBy: desktopItems
                                        }
                                    }
                                });
                                $('img.index0').parents('.owl-item').find('a.alternate-image').addClass('selected');
                            }
                        } else if ($(window).width() < 481) {
                            pdpOwlCarousel.owlCarousel({
                                items: 1,
                                slideBy: 1,
                                margin: 10,
                                navRewind: false,
                                rewind: false,
                                nav: true,
                                dots: true,
                                navigation: false,
                                responsive: {
                                    0: {
                                        items: 1,
                                        slideBy: 1
                                    },
                                    481: {
                                        items: 3,
                                        slideBy: 3
                                    },
                                    960: {
                                        items: desktopItems,
                                        slideBy: desktopItems
                                    }
                                }
                            });
                        }
                    }
                }
            });
        },

        /**
         * Event handler when a variation attribute is selected/deselected.
         */
        varAttrSelected: function varAttrSelected(e) {
            // update the selected value node
            this.showSelectedVarAttrVal(e.data.id, e.data.val || '');

            this.selectedVarAttribs[e.data.id] = e.data.val;

            // if this is a deselection and user landed on a variant page then reset its variant flag
            // as now user has deselected an attribute thus making it essentially a master product view
            if (e.data.val == null && this.variant) {
                this.variant = false;
                this.master = true;
            }

            // store this ref
            var that = this;

            // trigger update event which will update every other variation attribute i.e. enable/disable etc.

            // first reset the contents of each attribute display
            // when we have got the varriations data
            if (!isLoadingVar) {
                // find variants which match the current selection
                var selectedVarAttrVariants = e.data.val != null ? this.findVariations({
                    id: e.data.id,
                    val: e.data.val
                }) : null;
                var selectedVarAttrs = jQuery.extend({}, {}, this.selectedVarAttribs);
                var validVariants = null;
                var unselectedVarAttrs = new Array();

                // for each selected variation attribute find valid variants
                for (var selectedVar in selectedVarAttrs) {
                    if (selectedVarAttrs[selectedVar]) {
                        validVariants = this.findVariations({
                            id: selectedVar,
                            val: selectedVarAttrs[selectedVar]
                        }, validVariants);
                    } else {
                        unselectedVarAttrs.push(selectedVar);
                    }
                }
                // update each variation attribute display
                jQuery.each(model.variations.attributes, function () {
                    if ((this.id != e.data.id || e.data.val == null) && selectedVarAttrs[this.id] == null) {
                        that.varAttrDisplayHandler(this.id, validVariants);
                    } else if (this.id != e.data.id && selectedVarAttrs[this.id] != null) {
                        that.varAttrDisplayHandler(this.id, selectedVarAttrVariants);
                    } else {
                        // show swatch related images for the current value
                        that.showImages(e.data.val, this.vals);
                    }
                });

                // based on the currently selected variation attribute values, try to find a matching variant
                this.selectedVar = this.findVariation(this.selectedVarAttribs);
            }

            // lets fire refresh view event to enable/disable variations attrs
            this.refreshView();
        },

        /**
         * go thru all variations attr and disable which are not available
         */
        resetVariations: function resetVariations() {
            if (isLoadingVar) {
                return; // we don't have the complete data yet
            }
            var that = this;
            var validVariants = model.variations.variants;
            if (this.selectedVarAttribs) {
                for (var selectedVarAttr in this.selectedVarAttribs) {
                    if (this.selectedVarAttribs[selectedVarAttr]) {
                        validVariants = that.findVariations({
                            id: selectedVarAttr,
                            val: this.selectedVarAttribs[selectedVarAttr]
                        }, validVariants);
                    }
                }
            }

            jQuery(this.containerId + ' .variationattributes .swatches').not('.current').not('.selected').each(function () {
                var dataa = jQuery(this).data('data'); // data is id set via app.hiddenData api
                jQuery(this).find('a.swatchanchor').each(function () {
                    // find A variation with this val
                    var filteredVariants = that.findVariations({ id: dataa, val: this.title }, validVariants);
                    if (filteredVariants.length > 0) {
                        // found at least 1 so keep it enabled
                        jQuery(this).parent().removeClass('unselectable');
                    } else {
                        jQuery(this).parent().addClass('unselectable');
                        jQuery(this).parent().removeClass('selected');
                    }
                });
            });
            jQuery(this.containerId + ' .variationattributes .variantdropdown select').not('.current select').not('.selected select').each(function () {
                var $select = jQuery(this);
                var vaId = $select.data('data').id; // data is id set via app.hiddenData api
                var options = $select.data('options');
                if (!options) {
                    options = [];
                    $select.find('option').each(function () {
                        var $option = jQuery(this);
                        options.push({ value: $option.val(), text: $option.text(), selected: false });
                    });
                    $select.data('options', options);
                }
                var len = options.length;
                var selectedVal = $select.val();
                $select.empty();
                jQuery.each(options, function (index, value) {

                    if (len > 1 && index == 0) {
                        $select.append(jQuery('<option></option>').text(value.text).val(value.value));
                        return; // very first option when the length is greater than 1 is 'Select ...' message so skip it
                    }
                    var filteredVariants = that.findVariations({ id: vaId, val: value.value }, validVariants);
                    if (filteredVariants.length > 0) {
                        //add it
                        $select.append(jQuery('<option></option>').text(value.text).val(value.value));
                    } else {
                        // no variant found with this value combination so disable it
                        //this.disabled = true;

                        /**if (this.selected) {
                        // remove the currently selected value if the value is not selectable
                        that.showSelectedVarAttrVal(attrId, "");
                        that.selectedVarAttribs[attrId] = null;
                        }*/
                        // remove current selection
                        //this.selected = false;
                    }
                });
                $select.val(selectedVal);
            });
        },

        /**
         * given a variation attribute id and valid variants, it would adjust the ui i.e. enable/disable
         * appropriate attribute values.
         *
         * @param attrId - String, id of the variation attribute
         * @param validVariants - Array of json objects of valid variants for the given attribute id
         * */
        varAttrDisplayHandler: function varAttrDisplayHandler(attrId, validVariants) {
            var that = this; // preserve this instance
            var futureVariants = validVariants;
            if (this.selectedVarAttribs) {
                for (var selectedVarAttr in this.selectedVarAttribs) {
                    if (this.selectedVarAttribs[selectedVarAttr]) {
                        futureVariants = that.findVariations({
                            id: selectedVarAttr,
                            val: this.selectedVarAttribs[selectedVarAttr]
                        }, futureVariants);
                    }
                }
            }
            // loop thru all non-dropdown ui elements i.e. swatches e.g. color, width, length etc.
            jQuery(this.containerId + ' .variationattributes .swatches.future, ' + this.containerId + ' .variationattributes .swatches.current').each(function () {
                var $swatch = jQuery(this);
                var swatchId = $swatch.data('data'); // data is id set via app.hiddenData api

                if (swatchId === attrId && validVariants) {

                    $swatch.find('a.swatchanchor').each(function () {
                        var $this = jQuery(this);
                        var parentLi = $this.parent();

                        // find A variation with this val
                        var filteredVariants = $swatch.hasClass('future') ? that.findVariations({ id: attrId, val: this.title }, futureVariants) : that.findVariations({ id: attrId, val: this.title }, validVariants);
                        if (filteredVariants.length > 0) {
                            // found at least 1 so keep it enabled
                            parentLi.removeClass('unselectable');
                            if ($swatch.hasClass('color')) {
                                if (!getAvailability(filteredVariants)) {
                                    if ($this.find('.out-of-stock').size() === 0) {
                                        $this.prepend('<span class=\'out-of-stock\'></span>');
                                    }
                                } else {
                                    $this.find('.out-of-stock').remove();
                                }
                            } else {
                                if (!getAvailability(filteredVariants)) {
                                    if ($this.find('span').text().indexOf('Out of Stock') === -1) {
                                        if ($this.find('span').text().indexOf('New') !== -1) {
                                            $this.find('span').text($this.find('span').text() + ' / Out of Stock');
                                        } else {
                                            $this.find('span').text('Out of Stock');
                                        }
                                    }
                                } else {
                                    if ($this.find('span').text().indexOf('New') !== -1) {
                                        $this.find('span').text($this.find('span').text().replace(' / Out of Stock', ''));
                                    } else {
                                        $this.find('span').text($this.find('span').text().replace('Out of Stock', ''));
                                    }
                                }
                            }
                        } else {
                            // no variant found with this value combination so disable it
                            parentLi.addClass('unselectable');

                            if (parentLi.hasClass('selected')) {
                                // remove the currently selected value if the value is not selectable
                                that.showSelectedVarAttrVal(attrId, '');
                                that.selectedVarAttribs[attrId] = null;
                            }
                            // remove current selection
                            parentLi.removeClass('selected');
                        }
                    });
                }
            });

            // loop thru all the non-swatches(drop down) attributes
            jQuery(this.containerId + ' .variationattributes .variantdropdown.future select, ' + this.containerId + ' .variationattributes .variantdropdown.current select').each(function () {
                var $select = jQuery(this);
                var vaId = $select.data('data').id; // data is id set via app.hiddenData api
                if (vaId === attrId && validVariants) {

                    var options = $select.data('options');
                    if (!options) {
                        options = [];
                        $select.find('option').each(function () {
                            var $option = jQuery(this);
                            options.push({ value: $option.val(), text: $option.text(), selected: false });
                        });
                        $select.data('options', options);
                    }
                    var len = options.length;
                    var selectedVal = $select.val();
                    $select.empty();
                    jQuery.each(options, function (index, value) {

                        if (len > 1 && index == 0) {
                            $select.append(jQuery('<option></option>').text(value.text).val(value.value));
                            return; // very first option when the length is greater than 1 is 'Select ...' message so skip it
                        }

                        // find A variation with this val
                        var filteredVariants = $select.closest('.variantdropdown').hasClass('future') ? that.findVariations({ id: attrId, val: value.value }, futureVariants) : that.findVariations({ id: attrId, val: value.value }, validVariants);
                        if (filteredVariants.length > 0) {
                            // found at least 1 so keep it enabled
                            var oos = '';
                            if (!getAvailability(filteredVariants)) {
                                oos = ' - Out of Stock';
                            }
                            //add it
                            $select.append(jQuery('<option></option>').text(value.text + oos).val(value.value));
                        } else {
                            // no variant found with this value combination so disable it
                            //this.disabled = true;

                            /**if (this.selected) {
                            // remove the currently selected value if the value is not selectable
                            that.showSelectedVarAttrVal(attrId, "");
                            that.selectedVarAttribs[attrId] = null;
                            }*/
                            // remove current selection
                            //this.selected = false;
                        }
                    });
                    $select.val(selectedVal);
                }
            });
        },

        /**
         * refresh the UI i.e. availability, price, A2C button and variation attributes display
         */
        refreshView: function refreshView() {
            var thisProduct = this;

            if (!isLoadingVar && this.selectedVar == null) {
                // if we have loaded the variations data then lets if the user has already selected some values
                // find a matching variation
                this.selectedVar = this.findVariation(this.selectedVarAttribs);
            }

            if (!isLoadingVar && this.selectedVar != null) {
                //Facebook Pixel Code for variant view
                fbq('track', 'ViewContent', {
                    'content_ids': [thisProduct.selectedVar.id],
                    'content_type': 'product'
                });
                // update availability
                reloadAvailability(thisProduct, thisProduct.selectedOptions.Quantity);
                // update price
                this.showUpdatedPrice(computePrice(thisProduct), this.selectedVar.pricing.standard);

                if (!(!this.selectedVar.inStock && this.selectedVar.avStatus === Constants.AVAIL_STATUS_NOT_AVAILABLE) && (this.getPrice() > 0 || this.isPromoPrice())) {
                    // Replace the hero shot with the specific variant chosen
                    var varID = this.selectedVar.id;
                    var imageUrl = model.images.variants[varID];
                    var zoomImageUrl = model.images.zoomvariants[varID];
                    // load the fully qualified variation image
                    if (imageUrl != null) {
                        //jQuery('.productdetailcolumn .productimage img, .productdetailcolumn .quickviewproductimage img').attr('src',imageUrl);
                        jQuery('.MagicZoom').attr('href', zoomImageUrl);
                        $('body').find('.MagicZoom img').attr('src', zoomImageUrl);
                        MagicZoom.update('product-image', zoomImageUrl, zoomImageUrl);
                    }

                    this.showItemNo();
                    this.showAvailability();
                    // enable add to cart button
                    this.enableA2CButton();
                    jQuery(this).trigger('AddtoCartEnabled');
                    if ($('#Quantity').val() < 1) {
                        $('addtocartbutton:last').prop('disabled', true);
                        $('.addtocart').addClass('disabled');
                    }
                } else if (this.selectedVar.earlyBirdMessage != '') {
                    this.showItemNo();
                    //this.hideAvailability();
                    this.disableA2CButton();
                    jQuery(this).trigger('AddtoCartDisabled');
                } else {
                    //this.removeItemNo();
                    this.showItemNo();
                    this.showAvailability();
                    //this.revertPrice();
                    this.disableA2CButton();
                    jQuery(this).trigger('AddtoCartDisabled');
                }
                if (this.selectedVar.avStatus === Constants.AVAIL_STATUS_NOT_AVAILABLE) {
                    //this.removeA2CButton();
                }
            } else {
                if (isLoadingVar) {
                    // update availability
                    setAvailabilityMsg(progress.show('productloader'));
                } else {
                    setAvailabilityMsg(Resources.NON_SELECTED);
                }
                this.removeItemNo();
                this.showAvailability();
                this.revertPrice();
                // disable add to cart button
                this.disableA2CButton();
                jQuery(this).trigger('AddtoCartDisabled');
            }

            var nonSelectedVars = [];

            var validVariants = null;

            for (var selectedVar in this.selectedVarAttribs) {
                if (this.selectedVarAttribs[selectedVar]) {
                    validVariants = this.findVariations({
                        id: selectedVar,
                        val: this.selectedVarAttribs[selectedVar]
                    }, validVariants);
                }
            }

            // update selected var attr vals and refresh their display
            jQuery.each(model.variations.attributes, function () {
                thisProduct.showSelectedVarAttrVal(this.id, thisProduct.selectedVarAttribs[this.id]);

                if (!thisProduct.selectedVarAttribs[this.id] || thisProduct.selectedVarAttribs[this.id] == '') {
                    nonSelectedVars.push(this.name);

                    thisProduct.varAttrDisplayHandler(this.id, validVariants);
                }
            });

            // process non-selected vals and show updated tooltip for A2C button as a reminder
            // and show it along availability
            var tooltipStr = getNonSelectedTooltip(nonSelectedVars);
            //var missingvalue = $(".missingvalue").val();
            if (nonSelectedVars.length > 0) {
                var availMsg = $.validator.format(Resources.MISSING_VAL, tooltipStr);
                setAvailabilityMsg(availMsg);
                //jQuery(thisProduct.containerId+" .addtocartbutton:last").attr("title", availMsg);
            }
        },

        /**
         * renders pricing div given a sale price and optional standard price
         * To format the price display, it goes to server via an ajax call.
         *
         * @param sale - sale price
         * @param standard - standard price
         */
        showUpdatedPrice: function showUpdatedPrice(sale, standard) {
            var standardPrice = Number(standard || 0);
            var salePrice = Number(sale || 0);
            var priceHtml = '';
            var formattedPrices = { 'salePrice': salePrice, 'standardPrice': standardPrice };

            // send server request to format the money baed on site settings using Money api
            ajax.getJson({
                url: Urls.formatMoney,
                cache: true,
                async: false,
                data: { 'salePrice': salePrice, 'standardPrice': standardPrice },
                callback: function callback(data) {
                    formattedPrices = data;
                }
            });

            // in case it is a promotional price then we do not care if it is 0
            priceHtml = salePrice > 0 || this.isPromoPrice() ? '<div class="salesprice">' + formattedPrices.salePrice + '</div>' : ' <div class="salesprice">N/A</div>';

            if (standardPrice > 0 && standardPrice > salePrice) {
                // show both prices
                priceHtml = '<div class="standardprice">' + formattedPrices.standardPrice + '</div>' + priceHtml;
            }
            if (standardPrice === 0 && salePrice === 0) {
                if (this.selectedVar.earlyBirdMessage != '') {
                    priceHtml = '<div class="salesprice">' + this.selectedVar.earlyBirdMessage + '</div>';
                } else {
                    priceHtml = '<div class="salesprice"></div>';
                }
            }
            var $price = jQuery(this.containerId + ' .productinfo .price:first');
            if (!$price.data('originalPrice')) {
                $price.data('originalPrice', $price.html());
            }
            $price.html(priceHtml);
            // containerId contains #, get rid of it before finding the right price div
            jQuery(this.containerId + ' #pdpATCDiv' + this.containerId.substring(1) + ' .price').html(priceHtml);
        },

        /**
         * returns a computed price for this product
         */
        getPrice: function getPrice() {
            return computePrice(this);
        },

        /**
         * Determines if the selected product has promotional price.
         *             *
         * @return boolean true if promotional price is present otherwise false
         */
        isPromoPrice: function isPromoPrice() {
            return this.selectedVar != null ? this.selectedVar.pricing.isPromoPrice : model.pricing.isPromoPrice;
        },

        /**
         * receives 2 or 1 variation attribute values and tries to figure out if there is a variant with these values.
         *
         * @param val1 - variation attribute value
         * @param val2 - variation attribute value
         * @return boolean - true if a variant exists otherwise false
         */
        isVariation: function isVariation(val1, val2) {
            var variant = null;

            for (var i = 0; i < model.variations.variants.length; i++) {
                variant = model.variations.variants[i];
                if (variant.attributes[val1.id] == val1.val && (val2 == undefined || variant.attributes[val2.id] == val2.val)) {
                    return true;
                }
            }
            /**
             * apparently there is no way to break out of jQuery.each half way :(
             jQuery.each(model.variations.variants, function(){
            if (!found && this.attributes[val1.id] == val1.val && this.attributes[val2.id] == val2.val) {
            found = true;
            return;
            }
            });*/
            return false;
        },

        /**
         * find 0 or more variants matching the given attribs object(s) and in stock
         * return null or found variants
         */
        findVariations: function findVariations(attr, variants) {
            var foundVariants = new Array();
            variants = variants || model.variations.variants;

            var variant = null;
            for (var i = 0; i < variants.length; i++) {
                variant = variants[i];
                if (variant.attributes[attr.id] === attr.val) /*&&
                                                              //(variant.inStock || (variant.avStatus === app.constants.AVAIL_STATUS_BACKORDER && variant.ATS > 0) || (variant.avStatus === app.constants.AVAIL_STATUS_PREORDER && variant.ATS > 0))*/
                    {
                        foundVariants.push(variant);
                    }
            }

            return foundVariants;
        },

        /**
         * find a variant with the given attribs object
         * return null or found variation json
         */
        findVariation: function findVariation(attrs) {
            if (!this.checkAttrs(attrs)) {
                return null;
            }

            var attrToStr = function attrToStr(attrObj) {
                var result = '';
                jQuery.each(model.variations.attributes, function () {
                    result += attrObj[this.id];
                });
                return result;
            };

            var attrsStr = attrToStr(attrs);
            var variant = null;
            for (var i = 0; i < model.variations.variants.length; i++) {
                variant = model.variations.variants[i];
                if (attrToStr(variant.attributes) === attrsStr) {
                    return variant;
                }
            }
            return null;
        },

        // find a variation with the give id otherwise empty object
        findVariationById: function findVariationById(id) {

            for (var i = 0; i < model.variations.variants.length; i++) {
                // IE7 does NOT support this!!!
                //for each(var variation in model.variations.variants) {
                var variation = model.variations.variants[i];
                if (variation && variation.id === id) {
                    return variation;
                }
            }

            return {};
        },

        /**
         * see if the specified attrs object has all the variation attributes present in it
         * return true/false
         */
        checkAttrs: function checkAttrs(attrs) {
            for (var i = 0; i < model.variations.attributes.length; i++) {
                if (attrs[model.variations.attributes[i].id] == null) {
                    return false;
                }
            }
            return true;
        },

        // given an id, return attr definition from model.variations.attributes
        getAttrByID: function getAttrByID(id) {
            for (var i = 0; i < model.variations.attributes.length; i++) {
                if (model.variations.attributes[i].id === id) {
                    return model.variations.attributes[i];
                }
            }
            return {};
        },

        // returns current availability status e.g. in_stock, preorder etc.
        getAvStatus: function getAvStatus() {
            if ((this.variant || this.master) && this.selectedVar != null) {
                return this.selectedVar.avStatus;
            } else {
                return model.avStatus;
            }
        },

        // return available to sell qty
        getATS: function getATS() {
            if ((this.variant || this.master) && this.selectedVar != null) {
                return this.selectedVar.ATS;
            } else {
                return model.ATS;
            }
        },

        // return non-closeout low qty threshold
        getNonCloseoutLowQtyThreshold: function getNonCloseoutLowQtyThreshold() {
            if ((this.variant || this.master) && this.selectedVar != null) {
                return this.selectedVar.nonCloseoutLowQtyThreshold;
            } else {
                return model.nonCloseoutLowQtyThreshold;
            }
        },

        // return the quantity that was used to calculate availability
        getAvailabilityQty: function getAvailabilityQty() {
            if ((this.variant || this.master) && this.selectedVar != null) {
                return this.selectedVar.avStatusQuantity;
            } else {
                return model.avStatusQuantity;
            }
        },

        // return the availability levels
        getAvLevels: function getAvLevels() {
            if ((this.variant || this.master) && this.selectedVar != null) {
                return this.selectedVar.avLevels;
            } else {
                return model.avLevels;
            }
        },

        // returns in stock date
        getInStockDate: function getInStockDate() {
            if ((this.variant || this.master) && this.selectedVar != null) {
                return this.selectedVar.inStockDate;
            } else {
                return model.inStockDate;
            }
        },

        // set the add to cart button and bind handlers for bundle/product set
        getSubProductsBinding: function getSubProductsBinding() {
            var thisProduct = this;

            // For bundles and product-sets, enable or disable the add-to-cart button.
            // The button should be disabled if the add-to-cart button of any subproduct is disabled, enabled otherwise.
            // For product-sets, display a price which is the sum of the set-products prices as long as the add-to-cart button is enabled.
            if (model.bundle || model.productSet) {

                var bundleA2CEnabled = false;
                var price = new Number();
                for (var i = 0; i < thisProduct.subProducts.length; i++) {
                    var subProduct = thisProduct.subProducts[i];
                    bundleA2CEnabled = subProduct.isA2CEnabled();
                    if (!bundleA2CEnabled) {
                        break;
                    }

                    // collect price info
                    price += new Number(subProduct.getPrice());
                }

                // if any of the bundled product has its A2C button disabled then the bundle is not orderable
                if (!bundleA2CEnabled) {
                    this.disableA2CButton();
                } else {
                    this.enableA2CButton();

                    // show total price except for a bundle
                    if (!model.bundle) {
                        thisProduct.showUpdatedPrice(price);
                    }
                }
            }

            // bind AddtoCartDisabled event for each subproduct (bundle or product set)
            jQuery.each(thisProduct.subProducts, function () {
                jQuery(this).bind('AddtoCartDisabled', {},
                /**
                 * Event handler when a subproduct of a product set or a bundle is selected.
                 * disable the add to cart button
                 */
                function () {
                    thisProduct.disableA2CButton();
                });
            });

            // see if have any sub-products and bind AddtoCartEnabled event
            jQuery.each(thisProduct.subProducts, function () {
                jQuery(this).bind('AddtoCartEnabled', {},
                /**
                 * Event handler when a subproduct of a product set or a bundle is selected.
                 * Basically enable the add to cart button or do other  refresh if needed like price etc.
                 */
                function () {
                    // enable Add to cart button if all the sub products have been selected
                    // and show the updated price
                    var enableAddToCart = true;
                    var subProducts = thisProduct.subProducts;
                    var price = new Number();

                    for (var i = 0; i < subProducts.length; i++) {
                        if ((subProducts[i].variant || subProducts[i].master) && subProducts[i].selectedVar == null || !subProducts[i].bundled && (subProducts[i].selectedOptions.Quantity == undefined || subProducts[i].selectedOptions.Quantity <= 0)) {
                            enableAddToCart = false;
                            break;
                        } else {
                            if (subProducts[i].selectedVar != null) {
                                subProducts[i].selectedOptions.pid = subProducts[i].selectedVar.pid;
                            } else {
                                subProducts[i].selectedOptions.pid = subProducts[i].pid;
                            }

                            // Multiply the subproduct quantity-one price by the entered quantity.
                            // Important note:  This value will be incorrect if subproduct uses
                            // tiered pricing !!!!!
                            var subproductQuantity = subProducts[i].selectedOptions.Quantity;
                            if (subproductQuantity == undefined) {
                                subproductQuantity = 1;
                            }
                            price += new Number(subproductQuantity * subProducts[i].getPrice());
                        }
                    }

                    if (enableAddToCart && (model.productSet || model.inStock) && (price > 0 || thisProduct.isPromoPrice())) {
                        thisProduct.enableA2CButton();

                        // show total price except for a bundle
                        if (!model.bundle) {
                            thisProduct.showUpdatedPrice(price);
                        }
                    } else {
                        thisProduct.disableA2CButton();
                    }
                });
            });
        },

        // determine if A2C button is enabled or disabled
        // true if enabled, false otherwise
        isA2CEnabled: function isA2CEnabled() {
            if (this.variant || this.master) {
                if (this.selectedVar != null) {
                    return this.selectedVar.avStatus === Constants.AVAIL_STATUS_IN_STOCK || this.selectedVar.avStatus === Constants.AVAIL_STATUS_BACKORDER || this.selectedVar.avStatus === Constants.AVAIL_STATUS_PREORDER;
                } else {
                    return false;
                }
            } else {
                return model.avStatus === Constants.AVAIL_STATUS_IN_STOCK || model.avStatus === Constants.AVAIL_STATUS_BACKORDER || model.avStatus === Constants.AVAIL_STATUS_PREORDER;
            }
        },

        /**
         * work horse of the product detail page getting everything tied together i.e. all the dynamic stuff
         * and one time initialization. called only ONCE
         * bind all the product display events and handlers
         * load variants in case this is a variation product
         * bind subproducts a2c button enable event handler
         *
         * @param options.cotainerId - id of the containing div
         * @param options.source - source of this product show request, mainly quickview
         */
        show: function show(options) {
            // preserve this instance
            var thisProduct = this;

            // bind VariationsLoaded which gets fired when the variation data is received from the server
            // and we need to refresh the ui
            jQuery(this).bind('VariationsLoaded', {}, function () {
                // enable/disable unavailable values
                // and set the currently selected values
                // reset the currently selected variation attributes i.e. reset the ui
                thisProduct.resetVariations();

                // create the default availability message based on ATS count
                // from the variants
                var atsCount = getATS(model.variations.variants);
                if (atsCount == 0) {
                    setAvailabilityMsg('<span class=\'out-of-stock\'>' + Resources[Constants.AVAIL_STATUS_NOT_AVAILABLE] + '</span>');
                }
                // We will use this in the 2nd of the two following loops
                var someAreNotSelected = false;
                // Determine the selected state of each option
                var $attributes = jQuery(thisProduct.containerId + ' .variationattributes .swatches,' + thisProduct.containerId + ' .variationattributes .variantdropdown');
                $attributes.each(function () {
                    var $this = jQuery(this);
                    if ($this.hasClass('swatches')) {
                        //if it is swatches, find the selected swatch
                        if ($this.find('.selected').size() > 0) {
                            $this.addClass('selected');
                        } else {
                            $this.removeClass('selected');
                        }
                    } else {
                        var selectBox = $this.find('select').get(0);
                        if ($(selectBox).find('option').length == 2) {
                            $(selectBox).find('option').eq(1).prop('selected', true);
                        }
                        if (selectBox.selectedIndex >= 0 && selectBox.options[selectBox.selectedIndex].value != '') {
                            $this.addClass('selected');
                        } else {
                            $this.removeClass('selected');
                        }
                    }
                }).each(function (index) {
                    var $this = jQuery(this);
                    if (someAreNotSelected) {
                        $this.removeClass('selected').addClass('future').find('.selected').removeClass('selected');
                        $this.find('.optionwrapper').slideUp();
                    }
                    if (!$this.hasClass('selected')) {
                        if (!someAreNotSelected) {
                            $this.addClass('current');
                            someAreNotSelected = true;
                        }
                    } else {
                        // if it's not the last item, hide the selections and leave the button enabled
                        if ($attributes.size() - 1 != index) {
                            $this.find('.optionwrapper').slideUp().find('button').removeClass('non-selectable');
                        } else {
                            //it is the last item, and it's selected, so it's current
                            $this.removeClass('selected').addClass('current');
                        }
                    }
                });

                // Grab the currently selected values and update the UI
                // swatch variation attributes
                jQuery(thisProduct.containerId + ' .variationattributes .swatches, ' + thisProduct.containerId + ' .variationattributes .variantdropdown select').each(function (index) {
                    if (index === 0) {
                        var $swatch = jQuery(this);
                        var swatchId = $swatch.data('data'); // data is id set via app.hiddenData api

                        if (model.variations.variants) {
                            if (typeof this.selectedIndex === 'undefined') {
                                $swatch.find('a.swatchanchor').each(function () {
                                    var $this = jQuery(this);
                                    //var parentLi = $this.parent();
                                    // find A variation with this val
                                    var filteredVariants = thisProduct.findVariations({
                                        id: swatchId,
                                        val: this.title
                                    }, model.variations.variants);

                                    if ($swatch.hasClass('color')) {
                                        if (!getAvailability(filteredVariants)) {
                                            if ($this.find('.out-of-stock').size() === 0) {
                                                $this.prepend('<span class=\'out-of-stock\'></span>');
                                            }
                                        } else {
                                            $this.find('.out-of-stock').remove();
                                        }
                                    } else {
                                        if (!getAvailability(filteredVariants)) {
                                            if ($this.find('span').text().indexOf('Out of Stock') === -1) {
                                                if ($this.find('span').text().indexOf('New') !== -1) {
                                                    $this.find('span').addClass('outofstockpdp');
                                                    $this.find('span').text($this.find('span').text() + ' / Out of Stock');
                                                } else {
                                                    $this.find('span').addClass('outofstockpdp');
                                                    $this.find('span').text('Out of Stock');
                                                }
                                            }
                                        } else {
                                            if ($this.find('span').text().indexOf('New') !== -1) {
                                                $this.find('span').text($this.find('span').text().replace(' / Out of Stock', ''));
                                            } else {

                                                $this.find('span').text($this.find('span').text().replace('Out of Stock', ''));
                                            }
                                        }
                                    }
                                });
                            } else {

                                $swatch.find('option').each(function () {
                                    if (this.value !== '') {
                                        var filteredVariants = thisProduct.findVariations({
                                            id: swatchId.id,
                                            val: this.value
                                        }, model.variations.variants);
                                        if (!getAvailability(filteredVariants)) {
                                            this.text = this.text + ' - Out of Stock';
                                        }
                                    }
                                });
                            }
                        }
                    }

                    if (typeof this.selectedIndex === 'undefined') {
                        var thisSwatch = jQuery(this),
                            pdpVarId = thisSwatch.data('data'); // data is id which is set via app.hiddenData onload

                        // grab the currently selected variation attribute val
                        thisSwatch.find('.selected a').each(function () {
                            thisProduct.varAttrSelected({ data: { id: pdpVarId, val: this.title } });
                        });
                    } else {
                        // non-swatch variation attributes
                        if (this.selectedIndex >= 0 && this.options[this.selectedIndex].value != '') {
                            // grab the currently selected val by firing update ui api
                            // when dealing with a select element, data returns an object so we must ask for id
                            thisProduct.varAttrSelected({
                                data: {
                                    id: jQuery(this).data('data').id,
                                    val: this.options[this.selectedIndex].value
                                }
                            });
                        }
                    }
                });
                /**
                 // loop thru all non-dropdown ui elements i.e. swatches e.g. color, width, length etc.
                 jQuery(this.containerId + " .variationattributes .swatches").each(function(){
                });*/
            });

            this.containerId = '#' + options.containerId;
            var isQuickView = false;

            if (options.source && options.source == 'quickview') {
                isQuickView = true;
                this.containerId = '.ui-dialog #' + options.containerId;
            }

            myContainerId = this.containerId;

            // bind click handlers for prev/next links
            getNavLinks();

            // size chart click binding
            getSizeChart();

            // variation attributes handling in case it is a master or a variant product
            if (model.master || model.variant) {
                loadVariants(this); // make a server call to load the variants, this is due to the performance reasons
                // meanwhile display the available variation attributes

                // bind the "next" buttons in the picker
                jQuery('button.next').click(function () {
                    /**var $this = jQuery(this);
                     if(!$this.hasClass("non-selectable")) {
                    $this.closest(".swatches, .variantdropdown").find(".optionwrapper").slideUp(400,function(){
                    jQuery(this).closest(".swatches, .variantdropdown")
                    .removeClass("current").addClass("selected")
                    .nextUntil(".swatches, .variantdropdown").next()
                    .addClass("current").removeClass("future")
                    .find(".optionwrapper").slideDown().find('select').change();
                    });
                    }*/
                });

                //bind the "previous" buttons in the picker
                jQuery('a.previous').click(function (e) {
                    e.preventDefault();
                    jQuery(this).closest('.swatches, .variantdropdown').prevUntil('.swatches, .variantdropdown').prev().find('a.filter').click();
                });
                $('.MagicZoom img.primary-image').bind('click', function () {
                    $('.new-swim,.old-swim').addClass('swimHide');

                    setTimeout(function () {
                        //var zoomedContent = $('.mz-expand-stage').html();
                        $('.mz-button-close').on('click', function () {
                            $('.new-swim,.old-swim').removeClass('swimHide');
                        });
                    }, 500);
                });
                // clicking on a previous step
                jQuery('.variationattributes').delegate('.selected a.filter', 'click', function (e) {
                    e.preventDefault();
                    var $this = jQuery(this).closest('.selected');
                    jQuery('.variationattributes .swatches,.variationattributes .variantdropdown').removeClass('current');
                    $this.removeClass('selected').addClass('current');
                    $this.nextAll('.swatches, .variantdropdown').each(function () {
                        var $variant = jQuery(this);
                        $variant.addClass('future').removeClass('selected');
                        if ($variant.hasClass('swatches')) {
                            $variant.find('.selected a').click();
                        } else if ($variant.hasClass('variantdropdown')) {
                            var $select = $variant.find('select');
                            if ($select.find('option').size() > 1) {
                                $select.val('').change();
                            }
                        }
                    });
                    $(this).parent().find('.swatchesdisplay .selected a').click();
                    $(this).parent().find('select').val('');

                    jQuery('.variationattributes').find('.future .optionwrapper').slideUp(400, function () {
                        jQuery('.current .optionwrapper').slideDown(400, function () {
                            $(this).find('.filter .value').text('');
                        });
                    });
                    jQuery('.variationattributes').find('.current .optionwrapper').slideDown(400, function () {
                        $(this).closest('.current').find('.filter .value').text('');
                    });
                });

                // bind the "learn more" links
                jQuery('span.learnmore a').click(function (e) {
                    e.preventDefault();
                    // add learn more dialog container div if its not added yet
                    // only added once
                    if (jQuery('#learnMoreDialog').length == 0) {
                        jQuery('<div></div>').attr('id', 'learnMoreDialog').appendTo(document.body);
                    }

                    var learnMoreDialog = dialog.create({
                        id: 'learnMoreDialog', options: {
                            height: 530,
                            width: 800,
                            title: Resources.SIZECHART_TITLE
                        }
                    });

                    learnMoreDialog.dialog('open');

                    // make the server call to load the learn more html
                    jQuery('#learnMoreDialog').load(this.href);
                });

                // loop thru all the swatches and bind events etc.
                jQuery(thisProduct.containerId + ' .variationattributes .swatches').each(function () {
                    var thisSwatch = jQuery(this);
                    var pdpVarId = thisSwatch.data('data'); // data is id which is set via app.hiddenData onload
                    var attrDef = thisProduct.getAttrByID(pdpVarId);

                    if (!attrDef) {
                        return;
                    }

                    // click handler for swatches links
                    var varEventHandler = function varEventHandler(e) {
                        var thisObj = jQuery(this);

                        e.data = { id: pdpVarId, val: this.title };

                        if (thisObj.parent().hasClass('unselectable')) {
                            return false;
                        } else if (thisObj.parent().hasClass('selected')) {
                            // deselection
                            e.data = { id: pdpVarId, val: null };
                            thisObj.parent().removeClass('selected');
                            // clear the current selection
                            thisProduct.varAttrSelected(e);

                            thisProduct.resetVariations();
                        } else {
                            // selection
                            e.data = { id: pdpVarId, val: this.title };
                            // remove the current selection
                            thisSwatch.find('.selected').removeClass('selected');
                            if (thisObj.closest('.swatches').nextUntil('.swatches, .variantdropdown').next().size() > 0) {
                                thisObj.parent().addClass('selected').closest('.swatches').find('button').removeClass('non-selectable');
                                var $this = jQuery(this);
                                if (!$this.hasClass('non-selectable')) {
                                    $this.closest('.swatches').find('.optionwrapper').slideUp(400, function () {
                                        jQuery(this).closest('.swatches').removeClass('current').addClass('selected').nextUntil('.swatches').next().not('.clear').first().addClass('current').removeClass('future').find('.optionwrapper').slideDown(400, function () {
                                            jQuery(this).find('select option').each(function (index) {
                                                if ($(this).closest('select').find('option').length == 2 && index == 1) {
                                                    $(this).prop('selected', true).trigger('change');
                                                    //$(this).attr('selected','selected').trigger('change');
                                                }
                                            });
                                        }).find('select').change();
                                    });
                                }
                            } else {
                                thisObj.parent().addClass('selected');
                            }
                            thisProduct.varAttrSelected(e);
                        }

                        return false;
                    };

                    // all swtach anchors
                    var varJqryObjs = thisSwatch.find('a.swatchanchor');

                    // if its a color attr then render its swatches and images
                    if (pdpVarId === 'color') {
                        var colorAttrDef = thisProduct.getAttrByID('color');

                        varJqryObjs.each(function () {

                            // given a variation attr value, find its swatch image url
                            var findSwatch = function findSwatch(val) {
                                for (var i = 0; i < colorAttrDef.vals.length; i++) {
                                    if (colorAttrDef.vals[i].val === val) {
                                        return colorAttrDef.vals[i].images.swatch;
                                    }
                                }
                                return ''; // no swatch image found
                            };

                            var swatchUrl = findSwatch(this.title).url; // find swatch url

                            if (swatchUrl && swatchUrl != '') {
                                //jQuery(this).css("color", "transparent").parent().css("background", "url(" + swatchUrl + ")");
                                jQuery(this).css('text-indent', '-9999px').prepend('<img alt="' + this.title + '" src="' + swatchUrl + '"/>');
                            } else {
                                jQuery(this).css('color', 'transparent'); // no swatch image found
                            }
                        });

                        // swatches click, hover and mouseleave event handlers
                        varJqryObjs.data('data', { id: pdpVarId }).click(varEventHandler);
                        if ($(window).width() > 1024) {
                            varJqryObjs.data('data', { id: pdpVarId }).mouseenter(function () {
                                thisProduct.showSelectedVarAttrVal('color', this.title);
                                thisProduct.showImages(this.title, colorAttrDef.vals);
                            }).mouseleave(function () {
                                if (thisProduct.selectedVar) {
                                    thisProduct.showImages(thisProduct.selectedVar.id, [{
                                        'val': thisProduct.selectedVar.id,
                                        'images': {
                                            'original': [{ 'url': model.images.zoomvariants[thisProduct.selectedVar.id] }],
                                            'small': [{ 'url': model.images.variants[thisProduct.selectedVar.id] }],
                                            'large': [{ 'url': model.images.variants[thisProduct.selectedVar.id] }]
                                        }
                                    }]);
                                } else if (thisProduct.selectedVarAttribs.color) {
                                    thisProduct.showImages(thisProduct.selectedVarAttribs.color, colorAttrDef.vals);
                                } else {
                                    thisProduct.showImages('', [{ val: '', images: model.images }]);
                                }

                                thisProduct.showSelectedVarAttrVal('color', thisProduct.selectedVarAttribs.color || '');
                            });
                        }
                    } else {
                        // not a color swatch, we only have click handler for this type of variation attribute e.g. width, length etc.
                        varJqryObjs.data('data', { id: pdpVarId }).click(varEventHandler);
                    }
                });

                jQuery(thisProduct.containerId + ' .variationattributes .variantdropdown select option').each(function (index) {
                    if (jQuery(thisProduct.containerId + ' .variationattributes .variantdropdown select option').length == 2 && index == 1) {
                        $(this).prop('selected', true).trigger('change');
                    }
                });

                // loop thru all the non-swatches attributes and bind events etc.
                jQuery(thisProduct.containerId + ' .variationattributes .variantdropdown select').each(function () {
                    // default ui i.e. drop downy
                    jQuery(this).data('data', { id: jQuery(this).data('data'), val: '' }).change(function (e) {
                        // if there is only 1 value to be selected then return i.e. no deselection available
                        //if (this.selectedIndex == 0 && this.options.length == 1) { return; }

                        e.data = jQuery(this).data('data'); // data is id
                        // this.selectedIndex == 0, it is deselection
                        e.data.val = this.selectedIndex == 0 && this.options.length > 1 ? null : this.options[this.selectedIndex].value;

                        if (this.selectedIndex == 0 && this.options.length > 1) {
                            // deselection
                            //jQuery(this).closest(".variantdropdown").find("button").addClass("non-selectable");
                        } else {
                            // selection
                            //jQuery(this).closest(".variantdropdown").find("button").removeClass("non-selectable");
                            jQuery(this).closest('.variantdropdown').find('.optionwrapper').slideUp(400, function () {
                                jQuery(this).closest('.variantdropdown').removeClass('current').addClass('selected').nextUntil('.future').next().addClass('current').removeClass('future').find('.optionwrapper').slideDown(400, function () {
                                    jQuery(this).find('select option').each(function (index) {
                                        if ($(this).closest('select').find('option').length == 2 && index == 1) {
                                            $(this).prop('selected', true).trigger('change');
                                            //$(this).attr('selected','selected').trigger('change');
                                        }
                                    });
                                }).find('select').change();
                            });
                        }

                        thisProduct.varAttrSelected(e);
                        if (this.selectedIndex == 0 && this.options.length > 1) {
                            // clear the current selection
                            thisProduct.resetVariations();
                        }
                    });
                });

                if (thisProduct.selectedVarAttribs.color) {
                    // show swatch related images for the current value
                    thisProduct.showImages(thisProduct.selectedVarAttribs.color, thisProduct.getAttrByID('color').vals);
                } else {
                    // show images and bind hover event handlers for small/thumbnails to toggle large image
                    thisProduct.showImages('', [{ val: '', images: model.images }]);
                }
            } else {
                // show images and bind hover event handlers for small/thumbnails to toggle large image
                thisProduct.showImages('', [{ val: '', images: model.images }]);
            }

            // bind product options event(s)
            getOptionsDiv(this);

            if (!model.productSet) {
                // quantity box
                if (!model.bundle) {
                    getQtyBox(this);
                } else if (model.bundle) {
                    // update avaiability for a bundle product, for everything else its done inside getQtyBox
                    setAvailabilityMsg(createAvMessage(this, 1));
                }
            }

            // Add to cart button click binding
            getAddToCartBtn(this);
            // intial display of A2C button
            // if the price is 0 or not available, its disabled
            // if not in stock, its disabled
            // isPromoPrice would be true in case if a product has a promotional price which could make product's price 0
            if (!(this.getPrice() > 0 || this.isPromoPrice()) || model.master || model.variant || model.productSet || model.bundle || !model.inStock && model.avStatus === Constants.AVAIL_STATUS_NOT_AVAILABLE && !model.productSet) {
                this.disableA2CButton();
                /** if((this.getPrice() == 0 && !this.isPromoPrice())) {
                this.hideAvailability();
                }*/
            }
            if (model.avStatus === Constants.AVAIL_STATUS_NOT_AVAILABLE) {}
            //this.removeA2CButton();


            // customer rating section only displayed for the main product
            if (!model.productSetProduct && !model.bundled) {
                if (!model.productSet && !isQuickView && !model.bundle) {
                    getRatingSection(this.containerId);
                }
            }

            // wish list, sent to friend, add to gift
            getMiscLinks(this);

            // product tabs
            getTabs(this.containerId);

            // setup bundle/product set
            this.getSubProductsBinding();
        },
        toString: function toString() {
            return this.model;
        }
    };
}; // Product defintion end
var ProductCache = null;
var quickviewShow = function quickviewShow(options) {
    var url = options.url;
    url = url = util.appendParamToURL(url, 'source', options.source);
    $('#QuickViewDialog').html('');
    var quickViewDialog = dialog.create({
        target: '#QuickViewDialog',
        options: {
            height: 530,
            width: 760,
            dialogClass: 'quickview',
            title: Resources.QUICK_VIEW_POPUP
        }
    });
    quickViewDialog.dialog('open');
    progress.show('#QuickViewDialog');

    $.ajax({
        url: url,
        success: function success(data) {
            $(quickViewDialog).html('').append(data);
            util.hiddenData();
            var ProductCache = null;
            var producJson = $('#QuickViewDialog .productjson').data('productjson');
            ProductCache = product(producJson);
            ProductCache.show({ containerId: 'pdpMain', append: false, source: options.source });
            addToCart.init();
            $('body').find('.quantityinput').off('keydown').on('keydown', function (e) {
                if (e.keyCode == 13) {
                    e.preventDefault();
                }
            });
            progress.hide();
        }
    });
};
var pdpEvents = {
    init: function init() {
        util.hiddenData();
        var producJson = $('body').find('.productjson').data('productjson');
        var sourceValue = $('body').find('.http-source').val();
        ProductCache = product(producJson);
        ProductCache.show({ containerId: 'pdpMain', append: false, source: sourceValue });
        $('#tabs').find('a[href="#pdpTab1"]').trigger('click');
        //var getDataOption = $('.product-primary-image').find('a').attr('data-options');
        $('body').find('.quantityinput').on('keydown', function (e) {
            if (e.keyCode == 13) {
                e.preventDefault();
            }
        });
        $('#Quantity').keyup(function (e) {
            var key = e.charCode || e.keyCode || e.which || 0;
            if ($.isNumeric($('#Quantity').val()) && key == 13) {
                $('#add-to-cart').trigger('click');
            } else if (!$.isNumeric($('#Quantity').val())) {
                $('.addtocartbutton:last').prop('disabled', true);
                $('.addtocart, .addtocartbutton').addClass('disabled');
                return false;
            } else {
                if ($(this).val() < 1) {
                    $('addtocartbutton:last').prop('disabled', true);
                    $('.addtocart').addClass('disabled');
                } else {
                    $('.addtocartbutton:last').prop('disabled', false);
                    $('.addtocart, .addtocartbutton').removeClass('disabled');
                }
            }
        });
        $(document).on('click', '.youtube-list-video a', function () {
            if ($(window).width() > 480 && $(window).width() < 959) {
                util.scrollBrowser($('.tab-sec').offset().top);
            } else if ($(window).width() < 481) {
                util.scrollBrowser($('.mobile-tabs-section .tabsHeader.videoTab').offset().top);
            }
        });
        $(document).on('click', '.video-link', function () {
            if ($(window).width() > 480) {
                util.scrollBrowser($('.tab-sec').offset().top);
                $('#tabs #videoTab').find('a[href="#pdpVideoTab"]').trigger('click');
            } else if ($(window).width() < 481) {
                util.scrollBrowser($('.mobile-tabs-section .tabsHeader.videoTab').offset().top);
                $('.tabsHeader.videoTab').parent('.mobile-tabs-section ').addClass('active');
                if ($('.videoTab').hasClass('loaded')) {
                    return false;
                }
                $('.videoTab').addClass('loaded');
                var target = $('#pdpVideoTab');
                var url = $('#productURL').val();
                ajax.load({
                    url: url,
                    dataType: 'html',
                    callback: function callback(data) {
                        target.html(data);
                    }
                });
            }
        });
        $('#add-to-cart').bind('click', function () {
            if ($('#Quantity').val() > 0) {
                $('.addedto-cartoverlay').addClass('added-overlay');
                setTimeout(function () {
                    $('.addedto-cartoverlay').removeClass('added-overlay');
                }, 2000);
            }
        });
        $('#QuickViewDialog .product-primary-image').find('.product-image').click(function () {
            return false;
        });
        if ($('.provideo-spec-link').length > 0) {
            if (!($('.video-link').length > 0)) {
                if ($(window).width() > 480) {
                    $('.productname.h-one-tag').css({
                        'width': 'auto',
                        'margin-bottom': '-26px',
                        'float': 'left',
                        'padding-bottom': '8px'
                    });
                }
            }
        } else {
            if ($(window).width() > 480) {
                $('.productname.h-one-tag').css({ 'padding-bottom': '4px' });
            }
        }
        $(document).on('click', '.specChart-link', function () {
            if ($(window).width() > 480) {
                util.scrollBrowser($('.tab-sec').offset().top);
                $('#tabs').find('a[href="#specChartTab"]').trigger('click');
            } else if ($(window).width() < 481) {
                util.scrollBrowser($('.mobile-tabs-section .tabsHeader.specTab').offset().top);
                $('.tabsHeader.specTab').parent('.mobile-tabs-section ').addClass('active');
            }
        });
        var pdpRecomendation = function pdpRecomendation() {
            var pdpRecomendationCarousel = $('.pt_product-details .jcarouselcont .recommendations').find('.pdprecomo-owl');
            pdpRecomendationCarousel.owlCarousel({
                nav: true,
                dots: true,
                navigation: false,
                navRewind: false,
                rewind: false,
                loop: false,
                items: 5,
                responsiveClass: true,
                responsive: {
                    0: {
                        items: 2,
                        slideBy: 2
                    },
                    767: {
                        items: 2,
                        slideBy: 2
                    },
                    768: {
                        items: 5,
                        slideBy: 5
                    }
                }
            });
            var viewport = jQuery(window).width();
            var itemCount = jQuery('.owl-carousel .item').length;
            if (viewport >= 959 && itemCount > 5 || //desktop
            viewport >= 481 && viewport < 600 && itemCount > 3 //tablet
            || viewport < 480 && itemCount > 2 //mobile
            ) {
                    $('.pdprecomo-owl').find('.owl-prev, .owl-next').show();
                    $('.pdprecomo-owl').find('.owl-dots').show();
                } else {
                $('.pdprecomo-owl').find('.owl-prev, .owl-next').hide();
                $('.pdprecomo-owl').find('.owl-dots').hide();
            }
            $('.product-listing').find('h2.hide').removeClass('hide');
            var height = $('.owl-item').height();
            $('.pdprecomo-owl').find('.owl-item').find('.product-tile.item').height(height - 100);
            $('.pt_product-details .product-tile .product-image').on('mouseenter', function () {
                var $qvButton = $('#quickviewbutton');
                if ($qvButton.length === 0) {
                    $qvButton = $('<a id="quickviewbutton" class="quickview">' + Resources.QUICK_VIEW + '<i class="fa fa-arrows-alt"></i></a>');
                }
                var $link = $(this).find('.thumb-link');
                $qvButton.attr({
                    'href': $link.attr('href'),
                    'title': $link.attr('title')
                }).appendTo(this);
                $qvButton.off('click').on('click', function (e) {
                    e.preventDefault();
                    var options = {
                        url: $(this).attr('href'), //PREV JIRA PREV-255 :PLP: On Click Quick view navigating to a wrong page when user first changes the swatches. Taking only href.
                        source: 'quickview'
                    };
                    quickviewShow(options);
                });
            });
        };
        setTimeout(pdpRecomendation, 5500);
    }
};

module.exports = pdpEvents;

},{"../../ajax":15,"../../dialog":23,"../../progress":52,"../../util":63,"./addToCart":42}],45:[function(require,module,exports){
'use strict';

var progress = require('../progress'),
    uievents = require('../uievents'),
    tooltip = require('../tooltip'),
    validator = require('../validator'),
    ajax = require('../ajax'),
    util = require('../util');

var rapalainsider = {
    init: function init() {
        tooltip.init();
        validator.init();
        uievents.init();
        if (jQuery('#dialogcontainer123').length == 0) {
            jQuery(document.body).append('<div id=\'dialogcontainer123\' class=\'vipinsider-container\'></div>');
        }
        jQuery.each(jQuery('form:not(.suppress)'), function () {
            jQuery(this).validate(validator.settings);
        });

        var $vipinsider = $('.vipinsider-container');
        //vipform = $('.VipinsiderForm');
        //var validatorinit = $(this).closest('form').validate();
        $('#PasswordReset123').click(function (e) {
            e.preventDefault();
            $vipinsider.load(Urls.vipInsider, function () {
                $vipinsider.dialog({
                    bgiframe: true,
                    autoOpen: false,
                    modal: true,
                    overlay: {
                        opacity: 0.5,
                        background: 'white'
                    },
                    width: 358,
                    dialogClass: 'vipInsider-dlg',
                    resizable: false,
                    open: function open() {
                        tooltip.init();
                        validator.init();
                        uievents.init();
                        rapalainsider.dialogEvents();
                        rapalainsider.formPrepare({
                            formSelector: '#VipinsiderForm',
                            continueSelector: '#VIPInsider-form-sbmt-id',
                            type: 'opacity'
                        });
                        rapalainsider.vipinsiderevents();
                        if ($(window).width() > 1200) {
                            rapalainsider.customselecteventsb();
                        }
                        rapalainsider.textarearapala();
                        rapalainsider.clearbuttonfunct();
                        $('.remove').click(function (e) {
                            e.preventDefault();
                            var filename = $(this).attr('data-file');
                            var form = $(this).closest('form');
                            var url = form.attr('action');
                            var finalURL = util.appendParamToURL(url, 'filename', filename);
                            ajax.load({
                                url: finalURL,
                                callback: function callback() {}
                            });
                        });
                    }
                });
                jQuery('#dialogcontainer123').dialog('open');
                $(window).scrollTop(0);
            });
        });
    },
    dialogEvents: function dialogEvents() {
        var $vipinsider = $('.vipinsider-container');
        //vipform = $('.VipinsiderForm');
        rapalainsider.clearbuttonfunct();
        $vipinsider.find('#VIPInsider-form-sbmt-id').on('click', function (e) {
            e.preventDefault();
            var prodid = $('.fieldstaff form .dyn-cat-select select').find(':selected').val();
            if ($('.trigger_singleupload').is(':visible') && prodid != 'donation') {
                if (!($('.vip-uploadform-holder .filelist').find('.updatetext').length != 0)) {
                    $('.vip-uploadform-holder').find('.empty-attachment-error').removeClass('hide');
                    if (!$(this).closest('form').valid()) {
                        return false;
                    }
                    return false;
                }
            }
            if (!$(this).closest('form').valid()) {
                return false;
            }
            $('.vip-uploadform-holder').find('.empty-attachment-error').addClass('hide');
            var vipURL = $(this).closest('form').attr('action');
            var vipData = $(this).closest('form').serialize();
            progress.show($('.fieldstaff form'));
            jQuery('#msgcontianer').remove();
            $('<div/>').attr('id', 'msgcontianer').html(' ').appendTo(document.body);
            ajax.load({
                url: vipURL,
                data: vipData,
                type: 'POST',
                callback: function callback(vipData) {
                    $('body').find('.vipInsider-dlg .ui-dialog-titlebar-close').trigger('click');
                    var present = $(vipData).find('.exiting_user').length,
                        width = present > 0 ? '316px' : '358px',
                        height = present > 0 ? 'auto' : '184',
                        dlgClass = present > 0 ? 'existinguserdlg' : 'newuserdlg';
                    $('#msgcontianer').find('.regcheck').remove();
                    jQuery('#msgcontianer').append(vipData);
                    jQuery('#msgcontianer').dialog({
                        bgiframe: true,
                        autoOpen: false,
                        modal: true,
                        overlay: {
                            opacity: 0.5,
                            background: 'white'
                        },
                        width: width,
                        height: height,
                        dialogClass: 'vipInsider-dlg ' + dlgClass,
                        resizable: false,
                        open: function open() {}
                    });
                    jQuery('#msgcontianer').dialog('open');
                    $('.vipInsider-dlg.ui-dialog.existinguserdlg button.close, .vipInsider-dlg.ui-dialog.newuserdlg button.close').on('click', function (e) {
                        e.preventDefault();
                        $(this).closest('.ui-dialog').find('.ui-dialog-titlebar-close').trigger('click');
                    });
                }
            });
        });
        $('.vipInsider-dlg.ui-dialog.existinguserdlg button.close, .vipInsider-dlg.ui-dialog.newuserdlg button.close').on('click', function (e) {
            e.preventDefault();
            $(this).closest('.ui-dialog').find('.ui-dialog-titlebar-close').trigger('click');
        });
        $vipinsider.find('.trigger_singleupload input[type="file"]').on('click', function () {
            if ($(this).closest('.vip-uploadform-holder').find('.empty-attachment-error').is(':visible')) {
                $(this).closest('.vip-uploadform-holder').find('.empty-attachment-error').addClass('hide');
            }
        });
        //VIP insider dropdown change
        $('.fieldstaff form').find('.dyn-cat-select select').off('change').on('change', function (e) {
            e.preventDefault();
            var $curObj = $(this);
            var prodid = '';
            if ($(this).closest('.dyn-cat-select').find('.sbHolder').length > 0) {
                var selectedText = $(this).closest('.dyn-cat-select').find('.sbSelector').text();
                prodid = $(this).find('option[label="' + selectedText + '"]').attr('value');
            } else {
                prodid = $(this).find(':selected').val();
            }
            //alert($(this).find(':selected').val());
            var url = Urls.vipInsiderDynamicForms;

            if (prodid == 'field' || prodid == 'sports' || prodid == 'industry' || prodid == 'donation') {
                if (prodid == 'sports') {
                    $('.vip-uploadform-holder').find('span.text-holder-upload').replaceWith('<span class="text-holder-upload">*Upload Business Card or Pay Stub</span>');
                    $('.vip-uploadform-holder').find('.trigger_singleupload .empty-attachment-error').text('Please upload Business card or Pay Stub');
                }
                if (prodid == 'field') {
                    $('.vip-uploadform-holder').find('span.text-holder-upload').replaceWith('<span class="text-holder-upload">*Attach Resume</span>');
                    $('.vip-uploadform-holder').find('.trigger_singleupload .empty-attachment-error').text('Please upload your Resume');
                }
                if (prodid == 'industry') {
                    $('.vip-uploadform-holder').find('span.text-holder-upload').replaceWith('<span class="text-holder-upload">*Upload Business Card</span>');
                    $('.vip-uploadform-holder').find('.trigger_singleupload .empty-attachment-error').text('Please upload a Business Card');
                }
                if (prodid == 'donation') {
                    $('.vip-uploadform-holder').find('span.text-holder-upload').replaceWith('<span class="text-holder-upload">Upload Flyer</span>');
                    //$('.vip-uploadform-holder').find('.trigger_singleupload .empty-attachment-error').text('Please upload a Flyer');
                    //$('.vip-uploadform-holder').find('span.text-holder-upload').closest('form').removeClass('trigger_singleupload');
                }
                $('.vip-uploadform-holder').removeClass('hide');
            } else {
                $('.vip-uploadform-holder').addClass('hide');
            }

            if (prodid != undefined && prodid != null && prodid.length > 0) {
                url = url + '?prodid=' + prodid;
            } else {
                return false;
            }

            progress.show($('.fieldstaff form'));
            ajax.load({
                url: url,
                callback: function callback(data) {
                    if ($('.fieldstaff form .dynamic-content-holder-vip') != undefined && $('.fieldstaff form .dynamic-content-holder-vip').length > 0 && $(data).filter('.vipinsider-onload-data-holder') != undefined && $(data).filter('.vipinsider-onload-data-holder').length > 0) {
                        $('.fieldstaff form .dynamic-content-holder-vip').html($(data).filter('.vipinsider-onload-data-holder').html());
                        $('.trigger_singleupload .pro_id').val(prodid);
                        var dateObj = new Date();
                        dateObj.setTime(dateObj.getTime() + 60 * 60 * 1000);
                        document.cookie = 'progcookie=' + prodid + '; expires=' + dateObj.toUTCString() + '; path=/';
                        progress.hide();
                        if ($(window).width() > 1200) {
                            rapalainsider.customselecteventsb();
                        }
                        rapalainsider.textarearapala();
                        rapalainsider.clearbuttonfunct();
                        rapalainsider.formPrepare({
                            formSelector: '#VipinsiderForm',
                            continueSelector: '#VIPInsider-form-sbmt-id',
                            type: 'opacity'
                        });
                        if ($curObj.closest('.dyn-cat-select').find('.sbHolder').length > 0) {
                            var selectedText = $curObj.closest('.dyn-cat-select').find('.sbSelector').text();
                            prodid = $curObj.find('option[label="' + selectedText + '"]').attr('value');
                        } else {
                            prodid = $curObj.find(':selected').val();
                        }
                        if (prodid != 'Select A Program') {
                            $('.dyn-cat-select').find('.label').removeClass('erroroccured');
                            $('.dyn-cat-select').find('.label span.errorclient.inputlabel').remove();
                            $('.dyn-cat-select').find('.label span').removeClass('inputlabel');
                            $('.dyn-cat-select').find('select').removeClass('errorclient').addClass('valid');
                        }
                        if ($('.filelist').find('ul').length > 0) {
                            $('.filelist').find('ul').css({ 'display': 'none' });
                        }
                    }
                }
            });
        });
    },
    // sub namespace app.ajax.* contains application specific ajax
    // components
    ajax: {
        Success: 'success',
        currentRequests: {}, // request cache

        // ajax request to get json response
        // @param - reqName - String - name of the request
        // @param - async - boolean - asynchronous or not
        // @param - url - String - uri for the request
        // @param - data - name/value pair data request
        // @param - callback - function - callback function to be called
        getJson: function getJson(options) {
            var thisAjax = this;

            // do not bother if the request is already in progress
            // and let go null reqName
            if (!options.reqName || !this.currentRequests[options.reqName]) {
                this.currentRequests[options.reqName] = true;
                if (options.async == 'undefined') {
                    options.async = true;
                }
                // make the server call
                jQuery.ajax({
                    contentType: 'application/json; charset=utf-8',
                    dataType: 'json',
                    url: options.url,
                    cache: true,
                    async: options.async,
                    data: options.data,

                    success: function success(response, textStatus) {
                        thisAjax.currentRequests[options.reqName] = false;

                        if (!response.Success) {
                            // handle failure
                        }

                        options.callback(response, textStatus);
                    },

                    error: function error(request, textStatus) {
                        if (textStatus === 'parsererror') {
                            alert(Resources.BAD_RESPONSE);
                        }

                        options.callback({
                            Success: false,
                            data: {}
                        });
                    }
                });
            }
        },

        // ajax request to load html response in a given container
        // @param - reqName - String - name of the request
        // @param - url - String - uri for the request
        // @param - data - name/value pair data request
        // @param - callback - function - callback function to be called
        // @param - selector - string - id of the container div/span
        // (#mycontainer) - it must start with '#'
        load: function load(options) {

            var thisAjax = this;

            // do not bother if the request is already in progress
            // and let go null reqname
            if (!options.reqName || !this.currentRequests[options.reqName]) {
                this.currentRequests[options.reqName] = true;
                // make the server call
                jQuery.ajax({
                    dataType: 'html',
                    url: options.url,
                    cache: true,
                    data: options.data,

                    success: function success(response, textStatus) {
                        thisAjax.currentRequests[options.reqName] = false;

                        if (options.selector) {
                            jQuery(options.selector).html(response);
                        }

                        if (options.callback != undefined) {
                            options.callback(response, textStatus);
                        }
                    },

                    error: function error(request, textStatus) {
                        if (textStatus === 'parsererror') {
                            alert(Resources.BAD_RESPONSE);
                        }

                        options.callback(null, textStatus);
                    }
                });
            }
        }
    },

    vipinsiderevents: function vipinsiderevents() {
        var $vipinsider = $('.vipinsider-container');
        //vipform = $('.VipinsiderForm');
        $vipinsider.find('.trigger_singleupload input[type="file"]').unbind('change').change(function () {

            var xhr = new XMLHttpRequest(),
                data = new FormData(),
                files = $('#fileid').get(0).files,
                form = $(this).closest('form');
            //if($(this).hasClass('errorclient')){ $(this).trigger('blur'); }
            var totalsize = 0;
            totalsize = $('.vip-uploadform-holder .remove_singleupload span.updatetext').eq(0).attr('value');

            if (this.files[0].size / 1024 / 1024 > 2 || totalsize > 2) {
                $vipinsider.find('.vip-uploadform-holder .file-size-exceed-error').removeClass('hide');
                return false;
            }

            var extension = this.files[0].name.split('.')[1].toLowerCase();
            if (extension != 'jpg' && extension != 'png' && extension != 'PNG' && extension != 'jpeg' && extension != 'pdf' && extension != 'gif' && extension != 'doc' && extension != 'docx' && extension != 'pages') {
                $vipinsider.find('.vip-uploadform-holder .file-format-exceed-error').removeClass('hide');
                return false;
            }

            $vipinsider.find('.vip-uploadform-holder .file-format-exceed-error').addClass('hide');
            $vipinsider.find('.vip-uploadform-holder .file-size-exceed-error').addClass('hide');
            form.find('.progressbar').fadeIn(500);

            for (var i = 0; i < files.length; i++) {
                data.append(files[i].name, files[i]);
            }
            xhr.upload.addEventListener('progress', function (evt) {
                if (evt.lengthComputable) {
                    var progress = Math.round(evt.loaded * 100 / evt.total);
                    form.find('.progressbar .count').text(progress + '% Complete');
                    form.find('.progressbar .progressload').width(progress + '%');
                }
            }, false);
            xhr.open('POST', form.attr('action'));
            xhr.send(data);

            xhr.upload.addEventListener('loadend', function () {
                form.find('#fileid').val('');
                setTimeout(function () {
                    form.find('.progressbar').fadeOut(100, function () {
                        form.find('.progressbar .count').text('0%');
                        form.find('.progressbar .progressload').width('0');
                    });
                }, 500);
            });

            xhr.onload = function () {
                $('.vip-uploadform-holder .filelist').html(xhr.responseText);
                rapalainsider.vipinsiderevents();
            };
        });

        if ($(window).width() <= 767) {
            $('.insider_body.rapala_device [maxlength]').bind('keypress keyup', function () {
                var $this = $(this);
                var val = $this.val();
                var valLength = val.length;
                var maxCount = $this.attr('maxlength');
                if (valLength > maxCount) {
                    $this.val($this.val().substring(0, maxCount));
                }
            });
        }

        $vipinsider.find('.remove').unbind('click').click(function (e) {
            e.preventDefault();
            var filename = $(this).attr('data-file');
            var form = $(this).closest('form');
            var url = form.attr('action');
            var finalURL = util.appendParamToURL(url, 'filename', filename);
            ajax.load({
                url: finalURL,
                type: 'POST',
                callback: function callback(data) {
                    $('.vip-uploadform-holder .filelist').html(data);
                    rapalainsider.vipinsiderevents();
                }
            });
        });
    },

    formPrepare: function formPrepare(opts) {

        var $form, $continue, $requiredInputs, validator;

        var hasEmptyRequired = function hasEmptyRequired() {
            // filter out only the visible fields
            var requiredValues = $requiredInputs.filter(':visible').map(function () {
                return $(this).val();
            });
            return $.inArray('', requiredValues) != -1;
        };

        var validateForm = function validateForm() {
            // only validate form when all required fields are filled to avoid
            // throwing errors on empty form
            if (!hasEmptyRequired() && validator.form()) {
                $continue.removeAttr('disabled').removeClass('button_invisible');
            } else {
                if (opts.type == 'disable') {
                    $continue.attr('disabled', 'disabled');
                } else {
                    $continue.addClass('button_invisible');
                }
            }
        };

        var validateEl = function validateEl() {
            if ($(this).val() === '') {
                if (opts.type == 'disable') {
                    $continue.attr('disabled', 'disabled');
                } else {
                    $continue.addClass('button_invisible');
                }
            } else {
                // enable continue button on last required field that is valid
                // only validate single field
                if (validator.element(this) && !hasEmptyRequired()) {
                    $continue.removeAttr('disabled').removeClass('button_invisible');
                } else {
                    if (opts.type == 'disable') {
                        $continue.attr('disabled', 'disabled');
                    } else {
                        $continue.addClass('button_invisible');
                    }
                }
            }
        };
        //type optional value disable or opacity
        $form = $(opts.formSelector);
        $continue = $(opts.continueSelector);
        validator = $form.validate();
        $requiredInputs = $('.required', $form).filter(':input');
        validateForm();
        // start listening
        $requiredInputs.change(validateEl);
        $requiredInputs.filter('input').blur(validateEl);
    },

    customselecteventsb: function customselecteventsb() {
        if (!$('body').hasClass('rapala_device')) {
            var $con = $('body');
            $con.find('.customized-select').find('select').each(function () {
                if ($(this).attr('disabled')) {
                    $(this).selectbox('disable');
                } else {
                    $(this).selectbox();
                }
                $('.sbOptions li:last').addClass('last');
            }).focus(function () {
                $(this).next('.sbHolder').trigger('focus');
            });
        }
    },

    textarearapala: function textarearapala() {
        $('textarea[maxlength]').each(function () {
            charcount($(this));
            // trigger the keydown event so that any existing character data is calculated
        }).on('keyup keypress', function () {
            charcount($(this));
        });

        function charcount($this) {
            var characterLimit = '1200';
            var charRemains = characterLimit - $this.val().trim().length;
            //var charCountContainer = '';
            var charCountHtml = 'Characters Remaining ' + charRemains;
            if ($this.hasClass('vip-textarea')) {
                if ($this.next('div.char-count').length === 0) {
                    $('<div class="char-count"/>').insertAfter($this);
                }
                $this.next('div.char-count').html(charCountHtml);
            } else {
                if ($this.prev('div.char-count').length === 0) {
                    $('<div class="char-count"/>').insertBefore($this);
                }
                $this.prev('div.char-count').html(charCountHtml);
            }
        }
    },

    clearbuttonfunct: function clearbuttonfunct() {
        if ($('#dialogcontainer123').length > 0) {
            $('#dialogcontainer123').find('.formfield').each(function () {
                if ($(this).find('.field-wrapper .clearbutton').length == 0 && $(this).find('.field-wrapper input[type="text"]').length > 0 || $(this).find('.field-wrapper input[type="password"]').length > 0 || $(this).find('.field-wrapper textarea').length > 0) {
                    $(this).find('.field-wrapper').append('<a class="clearbutton"></a>');
                }
            });
        }
        $('body').find('#dialogcontainer123 .field-wrapper input, textarea').on('keyup input blur', function () {
            if ($(this).val() != undefined) {
                if ($(this).val().length > 0) {
                    $(this).closest('.formfield').find('a.clearbutton').show();
                } else {
                    $(this).closest('.formfield').find('a.clearbutton').hide();
                }
            }
        });

        $('body').find('#dialogcontainer123 .field-wrapper a.clearbutton').on('click', function () {
            var characterLimit = 'Characters Remaining 1200';
            $(this).closest('.formfield').find('input').val('');
            $(this).closest('.formfield').find('textarea').val('');
            $(this).closest('.field-wrapper').find('span').remove();
            $(this).closest('.field-wrapper').find('.required').removeClass('errorclient');
            $(this).closest('.formfield').find('a.clearbutton').hide();
            $(this).closest('.formfield ').find('.form-row').removeClass('inputlabel');
            $(this).closest('.formfield').find('.form-row , .label span').removeClass('inputlabel');
            $(this).closest('.formfield').find('span.logerror , .existing_register').hide();
            $('div.char-count').html(characterLimit);
        });
    }

};
module.exports = rapalainsider;

},{"../ajax":15,"../progress":52,"../tooltip":61,"../uievents":62,"../util":63,"../validator":64}],46:[function(require,module,exports){
'use strict';

var addProductToCart = require('./product/addToCart'),
    ajax = require('../ajax'),
    quickview = require('../quickview'),
    account = require('./account'),
    util = require('../util');

/**
 * @function
 * @description Loads address details to a given address and fills the address form
 * @param {String} addressID The ID of the address to which data will be loaded
 */
function populateForm(addressID, $form) {
    // load address details
    var url = Urls.giftRegAdd + addressID;
    ajax.getJson({
        url: url,
        callback: function callback(data) {
            if (!data || !data.address) {
                window.alert(Resources.REG_ADDR_ERROR);
                return false;
            }
            // fill the form
            $form.find('[name$="_addressid"]').val(data.address.ID);
            $form.find('[name$="_firstname"]').val(data.address.firstName);
            $form.find('[name$="_lastname"]').val(data.address.lastName);
            $form.find('[name$="_address1"]').val(data.address.address1);
            $form.find('[name$="_address2"]').val(data.address.address2);
            $form.find('[name$="_city"]').val(data.address.city);
            $form.find('[name$="_country"]').val(data.address.countryCode).trigger('change');
            $form.find('[name$="_postal"]').val(data.address.postalCode);
            $form.find('[name$="_state"]').val(data.address.stateCode);
            $form.find('[name$="_phone"]').val(data.address.phone);
            // $form.parent('form').validate().form();
        }
    });
}

/**
 * @private
 * @function
 * @description Initializes events for the gift registration
 */
function initializeEvents() {
    var $eventAddressForm = $('form[name$="_giftregistry"]'),
        $beforeAddress = $eventAddressForm.find('fieldset[name="address-before"]'),
        $afterAddress = $eventAddressForm.find('fieldset[name="address-after"]');

    $('.usepreevent').on('click', function () {
        // filter out storefront toolkit
        $(':input', $beforeAddress).not('[id^="ext"]').not('select[name$="_addressBeforeList"]').each(function () {
            var fieldName = $(this).attr('name'),
                $afterField = $afterAddress.find('[name="' + fieldName.replace('Before', 'After') + '"]');
            $afterField.val($(this).val()).trigger('change');
        });
    });

    $eventAddressForm.on('change', 'select[name$="_addressBeforeList"]', function () {
        var addressID = $(this).val();
        if (addressID.length === 0) {
            return;
        }
        populateForm(addressID, $beforeAddress);
    }).on('change', 'select[name$="_addressAfterList"]', function () {
        var addressID = $(this).val();
        if (addressID.length === 0) {
            return;
        }
        populateForm(addressID, $afterAddress);
    });

    $('form[name$="_giftregistry_items"]').on('click', '.item-details a', function (e) {
        e.preventDefault();
        var productListID = $('input[name=productListID]').val();
        quickview.show({
            url: e.target.href,
            source: 'giftregistry',
            productlistid: productListID
        });
    });
}

exports.init = function () {
    initializeEvents();
    addProductToCart();
    //Start JIRA PREV-333 : On click of Forgot Password link navigates to the page instead of overlay.
    account.initCartLogin();
    util.setDeleteConfirmation('.item-list', String.format(Resources.CONFIRM_DELETE, Resources.TITLE_GIFTREGISTRY));
};

},{"../ajax":15,"../quickview":54,"../util":63,"./account":31,"./product/addToCart":42}],47:[function(require,module,exports){
'use strict';

var compareWidget = require('../compare-widget'),
    productTile = require('../product-tile'),
    progress = require('../progress'),
    uievents = require('../uievents'),

//imagesLoaded = require('imagesloaded'),
util = require('../util');

function infiniteScroll() {
    // getting the hidden div, which is the placeholder for the next page
    var loadingPlaceHolder = $('.infinite-scroll-placeholder[data-loading-state="unloaded"]');
    // get url hidden in DOM
    var gridUrl = loadingPlaceHolder.attr('data-grid-url');
    if (loadingPlaceHolder.length === 1 && util.elementInViewport(loadingPlaceHolder.get(0), 250)) {
        // switch state to 'loading'
        // - switches state, so the above selector is only matching once
        // - shows loading indicator
        loadingPlaceHolder.attr('data-loading-state', 'loading');
        loadingPlaceHolder.addClass('infinite-scroll-loading');

        // named wrapper function, which can either be called, if cache is hit, or ajax repsonse is received
        var fillEndlessScrollChunk = function fillEndlessScrollChunk(html) {
            loadingPlaceHolder.removeClass('infinite-scroll-loading');
            loadingPlaceHolder.attr('data-loading-state', 'loaded');
            $('div.search-result-content').append(html);
        };

        // old condition for caching was `'sessionStorage' in window && sessionStorage["scroll-cache_" + gridUrl]`
        // it was removed to temporarily address RAP-2649

        $.ajax({
            type: 'GET',
            dataType: 'html',
            url: gridUrl,
            success: function success(response) {
                // put response into cache
                try {
                    sessionStorage['scroll-cache_' + gridUrl] = response;
                } catch (e) {}
                // nothing to catch in case of out of memory of session storage
                // it will fall back to load via ajax

                // update UI
                fillEndlessScrollChunk(response);
                productTile.init();
            }
        });
    }
}

/**
 * @private
 * @function
 * @description replaces breadcrumbs, lefthand nav and product listing with ajax and puts a loading indicator over the product listing
 */
function updateProductListing(url) {
    if (url == null) {
        return;
    }
    $('#main').addClass('hidecontent');
    progress.show('#main');
    $('#main').load(util.appendParamToURL(url, 'format', 'ajax'), function () {
        searchRefinment.searchRefinementToggle();
        uievents.init();
        compareWidget.init();
        productTile.init();
        owlcarousel();
        /* $('.scrollable').each(function(){
             $(this).slimScroll({
                 size: '10px',
                 height: '200px',
                 railVisible: true,
                 alwaysVisible: true
             });
           });*/

        progress.hide();
        $('#main').removeClass('hidecontent');
        history.pushState(undefined, '', url);
        $('html, body').animate({ scrollTop: 0 }, 'fast');
        if ($('.pt_product-search-result .search-blk').length > 0) {
            $('.pt_product-search-result').find('#primary').addClass('search-result');
        }
        if ($('.refine-display.refine-values .breadcrumb-refinement').length > 0) {
            $('.pt_product-search-result.searchresult').find('#primary').addClass('search-result');
            $('.pt_product-search-result.categorylanding').find('#primary').addClass('search-result');
        } else {
            $('.pt_product-search-result.searchresult').find('#primary').addClass('search-result');
            $('.pt_product-search-result.categorylanding').find('#primary').removeClass('search-result');
        }
        gridSyncheight();
        $('#secondary').removeClass('visible-hidden').addClass('secondary-hide');
    });
}

// updates the grid using the 'post hash' refinement values
function gridSyncheight() {
    $('.tiles-container .product-tile').syncHeight();
}

function owlcarousel() {
    setTimeout(function () {
        var owl = $('.owl-carousel');
        owl.owlCarousel({
            items: 5,
            slideBy: 5,
            rewind: false,
            nav: true,
            navRewind: false,
            loop: false,
            dots: true,
            responsive: {
                0: {
                    items: 2,
                    slideBy: 2
                },
                767: {
                    items: 2,
                    slideBy: 2
                },
                768: {
                    items: 5,
                    slideBy: 5
                }
            }
        });

        var viewport = jQuery(window).width();
        //var current = $(this);
        var itemCount = $('.recommendations.cross-sell.Recommended.For.You .owl-carousel .owl-item').length;
        if (viewport >= 768 && itemCount > 5 || viewport < 768 && itemCount > 2) {
            $('.recommendations.cross-sell.Recommended.For.You .pdprecomo-owl').find('.owl-prev, .owl-next').show();
            $('.recommendations.cross-sell.Recommended.For.You .pdprecomo-owl').find('.owl-dots').show();
        } else {
            $('.recommendations.cross-sell.Recommended.For.You .pdprecomo-owl').find('.owl-prev, .owl-next').hide();
            $('.recommendations.cross-sell.Recommended.For.You .pdprecomo-owl').find('.owl-dots').hide();
        }

        //var viewportone = jQuery(window).width();
        //var currentone = $(this);
        var itemCountone = $('.recommendations.cross-sell.Recently.Viewed .owl-carousel .owl-item').length;

        if (viewport >= 768 && itemCountone > 5 || viewport < 768 && itemCountone > 2) {
            $('.recommendations.cross-sell.Recently.Viewed .pdprecomo-owl').find('.owl-prev, .owl-next').show();
            $('.recommendations.cross-sell.Recently.Viewed .pdprecomo-owl').find('.owl-dots').show();
        } else {
            $('.recommendations.cross-sell.Recently.Viewed .pdprecomo-owl').find('.owl-prev, .owl-next').hide();
            $('.recommendations.cross-sell.Recently.Viewed .pdprecomo-owl').find('.owl-dots').hide();
        }
        $('.product-listing').find('h2.hide').removeClass('hide');

        productTile.init();
        $('.pt_product-search-result .recommendations.cross-sell .search-result-items .product-tile.item').last().addClass('recomlast');
    }, 5500);
}

var searchRefinment = {
    searchRefinementToggle: function searchRefinementToggle() {
        //$("#secondary").removeAttr("style");
        $('.js-scrollbar').each(function ($i) {
            //var curObj = $(this);
            //var thresholdValue = $(curObj).closest('.refinement').find('.device-refine').val();
            if ($('.rapala_device').length == 0) {
                if ($(this).closest('.navgroup').hasClass('refinement')) {
                    if ($(this).find('li').length > 8) {
                        $(this).addClass('js-scrollbar-height');
                        $(this).find('.overview').slimScroll({
                            railVisible: true,
                            height: '200px',
                            size: '10px',
                            railColor: 'transparent',
                            color: '#a0a0a0',
                            alwaysVisible: true
                        });
                        //$(this).tinyscrollbar({trackSize : 200});
                    } else {
                        $(this).find('.overview').css('position', 'static');
                    }
                } else {
                    //$(this).tinyscrollbar({trackSize : 200});
                    $(this).find('.overview').slimScroll({
                        railVisible: true,
                        height: '200px',
                        size: '10px',
                        railColor: 'transparent',
                        color: '#a0a0a0',
                        alwaysVisible: true
                    });
                }
            } else {
                /*if($(this).find('li').length > thresholdValue && $(this).find('.seeMoreRefinements').length == 0){
                    if($(this).find('.seeNextRefinements').length == 0 && $(this).find('.seePrevRefinements').length == 0){
                        $(this).append('<a href="#" class="seeNextRefinements">See Next</a>');
                        $(this).append('<a href="#" class="seePrevRefinements">See Previous</a>');
                    }
                    thresholdValue -= 1;
                    $(this).find('li').eq(thresholdValue).nextAll('li').hide();
                    $('.seePrevRefinements').hide();
                }
                else{
                    $(this).find('li').show();
                    $(this).find('.seeNextRefinements').hide();
                }*/
            }

            if ($i == $('.js-scrollbar').length - 1) {
                $('#searchrefinements div.navgroup').each(function (i) {
                    if ($(window).width() < 960) {
                        if ($(this).find('li.selected').length == 0) {
                            $(this).find('div.refineattributes').hide();
                            $(this).find('.filter').addClass('expand');
                            $(this).addClass('collapse-expand');
                        }
                    } else {
                        if (i > 2 && $(this).find('li.selected').length == 0) {
                            $(this).find('div.refineattributes').hide();
                            $(this).find('.filter').addClass('expand');
                            $(this).addClass('collapse-expand');
                        } else if (i < 3) {
                            $(this).find('div.refineattributes').show();
                            $(this).find('.filter').removeClass('expand');
                            $(this).removeClass('collapse-expand');
                        }
                    }
                });
            }
        });

        // init refinement toggling
        $('#searchrefinements .filter').off('click').on('click', function (e) {
            e.preventDefault();
            jQuery(this).toggleClass('expand');
            $(this).closest('.navgroup').toggleClass('collapse-expand');
            jQuery(this).closest('.navgroup').find('div.refineattributes').toggle();
            //jQuery(this).closest('.navgroup').find(".js-scrollbar").tinyscrollbar({trackSize : 200});
        });

        $(window).load(function () {
            $('#secondary').removeClass('visible-hidden').addClass('secondary-hide');
        });
        if ($(window).width() > 959) {
            $('.mobile-filter-by').removeClass('js-filter-active');
            $('#secondary').removeClass('.visible-hidden').removeAttr('style');
        }
    }
};

/**
 * @private
 * @function
 * @description Initializes events for the following elements:<br/>
 * <p>refinement blocks</p>
 * <p>updating grid: refinements, pagination, breadcrumb</p>
 * <p>item click</p>
 * <p>sorting changes</p>
 */
function initializeEvents() {
    owlcarousel();
    gridSyncheight();
    productTile.init();
    var $main = $('#main');
    // compare checked
    $main.on('click', 'input[type="checkbox"].compare-check', function () {
        var cb = $(this);
        var tile = cb.closest('.product-tile');

        var func = this.checked ? compareWidget.addProduct : compareWidget.removeProduct;
        var itemImg = tile.find('.product-image a img').first();
        func({
            itemid: tile.data('itemid'),
            uuid: tile[0].id,
            img: itemImg,
            cb: cb
        });
    });

    if ($('.contentAsset-new').find('.html-slot-container').length > 0) {
        var current = $('.contentAsset-new').find('.html-slot-container');
        current.parents('.desktop').removeClass('promohide').addClass('promoshow');
    } else {
        $('.desktop').removeClass('promoshow').addClass('promohide');
    }

    $main.on('click', '.mobile-filter-by', function () {
        if (!$('.mobile-filter-by').hasClass('js-filter-active')) {
            $('.mobile-filter-by').addClass('js-filter-active');
            $('#secondary').show();
            //$("#secondary").css("top",secondaryTop+"px");
        } else {
            $('.mobile-filter-by').removeClass('js-filter-active');
            $('#secondary').hide();
            //$("#secondary").css("top",secondaryTop+"px");
        }
    });
    $('#tabs a').click(function (e) {
        e.preventDefault();
        $(this).prev('input[type="radio"]').prop('checked', true);
        var href = $(this).attr('href');
        window.location = href;
    });

    $main.on('click', '#tabs input[type="radio"]', function () {
        var checked = $(this).prop('checked', true);
        if (checked) {
            $(this).prop('checked', false);
        } else {
            $(this).prop('checked', true);
        }
        $(this).next('a').trigger('click');
        $(this).prop('checked', true);
    });

    //searchcontent-section
    $main.on('click', '.mobile-filter-by.results-content', function () {
        if (!$('.mobile-filter-by.results-content').hasClass('js-filter-active')) {
            $('.mobile-filter-by.results-content').addClass('js-filter-active');
            $('#secondary.searchResult-refinement').show();
            //$("#secondary").css("top",secondaryTop+"px");
        } else {
            $('.mobile-filter-by.results-content').removeClass('js-filter-active');
            $('#secondary.searchResult-refinement').hide();
            //$("#secondary").css("top",secondaryTop+"px");
        }
    });

    if ($('.pt_product-search-result .search-blk').length > 0) {
        $('.pt_product-search-result').find('#primary').addClass('search-result');
    }

    if ($('.pt_content-search-result .folder-content-list').length > 0) {
        $('.pt_content-search-result').find('#tabs #producttab').prop('checked', false);
        $('.pt_content-search-result').find('#tabs #contenttab').prop('checked', true);
    }

    $main.on('click', '.sortby-button', function () {
        if ($(window).width() >= 481 && $(window).width() <= 959) {
            if (!$('.sortby-button').hasClass('js-sort-active')) {
                $('.sortby-button').addClass('js-sort-active');
                $('.search-result-options').addClass('show-sort');
                $('.mobile-sort-by-content').show();
            } else {
                $('.sortby-button').removeClass('js-sort-active');
                $('.search-result-options').removeClass('show-sort');
                $('.mobile-sort-by-content').hide();
            }
        }
    });

    searchRefinment.searchRefinementToggle();

    /*$(window).resize(function(){
    searchRefinment.searchRefinementToggle();
    });*/

    /* $('.scrollable').each(function(){
    	$(this).slimScroll({
            size: '10px',
            height: '200px',
            railVisible: true,
            alwaysVisible: true
        });
      });*/
    // handle toggle refinement blocks
    /* $main.on('click', '.refinement h3', function () {
          if( !$(this).hasClass('expand') ){
              $(this).addClass('expand').closest('.navgroup').addClass('collapse-expand').find('.sub-refinement').hide();
            }else {
              $(this).removeClass('expand').closest('.navgroup').removeClass('collapse-expand').find('.sub-refinement').show();
          }
     });*/

    // color swatches events //
    $main.on('click', '.product-swatches .product-swatches-all', function () {
        if ($(this).hasClass('loaded')) {
            $(this).next('.swatch-list.swatch-toggle').show();
            return false;
        }
        $(this).addClass('loaded');
        var cont = $(this).parent().find('ul.swatch-list.swatch-toggle');
        cont.show().focus();
        $(this).parent().find('ul.swatch-toggle li > a').each(function () {
            if ($(this).data('href')) {
                $(this).find('img').attr('src', $(this).data('href'));
            }
        });
        cont.show().focus();
    });
    // prepare swatch palettes and thumbnails
    // show the palette

    // hide the palette
    $('#content div.product-swatches div.swatch-image').mouseout(function (e) {
        // fix for event bubbling (http://www.quirksmode.org/js/events_mouse.html)
        if (!e) {
            e = window.event;
        }
        var tg = window.event ? e.srcElement : e.target;
        if (tg.nodeName != 'DIV') {
            return;
        }
        var reltg = e.relatedTarget ? e.relatedTarget : e.toElement;
        while (reltg != tg && reltg.nodeName != 'BODY') {
            reltg = reltg.parentNode;
        }
        if (reltg == tg) {
            return;
        }

        // mouseout took place when mouse actually left layer
        // handle event now
        $(this).hide();
        return false;
    });

    $('.swatch-list.swatch-toggle').mouseleave(function () {
        $('.swatch-list.swatch-toggle').hide();
    });

    jQuery('#content .producttile div.swatches div.invisible').hide();
    jQuery('#content .producttile div.swatches a.swatch img.hiddenthumbnail').hide();

    $('#content.product-swatches .product-swatches-all.loaded').click(function () {
        //var swatch = jQuery(this);
        updateProductListing(this.href);
        // omit following the swatch link
        return false;
    });

    $('body').mouseleave(function () {
        if ($(window).width() > 960) {
            $('.swatch-list.swatch-toggle').hide();
        }
    });
    $('body').bind('blur', function () {
        $('.swatch-list.swatch-toggle').hide();
    });

    // handle events for updating grid
    $main.on('click', '.refinement a, .sorthitscontainer .pagination a, .breadcrumb-refinement-value a, .mobile-sort-by-content a', function (e) {
        // don't intercept for category and folder refinements, as well as unselectable
        if ($(this).parents('.category-refinement').length > 0 || $(this).parents('.folder-refinement').length > 0 || $(this).parent().hasClass('unselectable')) {
            return;
        }
        e.preventDefault();
        var query = util.getQueryString(this.href);
        window.location.hash = query;
        if (this.href === window.location.href) {
            return;
        }
        updateProductListing(this.href);
    });

    $('.productlisting.sub-cat').each(function () {
        $(this).find('.product.producttile.cell').first().addClass('subfirst');
    });

    // handle events item click. append params.
    $main.on('click', '.product-tile a:not("#quickviewbutton")', function () {
        var a = $(this);
        // get current page refinement values
        var wl = window.location;

        var qsParams = wl.search.length > 1 ? util.getQueryStringParams(wl.search.substr(1)) : {};
        var hashParams = wl.hash.length > 1 ? util.getQueryStringParams(wl.hash.substr(1)) : {};

        // merge hash params with querystring params
        var params = $.extend(hashParams, qsParams);
        if (!params.start) {
            params.start = 0;
        }
        // get the index of the selected item and save as start parameter
        var tile = a.closest('.product-tile');
        var idx = tile.data('idx') ? +tile.data('idx') : 0;

        /*Start JIRA PREV-50 : Next and Previous links will not be displayed on PDP if user navigate from Quick View.Added cgid to hash*/
        if (!params.cgid && tile.data('cgid') !== null && tile.data('cgid') !== '') {
            params.cgid = tile.data('cgid');
        }
        /*End JIRA PREV-50*/

        // convert params.start to integer and add index
        params.start = +params.start + (idx + 1);
        // set the hash and allow normal action to continue
        a[0].hash = $.param(params);
    });

    // handle sorting change
    $main.on('change', '.sort-by select', function (e) {
        var selectedOption = $('.sort-by option:selected').val().split('?')[1].split('&');
        //var url = $(this).val();
        var selectedOptionval = '';
        $.each(selectedOption, function (i, v) {
            if (v.indexOf('srule') != -1) {
                selectedOptionval = v.split('=')[1];
            }
        });

        if (selectedOptionval.length != 0) {
            var dateObj = new Date();
            dateObj.setTime(dateObj.getTime() + 60 * 60 * 1000);
            document.cookie = 'selectedOption=' + selectedOptionval + '; expires=' + dateObj.toUTCString() + '; path=/';
            /*
            var sortRule = url.split('?')[1].split('&');
            var sortType = '';
              $.each(sortRule, function (i, v) {
                if (v.indexOf('srule') != -1) {
                    sortType = v.split('=')[1];
                }
            });
            */
        }
        e.preventDefault();
        var query = util.getQueryString($(this).find('option:selected').val());
        window.location.hash = query;
        if ($(this).find('option:selected').val() === window.location.href) {
            return;
        }
        updateProductListing($(this).find('option:selected').val());
    }).on('change', '.items-per-page select', function () {
        var refineUrl = $(this).find('option:selected').val();
        if (refineUrl === 'INFINITE_SCROLL') {
            $('html').addClass('infinite-scroll').removeClass('disable-infinite-scroll');
        } else {
            $('html').addClass('disable-infinite-scroll').removeClass('infinite-scroll');
            var query = util.getQueryString(refineUrl);
            window.location.hash = query;
            if (refineUrl === window.location.href) {
                return;
            }
            updateProductListing(refineUrl);
        }
    });
}

exports.init = function () {
    compareWidget.init();
    if (SitePreferences.LISTING_INFINITE_SCROLL) {
        $(window).on('scroll', infiniteScroll);
    }
    productTile.init();
    initializeEvents();
};

},{"../compare-widget":20,"../product-tile":51,"../progress":52,"../uievents":62,"../util":63}],48:[function(require,module,exports){
'use strict';

exports.init = function () {
    var owl = $('.owl-carousel');
    owl.owlCarousel({
        items: 1,
        loop: true,
        dots: true,
        autoplay: true,
        autoplayTimeout: 7000,
        autoplayHoverPause: true,
        animateOut: 'fadeOut',
        responsive: {
            0: {
                items: 1
            },
            600: {
                items: 1
            },
            1000: {
                items: 1
            }
        }
    });
};

},{}],49:[function(require,module,exports){
'use strict';

var dialog = require('../dialog'),
    util = require('../util'),
    validator = require('../validator');

exports.init = function () {
    $('.store-details-link').on('click', function (e) {
        e.preventDefault();
        dialog.open({
            url: $(e.target).attr('href')
        });
    });
    storeLocator.init();
};
$('.customersubmit').on('click', function () {
    if ($('.floatleft.state.custom-select select').valid() == 0) {
        if (!$('.floatleft.state.custom-select').hasClass('blured')) {
            $('.floatleft.state.custom-select').addClass('customselect-error');
        }
    } else {
        $('.floatleft.state.custom-select').removeClass('customselect-error');
    }
});
var storeLocator = {
    init: function init() {
        validator.init();
        $('.googlemap').on('click', function () {
            window.open(this.name);
        });
        $('body').find('form.locatorForm').submit(function (e) {
            e.preventDefault();
            var $form = jQuery(this);
            if ($('#locatorForm button').prop('disabled')) {
                return false;
            }
            $('#noresultserror').hide();
            $('#message.success').hide();
            $('#results').hide();
            $('#locatorForm button').prop('disabled', true);
            var param = {
                countryCode: 'US',
                distanceUnit: 'mi',
                postalCode: $('.postalCheck').val(),
                maxdistance: $('.mxdistanceCheck').val(),
                rapala: $('.rapalaCheck').prop('checked'),
                vmc: $('.vmcCheck').prop('checked'),
                storm: $('.stormCheck').prop('checked'),
                luhrjensen: $('.luhrCheck').prop('checked'),
                bluefox: $('.bluefoxCheck').prop('checked'),
                terminator: $('.terminatorCheck').prop('checked'),
                williamson: $('.williamCheck').prop('checked'),
                triggerx: $('.triggerCheck').prop('checked'),
                sufix: $('.sufixCheck').prop('checked'),
                marcum: $('.marcumCheck').prop('checked'),
                strikemaster: $('.strikeCheck').prop('checked')
            },
                serviceParam = {
                countryCode: 'US',
                distanceUnit: 'mi',
                postalCode: $('.postalCheck').val(),
                maxdistance: $('.mxdistanceCheck').val()
            };
            var url = util.appendParamsToUrl(Urls.storeJson, param),
                serviceUrl = util.appendParamsToUrl(Urls.serviceStoreJson, serviceParam);
            if ($('.store-Locator-page').length > 0) {
                $.ajax({
                    type: 'POST',
                    url: url,
                    data: $form.serialize(),
                    success: function success(data) {
                        // alert(data);
                        $('#locatorForm button').removeProp('disabled');
                        if (data.storeCount > 0) {
                            $('#storeCount').html(data.storeCount);
                            $('#message.success').show();
                            var store = {};
                            var html = [];
                            var allStoreHtml = '';
                            for (var i = 0; i < data.stores.length; i++) {
                                store = data.stores[i];
                                html = [];
                                html.push('<div class="storeresult"><div class="storeinformation">');
                                html.push('<h2 class="input-style">' + store.name + '</h2>');
                                html.push('<div>' + store.address1 + '<br/>');
                                html.push(store.city);
                                if (store.city != '' && store.state != '') {
                                    html.push(',');
                                }
                                html.push(store.state + ' ' + store.postalCode + '<br />');
                                if (store.phone != '') {
                                    html.push('<div class="storephone">' + store.phone + '</div>');
                                }
                                if (store.storeHours != '') {
                                    html.push('<div class="storeHours">' + store.storeHours + '</div>');
                                }
                                if (store.storeEvents != '') {
                                    html.push('<div class="storeEvents">' + store.storeEvents + '</div>');
                                }
                                html.push('</div></div><div class="storebrands">');
                                html.push('<span class="brandlabel">' + Resources.BRAND_CATEGORY1 + '</span><hr></hr>');
                                if (store.custom.brands.rapala) {
                                    html.push('<img alt=' + Resources.STORELOCATER_RAPALA + ' class="logo medium" src=' + Urls.rapalalogo + '></img>');
                                }
                                if (store.custom.brands.vmc) {
                                    html.push('<img alt=' + Resources.STORELOCATER_VMC + ' class="logo medium" src=' + Urls.vmclogo + '></img>');
                                }
                                if (store.custom.brands.sufix) {
                                    html.push('<img alt=' + Resources.STORELOCATER_SUFIX + ' class="logo medium" src=' + Urls.sufixlogo + '></img>');
                                }
                                if (store.custom.brands.storm) {
                                    html.push('<img alt=' + Resources.STORELOCATER_STORM + ' class="logo medium" src=' + Urls.stormlogo + '></img>');
                                }
                                if (store.custom.brands.triggerx) {
                                    html.push('<img alt=' + Resources.STORELOCATER_TRIGGERX + ' class="logo medium" src=' + Urls.triggerxlogo + '></img>');
                                }
                                if (store.custom.brands.luhrjensen) {
                                    html.push('<img alt=' + Resources.STORELOCATER_LUHRJONSON + ' class="logo medium" src=' + Urls.luhrjonsonlogo + '></img>');
                                }
                                if (store.custom.brands.terminator) {
                                    html.push('<img alt=' + Resources.STORELOCATER_TERMINATOR + ' class="logo medium" src=' + Urls.terminatorlogo + '></img>');
                                }
                                if (store.custom.brands.bluefox) {
                                    html.push('<img alt=' + Resources.STORELOCATER_BLUEFOX + ' class="logo medium" src=' + Urls.bluefoxlogo + '></img>');
                                }
                                if (store.custom.brands.williamson) {
                                    html.push('<img alt=' + Resources.STORELOCATER_WILLIAMSON + ' class="logo medium" src=' + Urls.williamsonlogo + '></img>');
                                }
                                if (store.custom.brands.marcum) {
                                    html.push('<img alt=' + Resources.STORELOCATER_MARCUM + ' class="logo medium" src=' + Urls.marcumlogo + '></img>');
                                }
                                if (store.custom.brands.strikemaster) {
                                    html.push('<img alt=' + Resources.STORELOCATER_STRIKEMASTER + ' class="logo medium" src=' + Urls.strikemasterlogo + '></img>');
                                }
                                /* if(store.custom.brands.otter) {
                                    html.push('<img alt="${Resource.msg('storelocator.otter','forms',null)}" class="logo medium" src="${URLUtils.staticURL('/images/logo-otter.jpg')}"></img>');
                                } */
                                html.push('</div>');
                                html.push('<div class="storemap"><a class="button googlemap" name="' + store.map + '">' + Resources.STORELOCATER_MAP + '</a>');
                                if (store.website != '') {
                                    html.push('<br /><a target="_blank" class="button" href="' + store.website + '">' + Resources.STORELOCATER_WEBSITE + '</a>');
                                }
                                html.push('</div><div class="clear"><!-- FLOAT CLEAR --></div></div>');
                                allStoreHtml += html.join('');
                            }
                            $('div.storelocatorsearchresults').html(allStoreHtml);
                            $('#results').show();
                        } else {
                            $('#message.success').hide();
                            $('#results').hide();
                            $('#noresultserror').show();
                        }
                        if (data.Status === 400) {
                            jQuery('.email-form #message').removeClass('success-email').addClass('error-alert').html(data.Message).show();
                        } else {
                            // 200
                            $('.email-form #message').removeClass('error-alert').addClass('success-email').html('You have successfully subscribed to the Rapala Email Newsletter.').show();
                            $('.email-form input, .email-form select').val('');
                        }
                        $('.googlemap').on('click', function () {
                            window.open(this.name);
                        });
                    }
                });
            } else if ($('.service-locator-form').length > 0) {
                $.ajax({
                    type: 'POST',
                    url: serviceUrl,
                    data: $form.serialize(),
                    success: function success(data) {
                        // alert(data);
                        $('#locatorForm button').removeProp('disabled');
                        if (data.storeCount > 0) {
                            $('#storeCount').html(data.storeCount);
                            $('#message.success').show();
                            var store = {};
                            var html = [];
                            var allStoreHtml = '';
                            for (var i = 0; i < data.stores.length; i++) {
                                store = data.stores[i];
                                html = [];
                                html.push('<div class="storeresult"><div class="storeinformation">');
                                html.push('<h2 class="input-style">' + store.name + '</h2>');
                                html.push('<div>' + store.address1 + '<br/>');
                                html.push(store.city);
                                if (store.city != '' && store.state != '') {
                                    html.push(',');
                                }
                                html.push(store.state + ' ' + store.postalCode + '<br />');
                                if (store.phone != '') {
                                    html.push('<div class="storephone">' + store.phone + '</div>');
                                }
                                if (store.storeHours != '') {
                                    html.push('<div class="storeHours">' + store.storeHours + '</div>');
                                }
                                if (store.storeEvents != '') {
                                    html.push('<div class="storeEvents">' + store.storeEvents + '</div>');
                                }
                                html.push('</div></div>');
                                html.push('<div class="storemap"><div class="storedistance">' + store.distance + '</div><a class="button googlemap" name="' + store.map + '">' + Resources.STORELOCATER_MAP + '</a>');
                                if (store.website != '') {
                                    html.push('<br /><a target="_blank" class="button" href="' + store.website + '">' + Resources.STORELOCATER_WEBSITE + '</a>');
                                }
                                html.push('</div><div class="clear"><!-- FLOAT CLEAR --></div></div>');
                                allStoreHtml += html.join('');
                            }
                            $('div.storelocatorsearchresults').html(allStoreHtml);
                            $('#results').show();
                        } else {
                            $('#message.success').hide();
                            $('#results').hide();
                            $('#noresultserror').show();
                        }
                        $('.googlemap').on('click', function () {
                            window.open(this.name);
                        });
                    }
                });
            }
        });
        //$('#locatorForm').data('validator','').validate(storelocatorFormSettings);
    }
};
module.exports = storeLocator;

},{"../dialog":23,"../util":63,"../validator":64}],50:[function(require,module,exports){
'use strict';

var page = require('../page'),
    account = require('./account'),
    util = require('../util');

exports.init = function () {
    //Start JIRA PREV-412 : SG Issue: Password reset overlay displayed as a page
    account.initCartLogin();
    $('#editAddress').on('change', function () {
        page.redirect(util.appendParamToURL(Urls.wishlistAddress, 'AddressID', $(this).val()));
    });

    //add js logic to remove the , from the qty feild to pass regex expression on client side
    $('.option-quantity-desired input').on('focusout', function () {
        $(this).val($(this).val().replace(',', ''));
    });
};

},{"../page":30,"../util":63,"./account":31}],51:[function(require,module,exports){
'use strict';

var imagesLoaded = require('imagesloaded'),
    util = require('./util'),
    quickview = require('./quickview');

function initQuickViewButtons() {
    $('.product-tile .product-image').on('mouseenter', function () {
        var $qvButton = $('#quickviewbutton');
        if ($qvButton.length === 0) {
            $qvButton = $('<a id="quickviewbutton" class="quickview">' + Resources.QUICK_VIEW + '<i class="fa fa-arrows-alt"></i></a>');
        }
        var $link = $(this).find('.thumb-link');
        $qvButton.attr({
            'href': $link.attr('href'),
            'title': $link.attr('title')
        }).appendTo(this);
        $qvButton.off('click').on('click', function (e) {
            e.preventDefault();
            quickview.show({
                url: $(this).attr('href').split('#')[0], //PREV JIRA PREV-255 :PLP: On Click Quick view navigating to a wrong page when user first changes the swatches. Taking only href.
                source: 'quickview'
            });
        });
    });
}

function gridViewToggle() {
    var CookieImageValue = util.readCookie('ImageSize');
    //This is used to persist the ImageSizes overall site.
    if (CookieImageValue != null) {
        if (CookieImageValue == 'listview') {
            jQuery('.search-result-content').addClass('wide-tiles');
            jQuery('.product-image').addClass('grid');
            $('.toggle-grid i').removeClass('active');
            $('.toggle-grid .listview').addClass('active');
            $('.search-result-content.wide-tiles .product-tile .product-image img').each(function () {
                this.src = this.src.replace('sw=130&sh=92', 'sw=352&sh=251');
            });
            $('.product-img').each(function () {
                $(this).find('img').remove();
                $(this).append('<img src="' + $(this).attr('data-large-src') + '" title="' + $(this).attr('data-title') + '" alt="' + $(this).attr('data-alt') + '"></img>');
            });
        } else {
            jQuery('.search-result-content').removeClass('wide-tiles');
            jQuery('.product-image').removeClass('grid');
            $('.toggle-grid i').removeClass('active');
            $('.toggle-grid .gridview').addClass('active');
            $('.search-result-content.wide-tiles .product-tile .product-image img').each(function () {
                this.src = this.src.replace('sw=130&sh=92', 'sw=130&sh=92');
            });
            $('.product-img').each(function () {
                $(this).find('img').remove();
                $(this).append('<img src="' + $(this).attr('data-small-src') + '" title="' + $(this).attr('data-title') + '" alt="' + $(this).attr('data-alt') + '"></img>');
            });
        }

        if ($('.listview.active').length == 1) {
            $('.pt_product-search-result').attr('data-viewType', 'listview');
        } else {
            $('.pt_product-search-result').attr('data-viewType', 'gridview');
        }
    }

    $('.toggle-grid i').on('click', function () {
        var dateObj = new Date();
        dateObj.setTime(dateObj.getTime() + 60 * 60 * 1000);
        if ($(this).hasClass('gridview')) {
            document.cookie = 'ImageSize=' + 'gridview' + '; expires=' + dateObj.toUTCString() + '; path=/';
            $('.toggle-grid i').parent('.toggle-grid').removeClass('wide');
            $('.toggle-grid i').removeClass('active');
            $(this).parent('.toggle-grid').removeClass('wide');
            $(this).addClass('active');
            $('.search-result-content').removeClass('wide-tiles');
            $('.product-img').each(function () {
                $(this).find('img').remove();
                $(this).append('<img src="' + $(this).attr('data-large-src') + '" title="' + $(this).attr('data-title') + '" alt="' + $(this).attr('data-alt') + '"></img>');
            });
        } else if ($(this).hasClass('listview')) {
            document.cookie = 'ImageSize=' + 'listview' + '; expires=' + dateObj.toUTCString() + '; path=/';
            $('.toggle-grid i').parent('.toggle-grid').removeClass('wide');
            $('.toggle-grid i').removeClass('active');
            $(this).parent('.toggle-grid').addClass('wide');
            $(this).addClass('active');
            $('.search-result-content').addClass('wide-tiles');
            $('.search-result-content.wide-tiles .product-tile .product-image img').each(function () {
                this.src = this.src.replace('sw=130&sh=92', 'sw=352&sh=251');
            });
            $('.product-img').each(function () {
                $(this).find('img').remove();
                $(this).append('<img src="' + $(this).attr('data-small-src') + '" title="' + $(this).attr('data-title') + '" alt="' + $(this).attr('data-alt') + '"></img>');
            });
        }
        var currObj = $(this);
        jQuery('.toggle-grid .fa').removeClass('active');
        $(currObj).addClass('active');
        if ($('.large.active').length == 1) {
            $('.pt_product-search-result').attr('data-viewType', 'listview');
        } else {
            $('.pt_product-search-result').attr('data-viewType', 'gridview');
        }
    });
}

/**
 * @private
 * @function
 * @description Initializes events on the product-tile for the following elements:
 * - swatches
 * - thumbnails
 */
function initializeEvents() {
    initQuickViewButtons();
    gridViewToggle();
    $('.swatch-list').on('mouseleave', function () {
        // Restore current thumb image
        var $tile = $(this).closest('.product-tile'),
            $thumb = $tile.find('.product-image .thumb-link img').eq(0),
            data = $thumb.data('current');
        $thumb.attr({
            src: data.src,
            alt: data.alt,
            title: data.title
        });
        $('.search-result-content.wide-tiles .product-tile .product-image a.thumb-link.currentimg img').each(function () {
            this.src = this.src.replace('sw=130&sh=92', 'sw=352&sh=251');
        });
    });
    $('.swatch-list .swatch').on('click', function (e) {
        e.preventDefault();
        if ($(this).hasClass('selected')) {
            return;
        }

        var $tile = $(this).closest('.product-tile');
        $(this).closest('.swatch-list').find('.swatch.selected').removeClass('selected');
        $(this).addClass('selected');
        $tile.find('.thumb-link').attr('href', $(this).attr('href'));
        $tile.find('name-link').attr('href', $(this).attr('href'));

        var data = $(this).children('img').filter(':first').data('thumb');
        var $thumb = $tile.find('.product-image .thumb-link img').eq(0);
        var currentAttrs = {
            src: data.src,
            alt: data.alt,
            title: data.title
        };
        $thumb.closest('.thumb-link').addClass('currentimg');
        $thumb.attr(currentAttrs);
        $thumb.data('current', currentAttrs);

        /*Start JIRA PREV-466 : Product images are not updating in the compare section when the color swatches are changed in PLP.*/
        var pid = $(this).closest('.product-tile').attr('data-itemid');
        $('.compare-items-panel .compare-item').each(function () {
            var compareid = $(this).attr('data-itemid');
            if (pid === compareid) {
                var $compare = $(this).find('.compare-item-image').eq(0);
                $compare.attr(currentAttrs);
                $compare.data('current', currentAttrs);
            }
        });
        /*End JIRA PREV-466*/
    }).bind('mouseenter click', function () {
        // get current thumb details
        var $tile = $(this).closest('.product-tile'),
            $thumb = $tile.find('.product-image .thumb-link img').eq(0),
            data = $(this).children('img').filter(':first').data('thumb'),
            current = $thumb.data('current');

        // If this is the first time, then record the current img
        if (!current) {
            $thumb.data('current', {
                src: $thumb[0].src,
                alt: $thumb[0].alt,
                title: $thumb[0].title
            });
        }

        // Set the tile image to the values provided on the swatch data attributes
        $thumb.attr({
            src: data.src,
            alt: data.alt,
            title: data.title
        });
        $('.search-result-content.wide-tiles .product-tile .product-image a.thumb-link.currentimg img').each(function () {
            this.src = this.src.replace('sw=130&sh=92', 'sw=352&sh=251');
        });
    });
}

exports.init = function () {
    var $tiles = $('.tiles-container .product-tile');
    if ($tiles.length === 0) {
        return;
    }
    imagesLoaded('.tiles-container').on('done', function () {
        $tiles.syncHeight().each(function (idx) {
            $(this).data('idx', idx);
        });
    });
    initializeEvents();
};

},{"./quickview":54,"./util":63,"imagesloaded":4}],52:[function(require,module,exports){
'use strict';

var $loader;

/**
 * @function
 * @description Shows an AJAX-loader on top of a given container
 * @param {Element} container The Element on top of which the AJAX-Loader will be shown
 */
var show = function show(container) {
    var target = !container || $(container).length === 0 ? $('body') : $(container);
    $loader = $loader || $('.loader');

    if ($loader.length === 0) {
        $loader = $('<div/>').addClass('loader').append($('<div/>').addClass('loader-indicator'), $('<div/>').addClass('loader-bg'));
    }
    return $loader.appendTo(target).show();
};
/**
 * @function
 * @description Hides an AJAX-loader
 */
var hide = function hide() {
    if ($loader) {
        $loader.hide();
    }
};

exports.show = show;
exports.hide = hide;

},{}],53:[function(require,module,exports){
'use strict';

var quickview = require('./quickview');

function initQuickviewButtonAsset() {
    $('.product-buy-content-asset').on('click', function (e) {
        e.preventDefault();
        quickview.show({
            url: $(this).attr('href').split('#')[0],
            source: 'quickview'
        });
        if (window.innerWidth < 1024) {
            $('#QuickViewDialog').dialog('widget').position({
                my: 'top+20',
                at: 'top',
                of: window
            });
        }
    });
}
exports.init = function () {
    var $quickviewAsset = $('.product-buy-content-asset-init');
    if ($quickviewAsset.length === 0) {
        return;
    }
    initQuickviewButtonAsset();
};

},{"./quickview":54}],54:[function(require,module,exports){
'use strict';

var dialog = require('./dialog'),
    product = require('./pages/product'),
    progress = require('./progress'),
    util = require('./util'),
    _ = require('lodash');

var makeUrl = function makeUrl(url, source, productListID) {
    if (source) {
        url = util.appendParamToURL(url, 'source', source);
    }
    if (productListID) {
        url = util.appendParamToURL(url, 'productlistid', productListID);
    }
    return url;
};

var removeParam = function removeParam(url) {
    if (url.indexOf('?') !== -1) {
        return url.substring(0, url.indexOf('?'));
    } else {
        return url;
    }
};

var quickview = {
    init: function init() {
        if (!this.exists()) {
            this.$container = $('<div/>').attr('id', 'QuickViewDialog').appendTo(document.body);
        }
        this.productLinks = $('#search-result-items .thumb-link').map(function (index, thumbLink) {
            return $(thumbLink).attr('href');
        });
    },

    setup: function setup(qvUrl) {
        var $btnNext = $('.quickview-next'),
            $btnPrev = $('.quickview-prev');

        product.init();

        this.productLinkIndex = _(this.productLinks).findIndex(function (url) {
            return removeParam(url) === removeParam(qvUrl);
        });

        // hide the buttons on the compare page or when there are no other products
        if (this.productLinks.length <= 1 || $('.compareremovecell').length > 0) {
            $btnNext.hide();
            $btnPrev.hide();
            return;
        } else {
            /*  Start JIRA PREV-50: Next and Previous links will not be displayed on PDP if user navigate from Quick View.
              Added current URL parameters and index to viewfulldetails link
            */
            var a = $('#view-full-details');
            var wl = window.location;
            var qsParams = wl.search.length > 1 ? util.getQueryStringParams(wl.search.substr(1)) : {};
            var hashParams = wl.hash.length > 1 ? util.getQueryStringParams(wl.hash.substr(1)) : {};
            var params = $.extend(hashParams, qsParams);
            params.start = parseInt(this.productLinkIndex, 10) + 1;
            var tile = $('#search-result-items .product-tile').first();
            if (!params.cgid && tile.data('cgid') !== null && tile.data('cgid') !== '') {
                params.cgid = tile.data('cgid');
            }
            a.attr('href', a.attr('href') + '#' + $.param(params));
            /*End JIRA PREV-50*/
        }

        if (this.productLinkIndex === this.productLinks.length - 1) {
            $btnNext.attr('disabled', 'disabled');
        }
        if (this.productLinkIndex === 0) {
            $btnPrev.attr('disabled', 'disabled');
        }

        $btnNext.on('click', function (e) {
            e.preventDefault();
            this.navigateQuickview(1);
        }.bind(this));
        $btnPrev.on('click', function (e) {
            e.preventDefault();
            this.navigateQuickview(-1);
        }.bind(this));
    },

    /**
     * @param {Number} step - How many products away from current product to navigate to. Negative number means navigate backward
     */
    navigateQuickview: function navigateQuickview(step) {
        // default step to 0
        this.productLinkIndex += step ? step : 0;
        var url = makeUrl(this.productLinks[this.productLinkIndex], 'quickview');
        dialog.replace({
            url: url,
            callback: this.setup.bind(this, url)
        });
    },

    /**
     * @description show quick view dialog
     * @param {Object} options
     * @param {String} options.url - url of the product details
     * @param {String} options.source - source of the dialog to be appended to URL
     * @param {String} options.productlistid - to be appended to URL
     * @param {Function} options.callback - callback once the dialog is opened
     */
    show: function show(options) {
        var url;
        if (!this.exists()) {
            this.init();
        }
        url = makeUrl(options.url, options.source, options.productlistid);
        $('#QuickViewDialog').empty();
        var quickViewDialog = dialog.create({
            target: this.$container,
            options: {
                height: 530,
                width: 760,
                dialogClass: 'quickview',
                title: Resources.QUICK_VIEW_POPUP
            }
        });
        quickViewDialog.dialog('open');
        progress.show('#QuickViewDialog');
        $.ajax({
            url: url,
            success: function success(data) {
                $(quickViewDialog).append(data);
                product.init();
                progress.hide();
            }
        });
        //PREVAIL-Added for GA integration
        //GAcommented
        if (isEventTrackingEnabled && isGoogleAnalyticsEnabled) {
            googleAnalyticsEvents.quickView();
        }
    },
    exists: function exists() {
        return this.$container && this.$container.length > 0;
    },
    close: function close() {
        jQuery('#QuickViewDialog').dialog('close');
    }
};

module.exports = quickview;

},{"./dialog":23,"./pages/product":43,"./progress":52,"./util":63,"lodash":5}],55:[function(require,module,exports){
'use strict';

/**
 * @private
 * @function
 * @description Binds event to the place holder (.blur)
 */

function initializeEvents() {
    /* Start JIRA PREV-53:No search result page: When the search text field is
      empty,on clicking of "GO" button user is navigating to Home page.
      Replaced #q with 'input[name=q]'*/
    $('input[name=q]').focus(function () {
        var input = $(this);
        if (input.val() === input.attr('value')) {
            input.val('');
        }
    }).blur(function () {
        var input = $(this);
        /* Start JIRA PREV-53:No search result page: When the search text field is empty,on clicking of "GO"
             button user is navigating to Home page.Added $.trim(input.val()) === ""*/
        if ($.trim(input.val()) === '' || input.val() === '' || input.val() === input.attr('value')) {
            input.val(input.attr('value'));
        }
    }).blur();

    /* Start JIRA-PREV-54:General Error page: When the new search field empty, on clicking of "GO" user is navigating to Home page.
         Added condition for disabling search button in header and No search results page and error pages.
         Start JIRA-PREV-53:No search result page: When the search text field is empty,on clicking of "GO" button user is navigating to Home page.*/
    $('input[name=q]').closest('form').submit(function (e) {
        var input = $(this).find('input[name=q]');
        if ($.trim(input.val()) === input.attr('value') || $.trim(input.val()) === '') {
            e.preventDefault();
            return false;
        }
    });

    if ($('.pt_product-search-noresult .nohits .noresult-banner').length > 0) {
        $('.pt_product-search-noresult .nohits').css('height', 'auto');
    }
    /*End JIRA PREV-53,PREV-54 */
}

exports.init = initializeEvents;

},{}],56:[function(require,module,exports){
'use strict';

var util = require('./util');

var currentQuery = null,
    lastQuery = null,
    runningQuery = null,
    listTotal = -1,
    listCurrent = -1,
    delay = 30,
    $resultsContainer;

/**
 * @function
 * @description Handles keyboard's arrow keys
 * @param keyCode Code of an arrow key to be handled
 */
function handleArrowKeys(keyCode) {
    switch (keyCode) {
        case 38:
            // keyUp
            listCurrent = listCurrent <= 0 ? listTotal - 1 : listCurrent - 1;
            break;
        case 40:
            // keyDown
            listCurrent = listCurrent >= listTotal - 1 ? 0 : listCurrent + 1;
            break;
        default:
            // reset
            listCurrent = -1;
            return false;
    }

    $resultsContainer.children().removeClass('selected').eq(listCurrent).addClass('selected');
    $('input[name="q"]').val($resultsContainer.find('.selected .suggestionterm').first().text());
    return true;
}

var searchsuggest = {
    /**
     * @function
     * @description Configures parameters and required object instances
     */
    init: function init(container, defaultValue) {
        var $searchContainer = $(container);
        var $searchForm = $searchContainer.find('form[name="simpleSearch"]');
        var $searchField = $searchForm.find('input[name="q"]');

        // disable browser auto complete
        $searchField.attr('autocomplete', 'off');

        // on focus listener (clear default value)
        $searchField.focus(function () {
            if (!$resultsContainer) {
                // create results container if needed
                //$resultsContainer = $('<div/>').attr('id', 'search-suggestions').appendTo($searchContainer);
                $resultsContainer = $('<div/>').attr('class', 'suggestions').attr('id', 'suggestions').appendTo($searchContainer);
            }
            if ($searchField.val() === defaultValue) {
                $searchField.val('');
            }
        });
        $searchField.blur(function () {
            var temp = $searchField.val();
            if ($.trim(temp) == '') {
                $searchField.val('Search Entire Site...');
            }
        });
        $(document).on('click', function (e) {
            if (!$searchContainer.is(e.target)) {
                setTimeout(this.clearResults, 200);
            }
        }.bind(this));
        // on submit we do not submit the form, but change the window location
        // in order to avoid https to http warnings in the browser
        // only if it's not the default value and it's not empty
        $searchForm.submit(function () {
            var searchUrl = $searchForm.attr('action');
            var sessionId = jQuery('#footerhiddenid').text();
            var k = '';
            if (sessionId == 'rapala') {
                k = searchUrl + '?id=1';
            } else if (sessionId == 'sufix') {
                k = searchUrl + '?id=2';
            } else if (sessionId == 'triggerx') {
                k = searchUrl + '?id=3';
            } else if (sessionId == 'storm') {
                k = searchUrl + '?id=4';
            } else if (sessionId == 'luhrjensen') {
                k = searchUrl + '?id=5';
            } else if (sessionId == 'vmc') {
                k = searchUrl + '?id=6';
            } else if (sessionId == 'terminator') {
                k = searchUrl + '?id=7';
            } else if (sessionId == 'bluefox') {
                k = searchUrl + '?id=8';
            } else if (sessionId == 'williamson') {
                k = searchUrl + '?id=9';
            } else if (sessionId == 'marcum') {
                k = searchUrl + '?id=10';
            } else if (sessionId == 'strikemaster') {
                k = searchUrl + '?id=11';
            } else if (sessionId == 'otter') {
                k = searchUrl + '?id=21';
            }
            var searchTerm = $searchField.val();
            if (searchTerm != defaultValue && searchTerm != '') {
                window.location = util.appendParamToURL(k, 'q', searchTerm).replace('https', 'http');
            }
            return false;
        });
        // on key up listener
        $searchField.keyup(function (e) {

            // get keyCode (window.event is for IE)
            var keyCode = e.keyCode || window.event.keyCode;

            // check and treat up and down arrows
            if (handleArrowKeys(keyCode)) {
                return;
            }
            // check for an ENTER or ESC
            if (keyCode === 13 || keyCode === 27) {
                this.clearResults();
                return;
            }

            currentQuery = $searchField.val().trim();

            // no query currently running, init an update
            if (!runningQuery) {
                runningQuery = currentQuery;
                setTimeout(this.suggest.bind(this), delay);
            }
        }.bind(this));
    },

    /**
     * @function
     * @description trigger suggest action
     */
    suggest: function suggest() {
        // check whether query to execute (runningQuery) is still up to date and had not changed in the meanwhile
        // (we had a little delay)
        if (runningQuery !== currentQuery) {
            // update running query to the most recent search phrase
            runningQuery = currentQuery;
        }

        // if it's empty clear the results box and return
        if (runningQuery.length === 0) {
            this.clearResults();
            runningQuery = null;
            return;
        }

        // if the current search phrase is the same as for the last suggestion call, just return
        if (lastQuery === runningQuery) {
            runningQuery = null;
            return;
        }

        // build the request url
        var reqUrl = util.appendParamToURL(Urls.searchsuggest, 'q', runningQuery);

        // execute server call
        $.get(reqUrl, function (data) {
            var suggestionHTML = data,
                ansLength = suggestionHTML.trim().length;

            // if there are results populate the results div
            if (ansLength === 0) {
                this.clearResults();
            } else {
                // update the results div
                $resultsContainer.html(suggestionHTML).fadeIn(200);
            }

            // record the query that has been executed
            lastQuery = runningQuery;
            // reset currently running query
            runningQuery = null;

            // check for another required update (if current search phrase is different from just executed call)
            if (currentQuery !== lastQuery) {
                // ... and execute immediately if search has changed while this server call was in transit
                runningQuery = currentQuery;
                setTimeout(this.suggest.bind(this), delay);
            }
            this.hideLeftPanel();
        }.bind(this));
    },
    /**
     * @function
     * @description
     */
    clearResults: function clearResults() {
        if (!$resultsContainer) {
            return;
        }
        $resultsContainer.fadeOut(200, function () {
            $resultsContainer.empty();
        });
    },
    /**
     * @function
     * @description
     */
    hideLeftPanel: function hideLeftPanel() {
        //hide left panel if there is only a matching suggested custom phrase
        if ($('.search-suggestion-left-panel-hit').length === 1 && $('.search-phrase-suggestion a').text().replace(/(^[\s]+|[\s]+$)/g, '').toUpperCase() === $('.search-suggestion-left-panel-hit a').text().toUpperCase()) {
            $('.search-suggestion-left-panel').css('display', 'none');
            $('.search-suggestion-wrapper-full').addClass('search-suggestion-wrapper');
            $('.search-suggestion-wrapper').removeClass('search-suggestion-wrapper-full');
        }
    }
};

module.exports = searchsuggest;

},{"./util":63}],57:[function(require,module,exports){
'use strict';

var inventory = require('./');

var cartInventory = {
    setSelectedStore: function setSelectedStore(storeId) {
        var $selectedStore = $('.store-tile.' + storeId),
            $lineItem = $('.cart-row[data-uuid="' + this.uuid + '"]'),
            storeAddress = $selectedStore.find('.store-address').html(),
            storeStatus = $selectedStore.find('.store-status').data('status'),
            storeStatusText = $selectedStore.find('.store-status').text();
        this.selectedStore = storeId;

        $lineItem.find('.instore-delivery .selected-store-address').data('storeId', storeId).attr('data-store-id', storeId).html(storeAddress);
        $lineItem.find('.instore-delivery .selected-store-availability').data('status', storeStatus).attr('data-status', storeStatus).text(storeStatusText);
        $lineItem.find('.instore-delivery .delivery-option').removeAttr('disabled').trigger('click');
    },
    cartSelectStore: function cartSelectStore(selectedStore) {
        var self = this;
        inventory.getStoresInventory(this.uuid).then(function (stores) {
            inventory.selectStoreDialog({
                stores: stores,
                selectedStoreId: selectedStore,
                selectedStoreText: Resources.SELECTED_STORE,
                continueCallback: function continueCallback() {},
                selectStoreCallback: self.setSelectedStore.bind(self)
            });
        }).done();
    },
    setDeliveryOption: function setDeliveryOption(value, storeId) {
        // set loading state
        $('.item-delivery-options').addClass('loading').children().hide();

        var data = {
            plid: this.uuid,
            storepickup: value === 'store' ? true : false
        };
        if (value === 'store') {
            data.storepickup = true;
            data.storeid = storeId;
        } else {
            data.storepickup = false;
        }
        $.ajax({
            url: Urls.setStorePickup,
            data: data,
            success: function success() {
                // remove loading state
                $('.item-delivery-options').removeClass('loading').children().show();
            }
        });
    },
    init: function init() {
        var self = this;
        $('.item-delivery-options .set-preferred-store').on('click', function (e) {
            e.preventDefault();
            self.uuid = $(this).data('uuid');
            var selectedStore = $(this).closest('.instore-delivery').find('.selected-store-address').data('storeId');
            if (!User.zip) {
                inventory.zipPrompt(function () {
                    self.cartSelectStore(selectedStore);
                });
            } else {
                self.cartSelectStore(selectedStore);
            }
        });
        $('.item-delivery-options .delivery-option').on('click', function () {
            // reset the uuid
            var selectedStore = $(this).closest('.instore-delivery').find('.selected-store-address').data('storeId');
            self.uuid = $(this).closest('.cart-row').data('uuid');
            self.setDeliveryOption($(this).val(), selectedStore);
        });
    }
};

module.exports = cartInventory;

},{"./":58}],58:[function(require,module,exports){
'use strict';

var _ = require('lodash'),
    dialog = require('../dialog'),
    TPromise = require('promise'),
    util = require('../util');

var newLine = '\n';
var storeTemplate = function storeTemplate(store, selectedStoreId, selectedStoreText) {
    return ['<li class="store-tile ' + store.storeId + (store.storeId === selectedStoreId ? ' selected' : '') + '">', '	<p class="store-address">', '		' + store.address1 + '<br/>', '		' + store.city + ', ' + store.stateCode + ' ' + store.postalCode, '	</p>', '	<p class="store-status" data-status="' + store.statusclass + '">' + store.status + '</p>', '	<button class="select-store-button" data-store-id="' + store.storeId + '"' + (store.statusclass !== 'store-in-stock' ? 'disabled="disabled"' : '') + '>', '		' + (store.storeId === selectedStoreId ? selectedStoreText : Resources.SELECT_STORE), '	</button>', '</li>'].join(newLine);
};

var storeListTemplate = function storeListTemplate(stores, selectedStoreId, selectedStoreText) {
    if (stores && stores.length) {
        return ['<div class="store-list-container">', '<ul class="store-list">', _.map(stores, function (store) {
            return storeTemplate(store, selectedStoreId, selectedStoreText);
        }).join(newLine), '</ul>', '</div>', '<div class="store-list-pagination">', '</div>'].join(newLine);
    } else {
        return '<div class="no-results">' + Resources.INVALID_ZIP + '</div>';
    }
};

var zipPromptTemplate = function zipPromptTemplate() {
    return ['<div id="preferred-store-panel">', '	<input type="text" id="user-zip" placeholder="' + Resources.ENTER_ZIP + '" name="zipCode"/>', '</div>'].join(newLine);
};

/**
 * @description test whether zipcode is valid for either US or Canada
 * @return {Boolean} true if the zipcode is valid for either country, false if it's invalid for both
 **/
var validateZipCode = function validateZipCode(zipCode) {
    var regexes = {
        canada: /^[ABCEGHJKLMNPRSTVXY]\d[ABCEGHJKLMNPRSTVWXYZ]( )?\d[ABCEGHJKLMNPRSTVWXYZ]\d$/i,
        usa: /^\d{5}(-\d{4})?$/
    },
        valid = false;
    if (!zipCode) {
        return;
    }
    _.each(regexes, function (re) {
        var regexp = new RegExp(re);
        valid = regexp.test(zipCode);
    });
    return valid;
};

var storeinventory = {
    zipPrompt: function zipPrompt(callback) {
        var self = this;
        dialog.open({
            html: zipPromptTemplate(),
            options: {
                title: Resources.STORE_NEAR_YOU,
                width: 500,
                buttons: [{
                    text: Resources.SEARCH,
                    click: function click() {
                        var zipCode = $('#user-zip').val();
                        if (validateZipCode(zipCode)) {
                            self.setUserZip(zipCode);
                            if (callback) {
                                callback(zipCode);
                            }
                        }
                    }
                }],
                open: function open() {
                    $('#user-zip').on('keypress', function (e) {
                        if (e.which === 13) {
                            // trigger the search button
                            $('.ui-dialog-buttonset .ui-button').trigger('click');
                        }
                    });
                }
            }
        });
    },
    getStoresInventory: function getStoresInventory(pid) {
        return TPromise.resolve($.ajax({
            url: util.appendParamsToUrl(Urls.storesInventory, {
                pid: pid,
                zipCode: User.zip
            }),
            dataType: 'json'
        }));
    },
    /**
     * @description open the dialog to select store
     * @param {Array} options.stores
     * @param {String} options.selectedStoreId
     * @param {String} options.selectedStoreText
     * @param {Function} options.continueCallback
     * @param {Function} options.selectStoreCallback
     **/
    selectStoreDialog: function selectStoreDialog(options) {
        var self = this,
            stores = options.stores,
            selectedStoreId = options.selectedStoreId,
            selectedStoreText = options.selectedStoreText,
            storeList = storeListTemplate(stores, selectedStoreId, selectedStoreText);
        dialog.open({
            html: storeList,
            options: {
                title: Resources.SELECT_STORE + ' - ' + User.zip,
                buttons: [{
                    text: Resources.CHANGE_LOCATION,
                    click: function () {
                        self.setUserZip(null);
                        // trigger the event to start the process all over again
                        $('.set-preferred-store').trigger('click');
                    }.bind(this)
                }, {
                    text: Resources.CONTINUE,
                    click: function click() {
                        if (options.continueCallback) {
                            options.continueCallback(stores);
                        }
                        dialog.close();
                    }
                }],
                open: function open() {
                    $('.select-store-button').on('click', function (e) {
                        e.preventDefault();
                        var storeId = $(this).data('storeId');
                        // if the store is already selected, don't select again
                        if (storeId === selectedStoreId) {
                            return;
                        }
                        $('.store-list .store-tile.selected').removeClass('selected').find('.select-store-button').text(Resources.SELECT_STORE);
                        $(this).text(selectedStoreText).closest('.store-tile').addClass('selected');
                        if (options.selectStoreCallback) {
                            options.selectStoreCallback(storeId);
                        }
                    });
                }
            }
        });
    },
    setUserZip: function setUserZip(zip) {
        User.zip = zip;
        $.ajax({
            type: 'POST',
            url: Urls.setZipCode,
            data: {
                zipCode: zip
            }
        });
    },
    shippingLoad: function shippingLoad() {
        var $checkoutForm = $('.address');
        $checkoutForm.off('click');
        $checkoutForm.on('click', 'input[name$="_shippingAddress_isGift"]', function () {
            $(this).parent().siblings('.gift-message-text').toggleClass('hidden', $('input[name$="_shippingAddress_isGift"]:checked').val());
        });
    }
};

module.exports = storeinventory;

},{"../dialog":23,"../util":63,"lodash":5,"promise":6}],59:[function(require,module,exports){
'use strict';

/**
 * Events are divided up by name space so only the
 * events that are needed are initialized.
 */

var events = {
    account: function account() {},
    cart: function cart() {},
    checkout: function checkout() {
        $('[name$=_deleteProduct]').on('click', function () {
            removeFromCart($.parseJSON($(this).attr('data-gtmdata')), 1);
        });
    },
    compare: function compare() {},
    product: function product() {
        $('#add-to-cart').on('click', function () {
            addToCart($.parseJSON($(this).attr('data-gtmdata')), $(this).closest('div').find('[name=Quantity]').val());
        });
    },
    search: function search() {},
    storefront: function storefront() {},
    wishlist: function wishlist() {
        $('[name$=_addToCart]').on('click', function () {
            addToCart($.parseJSON($(this).attr('data-gtmdata')), $(this).closest('div').find('[name=Quantity]').val());
        });
    },
    // events that should happen on every page
    all: function all() {
        $('.name-link').on('click', function () {
            productClick($.parseJSON($(this).attr('data-gtmdata')));
        });
        $('.thumb-link').on('click', function () {
            productClick($.parseJSON($(this).attr('data-gtmdata')));
        });
        $('.has-sub-menu').on('click', function () {
            pushEvent('trackEvent', 'User Action', 'Header Click', $(this).html());
        });
        $('.primary-logo').on('click', function () {
            pushEvent('trackEvent', 'User Action', 'Header Click', 'Home Link');
        });
    }
};

/**
 * @param {Object} productObject The product data
 * @description gets the data for a product click
 */
function productClick(productObject) {
    var obj = {
        'event': 'productClick',
        'ecommerce': {
            'click': {
                'actionField': { 'list': 'SearchResults' },
                'products': []
            }
        }
    };
    obj.ecommerce.click.products.push(productObject);
    dataLayer.push(obj);
}

/**
 * @description Click event for add product to cart
 * @param {Object} productObject The product data
 * @param {String} quantity
 */
function addToCart(productObject, quantity) {
    var quantityObj = { 'quantity': quantity },
        obj = {
        'event': 'addToCart',
        'ecommerce': {
            'add': {
                'products': []
            }
        }
    };
    obj.ecommerce.add.products.push($.extend(productObject, quantityObj));
    dataLayer.push(obj);
}

/**
 *
 * @param {Object} productObject
 * @param {String|Number} quantity
 */
function removeFromCart(productObject, quantity) {
    var quantityObj = { 'quantity': quantity },
        obj = {
        'event': 'removeFromCart',
        'ecommerce': {
            'remove': {
                'products': []
            }
        }
    };
    obj.ecommerce.add.products.push($.extend(productObject, quantityObj));
    dataLayer.push(obj);
}

/**
 * @description Convenience method for creating a click event.
 * @param {String} event
 * @param {String} eventCategory
 * @param {String} eventAction
 * @param {String} eventLabel
 */
function pushEvent(event, eventCategory, eventAction, eventLabel) {
    dataLayer.push({
        'event': event,
        'eventCategory': eventCategory,
        'eventAction': eventAction,
        'eventLabel': eventLabel
    });
}

/**
 * @description Initialize the tag manager functionality
 * @param {String} nameSpace The current name space
 */
exports.init = function (nameSpace) {
    if (nameSpace && events[nameSpace]) {
        events[nameSpace]();
    }
    events.all();
};

},{}],60:[function(require,module,exports){
'use strict';

/**
 * Checks the TLS and displays a warning if appropriate
 * @function getUserAgent Checks the TLS and displays a warning if appropriate
 **/

function getUserAgent() {

    var ua = navigator.userAgent,
        tem,
        M = ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i) || [];
    if (/trident/i.test(M[1])) {
        tem = /\brv[ :]+(\d+)/g.exec(ua) || [];
        return { name: 'IE', version: tem[1] || '' };
    }
    if (M[1] === 'Chrome') {
        tem = ua.match(/\bOPR\/(\d+)/);
        if (tem != null) {
            return { name: 'Opera', version: tem[1] };
        }
    }
    M = M[2] ? [M[1], M[2]] : [navigator.appName, navigator.appVersion, '-?'];
    if ((tem = ua.match(/version\/(\d+)/i)) != null) {
        M.splice(1, 1, tem[1]);
    }
    return {
        name: M[0],
        version: M[1]
    };
}

/**
 * Export the getUserAgent function
 */

exports.getUserAgent = getUserAgent;

},{}],61:[function(require,module,exports){
'use strict';

/**
 * @function
 * @description Initializes the tooltip-content and layout
 */

var settings = {
    items: '.tooltip, .Custom-tooltip',
    delay: 0,
    track: false,
    showURL: false,
    extraClass: 'tooltipshadow',
    top: 5,
    left: -150
};
exports.init = function () {
    $(document).tooltip($.extend({}, settings, {
        content: function content() {
            return $(this).find('.tooltip-content , .tooltip-body').html();
        }
    }));
    /*$('.Custom-tooltip').tooltipster({
            content: jQuery(this).find('.tooltipcontainer').html(),
            contentAsHTML: true,
            maxWidth: 300,
            touchDevices: true,
            trigger: 'click'
    }); */
    $('.share-link').on('click', function (e) {
        e.preventDefault();
        var target = $(this).data('target');
        if (!target) {
            return;
        }
        $(target).toggleClass('active');
    });

    /*JIRA PREV-282 : DEV-32: SG issue- 'What is this' link in checkout billing page should not be clickable. Added the folloiwng block.*/
    $('a.tooltip').click(function (e) {
        e.preventDefault();
    });
};

},{}],62:[function(require,module,exports){
'use strict';

var util = require('./util');
/*function charcount($this){
	var characterLimit = parseInt($this.data("character-limit"));
	var charRemains = characterLimit - $this.val().trim().length;
	var charCountHtml = 'Characters Remaining ' + charRemains
	if($this.hasClass("vip-textarea")){
		if ($this.next('div.char-count').length === 0) {
			charCountContainer = $('<div class="char-count"/>').insertAfter($this);
		}
		$this.next('div.char-count').html(charCountHtml);
	}else {
		if ($this.prev('div.char-count').length === 0) {
			charCountContainer = $('<div class="char-count"/>').insertBefore($this);
		}
		$this.prev('div.char-count').html(charCountHtml);
	}
}*/
var uievents = {
    customFields: function customFields() {
        var $con = $('body');
        $con.find('.custom-checkbox').each(function () {
            if (jQuery(this).find('input[type="checkbox"]').is(':checked')) {
                jQuery(this).find('.custom-link').addClass('active');
            }
        });

        $con.find('.custom-checkbox .custom-link').off('click').on('click', function () {
            var $customcheck = $(this).closest('.custom-checkbox');
            $(this).removeClass('error');
            if ($customcheck.find('input[type="checkbox"]').is(':checked')) {
                $customcheck.find('input[type="checkbox"]').click();
                $customcheck.find('.custom-link').removeClass('active');
            } else {
                $customcheck.find('input[type="checkbox"]').click();
                $customcheck.find('.custom-link').addClass('active');
            }
        });
        /*if($('body').hasClass('rapala_device')){
            $con.find(".ui-dialog #dialogcontainer123 #VipinsiderForm .select-style .selectbox").off('click').on("click",function(){
                $(this).closest(".field-wrapper").addClass('expanded');
                }).on("blur change", function(){
                    $(this).closest(".field-wrapper").removeClass('expanded');
                });
        }*/

        // custom select implementation in VIP insider
        /*if(!$('body').hasClass('rapala_device')){
            $con.find(".customized-select").find("select").each(function(){
                if($(this).attr('disabled')){
                    $(this).selectbox('disable');
                }
             else{
                 $(this).selectbox();
             }
                $('.sbOptions li:last').addClass('last');
            }).focus(function(){
                $(this).next('.sbHolder').trigger('focus');
            });
          }
        */
        $con.find('.custom-checkbox input[type="checkbox"]').off('change').on('change', function () {
            $(this).closest('.custom-checkbox').find('.custom-link').removeClass('error');
            var $form = $('.address');
            if ($(this).is(':checked')) {
                $(this).closest('.custom-checkbox').find('.custom-link').addClass('active');
                if ($(this).is('[name$=_sameasshippingaddress]')) {
                    var selectedAddress = $(this).closest('.custom-checkbox').data('address');
                    $('.selected-shipping-address').empty();
                    $('.selected-shipping-address').append(selectedAddress.firstName + ' ' + selectedAddress.lastName + '<br/>' + selectedAddress.address1 + ' ' + selectedAddress.address2 + '<br/>' + selectedAddress.city + ' ' + selectedAddress.stateCode + ' ' + selectedAddress.postalCode + '<br/>' + selectedAddress.phone);
                    util.fillAddressFields(selectedAddress, $form);
                    $('.edit-address-field').addClass('hide');
                    $('.selected-shipping-address, .new-address-field').removeClass('hide');
                    $('.shipping-address-field-section').addClass('hide');
                    uievents.customFields();
                    uievents.synccheckoutH();
                }
            } else {
                $(this).closest('.custom-checkbox').find('.custom-link').removeClass('active');
                if ($(this).is('[name$=_sameasshippingaddress]')) {
                    $('.addressoptions-addToAddressBook,.addressoptions-makedefault ').removeClass('hide');
                    $('input[name$=\'shippingAddress_selectedaddress\']').val('');
                    $('.selected-shipping-address').empty();
                    $('input[name$=\'_addressid\']').val('');
                    $('input[name$=\'_addressFields_firstName\']').val('');
                    $('input[name$=\'_addressFields_lastName\']').val('');
                    $('input[name$=\'_addressFields_address1\']').val('');
                    $('input[name$=\'_addressFields_address2\']').val('');
                    $('input[name$=\'_addressFields_city\']').val('');
                    $('input[name$=\'_addressFields_postal\']').val('');
                    $('input[name$=\'_addressFields_phone\']').val('');
                    uievents.changeFormSelection(jQuery('select[name$=\'_addressFields_states_state\']')[0], '');
                    uievents.changeFormSelection(jQuery('select.address-select')[0], '');
                    $('.shipping-address-field-section').removeClass('hide');
                    $('.selected-shipping-address, .new-address-field, .edit-address-field').addClass('hide');
                    $('input[name$=\'_addressFields_phone\']').closest('div.phone').find('span.errorclient').remove();
                    $('input[name$=\'_addressFields_postal\']').closest('div.zip').find('span.errorclient').remove();
                    $('.addressform .form-row.custom-select').removeClass('customselect-error');
                    $('.custom-select').each(function () {
                        var selectVal = $(this).find(':selected').text();
                        $(this).find('.selectorOut').text(selectVal);
                    });
                    $('a.clearbutton').hide();
                    $('.shipping-address-field-section .form-row').find('input').removeClass('errorclient');
                    uievents.customFields();
                    uievents.synccheckoutH();
                }
            }
        });

        $con.find('.custom-select').each(function () {
            $(this).find('select').removeAttr('style');
            var selWidth = $(this).find('select').width();
            if ($(this).find('select').hasClass('input-longer')) {
                selWidth = selWidth - 17;
            }
            $(this).find('select').css({
                'width': selWidth + 20,
                'left': '0px',
                'line-height': '28px',
                'z-index': '99',
                'position': 'relative',
                'float': 'left',
                'padding': '0px'
            });
            $(this).find('.field-wrapper').css({
                'background-position': selWidth,
                'width': selWidth + 20,
                'padding': '0px'
            });
            if ($('.creditCard').length > 0) {
                $(this).css({
                    'background-position': selWidth,
                    'width': selWidth + 15,
                    'padding': '0px'
                });
            }

            if ($(this).find('.selectorOut').length == 0) {
                $(this).find('select').after('<div class=\'selectorOut\' style=\'position:absolute;top:0px;z-index:1;padding:0 20px 0 10px;\'></div>');
            }
            if ($(this).find('.selectorError').length == 0 && !$(this).closest('month') && !$(this).closest('year')) {
                $(this).closest('.formfield .field-wrapper').append('<div class=\'selectorError error\'></div>');
            }
            $(this).find('.selectorOut').text('').text($(this).find(':selected').text());
        }).change(function () {
            var str = '';
            str = $(this).find(':selected').text();
            $(this).find('.selectorOut').text('').text(str);
            if ($(this).hasClass('addresslist')) {
                if ($(this).find('.selectorOut').outerWidth() >= 298) {
                    str = str.substr(0, 34) + '...';
                    $(this).find('.selectorOut').text('').text(str);
                }
            }
        });

        $con.find('.custom-select select').bind('blur change', function () {
            if ($(this).hasClass('valid') || $(this).val().length > 0) {
                $(this).closest('.custom-select').removeClass('customselect-error');
                $(this).removeClass('errorclient').addClass('valid');
                //$(this).find("option[value="+$(this).val()+"]").attr("selected","selected");
                if (jQuery(this).closest('.formfield').hasClass('state')) {
                    $('.state-blk .stateerror.error').hide();
                }
            } else {
                $(this).closest('.custom-select').addClass('customselect-error');
                if (jQuery(this).closest('.formfield').hasClass('state') && !jQuery(this).closest('.custom-select').hasClass('blured')) {
                    jQuery('.state-blk .stateerror.error').show();
                }
            }
            if (jQuery(this).hasClass('yearselect') || jQuery(this).hasClass('monthselect')) {
                if (jQuery('.yearselect').valid() == 1 && jQuery('.monthselect').valid() == 1) {
                    jQuery('.expirationdatevalid.error').hide();
                    jQuery('.expirationdate.error').hide();
                }
            }
        });
    },
    //changes the selection of the given form select to the given value
    changeFormSelection: function changeFormSelection(selectElem, selectedValue) {
        if (!selectElem) {
            return;
        }
        var options = selectElem.options;
        if (options.length > 0) {
            // find index of value to select
            var idx = 0;
            for (var i = 0; i < options.length; i++) {
                if (options[i].value != selectedValue) {
                    continue;
                }
                idx = i;
                break;
            }
            selectElem.selectedIndex = idx;
            $('.custom-select').each(function () {
                var selectVal = $(this).find(':selected').text();
                $(this).find('.selectorOut').text(selectVal);
            });
        }
    },
    init: function init($con) {

        if ($con == null) {
            $con = $('body');
        }

        uievents.customFields();
        // Dynamicaly generating tabindex for VIP
        if ($('.ui-dialog').hasClass('vipInsider-dlg')) {
            $('.vipInsider-dlg .formfield').each(function (i) {
                $(this).find(':input:not(:hidden)').attr('tabindex', i + 21);
            });
        }
        /*$(document).ajaxComplete(function () {
            if($('.pt_productsearchresult').length > 0){app.search.searchRefinementToggle();}
            uievents.synccheckoutH();
        });*/
        $con.find('a.clearbutton').on('click touchstart', function () {
            $(this).closest('.formfield').find('input').val('');
            $(this).closest('.formfield').find('textarea').val('');
            $(this).closest('.formfield').find('a.clearbutton').hide();
            $(this).closest('.formfield').find('.correctaddress').hide();
            $(this).closest('.formfield').find('.form-row , .label span').removeClass('inputlabel');
            var textareMaxLength = $(this).closest('.field-wrapper').find('textarea').attr('maxlength');
            $(this).closest('.field-wrapper').find('.char-count').html('').html('Characters Remaining ' + textareMaxLength);
            if ($(this).closest('.formfield').find('input[name$="_creditCard_number"]').length > 0 && $(this).closest('.formfield').find('input[name$="_creditCard_number"]').val().length < 4) {
                $('.cardtypeimg > div').hide();
            }
            if ($(this).closest('.formfield').find('.field-wrapper .maxelement').length > 0) {
                $(this).closest('.formfield').find('.field-wrapper .maxelement').remove();
            }
        });
        $con.find('.promo-input-button .field-wrapper').on('keyup blur', function () {
            if ($(this).find('input').val() != undefined) {
                if ($(this).find('input').val().length > 0) {
                    $(this).find('a.clearbutton').show();
                } else {
                    $(this).find('a.clearbutton').hide();
                }
            }
        });
        $con.find('.giftcertfields .field-wrapper').on('keyup blur', function () {
            if ($(this).find('input').val() != undefined) {
                $(this).find('input').removeClass('errorclient');
                if ($(this).find('input').val().length > 0) {
                    $(this).find('a.clearbutton').show();
                } else {
                    $(this).find('a.clearbutton').hide();
                }
            }
        });

        if ($('.ui-login').length > 0 || $('.passwordreset').length > 0) {
            $con.find('.ui-login .formfield').each(function () {
                var $val = $(this).find('input[type="text"]').length > 0 ? $(this).find('input[type="text"]').val() : $(this).find('input[type="password"]').val();
                if ($(this).find('.field-wrapper .clearbutton').length == 0 && $(this).find('.field-wrapper input[type="text"]').length > 0 || $(this).find('.field-wrapper input[type="password"]').length > 0) {
                    $(this).find('.field-wrapper').append('<a class="clearbutton"></a>');
                    $(this).find('.clearbutton').hide();
                }
                if (($val != null || $val != undefined) && $val.length > 0) {
                    $(this).find('.clearbutton').show();
                }
            });
        }
        if ($('.account-section').length > 0 || $('.passwordreset').length > 0) {
            $con.find('.account-section .formfield').each(function () {
                var $val = $(this).find('input[type="text"]').length > 0 ? $(this).find('input[type="text"]').val() : $(this).find('input[type="password"]').val();
                if ($(this).find('.field-wrapper .clearbutton').length == 0 && $(this).find('.field-wrapper input[type="text"]').length > 0 || $(this).find('.field-wrapper input[type="password"]').length > 0) {
                    $(this).find('.field-wrapper').append('<a class="clearbutton"></a>');
                }
                if (($val != null || $val != undefined) && $val.length > 0) {
                    $(this).find('.clearbutton').show();
                }
            });
        }

        $con.find('.formfield .field-wrapper input,.formfield .field-wrapper textarea').on('keyup input blur', function () {
            if ($(this).val() != undefined) {
                if ($(this).val().length > 0) {
                    $(this).closest('.formfield').find('a.clearbutton').show();
                } else {
                    $(this).closest('.formfield').find('a.clearbutton').hide();
                }
            }
        });
        //var OSName = 'Unknown OS';
        if (navigator.appVersion.indexOf('Mac') != -1) {
            $('.pt_vipinsider').find('span.rapala-entity-holder i').addClass('macfont');
        }

        $('.paymentmethods_cont .toggle').click(function () {
            uievents.synccheckoutH();
        });

        $('button[name=\'dwfrm_login_login\']').click(function () {
            setTimeout(function () {
                uievents.synccheckoutH();
            }, 100);
        });
        $('button[name=\'dwfrm_billinggiftcert_redeemGiftCert\']').click(function () {
            setTimeout(function () {
                uievents.synccheckoutH();
            }, 100);
        });
        $('button[name=\'dwfrm_billingcoupon_applyCoupon\']').click(function () {
            setTimeout(function () {
                uievents.synccheckoutH();
            }, 100);
        });
        $('.checkbalance a').click(function () {
            setTimeout(function () {
                uievents.synccheckoutH();
            }, 100);
        });
        $('.giftcertcouponform .gift-heading').click(function () {
            if ($('.show-content').is(':visible') == true) {
                $('.show-content').hide();
                $(this).closest('.giftcertfield').find('span.error').hide();
            } else {
                $('.show-content').show();
                $(this).closest('.giftcertfield').find('span.error').show();
            }
            uievents.synccheckoutH();
        });
        $('body').on('keypress keyup', 'input[id$="_addressid"],input[id$="_addressFields_firstName"],input[id$="_addressFields_lastName"],input[id$="_addressFields_address1"],input[id$="_addressFields_address2"],input[id$="_addressFields_city"],input[id$="_addressFields_phone"],input[id$="_addressFields_postal"],input[id$="_contactus_phone"]', function (e) {
            var keycode = e.keyCode ? e.keyCode : e.which;
            var maxlength = $(this).attr('maxlength');
            var maxlmsg = 'This field is limited to ' + maxlength + ' characters.';
            if (jQuery(this).hasClass('phone') || jQuery(this).hasClass('phoneCDUS')) {
                maxlength = 14;
                $(this).attr('maxlength', maxlength);
                maxlmsg = 'This field is limited to 10 numbers.';
            }

            if (jQuery(this).hasClass('postal')) {
                maxlength = 10;
                $(this).attr('maxlength', maxlength);
                maxlmsg = 'This field is limited to 9 numbers.';
            }
            if (keycode != 86) {
                var maxElement = '<div class=\'maxelement hide\'>' + maxlmsg + '</div>';
                if ($(this).val().length >= maxlength && keycode != 9) {
                    if ($(this).closest('.field-wrapper').find('span.errorclient').length != 0) {
                        $(this).closest('.field-wrapper').find('span.errorclient').remove();
                    }
                    if ($(this).closest('.field-wrapper').find('.maxelement').length == 0) {
                        $(this).closest('.field-wrapper').append(maxElement);
                    } else {
                        $(this).closest('.field-wrapper').find('.maxelement').removeClass('hide');
                        $(this).val($(this).val().substr(0, maxlength));
                        return false;
                    }
                } else {
                    if ($(this).closest('.field-wrapper').find('.maxelement').length > 0) {
                        $(this).closest('.field-wrapper').find('.maxelement').remove();
                    }
                }
            }
        });
        $('body').on('blur', 'input[id$="_addressid"],input[id$="_addressFields_firstName"],input[id$="_addressFields_lastName"],input[id$="_addressFields_address1"],input[id$="_addressFields_address2"],input[id$="_addressFields_city"],input[id$="_addressFields_phone"],input[id$="_addressFields_postal"],input[id$="_contactus_phone"]', function () {
            $('.maxelement').addClass('hide');
            $('#customercontactus').find('span').removeClass('maxelement');
        });
        /* if($(".ordertotalsaving").length > 0 ) {
             $(".new-summery").removeClass("discount-available");
         }else {
             $(".new-summery").addClass("discount-available");
         }*/
        if ($('.ui-dialog').hasClass('vipInsider-dlg')) {
            $('.vipInsider-dlg .formfield').each(function () {
                if ($(this).find('.field-wrapper .clearbutton').length == 0 && $(this).find('.field-wrapper input[type="text"]').length > 0 || $(this).find('.field-wrapper textarea').length > 0 || $(this).find('.field-wrapper input[type="password"]').length > 0) {
                    $(this).find('.field-wrapper').append('<a class="clearbutton"></a>');
                }
                $(this).find('.field-wrapper input.textinput, .field-wrapper textarea').unbind('change').bind('click change', function () {
                    if ($(this).hasClass('errorclient')) {
                        $(this).removeClass('errorclient');
                        $(this).closest('.formfield').find('.label').find('span.errorclient').remove();
                        $(this).closest('.formfield').find('.label').removeClass('erroroccured');
                        $(this).closest('.formfield').find('.form-row , .label span').removeClass('inputlabel');
                    } else {
                        return false;
                    }
                });
                $(this).find('.field-wrapper select').unbind('change').bind('focusin change', function () {
                    if ($(this).hasClass('errorclient')) {
                        $(this).removeClass('errorclient');
                        $(this).closest('.formfield').find('.label').find('span.errorclient').remove();
                        $(this).closest('.formfield').find('.label').removeClass('erroroccured');
                        $(this).closest('.formfield').find('.form-row , .label span').removeClass('inputlabel');
                    }
                });
            });
            $('#VIPInsider-form-cancel-id').click(function () {
                $('.ui-dialog-titlebar-close').trigger('click');
            });

            /********************* vip phone and zip error exceed code **************************/

            $('input[id$="_vipinsider_customer_zip"],input[id$="_vipinsider_customer_phone"]').bind('keypress keyup', function (e) {
                var keycode = e.keyCode ? e.keyCode : e.which;
                var maxlength = $(this).attr('maxlength');
                var maxlmsg = 'This field is limited to ' + maxlength + ' characters.';
                if (jQuery(this).hasClass('vip-phone')) {
                    maxlength = 14;
                    $(this).attr('maxlength', maxlength);
                    maxlmsg = '-This field is limited to 10 numbers.';
                }
                if (jQuery(this).hasClass('vip-zip')) {
                    maxlength = 10;
                    $(this).attr('maxlength', maxlength);
                    maxlmsg = '-This field is limited to 9 numbers.';
                }
                if (keycode != 86) {
                    var maxElement = '<div class=\'maxelement hide\'>' + maxlmsg + '</div>';
                    if ($(this).val().length >= maxlength) {
                        if ($(this).closest('.field-wrapper').find('span.errorclient').length != 0) {
                            $(this).closest('.field-wrapper').find('span.errorclient').remove();
                        }
                        if ($(this).closest('.formfield').find('.maxelement').length == 0) {
                            $(this).closest('.formfield').find('.label').append(maxElement);
                        } else {
                            if (keycode > 47 && keycode < 58) {
                                $(this).closest('.formfield').find('.maxelement').removeClass('hide');
                                $(this).closest('.formfield').find('.label').addClass('erroroccured');
                                $(this).val($(this).val().substr(0, maxlength));
                                return false;
                            }
                        }
                    } else {
                        if ($(this).closest('.formfield').find('.maxelement').length > 0) {
                            $(this).closest('.formfield').find('.maxelement').remove();
                            $(this).closest('.formfield').find('.label').removeClass('erroroccured');
                        }
                    }
                }
            });
            //this is used after to remove the exceeding error message on blur for 1143 ticket
            jQuery('input[id$="_vipinsider_customer_zip"],input[id$="_vipinsider_customer_phone"]').bind('blur', function () {
                if ($(this).closest('.formfield').find('.label').find('.maxelement').is(':visible')) {
                    $('.maxelement').addClass('hide');
                    $('#VipinsiderForm').find('span').removeClass('maxelement');
                    $(this).closest('.formfield').find('.label').removeClass('erroroccured');
                }
            });
        }
        /**------- left nav----------------*/
        $con.find('.categorymenusnew li.active').closest('.category-top-level').addClass('current');
        $con.find('.category-top-level').each(function () {
            if ($(this).hasClass('current')) {
                var $this = $('.categorymenusnew li.active');
                /*
                var $notthis = $('.categorymenusnew li').filter(function () {
                    if ($(this).not('.active')) {
                        if ($(this).find('> ul').length > 0) {
                            $(this).find('> a .count-products').addClass('select_sublevelarrow');
                        }
                    }
                });
                */
                $this.find('> ul').show();
                $this.parents('ul').show();
                if ($this.find('> ul').length > 0) {
                    $this.find('> a .count-products').addClass('sublevelarrow');
                }
                $this.parents('li').not('li.active').find('> a .count-products').addClass('sublevelarrow');
                $this.find('li').each(function () {
                    if ($(this).find('> ul').length > 0) {
                        $(this).find('> a .count-products').addClass('select_sublevelarrow');
                    }
                });
            } else {
                if ($(this).find('> ul').length > 0) {
                    $(this).find('> a .count-products').addClass('select_sublevelarrow');
                }
            }
        });
        /*$('textarea[data-character-limit]').each(function(){
            charcount($(this));
            // trigger the keydown event so that any existing character data is calculated
        }).on('keyup keypress', function(){
            charcount($(this));
        });*/
    },
    synccheckoutH: function synccheckoutH() {
        if ($('.pt_checkout').length > 0) {
            $('.item-cart-scrollbar').removeAttr('style');
            $('.pt_checkout .summary-section .slimScrollDiv').removeAttr('style');
            $('.item-cart-scrollbar').removeClass('scrollbar-active');
            $('.pt_checkout  .ajax-cartsummary').find('.summary-carttable').removeClass('scrollbar-is-active');
            $('.item-cart-scrollbar').slimScroll({ destroy: true });
            var checkoutLeftH = $('.pt_checkout .checkout_cont').height(),
                summaryH = $('.pt_checkout .summary-section').height(),
                newsummaryH = $('.pt_checkout  .new-summery-cart').not('.mobile-view').height();

            var newHeightRight = summaryH + newsummaryH;
            if (newHeightRight >= checkoutLeftH) {
                var summaryHeight = checkoutLeftH - newsummaryH;
                var summaryHeightRightBottom = summaryHeight - 99;
                $('.pt_checkout .summary-section .slimScrollDiv').css({ 'height': summaryHeightRightBottom });
                $('.item-cart-scrollbar').addClass('scrollbar-active').css({ 'height': summaryHeightRightBottom });
                $('.item-cart-scrollbar').slimScroll({
                    railVisible: true,
                    color: '#a0a0a0',
                    alwaysVisible: true
                });
                $('.pt_checkout  .ajax-cartsummary').find('.summary-carttable').addClass('scrollbar-is-active');
            } else {
                $('.item-cart-scrollbar').css({ 'height': 'auto' });
                $('.pt_checkout .summary-section .slimScrollDiv').css({ 'height': 'auto', 'overflow-y': 'auto' });
                $('.item-cart-scrollbar').removeClass('scrollbar-active');
                $('.pt_checkout  .ajax-cartsummary').find('.summary-carttable').removeClass('scrollbar-is-active');
                $('.item-cart-scrollbar').slimScroll({ destroy: true });
            }
        }
    }
};
module.exports = uievents;

},{"./util":63}],63:[function(require,module,exports){
'use strict';

var _ = require('lodash');
var cardregex = {
    mastercard: /^5[1-5][0-9]{2,14}$/,
    visa: /^4[0-9]{3,15}$/,
    amex: /^3[47]([0-9]{2,13})$/,
    discover: /^6(?:011[0-9]{0,12}|5[0-9]{2,14})$/
};
var util = {
    /**
     * @function
     * @description appends the parameter with the given name and value to the given url and returns the changed url
     * @param {String} url the url to which the parameter will be added
     * @param {String} name the name of the parameter
     * @param {String} value the value of the parameter
     */
    appendParamToURL: function appendParamToURL(url, name, value) {
        // quit if the param already exists
        if (url.indexOf(name + '=') !== -1) {
            return url;
        }
        var separator = url.indexOf('?') !== -1 ? '&' : '?';
        return url + separator + name + '=' + encodeURIComponent(value);
    },
    hiddenData: function hiddenData() {
        jQuery.each(jQuery('.hidden'), function () {
            var hiddenStr = jQuery(this).html();

            if (hiddenStr === '') {
                return;
            }

            // see if its a json string
            if (jQuery(this).hasClass('json')) {
                // try to parse it as a json
                try {
                    hiddenStr = window.eval('(' + hiddenStr + ')');
                } catch (e) {
                    // Do Nothing
                }
            }

            jQuery(this).prev().data('data', hiddenStr);

            jQuery(this).remove();
        });
    },

    /**** Read cookieee  *****/
    readCookie: function readCookie(name) {
        var nameEQ = name + '=';
        var ca = document.cookie.split(';');
        for (var i = 0; i < ca.length; i++) {
            var c = ca[i];
            while (c.charAt(0) == ' ') {
                c = c.substring(1, c.length);
            }if (c.indexOf(nameEQ) == 0) {
                return c.substring(nameEQ.length, c.length);
            }
        }
        return null;
    },

    /***  Read cookie ***/
    /**
     * @function
     * @description appends the parameters to the given url and returns the changed url
     * @param {String} url the url to which the parameters will be added
     * @param {Object} params
     */
    appendParamsToUrl: function appendParamsToUrl(url, params) {
        var _url = url;
        _.each(params, function (value, name) {
            _url = this.appendParamToURL(_url, name, value);
        }.bind(this));
        return _url;
    },

    /**
     * @function
     * @description remove the parameter and its value from the given url and returns the changed url
     * @param {String} url the url from which the parameter will be removed
     * @param {String} name the name of parameter that will be removed from url
     */
    removeParamFromURL: function removeParamFromURL(url, name) {
        if (url.indexOf('?') === -1 || url.indexOf(name + '=') === -1) {
            return url;
        }
        var hash;
        var params;
        var domain = url.split('?')[0];
        var paramUrl = url.split('?')[1];
        var newParams = [];
        // if there is a hash at the end, store the hash
        if (paramUrl.indexOf('#') > -1) {
            hash = paramUrl.split('#')[1] || '';
            paramUrl = paramUrl.split('#')[0];
        }
        params = paramUrl.split('&');
        for (var i = 0; i < params.length; i++) {
            // put back param to newParams array if it is not the one to be removed
            if (params[i].split('=')[0] !== name) {
                newParams.push(params[i]);
            }
        }
        return domain + '?' + newParams.join('&') + (hash ? '#' + hash : '');
    },

    /**
     * @function
     * @description extract the query string from URL
     * @param {String} url the url to extra query string from
     **/
    getQueryString: function getQueryString(url) {
        var qs;
        if (!_.isString(url)) {
            return;
        }
        var a = document.createElement('a');
        a.href = url;
        if (a.search) {
            qs = a.search.substr(1); // remove the leading ?
        }
        return qs;
    },
    /**
     * @function
     * @description
     * @param {String}
     * @param {String}
     */
    elementInViewport: function elementInViewport(el, offsetToTop) {
        var top = el.offsetTop,
            left = el.offsetLeft,
            width = el.offsetWidth,
            height = el.offsetHeight;

        while (el.offsetParent) {
            el = el.offsetParent;
            top += el.offsetTop;
            left += el.offsetLeft;
        }

        if (typeof offsetToTop !== 'undefined') {
            top -= offsetToTop;
        }

        if (window.pageXOffset !== null) {
            return top < window.pageYOffset + window.innerHeight && left < window.pageXOffset + window.innerWidth && top + height > window.pageYOffset && left + width > window.pageXOffset;
        }

        if (document.compatMode === 'CSS1Compat') {
            return top < window.document.documentElement.scrollTop + window.document.documentElement.clientHeight && left < window.document.documentElement.scrollLeft + window.document.documentElement.clientWidth && top + height > window.document.documentElement.scrollTop && left + width > window.document.documentElement.scrollLeft;
        }
    },

    /**
     * @function
     * @description Appends the parameter 'format=ajax' to a given path
     * @param {String} path the relative path
     */
    ajaxUrl: function ajaxUrl(path) {
        return this.appendParamToURL(path, 'format', 'ajax');
    },

    /**
     * @function
     * @description
     * @param {String} url
     */
    toAbsoluteUrl: function toAbsoluteUrl(url) {
        if (url.indexOf('http') !== 0 && url.charAt(0) !== '/') {
            url = '/' + url;
        }
        return url;
    },
    /**
     * @function
     * @description Loads css dynamically from given urls
     * @param {Array} urls Array of urls from which css will be dynamically loaded.
     */
    loadDynamicCss: function loadDynamicCss(urls) {
        var i,
            len = urls.length;
        for (i = 0; i < len; i++) {
            this.loadedCssFiles.push(this.loadCssFile(urls[i]));
        }
    },

    /**
     * @function
     * @description Loads css file dynamically from given url
     * @param {String} url The url from which css file will be dynamically loaded.
     */
    loadCssFile: function loadCssFile(url) {
        return $('<link/>').appendTo($('head')).attr({
            type: 'text/css',
            rel: 'stylesheet'
        }).attr('href', url); // for i.e. <9, href must be added after link has been appended to head
    },
    // array to keep track of the dynamically loaded CSS files
    loadedCssFiles: [],

    /**
     * @function
     * @description Removes all css files which were dynamically loaded
     */
    clearDynamicCss: function clearDynamicCss() {
        var i = this.loadedCssFiles.length;
        while (0 > i--) {
            $(this.loadedCssFiles[i]).remove();
        }
        this.loadedCssFiles = [];
    },
    /**
     * @function
     * @description Extracts all parameters from a given query string into an object
     * @param {String} qs The query string from which the parameters will be extracted
     */
    getQueryStringParams: function getQueryStringParams(qs) {
        if (!qs || qs.length === 0) {
            return {};
        }
        var params = {},
            unescapedQS = decodeURIComponent(qs);
        // Use the String::replace method to iterate over each
        // name-value pair in the string.
        unescapedQS.replace(new RegExp('([^?=&]+)(=([^&]*))?', 'g'), function ($0, $1, $2, $3) {
            params[$1] = $3;
        });
        return params;
    },

    fillAddressFields: function fillAddressFields(address, $form) {
        for (var field in address) {
            if (field === 'ID' || field === 'UUID' || field === 'key') {
                continue;
            }
            // if the key in address object ends with 'Code', remove that suffix
            // keys that ends with 'Code' are postalCode, stateCode and countryCode
            $form.find('[name$="' + field.replace('Code', '') + '"]').val(address[field]);
            // update the state fields
            if (field === 'countryCode') {
                $form.find('[name$="country"]').trigger('change');
                // retrigger state selection after country has changed
                // this results in duplication of the state code, but is a necessary evil
                // for now because sometimes countryCode comes after stateCode
                $form.find('[name$="state"]').val(address.stateCode);
            }
        }
    },
    /**
     * @function
     * @description Updates the number of the remaining character
     * based on the character limit in a text area
     */
    limitCharacters: function limitCharacters() {
        $('form').find('textarea[data-character-limit]').each(function () {
            var characterLimit = $(this).data('character-limit');
            var charCountHtml = String.format(Resources.CHAR_LIMIT_MSG, '<span class="char-remain-count">' + characterLimit + '</span>', '<span class="char-allowed-count">' + characterLimit + '</span>');
            var charCountContainer = $(this).next('div.char-count');
            if (charCountContainer.length === 0) {
                charCountContainer = $('<div class="char-count"/>').insertAfter($(this));
            }
            charCountContainer.html(charCountHtml);
            // trigger the keydown event so that any existing character data is calculated
            $(this).change();
        });
    },
    trimPrefix: function trimPrefix(str, prefix) {
        return str.substring(prefix.length);
    },
    cardtype: {
        init: function init() {
            if ($('#paymentmethods').find('.creditCard-number').length > 0) {
                $('#paymentmethods').find('.creditCard-number').bind('keypress keyup', function () {
                    if ($(this).val().length) {
                        $('.carderror.error').hide();
                    }
                    if ($(this).val().length < 4) {
                        $('.cardtypeimg > div').hide();
                    }
                });
                $('.creditCard-number, .creditcard_cvn').on('keypress', function (e) {
                    e = e ? e : window.event;
                    var charCode = e.which ? e.which : e.keyCode;
                    if (charCode > 31 && (charCode < 48 || charCode > 57)) {
                        return false;
                    }
                    return true;
                });
                $('#paymentmethods').find('.creditCard-number').blur(function () {
                    var val = $.trim($(this).val());
                    //var regex = /^[a-zA-Z]+$/;
                    var errorspan = $(this).closest('.formfield').find('span.carderror');
                    if (!val) {
                        errorspan.hide();
                        return;
                    }
                    if (val.length) {
                        if ($('.carderror.error').length == 0) {
                            $(this).closest('.formfield').append('<span class="carderror error">Not a valid Credit Card Number, please try again.</span>');
                        }
                        $('.carderror.error').hide();
                        var cardTypeval = util.validatecardtype(val);
                        if (cardTypeval != 'Error') {
                            errorspan.hide();
                            $('#paymentmethods').find('select[name$="_paymentMethods_creditCard_type"]').val(cardTypeval);
                            $('.cardtypeimg > div').hide();
                            $('.cardtypeimg > div.' + cardTypeval).show();

                            if (cardTypeval == 'MasterCard' || cardTypeval == 'Visa' || cardTypeval == 'Discover') {
                                if (val.length < 16) {
                                    $('.carderror.error').show();
                                    $(this).addClass('errorclient');
                                }
                            } else if (cardTypeval == 'Amex') {
                                if (val.length < 15) {
                                    $('.carderror.error').show();
                                    $(this).addClass('errorclient');
                                }
                            } else {
                                $('.carderror.error').hide();
                                $(this).removeClass('errorclient');
                            }
                        } else {
                            if ($(this).val().indexOf('*') == -1) {
                                if (val.length < 16) {
                                    $('.carderror.error').show();
                                    $(this).addClass('errorclient');
                                    $('.cardtypeimg > div').hide();
                                }
                            }
                        }
                    }
                    if ($('#paymentmethods').find('.creditCard-number').val().length < 4) {
                        $('.cardtypeimg > div').hide();
                    }
                });
            }
        }

    },
    validatecardtype: function validatecardtype(val) {
        var result = ' ',
            carNo = val;

        if (cardregex.mastercard.test(carNo)) {
            // first check for MasterCard
            result = 'MasterCard';
        } else if (cardregex.visa.test(carNo)) {
            // then check for Visa
            result = 'Visa';
        } else if (cardregex.amex.test(carNo)) {
            // then check for AmEx
            result = 'Amex';
        } else if (cardregex.discover.test(carNo)) {
            result = 'Discover';
        } else {
            result = 'Error';
        }
        return result;
    },
    /**
     * @function
     * @description Binds the onclick-event to a delete button on a given container,
     * which opens a confirmation box with a given message
     * @param {String} container The name of element to which the function will be bind
     * @param {String} message The message the will be shown upon a click
     */
    setDeleteConfirmation: function setDeleteConfirmation(container, message) {
        $(container).on('click', '.delete', function () {
            return window.confirm(message);
        });
    },
    /**
     * @function
     * @description Scrolls a browser window to a given x point
     * @param {String} The x coordinate
     */
    scrollBrowser: function scrollBrowser(xLocation) {
        $('html, body').animate({
            scrollTop: xLocation
        }, 500);
    },

    isMobile: function isMobile() {
        var mobileAgentHash = ['mobile', 'tablet', 'phone', 'ipad', 'ipod', 'android', 'blackberry', 'windows ce', 'opera mini', 'palm'];
        var idx = 0;
        var isMobile = false;
        var userAgent = navigator.userAgent.toLowerCase();

        while (mobileAgentHash[idx] && !isMobile) {
            isMobile = userAgent.indexOf(mobileAgentHash[idx]) >= 0;
            idx++;
        }
        return isMobile;
    }
};

module.exports = util;

},{"lodash":5}],64:[function(require,module,exports){
'use strict';

var naPhone = /^\(?([2-9][0-8][0-9])\)?[\-\. ]?([2-9][0-9]{2})[\-\. ]?([0-9]{4})(\s*x[0-9]+)?$/;
var regex = {
    phone: {
        us: naPhone,
        ca: naPhone,
        fr: /^0[1-6]{1}(([0-9]{2}){4})|((\s[0-9]{2}){4})|((-[0-9]{2}){4})$/,
        it: /^(([0-9]{2,4})([-\s\/]{0,1})([0-9]{4,8}))?$/,
        jp: /^(0\d{1,4}- ?)?\d{1,4}-\d{4}$/,
        cn: /.*/,
        gb: /^((\(?0\d{4}\)?\s?\d{3}\s?\d{3})|(\(?0\d{3}\)?\s?\d{3}\s?\d{4})|(\(?0\d{2}\)?\s?\d{4}\s?\d{4}))(\s?\#(\d{4}|\d{3}))?$/
    },
    postal: {
        us: /^\d{5}(-\d{4})?$/,
        ca: /^[ABCEGHJKLMNPRSTVXY]{1}\d{1}[A-Z]{1} *\d{1}[A-Z]{1}\d{1}$/,
        fr: /^(F-)?((2[A|B])|[0-9]{2})[0-9]{3}$/,
        it: /^([0-9]){5}$/,
        jp: /^([0-9]){3}[-]([0-9]){4}$/,
        cn: /^([0-9]){6}$/,
        gb: /^([A-PR-UWYZ0-9][A-HK-Y0-9][AEHMNPRTVXY0-9]?[ABEHMNPRVWXY0-9]? {1,2}[0-9][ABD-HJLN-UW-Z]{2}|GIR 0AA)$/
    },
    notCC: /^(?!(([0-9 -]){13,19})).*$/
};
// global form validator settings
var settings = {
    errorClass: 'errorclient',
    errorElement: 'span',
    focusInvalid: true,
    onkeyup: function onkeyup(element) {
        if (!this.checkable(element)) {
            $(element).addClass('stopKeypress');
            if ($(element).val().length > 0) {
                this.element(element);
            }
            if ($('.account-logs').length > 0 || $('.new-register').length > 0 || $('.wish-logs').length > 0 || $('.forgot_old').length > 0 || $('.createan-account').length > 0 || $('.promo-sec').length > 0 || $('.headercustomerinfo').length > 0 || $('.ui-login').length > 0 || $('.vipInsider-dlg.ui-dialog ').length > 0 || $('.passwordreset').length > 0) {
                $(element).closest('.formfield').find('.label span').removeClass('inputlabel');
                $('.promo-sec').find('.couponinput').removeClass('inputlabel');
            }
        }
    },
    //focusCleanup: false,
    //onfocusout: false,

    onfocusout: function onfocusout(element) {
        if (!this.checkable(element)) {
            $(element).removeClass('stopKeypress');
            this.element(element);

            if ($('.account-logs').length > 0 || $('.new-register').length > 0 || $('.wish-logs').length > 0 || $('.forgot_old').length > 0 || $('.passwordreset').length > 0 || $('.vipInsider-dlg.ui-dialog ').length > 0 || $('.promo-sec').length > 0 || $('.pt_checkout').length > 0) {
                if ($(element).hasClass('errorclient')) {
                    $(element).closest('.form-row').addClass('inputlabel');
                    $(element).closest('.formfield').addClass('inputlabel');
                    $(element).closest('.formfield').find('.label span').addClass('inputlabel');
                    $(element).closest('.form-row').find('.label span').addClass('inputlabel');
                    $(element).closest('.formfield').find('.logerror , .existing_register').hide();
                } else {
                    $(element).closest('.form-row').removeClass('inputlabel');
                    $(element).closest('.formfield').removeClass('inputlabel');
                    $(element).closest('.form-row').find('.label span').removeClass('inputlabel');
                    $(element).closest('.formfield').find('.label span').removeClass('inputlabel');
                    $(element).closest('.formfield').find('.logerror , .existing_register').hide();
                }
            }
            /*** if($(element).closest('.ui-dialog').hasClass('vipInsider-dlg')) {
            if($(element).hasClass("errorclient")) {
            if($(element).closest(".formfield").find(".label span.errorclient").is(':visible')){
            $(element).closest(".form-row").addClass("erroroccured");
            }else {
            $(element).closest(".form-row").removeClass("erroroccured");
            }
            }
            } ***/
        }
    },
    errorPlacement: function errorPlacement(error, element) {
        if ($(element).hasClass('errorclient')) {
            $(element).closest('.form-row').addClass('inputlabel');
            $(element).closest('.formfield').addClass('inputlabel');
            $(element).closest('.formfield').find('.label span').addClass('inputlabel');
            $(element).closest('.form-row').find('.label span').addClass('inputlabel');
            $(element).closest('.formfield').find('.logerror , .existing_register').hide();
        } else {
            $(element).closest('.form-row').removeClass('inputlabel');
            $(element).closest('.formfield').removeClass('inputlabel');
            $(element).closest('.form-row').find('.label span').removeClass('inputlabel');
            $(element).closest('.formfield').find('.label span').removeClass('inputlabel');
            $(element).closest('.formfield').find('.logerror , .existing_register').hide();
        }
        if ($(element).hasClass('emailfooter')) {
            $(element).closest('#emailfooter').before(error);
        } else if ($(element).closest('.ui-dialog').hasClass('vipInsider-dlg')) {
            $(element).closest('.formfield').find('.label').append(error);
            if ($(element).closest('.formfield').find('.label span.errorclient').is(':visible') && !$(element).closest('.formfield').find('.label').hasClass('erroroccured')) {
                $(element).closest('.formfield').find('.label').addClass('erroroccured');
            } else {
                $(element).closest('.formfield').find('.label').removeClass('erroroccured');
            }
        } else {
            if ($('.passwordreset').find('button.send.clickedButton').length > 0) {
                $(element).after(error);
                $('.passwordreset').find('button.send.clickedButton').removeClass('clickedButton');
            } else {
                if ($('.header-forgot-pwd.accountcontent').css('display') == 'none') {
                    $(element).after(error);
                } else if ($('.header-forgot-pwd.accountcontent').css('display') == 'block') {
                    // Do Nothing
                } else {
                    if ($(element).hasClass('custom-select-wrap')) {
                        $(element).closest('.field-wrapper').after(error);
                    } else {
                        $(element).after(error);
                    }
                }
            }
        }
    }
};

//firstname validation
var ctrl = false;
var selectText = false;
$('input[attributemaxlength],textarea[attributemaxlength]').on('keydown', function (e) {
    //var j;
    if ($(this).hasClass('firstname')) {
        //j = document.getElementById('dwfrm_profile_customer_firstname');
    } else if ($(this).hasClass('lastname')) {
        //j = document.getElementById('dwfrm_profile_customer_lastname');
    }
    if (e.keyCode == 17) {
        ctrl = true;
    }

    if ($(this).hasClass('vip-textarea') && e.keyCode != 8 && e.keyCode != 46 && !selectText || (e.keyCode >= 48 && e.keyCode <= 90 || e.keyCode >= 96 && e.keyCode <= 105) && !ctrl && !selectText) {
        var currObj = $(this);
        var maxchars = $(this).attr('maxlength');
        var tlength = $(this).val().length;
        if (tlength >= maxchars) {
            $(this).val($(this).val().substring(0, maxchars));
            if ($(currObj).closest('.field-wrapper').find('.max-length-error').length == 0 && $(currObj).closest('.formfield').find('.max-length-error').length == 0) {
                var error = '<div class=\'max-length-error\'> This field is limited to 30 characters.</div>';
                if ($(currObj).hasClass('vip-textarea')) {
                    error = '<div class=\'max-length-error\'> -This field is limited to 1200 characters.</div>';
                }
                if ($(currObj).hasClass('vip-textarea1')) {
                    error = '<div class=\'max-length-error\'> -This field is limited to 30 characters.</div>';
                } else if ($(currObj).closest('form').hasClass('vipfieldstaff')) {
                    error = '<div class=\'max-length-error\'> -This field is limited to 30 characters.</div>';
                }

                if ($(this).closest('form').hasClass('vipfieldstaff') > 0) {
                    $(this).closest('.formfield').find('.label').append(error);
                } else {
                    $(this).closest('.field-wrapper').append(error);
                }

                $(this).closest('.formfield').find('.label span').addClass('countlabelerror');
                $(this).addClass('counterror');
            } else if (e.keyCode != 9) {
                if ($(this).closest('form').hasClass('vipfieldstaff') > 0) {
                    $(this).closest('.formfield').find('.label').find('.max-length-error').removeClass('hide');
                } else {
                    $(this).closest('.field-wrapper').find('.max-length-error').removeClass('hide');
                }
                $(this).addClass('counterror');
                $(this).closest('.formfield').find('.label span').addClass('countlabelerror');
                return false;
            }
        } else {
            $(this).removeClass('counterror');
            $('.max-length-error').remove();
            $(this).closest('.formfield').find('.label span').removeClass('countlabelerror');
        }
    } else if (e.keyCode >= 48 && e.keyCode <= 57 || e.keyCode >= 96 && e.keyCode <= 105) {
        if ($(this).hasClass('vipinsideremail')) {
            return true;
        } else {
            return false;
        }
    } else {
        $(this).closest('.formfield').find('.max-length-error').remove();
        $(this).removeClass('counterror');
        $(this).closest('.formfield').find('.label span').removeClass('countlabelerror');
        selectText = false;
    }
}).on('keyup', function () {
    ctrl = false;
    //var currObj = $(this);
    var maxchars = $(this).attr('maxlength');
    var tlength = $(this).val().length;
    if (tlength < maxchars) {
        $(this).removeClass('counterror');
        $('.max-length-error').remove();
        $(this).closest('.formfield').find('.label span').removeClass('countlabelerror');
    }
}).on('select', function () {
    selectText = true;
    $(this).removeClass('counterror');
    $(this).closest('.formfield').find('.label span').removeClass('countlabelerror');
});
$('input[attributemaxlength],textarea[attributemaxlength]').on('focusout', function () {
    $(this).removeClass('counterror');
    $(this).closest('.formfield').find('.label span').removeClass('countlabelerror');
    $(this).closest('.field-wrapper').find('.max-length-error').remove();
    $(this).closest('.formfield').find('.max-length-error').remove();
    //$(this).closest('.formfield').find('.label span').removeClass('inputlabel');
});
if ($('.loginfailedclass:visible').length > 0) {
    $('.registration .formfield_email').find('.labeltext').removeClass('inputlabel');
    $('.registration .formfield_email').find('.requiredindicator').removeClass('inputlabel');
    $('.registration .formfield_email').find('.requiredindicator').removeClass('inputlabel');
    $('.registration .formfield_email').find('.existing_register').hide();
}

//$("body").on('change input',".accountemail , .guestemail, .emailCMrapala, .guestemailcon, .vipinsideremail, .emailfooter, .accountemailconf, .accountEmailConfirmation, .resetemail, .accemailcon, .loggedemail", function (e) {
//	//$(this).val(this.value.replace(/[\s]/g, ''));
//
//});
$('.accountemail , .guestemail, .emailCMrapala, .guestemailcon, .vipinsideremail, .emailfooter, .accountemailconf, .accountEmailConfirmation, .resetemail, .accemailcon, .loggedemail').on({
    keydown: function keydown(e) {
        if (e.which === 32) {
            return false;
        }
    },
    change: function change() {
        this.value = this.value.replace(/\s/g, '');
    }
});
//override default required field message
$.validator.messages.required = function ($1, ele) {
    var requiredText = $(ele).closest('.form-row').attr('data-required-text');
    return requiredText || '';
};

/**
 * Add phone validation method to $ validation plugin. Text
 * fields must have 'phone' css class to be validated as phone
 * phoneUS is copied from
 * http://docs.$.com/Plugins/Validation/CustomMethods/phoneUS
 */
$.validator.addMethod('phone', function (phoneNumber, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        // find out the country code
        var data = $(element).data('data');
        var country = data && data.country && data.country != '' ? data.country : 'US'; // default to US phone
        // validation

        // preserve this instance
        var that = this;

        // country specific phone validation handlers
        //var phoneUS, phoneCA;

        var phone = function phone() {
            phoneNumber = phoneNumber.replace(/\s+/g, '');
            return that.optional(element) || phoneNumber.length > 9 && phoneNumber.match(/^(\d{10}|\d{3}(-\d{3})(-\d{4})$|^\d{3}(\s\d{3})?(\s\d{4})?)$/);
        };
        //phoneUS = phoneCA;
        //window.eval('var phoneHandler = (typeof phone' + country + ' != \'undefined\') ? phone' + country + ': null;');

        // call the country specific phone validation
        // handler
        return country === 'US' || country === 'CA' ? phone() : true;
    }
}, Resources.INVALID_PHONE);

$.validator.addMethod('phoneCDUS', function (phoneNumber, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        phoneNumber = phoneNumber.replace(/\s+/g, '');
        return this.optional(element) || phoneNumber.length > 9 && phoneNumber.match(/^\(?[\d]{3}\)?[\s-]?[\d]{3}[\s-]?[\d]{4}$/);
    }
}, 'Please specify a valid phone number');

$.validator.addMethod('phone', function (phoneNumber, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        phoneNumber = phoneNumber.replace(/\s+/g, '');
        return this.optional(element) || phoneNumber.length > 9 && phoneNumber.match(/^\(?[\d]{3}\)?[\s-]?[\d]{3}[\s-]?[\d]{4}$/);
    }
}, 'Please specify a valid phone number');

$.validator.addMethod('phoneUK', function (phoneNumber, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        return this.optional(element) || phoneNumber.length > 9 && phoneNumber.match(/^(\(?(0|\+44)[1-9]{1}\d{1,4}?\)?\s?\d{3,4}\s?\d{3,4})$/);
    }
}, 'Please specify a valid phone number');

$.validator.addMethod('postal', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        if (value == '') {
            return true;
        }
        return (/^\d{5}((-\d{4})|(\d{4}))?$/.test(value)
        );
    }
}, 'Please enter your 5 or 9 digit Zip Code with or without a hyphen');

$.validator.addMethod('zipCodeCustom', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        if (value == '') {
            return true;
        }
        return (/^\d{5}((-\d{4})|(\d{4}))?$/.test(value)
        );
    }
}, '- Please enter a valid ZipCode');

$.validator.addMethod('phoneCustom', function (phoneNumber, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        phoneNumber = phoneNumber.replace(/\s+/g, '');
        return this.optional(element) || phoneNumber.length > 9 && phoneNumber.match(/^\(?[\d]{3}\)?[\s-]?[\d]{3}[\s-]?[\d]{4}$/);
    }
}, '- Please specify a valid phone number');

$.validator.addMethod('emailCM', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        if (value == '') {
            return true;
        }
        return (/^[\w-\.]{1,}\@([\da-zA-Z-]{1,}\.){1,}[\da-zA-Z-]{2,4}$/.test(value)
        );
    }
}, 'Please specify a valid Email Id');

var customErrormsg = '';
var customError = function customError() {
    return customErrormsg;
};

$.validator.addMethod('emailCMrapala', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        var vIndex = value.length;
        var fchar = value.substring(0, 1);
        var lchar = value.substring(vIndex - 1);
        if (value.indexOf('@') != -1) {
            var splitval = value.split('@');
            fchar = splitval[0].substring(0, 1);
            lchar = splitval[0].substring(splitval[0].length - 1);
        }
        var fcharS = /^[a-zA-Z0-9]$/.test(fchar);
        var lcharS = /^[a-zA-Z0-9]$/.test(lchar);
        var emailCheck = /^[-0-9a-zA-Z.-_]+@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(value);
        if (fcharS == false || lcharS == false) {
            customErrormsg = '-Something doesn\'t look right, please try again.';
            return false;
        } else if (emailCheck == false) {
            customErrormsg = 'Oops - the email entered is not in a valid format.';
            return false;
        } else {
            return true;
        }
    }
}, customError);

$.validator.addMethod('creditcard_name', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        if (value == '') {
            return true;
        }
        return (/^[a-zA-Z ]+$/.test(value)
        );
    }
}, 'Only letters are valid for this field');

$.validator.addMethod('creditcard_cvn', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {

        var cardtype = $('.select-creditCard-type').val();
        var cvvLength = 3;
        if (value == '') {
            return true;
        }
        if (cardtype == 'Amex') {
            cvvLength = 4;
        }
        if (value.length != cvvLength) {
            $('.errorKeypress').remove();
            return false;
        } else {
            return true;
        }
    }
}, 'Please enter a valid Security Code for the Credit Card entered');

$.validator.addMethod('guestemailcon', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else if (!$('.checkoutasguestbutton').is(':visible')) {
        var vIndex = value.length;
        var fchar = value.substring(0, 1);
        var lchar = value.substring(vIndex - 1);
        if (value.indexOf('@') != -1) {
            var splitval = value.split('@');
            fchar = splitval[0].substring(0, 1);
            lchar = splitval[0].substring(splitval[0].length - 1);
        }
        var fcharS = /^[a-zA-Z0-9]$/.test(fchar);
        var lcharS = /^[a-zA-Z0-9]$/.test(lchar);
        var emailCheck = /^[-0-9a-zA-Z.-_]+@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(value);
        var emailVal = $(element).closest('.formfield').prev('.formfield').find('.guestemail').val();
        if (fcharS == false || lcharS == false) {
            customErrormsg = 'Something doesn\'t look right, please try again.';
            return false;
        } else if (emailCheck == false) {
            customErrormsg = 'Oops - the email entered is not in a valid format.';
            return false;
        } else if (emailVal != value) {
            customErrormsg = 'Please make sure emails match.';
            return false;
        } else {
            return true;
        }
    }
}, customError);

$.validator.addMethod('guestemail', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else if (!$('.checkoutasguestbutton').is(':visible')) {
        var vIndex = value.length;
        var fchar = value.substring(0, 1);
        var lchar = value.substring(vIndex - 1);
        if (value.indexOf('@') != -1) {
            var splitval = value.split('@');
            fchar = splitval[0].substring(0, 1);
            lchar = splitval[0].substring(splitval[0].length - 1);
        }

        var fcharS = /^[a-zA-Z0-9]$/.test(fchar);
        var lcharS = /^[a-zA-Z0-9]$/.test(lchar);
        var emailCheck = /^[-0-9a-zA-Z.-_]+@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(value);
        if (fcharS == false || lcharS == false) {
            customErrormsg = 'Something doesn\'t look right, please try again.';
            return false;
        } else if (emailCheck == false) {
            customErrormsg = 'Oops - the email entered is not in a valid format.';
            return false;
        } else {
            return true;
        }
    }
}, customError);

$.validator.addMethod('loggedemail', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else if (!$('.signintomyaccountbutton').is(':visible')) {
        var vIndex = value.length;
        var fchar = value.substring(0, 1);
        var lchar = value.substring(vIndex - 1);
        if (value.indexOf('@') != -1) {
            var splitval = value.split('@');
            fchar = splitval[0].substring(0, 1);
            lchar = splitval[0].substring(splitval[0].length - 1);
        }
        var fcharS = /^[a-zA-Z0-9]$/.test(fchar);
        var lcharS = /^[a-zA-Z0-9]$/.test(lchar);
        var emailCheck = /^[-0-9a-zA-Z.-_]+@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(value);
        //var emailVal = $(element).closest('.formfield').prev('.formfield').find('.guestemail').val();
        if (fcharS == false || lcharS == false) {
            customErrormsg = 'Something doesn\'t look right, please try again.';
            return false;
        } else if (emailCheck == false) {
            customErrormsg = 'Oops - the email entered is not in a valid format.';
            return false;
        } else {
            return true;
        }
    }
}, customError);

$.validator.addMethod('accemailcon', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else if (!$('.createanaccountbutton').is(':visible')) {
        var vIndex = value.length;
        var fchar = value.substring(0, 1);
        var lchar = value.substring(vIndex - 1);
        if (value.indexOf('@') != -1) {
            var splitval = value.split('@');
            fchar = splitval[0].substring(0, 1);
            lchar = splitval[0].substring(splitval[0].length - 1);
        }
        var fcharS = /^[a-zA-Z0-9]$/.test(fchar);
        var lcharS = /^[a-zA-Z0-9]$/.test(lchar);
        var emailCheck = /^[-0-9a-zA-Z.-_]+@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(value);
        var emailVal = $(element).closest('.formfield').prev('.formfield').find('.accemail').val();
        if (fcharS == false || lcharS == false) {
            customErrormsg = 'Something doesn\'t look right, please try again.';
            return false;
        } else if (emailCheck == false) {
            customErrormsg = 'Oops - the email entered is not in a valid format.';
            return false;
        } else if (emailVal != value) {
            customErrormsg = 'Please make sure emails match.';
            return false;
        } else {
            return true;
        }
    }
}, customError);

$.validator.addMethod('a-zA-Z0-9', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else if (!$('.createanaccountbutton').is(':visible')) {
        var vIndex = value.length;
        var fchar = value.substring(0, 1);
        var lchar = value.substring(vIndex - 1);
        if (value.indexOf('@') != -1) {
            var splitval = value.split('@');
            fchar = splitval[0].substring(0, 1);
            lchar = splitval[0].substring(splitval[0].length - 1);
        }

        var fcharS = /^[a-zA-Z]$/.test(fchar);
        var lcharS = /^[a-zA-Z0-9]$/.test(lchar);
        var emailCheck = /^[-0-9a-zA-Z.-_]+@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(value);
        //var emailVal = $(element).closest('.formfield').prev('.formfield').find('.email').val();

        if (fcharS == false || lcharS == false) {
            customErrormsg = 'Something doesn\'t look right, please try again.';
            return false;
        } else if (emailCheck == false) {
            customErrormsg = 'Oops - the email entered is not in a valid format.';
            return false;
        } else {
            return true;
        }
    }
}, customError);

$.validator.addMethod('cm_password', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else if (!$('.createanaccountbutton').is(':visible') && $(element).hasClass('required')) {
        var passwordVal = $('.c_password').val();
        if ($(element).closest('form').length > 0 && $(element).closest('form').attr('id') == 'RegistrationForm') {
            passwordVal = $(element).closest('form').find('.c_password').val();
        }

        if (value.length < 5) {
            customErrormsg = 'Passwords must contain a minimum of 5 characters and are CaSe SeNsItIvE.';
            return false;
        } else if (passwordVal != value) {
            customErrormsg = 'Oops - your passwords do not match.';
            return false;
        } else {
            return true;
        }
    } else {
        return true;
    }
}, customError);

$.validator.addMethod('confirm_password', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else if ($(element).hasClass('required')) {
        var passwordVal = $(element).closest('form').find('.c_password').val();
        if (value.length < 5) {
            customErrormsg = 'Passwords must contain a minimum of 5 characters and are CaSe SeNsItIvE.';
            return false;
        } else if (passwordVal != value) {
            customErrormsg = 'Oops - your passwords do not match.';
            return false;
        } else {
            return true;
        }
    } else {
        return true;
    }
}, customError);

$.validator.addMethod('c_password', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else if ($(element).hasClass('required') && value.length < 5) {
        customErrormsg = 'Passwords must contain a minimum of 5 characters and are CaSe SeNsItIvE.';
        return false;
    } else {
        return true;
    }
}, customError);

$.validator.addMethod('login_password', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else if ($(element).hasClass('required') && value.length < 5) {
        customErrormsg = 'Passwords must contain a minimum of 5 characters and are CaSe SeNsItIvE.';
        return false;
    } else {
        return true;
    }
}, customError);

$.validator.addMethod('resetemail', function (value, element) {
    var vIndex = value.length;
    var fchar = value.substring(0, 1);
    var lchar = value.substring(vIndex - 1);

    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        if (value.indexOf('@') != -1) {
            var splitval = value.split('@');
            fchar = splitval[0].substring(0, 1);
            lchar = splitval[0].substring(splitval[0].length - 1);
        }
        var fcharS = /^[a-zA-Z0-9]$/.test(fchar);
        var lcharS = /^[a-zA-Z0-9]$/.test(lchar);
        var emailCheck = /^[-0-9a-zA-Z.-_]+@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(value);
        if (fcharS == false || lcharS == false) {
            customErrormsg = 'Something doesn\'t look right, please try again.';
            return false;
        } else if (emailCheck == false) {
            customErrormsg = 'Oops - the email entered is not in a valid format.';

            return false;
        } else {
            return true;
        }
    }
}, customError);

$.validator.addMethod('accountemail', function (value, element) {
    var vIndex = value.length;
    var fchar = value.substring(0, 1);
    var lchar = value.substring(vIndex - 1);
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        if (value.indexOf('@') != -1) {
            var splitval = value.split('@');
            fchar = splitval[0].substring(0, 1);
            lchar = splitval[0].substring(splitval[0].length - 1);
        }
        var fcharS = /^[a-zA-Z0-9]$/.test(fchar);
        var lcharS = /^[a-zA-Z0-9]$/.test(lchar);
        var emailCheck = /^[-0-9a-zA-Z.-_]+@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(value);
        if (fcharS == false || lcharS == false) {
            customErrormsg = 'Something doesn\'t look right, please try again.';
            return false;
        } else if (emailCheck == false) {
            customErrormsg = 'Oops - the email entered is not in a valid format.';
            return false;
        } else {
            return true;
        }
    }
}, customError);

//email validation for vipinsider

$.validator.addMethod('vipinsideremail', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        var vIndex = value.length;
        var fchar = value.substring(0, 1);
        var lchar = value.substring(vIndex - 1);
        if (value.indexOf('@') != -1) {
            var splitval = value.split('@');
            fchar = splitval[0].substring(0, 1);
            lchar = splitval[0].substring(splitval[0].length - 1);
        }
        var fcharS = /^[a-zA-Z0-9]$/.test(fchar);
        var lcharS = /^[a-zA-Z0-9]$/.test(lchar);
        var emailCheck = /^[-0-9a-zA-Z.-_]+@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(value);
        if (fcharS == false || lcharS == false) {
            customErrormsg = '-Something doesn\'t look right, please try again.';
            return false;
        } else if (emailCheck == false) {
            customErrormsg = 'Oops - the email entered is not in a valid format.';
            return false;
        } else {
            return true;
        }
    }
}, customError);

$.validator.addMethod('emailfooter', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        var vIndex = value.length;
        if (vIndex > 0) {
            var fchar = value.substring(0, 1);
            var lchar = value.substring(vIndex - 1);
            if (value.indexOf('@') != -1) {
                var splitval = value.split('@');
                fchar = splitval[0].substring(0, 1);
                lchar = splitval[0].substring(splitval[0].length - 1);
            }
            var fcharS = /^[a-zA-Z0-9]$/.test(fchar);
            var lcharS = /^[a-zA-Z0-9]$/.test(lchar);
            var emailCheck = /^[-0-9a-zA-Z.-_]+@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(value);
            if (fcharS == false || lcharS == false) {
                customErrormsg = 'Something doesn\'t look right, please try again.';
                return false;
            } else if (emailCheck == false) {
                customErrormsg = 'Oops - the email entered is not in a valid format.';
                return false;
            } else {
                return true;
            }
        } else {
            customErrormsg = 'Please enter your email address.';
        }
    }
}, customError);

$.validator.addMethod('accountemailconf', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        var vIndex = value.length;
        var fchar = value.substring(0, 1);
        var lchar = value.substring(vIndex - 1);
        if (value.indexOf('@') != -1) {
            var splitval = value.split('@');
            fchar = splitval[0].substring(0, 1);
            lchar = splitval[0].substring(splitval[0].length - 1);
        }
        var fcharS = /^[a-zA-Z0-9]$/.test(fchar);
        var lcharS = /^[a-zA-Z0-9]$/.test(lchar);
        var emailCheck = /^[-0-9a-zA-Z.-_]+@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(value);
        var emailVal = $('.accountemail').val();
        if ($(element).closest('form').length > 0 && $(element).closest('form').attr('id') == 'RegistrationForm') {
            emailVal = $(element).closest('form').find('.accountemail').val();
        }
        if (fcharS == false || lcharS == false) {
            customErrormsg = 'Something doesn\'t look right, please try again.';
            return false;
        } else if (emailCheck == false) {
            customErrormsg = 'Oops - the email entered is not in a valid format.';
            return false;
        } else if (emailVal != value) {
            customErrormsg = 'Please make sure emails match.';
            return false;
        } else {
            return true;
        }
    }
}, customError);

$.validator.addMethod('accountEmailConfirmation', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        var vIndex = value.length;
        var fchar = value.substring(0, 1);
        var lchar = value.substring(vIndex - 1);
        if (value.indexOf('@') != -1) {
            var splitval = value.split('@');
            fchar = splitval[0].substring(0, 1);
            lchar = splitval[0].substring(splitval[0].length - 1);
        }
        var fcharS = /^[a-zA-Z0-9]$/.test(fchar);
        var lcharS = /^[a-zA-Z0-9]$/.test(lchar);
        var emailCheck = /^[-0-9a-zA-Z.-_]+@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(value);
        var emailVal = $(element).closest('form').find('.accountemail').val();
        if (fcharS == false || lcharS == false) {
            customErrormsg = 'Something doesn\'t look right, please try again.';
            return false;
        } else if (emailCheck == false) {
            customErrormsg = 'Oops - the email entered is not in a valid format.';
            return false;
        } else if (emailVal != value) {
            customErrormsg = 'Please make sure emails match.';
            return false;
        } else {
            return true;
        }
    }
}, customError);
/**
 * Add positive number validation method to $ validation
 * plugin. Text fields must have 'positivenumber' css class to be
 * validated as positivenumber it validates a number and throws
 * error if it is below 0 or if it is not a number.
 */
$.validator.addMethod('positivenumber', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        if (value == '') {
            return true;
        }
        return (/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(value) && Number(value) >= 0
        );
    }
}, ''); // "" should be replaced with error message if needed

$.validator.addMethod('monthselect', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        var d = new Date(),
            mth = d.getMonth() + 1,
            yy = d.getFullYear();
        var selectedMth = $('.custom-select select[id$=\'_expiration_month\']').val();

        var selectedyear = $('.custom-select select[id$=\'_expiration_year\']').val();

        if (selectedyear) {
            selectedyear = selectedyear.replace(',', '');
            if (selectedyear <= yy && selectedMth < mth) {
                return false;
            } else {
                return true;
            }
        }
    }
}, '');

$.validator.addMethod('yearselect', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        var d = new Date(),
            mth = d.getMonth() + 1,
            yy = d.getFullYear();
        var selectedMth = $('.custom-select select[id$=\'_expiration_month\']').val();

        var selectedyear = $('.custom-select select[id$=\'_expiration_year\']').val();

        if (selectedyear) {
            selectedyear = selectedyear.replace(',', '');
            if (selectedyear <= yy && selectedMth < mth) {
                return false;
            } else {
                return true;
            }
        }
    }
}, '');

// register form validator for form elements
// except for those which are marked "suppress"
$.each($('form:not(.suppress)'), function () {
    $(this).validate(settings);
});
/**
 * @function
 * @description Validates a given phone number against the countries phone regex
 * @param {String} value The phone number which will be validated
 * @param {String} el The input field
 */
/*var validatePhone = function (value, el) {
    var country = $(el).closest('form').find('.country');
    if (country.length === 0 || country.val().length === 0 || !regex.phone[country.val().toLowerCase()]) {
        return true;
    }

    var rgx = regex.phone[country.val().toLowerCase()];
    var isOptional = this.optional(el);
    var isValid = rgx.test($.trim(value));

    return isOptional || isValid;
};*/

/**
 * @function
 * @description Validates that a credit card owner is not a Credit card number
 * @param {String} value The owner field which will be validated
 * @param {String} el The input field
 */
/*var validateOwner = function (value) {
    var isValid = regex.notCC.test($.trim(value));
    return isValid;
};
*/
/**
 * Add phone validation method to $ validation plugin.
 * Text fields must have 'phone' css class to be validated as phone
 */
/*$.validator.addMethod('phone', validatePhone, Resources.INVALID_PHONE);*/

/**
 * Add CCOwner validation method to $ validation plugin.
 * Text fields must have 'owner' css class to be validated as not a credit card
 */
/*$.validator.addMethod('owner', validateOwner, Resources.INVALID_OWNER);*/

/**
 * Add gift cert amount validation method to $ validation plugin.
 * Text fields must have 'gift-cert-amont' css class to be validated
 */
$.validator.addMethod('gift-cert-amount', function (value, el) {
    var isOptional = this.optional(el);
    var isValid = !isNaN(value) && parseFloat(value) >= 5 && parseFloat(value) <= 5000;
    return isOptional || isValid;
}, Resources.GIFT_CERT_AMOUNT_INVALID);

/**
 * Add positive number validation method to $ validation plugin.
 * Text fields must have 'positivenumber' css class to be validated as positivenumber
 */
/*$.validator.addMethod('positivenumber', function (value) {
    if ($.trim(value).length === 0) { return true; }
    return (!isNaN(value) && Number(value) >= 0);
}, ''); // '' should be replaced with error message if needed
*/
/*Start JIRA PREV-77 : Zip code validation is not happening with respect to the State/Country.*/
/*function validateZip(value, el) {
    var country = $(el).closest('form').find('.country');
    if (country.length === 0 || country.val().length === 0 || !regex.postal[country.val().toLowerCase()]) {
        return true;
    }
    var isOptional = this.optional(el);
    var isValid = regex.postal[country.val().toLowerCase()].test($.trim(value));
    return isOptional || isValid;
}
$.validator.addMethod('postal', validateZip, Resources.INVALID_ZIP);*/
/*End JIRA PREV-77*/

$.extend($.validator.messages, {
    //required: Resources.VALIDATE_REQUIRED,
    remote: Resources.VALIDATE_REMOTE,
    email: Resources.VALIDATE_EMAIL,
    url: Resources.VALIDATE_URL,
    date: Resources.VALIDATE_DATE,
    dateISO: Resources.VALIDATE_DATEISO,
    number: Resources.VALIDATE_NUMBER,
    digits: Resources.VALIDATE_DIGITS,
    creditcard: Resources.VALIDATE_CREDITCARD,
    equalTo: Resources.VALIDATE_EQUALTO,
    maxlength: $.validator.format(Resources.VALIDATE_MAXLENGTH),
    minlength: $.validator.format(Resources.VALIDATE_MINLENGTH),
    rangelength: $.validator.format(Resources.VALIDATE_RANGELENGTH),
    range: $.validator.format(Resources.VALIDATE_RANGE),
    max: $.validator.format(Resources.VALIDATE_MAX),
    min: $.validator.format(Resources.VALIDATE_MIN)
});

var validator = {
    regex: regex,
    settings: settings,
    init: function init() {
        var self = this;
        $('form:not(.suppress)').each(function () {
            $(this).validate(self.settings);
        });
        validator.phoneValidation();
        validator.zipFormatter();
    },
    initForm: function initForm(f) {
        $(f).validate(this.settings);
    },
    phoneValidation: function phoneValidation() {
        // phone validation
        var isFirefox = navigator.userAgent.indexOf('Firefox') > -1;
        var isExplorer = navigator.userAgent.indexOf('MSIE') > -1;
        if (isFirefox || isExplorer) {
            $('input[name$=\'phone\']').bind('keyup keydown', function (e) {
                if (e.shiftKey || e.ctrlKey || e.altKey) {
                    e.preventDefault();
                } else {
                    var key = e.keyCode;
                    if (!(key == 8 || key == 9 || key == 46 || key >= 35 && key <= 40 || key >= 48 && key <= 57 || key >= 96 && key <= 105)) {
                        e.preventDefault();
                    }
                }
                //var curchr = $(this).val().length;
                var curval = $(this).val();

                var curval1 = curval.replace(/[A-Za-z` ~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi, '');
                var str1 = curval1.substring(0, 3);
                var str2 = curval1.substring(3, 6);
                var str3 = curval1.substring(6, 10);

                if (curval.indexOf('(') == -1 && curval.indexOf(')') == -1 && curval1.length == 3) {
                    $(this).val('(' + str1 + ') ');
                } else if (curval.indexOf('(') != -1 && curval.indexOf(')') == -1 && curval1.length == 4) {
                    $(this).val('(' + str1 + ') ' + str2);
                } else if (curval.indexOf('(') != -1 && curval.indexOf(')') != -1 && curval.indexOf(' ') == -1 && curval1.length == 6) {
                    $(this).val('(' + str1 + ') ' + str2);
                } else if (curval.indexOf('(') != -1 && curval.indexOf(')') != -1 && curval.indexOf(' ') != -1 && curval.indexOf('-') == -1 && curval1.length > 6) {
                    $(this).val('(' + str1 + ') ' + str2 + '-' + str3);
                }
                if (curval.length == 0) {
                    $(this).val('');
                }
            });
        } else {
            $('body').on('change input keyup', 'input[name$=\'phone\']', function (e) {
                //var curchr = $(this).val().length;
                $(this).val(this.value.replace(/[^\d]/g, ''));
                var curval = $(this).val();

                var curval1 = curval;
                var str1 = curval1.substring(0, 3);
                var str2 = curval1.substring(3, 6);
                var str3 = curval1.substring(6, 10);
                var key = event.which || event.keyCode || event.charCode;

                if (key == 8 || e.shiftKey || e.ctrlKey || e.altKey) {
                    e.preventDefault();
                    if (curval1.length == 4 || curval1.length == 5 || curval1.length == 6) {
                        $(this).val('(' + str1 + ') ' + str2);
                    } else if (curval1.length > 6) {
                        $(this).val('(' + str1 + ') ' + str2 + '-' + str3);
                    }
                } else {
                    if (curval1.length == 3) {
                        $(this).val('(' + str1 + ') ');
                    } else if (curval1.length == 4 || curval1.length == 5 || curval1.length == 6) {
                        $(this).val('(' + str1 + ') ' + str2);
                    } else if (curval1.length > 6) {
                        $(this).val('(' + str1 + ') ' + str2 + '-' + str3);
                    }
                    if (curval.length == 0) {
                        $(this).val('');
                    }
                }
            });
        }

        /* $("input[name$='phone']").blur(function (e) {
             $(this).val(this.value.replace(/[A-Za-z` ~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi, ''));
                 var curval = $(this).val();
                 var str1 = curval.substring(0, 3);
                 var str2 = curval.substring(3, 6);
                 var str3 = curval.substring(6, 10);
                 if(curval.length <= 3 && curval.length > 0){
                     $(this).val( "(" + str1 + ") ");
                 }
                 else  if(curval.length <= 6 && curval.length > 3){
                     $(this).val( "(" + str1 + ") " + str2 );
                 }
                 else  if(curval.length <= 10 && curval.length > 6){
                     $(this).val( "(" + str1 + ") " + str2 + "-" + str3);
                 }
         });*/
    },
    zipFormatter: function zipFormatter() {
        $('body').on('change input', 'input[name$=\'postal\'], input[name$=\'zip\']', function () {
            $(this).val(this.value.replace(/[^\d]/g, ''));
            var curval = $(this).val();
            if (curval.length > 5) {
                $(this).val(curval.substring(0, 5) + '-' + curval.substring(5, 9));
            }
        });
    }
};
module.exports = validator;

},{}]},{},[16])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvYXNhcC9icm93c2VyLWFzYXAuanMiLCJub2RlX21vZHVsZXMvYXNhcC9icm93c2VyLXJhdy5qcyIsIm5vZGVfbW9kdWxlcy9ldi1lbWl0dGVyL2V2LWVtaXR0ZXIuanMiLCJub2RlX21vZHVsZXMvaW1hZ2VzbG9hZGVkL2ltYWdlc2xvYWRlZC5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW5kZXguanMiLCJub2RlX21vZHVsZXMvcHJvbWlzZS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9wcm9taXNlL2xpYi9jb3JlLmpzIiwibm9kZV9tb2R1bGVzL3Byb21pc2UvbGliL2RvbmUuanMiLCJub2RlX21vZHVsZXMvcHJvbWlzZS9saWIvZXM2LWV4dGVuc2lvbnMuanMiLCJub2RlX21vZHVsZXMvcHJvbWlzZS9saWIvZmluYWxseS5qcyIsIm5vZGVfbW9kdWxlcy9wcm9taXNlL2xpYi9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9wcm9taXNlL2xpYi9ub2RlLWV4dGVuc2lvbnMuanMiLCJub2RlX21vZHVsZXMvcHJvbWlzZS9saWIvc3luY2hyb25vdXMuanMiLCJ0ZW1wLXJhcGFsYS9hZGRyZXNzdmFsaWRhdGlvbi5qcyIsInRlbXAtcmFwYWxhL2FqYXguanMiLCJ0ZW1wLXJhcGFsYS9hcHAuanMiLCJ0ZW1wLXJhcGFsYS9ib251cy1wcm9kdWN0cy12aWV3LmpzIiwidGVtcC1yYXBhbGEvYnJvd3NlcmEuanMiLCJ0ZW1wLXJhcGFsYS9jYXB0Y2hhLmpzIiwidGVtcC1yYXBhbGEvY29tcGFyZS13aWRnZXQuanMiLCJ0ZW1wLXJhcGFsYS9jb29raWVwcml2YWN5LmpzIiwidGVtcC1yYXBhbGEvY291bnRyaWVzLmpzIiwidGVtcC1yYXBhbGEvZGlhbG9nLmpzIiwidGVtcC1yYXBhbGEvZGlhbG9naWZ5LmpzIiwidGVtcC1yYXBhbGEvZ2lmdGNlcnQuanMiLCJ0ZW1wLXJhcGFsYS9oZWFkZXJpbml0LmpzIiwidGVtcC1yYXBhbGEvanF1ZXJ5LWV4dC5qcyIsInRlbXAtcmFwYWxhL21lZ2FtZW51LmpzIiwidGVtcC1yYXBhbGEvbWluaWNhcnQuanMiLCJ0ZW1wLXJhcGFsYS9wYWdlLmpzIiwidGVtcC1yYXBhbGEvcGFnZXMvYWNjb3VudC5qcyIsInRlbXAtcmFwYWxhL3BhZ2VzL2Jsb2cvaW5kZXguanMiLCJ0ZW1wLXJhcGFsYS9wYWdlcy9jYXJ0LmpzIiwidGVtcC1yYXBhbGEvcGFnZXMvY2hlY2tvdXQvYWRkcmVzcy5qcyIsInRlbXAtcmFwYWxhL3BhZ2VzL2NoZWNrb3V0L2JpbGxpbmcuanMiLCJ0ZW1wLXJhcGFsYS9wYWdlcy9jaGVja291dC9mb3JtUHJlcGFyZS5qcyIsInRlbXAtcmFwYWxhL3BhZ2VzL2NoZWNrb3V0L2luZGV4LmpzIiwidGVtcC1yYXBhbGEvcGFnZXMvY2hlY2tvdXQvbXVsdGlzaGlwLmpzIiwidGVtcC1yYXBhbGEvcGFnZXMvY2hlY2tvdXQvc2hpcHBpbmcuanMiLCJ0ZW1wLXJhcGFsYS9wYWdlcy9jb21wYXJlLmpzIiwidGVtcC1yYXBhbGEvcGFnZXMvaW50ZXJuYXRpb25hbC5qcyIsInRlbXAtcmFwYWxhL3BhZ2VzL3Byb2R1Y3QvYWRkVG9DYXJ0LmpzIiwidGVtcC1yYXBhbGEvcGFnZXMvcHJvZHVjdC9pbmRleC5qcyIsInRlbXAtcmFwYWxhL3BhZ2VzL3Byb2R1Y3QvcGRwRXZlbnRzLmpzIiwidGVtcC1yYXBhbGEvcGFnZXMvcmFwYWxhaW5zaWRlci5qcyIsInRlbXAtcmFwYWxhL3BhZ2VzL3JlZ2lzdHJ5LmpzIiwidGVtcC1yYXBhbGEvcGFnZXMvc2VhcmNoLmpzIiwidGVtcC1yYXBhbGEvcGFnZXMvc3RvcmVmcm9udC5qcyIsInRlbXAtcmFwYWxhL3BhZ2VzL3N0b3JlbG9jYXRvci5qcyIsInRlbXAtcmFwYWxhL3BhZ2VzL3dpc2hsaXN0LmpzIiwidGVtcC1yYXBhbGEvcHJvZHVjdC10aWxlLmpzIiwidGVtcC1yYXBhbGEvcHJvZ3Jlc3MuanMiLCJ0ZW1wLXJhcGFsYS9xdWlja3ZpZXctYXNzZXQuanMiLCJ0ZW1wLXJhcGFsYS9xdWlja3ZpZXcuanMiLCJ0ZW1wLXJhcGFsYS9zZWFyY2hwbGFjZWhvbGRlci5qcyIsInRlbXAtcmFwYWxhL3NlYXJjaHN1Z2dlc3QuanMiLCJ0ZW1wLXJhcGFsYS9zdG9yZWludmVudG9yeS9jYXJ0LmpzIiwidGVtcC1yYXBhbGEvc3RvcmVpbnZlbnRvcnkvaW5kZXguanMiLCJ0ZW1wLXJhcGFsYS90YWdtYW5hZ2VyLmpzIiwidGVtcC1yYXBhbGEvdGxzLmpzIiwidGVtcC1yYXBhbGEvdG9vbHRpcC5qcyIsInRlbXAtcmFwYWxhL3VpZXZlbnRzLmpzIiwidGVtcC1yYXBhbGEvdXRpbC5qcyIsInRlbXAtcmFwYWxhL3ZhbGlkYXRvci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNsRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQy9OQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3pYQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQy9qWUE7QUFDQTtBQUNBO0FBQ0E7O0FDSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDck5BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDYkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QVEsR0FBUixDQUFZLEVBQVo7QUFDSDtBQUNKO0FBQ0osYUE5QkQ7QUErQkg7O0FBRUQ7Ozs7Ozs7Ozs7Ozs7Ozs7QUFpQkgsS0FwR1c7QUFxR1osa0JBQWMsd0JBQVk7QUFDdEIsVUFBRSxNQUFGLEVBQVUsRUFBVixDQUFhLGNBQWIsRUFBNkIsK0NBQTdCLEVBQThFLFlBQVk7QUFDdEYsY0FBRSxJQUFGLEVBQVEsR0FBUixDQUFZLEtBQUssS0FBTCxDQUFXLE9BQVgsQ0FBbUIsUUFBbkIsRUFBNkIsRUFBN0IsQ0FBWjtBQUNBLGdCQUFJLFNBQVMsRUFBRSxJQUFGLEVBQVEsR0FBUixFQUFiO0FBQ0EsZ0JBQUksT0FBTyxNQUFQLEdBQWdCLENBQXBCLEVBQXVCO0FBQ25CLGtCQUFFLElBQUYsRUFBUSxHQUFSLENBQVksT0FBTyxTQUFQLENBQWlCLENBQWpCLEVBQW9CLENBQXBCLElBQXlCLEdBQXpCLEdBQStCLE9BQU8sU0FBUCxDQUFpQixDQUFqQixFQUFvQixDQUFwQixDQUEzQztBQUNIO0FBQ0osU0FORDtBQU9IO0FBN0dXLENBQWhCO0FBK0dBLE9BQU8sT0FBUCxHQUFpQixTQUFqQiIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJcInVzZSBzdHJpY3RcIjtcblxuLy8gcmF3QXNhcCBwcm92aWRlcyBldmVyeXRoaW5nIHdlIG5lZWQgZXhjZXB0IGV4Y2VwdGlvbiBtYW5hZ2VtZW50LlxudmFyIHJhd0FzYXAgPSByZXF1aXJlKFwiLi9yYXdcIik7XG4vLyBSYXdUYXNrcyBhcmUgcmVjeWNsZWQgdG8gcmVkdWNlIEdDIGNodXJuLlxudmFyIGZyZWVUYXNrcyA9IFtdO1xuLy8gV2UgcXVldWUgZXJyb3JzIHRvIGVuc3VyZSB0aGV5IGFyZSB0aHJvd24gaW4gcmlnaHQgb3JkZXIgKEZJRk8pLlxuLy8gQXJyYXktYXMtcXVldWUgaXMgZ29vZCBlbm91Z2ggaGVyZSwgc2luY2Ugd2UgYXJlIGp1c3QgZGVhbGluZyB3aXRoIGV4Y2VwdGlvbnMuXG52YXIgcGVuZGluZ0Vycm9ycyA9IFtdO1xudmFyIHJlcXVlc3RFcnJvclRocm93ID0gcmF3QXNhcC5tYWtlUmVxdWVzdENhbGxGcm9tVGltZXIodGhyb3dGaXJzdEVycm9yKTtcblxuZnVuY3Rpb24gdGhyb3dGaXJzdEVycm9yKCkge1xuICAgIGlmIChwZW5kaW5nRXJyb3JzLmxlbmd0aCkge1xuICAgICAgICB0aHJvdyBwZW5kaW5nRXJyb3JzLnNoaWZ0KCk7XG4gICAgfVxufVxuXG4vKipcbiAqIENhbGxzIGEgdGFzayBhcyBzb29uIGFzIHBvc3NpYmxlIGFmdGVyIHJldHVybmluZywgaW4gaXRzIG93biBldmVudCwgd2l0aCBwcmlvcml0eVxuICogb3ZlciBvdGhlciBldmVudHMgbGlrZSBhbmltYXRpb24sIHJlZmxvdywgYW5kIHJlcGFpbnQuIEFuIGVycm9yIHRocm93biBmcm9tIGFuXG4gKiBldmVudCB3aWxsIG5vdCBpbnRlcnJ1cHQsIG5vciBldmVuIHN1YnN0YW50aWFsbHkgc2xvdyBkb3duIHRoZSBwcm9jZXNzaW5nIG9mXG4gKiBvdGhlciBldmVudHMsIGJ1dCB3aWxsIGJlIHJhdGhlciBwb3N0cG9uZWQgdG8gYSBsb3dlciBwcmlvcml0eSBldmVudC5cbiAqIEBwYXJhbSB7e2NhbGx9fSB0YXNrIEEgY2FsbGFibGUgb2JqZWN0LCB0eXBpY2FsbHkgYSBmdW5jdGlvbiB0aGF0IHRha2VzIG5vXG4gKiBhcmd1bWVudHMuXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gYXNhcDtcbmZ1bmN0aW9uIGFzYXAodGFzaykge1xuICAgIHZhciByYXdUYXNrO1xuICAgIGlmIChmcmVlVGFza3MubGVuZ3RoKSB7XG4gICAgICAgIHJhd1Rhc2sgPSBmcmVlVGFza3MucG9wKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmF3VGFzayA9IG5ldyBSYXdUYXNrKCk7XG4gICAgfVxuICAgIHJhd1Rhc2sudGFzayA9IHRhc2s7XG4gICAgcmF3QXNhcChyYXdUYXNrKTtcbn1cblxuLy8gV2Ugd3JhcCB0YXNrcyB3aXRoIHJlY3ljbGFibGUgdGFzayBvYmplY3RzLiAgQSB0YXNrIG9iamVjdCBpbXBsZW1lbnRzXG4vLyBgY2FsbGAsIGp1c3QgbGlrZSBhIGZ1bmN0aW9uLlxuZnVuY3Rpb24gUmF3VGFzaygpIHtcbiAgICB0aGlzLnRhc2sgPSBudWxsO1xufVxuXG4vLyBUaGUgc29sZSBwdXJwb3NlIG9mIHdyYXBwaW5nIHRoZSB0YXNrIGlzIHRvIGNhdGNoIHRoZSBleGNlcHRpb24gYW5kIHJlY3ljbGVcbi8vIHRoZSB0YXNrIG9iamVjdCBhZnRlciBpdHMgc2luZ2xlIHVzZS5cblJhd1Rhc2sucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgdGhpcy50YXNrLmNhbGwoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBpZiAoYXNhcC5vbmVycm9yKSB7XG4gICAgICAgICAgICAvLyBUaGlzIGhvb2sgZXhpc3RzIHB1cmVseSBmb3IgdGVzdGluZyBwdXJwb3Nlcy5cbiAgICAgICAgICAgIC8vIEl0cyBuYW1lIHdpbGwgYmUgcGVyaW9kaWNhbGx5IHJhbmRvbWl6ZWQgdG8gYnJlYWsgYW55IGNvZGUgdGhhdFxuICAgICAgICAgICAgLy8gZGVwZW5kcyBvbiBpdHMgZXhpc3RlbmNlLlxuICAgICAgICAgICAgYXNhcC5vbmVycm9yKGVycm9yKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEluIGEgd2ViIGJyb3dzZXIsIGV4Y2VwdGlvbnMgYXJlIG5vdCBmYXRhbC4gSG93ZXZlciwgdG8gYXZvaWRcbiAgICAgICAgICAgIC8vIHNsb3dpbmcgZG93biB0aGUgcXVldWUgb2YgcGVuZGluZyB0YXNrcywgd2UgcmV0aHJvdyB0aGUgZXJyb3IgaW4gYVxuICAgICAgICAgICAgLy8gbG93ZXIgcHJpb3JpdHkgdHVybi5cbiAgICAgICAgICAgIHBlbmRpbmdFcnJvcnMucHVzaChlcnJvcik7XG4gICAgICAgICAgICByZXF1ZXN0RXJyb3JUaHJvdygpO1xuICAgICAgICB9XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgICAgdGhpcy50YXNrID0gbnVsbDtcbiAgICAgICAgZnJlZVRhc2tzW2ZyZWVUYXNrcy5sZW5ndGhdID0gdGhpcztcbiAgICB9XG59O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8vIFVzZSB0aGUgZmFzdGVzdCBtZWFucyBwb3NzaWJsZSB0byBleGVjdXRlIGEgdGFzayBpbiBpdHMgb3duIHR1cm4sIHdpdGhcbi8vIHByaW9yaXR5IG92ZXIgb3RoZXIgZXZlbnRzIGluY2x1ZGluZyBJTywgYW5pbWF0aW9uLCByZWZsb3csIGFuZCByZWRyYXdcbi8vIGV2ZW50cyBpbiBicm93c2Vycy5cbi8vXG4vLyBBbiBleGNlcHRpb24gdGhyb3duIGJ5IGEgdGFzayB3aWxsIHBlcm1hbmVudGx5IGludGVycnVwdCB0aGUgcHJvY2Vzc2luZyBvZlxuLy8gc3Vic2VxdWVudCB0YXNrcy4gVGhlIGhpZ2hlciBsZXZlbCBgYXNhcGAgZnVuY3Rpb24gZW5zdXJlcyB0aGF0IGlmIGFuXG4vLyBleGNlcHRpb24gaXMgdGhyb3duIGJ5IGEgdGFzaywgdGhhdCB0aGUgdGFzayBxdWV1ZSB3aWxsIGNvbnRpbnVlIGZsdXNoaW5nIGFzXG4vLyBzb29uIGFzIHBvc3NpYmxlLCBidXQgaWYgeW91IHVzZSBgcmF3QXNhcGAgZGlyZWN0bHksIHlvdSBhcmUgcmVzcG9uc2libGUgdG9cbi8vIGVpdGhlciBlbnN1cmUgdGhhdCBubyBleGNlcHRpb25zIGFyZSB0aHJvd24gZnJvbSB5b3VyIHRhc2ssIG9yIHRvIG1hbnVhbGx5XG4vLyBjYWxsIGByYXdBc2FwLnJlcXVlc3RGbHVzaGAgaWYgYW4gZXhjZXB0aW9uIGlzIHRocm93bi5cbm1vZHVsZS5leHBvcnRzID0gcmF3QXNhcDtcbmZ1bmN0aW9uIHJhd0FzYXAodGFzaykge1xuICAgIGlmICghcXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHJlcXVlc3RGbHVzaCgpO1xuICAgICAgICBmbHVzaGluZyA9IHRydWU7XG4gICAgfVxuICAgIC8vIEVxdWl2YWxlbnQgdG8gcHVzaCwgYnV0IGF2b2lkcyBhIGZ1bmN0aW9uIGNhbGwuXG4gICAgcXVldWVbcXVldWUubGVuZ3RoXSA9IHRhc2s7XG59XG5cbnZhciBxdWV1ZSA9IFtdO1xuLy8gT25jZSBhIGZsdXNoIGhhcyBiZWVuIHJlcXVlc3RlZCwgbm8gZnVydGhlciBjYWxscyB0byBgcmVxdWVzdEZsdXNoYCBhcmVcbi8vIG5lY2Vzc2FyeSB1bnRpbCB0aGUgbmV4dCBgZmx1c2hgIGNvbXBsZXRlcy5cbnZhciBmbHVzaGluZyA9IGZhbHNlO1xuLy8gYHJlcXVlc3RGbHVzaGAgaXMgYW4gaW1wbGVtZW50YXRpb24tc3BlY2lmaWMgbWV0aG9kIHRoYXQgYXR0ZW1wdHMgdG8ga2lja1xuLy8gb2ZmIGEgYGZsdXNoYCBldmVudCBhcyBxdWlja2x5IGFzIHBvc3NpYmxlLiBgZmx1c2hgIHdpbGwgYXR0ZW1wdCB0byBleGhhdXN0XG4vLyB0aGUgZXZlbnQgcXVldWUgYmVmb3JlIHlpZWxkaW5nIHRvIHRoZSBicm93c2VyJ3Mgb3duIGV2ZW50IGxvb3AuXG52YXIgcmVxdWVzdEZsdXNoO1xuLy8gVGhlIHBvc2l0aW9uIG9mIHRoZSBuZXh0IHRhc2sgdG8gZXhlY3V0ZSBpbiB0aGUgdGFzayBxdWV1ZS4gVGhpcyBpc1xuLy8gcHJlc2VydmVkIGJldHdlZW4gY2FsbHMgdG8gYGZsdXNoYCBzbyB0aGF0IGl0IGNhbiBiZSByZXN1bWVkIGlmXG4vLyBhIHRhc2sgdGhyb3dzIGFuIGV4Y2VwdGlvbi5cbnZhciBpbmRleCA9IDA7XG4vLyBJZiBhIHRhc2sgc2NoZWR1bGVzIGFkZGl0aW9uYWwgdGFza3MgcmVjdXJzaXZlbHksIHRoZSB0YXNrIHF1ZXVlIGNhbiBncm93XG4vLyB1bmJvdW5kZWQuIFRvIHByZXZlbnQgbWVtb3J5IGV4aGF1c3Rpb24sIHRoZSB0YXNrIHF1ZXVlIHdpbGwgcGVyaW9kaWNhbGx5XG4vLyB0cnVuY2F0ZSBhbHJlYWR5LWNvbXBsZXRlZCB0YXNrcy5cbnZhciBjYXBhY2l0eSA9IDEwMjQ7XG5cbi8vIFRoZSBmbHVzaCBmdW5jdGlvbiBwcm9jZXNzZXMgYWxsIHRhc2tzIHRoYXQgaGF2ZSBiZWVuIHNjaGVkdWxlZCB3aXRoXG4vLyBgcmF3QXNhcGAgdW5sZXNzIGFuZCB1bnRpbCBvbmUgb2YgdGhvc2UgdGFza3MgdGhyb3dzIGFuIGV4Y2VwdGlvbi5cbi8vIElmIGEgdGFzayB0aHJvd3MgYW4gZXhjZXB0aW9uLCBgZmx1c2hgIGVuc3VyZXMgdGhhdCBpdHMgc3RhdGUgd2lsbCByZW1haW5cbi8vIGNvbnNpc3RlbnQgYW5kIHdpbGwgcmVzdW1lIHdoZXJlIGl0IGxlZnQgb2ZmIHdoZW4gY2FsbGVkIGFnYWluLlxuLy8gSG93ZXZlciwgYGZsdXNoYCBkb2VzIG5vdCBtYWtlIGFueSBhcnJhbmdlbWVudHMgdG8gYmUgY2FsbGVkIGFnYWluIGlmIGFuXG4vLyBleGNlcHRpb24gaXMgdGhyb3duLlxuZnVuY3Rpb24gZmx1c2goKSB7XG4gICAgd2hpbGUgKGluZGV4IDwgcXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHZhciBjdXJyZW50SW5kZXggPSBpbmRleDtcbiAgICAgICAgLy8gQWR2YW5jZSB0aGUgaW5kZXggYmVmb3JlIGNhbGxpbmcgdGhlIHRhc2suIFRoaXMgZW5zdXJlcyB0aGF0IHdlIHdpbGxcbiAgICAgICAgLy8gYmVnaW4gZmx1c2hpbmcgb24gdGhlIG5leHQgdGFzayB0aGUgdGFzayB0aHJvd3MgYW4gZXJyb3IuXG4gICAgICAgIGluZGV4ID0gaW5kZXggKyAxO1xuICAgICAgICBxdWV1ZVtjdXJyZW50SW5kZXhdLmNhbGwoKTtcbiAgICAgICAgLy8gUHJldmVudCBsZWFraW5nIG1lbW9yeSBmb3IgbG9uZyBjaGFpbnMgb2YgcmVjdXJzaXZlIGNhbGxzIHRvIGBhc2FwYC5cbiAgICAgICAgLy8gSWYgd2UgY2FsbCBgYXNhcGAgd2l0aGluIHRhc2tzIHNjaGVkdWxlZCBieSBgYXNhcGAsIHRoZSBxdWV1ZSB3aWxsXG4gICAgICAgIC8vIGdyb3csIGJ1dCB0byBhdm9pZCBhbiBPKG4pIHdhbGsgZm9yIGV2ZXJ5IHRhc2sgd2UgZXhlY3V0ZSwgd2UgZG9uJ3RcbiAgICAgICAgLy8gc2hpZnQgdGFza3Mgb2ZmIHRoZSBxdWV1ZSBhZnRlciB0aGV5IGhhdmUgYmVlbiBleGVjdXRlZC5cbiAgICAgICAgLy8gSW5zdGVhZCwgd2UgcGVyaW9kaWNhbGx5IHNoaWZ0IDEwMjQgdGFza3Mgb2ZmIHRoZSBxdWV1ZS5cbiAgICAgICAgaWYgKGluZGV4ID4gY2FwYWNpdHkpIHtcbiAgICAgICAgICAgIC8vIE1hbnVhbGx5IHNoaWZ0IGFsbCB2YWx1ZXMgc3RhcnRpbmcgYXQgdGhlIGluZGV4IGJhY2sgdG8gdGhlXG4gICAgICAgICAgICAvLyBiZWdpbm5pbmcgb2YgdGhlIHF1ZXVlLlxuICAgICAgICAgICAgZm9yICh2YXIgc2NhbiA9IDAsIG5ld0xlbmd0aCA9IHF1ZXVlLmxlbmd0aCAtIGluZGV4OyBzY2FuIDwgbmV3TGVuZ3RoOyBzY2FuKyspIHtcbiAgICAgICAgICAgICAgICBxdWV1ZVtzY2FuXSA9IHF1ZXVlW3NjYW4gKyBpbmRleF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBxdWV1ZS5sZW5ndGggLT0gaW5kZXg7XG4gICAgICAgICAgICBpbmRleCA9IDA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUubGVuZ3RoID0gMDtcbiAgICBpbmRleCA9IDA7XG4gICAgZmx1c2hpbmcgPSBmYWxzZTtcbn1cblxuLy8gYHJlcXVlc3RGbHVzaGAgaXMgaW1wbGVtZW50ZWQgdXNpbmcgYSBzdHJhdGVneSBiYXNlZCBvbiBkYXRhIGNvbGxlY3RlZCBmcm9tXG4vLyBldmVyeSBhdmFpbGFibGUgU2F1Y2VMYWJzIFNlbGVuaXVtIHdlYiBkcml2ZXIgd29ya2VyIGF0IHRpbWUgb2Ygd3JpdGluZy5cbi8vIGh0dHBzOi8vZG9jcy5nb29nbGUuY29tL3NwcmVhZHNoZWV0cy9kLzFtRy01VVlHdXA1cXhHZEVNV2toUDZCV0N6MDUzTlViMkUxUW9VVFUxNnVBL2VkaXQjZ2lkPTc4MzcyNDU5M1xuXG4vLyBTYWZhcmkgNiBhbmQgNi4xIGZvciBkZXNrdG9wLCBpUGFkLCBhbmQgaVBob25lIGFyZSB0aGUgb25seSBicm93c2VycyB0aGF0XG4vLyBoYXZlIFdlYktpdE11dGF0aW9uT2JzZXJ2ZXIgYnV0IG5vdCB1bi1wcmVmaXhlZCBNdXRhdGlvbk9ic2VydmVyLlxuLy8gTXVzdCB1c2UgYGdsb2JhbGAgb3IgYHNlbGZgIGluc3RlYWQgb2YgYHdpbmRvd2AgdG8gd29yayBpbiBib3RoIGZyYW1lcyBhbmQgd2ViXG4vLyB3b3JrZXJzLiBgZ2xvYmFsYCBpcyBhIHByb3Zpc2lvbiBvZiBCcm93c2VyaWZ5LCBNciwgTXJzLCBvciBNb3AuXG5cbi8qIGdsb2JhbHMgc2VsZiAqL1xudmFyIHNjb3BlID0gdHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbCA6IHNlbGY7XG52YXIgQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIgPSBzY29wZS5NdXRhdGlvbk9ic2VydmVyIHx8IHNjb3BlLldlYktpdE11dGF0aW9uT2JzZXJ2ZXI7XG5cbi8vIE11dGF0aW9uT2JzZXJ2ZXJzIGFyZSBkZXNpcmFibGUgYmVjYXVzZSB0aGV5IGhhdmUgaGlnaCBwcmlvcml0eSBhbmQgd29ya1xuLy8gcmVsaWFibHkgZXZlcnl3aGVyZSB0aGV5IGFyZSBpbXBsZW1lbnRlZC5cbi8vIFRoZXkgYXJlIGltcGxlbWVudGVkIGluIGFsbCBtb2Rlcm4gYnJvd3NlcnMuXG4vL1xuLy8gLSBBbmRyb2lkIDQtNC4zXG4vLyAtIENocm9tZSAyNi0zNFxuLy8gLSBGaXJlZm94IDE0LTI5XG4vLyAtIEludGVybmV0IEV4cGxvcmVyIDExXG4vLyAtIGlQYWQgU2FmYXJpIDYtNy4xXG4vLyAtIGlQaG9uZSBTYWZhcmkgNy03LjFcbi8vIC0gU2FmYXJpIDYtN1xuaWYgKHR5cGVvZiBCcm93c2VyTXV0YXRpb25PYnNlcnZlciA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgcmVxdWVzdEZsdXNoID0gbWFrZVJlcXVlc3RDYWxsRnJvbU11dGF0aW9uT2JzZXJ2ZXIoZmx1c2gpO1xuXG4vLyBNZXNzYWdlQ2hhbm5lbHMgYXJlIGRlc2lyYWJsZSBiZWNhdXNlIHRoZXkgZ2l2ZSBkaXJlY3QgYWNjZXNzIHRvIHRoZSBIVE1MXG4vLyB0YXNrIHF1ZXVlLCBhcmUgaW1wbGVtZW50ZWQgaW4gSW50ZXJuZXQgRXhwbG9yZXIgMTAsIFNhZmFyaSA1LjAtMSwgYW5kIE9wZXJhXG4vLyAxMS0xMiwgYW5kIGluIHdlYiB3b3JrZXJzIGluIG1hbnkgZW5naW5lcy5cbi8vIEFsdGhvdWdoIG1lc3NhZ2UgY2hhbm5lbHMgeWllbGQgdG8gYW55IHF1ZXVlZCByZW5kZXJpbmcgYW5kIElPIHRhc2tzLCB0aGV5XG4vLyB3b3VsZCBiZSBiZXR0ZXIgdGhhbiBpbXBvc2luZyB0aGUgNG1zIGRlbGF5IG9mIHRpbWVycy5cbi8vIEhvd2V2ZXIsIHRoZXkgZG8gbm90IHdvcmsgcmVsaWFibHkgaW4gSW50ZXJuZXQgRXhwbG9yZXIgb3IgU2FmYXJpLlxuXG4vLyBJbnRlcm5ldCBFeHBsb3JlciAxMCBpcyB0aGUgb25seSBicm93c2VyIHRoYXQgaGFzIHNldEltbWVkaWF0ZSBidXQgZG9lc1xuLy8gbm90IGhhdmUgTXV0YXRpb25PYnNlcnZlcnMuXG4vLyBBbHRob3VnaCBzZXRJbW1lZGlhdGUgeWllbGRzIHRvIHRoZSBicm93c2VyJ3MgcmVuZGVyZXIsIGl0IHdvdWxkIGJlXG4vLyBwcmVmZXJyYWJsZSB0byBmYWxsaW5nIGJhY2sgdG8gc2V0VGltZW91dCBzaW5jZSBpdCBkb2VzIG5vdCBoYXZlXG4vLyB0aGUgbWluaW11bSA0bXMgcGVuYWx0eS5cbi8vIFVuZm9ydHVuYXRlbHkgdGhlcmUgYXBwZWFycyB0byBiZSBhIGJ1ZyBpbiBJbnRlcm5ldCBFeHBsb3JlciAxMCBNb2JpbGUgKGFuZFxuLy8gRGVza3RvcCB0byBhIGxlc3NlciBleHRlbnQpIHRoYXQgcmVuZGVycyBib3RoIHNldEltbWVkaWF0ZSBhbmRcbi8vIE1lc3NhZ2VDaGFubmVsIHVzZWxlc3MgZm9yIHRoZSBwdXJwb3NlcyBvZiBBU0FQLlxuLy8gaHR0cHM6Ly9naXRodWIuY29tL2tyaXNrb3dhbC9xL2lzc3Vlcy8zOTZcblxuLy8gVGltZXJzIGFyZSBpbXBsZW1lbnRlZCB1bml2ZXJzYWxseS5cbi8vIFdlIGZhbGwgYmFjayB0byB0aW1lcnMgaW4gd29ya2VycyBpbiBtb3N0IGVuZ2luZXMsIGFuZCBpbiBmb3JlZ3JvdW5kXG4vLyBjb250ZXh0cyBpbiB0aGUgZm9sbG93aW5nIGJyb3dzZXJzLlxuLy8gSG93ZXZlciwgbm90ZSB0aGF0IGV2ZW4gdGhpcyBzaW1wbGUgY2FzZSByZXF1aXJlcyBudWFuY2VzIHRvIG9wZXJhdGUgaW4gYVxuLy8gYnJvYWQgc3BlY3RydW0gb2YgYnJvd3NlcnMuXG4vL1xuLy8gLSBGaXJlZm94IDMtMTNcbi8vIC0gSW50ZXJuZXQgRXhwbG9yZXIgNi05XG4vLyAtIGlQYWQgU2FmYXJpIDQuM1xuLy8gLSBMeW54IDIuOC43XG59IGVsc2Uge1xuICAgIHJlcXVlc3RGbHVzaCA9IG1ha2VSZXF1ZXN0Q2FsbEZyb21UaW1lcihmbHVzaCk7XG59XG5cbi8vIGByZXF1ZXN0Rmx1c2hgIHJlcXVlc3RzIHRoYXQgdGhlIGhpZ2ggcHJpb3JpdHkgZXZlbnQgcXVldWUgYmUgZmx1c2hlZCBhc1xuLy8gc29vbiBhcyBwb3NzaWJsZS5cbi8vIFRoaXMgaXMgdXNlZnVsIHRvIHByZXZlbnQgYW4gZXJyb3IgdGhyb3duIGluIGEgdGFzayBmcm9tIHN0YWxsaW5nIHRoZSBldmVudFxuLy8gcXVldWUgaWYgdGhlIGV4Y2VwdGlvbiBoYW5kbGVkIGJ5IE5vZGUuanPigJlzXG4vLyBgcHJvY2Vzcy5vbihcInVuY2F1Z2h0RXhjZXB0aW9uXCIpYCBvciBieSBhIGRvbWFpbi5cbnJhd0FzYXAucmVxdWVzdEZsdXNoID0gcmVxdWVzdEZsdXNoO1xuXG4vLyBUbyByZXF1ZXN0IGEgaGlnaCBwcmlvcml0eSBldmVudCwgd2UgaW5kdWNlIGEgbXV0YXRpb24gb2JzZXJ2ZXIgYnkgdG9nZ2xpbmdcbi8vIHRoZSB0ZXh0IG9mIGEgdGV4dCBub2RlIGJldHdlZW4gXCIxXCIgYW5kIFwiLTFcIi5cbmZ1bmN0aW9uIG1ha2VSZXF1ZXN0Q2FsbEZyb21NdXRhdGlvbk9ic2VydmVyKGNhbGxiYWNrKSB7XG4gICAgdmFyIHRvZ2dsZSA9IDE7XG4gICAgdmFyIG9ic2VydmVyID0gbmV3IEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyKGNhbGxiYWNrKTtcbiAgICB2YXIgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiXCIpO1xuICAgIG9ic2VydmVyLm9ic2VydmUobm9kZSwge2NoYXJhY3RlckRhdGE6IHRydWV9KTtcbiAgICByZXR1cm4gZnVuY3Rpb24gcmVxdWVzdENhbGwoKSB7XG4gICAgICAgIHRvZ2dsZSA9IC10b2dnbGU7XG4gICAgICAgIG5vZGUuZGF0YSA9IHRvZ2dsZTtcbiAgICB9O1xufVxuXG4vLyBUaGUgbWVzc2FnZSBjaGFubmVsIHRlY2huaXF1ZSB3YXMgZGlzY292ZXJlZCBieSBNYWx0ZSBVYmwgYW5kIHdhcyB0aGVcbi8vIG9yaWdpbmFsIGZvdW5kYXRpb24gZm9yIHRoaXMgbGlicmFyeS5cbi8vIGh0dHA6Ly93d3cubm9uYmxvY2tpbmcuaW8vMjAxMS8wNi93aW5kb3duZXh0dGljay5odG1sXG5cbi8vIFNhZmFyaSA2LjAuNSAoYXQgbGVhc3QpIGludGVybWl0dGVudGx5IGZhaWxzIHRvIGNyZWF0ZSBtZXNzYWdlIHBvcnRzIG9uIGFcbi8vIHBhZ2UncyBmaXJzdCBsb2FkLiBUaGFua2Z1bGx5LCB0aGlzIHZlcnNpb24gb2YgU2FmYXJpIHN1cHBvcnRzXG4vLyBNdXRhdGlvbk9ic2VydmVycywgc28gd2UgZG9uJ3QgbmVlZCB0byBmYWxsIGJhY2sgaW4gdGhhdCBjYXNlLlxuXG4vLyBmdW5jdGlvbiBtYWtlUmVxdWVzdENhbGxGcm9tTWVzc2FnZUNoYW5uZWwoY2FsbGJhY2spIHtcbi8vICAgICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuLy8gICAgIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gY2FsbGJhY2s7XG4vLyAgICAgcmV0dXJuIGZ1bmN0aW9uIHJlcXVlc3RDYWxsKCkge1xuLy8gICAgICAgICBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKDApO1xuLy8gICAgIH07XG4vLyB9XG5cbi8vIEZvciByZWFzb25zIGV4cGxhaW5lZCBhYm92ZSwgd2UgYXJlIGFsc28gdW5hYmxlIHRvIHVzZSBgc2V0SW1tZWRpYXRlYFxuLy8gdW5kZXIgYW55IGNpcmN1bXN0YW5jZXMuXG4vLyBFdmVuIGlmIHdlIHdlcmUsIHRoZXJlIGlzIGFub3RoZXIgYnVnIGluIEludGVybmV0IEV4cGxvcmVyIDEwLlxuLy8gSXQgaXMgbm90IHN1ZmZpY2llbnQgdG8gYXNzaWduIGBzZXRJbW1lZGlhdGVgIHRvIGByZXF1ZXN0Rmx1c2hgIGJlY2F1c2Vcbi8vIGBzZXRJbW1lZGlhdGVgIG11c3QgYmUgY2FsbGVkICpieSBuYW1lKiBhbmQgdGhlcmVmb3JlIG11c3QgYmUgd3JhcHBlZCBpbiBhXG4vLyBjbG9zdXJlLlxuLy8gTmV2ZXIgZm9yZ2V0LlxuXG4vLyBmdW5jdGlvbiBtYWtlUmVxdWVzdENhbGxGcm9tU2V0SW1tZWRpYXRlKGNhbGxiYWNrKSB7XG4vLyAgICAgcmV0dXJuIGZ1bmN0aW9uIHJlcXVlc3RDYWxsKCkge1xuLy8gICAgICAgICBzZXRJbW1lZGlhdGUoY2FsbGJhY2spO1xuLy8gICAgIH07XG4vLyB9XG5cbi8vIFNhZmFyaSA2LjAgaGFzIGEgcHJvYmxlbSB3aGVyZSB0aW1lcnMgd2lsbCBnZXQgbG9zdCB3aGlsZSB0aGUgdXNlciBpc1xuLy8gc2Nyb2xsaW5nLiBUaGlzIHByb2JsZW0gZG9lcyBub3QgaW1wYWN0IEFTQVAgYmVjYXVzZSBTYWZhcmkgNi4wIHN1cHBvcnRzXG4vLyBtdXRhdGlvbiBvYnNlcnZlcnMsIHNvIHRoYXQgaW1wbGVtZW50YXRpb24gaXMgdXNlZCBpbnN0ZWFkLlxuLy8gSG93ZXZlciwgaWYgd2UgZXZlciBlbGVjdCB0byB1c2UgdGltZXJzIGluIFNhZmFyaSwgdGhlIHByZXZhbGVudCB3b3JrLWFyb3VuZFxuLy8gaXMgdG8gYWRkIGEgc2Nyb2xsIGV2ZW50IGxpc3RlbmVyIHRoYXQgY2FsbHMgZm9yIGEgZmx1c2guXG5cbi8vIGBzZXRUaW1lb3V0YCBkb2VzIG5vdCBjYWxsIHRoZSBwYXNzZWQgY2FsbGJhY2sgaWYgdGhlIGRlbGF5IGlzIGxlc3MgdGhhblxuLy8gYXBwcm94aW1hdGVseSA3IGluIHdlYiB3b3JrZXJzIGluIEZpcmVmb3ggOCB0aHJvdWdoIDE4LCBhbmQgc29tZXRpbWVzIG5vdFxuLy8gZXZlbiB0aGVuLlxuXG5mdW5jdGlvbiBtYWtlUmVxdWVzdENhbGxGcm9tVGltZXIoY2FsbGJhY2spIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gcmVxdWVzdENhbGwoKSB7XG4gICAgICAgIC8vIFdlIGRpc3BhdGNoIGEgdGltZW91dCB3aXRoIGEgc3BlY2lmaWVkIGRlbGF5IG9mIDAgZm9yIGVuZ2luZXMgdGhhdFxuICAgICAgICAvLyBjYW4gcmVsaWFibHkgYWNjb21tb2RhdGUgdGhhdCByZXF1ZXN0LiBUaGlzIHdpbGwgdXN1YWxseSBiZSBzbmFwcGVkXG4gICAgICAgIC8vIHRvIGEgNCBtaWxpc2Vjb25kIGRlbGF5LCBidXQgb25jZSB3ZSdyZSBmbHVzaGluZywgdGhlcmUncyBubyBkZWxheVxuICAgICAgICAvLyBiZXR3ZWVuIGV2ZW50cy5cbiAgICAgICAgdmFyIHRpbWVvdXRIYW5kbGUgPSBzZXRUaW1lb3V0KGhhbmRsZVRpbWVyLCAwKTtcbiAgICAgICAgLy8gSG93ZXZlciwgc2luY2UgdGhpcyB0aW1lciBnZXRzIGZyZXF1ZW50bHkgZHJvcHBlZCBpbiBGaXJlZm94XG4gICAgICAgIC8vIHdvcmtlcnMsIHdlIGVubGlzdCBhbiBpbnRlcnZhbCBoYW5kbGUgdGhhdCB3aWxsIHRyeSB0byBmaXJlXG4gICAgICAgIC8vIGFuIGV2ZW50IDIwIHRpbWVzIHBlciBzZWNvbmQgdW50aWwgaXQgc3VjY2VlZHMuXG4gICAgICAgIHZhciBpbnRlcnZhbEhhbmRsZSA9IHNldEludGVydmFsKGhhbmRsZVRpbWVyLCA1MCk7XG5cbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlVGltZXIoKSB7XG4gICAgICAgICAgICAvLyBXaGljaGV2ZXIgdGltZXIgc3VjY2VlZHMgd2lsbCBjYW5jZWwgYm90aCB0aW1lcnMgYW5kXG4gICAgICAgICAgICAvLyBleGVjdXRlIHRoZSBjYWxsYmFjay5cbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SGFuZGxlKTtcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWxIYW5kbGUpO1xuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5cbi8vIFRoaXMgaXMgZm9yIGBhc2FwLmpzYCBvbmx5LlxuLy8gSXRzIG5hbWUgd2lsbCBiZSBwZXJpb2RpY2FsbHkgcmFuZG9taXplZCB0byBicmVhayBhbnkgY29kZSB0aGF0IGRlcGVuZHMgb25cbi8vIGl0cyBleGlzdGVuY2UuXG5yYXdBc2FwLm1ha2VSZXF1ZXN0Q2FsbEZyb21UaW1lciA9IG1ha2VSZXF1ZXN0Q2FsbEZyb21UaW1lcjtcblxuLy8gQVNBUCB3YXMgb3JpZ2luYWxseSBhIG5leHRUaWNrIHNoaW0gaW5jbHVkZWQgaW4gUS4gVGhpcyB3YXMgZmFjdG9yZWQgb3V0XG4vLyBpbnRvIHRoaXMgQVNBUCBwYWNrYWdlLiBJdCB3YXMgbGF0ZXIgYWRhcHRlZCB0byBSU1ZQIHdoaWNoIG1hZGUgZnVydGhlclxuLy8gYW1lbmRtZW50cy4gVGhlc2UgZGVjaXNpb25zLCBwYXJ0aWN1bGFybHkgdG8gbWFyZ2luYWxpemUgTWVzc2FnZUNoYW5uZWwgYW5kXG4vLyB0byBjYXB0dXJlIHRoZSBNdXRhdGlvbk9ic2VydmVyIGltcGxlbWVudGF0aW9uIGluIGEgY2xvc3VyZSwgd2VyZSBpbnRlZ3JhdGVkXG4vLyBiYWNrIGludG8gQVNBUCBwcm9wZXIuXG4vLyBodHRwczovL2dpdGh1Yi5jb20vdGlsZGVpby9yc3ZwLmpzL2Jsb2IvY2RkZjcyMzI1NDZhOWNmODU4NTI0Yjc1Y2RlNmY5ZWRmNzI2MjBhNy9saWIvcnN2cC9hc2FwLmpzXG4iLCIvKipcbiAqIEV2RW1pdHRlciB2MS4xLjBcbiAqIExpbCcgZXZlbnQgZW1pdHRlclxuICogTUlUIExpY2Vuc2VcbiAqL1xuXG4vKiBqc2hpbnQgdW51c2VkOiB0cnVlLCB1bmRlZjogdHJ1ZSwgc3RyaWN0OiB0cnVlICovXG5cbiggZnVuY3Rpb24oIGdsb2JhbCwgZmFjdG9yeSApIHtcbiAgLy8gdW5pdmVyc2FsIG1vZHVsZSBkZWZpbml0aW9uXG4gIC8qIGpzaGludCBzdHJpY3Q6IGZhbHNlICovIC8qIGdsb2JhbHMgZGVmaW5lLCBtb2R1bGUsIHdpbmRvdyAqL1xuICBpZiAoIHR5cGVvZiBkZWZpbmUgPT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kICkge1xuICAgIC8vIEFNRCAtIFJlcXVpcmVKU1xuICAgIGRlZmluZSggZmFjdG9yeSApO1xuICB9IGVsc2UgaWYgKCB0eXBlb2YgbW9kdWxlID09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzICkge1xuICAgIC8vIENvbW1vbkpTIC0gQnJvd3NlcmlmeSwgV2VicGFja1xuICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuICB9IGVsc2Uge1xuICAgIC8vIEJyb3dzZXIgZ2xvYmFsc1xuICAgIGdsb2JhbC5FdkVtaXR0ZXIgPSBmYWN0b3J5KCk7XG4gIH1cblxufSggdHlwZW9mIHdpbmRvdyAhPSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHRoaXMsIGZ1bmN0aW9uKCkge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuZnVuY3Rpb24gRXZFbWl0dGVyKCkge31cblxudmFyIHByb3RvID0gRXZFbWl0dGVyLnByb3RvdHlwZTtcblxucHJvdG8ub24gPSBmdW5jdGlvbiggZXZlbnROYW1lLCBsaXN0ZW5lciApIHtcbiAgaWYgKCAhZXZlbnROYW1lIHx8ICFsaXN0ZW5lciApIHtcbiAgICByZXR1cm47XG4gIH1cbiAgLy8gc2V0IGV2ZW50cyBoYXNoXG4gIHZhciBldmVudHMgPSB0aGlzLl9ldmVudHMgPSB0aGlzLl9ldmVudHMgfHwge307XG4gIC8vIHNldCBsaXN0ZW5lcnMgYXJyYXlcbiAgdmFyIGxpc3RlbmVycyA9IGV2ZW50c1sgZXZlbnROYW1lIF0gPSBldmVudHNbIGV2ZW50TmFtZSBdIHx8IFtdO1xuICAvLyBvbmx5IGFkZCBvbmNlXG4gIGlmICggbGlzdGVuZXJzLmluZGV4T2YoIGxpc3RlbmVyICkgPT0gLTEgKSB7XG4gICAgbGlzdGVuZXJzLnB1c2goIGxpc3RlbmVyICk7XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn07XG5cbnByb3RvLm9uY2UgPSBmdW5jdGlvbiggZXZlbnROYW1lLCBsaXN0ZW5lciApIHtcbiAgaWYgKCAhZXZlbnROYW1lIHx8ICFsaXN0ZW5lciApIHtcbiAgICByZXR1cm47XG4gIH1cbiAgLy8gYWRkIGV2ZW50XG4gIHRoaXMub24oIGV2ZW50TmFtZSwgbGlzdGVuZXIgKTtcbiAgLy8gc2V0IG9uY2UgZmxhZ1xuICAvLyBzZXQgb25jZUV2ZW50cyBoYXNoXG4gIHZhciBvbmNlRXZlbnRzID0gdGhpcy5fb25jZUV2ZW50cyA9IHRoaXMuX29uY2VFdmVudHMgfHwge307XG4gIC8vIHNldCBvbmNlTGlzdGVuZXJzIG9iamVjdFxuICB2YXIgb25jZUxpc3RlbmVycyA9IG9uY2VFdmVudHNbIGV2ZW50TmFtZSBdID0gb25jZUV2ZW50c1sgZXZlbnROYW1lIF0gfHwge307XG4gIC8vIHNldCBmbGFnXG4gIG9uY2VMaXN0ZW5lcnNbIGxpc3RlbmVyIF0gPSB0cnVlO1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxucHJvdG8ub2ZmID0gZnVuY3Rpb24oIGV2ZW50TmFtZSwgbGlzdGVuZXIgKSB7XG4gIHZhciBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudHMgJiYgdGhpcy5fZXZlbnRzWyBldmVudE5hbWUgXTtcbiAgaWYgKCAhbGlzdGVuZXJzIHx8ICFsaXN0ZW5lcnMubGVuZ3RoICkge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgaW5kZXggPSBsaXN0ZW5lcnMuaW5kZXhPZiggbGlzdGVuZXIgKTtcbiAgaWYgKCBpbmRleCAhPSAtMSApIHtcbiAgICBsaXN0ZW5lcnMuc3BsaWNlKCBpbmRleCwgMSApO1xuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5wcm90by5lbWl0RXZlbnQgPSBmdW5jdGlvbiggZXZlbnROYW1lLCBhcmdzICkge1xuICB2YXIgbGlzdGVuZXJzID0gdGhpcy5fZXZlbnRzICYmIHRoaXMuX2V2ZW50c1sgZXZlbnROYW1lIF07XG4gIGlmICggIWxpc3RlbmVycyB8fCAhbGlzdGVuZXJzLmxlbmd0aCApIHtcbiAgICByZXR1cm47XG4gIH1cbiAgLy8gY29weSBvdmVyIHRvIGF2b2lkIGludGVyZmVyZW5jZSBpZiAub2ZmKCkgaW4gbGlzdGVuZXJcbiAgbGlzdGVuZXJzID0gbGlzdGVuZXJzLnNsaWNlKDApO1xuICBhcmdzID0gYXJncyB8fCBbXTtcbiAgLy8gb25jZSBzdHVmZlxuICB2YXIgb25jZUxpc3RlbmVycyA9IHRoaXMuX29uY2VFdmVudHMgJiYgdGhpcy5fb25jZUV2ZW50c1sgZXZlbnROYW1lIF07XG5cbiAgZm9yICggdmFyIGk9MDsgaSA8IGxpc3RlbmVycy5sZW5ndGg7IGkrKyApIHtcbiAgICB2YXIgbGlzdGVuZXIgPSBsaXN0ZW5lcnNbaV1cbiAgICB2YXIgaXNPbmNlID0gb25jZUxpc3RlbmVycyAmJiBvbmNlTGlzdGVuZXJzWyBsaXN0ZW5lciBdO1xuICAgIGlmICggaXNPbmNlICkge1xuICAgICAgLy8gcmVtb3ZlIGxpc3RlbmVyXG4gICAgICAvLyByZW1vdmUgYmVmb3JlIHRyaWdnZXIgdG8gcHJldmVudCByZWN1cnNpb25cbiAgICAgIHRoaXMub2ZmKCBldmVudE5hbWUsIGxpc3RlbmVyICk7XG4gICAgICAvLyB1bnNldCBvbmNlIGZsYWdcbiAgICAgIGRlbGV0ZSBvbmNlTGlzdGVuZXJzWyBsaXN0ZW5lciBdO1xuICAgIH1cbiAgICAvLyB0cmlnZ2VyIGxpc3RlbmVyXG4gICAgbGlzdGVuZXIuYXBwbHkoIHRoaXMsIGFyZ3MgKTtcbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufTtcblxucHJvdG8uYWxsT2ZmID0gZnVuY3Rpb24oKSB7XG4gIGRlbGV0ZSB0aGlzLl9ldmVudHM7XG4gIGRlbGV0ZSB0aGlzLl9vbmNlRXZlbnRzO1xufTtcblxucmV0dXJuIEV2RW1pdHRlcjtcblxufSkpO1xuIiwiLyohXG4gKiBpbWFnZXNMb2FkZWQgdjQuMS40XG4gKiBKYXZhU2NyaXB0IGlzIGFsbCBsaWtlIFwiWW91IGltYWdlcyBhcmUgZG9uZSB5ZXQgb3Igd2hhdD9cIlxuICogTUlUIExpY2Vuc2VcbiAqL1xuXG4oIGZ1bmN0aW9uKCB3aW5kb3csIGZhY3RvcnkgKSB7ICd1c2Ugc3RyaWN0JztcbiAgLy8gdW5pdmVyc2FsIG1vZHVsZSBkZWZpbml0aW9uXG5cbiAgLypnbG9iYWwgZGVmaW5lOiBmYWxzZSwgbW9kdWxlOiBmYWxzZSwgcmVxdWlyZTogZmFsc2UgKi9cblxuICBpZiAoIHR5cGVvZiBkZWZpbmUgPT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kICkge1xuICAgIC8vIEFNRFxuICAgIGRlZmluZSggW1xuICAgICAgJ2V2LWVtaXR0ZXIvZXYtZW1pdHRlcidcbiAgICBdLCBmdW5jdGlvbiggRXZFbWl0dGVyICkge1xuICAgICAgcmV0dXJuIGZhY3RvcnkoIHdpbmRvdywgRXZFbWl0dGVyICk7XG4gICAgfSk7XG4gIH0gZWxzZSBpZiAoIHR5cGVvZiBtb2R1bGUgPT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMgKSB7XG4gICAgLy8gQ29tbW9uSlNcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoXG4gICAgICB3aW5kb3csXG4gICAgICByZXF1aXJlKCdldi1lbWl0dGVyJylcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIC8vIGJyb3dzZXIgZ2xvYmFsXG4gICAgd2luZG93LmltYWdlc0xvYWRlZCA9IGZhY3RvcnkoXG4gICAgICB3aW5kb3csXG4gICAgICB3aW5kb3cuRXZFbWl0dGVyXG4gICAgKTtcbiAgfVxuXG59KSggdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB0aGlzLFxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAgZmFjdG9yeSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG5mdW5jdGlvbiBmYWN0b3J5KCB3aW5kb3csIEV2RW1pdHRlciApIHtcblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgJCA9IHdpbmRvdy5qUXVlcnk7XG52YXIgY29uc29sZSA9IHdpbmRvdy5jb25zb2xlO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBoZWxwZXJzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbi8vIGV4dGVuZCBvYmplY3RzXG5mdW5jdGlvbiBleHRlbmQoIGEsIGIgKSB7XG4gIGZvciAoIHZhciBwcm9wIGluIGIgKSB7XG4gICAgYVsgcHJvcCBdID0gYlsgcHJvcCBdO1xuICB9XG4gIHJldHVybiBhO1xufVxuXG52YXIgYXJyYXlTbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTtcblxuLy8gdHVybiBlbGVtZW50IG9yIG5vZGVMaXN0IGludG8gYW4gYXJyYXlcbmZ1bmN0aW9uIG1ha2VBcnJheSggb2JqICkge1xuICBpZiAoIEFycmF5LmlzQXJyYXkoIG9iaiApICkge1xuICAgIC8vIHVzZSBvYmplY3QgaWYgYWxyZWFkeSBhbiBhcnJheVxuICAgIHJldHVybiBvYmo7XG4gIH1cblxuICB2YXIgaXNBcnJheUxpa2UgPSB0eXBlb2Ygb2JqID09ICdvYmplY3QnICYmIHR5cGVvZiBvYmoubGVuZ3RoID09ICdudW1iZXInO1xuICBpZiAoIGlzQXJyYXlMaWtlICkge1xuICAgIC8vIGNvbnZlcnQgbm9kZUxpc3QgdG8gYXJyYXlcbiAgICByZXR1cm4gYXJyYXlTbGljZS5jYWxsKCBvYmogKTtcbiAgfVxuXG4gIC8vIGFycmF5IG9mIHNpbmdsZSBpbmRleFxuICByZXR1cm4gWyBvYmogXTtcbn1cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gaW1hZ2VzTG9hZGVkIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheSwgRWxlbWVudCwgTm9kZUxpc3QsIFN0cmluZ30gZWxlbVxuICogQHBhcmFtIHtPYmplY3Qgb3IgRnVuY3Rpb259IG9wdGlvbnMgLSBpZiBmdW5jdGlvbiwgdXNlIGFzIGNhbGxiYWNrXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBvbkFsd2F5cyAtIGNhbGxiYWNrIGZ1bmN0aW9uXG4gKi9cbmZ1bmN0aW9uIEltYWdlc0xvYWRlZCggZWxlbSwgb3B0aW9ucywgb25BbHdheXMgKSB7XG4gIC8vIGNvZXJjZSBJbWFnZXNMb2FkZWQoKSB3aXRob3V0IG5ldywgdG8gYmUgbmV3IEltYWdlc0xvYWRlZCgpXG4gIGlmICggISggdGhpcyBpbnN0YW5jZW9mIEltYWdlc0xvYWRlZCApICkge1xuICAgIHJldHVybiBuZXcgSW1hZ2VzTG9hZGVkKCBlbGVtLCBvcHRpb25zLCBvbkFsd2F5cyApO1xuICB9XG4gIC8vIHVzZSBlbGVtIGFzIHNlbGVjdG9yIHN0cmluZ1xuICB2YXIgcXVlcnlFbGVtID0gZWxlbTtcbiAgaWYgKCB0eXBlb2YgZWxlbSA9PSAnc3RyaW5nJyApIHtcbiAgICBxdWVyeUVsZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCBlbGVtICk7XG4gIH1cbiAgLy8gYmFpbCBpZiBiYWQgZWxlbWVudFxuICBpZiAoICFxdWVyeUVsZW0gKSB7XG4gICAgY29uc29sZS5lcnJvciggJ0JhZCBlbGVtZW50IGZvciBpbWFnZXNMb2FkZWQgJyArICggcXVlcnlFbGVtIHx8IGVsZW0gKSApO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHRoaXMuZWxlbWVudHMgPSBtYWtlQXJyYXkoIHF1ZXJ5RWxlbSApO1xuICB0aGlzLm9wdGlvbnMgPSBleHRlbmQoIHt9LCB0aGlzLm9wdGlvbnMgKTtcbiAgLy8gc2hpZnQgYXJndW1lbnRzIGlmIG5vIG9wdGlvbnMgc2V0XG4gIGlmICggdHlwZW9mIG9wdGlvbnMgPT0gJ2Z1bmN0aW9uJyApIHtcbiAgICBvbkFsd2F5cyA9IG9wdGlvbnM7XG4gIH0gZWxzZSB7XG4gICAgZXh0ZW5kKCB0aGlzLm9wdGlvbnMsIG9wdGlvbnMgKTtcbiAgfVxuXG4gIGlmICggb25BbHdheXMgKSB7XG4gICAgdGhpcy5vbiggJ2Fsd2F5cycsIG9uQWx3YXlzICk7XG4gIH1cblxuICB0aGlzLmdldEltYWdlcygpO1xuXG4gIGlmICggJCApIHtcbiAgICAvLyBhZGQgalF1ZXJ5IERlZmVycmVkIG9iamVjdFxuICAgIHRoaXMuanFEZWZlcnJlZCA9IG5ldyAkLkRlZmVycmVkKCk7XG4gIH1cblxuICAvLyBIQUNLIGNoZWNrIGFzeW5jIHRvIGFsbG93IHRpbWUgdG8gYmluZCBsaXN0ZW5lcnNcbiAgc2V0VGltZW91dCggdGhpcy5jaGVjay5iaW5kKCB0aGlzICkgKTtcbn1cblxuSW1hZ2VzTG9hZGVkLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEV2RW1pdHRlci5wcm90b3R5cGUgKTtcblxuSW1hZ2VzTG9hZGVkLnByb3RvdHlwZS5vcHRpb25zID0ge307XG5cbkltYWdlc0xvYWRlZC5wcm90b3R5cGUuZ2V0SW1hZ2VzID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuaW1hZ2VzID0gW107XG5cbiAgLy8gZmlsdGVyICYgZmluZCBpdGVtcyBpZiB3ZSBoYXZlIGFuIGl0ZW0gc2VsZWN0b3JcbiAgdGhpcy5lbGVtZW50cy5mb3JFYWNoKCB0aGlzLmFkZEVsZW1lbnRJbWFnZXMsIHRoaXMgKTtcbn07XG5cbi8qKlxuICogQHBhcmFtIHtOb2RlfSBlbGVtZW50XG4gKi9cbkltYWdlc0xvYWRlZC5wcm90b3R5cGUuYWRkRWxlbWVudEltYWdlcyA9IGZ1bmN0aW9uKCBlbGVtICkge1xuICAvLyBmaWx0ZXIgc2libGluZ3NcbiAgaWYgKCBlbGVtLm5vZGVOYW1lID09ICdJTUcnICkge1xuICAgIHRoaXMuYWRkSW1hZ2UoIGVsZW0gKTtcbiAgfVxuICAvLyBnZXQgYmFja2dyb3VuZCBpbWFnZSBvbiBlbGVtZW50XG4gIGlmICggdGhpcy5vcHRpb25zLmJhY2tncm91bmQgPT09IHRydWUgKSB7XG4gICAgdGhpcy5hZGRFbGVtZW50QmFja2dyb3VuZEltYWdlcyggZWxlbSApO1xuICB9XG5cbiAgLy8gZmluZCBjaGlsZHJlblxuICAvLyBubyBub24tZWxlbWVudCBub2RlcywgIzE0M1xuICB2YXIgbm9kZVR5cGUgPSBlbGVtLm5vZGVUeXBlO1xuICBpZiAoICFub2RlVHlwZSB8fCAhZWxlbWVudE5vZGVUeXBlc1sgbm9kZVR5cGUgXSApIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIGNoaWxkSW1ncyA9IGVsZW0ucXVlcnlTZWxlY3RvckFsbCgnaW1nJyk7XG4gIC8vIGNvbmNhdCBjaGlsZEVsZW1zIHRvIGZpbHRlckZvdW5kIGFycmF5XG4gIGZvciAoIHZhciBpPTA7IGkgPCBjaGlsZEltZ3MubGVuZ3RoOyBpKysgKSB7XG4gICAgdmFyIGltZyA9IGNoaWxkSW1nc1tpXTtcbiAgICB0aGlzLmFkZEltYWdlKCBpbWcgKTtcbiAgfVxuXG4gIC8vIGdldCBjaGlsZCBiYWNrZ3JvdW5kIGltYWdlc1xuICBpZiAoIHR5cGVvZiB0aGlzLm9wdGlvbnMuYmFja2dyb3VuZCA9PSAnc3RyaW5nJyApIHtcbiAgICB2YXIgY2hpbGRyZW4gPSBlbGVtLnF1ZXJ5U2VsZWN0b3JBbGwoIHRoaXMub3B0aW9ucy5iYWNrZ3JvdW5kICk7XG4gICAgZm9yICggaT0wOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKysgKSB7XG4gICAgICB2YXIgY2hpbGQgPSBjaGlsZHJlbltpXTtcbiAgICAgIHRoaXMuYWRkRWxlbWVudEJhY2tncm91bmRJbWFnZXMoIGNoaWxkICk7XG4gICAgfVxuICB9XG59O1xuXG52YXIgZWxlbWVudE5vZGVUeXBlcyA9IHtcbiAgMTogdHJ1ZSxcbiAgOTogdHJ1ZSxcbiAgMTE6IHRydWVcbn07XG5cbkltYWdlc0xvYWRlZC5wcm90b3R5cGUuYWRkRWxlbWVudEJhY2tncm91bmRJbWFnZXMgPSBmdW5jdGlvbiggZWxlbSApIHtcbiAgdmFyIHN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZSggZWxlbSApO1xuICBpZiAoICFzdHlsZSApIHtcbiAgICAvLyBGaXJlZm94IHJldHVybnMgbnVsbCBpZiBpbiBhIGhpZGRlbiBpZnJhbWUgaHR0cHM6Ly9idWd6aWwubGEvNTQ4Mzk3XG4gICAgcmV0dXJuO1xuICB9XG4gIC8vIGdldCB1cmwgaW5zaWRlIHVybChcIi4uLlwiKVxuICB2YXIgcmVVUkwgPSAvdXJsXFwoKFsnXCJdKT8oLio/KVxcMVxcKS9naTtcbiAgdmFyIG1hdGNoZXMgPSByZVVSTC5leGVjKCBzdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgKTtcbiAgd2hpbGUgKCBtYXRjaGVzICE9PSBudWxsICkge1xuICAgIHZhciB1cmwgPSBtYXRjaGVzICYmIG1hdGNoZXNbMl07XG4gICAgaWYgKCB1cmwgKSB7XG4gICAgICB0aGlzLmFkZEJhY2tncm91bmQoIHVybCwgZWxlbSApO1xuICAgIH1cbiAgICBtYXRjaGVzID0gcmVVUkwuZXhlYyggc3R5bGUuYmFja2dyb3VuZEltYWdlICk7XG4gIH1cbn07XG5cbi8qKlxuICogQHBhcmFtIHtJbWFnZX0gaW1nXG4gKi9cbkltYWdlc0xvYWRlZC5wcm90b3R5cGUuYWRkSW1hZ2UgPSBmdW5jdGlvbiggaW1nICkge1xuICB2YXIgbG9hZGluZ0ltYWdlID0gbmV3IExvYWRpbmdJbWFnZSggaW1nICk7XG4gIHRoaXMuaW1hZ2VzLnB1c2goIGxvYWRpbmdJbWFnZSApO1xufTtcblxuSW1hZ2VzTG9hZGVkLnByb3RvdHlwZS5hZGRCYWNrZ3JvdW5kID0gZnVuY3Rpb24oIHVybCwgZWxlbSApIHtcbiAgdmFyIGJhY2tncm91bmQgPSBuZXcgQmFja2dyb3VuZCggdXJsLCBlbGVtICk7XG4gIHRoaXMuaW1hZ2VzLnB1c2goIGJhY2tncm91bmQgKTtcbn07XG5cbkltYWdlc0xvYWRlZC5wcm90b3R5cGUuY2hlY2sgPSBmdW5jdGlvbigpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcbiAgdGhpcy5wcm9ncmVzc2VkQ291bnQgPSAwO1xuICB0aGlzLmhhc0FueUJyb2tlbiA9IGZhbHNlO1xuICAvLyBjb21wbGV0ZSBpZiBubyBpbWFnZXNcbiAgaWYgKCAhdGhpcy5pbWFnZXMubGVuZ3RoICkge1xuICAgIHRoaXMuY29tcGxldGUoKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBmdW5jdGlvbiBvblByb2dyZXNzKCBpbWFnZSwgZWxlbSwgbWVzc2FnZSApIHtcbiAgICAvLyBIQUNLIC0gQ2hyb21lIHRyaWdnZXJzIGV2ZW50IGJlZm9yZSBvYmplY3QgcHJvcGVydGllcyBoYXZlIGNoYW5nZWQuICM4M1xuICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuICAgICAgX3RoaXMucHJvZ3Jlc3MoIGltYWdlLCBlbGVtLCBtZXNzYWdlICk7XG4gICAgfSk7XG4gIH1cblxuICB0aGlzLmltYWdlcy5mb3JFYWNoKCBmdW5jdGlvbiggbG9hZGluZ0ltYWdlICkge1xuICAgIGxvYWRpbmdJbWFnZS5vbmNlKCAncHJvZ3Jlc3MnLCBvblByb2dyZXNzICk7XG4gICAgbG9hZGluZ0ltYWdlLmNoZWNrKCk7XG4gIH0pO1xufTtcblxuSW1hZ2VzTG9hZGVkLnByb3RvdHlwZS5wcm9ncmVzcyA9IGZ1bmN0aW9uKCBpbWFnZSwgZWxlbSwgbWVzc2FnZSApIHtcbiAgdGhpcy5wcm9ncmVzc2VkQ291bnQrKztcbiAgdGhpcy5oYXNBbnlCcm9rZW4gPSB0aGlzLmhhc0FueUJyb2tlbiB8fCAhaW1hZ2UuaXNMb2FkZWQ7XG4gIC8vIHByb2dyZXNzIGV2ZW50XG4gIHRoaXMuZW1pdEV2ZW50KCAncHJvZ3Jlc3MnLCBbIHRoaXMsIGltYWdlLCBlbGVtIF0gKTtcbiAgaWYgKCB0aGlzLmpxRGVmZXJyZWQgJiYgdGhpcy5qcURlZmVycmVkLm5vdGlmeSApIHtcbiAgICB0aGlzLmpxRGVmZXJyZWQubm90aWZ5KCB0aGlzLCBpbWFnZSApO1xuICB9XG4gIC8vIGNoZWNrIGlmIGNvbXBsZXRlZFxuICBpZiAoIHRoaXMucHJvZ3Jlc3NlZENvdW50ID09IHRoaXMuaW1hZ2VzLmxlbmd0aCApIHtcbiAgICB0aGlzLmNvbXBsZXRlKCk7XG4gIH1cblxuICBpZiAoIHRoaXMub3B0aW9ucy5kZWJ1ZyAmJiBjb25zb2xlICkge1xuICAgIGNvbnNvbGUubG9nKCAncHJvZ3Jlc3M6ICcgKyBtZXNzYWdlLCBpbWFnZSwgZWxlbSApO1xuICB9XG59O1xuXG5JbWFnZXNMb2FkZWQucHJvdG90eXBlLmNvbXBsZXRlID0gZnVuY3Rpb24oKSB7XG4gIHZhciBldmVudE5hbWUgPSB0aGlzLmhhc0FueUJyb2tlbiA/ICdmYWlsJyA6ICdkb25lJztcbiAgdGhpcy5pc0NvbXBsZXRlID0gdHJ1ZTtcbiAgdGhpcy5lbWl0RXZlbnQoIGV2ZW50TmFtZSwgWyB0aGlzIF0gKTtcbiAgdGhpcy5lbWl0RXZlbnQoICdhbHdheXMnLCBbIHRoaXMgXSApO1xuICBpZiAoIHRoaXMuanFEZWZlcnJlZCApIHtcbiAgICB2YXIganFNZXRob2QgPSB0aGlzLmhhc0FueUJyb2tlbiA/ICdyZWplY3QnIDogJ3Jlc29sdmUnO1xuICAgIHRoaXMuanFEZWZlcnJlZFsganFNZXRob2QgXSggdGhpcyApO1xuICB9XG59O1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cblxuZnVuY3Rpb24gTG9hZGluZ0ltYWdlKCBpbWcgKSB7XG4gIHRoaXMuaW1nID0gaW1nO1xufVxuXG5Mb2FkaW5nSW1hZ2UucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggRXZFbWl0dGVyLnByb3RvdHlwZSApO1xuXG5Mb2FkaW5nSW1hZ2UucHJvdG90eXBlLmNoZWNrID0gZnVuY3Rpb24oKSB7XG4gIC8vIElmIGNvbXBsZXRlIGlzIHRydWUgYW5kIGJyb3dzZXIgc3VwcG9ydHMgbmF0dXJhbCBzaXplcyxcbiAgLy8gdHJ5IHRvIGNoZWNrIGZvciBpbWFnZSBzdGF0dXMgbWFudWFsbHkuXG4gIHZhciBpc0NvbXBsZXRlID0gdGhpcy5nZXRJc0ltYWdlQ29tcGxldGUoKTtcbiAgaWYgKCBpc0NvbXBsZXRlICkge1xuICAgIC8vIHJlcG9ydCBiYXNlZCBvbiBuYXR1cmFsV2lkdGhcbiAgICB0aGlzLmNvbmZpcm0oIHRoaXMuaW1nLm5hdHVyYWxXaWR0aCAhPT0gMCwgJ25hdHVyYWxXaWR0aCcgKTtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBJZiBub25lIG9mIHRoZSBjaGVja3MgYWJvdmUgbWF0Y2hlZCwgc2ltdWxhdGUgbG9hZGluZyBvbiBkZXRhY2hlZCBlbGVtZW50LlxuICB0aGlzLnByb3h5SW1hZ2UgPSBuZXcgSW1hZ2UoKTtcbiAgdGhpcy5wcm94eUltYWdlLmFkZEV2ZW50TGlzdGVuZXIoICdsb2FkJywgdGhpcyApO1xuICB0aGlzLnByb3h5SW1hZ2UuYWRkRXZlbnRMaXN0ZW5lciggJ2Vycm9yJywgdGhpcyApO1xuICAvLyBiaW5kIHRvIGltYWdlIGFzIHdlbGwgZm9yIEZpcmVmb3guICMxOTFcbiAgdGhpcy5pbWcuYWRkRXZlbnRMaXN0ZW5lciggJ2xvYWQnLCB0aGlzICk7XG4gIHRoaXMuaW1nLmFkZEV2ZW50TGlzdGVuZXIoICdlcnJvcicsIHRoaXMgKTtcbiAgdGhpcy5wcm94eUltYWdlLnNyYyA9IHRoaXMuaW1nLnNyYztcbn07XG5cbkxvYWRpbmdJbWFnZS5wcm90b3R5cGUuZ2V0SXNJbWFnZUNvbXBsZXRlID0gZnVuY3Rpb24oKSB7XG4gIC8vIGNoZWNrIGZvciBub24temVybywgbm9uLXVuZGVmaW5lZCBuYXR1cmFsV2lkdGhcbiAgLy8gZml4ZXMgU2FmYXJpK0luZmluaXRlU2Nyb2xsK01hc29ucnkgYnVnIGluZmluaXRlLXNjcm9sbCM2NzFcbiAgcmV0dXJuIHRoaXMuaW1nLmNvbXBsZXRlICYmIHRoaXMuaW1nLm5hdHVyYWxXaWR0aDtcbn07XG5cbkxvYWRpbmdJbWFnZS5wcm90b3R5cGUuY29uZmlybSA9IGZ1bmN0aW9uKCBpc0xvYWRlZCwgbWVzc2FnZSApIHtcbiAgdGhpcy5pc0xvYWRlZCA9IGlzTG9hZGVkO1xuICB0aGlzLmVtaXRFdmVudCggJ3Byb2dyZXNzJywgWyB0aGlzLCB0aGlzLmltZywgbWVzc2FnZSBdICk7XG59O1xuXG4vLyAtLS0tLSBldmVudHMgLS0tLS0gLy9cblxuLy8gdHJpZ2dlciBzcGVjaWZpZWQgaGFuZGxlciBmb3IgZXZlbnQgdHlwZVxuTG9hZGluZ0ltYWdlLnByb3RvdHlwZS5oYW5kbGVFdmVudCA9IGZ1bmN0aW9uKCBldmVudCApIHtcbiAgdmFyIG1ldGhvZCA9ICdvbicgKyBldmVudC50eXBlO1xuICBpZiAoIHRoaXNbIG1ldGhvZCBdICkge1xuICAgIHRoaXNbIG1ldGhvZCBdKCBldmVudCApO1xuICB9XG59O1xuXG5Mb2FkaW5nSW1hZ2UucHJvdG90eXBlLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLmNvbmZpcm0oIHRydWUsICdvbmxvYWQnICk7XG4gIHRoaXMudW5iaW5kRXZlbnRzKCk7XG59O1xuXG5Mb2FkaW5nSW1hZ2UucHJvdG90eXBlLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5jb25maXJtKCBmYWxzZSwgJ29uZXJyb3InICk7XG4gIHRoaXMudW5iaW5kRXZlbnRzKCk7XG59O1xuXG5Mb2FkaW5nSW1hZ2UucHJvdG90eXBlLnVuYmluZEV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLnByb3h5SW1hZ2UucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ2xvYWQnLCB0aGlzICk7XG4gIHRoaXMucHJveHlJbWFnZS5yZW1vdmVFdmVudExpc3RlbmVyKCAnZXJyb3InLCB0aGlzICk7XG4gIHRoaXMuaW1nLnJlbW92ZUV2ZW50TGlzdGVuZXIoICdsb2FkJywgdGhpcyApO1xuICB0aGlzLmltZy5yZW1vdmVFdmVudExpc3RlbmVyKCAnZXJyb3InLCB0aGlzICk7XG59O1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBCYWNrZ3JvdW5kIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbmZ1bmN0aW9uIEJhY2tncm91bmQoIHVybCwgZWxlbWVudCApIHtcbiAgdGhpcy51cmwgPSB1cmw7XG4gIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gIHRoaXMuaW1nID0gbmV3IEltYWdlKCk7XG59XG5cbi8vIGluaGVyaXQgTG9hZGluZ0ltYWdlIHByb3RvdHlwZVxuQmFja2dyb3VuZC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBMb2FkaW5nSW1hZ2UucHJvdG90eXBlICk7XG5cbkJhY2tncm91bmQucHJvdG90eXBlLmNoZWNrID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuaW1nLmFkZEV2ZW50TGlzdGVuZXIoICdsb2FkJywgdGhpcyApO1xuICB0aGlzLmltZy5hZGRFdmVudExpc3RlbmVyKCAnZXJyb3InLCB0aGlzICk7XG4gIHRoaXMuaW1nLnNyYyA9IHRoaXMudXJsO1xuICAvLyBjaGVjayBpZiBpbWFnZSBpcyBhbHJlYWR5IGNvbXBsZXRlXG4gIHZhciBpc0NvbXBsZXRlID0gdGhpcy5nZXRJc0ltYWdlQ29tcGxldGUoKTtcbiAgaWYgKCBpc0NvbXBsZXRlICkge1xuICAgIHRoaXMuY29uZmlybSggdGhpcy5pbWcubmF0dXJhbFdpZHRoICE9PSAwLCAnbmF0dXJhbFdpZHRoJyApO1xuICAgIHRoaXMudW5iaW5kRXZlbnRzKCk7XG4gIH1cbn07XG5cbkJhY2tncm91bmQucHJvdG90eXBlLnVuYmluZEV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLmltZy5yZW1vdmVFdmVudExpc3RlbmVyKCAnbG9hZCcsIHRoaXMgKTtcbiAgdGhpcy5pbWcucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ2Vycm9yJywgdGhpcyApO1xufTtcblxuQmFja2dyb3VuZC5wcm90b3R5cGUuY29uZmlybSA9IGZ1bmN0aW9uKCBpc0xvYWRlZCwgbWVzc2FnZSApIHtcbiAgdGhpcy5pc0xvYWRlZCA9IGlzTG9hZGVkO1xuICB0aGlzLmVtaXRFdmVudCggJ3Byb2dyZXNzJywgWyB0aGlzLCB0aGlzLmVsZW1lbnQsIG1lc3NhZ2UgXSApO1xufTtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0galF1ZXJ5IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbkltYWdlc0xvYWRlZC5tYWtlSlF1ZXJ5UGx1Z2luID0gZnVuY3Rpb24oIGpRdWVyeSApIHtcbiAgalF1ZXJ5ID0galF1ZXJ5IHx8IHdpbmRvdy5qUXVlcnk7XG4gIGlmICggIWpRdWVyeSApIHtcbiAgICByZXR1cm47XG4gIH1cbiAgLy8gc2V0IGxvY2FsIHZhcmlhYmxlXG4gICQgPSBqUXVlcnk7XG4gIC8vICQoKS5pbWFnZXNMb2FkZWQoKVxuICAkLmZuLmltYWdlc0xvYWRlZCA9IGZ1bmN0aW9uKCBvcHRpb25zLCBjYWxsYmFjayApIHtcbiAgICB2YXIgaW5zdGFuY2UgPSBuZXcgSW1hZ2VzTG9hZGVkKCB0aGlzLCBvcHRpb25zLCBjYWxsYmFjayApO1xuICAgIHJldHVybiBpbnN0YW5jZS5qcURlZmVycmVkLnByb21pc2UoICQodGhpcykgKTtcbiAgfTtcbn07XG4vLyB0cnkgbWFraW5nIHBsdWdpblxuSW1hZ2VzTG9hZGVkLm1ha2VKUXVlcnlQbHVnaW4oKTtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbnJldHVybiBJbWFnZXNMb2FkZWQ7XG5cbn0pO1xuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogbG9kYXNoIDMuMTAuMSAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cbiAqIEJ1aWxkOiBgbG9kYXNoIG1vZGVybiAtZCAtbyAuL2luZGV4LmpzYFxuICogQ29weXJpZ2h0IDIwMTItMjAxNSBUaGUgRG9qbyBGb3VuZGF0aW9uIDxodHRwOi8vZG9qb2ZvdW5kYXRpb24ub3JnLz5cbiAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG4gKiBDb3B5cmlnaHQgMjAwOS0yMDE1IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG4gKiBBdmFpbGFibGUgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuICovXG47KGZ1bmN0aW9uKCkge1xuXG4gIC8qKiBVc2VkIGFzIGEgc2FmZSByZWZlcmVuY2UgZm9yIGB1bmRlZmluZWRgIGluIHByZS1FUzUgZW52aXJvbm1lbnRzLiAqL1xuICB2YXIgdW5kZWZpbmVkO1xuXG4gIC8qKiBVc2VkIGFzIHRoZSBzZW1hbnRpYyB2ZXJzaW9uIG51bWJlci4gKi9cbiAgdmFyIFZFUlNJT04gPSAnMy4xMC4xJztcblxuICAvKiogVXNlZCB0byBjb21wb3NlIGJpdG1hc2tzIGZvciB3cmFwcGVyIG1ldGFkYXRhLiAqL1xuICB2YXIgQklORF9GTEFHID0gMSxcbiAgICAgIEJJTkRfS0VZX0ZMQUcgPSAyLFxuICAgICAgQ1VSUllfQk9VTkRfRkxBRyA9IDQsXG4gICAgICBDVVJSWV9GTEFHID0gOCxcbiAgICAgIENVUlJZX1JJR0hUX0ZMQUcgPSAxNixcbiAgICAgIFBBUlRJQUxfRkxBRyA9IDMyLFxuICAgICAgUEFSVElBTF9SSUdIVF9GTEFHID0gNjQsXG4gICAgICBBUllfRkxBRyA9IDEyOCxcbiAgICAgIFJFQVJHX0ZMQUcgPSAyNTY7XG5cbiAgLyoqIFVzZWQgYXMgZGVmYXVsdCBvcHRpb25zIGZvciBgXy50cnVuY2AuICovXG4gIHZhciBERUZBVUxUX1RSVU5DX0xFTkdUSCA9IDMwLFxuICAgICAgREVGQVVMVF9UUlVOQ19PTUlTU0lPTiA9ICcuLi4nO1xuXG4gIC8qKiBVc2VkIHRvIGRldGVjdCB3aGVuIGEgZnVuY3Rpb24gYmVjb21lcyBob3QuICovXG4gIHZhciBIT1RfQ09VTlQgPSAxNTAsXG4gICAgICBIT1RfU1BBTiA9IDE2O1xuXG4gIC8qKiBVc2VkIGFzIHRoZSBzaXplIHRvIGVuYWJsZSBsYXJnZSBhcnJheSBvcHRpbWl6YXRpb25zLiAqL1xuICB2YXIgTEFSR0VfQVJSQVlfU0laRSA9IDIwMDtcblxuICAvKiogVXNlZCB0byBpbmRpY2F0ZSB0aGUgdHlwZSBvZiBsYXp5IGl0ZXJhdGVlcy4gKi9cbiAgdmFyIExBWllfRklMVEVSX0ZMQUcgPSAxLFxuICAgICAgTEFaWV9NQVBfRkxBRyA9IDI7XG5cbiAgLyoqIFVzZWQgYXMgdGhlIGBUeXBlRXJyb3JgIG1lc3NhZ2UgZm9yIFwiRnVuY3Rpb25zXCIgbWV0aG9kcy4gKi9cbiAgdmFyIEZVTkNfRVJST1JfVEVYVCA9ICdFeHBlY3RlZCBhIGZ1bmN0aW9uJztcblxuICAvKiogVXNlZCBhcyB0aGUgaW50ZXJuYWwgYXJndW1lbnQgcGxhY2Vob2xkZXIuICovXG4gIHZhciBQTEFDRUhPTERFUiA9ICdfX2xvZGFzaF9wbGFjZWhvbGRlcl9fJztcblxuICAvKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG4gIHZhciBhcmdzVGFnID0gJ1tvYmplY3QgQXJndW1lbnRzXScsXG4gICAgICBhcnJheVRhZyA9ICdbb2JqZWN0IEFycmF5XScsXG4gICAgICBib29sVGFnID0gJ1tvYmplY3QgQm9vbGVhbl0nLFxuICAgICAgZGF0ZVRhZyA9ICdbb2JqZWN0IERhdGVdJyxcbiAgICAgIGVycm9yVGFnID0gJ1tvYmplY3QgRXJyb3JdJyxcbiAgICAgIGZ1bmNUYWcgPSAnW29iamVjdCBGdW5jdGlvbl0nLFxuICAgICAgbWFwVGFnID0gJ1tvYmplY3QgTWFwXScsXG4gICAgICBudW1iZXJUYWcgPSAnW29iamVjdCBOdW1iZXJdJyxcbiAgICAgIG9iamVjdFRhZyA9ICdbb2JqZWN0IE9iamVjdF0nLFxuICAgICAgcmVnZXhwVGFnID0gJ1tvYmplY3QgUmVnRXhwXScsXG4gICAgICBzZXRUYWcgPSAnW29iamVjdCBTZXRdJyxcbiAgICAgIHN0cmluZ1RhZyA9ICdbb2JqZWN0IFN0cmluZ10nLFxuICAgICAgd2Vha01hcFRhZyA9ICdbb2JqZWN0IFdlYWtNYXBdJztcblxuICB2YXIgYXJyYXlCdWZmZXJUYWcgPSAnW29iamVjdCBBcnJheUJ1ZmZlcl0nLFxuICAgICAgZmxvYXQzMlRhZyA9ICdbb2JqZWN0IEZsb2F0MzJBcnJheV0nLFxuICAgICAgZmxvYXQ2NFRhZyA9ICdbb2JqZWN0IEZsb2F0NjRBcnJheV0nLFxuICAgICAgaW50OFRhZyA9ICdbb2JqZWN0IEludDhBcnJheV0nLFxuICAgICAgaW50MTZUYWcgPSAnW29iamVjdCBJbnQxNkFycmF5XScsXG4gICAgICBpbnQzMlRhZyA9ICdbb2JqZWN0IEludDMyQXJyYXldJyxcbiAgICAgIHVpbnQ4VGFnID0gJ1tvYmplY3QgVWludDhBcnJheV0nLFxuICAgICAgdWludDhDbGFtcGVkVGFnID0gJ1tvYmplY3QgVWludDhDbGFtcGVkQXJyYXldJyxcbiAgICAgIHVpbnQxNlRhZyA9ICdbb2JqZWN0IFVpbnQxNkFycmF5XScsXG4gICAgICB1aW50MzJUYWcgPSAnW29iamVjdCBVaW50MzJBcnJheV0nO1xuXG4gIC8qKiBVc2VkIHRvIG1hdGNoIGVtcHR5IHN0cmluZyBsaXRlcmFscyBpbiBjb21waWxlZCB0ZW1wbGF0ZSBzb3VyY2UuICovXG4gIHZhciByZUVtcHR5U3RyaW5nTGVhZGluZyA9IC9cXGJfX3AgXFwrPSAnJzsvZyxcbiAgICAgIHJlRW1wdHlTdHJpbmdNaWRkbGUgPSAvXFxiKF9fcCBcXCs9KSAnJyBcXCsvZyxcbiAgICAgIHJlRW1wdHlTdHJpbmdUcmFpbGluZyA9IC8oX19lXFwoLio/XFwpfFxcYl9fdFxcKSkgXFwrXFxuJyc7L2c7XG5cbiAgLyoqIFVzZWQgdG8gbWF0Y2ggSFRNTCBlbnRpdGllcyBhbmQgSFRNTCBjaGFyYWN0ZXJzLiAqL1xuICB2YXIgcmVFc2NhcGVkSHRtbCA9IC8mKD86YW1wfGx0fGd0fHF1b3R8IzM5fCM5Nik7L2csXG4gICAgICByZVVuZXNjYXBlZEh0bWwgPSAvWyY8PlwiJ2BdL2csXG4gICAgICByZUhhc0VzY2FwZWRIdG1sID0gUmVnRXhwKHJlRXNjYXBlZEh0bWwuc291cmNlKSxcbiAgICAgIHJlSGFzVW5lc2NhcGVkSHRtbCA9IFJlZ0V4cChyZVVuZXNjYXBlZEh0bWwuc291cmNlKTtcblxuICAvKiogVXNlZCB0byBtYXRjaCB0ZW1wbGF0ZSBkZWxpbWl0ZXJzLiAqL1xuICB2YXIgcmVFc2NhcGUgPSAvPCUtKFtcXHNcXFNdKz8pJT4vZyxcbiAgICAgIHJlRXZhbHVhdGUgPSAvPCUoW1xcc1xcU10rPyklPi9nLFxuICAgICAgcmVJbnRlcnBvbGF0ZSA9IC88JT0oW1xcc1xcU10rPyklPi9nO1xuXG4gIC8qKiBVc2VkIHRvIG1hdGNoIHByb3BlcnR5IG5hbWVzIHdpdGhpbiBwcm9wZXJ0eSBwYXRocy4gKi9cbiAgdmFyIHJlSXNEZWVwUHJvcCA9IC9cXC58XFxbKD86W15bXFxdXSp8KFtcIiddKSg/Oig/IVxcMSlbXlxcblxcXFxdfFxcXFwuKSo/XFwxKVxcXS8sXG4gICAgICByZUlzUGxhaW5Qcm9wID0gL15cXHcqJC8sXG4gICAgICByZVByb3BOYW1lID0gL1teLltcXF1dK3xcXFsoPzooLT9cXGQrKD86XFwuXFxkKyk/KXwoW1wiJ10pKCg/Oig/IVxcMilbXlxcblxcXFxdfFxcXFwuKSo/KVxcMilcXF0vZztcblxuICAvKipcbiAgICogVXNlZCB0byBtYXRjaCBgUmVnRXhwYCBbc3ludGF4IGNoYXJhY3RlcnNdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLXBhdHRlcm5zKVxuICAgKiBhbmQgdGhvc2Ugb3V0bGluZWQgYnkgW2BFc2NhcGVSZWdFeHBQYXR0ZXJuYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtZXNjYXBlcmVnZXhwcGF0dGVybikuXG4gICAqL1xuICB2YXIgcmVSZWdFeHBDaGFycyA9IC9eWzohLF18W1xcXFxeJC4qKz8oKVtcXF17fXxcXC9dfCheWzAtOWEtZkEtRm5ydHV2eF0pfChbXFxuXFxyXFx1MjAyOFxcdTIwMjldKS9nLFxuICAgICAgcmVIYXNSZWdFeHBDaGFycyA9IFJlZ0V4cChyZVJlZ0V4cENoYXJzLnNvdXJjZSk7XG5cbiAgLyoqIFVzZWQgdG8gbWF0Y2ggW2NvbWJpbmluZyBkaWFjcml0aWNhbCBtYXJrc10oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ29tYmluaW5nX0RpYWNyaXRpY2FsX01hcmtzKS4gKi9cbiAgdmFyIHJlQ29tYm9NYXJrID0gL1tcXHUwMzAwLVxcdTAzNmZcXHVmZTIwLVxcdWZlMjNdL2c7XG5cbiAgLyoqIFVzZWQgdG8gbWF0Y2ggYmFja3NsYXNoZXMgaW4gcHJvcGVydHkgcGF0aHMuICovXG4gIHZhciByZUVzY2FwZUNoYXIgPSAvXFxcXChcXFxcKT8vZztcblxuICAvKiogVXNlZCB0byBtYXRjaCBbRVMgdGVtcGxhdGUgZGVsaW1pdGVyc10oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtdGVtcGxhdGUtbGl0ZXJhbC1sZXhpY2FsLWNvbXBvbmVudHMpLiAqL1xuICB2YXIgcmVFc1RlbXBsYXRlID0gL1xcJFxceyhbXlxcXFx9XSooPzpcXFxcLlteXFxcXH1dKikqKVxcfS9nO1xuXG4gIC8qKiBVc2VkIHRvIG1hdGNoIGBSZWdFeHBgIGZsYWdzIGZyb20gdGhlaXIgY29lcmNlZCBzdHJpbmcgdmFsdWVzLiAqL1xuICB2YXIgcmVGbGFncyA9IC9cXHcqJC87XG5cbiAgLyoqIFVzZWQgdG8gZGV0ZWN0IGhleGFkZWNpbWFsIHN0cmluZyB2YWx1ZXMuICovXG4gIHZhciByZUhhc0hleFByZWZpeCA9IC9eMFt4WF0vO1xuXG4gIC8qKiBVc2VkIHRvIGRldGVjdCBob3N0IGNvbnN0cnVjdG9ycyAoU2FmYXJpID4gNSkuICovXG4gIHZhciByZUlzSG9zdEN0b3IgPSAvXlxcW29iamVjdCAuKz9Db25zdHJ1Y3RvclxcXSQvO1xuXG4gIC8qKiBVc2VkIHRvIGRldGVjdCB1bnNpZ25lZCBpbnRlZ2VyIHZhbHVlcy4gKi9cbiAgdmFyIHJlSXNVaW50ID0gL15cXGQrJC87XG5cbiAgLyoqIFVzZWQgdG8gbWF0Y2ggbGF0aW4tMSBzdXBwbGVtZW50YXJ5IGxldHRlcnMgKGV4Y2x1ZGluZyBtYXRoZW1hdGljYWwgb3BlcmF0b3JzKS4gKi9cbiAgdmFyIHJlTGF0aW4xID0gL1tcXHhjMC1cXHhkNlxceGQ4LVxceGRlXFx4ZGYtXFx4ZjZcXHhmOC1cXHhmZl0vZztcblxuICAvKiogVXNlZCB0byBlbnN1cmUgY2FwdHVyaW5nIG9yZGVyIG9mIHRlbXBsYXRlIGRlbGltaXRlcnMuICovXG4gIHZhciByZU5vTWF0Y2ggPSAvKCReKS87XG5cbiAgLyoqIFVzZWQgdG8gbWF0Y2ggdW5lc2NhcGVkIGNoYXJhY3RlcnMgaW4gY29tcGlsZWQgc3RyaW5nIGxpdGVyYWxzLiAqL1xuICB2YXIgcmVVbmVzY2FwZWRTdHJpbmcgPSAvWydcXG5cXHJcXHUyMDI4XFx1MjAyOVxcXFxdL2c7XG5cbiAgLyoqIFVzZWQgdG8gbWF0Y2ggd29yZHMgdG8gY3JlYXRlIGNvbXBvdW5kIHdvcmRzLiAqL1xuICB2YXIgcmVXb3JkcyA9IChmdW5jdGlvbigpIHtcbiAgICB2YXIgdXBwZXIgPSAnW0EtWlxcXFx4YzAtXFxcXHhkNlxcXFx4ZDgtXFxcXHhkZV0nLFxuICAgICAgICBsb3dlciA9ICdbYS16XFxcXHhkZi1cXFxceGY2XFxcXHhmOC1cXFxceGZmXSsnO1xuXG4gICAgcmV0dXJuIFJlZ0V4cCh1cHBlciArICcrKD89JyArIHVwcGVyICsgbG93ZXIgKyAnKXwnICsgdXBwZXIgKyAnPycgKyBsb3dlciArICd8JyArIHVwcGVyICsgJyt8WzAtOV0rJywgJ2cnKTtcbiAgfSgpKTtcblxuICAvKiogVXNlZCB0byBhc3NpZ24gZGVmYXVsdCBgY29udGV4dGAgb2JqZWN0IHByb3BlcnRpZXMuICovXG4gIHZhciBjb250ZXh0UHJvcHMgPSBbXG4gICAgJ0FycmF5JywgJ0FycmF5QnVmZmVyJywgJ0RhdGUnLCAnRXJyb3InLCAnRmxvYXQzMkFycmF5JywgJ0Zsb2F0NjRBcnJheScsXG4gICAgJ0Z1bmN0aW9uJywgJ0ludDhBcnJheScsICdJbnQxNkFycmF5JywgJ0ludDMyQXJyYXknLCAnTWF0aCcsICdOdW1iZXInLFxuICAgICdPYmplY3QnLCAnUmVnRXhwJywgJ1NldCcsICdTdHJpbmcnLCAnXycsICdjbGVhclRpbWVvdXQnLCAnaXNGaW5pdGUnLFxuICAgICdwYXJzZUZsb2F0JywgJ3BhcnNlSW50JywgJ3NldFRpbWVvdXQnLCAnVHlwZUVycm9yJywgJ1VpbnQ4QXJyYXknLFxuICAgICdVaW50OENsYW1wZWRBcnJheScsICdVaW50MTZBcnJheScsICdVaW50MzJBcnJheScsICdXZWFrTWFwJ1xuICBdO1xuXG4gIC8qKiBVc2VkIHRvIG1ha2UgdGVtcGxhdGUgc291cmNlVVJMcyBlYXNpZXIgdG8gaWRlbnRpZnkuICovXG4gIHZhciB0ZW1wbGF0ZUNvdW50ZXIgPSAtMTtcblxuICAvKiogVXNlZCB0byBpZGVudGlmeSBgdG9TdHJpbmdUYWdgIHZhbHVlcyBvZiB0eXBlZCBhcnJheXMuICovXG4gIHZhciB0eXBlZEFycmF5VGFncyA9IHt9O1xuICB0eXBlZEFycmF5VGFnc1tmbG9hdDMyVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2Zsb2F0NjRUYWddID1cbiAgdHlwZWRBcnJheVRhZ3NbaW50OFRhZ10gPSB0eXBlZEFycmF5VGFnc1tpbnQxNlRhZ10gPVxuICB0eXBlZEFycmF5VGFnc1tpbnQzMlRhZ10gPSB0eXBlZEFycmF5VGFnc1t1aW50OFRhZ10gPVxuICB0eXBlZEFycmF5VGFnc1t1aW50OENsYW1wZWRUYWddID0gdHlwZWRBcnJheVRhZ3NbdWludDE2VGFnXSA9XG4gIHR5cGVkQXJyYXlUYWdzW3VpbnQzMlRhZ10gPSB0cnVlO1xuICB0eXBlZEFycmF5VGFnc1thcmdzVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2FycmF5VGFnXSA9XG4gIHR5cGVkQXJyYXlUYWdzW2FycmF5QnVmZmVyVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2Jvb2xUYWddID1cbiAgdHlwZWRBcnJheVRhZ3NbZGF0ZVRhZ10gPSB0eXBlZEFycmF5VGFnc1tlcnJvclRhZ10gPVxuICB0eXBlZEFycmF5VGFnc1tmdW5jVGFnXSA9IHR5cGVkQXJyYXlUYWdzW21hcFRhZ10gPVxuICB0eXBlZEFycmF5VGFnc1tudW1iZXJUYWddID0gdHlwZWRBcnJheVRhZ3Nbb2JqZWN0VGFnXSA9XG4gIHR5cGVkQXJyYXlUYWdzW3JlZ2V4cFRhZ10gPSB0eXBlZEFycmF5VGFnc1tzZXRUYWddID1cbiAgdHlwZWRBcnJheVRhZ3Nbc3RyaW5nVGFnXSA9IHR5cGVkQXJyYXlUYWdzW3dlYWtNYXBUYWddID0gZmFsc2U7XG5cbiAgLyoqIFVzZWQgdG8gaWRlbnRpZnkgYHRvU3RyaW5nVGFnYCB2YWx1ZXMgc3VwcG9ydGVkIGJ5IGBfLmNsb25lYC4gKi9cbiAgdmFyIGNsb25lYWJsZVRhZ3MgPSB7fTtcbiAgY2xvbmVhYmxlVGFnc1thcmdzVGFnXSA9IGNsb25lYWJsZVRhZ3NbYXJyYXlUYWddID1cbiAgY2xvbmVhYmxlVGFnc1thcnJheUJ1ZmZlclRhZ10gPSBjbG9uZWFibGVUYWdzW2Jvb2xUYWddID1cbiAgY2xvbmVhYmxlVGFnc1tkYXRlVGFnXSA9IGNsb25lYWJsZVRhZ3NbZmxvYXQzMlRhZ10gPVxuICBjbG9uZWFibGVUYWdzW2Zsb2F0NjRUYWddID0gY2xvbmVhYmxlVGFnc1tpbnQ4VGFnXSA9XG4gIGNsb25lYWJsZVRhZ3NbaW50MTZUYWddID0gY2xvbmVhYmxlVGFnc1tpbnQzMlRhZ10gPVxuICBjbG9uZWFibGVUYWdzW251bWJlclRhZ10gPSBjbG9uZWFibGVUYWdzW29iamVjdFRhZ10gPVxuICBjbG9uZWFibGVUYWdzW3JlZ2V4cFRhZ10gPSBjbG9uZWFibGVUYWdzW3N0cmluZ1RhZ10gPVxuICBjbG9uZWFibGVUYWdzW3VpbnQ4VGFnXSA9IGNsb25lYWJsZVRhZ3NbdWludDhDbGFtcGVkVGFnXSA9XG4gIGNsb25lYWJsZVRhZ3NbdWludDE2VGFnXSA9IGNsb25lYWJsZVRhZ3NbdWludDMyVGFnXSA9IHRydWU7XG4gIGNsb25lYWJsZVRhZ3NbZXJyb3JUYWddID0gY2xvbmVhYmxlVGFnc1tmdW5jVGFnXSA9XG4gIGNsb25lYWJsZVRhZ3NbbWFwVGFnXSA9IGNsb25lYWJsZVRhZ3Nbc2V0VGFnXSA9XG4gIGNsb25lYWJsZVRhZ3Nbd2Vha01hcFRhZ10gPSBmYWxzZTtcblxuICAvKiogVXNlZCB0byBtYXAgbGF0aW4tMSBzdXBwbGVtZW50YXJ5IGxldHRlcnMgdG8gYmFzaWMgbGF0aW4gbGV0dGVycy4gKi9cbiAgdmFyIGRlYnVycmVkTGV0dGVycyA9IHtcbiAgICAnXFx4YzAnOiAnQScsICAnXFx4YzEnOiAnQScsICdcXHhjMic6ICdBJywgJ1xceGMzJzogJ0EnLCAnXFx4YzQnOiAnQScsICdcXHhjNSc6ICdBJyxcbiAgICAnXFx4ZTAnOiAnYScsICAnXFx4ZTEnOiAnYScsICdcXHhlMic6ICdhJywgJ1xceGUzJzogJ2EnLCAnXFx4ZTQnOiAnYScsICdcXHhlNSc6ICdhJyxcbiAgICAnXFx4YzcnOiAnQycsICAnXFx4ZTcnOiAnYycsXG4gICAgJ1xceGQwJzogJ0QnLCAgJ1xceGYwJzogJ2QnLFxuICAgICdcXHhjOCc6ICdFJywgICdcXHhjOSc6ICdFJywgJ1xceGNhJzogJ0UnLCAnXFx4Y2InOiAnRScsXG4gICAgJ1xceGU4JzogJ2UnLCAgJ1xceGU5JzogJ2UnLCAnXFx4ZWEnOiAnZScsICdcXHhlYic6ICdlJyxcbiAgICAnXFx4Y0MnOiAnSScsICAnXFx4Y2QnOiAnSScsICdcXHhjZSc6ICdJJywgJ1xceGNmJzogJ0knLFxuICAgICdcXHhlQyc6ICdpJywgICdcXHhlZCc6ICdpJywgJ1xceGVlJzogJ2knLCAnXFx4ZWYnOiAnaScsXG4gICAgJ1xceGQxJzogJ04nLCAgJ1xceGYxJzogJ24nLFxuICAgICdcXHhkMic6ICdPJywgICdcXHhkMyc6ICdPJywgJ1xceGQ0JzogJ08nLCAnXFx4ZDUnOiAnTycsICdcXHhkNic6ICdPJywgJ1xceGQ4JzogJ08nLFxuICAgICdcXHhmMic6ICdvJywgICdcXHhmMyc6ICdvJywgJ1xceGY0JzogJ28nLCAnXFx4ZjUnOiAnbycsICdcXHhmNic6ICdvJywgJ1xceGY4JzogJ28nLFxuICAgICdcXHhkOSc6ICdVJywgICdcXHhkYSc6ICdVJywgJ1xceGRiJzogJ1UnLCAnXFx4ZGMnOiAnVScsXG4gICAgJ1xceGY5JzogJ3UnLCAgJ1xceGZhJzogJ3UnLCAnXFx4ZmInOiAndScsICdcXHhmYyc6ICd1JyxcbiAgICAnXFx4ZGQnOiAnWScsICAnXFx4ZmQnOiAneScsICdcXHhmZic6ICd5JyxcbiAgICAnXFx4YzYnOiAnQWUnLCAnXFx4ZTYnOiAnYWUnLFxuICAgICdcXHhkZSc6ICdUaCcsICdcXHhmZSc6ICd0aCcsXG4gICAgJ1xceGRmJzogJ3NzJ1xuICB9O1xuXG4gIC8qKiBVc2VkIHRvIG1hcCBjaGFyYWN0ZXJzIHRvIEhUTUwgZW50aXRpZXMuICovXG4gIHZhciBodG1sRXNjYXBlcyA9IHtcbiAgICAnJic6ICcmYW1wOycsXG4gICAgJzwnOiAnJmx0OycsXG4gICAgJz4nOiAnJmd0OycsXG4gICAgJ1wiJzogJyZxdW90OycsXG4gICAgXCInXCI6ICcmIzM5OycsXG4gICAgJ2AnOiAnJiM5NjsnXG4gIH07XG5cbiAgLyoqIFVzZWQgdG8gbWFwIEhUTUwgZW50aXRpZXMgdG8gY2hhcmFjdGVycy4gKi9cbiAgdmFyIGh0bWxVbmVzY2FwZXMgPSB7XG4gICAgJyZhbXA7JzogJyYnLFxuICAgICcmbHQ7JzogJzwnLFxuICAgICcmZ3Q7JzogJz4nLFxuICAgICcmcXVvdDsnOiAnXCInLFxuICAgICcmIzM5Oyc6IFwiJ1wiLFxuICAgICcmIzk2Oyc6ICdgJ1xuICB9O1xuXG4gIC8qKiBVc2VkIHRvIGRldGVybWluZSBpZiB2YWx1ZXMgYXJlIG9mIHRoZSBsYW5ndWFnZSB0eXBlIGBPYmplY3RgLiAqL1xuICB2YXIgb2JqZWN0VHlwZXMgPSB7XG4gICAgJ2Z1bmN0aW9uJzogdHJ1ZSxcbiAgICAnb2JqZWN0JzogdHJ1ZVxuICB9O1xuXG4gIC8qKiBVc2VkIHRvIGVzY2FwZSBjaGFyYWN0ZXJzIGZvciBpbmNsdXNpb24gaW4gY29tcGlsZWQgcmVnZXhlcy4gKi9cbiAgdmFyIHJlZ2V4cEVzY2FwZXMgPSB7XG4gICAgJzAnOiAneDMwJywgJzEnOiAneDMxJywgJzInOiAneDMyJywgJzMnOiAneDMzJywgJzQnOiAneDM0JyxcbiAgICAnNSc6ICd4MzUnLCAnNic6ICd4MzYnLCAnNyc6ICd4MzcnLCAnOCc6ICd4MzgnLCAnOSc6ICd4MzknLFxuICAgICdBJzogJ3g0MScsICdCJzogJ3g0MicsICdDJzogJ3g0MycsICdEJzogJ3g0NCcsICdFJzogJ3g0NScsICdGJzogJ3g0NicsXG4gICAgJ2EnOiAneDYxJywgJ2InOiAneDYyJywgJ2MnOiAneDYzJywgJ2QnOiAneDY0JywgJ2UnOiAneDY1JywgJ2YnOiAneDY2JyxcbiAgICAnbic6ICd4NmUnLCAncic6ICd4NzInLCAndCc6ICd4NzQnLCAndSc6ICd4NzUnLCAndic6ICd4NzYnLCAneCc6ICd4NzgnXG4gIH07XG5cbiAgLyoqIFVzZWQgdG8gZXNjYXBlIGNoYXJhY3RlcnMgZm9yIGluY2x1c2lvbiBpbiBjb21waWxlZCBzdHJpbmcgbGl0ZXJhbHMuICovXG4gIHZhciBzdHJpbmdFc2NhcGVzID0ge1xuICAgICdcXFxcJzogJ1xcXFwnLFxuICAgIFwiJ1wiOiBcIidcIixcbiAgICAnXFxuJzogJ24nLFxuICAgICdcXHInOiAncicsXG4gICAgJ1xcdTIwMjgnOiAndTIwMjgnLFxuICAgICdcXHUyMDI5JzogJ3UyMDI5J1xuICB9O1xuXG4gIC8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgZXhwb3J0c2AuICovXG4gIHZhciBmcmVlRXhwb3J0cyA9IG9iamVjdFR5cGVzW3R5cGVvZiBleHBvcnRzXSAmJiBleHBvcnRzICYmICFleHBvcnRzLm5vZGVUeXBlICYmIGV4cG9ydHM7XG5cbiAgLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBtb2R1bGVgLiAqL1xuICB2YXIgZnJlZU1vZHVsZSA9IG9iamVjdFR5cGVzW3R5cGVvZiBtb2R1bGVdICYmIG1vZHVsZSAmJiAhbW9kdWxlLm5vZGVUeXBlICYmIG1vZHVsZTtcblxuICAvKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYGdsb2JhbGAgZnJvbSBOb2RlLmpzLiAqL1xuICB2YXIgZnJlZUdsb2JhbCA9IGZyZWVFeHBvcnRzICYmIGZyZWVNb2R1bGUgJiYgdHlwZW9mIGdsb2JhbCA9PSAnb2JqZWN0JyAmJiBnbG9iYWwgJiYgZ2xvYmFsLk9iamVjdCAmJiBnbG9iYWw7XG5cbiAgLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBzZWxmYC4gKi9cbiAgdmFyIGZyZWVTZWxmID0gb2JqZWN0VHlwZXNbdHlwZW9mIHNlbGZdICYmIHNlbGYgJiYgc2VsZi5PYmplY3QgJiYgc2VsZjtcblxuICAvKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYHdpbmRvd2AuICovXG4gIHZhciBmcmVlV2luZG93ID0gb2JqZWN0VHlwZXNbdHlwZW9mIHdpbmRvd10gJiYgd2luZG93ICYmIHdpbmRvdy5PYmplY3QgJiYgd2luZG93O1xuXG4gIC8qKiBEZXRlY3QgdGhlIHBvcHVsYXIgQ29tbW9uSlMgZXh0ZW5zaW9uIGBtb2R1bGUuZXhwb3J0c2AuICovXG4gIHZhciBtb2R1bGVFeHBvcnRzID0gZnJlZU1vZHVsZSAmJiBmcmVlTW9kdWxlLmV4cG9ydHMgPT09IGZyZWVFeHBvcnRzICYmIGZyZWVFeHBvcnRzO1xuXG4gIC8qKlxuICAgKiBVc2VkIGFzIGEgcmVmZXJlbmNlIHRvIHRoZSBnbG9iYWwgb2JqZWN0LlxuICAgKlxuICAgKiBUaGUgYHRoaXNgIHZhbHVlIGlzIHVzZWQgaWYgaXQncyB0aGUgZ2xvYmFsIG9iamVjdCB0byBhdm9pZCBHcmVhc2Vtb25rZXknc1xuICAgKiByZXN0cmljdGVkIGB3aW5kb3dgIG9iamVjdCwgb3RoZXJ3aXNlIHRoZSBgd2luZG93YCBvYmplY3QgaXMgdXNlZC5cbiAgICovXG4gIHZhciByb290ID0gZnJlZUdsb2JhbCB8fCAoKGZyZWVXaW5kb3cgIT09ICh0aGlzICYmIHRoaXMud2luZG93KSkgJiYgZnJlZVdpbmRvdykgfHwgZnJlZVNlbGYgfHwgdGhpcztcblxuICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAvKipcbiAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYGNvbXBhcmVBc2NlbmRpbmdgIHdoaWNoIGNvbXBhcmVzIHZhbHVlcyBhbmRcbiAgICogc29ydHMgdGhlbSBpbiBhc2NlbmRpbmcgb3JkZXIgd2l0aG91dCBndWFyYW50ZWVpbmcgYSBzdGFibGUgc29ydC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29tcGFyZS5cbiAgICogQHBhcmFtIHsqfSBvdGhlciBUaGUgb3RoZXIgdmFsdWUgdG8gY29tcGFyZS5cbiAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgc29ydCBvcmRlciBpbmRpY2F0b3IgZm9yIGB2YWx1ZWAuXG4gICAqL1xuICBmdW5jdGlvbiBiYXNlQ29tcGFyZUFzY2VuZGluZyh2YWx1ZSwgb3RoZXIpIHtcbiAgICBpZiAodmFsdWUgIT09IG90aGVyKSB7XG4gICAgICB2YXIgdmFsSXNOdWxsID0gdmFsdWUgPT09IG51bGwsXG4gICAgICAgICAgdmFsSXNVbmRlZiA9IHZhbHVlID09PSB1bmRlZmluZWQsXG4gICAgICAgICAgdmFsSXNSZWZsZXhpdmUgPSB2YWx1ZSA9PT0gdmFsdWU7XG5cbiAgICAgIHZhciBvdGhJc051bGwgPSBvdGhlciA9PT0gbnVsbCxcbiAgICAgICAgICBvdGhJc1VuZGVmID0gb3RoZXIgPT09IHVuZGVmaW5lZCxcbiAgICAgICAgICBvdGhJc1JlZmxleGl2ZSA9IG90aGVyID09PSBvdGhlcjtcblxuICAgICAgaWYgKCh2YWx1ZSA+IG90aGVyICYmICFvdGhJc051bGwpIHx8ICF2YWxJc1JlZmxleGl2ZSB8fFxuICAgICAgICAgICh2YWxJc051bGwgJiYgIW90aElzVW5kZWYgJiYgb3RoSXNSZWZsZXhpdmUpIHx8XG4gICAgICAgICAgKHZhbElzVW5kZWYgJiYgb3RoSXNSZWZsZXhpdmUpKSB7XG4gICAgICAgIHJldHVybiAxO1xuICAgICAgfVxuICAgICAgaWYgKCh2YWx1ZSA8IG90aGVyICYmICF2YWxJc051bGwpIHx8ICFvdGhJc1JlZmxleGl2ZSB8fFxuICAgICAgICAgIChvdGhJc051bGwgJiYgIXZhbElzVW5kZWYgJiYgdmFsSXNSZWZsZXhpdmUpIHx8XG4gICAgICAgICAgKG90aElzVW5kZWYgJiYgdmFsSXNSZWZsZXhpdmUpKSB7XG4gICAgICAgIHJldHVybiAtMTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uZmluZEluZGV4YCBhbmQgYF8uZmluZExhc3RJbmRleGAgd2l0aG91dFxuICAgKiBzdXBwb3J0IGZvciBjYWxsYmFjayBzaG9ydGhhbmRzIGFuZCBgdGhpc2AgYmluZGluZy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHNlYXJjaC5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZGljYXRlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2Zyb21SaWdodF0gU3BlY2lmeSBpdGVyYXRpbmcgZnJvbSByaWdodCB0byBsZWZ0LlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgbWF0Y2hlZCB2YWx1ZSwgZWxzZSBgLTFgLlxuICAgKi9cbiAgZnVuY3Rpb24gYmFzZUZpbmRJbmRleChhcnJheSwgcHJlZGljYXRlLCBmcm9tUmlnaHQpIHtcbiAgICB2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoLFxuICAgICAgICBpbmRleCA9IGZyb21SaWdodCA/IGxlbmd0aCA6IC0xO1xuXG4gICAgd2hpbGUgKChmcm9tUmlnaHQgPyBpbmRleC0tIDogKytpbmRleCA8IGxlbmd0aCkpIHtcbiAgICAgIGlmIChwcmVkaWNhdGUoYXJyYXlbaW5kZXhdLCBpbmRleCwgYXJyYXkpKSB7XG4gICAgICAgIHJldHVybiBpbmRleDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIC0xO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmluZGV4T2ZgIHdpdGhvdXQgc3VwcG9ydCBmb3IgYmluYXJ5IHNlYXJjaGVzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gc2VhcmNoLlxuICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZWFyY2ggZm9yLlxuICAgKiBAcGFyYW0ge251bWJlcn0gZnJvbUluZGV4IFRoZSBpbmRleCB0byBzZWFyY2ggZnJvbS5cbiAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIG1hdGNoZWQgdmFsdWUsIGVsc2UgYC0xYC5cbiAgICovXG4gIGZ1bmN0aW9uIGJhc2VJbmRleE9mKGFycmF5LCB2YWx1ZSwgZnJvbUluZGV4KSB7XG4gICAgaWYgKHZhbHVlICE9PSB2YWx1ZSkge1xuICAgICAgcmV0dXJuIGluZGV4T2ZOYU4oYXJyYXksIGZyb21JbmRleCk7XG4gICAgfVxuICAgIHZhciBpbmRleCA9IGZyb21JbmRleCAtIDEsXG4gICAgICAgIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcblxuICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICBpZiAoYXJyYXlbaW5kZXhdID09PSB2YWx1ZSkge1xuICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAtMTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pc0Z1bmN0aW9uYCB3aXRob3V0IHN1cHBvcnQgZm9yIGVudmlyb25tZW50c1xuICAgKiB3aXRoIGluY29ycmVjdCBgdHlwZW9mYCByZXN1bHRzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgY29ycmVjdGx5IGNsYXNzaWZpZWQsIGVsc2UgYGZhbHNlYC5cbiAgICovXG4gIGZ1bmN0aW9uIGJhc2VJc0Z1bmN0aW9uKHZhbHVlKSB7XG4gICAgLy8gQXZvaWQgYSBDaGFrcmEgSklUIGJ1ZyBpbiBjb21wYXRpYmlsaXR5IG1vZGVzIG9mIElFIDExLlxuICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vamFzaGtlbmFzL3VuZGVyc2NvcmUvaXNzdWVzLzE2MjEgZm9yIG1vcmUgZGV0YWlscy5cbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdmdW5jdGlvbicgfHwgZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydHMgYHZhbHVlYCB0byBhIHN0cmluZyBpZiBpdCdzIG5vdCBvbmUuIEFuIGVtcHR5IHN0cmluZyBpcyByZXR1cm5lZFxuICAgKiBmb3IgYG51bGxgIG9yIGB1bmRlZmluZWRgIHZhbHVlcy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cbiAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc3RyaW5nLlxuICAgKi9cbiAgZnVuY3Rpb24gYmFzZVRvU3RyaW5nKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlID09IG51bGwgPyAnJyA6ICh2YWx1ZSArICcnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVc2VkIGJ5IGBfLnRyaW1gIGFuZCBgXy50cmltTGVmdGAgdG8gZ2V0IHRoZSBpbmRleCBvZiB0aGUgZmlyc3QgY2hhcmFjdGVyXG4gICAqIG9mIGBzdHJpbmdgIHRoYXQgaXMgbm90IGZvdW5kIGluIGBjaGFyc2AuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmcgVGhlIHN0cmluZyB0byBpbnNwZWN0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gY2hhcnMgVGhlIGNoYXJhY3RlcnMgdG8gZmluZC5cbiAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGNoYXJhY3RlciBub3QgZm91bmQgaW4gYGNoYXJzYC5cbiAgICovXG4gIGZ1bmN0aW9uIGNoYXJzTGVmdEluZGV4KHN0cmluZywgY2hhcnMpIHtcbiAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgbGVuZ3RoID0gc3RyaW5nLmxlbmd0aDtcblxuICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoICYmIGNoYXJzLmluZGV4T2Yoc3RyaW5nLmNoYXJBdChpbmRleCkpID4gLTEpIHt9XG4gICAgcmV0dXJuIGluZGV4O1xuICB9XG5cbiAgLyoqXG4gICAqIFVzZWQgYnkgYF8udHJpbWAgYW5kIGBfLnRyaW1SaWdodGAgdG8gZ2V0IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBjaGFyYWN0ZXJcbiAgICogb2YgYHN0cmluZ2AgdGhhdCBpcyBub3QgZm91bmQgaW4gYGNoYXJzYC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyBUaGUgc3RyaW5nIHRvIGluc3BlY3QuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjaGFycyBUaGUgY2hhcmFjdGVycyB0byBmaW5kLlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgbGFzdCBjaGFyYWN0ZXIgbm90IGZvdW5kIGluIGBjaGFyc2AuXG4gICAqL1xuICBmdW5jdGlvbiBjaGFyc1JpZ2h0SW5kZXgoc3RyaW5nLCBjaGFycykge1xuICAgIHZhciBpbmRleCA9IHN0cmluZy5sZW5ndGg7XG5cbiAgICB3aGlsZSAoaW5kZXgtLSAmJiBjaGFycy5pbmRleE9mKHN0cmluZy5jaGFyQXQoaW5kZXgpKSA+IC0xKSB7fVxuICAgIHJldHVybiBpbmRleDtcbiAgfVxuXG4gIC8qKlxuICAgKiBVc2VkIGJ5IGBfLnNvcnRCeWAgdG8gY29tcGFyZSB0cmFuc2Zvcm1lZCBlbGVtZW50cyBvZiBhIGNvbGxlY3Rpb24gYW5kIHN0YWJsZVxuICAgKiBzb3J0IHRoZW0gaW4gYXNjZW5kaW5nIG9yZGVyLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gY29tcGFyZS5cbiAgICogQHBhcmFtIHtPYmplY3R9IG90aGVyIFRoZSBvdGhlciBvYmplY3QgdG8gY29tcGFyZS5cbiAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgc29ydCBvcmRlciBpbmRpY2F0b3IgZm9yIGBvYmplY3RgLlxuICAgKi9cbiAgZnVuY3Rpb24gY29tcGFyZUFzY2VuZGluZyhvYmplY3QsIG90aGVyKSB7XG4gICAgcmV0dXJuIGJhc2VDb21wYXJlQXNjZW5kaW5nKG9iamVjdC5jcml0ZXJpYSwgb3RoZXIuY3JpdGVyaWEpIHx8IChvYmplY3QuaW5kZXggLSBvdGhlci5pbmRleCk7XG4gIH1cblxuICAvKipcbiAgICogVXNlZCBieSBgXy5zb3J0QnlPcmRlcmAgdG8gY29tcGFyZSBtdWx0aXBsZSBwcm9wZXJ0aWVzIG9mIGEgdmFsdWUgdG8gYW5vdGhlclxuICAgKiBhbmQgc3RhYmxlIHNvcnQgdGhlbS5cbiAgICpcbiAgICogSWYgYG9yZGVyc2AgaXMgdW5zcGVjaWZpZWQsIGFsbCB2YWx1ZXNzIGFyZSBzb3J0ZWQgaW4gYXNjZW5kaW5nIG9yZGVyLiBPdGhlcndpc2UsXG4gICAqIGEgdmFsdWUgaXMgc29ydGVkIGluIGFzY2VuZGluZyBvcmRlciBpZiBpdHMgY29ycmVzcG9uZGluZyBvcmRlciBpcyBcImFzY1wiLCBhbmRcbiAgICogZGVzY2VuZGluZyBpZiBcImRlc2NcIi5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGNvbXBhcmUuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvdGhlciBUaGUgb3RoZXIgb2JqZWN0IHRvIGNvbXBhcmUuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbltdfSBvcmRlcnMgVGhlIG9yZGVyIHRvIHNvcnQgYnkgZm9yIGVhY2ggcHJvcGVydHkuXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHNvcnQgb3JkZXIgaW5kaWNhdG9yIGZvciBgb2JqZWN0YC5cbiAgICovXG4gIGZ1bmN0aW9uIGNvbXBhcmVNdWx0aXBsZShvYmplY3QsIG90aGVyLCBvcmRlcnMpIHtcbiAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgb2JqQ3JpdGVyaWEgPSBvYmplY3QuY3JpdGVyaWEsXG4gICAgICAgIG90aENyaXRlcmlhID0gb3RoZXIuY3JpdGVyaWEsXG4gICAgICAgIGxlbmd0aCA9IG9iakNyaXRlcmlhLmxlbmd0aCxcbiAgICAgICAgb3JkZXJzTGVuZ3RoID0gb3JkZXJzLmxlbmd0aDtcblxuICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gYmFzZUNvbXBhcmVBc2NlbmRpbmcob2JqQ3JpdGVyaWFbaW5kZXhdLCBvdGhDcml0ZXJpYVtpbmRleF0pO1xuICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICBpZiAoaW5kZXggPj0gb3JkZXJzTGVuZ3RoKSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb3JkZXIgPSBvcmRlcnNbaW5kZXhdO1xuICAgICAgICByZXR1cm4gcmVzdWx0ICogKChvcmRlciA9PT0gJ2FzYycgfHwgb3JkZXIgPT09IHRydWUpID8gMSA6IC0xKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gRml4ZXMgYW4gYEFycmF5I3NvcnRgIGJ1ZyBpbiB0aGUgSlMgZW5naW5lIGVtYmVkZGVkIGluIEFkb2JlIGFwcGxpY2F0aW9uc1xuICAgIC8vIHRoYXQgY2F1c2VzIGl0LCB1bmRlciBjZXJ0YWluIGNpcmN1bXN0YW5jZXMsIHRvIHByb3ZpZGUgdGhlIHNhbWUgdmFsdWUgZm9yXG4gICAgLy8gYG9iamVjdGAgYW5kIGBvdGhlcmAuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vamFzaGtlbmFzL3VuZGVyc2NvcmUvcHVsbC8xMjQ3XG4gICAgLy8gZm9yIG1vcmUgZGV0YWlscy5cbiAgICAvL1xuICAgIC8vIFRoaXMgYWxzbyBlbnN1cmVzIGEgc3RhYmxlIHNvcnQgaW4gVjggYW5kIG90aGVyIGVuZ2luZXMuXG4gICAgLy8gU2VlIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvdjgvaXNzdWVzL2RldGFpbD9pZD05MCBmb3IgbW9yZSBkZXRhaWxzLlxuICAgIHJldHVybiBvYmplY3QuaW5kZXggLSBvdGhlci5pbmRleDtcbiAgfVxuXG4gIC8qKlxuICAgKiBVc2VkIGJ5IGBfLmRlYnVycmAgdG8gY29udmVydCBsYXRpbi0xIHN1cHBsZW1lbnRhcnkgbGV0dGVycyB0byBiYXNpYyBsYXRpbiBsZXR0ZXJzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gbGV0dGVyIFRoZSBtYXRjaGVkIGxldHRlciB0byBkZWJ1cnIuXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGRlYnVycmVkIGxldHRlci5cbiAgICovXG4gIGZ1bmN0aW9uIGRlYnVyckxldHRlcihsZXR0ZXIpIHtcbiAgICByZXR1cm4gZGVidXJyZWRMZXR0ZXJzW2xldHRlcl07XG4gIH1cblxuICAvKipcbiAgICogVXNlZCBieSBgXy5lc2NhcGVgIHRvIGNvbnZlcnQgY2hhcmFjdGVycyB0byBIVE1MIGVudGl0aWVzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gY2hyIFRoZSBtYXRjaGVkIGNoYXJhY3RlciB0byBlc2NhcGUuXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGVzY2FwZWQgY2hhcmFjdGVyLlxuICAgKi9cbiAgZnVuY3Rpb24gZXNjYXBlSHRtbENoYXIoY2hyKSB7XG4gICAgcmV0dXJuIGh0bWxFc2NhcGVzW2Nocl07XG4gIH1cblxuICAvKipcbiAgICogVXNlZCBieSBgXy5lc2NhcGVSZWdFeHBgIHRvIGVzY2FwZSBjaGFyYWN0ZXJzIGZvciBpbmNsdXNpb24gaW4gY29tcGlsZWQgcmVnZXhlcy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNociBUaGUgbWF0Y2hlZCBjaGFyYWN0ZXIgdG8gZXNjYXBlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbGVhZGluZ0NoYXIgVGhlIGNhcHR1cmUgZ3JvdXAgZm9yIGEgbGVhZGluZyBjaGFyYWN0ZXIuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB3aGl0ZXNwYWNlQ2hhciBUaGUgY2FwdHVyZSBncm91cCBmb3IgYSB3aGl0ZXNwYWNlIGNoYXJhY3Rlci5cbiAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgZXNjYXBlZCBjaGFyYWN0ZXIuXG4gICAqL1xuICBmdW5jdGlvbiBlc2NhcGVSZWdFeHBDaGFyKGNociwgbGVhZGluZ0NoYXIsIHdoaXRlc3BhY2VDaGFyKSB7XG4gICAgaWYgKGxlYWRpbmdDaGFyKSB7XG4gICAgICBjaHIgPSByZWdleHBFc2NhcGVzW2Nocl07XG4gICAgfSBlbHNlIGlmICh3aGl0ZXNwYWNlQ2hhcikge1xuICAgICAgY2hyID0gc3RyaW5nRXNjYXBlc1tjaHJdO1xuICAgIH1cbiAgICByZXR1cm4gJ1xcXFwnICsgY2hyO1xuICB9XG5cbiAgLyoqXG4gICAqIFVzZWQgYnkgYF8udGVtcGxhdGVgIHRvIGVzY2FwZSBjaGFyYWN0ZXJzIGZvciBpbmNsdXNpb24gaW4gY29tcGlsZWQgc3RyaW5nIGxpdGVyYWxzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gY2hyIFRoZSBtYXRjaGVkIGNoYXJhY3RlciB0byBlc2NhcGUuXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGVzY2FwZWQgY2hhcmFjdGVyLlxuICAgKi9cbiAgZnVuY3Rpb24gZXNjYXBlU3RyaW5nQ2hhcihjaHIpIHtcbiAgICByZXR1cm4gJ1xcXFwnICsgc3RyaW5nRXNjYXBlc1tjaHJdO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGluZGV4IGF0IHdoaWNoIHRoZSBmaXJzdCBvY2N1cnJlbmNlIG9mIGBOYU5gIGlzIGZvdW5kIGluIGBhcnJheWAuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBzZWFyY2guXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBmcm9tSW5kZXggVGhlIGluZGV4IHRvIHNlYXJjaCBmcm9tLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtmcm9tUmlnaHRdIFNwZWNpZnkgaXRlcmF0aW5nIGZyb20gcmlnaHQgdG8gbGVmdC5cbiAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIG1hdGNoZWQgYE5hTmAsIGVsc2UgYC0xYC5cbiAgICovXG4gIGZ1bmN0aW9uIGluZGV4T2ZOYU4oYXJyYXksIGZyb21JbmRleCwgZnJvbVJpZ2h0KSB7XG4gICAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aCxcbiAgICAgICAgaW5kZXggPSBmcm9tSW5kZXggKyAoZnJvbVJpZ2h0ID8gMCA6IC0xKTtcblxuICAgIHdoaWxlICgoZnJvbVJpZ2h0ID8gaW5kZXgtLSA6ICsraW5kZXggPCBsZW5ndGgpKSB7XG4gICAgICB2YXIgb3RoZXIgPSBhcnJheVtpbmRleF07XG4gICAgICBpZiAob3RoZXIgIT09IG90aGVyKSB7XG4gICAgICAgIHJldHVybiBpbmRleDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIC0xO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UsIGVsc2UgYGZhbHNlYC5cbiAgICovXG4gIGZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuICAgIHJldHVybiAhIXZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0JztcbiAgfVxuXG4gIC8qKlxuICAgKiBVc2VkIGJ5IGB0cmltbWVkTGVmdEluZGV4YCBhbmQgYHRyaW1tZWRSaWdodEluZGV4YCB0byBkZXRlcm1pbmUgaWYgYVxuICAgKiBjaGFyYWN0ZXIgY29kZSBpcyB3aGl0ZXNwYWNlLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge251bWJlcn0gY2hhckNvZGUgVGhlIGNoYXJhY3RlciBjb2RlIHRvIGluc3BlY3QuXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgY2hhckNvZGVgIGlzIHdoaXRlc3BhY2UsIGVsc2UgYGZhbHNlYC5cbiAgICovXG4gIGZ1bmN0aW9uIGlzU3BhY2UoY2hhckNvZGUpIHtcbiAgICByZXR1cm4gKChjaGFyQ29kZSA8PSAxNjAgJiYgKGNoYXJDb2RlID49IDkgJiYgY2hhckNvZGUgPD0gMTMpIHx8IGNoYXJDb2RlID09IDMyIHx8IGNoYXJDb2RlID09IDE2MCkgfHwgY2hhckNvZGUgPT0gNTc2MCB8fCBjaGFyQ29kZSA9PSA2MTU4IHx8XG4gICAgICAoY2hhckNvZGUgPj0gODE5MiAmJiAoY2hhckNvZGUgPD0gODIwMiB8fCBjaGFyQ29kZSA9PSA4MjMyIHx8IGNoYXJDb2RlID09IDgyMzMgfHwgY2hhckNvZGUgPT0gODIzOSB8fCBjaGFyQ29kZSA9PSA4Mjg3IHx8IGNoYXJDb2RlID09IDEyMjg4IHx8IGNoYXJDb2RlID09IDY1Mjc5KSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlcGxhY2VzIGFsbCBgcGxhY2Vob2xkZXJgIGVsZW1lbnRzIGluIGBhcnJheWAgd2l0aCBhbiBpbnRlcm5hbCBwbGFjZWhvbGRlclxuICAgKiBhbmQgcmV0dXJucyBhbiBhcnJheSBvZiB0aGVpciBpbmRleGVzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gbW9kaWZ5LlxuICAgKiBAcGFyYW0geyp9IHBsYWNlaG9sZGVyIFRoZSBwbGFjZWhvbGRlciB0byByZXBsYWNlLlxuICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBhcnJheSBvZiBwbGFjZWhvbGRlciBpbmRleGVzLlxuICAgKi9cbiAgZnVuY3Rpb24gcmVwbGFjZUhvbGRlcnMoYXJyYXksIHBsYWNlaG9sZGVyKSB7XG4gICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgIGxlbmd0aCA9IGFycmF5Lmxlbmd0aCxcbiAgICAgICAgcmVzSW5kZXggPSAtMSxcbiAgICAgICAgcmVzdWx0ID0gW107XG5cbiAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgaWYgKGFycmF5W2luZGV4XSA9PT0gcGxhY2Vob2xkZXIpIHtcbiAgICAgICAgYXJyYXlbaW5kZXhdID0gUExBQ0VIT0xERVI7XG4gICAgICAgIHJlc3VsdFsrK3Jlc0luZGV4XSA9IGluZGV4O1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIEFuIGltcGxlbWVudGF0aW9uIG9mIGBfLnVuaXFgIG9wdGltaXplZCBmb3Igc29ydGVkIGFycmF5cyB3aXRob3V0IHN1cHBvcnRcbiAgICogZm9yIGNhbGxiYWNrIHNob3J0aGFuZHMgYW5kIGB0aGlzYCBiaW5kaW5nLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaW5zcGVjdC5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2l0ZXJhdGVlXSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBkdXBsaWNhdGUtdmFsdWUtZnJlZSBhcnJheS5cbiAgICovXG4gIGZ1bmN0aW9uIHNvcnRlZFVuaXEoYXJyYXksIGl0ZXJhdGVlKSB7XG4gICAgdmFyIHNlZW4sXG4gICAgICAgIGluZGV4ID0gLTEsXG4gICAgICAgIGxlbmd0aCA9IGFycmF5Lmxlbmd0aCxcbiAgICAgICAgcmVzSW5kZXggPSAtMSxcbiAgICAgICAgcmVzdWx0ID0gW107XG5cbiAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgdmFyIHZhbHVlID0gYXJyYXlbaW5kZXhdLFxuICAgICAgICAgIGNvbXB1dGVkID0gaXRlcmF0ZWUgPyBpdGVyYXRlZSh2YWx1ZSwgaW5kZXgsIGFycmF5KSA6IHZhbHVlO1xuXG4gICAgICBpZiAoIWluZGV4IHx8IHNlZW4gIT09IGNvbXB1dGVkKSB7XG4gICAgICAgIHNlZW4gPSBjb21wdXRlZDtcbiAgICAgICAgcmVzdWx0WysrcmVzSW5kZXhdID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogVXNlZCBieSBgXy50cmltYCBhbmQgYF8udHJpbUxlZnRgIHRvIGdldCB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IG5vbi13aGl0ZXNwYWNlXG4gICAqIGNoYXJhY3RlciBvZiBgc3RyaW5nYC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyBUaGUgc3RyaW5nIHRvIGluc3BlY3QuXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBub24td2hpdGVzcGFjZSBjaGFyYWN0ZXIuXG4gICAqL1xuICBmdW5jdGlvbiB0cmltbWVkTGVmdEluZGV4KHN0cmluZykge1xuICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICBsZW5ndGggPSBzdHJpbmcubGVuZ3RoO1xuXG4gICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGggJiYgaXNTcGFjZShzdHJpbmcuY2hhckNvZGVBdChpbmRleCkpKSB7fVxuICAgIHJldHVybiBpbmRleDtcbiAgfVxuXG4gIC8qKlxuICAgKiBVc2VkIGJ5IGBfLnRyaW1gIGFuZCBgXy50cmltUmlnaHRgIHRvIGdldCB0aGUgaW5kZXggb2YgdGhlIGxhc3Qgbm9uLXdoaXRlc3BhY2VcbiAgICogY2hhcmFjdGVyIG9mIGBzdHJpbmdgLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIFRoZSBzdHJpbmcgdG8gaW5zcGVjdC5cbiAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGxhc3Qgbm9uLXdoaXRlc3BhY2UgY2hhcmFjdGVyLlxuICAgKi9cbiAgZnVuY3Rpb24gdHJpbW1lZFJpZ2h0SW5kZXgoc3RyaW5nKSB7XG4gICAgdmFyIGluZGV4ID0gc3RyaW5nLmxlbmd0aDtcblxuICAgIHdoaWxlIChpbmRleC0tICYmIGlzU3BhY2Uoc3RyaW5nLmNoYXJDb2RlQXQoaW5kZXgpKSkge31cbiAgICByZXR1cm4gaW5kZXg7XG4gIH1cblxuICAvKipcbiAgICogVXNlZCBieSBgXy51bmVzY2FwZWAgdG8gY29udmVydCBIVE1MIGVudGl0aWVzIHRvIGNoYXJhY3RlcnMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjaHIgVGhlIG1hdGNoZWQgY2hhcmFjdGVyIHRvIHVuZXNjYXBlLlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSB1bmVzY2FwZWQgY2hhcmFjdGVyLlxuICAgKi9cbiAgZnVuY3Rpb24gdW5lc2NhcGVIdG1sQ2hhcihjaHIpIHtcbiAgICByZXR1cm4gaHRtbFVuZXNjYXBlc1tjaHJdO1xuICB9XG5cbiAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBwcmlzdGluZSBgbG9kYXNoYCBmdW5jdGlvbiB1c2luZyB0aGUgZ2l2ZW4gYGNvbnRleHRgIG9iamVjdC5cbiAgICpcbiAgICogQHN0YXRpY1xuICAgKiBAbWVtYmVyT2YgX1xuICAgKiBAY2F0ZWdvcnkgVXRpbGl0eVxuICAgKiBAcGFyYW0ge09iamVjdH0gW2NvbnRleHQ9cm9vdF0gVGhlIGNvbnRleHQgb2JqZWN0LlxuICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgYSBuZXcgYGxvZGFzaGAgZnVuY3Rpb24uXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIF8ubWl4aW4oeyAnZm9vJzogXy5jb25zdGFudCgnZm9vJykgfSk7XG4gICAqXG4gICAqIHZhciBsb2Rhc2ggPSBfLnJ1bkluQ29udGV4dCgpO1xuICAgKiBsb2Rhc2gubWl4aW4oeyAnYmFyJzogbG9kYXNoLmNvbnN0YW50KCdiYXInKSB9KTtcbiAgICpcbiAgICogXy5pc0Z1bmN0aW9uKF8uZm9vKTtcbiAgICogLy8gPT4gdHJ1ZVxuICAgKiBfLmlzRnVuY3Rpb24oXy5iYXIpO1xuICAgKiAvLyA9PiBmYWxzZVxuICAgKlxuICAgKiBsb2Rhc2guaXNGdW5jdGlvbihsb2Rhc2guZm9vKTtcbiAgICogLy8gPT4gZmFsc2VcbiAgICogbG9kYXNoLmlzRnVuY3Rpb24obG9kYXNoLmJhcik7XG4gICAqIC8vID0+IHRydWVcbiAgICpcbiAgICogLy8gdXNpbmcgYGNvbnRleHRgIHRvIG1vY2sgYERhdGUjZ2V0VGltZWAgdXNlIGluIGBfLm5vd2BcbiAgICogdmFyIG1vY2sgPSBfLnJ1bkluQ29udGV4dCh7XG4gICAqICAgJ0RhdGUnOiBmdW5jdGlvbigpIHtcbiAgICogICAgIHJldHVybiB7ICdnZXRUaW1lJzogZ2V0VGltZU1vY2sgfTtcbiAgICogICB9XG4gICAqIH0pO1xuICAgKlxuICAgKiAvLyBvciBjcmVhdGluZyBhIHN1cGVkLXVwIGBkZWZlcmAgaW4gTm9kZS5qc1xuICAgKiB2YXIgZGVmZXIgPSBfLnJ1bkluQ29udGV4dCh7ICdzZXRUaW1lb3V0Jzogc2V0SW1tZWRpYXRlIH0pLmRlZmVyO1xuICAgKi9cbiAgZnVuY3Rpb24gcnVuSW5Db250ZXh0KGNvbnRleHQpIHtcbiAgICAvLyBBdm9pZCBpc3N1ZXMgd2l0aCBzb21lIEVTMyBlbnZpcm9ubWVudHMgdGhhdCBhdHRlbXB0IHRvIHVzZSB2YWx1ZXMsIG5hbWVkXG4gICAgLy8gYWZ0ZXIgYnVpbHQtaW4gY29uc3RydWN0b3JzIGxpa2UgYE9iamVjdGAsIGZvciB0aGUgY3JlYXRpb24gb2YgbGl0ZXJhbHMuXG4gICAgLy8gRVM1IGNsZWFycyB0aGlzIHVwIGJ5IHN0YXRpbmcgdGhhdCBsaXRlcmFscyBtdXN0IHVzZSBidWlsdC1pbiBjb25zdHJ1Y3RvcnMuXG4gICAgLy8gU2VlIGh0dHBzOi8vZXM1LmdpdGh1Yi5pby8jeDExLjEuNSBmb3IgbW9yZSBkZXRhaWxzLlxuICAgIGNvbnRleHQgPSBjb250ZXh0ID8gXy5kZWZhdWx0cyhyb290Lk9iamVjdCgpLCBjb250ZXh0LCBfLnBpY2socm9vdCwgY29udGV4dFByb3BzKSkgOiByb290O1xuXG4gICAgLyoqIE5hdGl2ZSBjb25zdHJ1Y3RvciByZWZlcmVuY2VzLiAqL1xuICAgIHZhciBBcnJheSA9IGNvbnRleHQuQXJyYXksXG4gICAgICAgIERhdGUgPSBjb250ZXh0LkRhdGUsXG4gICAgICAgIEVycm9yID0gY29udGV4dC5FcnJvcixcbiAgICAgICAgRnVuY3Rpb24gPSBjb250ZXh0LkZ1bmN0aW9uLFxuICAgICAgICBNYXRoID0gY29udGV4dC5NYXRoLFxuICAgICAgICBOdW1iZXIgPSBjb250ZXh0Lk51bWJlcixcbiAgICAgICAgT2JqZWN0ID0gY29udGV4dC5PYmplY3QsXG4gICAgICAgIFJlZ0V4cCA9IGNvbnRleHQuUmVnRXhwLFxuICAgICAgICBTdHJpbmcgPSBjb250ZXh0LlN0cmluZyxcbiAgICAgICAgVHlwZUVycm9yID0gY29udGV4dC5UeXBlRXJyb3I7XG5cbiAgICAvKiogVXNlZCBmb3IgbmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xuICAgIHZhciBhcnJheVByb3RvID0gQXJyYXkucHJvdG90eXBlLFxuICAgICAgICBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGUsXG4gICAgICAgIHN0cmluZ1Byb3RvID0gU3RyaW5nLnByb3RvdHlwZTtcblxuICAgIC8qKiBVc2VkIHRvIHJlc29sdmUgdGhlIGRlY29tcGlsZWQgc291cmNlIG9mIGZ1bmN0aW9ucy4gKi9cbiAgICB2YXIgZm5Ub1N0cmluZyA9IEZ1bmN0aW9uLnByb3RvdHlwZS50b1N0cmluZztcblxuICAgIC8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xuICAgIHZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXG4gICAgLyoqIFVzZWQgdG8gZ2VuZXJhdGUgdW5pcXVlIElEcy4gKi9cbiAgICB2YXIgaWRDb3VudGVyID0gMDtcblxuICAgIC8qKlxuICAgICAqIFVzZWQgdG8gcmVzb2x2ZSB0aGUgW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG4gICAgICogb2YgdmFsdWVzLlxuICAgICAqL1xuICAgIHZhciBvYmpUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXG4gICAgLyoqIFVzZWQgdG8gcmVzdG9yZSB0aGUgb3JpZ2luYWwgYF9gIHJlZmVyZW5jZSBpbiBgXy5ub0NvbmZsaWN0YC4gKi9cbiAgICB2YXIgb2xkRGFzaCA9IHJvb3QuXztcblxuICAgIC8qKiBVc2VkIHRvIGRldGVjdCBpZiBhIG1ldGhvZCBpcyBuYXRpdmUuICovXG4gICAgdmFyIHJlSXNOYXRpdmUgPSBSZWdFeHAoJ14nICtcbiAgICAgIGZuVG9TdHJpbmcuY2FsbChoYXNPd25Qcm9wZXJ0eSkucmVwbGFjZSgvW1xcXFxeJC4qKz8oKVtcXF17fXxdL2csICdcXFxcJCYnKVxuICAgICAgLnJlcGxhY2UoL2hhc093blByb3BlcnR5fChmdW5jdGlvbikuKj8oPz1cXFxcXFwoKXwgZm9yIC4rPyg/PVxcXFxcXF0pL2csICckMS4qPycpICsgJyQnXG4gICAgKTtcblxuICAgIC8qKiBOYXRpdmUgbWV0aG9kIHJlZmVyZW5jZXMuICovXG4gICAgdmFyIEFycmF5QnVmZmVyID0gY29udGV4dC5BcnJheUJ1ZmZlcixcbiAgICAgICAgY2xlYXJUaW1lb3V0ID0gY29udGV4dC5jbGVhclRpbWVvdXQsXG4gICAgICAgIHBhcnNlRmxvYXQgPSBjb250ZXh0LnBhcnNlRmxvYXQsXG4gICAgICAgIHBvdyA9IE1hdGgucG93LFxuICAgICAgICBwcm9wZXJ0eUlzRW51bWVyYWJsZSA9IG9iamVjdFByb3RvLnByb3BlcnR5SXNFbnVtZXJhYmxlLFxuICAgICAgICBTZXQgPSBnZXROYXRpdmUoY29udGV4dCwgJ1NldCcpLFxuICAgICAgICBzZXRUaW1lb3V0ID0gY29udGV4dC5zZXRUaW1lb3V0LFxuICAgICAgICBzcGxpY2UgPSBhcnJheVByb3RvLnNwbGljZSxcbiAgICAgICAgVWludDhBcnJheSA9IGNvbnRleHQuVWludDhBcnJheSxcbiAgICAgICAgV2Vha01hcCA9IGdldE5hdGl2ZShjb250ZXh0LCAnV2Vha01hcCcpO1xuXG4gICAgLyogTmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cbiAgICB2YXIgbmF0aXZlQ2VpbCA9IE1hdGguY2VpbCxcbiAgICAgICAgbmF0aXZlQ3JlYXRlID0gZ2V0TmF0aXZlKE9iamVjdCwgJ2NyZWF0ZScpLFxuICAgICAgICBuYXRpdmVGbG9vciA9IE1hdGguZmxvb3IsXG4gICAgICAgIG5hdGl2ZUlzQXJyYXkgPSBnZXROYXRpdmUoQXJyYXksICdpc0FycmF5JyksXG4gICAgICAgIG5hdGl2ZUlzRmluaXRlID0gY29udGV4dC5pc0Zpbml0ZSxcbiAgICAgICAgbmF0aXZlS2V5cyA9IGdldE5hdGl2ZShPYmplY3QsICdrZXlzJyksXG4gICAgICAgIG5hdGl2ZU1heCA9IE1hdGgubWF4LFxuICAgICAgICBuYXRpdmVNaW4gPSBNYXRoLm1pbixcbiAgICAgICAgbmF0aXZlTm93ID0gZ2V0TmF0aXZlKERhdGUsICdub3cnKSxcbiAgICAgICAgbmF0aXZlUGFyc2VJbnQgPSBjb250ZXh0LnBhcnNlSW50LFxuICAgICAgICBuYXRpdmVSYW5kb20gPSBNYXRoLnJhbmRvbTtcblxuICAgIC8qKiBVc2VkIGFzIHJlZmVyZW5jZXMgZm9yIGAtSW5maW5pdHlgIGFuZCBgSW5maW5pdHlgLiAqL1xuICAgIHZhciBORUdBVElWRV9JTkZJTklUWSA9IE51bWJlci5ORUdBVElWRV9JTkZJTklUWSxcbiAgICAgICAgUE9TSVRJVkVfSU5GSU5JVFkgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG5cbiAgICAvKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB0aGUgbWF4aW11bSBsZW5ndGggYW5kIGluZGV4IG9mIGFuIGFycmF5LiAqL1xuICAgIHZhciBNQVhfQVJSQVlfTEVOR1RIID0gNDI5NDk2NzI5NSxcbiAgICAgICAgTUFYX0FSUkFZX0lOREVYID0gTUFYX0FSUkFZX0xFTkdUSCAtIDEsXG4gICAgICAgIEhBTEZfTUFYX0FSUkFZX0xFTkdUSCA9IE1BWF9BUlJBWV9MRU5HVEggPj4+IDE7XG5cbiAgICAvKipcbiAgICAgKiBVc2VkIGFzIHRoZSBbbWF4aW11bSBsZW5ndGhdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLW51bWJlci5tYXhfc2FmZV9pbnRlZ2VyKVxuICAgICAqIG9mIGFuIGFycmF5LWxpa2UgdmFsdWUuXG4gICAgICovXG4gICAgdmFyIE1BWF9TQUZFX0lOVEVHRVIgPSA5MDA3MTk5MjU0NzQwOTkxO1xuXG4gICAgLyoqIFVzZWQgdG8gc3RvcmUgZnVuY3Rpb24gbWV0YWRhdGEuICovXG4gICAgdmFyIG1ldGFNYXAgPSBXZWFrTWFwICYmIG5ldyBXZWFrTWFwO1xuXG4gICAgLyoqIFVzZWQgdG8gbG9va3VwIHVubWluaWZpZWQgZnVuY3Rpb24gbmFtZXMuICovXG4gICAgdmFyIHJlYWxOYW1lcyA9IHt9O1xuXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGBsb2Rhc2hgIG9iamVjdCB3aGljaCB3cmFwcyBgdmFsdWVgIHRvIGVuYWJsZSBpbXBsaWNpdCBjaGFpbmluZy5cbiAgICAgKiBNZXRob2RzIHRoYXQgb3BlcmF0ZSBvbiBhbmQgcmV0dXJuIGFycmF5cywgY29sbGVjdGlvbnMsIGFuZCBmdW5jdGlvbnMgY2FuXG4gICAgICogYmUgY2hhaW5lZCB0b2dldGhlci4gTWV0aG9kcyB0aGF0IHJldHJpZXZlIGEgc2luZ2xlIHZhbHVlIG9yIG1heSByZXR1cm4gYVxuICAgICAqIHByaW1pdGl2ZSB2YWx1ZSB3aWxsIGF1dG9tYXRpY2FsbHkgZW5kIHRoZSBjaGFpbiByZXR1cm5pbmcgdGhlIHVud3JhcHBlZFxuICAgICAqIHZhbHVlLiBFeHBsaWNpdCBjaGFpbmluZyBtYXkgYmUgZW5hYmxlZCB1c2luZyBgXy5jaGFpbmAuIFRoZSBleGVjdXRpb24gb2ZcbiAgICAgKiBjaGFpbmVkIG1ldGhvZHMgaXMgbGF6eSwgdGhhdCBpcywgZXhlY3V0aW9uIGlzIGRlZmVycmVkIHVudGlsIGBfI3ZhbHVlYFxuICAgICAqIGlzIGltcGxpY2l0bHkgb3IgZXhwbGljaXRseSBjYWxsZWQuXG4gICAgICpcbiAgICAgKiBMYXp5IGV2YWx1YXRpb24gYWxsb3dzIHNldmVyYWwgbWV0aG9kcyB0byBzdXBwb3J0IHNob3J0Y3V0IGZ1c2lvbi4gU2hvcnRjdXRcbiAgICAgKiBmdXNpb24gaXMgYW4gb3B0aW1pemF0aW9uIHN0cmF0ZWd5IHdoaWNoIG1lcmdlIGl0ZXJhdGVlIGNhbGxzOyB0aGlzIGNhbiBoZWxwXG4gICAgICogdG8gYXZvaWQgdGhlIGNyZWF0aW9uIG9mIGludGVybWVkaWF0ZSBkYXRhIHN0cnVjdHVyZXMgYW5kIGdyZWF0bHkgcmVkdWNlIHRoZVxuICAgICAqIG51bWJlciBvZiBpdGVyYXRlZSBleGVjdXRpb25zLlxuICAgICAqXG4gICAgICogQ2hhaW5pbmcgaXMgc3VwcG9ydGVkIGluIGN1c3RvbSBidWlsZHMgYXMgbG9uZyBhcyB0aGUgYF8jdmFsdWVgIG1ldGhvZCBpc1xuICAgICAqIGRpcmVjdGx5IG9yIGluZGlyZWN0bHkgaW5jbHVkZWQgaW4gdGhlIGJ1aWxkLlxuICAgICAqXG4gICAgICogSW4gYWRkaXRpb24gdG8gbG9kYXNoIG1ldGhvZHMsIHdyYXBwZXJzIGhhdmUgYEFycmF5YCBhbmQgYFN0cmluZ2AgbWV0aG9kcy5cbiAgICAgKlxuICAgICAqIFRoZSB3cmFwcGVyIGBBcnJheWAgbWV0aG9kcyBhcmU6XG4gICAgICogYGNvbmNhdGAsIGBqb2luYCwgYHBvcGAsIGBwdXNoYCwgYHJldmVyc2VgLCBgc2hpZnRgLCBgc2xpY2VgLCBgc29ydGAsXG4gICAgICogYHNwbGljZWAsIGFuZCBgdW5zaGlmdGBcbiAgICAgKlxuICAgICAqIFRoZSB3cmFwcGVyIGBTdHJpbmdgIG1ldGhvZHMgYXJlOlxuICAgICAqIGByZXBsYWNlYCBhbmQgYHNwbGl0YFxuICAgICAqXG4gICAgICogVGhlIHdyYXBwZXIgbWV0aG9kcyB0aGF0IHN1cHBvcnQgc2hvcnRjdXQgZnVzaW9uIGFyZTpcbiAgICAgKiBgY29tcGFjdGAsIGBkcm9wYCwgYGRyb3BSaWdodGAsIGBkcm9wUmlnaHRXaGlsZWAsIGBkcm9wV2hpbGVgLCBgZmlsdGVyYCxcbiAgICAgKiBgZmlyc3RgLCBgaW5pdGlhbGAsIGBsYXN0YCwgYG1hcGAsIGBwbHVja2AsIGByZWplY3RgLCBgcmVzdGAsIGByZXZlcnNlYCxcbiAgICAgKiBgc2xpY2VgLCBgdGFrZWAsIGB0YWtlUmlnaHRgLCBgdGFrZVJpZ2h0V2hpbGVgLCBgdGFrZVdoaWxlYCwgYHRvQXJyYXlgLFxuICAgICAqIGFuZCBgd2hlcmVgXG4gICAgICpcbiAgICAgKiBUaGUgY2hhaW5hYmxlIHdyYXBwZXIgbWV0aG9kcyBhcmU6XG4gICAgICogYGFmdGVyYCwgYGFyeWAsIGBhc3NpZ25gLCBgYXRgLCBgYmVmb3JlYCwgYGJpbmRgLCBgYmluZEFsbGAsIGBiaW5kS2V5YCxcbiAgICAgKiBgY2FsbGJhY2tgLCBgY2hhaW5gLCBgY2h1bmtgLCBgY29tbWl0YCwgYGNvbXBhY3RgLCBgY29uY2F0YCwgYGNvbnN0YW50YCxcbiAgICAgKiBgY291bnRCeWAsIGBjcmVhdGVgLCBgY3VycnlgLCBgZGVib3VuY2VgLCBgZGVmYXVsdHNgLCBgZGVmYXVsdHNEZWVwYCxcbiAgICAgKiBgZGVmZXJgLCBgZGVsYXlgLCBgZGlmZmVyZW5jZWAsIGBkcm9wYCwgYGRyb3BSaWdodGAsIGBkcm9wUmlnaHRXaGlsZWAsXG4gICAgICogYGRyb3BXaGlsZWAsIGBmaWxsYCwgYGZpbHRlcmAsIGBmbGF0dGVuYCwgYGZsYXR0ZW5EZWVwYCwgYGZsb3dgLCBgZmxvd1JpZ2h0YCxcbiAgICAgKiBgZm9yRWFjaGAsIGBmb3JFYWNoUmlnaHRgLCBgZm9ySW5gLCBgZm9ySW5SaWdodGAsIGBmb3JPd25gLCBgZm9yT3duUmlnaHRgLFxuICAgICAqIGBmdW5jdGlvbnNgLCBgZ3JvdXBCeWAsIGBpbmRleEJ5YCwgYGluaXRpYWxgLCBgaW50ZXJzZWN0aW9uYCwgYGludmVydGAsXG4gICAgICogYGludm9rZWAsIGBrZXlzYCwgYGtleXNJbmAsIGBtYXBgLCBgbWFwS2V5c2AsIGBtYXBWYWx1ZXNgLCBgbWF0Y2hlc2AsXG4gICAgICogYG1hdGNoZXNQcm9wZXJ0eWAsIGBtZW1vaXplYCwgYG1lcmdlYCwgYG1ldGhvZGAsIGBtZXRob2RPZmAsIGBtaXhpbmAsXG4gICAgICogYG1vZEFyZ3NgLCBgbmVnYXRlYCwgYG9taXRgLCBgb25jZWAsIGBwYWlyc2AsIGBwYXJ0aWFsYCwgYHBhcnRpYWxSaWdodGAsXG4gICAgICogYHBhcnRpdGlvbmAsIGBwaWNrYCwgYHBsYW50YCwgYHBsdWNrYCwgYHByb3BlcnR5YCwgYHByb3BlcnR5T2ZgLCBgcHVsbGAsXG4gICAgICogYHB1bGxBdGAsIGBwdXNoYCwgYHJhbmdlYCwgYHJlYXJnYCwgYHJlamVjdGAsIGByZW1vdmVgLCBgcmVzdGAsIGByZXN0UGFyYW1gLFxuICAgICAqIGByZXZlcnNlYCwgYHNldGAsIGBzaHVmZmxlYCwgYHNsaWNlYCwgYHNvcnRgLCBgc29ydEJ5YCwgYHNvcnRCeUFsbGAsXG4gICAgICogYHNvcnRCeU9yZGVyYCwgYHNwbGljZWAsIGBzcHJlYWRgLCBgdGFrZWAsIGB0YWtlUmlnaHRgLCBgdGFrZVJpZ2h0V2hpbGVgLFxuICAgICAqIGB0YWtlV2hpbGVgLCBgdGFwYCwgYHRocm90dGxlYCwgYHRocnVgLCBgdGltZXNgLCBgdG9BcnJheWAsIGB0b1BsYWluT2JqZWN0YCxcbiAgICAgKiBgdHJhbnNmb3JtYCwgYHVuaW9uYCwgYHVuaXFgLCBgdW5zaGlmdGAsIGB1bnppcGAsIGB1bnppcFdpdGhgLCBgdmFsdWVzYCxcbiAgICAgKiBgdmFsdWVzSW5gLCBgd2hlcmVgLCBgd2l0aG91dGAsIGB3cmFwYCwgYHhvcmAsIGB6aXBgLCBgemlwT2JqZWN0YCwgYHppcFdpdGhgXG4gICAgICpcbiAgICAgKiBUaGUgd3JhcHBlciBtZXRob2RzIHRoYXQgYXJlICoqbm90KiogY2hhaW5hYmxlIGJ5IGRlZmF1bHQgYXJlOlxuICAgICAqIGBhZGRgLCBgYXR0ZW1wdGAsIGBjYW1lbENhc2VgLCBgY2FwaXRhbGl6ZWAsIGBjZWlsYCwgYGNsb25lYCwgYGNsb25lRGVlcGAsXG4gICAgICogYGRlYnVycmAsIGBlbmRzV2l0aGAsIGBlc2NhcGVgLCBgZXNjYXBlUmVnRXhwYCwgYGV2ZXJ5YCwgYGZpbmRgLCBgZmluZEluZGV4YCxcbiAgICAgKiBgZmluZEtleWAsIGBmaW5kTGFzdGAsIGBmaW5kTGFzdEluZGV4YCwgYGZpbmRMYXN0S2V5YCwgYGZpbmRXaGVyZWAsIGBmaXJzdGAsXG4gICAgICogYGZsb29yYCwgYGdldGAsIGBndGAsIGBndGVgLCBgaGFzYCwgYGlkZW50aXR5YCwgYGluY2x1ZGVzYCwgYGluZGV4T2ZgLFxuICAgICAqIGBpblJhbmdlYCwgYGlzQXJndW1lbnRzYCwgYGlzQXJyYXlgLCBgaXNCb29sZWFuYCwgYGlzRGF0ZWAsIGBpc0VsZW1lbnRgLFxuICAgICAqIGBpc0VtcHR5YCwgYGlzRXF1YWxgLCBgaXNFcnJvcmAsIGBpc0Zpbml0ZWAgYGlzRnVuY3Rpb25gLCBgaXNNYXRjaGAsXG4gICAgICogYGlzTmF0aXZlYCwgYGlzTmFOYCwgYGlzTnVsbGAsIGBpc051bWJlcmAsIGBpc09iamVjdGAsIGBpc1BsYWluT2JqZWN0YCxcbiAgICAgKiBgaXNSZWdFeHBgLCBgaXNTdHJpbmdgLCBgaXNVbmRlZmluZWRgLCBgaXNUeXBlZEFycmF5YCwgYGpvaW5gLCBga2ViYWJDYXNlYCxcbiAgICAgKiBgbGFzdGAsIGBsYXN0SW5kZXhPZmAsIGBsdGAsIGBsdGVgLCBgbWF4YCwgYG1pbmAsIGBub0NvbmZsaWN0YCwgYG5vb3BgLFxuICAgICAqIGBub3dgLCBgcGFkYCwgYHBhZExlZnRgLCBgcGFkUmlnaHRgLCBgcGFyc2VJbnRgLCBgcG9wYCwgYHJhbmRvbWAsIGByZWR1Y2VgLFxuICAgICAqIGByZWR1Y2VSaWdodGAsIGByZXBlYXRgLCBgcmVzdWx0YCwgYHJvdW5kYCwgYHJ1bkluQ29udGV4dGAsIGBzaGlmdGAsIGBzaXplYCxcbiAgICAgKiBgc25ha2VDYXNlYCwgYHNvbWVgLCBgc29ydGVkSW5kZXhgLCBgc29ydGVkTGFzdEluZGV4YCwgYHN0YXJ0Q2FzZWAsXG4gICAgICogYHN0YXJ0c1dpdGhgLCBgc3VtYCwgYHRlbXBsYXRlYCwgYHRyaW1gLCBgdHJpbUxlZnRgLCBgdHJpbVJpZ2h0YCwgYHRydW5jYCxcbiAgICAgKiBgdW5lc2NhcGVgLCBgdW5pcXVlSWRgLCBgdmFsdWVgLCBhbmQgYHdvcmRzYFxuICAgICAqXG4gICAgICogVGhlIHdyYXBwZXIgbWV0aG9kIGBzYW1wbGVgIHdpbGwgcmV0dXJuIGEgd3JhcHBlZCB2YWx1ZSB3aGVuIGBuYCBpcyBwcm92aWRlZCxcbiAgICAgKiBvdGhlcndpc2UgYW4gdW53cmFwcGVkIHZhbHVlIGlzIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQG5hbWUgX1xuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBjYXRlZ29yeSBDaGFpblxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHdyYXAgaW4gYSBgbG9kYXNoYCBpbnN0YW5jZS5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBuZXcgYGxvZGFzaGAgd3JhcHBlciBpbnN0YW5jZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIHdyYXBwZWQgPSBfKFsxLCAyLCAzXSk7XG4gICAgICpcbiAgICAgKiAvLyByZXR1cm5zIGFuIHVud3JhcHBlZCB2YWx1ZVxuICAgICAqIHdyYXBwZWQucmVkdWNlKGZ1bmN0aW9uKHRvdGFsLCBuKSB7XG4gICAgICogICByZXR1cm4gdG90YWwgKyBuO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IDZcbiAgICAgKlxuICAgICAqIC8vIHJldHVybnMgYSB3cmFwcGVkIHZhbHVlXG4gICAgICogdmFyIHNxdWFyZXMgPSB3cmFwcGVkLm1hcChmdW5jdGlvbihuKSB7XG4gICAgICogICByZXR1cm4gbiAqIG47XG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiBfLmlzQXJyYXkoc3F1YXJlcyk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKlxuICAgICAqIF8uaXNBcnJheShzcXVhcmVzLnZhbHVlKCkpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBsb2Rhc2godmFsdWUpIHtcbiAgICAgIGlmIChpc09iamVjdExpa2UodmFsdWUpICYmICFpc0FycmF5KHZhbHVlKSAmJiAhKHZhbHVlIGluc3RhbmNlb2YgTGF6eVdyYXBwZXIpKSB7XG4gICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIExvZGFzaFdyYXBwZXIpIHtcbiAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwodmFsdWUsICdfX2NoYWluX18nKSAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbHVlLCAnX193cmFwcGVkX18nKSkge1xuICAgICAgICAgIHJldHVybiB3cmFwcGVyQ2xvbmUodmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3IExvZGFzaFdyYXBwZXIodmFsdWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBmdW5jdGlvbiB3aG9zZSBwcm90b3R5cGUgYWxsIGNoYWluaW5nIHdyYXBwZXJzIGluaGVyaXQgZnJvbS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZUxvZGFzaCgpIHtcbiAgICAgIC8vIE5vIG9wZXJhdGlvbiBwZXJmb3JtZWQuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgY29uc3RydWN0b3IgZm9yIGNyZWF0aW5nIGBsb2Rhc2hgIHdyYXBwZXIgb2JqZWN0cy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gd3JhcC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtjaGFpbkFsbF0gRW5hYmxlIGNoYWluaW5nIGZvciBhbGwgd3JhcHBlciBtZXRob2RzLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFthY3Rpb25zPVtdXSBBY3Rpb25zIHRvIHBlZm9ybSB0byByZXNvbHZlIHRoZSB1bndyYXBwZWQgdmFsdWUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gTG9kYXNoV3JhcHBlcih2YWx1ZSwgY2hhaW5BbGwsIGFjdGlvbnMpIHtcbiAgICAgIHRoaXMuX193cmFwcGVkX18gPSB2YWx1ZTtcbiAgICAgIHRoaXMuX19hY3Rpb25zX18gPSBhY3Rpb25zIHx8IFtdO1xuICAgICAgdGhpcy5fX2NoYWluX18gPSAhIWNoYWluQWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFuIG9iamVjdCBlbnZpcm9ubWVudCBmZWF0dXJlIGZsYWdzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHR5cGUgT2JqZWN0XG4gICAgICovXG4gICAgdmFyIHN1cHBvcnQgPSBsb2Rhc2guc3VwcG9ydCA9IHt9O1xuXG4gICAgLyoqXG4gICAgICogQnkgZGVmYXVsdCwgdGhlIHRlbXBsYXRlIGRlbGltaXRlcnMgdXNlZCBieSBsb2Rhc2ggYXJlIGxpa2UgdGhvc2UgaW5cbiAgICAgKiBlbWJlZGRlZCBSdWJ5IChFUkIpLiBDaGFuZ2UgdGhlIGZvbGxvd2luZyB0ZW1wbGF0ZSBzZXR0aW5ncyB0byB1c2VcbiAgICAgKiBhbHRlcm5hdGl2ZSBkZWxpbWl0ZXJzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHR5cGUgT2JqZWN0XG4gICAgICovXG4gICAgbG9kYXNoLnRlbXBsYXRlU2V0dGluZ3MgPSB7XG5cbiAgICAgIC8qKlxuICAgICAgICogVXNlZCB0byBkZXRlY3QgYGRhdGFgIHByb3BlcnR5IHZhbHVlcyB0byBiZSBIVE1MLWVzY2FwZWQuXG4gICAgICAgKlxuICAgICAgICogQG1lbWJlck9mIF8udGVtcGxhdGVTZXR0aW5nc1xuICAgICAgICogQHR5cGUgUmVnRXhwXG4gICAgICAgKi9cbiAgICAgICdlc2NhcGUnOiByZUVzY2FwZSxcblxuICAgICAgLyoqXG4gICAgICAgKiBVc2VkIHRvIGRldGVjdCBjb2RlIHRvIGJlIGV2YWx1YXRlZC5cbiAgICAgICAqXG4gICAgICAgKiBAbWVtYmVyT2YgXy50ZW1wbGF0ZVNldHRpbmdzXG4gICAgICAgKiBAdHlwZSBSZWdFeHBcbiAgICAgICAqL1xuICAgICAgJ2V2YWx1YXRlJzogcmVFdmFsdWF0ZSxcblxuICAgICAgLyoqXG4gICAgICAgKiBVc2VkIHRvIGRldGVjdCBgZGF0YWAgcHJvcGVydHkgdmFsdWVzIHRvIGluamVjdC5cbiAgICAgICAqXG4gICAgICAgKiBAbWVtYmVyT2YgXy50ZW1wbGF0ZVNldHRpbmdzXG4gICAgICAgKiBAdHlwZSBSZWdFeHBcbiAgICAgICAqL1xuICAgICAgJ2ludGVycG9sYXRlJzogcmVJbnRlcnBvbGF0ZSxcblxuICAgICAgLyoqXG4gICAgICAgKiBVc2VkIHRvIHJlZmVyZW5jZSB0aGUgZGF0YSBvYmplY3QgaW4gdGhlIHRlbXBsYXRlIHRleHQuXG4gICAgICAgKlxuICAgICAgICogQG1lbWJlck9mIF8udGVtcGxhdGVTZXR0aW5nc1xuICAgICAgICogQHR5cGUgc3RyaW5nXG4gICAgICAgKi9cbiAgICAgICd2YXJpYWJsZSc6ICcnLFxuXG4gICAgICAvKipcbiAgICAgICAqIFVzZWQgdG8gaW1wb3J0IHZhcmlhYmxlcyBpbnRvIHRoZSBjb21waWxlZCB0ZW1wbGF0ZS5cbiAgICAgICAqXG4gICAgICAgKiBAbWVtYmVyT2YgXy50ZW1wbGF0ZVNldHRpbmdzXG4gICAgICAgKiBAdHlwZSBPYmplY3RcbiAgICAgICAqL1xuICAgICAgJ2ltcG9ydHMnOiB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgcmVmZXJlbmNlIHRvIHRoZSBgbG9kYXNoYCBmdW5jdGlvbi5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlck9mIF8udGVtcGxhdGVTZXR0aW5ncy5pbXBvcnRzXG4gICAgICAgICAqIEB0eXBlIEZ1bmN0aW9uXG4gICAgICAgICAqL1xuICAgICAgICAnXyc6IGxvZGFzaFxuICAgICAgfVxuICAgIH07XG5cbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbGF6eSB3cmFwcGVyIG9iamVjdCB3aGljaCB3cmFwcyBgdmFsdWVgIHRvIGVuYWJsZSBsYXp5IGV2YWx1YXRpb24uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHdyYXAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gTGF6eVdyYXBwZXIodmFsdWUpIHtcbiAgICAgIHRoaXMuX193cmFwcGVkX18gPSB2YWx1ZTtcbiAgICAgIHRoaXMuX19hY3Rpb25zX18gPSBbXTtcbiAgICAgIHRoaXMuX19kaXJfXyA9IDE7XG4gICAgICB0aGlzLl9fZmlsdGVyZWRfXyA9IGZhbHNlO1xuICAgICAgdGhpcy5fX2l0ZXJhdGVlc19fID0gW107XG4gICAgICB0aGlzLl9fdGFrZUNvdW50X18gPSBQT1NJVElWRV9JTkZJTklUWTtcbiAgICAgIHRoaXMuX192aWV3c19fID0gW107XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGNsb25lIG9mIHRoZSBsYXp5IHdyYXBwZXIgb2JqZWN0LlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAbmFtZSBjbG9uZVxuICAgICAqIEBtZW1iZXJPZiBMYXp5V3JhcHBlclxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGNsb25lZCBgTGF6eVdyYXBwZXJgIG9iamVjdC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBsYXp5Q2xvbmUoKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gbmV3IExhenlXcmFwcGVyKHRoaXMuX193cmFwcGVkX18pO1xuICAgICAgcmVzdWx0Ll9fYWN0aW9uc19fID0gYXJyYXlDb3B5KHRoaXMuX19hY3Rpb25zX18pO1xuICAgICAgcmVzdWx0Ll9fZGlyX18gPSB0aGlzLl9fZGlyX187XG4gICAgICByZXN1bHQuX19maWx0ZXJlZF9fID0gdGhpcy5fX2ZpbHRlcmVkX187XG4gICAgICByZXN1bHQuX19pdGVyYXRlZXNfXyA9IGFycmF5Q29weSh0aGlzLl9faXRlcmF0ZWVzX18pO1xuICAgICAgcmVzdWx0Ll9fdGFrZUNvdW50X18gPSB0aGlzLl9fdGFrZUNvdW50X187XG4gICAgICByZXN1bHQuX192aWV3c19fID0gYXJyYXlDb3B5KHRoaXMuX192aWV3c19fKTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV2ZXJzZXMgdGhlIGRpcmVjdGlvbiBvZiBsYXp5IGl0ZXJhdGlvbi5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQG5hbWUgcmV2ZXJzZVxuICAgICAqIEBtZW1iZXJPZiBMYXp5V3JhcHBlclxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG5ldyByZXZlcnNlZCBgTGF6eVdyYXBwZXJgIG9iamVjdC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBsYXp5UmV2ZXJzZSgpIHtcbiAgICAgIGlmICh0aGlzLl9fZmlsdGVyZWRfXykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IExhenlXcmFwcGVyKHRoaXMpO1xuICAgICAgICByZXN1bHQuX19kaXJfXyA9IC0xO1xuICAgICAgICByZXN1bHQuX19maWx0ZXJlZF9fID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdCA9IHRoaXMuY2xvbmUoKTtcbiAgICAgICAgcmVzdWx0Ll9fZGlyX18gKj0gLTE7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV4dHJhY3RzIHRoZSB1bndyYXBwZWQgdmFsdWUgZnJvbSBpdHMgbGF6eSB3cmFwcGVyLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAbmFtZSB2YWx1ZVxuICAgICAqIEBtZW1iZXJPZiBMYXp5V3JhcHBlclxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSB1bndyYXBwZWQgdmFsdWUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gbGF6eVZhbHVlKCkge1xuICAgICAgdmFyIGFycmF5ID0gdGhpcy5fX3dyYXBwZWRfXy52YWx1ZSgpLFxuICAgICAgICAgIGRpciA9IHRoaXMuX19kaXJfXyxcbiAgICAgICAgICBpc0FyciA9IGlzQXJyYXkoYXJyYXkpLFxuICAgICAgICAgIGlzUmlnaHQgPSBkaXIgPCAwLFxuICAgICAgICAgIGFyckxlbmd0aCA9IGlzQXJyID8gYXJyYXkubGVuZ3RoIDogMCxcbiAgICAgICAgICB2aWV3ID0gZ2V0VmlldygwLCBhcnJMZW5ndGgsIHRoaXMuX192aWV3c19fKSxcbiAgICAgICAgICBzdGFydCA9IHZpZXcuc3RhcnQsXG4gICAgICAgICAgZW5kID0gdmlldy5lbmQsXG4gICAgICAgICAgbGVuZ3RoID0gZW5kIC0gc3RhcnQsXG4gICAgICAgICAgaW5kZXggPSBpc1JpZ2h0ID8gZW5kIDogKHN0YXJ0IC0gMSksXG4gICAgICAgICAgaXRlcmF0ZWVzID0gdGhpcy5fX2l0ZXJhdGVlc19fLFxuICAgICAgICAgIGl0ZXJMZW5ndGggPSBpdGVyYXRlZXMubGVuZ3RoLFxuICAgICAgICAgIHJlc0luZGV4ID0gMCxcbiAgICAgICAgICB0YWtlQ291bnQgPSBuYXRpdmVNaW4obGVuZ3RoLCB0aGlzLl9fdGFrZUNvdW50X18pO1xuXG4gICAgICBpZiAoIWlzQXJyIHx8IGFyckxlbmd0aCA8IExBUkdFX0FSUkFZX1NJWkUgfHwgKGFyckxlbmd0aCA9PSBsZW5ndGggJiYgdGFrZUNvdW50ID09IGxlbmd0aCkpIHtcbiAgICAgICAgcmV0dXJuIGJhc2VXcmFwcGVyVmFsdWUoKGlzUmlnaHQgJiYgaXNBcnIpID8gYXJyYXkucmV2ZXJzZSgpIDogYXJyYXksIHRoaXMuX19hY3Rpb25zX18pO1xuICAgICAgfVxuICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuXG4gICAgICBvdXRlcjpcbiAgICAgIHdoaWxlIChsZW5ndGgtLSAmJiByZXNJbmRleCA8IHRha2VDb3VudCkge1xuICAgICAgICBpbmRleCArPSBkaXI7XG5cbiAgICAgICAgdmFyIGl0ZXJJbmRleCA9IC0xLFxuICAgICAgICAgICAgdmFsdWUgPSBhcnJheVtpbmRleF07XG5cbiAgICAgICAgd2hpbGUgKCsraXRlckluZGV4IDwgaXRlckxlbmd0aCkge1xuICAgICAgICAgIHZhciBkYXRhID0gaXRlcmF0ZWVzW2l0ZXJJbmRleF0sXG4gICAgICAgICAgICAgIGl0ZXJhdGVlID0gZGF0YS5pdGVyYXRlZSxcbiAgICAgICAgICAgICAgdHlwZSA9IGRhdGEudHlwZSxcbiAgICAgICAgICAgICAgY29tcHV0ZWQgPSBpdGVyYXRlZSh2YWx1ZSk7XG5cbiAgICAgICAgICBpZiAodHlwZSA9PSBMQVpZX01BUF9GTEFHKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IGNvbXB1dGVkO1xuICAgICAgICAgIH0gZWxzZSBpZiAoIWNvbXB1dGVkKSB7XG4gICAgICAgICAgICBpZiAodHlwZSA9PSBMQVpZX0ZJTFRFUl9GTEFHKSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlIG91dGVyO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgYnJlYWsgb3V0ZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJlc3VsdFtyZXNJbmRleCsrXSA9IHZhbHVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgY2FjaGUgb2JqZWN0IHRvIHN0b3JlIGtleS92YWx1ZSBwYWlycy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBuYW1lIENhY2hlXG4gICAgICogQG1lbWJlck9mIF8ubWVtb2l6ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIE1hcENhY2hlKCkge1xuICAgICAgdGhpcy5fX2RhdGFfXyA9IHt9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYGtleWAgYW5kIGl0cyB2YWx1ZSBmcm9tIHRoZSBjYWNoZS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQG5hbWUgZGVsZXRlXG4gICAgICogQG1lbWJlck9mIF8ubWVtb2l6ZS5DYWNoZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gcmVtb3ZlLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgZW50cnkgd2FzIHJlbW92ZWQgc3VjY2Vzc2Z1bGx5LCBlbHNlIGBmYWxzZWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gbWFwRGVsZXRlKGtleSkge1xuICAgICAgcmV0dXJuIHRoaXMuaGFzKGtleSkgJiYgZGVsZXRlIHRoaXMuX19kYXRhX19ba2V5XTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBjYWNoZWQgdmFsdWUgZm9yIGBrZXlgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAbmFtZSBnZXRcbiAgICAgKiBAbWVtYmVyT2YgXy5tZW1vaXplLkNhY2hlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBnZXQuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGNhY2hlZCB2YWx1ZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBtYXBHZXQoa2V5KSB7XG4gICAgICByZXR1cm4ga2V5ID09ICdfX3Byb3RvX18nID8gdW5kZWZpbmVkIDogdGhpcy5fX2RhdGFfX1trZXldO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBhIGNhY2hlZCB2YWx1ZSBmb3IgYGtleWAgZXhpc3RzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAbmFtZSBoYXNcbiAgICAgKiBAbWVtYmVyT2YgXy5tZW1vaXplLkNhY2hlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW4gZW50cnkgZm9yIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1hcEhhcyhrZXkpIHtcbiAgICAgIHJldHVybiBrZXkgIT0gJ19fcHJvdG9fXycgJiYgaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLl9fZGF0YV9fLCBrZXkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgYHZhbHVlYCB0byBga2V5YCBvZiB0aGUgY2FjaGUuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBuYW1lIHNldFxuICAgICAqIEBtZW1iZXJPZiBfLm1lbW9pemUuQ2FjaGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIGNhY2hlLlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNhY2hlLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGNhY2hlIG9iamVjdC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBtYXBTZXQoa2V5LCB2YWx1ZSkge1xuICAgICAgaWYgKGtleSAhPSAnX19wcm90b19fJykge1xuICAgICAgICB0aGlzLl9fZGF0YV9fW2tleV0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQ3JlYXRlcyBhIGNhY2hlIG9iamVjdCB0byBzdG9yZSB1bmlxdWUgdmFsdWVzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbdmFsdWVzXSBUaGUgdmFsdWVzIHRvIGNhY2hlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFNldENhY2hlKHZhbHVlcykge1xuICAgICAgdmFyIGxlbmd0aCA9IHZhbHVlcyA/IHZhbHVlcy5sZW5ndGggOiAwO1xuXG4gICAgICB0aGlzLmRhdGEgPSB7ICdoYXNoJzogbmF0aXZlQ3JlYXRlKG51bGwpLCAnc2V0JzogbmV3IFNldCB9O1xuICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICAgIHRoaXMucHVzaCh2YWx1ZXNbbGVuZ3RoXSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgaW4gYGNhY2hlYCBtaW1pY2tpbmcgdGhlIHJldHVybiBzaWduYXR1cmUgb2ZcbiAgICAgKiBgXy5pbmRleE9mYCBieSByZXR1cm5pbmcgYDBgIGlmIHRoZSB2YWx1ZSBpcyBmb3VuZCwgZWxzZSBgLTFgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gY2FjaGUgVGhlIGNhY2hlIHRvIHNlYXJjaC5cbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZWFyY2ggZm9yLlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgYDBgIGlmIGB2YWx1ZWAgaXMgZm91bmQsIGVsc2UgYC0xYC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjYWNoZUluZGV4T2YoY2FjaGUsIHZhbHVlKSB7XG4gICAgICB2YXIgZGF0YSA9IGNhY2hlLmRhdGEsXG4gICAgICAgICAgcmVzdWx0ID0gKHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJyB8fCBpc09iamVjdCh2YWx1ZSkpID8gZGF0YS5zZXQuaGFzKHZhbHVlKSA6IGRhdGEuaGFzaFt2YWx1ZV07XG5cbiAgICAgIHJldHVybiByZXN1bHQgPyAwIDogLTE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBgdmFsdWVgIHRvIHRoZSBjYWNoZS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQG5hbWUgcHVzaFxuICAgICAqIEBtZW1iZXJPZiBTZXRDYWNoZVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNhY2hlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNhY2hlUHVzaCh2YWx1ZSkge1xuICAgICAgdmFyIGRhdGEgPSB0aGlzLmRhdGE7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlID09ICdzdHJpbmcnIHx8IGlzT2JqZWN0KHZhbHVlKSkge1xuICAgICAgICBkYXRhLnNldC5hZGQodmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGF0YS5oYXNoW3ZhbHVlXSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBhcnJheSBqb2luaW5nIGBhcnJheWAgd2l0aCBgb3RoZXJgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gam9pbi5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBvdGhlciBUaGUgb3RoZXIgYXJyYXkgdG8gam9pbi5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBjb25jYXRlbmF0ZWQgYXJyYXkuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYXJyYXlDb25jYXQoYXJyYXksIG90aGVyKSB7XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSBhcnJheS5sZW5ndGgsXG4gICAgICAgICAgb3RoSW5kZXggPSAtMSxcbiAgICAgICAgICBvdGhMZW5ndGggPSBvdGhlci5sZW5ndGgsXG4gICAgICAgICAgcmVzdWx0ID0gQXJyYXkobGVuZ3RoICsgb3RoTGVuZ3RoKTtcblxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgcmVzdWx0W2luZGV4XSA9IGFycmF5W2luZGV4XTtcbiAgICAgIH1cbiAgICAgIHdoaWxlICgrK290aEluZGV4IDwgb3RoTGVuZ3RoKSB7XG4gICAgICAgIHJlc3VsdFtpbmRleCsrXSA9IG90aGVyW290aEluZGV4XTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29waWVzIHRoZSB2YWx1ZXMgb2YgYHNvdXJjZWAgdG8gYGFycmF5YC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gc291cmNlIFRoZSBhcnJheSB0byBjb3B5IHZhbHVlcyBmcm9tLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFthcnJheT1bXV0gVGhlIGFycmF5IHRvIGNvcHkgdmFsdWVzIHRvLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBgYXJyYXlgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFycmF5Q29weShzb3VyY2UsIGFycmF5KSB7XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSBzb3VyY2UubGVuZ3RoO1xuXG4gICAgICBhcnJheSB8fCAoYXJyYXkgPSBBcnJheShsZW5ndGgpKTtcbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIGFycmF5W2luZGV4XSA9IHNvdXJjZVtpbmRleF07XG4gICAgICB9XG4gICAgICByZXR1cm4gYXJyYXk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBfLmZvckVhY2hgIGZvciBhcnJheXMgd2l0aG91dCBzdXBwb3J0IGZvciBjYWxsYmFja1xuICAgICAqIHNob3J0aGFuZHMgYW5kIGB0aGlzYCBiaW5kaW5nLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGBhcnJheWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYXJyYXlFYWNoKGFycmF5LCBpdGVyYXRlZSkge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuXG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICBpZiAoaXRlcmF0ZWUoYXJyYXlbaW5kZXhdLCBpbmRleCwgYXJyYXkpID09PSBmYWxzZSkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gYXJyYXk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBfLmZvckVhY2hSaWdodGAgZm9yIGFycmF5cyB3aXRob3V0IHN1cHBvcnQgZm9yXG4gICAgICogY2FsbGJhY2sgc2hvcnRoYW5kcyBhbmQgYHRoaXNgIGJpbmRpbmcuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYGFycmF5YC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhcnJheUVhY2hSaWdodChhcnJheSwgaXRlcmF0ZWUpIHtcbiAgICAgIHZhciBsZW5ndGggPSBhcnJheS5sZW5ndGg7XG5cbiAgICAgIHdoaWxlIChsZW5ndGgtLSkge1xuICAgICAgICBpZiAoaXRlcmF0ZWUoYXJyYXlbbGVuZ3RoXSwgbGVuZ3RoLCBhcnJheSkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBhcnJheTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYF8uZXZlcnlgIGZvciBhcnJheXMgd2l0aG91dCBzdXBwb3J0IGZvciBjYWxsYmFja1xuICAgICAqIHNob3J0aGFuZHMgYW5kIGB0aGlzYCBiaW5kaW5nLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbGwgZWxlbWVudHMgcGFzcyB0aGUgcHJlZGljYXRlIGNoZWNrLFxuICAgICAqICBlbHNlIGBmYWxzZWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYXJyYXlFdmVyeShhcnJheSwgcHJlZGljYXRlKSB7XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSBhcnJheS5sZW5ndGg7XG5cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIGlmICghcHJlZGljYXRlKGFycmF5W2luZGV4XSwgaW5kZXgsIGFycmF5KSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlRXh0cmVtdW1gIGZvciBhcnJheXMgd2hpY2ggaW52b2tlcyBgaXRlcmF0ZWVgXG4gICAgICogd2l0aCBvbmUgYXJndW1lbnQ6ICh2YWx1ZSkuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjb21wYXJhdG9yIFRoZSBmdW5jdGlvbiB1c2VkIHRvIGNvbXBhcmUgdmFsdWVzLlxuICAgICAqIEBwYXJhbSB7Kn0gZXhWYWx1ZSBUaGUgaW5pdGlhbCBleHRyZW11bSB2YWx1ZS5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZXh0cmVtdW0gdmFsdWUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYXJyYXlFeHRyZW11bShhcnJheSwgaXRlcmF0ZWUsIGNvbXBhcmF0b3IsIGV4VmFsdWUpIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IGFycmF5Lmxlbmd0aCxcbiAgICAgICAgICBjb21wdXRlZCA9IGV4VmFsdWUsXG4gICAgICAgICAgcmVzdWx0ID0gY29tcHV0ZWQ7XG5cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IGFycmF5W2luZGV4XSxcbiAgICAgICAgICAgIGN1cnJlbnQgPSAraXRlcmF0ZWUodmFsdWUpO1xuXG4gICAgICAgIGlmIChjb21wYXJhdG9yKGN1cnJlbnQsIGNvbXB1dGVkKSkge1xuICAgICAgICAgIGNvbXB1dGVkID0gY3VycmVudDtcbiAgICAgICAgICByZXN1bHQgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYF8uZmlsdGVyYCBmb3IgYXJyYXlzIHdpdGhvdXQgc3VwcG9ydCBmb3IgY2FsbGJhY2tcbiAgICAgKiBzaG9ydGhhbmRzIGFuZCBgdGhpc2AgYmluZGluZy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBmaWx0ZXJlZCBhcnJheS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhcnJheUZpbHRlcihhcnJheSwgcHJlZGljYXRlKSB7XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSBhcnJheS5sZW5ndGgsXG4gICAgICAgICAgcmVzSW5kZXggPSAtMSxcbiAgICAgICAgICByZXN1bHQgPSBbXTtcblxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gYXJyYXlbaW5kZXhdO1xuICAgICAgICBpZiAocHJlZGljYXRlKHZhbHVlLCBpbmRleCwgYXJyYXkpKSB7XG4gICAgICAgICAgcmVzdWx0WysrcmVzSW5kZXhdID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBfLm1hcGAgZm9yIGFycmF5cyB3aXRob3V0IHN1cHBvcnQgZm9yIGNhbGxiYWNrXG4gICAgICogc2hvcnRoYW5kcyBhbmQgYHRoaXNgIGJpbmRpbmcuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBtYXBwZWQgYXJyYXkuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYXJyYXlNYXAoYXJyYXksIGl0ZXJhdGVlKSB7XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSBhcnJheS5sZW5ndGgsXG4gICAgICAgICAgcmVzdWx0ID0gQXJyYXkobGVuZ3RoKTtcblxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgcmVzdWx0W2luZGV4XSA9IGl0ZXJhdGVlKGFycmF5W2luZGV4XSwgaW5kZXgsIGFycmF5KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQXBwZW5kcyB0aGUgZWxlbWVudHMgb2YgYHZhbHVlc2AgdG8gYGFycmF5YC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIG1vZGlmeS5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSB2YWx1ZXMgVGhlIHZhbHVlcyB0byBhcHBlbmQuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGBhcnJheWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYXJyYXlQdXNoKGFycmF5LCB2YWx1ZXMpIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IHZhbHVlcy5sZW5ndGgsXG4gICAgICAgICAgb2Zmc2V0ID0gYXJyYXkubGVuZ3RoO1xuXG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICBhcnJheVtvZmZzZXQgKyBpbmRleF0gPSB2YWx1ZXNbaW5kZXhdO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFycmF5O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgXy5yZWR1Y2VgIGZvciBhcnJheXMgd2l0aG91dCBzdXBwb3J0IGZvciBjYWxsYmFja1xuICAgICAqIHNob3J0aGFuZHMgYW5kIGB0aGlzYCBiaW5kaW5nLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbYWNjdW11bGF0b3JdIFRoZSBpbml0aWFsIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2luaXRGcm9tQXJyYXldIFNwZWNpZnkgdXNpbmcgdGhlIGZpcnN0IGVsZW1lbnQgb2YgYGFycmF5YFxuICAgICAqICBhcyB0aGUgaW5pdGlhbCB2YWx1ZS5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgYWNjdW11bGF0ZWQgdmFsdWUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYXJyYXlSZWR1Y2UoYXJyYXksIGl0ZXJhdGVlLCBhY2N1bXVsYXRvciwgaW5pdEZyb21BcnJheSkge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuXG4gICAgICBpZiAoaW5pdEZyb21BcnJheSAmJiBsZW5ndGgpIHtcbiAgICAgICAgYWNjdW11bGF0b3IgPSBhcnJheVsrK2luZGV4XTtcbiAgICAgIH1cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIGFjY3VtdWxhdG9yID0gaXRlcmF0ZWUoYWNjdW11bGF0b3IsIGFycmF5W2luZGV4XSwgaW5kZXgsIGFycmF5KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhY2N1bXVsYXRvcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYF8ucmVkdWNlUmlnaHRgIGZvciBhcnJheXMgd2l0aG91dCBzdXBwb3J0IGZvclxuICAgICAqIGNhbGxiYWNrIHNob3J0aGFuZHMgYW5kIGB0aGlzYCBiaW5kaW5nLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbYWNjdW11bGF0b3JdIFRoZSBpbml0aWFsIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2luaXRGcm9tQXJyYXldIFNwZWNpZnkgdXNpbmcgdGhlIGxhc3QgZWxlbWVudCBvZiBgYXJyYXlgXG4gICAgICogIGFzIHRoZSBpbml0aWFsIHZhbHVlLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBhY2N1bXVsYXRlZCB2YWx1ZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhcnJheVJlZHVjZVJpZ2h0KGFycmF5LCBpdGVyYXRlZSwgYWNjdW11bGF0b3IsIGluaXRGcm9tQXJyYXkpIHtcbiAgICAgIHZhciBsZW5ndGggPSBhcnJheS5sZW5ndGg7XG4gICAgICBpZiAoaW5pdEZyb21BcnJheSAmJiBsZW5ndGgpIHtcbiAgICAgICAgYWNjdW11bGF0b3IgPSBhcnJheVstLWxlbmd0aF07XG4gICAgICB9XG4gICAgICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICAgICAgYWNjdW11bGF0b3IgPSBpdGVyYXRlZShhY2N1bXVsYXRvciwgYXJyYXlbbGVuZ3RoXSwgbGVuZ3RoLCBhcnJheSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gYWNjdW11bGF0b3I7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBfLnNvbWVgIGZvciBhcnJheXMgd2l0aG91dCBzdXBwb3J0IGZvciBjYWxsYmFja1xuICAgICAqIHNob3J0aGFuZHMgYW5kIGB0aGlzYCBiaW5kaW5nLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbnkgZWxlbWVudCBwYXNzZXMgdGhlIHByZWRpY2F0ZSBjaGVjayxcbiAgICAgKiAgZWxzZSBgZmFsc2VgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFycmF5U29tZShhcnJheSwgcHJlZGljYXRlKSB7XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSBhcnJheS5sZW5ndGg7XG5cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIGlmIChwcmVkaWNhdGUoYXJyYXlbaW5kZXhdLCBpbmRleCwgYXJyYXkpKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYF8uc3VtYCBmb3IgYXJyYXlzIHdpdGhvdXQgc3VwcG9ydCBmb3IgY2FsbGJhY2tcbiAgICAgKiBzaG9ydGhhbmRzIGFuZCBgdGhpc2AgYmluZGluZy4uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBzdW0uXG4gICAgICovXG4gICAgZnVuY3Rpb24gYXJyYXlTdW0oYXJyYXksIGl0ZXJhdGVlKSB7XG4gICAgICB2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoLFxuICAgICAgICAgIHJlc3VsdCA9IDA7XG5cbiAgICAgIHdoaWxlIChsZW5ndGgtLSkge1xuICAgICAgICByZXN1bHQgKz0gK2l0ZXJhdGVlKGFycmF5W2xlbmd0aF0pIHx8IDA7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVzZWQgYnkgYF8uZGVmYXVsdHNgIHRvIGN1c3RvbWl6ZSBpdHMgYF8uYXNzaWduYCB1c2UuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Kn0gb2JqZWN0VmFsdWUgVGhlIGRlc3RpbmF0aW9uIG9iamVjdCBwcm9wZXJ0eSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0geyp9IHNvdXJjZVZhbHVlIFRoZSBzb3VyY2Ugb2JqZWN0IHByb3BlcnR5IHZhbHVlLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSB2YWx1ZSB0byBhc3NpZ24gdG8gdGhlIGRlc3RpbmF0aW9uIG9iamVjdC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhc3NpZ25EZWZhdWx0cyhvYmplY3RWYWx1ZSwgc291cmNlVmFsdWUpIHtcbiAgICAgIHJldHVybiBvYmplY3RWYWx1ZSA9PT0gdW5kZWZpbmVkID8gc291cmNlVmFsdWUgOiBvYmplY3RWYWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVc2VkIGJ5IGBfLnRlbXBsYXRlYCB0byBjdXN0b21pemUgaXRzIGBfLmFzc2lnbmAgdXNlLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoaXMgZnVuY3Rpb24gaXMgbGlrZSBgYXNzaWduRGVmYXVsdHNgIGV4Y2VwdCB0aGF0IGl0IGlnbm9yZXNcbiAgICAgKiBpbmhlcml0ZWQgcHJvcGVydHkgdmFsdWVzIHdoZW4gY2hlY2tpbmcgaWYgYSBwcm9wZXJ0eSBpcyBgdW5kZWZpbmVkYC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHsqfSBvYmplY3RWYWx1ZSBUaGUgZGVzdGluYXRpb24gb2JqZWN0IHByb3BlcnR5IHZhbHVlLlxuICAgICAqIEBwYXJhbSB7Kn0gc291cmNlVmFsdWUgVGhlIHNvdXJjZSBvYmplY3QgcHJvcGVydHkgdmFsdWUuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IGFzc29jaWF0ZWQgd2l0aCB0aGUgb2JqZWN0IGFuZCBzb3VyY2UgdmFsdWVzLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIGRlc3RpbmF0aW9uIG9iamVjdC5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgdmFsdWUgdG8gYXNzaWduIHRvIHRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYXNzaWduT3duRGVmYXVsdHMob2JqZWN0VmFsdWUsIHNvdXJjZVZhbHVlLCBrZXksIG9iamVjdCkge1xuICAgICAgcmV0dXJuIChvYmplY3RWYWx1ZSA9PT0gdW5kZWZpbmVkIHx8ICFoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwga2V5KSlcbiAgICAgICAgPyBzb3VyY2VWYWx1ZVxuICAgICAgICA6IG9iamVjdFZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgXy5hc3NpZ25gIGZvciBjdXN0b21pemluZyBhc3NpZ25lZCB2YWx1ZXMgd2l0aG91dFxuICAgICAqIHN1cHBvcnQgZm9yIGFyZ3VtZW50IGp1Z2dsaW5nLCBtdWx0aXBsZSBzb3VyY2VzLCBhbmQgYHRoaXNgIGJpbmRpbmcgYGN1c3RvbWl6ZXJgXG4gICAgICogZnVuY3Rpb25zLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZSBUaGUgc291cmNlIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjdXN0b21pemVyIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgYXNzaWduZWQgdmFsdWVzLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYXNzaWduV2l0aChvYmplY3QsIHNvdXJjZSwgY3VzdG9taXplcikge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgcHJvcHMgPSBrZXlzKHNvdXJjZSksXG4gICAgICAgICAgbGVuZ3RoID0gcHJvcHMubGVuZ3RoO1xuXG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICB2YXIga2V5ID0gcHJvcHNbaW5kZXhdLFxuICAgICAgICAgICAgdmFsdWUgPSBvYmplY3Rba2V5XSxcbiAgICAgICAgICAgIHJlc3VsdCA9IGN1c3RvbWl6ZXIodmFsdWUsIHNvdXJjZVtrZXldLCBrZXksIG9iamVjdCwgc291cmNlKTtcblxuICAgICAgICBpZiAoKHJlc3VsdCA9PT0gcmVzdWx0ID8gKHJlc3VsdCAhPT0gdmFsdWUpIDogKHZhbHVlID09PSB2YWx1ZSkpIHx8XG4gICAgICAgICAgICAodmFsdWUgPT09IHVuZGVmaW5lZCAmJiAhKGtleSBpbiBvYmplY3QpKSkge1xuICAgICAgICAgIG9iamVjdFtrZXldID0gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gb2JqZWN0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmFzc2lnbmAgd2l0aG91dCBzdXBwb3J0IGZvciBhcmd1bWVudCBqdWdnbGluZyxcbiAgICAgKiBtdWx0aXBsZSBzb3VyY2VzLCBhbmQgYGN1c3RvbWl6ZXJgIGZ1bmN0aW9ucy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgZGVzdGluYXRpb24gb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgVGhlIHNvdXJjZSBvYmplY3QuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlQXNzaWduKG9iamVjdCwgc291cmNlKSB7XG4gICAgICByZXR1cm4gc291cmNlID09IG51bGxcbiAgICAgICAgPyBvYmplY3RcbiAgICAgICAgOiBiYXNlQ29weShzb3VyY2UsIGtleXMoc291cmNlKSwgb2JqZWN0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5hdGAgd2l0aG91dCBzdXBwb3J0IGZvciBzdHJpbmcgY29sbGVjdGlvbnNcbiAgICAgKiBhbmQgaW5kaXZpZHVhbCBrZXkgYXJndW1lbnRzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdH0gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtudW1iZXJbXXxzdHJpbmdbXX0gcHJvcHMgVGhlIHByb3BlcnR5IG5hbWVzIG9yIGluZGV4ZXMgb2YgZWxlbWVudHMgdG8gcGljay5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBhcnJheSBvZiBwaWNrZWQgZWxlbWVudHMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZUF0KGNvbGxlY3Rpb24sIHByb3BzKSB7XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBpc05pbCA9IGNvbGxlY3Rpb24gPT0gbnVsbCxcbiAgICAgICAgICBpc0FyciA9ICFpc05pbCAmJiBpc0FycmF5TGlrZShjb2xsZWN0aW9uKSxcbiAgICAgICAgICBsZW5ndGggPSBpc0FyciA/IGNvbGxlY3Rpb24ubGVuZ3RoIDogMCxcbiAgICAgICAgICBwcm9wc0xlbmd0aCA9IHByb3BzLmxlbmd0aCxcbiAgICAgICAgICByZXN1bHQgPSBBcnJheShwcm9wc0xlbmd0aCk7XG5cbiAgICAgIHdoaWxlKCsraW5kZXggPCBwcm9wc0xlbmd0aCkge1xuICAgICAgICB2YXIga2V5ID0gcHJvcHNbaW5kZXhdO1xuICAgICAgICBpZiAoaXNBcnIpIHtcbiAgICAgICAgICByZXN1bHRbaW5kZXhdID0gaXNJbmRleChrZXksIGxlbmd0aCkgPyBjb2xsZWN0aW9uW2tleV0gOiB1bmRlZmluZWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0W2luZGV4XSA9IGlzTmlsID8gdW5kZWZpbmVkIDogY29sbGVjdGlvbltrZXldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvcGllcyBwcm9wZXJ0aWVzIG9mIGBzb3VyY2VgIHRvIGBvYmplY3RgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gc291cmNlIFRoZSBvYmplY3QgdG8gY29weSBwcm9wZXJ0aWVzIGZyb20uXG4gICAgICogQHBhcmFtIHtBcnJheX0gcHJvcHMgVGhlIHByb3BlcnR5IG5hbWVzIHRvIGNvcHkuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvYmplY3Q9e31dIFRoZSBvYmplY3QgdG8gY29weSBwcm9wZXJ0aWVzIHRvLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZUNvcHkoc291cmNlLCBwcm9wcywgb2JqZWN0KSB7XG4gICAgICBvYmplY3QgfHwgKG9iamVjdCA9IHt9KTtcblxuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gcHJvcHMubGVuZ3RoO1xuXG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICB2YXIga2V5ID0gcHJvcHNbaW5kZXhdO1xuICAgICAgICBvYmplY3Rba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5jYWxsYmFja2Agd2hpY2ggc3VwcG9ydHMgc3BlY2lmeWluZyB0aGVcbiAgICAgKiBudW1iZXIgb2YgYXJndW1lbnRzIHRvIHByb3ZpZGUgdG8gYGZ1bmNgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0geyp9IFtmdW5jPV8uaWRlbnRpdHldIFRoZSB2YWx1ZSB0byBjb252ZXJ0IHRvIGEgY2FsbGJhY2suXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBmdW5jYC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2FyZ0NvdW50XSBUaGUgbnVtYmVyIG9mIGFyZ3VtZW50cyB0byBwcm92aWRlIHRvIGBmdW5jYC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIGNhbGxiYWNrLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VDYWxsYmFjayhmdW5jLCB0aGlzQXJnLCBhcmdDb3VudCkge1xuICAgICAgdmFyIHR5cGUgPSB0eXBlb2YgZnVuYztcbiAgICAgIGlmICh0eXBlID09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNBcmcgPT09IHVuZGVmaW5lZFxuICAgICAgICAgID8gZnVuY1xuICAgICAgICAgIDogYmluZENhbGxiYWNrKGZ1bmMsIHRoaXNBcmcsIGFyZ0NvdW50KTtcbiAgICAgIH1cbiAgICAgIGlmIChmdW5jID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGlkZW50aXR5O1xuICAgICAgfVxuICAgICAgaWYgKHR5cGUgPT0gJ29iamVjdCcpIHtcbiAgICAgICAgcmV0dXJuIGJhc2VNYXRjaGVzKGZ1bmMpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXNBcmcgPT09IHVuZGVmaW5lZFxuICAgICAgICA/IHByb3BlcnR5KGZ1bmMpXG4gICAgICAgIDogYmFzZU1hdGNoZXNQcm9wZXJ0eShmdW5jLCB0aGlzQXJnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5jbG9uZWAgd2l0aG91dCBzdXBwb3J0IGZvciBhcmd1bWVudCBqdWdnbGluZ1xuICAgICAqIGFuZCBgdGhpc2AgYmluZGluZyBgY3VzdG9taXplcmAgZnVuY3Rpb25zLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjbG9uZS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc0RlZXBdIFNwZWNpZnkgYSBkZWVwIGNsb25lLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNsb25pbmcgdmFsdWVzLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBba2V5XSBUaGUga2V5IG9mIGB2YWx1ZWAuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvYmplY3RdIFRoZSBvYmplY3QgYHZhbHVlYCBiZWxvbmdzIHRvLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0E9W11dIFRyYWNrcyB0cmF2ZXJzZWQgc291cmNlIG9iamVjdHMuXG4gICAgICogQHBhcmFtIHtBcnJheX0gW3N0YWNrQj1bXV0gQXNzb2NpYXRlcyBjbG9uZXMgd2l0aCBzb3VyY2UgY291bnRlcnBhcnRzLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBjbG9uZWQgdmFsdWUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZUNsb25lKHZhbHVlLCBpc0RlZXAsIGN1c3RvbWl6ZXIsIGtleSwgb2JqZWN0LCBzdGFja0EsIHN0YWNrQikge1xuICAgICAgdmFyIHJlc3VsdDtcbiAgICAgIGlmIChjdXN0b21pemVyKSB7XG4gICAgICAgIHJlc3VsdCA9IG9iamVjdCA/IGN1c3RvbWl6ZXIodmFsdWUsIGtleSwgb2JqZWN0KSA6IGN1c3RvbWl6ZXIodmFsdWUpO1xuICAgICAgfVxuICAgICAgaWYgKHJlc3VsdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgICBpZiAoIWlzT2JqZWN0KHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9XG4gICAgICB2YXIgaXNBcnIgPSBpc0FycmF5KHZhbHVlKTtcbiAgICAgIGlmIChpc0Fycikge1xuICAgICAgICByZXN1bHQgPSBpbml0Q2xvbmVBcnJheSh2YWx1ZSk7XG4gICAgICAgIGlmICghaXNEZWVwKSB7XG4gICAgICAgICAgcmV0dXJuIGFycmF5Q29weSh2YWx1ZSwgcmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHRhZyA9IG9ialRvU3RyaW5nLmNhbGwodmFsdWUpLFxuICAgICAgICAgICAgaXNGdW5jID0gdGFnID09IGZ1bmNUYWc7XG5cbiAgICAgICAgaWYgKHRhZyA9PSBvYmplY3RUYWcgfHwgdGFnID09IGFyZ3NUYWcgfHwgKGlzRnVuYyAmJiAhb2JqZWN0KSkge1xuICAgICAgICAgIHJlc3VsdCA9IGluaXRDbG9uZU9iamVjdChpc0Z1bmMgPyB7fSA6IHZhbHVlKTtcbiAgICAgICAgICBpZiAoIWlzRGVlcCkge1xuICAgICAgICAgICAgcmV0dXJuIGJhc2VBc3NpZ24ocmVzdWx0LCB2YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBjbG9uZWFibGVUYWdzW3RhZ11cbiAgICAgICAgICAgID8gaW5pdENsb25lQnlUYWcodmFsdWUsIHRhZywgaXNEZWVwKVxuICAgICAgICAgICAgOiAob2JqZWN0ID8gdmFsdWUgOiB7fSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIENoZWNrIGZvciBjaXJjdWxhciByZWZlcmVuY2VzIGFuZCByZXR1cm4gaXRzIGNvcnJlc3BvbmRpbmcgY2xvbmUuXG4gICAgICBzdGFja0EgfHwgKHN0YWNrQSA9IFtdKTtcbiAgICAgIHN0YWNrQiB8fCAoc3RhY2tCID0gW10pO1xuXG4gICAgICB2YXIgbGVuZ3RoID0gc3RhY2tBLmxlbmd0aDtcbiAgICAgIHdoaWxlIChsZW5ndGgtLSkge1xuICAgICAgICBpZiAoc3RhY2tBW2xlbmd0aF0gPT0gdmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gc3RhY2tCW2xlbmd0aF07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIEFkZCB0aGUgc291cmNlIHZhbHVlIHRvIHRoZSBzdGFjayBvZiB0cmF2ZXJzZWQgb2JqZWN0cyBhbmQgYXNzb2NpYXRlIGl0IHdpdGggaXRzIGNsb25lLlxuICAgICAgc3RhY2tBLnB1c2godmFsdWUpO1xuICAgICAgc3RhY2tCLnB1c2gocmVzdWx0KTtcblxuICAgICAgLy8gUmVjdXJzaXZlbHkgcG9wdWxhdGUgY2xvbmUgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKS5cbiAgICAgIChpc0FyciA/IGFycmF5RWFjaCA6IGJhc2VGb3JPd24pKHZhbHVlLCBmdW5jdGlvbihzdWJWYWx1ZSwga2V5KSB7XG4gICAgICAgIHJlc3VsdFtrZXldID0gYmFzZUNsb25lKHN1YlZhbHVlLCBpc0RlZXAsIGN1c3RvbWl6ZXIsIGtleSwgdmFsdWUsIHN0YWNrQSwgc3RhY2tCKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5jcmVhdGVgIHdpdGhvdXQgc3VwcG9ydCBmb3IgYXNzaWduaW5nXG4gICAgICogcHJvcGVydGllcyB0byB0aGUgY3JlYXRlZCBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwcm90b3R5cGUgVGhlIG9iamVjdCB0byBpbmhlcml0IGZyb20uXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbmV3IG9iamVjdC5cbiAgICAgKi9cbiAgICB2YXIgYmFzZUNyZWF0ZSA9IChmdW5jdGlvbigpIHtcbiAgICAgIGZ1bmN0aW9uIG9iamVjdCgpIHt9XG4gICAgICByZXR1cm4gZnVuY3Rpb24ocHJvdG90eXBlKSB7XG4gICAgICAgIGlmIChpc09iamVjdChwcm90b3R5cGUpKSB7XG4gICAgICAgICAgb2JqZWN0LnByb3RvdHlwZSA9IHByb3RvdHlwZTtcbiAgICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IG9iamVjdDtcbiAgICAgICAgICBvYmplY3QucHJvdG90eXBlID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQgfHwge307XG4gICAgICB9O1xuICAgIH0oKSk7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5kZWxheWAgYW5kIGBfLmRlZmVyYCB3aGljaCBhY2NlcHRzIGFuIGluZGV4XG4gICAgICogb2Ygd2hlcmUgdG8gc2xpY2UgdGhlIGFyZ3VtZW50cyB0byBwcm92aWRlIHRvIGBmdW5jYC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gZGVsYXkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHdhaXQgVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gZGVsYXkgaW52b2NhdGlvbi5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gYXJncyBUaGUgYXJndW1lbnRzIHByb3ZpZGUgdG8gYGZ1bmNgLlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHRpbWVyIGlkLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VEZWxheShmdW5jLCB3YWl0LCBhcmdzKSB7XG4gICAgICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpIHsgZnVuYy5hcHBseSh1bmRlZmluZWQsIGFyZ3MpOyB9LCB3YWl0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5kaWZmZXJlbmNlYCB3aGljaCBhY2NlcHRzIGEgc2luZ2xlIGFycmF5XG4gICAgICogb2YgdmFsdWVzIHRvIGV4Y2x1ZGUuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBpbnNwZWN0LlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHZhbHVlcyBUaGUgdmFsdWVzIHRvIGV4Y2x1ZGUuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgYXJyYXkgb2YgZmlsdGVyZWQgdmFsdWVzLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VEaWZmZXJlbmNlKGFycmF5LCB2YWx1ZXMpIHtcbiAgICAgIHZhciBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDAsXG4gICAgICAgICAgcmVzdWx0ID0gW107XG5cbiAgICAgIGlmICghbGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBpbmRleE9mID0gZ2V0SW5kZXhPZigpLFxuICAgICAgICAgIGlzQ29tbW9uID0gaW5kZXhPZiA9PSBiYXNlSW5kZXhPZixcbiAgICAgICAgICBjYWNoZSA9IChpc0NvbW1vbiAmJiB2YWx1ZXMubGVuZ3RoID49IExBUkdFX0FSUkFZX1NJWkUpID8gY3JlYXRlQ2FjaGUodmFsdWVzKSA6IG51bGwsXG4gICAgICAgICAgdmFsdWVzTGVuZ3RoID0gdmFsdWVzLmxlbmd0aDtcblxuICAgICAgaWYgKGNhY2hlKSB7XG4gICAgICAgIGluZGV4T2YgPSBjYWNoZUluZGV4T2Y7XG4gICAgICAgIGlzQ29tbW9uID0gZmFsc2U7XG4gICAgICAgIHZhbHVlcyA9IGNhY2hlO1xuICAgICAgfVxuICAgICAgb3V0ZXI6XG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICB2YXIgdmFsdWUgPSBhcnJheVtpbmRleF07XG5cbiAgICAgICAgaWYgKGlzQ29tbW9uICYmIHZhbHVlID09PSB2YWx1ZSkge1xuICAgICAgICAgIHZhciB2YWx1ZXNJbmRleCA9IHZhbHVlc0xlbmd0aDtcbiAgICAgICAgICB3aGlsZSAodmFsdWVzSW5kZXgtLSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlc1t2YWx1ZXNJbmRleF0gPT09IHZhbHVlKSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlIG91dGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXN1bHQucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaW5kZXhPZih2YWx1ZXMsIHZhbHVlLCAwKSA8IDApIHtcbiAgICAgICAgICByZXN1bHQucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uZm9yRWFjaGAgd2l0aG91dCBzdXBwb3J0IGZvciBjYWxsYmFja1xuICAgICAqIHNob3J0aGFuZHMgYW5kIGB0aGlzYCBiaW5kaW5nLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHJldHVybnMge0FycmF5fE9iamVjdHxzdHJpbmd9IFJldHVybnMgYGNvbGxlY3Rpb25gLlxuICAgICAqL1xuICAgIHZhciBiYXNlRWFjaCA9IGNyZWF0ZUJhc2VFYWNoKGJhc2VGb3JPd24pO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uZm9yRWFjaFJpZ2h0YCB3aXRob3V0IHN1cHBvcnQgZm9yIGNhbGxiYWNrXG4gICAgICogc2hvcnRoYW5kcyBhbmQgYHRoaXNgIGJpbmRpbmcuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl8T2JqZWN0fHN0cmluZ30gUmV0dXJucyBgY29sbGVjdGlvbmAuXG4gICAgICovXG4gICAgdmFyIGJhc2VFYWNoUmlnaHQgPSBjcmVhdGVCYXNlRWFjaChiYXNlRm9yT3duUmlnaHQsIHRydWUpO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uZXZlcnlgIHdpdGhvdXQgc3VwcG9ydCBmb3IgY2FsbGJhY2tcbiAgICAgKiBzaG9ydGhhbmRzIGFuZCBgdGhpc2AgYmluZGluZy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYWxsIGVsZW1lbnRzIHBhc3MgdGhlIHByZWRpY2F0ZSBjaGVjayxcbiAgICAgKiAgZWxzZSBgZmFsc2VgXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZUV2ZXJ5KGNvbGxlY3Rpb24sIHByZWRpY2F0ZSkge1xuICAgICAgdmFyIHJlc3VsdCA9IHRydWU7XG4gICAgICBiYXNlRWFjaChjb2xsZWN0aW9uLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgcmVzdWx0ID0gISFwcmVkaWNhdGUodmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBleHRyZW11bSB2YWx1ZSBvZiBgY29sbGVjdGlvbmAgaW52b2tpbmcgYGl0ZXJhdGVlYCBmb3IgZWFjaCB2YWx1ZVxuICAgICAqIGluIGBjb2xsZWN0aW9uYCB0byBnZW5lcmF0ZSB0aGUgY3JpdGVyaW9uIGJ5IHdoaWNoIHRoZSB2YWx1ZSBpcyByYW5rZWQuXG4gICAgICogVGhlIGBpdGVyYXRlZWAgaXMgaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50czogKHZhbHVlLCBpbmRleHxrZXksIGNvbGxlY3Rpb24pLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY29tcGFyYXRvciBUaGUgZnVuY3Rpb24gdXNlZCB0byBjb21wYXJlIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0geyp9IGV4VmFsdWUgVGhlIGluaXRpYWwgZXh0cmVtdW0gdmFsdWUuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGV4dHJlbXVtIHZhbHVlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VFeHRyZW11bShjb2xsZWN0aW9uLCBpdGVyYXRlZSwgY29tcGFyYXRvciwgZXhWYWx1ZSkge1xuICAgICAgdmFyIGNvbXB1dGVkID0gZXhWYWx1ZSxcbiAgICAgICAgICByZXN1bHQgPSBjb21wdXRlZDtcblxuICAgICAgYmFzZUVhY2goY29sbGVjdGlvbiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSB7XG4gICAgICAgIHZhciBjdXJyZW50ID0gK2l0ZXJhdGVlKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbik7XG4gICAgICAgIGlmIChjb21wYXJhdG9yKGN1cnJlbnQsIGNvbXB1dGVkKSB8fCAoY3VycmVudCA9PT0gZXhWYWx1ZSAmJiBjdXJyZW50ID09PSByZXN1bHQpKSB7XG4gICAgICAgICAgY29tcHV0ZWQgPSBjdXJyZW50O1xuICAgICAgICAgIHJlc3VsdCA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uZmlsbGAgd2l0aG91dCBhbiBpdGVyYXRlZSBjYWxsIGd1YXJkLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gZmlsbC5cbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBmaWxsIGBhcnJheWAgd2l0aC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3N0YXJ0PTBdIFRoZSBzdGFydCBwb3NpdGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2VuZD1hcnJheS5sZW5ndGhdIFRoZSBlbmQgcG9zaXRpb24uXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGBhcnJheWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZUZpbGwoYXJyYXksIHZhbHVlLCBzdGFydCwgZW5kKSB7XG4gICAgICB2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuXG4gICAgICBzdGFydCA9IHN0YXJ0ID09IG51bGwgPyAwIDogKCtzdGFydCB8fCAwKTtcbiAgICAgIGlmIChzdGFydCA8IDApIHtcbiAgICAgICAgc3RhcnQgPSAtc3RhcnQgPiBsZW5ndGggPyAwIDogKGxlbmd0aCArIHN0YXJ0KTtcbiAgICAgIH1cbiAgICAgIGVuZCA9IChlbmQgPT09IHVuZGVmaW5lZCB8fCBlbmQgPiBsZW5ndGgpID8gbGVuZ3RoIDogKCtlbmQgfHwgMCk7XG4gICAgICBpZiAoZW5kIDwgMCkge1xuICAgICAgICBlbmQgKz0gbGVuZ3RoO1xuICAgICAgfVxuICAgICAgbGVuZ3RoID0gc3RhcnQgPiBlbmQgPyAwIDogKGVuZCA+Pj4gMCk7XG4gICAgICBzdGFydCA+Pj49IDA7XG5cbiAgICAgIHdoaWxlIChzdGFydCA8IGxlbmd0aCkge1xuICAgICAgICBhcnJheVtzdGFydCsrXSA9IHZhbHVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFycmF5O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmZpbHRlcmAgd2l0aG91dCBzdXBwb3J0IGZvciBjYWxsYmFja1xuICAgICAqIHNob3J0aGFuZHMgYW5kIGB0aGlzYCBiaW5kaW5nLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGZpbHRlcmVkIGFycmF5LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VGaWx0ZXIoY29sbGVjdGlvbiwgcHJlZGljYXRlKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICBiYXNlRWFjaChjb2xsZWN0aW9uLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgaWYgKHByZWRpY2F0ZSh2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pKSB7XG4gICAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uZmluZGAsIGBfLmZpbmRMYXN0YCwgYF8uZmluZEtleWAsIGFuZCBgXy5maW5kTGFzdEtleWAsXG4gICAgICogd2l0aG91dCBzdXBwb3J0IGZvciBjYWxsYmFjayBzaG9ydGhhbmRzIGFuZCBgdGhpc2AgYmluZGluZywgd2hpY2ggaXRlcmF0ZXNcbiAgICAgKiBvdmVyIGBjb2xsZWN0aW9uYCB1c2luZyB0aGUgcHJvdmlkZWQgYGVhY2hGdW5jYC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIHNlYXJjaC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBlYWNoRnVuYyBUaGUgZnVuY3Rpb24gdG8gaXRlcmF0ZSBvdmVyIGBjb2xsZWN0aW9uYC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtyZXRLZXldIFNwZWNpZnkgcmV0dXJuaW5nIHRoZSBrZXkgb2YgdGhlIGZvdW5kIGVsZW1lbnRcbiAgICAgKiAgaW5zdGVhZCBvZiB0aGUgZWxlbWVudCBpdHNlbGYuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGZvdW5kIGVsZW1lbnQgb3IgaXRzIGtleSwgZWxzZSBgdW5kZWZpbmVkYC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlRmluZChjb2xsZWN0aW9uLCBwcmVkaWNhdGUsIGVhY2hGdW5jLCByZXRLZXkpIHtcbiAgICAgIHZhciByZXN1bHQ7XG4gICAgICBlYWNoRnVuYyhjb2xsZWN0aW9uLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBjb2xsZWN0aW9uKSB7XG4gICAgICAgIGlmIChwcmVkaWNhdGUodmFsdWUsIGtleSwgY29sbGVjdGlvbikpIHtcbiAgICAgICAgICByZXN1bHQgPSByZXRLZXkgPyBrZXkgOiB2YWx1ZTtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5mbGF0dGVuYCB3aXRoIGFkZGVkIHN1cHBvcnQgZm9yIHJlc3RyaWN0aW5nXG4gICAgICogZmxhdHRlbmluZyBhbmQgc3BlY2lmeWluZyB0aGUgc3RhcnQgaW5kZXguXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBmbGF0dGVuLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzRGVlcF0gU3BlY2lmeSBhIGRlZXAgZmxhdHRlbi5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc1N0cmljdF0gUmVzdHJpY3QgZmxhdHRlbmluZyB0byBhcnJheXMtbGlrZSBvYmplY3RzLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFtyZXN1bHQ9W11dIFRoZSBpbml0aWFsIHJlc3VsdCB2YWx1ZS5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBmbGF0dGVuZWQgYXJyYXkuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZUZsYXR0ZW4oYXJyYXksIGlzRGVlcCwgaXNTdHJpY3QsIHJlc3VsdCkge1xuICAgICAgcmVzdWx0IHx8IChyZXN1bHQgPSBbXSk7XG5cbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcblxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gYXJyYXlbaW5kZXhdO1xuICAgICAgICBpZiAoaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBpc0FycmF5TGlrZSh2YWx1ZSkgJiZcbiAgICAgICAgICAgIChpc1N0cmljdCB8fCBpc0FycmF5KHZhbHVlKSB8fCBpc0FyZ3VtZW50cyh2YWx1ZSkpKSB7XG4gICAgICAgICAgaWYgKGlzRGVlcCkge1xuICAgICAgICAgICAgLy8gUmVjdXJzaXZlbHkgZmxhdHRlbiBhcnJheXMgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKS5cbiAgICAgICAgICAgIGJhc2VGbGF0dGVuKHZhbHVlLCBpc0RlZXAsIGlzU3RyaWN0LCByZXN1bHQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhcnJheVB1c2gocmVzdWx0LCB2YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKCFpc1N0cmljdCkge1xuICAgICAgICAgIHJlc3VsdFtyZXN1bHQubGVuZ3RoXSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBiYXNlRm9ySW5gIGFuZCBgYmFzZUZvck93bmAgd2hpY2ggaXRlcmF0ZXNcbiAgICAgKiBvdmVyIGBvYmplY3RgIHByb3BlcnRpZXMgcmV0dXJuZWQgYnkgYGtleXNGdW5jYCBpbnZva2luZyBgaXRlcmF0ZWVgIGZvclxuICAgICAqIGVhY2ggcHJvcGVydHkuIEl0ZXJhdGVlIGZ1bmN0aW9ucyBtYXkgZXhpdCBpdGVyYXRpb24gZWFybHkgYnkgZXhwbGljaXRseVxuICAgICAqIHJldHVybmluZyBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0ga2V5c0Z1bmMgVGhlIGZ1bmN0aW9uIHRvIGdldCB0aGUga2V5cyBvZiBgb2JqZWN0YC5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICAgICAqL1xuICAgIHZhciBiYXNlRm9yID0gY3JlYXRlQmFzZUZvcigpO1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBpcyBsaWtlIGBiYXNlRm9yYCBleGNlcHQgdGhhdCBpdCBpdGVyYXRlcyBvdmVyIHByb3BlcnRpZXNcbiAgICAgKiBpbiB0aGUgb3Bwb3NpdGUgb3JkZXIuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBrZXlzRnVuYyBUaGUgZnVuY3Rpb24gdG8gZ2V0IHRoZSBrZXlzIG9mIGBvYmplY3RgLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gICAgICovXG4gICAgdmFyIGJhc2VGb3JSaWdodCA9IGNyZWF0ZUJhc2VGb3IodHJ1ZSk7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5mb3JJbmAgd2l0aG91dCBzdXBwb3J0IGZvciBjYWxsYmFja1xuICAgICAqIHNob3J0aGFuZHMgYW5kIGB0aGlzYCBiaW5kaW5nLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlRm9ySW4ob2JqZWN0LCBpdGVyYXRlZSkge1xuICAgICAgcmV0dXJuIGJhc2VGb3Iob2JqZWN0LCBpdGVyYXRlZSwga2V5c0luKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5mb3JPd25gIHdpdGhvdXQgc3VwcG9ydCBmb3IgY2FsbGJhY2tcbiAgICAgKiBzaG9ydGhhbmRzIGFuZCBgdGhpc2AgYmluZGluZy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZUZvck93bihvYmplY3QsIGl0ZXJhdGVlKSB7XG4gICAgICByZXR1cm4gYmFzZUZvcihvYmplY3QsIGl0ZXJhdGVlLCBrZXlzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5mb3JPd25SaWdodGAgd2l0aG91dCBzdXBwb3J0IGZvciBjYWxsYmFja1xuICAgICAqIHNob3J0aGFuZHMgYW5kIGB0aGlzYCBiaW5kaW5nLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlRm9yT3duUmlnaHQob2JqZWN0LCBpdGVyYXRlZSkge1xuICAgICAgcmV0dXJuIGJhc2VGb3JSaWdodChvYmplY3QsIGl0ZXJhdGVlLCBrZXlzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5mdW5jdGlvbnNgIHdoaWNoIGNyZWF0ZXMgYW4gYXJyYXkgb2ZcbiAgICAgKiBgb2JqZWN0YCBmdW5jdGlvbiBwcm9wZXJ0eSBuYW1lcyBmaWx0ZXJlZCBmcm9tIHRob3NlIHByb3ZpZGVkLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaW5zcGVjdC5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBwcm9wcyBUaGUgcHJvcGVydHkgbmFtZXMgdG8gZmlsdGVyLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGFycmF5IG9mIGZpbHRlcmVkIHByb3BlcnR5IG5hbWVzLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VGdW5jdGlvbnMob2JqZWN0LCBwcm9wcykge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gcHJvcHMubGVuZ3RoLFxuICAgICAgICAgIHJlc0luZGV4ID0gLTEsXG4gICAgICAgICAgcmVzdWx0ID0gW107XG5cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHZhciBrZXkgPSBwcm9wc1tpbmRleF07XG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKG9iamVjdFtrZXldKSkge1xuICAgICAgICAgIHJlc3VsdFsrK3Jlc0luZGV4XSA9IGtleTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgZ2V0YCB3aXRob3V0IHN1cHBvcnQgZm9yIHN0cmluZyBwYXRoc1xuICAgICAqIGFuZCBkZWZhdWx0IHZhbHVlcy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3BhdGhLZXldIFRoZSBrZXkgcmVwcmVzZW50YXRpb24gb2YgcGF0aC5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcmVzb2x2ZWQgdmFsdWUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZUdldChvYmplY3QsIHBhdGgsIHBhdGhLZXkpIHtcbiAgICAgIGlmIChvYmplY3QgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAocGF0aEtleSAhPT0gdW5kZWZpbmVkICYmIHBhdGhLZXkgaW4gdG9PYmplY3Qob2JqZWN0KSkge1xuICAgICAgICBwYXRoID0gW3BhdGhLZXldO1xuICAgICAgfVxuICAgICAgdmFyIGluZGV4ID0gMCxcbiAgICAgICAgICBsZW5ndGggPSBwYXRoLmxlbmd0aDtcblxuICAgICAgd2hpbGUgKG9iamVjdCAhPSBudWxsICYmIGluZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIG9iamVjdCA9IG9iamVjdFtwYXRoW2luZGV4KytdXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiAoaW5kZXggJiYgaW5kZXggPT0gbGVuZ3RoKSA/IG9iamVjdCA6IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pc0VxdWFsYCB3aXRob3V0IHN1cHBvcnQgZm9yIGB0aGlzYCBiaW5kaW5nXG4gICAgICogYGN1c3RvbWl6ZXJgIGZ1bmN0aW9ucy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29tcGFyZS5cbiAgICAgKiBAcGFyYW0geyp9IG90aGVyIFRoZSBvdGhlciB2YWx1ZSB0byBjb21wYXJlLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmluZyB2YWx1ZXMuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbaXNMb29zZV0gU3BlY2lmeSBwZXJmb3JtaW5nIHBhcnRpYWwgY29tcGFyaXNvbnMuXG4gICAgICogQHBhcmFtIHtBcnJheX0gW3N0YWNrQV0gVHJhY2tzIHRyYXZlcnNlZCBgdmFsdWVgIG9iamVjdHMuXG4gICAgICogQHBhcmFtIHtBcnJheX0gW3N0YWNrQl0gVHJhY2tzIHRyYXZlcnNlZCBgb3RoZXJgIG9iamVjdHMuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSB2YWx1ZXMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlSXNFcXVhbCh2YWx1ZSwgb3RoZXIsIGN1c3RvbWl6ZXIsIGlzTG9vc2UsIHN0YWNrQSwgc3RhY2tCKSB7XG4gICAgICBpZiAodmFsdWUgPT09IG90aGVyKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKHZhbHVlID09IG51bGwgfHwgb3RoZXIgPT0gbnVsbCB8fCAoIWlzT2JqZWN0KHZhbHVlKSAmJiAhaXNPYmplY3RMaWtlKG90aGVyKSkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlICE9PSB2YWx1ZSAmJiBvdGhlciAhPT0gb3RoZXI7XG4gICAgICB9XG4gICAgICByZXR1cm4gYmFzZUlzRXF1YWxEZWVwKHZhbHVlLCBvdGhlciwgYmFzZUlzRXF1YWwsIGN1c3RvbWl6ZXIsIGlzTG9vc2UsIHN0YWNrQSwgc3RhY2tCKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VJc0VxdWFsYCBmb3IgYXJyYXlzIGFuZCBvYmplY3RzIHdoaWNoIHBlcmZvcm1zXG4gICAgICogZGVlcCBjb21wYXJpc29ucyBhbmQgdHJhY2tzIHRyYXZlcnNlZCBvYmplY3RzIGVuYWJsaW5nIG9iamVjdHMgd2l0aCBjaXJjdWxhclxuICAgICAqIHJlZmVyZW5jZXMgdG8gYmUgY29tcGFyZWQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjb21wYXJlLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvdGhlciBUaGUgb3RoZXIgb2JqZWN0IHRvIGNvbXBhcmUuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZXF1YWxGdW5jIFRoZSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgZXF1aXZhbGVudHMgb2YgdmFsdWVzLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmluZyBvYmplY3RzLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzTG9vc2VdIFNwZWNpZnkgcGVyZm9ybWluZyBwYXJ0aWFsIGNvbXBhcmlzb25zLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0E9W11dIFRyYWNrcyB0cmF2ZXJzZWQgYHZhbHVlYCBvYmplY3RzLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0I9W11dIFRyYWNrcyB0cmF2ZXJzZWQgYG90aGVyYCBvYmplY3RzLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgb2JqZWN0cyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VJc0VxdWFsRGVlcChvYmplY3QsIG90aGVyLCBlcXVhbEZ1bmMsIGN1c3RvbWl6ZXIsIGlzTG9vc2UsIHN0YWNrQSwgc3RhY2tCKSB7XG4gICAgICB2YXIgb2JqSXNBcnIgPSBpc0FycmF5KG9iamVjdCksXG4gICAgICAgICAgb3RoSXNBcnIgPSBpc0FycmF5KG90aGVyKSxcbiAgICAgICAgICBvYmpUYWcgPSBhcnJheVRhZyxcbiAgICAgICAgICBvdGhUYWcgPSBhcnJheVRhZztcblxuICAgICAgaWYgKCFvYmpJc0Fycikge1xuICAgICAgICBvYmpUYWcgPSBvYmpUb1N0cmluZy5jYWxsKG9iamVjdCk7XG4gICAgICAgIGlmIChvYmpUYWcgPT0gYXJnc1RhZykge1xuICAgICAgICAgIG9ialRhZyA9IG9iamVjdFRhZztcbiAgICAgICAgfSBlbHNlIGlmIChvYmpUYWcgIT0gb2JqZWN0VGFnKSB7XG4gICAgICAgICAgb2JqSXNBcnIgPSBpc1R5cGVkQXJyYXkob2JqZWN0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCFvdGhJc0Fycikge1xuICAgICAgICBvdGhUYWcgPSBvYmpUb1N0cmluZy5jYWxsKG90aGVyKTtcbiAgICAgICAgaWYgKG90aFRhZyA9PSBhcmdzVGFnKSB7XG4gICAgICAgICAgb3RoVGFnID0gb2JqZWN0VGFnO1xuICAgICAgICB9IGVsc2UgaWYgKG90aFRhZyAhPSBvYmplY3RUYWcpIHtcbiAgICAgICAgICBvdGhJc0FyciA9IGlzVHlwZWRBcnJheShvdGhlcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHZhciBvYmpJc09iaiA9IG9ialRhZyA9PSBvYmplY3RUYWcsXG4gICAgICAgICAgb3RoSXNPYmogPSBvdGhUYWcgPT0gb2JqZWN0VGFnLFxuICAgICAgICAgIGlzU2FtZVRhZyA9IG9ialRhZyA9PSBvdGhUYWc7XG5cbiAgICAgIGlmIChpc1NhbWVUYWcgJiYgIShvYmpJc0FyciB8fCBvYmpJc09iaikpIHtcbiAgICAgICAgcmV0dXJuIGVxdWFsQnlUYWcob2JqZWN0LCBvdGhlciwgb2JqVGFnKTtcbiAgICAgIH1cbiAgICAgIGlmICghaXNMb29zZSkge1xuICAgICAgICB2YXIgb2JqSXNXcmFwcGVkID0gb2JqSXNPYmogJiYgaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsICdfX3dyYXBwZWRfXycpLFxuICAgICAgICAgICAgb3RoSXNXcmFwcGVkID0gb3RoSXNPYmogJiYgaGFzT3duUHJvcGVydHkuY2FsbChvdGhlciwgJ19fd3JhcHBlZF9fJyk7XG5cbiAgICAgICAgaWYgKG9iaklzV3JhcHBlZCB8fCBvdGhJc1dyYXBwZWQpIHtcbiAgICAgICAgICByZXR1cm4gZXF1YWxGdW5jKG9iaklzV3JhcHBlZCA/IG9iamVjdC52YWx1ZSgpIDogb2JqZWN0LCBvdGhJc1dyYXBwZWQgPyBvdGhlci52YWx1ZSgpIDogb3RoZXIsIGN1c3RvbWl6ZXIsIGlzTG9vc2UsIHN0YWNrQSwgc3RhY2tCKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCFpc1NhbWVUYWcpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgLy8gQXNzdW1lIGN5Y2xpYyB2YWx1ZXMgYXJlIGVxdWFsLlxuICAgICAgLy8gRm9yIG1vcmUgaW5mb3JtYXRpb24gb24gZGV0ZWN0aW5nIGNpcmN1bGFyIHJlZmVyZW5jZXMgc2VlIGh0dHBzOi8vZXM1LmdpdGh1Yi5pby8jSk8uXG4gICAgICBzdGFja0EgfHwgKHN0YWNrQSA9IFtdKTtcbiAgICAgIHN0YWNrQiB8fCAoc3RhY2tCID0gW10pO1xuXG4gICAgICB2YXIgbGVuZ3RoID0gc3RhY2tBLmxlbmd0aDtcbiAgICAgIHdoaWxlIChsZW5ndGgtLSkge1xuICAgICAgICBpZiAoc3RhY2tBW2xlbmd0aF0gPT0gb2JqZWN0KSB7XG4gICAgICAgICAgcmV0dXJuIHN0YWNrQltsZW5ndGhdID09IG90aGVyO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBBZGQgYG9iamVjdGAgYW5kIGBvdGhlcmAgdG8gdGhlIHN0YWNrIG9mIHRyYXZlcnNlZCBvYmplY3RzLlxuICAgICAgc3RhY2tBLnB1c2gob2JqZWN0KTtcbiAgICAgIHN0YWNrQi5wdXNoKG90aGVyKTtcblxuICAgICAgdmFyIHJlc3VsdCA9IChvYmpJc0FyciA/IGVxdWFsQXJyYXlzIDogZXF1YWxPYmplY3RzKShvYmplY3QsIG90aGVyLCBlcXVhbEZ1bmMsIGN1c3RvbWl6ZXIsIGlzTG9vc2UsIHN0YWNrQSwgc3RhY2tCKTtcblxuICAgICAgc3RhY2tBLnBvcCgpO1xuICAgICAgc3RhY2tCLnBvcCgpO1xuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmlzTWF0Y2hgIHdpdGhvdXQgc3VwcG9ydCBmb3IgY2FsbGJhY2tcbiAgICAgKiBzaG9ydGhhbmRzIGFuZCBgdGhpc2AgYmluZGluZy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGluc3BlY3QuXG4gICAgICogQHBhcmFtIHtBcnJheX0gbWF0Y2hEYXRhIFRoZSBwcm9wZXJ5IG5hbWVzLCB2YWx1ZXMsIGFuZCBjb21wYXJlIGZsYWdzIHRvIG1hdGNoLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmluZyBvYmplY3RzLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgb2JqZWN0YCBpcyBhIG1hdGNoLCBlbHNlIGBmYWxzZWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZUlzTWF0Y2gob2JqZWN0LCBtYXRjaERhdGEsIGN1c3RvbWl6ZXIpIHtcbiAgICAgIHZhciBpbmRleCA9IG1hdGNoRGF0YS5sZW5ndGgsXG4gICAgICAgICAgbGVuZ3RoID0gaW5kZXgsXG4gICAgICAgICAgbm9DdXN0b21pemVyID0gIWN1c3RvbWl6ZXI7XG5cbiAgICAgIGlmIChvYmplY3QgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gIWxlbmd0aDtcbiAgICAgIH1cbiAgICAgIG9iamVjdCA9IHRvT2JqZWN0KG9iamVjdCk7XG4gICAgICB3aGlsZSAoaW5kZXgtLSkge1xuICAgICAgICB2YXIgZGF0YSA9IG1hdGNoRGF0YVtpbmRleF07XG4gICAgICAgIGlmICgobm9DdXN0b21pemVyICYmIGRhdGFbMl0pXG4gICAgICAgICAgICAgID8gZGF0YVsxXSAhPT0gb2JqZWN0W2RhdGFbMF1dXG4gICAgICAgICAgICAgIDogIShkYXRhWzBdIGluIG9iamVjdClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgZGF0YSA9IG1hdGNoRGF0YVtpbmRleF07XG4gICAgICAgIHZhciBrZXkgPSBkYXRhWzBdLFxuICAgICAgICAgICAgb2JqVmFsdWUgPSBvYmplY3Rba2V5XSxcbiAgICAgICAgICAgIHNyY1ZhbHVlID0gZGF0YVsxXTtcblxuICAgICAgICBpZiAobm9DdXN0b21pemVyICYmIGRhdGFbMl0pIHtcbiAgICAgICAgICBpZiAob2JqVmFsdWUgPT09IHVuZGVmaW5lZCAmJiAhKGtleSBpbiBvYmplY3QpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciByZXN1bHQgPSBjdXN0b21pemVyID8gY3VzdG9taXplcihvYmpWYWx1ZSwgc3JjVmFsdWUsIGtleSkgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgaWYgKCEocmVzdWx0ID09PSB1bmRlZmluZWQgPyBiYXNlSXNFcXVhbChzcmNWYWx1ZSwgb2JqVmFsdWUsIGN1c3RvbWl6ZXIsIHRydWUpIDogcmVzdWx0KSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ubWFwYCB3aXRob3V0IHN1cHBvcnQgZm9yIGNhbGxiYWNrIHNob3J0aGFuZHNcbiAgICAgKiBhbmQgYHRoaXNgIGJpbmRpbmcuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBtYXBwZWQgYXJyYXkuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZU1hcChjb2xsZWN0aW9uLCBpdGVyYXRlZSkge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgcmVzdWx0ID0gaXNBcnJheUxpa2UoY29sbGVjdGlvbikgPyBBcnJheShjb2xsZWN0aW9uLmxlbmd0aCkgOiBbXTtcblxuICAgICAgYmFzZUVhY2goY29sbGVjdGlvbiwgZnVuY3Rpb24odmFsdWUsIGtleSwgY29sbGVjdGlvbikge1xuICAgICAgICByZXN1bHRbKytpbmRleF0gPSBpdGVyYXRlZSh2YWx1ZSwga2V5LCBjb2xsZWN0aW9uKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5tYXRjaGVzYCB3aGljaCBkb2VzIG5vdCBjbG9uZSBgc291cmNlYC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZSBUaGUgb2JqZWN0IG9mIHByb3BlcnR5IHZhbHVlcyB0byBtYXRjaC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlTWF0Y2hlcyhzb3VyY2UpIHtcbiAgICAgIHZhciBtYXRjaERhdGEgPSBnZXRNYXRjaERhdGEoc291cmNlKTtcbiAgICAgIGlmIChtYXRjaERhdGEubGVuZ3RoID09IDEgJiYgbWF0Y2hEYXRhWzBdWzJdKSB7XG4gICAgICAgIHZhciBrZXkgPSBtYXRjaERhdGFbMF1bMF0sXG4gICAgICAgICAgICB2YWx1ZSA9IG1hdGNoRGF0YVswXVsxXTtcblxuICAgICAgICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgICAgICAgaWYgKG9iamVjdCA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBvYmplY3Rba2V5XSA9PT0gdmFsdWUgJiYgKHZhbHVlICE9PSB1bmRlZmluZWQgfHwgKGtleSBpbiB0b09iamVjdChvYmplY3QpKSk7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiBiYXNlSXNNYXRjaChvYmplY3QsIG1hdGNoRGF0YSk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLm1hdGNoZXNQcm9wZXJ0eWAgd2hpY2ggZG9lcyBub3QgY2xvbmUgYHNyY1ZhbHVlYC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAgICAgKiBAcGFyYW0geyp9IHNyY1ZhbHVlIFRoZSB2YWx1ZSB0byBjb21wYXJlLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VNYXRjaGVzUHJvcGVydHkocGF0aCwgc3JjVmFsdWUpIHtcbiAgICAgIHZhciBpc0FyciA9IGlzQXJyYXkocGF0aCksXG4gICAgICAgICAgaXNDb21tb24gPSBpc0tleShwYXRoKSAmJiBpc1N0cmljdENvbXBhcmFibGUoc3JjVmFsdWUpLFxuICAgICAgICAgIHBhdGhLZXkgPSAocGF0aCArICcnKTtcblxuICAgICAgcGF0aCA9IHRvUGF0aChwYXRoKTtcbiAgICAgIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcbiAgICAgICAgaWYgKG9iamVjdCA9PSBudWxsKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBrZXkgPSBwYXRoS2V5O1xuICAgICAgICBvYmplY3QgPSB0b09iamVjdChvYmplY3QpO1xuICAgICAgICBpZiAoKGlzQXJyIHx8ICFpc0NvbW1vbikgJiYgIShrZXkgaW4gb2JqZWN0KSkge1xuICAgICAgICAgIG9iamVjdCA9IHBhdGgubGVuZ3RoID09IDEgPyBvYmplY3QgOiBiYXNlR2V0KG9iamVjdCwgYmFzZVNsaWNlKHBhdGgsIDAsIC0xKSk7XG4gICAgICAgICAgaWYgKG9iamVjdCA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIGtleSA9IGxhc3QocGF0aCk7XG4gICAgICAgICAgb2JqZWN0ID0gdG9PYmplY3Qob2JqZWN0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqZWN0W2tleV0gPT09IHNyY1ZhbHVlXG4gICAgICAgICAgPyAoc3JjVmFsdWUgIT09IHVuZGVmaW5lZCB8fCAoa2V5IGluIG9iamVjdCkpXG4gICAgICAgICAgOiBiYXNlSXNFcXVhbChzcmNWYWx1ZSwgb2JqZWN0W2tleV0sIHVuZGVmaW5lZCwgdHJ1ZSk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLm1lcmdlYCB3aXRob3V0IHN1cHBvcnQgZm9yIGFyZ3VtZW50IGp1Z2dsaW5nLFxuICAgICAqIG11bHRpcGxlIHNvdXJjZXMsIGFuZCBgdGhpc2AgYmluZGluZyBgY3VzdG9taXplcmAgZnVuY3Rpb25zLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZSBUaGUgc291cmNlIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY3VzdG9taXplcl0gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBtZXJnZWQgdmFsdWVzLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0E9W11dIFRyYWNrcyB0cmF2ZXJzZWQgc291cmNlIG9iamVjdHMuXG4gICAgICogQHBhcmFtIHtBcnJheX0gW3N0YWNrQj1bXV0gQXNzb2NpYXRlcyB2YWx1ZXMgd2l0aCBzb3VyY2UgY291bnRlcnBhcnRzLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZU1lcmdlKG9iamVjdCwgc291cmNlLCBjdXN0b21pemVyLCBzdGFja0EsIHN0YWNrQikge1xuICAgICAgaWYgKCFpc09iamVjdChvYmplY3QpKSB7XG4gICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICB9XG4gICAgICB2YXIgaXNTcmNBcnIgPSBpc0FycmF5TGlrZShzb3VyY2UpICYmIChpc0FycmF5KHNvdXJjZSkgfHwgaXNUeXBlZEFycmF5KHNvdXJjZSkpLFxuICAgICAgICAgIHByb3BzID0gaXNTcmNBcnIgPyB1bmRlZmluZWQgOiBrZXlzKHNvdXJjZSk7XG5cbiAgICAgIGFycmF5RWFjaChwcm9wcyB8fCBzb3VyY2UsIGZ1bmN0aW9uKHNyY1ZhbHVlLCBrZXkpIHtcbiAgICAgICAgaWYgKHByb3BzKSB7XG4gICAgICAgICAga2V5ID0gc3JjVmFsdWU7XG4gICAgICAgICAgc3JjVmFsdWUgPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNPYmplY3RMaWtlKHNyY1ZhbHVlKSkge1xuICAgICAgICAgIHN0YWNrQSB8fCAoc3RhY2tBID0gW10pO1xuICAgICAgICAgIHN0YWNrQiB8fCAoc3RhY2tCID0gW10pO1xuICAgICAgICAgIGJhc2VNZXJnZURlZXAob2JqZWN0LCBzb3VyY2UsIGtleSwgYmFzZU1lcmdlLCBjdXN0b21pemVyLCBzdGFja0EsIHN0YWNrQik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgdmFyIHZhbHVlID0gb2JqZWN0W2tleV0sXG4gICAgICAgICAgICAgIHJlc3VsdCA9IGN1c3RvbWl6ZXIgPyBjdXN0b21pemVyKHZhbHVlLCBzcmNWYWx1ZSwga2V5LCBvYmplY3QsIHNvdXJjZSkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgIGlzQ29tbW9uID0gcmVzdWx0ID09PSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICBpZiAoaXNDb21tb24pIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHNyY1ZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoKHJlc3VsdCAhPT0gdW5kZWZpbmVkIHx8IChpc1NyY0FyciAmJiAhKGtleSBpbiBvYmplY3QpKSkgJiZcbiAgICAgICAgICAgICAgKGlzQ29tbW9uIHx8IChyZXN1bHQgPT09IHJlc3VsdCA/IChyZXN1bHQgIT09IHZhbHVlKSA6ICh2YWx1ZSA9PT0gdmFsdWUpKSkpIHtcbiAgICAgICAgICAgIG9iamVjdFtrZXldID0gcmVzdWx0O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gb2JqZWN0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZU1lcmdlYCBmb3IgYXJyYXlzIGFuZCBvYmplY3RzIHdoaWNoIHBlcmZvcm1zXG4gICAgICogZGVlcCBtZXJnZXMgYW5kIHRyYWNrcyB0cmF2ZXJzZWQgb2JqZWN0cyBlbmFibGluZyBvYmplY3RzIHdpdGggY2lyY3VsYXJcbiAgICAgKiByZWZlcmVuY2VzIHRvIGJlIG1lcmdlZC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgZGVzdGluYXRpb24gb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgVGhlIHNvdXJjZSBvYmplY3QuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBtZXJnZS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBtZXJnZUZ1bmMgVGhlIGZ1bmN0aW9uIHRvIG1lcmdlIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY3VzdG9taXplcl0gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBtZXJnZWQgdmFsdWVzLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0E9W11dIFRyYWNrcyB0cmF2ZXJzZWQgc291cmNlIG9iamVjdHMuXG4gICAgICogQHBhcmFtIHtBcnJheX0gW3N0YWNrQj1bXV0gQXNzb2NpYXRlcyB2YWx1ZXMgd2l0aCBzb3VyY2UgY291bnRlcnBhcnRzLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgb2JqZWN0cyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VNZXJnZURlZXAob2JqZWN0LCBzb3VyY2UsIGtleSwgbWVyZ2VGdW5jLCBjdXN0b21pemVyLCBzdGFja0EsIHN0YWNrQikge1xuICAgICAgdmFyIGxlbmd0aCA9IHN0YWNrQS5sZW5ndGgsXG4gICAgICAgICAgc3JjVmFsdWUgPSBzb3VyY2Vba2V5XTtcblxuICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICAgIGlmIChzdGFja0FbbGVuZ3RoXSA9PSBzcmNWYWx1ZSkge1xuICAgICAgICAgIG9iamVjdFtrZXldID0gc3RhY2tCW2xlbmd0aF07XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB2YXIgdmFsdWUgPSBvYmplY3Rba2V5XSxcbiAgICAgICAgICByZXN1bHQgPSBjdXN0b21pemVyID8gY3VzdG9taXplcih2YWx1ZSwgc3JjVmFsdWUsIGtleSwgb2JqZWN0LCBzb3VyY2UpIDogdW5kZWZpbmVkLFxuICAgICAgICAgIGlzQ29tbW9uID0gcmVzdWx0ID09PSB1bmRlZmluZWQ7XG5cbiAgICAgIGlmIChpc0NvbW1vbikge1xuICAgICAgICByZXN1bHQgPSBzcmNWYWx1ZTtcbiAgICAgICAgaWYgKGlzQXJyYXlMaWtlKHNyY1ZhbHVlKSAmJiAoaXNBcnJheShzcmNWYWx1ZSkgfHwgaXNUeXBlZEFycmF5KHNyY1ZhbHVlKSkpIHtcbiAgICAgICAgICByZXN1bHQgPSBpc0FycmF5KHZhbHVlKVxuICAgICAgICAgICAgPyB2YWx1ZVxuICAgICAgICAgICAgOiAoaXNBcnJheUxpa2UodmFsdWUpID8gYXJyYXlDb3B5KHZhbHVlKSA6IFtdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc1BsYWluT2JqZWN0KHNyY1ZhbHVlKSB8fCBpc0FyZ3VtZW50cyhzcmNWYWx1ZSkpIHtcbiAgICAgICAgICByZXN1bHQgPSBpc0FyZ3VtZW50cyh2YWx1ZSlcbiAgICAgICAgICAgID8gdG9QbGFpbk9iamVjdCh2YWx1ZSlcbiAgICAgICAgICAgIDogKGlzUGxhaW5PYmplY3QodmFsdWUpID8gdmFsdWUgOiB7fSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgaXNDb21tb24gPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gQWRkIHRoZSBzb3VyY2UgdmFsdWUgdG8gdGhlIHN0YWNrIG9mIHRyYXZlcnNlZCBvYmplY3RzIGFuZCBhc3NvY2lhdGVcbiAgICAgIC8vIGl0IHdpdGggaXRzIG1lcmdlZCB2YWx1ZS5cbiAgICAgIHN0YWNrQS5wdXNoKHNyY1ZhbHVlKTtcbiAgICAgIHN0YWNrQi5wdXNoKHJlc3VsdCk7XG5cbiAgICAgIGlmIChpc0NvbW1vbikge1xuICAgICAgICAvLyBSZWN1cnNpdmVseSBtZXJnZSBvYmplY3RzIGFuZCBhcnJheXMgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKS5cbiAgICAgICAgb2JqZWN0W2tleV0gPSBtZXJnZUZ1bmMocmVzdWx0LCBzcmNWYWx1ZSwgY3VzdG9taXplciwgc3RhY2tBLCBzdGFja0IpO1xuICAgICAgfSBlbHNlIGlmIChyZXN1bHQgPT09IHJlc3VsdCA/IChyZXN1bHQgIT09IHZhbHVlKSA6ICh2YWx1ZSA9PT0gdmFsdWUpKSB7XG4gICAgICAgIG9iamVjdFtrZXldID0gcmVzdWx0O1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnByb3BlcnR5YCB3aXRob3V0IHN1cHBvcnQgZm9yIGRlZXAgcGF0aHMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VQcm9wZXJ0eShrZXkpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIG9iamVjdCA9PSBudWxsID8gdW5kZWZpbmVkIDogb2JqZWN0W2tleV07XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZVByb3BlcnR5YCB3aGljaCBzdXBwb3J0cyBkZWVwIHBhdGhzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VQcm9wZXJ0eURlZXAocGF0aCkge1xuICAgICAgdmFyIHBhdGhLZXkgPSAocGF0aCArICcnKTtcbiAgICAgIHBhdGggPSB0b1BhdGgocGF0aCk7XG4gICAgICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiBiYXNlR2V0KG9iamVjdCwgcGF0aCwgcGF0aEtleSk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnB1bGxBdGAgd2l0aG91dCBzdXBwb3J0IGZvciBpbmRpdmlkdWFsXG4gICAgICogaW5kZXggYXJndW1lbnRzIGFuZCBjYXB0dXJpbmcgdGhlIHJlbW92ZWQgZWxlbWVudHMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBtb2RpZnkuXG4gICAgICogQHBhcmFtIHtudW1iZXJbXX0gaW5kZXhlcyBUaGUgaW5kZXhlcyBvZiBlbGVtZW50cyB0byByZW1vdmUuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGBhcnJheWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZVB1bGxBdChhcnJheSwgaW5kZXhlcykge1xuICAgICAgdmFyIGxlbmd0aCA9IGFycmF5ID8gaW5kZXhlcy5sZW5ndGggOiAwO1xuICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICAgIHZhciBpbmRleCA9IGluZGV4ZXNbbGVuZ3RoXTtcbiAgICAgICAgaWYgKGluZGV4ICE9IHByZXZpb3VzICYmIGlzSW5kZXgoaW5kZXgpKSB7XG4gICAgICAgICAgdmFyIHByZXZpb3VzID0gaW5kZXg7XG4gICAgICAgICAgc3BsaWNlLmNhbGwoYXJyYXksIGluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGFycmF5O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnJhbmRvbWAgd2l0aG91dCBzdXBwb3J0IGZvciBhcmd1bWVudCBqdWdnbGluZ1xuICAgICAqIGFuZCByZXR1cm5pbmcgZmxvYXRpbmctcG9pbnQgbnVtYmVycy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1pbiBUaGUgbWluaW11bSBwb3NzaWJsZSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWF4IFRoZSBtYXhpbXVtIHBvc3NpYmxlIHZhbHVlLlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHJhbmRvbSBudW1iZXIuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZVJhbmRvbShtaW4sIG1heCkge1xuICAgICAgcmV0dXJuIG1pbiArIG5hdGl2ZUZsb29yKG5hdGl2ZVJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5yZWR1Y2VgIGFuZCBgXy5yZWR1Y2VSaWdodGAgd2l0aG91dCBzdXBwb3J0XG4gICAgICogZm9yIGNhbGxiYWNrIHNob3J0aGFuZHMgYW5kIGB0aGlzYCBiaW5kaW5nLCB3aGljaCBpdGVyYXRlcyBvdmVyIGBjb2xsZWN0aW9uYFxuICAgICAqIHVzaW5nIHRoZSBwcm92aWRlZCBgZWFjaEZ1bmNgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBhY2N1bXVsYXRvciBUaGUgaW5pdGlhbCB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGluaXRGcm9tQ29sbGVjdGlvbiBTcGVjaWZ5IHVzaW5nIHRoZSBmaXJzdCBvciBsYXN0IGVsZW1lbnRcbiAgICAgKiAgb2YgYGNvbGxlY3Rpb25gIGFzIHRoZSBpbml0aWFsIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGVhY2hGdW5jIFRoZSBmdW5jdGlvbiB0byBpdGVyYXRlIG92ZXIgYGNvbGxlY3Rpb25gLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBhY2N1bXVsYXRlZCB2YWx1ZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlUmVkdWNlKGNvbGxlY3Rpb24sIGl0ZXJhdGVlLCBhY2N1bXVsYXRvciwgaW5pdEZyb21Db2xsZWN0aW9uLCBlYWNoRnVuYykge1xuICAgICAgZWFjaEZ1bmMoY29sbGVjdGlvbiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSB7XG4gICAgICAgIGFjY3VtdWxhdG9yID0gaW5pdEZyb21Db2xsZWN0aW9uXG4gICAgICAgICAgPyAoaW5pdEZyb21Db2xsZWN0aW9uID0gZmFsc2UsIHZhbHVlKVxuICAgICAgICAgIDogaXRlcmF0ZWUoYWNjdW11bGF0b3IsIHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbik7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBhY2N1bXVsYXRvcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgc2V0RGF0YWAgd2l0aG91dCBzdXBwb3J0IGZvciBob3QgbG9vcCBkZXRlY3Rpb24uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGFzc29jaWF0ZSBtZXRhZGF0YSB3aXRoLlxuICAgICAqIEBwYXJhbSB7Kn0gZGF0YSBUaGUgbWV0YWRhdGEuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIGBmdW5jYC5cbiAgICAgKi9cbiAgICB2YXIgYmFzZVNldERhdGEgPSAhbWV0YU1hcCA/IGlkZW50aXR5IDogZnVuY3Rpb24oZnVuYywgZGF0YSkge1xuICAgICAgbWV0YU1hcC5zZXQoZnVuYywgZGF0YSk7XG4gICAgICByZXR1cm4gZnVuYztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uc2xpY2VgIHdpdGhvdXQgYW4gaXRlcmF0ZWUgY2FsbCBndWFyZC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHNsaWNlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbc3RhcnQ9MF0gVGhlIHN0YXJ0IHBvc2l0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbZW5kPWFycmF5Lmxlbmd0aF0gVGhlIGVuZCBwb3NpdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHNsaWNlIG9mIGBhcnJheWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZVNsaWNlKGFycmF5LCBzdGFydCwgZW5kKSB7XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSBhcnJheS5sZW5ndGg7XG5cbiAgICAgIHN0YXJ0ID0gc3RhcnQgPT0gbnVsbCA/IDAgOiAoK3N0YXJ0IHx8IDApO1xuICAgICAgaWYgKHN0YXJ0IDwgMCkge1xuICAgICAgICBzdGFydCA9IC1zdGFydCA+IGxlbmd0aCA/IDAgOiAobGVuZ3RoICsgc3RhcnQpO1xuICAgICAgfVxuICAgICAgZW5kID0gKGVuZCA9PT0gdW5kZWZpbmVkIHx8IGVuZCA+IGxlbmd0aCkgPyBsZW5ndGggOiAoK2VuZCB8fCAwKTtcbiAgICAgIGlmIChlbmQgPCAwKSB7XG4gICAgICAgIGVuZCArPSBsZW5ndGg7XG4gICAgICB9XG4gICAgICBsZW5ndGggPSBzdGFydCA+IGVuZCA/IDAgOiAoKGVuZCAtIHN0YXJ0KSA+Pj4gMCk7XG4gICAgICBzdGFydCA+Pj49IDA7XG5cbiAgICAgIHZhciByZXN1bHQgPSBBcnJheShsZW5ndGgpO1xuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgcmVzdWx0W2luZGV4XSA9IGFycmF5W2luZGV4ICsgc3RhcnRdO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5zb21lYCB3aXRob3V0IHN1cHBvcnQgZm9yIGNhbGxiYWNrIHNob3J0aGFuZHNcbiAgICAgKiBhbmQgYHRoaXNgIGJpbmRpbmcuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZGljYXRlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFueSBlbGVtZW50IHBhc3NlcyB0aGUgcHJlZGljYXRlIGNoZWNrLFxuICAgICAqICBlbHNlIGBmYWxzZWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZVNvbWUoY29sbGVjdGlvbiwgcHJlZGljYXRlKSB7XG4gICAgICB2YXIgcmVzdWx0O1xuXG4gICAgICBiYXNlRWFjaChjb2xsZWN0aW9uLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgcmVzdWx0ID0gcHJlZGljYXRlKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbik7XG4gICAgICAgIHJldHVybiAhcmVzdWx0O1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gISFyZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uc29ydEJ5YCB3aGljaCB1c2VzIGBjb21wYXJlcmAgdG8gZGVmaW5lXG4gICAgICogdGhlIHNvcnQgb3JkZXIgb2YgYGFycmF5YCBhbmQgcmVwbGFjZXMgY3JpdGVyaWEgb2JqZWN0cyB3aXRoIHRoZWlyXG4gICAgICogY29ycmVzcG9uZGluZyB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBzb3J0LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNvbXBhcmVyIFRoZSBmdW5jdGlvbiB0byBkZWZpbmUgc29ydCBvcmRlci5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYGFycmF5YC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlU29ydEJ5KGFycmF5LCBjb21wYXJlcikge1xuICAgICAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcblxuICAgICAgYXJyYXkuc29ydChjb21wYXJlcik7XG4gICAgICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICAgICAgYXJyYXlbbGVuZ3RoXSA9IGFycmF5W2xlbmd0aF0udmFsdWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gYXJyYXk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uc29ydEJ5T3JkZXJgIHdpdGhvdXQgcGFyYW0gZ3VhcmRzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb25bXXxPYmplY3RbXXxzdHJpbmdbXX0gaXRlcmF0ZWVzIFRoZSBpdGVyYXRlZXMgdG8gc29ydCBieS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW5bXX0gb3JkZXJzIFRoZSBzb3J0IG9yZGVycyBvZiBgaXRlcmF0ZWVzYC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBzb3J0ZWQgYXJyYXkuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZVNvcnRCeU9yZGVyKGNvbGxlY3Rpb24sIGl0ZXJhdGVlcywgb3JkZXJzKSB7XG4gICAgICB2YXIgY2FsbGJhY2sgPSBnZXRDYWxsYmFjaygpLFxuICAgICAgICAgIGluZGV4ID0gLTE7XG5cbiAgICAgIGl0ZXJhdGVlcyA9IGFycmF5TWFwKGl0ZXJhdGVlcywgZnVuY3Rpb24oaXRlcmF0ZWUpIHsgcmV0dXJuIGNhbGxiYWNrKGl0ZXJhdGVlKTsgfSk7XG5cbiAgICAgIHZhciByZXN1bHQgPSBiYXNlTWFwKGNvbGxlY3Rpb24sIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHZhciBjcml0ZXJpYSA9IGFycmF5TWFwKGl0ZXJhdGVlcywgZnVuY3Rpb24oaXRlcmF0ZWUpIHsgcmV0dXJuIGl0ZXJhdGVlKHZhbHVlKTsgfSk7XG4gICAgICAgIHJldHVybiB7ICdjcml0ZXJpYSc6IGNyaXRlcmlhLCAnaW5kZXgnOiArK2luZGV4LCAndmFsdWUnOiB2YWx1ZSB9O1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBiYXNlU29ydEJ5KHJlc3VsdCwgZnVuY3Rpb24ob2JqZWN0LCBvdGhlcikge1xuICAgICAgICByZXR1cm4gY29tcGFyZU11bHRpcGxlKG9iamVjdCwgb3RoZXIsIG9yZGVycyk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5zdW1gIHdpdGhvdXQgc3VwcG9ydCBmb3IgY2FsbGJhY2sgc2hvcnRoYW5kc1xuICAgICAqIGFuZCBgdGhpc2AgYmluZGluZy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHN1bS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlU3VtKGNvbGxlY3Rpb24sIGl0ZXJhdGVlKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gMDtcbiAgICAgIGJhc2VFYWNoKGNvbGxlY3Rpb24sIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikge1xuICAgICAgICByZXN1bHQgKz0gK2l0ZXJhdGVlKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikgfHwgMDtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy51bmlxYCB3aXRob3V0IHN1cHBvcnQgZm9yIGNhbGxiYWNrIHNob3J0aGFuZHNcbiAgICAgKiBhbmQgYHRoaXNgIGJpbmRpbmcuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBpbnNwZWN0LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtpdGVyYXRlZV0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBkdXBsaWNhdGUtdmFsdWUtZnJlZSBhcnJheS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlVW5pcShhcnJheSwgaXRlcmF0ZWUpIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGluZGV4T2YgPSBnZXRJbmRleE9mKCksXG4gICAgICAgICAgbGVuZ3RoID0gYXJyYXkubGVuZ3RoLFxuICAgICAgICAgIGlzQ29tbW9uID0gaW5kZXhPZiA9PSBiYXNlSW5kZXhPZixcbiAgICAgICAgICBpc0xhcmdlID0gaXNDb21tb24gJiYgbGVuZ3RoID49IExBUkdFX0FSUkFZX1NJWkUsXG4gICAgICAgICAgc2VlbiA9IGlzTGFyZ2UgPyBjcmVhdGVDYWNoZSgpIDogbnVsbCxcbiAgICAgICAgICByZXN1bHQgPSBbXTtcblxuICAgICAgaWYgKHNlZW4pIHtcbiAgICAgICAgaW5kZXhPZiA9IGNhY2hlSW5kZXhPZjtcbiAgICAgICAgaXNDb21tb24gPSBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlzTGFyZ2UgPSBmYWxzZTtcbiAgICAgICAgc2VlbiA9IGl0ZXJhdGVlID8gW10gOiByZXN1bHQ7XG4gICAgICB9XG4gICAgICBvdXRlcjpcbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IGFycmF5W2luZGV4XSxcbiAgICAgICAgICAgIGNvbXB1dGVkID0gaXRlcmF0ZWUgPyBpdGVyYXRlZSh2YWx1ZSwgaW5kZXgsIGFycmF5KSA6IHZhbHVlO1xuXG4gICAgICAgIGlmIChpc0NvbW1vbiAmJiB2YWx1ZSA9PT0gdmFsdWUpIHtcbiAgICAgICAgICB2YXIgc2VlbkluZGV4ID0gc2Vlbi5sZW5ndGg7XG4gICAgICAgICAgd2hpbGUgKHNlZW5JbmRleC0tKSB7XG4gICAgICAgICAgICBpZiAoc2VlbltzZWVuSW5kZXhdID09PSBjb21wdXRlZCkge1xuICAgICAgICAgICAgICBjb250aW51ZSBvdXRlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGl0ZXJhdGVlKSB7XG4gICAgICAgICAgICBzZWVuLnB1c2goY29tcHV0ZWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXN1bHQucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaW5kZXhPZihzZWVuLCBjb21wdXRlZCwgMCkgPCAwKSB7XG4gICAgICAgICAgaWYgKGl0ZXJhdGVlIHx8IGlzTGFyZ2UpIHtcbiAgICAgICAgICAgIHNlZW4ucHVzaChjb21wdXRlZCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJlc3VsdC5wdXNoKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy52YWx1ZXNgIGFuZCBgXy52YWx1ZXNJbmAgd2hpY2ggY3JlYXRlcyBhblxuICAgICAqIGFycmF5IG9mIGBvYmplY3RgIHByb3BlcnR5IHZhbHVlcyBjb3JyZXNwb25kaW5nIHRvIHRoZSBwcm9wZXJ0eSBuYW1lc1xuICAgICAqIG9mIGBwcm9wc2AuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBwcm9wcyBUaGUgcHJvcGVydHkgbmFtZXMgdG8gZ2V0IHZhbHVlcyBmb3IuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgdmFsdWVzLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VWYWx1ZXMob2JqZWN0LCBwcm9wcykge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gcHJvcHMubGVuZ3RoLFxuICAgICAgICAgIHJlc3VsdCA9IEFycmF5KGxlbmd0aCk7XG5cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHJlc3VsdFtpbmRleF0gPSBvYmplY3RbcHJvcHNbaW5kZXhdXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uZHJvcFJpZ2h0V2hpbGVgLCBgXy5kcm9wV2hpbGVgLCBgXy50YWtlUmlnaHRXaGlsZWAsXG4gICAgICogYW5kIGBfLnRha2VXaGlsZWAgd2l0aG91dCBzdXBwb3J0IGZvciBjYWxsYmFjayBzaG9ydGhhbmRzIGFuZCBgdGhpc2AgYmluZGluZy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHF1ZXJ5LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzRHJvcF0gU3BlY2lmeSBkcm9wcGluZyBlbGVtZW50cyBpbnN0ZWFkIG9mIHRha2luZyB0aGVtLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2Zyb21SaWdodF0gU3BlY2lmeSBpdGVyYXRpbmcgZnJvbSByaWdodCB0byBsZWZ0LlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgc2xpY2Ugb2YgYGFycmF5YC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlV2hpbGUoYXJyYXksIHByZWRpY2F0ZSwgaXNEcm9wLCBmcm9tUmlnaHQpIHtcbiAgICAgIHZhciBsZW5ndGggPSBhcnJheS5sZW5ndGgsXG4gICAgICAgICAgaW5kZXggPSBmcm9tUmlnaHQgPyBsZW5ndGggOiAtMTtcblxuICAgICAgd2hpbGUgKChmcm9tUmlnaHQgPyBpbmRleC0tIDogKytpbmRleCA8IGxlbmd0aCkgJiYgcHJlZGljYXRlKGFycmF5W2luZGV4XSwgaW5kZXgsIGFycmF5KSkge31cbiAgICAgIHJldHVybiBpc0Ryb3BcbiAgICAgICAgPyBiYXNlU2xpY2UoYXJyYXksIChmcm9tUmlnaHQgPyAwIDogaW5kZXgpLCAoZnJvbVJpZ2h0ID8gaW5kZXggKyAxIDogbGVuZ3RoKSlcbiAgICAgICAgOiBiYXNlU2xpY2UoYXJyYXksIChmcm9tUmlnaHQgPyBpbmRleCArIDEgOiAwKSwgKGZyb21SaWdodCA/IGxlbmd0aCA6IGluZGV4KSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYHdyYXBwZXJWYWx1ZWAgd2hpY2ggcmV0dXJucyB0aGUgcmVzdWx0IG9mXG4gICAgICogcGVyZm9ybWluZyBhIHNlcXVlbmNlIG9mIGFjdGlvbnMgb24gdGhlIHVud3JhcHBlZCBgdmFsdWVgLCB3aGVyZSBlYWNoXG4gICAgICogc3VjY2Vzc2l2ZSBhY3Rpb24gaXMgc3VwcGxpZWQgdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgcHJldmlvdXMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHVud3JhcHBlZCB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhY3Rpb25zIEFjdGlvbnMgdG8gcGVmb3JtIHRvIHJlc29sdmUgdGhlIHVud3JhcHBlZCB2YWx1ZS5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcmVzb2x2ZWQgdmFsdWUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZVdyYXBwZXJWYWx1ZSh2YWx1ZSwgYWN0aW9ucykge1xuICAgICAgdmFyIHJlc3VsdCA9IHZhbHVlO1xuICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIExhenlXcmFwcGVyKSB7XG4gICAgICAgIHJlc3VsdCA9IHJlc3VsdC52YWx1ZSgpO1xuICAgICAgfVxuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gYWN0aW9ucy5sZW5ndGg7XG5cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHZhciBhY3Rpb24gPSBhY3Rpb25zW2luZGV4XTtcbiAgICAgICAgcmVzdWx0ID0gYWN0aW9uLmZ1bmMuYXBwbHkoYWN0aW9uLnRoaXNBcmcsIGFycmF5UHVzaChbcmVzdWx0XSwgYWN0aW9uLmFyZ3MpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgYSBiaW5hcnkgc2VhcmNoIG9mIGBhcnJheWAgdG8gZGV0ZXJtaW5lIHRoZSBpbmRleCBhdCB3aGljaCBgdmFsdWVgXG4gICAgICogc2hvdWxkIGJlIGluc2VydGVkIGludG8gYGFycmF5YCBpbiBvcmRlciB0byBtYWludGFpbiBpdHMgc29ydCBvcmRlci5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIHNvcnRlZCBhcnJheSB0byBpbnNwZWN0LlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGV2YWx1YXRlLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3JldEhpZ2hlc3RdIFNwZWNpZnkgcmV0dXJuaW5nIHRoZSBoaWdoZXN0IHF1YWxpZmllZCBpbmRleC5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBhdCB3aGljaCBgdmFsdWVgIHNob3VsZCBiZSBpbnNlcnRlZFxuICAgICAqICBpbnRvIGBhcnJheWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmluYXJ5SW5kZXgoYXJyYXksIHZhbHVlLCByZXRIaWdoZXN0KSB7XG4gICAgICB2YXIgbG93ID0gMCxcbiAgICAgICAgICBoaWdoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiBsb3c7XG5cbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgJiYgdmFsdWUgPT09IHZhbHVlICYmIGhpZ2ggPD0gSEFMRl9NQVhfQVJSQVlfTEVOR1RIKSB7XG4gICAgICAgIHdoaWxlIChsb3cgPCBoaWdoKSB7XG4gICAgICAgICAgdmFyIG1pZCA9IChsb3cgKyBoaWdoKSA+Pj4gMSxcbiAgICAgICAgICAgICAgY29tcHV0ZWQgPSBhcnJheVttaWRdO1xuXG4gICAgICAgICAgaWYgKChyZXRIaWdoZXN0ID8gKGNvbXB1dGVkIDw9IHZhbHVlKSA6IChjb21wdXRlZCA8IHZhbHVlKSkgJiYgY29tcHV0ZWQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGxvdyA9IG1pZCArIDE7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGhpZ2ggPSBtaWQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBoaWdoO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGJpbmFyeUluZGV4QnkoYXJyYXksIHZhbHVlLCBpZGVudGl0eSwgcmV0SGlnaGVzdCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBpcyBsaWtlIGBiaW5hcnlJbmRleGAgZXhjZXB0IHRoYXQgaXQgaW52b2tlcyBgaXRlcmF0ZWVgIGZvclxuICAgICAqIGB2YWx1ZWAgYW5kIGVhY2ggZWxlbWVudCBvZiBgYXJyYXlgIHRvIGNvbXB1dGUgdGhlaXIgc29ydCByYW5raW5nLiBUaGVcbiAgICAgKiBpdGVyYXRlZSBpcyBpbnZva2VkIHdpdGggb25lIGFyZ3VtZW50OyAodmFsdWUpLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgc29ydGVkIGFycmF5IHRvIGluc3BlY3QuXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gZXZhbHVhdGUuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtyZXRIaWdoZXN0XSBTcGVjaWZ5IHJldHVybmluZyB0aGUgaGlnaGVzdCBxdWFsaWZpZWQgaW5kZXguXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggYXQgd2hpY2ggYHZhbHVlYCBzaG91bGQgYmUgaW5zZXJ0ZWRcbiAgICAgKiAgaW50byBgYXJyYXlgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJpbmFyeUluZGV4QnkoYXJyYXksIHZhbHVlLCBpdGVyYXRlZSwgcmV0SGlnaGVzdCkge1xuICAgICAgdmFsdWUgPSBpdGVyYXRlZSh2YWx1ZSk7XG5cbiAgICAgIHZhciBsb3cgPSAwLFxuICAgICAgICAgIGhpZ2ggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDAsXG4gICAgICAgICAgdmFsSXNOYU4gPSB2YWx1ZSAhPT0gdmFsdWUsXG4gICAgICAgICAgdmFsSXNOdWxsID0gdmFsdWUgPT09IG51bGwsXG4gICAgICAgICAgdmFsSXNVbmRlZiA9IHZhbHVlID09PSB1bmRlZmluZWQ7XG5cbiAgICAgIHdoaWxlIChsb3cgPCBoaWdoKSB7XG4gICAgICAgIHZhciBtaWQgPSBuYXRpdmVGbG9vcigobG93ICsgaGlnaCkgLyAyKSxcbiAgICAgICAgICAgIGNvbXB1dGVkID0gaXRlcmF0ZWUoYXJyYXlbbWlkXSksXG4gICAgICAgICAgICBpc0RlZiA9IGNvbXB1dGVkICE9PSB1bmRlZmluZWQsXG4gICAgICAgICAgICBpc1JlZmxleGl2ZSA9IGNvbXB1dGVkID09PSBjb21wdXRlZDtcblxuICAgICAgICBpZiAodmFsSXNOYU4pIHtcbiAgICAgICAgICB2YXIgc2V0TG93ID0gaXNSZWZsZXhpdmUgfHwgcmV0SGlnaGVzdDtcbiAgICAgICAgfSBlbHNlIGlmICh2YWxJc051bGwpIHtcbiAgICAgICAgICBzZXRMb3cgPSBpc1JlZmxleGl2ZSAmJiBpc0RlZiAmJiAocmV0SGlnaGVzdCB8fCBjb21wdXRlZCAhPSBudWxsKTtcbiAgICAgICAgfSBlbHNlIGlmICh2YWxJc1VuZGVmKSB7XG4gICAgICAgICAgc2V0TG93ID0gaXNSZWZsZXhpdmUgJiYgKHJldEhpZ2hlc3QgfHwgaXNEZWYpO1xuICAgICAgICB9IGVsc2UgaWYgKGNvbXB1dGVkID09IG51bGwpIHtcbiAgICAgICAgICBzZXRMb3cgPSBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZXRMb3cgPSByZXRIaWdoZXN0ID8gKGNvbXB1dGVkIDw9IHZhbHVlKSA6IChjb21wdXRlZCA8IHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2V0TG93KSB7XG4gICAgICAgICAgbG93ID0gbWlkICsgMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBoaWdoID0gbWlkO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gbmF0aXZlTWluKGhpZ2gsIE1BWF9BUlJBWV9JTkRFWCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlQ2FsbGJhY2tgIHdoaWNoIG9ubHkgc3VwcG9ydHMgYHRoaXNgIGJpbmRpbmdcbiAgICAgKiBhbmQgc3BlY2lmeWluZyB0aGUgbnVtYmVyIG9mIGFyZ3VtZW50cyB0byBwcm92aWRlIHRvIGBmdW5jYC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gYmluZC5cbiAgICAgKiBAcGFyYW0geyp9IHRoaXNBcmcgVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBmdW5jYC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2FyZ0NvdW50XSBUaGUgbnVtYmVyIG9mIGFyZ3VtZW50cyB0byBwcm92aWRlIHRvIGBmdW5jYC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIGNhbGxiYWNrLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJpbmRDYWxsYmFjayhmdW5jLCB0aGlzQXJnLCBhcmdDb3VudCkge1xuICAgICAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIGlkZW50aXR5O1xuICAgICAgfVxuICAgICAgaWYgKHRoaXNBcmcgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gZnVuYztcbiAgICAgIH1cbiAgICAgIHN3aXRjaCAoYXJnQ291bnQpIHtcbiAgICAgICAgY2FzZSAxOiByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcsIHZhbHVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgY2FzZSAzOiByZXR1cm4gZnVuY3Rpb24odmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSB7XG4gICAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCB2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pO1xuICAgICAgICB9O1xuICAgICAgICBjYXNlIDQ6IHJldHVybiBmdW5jdGlvbihhY2N1bXVsYXRvciwgdmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSB7XG4gICAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCBhY2N1bXVsYXRvciwgdmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKTtcbiAgICAgICAgfTtcbiAgICAgICAgY2FzZSA1OiByZXR1cm4gZnVuY3Rpb24odmFsdWUsIG90aGVyLCBrZXksIG9iamVjdCwgc291cmNlKSB7XG4gICAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCB2YWx1ZSwgb3RoZXIsIGtleSwgb2JqZWN0LCBzb3VyY2UpO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gZnVuYy5hcHBseSh0aGlzQXJnLCBhcmd1bWVudHMpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgY2xvbmUgb2YgdGhlIGdpdmVuIGFycmF5IGJ1ZmZlci5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheUJ1ZmZlcn0gYnVmZmVyIFRoZSBhcnJheSBidWZmZXIgdG8gY2xvbmUuXG4gICAgICogQHJldHVybnMge0FycmF5QnVmZmVyfSBSZXR1cm5zIHRoZSBjbG9uZWQgYXJyYXkgYnVmZmVyLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJ1ZmZlckNsb25lKGJ1ZmZlcikge1xuICAgICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheUJ1ZmZlcihidWZmZXIuYnl0ZUxlbmd0aCksXG4gICAgICAgICAgdmlldyA9IG5ldyBVaW50OEFycmF5KHJlc3VsdCk7XG5cbiAgICAgIHZpZXcuc2V0KG5ldyBVaW50OEFycmF5KGJ1ZmZlcikpO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IHRoYXQgaXMgdGhlIGNvbXBvc2l0aW9uIG9mIHBhcnRpYWxseSBhcHBsaWVkIGFyZ3VtZW50cyxcbiAgICAgKiBwbGFjZWhvbGRlcnMsIGFuZCBwcm92aWRlZCBhcmd1bWVudHMgaW50byBhIHNpbmdsZSBhcnJheSBvZiBhcmd1bWVudHMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fSBhcmdzIFRoZSBwcm92aWRlZCBhcmd1bWVudHMuXG4gICAgICogQHBhcmFtIHtBcnJheX0gcGFydGlhbHMgVGhlIGFyZ3VtZW50cyB0byBwcmVwZW5kIHRvIHRob3NlIHByb3ZpZGVkLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGhvbGRlcnMgVGhlIGBwYXJ0aWFsc2AgcGxhY2Vob2xkZXIgaW5kZXhlcy5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBhcnJheSBvZiBjb21wb3NlZCBhcmd1bWVudHMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gY29tcG9zZUFyZ3MoYXJncywgcGFydGlhbHMsIGhvbGRlcnMpIHtcbiAgICAgIHZhciBob2xkZXJzTGVuZ3RoID0gaG9sZGVycy5sZW5ndGgsXG4gICAgICAgICAgYXJnc0luZGV4ID0gLTEsXG4gICAgICAgICAgYXJnc0xlbmd0aCA9IG5hdGl2ZU1heChhcmdzLmxlbmd0aCAtIGhvbGRlcnNMZW5ndGgsIDApLFxuICAgICAgICAgIGxlZnRJbmRleCA9IC0xLFxuICAgICAgICAgIGxlZnRMZW5ndGggPSBwYXJ0aWFscy5sZW5ndGgsXG4gICAgICAgICAgcmVzdWx0ID0gQXJyYXkobGVmdExlbmd0aCArIGFyZ3NMZW5ndGgpO1xuXG4gICAgICB3aGlsZSAoKytsZWZ0SW5kZXggPCBsZWZ0TGVuZ3RoKSB7XG4gICAgICAgIHJlc3VsdFtsZWZ0SW5kZXhdID0gcGFydGlhbHNbbGVmdEluZGV4XTtcbiAgICAgIH1cbiAgICAgIHdoaWxlICgrK2FyZ3NJbmRleCA8IGhvbGRlcnNMZW5ndGgpIHtcbiAgICAgICAgcmVzdWx0W2hvbGRlcnNbYXJnc0luZGV4XV0gPSBhcmdzW2FyZ3NJbmRleF07XG4gICAgICB9XG4gICAgICB3aGlsZSAoYXJnc0xlbmd0aC0tKSB7XG4gICAgICAgIHJlc3VsdFtsZWZ0SW5kZXgrK10gPSBhcmdzW2FyZ3NJbmRleCsrXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBpcyBsaWtlIGBjb21wb3NlQXJnc2AgZXhjZXB0IHRoYXQgdGhlIGFyZ3VtZW50cyBjb21wb3NpdGlvblxuICAgICAqIGlzIHRhaWxvcmVkIGZvciBgXy5wYXJ0aWFsUmlnaHRgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdH0gYXJncyBUaGUgcHJvdmlkZWQgYXJndW1lbnRzLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHBhcnRpYWxzIFRoZSBhcmd1bWVudHMgdG8gYXBwZW5kIHRvIHRob3NlIHByb3ZpZGVkLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGhvbGRlcnMgVGhlIGBwYXJ0aWFsc2AgcGxhY2Vob2xkZXIgaW5kZXhlcy5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBhcnJheSBvZiBjb21wb3NlZCBhcmd1bWVudHMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gY29tcG9zZUFyZ3NSaWdodChhcmdzLCBwYXJ0aWFscywgaG9sZGVycykge1xuICAgICAgdmFyIGhvbGRlcnNJbmRleCA9IC0xLFxuICAgICAgICAgIGhvbGRlcnNMZW5ndGggPSBob2xkZXJzLmxlbmd0aCxcbiAgICAgICAgICBhcmdzSW5kZXggPSAtMSxcbiAgICAgICAgICBhcmdzTGVuZ3RoID0gbmF0aXZlTWF4KGFyZ3MubGVuZ3RoIC0gaG9sZGVyc0xlbmd0aCwgMCksXG4gICAgICAgICAgcmlnaHRJbmRleCA9IC0xLFxuICAgICAgICAgIHJpZ2h0TGVuZ3RoID0gcGFydGlhbHMubGVuZ3RoLFxuICAgICAgICAgIHJlc3VsdCA9IEFycmF5KGFyZ3NMZW5ndGggKyByaWdodExlbmd0aCk7XG5cbiAgICAgIHdoaWxlICgrK2FyZ3NJbmRleCA8IGFyZ3NMZW5ndGgpIHtcbiAgICAgICAgcmVzdWx0W2FyZ3NJbmRleF0gPSBhcmdzW2FyZ3NJbmRleF07XG4gICAgICB9XG4gICAgICB2YXIgb2Zmc2V0ID0gYXJnc0luZGV4O1xuICAgICAgd2hpbGUgKCsrcmlnaHRJbmRleCA8IHJpZ2h0TGVuZ3RoKSB7XG4gICAgICAgIHJlc3VsdFtvZmZzZXQgKyByaWdodEluZGV4XSA9IHBhcnRpYWxzW3JpZ2h0SW5kZXhdO1xuICAgICAgfVxuICAgICAgd2hpbGUgKCsraG9sZGVyc0luZGV4IDwgaG9sZGVyc0xlbmd0aCkge1xuICAgICAgICByZXN1bHRbb2Zmc2V0ICsgaG9sZGVyc1tob2xkZXJzSW5kZXhdXSA9IGFyZ3NbYXJnc0luZGV4KytdO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgYF8uY291bnRCeWAsIGBfLmdyb3VwQnlgLCBgXy5pbmRleEJ5YCwgb3IgYF8ucGFydGl0aW9uYCBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gc2V0dGVyIFRoZSBmdW5jdGlvbiB0byBzZXQga2V5cyBhbmQgdmFsdWVzIG9mIHRoZSBhY2N1bXVsYXRvciBvYmplY3QuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2luaXRpYWxpemVyXSBUaGUgZnVuY3Rpb24gdG8gaW5pdGlhbGl6ZSB0aGUgYWNjdW11bGF0b3Igb2JqZWN0LlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGFnZ3JlZ2F0b3IgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlQWdncmVnYXRvcihzZXR0ZXIsIGluaXRpYWxpemVyKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oY29sbGVjdGlvbiwgaXRlcmF0ZWUsIHRoaXNBcmcpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IGluaXRpYWxpemVyID8gaW5pdGlhbGl6ZXIoKSA6IHt9O1xuICAgICAgICBpdGVyYXRlZSA9IGdldENhbGxiYWNrKGl0ZXJhdGVlLCB0aGlzQXJnLCAzKTtcblxuICAgICAgICBpZiAoaXNBcnJheShjb2xsZWN0aW9uKSkge1xuICAgICAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgICAgICBsZW5ndGggPSBjb2xsZWN0aW9uLmxlbmd0aDtcblxuICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBjb2xsZWN0aW9uW2luZGV4XTtcbiAgICAgICAgICAgIHNldHRlcihyZXN1bHQsIHZhbHVlLCBpdGVyYXRlZSh2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pLCBjb2xsZWN0aW9uKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYmFzZUVhY2goY29sbGVjdGlvbiwgZnVuY3Rpb24odmFsdWUsIGtleSwgY29sbGVjdGlvbikge1xuICAgICAgICAgICAgc2V0dGVyKHJlc3VsdCwgdmFsdWUsIGl0ZXJhdGVlKHZhbHVlLCBrZXksIGNvbGxlY3Rpb24pLCBjb2xsZWN0aW9uKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgYF8uYXNzaWduYCwgYF8uZGVmYXVsdHNgLCBvciBgXy5tZXJnZWAgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGFzc2lnbmVyIFRoZSBmdW5jdGlvbiB0byBhc3NpZ24gdmFsdWVzLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGFzc2lnbmVyIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZUFzc2lnbmVyKGFzc2lnbmVyKSB7XG4gICAgICByZXR1cm4gcmVzdFBhcmFtKGZ1bmN0aW9uKG9iamVjdCwgc291cmNlcykge1xuICAgICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICAgIGxlbmd0aCA9IG9iamVjdCA9PSBudWxsID8gMCA6IHNvdXJjZXMubGVuZ3RoLFxuICAgICAgICAgICAgY3VzdG9taXplciA9IGxlbmd0aCA+IDIgPyBzb3VyY2VzW2xlbmd0aCAtIDJdIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgZ3VhcmQgPSBsZW5ndGggPiAyID8gc291cmNlc1syXSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHRoaXNBcmcgPSBsZW5ndGggPiAxID8gc291cmNlc1tsZW5ndGggLSAxXSA6IHVuZGVmaW5lZDtcblxuICAgICAgICBpZiAodHlwZW9mIGN1c3RvbWl6ZXIgPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIGN1c3RvbWl6ZXIgPSBiaW5kQ2FsbGJhY2soY3VzdG9taXplciwgdGhpc0FyZywgNSk7XG4gICAgICAgICAgbGVuZ3RoIC09IDI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY3VzdG9taXplciA9IHR5cGVvZiB0aGlzQXJnID09ICdmdW5jdGlvbicgPyB0aGlzQXJnIDogdW5kZWZpbmVkO1xuICAgICAgICAgIGxlbmd0aCAtPSAoY3VzdG9taXplciA/IDEgOiAwKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZ3VhcmQgJiYgaXNJdGVyYXRlZUNhbGwoc291cmNlc1swXSwgc291cmNlc1sxXSwgZ3VhcmQpKSB7XG4gICAgICAgICAgY3VzdG9taXplciA9IGxlbmd0aCA8IDMgPyB1bmRlZmluZWQgOiBjdXN0b21pemVyO1xuICAgICAgICAgIGxlbmd0aCA9IDE7XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgICB2YXIgc291cmNlID0gc291cmNlc1tpbmRleF07XG4gICAgICAgICAgaWYgKHNvdXJjZSkge1xuICAgICAgICAgICAgYXNzaWduZXIob2JqZWN0LCBzb3VyY2UsIGN1c3RvbWl6ZXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGBiYXNlRWFjaGAgb3IgYGJhc2VFYWNoUmlnaHRgIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBlYWNoRnVuYyBUaGUgZnVuY3Rpb24gdG8gaXRlcmF0ZSBvdmVyIGEgY29sbGVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtmcm9tUmlnaHRdIFNwZWNpZnkgaXRlcmF0aW5nIGZyb20gcmlnaHQgdG8gbGVmdC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBiYXNlIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZUJhc2VFYWNoKGVhY2hGdW5jLCBmcm9tUmlnaHQpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihjb2xsZWN0aW9uLCBpdGVyYXRlZSkge1xuICAgICAgICB2YXIgbGVuZ3RoID0gY29sbGVjdGlvbiA/IGdldExlbmd0aChjb2xsZWN0aW9uKSA6IDA7XG4gICAgICAgIGlmICghaXNMZW5ndGgobGVuZ3RoKSkge1xuICAgICAgICAgIHJldHVybiBlYWNoRnVuYyhjb2xsZWN0aW9uLCBpdGVyYXRlZSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGluZGV4ID0gZnJvbVJpZ2h0ID8gbGVuZ3RoIDogLTEsXG4gICAgICAgICAgICBpdGVyYWJsZSA9IHRvT2JqZWN0KGNvbGxlY3Rpb24pO1xuXG4gICAgICAgIHdoaWxlICgoZnJvbVJpZ2h0ID8gaW5kZXgtLSA6ICsraW5kZXggPCBsZW5ndGgpKSB7XG4gICAgICAgICAgaWYgKGl0ZXJhdGVlKGl0ZXJhYmxlW2luZGV4XSwgaW5kZXgsIGl0ZXJhYmxlKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29sbGVjdGlvbjtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGJhc2UgZnVuY3Rpb24gZm9yIGBfLmZvckluYCBvciBgXy5mb3JJblJpZ2h0YC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbZnJvbVJpZ2h0XSBTcGVjaWZ5IGl0ZXJhdGluZyBmcm9tIHJpZ2h0IHRvIGxlZnQuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgYmFzZSBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVCYXNlRm9yKGZyb21SaWdodCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCwgaXRlcmF0ZWUsIGtleXNGdW5jKSB7XG4gICAgICAgIHZhciBpdGVyYWJsZSA9IHRvT2JqZWN0KG9iamVjdCksXG4gICAgICAgICAgICBwcm9wcyA9IGtleXNGdW5jKG9iamVjdCksXG4gICAgICAgICAgICBsZW5ndGggPSBwcm9wcy5sZW5ndGgsXG4gICAgICAgICAgICBpbmRleCA9IGZyb21SaWdodCA/IGxlbmd0aCA6IC0xO1xuXG4gICAgICAgIHdoaWxlICgoZnJvbVJpZ2h0ID8gaW5kZXgtLSA6ICsraW5kZXggPCBsZW5ndGgpKSB7XG4gICAgICAgICAgdmFyIGtleSA9IHByb3BzW2luZGV4XTtcbiAgICAgICAgICBpZiAoaXRlcmF0ZWUoaXRlcmFibGVba2V5XSwga2V5LCBpdGVyYWJsZSkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgd3JhcHMgYGZ1bmNgIGFuZCBpbnZva2VzIGl0IHdpdGggdGhlIGB0aGlzYFxuICAgICAqIGJpbmRpbmcgb2YgYHRoaXNBcmdgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBiaW5kLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgZnVuY2AuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgYm91bmQgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlQmluZFdyYXBwZXIoZnVuYywgdGhpc0FyZykge1xuICAgICAgdmFyIEN0b3IgPSBjcmVhdGVDdG9yV3JhcHBlcihmdW5jKTtcblxuICAgICAgZnVuY3Rpb24gd3JhcHBlcigpIHtcbiAgICAgICAgdmFyIGZuID0gKHRoaXMgJiYgdGhpcyAhPT0gcm9vdCAmJiB0aGlzIGluc3RhbmNlb2Ygd3JhcHBlcikgPyBDdG9yIDogZnVuYztcbiAgICAgICAgcmV0dXJuIGZuLmFwcGx5KHRoaXNBcmcsIGFyZ3VtZW50cyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gd3JhcHBlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgYFNldGAgY2FjaGUgb2JqZWN0IHRvIG9wdGltaXplIGxpbmVhciBzZWFyY2hlcyBvZiBsYXJnZSBhcnJheXMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFt2YWx1ZXNdIFRoZSB2YWx1ZXMgdG8gY2FjaGUuXG4gICAgICogQHJldHVybnMge251bGx8T2JqZWN0fSBSZXR1cm5zIHRoZSBuZXcgY2FjaGUgb2JqZWN0IGlmIGBTZXRgIGlzIHN1cHBvcnRlZCwgZWxzZSBgbnVsbGAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlQ2FjaGUodmFsdWVzKSB7XG4gICAgICByZXR1cm4gKG5hdGl2ZUNyZWF0ZSAmJiBTZXQpID8gbmV3IFNldENhY2hlKHZhbHVlcykgOiBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IHByb2R1Y2VzIGNvbXBvdW5kIHdvcmRzIG91dCBvZiB0aGUgd29yZHMgaW4gYVxuICAgICAqIGdpdmVuIHN0cmluZy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgVGhlIGZ1bmN0aW9uIHRvIGNvbWJpbmUgZWFjaCB3b3JkLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGNvbXBvdW5kZXIgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlQ29tcG91bmRlcihjYWxsYmFjaykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHN0cmluZykge1xuICAgICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICAgIGFycmF5ID0gd29yZHMoZGVidXJyKHN0cmluZykpLFxuICAgICAgICAgICAgbGVuZ3RoID0gYXJyYXkubGVuZ3RoLFxuICAgICAgICAgICAgcmVzdWx0ID0gJyc7XG5cbiAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgICByZXN1bHQgPSBjYWxsYmFjayhyZXN1bHQsIGFycmF5W2luZGV4XSwgaW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IHByb2R1Y2VzIGFuIGluc3RhbmNlIG9mIGBDdG9yYCByZWdhcmRsZXNzIG9mXG4gICAgICogd2hldGhlciBpdCB3YXMgaW52b2tlZCBhcyBwYXJ0IG9mIGEgYG5ld2AgZXhwcmVzc2lvbiBvciBieSBgY2FsbGAgb3IgYGFwcGx5YC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gQ3RvciBUaGUgY29uc3RydWN0b3IgdG8gd3JhcC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyB3cmFwcGVkIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZUN0b3JXcmFwcGVyKEN0b3IpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gVXNlIGEgYHN3aXRjaGAgc3RhdGVtZW50IHRvIHdvcmsgd2l0aCBjbGFzcyBjb25zdHJ1Y3RvcnMuXG4gICAgICAgIC8vIFNlZSBodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1lY21hc2NyaXB0LWZ1bmN0aW9uLW9iamVjdHMtY2FsbC10aGlzYXJndW1lbnQtYXJndW1lbnRzbGlzdFxuICAgICAgICAvLyBmb3IgbW9yZSBkZXRhaWxzLlxuICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgICAgc3dpdGNoIChhcmdzLmxlbmd0aCkge1xuICAgICAgICAgIGNhc2UgMDogcmV0dXJuIG5ldyBDdG9yO1xuICAgICAgICAgIGNhc2UgMTogcmV0dXJuIG5ldyBDdG9yKGFyZ3NbMF0pO1xuICAgICAgICAgIGNhc2UgMjogcmV0dXJuIG5ldyBDdG9yKGFyZ3NbMF0sIGFyZ3NbMV0pO1xuICAgICAgICAgIGNhc2UgMzogcmV0dXJuIG5ldyBDdG9yKGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0pO1xuICAgICAgICAgIGNhc2UgNDogcmV0dXJuIG5ldyBDdG9yKGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0sIGFyZ3NbM10pO1xuICAgICAgICAgIGNhc2UgNTogcmV0dXJuIG5ldyBDdG9yKGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0sIGFyZ3NbM10sIGFyZ3NbNF0pO1xuICAgICAgICAgIGNhc2UgNjogcmV0dXJuIG5ldyBDdG9yKGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0sIGFyZ3NbM10sIGFyZ3NbNF0sIGFyZ3NbNV0pO1xuICAgICAgICAgIGNhc2UgNzogcmV0dXJuIG5ldyBDdG9yKGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0sIGFyZ3NbM10sIGFyZ3NbNF0sIGFyZ3NbNV0sIGFyZ3NbNl0pO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0aGlzQmluZGluZyA9IGJhc2VDcmVhdGUoQ3Rvci5wcm90b3R5cGUpLFxuICAgICAgICAgICAgcmVzdWx0ID0gQ3Rvci5hcHBseSh0aGlzQmluZGluZywgYXJncyk7XG5cbiAgICAgICAgLy8gTWltaWMgdGhlIGNvbnN0cnVjdG9yJ3MgYHJldHVybmAgYmVoYXZpb3IuXG4gICAgICAgIC8vIFNlZSBodHRwczovL2VzNS5naXRodWIuaW8vI3gxMy4yLjIgZm9yIG1vcmUgZGV0YWlscy5cbiAgICAgICAgcmV0dXJuIGlzT2JqZWN0KHJlc3VsdCkgPyByZXN1bHQgOiB0aGlzQmluZGluZztcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGBfLmN1cnJ5YCBvciBgXy5jdXJyeVJpZ2h0YCBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtib29sZWFufSBmbGFnIFRoZSBjdXJyeSBiaXQgZmxhZy5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBjdXJyeSBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVDdXJyeShmbGFnKSB7XG4gICAgICBmdW5jdGlvbiBjdXJyeUZ1bmMoZnVuYywgYXJpdHksIGd1YXJkKSB7XG4gICAgICAgIGlmIChndWFyZCAmJiBpc0l0ZXJhdGVlQ2FsbChmdW5jLCBhcml0eSwgZ3VhcmQpKSB7XG4gICAgICAgICAgYXJpdHkgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlc3VsdCA9IGNyZWF0ZVdyYXBwZXIoZnVuYywgZmxhZywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGFyaXR5KTtcbiAgICAgICAgcmVzdWx0LnBsYWNlaG9sZGVyID0gY3VycnlGdW5jLnBsYWNlaG9sZGVyO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgICAgcmV0dXJuIGN1cnJ5RnVuYztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgYF8uZGVmYXVsdHNgIG9yIGBfLmRlZmF1bHRzRGVlcGAgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGFzc2lnbmVyIFRoZSBmdW5jdGlvbiB0byBhc3NpZ24gdmFsdWVzLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGN1c3RvbWl6ZXIgVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBhc3NpZ25lZCB2YWx1ZXMuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZGVmYXVsdHMgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlRGVmYXVsdHMoYXNzaWduZXIsIGN1c3RvbWl6ZXIpIHtcbiAgICAgIHJldHVybiByZXN0UGFyYW0oZnVuY3Rpb24oYXJncykge1xuICAgICAgICB2YXIgb2JqZWN0ID0gYXJnc1swXTtcbiAgICAgICAgaWYgKG9iamVjdCA9PSBudWxsKSB7XG4gICAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICAgICAgfVxuICAgICAgICBhcmdzLnB1c2goY3VzdG9taXplcik7XG4gICAgICAgIHJldHVybiBhc3NpZ25lci5hcHBseSh1bmRlZmluZWQsIGFyZ3MpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGBfLm1heGAgb3IgYF8ubWluYCBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY29tcGFyYXRvciBUaGUgZnVuY3Rpb24gdXNlZCB0byBjb21wYXJlIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0geyp9IGV4VmFsdWUgVGhlIGluaXRpYWwgZXh0cmVtdW0gdmFsdWUuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZXh0cmVtdW0gZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlRXh0cmVtdW0oY29tcGFyYXRvciwgZXhWYWx1ZSkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGNvbGxlY3Rpb24sIGl0ZXJhdGVlLCB0aGlzQXJnKSB7XG4gICAgICAgIGlmICh0aGlzQXJnICYmIGlzSXRlcmF0ZWVDYWxsKGNvbGxlY3Rpb24sIGl0ZXJhdGVlLCB0aGlzQXJnKSkge1xuICAgICAgICAgIGl0ZXJhdGVlID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGl0ZXJhdGVlID0gZ2V0Q2FsbGJhY2soaXRlcmF0ZWUsIHRoaXNBcmcsIDMpO1xuICAgICAgICBpZiAoaXRlcmF0ZWUubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICBjb2xsZWN0aW9uID0gaXNBcnJheShjb2xsZWN0aW9uKSA/IGNvbGxlY3Rpb24gOiB0b0l0ZXJhYmxlKGNvbGxlY3Rpb24pO1xuICAgICAgICAgIHZhciByZXN1bHQgPSBhcnJheUV4dHJlbXVtKGNvbGxlY3Rpb24sIGl0ZXJhdGVlLCBjb21wYXJhdG9yLCBleFZhbHVlKTtcbiAgICAgICAgICBpZiAoIShjb2xsZWN0aW9uLmxlbmd0aCAmJiByZXN1bHQgPT09IGV4VmFsdWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYmFzZUV4dHJlbXVtKGNvbGxlY3Rpb24sIGl0ZXJhdGVlLCBjb21wYXJhdG9yLCBleFZhbHVlKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGBfLmZpbmRgIG9yIGBfLmZpbmRMYXN0YCBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZWFjaEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGl0ZXJhdGUgb3ZlciBhIGNvbGxlY3Rpb24uXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbZnJvbVJpZ2h0XSBTcGVjaWZ5IGl0ZXJhdGluZyBmcm9tIHJpZ2h0IHRvIGxlZnQuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZmluZCBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVGaW5kKGVhY2hGdW5jLCBmcm9tUmlnaHQpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihjb2xsZWN0aW9uLCBwcmVkaWNhdGUsIHRoaXNBcmcpIHtcbiAgICAgICAgcHJlZGljYXRlID0gZ2V0Q2FsbGJhY2socHJlZGljYXRlLCB0aGlzQXJnLCAzKTtcbiAgICAgICAgaWYgKGlzQXJyYXkoY29sbGVjdGlvbikpIHtcbiAgICAgICAgICB2YXIgaW5kZXggPSBiYXNlRmluZEluZGV4KGNvbGxlY3Rpb24sIHByZWRpY2F0ZSwgZnJvbVJpZ2h0KTtcbiAgICAgICAgICByZXR1cm4gaW5kZXggPiAtMSA/IGNvbGxlY3Rpb25baW5kZXhdIDogdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBiYXNlRmluZChjb2xsZWN0aW9uLCBwcmVkaWNhdGUsIGVhY2hGdW5jKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGBfLmZpbmRJbmRleGAgb3IgYF8uZmluZExhc3RJbmRleGAgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2Zyb21SaWdodF0gU3BlY2lmeSBpdGVyYXRpbmcgZnJvbSByaWdodCB0byBsZWZ0LlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZpbmQgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlRmluZEluZGV4KGZyb21SaWdodCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGFycmF5LCBwcmVkaWNhdGUsIHRoaXNBcmcpIHtcbiAgICAgICAgaWYgKCEoYXJyYXkgJiYgYXJyYXkubGVuZ3RoKSkge1xuICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfVxuICAgICAgICBwcmVkaWNhdGUgPSBnZXRDYWxsYmFjayhwcmVkaWNhdGUsIHRoaXNBcmcsIDMpO1xuICAgICAgICByZXR1cm4gYmFzZUZpbmRJbmRleChhcnJheSwgcHJlZGljYXRlLCBmcm9tUmlnaHQpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgYF8uZmluZEtleWAgb3IgYF8uZmluZExhc3RLZXlgIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvYmplY3RGdW5jIFRoZSBmdW5jdGlvbiB0byBpdGVyYXRlIG92ZXIgYW4gb2JqZWN0LlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZpbmQgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlRmluZEtleShvYmplY3RGdW5jKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0LCBwcmVkaWNhdGUsIHRoaXNBcmcpIHtcbiAgICAgICAgcHJlZGljYXRlID0gZ2V0Q2FsbGJhY2socHJlZGljYXRlLCB0aGlzQXJnLCAzKTtcbiAgICAgICAgcmV0dXJuIGJhc2VGaW5kKG9iamVjdCwgcHJlZGljYXRlLCBvYmplY3RGdW5jLCB0cnVlKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGBfLmZsb3dgIG9yIGBfLmZsb3dSaWdodGAgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2Zyb21SaWdodF0gU3BlY2lmeSBpdGVyYXRpbmcgZnJvbSByaWdodCB0byBsZWZ0LlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZsb3cgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlRmxvdyhmcm9tUmlnaHQpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHdyYXBwZXIsXG4gICAgICAgICAgICBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoLFxuICAgICAgICAgICAgaW5kZXggPSBmcm9tUmlnaHQgPyBsZW5ndGggOiAtMSxcbiAgICAgICAgICAgIGxlZnRJbmRleCA9IDAsXG4gICAgICAgICAgICBmdW5jcyA9IEFycmF5KGxlbmd0aCk7XG5cbiAgICAgICAgd2hpbGUgKChmcm9tUmlnaHQgPyBpbmRleC0tIDogKytpbmRleCA8IGxlbmd0aCkpIHtcbiAgICAgICAgICB2YXIgZnVuYyA9IGZ1bmNzW2xlZnRJbmRleCsrXSA9IGFyZ3VtZW50c1tpbmRleF07XG4gICAgICAgICAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCF3cmFwcGVyICYmIExvZGFzaFdyYXBwZXIucHJvdG90eXBlLnRocnUgJiYgZ2V0RnVuY05hbWUoZnVuYykgPT0gJ3dyYXBwZXInKSB7XG4gICAgICAgICAgICB3cmFwcGVyID0gbmV3IExvZGFzaFdyYXBwZXIoW10sIHRydWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpbmRleCA9IHdyYXBwZXIgPyAtMSA6IGxlbmd0aDtcbiAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgICBmdW5jID0gZnVuY3NbaW5kZXhdO1xuXG4gICAgICAgICAgdmFyIGZ1bmNOYW1lID0gZ2V0RnVuY05hbWUoZnVuYyksXG4gICAgICAgICAgICAgIGRhdGEgPSBmdW5jTmFtZSA9PSAnd3JhcHBlcicgPyBnZXREYXRhKGZ1bmMpIDogdW5kZWZpbmVkO1xuXG4gICAgICAgICAgaWYgKGRhdGEgJiYgaXNMYXppYWJsZShkYXRhWzBdKSAmJiBkYXRhWzFdID09IChBUllfRkxBRyB8IENVUlJZX0ZMQUcgfCBQQVJUSUFMX0ZMQUcgfCBSRUFSR19GTEFHKSAmJiAhZGF0YVs0XS5sZW5ndGggJiYgZGF0YVs5XSA9PSAxKSB7XG4gICAgICAgICAgICB3cmFwcGVyID0gd3JhcHBlcltnZXRGdW5jTmFtZShkYXRhWzBdKV0uYXBwbHkod3JhcHBlciwgZGF0YVszXSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHdyYXBwZXIgPSAoZnVuYy5sZW5ndGggPT0gMSAmJiBpc0xhemlhYmxlKGZ1bmMpKSA/IHdyYXBwZXJbZnVuY05hbWVdKCkgOiB3cmFwcGVyLnRocnUoZnVuYyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cyxcbiAgICAgICAgICAgICAgdmFsdWUgPSBhcmdzWzBdO1xuXG4gICAgICAgICAgaWYgKHdyYXBwZXIgJiYgYXJncy5sZW5ndGggPT0gMSAmJiBpc0FycmF5KHZhbHVlKSAmJiB2YWx1ZS5sZW5ndGggPj0gTEFSR0VfQVJSQVlfU0laRSkge1xuICAgICAgICAgICAgcmV0dXJuIHdyYXBwZXIucGxhbnQodmFsdWUpLnZhbHVlKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciBpbmRleCA9IDAsXG4gICAgICAgICAgICAgIHJlc3VsdCA9IGxlbmd0aCA/IGZ1bmNzW2luZGV4XS5hcHBseSh0aGlzLCBhcmdzKSA6IHZhbHVlO1xuXG4gICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IGZ1bmNzW2luZGV4XS5jYWxsKHRoaXMsIHJlc3VsdCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH07XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiBmb3IgYF8uZm9yRWFjaGAgb3IgYF8uZm9yRWFjaFJpZ2h0YC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gYXJyYXlGdW5jIFRoZSBmdW5jdGlvbiB0byBpdGVyYXRlIG92ZXIgYW4gYXJyYXkuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZWFjaEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGl0ZXJhdGUgb3ZlciBhIGNvbGxlY3Rpb24uXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZWFjaCBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVGb3JFYWNoKGFycmF5RnVuYywgZWFjaEZ1bmMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihjb2xsZWN0aW9uLCBpdGVyYXRlZSwgdGhpc0FyZykge1xuICAgICAgICByZXR1cm4gKHR5cGVvZiBpdGVyYXRlZSA9PSAnZnVuY3Rpb24nICYmIHRoaXNBcmcgPT09IHVuZGVmaW5lZCAmJiBpc0FycmF5KGNvbGxlY3Rpb24pKVxuICAgICAgICAgID8gYXJyYXlGdW5jKGNvbGxlY3Rpb24sIGl0ZXJhdGVlKVxuICAgICAgICAgIDogZWFjaEZ1bmMoY29sbGVjdGlvbiwgYmluZENhbGxiYWNrKGl0ZXJhdGVlLCB0aGlzQXJnLCAzKSk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiBmb3IgYF8uZm9ySW5gIG9yIGBfLmZvckluUmlnaHRgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvYmplY3RGdW5jIFRoZSBmdW5jdGlvbiB0byBpdGVyYXRlIG92ZXIgYW4gb2JqZWN0LlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGVhY2ggZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlRm9ySW4ob2JqZWN0RnVuYykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCwgaXRlcmF0ZWUsIHRoaXNBcmcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBpdGVyYXRlZSAhPSAnZnVuY3Rpb24nIHx8IHRoaXNBcmcgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGl0ZXJhdGVlID0gYmluZENhbGxiYWNrKGl0ZXJhdGVlLCB0aGlzQXJnLCAzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqZWN0RnVuYyhvYmplY3QsIGl0ZXJhdGVlLCBrZXlzSW4pO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gZm9yIGBfLmZvck93bmAgb3IgYF8uZm9yT3duUmlnaHRgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvYmplY3RGdW5jIFRoZSBmdW5jdGlvbiB0byBpdGVyYXRlIG92ZXIgYW4gb2JqZWN0LlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGVhY2ggZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlRm9yT3duKG9iamVjdEZ1bmMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihvYmplY3QsIGl0ZXJhdGVlLCB0aGlzQXJnKSB7XG4gICAgICAgIGlmICh0eXBlb2YgaXRlcmF0ZWUgIT0gJ2Z1bmN0aW9uJyB8fCB0aGlzQXJnICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBpdGVyYXRlZSA9IGJpbmRDYWxsYmFjayhpdGVyYXRlZSwgdGhpc0FyZywgMyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iamVjdEZ1bmMob2JqZWN0LCBpdGVyYXRlZSk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiBmb3IgYF8ubWFwS2V5c2Agb3IgYF8ubWFwVmFsdWVzYC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbaXNNYXBLZXlzXSBTcGVjaWZ5IG1hcHBpbmcga2V5cyBpbnN0ZWFkIG9mIHZhbHVlcy5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBtYXAgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlT2JqZWN0TWFwcGVyKGlzTWFwS2V5cykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCwgaXRlcmF0ZWUsIHRoaXNBcmcpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgICBpdGVyYXRlZSA9IGdldENhbGxiYWNrKGl0ZXJhdGVlLCB0aGlzQXJnLCAzKTtcblxuICAgICAgICBiYXNlRm9yT3duKG9iamVjdCwgZnVuY3Rpb24odmFsdWUsIGtleSwgb2JqZWN0KSB7XG4gICAgICAgICAgdmFyIG1hcHBlZCA9IGl0ZXJhdGVlKHZhbHVlLCBrZXksIG9iamVjdCk7XG4gICAgICAgICAga2V5ID0gaXNNYXBLZXlzID8gbWFwcGVkIDoga2V5O1xuICAgICAgICAgIHZhbHVlID0gaXNNYXBLZXlzID8gdmFsdWUgOiBtYXBwZWQ7XG4gICAgICAgICAgcmVzdWx0W2tleV0gPSB2YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiBmb3IgYF8ucGFkTGVmdGAgb3IgYF8ucGFkUmlnaHRgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtmcm9tUmlnaHRdIFNwZWNpZnkgcGFkZGluZyBmcm9tIHRoZSByaWdodC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBwYWQgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlUGFkRGlyKGZyb21SaWdodCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHN0cmluZywgbGVuZ3RoLCBjaGFycykge1xuICAgICAgICBzdHJpbmcgPSBiYXNlVG9TdHJpbmcoc3RyaW5nKTtcbiAgICAgICAgcmV0dXJuIChmcm9tUmlnaHQgPyBzdHJpbmcgOiAnJykgKyBjcmVhdGVQYWRkaW5nKHN0cmluZywgbGVuZ3RoLCBjaGFycykgKyAoZnJvbVJpZ2h0ID8gJycgOiBzdHJpbmcpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgYF8ucGFydGlhbGAgb3IgYF8ucGFydGlhbFJpZ2h0YCBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtib29sZWFufSBmbGFnIFRoZSBwYXJ0aWFsIGJpdCBmbGFnLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHBhcnRpYWwgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlUGFydGlhbChmbGFnKSB7XG4gICAgICB2YXIgcGFydGlhbEZ1bmMgPSByZXN0UGFyYW0oZnVuY3Rpb24oZnVuYywgcGFydGlhbHMpIHtcbiAgICAgICAgdmFyIGhvbGRlcnMgPSByZXBsYWNlSG9sZGVycyhwYXJ0aWFscywgcGFydGlhbEZ1bmMucGxhY2Vob2xkZXIpO1xuICAgICAgICByZXR1cm4gY3JlYXRlV3JhcHBlcihmdW5jLCBmbGFnLCB1bmRlZmluZWQsIHBhcnRpYWxzLCBob2xkZXJzKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHBhcnRpYWxGdW5jO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiBmb3IgYF8ucmVkdWNlYCBvciBgXy5yZWR1Y2VSaWdodGAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGFycmF5RnVuYyBUaGUgZnVuY3Rpb24gdG8gaXRlcmF0ZSBvdmVyIGFuIGFycmF5LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGVhY2hGdW5jIFRoZSBmdW5jdGlvbiB0byBpdGVyYXRlIG92ZXIgYSBjb2xsZWN0aW9uLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGVhY2ggZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlUmVkdWNlKGFycmF5RnVuYywgZWFjaEZ1bmMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihjb2xsZWN0aW9uLCBpdGVyYXRlZSwgYWNjdW11bGF0b3IsIHRoaXNBcmcpIHtcbiAgICAgICAgdmFyIGluaXRGcm9tQXJyYXkgPSBhcmd1bWVudHMubGVuZ3RoIDwgMztcbiAgICAgICAgcmV0dXJuICh0eXBlb2YgaXRlcmF0ZWUgPT0gJ2Z1bmN0aW9uJyAmJiB0aGlzQXJnID09PSB1bmRlZmluZWQgJiYgaXNBcnJheShjb2xsZWN0aW9uKSlcbiAgICAgICAgICA/IGFycmF5RnVuYyhjb2xsZWN0aW9uLCBpdGVyYXRlZSwgYWNjdW11bGF0b3IsIGluaXRGcm9tQXJyYXkpXG4gICAgICAgICAgOiBiYXNlUmVkdWNlKGNvbGxlY3Rpb24sIGdldENhbGxiYWNrKGl0ZXJhdGVlLCB0aGlzQXJnLCA0KSwgYWNjdW11bGF0b3IsIGluaXRGcm9tQXJyYXksIGVhY2hGdW5jKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgd3JhcHMgYGZ1bmNgIGFuZCBpbnZva2VzIGl0IHdpdGggb3B0aW9uYWwgYHRoaXNgXG4gICAgICogYmluZGluZyBvZiwgcGFydGlhbCBhcHBsaWNhdGlvbiwgYW5kIGN1cnJ5aW5nLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufHN0cmluZ30gZnVuYyBUaGUgZnVuY3Rpb24gb3IgbWV0aG9kIG5hbWUgdG8gcmVmZXJlbmNlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBiaXRtYXNrIFRoZSBiaXRtYXNrIG9mIGZsYWdzLiBTZWUgYGNyZWF0ZVdyYXBwZXJgIGZvciBtb3JlIGRldGFpbHMuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBmdW5jYC5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbcGFydGlhbHNdIFRoZSBhcmd1bWVudHMgdG8gcHJlcGVuZCB0byB0aG9zZSBwcm92aWRlZCB0byB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFtob2xkZXJzXSBUaGUgYHBhcnRpYWxzYCBwbGFjZWhvbGRlciBpbmRleGVzLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFtwYXJ0aWFsc1JpZ2h0XSBUaGUgYXJndW1lbnRzIHRvIGFwcGVuZCB0byB0aG9zZSBwcm92aWRlZCB0byB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFtob2xkZXJzUmlnaHRdIFRoZSBgcGFydGlhbHNSaWdodGAgcGxhY2Vob2xkZXIgaW5kZXhlcy5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbYXJnUG9zXSBUaGUgYXJndW1lbnQgcG9zaXRpb25zIG9mIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFthcnldIFRoZSBhcml0eSBjYXAgb2YgYGZ1bmNgLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbYXJpdHldIFRoZSBhcml0eSBvZiBgZnVuY2AuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgd3JhcHBlZCBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVIeWJyaWRXcmFwcGVyKGZ1bmMsIGJpdG1hc2ssIHRoaXNBcmcsIHBhcnRpYWxzLCBob2xkZXJzLCBwYXJ0aWFsc1JpZ2h0LCBob2xkZXJzUmlnaHQsIGFyZ1BvcywgYXJ5LCBhcml0eSkge1xuICAgICAgdmFyIGlzQXJ5ID0gYml0bWFzayAmIEFSWV9GTEFHLFxuICAgICAgICAgIGlzQmluZCA9IGJpdG1hc2sgJiBCSU5EX0ZMQUcsXG4gICAgICAgICAgaXNCaW5kS2V5ID0gYml0bWFzayAmIEJJTkRfS0VZX0ZMQUcsXG4gICAgICAgICAgaXNDdXJyeSA9IGJpdG1hc2sgJiBDVVJSWV9GTEFHLFxuICAgICAgICAgIGlzQ3VycnlCb3VuZCA9IGJpdG1hc2sgJiBDVVJSWV9CT1VORF9GTEFHLFxuICAgICAgICAgIGlzQ3VycnlSaWdodCA9IGJpdG1hc2sgJiBDVVJSWV9SSUdIVF9GTEFHLFxuICAgICAgICAgIEN0b3IgPSBpc0JpbmRLZXkgPyB1bmRlZmluZWQgOiBjcmVhdGVDdG9yV3JhcHBlcihmdW5jKTtcblxuICAgICAgZnVuY3Rpb24gd3JhcHBlcigpIHtcbiAgICAgICAgLy8gQXZvaWQgYGFyZ3VtZW50c2Agb2JqZWN0IHVzZSBkaXNxdWFsaWZ5aW5nIG9wdGltaXphdGlvbnMgYnlcbiAgICAgICAgLy8gY29udmVydGluZyBpdCB0byBhbiBhcnJheSBiZWZvcmUgcHJvdmlkaW5nIGl0IHRvIG90aGVyIGZ1bmN0aW9ucy5cbiAgICAgICAgdmFyIGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGgsXG4gICAgICAgICAgICBpbmRleCA9IGxlbmd0aCxcbiAgICAgICAgICAgIGFyZ3MgPSBBcnJheShsZW5ndGgpO1xuXG4gICAgICAgIHdoaWxlIChpbmRleC0tKSB7XG4gICAgICAgICAgYXJnc1tpbmRleF0gPSBhcmd1bWVudHNbaW5kZXhdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJ0aWFscykge1xuICAgICAgICAgIGFyZ3MgPSBjb21wb3NlQXJncyhhcmdzLCBwYXJ0aWFscywgaG9sZGVycyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnRpYWxzUmlnaHQpIHtcbiAgICAgICAgICBhcmdzID0gY29tcG9zZUFyZ3NSaWdodChhcmdzLCBwYXJ0aWFsc1JpZ2h0LCBob2xkZXJzUmlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0N1cnJ5IHx8IGlzQ3VycnlSaWdodCkge1xuICAgICAgICAgIHZhciBwbGFjZWhvbGRlciA9IHdyYXBwZXIucGxhY2Vob2xkZXIsXG4gICAgICAgICAgICAgIGFyZ3NIb2xkZXJzID0gcmVwbGFjZUhvbGRlcnMoYXJncywgcGxhY2Vob2xkZXIpO1xuXG4gICAgICAgICAgbGVuZ3RoIC09IGFyZ3NIb2xkZXJzLmxlbmd0aDtcbiAgICAgICAgICBpZiAobGVuZ3RoIDwgYXJpdHkpIHtcbiAgICAgICAgICAgIHZhciBuZXdBcmdQb3MgPSBhcmdQb3MgPyBhcnJheUNvcHkoYXJnUG9zKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBuZXdBcml0eSA9IG5hdGl2ZU1heChhcml0eSAtIGxlbmd0aCwgMCksXG4gICAgICAgICAgICAgICAgbmV3c0hvbGRlcnMgPSBpc0N1cnJ5ID8gYXJnc0hvbGRlcnMgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgbmV3SG9sZGVyc1JpZ2h0ID0gaXNDdXJyeSA/IHVuZGVmaW5lZCA6IGFyZ3NIb2xkZXJzLFxuICAgICAgICAgICAgICAgIG5ld1BhcnRpYWxzID0gaXNDdXJyeSA/IGFyZ3MgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgbmV3UGFydGlhbHNSaWdodCA9IGlzQ3VycnkgPyB1bmRlZmluZWQgOiBhcmdzO1xuXG4gICAgICAgICAgICBiaXRtYXNrIHw9IChpc0N1cnJ5ID8gUEFSVElBTF9GTEFHIDogUEFSVElBTF9SSUdIVF9GTEFHKTtcbiAgICAgICAgICAgIGJpdG1hc2sgJj0gfihpc0N1cnJ5ID8gUEFSVElBTF9SSUdIVF9GTEFHIDogUEFSVElBTF9GTEFHKTtcblxuICAgICAgICAgICAgaWYgKCFpc0N1cnJ5Qm91bmQpIHtcbiAgICAgICAgICAgICAgYml0bWFzayAmPSB+KEJJTkRfRkxBRyB8IEJJTkRfS0VZX0ZMQUcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG5ld0RhdGEgPSBbZnVuYywgYml0bWFzaywgdGhpc0FyZywgbmV3UGFydGlhbHMsIG5ld3NIb2xkZXJzLCBuZXdQYXJ0aWFsc1JpZ2h0LCBuZXdIb2xkZXJzUmlnaHQsIG5ld0FyZ1BvcywgYXJ5LCBuZXdBcml0eV0sXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gY3JlYXRlSHlicmlkV3JhcHBlci5hcHBseSh1bmRlZmluZWQsIG5ld0RhdGEpO1xuXG4gICAgICAgICAgICBpZiAoaXNMYXppYWJsZShmdW5jKSkge1xuICAgICAgICAgICAgICBzZXREYXRhKHJlc3VsdCwgbmV3RGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXN1bHQucGxhY2Vob2xkZXIgPSBwbGFjZWhvbGRlcjtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciB0aGlzQmluZGluZyA9IGlzQmluZCA/IHRoaXNBcmcgOiB0aGlzLFxuICAgICAgICAgICAgZm4gPSBpc0JpbmRLZXkgPyB0aGlzQmluZGluZ1tmdW5jXSA6IGZ1bmM7XG5cbiAgICAgICAgaWYgKGFyZ1Bvcykge1xuICAgICAgICAgIGFyZ3MgPSByZW9yZGVyKGFyZ3MsIGFyZ1Bvcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzQXJ5ICYmIGFyeSA8IGFyZ3MubGVuZ3RoKSB7XG4gICAgICAgICAgYXJncy5sZW5ndGggPSBhcnk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMgJiYgdGhpcyAhPT0gcm9vdCAmJiB0aGlzIGluc3RhbmNlb2Ygd3JhcHBlcikge1xuICAgICAgICAgIGZuID0gQ3RvciB8fCBjcmVhdGVDdG9yV3JhcHBlcihmdW5jKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZm4uYXBwbHkodGhpc0JpbmRpbmcsIGFyZ3MpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHdyYXBwZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyB0aGUgcGFkZGluZyByZXF1aXJlZCBmb3IgYHN0cmluZ2AgYmFzZWQgb24gdGhlIGdpdmVuIGBsZW5ndGhgLlxuICAgICAqIFRoZSBgY2hhcnNgIHN0cmluZyBpcyB0cnVuY2F0ZWQgaWYgdGhlIG51bWJlciBvZiBjaGFyYWN0ZXJzIGV4Y2VlZHMgYGxlbmd0aGAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmcgVGhlIHN0cmluZyB0byBjcmVhdGUgcGFkZGluZyBmb3IuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGg9MF0gVGhlIHBhZGRpbmcgbGVuZ3RoLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbY2hhcnM9JyAnXSBUaGUgc3RyaW5nIHVzZWQgYXMgcGFkZGluZy5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBwYWQgZm9yIGBzdHJpbmdgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZVBhZGRpbmcoc3RyaW5nLCBsZW5ndGgsIGNoYXJzKSB7XG4gICAgICB2YXIgc3RyTGVuZ3RoID0gc3RyaW5nLmxlbmd0aDtcbiAgICAgIGxlbmd0aCA9ICtsZW5ndGg7XG5cbiAgICAgIGlmIChzdHJMZW5ndGggPj0gbGVuZ3RoIHx8ICFuYXRpdmVJc0Zpbml0ZShsZW5ndGgpKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH1cbiAgICAgIHZhciBwYWRMZW5ndGggPSBsZW5ndGggLSBzdHJMZW5ndGg7XG4gICAgICBjaGFycyA9IGNoYXJzID09IG51bGwgPyAnICcgOiAoY2hhcnMgKyAnJyk7XG4gICAgICByZXR1cm4gcmVwZWF0KGNoYXJzLCBuYXRpdmVDZWlsKHBhZExlbmd0aCAvIGNoYXJzLmxlbmd0aCkpLnNsaWNlKDAsIHBhZExlbmd0aCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgd3JhcHMgYGZ1bmNgIGFuZCBpbnZva2VzIGl0IHdpdGggdGhlIG9wdGlvbmFsIGB0aGlzYFxuICAgICAqIGJpbmRpbmcgb2YgYHRoaXNBcmdgIGFuZCB0aGUgYHBhcnRpYWxzYCBwcmVwZW5kZWQgdG8gdGhvc2UgcHJvdmlkZWQgdG9cbiAgICAgKiB0aGUgd3JhcHBlci5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gcGFydGlhbGx5IGFwcGx5IGFyZ3VtZW50cyB0by5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYml0bWFzayBUaGUgYml0bWFzayBvZiBmbGFncy4gU2VlIGBjcmVhdGVXcmFwcGVyYCBmb3IgbW9yZSBkZXRhaWxzLlxuICAgICAqIEBwYXJhbSB7Kn0gdGhpc0FyZyBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGZ1bmNgLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHBhcnRpYWxzIFRoZSBhcmd1bWVudHMgdG8gcHJlcGVuZCB0byB0aG9zZSBwcm92aWRlZCB0byB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGJvdW5kIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZVBhcnRpYWxXcmFwcGVyKGZ1bmMsIGJpdG1hc2ssIHRoaXNBcmcsIHBhcnRpYWxzKSB7XG4gICAgICB2YXIgaXNCaW5kID0gYml0bWFzayAmIEJJTkRfRkxBRyxcbiAgICAgICAgICBDdG9yID0gY3JlYXRlQ3RvcldyYXBwZXIoZnVuYyk7XG5cbiAgICAgIGZ1bmN0aW9uIHdyYXBwZXIoKSB7XG4gICAgICAgIC8vIEF2b2lkIGBhcmd1bWVudHNgIG9iamVjdCB1c2UgZGlzcXVhbGlmeWluZyBvcHRpbWl6YXRpb25zIGJ5XG4gICAgICAgIC8vIGNvbnZlcnRpbmcgaXQgdG8gYW4gYXJyYXkgYmVmb3JlIHByb3ZpZGluZyBpdCBgZnVuY2AuXG4gICAgICAgIHZhciBhcmdzSW5kZXggPSAtMSxcbiAgICAgICAgICAgIGFyZ3NMZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoLFxuICAgICAgICAgICAgbGVmdEluZGV4ID0gLTEsXG4gICAgICAgICAgICBsZWZ0TGVuZ3RoID0gcGFydGlhbHMubGVuZ3RoLFxuICAgICAgICAgICAgYXJncyA9IEFycmF5KGxlZnRMZW5ndGggKyBhcmdzTGVuZ3RoKTtcblxuICAgICAgICB3aGlsZSAoKytsZWZ0SW5kZXggPCBsZWZ0TGVuZ3RoKSB7XG4gICAgICAgICAgYXJnc1tsZWZ0SW5kZXhdID0gcGFydGlhbHNbbGVmdEluZGV4XTtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAoYXJnc0xlbmd0aC0tKSB7XG4gICAgICAgICAgYXJnc1tsZWZ0SW5kZXgrK10gPSBhcmd1bWVudHNbKythcmdzSW5kZXhdO1xuICAgICAgICB9XG4gICAgICAgIHZhciBmbiA9ICh0aGlzICYmIHRoaXMgIT09IHJvb3QgJiYgdGhpcyBpbnN0YW5jZW9mIHdyYXBwZXIpID8gQ3RvciA6IGZ1bmM7XG4gICAgICAgIHJldHVybiBmbi5hcHBseShpc0JpbmQgPyB0aGlzQXJnIDogdGhpcywgYXJncyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gd3JhcHBlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgYF8uY2VpbGAsIGBfLmZsb29yYCwgb3IgYF8ucm91bmRgIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbWV0aG9kTmFtZSBUaGUgbmFtZSBvZiB0aGUgYE1hdGhgIG1ldGhvZCB0byB1c2Ugd2hlbiByb3VuZGluZy5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyByb3VuZCBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVSb3VuZChtZXRob2ROYW1lKSB7XG4gICAgICB2YXIgZnVuYyA9IE1hdGhbbWV0aG9kTmFtZV07XG4gICAgICByZXR1cm4gZnVuY3Rpb24obnVtYmVyLCBwcmVjaXNpb24pIHtcbiAgICAgICAgcHJlY2lzaW9uID0gcHJlY2lzaW9uID09PSB1bmRlZmluZWQgPyAwIDogKCtwcmVjaXNpb24gfHwgMCk7XG4gICAgICAgIGlmIChwcmVjaXNpb24pIHtcbiAgICAgICAgICBwcmVjaXNpb24gPSBwb3coMTAsIHByZWNpc2lvbik7XG4gICAgICAgICAgcmV0dXJuIGZ1bmMobnVtYmVyICogcHJlY2lzaW9uKSAvIHByZWNpc2lvbjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZnVuYyhudW1iZXIpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgYF8uc29ydGVkSW5kZXhgIG9yIGBfLnNvcnRlZExhc3RJbmRleGAgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3JldEhpZ2hlc3RdIFNwZWNpZnkgcmV0dXJuaW5nIHRoZSBoaWdoZXN0IHF1YWxpZmllZCBpbmRleC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBpbmRleCBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVTb3J0ZWRJbmRleChyZXRIaWdoZXN0KSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oYXJyYXksIHZhbHVlLCBpdGVyYXRlZSwgdGhpc0FyZykge1xuICAgICAgICB2YXIgY2FsbGJhY2sgPSBnZXRDYWxsYmFjayhpdGVyYXRlZSk7XG4gICAgICAgIHJldHVybiAoaXRlcmF0ZWUgPT0gbnVsbCAmJiBjYWxsYmFjayA9PT0gYmFzZUNhbGxiYWNrKVxuICAgICAgICAgID8gYmluYXJ5SW5kZXgoYXJyYXksIHZhbHVlLCByZXRIaWdoZXN0KVxuICAgICAgICAgIDogYmluYXJ5SW5kZXhCeShhcnJheSwgdmFsdWUsIGNhbGxiYWNrKGl0ZXJhdGVlLCB0aGlzQXJnLCAxKSwgcmV0SGlnaGVzdCk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGVpdGhlciBjdXJyaWVzIG9yIGludm9rZXMgYGZ1bmNgIHdpdGggb3B0aW9uYWxcbiAgICAgKiBgdGhpc2AgYmluZGluZyBhbmQgcGFydGlhbGx5IGFwcGxpZWQgYXJndW1lbnRzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufHN0cmluZ30gZnVuYyBUaGUgZnVuY3Rpb24gb3IgbWV0aG9kIG5hbWUgdG8gcmVmZXJlbmNlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBiaXRtYXNrIFRoZSBiaXRtYXNrIG9mIGZsYWdzLlxuICAgICAqICBUaGUgYml0bWFzayBtYXkgYmUgY29tcG9zZWQgb2YgdGhlIGZvbGxvd2luZyBmbGFnczpcbiAgICAgKiAgICAgMSAtIGBfLmJpbmRgXG4gICAgICogICAgIDIgLSBgXy5iaW5kS2V5YFxuICAgICAqICAgICA0IC0gYF8uY3VycnlgIG9yIGBfLmN1cnJ5UmlnaHRgIG9mIGEgYm91bmQgZnVuY3Rpb25cbiAgICAgKiAgICAgOCAtIGBfLmN1cnJ5YFxuICAgICAqICAgIDE2IC0gYF8uY3VycnlSaWdodGBcbiAgICAgKiAgICAzMiAtIGBfLnBhcnRpYWxgXG4gICAgICogICAgNjQgLSBgXy5wYXJ0aWFsUmlnaHRgXG4gICAgICogICAxMjggLSBgXy5yZWFyZ2BcbiAgICAgKiAgIDI1NiAtIGBfLmFyeWBcbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGZ1bmNgLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFtwYXJ0aWFsc10gVGhlIGFyZ3VtZW50cyB0byBiZSBwYXJ0aWFsbHkgYXBwbGllZC5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbaG9sZGVyc10gVGhlIGBwYXJ0aWFsc2AgcGxhY2Vob2xkZXIgaW5kZXhlcy5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbYXJnUG9zXSBUaGUgYXJndW1lbnQgcG9zaXRpb25zIG9mIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFthcnldIFRoZSBhcml0eSBjYXAgb2YgYGZ1bmNgLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbYXJpdHldIFRoZSBhcml0eSBvZiBgZnVuY2AuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgd3JhcHBlZCBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVXcmFwcGVyKGZ1bmMsIGJpdG1hc2ssIHRoaXNBcmcsIHBhcnRpYWxzLCBob2xkZXJzLCBhcmdQb3MsIGFyeSwgYXJpdHkpIHtcbiAgICAgIHZhciBpc0JpbmRLZXkgPSBiaXRtYXNrICYgQklORF9LRVlfRkxBRztcbiAgICAgIGlmICghaXNCaW5kS2V5ICYmIHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICAgICAgfVxuICAgICAgdmFyIGxlbmd0aCA9IHBhcnRpYWxzID8gcGFydGlhbHMubGVuZ3RoIDogMDtcbiAgICAgIGlmICghbGVuZ3RoKSB7XG4gICAgICAgIGJpdG1hc2sgJj0gfihQQVJUSUFMX0ZMQUcgfCBQQVJUSUFMX1JJR0hUX0ZMQUcpO1xuICAgICAgICBwYXJ0aWFscyA9IGhvbGRlcnMgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICBsZW5ndGggLT0gKGhvbGRlcnMgPyBob2xkZXJzLmxlbmd0aCA6IDApO1xuICAgICAgaWYgKGJpdG1hc2sgJiBQQVJUSUFMX1JJR0hUX0ZMQUcpIHtcbiAgICAgICAgdmFyIHBhcnRpYWxzUmlnaHQgPSBwYXJ0aWFscyxcbiAgICAgICAgICAgIGhvbGRlcnNSaWdodCA9IGhvbGRlcnM7XG5cbiAgICAgICAgcGFydGlhbHMgPSBob2xkZXJzID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgdmFyIGRhdGEgPSBpc0JpbmRLZXkgPyB1bmRlZmluZWQgOiBnZXREYXRhKGZ1bmMpLFxuICAgICAgICAgIG5ld0RhdGEgPSBbZnVuYywgYml0bWFzaywgdGhpc0FyZywgcGFydGlhbHMsIGhvbGRlcnMsIHBhcnRpYWxzUmlnaHQsIGhvbGRlcnNSaWdodCwgYXJnUG9zLCBhcnksIGFyaXR5XTtcblxuICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgbWVyZ2VEYXRhKG5ld0RhdGEsIGRhdGEpO1xuICAgICAgICBiaXRtYXNrID0gbmV3RGF0YVsxXTtcbiAgICAgICAgYXJpdHkgPSBuZXdEYXRhWzldO1xuICAgICAgfVxuICAgICAgbmV3RGF0YVs5XSA9IGFyaXR5ID09IG51bGxcbiAgICAgICAgPyAoaXNCaW5kS2V5ID8gMCA6IGZ1bmMubGVuZ3RoKVxuICAgICAgICA6IChuYXRpdmVNYXgoYXJpdHkgLSBsZW5ndGgsIDApIHx8IDApO1xuXG4gICAgICBpZiAoYml0bWFzayA9PSBCSU5EX0ZMQUcpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IGNyZWF0ZUJpbmRXcmFwcGVyKG5ld0RhdGFbMF0sIG5ld0RhdGFbMl0pO1xuICAgICAgfSBlbHNlIGlmICgoYml0bWFzayA9PSBQQVJUSUFMX0ZMQUcgfHwgYml0bWFzayA9PSAoQklORF9GTEFHIHwgUEFSVElBTF9GTEFHKSkgJiYgIW5ld0RhdGFbNF0ubGVuZ3RoKSB7XG4gICAgICAgIHJlc3VsdCA9IGNyZWF0ZVBhcnRpYWxXcmFwcGVyLmFwcGx5KHVuZGVmaW5lZCwgbmV3RGF0YSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQgPSBjcmVhdGVIeWJyaWRXcmFwcGVyLmFwcGx5KHVuZGVmaW5lZCwgbmV3RGF0YSk7XG4gICAgICB9XG4gICAgICB2YXIgc2V0dGVyID0gZGF0YSA/IGJhc2VTZXREYXRhIDogc2V0RGF0YTtcbiAgICAgIHJldHVybiBzZXR0ZXIocmVzdWx0LCBuZXdEYXRhKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VJc0VxdWFsRGVlcGAgZm9yIGFycmF5cyB3aXRoIHN1cHBvcnQgZm9yXG4gICAgICogcGFydGlhbCBkZWVwIGNvbXBhcmlzb25zLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gY29tcGFyZS5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBvdGhlciBUaGUgb3RoZXIgYXJyYXkgdG8gY29tcGFyZS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBlcXVhbEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRldGVybWluZSBlcXVpdmFsZW50cyBvZiB2YWx1ZXMuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaW5nIGFycmF5cy5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc0xvb3NlXSBTcGVjaWZ5IHBlcmZvcm1pbmcgcGFydGlhbCBjb21wYXJpc29ucy5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbc3RhY2tBXSBUcmFja3MgdHJhdmVyc2VkIGB2YWx1ZWAgb2JqZWN0cy5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbc3RhY2tCXSBUcmFja3MgdHJhdmVyc2VkIGBvdGhlcmAgb2JqZWN0cy5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGFycmF5cyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGVxdWFsQXJyYXlzKGFycmF5LCBvdGhlciwgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQikge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgYXJyTGVuZ3RoID0gYXJyYXkubGVuZ3RoLFxuICAgICAgICAgIG90aExlbmd0aCA9IG90aGVyLmxlbmd0aDtcblxuICAgICAgaWYgKGFyckxlbmd0aCAhPSBvdGhMZW5ndGggJiYgIShpc0xvb3NlICYmIG90aExlbmd0aCA+IGFyckxlbmd0aCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgLy8gSWdub3JlIG5vbi1pbmRleCBwcm9wZXJ0aWVzLlxuICAgICAgd2hpbGUgKCsraW5kZXggPCBhcnJMZW5ndGgpIHtcbiAgICAgICAgdmFyIGFyclZhbHVlID0gYXJyYXlbaW5kZXhdLFxuICAgICAgICAgICAgb3RoVmFsdWUgPSBvdGhlcltpbmRleF0sXG4gICAgICAgICAgICByZXN1bHQgPSBjdXN0b21pemVyID8gY3VzdG9taXplcihpc0xvb3NlID8gb3RoVmFsdWUgOiBhcnJWYWx1ZSwgaXNMb29zZSA/IGFyclZhbHVlIDogb3RoVmFsdWUsIGluZGV4KSA6IHVuZGVmaW5lZDtcblxuICAgICAgICBpZiAocmVzdWx0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIC8vIFJlY3Vyc2l2ZWx5IGNvbXBhcmUgYXJyYXlzIChzdXNjZXB0aWJsZSB0byBjYWxsIHN0YWNrIGxpbWl0cykuXG4gICAgICAgIGlmIChpc0xvb3NlKSB7XG4gICAgICAgICAgaWYgKCFhcnJheVNvbWUob3RoZXIsIGZ1bmN0aW9uKG90aFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFyclZhbHVlID09PSBvdGhWYWx1ZSB8fCBlcXVhbEZ1bmMoYXJyVmFsdWUsIG90aFZhbHVlLCBjdXN0b21pemVyLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQik7XG4gICAgICAgICAgICAgIH0pKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKCEoYXJyVmFsdWUgPT09IG90aFZhbHVlIHx8IGVxdWFsRnVuYyhhcnJWYWx1ZSwgb3RoVmFsdWUsIGN1c3RvbWl6ZXIsIGlzTG9vc2UsIHN0YWNrQSwgc3RhY2tCKSkpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUlzRXF1YWxEZWVwYCBmb3IgY29tcGFyaW5nIG9iamVjdHMgb2ZcbiAgICAgKiB0aGUgc2FtZSBgdG9TdHJpbmdUYWdgLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoaXMgZnVuY3Rpb24gb25seSBzdXBwb3J0cyBjb21wYXJpbmcgdmFsdWVzIHdpdGggdGFncyBvZlxuICAgICAqIGBCb29sZWFuYCwgYERhdGVgLCBgRXJyb3JgLCBgTnVtYmVyYCwgYFJlZ0V4cGAsIG9yIGBTdHJpbmdgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gY29tcGFyZS5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3RoZXIgVGhlIG90aGVyIG9iamVjdCB0byBjb21wYXJlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0YWcgVGhlIGB0b1N0cmluZ1RhZ2Agb2YgdGhlIG9iamVjdHMgdG8gY29tcGFyZS5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9iamVjdHMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBlcXVhbEJ5VGFnKG9iamVjdCwgb3RoZXIsIHRhZykge1xuICAgICAgc3dpdGNoICh0YWcpIHtcbiAgICAgICAgY2FzZSBib29sVGFnOlxuICAgICAgICBjYXNlIGRhdGVUYWc6XG4gICAgICAgICAgLy8gQ29lcmNlIGRhdGVzIGFuZCBib29sZWFucyB0byBudW1iZXJzLCBkYXRlcyB0byBtaWxsaXNlY29uZHMgYW5kIGJvb2xlYW5zXG4gICAgICAgICAgLy8gdG8gYDFgIG9yIGAwYCB0cmVhdGluZyBpbnZhbGlkIGRhdGVzIGNvZXJjZWQgdG8gYE5hTmAgYXMgbm90IGVxdWFsLlxuICAgICAgICAgIHJldHVybiArb2JqZWN0ID09ICtvdGhlcjtcblxuICAgICAgICBjYXNlIGVycm9yVGFnOlxuICAgICAgICAgIHJldHVybiBvYmplY3QubmFtZSA9PSBvdGhlci5uYW1lICYmIG9iamVjdC5tZXNzYWdlID09IG90aGVyLm1lc3NhZ2U7XG5cbiAgICAgICAgY2FzZSBudW1iZXJUYWc6XG4gICAgICAgICAgLy8gVHJlYXQgYE5hTmAgdnMuIGBOYU5gIGFzIGVxdWFsLlxuICAgICAgICAgIHJldHVybiAob2JqZWN0ICE9ICtvYmplY3QpXG4gICAgICAgICAgICA/IG90aGVyICE9ICtvdGhlclxuICAgICAgICAgICAgOiBvYmplY3QgPT0gK290aGVyO1xuXG4gICAgICAgIGNhc2UgcmVnZXhwVGFnOlxuICAgICAgICBjYXNlIHN0cmluZ1RhZzpcbiAgICAgICAgICAvLyBDb2VyY2UgcmVnZXhlcyB0byBzdHJpbmdzIGFuZCB0cmVhdCBzdHJpbmdzIHByaW1pdGl2ZXMgYW5kIHN0cmluZ1xuICAgICAgICAgIC8vIG9iamVjdHMgYXMgZXF1YWwuIFNlZSBodHRwczovL2VzNS5naXRodWIuaW8vI3gxNS4xMC42LjQgZm9yIG1vcmUgZGV0YWlscy5cbiAgICAgICAgICByZXR1cm4gb2JqZWN0ID09IChvdGhlciArICcnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VJc0VxdWFsRGVlcGAgZm9yIG9iamVjdHMgd2l0aCBzdXBwb3J0IGZvclxuICAgICAqIHBhcnRpYWwgZGVlcCBjb21wYXJpc29ucy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGNvbXBhcmUuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG90aGVyIFRoZSBvdGhlciBvYmplY3QgdG8gY29tcGFyZS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBlcXVhbEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRldGVybWluZSBlcXVpdmFsZW50cyBvZiB2YWx1ZXMuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaW5nIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc0xvb3NlXSBTcGVjaWZ5IHBlcmZvcm1pbmcgcGFydGlhbCBjb21wYXJpc29ucy5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbc3RhY2tBXSBUcmFja3MgdHJhdmVyc2VkIGB2YWx1ZWAgb2JqZWN0cy5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbc3RhY2tCXSBUcmFja3MgdHJhdmVyc2VkIGBvdGhlcmAgb2JqZWN0cy5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9iamVjdHMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBlcXVhbE9iamVjdHMob2JqZWN0LCBvdGhlciwgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQikge1xuICAgICAgdmFyIG9ialByb3BzID0ga2V5cyhvYmplY3QpLFxuICAgICAgICAgIG9iakxlbmd0aCA9IG9ialByb3BzLmxlbmd0aCxcbiAgICAgICAgICBvdGhQcm9wcyA9IGtleXMob3RoZXIpLFxuICAgICAgICAgIG90aExlbmd0aCA9IG90aFByb3BzLmxlbmd0aDtcblxuICAgICAgaWYgKG9iakxlbmd0aCAhPSBvdGhMZW5ndGggJiYgIWlzTG9vc2UpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgdmFyIGluZGV4ID0gb2JqTGVuZ3RoO1xuICAgICAgd2hpbGUgKGluZGV4LS0pIHtcbiAgICAgICAgdmFyIGtleSA9IG9ialByb3BzW2luZGV4XTtcbiAgICAgICAgaWYgKCEoaXNMb29zZSA/IGtleSBpbiBvdGhlciA6IGhhc093blByb3BlcnR5LmNhbGwob3RoZXIsIGtleSkpKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB2YXIgc2tpcEN0b3IgPSBpc0xvb3NlO1xuICAgICAgd2hpbGUgKCsraW5kZXggPCBvYmpMZW5ndGgpIHtcbiAgICAgICAga2V5ID0gb2JqUHJvcHNbaW5kZXhdO1xuICAgICAgICB2YXIgb2JqVmFsdWUgPSBvYmplY3Rba2V5XSxcbiAgICAgICAgICAgIG90aFZhbHVlID0gb3RoZXJba2V5XSxcbiAgICAgICAgICAgIHJlc3VsdCA9IGN1c3RvbWl6ZXIgPyBjdXN0b21pemVyKGlzTG9vc2UgPyBvdGhWYWx1ZSA6IG9ialZhbHVlLCBpc0xvb3NlPyBvYmpWYWx1ZSA6IG90aFZhbHVlLCBrZXkpIDogdW5kZWZpbmVkO1xuXG4gICAgICAgIC8vIFJlY3Vyc2l2ZWx5IGNvbXBhcmUgb2JqZWN0cyAoc3VzY2VwdGlibGUgdG8gY2FsbCBzdGFjayBsaW1pdHMpLlxuICAgICAgICBpZiAoIShyZXN1bHQgPT09IHVuZGVmaW5lZCA/IGVxdWFsRnVuYyhvYmpWYWx1ZSwgb3RoVmFsdWUsIGN1c3RvbWl6ZXIsIGlzTG9vc2UsIHN0YWNrQSwgc3RhY2tCKSA6IHJlc3VsdCkpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgc2tpcEN0b3IgfHwgKHNraXBDdG9yID0ga2V5ID09ICdjb25zdHJ1Y3RvcicpO1xuICAgICAgfVxuICAgICAgaWYgKCFza2lwQ3Rvcikge1xuICAgICAgICB2YXIgb2JqQ3RvciA9IG9iamVjdC5jb25zdHJ1Y3RvcixcbiAgICAgICAgICAgIG90aEN0b3IgPSBvdGhlci5jb25zdHJ1Y3RvcjtcblxuICAgICAgICAvLyBOb24gYE9iamVjdGAgb2JqZWN0IGluc3RhbmNlcyB3aXRoIGRpZmZlcmVudCBjb25zdHJ1Y3RvcnMgYXJlIG5vdCBlcXVhbC5cbiAgICAgICAgaWYgKG9iakN0b3IgIT0gb3RoQ3RvciAmJlxuICAgICAgICAgICAgKCdjb25zdHJ1Y3RvcicgaW4gb2JqZWN0ICYmICdjb25zdHJ1Y3RvcicgaW4gb3RoZXIpICYmXG4gICAgICAgICAgICAhKHR5cGVvZiBvYmpDdG9yID09ICdmdW5jdGlvbicgJiYgb2JqQ3RvciBpbnN0YW5jZW9mIG9iakN0b3IgJiZcbiAgICAgICAgICAgICAgdHlwZW9mIG90aEN0b3IgPT0gJ2Z1bmN0aW9uJyAmJiBvdGhDdG9yIGluc3RhbmNlb2Ygb3RoQ3RvcikpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGFwcHJvcHJpYXRlIFwiY2FsbGJhY2tcIiBmdW5jdGlvbi4gSWYgdGhlIGBfLmNhbGxiYWNrYCBtZXRob2QgaXNcbiAgICAgKiBjdXN0b21pemVkIHRoaXMgZnVuY3Rpb24gcmV0dXJucyB0aGUgY3VzdG9tIG1ldGhvZCwgb3RoZXJ3aXNlIGl0IHJldHVybnNcbiAgICAgKiB0aGUgYGJhc2VDYWxsYmFja2AgZnVuY3Rpb24uIElmIGFyZ3VtZW50cyBhcmUgcHJvdmlkZWQgdGhlIGNob3NlbiBmdW5jdGlvblxuICAgICAqIGlzIGludm9rZWQgd2l0aCB0aGVtIGFuZCBpdHMgcmVzdWx0IGlzIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIGNob3NlbiBmdW5jdGlvbiBvciBpdHMgcmVzdWx0LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldENhbGxiYWNrKGZ1bmMsIHRoaXNBcmcsIGFyZ0NvdW50KSB7XG4gICAgICB2YXIgcmVzdWx0ID0gbG9kYXNoLmNhbGxiYWNrIHx8IGNhbGxiYWNrO1xuICAgICAgcmVzdWx0ID0gcmVzdWx0ID09PSBjYWxsYmFjayA/IGJhc2VDYWxsYmFjayA6IHJlc3VsdDtcbiAgICAgIHJldHVybiBhcmdDb3VudCA/IHJlc3VsdChmdW5jLCB0aGlzQXJnLCBhcmdDb3VudCkgOiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyBtZXRhZGF0YSBmb3IgYGZ1bmNgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBxdWVyeS5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgbWV0YWRhdGEgZm9yIGBmdW5jYC5cbiAgICAgKi9cbiAgICB2YXIgZ2V0RGF0YSA9ICFtZXRhTWFwID8gbm9vcCA6IGZ1bmN0aW9uKGZ1bmMpIHtcbiAgICAgIHJldHVybiBtZXRhTWFwLmdldChmdW5jKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgbmFtZSBvZiBgZnVuY2AuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHF1ZXJ5LlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGZ1bmN0aW9uIG5hbWUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0RnVuY05hbWUoZnVuYykge1xuICAgICAgdmFyIHJlc3VsdCA9IGZ1bmMubmFtZSxcbiAgICAgICAgICBhcnJheSA9IHJlYWxOYW1lc1tyZXN1bHRdLFxuICAgICAgICAgIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMDtcblxuICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICAgIHZhciBkYXRhID0gYXJyYXlbbGVuZ3RoXSxcbiAgICAgICAgICAgIG90aGVyRnVuYyA9IGRhdGEuZnVuYztcbiAgICAgICAgaWYgKG90aGVyRnVuYyA9PSBudWxsIHx8IG90aGVyRnVuYyA9PSBmdW5jKSB7XG4gICAgICAgICAgcmV0dXJuIGRhdGEubmFtZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBhcHByb3ByaWF0ZSBcImluZGV4T2ZcIiBmdW5jdGlvbi4gSWYgdGhlIGBfLmluZGV4T2ZgIG1ldGhvZCBpc1xuICAgICAqIGN1c3RvbWl6ZWQgdGhpcyBmdW5jdGlvbiByZXR1cm5zIHRoZSBjdXN0b20gbWV0aG9kLCBvdGhlcndpc2UgaXQgcmV0dXJuc1xuICAgICAqIHRoZSBgYmFzZUluZGV4T2ZgIGZ1bmN0aW9uLiBJZiBhcmd1bWVudHMgYXJlIHByb3ZpZGVkIHRoZSBjaG9zZW4gZnVuY3Rpb25cbiAgICAgKiBpcyBpbnZva2VkIHdpdGggdGhlbSBhbmQgaXRzIHJlc3VsdCBpcyByZXR1cm5lZC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufG51bWJlcn0gUmV0dXJucyB0aGUgY2hvc2VuIGZ1bmN0aW9uIG9yIGl0cyByZXN1bHQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0SW5kZXhPZihjb2xsZWN0aW9uLCB0YXJnZXQsIGZyb21JbmRleCkge1xuICAgICAgdmFyIHJlc3VsdCA9IGxvZGFzaC5pbmRleE9mIHx8IGluZGV4T2Y7XG4gICAgICByZXN1bHQgPSByZXN1bHQgPT09IGluZGV4T2YgPyBiYXNlSW5kZXhPZiA6IHJlc3VsdDtcbiAgICAgIHJldHVybiBjb2xsZWN0aW9uID8gcmVzdWx0KGNvbGxlY3Rpb24sIHRhcmdldCwgZnJvbUluZGV4KSA6IHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBcImxlbmd0aFwiIHByb3BlcnR5IHZhbHVlIG9mIGBvYmplY3RgLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCB0byBhdm9pZCBhIFtKSVQgYnVnXShodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTQyNzkyKVxuICAgICAqIHRoYXQgYWZmZWN0cyBTYWZhcmkgb24gYXQgbGVhc3QgaU9TIDguMS04LjMgQVJNNjQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgXCJsZW5ndGhcIiB2YWx1ZS5cbiAgICAgKi9cbiAgICB2YXIgZ2V0TGVuZ3RoID0gYmFzZVByb3BlcnR5KCdsZW5ndGgnKTtcblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHByb3BlcnkgbmFtZXMsIHZhbHVlcywgYW5kIGNvbXBhcmUgZmxhZ3Mgb2YgYG9iamVjdGAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG1hdGNoIGRhdGEgb2YgYG9iamVjdGAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0TWF0Y2hEYXRhKG9iamVjdCkge1xuICAgICAgdmFyIHJlc3VsdCA9IHBhaXJzKG9iamVjdCksXG4gICAgICAgICAgbGVuZ3RoID0gcmVzdWx0Lmxlbmd0aDtcblxuICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICAgIHJlc3VsdFtsZW5ndGhdWzJdID0gaXNTdHJpY3RDb21wYXJhYmxlKHJlc3VsdFtsZW5ndGhdWzFdKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgbmF0aXZlIGZ1bmN0aW9uIGF0IGBrZXlgIG9mIGBvYmplY3RgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBtZXRob2QgdG8gZ2V0LlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBmdW5jdGlvbiBpZiBpdCdzIG5hdGl2ZSwgZWxzZSBgdW5kZWZpbmVkYC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXROYXRpdmUob2JqZWN0LCBrZXkpIHtcbiAgICAgIHZhciB2YWx1ZSA9IG9iamVjdCA9PSBudWxsID8gdW5kZWZpbmVkIDogb2JqZWN0W2tleV07XG4gICAgICByZXR1cm4gaXNOYXRpdmUodmFsdWUpID8gdmFsdWUgOiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgdmlldywgYXBwbHlpbmcgYW55IGB0cmFuc2Zvcm1zYCB0byB0aGUgYHN0YXJ0YCBhbmQgYGVuZGAgcG9zaXRpb25zLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3RhcnQgVGhlIHN0YXJ0IG9mIHRoZSB2aWV3LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgVGhlIGVuZCBvZiB0aGUgdmlldy5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSB0cmFuc2Zvcm1zIFRoZSB0cmFuc2Zvcm1hdGlvbnMgdG8gYXBwbHkgdG8gdGhlIHZpZXcuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgYHN0YXJ0YCBhbmQgYGVuZGBcbiAgICAgKiAgcG9zaXRpb25zIG9mIHRoZSB2aWV3LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldFZpZXcoc3RhcnQsIGVuZCwgdHJhbnNmb3Jtcykge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gdHJhbnNmb3Jtcy5sZW5ndGg7XG5cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHZhciBkYXRhID0gdHJhbnNmb3Jtc1tpbmRleF0sXG4gICAgICAgICAgICBzaXplID0gZGF0YS5zaXplO1xuXG4gICAgICAgIHN3aXRjaCAoZGF0YS50eXBlKSB7XG4gICAgICAgICAgY2FzZSAnZHJvcCc6ICAgICAgc3RhcnQgKz0gc2l6ZTsgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnZHJvcFJpZ2h0JzogZW5kIC09IHNpemU7IGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ3Rha2UnOiAgICAgIGVuZCA9IG5hdGl2ZU1pbihlbmQsIHN0YXJ0ICsgc2l6ZSk7IGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ3Rha2VSaWdodCc6IHN0YXJ0ID0gbmF0aXZlTWF4KHN0YXJ0LCBlbmQgLSBzaXplKTsgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB7ICdzdGFydCc6IHN0YXJ0LCAnZW5kJzogZW5kIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZXMgYW4gYXJyYXkgY2xvbmUuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBjbG9uZS5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGluaXRpYWxpemVkIGNsb25lLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGluaXRDbG9uZUFycmF5KGFycmF5KSB7XG4gICAgICB2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoLFxuICAgICAgICAgIHJlc3VsdCA9IG5ldyBhcnJheS5jb25zdHJ1Y3RvcihsZW5ndGgpO1xuXG4gICAgICAvLyBBZGQgYXJyYXkgcHJvcGVydGllcyBhc3NpZ25lZCBieSBgUmVnRXhwI2V4ZWNgLlxuICAgICAgaWYgKGxlbmd0aCAmJiB0eXBlb2YgYXJyYXlbMF0gPT0gJ3N0cmluZycgJiYgaGFzT3duUHJvcGVydHkuY2FsbChhcnJheSwgJ2luZGV4JykpIHtcbiAgICAgICAgcmVzdWx0LmluZGV4ID0gYXJyYXkuaW5kZXg7XG4gICAgICAgIHJlc3VsdC5pbnB1dCA9IGFycmF5LmlucHV0O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplcyBhbiBvYmplY3QgY2xvbmUuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjbG9uZS5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBpbml0aWFsaXplZCBjbG9uZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpbml0Q2xvbmVPYmplY3Qob2JqZWN0KSB7XG4gICAgICB2YXIgQ3RvciA9IG9iamVjdC5jb25zdHJ1Y3RvcjtcbiAgICAgIGlmICghKHR5cGVvZiBDdG9yID09ICdmdW5jdGlvbicgJiYgQ3RvciBpbnN0YW5jZW9mIEN0b3IpKSB7XG4gICAgICAgIEN0b3IgPSBPYmplY3Q7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3IEN0b3I7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZXMgYW4gb2JqZWN0IGNsb25lIGJhc2VkIG9uIGl0cyBgdG9TdHJpbmdUYWdgLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoaXMgZnVuY3Rpb24gb25seSBzdXBwb3J0cyBjbG9uaW5nIHZhbHVlcyB3aXRoIHRhZ3Mgb2ZcbiAgICAgKiBgQm9vbGVhbmAsIGBEYXRlYCwgYEVycm9yYCwgYE51bWJlcmAsIGBSZWdFeHBgLCBvciBgU3RyaW5nYC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGNsb25lLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0YWcgVGhlIGB0b1N0cmluZ1RhZ2Agb2YgdGhlIG9iamVjdCB0byBjbG9uZS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc0RlZXBdIFNwZWNpZnkgYSBkZWVwIGNsb25lLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGluaXRpYWxpemVkIGNsb25lLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGluaXRDbG9uZUJ5VGFnKG9iamVjdCwgdGFnLCBpc0RlZXApIHtcbiAgICAgIHZhciBDdG9yID0gb2JqZWN0LmNvbnN0cnVjdG9yO1xuICAgICAgc3dpdGNoICh0YWcpIHtcbiAgICAgICAgY2FzZSBhcnJheUJ1ZmZlclRhZzpcbiAgICAgICAgICByZXR1cm4gYnVmZmVyQ2xvbmUob2JqZWN0KTtcblxuICAgICAgICBjYXNlIGJvb2xUYWc6XG4gICAgICAgIGNhc2UgZGF0ZVRhZzpcbiAgICAgICAgICByZXR1cm4gbmV3IEN0b3IoK29iamVjdCk7XG5cbiAgICAgICAgY2FzZSBmbG9hdDMyVGFnOiBjYXNlIGZsb2F0NjRUYWc6XG4gICAgICAgIGNhc2UgaW50OFRhZzogY2FzZSBpbnQxNlRhZzogY2FzZSBpbnQzMlRhZzpcbiAgICAgICAgY2FzZSB1aW50OFRhZzogY2FzZSB1aW50OENsYW1wZWRUYWc6IGNhc2UgdWludDE2VGFnOiBjYXNlIHVpbnQzMlRhZzpcbiAgICAgICAgICB2YXIgYnVmZmVyID0gb2JqZWN0LmJ1ZmZlcjtcbiAgICAgICAgICByZXR1cm4gbmV3IEN0b3IoaXNEZWVwID8gYnVmZmVyQ2xvbmUoYnVmZmVyKSA6IGJ1ZmZlciwgb2JqZWN0LmJ5dGVPZmZzZXQsIG9iamVjdC5sZW5ndGgpO1xuXG4gICAgICAgIGNhc2UgbnVtYmVyVGFnOlxuICAgICAgICBjYXNlIHN0cmluZ1RhZzpcbiAgICAgICAgICByZXR1cm4gbmV3IEN0b3Iob2JqZWN0KTtcblxuICAgICAgICBjYXNlIHJlZ2V4cFRhZzpcbiAgICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IEN0b3Iob2JqZWN0LnNvdXJjZSwgcmVGbGFncy5leGVjKG9iamVjdCkpO1xuICAgICAgICAgIHJlc3VsdC5sYXN0SW5kZXggPSBvYmplY3QubGFzdEluZGV4O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbnZva2VzIHRoZSBtZXRob2QgYXQgYHBhdGhgIG9uIGBvYmplY3RgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gICAgICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIG1ldGhvZCB0byBpbnZva2UuXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJncyBUaGUgYXJndW1lbnRzIHRvIGludm9rZSB0aGUgbWV0aG9kIHdpdGguXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHJlc3VsdCBvZiB0aGUgaW52b2tlZCBtZXRob2QuXG4gICAgICovXG4gICAgZnVuY3Rpb24gaW52b2tlUGF0aChvYmplY3QsIHBhdGgsIGFyZ3MpIHtcbiAgICAgIGlmIChvYmplY3QgIT0gbnVsbCAmJiAhaXNLZXkocGF0aCwgb2JqZWN0KSkge1xuICAgICAgICBwYXRoID0gdG9QYXRoKHBhdGgpO1xuICAgICAgICBvYmplY3QgPSBwYXRoLmxlbmd0aCA9PSAxID8gb2JqZWN0IDogYmFzZUdldChvYmplY3QsIGJhc2VTbGljZShwYXRoLCAwLCAtMSkpO1xuICAgICAgICBwYXRoID0gbGFzdChwYXRoKTtcbiAgICAgIH1cbiAgICAgIHZhciBmdW5jID0gb2JqZWN0ID09IG51bGwgPyBvYmplY3QgOiBvYmplY3RbcGF0aF07XG4gICAgICByZXR1cm4gZnVuYyA9PSBudWxsID8gdW5kZWZpbmVkIDogZnVuYy5hcHBseShvYmplY3QsIGFyZ3MpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGFycmF5LWxpa2UuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFycmF5LWxpa2UsIGVsc2UgYGZhbHNlYC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc0FycmF5TGlrZSh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlICE9IG51bGwgJiYgaXNMZW5ndGgoZ2V0TGVuZ3RoKHZhbHVlKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBhcnJheS1saWtlIGluZGV4LlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aD1NQVhfU0FGRV9JTlRFR0VSXSBUaGUgdXBwZXIgYm91bmRzIG9mIGEgdmFsaWQgaW5kZXguXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBpbmRleCwgZWxzZSBgZmFsc2VgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzSW5kZXgodmFsdWUsIGxlbmd0aCkge1xuICAgICAgdmFsdWUgPSAodHlwZW9mIHZhbHVlID09ICdudW1iZXInIHx8IHJlSXNVaW50LnRlc3QodmFsdWUpKSA/ICt2YWx1ZSA6IC0xO1xuICAgICAgbGVuZ3RoID0gbGVuZ3RoID09IG51bGwgPyBNQVhfU0FGRV9JTlRFR0VSIDogbGVuZ3RoO1xuICAgICAgcmV0dXJuIHZhbHVlID4gLTEgJiYgdmFsdWUgJSAxID09IDAgJiYgdmFsdWUgPCBsZW5ndGg7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIHRoZSBwcm92aWRlZCBhcmd1bWVudHMgYXJlIGZyb20gYW4gaXRlcmF0ZWUgY2FsbC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgcG90ZW50aWFsIGl0ZXJhdGVlIHZhbHVlIGFyZ3VtZW50LlxuICAgICAqIEBwYXJhbSB7Kn0gaW5kZXggVGhlIHBvdGVudGlhbCBpdGVyYXRlZSBpbmRleCBvciBrZXkgYXJndW1lbnQuXG4gICAgICogQHBhcmFtIHsqfSBvYmplY3QgVGhlIHBvdGVudGlhbCBpdGVyYXRlZSBvYmplY3QgYXJndW1lbnQuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBhcmd1bWVudHMgYXJlIGZyb20gYW4gaXRlcmF0ZWUgY2FsbCwgZWxzZSBgZmFsc2VgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzSXRlcmF0ZWVDYWxsKHZhbHVlLCBpbmRleCwgb2JqZWN0KSB7XG4gICAgICBpZiAoIWlzT2JqZWN0KG9iamVjdCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgdmFyIHR5cGUgPSB0eXBlb2YgaW5kZXg7XG4gICAgICBpZiAodHlwZSA9PSAnbnVtYmVyJ1xuICAgICAgICAgID8gKGlzQXJyYXlMaWtlKG9iamVjdCkgJiYgaXNJbmRleChpbmRleCwgb2JqZWN0Lmxlbmd0aCkpXG4gICAgICAgICAgOiAodHlwZSA9PSAnc3RyaW5nJyAmJiBpbmRleCBpbiBvYmplY3QpKSB7XG4gICAgICAgIHZhciBvdGhlciA9IG9iamVjdFtpbmRleF07XG4gICAgICAgIHJldHVybiB2YWx1ZSA9PT0gdmFsdWUgPyAodmFsdWUgPT09IG90aGVyKSA6IChvdGhlciAhPT0gb3RoZXIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgcHJvcGVydHkgbmFtZSBhbmQgbm90IGEgcHJvcGVydHkgcGF0aC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvYmplY3RdIFRoZSBvYmplY3QgdG8gcXVlcnkga2V5cyBvbi5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHByb3BlcnR5IG5hbWUsIGVsc2UgYGZhbHNlYC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc0tleSh2YWx1ZSwgb2JqZWN0KSB7XG4gICAgICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgICAgIGlmICgodHlwZSA9PSAnc3RyaW5nJyAmJiByZUlzUGxhaW5Qcm9wLnRlc3QodmFsdWUpKSB8fCB0eXBlID09ICdudW1iZXInKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHZhciByZXN1bHQgPSAhcmVJc0RlZXBQcm9wLnRlc3QodmFsdWUpO1xuICAgICAgcmV0dXJuIHJlc3VsdCB8fCAob2JqZWN0ICE9IG51bGwgJiYgdmFsdWUgaW4gdG9PYmplY3Qob2JqZWN0KSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGBmdW5jYCBoYXMgYSBsYXp5IGNvdW50ZXJwYXJ0LlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYGZ1bmNgIGhhcyBhIGxhenkgY291bnRlcnBhcnQsIGVsc2UgYGZhbHNlYC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc0xhemlhYmxlKGZ1bmMpIHtcbiAgICAgIHZhciBmdW5jTmFtZSA9IGdldEZ1bmNOYW1lKGZ1bmMpO1xuICAgICAgaWYgKCEoZnVuY05hbWUgaW4gTGF6eVdyYXBwZXIucHJvdG90eXBlKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICB2YXIgb3RoZXIgPSBsb2Rhc2hbZnVuY05hbWVdO1xuICAgICAgaWYgKGZ1bmMgPT09IG90aGVyKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgdmFyIGRhdGEgPSBnZXREYXRhKG90aGVyKTtcbiAgICAgIHJldHVybiAhIWRhdGEgJiYgZnVuYyA9PT0gZGF0YVswXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGFycmF5LWxpa2UgbGVuZ3RoLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoaXMgZnVuY3Rpb24gaXMgYmFzZWQgb24gW2BUb0xlbmd0aGBdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLXRvbGVuZ3RoKS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBsZW5ndGgsIGVsc2UgYGZhbHNlYC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc0xlbmd0aCh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJyAmJiB2YWx1ZSA+IC0xICYmIHZhbHVlICUgMSA9PSAwICYmIHZhbHVlIDw9IE1BWF9TQUZFX0lOVEVHRVI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgc3VpdGFibGUgZm9yIHN0cmljdCBlcXVhbGl0eSBjb21wYXJpc29ucywgaS5lLiBgPT09YC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaWYgc3VpdGFibGUgZm9yIHN0cmljdFxuICAgICAqICBlcXVhbGl0eSBjb21wYXJpc29ucywgZWxzZSBgZmFsc2VgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzU3RyaWN0Q29tcGFyYWJsZSh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlID09PSB2YWx1ZSAmJiAhaXNPYmplY3QodmFsdWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1lcmdlcyB0aGUgZnVuY3Rpb24gbWV0YWRhdGEgb2YgYHNvdXJjZWAgaW50byBgZGF0YWAuXG4gICAgICpcbiAgICAgKiBNZXJnaW5nIG1ldGFkYXRhIHJlZHVjZXMgdGhlIG51bWJlciBvZiB3cmFwcGVycyByZXF1aXJlZCB0byBpbnZva2UgYSBmdW5jdGlvbi5cbiAgICAgKiBUaGlzIGlzIHBvc3NpYmxlIGJlY2F1c2UgbWV0aG9kcyBsaWtlIGBfLmJpbmRgLCBgXy5jdXJyeWAsIGFuZCBgXy5wYXJ0aWFsYFxuICAgICAqIG1heSBiZSBhcHBsaWVkIHJlZ2FyZGxlc3Mgb2YgZXhlY3V0aW9uIG9yZGVyLiBNZXRob2RzIGxpa2UgYF8uYXJ5YCBhbmQgYF8ucmVhcmdgXG4gICAgICogYXVnbWVudCBmdW5jdGlvbiBhcmd1bWVudHMsIG1ha2luZyB0aGUgb3JkZXIgaW4gd2hpY2ggdGhleSBhcmUgZXhlY3V0ZWQgaW1wb3J0YW50LFxuICAgICAqIHByZXZlbnRpbmcgdGhlIG1lcmdpbmcgb2YgbWV0YWRhdGEuIEhvd2V2ZXIsIHdlIG1ha2UgYW4gZXhjZXB0aW9uIGZvciBhIHNhZmVcbiAgICAgKiBjb21tb24gY2FzZSB3aGVyZSBjdXJyaWVkIGZ1bmN0aW9ucyBoYXZlIGBfLmFyeWAgYW5kIG9yIGBfLnJlYXJnYCBhcHBsaWVkLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBkYXRhIFRoZSBkZXN0aW5hdGlvbiBtZXRhZGF0YS5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBzb3VyY2UgVGhlIHNvdXJjZSBtZXRhZGF0YS5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYGRhdGFgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1lcmdlRGF0YShkYXRhLCBzb3VyY2UpIHtcbiAgICAgIHZhciBiaXRtYXNrID0gZGF0YVsxXSxcbiAgICAgICAgICBzcmNCaXRtYXNrID0gc291cmNlWzFdLFxuICAgICAgICAgIG5ld0JpdG1hc2sgPSBiaXRtYXNrIHwgc3JjQml0bWFzayxcbiAgICAgICAgICBpc0NvbW1vbiA9IG5ld0JpdG1hc2sgPCBBUllfRkxBRztcblxuICAgICAgdmFyIGlzQ29tYm8gPVxuICAgICAgICAoc3JjQml0bWFzayA9PSBBUllfRkxBRyAmJiBiaXRtYXNrID09IENVUlJZX0ZMQUcpIHx8XG4gICAgICAgIChzcmNCaXRtYXNrID09IEFSWV9GTEFHICYmIGJpdG1hc2sgPT0gUkVBUkdfRkxBRyAmJiBkYXRhWzddLmxlbmd0aCA8PSBzb3VyY2VbOF0pIHx8XG4gICAgICAgIChzcmNCaXRtYXNrID09IChBUllfRkxBRyB8IFJFQVJHX0ZMQUcpICYmIGJpdG1hc2sgPT0gQ1VSUllfRkxBRyk7XG5cbiAgICAgIC8vIEV4aXQgZWFybHkgaWYgbWV0YWRhdGEgY2FuJ3QgYmUgbWVyZ2VkLlxuICAgICAgaWYgKCEoaXNDb21tb24gfHwgaXNDb21ibykpIHtcbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICB9XG4gICAgICAvLyBVc2Ugc291cmNlIGB0aGlzQXJnYCBpZiBhdmFpbGFibGUuXG4gICAgICBpZiAoc3JjQml0bWFzayAmIEJJTkRfRkxBRykge1xuICAgICAgICBkYXRhWzJdID0gc291cmNlWzJdO1xuICAgICAgICAvLyBTZXQgd2hlbiBjdXJyeWluZyBhIGJvdW5kIGZ1bmN0aW9uLlxuICAgICAgICBuZXdCaXRtYXNrIHw9IChiaXRtYXNrICYgQklORF9GTEFHKSA/IDAgOiBDVVJSWV9CT1VORF9GTEFHO1xuICAgICAgfVxuICAgICAgLy8gQ29tcG9zZSBwYXJ0aWFsIGFyZ3VtZW50cy5cbiAgICAgIHZhciB2YWx1ZSA9IHNvdXJjZVszXTtcbiAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICB2YXIgcGFydGlhbHMgPSBkYXRhWzNdO1xuICAgICAgICBkYXRhWzNdID0gcGFydGlhbHMgPyBjb21wb3NlQXJncyhwYXJ0aWFscywgdmFsdWUsIHNvdXJjZVs0XSkgOiBhcnJheUNvcHkodmFsdWUpO1xuICAgICAgICBkYXRhWzRdID0gcGFydGlhbHMgPyByZXBsYWNlSG9sZGVycyhkYXRhWzNdLCBQTEFDRUhPTERFUikgOiBhcnJheUNvcHkoc291cmNlWzRdKTtcbiAgICAgIH1cbiAgICAgIC8vIENvbXBvc2UgcGFydGlhbCByaWdodCBhcmd1bWVudHMuXG4gICAgICB2YWx1ZSA9IHNvdXJjZVs1XTtcbiAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICBwYXJ0aWFscyA9IGRhdGFbNV07XG4gICAgICAgIGRhdGFbNV0gPSBwYXJ0aWFscyA/IGNvbXBvc2VBcmdzUmlnaHQocGFydGlhbHMsIHZhbHVlLCBzb3VyY2VbNl0pIDogYXJyYXlDb3B5KHZhbHVlKTtcbiAgICAgICAgZGF0YVs2XSA9IHBhcnRpYWxzID8gcmVwbGFjZUhvbGRlcnMoZGF0YVs1XSwgUExBQ0VIT0xERVIpIDogYXJyYXlDb3B5KHNvdXJjZVs2XSk7XG4gICAgICB9XG4gICAgICAvLyBVc2Ugc291cmNlIGBhcmdQb3NgIGlmIGF2YWlsYWJsZS5cbiAgICAgIHZhbHVlID0gc291cmNlWzddO1xuICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgIGRhdGFbN10gPSBhcnJheUNvcHkodmFsdWUpO1xuICAgICAgfVxuICAgICAgLy8gVXNlIHNvdXJjZSBgYXJ5YCBpZiBpdCdzIHNtYWxsZXIuXG4gICAgICBpZiAoc3JjQml0bWFzayAmIEFSWV9GTEFHKSB7XG4gICAgICAgIGRhdGFbOF0gPSBkYXRhWzhdID09IG51bGwgPyBzb3VyY2VbOF0gOiBuYXRpdmVNaW4oZGF0YVs4XSwgc291cmNlWzhdKTtcbiAgICAgIH1cbiAgICAgIC8vIFVzZSBzb3VyY2UgYGFyaXR5YCBpZiBvbmUgaXMgbm90IHByb3ZpZGVkLlxuICAgICAgaWYgKGRhdGFbOV0gPT0gbnVsbCkge1xuICAgICAgICBkYXRhWzldID0gc291cmNlWzldO1xuICAgICAgfVxuICAgICAgLy8gVXNlIHNvdXJjZSBgZnVuY2AgYW5kIG1lcmdlIGJpdG1hc2tzLlxuICAgICAgZGF0YVswXSA9IHNvdXJjZVswXTtcbiAgICAgIGRhdGFbMV0gPSBuZXdCaXRtYXNrO1xuXG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVc2VkIGJ5IGBfLmRlZmF1bHRzRGVlcGAgdG8gY3VzdG9taXplIGl0cyBgXy5tZXJnZWAgdXNlLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0geyp9IG9iamVjdFZhbHVlIFRoZSBkZXN0aW5hdGlvbiBvYmplY3QgcHJvcGVydHkgdmFsdWUuXG4gICAgICogQHBhcmFtIHsqfSBzb3VyY2VWYWx1ZSBUaGUgc291cmNlIG9iamVjdCBwcm9wZXJ0eSB2YWx1ZS5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgdmFsdWUgdG8gYXNzaWduIHRvIHRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gICAgICovXG4gICAgZnVuY3Rpb24gbWVyZ2VEZWZhdWx0cyhvYmplY3RWYWx1ZSwgc291cmNlVmFsdWUpIHtcbiAgICAgIHJldHVybiBvYmplY3RWYWx1ZSA9PT0gdW5kZWZpbmVkID8gc291cmNlVmFsdWUgOiBtZXJnZShvYmplY3RWYWx1ZSwgc291cmNlVmFsdWUsIG1lcmdlRGVmYXVsdHMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgXy5waWNrYCB3aGljaCBwaWNrcyBgb2JqZWN0YCBwcm9wZXJ0aWVzIHNwZWNpZmllZFxuICAgICAqIGJ5IGBwcm9wc2AuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIHNvdXJjZSBvYmplY3QuXG4gICAgICogQHBhcmFtIHtzdHJpbmdbXX0gcHJvcHMgVGhlIHByb3BlcnR5IG5hbWVzIHRvIHBpY2suXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbmV3IG9iamVjdC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBwaWNrQnlBcnJheShvYmplY3QsIHByb3BzKSB7XG4gICAgICBvYmplY3QgPSB0b09iamVjdChvYmplY3QpO1xuXG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSBwcm9wcy5sZW5ndGgsXG4gICAgICAgICAgcmVzdWx0ID0ge307XG5cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHZhciBrZXkgPSBwcm9wc1tpbmRleF07XG4gICAgICAgIGlmIChrZXkgaW4gb2JqZWN0KSB7XG4gICAgICAgICAgcmVzdWx0W2tleV0gPSBvYmplY3Rba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYF8ucGlja2Agd2hpY2ggcGlja3MgYG9iamVjdGAgcHJvcGVydGllcyBgcHJlZGljYXRlYFxuICAgICAqIHJldHVybnMgdHJ1dGh5IGZvci5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgc291cmNlIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBuZXcgb2JqZWN0LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHBpY2tCeUNhbGxiYWNrKG9iamVjdCwgcHJlZGljYXRlKSB7XG4gICAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgICBiYXNlRm9ySW4ob2JqZWN0LCBmdW5jdGlvbih2YWx1ZSwga2V5LCBvYmplY3QpIHtcbiAgICAgICAgaWYgKHByZWRpY2F0ZSh2YWx1ZSwga2V5LCBvYmplY3QpKSB7XG4gICAgICAgICAgcmVzdWx0W2tleV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlb3JkZXIgYGFycmF5YCBhY2NvcmRpbmcgdG8gdGhlIHNwZWNpZmllZCBpbmRleGVzIHdoZXJlIHRoZSBlbGVtZW50IGF0XG4gICAgICogdGhlIGZpcnN0IGluZGV4IGlzIGFzc2lnbmVkIGFzIHRoZSBmaXJzdCBlbGVtZW50LCB0aGUgZWxlbWVudCBhdFxuICAgICAqIHRoZSBzZWNvbmQgaW5kZXggaXMgYXNzaWduZWQgYXMgdGhlIHNlY29uZCBlbGVtZW50LCBhbmQgc28gb24uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byByZW9yZGVyLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGluZGV4ZXMgVGhlIGFycmFuZ2VkIGFycmF5IGluZGV4ZXMuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGBhcnJheWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gcmVvcmRlcihhcnJheSwgaW5kZXhlcykge1xuICAgICAgdmFyIGFyckxlbmd0aCA9IGFycmF5Lmxlbmd0aCxcbiAgICAgICAgICBsZW5ndGggPSBuYXRpdmVNaW4oaW5kZXhlcy5sZW5ndGgsIGFyckxlbmd0aCksXG4gICAgICAgICAgb2xkQXJyYXkgPSBhcnJheUNvcHkoYXJyYXkpO1xuXG4gICAgICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICAgICAgdmFyIGluZGV4ID0gaW5kZXhlc1tsZW5ndGhdO1xuICAgICAgICBhcnJheVtsZW5ndGhdID0gaXNJbmRleChpbmRleCwgYXJyTGVuZ3RoKSA/IG9sZEFycmF5W2luZGV4XSA6IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhcnJheTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIG1ldGFkYXRhIGZvciBgZnVuY2AuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogSWYgdGhpcyBmdW5jdGlvbiBiZWNvbWVzIGhvdCwgaS5lLiBpcyBpbnZva2VkIGEgbG90IGluIGEgc2hvcnRcbiAgICAgKiBwZXJpb2Qgb2YgdGltZSwgaXQgd2lsbCB0cmlwIGl0cyBicmVha2VyIGFuZCB0cmFuc2l0aW9uIHRvIGFuIGlkZW50aXR5IGZ1bmN0aW9uXG4gICAgICogdG8gYXZvaWQgZ2FyYmFnZSBjb2xsZWN0aW9uIHBhdXNlcyBpbiBWOC4gU2VlIFtWOCBpc3N1ZSAyMDcwXShodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9MjA3MClcbiAgICAgKiBmb3IgbW9yZSBkZXRhaWxzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBhc3NvY2lhdGUgbWV0YWRhdGEgd2l0aC5cbiAgICAgKiBAcGFyYW0geyp9IGRhdGEgVGhlIG1ldGFkYXRhLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyBgZnVuY2AuXG4gICAgICovXG4gICAgdmFyIHNldERhdGEgPSAoZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgY291bnQgPSAwLFxuICAgICAgICAgIGxhc3RDYWxsZWQgPSAwO1xuXG4gICAgICByZXR1cm4gZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuICAgICAgICB2YXIgc3RhbXAgPSBub3coKSxcbiAgICAgICAgICAgIHJlbWFpbmluZyA9IEhPVF9TUEFOIC0gKHN0YW1wIC0gbGFzdENhbGxlZCk7XG5cbiAgICAgICAgbGFzdENhbGxlZCA9IHN0YW1wO1xuICAgICAgICBpZiAocmVtYWluaW5nID4gMCkge1xuICAgICAgICAgIGlmICgrK2NvdW50ID49IEhPVF9DT1VOVCkge1xuICAgICAgICAgICAgcmV0dXJuIGtleTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY291bnQgPSAwO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBiYXNlU2V0RGF0YShrZXksIHZhbHVlKTtcbiAgICAgIH07XG4gICAgfSgpKTtcblxuICAgIC8qKlxuICAgICAqIEEgZmFsbGJhY2sgaW1wbGVtZW50YXRpb24gb2YgYE9iamVjdC5rZXlzYCB3aGljaCBjcmVhdGVzIGFuIGFycmF5IG9mIHRoZVxuICAgICAqIG93biBlbnVtZXJhYmxlIHByb3BlcnR5IG5hbWVzIG9mIGBvYmplY3RgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzaGltS2V5cyhvYmplY3QpIHtcbiAgICAgIHZhciBwcm9wcyA9IGtleXNJbihvYmplY3QpLFxuICAgICAgICAgIHByb3BzTGVuZ3RoID0gcHJvcHMubGVuZ3RoLFxuICAgICAgICAgIGxlbmd0aCA9IHByb3BzTGVuZ3RoICYmIG9iamVjdC5sZW5ndGg7XG5cbiAgICAgIHZhciBhbGxvd0luZGV4ZXMgPSAhIWxlbmd0aCAmJiBpc0xlbmd0aChsZW5ndGgpICYmXG4gICAgICAgIChpc0FycmF5KG9iamVjdCkgfHwgaXNBcmd1bWVudHMob2JqZWN0KSk7XG5cbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIHJlc3VsdCA9IFtdO1xuXG4gICAgICB3aGlsZSAoKytpbmRleCA8IHByb3BzTGVuZ3RoKSB7XG4gICAgICAgIHZhciBrZXkgPSBwcm9wc1tpbmRleF07XG4gICAgICAgIGlmICgoYWxsb3dJbmRleGVzICYmIGlzSW5kZXgoa2V5LCBsZW5ndGgpKSB8fCBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwga2V5KSkge1xuICAgICAgICAgIHJlc3VsdC5wdXNoKGtleSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udmVydHMgYHZhbHVlYCB0byBhbiBhcnJheS1saWtlIG9iamVjdCBpZiBpdCdzIG5vdCBvbmUuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG4gICAgICogQHJldHVybnMge0FycmF5fE9iamVjdH0gUmV0dXJucyB0aGUgYXJyYXktbGlrZSBvYmplY3QuXG4gICAgICovXG4gICAgZnVuY3Rpb24gdG9JdGVyYWJsZSh2YWx1ZSkge1xuICAgICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgICAgaWYgKCFpc0FycmF5TGlrZSh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlcyh2YWx1ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gaXNPYmplY3QodmFsdWUpID8gdmFsdWUgOiBPYmplY3QodmFsdWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYW4gb2JqZWN0IGlmIGl0J3Mgbm90IG9uZS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBvYmplY3QuXG4gICAgICovXG4gICAgZnVuY3Rpb24gdG9PYmplY3QodmFsdWUpIHtcbiAgICAgIHJldHVybiBpc09iamVjdCh2YWx1ZSkgPyB2YWx1ZSA6IE9iamVjdCh2YWx1ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udmVydHMgYHZhbHVlYCB0byBwcm9wZXJ0eSBwYXRoIGFycmF5IGlmIGl0J3Mgbm90IG9uZS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHByb3BlcnR5IHBhdGggYXJyYXkuXG4gICAgICovXG4gICAgZnVuY3Rpb24gdG9QYXRoKHZhbHVlKSB7XG4gICAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgYmFzZVRvU3RyaW5nKHZhbHVlKS5yZXBsYWNlKHJlUHJvcE5hbWUsIGZ1bmN0aW9uKG1hdGNoLCBudW1iZXIsIHF1b3RlLCBzdHJpbmcpIHtcbiAgICAgICAgcmVzdWx0LnB1c2gocXVvdGUgPyBzdHJpbmcucmVwbGFjZShyZUVzY2FwZUNoYXIsICckMScpIDogKG51bWJlciB8fCBtYXRjaCkpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBjbG9uZSBvZiBgd3JhcHBlcmAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSB3cmFwcGVyIFRoZSB3cmFwcGVyIHRvIGNsb25lLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGNsb25lZCB3cmFwcGVyLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHdyYXBwZXJDbG9uZSh3cmFwcGVyKSB7XG4gICAgICByZXR1cm4gd3JhcHBlciBpbnN0YW5jZW9mIExhenlXcmFwcGVyXG4gICAgICAgID8gd3JhcHBlci5jbG9uZSgpXG4gICAgICAgIDogbmV3IExvZGFzaFdyYXBwZXIod3JhcHBlci5fX3dyYXBwZWRfXywgd3JhcHBlci5fX2NoYWluX18sIGFycmF5Q29weSh3cmFwcGVyLl9fYWN0aW9uc19fKSk7XG4gICAgfVxuXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhcnJheSBvZiBlbGVtZW50cyBzcGxpdCBpbnRvIGdyb3VwcyB0aGUgbGVuZ3RoIG9mIGBzaXplYC5cbiAgICAgKiBJZiBgY29sbGVjdGlvbmAgY2FuJ3QgYmUgc3BsaXQgZXZlbmx5LCB0aGUgZmluYWwgY2h1bmsgd2lsbCBiZSB0aGUgcmVtYWluaW5nXG4gICAgICogZWxlbWVudHMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gcHJvY2Vzcy5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3NpemU9MV0gVGhlIGxlbmd0aCBvZiBlYWNoIGNodW5rLlxuICAgICAqIEBwYXJhbS0ge09iamVjdH0gW2d1YXJkXSBFbmFibGVzIHVzZSBhcyBhIGNhbGxiYWNrIGZvciBmdW5jdGlvbnMgbGlrZSBgXy5tYXBgLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGFycmF5IGNvbnRhaW5pbmcgY2h1bmtzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmNodW5rKFsnYScsICdiJywgJ2MnLCAnZCddLCAyKTtcbiAgICAgKiAvLyA9PiBbWydhJywgJ2InXSwgWydjJywgJ2QnXV1cbiAgICAgKlxuICAgICAqIF8uY2h1bmsoWydhJywgJ2InLCAnYycsICdkJ10sIDMpO1xuICAgICAqIC8vID0+IFtbJ2EnLCAnYicsICdjJ10sIFsnZCddXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNodW5rKGFycmF5LCBzaXplLCBndWFyZCkge1xuICAgICAgaWYgKGd1YXJkID8gaXNJdGVyYXRlZUNhbGwoYXJyYXksIHNpemUsIGd1YXJkKSA6IHNpemUgPT0gbnVsbCkge1xuICAgICAgICBzaXplID0gMTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNpemUgPSBuYXRpdmVNYXgobmF0aXZlRmxvb3Ioc2l6ZSkgfHwgMSwgMSk7XG4gICAgICB9XG4gICAgICB2YXIgaW5kZXggPSAwLFxuICAgICAgICAgIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMCxcbiAgICAgICAgICByZXNJbmRleCA9IC0xLFxuICAgICAgICAgIHJlc3VsdCA9IEFycmF5KG5hdGl2ZUNlaWwobGVuZ3RoIC8gc2l6ZSkpO1xuXG4gICAgICB3aGlsZSAoaW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgcmVzdWx0WysrcmVzSW5kZXhdID0gYmFzZVNsaWNlKGFycmF5LCBpbmRleCwgKGluZGV4ICs9IHNpemUpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhcnJheSB3aXRoIGFsbCBmYWxzZXkgdmFsdWVzIHJlbW92ZWQuIFRoZSB2YWx1ZXMgYGZhbHNlYCwgYG51bGxgLFxuICAgICAqIGAwYCwgYFwiXCJgLCBgdW5kZWZpbmVkYCwgYW5kIGBOYU5gIGFyZSBmYWxzZXkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gY29tcGFjdC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBhcnJheSBvZiBmaWx0ZXJlZCB2YWx1ZXMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uY29tcGFjdChbMCwgMSwgZmFsc2UsIDIsICcnLCAzXSk7XG4gICAgICogLy8gPT4gWzEsIDIsIDNdXG4gICAgICovXG4gICAgZnVuY3Rpb24gY29tcGFjdChhcnJheSkge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwLFxuICAgICAgICAgIHJlc0luZGV4ID0gLTEsXG4gICAgICAgICAgcmVzdWx0ID0gW107XG5cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IGFycmF5W2luZGV4XTtcbiAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgcmVzdWx0WysrcmVzSW5kZXhdID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhcnJheSBvZiB1bmlxdWUgYGFycmF5YCB2YWx1ZXMgbm90IGluY2x1ZGVkIGluIHRoZSBvdGhlclxuICAgICAqIHByb3ZpZGVkIGFycmF5cyB1c2luZyBbYFNhbWVWYWx1ZVplcm9gXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1zYW1ldmFsdWV6ZXJvKVxuICAgICAqIGZvciBlcXVhbGl0eSBjb21wYXJpc29ucy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBpbnNwZWN0LlxuICAgICAqIEBwYXJhbSB7Li4uQXJyYXl9IFt2YWx1ZXNdIFRoZSBhcnJheXMgb2YgdmFsdWVzIHRvIGV4Y2x1ZGUuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgYXJyYXkgb2YgZmlsdGVyZWQgdmFsdWVzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmRpZmZlcmVuY2UoWzEsIDIsIDNdLCBbNCwgMl0pO1xuICAgICAqIC8vID0+IFsxLCAzXVxuICAgICAqL1xuICAgIHZhciBkaWZmZXJlbmNlID0gcmVzdFBhcmFtKGZ1bmN0aW9uKGFycmF5LCB2YWx1ZXMpIHtcbiAgICAgIHJldHVybiAoaXNPYmplY3RMaWtlKGFycmF5KSAmJiBpc0FycmF5TGlrZShhcnJheSkpXG4gICAgICAgID8gYmFzZURpZmZlcmVuY2UoYXJyYXksIGJhc2VGbGF0dGVuKHZhbHVlcywgZmFsc2UsIHRydWUpKVxuICAgICAgICA6IFtdO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHNsaWNlIG9mIGBhcnJheWAgd2l0aCBgbmAgZWxlbWVudHMgZHJvcHBlZCBmcm9tIHRoZSBiZWdpbm5pbmcuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gcXVlcnkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtuPTFdIFRoZSBudW1iZXIgb2YgZWxlbWVudHMgdG8gZHJvcC5cbiAgICAgKiBAcGFyYW0tIHtPYmplY3R9IFtndWFyZF0gRW5hYmxlcyB1c2UgYXMgYSBjYWxsYmFjayBmb3IgZnVuY3Rpb25zIGxpa2UgYF8ubWFwYC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHNsaWNlIG9mIGBhcnJheWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uZHJvcChbMSwgMiwgM10pO1xuICAgICAqIC8vID0+IFsyLCAzXVxuICAgICAqXG4gICAgICogXy5kcm9wKFsxLCAyLCAzXSwgMik7XG4gICAgICogLy8gPT4gWzNdXG4gICAgICpcbiAgICAgKiBfLmRyb3AoWzEsIDIsIDNdLCA1KTtcbiAgICAgKiAvLyA9PiBbXVxuICAgICAqXG4gICAgICogXy5kcm9wKFsxLCAyLCAzXSwgMCk7XG4gICAgICogLy8gPT4gWzEsIDIsIDNdXG4gICAgICovXG4gICAgZnVuY3Rpb24gZHJvcChhcnJheSwgbiwgZ3VhcmQpIHtcbiAgICAgIHZhciBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDA7XG4gICAgICBpZiAoIWxlbmd0aCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgICBpZiAoZ3VhcmQgPyBpc0l0ZXJhdGVlQ2FsbChhcnJheSwgbiwgZ3VhcmQpIDogbiA9PSBudWxsKSB7XG4gICAgICAgIG4gPSAxO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGJhc2VTbGljZShhcnJheSwgbiA8IDAgPyAwIDogbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHNsaWNlIG9mIGBhcnJheWAgd2l0aCBgbmAgZWxlbWVudHMgZHJvcHBlZCBmcm9tIHRoZSBlbmQuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gcXVlcnkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtuPTFdIFRoZSBudW1iZXIgb2YgZWxlbWVudHMgdG8gZHJvcC5cbiAgICAgKiBAcGFyYW0tIHtPYmplY3R9IFtndWFyZF0gRW5hYmxlcyB1c2UgYXMgYSBjYWxsYmFjayBmb3IgZnVuY3Rpb25zIGxpa2UgYF8ubWFwYC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHNsaWNlIG9mIGBhcnJheWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uZHJvcFJpZ2h0KFsxLCAyLCAzXSk7XG4gICAgICogLy8gPT4gWzEsIDJdXG4gICAgICpcbiAgICAgKiBfLmRyb3BSaWdodChbMSwgMiwgM10sIDIpO1xuICAgICAqIC8vID0+IFsxXVxuICAgICAqXG4gICAgICogXy5kcm9wUmlnaHQoWzEsIDIsIDNdLCA1KTtcbiAgICAgKiAvLyA9PiBbXVxuICAgICAqXG4gICAgICogXy5kcm9wUmlnaHQoWzEsIDIsIDNdLCAwKTtcbiAgICAgKiAvLyA9PiBbMSwgMiwgM11cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBkcm9wUmlnaHQoYXJyYXksIG4sIGd1YXJkKSB7XG4gICAgICB2YXIgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwO1xuICAgICAgaWYgKCFsZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgICAgaWYgKGd1YXJkID8gaXNJdGVyYXRlZUNhbGwoYXJyYXksIG4sIGd1YXJkKSA6IG4gPT0gbnVsbCkge1xuICAgICAgICBuID0gMTtcbiAgICAgIH1cbiAgICAgIG4gPSBsZW5ndGggLSAoK24gfHwgMCk7XG4gICAgICByZXR1cm4gYmFzZVNsaWNlKGFycmF5LCAwLCBuIDwgMCA/IDAgOiBuKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgc2xpY2Ugb2YgYGFycmF5YCBleGNsdWRpbmcgZWxlbWVudHMgZHJvcHBlZCBmcm9tIHRoZSBlbmQuXG4gICAgICogRWxlbWVudHMgYXJlIGRyb3BwZWQgdW50aWwgYHByZWRpY2F0ZWAgcmV0dXJucyBmYWxzZXkuIFRoZSBwcmVkaWNhdGUgaXNcbiAgICAgKiBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM6ICh2YWx1ZSwgaW5kZXgsIGFycmF5KS5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYHByZWRpY2F0ZWAgdGhlIGNyZWF0ZWQgYF8ucHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhIHZhbHVlIGlzIGFsc28gcHJvdmlkZWQgZm9yIGB0aGlzQXJnYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzUHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSBhIG1hdGNoaW5nIHByb3BlcnR5XG4gICAgICogdmFsdWUsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYHByZWRpY2F0ZWAgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc2Agc3R5bGVcbiAgICAgKiBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBtYXRjaCB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW5cbiAgICAgKiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBxdWVyeS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtwcmVkaWNhdGU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWRcbiAgICAgKiAgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYHByZWRpY2F0ZWAuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBzbGljZSBvZiBgYXJyYXlgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmRyb3BSaWdodFdoaWxlKFsxLCAyLCAzXSwgZnVuY3Rpb24obikge1xuICAgICAqICAgcmV0dXJuIG4gPiAxO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IFsxXVxuICAgICAqXG4gICAgICogdmFyIHVzZXJzID0gW1xuICAgICAqICAgeyAndXNlcic6ICdiYXJuZXknLCAgJ2FjdGl2ZSc6IHRydWUgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAnZnJlZCcsICAgICdhY3RpdmUnOiBmYWxzZSB9LFxuICAgICAqICAgeyAndXNlcic6ICdwZWJibGVzJywgJ2FjdGl2ZSc6IGZhbHNlIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLm1hdGNoZXNgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8ucGx1Y2soXy5kcm9wUmlnaHRXaGlsZSh1c2VycywgeyAndXNlcic6ICdwZWJibGVzJywgJ2FjdGl2ZSc6IGZhbHNlIH0pLCAndXNlcicpO1xuICAgICAqIC8vID0+IFsnYmFybmV5JywgJ2ZyZWQnXVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLm1hdGNoZXNQcm9wZXJ0eWAgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5wbHVjayhfLmRyb3BSaWdodFdoaWxlKHVzZXJzLCAnYWN0aXZlJywgZmFsc2UpLCAndXNlcicpO1xuICAgICAqIC8vID0+IFsnYmFybmV5J11cbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5wcm9wZXJ0eWAgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5wbHVjayhfLmRyb3BSaWdodFdoaWxlKHVzZXJzLCAnYWN0aXZlJyksICd1c2VyJyk7XG4gICAgICogLy8gPT4gWydiYXJuZXknLCAnZnJlZCcsICdwZWJibGVzJ11cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBkcm9wUmlnaHRXaGlsZShhcnJheSwgcHJlZGljYXRlLCB0aGlzQXJnKSB7XG4gICAgICByZXR1cm4gKGFycmF5ICYmIGFycmF5Lmxlbmd0aClcbiAgICAgICAgPyBiYXNlV2hpbGUoYXJyYXksIGdldENhbGxiYWNrKHByZWRpY2F0ZSwgdGhpc0FyZywgMyksIHRydWUsIHRydWUpXG4gICAgICAgIDogW107XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHNsaWNlIG9mIGBhcnJheWAgZXhjbHVkaW5nIGVsZW1lbnRzIGRyb3BwZWQgZnJvbSB0aGUgYmVnaW5uaW5nLlxuICAgICAqIEVsZW1lbnRzIGFyZSBkcm9wcGVkIHVudGlsIGBwcmVkaWNhdGVgIHJldHVybnMgZmFsc2V5LiBUaGUgcHJlZGljYXRlIGlzXG4gICAgICogYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdGhyZWUgYXJndW1lbnRzOiAodmFsdWUsIGluZGV4LCBhcnJheSkuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBwcmVkaWNhdGVgIHRoZSBjcmVhdGVkIGBfLnByb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYSB2YWx1ZSBpcyBhbHNvIHByb3ZpZGVkIGZvciBgdGhpc0FyZ2AgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc1Byb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgYSBtYXRjaGluZyBwcm9wZXJ0eVxuICAgICAqIHZhbHVlLCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBwcmVkaWNhdGVgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNgIHN0eWxlXG4gICAgICogY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW5cbiAgICAgKiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBxdWVyeS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtwcmVkaWNhdGU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWRcbiAgICAgKiAgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYHByZWRpY2F0ZWAuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBzbGljZSBvZiBgYXJyYXlgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmRyb3BXaGlsZShbMSwgMiwgM10sIGZ1bmN0aW9uKG4pIHtcbiAgICAgKiAgIHJldHVybiBuIDwgMztcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiBbM11cbiAgICAgKlxuICAgICAqIHZhciB1c2VycyA9IFtcbiAgICAgKiAgIHsgJ3VzZXInOiAnYmFybmV5JywgICdhY3RpdmUnOiBmYWxzZSB9LFxuICAgICAqICAgeyAndXNlcic6ICdmcmVkJywgICAgJ2FjdGl2ZSc6IGZhbHNlIH0sXG4gICAgICogICB7ICd1c2VyJzogJ3BlYmJsZXMnLCAnYWN0aXZlJzogdHJ1ZSB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5tYXRjaGVzYCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLnBsdWNrKF8uZHJvcFdoaWxlKHVzZXJzLCB7ICd1c2VyJzogJ2Jhcm5leScsICdhY3RpdmUnOiBmYWxzZSB9KSwgJ3VzZXInKTtcbiAgICAgKiAvLyA9PiBbJ2ZyZWQnLCAncGViYmxlcyddXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ubWF0Y2hlc1Byb3BlcnR5YCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLnBsdWNrKF8uZHJvcFdoaWxlKHVzZXJzLCAnYWN0aXZlJywgZmFsc2UpLCAndXNlcicpO1xuICAgICAqIC8vID0+IFsncGViYmxlcyddXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ucHJvcGVydHlgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8ucGx1Y2soXy5kcm9wV2hpbGUodXNlcnMsICdhY3RpdmUnKSwgJ3VzZXInKTtcbiAgICAgKiAvLyA9PiBbJ2Jhcm5leScsICdmcmVkJywgJ3BlYmJsZXMnXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGRyb3BXaGlsZShhcnJheSwgcHJlZGljYXRlLCB0aGlzQXJnKSB7XG4gICAgICByZXR1cm4gKGFycmF5ICYmIGFycmF5Lmxlbmd0aClcbiAgICAgICAgPyBiYXNlV2hpbGUoYXJyYXksIGdldENhbGxiYWNrKHByZWRpY2F0ZSwgdGhpc0FyZywgMyksIHRydWUpXG4gICAgICAgIDogW107XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmlsbHMgZWxlbWVudHMgb2YgYGFycmF5YCB3aXRoIGB2YWx1ZWAgZnJvbSBgc3RhcnRgIHVwIHRvLCBidXQgbm90XG4gICAgICogaW5jbHVkaW5nLCBgZW5kYC5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBtdXRhdGVzIGBhcnJheWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gZmlsbC5cbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBmaWxsIGBhcnJheWAgd2l0aC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3N0YXJ0PTBdIFRoZSBzdGFydCBwb3NpdGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2VuZD1hcnJheS5sZW5ndGhdIFRoZSBlbmQgcG9zaXRpb24uXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGBhcnJheWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBhcnJheSA9IFsxLCAyLCAzXTtcbiAgICAgKlxuICAgICAqIF8uZmlsbChhcnJheSwgJ2EnKTtcbiAgICAgKiBjb25zb2xlLmxvZyhhcnJheSk7XG4gICAgICogLy8gPT4gWydhJywgJ2EnLCAnYSddXG4gICAgICpcbiAgICAgKiBfLmZpbGwoQXJyYXkoMyksIDIpO1xuICAgICAqIC8vID0+IFsyLCAyLCAyXVxuICAgICAqXG4gICAgICogXy5maWxsKFs0LCA2LCA4XSwgJyonLCAxLCAyKTtcbiAgICAgKiAvLyA9PiBbNCwgJyonLCA4XVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGZpbGwoYXJyYXksIHZhbHVlLCBzdGFydCwgZW5kKSB7XG4gICAgICB2YXIgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwO1xuICAgICAgaWYgKCFsZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgICAgaWYgKHN0YXJ0ICYmIHR5cGVvZiBzdGFydCAhPSAnbnVtYmVyJyAmJiBpc0l0ZXJhdGVlQ2FsbChhcnJheSwgdmFsdWUsIHN0YXJ0KSkge1xuICAgICAgICBzdGFydCA9IDA7XG4gICAgICAgIGVuZCA9IGxlbmd0aDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBiYXNlRmlsbChhcnJheSwgdmFsdWUsIHN0YXJ0LCBlbmQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uZmluZGAgZXhjZXB0IHRoYXQgaXQgcmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGZpcnN0XG4gICAgICogZWxlbWVudCBgcHJlZGljYXRlYCByZXR1cm5zIHRydXRoeSBmb3IgaW5zdGVhZCBvZiB0aGUgZWxlbWVudCBpdHNlbGYuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBwcmVkaWNhdGVgIHRoZSBjcmVhdGVkIGBfLnByb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYSB2YWx1ZSBpcyBhbHNvIHByb3ZpZGVkIGZvciBgdGhpc0FyZ2AgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc1Byb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgYSBtYXRjaGluZyBwcm9wZXJ0eVxuICAgICAqIHZhbHVlLCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBwcmVkaWNhdGVgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNgIHN0eWxlXG4gICAgICogY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW5cbiAgICAgKiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBzZWFyY2guXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbcHJlZGljYXRlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkXG4gICAgICogIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBwcmVkaWNhdGVgLlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBmb3VuZCBlbGVtZW50LCBlbHNlIGAtMWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciB1c2VycyA9IFtcbiAgICAgKiAgIHsgJ3VzZXInOiAnYmFybmV5JywgICdhY3RpdmUnOiBmYWxzZSB9LFxuICAgICAqICAgeyAndXNlcic6ICdmcmVkJywgICAgJ2FjdGl2ZSc6IGZhbHNlIH0sXG4gICAgICogICB7ICd1c2VyJzogJ3BlYmJsZXMnLCAnYWN0aXZlJzogdHJ1ZSB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIF8uZmluZEluZGV4KHVzZXJzLCBmdW5jdGlvbihjaHIpIHtcbiAgICAgKiAgIHJldHVybiBjaHIudXNlciA9PSAnYmFybmV5JztcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiAwXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ubWF0Y2hlc2AgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5maW5kSW5kZXgodXNlcnMsIHsgJ3VzZXInOiAnZnJlZCcsICdhY3RpdmUnOiBmYWxzZSB9KTtcbiAgICAgKiAvLyA9PiAxXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ubWF0Y2hlc1Byb3BlcnR5YCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLmZpbmRJbmRleCh1c2VycywgJ2FjdGl2ZScsIGZhbHNlKTtcbiAgICAgKiAvLyA9PiAwXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ucHJvcGVydHlgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8uZmluZEluZGV4KHVzZXJzLCAnYWN0aXZlJyk7XG4gICAgICogLy8gPT4gMlxuICAgICAqL1xuICAgIHZhciBmaW5kSW5kZXggPSBjcmVhdGVGaW5kSW5kZXgoKTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uZmluZEluZGV4YCBleGNlcHQgdGhhdCBpdCBpdGVyYXRlcyBvdmVyIGVsZW1lbnRzXG4gICAgICogb2YgYGNvbGxlY3Rpb25gIGZyb20gcmlnaHQgdG8gbGVmdC5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYHByZWRpY2F0ZWAgdGhlIGNyZWF0ZWQgYF8ucHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhIHZhbHVlIGlzIGFsc28gcHJvdmlkZWQgZm9yIGB0aGlzQXJnYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzUHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSBhIG1hdGNoaW5nIHByb3BlcnR5XG4gICAgICogdmFsdWUsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYHByZWRpY2F0ZWAgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc2Agc3R5bGVcbiAgICAgKiBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlblxuICAgICAqIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHNlYXJjaC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtwcmVkaWNhdGU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWRcbiAgICAgKiAgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYHByZWRpY2F0ZWAuXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGZvdW5kIGVsZW1lbnQsIGVsc2UgYC0xYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIHVzZXJzID0gW1xuICAgICAqICAgeyAndXNlcic6ICdiYXJuZXknLCAgJ2FjdGl2ZSc6IHRydWUgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAnZnJlZCcsICAgICdhY3RpdmUnOiBmYWxzZSB9LFxuICAgICAqICAgeyAndXNlcic6ICdwZWJibGVzJywgJ2FjdGl2ZSc6IGZhbHNlIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogXy5maW5kTGFzdEluZGV4KHVzZXJzLCBmdW5jdGlvbihjaHIpIHtcbiAgICAgKiAgIHJldHVybiBjaHIudXNlciA9PSAncGViYmxlcyc7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gMlxuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLm1hdGNoZXNgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8uZmluZExhc3RJbmRleCh1c2VycywgeyAndXNlcic6ICdiYXJuZXknLCAnYWN0aXZlJzogdHJ1ZSB9KTtcbiAgICAgKiAvLyA9PiAwXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ubWF0Y2hlc1Byb3BlcnR5YCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLmZpbmRMYXN0SW5kZXgodXNlcnMsICdhY3RpdmUnLCBmYWxzZSk7XG4gICAgICogLy8gPT4gMlxuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLnByb3BlcnR5YCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLmZpbmRMYXN0SW5kZXgodXNlcnMsICdhY3RpdmUnKTtcbiAgICAgKiAvLyA9PiAwXG4gICAgICovXG4gICAgdmFyIGZpbmRMYXN0SW5kZXggPSBjcmVhdGVGaW5kSW5kZXgodHJ1ZSk7XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBmaXJzdCBlbGVtZW50IG9mIGBhcnJheWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAYWxpYXMgaGVhZFxuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBxdWVyeS5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZmlyc3QgZWxlbWVudCBvZiBgYXJyYXlgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmZpcnN0KFsxLCAyLCAzXSk7XG4gICAgICogLy8gPT4gMVxuICAgICAqXG4gICAgICogXy5maXJzdChbXSk7XG4gICAgICogLy8gPT4gdW5kZWZpbmVkXG4gICAgICovXG4gICAgZnVuY3Rpb24gZmlyc3QoYXJyYXkpIHtcbiAgICAgIHJldHVybiBhcnJheSA/IGFycmF5WzBdIDogdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZsYXR0ZW5zIGEgbmVzdGVkIGFycmF5LiBJZiBgaXNEZWVwYCBpcyBgdHJ1ZWAgdGhlIGFycmF5IGlzIHJlY3Vyc2l2ZWx5XG4gICAgICogZmxhdHRlbmVkLCBvdGhlcndpc2UgaXQgaXMgb25seSBmbGF0dGVuZWQgYSBzaW5nbGUgbGV2ZWwuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gZmxhdHRlbi5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc0RlZXBdIFNwZWNpZnkgYSBkZWVwIGZsYXR0ZW4uXG4gICAgICogQHBhcmFtLSB7T2JqZWN0fSBbZ3VhcmRdIEVuYWJsZXMgdXNlIGFzIGEgY2FsbGJhY2sgZm9yIGZ1bmN0aW9ucyBsaWtlIGBfLm1hcGAuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgZmxhdHRlbmVkIGFycmF5LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmZsYXR0ZW4oWzEsIFsyLCAzLCBbNF1dXSk7XG4gICAgICogLy8gPT4gWzEsIDIsIDMsIFs0XV1cbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIGBpc0RlZXBgXG4gICAgICogXy5mbGF0dGVuKFsxLCBbMiwgMywgWzRdXV0sIHRydWUpO1xuICAgICAqIC8vID0+IFsxLCAyLCAzLCA0XVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGZsYXR0ZW4oYXJyYXksIGlzRGVlcCwgZ3VhcmQpIHtcbiAgICAgIHZhciBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDA7XG4gICAgICBpZiAoZ3VhcmQgJiYgaXNJdGVyYXRlZUNhbGwoYXJyYXksIGlzRGVlcCwgZ3VhcmQpKSB7XG4gICAgICAgIGlzRGVlcCA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGxlbmd0aCA/IGJhc2VGbGF0dGVuKGFycmF5LCBpc0RlZXApIDogW107XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVjdXJzaXZlbHkgZmxhdHRlbnMgYSBuZXN0ZWQgYXJyYXkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gcmVjdXJzaXZlbHkgZmxhdHRlbi5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBmbGF0dGVuZWQgYXJyYXkuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uZmxhdHRlbkRlZXAoWzEsIFsyLCAzLCBbNF1dXSk7XG4gICAgICogLy8gPT4gWzEsIDIsIDMsIDRdXG4gICAgICovXG4gICAgZnVuY3Rpb24gZmxhdHRlbkRlZXAoYXJyYXkpIHtcbiAgICAgIHZhciBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDA7XG4gICAgICByZXR1cm4gbGVuZ3RoID8gYmFzZUZsYXR0ZW4oYXJyYXksIHRydWUpIDogW107XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgaW5kZXggYXQgd2hpY2ggdGhlIGZpcnN0IG9jY3VycmVuY2Ugb2YgYHZhbHVlYCBpcyBmb3VuZCBpbiBgYXJyYXlgXG4gICAgICogdXNpbmcgW2BTYW1lVmFsdWVaZXJvYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtc2FtZXZhbHVlemVybylcbiAgICAgKiBmb3IgZXF1YWxpdHkgY29tcGFyaXNvbnMuIElmIGBmcm9tSW5kZXhgIGlzIG5lZ2F0aXZlLCBpdCBpcyB1c2VkIGFzIHRoZSBvZmZzZXRcbiAgICAgKiBmcm9tIHRoZSBlbmQgb2YgYGFycmF5YC4gSWYgYGFycmF5YCBpcyBzb3J0ZWQgcHJvdmlkaW5nIGB0cnVlYCBmb3IgYGZyb21JbmRleGBcbiAgICAgKiBwZXJmb3JtcyBhIGZhc3RlciBiaW5hcnkgc2VhcmNoLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHNlYXJjaC5cbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZWFyY2ggZm9yLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbnxudW1iZXJ9IFtmcm9tSW5kZXg9MF0gVGhlIGluZGV4IHRvIHNlYXJjaCBmcm9tIG9yIGB0cnVlYFxuICAgICAqICB0byBwZXJmb3JtIGEgYmluYXJ5IHNlYXJjaCBvbiBhIHNvcnRlZCBhcnJheS5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgbWF0Y2hlZCB2YWx1ZSwgZWxzZSBgLTFgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmluZGV4T2YoWzEsIDIsIDEsIDJdLCAyKTtcbiAgICAgKiAvLyA9PiAxXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBgZnJvbUluZGV4YFxuICAgICAqIF8uaW5kZXhPZihbMSwgMiwgMSwgMl0sIDIsIDIpO1xuICAgICAqIC8vID0+IDNcbiAgICAgKlxuICAgICAqIC8vIHBlcmZvcm1pbmcgYSBiaW5hcnkgc2VhcmNoXG4gICAgICogXy5pbmRleE9mKFsxLCAxLCAyLCAyXSwgMiwgdHJ1ZSk7XG4gICAgICogLy8gPT4gMlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGluZGV4T2YoYXJyYXksIHZhbHVlLCBmcm9tSW5kZXgpIHtcbiAgICAgIHZhciBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDA7XG4gICAgICBpZiAoIWxlbmd0aCkge1xuICAgICAgICByZXR1cm4gLTE7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGZyb21JbmRleCA9PSAnbnVtYmVyJykge1xuICAgICAgICBmcm9tSW5kZXggPSBmcm9tSW5kZXggPCAwID8gbmF0aXZlTWF4KGxlbmd0aCArIGZyb21JbmRleCwgMCkgOiBmcm9tSW5kZXg7XG4gICAgICB9IGVsc2UgaWYgKGZyb21JbmRleCkge1xuICAgICAgICB2YXIgaW5kZXggPSBiaW5hcnlJbmRleChhcnJheSwgdmFsdWUpO1xuICAgICAgICBpZiAoaW5kZXggPCBsZW5ndGggJiZcbiAgICAgICAgICAgICh2YWx1ZSA9PT0gdmFsdWUgPyAodmFsdWUgPT09IGFycmF5W2luZGV4XSkgOiAoYXJyYXlbaW5kZXhdICE9PSBhcnJheVtpbmRleF0pKSkge1xuICAgICAgICAgIHJldHVybiBpbmRleDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gLTE7XG4gICAgICB9XG4gICAgICByZXR1cm4gYmFzZUluZGV4T2YoYXJyYXksIHZhbHVlLCBmcm9tSW5kZXggfHwgMCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyBhbGwgYnV0IHRoZSBsYXN0IGVsZW1lbnQgb2YgYGFycmF5YC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBxdWVyeS5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHNsaWNlIG9mIGBhcnJheWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaW5pdGlhbChbMSwgMiwgM10pO1xuICAgICAqIC8vID0+IFsxLCAyXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGluaXRpYWwoYXJyYXkpIHtcbiAgICAgIHJldHVybiBkcm9wUmlnaHQoYXJyYXksIDEpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgdW5pcXVlIHZhbHVlcyB0aGF0IGFyZSBpbmNsdWRlZCBpbiBhbGwgb2YgdGhlIHByb3ZpZGVkXG4gICAgICogYXJyYXlzIHVzaW5nIFtgU2FtZVZhbHVlWmVyb2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLXNhbWV2YWx1ZXplcm8pXG4gICAgICogZm9yIGVxdWFsaXR5IGNvbXBhcmlzb25zLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHsuLi5BcnJheX0gW2FycmF5c10gVGhlIGFycmF5cyB0byBpbnNwZWN0LlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGFycmF5IG9mIHNoYXJlZCB2YWx1ZXMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBfLmludGVyc2VjdGlvbihbMSwgMl0sIFs0LCAyXSwgWzIsIDFdKTtcbiAgICAgKiAvLyA9PiBbMl1cbiAgICAgKi9cbiAgICB2YXIgaW50ZXJzZWN0aW9uID0gcmVzdFBhcmFtKGZ1bmN0aW9uKGFycmF5cykge1xuICAgICAgdmFyIG90aExlbmd0aCA9IGFycmF5cy5sZW5ndGgsXG4gICAgICAgICAgb3RoSW5kZXggPSBvdGhMZW5ndGgsXG4gICAgICAgICAgY2FjaGVzID0gQXJyYXkobGVuZ3RoKSxcbiAgICAgICAgICBpbmRleE9mID0gZ2V0SW5kZXhPZigpLFxuICAgICAgICAgIGlzQ29tbW9uID0gaW5kZXhPZiA9PSBiYXNlSW5kZXhPZixcbiAgICAgICAgICByZXN1bHQgPSBbXTtcblxuICAgICAgd2hpbGUgKG90aEluZGV4LS0pIHtcbiAgICAgICAgdmFyIHZhbHVlID0gYXJyYXlzW290aEluZGV4XSA9IGlzQXJyYXlMaWtlKHZhbHVlID0gYXJyYXlzW290aEluZGV4XSkgPyB2YWx1ZSA6IFtdO1xuICAgICAgICBjYWNoZXNbb3RoSW5kZXhdID0gKGlzQ29tbW9uICYmIHZhbHVlLmxlbmd0aCA+PSAxMjApID8gY3JlYXRlQ2FjaGUob3RoSW5kZXggJiYgdmFsdWUpIDogbnVsbDtcbiAgICAgIH1cbiAgICAgIHZhciBhcnJheSA9IGFycmF5c1swXSxcbiAgICAgICAgICBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMCxcbiAgICAgICAgICBzZWVuID0gY2FjaGVzWzBdO1xuXG4gICAgICBvdXRlcjpcbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHZhbHVlID0gYXJyYXlbaW5kZXhdO1xuICAgICAgICBpZiAoKHNlZW4gPyBjYWNoZUluZGV4T2Yoc2VlbiwgdmFsdWUpIDogaW5kZXhPZihyZXN1bHQsIHZhbHVlLCAwKSkgPCAwKSB7XG4gICAgICAgICAgdmFyIG90aEluZGV4ID0gb3RoTGVuZ3RoO1xuICAgICAgICAgIHdoaWxlICgtLW90aEluZGV4KSB7XG4gICAgICAgICAgICB2YXIgY2FjaGUgPSBjYWNoZXNbb3RoSW5kZXhdO1xuICAgICAgICAgICAgaWYgKChjYWNoZSA/IGNhY2hlSW5kZXhPZihjYWNoZSwgdmFsdWUpIDogaW5kZXhPZihhcnJheXNbb3RoSW5kZXhdLCB2YWx1ZSwgMCkpIDwgMCkge1xuICAgICAgICAgICAgICBjb250aW51ZSBvdXRlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHNlZW4pIHtcbiAgICAgICAgICAgIHNlZW4ucHVzaCh2YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJlc3VsdC5wdXNoKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGxhc3QgZWxlbWVudCBvZiBgYXJyYXlgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHF1ZXJ5LlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBsYXN0IGVsZW1lbnQgb2YgYGFycmF5YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5sYXN0KFsxLCAyLCAzXSk7XG4gICAgICogLy8gPT4gM1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGxhc3QoYXJyYXkpIHtcbiAgICAgIHZhciBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDA7XG4gICAgICByZXR1cm4gbGVuZ3RoID8gYXJyYXlbbGVuZ3RoIC0gMV0gOiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5pbmRleE9mYCBleGNlcHQgdGhhdCBpdCBpdGVyYXRlcyBvdmVyIGVsZW1lbnRzIG9mXG4gICAgICogYGFycmF5YCBmcm9tIHJpZ2h0IHRvIGxlZnQuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gc2VhcmNoLlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNlYXJjaCBmb3IuXG4gICAgICogQHBhcmFtIHtib29sZWFufG51bWJlcn0gW2Zyb21JbmRleD1hcnJheS5sZW5ndGgtMV0gVGhlIGluZGV4IHRvIHNlYXJjaCBmcm9tXG4gICAgICogIG9yIGB0cnVlYCB0byBwZXJmb3JtIGEgYmluYXJ5IHNlYXJjaCBvbiBhIHNvcnRlZCBhcnJheS5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgbWF0Y2hlZCB2YWx1ZSwgZWxzZSBgLTFgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmxhc3RJbmRleE9mKFsxLCAyLCAxLCAyXSwgMik7XG4gICAgICogLy8gPT4gM1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgYGZyb21JbmRleGBcbiAgICAgKiBfLmxhc3RJbmRleE9mKFsxLCAyLCAxLCAyXSwgMiwgMik7XG4gICAgICogLy8gPT4gMVxuICAgICAqXG4gICAgICogLy8gcGVyZm9ybWluZyBhIGJpbmFyeSBzZWFyY2hcbiAgICAgKiBfLmxhc3RJbmRleE9mKFsxLCAxLCAyLCAyXSwgMiwgdHJ1ZSk7XG4gICAgICogLy8gPT4gM1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGxhc3RJbmRleE9mKGFycmF5LCB2YWx1ZSwgZnJvbUluZGV4KSB7XG4gICAgICB2YXIgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwO1xuICAgICAgaWYgKCFsZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgfVxuICAgICAgdmFyIGluZGV4ID0gbGVuZ3RoO1xuICAgICAgaWYgKHR5cGVvZiBmcm9tSW5kZXggPT0gJ251bWJlcicpIHtcbiAgICAgICAgaW5kZXggPSAoZnJvbUluZGV4IDwgMCA/IG5hdGl2ZU1heChsZW5ndGggKyBmcm9tSW5kZXgsIDApIDogbmF0aXZlTWluKGZyb21JbmRleCB8fCAwLCBsZW5ndGggLSAxKSkgKyAxO1xuICAgICAgfSBlbHNlIGlmIChmcm9tSW5kZXgpIHtcbiAgICAgICAgaW5kZXggPSBiaW5hcnlJbmRleChhcnJheSwgdmFsdWUsIHRydWUpIC0gMTtcbiAgICAgICAgdmFyIG90aGVyID0gYXJyYXlbaW5kZXhdO1xuICAgICAgICBpZiAodmFsdWUgPT09IHZhbHVlID8gKHZhbHVlID09PSBvdGhlcikgOiAob3RoZXIgIT09IG90aGVyKSkge1xuICAgICAgICAgIHJldHVybiBpbmRleDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gLTE7XG4gICAgICB9XG4gICAgICBpZiAodmFsdWUgIT09IHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBpbmRleE9mTmFOKGFycmF5LCBpbmRleCwgdHJ1ZSk7XG4gICAgICB9XG4gICAgICB3aGlsZSAoaW5kZXgtLSkge1xuICAgICAgICBpZiAoYXJyYXlbaW5kZXhdID09PSB2YWx1ZSkge1xuICAgICAgICAgIHJldHVybiBpbmRleDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIC0xO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYWxsIHByb3ZpZGVkIHZhbHVlcyBmcm9tIGBhcnJheWAgdXNpbmdcbiAgICAgKiBbYFNhbWVWYWx1ZVplcm9gXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1zYW1ldmFsdWV6ZXJvKVxuICAgICAqIGZvciBlcXVhbGl0eSBjb21wYXJpc29ucy5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBVbmxpa2UgYF8ud2l0aG91dGAsIHRoaXMgbWV0aG9kIG11dGF0ZXMgYGFycmF5YC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBtb2RpZnkuXG4gICAgICogQHBhcmFtIHsuLi4qfSBbdmFsdWVzXSBUaGUgdmFsdWVzIHRvIHJlbW92ZS5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYGFycmF5YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGFycmF5ID0gWzEsIDIsIDMsIDEsIDIsIDNdO1xuICAgICAqXG4gICAgICogXy5wdWxsKGFycmF5LCAyLCAzKTtcbiAgICAgKiBjb25zb2xlLmxvZyhhcnJheSk7XG4gICAgICogLy8gPT4gWzEsIDFdXG4gICAgICovXG4gICAgZnVuY3Rpb24gcHVsbCgpIHtcbiAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzLFxuICAgICAgICAgIGFycmF5ID0gYXJnc1swXTtcblxuICAgICAgaWYgKCEoYXJyYXkgJiYgYXJyYXkubGVuZ3RoKSkge1xuICAgICAgICByZXR1cm4gYXJyYXk7XG4gICAgICB9XG4gICAgICB2YXIgaW5kZXggPSAwLFxuICAgICAgICAgIGluZGV4T2YgPSBnZXRJbmRleE9mKCksXG4gICAgICAgICAgbGVuZ3RoID0gYXJncy5sZW5ndGg7XG5cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHZhciBmcm9tSW5kZXggPSAwLFxuICAgICAgICAgICAgdmFsdWUgPSBhcmdzW2luZGV4XTtcblxuICAgICAgICB3aGlsZSAoKGZyb21JbmRleCA9IGluZGV4T2YoYXJyYXksIHZhbHVlLCBmcm9tSW5kZXgpKSA+IC0xKSB7XG4gICAgICAgICAgc3BsaWNlLmNhbGwoYXJyYXksIGZyb21JbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBhcnJheTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGVsZW1lbnRzIGZyb20gYGFycmF5YCBjb3JyZXNwb25kaW5nIHRvIHRoZSBnaXZlbiBpbmRleGVzIGFuZCByZXR1cm5zXG4gICAgICogYW4gYXJyYXkgb2YgdGhlIHJlbW92ZWQgZWxlbWVudHMuIEluZGV4ZXMgbWF5IGJlIHNwZWNpZmllZCBhcyBhbiBhcnJheSBvZlxuICAgICAqIGluZGV4ZXMgb3IgYXMgaW5kaXZpZHVhbCBhcmd1bWVudHMuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVW5saWtlIGBfLmF0YCwgdGhpcyBtZXRob2QgbXV0YXRlcyBgYXJyYXlgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIG1vZGlmeS5cbiAgICAgKiBAcGFyYW0gey4uLihudW1iZXJ8bnVtYmVyW10pfSBbaW5kZXhlc10gVGhlIGluZGV4ZXMgb2YgZWxlbWVudHMgdG8gcmVtb3ZlLFxuICAgICAqICBzcGVjaWZpZWQgYXMgaW5kaXZpZHVhbCBpbmRleGVzIG9yIGFycmF5cyBvZiBpbmRleGVzLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGFycmF5IG9mIHJlbW92ZWQgZWxlbWVudHMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBhcnJheSA9IFs1LCAxMCwgMTUsIDIwXTtcbiAgICAgKiB2YXIgZXZlbnMgPSBfLnB1bGxBdChhcnJheSwgMSwgMyk7XG4gICAgICpcbiAgICAgKiBjb25zb2xlLmxvZyhhcnJheSk7XG4gICAgICogLy8gPT4gWzUsIDE1XVxuICAgICAqXG4gICAgICogY29uc29sZS5sb2coZXZlbnMpO1xuICAgICAqIC8vID0+IFsxMCwgMjBdXG4gICAgICovXG4gICAgdmFyIHB1bGxBdCA9IHJlc3RQYXJhbShmdW5jdGlvbihhcnJheSwgaW5kZXhlcykge1xuICAgICAgaW5kZXhlcyA9IGJhc2VGbGF0dGVuKGluZGV4ZXMpO1xuXG4gICAgICB2YXIgcmVzdWx0ID0gYmFzZUF0KGFycmF5LCBpbmRleGVzKTtcbiAgICAgIGJhc2VQdWxsQXQoYXJyYXksIGluZGV4ZXMuc29ydChiYXNlQ29tcGFyZUFzY2VuZGluZykpO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYWxsIGVsZW1lbnRzIGZyb20gYGFycmF5YCB0aGF0IGBwcmVkaWNhdGVgIHJldHVybnMgdHJ1dGh5IGZvclxuICAgICAqIGFuZCByZXR1cm5zIGFuIGFycmF5IG9mIHRoZSByZW1vdmVkIGVsZW1lbnRzLiBUaGUgcHJlZGljYXRlIGlzIGJvdW5kIHRvXG4gICAgICogYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdGhyZWUgYXJndW1lbnRzOiAodmFsdWUsIGluZGV4LCBhcnJheSkuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBwcmVkaWNhdGVgIHRoZSBjcmVhdGVkIGBfLnByb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYSB2YWx1ZSBpcyBhbHNvIHByb3ZpZGVkIGZvciBgdGhpc0FyZ2AgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc1Byb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgYSBtYXRjaGluZyBwcm9wZXJ0eVxuICAgICAqIHZhbHVlLCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBwcmVkaWNhdGVgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNgIHN0eWxlXG4gICAgICogY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW5cbiAgICAgKiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBVbmxpa2UgYF8uZmlsdGVyYCwgdGhpcyBtZXRob2QgbXV0YXRlcyBgYXJyYXlgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIG1vZGlmeS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtwcmVkaWNhdGU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWRcbiAgICAgKiAgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYHByZWRpY2F0ZWAuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgYXJyYXkgb2YgcmVtb3ZlZCBlbGVtZW50cy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGFycmF5ID0gWzEsIDIsIDMsIDRdO1xuICAgICAqIHZhciBldmVucyA9IF8ucmVtb3ZlKGFycmF5LCBmdW5jdGlvbihuKSB7XG4gICAgICogICByZXR1cm4gbiAlIDIgPT0gMDtcbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIGNvbnNvbGUubG9nKGFycmF5KTtcbiAgICAgKiAvLyA9PiBbMSwgM11cbiAgICAgKlxuICAgICAqIGNvbnNvbGUubG9nKGV2ZW5zKTtcbiAgICAgKiAvLyA9PiBbMiwgNF1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZW1vdmUoYXJyYXksIHByZWRpY2F0ZSwgdGhpc0FyZykge1xuICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgaWYgKCEoYXJyYXkgJiYgYXJyYXkubGVuZ3RoKSkge1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgaW5kZXhlcyA9IFtdLFxuICAgICAgICAgIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcblxuICAgICAgcHJlZGljYXRlID0gZ2V0Q2FsbGJhY2socHJlZGljYXRlLCB0aGlzQXJnLCAzKTtcbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IGFycmF5W2luZGV4XTtcbiAgICAgICAgaWYgKHByZWRpY2F0ZSh2YWx1ZSwgaW5kZXgsIGFycmF5KSkge1xuICAgICAgICAgIHJlc3VsdC5wdXNoKHZhbHVlKTtcbiAgICAgICAgICBpbmRleGVzLnB1c2goaW5kZXgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBiYXNlUHVsbEF0KGFycmF5LCBpbmRleGVzKTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyBhbGwgYnV0IHRoZSBmaXJzdCBlbGVtZW50IG9mIGBhcnJheWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAYWxpYXMgdGFpbFxuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBxdWVyeS5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHNsaWNlIG9mIGBhcnJheWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ucmVzdChbMSwgMiwgM10pO1xuICAgICAqIC8vID0+IFsyLCAzXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlc3QoYXJyYXkpIHtcbiAgICAgIHJldHVybiBkcm9wKGFycmF5LCAxKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgc2xpY2Ugb2YgYGFycmF5YCBmcm9tIGBzdGFydGAgdXAgdG8sIGJ1dCBub3QgaW5jbHVkaW5nLCBgZW5kYC5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBpcyB1c2VkIGluc3RlYWQgb2YgYEFycmF5I3NsaWNlYCB0byBzdXBwb3J0IG5vZGVcbiAgICAgKiBsaXN0cyBpbiBJRSA8IDkgYW5kIHRvIGVuc3VyZSBkZW5zZSBhcnJheXMgYXJlIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHNsaWNlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbc3RhcnQ9MF0gVGhlIHN0YXJ0IHBvc2l0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbZW5kPWFycmF5Lmxlbmd0aF0gVGhlIGVuZCBwb3NpdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHNsaWNlIG9mIGBhcnJheWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gc2xpY2UoYXJyYXksIHN0YXJ0LCBlbmQpIHtcbiAgICAgIHZhciBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDA7XG4gICAgICBpZiAoIWxlbmd0aCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgICBpZiAoZW5kICYmIHR5cGVvZiBlbmQgIT0gJ251bWJlcicgJiYgaXNJdGVyYXRlZUNhbGwoYXJyYXksIHN0YXJ0LCBlbmQpKSB7XG4gICAgICAgIHN0YXJ0ID0gMDtcbiAgICAgICAgZW5kID0gbGVuZ3RoO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGJhc2VTbGljZShhcnJheSwgc3RhcnQsIGVuZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXNlcyBhIGJpbmFyeSBzZWFyY2ggdG8gZGV0ZXJtaW5lIHRoZSBsb3dlc3QgaW5kZXggYXQgd2hpY2ggYHZhbHVlYCBzaG91bGRcbiAgICAgKiBiZSBpbnNlcnRlZCBpbnRvIGBhcnJheWAgaW4gb3JkZXIgdG8gbWFpbnRhaW4gaXRzIHNvcnQgb3JkZXIuIElmIGFuIGl0ZXJhdGVlXG4gICAgICogZnVuY3Rpb24gaXMgcHJvdmlkZWQgaXQgaXMgaW52b2tlZCBmb3IgYHZhbHVlYCBhbmQgZWFjaCBlbGVtZW50IG9mIGBhcnJheWBcbiAgICAgKiB0byBjb21wdXRlIHRoZWlyIHNvcnQgcmFua2luZy4gVGhlIGl0ZXJhdGVlIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmRcbiAgICAgKiBpbnZva2VkIHdpdGggb25lIGFyZ3VtZW50OyAodmFsdWUpLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgaXRlcmF0ZWVgIHRoZSBjcmVhdGVkIGBfLnByb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYSB2YWx1ZSBpcyBhbHNvIHByb3ZpZGVkIGZvciBgdGhpc0FyZ2AgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc1Byb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgYSBtYXRjaGluZyBwcm9wZXJ0eVxuICAgICAqIHZhbHVlLCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBpdGVyYXRlZWAgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc2Agc3R5bGVcbiAgICAgKiBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlblxuICAgICAqIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIHNvcnRlZCBhcnJheSB0byBpbnNwZWN0LlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGV2YWx1YXRlLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2l0ZXJhdGVlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkXG4gICAgICogIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBpdGVyYXRlZWAuXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggYXQgd2hpY2ggYHZhbHVlYCBzaG91bGQgYmUgaW5zZXJ0ZWRcbiAgICAgKiAgaW50byBgYXJyYXlgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnNvcnRlZEluZGV4KFszMCwgNTBdLCA0MCk7XG4gICAgICogLy8gPT4gMVxuICAgICAqXG4gICAgICogXy5zb3J0ZWRJbmRleChbNCwgNCwgNSwgNV0sIDUpO1xuICAgICAqIC8vID0+IDJcbiAgICAgKlxuICAgICAqIHZhciBkaWN0ID0geyAnZGF0YSc6IHsgJ3RoaXJ0eSc6IDMwLCAnZm9ydHknOiA0MCwgJ2ZpZnR5JzogNTAgfSB9O1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgYW4gaXRlcmF0ZWUgZnVuY3Rpb25cbiAgICAgKiBfLnNvcnRlZEluZGV4KFsndGhpcnR5JywgJ2ZpZnR5J10sICdmb3J0eScsIGZ1bmN0aW9uKHdvcmQpIHtcbiAgICAgKiAgIHJldHVybiB0aGlzLmRhdGFbd29yZF07XG4gICAgICogfSwgZGljdCk7XG4gICAgICogLy8gPT4gMVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLnByb3BlcnR5YCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLnNvcnRlZEluZGV4KFt7ICd4JzogMzAgfSwgeyAneCc6IDUwIH1dLCB7ICd4JzogNDAgfSwgJ3gnKTtcbiAgICAgKiAvLyA9PiAxXG4gICAgICovXG4gICAgdmFyIHNvcnRlZEluZGV4ID0gY3JlYXRlU29ydGVkSW5kZXgoKTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uc29ydGVkSW5kZXhgIGV4Y2VwdCB0aGF0IGl0IHJldHVybnMgdGhlIGhpZ2hlc3RcbiAgICAgKiBpbmRleCBhdCB3aGljaCBgdmFsdWVgIHNob3VsZCBiZSBpbnNlcnRlZCBpbnRvIGBhcnJheWAgaW4gb3JkZXIgdG9cbiAgICAgKiBtYWludGFpbiBpdHMgc29ydCBvcmRlci5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBzb3J0ZWQgYXJyYXkgdG8gaW5zcGVjdC5cbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBldmFsdWF0ZS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtpdGVyYXRlZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZFxuICAgICAqICBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgaXRlcmF0ZWVgLlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IGF0IHdoaWNoIGB2YWx1ZWAgc2hvdWxkIGJlIGluc2VydGVkXG4gICAgICogIGludG8gYGFycmF5YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5zb3J0ZWRMYXN0SW5kZXgoWzQsIDQsIDUsIDVdLCA1KTtcbiAgICAgKiAvLyA9PiA0XG4gICAgICovXG4gICAgdmFyIHNvcnRlZExhc3RJbmRleCA9IGNyZWF0ZVNvcnRlZEluZGV4KHRydWUpO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHNsaWNlIG9mIGBhcnJheWAgd2l0aCBgbmAgZWxlbWVudHMgdGFrZW4gZnJvbSB0aGUgYmVnaW5uaW5nLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHF1ZXJ5LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbj0xXSBUaGUgbnVtYmVyIG9mIGVsZW1lbnRzIHRvIHRha2UuXG4gICAgICogQHBhcmFtLSB7T2JqZWN0fSBbZ3VhcmRdIEVuYWJsZXMgdXNlIGFzIGEgY2FsbGJhY2sgZm9yIGZ1bmN0aW9ucyBsaWtlIGBfLm1hcGAuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBzbGljZSBvZiBgYXJyYXlgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnRha2UoWzEsIDIsIDNdKTtcbiAgICAgKiAvLyA9PiBbMV1cbiAgICAgKlxuICAgICAqIF8udGFrZShbMSwgMiwgM10sIDIpO1xuICAgICAqIC8vID0+IFsxLCAyXVxuICAgICAqXG4gICAgICogXy50YWtlKFsxLCAyLCAzXSwgNSk7XG4gICAgICogLy8gPT4gWzEsIDIsIDNdXG4gICAgICpcbiAgICAgKiBfLnRha2UoWzEsIDIsIDNdLCAwKTtcbiAgICAgKiAvLyA9PiBbXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHRha2UoYXJyYXksIG4sIGd1YXJkKSB7XG4gICAgICB2YXIgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwO1xuICAgICAgaWYgKCFsZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgICAgaWYgKGd1YXJkID8gaXNJdGVyYXRlZUNhbGwoYXJyYXksIG4sIGd1YXJkKSA6IG4gPT0gbnVsbCkge1xuICAgICAgICBuID0gMTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBiYXNlU2xpY2UoYXJyYXksIDAsIG4gPCAwID8gMCA6IG4pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBzbGljZSBvZiBgYXJyYXlgIHdpdGggYG5gIGVsZW1lbnRzIHRha2VuIGZyb20gdGhlIGVuZC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBxdWVyeS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW249MV0gVGhlIG51bWJlciBvZiBlbGVtZW50cyB0byB0YWtlLlxuICAgICAqIEBwYXJhbS0ge09iamVjdH0gW2d1YXJkXSBFbmFibGVzIHVzZSBhcyBhIGNhbGxiYWNrIGZvciBmdW5jdGlvbnMgbGlrZSBgXy5tYXBgLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgc2xpY2Ugb2YgYGFycmF5YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy50YWtlUmlnaHQoWzEsIDIsIDNdKTtcbiAgICAgKiAvLyA9PiBbM11cbiAgICAgKlxuICAgICAqIF8udGFrZVJpZ2h0KFsxLCAyLCAzXSwgMik7XG4gICAgICogLy8gPT4gWzIsIDNdXG4gICAgICpcbiAgICAgKiBfLnRha2VSaWdodChbMSwgMiwgM10sIDUpO1xuICAgICAqIC8vID0+IFsxLCAyLCAzXVxuICAgICAqXG4gICAgICogXy50YWtlUmlnaHQoWzEsIDIsIDNdLCAwKTtcbiAgICAgKiAvLyA9PiBbXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHRha2VSaWdodChhcnJheSwgbiwgZ3VhcmQpIHtcbiAgICAgIHZhciBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDA7XG4gICAgICBpZiAoIWxlbmd0aCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgICBpZiAoZ3VhcmQgPyBpc0l0ZXJhdGVlQ2FsbChhcnJheSwgbiwgZ3VhcmQpIDogbiA9PSBudWxsKSB7XG4gICAgICAgIG4gPSAxO1xuICAgICAgfVxuICAgICAgbiA9IGxlbmd0aCAtICgrbiB8fCAwKTtcbiAgICAgIHJldHVybiBiYXNlU2xpY2UoYXJyYXksIG4gPCAwID8gMCA6IG4pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBzbGljZSBvZiBgYXJyYXlgIHdpdGggZWxlbWVudHMgdGFrZW4gZnJvbSB0aGUgZW5kLiBFbGVtZW50cyBhcmVcbiAgICAgKiB0YWtlbiB1bnRpbCBgcHJlZGljYXRlYCByZXR1cm5zIGZhbHNleS4gVGhlIHByZWRpY2F0ZSBpcyBib3VuZCB0byBgdGhpc0FyZ2BcbiAgICAgKiBhbmQgaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50czogKHZhbHVlLCBpbmRleCwgYXJyYXkpLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgcHJlZGljYXRlYCB0aGUgY3JlYXRlZCBgXy5wcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGEgdmFsdWUgaXMgYWxzbyBwcm92aWRlZCBmb3IgYHRoaXNBcmdgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNQcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIGEgbWF0Y2hpbmcgcHJvcGVydHlcbiAgICAgKiB2YWx1ZSwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgcHJlZGljYXRlYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzYCBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuXG4gICAgICogb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gcXVlcnkuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbcHJlZGljYXRlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkXG4gICAgICogIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBwcmVkaWNhdGVgLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgc2xpY2Ugb2YgYGFycmF5YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy50YWtlUmlnaHRXaGlsZShbMSwgMiwgM10sIGZ1bmN0aW9uKG4pIHtcbiAgICAgKiAgIHJldHVybiBuID4gMTtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiBbMiwgM11cbiAgICAgKlxuICAgICAqIHZhciB1c2VycyA9IFtcbiAgICAgKiAgIHsgJ3VzZXInOiAnYmFybmV5JywgICdhY3RpdmUnOiB0cnVlIH0sXG4gICAgICogICB7ICd1c2VyJzogJ2ZyZWQnLCAgICAnYWN0aXZlJzogZmFsc2UgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAncGViYmxlcycsICdhY3RpdmUnOiBmYWxzZSB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5tYXRjaGVzYCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLnBsdWNrKF8udGFrZVJpZ2h0V2hpbGUodXNlcnMsIHsgJ3VzZXInOiAncGViYmxlcycsICdhY3RpdmUnOiBmYWxzZSB9KSwgJ3VzZXInKTtcbiAgICAgKiAvLyA9PiBbJ3BlYmJsZXMnXVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLm1hdGNoZXNQcm9wZXJ0eWAgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5wbHVjayhfLnRha2VSaWdodFdoaWxlKHVzZXJzLCAnYWN0aXZlJywgZmFsc2UpLCAndXNlcicpO1xuICAgICAqIC8vID0+IFsnZnJlZCcsICdwZWJibGVzJ11cbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5wcm9wZXJ0eWAgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5wbHVjayhfLnRha2VSaWdodFdoaWxlKHVzZXJzLCAnYWN0aXZlJyksICd1c2VyJyk7XG4gICAgICogLy8gPT4gW11cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB0YWtlUmlnaHRXaGlsZShhcnJheSwgcHJlZGljYXRlLCB0aGlzQXJnKSB7XG4gICAgICByZXR1cm4gKGFycmF5ICYmIGFycmF5Lmxlbmd0aClcbiAgICAgICAgPyBiYXNlV2hpbGUoYXJyYXksIGdldENhbGxiYWNrKHByZWRpY2F0ZSwgdGhpc0FyZywgMyksIGZhbHNlLCB0cnVlKVxuICAgICAgICA6IFtdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBzbGljZSBvZiBgYXJyYXlgIHdpdGggZWxlbWVudHMgdGFrZW4gZnJvbSB0aGUgYmVnaW5uaW5nLiBFbGVtZW50c1xuICAgICAqIGFyZSB0YWtlbiB1bnRpbCBgcHJlZGljYXRlYCByZXR1cm5zIGZhbHNleS4gVGhlIHByZWRpY2F0ZSBpcyBib3VuZCB0b1xuICAgICAqIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50czogKHZhbHVlLCBpbmRleCwgYXJyYXkpLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgcHJlZGljYXRlYCB0aGUgY3JlYXRlZCBgXy5wcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGEgdmFsdWUgaXMgYWxzbyBwcm92aWRlZCBmb3IgYHRoaXNBcmdgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNQcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIGEgbWF0Y2hpbmcgcHJvcGVydHlcbiAgICAgKiB2YWx1ZSwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgcHJlZGljYXRlYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzYCBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuXG4gICAgICogb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gcXVlcnkuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbcHJlZGljYXRlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkXG4gICAgICogIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBwcmVkaWNhdGVgLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgc2xpY2Ugb2YgYGFycmF5YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy50YWtlV2hpbGUoWzEsIDIsIDNdLCBmdW5jdGlvbihuKSB7XG4gICAgICogICByZXR1cm4gbiA8IDM7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gWzEsIDJdXG4gICAgICpcbiAgICAgKiB2YXIgdXNlcnMgPSBbXG4gICAgICogICB7ICd1c2VyJzogJ2Jhcm5leScsICAnYWN0aXZlJzogZmFsc2UgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAnZnJlZCcsICAgICdhY3RpdmUnOiBmYWxzZX0sXG4gICAgICogICB7ICd1c2VyJzogJ3BlYmJsZXMnLCAnYWN0aXZlJzogdHJ1ZSB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5tYXRjaGVzYCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLnBsdWNrKF8udGFrZVdoaWxlKHVzZXJzLCB7ICd1c2VyJzogJ2Jhcm5leScsICdhY3RpdmUnOiBmYWxzZSB9KSwgJ3VzZXInKTtcbiAgICAgKiAvLyA9PiBbJ2Jhcm5leSddXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ubWF0Y2hlc1Byb3BlcnR5YCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLnBsdWNrKF8udGFrZVdoaWxlKHVzZXJzLCAnYWN0aXZlJywgZmFsc2UpLCAndXNlcicpO1xuICAgICAqIC8vID0+IFsnYmFybmV5JywgJ2ZyZWQnXVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLnByb3BlcnR5YCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLnBsdWNrKF8udGFrZVdoaWxlKHVzZXJzLCAnYWN0aXZlJyksICd1c2VyJyk7XG4gICAgICogLy8gPT4gW11cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB0YWtlV2hpbGUoYXJyYXksIHByZWRpY2F0ZSwgdGhpc0FyZykge1xuICAgICAgcmV0dXJuIChhcnJheSAmJiBhcnJheS5sZW5ndGgpXG4gICAgICAgID8gYmFzZVdoaWxlKGFycmF5LCBnZXRDYWxsYmFjayhwcmVkaWNhdGUsIHRoaXNBcmcsIDMpKVxuICAgICAgICA6IFtdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgdW5pcXVlIHZhbHVlcywgaW4gb3JkZXIsIGZyb20gYWxsIG9mIHRoZSBwcm92aWRlZCBhcnJheXNcbiAgICAgKiB1c2luZyBbYFNhbWVWYWx1ZVplcm9gXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1zYW1ldmFsdWV6ZXJvKVxuICAgICAqIGZvciBlcXVhbGl0eSBjb21wYXJpc29ucy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7Li4uQXJyYXl9IFthcnJheXNdIFRoZSBhcnJheXMgdG8gaW5zcGVjdC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBhcnJheSBvZiBjb21iaW5lZCB2YWx1ZXMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8udW5pb24oWzEsIDJdLCBbNCwgMl0sIFsyLCAxXSk7XG4gICAgICogLy8gPT4gWzEsIDIsIDRdXG4gICAgICovXG4gICAgdmFyIHVuaW9uID0gcmVzdFBhcmFtKGZ1bmN0aW9uKGFycmF5cykge1xuICAgICAgcmV0dXJuIGJhc2VVbmlxKGJhc2VGbGF0dGVuKGFycmF5cywgZmFsc2UsIHRydWUpKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBkdXBsaWNhdGUtZnJlZSB2ZXJzaW9uIG9mIGFuIGFycmF5LCB1c2luZ1xuICAgICAqIFtgU2FtZVZhbHVlWmVyb2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLXNhbWV2YWx1ZXplcm8pXG4gICAgICogZm9yIGVxdWFsaXR5IGNvbXBhcmlzb25zLCBpbiB3aGljaCBvbmx5IHRoZSBmaXJzdCBvY2N1cmVuY2Ugb2YgZWFjaCBlbGVtZW50XG4gICAgICogaXMga2VwdC4gUHJvdmlkaW5nIGB0cnVlYCBmb3IgYGlzU29ydGVkYCBwZXJmb3JtcyBhIGZhc3RlciBzZWFyY2ggYWxnb3JpdGhtXG4gICAgICogZm9yIHNvcnRlZCBhcnJheXMuIElmIGFuIGl0ZXJhdGVlIGZ1bmN0aW9uIGlzIHByb3ZpZGVkIGl0IGlzIGludm9rZWQgZm9yXG4gICAgICogZWFjaCBlbGVtZW50IGluIHRoZSBhcnJheSB0byBnZW5lcmF0ZSB0aGUgY3JpdGVyaW9uIGJ5IHdoaWNoIHVuaXF1ZW5lc3NcbiAgICAgKiBpcyBjb21wdXRlZC4gVGhlIGBpdGVyYXRlZWAgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdGhyZWVcbiAgICAgKiBhcmd1bWVudHM6ICh2YWx1ZSwgaW5kZXgsIGFycmF5KS5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGl0ZXJhdGVlYCB0aGUgY3JlYXRlZCBgXy5wcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGEgdmFsdWUgaXMgYWxzbyBwcm92aWRlZCBmb3IgYHRoaXNBcmdgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNQcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIGEgbWF0Y2hpbmcgcHJvcGVydHlcbiAgICAgKiB2YWx1ZSwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgaXRlcmF0ZWVgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNgIHN0eWxlXG4gICAgICogY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW5cbiAgICAgKiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBhbGlhcyB1bmlxdWVcbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaW5zcGVjdC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc1NvcnRlZF0gU3BlY2lmeSB0aGUgYXJyYXkgaXMgc29ydGVkLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2l0ZXJhdGVlXSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgaXRlcmF0ZWVgLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGR1cGxpY2F0ZS12YWx1ZS1mcmVlIGFycmF5LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnVuaXEoWzIsIDEsIDJdKTtcbiAgICAgKiAvLyA9PiBbMiwgMV1cbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIGBpc1NvcnRlZGBcbiAgICAgKiBfLnVuaXEoWzEsIDEsIDJdLCB0cnVlKTtcbiAgICAgKiAvLyA9PiBbMSwgMl1cbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIGFuIGl0ZXJhdGVlIGZ1bmN0aW9uXG4gICAgICogXy51bmlxKFsxLCAyLjUsIDEuNSwgMl0sIGZ1bmN0aW9uKG4pIHtcbiAgICAgKiAgIHJldHVybiB0aGlzLmZsb29yKG4pO1xuICAgICAqIH0sIE1hdGgpO1xuICAgICAqIC8vID0+IFsxLCAyLjVdXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ucHJvcGVydHlgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8udW5pcShbeyAneCc6IDEgfSwgeyAneCc6IDIgfSwgeyAneCc6IDEgfV0sICd4Jyk7XG4gICAgICogLy8gPT4gW3sgJ3gnOiAxIH0sIHsgJ3gnOiAyIH1dXG4gICAgICovXG4gICAgZnVuY3Rpb24gdW5pcShhcnJheSwgaXNTb3J0ZWQsIGl0ZXJhdGVlLCB0aGlzQXJnKSB7XG4gICAgICB2YXIgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwO1xuICAgICAgaWYgKCFsZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgICAgaWYgKGlzU29ydGVkICE9IG51bGwgJiYgdHlwZW9mIGlzU29ydGVkICE9ICdib29sZWFuJykge1xuICAgICAgICB0aGlzQXJnID0gaXRlcmF0ZWU7XG4gICAgICAgIGl0ZXJhdGVlID0gaXNJdGVyYXRlZUNhbGwoYXJyYXksIGlzU29ydGVkLCB0aGlzQXJnKSA/IHVuZGVmaW5lZCA6IGlzU29ydGVkO1xuICAgICAgICBpc1NvcnRlZCA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgdmFyIGNhbGxiYWNrID0gZ2V0Q2FsbGJhY2soKTtcbiAgICAgIGlmICghKGl0ZXJhdGVlID09IG51bGwgJiYgY2FsbGJhY2sgPT09IGJhc2VDYWxsYmFjaykpIHtcbiAgICAgICAgaXRlcmF0ZWUgPSBjYWxsYmFjayhpdGVyYXRlZSwgdGhpc0FyZywgMyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gKGlzU29ydGVkICYmIGdldEluZGV4T2YoKSA9PSBiYXNlSW5kZXhPZilcbiAgICAgICAgPyBzb3J0ZWRVbmlxKGFycmF5LCBpdGVyYXRlZSlcbiAgICAgICAgOiBiYXNlVW5pcShhcnJheSwgaXRlcmF0ZWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uemlwYCBleGNlcHQgdGhhdCBpdCBhY2NlcHRzIGFuIGFycmF5IG9mIGdyb3VwZWRcbiAgICAgKiBlbGVtZW50cyBhbmQgY3JlYXRlcyBhbiBhcnJheSByZWdyb3VwaW5nIHRoZSBlbGVtZW50cyB0byB0aGVpciBwcmUtemlwXG4gICAgICogY29uZmlndXJhdGlvbi5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSBvZiBncm91cGVkIGVsZW1lbnRzIHRvIHByb2Nlc3MuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgYXJyYXkgb2YgcmVncm91cGVkIGVsZW1lbnRzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgemlwcGVkID0gXy56aXAoWydmcmVkJywgJ2Jhcm5leSddLCBbMzAsIDQwXSwgW3RydWUsIGZhbHNlXSk7XG4gICAgICogLy8gPT4gW1snZnJlZCcsIDMwLCB0cnVlXSwgWydiYXJuZXknLCA0MCwgZmFsc2VdXVxuICAgICAqXG4gICAgICogXy51bnppcCh6aXBwZWQpO1xuICAgICAqIC8vID0+IFtbJ2ZyZWQnLCAnYmFybmV5J10sIFszMCwgNDBdLCBbdHJ1ZSwgZmFsc2VdXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHVuemlwKGFycmF5KSB7XG4gICAgICBpZiAoIShhcnJheSAmJiBhcnJheS5sZW5ndGgpKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IDA7XG5cbiAgICAgIGFycmF5ID0gYXJyYXlGaWx0ZXIoYXJyYXksIGZ1bmN0aW9uKGdyb3VwKSB7XG4gICAgICAgIGlmIChpc0FycmF5TGlrZShncm91cCkpIHtcbiAgICAgICAgICBsZW5ndGggPSBuYXRpdmVNYXgoZ3JvdXAubGVuZ3RoLCBsZW5ndGgpO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHZhciByZXN1bHQgPSBBcnJheShsZW5ndGgpO1xuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgcmVzdWx0W2luZGV4XSA9IGFycmF5TWFwKGFycmF5LCBiYXNlUHJvcGVydHkoaW5kZXgpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy51bnppcGAgZXhjZXB0IHRoYXQgaXQgYWNjZXB0cyBhbiBpdGVyYXRlZSB0byBzcGVjaWZ5XG4gICAgICogaG93IHJlZ3JvdXBlZCB2YWx1ZXMgc2hvdWxkIGJlIGNvbWJpbmVkLiBUaGUgYGl0ZXJhdGVlYCBpcyBib3VuZCB0byBgdGhpc0FyZ2BcbiAgICAgKiBhbmQgaW52b2tlZCB3aXRoIGZvdXIgYXJndW1lbnRzOiAoYWNjdW11bGF0b3IsIHZhbHVlLCBpbmRleCwgZ3JvdXApLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IG9mIGdyb3VwZWQgZWxlbWVudHMgdG8gcHJvY2Vzcy5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbaXRlcmF0ZWVdIFRoZSBmdW5jdGlvbiB0byBjb21iaW5lIHJlZ3JvdXBlZCB2YWx1ZXMuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBpdGVyYXRlZWAuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgYXJyYXkgb2YgcmVncm91cGVkIGVsZW1lbnRzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgemlwcGVkID0gXy56aXAoWzEsIDJdLCBbMTAsIDIwXSwgWzEwMCwgMjAwXSk7XG4gICAgICogLy8gPT4gW1sxLCAxMCwgMTAwXSwgWzIsIDIwLCAyMDBdXVxuICAgICAqXG4gICAgICogXy51bnppcFdpdGgoemlwcGVkLCBfLmFkZCk7XG4gICAgICogLy8gPT4gWzMsIDMwLCAzMDBdXG4gICAgICovXG4gICAgZnVuY3Rpb24gdW56aXBXaXRoKGFycmF5LCBpdGVyYXRlZSwgdGhpc0FyZykge1xuICAgICAgdmFyIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMDtcbiAgICAgIGlmICghbGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICAgIHZhciByZXN1bHQgPSB1bnppcChhcnJheSk7XG4gICAgICBpZiAoaXRlcmF0ZWUgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgICAgaXRlcmF0ZWUgPSBiaW5kQ2FsbGJhY2soaXRlcmF0ZWUsIHRoaXNBcmcsIDQpO1xuICAgICAgcmV0dXJuIGFycmF5TWFwKHJlc3VsdCwgZnVuY3Rpb24oZ3JvdXApIHtcbiAgICAgICAgcmV0dXJuIGFycmF5UmVkdWNlKGdyb3VwLCBpdGVyYXRlZSwgdW5kZWZpbmVkLCB0cnVlKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgZXhjbHVkaW5nIGFsbCBwcm92aWRlZCB2YWx1ZXMgdXNpbmdcbiAgICAgKiBbYFNhbWVWYWx1ZVplcm9gXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1zYW1ldmFsdWV6ZXJvKVxuICAgICAqIGZvciBlcXVhbGl0eSBjb21wYXJpc29ucy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBmaWx0ZXIuXG4gICAgICogQHBhcmFtIHsuLi4qfSBbdmFsdWVzXSBUaGUgdmFsdWVzIHRvIGV4Y2x1ZGUuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgYXJyYXkgb2YgZmlsdGVyZWQgdmFsdWVzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLndpdGhvdXQoWzEsIDIsIDEsIDNdLCAxLCAyKTtcbiAgICAgKiAvLyA9PiBbM11cbiAgICAgKi9cbiAgICB2YXIgd2l0aG91dCA9IHJlc3RQYXJhbShmdW5jdGlvbihhcnJheSwgdmFsdWVzKSB7XG4gICAgICByZXR1cm4gaXNBcnJheUxpa2UoYXJyYXkpXG4gICAgICAgID8gYmFzZURpZmZlcmVuY2UoYXJyYXksIHZhbHVlcylcbiAgICAgICAgOiBbXTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgdW5pcXVlIHZhbHVlcyB0aGF0IGlzIHRoZSBbc3ltbWV0cmljIGRpZmZlcmVuY2VdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1N5bW1ldHJpY19kaWZmZXJlbmNlKVxuICAgICAqIG9mIHRoZSBwcm92aWRlZCBhcnJheXMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0gey4uLkFycmF5fSBbYXJyYXlzXSBUaGUgYXJyYXlzIHRvIGluc3BlY3QuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgYXJyYXkgb2YgdmFsdWVzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnhvcihbMSwgMl0sIFs0LCAyXSk7XG4gICAgICogLy8gPT4gWzEsIDRdXG4gICAgICovXG4gICAgZnVuY3Rpb24geG9yKCkge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aDtcblxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgdmFyIGFycmF5ID0gYXJndW1lbnRzW2luZGV4XTtcbiAgICAgICAgaWYgKGlzQXJyYXlMaWtlKGFycmF5KSkge1xuICAgICAgICAgIHZhciByZXN1bHQgPSByZXN1bHRcbiAgICAgICAgICAgID8gYXJyYXlQdXNoKGJhc2VEaWZmZXJlbmNlKHJlc3VsdCwgYXJyYXkpLCBiYXNlRGlmZmVyZW5jZShhcnJheSwgcmVzdWx0KSlcbiAgICAgICAgICAgIDogYXJyYXk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQgPyBiYXNlVW5pcShyZXN1bHQpIDogW107XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhcnJheSBvZiBncm91cGVkIGVsZW1lbnRzLCB0aGUgZmlyc3Qgb2Ygd2hpY2ggY29udGFpbnMgdGhlIGZpcnN0XG4gICAgICogZWxlbWVudHMgb2YgdGhlIGdpdmVuIGFycmF5cywgdGhlIHNlY29uZCBvZiB3aGljaCBjb250YWlucyB0aGUgc2Vjb25kIGVsZW1lbnRzXG4gICAgICogb2YgdGhlIGdpdmVuIGFycmF5cywgYW5kIHNvIG9uLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHsuLi5BcnJheX0gW2FycmF5c10gVGhlIGFycmF5cyB0byBwcm9jZXNzLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGFycmF5IG9mIGdyb3VwZWQgZWxlbWVudHMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uemlwKFsnZnJlZCcsICdiYXJuZXknXSwgWzMwLCA0MF0sIFt0cnVlLCBmYWxzZV0pO1xuICAgICAqIC8vID0+IFtbJ2ZyZWQnLCAzMCwgdHJ1ZV0sIFsnYmFybmV5JywgNDAsIGZhbHNlXV1cbiAgICAgKi9cbiAgICB2YXIgemlwID0gcmVzdFBhcmFtKHVuemlwKTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBpbnZlcnNlIG9mIGBfLnBhaXJzYDsgdGhpcyBtZXRob2QgcmV0dXJucyBhbiBvYmplY3QgY29tcG9zZWQgZnJvbSBhcnJheXNcbiAgICAgKiBvZiBwcm9wZXJ0eSBuYW1lcyBhbmQgdmFsdWVzLiBQcm92aWRlIGVpdGhlciBhIHNpbmdsZSB0d28gZGltZW5zaW9uYWwgYXJyYXksXG4gICAgICogZS5nLiBgW1trZXkxLCB2YWx1ZTFdLCBba2V5MiwgdmFsdWUyXV1gIG9yIHR3byBhcnJheXMsIG9uZSBvZiBwcm9wZXJ0eSBuYW1lc1xuICAgICAqIGFuZCBvbmUgb2YgY29ycmVzcG9uZGluZyB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAYWxpYXMgb2JqZWN0XG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gcHJvcHMgVGhlIHByb3BlcnR5IG5hbWVzLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFt2YWx1ZXM9W11dIFRoZSBwcm9wZXJ0eSB2YWx1ZXMuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbmV3IG9iamVjdC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy56aXBPYmplY3QoW1snZnJlZCcsIDMwXSwgWydiYXJuZXknLCA0MF1dKTtcbiAgICAgKiAvLyA9PiB7ICdmcmVkJzogMzAsICdiYXJuZXknOiA0MCB9XG4gICAgICpcbiAgICAgKiBfLnppcE9iamVjdChbJ2ZyZWQnLCAnYmFybmV5J10sIFszMCwgNDBdKTtcbiAgICAgKiAvLyA9PiB7ICdmcmVkJzogMzAsICdiYXJuZXknOiA0MCB9XG4gICAgICovXG4gICAgZnVuY3Rpb24gemlwT2JqZWN0KHByb3BzLCB2YWx1ZXMpIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IHByb3BzID8gcHJvcHMubGVuZ3RoIDogMCxcbiAgICAgICAgICByZXN1bHQgPSB7fTtcblxuICAgICAgaWYgKGxlbmd0aCAmJiAhdmFsdWVzICYmICFpc0FycmF5KHByb3BzWzBdKSkge1xuICAgICAgICB2YWx1ZXMgPSBbXTtcbiAgICAgIH1cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHZhciBrZXkgPSBwcm9wc1tpbmRleF07XG4gICAgICAgIGlmICh2YWx1ZXMpIHtcbiAgICAgICAgICByZXN1bHRba2V5XSA9IHZhbHVlc1tpbmRleF07XG4gICAgICAgIH0gZWxzZSBpZiAoa2V5KSB7XG4gICAgICAgICAgcmVzdWx0W2tleVswXV0gPSBrZXlbMV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy56aXBgIGV4Y2VwdCB0aGF0IGl0IGFjY2VwdHMgYW4gaXRlcmF0ZWUgdG8gc3BlY2lmeVxuICAgICAqIGhvdyBncm91cGVkIHZhbHVlcyBzaG91bGQgYmUgY29tYmluZWQuIFRoZSBgaXRlcmF0ZWVgIGlzIGJvdW5kIHRvIGB0aGlzQXJnYFxuICAgICAqIGFuZCBpbnZva2VkIHdpdGggZm91ciBhcmd1bWVudHM6IChhY2N1bXVsYXRvciwgdmFsdWUsIGluZGV4LCBncm91cCkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0gey4uLkFycmF5fSBbYXJyYXlzXSBUaGUgYXJyYXlzIHRvIHByb2Nlc3MuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2l0ZXJhdGVlXSBUaGUgZnVuY3Rpb24gdG8gY29tYmluZSBncm91cGVkIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGl0ZXJhdGVlYC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBhcnJheSBvZiBncm91cGVkIGVsZW1lbnRzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnppcFdpdGgoWzEsIDJdLCBbMTAsIDIwXSwgWzEwMCwgMjAwXSwgXy5hZGQpO1xuICAgICAqIC8vID0+IFsxMTEsIDIyMl1cbiAgICAgKi9cbiAgICB2YXIgemlwV2l0aCA9IHJlc3RQYXJhbShmdW5jdGlvbihhcnJheXMpIHtcbiAgICAgIHZhciBsZW5ndGggPSBhcnJheXMubGVuZ3RoLFxuICAgICAgICAgIGl0ZXJhdGVlID0gbGVuZ3RoID4gMiA/IGFycmF5c1tsZW5ndGggLSAyXSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICB0aGlzQXJnID0gbGVuZ3RoID4gMSA/IGFycmF5c1tsZW5ndGggLSAxXSA6IHVuZGVmaW5lZDtcblxuICAgICAgaWYgKGxlbmd0aCA+IDIgJiYgdHlwZW9mIGl0ZXJhdGVlID09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgbGVuZ3RoIC09IDI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpdGVyYXRlZSA9IChsZW5ndGggPiAxICYmIHR5cGVvZiB0aGlzQXJnID09ICdmdW5jdGlvbicpID8gKC0tbGVuZ3RoLCB0aGlzQXJnKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpc0FyZyA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIGFycmF5cy5sZW5ndGggPSBsZW5ndGg7XG4gICAgICByZXR1cm4gdW56aXBXaXRoKGFycmF5cywgaXRlcmF0ZWUsIHRoaXNBcmcpO1xuICAgIH0pO1xuXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGBsb2Rhc2hgIG9iamVjdCB0aGF0IHdyYXBzIGB2YWx1ZWAgd2l0aCBleHBsaWNpdCBtZXRob2RcbiAgICAgKiBjaGFpbmluZyBlbmFibGVkLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IENoYWluXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gd3JhcC5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBuZXcgYGxvZGFzaGAgd3JhcHBlciBpbnN0YW5jZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIHVzZXJzID0gW1xuICAgICAqICAgeyAndXNlcic6ICdiYXJuZXknLCAgJ2FnZSc6IDM2IH0sXG4gICAgICogICB7ICd1c2VyJzogJ2ZyZWQnLCAgICAnYWdlJzogNDAgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAncGViYmxlcycsICdhZ2UnOiAxIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogdmFyIHlvdW5nZXN0ID0gXy5jaGFpbih1c2VycylcbiAgICAgKiAgIC5zb3J0QnkoJ2FnZScpXG4gICAgICogICAubWFwKGZ1bmN0aW9uKGNocikge1xuICAgICAqICAgICByZXR1cm4gY2hyLnVzZXIgKyAnIGlzICcgKyBjaHIuYWdlO1xuICAgICAqICAgfSlcbiAgICAgKiAgIC5maXJzdCgpXG4gICAgICogICAudmFsdWUoKTtcbiAgICAgKiAvLyA9PiAncGViYmxlcyBpcyAxJ1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNoYWluKHZhbHVlKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gbG9kYXNoKHZhbHVlKTtcbiAgICAgIHJlc3VsdC5fX2NoYWluX18gPSB0cnVlO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpbnZva2VzIGBpbnRlcmNlcHRvcmAgYW5kIHJldHVybnMgYHZhbHVlYC4gVGhlIGludGVyY2VwdG9yIGlzXG4gICAgICogYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggb25lIGFyZ3VtZW50OyAodmFsdWUpLiBUaGUgcHVycG9zZSBvZlxuICAgICAqIHRoaXMgbWV0aG9kIGlzIHRvIFwidGFwIGludG9cIiBhIG1ldGhvZCBjaGFpbiBpbiBvcmRlciB0byBwZXJmb3JtIG9wZXJhdGlvbnNcbiAgICAgKiBvbiBpbnRlcm1lZGlhdGUgcmVzdWx0cyB3aXRoaW4gdGhlIGNoYWluLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IENoYWluXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvdmlkZSB0byBgaW50ZXJjZXB0b3JgLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGludGVyY2VwdG9yIFRoZSBmdW5jdGlvbiB0byBpbnZva2UuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBpbnRlcmNlcHRvcmAuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgYHZhbHVlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXyhbMSwgMiwgM10pXG4gICAgICogIC50YXAoZnVuY3Rpb24oYXJyYXkpIHtcbiAgICAgKiAgICBhcnJheS5wb3AoKTtcbiAgICAgKiAgfSlcbiAgICAgKiAgLnJldmVyc2UoKVxuICAgICAqICAudmFsdWUoKTtcbiAgICAgKiAvLyA9PiBbMiwgMV1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB0YXAodmFsdWUsIGludGVyY2VwdG9yLCB0aGlzQXJnKSB7XG4gICAgICBpbnRlcmNlcHRvci5jYWxsKHRoaXNBcmcsIHZhbHVlKTtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLnRhcGAgZXhjZXB0IHRoYXQgaXQgcmV0dXJucyB0aGUgcmVzdWx0IG9mIGBpbnRlcmNlcHRvcmAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQ2hhaW5cbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm92aWRlIHRvIGBpbnRlcmNlcHRvcmAuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gaW50ZXJjZXB0b3IgVGhlIGZ1bmN0aW9uIHRvIGludm9rZS5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGludGVyY2VwdG9yYC5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcmVzdWx0IG9mIGBpbnRlcmNlcHRvcmAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8oJyAgYWJjICAnKVxuICAgICAqICAuY2hhaW4oKVxuICAgICAqICAudHJpbSgpXG4gICAgICogIC50aHJ1KGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICogICAgcmV0dXJuIFt2YWx1ZV07XG4gICAgICogIH0pXG4gICAgICogIC52YWx1ZSgpO1xuICAgICAqIC8vID0+IFsnYWJjJ11cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB0aHJ1KHZhbHVlLCBpbnRlcmNlcHRvciwgdGhpc0FyZykge1xuICAgICAgcmV0dXJuIGludGVyY2VwdG9yLmNhbGwodGhpc0FyZywgdmFsdWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVuYWJsZXMgZXhwbGljaXQgbWV0aG9kIGNoYWluaW5nIG9uIHRoZSB3cmFwcGVyIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBuYW1lIGNoYWluXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQ2hhaW5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBuZXcgYGxvZGFzaGAgd3JhcHBlciBpbnN0YW5jZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIHVzZXJzID0gW1xuICAgICAqICAgeyAndXNlcic6ICdiYXJuZXknLCAnYWdlJzogMzYgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAnZnJlZCcsICAgJ2FnZSc6IDQwIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogLy8gd2l0aG91dCBleHBsaWNpdCBjaGFpbmluZ1xuICAgICAqIF8odXNlcnMpLmZpcnN0KCk7XG4gICAgICogLy8gPT4geyAndXNlcic6ICdiYXJuZXknLCAnYWdlJzogMzYgfVxuICAgICAqXG4gICAgICogLy8gd2l0aCBleHBsaWNpdCBjaGFpbmluZ1xuICAgICAqIF8odXNlcnMpLmNoYWluKClcbiAgICAgKiAgIC5maXJzdCgpXG4gICAgICogICAucGljaygndXNlcicpXG4gICAgICogICAudmFsdWUoKTtcbiAgICAgKiAvLyA9PiB7ICd1c2VyJzogJ2Jhcm5leScgfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHdyYXBwZXJDaGFpbigpIHtcbiAgICAgIHJldHVybiBjaGFpbih0aGlzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFeGVjdXRlcyB0aGUgY2hhaW5lZCBzZXF1ZW5jZSBhbmQgcmV0dXJucyB0aGUgd3JhcHBlZCByZXN1bHQuXG4gICAgICpcbiAgICAgKiBAbmFtZSBjb21taXRcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBDaGFpblxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG5ldyBgbG9kYXNoYCB3cmFwcGVyIGluc3RhbmNlLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgYXJyYXkgPSBbMSwgMl07XG4gICAgICogdmFyIHdyYXBwZWQgPSBfKGFycmF5KS5wdXNoKDMpO1xuICAgICAqXG4gICAgICogY29uc29sZS5sb2coYXJyYXkpO1xuICAgICAqIC8vID0+IFsxLCAyXVxuICAgICAqXG4gICAgICogd3JhcHBlZCA9IHdyYXBwZWQuY29tbWl0KCk7XG4gICAgICogY29uc29sZS5sb2coYXJyYXkpO1xuICAgICAqIC8vID0+IFsxLCAyLCAzXVxuICAgICAqXG4gICAgICogd3JhcHBlZC5sYXN0KCk7XG4gICAgICogLy8gPT4gM1xuICAgICAqXG4gICAgICogY29uc29sZS5sb2coYXJyYXkpO1xuICAgICAqIC8vID0+IFsxLCAyLCAzXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHdyYXBwZXJDb21taXQoKSB7XG4gICAgICByZXR1cm4gbmV3IExvZGFzaFdyYXBwZXIodGhpcy52YWx1ZSgpLCB0aGlzLl9fY2hhaW5fXyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBhcnJheSBqb2luaW5nIGEgd3JhcHBlZCBhcnJheSB3aXRoIGFueSBhZGRpdGlvbmFsIGFycmF5c1xuICAgICAqIGFuZC9vciB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiBAbmFtZSBjb25jYXRcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBDaGFpblxuICAgICAqIEBwYXJhbSB7Li4uKn0gW3ZhbHVlc10gVGhlIHZhbHVlcyB0byBjb25jYXRlbmF0ZS5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBjb25jYXRlbmF0ZWQgYXJyYXkuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBhcnJheSA9IFsxXTtcbiAgICAgKiB2YXIgd3JhcHBlZCA9IF8oYXJyYXkpLmNvbmNhdCgyLCBbM10sIFtbNF1dKTtcbiAgICAgKlxuICAgICAqIGNvbnNvbGUubG9nKHdyYXBwZWQudmFsdWUoKSk7XG4gICAgICogLy8gPT4gWzEsIDIsIDMsIFs0XV1cbiAgICAgKlxuICAgICAqIGNvbnNvbGUubG9nKGFycmF5KTtcbiAgICAgKiAvLyA9PiBbMV1cbiAgICAgKi9cbiAgICB2YXIgd3JhcHBlckNvbmNhdCA9IHJlc3RQYXJhbShmdW5jdGlvbih2YWx1ZXMpIHtcbiAgICAgIHZhbHVlcyA9IGJhc2VGbGF0dGVuKHZhbHVlcyk7XG4gICAgICByZXR1cm4gdGhpcy50aHJ1KGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgICAgIHJldHVybiBhcnJheUNvbmNhdChpc0FycmF5KGFycmF5KSA/IGFycmF5IDogW3RvT2JqZWN0KGFycmF5KV0sIHZhbHVlcyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBjbG9uZSBvZiB0aGUgY2hhaW5lZCBzZXF1ZW5jZSBwbGFudGluZyBgdmFsdWVgIGFzIHRoZSB3cmFwcGVkIHZhbHVlLlxuICAgICAqXG4gICAgICogQG5hbWUgcGxhbnRcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBDaGFpblxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG5ldyBgbG9kYXNoYCB3cmFwcGVyIGluc3RhbmNlLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgYXJyYXkgPSBbMSwgMl07XG4gICAgICogdmFyIHdyYXBwZWQgPSBfKGFycmF5KS5tYXAoZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgKiAgIHJldHVybiBNYXRoLnBvdyh2YWx1ZSwgMik7XG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiB2YXIgb3RoZXIgPSBbMywgNF07XG4gICAgICogdmFyIG90aGVyV3JhcHBlZCA9IHdyYXBwZWQucGxhbnQob3RoZXIpO1xuICAgICAqXG4gICAgICogb3RoZXJXcmFwcGVkLnZhbHVlKCk7XG4gICAgICogLy8gPT4gWzksIDE2XVxuICAgICAqXG4gICAgICogd3JhcHBlZC52YWx1ZSgpO1xuICAgICAqIC8vID0+IFsxLCA0XVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHdyYXBwZXJQbGFudCh2YWx1ZSkge1xuICAgICAgdmFyIHJlc3VsdCxcbiAgICAgICAgICBwYXJlbnQgPSB0aGlzO1xuXG4gICAgICB3aGlsZSAocGFyZW50IGluc3RhbmNlb2YgYmFzZUxvZGFzaCkge1xuICAgICAgICB2YXIgY2xvbmUgPSB3cmFwcGVyQ2xvbmUocGFyZW50KTtcbiAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgIHByZXZpb3VzLl9fd3JhcHBlZF9fID0gY2xvbmU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0ID0gY2xvbmU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHByZXZpb3VzID0gY2xvbmU7XG4gICAgICAgIHBhcmVudCA9IHBhcmVudC5fX3dyYXBwZWRfXztcbiAgICAgIH1cbiAgICAgIHByZXZpb3VzLl9fd3JhcHBlZF9fID0gdmFsdWU7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldmVyc2VzIHRoZSB3cmFwcGVkIGFycmF5IHNvIHRoZSBmaXJzdCBlbGVtZW50IGJlY29tZXMgdGhlIGxhc3QsIHRoZVxuICAgICAqIHNlY29uZCBlbGVtZW50IGJlY29tZXMgdGhlIHNlY29uZCB0byBsYXN0LCBhbmQgc28gb24uXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgbXV0YXRlcyB0aGUgd3JhcHBlZCBhcnJheS5cbiAgICAgKlxuICAgICAqIEBuYW1lIHJldmVyc2VcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBDaGFpblxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG5ldyByZXZlcnNlZCBgbG9kYXNoYCB3cmFwcGVyIGluc3RhbmNlLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgYXJyYXkgPSBbMSwgMiwgM107XG4gICAgICpcbiAgICAgKiBfKGFycmF5KS5yZXZlcnNlKCkudmFsdWUoKVxuICAgICAqIC8vID0+IFszLCAyLCAxXVxuICAgICAqXG4gICAgICogY29uc29sZS5sb2coYXJyYXkpO1xuICAgICAqIC8vID0+IFszLCAyLCAxXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHdyYXBwZXJSZXZlcnNlKCkge1xuICAgICAgdmFyIHZhbHVlID0gdGhpcy5fX3dyYXBwZWRfXztcblxuICAgICAgdmFyIGludGVyY2VwdG9yID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuICh3cmFwcGVkICYmIHdyYXBwZWQuX19kaXJfXyA8IDApID8gdmFsdWUgOiB2YWx1ZS5yZXZlcnNlKCk7XG4gICAgICB9O1xuICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgTGF6eVdyYXBwZXIpIHtcbiAgICAgICAgdmFyIHdyYXBwZWQgPSB2YWx1ZTtcbiAgICAgICAgaWYgKHRoaXMuX19hY3Rpb25zX18ubGVuZ3RoKSB7XG4gICAgICAgICAgd3JhcHBlZCA9IG5ldyBMYXp5V3JhcHBlcih0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICB3cmFwcGVkID0gd3JhcHBlZC5yZXZlcnNlKCk7XG4gICAgICAgIHdyYXBwZWQuX19hY3Rpb25zX18ucHVzaCh7ICdmdW5jJzogdGhydSwgJ2FyZ3MnOiBbaW50ZXJjZXB0b3JdLCAndGhpc0FyZyc6IHVuZGVmaW5lZCB9KTtcbiAgICAgICAgcmV0dXJuIG5ldyBMb2Rhc2hXcmFwcGVyKHdyYXBwZWQsIHRoaXMuX19jaGFpbl9fKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLnRocnUoaW50ZXJjZXB0b3IpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFByb2R1Y2VzIHRoZSByZXN1bHQgb2YgY29lcmNpbmcgdGhlIHVud3JhcHBlZCB2YWx1ZSB0byBhIHN0cmluZy5cbiAgICAgKlxuICAgICAqIEBuYW1lIHRvU3RyaW5nXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQ2hhaW5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBjb2VyY2VkIHN0cmluZyB2YWx1ZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXyhbMSwgMiwgM10pLnRvU3RyaW5nKCk7XG4gICAgICogLy8gPT4gJzEsMiwzJ1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIHdyYXBwZXJUb1N0cmluZygpIHtcbiAgICAgIHJldHVybiAodGhpcy52YWx1ZSgpICsgJycpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV4ZWN1dGVzIHRoZSBjaGFpbmVkIHNlcXVlbmNlIHRvIGV4dHJhY3QgdGhlIHVud3JhcHBlZCB2YWx1ZS5cbiAgICAgKlxuICAgICAqIEBuYW1lIHZhbHVlXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAYWxpYXMgcnVuLCB0b0pTT04sIHZhbHVlT2ZcbiAgICAgKiBAY2F0ZWdvcnkgQ2hhaW5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcmVzb2x2ZWQgdW53cmFwcGVkIHZhbHVlLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfKFsxLCAyLCAzXSkudmFsdWUoKTtcbiAgICAgKiAvLyA9PiBbMSwgMiwgM11cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB3cmFwcGVyVmFsdWUoKSB7XG4gICAgICByZXR1cm4gYmFzZVdyYXBwZXJWYWx1ZSh0aGlzLl9fd3JhcHBlZF9fLCB0aGlzLl9fYWN0aW9uc19fKTtcbiAgICB9XG5cbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIGVsZW1lbnRzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGdpdmVuIGtleXMsIG9yIGluZGV4ZXMsXG4gICAgICogb2YgYGNvbGxlY3Rpb25gLiBLZXlzIG1heSBiZSBzcGVjaWZpZWQgYXMgaW5kaXZpZHVhbCBhcmd1bWVudHMgb3IgYXMgYXJyYXlzXG4gICAgICogb2Yga2V5cy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0gey4uLihudW1iZXJ8bnVtYmVyW118c3RyaW5nfHN0cmluZ1tdKX0gW3Byb3BzXSBUaGUgcHJvcGVydHkgbmFtZXNcbiAgICAgKiAgb3IgaW5kZXhlcyBvZiBlbGVtZW50cyB0byBwaWNrLCBzcGVjaWZpZWQgaW5kaXZpZHVhbGx5IG9yIGluIGFycmF5cy5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBhcnJheSBvZiBwaWNrZWQgZWxlbWVudHMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uYXQoWydhJywgJ2InLCAnYyddLCBbMCwgMl0pO1xuICAgICAqIC8vID0+IFsnYScsICdjJ11cbiAgICAgKlxuICAgICAqIF8uYXQoWydiYXJuZXknLCAnZnJlZCcsICdwZWJibGVzJ10sIDAsIDIpO1xuICAgICAqIC8vID0+IFsnYmFybmV5JywgJ3BlYmJsZXMnXVxuICAgICAqL1xuICAgIHZhciBhdCA9IHJlc3RQYXJhbShmdW5jdGlvbihjb2xsZWN0aW9uLCBwcm9wcykge1xuICAgICAgcmV0dXJuIGJhc2VBdChjb2xsZWN0aW9uLCBiYXNlRmxhdHRlbihwcm9wcykpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBvYmplY3QgY29tcG9zZWQgb2Yga2V5cyBnZW5lcmF0ZWQgZnJvbSB0aGUgcmVzdWx0cyBvZiBydW5uaW5nXG4gICAgICogZWFjaCBlbGVtZW50IG9mIGBjb2xsZWN0aW9uYCB0aHJvdWdoIGBpdGVyYXRlZWAuIFRoZSBjb3JyZXNwb25kaW5nIHZhbHVlXG4gICAgICogb2YgZWFjaCBrZXkgaXMgdGhlIG51bWJlciBvZiB0aW1lcyB0aGUga2V5IHdhcyByZXR1cm5lZCBieSBgaXRlcmF0ZWVgLlxuICAgICAqIFRoZSBgaXRlcmF0ZWVgIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50czpcbiAgICAgKiAodmFsdWUsIGluZGV4fGtleSwgY29sbGVjdGlvbikuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBpdGVyYXRlZWAgdGhlIGNyZWF0ZWQgYF8ucHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhIHZhbHVlIGlzIGFsc28gcHJvdmlkZWQgZm9yIGB0aGlzQXJnYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzUHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSBhIG1hdGNoaW5nIHByb3BlcnR5XG4gICAgICogdmFsdWUsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGl0ZXJhdGVlYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzYCBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuXG4gICAgICogb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvblxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbaXRlcmF0ZWU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWRcbiAgICAgKiAgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGl0ZXJhdGVlYC5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBjb21wb3NlZCBhZ2dyZWdhdGUgb2JqZWN0LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmNvdW50QnkoWzQuMywgNi4xLCA2LjRdLCBmdW5jdGlvbihuKSB7XG4gICAgICogICByZXR1cm4gTWF0aC5mbG9vcihuKTtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiB7ICc0JzogMSwgJzYnOiAyIH1cbiAgICAgKlxuICAgICAqIF8uY291bnRCeShbNC4zLCA2LjEsIDYuNF0sIGZ1bmN0aW9uKG4pIHtcbiAgICAgKiAgIHJldHVybiB0aGlzLmZsb29yKG4pO1xuICAgICAqIH0sIE1hdGgpO1xuICAgICAqIC8vID0+IHsgJzQnOiAxLCAnNic6IDIgfVxuICAgICAqXG4gICAgICogXy5jb3VudEJ5KFsnb25lJywgJ3R3bycsICd0aHJlZSddLCAnbGVuZ3RoJyk7XG4gICAgICogLy8gPT4geyAnMyc6IDIsICc1JzogMSB9XG4gICAgICovXG4gICAgdmFyIGNvdW50QnkgPSBjcmVhdGVBZ2dyZWdhdG9yKGZ1bmN0aW9uKHJlc3VsdCwgdmFsdWUsIGtleSkge1xuICAgICAgaGFzT3duUHJvcGVydHkuY2FsbChyZXN1bHQsIGtleSkgPyArK3Jlc3VsdFtrZXldIDogKHJlc3VsdFtrZXldID0gMSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHByZWRpY2F0ZWAgcmV0dXJucyB0cnV0aHkgZm9yICoqYWxsKiogZWxlbWVudHMgb2YgYGNvbGxlY3Rpb25gLlxuICAgICAqIFRoZSBwcmVkaWNhdGUgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdGhyZWUgYXJndW1lbnRzOlxuICAgICAqICh2YWx1ZSwgaW5kZXh8a2V5LCBjb2xsZWN0aW9uKS5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYHByZWRpY2F0ZWAgdGhlIGNyZWF0ZWQgYF8ucHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhIHZhbHVlIGlzIGFsc28gcHJvdmlkZWQgZm9yIGB0aGlzQXJnYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzUHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSBhIG1hdGNoaW5nIHByb3BlcnR5XG4gICAgICogdmFsdWUsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYHByZWRpY2F0ZWAgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc2Agc3R5bGVcbiAgICAgKiBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlblxuICAgICAqIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGFsaWFzIGFsbFxuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtwcmVkaWNhdGU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWRcbiAgICAgKiAgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYHByZWRpY2F0ZWAuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFsbCBlbGVtZW50cyBwYXNzIHRoZSBwcmVkaWNhdGUgY2hlY2ssXG4gICAgICogIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5ldmVyeShbdHJ1ZSwgMSwgbnVsbCwgJ3llcyddLCBCb29sZWFuKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqXG4gICAgICogdmFyIHVzZXJzID0gW1xuICAgICAqICAgeyAndXNlcic6ICdiYXJuZXknLCAnYWN0aXZlJzogZmFsc2UgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAnZnJlZCcsICAgJ2FjdGl2ZSc6IGZhbHNlIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLm1hdGNoZXNgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8uZXZlcnkodXNlcnMsIHsgJ3VzZXInOiAnYmFybmV5JywgJ2FjdGl2ZSc6IGZhbHNlIH0pO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ubWF0Y2hlc1Byb3BlcnR5YCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLmV2ZXJ5KHVzZXJzLCAnYWN0aXZlJywgZmFsc2UpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5wcm9wZXJ0eWAgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5ldmVyeSh1c2VycywgJ2FjdGl2ZScpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gZXZlcnkoY29sbGVjdGlvbiwgcHJlZGljYXRlLCB0aGlzQXJnKSB7XG4gICAgICB2YXIgZnVuYyA9IGlzQXJyYXkoY29sbGVjdGlvbikgPyBhcnJheUV2ZXJ5IDogYmFzZUV2ZXJ5O1xuICAgICAgaWYgKHRoaXNBcmcgJiYgaXNJdGVyYXRlZUNhbGwoY29sbGVjdGlvbiwgcHJlZGljYXRlLCB0aGlzQXJnKSkge1xuICAgICAgICBwcmVkaWNhdGUgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHByZWRpY2F0ZSAhPSAnZnVuY3Rpb24nIHx8IHRoaXNBcmcgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBwcmVkaWNhdGUgPSBnZXRDYWxsYmFjayhwcmVkaWNhdGUsIHRoaXNBcmcsIDMpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZ1bmMoY29sbGVjdGlvbiwgcHJlZGljYXRlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJdGVyYXRlcyBvdmVyIGVsZW1lbnRzIG9mIGBjb2xsZWN0aW9uYCwgcmV0dXJuaW5nIGFuIGFycmF5IG9mIGFsbCBlbGVtZW50c1xuICAgICAqIGBwcmVkaWNhdGVgIHJldHVybnMgdHJ1dGh5IGZvci4gVGhlIHByZWRpY2F0ZSBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kXG4gICAgICogaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50czogKHZhbHVlLCBpbmRleHxrZXksIGNvbGxlY3Rpb24pLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgcHJlZGljYXRlYCB0aGUgY3JlYXRlZCBgXy5wcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGEgdmFsdWUgaXMgYWxzbyBwcm92aWRlZCBmb3IgYHRoaXNBcmdgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNQcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIGEgbWF0Y2hpbmcgcHJvcGVydHlcbiAgICAgKiB2YWx1ZSwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgcHJlZGljYXRlYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzYCBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuXG4gICAgICogb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAYWxpYXMgc2VsZWN0XG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25cbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW3ByZWRpY2F0ZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZFxuICAgICAqICBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgcHJlZGljYXRlYC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBmaWx0ZXJlZCBhcnJheS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5maWx0ZXIoWzQsIDUsIDZdLCBmdW5jdGlvbihuKSB7XG4gICAgICogICByZXR1cm4gbiAlIDIgPT0gMDtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiBbNCwgNl1cbiAgICAgKlxuICAgICAqIHZhciB1c2VycyA9IFtcbiAgICAgKiAgIHsgJ3VzZXInOiAnYmFybmV5JywgJ2FnZSc6IDM2LCAnYWN0aXZlJzogdHJ1ZSB9LFxuICAgICAqICAgeyAndXNlcic6ICdmcmVkJywgICAnYWdlJzogNDAsICdhY3RpdmUnOiBmYWxzZSB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5tYXRjaGVzYCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLnBsdWNrKF8uZmlsdGVyKHVzZXJzLCB7ICdhZ2UnOiAzNiwgJ2FjdGl2ZSc6IHRydWUgfSksICd1c2VyJyk7XG4gICAgICogLy8gPT4gWydiYXJuZXknXVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLm1hdGNoZXNQcm9wZXJ0eWAgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5wbHVjayhfLmZpbHRlcih1c2VycywgJ2FjdGl2ZScsIGZhbHNlKSwgJ3VzZXInKTtcbiAgICAgKiAvLyA9PiBbJ2ZyZWQnXVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLnByb3BlcnR5YCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLnBsdWNrKF8uZmlsdGVyKHVzZXJzLCAnYWN0aXZlJyksICd1c2VyJyk7XG4gICAgICogLy8gPT4gWydiYXJuZXknXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGZpbHRlcihjb2xsZWN0aW9uLCBwcmVkaWNhdGUsIHRoaXNBcmcpIHtcbiAgICAgIHZhciBmdW5jID0gaXNBcnJheShjb2xsZWN0aW9uKSA/IGFycmF5RmlsdGVyIDogYmFzZUZpbHRlcjtcbiAgICAgIHByZWRpY2F0ZSA9IGdldENhbGxiYWNrKHByZWRpY2F0ZSwgdGhpc0FyZywgMyk7XG4gICAgICByZXR1cm4gZnVuYyhjb2xsZWN0aW9uLCBwcmVkaWNhdGUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEl0ZXJhdGVzIG92ZXIgZWxlbWVudHMgb2YgYGNvbGxlY3Rpb25gLCByZXR1cm5pbmcgdGhlIGZpcnN0IGVsZW1lbnRcbiAgICAgKiBgcHJlZGljYXRlYCByZXR1cm5zIHRydXRoeSBmb3IuIFRoZSBwcmVkaWNhdGUgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZFxuICAgICAqIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM6ICh2YWx1ZSwgaW5kZXh8a2V5LCBjb2xsZWN0aW9uKS5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYHByZWRpY2F0ZWAgdGhlIGNyZWF0ZWQgYF8ucHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhIHZhbHVlIGlzIGFsc28gcHJvdmlkZWQgZm9yIGB0aGlzQXJnYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzUHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSBhIG1hdGNoaW5nIHByb3BlcnR5XG4gICAgICogdmFsdWUsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYHByZWRpY2F0ZWAgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc2Agc3R5bGVcbiAgICAgKiBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlblxuICAgICAqIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGFsaWFzIGRldGVjdFxuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIHNlYXJjaC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtwcmVkaWNhdGU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWRcbiAgICAgKiAgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYHByZWRpY2F0ZWAuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIG1hdGNoZWQgZWxlbWVudCwgZWxzZSBgdW5kZWZpbmVkYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIHVzZXJzID0gW1xuICAgICAqICAgeyAndXNlcic6ICdiYXJuZXknLCAgJ2FnZSc6IDM2LCAnYWN0aXZlJzogdHJ1ZSB9LFxuICAgICAqICAgeyAndXNlcic6ICdmcmVkJywgICAgJ2FnZSc6IDQwLCAnYWN0aXZlJzogZmFsc2UgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAncGViYmxlcycsICdhZ2UnOiAxLCAgJ2FjdGl2ZSc6IHRydWUgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiBfLnJlc3VsdChfLmZpbmQodXNlcnMsIGZ1bmN0aW9uKGNocikge1xuICAgICAqICAgcmV0dXJuIGNoci5hZ2UgPCA0MDtcbiAgICAgKiB9KSwgJ3VzZXInKTtcbiAgICAgKiAvLyA9PiAnYmFybmV5J1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLm1hdGNoZXNgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8ucmVzdWx0KF8uZmluZCh1c2VycywgeyAnYWdlJzogMSwgJ2FjdGl2ZSc6IHRydWUgfSksICd1c2VyJyk7XG4gICAgICogLy8gPT4gJ3BlYmJsZXMnXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ubWF0Y2hlc1Byb3BlcnR5YCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLnJlc3VsdChfLmZpbmQodXNlcnMsICdhY3RpdmUnLCBmYWxzZSksICd1c2VyJyk7XG4gICAgICogLy8gPT4gJ2ZyZWQnXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ucHJvcGVydHlgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8ucmVzdWx0KF8uZmluZCh1c2VycywgJ2FjdGl2ZScpLCAndXNlcicpO1xuICAgICAqIC8vID0+ICdiYXJuZXknXG4gICAgICovXG4gICAgdmFyIGZpbmQgPSBjcmVhdGVGaW5kKGJhc2VFYWNoKTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uZmluZGAgZXhjZXB0IHRoYXQgaXQgaXRlcmF0ZXMgb3ZlciBlbGVtZW50cyBvZlxuICAgICAqIGBjb2xsZWN0aW9uYCBmcm9tIHJpZ2h0IHRvIGxlZnQuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvblxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBzZWFyY2guXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbcHJlZGljYXRlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkXG4gICAgICogIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBwcmVkaWNhdGVgLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBtYXRjaGVkIGVsZW1lbnQsIGVsc2UgYHVuZGVmaW5lZGAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uZmluZExhc3QoWzEsIDIsIDMsIDRdLCBmdW5jdGlvbihuKSB7XG4gICAgICogICByZXR1cm4gbiAlIDIgPT0gMTtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiAzXG4gICAgICovXG4gICAgdmFyIGZpbmRMYXN0ID0gY3JlYXRlRmluZChiYXNlRWFjaFJpZ2h0LCB0cnVlKTtcblxuICAgIC8qKlxuICAgICAqIFBlcmZvcm1zIGEgZGVlcCBjb21wYXJpc29uIGJldHdlZW4gZWFjaCBlbGVtZW50IGluIGBjb2xsZWN0aW9uYCBhbmQgdGhlXG4gICAgICogc291cmNlIG9iamVjdCwgcmV0dXJuaW5nIHRoZSBmaXJzdCBlbGVtZW50IHRoYXQgaGFzIGVxdWl2YWxlbnQgcHJvcGVydHlcbiAgICAgKiB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVGhpcyBtZXRob2Qgc3VwcG9ydHMgY29tcGFyaW5nIGFycmF5cywgYm9vbGVhbnMsIGBEYXRlYCBvYmplY3RzLFxuICAgICAqIG51bWJlcnMsIGBPYmplY3RgIG9iamVjdHMsIHJlZ2V4ZXMsIGFuZCBzdHJpbmdzLiBPYmplY3RzIGFyZSBjb21wYXJlZCBieVxuICAgICAqIHRoZWlyIG93biwgbm90IGluaGVyaXRlZCwgZW51bWVyYWJsZSBwcm9wZXJ0aWVzLiBGb3IgY29tcGFyaW5nIGEgc2luZ2xlXG4gICAgICogb3duIG9yIGluaGVyaXRlZCBwcm9wZXJ0eSB2YWx1ZSBzZWUgYF8ubWF0Y2hlc1Byb3BlcnR5YC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIHNlYXJjaC5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gc291cmNlIFRoZSBvYmplY3Qgb2YgcHJvcGVydHkgdmFsdWVzIHRvIG1hdGNoLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBtYXRjaGVkIGVsZW1lbnQsIGVsc2UgYHVuZGVmaW5lZGAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciB1c2VycyA9IFtcbiAgICAgKiAgIHsgJ3VzZXInOiAnYmFybmV5JywgJ2FnZSc6IDM2LCAnYWN0aXZlJzogdHJ1ZSB9LFxuICAgICAqICAgeyAndXNlcic6ICdmcmVkJywgICAnYWdlJzogNDAsICdhY3RpdmUnOiBmYWxzZSB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIF8ucmVzdWx0KF8uZmluZFdoZXJlKHVzZXJzLCB7ICdhZ2UnOiAzNiwgJ2FjdGl2ZSc6IHRydWUgfSksICd1c2VyJyk7XG4gICAgICogLy8gPT4gJ2Jhcm5leSdcbiAgICAgKlxuICAgICAqIF8ucmVzdWx0KF8uZmluZFdoZXJlKHVzZXJzLCB7ICdhZ2UnOiA0MCwgJ2FjdGl2ZSc6IGZhbHNlIH0pLCAndXNlcicpO1xuICAgICAqIC8vID0+ICdmcmVkJ1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGZpbmRXaGVyZShjb2xsZWN0aW9uLCBzb3VyY2UpIHtcbiAgICAgIHJldHVybiBmaW5kKGNvbGxlY3Rpb24sIGJhc2VNYXRjaGVzKHNvdXJjZSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEl0ZXJhdGVzIG92ZXIgZWxlbWVudHMgb2YgYGNvbGxlY3Rpb25gIGludm9raW5nIGBpdGVyYXRlZWAgZm9yIGVhY2ggZWxlbWVudC5cbiAgICAgKiBUaGUgYGl0ZXJhdGVlYCBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM6XG4gICAgICogKHZhbHVlLCBpbmRleHxrZXksIGNvbGxlY3Rpb24pLiBJdGVyYXRlZSBmdW5jdGlvbnMgbWF5IGV4aXQgaXRlcmF0aW9uIGVhcmx5XG4gICAgICogYnkgZXhwbGljaXRseSByZXR1cm5pbmcgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBBcyB3aXRoIG90aGVyIFwiQ29sbGVjdGlvbnNcIiBtZXRob2RzLCBvYmplY3RzIHdpdGggYSBcImxlbmd0aFwiIHByb3BlcnR5XG4gICAgICogYXJlIGl0ZXJhdGVkIGxpa2UgYXJyYXlzLiBUbyBhdm9pZCB0aGlzIGJlaGF2aW9yIGBfLmZvckluYCBvciBgXy5mb3JPd25gXG4gICAgICogbWF5IGJlIHVzZWQgZm9yIG9iamVjdCBpdGVyYXRpb24uXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAYWxpYXMgZWFjaFxuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbaXRlcmF0ZWU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGl0ZXJhdGVlYC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl8T2JqZWN0fHN0cmluZ30gUmV0dXJucyBgY29sbGVjdGlvbmAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8oWzEsIDJdKS5mb3JFYWNoKGZ1bmN0aW9uKG4pIHtcbiAgICAgKiAgIGNvbnNvbGUubG9nKG4pO1xuICAgICAqIH0pLnZhbHVlKCk7XG4gICAgICogLy8gPT4gbG9ncyBlYWNoIHZhbHVlIGZyb20gbGVmdCB0byByaWdodCBhbmQgcmV0dXJucyB0aGUgYXJyYXlcbiAgICAgKlxuICAgICAqIF8uZm9yRWFjaCh7ICdhJzogMSwgJ2InOiAyIH0sIGZ1bmN0aW9uKG4sIGtleSkge1xuICAgICAqICAgY29uc29sZS5sb2cobiwga2V5KTtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiBsb2dzIGVhY2ggdmFsdWUta2V5IHBhaXIgYW5kIHJldHVybnMgdGhlIG9iamVjdCAoaXRlcmF0aW9uIG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkKVxuICAgICAqL1xuICAgIHZhciBmb3JFYWNoID0gY3JlYXRlRm9yRWFjaChhcnJheUVhY2gsIGJhc2VFYWNoKTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uZm9yRWFjaGAgZXhjZXB0IHRoYXQgaXQgaXRlcmF0ZXMgb3ZlciBlbGVtZW50cyBvZlxuICAgICAqIGBjb2xsZWN0aW9uYCBmcm9tIHJpZ2h0IHRvIGxlZnQuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAYWxpYXMgZWFjaFJpZ2h0XG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25cbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtpdGVyYXRlZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgaXRlcmF0ZWVgLlxuICAgICAqIEByZXR1cm5zIHtBcnJheXxPYmplY3R8c3RyaW5nfSBSZXR1cm5zIGBjb2xsZWN0aW9uYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXyhbMSwgMl0pLmZvckVhY2hSaWdodChmdW5jdGlvbihuKSB7XG4gICAgICogICBjb25zb2xlLmxvZyhuKTtcbiAgICAgKiB9KS52YWx1ZSgpO1xuICAgICAqIC8vID0+IGxvZ3MgZWFjaCB2YWx1ZSBmcm9tIHJpZ2h0IHRvIGxlZnQgYW5kIHJldHVybnMgdGhlIGFycmF5XG4gICAgICovXG4gICAgdmFyIGZvckVhY2hSaWdodCA9IGNyZWF0ZUZvckVhY2goYXJyYXlFYWNoUmlnaHQsIGJhc2VFYWNoUmlnaHQpO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBvYmplY3QgY29tcG9zZWQgb2Yga2V5cyBnZW5lcmF0ZWQgZnJvbSB0aGUgcmVzdWx0cyBvZiBydW5uaW5nXG4gICAgICogZWFjaCBlbGVtZW50IG9mIGBjb2xsZWN0aW9uYCB0aHJvdWdoIGBpdGVyYXRlZWAuIFRoZSBjb3JyZXNwb25kaW5nIHZhbHVlXG4gICAgICogb2YgZWFjaCBrZXkgaXMgYW4gYXJyYXkgb2YgdGhlIGVsZW1lbnRzIHJlc3BvbnNpYmxlIGZvciBnZW5lcmF0aW5nIHRoZSBrZXkuXG4gICAgICogVGhlIGBpdGVyYXRlZWAgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdGhyZWUgYXJndW1lbnRzOlxuICAgICAqICh2YWx1ZSwgaW5kZXh8a2V5LCBjb2xsZWN0aW9uKS5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGl0ZXJhdGVlYCB0aGUgY3JlYXRlZCBgXy5wcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGEgdmFsdWUgaXMgYWxzbyBwcm92aWRlZCBmb3IgYHRoaXNBcmdgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNQcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIGEgbWF0Y2hpbmcgcHJvcGVydHlcbiAgICAgKiB2YWx1ZSwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgaXRlcmF0ZWVgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNgIHN0eWxlXG4gICAgICogY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW5cbiAgICAgKiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtpdGVyYXRlZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZFxuICAgICAqICBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgaXRlcmF0ZWVgLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGNvbXBvc2VkIGFnZ3JlZ2F0ZSBvYmplY3QuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uZ3JvdXBCeShbNC4yLCA2LjEsIDYuNF0sIGZ1bmN0aW9uKG4pIHtcbiAgICAgKiAgIHJldHVybiBNYXRoLmZsb29yKG4pO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IHsgJzQnOiBbNC4yXSwgJzYnOiBbNi4xLCA2LjRdIH1cbiAgICAgKlxuICAgICAqIF8uZ3JvdXBCeShbNC4yLCA2LjEsIDYuNF0sIGZ1bmN0aW9uKG4pIHtcbiAgICAgKiAgIHJldHVybiB0aGlzLmZsb29yKG4pO1xuICAgICAqIH0sIE1hdGgpO1xuICAgICAqIC8vID0+IHsgJzQnOiBbNC4yXSwgJzYnOiBbNi4xLCA2LjRdIH1cbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5wcm9wZXJ0eWAgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5ncm91cEJ5KFsnb25lJywgJ3R3bycsICd0aHJlZSddLCAnbGVuZ3RoJyk7XG4gICAgICogLy8gPT4geyAnMyc6IFsnb25lJywgJ3R3byddLCAnNSc6IFsndGhyZWUnXSB9XG4gICAgICovXG4gICAgdmFyIGdyb3VwQnkgPSBjcmVhdGVBZ2dyZWdhdG9yKGZ1bmN0aW9uKHJlc3VsdCwgdmFsdWUsIGtleSkge1xuICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwocmVzdWx0LCBrZXkpKSB7XG4gICAgICAgIHJlc3VsdFtrZXldLnB1c2godmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0W2tleV0gPSBbdmFsdWVdO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgaW4gYGNvbGxlY3Rpb25gIHVzaW5nXG4gICAgICogW2BTYW1lVmFsdWVaZXJvYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtc2FtZXZhbHVlemVybylcbiAgICAgKiBmb3IgZXF1YWxpdHkgY29tcGFyaXNvbnMuIElmIGBmcm9tSW5kZXhgIGlzIG5lZ2F0aXZlLCBpdCBpcyB1c2VkIGFzIHRoZSBvZmZzZXRcbiAgICAgKiBmcm9tIHRoZSBlbmQgb2YgYGNvbGxlY3Rpb25gLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGFsaWFzIGNvbnRhaW5zLCBpbmNsdWRlXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25cbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gc2VhcmNoLlxuICAgICAqIEBwYXJhbSB7Kn0gdGFyZ2V0IFRoZSB2YWx1ZSB0byBzZWFyY2ggZm9yLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbZnJvbUluZGV4PTBdIFRoZSBpbmRleCB0byBzZWFyY2ggZnJvbS5cbiAgICAgKiBAcGFyYW0tIHtPYmplY3R9IFtndWFyZF0gRW5hYmxlcyB1c2UgYXMgYSBjYWxsYmFjayBmb3IgZnVuY3Rpb25zIGxpa2UgYF8ucmVkdWNlYC5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYSBtYXRjaGluZyBlbGVtZW50IGlzIGZvdW5kLCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaW5jbHVkZXMoWzEsIDIsIDNdLCAxKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmluY2x1ZGVzKFsxLCAyLCAzXSwgMSwgMik7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKlxuICAgICAqIF8uaW5jbHVkZXMoeyAndXNlcic6ICdmcmVkJywgJ2FnZSc6IDQwIH0sICdmcmVkJyk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pbmNsdWRlcygncGViYmxlcycsICdlYicpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpbmNsdWRlcyhjb2xsZWN0aW9uLCB0YXJnZXQsIGZyb21JbmRleCwgZ3VhcmQpIHtcbiAgICAgIHZhciBsZW5ndGggPSBjb2xsZWN0aW9uID8gZ2V0TGVuZ3RoKGNvbGxlY3Rpb24pIDogMDtcbiAgICAgIGlmICghaXNMZW5ndGgobGVuZ3RoKSkge1xuICAgICAgICBjb2xsZWN0aW9uID0gdmFsdWVzKGNvbGxlY3Rpb24pO1xuICAgICAgICBsZW5ndGggPSBjb2xsZWN0aW9uLmxlbmd0aDtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgZnJvbUluZGV4ICE9ICdudW1iZXInIHx8IChndWFyZCAmJiBpc0l0ZXJhdGVlQ2FsbCh0YXJnZXQsIGZyb21JbmRleCwgZ3VhcmQpKSkge1xuICAgICAgICBmcm9tSW5kZXggPSAwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZnJvbUluZGV4ID0gZnJvbUluZGV4IDwgMCA/IG5hdGl2ZU1heChsZW5ndGggKyBmcm9tSW5kZXgsIDApIDogKGZyb21JbmRleCB8fCAwKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiAodHlwZW9mIGNvbGxlY3Rpb24gPT0gJ3N0cmluZycgfHwgIWlzQXJyYXkoY29sbGVjdGlvbikgJiYgaXNTdHJpbmcoY29sbGVjdGlvbikpXG4gICAgICAgID8gKGZyb21JbmRleCA8PSBsZW5ndGggJiYgY29sbGVjdGlvbi5pbmRleE9mKHRhcmdldCwgZnJvbUluZGV4KSA+IC0xKVxuICAgICAgICA6ICghIWxlbmd0aCAmJiBnZXRJbmRleE9mKGNvbGxlY3Rpb24sIHRhcmdldCwgZnJvbUluZGV4KSA+IC0xKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIG9iamVjdCBjb21wb3NlZCBvZiBrZXlzIGdlbmVyYXRlZCBmcm9tIHRoZSByZXN1bHRzIG9mIHJ1bm5pbmdcbiAgICAgKiBlYWNoIGVsZW1lbnQgb2YgYGNvbGxlY3Rpb25gIHRocm91Z2ggYGl0ZXJhdGVlYC4gVGhlIGNvcnJlc3BvbmRpbmcgdmFsdWVcbiAgICAgKiBvZiBlYWNoIGtleSBpcyB0aGUgbGFzdCBlbGVtZW50IHJlc3BvbnNpYmxlIGZvciBnZW5lcmF0aW5nIHRoZSBrZXkuIFRoZVxuICAgICAqIGl0ZXJhdGVlIGZ1bmN0aW9uIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50czpcbiAgICAgKiAodmFsdWUsIGluZGV4fGtleSwgY29sbGVjdGlvbikuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBpdGVyYXRlZWAgdGhlIGNyZWF0ZWQgYF8ucHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhIHZhbHVlIGlzIGFsc28gcHJvdmlkZWQgZm9yIGB0aGlzQXJnYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzUHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSBhIG1hdGNoaW5nIHByb3BlcnR5XG4gICAgICogdmFsdWUsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGl0ZXJhdGVlYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzYCBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuXG4gICAgICogb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvblxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbaXRlcmF0ZWU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWRcbiAgICAgKiAgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGl0ZXJhdGVlYC5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBjb21wb3NlZCBhZ2dyZWdhdGUgb2JqZWN0LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIga2V5RGF0YSA9IFtcbiAgICAgKiAgIHsgJ2Rpcic6ICdsZWZ0JywgJ2NvZGUnOiA5NyB9LFxuICAgICAqICAgeyAnZGlyJzogJ3JpZ2h0JywgJ2NvZGUnOiAxMDAgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiBfLmluZGV4Qnkoa2V5RGF0YSwgJ2RpcicpO1xuICAgICAqIC8vID0+IHsgJ2xlZnQnOiB7ICdkaXInOiAnbGVmdCcsICdjb2RlJzogOTcgfSwgJ3JpZ2h0JzogeyAnZGlyJzogJ3JpZ2h0JywgJ2NvZGUnOiAxMDAgfSB9XG4gICAgICpcbiAgICAgKiBfLmluZGV4Qnkoa2V5RGF0YSwgZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgICogICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShvYmplY3QuY29kZSk7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4geyAnYSc6IHsgJ2Rpcic6ICdsZWZ0JywgJ2NvZGUnOiA5NyB9LCAnZCc6IHsgJ2Rpcic6ICdyaWdodCcsICdjb2RlJzogMTAwIH0gfVxuICAgICAqXG4gICAgICogXy5pbmRleEJ5KGtleURhdGEsIGZ1bmN0aW9uKG9iamVjdCkge1xuICAgICAqICAgcmV0dXJuIHRoaXMuZnJvbUNoYXJDb2RlKG9iamVjdC5jb2RlKTtcbiAgICAgKiB9LCBTdHJpbmcpO1xuICAgICAqIC8vID0+IHsgJ2EnOiB7ICdkaXInOiAnbGVmdCcsICdjb2RlJzogOTcgfSwgJ2QnOiB7ICdkaXInOiAncmlnaHQnLCAnY29kZSc6IDEwMCB9IH1cbiAgICAgKi9cbiAgICB2YXIgaW5kZXhCeSA9IGNyZWF0ZUFnZ3JlZ2F0b3IoZnVuY3Rpb24ocmVzdWx0LCB2YWx1ZSwga2V5KSB7XG4gICAgICByZXN1bHRba2V5XSA9IHZhbHVlO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogSW52b2tlcyB0aGUgbWV0aG9kIGF0IGBwYXRoYCBvZiBlYWNoIGVsZW1lbnQgaW4gYGNvbGxlY3Rpb25gLCByZXR1cm5pbmdcbiAgICAgKiBhbiBhcnJheSBvZiB0aGUgcmVzdWx0cyBvZiBlYWNoIGludm9rZWQgbWV0aG9kLiBBbnkgYWRkaXRpb25hbCBhcmd1bWVudHNcbiAgICAgKiBhcmUgcHJvdmlkZWQgdG8gZWFjaCBpbnZva2VkIG1ldGhvZC4gSWYgYG1ldGhvZE5hbWVgIGlzIGEgZnVuY3Rpb24gaXQgaXNcbiAgICAgKiBpbnZva2VkIGZvciwgYW5kIGB0aGlzYCBib3VuZCB0bywgZWFjaCBlbGVtZW50IGluIGBjb2xsZWN0aW9uYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0FycmF5fEZ1bmN0aW9ufHN0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgbWV0aG9kIHRvIGludm9rZSBvclxuICAgICAqICB0aGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Li4uKn0gW2FyZ3NdIFRoZSBhcmd1bWVudHMgdG8gaW52b2tlIHRoZSBtZXRob2Qgd2l0aC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHJlc3VsdHMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaW52b2tlKFtbNSwgMSwgN10sIFszLCAyLCAxXV0sICdzb3J0Jyk7XG4gICAgICogLy8gPT4gW1sxLCA1LCA3XSwgWzEsIDIsIDNdXVxuICAgICAqXG4gICAgICogXy5pbnZva2UoWzEyMywgNDU2XSwgU3RyaW5nLnByb3RvdHlwZS5zcGxpdCwgJycpO1xuICAgICAqIC8vID0+IFtbJzEnLCAnMicsICczJ10sIFsnNCcsICc1JywgJzYnXV1cbiAgICAgKi9cbiAgICB2YXIgaW52b2tlID0gcmVzdFBhcmFtKGZ1bmN0aW9uKGNvbGxlY3Rpb24sIHBhdGgsIGFyZ3MpIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGlzRnVuYyA9IHR5cGVvZiBwYXRoID09ICdmdW5jdGlvbicsXG4gICAgICAgICAgaXNQcm9wID0gaXNLZXkocGF0aCksXG4gICAgICAgICAgcmVzdWx0ID0gaXNBcnJheUxpa2UoY29sbGVjdGlvbikgPyBBcnJheShjb2xsZWN0aW9uLmxlbmd0aCkgOiBbXTtcblxuICAgICAgYmFzZUVhY2goY29sbGVjdGlvbiwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgdmFyIGZ1bmMgPSBpc0Z1bmMgPyBwYXRoIDogKChpc1Byb3AgJiYgdmFsdWUgIT0gbnVsbCkgPyB2YWx1ZVtwYXRoXSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIHJlc3VsdFsrK2luZGV4XSA9IGZ1bmMgPyBmdW5jLmFwcGx5KHZhbHVlLCBhcmdzKSA6IGludm9rZVBhdGgodmFsdWUsIHBhdGgsIGFyZ3MpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhcnJheSBvZiB2YWx1ZXMgYnkgcnVubmluZyBlYWNoIGVsZW1lbnQgaW4gYGNvbGxlY3Rpb25gIHRocm91Z2hcbiAgICAgKiBgaXRlcmF0ZWVgLiBUaGUgYGl0ZXJhdGVlYCBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZVxuICAgICAqIGFyZ3VtZW50czogKHZhbHVlLCBpbmRleHxrZXksIGNvbGxlY3Rpb24pLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgaXRlcmF0ZWVgIHRoZSBjcmVhdGVkIGBfLnByb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYSB2YWx1ZSBpcyBhbHNvIHByb3ZpZGVkIGZvciBgdGhpc0FyZ2AgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc1Byb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgYSBtYXRjaGluZyBwcm9wZXJ0eVxuICAgICAqIHZhbHVlLCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBpdGVyYXRlZWAgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc2Agc3R5bGVcbiAgICAgKiBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlblxuICAgICAqIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogTWFueSBsb2Rhc2ggbWV0aG9kcyBhcmUgZ3VhcmRlZCB0byB3b3JrIGFzIGl0ZXJhdGVlcyBmb3IgbWV0aG9kcyBsaWtlXG4gICAgICogYF8uZXZlcnlgLCBgXy5maWx0ZXJgLCBgXy5tYXBgLCBgXy5tYXBWYWx1ZXNgLCBgXy5yZWplY3RgLCBhbmQgYF8uc29tZWAuXG4gICAgICpcbiAgICAgKiBUaGUgZ3VhcmRlZCBtZXRob2RzIGFyZTpcbiAgICAgKiBgYXJ5YCwgYGNhbGxiYWNrYCwgYGNodW5rYCwgYGNsb25lYCwgYGNyZWF0ZWAsIGBjdXJyeWAsIGBjdXJyeVJpZ2h0YCxcbiAgICAgKiBgZHJvcGAsIGBkcm9wUmlnaHRgLCBgZXZlcnlgLCBgZmlsbGAsIGBmbGF0dGVuYCwgYGludmVydGAsIGBtYXhgLCBgbWluYCxcbiAgICAgKiBgcGFyc2VJbnRgLCBgc2xpY2VgLCBgc29ydEJ5YCwgYHRha2VgLCBgdGFrZVJpZ2h0YCwgYHRlbXBsYXRlYCwgYHRyaW1gLFxuICAgICAqIGB0cmltTGVmdGAsIGB0cmltUmlnaHRgLCBgdHJ1bmNgLCBgcmFuZG9tYCwgYHJhbmdlYCwgYHNhbXBsZWAsIGBzb21lYCxcbiAgICAgKiBgc3VtYCwgYHVuaXFgLCBhbmQgYHdvcmRzYFxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGFsaWFzIGNvbGxlY3RcbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvblxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbaXRlcmF0ZWU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWRcbiAgICAgKiAgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGl0ZXJhdGVlYC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBtYXBwZWQgYXJyYXkuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGZ1bmN0aW9uIHRpbWVzVGhyZWUobikge1xuICAgICAqICAgcmV0dXJuIG4gKiAzO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIF8ubWFwKFsxLCAyXSwgdGltZXNUaHJlZSk7XG4gICAgICogLy8gPT4gWzMsIDZdXG4gICAgICpcbiAgICAgKiBfLm1hcCh7ICdhJzogMSwgJ2InOiAyIH0sIHRpbWVzVGhyZWUpO1xuICAgICAqIC8vID0+IFszLCA2XSAoaXRlcmF0aW9uIG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkKVxuICAgICAqXG4gICAgICogdmFyIHVzZXJzID0gW1xuICAgICAqICAgeyAndXNlcic6ICdiYXJuZXknIH0sXG4gICAgICogICB7ICd1c2VyJzogJ2ZyZWQnIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLnByb3BlcnR5YCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLm1hcCh1c2VycywgJ3VzZXInKTtcbiAgICAgKiAvLyA9PiBbJ2Jhcm5leScsICdmcmVkJ11cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBtYXAoY29sbGVjdGlvbiwgaXRlcmF0ZWUsIHRoaXNBcmcpIHtcbiAgICAgIHZhciBmdW5jID0gaXNBcnJheShjb2xsZWN0aW9uKSA/IGFycmF5TWFwIDogYmFzZU1hcDtcbiAgICAgIGl0ZXJhdGVlID0gZ2V0Q2FsbGJhY2soaXRlcmF0ZWUsIHRoaXNBcmcsIDMpO1xuICAgICAgcmV0dXJuIGZ1bmMoY29sbGVjdGlvbiwgaXRlcmF0ZWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgZWxlbWVudHMgc3BsaXQgaW50byB0d28gZ3JvdXBzLCB0aGUgZmlyc3Qgb2Ygd2hpY2hcbiAgICAgKiBjb250YWlucyBlbGVtZW50cyBgcHJlZGljYXRlYCByZXR1cm5zIHRydXRoeSBmb3IsIHdoaWxlIHRoZSBzZWNvbmQgb2Ygd2hpY2hcbiAgICAgKiBjb250YWlucyBlbGVtZW50cyBgcHJlZGljYXRlYCByZXR1cm5zIGZhbHNleSBmb3IuIFRoZSBwcmVkaWNhdGUgaXMgYm91bmRcbiAgICAgKiB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM6ICh2YWx1ZSwgaW5kZXh8a2V5LCBjb2xsZWN0aW9uKS5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYHByZWRpY2F0ZWAgdGhlIGNyZWF0ZWQgYF8ucHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhIHZhbHVlIGlzIGFsc28gcHJvdmlkZWQgZm9yIGB0aGlzQXJnYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzUHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSBhIG1hdGNoaW5nIHByb3BlcnR5XG4gICAgICogdmFsdWUsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYHByZWRpY2F0ZWAgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc2Agc3R5bGVcbiAgICAgKiBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlblxuICAgICAqIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25cbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW3ByZWRpY2F0ZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZFxuICAgICAqICBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgcHJlZGljYXRlYC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIGdyb3VwZWQgZWxlbWVudHMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ucGFydGl0aW9uKFsxLCAyLCAzXSwgZnVuY3Rpb24obikge1xuICAgICAqICAgcmV0dXJuIG4gJSAyO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IFtbMSwgM10sIFsyXV1cbiAgICAgKlxuICAgICAqIF8ucGFydGl0aW9uKFsxLjIsIDIuMywgMy40XSwgZnVuY3Rpb24obikge1xuICAgICAqICAgcmV0dXJuIHRoaXMuZmxvb3IobikgJSAyO1xuICAgICAqIH0sIE1hdGgpO1xuICAgICAqIC8vID0+IFtbMS4yLCAzLjRdLCBbMi4zXV1cbiAgICAgKlxuICAgICAqIHZhciB1c2VycyA9IFtcbiAgICAgKiAgIHsgJ3VzZXInOiAnYmFybmV5JywgICdhZ2UnOiAzNiwgJ2FjdGl2ZSc6IGZhbHNlIH0sXG4gICAgICogICB7ICd1c2VyJzogJ2ZyZWQnLCAgICAnYWdlJzogNDAsICdhY3RpdmUnOiB0cnVlIH0sXG4gICAgICogICB7ICd1c2VyJzogJ3BlYmJsZXMnLCAnYWdlJzogMSwgICdhY3RpdmUnOiBmYWxzZSB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIHZhciBtYXBwZXIgPSBmdW5jdGlvbihhcnJheSkge1xuICAgICAqICAgcmV0dXJuIF8ucGx1Y2soYXJyYXksICd1c2VyJyk7XG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5tYXRjaGVzYCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLm1hcChfLnBhcnRpdGlvbih1c2VycywgeyAnYWdlJzogMSwgJ2FjdGl2ZSc6IGZhbHNlIH0pLCBtYXBwZXIpO1xuICAgICAqIC8vID0+IFtbJ3BlYmJsZXMnXSwgWydiYXJuZXknLCAnZnJlZCddXVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLm1hdGNoZXNQcm9wZXJ0eWAgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5tYXAoXy5wYXJ0aXRpb24odXNlcnMsICdhY3RpdmUnLCBmYWxzZSksIG1hcHBlcik7XG4gICAgICogLy8gPT4gW1snYmFybmV5JywgJ3BlYmJsZXMnXSwgWydmcmVkJ11dXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ucHJvcGVydHlgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8ubWFwKF8ucGFydGl0aW9uKHVzZXJzLCAnYWN0aXZlJyksIG1hcHBlcik7XG4gICAgICogLy8gPT4gW1snZnJlZCddLCBbJ2Jhcm5leScsICdwZWJibGVzJ11dXG4gICAgICovXG4gICAgdmFyIHBhcnRpdGlvbiA9IGNyZWF0ZUFnZ3JlZ2F0b3IoZnVuY3Rpb24ocmVzdWx0LCB2YWx1ZSwga2V5KSB7XG4gICAgICByZXN1bHRba2V5ID8gMCA6IDFdLnB1c2godmFsdWUpO1xuICAgIH0sIGZ1bmN0aW9uKCkgeyByZXR1cm4gW1tdLCBbXV07IH0pO1xuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgcHJvcGVydHkgdmFsdWUgb2YgYHBhdGhgIGZyb20gYWxsIGVsZW1lbnRzIGluIGBjb2xsZWN0aW9uYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gcGx1Y2suXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBwcm9wZXJ0eSB2YWx1ZXMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciB1c2VycyA9IFtcbiAgICAgKiAgIHsgJ3VzZXInOiAnYmFybmV5JywgJ2FnZSc6IDM2IH0sXG4gICAgICogICB7ICd1c2VyJzogJ2ZyZWQnLCAgICdhZ2UnOiA0MCB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIF8ucGx1Y2sodXNlcnMsICd1c2VyJyk7XG4gICAgICogLy8gPT4gWydiYXJuZXknLCAnZnJlZCddXG4gICAgICpcbiAgICAgKiB2YXIgdXNlckluZGV4ID0gXy5pbmRleEJ5KHVzZXJzLCAndXNlcicpO1xuICAgICAqIF8ucGx1Y2sodXNlckluZGV4LCAnYWdlJyk7XG4gICAgICogLy8gPT4gWzM2LCA0MF0gKGl0ZXJhdGlvbiBvcmRlciBpcyBub3QgZ3VhcmFudGVlZClcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBwbHVjayhjb2xsZWN0aW9uLCBwYXRoKSB7XG4gICAgICByZXR1cm4gbWFwKGNvbGxlY3Rpb24sIHByb3BlcnR5KHBhdGgpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZWR1Y2VzIGBjb2xsZWN0aW9uYCB0byBhIHZhbHVlIHdoaWNoIGlzIHRoZSBhY2N1bXVsYXRlZCByZXN1bHQgb2YgcnVubmluZ1xuICAgICAqIGVhY2ggZWxlbWVudCBpbiBgY29sbGVjdGlvbmAgdGhyb3VnaCBgaXRlcmF0ZWVgLCB3aGVyZSBlYWNoIHN1Y2Nlc3NpdmVcbiAgICAgKiBpbnZvY2F0aW9uIGlzIHN1cHBsaWVkIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIHByZXZpb3VzLiBJZiBgYWNjdW11bGF0b3JgXG4gICAgICogaXMgbm90IHByb3ZpZGVkIHRoZSBmaXJzdCBlbGVtZW50IG9mIGBjb2xsZWN0aW9uYCBpcyB1c2VkIGFzIHRoZSBpbml0aWFsXG4gICAgICogdmFsdWUuIFRoZSBgaXRlcmF0ZWVgIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIGZvdXIgYXJndW1lbnRzOlxuICAgICAqIChhY2N1bXVsYXRvciwgdmFsdWUsIGluZGV4fGtleSwgY29sbGVjdGlvbikuXG4gICAgICpcbiAgICAgKiBNYW55IGxvZGFzaCBtZXRob2RzIGFyZSBndWFyZGVkIHRvIHdvcmsgYXMgaXRlcmF0ZWVzIGZvciBtZXRob2RzIGxpa2VcbiAgICAgKiBgXy5yZWR1Y2VgLCBgXy5yZWR1Y2VSaWdodGAsIGFuZCBgXy50cmFuc2Zvcm1gLlxuICAgICAqXG4gICAgICogVGhlIGd1YXJkZWQgbWV0aG9kcyBhcmU6XG4gICAgICogYGFzc2lnbmAsIGBkZWZhdWx0c2AsIGBkZWZhdWx0c0RlZXBgLCBgaW5jbHVkZXNgLCBgbWVyZ2VgLCBgc29ydEJ5QWxsYCxcbiAgICAgKiBhbmQgYHNvcnRCeU9yZGVyYFxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGFsaWFzIGZvbGRsLCBpbmplY3RcbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvblxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2l0ZXJhdGVlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbYWNjdW11bGF0b3JdIFRoZSBpbml0aWFsIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgaXRlcmF0ZWVgLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBhY2N1bXVsYXRlZCB2YWx1ZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5yZWR1Y2UoWzEsIDJdLCBmdW5jdGlvbih0b3RhbCwgbikge1xuICAgICAqICAgcmV0dXJuIHRvdGFsICsgbjtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiAzXG4gICAgICpcbiAgICAgKiBfLnJlZHVjZSh7ICdhJzogMSwgJ2InOiAyIH0sIGZ1bmN0aW9uKHJlc3VsdCwgbiwga2V5KSB7XG4gICAgICogICByZXN1bHRba2V5XSA9IG4gKiAzO1xuICAgICAqICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgKiB9LCB7fSk7XG4gICAgICogLy8gPT4geyAnYSc6IDMsICdiJzogNiB9IChpdGVyYXRpb24gb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQpXG4gICAgICovXG4gICAgdmFyIHJlZHVjZSA9IGNyZWF0ZVJlZHVjZShhcnJheVJlZHVjZSwgYmFzZUVhY2gpO1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5yZWR1Y2VgIGV4Y2VwdCB0aGF0IGl0IGl0ZXJhdGVzIG92ZXIgZWxlbWVudHMgb2ZcbiAgICAgKiBgY29sbGVjdGlvbmAgZnJvbSByaWdodCB0byBsZWZ0LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGFsaWFzIGZvbGRyXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25cbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtpdGVyYXRlZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW2FjY3VtdWxhdG9yXSBUaGUgaW5pdGlhbCB2YWx1ZS5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGl0ZXJhdGVlYC5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgYWNjdW11bGF0ZWQgdmFsdWUuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBhcnJheSA9IFtbMCwgMV0sIFsyLCAzXSwgWzQsIDVdXTtcbiAgICAgKlxuICAgICAqIF8ucmVkdWNlUmlnaHQoYXJyYXksIGZ1bmN0aW9uKGZsYXR0ZW5lZCwgb3RoZXIpIHtcbiAgICAgKiAgIHJldHVybiBmbGF0dGVuZWQuY29uY2F0KG90aGVyKTtcbiAgICAgKiB9LCBbXSk7XG4gICAgICogLy8gPT4gWzQsIDUsIDIsIDMsIDAsIDFdXG4gICAgICovXG4gICAgdmFyIHJlZHVjZVJpZ2h0ID0gY3JlYXRlUmVkdWNlKGFycmF5UmVkdWNlUmlnaHQsIGJhc2VFYWNoUmlnaHQpO1xuXG4gICAgLyoqXG4gICAgICogVGhlIG9wcG9zaXRlIG9mIGBfLmZpbHRlcmA7IHRoaXMgbWV0aG9kIHJldHVybnMgdGhlIGVsZW1lbnRzIG9mIGBjb2xsZWN0aW9uYFxuICAgICAqIHRoYXQgYHByZWRpY2F0ZWAgZG9lcyAqKm5vdCoqIHJldHVybiB0cnV0aHkgZm9yLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25cbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW3ByZWRpY2F0ZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZFxuICAgICAqICBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgcHJlZGljYXRlYC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBmaWx0ZXJlZCBhcnJheS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5yZWplY3QoWzEsIDIsIDMsIDRdLCBmdW5jdGlvbihuKSB7XG4gICAgICogICByZXR1cm4gbiAlIDIgPT0gMDtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiBbMSwgM11cbiAgICAgKlxuICAgICAqIHZhciB1c2VycyA9IFtcbiAgICAgKiAgIHsgJ3VzZXInOiAnYmFybmV5JywgJ2FnZSc6IDM2LCAnYWN0aXZlJzogZmFsc2UgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAnZnJlZCcsICAgJ2FnZSc6IDQwLCAnYWN0aXZlJzogdHJ1ZSB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5tYXRjaGVzYCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLnBsdWNrKF8ucmVqZWN0KHVzZXJzLCB7ICdhZ2UnOiA0MCwgJ2FjdGl2ZSc6IHRydWUgfSksICd1c2VyJyk7XG4gICAgICogLy8gPT4gWydiYXJuZXknXVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLm1hdGNoZXNQcm9wZXJ0eWAgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5wbHVjayhfLnJlamVjdCh1c2VycywgJ2FjdGl2ZScsIGZhbHNlKSwgJ3VzZXInKTtcbiAgICAgKiAvLyA9PiBbJ2ZyZWQnXVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLnByb3BlcnR5YCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLnBsdWNrKF8ucmVqZWN0KHVzZXJzLCAnYWN0aXZlJyksICd1c2VyJyk7XG4gICAgICogLy8gPT4gWydiYXJuZXknXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlamVjdChjb2xsZWN0aW9uLCBwcmVkaWNhdGUsIHRoaXNBcmcpIHtcbiAgICAgIHZhciBmdW5jID0gaXNBcnJheShjb2xsZWN0aW9uKSA/IGFycmF5RmlsdGVyIDogYmFzZUZpbHRlcjtcbiAgICAgIHByZWRpY2F0ZSA9IGdldENhbGxiYWNrKHByZWRpY2F0ZSwgdGhpc0FyZywgMyk7XG4gICAgICByZXR1cm4gZnVuYyhjb2xsZWN0aW9uLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuICFwcmVkaWNhdGUodmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgYSByYW5kb20gZWxlbWVudCBvciBgbmAgcmFuZG9tIGVsZW1lbnRzIGZyb20gYSBjb2xsZWN0aW9uLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25cbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gc2FtcGxlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbl0gVGhlIG51bWJlciBvZiBlbGVtZW50cyB0byBzYW1wbGUuXG4gICAgICogQHBhcmFtLSB7T2JqZWN0fSBbZ3VhcmRdIEVuYWJsZXMgdXNlIGFzIGEgY2FsbGJhY2sgZm9yIGZ1bmN0aW9ucyBsaWtlIGBfLm1hcGAuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHJhbmRvbSBzYW1wbGUocykuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uc2FtcGxlKFsxLCAyLCAzLCA0XSk7XG4gICAgICogLy8gPT4gMlxuICAgICAqXG4gICAgICogXy5zYW1wbGUoWzEsIDIsIDMsIDRdLCAyKTtcbiAgICAgKiAvLyA9PiBbMywgMV1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzYW1wbGUoY29sbGVjdGlvbiwgbiwgZ3VhcmQpIHtcbiAgICAgIGlmIChndWFyZCA/IGlzSXRlcmF0ZWVDYWxsKGNvbGxlY3Rpb24sIG4sIGd1YXJkKSA6IG4gPT0gbnVsbCkge1xuICAgICAgICBjb2xsZWN0aW9uID0gdG9JdGVyYWJsZShjb2xsZWN0aW9uKTtcbiAgICAgICAgdmFyIGxlbmd0aCA9IGNvbGxlY3Rpb24ubGVuZ3RoO1xuICAgICAgICByZXR1cm4gbGVuZ3RoID4gMCA/IGNvbGxlY3Rpb25bYmFzZVJhbmRvbSgwLCBsZW5ndGggLSAxKV0gOiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICByZXN1bHQgPSB0b0FycmF5KGNvbGxlY3Rpb24pLFxuICAgICAgICAgIGxlbmd0aCA9IHJlc3VsdC5sZW5ndGgsXG4gICAgICAgICAgbGFzdEluZGV4ID0gbGVuZ3RoIC0gMTtcblxuICAgICAgbiA9IG5hdGl2ZU1pbihuIDwgMCA/IDAgOiAoK24gfHwgMCksIGxlbmd0aCk7XG4gICAgICB3aGlsZSAoKytpbmRleCA8IG4pIHtcbiAgICAgICAgdmFyIHJhbmQgPSBiYXNlUmFuZG9tKGluZGV4LCBsYXN0SW5kZXgpLFxuICAgICAgICAgICAgdmFsdWUgPSByZXN1bHRbcmFuZF07XG5cbiAgICAgICAgcmVzdWx0W3JhbmRdID0gcmVzdWx0W2luZGV4XTtcbiAgICAgICAgcmVzdWx0W2luZGV4XSA9IHZhbHVlO1xuICAgICAgfVxuICAgICAgcmVzdWx0Lmxlbmd0aCA9IG47XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgb2Ygc2h1ZmZsZWQgdmFsdWVzLCB1c2luZyBhIHZlcnNpb24gb2YgdGhlXG4gICAgICogW0Zpc2hlci1ZYXRlcyBzaHVmZmxlXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9GaXNoZXItWWF0ZXNfc2h1ZmZsZSkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvblxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBzaHVmZmxlLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IHNodWZmbGVkIGFycmF5LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnNodWZmbGUoWzEsIDIsIDMsIDRdKTtcbiAgICAgKiAvLyA9PiBbNCwgMSwgMywgMl1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzaHVmZmxlKGNvbGxlY3Rpb24pIHtcbiAgICAgIHJldHVybiBzYW1wbGUoY29sbGVjdGlvbiwgUE9TSVRJVkVfSU5GSU5JVFkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHNpemUgb2YgYGNvbGxlY3Rpb25gIGJ5IHJldHVybmluZyBpdHMgbGVuZ3RoIGZvciBhcnJheS1saWtlXG4gICAgICogdmFsdWVzIG9yIHRoZSBudW1iZXIgb2Ygb3duIGVudW1lcmFibGUgcHJvcGVydGllcyBmb3Igb2JqZWN0cy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGluc3BlY3QuXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgc2l6ZSBvZiBgY29sbGVjdGlvbmAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uc2l6ZShbMSwgMiwgM10pO1xuICAgICAqIC8vID0+IDNcbiAgICAgKlxuICAgICAqIF8uc2l6ZSh7ICdhJzogMSwgJ2InOiAyIH0pO1xuICAgICAqIC8vID0+IDJcbiAgICAgKlxuICAgICAqIF8uc2l6ZSgncGViYmxlcycpO1xuICAgICAqIC8vID0+IDdcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzaXplKGNvbGxlY3Rpb24pIHtcbiAgICAgIHZhciBsZW5ndGggPSBjb2xsZWN0aW9uID8gZ2V0TGVuZ3RoKGNvbGxlY3Rpb24pIDogMDtcbiAgICAgIHJldHVybiBpc0xlbmd0aChsZW5ndGgpID8gbGVuZ3RoIDoga2V5cyhjb2xsZWN0aW9uKS5sZW5ndGg7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGBwcmVkaWNhdGVgIHJldHVybnMgdHJ1dGh5IGZvciAqKmFueSoqIGVsZW1lbnQgb2YgYGNvbGxlY3Rpb25gLlxuICAgICAqIFRoZSBmdW5jdGlvbiByZXR1cm5zIGFzIHNvb24gYXMgaXQgZmluZHMgYSBwYXNzaW5nIHZhbHVlIGFuZCBkb2VzIG5vdCBpdGVyYXRlXG4gICAgICogb3ZlciB0aGUgZW50aXJlIGNvbGxlY3Rpb24uIFRoZSBwcmVkaWNhdGUgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkXG4gICAgICogd2l0aCB0aHJlZSBhcmd1bWVudHM6ICh2YWx1ZSwgaW5kZXh8a2V5LCBjb2xsZWN0aW9uKS5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYHByZWRpY2F0ZWAgdGhlIGNyZWF0ZWQgYF8ucHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhIHZhbHVlIGlzIGFsc28gcHJvdmlkZWQgZm9yIGB0aGlzQXJnYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzUHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSBhIG1hdGNoaW5nIHByb3BlcnR5XG4gICAgICogdmFsdWUsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYHByZWRpY2F0ZWAgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc2Agc3R5bGVcbiAgICAgKiBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlblxuICAgICAqIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGFsaWFzIGFueVxuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtwcmVkaWNhdGU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWRcbiAgICAgKiAgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYHByZWRpY2F0ZWAuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFueSBlbGVtZW50IHBhc3NlcyB0aGUgcHJlZGljYXRlIGNoZWNrLFxuICAgICAqICBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uc29tZShbbnVsbCwgMCwgJ3llcycsIGZhbHNlXSwgQm9vbGVhbik7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogdmFyIHVzZXJzID0gW1xuICAgICAqICAgeyAndXNlcic6ICdiYXJuZXknLCAnYWN0aXZlJzogdHJ1ZSB9LFxuICAgICAqICAgeyAndXNlcic6ICdmcmVkJywgICAnYWN0aXZlJzogZmFsc2UgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ubWF0Y2hlc2AgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5zb21lKHVzZXJzLCB7ICd1c2VyJzogJ2Jhcm5leScsICdhY3RpdmUnOiBmYWxzZSB9KTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLm1hdGNoZXNQcm9wZXJ0eWAgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5zb21lKHVzZXJzLCAnYWN0aXZlJywgZmFsc2UpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5wcm9wZXJ0eWAgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5zb21lKHVzZXJzLCAnYWN0aXZlJyk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHNvbWUoY29sbGVjdGlvbiwgcHJlZGljYXRlLCB0aGlzQXJnKSB7XG4gICAgICB2YXIgZnVuYyA9IGlzQXJyYXkoY29sbGVjdGlvbikgPyBhcnJheVNvbWUgOiBiYXNlU29tZTtcbiAgICAgIGlmICh0aGlzQXJnICYmIGlzSXRlcmF0ZWVDYWxsKGNvbGxlY3Rpb24sIHByZWRpY2F0ZSwgdGhpc0FyZykpIHtcbiAgICAgICAgcHJlZGljYXRlID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBwcmVkaWNhdGUgIT0gJ2Z1bmN0aW9uJyB8fCB0aGlzQXJnICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcHJlZGljYXRlID0gZ2V0Q2FsbGJhY2socHJlZGljYXRlLCB0aGlzQXJnLCAzKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmdW5jKGNvbGxlY3Rpb24sIHByZWRpY2F0ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhcnJheSBvZiBlbGVtZW50cywgc29ydGVkIGluIGFzY2VuZGluZyBvcmRlciBieSB0aGUgcmVzdWx0cyBvZlxuICAgICAqIHJ1bm5pbmcgZWFjaCBlbGVtZW50IGluIGEgY29sbGVjdGlvbiB0aHJvdWdoIGBpdGVyYXRlZWAuIFRoaXMgbWV0aG9kIHBlcmZvcm1zXG4gICAgICogYSBzdGFibGUgc29ydCwgdGhhdCBpcywgaXQgcHJlc2VydmVzIHRoZSBvcmlnaW5hbCBzb3J0IG9yZGVyIG9mIGVxdWFsIGVsZW1lbnRzLlxuICAgICAqIFRoZSBgaXRlcmF0ZWVgIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50czpcbiAgICAgKiAodmFsdWUsIGluZGV4fGtleSwgY29sbGVjdGlvbikuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBpdGVyYXRlZWAgdGhlIGNyZWF0ZWQgYF8ucHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhIHZhbHVlIGlzIGFsc28gcHJvdmlkZWQgZm9yIGB0aGlzQXJnYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzUHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSBhIG1hdGNoaW5nIHByb3BlcnR5XG4gICAgICogdmFsdWUsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGl0ZXJhdGVlYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzYCBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuXG4gICAgICogb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvblxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbaXRlcmF0ZWU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWRcbiAgICAgKiAgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGl0ZXJhdGVlYC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBzb3J0ZWQgYXJyYXkuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uc29ydEJ5KFsxLCAyLCAzXSwgZnVuY3Rpb24obikge1xuICAgICAqICAgcmV0dXJuIE1hdGguc2luKG4pO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IFszLCAxLCAyXVxuICAgICAqXG4gICAgICogXy5zb3J0QnkoWzEsIDIsIDNdLCBmdW5jdGlvbihuKSB7XG4gICAgICogICByZXR1cm4gdGhpcy5zaW4obik7XG4gICAgICogfSwgTWF0aCk7XG4gICAgICogLy8gPT4gWzMsIDEsIDJdXG4gICAgICpcbiAgICAgKiB2YXIgdXNlcnMgPSBbXG4gICAgICogICB7ICd1c2VyJzogJ2ZyZWQnIH0sXG4gICAgICogICB7ICd1c2VyJzogJ3BlYmJsZXMnIH0sXG4gICAgICogICB7ICd1c2VyJzogJ2Jhcm5leScgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ucHJvcGVydHlgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8ucGx1Y2soXy5zb3J0QnkodXNlcnMsICd1c2VyJyksICd1c2VyJyk7XG4gICAgICogLy8gPT4gWydiYXJuZXknLCAnZnJlZCcsICdwZWJibGVzJ11cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzb3J0QnkoY29sbGVjdGlvbiwgaXRlcmF0ZWUsIHRoaXNBcmcpIHtcbiAgICAgIGlmIChjb2xsZWN0aW9uID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXNBcmcgJiYgaXNJdGVyYXRlZUNhbGwoY29sbGVjdGlvbiwgaXRlcmF0ZWUsIHRoaXNBcmcpKSB7XG4gICAgICAgIGl0ZXJhdGVlID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgdmFyIGluZGV4ID0gLTE7XG4gICAgICBpdGVyYXRlZSA9IGdldENhbGxiYWNrKGl0ZXJhdGVlLCB0aGlzQXJnLCAzKTtcblxuICAgICAgdmFyIHJlc3VsdCA9IGJhc2VNYXAoY29sbGVjdGlvbiwgZnVuY3Rpb24odmFsdWUsIGtleSwgY29sbGVjdGlvbikge1xuICAgICAgICByZXR1cm4geyAnY3JpdGVyaWEnOiBpdGVyYXRlZSh2YWx1ZSwga2V5LCBjb2xsZWN0aW9uKSwgJ2luZGV4JzogKytpbmRleCwgJ3ZhbHVlJzogdmFsdWUgfTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGJhc2VTb3J0QnkocmVzdWx0LCBjb21wYXJlQXNjZW5kaW5nKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLnNvcnRCeWAgZXhjZXB0IHRoYXQgaXQgY2FuIHNvcnQgYnkgbXVsdGlwbGUgaXRlcmF0ZWVzXG4gICAgICogb3IgcHJvcGVydHkgbmFtZXMuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGFuIGl0ZXJhdGVlIHRoZSBjcmVhdGVkIGBfLnByb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBhbiBpdGVyYXRlZSB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzYCBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuXG4gICAgICogb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvblxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHsuLi4oRnVuY3Rpb258RnVuY3Rpb25bXXxPYmplY3R8T2JqZWN0W118c3RyaW5nfHN0cmluZ1tdKX0gaXRlcmF0ZWVzXG4gICAgICogIFRoZSBpdGVyYXRlZXMgdG8gc29ydCBieSwgc3BlY2lmaWVkIGFzIGluZGl2aWR1YWwgdmFsdWVzIG9yIGFycmF5cyBvZiB2YWx1ZXMuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgc29ydGVkIGFycmF5LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgdXNlcnMgPSBbXG4gICAgICogICB7ICd1c2VyJzogJ2ZyZWQnLCAgICdhZ2UnOiA0OCB9LFxuICAgICAqICAgeyAndXNlcic6ICdiYXJuZXknLCAnYWdlJzogMzYgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAnZnJlZCcsICAgJ2FnZSc6IDQyIH0sXG4gICAgICogICB7ICd1c2VyJzogJ2Jhcm5leScsICdhZ2UnOiAzNCB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIF8ubWFwKF8uc29ydEJ5QWxsKHVzZXJzLCBbJ3VzZXInLCAnYWdlJ10pLCBfLnZhbHVlcyk7XG4gICAgICogLy8gPT4gW1snYmFybmV5JywgMzRdLCBbJ2Jhcm5leScsIDM2XSwgWydmcmVkJywgNDJdLCBbJ2ZyZWQnLCA0OF1dXG4gICAgICpcbiAgICAgKiBfLm1hcChfLnNvcnRCeUFsbCh1c2VycywgJ3VzZXInLCBmdW5jdGlvbihjaHIpIHtcbiAgICAgKiAgIHJldHVybiBNYXRoLmZsb29yKGNoci5hZ2UgLyAxMCk7XG4gICAgICogfSksIF8udmFsdWVzKTtcbiAgICAgKiAvLyA9PiBbWydiYXJuZXknLCAzNl0sIFsnYmFybmV5JywgMzRdLCBbJ2ZyZWQnLCA0OF0sIFsnZnJlZCcsIDQyXV1cbiAgICAgKi9cbiAgICB2YXIgc29ydEJ5QWxsID0gcmVzdFBhcmFtKGZ1bmN0aW9uKGNvbGxlY3Rpb24sIGl0ZXJhdGVlcykge1xuICAgICAgaWYgKGNvbGxlY3Rpb24gPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgICB2YXIgZ3VhcmQgPSBpdGVyYXRlZXNbMl07XG4gICAgICBpZiAoZ3VhcmQgJiYgaXNJdGVyYXRlZUNhbGwoaXRlcmF0ZWVzWzBdLCBpdGVyYXRlZXNbMV0sIGd1YXJkKSkge1xuICAgICAgICBpdGVyYXRlZXMubGVuZ3RoID0gMTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBiYXNlU29ydEJ5T3JkZXIoY29sbGVjdGlvbiwgYmFzZUZsYXR0ZW4oaXRlcmF0ZWVzKSwgW10pO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5zb3J0QnlBbGxgIGV4Y2VwdCB0aGF0IGl0IGFsbG93cyBzcGVjaWZ5aW5nIHRoZVxuICAgICAqIHNvcnQgb3JkZXJzIG9mIHRoZSBpdGVyYXRlZXMgdG8gc29ydCBieS4gSWYgYG9yZGVyc2AgaXMgdW5zcGVjaWZpZWQsIGFsbFxuICAgICAqIHZhbHVlcyBhcmUgc29ydGVkIGluIGFzY2VuZGluZyBvcmRlci4gT3RoZXJ3aXNlLCBhIHZhbHVlIGlzIHNvcnRlZCBpblxuICAgICAqIGFzY2VuZGluZyBvcmRlciBpZiBpdHMgY29ycmVzcG9uZGluZyBvcmRlciBpcyBcImFzY1wiLCBhbmQgZGVzY2VuZGluZyBpZiBcImRlc2NcIi5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYW4gaXRlcmF0ZWUgdGhlIGNyZWF0ZWQgYF8ucHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGFuIGl0ZXJhdGVlIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNgIHN0eWxlXG4gICAgICogY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW5cbiAgICAgKiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9uW118T2JqZWN0W118c3RyaW5nW119IGl0ZXJhdGVlcyBUaGUgaXRlcmF0ZWVzIHRvIHNvcnQgYnkuXG4gICAgICogQHBhcmFtIHtib29sZWFuW119IFtvcmRlcnNdIFRoZSBzb3J0IG9yZGVycyBvZiBgaXRlcmF0ZWVzYC5cbiAgICAgKiBAcGFyYW0tIHtPYmplY3R9IFtndWFyZF0gRW5hYmxlcyB1c2UgYXMgYSBjYWxsYmFjayBmb3IgZnVuY3Rpb25zIGxpa2UgYF8ucmVkdWNlYC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBzb3J0ZWQgYXJyYXkuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciB1c2VycyA9IFtcbiAgICAgKiAgIHsgJ3VzZXInOiAnZnJlZCcsICAgJ2FnZSc6IDQ4IH0sXG4gICAgICogICB7ICd1c2VyJzogJ2Jhcm5leScsICdhZ2UnOiAzNCB9LFxuICAgICAqICAgeyAndXNlcic6ICdmcmVkJywgICAnYWdlJzogNDIgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAnYmFybmV5JywgJ2FnZSc6IDM2IH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogLy8gc29ydCBieSBgdXNlcmAgaW4gYXNjZW5kaW5nIG9yZGVyIGFuZCBieSBgYWdlYCBpbiBkZXNjZW5kaW5nIG9yZGVyXG4gICAgICogXy5tYXAoXy5zb3J0QnlPcmRlcih1c2VycywgWyd1c2VyJywgJ2FnZSddLCBbJ2FzYycsICdkZXNjJ10pLCBfLnZhbHVlcyk7XG4gICAgICogLy8gPT4gW1snYmFybmV5JywgMzZdLCBbJ2Jhcm5leScsIDM0XSwgWydmcmVkJywgNDhdLCBbJ2ZyZWQnLCA0Ml1dXG4gICAgICovXG4gICAgZnVuY3Rpb24gc29ydEJ5T3JkZXIoY29sbGVjdGlvbiwgaXRlcmF0ZWVzLCBvcmRlcnMsIGd1YXJkKSB7XG4gICAgICBpZiAoY29sbGVjdGlvbiA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICAgIGlmIChndWFyZCAmJiBpc0l0ZXJhdGVlQ2FsbChpdGVyYXRlZXMsIG9yZGVycywgZ3VhcmQpKSB7XG4gICAgICAgIG9yZGVycyA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIGlmICghaXNBcnJheShpdGVyYXRlZXMpKSB7XG4gICAgICAgIGl0ZXJhdGVlcyA9IGl0ZXJhdGVlcyA9PSBudWxsID8gW10gOiBbaXRlcmF0ZWVzXTtcbiAgICAgIH1cbiAgICAgIGlmICghaXNBcnJheShvcmRlcnMpKSB7XG4gICAgICAgIG9yZGVycyA9IG9yZGVycyA9PSBudWxsID8gW10gOiBbb3JkZXJzXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBiYXNlU29ydEJ5T3JkZXIoY29sbGVjdGlvbiwgaXRlcmF0ZWVzLCBvcmRlcnMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBlcmZvcm1zIGEgZGVlcCBjb21wYXJpc29uIGJldHdlZW4gZWFjaCBlbGVtZW50IGluIGBjb2xsZWN0aW9uYCBhbmQgdGhlXG4gICAgICogc291cmNlIG9iamVjdCwgcmV0dXJuaW5nIGFuIGFycmF5IG9mIGFsbCBlbGVtZW50cyB0aGF0IGhhdmUgZXF1aXZhbGVudFxuICAgICAqIHByb3BlcnR5IHZhbHVlcy5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBzdXBwb3J0cyBjb21wYXJpbmcgYXJyYXlzLCBib29sZWFucywgYERhdGVgIG9iamVjdHMsXG4gICAgICogbnVtYmVycywgYE9iamVjdGAgb2JqZWN0cywgcmVnZXhlcywgYW5kIHN0cmluZ3MuIE9iamVjdHMgYXJlIGNvbXBhcmVkIGJ5XG4gICAgICogdGhlaXIgb3duLCBub3QgaW5oZXJpdGVkLCBlbnVtZXJhYmxlIHByb3BlcnRpZXMuIEZvciBjb21wYXJpbmcgYSBzaW5nbGVcbiAgICAgKiBvd24gb3IgaW5oZXJpdGVkIHByb3BlcnR5IHZhbHVlIHNlZSBgXy5tYXRjaGVzUHJvcGVydHlgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25cbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gc2VhcmNoLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgVGhlIG9iamVjdCBvZiBwcm9wZXJ0eSB2YWx1ZXMgdG8gbWF0Y2guXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgZmlsdGVyZWQgYXJyYXkuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciB1c2VycyA9IFtcbiAgICAgKiAgIHsgJ3VzZXInOiAnYmFybmV5JywgJ2FnZSc6IDM2LCAnYWN0aXZlJzogZmFsc2UsICdwZXRzJzogWydob3BweSddIH0sXG4gICAgICogICB7ICd1c2VyJzogJ2ZyZWQnLCAgICdhZ2UnOiA0MCwgJ2FjdGl2ZSc6IHRydWUsICdwZXRzJzogWydiYWJ5IHB1c3MnLCAnZGlubyddIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogXy5wbHVjayhfLndoZXJlKHVzZXJzLCB7ICdhZ2UnOiAzNiwgJ2FjdGl2ZSc6IGZhbHNlIH0pLCAndXNlcicpO1xuICAgICAqIC8vID0+IFsnYmFybmV5J11cbiAgICAgKlxuICAgICAqIF8ucGx1Y2soXy53aGVyZSh1c2VycywgeyAncGV0cyc6IFsnZGlubyddIH0pLCAndXNlcicpO1xuICAgICAqIC8vID0+IFsnZnJlZCddXG4gICAgICovXG4gICAgZnVuY3Rpb24gd2hlcmUoY29sbGVjdGlvbiwgc291cmNlKSB7XG4gICAgICByZXR1cm4gZmlsdGVyKGNvbGxlY3Rpb24sIGJhc2VNYXRjaGVzKHNvdXJjZSkpO1xuICAgIH1cblxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdGhhdCBoYXZlIGVsYXBzZWQgc2luY2UgdGhlIFVuaXggZXBvY2hcbiAgICAgKiAoMSBKYW51YXJ5IDE5NzAgMDA6MDA6MDAgVVRDKS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBEYXRlXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uZGVmZXIoZnVuY3Rpb24oc3RhbXApIHtcbiAgICAgKiAgIGNvbnNvbGUubG9nKF8ubm93KCkgLSBzdGFtcCk7XG4gICAgICogfSwgXy5ub3coKSk7XG4gICAgICogLy8gPT4gbG9ncyB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBpdCB0b29rIGZvciB0aGUgZGVmZXJyZWQgZnVuY3Rpb24gdG8gYmUgaW52b2tlZFxuICAgICAqL1xuICAgIHZhciBub3cgPSBuYXRpdmVOb3cgfHwgZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgfTtcblxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgIC8qKlxuICAgICAqIFRoZSBvcHBvc2l0ZSBvZiBgXy5iZWZvcmVgOyB0aGlzIG1ldGhvZCBjcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBpbnZva2VzXG4gICAgICogYGZ1bmNgIG9uY2UgaXQgaXMgY2FsbGVkIGBuYCBvciBtb3JlIHRpbWVzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG4gVGhlIG51bWJlciBvZiBjYWxscyBiZWZvcmUgYGZ1bmNgIGlzIGludm9rZWQuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gcmVzdHJpY3QuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgcmVzdHJpY3RlZCBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIHNhdmVzID0gWydwcm9maWxlJywgJ3NldHRpbmdzJ107XG4gICAgICpcbiAgICAgKiB2YXIgZG9uZSA9IF8uYWZ0ZXIoc2F2ZXMubGVuZ3RoLCBmdW5jdGlvbigpIHtcbiAgICAgKiAgIGNvbnNvbGUubG9nKCdkb25lIHNhdmluZyEnKTtcbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIF8uZm9yRWFjaChzYXZlcywgZnVuY3Rpb24odHlwZSkge1xuICAgICAqICAgYXN5bmNTYXZlKHsgJ3R5cGUnOiB0eXBlLCAnY29tcGxldGUnOiBkb25lIH0pO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IGxvZ3MgJ2RvbmUgc2F2aW5nIScgYWZ0ZXIgdGhlIHR3byBhc3luYyBzYXZlcyBoYXZlIGNvbXBsZXRlZFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFmdGVyKG4sIGZ1bmMpIHtcbiAgICAgIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGlmICh0eXBlb2YgbiA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdmFyIHRlbXAgPSBuO1xuICAgICAgICAgIG4gPSBmdW5jO1xuICAgICAgICAgIGZ1bmMgPSB0ZW1wO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbiA9IG5hdGl2ZUlzRmluaXRlKG4gPSArbikgPyBuIDogMDtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKC0tbiA8IDEpIHtcbiAgICAgICAgICByZXR1cm4gZnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGFjY2VwdHMgdXAgdG8gYG5gIGFyZ3VtZW50cyBpZ25vcmluZyBhbnlcbiAgICAgKiBhZGRpdGlvbmFsIGFyZ3VtZW50cy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGNhcCBhcmd1bWVudHMgZm9yLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbj1mdW5jLmxlbmd0aF0gVGhlIGFyaXR5IGNhcC5cbiAgICAgKiBAcGFyYW0tIHtPYmplY3R9IFtndWFyZF0gRW5hYmxlcyB1c2UgYXMgYSBjYWxsYmFjayBmb3IgZnVuY3Rpb25zIGxpa2UgYF8ubWFwYC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5tYXAoWyc2JywgJzgnLCAnMTAnXSwgXy5hcnkocGFyc2VJbnQsIDEpKTtcbiAgICAgKiAvLyA9PiBbNiwgOCwgMTBdXG4gICAgICovXG4gICAgZnVuY3Rpb24gYXJ5KGZ1bmMsIG4sIGd1YXJkKSB7XG4gICAgICBpZiAoZ3VhcmQgJiYgaXNJdGVyYXRlZUNhbGwoZnVuYywgbiwgZ3VhcmQpKSB7XG4gICAgICAgIG4gPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICBuID0gKGZ1bmMgJiYgbiA9PSBudWxsKSA/IGZ1bmMubGVuZ3RoIDogbmF0aXZlTWF4KCtuIHx8IDAsIDApO1xuICAgICAgcmV0dXJuIGNyZWF0ZVdyYXBwZXIoZnVuYywgQVJZX0ZMQUcsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgaW52b2tlcyBgZnVuY2AsIHdpdGggdGhlIGB0aGlzYCBiaW5kaW5nIGFuZCBhcmd1bWVudHNcbiAgICAgKiBvZiB0aGUgY3JlYXRlZCBmdW5jdGlvbiwgd2hpbGUgaXQgaXMgY2FsbGVkIGxlc3MgdGhhbiBgbmAgdGltZXMuIFN1YnNlcXVlbnRcbiAgICAgKiBjYWxscyB0byB0aGUgY3JlYXRlZCBmdW5jdGlvbiByZXR1cm4gdGhlIHJlc3VsdCBvZiB0aGUgbGFzdCBgZnVuY2AgaW52b2NhdGlvbi5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBuIFRoZSBudW1iZXIgb2YgY2FsbHMgYXQgd2hpY2ggYGZ1bmNgIGlzIG5vIGxvbmdlciBpbnZva2VkLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHJlc3RyaWN0LlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHJlc3RyaWN0ZWQgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGpRdWVyeSgnI2FkZCcpLm9uKCdjbGljaycsIF8uYmVmb3JlKDUsIGFkZENvbnRhY3RUb0xpc3QpKTtcbiAgICAgKiAvLyA9PiBhbGxvd3MgYWRkaW5nIHVwIHRvIDQgY29udGFjdHMgdG8gdGhlIGxpc3RcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiZWZvcmUobiwgZnVuYykge1xuICAgICAgdmFyIHJlc3VsdDtcbiAgICAgIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGlmICh0eXBlb2YgbiA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdmFyIHRlbXAgPSBuO1xuICAgICAgICAgIG4gPSBmdW5jO1xuICAgICAgICAgIGZ1bmMgPSB0ZW1wO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoLS1uID4gMCkge1xuICAgICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobiA8PSAxKSB7XG4gICAgICAgICAgZnVuYyA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBpbnZva2VzIGBmdW5jYCB3aXRoIHRoZSBgdGhpc2AgYmluZGluZyBvZiBgdGhpc0FyZ2BcbiAgICAgKiBhbmQgcHJlcGVuZHMgYW55IGFkZGl0aW9uYWwgYF8uYmluZGAgYXJndW1lbnRzIHRvIHRob3NlIHByb3ZpZGVkIHRvIHRoZVxuICAgICAqIGJvdW5kIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogVGhlIGBfLmJpbmQucGxhY2Vob2xkZXJgIHZhbHVlLCB3aGljaCBkZWZhdWx0cyB0byBgX2AgaW4gbW9ub2xpdGhpYyBidWlsZHMsXG4gICAgICogbWF5IGJlIHVzZWQgYXMgYSBwbGFjZWhvbGRlciBmb3IgcGFydGlhbGx5IGFwcGxpZWQgYXJndW1lbnRzLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFVubGlrZSBuYXRpdmUgYEZ1bmN0aW9uI2JpbmRgIHRoaXMgbWV0aG9kIGRvZXMgbm90IHNldCB0aGUgXCJsZW5ndGhcIlxuICAgICAqIHByb3BlcnR5IG9mIGJvdW5kIGZ1bmN0aW9ucy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGJpbmQuXG4gICAgICogQHBhcmFtIHsqfSB0aGlzQXJnIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgZnVuY2AuXG4gICAgICogQHBhcmFtIHsuLi4qfSBbcGFydGlhbHNdIFRoZSBhcmd1bWVudHMgdG8gYmUgcGFydGlhbGx5IGFwcGxpZWQuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgYm91bmQgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBncmVldCA9IGZ1bmN0aW9uKGdyZWV0aW5nLCBwdW5jdHVhdGlvbikge1xuICAgICAqICAgcmV0dXJuIGdyZWV0aW5nICsgJyAnICsgdGhpcy51c2VyICsgcHVuY3R1YXRpb247XG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIHZhciBvYmplY3QgPSB7ICd1c2VyJzogJ2ZyZWQnIH07XG4gICAgICpcbiAgICAgKiB2YXIgYm91bmQgPSBfLmJpbmQoZ3JlZXQsIG9iamVjdCwgJ2hpJyk7XG4gICAgICogYm91bmQoJyEnKTtcbiAgICAgKiAvLyA9PiAnaGkgZnJlZCEnXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBwbGFjZWhvbGRlcnNcbiAgICAgKiB2YXIgYm91bmQgPSBfLmJpbmQoZ3JlZXQsIG9iamVjdCwgXywgJyEnKTtcbiAgICAgKiBib3VuZCgnaGknKTtcbiAgICAgKiAvLyA9PiAnaGkgZnJlZCEnXG4gICAgICovXG4gICAgdmFyIGJpbmQgPSByZXN0UGFyYW0oZnVuY3Rpb24oZnVuYywgdGhpc0FyZywgcGFydGlhbHMpIHtcbiAgICAgIHZhciBiaXRtYXNrID0gQklORF9GTEFHO1xuICAgICAgaWYgKHBhcnRpYWxzLmxlbmd0aCkge1xuICAgICAgICB2YXIgaG9sZGVycyA9IHJlcGxhY2VIb2xkZXJzKHBhcnRpYWxzLCBiaW5kLnBsYWNlaG9sZGVyKTtcbiAgICAgICAgYml0bWFzayB8PSBQQVJUSUFMX0ZMQUc7XG4gICAgICB9XG4gICAgICByZXR1cm4gY3JlYXRlV3JhcHBlcihmdW5jLCBiaXRtYXNrLCB0aGlzQXJnLCBwYXJ0aWFscywgaG9sZGVycyk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBCaW5kcyBtZXRob2RzIG9mIGFuIG9iamVjdCB0byB0aGUgb2JqZWN0IGl0c2VsZiwgb3ZlcndyaXRpbmcgdGhlIGV4aXN0aW5nXG4gICAgICogbWV0aG9kLiBNZXRob2QgbmFtZXMgbWF5IGJlIHNwZWNpZmllZCBhcyBpbmRpdmlkdWFsIGFyZ3VtZW50cyBvciBhcyBhcnJheXNcbiAgICAgKiBvZiBtZXRob2QgbmFtZXMuIElmIG5vIG1ldGhvZCBuYW1lcyBhcmUgcHJvdmlkZWQgYWxsIGVudW1lcmFibGUgZnVuY3Rpb25cbiAgICAgKiBwcm9wZXJ0aWVzLCBvd24gYW5kIGluaGVyaXRlZCwgb2YgYG9iamVjdGAgYXJlIGJvdW5kLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoaXMgbWV0aG9kIGRvZXMgbm90IHNldCB0aGUgXCJsZW5ndGhcIiBwcm9wZXJ0eSBvZiBib3VuZCBmdW5jdGlvbnMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gYmluZCBhbmQgYXNzaWduIHRoZSBib3VuZCBtZXRob2RzIHRvLlxuICAgICAqIEBwYXJhbSB7Li4uKHN0cmluZ3xzdHJpbmdbXSl9IFttZXRob2ROYW1lc10gVGhlIG9iamVjdCBtZXRob2QgbmFtZXMgdG8gYmluZCxcbiAgICAgKiAgc3BlY2lmaWVkIGFzIGluZGl2aWR1YWwgbWV0aG9kIG5hbWVzIG9yIGFycmF5cyBvZiBtZXRob2QgbmFtZXMuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIHZpZXcgPSB7XG4gICAgICogICAnbGFiZWwnOiAnZG9jcycsXG4gICAgICogICAnb25DbGljayc6IGZ1bmN0aW9uKCkge1xuICAgICAqICAgICBjb25zb2xlLmxvZygnY2xpY2tlZCAnICsgdGhpcy5sYWJlbCk7XG4gICAgICogICB9XG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIF8uYmluZEFsbCh2aWV3KTtcbiAgICAgKiBqUXVlcnkoJyNkb2NzJykub24oJ2NsaWNrJywgdmlldy5vbkNsaWNrKTtcbiAgICAgKiAvLyA9PiBsb2dzICdjbGlja2VkIGRvY3MnIHdoZW4gdGhlIGVsZW1lbnQgaXMgY2xpY2tlZFxuICAgICAqL1xuICAgIHZhciBiaW5kQWxsID0gcmVzdFBhcmFtKGZ1bmN0aW9uKG9iamVjdCwgbWV0aG9kTmFtZXMpIHtcbiAgICAgIG1ldGhvZE5hbWVzID0gbWV0aG9kTmFtZXMubGVuZ3RoID8gYmFzZUZsYXR0ZW4obWV0aG9kTmFtZXMpIDogZnVuY3Rpb25zKG9iamVjdCk7XG5cbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IG1ldGhvZE5hbWVzLmxlbmd0aDtcblxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgdmFyIGtleSA9IG1ldGhvZE5hbWVzW2luZGV4XTtcbiAgICAgICAgb2JqZWN0W2tleV0gPSBjcmVhdGVXcmFwcGVyKG9iamVjdFtrZXldLCBCSU5EX0ZMQUcsIG9iamVjdCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gb2JqZWN0O1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgaW52b2tlcyB0aGUgbWV0aG9kIGF0IGBvYmplY3Rba2V5XWAgYW5kIHByZXBlbmRzXG4gICAgICogYW55IGFkZGl0aW9uYWwgYF8uYmluZEtleWAgYXJndW1lbnRzIHRvIHRob3NlIHByb3ZpZGVkIHRvIHRoZSBib3VuZCBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGRpZmZlcnMgZnJvbSBgXy5iaW5kYCBieSBhbGxvd2luZyBib3VuZCBmdW5jdGlvbnMgdG8gcmVmZXJlbmNlXG4gICAgICogbWV0aG9kcyB0aGF0IG1heSBiZSByZWRlZmluZWQgb3IgZG9uJ3QgeWV0IGV4aXN0LlxuICAgICAqIFNlZSBbUGV0ZXIgTWljaGF1eCdzIGFydGljbGVdKGh0dHA6Ly9wZXRlci5taWNoYXV4LmNhL2FydGljbGVzL2xhenktZnVuY3Rpb24tZGVmaW5pdGlvbi1wYXR0ZXJuKVxuICAgICAqIGZvciBtb3JlIGRldGFpbHMuXG4gICAgICpcbiAgICAgKiBUaGUgYF8uYmluZEtleS5wbGFjZWhvbGRlcmAgdmFsdWUsIHdoaWNoIGRlZmF1bHRzIHRvIGBfYCBpbiBtb25vbGl0aGljXG4gICAgICogYnVpbGRzLCBtYXkgYmUgdXNlZCBhcyBhIHBsYWNlaG9sZGVyIGZvciBwYXJ0aWFsbHkgYXBwbGllZCBhcmd1bWVudHMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdGhlIG1ldGhvZCBiZWxvbmdzIHRvLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgbWV0aG9kLlxuICAgICAqIEBwYXJhbSB7Li4uKn0gW3BhcnRpYWxzXSBUaGUgYXJndW1lbnRzIHRvIGJlIHBhcnRpYWxseSBhcHBsaWVkLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGJvdW5kIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0ID0ge1xuICAgICAqICAgJ3VzZXInOiAnZnJlZCcsXG4gICAgICogICAnZ3JlZXQnOiBmdW5jdGlvbihncmVldGluZywgcHVuY3R1YXRpb24pIHtcbiAgICAgKiAgICAgcmV0dXJuIGdyZWV0aW5nICsgJyAnICsgdGhpcy51c2VyICsgcHVuY3R1YXRpb247XG4gICAgICogICB9XG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIHZhciBib3VuZCA9IF8uYmluZEtleShvYmplY3QsICdncmVldCcsICdoaScpO1xuICAgICAqIGJvdW5kKCchJyk7XG4gICAgICogLy8gPT4gJ2hpIGZyZWQhJ1xuICAgICAqXG4gICAgICogb2JqZWN0LmdyZWV0ID0gZnVuY3Rpb24oZ3JlZXRpbmcsIHB1bmN0dWF0aW9uKSB7XG4gICAgICogICByZXR1cm4gZ3JlZXRpbmcgKyAneWEgJyArIHRoaXMudXNlciArIHB1bmN0dWF0aW9uO1xuICAgICAqIH07XG4gICAgICpcbiAgICAgKiBib3VuZCgnIScpO1xuICAgICAqIC8vID0+ICdoaXlhIGZyZWQhJ1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgcGxhY2Vob2xkZXJzXG4gICAgICogdmFyIGJvdW5kID0gXy5iaW5kS2V5KG9iamVjdCwgJ2dyZWV0JywgXywgJyEnKTtcbiAgICAgKiBib3VuZCgnaGknKTtcbiAgICAgKiAvLyA9PiAnaGl5YSBmcmVkISdcbiAgICAgKi9cbiAgICB2YXIgYmluZEtleSA9IHJlc3RQYXJhbShmdW5jdGlvbihvYmplY3QsIGtleSwgcGFydGlhbHMpIHtcbiAgICAgIHZhciBiaXRtYXNrID0gQklORF9GTEFHIHwgQklORF9LRVlfRkxBRztcbiAgICAgIGlmIChwYXJ0aWFscy5sZW5ndGgpIHtcbiAgICAgICAgdmFyIGhvbGRlcnMgPSByZXBsYWNlSG9sZGVycyhwYXJ0aWFscywgYmluZEtleS5wbGFjZWhvbGRlcik7XG4gICAgICAgIGJpdG1hc2sgfD0gUEFSVElBTF9GTEFHO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNyZWF0ZVdyYXBwZXIoa2V5LCBiaXRtYXNrLCBvYmplY3QsIHBhcnRpYWxzLCBob2xkZXJzKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGFjY2VwdHMgb25lIG9yIG1vcmUgYXJndW1lbnRzIG9mIGBmdW5jYCB0aGF0IHdoZW5cbiAgICAgKiBjYWxsZWQgZWl0aGVyIGludm9rZXMgYGZ1bmNgIHJldHVybmluZyBpdHMgcmVzdWx0LCBpZiBhbGwgYGZ1bmNgIGFyZ3VtZW50c1xuICAgICAqIGhhdmUgYmVlbiBwcm92aWRlZCwgb3IgcmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgYWNjZXB0cyBvbmUgb3IgbW9yZSBvZiB0aGVcbiAgICAgKiByZW1haW5pbmcgYGZ1bmNgIGFyZ3VtZW50cywgYW5kIHNvIG9uLiBUaGUgYXJpdHkgb2YgYGZ1bmNgIG1heSBiZSBzcGVjaWZpZWRcbiAgICAgKiBpZiBgZnVuYy5sZW5ndGhgIGlzIG5vdCBzdWZmaWNpZW50LlxuICAgICAqXG4gICAgICogVGhlIGBfLmN1cnJ5LnBsYWNlaG9sZGVyYCB2YWx1ZSwgd2hpY2ggZGVmYXVsdHMgdG8gYF9gIGluIG1vbm9saXRoaWMgYnVpbGRzLFxuICAgICAqIG1heSBiZSB1c2VkIGFzIGEgcGxhY2Vob2xkZXIgZm9yIHByb3ZpZGVkIGFyZ3VtZW50cy5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBkb2VzIG5vdCBzZXQgdGhlIFwibGVuZ3RoXCIgcHJvcGVydHkgb2YgY3VycmllZCBmdW5jdGlvbnMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBjdXJyeS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2FyaXR5PWZ1bmMubGVuZ3RoXSBUaGUgYXJpdHkgb2YgYGZ1bmNgLlxuICAgICAqIEBwYXJhbS0ge09iamVjdH0gW2d1YXJkXSBFbmFibGVzIHVzZSBhcyBhIGNhbGxiYWNrIGZvciBmdW5jdGlvbnMgbGlrZSBgXy5tYXBgLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGN1cnJpZWQgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBhYmMgPSBmdW5jdGlvbihhLCBiLCBjKSB7XG4gICAgICogICByZXR1cm4gW2EsIGIsIGNdO1xuICAgICAqIH07XG4gICAgICpcbiAgICAgKiB2YXIgY3VycmllZCA9IF8uY3VycnkoYWJjKTtcbiAgICAgKlxuICAgICAqIGN1cnJpZWQoMSkoMikoMyk7XG4gICAgICogLy8gPT4gWzEsIDIsIDNdXG4gICAgICpcbiAgICAgKiBjdXJyaWVkKDEsIDIpKDMpO1xuICAgICAqIC8vID0+IFsxLCAyLCAzXVxuICAgICAqXG4gICAgICogY3VycmllZCgxLCAyLCAzKTtcbiAgICAgKiAvLyA9PiBbMSwgMiwgM11cbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHBsYWNlaG9sZGVyc1xuICAgICAqIGN1cnJpZWQoMSkoXywgMykoMik7XG4gICAgICogLy8gPT4gWzEsIDIsIDNdXG4gICAgICovXG4gICAgdmFyIGN1cnJ5ID0gY3JlYXRlQ3VycnkoQ1VSUllfRkxBRyk7XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmN1cnJ5YCBleGNlcHQgdGhhdCBhcmd1bWVudHMgYXJlIGFwcGxpZWQgdG8gYGZ1bmNgXG4gICAgICogaW4gdGhlIG1hbm5lciBvZiBgXy5wYXJ0aWFsUmlnaHRgIGluc3RlYWQgb2YgYF8ucGFydGlhbGAuXG4gICAgICpcbiAgICAgKiBUaGUgYF8uY3VycnlSaWdodC5wbGFjZWhvbGRlcmAgdmFsdWUsIHdoaWNoIGRlZmF1bHRzIHRvIGBfYCBpbiBtb25vbGl0aGljXG4gICAgICogYnVpbGRzLCBtYXkgYmUgdXNlZCBhcyBhIHBsYWNlaG9sZGVyIGZvciBwcm92aWRlZCBhcmd1bWVudHMuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgZG9lcyBub3Qgc2V0IHRoZSBcImxlbmd0aFwiIHByb3BlcnR5IG9mIGN1cnJpZWQgZnVuY3Rpb25zLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gY3VycnkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFthcml0eT1mdW5jLmxlbmd0aF0gVGhlIGFyaXR5IG9mIGBmdW5jYC5cbiAgICAgKiBAcGFyYW0tIHtPYmplY3R9IFtndWFyZF0gRW5hYmxlcyB1c2UgYXMgYSBjYWxsYmFjayBmb3IgZnVuY3Rpb25zIGxpa2UgYF8ubWFwYC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBjdXJyaWVkIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgYWJjID0gZnVuY3Rpb24oYSwgYiwgYykge1xuICAgICAqICAgcmV0dXJuIFthLCBiLCBjXTtcbiAgICAgKiB9O1xuICAgICAqXG4gICAgICogdmFyIGN1cnJpZWQgPSBfLmN1cnJ5UmlnaHQoYWJjKTtcbiAgICAgKlxuICAgICAqIGN1cnJpZWQoMykoMikoMSk7XG4gICAgICogLy8gPT4gWzEsIDIsIDNdXG4gICAgICpcbiAgICAgKiBjdXJyaWVkKDIsIDMpKDEpO1xuICAgICAqIC8vID0+IFsxLCAyLCAzXVxuICAgICAqXG4gICAgICogY3VycmllZCgxLCAyLCAzKTtcbiAgICAgKiAvLyA9PiBbMSwgMiwgM11cbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHBsYWNlaG9sZGVyc1xuICAgICAqIGN1cnJpZWQoMykoMSwgXykoMik7XG4gICAgICogLy8gPT4gWzEsIDIsIDNdXG4gICAgICovXG4gICAgdmFyIGN1cnJ5UmlnaHQgPSBjcmVhdGVDdXJyeShDVVJSWV9SSUdIVF9GTEFHKTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBkZWJvdW5jZWQgZnVuY3Rpb24gdGhhdCBkZWxheXMgaW52b2tpbmcgYGZ1bmNgIHVudGlsIGFmdGVyIGB3YWl0YFxuICAgICAqIG1pbGxpc2Vjb25kcyBoYXZlIGVsYXBzZWQgc2luY2UgdGhlIGxhc3QgdGltZSB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIHdhc1xuICAgICAqIGludm9rZWQuIFRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gY29tZXMgd2l0aCBhIGBjYW5jZWxgIG1ldGhvZCB0byBjYW5jZWxcbiAgICAgKiBkZWxheWVkIGludm9jYXRpb25zLiBQcm92aWRlIGFuIG9wdGlvbnMgb2JqZWN0IHRvIGluZGljYXRlIHRoYXQgYGZ1bmNgXG4gICAgICogc2hvdWxkIGJlIGludm9rZWQgb24gdGhlIGxlYWRpbmcgYW5kL29yIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIGB3YWl0YCB0aW1lb3V0LlxuICAgICAqIFN1YnNlcXVlbnQgY2FsbHMgdG8gdGhlIGRlYm91bmNlZCBmdW5jdGlvbiByZXR1cm4gdGhlIHJlc3VsdCBvZiB0aGUgbGFzdFxuICAgICAqIGBmdW5jYCBpbnZvY2F0aW9uLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIElmIGBsZWFkaW5nYCBhbmQgYHRyYWlsaW5nYCBvcHRpb25zIGFyZSBgdHJ1ZWAsIGBmdW5jYCBpcyBpbnZva2VkXG4gICAgICogb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQgb25seSBpZiB0aGUgdGhlIGRlYm91bmNlZCBmdW5jdGlvbiBpc1xuICAgICAqIGludm9rZWQgbW9yZSB0aGFuIG9uY2UgZHVyaW5nIHRoZSBgd2FpdGAgdGltZW91dC5cbiAgICAgKlxuICAgICAqIFNlZSBbRGF2aWQgQ29yYmFjaG8ncyBhcnRpY2xlXShodHRwOi8vZHJ1cGFsbW90aW9uLmNvbS9hcnRpY2xlL2RlYm91bmNlLWFuZC10aHJvdHRsZS12aXN1YWwtZXhwbGFuYXRpb24pXG4gICAgICogZm9yIGRldGFpbHMgb3ZlciB0aGUgZGlmZmVyZW5jZXMgYmV0d2VlbiBgXy5kZWJvdW5jZWAgYW5kIGBfLnRocm90dGxlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRlYm91bmNlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbd2FpdD0wXSBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byBkZWxheS5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIFRoZSBvcHRpb25zIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmxlYWRpbmc9ZmFsc2VdIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIGxlYWRpbmdcbiAgICAgKiAgZWRnZSBvZiB0aGUgdGltZW91dC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMubWF4V2FpdF0gVGhlIG1heGltdW0gdGltZSBgZnVuY2AgaXMgYWxsb3dlZCB0byBiZVxuICAgICAqICBkZWxheWVkIGJlZm9yZSBpdCBpcyBpbnZva2VkLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudHJhaWxpbmc9dHJ1ZV0gU3BlY2lmeSBpbnZva2luZyBvbiB0aGUgdHJhaWxpbmdcbiAgICAgKiAgZWRnZSBvZiB0aGUgdGltZW91dC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBkZWJvdW5jZWQgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIC8vIGF2b2lkIGNvc3RseSBjYWxjdWxhdGlvbnMgd2hpbGUgdGhlIHdpbmRvdyBzaXplIGlzIGluIGZsdXhcbiAgICAgKiBqUXVlcnkod2luZG93KS5vbigncmVzaXplJywgXy5kZWJvdW5jZShjYWxjdWxhdGVMYXlvdXQsIDE1MCkpO1xuICAgICAqXG4gICAgICogLy8gaW52b2tlIGBzZW5kTWFpbGAgd2hlbiB0aGUgY2xpY2sgZXZlbnQgaXMgZmlyZWQsIGRlYm91bmNpbmcgc3Vic2VxdWVudCBjYWxsc1xuICAgICAqIGpRdWVyeSgnI3Bvc3Rib3gnKS5vbignY2xpY2snLCBfLmRlYm91bmNlKHNlbmRNYWlsLCAzMDAsIHtcbiAgICAgKiAgICdsZWFkaW5nJzogdHJ1ZSxcbiAgICAgKiAgICd0cmFpbGluZyc6IGZhbHNlXG4gICAgICogfSkpO1xuICAgICAqXG4gICAgICogLy8gZW5zdXJlIGBiYXRjaExvZ2AgaXMgaW52b2tlZCBvbmNlIGFmdGVyIDEgc2Vjb25kIG9mIGRlYm91bmNlZCBjYWxsc1xuICAgICAqIHZhciBzb3VyY2UgPSBuZXcgRXZlbnRTb3VyY2UoJy9zdHJlYW0nKTtcbiAgICAgKiBqUXVlcnkoc291cmNlKS5vbignbWVzc2FnZScsIF8uZGVib3VuY2UoYmF0Y2hMb2csIDI1MCwge1xuICAgICAqICAgJ21heFdhaXQnOiAxMDAwXG4gICAgICogfSkpO1xuICAgICAqXG4gICAgICogLy8gY2FuY2VsIGEgZGVib3VuY2VkIGNhbGxcbiAgICAgKiB2YXIgdG9kb0NoYW5nZXMgPSBfLmRlYm91bmNlKGJhdGNoTG9nLCAxMDAwKTtcbiAgICAgKiBPYmplY3Qub2JzZXJ2ZShtb2RlbHMudG9kbywgdG9kb0NoYW5nZXMpO1xuICAgICAqXG4gICAgICogT2JqZWN0Lm9ic2VydmUobW9kZWxzLCBmdW5jdGlvbihjaGFuZ2VzKSB7XG4gICAgICogICBpZiAoXy5maW5kKGNoYW5nZXMsIHsgJ3VzZXInOiAndG9kbycsICd0eXBlJzogJ2RlbGV0ZSd9KSkge1xuICAgICAqICAgICB0b2RvQ2hhbmdlcy5jYW5jZWwoKTtcbiAgICAgKiAgIH1cbiAgICAgKiB9LCBbJ2RlbGV0ZSddKTtcbiAgICAgKlxuICAgICAqIC8vIC4uLmF0IHNvbWUgcG9pbnQgYG1vZGVscy50b2RvYCBpcyBjaGFuZ2VkXG4gICAgICogbW9kZWxzLnRvZG8uY29tcGxldGVkID0gdHJ1ZTtcbiAgICAgKlxuICAgICAqIC8vIC4uLmJlZm9yZSAxIHNlY29uZCBoYXMgcGFzc2VkIGBtb2RlbHMudG9kb2AgaXMgZGVsZXRlZFxuICAgICAqIC8vIHdoaWNoIGNhbmNlbHMgdGhlIGRlYm91bmNlZCBgdG9kb0NoYW5nZXNgIGNhbGxcbiAgICAgKiBkZWxldGUgbW9kZWxzLnRvZG87XG4gICAgICovXG4gICAgZnVuY3Rpb24gZGVib3VuY2UoZnVuYywgd2FpdCwgb3B0aW9ucykge1xuICAgICAgdmFyIGFyZ3MsXG4gICAgICAgICAgbWF4VGltZW91dElkLFxuICAgICAgICAgIHJlc3VsdCxcbiAgICAgICAgICBzdGFtcCxcbiAgICAgICAgICB0aGlzQXJnLFxuICAgICAgICAgIHRpbWVvdXRJZCxcbiAgICAgICAgICB0cmFpbGluZ0NhbGwsXG4gICAgICAgICAgbGFzdENhbGxlZCA9IDAsXG4gICAgICAgICAgbWF4V2FpdCA9IGZhbHNlLFxuICAgICAgICAgIHRyYWlsaW5nID0gdHJ1ZTtcblxuICAgICAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICAgICAgfVxuICAgICAgd2FpdCA9IHdhaXQgPCAwID8gMCA6ICgrd2FpdCB8fCAwKTtcbiAgICAgIGlmIChvcHRpb25zID09PSB0cnVlKSB7XG4gICAgICAgIHZhciBsZWFkaW5nID0gdHJ1ZTtcbiAgICAgICAgdHJhaWxpbmcgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSBpZiAoaXNPYmplY3Qob3B0aW9ucykpIHtcbiAgICAgICAgbGVhZGluZyA9ICEhb3B0aW9ucy5sZWFkaW5nO1xuICAgICAgICBtYXhXYWl0ID0gJ21heFdhaXQnIGluIG9wdGlvbnMgJiYgbmF0aXZlTWF4KCtvcHRpb25zLm1heFdhaXQgfHwgMCwgd2FpdCk7XG4gICAgICAgIHRyYWlsaW5nID0gJ3RyYWlsaW5nJyBpbiBvcHRpb25zID8gISFvcHRpb25zLnRyYWlsaW5nIDogdHJhaWxpbmc7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGNhbmNlbCgpIHtcbiAgICAgICAgaWYgKHRpbWVvdXRJZCkge1xuICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtYXhUaW1lb3V0SWQpIHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQobWF4VGltZW91dElkKTtcbiAgICAgICAgfVxuICAgICAgICBsYXN0Q2FsbGVkID0gMDtcbiAgICAgICAgbWF4VGltZW91dElkID0gdGltZW91dElkID0gdHJhaWxpbmdDYWxsID0gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBjb21wbGV0ZShpc0NhbGxlZCwgaWQpIHtcbiAgICAgICAgaWYgKGlkKSB7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KGlkKTtcbiAgICAgICAgfVxuICAgICAgICBtYXhUaW1lb3V0SWQgPSB0aW1lb3V0SWQgPSB0cmFpbGluZ0NhbGwgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChpc0NhbGxlZCkge1xuICAgICAgICAgIGxhc3RDYWxsZWQgPSBub3coKTtcbiAgICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xuICAgICAgICAgIGlmICghdGltZW91dElkICYmICFtYXhUaW1lb3V0SWQpIHtcbiAgICAgICAgICAgIGFyZ3MgPSB0aGlzQXJnID0gdW5kZWZpbmVkO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBkZWxheWVkKCkge1xuICAgICAgICB2YXIgcmVtYWluaW5nID0gd2FpdCAtIChub3coKSAtIHN0YW1wKTtcbiAgICAgICAgaWYgKHJlbWFpbmluZyA8PSAwIHx8IHJlbWFpbmluZyA+IHdhaXQpIHtcbiAgICAgICAgICBjb21wbGV0ZSh0cmFpbGluZ0NhbGwsIG1heFRpbWVvdXRJZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGltZW91dElkID0gc2V0VGltZW91dChkZWxheWVkLCByZW1haW5pbmcpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIG1heERlbGF5ZWQoKSB7XG4gICAgICAgIGNvbXBsZXRlKHRyYWlsaW5nLCB0aW1lb3V0SWQpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBkZWJvdW5jZWQoKSB7XG4gICAgICAgIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICAgIHN0YW1wID0gbm93KCk7XG4gICAgICAgIHRoaXNBcmcgPSB0aGlzO1xuICAgICAgICB0cmFpbGluZ0NhbGwgPSB0cmFpbGluZyAmJiAodGltZW91dElkIHx8ICFsZWFkaW5nKTtcblxuICAgICAgICBpZiAobWF4V2FpdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICB2YXIgbGVhZGluZ0NhbGwgPSBsZWFkaW5nICYmICF0aW1lb3V0SWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKCFtYXhUaW1lb3V0SWQgJiYgIWxlYWRpbmcpIHtcbiAgICAgICAgICAgIGxhc3RDYWxsZWQgPSBzdGFtcDtcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFyIHJlbWFpbmluZyA9IG1heFdhaXQgLSAoc3RhbXAgLSBsYXN0Q2FsbGVkKSxcbiAgICAgICAgICAgICAgaXNDYWxsZWQgPSByZW1haW5pbmcgPD0gMCB8fCByZW1haW5pbmcgPiBtYXhXYWl0O1xuXG4gICAgICAgICAgaWYgKGlzQ2FsbGVkKSB7XG4gICAgICAgICAgICBpZiAobWF4VGltZW91dElkKSB7XG4gICAgICAgICAgICAgIG1heFRpbWVvdXRJZCA9IGNsZWFyVGltZW91dChtYXhUaW1lb3V0SWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGFzdENhbGxlZCA9IHN0YW1wO1xuICAgICAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzQXJnLCBhcmdzKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZiAoIW1heFRpbWVvdXRJZCkge1xuICAgICAgICAgICAgbWF4VGltZW91dElkID0gc2V0VGltZW91dChtYXhEZWxheWVkLCByZW1haW5pbmcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNDYWxsZWQgJiYgdGltZW91dElkKSB7XG4gICAgICAgICAgdGltZW91dElkID0gY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIXRpbWVvdXRJZCAmJiB3YWl0ICE9PSBtYXhXYWl0KSB7XG4gICAgICAgICAgdGltZW91dElkID0gc2V0VGltZW91dChkZWxheWVkLCB3YWl0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGVhZGluZ0NhbGwpIHtcbiAgICAgICAgICBpc0NhbGxlZCA9IHRydWU7XG4gICAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzQXJnLCBhcmdzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNDYWxsZWQgJiYgIXRpbWVvdXRJZCAmJiAhbWF4VGltZW91dElkKSB7XG4gICAgICAgICAgYXJncyA9IHRoaXNBcmcgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICAgIGRlYm91bmNlZC5jYW5jZWwgPSBjYW5jZWw7XG4gICAgICByZXR1cm4gZGVib3VuY2VkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlZmVycyBpbnZva2luZyB0aGUgYGZ1bmNgIHVudGlsIHRoZSBjdXJyZW50IGNhbGwgc3RhY2sgaGFzIGNsZWFyZWQuIEFueVxuICAgICAqIGFkZGl0aW9uYWwgYXJndW1lbnRzIGFyZSBwcm92aWRlZCB0byBgZnVuY2Agd2hlbiBpdCBpcyBpbnZva2VkLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gZGVmZXIuXG4gICAgICogQHBhcmFtIHsuLi4qfSBbYXJnc10gVGhlIGFyZ3VtZW50cyB0byBpbnZva2UgdGhlIGZ1bmN0aW9uIHdpdGguXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgdGltZXIgaWQuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uZGVmZXIoZnVuY3Rpb24odGV4dCkge1xuICAgICAqICAgY29uc29sZS5sb2codGV4dCk7XG4gICAgICogfSwgJ2RlZmVycmVkJyk7XG4gICAgICogLy8gbG9ncyAnZGVmZXJyZWQnIGFmdGVyIG9uZSBvciBtb3JlIG1pbGxpc2Vjb25kc1xuICAgICAqL1xuICAgIHZhciBkZWZlciA9IHJlc3RQYXJhbShmdW5jdGlvbihmdW5jLCBhcmdzKSB7XG4gICAgICByZXR1cm4gYmFzZURlbGF5KGZ1bmMsIDEsIGFyZ3MpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogSW52b2tlcyBgZnVuY2AgYWZ0ZXIgYHdhaXRgIG1pbGxpc2Vjb25kcy4gQW55IGFkZGl0aW9uYWwgYXJndW1lbnRzIGFyZVxuICAgICAqIHByb3ZpZGVkIHRvIGBmdW5jYCB3aGVuIGl0IGlzIGludm9rZWQuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBkZWxheS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gd2FpdCBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byBkZWxheSBpbnZvY2F0aW9uLlxuICAgICAqIEBwYXJhbSB7Li4uKn0gW2FyZ3NdIFRoZSBhcmd1bWVudHMgdG8gaW52b2tlIHRoZSBmdW5jdGlvbiB3aXRoLlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHRpbWVyIGlkLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmRlbGF5KGZ1bmN0aW9uKHRleHQpIHtcbiAgICAgKiAgIGNvbnNvbGUubG9nKHRleHQpO1xuICAgICAqIH0sIDEwMDAsICdsYXRlcicpO1xuICAgICAqIC8vID0+IGxvZ3MgJ2xhdGVyJyBhZnRlciBvbmUgc2Vjb25kXG4gICAgICovXG4gICAgdmFyIGRlbGF5ID0gcmVzdFBhcmFtKGZ1bmN0aW9uKGZ1bmMsIHdhaXQsIGFyZ3MpIHtcbiAgICAgIHJldHVybiBiYXNlRGVsYXkoZnVuYywgd2FpdCwgYXJncyk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSByZXN1bHQgb2YgaW52b2tpbmcgdGhlIHByb3ZpZGVkXG4gICAgICogZnVuY3Rpb25zIHdpdGggdGhlIGB0aGlzYCBiaW5kaW5nIG9mIHRoZSBjcmVhdGVkIGZ1bmN0aW9uLCB3aGVyZSBlYWNoXG4gICAgICogc3VjY2Vzc2l2ZSBpbnZvY2F0aW9uIGlzIHN1cHBsaWVkIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIHByZXZpb3VzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHsuLi5GdW5jdGlvbn0gW2Z1bmNzXSBGdW5jdGlvbnMgdG8gaW52b2tlLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBmdW5jdGlvbiBzcXVhcmUobikge1xuICAgICAqICAgcmV0dXJuIG4gKiBuO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIHZhciBhZGRTcXVhcmUgPSBfLmZsb3coXy5hZGQsIHNxdWFyZSk7XG4gICAgICogYWRkU3F1YXJlKDEsIDIpO1xuICAgICAqIC8vID0+IDlcbiAgICAgKi9cbiAgICB2YXIgZmxvdyA9IGNyZWF0ZUZsb3coKTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uZmxvd2AgZXhjZXB0IHRoYXQgaXQgY3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXRcbiAgICAgKiBpbnZva2VzIHRoZSBwcm92aWRlZCBmdW5jdGlvbnMgZnJvbSByaWdodCB0byBsZWZ0LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGFsaWFzIGJhY2tmbG93LCBjb21wb3NlXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHsuLi5GdW5jdGlvbn0gW2Z1bmNzXSBGdW5jdGlvbnMgdG8gaW52b2tlLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBmdW5jdGlvbiBzcXVhcmUobikge1xuICAgICAqICAgcmV0dXJuIG4gKiBuO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIHZhciBhZGRTcXVhcmUgPSBfLmZsb3dSaWdodChzcXVhcmUsIF8uYWRkKTtcbiAgICAgKiBhZGRTcXVhcmUoMSwgMik7XG4gICAgICogLy8gPT4gOVxuICAgICAqL1xuICAgIHZhciBmbG93UmlnaHQgPSBjcmVhdGVGbG93KHRydWUpO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgbWVtb2l6ZXMgdGhlIHJlc3VsdCBvZiBgZnVuY2AuIElmIGByZXNvbHZlcmAgaXNcbiAgICAgKiBwcm92aWRlZCBpdCBkZXRlcm1pbmVzIHRoZSBjYWNoZSBrZXkgZm9yIHN0b3JpbmcgdGhlIHJlc3VsdCBiYXNlZCBvbiB0aGVcbiAgICAgKiBhcmd1bWVudHMgcHJvdmlkZWQgdG8gdGhlIG1lbW9pemVkIGZ1bmN0aW9uLiBCeSBkZWZhdWx0LCB0aGUgZmlyc3QgYXJndW1lbnRcbiAgICAgKiBwcm92aWRlZCB0byB0aGUgbWVtb2l6ZWQgZnVuY3Rpb24gaXMgY29lcmNlZCB0byBhIHN0cmluZyBhbmQgdXNlZCBhcyB0aGVcbiAgICAgKiBjYWNoZSBrZXkuIFRoZSBgZnVuY2AgaXMgaW52b2tlZCB3aXRoIHRoZSBgdGhpc2AgYmluZGluZyBvZiB0aGUgbWVtb2l6ZWRcbiAgICAgKiBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGUgY2FjaGUgaXMgZXhwb3NlZCBhcyB0aGUgYGNhY2hlYCBwcm9wZXJ0eSBvbiB0aGUgbWVtb2l6ZWRcbiAgICAgKiBmdW5jdGlvbi4gSXRzIGNyZWF0aW9uIG1heSBiZSBjdXN0b21pemVkIGJ5IHJlcGxhY2luZyB0aGUgYF8ubWVtb2l6ZS5DYWNoZWBcbiAgICAgKiBjb25zdHJ1Y3RvciB3aXRoIG9uZSB3aG9zZSBpbnN0YW5jZXMgaW1wbGVtZW50IHRoZSBbYE1hcGBdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLXByb3BlcnRpZXMtb2YtdGhlLW1hcC1wcm90b3R5cGUtb2JqZWN0KVxuICAgICAqIG1ldGhvZCBpbnRlcmZhY2Ugb2YgYGdldGAsIGBoYXNgLCBhbmQgYHNldGAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBoYXZlIGl0cyBvdXRwdXQgbWVtb2l6ZWQuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3Jlc29sdmVyXSBUaGUgZnVuY3Rpb24gdG8gcmVzb2x2ZSB0aGUgY2FjaGUga2V5LlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IG1lbW9pemluZyBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIHVwcGVyQ2FzZSA9IF8ubWVtb2l6ZShmdW5jdGlvbihzdHJpbmcpIHtcbiAgICAgKiAgIHJldHVybiBzdHJpbmcudG9VcHBlckNhc2UoKTtcbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIHVwcGVyQ2FzZSgnZnJlZCcpO1xuICAgICAqIC8vID0+ICdGUkVEJ1xuICAgICAqXG4gICAgICogLy8gbW9kaWZ5aW5nIHRoZSByZXN1bHQgY2FjaGVcbiAgICAgKiB1cHBlckNhc2UuY2FjaGUuc2V0KCdmcmVkJywgJ0JBUk5FWScpO1xuICAgICAqIHVwcGVyQ2FzZSgnZnJlZCcpO1xuICAgICAqIC8vID0+ICdCQVJORVknXG4gICAgICpcbiAgICAgKiAvLyByZXBsYWNpbmcgYF8ubWVtb2l6ZS5DYWNoZWBcbiAgICAgKiB2YXIgb2JqZWN0ID0geyAndXNlcic6ICdmcmVkJyB9O1xuICAgICAqIHZhciBvdGhlciA9IHsgJ3VzZXInOiAnYmFybmV5JyB9O1xuICAgICAqIHZhciBpZGVudGl0eSA9IF8ubWVtb2l6ZShfLmlkZW50aXR5KTtcbiAgICAgKlxuICAgICAqIGlkZW50aXR5KG9iamVjdCk7XG4gICAgICogLy8gPT4geyAndXNlcic6ICdmcmVkJyB9XG4gICAgICogaWRlbnRpdHkob3RoZXIpO1xuICAgICAqIC8vID0+IHsgJ3VzZXInOiAnZnJlZCcgfVxuICAgICAqXG4gICAgICogXy5tZW1vaXplLkNhY2hlID0gV2Vha01hcDtcbiAgICAgKiB2YXIgaWRlbnRpdHkgPSBfLm1lbW9pemUoXy5pZGVudGl0eSk7XG4gICAgICpcbiAgICAgKiBpZGVudGl0eShvYmplY3QpO1xuICAgICAqIC8vID0+IHsgJ3VzZXInOiAnZnJlZCcgfVxuICAgICAqIGlkZW50aXR5KG90aGVyKTtcbiAgICAgKiAvLyA9PiB7ICd1c2VyJzogJ2Jhcm5leScgfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1lbW9pemUoZnVuYywgcmVzb2x2ZXIpIHtcbiAgICAgIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nIHx8IChyZXNvbHZlciAmJiB0eXBlb2YgcmVzb2x2ZXIgIT0gJ2Z1bmN0aW9uJykpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICAgICAgfVxuICAgICAgdmFyIG1lbW9pemVkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzLFxuICAgICAgICAgICAga2V5ID0gcmVzb2x2ZXIgPyByZXNvbHZlci5hcHBseSh0aGlzLCBhcmdzKSA6IGFyZ3NbMF0sXG4gICAgICAgICAgICBjYWNoZSA9IG1lbW9pemVkLmNhY2hlO1xuXG4gICAgICAgIGlmIChjYWNoZS5oYXMoa2V5KSkge1xuICAgICAgICAgIHJldHVybiBjYWNoZS5nZXQoa2V5KTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgbWVtb2l6ZWQuY2FjaGUgPSBjYWNoZS5zZXQoa2V5LCByZXN1bHQpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfTtcbiAgICAgIG1lbW9pemVkLmNhY2hlID0gbmV3IG1lbW9pemUuQ2FjaGU7XG4gICAgICByZXR1cm4gbWVtb2l6ZWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgcnVucyBlYWNoIGFyZ3VtZW50IHRocm91Z2ggYSBjb3JyZXNwb25kaW5nXG4gICAgICogdHJhbnNmb3JtIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gd3JhcC5cbiAgICAgKiBAcGFyYW0gey4uLihGdW5jdGlvbnxGdW5jdGlvbltdKX0gW3RyYW5zZm9ybXNdIFRoZSBmdW5jdGlvbnMgdG8gdHJhbnNmb3JtXG4gICAgICogYXJndW1lbnRzLCBzcGVjaWZpZWQgYXMgaW5kaXZpZHVhbCBmdW5jdGlvbnMgb3IgYXJyYXlzIG9mIGZ1bmN0aW9ucy5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogZnVuY3Rpb24gZG91YmxlZChuKSB7XG4gICAgICogICByZXR1cm4gbiAqIDI7XG4gICAgICogfVxuICAgICAqXG4gICAgICogZnVuY3Rpb24gc3F1YXJlKG4pIHtcbiAgICAgKiAgIHJldHVybiBuICogbjtcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiB2YXIgbW9kZGVkID0gXy5tb2RBcmdzKGZ1bmN0aW9uKHgsIHkpIHtcbiAgICAgKiAgIHJldHVybiBbeCwgeV07XG4gICAgICogfSwgc3F1YXJlLCBkb3VibGVkKTtcbiAgICAgKlxuICAgICAqIG1vZGRlZCgxLCAyKTtcbiAgICAgKiAvLyA9PiBbMSwgNF1cbiAgICAgKlxuICAgICAqIG1vZGRlZCg1LCAxMCk7XG4gICAgICogLy8gPT4gWzI1LCAyMF1cbiAgICAgKi9cbiAgICB2YXIgbW9kQXJncyA9IHJlc3RQYXJhbShmdW5jdGlvbihmdW5jLCB0cmFuc2Zvcm1zKSB7XG4gICAgICB0cmFuc2Zvcm1zID0gYmFzZUZsYXR0ZW4odHJhbnNmb3Jtcyk7XG4gICAgICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJyB8fCAhYXJyYXlFdmVyeSh0cmFuc2Zvcm1zLCBiYXNlSXNGdW5jdGlvbikpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICAgICAgfVxuICAgICAgdmFyIGxlbmd0aCA9IHRyYW5zZm9ybXMubGVuZ3RoO1xuICAgICAgcmV0dXJuIHJlc3RQYXJhbShmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgIHZhciBpbmRleCA9IG5hdGl2ZU1pbihhcmdzLmxlbmd0aCwgbGVuZ3RoKTtcbiAgICAgICAgd2hpbGUgKGluZGV4LS0pIHtcbiAgICAgICAgICBhcmdzW2luZGV4XSA9IHRyYW5zZm9ybXNbaW5kZXhdKGFyZ3NbaW5kZXhdKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZnVuYy5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgbmVnYXRlcyB0aGUgcmVzdWx0IG9mIHRoZSBwcmVkaWNhdGUgYGZ1bmNgLiBUaGVcbiAgICAgKiBgZnVuY2AgcHJlZGljYXRlIGlzIGludm9rZWQgd2l0aCB0aGUgYHRoaXNgIGJpbmRpbmcgYW5kIGFyZ3VtZW50cyBvZiB0aGVcbiAgICAgKiBjcmVhdGVkIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZGljYXRlIFRoZSBwcmVkaWNhdGUgdG8gbmVnYXRlLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBmdW5jdGlvbiBpc0V2ZW4obikge1xuICAgICAqICAgcmV0dXJuIG4gJSAyID09IDA7XG4gICAgICogfVxuICAgICAqXG4gICAgICogXy5maWx0ZXIoWzEsIDIsIDMsIDQsIDUsIDZdLCBfLm5lZ2F0ZShpc0V2ZW4pKTtcbiAgICAgKiAvLyA9PiBbMSwgMywgNV1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBuZWdhdGUocHJlZGljYXRlKSB7XG4gICAgICBpZiAodHlwZW9mIHByZWRpY2F0ZSAhPSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICFwcmVkaWNhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgaXMgcmVzdHJpY3RlZCB0byBpbnZva2luZyBgZnVuY2Agb25jZS4gUmVwZWF0IGNhbGxzXG4gICAgICogdG8gdGhlIGZ1bmN0aW9uIHJldHVybiB0aGUgdmFsdWUgb2YgdGhlIGZpcnN0IGNhbGwuIFRoZSBgZnVuY2AgaXMgaW52b2tlZFxuICAgICAqIHdpdGggdGhlIGB0aGlzYCBiaW5kaW5nIGFuZCBhcmd1bWVudHMgb2YgdGhlIGNyZWF0ZWQgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byByZXN0cmljdC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyByZXN0cmljdGVkIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgaW5pdGlhbGl6ZSA9IF8ub25jZShjcmVhdGVBcHBsaWNhdGlvbik7XG4gICAgICogaW5pdGlhbGl6ZSgpO1xuICAgICAqIGluaXRpYWxpemUoKTtcbiAgICAgKiAvLyBgaW5pdGlhbGl6ZWAgaW52b2tlcyBgY3JlYXRlQXBwbGljYXRpb25gIG9uY2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBvbmNlKGZ1bmMpIHtcbiAgICAgIHJldHVybiBiZWZvcmUoMiwgZnVuYyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgaW52b2tlcyBgZnVuY2Agd2l0aCBgcGFydGlhbGAgYXJndW1lbnRzIHByZXBlbmRlZFxuICAgICAqIHRvIHRob3NlIHByb3ZpZGVkIHRvIHRoZSBuZXcgZnVuY3Rpb24uIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uYmluZGAgZXhjZXB0XG4gICAgICogaXQgZG9lcyAqKm5vdCoqIGFsdGVyIHRoZSBgdGhpc2AgYmluZGluZy5cbiAgICAgKlxuICAgICAqIFRoZSBgXy5wYXJ0aWFsLnBsYWNlaG9sZGVyYCB2YWx1ZSwgd2hpY2ggZGVmYXVsdHMgdG8gYF9gIGluIG1vbm9saXRoaWNcbiAgICAgKiBidWlsZHMsIG1heSBiZSB1c2VkIGFzIGEgcGxhY2Vob2xkZXIgZm9yIHBhcnRpYWxseSBhcHBsaWVkIGFyZ3VtZW50cy5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBkb2VzIG5vdCBzZXQgdGhlIFwibGVuZ3RoXCIgcHJvcGVydHkgb2YgcGFydGlhbGx5XG4gICAgICogYXBwbGllZCBmdW5jdGlvbnMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBwYXJ0aWFsbHkgYXBwbHkgYXJndW1lbnRzIHRvLlxuICAgICAqIEBwYXJhbSB7Li4uKn0gW3BhcnRpYWxzXSBUaGUgYXJndW1lbnRzIHRvIGJlIHBhcnRpYWxseSBhcHBsaWVkLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHBhcnRpYWxseSBhcHBsaWVkIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgZ3JlZXQgPSBmdW5jdGlvbihncmVldGluZywgbmFtZSkge1xuICAgICAqICAgcmV0dXJuIGdyZWV0aW5nICsgJyAnICsgbmFtZTtcbiAgICAgKiB9O1xuICAgICAqXG4gICAgICogdmFyIHNheUhlbGxvVG8gPSBfLnBhcnRpYWwoZ3JlZXQsICdoZWxsbycpO1xuICAgICAqIHNheUhlbGxvVG8oJ2ZyZWQnKTtcbiAgICAgKiAvLyA9PiAnaGVsbG8gZnJlZCdcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHBsYWNlaG9sZGVyc1xuICAgICAqIHZhciBncmVldEZyZWQgPSBfLnBhcnRpYWwoZ3JlZXQsIF8sICdmcmVkJyk7XG4gICAgICogZ3JlZXRGcmVkKCdoaScpO1xuICAgICAqIC8vID0+ICdoaSBmcmVkJ1xuICAgICAqL1xuICAgIHZhciBwYXJ0aWFsID0gY3JlYXRlUGFydGlhbChQQVJUSUFMX0ZMQUcpO1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5wYXJ0aWFsYCBleGNlcHQgdGhhdCBwYXJ0aWFsbHkgYXBwbGllZCBhcmd1bWVudHNcbiAgICAgKiBhcmUgYXBwZW5kZWQgdG8gdGhvc2UgcHJvdmlkZWQgdG8gdGhlIG5ldyBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIFRoZSBgXy5wYXJ0aWFsUmlnaHQucGxhY2Vob2xkZXJgIHZhbHVlLCB3aGljaCBkZWZhdWx0cyB0byBgX2AgaW4gbW9ub2xpdGhpY1xuICAgICAqIGJ1aWxkcywgbWF5IGJlIHVzZWQgYXMgYSBwbGFjZWhvbGRlciBmb3IgcGFydGlhbGx5IGFwcGxpZWQgYXJndW1lbnRzLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoaXMgbWV0aG9kIGRvZXMgbm90IHNldCB0aGUgXCJsZW5ndGhcIiBwcm9wZXJ0eSBvZiBwYXJ0aWFsbHlcbiAgICAgKiBhcHBsaWVkIGZ1bmN0aW9ucy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHBhcnRpYWxseSBhcHBseSBhcmd1bWVudHMgdG8uXG4gICAgICogQHBhcmFtIHsuLi4qfSBbcGFydGlhbHNdIFRoZSBhcmd1bWVudHMgdG8gYmUgcGFydGlhbGx5IGFwcGxpZWQuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgcGFydGlhbGx5IGFwcGxpZWQgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBncmVldCA9IGZ1bmN0aW9uKGdyZWV0aW5nLCBuYW1lKSB7XG4gICAgICogICByZXR1cm4gZ3JlZXRpbmcgKyAnICcgKyBuYW1lO1xuICAgICAqIH07XG4gICAgICpcbiAgICAgKiB2YXIgZ3JlZXRGcmVkID0gXy5wYXJ0aWFsUmlnaHQoZ3JlZXQsICdmcmVkJyk7XG4gICAgICogZ3JlZXRGcmVkKCdoaScpO1xuICAgICAqIC8vID0+ICdoaSBmcmVkJ1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgcGxhY2Vob2xkZXJzXG4gICAgICogdmFyIHNheUhlbGxvVG8gPSBfLnBhcnRpYWxSaWdodChncmVldCwgJ2hlbGxvJywgXyk7XG4gICAgICogc2F5SGVsbG9UbygnZnJlZCcpO1xuICAgICAqIC8vID0+ICdoZWxsbyBmcmVkJ1xuICAgICAqL1xuICAgIHZhciBwYXJ0aWFsUmlnaHQgPSBjcmVhdGVQYXJ0aWFsKFBBUlRJQUxfUklHSFRfRkxBRyk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBpbnZva2VzIGBmdW5jYCB3aXRoIGFyZ3VtZW50cyBhcnJhbmdlZCBhY2NvcmRpbmdcbiAgICAgKiB0byB0aGUgc3BlY2lmaWVkIGluZGV4ZXMgd2hlcmUgdGhlIGFyZ3VtZW50IHZhbHVlIGF0IHRoZSBmaXJzdCBpbmRleCBpc1xuICAgICAqIHByb3ZpZGVkIGFzIHRoZSBmaXJzdCBhcmd1bWVudCwgdGhlIGFyZ3VtZW50IHZhbHVlIGF0IHRoZSBzZWNvbmQgaW5kZXggaXNcbiAgICAgKiBwcm92aWRlZCBhcyB0aGUgc2Vjb25kIGFyZ3VtZW50LCBhbmQgc28gb24uXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byByZWFycmFuZ2UgYXJndW1lbnRzIGZvci5cbiAgICAgKiBAcGFyYW0gey4uLihudW1iZXJ8bnVtYmVyW10pfSBpbmRleGVzIFRoZSBhcnJhbmdlZCBhcmd1bWVudCBpbmRleGVzLFxuICAgICAqICBzcGVjaWZpZWQgYXMgaW5kaXZpZHVhbCBpbmRleGVzIG9yIGFycmF5cyBvZiBpbmRleGVzLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgcmVhcmdlZCA9IF8ucmVhcmcoZnVuY3Rpb24oYSwgYiwgYykge1xuICAgICAqICAgcmV0dXJuIFthLCBiLCBjXTtcbiAgICAgKiB9LCAyLCAwLCAxKTtcbiAgICAgKlxuICAgICAqIHJlYXJnZWQoJ2InLCAnYycsICdhJylcbiAgICAgKiAvLyA9PiBbJ2EnLCAnYicsICdjJ11cbiAgICAgKlxuICAgICAqIHZhciBtYXAgPSBfLnJlYXJnKF8ubWFwLCBbMSwgMF0pO1xuICAgICAqIG1hcChmdW5jdGlvbihuKSB7XG4gICAgICogICByZXR1cm4gbiAqIDM7XG4gICAgICogfSwgWzEsIDIsIDNdKTtcbiAgICAgKiAvLyA9PiBbMywgNiwgOV1cbiAgICAgKi9cbiAgICB2YXIgcmVhcmcgPSByZXN0UGFyYW0oZnVuY3Rpb24oZnVuYywgaW5kZXhlcykge1xuICAgICAgcmV0dXJuIGNyZWF0ZVdyYXBwZXIoZnVuYywgUkVBUkdfRkxBRywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgYmFzZUZsYXR0ZW4oaW5kZXhlcykpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgaW52b2tlcyBgZnVuY2Agd2l0aCB0aGUgYHRoaXNgIGJpbmRpbmcgb2YgdGhlXG4gICAgICogY3JlYXRlZCBmdW5jdGlvbiBhbmQgYXJndW1lbnRzIGZyb20gYHN0YXJ0YCBhbmQgYmV5b25kIHByb3ZpZGVkIGFzIGFuIGFycmF5LlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoaXMgbWV0aG9kIGlzIGJhc2VkIG9uIHRoZSBbcmVzdCBwYXJhbWV0ZXJdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0Z1bmN0aW9ucy9yZXN0X3BhcmFtZXRlcnMpLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gYXBwbHkgYSByZXN0IHBhcmFtZXRlciB0by5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3N0YXJ0PWZ1bmMubGVuZ3RoLTFdIFRoZSBzdGFydCBwb3NpdGlvbiBvZiB0aGUgcmVzdCBwYXJhbWV0ZXIuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBzYXkgPSBfLnJlc3RQYXJhbShmdW5jdGlvbih3aGF0LCBuYW1lcykge1xuICAgICAqICAgcmV0dXJuIHdoYXQgKyAnICcgKyBfLmluaXRpYWwobmFtZXMpLmpvaW4oJywgJykgK1xuICAgICAqICAgICAoXy5zaXplKG5hbWVzKSA+IDEgPyAnLCAmICcgOiAnJykgKyBfLmxhc3QobmFtZXMpO1xuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogc2F5KCdoZWxsbycsICdmcmVkJywgJ2Jhcm5leScsICdwZWJibGVzJyk7XG4gICAgICogLy8gPT4gJ2hlbGxvIGZyZWQsIGJhcm5leSwgJiBwZWJibGVzJ1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlc3RQYXJhbShmdW5jLCBzdGFydCkge1xuICAgICAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICAgICAgfVxuICAgICAgc3RhcnQgPSBuYXRpdmVNYXgoc3RhcnQgPT09IHVuZGVmaW5lZCA/IChmdW5jLmxlbmd0aCAtIDEpIDogKCtzdGFydCB8fCAwKSwgMCk7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzLFxuICAgICAgICAgICAgaW5kZXggPSAtMSxcbiAgICAgICAgICAgIGxlbmd0aCA9IG5hdGl2ZU1heChhcmdzLmxlbmd0aCAtIHN0YXJ0LCAwKSxcbiAgICAgICAgICAgIHJlc3QgPSBBcnJheShsZW5ndGgpO1xuXG4gICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgICAgcmVzdFtpbmRleF0gPSBhcmdzW3N0YXJ0ICsgaW5kZXhdO1xuICAgICAgICB9XG4gICAgICAgIHN3aXRjaCAoc3RhcnQpIHtcbiAgICAgICAgICBjYXNlIDA6IHJldHVybiBmdW5jLmNhbGwodGhpcywgcmVzdCk7XG4gICAgICAgICAgY2FzZSAxOiByZXR1cm4gZnVuYy5jYWxsKHRoaXMsIGFyZ3NbMF0sIHJlc3QpO1xuICAgICAgICAgIGNhc2UgMjogcmV0dXJuIGZ1bmMuY2FsbCh0aGlzLCBhcmdzWzBdLCBhcmdzWzFdLCByZXN0KTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb3RoZXJBcmdzID0gQXJyYXkoc3RhcnQgKyAxKTtcbiAgICAgICAgaW5kZXggPSAtMTtcbiAgICAgICAgd2hpbGUgKCsraW5kZXggPCBzdGFydCkge1xuICAgICAgICAgIG90aGVyQXJnc1tpbmRleF0gPSBhcmdzW2luZGV4XTtcbiAgICAgICAgfVxuICAgICAgICBvdGhlckFyZ3Nbc3RhcnRdID0gcmVzdDtcbiAgICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkodGhpcywgb3RoZXJBcmdzKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgaW52b2tlcyBgZnVuY2Agd2l0aCB0aGUgYHRoaXNgIGJpbmRpbmcgb2YgdGhlIGNyZWF0ZWRcbiAgICAgKiBmdW5jdGlvbiBhbmQgYW4gYXJyYXkgb2YgYXJndW1lbnRzIG11Y2ggbGlrZSBbYEZ1bmN0aW9uI2FwcGx5YF0oaHR0cHM6Ly9lczUuZ2l0aHViLmlvLyN4MTUuMy40LjMpLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoaXMgbWV0aG9kIGlzIGJhc2VkIG9uIHRoZSBbc3ByZWFkIG9wZXJhdG9yXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9PcGVyYXRvcnMvU3ByZWFkX29wZXJhdG9yKS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHNwcmVhZCBhcmd1bWVudHMgb3Zlci5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIHNheSA9IF8uc3ByZWFkKGZ1bmN0aW9uKHdobywgd2hhdCkge1xuICAgICAqICAgcmV0dXJuIHdobyArICcgc2F5cyAnICsgd2hhdDtcbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIHNheShbJ2ZyZWQnLCAnaGVsbG8nXSk7XG4gICAgICogLy8gPT4gJ2ZyZWQgc2F5cyBoZWxsbydcbiAgICAgKlxuICAgICAqIC8vIHdpdGggYSBQcm9taXNlXG4gICAgICogdmFyIG51bWJlcnMgPSBQcm9taXNlLmFsbChbXG4gICAgICogICBQcm9taXNlLnJlc29sdmUoNDApLFxuICAgICAqICAgUHJvbWlzZS5yZXNvbHZlKDM2KVxuICAgICAqIF0pO1xuICAgICAqXG4gICAgICogbnVtYmVycy50aGVuKF8uc3ByZWFkKGZ1bmN0aW9uKHgsIHkpIHtcbiAgICAgKiAgIHJldHVybiB4ICsgeTtcbiAgICAgKiB9KSk7XG4gICAgICogLy8gPT4gYSBQcm9taXNlIG9mIDc2XG4gICAgICovXG4gICAgZnVuY3Rpb24gc3ByZWFkKGZ1bmMpIHtcbiAgICAgIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmdW5jdGlvbihhcnJheSkge1xuICAgICAgICByZXR1cm4gZnVuYy5hcHBseSh0aGlzLCBhcnJheSk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSB0aHJvdHRsZWQgZnVuY3Rpb24gdGhhdCBvbmx5IGludm9rZXMgYGZ1bmNgIGF0IG1vc3Qgb25jZSBwZXJcbiAgICAgKiBldmVyeSBgd2FpdGAgbWlsbGlzZWNvbmRzLiBUaGUgdGhyb3R0bGVkIGZ1bmN0aW9uIGNvbWVzIHdpdGggYSBgY2FuY2VsYFxuICAgICAqIG1ldGhvZCB0byBjYW5jZWwgZGVsYXllZCBpbnZvY2F0aW9ucy4gUHJvdmlkZSBhbiBvcHRpb25zIG9iamVjdCB0byBpbmRpY2F0ZVxuICAgICAqIHRoYXQgYGZ1bmNgIHNob3VsZCBiZSBpbnZva2VkIG9uIHRoZSBsZWFkaW5nIGFuZC9vciB0cmFpbGluZyBlZGdlIG9mIHRoZVxuICAgICAqIGB3YWl0YCB0aW1lb3V0LiBTdWJzZXF1ZW50IGNhbGxzIHRvIHRoZSB0aHJvdHRsZWQgZnVuY3Rpb24gcmV0dXJuIHRoZVxuICAgICAqIHJlc3VsdCBvZiB0aGUgbGFzdCBgZnVuY2AgY2FsbC5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBJZiBgbGVhZGluZ2AgYW5kIGB0cmFpbGluZ2Agb3B0aW9ucyBhcmUgYHRydWVgLCBgZnVuY2AgaXMgaW52b2tlZFxuICAgICAqIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0IG9ubHkgaWYgdGhlIHRoZSB0aHJvdHRsZWQgZnVuY3Rpb24gaXNcbiAgICAgKiBpbnZva2VkIG1vcmUgdGhhbiBvbmNlIGR1cmluZyB0aGUgYHdhaXRgIHRpbWVvdXQuXG4gICAgICpcbiAgICAgKiBTZWUgW0RhdmlkIENvcmJhY2hvJ3MgYXJ0aWNsZV0oaHR0cDovL2RydXBhbG1vdGlvbi5jb20vYXJ0aWNsZS9kZWJvdW5jZS1hbmQtdGhyb3R0bGUtdmlzdWFsLWV4cGxhbmF0aW9uKVxuICAgICAqIGZvciBkZXRhaWxzIG92ZXIgdGhlIGRpZmZlcmVuY2VzIGJldHdlZW4gYF8udGhyb3R0bGVgIGFuZCBgXy5kZWJvdW5jZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byB0aHJvdHRsZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3dhaXQ9MF0gVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gdGhyb3R0bGUgaW52b2NhdGlvbnMgdG8uXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBUaGUgb3B0aW9ucyBvYmplY3QuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5sZWFkaW5nPXRydWVdIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIGxlYWRpbmdcbiAgICAgKiAgZWRnZSBvZiB0aGUgdGltZW91dC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnRyYWlsaW5nPXRydWVdIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIHRyYWlsaW5nXG4gICAgICogIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgdGhyb3R0bGVkIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAvLyBhdm9pZCBleGNlc3NpdmVseSB1cGRhdGluZyB0aGUgcG9zaXRpb24gd2hpbGUgc2Nyb2xsaW5nXG4gICAgICogalF1ZXJ5KHdpbmRvdykub24oJ3Njcm9sbCcsIF8udGhyb3R0bGUodXBkYXRlUG9zaXRpb24sIDEwMCkpO1xuICAgICAqXG4gICAgICogLy8gaW52b2tlIGByZW5ld1Rva2VuYCB3aGVuIHRoZSBjbGljayBldmVudCBpcyBmaXJlZCwgYnV0IG5vdCBtb3JlIHRoYW4gb25jZSBldmVyeSA1IG1pbnV0ZXNcbiAgICAgKiBqUXVlcnkoJy5pbnRlcmFjdGl2ZScpLm9uKCdjbGljaycsIF8udGhyb3R0bGUocmVuZXdUb2tlbiwgMzAwMDAwLCB7XG4gICAgICogICAndHJhaWxpbmcnOiBmYWxzZVxuICAgICAqIH0pKTtcbiAgICAgKlxuICAgICAqIC8vIGNhbmNlbCBhIHRyYWlsaW5nIHRocm90dGxlZCBjYWxsXG4gICAgICogalF1ZXJ5KHdpbmRvdykub24oJ3BvcHN0YXRlJywgdGhyb3R0bGVkLmNhbmNlbCk7XG4gICAgICovXG4gICAgZnVuY3Rpb24gdGhyb3R0bGUoZnVuYywgd2FpdCwgb3B0aW9ucykge1xuICAgICAgdmFyIGxlYWRpbmcgPSB0cnVlLFxuICAgICAgICAgIHRyYWlsaW5nID0gdHJ1ZTtcblxuICAgICAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICAgICAgfVxuICAgICAgaWYgKG9wdGlvbnMgPT09IGZhbHNlKSB7XG4gICAgICAgIGxlYWRpbmcgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSBpZiAoaXNPYmplY3Qob3B0aW9ucykpIHtcbiAgICAgICAgbGVhZGluZyA9ICdsZWFkaW5nJyBpbiBvcHRpb25zID8gISFvcHRpb25zLmxlYWRpbmcgOiBsZWFkaW5nO1xuICAgICAgICB0cmFpbGluZyA9ICd0cmFpbGluZycgaW4gb3B0aW9ucyA/ICEhb3B0aW9ucy50cmFpbGluZyA6IHRyYWlsaW5nO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGRlYm91bmNlKGZ1bmMsIHdhaXQsIHsgJ2xlYWRpbmcnOiBsZWFkaW5nLCAnbWF4V2FpdCc6ICt3YWl0LCAndHJhaWxpbmcnOiB0cmFpbGluZyB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBwcm92aWRlcyBgdmFsdWVgIHRvIHRoZSB3cmFwcGVyIGZ1bmN0aW9uIGFzIGl0c1xuICAgICAqIGZpcnN0IGFyZ3VtZW50LiBBbnkgYWRkaXRpb25hbCBhcmd1bWVudHMgcHJvdmlkZWQgdG8gdGhlIGZ1bmN0aW9uIGFyZVxuICAgICAqIGFwcGVuZGVkIHRvIHRob3NlIHByb3ZpZGVkIHRvIHRoZSB3cmFwcGVyIGZ1bmN0aW9uLiBUaGUgd3JhcHBlciBpcyBpbnZva2VkXG4gICAgICogd2l0aCB0aGUgYHRoaXNgIGJpbmRpbmcgb2YgdGhlIGNyZWF0ZWQgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byB3cmFwLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHdyYXBwZXIgVGhlIHdyYXBwZXIgZnVuY3Rpb24uXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBwID0gXy53cmFwKF8uZXNjYXBlLCBmdW5jdGlvbihmdW5jLCB0ZXh0KSB7XG4gICAgICogICByZXR1cm4gJzxwPicgKyBmdW5jKHRleHQpICsgJzwvcD4nO1xuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogcCgnZnJlZCwgYmFybmV5LCAmIHBlYmJsZXMnKTtcbiAgICAgKiAvLyA9PiAnPHA+ZnJlZCwgYmFybmV5LCAmYW1wOyBwZWJibGVzPC9wPidcbiAgICAgKi9cbiAgICBmdW5jdGlvbiB3cmFwKHZhbHVlLCB3cmFwcGVyKSB7XG4gICAgICB3cmFwcGVyID0gd3JhcHBlciA9PSBudWxsID8gaWRlbnRpdHkgOiB3cmFwcGVyO1xuICAgICAgcmV0dXJuIGNyZWF0ZVdyYXBwZXIod3JhcHBlciwgUEFSVElBTF9GTEFHLCB1bmRlZmluZWQsIFt2YWx1ZV0sIFtdKTtcbiAgICB9XG5cbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgY2xvbmUgb2YgYHZhbHVlYC4gSWYgYGlzRGVlcGAgaXMgYHRydWVgIG5lc3RlZCBvYmplY3RzIGFyZSBjbG9uZWQsXG4gICAgICogb3RoZXJ3aXNlIHRoZXkgYXJlIGFzc2lnbmVkIGJ5IHJlZmVyZW5jZS4gSWYgYGN1c3RvbWl6ZXJgIGlzIHByb3ZpZGVkIGl0IGlzXG4gICAgICogaW52b2tlZCB0byBwcm9kdWNlIHRoZSBjbG9uZWQgdmFsdWVzLiBJZiBgY3VzdG9taXplcmAgcmV0dXJucyBgdW5kZWZpbmVkYFxuICAgICAqIGNsb25pbmcgaXMgaGFuZGxlZCBieSB0aGUgbWV0aG9kIGluc3RlYWQuIFRoZSBgY3VzdG9taXplcmAgaXMgYm91bmQgdG9cbiAgICAgKiBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0d28gYXJndW1lbnQ7ICh2YWx1ZSBbLCBpbmRleHxrZXksIG9iamVjdF0pLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoaXMgbWV0aG9kIGlzIGxvb3NlbHkgYmFzZWQgb24gdGhlXG4gICAgICogW3N0cnVjdHVyZWQgY2xvbmUgYWxnb3JpdGhtXShodHRwOi8vd3d3LnczLm9yZy9UUi9odG1sNS9pbmZyYXN0cnVjdHVyZS5odG1sI2ludGVybmFsLXN0cnVjdHVyZWQtY2xvbmluZy1hbGdvcml0aG0pLlxuICAgICAqIFRoZSBlbnVtZXJhYmxlIHByb3BlcnRpZXMgb2YgYGFyZ3VtZW50c2Agb2JqZWN0cyBhbmQgb2JqZWN0cyBjcmVhdGVkIGJ5XG4gICAgICogY29uc3RydWN0b3JzIG90aGVyIHRoYW4gYE9iamVjdGAgYXJlIGNsb25lZCB0byBwbGFpbiBgT2JqZWN0YCBvYmplY3RzLiBBblxuICAgICAqIGVtcHR5IG9iamVjdCBpcyByZXR1cm5lZCBmb3IgdW5jbG9uZWFibGUgdmFsdWVzIHN1Y2ggYXMgZnVuY3Rpb25zLCBET00gbm9kZXMsXG4gICAgICogTWFwcywgU2V0cywgYW5kIFdlYWtNYXBzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IExhbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjbG9uZS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc0RlZXBdIFNwZWNpZnkgYSBkZWVwIGNsb25lLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNsb25pbmcgdmFsdWVzLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY3VzdG9taXplcmAuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGNsb25lZCB2YWx1ZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIHVzZXJzID0gW1xuICAgICAqICAgeyAndXNlcic6ICdiYXJuZXknIH0sXG4gICAgICogICB7ICd1c2VyJzogJ2ZyZWQnIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogdmFyIHNoYWxsb3cgPSBfLmNsb25lKHVzZXJzKTtcbiAgICAgKiBzaGFsbG93WzBdID09PSB1c2Vyc1swXTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiB2YXIgZGVlcCA9IF8uY2xvbmUodXNlcnMsIHRydWUpO1xuICAgICAqIGRlZXBbMF0gPT09IHVzZXJzWzBdO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBhIGN1c3RvbWl6ZXIgY2FsbGJhY2tcbiAgICAgKiB2YXIgZWwgPSBfLmNsb25lKGRvY3VtZW50LmJvZHksIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICogICBpZiAoXy5pc0VsZW1lbnQodmFsdWUpKSB7XG4gICAgICogICAgIHJldHVybiB2YWx1ZS5jbG9uZU5vZGUoZmFsc2UpO1xuICAgICAqICAgfVxuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogZWwgPT09IGRvY3VtZW50LmJvZHlcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqIGVsLm5vZGVOYW1lXG4gICAgICogLy8gPT4gQk9EWVxuICAgICAqIGVsLmNoaWxkTm9kZXMubGVuZ3RoO1xuICAgICAqIC8vID0+IDBcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjbG9uZSh2YWx1ZSwgaXNEZWVwLCBjdXN0b21pemVyLCB0aGlzQXJnKSB7XG4gICAgICBpZiAoaXNEZWVwICYmIHR5cGVvZiBpc0RlZXAgIT0gJ2Jvb2xlYW4nICYmIGlzSXRlcmF0ZWVDYWxsKHZhbHVlLCBpc0RlZXAsIGN1c3RvbWl6ZXIpKSB7XG4gICAgICAgIGlzRGVlcCA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAodHlwZW9mIGlzRGVlcCA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRoaXNBcmcgPSBjdXN0b21pemVyO1xuICAgICAgICBjdXN0b21pemVyID0gaXNEZWVwO1xuICAgICAgICBpc0RlZXAgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0eXBlb2YgY3VzdG9taXplciA9PSAnZnVuY3Rpb24nXG4gICAgICAgID8gYmFzZUNsb25lKHZhbHVlLCBpc0RlZXAsIGJpbmRDYWxsYmFjayhjdXN0b21pemVyLCB0aGlzQXJnLCAxKSlcbiAgICAgICAgOiBiYXNlQ2xvbmUodmFsdWUsIGlzRGVlcCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGRlZXAgY2xvbmUgb2YgYHZhbHVlYC4gSWYgYGN1c3RvbWl6ZXJgIGlzIHByb3ZpZGVkIGl0IGlzIGludm9rZWRcbiAgICAgKiB0byBwcm9kdWNlIHRoZSBjbG9uZWQgdmFsdWVzLiBJZiBgY3VzdG9taXplcmAgcmV0dXJucyBgdW5kZWZpbmVkYCBjbG9uaW5nXG4gICAgICogaXMgaGFuZGxlZCBieSB0aGUgbWV0aG9kIGluc3RlYWQuIFRoZSBgY3VzdG9taXplcmAgaXMgYm91bmQgdG8gYHRoaXNBcmdgXG4gICAgICogYW5kIGludm9rZWQgd2l0aCB0d28gYXJndW1lbnQ7ICh2YWx1ZSBbLCBpbmRleHxrZXksIG9iamVjdF0pLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoaXMgbWV0aG9kIGlzIGxvb3NlbHkgYmFzZWQgb24gdGhlXG4gICAgICogW3N0cnVjdHVyZWQgY2xvbmUgYWxnb3JpdGhtXShodHRwOi8vd3d3LnczLm9yZy9UUi9odG1sNS9pbmZyYXN0cnVjdHVyZS5odG1sI2ludGVybmFsLXN0cnVjdHVyZWQtY2xvbmluZy1hbGdvcml0aG0pLlxuICAgICAqIFRoZSBlbnVtZXJhYmxlIHByb3BlcnRpZXMgb2YgYGFyZ3VtZW50c2Agb2JqZWN0cyBhbmQgb2JqZWN0cyBjcmVhdGVkIGJ5XG4gICAgICogY29uc3RydWN0b3JzIG90aGVyIHRoYW4gYE9iamVjdGAgYXJlIGNsb25lZCB0byBwbGFpbiBgT2JqZWN0YCBvYmplY3RzLiBBblxuICAgICAqIGVtcHR5IG9iamVjdCBpcyByZXR1cm5lZCBmb3IgdW5jbG9uZWFibGUgdmFsdWVzIHN1Y2ggYXMgZnVuY3Rpb25zLCBET00gbm9kZXMsXG4gICAgICogTWFwcywgU2V0cywgYW5kIFdlYWtNYXBzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IExhbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBkZWVwIGNsb25lLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNsb25pbmcgdmFsdWVzLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY3VzdG9taXplcmAuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGRlZXAgY2xvbmVkIHZhbHVlLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgdXNlcnMgPSBbXG4gICAgICogICB7ICd1c2VyJzogJ2Jhcm5leScgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAnZnJlZCcgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiB2YXIgZGVlcCA9IF8uY2xvbmVEZWVwKHVzZXJzKTtcbiAgICAgKiBkZWVwWzBdID09PSB1c2Vyc1swXTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgYSBjdXN0b21pemVyIGNhbGxiYWNrXG4gICAgICogdmFyIGVsID0gXy5jbG9uZURlZXAoZG9jdW1lbnQuYm9keSwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgKiAgIGlmIChfLmlzRWxlbWVudCh2YWx1ZSkpIHtcbiAgICAgKiAgICAgcmV0dXJuIHZhbHVlLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgKiAgIH1cbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIGVsID09PSBkb2N1bWVudC5ib2R5XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKiBlbC5ub2RlTmFtZVxuICAgICAqIC8vID0+IEJPRFlcbiAgICAgKiBlbC5jaGlsZE5vZGVzLmxlbmd0aDtcbiAgICAgKiAvLyA9PiAyMFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNsb25lRGVlcCh2YWx1ZSwgY3VzdG9taXplciwgdGhpc0FyZykge1xuICAgICAgcmV0dXJuIHR5cGVvZiBjdXN0b21pemVyID09ICdmdW5jdGlvbidcbiAgICAgICAgPyBiYXNlQ2xvbmUodmFsdWUsIHRydWUsIGJpbmRDYWxsYmFjayhjdXN0b21pemVyLCB0aGlzQXJnLCAxKSlcbiAgICAgICAgOiBiYXNlQ2xvbmUodmFsdWUsIHRydWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGdyZWF0ZXIgdGhhbiBgb3RoZXJgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IExhbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb21wYXJlLlxuICAgICAqIEBwYXJhbSB7Kn0gb3RoZXIgVGhlIG90aGVyIHZhbHVlIHRvIGNvbXBhcmUuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgZ3JlYXRlciB0aGFuIGBvdGhlcmAsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5ndCgzLCAxKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmd0KDMsIDMpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICpcbiAgICAgKiBfLmd0KDEsIDMpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ3QodmFsdWUsIG90aGVyKSB7XG4gICAgICByZXR1cm4gdmFsdWUgPiBvdGhlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gYG90aGVyYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29tcGFyZS5cbiAgICAgKiBAcGFyYW0geyp9IG90aGVyIFRoZSBvdGhlciB2YWx1ZSB0byBjb21wYXJlLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byBgb3RoZXJgLCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uZ3RlKDMsIDEpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uZ3RlKDMsIDMpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uZ3RlKDEsIDMpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ3RlKHZhbHVlLCBvdGhlcikge1xuICAgICAgcmV0dXJuIHZhbHVlID49IG90aGVyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYW4gYGFyZ3VtZW50c2Agb2JqZWN0LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IExhbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBjb3JyZWN0bHkgY2xhc3NpZmllZCwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmlzQXJndW1lbnRzKGZ1bmN0aW9uKCkgeyByZXR1cm4gYXJndW1lbnRzOyB9KCkpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNBcmd1bWVudHMoWzEsIDIsIDNdKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzQXJndW1lbnRzKHZhbHVlKSB7XG4gICAgICByZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBpc0FycmF5TGlrZSh2YWx1ZSkgJiZcbiAgICAgICAgaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwgJ2NhbGxlZScpICYmICFwcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHZhbHVlLCAnY2FsbGVlJyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhbiBgQXJyYXlgIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgY29ycmVjdGx5IGNsYXNzaWZpZWQsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pc0FycmF5KFsxLCAyLCAzXSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc0FycmF5KGZ1bmN0aW9uKCkgeyByZXR1cm4gYXJndW1lbnRzOyB9KCkpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgdmFyIGlzQXJyYXkgPSBuYXRpdmVJc0FycmF5IHx8IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBpc0xlbmd0aCh2YWx1ZS5sZW5ndGgpICYmIG9ialRvU3RyaW5nLmNhbGwodmFsdWUpID09IGFycmF5VGFnO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYm9vbGVhbiBwcmltaXRpdmUgb3Igb2JqZWN0LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IExhbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBjb3JyZWN0bHkgY2xhc3NpZmllZCwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmlzQm9vbGVhbihmYWxzZSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc0Jvb2xlYW4obnVsbCk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc0Jvb2xlYW4odmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZSA9PT0gdHJ1ZSB8fCB2YWx1ZSA9PT0gZmFsc2UgfHwgKGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgb2JqVG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gYm9vbFRhZyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBEYXRlYCBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGNvcnJlY3RseSBjbGFzc2lmaWVkLCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaXNEYXRlKG5ldyBEYXRlKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzRGF0ZSgnTW9uIEFwcmlsIDIzIDIwMTInKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzRGF0ZSh2YWx1ZSkge1xuICAgICAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgb2JqVG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gZGF0ZVRhZztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIERPTSBlbGVtZW50LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IExhbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIERPTSBlbGVtZW50LCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaXNFbGVtZW50KGRvY3VtZW50LmJvZHkpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNFbGVtZW50KCc8Ym9keT4nKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzRWxlbWVudCh2YWx1ZSkge1xuICAgICAgcmV0dXJuICEhdmFsdWUgJiYgdmFsdWUubm9kZVR5cGUgPT09IDEgJiYgaXNPYmplY3RMaWtlKHZhbHVlKSAmJiAhaXNQbGFpbk9iamVjdCh2YWx1ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgZW1wdHkuIEEgdmFsdWUgaXMgY29uc2lkZXJlZCBlbXB0eSB1bmxlc3MgaXQgaXMgYW5cbiAgICAgKiBgYXJndW1lbnRzYCBvYmplY3QsIGFycmF5LCBzdHJpbmcsIG9yIGpRdWVyeS1saWtlIGNvbGxlY3Rpb24gd2l0aCBhIGxlbmd0aFxuICAgICAqIGdyZWF0ZXIgdGhhbiBgMGAgb3IgYW4gb2JqZWN0IHdpdGggb3duIGVudW1lcmFibGUgcHJvcGVydGllcy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSB2YWx1ZSBUaGUgdmFsdWUgdG8gaW5zcGVjdC5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBlbXB0eSwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmlzRW1wdHkobnVsbCk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc0VtcHR5KHRydWUpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNFbXB0eSgxKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzRW1wdHkoWzEsIDIsIDNdKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqXG4gICAgICogXy5pc0VtcHR5KHsgJ2EnOiAxIH0pO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNFbXB0eSh2YWx1ZSkge1xuICAgICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICBpZiAoaXNBcnJheUxpa2UodmFsdWUpICYmIChpc0FycmF5KHZhbHVlKSB8fCBpc1N0cmluZyh2YWx1ZSkgfHwgaXNBcmd1bWVudHModmFsdWUpIHx8XG4gICAgICAgICAgKGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgaXNGdW5jdGlvbih2YWx1ZS5zcGxpY2UpKSkpIHtcbiAgICAgICAgcmV0dXJuICF2YWx1ZS5sZW5ndGg7XG4gICAgICB9XG4gICAgICByZXR1cm4gIWtleXModmFsdWUpLmxlbmd0aDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBhIGRlZXAgY29tcGFyaXNvbiBiZXR3ZWVuIHR3byB2YWx1ZXMgdG8gZGV0ZXJtaW5lIGlmIHRoZXkgYXJlXG4gICAgICogZXF1aXZhbGVudC4gSWYgYGN1c3RvbWl6ZXJgIGlzIHByb3ZpZGVkIGl0IGlzIGludm9rZWQgdG8gY29tcGFyZSB2YWx1ZXMuXG4gICAgICogSWYgYGN1c3RvbWl6ZXJgIHJldHVybnMgYHVuZGVmaW5lZGAgY29tcGFyaXNvbnMgYXJlIGhhbmRsZWQgYnkgdGhlIG1ldGhvZFxuICAgICAqIGluc3RlYWQuIFRoZSBgY3VzdG9taXplcmAgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdGhyZWVcbiAgICAgKiBhcmd1bWVudHM6ICh2YWx1ZSwgb3RoZXIgWywgaW5kZXh8a2V5XSkuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVGhpcyBtZXRob2Qgc3VwcG9ydHMgY29tcGFyaW5nIGFycmF5cywgYm9vbGVhbnMsIGBEYXRlYCBvYmplY3RzLFxuICAgICAqIG51bWJlcnMsIGBPYmplY3RgIG9iamVjdHMsIHJlZ2V4ZXMsIGFuZCBzdHJpbmdzLiBPYmplY3RzIGFyZSBjb21wYXJlZCBieVxuICAgICAqIHRoZWlyIG93biwgbm90IGluaGVyaXRlZCwgZW51bWVyYWJsZSBwcm9wZXJ0aWVzLiBGdW5jdGlvbnMgYW5kIERPTSBub2Rlc1xuICAgICAqIGFyZSAqKm5vdCoqIHN1cHBvcnRlZC4gUHJvdmlkZSBhIGN1c3RvbWl6ZXIgZnVuY3Rpb24gdG8gZXh0ZW5kIHN1cHBvcnRcbiAgICAgKiBmb3IgY29tcGFyaW5nIG90aGVyIHZhbHVlcy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBhbGlhcyBlcVxuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29tcGFyZS5cbiAgICAgKiBAcGFyYW0geyp9IG90aGVyIFRoZSBvdGhlciB2YWx1ZSB0byBjb21wYXJlLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIHZhbHVlIGNvbXBhcmlzb25zLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY3VzdG9taXplcmAuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSB2YWx1ZXMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIG9iamVjdCA9IHsgJ3VzZXInOiAnZnJlZCcgfTtcbiAgICAgKiB2YXIgb3RoZXIgPSB7ICd1c2VyJzogJ2ZyZWQnIH07XG4gICAgICpcbiAgICAgKiBvYmplY3QgPT0gb3RoZXI7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKlxuICAgICAqIF8uaXNFcXVhbChvYmplY3QsIG90aGVyKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBhIGN1c3RvbWl6ZXIgY2FsbGJhY2tcbiAgICAgKiB2YXIgYXJyYXkgPSBbJ2hlbGxvJywgJ2dvb2RieWUnXTtcbiAgICAgKiB2YXIgb3RoZXIgPSBbJ2hpJywgJ2dvb2RieWUnXTtcbiAgICAgKlxuICAgICAqIF8uaXNFcXVhbChhcnJheSwgb3RoZXIsIGZ1bmN0aW9uKHZhbHVlLCBvdGhlcikge1xuICAgICAqICAgaWYgKF8uZXZlcnkoW3ZhbHVlLCBvdGhlcl0sIFJlZ0V4cC5wcm90b3R5cGUudGVzdCwgL15oKD86aXxlbGxvKSQvKSkge1xuICAgICAqICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgKiAgIH1cbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNFcXVhbCh2YWx1ZSwgb3RoZXIsIGN1c3RvbWl6ZXIsIHRoaXNBcmcpIHtcbiAgICAgIGN1c3RvbWl6ZXIgPSB0eXBlb2YgY3VzdG9taXplciA9PSAnZnVuY3Rpb24nID8gYmluZENhbGxiYWNrKGN1c3RvbWl6ZXIsIHRoaXNBcmcsIDMpIDogdW5kZWZpbmVkO1xuICAgICAgdmFyIHJlc3VsdCA9IGN1c3RvbWl6ZXIgPyBjdXN0b21pemVyKHZhbHVlLCBvdGhlcikgOiB1bmRlZmluZWQ7XG4gICAgICByZXR1cm4gIHJlc3VsdCA9PT0gdW5kZWZpbmVkID8gYmFzZUlzRXF1YWwodmFsdWUsIG90aGVyLCBjdXN0b21pemVyKSA6ICEhcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGFuIGBFcnJvcmAsIGBFdmFsRXJyb3JgLCBgUmFuZ2VFcnJvcmAsIGBSZWZlcmVuY2VFcnJvcmAsXG4gICAgICogYFN5bnRheEVycm9yYCwgYFR5cGVFcnJvcmAsIG9yIGBVUklFcnJvcmAgb2JqZWN0LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IExhbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBlcnJvciBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pc0Vycm9yKG5ldyBFcnJvcik7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc0Vycm9yKEVycm9yKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzRXJyb3IodmFsdWUpIHtcbiAgICAgIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmIHR5cGVvZiB2YWx1ZS5tZXNzYWdlID09ICdzdHJpbmcnICYmIG9ialRvU3RyaW5nLmNhbGwodmFsdWUpID09IGVycm9yVGFnO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgZmluaXRlIHByaW1pdGl2ZSBudW1iZXIuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgaXMgYmFzZWQgb24gW2BOdW1iZXIuaXNGaW5pdGVgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1udW1iZXIuaXNmaW5pdGUpLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IExhbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIGZpbml0ZSBudW1iZXIsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pc0Zpbml0ZSgxMCk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc0Zpbml0ZSgnMTAnKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqXG4gICAgICogXy5pc0Zpbml0ZSh0cnVlKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqXG4gICAgICogXy5pc0Zpbml0ZShPYmplY3QoMTApKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqXG4gICAgICogXy5pc0Zpbml0ZShJbmZpbml0eSk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc0Zpbml0ZSh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJyAmJiBuYXRpdmVJc0Zpbml0ZSh2YWx1ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBGdW5jdGlvbmAgb2JqZWN0LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IExhbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBjb3JyZWN0bHkgY2xhc3NpZmllZCwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmlzRnVuY3Rpb24oXyk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc0Z1bmN0aW9uKC9hYmMvKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIC8vIFRoZSB1c2Ugb2YgYE9iamVjdCN0b1N0cmluZ2AgYXZvaWRzIGlzc3VlcyB3aXRoIHRoZSBgdHlwZW9mYCBvcGVyYXRvclxuICAgICAgLy8gaW4gb2xkZXIgdmVyc2lvbnMgb2YgQ2hyb21lIGFuZCBTYWZhcmkgd2hpY2ggcmV0dXJuICdmdW5jdGlvbicgZm9yIHJlZ2V4ZXNcbiAgICAgIC8vIGFuZCBTYWZhcmkgOCBlcXVpdmFsZW50cyB3aGljaCByZXR1cm4gJ29iamVjdCcgZm9yIHR5cGVkIGFycmF5IGNvbnN0cnVjdG9ycy5cbiAgICAgIHJldHVybiBpc09iamVjdCh2YWx1ZSkgJiYgb2JqVG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gZnVuY1RhZztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyB0aGUgW2xhbmd1YWdlIHR5cGVdKGh0dHBzOi8vZXM1LmdpdGh1Yi5pby8jeDgpIG9mIGBPYmplY3RgLlxuICAgICAqIChlLmcuIGFycmF5cywgZnVuY3Rpb25zLCBvYmplY3RzLCByZWdleGVzLCBgbmV3IE51bWJlcigwKWAsIGFuZCBgbmV3IFN0cmluZygnJylgKVxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IExhbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pc09iamVjdCh7fSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc09iamVjdChbMSwgMiwgM10pO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNPYmplY3QoMSk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICAgICAgLy8gQXZvaWQgYSBWOCBKSVQgYnVnIGluIENocm9tZSAxOS0yMC5cbiAgICAgIC8vIFNlZSBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9MjI5MSBmb3IgbW9yZSBkZXRhaWxzLlxuICAgICAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gICAgICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZSA9PSAnb2JqZWN0JyB8fCB0eXBlID09ICdmdW5jdGlvbicpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBlcmZvcm1zIGEgZGVlcCBjb21wYXJpc29uIGJldHdlZW4gYG9iamVjdGAgYW5kIGBzb3VyY2VgIHRvIGRldGVybWluZSBpZlxuICAgICAqIGBvYmplY3RgIGNvbnRhaW5zIGVxdWl2YWxlbnQgcHJvcGVydHkgdmFsdWVzLiBJZiBgY3VzdG9taXplcmAgaXMgcHJvdmlkZWRcbiAgICAgKiBpdCBpcyBpbnZva2VkIHRvIGNvbXBhcmUgdmFsdWVzLiBJZiBgY3VzdG9taXplcmAgcmV0dXJucyBgdW5kZWZpbmVkYFxuICAgICAqIGNvbXBhcmlzb25zIGFyZSBoYW5kbGVkIGJ5IHRoZSBtZXRob2QgaW5zdGVhZC4gVGhlIGBjdXN0b21pemVyYCBpcyBib3VuZFxuICAgICAqIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50czogKHZhbHVlLCBvdGhlciwgaW5kZXh8a2V5KS5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBzdXBwb3J0cyBjb21wYXJpbmcgcHJvcGVydGllcyBvZiBhcnJheXMsIGJvb2xlYW5zLFxuICAgICAqIGBEYXRlYCBvYmplY3RzLCBudW1iZXJzLCBgT2JqZWN0YCBvYmplY3RzLCByZWdleGVzLCBhbmQgc3RyaW5ncy4gRnVuY3Rpb25zXG4gICAgICogYW5kIERPTSBub2RlcyBhcmUgKipub3QqKiBzdXBwb3J0ZWQuIFByb3ZpZGUgYSBjdXN0b21pemVyIGZ1bmN0aW9uIHRvIGV4dGVuZFxuICAgICAqIHN1cHBvcnQgZm9yIGNvbXBhcmluZyBvdGhlciB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpbnNwZWN0LlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgVGhlIG9iamVjdCBvZiBwcm9wZXJ0eSB2YWx1ZXMgdG8gbWF0Y2guXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgdmFsdWUgY29tcGFyaXNvbnMuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjdXN0b21pemVyYC5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYG9iamVjdGAgaXMgYSBtYXRjaCwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0ID0geyAndXNlcic6ICdmcmVkJywgJ2FnZSc6IDQwIH07XG4gICAgICpcbiAgICAgKiBfLmlzTWF0Y2gob2JqZWN0LCB7ICdhZ2UnOiA0MCB9KTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzTWF0Y2gob2JqZWN0LCB7ICdhZ2UnOiAzNiB9KTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgYSBjdXN0b21pemVyIGNhbGxiYWNrXG4gICAgICogdmFyIG9iamVjdCA9IHsgJ2dyZWV0aW5nJzogJ2hlbGxvJyB9O1xuICAgICAqIHZhciBzb3VyY2UgPSB7ICdncmVldGluZyc6ICdoaScgfTtcbiAgICAgKlxuICAgICAqIF8uaXNNYXRjaChvYmplY3QsIHNvdXJjZSwgZnVuY3Rpb24odmFsdWUsIG90aGVyKSB7XG4gICAgICogICByZXR1cm4gXy5ldmVyeShbdmFsdWUsIG90aGVyXSwgUmVnRXhwLnByb3RvdHlwZS50ZXN0LCAvXmgoPzppfGVsbG8pJC8pIHx8IHVuZGVmaW5lZDtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNNYXRjaChvYmplY3QsIHNvdXJjZSwgY3VzdG9taXplciwgdGhpc0FyZykge1xuICAgICAgY3VzdG9taXplciA9IHR5cGVvZiBjdXN0b21pemVyID09ICdmdW5jdGlvbicgPyBiaW5kQ2FsbGJhY2soY3VzdG9taXplciwgdGhpc0FyZywgMykgOiB1bmRlZmluZWQ7XG4gICAgICByZXR1cm4gYmFzZUlzTWF0Y2gob2JqZWN0LCBnZXRNYXRjaERhdGEoc291cmNlKSwgY3VzdG9taXplcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYE5hTmAuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgaXMgbm90IHRoZSBzYW1lIGFzIFtgaXNOYU5gXShodHRwczovL2VzNS5naXRodWIuaW8vI3gxNS4xLjIuNClcbiAgICAgKiB3aGljaCByZXR1cm5zIGB0cnVlYCBmb3IgYHVuZGVmaW5lZGAgYW5kIG90aGVyIG5vbi1udW1lcmljIHZhbHVlcy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYE5hTmAsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pc05hTihOYU4pO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNOYU4obmV3IE51bWJlcihOYU4pKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBpc05hTih1bmRlZmluZWQpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNOYU4odW5kZWZpbmVkKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzTmFOKHZhbHVlKSB7XG4gICAgICAvLyBBbiBgTmFOYCBwcmltaXRpdmUgaXMgdGhlIG9ubHkgdmFsdWUgdGhhdCBpcyBub3QgZXF1YWwgdG8gaXRzZWxmLlxuICAgICAgLy8gUGVyZm9ybSB0aGUgYHRvU3RyaW5nVGFnYCBjaGVjayBmaXJzdCB0byBhdm9pZCBlcnJvcnMgd2l0aCBzb21lIGhvc3Qgb2JqZWN0cyBpbiBJRS5cbiAgICAgIHJldHVybiBpc051bWJlcih2YWx1ZSkgJiYgdmFsdWUgIT0gK3ZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgbmF0aXZlIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IExhbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIG5hdGl2ZSBmdW5jdGlvbiwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmlzTmF0aXZlKEFycmF5LnByb3RvdHlwZS5wdXNoKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzTmF0aXZlKF8pO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNOYXRpdmUodmFsdWUpIHtcbiAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmIChpc0Z1bmN0aW9uKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gcmVJc05hdGl2ZS50ZXN0KGZuVG9TdHJpbmcuY2FsbCh2YWx1ZSkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgcmVJc0hvc3RDdG9yLnRlc3QodmFsdWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGBudWxsYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYG51bGxgLCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaXNOdWxsKG51bGwpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNOdWxsKHZvaWQgMCk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc051bGwodmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZSA9PT0gbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYE51bWJlcmAgcHJpbWl0aXZlIG9yIG9iamVjdC5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUbyBleGNsdWRlIGBJbmZpbml0eWAsIGAtSW5maW5pdHlgLCBhbmQgYE5hTmAsIHdoaWNoIGFyZSBjbGFzc2lmaWVkXG4gICAgICogYXMgbnVtYmVycywgdXNlIHRoZSBgXy5pc0Zpbml0ZWAgbWV0aG9kLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IExhbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBjb3JyZWN0bHkgY2xhc3NpZmllZCwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmlzTnVtYmVyKDguNCk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc051bWJlcihOYU4pO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNOdW1iZXIoJzguNCcpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNOdW1iZXIodmFsdWUpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgfHwgKGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgb2JqVG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gbnVtYmVyVGFnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHBsYWluIG9iamVjdCwgdGhhdCBpcywgYW4gb2JqZWN0IGNyZWF0ZWQgYnkgdGhlXG4gICAgICogYE9iamVjdGAgY29uc3RydWN0b3Igb3Igb25lIHdpdGggYSBgW1tQcm90b3R5cGVdXWAgb2YgYG51bGxgLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoaXMgbWV0aG9kIGFzc3VtZXMgb2JqZWN0cyBjcmVhdGVkIGJ5IHRoZSBgT2JqZWN0YCBjb25zdHJ1Y3RvclxuICAgICAqIGhhdmUgbm8gaW5oZXJpdGVkIGVudW1lcmFibGUgcHJvcGVydGllcy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBwbGFpbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogZnVuY3Rpb24gRm9vKCkge1xuICAgICAqICAgdGhpcy5hID0gMTtcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBfLmlzUGxhaW5PYmplY3QobmV3IEZvbyk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKlxuICAgICAqIF8uaXNQbGFpbk9iamVjdChbMSwgMiwgM10pO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICpcbiAgICAgKiBfLmlzUGxhaW5PYmplY3QoeyAneCc6IDAsICd5JzogMCB9KTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzUGxhaW5PYmplY3QoT2JqZWN0LmNyZWF0ZShudWxsKSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzUGxhaW5PYmplY3QodmFsdWUpIHtcbiAgICAgIHZhciBDdG9yO1xuXG4gICAgICAvLyBFeGl0IGVhcmx5IGZvciBub24gYE9iamVjdGAgb2JqZWN0cy5cbiAgICAgIGlmICghKGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgb2JqVG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gb2JqZWN0VGFnICYmICFpc0FyZ3VtZW50cyh2YWx1ZSkpIHx8XG4gICAgICAgICAgKCFoYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbHVlLCAnY29uc3RydWN0b3InKSAmJiAoQ3RvciA9IHZhbHVlLmNvbnN0cnVjdG9yLCB0eXBlb2YgQ3RvciA9PSAnZnVuY3Rpb24nICYmICEoQ3RvciBpbnN0YW5jZW9mIEN0b3IpKSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgLy8gSUUgPCA5IGl0ZXJhdGVzIGluaGVyaXRlZCBwcm9wZXJ0aWVzIGJlZm9yZSBvd24gcHJvcGVydGllcy4gSWYgdGhlIGZpcnN0XG4gICAgICAvLyBpdGVyYXRlZCBwcm9wZXJ0eSBpcyBhbiBvYmplY3QncyBvd24gcHJvcGVydHkgdGhlbiB0aGVyZSBhcmUgbm8gaW5oZXJpdGVkXG4gICAgICAvLyBlbnVtZXJhYmxlIHByb3BlcnRpZXMuXG4gICAgICB2YXIgcmVzdWx0O1xuICAgICAgLy8gSW4gbW9zdCBlbnZpcm9ubWVudHMgYW4gb2JqZWN0J3Mgb3duIHByb3BlcnRpZXMgYXJlIGl0ZXJhdGVkIGJlZm9yZVxuICAgICAgLy8gaXRzIGluaGVyaXRlZCBwcm9wZXJ0aWVzLiBJZiB0aGUgbGFzdCBpdGVyYXRlZCBwcm9wZXJ0eSBpcyBhbiBvYmplY3Qnc1xuICAgICAgLy8gb3duIHByb3BlcnR5IHRoZW4gdGhlcmUgYXJlIG5vIGluaGVyaXRlZCBlbnVtZXJhYmxlIHByb3BlcnRpZXMuXG4gICAgICBiYXNlRm9ySW4odmFsdWUsIGZ1bmN0aW9uKHN1YlZhbHVlLCBrZXkpIHtcbiAgICAgICAgcmVzdWx0ID0ga2V5O1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVzdWx0ID09PSB1bmRlZmluZWQgfHwgaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwgcmVzdWx0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYFJlZ0V4cGAgb2JqZWN0LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IExhbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBjb3JyZWN0bHkgY2xhc3NpZmllZCwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmlzUmVnRXhwKC9hYmMvKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzUmVnRXhwKCcvYWJjLycpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNSZWdFeHAodmFsdWUpIHtcbiAgICAgIHJldHVybiBpc09iamVjdCh2YWx1ZSkgJiYgb2JqVG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gcmVnZXhwVGFnO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgU3RyaW5nYCBwcmltaXRpdmUgb3Igb2JqZWN0LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IExhbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBjb3JyZWN0bHkgY2xhc3NpZmllZCwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmlzU3RyaW5nKCdhYmMnKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzU3RyaW5nKDEpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNTdHJpbmcodmFsdWUpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ3N0cmluZycgfHwgKGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgb2JqVG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gc3RyaW5nVGFnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgdHlwZWQgYXJyYXkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGNvcnJlY3RseSBjbGFzc2lmaWVkLCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaXNUeXBlZEFycmF5KG5ldyBVaW50OEFycmF5KTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzVHlwZWRBcnJheShbXSk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc1R5cGVkQXJyYXkodmFsdWUpIHtcbiAgICAgIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmIGlzTGVuZ3RoKHZhbHVlLmxlbmd0aCkgJiYgISF0eXBlZEFycmF5VGFnc1tvYmpUb1N0cmluZy5jYWxsKHZhbHVlKV07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYHVuZGVmaW5lZGAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGB1bmRlZmluZWRgLCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaXNVbmRlZmluZWQodm9pZCAwKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzVW5kZWZpbmVkKG51bGwpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNVbmRlZmluZWQodmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZSA9PT0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGxlc3MgdGhhbiBgb3RoZXJgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IExhbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb21wYXJlLlxuICAgICAqIEBwYXJhbSB7Kn0gb3RoZXIgVGhlIG90aGVyIHZhbHVlIHRvIGNvbXBhcmUuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgbGVzcyB0aGFuIGBvdGhlcmAsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5sdCgxLCAzKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmx0KDMsIDMpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICpcbiAgICAgKiBfLmx0KDMsIDEpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gbHQodmFsdWUsIG90aGVyKSB7XG4gICAgICByZXR1cm4gdmFsdWUgPCBvdGhlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gYG90aGVyYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29tcGFyZS5cbiAgICAgKiBAcGFyYW0geyp9IG90aGVyIFRoZSBvdGhlciB2YWx1ZSB0byBjb21wYXJlLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGxlc3MgdGhhbiBvciBlcXVhbCB0byBgb3RoZXJgLCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ubHRlKDEsIDMpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8ubHRlKDMsIDMpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8ubHRlKDMsIDEpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gbHRlKHZhbHVlLCBvdGhlcikge1xuICAgICAgcmV0dXJuIHZhbHVlIDw9IG90aGVyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYW4gYXJyYXkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbnZlcnQuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBjb252ZXJ0ZWQgYXJyYXkuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIChmdW5jdGlvbigpIHtcbiAgICAgKiAgIHJldHVybiBfLnRvQXJyYXkoYXJndW1lbnRzKS5zbGljZSgxKTtcbiAgICAgKiB9KDEsIDIsIDMpKTtcbiAgICAgKiAvLyA9PiBbMiwgM11cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB0b0FycmF5KHZhbHVlKSB7XG4gICAgICB2YXIgbGVuZ3RoID0gdmFsdWUgPyBnZXRMZW5ndGgodmFsdWUpIDogMDtcbiAgICAgIGlmICghaXNMZW5ndGgobGVuZ3RoKSkge1xuICAgICAgICByZXR1cm4gdmFsdWVzKHZhbHVlKTtcbiAgICAgIH1cbiAgICAgIGlmICghbGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhcnJheUNvcHkodmFsdWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBwbGFpbiBvYmplY3QgZmxhdHRlbmluZyBpbmhlcml0ZWQgZW51bWVyYWJsZVxuICAgICAqIHByb3BlcnRpZXMgb2YgYHZhbHVlYCB0byBvd24gcHJvcGVydGllcyBvZiB0aGUgcGxhaW4gb2JqZWN0LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IExhbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb252ZXJ0LlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGNvbnZlcnRlZCBwbGFpbiBvYmplY3QuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGZ1bmN0aW9uIEZvbygpIHtcbiAgICAgKiAgIHRoaXMuYiA9IDI7XG4gICAgICogfVxuICAgICAqXG4gICAgICogRm9vLnByb3RvdHlwZS5jID0gMztcbiAgICAgKlxuICAgICAqIF8uYXNzaWduKHsgJ2EnOiAxIH0sIG5ldyBGb28pO1xuICAgICAqIC8vID0+IHsgJ2EnOiAxLCAnYic6IDIgfVxuICAgICAqXG4gICAgICogXy5hc3NpZ24oeyAnYSc6IDEgfSwgXy50b1BsYWluT2JqZWN0KG5ldyBGb28pKTtcbiAgICAgKiAvLyA9PiB7ICdhJzogMSwgJ2InOiAyLCAnYyc6IDMgfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHRvUGxhaW5PYmplY3QodmFsdWUpIHtcbiAgICAgIHJldHVybiBiYXNlQ29weSh2YWx1ZSwga2V5c0luKHZhbHVlKSk7XG4gICAgfVxuXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgLyoqXG4gICAgICogUmVjdXJzaXZlbHkgbWVyZ2VzIG93biBlbnVtZXJhYmxlIHByb3BlcnRpZXMgb2YgdGhlIHNvdXJjZSBvYmplY3QocyksIHRoYXRcbiAgICAgKiBkb24ndCByZXNvbHZlIHRvIGB1bmRlZmluZWRgIGludG8gdGhlIGRlc3RpbmF0aW9uIG9iamVjdC4gU3Vic2VxdWVudCBzb3VyY2VzXG4gICAgICogb3ZlcndyaXRlIHByb3BlcnR5IGFzc2lnbm1lbnRzIG9mIHByZXZpb3VzIHNvdXJjZXMuIElmIGBjdXN0b21pemVyYCBpc1xuICAgICAqIHByb3ZpZGVkIGl0IGlzIGludm9rZWQgdG8gcHJvZHVjZSB0aGUgbWVyZ2VkIHZhbHVlcyBvZiB0aGUgZGVzdGluYXRpb24gYW5kXG4gICAgICogc291cmNlIHByb3BlcnRpZXMuIElmIGBjdXN0b21pemVyYCByZXR1cm5zIGB1bmRlZmluZWRgIG1lcmdpbmcgaXMgaGFuZGxlZFxuICAgICAqIGJ5IHRoZSBtZXRob2QgaW5zdGVhZC4gVGhlIGBjdXN0b21pemVyYCBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWRcbiAgICAgKiB3aXRoIGZpdmUgYXJndW1lbnRzOiAob2JqZWN0VmFsdWUsIHNvdXJjZVZhbHVlLCBrZXksIG9iamVjdCwgc291cmNlKS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gICAgICogQHBhcmFtIHsuLi5PYmplY3R9IFtzb3VyY2VzXSBUaGUgc291cmNlIG9iamVjdHMuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgYXNzaWduZWQgdmFsdWVzLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY3VzdG9taXplcmAuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIHVzZXJzID0ge1xuICAgICAqICAgJ2RhdGEnOiBbeyAndXNlcic6ICdiYXJuZXknIH0sIHsgJ3VzZXInOiAnZnJlZCcgfV1cbiAgICAgKiB9O1xuICAgICAqXG4gICAgICogdmFyIGFnZXMgPSB7XG4gICAgICogICAnZGF0YSc6IFt7ICdhZ2UnOiAzNiB9LCB7ICdhZ2UnOiA0MCB9XVxuICAgICAqIH07XG4gICAgICpcbiAgICAgKiBfLm1lcmdlKHVzZXJzLCBhZ2VzKTtcbiAgICAgKiAvLyA9PiB7ICdkYXRhJzogW3sgJ3VzZXInOiAnYmFybmV5JywgJ2FnZSc6IDM2IH0sIHsgJ3VzZXInOiAnZnJlZCcsICdhZ2UnOiA0MCB9XSB9XG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBhIGN1c3RvbWl6ZXIgY2FsbGJhY2tcbiAgICAgKiB2YXIgb2JqZWN0ID0ge1xuICAgICAqICAgJ2ZydWl0cyc6IFsnYXBwbGUnXSxcbiAgICAgKiAgICd2ZWdldGFibGVzJzogWydiZWV0J11cbiAgICAgKiB9O1xuICAgICAqXG4gICAgICogdmFyIG90aGVyID0ge1xuICAgICAqICAgJ2ZydWl0cyc6IFsnYmFuYW5hJ10sXG4gICAgICogICAndmVnZXRhYmxlcyc6IFsnY2Fycm90J11cbiAgICAgKiB9O1xuICAgICAqXG4gICAgICogXy5tZXJnZShvYmplY3QsIG90aGVyLCBmdW5jdGlvbihhLCBiKSB7XG4gICAgICogICBpZiAoXy5pc0FycmF5KGEpKSB7XG4gICAgICogICAgIHJldHVybiBhLmNvbmNhdChiKTtcbiAgICAgKiAgIH1cbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiB7ICdmcnVpdHMnOiBbJ2FwcGxlJywgJ2JhbmFuYSddLCAndmVnZXRhYmxlcyc6IFsnYmVldCcsICdjYXJyb3QnXSB9XG4gICAgICovXG4gICAgdmFyIG1lcmdlID0gY3JlYXRlQXNzaWduZXIoYmFzZU1lcmdlKTtcblxuICAgIC8qKlxuICAgICAqIEFzc2lnbnMgb3duIGVudW1lcmFibGUgcHJvcGVydGllcyBvZiBzb3VyY2Ugb2JqZWN0KHMpIHRvIHRoZSBkZXN0aW5hdGlvblxuICAgICAqIG9iamVjdC4gU3Vic2VxdWVudCBzb3VyY2VzIG92ZXJ3cml0ZSBwcm9wZXJ0eSBhc3NpZ25tZW50cyBvZiBwcmV2aW91cyBzb3VyY2VzLlxuICAgICAqIElmIGBjdXN0b21pemVyYCBpcyBwcm92aWRlZCBpdCBpcyBpbnZva2VkIHRvIHByb2R1Y2UgdGhlIGFzc2lnbmVkIHZhbHVlcy5cbiAgICAgKiBUaGUgYGN1c3RvbWl6ZXJgIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIGZpdmUgYXJndW1lbnRzOlxuICAgICAqIChvYmplY3RWYWx1ZSwgc291cmNlVmFsdWUsIGtleSwgb2JqZWN0LCBzb3VyY2UpLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoaXMgbWV0aG9kIG11dGF0ZXMgYG9iamVjdGAgYW5kIGlzIGJhc2VkIG9uXG4gICAgICogW2BPYmplY3QuYXNzaWduYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtb2JqZWN0LmFzc2lnbikuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAYWxpYXMgZXh0ZW5kXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIGRlc3RpbmF0aW9uIG9iamVjdC5cbiAgICAgKiBAcGFyYW0gey4uLk9iamVjdH0gW3NvdXJjZXNdIFRoZSBzb3VyY2Ugb2JqZWN0cy5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY3VzdG9taXplcl0gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBhc3NpZ25lZCB2YWx1ZXMuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjdXN0b21pemVyYC5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmFzc2lnbih7ICd1c2VyJzogJ2Jhcm5leScgfSwgeyAnYWdlJzogNDAgfSwgeyAndXNlcic6ICdmcmVkJyB9KTtcbiAgICAgKiAvLyA9PiB7ICd1c2VyJzogJ2ZyZWQnLCAnYWdlJzogNDAgfVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgYSBjdXN0b21pemVyIGNhbGxiYWNrXG4gICAgICogdmFyIGRlZmF1bHRzID0gXy5wYXJ0aWFsUmlnaHQoXy5hc3NpZ24sIGZ1bmN0aW9uKHZhbHVlLCBvdGhlcikge1xuICAgICAqICAgcmV0dXJuIF8uaXNVbmRlZmluZWQodmFsdWUpID8gb3RoZXIgOiB2YWx1ZTtcbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIGRlZmF1bHRzKHsgJ3VzZXInOiAnYmFybmV5JyB9LCB7ICdhZ2UnOiAzNiB9LCB7ICd1c2VyJzogJ2ZyZWQnIH0pO1xuICAgICAqIC8vID0+IHsgJ3VzZXInOiAnYmFybmV5JywgJ2FnZSc6IDM2IH1cbiAgICAgKi9cbiAgICB2YXIgYXNzaWduID0gY3JlYXRlQXNzaWduZXIoZnVuY3Rpb24ob2JqZWN0LCBzb3VyY2UsIGN1c3RvbWl6ZXIpIHtcbiAgICAgIHJldHVybiBjdXN0b21pemVyXG4gICAgICAgID8gYXNzaWduV2l0aChvYmplY3QsIHNvdXJjZSwgY3VzdG9taXplcilcbiAgICAgICAgOiBiYXNlQXNzaWduKG9iamVjdCwgc291cmNlKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gb2JqZWN0IHRoYXQgaW5oZXJpdHMgZnJvbSB0aGUgZ2l2ZW4gYHByb3RvdHlwZWAgb2JqZWN0LiBJZiBhXG4gICAgICogYHByb3BlcnRpZXNgIG9iamVjdCBpcyBwcm92aWRlZCBpdHMgb3duIGVudW1lcmFibGUgcHJvcGVydGllcyBhcmUgYXNzaWduZWRcbiAgICAgKiB0byB0aGUgY3JlYXRlZCBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IHByb3RvdHlwZSBUaGUgb2JqZWN0IHRvIGluaGVyaXQgZnJvbS5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW3Byb3BlcnRpZXNdIFRoZSBwcm9wZXJ0aWVzIHRvIGFzc2lnbiB0byB0aGUgb2JqZWN0LlxuICAgICAqIEBwYXJhbS0ge09iamVjdH0gW2d1YXJkXSBFbmFibGVzIHVzZSBhcyBhIGNhbGxiYWNrIGZvciBmdW5jdGlvbnMgbGlrZSBgXy5tYXBgLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG5ldyBvYmplY3QuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGZ1bmN0aW9uIFNoYXBlKCkge1xuICAgICAqICAgdGhpcy54ID0gMDtcbiAgICAgKiAgIHRoaXMueSA9IDA7XG4gICAgICogfVxuICAgICAqXG4gICAgICogZnVuY3Rpb24gQ2lyY2xlKCkge1xuICAgICAqICAgU2hhcGUuY2FsbCh0aGlzKTtcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBDaXJjbGUucHJvdG90eXBlID0gXy5jcmVhdGUoU2hhcGUucHJvdG90eXBlLCB7XG4gICAgICogICAnY29uc3RydWN0b3InOiBDaXJjbGVcbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIHZhciBjaXJjbGUgPSBuZXcgQ2lyY2xlO1xuICAgICAqIGNpcmNsZSBpbnN0YW5jZW9mIENpcmNsZTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBjaXJjbGUgaW5zdGFuY2VvZiBTaGFwZTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlKHByb3RvdHlwZSwgcHJvcGVydGllcywgZ3VhcmQpIHtcbiAgICAgIHZhciByZXN1bHQgPSBiYXNlQ3JlYXRlKHByb3RvdHlwZSk7XG4gICAgICBpZiAoZ3VhcmQgJiYgaXNJdGVyYXRlZUNhbGwocHJvdG90eXBlLCBwcm9wZXJ0aWVzLCBndWFyZCkpIHtcbiAgICAgICAgcHJvcGVydGllcyA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwcm9wZXJ0aWVzID8gYmFzZUFzc2lnbihyZXN1bHQsIHByb3BlcnRpZXMpIDogcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFzc2lnbnMgb3duIGVudW1lcmFibGUgcHJvcGVydGllcyBvZiBzb3VyY2Ugb2JqZWN0KHMpIHRvIHRoZSBkZXN0aW5hdGlvblxuICAgICAqIG9iamVjdCBmb3IgYWxsIGRlc3RpbmF0aW9uIHByb3BlcnRpZXMgdGhhdCByZXNvbHZlIHRvIGB1bmRlZmluZWRgLiBPbmNlIGFcbiAgICAgKiBwcm9wZXJ0eSBpcyBzZXQsIGFkZGl0aW9uYWwgdmFsdWVzIG9mIHRoZSBzYW1lIHByb3BlcnR5IGFyZSBpZ25vcmVkLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoaXMgbWV0aG9kIG11dGF0ZXMgYG9iamVjdGAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgZGVzdGluYXRpb24gb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7Li4uT2JqZWN0fSBbc291cmNlc10gVGhlIHNvdXJjZSBvYmplY3RzLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uZGVmYXVsdHMoeyAndXNlcic6ICdiYXJuZXknIH0sIHsgJ2FnZSc6IDM2IH0sIHsgJ3VzZXInOiAnZnJlZCcgfSk7XG4gICAgICogLy8gPT4geyAndXNlcic6ICdiYXJuZXknLCAnYWdlJzogMzYgfVxuICAgICAqL1xuICAgIHZhciBkZWZhdWx0cyA9IGNyZWF0ZURlZmF1bHRzKGFzc2lnbiwgYXNzaWduRGVmYXVsdHMpO1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5kZWZhdWx0c2AgZXhjZXB0IHRoYXQgaXQgcmVjdXJzaXZlbHkgYXNzaWduc1xuICAgICAqIGRlZmF1bHQgcHJvcGVydGllcy5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBtdXRhdGVzIGBvYmplY3RgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIGRlc3RpbmF0aW9uIG9iamVjdC5cbiAgICAgKiBAcGFyYW0gey4uLk9iamVjdH0gW3NvdXJjZXNdIFRoZSBzb3VyY2Ugb2JqZWN0cy5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmRlZmF1bHRzRGVlcCh7ICd1c2VyJzogeyAnbmFtZSc6ICdiYXJuZXknIH0gfSwgeyAndXNlcic6IHsgJ25hbWUnOiAnZnJlZCcsICdhZ2UnOiAzNiB9IH0pO1xuICAgICAqIC8vID0+IHsgJ3VzZXInOiB7ICduYW1lJzogJ2Jhcm5leScsICdhZ2UnOiAzNiB9IH1cbiAgICAgKlxuICAgICAqL1xuICAgIHZhciBkZWZhdWx0c0RlZXAgPSBjcmVhdGVEZWZhdWx0cyhtZXJnZSwgbWVyZ2VEZWZhdWx0cyk7XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmZpbmRgIGV4Y2VwdCB0aGF0IGl0IHJldHVybnMgdGhlIGtleSBvZiB0aGUgZmlyc3RcbiAgICAgKiBlbGVtZW50IGBwcmVkaWNhdGVgIHJldHVybnMgdHJ1dGh5IGZvciBpbnN0ZWFkIG9mIHRoZSBlbGVtZW50IGl0c2VsZi5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYHByZWRpY2F0ZWAgdGhlIGNyZWF0ZWQgYF8ucHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhIHZhbHVlIGlzIGFsc28gcHJvdmlkZWQgZm9yIGB0aGlzQXJnYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzUHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSBhIG1hdGNoaW5nIHByb3BlcnR5XG4gICAgICogdmFsdWUsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYHByZWRpY2F0ZWAgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc2Agc3R5bGVcbiAgICAgKiBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlblxuICAgICAqIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBzZWFyY2guXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbcHJlZGljYXRlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkXG4gICAgICogIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBwcmVkaWNhdGVgLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd8dW5kZWZpbmVkfSBSZXR1cm5zIHRoZSBrZXkgb2YgdGhlIG1hdGNoZWQgZWxlbWVudCwgZWxzZSBgdW5kZWZpbmVkYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIHVzZXJzID0ge1xuICAgICAqICAgJ2Jhcm5leSc6ICB7ICdhZ2UnOiAzNiwgJ2FjdGl2ZSc6IHRydWUgfSxcbiAgICAgKiAgICdmcmVkJzogICAgeyAnYWdlJzogNDAsICdhY3RpdmUnOiBmYWxzZSB9LFxuICAgICAqICAgJ3BlYmJsZXMnOiB7ICdhZ2UnOiAxLCAgJ2FjdGl2ZSc6IHRydWUgfVxuICAgICAqIH07XG4gICAgICpcbiAgICAgKiBfLmZpbmRLZXkodXNlcnMsIGZ1bmN0aW9uKGNocikge1xuICAgICAqICAgcmV0dXJuIGNoci5hZ2UgPCA0MDtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiAnYmFybmV5JyAoaXRlcmF0aW9uIG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkKVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLm1hdGNoZXNgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8uZmluZEtleSh1c2VycywgeyAnYWdlJzogMSwgJ2FjdGl2ZSc6IHRydWUgfSk7XG4gICAgICogLy8gPT4gJ3BlYmJsZXMnXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ubWF0Y2hlc1Byb3BlcnR5YCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLmZpbmRLZXkodXNlcnMsICdhY3RpdmUnLCBmYWxzZSk7XG4gICAgICogLy8gPT4gJ2ZyZWQnXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ucHJvcGVydHlgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8uZmluZEtleSh1c2VycywgJ2FjdGl2ZScpO1xuICAgICAqIC8vID0+ICdiYXJuZXknXG4gICAgICovXG4gICAgdmFyIGZpbmRLZXkgPSBjcmVhdGVGaW5kS2V5KGJhc2VGb3JPd24pO1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5maW5kS2V5YCBleGNlcHQgdGhhdCBpdCBpdGVyYXRlcyBvdmVyIGVsZW1lbnRzIG9mXG4gICAgICogYSBjb2xsZWN0aW9uIGluIHRoZSBvcHBvc2l0ZSBvcmRlci5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYHByZWRpY2F0ZWAgdGhlIGNyZWF0ZWQgYF8ucHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhIHZhbHVlIGlzIGFsc28gcHJvdmlkZWQgZm9yIGB0aGlzQXJnYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzUHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSBhIG1hdGNoaW5nIHByb3BlcnR5XG4gICAgICogdmFsdWUsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYHByZWRpY2F0ZWAgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc2Agc3R5bGVcbiAgICAgKiBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlblxuICAgICAqIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBzZWFyY2guXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbcHJlZGljYXRlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkXG4gICAgICogIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBwcmVkaWNhdGVgLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd8dW5kZWZpbmVkfSBSZXR1cm5zIHRoZSBrZXkgb2YgdGhlIG1hdGNoZWQgZWxlbWVudCwgZWxzZSBgdW5kZWZpbmVkYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIHVzZXJzID0ge1xuICAgICAqICAgJ2Jhcm5leSc6ICB7ICdhZ2UnOiAzNiwgJ2FjdGl2ZSc6IHRydWUgfSxcbiAgICAgKiAgICdmcmVkJzogICAgeyAnYWdlJzogNDAsICdhY3RpdmUnOiBmYWxzZSB9LFxuICAgICAqICAgJ3BlYmJsZXMnOiB7ICdhZ2UnOiAxLCAgJ2FjdGl2ZSc6IHRydWUgfVxuICAgICAqIH07XG4gICAgICpcbiAgICAgKiBfLmZpbmRMYXN0S2V5KHVzZXJzLCBmdW5jdGlvbihjaHIpIHtcbiAgICAgKiAgIHJldHVybiBjaHIuYWdlIDwgNDA7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gcmV0dXJucyBgcGViYmxlc2AgYXNzdW1pbmcgYF8uZmluZEtleWAgcmV0dXJucyBgYmFybmV5YFxuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLm1hdGNoZXNgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8uZmluZExhc3RLZXkodXNlcnMsIHsgJ2FnZSc6IDM2LCAnYWN0aXZlJzogdHJ1ZSB9KTtcbiAgICAgKiAvLyA9PiAnYmFybmV5J1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLm1hdGNoZXNQcm9wZXJ0eWAgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5maW5kTGFzdEtleSh1c2VycywgJ2FjdGl2ZScsIGZhbHNlKTtcbiAgICAgKiAvLyA9PiAnZnJlZCdcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5wcm9wZXJ0eWAgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5maW5kTGFzdEtleSh1c2VycywgJ2FjdGl2ZScpO1xuICAgICAqIC8vID0+ICdwZWJibGVzJ1xuICAgICAqL1xuICAgIHZhciBmaW5kTGFzdEtleSA9IGNyZWF0ZUZpbmRLZXkoYmFzZUZvck93blJpZ2h0KTtcblxuICAgIC8qKlxuICAgICAqIEl0ZXJhdGVzIG92ZXIgb3duIGFuZCBpbmhlcml0ZWQgZW51bWVyYWJsZSBwcm9wZXJ0aWVzIG9mIGFuIG9iamVjdCBpbnZva2luZ1xuICAgICAqIGBpdGVyYXRlZWAgZm9yIGVhY2ggcHJvcGVydHkuIFRoZSBgaXRlcmF0ZWVgIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZFxuICAgICAqIHdpdGggdGhyZWUgYXJndW1lbnRzOiAodmFsdWUsIGtleSwgb2JqZWN0KS4gSXRlcmF0ZWUgZnVuY3Rpb25zIG1heSBleGl0XG4gICAgICogaXRlcmF0aW9uIGVhcmx5IGJ5IGV4cGxpY2l0bHkgcmV0dXJuaW5nIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbaXRlcmF0ZWU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGl0ZXJhdGVlYC5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBmdW5jdGlvbiBGb28oKSB7XG4gICAgICogICB0aGlzLmEgPSAxO1xuICAgICAqICAgdGhpcy5iID0gMjtcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBGb28ucHJvdG90eXBlLmMgPSAzO1xuICAgICAqXG4gICAgICogXy5mb3JJbihuZXcgRm9vLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICogICBjb25zb2xlLmxvZyhrZXkpO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IGxvZ3MgJ2EnLCAnYicsIGFuZCAnYycgKGl0ZXJhdGlvbiBvcmRlciBpcyBub3QgZ3VhcmFudGVlZClcbiAgICAgKi9cbiAgICB2YXIgZm9ySW4gPSBjcmVhdGVGb3JJbihiYXNlRm9yKTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uZm9ySW5gIGV4Y2VwdCB0aGF0IGl0IGl0ZXJhdGVzIG92ZXIgcHJvcGVydGllcyBvZlxuICAgICAqIGBvYmplY3RgIGluIHRoZSBvcHBvc2l0ZSBvcmRlci5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtpdGVyYXRlZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgaXRlcmF0ZWVgLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGZ1bmN0aW9uIEZvbygpIHtcbiAgICAgKiAgIHRoaXMuYSA9IDE7XG4gICAgICogICB0aGlzLmIgPSAyO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIEZvby5wcm90b3R5cGUuYyA9IDM7XG4gICAgICpcbiAgICAgKiBfLmZvckluUmlnaHQobmV3IEZvbywgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAqICAgY29uc29sZS5sb2coa2V5KTtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiBsb2dzICdjJywgJ2InLCBhbmQgJ2EnIGFzc3VtaW5nIGBfLmZvckluIGAgbG9ncyAnYScsICdiJywgYW5kICdjJ1xuICAgICAqL1xuICAgIHZhciBmb3JJblJpZ2h0ID0gY3JlYXRlRm9ySW4oYmFzZUZvclJpZ2h0KTtcblxuICAgIC8qKlxuICAgICAqIEl0ZXJhdGVzIG92ZXIgb3duIGVudW1lcmFibGUgcHJvcGVydGllcyBvZiBhbiBvYmplY3QgaW52b2tpbmcgYGl0ZXJhdGVlYFxuICAgICAqIGZvciBlYWNoIHByb3BlcnR5LiBUaGUgYGl0ZXJhdGVlYCBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aFxuICAgICAqIHRocmVlIGFyZ3VtZW50czogKHZhbHVlLCBrZXksIG9iamVjdCkuIEl0ZXJhdGVlIGZ1bmN0aW9ucyBtYXkgZXhpdCBpdGVyYXRpb25cbiAgICAgKiBlYXJseSBieSBleHBsaWNpdGx5IHJldHVybmluZyBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2l0ZXJhdGVlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBpdGVyYXRlZWAuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogZnVuY3Rpb24gRm9vKCkge1xuICAgICAqICAgdGhpcy5hID0gMTtcbiAgICAgKiAgIHRoaXMuYiA9IDI7XG4gICAgICogfVxuICAgICAqXG4gICAgICogRm9vLnByb3RvdHlwZS5jID0gMztcbiAgICAgKlxuICAgICAqIF8uZm9yT3duKG5ldyBGb28sIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgKiAgIGNvbnNvbGUubG9nKGtleSk7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gbG9ncyAnYScgYW5kICdiJyAoaXRlcmF0aW9uIG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkKVxuICAgICAqL1xuICAgIHZhciBmb3JPd24gPSBjcmVhdGVGb3JPd24oYmFzZUZvck93bik7XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmZvck93bmAgZXhjZXB0IHRoYXQgaXQgaXRlcmF0ZXMgb3ZlciBwcm9wZXJ0aWVzIG9mXG4gICAgICogYG9iamVjdGAgaW4gdGhlIG9wcG9zaXRlIG9yZGVyLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2l0ZXJhdGVlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBpdGVyYXRlZWAuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogZnVuY3Rpb24gRm9vKCkge1xuICAgICAqICAgdGhpcy5hID0gMTtcbiAgICAgKiAgIHRoaXMuYiA9IDI7XG4gICAgICogfVxuICAgICAqXG4gICAgICogRm9vLnByb3RvdHlwZS5jID0gMztcbiAgICAgKlxuICAgICAqIF8uZm9yT3duUmlnaHQobmV3IEZvbywgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAqICAgY29uc29sZS5sb2coa2V5KTtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiBsb2dzICdiJyBhbmQgJ2EnIGFzc3VtaW5nIGBfLmZvck93bmAgbG9ncyAnYScgYW5kICdiJ1xuICAgICAqL1xuICAgIHZhciBmb3JPd25SaWdodCA9IGNyZWF0ZUZvck93bihiYXNlRm9yT3duUmlnaHQpO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhcnJheSBvZiBmdW5jdGlvbiBwcm9wZXJ0eSBuYW1lcyBmcm9tIGFsbCBlbnVtZXJhYmxlIHByb3BlcnRpZXMsXG4gICAgICogb3duIGFuZCBpbmhlcml0ZWQsIG9mIGBvYmplY3RgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGFsaWFzIG1ldGhvZHNcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGluc3BlY3QuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uZnVuY3Rpb25zKF8pO1xuICAgICAqIC8vID0+IFsnYWZ0ZXInLCAnYXJ5JywgJ2Fzc2lnbicsIC4uLl1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBmdW5jdGlvbnMob2JqZWN0KSB7XG4gICAgICByZXR1cm4gYmFzZUZ1bmN0aW9ucyhvYmplY3QsIGtleXNJbihvYmplY3QpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBwcm9wZXJ0eSB2YWx1ZSBhdCBgcGF0aGAgb2YgYG9iamVjdGAuIElmIHRoZSByZXNvbHZlZCB2YWx1ZSBpc1xuICAgICAqIGB1bmRlZmluZWRgIHRoZSBgZGVmYXVsdFZhbHVlYCBpcyB1c2VkIGluIGl0cyBwbGFjZS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gICAgICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAgICAgKiBAcGFyYW0geyp9IFtkZWZhdWx0VmFsdWVdIFRoZSB2YWx1ZSByZXR1cm5lZCBpZiB0aGUgcmVzb2x2ZWQgdmFsdWUgaXMgYHVuZGVmaW5lZGAuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHJlc29sdmVkIHZhbHVlLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0ID0geyAnYSc6IFt7ICdiJzogeyAnYyc6IDMgfSB9XSB9O1xuICAgICAqXG4gICAgICogXy5nZXQob2JqZWN0LCAnYVswXS5iLmMnKTtcbiAgICAgKiAvLyA9PiAzXG4gICAgICpcbiAgICAgKiBfLmdldChvYmplY3QsIFsnYScsICcwJywgJ2InLCAnYyddKTtcbiAgICAgKiAvLyA9PiAzXG4gICAgICpcbiAgICAgKiBfLmdldChvYmplY3QsICdhLmIuYycsICdkZWZhdWx0Jyk7XG4gICAgICogLy8gPT4gJ2RlZmF1bHQnXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0KG9iamVjdCwgcGF0aCwgZGVmYXVsdFZhbHVlKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBiYXNlR2V0KG9iamVjdCwgdG9QYXRoKHBhdGgpLCBwYXRoICsgJycpO1xuICAgICAgcmV0dXJuIHJlc3VsdCA9PT0gdW5kZWZpbmVkID8gZGVmYXVsdFZhbHVlIDogcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgcGF0aGAgaXMgYSBkaXJlY3QgcHJvcGVydHkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICAgICAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBwYXRoIFRoZSBwYXRoIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgcGF0aGAgaXMgYSBkaXJlY3QgcHJvcGVydHksIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIG9iamVjdCA9IHsgJ2EnOiB7ICdiJzogeyAnYyc6IDMgfSB9IH07XG4gICAgICpcbiAgICAgKiBfLmhhcyhvYmplY3QsICdhJyk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5oYXMob2JqZWN0LCAnYS5iLmMnKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmhhcyhvYmplY3QsIFsnYScsICdiJywgJ2MnXSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGhhcyhvYmplY3QsIHBhdGgpIHtcbiAgICAgIGlmIChvYmplY3QgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICB2YXIgcmVzdWx0ID0gaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHBhdGgpO1xuICAgICAgaWYgKCFyZXN1bHQgJiYgIWlzS2V5KHBhdGgpKSB7XG4gICAgICAgIHBhdGggPSB0b1BhdGgocGF0aCk7XG4gICAgICAgIG9iamVjdCA9IHBhdGgubGVuZ3RoID09IDEgPyBvYmplY3QgOiBiYXNlR2V0KG9iamVjdCwgYmFzZVNsaWNlKHBhdGgsIDAsIC0xKSk7XG4gICAgICAgIGlmIChvYmplY3QgPT0gbnVsbCkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBwYXRoID0gbGFzdChwYXRoKTtcbiAgICAgICAgcmVzdWx0ID0gaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHBhdGgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdCB8fCAoaXNMZW5ndGgob2JqZWN0Lmxlbmd0aCkgJiYgaXNJbmRleChwYXRoLCBvYmplY3QubGVuZ3RoKSAmJlxuICAgICAgICAoaXNBcnJheShvYmplY3QpIHx8IGlzQXJndW1lbnRzKG9iamVjdCkpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIG9iamVjdCBjb21wb3NlZCBvZiB0aGUgaW52ZXJ0ZWQga2V5cyBhbmQgdmFsdWVzIG9mIGBvYmplY3RgLlxuICAgICAqIElmIGBvYmplY3RgIGNvbnRhaW5zIGR1cGxpY2F0ZSB2YWx1ZXMsIHN1YnNlcXVlbnQgdmFsdWVzIG92ZXJ3cml0ZSBwcm9wZXJ0eVxuICAgICAqIGFzc2lnbm1lbnRzIG9mIHByZXZpb3VzIHZhbHVlcyB1bmxlc3MgYG11bHRpVmFsdWVgIGlzIGB0cnVlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaW52ZXJ0LlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW211bHRpVmFsdWVdIEFsbG93IG11bHRpcGxlIHZhbHVlcyBwZXIga2V5LlxuICAgICAqIEBwYXJhbS0ge09iamVjdH0gW2d1YXJkXSBFbmFibGVzIHVzZSBhcyBhIGNhbGxiYWNrIGZvciBmdW5jdGlvbnMgbGlrZSBgXy5tYXBgLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG5ldyBpbnZlcnRlZCBvYmplY3QuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBvYmplY3QgPSB7ICdhJzogMSwgJ2InOiAyLCAnYyc6IDEgfTtcbiAgICAgKlxuICAgICAqIF8uaW52ZXJ0KG9iamVjdCk7XG4gICAgICogLy8gPT4geyAnMSc6ICdjJywgJzInOiAnYicgfVxuICAgICAqXG4gICAgICogLy8gd2l0aCBgbXVsdGlWYWx1ZWBcbiAgICAgKiBfLmludmVydChvYmplY3QsIHRydWUpO1xuICAgICAqIC8vID0+IHsgJzEnOiBbJ2EnLCAnYyddLCAnMic6IFsnYiddIH1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpbnZlcnQob2JqZWN0LCBtdWx0aVZhbHVlLCBndWFyZCkge1xuICAgICAgaWYgKGd1YXJkICYmIGlzSXRlcmF0ZWVDYWxsKG9iamVjdCwgbXVsdGlWYWx1ZSwgZ3VhcmQpKSB7XG4gICAgICAgIG11bHRpVmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBwcm9wcyA9IGtleXMob2JqZWN0KSxcbiAgICAgICAgICBsZW5ndGggPSBwcm9wcy5sZW5ndGgsXG4gICAgICAgICAgcmVzdWx0ID0ge307XG5cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHZhciBrZXkgPSBwcm9wc1tpbmRleF0sXG4gICAgICAgICAgICB2YWx1ZSA9IG9iamVjdFtrZXldO1xuXG4gICAgICAgIGlmIChtdWx0aVZhbHVlKSB7XG4gICAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwocmVzdWx0LCB2YWx1ZSkpIHtcbiAgICAgICAgICAgIHJlc3VsdFt2YWx1ZV0ucHVzaChrZXkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXN1bHRbdmFsdWVdID0gW2tleV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHJlc3VsdFt2YWx1ZV0gPSBrZXk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhcnJheSBvZiB0aGUgb3duIGVudW1lcmFibGUgcHJvcGVydHkgbmFtZXMgb2YgYG9iamVjdGAuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogTm9uLW9iamVjdCB2YWx1ZXMgYXJlIGNvZXJjZWQgdG8gb2JqZWN0cy4gU2VlIHRoZVxuICAgICAqIFtFUyBzcGVjXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1vYmplY3Qua2V5cylcbiAgICAgKiBmb3IgbW9yZSBkZXRhaWxzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBmdW5jdGlvbiBGb28oKSB7XG4gICAgICogICB0aGlzLmEgPSAxO1xuICAgICAqICAgdGhpcy5iID0gMjtcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBGb28ucHJvdG90eXBlLmMgPSAzO1xuICAgICAqXG4gICAgICogXy5rZXlzKG5ldyBGb28pO1xuICAgICAqIC8vID0+IFsnYScsICdiJ10gKGl0ZXJhdGlvbiBvcmRlciBpcyBub3QgZ3VhcmFudGVlZClcbiAgICAgKlxuICAgICAqIF8ua2V5cygnaGknKTtcbiAgICAgKiAvLyA9PiBbJzAnLCAnMSddXG4gICAgICovXG4gICAgdmFyIGtleXMgPSAhbmF0aXZlS2V5cyA/IHNoaW1LZXlzIDogZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgICB2YXIgQ3RvciA9IG9iamVjdCA9PSBudWxsID8gdW5kZWZpbmVkIDogb2JqZWN0LmNvbnN0cnVjdG9yO1xuICAgICAgaWYgKCh0eXBlb2YgQ3RvciA9PSAnZnVuY3Rpb24nICYmIEN0b3IucHJvdG90eXBlID09PSBvYmplY3QpIHx8XG4gICAgICAgICAgKHR5cGVvZiBvYmplY3QgIT0gJ2Z1bmN0aW9uJyAmJiBpc0FycmF5TGlrZShvYmplY3QpKSkge1xuICAgICAgICByZXR1cm4gc2hpbUtleXMob2JqZWN0KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBpc09iamVjdChvYmplY3QpID8gbmF0aXZlS2V5cyhvYmplY3QpIDogW107XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgdGhlIG93biBhbmQgaW5oZXJpdGVkIGVudW1lcmFibGUgcHJvcGVydHkgbmFtZXMgb2YgYG9iamVjdGAuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogTm9uLW9iamVjdCB2YWx1ZXMgYXJlIGNvZXJjZWQgdG8gb2JqZWN0cy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogZnVuY3Rpb24gRm9vKCkge1xuICAgICAqICAgdGhpcy5hID0gMTtcbiAgICAgKiAgIHRoaXMuYiA9IDI7XG4gICAgICogfVxuICAgICAqXG4gICAgICogRm9vLnByb3RvdHlwZS5jID0gMztcbiAgICAgKlxuICAgICAqIF8ua2V5c0luKG5ldyBGb28pO1xuICAgICAqIC8vID0+IFsnYScsICdiJywgJ2MnXSAoaXRlcmF0aW9uIG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkKVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGtleXNJbihvYmplY3QpIHtcbiAgICAgIGlmIChvYmplY3QgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgICBpZiAoIWlzT2JqZWN0KG9iamVjdCkpIHtcbiAgICAgICAgb2JqZWN0ID0gT2JqZWN0KG9iamVjdCk7XG4gICAgICB9XG4gICAgICB2YXIgbGVuZ3RoID0gb2JqZWN0Lmxlbmd0aDtcbiAgICAgIGxlbmd0aCA9IChsZW5ndGggJiYgaXNMZW5ndGgobGVuZ3RoKSAmJlxuICAgICAgICAoaXNBcnJheShvYmplY3QpIHx8IGlzQXJndW1lbnRzKG9iamVjdCkpICYmIGxlbmd0aCkgfHwgMDtcblxuICAgICAgdmFyIEN0b3IgPSBvYmplY3QuY29uc3RydWN0b3IsXG4gICAgICAgICAgaW5kZXggPSAtMSxcbiAgICAgICAgICBpc1Byb3RvID0gdHlwZW9mIEN0b3IgPT0gJ2Z1bmN0aW9uJyAmJiBDdG9yLnByb3RvdHlwZSA9PT0gb2JqZWN0LFxuICAgICAgICAgIHJlc3VsdCA9IEFycmF5KGxlbmd0aCksXG4gICAgICAgICAgc2tpcEluZGV4ZXMgPSBsZW5ndGggPiAwO1xuXG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICByZXN1bHRbaW5kZXhdID0gKGluZGV4ICsgJycpO1xuICAgICAgfVxuICAgICAgZm9yICh2YXIga2V5IGluIG9iamVjdCkge1xuICAgICAgICBpZiAoIShza2lwSW5kZXhlcyAmJiBpc0luZGV4KGtleSwgbGVuZ3RoKSkgJiZcbiAgICAgICAgICAgICEoa2V5ID09ICdjb25zdHJ1Y3RvcicgJiYgKGlzUHJvdG8gfHwgIWhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBrZXkpKSkpIHtcbiAgICAgICAgICByZXN1bHQucHVzaChrZXkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBvcHBvc2l0ZSBvZiBgXy5tYXBWYWx1ZXNgOyB0aGlzIG1ldGhvZCBjcmVhdGVzIGFuIG9iamVjdCB3aXRoIHRoZVxuICAgICAqIHNhbWUgdmFsdWVzIGFzIGBvYmplY3RgIGFuZCBrZXlzIGdlbmVyYXRlZCBieSBydW5uaW5nIGVhY2ggb3duIGVudW1lcmFibGVcbiAgICAgKiBwcm9wZXJ0eSBvZiBgb2JqZWN0YCB0aHJvdWdoIGBpdGVyYXRlZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtpdGVyYXRlZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZFxuICAgICAqICBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgaXRlcmF0ZWVgLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG5ldyBtYXBwZWQgb2JqZWN0LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLm1hcEtleXMoeyAnYSc6IDEsICdiJzogMiB9LCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICogICByZXR1cm4ga2V5ICsgdmFsdWU7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4geyAnYTEnOiAxLCAnYjInOiAyIH1cbiAgICAgKi9cbiAgICB2YXIgbWFwS2V5cyA9IGNyZWF0ZU9iamVjdE1hcHBlcih0cnVlKTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gb2JqZWN0IHdpdGggdGhlIHNhbWUga2V5cyBhcyBgb2JqZWN0YCBhbmQgdmFsdWVzIGdlbmVyYXRlZCBieVxuICAgICAqIHJ1bm5pbmcgZWFjaCBvd24gZW51bWVyYWJsZSBwcm9wZXJ0eSBvZiBgb2JqZWN0YCB0aHJvdWdoIGBpdGVyYXRlZWAuIFRoZVxuICAgICAqIGl0ZXJhdGVlIGZ1bmN0aW9uIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50czpcbiAgICAgKiAodmFsdWUsIGtleSwgb2JqZWN0KS5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGl0ZXJhdGVlYCB0aGUgY3JlYXRlZCBgXy5wcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGEgdmFsdWUgaXMgYWxzbyBwcm92aWRlZCBmb3IgYHRoaXNBcmdgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNQcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIGEgbWF0Y2hpbmcgcHJvcGVydHlcbiAgICAgKiB2YWx1ZSwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgaXRlcmF0ZWVgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNgIHN0eWxlXG4gICAgICogY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW5cbiAgICAgKiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2l0ZXJhdGVlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkXG4gICAgICogIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBpdGVyYXRlZWAuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbmV3IG1hcHBlZCBvYmplY3QuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ubWFwVmFsdWVzKHsgJ2EnOiAxLCAnYic6IDIgfSwgZnVuY3Rpb24obikge1xuICAgICAqICAgcmV0dXJuIG4gKiAzO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IHsgJ2EnOiAzLCAnYic6IDYgfVxuICAgICAqXG4gICAgICogdmFyIHVzZXJzID0ge1xuICAgICAqICAgJ2ZyZWQnOiAgICB7ICd1c2VyJzogJ2ZyZWQnLCAgICAnYWdlJzogNDAgfSxcbiAgICAgKiAgICdwZWJibGVzJzogeyAndXNlcic6ICdwZWJibGVzJywgJ2FnZSc6IDEgfVxuICAgICAqIH07XG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ucHJvcGVydHlgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8ubWFwVmFsdWVzKHVzZXJzLCAnYWdlJyk7XG4gICAgICogLy8gPT4geyAnZnJlZCc6IDQwLCAncGViYmxlcyc6IDEgfSAoaXRlcmF0aW9uIG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkKVxuICAgICAqL1xuICAgIHZhciBtYXBWYWx1ZXMgPSBjcmVhdGVPYmplY3RNYXBwZXIoKTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBvcHBvc2l0ZSBvZiBgXy5waWNrYDsgdGhpcyBtZXRob2QgY3JlYXRlcyBhbiBvYmplY3QgY29tcG9zZWQgb2YgdGhlXG4gICAgICogb3duIGFuZCBpbmhlcml0ZWQgZW51bWVyYWJsZSBwcm9wZXJ0aWVzIG9mIGBvYmplY3RgIHRoYXQgYXJlIG5vdCBvbWl0dGVkLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIHNvdXJjZSBvYmplY3QuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnwuLi4oc3RyaW5nfHN0cmluZ1tdKX0gW3ByZWRpY2F0ZV0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyXG4gICAgICogIGl0ZXJhdGlvbiBvciBwcm9wZXJ0eSBuYW1lcyB0byBvbWl0LCBzcGVjaWZpZWQgYXMgaW5kaXZpZHVhbCBwcm9wZXJ0eVxuICAgICAqICBuYW1lcyBvciBhcnJheXMgb2YgcHJvcGVydHkgbmFtZXMuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBwcmVkaWNhdGVgLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG5ldyBvYmplY3QuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBvYmplY3QgPSB7ICd1c2VyJzogJ2ZyZWQnLCAnYWdlJzogNDAgfTtcbiAgICAgKlxuICAgICAqIF8ub21pdChvYmplY3QsICdhZ2UnKTtcbiAgICAgKiAvLyA9PiB7ICd1c2VyJzogJ2ZyZWQnIH1cbiAgICAgKlxuICAgICAqIF8ub21pdChvYmplY3QsIF8uaXNOdW1iZXIpO1xuICAgICAqIC8vID0+IHsgJ3VzZXInOiAnZnJlZCcgfVxuICAgICAqL1xuICAgIHZhciBvbWl0ID0gcmVzdFBhcmFtKGZ1bmN0aW9uKG9iamVjdCwgcHJvcHMpIHtcbiAgICAgIGlmIChvYmplY3QgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4ge307XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHByb3BzWzBdICE9ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdmFyIHByb3BzID0gYXJyYXlNYXAoYmFzZUZsYXR0ZW4ocHJvcHMpLCBTdHJpbmcpO1xuICAgICAgICByZXR1cm4gcGlja0J5QXJyYXkob2JqZWN0LCBiYXNlRGlmZmVyZW5jZShrZXlzSW4ob2JqZWN0KSwgcHJvcHMpKTtcbiAgICAgIH1cbiAgICAgIHZhciBwcmVkaWNhdGUgPSBiaW5kQ2FsbGJhY2socHJvcHNbMF0sIHByb3BzWzFdLCAzKTtcbiAgICAgIHJldHVybiBwaWNrQnlDYWxsYmFjayhvYmplY3QsIGZ1bmN0aW9uKHZhbHVlLCBrZXksIG9iamVjdCkge1xuICAgICAgICByZXR1cm4gIXByZWRpY2F0ZSh2YWx1ZSwga2V5LCBvYmplY3QpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgdHdvIGRpbWVuc2lvbmFsIGFycmF5IG9mIHRoZSBrZXktdmFsdWUgcGFpcnMgZm9yIGBvYmplY3RgLFxuICAgICAqIGUuZy4gYFtba2V5MSwgdmFsdWUxXSwgW2tleTIsIHZhbHVlMl1dYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgYXJyYXkgb2Yga2V5LXZhbHVlIHBhaXJzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnBhaXJzKHsgJ2Jhcm5leSc6IDM2LCAnZnJlZCc6IDQwIH0pO1xuICAgICAqIC8vID0+IFtbJ2Jhcm5leScsIDM2XSwgWydmcmVkJywgNDBdXSAoaXRlcmF0aW9uIG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkKVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHBhaXJzKG9iamVjdCkge1xuICAgICAgb2JqZWN0ID0gdG9PYmplY3Qob2JqZWN0KTtcblxuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgcHJvcHMgPSBrZXlzKG9iamVjdCksXG4gICAgICAgICAgbGVuZ3RoID0gcHJvcHMubGVuZ3RoLFxuICAgICAgICAgIHJlc3VsdCA9IEFycmF5KGxlbmd0aCk7XG5cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHZhciBrZXkgPSBwcm9wc1tpbmRleF07XG4gICAgICAgIHJlc3VsdFtpbmRleF0gPSBba2V5LCBvYmplY3Rba2V5XV07XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gb2JqZWN0IGNvbXBvc2VkIG9mIHRoZSBwaWNrZWQgYG9iamVjdGAgcHJvcGVydGllcy4gUHJvcGVydHlcbiAgICAgKiBuYW1lcyBtYXkgYmUgc3BlY2lmaWVkIGFzIGluZGl2aWR1YWwgYXJndW1lbnRzIG9yIGFzIGFycmF5cyBvZiBwcm9wZXJ0eVxuICAgICAqIG5hbWVzLiBJZiBgcHJlZGljYXRlYCBpcyBwcm92aWRlZCBpdCBpcyBpbnZva2VkIGZvciBlYWNoIHByb3BlcnR5IG9mIGBvYmplY3RgXG4gICAgICogcGlja2luZyB0aGUgcHJvcGVydGllcyBgcHJlZGljYXRlYCByZXR1cm5zIHRydXRoeSBmb3IuIFRoZSBwcmVkaWNhdGUgaXNcbiAgICAgKiBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM6ICh2YWx1ZSwga2V5LCBvYmplY3QpLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIHNvdXJjZSBvYmplY3QuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnwuLi4oc3RyaW5nfHN0cmluZ1tdKX0gW3ByZWRpY2F0ZV0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyXG4gICAgICogIGl0ZXJhdGlvbiBvciBwcm9wZXJ0eSBuYW1lcyB0byBwaWNrLCBzcGVjaWZpZWQgYXMgaW5kaXZpZHVhbCBwcm9wZXJ0eVxuICAgICAqICBuYW1lcyBvciBhcnJheXMgb2YgcHJvcGVydHkgbmFtZXMuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBwcmVkaWNhdGVgLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG5ldyBvYmplY3QuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBvYmplY3QgPSB7ICd1c2VyJzogJ2ZyZWQnLCAnYWdlJzogNDAgfTtcbiAgICAgKlxuICAgICAqIF8ucGljayhvYmplY3QsICd1c2VyJyk7XG4gICAgICogLy8gPT4geyAndXNlcic6ICdmcmVkJyB9XG4gICAgICpcbiAgICAgKiBfLnBpY2sob2JqZWN0LCBfLmlzU3RyaW5nKTtcbiAgICAgKiAvLyA9PiB7ICd1c2VyJzogJ2ZyZWQnIH1cbiAgICAgKi9cbiAgICB2YXIgcGljayA9IHJlc3RQYXJhbShmdW5jdGlvbihvYmplY3QsIHByb3BzKSB7XG4gICAgICBpZiAob2JqZWN0ID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHR5cGVvZiBwcm9wc1swXSA9PSAnZnVuY3Rpb24nXG4gICAgICAgID8gcGlja0J5Q2FsbGJhY2sob2JqZWN0LCBiaW5kQ2FsbGJhY2socHJvcHNbMF0sIHByb3BzWzFdLCAzKSlcbiAgICAgICAgOiBwaWNrQnlBcnJheShvYmplY3QsIGJhc2VGbGF0dGVuKHByb3BzKSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmdldGAgZXhjZXB0IHRoYXQgaWYgdGhlIHJlc29sdmVkIHZhbHVlIGlzIGEgZnVuY3Rpb25cbiAgICAgKiBpdCBpcyBpbnZva2VkIHdpdGggdGhlIGB0aGlzYCBiaW5kaW5nIG9mIGl0cyBwYXJlbnQgb2JqZWN0IGFuZCBpdHMgcmVzdWx0XG4gICAgICogaXMgcmV0dXJuZWQuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICAgICAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBwYXRoIFRoZSBwYXRoIG9mIHRoZSBwcm9wZXJ0eSB0byByZXNvbHZlLlxuICAgICAqIEBwYXJhbSB7Kn0gW2RlZmF1bHRWYWx1ZV0gVGhlIHZhbHVlIHJldHVybmVkIGlmIHRoZSByZXNvbHZlZCB2YWx1ZSBpcyBgdW5kZWZpbmVkYC5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcmVzb2x2ZWQgdmFsdWUuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBvYmplY3QgPSB7ICdhJzogW3sgJ2InOiB7ICdjMSc6IDMsICdjMic6IF8uY29uc3RhbnQoNCkgfSB9XSB9O1xuICAgICAqXG4gICAgICogXy5yZXN1bHQob2JqZWN0LCAnYVswXS5iLmMxJyk7XG4gICAgICogLy8gPT4gM1xuICAgICAqXG4gICAgICogXy5yZXN1bHQob2JqZWN0LCAnYVswXS5iLmMyJyk7XG4gICAgICogLy8gPT4gNFxuICAgICAqXG4gICAgICogXy5yZXN1bHQob2JqZWN0LCAnYS5iLmMnLCAnZGVmYXVsdCcpO1xuICAgICAqIC8vID0+ICdkZWZhdWx0J1xuICAgICAqXG4gICAgICogXy5yZXN1bHQob2JqZWN0LCAnYS5iLmMnLCBfLmNvbnN0YW50KCdkZWZhdWx0JykpO1xuICAgICAqIC8vID0+ICdkZWZhdWx0J1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlc3VsdChvYmplY3QsIHBhdGgsIGRlZmF1bHRWYWx1ZSkge1xuICAgICAgdmFyIHJlc3VsdCA9IG9iamVjdCA9PSBudWxsID8gdW5kZWZpbmVkIDogb2JqZWN0W3BhdGhdO1xuICAgICAgaWYgKHJlc3VsdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChvYmplY3QgIT0gbnVsbCAmJiAhaXNLZXkocGF0aCwgb2JqZWN0KSkge1xuICAgICAgICAgIHBhdGggPSB0b1BhdGgocGF0aCk7XG4gICAgICAgICAgb2JqZWN0ID0gcGF0aC5sZW5ndGggPT0gMSA/IG9iamVjdCA6IGJhc2VHZXQob2JqZWN0LCBiYXNlU2xpY2UocGF0aCwgMCwgLTEpKTtcbiAgICAgICAgICByZXN1bHQgPSBvYmplY3QgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG9iamVjdFtsYXN0KHBhdGgpXTtcbiAgICAgICAgfVxuICAgICAgICByZXN1bHQgPSByZXN1bHQgPT09IHVuZGVmaW5lZCA/IGRlZmF1bHRWYWx1ZSA6IHJlc3VsdDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBpc0Z1bmN0aW9uKHJlc3VsdCkgPyByZXN1bHQuY2FsbChvYmplY3QpIDogcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHByb3BlcnR5IHZhbHVlIG9mIGBwYXRoYCBvbiBgb2JqZWN0YC4gSWYgYSBwb3J0aW9uIG9mIGBwYXRoYFxuICAgICAqIGRvZXMgbm90IGV4aXN0IGl0IGlzIGNyZWF0ZWQuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGF1Z21lbnQuXG4gICAgICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIHNldC5cbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIG9iamVjdCA9IHsgJ2EnOiBbeyAnYic6IHsgJ2MnOiAzIH0gfV0gfTtcbiAgICAgKlxuICAgICAqIF8uc2V0KG9iamVjdCwgJ2FbMF0uYi5jJywgNCk7XG4gICAgICogY29uc29sZS5sb2cob2JqZWN0LmFbMF0uYi5jKTtcbiAgICAgKiAvLyA9PiA0XG4gICAgICpcbiAgICAgKiBfLnNldChvYmplY3QsICd4WzBdLnkueicsIDUpO1xuICAgICAqIGNvbnNvbGUubG9nKG9iamVjdC54WzBdLnkueik7XG4gICAgICogLy8gPT4gNVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHNldChvYmplY3QsIHBhdGgsIHZhbHVlKSB7XG4gICAgICBpZiAob2JqZWN0ID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICAgIH1cbiAgICAgIHZhciBwYXRoS2V5ID0gKHBhdGggKyAnJyk7XG4gICAgICBwYXRoID0gKG9iamVjdFtwYXRoS2V5XSAhPSBudWxsIHx8IGlzS2V5KHBhdGgsIG9iamVjdCkpID8gW3BhdGhLZXldIDogdG9QYXRoKHBhdGgpO1xuXG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSBwYXRoLmxlbmd0aCxcbiAgICAgICAgICBsYXN0SW5kZXggPSBsZW5ndGggLSAxLFxuICAgICAgICAgIG5lc3RlZCA9IG9iamVjdDtcblxuICAgICAgd2hpbGUgKG5lc3RlZCAhPSBudWxsICYmICsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgdmFyIGtleSA9IHBhdGhbaW5kZXhdO1xuICAgICAgICBpZiAoaXNPYmplY3QobmVzdGVkKSkge1xuICAgICAgICAgIGlmIChpbmRleCA9PSBsYXN0SW5kZXgpIHtcbiAgICAgICAgICAgIG5lc3RlZFtrZXldID0gdmFsdWU7XG4gICAgICAgICAgfSBlbHNlIGlmIChuZXN0ZWRba2V5XSA9PSBudWxsKSB7XG4gICAgICAgICAgICBuZXN0ZWRba2V5XSA9IGlzSW5kZXgocGF0aFtpbmRleCArIDFdKSA/IFtdIDoge307XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG5lc3RlZCA9IG5lc3RlZFtrZXldO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBbiBhbHRlcm5hdGl2ZSB0byBgXy5yZWR1Y2VgOyB0aGlzIG1ldGhvZCB0cmFuc2Zvcm1zIGBvYmplY3RgIHRvIGEgbmV3XG4gICAgICogYGFjY3VtdWxhdG9yYCBvYmplY3Qgd2hpY2ggaXMgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGVhY2ggb2YgaXRzIG93biBlbnVtZXJhYmxlXG4gICAgICogcHJvcGVydGllcyB0aHJvdWdoIGBpdGVyYXRlZWAsIHdpdGggZWFjaCBpbnZvY2F0aW9uIHBvdGVudGlhbGx5IG11dGF0aW5nXG4gICAgICogdGhlIGBhY2N1bXVsYXRvcmAgb2JqZWN0LiBUaGUgYGl0ZXJhdGVlYCBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWRcbiAgICAgKiB3aXRoIGZvdXIgYXJndW1lbnRzOiAoYWNjdW11bGF0b3IsIHZhbHVlLCBrZXksIG9iamVjdCkuIEl0ZXJhdGVlIGZ1bmN0aW9uc1xuICAgICAqIG1heSBleGl0IGl0ZXJhdGlvbiBlYXJseSBieSBleHBsaWNpdGx5IHJldHVybmluZyBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2l0ZXJhdGVlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbYWNjdW11bGF0b3JdIFRoZSBjdXN0b20gYWNjdW11bGF0b3IgdmFsdWUuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBpdGVyYXRlZWAuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGFjY3VtdWxhdGVkIHZhbHVlLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnRyYW5zZm9ybShbMiwgMywgNF0sIGZ1bmN0aW9uKHJlc3VsdCwgbikge1xuICAgICAqICAgcmVzdWx0LnB1c2gobiAqPSBuKTtcbiAgICAgKiAgIHJldHVybiBuICUgMiA9PSAwO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IFs0LCA5XVxuICAgICAqXG4gICAgICogXy50cmFuc2Zvcm0oeyAnYSc6IDEsICdiJzogMiB9LCBmdW5jdGlvbihyZXN1bHQsIG4sIGtleSkge1xuICAgICAqICAgcmVzdWx0W2tleV0gPSBuICogMztcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiB7ICdhJzogMywgJ2InOiA2IH1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB0cmFuc2Zvcm0ob2JqZWN0LCBpdGVyYXRlZSwgYWNjdW11bGF0b3IsIHRoaXNBcmcpIHtcbiAgICAgIHZhciBpc0FyciA9IGlzQXJyYXkob2JqZWN0KSB8fCBpc1R5cGVkQXJyYXkob2JqZWN0KTtcbiAgICAgIGl0ZXJhdGVlID0gZ2V0Q2FsbGJhY2soaXRlcmF0ZWUsIHRoaXNBcmcsIDQpO1xuXG4gICAgICBpZiAoYWNjdW11bGF0b3IgPT0gbnVsbCkge1xuICAgICAgICBpZiAoaXNBcnIgfHwgaXNPYmplY3Qob2JqZWN0KSkge1xuICAgICAgICAgIHZhciBDdG9yID0gb2JqZWN0LmNvbnN0cnVjdG9yO1xuICAgICAgICAgIGlmIChpc0Fycikge1xuICAgICAgICAgICAgYWNjdW11bGF0b3IgPSBpc0FycmF5KG9iamVjdCkgPyBuZXcgQ3RvciA6IFtdO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhY2N1bXVsYXRvciA9IGJhc2VDcmVhdGUoaXNGdW5jdGlvbihDdG9yKSA/IEN0b3IucHJvdG90eXBlIDogdW5kZWZpbmVkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYWNjdW11bGF0b3IgPSB7fTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgKGlzQXJyID8gYXJyYXlFYWNoIDogYmFzZUZvck93bikob2JqZWN0LCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIG9iamVjdCkge1xuICAgICAgICByZXR1cm4gaXRlcmF0ZWUoYWNjdW11bGF0b3IsIHZhbHVlLCBpbmRleCwgb2JqZWN0KTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGFjY3VtdWxhdG9yO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgdGhlIG93biBlbnVtZXJhYmxlIHByb3BlcnR5IHZhbHVlcyBvZiBgb2JqZWN0YC5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBOb24tb2JqZWN0IHZhbHVlcyBhcmUgY29lcmNlZCB0byBvYmplY3RzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IHZhbHVlcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogZnVuY3Rpb24gRm9vKCkge1xuICAgICAqICAgdGhpcy5hID0gMTtcbiAgICAgKiAgIHRoaXMuYiA9IDI7XG4gICAgICogfVxuICAgICAqXG4gICAgICogRm9vLnByb3RvdHlwZS5jID0gMztcbiAgICAgKlxuICAgICAqIF8udmFsdWVzKG5ldyBGb28pO1xuICAgICAqIC8vID0+IFsxLCAyXSAoaXRlcmF0aW9uIG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkKVxuICAgICAqXG4gICAgICogXy52YWx1ZXMoJ2hpJyk7XG4gICAgICogLy8gPT4gWydoJywgJ2knXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHZhbHVlcyhvYmplY3QpIHtcbiAgICAgIHJldHVybiBiYXNlVmFsdWVzKG9iamVjdCwga2V5cyhvYmplY3QpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIHRoZSBvd24gYW5kIGluaGVyaXRlZCBlbnVtZXJhYmxlIHByb3BlcnR5IHZhbHVlc1xuICAgICAqIG9mIGBvYmplY3RgLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIE5vbi1vYmplY3QgdmFsdWVzIGFyZSBjb2VyY2VkIHRvIG9iamVjdHMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgdmFsdWVzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBmdW5jdGlvbiBGb28oKSB7XG4gICAgICogICB0aGlzLmEgPSAxO1xuICAgICAqICAgdGhpcy5iID0gMjtcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBGb28ucHJvdG90eXBlLmMgPSAzO1xuICAgICAqXG4gICAgICogXy52YWx1ZXNJbihuZXcgRm9vKTtcbiAgICAgKiAvLyA9PiBbMSwgMiwgM10gKGl0ZXJhdGlvbiBvcmRlciBpcyBub3QgZ3VhcmFudGVlZClcbiAgICAgKi9cbiAgICBmdW5jdGlvbiB2YWx1ZXNJbihvYmplY3QpIHtcbiAgICAgIHJldHVybiBiYXNlVmFsdWVzKG9iamVjdCwga2V5c0luKG9iamVjdCkpO1xuICAgIH1cblxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgbmAgaXMgYmV0d2VlbiBgc3RhcnRgIGFuZCB1cCB0byBidXQgbm90IGluY2x1ZGluZywgYGVuZGAuIElmXG4gICAgICogYGVuZGAgaXMgbm90IHNwZWNpZmllZCBpdCBpcyBzZXQgdG8gYHN0YXJ0YCB3aXRoIGBzdGFydGAgdGhlbiBzZXQgdG8gYDBgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE51bWJlclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBuIFRoZSBudW1iZXIgdG8gY2hlY2suXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtzdGFydD0wXSBUaGUgc3RhcnQgb2YgdGhlIHJhbmdlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgVGhlIGVuZCBvZiB0aGUgcmFuZ2UuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBuYCBpcyBpbiB0aGUgcmFuZ2UsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pblJhbmdlKDMsIDIsIDQpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaW5SYW5nZSg0LCA4KTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmluUmFuZ2UoNCwgMik7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKlxuICAgICAqIF8uaW5SYW5nZSgyLCAyKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqXG4gICAgICogXy5pblJhbmdlKDEuMiwgMik7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pblJhbmdlKDUuMiwgNCk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpblJhbmdlKHZhbHVlLCBzdGFydCwgZW5kKSB7XG4gICAgICBzdGFydCA9ICtzdGFydCB8fCAwO1xuICAgICAgaWYgKGVuZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGVuZCA9IHN0YXJ0O1xuICAgICAgICBzdGFydCA9IDA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbmQgPSArZW5kIHx8IDA7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWUgPj0gbmF0aXZlTWluKHN0YXJ0LCBlbmQpICYmIHZhbHVlIDwgbmF0aXZlTWF4KHN0YXJ0LCBlbmQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFByb2R1Y2VzIGEgcmFuZG9tIG51bWJlciBiZXR3ZWVuIGBtaW5gIGFuZCBgbWF4YCAoaW5jbHVzaXZlKS4gSWYgb25seSBvbmVcbiAgICAgKiBhcmd1bWVudCBpcyBwcm92aWRlZCBhIG51bWJlciBiZXR3ZWVuIGAwYCBhbmQgdGhlIGdpdmVuIG51bWJlciBpcyByZXR1cm5lZC5cbiAgICAgKiBJZiBgZmxvYXRpbmdgIGlzIGB0cnVlYCwgb3IgZWl0aGVyIGBtaW5gIG9yIGBtYXhgIGFyZSBmbG9hdHMsIGEgZmxvYXRpbmctcG9pbnRcbiAgICAgKiBudW1iZXIgaXMgcmV0dXJuZWQgaW5zdGVhZCBvZiBhbiBpbnRlZ2VyLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE51bWJlclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbWluPTBdIFRoZSBtaW5pbXVtIHBvc3NpYmxlIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbWF4PTFdIFRoZSBtYXhpbXVtIHBvc3NpYmxlIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2Zsb2F0aW5nXSBTcGVjaWZ5IHJldHVybmluZyBhIGZsb2F0aW5nLXBvaW50IG51bWJlci5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSByYW5kb20gbnVtYmVyLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnJhbmRvbSgwLCA1KTtcbiAgICAgKiAvLyA9PiBhbiBpbnRlZ2VyIGJldHdlZW4gMCBhbmQgNVxuICAgICAqXG4gICAgICogXy5yYW5kb20oNSk7XG4gICAgICogLy8gPT4gYWxzbyBhbiBpbnRlZ2VyIGJldHdlZW4gMCBhbmQgNVxuICAgICAqXG4gICAgICogXy5yYW5kb20oNSwgdHJ1ZSk7XG4gICAgICogLy8gPT4gYSBmbG9hdGluZy1wb2ludCBudW1iZXIgYmV0d2VlbiAwIGFuZCA1XG4gICAgICpcbiAgICAgKiBfLnJhbmRvbSgxLjIsIDUuMik7XG4gICAgICogLy8gPT4gYSBmbG9hdGluZy1wb2ludCBudW1iZXIgYmV0d2VlbiAxLjIgYW5kIDUuMlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJhbmRvbShtaW4sIG1heCwgZmxvYXRpbmcpIHtcbiAgICAgIGlmIChmbG9hdGluZyAmJiBpc0l0ZXJhdGVlQ2FsbChtaW4sIG1heCwgZmxvYXRpbmcpKSB7XG4gICAgICAgIG1heCA9IGZsb2F0aW5nID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgdmFyIG5vTWluID0gbWluID09IG51bGwsXG4gICAgICAgICAgbm9NYXggPSBtYXggPT0gbnVsbDtcblxuICAgICAgaWYgKGZsb2F0aW5nID09IG51bGwpIHtcbiAgICAgICAgaWYgKG5vTWF4ICYmIHR5cGVvZiBtaW4gPT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgZmxvYXRpbmcgPSBtaW47XG4gICAgICAgICAgbWluID0gMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgbWF4ID09ICdib29sZWFuJykge1xuICAgICAgICAgIGZsb2F0aW5nID0gbWF4O1xuICAgICAgICAgIG5vTWF4ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKG5vTWluICYmIG5vTWF4KSB7XG4gICAgICAgIG1heCA9IDE7XG4gICAgICAgIG5vTWF4ID0gZmFsc2U7XG4gICAgICB9XG4gICAgICBtaW4gPSArbWluIHx8IDA7XG4gICAgICBpZiAobm9NYXgpIHtcbiAgICAgICAgbWF4ID0gbWluO1xuICAgICAgICBtaW4gPSAwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbWF4ID0gK21heCB8fCAwO1xuICAgICAgfVxuICAgICAgaWYgKGZsb2F0aW5nIHx8IG1pbiAlIDEgfHwgbWF4ICUgMSkge1xuICAgICAgICB2YXIgcmFuZCA9IG5hdGl2ZVJhbmRvbSgpO1xuICAgICAgICByZXR1cm4gbmF0aXZlTWluKG1pbiArIChyYW5kICogKG1heCAtIG1pbiArIHBhcnNlRmxvYXQoJzFlLScgKyAoKHJhbmQgKyAnJykubGVuZ3RoIC0gMSkpKSksIG1heCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gYmFzZVJhbmRvbShtaW4sIG1heCk7XG4gICAgfVxuXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgLyoqXG4gICAgICogQ29udmVydHMgYHN0cmluZ2AgdG8gW2NhbWVsIGNhc2VdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0NhbWVsQ2FzZSkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgU3RyaW5nXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtzdHJpbmc9JyddIFRoZSBzdHJpbmcgdG8gY29udmVydC5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBjYW1lbCBjYXNlZCBzdHJpbmcuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uY2FtZWxDYXNlKCdGb28gQmFyJyk7XG4gICAgICogLy8gPT4gJ2Zvb0JhcidcbiAgICAgKlxuICAgICAqIF8uY2FtZWxDYXNlKCctLWZvby1iYXInKTtcbiAgICAgKiAvLyA9PiAnZm9vQmFyJ1xuICAgICAqXG4gICAgICogXy5jYW1lbENhc2UoJ19fZm9vX2Jhcl9fJyk7XG4gICAgICogLy8gPT4gJ2Zvb0JhcidcbiAgICAgKi9cbiAgICB2YXIgY2FtZWxDYXNlID0gY3JlYXRlQ29tcG91bmRlcihmdW5jdGlvbihyZXN1bHQsIHdvcmQsIGluZGV4KSB7XG4gICAgICB3b3JkID0gd29yZC50b0xvd2VyQ2FzZSgpO1xuICAgICAgcmV0dXJuIHJlc3VsdCArIChpbmRleCA/ICh3b3JkLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgd29yZC5zbGljZSgxKSkgOiB3b3JkKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENhcGl0YWxpemVzIHRoZSBmaXJzdCBjaGFyYWN0ZXIgb2YgYHN0cmluZ2AuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgU3RyaW5nXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtzdHJpbmc9JyddIFRoZSBzdHJpbmcgdG8gY2FwaXRhbGl6ZS5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBjYXBpdGFsaXplZCBzdHJpbmcuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uY2FwaXRhbGl6ZSgnZnJlZCcpO1xuICAgICAqIC8vID0+ICdGcmVkJ1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNhcGl0YWxpemUoc3RyaW5nKSB7XG4gICAgICBzdHJpbmcgPSBiYXNlVG9TdHJpbmcoc3RyaW5nKTtcbiAgICAgIHJldHVybiBzdHJpbmcgJiYgKHN0cmluZy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0cmluZy5zbGljZSgxKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVidXJycyBgc3RyaW5nYCBieSBjb252ZXJ0aW5nIFtsYXRpbi0xIHN1cHBsZW1lbnRhcnkgbGV0dGVyc10oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTGF0aW4tMV9TdXBwbGVtZW50XyhVbmljb2RlX2Jsb2NrKSNDaGFyYWN0ZXJfdGFibGUpXG4gICAgICogdG8gYmFzaWMgbGF0aW4gbGV0dGVycyBhbmQgcmVtb3ZpbmcgW2NvbWJpbmluZyBkaWFjcml0aWNhbCBtYXJrc10oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ29tYmluaW5nX0RpYWNyaXRpY2FsX01hcmtzKS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZz0nJ10gVGhlIHN0cmluZyB0byBkZWJ1cnIuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgZGVidXJyZWQgc3RyaW5nLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmRlYnVycignZMOpasOgIHZ1Jyk7XG4gICAgICogLy8gPT4gJ2RlamEgdnUnXG4gICAgICovXG4gICAgZnVuY3Rpb24gZGVidXJyKHN0cmluZykge1xuICAgICAgc3RyaW5nID0gYmFzZVRvU3RyaW5nKHN0cmluZyk7XG4gICAgICByZXR1cm4gc3RyaW5nICYmIHN0cmluZy5yZXBsYWNlKHJlTGF0aW4xLCBkZWJ1cnJMZXR0ZXIpLnJlcGxhY2UocmVDb21ib01hcmssICcnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHN0cmluZ2AgZW5kcyB3aXRoIHRoZSBnaXZlbiB0YXJnZXQgc3RyaW5nLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbc3RyaW5nPScnXSBUaGUgc3RyaW5nIHRvIHNlYXJjaC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3RhcmdldF0gVGhlIHN0cmluZyB0byBzZWFyY2ggZm9yLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbcG9zaXRpb249c3RyaW5nLmxlbmd0aF0gVGhlIHBvc2l0aW9uIHRvIHNlYXJjaCBmcm9tLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgc3RyaW5nYCBlbmRzIHdpdGggYHRhcmdldGAsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5lbmRzV2l0aCgnYWJjJywgJ2MnKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmVuZHNXaXRoKCdhYmMnLCAnYicpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICpcbiAgICAgKiBfLmVuZHNXaXRoKCdhYmMnLCAnYicsIDIpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBlbmRzV2l0aChzdHJpbmcsIHRhcmdldCwgcG9zaXRpb24pIHtcbiAgICAgIHN0cmluZyA9IGJhc2VUb1N0cmluZyhzdHJpbmcpO1xuICAgICAgdGFyZ2V0ID0gKHRhcmdldCArICcnKTtcblxuICAgICAgdmFyIGxlbmd0aCA9IHN0cmluZy5sZW5ndGg7XG4gICAgICBwb3NpdGlvbiA9IHBvc2l0aW9uID09PSB1bmRlZmluZWRcbiAgICAgICAgPyBsZW5ndGhcbiAgICAgICAgOiBuYXRpdmVNaW4ocG9zaXRpb24gPCAwID8gMCA6ICgrcG9zaXRpb24gfHwgMCksIGxlbmd0aCk7XG5cbiAgICAgIHBvc2l0aW9uIC09IHRhcmdldC5sZW5ndGg7XG4gICAgICByZXR1cm4gcG9zaXRpb24gPj0gMCAmJiBzdHJpbmcuaW5kZXhPZih0YXJnZXQsIHBvc2l0aW9uKSA9PSBwb3NpdGlvbjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyB0aGUgY2hhcmFjdGVycyBcIiZcIiwgXCI8XCIsIFwiPlwiLCAnXCInLCBcIidcIiwgYW5kIFwiXFxgXCIsIGluIGBzdHJpbmdgIHRvXG4gICAgICogdGhlaXIgY29ycmVzcG9uZGluZyBIVE1MIGVudGl0aWVzLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIE5vIG90aGVyIGNoYXJhY3RlcnMgYXJlIGVzY2FwZWQuIFRvIGVzY2FwZSBhZGRpdGlvbmFsIGNoYXJhY3RlcnNcbiAgICAgKiB1c2UgYSB0aGlyZC1wYXJ0eSBsaWJyYXJ5IGxpa2UgW19oZV9dKGh0dHBzOi8vbXRocy5iZS9oZSkuXG4gICAgICpcbiAgICAgKiBUaG91Z2ggdGhlIFwiPlwiIGNoYXJhY3RlciBpcyBlc2NhcGVkIGZvciBzeW1tZXRyeSwgY2hhcmFjdGVycyBsaWtlXG4gICAgICogXCI+XCIgYW5kIFwiL1wiIGRvbid0IG5lZWQgZXNjYXBpbmcgaW4gSFRNTCBhbmQgaGF2ZSBubyBzcGVjaWFsIG1lYW5pbmdcbiAgICAgKiB1bmxlc3MgdGhleSdyZSBwYXJ0IG9mIGEgdGFnIG9yIHVucXVvdGVkIGF0dHJpYnV0ZSB2YWx1ZS5cbiAgICAgKiBTZWUgW01hdGhpYXMgQnluZW5zJ3MgYXJ0aWNsZV0oaHR0cHM6Ly9tYXRoaWFzYnluZW5zLmJlL25vdGVzL2FtYmlndW91cy1hbXBlcnNhbmRzKVxuICAgICAqICh1bmRlciBcInNlbWktcmVsYXRlZCBmdW4gZmFjdFwiKSBmb3IgbW9yZSBkZXRhaWxzLlxuICAgICAqXG4gICAgICogQmFja3RpY2tzIGFyZSBlc2NhcGVkIGJlY2F1c2UgaW4gSW50ZXJuZXQgRXhwbG9yZXIgPCA5LCB0aGV5IGNhbiBicmVhayBvdXRcbiAgICAgKiBvZiBhdHRyaWJ1dGUgdmFsdWVzIG9yIEhUTUwgY29tbWVudHMuIFNlZSBbIzU5XShodHRwczovL2h0bWw1c2VjLm9yZy8jNTkpLFxuICAgICAqIFsjMTAyXShodHRwczovL2h0bWw1c2VjLm9yZy8jMTAyKSwgWyMxMDhdKGh0dHBzOi8vaHRtbDVzZWMub3JnLyMxMDgpLCBhbmRcbiAgICAgKiBbIzEzM10oaHR0cHM6Ly9odG1sNXNlYy5vcmcvIzEzMykgb2YgdGhlIFtIVE1MNSBTZWN1cml0eSBDaGVhdHNoZWV0XShodHRwczovL2h0bWw1c2VjLm9yZy8pXG4gICAgICogZm9yIG1vcmUgZGV0YWlscy5cbiAgICAgKlxuICAgICAqIFdoZW4gd29ya2luZyB3aXRoIEhUTUwgeW91IHNob3VsZCBhbHdheXMgW3F1b3RlIGF0dHJpYnV0ZSB2YWx1ZXNdKGh0dHA6Ly93b25rby5jb20vcG9zdC9odG1sLWVzY2FwaW5nKVxuICAgICAqIHRvIHJlZHVjZSBYU1MgdmVjdG9ycy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZz0nJ10gVGhlIHN0cmluZyB0byBlc2NhcGUuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgZXNjYXBlZCBzdHJpbmcuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uZXNjYXBlKCdmcmVkLCBiYXJuZXksICYgcGViYmxlcycpO1xuICAgICAqIC8vID0+ICdmcmVkLCBiYXJuZXksICZhbXA7IHBlYmJsZXMnXG4gICAgICovXG4gICAgZnVuY3Rpb24gZXNjYXBlKHN0cmluZykge1xuICAgICAgLy8gUmVzZXQgYGxhc3RJbmRleGAgYmVjYXVzZSBpbiBJRSA8IDkgYFN0cmluZyNyZXBsYWNlYCBkb2VzIG5vdC5cbiAgICAgIHN0cmluZyA9IGJhc2VUb1N0cmluZyhzdHJpbmcpO1xuICAgICAgcmV0dXJuIChzdHJpbmcgJiYgcmVIYXNVbmVzY2FwZWRIdG1sLnRlc3Qoc3RyaW5nKSlcbiAgICAgICAgPyBzdHJpbmcucmVwbGFjZShyZVVuZXNjYXBlZEh0bWwsIGVzY2FwZUh0bWxDaGFyKVxuICAgICAgICA6IHN0cmluZztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFc2NhcGVzIHRoZSBgUmVnRXhwYCBzcGVjaWFsIGNoYXJhY3RlcnMgXCJcXFwiLCBcIi9cIiwgXCJeXCIsIFwiJFwiLCBcIi5cIiwgXCJ8XCIsIFwiP1wiLFxuICAgICAqIFwiKlwiLCBcIitcIiwgXCIoXCIsIFwiKVwiLCBcIltcIiwgXCJdXCIsIFwie1wiIGFuZCBcIn1cIiBpbiBgc3RyaW5nYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZz0nJ10gVGhlIHN0cmluZyB0byBlc2NhcGUuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgZXNjYXBlZCBzdHJpbmcuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uZXNjYXBlUmVnRXhwKCdbbG9kYXNoXShodHRwczovL2xvZGFzaC5jb20vKScpO1xuICAgICAqIC8vID0+ICdcXFtsb2Rhc2hcXF1cXChodHRwczpcXC9cXC9sb2Rhc2hcXC5jb21cXC9cXCknXG4gICAgICovXG4gICAgZnVuY3Rpb24gZXNjYXBlUmVnRXhwKHN0cmluZykge1xuICAgICAgc3RyaW5nID0gYmFzZVRvU3RyaW5nKHN0cmluZyk7XG4gICAgICByZXR1cm4gKHN0cmluZyAmJiByZUhhc1JlZ0V4cENoYXJzLnRlc3Qoc3RyaW5nKSlcbiAgICAgICAgPyBzdHJpbmcucmVwbGFjZShyZVJlZ0V4cENoYXJzLCBlc2NhcGVSZWdFeHBDaGFyKVxuICAgICAgICA6IChzdHJpbmcgfHwgJyg/OiknKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBgc3RyaW5nYCB0byBba2ViYWIgY2FzZV0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTGV0dGVyX2Nhc2UjU3BlY2lhbF9jYXNlX3N0eWxlcykuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgU3RyaW5nXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtzdHJpbmc9JyddIFRoZSBzdHJpbmcgdG8gY29udmVydC5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBrZWJhYiBjYXNlZCBzdHJpbmcuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ua2ViYWJDYXNlKCdGb28gQmFyJyk7XG4gICAgICogLy8gPT4gJ2Zvby1iYXInXG4gICAgICpcbiAgICAgKiBfLmtlYmFiQ2FzZSgnZm9vQmFyJyk7XG4gICAgICogLy8gPT4gJ2Zvby1iYXInXG4gICAgICpcbiAgICAgKiBfLmtlYmFiQ2FzZSgnX19mb29fYmFyX18nKTtcbiAgICAgKiAvLyA9PiAnZm9vLWJhcidcbiAgICAgKi9cbiAgICB2YXIga2ViYWJDYXNlID0gY3JlYXRlQ29tcG91bmRlcihmdW5jdGlvbihyZXN1bHQsIHdvcmQsIGluZGV4KSB7XG4gICAgICByZXR1cm4gcmVzdWx0ICsgKGluZGV4ID8gJy0nIDogJycpICsgd29yZC50b0xvd2VyQ2FzZSgpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUGFkcyBgc3RyaW5nYCBvbiB0aGUgbGVmdCBhbmQgcmlnaHQgc2lkZXMgaWYgaXQncyBzaG9ydGVyIHRoYW4gYGxlbmd0aGAuXG4gICAgICogUGFkZGluZyBjaGFyYWN0ZXJzIGFyZSB0cnVuY2F0ZWQgaWYgdGhleSBjYW4ndCBiZSBldmVubHkgZGl2aWRlZCBieSBgbGVuZ3RoYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZz0nJ10gVGhlIHN0cmluZyB0byBwYWQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGg9MF0gVGhlIHBhZGRpbmcgbGVuZ3RoLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbY2hhcnM9JyAnXSBUaGUgc3RyaW5nIHVzZWQgYXMgcGFkZGluZy5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBwYWRkZWQgc3RyaW5nLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnBhZCgnYWJjJywgOCk7XG4gICAgICogLy8gPT4gJyAgYWJjICAgJ1xuICAgICAqXG4gICAgICogXy5wYWQoJ2FiYycsIDgsICdfLScpO1xuICAgICAqIC8vID0+ICdfLWFiY18tXydcbiAgICAgKlxuICAgICAqIF8ucGFkKCdhYmMnLCAzKTtcbiAgICAgKiAvLyA9PiAnYWJjJ1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIHBhZChzdHJpbmcsIGxlbmd0aCwgY2hhcnMpIHtcbiAgICAgIHN0cmluZyA9IGJhc2VUb1N0cmluZyhzdHJpbmcpO1xuICAgICAgbGVuZ3RoID0gK2xlbmd0aDtcblxuICAgICAgdmFyIHN0ckxlbmd0aCA9IHN0cmluZy5sZW5ndGg7XG4gICAgICBpZiAoc3RyTGVuZ3RoID49IGxlbmd0aCB8fCAhbmF0aXZlSXNGaW5pdGUobGVuZ3RoKSkge1xuICAgICAgICByZXR1cm4gc3RyaW5nO1xuICAgICAgfVxuICAgICAgdmFyIG1pZCA9IChsZW5ndGggLSBzdHJMZW5ndGgpIC8gMixcbiAgICAgICAgICBsZWZ0TGVuZ3RoID0gbmF0aXZlRmxvb3IobWlkKSxcbiAgICAgICAgICByaWdodExlbmd0aCA9IG5hdGl2ZUNlaWwobWlkKTtcblxuICAgICAgY2hhcnMgPSBjcmVhdGVQYWRkaW5nKCcnLCByaWdodExlbmd0aCwgY2hhcnMpO1xuICAgICAgcmV0dXJuIGNoYXJzLnNsaWNlKDAsIGxlZnRMZW5ndGgpICsgc3RyaW5nICsgY2hhcnM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGFkcyBgc3RyaW5nYCBvbiB0aGUgbGVmdCBzaWRlIGlmIGl0J3Mgc2hvcnRlciB0aGFuIGBsZW5ndGhgLiBQYWRkaW5nXG4gICAgICogY2hhcmFjdGVycyBhcmUgdHJ1bmNhdGVkIGlmIHRoZXkgZXhjZWVkIGBsZW5ndGhgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbc3RyaW5nPScnXSBUaGUgc3RyaW5nIHRvIHBhZC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aD0wXSBUaGUgcGFkZGluZyBsZW5ndGguXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtjaGFycz0nICddIFRoZSBzdHJpbmcgdXNlZCBhcyBwYWRkaW5nLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHBhZGRlZCBzdHJpbmcuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ucGFkTGVmdCgnYWJjJywgNik7XG4gICAgICogLy8gPT4gJyAgIGFiYydcbiAgICAgKlxuICAgICAqIF8ucGFkTGVmdCgnYWJjJywgNiwgJ18tJyk7XG4gICAgICogLy8gPT4gJ18tX2FiYydcbiAgICAgKlxuICAgICAqIF8ucGFkTGVmdCgnYWJjJywgMyk7XG4gICAgICogLy8gPT4gJ2FiYydcbiAgICAgKi9cbiAgICB2YXIgcGFkTGVmdCA9IGNyZWF0ZVBhZERpcigpO1xuXG4gICAgLyoqXG4gICAgICogUGFkcyBgc3RyaW5nYCBvbiB0aGUgcmlnaHQgc2lkZSBpZiBpdCdzIHNob3J0ZXIgdGhhbiBgbGVuZ3RoYC4gUGFkZGluZ1xuICAgICAqIGNoYXJhY3RlcnMgYXJlIHRydW5jYXRlZCBpZiB0aGV5IGV4Y2VlZCBgbGVuZ3RoYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZz0nJ10gVGhlIHN0cmluZyB0byBwYWQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGg9MF0gVGhlIHBhZGRpbmcgbGVuZ3RoLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbY2hhcnM9JyAnXSBUaGUgc3RyaW5nIHVzZWQgYXMgcGFkZGluZy5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBwYWRkZWQgc3RyaW5nLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnBhZFJpZ2h0KCdhYmMnLCA2KTtcbiAgICAgKiAvLyA9PiAnYWJjICAgJ1xuICAgICAqXG4gICAgICogXy5wYWRSaWdodCgnYWJjJywgNiwgJ18tJyk7XG4gICAgICogLy8gPT4gJ2FiY18tXydcbiAgICAgKlxuICAgICAqIF8ucGFkUmlnaHQoJ2FiYycsIDMpO1xuICAgICAqIC8vID0+ICdhYmMnXG4gICAgICovXG4gICAgdmFyIHBhZFJpZ2h0ID0gY3JlYXRlUGFkRGlyKHRydWUpO1xuXG4gICAgLyoqXG4gICAgICogQ29udmVydHMgYHN0cmluZ2AgdG8gYW4gaW50ZWdlciBvZiB0aGUgc3BlY2lmaWVkIHJhZGl4LiBJZiBgcmFkaXhgIGlzXG4gICAgICogYHVuZGVmaW5lZGAgb3IgYDBgLCBhIGByYWRpeGAgb2YgYDEwYCBpcyB1c2VkIHVubGVzcyBgdmFsdWVgIGlzIGEgaGV4YWRlY2ltYWwsXG4gICAgICogaW4gd2hpY2ggY2FzZSBhIGByYWRpeGAgb2YgYDE2YCBpcyB1c2VkLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoaXMgbWV0aG9kIGFsaWducyB3aXRoIHRoZSBbRVM1IGltcGxlbWVudGF0aW9uXShodHRwczovL2VzNS5naXRodWIuaW8vI0UpXG4gICAgICogb2YgYHBhcnNlSW50YC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIFRoZSBzdHJpbmcgdG8gY29udmVydC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3JhZGl4XSBUaGUgcmFkaXggdG8gaW50ZXJwcmV0IGB2YWx1ZWAgYnkuXG4gICAgICogQHBhcmFtLSB7T2JqZWN0fSBbZ3VhcmRdIEVuYWJsZXMgdXNlIGFzIGEgY2FsbGJhY2sgZm9yIGZ1bmN0aW9ucyBsaWtlIGBfLm1hcGAuXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgY29udmVydGVkIGludGVnZXIuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ucGFyc2VJbnQoJzA4Jyk7XG4gICAgICogLy8gPT4gOFxuICAgICAqXG4gICAgICogXy5tYXAoWyc2JywgJzA4JywgJzEwJ10sIF8ucGFyc2VJbnQpO1xuICAgICAqIC8vID0+IFs2LCA4LCAxMF1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBwYXJzZUludChzdHJpbmcsIHJhZGl4LCBndWFyZCkge1xuICAgICAgLy8gRmlyZWZveCA8IDIxIGFuZCBPcGVyYSA8IDE1IGZvbGxvdyBFUzMgZm9yIGBwYXJzZUludGAuXG4gICAgICAvLyBDaHJvbWUgZmFpbHMgdG8gdHJpbSBsZWFkaW5nIDxCT00+IHdoaXRlc3BhY2UgY2hhcmFjdGVycy5cbiAgICAgIC8vIFNlZSBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9MzEwOSBmb3IgbW9yZSBkZXRhaWxzLlxuICAgICAgaWYgKGd1YXJkID8gaXNJdGVyYXRlZUNhbGwoc3RyaW5nLCByYWRpeCwgZ3VhcmQpIDogcmFkaXggPT0gbnVsbCkge1xuICAgICAgICByYWRpeCA9IDA7XG4gICAgICB9IGVsc2UgaWYgKHJhZGl4KSB7XG4gICAgICAgIHJhZGl4ID0gK3JhZGl4O1xuICAgICAgfVxuICAgICAgc3RyaW5nID0gdHJpbShzdHJpbmcpO1xuICAgICAgcmV0dXJuIG5hdGl2ZVBhcnNlSW50KHN0cmluZywgcmFkaXggfHwgKHJlSGFzSGV4UHJlZml4LnRlc3Qoc3RyaW5nKSA/IDE2IDogMTApKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXBlYXRzIHRoZSBnaXZlbiBzdHJpbmcgYG5gIHRpbWVzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbc3RyaW5nPScnXSBUaGUgc3RyaW5nIHRvIHJlcGVhdC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW249MF0gVGhlIG51bWJlciBvZiB0aW1lcyB0byByZXBlYXQgdGhlIHN0cmluZy5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSByZXBlYXRlZCBzdHJpbmcuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ucmVwZWF0KCcqJywgMyk7XG4gICAgICogLy8gPT4gJyoqKidcbiAgICAgKlxuICAgICAqIF8ucmVwZWF0KCdhYmMnLCAyKTtcbiAgICAgKiAvLyA9PiAnYWJjYWJjJ1xuICAgICAqXG4gICAgICogXy5yZXBlYXQoJ2FiYycsIDApO1xuICAgICAqIC8vID0+ICcnXG4gICAgICovXG4gICAgZnVuY3Rpb24gcmVwZWF0KHN0cmluZywgbikge1xuICAgICAgdmFyIHJlc3VsdCA9ICcnO1xuICAgICAgc3RyaW5nID0gYmFzZVRvU3RyaW5nKHN0cmluZyk7XG4gICAgICBuID0gK247XG4gICAgICBpZiAobiA8IDEgfHwgIXN0cmluZyB8fCAhbmF0aXZlSXNGaW5pdGUobikpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICAgIC8vIExldmVyYWdlIHRoZSBleHBvbmVudGlhdGlvbiBieSBzcXVhcmluZyBhbGdvcml0aG0gZm9yIGEgZmFzdGVyIHJlcGVhdC5cbiAgICAgIC8vIFNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9FeHBvbmVudGlhdGlvbl9ieV9zcXVhcmluZyBmb3IgbW9yZSBkZXRhaWxzLlxuICAgICAgZG8ge1xuICAgICAgICBpZiAobiAlIDIpIHtcbiAgICAgICAgICByZXN1bHQgKz0gc3RyaW5nO1xuICAgICAgICB9XG4gICAgICAgIG4gPSBuYXRpdmVGbG9vcihuIC8gMik7XG4gICAgICAgIHN0cmluZyArPSBzdHJpbmc7XG4gICAgICB9IHdoaWxlIChuKTtcblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBgc3RyaW5nYCB0byBbc25ha2UgY2FzZV0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvU25ha2VfY2FzZSkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgU3RyaW5nXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtzdHJpbmc9JyddIFRoZSBzdHJpbmcgdG8gY29udmVydC5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBzbmFrZSBjYXNlZCBzdHJpbmcuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uc25ha2VDYXNlKCdGb28gQmFyJyk7XG4gICAgICogLy8gPT4gJ2Zvb19iYXInXG4gICAgICpcbiAgICAgKiBfLnNuYWtlQ2FzZSgnZm9vQmFyJyk7XG4gICAgICogLy8gPT4gJ2Zvb19iYXInXG4gICAgICpcbiAgICAgKiBfLnNuYWtlQ2FzZSgnLS1mb28tYmFyJyk7XG4gICAgICogLy8gPT4gJ2Zvb19iYXInXG4gICAgICovXG4gICAgdmFyIHNuYWtlQ2FzZSA9IGNyZWF0ZUNvbXBvdW5kZXIoZnVuY3Rpb24ocmVzdWx0LCB3b3JkLCBpbmRleCkge1xuICAgICAgcmV0dXJuIHJlc3VsdCArIChpbmRleCA/ICdfJyA6ICcnKSArIHdvcmQudG9Mb3dlckNhc2UoKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGBzdHJpbmdgIHRvIFtzdGFydCBjYXNlXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9MZXR0ZXJfY2FzZSNTdHlsaXN0aWNfb3Jfc3BlY2lhbGlzZWRfdXNhZ2UpLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbc3RyaW5nPScnXSBUaGUgc3RyaW5nIHRvIGNvbnZlcnQuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc3RhcnQgY2FzZWQgc3RyaW5nLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnN0YXJ0Q2FzZSgnLS1mb28tYmFyJyk7XG4gICAgICogLy8gPT4gJ0ZvbyBCYXInXG4gICAgICpcbiAgICAgKiBfLnN0YXJ0Q2FzZSgnZm9vQmFyJyk7XG4gICAgICogLy8gPT4gJ0ZvbyBCYXInXG4gICAgICpcbiAgICAgKiBfLnN0YXJ0Q2FzZSgnX19mb29fYmFyX18nKTtcbiAgICAgKiAvLyA9PiAnRm9vIEJhcidcbiAgICAgKi9cbiAgICB2YXIgc3RhcnRDYXNlID0gY3JlYXRlQ29tcG91bmRlcihmdW5jdGlvbihyZXN1bHQsIHdvcmQsIGluZGV4KSB7XG4gICAgICByZXR1cm4gcmVzdWx0ICsgKGluZGV4ID8gJyAnIDogJycpICsgKHdvcmQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB3b3JkLnNsaWNlKDEpKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgc3RyaW5nYCBzdGFydHMgd2l0aCB0aGUgZ2l2ZW4gdGFyZ2V0IHN0cmluZy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZz0nJ10gVGhlIHN0cmluZyB0byBzZWFyY2guXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFt0YXJnZXRdIFRoZSBzdHJpbmcgdG8gc2VhcmNoIGZvci5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3Bvc2l0aW9uPTBdIFRoZSBwb3NpdGlvbiB0byBzZWFyY2ggZnJvbS5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHN0cmluZ2Agc3RhcnRzIHdpdGggYHRhcmdldGAsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5zdGFydHNXaXRoKCdhYmMnLCAnYScpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uc3RhcnRzV2l0aCgnYWJjJywgJ2InKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqXG4gICAgICogXy5zdGFydHNXaXRoKCdhYmMnLCAnYicsIDEpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzdGFydHNXaXRoKHN0cmluZywgdGFyZ2V0LCBwb3NpdGlvbikge1xuICAgICAgc3RyaW5nID0gYmFzZVRvU3RyaW5nKHN0cmluZyk7XG4gICAgICBwb3NpdGlvbiA9IHBvc2l0aW9uID09IG51bGxcbiAgICAgICAgPyAwXG4gICAgICAgIDogbmF0aXZlTWluKHBvc2l0aW9uIDwgMCA/IDAgOiAoK3Bvc2l0aW9uIHx8IDApLCBzdHJpbmcubGVuZ3RoKTtcblxuICAgICAgcmV0dXJuIHN0cmluZy5sYXN0SW5kZXhPZih0YXJnZXQsIHBvc2l0aW9uKSA9PSBwb3NpdGlvbjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgY29tcGlsZWQgdGVtcGxhdGUgZnVuY3Rpb24gdGhhdCBjYW4gaW50ZXJwb2xhdGUgZGF0YSBwcm9wZXJ0aWVzXG4gICAgICogaW4gXCJpbnRlcnBvbGF0ZVwiIGRlbGltaXRlcnMsIEhUTUwtZXNjYXBlIGludGVycG9sYXRlZCBkYXRhIHByb3BlcnRpZXMgaW5cbiAgICAgKiBcImVzY2FwZVwiIGRlbGltaXRlcnMsIGFuZCBleGVjdXRlIEphdmFTY3JpcHQgaW4gXCJldmFsdWF0ZVwiIGRlbGltaXRlcnMuIERhdGFcbiAgICAgKiBwcm9wZXJ0aWVzIG1heSBiZSBhY2Nlc3NlZCBhcyBmcmVlIHZhcmlhYmxlcyBpbiB0aGUgdGVtcGxhdGUuIElmIGEgc2V0dGluZ1xuICAgICAqIG9iamVjdCBpcyBwcm92aWRlZCBpdCB0YWtlcyBwcmVjZWRlbmNlIG92ZXIgYF8udGVtcGxhdGVTZXR0aW5nc2AgdmFsdWVzLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIEluIHRoZSBkZXZlbG9wbWVudCBidWlsZCBgXy50ZW1wbGF0ZWAgdXRpbGl6ZXNcbiAgICAgKiBbc291cmNlVVJMc10oaHR0cDovL3d3dy5odG1sNXJvY2tzLmNvbS9lbi90dXRvcmlhbHMvZGV2ZWxvcGVydG9vbHMvc291cmNlbWFwcy8jdG9jLXNvdXJjZXVybClcbiAgICAgKiBmb3IgZWFzaWVyIGRlYnVnZ2luZy5cbiAgICAgKlxuICAgICAqIEZvciBtb3JlIGluZm9ybWF0aW9uIG9uIHByZWNvbXBpbGluZyB0ZW1wbGF0ZXMgc2VlXG4gICAgICogW2xvZGFzaCdzIGN1c3RvbSBidWlsZHMgZG9jdW1lbnRhdGlvbl0oaHR0cHM6Ly9sb2Rhc2guY29tL2N1c3RvbS1idWlsZHMpLlxuICAgICAqXG4gICAgICogRm9yIG1vcmUgaW5mb3JtYXRpb24gb24gQ2hyb21lIGV4dGVuc2lvbiBzYW5kYm94ZXMgc2VlXG4gICAgICogW0Nocm9tZSdzIGV4dGVuc2lvbnMgZG9jdW1lbnRhdGlvbl0oaHR0cHM6Ly9kZXZlbG9wZXIuY2hyb21lLmNvbS9leHRlbnNpb25zL3NhbmRib3hpbmdFdmFsKS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZz0nJ10gVGhlIHRlbXBsYXRlIHN0cmluZy5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIFRoZSBvcHRpb25zIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge1JlZ0V4cH0gW29wdGlvbnMuZXNjYXBlXSBUaGUgSFRNTCBcImVzY2FwZVwiIGRlbGltaXRlci5cbiAgICAgKiBAcGFyYW0ge1JlZ0V4cH0gW29wdGlvbnMuZXZhbHVhdGVdIFRoZSBcImV2YWx1YXRlXCIgZGVsaW1pdGVyLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucy5pbXBvcnRzXSBBbiBvYmplY3QgdG8gaW1wb3J0IGludG8gdGhlIHRlbXBsYXRlIGFzIGZyZWUgdmFyaWFibGVzLlxuICAgICAqIEBwYXJhbSB7UmVnRXhwfSBbb3B0aW9ucy5pbnRlcnBvbGF0ZV0gVGhlIFwiaW50ZXJwb2xhdGVcIiBkZWxpbWl0ZXIuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnNvdXJjZVVSTF0gVGhlIHNvdXJjZVVSTCBvZiB0aGUgdGVtcGxhdGUncyBjb21waWxlZCBzb3VyY2UuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnZhcmlhYmxlXSBUaGUgZGF0YSBvYmplY3QgdmFyaWFibGUgbmFtZS5cbiAgICAgKiBAcGFyYW0tIHtPYmplY3R9IFtvdGhlck9wdGlvbnNdIEVuYWJsZXMgdGhlIGxlZ2FjeSBgb3B0aW9uc2AgcGFyYW0gc2lnbmF0dXJlLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgY29tcGlsZWQgdGVtcGxhdGUgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBcImludGVycG9sYXRlXCIgZGVsaW1pdGVyIHRvIGNyZWF0ZSBhIGNvbXBpbGVkIHRlbXBsYXRlXG4gICAgICogdmFyIGNvbXBpbGVkID0gXy50ZW1wbGF0ZSgnaGVsbG8gPCU9IHVzZXIgJT4hJyk7XG4gICAgICogY29tcGlsZWQoeyAndXNlcic6ICdmcmVkJyB9KTtcbiAgICAgKiAvLyA9PiAnaGVsbG8gZnJlZCEnXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgSFRNTCBcImVzY2FwZVwiIGRlbGltaXRlciB0byBlc2NhcGUgZGF0YSBwcm9wZXJ0eSB2YWx1ZXNcbiAgICAgKiB2YXIgY29tcGlsZWQgPSBfLnRlbXBsYXRlKCc8Yj48JS0gdmFsdWUgJT48L2I+Jyk7XG4gICAgICogY29tcGlsZWQoeyAndmFsdWUnOiAnPHNjcmlwdD4nIH0pO1xuICAgICAqIC8vID0+ICc8Yj4mbHQ7c2NyaXB0Jmd0OzwvYj4nXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgXCJldmFsdWF0ZVwiIGRlbGltaXRlciB0byBleGVjdXRlIEphdmFTY3JpcHQgYW5kIGdlbmVyYXRlIEhUTUxcbiAgICAgKiB2YXIgY29tcGlsZWQgPSBfLnRlbXBsYXRlKCc8JSBfLmZvckVhY2godXNlcnMsIGZ1bmN0aW9uKHVzZXIpIHsgJT48bGk+PCUtIHVzZXIgJT48L2xpPjwlIH0pOyAlPicpO1xuICAgICAqIGNvbXBpbGVkKHsgJ3VzZXJzJzogWydmcmVkJywgJ2Jhcm5leSddIH0pO1xuICAgICAqIC8vID0+ICc8bGk+ZnJlZDwvbGk+PGxpPmJhcm5leTwvbGk+J1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGludGVybmFsIGBwcmludGAgZnVuY3Rpb24gaW4gXCJldmFsdWF0ZVwiIGRlbGltaXRlcnNcbiAgICAgKiB2YXIgY29tcGlsZWQgPSBfLnRlbXBsYXRlKCc8JSBwcmludChcImhlbGxvIFwiICsgdXNlcik7ICU+IScpO1xuICAgICAqIGNvbXBpbGVkKHsgJ3VzZXInOiAnYmFybmV5JyB9KTtcbiAgICAgKiAvLyA9PiAnaGVsbG8gYmFybmV5ISdcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBFUyBkZWxpbWl0ZXIgYXMgYW4gYWx0ZXJuYXRpdmUgdG8gdGhlIGRlZmF1bHQgXCJpbnRlcnBvbGF0ZVwiIGRlbGltaXRlclxuICAgICAqIHZhciBjb21waWxlZCA9IF8udGVtcGxhdGUoJ2hlbGxvICR7IHVzZXIgfSEnKTtcbiAgICAgKiBjb21waWxlZCh7ICd1c2VyJzogJ3BlYmJsZXMnIH0pO1xuICAgICAqIC8vID0+ICdoZWxsbyBwZWJibGVzISdcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIGN1c3RvbSB0ZW1wbGF0ZSBkZWxpbWl0ZXJzXG4gICAgICogXy50ZW1wbGF0ZVNldHRpbmdzLmludGVycG9sYXRlID0gL3t7KFtcXHNcXFNdKz8pfX0vZztcbiAgICAgKiB2YXIgY29tcGlsZWQgPSBfLnRlbXBsYXRlKCdoZWxsbyB7eyB1c2VyIH19IScpO1xuICAgICAqIGNvbXBpbGVkKHsgJ3VzZXInOiAnbXVzdGFjaGUnIH0pO1xuICAgICAqIC8vID0+ICdoZWxsbyBtdXN0YWNoZSEnXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBiYWNrc2xhc2hlcyB0byB0cmVhdCBkZWxpbWl0ZXJzIGFzIHBsYWluIHRleHRcbiAgICAgKiB2YXIgY29tcGlsZWQgPSBfLnRlbXBsYXRlKCc8JT0gXCJcXFxcPCUtIHZhbHVlICVcXFxcPlwiICU+Jyk7XG4gICAgICogY29tcGlsZWQoeyAndmFsdWUnOiAnaWdub3JlZCcgfSk7XG4gICAgICogLy8gPT4gJzwlLSB2YWx1ZSAlPidcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgaW1wb3J0c2Agb3B0aW9uIHRvIGltcG9ydCBgalF1ZXJ5YCBhcyBganFgXG4gICAgICogdmFyIHRleHQgPSAnPCUganEuZWFjaCh1c2VycywgZnVuY3Rpb24odXNlcikgeyAlPjxsaT48JS0gdXNlciAlPjwvbGk+PCUgfSk7ICU+JztcbiAgICAgKiB2YXIgY29tcGlsZWQgPSBfLnRlbXBsYXRlKHRleHQsIHsgJ2ltcG9ydHMnOiB7ICdqcSc6IGpRdWVyeSB9IH0pO1xuICAgICAqIGNvbXBpbGVkKHsgJ3VzZXJzJzogWydmcmVkJywgJ2Jhcm5leSddIH0pO1xuICAgICAqIC8vID0+ICc8bGk+ZnJlZDwvbGk+PGxpPmJhcm5leTwvbGk+J1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBzb3VyY2VVUkxgIG9wdGlvbiB0byBzcGVjaWZ5IGEgY3VzdG9tIHNvdXJjZVVSTCBmb3IgdGhlIHRlbXBsYXRlXG4gICAgICogdmFyIGNvbXBpbGVkID0gXy50ZW1wbGF0ZSgnaGVsbG8gPCU9IHVzZXIgJT4hJywgeyAnc291cmNlVVJMJzogJy9iYXNpYy9ncmVldGluZy5qc3QnIH0pO1xuICAgICAqIGNvbXBpbGVkKGRhdGEpO1xuICAgICAqIC8vID0+IGZpbmQgdGhlIHNvdXJjZSBvZiBcImdyZWV0aW5nLmpzdFwiIHVuZGVyIHRoZSBTb3VyY2VzIHRhYiBvciBSZXNvdXJjZXMgcGFuZWwgb2YgdGhlIHdlYiBpbnNwZWN0b3JcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgdmFyaWFibGVgIG9wdGlvbiB0byBlbnN1cmUgYSB3aXRoLXN0YXRlbWVudCBpc24ndCB1c2VkIGluIHRoZSBjb21waWxlZCB0ZW1wbGF0ZVxuICAgICAqIHZhciBjb21waWxlZCA9IF8udGVtcGxhdGUoJ2hpIDwlPSBkYXRhLnVzZXIgJT4hJywgeyAndmFyaWFibGUnOiAnZGF0YScgfSk7XG4gICAgICogY29tcGlsZWQuc291cmNlO1xuICAgICAqIC8vID0+IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgKiAvLyAgIHZhciBfX3QsIF9fcCA9ICcnO1xuICAgICAqIC8vICAgX19wICs9ICdoaSAnICsgKChfX3QgPSAoIGRhdGEudXNlciApKSA9PSBudWxsID8gJycgOiBfX3QpICsgJyEnO1xuICAgICAqIC8vICAgcmV0dXJuIF9fcDtcbiAgICAgKiAvLyB9XG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYHNvdXJjZWAgcHJvcGVydHkgdG8gaW5saW5lIGNvbXBpbGVkIHRlbXBsYXRlcyBmb3IgbWVhbmluZ2Z1bFxuICAgICAqIC8vIGxpbmUgbnVtYmVycyBpbiBlcnJvciBtZXNzYWdlcyBhbmQgYSBzdGFjayB0cmFjZVxuICAgICAqIGZzLndyaXRlRmlsZVN5bmMocGF0aC5qb2luKGN3ZCwgJ2pzdC5qcycpLCAnXFxcbiAgICAgKiAgIHZhciBKU1QgPSB7XFxcbiAgICAgKiAgICAgXCJtYWluXCI6ICcgKyBfLnRlbXBsYXRlKG1haW5UZXh0KS5zb3VyY2UgKyAnXFxcbiAgICAgKiAgIH07XFxcbiAgICAgKiAnKTtcbiAgICAgKi9cbiAgICBmdW5jdGlvbiB0ZW1wbGF0ZShzdHJpbmcsIG9wdGlvbnMsIG90aGVyT3B0aW9ucykge1xuICAgICAgLy8gQmFzZWQgb24gSm9obiBSZXNpZydzIGB0bXBsYCBpbXBsZW1lbnRhdGlvbiAoaHR0cDovL2Vqb2huLm9yZy9ibG9nL2phdmFzY3JpcHQtbWljcm8tdGVtcGxhdGluZy8pXG4gICAgICAvLyBhbmQgTGF1cmEgRG9rdG9yb3ZhJ3MgZG9ULmpzIChodHRwczovL2dpdGh1Yi5jb20vb2xhZG8vZG9UKS5cbiAgICAgIHZhciBzZXR0aW5ncyA9IGxvZGFzaC50ZW1wbGF0ZVNldHRpbmdzO1xuXG4gICAgICBpZiAob3RoZXJPcHRpb25zICYmIGlzSXRlcmF0ZWVDYWxsKHN0cmluZywgb3B0aW9ucywgb3RoZXJPcHRpb25zKSkge1xuICAgICAgICBvcHRpb25zID0gb3RoZXJPcHRpb25zID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgc3RyaW5nID0gYmFzZVRvU3RyaW5nKHN0cmluZyk7XG4gICAgICBvcHRpb25zID0gYXNzaWduV2l0aChiYXNlQXNzaWduKHt9LCBvdGhlck9wdGlvbnMgfHwgb3B0aW9ucyksIHNldHRpbmdzLCBhc3NpZ25Pd25EZWZhdWx0cyk7XG5cbiAgICAgIHZhciBpbXBvcnRzID0gYXNzaWduV2l0aChiYXNlQXNzaWduKHt9LCBvcHRpb25zLmltcG9ydHMpLCBzZXR0aW5ncy5pbXBvcnRzLCBhc3NpZ25Pd25EZWZhdWx0cyksXG4gICAgICAgICAgaW1wb3J0c0tleXMgPSBrZXlzKGltcG9ydHMpLFxuICAgICAgICAgIGltcG9ydHNWYWx1ZXMgPSBiYXNlVmFsdWVzKGltcG9ydHMsIGltcG9ydHNLZXlzKTtcblxuICAgICAgdmFyIGlzRXNjYXBpbmcsXG4gICAgICAgICAgaXNFdmFsdWF0aW5nLFxuICAgICAgICAgIGluZGV4ID0gMCxcbiAgICAgICAgICBpbnRlcnBvbGF0ZSA9IG9wdGlvbnMuaW50ZXJwb2xhdGUgfHwgcmVOb01hdGNoLFxuICAgICAgICAgIHNvdXJjZSA9IFwiX19wICs9ICdcIjtcblxuICAgICAgLy8gQ29tcGlsZSB0aGUgcmVnZXhwIHRvIG1hdGNoIGVhY2ggZGVsaW1pdGVyLlxuICAgICAgdmFyIHJlRGVsaW1pdGVycyA9IFJlZ0V4cChcbiAgICAgICAgKG9wdGlvbnMuZXNjYXBlIHx8IHJlTm9NYXRjaCkuc291cmNlICsgJ3wnICtcbiAgICAgICAgaW50ZXJwb2xhdGUuc291cmNlICsgJ3wnICtcbiAgICAgICAgKGludGVycG9sYXRlID09PSByZUludGVycG9sYXRlID8gcmVFc1RlbXBsYXRlIDogcmVOb01hdGNoKS5zb3VyY2UgKyAnfCcgK1xuICAgICAgICAob3B0aW9ucy5ldmFsdWF0ZSB8fCByZU5vTWF0Y2gpLnNvdXJjZSArICd8JCdcbiAgICAgICwgJ2cnKTtcblxuICAgICAgLy8gVXNlIGEgc291cmNlVVJMIGZvciBlYXNpZXIgZGVidWdnaW5nLlxuICAgICAgdmFyIHNvdXJjZVVSTCA9ICcvLyMgc291cmNlVVJMPScgK1xuICAgICAgICAoJ3NvdXJjZVVSTCcgaW4gb3B0aW9uc1xuICAgICAgICAgID8gb3B0aW9ucy5zb3VyY2VVUkxcbiAgICAgICAgICA6ICgnbG9kYXNoLnRlbXBsYXRlU291cmNlc1snICsgKCsrdGVtcGxhdGVDb3VudGVyKSArICddJylcbiAgICAgICAgKSArICdcXG4nO1xuXG4gICAgICBzdHJpbmcucmVwbGFjZShyZURlbGltaXRlcnMsIGZ1bmN0aW9uKG1hdGNoLCBlc2NhcGVWYWx1ZSwgaW50ZXJwb2xhdGVWYWx1ZSwgZXNUZW1wbGF0ZVZhbHVlLCBldmFsdWF0ZVZhbHVlLCBvZmZzZXQpIHtcbiAgICAgICAgaW50ZXJwb2xhdGVWYWx1ZSB8fCAoaW50ZXJwb2xhdGVWYWx1ZSA9IGVzVGVtcGxhdGVWYWx1ZSk7XG5cbiAgICAgICAgLy8gRXNjYXBlIGNoYXJhY3RlcnMgdGhhdCBjYW4ndCBiZSBpbmNsdWRlZCBpbiBzdHJpbmcgbGl0ZXJhbHMuXG4gICAgICAgIHNvdXJjZSArPSBzdHJpbmcuc2xpY2UoaW5kZXgsIG9mZnNldCkucmVwbGFjZShyZVVuZXNjYXBlZFN0cmluZywgZXNjYXBlU3RyaW5nQ2hhcik7XG5cbiAgICAgICAgLy8gUmVwbGFjZSBkZWxpbWl0ZXJzIHdpdGggc25pcHBldHMuXG4gICAgICAgIGlmIChlc2NhcGVWYWx1ZSkge1xuICAgICAgICAgIGlzRXNjYXBpbmcgPSB0cnVlO1xuICAgICAgICAgIHNvdXJjZSArPSBcIicgK1xcbl9fZShcIiArIGVzY2FwZVZhbHVlICsgXCIpICtcXG4nXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2YWx1YXRlVmFsdWUpIHtcbiAgICAgICAgICBpc0V2YWx1YXRpbmcgPSB0cnVlO1xuICAgICAgICAgIHNvdXJjZSArPSBcIic7XFxuXCIgKyBldmFsdWF0ZVZhbHVlICsgXCI7XFxuX19wICs9ICdcIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW50ZXJwb2xhdGVWYWx1ZSkge1xuICAgICAgICAgIHNvdXJjZSArPSBcIicgK1xcbigoX190ID0gKFwiICsgaW50ZXJwb2xhdGVWYWx1ZSArIFwiKSkgPT0gbnVsbCA/ICcnIDogX190KSArXFxuJ1wiO1xuICAgICAgICB9XG4gICAgICAgIGluZGV4ID0gb2Zmc2V0ICsgbWF0Y2gubGVuZ3RoO1xuXG4gICAgICAgIC8vIFRoZSBKUyBlbmdpbmUgZW1iZWRkZWQgaW4gQWRvYmUgcHJvZHVjdHMgcmVxdWlyZXMgcmV0dXJuaW5nIHRoZSBgbWF0Y2hgXG4gICAgICAgIC8vIHN0cmluZyBpbiBvcmRlciB0byBwcm9kdWNlIHRoZSBjb3JyZWN0IGBvZmZzZXRgIHZhbHVlLlxuICAgICAgICByZXR1cm4gbWF0Y2g7XG4gICAgICB9KTtcblxuICAgICAgc291cmNlICs9IFwiJztcXG5cIjtcblxuICAgICAgLy8gSWYgYHZhcmlhYmxlYCBpcyBub3Qgc3BlY2lmaWVkIHdyYXAgYSB3aXRoLXN0YXRlbWVudCBhcm91bmQgdGhlIGdlbmVyYXRlZFxuICAgICAgLy8gY29kZSB0byBhZGQgdGhlIGRhdGEgb2JqZWN0IHRvIHRoZSB0b3Agb2YgdGhlIHNjb3BlIGNoYWluLlxuICAgICAgdmFyIHZhcmlhYmxlID0gb3B0aW9ucy52YXJpYWJsZTtcbiAgICAgIGlmICghdmFyaWFibGUpIHtcbiAgICAgICAgc291cmNlID0gJ3dpdGggKG9iaikge1xcbicgKyBzb3VyY2UgKyAnXFxufVxcbic7XG4gICAgICB9XG4gICAgICAvLyBDbGVhbnVwIGNvZGUgYnkgc3RyaXBwaW5nIGVtcHR5IHN0cmluZ3MuXG4gICAgICBzb3VyY2UgPSAoaXNFdmFsdWF0aW5nID8gc291cmNlLnJlcGxhY2UocmVFbXB0eVN0cmluZ0xlYWRpbmcsICcnKSA6IHNvdXJjZSlcbiAgICAgICAgLnJlcGxhY2UocmVFbXB0eVN0cmluZ01pZGRsZSwgJyQxJylcbiAgICAgICAgLnJlcGxhY2UocmVFbXB0eVN0cmluZ1RyYWlsaW5nLCAnJDE7Jyk7XG5cbiAgICAgIC8vIEZyYW1lIGNvZGUgYXMgdGhlIGZ1bmN0aW9uIGJvZHkuXG4gICAgICBzb3VyY2UgPSAnZnVuY3Rpb24oJyArICh2YXJpYWJsZSB8fCAnb2JqJykgKyAnKSB7XFxuJyArXG4gICAgICAgICh2YXJpYWJsZVxuICAgICAgICAgID8gJydcbiAgICAgICAgICA6ICdvYmogfHwgKG9iaiA9IHt9KTtcXG4nXG4gICAgICAgICkgK1xuICAgICAgICBcInZhciBfX3QsIF9fcCA9ICcnXCIgK1xuICAgICAgICAoaXNFc2NhcGluZ1xuICAgICAgICAgICA/ICcsIF9fZSA9IF8uZXNjYXBlJ1xuICAgICAgICAgICA6ICcnXG4gICAgICAgICkgK1xuICAgICAgICAoaXNFdmFsdWF0aW5nXG4gICAgICAgICAgPyAnLCBfX2ogPSBBcnJheS5wcm90b3R5cGUuam9pbjtcXG4nICtcbiAgICAgICAgICAgIFwiZnVuY3Rpb24gcHJpbnQoKSB7IF9fcCArPSBfX2ouY2FsbChhcmd1bWVudHMsICcnKSB9XFxuXCJcbiAgICAgICAgICA6ICc7XFxuJ1xuICAgICAgICApICtcbiAgICAgICAgc291cmNlICtcbiAgICAgICAgJ3JldHVybiBfX3BcXG59JztcblxuICAgICAgdmFyIHJlc3VsdCA9IGF0dGVtcHQoZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBGdW5jdGlvbihpbXBvcnRzS2V5cywgc291cmNlVVJMICsgJ3JldHVybiAnICsgc291cmNlKS5hcHBseSh1bmRlZmluZWQsIGltcG9ydHNWYWx1ZXMpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFByb3ZpZGUgdGhlIGNvbXBpbGVkIGZ1bmN0aW9uJ3Mgc291cmNlIGJ5IGl0cyBgdG9TdHJpbmdgIG1ldGhvZCBvclxuICAgICAgLy8gdGhlIGBzb3VyY2VgIHByb3BlcnR5IGFzIGEgY29udmVuaWVuY2UgZm9yIGlubGluaW5nIGNvbXBpbGVkIHRlbXBsYXRlcy5cbiAgICAgIHJlc3VsdC5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICBpZiAoaXNFcnJvcihyZXN1bHQpKSB7XG4gICAgICAgIHRocm93IHJlc3VsdDtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBsZWFkaW5nIGFuZCB0cmFpbGluZyB3aGl0ZXNwYWNlIG9yIHNwZWNpZmllZCBjaGFyYWN0ZXJzIGZyb20gYHN0cmluZ2AuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgU3RyaW5nXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtzdHJpbmc9JyddIFRoZSBzdHJpbmcgdG8gdHJpbS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2NoYXJzPXdoaXRlc3BhY2VdIFRoZSBjaGFyYWN0ZXJzIHRvIHRyaW0uXG4gICAgICogQHBhcmFtLSB7T2JqZWN0fSBbZ3VhcmRdIEVuYWJsZXMgdXNlIGFzIGEgY2FsbGJhY2sgZm9yIGZ1bmN0aW9ucyBsaWtlIGBfLm1hcGAuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgdHJpbW1lZCBzdHJpbmcuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8udHJpbSgnICBhYmMgICcpO1xuICAgICAqIC8vID0+ICdhYmMnXG4gICAgICpcbiAgICAgKiBfLnRyaW0oJy1fLWFiYy1fLScsICdfLScpO1xuICAgICAqIC8vID0+ICdhYmMnXG4gICAgICpcbiAgICAgKiBfLm1hcChbJyAgZm9vICAnLCAnICBiYXIgICddLCBfLnRyaW0pO1xuICAgICAqIC8vID0+IFsnZm9vJywgJ2JhciddXG4gICAgICovXG4gICAgZnVuY3Rpb24gdHJpbShzdHJpbmcsIGNoYXJzLCBndWFyZCkge1xuICAgICAgdmFyIHZhbHVlID0gc3RyaW5nO1xuICAgICAgc3RyaW5nID0gYmFzZVRvU3RyaW5nKHN0cmluZyk7XG4gICAgICBpZiAoIXN0cmluZykge1xuICAgICAgICByZXR1cm4gc3RyaW5nO1xuICAgICAgfVxuICAgICAgaWYgKGd1YXJkID8gaXNJdGVyYXRlZUNhbGwodmFsdWUsIGNoYXJzLCBndWFyZCkgOiBjaGFycyA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBzdHJpbmcuc2xpY2UodHJpbW1lZExlZnRJbmRleChzdHJpbmcpLCB0cmltbWVkUmlnaHRJbmRleChzdHJpbmcpICsgMSk7XG4gICAgICB9XG4gICAgICBjaGFycyA9IChjaGFycyArICcnKTtcbiAgICAgIHJldHVybiBzdHJpbmcuc2xpY2UoY2hhcnNMZWZ0SW5kZXgoc3RyaW5nLCBjaGFycyksIGNoYXJzUmlnaHRJbmRleChzdHJpbmcsIGNoYXJzKSArIDEpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgbGVhZGluZyB3aGl0ZXNwYWNlIG9yIHNwZWNpZmllZCBjaGFyYWN0ZXJzIGZyb20gYHN0cmluZ2AuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgU3RyaW5nXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtzdHJpbmc9JyddIFRoZSBzdHJpbmcgdG8gdHJpbS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2NoYXJzPXdoaXRlc3BhY2VdIFRoZSBjaGFyYWN0ZXJzIHRvIHRyaW0uXG4gICAgICogQHBhcmFtLSB7T2JqZWN0fSBbZ3VhcmRdIEVuYWJsZXMgdXNlIGFzIGEgY2FsbGJhY2sgZm9yIGZ1bmN0aW9ucyBsaWtlIGBfLm1hcGAuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgdHJpbW1lZCBzdHJpbmcuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8udHJpbUxlZnQoJyAgYWJjICAnKTtcbiAgICAgKiAvLyA9PiAnYWJjICAnXG4gICAgICpcbiAgICAgKiBfLnRyaW1MZWZ0KCctXy1hYmMtXy0nLCAnXy0nKTtcbiAgICAgKiAvLyA9PiAnYWJjLV8tJ1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIHRyaW1MZWZ0KHN0cmluZywgY2hhcnMsIGd1YXJkKSB7XG4gICAgICB2YXIgdmFsdWUgPSBzdHJpbmc7XG4gICAgICBzdHJpbmcgPSBiYXNlVG9TdHJpbmcoc3RyaW5nKTtcbiAgICAgIGlmICghc3RyaW5nKSB7XG4gICAgICAgIHJldHVybiBzdHJpbmc7XG4gICAgICB9XG4gICAgICBpZiAoZ3VhcmQgPyBpc0l0ZXJhdGVlQ2FsbCh2YWx1ZSwgY2hhcnMsIGd1YXJkKSA6IGNoYXJzID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHN0cmluZy5zbGljZSh0cmltbWVkTGVmdEluZGV4KHN0cmluZykpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHN0cmluZy5zbGljZShjaGFyc0xlZnRJbmRleChzdHJpbmcsIChjaGFycyArICcnKSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdHJhaWxpbmcgd2hpdGVzcGFjZSBvciBzcGVjaWZpZWQgY2hhcmFjdGVycyBmcm9tIGBzdHJpbmdgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbc3RyaW5nPScnXSBUaGUgc3RyaW5nIHRvIHRyaW0uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtjaGFycz13aGl0ZXNwYWNlXSBUaGUgY2hhcmFjdGVycyB0byB0cmltLlxuICAgICAqIEBwYXJhbS0ge09iamVjdH0gW2d1YXJkXSBFbmFibGVzIHVzZSBhcyBhIGNhbGxiYWNrIGZvciBmdW5jdGlvbnMgbGlrZSBgXy5tYXBgLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHRyaW1tZWQgc3RyaW5nLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnRyaW1SaWdodCgnICBhYmMgICcpO1xuICAgICAqIC8vID0+ICcgIGFiYydcbiAgICAgKlxuICAgICAqIF8udHJpbVJpZ2h0KCctXy1hYmMtXy0nLCAnXy0nKTtcbiAgICAgKiAvLyA9PiAnLV8tYWJjJ1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIHRyaW1SaWdodChzdHJpbmcsIGNoYXJzLCBndWFyZCkge1xuICAgICAgdmFyIHZhbHVlID0gc3RyaW5nO1xuICAgICAgc3RyaW5nID0gYmFzZVRvU3RyaW5nKHN0cmluZyk7XG4gICAgICBpZiAoIXN0cmluZykge1xuICAgICAgICByZXR1cm4gc3RyaW5nO1xuICAgICAgfVxuICAgICAgaWYgKGd1YXJkID8gaXNJdGVyYXRlZUNhbGwodmFsdWUsIGNoYXJzLCBndWFyZCkgOiBjaGFycyA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBzdHJpbmcuc2xpY2UoMCwgdHJpbW1lZFJpZ2h0SW5kZXgoc3RyaW5nKSArIDEpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHN0cmluZy5zbGljZSgwLCBjaGFyc1JpZ2h0SW5kZXgoc3RyaW5nLCAoY2hhcnMgKyAnJykpICsgMSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJ1bmNhdGVzIGBzdHJpbmdgIGlmIGl0J3MgbG9uZ2VyIHRoYW4gdGhlIGdpdmVuIG1heGltdW0gc3RyaW5nIGxlbmd0aC5cbiAgICAgKiBUaGUgbGFzdCBjaGFyYWN0ZXJzIG9mIHRoZSB0cnVuY2F0ZWQgc3RyaW5nIGFyZSByZXBsYWNlZCB3aXRoIHRoZSBvbWlzc2lvblxuICAgICAqIHN0cmluZyB3aGljaCBkZWZhdWx0cyB0byBcIi4uLlwiLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbc3RyaW5nPScnXSBUaGUgc3RyaW5nIHRvIHRydW5jYXRlLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fG51bWJlcn0gW29wdGlvbnNdIFRoZSBvcHRpb25zIG9iamVjdCBvciBtYXhpbXVtIHN0cmluZyBsZW5ndGguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLmxlbmd0aD0zMF0gVGhlIG1heGltdW0gc3RyaW5nIGxlbmd0aC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMub21pc3Npb249Jy4uLiddIFRoZSBzdHJpbmcgdG8gaW5kaWNhdGUgdGV4dCBpcyBvbWl0dGVkLlxuICAgICAqIEBwYXJhbSB7UmVnRXhwfHN0cmluZ30gW29wdGlvbnMuc2VwYXJhdG9yXSBUaGUgc2VwYXJhdG9yIHBhdHRlcm4gdG8gdHJ1bmNhdGUgdG8uXG4gICAgICogQHBhcmFtLSB7T2JqZWN0fSBbZ3VhcmRdIEVuYWJsZXMgdXNlIGFzIGEgY2FsbGJhY2sgZm9yIGZ1bmN0aW9ucyBsaWtlIGBfLm1hcGAuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgdHJ1bmNhdGVkIHN0cmluZy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy50cnVuYygnaGktZGlkZGx5LWhvIHRoZXJlLCBuZWlnaGJvcmlubycpO1xuICAgICAqIC8vID0+ICdoaS1kaWRkbHktaG8gdGhlcmUsIG5laWdoYm8uLi4nXG4gICAgICpcbiAgICAgKiBfLnRydW5jKCdoaS1kaWRkbHktaG8gdGhlcmUsIG5laWdoYm9yaW5vJywgMjQpO1xuICAgICAqIC8vID0+ICdoaS1kaWRkbHktaG8gdGhlcmUsIG4uLi4nXG4gICAgICpcbiAgICAgKiBfLnRydW5jKCdoaS1kaWRkbHktaG8gdGhlcmUsIG5laWdoYm9yaW5vJywge1xuICAgICAqICAgJ2xlbmd0aCc6IDI0LFxuICAgICAqICAgJ3NlcGFyYXRvcic6ICcgJ1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+ICdoaS1kaWRkbHktaG8gdGhlcmUsLi4uJ1xuICAgICAqXG4gICAgICogXy50cnVuYygnaGktZGlkZGx5LWhvIHRoZXJlLCBuZWlnaGJvcmlubycsIHtcbiAgICAgKiAgICdsZW5ndGgnOiAyNCxcbiAgICAgKiAgICdzZXBhcmF0b3InOiAvLD8gKy9cbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiAnaGktZGlkZGx5LWhvIHRoZXJlLi4uJ1xuICAgICAqXG4gICAgICogXy50cnVuYygnaGktZGlkZGx5LWhvIHRoZXJlLCBuZWlnaGJvcmlubycsIHtcbiAgICAgKiAgICdvbWlzc2lvbic6ICcgWy4uLl0nXG4gICAgICogfSk7XG4gICAgICogLy8gPT4gJ2hpLWRpZGRseS1obyB0aGVyZSwgbmVpZyBbLi4uXSdcbiAgICAgKi9cbiAgICBmdW5jdGlvbiB0cnVuYyhzdHJpbmcsIG9wdGlvbnMsIGd1YXJkKSB7XG4gICAgICBpZiAoZ3VhcmQgJiYgaXNJdGVyYXRlZUNhbGwoc3RyaW5nLCBvcHRpb25zLCBndWFyZCkpIHtcbiAgICAgICAgb3B0aW9ucyA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIHZhciBsZW5ndGggPSBERUZBVUxUX1RSVU5DX0xFTkdUSCxcbiAgICAgICAgICBvbWlzc2lvbiA9IERFRkFVTFRfVFJVTkNfT01JU1NJT047XG5cbiAgICAgIGlmIChvcHRpb25zICE9IG51bGwpIHtcbiAgICAgICAgaWYgKGlzT2JqZWN0KG9wdGlvbnMpKSB7XG4gICAgICAgICAgdmFyIHNlcGFyYXRvciA9ICdzZXBhcmF0b3InIGluIG9wdGlvbnMgPyBvcHRpb25zLnNlcGFyYXRvciA6IHNlcGFyYXRvcjtcbiAgICAgICAgICBsZW5ndGggPSAnbGVuZ3RoJyBpbiBvcHRpb25zID8gKCtvcHRpb25zLmxlbmd0aCB8fCAwKSA6IGxlbmd0aDtcbiAgICAgICAgICBvbWlzc2lvbiA9ICdvbWlzc2lvbicgaW4gb3B0aW9ucyA/IGJhc2VUb1N0cmluZyhvcHRpb25zLm9taXNzaW9uKSA6IG9taXNzaW9uO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxlbmd0aCA9ICtvcHRpb25zIHx8IDA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHN0cmluZyA9IGJhc2VUb1N0cmluZyhzdHJpbmcpO1xuICAgICAgaWYgKGxlbmd0aCA+PSBzdHJpbmcubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBzdHJpbmc7XG4gICAgICB9XG4gICAgICB2YXIgZW5kID0gbGVuZ3RoIC0gb21pc3Npb24ubGVuZ3RoO1xuICAgICAgaWYgKGVuZCA8IDEpIHtcbiAgICAgICAgcmV0dXJuIG9taXNzaW9uO1xuICAgICAgfVxuICAgICAgdmFyIHJlc3VsdCA9IHN0cmluZy5zbGljZSgwLCBlbmQpO1xuICAgICAgaWYgKHNlcGFyYXRvciA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiByZXN1bHQgKyBvbWlzc2lvbjtcbiAgICAgIH1cbiAgICAgIGlmIChpc1JlZ0V4cChzZXBhcmF0b3IpKSB7XG4gICAgICAgIGlmIChzdHJpbmcuc2xpY2UoZW5kKS5zZWFyY2goc2VwYXJhdG9yKSkge1xuICAgICAgICAgIHZhciBtYXRjaCxcbiAgICAgICAgICAgICAgbmV3RW5kLFxuICAgICAgICAgICAgICBzdWJzdHJpbmcgPSBzdHJpbmcuc2xpY2UoMCwgZW5kKTtcblxuICAgICAgICAgIGlmICghc2VwYXJhdG9yLmdsb2JhbCkge1xuICAgICAgICAgICAgc2VwYXJhdG9yID0gUmVnRXhwKHNlcGFyYXRvci5zb3VyY2UsIChyZUZsYWdzLmV4ZWMoc2VwYXJhdG9yKSB8fCAnJykgKyAnZycpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzZXBhcmF0b3IubGFzdEluZGV4ID0gMDtcbiAgICAgICAgICB3aGlsZSAoKG1hdGNoID0gc2VwYXJhdG9yLmV4ZWMoc3Vic3RyaW5nKSkpIHtcbiAgICAgICAgICAgIG5ld0VuZCA9IG1hdGNoLmluZGV4O1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXN1bHQgPSByZXN1bHQuc2xpY2UoMCwgbmV3RW5kID09IG51bGwgPyBlbmQgOiBuZXdFbmQpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHN0cmluZy5pbmRleE9mKHNlcGFyYXRvciwgZW5kKSAhPSBlbmQpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gcmVzdWx0Lmxhc3RJbmRleE9mKHNlcGFyYXRvcik7XG4gICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgICAgcmVzdWx0ID0gcmVzdWx0LnNsaWNlKDAsIGluZGV4KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdCArIG9taXNzaW9uO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBpbnZlcnNlIG9mIGBfLmVzY2FwZWA7IHRoaXMgbWV0aG9kIGNvbnZlcnRzIHRoZSBIVE1MIGVudGl0aWVzXG4gICAgICogYCZhbXA7YCwgYCZsdDtgLCBgJmd0O2AsIGAmcXVvdDtgLCBgJiMzOTtgLCBhbmQgYCYjOTY7YCBpbiBgc3RyaW5nYCB0byB0aGVpclxuICAgICAqIGNvcnJlc3BvbmRpbmcgY2hhcmFjdGVycy5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBObyBvdGhlciBIVE1MIGVudGl0aWVzIGFyZSB1bmVzY2FwZWQuIFRvIHVuZXNjYXBlIGFkZGl0aW9uYWwgSFRNTFxuICAgICAqIGVudGl0aWVzIHVzZSBhIHRoaXJkLXBhcnR5IGxpYnJhcnkgbGlrZSBbX2hlX10oaHR0cHM6Ly9tdGhzLmJlL2hlKS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZz0nJ10gVGhlIHN0cmluZyB0byB1bmVzY2FwZS5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSB1bmVzY2FwZWQgc3RyaW5nLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnVuZXNjYXBlKCdmcmVkLCBiYXJuZXksICZhbXA7IHBlYmJsZXMnKTtcbiAgICAgKiAvLyA9PiAnZnJlZCwgYmFybmV5LCAmIHBlYmJsZXMnXG4gICAgICovXG4gICAgZnVuY3Rpb24gdW5lc2NhcGUoc3RyaW5nKSB7XG4gICAgICBzdHJpbmcgPSBiYXNlVG9TdHJpbmcoc3RyaW5nKTtcbiAgICAgIHJldHVybiAoc3RyaW5nICYmIHJlSGFzRXNjYXBlZEh0bWwudGVzdChzdHJpbmcpKVxuICAgICAgICA/IHN0cmluZy5yZXBsYWNlKHJlRXNjYXBlZEh0bWwsIHVuZXNjYXBlSHRtbENoYXIpXG4gICAgICAgIDogc3RyaW5nO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNwbGl0cyBgc3RyaW5nYCBpbnRvIGFuIGFycmF5IG9mIGl0cyB3b3Jkcy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZz0nJ10gVGhlIHN0cmluZyB0byBpbnNwZWN0LlxuICAgICAqIEBwYXJhbSB7UmVnRXhwfHN0cmluZ30gW3BhdHRlcm5dIFRoZSBwYXR0ZXJuIHRvIG1hdGNoIHdvcmRzLlxuICAgICAqIEBwYXJhbS0ge09iamVjdH0gW2d1YXJkXSBFbmFibGVzIHVzZSBhcyBhIGNhbGxiYWNrIGZvciBmdW5jdGlvbnMgbGlrZSBgXy5tYXBgLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgd29yZHMgb2YgYHN0cmluZ2AuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ud29yZHMoJ2ZyZWQsIGJhcm5leSwgJiBwZWJibGVzJyk7XG4gICAgICogLy8gPT4gWydmcmVkJywgJ2Jhcm5leScsICdwZWJibGVzJ11cbiAgICAgKlxuICAgICAqIF8ud29yZHMoJ2ZyZWQsIGJhcm5leSwgJiBwZWJibGVzJywgL1teLCBdKy9nKTtcbiAgICAgKiAvLyA9PiBbJ2ZyZWQnLCAnYmFybmV5JywgJyYnLCAncGViYmxlcyddXG4gICAgICovXG4gICAgZnVuY3Rpb24gd29yZHMoc3RyaW5nLCBwYXR0ZXJuLCBndWFyZCkge1xuICAgICAgaWYgKGd1YXJkICYmIGlzSXRlcmF0ZWVDYWxsKHN0cmluZywgcGF0dGVybiwgZ3VhcmQpKSB7XG4gICAgICAgIHBhdHRlcm4gPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICBzdHJpbmcgPSBiYXNlVG9TdHJpbmcoc3RyaW5nKTtcbiAgICAgIHJldHVybiBzdHJpbmcubWF0Y2gocGF0dGVybiB8fCByZVdvcmRzKSB8fCBbXTtcbiAgICB9XG5cbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAvKipcbiAgICAgKiBBdHRlbXB0cyB0byBpbnZva2UgYGZ1bmNgLCByZXR1cm5pbmcgZWl0aGVyIHRoZSByZXN1bHQgb3IgdGhlIGNhdWdodCBlcnJvclxuICAgICAqIG9iamVjdC4gQW55IGFkZGl0aW9uYWwgYXJndW1lbnRzIGFyZSBwcm92aWRlZCB0byBgZnVuY2Agd2hlbiBpdCBpcyBpbnZva2VkLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFV0aWxpdHlcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBhdHRlbXB0LlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBgZnVuY2AgcmVzdWx0IG9yIGVycm9yIG9iamVjdC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogLy8gYXZvaWQgdGhyb3dpbmcgZXJyb3JzIGZvciBpbnZhbGlkIHNlbGVjdG9yc1xuICAgICAqIHZhciBlbGVtZW50cyA9IF8uYXR0ZW1wdChmdW5jdGlvbihzZWxlY3Rvcikge1xuICAgICAqICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xuICAgICAqIH0sICc+Xz4nKTtcbiAgICAgKlxuICAgICAqIGlmIChfLmlzRXJyb3IoZWxlbWVudHMpKSB7XG4gICAgICogICBlbGVtZW50cyA9IFtdO1xuICAgICAqIH1cbiAgICAgKi9cbiAgICB2YXIgYXR0ZW1wdCA9IHJlc3RQYXJhbShmdW5jdGlvbihmdW5jLCBhcmdzKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gZnVuYy5hcHBseSh1bmRlZmluZWQsIGFyZ3MpO1xuICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgIHJldHVybiBpc0Vycm9yKGUpID8gZSA6IG5ldyBFcnJvcihlKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGludm9rZXMgYGZ1bmNgIHdpdGggdGhlIGB0aGlzYCBiaW5kaW5nIG9mIGB0aGlzQXJnYFxuICAgICAqIGFuZCBhcmd1bWVudHMgb2YgdGhlIGNyZWF0ZWQgZnVuY3Rpb24uIElmIGBmdW5jYCBpcyBhIHByb3BlcnR5IG5hbWUgdGhlXG4gICAgICogY3JlYXRlZCBjYWxsYmFjayByZXR1cm5zIHRoZSBwcm9wZXJ0eSB2YWx1ZSBmb3IgYSBnaXZlbiBlbGVtZW50LiBJZiBgZnVuY2BcbiAgICAgKiBpcyBhbiBvYmplY3QgdGhlIGNyZWF0ZWQgY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgY29udGFpblxuICAgICAqIHRoZSBlcXVpdmFsZW50IG9iamVjdCBwcm9wZXJ0aWVzLCBvdGhlcndpc2UgaXQgcmV0dXJucyBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGFsaWFzIGl0ZXJhdGVlXG4gICAgICogQGNhdGVnb3J5IFV0aWxpdHlcbiAgICAgKiBAcGFyYW0geyp9IFtmdW5jPV8uaWRlbnRpdHldIFRoZSB2YWx1ZSB0byBjb252ZXJ0IHRvIGEgY2FsbGJhY2suXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBmdW5jYC5cbiAgICAgKiBAcGFyYW0tIHtPYmplY3R9IFtndWFyZF0gRW5hYmxlcyB1c2UgYXMgYSBjYWxsYmFjayBmb3IgZnVuY3Rpb25zIGxpa2UgYF8ubWFwYC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIGNhbGxiYWNrLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgdXNlcnMgPSBbXG4gICAgICogICB7ICd1c2VyJzogJ2Jhcm5leScsICdhZ2UnOiAzNiB9LFxuICAgICAqICAgeyAndXNlcic6ICdmcmVkJywgICAnYWdlJzogNDAgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiAvLyB3cmFwIHRvIGNyZWF0ZSBjdXN0b20gY2FsbGJhY2sgc2hvcnRoYW5kc1xuICAgICAqIF8uY2FsbGJhY2sgPSBfLndyYXAoXy5jYWxsYmFjaywgZnVuY3Rpb24oY2FsbGJhY2ssIGZ1bmMsIHRoaXNBcmcpIHtcbiAgICAgKiAgIHZhciBtYXRjaCA9IC9eKC4rPylfXyhbZ2xddCkoLispJC8uZXhlYyhmdW5jKTtcbiAgICAgKiAgIGlmICghbWF0Y2gpIHtcbiAgICAgKiAgICAgcmV0dXJuIGNhbGxiYWNrKGZ1bmMsIHRoaXNBcmcpO1xuICAgICAqICAgfVxuICAgICAqICAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuICAgICAqICAgICByZXR1cm4gbWF0Y2hbMl0gPT0gJ2d0J1xuICAgICAqICAgICAgID8gb2JqZWN0W21hdGNoWzFdXSA+IG1hdGNoWzNdXG4gICAgICogICAgICAgOiBvYmplY3RbbWF0Y2hbMV1dIDwgbWF0Y2hbM107XG4gICAgICogICB9O1xuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogXy5maWx0ZXIodXNlcnMsICdhZ2VfX2d0MzYnKTtcbiAgICAgKiAvLyA9PiBbeyAndXNlcic6ICdmcmVkJywgJ2FnZSc6IDQwIH1dXG4gICAgICovXG4gICAgZnVuY3Rpb24gY2FsbGJhY2soZnVuYywgdGhpc0FyZywgZ3VhcmQpIHtcbiAgICAgIGlmIChndWFyZCAmJiBpc0l0ZXJhdGVlQ2FsbChmdW5jLCB0aGlzQXJnLCBndWFyZCkpIHtcbiAgICAgICAgdGhpc0FyZyA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBpc09iamVjdExpa2UoZnVuYylcbiAgICAgICAgPyBtYXRjaGVzKGZ1bmMpXG4gICAgICAgIDogYmFzZUNhbGxiYWNrKGZ1bmMsIHRoaXNBcmcpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYHZhbHVlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBVdGlsaXR5XG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcmV0dXJuIGZyb20gdGhlIG5ldyBmdW5jdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIG9iamVjdCA9IHsgJ3VzZXInOiAnZnJlZCcgfTtcbiAgICAgKiB2YXIgZ2V0dGVyID0gXy5jb25zdGFudChvYmplY3QpO1xuICAgICAqXG4gICAgICogZ2V0dGVyKCkgPT09IG9iamVjdDtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICovXG4gICAgZnVuY3Rpb24gY29uc3RhbnQodmFsdWUpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCByZXR1cm5zIHRoZSBmaXJzdCBhcmd1bWVudCBwcm92aWRlZCB0byBpdC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBVdGlsaXR5XG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBBbnkgdmFsdWUuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgYHZhbHVlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIG9iamVjdCA9IHsgJ3VzZXInOiAnZnJlZCcgfTtcbiAgICAgKlxuICAgICAqIF8uaWRlbnRpdHkob2JqZWN0KSA9PT0gb2JqZWN0O1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpZGVudGl0eSh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IHBlcmZvcm1zIGEgZGVlcCBjb21wYXJpc29uIGJldHdlZW4gYSBnaXZlbiBvYmplY3RcbiAgICAgKiBhbmQgYHNvdXJjZWAsIHJldHVybmluZyBgdHJ1ZWAgaWYgdGhlIGdpdmVuIG9iamVjdCBoYXMgZXF1aXZhbGVudCBwcm9wZXJ0eVxuICAgICAqIHZhbHVlcywgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoaXMgbWV0aG9kIHN1cHBvcnRzIGNvbXBhcmluZyBhcnJheXMsIGJvb2xlYW5zLCBgRGF0ZWAgb2JqZWN0cyxcbiAgICAgKiBudW1iZXJzLCBgT2JqZWN0YCBvYmplY3RzLCByZWdleGVzLCBhbmQgc3RyaW5ncy4gT2JqZWN0cyBhcmUgY29tcGFyZWQgYnlcbiAgICAgKiB0aGVpciBvd24sIG5vdCBpbmhlcml0ZWQsIGVudW1lcmFibGUgcHJvcGVydGllcy4gRm9yIGNvbXBhcmluZyBhIHNpbmdsZVxuICAgICAqIG93biBvciBpbmhlcml0ZWQgcHJvcGVydHkgdmFsdWUgc2VlIGBfLm1hdGNoZXNQcm9wZXJ0eWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgVXRpbGl0eVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgVGhlIG9iamVjdCBvZiBwcm9wZXJ0eSB2YWx1ZXMgdG8gbWF0Y2guXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciB1c2VycyA9IFtcbiAgICAgKiAgIHsgJ3VzZXInOiAnYmFybmV5JywgJ2FnZSc6IDM2LCAnYWN0aXZlJzogdHJ1ZSB9LFxuICAgICAqICAgeyAndXNlcic6ICdmcmVkJywgICAnYWdlJzogNDAsICdhY3RpdmUnOiBmYWxzZSB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIF8uZmlsdGVyKHVzZXJzLCBfLm1hdGNoZXMoeyAnYWdlJzogNDAsICdhY3RpdmUnOiBmYWxzZSB9KSk7XG4gICAgICogLy8gPT4gW3sgJ3VzZXInOiAnZnJlZCcsICdhZ2UnOiA0MCwgJ2FjdGl2ZSc6IGZhbHNlIH1dXG4gICAgICovXG4gICAgZnVuY3Rpb24gbWF0Y2hlcyhzb3VyY2UpIHtcbiAgICAgIHJldHVybiBiYXNlTWF0Y2hlcyhiYXNlQ2xvbmUoc291cmNlLCB0cnVlKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgY29tcGFyZXMgdGhlIHByb3BlcnR5IHZhbHVlIG9mIGBwYXRoYCBvbiBhIGdpdmVuXG4gICAgICogb2JqZWN0IHRvIGB2YWx1ZWAuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVGhpcyBtZXRob2Qgc3VwcG9ydHMgY29tcGFyaW5nIGFycmF5cywgYm9vbGVhbnMsIGBEYXRlYCBvYmplY3RzLFxuICAgICAqIG51bWJlcnMsIGBPYmplY3RgIG9iamVjdHMsIHJlZ2V4ZXMsIGFuZCBzdHJpbmdzLiBPYmplY3RzIGFyZSBjb21wYXJlZCBieVxuICAgICAqIHRoZWlyIG93biwgbm90IGluaGVyaXRlZCwgZW51bWVyYWJsZSBwcm9wZXJ0aWVzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFV0aWxpdHlcbiAgICAgKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuICAgICAqIEBwYXJhbSB7Kn0gc3JjVmFsdWUgVGhlIHZhbHVlIHRvIG1hdGNoLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgdXNlcnMgPSBbXG4gICAgICogICB7ICd1c2VyJzogJ2Jhcm5leScgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAnZnJlZCcgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiBfLmZpbmQodXNlcnMsIF8ubWF0Y2hlc1Byb3BlcnR5KCd1c2VyJywgJ2ZyZWQnKSk7XG4gICAgICogLy8gPT4geyAndXNlcic6ICdmcmVkJyB9XG4gICAgICovXG4gICAgZnVuY3Rpb24gbWF0Y2hlc1Byb3BlcnR5KHBhdGgsIHNyY1ZhbHVlKSB7XG4gICAgICByZXR1cm4gYmFzZU1hdGNoZXNQcm9wZXJ0eShwYXRoLCBiYXNlQ2xvbmUoc3JjVmFsdWUsIHRydWUpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBpbnZva2VzIHRoZSBtZXRob2QgYXQgYHBhdGhgIG9uIGEgZ2l2ZW4gb2JqZWN0LlxuICAgICAqIEFueSBhZGRpdGlvbmFsIGFyZ3VtZW50cyBhcmUgcHJvdmlkZWQgdG8gdGhlIGludm9rZWQgbWV0aG9kLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFV0aWxpdHlcbiAgICAgKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgbWV0aG9kIHRvIGludm9rZS5cbiAgICAgKiBAcGFyYW0gey4uLip9IFthcmdzXSBUaGUgYXJndW1lbnRzIHRvIGludm9rZSB0aGUgbWV0aG9kIHdpdGguXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBvYmplY3RzID0gW1xuICAgICAqICAgeyAnYSc6IHsgJ2InOiB7ICdjJzogXy5jb25zdGFudCgyKSB9IH0gfSxcbiAgICAgKiAgIHsgJ2EnOiB7ICdiJzogeyAnYyc6IF8uY29uc3RhbnQoMSkgfSB9IH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogXy5tYXAob2JqZWN0cywgXy5tZXRob2QoJ2EuYi5jJykpO1xuICAgICAqIC8vID0+IFsyLCAxXVxuICAgICAqXG4gICAgICogXy5pbnZva2UoXy5zb3J0Qnkob2JqZWN0cywgXy5tZXRob2QoWydhJywgJ2InLCAnYyddKSksICdhLmIuYycpO1xuICAgICAqIC8vID0+IFsxLCAyXVxuICAgICAqL1xuICAgIHZhciBtZXRob2QgPSByZXN0UGFyYW0oZnVuY3Rpb24ocGF0aCwgYXJncykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuICAgICAgICByZXR1cm4gaW52b2tlUGF0aChvYmplY3QsIHBhdGgsIGFyZ3MpO1xuICAgICAgfTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBvcHBvc2l0ZSBvZiBgXy5tZXRob2RgOyB0aGlzIG1ldGhvZCBjcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBpbnZva2VzXG4gICAgICogdGhlIG1ldGhvZCBhdCBhIGdpdmVuIHBhdGggb24gYG9iamVjdGAuIEFueSBhZGRpdGlvbmFsIGFyZ3VtZW50cyBhcmVcbiAgICAgKiBwcm92aWRlZCB0byB0aGUgaW52b2tlZCBtZXRob2QuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgVXRpbGl0eVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAgICAgKiBAcGFyYW0gey4uLip9IFthcmdzXSBUaGUgYXJndW1lbnRzIHRvIGludm9rZSB0aGUgbWV0aG9kIHdpdGguXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBhcnJheSA9IF8udGltZXMoMywgXy5jb25zdGFudCksXG4gICAgICogICAgIG9iamVjdCA9IHsgJ2EnOiBhcnJheSwgJ2InOiBhcnJheSwgJ2MnOiBhcnJheSB9O1xuICAgICAqXG4gICAgICogXy5tYXAoWydhWzJdJywgJ2NbMF0nXSwgXy5tZXRob2RPZihvYmplY3QpKTtcbiAgICAgKiAvLyA9PiBbMiwgMF1cbiAgICAgKlxuICAgICAqIF8ubWFwKFtbJ2EnLCAnMiddLCBbJ2MnLCAnMCddXSwgXy5tZXRob2RPZihvYmplY3QpKTtcbiAgICAgKiAvLyA9PiBbMiwgMF1cbiAgICAgKi9cbiAgICB2YXIgbWV0aG9kT2YgPSByZXN0UGFyYW0oZnVuY3Rpb24ob2JqZWN0LCBhcmdzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24ocGF0aCkge1xuICAgICAgICByZXR1cm4gaW52b2tlUGF0aChvYmplY3QsIHBhdGgsIGFyZ3MpO1xuICAgICAgfTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEFkZHMgYWxsIG93biBlbnVtZXJhYmxlIGZ1bmN0aW9uIHByb3BlcnRpZXMgb2YgYSBzb3VyY2Ugb2JqZWN0IHRvIHRoZVxuICAgICAqIGRlc3RpbmF0aW9uIG9iamVjdC4gSWYgYG9iamVjdGAgaXMgYSBmdW5jdGlvbiB0aGVuIG1ldGhvZHMgYXJlIGFkZGVkIHRvXG4gICAgICogaXRzIHByb3RvdHlwZSBhcyB3ZWxsLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFVzZSBgXy5ydW5JbkNvbnRleHRgIHRvIGNyZWF0ZSBhIHByaXN0aW5lIGBsb2Rhc2hgIGZ1bmN0aW9uIHRvXG4gICAgICogYXZvaWQgY29uZmxpY3RzIGNhdXNlZCBieSBtb2RpZnlpbmcgdGhlIG9yaWdpbmFsLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFV0aWxpdHlcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdH0gW29iamVjdD1sb2Rhc2hdIFRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZSBUaGUgb2JqZWN0IG9mIGZ1bmN0aW9ucyB0byBhZGQuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBUaGUgb3B0aW9ucyBvYmplY3QuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5jaGFpbj10cnVlXSBTcGVjaWZ5IHdoZXRoZXIgdGhlIGZ1bmN0aW9ucyBhZGRlZFxuICAgICAqICBhcmUgY2hhaW5hYmxlLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbnxPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGZ1bmN0aW9uIHZvd2VscyhzdHJpbmcpIHtcbiAgICAgKiAgIHJldHVybiBfLmZpbHRlcihzdHJpbmcsIGZ1bmN0aW9uKHYpIHtcbiAgICAgKiAgICAgcmV0dXJuIC9bYWVpb3VdL2kudGVzdCh2KTtcbiAgICAgKiAgIH0pO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIF8ubWl4aW4oeyAndm93ZWxzJzogdm93ZWxzIH0pO1xuICAgICAqIF8udm93ZWxzKCdmcmVkJyk7XG4gICAgICogLy8gPT4gWydlJ11cbiAgICAgKlxuICAgICAqIF8oJ2ZyZWQnKS52b3dlbHMoKS52YWx1ZSgpO1xuICAgICAqIC8vID0+IFsnZSddXG4gICAgICpcbiAgICAgKiBfLm1peGluKHsgJ3Zvd2Vscyc6IHZvd2VscyB9LCB7ICdjaGFpbic6IGZhbHNlIH0pO1xuICAgICAqIF8oJ2ZyZWQnKS52b3dlbHMoKTtcbiAgICAgKiAvLyA9PiBbJ2UnXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1peGluKG9iamVjdCwgc291cmNlLCBvcHRpb25zKSB7XG4gICAgICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XG4gICAgICAgIHZhciBpc09iaiA9IGlzT2JqZWN0KHNvdXJjZSksXG4gICAgICAgICAgICBwcm9wcyA9IGlzT2JqID8ga2V5cyhzb3VyY2UpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgbWV0aG9kTmFtZXMgPSAocHJvcHMgJiYgcHJvcHMubGVuZ3RoKSA/IGJhc2VGdW5jdGlvbnMoc291cmNlLCBwcm9wcykgOiB1bmRlZmluZWQ7XG5cbiAgICAgICAgaWYgKCEobWV0aG9kTmFtZXMgPyBtZXRob2ROYW1lcy5sZW5ndGggOiBpc09iaikpIHtcbiAgICAgICAgICBtZXRob2ROYW1lcyA9IGZhbHNlO1xuICAgICAgICAgIG9wdGlvbnMgPSBzb3VyY2U7XG4gICAgICAgICAgc291cmNlID0gb2JqZWN0O1xuICAgICAgICAgIG9iamVjdCA9IHRoaXM7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICghbWV0aG9kTmFtZXMpIHtcbiAgICAgICAgbWV0aG9kTmFtZXMgPSBiYXNlRnVuY3Rpb25zKHNvdXJjZSwga2V5cyhzb3VyY2UpKTtcbiAgICAgIH1cbiAgICAgIHZhciBjaGFpbiA9IHRydWUsXG4gICAgICAgICAgaW5kZXggPSAtMSxcbiAgICAgICAgICBpc0Z1bmMgPSBpc0Z1bmN0aW9uKG9iamVjdCksXG4gICAgICAgICAgbGVuZ3RoID0gbWV0aG9kTmFtZXMubGVuZ3RoO1xuXG4gICAgICBpZiAob3B0aW9ucyA9PT0gZmFsc2UpIHtcbiAgICAgICAgY2hhaW4gPSBmYWxzZTtcbiAgICAgIH0gZWxzZSBpZiAoaXNPYmplY3Qob3B0aW9ucykgJiYgJ2NoYWluJyBpbiBvcHRpb25zKSB7XG4gICAgICAgIGNoYWluID0gb3B0aW9ucy5jaGFpbjtcbiAgICAgIH1cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHZhciBtZXRob2ROYW1lID0gbWV0aG9kTmFtZXNbaW5kZXhdLFxuICAgICAgICAgICAgZnVuYyA9IHNvdXJjZVttZXRob2ROYW1lXTtcblxuICAgICAgICBvYmplY3RbbWV0aG9kTmFtZV0gPSBmdW5jO1xuICAgICAgICBpZiAoaXNGdW5jKSB7XG4gICAgICAgICAgb2JqZWN0LnByb3RvdHlwZVttZXRob2ROYW1lXSA9IChmdW5jdGlvbihmdW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHZhciBjaGFpbkFsbCA9IHRoaXMuX19jaGFpbl9fO1xuICAgICAgICAgICAgICBpZiAoY2hhaW4gfHwgY2hhaW5BbGwpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gb2JqZWN0KHRoaXMuX193cmFwcGVkX18pLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb25zID0gcmVzdWx0Ll9fYWN0aW9uc19fID0gYXJyYXlDb3B5KHRoaXMuX19hY3Rpb25zX18pO1xuXG4gICAgICAgICAgICAgICAgYWN0aW9ucy5wdXNoKHsgJ2Z1bmMnOiBmdW5jLCAnYXJncyc6IGFyZ3VtZW50cywgJ3RoaXNBcmcnOiBvYmplY3QgfSk7XG4gICAgICAgICAgICAgICAgcmVzdWx0Ll9fY2hhaW5fXyA9IGNoYWluQWxsO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkob2JqZWN0LCBhcnJheVB1c2goW3RoaXMudmFsdWUoKV0sIGFyZ3VtZW50cykpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9KGZ1bmMpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXZlcnRzIHRoZSBgX2AgdmFyaWFibGUgdG8gaXRzIHByZXZpb3VzIHZhbHVlIGFuZCByZXR1cm5zIGEgcmVmZXJlbmNlIHRvXG4gICAgICogdGhlIGBsb2Rhc2hgIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFV0aWxpdHlcbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIGBsb2Rhc2hgIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgbG9kYXNoID0gXy5ub0NvbmZsaWN0KCk7XG4gICAgICovXG4gICAgZnVuY3Rpb24gbm9Db25mbGljdCgpIHtcbiAgICAgIHJvb3QuXyA9IG9sZERhc2g7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIG5vLW9wZXJhdGlvbiBmdW5jdGlvbiB0aGF0IHJldHVybnMgYHVuZGVmaW5lZGAgcmVnYXJkbGVzcyBvZiB0aGVcbiAgICAgKiBhcmd1bWVudHMgaXQgcmVjZWl2ZXMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgVXRpbGl0eVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0ID0geyAndXNlcic6ICdmcmVkJyB9O1xuICAgICAqXG4gICAgICogXy5ub29wKG9iamVjdCkgPT09IHVuZGVmaW5lZDtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICovXG4gICAgZnVuY3Rpb24gbm9vcCgpIHtcbiAgICAgIC8vIE5vIG9wZXJhdGlvbiBwZXJmb3JtZWQuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUgYXQgYHBhdGhgIG9uIGFcbiAgICAgKiBnaXZlbiBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgVXRpbGl0eVxuICAgICAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBwYXRoIFRoZSBwYXRoIG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBvYmplY3RzID0gW1xuICAgICAqICAgeyAnYSc6IHsgJ2InOiB7ICdjJzogMiB9IH0gfSxcbiAgICAgKiAgIHsgJ2EnOiB7ICdiJzogeyAnYyc6IDEgfSB9IH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogXy5tYXAob2JqZWN0cywgXy5wcm9wZXJ0eSgnYS5iLmMnKSk7XG4gICAgICogLy8gPT4gWzIsIDFdXG4gICAgICpcbiAgICAgKiBfLnBsdWNrKF8uc29ydEJ5KG9iamVjdHMsIF8ucHJvcGVydHkoWydhJywgJ2InLCAnYyddKSksICdhLmIuYycpO1xuICAgICAqIC8vID0+IFsxLCAyXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHByb3BlcnR5KHBhdGgpIHtcbiAgICAgIHJldHVybiBpc0tleShwYXRoKSA/IGJhc2VQcm9wZXJ0eShwYXRoKSA6IGJhc2VQcm9wZXJ0eURlZXAocGF0aCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIG9wcG9zaXRlIG9mIGBfLnByb3BlcnR5YDsgdGhpcyBtZXRob2QgY3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJuc1xuICAgICAqIHRoZSBwcm9wZXJ0eSB2YWx1ZSBhdCBhIGdpdmVuIHBhdGggb24gYG9iamVjdGAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgVXRpbGl0eVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGFycmF5ID0gWzAsIDEsIDJdLFxuICAgICAqICAgICBvYmplY3QgPSB7ICdhJzogYXJyYXksICdiJzogYXJyYXksICdjJzogYXJyYXkgfTtcbiAgICAgKlxuICAgICAqIF8ubWFwKFsnYVsyXScsICdjWzBdJ10sIF8ucHJvcGVydHlPZihvYmplY3QpKTtcbiAgICAgKiAvLyA9PiBbMiwgMF1cbiAgICAgKlxuICAgICAqIF8ubWFwKFtbJ2EnLCAnMiddLCBbJ2MnLCAnMCddXSwgXy5wcm9wZXJ0eU9mKG9iamVjdCkpO1xuICAgICAqIC8vID0+IFsyLCAwXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHByb3BlcnR5T2Yob2JqZWN0KSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24ocGF0aCkge1xuICAgICAgICByZXR1cm4gYmFzZUdldChvYmplY3QsIHRvUGF0aChwYXRoKSwgcGF0aCArICcnKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhcnJheSBvZiBudW1iZXJzIChwb3NpdGl2ZSBhbmQvb3IgbmVnYXRpdmUpIHByb2dyZXNzaW5nIGZyb21cbiAgICAgKiBgc3RhcnRgIHVwIHRvLCBidXQgbm90IGluY2x1ZGluZywgYGVuZGAuIElmIGBlbmRgIGlzIG5vdCBzcGVjaWZpZWQgaXQgaXNcbiAgICAgKiBzZXQgdG8gYHN0YXJ0YCB3aXRoIGBzdGFydGAgdGhlbiBzZXQgdG8gYDBgLiBJZiBgZW5kYCBpcyBsZXNzIHRoYW4gYHN0YXJ0YFxuICAgICAqIGEgemVyby1sZW5ndGggcmFuZ2UgaXMgY3JlYXRlZCB1bmxlc3MgYSBuZWdhdGl2ZSBgc3RlcGAgaXMgc3BlY2lmaWVkLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFV0aWxpdHlcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3N0YXJ0PTBdIFRoZSBzdGFydCBvZiB0aGUgcmFuZ2UuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGVuZCBUaGUgZW5kIG9mIHRoZSByYW5nZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3N0ZXA9MV0gVGhlIHZhbHVlIHRvIGluY3JlbWVudCBvciBkZWNyZW1lbnQgYnkuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgYXJyYXkgb2YgbnVtYmVycy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5yYW5nZSg0KTtcbiAgICAgKiAvLyA9PiBbMCwgMSwgMiwgM11cbiAgICAgKlxuICAgICAqIF8ucmFuZ2UoMSwgNSk7XG4gICAgICogLy8gPT4gWzEsIDIsIDMsIDRdXG4gICAgICpcbiAgICAgKiBfLnJhbmdlKDAsIDIwLCA1KTtcbiAgICAgKiAvLyA9PiBbMCwgNSwgMTAsIDE1XVxuICAgICAqXG4gICAgICogXy5yYW5nZSgwLCAtNCwgLTEpO1xuICAgICAqIC8vID0+IFswLCAtMSwgLTIsIC0zXVxuICAgICAqXG4gICAgICogXy5yYW5nZSgxLCA0LCAwKTtcbiAgICAgKiAvLyA9PiBbMSwgMSwgMV1cbiAgICAgKlxuICAgICAqIF8ucmFuZ2UoMCk7XG4gICAgICogLy8gPT4gW11cbiAgICAgKi9cbiAgICBmdW5jdGlvbiByYW5nZShzdGFydCwgZW5kLCBzdGVwKSB7XG4gICAgICBpZiAoc3RlcCAmJiBpc0l0ZXJhdGVlQ2FsbChzdGFydCwgZW5kLCBzdGVwKSkge1xuICAgICAgICBlbmQgPSBzdGVwID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgc3RhcnQgPSArc3RhcnQgfHwgMDtcbiAgICAgIHN0ZXAgPSBzdGVwID09IG51bGwgPyAxIDogKCtzdGVwIHx8IDApO1xuXG4gICAgICBpZiAoZW5kID09IG51bGwpIHtcbiAgICAgICAgZW5kID0gc3RhcnQ7XG4gICAgICAgIHN0YXJ0ID0gMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVuZCA9ICtlbmQgfHwgMDtcbiAgICAgIH1cbiAgICAgIC8vIFVzZSBgQXJyYXkobGVuZ3RoKWAgc28gZW5naW5lcyBsaWtlIENoYWtyYSBhbmQgVjggYXZvaWQgc2xvd2VyIG1vZGVzLlxuICAgICAgLy8gU2VlIGh0dHBzOi8veW91dHUuYmUvWEFxSXBHVThaWmsjdD0xN20yNXMgZm9yIG1vcmUgZGV0YWlscy5cbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IG5hdGl2ZU1heChuYXRpdmVDZWlsKChlbmQgLSBzdGFydCkgLyAoc3RlcCB8fCAxKSksIDApLFxuICAgICAgICAgIHJlc3VsdCA9IEFycmF5KGxlbmd0aCk7XG5cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHJlc3VsdFtpbmRleF0gPSBzdGFydDtcbiAgICAgICAgc3RhcnQgKz0gc3RlcDtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW52b2tlcyB0aGUgaXRlcmF0ZWUgZnVuY3Rpb24gYG5gIHRpbWVzLCByZXR1cm5pbmcgYW4gYXJyYXkgb2YgdGhlIHJlc3VsdHNcbiAgICAgKiBvZiBlYWNoIGludm9jYXRpb24uIFRoZSBgaXRlcmF0ZWVgIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoXG4gICAgICogb25lIGFyZ3VtZW50OyAoaW5kZXgpLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFV0aWxpdHlcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbiBUaGUgbnVtYmVyIG9mIHRpbWVzIHRvIGludm9rZSBgaXRlcmF0ZWVgLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtpdGVyYXRlZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgaXRlcmF0ZWVgLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcmVzdWx0cy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGRpY2VSb2xscyA9IF8udGltZXMoMywgXy5wYXJ0aWFsKF8ucmFuZG9tLCAxLCA2LCBmYWxzZSkpO1xuICAgICAqIC8vID0+IFszLCA2LCA0XVxuICAgICAqXG4gICAgICogXy50aW1lcygzLCBmdW5jdGlvbihuKSB7XG4gICAgICogICBtYWdlLmNhc3RTcGVsbChuKTtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiBpbnZva2VzIGBtYWdlLmNhc3RTcGVsbChuKWAgdGhyZWUgdGltZXMgd2l0aCBgbmAgb2YgYDBgLCBgMWAsIGFuZCBgMmBcbiAgICAgKlxuICAgICAqIF8udGltZXMoMywgZnVuY3Rpb24obikge1xuICAgICAqICAgdGhpcy5jYXN0KG4pO1xuICAgICAqIH0sIG1hZ2UpO1xuICAgICAqIC8vID0+IGFsc28gaW52b2tlcyBgbWFnZS5jYXN0U3BlbGwobilgIHRocmVlIHRpbWVzXG4gICAgICovXG4gICAgZnVuY3Rpb24gdGltZXMobiwgaXRlcmF0ZWUsIHRoaXNBcmcpIHtcbiAgICAgIG4gPSBuYXRpdmVGbG9vcihuKTtcblxuICAgICAgLy8gRXhpdCBlYXJseSB0byBhdm9pZCBhIEpTQyBKSVQgYnVnIGluIFNhZmFyaSA4XG4gICAgICAvLyB3aGVyZSBgQXJyYXkoMClgIGlzIHRyZWF0ZWQgYXMgYEFycmF5KDEpYC5cbiAgICAgIGlmIChuIDwgMSB8fCAhbmF0aXZlSXNGaW5pdGUobikpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgcmVzdWx0ID0gQXJyYXkobmF0aXZlTWluKG4sIE1BWF9BUlJBWV9MRU5HVEgpKTtcblxuICAgICAgaXRlcmF0ZWUgPSBiaW5kQ2FsbGJhY2soaXRlcmF0ZWUsIHRoaXNBcmcsIDEpO1xuICAgICAgd2hpbGUgKCsraW5kZXggPCBuKSB7XG4gICAgICAgIGlmIChpbmRleCA8IE1BWF9BUlJBWV9MRU5HVEgpIHtcbiAgICAgICAgICByZXN1bHRbaW5kZXhdID0gaXRlcmF0ZWUoaW5kZXgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZXJhdGVlKGluZGV4KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZXMgYSB1bmlxdWUgSUQuIElmIGBwcmVmaXhgIGlzIHByb3ZpZGVkIHRoZSBJRCBpcyBhcHBlbmRlZCB0byBpdC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBVdGlsaXR5XG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtwcmVmaXhdIFRoZSB2YWx1ZSB0byBwcmVmaXggdGhlIElEIHdpdGguXG4gICAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgdW5pcXVlIElELlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnVuaXF1ZUlkKCdjb250YWN0XycpO1xuICAgICAqIC8vID0+ICdjb250YWN0XzEwNCdcbiAgICAgKlxuICAgICAqIF8udW5pcXVlSWQoKTtcbiAgICAgKiAvLyA9PiAnMTA1J1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIHVuaXF1ZUlkKHByZWZpeCkge1xuICAgICAgdmFyIGlkID0gKytpZENvdW50ZXI7XG4gICAgICByZXR1cm4gYmFzZVRvU3RyaW5nKHByZWZpeCkgKyBpZDtcbiAgICB9XG5cbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAvKipcbiAgICAgKiBBZGRzIHR3byBudW1iZXJzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE1hdGhcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYXVnZW5kIFRoZSBmaXJzdCBudW1iZXIgdG8gYWRkLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBhZGRlbmQgVGhlIHNlY29uZCBudW1iZXIgdG8gYWRkLlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHN1bS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5hZGQoNiwgNCk7XG4gICAgICogLy8gPT4gMTBcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhZGQoYXVnZW5kLCBhZGRlbmQpIHtcbiAgICAgIHJldHVybiAoK2F1Z2VuZCB8fCAwKSArICgrYWRkZW5kIHx8IDApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZXMgYG5gIHJvdW5kZWQgdXAgdG8gYHByZWNpc2lvbmAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgTWF0aFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBuIFRoZSBudW1iZXIgdG8gcm91bmQgdXAuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtwcmVjaXNpb249MF0gVGhlIHByZWNpc2lvbiB0byByb3VuZCB1cCB0by5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSByb3VuZGVkIHVwIG51bWJlci5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5jZWlsKDQuMDA2KTtcbiAgICAgKiAvLyA9PiA1XG4gICAgICpcbiAgICAgKiBfLmNlaWwoNi4wMDQsIDIpO1xuICAgICAqIC8vID0+IDYuMDFcbiAgICAgKlxuICAgICAqIF8uY2VpbCg2MDQwLCAtMik7XG4gICAgICogLy8gPT4gNjEwMFxuICAgICAqL1xuICAgIHZhciBjZWlsID0gY3JlYXRlUm91bmQoJ2NlaWwnKTtcblxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZXMgYG5gIHJvdW5kZWQgZG93biB0byBgcHJlY2lzaW9uYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBNYXRoXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG4gVGhlIG51bWJlciB0byByb3VuZCBkb3duLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbcHJlY2lzaW9uPTBdIFRoZSBwcmVjaXNpb24gdG8gcm91bmQgZG93biB0by5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSByb3VuZGVkIGRvd24gbnVtYmVyLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmZsb29yKDQuMDA2KTtcbiAgICAgKiAvLyA9PiA0XG4gICAgICpcbiAgICAgKiBfLmZsb29yKDAuMDQ2LCAyKTtcbiAgICAgKiAvLyA9PiAwLjA0XG4gICAgICpcbiAgICAgKiBfLmZsb29yKDQwNjAsIC0yKTtcbiAgICAgKiAvLyA9PiA0MDAwXG4gICAgICovXG4gICAgdmFyIGZsb29yID0gY3JlYXRlUm91bmQoJ2Zsb29yJyk7XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBtYXhpbXVtIHZhbHVlIG9mIGBjb2xsZWN0aW9uYC4gSWYgYGNvbGxlY3Rpb25gIGlzIGVtcHR5IG9yIGZhbHNleVxuICAgICAqIGAtSW5maW5pdHlgIGlzIHJldHVybmVkLiBJZiBhbiBpdGVyYXRlZSBmdW5jdGlvbiBpcyBwcm92aWRlZCBpdCBpcyBpbnZva2VkXG4gICAgICogZm9yIGVhY2ggdmFsdWUgaW4gYGNvbGxlY3Rpb25gIHRvIGdlbmVyYXRlIHRoZSBjcml0ZXJpb24gYnkgd2hpY2ggdGhlIHZhbHVlXG4gICAgICogaXMgcmFua2VkLiBUaGUgYGl0ZXJhdGVlYCBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZVxuICAgICAqIGFyZ3VtZW50czogKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBpdGVyYXRlZWAgdGhlIGNyZWF0ZWQgYF8ucHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhIHZhbHVlIGlzIGFsc28gcHJvdmlkZWQgZm9yIGB0aGlzQXJnYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzUHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSBhIG1hdGNoaW5nIHByb3BlcnR5XG4gICAgICogdmFsdWUsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGl0ZXJhdGVlYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzYCBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuXG4gICAgICogb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgTWF0aFxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbaXRlcmF0ZWVdIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBpdGVyYXRlZWAuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIG1heGltdW0gdmFsdWUuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ubWF4KFs0LCAyLCA4LCA2XSk7XG4gICAgICogLy8gPT4gOFxuICAgICAqXG4gICAgICogXy5tYXgoW10pO1xuICAgICAqIC8vID0+IC1JbmZpbml0eVxuICAgICAqXG4gICAgICogdmFyIHVzZXJzID0gW1xuICAgICAqICAgeyAndXNlcic6ICdiYXJuZXknLCAnYWdlJzogMzYgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAnZnJlZCcsICAgJ2FnZSc6IDQwIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogXy5tYXgodXNlcnMsIGZ1bmN0aW9uKGNocikge1xuICAgICAqICAgcmV0dXJuIGNoci5hZ2U7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4geyAndXNlcic6ICdmcmVkJywgJ2FnZSc6IDQwIH1cbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5wcm9wZXJ0eWAgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5tYXgodXNlcnMsICdhZ2UnKTtcbiAgICAgKiAvLyA9PiB7ICd1c2VyJzogJ2ZyZWQnLCAnYWdlJzogNDAgfVxuICAgICAqL1xuICAgIHZhciBtYXggPSBjcmVhdGVFeHRyZW11bShndCwgTkVHQVRJVkVfSU5GSU5JVFkpO1xuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgbWluaW11bSB2YWx1ZSBvZiBgY29sbGVjdGlvbmAuIElmIGBjb2xsZWN0aW9uYCBpcyBlbXB0eSBvciBmYWxzZXlcbiAgICAgKiBgSW5maW5pdHlgIGlzIHJldHVybmVkLiBJZiBhbiBpdGVyYXRlZSBmdW5jdGlvbiBpcyBwcm92aWRlZCBpdCBpcyBpbnZva2VkXG4gICAgICogZm9yIGVhY2ggdmFsdWUgaW4gYGNvbGxlY3Rpb25gIHRvIGdlbmVyYXRlIHRoZSBjcml0ZXJpb24gYnkgd2hpY2ggdGhlIHZhbHVlXG4gICAgICogaXMgcmFua2VkLiBUaGUgYGl0ZXJhdGVlYCBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZVxuICAgICAqIGFyZ3VtZW50czogKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBpdGVyYXRlZWAgdGhlIGNyZWF0ZWQgYF8ucHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhIHZhbHVlIGlzIGFsc28gcHJvdmlkZWQgZm9yIGB0aGlzQXJnYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzUHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSBhIG1hdGNoaW5nIHByb3BlcnR5XG4gICAgICogdmFsdWUsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGl0ZXJhdGVlYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzYCBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuXG4gICAgICogb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgTWF0aFxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbaXRlcmF0ZWVdIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBpdGVyYXRlZWAuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIG1pbmltdW0gdmFsdWUuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ubWluKFs0LCAyLCA4LCA2XSk7XG4gICAgICogLy8gPT4gMlxuICAgICAqXG4gICAgICogXy5taW4oW10pO1xuICAgICAqIC8vID0+IEluZmluaXR5XG4gICAgICpcbiAgICAgKiB2YXIgdXNlcnMgPSBbXG4gICAgICogICB7ICd1c2VyJzogJ2Jhcm5leScsICdhZ2UnOiAzNiB9LFxuICAgICAqICAgeyAndXNlcic6ICdmcmVkJywgICAnYWdlJzogNDAgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiBfLm1pbih1c2VycywgZnVuY3Rpb24oY2hyKSB7XG4gICAgICogICByZXR1cm4gY2hyLmFnZTtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiB7ICd1c2VyJzogJ2Jhcm5leScsICdhZ2UnOiAzNiB9XG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ucHJvcGVydHlgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8ubWluKHVzZXJzLCAnYWdlJyk7XG4gICAgICogLy8gPT4geyAndXNlcic6ICdiYXJuZXknLCAnYWdlJzogMzYgfVxuICAgICAqL1xuICAgIHZhciBtaW4gPSBjcmVhdGVFeHRyZW11bShsdCwgUE9TSVRJVkVfSU5GSU5JVFkpO1xuXG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlcyBgbmAgcm91bmRlZCB0byBgcHJlY2lzaW9uYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBNYXRoXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG4gVGhlIG51bWJlciB0byByb3VuZC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3ByZWNpc2lvbj0wXSBUaGUgcHJlY2lzaW9uIHRvIHJvdW5kIHRvLlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHJvdW5kZWQgbnVtYmVyLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnJvdW5kKDQuMDA2KTtcbiAgICAgKiAvLyA9PiA0XG4gICAgICpcbiAgICAgKiBfLnJvdW5kKDQuMDA2LCAyKTtcbiAgICAgKiAvLyA9PiA0LjAxXG4gICAgICpcbiAgICAgKiBfLnJvdW5kKDQwNjAsIC0yKTtcbiAgICAgKiAvLyA9PiA0MTAwXG4gICAgICovXG4gICAgdmFyIHJvdW5kID0gY3JlYXRlUm91bmQoJ3JvdW5kJyk7XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBzdW0gb2YgdGhlIHZhbHVlcyBpbiBgY29sbGVjdGlvbmAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgTWF0aFxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbaXRlcmF0ZWVdIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBpdGVyYXRlZWAuXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgc3VtLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnN1bShbNCwgNl0pO1xuICAgICAqIC8vID0+IDEwXG4gICAgICpcbiAgICAgKiBfLnN1bSh7ICdhJzogNCwgJ2InOiA2IH0pO1xuICAgICAqIC8vID0+IDEwXG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0cyA9IFtcbiAgICAgKiAgIHsgJ24nOiA0IH0sXG4gICAgICogICB7ICduJzogNiB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIF8uc3VtKG9iamVjdHMsIGZ1bmN0aW9uKG9iamVjdCkge1xuICAgICAqICAgcmV0dXJuIG9iamVjdC5uO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IDEwXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ucHJvcGVydHlgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8uc3VtKG9iamVjdHMsICduJyk7XG4gICAgICogLy8gPT4gMTBcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzdW0oY29sbGVjdGlvbiwgaXRlcmF0ZWUsIHRoaXNBcmcpIHtcbiAgICAgIGlmICh0aGlzQXJnICYmIGlzSXRlcmF0ZWVDYWxsKGNvbGxlY3Rpb24sIGl0ZXJhdGVlLCB0aGlzQXJnKSkge1xuICAgICAgICBpdGVyYXRlZSA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIGl0ZXJhdGVlID0gZ2V0Q2FsbGJhY2soaXRlcmF0ZWUsIHRoaXNBcmcsIDMpO1xuICAgICAgcmV0dXJuIGl0ZXJhdGVlLmxlbmd0aCA9PSAxXG4gICAgICAgID8gYXJyYXlTdW0oaXNBcnJheShjb2xsZWN0aW9uKSA/IGNvbGxlY3Rpb24gOiB0b0l0ZXJhYmxlKGNvbGxlY3Rpb24pLCBpdGVyYXRlZSlcbiAgICAgICAgOiBiYXNlU3VtKGNvbGxlY3Rpb24sIGl0ZXJhdGVlKTtcbiAgICB9XG5cbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAvLyBFbnN1cmUgd3JhcHBlcnMgYXJlIGluc3RhbmNlcyBvZiBgYmFzZUxvZGFzaGAuXG4gICAgbG9kYXNoLnByb3RvdHlwZSA9IGJhc2VMb2Rhc2gucHJvdG90eXBlO1xuXG4gICAgTG9kYXNoV3JhcHBlci5wcm90b3R5cGUgPSBiYXNlQ3JlYXRlKGJhc2VMb2Rhc2gucHJvdG90eXBlKTtcbiAgICBMb2Rhc2hXcmFwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IExvZGFzaFdyYXBwZXI7XG5cbiAgICBMYXp5V3JhcHBlci5wcm90b3R5cGUgPSBiYXNlQ3JlYXRlKGJhc2VMb2Rhc2gucHJvdG90eXBlKTtcbiAgICBMYXp5V3JhcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBMYXp5V3JhcHBlcjtcblxuICAgIC8vIEFkZCBmdW5jdGlvbnMgdG8gdGhlIGBNYXBgIGNhY2hlLlxuICAgIE1hcENhY2hlLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBtYXBEZWxldGU7XG4gICAgTWFwQ2FjaGUucHJvdG90eXBlLmdldCA9IG1hcEdldDtcbiAgICBNYXBDYWNoZS5wcm90b3R5cGUuaGFzID0gbWFwSGFzO1xuICAgIE1hcENhY2hlLnByb3RvdHlwZS5zZXQgPSBtYXBTZXQ7XG5cbiAgICAvLyBBZGQgZnVuY3Rpb25zIHRvIHRoZSBgU2V0YCBjYWNoZS5cbiAgICBTZXRDYWNoZS5wcm90b3R5cGUucHVzaCA9IGNhY2hlUHVzaDtcblxuICAgIC8vIEFzc2lnbiBjYWNoZSB0byBgXy5tZW1vaXplYC5cbiAgICBtZW1vaXplLkNhY2hlID0gTWFwQ2FjaGU7XG5cbiAgICAvLyBBZGQgZnVuY3Rpb25zIHRoYXQgcmV0dXJuIHdyYXBwZWQgdmFsdWVzIHdoZW4gY2hhaW5pbmcuXG4gICAgbG9kYXNoLmFmdGVyID0gYWZ0ZXI7XG4gICAgbG9kYXNoLmFyeSA9IGFyeTtcbiAgICBsb2Rhc2guYXNzaWduID0gYXNzaWduO1xuICAgIGxvZGFzaC5hdCA9IGF0O1xuICAgIGxvZGFzaC5iZWZvcmUgPSBiZWZvcmU7XG4gICAgbG9kYXNoLmJpbmQgPSBiaW5kO1xuICAgIGxvZGFzaC5iaW5kQWxsID0gYmluZEFsbDtcbiAgICBsb2Rhc2guYmluZEtleSA9IGJpbmRLZXk7XG4gICAgbG9kYXNoLmNhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgbG9kYXNoLmNoYWluID0gY2hhaW47XG4gICAgbG9kYXNoLmNodW5rID0gY2h1bms7XG4gICAgbG9kYXNoLmNvbXBhY3QgPSBjb21wYWN0O1xuICAgIGxvZGFzaC5jb25zdGFudCA9IGNvbnN0YW50O1xuICAgIGxvZGFzaC5jb3VudEJ5ID0gY291bnRCeTtcbiAgICBsb2Rhc2guY3JlYXRlID0gY3JlYXRlO1xuICAgIGxvZGFzaC5jdXJyeSA9IGN1cnJ5O1xuICAgIGxvZGFzaC5jdXJyeVJpZ2h0ID0gY3VycnlSaWdodDtcbiAgICBsb2Rhc2guZGVib3VuY2UgPSBkZWJvdW5jZTtcbiAgICBsb2Rhc2guZGVmYXVsdHMgPSBkZWZhdWx0cztcbiAgICBsb2Rhc2guZGVmYXVsdHNEZWVwID0gZGVmYXVsdHNEZWVwO1xuICAgIGxvZGFzaC5kZWZlciA9IGRlZmVyO1xuICAgIGxvZGFzaC5kZWxheSA9IGRlbGF5O1xuICAgIGxvZGFzaC5kaWZmZXJlbmNlID0gZGlmZmVyZW5jZTtcbiAgICBsb2Rhc2guZHJvcCA9IGRyb3A7XG4gICAgbG9kYXNoLmRyb3BSaWdodCA9IGRyb3BSaWdodDtcbiAgICBsb2Rhc2guZHJvcFJpZ2h0V2hpbGUgPSBkcm9wUmlnaHRXaGlsZTtcbiAgICBsb2Rhc2guZHJvcFdoaWxlID0gZHJvcFdoaWxlO1xuICAgIGxvZGFzaC5maWxsID0gZmlsbDtcbiAgICBsb2Rhc2guZmlsdGVyID0gZmlsdGVyO1xuICAgIGxvZGFzaC5mbGF0dGVuID0gZmxhdHRlbjtcbiAgICBsb2Rhc2guZmxhdHRlbkRlZXAgPSBmbGF0dGVuRGVlcDtcbiAgICBsb2Rhc2guZmxvdyA9IGZsb3c7XG4gICAgbG9kYXNoLmZsb3dSaWdodCA9IGZsb3dSaWdodDtcbiAgICBsb2Rhc2guZm9yRWFjaCA9IGZvckVhY2g7XG4gICAgbG9kYXNoLmZvckVhY2hSaWdodCA9IGZvckVhY2hSaWdodDtcbiAgICBsb2Rhc2guZm9ySW4gPSBmb3JJbjtcbiAgICBsb2Rhc2guZm9ySW5SaWdodCA9IGZvckluUmlnaHQ7XG4gICAgbG9kYXNoLmZvck93biA9IGZvck93bjtcbiAgICBsb2Rhc2guZm9yT3duUmlnaHQgPSBmb3JPd25SaWdodDtcbiAgICBsb2Rhc2guZnVuY3Rpb25zID0gZnVuY3Rpb25zO1xuICAgIGxvZGFzaC5ncm91cEJ5ID0gZ3JvdXBCeTtcbiAgICBsb2Rhc2guaW5kZXhCeSA9IGluZGV4Qnk7XG4gICAgbG9kYXNoLmluaXRpYWwgPSBpbml0aWFsO1xuICAgIGxvZGFzaC5pbnRlcnNlY3Rpb24gPSBpbnRlcnNlY3Rpb247XG4gICAgbG9kYXNoLmludmVydCA9IGludmVydDtcbiAgICBsb2Rhc2guaW52b2tlID0gaW52b2tlO1xuICAgIGxvZGFzaC5rZXlzID0ga2V5cztcbiAgICBsb2Rhc2gua2V5c0luID0ga2V5c0luO1xuICAgIGxvZGFzaC5tYXAgPSBtYXA7XG4gICAgbG9kYXNoLm1hcEtleXMgPSBtYXBLZXlzO1xuICAgIGxvZGFzaC5tYXBWYWx1ZXMgPSBtYXBWYWx1ZXM7XG4gICAgbG9kYXNoLm1hdGNoZXMgPSBtYXRjaGVzO1xuICAgIGxvZGFzaC5tYXRjaGVzUHJvcGVydHkgPSBtYXRjaGVzUHJvcGVydHk7XG4gICAgbG9kYXNoLm1lbW9pemUgPSBtZW1vaXplO1xuICAgIGxvZGFzaC5tZXJnZSA9IG1lcmdlO1xuICAgIGxvZGFzaC5tZXRob2QgPSBtZXRob2Q7XG4gICAgbG9kYXNoLm1ldGhvZE9mID0gbWV0aG9kT2Y7XG4gICAgbG9kYXNoLm1peGluID0gbWl4aW47XG4gICAgbG9kYXNoLm1vZEFyZ3MgPSBtb2RBcmdzO1xuICAgIGxvZGFzaC5uZWdhdGUgPSBuZWdhdGU7XG4gICAgbG9kYXNoLm9taXQgPSBvbWl0O1xuICAgIGxvZGFzaC5vbmNlID0gb25jZTtcbiAgICBsb2Rhc2gucGFpcnMgPSBwYWlycztcbiAgICBsb2Rhc2gucGFydGlhbCA9IHBhcnRpYWw7XG4gICAgbG9kYXNoLnBhcnRpYWxSaWdodCA9IHBhcnRpYWxSaWdodDtcbiAgICBsb2Rhc2gucGFydGl0aW9uID0gcGFydGl0aW9uO1xuICAgIGxvZGFzaC5waWNrID0gcGljaztcbiAgICBsb2Rhc2gucGx1Y2sgPSBwbHVjaztcbiAgICBsb2Rhc2gucHJvcGVydHkgPSBwcm9wZXJ0eTtcbiAgICBsb2Rhc2gucHJvcGVydHlPZiA9IHByb3BlcnR5T2Y7XG4gICAgbG9kYXNoLnB1bGwgPSBwdWxsO1xuICAgIGxvZGFzaC5wdWxsQXQgPSBwdWxsQXQ7XG4gICAgbG9kYXNoLnJhbmdlID0gcmFuZ2U7XG4gICAgbG9kYXNoLnJlYXJnID0gcmVhcmc7XG4gICAgbG9kYXNoLnJlamVjdCA9IHJlamVjdDtcbiAgICBsb2Rhc2gucmVtb3ZlID0gcmVtb3ZlO1xuICAgIGxvZGFzaC5yZXN0ID0gcmVzdDtcbiAgICBsb2Rhc2gucmVzdFBhcmFtID0gcmVzdFBhcmFtO1xuICAgIGxvZGFzaC5zZXQgPSBzZXQ7XG4gICAgbG9kYXNoLnNodWZmbGUgPSBzaHVmZmxlO1xuICAgIGxvZGFzaC5zbGljZSA9IHNsaWNlO1xuICAgIGxvZGFzaC5zb3J0QnkgPSBzb3J0Qnk7XG4gICAgbG9kYXNoLnNvcnRCeUFsbCA9IHNvcnRCeUFsbDtcbiAgICBsb2Rhc2guc29ydEJ5T3JkZXIgPSBzb3J0QnlPcmRlcjtcbiAgICBsb2Rhc2guc3ByZWFkID0gc3ByZWFkO1xuICAgIGxvZGFzaC50YWtlID0gdGFrZTtcbiAgICBsb2Rhc2gudGFrZVJpZ2h0ID0gdGFrZVJpZ2h0O1xuICAgIGxvZGFzaC50YWtlUmlnaHRXaGlsZSA9IHRha2VSaWdodFdoaWxlO1xuICAgIGxvZGFzaC50YWtlV2hpbGUgPSB0YWtlV2hpbGU7XG4gICAgbG9kYXNoLnRhcCA9IHRhcDtcbiAgICBsb2Rhc2gudGhyb3R0bGUgPSB0aHJvdHRsZTtcbiAgICBsb2Rhc2gudGhydSA9IHRocnU7XG4gICAgbG9kYXNoLnRpbWVzID0gdGltZXM7XG4gICAgbG9kYXNoLnRvQXJyYXkgPSB0b0FycmF5O1xuICAgIGxvZGFzaC50b1BsYWluT2JqZWN0ID0gdG9QbGFpbk9iamVjdDtcbiAgICBsb2Rhc2gudHJhbnNmb3JtID0gdHJhbnNmb3JtO1xuICAgIGxvZGFzaC51bmlvbiA9IHVuaW9uO1xuICAgIGxvZGFzaC51bmlxID0gdW5pcTtcbiAgICBsb2Rhc2gudW56aXAgPSB1bnppcDtcbiAgICBsb2Rhc2gudW56aXBXaXRoID0gdW56aXBXaXRoO1xuICAgIGxvZGFzaC52YWx1ZXMgPSB2YWx1ZXM7XG4gICAgbG9kYXNoLnZhbHVlc0luID0gdmFsdWVzSW47XG4gICAgbG9kYXNoLndoZXJlID0gd2hlcmU7XG4gICAgbG9kYXNoLndpdGhvdXQgPSB3aXRob3V0O1xuICAgIGxvZGFzaC53cmFwID0gd3JhcDtcbiAgICBsb2Rhc2gueG9yID0geG9yO1xuICAgIGxvZGFzaC56aXAgPSB6aXA7XG4gICAgbG9kYXNoLnppcE9iamVjdCA9IHppcE9iamVjdDtcbiAgICBsb2Rhc2guemlwV2l0aCA9IHppcFdpdGg7XG5cbiAgICAvLyBBZGQgYWxpYXNlcy5cbiAgICBsb2Rhc2guYmFja2Zsb3cgPSBmbG93UmlnaHQ7XG4gICAgbG9kYXNoLmNvbGxlY3QgPSBtYXA7XG4gICAgbG9kYXNoLmNvbXBvc2UgPSBmbG93UmlnaHQ7XG4gICAgbG9kYXNoLmVhY2ggPSBmb3JFYWNoO1xuICAgIGxvZGFzaC5lYWNoUmlnaHQgPSBmb3JFYWNoUmlnaHQ7XG4gICAgbG9kYXNoLmV4dGVuZCA9IGFzc2lnbjtcbiAgICBsb2Rhc2guaXRlcmF0ZWUgPSBjYWxsYmFjaztcbiAgICBsb2Rhc2gubWV0aG9kcyA9IGZ1bmN0aW9ucztcbiAgICBsb2Rhc2gub2JqZWN0ID0gemlwT2JqZWN0O1xuICAgIGxvZGFzaC5zZWxlY3QgPSBmaWx0ZXI7XG4gICAgbG9kYXNoLnRhaWwgPSByZXN0O1xuICAgIGxvZGFzaC51bmlxdWUgPSB1bmlxO1xuXG4gICAgLy8gQWRkIGZ1bmN0aW9ucyB0byBgbG9kYXNoLnByb3RvdHlwZWAuXG4gICAgbWl4aW4obG9kYXNoLCBsb2Rhc2gpO1xuXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgLy8gQWRkIGZ1bmN0aW9ucyB0aGF0IHJldHVybiB1bndyYXBwZWQgdmFsdWVzIHdoZW4gY2hhaW5pbmcuXG4gICAgbG9kYXNoLmFkZCA9IGFkZDtcbiAgICBsb2Rhc2guYXR0ZW1wdCA9IGF0dGVtcHQ7XG4gICAgbG9kYXNoLmNhbWVsQ2FzZSA9IGNhbWVsQ2FzZTtcbiAgICBsb2Rhc2guY2FwaXRhbGl6ZSA9IGNhcGl0YWxpemU7XG4gICAgbG9kYXNoLmNlaWwgPSBjZWlsO1xuICAgIGxvZGFzaC5jbG9uZSA9IGNsb25lO1xuICAgIGxvZGFzaC5jbG9uZURlZXAgPSBjbG9uZURlZXA7XG4gICAgbG9kYXNoLmRlYnVyciA9IGRlYnVycjtcbiAgICBsb2Rhc2guZW5kc1dpdGggPSBlbmRzV2l0aDtcbiAgICBsb2Rhc2guZXNjYXBlID0gZXNjYXBlO1xuICAgIGxvZGFzaC5lc2NhcGVSZWdFeHAgPSBlc2NhcGVSZWdFeHA7XG4gICAgbG9kYXNoLmV2ZXJ5ID0gZXZlcnk7XG4gICAgbG9kYXNoLmZpbmQgPSBmaW5kO1xuICAgIGxvZGFzaC5maW5kSW5kZXggPSBmaW5kSW5kZXg7XG4gICAgbG9kYXNoLmZpbmRLZXkgPSBmaW5kS2V5O1xuICAgIGxvZGFzaC5maW5kTGFzdCA9IGZpbmRMYXN0O1xuICAgIGxvZGFzaC5maW5kTGFzdEluZGV4ID0gZmluZExhc3RJbmRleDtcbiAgICBsb2Rhc2guZmluZExhc3RLZXkgPSBmaW5kTGFzdEtleTtcbiAgICBsb2Rhc2guZmluZFdoZXJlID0gZmluZFdoZXJlO1xuICAgIGxvZGFzaC5maXJzdCA9IGZpcnN0O1xuICAgIGxvZGFzaC5mbG9vciA9IGZsb29yO1xuICAgIGxvZGFzaC5nZXQgPSBnZXQ7XG4gICAgbG9kYXNoLmd0ID0gZ3Q7XG4gICAgbG9kYXNoLmd0ZSA9IGd0ZTtcbiAgICBsb2Rhc2guaGFzID0gaGFzO1xuICAgIGxvZGFzaC5pZGVudGl0eSA9IGlkZW50aXR5O1xuICAgIGxvZGFzaC5pbmNsdWRlcyA9IGluY2x1ZGVzO1xuICAgIGxvZGFzaC5pbmRleE9mID0gaW5kZXhPZjtcbiAgICBsb2Rhc2guaW5SYW5nZSA9IGluUmFuZ2U7XG4gICAgbG9kYXNoLmlzQXJndW1lbnRzID0gaXNBcmd1bWVudHM7XG4gICAgbG9kYXNoLmlzQXJyYXkgPSBpc0FycmF5O1xuICAgIGxvZGFzaC5pc0Jvb2xlYW4gPSBpc0Jvb2xlYW47XG4gICAgbG9kYXNoLmlzRGF0ZSA9IGlzRGF0ZTtcbiAgICBsb2Rhc2guaXNFbGVtZW50ID0gaXNFbGVtZW50O1xuICAgIGxvZGFzaC5pc0VtcHR5ID0gaXNFbXB0eTtcbiAgICBsb2Rhc2guaXNFcXVhbCA9IGlzRXF1YWw7XG4gICAgbG9kYXNoLmlzRXJyb3IgPSBpc0Vycm9yO1xuICAgIGxvZGFzaC5pc0Zpbml0ZSA9IGlzRmluaXRlO1xuICAgIGxvZGFzaC5pc0Z1bmN0aW9uID0gaXNGdW5jdGlvbjtcbiAgICBsb2Rhc2guaXNNYXRjaCA9IGlzTWF0Y2g7XG4gICAgbG9kYXNoLmlzTmFOID0gaXNOYU47XG4gICAgbG9kYXNoLmlzTmF0aXZlID0gaXNOYXRpdmU7XG4gICAgbG9kYXNoLmlzTnVsbCA9IGlzTnVsbDtcbiAgICBsb2Rhc2guaXNOdW1iZXIgPSBpc051bWJlcjtcbiAgICBsb2Rhc2guaXNPYmplY3QgPSBpc09iamVjdDtcbiAgICBsb2Rhc2guaXNQbGFpbk9iamVjdCA9IGlzUGxhaW5PYmplY3Q7XG4gICAgbG9kYXNoLmlzUmVnRXhwID0gaXNSZWdFeHA7XG4gICAgbG9kYXNoLmlzU3RyaW5nID0gaXNTdHJpbmc7XG4gICAgbG9kYXNoLmlzVHlwZWRBcnJheSA9IGlzVHlwZWRBcnJheTtcbiAgICBsb2Rhc2guaXNVbmRlZmluZWQgPSBpc1VuZGVmaW5lZDtcbiAgICBsb2Rhc2gua2ViYWJDYXNlID0ga2ViYWJDYXNlO1xuICAgIGxvZGFzaC5sYXN0ID0gbGFzdDtcbiAgICBsb2Rhc2gubGFzdEluZGV4T2YgPSBsYXN0SW5kZXhPZjtcbiAgICBsb2Rhc2gubHQgPSBsdDtcbiAgICBsb2Rhc2gubHRlID0gbHRlO1xuICAgIGxvZGFzaC5tYXggPSBtYXg7XG4gICAgbG9kYXNoLm1pbiA9IG1pbjtcbiAgICBsb2Rhc2gubm9Db25mbGljdCA9IG5vQ29uZmxpY3Q7XG4gICAgbG9kYXNoLm5vb3AgPSBub29wO1xuICAgIGxvZGFzaC5ub3cgPSBub3c7XG4gICAgbG9kYXNoLnBhZCA9IHBhZDtcbiAgICBsb2Rhc2gucGFkTGVmdCA9IHBhZExlZnQ7XG4gICAgbG9kYXNoLnBhZFJpZ2h0ID0gcGFkUmlnaHQ7XG4gICAgbG9kYXNoLnBhcnNlSW50ID0gcGFyc2VJbnQ7XG4gICAgbG9kYXNoLnJhbmRvbSA9IHJhbmRvbTtcbiAgICBsb2Rhc2gucmVkdWNlID0gcmVkdWNlO1xuICAgIGxvZGFzaC5yZWR1Y2VSaWdodCA9IHJlZHVjZVJpZ2h0O1xuICAgIGxvZGFzaC5yZXBlYXQgPSByZXBlYXQ7XG4gICAgbG9kYXNoLnJlc3VsdCA9IHJlc3VsdDtcbiAgICBsb2Rhc2gucm91bmQgPSByb3VuZDtcbiAgICBsb2Rhc2gucnVuSW5Db250ZXh0ID0gcnVuSW5Db250ZXh0O1xuICAgIGxvZGFzaC5zaXplID0gc2l6ZTtcbiAgICBsb2Rhc2guc25ha2VDYXNlID0gc25ha2VDYXNlO1xuICAgIGxvZGFzaC5zb21lID0gc29tZTtcbiAgICBsb2Rhc2guc29ydGVkSW5kZXggPSBzb3J0ZWRJbmRleDtcbiAgICBsb2Rhc2guc29ydGVkTGFzdEluZGV4ID0gc29ydGVkTGFzdEluZGV4O1xuICAgIGxvZGFzaC5zdGFydENhc2UgPSBzdGFydENhc2U7XG4gICAgbG9kYXNoLnN0YXJ0c1dpdGggPSBzdGFydHNXaXRoO1xuICAgIGxvZGFzaC5zdW0gPSBzdW07XG4gICAgbG9kYXNoLnRlbXBsYXRlID0gdGVtcGxhdGU7XG4gICAgbG9kYXNoLnRyaW0gPSB0cmltO1xuICAgIGxvZGFzaC50cmltTGVmdCA9IHRyaW1MZWZ0O1xuICAgIGxvZGFzaC50cmltUmlnaHQgPSB0cmltUmlnaHQ7XG4gICAgbG9kYXNoLnRydW5jID0gdHJ1bmM7XG4gICAgbG9kYXNoLnVuZXNjYXBlID0gdW5lc2NhcGU7XG4gICAgbG9kYXNoLnVuaXF1ZUlkID0gdW5pcXVlSWQ7XG4gICAgbG9kYXNoLndvcmRzID0gd29yZHM7XG5cbiAgICAvLyBBZGQgYWxpYXNlcy5cbiAgICBsb2Rhc2guYWxsID0gZXZlcnk7XG4gICAgbG9kYXNoLmFueSA9IHNvbWU7XG4gICAgbG9kYXNoLmNvbnRhaW5zID0gaW5jbHVkZXM7XG4gICAgbG9kYXNoLmVxID0gaXNFcXVhbDtcbiAgICBsb2Rhc2guZGV0ZWN0ID0gZmluZDtcbiAgICBsb2Rhc2guZm9sZGwgPSByZWR1Y2U7XG4gICAgbG9kYXNoLmZvbGRyID0gcmVkdWNlUmlnaHQ7XG4gICAgbG9kYXNoLmhlYWQgPSBmaXJzdDtcbiAgICBsb2Rhc2guaW5jbHVkZSA9IGluY2x1ZGVzO1xuICAgIGxvZGFzaC5pbmplY3QgPSByZWR1Y2U7XG5cbiAgICBtaXhpbihsb2Rhc2gsIChmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzb3VyY2UgPSB7fTtcbiAgICAgIGJhc2VGb3JPd24obG9kYXNoLCBmdW5jdGlvbihmdW5jLCBtZXRob2ROYW1lKSB7XG4gICAgICAgIGlmICghbG9kYXNoLnByb3RvdHlwZVttZXRob2ROYW1lXSkge1xuICAgICAgICAgIHNvdXJjZVttZXRob2ROYW1lXSA9IGZ1bmM7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHNvdXJjZTtcbiAgICB9KCkpLCBmYWxzZSk7XG5cbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAvLyBBZGQgZnVuY3Rpb25zIGNhcGFibGUgb2YgcmV0dXJuaW5nIHdyYXBwZWQgYW5kIHVud3JhcHBlZCB2YWx1ZXMgd2hlbiBjaGFpbmluZy5cbiAgICBsb2Rhc2guc2FtcGxlID0gc2FtcGxlO1xuXG4gICAgbG9kYXNoLnByb3RvdHlwZS5zYW1wbGUgPSBmdW5jdGlvbihuKSB7XG4gICAgICBpZiAoIXRoaXMuX19jaGFpbl9fICYmIG4gPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gc2FtcGxlKHRoaXMudmFsdWUoKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy50aHJ1KGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBzYW1wbGUodmFsdWUsIG4pO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgIC8qKlxuICAgICAqIFRoZSBzZW1hbnRpYyB2ZXJzaW9uIG51bWJlci5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEB0eXBlIHN0cmluZ1xuICAgICAqL1xuICAgIGxvZGFzaC5WRVJTSU9OID0gVkVSU0lPTjtcblxuICAgIC8vIEFzc2lnbiBkZWZhdWx0IHBsYWNlaG9sZGVycy5cbiAgICBhcnJheUVhY2goWydiaW5kJywgJ2JpbmRLZXknLCAnY3VycnknLCAnY3VycnlSaWdodCcsICdwYXJ0aWFsJywgJ3BhcnRpYWxSaWdodCddLCBmdW5jdGlvbihtZXRob2ROYW1lKSB7XG4gICAgICBsb2Rhc2hbbWV0aG9kTmFtZV0ucGxhY2Vob2xkZXIgPSBsb2Rhc2g7XG4gICAgfSk7XG5cbiAgICAvLyBBZGQgYExhenlXcmFwcGVyYCBtZXRob2RzIGZvciBgXy5kcm9wYCBhbmQgYF8udGFrZWAgdmFyaWFudHMuXG4gICAgYXJyYXlFYWNoKFsnZHJvcCcsICd0YWtlJ10sIGZ1bmN0aW9uKG1ldGhvZE5hbWUsIGluZGV4KSB7XG4gICAgICBMYXp5V3JhcHBlci5wcm90b3R5cGVbbWV0aG9kTmFtZV0gPSBmdW5jdGlvbihuKSB7XG4gICAgICAgIHZhciBmaWx0ZXJlZCA9IHRoaXMuX19maWx0ZXJlZF9fO1xuICAgICAgICBpZiAoZmlsdGVyZWQgJiYgIWluZGV4KSB7XG4gICAgICAgICAgcmV0dXJuIG5ldyBMYXp5V3JhcHBlcih0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBuID0gbiA9PSBudWxsID8gMSA6IG5hdGl2ZU1heChuYXRpdmVGbG9vcihuKSB8fCAwLCAwKTtcblxuICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5jbG9uZSgpO1xuICAgICAgICBpZiAoZmlsdGVyZWQpIHtcbiAgICAgICAgICByZXN1bHQuX190YWtlQ291bnRfXyA9IG5hdGl2ZU1pbihyZXN1bHQuX190YWtlQ291bnRfXywgbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0Ll9fdmlld3NfXy5wdXNoKHsgJ3NpemUnOiBuLCAndHlwZSc6IG1ldGhvZE5hbWUgKyAocmVzdWx0Ll9fZGlyX18gPCAwID8gJ1JpZ2h0JyA6ICcnKSB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfTtcblxuICAgICAgTGF6eVdyYXBwZXIucHJvdG90eXBlW21ldGhvZE5hbWUgKyAnUmlnaHQnXSA9IGZ1bmN0aW9uKG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmV2ZXJzZSgpW21ldGhvZE5hbWVdKG4pLnJldmVyc2UoKTtcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICAvLyBBZGQgYExhenlXcmFwcGVyYCBtZXRob2RzIHRoYXQgYWNjZXB0IGFuIGBpdGVyYXRlZWAgdmFsdWUuXG4gICAgYXJyYXlFYWNoKFsnZmlsdGVyJywgJ21hcCcsICd0YWtlV2hpbGUnXSwgZnVuY3Rpb24obWV0aG9kTmFtZSwgaW5kZXgpIHtcbiAgICAgIHZhciB0eXBlID0gaW5kZXggKyAxLFxuICAgICAgICAgIGlzRmlsdGVyID0gdHlwZSAhPSBMQVpZX01BUF9GTEFHO1xuXG4gICAgICBMYXp5V3JhcHBlci5wcm90b3R5cGVbbWV0aG9kTmFtZV0gPSBmdW5jdGlvbihpdGVyYXRlZSwgdGhpc0FyZykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5jbG9uZSgpO1xuICAgICAgICByZXN1bHQuX19pdGVyYXRlZXNfXy5wdXNoKHsgJ2l0ZXJhdGVlJzogZ2V0Q2FsbGJhY2soaXRlcmF0ZWUsIHRoaXNBcmcsIDEpLCAndHlwZSc6IHR5cGUgfSk7XG4gICAgICAgIHJlc3VsdC5fX2ZpbHRlcmVkX18gPSByZXN1bHQuX19maWx0ZXJlZF9fIHx8IGlzRmlsdGVyO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfTtcbiAgICB9KTtcblxuICAgIC8vIEFkZCBgTGF6eVdyYXBwZXJgIG1ldGhvZHMgZm9yIGBfLmZpcnN0YCBhbmQgYF8ubGFzdGAuXG4gICAgYXJyYXlFYWNoKFsnZmlyc3QnLCAnbGFzdCddLCBmdW5jdGlvbihtZXRob2ROYW1lLCBpbmRleCkge1xuICAgICAgdmFyIHRha2VOYW1lID0gJ3Rha2UnICsgKGluZGV4ID8gJ1JpZ2h0JyA6ICcnKTtcblxuICAgICAgTGF6eVdyYXBwZXIucHJvdG90eXBlW21ldGhvZE5hbWVdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzW3Rha2VOYW1lXSgxKS52YWx1ZSgpWzBdO1xuICAgICAgfTtcbiAgICB9KTtcblxuICAgIC8vIEFkZCBgTGF6eVdyYXBwZXJgIG1ldGhvZHMgZm9yIGBfLmluaXRpYWxgIGFuZCBgXy5yZXN0YC5cbiAgICBhcnJheUVhY2goWydpbml0aWFsJywgJ3Jlc3QnXSwgZnVuY3Rpb24obWV0aG9kTmFtZSwgaW5kZXgpIHtcbiAgICAgIHZhciBkcm9wTmFtZSA9ICdkcm9wJyArIChpbmRleCA/ICcnIDogJ1JpZ2h0Jyk7XG5cbiAgICAgIExhenlXcmFwcGVyLnByb3RvdHlwZVttZXRob2ROYW1lXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fX2ZpbHRlcmVkX18gPyBuZXcgTGF6eVdyYXBwZXIodGhpcykgOiB0aGlzW2Ryb3BOYW1lXSgxKTtcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICAvLyBBZGQgYExhenlXcmFwcGVyYCBtZXRob2RzIGZvciBgXy5wbHVja2AgYW5kIGBfLndoZXJlYC5cbiAgICBhcnJheUVhY2goWydwbHVjaycsICd3aGVyZSddLCBmdW5jdGlvbihtZXRob2ROYW1lLCBpbmRleCkge1xuICAgICAgdmFyIG9wZXJhdGlvbk5hbWUgPSBpbmRleCA/ICdmaWx0ZXInIDogJ21hcCcsXG4gICAgICAgICAgY3JlYXRlQ2FsbGJhY2sgPSBpbmRleCA/IGJhc2VNYXRjaGVzIDogcHJvcGVydHk7XG5cbiAgICAgIExhenlXcmFwcGVyLnByb3RvdHlwZVttZXRob2ROYW1lXSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0aGlzW29wZXJhdGlvbk5hbWVdKGNyZWF0ZUNhbGxiYWNrKHZhbHVlKSk7XG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgTGF6eVdyYXBwZXIucHJvdG90eXBlLmNvbXBhY3QgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmZpbHRlcihpZGVudGl0eSk7XG4gICAgfTtcblxuICAgIExhenlXcmFwcGVyLnByb3RvdHlwZS5yZWplY3QgPSBmdW5jdGlvbihwcmVkaWNhdGUsIHRoaXNBcmcpIHtcbiAgICAgIHByZWRpY2F0ZSA9IGdldENhbGxiYWNrKHByZWRpY2F0ZSwgdGhpc0FyZywgMSk7XG4gICAgICByZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuICFwcmVkaWNhdGUodmFsdWUpO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIExhenlXcmFwcGVyLnByb3RvdHlwZS5zbGljZSA9IGZ1bmN0aW9uKHN0YXJ0LCBlbmQpIHtcbiAgICAgIHN0YXJ0ID0gc3RhcnQgPT0gbnVsbCA/IDAgOiAoK3N0YXJ0IHx8IDApO1xuXG4gICAgICB2YXIgcmVzdWx0ID0gdGhpcztcbiAgICAgIGlmIChyZXN1bHQuX19maWx0ZXJlZF9fICYmIChzdGFydCA+IDAgfHwgZW5kIDwgMCkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBMYXp5V3JhcHBlcihyZXN1bHQpO1xuICAgICAgfVxuICAgICAgaWYgKHN0YXJ0IDwgMCkge1xuICAgICAgICByZXN1bHQgPSByZXN1bHQudGFrZVJpZ2h0KC1zdGFydCk7XG4gICAgICB9IGVsc2UgaWYgKHN0YXJ0KSB7XG4gICAgICAgIHJlc3VsdCA9IHJlc3VsdC5kcm9wKHN0YXJ0KTtcbiAgICAgIH1cbiAgICAgIGlmIChlbmQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBlbmQgPSAoK2VuZCB8fCAwKTtcbiAgICAgICAgcmVzdWx0ID0gZW5kIDwgMCA/IHJlc3VsdC5kcm9wUmlnaHQoLWVuZCkgOiByZXN1bHQudGFrZShlbmQgLSBzdGFydCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG5cbiAgICBMYXp5V3JhcHBlci5wcm90b3R5cGUudGFrZVJpZ2h0V2hpbGUgPSBmdW5jdGlvbihwcmVkaWNhdGUsIHRoaXNBcmcpIHtcbiAgICAgIHJldHVybiB0aGlzLnJldmVyc2UoKS50YWtlV2hpbGUocHJlZGljYXRlLCB0aGlzQXJnKS5yZXZlcnNlKCk7XG4gICAgfTtcblxuICAgIExhenlXcmFwcGVyLnByb3RvdHlwZS50b0FycmF5ID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy50YWtlKFBPU0lUSVZFX0lORklOSVRZKTtcbiAgICB9O1xuXG4gICAgLy8gQWRkIGBMYXp5V3JhcHBlcmAgbWV0aG9kcyB0byBgbG9kYXNoLnByb3RvdHlwZWAuXG4gICAgYmFzZUZvck93bihMYXp5V3JhcHBlci5wcm90b3R5cGUsIGZ1bmN0aW9uKGZ1bmMsIG1ldGhvZE5hbWUpIHtcbiAgICAgIHZhciBjaGVja0l0ZXJhdGVlID0gL14oPzpmaWx0ZXJ8bWFwfHJlamVjdCl8V2hpbGUkLy50ZXN0KG1ldGhvZE5hbWUpLFxuICAgICAgICAgIHJldFVud3JhcHBlZCA9IC9eKD86Zmlyc3R8bGFzdCkkLy50ZXN0KG1ldGhvZE5hbWUpLFxuICAgICAgICAgIGxvZGFzaEZ1bmMgPSBsb2Rhc2hbcmV0VW53cmFwcGVkID8gKCd0YWtlJyArIChtZXRob2ROYW1lID09ICdsYXN0JyA/ICdSaWdodCcgOiAnJykpIDogbWV0aG9kTmFtZV07XG5cbiAgICAgIGlmICghbG9kYXNoRnVuYykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBsb2Rhc2gucHJvdG90eXBlW21ldGhvZE5hbWVdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBhcmdzID0gcmV0VW53cmFwcGVkID8gWzFdIDogYXJndW1lbnRzLFxuICAgICAgICAgICAgY2hhaW5BbGwgPSB0aGlzLl9fY2hhaW5fXyxcbiAgICAgICAgICAgIHZhbHVlID0gdGhpcy5fX3dyYXBwZWRfXyxcbiAgICAgICAgICAgIGlzSHlicmlkID0gISF0aGlzLl9fYWN0aW9uc19fLmxlbmd0aCxcbiAgICAgICAgICAgIGlzTGF6eSA9IHZhbHVlIGluc3RhbmNlb2YgTGF6eVdyYXBwZXIsXG4gICAgICAgICAgICBpdGVyYXRlZSA9IGFyZ3NbMF0sXG4gICAgICAgICAgICB1c2VMYXp5ID0gaXNMYXp5IHx8IGlzQXJyYXkodmFsdWUpO1xuXG4gICAgICAgIGlmICh1c2VMYXp5ICYmIGNoZWNrSXRlcmF0ZWUgJiYgdHlwZW9mIGl0ZXJhdGVlID09ICdmdW5jdGlvbicgJiYgaXRlcmF0ZWUubGVuZ3RoICE9IDEpIHtcbiAgICAgICAgICAvLyBBdm9pZCBsYXp5IHVzZSBpZiB0aGUgaXRlcmF0ZWUgaGFzIGEgXCJsZW5ndGhcIiB2YWx1ZSBvdGhlciB0aGFuIGAxYC5cbiAgICAgICAgICBpc0xhenkgPSB1c2VMYXp5ID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGludGVyY2VwdG9yID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gKHJldFVud3JhcHBlZCAmJiBjaGFpbkFsbClcbiAgICAgICAgICAgID8gbG9kYXNoRnVuYyh2YWx1ZSwgMSlbMF1cbiAgICAgICAgICAgIDogbG9kYXNoRnVuYy5hcHBseSh1bmRlZmluZWQsIGFycmF5UHVzaChbdmFsdWVdLCBhcmdzKSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGFjdGlvbiA9IHsgJ2Z1bmMnOiB0aHJ1LCAnYXJncyc6IFtpbnRlcmNlcHRvcl0sICd0aGlzQXJnJzogdW5kZWZpbmVkIH0sXG4gICAgICAgICAgICBvbmx5TGF6eSA9IGlzTGF6eSAmJiAhaXNIeWJyaWQ7XG5cbiAgICAgICAgaWYgKHJldFVud3JhcHBlZCAmJiAhY2hhaW5BbGwpIHtcbiAgICAgICAgICBpZiAob25seUxhenkpIHtcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUuY2xvbmUoKTtcbiAgICAgICAgICAgIHZhbHVlLl9fYWN0aW9uc19fLnB1c2goYWN0aW9uKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jLmNhbGwodmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbG9kYXNoRnVuYy5jYWxsKHVuZGVmaW5lZCwgdGhpcy52YWx1ZSgpKVswXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXJldFVud3JhcHBlZCAmJiB1c2VMYXp5KSB7XG4gICAgICAgICAgdmFsdWUgPSBvbmx5TGF6eSA/IHZhbHVlIDogbmV3IExhenlXcmFwcGVyKHRoaXMpO1xuICAgICAgICAgIHZhciByZXN1bHQgPSBmdW5jLmFwcGx5KHZhbHVlLCBhcmdzKTtcbiAgICAgICAgICByZXN1bHQuX19hY3Rpb25zX18ucHVzaChhY3Rpb24pO1xuICAgICAgICAgIHJldHVybiBuZXcgTG9kYXNoV3JhcHBlcihyZXN1bHQsIGNoYWluQWxsKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy50aHJ1KGludGVyY2VwdG9yKTtcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICAvLyBBZGQgYEFycmF5YCBhbmQgYFN0cmluZ2AgbWV0aG9kcyB0byBgbG9kYXNoLnByb3RvdHlwZWAuXG4gICAgYXJyYXlFYWNoKFsnam9pbicsICdwb3AnLCAncHVzaCcsICdyZXBsYWNlJywgJ3NoaWZ0JywgJ3NvcnQnLCAnc3BsaWNlJywgJ3NwbGl0JywgJ3Vuc2hpZnQnXSwgZnVuY3Rpb24obWV0aG9kTmFtZSkge1xuICAgICAgdmFyIGZ1bmMgPSAoL14oPzpyZXBsYWNlfHNwbGl0KSQvLnRlc3QobWV0aG9kTmFtZSkgPyBzdHJpbmdQcm90byA6IGFycmF5UHJvdG8pW21ldGhvZE5hbWVdLFxuICAgICAgICAgIGNoYWluTmFtZSA9IC9eKD86cHVzaHxzb3J0fHVuc2hpZnQpJC8udGVzdChtZXRob2ROYW1lKSA/ICd0YXAnIDogJ3RocnUnLFxuICAgICAgICAgIHJldFVud3JhcHBlZCA9IC9eKD86am9pbnxwb3B8cmVwbGFjZXxzaGlmdCkkLy50ZXN0KG1ldGhvZE5hbWUpO1xuXG4gICAgICBsb2Rhc2gucHJvdG90eXBlW21ldGhvZE5hbWVdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgICBpZiAocmV0VW53cmFwcGVkICYmICF0aGlzLl9fY2hhaW5fXykge1xuICAgICAgICAgIHJldHVybiBmdW5jLmFwcGx5KHRoaXMudmFsdWUoKSwgYXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXNbY2hhaW5OYW1lXShmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgIHJldHVybiBmdW5jLmFwcGx5KHZhbHVlLCBhcmdzKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgLy8gTWFwIG1pbmlmaWVkIGZ1bmN0aW9uIG5hbWVzIHRvIHRoZWlyIHJlYWwgbmFtZXMuXG4gICAgYmFzZUZvck93bihMYXp5V3JhcHBlci5wcm90b3R5cGUsIGZ1bmN0aW9uKGZ1bmMsIG1ldGhvZE5hbWUpIHtcbiAgICAgIHZhciBsb2Rhc2hGdW5jID0gbG9kYXNoW21ldGhvZE5hbWVdO1xuICAgICAgaWYgKGxvZGFzaEZ1bmMpIHtcbiAgICAgICAgdmFyIGtleSA9IGxvZGFzaEZ1bmMubmFtZSxcbiAgICAgICAgICAgIG5hbWVzID0gcmVhbE5hbWVzW2tleV0gfHwgKHJlYWxOYW1lc1trZXldID0gW10pO1xuXG4gICAgICAgIG5hbWVzLnB1c2goeyAnbmFtZSc6IG1ldGhvZE5hbWUsICdmdW5jJzogbG9kYXNoRnVuYyB9KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJlYWxOYW1lc1tjcmVhdGVIeWJyaWRXcmFwcGVyKHVuZGVmaW5lZCwgQklORF9LRVlfRkxBRykubmFtZV0gPSBbeyAnbmFtZSc6ICd3cmFwcGVyJywgJ2Z1bmMnOiB1bmRlZmluZWQgfV07XG5cbiAgICAvLyBBZGQgZnVuY3Rpb25zIHRvIHRoZSBsYXp5IHdyYXBwZXIuXG4gICAgTGF6eVdyYXBwZXIucHJvdG90eXBlLmNsb25lID0gbGF6eUNsb25lO1xuICAgIExhenlXcmFwcGVyLnByb3RvdHlwZS5yZXZlcnNlID0gbGF6eVJldmVyc2U7XG4gICAgTGF6eVdyYXBwZXIucHJvdG90eXBlLnZhbHVlID0gbGF6eVZhbHVlO1xuXG4gICAgLy8gQWRkIGNoYWluaW5nIGZ1bmN0aW9ucyB0byB0aGUgYGxvZGFzaGAgd3JhcHBlci5cbiAgICBsb2Rhc2gucHJvdG90eXBlLmNoYWluID0gd3JhcHBlckNoYWluO1xuICAgIGxvZGFzaC5wcm90b3R5cGUuY29tbWl0ID0gd3JhcHBlckNvbW1pdDtcbiAgICBsb2Rhc2gucHJvdG90eXBlLmNvbmNhdCA9IHdyYXBwZXJDb25jYXQ7XG4gICAgbG9kYXNoLnByb3RvdHlwZS5wbGFudCA9IHdyYXBwZXJQbGFudDtcbiAgICBsb2Rhc2gucHJvdG90eXBlLnJldmVyc2UgPSB3cmFwcGVyUmV2ZXJzZTtcbiAgICBsb2Rhc2gucHJvdG90eXBlLnRvU3RyaW5nID0gd3JhcHBlclRvU3RyaW5nO1xuICAgIGxvZGFzaC5wcm90b3R5cGUucnVuID0gbG9kYXNoLnByb3RvdHlwZS50b0pTT04gPSBsb2Rhc2gucHJvdG90eXBlLnZhbHVlT2YgPSBsb2Rhc2gucHJvdG90eXBlLnZhbHVlID0gd3JhcHBlclZhbHVlO1xuXG4gICAgLy8gQWRkIGZ1bmN0aW9uIGFsaWFzZXMgdG8gdGhlIGBsb2Rhc2hgIHdyYXBwZXIuXG4gICAgbG9kYXNoLnByb3RvdHlwZS5jb2xsZWN0ID0gbG9kYXNoLnByb3RvdHlwZS5tYXA7XG4gICAgbG9kYXNoLnByb3RvdHlwZS5oZWFkID0gbG9kYXNoLnByb3RvdHlwZS5maXJzdDtcbiAgICBsb2Rhc2gucHJvdG90eXBlLnNlbGVjdCA9IGxvZGFzaC5wcm90b3R5cGUuZmlsdGVyO1xuICAgIGxvZGFzaC5wcm90b3R5cGUudGFpbCA9IGxvZGFzaC5wcm90b3R5cGUucmVzdDtcblxuICAgIHJldHVybiBsb2Rhc2g7XG4gIH1cblxuICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAvLyBFeHBvcnQgbG9kYXNoLlxuICB2YXIgXyA9IHJ1bkluQ29udGV4dCgpO1xuXG4gIC8vIFNvbWUgQU1EIGJ1aWxkIG9wdGltaXplcnMgbGlrZSByLmpzIGNoZWNrIGZvciBjb25kaXRpb24gcGF0dGVybnMgbGlrZSB0aGUgZm9sbG93aW5nOlxuICBpZiAodHlwZW9mIGRlZmluZSA9PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBkZWZpbmUuYW1kID09ICdvYmplY3QnICYmIGRlZmluZS5hbWQpIHtcbiAgICAvLyBFeHBvc2UgbG9kYXNoIHRvIHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gYW4gQU1EIGxvYWRlciBpcyBwcmVzZW50IHRvIGF2b2lkXG4gICAgLy8gZXJyb3JzIGluIGNhc2VzIHdoZXJlIGxvZGFzaCBpcyBsb2FkZWQgYnkgYSBzY3JpcHQgdGFnIGFuZCBub3QgaW50ZW5kZWRcbiAgICAvLyBhcyBhbiBBTUQgbW9kdWxlLiBTZWUgaHR0cDovL3JlcXVpcmVqcy5vcmcvZG9jcy9lcnJvcnMuaHRtbCNtaXNtYXRjaCBmb3JcbiAgICAvLyBtb3JlIGRldGFpbHMuXG4gICAgcm9vdC5fID0gXztcblxuICAgIC8vIERlZmluZSBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlIHNvLCB0aHJvdWdoIHBhdGggbWFwcGluZywgaXQgY2FuIGJlXG4gICAgLy8gcmVmZXJlbmNlZCBhcyB0aGUgXCJ1bmRlcnNjb3JlXCIgbW9kdWxlLlxuICAgIGRlZmluZShmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBfO1xuICAgIH0pO1xuICB9XG4gIC8vIENoZWNrIGZvciBgZXhwb3J0c2AgYWZ0ZXIgYGRlZmluZWAgaW4gY2FzZSBhIGJ1aWxkIG9wdGltaXplciBhZGRzIGFuIGBleHBvcnRzYCBvYmplY3QuXG4gIGVsc2UgaWYgKGZyZWVFeHBvcnRzICYmIGZyZWVNb2R1bGUpIHtcbiAgICAvLyBFeHBvcnQgZm9yIE5vZGUuanMgb3IgUmluZ29KUy5cbiAgICBpZiAobW9kdWxlRXhwb3J0cykge1xuICAgICAgKGZyZWVNb2R1bGUuZXhwb3J0cyA9IF8pLl8gPSBfO1xuICAgIH1cbiAgICAvLyBFeHBvcnQgZm9yIFJoaW5vIHdpdGggQ29tbW9uSlMgc3VwcG9ydC5cbiAgICBlbHNlIHtcbiAgICAgIGZyZWVFeHBvcnRzLl8gPSBfO1xuICAgIH1cbiAgfVxuICBlbHNlIHtcbiAgICAvLyBFeHBvcnQgZm9yIGEgYnJvd3NlciBvciBSaGluby5cbiAgICByb290Ll8gPSBfO1xuICB9XG59LmNhbGwodGhpcykpO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vbGliJylcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGFzYXAgPSByZXF1aXJlKCdhc2FwL3JhdycpO1xuXG5mdW5jdGlvbiBub29wKCkge31cblxuLy8gU3RhdGVzOlxuLy9cbi8vIDAgLSBwZW5kaW5nXG4vLyAxIC0gZnVsZmlsbGVkIHdpdGggX3ZhbHVlXG4vLyAyIC0gcmVqZWN0ZWQgd2l0aCBfdmFsdWVcbi8vIDMgLSBhZG9wdGVkIHRoZSBzdGF0ZSBvZiBhbm90aGVyIHByb21pc2UsIF92YWx1ZVxuLy9cbi8vIG9uY2UgdGhlIHN0YXRlIGlzIG5vIGxvbmdlciBwZW5kaW5nICgwKSBpdCBpcyBpbW11dGFibGVcblxuLy8gQWxsIGBfYCBwcmVmaXhlZCBwcm9wZXJ0aWVzIHdpbGwgYmUgcmVkdWNlZCB0byBgX3tyYW5kb20gbnVtYmVyfWBcbi8vIGF0IGJ1aWxkIHRpbWUgdG8gb2JmdXNjYXRlIHRoZW0gYW5kIGRpc2NvdXJhZ2UgdGhlaXIgdXNlLlxuLy8gV2UgZG9uJ3QgdXNlIHN5bWJvbHMgb3IgT2JqZWN0LmRlZmluZVByb3BlcnR5IHRvIGZ1bGx5IGhpZGUgdGhlbVxuLy8gYmVjYXVzZSB0aGUgcGVyZm9ybWFuY2UgaXNuJ3QgZ29vZCBlbm91Z2guXG5cblxuLy8gdG8gYXZvaWQgdXNpbmcgdHJ5L2NhdGNoIGluc2lkZSBjcml0aWNhbCBmdW5jdGlvbnMsIHdlXG4vLyBleHRyYWN0IHRoZW0gdG8gaGVyZS5cbnZhciBMQVNUX0VSUk9SID0gbnVsbDtcbnZhciBJU19FUlJPUiA9IHt9O1xuZnVuY3Rpb24gZ2V0VGhlbihvYmopIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gb2JqLnRoZW47XG4gIH0gY2F0Y2ggKGV4KSB7XG4gICAgTEFTVF9FUlJPUiA9IGV4O1xuICAgIHJldHVybiBJU19FUlJPUjtcbiAgfVxufVxuXG5mdW5jdGlvbiB0cnlDYWxsT25lKGZuLCBhKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGZuKGEpO1xuICB9IGNhdGNoIChleCkge1xuICAgIExBU1RfRVJST1IgPSBleDtcbiAgICByZXR1cm4gSVNfRVJST1I7XG4gIH1cbn1cbmZ1bmN0aW9uIHRyeUNhbGxUd28oZm4sIGEsIGIpIHtcbiAgdHJ5IHtcbiAgICBmbihhLCBiKTtcbiAgfSBjYXRjaCAoZXgpIHtcbiAgICBMQVNUX0VSUk9SID0gZXg7XG4gICAgcmV0dXJuIElTX0VSUk9SO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUHJvbWlzZTtcblxuZnVuY3Rpb24gUHJvbWlzZShmbikge1xuICBpZiAodHlwZW9mIHRoaXMgIT09ICdvYmplY3QnKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUHJvbWlzZXMgbXVzdCBiZSBjb25zdHJ1Y3RlZCB2aWEgbmV3Jyk7XG4gIH1cbiAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Byb21pc2UgY29uc3RydWN0b3JcXCdzIGFyZ3VtZW50IGlzIG5vdCBhIGZ1bmN0aW9uJyk7XG4gIH1cbiAgdGhpcy5fNDAgPSAwO1xuICB0aGlzLl82NSA9IDA7XG4gIHRoaXMuXzU1ID0gbnVsbDtcbiAgdGhpcy5fNzIgPSBudWxsO1xuICBpZiAoZm4gPT09IG5vb3ApIHJldHVybjtcbiAgZG9SZXNvbHZlKGZuLCB0aGlzKTtcbn1cblByb21pc2UuXzM3ID0gbnVsbDtcblByb21pc2UuXzg3ID0gbnVsbDtcblByb21pc2UuXzYxID0gbm9vcDtcblxuUHJvbWlzZS5wcm90b3R5cGUudGhlbiA9IGZ1bmN0aW9uKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKSB7XG4gIGlmICh0aGlzLmNvbnN0cnVjdG9yICE9PSBQcm9taXNlKSB7XG4gICAgcmV0dXJuIHNhZmVUaGVuKHRoaXMsIG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKTtcbiAgfVxuICB2YXIgcmVzID0gbmV3IFByb21pc2Uobm9vcCk7XG4gIGhhbmRsZSh0aGlzLCBuZXcgSGFuZGxlcihvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCwgcmVzKSk7XG4gIHJldHVybiByZXM7XG59O1xuXG5mdW5jdGlvbiBzYWZlVGhlbihzZWxmLCBvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCkge1xuICByZXR1cm4gbmV3IHNlbGYuY29uc3RydWN0b3IoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgIHZhciByZXMgPSBuZXcgUHJvbWlzZShub29wKTtcbiAgICByZXMudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgIGhhbmRsZShzZWxmLCBuZXcgSGFuZGxlcihvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCwgcmVzKSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gaGFuZGxlKHNlbGYsIGRlZmVycmVkKSB7XG4gIHdoaWxlIChzZWxmLl82NSA9PT0gMykge1xuICAgIHNlbGYgPSBzZWxmLl81NTtcbiAgfVxuICBpZiAoUHJvbWlzZS5fMzcpIHtcbiAgICBQcm9taXNlLl8zNyhzZWxmKTtcbiAgfVxuICBpZiAoc2VsZi5fNjUgPT09IDApIHtcbiAgICBpZiAoc2VsZi5fNDAgPT09IDApIHtcbiAgICAgIHNlbGYuXzQwID0gMTtcbiAgICAgIHNlbGYuXzcyID0gZGVmZXJyZWQ7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChzZWxmLl80MCA9PT0gMSkge1xuICAgICAgc2VsZi5fNDAgPSAyO1xuICAgICAgc2VsZi5fNzIgPSBbc2VsZi5fNzIsIGRlZmVycmVkXTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc2VsZi5fNzIucHVzaChkZWZlcnJlZCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGhhbmRsZVJlc29sdmVkKHNlbGYsIGRlZmVycmVkKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlUmVzb2x2ZWQoc2VsZiwgZGVmZXJyZWQpIHtcbiAgYXNhcChmdW5jdGlvbigpIHtcbiAgICB2YXIgY2IgPSBzZWxmLl82NSA9PT0gMSA/IGRlZmVycmVkLm9uRnVsZmlsbGVkIDogZGVmZXJyZWQub25SZWplY3RlZDtcbiAgICBpZiAoY2IgPT09IG51bGwpIHtcbiAgICAgIGlmIChzZWxmLl82NSA9PT0gMSkge1xuICAgICAgICByZXNvbHZlKGRlZmVycmVkLnByb21pc2UsIHNlbGYuXzU1KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlamVjdChkZWZlcnJlZC5wcm9taXNlLCBzZWxmLl81NSk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciByZXQgPSB0cnlDYWxsT25lKGNiLCBzZWxmLl81NSk7XG4gICAgaWYgKHJldCA9PT0gSVNfRVJST1IpIHtcbiAgICAgIHJlamVjdChkZWZlcnJlZC5wcm9taXNlLCBMQVNUX0VSUk9SKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzb2x2ZShkZWZlcnJlZC5wcm9taXNlLCByZXQpO1xuICAgIH1cbiAgfSk7XG59XG5mdW5jdGlvbiByZXNvbHZlKHNlbGYsIG5ld1ZhbHVlKSB7XG4gIC8vIFByb21pc2UgUmVzb2x1dGlvbiBQcm9jZWR1cmU6IGh0dHBzOi8vZ2l0aHViLmNvbS9wcm9taXNlcy1hcGx1cy9wcm9taXNlcy1zcGVjI3RoZS1wcm9taXNlLXJlc29sdXRpb24tcHJvY2VkdXJlXG4gIGlmIChuZXdWYWx1ZSA9PT0gc2VsZikge1xuICAgIHJldHVybiByZWplY3QoXG4gICAgICBzZWxmLFxuICAgICAgbmV3IFR5cGVFcnJvcignQSBwcm9taXNlIGNhbm5vdCBiZSByZXNvbHZlZCB3aXRoIGl0c2VsZi4nKVxuICAgICk7XG4gIH1cbiAgaWYgKFxuICAgIG5ld1ZhbHVlICYmXG4gICAgKHR5cGVvZiBuZXdWYWx1ZSA9PT0gJ29iamVjdCcgfHwgdHlwZW9mIG5ld1ZhbHVlID09PSAnZnVuY3Rpb24nKVxuICApIHtcbiAgICB2YXIgdGhlbiA9IGdldFRoZW4obmV3VmFsdWUpO1xuICAgIGlmICh0aGVuID09PSBJU19FUlJPUikge1xuICAgICAgcmV0dXJuIHJlamVjdChzZWxmLCBMQVNUX0VSUk9SKTtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgdGhlbiA9PT0gc2VsZi50aGVuICYmXG4gICAgICBuZXdWYWx1ZSBpbnN0YW5jZW9mIFByb21pc2VcbiAgICApIHtcbiAgICAgIHNlbGYuXzY1ID0gMztcbiAgICAgIHNlbGYuXzU1ID0gbmV3VmFsdWU7XG4gICAgICBmaW5hbGUoc2VsZik7XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgZG9SZXNvbHZlKHRoZW4uYmluZChuZXdWYWx1ZSksIHNlbGYpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuICBzZWxmLl82NSA9IDE7XG4gIHNlbGYuXzU1ID0gbmV3VmFsdWU7XG4gIGZpbmFsZShzZWxmKTtcbn1cblxuZnVuY3Rpb24gcmVqZWN0KHNlbGYsIG5ld1ZhbHVlKSB7XG4gIHNlbGYuXzY1ID0gMjtcbiAgc2VsZi5fNTUgPSBuZXdWYWx1ZTtcbiAgaWYgKFByb21pc2UuXzg3KSB7XG4gICAgUHJvbWlzZS5fODcoc2VsZiwgbmV3VmFsdWUpO1xuICB9XG4gIGZpbmFsZShzZWxmKTtcbn1cbmZ1bmN0aW9uIGZpbmFsZShzZWxmKSB7XG4gIGlmIChzZWxmLl80MCA9PT0gMSkge1xuICAgIGhhbmRsZShzZWxmLCBzZWxmLl83Mik7XG4gICAgc2VsZi5fNzIgPSBudWxsO1xuICB9XG4gIGlmIChzZWxmLl80MCA9PT0gMikge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VsZi5fNzIubGVuZ3RoOyBpKyspIHtcbiAgICAgIGhhbmRsZShzZWxmLCBzZWxmLl83MltpXSk7XG4gICAgfVxuICAgIHNlbGYuXzcyID0gbnVsbDtcbiAgfVxufVxuXG5mdW5jdGlvbiBIYW5kbGVyKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkLCBwcm9taXNlKXtcbiAgdGhpcy5vbkZ1bGZpbGxlZCA9IHR5cGVvZiBvbkZ1bGZpbGxlZCA9PT0gJ2Z1bmN0aW9uJyA/IG9uRnVsZmlsbGVkIDogbnVsbDtcbiAgdGhpcy5vblJlamVjdGVkID0gdHlwZW9mIG9uUmVqZWN0ZWQgPT09ICdmdW5jdGlvbicgPyBvblJlamVjdGVkIDogbnVsbDtcbiAgdGhpcy5wcm9taXNlID0gcHJvbWlzZTtcbn1cblxuLyoqXG4gKiBUYWtlIGEgcG90ZW50aWFsbHkgbWlzYmVoYXZpbmcgcmVzb2x2ZXIgZnVuY3Rpb24gYW5kIG1ha2Ugc3VyZVxuICogb25GdWxmaWxsZWQgYW5kIG9uUmVqZWN0ZWQgYXJlIG9ubHkgY2FsbGVkIG9uY2UuXG4gKlxuICogTWFrZXMgbm8gZ3VhcmFudGVlcyBhYm91dCBhc3luY2hyb255LlxuICovXG5mdW5jdGlvbiBkb1Jlc29sdmUoZm4sIHByb21pc2UpIHtcbiAgdmFyIGRvbmUgPSBmYWxzZTtcbiAgdmFyIHJlcyA9IHRyeUNhbGxUd28oZm4sIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIGlmIChkb25lKSByZXR1cm47XG4gICAgZG9uZSA9IHRydWU7XG4gICAgcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICBpZiAoZG9uZSkgcmV0dXJuO1xuICAgIGRvbmUgPSB0cnVlO1xuICAgIHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuICB9KTtcbiAgaWYgKCFkb25lICYmIHJlcyA9PT0gSVNfRVJST1IpIHtcbiAgICBkb25lID0gdHJ1ZTtcbiAgICByZWplY3QocHJvbWlzZSwgTEFTVF9FUlJPUik7XG4gIH1cbn1cbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIFByb21pc2UgPSByZXF1aXJlKCcuL2NvcmUuanMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBQcm9taXNlO1xuUHJvbWlzZS5wcm90b3R5cGUuZG9uZSA9IGZ1bmN0aW9uIChvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCkge1xuICB2YXIgc2VsZiA9IGFyZ3VtZW50cy5sZW5ndGggPyB0aGlzLnRoZW4uYXBwbHkodGhpcywgYXJndW1lbnRzKSA6IHRoaXM7XG4gIHNlbGYudGhlbihudWxsLCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfSwgMCk7XG4gIH0pO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxuLy9UaGlzIGZpbGUgY29udGFpbnMgdGhlIEVTNiBleHRlbnNpb25zIHRvIHRoZSBjb3JlIFByb21pc2VzL0ErIEFQSVxuXG52YXIgUHJvbWlzZSA9IHJlcXVpcmUoJy4vY29yZS5qcycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFByb21pc2U7XG5cbi8qIFN0YXRpYyBGdW5jdGlvbnMgKi9cblxudmFyIFRSVUUgPSB2YWx1ZVByb21pc2UodHJ1ZSk7XG52YXIgRkFMU0UgPSB2YWx1ZVByb21pc2UoZmFsc2UpO1xudmFyIE5VTEwgPSB2YWx1ZVByb21pc2UobnVsbCk7XG52YXIgVU5ERUZJTkVEID0gdmFsdWVQcm9taXNlKHVuZGVmaW5lZCk7XG52YXIgWkVSTyA9IHZhbHVlUHJvbWlzZSgwKTtcbnZhciBFTVBUWVNUUklORyA9IHZhbHVlUHJvbWlzZSgnJyk7XG5cbmZ1bmN0aW9uIHZhbHVlUHJvbWlzZSh2YWx1ZSkge1xuICB2YXIgcCA9IG5ldyBQcm9taXNlKFByb21pc2UuXzYxKTtcbiAgcC5fNjUgPSAxO1xuICBwLl81NSA9IHZhbHVlO1xuICByZXR1cm4gcDtcbn1cblByb21pc2UucmVzb2x2ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICBpZiAodmFsdWUgaW5zdGFuY2VvZiBQcm9taXNlKSByZXR1cm4gdmFsdWU7XG5cbiAgaWYgKHZhbHVlID09PSBudWxsKSByZXR1cm4gTlVMTDtcbiAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHJldHVybiBVTkRFRklORUQ7XG4gIGlmICh2YWx1ZSA9PT0gdHJ1ZSkgcmV0dXJuIFRSVUU7XG4gIGlmICh2YWx1ZSA9PT0gZmFsc2UpIHJldHVybiBGQUxTRTtcbiAgaWYgKHZhbHVlID09PSAwKSByZXR1cm4gWkVSTztcbiAgaWYgKHZhbHVlID09PSAnJykgcmV0dXJuIEVNUFRZU1RSSU5HO1xuXG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnIHx8IHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHRyeSB7XG4gICAgICB2YXIgdGhlbiA9IHZhbHVlLnRoZW47XG4gICAgICBpZiAodHlwZW9mIHRoZW4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHRoZW4uYmluZCh2YWx1ZSkpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICByZWplY3QoZXgpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIHJldHVybiB2YWx1ZVByb21pc2UodmFsdWUpO1xufTtcblxuUHJvbWlzZS5hbGwgPSBmdW5jdGlvbiAoYXJyKSB7XG4gIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJyKTtcblxuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHJlc29sdmUoW10pO1xuICAgIHZhciByZW1haW5pbmcgPSBhcmdzLmxlbmd0aDtcbiAgICBmdW5jdGlvbiByZXMoaSwgdmFsKSB7XG4gICAgICBpZiAodmFsICYmICh0eXBlb2YgdmFsID09PSAnb2JqZWN0JyB8fCB0eXBlb2YgdmFsID09PSAnZnVuY3Rpb24nKSkge1xuICAgICAgICBpZiAodmFsIGluc3RhbmNlb2YgUHJvbWlzZSAmJiB2YWwudGhlbiA9PT0gUHJvbWlzZS5wcm90b3R5cGUudGhlbikge1xuICAgICAgICAgIHdoaWxlICh2YWwuXzY1ID09PSAzKSB7XG4gICAgICAgICAgICB2YWwgPSB2YWwuXzU1O1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodmFsLl82NSA9PT0gMSkgcmV0dXJuIHJlcyhpLCB2YWwuXzU1KTtcbiAgICAgICAgICBpZiAodmFsLl82NSA9PT0gMikgcmVqZWN0KHZhbC5fNTUpO1xuICAgICAgICAgIHZhbC50aGVuKGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIHJlcyhpLCB2YWwpO1xuICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciB0aGVuID0gdmFsLnRoZW47XG4gICAgICAgICAgaWYgKHR5cGVvZiB0aGVuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB2YXIgcCA9IG5ldyBQcm9taXNlKHRoZW4uYmluZCh2YWwpKTtcbiAgICAgICAgICAgIHAudGhlbihmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICAgIHJlcyhpLCB2YWwpO1xuICAgICAgICAgICAgfSwgcmVqZWN0KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGFyZ3NbaV0gPSB2YWw7XG4gICAgICBpZiAoLS1yZW1haW5pbmcgPT09IDApIHtcbiAgICAgICAgcmVzb2x2ZShhcmdzKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICByZXMoaSwgYXJnc1tpXSk7XG4gICAgfVxuICB9KTtcbn07XG5cblByb21pc2UucmVqZWN0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgcmVqZWN0KHZhbHVlKTtcbiAgfSk7XG59O1xuXG5Qcm9taXNlLnJhY2UgPSBmdW5jdGlvbiAodmFsdWVzKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgdmFsdWVzLmZvckVhY2goZnVuY3Rpb24odmFsdWUpe1xuICAgICAgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgfSk7XG4gIH0pO1xufTtcblxuLyogUHJvdG90eXBlIE1ldGhvZHMgKi9cblxuUHJvbWlzZS5wcm90b3R5cGVbJ2NhdGNoJ10gPSBmdW5jdGlvbiAob25SZWplY3RlZCkge1xuICByZXR1cm4gdGhpcy50aGVuKG51bGwsIG9uUmVqZWN0ZWQpO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIFByb21pc2UgPSByZXF1aXJlKCcuL2NvcmUuanMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBQcm9taXNlO1xuUHJvbWlzZS5wcm90b3R5cGVbJ2ZpbmFsbHknXSA9IGZ1bmN0aW9uIChmKSB7XG4gIHJldHVybiB0aGlzLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmKCkpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0pO1xuICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmKCkpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH0pO1xuICB9KTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9jb3JlLmpzJyk7XG5yZXF1aXJlKCcuL2RvbmUuanMnKTtcbnJlcXVpcmUoJy4vZmluYWxseS5qcycpO1xucmVxdWlyZSgnLi9lczYtZXh0ZW5zaW9ucy5qcycpO1xucmVxdWlyZSgnLi9ub2RlLWV4dGVuc2lvbnMuanMnKTtcbnJlcXVpcmUoJy4vc3luY2hyb25vdXMuanMnKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuLy8gVGhpcyBmaWxlIGNvbnRhaW5zIHRoZW4vcHJvbWlzZSBzcGVjaWZpYyBleHRlbnNpb25zIHRoYXQgYXJlIG9ubHkgdXNlZnVsXG4vLyBmb3Igbm9kZS5qcyBpbnRlcm9wXG5cbnZhciBQcm9taXNlID0gcmVxdWlyZSgnLi9jb3JlLmpzJyk7XG52YXIgYXNhcCA9IHJlcXVpcmUoJ2FzYXAnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBQcm9taXNlO1xuXG4vKiBTdGF0aWMgRnVuY3Rpb25zICovXG5cblByb21pc2UuZGVub2RlaWZ5ID0gZnVuY3Rpb24gKGZuLCBhcmd1bWVudENvdW50KSB7XG4gIGlmIChcbiAgICB0eXBlb2YgYXJndW1lbnRDb3VudCA9PT0gJ251bWJlcicgJiYgYXJndW1lbnRDb3VudCAhPT0gSW5maW5pdHlcbiAgKSB7XG4gICAgcmV0dXJuIGRlbm9kZWlmeVdpdGhDb3VudChmbiwgYXJndW1lbnRDb3VudCk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGRlbm9kZWlmeVdpdGhvdXRDb3VudChmbik7XG4gIH1cbn07XG5cbnZhciBjYWxsYmFja0ZuID0gKFxuICAnZnVuY3Rpb24gKGVyciwgcmVzKSB7JyArXG4gICdpZiAoZXJyKSB7IHJqKGVycik7IH0gZWxzZSB7IHJzKHJlcyk7IH0nICtcbiAgJ30nXG4pO1xuZnVuY3Rpb24gZGVub2RlaWZ5V2l0aENvdW50KGZuLCBhcmd1bWVudENvdW50KSB7XG4gIHZhciBhcmdzID0gW107XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRDb3VudDsgaSsrKSB7XG4gICAgYXJncy5wdXNoKCdhJyArIGkpO1xuICB9XG4gIHZhciBib2R5ID0gW1xuICAgICdyZXR1cm4gZnVuY3Rpb24gKCcgKyBhcmdzLmpvaW4oJywnKSArICcpIHsnLFxuICAgICd2YXIgc2VsZiA9IHRoaXM7JyxcbiAgICAncmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChycywgcmopIHsnLFxuICAgICd2YXIgcmVzID0gZm4uY2FsbCgnLFxuICAgIFsnc2VsZiddLmNvbmNhdChhcmdzKS5jb25jYXQoW2NhbGxiYWNrRm5dKS5qb2luKCcsJyksXG4gICAgJyk7JyxcbiAgICAnaWYgKHJlcyAmJicsXG4gICAgJyh0eXBlb2YgcmVzID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiByZXMgPT09IFwiZnVuY3Rpb25cIikgJiYnLFxuICAgICd0eXBlb2YgcmVzLnRoZW4gPT09IFwiZnVuY3Rpb25cIicsXG4gICAgJykge3JzKHJlcyk7fScsXG4gICAgJ30pOycsXG4gICAgJ307J1xuICBdLmpvaW4oJycpO1xuICByZXR1cm4gRnVuY3Rpb24oWydQcm9taXNlJywgJ2ZuJ10sIGJvZHkpKFByb21pc2UsIGZuKTtcbn1cbmZ1bmN0aW9uIGRlbm9kZWlmeVdpdGhvdXRDb3VudChmbikge1xuICB2YXIgZm5MZW5ndGggPSBNYXRoLm1heChmbi5sZW5ndGggLSAxLCAzKTtcbiAgdmFyIGFyZ3MgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBmbkxlbmd0aDsgaSsrKSB7XG4gICAgYXJncy5wdXNoKCdhJyArIGkpO1xuICB9XG4gIHZhciBib2R5ID0gW1xuICAgICdyZXR1cm4gZnVuY3Rpb24gKCcgKyBhcmdzLmpvaW4oJywnKSArICcpIHsnLFxuICAgICd2YXIgc2VsZiA9IHRoaXM7JyxcbiAgICAndmFyIGFyZ3M7JyxcbiAgICAndmFyIGFyZ0xlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGg7JyxcbiAgICAnaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAnICsgZm5MZW5ndGggKyAnKSB7JyxcbiAgICAnYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoICsgMSk7JyxcbiAgICAnZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsnLFxuICAgICdhcmdzW2ldID0gYXJndW1lbnRzW2ldOycsXG4gICAgJ30nLFxuICAgICd9JyxcbiAgICAncmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChycywgcmopIHsnLFxuICAgICd2YXIgY2IgPSAnICsgY2FsbGJhY2tGbiArICc7JyxcbiAgICAndmFyIHJlczsnLFxuICAgICdzd2l0Y2ggKGFyZ0xlbmd0aCkgeycsXG4gICAgYXJncy5jb25jYXQoWydleHRyYSddKS5tYXAoZnVuY3Rpb24gKF8sIGluZGV4KSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICAnY2FzZSAnICsgKGluZGV4KSArICc6JyArXG4gICAgICAgICdyZXMgPSBmbi5jYWxsKCcgKyBbJ3NlbGYnXS5jb25jYXQoYXJncy5zbGljZSgwLCBpbmRleCkpLmNvbmNhdCgnY2InKS5qb2luKCcsJykgKyAnKTsnICtcbiAgICAgICAgJ2JyZWFrOydcbiAgICAgICk7XG4gICAgfSkuam9pbignJyksXG4gICAgJ2RlZmF1bHQ6JyxcbiAgICAnYXJnc1thcmdMZW5ndGhdID0gY2I7JyxcbiAgICAncmVzID0gZm4uYXBwbHkoc2VsZiwgYXJncyk7JyxcbiAgICAnfScsXG4gICAgXG4gICAgJ2lmIChyZXMgJiYnLFxuICAgICcodHlwZW9mIHJlcyA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgcmVzID09PSBcImZ1bmN0aW9uXCIpICYmJyxcbiAgICAndHlwZW9mIHJlcy50aGVuID09PSBcImZ1bmN0aW9uXCInLFxuICAgICcpIHtycyhyZXMpO30nLFxuICAgICd9KTsnLFxuICAgICd9OydcbiAgXS5qb2luKCcnKTtcblxuICByZXR1cm4gRnVuY3Rpb24oXG4gICAgWydQcm9taXNlJywgJ2ZuJ10sXG4gICAgYm9keVxuICApKFByb21pc2UsIGZuKTtcbn1cblxuUHJvbWlzZS5ub2RlaWZ5ID0gZnVuY3Rpb24gKGZuKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuICAgIHZhciBjYWxsYmFjayA9XG4gICAgICB0eXBlb2YgYXJnc1thcmdzLmxlbmd0aCAtIDFdID09PSAnZnVuY3Rpb24nID8gYXJncy5wb3AoKSA6IG51bGw7XG4gICAgdmFyIGN0eCA9IHRoaXM7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpLm5vZGVpZnkoY2FsbGJhY2ssIGN0eCk7XG4gICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgIGlmIChjYWxsYmFjayA9PT0gbnVsbCB8fCB0eXBlb2YgY2FsbGJhY2sgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICByZWplY3QoZXgpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFzYXAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGNhbGxiYWNrLmNhbGwoY3R4LCBleCk7XG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5ub2RlaWZ5ID0gZnVuY3Rpb24gKGNhbGxiYWNrLCBjdHgpIHtcbiAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPSAnZnVuY3Rpb24nKSByZXR1cm4gdGhpcztcblxuICB0aGlzLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgYXNhcChmdW5jdGlvbiAoKSB7XG4gICAgICBjYWxsYmFjay5jYWxsKGN0eCwgbnVsbCwgdmFsdWUpO1xuICAgIH0pO1xuICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgYXNhcChmdW5jdGlvbiAoKSB7XG4gICAgICBjYWxsYmFjay5jYWxsKGN0eCwgZXJyKTtcbiAgICB9KTtcbiAgfSk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgUHJvbWlzZSA9IHJlcXVpcmUoJy4vY29yZS5qcycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFByb21pc2U7XG5Qcm9taXNlLmVuYWJsZVN5bmNocm9ub3VzID0gZnVuY3Rpb24gKCkge1xuICBQcm9taXNlLnByb3RvdHlwZS5pc1BlbmRpbmcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRTdGF0ZSgpID09IDA7XG4gIH07XG5cbiAgUHJvbWlzZS5wcm90b3R5cGUuaXNGdWxmaWxsZWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRTdGF0ZSgpID09IDE7XG4gIH07XG5cbiAgUHJvbWlzZS5wcm90b3R5cGUuaXNSZWplY3RlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmdldFN0YXRlKCkgPT0gMjtcbiAgfTtcblxuICBQcm9taXNlLnByb3RvdHlwZS5nZXRWYWx1ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5fNjUgPT09IDMpIHtcbiAgICAgIHJldHVybiB0aGlzLl81NS5nZXRWYWx1ZSgpO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5pc0Z1bGZpbGxlZCgpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBnZXQgYSB2YWx1ZSBvZiBhbiB1bmZ1bGZpbGxlZCBwcm9taXNlLicpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl81NTtcbiAgfTtcblxuICBQcm9taXNlLnByb3RvdHlwZS5nZXRSZWFzb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuXzY1ID09PSAzKSB7XG4gICAgICByZXR1cm4gdGhpcy5fNTUuZ2V0UmVhc29uKCk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmlzUmVqZWN0ZWQoKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgZ2V0IGEgcmVqZWN0aW9uIHJlYXNvbiBvZiBhIG5vbi1yZWplY3RlZCBwcm9taXNlLicpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl81NTtcbiAgfTtcblxuICBQcm9taXNlLnByb3RvdHlwZS5nZXRTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5fNjUgPT09IDMpIHtcbiAgICAgIHJldHVybiB0aGlzLl81NS5nZXRTdGF0ZSgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5fNjUgPT09IC0xIHx8IHRoaXMuXzY1ID09PSAtMikge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuXzY1O1xuICB9O1xufTtcblxuUHJvbWlzZS5kaXNhYmxlU3luY2hyb25vdXMgPSBmdW5jdGlvbigpIHtcbiAgUHJvbWlzZS5wcm90b3R5cGUuaXNQZW5kaW5nID0gdW5kZWZpbmVkO1xuICBQcm9taXNlLnByb3RvdHlwZS5pc0Z1bGZpbGxlZCA9IHVuZGVmaW5lZDtcbiAgUHJvbWlzZS5wcm90b3R5cGUuaXNSZWplY3RlZCA9IHVuZGVmaW5lZDtcbiAgUHJvbWlzZS5wcm90b3R5cGUuZ2V0VmFsdWUgPSB1bmRlZmluZWQ7XG4gIFByb21pc2UucHJvdG90eXBlLmdldFJlYXNvbiA9IHVuZGVmaW5lZDtcbiAgUHJvbWlzZS5wcm90b3R5cGUuZ2V0U3RhdGUgPSB1bmRlZmluZWQ7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xyXG52YXIgZGlhbG9nID0gcmVxdWlyZSgnLi9kaWFsb2cnKTtcclxuXHJcbnZhciAkY2FjaGUgPSB7fTtcclxuXHJcbmZ1bmN0aW9uIGluaXRpYWxpemVDYWNoZSgpIHtcclxuICAgICRjYWNoZS5wcmltYXJ5ID0gJCgnI3ByaW1hcnknKTtcclxuICAgICRjYWNoZS5jaGVja291dEZvcm0gPSAkY2FjaGUucHJpbWFyeS5maW5kKCcuY2hlY2tvdXQtc2hpcHBpbmcuYWRkcmVzcycpLmxlbmd0aCA+IDAgPyAkY2FjaGUucHJpbWFyeS5maW5kKCcuY2hlY2tvdXQtc2hpcHBpbmcuYWRkcmVzcycpIDogJGNhY2hlLnByaW1hcnkuZmluZCgnLmNoZWNrb3V0LWJpbGxpbmcuYWRkcmVzcycpO1xyXG4gICAgJGNhY2hlLnN1Ym1pdEZvcm1CdXR0b24gPSAkY2FjaGUuY2hlY2tvdXRGb3JtLmZpbmQoJ2J1dHRvbi5zYXZlU2hpcHBpbmcnKS5sZW5ndGggPiAwID8gJGNhY2hlLmNoZWNrb3V0Rm9ybS5maW5kKCdidXR0b24uc2F2ZVNoaXBwaW5nJykgOiAkY2FjaGUuY2hlY2tvdXRGb3JtLmZpbmQoJ2J1dHRvbltuYW1lJD1fc2F2ZV0nKTtcclxuICAgICRjYWNoZS52YWxpZGF0b2lvbkRpYWxvZyA9ICRjYWNoZS5wcmltYXJ5LmZpbmQoJyNhZGRyZXNzLXZhbGlkYXRpb24tZGlhbG9nJyk7XHJcbiAgICAkY2FjaGUuYnlQYXNzREFWID0gJGNhY2hlLmNoZWNrb3V0Rm9ybS5maW5kKCcuYnlwYXNzREFWJyk7XHJcbiAgICAkY2FjaGUuYWRkcmVzczEgPSAkY2FjaGUuY2hlY2tvdXRGb3JtLmZpbmQoJ2lucHV0W25hbWUkPVwiX2FkZHJlc3MxXCJdJyk7XHJcbiAgICAkY2FjaGUuYWRkcmVzczIgPSAkY2FjaGUuY2hlY2tvdXRGb3JtLmZpbmQoJ2lucHV0W25hbWUkPVwiX2FkZHJlc3MyXCJdJyk7XHJcbiAgICAkY2FjaGUuY2l0eSA9ICRjYWNoZS5jaGVja291dEZvcm0uZmluZCgnaW5wdXRbbmFtZSQ9XCJfY2l0eVwiXScpO1xyXG4gICAgJGNhY2hlLnN0YXRlQ29kZSA9ICRjYWNoZS5jaGVja291dEZvcm0uZmluZCgnc2VsZWN0W2lkJD1cIl9zdGF0ZVwiXScpO1xyXG4gICAgJGNhY2hlLmNvdW50cnlDb2RlID0gJGNhY2hlLmNoZWNrb3V0Rm9ybS5maW5kKCdzZWxlY3RbaWQkPVwiX2NvdW50cnlcIl0nKTtcclxuICAgICRjYWNoZS5wb3N0YWxDb2RlID0gJGNhY2hlLmNoZWNrb3V0Rm9ybS5maW5kKCdpbnB1dFtuYW1lJD1cIl9wb3N0YWxcIl0nKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaW5pdGlhbGl6ZURvbSgpIHtcclxuICAgIGlmICgkY2FjaGUudmFsaWRhdG9pb25EaWFsb2cubGVuZ3RoID4gMCkge1xyXG5cclxuICAgICAgICB2YXIgZGxnID0gZGlhbG9nLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIHRhcmdldDogJGNhY2hlLnZhbGlkYXRvaW9uRGlhbG9nLFxyXG4gICAgICAgICAgICBvcHRpb25zOiB7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMzAwLFxyXG4gICAgICAgICAgICAgICAgZGlhbG9nQ2xhc3M6ICdhZGRyZXNzLXZhbGlkYXRpb24tZGlhbG9nJyxcclxuICAgICAgICAgICAgICAgIG9wZW46IGluaXRpYWxpemVFdmVudHNcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkY2FjaGUudmFsaWRhdG9pb25EaWFsb2cuc2hvdygpO1xyXG4gICAgICAgIGRsZy5kaWFsb2coJ29wZW4nKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gaW5pdGlhbGl6ZUV2ZW50cygpIHtcclxuXHJcbiAgICAkY2FjaGUudmFsaWRhdG9pb25EaWFsb2cub24oJ2NsaWNrJywgJyNvcmlnaW5hbC1hZGRyZXNzLWVkaXQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJGNhY2hlLnZhbGlkYXRvaW9uRGlhbG9nLmRpYWxvZygnY2xvc2UnKTtcclxuICAgICAgICAkKCcuc2hpcHBpbmctYWRkcmVzcy1maWVsZC1zZWN0aW9uJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAkKCcuc2VsZWN0ZWQtc2hpcHBpbmctYWRkcmVzcycpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgJCgnLm5ldy1hZGRyZXNzLWZpZWxkJykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuXHJcbiAgICAgICAgLypqUXVlcnkoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgc2Nyb2xsVG9wOiAkKCcjbmF2aWdhdGlvbicpLnBvc2l0aW9uKCkudG9wXHJcbiAgICAgICAgfSwgNTAwKTsqL1xyXG4gICAgfSk7XHJcbiAgICAkY2FjaGUudmFsaWRhdG9pb25EaWFsb2cub24oJ2NsaWNrJywgJyNzdWdnZXN0ZWQtYWRkcmVzcy1lZGl0LTEnLCBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICQoJy5zaGlwcGluZy1hZGRyZXNzLWZpZWxkLXNlY3Rpb24nKS5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICQoJy5zZWxlY3RlZC1zaGlwcGluZy1hZGRyZXNzJykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgIH0pO1xyXG5cclxuICAgICRjYWNoZS52YWxpZGF0b2lvbkRpYWxvZy5vbignY2xpY2snLCAnI3NoaXAtdG8tb3JpZ2luYWwtYWRkcmVzcycsIGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgJGNhY2hlLnZhbGlkYXRvaW9uRGlhbG9nLmRpYWxvZygnY2xvc2UnKTtcclxuICAgICAgICAkY2FjaGUuYnlQYXNzREFWLmF0dHIoJ3ZhbHVlJywgJ3RydWUnKTtcclxuICAgICAgICAkY2FjaGUuc3VibWl0Rm9ybUJ1dHRvbi5jbGljaygpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJGNhY2hlLnZhbGlkYXRvaW9uRGlhbG9nLm9uKCdjbGljaycsICdbaWR8PVwic3VnZ2VzdGVkLWFkZHJlc3MtZWRpdFwiXScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgc2VsZWN0ZWRBZGRyZXNzID0gJCh0aGlzKS5kYXRhKCdhZGRyZXNzJykuc3BsaXQoJ3x8Jyk7XHJcbiAgICAgICAgJGNhY2hlLmFkZHJlc3MxLnZhbChzZWxlY3RlZEFkZHJlc3NbMF0pO1xyXG4gICAgICAgIGlmIChzZWxlY3RlZEFkZHJlc3NbMV0gIT09ICd1bmRlZmluZWQnICYmIHNlbGVjdGVkQWRkcmVzc1sxXSAhPT0gJycpIHtcclxuICAgICAgICAgICAgJGNhY2hlLmFkZHJlc3MyLnZhbChzZWxlY3RlZEFkZHJlc3NbMV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkY2FjaGUuY2l0eS52YWwoc2VsZWN0ZWRBZGRyZXNzWzJdKTtcclxuICAgICAgICAkY2FjaGUuc3RhdGVDb2RlLnZhbChzZWxlY3RlZEFkZHJlc3NbM10pO1xyXG4gICAgICAgICRjYWNoZS5jb3VudHJ5Q29kZS52YWwoc2VsZWN0ZWRBZGRyZXNzWzRdKTtcclxuICAgICAgICAkY2FjaGUucG9zdGFsQ29kZS52YWwoc2VsZWN0ZWRBZGRyZXNzWzVdKTtcclxuICAgICAgICAkY2FjaGUudmFsaWRhdG9pb25EaWFsb2cuZGlhbG9nKCdjbG9zZScpO1xyXG4gICAgICAgIGpRdWVyeSgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICBzY3JvbGxUb3A6ICQoJyNuYXZpZ2F0aW9uJykucG9zaXRpb24oKS50b3BcclxuICAgICAgICB9LCA1MDApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJGNhY2hlLnZhbGlkYXRvaW9uRGlhbG9nLm9uKCdjbGljaycsICdbaWR8PVwic2hpcC10by1hZGRyZXNzLXNlbGVjdGVkXCJdJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBzZWxlY3RlZEFkZHJlc3MgPSAkKHRoaXMpLmRhdGEoJ2FkZHJlc3MnKS5zcGxpdCgnfHwnKTtcclxuICAgICAgICAkY2FjaGUuYWRkcmVzczEudmFsKHNlbGVjdGVkQWRkcmVzc1swXSk7XHJcbiAgICAgICAgaWYgKHNlbGVjdGVkQWRkcmVzc1sxXSAhPT0gJ3VuZGVmaW5lZCcgJiYgc2VsZWN0ZWRBZGRyZXNzWzFdICE9PSAnJykge1xyXG4gICAgICAgICAgICAkY2FjaGUuYWRkcmVzczIudmFsKHNlbGVjdGVkQWRkcmVzc1sxXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICRjYWNoZS5jaXR5LnZhbChzZWxlY3RlZEFkZHJlc3NbMl0pO1xyXG4gICAgICAgICRjYWNoZS5zdGF0ZUNvZGUudmFsKHNlbGVjdGVkQWRkcmVzc1szXSk7XHJcbiAgICAgICAgJGNhY2hlLmNvdW50cnlDb2RlLnZhbChzZWxlY3RlZEFkZHJlc3NbNF0pO1xyXG4gICAgICAgICRjYWNoZS5wb3N0YWxDb2RlLnZhbChzZWxlY3RlZEFkZHJlc3NbNV0pO1xyXG4gICAgICAgICRjYWNoZS5ieVBhc3NEQVYuYXR0cigndmFsdWUnLCAndHJ1ZScpO1xyXG4gICAgICAgICRjYWNoZS52YWxpZGF0b2lvbkRpYWxvZy5kaWFsb2coJ2Nsb3NlJyk7XHJcblxyXG4gICAgICAgICRjYWNoZS5zdWJtaXRGb3JtQnV0dG9uLmNsaWNrKCk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgaW5pdGlhbGl6ZUNhY2hlKCk7XHJcbiAgICBpbml0aWFsaXplRG9tKCk7XHJcbn07XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuXHJcbnZhciBwcm9ncmVzcyA9IHJlcXVpcmUoJy4vcHJvZ3Jlc3MnKSxcclxuICAgIHV0aWwgPSByZXF1aXJlKCcuL3V0aWwnKTtcclxuXHJcbnZhciBjdXJyZW50UmVxdWVzdHMgPSBbXTtcclxuXHJcbi8qKlxyXG4gKiBAZnVuY3Rpb25cclxuICogQGRlc2NyaXB0aW9uIEFqYXggcmVxdWVzdCB0byBnZXQganNvbiByZXNwb25zZVxyXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGFzeW5jICBBc3luY2hyb25vdXMgb3Igbm90XHJcbiAqIEBwYXJhbSB7U3RyaW5nfSB1cmwgVVJJIGZvciB0aGUgcmVxdWVzdFxyXG4gKiBAcGFyYW0ge09iamVjdH0gZGF0YSBOYW1lL1ZhbHVlIHBhaXIgZGF0YSByZXF1ZXN0XHJcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrICBDYWxsYmFjayBmdW5jdGlvbiB0byBiZSBjYWxsZWRcclxuICovXHJcbnZhciBnZXRKc29uID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgIG9wdGlvbnMudXJsID0gdXRpbC50b0Fic29sdXRlVXJsKG9wdGlvbnMudXJsKTtcclxuICAgIC8vIHJldHVybiBpZiBubyB1cmwgZXhpc3RzIG9yIHVybCBtYXRjaGVzIGEgY3VycmVudCByZXF1ZXN0XHJcbiAgICBpZiAoIW9wdGlvbnMudXJsIHx8IGN1cnJlbnRSZXF1ZXN0c1tvcHRpb25zLnVybF0pIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY3VycmVudFJlcXVlc3RzW29wdGlvbnMudXJsXSA9IHRydWU7XHJcblxyXG4gICAgLy8gbWFrZSB0aGUgc2VydmVyIGNhbGxcclxuICAgICQuYWpheCh7XHJcbiAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICB1cmw6IG9wdGlvbnMudXJsLFxyXG4gICAgICAgIGFzeW5jOiAodHlwZW9mIG9wdGlvbnMuYXN5bmMgPT09ICd1bmRlZmluZWQnIHx8IG9wdGlvbnMuYXN5bmMgPT09IG51bGwpID8gdHJ1ZSA6IG9wdGlvbnMuYXN5bmMsXHJcbiAgICAgICAgZGF0YTogb3B0aW9ucy5kYXRhIHx8IHt9LFxyXG4gICAgICAgIHR5cGU6IG9wdGlvbnMudHlwZSB8fCAnR0VUJyAvL1BSRVZBSUwtQWRkZWQgdG8gaGFuZGxlIHNlY3VyaXR5IGZvcm0gaXNzdWVzLlxyXG4gICAgfSlcclxuICAgIC8vIHN1Y2Nlc3NcclxuICAgICAgICAuZG9uZShmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMuY2FsbGJhY2socmVzcG9uc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAvLyBmYWlsZWRcclxuICAgICAgICAuZmFpbChmdW5jdGlvbiAoeGhyLCB0ZXh0U3RhdHVzKSB7XHJcbiAgICAgICAgICAgIGlmICh0ZXh0U3RhdHVzID09PSAncGFyc2VyZXJyb3InKSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuYWxlcnQoUmVzb3VyY2VzLkJBRF9SRVNQT05TRSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMuY2FsbGJhY2sobnVsbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIC8vIGV4ZWN1dGVkIG9uIHN1Y2Nlc3Mgb3IgZmFpbFxyXG4gICAgICAgIC5hbHdheXMoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyByZW1vdmUgY3VycmVudCByZXF1ZXN0IGZyb20gaGFzaFxyXG4gICAgICAgICAgICBpZiAoY3VycmVudFJlcXVlc3RzW29wdGlvbnMudXJsXSkge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIGN1cnJlbnRSZXF1ZXN0c1tvcHRpb25zLnVybF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxufTtcclxuLyoqXHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAZGVzY3JpcHRpb24gYWpheCByZXF1ZXN0IHRvIGxvYWQgaHRtbCByZXNwb25zZSBpbiBhIGdpdmVuIGNvbnRhaW5lclxyXG4gKiBAcGFyYW0ge1N0cmluZ30gdXJsIFVSSSBmb3IgdGhlIHJlcXVlc3RcclxuICogQHBhcmFtIHtPYmplY3R9IGRhdGEgTmFtZS9WYWx1ZSBwYWlyIGRhdGEgcmVxdWVzdFxyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayAgQ2FsbGJhY2sgZnVuY3Rpb24gdG8gYmUgY2FsbGVkXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXQgU2VsZWN0b3Igb3IgZWxlbWVudCB0aGF0IHdpbGwgcmVjZWl2ZSBjb250ZW50XHJcbiAqL1xyXG52YXIgbG9hZCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICBvcHRpb25zLnVybCA9IHV0aWwudG9BYnNvbHV0ZVVybChvcHRpb25zLnVybCk7XHJcbiAgICAvLyByZXR1cm4gaWYgbm8gdXJsIGV4aXN0cyBvciB1cmwgbWF0Y2hlcyBhIGN1cnJlbnQgcmVxdWVzdFxyXG4gICAgaWYgKCFvcHRpb25zLnVybCB8fCBjdXJyZW50UmVxdWVzdHNbb3B0aW9ucy51cmxdKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGN1cnJlbnRSZXF1ZXN0c1tvcHRpb25zLnVybF0gPSB0cnVlO1xyXG5cclxuICAgIC8vIG1ha2UgdGhlIHNlcnZlciBjYWxsXHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICAgIGRhdGFUeXBlOiAnaHRtbCcsXHJcbiAgICAgICAgdXJsOiB1dGlsLmFwcGVuZFBhcmFtVG9VUkwob3B0aW9ucy51cmwsICdmb3JtYXQnLCAnYWpheCcpLFxyXG4gICAgICAgIGRhdGE6IG9wdGlvbnMuZGF0YSxcclxuICAgICAgICB4aHJGaWVsZHM6IHtcclxuICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlXHJcbiAgICAgICAgfSxcclxuICAgICAgICB0eXBlOiBvcHRpb25zLnR5cGUgfHwgJ0dFVCcgLy9QUkVWQUlMLUFkZGVkIHRvIGhhbmRsZSBzZWN1cml0eSBmb3JtIGlzc3Vlcy5cclxuICAgIH0pXHJcbiAgICAgICAgLmRvbmUoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIC8vIHN1Y2Nlc3NcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMudGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICAkKG9wdGlvbnMudGFyZ2V0KS5lbXB0eSgpLmh0bWwocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICBvcHRpb25zLmNhbGxiYWNrKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmZhaWwoZnVuY3Rpb24gKHhociwgdGV4dFN0YXR1cykge1xyXG4gICAgICAgICAgICAvLyBmYWlsZWRcclxuICAgICAgICAgICAgaWYgKHRleHRTdGF0dXMgPT09ICdwYXJzZXJlcnJvcicpIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5hbGVydChSZXNvdXJjZXMuQkFEX1JFU1BPTlNFKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcHRpb25zLmNhbGxiYWNrKG51bGwsIHRleHRTdGF0dXMpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmFsd2F5cyhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHByb2dyZXNzLmhpZGUoKTtcclxuICAgICAgICAgICAgLy8gcmVtb3ZlIGN1cnJlbnQgcmVxdWVzdCBmcm9tIGhhc2hcclxuICAgICAgICAgICAgaWYgKGN1cnJlbnRSZXF1ZXN0c1tvcHRpb25zLnVybF0pIHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBjdXJyZW50UmVxdWVzdHNbb3B0aW9ucy51cmxdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbn07XHJcblxyXG5leHBvcnRzLmdldEpzb24gPSBnZXRKc29uO1xyXG5leHBvcnRzLmxvYWQgPSBsb2FkO1xyXG4iLCIvKipcclxuICogICAgKGMpIDIwMDktMjAxNCBEZW1hbmR3YXJlIEluYy5cclxuICogICAgU3ViamVjdCB0byBzdGFuZGFyZCB1c2FnZSB0ZXJtcyBhbmQgY29uZGl0aW9uc1xyXG4gKiAgICBGb3IgYWxsIGRldGFpbHMgYW5kIGRvY3VtZW50YXRpb246XHJcbiAqICAgIGh0dHBzOi8vYml0YnVja2V0LmNvbS9kZW1hbmR3YXJlL3NpdGVnZW5lc2lzXHJcbiAqL1xyXG4ndXNlIHN0cmljdCc7XHJcblxyXG52YXIgY291bnRyaWVzID0gcmVxdWlyZSgnLi9jb3VudHJpZXMnKSxcclxuICAgIGRpYWxvZyA9IHJlcXVpcmUoJy4vZGlhbG9nJyksXHJcbiAgICBtaW5pY2FydCA9IHJlcXVpcmUoJy4vbWluaWNhcnQnKSxcclxuICAgIHBhZ2UgPSByZXF1aXJlKCcuL3BhZ2UnKSxcclxuICAgIHNlYXJjaHBsYWNlaG9sZGVyID0gcmVxdWlyZSgnLi9zZWFyY2hwbGFjZWhvbGRlcicpLFxyXG4gICAgc2VhcmNoc3VnZ2VzdCA9IHJlcXVpcmUoJy4vc2VhcmNoc3VnZ2VzdCcpLFxyXG4gICAgdG9vbHRpcCA9IHJlcXVpcmUoJy4vdG9vbHRpcCcpLFxyXG4gICAgdXRpbCA9IHJlcXVpcmUoJy4vdXRpbCcpLFxyXG4gICAgdmFsaWRhdG9yID0gcmVxdWlyZSgnLi92YWxpZGF0b3InKSxcclxuICAgIG1lZ2FtZW51ID0gcmVxdWlyZSgnLi9tZWdhbWVudScpLFxyXG4gICAgaGVhZGVyaW5pdCA9IHJlcXVpcmUoJy4vaGVhZGVyaW5pdCcpLFxyXG4gICAgdWlldmVudHMgPSByZXF1aXJlKCcuL3VpZXZlbnRzJyksXHJcbiAgICAvL3Byb2dyZXNzID0gcmVxdWlyZSgnLi9wcm9ncmVzcycpLFxyXG4gICAgdGxzID0gcmVxdWlyZSgnLi90bHMnKSxcclxuICAgIHRhZ21hbmFnZXIgPSByZXF1aXJlKCcuL3RhZ21hbmFnZXInKSxcclxuICAgIHF1aWNrdmlld0Fzc2V0ID0gcmVxdWlyZSgnLi9xdWlja3ZpZXctYXNzZXQnKTtcclxuXHJcbi8vIGlmIGpRdWVyeSBoYXMgbm90IGJlZW4gbG9hZGVkLCBsb2FkIGZyb20gZ29vZ2xlIGNkblxyXG5pZiAoIXdpbmRvdy5qUXVlcnkpIHtcclxuICAgIHZhciBzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcbiAgICBzLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2h0dHBzOi8vYWpheC5nb29nbGVhcGlzLmNvbS9hamF4L2xpYnMvanF1ZXJ5LzEuNy4xL2pxdWVyeS5taW4uanMnKTtcclxuICAgIHMuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQvamF2YXNjcmlwdCcpO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXS5hcHBlbmRDaGlsZChzKTtcclxufVxyXG5cclxucmVxdWlyZSgnLi9qcXVlcnktZXh0JykoKTtcclxucmVxdWlyZSgnLi9jb29raWVwcml2YWN5JykoKTtcclxucmVxdWlyZSgnLi9jYXB0Y2hhJykoKTtcclxuXHJcbnZhciAkID0gd2luZG93LmpRdWVyeTtcclxuXHJcbmZ1bmN0aW9uIHJlc2V0UGFzc3dvcmRFdmVudHMoKSB7XHJcbiAgICAkKCdib2R5JykuZmluZCgnLlBhc3N3b3JkUmVzZXREaWFsb2cgLmZpZWxkLXdyYXBwZXIgaW5wdXQnKS5vZmYoJ2NoYW5nZScpLm9uKCdjbGljayBjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnZXJyb3JjbGllbnQnKTtcclxuICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5wYXNzd29yZHJlc2V0JykuZmluZCgnI21lc3NhZ2UnKS5oaWRlKCk7XHJcbiAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxhYmVsJykuZmluZCgnc3Bhbi5lcnJvcmNsaWVudCcpLnJlbW92ZSgpO1xyXG4gICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5mb3JtLXJvdyAsIC5sYWJlbCBzcGFuJykucmVtb3ZlQ2xhc3MoJ2lucHV0bGFiZWwnKTtcclxuICAgIH0pO1xyXG4gICAgaWYgKCQoJy5QYXNzd29yZFJlc2V0RGlhbG9nJykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICQoJy5QYXNzd29yZFJlc2V0RGlhbG9nJykuZmluZCgnLmZvcm1maWVsZCcpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5maW5kKCcuZmllbGQtd3JhcHBlciAuY2xlYXJidXR0b24nKS5sZW5ndGggPT0gMCAmJiAkKHRoaXMpLmZpbmQoJy5maWVsZC13cmFwcGVyIGlucHV0W3R5cGU9XCJ0ZXh0XCJdJykubGVuZ3RoID4gMCB8fCAkKHRoaXMpLmZpbmQoJy5maWVsZC13cmFwcGVyIGlucHV0W3R5cGU9XCJwYXNzd29yZFwiXScpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLmZpZWxkLXdyYXBwZXInKS5hcHBlbmQoJzxhIGNsYXNzPVwiY2xlYXJidXR0b25cIj48L2E+Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgICQoJ2JvZHknKS5maW5kKCcuUGFzc3dvcmRSZXNldERpYWxvZyBhLmNsZWFyYnV0dG9uJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZpZWxkLXdyYXBwZXInKS5maW5kKCdzcGFuJykucmVtb3ZlKCk7XHJcbiAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZmllbGQtd3JhcHBlcicpLmZpbmQoJy5yZXF1aXJlZCcpLnJlbW92ZUNsYXNzKCdlcnJvcmNsaWVudCcpO1xyXG4gICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCAnKS5maW5kKCcuZm9ybS1yb3cgLCAubGFiZWwgc3BhbicpLnJlbW92ZUNsYXNzKCdpbnB1dGxhYmVsJyk7XHJcbiAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnaW5wdXQnKS52YWwoJycpO1xyXG4gICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJ2EuY2xlYXJidXR0b24nKS5oaWRlKCk7XHJcbiAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnc3Bhbi5sb2dlcnJvciAsIC5leGlzdGluZ19yZWdpc3RlcicpLmhpZGUoKTtcclxuXHJcbiAgICB9KTtcclxuICAgIC8vIEF0dGFjaCBrZXlwcmVzcyBoYW5kbGVyIHRvIGlucHV0IGJveC4gIFN1Ym1pdCBmb3JtIGlmIHVzZXIgcHJlc3NlcyAnZW50ZXInIGtleS5cclxuICAgICQoJ2JvZHknKS5maW5kKCcuUGFzc3dvcmRSZXNldERpYWxvZyBpbnB1dC5yZXNldG9sZCcpLmtleXByZXNzKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgaWYgKGUud2hpY2ggPT0gMTMpIHtcclxuICAgICAgICAgICAgLy9qUXVlcnkoJyNzZW5kQnRuJykuY2xpY2soKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0pO1xyXG4gICAgJCgnYm9keScpLmZpbmQoJy5QYXNzd29yZFJlc2V0RGlhbG9nIC5maWVsZC13cmFwcGVyIGlucHV0Jykub24oJ2tleXVwIGlucHV0IGJsdXInLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCQodGhpcykudmFsKCkgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLnZhbCgpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJ2EuY2xlYXJidXR0b24nKS5zaG93KCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCdhLmNsZWFyYnV0dG9uJykuaGlkZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICB2YXIgJHJlcXVlc3RQYXNzd29yZEZvcm0gPSAkKCdbbmFtZSQ9XCJfcmVxdWVzdHBhc3N3b3JkXCJdJyksXHJcbiAgICAgICAgJHN1Ym1pdCA9ICRyZXF1ZXN0UGFzc3dvcmRGb3JtLmZpbmQoJ1tuYW1lJD1cIl9yZXF1ZXN0cGFzc3dvcmRfc2VuZFwiXScpO1xyXG4gICAgJCgkc3VibWl0KS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGlmICghJHJlcXVlc3RQYXNzd29yZEZvcm0udmFsaWQoKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBkaWFsb2cuc3VibWl0KCRzdWJtaXQuYXR0cignbmFtZScpKTtcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmVzZXRQYXNzd29yZEV2ZW50cygpO1xyXG4gICAgICAgIH0sIDEzMDApO1xyXG4gICAgfSk7XHJcbiAgICB2YWxpZGF0b3IuaW5pdCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpbml0aWFsaXplRXZlbnRzKCkge1xyXG4gICAgdmFyIGlzU2FmYXJpID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdTYWZhcmknKSA+IC0xO1xyXG4gICAgdmFyIGlzQ2hyb21lID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdDaHJvbWUnKSA+IC0xO1xyXG4gICAgdmFyIGlzRXhwbG9yZXIgPSBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ01TSUUnKSA+IC0xO1xyXG4gICAgdmFyIGlzRmlyZWZveCA9IG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignRmlyZWZveCcpID4gLTE7XHJcbiAgICAvL3ZhciBpc19zYWZhcmkgPSBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ1NhZmFyaScpID4gLTE7XHJcbiAgICB2YXIgaXNPcGVyYSA9IG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKCdvcCcpID4gLTE7XHJcbiAgICBpZiAoKGlzQ2hyb21lKSAmJiAoaXNTYWZhcmkpKSB7XHJcbiAgICAgICAgaXNTYWZhcmkgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIGlmICgoaXNDaHJvbWUpICYmIChpc09wZXJhKSkge1xyXG4gICAgICAgIGlzQ2hyb21lID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBpZiAoaXNTYWZhcmkpIHtcclxuICAgICAgICAkKCdib2R5JykuYWRkQ2xhc3MoJ3NhZmFyaS1icm93c2VyJyk7XHJcbiAgICB9IGVsc2UgaWYgKGlzRmlyZWZveCkge1xyXG4gICAgICAgICQoJ2JvZHknKS5hZGRDbGFzcygnZmlyZWZveC1icm93c2VyJyk7XHJcbiAgICB9IGVsc2UgaWYgKGlzRXhwbG9yZXIpIHtcclxuICAgICAgICAkKCdib2R5JykuYWRkQ2xhc3MoJ2llLWJyb3dzZXInKTtcclxuICAgIH0gZWxzZSBpZiAoaXNDaHJvbWUpIHtcclxuICAgICAgICAkKCdib2R5JykuYWRkQ2xhc3MoJ2Nocm9tZS1icm93c2VyJyk7XHJcbiAgICB9XHJcbiAgICBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdNYWMgT1MgWCcpICE9IC0xKSB7XHJcbiAgICAgICAgJCgnYm9keScpLmFkZENsYXNzKCdtYWMnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJCgnYm9keScpLmFkZENsYXNzKCdwYycpO1xyXG4gICAgfVxyXG4gICAgdmFyIGNvbnRyb2xLZXlzID0gWyc4JywgJzEzJywgJzQ2JywgJzQ1JywgJzM2JywgJzM1JywgJzM4JywgJzM3JywgJzQwJywgJzM5J107XHJcblxyXG4gICAgLy9QUkVWQUlMLUFkZGVkIHRvIGhhbmRsZSBmb3JtIGRpYWxvZyBib3hlcyBzZXJ2ZXIgc2lkZSBpc3N1ZXMuXHJcbiAgICAkKCdib2R5Jykub24oJ2NsaWNrJywgJy5kaWFsb2dpZnksIFtkYXRhLWRsZy1vcHRpb25zXSwgW2RhdGEtZGxnLWFjdGlvbl0nLCByZXF1aXJlKCcuL2RpYWxvZ2lmeScpLnNldERpYWxvZ2lmeSlcclxuICAgICAgICAub24oJ2tleWRvd24nLCAndGV4dGFyZWFbZGF0YS1jaGFyYWN0ZXItbGltaXRdJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgdmFyIHRleHQgPSAkLnRyaW0oJCh0aGlzKS52YWwoKSksXHJcbiAgICAgICAgICAgICAgICBjaGFyc0xpbWl0ID0gJCh0aGlzKS5kYXRhKCdjaGFyYWN0ZXItbGltaXQnKSxcclxuICAgICAgICAgICAgICAgIGNoYXJzVXNlZCA9IHRleHQubGVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgaWYgKChjaGFyc1VzZWQgPj0gY2hhcnNMaW1pdCkgJiYgKGNvbnRyb2xLZXlzLmluZGV4T2YoZS53aGljaC50b1N0cmluZygpKSA8IDApKSB7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIC5vbignY2hhbmdlIGtleXVwIG1vdXNldXAnLCAndGV4dGFyZWFbZGF0YS1jaGFyYWN0ZXItbGltaXRdJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdGV4dCA9ICQudHJpbSgkKHRoaXMpLnZhbCgpKSxcclxuICAgICAgICAgICAgICAgIGNoYXJzTGltaXQgPSAkKHRoaXMpLmRhdGEoJ2NoYXJhY3Rlci1saW1pdCcpLFxyXG4gICAgICAgICAgICAgICAgY2hhcnNVc2VkID0gdGV4dC5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICBjaGFyc1JlbWFpbiA9IGNoYXJzTGltaXQgLSBjaGFyc1VzZWQ7XHJcblxyXG4gICAgICAgICAgICBpZiAoY2hhcnNSZW1haW4gPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnZhbCh0ZXh0LnNsaWNlKDAsIGNoYXJzUmVtYWluKSk7XHJcbiAgICAgICAgICAgICAgICBjaGFyc1JlbWFpbiA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICQodGhpcykubmV4dCgnZGl2LmNoYXItY291bnQnKS5maW5kKCcuY2hhci1yZW1haW4tY291bnQnKS5odG1sKGNoYXJzUmVtYWluKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIGluaXRpYWxpemUgc2VhcmNoIHN1Z2dlc3Rpb25zLCBwZW5kaW5nIHRoZSB2YWx1ZSBvZiB0aGUgc2l0ZSBwcmVmZXJlbmNlKGVuaGFuY2VkU2VhcmNoU3VnZ2VzdGlvbnMpXHJcbiAgICAgKiB0aGlzIHdpbGwgZWl0aGVyIGluaXQgdGhlIGxlZ2FjeShmYWxzZSkgb3IgdGhlIGJldGEgdmVyc2lvbnModHJ1ZSkgb2YgdGhlIHRoZSBzZWFyY2ggc3VnZ2VzdCBmZWF0dXJlLlxyXG4gICAgICogKi9cclxuXHJcbiAgICAvKioqIG1pbmljYXJ0IGhpZGUgKioqL1xyXG4gICAgdmFyIG1pbmljYXJ0bGluayA9ICQoJyNoZWFkZXJ3cmFwcGVyICNoZWFkZXIgLnJvdy5jb2x1bW4xICNtaW5pY2FydCAubWluaWNhcnR0b3RhbCAubWluaWNhcnRpY29uLWNvbnQgLm1pbmljYXJ0LWJ1dHRvbicpO1xyXG4gICAgbWluaWNhcnRsaW5rLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPCA5NTkpIHtcclxuICAgICAgICAgICAgJCgnI21pbmljYXJ0IC5taW5pY2FydGNvbnRlbnQnKS5oaWRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgdmFyICRzZWFyY2hDb250YWluZXIgPSAkKCcuc2l0ZS1zdWdnZXN0aW9uLXNlY3Rpb24nKTtcclxuICAgIHNlYXJjaHN1Z2dlc3QuaW5pdCgkc2VhcmNoQ29udGFpbmVyLCBSZXNvdXJjZXMuU0lNUExFX1NFQVJDSCk7XHJcblxyXG4gICAgJCgnI3Bhc3N3b3JkLXJlc2V0Jykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgZGlhbG9nLm9wZW4oe1xyXG4gICAgICAgICAgICB1cmw6ICQoZS50YXJnZXQpLmF0dHIoJ2hyZWYnKSxcclxuICAgICAgICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgICAgICAgICAgLy9TdGFydCBKSVJBIFBSRVYtMzM0IDogVGl0bGUgaXMgbWlzc2luZyBmb3IgdGhlIEZvcmdvdCBwYXNzd29yZCBvdmVybGF5LlxyXG4gICAgICAgICAgICAgICAgdGl0bGU6IFJlc291cmNlcy5GT1JHT1RfUEFTU1dPUkQsXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogNDc1LFxyXG4gICAgICAgICAgICAgICAgZGlhbG9nQ2xhc3M6ICdQYXNzd29yZFJlc2V0RGlhbG9nJyxcclxuICAgICAgICAgICAgICAgIG9wZW46IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNldFBhc3N3b3JkRXZlbnRzKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIHByaW50IGhhbmRsZXJcclxuICAgICQoJy5wcmludC1wYWdlJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHdpbmRvdy5wcmludCgpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0pO1xyXG5cclxuICAgICQoJy5tb2JpbGUtYmFubmVyLXN0dWZmJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgaWYgKCQoJy5jYWxsb3V0ZXhpc3QnKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHZhciBwcm9tb0NhbGxPdXQgPSAkKCcuY2FsbG91dGV4aXN0JykuaHRtbCgpO1xyXG4gICAgICAgICAgICB2YXIgYmFubmVyRGlhbG9nT3BlbiA9IGRpYWxvZy5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiAnI2NhbGxvdXRleGlzdCcsXHJcbiAgICAgICAgICAgICAgICBvcHRpb25zOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlhbG9nQ2xhc3M6ICdkaWFsb2dCYW5uZXInXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB1dGlsLnNjcm9sbEJyb3dzZXIoJCgnaHRtbCcpLm9mZnNldCgpLnRvcCk7XHJcbiAgICAgICAgICAgIGJhbm5lckRpYWxvZ09wZW4uaHRtbChwcm9tb0NhbGxPdXQpO1xyXG4gICAgICAgICAgICAkKCcudWktZGlhbG9nLWNvbnRlbnQ6dmlzaWJsZScpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5kaWFsb2coJ29wdGlvbicsICdwb3NpdGlvbicsICQodGhpcykuZGlhbG9nKCdvcHRpb24nLCAncG9zaXRpb24nKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBiYW5uZXJEaWFsb2dPcGVuLmRpYWxvZygnb3BlbicpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5kaWFsb2dCYW5uZXIgI2Nsb3NlQnRuMDEnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5kaWFsb2dCYW5uZXInKS5maW5kKCcudWktZGlhbG9nLXRpdGxlYmFyLWNsb3NlJykudHJpZ2dlcignY2xpY2snKTtcclxuICAgIH0pO1xyXG4gICAgLy9mb290ZXIgY2hhbmdlIHJlZ2lvbiBldmVudFxyXG4gICAgJCgnLmNoYW5nZS1yZWdpb24tZm9vdGVyJykuaG92ZXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJy5kb21haW5zd2l0Y2gnKS5zaG93KCk7XHJcbiAgICB9LCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnLmRvbWFpbnN3aXRjaCcpLmhpZGUoKTtcclxuICAgIH0pO1xyXG4gICAgJCgnLmRvbWFpbnN3aXRjaCcpLmhvdmVyKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKHRoaXMpLnNob3coKTtcclxuICAgIH0sIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKHRoaXMpLmhpZGUoKTtcclxuICAgIH0pO1xyXG4gICAgJCgnZGl2LnBzZXVkb19zZWxmX2xhYmVsJykuZWFjaChcclxuICAgICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciAkdGhpcyA9IGpRdWVyeSh0aGlzKTtcclxuICAgICAgICAgICAgdmFyICRpbnB1dCA9ICR0aGlzXHJcbiAgICAgICAgICAgICAgICAuY2hpbGRyZW4oJ2lucHV0W3R5cGU9XCJ0ZXh0XCJdJyk7XHJcbiAgICAgICAgICAgICRpbnB1dC5kYXRhKCd0b2dnbGUnLCAkaW5wdXQudmFsKCkpO1xyXG4gICAgICAgICAgICAvL3VzZWQgdG8gYWRkIGEgY2xhc3MgdG8gcGxhY2Vob2xkZXIgZm9yIHN0eWxpbmdcclxuICAgICAgICAgICAgaWYgKCQoJy5lbWFpbGlucHV0LmVtYWlsZm9vdGVyJykuYXR0cignZGF0YS1wbGFjZWhvbGRlcicpID09ICRpbnB1dC52YWwoKSkge1xyXG4gICAgICAgICAgICAgICAgJCgnLmVtYWlsaW5wdXQuZW1haWxmb290ZXInKS5hZGRDbGFzcygnZm9vdGVycGxhY2UnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogaWYoalF1ZXJ5LnRyaW0oJGlucHV0LnZhbCgpKSAhPSBcIlwiKSB7XHJcbiAgICAgICAgICAgICAgICAgKiAkaW5wdXQuZGF0YSgndG9nZ2xlJykuaGlkZSgpOyB9IGVsc2VcclxuICAgICAgICAgICAgICppZigkaW5wdXQuZGF0YSgndG9nZ2xlJykgJiZcclxuICAgICAgICAgICAgICogJGlucHV0LmRhdGEoJ3RvZ2dsZScpLnNpemUoKSA+PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgKiAkaW5wdXQudmFsKCRpbnB1dC5kYXRhKCd0b2dnbGUnKSk7IH1cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICRpbnB1dFxyXG4gICAgICAgICAgICAgICAgLmJsdXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciAkdGhpcyA9IGpRdWVyeSh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoalF1ZXJ5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudHJpbSgkdGhpcy52YWwoKSkgPT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gJHRoaXMuZGF0YSgndG9nZ2xlJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnZhbCgkdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5kYXRhKCd0b2dnbGUnKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vdXNlZCB0byBhZGQgYSBjbGFzcyB0byBwbGFjZWhvbGRlciBmb3Igc3R5bGluZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJCgnLmVtYWlsaW5wdXQuZW1haWxmb290ZXInKS5hdHRyKCdkYXRhLXBsYWNlaG9sZGVyJykgPT0gJGlucHV0LnZhbCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuZW1haWxpbnB1dC5lbWFpbGZvb3RlcicpLmFkZENsYXNzKCdmb290ZXJwbGFjZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAkaW5wdXRcclxuICAgICAgICAgICAgICAgIC5mb2N1cyhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmVtYWlsaW5wdXQuZW1haWxmb290ZXInKS5yZW1vdmVDbGFzcygnZm9vdGVycGxhY2UnKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSBqUXVlcnkodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCR0aGlzLmRhdGEoJ3RvZ2dsZScpICYmIChqUXVlcnlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50cmltKCR0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnZhbCgpKSA9PSBqUXVlcnlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50cmltKCR0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmRhdGEoJ3RvZ2dsZScpKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gJHRoaXMuZGF0YSgndG9nZ2xlJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy52YWwoJycpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAkdGhpc1xyXG4gICAgICAgICAgICAgICAgLnBhcmVudHMoJ2Zvcm0nKVxyXG4gICAgICAgICAgICAgICAgLnN1Ym1pdChcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkdGhpcyA9IGpRdWVyeSh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYucHNldWRvX3NlbGZfbGFiZWwgaW5wdXQnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmVhY2goXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSBqUXVlcnkodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5kYXRhKCd0b2dnbGUnKSAmJiAkdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5kYXRhKCd0b2dnbGUnKSA9PSAkdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC52YWwoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudmFsKCcnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIC8vXHJcbiAgICAkKCdib2R5Jykub24oJ3N1Ym1pdCcsICcjY3VzdG9tZXJjb250YWN0dXMnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB2YXIgcmVzID0gJCgnI2ctcmVjYXB0Y2hhLXJlc3BvbnNlJykudmFsKCk7XHJcbiAgICAgICAgaWYgKHJlcyA9PSAnJyB8fCByZXMgPT0gdW5kZWZpbmVkIHx8IHJlcy5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAkKCcucmVjYXByY2hhLWVycm9yJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgJGZvcm0gPSAkKHRoaXMpO1xyXG4gICAgICAgIGlmICgkZm9ybS52YWxpZCgpKSB7XHJcbiAgICAgICAgICAgIC8vIHNldCB0aGUgYWN0aW9uXHJcbiAgICAgICAgICAgICQoJzxpbnB1dC8+JykuYXR0cih7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAkZm9ybS5hdHRyKCdhY3Rpb24nKSxcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdoaWRkZW4nXHJcbiAgICAgICAgICAgIH0pLmFwcGVuZFRvKCRmb3JtKTtcclxuICAgICAgICAgICAgLy8gc2VyaWFsaXplIHRoZSBmb3JtIGFuZCBnZXQgdGhlIHBvc3QgdXJsXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0gJGZvcm0uc2VyaWFsaXplKCk7XHJcbiAgICAgICAgICAgIHZhciB1cmwgPSAkZm9ybS5hdHRyKCdhY3Rpb24nKTtcclxuICAgICAgICAgICAgLy8gbWFrZSBzdXJlIHRoZSBzZXJ2ZXIga25vd3MgdGhpcyBpcyBhbiBhamF4IHJlcXVlc3RcclxuICAgICAgICAgICAgaWYgKGRhdGEuaW5kZXhPZignYWpheCcpID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgZGF0YSArPSAnJmZvcm1hdD1hamF4JztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdodG1sJyxcclxuICAgICAgICAgICAgICAgIGRhdGE6IGRhdGFcclxuICAgICAgICAgICAgfSkuZG9uZShmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgIGlmIChuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC8oXFwoaVBvZHxcXChpUGhvbmV8XFwoaVBhZCkvKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkKCcuY29sdW1uLmNvbHNwYW4yJykuZW1wdHkoKS5odG1sKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnLmZpcnN0LWxldmVsJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQodGhpcykuY2hpbGRyZW4oJy5zZWNvbmQtbGV2ZWwnKS50b2dnbGUoKTtcclxuICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdsaXN0LWFjdGl2ZScpO1xyXG4gICAgfSk7XHJcbiAgICAkKCcuZmlyc3QtbGV2ZWwgbGkuYWN0aXZlJykuY2xvc2VzdCgnLmZpcnN0LWxldmVsJykuY2xpY2soKTtcclxuICAgICQoJy5maXJzdC1sZXZlbCBsaSBhJykuY2xpY2soZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB9KTtcclxuICAgICQoJy5maXJzdC1sZXZlbGwnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCh0aGlzKS5jaGlsZHJlbignLnNlY29uZC1sZXZlbGwnKS50b2dnbGUoKTtcclxuICAgICAgICAvLyQodGhpcykudG9nZ2xlQ2xhc3MoJ2xpc3QtYWN0aXZlJyk7XHJcbiAgICB9KTtcclxuICAgICQod2luZG93KS5sb2FkKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgY3VycmVudEl0ZW0gPSBudWxsO1xyXG4gICAgICAgIGlmICgkKCcubmV3TWFyZ2luJykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBjdXJyZW50SXRlbSA9ICQoJy5uZXdNYXJnaW4nKTtcclxuICAgICAgICAgICAgY3VycmVudEl0ZW0ucGFyZW50cygnLmNlbGwtaGVhZGVyJykuYWRkQ2xhc3MoJ25ldy1tYXJnaW4tdXBkYXRlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgkKCcubmV3TWFyZ2luLW9uZScpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY3VycmVudEl0ZW0gPSAkKCcubmV3TWFyZ2luLW9uZScpO1xyXG4gICAgICAgICAgICBjdXJyZW50SXRlbS5wYXJlbnRzKCcuY2VsbC1oZWFkZXInKS5hZGRDbGFzcygnbmV3LW1hcmdpbi11cGRhdGVvbmUnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCQoJy52bWMtbWFudWZhY3R1cmVyLW1hcmdpbicpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY3VycmVudEl0ZW0gPSAkKCcudm1jLW1hbnVmYWN0dXJlci1tYXJnaW4nKTtcclxuICAgICAgICAgICAgY3VycmVudEl0ZW0ucGFyZW50cygnLmNlbGwtaGVhZGVyJykuYWRkQ2xhc3MoJ21hbnVmYWN0dXJlLW1hcmdpbi11cGRhdGUnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCQoJy5zdHJpa2VtYXN0ZXItcGFyYWdyYXBoJykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBjdXJyZW50SXRlbSA9ICQoJy5zdHJpa2VtYXN0ZXItcGFyYWdyYXBoJyk7XHJcbiAgICAgICAgICAgIGN1cnJlbnRJdGVtLnBhcmVudHMoJy5jZWxsLWhlYWRlcicpLmFkZENsYXNzKCdzdHJpa2VtYXN0ZXItbWFyZ2luLXVwZGF0ZScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgc3BhbmNvdW50bGVmdG5hdiA9ICQoJy5wdF9jdXN0b21lcnNlcnZpY2UgLmN1c3RvbWVyIC5jb2x1bW4gLmNvbnRlbnRib3ggLmxlZnQtbmF2LXRvcCAuY29udGVudGJveGNvbnRlbnQgLm5hdi1ncm91cCBsaSBzcGFuJyk7XHJcbiAgICAgICAgc3BhbmNvdW50bGVmdG5hdi5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCQodGhpcykuaGVpZ2h0KCkgPiAxOSkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnbmV3b25lJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCduZXdvbmUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHNwYW5jb3VudGxlZnRuYXYgPSAkKCcucHRfY3VzdG9tZXJzZXJ2aWNlIC5zdHlsZS1jc2VydmljZSAuY29sdW1uIC5jb250ZW50Ym94IC5sZWZ0LW5hdi10b3AgLmNvbnRlbnRib3hjb250ZW50IC5uYXYtZ3JvdXAgbGkgc3BhbicpO1xyXG4gICAgICAgIHNwYW5jb3VudGxlZnRuYXYuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmhlaWdodCgpID4gMTkpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ25ld29uZScpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnbmV3b25lJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAoJCgnLnNoYWRvdy1ib3gnKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnRJdGVtID0gJCgnLnNoYWRvdy1ib3gnKTtcclxuICAgICAgICAgICAgY3VycmVudEl0ZW0ucGFyZW50cygnLnB0X2N1c3RvbWVyc2VydmljZScpLmFkZENsYXNzKCdwdF9jdXN0b21lcnNlcnZpY2UtYm94Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgkKCcuemVyby1tYXJnaW4nKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnRJdGVtID0gJCgnLnplcm8tbWFyZ2luJyk7XHJcbiAgICAgICAgICAgIGN1cnJlbnRJdGVtLnBhcmVudHMoJy5jZWxsLWhlYWRlcicpLmFkZENsYXNzKCd6ZXJvLW1hcmdpbi1jZWxsLWhlYWRlcicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoJCgnLmNoZWNrb3V0bG9naW5zaWduaW4nKS5maW5kKCcuVG9rZW5FeHBpcmVkJykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAkKCcjcGFzc3dvcmQtcmVzZXQnKS50cmlnZ2VyKCdjbGljaycpO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQoJyNkaWFsb2ctY29udGFpbmVyJykuZmluZCgncCcpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIGlmICgkKCcjZGlhbG9nLWNvbnRhaW5lciAjUGFzc3dvcmRSZXNldEZvcm0nKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnI2RpYWxvZy1jb250YWluZXIgI1Bhc3N3b3JkUmVzZXRGb3JtJykucHJlcGVuZCgnPGRpdiBjbGFzcz1cIlRva2VuRXhwaXJlRXJyb3JcIj5XZSYjMzk7cmUgc29ycnksIHRoZSBsaW5rIHRvIHJlc2V0IHlvdXIgcGFzc3dvcmQgaGFzIGV4cGlyZWQuIFJlc2V0IFBhc3N3b3JkIGxpbmtzIGV4cGlyZSBhZnRlciAzMCBtaW51dGVzIGZvciBzZWN1cml0eSBwdXJwb3Nlcy4gUGxlYXNlIHN1Ym1pdCB5b3VyIGVtYWlsIGFnYWluLjwvZGl2PicpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJyNkaWFsb2ctY29udGFpbmVyICNQYXNzd29yZFJlc2V0Rm9ybSAucGFzc3dvcmRlbWFpbCcpLnByZXBlbmQoJzxkaXYgY2xhc3M9XCJFbWFpbGxhYmVsXCI+RW50ZXIgeW91ciBlbWFpbCBhZGRyZXNzIHRvIGdldCByZXNldCBwYXNzd29yZCBpbnN0cnVjdGlvbnMgc2VudCB0byB5b3VyIGluYm94LjwvZGl2PicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCAyMDAwKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgICQod2luZG93KS5yZXNpemUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA+IDk2MCkge1xyXG4gICAgICAgICAgICBpZiAoJCgnI2NvbnRhaW5lcicpLmhhc0NsYXNzKCdqcy1jb250YWluZXItYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAgICQoJyNjb250YWluZXIsIC5vcGVuLW1lbnUtd3JhcCcpLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcjY29udGFpbmVyJykucmVtb3ZlQ2xhc3MoJ2pzLWNvbnRhaW5lci1hY3RpdmUnKS5maW5kKCcubWVudS10b2dnbGUnKS5yZW1vdmVDbGFzcygnanMtbWVudS10b2dnbGUnKTtcclxuICAgICAgICAgICAgICAgICQoJyNtYWluLCAjZm9vdGVybmV3JykudW53cmFwKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcjYnJhbmQtdGFicy1oZWFkZXInKS51bndyYXAoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL21lZ2FtZW51LmluaXQoKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIC8vIGFkZCBnZW5lcmljIHRvZ2dsZSBmdW5jdGlvbmFsaXR5XHJcbiAgICAkKCcudG9nZ2xlJykubmV4dCgnLnRvZ2dsZS1jb250ZW50JykuaGlkZSgpO1xyXG4gICAgaWYgKCQoJy5wdF9jaGVja291dCcpLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgaWYgKCQoJy5wdF9jdXN0b21lcnNlcnZpY2UnKS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAkKCcudG9nZ2xlJykub2ZmKCdjbGljaycpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7IC8vSklSQSBQUkVWLTkwIDogV2hlbiBjbGljayBvbiBhZHZhbmNlIHNlYXJjaCBmcm9tIGdpZnQgcmVnaXN0cnkgbG9naW4gcGFnZSwgZm9jdXMgaXMgaGFwcGVuaW5nIHRvd2FyZHMgdG9wIG9mIHRoZSBwYWdlLlxyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygnZXhwYW5kZWQnKS5uZXh0KCd1bCwgLnRvZ2dsZS1jb250ZW50JykudG9nZ2xlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIHRvZ2dsZSBmb3IgY3VzdG9tZXIgc2VydmljZSBGQVFcclxuICAgIGlmICgkKCcucHRfY3VzdG9tZXJzZXJ2aWNlJykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICQoJy5zZWN0aW9uIGEudG9nZ2xlJykub2ZmKCdjbGljaycpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5uZXh0KCcucmV2ZWFsJykuc2xpZGVUb2dnbGUoJ2Zhc3QnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgJCgnI2Zvb3Rlcm5ldyAuZm9vdGVyLW1haW4gI2xpbmtoZWFkaW5nJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQodGhpcykudG9nZ2xlQ2xhc3MoJ3Nob3cnKTtcclxuICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJ2RpdicpLnRvZ2dsZUNsYXNzKCdleHBhbmRlZCcpO1xyXG4gICAgICAgIGlmICgkKCcjYWJvdXQsICNjdXN0b21lci1zZXJ2aWNlLCAjTW9yZS13YXlzLXRvLXNob3AnKS5oYXNDbGFzcygnZXhwYW5kZWQnKSkge1xyXG4gICAgICAgICAgICAkKCcjcmFwYWxhX2luc2lkZXInKS5hZGRDbGFzcygnbmV3Jyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJCgnI3JhcGFsYV9pbnNpZGVyJykucmVtb3ZlQ2xhc3MoJ25ldycpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoJCgnI2J1c25pbmVzcycpLmhhc0NsYXNzKCdleHBhbmRlZCcpKSB7XHJcbiAgICAgICAgICAgICQoJyNmb2xsb3dfdXMnKS5hZGRDbGFzcygnbmV3Jyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJCgnI2ZvbGxvd191cycpLnJlbW92ZUNsYXNzKCduZXcnKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBmdW5jdGlvbiBpc1RvdWNoRGV2aWNlKCkge1xyXG4gICAgICAgIHJldHVybiB0cnVlID09ICgnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cgfHwgd2luZG93LkRvY3VtZW50VG91Y2ggJiYgZG9jdW1lbnQgaW5zdGFuY2VvZiBEb2N1bWVudFRvdWNoKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoaXNUb3VjaERldmljZSgpID09PSB0cnVlKSB7XHJcbiAgICAgICAgLy9hbGVydCgnVG91Y2ggRGV2aWNlJyk7IC8veW91ciBsb2dpYyBmb3IgdG91Y2ggZGV2aWNlIGhlcmVcclxuICAgICAgICAkKCcub2xkLXN3aW0nKS5yZW1vdmVDbGFzcygnc2hvdycpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgJCgnLm5ldy1zd2ltJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKS5hZGRDbGFzcygnc2hvdycpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAvL2FsZXJ0KCdOb3QgYSBUb3VjaCBEZXZpY2UnKTsvL3lvdXIgbG9naWMgZm9yIG5vbiB0b3VjaCBkZXZpY2UgaGVyZVxyXG4gICAgICAgICQoJy5vbGQtc3dpbScpLnJlbW92ZUNsYXNzKCdoaWRlJykuYWRkQ2xhc3MoJ3Nob3cnKTtcclxuICAgICAgICAkKCcubmV3LXN3aW0nKS5yZW1vdmVDbGFzcygnc2hvdycpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICB9XHJcbiAgICAkKHdpbmRvdykuYmluZCgnc2Nyb2xsIHJlc2l6ZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoJCgnLnJhcGFsYV9kZXZpY2UnKS5sZW5ndGggPiAwICYmICQod2luZG93KS53aWR0aCgpIDwgNzY4KSB7XHJcbiAgICAgICAgICAgIGlmICgkKCcjZm9vdGVyRW1haWxEaWFsb2cudWktZGlhbG9nLWNvbnRlbnQnKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcudWktZGlhbG9nJykuY3NzKHsnbGVmdCc6ICgkKGRvY3VtZW50KS53aWR0aCgpIC0gJCgnLnVpLWRpYWxvZycpLndpZHRoKCkpIC8gMiwgJ3RvcCc6ICcxMDBweCd9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICQoJy51aS1kaWFsb2cnKS5jc3MoeydsZWZ0JzogKCQoZG9jdW1lbnQpLndpZHRoKCkgLSAkKCcudWktZGlhbG9nJykud2lkdGgoKSkgLyAyfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnLnRhYnNIZWFkZXInKS5iaW5kKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgY3VycmVudEl0ZW0gPSAkKHRoaXMpO1xyXG4gICAgICAgIGN1cnJlbnRJdGVtLmNsb3Nlc3QoJy5tb2JpbGUtdGFicy1zZWN0aW9uJykudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy51cGdyYWRlbm93LWxpbmsnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICBzY3JvbGxUb3A6ICQoJy52aXBsb2dpbnNpZ25pbicpLm9mZnNldCgpLnRvcFxyXG4gICAgICAgIH0sIDIwMDApO1xyXG4gICAgfSk7XHJcbiAgICAkKCcubWVudS1jYXRlZ29yeSBsaSAubWVudS1pdGVtLXRvZ2dsZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHZhciAkcGFyZW50TGkgPSAkKGUudGFyZ2V0KS5jbG9zZXN0KCdsaScpO1xyXG4gICAgICAgICRwYXJlbnRMaS5zaWJsaW5ncygnbGknKS5yZW1vdmVDbGFzcygnYWN0aXZlJykuZmluZCgnLm1lbnUtaXRlbS10b2dnbGUnKS5yZW1vdmVDbGFzcygnZmEtY2hldnJvbi11cCBhY3RpdmUnKS5hZGRDbGFzcygnZmEtY2hldnJvbi1yaWdodCcpO1xyXG4gICAgICAgICRwYXJlbnRMaS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgJChlLnRhcmdldCkudG9nZ2xlQ2xhc3MoJ2ZhLWNoZXZyb24tcmlnaHQgZmEtY2hldnJvbi11cCBhY3RpdmUnKTtcclxuICAgIH0pO1xyXG5cclxuICAgICQoJ2JvZHknKS5vbignY2xpY2snLCAnLmRpYWxvZy1jbG9zZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy51aS1kaWFsb2cnKS5maW5kKCcudWktZGlhbG9nLXRpdGxlYmFyLWNsb3NlJykudHJpZ2dlcignY2xpY2snKTtcclxuICAgIH0pO1xyXG4gICAgaWYgKCQod2luZG93KS53aWR0aCgpID4gOTU5KSB7XHJcbiAgICAgICAgdmFyIGl0ZW0gPSAkKCcuc2lnbi11cC1ibGsnKSxcclxuICAgICAgICAgICAgY2xpY2tJdGVtID0gaXRlbS5maW5kKCcudXNlcmxvZ2luJyk7XHJcblxyXG4gICAgICAgIGNsaWNrSXRlbS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAkKCcuZW1haWwtc3Vic2NyaWJlJykuc3VibWl0KGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHZhciAkZm9ybSA9ICQodGhpcyk7XHJcbiAgICAgICAgaWYgKCRmb3JtLnZhbGlkKCkpIHtcclxuICAgICAgICAgICAgLy8gc2V0IHRoZSBhY3Rpb25cclxuICAgICAgICAgICAgJCgnPGlucHV0Lz4nKS5hdHRyKHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICRmb3JtLmF0dHIoJ2FjdGlvbicpLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogJ2hpZGRlbidcclxuICAgICAgICAgICAgfSkuYXBwZW5kVG8oJGZvcm0pO1xyXG4gICAgICAgICAgICAvLyBzZXJpYWxpemUgdGhlIGZvcm0gYW5kIGdldCB0aGUgcG9zdCB1cmxcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSAkZm9ybS5zZXJpYWxpemUoKTtcclxuICAgICAgICAgICAgdmFyIHVybCA9ICRmb3JtLmF0dHIoJ2FjdGlvbicpO1xyXG4gICAgICAgICAgICAvLyBtYWtlIHN1cmUgdGhlIHNlcnZlciBrbm93cyB0aGlzIGlzIGFuIGFqYXggcmVxdWVzdFxyXG4gICAgICAgICAgICBpZiAoZGF0YS5pbmRleE9mKCdhamF4JykgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhICs9ICcmZm9ybWF0PWFqYXgnO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBkaWFsb2cub3Blbih7XHJcbiAgICAgICAgICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsXHJcbiAgICAgICAgICAgICAgICBvcHRpb25zOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdlbWFpbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDgwMCxcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDUzMCxcclxuICAgICAgICAgICAgICAgICAgICBkaWFsb2dDbGFzczogJ2Zvb3RlckVtYWlsRGlhbG9nJ1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG9wZW46IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG59XHJcblxyXG4vKipcclxuICogQHByaXZhdGVcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBkZXNjcmlwdGlvbiBBZGRzIGNsYXNzICgnanMnKSB0byBodG1sIGZvciBjc3MgdGFyZ2V0aW5nIGFuZCBsb2FkcyBqcyBzcGVjaWZpYyBzdHlsZXMuXHJcbiAqL1xyXG5mdW5jdGlvbiBpbml0aWFsaXplRG9tKCkge1xyXG4gICAgLy8gYWRkIGNsYXNzIHRvIGh0bWwgZm9yIGNzcyB0YXJnZXRpbmdcclxuICAgICQoJ2h0bWwnKS5hZGRDbGFzcygnanMnKTtcclxuICAgIGlmIChTaXRlUHJlZmVyZW5jZXMuTElTVElOR19JTkZJTklURV9TQ1JPTEwpIHtcclxuICAgICAgICAkKCdodG1sJykuYWRkQ2xhc3MoJ2luZmluaXRlLXNjcm9sbCcpO1xyXG4gICAgfVxyXG4gICAgLy8gbG9hZCBqcyBzcGVjaWZpYyBzdHlsZXMvL1xyXG4gICAgdXRpbC5saW1pdENoYXJhY3RlcnMoKTtcclxufVxyXG5cclxudmFyIHBhZ2VzID0ge1xyXG4gICAgYWNjb3VudDogcmVxdWlyZSgnLi9wYWdlcy9hY2NvdW50JyksXHJcbiAgICBjYXJ0OiByZXF1aXJlKCcuL3BhZ2VzL2NhcnQnKSxcclxuICAgIGNoZWNrb3V0OiByZXF1aXJlKCcuL3BhZ2VzL2NoZWNrb3V0JyksXHJcbiAgICBjb21wYXJlOiByZXF1aXJlKCcuL3BhZ2VzL2NvbXBhcmUnKSxcclxuICAgIHByb2R1Y3Q6IHJlcXVpcmUoJy4vcGFnZXMvcHJvZHVjdCcpLFxyXG4gICAgcmVnaXN0cnk6IHJlcXVpcmUoJy4vcGFnZXMvcmVnaXN0cnknKSxcclxuICAgIHNlYXJjaDogcmVxdWlyZSgnLi9wYWdlcy9zZWFyY2gnKSxcclxuICAgIHN0b3JlZnJvbnQ6IHJlcXVpcmUoJy4vcGFnZXMvc3RvcmVmcm9udCcpLFxyXG4gICAgd2lzaGxpc3Q6IHJlcXVpcmUoJy4vcGFnZXMvd2lzaGxpc3QnKSxcclxuICAgIHJhcGFsYWluc2lkZXI6IHJlcXVpcmUoJy4vcGFnZXMvcmFwYWxhaW5zaWRlcicpLFxyXG4gICAgc3RvcmVsb2NhdG9yOiByZXF1aXJlKCcuL3BhZ2VzL3N0b3JlbG9jYXRvcicpLFxyXG4gICAgaW50ZXJuYXRpb25hbDogcmVxdWlyZSgnLi9wYWdlcy9pbnRlcm5hdGlvbmFsJyksXHJcbiAgICBibG9nOiByZXF1aXJlKCcuL3BhZ2VzL2Jsb2cnKVxyXG59O1xyXG5cclxudmFyIGFwcCA9IHtcclxuICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodHlwZW9mIGdlb2lwQ291bnRyeUNvZGUgPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICB2YXIgSVBHZW9Db2RlID0gZ2VvaXBDb3VudHJ5Q29kZSgpO1xyXG4gICAgICAgICAgICB2YXIgYWxsb3dlZENvdW50cmllcyA9ICQoJy5hbGxvd2VkLWNvdW50cmllcycpLnRleHQoKTtcclxuICAgICAgICAgICAgaWYgKGFsbG93ZWRDb3VudHJpZXMgPT0gbnVsbCB8fCBhbGxvd2VkQ291bnRyaWVzID09ICdudWxsJyB8fCBhbGxvd2VkQ291bnRyaWVzID09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICBhbGxvd2VkQ291bnRyaWVzID0gJ1VTJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoYWxsb3dlZENvdW50cmllcy5pbmRleE9mKElQR2VvQ29kZSkgPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICQoJ2h0bWwnKS5hZGRDbGFzcygnbm8tcHJpY2luZycpO1xyXG4gICAgICAgICAgICAgICAgJCgnLm5vbi11c2EtYWxlcnQnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICAgICAgJCgnLnVpLWN1c3RvbWVyLC5kaXZpZGVycy5waXBlLC51aS1lbWFpbCwudWktc3RvcmVsb2NhdG9yLC51aS13aXNobGlzdCwudWktbG9naW4sLmhhbmRsZS1ub24tdXMsLndlbGNvbWVtZXNzYWdlLC5hbm9ueW1vdXMsLnNpdGUtc3VnZ2VzdGlvbi1zZWN0aW9uJykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgICAgICQoJy5taW5pY2FydCwgLnByb21vdGlvbmFsLW1lc3NhZ2UsIC5wcm9kdWN0LWNvbG9ycy1zaXplJykuY3NzKHsnZGlzcGxheSc6ICdub25lJ30pO1xyXG4gICAgICAgICAgICAgICAgJCgnI2N1c3RvbWVyLXJldHVybnMsI2N1c3RvbWVyLXNoaXBwaW5nLCNjdXN0b21lci13YXJyYW50eScpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcuYWRkdG93aXNobGlzdCcpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcubm9uLXVzLWNvbnRhY3R1cyBnZW8sLnVzLWNvbnRhY3R1cycpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcubm9uLXVzLWNvbnRhY3R1cy1ub24nKS5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmRlc2t0b3BIaWRlLmhhbmRsZS1ub24tdXMuZ2VvJykucmVtb3ZlQ2xhc3MoJ2Rlc2t0b3BIaWRlJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcubW9iaWxlSGlkZS5oYW5kbGUtbm9uLXVzLmdlbycpLnJlbW92ZUNsYXNzKCdtb2JpbGVIaWRlJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29udGFjdHVzTm9udXNVcmwgPSBVcmxzLmNvbnRhY3R1c25vbnVzO1xyXG4gICAgICAgICAgICAgICAgJCgnLmhhbmRsZS1ub24tdXMuZ2VvJykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgICAgICQoJy5jYS1jb250YWN0dXMtbGluaycpLmF0dHIoJ2hyZWYnLCBjb250YWN0dXNOb251c1VybCk7XHJcbiAgICAgICAgICAgICAgICAkKCcuY3VzdC1ub24tdXMnKS5maW5kKCdhJykuYXR0cignaHJlZicsIGNvbnRhY3R1c05vbnVzVXJsKTtcclxuICAgICAgICAgICAgICAgICQoJy51aS1sb2dpbiwubWFnbmlmaWVyLWljb24nKS5jc3MoeydiYWNrZ3JvdW5kJzogJ25vbmUnfSk7XHJcbiAgICAgICAgICAgICAgICAkKCcuaGFuZGxlLW5vbi11cy12aCcpLmFkZENsYXNzKCd2aGlkZScpO1xyXG4gICAgICAgICAgICAgICAgJCgnLnN1YnNjcmliZScpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcucHJvZHVjdC1wcm9tbywgLm5ld3JlY29tbWVuZGF0aW9uJykuY3NzKHsnZGlzcGxheSc6ICdub25lJ30pO1xyXG4gICAgICAgICAgICAgICAgfSwgNTAwMCk7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDaGVjayBUTFMgc3RhdHVzIGlmIGluZGljYXRlZCBieSBzaXRlIHByZWZlcmVuY2VcclxuICAgICAgICB2YXIgY2hlY2tUTFMgPSBTaXRlUHJlZmVyZW5jZXMuQ0hFQ0tfVExTO1xyXG4gICAgICAgIGlmIChjaGVja1RMUyA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIHZhciB0bHNCcm9zd2VyID0gdGxzLmdldFVzZXJBZ2VudCgpO1xyXG4gICAgICAgICAgICBpZiAoKHRsc0Jyb3N3ZXIubmFtZSA9PSAnQ2hyb21lJyAmJiB0bHNCcm9zd2VyLnZlcnNpb24gPCAyMikgfHwgKHRsc0Jyb3N3ZXIubmFtZSA9PSAnRmlyZWZveCcgJiYgdGxzQnJvc3dlci52ZXJzaW9uIDwgMjcpIHx8ICh0bHNCcm9zd2VyLm5hbWUgPT0gJ1NhZmFyaScgJiYgdGxzQnJvc3dlci52ZXJzaW9uIDwgNSkgfHwgKHRsc0Jyb3N3ZXIubmFtZSA9PSAnTVNJRScgJiYgdGxzQnJvc3dlci52ZXJzaW9uIDwgMTEpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGxzQnJvc3dlci5uYW1lID09ICdNU0lFJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRsc0Jyb3N3ZXIubmFtZSA9ICdJbnRlcm5ldCBFeHBsb3Jlcic7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkKCcuYnJvd3Nlci1jb21wYXRpYmlsaXR5LWFsZXJ0JykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgICAgICQoJy5icm93c2VyLWNvbXBhdGliaWxpdHktYWxlcnQgcCcpLmZpbmQoJy5icm93c2VyX3ZlcnNpb24nKS50ZXh0KCcgJyArIHRsc0Jyb3N3ZXIubmFtZSArICcgJyArIHRsc0Jyb3N3ZXIudmVyc2lvbiArICcuJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaW5pdGlhbGl6ZURvbSgpO1xyXG4gICAgICAgIC8vIGluaXQgc3BlY2lmaWMgZ2xvYmFsIGNvbXBvbmVudHNcclxuICAgICAgICBjb3VudHJpZXMuaW5pdCgpO1xyXG4gICAgICAgIHRvb2x0aXAuaW5pdCgpO1xyXG4gICAgICAgIG1pbmljYXJ0LmluaXQoKTtcclxuICAgICAgICB2YWxpZGF0b3IuaW5pdCgpO1xyXG4gICAgICAgIHVpZXZlbnRzLmluaXQoKTtcclxuICAgICAgICBtZWdhbWVudS5pbml0KCk7XHJcbiAgICAgICAgaGVhZGVyaW5pdC5pbml0KCk7XHJcbiAgICAgICAgc2VhcmNocGxhY2Vob2xkZXIuaW5pdCgpO1xyXG4gICAgICAgIGlmIChTaXRlUHJlZmVyZW5jZXMuR1RNX0VOQUJMRUQpIHtcclxuICAgICAgICAgICAgdGFnbWFuYWdlci5pbml0KHdpbmRvdy5wYWdlQ29udGV4dC5ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHF1aWNrdmlld0Fzc2V0LmluaXQoKTtcclxuXHJcbiAgICAgICAgLy8gZXhlY3V0ZSBwYWdlIHNwZWNpZmljIGluaXRpYWxpemF0aW9uc1xyXG4gICAgICAgICQuZXh0ZW5kKHBhZ2UsIHdpbmRvdy5wYWdlQ29udGV4dCk7XHJcbiAgICAgICAgdmFyIG5zID0gcGFnZS5ucztcclxuICAgICAgICBpZiAobnMgJiYgcGFnZXNbbnNdICYmIHBhZ2VzW25zXS5pbml0KSB7XHJcbiAgICAgICAgICAgIHBhZ2VzW25zXS5pbml0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGluaXRpYWxpemVFdmVudHMoKTtcclxuICAgICAgICByZXF1aXJlKCcuL2Jyb3dzZXJhJykuaW5pdCgpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuLy8gZ2VuZXJhbCBleHRlbnNpb24gZnVuY3Rpb25zXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICBTdHJpbmcuZm9ybWF0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBzID0gYXJndW1lbnRzWzBdO1xyXG4gICAgICAgIHZhciBpLCBsZW4gPSBhcmd1bWVudHMubGVuZ3RoIC0gMTtcclxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIHJlZyA9IG5ldyBSZWdFeHAoJ1xcXFx7JyArIGkgKyAnXFxcXH0nLCAnZ20nKTtcclxuICAgICAgICAgICAgcyA9IHMucmVwbGFjZShyZWcsIGFyZ3VtZW50c1tpICsgMV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcztcclxuICAgIH07XHJcbn0pKCk7XHJcblxyXG5qUXVlcnkoZnVuY3Rpb24gKCkge1xyXG4gICAgalF1ZXJ5KCcuYWNjb3JkaW9uJylcclxuICAgICAgICAuaG92ZXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgJHRoaXMgPSBqUXVlcnkodGhpcyk7XHJcbiAgICAgICAgICAgIGlmICgkdGhpcy5oYXNDbGFzcygnaGlnaGxpZ2h0JykpIHtcclxuICAgICAgICAgICAgICAgICR0aGlzLmFkZENsYXNzKCdjb250ZW50Ym94Jyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkdGhpcy5yZW1vdmVDbGFzcygnY29udGVudGJveCcpLmFkZENsYXNzKCd0YWJvdmVyJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBqUXVlcnkodGhpcykucmVtb3ZlQ2xhc3MoJ3RhYm92ZXInKS5hZGRDbGFzcygnY29udGVudGJveCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciAkdGhpcyA9IGpRdWVyeSh0aGlzKTtcclxuICAgICAgICAgICAgaWYgKCR0aGlzLmZpbmQoJy5leHBhbmRjb250ZW50JykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgJHRoaXMuZmluZCgnaDEnKS50b2dnbGVDbGFzcygnZG93bmFycm93JykubmV4dCgpLnRvZ2dsZSgnZmFzdCcpO1xyXG4gICAgICAgICAgICAgICAgJHRoaXMudG9nZ2xlQ2xhc3MoJ2hpZ2hsaWdodCcpLnRvZ2dsZUNsYXNzKCd0YWJvdmVyJykudG9nZ2xlQ2xhc3MoJ2NvbnRlbnRib3gnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJHRoaXMuZmluZCgnYScpLmF0dHIoJ2hyZWYnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG59KTtcclxuXHJcbi8vIGluaXRpYWxpemUgYXBwXHJcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcclxuICAgIGFwcC5pbml0KCk7XHJcbn0pO1xyXG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG52YXIgZGlhbG9nID0gcmVxdWlyZSgnLi9kaWFsb2cnKSxcclxuICAgIHBhZ2UgPSByZXF1aXJlKCcuL3BhZ2UnKSxcclxuICAgIHV0aWwgPSByZXF1aXJlKCcuL3V0aWwnKTtcclxuXHJcbnZhciBzZWxlY3RlZExpc3QgPSBbXTtcclxudmFyIG1heEl0ZW1zID0gMTtcclxudmFyIGJsaVVVSUQgPSAnJztcclxuXHJcbi8qKlxyXG4gKiBAcHJpdmF0ZVxyXG4gKiBAZnVuY3Rpb25cclxuICogZGVzY3JpcHRpb24gR2V0cyBhIGxpc3Qgb2YgYm9udXMgcHJvZHVjdHMgcmVsYXRlZCB0byBhIHByb21vdGVkIHByb2R1Y3RcclxuICovXHJcbmZ1bmN0aW9uIGdldEJvbnVzUHJvZHVjdHMoKSB7XHJcbiAgICB2YXIgYm9udXNwcm9kdWN0cyA9IFtdO1xyXG5cclxuICAgIHZhciBpLCBsZW47XHJcbiAgICBmb3IgKGkgPSAwLCBsZW4gPSBzZWxlY3RlZExpc3QubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICB2YXIgcCA9IHtcclxuICAgICAgICAgICAgcGlkOiBzZWxlY3RlZExpc3RbaV0ucGlkLFxyXG4gICAgICAgICAgICBxdHk6IHNlbGVjdGVkTGlzdFtpXS5xdHksXHJcbiAgICAgICAgICAgIG9wdGlvbnM6IHt9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgYSwgYWxlbiwgYnAgPSBzZWxlY3RlZExpc3RbaV07XHJcbiAgICAgICAgaWYgKGJwLm9wdGlvbnMpIHtcclxuICAgICAgICAgICAgZm9yIChhID0gMCwgYWxlbiA9IGJwLm9wdGlvbnMubGVuZ3RoOyBhIDwgYWxlbjsgYSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb3B0ID0gYnAub3B0aW9uc1thXTtcclxuICAgICAgICAgICAgICAgIHAub3B0aW9ucyA9IHtvcHRpb25OYW1lOiBvcHQubmFtZSwgb3B0aW9uVmFsdWU6IG9wdC52YWx1ZX07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgYm9udXNwcm9kdWN0cy5wdXNoKHtwcm9kdWN0OiBwfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge2JvbnVzcHJvZHVjdHM6IGJvbnVzcHJvZHVjdHN9O1xyXG59XHJcblxyXG52YXIgc2VsZWN0ZWRJdGVtVGVtcGxhdGUgPSBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgdmFyIGF0dHJpYnV0ZXMgPSAnJztcclxuICAgIGZvciAodmFyIGF0dHJJRCBpbiBkYXRhLmF0dHJpYnV0ZXMpIHtcclxuICAgICAgICB2YXIgYXR0ciA9IGRhdGEuYXR0cmlidXRlc1thdHRySURdO1xyXG4gICAgICAgIGF0dHJpYnV0ZXMgKz0gJzxsaSBkYXRhLWF0dHJpYnV0ZS1pZD1cIicgKyBhdHRySUQgKyAnXCI+XFxuJztcclxuICAgICAgICBhdHRyaWJ1dGVzICs9ICc8c3BhbiBjbGFzcz1cImRpc3BsYXktbmFtZVwiPicgKyBhdHRyLmRpc3BsYXlOYW1lICsgJzwvc3Bhbj46ICc7XHJcbiAgICAgICAgYXR0cmlidXRlcyArPSAnPHNwYW4gY2xhc3M9XCJkaXNwbGF5LXZhbHVlXCI+JyArIGF0dHIuZGlzcGxheVZhbHVlICsgJzwvc3Bhbj5cXG4nO1xyXG4gICAgICAgIGF0dHJpYnV0ZXMgKz0gJzwvbGk+JztcclxuICAgIH1cclxuICAgIGF0dHJpYnV0ZXMgKz0gJzxsaSBjbGFzcz1cIml0ZW0tcXR5XCI+XFxuJztcclxuICAgIGF0dHJpYnV0ZXMgKz0gJzxzcGFuIGNsYXNzPVwiZGlzcGxheS1uYW1lXCI+UXR5PC9zcGFuPjogJztcclxuICAgIGF0dHJpYnV0ZXMgKz0gJzxzcGFuIGNsYXNzPVwiZGlzcGxheS12YWx1ZVwiPicgKyBkYXRhLnF0eSArICc8L3NwYW4+JztcclxuICAgIHJldHVybiBbXHJcbiAgICAgICAgJzxsaSBjbGFzcz1cInNlbGVjdGVkLWJvbnVzLWl0ZW1cIiBkYXRhLXV1aWQ9XCInICsgZGF0YS51dWlkICsgJ1wiIGRhdGEtcGlkPVwiJyArIGRhdGEucGlkICsgJ1wiPicsXHJcbiAgICAgICAgJzxpIGNsYXNzPVwicmVtb3ZlLWxpbmsgZmEgZmEtcmVtb3ZlXCIgdGl0bGU9XCJSZW1vdmUgdGhpcyBwcm9kdWN0XCIgaHJlZj1cIiNcIj48L2k+JyxcclxuICAgICAgICAnPGRpdiBjbGFzcz1cIml0ZW0tbmFtZVwiPicgKyBkYXRhLm5hbWUgKyAnPC9kaXY+JyxcclxuICAgICAgICAnPHVsIGNsYXNzPVwiaXRlbS1hdHRyaWJ1dGVzXCI+JyxcclxuICAgICAgICBhdHRyaWJ1dGVzLFxyXG4gICAgICAgICc8dWw+JyxcclxuICAgICAgICAnPGxpPidcclxuICAgIF0uam9pbignXFxuJyk7XHJcbn07XHJcblxyXG4vLyBoaWRlIHN3YXRjaGVzIHRoYXQgYXJlIG5vdCBzZWxlY3RlZCBvciBub3QgcGFydCBvZiBhIFByb2R1Y3QgVmFyaWF0aW9uIEdyb3VwXHJcbnZhciBoaWRlU3dhdGNoZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAkKCcuYm9udXMtcHJvZHVjdC1pdGVtOm5vdChbZGF0YS1wcm9kdWN0dHlwZT1cIm1hc3RlclwiXSkgLnN3YXRjaGVzIGxpJykubm90KCcuc2VsZWN0ZWQnKS5ub3QoJy52YXJpYXRpb24tZ3JvdXAtdmFsdWUnKS5oaWRlKCk7XHJcbiAgICAvLyBwcmV2ZW50IHVuc2VsZWN0aW5nIHRoZSBzZWxlY3RlZCB2YXJpYW50XHJcbiAgICAkKCcuYm9udXMtcHJvZHVjdC1pdGVtIC5zd2F0Y2hlcyAuc2VsZWN0ZWQnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG4vKipcclxuICogQHByaXZhdGVcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBkZXNjcmlwdGlvbiBVcGRhdGVzIHRoZSBzdW1tYXJ5IHBhZ2Ugd2l0aCB0aGUgc2VsZWN0ZWQgYm9udXMgcHJvZHVjdFxyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlU3VtbWFyeSgpIHtcclxuICAgIHZhciAkYm9udXNQcm9kdWN0TGlzdCA9ICQoJyNib251cy1wcm9kdWN0LWxpc3QnKTtcclxuICAgIGlmICghc2VsZWN0ZWRMaXN0Lmxlbmd0aCkge1xyXG4gICAgICAgICRib251c1Byb2R1Y3RMaXN0LmZpbmQoJ2xpLnNlbGVjdGVkLWJvbnVzLWl0ZW0nKS5yZW1vdmUoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdmFyIHVsTGlzdCA9ICRib251c1Byb2R1Y3RMaXN0LmZpbmQoJ3VsLnNlbGVjdGVkLWJvbnVzLWl0ZW1zJykuZmlyc3QoKTtcclxuICAgICAgICB2YXIgaSwgbGVuO1xyXG4gICAgICAgIGZvciAoaSA9IDAsIGxlbiA9IHNlbGVjdGVkTGlzdC5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgaXRlbSA9IHNlbGVjdGVkTGlzdFtpXTtcclxuICAgICAgICAgICAgdmFyIGxpID0gc2VsZWN0ZWRJdGVtVGVtcGxhdGUoaXRlbSk7XHJcbiAgICAgICAgICAgICQobGkpLmFwcGVuZFRvKHVsTGlzdCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGdldCByZW1haW5pbmcgaXRlbSBjb3VudFxyXG4gICAgdmFyIHJlbWFpbiA9IG1heEl0ZW1zIC0gc2VsZWN0ZWRMaXN0Lmxlbmd0aDtcclxuICAgICRib251c1Byb2R1Y3RMaXN0LmZpbmQoJy5ib251cy1pdGVtcy1hdmFpbGFibGUnKS50ZXh0KHJlbWFpbik7XHJcbiAgICBpZiAocmVtYWluIDw9IDApIHtcclxuICAgICAgICAkYm9udXNQcm9kdWN0TGlzdC5maW5kKCcuc2VsZWN0LWJvbnVzLWl0ZW0nKS5hdHRyKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAkYm9udXNQcm9kdWN0TGlzdC5maW5kKCcuc2VsZWN0LWJvbnVzLWl0ZW0nKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBpbml0aWFsaXplR3JpZCgpIHtcclxuICAgIHZhciAkYm9udXNQcm9kdWN0ID0gJCgnI2JvbnVzLXByb2R1Y3QtZGlhbG9nJyksXHJcbiAgICAgICAgJGJvbnVzUHJvZHVjdExpc3QgPSAkKCcjYm9udXMtcHJvZHVjdC1saXN0JyksXHJcbiAgICAgICAgYmxpRGF0YSA9ICRib251c1Byb2R1Y3RMaXN0LmRhdGEoJ2xpbmUtaXRlbS1kZXRhaWwnKTtcclxuICAgIG1heEl0ZW1zID0gYmxpRGF0YS5tYXhJdGVtcztcclxuICAgIGJsaVVVSUQgPSBibGlEYXRhLnV1aWQ7XHJcblxyXG4gICAgaWYgKGJsaURhdGEuaXRlbUNvdW50ID49IG1heEl0ZW1zKSB7XHJcbiAgICAgICAgJGJvbnVzUHJvZHVjdExpc3QuZmluZCgnLnNlbGVjdC1ib251cy1pdGVtJykuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgY2FydEl0ZW1zID0gJGJvbnVzUHJvZHVjdExpc3QuZmluZCgnLnNlbGVjdGVkLWJvbnVzLWl0ZW0nKTtcclxuICAgIGNhcnRJdGVtcy5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgY2kgPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciBwcm9kdWN0ID0ge1xyXG4gICAgICAgICAgICB1dWlkOiBjaS5kYXRhKCd1dWlkJyksXHJcbiAgICAgICAgICAgIHBpZDogY2kuZGF0YSgncGlkJyksXHJcbiAgICAgICAgICAgIHF0eTogY2kuZmluZCgnLml0ZW0tcXR5JykudGV4dCgpLFxyXG4gICAgICAgICAgICBuYW1lOiBjaS5maW5kKCcuaXRlbS1uYW1lJykuaHRtbCgpLFxyXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiB7fVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIGF0dHJpYnV0ZXMgPSBjaS5maW5kKCd1bC5pdGVtLWF0dHJpYnV0ZXMgbGknKTtcclxuICAgICAgICBhdHRyaWJ1dGVzLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgbGkgPSAkKHRoaXMpO1xyXG4gICAgICAgICAgICBwcm9kdWN0LmF0dHJpYnV0ZXNbbGkuZGF0YSgnYXR0cmlidXRlSWQnKV0gPSB7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogbGkuY2hpbGRyZW4oJy5kaXNwbGF5LW5hbWUnKS5odG1sKCksXHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5VmFsdWU6IGxpLmNoaWxkcmVuKCcuZGlzcGxheS12YWx1ZScpLmh0bWwoKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHNlbGVjdGVkTGlzdC5wdXNoKHByb2R1Y3QpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJGJvbnVzUHJvZHVjdExpc3Qub24oJ2NsaWNrJywgJy5ib251cy1wcm9kdWN0LWl0ZW0gYVtocmVmXS5zd2F0Y2hhbmNob3InLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB2YXIgdXJsID0gdGhpcy5ocmVmLFxyXG4gICAgICAgICAgICAkdGhpcyA9ICQodGhpcyk7XHJcbiAgICAgICAgdXJsID0gdXRpbC5hcHBlbmRQYXJhbXNUb1VybCh1cmwsIHtcclxuICAgICAgICAgICAgJ3NvdXJjZSc6ICdib251cycsXHJcbiAgICAgICAgICAgICdmb3JtYXQnOiAnYWpheCdcclxuICAgICAgICB9KTtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAkdGhpcy5jbG9zZXN0KCcuYm9udXMtcHJvZHVjdC1pdGVtJykuZW1wdHkoKS5odG1sKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgIGhpZGVTd2F0Y2hlcygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KVxyXG4gICAgICAgIC5vbignY2hhbmdlJywgJy5pbnB1dC10ZXh0JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkYm9udXNQcm9kdWN0TGlzdC5maW5kKCcuc2VsZWN0LWJvbnVzLWl0ZW0nKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5ib251cy1wcm9kdWN0LWZvcm0nKS5maW5kKCcucXVhbnRpdHktZXJyb3InKS50ZXh0KCcnKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5vbignY2xpY2snLCAnLnNlbGVjdC1ib251cy1pdGVtJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWRMaXN0Lmxlbmd0aCA+PSBtYXhJdGVtcykge1xyXG4gICAgICAgICAgICAgICAgJGJvbnVzUHJvZHVjdExpc3QuZmluZCgnLnNlbGVjdC1ib251cy1pdGVtJykuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgICAgICRib251c1Byb2R1Y3RMaXN0LmZpbmQoJy5ib251cy1pdGVtcy1hdmFpbGFibGUnKS50ZXh0KCcwJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBmb3JtID0gJCh0aGlzKS5jbG9zZXN0KCcuYm9udXMtcHJvZHVjdC1mb3JtJyksXHJcbiAgICAgICAgICAgICAgICBkZXRhaWwgPSAkKHRoaXMpLmNsb3Nlc3QoJy5wcm9kdWN0LWRldGFpbCcpLFxyXG4gICAgICAgICAgICAgICAgdXVpZCA9IGZvcm0uZmluZCgnaW5wdXRbbmFtZT1cInByb2R1Y3RVVUlEXCJdJykudmFsKCksXHJcbiAgICAgICAgICAgICAgICBxdHlWYWwgPSBmb3JtLmZpbmQoJ2lucHV0W25hbWU9XCJRdWFudGl0eVwiXScpLnZhbCgpLFxyXG4gICAgICAgICAgICAgICAgcXR5ID0gKGlzTmFOKHF0eVZhbCkpID8gMSA6ICgrcXR5VmFsKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChxdHkgPiBtYXhJdGVtcykge1xyXG4gICAgICAgICAgICAgICAgJGJvbnVzUHJvZHVjdExpc3QuZmluZCgnLnNlbGVjdC1ib251cy1pdGVtJykuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgICAgIGZvcm0uZmluZCgnLnF1YW50aXR5LWVycm9yJykudGV4dChSZXNvdXJjZXMuQk9OVVNfUFJPRFVDVF9UT09NQU5ZKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIHByb2R1Y3QgPSB7XHJcbiAgICAgICAgICAgICAgICB1dWlkOiB1dWlkLFxyXG4gICAgICAgICAgICAgICAgcGlkOiBmb3JtLmZpbmQoJ2lucHV0W25hbWU9XCJwaWRcIl0nKS52YWwoKSxcclxuICAgICAgICAgICAgICAgIHF0eTogcXR5LFxyXG4gICAgICAgICAgICAgICAgbmFtZTogZGV0YWlsLmZpbmQoJy5wcm9kdWN0LW5hbWUnKS50ZXh0KCksXHJcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiBkZXRhaWwuZmluZCgnLnByb2R1Y3QtdmFyaWF0aW9ucycpLmRhdGEoJ2F0dHJpYnV0ZXMnKSxcclxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IFtdXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB2YXIgb3B0aW9uU2VsZWN0cyA9IGZvcm0uZmluZCgnLnByb2R1Y3Qtb3B0aW9uJyk7XHJcblxyXG4gICAgICAgICAgICBvcHRpb25TZWxlY3RzLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcHJvZHVjdC5vcHRpb25zLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJCh0aGlzKS52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiAkKHRoaXMpLmNoaWxkcmVuKCc6c2VsZWN0ZWQnKS5maXJzdCgpLmh0bWwoKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBzZWxlY3RlZExpc3QucHVzaChwcm9kdWN0KTtcclxuICAgICAgICAgICAgdXBkYXRlU3VtbWFyeSgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLm9uKCdjbGljaycsICcucmVtb3ZlLWxpbmsnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHZhciBjb250YWluZXIgPSAkKHRoaXMpLmNsb3Nlc3QoJy5zZWxlY3RlZC1ib251cy1pdGVtJyk7XHJcbiAgICAgICAgICAgIGlmICghY29udGFpbmVyLmRhdGEoJ3V1aWQnKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgdXVpZCA9IGNvbnRhaW5lci5kYXRhKCd1dWlkJyk7XHJcbiAgICAgICAgICAgIHZhciBpLCBsZW4gPSBzZWxlY3RlZExpc3QubGVuZ3RoO1xyXG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZExpc3RbaV0udXVpZCA9PT0gdXVpZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkTGlzdC5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdXBkYXRlU3VtbWFyeSgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLm9uKCdjbGljaycsICcuYWRkLXRvLWNhcnQtYm9udXMnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHZhciB1cmwgPSB1dGlsLmFwcGVuZFBhcmFtc1RvVXJsKFVybHMuYWRkQm9udXNQcm9kdWN0LCB7Ym9udXNEaXNjb3VudExpbmVJdGVtVVVJRDogYmxpVVVJRH0pO1xyXG4gICAgICAgICAgICB2YXIgYm9udXNQcm9kdWN0cyA9IGdldEJvbnVzUHJvZHVjdHMoKTtcclxuICAgICAgICAgICAgaWYgKGJvbnVzUHJvZHVjdHMuYm9udXNwcm9kdWN0c1swXS5wcm9kdWN0LnF0eSA+IG1heEl0ZW1zKSB7XHJcbiAgICAgICAgICAgICAgICBib251c1Byb2R1Y3RzLmJvbnVzcHJvZHVjdHNbMF0ucHJvZHVjdC5xdHkgPSBtYXhJdGVtcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBtYWtlIHRoZSBzZXJ2ZXIgY2FsbFxyXG4gICAgICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICAgICAgICAgIGNhY2hlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KGJvbnVzUHJvZHVjdHMpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuZG9uZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gc3VjY2Vzc1xyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2UucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5mYWlsKGZ1bmN0aW9uICh4aHIsIHRleHRTdGF0dXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBmYWlsZWRcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGV4dFN0YXR1cyA9PT0gJ3BhcnNlcmVycm9yJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuYWxlcnQoUmVzb3VyY2VzLkJBRF9SRVNQT05TRSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmFsZXJ0KFJlc291cmNlcy5TRVJWRVJfQ09OTkVDVElPTl9FUlJPUik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5hbHdheXMoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRib251c1Byb2R1Y3QuZGlhbG9nKCdjbG9zZScpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAub24oJ2NsaWNrJywgJyNtb3JlLWJvbnVzLXByb2R1Y3RzJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB2YXIgdXVpZCA9ICQoJyNib251cy1wcm9kdWN0LWxpc3QnKS5kYXRhKCkubGluZUl0ZW1EZXRhaWwudXVpZDtcclxuXHJcbiAgICAgICAgICAgIC8vZ2V0IHRoZSBuZXh0IHBhZ2Ugb2YgY2hvaWNlIG9mIGJvbnVzIHByb2R1Y3RzXHJcbiAgICAgICAgICAgIHZhciBsaW5lSXRlbURldGFpbCA9IEpTT04ucGFyc2UoJCgnI2JvbnVzLXByb2R1Y3QtbGlzdCcpLmF0dHIoJ2RhdGEtbGluZS1pdGVtLWRldGFpbCcpKTtcclxuICAgICAgICAgICAgbGluZUl0ZW1EZXRhaWwucGFnZVN0YXJ0ID0gbGluZUl0ZW1EZXRhaWwucGFnZVN0YXJ0ICsgbGluZUl0ZW1EZXRhaWwucGFnZVNpemU7XHJcbiAgICAgICAgICAgICQoJyNib251cy1wcm9kdWN0LWxpc3QnKS5hdHRyKCdkYXRhLWxpbmUtaXRlbS1kZXRhaWwnLCBKU09OLnN0cmluZ2lmeShsaW5lSXRlbURldGFpbCkpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHVybCA9IHV0aWwuYXBwZW5kUGFyYW1zVG9VcmwoVXJscy5nZXRCb251c1Byb2R1Y3RzLCB7XHJcbiAgICAgICAgICAgICAgICBib251c0Rpc2NvdW50TGluZUl0ZW1VVUlEOiB1dWlkLFxyXG4gICAgICAgICAgICAgICAgZm9ybWF0OiAnYWpheCcsXHJcbiAgICAgICAgICAgICAgICBsYXp5TG9hZDogJ3RydWUnLFxyXG4gICAgICAgICAgICAgICAgcGFnZVN0YXJ0OiBsaW5lSXRlbURldGFpbC5wYWdlU3RhcnQsXHJcbiAgICAgICAgICAgICAgICBwYWdlU2l6ZTogJCgnI2JvbnVzLXByb2R1Y3QtbGlzdCcpLmRhdGEoKS5saW5lSXRlbURldGFpbC5wYWdlU2l6ZSxcclxuICAgICAgICAgICAgICAgIGJvbnVzUHJvZHVjdHNUb3RhbDogJCgnI2JvbnVzLXByb2R1Y3QtbGlzdCcpLmRhdGEoKS5saW5lSXRlbURldGFpbC5icFRvdGFsXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdHRVQnLFxyXG4gICAgICAgICAgICAgICAgY2FjaGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgICAgIHVybDogdXJsXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuZG9uZShmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vYWRkIHRoZSBuZXcgcGFnZSB0byBET00gYW5kIHJlbW92ZSAnTW9yZScgbGluayBpZiBpdCBpcyB0aGUgbGFzdCBwYWdlIG9mIHJlc3VsdHNcclxuICAgICAgICAgICAgICAgICAgICAkKCcjbW9yZS1ib251cy1wcm9kdWN0cycpLmJlZm9yZShkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoKGxpbmVJdGVtRGV0YWlsLnBhZ2VTdGFydCArIGxpbmVJdGVtRGV0YWlsLnBhZ2VTaXplKSA+PSAkKCcjYm9udXMtcHJvZHVjdC1saXN0JykuZGF0YSgpLmxpbmVJdGVtRGV0YWlsLmJwVG90YWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnI21vcmUtYm9udXMtcHJvZHVjdHMnKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmZhaWwoZnVuY3Rpb24gKHhociwgdGV4dFN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ZXh0U3RhdHVzID09PSAncGFyc2VyZXJyb3InKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5hbGVydChSZXNvdXJjZXMuQkFEX1JFU1BPTlNFKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuYWxlcnQoUmVzb3VyY2VzLlNFUlZFUl9DT05ORUNUSU9OX0VSUk9SKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxufVxyXG5cclxudmFyIGJvbnVzUHJvZHVjdHNWaWV3ID0ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb25cclxuICAgICAqIEBkZXNjcmlwdGlvbiBPcGVuIHRoZSBsaXN0IG9mIGJvbnVzIHByb2R1Y3RzIHNlbGVjdGlvbiBkaWFsb2dcclxuICAgICAqL1xyXG4gICAgc2hvdzogZnVuY3Rpb24gKHVybCkge1xyXG4gICAgICAgIHZhciAkYm9udXNQcm9kdWN0ID0gJCgnI2JvbnVzLXByb2R1Y3QtZGlhbG9nJyk7XHJcbiAgICAgICAgLy8gY3JlYXRlIHRoZSBkaWFsb2dcclxuICAgICAgICBkaWFsb2cub3Blbih7XHJcbiAgICAgICAgICAgIHRhcmdldDogJGJvbnVzUHJvZHVjdCxcclxuICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcclxuICAgICAgICAgICAgICAgIHdpZHRoOiA3OTUsXHJcbiAgICAgICAgICAgICAgICB0aXRsZTogUmVzb3VyY2VzLkJPTlVTX1BST0RVQ1RTXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpbml0aWFsaXplR3JpZCgpO1xyXG4gICAgICAgICAgICAgICAgaGlkZVN3YXRjaGVzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEBmdW5jdGlvblxyXG4gICAgICogQGRlc2NyaXB0aW9uIE9wZW4gYm9udXMgcHJvZHVjdCBwcm9tbyBwcm9tcHQgZGlhbG9nXHJcbiAgICAgKi9cclxuICAgIGxvYWRCb251c09wdGlvbjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcyxcclxuICAgICAgICAgICAgYm9udXNEaXNjb3VudENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ib251cy1kaXNjb3VudC1jb250YWluZXInKTtcclxuICAgICAgICBpZiAoIWJvbnVzRGlzY291bnRDb250YWluZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZ2V0IHRoZSBodG1sIGZyb20gbWluaWNhcnQsIHRoZW4gdHJhc2ggaXRcclxuICAgICAgICB2YXIgYm9udXNEaXNjb3VudENvbnRhaW5lckh0bWwgPSBib251c0Rpc2NvdW50Q29udGFpbmVyLm91dGVySFRNTDtcclxuICAgICAgICBib251c0Rpc2NvdW50Q29udGFpbmVyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYm9udXNEaXNjb3VudENvbnRhaW5lcik7XHJcblxyXG4gICAgICAgIGRpYWxvZy5vcGVuKHtcclxuICAgICAgICAgICAgaHRtbDogYm9udXNEaXNjb3VudENvbnRhaW5lckh0bWwsXHJcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcclxuICAgICAgICAgICAgICAgIHdpZHRoOiA0MDAsXHJcbiAgICAgICAgICAgICAgICB0aXRsZTogUmVzb3VyY2VzLkJPTlVTX1BST0RVQ1QsXHJcbiAgICAgICAgICAgICAgICBidXR0b25zOiBbe1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IFJlc291cmNlcy5TRUxFQ1RfQk9OVVNfUFJPRFVDVFMsXHJcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHV1aWQgPSAkKCcuYm9udXMtcHJvZHVjdC1wcm9tbycpLmRhdGEoJ2xpbmVpdGVtaWQnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybCA9IHV0aWwuYXBwZW5kUGFyYW1zVG9VcmwoVXJscy5nZXRCb251c1Byb2R1Y3RzLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9udXNEaXNjb3VudExpbmVJdGVtVVVJRDogdXVpZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U6ICdib251cycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiAnYWpheCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF6eUxvYWQ6ICdmYWxzZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZVN0YXJ0OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VTaXplOiAxMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib251c1Byb2R1Y3RzVG90YWw6IC0xXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5kaWFsb2coJ2Nsb3NlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2hvdyh1cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBSZXNvdXJjZXMuTk9fVEhBTktTLFxyXG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuZGlhbG9nKCdjbG9zZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1dXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBzaG93IGhpZGUgcHJvbW8gZGV0YWlsc1xyXG4gICAgICAgICAgICAgICAgJCgnLnNob3ctcHJvbW8tZGV0YWlscycpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcucHJvbW8tZGV0YWlscycpLnRvZ2dsZUNsYXNzKCd2aXNpYmxlJyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBib251c1Byb2R1Y3RzVmlldztcclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxuZnVuY3Rpb24gZ2V0VXJsVmFycygpIHtcclxuICAgIHZhciB2YXJzID0gW10sXHJcbiAgICAgICAgaGFzaDtcclxuICAgIHZhciBoYXNoZXMgPSB3aW5kb3cubG9jYXRpb24uaHJlZi5zbGljZSh3aW5kb3cubG9jYXRpb24uaHJlZi5pbmRleE9mKCc/JykgKyAxKS5zcGxpdCgnJicpO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoYXNoZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBoYXNoID0gaGFzaGVzW2ldLnNwbGl0KCc9Jyk7XHJcbiAgICAgICAgdmFycy5wdXNoKGhhc2hbMF0pO1xyXG4gICAgICAgIHZhcnNbaGFzaFswXV0gPSBoYXNoWzFdO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHZhcnM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJ1bkJyb3dzZXJhVGVzdCgpIHtcclxuXHJcbiAgICB2YXIgaG92ZXJTZWxlY3RvciA9IGRlY29kZVVSSShnZXRVcmxWYXJzKCkuaG92ZXIpO1xyXG4gICAgaWYgKGhvdmVyU2VsZWN0b3IgIT09ICcnKSB7XHJcbiAgICAgICAgaG92ZXJTZWxlY3RvciA9IGhvdmVyU2VsZWN0b3IucmVwbGFjZSgnIGVxICcsICc9Jyk7XHJcbiAgICAgICAgaWYgKCQoaG92ZXJTZWxlY3RvcikubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAkKGhvdmVyU2VsZWN0b3IpLnRyaWdnZXIoJ21vdXNlZW50ZXInKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB2YXIgY2xpY2tTZWxlY3RvciA9IGRlY29kZVVSSShnZXRVcmxWYXJzKCkuY2xpY2spO1xyXG4gICAgaWYgKGNsaWNrU2VsZWN0b3IgIT09ICcnKSB7XHJcbiAgICAgICAgY2xpY2tTZWxlY3RvciA9IGNsaWNrU2VsZWN0b3IucmVwbGFjZSgnIGVxICcsICc9Jyk7XHJcbiAgICAgICAgaWYgKCQoY2xpY2tTZWxlY3RvcikubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAkKGNsaWNrU2VsZWN0b3IpLnRyaWdnZXIoJ2NsaWNrJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnRzLmluaXQgPSBmdW5jdGlvbigpIHtcclxuICAgIHJ1bkJyb3dzZXJhVGVzdCgpO1xyXG59O1xyXG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG52YXIgZGlhbG9nID0gcmVxdWlyZSgnLi9kaWFsb2cnKTtcclxudmFyIHV0aWwgPSByZXF1aXJlKCcuL3V0aWwnKTtcclxudmFyIFNlc3Npb25BdHRyaWJ1dGVzID0gd2luZG93LlNlc3Npb25BdHRyaWJ1dGVzO1xyXG5cclxuLyoqXHJcbiAqIEBmdW5jdGlvbiBjYXB0Y2hhICAgIFVzZWQgdG8gZGlzcGxheS9jb250cm9sIHRoZSBzY3JpbSBjb250YWluaW5nIHRoZSBzaW11bGF0ZWQgY2FwdGNoYSBjb2RlXHJcbiAqKi9cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvKipcclxuICAgICAqIGlmIHRoZSBzZXNzaW9uLnByaXZhY3kucmF0ZWxpbWl0ZWQgZWxlbWVudCBpcyBwcmVzZW50IHRoZW4gc2hvdyB0aGUgbm90aWZpY2F0aW9uXHJcbiAgICAgKiBOT1RFOiBZb3Ugd2lsbCBwcm9iYWJseSB3YW50IHRvIHJlcGxhY2UgdGhpcyB3aXRoIGEgY2FsbCB0byBhbiBhY3R1YWwgQ0FQVENIQSBzeXN0ZW0gdG8gcmVwbGFjZSB0aGUgc2ltcGxlIG9uZSBoZXJlXHJcbiAgICAgKi9cclxuICAgIGlmIChTZXNzaW9uQXR0cmlidXRlcy5TSE9XX0NBUFRDSEEpIHtcclxuICAgICAgICBkaWFsb2cub3Blbih7XHJcbiAgICAgICAgICAgIGh0bWw6ICc8aDE+JyArIFJlc291cmNlcy5BUkVfWU9VX0hVTUFOICsgJzwvaDE+JyxcclxuICAgICAgICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgICAgICAgICAgY2xvc2VPbkVzY2FwZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBkaWFsb2dDbGFzczogJ25vLWNsb3NlJyxcclxuICAgICAgICAgICAgICAgIGJ1dHRvbnM6IFt7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogUmVzb3VyY2VzLk9LLFxyXG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSB1dGlsLmFwcGVuZFBhcmFtc1RvVXJsKFVybHMucmF0ZUxpbWl0ZXJSZXNldCwge2Zvcm1hdDogJ2FqYXgnfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHVybFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5kaWFsb2coJ2Nsb3NlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfV1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59O1xyXG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG52YXIgcGFnZSA9IHJlcXVpcmUoJy4vcGFnZScpLFxyXG4gICAgdXRpbCA9IHJlcXVpcmUoJy4vdXRpbCcpLFxyXG4gICAgVFByb21pc2UgPSByZXF1aXJlKCdwcm9taXNlJyk7XHJcblxyXG52YXIgX2N1cnJlbnRDYXRlZ29yeSA9ICcnLFxyXG4gICAgTUFYX0FDVElWRSA9IDY7XHJcblxyXG4vKipcclxuICogQHByaXZhdGVcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBkZXNjcmlwdGlvbiBWZXJpZmllcyB0aGUgbnVtYmVyIG9mIGVsZW1lbnRzIGluIHRoZSBjb21wYXJlIGNvbnRhaW5lciBhbmQgdXBkYXRlcyBpdCB3aXRoIHNlcXVlbnRpYWwgY2xhc3NlcyBmb3IgdWkgdGFyZ2V0aW5nXHJcbiAqL1xyXG5mdW5jdGlvbiByZWZyZXNoQ29udGFpbmVyKCkge1xyXG4gICAgdmFyICRjb21wYXJlQ29udGFpbmVyID0gJCgnLmNvbXBhcmUtaXRlbXMnKTtcclxuICAgIHZhciAkY29tcGFyZUl0ZW1zID0gJGNvbXBhcmVDb250YWluZXIuZmluZCgnLmNvbXBhcmUtaXRlbScpO1xyXG4gICAgdmFyIG51bUFjdGl2ZSA9ICRjb21wYXJlSXRlbXMuZmlsdGVyKCcuYWN0aXZlJykubGVuZ3RoO1xyXG5cclxuICAgIGlmIChudW1BY3RpdmUgPCAyKSB7XHJcbiAgICAgICAgJCgnI2NvbXBhcmUtaXRlbXMtYnV0dG9uJykuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJCgnI2NvbXBhcmUtaXRlbXMtYnV0dG9uJykucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcclxuICAgIH1cclxuICAgIC8qU3RhcnQgSklSQSBQUkVWLTIzNCA6IFBMUCAtIE5vdCBhYmxlIHRvIHJlbW92ZSBpbmRpdmlkdWFsIHByb2R1Y3QgZnJvbSB0aGUgY29tcGFyZSBncmlkIGZyb20gUExQLiovXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRjb21wYXJlSXRlbXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAkKCRjb21wYXJlSXRlbXNbaV0pLmZpbmQoJy5jb21wYXJlLWl0ZW0tbnVtYmVyJykudGV4dChpICsgMSk7XHJcbiAgICB9XHJcbiAgICAvKkVuZCBKSVJBIFBSRVYtMjM0Ki9cclxuICAgICRjb21wYXJlQ29udGFpbmVyLnRvZ2dsZShudW1BY3RpdmUgPiAwKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBwcml2YXRlXHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAZGVzY3JpcHRpb24gQWRkcyBhbiBpdGVtIHRvIHRoZSBjb21wYXJlIGNvbnRhaW5lciBhbmQgcmVmcmVzaGVzIGl0XHJcbiAqL1xyXG5mdW5jdGlvbiBhZGRUb0xpc3QoZGF0YSkge1xyXG4gICAgLy8gZ2V0IHRoZSBmaXJzdCBjb21wYXJlLWl0ZW0gbm90IGN1cnJlbnRseSBhY3RpdmVcclxuICAgIHZhciAkaXRlbSA9ICQoJy5jb21wYXJlLWl0ZW1zIC5jb21wYXJlLWl0ZW0nKS5ub3QoJy5hY3RpdmUnKS5maXJzdCgpLFxyXG4gICAgICAgICRwcm9kdWN0VGlsZSA9ICQoJyMnICsgZGF0YS51dWlkKTtcclxuXHJcbiAgICBpZiAoJGl0ZW0ubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgaWYgKCRwcm9kdWN0VGlsZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICRwcm9kdWN0VGlsZS5maW5kKCcuY29tcGFyZS1jaGVjaycpWzBdLmNoZWNrZWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgd2luZG93LmFsZXJ0KFJlc291cmNlcy5DT01QQVJFX0FERF9GQUlMKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8gaWYgYWxyZWFkeSBhZGRlZCBzb21laG93LCByZXR1cm5cclxuICAgIGlmICgkKCdbZGF0YS11dWlkPVwiJyArIGRhdGEudXVpZCArICdcIl0nKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgLy8gc2V0IGFzIGFjdGl2ZSBpdGVtXHJcbiAgICAkaXRlbS5hZGRDbGFzcygnYWN0aXZlJylcclxuICAgICAgICAuYXR0cignZGF0YS11dWlkJywgZGF0YS51dWlkKVxyXG4gICAgICAgIC5hdHRyKCdkYXRhLWl0ZW1pZCcsIGRhdGEuaXRlbWlkKVxyXG4gICAgICAgIC5kYXRhKCd1dWlkJywgZGF0YS51dWlkKVxyXG4gICAgICAgIC5kYXRhKCdpdGVtaWQnLCBkYXRhLml0ZW1pZClcclxuICAgICAgICAuYXBwZW5kKCQoZGF0YS5pbWcpLmNsb25lKCkuYWRkQ2xhc3MoJ2NvbXBhcmUtaXRlbS1pbWFnZScpKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBwcml2YXRlXHJcbiAqIEBmdW5jdGlvblxyXG4gKiBkZXNjcmlwdGlvbiBSZW1vdmVzIGFuIGl0ZW0gZnJvbSB0aGUgY29tcGFyZSBjb250YWluZXIgYW5kIHJlZnJlc2hlcyBpdFxyXG4gKi9cclxuZnVuY3Rpb24gcmVtb3ZlRnJvbUxpc3QoJGl0ZW0pIHtcclxuICAgIGlmICgkaXRlbS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICAvLyByZW1vdmUgY2xhc3MsIGRhdGEgYW5kIGlkIGZyb20gaXRlbVxyXG4gICAgJGl0ZW0ucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpXHJcbiAgICAgICAgLnJlbW92ZUF0dHIoJ2RhdGEtdXVpZCcpXHJcbiAgICAgICAgLnJlbW92ZUF0dHIoJ2RhdGEtaXRlbWlkJylcclxuICAgICAgICAuZGF0YSgndXVpZCcsICcnKVxyXG4gICAgICAgIC5kYXRhKCdpdGVtaWQnLCAnJylcclxuICAgICAgICAvLyByZW1vdmUgdGhlIGltYWdlXHJcbiAgICAgICAgLmZpbmQoJy5jb21wYXJlLWl0ZW0taW1hZ2UnKS5yZW1vdmUoKTtcclxuXHJcbiAgICAvKlN0YXJ0IEpJUkEgUFJFVi0yMzQgOiBQTFAgLSBOb3QgYWJsZSB0byByZW1vdmUgaW5kaXZpZHVhbCBwcm9kdWN0IGZyb20gdGhlIGNvbXBhcmUgZ3JpZCBmcm9tIFBMUC4qL1xyXG4gICAgdmFyICRjbG9uZUl0ZW0gPSAkaXRlbS5jbG9uZSgpO1xyXG4gICAgJGl0ZW0ucmVtb3ZlKCk7XHJcbiAgICAkY2xvbmVJdGVtLmFwcGVuZFRvKCcuY29tcGFyZS1pdGVtcy1wYW5lbCcpO1xyXG4gICAgcmVmcmVzaENvbnRhaW5lcigpO1xyXG4gICAgLypFbmQgSklSQSBQUkVWLTIzNCovXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZFByb2R1Y3RBamF4KGFyZ3MpIHtcclxuICAgIHZhciBwcm9taXNlID0gbmV3IFRQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6IFVybHMuY29tcGFyZUFkZCxcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgcGlkOiBhcmdzLml0ZW1pZCxcclxuICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBfY3VycmVudENhdGVnb3J5XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbidcclxuICAgICAgICB9KS5kb25lKGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlIHx8ICFyZXNwb25zZS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKFJlc291cmNlcy5DT01QQVJFX0FERF9GQUlMKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgIGluaXRpYWxpemVFdmVudHMoKTsgLy8gSklSQSBQUkVWLTIzNCA6IFBMUCAtIE5vdCBhYmxlIHRvIHJlbW92ZSBpbmRpdmlkdWFsIHByb2R1Y3QgZnJvbSB0aGUgY29tcGFyZSBncmlkIGZyb20gUExQLlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkuZmFpbChmdW5jdGlvbiAoanF4aHIsIHN0YXR1cywgZXJyKSB7XHJcbiAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoZXJyKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBwcm9taXNlO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW1vdmVQcm9kdWN0QWpheChhcmdzKSB7XHJcbiAgICB2YXIgcHJvbWlzZSA9IG5ldyBUUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiBVcmxzLmNvbXBhcmVSZW1vdmUsXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIHBpZDogYXJncy5pdGVtaWQsXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeTogX2N1cnJlbnRDYXRlZ29yeVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nXHJcbiAgICAgICAgfSkuZG9uZShmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgaWYgKCFyZXNwb25zZSB8fCAhcmVzcG9uc2Uuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihSZXNvdXJjZXMuQ09NUEFSRV9SRU1PVkVfRkFJTCkpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uIChqcXhociwgc3RhdHVzLCBlcnIpIHtcclxuICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihlcnIpKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHByb21pc2U7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNoaWZ0SW1hZ2VzKCkge1xyXG4gICAgcmV0dXJuIG5ldyBUUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG4gICAgICAgIHZhciAkaXRlbXMgPSAkKCcuY29tcGFyZS1pdGVtcyAuY29tcGFyZS1pdGVtJyk7XHJcbiAgICAgICAgJGl0ZW1zLmVhY2goZnVuY3Rpb24gKGksIGl0ZW0pIHtcclxuICAgICAgICAgICAgdmFyICRpdGVtID0gJChpdGVtKTtcclxuICAgICAgICAgICAgLy8gbGFzdCBpdGVtXHJcbiAgICAgICAgICAgIGlmIChpID09PSAkaXRlbXMubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlbW92ZUZyb21MaXN0KCRpdGVtKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgJG5leHQgPSAkaXRlbXMuZXEoaSk7IC8vSklSQSBQUkVWLTI2MSA6IFBMUDogV2hlbiBtb3JlIHRoYW4gNiBwcm9kdWN0IGNvbXBhcmVkIHRoZW4gQ29tcGFyZXNlY3Rpb24gbm90IGRpc3BsYXlpbmcgYWxsIHRoZSBwcm9kdWN0IGltYWdlcy4gUmVtb3ZlZCArMVxyXG4gICAgICAgICAgICBpZiAoJG5leHQuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyByZW1vdmUgaXRzIG93biBpbWFnZVxyXG4gICAgICAgICAgICAgICAgJG5leHQuZmluZCgnLmNvbXBhcmUtaXRlbS1pbWFnZScpLmRldGFjaCgpLmFwcGVuZFRvKCRpdGVtKTtcclxuICAgICAgICAgICAgICAgICRpdGVtLmFkZENsYXNzKCdhY3RpdmUnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdkYXRhLXV1aWQnLCAkbmV4dC5kYXRhKCd1dWlkJykpXHJcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2RhdGEtaXRlbWlkJywgJG5leHQuZGF0YSgnaXRlbWlkJykpXHJcbiAgICAgICAgICAgICAgICAgICAgLmRhdGEoJ3V1aWQnLCAkbmV4dC5kYXRhKCd1dWlkJykpXHJcbiAgICAgICAgICAgICAgICAgICAgLmRhdGEoJ2l0ZW1pZCcsICRuZXh0LmRhdGEoJ2l0ZW1pZCcpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJlc29sdmUoKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBkZXNjcmlwdGlvbiBBZGRzIHByb2R1Y3QgdG8gdGhlIGNvbXBhcmUgdGFibGVcclxuICovXHJcbmZ1bmN0aW9uIGFkZFByb2R1Y3QoYXJncykge1xyXG4gICAgdmFyIHByb21pc2U7XHJcbiAgICB2YXIgJGl0ZW1zID0gJCgnLmNvbXBhcmUtaXRlbXMgLmNvbXBhcmUtaXRlbScpO1xyXG4gICAgdmFyICRjYiA9ICQoYXJncy5jYik7XHJcbiAgICB2YXIgbnVtQWN0aXZlID0gJGl0ZW1zLmZpbHRlcignLmFjdGl2ZScpLmxlbmd0aDtcclxuICAgIGlmIChudW1BY3RpdmUgPT09IE1BWF9BQ1RJVkUpIHtcclxuICAgICAgICBpZiAoIXdpbmRvdy5jb25maXJtKFJlc291cmNlcy5DT01QQVJFX0NPTkZJUk1BVElPTikpIHtcclxuICAgICAgICAgICAgJGNiWzBdLmNoZWNrZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gcmVtb3ZlIHByb2R1Y3QgdXNpbmcgaWRcclxuICAgICAgICB2YXIgJGZpcnN0SXRlbSA9ICRpdGVtcy5maXJzdCgpO1xyXG4gICAgICAgIHByb21pc2UgPSByZW1vdmVJdGVtKCRmaXJzdEl0ZW0pLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gc2hpZnRJbWFnZXMoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcHJvbWlzZSA9IFRQcm9taXNlLnJlc29sdmUoMCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcHJvbWlzZS50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gYWRkUHJvZHVjdEFqYXgoYXJncykudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGFkZFRvTGlzdChhcmdzKTtcclxuICAgICAgICAgICAgaWYgKCRjYiAmJiAkY2IubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgJGNiWzBdLmNoZWNrZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJlZnJlc2hDb250YWluZXIoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pLnRoZW4obnVsbCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICgkY2IgJiYgJGNiLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgJGNiWzBdLmNoZWNrZWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAZGVzY3JpcHRpb24gUmVtb3ZlcyBwcm9kdWN0IGZyb20gdGhlIGNvbXBhcmUgdGFibGVcclxuICogQHBhcmFtIHtvYmplY3R9IGFyZ3MgLSB0aGUgYXJndW1lbnRzIG9iamVjdCBzaG91bGQgaGF2ZSB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6IGl0ZW1pZCwgdXVpZCBhbmQgY2IgKGNoZWNrYm94KVxyXG4gKi9cclxuZnVuY3Rpb24gcmVtb3ZlUHJvZHVjdChhcmdzKSB7XHJcbiAgICB2YXIgJGNiID0gYXJncy5jYiA/ICQoYXJncy5jYikgOiBudWxsO1xyXG4gICAgcmV0dXJuIHJlbW92ZVByb2R1Y3RBamF4KGFyZ3MpLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciAkaXRlbSA9ICQoJ1tkYXRhLXV1aWQ9XCInICsgYXJncy51dWlkICsgJ1wiXScpO1xyXG4gICAgICAgIHJlbW92ZUZyb21MaXN0KCRpdGVtKTtcclxuICAgICAgICBpZiAoJGNiICYmICRjYi5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICRjYlswXS5jaGVja2VkID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJlZnJlc2hDb250YWluZXIoKTtcclxuICAgIH0sIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoJGNiICYmICRjYi5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICRjYlswXS5jaGVja2VkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVtb3ZlSXRlbSgkaXRlbSkge1xyXG4gICAgdmFyIHV1aWQgPSAkaXRlbS5kYXRhKCd1dWlkJyksXHJcbiAgICAgICAgJHByb2R1Y3RUaWxlID0gJCgnIycgKyB1dWlkKTtcclxuICAgIHJldHVybiByZW1vdmVQcm9kdWN0KHtcclxuICAgICAgICBpdGVtaWQ6ICRpdGVtLmRhdGEoJ2l0ZW1pZCcpLFxyXG4gICAgICAgIHV1aWQ6IHV1aWQsXHJcbiAgICAgICAgY2I6ICgkcHJvZHVjdFRpbGUubGVuZ3RoID09PSAwKSA/IG51bGwgOiAkcHJvZHVjdFRpbGUuZmluZCgnLmNvbXBhcmUtY2hlY2snKVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAcHJpdmF0ZVxyXG4gKiBAZnVuY3Rpb25cclxuICogQGRlc2NyaXB0aW9uIEluaXRpYWxpemVzIHRoZSBET00tT2JqZWN0IG9mIHRoZSBjb21wYXJlIGNvbnRhaW5lclxyXG4gKi9cclxuZnVuY3Rpb24gaW5pdGlhbGl6ZURvbSgpIHtcclxuICAgIHZhciAkY29tcGFyZUNvbnRhaW5lciA9ICQoJy5jb21wYXJlLWl0ZW1zJyk7XHJcbiAgICBfY3VycmVudENhdGVnb3J5ID0gJGNvbXBhcmVDb250YWluZXIuZGF0YSgnY2F0ZWdvcnknKSB8fCAnJztcclxuICAgIHZhciAkYWN0aXZlID0gJGNvbXBhcmVDb250YWluZXIuZmluZCgnLmNvbXBhcmUtaXRlbScpLmZpbHRlcignLmFjdGl2ZScpO1xyXG4gICAgJGFjdGl2ZS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgJHByb2R1Y3RUaWxlID0gJCgnIycgKyAkKHRoaXMpLmRhdGEoJ3V1aWQnKSk7XHJcbiAgICAgICAgaWYgKCRwcm9kdWN0VGlsZS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkcHJvZHVjdFRpbGUuZmluZCgnLmNvbXBhcmUtY2hlY2snKVswXS5jaGVja2VkID0gdHJ1ZTtcclxuICAgIH0pO1xyXG4gICAgLy8gc2V0IGNvbnRhaW5lciBzdGF0ZVxyXG4gICAgcmVmcmVzaENvbnRhaW5lcigpO1xyXG59XHJcblxyXG4vKipcclxuICogQHByaXZhdGVcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBkZXNjcmlwdGlvbiBJbml0aWFsaXplcyB0aGUgZXZlbnRzIG9uIHRoZSBjb21wYXJlIGNvbnRhaW5lclxyXG4gKi9cclxuZnVuY3Rpb24gaW5pdGlhbGl6ZUV2ZW50cygpIHtcclxuICAgIC8vIGFkZCBldmVudCB0byBidXR0b25zIHRvIHJlbW92ZSBwcm9kdWN0c1xyXG4gICAgJCgnLmNvbXBhcmUtaXRlbScpLm9uKCdjbGljaycsICcuY29tcGFyZS1pdGVtLXJlbW92ZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZW1vdmVJdGVtKCQodGhpcykuY2xvc2VzdCgnLmNvbXBhcmUtaXRlbScpKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIEJ1dHRvbiB0byBnbyB0byBjb21wYXJlIHBhZ2VcclxuICAgICQoJyNjb21wYXJlLWl0ZW1zLWJ1dHRvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBwYWdlLnJlZGlyZWN0KHV0aWwuYXBwZW5kUGFyYW1Ub1VSTChVcmxzLmNvbXBhcmVTaG93LCAnY2F0ZWdvcnknLCBfY3VycmVudENhdGVnb3J5KSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBCdXR0b24gdG8gY2xlYXIgYWxsIGNvbXBhcmVkIGl0ZW1zXHJcbiAgICAvLyByZWx5IG9uIHJlZnJlc2hDb250YWluZXIgdG8gdGFrZSBjYXJlIG9mIGhpZGluZyB0aGUgY29udGFpbmVyXHJcbiAgICAkKCcjY2xlYXItY29tcGFyZWQtaXRlbXMnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnLmNvbXBhcmUtaXRlbXMgLmFjdGl2ZScpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZW1vdmVJdGVtKCQodGhpcykpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGluaXRpYWxpemVEb20oKTtcclxuICAgIGluaXRpYWxpemVFdmVudHMoKTtcclxufTtcclxuXHJcbmV4cG9ydHMuYWRkUHJvZHVjdCA9IGFkZFByb2R1Y3Q7XHJcbmV4cG9ydHMucmVtb3ZlUHJvZHVjdCA9IHJlbW92ZVByb2R1Y3Q7XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuXHJcbnZhciBkaWFsb2cgPSByZXF1aXJlKCcuL2RpYWxvZycpO1xyXG5cclxuLyoqXHJcbiAqIEBmdW5jdGlvbiBjb29raWVwcml2YWN5ICAgIFVzZWQgdG8gZGlzcGxheS9jb250cm9sIHRoZSBzY3JpbSBjb250YWluaW5nIHRoZSBjb29raWUgcHJpdmFjeSBjb2RlXHJcbiAqKi9cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvKipcclxuICAgICAqIElmIHdlIGhhdmUgbm90IGFjY2VwdGVkIGNvb2tpZXMgQU5EIHdlJ3JlIG5vdCBvbiB0aGUgUHJpdmFjeSBQb2xpY3kgcGFnZSwgdGhlbiBzaG93IHRoZSBub3RpZmljYXRpb25cclxuICAgICAqIE5PVEU6IFlvdSB3aWxsIHByb2JhYmx5IHdhbnQgdG8gYWRqdXN0IHRoZSBQcml2YWN5IFBhZ2UgdGVzdCB0byBtYXRjaCB5b3VyIHNpdGUncyBzcGVjaWZpYyBwcml2YWN5IC8gY29va2llIHBhZ2VcclxuICAgICAqL1xyXG4gICAgaWYgKFNpdGVQcmVmZXJlbmNlcy5DT09LSUVfSElOVCA9PT0gdHJ1ZSAmJiBkb2N1bWVudC5jb29raWUuaW5kZXhPZignZHdfY29va2llc19hY2NlcHRlZCcpIDwgMCkge1xyXG4gICAgICAgIC8vIGNoZWNrIGZvciBwcml2YWN5IHBvbGljeSBwYWdlXHJcbiAgICAgICAgaWYgKCQoJy5wcml2YWN5LXBvbGljeScpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBkaWFsb2cub3Blbih7XHJcbiAgICAgICAgICAgICAgICB1cmw6IFVybHMuY29va2llSGludCxcclxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IHtcclxuICAgICAgICAgICAgICAgICAgICBjbG9zZU9uRXNjYXBlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBkaWFsb2dDbGFzczogJ25vLWNsb3NlJyxcclxuICAgICAgICAgICAgICAgICAgICBidXR0b25zOiBbe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBSZXNvdXJjZXMuSV9BR1JFRSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuZGlhbG9nKCdjbG9zZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5hYmxlQ29va2llcygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfV1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBPdGhlcndpc2UsIHdlIGRvbid0IG5lZWQgdG8gc2hvdyB0aGUgYXNzZXQsIGp1c3QgZW5hYmxlIHRoZSBjb29raWVzXHJcbiAgICAgICAgZW5hYmxlQ29va2llcygpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGVuYWJsZUNvb2tpZXMoKSB7XHJcbiAgICAgICAgaWYgKGRvY3VtZW50LmNvb2tpZS5pbmRleE9mKCdkdz0xJykgPCAwKSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmNvb2tpZSA9ICdkdz0xOyBwYXRoPS8nO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZG9jdW1lbnQuY29va2llLmluZGV4T2YoJ2R3X2Nvb2tpZXNfYWNjZXB0ZWQnKSA8IDApIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuY29va2llID0gJ2R3X2Nvb2tpZXNfYWNjZXB0ZWQ9MTsgcGF0aD0vJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmIChkb2N1bWVudC5jb29raWUuaW5kZXhPZignZHdfYWxlcnRfbWVzc2FnZScpID4gMCkge1xyXG4gICAgICAgICQoJyNhbGVydC1tZXNzYWdlJykuaGlkZSgpOyAgICBcclxuICAgIH1cclxuICAgIFxyXG4gICAgJCgnI2Nsb3NlLW5vbi11cy1hbGVydCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7IFxyXG4gICAgICAgICQoJyNhbGVydC1tZXNzYWdlJykuaGlkZSgpO1xyXG4gICAgICAgIGlmIChkb2N1bWVudC5jb29raWUuaW5kZXhPZignZHdfYWxlcnRfbWVzc2FnZScpIDwgMCkge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSAnZHdfYWxlcnRfbWVzc2FnZT0xOyBwYXRoPS8nO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxufTtcclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24gaW5pdCgpIHtcclxuICAgICQoJy5jb3VudHJ5LXNlbGVjdG9yIC5jdXJyZW50LWNvdW50cnknKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnLmNvdW50cnktc2VsZWN0b3IgLnNlbGVjdG9yJykudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICQodGhpcykudG9nZ2xlQ2xhc3MoJ3NlbGVjdG9yLWFjdGl2ZScpO1xyXG4gICAgfSk7XHJcbiAgICAvLyBzZXQgY3VycmVuY3kgZmlyc3QgYmVmb3JlIHJlbG9hZFxyXG4gICAgJCgnLmNvdW50cnktc2VsZWN0b3IgLnNlbGVjdG9yIC5sb2NhbGUnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB2YXIgdXJsID0gdGhpcy5ocmVmO1xyXG4gICAgICAgIHZhciBjdXJyZW5jeSA9IHRoaXMuZ2V0QXR0cmlidXRlKCdkYXRhLWN1cnJlbmN5Jyk7XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICAgICAgdXJsOiBVcmxzLnNldFNlc3Npb25DdXJyZW5jeSxcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgZm9ybWF0OiAnYWpheCcsXHJcbiAgICAgICAgICAgICAgICBjdXJyZW5jeU1uZW1vbmljOiBjdXJyZW5jeVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmRvbmUoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuYWJsZSB0byBzZXQgY3VycmVuY3knKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdXJsO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59O1xyXG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG52YXIgYWpheCA9IHJlcXVpcmUoJy4vYWpheCcpLFxyXG4gICAgdXRpbCA9IHJlcXVpcmUoJy4vdXRpbCcpLFxyXG4gICAgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpLFxyXG4gICAgaW1hZ2VzTG9hZGVkID0gcmVxdWlyZSgnaW1hZ2VzbG9hZGVkJyk7XHJcblxyXG52YXIgZGlhbG9nID0ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb25cclxuICAgICAqIEBkZXNjcmlwdGlvbiBBcHBlbmRzIGEgZGlhbG9nIHRvIGEgZ2l2ZW4gY29udGFpbmVyICh0YXJnZXQpXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zICBwYXJhbXMudGFyZ2V0IGNhbiBiZSBhbiBpZCBzZWxlY3RvciBvciBhbiBqcXVlcnkgb2JqZWN0XHJcbiAgICAgKi9cclxuICAgIGNyZWF0ZTogZnVuY3Rpb24gKHBhcmFtcykge1xyXG4gICAgICAgIHZhciAkdGFyZ2V0LCBpZDtcclxuXHJcbiAgICAgICAgaWYgKF8uaXNTdHJpbmcocGFyYW1zLnRhcmdldCkpIHtcclxuICAgICAgICAgICAgaWYgKHBhcmFtcy50YXJnZXQuY2hhckF0KDApID09PSAnIycpIHtcclxuICAgICAgICAgICAgICAgICR0YXJnZXQgPSAkKHBhcmFtcy50YXJnZXQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJHRhcmdldCA9ICQoJyMnICsgcGFyYW1zLnRhcmdldCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKHBhcmFtcy50YXJnZXQgaW5zdGFuY2VvZiBqUXVlcnkpIHtcclxuICAgICAgICAgICAgJHRhcmdldCA9IHBhcmFtcy50YXJnZXQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJHRhcmdldCA9ICQoJyNkaWFsb2ctY29udGFpbmVyJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBpZiBubyBlbGVtZW50IGZvdW5kLCBjcmVhdGUgb25lXHJcbiAgICAgICAgaWYgKCR0YXJnZXQubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIGlmICgkdGFyZ2V0LnNlbGVjdG9yICYmICR0YXJnZXQuc2VsZWN0b3IuY2hhckF0KDApID09PSAnIycpIHtcclxuICAgICAgICAgICAgICAgIGlkID0gJHRhcmdldC5zZWxlY3Rvci5zdWJzdHIoMSk7XHJcbiAgICAgICAgICAgICAgICAkdGFyZ2V0ID0gJCgnPGRpdj4nKS5hdHRyKCdpZCcsIGlkKS5hZGRDbGFzcygnZGlhbG9nLWNvbnRlbnQnKS5hcHBlbmRUbygnYm9keScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBjcmVhdGUgdGhlIGRpYWxvZ1xyXG4gICAgICAgIHRoaXMuJGNvbnRhaW5lciA9ICR0YXJnZXQ7XHJcbiAgICAgICAgdGhpcy4kY29udGFpbmVyLmRpYWxvZyhfLm1lcmdlKHt9LCB0aGlzLnNldHRpbmdzLCBwYXJhbXMub3B0aW9ucyB8fCB7fSkpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLiRjb250YWluZXI7IC8vIFBSRVZBSUwtQWRkZWQgUmV0dXJuIHZhbHVlLlxyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gT3BlbnMgYSBkaWFsb2cgdXNpbmcgdGhlIGdpdmVuIHVybCAocGFyYW1zLnVybCkgb3IgaHRtbCAocGFyYW1zLmh0bWwpXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zLnVybCBzaG91bGQgY29udGFpbiB0aGUgdXJsXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcGFyYW1zLmh0bWwgY29udGFpbnMgdGhlIGh0bWwgb2YgdGhlIGRpYWxvZyBjb250ZW50XHJcbiAgICAgKi9cclxuICAgIG9wZW46IGZ1bmN0aW9uIChwYXJhbXMpIHtcclxuICAgICAgICAvLyBjbG9zZSBhbnkgb3BlbiBkaWFsb2dcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgdGhpcy5jcmVhdGUocGFyYW1zKTtcclxuICAgICAgICB0aGlzLnJlcGxhY2UocGFyYW1zKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEBkZXNjcmlwdGlvbiBwb3B1bGF0ZSB0aGUgZGlhbG9nIHdpdGggaHRtbCBjb250ZW50LCB0aGVuIG9wZW4gaXRcclxuICAgICAqKi9cclxuICAgIG9wZW5XaXRoQ29udGVudDogZnVuY3Rpb24gKHBhcmFtcykge1xyXG4gICAgICAgIHZhciBjb250ZW50LCBwb3NpdGlvbiwgY2FsbGJhY2s7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy4kY29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29udGVudCA9IHBhcmFtcy5jb250ZW50IHx8IHBhcmFtcy5odG1sO1xyXG4gICAgICAgIGlmICghY29udGVudCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuJGNvbnRhaW5lci5lbXB0eSgpLmh0bWwoY29udGVudCk7XHJcbiAgICAgICAgaWYgKCF0aGlzLiRjb250YWluZXIuZGlhbG9nKCdpc09wZW4nKSkge1xyXG4gICAgICAgICAgICB0aGlzLiRjb250YWluZXIuZGlhbG9nKCdvcGVuJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocGFyYW1zLm9wdGlvbnMpIHtcclxuICAgICAgICAgICAgcG9zaXRpb24gPSBwYXJhbXMub3B0aW9ucy5wb3NpdGlvbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFwb3NpdGlvbikge1xyXG4gICAgICAgICAgICBwb3NpdGlvbiA9IHRoaXMuc2V0dGluZ3MucG9zaXRpb247XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGltYWdlc0xvYWRlZCh0aGlzLiRjb250YWluZXIpLm9uKCdkb25lJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aGlzLiRjb250YWluZXIuZGlhbG9nKCdvcHRpb24nLCAncG9zaXRpb24nLCBwb3NpdGlvbik7XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAgICAgY2FsbGJhY2sgPSAodHlwZW9mIHBhcmFtcy5jYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykgPyBwYXJhbXMuY2FsbGJhY2sgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBjYWxsYmFjaygpO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogQGRlc2NyaXB0aW9uIFJlcGxhY2UgdGhlIGNvbnRlbnQgb2YgY3VycmVudCBkaWFsb2dcclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBwYXJhbXNcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwYXJhbXMudXJsIC0gSWYgdGhlIHVybCBwcm9wZXJ0eSBpcyBwcm92aWRlZCwgYW4gYWpheCBjYWxsIGlzIHBlcmZvcm1lZCB0byBnZXQgdGhlIGNvbnRlbnQgdG8gcmVwbGFjZVxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHBhcmFtcy5odG1sIC0gSWYgbm8gdXJsIHByb3BlcnR5IGlzIHByb3ZpZGVkLCB1c2UgaHRtbCBwcm92aWRlZCB0byByZXBsYWNlXHJcbiAgICAgKi9cclxuICAgIHJlcGxhY2U6IGZ1bmN0aW9uIChwYXJhbXMpIHtcclxuICAgICAgICBpZiAoIXRoaXMuJGNvbnRhaW5lcikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChwYXJhbXMudXJsKSB7XHJcbiAgICAgICAgICAgIHBhcmFtcy51cmwgPSB1dGlsLmFwcGVuZFBhcmFtVG9VUkwocGFyYW1zLnVybCwgJ2Zvcm1hdCcsICdhamF4Jyk7XHJcbiAgICAgICAgICAgIGFqYXgubG9hZCh7XHJcbiAgICAgICAgICAgICAgICB1cmw6IHBhcmFtcy51cmwsXHJcbiAgICAgICAgICAgICAgICBkYXRhOiBwYXJhbXMuZGF0YSxcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXJhbXMuY29udGVudCA9IHJlc3BvbnNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3BlbldpdGhDb250ZW50KHBhcmFtcyk7XHJcbiAgICAgICAgICAgICAgICB9LmJpbmQodGhpcylcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChwYXJhbXMuaHRtbCkge1xyXG4gICAgICAgICAgICB0aGlzLm9wZW5XaXRoQ29udGVudChwYXJhbXMpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEBmdW5jdGlvblxyXG4gICAgICogQGRlc2NyaXB0aW9uIENsb3NlcyB0aGUgZGlhbG9nXHJcbiAgICAgKi9cclxuICAgIGNsb3NlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLiRjb250YWluZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLiRjb250YWluZXIuZGlhbG9nKCdjbG9zZScpO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gU3VibWl0cyB0aGUgZGlhbG9nIGZvcm0gd2l0aCB0aGUgZ2l2ZW4gYWN0aW9uXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gVGhlIGFjdGlvbiB3aGljaCB3aWxsIGJlIHRyaWdnZXJlZCB1cG9uIGZvcm0gc3VibWl0XHJcbiAgICAgKi9cclxuICAgIHN1Ym1pdDogZnVuY3Rpb24gKGFjdGlvbikge1xyXG4gICAgICAgIHZhciAkZm9ybSA9IHRoaXMuJGNvbnRhaW5lci5maW5kKCdmb3JtOmZpcnN0Jyk7XHJcbiAgICAgICAgLy8gc2V0IHRoZSBhY3Rpb25cclxuICAgICAgICAkKCc8aW5wdXQvPicpLmF0dHIoe1xyXG4gICAgICAgICAgICBuYW1lOiBhY3Rpb24sXHJcbiAgICAgICAgICAgIHR5cGU6ICdoaWRkZW4nXHJcbiAgICAgICAgfSkuYXBwZW5kVG8oJGZvcm0pO1xyXG4gICAgICAgIC8vIHNlcmlhbGl6ZSB0aGUgZm9ybSBhbmQgZ2V0IHRoZSBwb3N0IHVybFxyXG4gICAgICAgIHZhciBkYXRhID0gJGZvcm0uc2VyaWFsaXplKCk7XHJcbiAgICAgICAgdmFyIHVybCA9ICRmb3JtLmF0dHIoJ2FjdGlvbicpO1xyXG4gICAgICAgIC8vIG1ha2Ugc3VyZSB0aGUgc2VydmVyIGtub3dzIHRoaXMgaXMgYW4gYWpheCByZXF1ZXN0XHJcbiAgICAgICAgaWYgKGRhdGEuaW5kZXhPZignYWpheCcpID09PSAtMSkge1xyXG4gICAgICAgICAgICBkYXRhICs9ICcmZm9ybWF0PWFqYXgnO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBwb3N0IHRoZSBkYXRhIGFuZCByZXBsYWNlIGN1cnJlbnQgY29udGVudCB3aXRoIHJlc3BvbnNlIGNvbnRlbnRcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB0eXBlOiAnUE9TVCcsXHJcbiAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICBkYXRhOiBkYXRhLFxyXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2h0bWwnLFxyXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoaHRtbCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy4kY29udGFpbmVyLmh0bWwoaHRtbCk7XHJcbiAgICAgICAgICAgICAgICAkKCcudWktZGlhbG9nLWNvbnRlbnQ6dmlzaWJsZScpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuZGlhbG9nKCdvcHRpb24nLCAncG9zaXRpb24nLCAkKHRoaXMpLmRpYWxvZygnb3B0aW9uJywgJ3Bvc2l0aW9uJykpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSxcclxuICAgICAgICAgICAgZmFpbHVyZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmFsZXJ0KFJlc291cmNlcy5TRVJWRVJfRVJST1IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgZXhpc3RzOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuJGNvbnRhaW5lciAmJiAodGhpcy4kY29udGFpbmVyLmxlbmd0aCA+IDApO1xyXG4gICAgfSxcclxuICAgIGlzQWN0aXZlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZXhpc3RzKCkgJiYgKHRoaXMuJGNvbnRhaW5lci5jaGlsZHJlbi5sZW5ndGggPiAwKTtcclxuICAgIH0sXHJcbiAgICBzZXR0aW5nczoge1xyXG4gICAgICAgIGF1dG9PcGVuOiBmYWxzZSxcclxuICAgICAgICBoZWlnaHQ6ICdhdXRvJyxcclxuICAgICAgICBtb2RhbDogdHJ1ZSxcclxuICAgICAgICBvdmVybGF5OiB7XHJcbiAgICAgICAgICAgIG9wYWNpdHk6IDAuNSxcclxuICAgICAgICAgICAgYmFja2dyb3VuZDogJ2JsYWNrJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmVzaXphYmxlOiBmYWxzZSxcclxuICAgICAgICB0aXRsZTogJycsXHJcbiAgICAgICAgd2lkdGg6ICc4MDAnLFxyXG4gICAgICAgIGNsb3NlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQodGhpcykuZGlhbG9nKCdjbG9zZScpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcG9zaXRpb246IHtcclxuICAgICAgICAgICAgbXk6ICdjZW50ZXInLFxyXG4gICAgICAgICAgICBhdDogJ2NlbnRlcicsXHJcbiAgICAgICAgICAgIG9mOiB3aW5kb3csXHJcbiAgICAgICAgICAgIGNvbGxpc2lvbjogJ2ZsaXBmaXQnXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBkaWFsb2c7XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuXHJcbnZhciBhamF4ID0gcmVxdWlyZSgnLi9hamF4JyksXHJcbiAgICB1dGlsID0gcmVxdWlyZSgnLi91dGlsJyksXHJcbiAgICB0b29sdGlwID0gcmVxdWlyZSgnLi90b29sdGlwJyksXHJcbiAgICB2YWxpZGF0b3IgPSByZXF1aXJlKCcuL3ZhbGlkYXRvcicpLFxyXG4gICAgZGlhbG9nID0gcmVxdWlyZSgnLi9kaWFsb2cnKTtcclxuXHJcbnZhciBzZXREaWFsb2dpZnkgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdmFyIGFjdGlvblNvdXJjZSA9ICQodGhpcyksXHJcbiAgICAgICAgZGxnQWN0aW9uID0gJChhY3Rpb25Tb3VyY2UpLmRhdGEoJ2RsZy1hY3Rpb24nKSB8fCB7fSwgLy8gdXJsLCB0YXJnZXQsIGlzRm9ybVxyXG4gICAgICAgIGRsZ09wdGlvbnMgPSAkLmV4dGVuZCh7fSwgZGlhbG9nLnNldHRpbmdzLCAkKGFjdGlvblNvdXJjZSkuZGF0YSgnZGxnLW9wdGlvbnMnKSB8fCB7fSk7XHJcblxyXG4gICAgZGxnT3B0aW9ucy50aXRsZSA9IGRsZ09wdGlvbnMudGl0bGUgfHwgJChhY3Rpb25Tb3VyY2UpLmF0dHIoJ3RpdGxlJykgfHwgJyc7XHJcblxyXG4gICAgdmFyIHVybCA9IGRsZ0FjdGlvbi51cmwgLy8gdXJsIGZyb20gZGF0YVxyXG4gICAgICAgIHx8XHJcbiAgICAgICAgKGRsZ0FjdGlvbi5pc0Zvcm0gPyAkKGFjdGlvblNvdXJjZSkuY2xvc2VzdCgnZm9ybScpLmF0dHIoJ2FjdGlvbicpIDogbnVsbCkgLy8gb3IgdXJsIGZyb20gZm9ybSBhY3Rpb24gaWYgaXNGb3JtPXRydWVcclxuICAgICAgICB8fFxyXG4gICAgICAgICQoYWN0aW9uU291cmNlKS5hdHRyKCdocmVmJyk7IC8vIG9yIHVybCBmcm9tIGhyZWZcclxuXHJcbiAgICBpZiAoIXVybCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgZm9ybSA9IGpRdWVyeSh0aGlzKS5wYXJlbnRzKCdmb3JtJyk7XHJcbiAgICB2YXIgbWV0aG9kID0gZm9ybS5hdHRyKCdtZXRob2QnKSB8fCAnUE9TVCc7XHJcblxyXG4gICAgaWYgKGFjdGlvblNvdXJjZVswXS50YWdOYW1lID09PSAnQlVUVE9OJyAmJiAhZm9ybS52YWxpZCgpIHx8IGFjdGlvblNvdXJjZVswXS50YWdOYW1lID09PSAnSU5QVVQnICYmICFmb3JtLnZhbGlkKCkpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gaWYgdGhpcyBpcyBhIGNvbnRlbnQgbGluaywgdXBkYXRlIHVybCBmcm9tIFBhZ2UtU2hvdyB0byBQYWdlLUluY2x1ZGVcclxuICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdhdHRyaWJ1dGVjb250ZW50bGluaycpKSB7XHJcbiAgICAgICAgdmFyIHVyaSA9IHV0aWwuZ2V0VXJpKHVybCk7XHJcbiAgICAgICAgdXJsID0gVXJscy5wYWdlSW5jbHVkZSArIHVyaS5xdWVyeTtcclxuICAgIH1cclxuICAgIHZhciBwb3N0RGF0YTtcclxuICAgIGlmIChtZXRob2QgJiYgbWV0aG9kLnRvVXBwZXJDYXNlKCkgPT09ICdQT1NUJykge1xyXG4gICAgICAgIHBvc3REYXRhID0gZm9ybS5zZXJpYWxpemUoKSArICcmJyArIGpRdWVyeSh0aGlzKS5hdHRyKCduYW1lJykgKyAnPXN1Ym1pdCc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmICh1cmwuaW5kZXhPZignPycpID09PSAtMSkge1xyXG4gICAgICAgICAgICB1cmwgKz0gJz8nO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHVybCArPSAnJic7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHVybCArPSBmb3JtLnNlcmlhbGl6ZSgpO1xyXG4gICAgICAgIHVybCA9IHV0aWwuYXBwZW5kUGFyYW1Ub1VSTCh1cmwsIGpRdWVyeSh0aGlzKS5hdHRyKCduYW1lJyksICdzdWJtaXQnKTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgZGxnID0gZGlhbG9nLmNyZWF0ZSh7XHJcbiAgICAgICAgdGFyZ2V0OiBkbGdBY3Rpb24udGFyZ2V0LFxyXG4gICAgICAgIG9wdGlvbnM6IGRsZ09wdGlvbnNcclxuICAgIH0pO1xyXG5cclxuICAgIGFqYXgubG9hZCh7XHJcbiAgICAgICAgdXJsOiAkKGFjdGlvblNvdXJjZSkuYXR0cignaHJlZicpIHx8ICQoYWN0aW9uU291cmNlKS5jbG9zZXN0KCdmb3JtJykuYXR0cignYWN0aW9uJyksXHJcbiAgICAgICAgdGFyZ2V0OiBkbGcsXHJcbiAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZGxnLmRpYWxvZygnb3BlbicpOyAvLyBvcGVuIGFmdGVyIGxvYWQgdG8gZW5zdXJlIGRpYWxvZyBpcyBjZW50ZXJlZFxyXG4gICAgICAgICAgICB2YWxpZGF0b3IuaW5pdCgpO1xyXG4gICAgICAgICAgICB0b29sdGlwLmluaXQoKTtcclxuICAgICAgICAgICAgaWYgKGRsZy5maW5kKCcuY2xvc2VkaWFsb2cnKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBkaWFsb2cuY2xvc2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZGF0YTogISQoYWN0aW9uU291cmNlKS5hdHRyKCdocmVmJykgPyBwb3N0RGF0YSA6IG51bGwsXHJcbiAgICAgICAgdHlwZTogbWV0aG9kXHJcblxyXG4gICAgfSk7XHJcbn07XHJcblxyXG5leHBvcnRzLnNldERpYWxvZ2lmeSA9IHNldERpYWxvZ2lmeTtcclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxudmFyIGFqYXggPSByZXF1aXJlKCcuL2FqYXgnKSxcclxuICAgIG1pbmljYXJ0ID0gcmVxdWlyZSgnLi9taW5pY2FydCcpLFxyXG4gICAgdXRpbCA9IHJlcXVpcmUoJy4vdXRpbCcpO1xyXG5cclxudmFyIHNldEFkZFRvQ2FydEhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdmFyIGZvcm0gPSAkKHRoaXMpLmNsb3Nlc3QoJ2Zvcm0nKTtcclxuXHJcbiAgICB2YXIgb3B0aW9ucyA9IHtcclxuICAgICAgICB1cmw6IHV0aWwuYWpheFVybChmb3JtLmF0dHIoJ2FjdGlvbicpKSxcclxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICBjYWNoZTogZmFsc2UsXHJcbiAgICAgICAgZGF0YTogZm9ybS5zZXJpYWxpemUoKVxyXG4gICAgfTtcclxuICAgICQuYWpheChvcHRpb25zKS5kb25lKGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgIGFqYXgubG9hZCh7XHJcbiAgICAgICAgICAgICAgICB1cmw6IFVybHMubWluaWNhcnRHQyxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICBsaW5lSXRlbUlkOiByZXNwb25zZS5yZXN1bHQubGluZUl0ZW1JZFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBtaW5pY2FydC5zaG93KHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgICAgICBmb3JtLmZpbmQoJ2lucHV0LHRleHRhcmVhJykudmFsKCcnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZm9ybS5maW5kKCdzcGFuLmVycm9yJykuaGlkZSgpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpZCBpbiByZXNwb25zZS5lcnJvcnMuRm9ybUVycm9ycykge1xyXG4gICAgICAgICAgICAgICAgdmFyICRlcnJvckVsID0gJCgnIycgKyBpZCkuYWRkQ2xhc3MoJ2Vycm9yJykucmVtb3ZlQ2xhc3MoJ3ZhbGlkJykubmV4dCgnLmVycm9yJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoISRlcnJvckVsIHx8ICRlcnJvckVsLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRlcnJvckVsID0gJCgnPHNwYW4gZm9yPVwiJyArIGlkICsgJ1wiIGdlbmVyYXRlZD1cInRydWVcIiBjbGFzcz1cImVycm9yXCIgc3R5bGU9XCJcIj48L3NwYW4+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnIycgKyBpZCkuYWZ0ZXIoJGVycm9yRWwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJGVycm9yRWwudGV4dChyZXNwb25zZS5lcnJvcnMuRm9ybUVycm9yc1tpZF0ucmVwbGFjZSgvXFxcXCcvZywgJ1xcJycpKS5zaG93KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KS5mYWlsKGZ1bmN0aW9uICh4aHIsIHRleHRTdGF0dXMpIHtcclxuICAgICAgICAvLyBmYWlsZWRcclxuICAgICAgICBpZiAodGV4dFN0YXR1cyA9PT0gJ3BhcnNlcmVycm9yJykge1xyXG4gICAgICAgICAgICB3aW5kb3cuYWxlcnQoUmVzb3VyY2VzLkJBRF9SRVNQT05TRSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgd2luZG93LmFsZXJ0KFJlc291cmNlcy5TRVJWRVJfQ09OTkVDVElPTl9FUlJPUik7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn07XHJcblxyXG5leHBvcnRzLmluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAkKCcjQWRkVG9CYXNrZXRCdXR0b24nKS5vbignY2xpY2snLCBzZXRBZGRUb0NhcnRIYW5kbGVyKTtcclxufTtcclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxudmFyIC8vdWlldmVudHMgPSByZXF1aXJlKCcuL3VpZXZlbnRzJyksXHJcbiAgICBkaWFsb2cgPSByZXF1aXJlKCcuL2RpYWxvZycpLFxyXG4gICAgcHJvZ3Jlc3MgPSByZXF1aXJlKCcuL3Byb2dyZXNzJyk7XHJcblxyXG4vL3ZhciAkY29uID0gJCgnYm9keScpO1xyXG52YXIgYXBwR2xvYmFsID0ge1xyXG4gICAgZ2xvYmFsVGltZXI6IDBcclxufTtcclxudmFyIGhlYWRlckV2ZW50cyA9IHtcclxuICAgIGluaXRpYWxpemVFdmVudDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJ2JvZHknKS5maW5kKCdpbnB1dCwgc2VsZWN0LmlucHV0LXNlbGVjdCcpLmZvY3VzaW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5yZW1vdmVDbGFzcygnaW5wdXRsYWJlbCcpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcuZm9ybS1yb3cgLCAubGFiZWwgc3BhbicpLnJlbW92ZUNsYXNzKCdpbnB1dGxhYmVsJyk7XHJcbiAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2Vycm9yY2xpZW50Jyk7XHJcbiAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5sb2dlcnJvciAsIC5leGlzdGluZ19yZWdpc3RlcicpLmNzcygnZGlzcGxheScsICdub25lJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKCQoJy5sb2dpbmN1c3RvbWVycycpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdmFyIGNycm9iaiA9ICQodGhpcykuZmluZCgnLmZvcm1maWVsZCAgLmxvZ2Vycm9yJyk7XHJcbiAgICAgICAgICAgICQoY3Jyb2JqKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmZvcm0tcm93ICwgLmxhYmVsIHNwYW4nKS5yZW1vdmVDbGFzcygnaW5wdXRsYWJlbCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJCgnLnByaXZhY3ktcG9saWN5Jykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBkaWFsb2cub3Blbih7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICQoZS50YXJnZXQpLmF0dHIoJ2hyZWYnKSxcclxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IHtcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDYwMFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvL2xhYmVsIHRleHQgY29sb3IgY2hhbmdlIG9uIHN1Ym1pdFxyXG4gICAgICAgIGlmICgkKCcuYWNjb3VudC1sb2dzJykubGVuZ3RoID4gMCB8fCAkKCcubmV3LXJlZ2lzdGVyJykubGVuZ3RoID4gMCB8fCAkKCcud2lzaC1sb2dzJykubGVuZ3RoID4gMCB8fCAkKCcuY3JlYXRlYW4tYWNjb3VudCcpLmxlbmd0aCA+IDAgfHwgJCgnLmhlYWRlcmN1c3RvbWVyaW5mbycpLmxlbmd0aCA+IDAgfHwgJCgnLnVpLWxvZ2luJykubGVuZ3RoID4gMCB8fCAkKCcucGFzc3dvcmRyZXNldCcpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgJCgnLmZvcm1hY3Rpb25zIGJ1dHRvbicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQoJ3NwYW4uZXhpc3RpbmdfcmVnaXN0ZXInKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgY3Jyb2JqID0gJCh0aGlzKS5jbG9zZXN0KCdmb3JtJykuZmluZCgnLmZpZWxkLXdyYXBwZXIgLnJlcXVpcmVkJyk7XHJcbiAgICAgICAgICAgICAgICAkKGNycm9iaikuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ2Vycm9yY2xpZW50JykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxhYmVsIC5sYWJlbHRleHQnKS5hZGRDbGFzcygnaW5wdXRsYWJlbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcubGFiZWwgLnJlcXVpcmVkaW5kaWNhdG9yJykuYWRkQ2xhc3MoJ2lucHV0bGFiZWwnKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcubGFiZWwgLmxhYmVsdGV4dCcpLnJlbW92ZUNsYXNzKCdpbnB1dGxhYmVsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5sYWJlbCAucmVxdWlyZWRpbmRpY2F0b3InKS5yZW1vdmVDbGFzcygnaW5wdXRsYWJlbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy9sb2dpbiAmIHdpc2ggbGlzdCB2YWxpZGF0aW9uc1xyXG4gICAgICAgIGlmICgkKCcuYWNjb3VudC1sb2dzJykubGVuZ3RoID4gMCB8fCAkKCcubmV3LXJlZ2lzdGVyJykubGVuZ3RoID4gMCB8fCAkKCcud2lzaC1sb2dzJykubGVuZ3RoID4gMCB8fCAkKCcuY3JlYXRlYW4tYWNjb3VudCcpLmxlbmd0aCA+IDAgfHwgJCgnLmhlYWRlcmN1c3RvbWVyaW5mbycpLmxlbmd0aCA+IDAgfHwgJCgnLnVpLWxvZ2luJykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAkKCdhLmNsZWFyYnV0dG9uJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnaW5wdXQnKS52YWwoJycpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgndGV4dGFyZWEnKS52YWwoJycpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZmllbGQtd3JhcHBlcicpLmZpbmQoJ3NwYW4nKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZpZWxkLXdyYXBwZXInKS5maW5kKCcucmVxdWlyZWQnKS5yZW1vdmVDbGFzcygnZXJyb3JjbGllbnQnKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJ2EuY2xlYXJidXR0b24nKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQgJykuZmluZCgnLmZvcm0tcm93JykucmVtb3ZlQ2xhc3MoJ2lucHV0bGFiZWwnKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5mb3JtLXJvdyAsIC5sYWJlbCBzcGFuJykucmVtb3ZlQ2xhc3MoJ2lucHV0bGFiZWwnKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJ3NwYW4ubG9nZXJyb3IgLCAuZXhpc3RpbmdfcmVnaXN0ZXInKS5oaWRlKCk7XHJcblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgJCgnLnVpLWxvZ2luIC5zaWduLXVwLWJsayA+IGEnKS5vbignbW91c2VlbnRlciBjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA8IDk2MCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGUudHlwZSA9PSAnY2xpY2snICYmICQoJy5hY2NvdW50Y29udGVudCcpLmlzKCc6dmlzaWJsZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGFwcEdsb2JhbC5nbG9iYWxUaW1lcik7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9hcHBHbG9iYWwuZ2xvYmFsVGltZXIgPT0gMDtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuYWNjb3VudGNvbnRlbnQnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmhlYWRlcm1hc2snKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmNvbmZpcm1hdGlvbmNvbnRhaW5lcicpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoJCgnLmhlYWRlci1jcmVhdGUnKS5pcygnOnZpc2libGUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICQoJy5hY2NvdW50Y29udGVudCcpLnJlbW92ZUNsYXNzKCdqcy1lbnRlcmVkJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcuYWNjb3VudGNvbnRlbnQnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcuc2lnbi11cC1ibGsnKS5hZGRDbGFzcygnanMtYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoISQodGhpcykuY2xvc2VzdCgnLnVpLWxvZ2luJykuZmluZCgnLmhlYWRlci1zaWduLWluJykuaXMoJzp2aXNpYmxlJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJFdmVudHMuYWNjb3VudENvbnRQb3MoJCgnLnVpLWxvZ2luIC5zaWduLXVwLWJsayA+IGEnKSwgJCh0aGlzKS5jbG9zZXN0KCcudWktbG9naW4nKS5maW5kKCcuaGVhZGVyLXNpZ24taW4nKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcudWktbG9naW4nKS5maW5kKCcuaGVhZGVyLXNpZ24taW4nKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkKCcuaGVhZGVybWFzaycpLnNob3coKTtcclxuICAgICAgICAgICAgICAgIC8qaWYoYXBwR2xvYmFsLnV0aWwucmVhZENvb2tpZShcImVtYWlsSWRcIikpe1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5oZWFkZXItc2lnbi1pbi5hY2NvdW50Y29udGVudCAuZ3Vlc3RlbWFpbCcpLnZhbChhcHBHbG9iYWwudXRpbC5yZWFkQ29va2llKFwiZW1haWxJZFwiKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmhlYWRlci1zaWduLWluLmFjY291bnRjb250ZW50IC5sb2dpbl9wYXNzd29yZCcpLnJlbW92ZUF0dHIoJ3BsYWNlaG9sZGVyJykudmFsKCcnKTtcclxuICAgICAgICAgICAgICAgIH0qL1xyXG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGFwcEdsb2JhbC5nbG9iYWxUaW1lcik7XHJcbiAgICAgICAgICAgICAgICAvL2FwcEdsb2JhbC5nbG9iYWxUaW1lciA9PSAwO1xyXG4gICAgICAgICAgICAgICAgYXBwR2xvYmFsLmdsb2JhbFRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmFjY291bnRjb250ZW50JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5oZWFkZXJtYXNrJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5oZWFkZXJjdXN0b21lcmluZm8nKS5maW5kKCcuanMtYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2pzLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgfSwgNTAwMCk7XHJcbiAgICAgICAgICAgICAgICAkKCcuY29uZmlybWF0aW9uY29udGFpbmVyJykuaGlkZSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoJy5zaWduaW5naW4nKS5jbGljayhmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICQoJy5hY2NvdW50Y29udGVudCcpLmhpZGUoKTtcclxuICAgICAgICAgICAgdmFyIHZhbGlkYXRvciA9ICQodGhpcykuY2xvc2VzdCgnZm9ybScpLnZhbGlkYXRlKCk7XHJcbiAgICAgICAgICAgIGlmICh2YWxpZGF0b3IuZWxlbWVudCgkKHRoaXMpLmNsb3Nlc3QoJ2Zvcm0nKS5maW5kKCcuZ3Vlc3RlbWFpbCcpKSkge1xyXG4gICAgICAgICAgICAgICAgJCgnLmFjY291bnRjb250ZW50IC5ndWVzdGVtYWlsJykudmFsKCQodGhpcykuY2xvc2VzdCgnLmFjY291bnRjb250ZW50JykuZmluZCgnLmd1ZXN0ZW1haWwnKS52YWwoKSk7XHJcbiAgICAgICAgICAgICAgICAkKCcuYWNjb3VudGNvbnRlbnQgLmd1ZXN0ZW1haWwnKS5yZW1vdmVDbGFzcygnZXJyb3InKTtcclxuICAgICAgICAgICAgICAgICQoJy5hY2NvdW50Y29udGVudCAuZ3Vlc3RlbWFpbCcpLm5leHQoJ3NwYW4uZXJyb3InKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICQoJy5sb2dpbl9wYXNzd29yZCcpLnJlbW92ZUNsYXNzKCdlcnJvcicpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmxvZ2luX3Bhc3N3b3JkJykubmV4dCgnc3Bhbi5lcnJvcicpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmFjY291bnRjb250ZW50IC5ndWVzdGVtYWlsJykuYWRkQ2xhc3MoJ2NsaWNrLW1hcmsgdmFsaWQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy51aS1sb2dpbicpLmZpbmQoJy5oZWFkZXItc2lnbi1pbicpLnNob3coKTtcclxuICAgICAgICAgICAgJCgnLmhlYWRlci1zaWduLWluIC5zaWduaW5fbWFpbiAubG9naW5mYWlsLmVycm9ybWVzc2FnZScpLmhpZGUoKTtcclxuICAgICAgICAgICAgJCgnLmhlYWRlcm1hc2snKS5hZGRDbGFzcygnbm8taGlkZScpLnNob3coKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJCgnLnNpZ24tbWVzc2FnZSBhLCAuRXhpc3RlZFVzZXItZXJyb3IgLmNyZWF0ZWFjY291bnQnKS5jbGljayhmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICQoJy5hY2NvdW50Y29udGVudCcpLmhpZGUoKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcudWktbG9naW4nKS5maW5kKCcuaGVhZGVyLWNyZWF0ZScpLnNob3coKTtcclxuICAgICAgICAgICAgdmFyIHZhbGlkYXRvciA9ICQodGhpcykuY2xvc2VzdCgnZm9ybScpLnZhbGlkYXRlKCk7XHJcbiAgICAgICAgICAgIGlmICh2YWxpZGF0b3IuZWxlbWVudCgkKHRoaXMpLmNsb3Nlc3QoJ2Zvcm0nKS5maW5kKCcuZ3Vlc3RlbWFpbCcpKSkge1xyXG4gICAgICAgICAgICAgICAgJCgnLmFjY291bnRjb250ZW50IC5ndWVzdGVtYWlsJykudmFsKCQodGhpcykuY2xvc2VzdCgnLmFjY291bnRjb250ZW50JykuZmluZCgnLmd1ZXN0ZW1haWwnKS52YWwoKSk7XHJcbiAgICAgICAgICAgICAgICAkKCcuYWNjb3VudGNvbnRlbnQgLmd1ZXN0ZW1haWwnKS5yZW1vdmVDbGFzcygnZXJyb3InKTtcclxuICAgICAgICAgICAgICAgICQoJy5hY2NvdW50Y29udGVudCAuZ3Vlc3RlbWFpbCcpLm5leHQoJ3NwYW4uZXJyb3InKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICQoJy5hY2NvdW50Y29udGVudCAuZ3Vlc3RlbWFpbCcpLmFkZENsYXNzKCdjbGljay1tYXJrIHZhbGlkJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaGVhZGVyRXZlbnRzLmFjY291bnRDb250UG9zKCQoJy51aS1sb2dpbiAuc2lnbi11cC1ibGsgPiBhJyksICQodGhpcykuY2xvc2VzdCgnLnVpLWxvZ2luJykuZmluZCgnLmhlYWRlci1jcmVhdGUnKSk7XHJcbiAgICAgICAgICAgICQoJy5oZWFkZXJtYXNrJykuc2hvdygpO1xyXG4gICAgICAgICAgICAkKCcuRXhpc3RlZFVzZXItZXJyb3InKS5oaWRlKCk7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChhcHBHbG9iYWwuZ2xvYmFsVGltZXIpO1xyXG4gICAgICAgICAgICAvL2FwcEdsb2JhbC5nbG9iYWxUaW1lciA9PSAwO1xyXG4gICAgICAgICAgICBhcHBHbG9iYWwuZ2xvYmFsVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQoJy5hY2NvdW50Y29udGVudCcpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICQoJy5oZWFkZXJtYXNrJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmhlYWRlcmN1c3RvbWVyaW5mbycpLmZpbmQoJy5qcy1hY3RpdmUnKS5yZW1vdmVDbGFzcygnanMtYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH0sIDUwMDApO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKCcuZm9yZ290LXBhc3N3b3JkIGEnKS5jbGljayhmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICQoJy5hY2NvdW50Y29udGVudCcpLmhpZGUoKTtcclxuICAgICAgICAgICAgJCgnLmhlYWRlci1mb3Jnb3QtcHdkIHNwYW4ucmVzZXRfZW1haWxfZXJyb3InKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLnVpLWxvZ2luJykuZmluZCgnLmhlYWRlci1mb3Jnb3QtcHdkJykuc2hvdygpO1xyXG4gICAgICAgICAgICBoZWFkZXJFdmVudHMuYWNjb3VudENvbnRQb3MoJCgnLnVpLWxvZ2luIC5zaWduLXVwLWJsayA+IGEnKSwgJCh0aGlzKS5jbG9zZXN0KCcudWktbG9naW4nKS5maW5kKCcuaGVhZGVyLWZvcmdvdC1wd2QnKSk7XHJcbiAgICAgICAgICAgICQoJy5oZWFkZXJtYXNrJykuc2hvdygpO1xyXG4gICAgICAgICAgICB2YXIgdmFsaWRhdG9yID0gJCh0aGlzKS5jbG9zZXN0KCdmb3JtJykudmFsaWRhdGUoe1xyXG4gICAgICAgICAgICAgICAgb25rZXl1cDogZmFsc2VcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmICh2YWxpZGF0b3IuZWxlbWVudCgkKHRoaXMpLmNsb3Nlc3QoJ2Zvcm0nKS5maW5kKCcuZ3Vlc3RlbWFpbCcpKSkge1xyXG4gICAgICAgICAgICAgICAgJCgnLmFjY291bnRjb250ZW50IC5ndWVzdGVtYWlsJykudmFsKCQodGhpcykuY2xvc2VzdCgnLmFjY291bnRjb250ZW50JykuZmluZCgnLmd1ZXN0ZW1haWwnKS52YWwoKSk7XHJcbiAgICAgICAgICAgICAgICAkKCcuYWNjb3VudGNvbnRlbnQgLmd1ZXN0ZW1haWwnKS5yZW1vdmVDbGFzcygnZXJyb3InKTtcclxuICAgICAgICAgICAgICAgICQoJy5hY2NvdW50Y29udGVudCAuZ3Vlc3RlbWFpbCcpLm5leHQoJ3NwYW4uZXJyb3InKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICQoJy5hY2NvdW50Y29udGVudCAuZ3Vlc3RlbWFpbCcpLmFkZENsYXNzKCdjbGljay1tYXJrIHZhbGlkJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGFwcEdsb2JhbC5nbG9iYWxUaW1lcik7XHJcbiAgICAgICAgICAgIC8vYXBwR2xvYmFsLmdsb2JhbFRpbWVyID09IDA7XHJcbiAgICAgICAgICAgIGFwcEdsb2JhbC5nbG9iYWxUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJCgnLmFjY291bnRjb250ZW50JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmhlYWRlcm1hc2snKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcuaGVhZGVyY3VzdG9tZXJpbmZvJykuZmluZCgnLmpzLWFjdGl2ZScpLnJlbW92ZUNsYXNzKCdqcy1hY3RpdmUnKTtcclxuICAgICAgICAgICAgfSwgNTAwMCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoJy5hY2NvdW50Y29udGVudCcpLm1vdXNlZW50ZXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKCcuaGVhZGVybWFzaycpLnJlbW92ZUNsYXNzKCduby1oaWRlJyk7XHJcbiAgICAgICAgICAgICQoJy5oZWFkZXJtYXNrJykuc2hvdygpO1xyXG4gICAgICAgICAgICAkKCcuY29uZmlybWF0aW9uY29udGFpbmVyJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKCcuc2lnbi11cC1ibGsnKS5hZGRDbGFzcygnanMtYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChhcHBHbG9iYWwuZ2xvYmFsVGltZXIpO1xyXG4gICAgICAgICAgICAvL2FwcEdsb2JhbC5nbG9iYWxUaW1lciA9PSAwO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKCcuaGVhZGVybWFzaycpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGhlYWRlckV2ZW50cy5tYXNrRXZlbnQoZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoJy5oZWFkZXJtYXNrJykubW91c2VlbnRlcihmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBoZWFkZXJFdmVudHMubWFza0V2ZW50KGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoJy5hY2NvdW50Y29udGVudCcpLm1vdXNlZW50ZXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKCcuaGVhZGVybWFzaycpLnJlbW92ZUNsYXNzKCduby1oaWRlJyk7XHJcbiAgICAgICAgICAgICQoJy5oZWFkZXJtYXNrJykuc2hvdygpO1xyXG4gICAgICAgICAgICAkKCcuY29uZmlybWF0aW9uY29udGFpbmVyJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKCcuc2lnbi11cC1ibGsnKS5hZGRDbGFzcygnanMtYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChhcHBHbG9iYWwuZ2xvYmFsVGltZXIpO1xyXG4gICAgICAgICAgICAvL2FwcEdsb2JhbC5nbG9iYWxUaW1lciA9PSAwO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoJy51c2VyLWFjY291bnQnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICQodGhpcykucGFyZW50KCcudXNlci1pbmZvJykudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoJy5jaGFuZ2UtcmVnaW9ubmV3JykubW91c2VlbnRlcihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQoJy5kb21haW5zd2l0Y2gtaGVhZGVyJykuc2hvdygpO1xyXG4gICAgICAgICAgICAkKCcuaGVhZGVybWFzaycpLnNob3coKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKCcuY2hhbmdlLXJlZ2lvbicpLm1vdXNlZW50ZXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBqUXVlcnkoJy5kb21haW5zd2l0Y2gnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICQoJy5yZWdpb25fb3ZlcmxheScpLnNob3coKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKCcucmVnaW9uX292ZXJsYXknKS5tb3VzZWVudGVyKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgalF1ZXJ5KCcuZG9tYWluc3dpdGNoJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmhpZGUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKCdidXR0b24nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICgkKCcucmVzZXRwYXNzd29yZCcpLmlzKCc6VmlzaWJsZScpKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcucmVzZXRwYXNzd29yZCcpLmNsb3Nlc3QoJ2Rpdi5kaWFsb2ctY29udGVudCcpLmFkZENsYXNzKCdjb25maXJtYXRpb25jb250YWluZXInKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoJy5zYW1wbGUtc2VjdGlvbicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCEkKHRoaXMpLmZpbmQoJy5zYW1wbGVfbWFpbF9tYWluJykuaXMoJzp2aXNpYmxlJykpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLnNhbXBsZV9tYWlsX21haW4nKS5zbGlkZURvd24oNTAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoJy5zaWdudXBmb3ItZW1haWwgLnNlZXNhbXBsZXMnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLnNpZ251cGZvci1lbWFpbCcpLmZpbmQoJy5zYW1wbGVfbWFpbF9tYWluJykuc2xpZGVUb2dnbGUoNTAwKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJCgnYm9keScpLmNsaWNrKGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBpZiAoISQoZXZlbnQudGFyZ2V0KS5pcygnLnNpZ251cGZvci1lbWFpbCAuc2Vlc2FtcGxlcycpICYmICghJChldmVudC50YXJnZXQpLmlzKCcuY3JlYXRlX2VtYWlsX2NoZWNrYm94IC5zZWVzYW1wbGVzJykpKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcuc2FtcGxlX21haWxfbWFpbicpLnNsaWRlVXAoNTAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8qKlRoaXMgaXMgdXNlZCB0byBnZXQgdGhlIHRpY2sgbWFyayBmb3IgY3JlYXRlIGFjY291bnQgd2hlbiB0aGUgZmllbGQgaXMgdmFsaWQqL1xyXG4gICAgICAgICQoJy51aS1sb2dpbiBpbnB1dC5yZXF1aXJlZCcpLmJsdXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygndmFsaWQnKSkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnY2xpY2stbWFyaycpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnY2xpY2stbWFyaycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoJy5iYWNrLWxpbmssIC5zaWduaW5naW4nKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQoJy5hY2NvdW50Y29udGVudCcpLmhpZGUoKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcudWktbG9naW4nKS5maW5kKCcuaGVhZGVyLXNpZ24taW4nKS5zaG93KCk7XHJcbiAgICAgICAgICAgICQoJy5oZWFkZXItc2lnbi1pbiAuc2lnbmluX21haW4gLmxvZ2luZmFpbC5lcnJvcm1lc3NhZ2UnKS5oaWRlKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoJy5mb3Jnb3RfY3JlYXRlJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKCcuaGVhZGVyLWZvcmdvdC1wd2QnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICQoJy5oZWFkZXItY3JlYXRlJykuc2hvdygpO1xyXG4gICAgICAgICAgICAkKCcuaGVhZGVyLWNyZWF0ZSAuZXJyb3JtZXNzYWdlJykuaGlkZSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKCcubG9nZ2VkdXNlciBhLCAuaGVhZGVyY3VzdG9tZXJpbmZvIC5zZWNvbmRfbmFtZScpLm9uKCdtb3VzZWVudGVyJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBpZiAoJCgnLnJhcGFsYV9kZXZpY2UnKS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgJCgnLmFjY291bnRjb250ZW50JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgaGVhZGVyRXZlbnRzLmFjY291bnRDb250UG9zKCQoJy5oZWFkZXJjdXN0b21lcmluZm8gLmxvZ2dlZHVzZXIgYScpLCAkKCcudXNlci1pbmZvJykpO1xyXG4gICAgICAgICAgICAgICAgJCgnLnVzZXItaW5mbycpLnNob3coKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKCcucmFwYWxhX2RldmljZSAubG9nZ2VkdXNlciBhLC5oZWFkZXJjdXN0b21lcmluZm8gLnNlY29uZF9uYW1lJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAkKCcuYWNjb3VudGNvbnRlbnQnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgIGhlYWRlckV2ZW50cy5hY2NvdW50Q29udFBvcygkKCcuaGVhZGVyY3VzdG9tZXJpbmZvIC5sb2dnZWR1c2VyIGEnKSwgJCgnLnVzZXItaW5mbycpKTtcclxuICAgICAgICAgICAgJCgnLnVzZXItaW5mbycpLnNob3coKTtcclxuICAgICAgICAgICAgJCgnLmhlYWRlcm1hc2snKS5zaG93KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgalF1ZXJ5KHdpbmRvdykuYmluZCgnbWVzc2FnZScsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIHZhciBzdHI7XHJcbiAgICAgICAgICAgIGUgPSBlLm9yaWdpbmFsRXZlbnQ7XHJcbiAgICAgICAgICAgIGlmIChlLm9yaWdpbi5pbmRleE9mKGRvY3VtZW50LmxvY2F0aW9uLmhvc3QpID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBvYmogPSBlLmRhdGE7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBzdHIgPSBKU09OLnBhcnNlKG9iaik7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChzdHIucHJvY2VzcyAhPT0gJ3NpZ24taW4nKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChzdHIuc3RhdHVzID09PSAnc3VjY2VzcycpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc3RyLmVtYWlsID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlckV2ZW50cy51c2VyQ29va2llKHN0ci5lbWFpbCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5sb2NhdGlvbi5yZWxvYWQodHJ1ZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkKCcuRXhpc3RlZFVzZXItZXJyb3InKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcuY3VzdG9tX3NpZ25pbicpLmZpbmQoJy5sb2FkaW5nJykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICBwcm9ncmVzcy5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcuY3VzdG9tX3NpZ25pbiBpbnB1dFt0eXBlPVwidGV4dFwiXSwgLmN1c3RvbV9zaWduaW4gaW5wdXRbdHlwZT1cInBhc3N3b3JkXCJdJykuYWRkQ2xhc3MoJ2Vycm9yY2xpZW50Jyk7XHJcbiAgICAgICAgICAgICAgICAkKCcubG9naW5mYWlsJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmFjY291bnRjb250ZW50IC5sb2FkaW5nJykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBqUXVlcnkoJy5zaWduaW4tYnV0dG9uJykuY2xpY2soZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB2YXIgcmVhbEZvcm0gPSAkKHRoaXMpLmNsb3Nlc3QoJ2Zvcm0nKTtcclxuICAgICAgICAgICAgaWYgKCFyZWFsRm9ybS52YWxpZCgpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJCgnLmxvZ2luZmFpbCcpLmhpZGUoKTtcclxuICAgICAgICAgICAgcHJvZ3Jlc3Muc2hvdygnLmhlYWRlci1zaWduLWluLmFjY291bnRjb250ZW50Jyk7XHJcbiAgICAgICAgICAgIHZhciBpZnJhbWVJZCA9ICdqcy1oZWFkZXItc2lnbmluLWlmcmFtZSc7XHJcbiAgICAgICAgICAgIHZhciBmb3JtSWQgPSAnanMtaGVhZGVyLXNpZ25pbi1mb3JtJztcclxuICAgICAgICAgICAgJCgnIycgKyBpZnJhbWVJZCkucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICQoJyMnICsgZm9ybUlkKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgdmFyICRmb3JtID0gJCgnPGZvcm0+PC9mb3JtPicpO1xyXG4gICAgICAgICAgICAkZm9ybS5hdHRyKCdpZCcsIGZvcm1JZCk7XHJcbiAgICAgICAgICAgICRmb3JtLmF0dHIoJ2FjdGlvbicsIHJlYWxGb3JtLmF0dHIoJ2FjdGlvbicpKTtcclxuICAgICAgICAgICAgJGZvcm0uYXR0cigndGFyZ2V0JywgaWZyYW1lSWQpO1xyXG4gICAgICAgICAgICAkZm9ybS5hdHRyKCdtZXRob2QnLCAnUE9TVCcpO1xyXG5cclxuICAgICAgICAgICAgJCgnPGlmcmFtZSBuYW1lPVwiJyArIGlmcmFtZUlkICsgJ1wiIGlkPVwiJyArIGlmcmFtZUlkICsgJ1wiIC8+JykuYXBwZW5kVG8oJ2JvZHknKTtcclxuICAgICAgICAgICAgJCgnIycgKyBpZnJhbWVJZCkuYXR0cignc3R5bGUnLCAnZGlzcGxheTogbm9uZTsnKTtcclxuXHJcbiAgICAgICAgICAgIHJlYWxGb3JtLmZpbmQoJ2lucHV0LCBzZWxlY3QsIHRleHRhcmVhJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgJGlucHV0ID0gJCh0aGlzKS5jbG9uZSgpO1xyXG4gICAgICAgICAgICAgICAgJGZvcm0uYXBwZW5kKCRpbnB1dCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgJCgnYm9keScpLmFwcGVuZCgkZm9ybSk7XHJcbiAgICAgICAgICAgICRmb3JtLmhpZGUoKTtcclxuICAgICAgICAgICAgJGZvcm0uc3VibWl0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLyokKFwiLlBhc3N3b3JkUmVzZXRGb3JtXCIpLm9uKFwia2V5dXBcIixcIi5ndWVzdGVtYWlsXCIsZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgICAgICAgICBpZihlLmtleUNvZGUgPT0gMTMpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcubG9zdF9idG4gLnNlbmQnKS50cmlnZ2VyKFwiY2xpY2tcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pOyovXHJcbiAgICAgICAgJCgnLlBhc3N3b3JkUmVzZXRGb3JtJykudW5iaW5kKCdzdWJtaXQnKS5vbignc3VibWl0JywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgJCgnLmhlYWRlci1mb3Jnb3QtcHdkIHNwYW4ucmVzZXRfZW1haWxfZXJyb3InKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICQoJy5sb3N0X2J0biAuc2VuZCcpLmFkZENsYXNzKCdjbGlja2VkQnV0dG9uJyk7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdmFyICRmb3JtID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgaWYgKCEkZm9ybS52YWxpZCgpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcHJvZ3Jlc3Muc2hvdygnLmhlYWRlci1mb3Jnb3QtcHdkLmFjY291bnRjb250ZW50Jyk7XHJcbiAgICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2h0bWwnLFxyXG4gICAgICAgICAgICAgICAgdXJsOiAkZm9ybS5hdHRyKCdhY3Rpb24nKSxcclxuICAgICAgICAgICAgICAgIGRhdGE6ICRmb3JtLnNlcmlhbGl6ZSgpLFxyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJChkYXRhKS5maW5kKCdkaXYjbWVzc2FnZXMuZXJyb3InKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmhlYWRlci1mb3Jnb3QtcHdkJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuaGVhZGVyLWZvcmdvdC1wd2Qgc3Bhbi5yZXNldF9lbWFpbF9lcnJvcicpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmFjY291bnRjb250ZW50IC5sb2FkaW5nJykucmVtb3ZlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmhlYWRlci1mb3Jnb3QtcHdkJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuY29uZmlybWF0aW9uY29udGFpbmVyJykuZmFkZUluKDQwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vdG8gZGlzcGxheSB0aGUgbWVzc2VhZ2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyRXZlbnRzLmluaXRpYWxpemVFdmVudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJFdmVudHMuYWNjb3VudENvbnRQb3MoJCgnLnVpLWxvZ2luIC5zaWduLXVwLWJsayA+IGEnKSwgJCgnLmNvbmZpcm1hdGlvbmNvbnRhaW5lcicpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmFjY291bnRjb250ZW50IC5sb2FkaW5nJykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5jb25maXJtYXRpb25jb250YWluZXInKS5maW5kKCcuaGVhZGVybWFzaycpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmNvbmZpcm1hdGlvbmNvbnRhaW5lcicpLmRlbGF5KDQwMDApLmZhZGVPdXQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgalF1ZXJ5KHdpbmRvdykuYmluZCgnbWVzc2FnZScsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIHZhciBzdHI7XHJcbiAgICAgICAgICAgIGUgPSBlLm9yaWdpbmFsRXZlbnQ7XHJcbiAgICAgICAgICAgIGlmIChlLm9yaWdpbi5pbmRleE9mKGRvY3VtZW50LmxvY2F0aW9uLmhvc3QpID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBvYmogPSBlLmRhdGE7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBzdHIgPSBKU09OLnBhcnNlKG9iaik7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChzdHIucHJvY2VzcyAhPT0gJ2NyZWF0ZS1hY2NvdW50Jykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoc3RyLnN0YXR1cyA9PT0gJ3N1Y2Nlc3MnKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHN0ci5lbWFpbCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJFdmVudHMudXNlckNvb2tpZShzdHIuZW1haWwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2h0bWwnLFxyXG4gICAgICAgICAgICAgICAgICAgIHVybDogZG9jdW1lbnQubG9jYXRpb24udG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5oZWFkZXJtYXNrJykucmVtb3ZlQ2xhc3MoJ25vLWhpZGUnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5oZWFkZXItc2lnbi1pbi5hY2NvdW50Y29udGVudCcpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuaGVhZGVyY3VzdG9tZXJpbmZvICN1c2VyJykuaHRtbCgkKGRhdGEpLmZpbmQoJyN1c2VyJykuaHRtbCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3VzZXJpbmZvJykuaHRtbCgkKGRhdGEpLmZpbmQoJyN1c2VyaW5mbycpLmh0bWwoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlckV2ZW50cy5hY2NvdW50Q29udFBvcygkKCcuaGVhZGVyY3VzdG9tZXJpbmZvIC5sb2dnZWR1c2VyIGEnKSwgJCgnLmNvbmdyYXRzLW1lc3NhZ2UuYWNjb3VudGNvbnRlbnQnKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5jb25ncmF0cy1tZXNzYWdlJykuZmFkZUluKDQwMCkuc2hvdygpLmRlbGF5KDMwMDApLmZhZGVPdXQoNDAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyRXZlbnRzLmluaXRpYWxpemVFdmVudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJCgnLmFjY291bnRjb250ZW50JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3MuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgJCgnLkV4aXN0ZWRVc2VyLWVycm9yJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmVycm9ybWVzc2FnZScpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICQoJy51aS1sb2dpbicpLmZpbmQoJy5oZWFkZXItc2lnbi1pbicpLnNob3coKTtcclxuICAgICAgICAgICAgICAgIC8vJCgnLnVpLWxvZ2luJykuZmluZCgnLmhlYWRlci1zaWduLWluIC5hY2NvdW50ZW1haWwnKS52YWwoZW1haWxJZCk7XHJcbiAgICAgICAgICAgICAgICAkKCcuYWNjb3VudGNvbnRlbnQgLmd1ZXN0ZW1haWwnKS5yZW1vdmVDbGFzcygnZXJyb3JjbGllbnQnKTtcclxuICAgICAgICAgICAgICAgICQoJy5hY2NvdW50Y29udGVudCAuZ3Vlc3RlbWFpbCcpLm5leHQoJ3NwYW4uZXJyb3JjbGllbnQnKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICQoJy51aS1sb2dpbicpLmZpbmQoJy5oZWFkZXItc2lnbi1pbiAuYWNjb3VudGVtYWlsJykuYWRkQ2xhc3MoJ2NsaWNrLW1hcmsgdmFsaWQnKTtcclxuICAgICAgICAgICAgICAgICQoJy5oZWFkZXJtYXNrJykuYWRkQ2xhc3MoJ25vLWhpZGUnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAkKCcuY3VzdG9tX3NpZ251cCBpbnB1dFt0eXBlPVwidGV4dFwiXSwgLmN1c3RvbV9zaWdudXAgaW5wdXRbdHlwZT1cInBhc3N3b3JkXCJdJykucmVtb3ZlQ2xhc3MoJ2Vycm9yY2xpZW50Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgalF1ZXJ5KCcuY3JlYXRlLWFjY291bnQnKS51bmJpbmQoJ2NsaWNrJykuY2xpY2soZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB2YXIgcmVhbEZvcm0gPSAkKHRoaXMpLmNsb3Nlc3QoJ2Zvcm0nKTtcclxuICAgICAgICAgICAgaWYgKCFyZWFsRm9ybS52YWxpZCgpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcHJvZ3Jlc3Muc2hvdygnLmhlYWRlci1jcmVhdGUuYWNjb3VudGNvbnRlbnQnKTtcclxuICAgICAgICAgICAgdmFyIGlmcmFtZUlkID0gJ2pzLWhlYWRlci1jcmVhdGUtYWNjb3VudC1pZnJhbWUnO1xyXG4gICAgICAgICAgICB2YXIgZm9ybUlkID0gJ2pzLWhlYWRlci1jcmVhdGUtYWNjb3VudC1mb3JtJztcclxuICAgICAgICAgICAgJCgnIycgKyBpZnJhbWVJZCkucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICQoJyMnICsgZm9ybUlkKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgdmFyICRmb3JtID0gJCgnPGZvcm0+PC9mb3JtPicpO1xyXG4gICAgICAgICAgICAkZm9ybS5hdHRyKCdpZCcsIGZvcm1JZCk7XHJcbiAgICAgICAgICAgICRmb3JtLmF0dHIoJ2FjdGlvbicsIHJlYWxGb3JtLmF0dHIoJ2FjdGlvbicpKTtcclxuICAgICAgICAgICAgJGZvcm0uYXR0cigndGFyZ2V0JywgaWZyYW1lSWQpO1xyXG4gICAgICAgICAgICAkZm9ybS5hdHRyKCdtZXRob2QnLCAnUE9TVCcpO1xyXG5cclxuICAgICAgICAgICAgJCgnPGlmcmFtZSBuYW1lPVwiJyArIGlmcmFtZUlkICsgJ1wiIGlkPVwiJyArIGlmcmFtZUlkICsgJ1wiIC8+JykuYXBwZW5kVG8oJ2JvZHknKTtcclxuICAgICAgICAgICAgJCgnIycgKyBpZnJhbWVJZCkuYXR0cignc3R5bGUnLCAnZGlzcGxheTogbm9uZTsnKTtcclxuXHJcbiAgICAgICAgICAgIHJlYWxGb3JtLmZpbmQoJ2lucHV0LCBzZWxlY3QsIHRleHRhcmVhJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgJGlucHV0ID0gJCh0aGlzKS5jbG9uZSgpO1xyXG4gICAgICAgICAgICAgICAgJGZvcm0uYXBwZW5kKCRpbnB1dCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgJCgnYm9keScpLmFwcGVuZCgkZm9ybSk7XHJcbiAgICAgICAgICAgICRmb3JtLmhpZGUoKTtcclxuICAgICAgICAgICAgJGZvcm0uc3VibWl0KCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICgkKCcjdXNlcicpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgZmlyc3RuYW1lc3BsaXQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGZpcnN0bmFtZXNwbGl0KCkge1xyXG4gICAgICAgICAgICB2YXIgZmlyc3RuYW1lID0gJCgnLmxvZ2dlZHVzZXIgPiBhIHNwYW4udXNlcm5hbWUnKS50ZXh0KCk7XHJcbiAgICAgICAgICAgIHZhciBmaXJzdG5hbWVXb3JkcyA9IGZpcnN0bmFtZS5zcGxpdCgnICcpO1xyXG4gICAgICAgICAgICB2YXIgdGV4dGxlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgIHZhciBsaW1pdCA9IDE5O1xyXG4gICAgICAgICAgICB2YXIgbmFtZUxlbmd0aCA9ICQoJy5sb2dnZWR1c2VyID4gYSBzcGFuLnVzZXJuYW1lJykudGV4dCgpICsgJyAnICsgJC50cmltKCQoJy5sb2dnZWR1c2VyID4gYSAucHJvc3RhZmYtaGVhZGVyLmJhZGdlLWhlYWRlcicpLnRleHQoKSk7XHJcbiAgICAgICAgICAgIGlmIChuYW1lTGVuZ3RoLmxlbmd0aCA8PSAxOSkge1xyXG4gICAgICAgICAgICAgICAgJCgnLmxvZ2dlZHVzZXIgPiBhIHNwYW4udXNlcm5hbWUnKS50ZXh0KCQoJy5sb2dnZWR1c2VyID4gYSBzcGFuLnVzZXJuYW1lJykudGV4dCgpICsgJyAnICsgJC50cmltKCQoJy5sb2dnZWR1c2VyID4gYSAucHJvc3RhZmYtaGVhZGVyLmJhZGdlLWhlYWRlcicpLnRleHQoKSkpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmxvZ2dlZHVzZXIgPiBhIC5wcm9zdGFmZi1oZWFkZXIuYmFkZ2UtaGVhZGVyJykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZmlyc3RuYW1lV29yZHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgJCgnLmxvZ2dlZHVzZXIgPiBhIHNwYW4udXNlcm5hbWUnKS50ZXh0KCcnKTtcclxuICAgICAgICAgICAgICAgIGlmICgkKCcubG9nZ2VkdXNlciA+IGEgc3Bhbi51c2VybmFtZSAuZmlyc3RfbmFtZScpLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmxvZ2dlZHVzZXIgPiBhIHNwYW4udXNlcm5hbWUnKS5odG1sKCc8c3BhbiBjbGFzcz1cImZpcnN0X25hbWVcIj48L3NwYW4+Jyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoJCgnLmhlYWRlcmN1c3RvbWVyaW5mbyAuc2Vjb25kX25hbWUnKS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5oZWFkZXJjdXN0b21lcmluZm8nKS5hcHBlbmQoJzxzcGFuIGNsYXNzPVwic2Vjb25kX25hbWVcIj48L3NwYW4+Jyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGZOYW1lID0gJCgnLmxvZ2dlZHVzZXIgPiBhIHNwYW4udXNlcm5hbWUgc3Bhbi5maXJzdF9uYW1lJykuZXEoMCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgTG5hbWUgPSAkKCcuaGVhZGVyY3VzdG9tZXJpbmZvID4gLnNlY29uZF9uYW1lJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgalF1ZXJ5LmVhY2goZmlyc3RuYW1lV29yZHMsIGZ1bmN0aW9uIChpLCB2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dGxlbmd0aCA9IHRleHRsZW5ndGggPT0gMCA/IHRleHRsZW5ndGggKyB2Lmxlbmd0aCA6IHRleHRsZW5ndGggKyB2Lmxlbmd0aCArIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT0gMCAmJiB2Lmxlbmd0aCA+IGxpbWl0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZOYW1lLnRleHQodi5zdWJzdHIoMCwgMTYpICsgJy4uLicpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGV4dGxlbmd0aCA8IDIwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmTmFtZS50ZXh0KCkubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZOYW1lLnRleHQodik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmTmFtZS50ZXh0KGZOYW1lLnRleHQoKSArICcgJyArIHYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKExuYW1lLnRleHQoKS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTG5hbWUudGV4dCh2KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIExuYW1lLnRleHQoTG5hbWUudGV4dCgpICsgJyAnICsgdik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBMbmFtZS50ZXh0KExuYW1lLnRleHQoKSArICcgJyArICQudHJpbSgkKCcubG9nZ2VkdXNlciA+IGEgLmJhZGdlLW1pbmknKS50ZXh0KCkpKTtcclxuICAgICAgICAgICAgICAgIGlmICgkKCcjdXNlciAubG9nZ2VkdXNlcicpLndpZHRoKCkgPiBMbmFtZS53aWR0aCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmxvZ2dlZHVzZXInKS5hcHBlbmQoTG5hbWUuY2xvbmUoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgTG5hbWUucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkKCcubG9nZ2VkdXNlciA+IGEgLnByb3N0YWZmLWhlYWRlci5iYWRnZS1oZWFkZXInKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICQoJy5sb2dnZWR1c2VyID4gYSAuYmFkZ2UtbWluaScpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJCgnLmxvZ2dlZHVzZXIgPiBhIHNwYW4udXNlcm5hbWUgc3BhbicpLmhpZGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJCgnLmFjY291bnRjb250ZW50IGlucHV0W3R5cGU9XCJ0ZXh0XCJdLCAuYWNjb3VudGNvbnRlbnQgaW5wdXRbdHlwZT1cInBhc3N3b3JkXCJdJykuYmluZCgna2V5dXAnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICB2YXIga2V5Y29kZSA9IGUua2V5Q29kZSA/IGUua2V5Q29kZSA6IGUud2hpY2g7XHJcbiAgICAgICAgICAgIGlmICghJCh0aGlzKS5jbG9zZXN0KCcuYWNjb3VudGNvbnRlbnQnKS5oYXNDbGFzcygnanMtZW50ZXJlZCcpKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5hY2NvdW50Y29udGVudCcpLmFkZENsYXNzKCdqcy1lbnRlcmVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChrZXljb2RlID09IDEzKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJ2Zvcm0nKS5maW5kKCcuZm9ybWFjdGlvbnMgYnV0dG9uJykudHJpZ2dlcignY2xpY2snKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQoYXBwR2xvYmFsLmdsb2JhbFRpbWVyKTtcclxuICAgICAgICAgICAgLy9hcHBHbG9iYWwuZ2xvYmFsVGltZXIgPT0gMDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJCgnLnJhcGFsYV9kZXZpY2UgLnVzZXItcHJvZmlsZSBhJykub24oJ2hvdmVyJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICQodGhpcykuYXR0cignaHJlZicpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIC8qKiBPTiBIT1ZFUiAqL1xyXG4gICAgYWNjb3VudENvbnRQb3M6IGZ1bmN0aW9uICgkc291cmNlLCAkZGVzdGlueSkge1xyXG4gICAgICAgIHZhciBsZWZ0UG9zID0gJHNvdXJjZS5vZmZzZXQoKS5sZWZ0ICsgJHNvdXJjZS53aWR0aCgpIC0gJCgnLmhlYWRlcmN1c3RvbWVyaW5mbycpLm9mZnNldCgpLmxlZnQgLSAkZGVzdGlueS53aWR0aCgpIC8gMjtcclxuICAgICAgICB2YXIgYXJyb3dQb3MgPSAoJGRlc3Rpbnkud2lkdGgoKSAtICRkZXN0aW55LmZpbmQoJy50b3BfYXJyb3cnKS53aWR0aCgpKSAvIDIgLSA0O1xyXG4gICAgICAgICQoJy5hY2NvdW50Y29udGVudCAubG9hZGluZycpLnJlbW92ZSgpO1xyXG4gICAgICAgIGlmICgkZGVzdGlueS5sZW5ndGggIT0gMCkge1xyXG4gICAgICAgICAgICAkZGVzdGlueS5jc3MoJ2xlZnQnLCBsZWZ0UG9zKTtcclxuICAgICAgICAgICAgJGRlc3RpbnkuZmluZCgnLnRvcF9hcnJvdycpLmNzcygnbGVmdCcsIGFycm93UG9zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgJCgnLmFjY291bnRjb250ZW50IC5mb3JtZmllbGQgLmxhYmVsIC5lcnJvcmxhYmVsJykuYWRkQ2xhc3MoJ2xhYmVsdGV4dCcpLnJlbW92ZUNsYXNzKCdlcnJvcmxhYmVsJyk7XHJcbiAgICB9LFxyXG4gICAgdXNlckNvb2tpZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBkYXRlT2JqID0gbmV3IERhdGUoKTtcclxuICAgICAgICBkYXRlT2JqLnNldFRpbWUoZGF0ZU9iai5nZXRUaW1lKCkgKyAoMzY1ICogMjQgKiA2MCAqIDYwICogMTAwMCkpO1xyXG4gICAgICAgIC8vZG9jdW1lbnQuY29va2llPVwiZW1haWxJZD1cIiskdmFsK1wiOyBleHBpcmVzPVwiK2RhdGVPYmoudG9VVENTdHJpbmcoKStcIjsgcGF0aD0vXCI7XHJcbiAgICB9LFxyXG4gICAgbWFza0V2ZW50OiBmdW5jdGlvbiAoZWxlKSB7XHJcbiAgICAgICAgJCgnLmRvbWFpbnN3aXRjaC1oZWFkZXInKS5oaWRlKCk7XHJcbiAgICAgICAgJCgnLmRvbWFpbnN3aXRjaCcpLmhpZGUoKTtcclxuICAgICAgICBpZiAoISQoJy5oZWFkZXJtYXNrJykuaGFzQ2xhc3MoJ25vLWhpZGUnKSkge1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQoYXBwR2xvYmFsLmdsb2JhbFRpbWVyKTtcclxuICAgICAgICAgICAgLy9hcHBHbG9iYWwuZ2xvYmFsVGltZXIgPT0gMDtcclxuICAgICAgICAgICAgaWYgKGVsZS50eXBlICE9ICdjbGljaycgJiYgJCgnLnJhcGFsYV9kZXZpY2UnKS5sZW5ndGggPT0gMCAmJiBlbGUucGFnZVkgPiA2MCAmJiBlbGUucGFnZVkgPCAxMDApIHtcclxuICAgICAgICAgICAgICAgICQoJy5oZWFkZXJtYXNrJykuaGlkZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChlbGUudHlwZSA9PSAnY2xpY2snKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcuaGVhZGVybWFzaycpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICQoJy5hY2NvdW50Y29udGVudCcpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICQoJy5oZWFkZXJjdXN0b21lcmluZm8nKS5maW5kKCcuanMtYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2pzLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGFwcEdsb2JhbC5nbG9iYWxUaW1lcik7XHJcbiAgICAgICAgICAgICAgICAvL2FwcEdsb2JhbC5nbG9iYWxUaW1lciA9PSAwO1xyXG4gICAgICAgICAgICAgICAgaWYgKCQoJy5hY2NvdW50Y29udGVudDp2aXNpYmxlJykuaGFzQ2xhc3MoJ2pzLWVudGVyZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFwcEdsb2JhbC5nbG9iYWxUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuYWNjb3VudGNvbnRlbnQnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5oZWFkZXJtYXNrJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIDUwMDApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuYWNjb3VudGNvbnRlbnQnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmhlYWRlcm1hc2snKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcbnZhciBoZWFkZXJpbml0ID0ge1xyXG4gICAgaW5pdDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGhlYWRlckV2ZW50cy5pbml0aWFsaXplRXZlbnQoKTtcclxuICAgIH1cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gaGVhZGVyaW5pdDtcclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG4vLyBqUXVlcnkgZXh0ZW5zaW9uc1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyBwYXJhbXNcclxuICAgIC8vIHRvZ2dsZUNsYXNzIC0gcmVxdWlyZWRcclxuICAgIC8vIHRyaWdnZXJTZWxlY3RvciAtIG9wdGlvbmFsLiB0aGUgc2VsZWN0b3IgZm9yIHRoZSBlbGVtZW50IHRoYXQgdHJpZ2dlcnMgdGhlIGV2ZW50IGhhbmRsZXIuIGRlZmF1bHRzIHRvIHRoZSBjaGlsZCBlbGVtZW50cyBvZiB0aGUgbGlzdC5cclxuICAgIC8vIGV2ZW50TmFtZSAtIG9wdGlvbmFsLiBkZWZhdWx0cyB0byAnY2xpY2snXHJcbiAgICAkLmZuLnRvZ2dsZWRMaXN0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICBpZiAoIW9wdGlvbnMudG9nZ2xlQ2xhc3MpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBsaXN0ID0gdGhpcztcclxuICAgICAgICByZXR1cm4gbGlzdC5vbihvcHRpb25zLmV2ZW50TmFtZSB8fCAnY2xpY2snLCBvcHRpb25zLnRyaWdnZXJTZWxlY3RvciB8fCBsaXN0LmNoaWxkcmVuKCksIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdmFyIGNsYXNzVGFyZ2V0ID0gb3B0aW9ucy50cmlnZ2VyU2VsZWN0b3IgPyAkKHRoaXMpLnBhcmVudCgpIDogJCh0aGlzKTtcclxuICAgICAgICAgICAgY2xhc3NUYXJnZXQudG9nZ2xlQ2xhc3Mob3B0aW9ucy50b2dnbGVDbGFzcyk7XHJcbiAgICAgICAgICAgIC8vIGV4ZWN1dGUgY2FsbGJhY2sgaWYgZXhpc3RzXHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICBvcHRpb25zLmNhbGxiYWNrKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgJC5mbi5zeW5jSGVpZ2h0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBhcnIgPSAkLm1ha2VBcnJheSh0aGlzKTtcclxuICAgICAgICBhcnIuc29ydChmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgICAgICAgICByZXR1cm4gJChhKS5oZWlnaHQoKSAtICQoYikuaGVpZ2h0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaGVpZ2h0KCQoYXJyW2Fyci5sZW5ndGggLSAxXSkuaGVpZ2h0KCkpO1xyXG4gICAgfTtcclxufTtcclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxudmFyICRtYWluID0gJCgnI21haW4nKSxcclxuICAgICRmb290ZXIgPSAkKCcjZm9vdGVybmV3JyksXHJcbiAgICAkYmFubmVyID0gJCgnLmJhbm5lcl9wcm9zdGFmZicpO1xyXG5cclxudmFyIG1lZ2FtZW51ID0ge1xyXG4gICAgZ2xvYmFsVGltZXI6IDAsXHJcbiAgICBpbml0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbWVnYW1lbnUubWVnYW1lbnVFdmVudCgpO1xyXG4gICAgfSxcclxuICAgIG9wZW46IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgLy92YXIgJHdpZHRoID0gJCgnI2JyYW5kLXRhYnMtaGVhZGVyJykud2lkdGgoKTtcclxuICAgICAgICAvLyBUbyBtYWtlIGRlZmF1bHQgbWVudSBiYXNlZCBvbiB0aGUgYnJhbmQgYWN0aXZlXHJcbiAgICAgICAgJCgnI2JyYW5kLXRhYnMtaGVhZGVyID4gdWwgPiBsaS5hY3RpdmUgLm1vYmlsZS1tYWluLW1lbnUtaGVhZGluZycpLnRyaWdnZXIoJ2NsaWNrJyk7XHJcbiAgICAgICAgJCgnI2NvbnRhaW5lcicpLmFkZENsYXNzKCdqcy1jb250YWluZXItYWN0aXZlJyk7XHJcbiAgICAgICAgJCgnLm1lbnUtdG9nZ2xlJykuYWRkQ2xhc3MoJ2pzLW1lbnUtdG9nZ2xlJyk7XHJcbiAgICAgICAgJCgnLm1lbnUtb3Blbi1zaGFkb3cnKS5yZW1vdmUoKTtcclxuICAgICAgICAkbWFpbi53cmFwKCc8ZGl2IGNsYXNzPVxcJ29wZW4tbWVudS13cmFwXFwnPjwvZGl2PicpO1xyXG4gICAgICAgICQoJ2JvZHknKS5hZGRDbGFzcygnanMtYm9keScpO1xyXG4gICAgICAgICQoJy5vcGVuLW1lbnUtd3JhcCcpLnByZXBlbmQoJGJhbm5lcik7XHJcbiAgICAgICAgJCgnLm9wZW4tbWVudS13cmFwJykuYXBwZW5kKCRmb290ZXIpLnByZXBlbmQoJzxhIGhyZWY9XFwnamF2YXNjcmlwdDp2b2lkKDApO1xcJyBjbGFzcz1cXCdtZW51LW9wZW4tc2hhZG93XFwnPjwvYT4nKTtcclxuICAgICAgICAvLyQoXCIjbWFpbiwgI2Zvb3Rlcm5ld1wiKS5wcmVwZW5kKFwiPGRpdiBjbGFzcz0nbWVudS1vcGVuLXNoYWRvdyc+PC9kaXY+XCIpXHJcbiAgICAgICAgJCgnI2NvbnRhaW5lciwgLm9wZW4tbWVudS13cmFwJykuYW5pbWF0ZSh7bWFyZ2luTGVmdDogJzI4MHB4J30sIDMwMCk7XHJcbiAgICAgICAgJCgnI2JyYW5kLXRhYnMtaGVhZGVyJykud3JhcCgnPGRpdiBjbGFzcz1cXCdicmFuZC1hY3RpdmVcXCc+PC9kaXY+Jyk7XHJcbiAgICAgICAgJCgnLmJyYW5kLWFjdGl2ZScpLmFuaW1hdGUoe2xlZnQ6ICcwJ30sIDMwMCk7XHJcbiAgICAgICAgJCgnLmJhbm5lcl9wcm9zdGFmZicpLmFuaW1hdGUoe2xlZnQ6ICcyODBweCd9LCAzMDApO1xyXG4gICAgICAgICQoJy5vd2wtY2Fyb3VzZWwnKS5maW5kKCcub3dsLWl0ZW0sIC5vd2wtaXRlbSBpbWcnKS50cmlnZ2VyKCdtb3VzZWVudGVyJyk7XHJcbiAgICB9LFxyXG4gICAgY2xvc2U6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCcjY29udGFpbmVyLCAub3Blbi1tZW51LXdyYXAnKS5hbmltYXRlKHttYXJnaW5MZWZ0OiAnMCd9LCAzMDApO1xyXG4gICAgICAgICQoJy5iYW5uZXJfcHJvc3RhZmYnKS5hbmltYXRlKHtsZWZ0OiAnMCd9LCAzMDApO1xyXG4gICAgICAgICQoJyNjb250YWluZXInKS5yZW1vdmVDbGFzcygnanMtY29udGFpbmVyLWFjdGl2ZScpO1xyXG4gICAgICAgICQoJ2JvZHknKS5yZW1vdmVDbGFzcygnanMtYm9keScpO1xyXG4gICAgICAgICQoJy5vd2wtY2Fyb3VzZWwnKS5maW5kKCcub3dsLWl0ZW0sIC5vd2wtaXRlbSBpbWcnKS50cmlnZ2VyKCdtb3VzZW91dCcpO1xyXG4gICAgICAgICQoJyNtYWluLCAjZm9vdGVybmV3JykudW53cmFwKCk7XHJcbiAgICAgICAgJCgnLm1hZ25pZmllci1pY29uJykucmVtb3ZlQ2xhc3MoJ2pzLW1hZ25pZmllci1pY29uLWFjdGl2ZScpO1xyXG4gICAgICAgICQoJy5tZW51LXRvZ2dsZScpLnJlbW92ZUNsYXNzKCdqcy1tZW51LXRvZ2dsZScpO1xyXG4gICAgICAgICQoJyNicmFuZC10YWJzLWhlYWRlcicpLnVud3JhcCgpO1xyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKHdpbmRvdykuc2Nyb2xsVG9wKDApO1xyXG4gICAgICAgIH0sIDMwMCk7XHJcblxyXG4gICAgfSxcclxuICAgIG1lZ2FtZW51RXZlbnQ6IGZ1bmN0aW9uICgkY29uKSB7XHJcbiAgICAgICAgaWYgKCRjb24gPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAkY29uID0gJCgnI2JyYW5kLXRhYnMtaGVhZGVyID4gdWwgPiBsaSAubWVnYW1lbnVkcm9wJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICRjb24uZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBtYXhsZW5ndGggPSAyNDtcclxuICAgICAgICAgICAgdmFyICRtZWdhID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgLy92YXIgdGV4dGxpbmtsZW5ndGggPSAkKHRoaXMpLmZpbmQoJz4gYScpLmxlbmd0aDtcclxuICAgICAgICAgICAgdmFyIGRpdmxlbmd0aCA9IDQ7XHJcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmF0dHIoJ2lkJykgPT0gJ3JhcGFsYScpIHtcclxuICAgICAgICAgICAgICAgIGRpdmxlbmd0aCA9IDY7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoJCh0aGlzKS5hdHRyKCdpZCcpID09ICd2bWMnKSB7XHJcbiAgICAgICAgICAgICAgICBkaXZsZW5ndGggPSA2O1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCQodGhpcykuYXR0cignaWQnKSA9PSAnbHVocmplbnNlbicpIHtcclxuICAgICAgICAgICAgICAgIGRpdmxlbmd0aCA9IDQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoJCh0aGlzKS5hdHRyKCdpZCcpID09ICdzdWZpeCcpIHtcclxuICAgICAgICAgICAgICAgIGRpdmxlbmd0aCA9IDY7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoJCh0aGlzKS5hdHRyKCdpZCcpID09ICdzdG9ybScpIHtcclxuICAgICAgICAgICAgICAgIGRpdmxlbmd0aCA9IDQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoJCh0aGlzKS5hdHRyKCdpZCcpID09ICd0cmlnZ2VyeCcpIHtcclxuICAgICAgICAgICAgICAgIGRpdmxlbmd0aCA9IDQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoJCh0aGlzKS5hdHRyKCdpZCcpID09ICdibHVlZm94Jykge1xyXG4gICAgICAgICAgICAgICAgZGl2bGVuZ3RoID0gNDtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICgkKHRoaXMpLmF0dHIoJ2lkJykgPT0gJ3Rlcm1pbmF0b3InKSB7XHJcbiAgICAgICAgICAgICAgICBkaXZsZW5ndGggPSA0O1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCQodGhpcykuYXR0cignaWQnKSA9PSAnd2lsbGlhbXNvbicpIHtcclxuICAgICAgICAgICAgICAgIGRpdmxlbmd0aCA9IDQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoJCh0aGlzKS5hdHRyKCdpZCcpID09ICdzdHJpa2VtYXN0ZXInKSB7XHJcbiAgICAgICAgICAgICAgICBkaXZsZW5ndGggPSA2O1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCQodGhpcykuYXR0cignaWQnKSA9PSAnbWFyY3VtJykge1xyXG4gICAgICAgICAgICAgICAgZGl2bGVuZ3RoID0gNjtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICgkKHRoaXMpLmF0dHIoJ2lkJykgPT0gJ290dGVyJykge1xyXG4gICAgICAgICAgICAgICAgZGl2bGVuZ3RoID0gNjtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICgkKHRoaXMpLmF0dHIoJ2lkJykgPT0gJ2ljZWZvcmNlJykge1xyXG4gICAgICAgICAgICAgICAgZGl2bGVuZ3RoID0gNDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL3ZhciBpbnRpYWwgPSAwO1xyXG4gICAgICAgICAgICB2YXIgZW5kID0gbWF4bGVuZ3RoO1xyXG4gICAgICAgICAgICB2YXIgZGF0YWxpc3QgPSAnJztcclxuICAgICAgICAgICAgdmFyIGJyYW5kbGlzdCA9ICQodGhpcykuZmluZCgnLmJyYW5kLWFzc2V0cycpLmNsb25lKCk7XHJcbiAgICAgICAgICAgIHZhciBjb250YWluZXJ3aWR0aCA9ICQoJy5tZWdhbWVudS1kcm9wIC53cmFwcGVyJykud2lkdGgoKSAvIGRpdmxlbmd0aCArICdweCc7XHJcbiAgICAgICAgICAgIHZhciBsYXN0dGV4dCA9ICcnO1xyXG4gICAgICAgICAgICB2YXIgcHJldiA9ICcnO1xyXG4gICAgICAgICAgICAvL3ZhciBuZXh0ID0gJyc7XHJcbiAgICAgICAgICAgICRtZWdhLmZpbmQoJy5icmFuZC1hc3NldHMnKS5yZW1vdmUoKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDw9IGRpdmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAkbWVnYS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJtZW51bGlzdCBtZW51bGlzdC0nICsgaSArICdcIiBzdHlsZT1cIndpZHRoOicgKyBjb250YWluZXJ3aWR0aCArICdcIj48L2Rpdj4nKTtcclxuICAgICAgICAgICAgICAgICRtZWdhLmZpbmQoJy5tZWdhX3N1YmNhdGVnb3J5JykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQodGhpcykuZmluZCgnYS5sZXZlbC0xJykuZXEoMCkuaGFzQ2xhc3MoJ2NvbHVtbi0nICsgaSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YWxpc3QgPSAkKHRoaXMpLmh0bWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJG1lZ2EuZmluZCgnLm1lbnVsaXN0LScgKyBpKS5hcHBlbmQoZGF0YWxpc3QpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgPT0gZGl2bGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJG1lZ2EuZmluZCgnLm1lbnVsaXN0LScgKyBpKS5hcHBlbmQoYnJhbmRsaXN0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJG1lZ2EuZmluZCgnLm1lbnVsaXN0JykuZWFjaChmdW5jdGlvbiAoJGkpIHtcclxuICAgICAgICAgICAgICAgICRpID0gJGkgKyAxO1xyXG4gICAgICAgICAgICAgICAgaWYgKCQodGhpcykuZmluZCgnPiBhJykubGVuZ3RoID4gbWF4bGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZW5kID0gJCh0aGlzKS5maW5kKCc+IGEnKS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVuZCA+IG1heGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhbGlzdCA9ICQodGhpcykuZmluZCgnPiBhJykuc2xpY2UobWF4bGVuZ3RoLCBlbmQpLmNsb25lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkbWVnYS5maW5kKCcubWVudWxpc3QtJyArICgkaSArIDEpKS5sZW5ndGggIT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJG1lZ2EuZmluZCgnLm1lbnVsaXN0LScgKyAoJGkgKyAxKSkucHJlcGVuZChkYXRhbGlzdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoJGkgIT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkbWVnYS5maW5kKCcubWVudWxpc3QtJyArICRpICsgJz4gYScpLmVxKDApLmhhc0NsYXNzKCdsZXZlbC0yJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldiA9ICRpIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdHRleHQgPSAkbWVnYS5maW5kKCcubWVudWxpc3QtJyArIHByZXYgKyAnPiBhLmxldmVsLTEnKS5sYXN0KCkuYXR0cignaHJlZmxhbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJG1lZ2EuZmluZCgnLm1lbnVsaXN0LScgKyAkaSkucHJlcGVuZCgnPGRpdiBjbGFzcz1cImxldmVsLWNvbnRpbnVlXCI+JyArIGxhc3R0ZXh0ICsgJywgQ29udGludWVkPC9kaXY+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCc+IGEnKS5zbGljZShtYXhsZW5ndGgsIGVuZCkucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAkbWVnYS5maW5kKCcubWVnYV9zdWJjYXRlZ29yeScpLnJlbW92ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8qIENsaWNrIGV2ZW50IGZvciBicmFuZHMgdG8gc2VlIHN1YiBtZW51cyBpbiBtb2JpbGUgKi9cclxuICAgICAgICAkKCcjYnJhbmQtdGFicy1oZWFkZXIgPiB1bCA+IGxpIC5tb2JpbGUtbWFpbi1tZW51LWhlYWRpbmcnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPD0gOTU5KSB7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpLmNsb3Nlc3QoJ2xpJyk7XHJcbiAgICAgICAgICAgICAgICAkdGhpcy5jbG9zZXN0KCd1bCcpLmFkZENsYXNzKCdoaWRlLWFmdGVyJyk7XHJcbiAgICAgICAgICAgICAgICAkdGhpcy5zaWJsaW5ncygnbGknKS5yZW1vdmVDbGFzcygnanMtc3ViLW1lbnUtYWN0aXZlJykuYWRkQ2xhc3MoJ2pzLXN1Yi1tZW51LWluYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAkdGhpcy5yZW1vdmVDbGFzcygnanMtc3ViLW1lbnUtaW5hY3RpdmUnKS5hZGRDbGFzcygnanMtc3ViLW1lbnUtYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAkdGhpcy5maW5kKCcubWVnYW1lbnUtZHJvcCcpLmFuaW1hdGUoeydsZWZ0JzogWzAsICdlYXNlT3V0RXhwbyddfSk7XHJcbiAgICAgICAgICAgICAgICAkdGhpcy5maW5kKCcuc2hvcC1yYXBhbGEnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgJGN1ck9iaiA9ICQodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkY3VyT2JqLmNsb3Nlc3QoJy5zdWItY2F0ZWdvcnktc2VjdGlvbi0xJykuaGFzQ2xhc3MoJ2pzLWFjdGl2ZS1zdWItbWVudScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRjdXJPYmoubmV4dCgnLnN1Yi1jYXQtZHJvcC1kb3duJykudHJpZ2dlcignY2xpY2snKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoJy5tZW51bGlzdCAuc3ViLWNhdGVnb3J5LXNlY3Rpb24tMSA+IGEnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbWVudUxpc3QgPSAkKHRoaXMpLmNsb3Nlc3QoJy5tZW51bGlzdCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBtYWluQ29udGVudCA9ICQodGhpcykuY2xvc2VzdCgnLnN1Yi1jYXRlZ29yeS1zZWN0aW9uLTEnKTtcclxuICAgICAgICAgICAgICAgICAgICAkKG1haW5Db250ZW50KS5maW5kKCcuc3ViLWNhdC1kcm9wLWRvd24nKS5yZW1vdmVBdHRyKCdzdHlsZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhY2hvcldpZHRoID0gJCh0aGlzKS53aWR0aCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkcm9wRG93bldpc3RoID0gJChtZW51TGlzdCkud2lkdGgoKSAtIGFjaG9yV2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgZHJvcERvd25XaXN0aCA9IGRyb3BEb3duV2lzdGggLSA3MDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZHJvcERvd25XaXN0aCA+IDE3KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQobWFpbkNvbnRlbnQpLmZpbmQoJy5zdWItY2F0LWRyb3AtZG93bicpLndpZHRoKGRyb3BEb3duV2lzdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgfSBlbHNlIGlmICgkKHdpbmRvdykud2lkdGgoKSA+IDk1OSAmJiAkKHdpbmRvdykud2lkdGgoKSA8IDEwMjUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkZXZpY2VBZ2VudCA9IG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSxcclxuICAgICAgICAgICAgICAgICAgICBkZXZpY2VUeXBlID0gZGV2aWNlQWdlbnQubWF0Y2goLyhpcGhvbmV8aXBvZHxpcGFkfGFuZHJvaWR8YmxhY2tCZXJyeSkvKTtcclxuICAgICAgICAgICAgICAgIGlmIChkZXZpY2VUeXBlWzBdID09ICdpcGhvbmUnIHx8IGRldmljZVR5cGVbMF0gPT0gJ2lwYWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLyokKFwiLm1vYmlsZS1tYWluLW1lbnUtaGVhZGluZyA+IGFcIikucmVtb3ZlQ2xhc3MoXCJzZWxlY3RlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBpZighJCh0aGlzKS5oYXNDbGFzcygnc2VsZWN0ZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lZ2FtZW51Lm1lZ2FtZW51RXZlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSovXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAvKiBDbGljayBldmVudCBmb3IgdG8gc2VlIGFsbCB0aGUgYnJhbmRzIGluIG1vYmlsZSAqL1xyXG4gICAgICAgICQoJ2JvZHknKS5vZmYoJ2NsaWNrJywgJy5zZWUtYWxsLWJyYW5kcycpLm9uKCdjbGljaycsICcuc2VlLWFsbC1icmFuZHMnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAvL3ZhciAkd2lkdGggPSAkKCcjYnJhbmQtdGFicy1oZWFkZXInKS53aWR0aCgpO1xyXG4gICAgICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPD0gOTU5KSB7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgJHdpZHRoID0gJCgnI2JyYW5kLXRhYnMtaGVhZGVyJykud2lkdGgoKTtcclxuICAgICAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcykuY2xvc2VzdCgnbGknKTtcclxuICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoJy5tZWdhbWVudS1kcm9wJykuYW5pbWF0ZSh7J2xlZnQnOiBbJHdpZHRoLCAnZWFzZU91dEV4cG8nXX0pO1xyXG4gICAgICAgICAgICAgICAgJHRoaXMuc2libGluZ3MoJ2xpJykucmVtb3ZlQ2xhc3MoJ2pzLXN1Yi1tZW51LWluYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAkdGhpcy5jbG9zZXN0KCd1bCcpLnJlbW92ZUNsYXNzKCdoaWRlLWFmdGVyJyk7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJHRoaXMuZmluZCgnLm1lZ2FtZW51LWRyb3AnKS5wb3NpdGlvbigpLmxlZnQgPT0gJHdpZHRoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy5yZW1vdmVDbGFzcygnanMtc3ViLW1lbnUtYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSwgNDAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvKiBDbGljayBldmVudCBmb3Igc3ViIG1lbnUgZHJvcCBkb3duIGluIG1vYmlsZSAqL1xyXG4gICAgICAgICQoJ2JvZHknKS5vZmYoJ2NsaWNrJywgJy5zdWItY2F0ZWdvcnktc2VjdGlvbi0xIC5zdWItY2F0LWRyb3AtZG93bicpLm9uKCdjbGljaycsICcuc3ViLWNhdGVnb3J5LXNlY3Rpb24tMSAuc3ViLWNhdC1kcm9wLWRvd24nLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPD0gOTU5KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoISQodGhpcykuaGFzQ2xhc3MoJ25vLWNsaWNrJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKS5jbG9zZXN0KCcuc3ViLWNhdGVnb3J5LXNlY3Rpb24tMScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghJHRoaXMuaGFzQ2xhc3MoJ2pzLWFjdGl2ZS1zdWItbWVudScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLmFkZENsYXNzKCdqcy1hY3RpdmUtc3ViLW1lbnUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMuZmluZCgnLnN1Yi1jYXRlZ29yeS1zZWN0aW9uLTInKS5yZW1vdmVBdHRyKCdzdHlsZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy5maW5kKCcuc3ViLWNhdGVnb3J5LXNlY3Rpb24tMicpLnNsaWRlRG93bigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoJy5zdWItY2F0ZWdvcnktc2VjdGlvbi0yJykuc2xpZGVVcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy5kZWxheSgxMDAwKS5yZW1vdmVDbGFzcygnanMtYWN0aXZlLXN1Yi1tZW51Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIG1haW4gbWVudSB0b2dnbGVcclxuICAgICAgICAkKCdib2R5Jykub2ZmKCdjbGljaycsICcubWVudS10b2dnbGUnKS5vbignY2xpY2snLCAnLm1lbnUtdG9nZ2xlJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPD0gOTU5KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoISQoJyNjb250YWluZXInKS5oYXNDbGFzcygnanMtY29udGFpbmVyLWFjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVnYW1lbnUub3BlbigpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBtZWdhbWVudS5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJCgnYm9keScpLm9mZigndG91Y2hzdGFydCBjbGljaycsICdhLm1lbnUtb3Blbi1zaGFkb3cnKS5vbigndG91Y2hzdGFydCBjbGljaycsICdhLm1lbnUtb3Blbi1zaGFkb3cnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA8PSA5NTkpIHtcclxuICAgICAgICAgICAgICAgIGlmICghJCgnI2NvbnRhaW5lcicpLmhhc0NsYXNzKCdqcy1jb250YWluZXItYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBtZWdhbWVudS5vcGVuKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lZ2FtZW51LmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAkKCdib2R5Jykub2ZmKCdjbGljaycsICdhLm1hZ25pZmllci1pY29uJykub24oJ2NsaWNrJywgJ2EubWFnbmlmaWVyLWljb24nLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA8PSA5NTkpIHtcclxuICAgICAgICAgICAgICAgIC8vdmFyICR3aWR0aCA9ICQoJyNicmFuZC10YWJzLWhlYWRlcicpLndpZHRoKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoISQoJyNjb250YWluZXInKS5oYXNDbGFzcygnanMtY29udGFpbmVyLWFjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLm1hZ25pZmllci1pY29uJykuYWRkQ2xhc3MoJ2pzLW1hZ25pZmllci1pY29uLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lZ2FtZW51Lm9wZW4oKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJCgnLm1hZ25pZmllci1pY29uJykuaGFzQ2xhc3MoJ2pzLW1hZ25pZmllci1pY29uLWFjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNjb250YWluZXInKS5maW5kKCcuc2ltcGxlc2VhcmNoaW5wdXQnKS5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBNZWdhIG1lbnUgZXZlbnRzIGZvciB3aW5kb3cgd2lkdGggZ3JlYXRlciB0aGFuIDk1OVxyXG4gICAgICAgICQoJyNicmFuZC10YWJzLWhlYWRlciA+IHVsID4gbGknKS5tb3VzZWVudGVyKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyICRpZCA9ICQodGhpcykuZmluZCgnLm1vYmlsZS1tYWluLW1lbnUtaGVhZGluZyA+IGEnKS5hdHRyKCdjbGFzcycpO1xyXG4gICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpID4gOTU5KSB7XHJcbiAgICAgICAgICAgICAgICAkKCcub3dsLWNhcm91c2VsJykuZmluZCgnLm93bC1pdGVtLCAub3dsLWl0ZW0gaW1nJykudHJpZ2dlcignbW91c2VlbnRlcicpO1xyXG4gICAgICAgICAgICAgICAgJHRoaXMuc2libGluZ3MoJ2xpJykuZmluZCgnLm1lZ2FtZW51ZHJvcCwgLm1lZ2FtZW51LWRyb3AnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcuYWNjb3VudGNvbnRlbnQnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQobWVnYW1lbnUuZ2xvYmFsVGltZXIpO1xyXG4gICAgICAgICAgICAgICAgLy9tZWdhbWVudS5nbG9iYWxUaW1lciA9PSAwO1xyXG4gICAgICAgICAgICAgICAgJCgnI2JyYW5kLXRhYnMtaGVhZGVyIGxpJykucmVtb3ZlQ2xhc3MoJ2N1cnJlbnQnKTtcclxuICAgICAgICAgICAgICAgIGlmICgkdGhpcy5maW5kKCcubWVnYW1lbnVkcm9wJykuZmluZCgnYScpLmxlbmd0aCAhPSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMuZmluZCgnLm1lZ2FtZW51ZHJvcCcpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAkdGhpcy5maW5kKCcubWVnYW1lbnUtZHJvcCcpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyQoJy5tZWdhbWVudWRyb3BbaWQ9XCInKyAkaWQgKydcIl0nKS5jbG9zZXN0KCcubWVnYS1tZW51JykuZmluZCgnLm1hc2snKS5jc3MoJ2xlZnQnLCQodGhpcykub2Zmc2V0KCkubGVmdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8kKCcubWVnYW1lbnVkcm9wW2lkPVwiJysgJGlkICsnXCJdJykuY2xvc2VzdCgnLm1lZ2EtbWVudScpLmZpbmQoJy5tYXNrJykuYXR0cignaHJlZicsJCh0aGlzKS5maW5kKCdhJykuYXR0cignaHJlZicpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciBjb250YWluZXJ3aWR0aCA9ICQoJy5tZWdhbWVudS1kcm9wIC53cmFwcGVyJykud2lkdGgoKSAvICQoJyMnICsgJGlkICsgJyAubWVudWxpc3QnKS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBjb250YWluZXJ3aWR0aCA9IGNvbnRhaW5lcndpZHRoIC0gMjE7XHJcbiAgICAgICAgICAgICAgICAkKCcjJyArICRpZCArICcgLm1lbnVsaXN0JykucmVtb3ZlQXR0cignc3R5bGUnKTtcclxuICAgICAgICAgICAgICAgICQoJyMnICsgJGlkICsgJyAubWVudWxpc3QnKS53aWR0aChjb250YWluZXJ3aWR0aCk7XHJcbiAgICAgICAgICAgICAgICBtZWdhbWVudS5zeW5jaGVpZ2h0KCQoJyMnICsgJGlkICsgJy5tZWdhbWVudWRyb3AgLm1lbnVsaXN0JykpO1xyXG5cclxuICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2N1cnJlbnQnKTtcclxuICAgICAgICAgICAgICAgIGlmICghJCh0aGlzKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcjYnJhbmQtdGFicy1oZWFkZXIgbGkuYWN0aXZlJykuYWRkQ2xhc3MoJ2luYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2luYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkKCcuYnJhbmQtdGFicy1oZWFkZXItbWFzaycpLnNob3coKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLm1vdXNlbGVhdmUoZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpID4gOTU5KSB7XHJcbiAgICAgICAgICAgICAgICAkKCcub3dsLWNhcm91c2VsJykuZmluZCgnLm93bC1pdGVtLCAub3dsLWl0ZW0gaW1nJykudHJpZ2dlcignbW91c2VvdXQnKTtcclxuICAgICAgICAgICAgICAgIC8qdmFyIGRldmljZUFnZW50ID0gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLFxyXG4gICAgICAgICAgICAgICAgZGV2aWNlVHlwZSA9IGRldmljZUFnZW50Lm1hdGNoKC8oaXBob25lfGlwb2R8aXBhZHxhbmRyb2lkfGJsYWNrQmVycnkpLyk7XHJcbiAgICAgICAgICAgICAgICBpZihkZXZpY2VUeXBlWzBdID09IFwiaXBob25lXCIgfHwgZGV2aWNlVHlwZVswXSA9PSBcImlwYWRcIil7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICAkdGhpcy5maW5kKFwiLm1vYmlsZS1tYWluLW1lbnUtaGVhZGluZyA+IGFcIikucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICB9Ki9cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvKiogc2luZ2xlIGNsaWNrIHJlZGlyZWN0aW5nIG9mIG1lZ2FtZW51IGNhdGVnb3JpZXMqL1xyXG4gICAgICAgIC8qJCgnLnJhcGFsYV9kZXZpY2UgLm1lbnVsaXN0IGEnKS5tb3VzZWVudGVyKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJCh0aGlzKS5hdHRyKCdocmVmJyk7XHJcbiAgICAgICAgfSk7Ki9cclxuICAgICAgICAkKCcjYnJhbmQtdGFicy1oZWFkZXInKS5tb3VzZWxlYXZlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpID4gOTU5KSB7XHJcbiAgICAgICAgICAgICAgICAkKCcubWVnYW1lbnUtZHJvcCcpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICQoJy5tZWdhbWVudWRyb3AnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcjYnJhbmQtdGFicy1oZWFkZXIgPiB1bCA+IGxpLmFjdGl2ZScpLnJlbW92ZUNsYXNzKCdpbmFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgJCgnI2JyYW5kLXRhYnMtaGVhZGVyID4gdWwgPiBsaScpLnJlbW92ZUNsYXNzKCdjdXJyZW50Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJCgnLmJyYW5kLXRhYnMtaGVhZGVyLW1hc2snKS5tb3VzZWVudGVyKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpID4gOTU5KSB7XHJcbiAgICAgICAgICAgICAgICAkKCcubWVnYW1lbnUtZHJvcCcpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICQoJy5tZWdhbWVudWRyb3AnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcjYnJhbmQtdGFicy1oZWFkZXIgPiB1bCA+IGxpLmFjdGl2ZScpLnJlbW92ZUNsYXNzKCdpbmFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgJCgnI2JyYW5kLXRhYnMtaGVhZGVyID4gdWwgPiBsaScpLnJlbW92ZUNsYXNzKCdjdXJyZW50Jyk7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmhpZGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvKiQoXCIucmFwYWxhX2RldmljZSAjYnJhbmQtdGFicy1oZWFkZXIgYVwiKS5jbGljayhmdW5jdGlvbihlKXtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBpZigkKHRoaXMpLmhhc0NsYXNzKCdzZWxlY3RlZCcpKXtcclxuICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICQodGhpcykuYXR0cignaHJlZicpO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdChcImxpXCIpLnNpYmxpbmdzKCkuZmluZChcImFcIikucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7Ki9cclxuICAgIH0sXHJcbiAgICBzeW5jaGVpZ2h0OiBmdW5jdGlvbiAoJHNlbCkge1xyXG4gICAgICAgIHZhciBjdXJyZW50ID0gMDtcclxuICAgICAgICBpZiAoJCgkc2VsKS5oYXNDbGFzcygnbWVudWxpc3QnKSkge1xyXG4gICAgICAgICAgICAkc2VsLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCQodGhpcykuaGVpZ2h0KCkgPiBjdXJyZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudCA9ICQodGhpcykuaGVpZ2h0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICRzZWwuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5oZWlnaHQoKSA+IGN1cnJlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50ID0gJCh0aGlzKS5oZWlnaHQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICRzZWwuaGVpZ2h0KGN1cnJlbnQpO1xyXG4gICAgfVxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBtZWdhbWVudTtcclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxudmFyIHV0aWwgPSByZXF1aXJlKCcuL3V0aWwnKTtcclxuICAgIC8vYm9udXNQcm9kdWN0c1ZpZXcgPSByZXF1aXJlKCcuL2JvbnVzLXByb2R1Y3RzLXZpZXcnKTtcclxuXHJcbnZhciB0aW1lciA9IHtcclxuICAgIGlkOiBudWxsLFxyXG4gICAgY2xlYXI6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5pZCkge1xyXG4gICAgICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuaWQpO1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5pZDtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgc3RhcnQ6IGZ1bmN0aW9uIChkdXJhdGlvbiwgY2FsbGJhY2spIHtcclxuICAgICAgICB0aGlzLmlkID0gc2V0VGltZW91dChjYWxsYmFjaywgZHVyYXRpb24pO1xyXG4gICAgfVxyXG59O1xyXG5cclxudmFyIG1pbmljYXJ0ID0ge1xyXG4gICAgdXJsOiB1dGlsLmFqYXhVcmwoVXJscy5hZGRQcm9kdWN0KSxcclxuICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBtaW5pY2FydC5yZXNldCgpO1xyXG4gICAgICAgICQoJy5jaGVja291dG1pbmljYXJ0Jykuc2xpbXNjcm9sbCgpO1xyXG4gICAgICAgIHRoaXMuJGVsID0gJCgnI21pbmljYXJ0Jyk7XHJcbiAgICAgICAgdGhpcy4kY29udGVudCA9IHRoaXMuJGVsLmZpbmQoJy5taW5pY2FydGNvbnRlbnQnKTtcclxuICAgICAgICBqUXVlcnkoJy5taW5pY2FydGljb24tY29udCcpLm9uKCdtb3VzZW92ZXIgdG91Y2hzdGFydCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCFtaW5pY2FydC5pc1Nob3coKSkge1xyXG4gICAgICAgICAgICAgICAgbWluaWNhcnQuaG92ZXJTbGlkZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICQoJy5DdXN0b20tdG9vbHRpcCwgLmN2Y190b29sdGlwLCAub3JkZXJnb3Rocm91Z2hfdG9vbHRpcCcpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCQoJy5yYXBhbGFfZGV2aWNlJykubGVuZ3RoID09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcykudG9vbHRpcHN0ZXIoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBqUXVlcnkodGhpcykuZmluZCgnLnRvb2x0aXBjb250YWluZXInKS5odG1sKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRBc0hUTUw6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heFdpZHRoOiAzMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvdWNoRGV2aWNlczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcjogJ2NsaWNrJ1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcykudG9vbHRpcHN0ZXIoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBqUXVlcnkodGhpcykuZmluZCgnLnRvb2x0aXBjb250YWluZXInKS5odG1sKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRBc0hUTUw6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heFdpZHRoOiAzMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvdWNoRGV2aWNlczogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gcmVnaXN0ZXIgY2xvc2UgYnV0dG9uIGV2ZW50XHJcbiAgICAgICAgJCgnLm1pbmljYXJ0Y29udGVudCAubWluaWNhcnRjbG9zZScpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gcmVzZXQgYWxsIHRoZSBldmVudHMgYmluZGluZ3NcclxuICAgICAgICAgICAgbWluaWNhcnQucmVzZXQoKTtcclxuICAgICAgICAgICAgbWluaWNhcnQuY2xvc2UoMCk7XHJcbiAgICAgICAgICAgICQoJy5yYXBhbGFfZGV2aWNlIC5taW5pY2FydC1idXR0b24nKS5yZW1vdmVDbGFzcygnY2xpY2tlZCcpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoJy5taW5pY2FydGNvbnRlbnQnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChtaW5pY2FydC50aW1lcik7XHJcbiAgICAgICAgICAgIG1pbmljYXJ0LnRpbWVyID0gbnVsbDtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKCcubWluaWNhcnQnKS5tb3VzZWVudGVyKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgbWluaWNhcnQuc2V0bWluaWNhcmhlaWdodCgpO1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQobWluaWNhcnQudGltZXIpO1xyXG4gICAgICAgICAgICBtaW5pY2FydC50aW1lciA9IG51bGw7XHJcbiAgICAgICAgICAgIGlmICgkKCcubWluaWNhcnRjb250ZW50JykuaXMoJzphbmltYXRlZCcpKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcubWluaWNhcnRjb250ZW50Jykuc3RvcCgpO1xyXG4gICAgICAgICAgICAgICAgJCgnLm1pbmljYXJ0Y29udGVudCcpLmNzcyh7J29wYWNpdHknOiAnMScsICdoZWlnaHQnOiAnYXV0byd9KTtcclxuICAgICAgICAgICAgICAgIG1pbmljYXJ0LmluaXQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLm1vdXNlbGVhdmUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKCcucmFwYWxhX2RldmljZSAubWluaWNhcnQtYnV0dG9uJykucmVtb3ZlQ2xhc3MoJ2NsaWNrZWQnKTtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KG1pbmljYXJ0LnRpbWVyKTtcclxuICAgICAgICAgICAgbWluaWNhcnQudGltZXIgPSBudWxsO1xyXG4gICAgICAgICAgICAvLyBhZnRlciBhIHRpbWUgb3V0IGF1dG9tYXRpY2FsbHkgY2xvc2UgaXRcclxuICAgICAgICAgICAgbWluaWNhcnQudGltZXIgPSBzZXRUaW1lb3V0KFxyXG4gICAgICAgICAgICAgICAgJ21pbmljYXJ0LmNsb3NlKCknLCAzMCk7XHJcbiAgICAgICAgICAgIG1pbmljYXJ0LmNsb3NlKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICgkKCcubWluaS1jYXJ0LXByb2R1Y3QnKS5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgICQoJy5taW5pY2FydGNvbnRlbnQnKS5yZW1vdmVDbGFzcygnbGVzc29uZScpO1xyXG4gICAgICAgICAgICAkKCcubWluaWNhcnRjb250ZW50IC5zbGltU2Nyb2xsRGl2JykucmVtb3ZlQ2xhc3MoJ2xlc3MnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkKCcubWluaWNhcnRjb250ZW50JykuYWRkQ2xhc3MoJ2xlc3NvbmUnKTtcclxuICAgICAgICAgICAgJCgnLm1pbmljYXJ0Y29udGVudCAuc2xpbVNjcm9sbERpdicpLmFkZENsYXNzKCdsZXNzJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0sXHJcblxyXG4gICAgLy8gcmV0dXJucyBhIGJvb2xlYW4gaWYgYSBtaW5pY2FydCBpcyB2aXNpYmxlL3Nob3duIG9yIGhpZGRlblxyXG4gICAgaXNTaG93OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIGpRdWVyeSgnLm1pbmljYXJ0Y29udGVudCcpLmNzcygnZGlzcGxheScpID09ICdub25lJyA/IGZhbHNlIDogdHJ1ZTtcclxuICAgIH0sXHJcblxyXG4gICAgLy8gcmVzZXQgbWluaWNhcnRcclxuICAgIHJlc2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgalF1ZXJ5KCcubWluaWNhcnRpY29uLWNvbnQnKS51bmJpbmQoJ2hvdmVyJyk7XHJcbiAgICAgICAgalF1ZXJ5KCcubWluaWNhcnQnKS51bmJpbmQoJ21vdXNlZW50ZXInKS51bmJpbmQoXHJcbiAgICAgICAgICAgICdtb3VzZWxlYXZlJyk7XHJcbiAgICB9LFxyXG5cclxuICAgIGVuYWJsZWhvdmVyZWZmZWN0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgalF1ZXJ5KCcubWluaWNhcnR0b3RhbCcpLm1vdXNlZW50ZXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBtaW5pY2FydC5zZXRtaW5pY2FyaGVpZ2h0KCk7XHJcbiAgICAgICAgICAgIC8vY2xlYXJUaW1lb3V0KG1pbmljYXJ0LnRpbWVyKTtcclxuICAgICAgICAgICAgLy9taW5pY2FydC50aW1lciA9IG51bGw7XHJcbiAgICAgICAgICAgIHRpbWVyLmNsZWFyKCk7XHJcbiAgICAgICAgICAgIGlmICgkKCcubWluaWNhcnRjb250ZW50JykuaXMoJzphbmltYXRlZCcpKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcubWluaWNhcnRjb250ZW50Jykuc3RvcCgpO1xyXG4gICAgICAgICAgICAgICAgJCgnLm1pbmljYXJ0Y29udGVudCcpLmNzcyh7J29wYWNpdHknOiAnMScsICdoZWlnaHQnOiAnYXV0byd9KTtcclxuICAgICAgICAgICAgICAgIG1pbmljYXJ0LmluaXQoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9KTtcclxuICAgICAgICBqUXVlcnkoJy5taW5pY2FydHRvdGFsJykubW91c2VsZWF2ZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGpRdWVyeSgnLm1pbmljYXJ0Y29udGVudCcpLmZhZGVPdXQoMTAwMCk7XHJcbiAgICAgICAgICAgICQoJy5yYXBhbGFfZGV2aWNlIC5taW5pY2FydC1idXR0b24nKS5yZW1vdmVDbGFzcygnY2xpY2tlZCcpO1xyXG5cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb25cclxuICAgICAqIEBkZXNjcmlwdGlvbiBTaG93cyB0aGUgZ2l2ZW4gY29udGVudCBpbiB0aGUgbWluaSBjYXJ0XHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gQSBIVE1MIHN0cmluZyB3aXRoIHRoZSBjb250ZW50IHdoaWNoIHdpbGwgYmUgc2hvd25cclxuICAgICAqL1xyXG4gICAgLy8gc2hvd3MgdGhlIGdpdmVuIGNvbnRlbnQgaW4gdGhlIG1pbmkgY2FydFxyXG4gICAgc2hvdzogZnVuY3Rpb24gKGh0bWwpIHtcclxuICAgICAgICBqUXVlcnkoJyNtaW5pY2FydCcpLmh0bWwoaHRtbCk7XHJcbiAgICAgICAgLy8gYmluZCBhbGwgdGhlIGV2ZW50c1xyXG4gICAgICAgIG1pbmljYXJ0LmluaXQoKTtcclxuICAgICAgICBpZiAobWluaWNhcnQuc3VwcHJlc3NTbGlkZURvd24gJiYgbWluaWNhcnQuc3VwcHJlc3NTbGlkZURvd24oKSkge1xyXG4gICAgICAgICAgICAvLyBkbyBub3RoaW5nXHJcbiAgICAgICAgICAgIC8vIHRoZSBob29rICdNaW5pQ2FydC5zdXBwcmVzc1NsaWRlRG93bigpJyBzaG91bGQgaGF2ZSBkb25lXHJcbiAgICAgICAgICAgIC8vIHRoZSByZWZyZXNoXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbWluaWNhcnQuc2xpZGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgc2V0bWluaWNhcmhlaWdodDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBzY3JvbGxoZWlnaHQgPSAkKCcubWluaS1jYXJ0LXByb2R1Y3Q6ZXEoMCknKS5oZWlnaHQoKTtcclxuICAgICAgICBpZiAoJCgnLm1pbmktY2FydC1wcm9kdWN0JykubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICB2YXIgc2Nyb2xsaGVpZ2h0MiA9ICQoJy5taW5pLWNhcnQtcHJvZHVjdDplcSgxKScpLmhlaWdodCgpO1xyXG4gICAgICAgICAgICB2YXIgYXZnaGVpZ2h0ID0gKHNjcm9sbGhlaWdodCArIHNjcm9sbGhlaWdodDIpIC8gMjtcclxuICAgICAgICAgICAgdmFyIG5ld3Njcm9sbGhlaWdodCA9ICgoYXZnaGVpZ2h0KSArIChhdmdoZWlnaHQgLSAoYXZnaGVpZ2h0IC8gNCkpKSArIDIwO1xyXG5cclxuICAgICAgICAgICAgJCgnLnNsaW1TY3JvbGxEaXYnKS5jc3MoJ2hlaWdodCcsIG5ld3Njcm9sbGhlaWdodCArICdweCcpO1xyXG4gICAgICAgICAgICAkKCcuY2hlY2tvdXRtaW5pY2FydCcpLmNzcygnaGVpZ2h0JywgbmV3c2Nyb2xsaGVpZ2h0ICsgJ3B4Jyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIGhlaWdodEltZyA9ICQoJy5taW5pYnJhbmRjb2x1bW4nKS5maW5kKCdhJykuaGVpZ2h0KCk7XHJcbiAgICAgICAgICAgIHZhciBoZWlnaHRJbWcxID0gJCgnLm1pbmlicmFuZGNvbHVtbicpLmZpbmQoJ2ltZycpLmhlaWdodCgpO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKHNjcm9sbGhlaWdodCA8IGhlaWdodEltZyArIGhlaWdodEltZzEpIHtcclxuICAgICAgICAgICAgICAgIGhlaWdodEltZyA9ICQoJy5taW5pYnJhbmRjb2x1bW4nKS5maW5kKCdhJykuaGVpZ2h0KCk7XHJcbiAgICAgICAgICAgICAgICBzY3JvbGxoZWlnaHQgPSAkKCcudHJfcm90YXRpb24nKS5oZWlnaHQoKTtcclxuICAgICAgICAgICAgICAgICQoJy5zbGltU2Nyb2xsRGl2JykuY3NzKCdoZWlnaHQnLCBzY3JvbGxoZWlnaHQgKyAncHgnKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsaGVpZ2h0MSA9ICQoJy5jaGVja291dG1pbmljYXJ0JykuaGVpZ2h0KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2Nyb2xsaGVpZ2h0MSA+IHNjcm9sbGhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5jaGVja291dG1pbmljYXJ0JykuY3NzKCdoZWlnaHQnLCBzY3JvbGxoZWlnaHQxICsgJ3B4Jyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5jaGVja291dG1pbmljYXJ0JykuY3NzKCdoZWlnaHQnLCBzY3JvbGxoZWlnaHQgKyAncHgnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvLyBob29rIHdoaWNoIGNhbiBiZSByZXBsYWNlZCBieSBpbmRpdmlkdWFsIHBhZ2VzL3BhZ2UgdHlwZXMgKGUuZy5cclxuICAgIC8vIGNhcnQpXHJcbiAgICBzdXBwcmVzc1NsaWRlRG93bjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEBmdW5jdGlvblxyXG4gICAgICogQGRlc2NyaXB0aW9uIFNsaWRlcyBkb3duIGFuZCBzaG93IHRoZSBjb250ZW50cyBvZiB0aGUgbWluaSBjYXJ0XHJcbiAgICAgKi9cclxuICAgIHNsaWRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGltZXIuY2xlYXIoKTtcclxuICAgICAgICAvLyBzaG93IHRoZSBpdGVtXHJcbiAgICAgICAgdGhpcy4kY29udGVudC5zbGlkZURvd24oJ3Nsb3cnKTtcclxuICAgICAgICAvLyBhZnRlciBhIHRpbWUgb3V0IGF1dG9tYXRpY2FsbHkgY2xvc2UgaXRcclxuICAgICAgICB0aW1lci5zdGFydCg2MDAwLCB0aGlzLmNsb3NlLmJpbmQodGhpcykpO1xyXG5cclxuICAgICAgICBpZiAobWluaWNhcnQuc3VwcHJlc3NTbGlkZURvd24gJiYgbWluaWNhcnQuc3VwcHJlc3NTbGlkZURvd24oKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHJlZ2lzdGVyIGNsb3NlIGJ1dHRvbiBldmVudFxyXG4gICAgICAgIGpRdWVyeSgnLm1pbmljYXJ0Y29udGVudCAubWluaWNhcnRjbG9zZScpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gcmVzZXQgYWxsIHRoZSBldmVudHMgYmluZGluZ3NcclxuICAgICAgICAgICAgbWluaWNhcnQucmVzZXQoKTtcclxuICAgICAgICAgICAgbWluaWNhcnQuY2xvc2UoMCk7XHJcbiAgICAgICAgICAgICQoJy5yYXBhbGFfZGV2aWNlIC5taW5pY2FydC1idXR0b24nKS5yZW1vdmVDbGFzcygnY2xpY2tlZCcpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvL1JlbW92aW5nIHBhZGRpbmcgZnJvbSB0aGUgYmFubmVyIGlmIGl0IGRvZXNub3QgY29udGFpbnMgZGF0YS9pbWFnZVxyXG4gICAgICAgIGlmICgkKCcuc2xvdF9iYW5uZXInKS5maW5kKCdpbWcnKS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAkKCcuc2xvdF9iYW5uZXInKS5jc3MoJ3BhZGRpbmcnLCAnMCAwIDBweCAwJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyByZWdpc3RlciB0aGUgbW91c2VvdXQgZXZlbnRzXHJcbiAgICAgICAgalF1ZXJ5KCcubWluaWNhcnRjb250ZW50JykubW91c2VlbnRlcihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIG1pbmljYXJ0LnNldG1pbmljYXJoZWlnaHQoKTtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KG1pbmljYXJ0LnRpbWVyKTtcclxuICAgICAgICAgICAgbWluaWNhcnQudGltZXIgPSBudWxsO1xyXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5pcygnOmFuaW1hdGVkJykpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuc3RvcCgpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoeydvcGFjaXR5JzogJzEnLCAnaGVpZ2h0JzogJ2F1dG8nfSk7XHJcbiAgICAgICAgICAgICAgICBtaW5pY2FydC5pbml0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAkKCcubWluaWNhcnQnKS5tb3VzZWxlYXZlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCgnLnJhcGFsYV9kZXZpY2UgLm1pbmljYXJ0LWJ1dHRvbicpLnJlbW92ZUNsYXNzKCdjbGlja2VkJyk7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChtaW5pY2FydC50aW1lcik7XHJcbiAgICAgICAgICAgIG1pbmljYXJ0LnRpbWVyID0gbnVsbDtcclxuICAgICAgICAgICAgLy8gYWZ0ZXIgYSB0aW1lIG91dCBhdXRvbWF0aWNhbGx5IGNsb3NlIGl0XHJcbiAgICAgICAgICAgIG1pbmljYXJ0LnRpbWVyID0gc2V0VGltZW91dChcclxuICAgICAgICAgICAgICAgICdtaW5pY2FydC5jbG9zZSgpJywgMzApO1xyXG4gICAgICAgICAgICBtaW5pY2FydC5pbml0KCk7XHJcbiAgICAgICAgICAgIG1pbmljYXJ0LmNsb3NlKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIHNob3cgdGhlIGl0ZW1cclxuICAgICAgICBqUXVlcnkoJy5taW5pY2FydGNvbnRlbnQnKS5zbGlkZURvd24oJzIwMDAnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIG1pbmljYXJ0LnNldG1pbmljYXJoZWlnaHQoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBzaG93KFwic2xpZGVcIixcclxuICAgICAgICAvLyB7IGRpcmVjdGlvbjpcclxuICAgICAgICAvLyBcInVwXCIgfSxcclxuICAgICAgICAvLyAxMDAwKTtcclxuXHJcbiAgICAgICAgLy8gYWRkIHRoZSBvcGVuIGNsYXNzIHRvIHRoZSB0b3RhbFxyXG4gICAgICAgIGpRdWVyeSgnLm1pbmljYXJ0IC5taW5pY2FydHRvdGFsJykuYWRkQ2xhc3MoJ29wZW4nKTtcclxuXHJcbiAgICAgICAgalF1ZXJ5KCcuc3VtbWFyeXByb2R1Y3QnKS5lYWNoKFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSBqUXVlcnkodGhpcyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gJyc7XHJcbiAgICAgICAgICAgICAgICBpZiAoJHRoaXMuZmluZCgnLmltYWdlZXhwYW5kZWQnKS5pcygnOnZpc2libGUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoJy5oaWRlb25jb2xsYXBzZScpLmhpZGUoKS5lbmQoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmluZCgnLmF0dHJpYnV0ZScpLmFkZENsYXNzKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnY29sbGFwc2VkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0ID0gJCh0aGlzKS5maW5kKCcuYXR0cmlidXRlcycpLmhlaWdodCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodCArPSAkKHRoaXMpLmZpbmQoJy5uYW1lJykuaGVpZ2h0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMpLmZpbmQoJy5pbWFnZScpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdtaW4taGVpZ2h0JzogaGVpZ2h0XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoJHRoaXMuZmluZCgnLmltYWdlY29sbGFwc2VkJykuaXMoJzp2aXNpYmxlJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQgPSAkKHRoaXMpLmZpbmQoJy5hdHRyaWJ1dGVzJykuaGVpZ2h0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0ICs9ICQodGhpcykuZmluZCgnLm5hbWUnKS5oZWlnaHQoKSArIDMwO1xyXG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzKS5maW5kKCcuaW1hZ2UnKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnbWluLWhlaWdodCc6IGhlaWdodFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY2xlYXJUaW1lb3V0KG1pbmljYXJ0LnRpbWVyKTtcclxuICAgICAgICBtaW5pY2FydC50aW1lciA9IG51bGw7XHJcblxyXG4gICAgICAgIC8vIGFmdGVyIGEgdGltZSBvdXQgYXV0b21hdGljYWxseSBjbG9zZSBpdFxyXG4gICAgICAgIG1pbmljYXJ0LnRpbWVyID0gc2V0VGltZW91dCgnbWluaWNhcnQuY2xvc2UoKScsIDEwMDApO1xyXG5cclxuICAgICAgICAvLyBHb29nbGUgQW5hbHl0aWNzIGNvZGUgdG8gdHJhY2sgbWluaSBjYXJ0IG9wZW4uXHJcbiAgICAgICAgaWYgKGlzRXZlbnRUcmFja2luZ0VuYWJsZWQgJiYgaXNHb29nbGVBbmFseXRpY3NFbmFibGVkKSB7XHJcbiAgICAgICAgICAgIGdvb2dsZUFuYWx5dGljc0V2ZW50cy5taW5pQ2FydCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9LFxyXG4gICAgaG92ZXJTbGlkZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmIChtaW5pY2FydC5zdXBwcmVzc1NsaWRlRG93biAmJiBtaW5pY2FydC5zdXBwcmVzc1NsaWRlRG93bigpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gcmVnaXN0ZXIgY2xvc2UgYnV0dG9uIGV2ZW50XHJcbiAgICAgICAgalF1ZXJ5KCcubWluaWNhcnRjb250ZW50IC5taW5pY2FydGNsb3NlJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyByZXNldCBhbGwgdGhlIGV2ZW50cyBiaW5kaW5nc1xyXG4gICAgICAgICAgICBtaW5pY2FydC5yZXNldCgpO1xyXG4gICAgICAgICAgICBtaW5pY2FydC5jbG9zZSgwKTtcclxuICAgICAgICAgICAgJCgnLnJhcGFsYV9kZXZpY2UgLm1pbmljYXJ0LWJ1dHRvbicpLnJlbW92ZUNsYXNzKCdjbGlja2VkJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vUmVtb3ZpbmcgcGFkZGluZyBmcm9tIHRoZSBiYW5uZXIgaWYgaXQgZG9lc25vdCBjb250YWlucyBkYXRhL2ltYWdlXHJcbiAgICAgICAgaWYgKCQoJy5zbG90X2Jhbm5lcicpLmZpbmQoJ2ltZycpLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICQoJy5zbG90X2Jhbm5lcicpLmNzcygncGFkZGluZycsICcwIDAgMHB4IDAnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHJlZ2lzdGVyIHRoZSBtb3VzZW91dCBldmVudHNcclxuICAgICAgICBqUXVlcnkoJy5taW5pY2FydGNvbnRlbnQnKS5tb3VzZWVudGVyKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgbWluaWNhcnQuc2V0bWluaWNhcmhlaWdodCgpO1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQobWluaWNhcnQudGltZXIpO1xyXG4gICAgICAgICAgICBtaW5pY2FydC50aW1lciA9IG51bGw7XHJcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmlzKCc6YW5pbWF0ZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5zdG9wKCk7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcyh7J29wYWNpdHknOiAnMScsICdoZWlnaHQnOiAnYXV0byd9KTtcclxuICAgICAgICAgICAgICAgIG1pbmljYXJ0LmluaXQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoJy5taW5pY2FydCcpLm1vdXNlbGVhdmUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKCcucmFwYWxhX2RldmljZSAubWluaWNhcnQtYnV0dG9uJykucmVtb3ZlQ2xhc3MoJ2NsaWNrZWQnKTtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KG1pbmljYXJ0LnRpbWVyKTtcclxuICAgICAgICAgICAgbWluaWNhcnQudGltZXIgPSBudWxsO1xyXG4gICAgICAgICAgICAvLyBhZnRlciBhIHRpbWUgb3V0IGF1dG9tYXRpY2FsbHkgY2xvc2UgaXRcclxuICAgICAgICAgICAgbWluaWNhcnQudGltZXIgPSBzZXRUaW1lb3V0KFxyXG4gICAgICAgICAgICAgICAgJ21pbmljYXJ0LmNsb3NlKCknLCAzMCk7XHJcbiAgICAgICAgICAgIG1pbmljYXJ0LmNsb3NlKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIHNob3cgdGhlIGl0ZW1cclxuICAgICAgICBqUXVlcnkoJy5taW5pY2FydGNvbnRlbnQnKS5zbGlkZURvd24oJzIwMDAnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIG1pbmljYXJ0LnNldG1pbmljYXJoZWlnaHQoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBzaG93KFwic2xpZGVcIixcclxuICAgICAgICAvLyB7IGRpcmVjdGlvbjpcclxuICAgICAgICAvLyBcInVwXCIgfSxcclxuICAgICAgICAvLyAxMDAwKTtcclxuXHJcbiAgICAgICAgLy8gYWRkIHRoZSBvcGVuIGNsYXNzIHRvIHRoZSB0b3RhbFxyXG4gICAgICAgIGpRdWVyeSgnLm1pbmljYXJ0IC5taW5pY2FydHRvdGFsJykuYWRkQ2xhc3MoJ29wZW4nKTtcclxuXHJcbiAgICAgICAgalF1ZXJ5KCcuc3VtbWFyeXByb2R1Y3QnKS5lYWNoKFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSBqUXVlcnkodGhpcyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gJyc7XHJcbiAgICAgICAgICAgICAgICBpZiAoJHRoaXMuZmluZCgnLmltYWdlZXhwYW5kZWQnKS5pcygnOnZpc2libGUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoJy5oaWRlb25jb2xsYXBzZScpLmhpZGUoKS5lbmQoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmluZCgnLmF0dHJpYnV0ZScpLmFkZENsYXNzKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnY29sbGFwc2VkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0ID0gJCh0aGlzKS5maW5kKCcuYXR0cmlidXRlcycpLmhlaWdodCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodCArPSAkKHRoaXMpLmZpbmQoJy5uYW1lJykuaGVpZ2h0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMpLmZpbmQoJy5pbWFnZScpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdtaW4taGVpZ2h0JzogaGVpZ2h0XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoJHRoaXMuZmluZCgnLmltYWdlY29sbGFwc2VkJykuaXMoJzp2aXNpYmxlJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQgPSAkKHRoaXMpLmZpbmQoJy5hdHRyaWJ1dGVzJykuaGVpZ2h0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0ICs9ICQodGhpcykuZmluZCgnLm5hbWUnKS5oZWlnaHQoKSArIDMwO1xyXG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzKS5maW5kKCcuaW1hZ2UnKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnbWluLWhlaWdodCc6IGhlaWdodFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gR29vZ2xlIEFuYWx5dGljcyBjb2RlIHRvIHRyYWNrIG1pbmkgY2FydCBvcGVuLlxyXG4gICAgICAgIGlmIChpc0V2ZW50VHJhY2tpbmdFbmFibGVkICYmIGlzR29vZ2xlQW5hbHl0aWNzRW5hYmxlZCkge1xyXG4gICAgICAgICAgICBnb29nbGVBbmFseXRpY3NFdmVudHMubWluaUNhcnQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGpRdWVyeSgnLm1pbmljYXJ0dG90YWwnKS5hZGRDbGFzcygnZW5hYmxlaG92ZXInKTtcclxuICAgICAgICBtaW5pY2FydC5lbmFibGVob3ZlcmVmZmVjdCgpO1xyXG5cclxuICAgICAgICAkKCcjbWFpbiAsICNoZWFkZXIgLCAjZm9vdGVybmV3LCAjZm9vdGVybmV3IC5yb3cnKS51bmJpbmQoJ3RvdWNoc3RhcnQnKS5iaW5kKCd0b3VjaHN0YXJ0JywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgaWYgKCQoJy5taW5pY2FydGNvbnRlbnQnKS5pcygnOnZpc2libGUnKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRMaW5rTGVuZ3RoID0gJChlLnRhcmdldCkuY2xvc2VzdCgnLm1pbmljYXJ0Y29udGVudCcpLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIHZhciBtaW5pY2FydHRvdGFsID0gJChlLnRhcmdldCkuY2xvc2VzdCgnLm1pbmljYXJ0LWJ1dHRvbicpLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50TGlua0xlbmd0aCA9PT0gMCAmJiBtaW5pY2FydHRvdGFsID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KG1pbmljYXJ0LnRpbWVyKTtcclxuICAgICAgICAgICAgICAgICAgICBtaW5pY2FydC50aW1lciA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYWZ0ZXIgYSB0aW1lIG91dCBhdXRvbWF0aWNhbGx5IGNsb3NlIGl0XHJcbiAgICAgICAgICAgICAgICAgICAgbWluaWNhcnQudGltZXIgPSBzZXRUaW1lb3V0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnbWluaWNhcnQuY2xvc2UoKScsIDMwKTtcclxuICAgICAgICAgICAgICAgICAgICBtaW5pY2FydC5yZXNldCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1pbmljYXJ0LmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbWluaWNhcnQuaW5pdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5yYXBhbGFfZGV2aWNlIC5taW5pY2FydC1idXR0b24nKS5yZW1vdmVDbGFzcygnY2xpY2tlZCcpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtaW5pY2FydHRvdGFsID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5yYXBhbGFfZGV2aWNlIC5taW5pY2FydC1idXR0b24nKS50cmlnZ2VyKCdjbGljaycpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIC8vIGFkZHMgYSBwcm9kdWN0IHRvIHRoZSBtaW5pIGNhcnRcclxuICAgIC8vIEBwYXJhbXNcclxuICAgIC8vIHByb2dyZXNzSW1hZ2VTcmMgLSBzb3VyY2UvdXJsIG9mIHRoZSBpbWFnZSB0byBzaG93IHdoZW4gdGhlIGl0ZW1cclxuICAgIC8vIGlzIGJlaW5nIGFkZGVkIHRvIHRoZSBjYXJ0XHJcbiAgICAvLyBwb3N0ZGF0YSAtIGZvcm0gZGF0YSBjb250YWluaW5nIHRoZSBwcm9kdWN0IGluZm9ybWF0aW9uIHRvIGJlXHJcbiAgICAvLyBhZGRlZCB0byBtaW5pLWNhcnRcclxuICAgIC8vIGNhbGxiYWNrIC0gY2FsbCBiYWNrIGZ1bmN0aW9uL2hhbmRsZXJcclxuICAgIGFkZDogZnVuY3Rpb24gKHByb2dyZXNzSW1hZ2VTcmMsIHBvc3RkYXRhLCBjYWxsYmFjaykge1xyXG4gICAgICAgIC8vIGdldCB0aGUgZGF0YSBvZiB0aGUgZm9ybSBhcyBzZXJpYWxpemVkIHN0cmluZ1xyXG4gICAgICAgIC8vdmFyIHBvc3RkYXRhID0gcG9zdGRhdGE7XHJcblxyXG4gICAgICAgIC8vIGdldCBidXR0b24gcmVmZXJlbmNlXHJcbiAgICAgICAgdmFyIGFkZEJ1dHRvbnMgPSBbXTtcclxuXHJcbiAgICAgICAgLy8gdGhlIGJ1dHRvbiB0byB1cGRhdGVcclxuICAgICAgICB2YXIgYWRkQnV0dG9uID0gbnVsbDtcclxuXHJcbiAgICAgICAgLy8gaXQgaXMgYW4gYXJyYXkgb2YgYnV0dG9ucywgYnV0IHdlIG5lZWQgb25seSBvbmUgYWxsXHJcbiAgICAgICAgLy8gb3RoZXIgY29tYmluYXRpb25zIGFyZSBzdHJhbmdlIHNvIGZhclxyXG4gICAgICAgIGlmIChhZGRCdXR0b25zLmxlbmd0aCA9PSAxKSB7XHJcbiAgICAgICAgICAgIGFkZEJ1dHRvbiA9IGFkZEJ1dHRvbnNbMF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgcHJldmlvdXNJbWFnZVNyYyA9IG51bGw7XHJcblxyXG4gICAgICAgIC8vIHNob3cgcHJvZ3Jlc3MgaW5kaWNhdG9yXHJcbiAgICAgICAgaWYgKGFkZEJ1dHRvbiAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHByZXZpb3VzSW1hZ2VTcmMgPSBhZGRCdXR0b24uc3JjO1xyXG4gICAgICAgICAgICBhZGRCdXR0b24uc3JjID0gcHJvZ3Jlc3NJbWFnZVNyYztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGhhbmRsZXMgc3VjY2Vzc2Z1bCBhZGQgdG8gY2FydFxyXG4gICAgICAgIHZhciBoYW5kbGVyRnVuYyA9IGZ1bmN0aW9uIChyZXEpIHtcclxuICAgICAgICAgICAgLy8gaGlkZSBwcm9ncmVzcyBpbmRpY2F0b3JcclxuICAgICAgICAgICAgaWYgKGFkZEJ1dHRvbiAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBhZGRCdXR0b24uc3JjID0gcHJldmlvdXNJbWFnZVNyYztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gcmVwbGFjZSB0aGUgY29udGVudFxyXG4gICAgICAgICAgICBqUXVlcnkoJyNtaW5pY2FydCcpLmh0bWwocmVxKTtcclxuXHJcbiAgICAgICAgICAgIC8vIGJpbmQgYWxsIHRoZSBldmVudHNcclxuICAgICAgICAgICAgbWluaWNhcnQuaW5pdCgpO1xyXG4gICAgICAgICAgICBpZiAoJCgnLm1pbmktY2FydC1wcm9kdWN0JykubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICAgICAgJCgnLmNoZWNrb3V0bWluaWNhcnQnKS5zbGltc2Nyb2xsKHtcclxuICAgICAgICAgICAgICAgICAgICByYWlsVmlzaWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBhbHdheXNWaXNpYmxlOiB0cnVlXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICQoJy5taW5pY2FydHRhYmxlJykuZmluZCgndGhlYWQnKS5maXJzdCgpLmFkZENsYXNzKCd0aGVhZGZpeGVkVG9wJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcuY2hlY2tvdXRtaW5pY2FydCcpLmZpbmQoJy5jYXJ0b3JkZXJ0b3RhbHMnKS5yZW1vdmVDbGFzcygnY2FydHRvdGFscycpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmNoZWNrb3V0bWluaWNhcnQnKS5maW5kKCcubWluaWNhcnR0YWJsZScpLnJlbW92ZUNsYXNzKCdtaW5pd2l0aG91dFNjcm9sbCcpO1xyXG4gICAgICAgICAgICAgICAgJCgnLm1pbmljYXJ0Y29udGVudCcpLmZpbmQoJy5taW5pY2FydHRhYmxlaGVhZGVyJykucmVtb3ZlQ2xhc3MoJ21pbml3aXRob3V0U2Nyb2xsaGVhZCcpO1xyXG4gICAgICAgICAgICAgICAgJCgnLm1pbmljYXJ0dGFibGVoZWFkZXInKS5jc3MoJ2JvcmRlci1ib3R0b20nLCAnMXB4IHNvbGlkICNjY2MnKTtcclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkKCcubWluaWNhcnR0YWJsZScpLmZpbmQoJy50aGVhZGZpeGVkVG9wJykucmVtb3ZlQ2xhc3MoJ3RoZWFkZml4ZWRUb3AnKTtcclxuICAgICAgICAgICAgICAgICQoJy5taW5pY2FydHRhYmxlJykuZmluZCgnLmZpeGVkVG9wJykucmVtb3ZlQ2xhc3MoJ2ZpeGVkVG9wJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcubWluaWNhcnQnKS5maW5kKCcuY2FydG9yZGVydG90YWxzJykuYWRkQ2xhc3MoJ2NhcnR0b3RhbHMnKTtcclxuICAgICAgICAgICAgICAgICQoJy5jaGVja291dG1pbmljYXJ0JykuZmluZCgnLm1pbmljYXJ0dGFibGUnKS5hZGRDbGFzcygnbWluaXdpdGhvdXRTY3JvbGwnKTtcclxuICAgICAgICAgICAgICAgICQoJy5taW5pY2FydGNvbnRlbnQnKS5maW5kKCcubWluaWNhcnR0YWJsZWhlYWRlcicpLmFkZENsYXNzKCdtaW5pd2l0aG91dFNjcm9sbGhlYWQnKTtcclxuICAgICAgICAgICAgICAgICQoJy5taW5pY2FydHRhYmxlaGVhZGVyJykuY3NzKCdib3JkZXItYm90dG9tJywgJzFweCBzb2xpZCAjY2NjJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJCgnLm1pbmljYXJ0dGFibGUgLm1pbmktY2FydC1wcm9kdWN0Omxhc3QtY2hpbGQnKS5maW5kKCcubWluaS1jYXJ0LXByb2R1Y3QnKS5jc3MoJ2JvcmRlcicsICcwcHgnKTtcclxuXHJcbiAgICAgICAgICAgIGlmICgkKCdib2R5JykuaGFzQ2xhc3MoJ3JhcGFsYV9kZXZpY2UnKSkge1xyXG4gICAgICAgICAgICAgICAgJCgnLmNoZWNrb3V0bWluaWNhcnQnKS5maW5kKCcubWluaWNhcnR0YWJsZScpLnJlbW92ZUNsYXNzKCdtaW5pd2l0aG91dFNjcm9sbCcpO1xyXG4gICAgICAgICAgICAgICAgLy8gJChcIi5taW5pY2FydHRhYmxlIC50cl9yb3RhdGlvbjpsYXN0LWNoaWxkXCIpLmZpbmQoJy5taW5pcm93JykuY3NzKCdib3JkZXInLCcxcHgnKTtcclxuICAgICAgICAgICAgICAgICQoJy5taW5pY2FydHRhYmxlJykuZmluZCgndGhlYWQnKS5maXJzdCgpLmFkZENsYXNzKCd0aGVhZGZpeGVkVG9wJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcubWluaWNhcnR0YWJsZSAubWluaS1jYXJ0LXByb2R1Y3Q6bGFzdC1jaGlsZCcpLmZpbmQoJy5taW5pLWNhcnQtcHJvZHVjdCcpLmNzcygnYm9yZGVyJywgJzBweCcpO1xyXG4gICAgICAgICAgICAgICAgJCgnLm1pbmljYXJ0dGFibGVoZWFkZXInKS5jc3MoJ2JvcmRlci1ib3R0b20nLCAnMXB4IHNvbGlkICNjY2MnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKG1pbmljYXJ0LnN1cHByZXNzU2xpZGVEb3duICYmIG1pbmljYXJ0LnN1cHByZXNzU2xpZGVEb3duKCkpIHtcclxuICAgICAgICAgICAgICAgIC8vIGRvIG5vdGhpbmdcclxuICAgICAgICAgICAgICAgIC8vIHRoZSBob29rICdNaW5pQ2FydC5zdXBwcmVzc1NsaWRlRG93bigpJyBzaG91bGQgaGF2ZVxyXG4gICAgICAgICAgICAgICAgLy8gZG9uZSB0aGUgcmVmcmVzaFxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbWluaWNhcnQuc2xpZGUoKTtcclxuICAgICAgICAgICAgICAgIG1pbmljYXJ0LnNldG1pbmljYXJoZWlnaHQoKTtcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJCgnI3BkcE1haW4gLmFkZHRvY2FydGNvbmZpcm0tdG9vbHRpcCcpLmZhZGVJbig0MDApLnNob3coKVxyXG4gICAgICAgICAgICAgICAgLmRlbGF5KDE1MDApLmZhZGVPdXQoNDAwKTtcclxuICAgICAgICAgICAgLy8gZmlyZSB0aGUgQm9udXNEaXNjb3VudExpbmVJdGVtQ2hlY2sgZXZlbnQgc28gd2UgY2FuIGNoZWNrXHJcbiAgICAgICAgICAgIC8vIGlmIHRoZXJlIGlzIGEgYm9udXMgZGlzY291bnQgbGluZSBpdGVtXHJcbiAgICAgICAgICAgIC8qZXNsaW50LWRpc2FibGUgKi9cclxuICAgICAgICAgICAgalF1ZXJ5KGRvY3VtZW50KS50cmlnZ2VyKGpRdWVyeS5FdmVudCgnQm9udXNEaXNjb3VudExpbmVJdGVtQ2hlY2snKSk7XHJcbiAgICAgICAgICAgIC8qZXNsaW50LWVuYWJsZSAqL1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIGhhbmRsZXMgYWRkIHRvIGNhcnQgZXJyb3JcclxuICAgICAgICB2YXIgZXJyRnVuYyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gaGlkZSBwcm9ncmVzcyBpbmRpY2F0b3JcclxuICAgICAgICAgICAgaWYgKGFkZEJ1dHRvbiAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBhZGRCdXR0b24uc3JjID0gcHJldmlvdXNJbWFnZVNyYztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIGNsb3NlcyBhIHByZXZpb3VzIG1pbmkgY2FydFxyXG4gICAgICAgIG1pbmljYXJ0LmNsb3NlKCk7XHJcblxyXG4gICAgICAgIC8vIGFkZCB0aGUgcHJvZHVjdFxyXG4gICAgICAgIGpRdWVyeS5hamF4KHtcclxuICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxyXG4gICAgICAgICAgICB1cmw6IG1pbmljYXJ0LnVybCxcclxuICAgICAgICAgICAgY2FjaGU6IHRydWUsXHJcbiAgICAgICAgICAgIGRhdGE6IHBvc3RkYXRhLFxyXG4gICAgICAgICAgICBzdWNjZXNzOiBoYW5kbGVyRnVuYyxcclxuICAgICAgICAgICAgZXJyb3I6IGVyckZ1bmNcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgLy8gY2xvc2VzIHRoZSBtaW5pIGNhcnQgd2l0aCBnaXZlbiBkZWxheVxyXG4gICAgY2xvc2U6IGZ1bmN0aW9uIChkZWxheSkge1xyXG4gICAgICAgIGlmIChtaW5pY2FydC50aW1lciAhPSBudWxsIHx8IGRlbGF5ID09IDApIHtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KG1pbmljYXJ0LnRpbWVyKTtcclxuICAgICAgICAgICAgbWluaWNhcnQudGltZXIgPSBudWxsO1xyXG4gICAgICAgICAgICBqUXVlcnkoJy5taW5pY2FydGNvbnRlbnQnKS5mYWRlT3V0KDEwMDApO1xyXG4gICAgICAgICAgICAvLyBoaWRlIHdpdGggXCJzbGlkZVwiIGNhdXNlcyB0byBmaXJlIG1vdXNlIGVudGVyL2xlYXZlIGV2ZW50c1xyXG4gICAgICAgICAgICAvLyBzb21ldGltZXMgaW5maW5pdGVseSB0aHVzIGNoYW5nZWQgaXQgdG8gZmFkZU91dFxyXG4gICAgICAgICAgICAvLyBhZGQgdGhlIG9wZW4gY2xhc3MgdG8gdGhlIHRvdGFsXHJcbiAgICAgICAgICAgIGpRdWVyeSgnLm1pbmljYXJ0IC5taW5pY2FydHRvdGFsJykucmVtb3ZlQ2xhc3MoJ29wZW4nKTtcclxuICAgICAgICAgICAgalF1ZXJ5KCcubWluaWNhcnRjb250ZW50IC5taW5pY2FydGNsb3NlJykudW5iaW5kKCdjbGljaycpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gbWluaWNhcnQ7XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuXHJcbnZhciB1dGlsID0gcmVxdWlyZSgnLi91dGlsJyk7XHJcblxyXG52YXIgcGFnZSA9IHtcclxuICAgIHRpdGxlOiAnJyxcclxuICAgIHR5cGU6ICcnLFxyXG4gICAgcGFyYW1zOiB1dGlsLmdldFF1ZXJ5U3RyaW5nUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guc3Vic3RyKDEpKSxcclxuICAgIHJlZGlyZWN0OiBmdW5jdGlvbiAobmV3VVJMKSB7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gbmV3VVJMO1xyXG4gICAgICAgIH0sIDApO1xyXG4gICAgfSxcclxuICAgIHJlZnJlc2g6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmFzc2lnbih3aW5kb3cubG9jYXRpb24uaHJlZik7XHJcbiAgICAgICAgfSwgNTAwKTtcclxuICAgIH1cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcGFnZTtcclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxudmFyIGdpZnRjZXJ0ID0gcmVxdWlyZSgnLi4vZ2lmdGNlcnQnKSxcclxuICAgIHRvb2x0aXAgPSByZXF1aXJlKCcuLi90b29sdGlwJyksXHJcbiAgICB1dGlsID0gcmVxdWlyZSgnLi4vdXRpbCcpLFxyXG4gICAgZGlhbG9nID0gcmVxdWlyZSgnLi4vZGlhbG9nJyksXHJcbiAgICBwYWdlID0gcmVxdWlyZSgnLi4vcGFnZScpLFxyXG4gICAgdmFsaWRhdG9yID0gcmVxdWlyZSgnLi4vdmFsaWRhdG9yJyk7XHJcblxyXG4vKipcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBkZXNjcmlwdGlvbiBJbml0aWFsaXplcyB0aGUgZXZlbnRzIG9uIHRoZSBhZGRyZXNzIGZvcm0gKGFwcGx5LCBjYW5jZWwsIGRlbGV0ZSlcclxuICogQHBhcmFtIHtFbGVtZW50fSBmb3JtIFRoZSBmb3JtIHdoaWNoIHdpbGwgYmUgaW5pdGlhbGl6ZWRcclxuICovXHJcbmZ1bmN0aW9uIGluaXRpYWxpemVBZGRyZXNzRm9ybSgpIHtcclxuICAgIHZhciAkZm9ybSA9ICQoJyNlZGl0LWFkZHJlc3MtZm9ybScpO1xyXG5cclxuICAgICRmb3JtLmZpbmQoJ2lucHV0W25hbWU9XCJmb3JtYXRcIl0nKS5yZW1vdmUoKTtcclxuICAgIHRvb2x0aXAuaW5pdCgpO1xyXG4gICAgLy8kKFwiPGlucHV0Lz5cIikuYXR0cih7dHlwZTpcImhpZGRlblwiLCBuYW1lOlwiZm9ybWF0XCIsIHZhbHVlOlwiYWpheFwifSkuYXBwZW5kVG8oZm9ybSk7XHJcblxyXG4gICAgJGZvcm0ub24oJ2NsaWNrJywgJy5hcHBseS1idXR0b24nLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBpZiAoISRmb3JtLnZhbGlkKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgdXJsID0gdXRpbC5hcHBlbmRQYXJhbVRvVVJMKCRmb3JtLmF0dHIoJ2FjdGlvbicpLCAnZm9ybWF0JywgJ2FqYXgnKTtcclxuICAgICAgICB2YXIgYXBwbHlOYW1lID0gJGZvcm0uZmluZCgnLmFwcGx5LWJ1dHRvbicpLmF0dHIoJ25hbWUnKTtcclxuICAgICAgICB2YXIgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgIGRhdGE6ICRmb3JtLnNlcmlhbGl6ZSgpICsgJyYnICsgYXBwbHlOYW1lICsgJz14JyxcclxuICAgICAgICAgICAgdHlwZTogJ1BPU1QnXHJcbiAgICAgICAgfTtcclxuICAgICAgICAkLmFqYXgob3B0aW9ucykuZG9uZShmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mKGRhdGEpICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGRpYWxvZy5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2UucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuYWxlcnQoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkKCcjZGlhbG9nLWNvbnRhaW5lcicpLmh0bWwoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICBhY2NvdW50LmluaXQoKTtcclxuICAgICAgICAgICAgICAgIHRvb2x0aXAuaW5pdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KVxyXG4gICAgICAgIC5vbignY2xpY2snLCAnLmNhbmNlbC1idXR0b24sIC5jbG9zZS1idXR0b24nLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGRpYWxvZy5jbG9zZSgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLm9uKCdjbGljaycsICcuZGVsZXRlLWJ1dHRvbicsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgaWYgKHdpbmRvdy5jb25maXJtKFN0cmluZy5mb3JtYXQoUmVzb3VyY2VzLkNPTkZJUk1fREVMRVRFLCBSZXNvdXJjZXMuVElUTEVfQUREUkVTUykpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdXJsID0gdXRpbC5hcHBlbmRQYXJhbXNUb1VybChVcmxzLmRlbGV0ZUFkZHJlc3MsIHtcclxuICAgICAgICAgICAgICAgICAgICBBZGRyZXNzSUQ6ICRmb3JtLmZpbmQoJyNhZGRyZXNzaWQnKS52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6ICdhamF4J1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbidcclxuICAgICAgICAgICAgICAgIH0pLmRvbmUoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5zdGF0dXMudG9Mb3dlckNhc2UoKSA9PT0gJ29rJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaWFsb2cuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFnZS5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhLm1lc3NhZ2UubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuYWxlcnQoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpYWxvZy5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWdlLnJlZnJlc2goKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgaWYgKCQoJy5sb2dlcnJvcjp2aXNpYmxlJykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICQoJy5hY2NvdW50LWxvZ3MgLnJldHVybmluZ2N1c3RvbWVycycpLmZpbmQoJy5hY2NvdW50ZW1haWwnKS5hZGRDbGFzcygnZXJyb3JjbGllbnQnKTtcclxuICAgICAgICAkKCcuYWNjb3VudC1sb2dzIC5sb2dpbmN1c3RvbWVycyAubG9naW5fcGFzc3dvcmQnKS5hZGRDbGFzcygnZXJyb3JjbGllbnQnKTtcclxuICAgICAgICAvLyQoXCIucHRfYWNjb3VudCAud3JhcHBlciAuYWNjb3VudC1zZWN0aW9uIC5yZXR1cm5pbmdjdXN0b21lcnMgLnZhbHVlIFwiKS5jc3MoXCJtYXJnaW4tYm90dG9tXCIsIFwiMFwiKTtcclxuICAgIH1cclxuICAgICQoJy5yZWdpc3RyYXRpb24tYnV0dG9uJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBtYXNraGVpZ2h0ID0gJCgnLmNyZWF0ZWFuLWFjY291bnQgLmZvcm1zdWJtaXQnKS5wYXJlbnQoJ2RpdicpLm91dGVySGVpZ2h0KCk7XHJcbiAgICAgICAgdmFyIHJlYWxGb3JtID0galF1ZXJ5KHRoaXMpLmNsb3Nlc3QoJ2Zvcm0nKTtcclxuICAgICAgICBpZiAoIXJlYWxGb3JtLnZhbGlkKCkpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybS1yb3cnKS5hZGRDbGFzcygnaW5wdXRsYWJlbCcpO1xyXG4gICAgICAgICAgICByZWFsRm9ybS5maW5kKCcubWF4LWxlbmd0aC1lcnJvcicpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCQodGhpcykuY2xvc2VzdCgnLnZhbHVlJykuZmluZCgnaW5wdXQnKS52YWwoKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVhbEZvcm0uZmluZCgnLm1heC1sZW5ndGgtZXJyb3InKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkKCcucmVnaXN0cmF0aW9uLWJ1dHRvbiBzcGFuLmxvYWRJbWFnZScpLmNzcygnZGlzcGxheScsICdibG9jaycpO1xyXG4gICAgICAgICAgICAkKCcuY3JlYXRlYW4tYWNjb3VudCAuZm9ybXN1Ym1pdCcpLmNzcyh7J2hlaWdodCc6IG1hc2toZWlnaHQgKyAncHgnLCAnZGlzcGxheSc6ICdibG9jayd9KTtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBpZiAoJCgnLmV4aXN0aW5nX3JlZ2lzdGVyOnZpc2libGUnKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgJCgnLmNyZWF0ZWFuLWFjY291bnQgLnJlZ2lzdHJhdGlvbicpLmZpbmQoJy5hY2NvdW50ZW1haWwnKS5hZGRDbGFzcygnZXJyb3JjbGllbnQnKTtcclxuICAgICAgICAkKCcuY3JlYXRlYW4tYWNjb3VudCAucmVnaXN0cmF0aW9uJykuZmluZCgnLmZvcm1maWVsZF9lbWFpbCcpLmZpbmQoJy5sYWJlbHRleHQnKS5hZGRDbGFzcygnaW5wdXRsYWJlbCcpO1xyXG4gICAgICAgICQoJy5jcmVhdGVhbi1hY2NvdW50IC5yZWdpc3RyYXRpb24nKS5maW5kKCcuZm9ybWZpZWxkX2VtYWlsJykuZmluZCgnLnJlcXVpcmVkaW5kaWNhdG9yJykuYWRkQ2xhc3MoJ2lucHV0bGFiZWwnKTtcclxuICAgICAgICBpZiAoJCgnLnJlZ2lzdHJhdGlvbicpLmZpbmQoJ2lucHV0LnJlcXVpcmVkJykudmFsKCkubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAkKCcucmVnaXN0cmF0aW9uJykuZmluZCgnLmNsZWFyYnV0dG9uJykuc2hvdygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICgkKCcuYWNjb3VudC1lbWFpbC5lcnIubG9nX2Vycm9yOnZpc2libGUnKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgJCgnLnJldHVybmluZ2N1c3RvbWVycycpLmZpbmQoJy5mb3JtZmllbGRfZW1haWwnKS5maW5kKCcubGFiZWx0ZXh0JykuYWRkQ2xhc3MoJ2lucHV0bGFiZWwnKTtcclxuICAgICAgICAkKCcucmV0dXJuaW5nY3VzdG9tZXJzJykuZmluZCgnLmZvcm1maWVsZF9lbWFpbCcpLmZpbmQoJy5yZXF1aXJlZGluZGljYXRvcicpLmFkZENsYXNzKCdpbnB1dGxhYmVsJyk7XHJcbiAgICB9XHJcbiAgICAkKCcuc2lnbmluYnRuJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBtYXNraGVpZ2h0ID0gJCgnLmFjY291bnQtbG9ncyAuZm9ybXN1Ym1pdCcpLnBhcmVudCgnZGl2Jykub3V0ZXJIZWlnaHQoKTtcclxuICAgICAgICB2YXIgbWFza2hlaWdodHdpc2hsaXN0ID0gJCgnLndpc2gtbG9ncyAuZm9ybXN1Ym1pdCcpLnBhcmVudCgnZGl2Jykub3V0ZXJIZWlnaHQoKTtcclxuICAgICAgICB2YXIgcmVhbEZvcm0gPSBqUXVlcnkodGhpcykuY2xvc2VzdCgnZm9ybScpO1xyXG4gICAgICAgIGlmICghcmVhbEZvcm0udmFsaWQoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8kKHRoaXMpLmNsb3Nlc3QoJy5mb3JtYWN0aW9ucycpLmFkZENsYXNzKCdsb2FkSW1hZ2UnKTtcclxuICAgICAgICAgICAgJCgnLnNpZ25pbmJ0biBzcGFuLmxvYWRJbWFnZScpLmNzcygnZGlzcGxheScsICdibG9jaycpO1xyXG4gICAgICAgICAgICAkKCcuYWNjb3VudC1sb2dzIC5mb3Jtc3VibWl0JykuY3NzKHsnaGVpZ2h0JzogbWFza2hlaWdodCArICdweCcsICdkaXNwbGF5JzogJ2Jsb2NrJ30pO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy53aXNoLWxvZ3MnKS5maW5kKCcuZm9ybXN1Ym1pdCcpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAnaGVpZ2h0JzogbWFza2hlaWdodHdpc2hsaXN0ICsgJ3B4JyxcclxuICAgICAgICAgICAgICAgICdkaXNwbGF5JzogJ2Jsb2NrJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIGlmICgkKCcudWktbG9naW4gLmhlYWRlci1mb3Jnb3QtcHdkJykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICQodGhpcykuZmluZCgnaW5wdXQucmVxdWlyZWQnKS5iaW5kKCdrZXlkb3duIGtleXVwIGZvY3VzaW4gZm9jdXNvdXQga2V5cHJlc3MnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcudmFsdWUnKS5maW5kKCdlcnJvcmNsaWVudCcpLnJlbW92ZSgpO1xyXG5cclxuICAgICAgICB9KTtcclxuICAgICAgICAkKCcudWktbG9naW4gaGVhZGVyLWZvcmdvdC1wd2QnKS5maW5kKCdpbnB1dC5yZXF1aXJlZCcpLmJpbmQoJ2ZvY3VzaW4nLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLnZhbHVlJykuZmluZCgnZXJyb3JjbGllbnQnKS5yZW1vdmUoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgICQoJy5zYW1wbGUtc2VjdGlvbicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoISQodGhpcykuZmluZCgnLnNhbXBsZV9tYWlsX21haW4nKS5pcygnOnZpc2libGUnKSkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5zYW1wbGVfbWFpbF9tYWluJykuc2xpZGVEb3duKDUwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICB2YWxpZGF0b3IuaW5pdCgpO1xyXG59XHJcblxyXG4vKipcclxuICogQHByaXZhdGVcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBkZXNjcmlwdGlvbiBUb2dnbGVzIHRoZSBsaXN0IG9mIE9yZGVyc1xyXG4gKi9cclxuZnVuY3Rpb24gdG9nZ2xlRnVsbE9yZGVyKCkge1xyXG4gICAgJCgnLm9yZGVyLWl0ZW1zJylcclxuICAgICAgICAuZmluZCgnbGkuaGlkZGVuOmZpcnN0JylcclxuICAgICAgICAucHJldignbGknKVxyXG4gICAgICAgIC5hcHBlbmQoJzxhIGNsYXNzPVwidG9nZ2xlXCI+VmlldyBBbGw8L2E+JylcclxuICAgICAgICAuY2hpbGRyZW4oJy50b2dnbGUnKVxyXG4gICAgICAgIC5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQodGhpcykucGFyZW50KCkuc2libGluZ3MoJ2xpLmhpZGRlbicpLnNob3coKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmUoKTtcclxuICAgICAgICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBwcml2YXRlXHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAZGVzY3JpcHRpb24gQmluZHMgdGhlIGV2ZW50cyBvbiB0aGUgYWRkcmVzcyBmb3JtIChlZGl0LCBjcmVhdGUsIGRlbGV0ZSlcclxuICovXHJcbmZ1bmN0aW9uIGluaXRBZGRyZXNzRXZlbnRzKCkge1xyXG4gICAgdmFyIGFkZHJlc3NlcyA9ICQoJyNhZGRyZXNzZXMnKTtcclxuICAgIGlmIChhZGRyZXNzZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZHJlc3Nlcy5vbignY2xpY2snLCAnLmFkZHJlc3MtZWRpdCwgLmFkZHJlc3MtY3JlYXRlJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgZGlhbG9nLm9wZW4oe1xyXG4gICAgICAgICAgICB1cmw6IHRoaXMuaHJlZixcclxuICAgICAgICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgICAgICAgICAgZGlhbG9nQ2xhc3M6ICdhZGRyZXNzYWRkJyxcclxuICAgICAgICAgICAgICAgIG9wZW46IGluaXRpYWxpemVBZGRyZXNzRm9ybVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KS5vbignY2xpY2snLCAnLmRlbGV0ZScsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGlmICh3aW5kb3cuY29uZmlybShTdHJpbmcuZm9ybWF0KFJlc291cmNlcy5DT05GSVJNX0RFTEVURSwgUmVzb3VyY2VzLlRJVExFX0FERFJFU1MpKSkge1xyXG4gICAgICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgdXJsOiB1dGlsLmFwcGVuZFBhcmFtVG9VUkwoJCh0aGlzKS5hdHRyKCdocmVmJyksICdmb3JtYXQnLCAnYWpheCcpLFxyXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJ1xyXG4gICAgICAgICAgICB9KS5kb25lKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5zdGF0dXMudG9Mb3dlckNhc2UoKSA9PT0gJ29rJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2UucmVkaXJlY3QoVXJscy5hZGRyZXNzZXNMaXN0KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS5tZXNzYWdlLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuYWxlcnQoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZS5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogQHByaXZhdGVcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBkZXNjcmlwdGlvbiBCaW5kcyB0aGUgZXZlbnRzIG9mIHRoZSBwYXltZW50IG1ldGhvZHMgbGlzdCAoZGVsZXRlIGNhcmQpXHJcbiAqL1xyXG5mdW5jdGlvbiBpbml0UGF5bWVudEV2ZW50cygpIHtcclxuICAgICQoJy5hZGQtY2FyZCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGRpYWxvZy5vcGVuKHtcclxuICAgICAgICAgICAgLy9QUkVWQUlMLUFkZGVkICB0byBoYW5kbGUgdmFsaWRhdGlvbiBpc3N1ZXNcclxuICAgICAgICAgICAgdXJsOiAkKGUudGFyZ2V0KS5hdHRyKCdocmVmJyksXHJcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcclxuICAgICAgICAgICAgICAgIGRpYWxvZ0NsYXNzOiAncGF5bWVudC1zZXR0aW5ncycsXHJcbiAgICAgICAgICAgICAgICBvcGVuOiBpbml0aWFsaXplUGF5bWVudEZvcm1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdmFyIHBheW1lbnRMaXN0ID0gJCgnLnBheW1lbnQtbGlzdCcpO1xyXG4gICAgaWYgKHBheW1lbnRMaXN0Lmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB1dGlsLnNldERlbGV0ZUNvbmZpcm1hdGlvbihwYXltZW50TGlzdCwgU3RyaW5nLmZvcm1hdChSZXNvdXJjZXMuQ09ORklSTV9ERUxFVEUsIFJlc291cmNlcy5USVRMRV9DUkVESVRDQVJEKSk7XHJcblxyXG4gICAgJCgnZm9ybVtuYW1lPVwicGF5bWVudC1yZW1vdmVcIl0nKS5vbignc3VibWl0JywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgLy8gb3ZlcnJpZGUgZm9ybSBzdWJtaXNzaW9uIGluIG9yZGVyIHRvIHByZXZlbnQgcmVmcmVzaCBpc3N1ZXNcclxuICAgICAgICB2YXIgYnV0dG9uID0gJCh0aGlzKS5maW5kKCcuZGVsZXRlJyk7XHJcbiAgICAgICAgJCgnPGlucHV0Lz4nKS5hdHRyKHtcclxuICAgICAgICAgICAgdHlwZTogJ2hpZGRlbicsXHJcbiAgICAgICAgICAgIG5hbWU6IGJ1dHRvbi5hdHRyKCduYW1lJyksXHJcbiAgICAgICAgICAgIHZhbHVlOiBidXR0b24uYXR0cigndmFsdWUnKSB8fCAnZGVsZXRlIGNhcmQnXHJcbiAgICAgICAgfSkuYXBwZW5kVG8oJCh0aGlzKSk7XHJcbiAgICAgICAgdmFyIGRhdGEgPSAkKHRoaXMpLnNlcmlhbGl6ZSgpO1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcclxuICAgICAgICAgICAgdXJsOiAkKHRoaXMpLmF0dHIoJ2FjdGlvbicpLFxyXG4gICAgICAgICAgICBkYXRhOiBkYXRhXHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmRvbmUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcGFnZS5yZWRpcmVjdChVcmxzLnBheW1lbnRzTGlzdCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGluaXRpYWxpemVQYXltZW50Rm9ybSgpIHtcclxuXHJcbiAgICAkKCcjQ3JlZGl0Q2FyZEZvcm0nKS5vbignY2xpY2snLCAnLmNhbmNlbC1idXR0b24nLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBkaWFsb2cuY2xvc2UoKTtcclxuICAgIH0pO1xyXG5cclxufVxyXG5cclxuLyoqXHJcbiAqIEBwcml2YXRlXHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAZGVzY3JpcHRpb24gaW5pdCBldmVudHMgZm9yIHRoZSBsb2dpblBhZ2VcclxuICovXHJcbmZ1bmN0aW9uIGluaXRMb2dpblBhZ2UoKSB7XHJcbiAgICAvL28tYXV0aCBiaW5kaW5nIGZvciB3aGljaCBpY29uIGlzIGNsaWNrZWRcclxuICAgICQoJy5vQXV0aEljb24nKS5iaW5kKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCcjT0F1dGhQcm92aWRlcicpLnZhbCh0aGlzLmlkKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vdG9nZ2xlIHRoZSB2YWx1ZSBvZiB0aGUgcmVtZW1iZXJtZSBjaGVja2JveFxyXG4gICAgJCgnI2R3ZnJtX2xvZ2luX3JlbWVtYmVybWUnKS5iaW5kKCdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCQoJyNkd2ZybV9sb2dpbl9yZW1lbWJlcm1lJykuYXR0cignY2hlY2tlZCcpKSB7XHJcbiAgICAgICAgICAgICQoJyNyZW1lbWJlcm1lJykudmFsKCd0cnVlJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJCgnI3JlbWVtYmVybWUnKS52YWwoJ2ZhbHNlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAcHJpdmF0ZVxyXG4gKiBAZnVuY3Rpb25cclxuICogQGRlc2NyaXB0aW9uIEJpbmRzIHRoZSBldmVudHMgb2YgdGhlIG9yZGVyLCBhZGRyZXNzIGFuZCBwYXltZW50IHBhZ2VzXHJcbiAqL1xyXG5mdW5jdGlvbiBpbml0aWFsaXplRXZlbnRzKCkge1xyXG4gICAgaW5pdGlhbGl6ZUFkZHJlc3NGb3JtKCk7IC8vIEpJUkEgUFJFVi02MzogJ0FkZCBBZGRyZXNzJyBvciAnRWRpdCBhZGRyZXNzJyBvdmVybGF5IGNoYW5naW5nIHRvIHBhZ2UgYWZ0ZXIgY2xpY2sgb24gQXBwbHkgYnV0dG9uLHdoZW4gdGhlcmUgaXMgYW4gZXJyb3IgbWVzc2FnZSBvbiBvdmVybGF5LlxyXG4gICAgdG9nZ2xlRnVsbE9yZGVyKCk7XHJcbiAgICBpbml0QWRkcmVzc0V2ZW50cygpO1xyXG4gICAgaW5pdFBheW1lbnRFdmVudHMoKTtcclxuICAgIGluaXRMb2dpblBhZ2UoKTtcclxuICAgIGlmICgkKCcuc2VydmVyLWVycm9yJykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICQod2luZG93KS5zY3JvbGxUb3AoJCgnLnNlcnZlci1lcnJvcicpLm9mZnNldCgpLnRvcCk7XHJcbiAgICB9XHJcbiAgICAkKCdib2R5Jykub24oJ2NoYW5nZSBpbnB1dCcsICcuZGVza3RvcC1hY2Nlc3Njb2RlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBjdXJWYWx1ZSA9ICQodGhpcykudmFsKCk7XHJcbiAgICAgICAgJCgnYm9keScpLmZpbmQoJy5tb2JpbGUtYWNjZXNzY29kZScpLnZhbChjdXJWYWx1ZSk7XHJcbiAgICAgICAgJCgnYm9keScpLmZpbmQoJy5tb2JpbGUtYWNjZXNzY29kZScpLmF0dHIoJ3ZhbHVlJywgY3VyVmFsdWUpO1xyXG4gICAgfSk7XHJcbiAgICAkKCdib2R5Jykub24oJ2NoYW5nZSBpbnB1dCcsICcubW9iaWxlLWFjY2Vzc2NvZGUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGN1clZhbHVlID0gJCh0aGlzKS52YWwoKTtcclxuICAgICAgICAkKCdib2R5JykuZmluZCgnLmRlc2t0b3AtYWNjZXNzY29kZScpLnZhbChjdXJWYWx1ZSk7XHJcbiAgICAgICAgJCgnYm9keScpLmZpbmQoJy5kZXNrdG9wLWFjY2Vzc2NvZGUnKS5hdHRyKCd2YWx1ZScsIGN1clZhbHVlKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG52YXIgYWNjb3VudCA9IHtcclxuICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpbml0aWFsaXplRXZlbnRzKCk7XHJcbiAgICAgICAgZ2lmdGNlcnQuaW5pdCgpO1xyXG4gICAgfSxcclxuICAgIGluaXRDYXJ0TG9naW46IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpbml0TG9naW5QYWdlKCk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGFjY291bnQ7XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuXHJcbi8qKlxyXG4gKiBAZnVuY3Rpb24gSW5pdGlhbGl6ZXMgdGhlIHBhZ2UgZXZlbnRzIGRlcGVuZGluZyBvbiB0aGUgY2hlY2tvdXQgc3RhZ2UgKHNoaXBwaW5nL2JpbGxpbmcpXHJcbiAqL1xyXG5leHBvcnRzLmluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgJGJsb2dMZWZ0TmF2ID0gJCgnI2Jsb2ctbGVmdC1uYXYnKSxcclxuICAgICAgICAkYmxvZ1Nob3dOYXYgPSAkKCcjYmxvZy1uYXYtc2hvdycpO1xyXG5cclxuICAgICRibG9nTGVmdE5hdi5vbignY2xpY2snLCAnLmFycm93LWxpZ2h0LWNvbnRhaW5lcicsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy50b2dnbGUtYmxvZycpLnRvZ2dsZUNsYXNzKCdleHBhbmRlZCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJGJsb2dTaG93TmF2Lm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAkYmxvZ0xlZnROYXYudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgfSk7XHJcbiAgICAkYmxvZ0xlZnROYXYuZmluZCgnLmJsb2ctbmF2LWxldmVsLTIgbGknKS5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy50b2dnbGUtYmxvZycpLmFkZENsYXNzKCdleHBhbmRlZCcpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59O1xyXG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG52YXIgYWNjb3VudCA9IHJlcXVpcmUoJy4vYWNjb3VudCcpLFxyXG4gICAgYm9udXNQcm9kdWN0c1ZpZXcgPSByZXF1aXJlKCcuLi9ib251cy1wcm9kdWN0cy12aWV3JyksXHJcbiAgICBxdWlja3ZpZXcgPSByZXF1aXJlKCcuLi9xdWlja3ZpZXcnKSxcclxuICAgIHZhbGlkYXRvciA9IHJlcXVpcmUoJy4uL3ZhbGlkYXRvcicpLFxyXG4gICAgY2FydFN0b3JlSW52ZW50b3J5ID0gcmVxdWlyZSgnLi4vc3RvcmVpbnZlbnRvcnkvY2FydCcpO1xyXG5cclxuLyoqXHJcbiAqIEBwcml2YXRlXHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAZGVzY3JpcHRpb24gQmluZHMgZXZlbnRzIHRvIHRoZSBjYXJ0IHBhZ2UgKGVkaXQgaXRlbSdzIGRldGFpbHMsIGJvbnVzIGl0ZW0ncyBhY3Rpb25zLCBjb3Vwb24gY29kZSBlbnRyeSlcclxuICovXHJcblxyXG5mdW5jdGlvbiBpbml0UXVpY2tWaWV3cmVjb21tQnV0dG9ucygpIHtcclxuICAgIHZhciAkcXZCdXR0b24gPSAkKCcucHRfY2FydCAucHJvZHVjdHRpbGUgI3F1aWNrdmlld2J1dHRvbicpO1xyXG4gICAgdmFyICRsaW5rID0gJCh0aGlzKS5maW5kKCcudGh1bWItbGluaycpO1xyXG4gICAgJHF2QnV0dG9uLmF0dHIoe1xyXG4gICAgICAgICdocmVmJzogJGxpbmsuYXR0cignaHJlZicpLFxyXG4gICAgICAgICd0aXRsZSc6ICRsaW5rLmF0dHIoJ3RpdGxlJylcclxuICAgIH0pLmFwcGVuZFRvKHRoaXMpO1xyXG4gICAgJHF2QnV0dG9uLm9mZignY2xpY2snKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBxdWlja3ZpZXcuc2hvdyh7XHJcbiAgICAgICAgICAgIHVybDogJCh0aGlzKS5hdHRyKCdocmVmJykuc3BsaXQoJyMnKVswXSwgLy9QUkVWIEpJUkEgUFJFVi0yNTUgOlBMUDogT24gQ2xpY2sgUXVpY2sgdmlldyBuYXZpZ2F0aW5nIHRvIGEgd3JvbmcgcGFnZSB3aGVuIHVzZXIgZmlyc3QgY2hhbmdlcyB0aGUgc3dhdGNoZXMuIFRha2luZyBvbmx5IGhyZWYuXHJcbiAgICAgICAgICAgIHNvdXJjZTogJ3F1aWNrdmlldydcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpbml0UXVpY2tWaWV3ZWRpdEJ1dHRvbnMoKSB7XHJcbiAgICB2YXIgJHF2QnV0dG9uID0gJCgnLnB0X2NhcnQgIHRhYmxlI2NhcnQtdGFibGUgdGQuaXRlbXRvdGFsY29sdW1uLmNhcnRhY3Rpb25zIC5pdGVtLWVkaXQtZGV0YWlscyAjcXVpY2t2aWV3YnV0dG9uJyk7XHJcbiAgICB2YXIgJGxpbmsgPSAkKHRoaXMpO1xyXG4gICAgJHF2QnV0dG9uLmF0dHIoe1xyXG4gICAgICAgICdocmVmJzogJGxpbmsuYXR0cignaHJlZicpLFxyXG4gICAgICAgICd0aXRsZSc6ICRsaW5rLmF0dHIoJ3RpdGxlJylcclxuICAgIH0pLmFwcGVuZFRvKHRoaXMpO1xyXG4gICAgJHF2QnV0dG9uLm9mZignY2xpY2snKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBxdWlja3ZpZXcuc2hvdyh7XHJcbiAgICAgICAgICAgIHVybDogJCh0aGlzKS5hdHRyKCdocmVmJykuc3BsaXQoJyMnKVswXSwgLy9QUkVWIEpJUkEgUFJFVi0yNTUgOlBMUDogT24gQ2xpY2sgUXVpY2sgdmlldyBuYXZpZ2F0aW5nIHRvIGEgd3JvbmcgcGFnZSB3aGVuIHVzZXIgZmlyc3QgY2hhbmdlcyB0aGUgc3dhdGNoZXMuIFRha2luZyBvbmx5IGhyZWYuXHJcbiAgICAgICAgICAgIHNvdXJjZTogJ3F1aWNrdmlldydcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpbml0aWFsaXplRXZlbnRzKCkge1xyXG4gICAgcXVpY2t2aWV3LmluaXQoKTtcclxuICAgIHZhbGlkYXRvci5pbml0KCk7XHJcbiAgICBpbml0UXVpY2tWaWV3cmVjb21tQnV0dG9ucygpO1xyXG4gICAgaW5pdFF1aWNrVmlld2VkaXRCdXR0b25zKCk7XHJcbiAgICAkKCcjY2FydC10YWJsZScpLm9uKCdjbGljaycsICcuYm9udXMtaXRlbS1hY3Rpb25zIGEsIC5pdGVtLWRldGFpbHMgLmJvbnVzcHJvZHVjdHMgYScsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGJvbnVzUHJvZHVjdHNWaWV3LnNob3codGhpcy5ocmVmKTtcclxuICAgIH0pO1xyXG4gICAgLyogdXNlZCB0byBzbGlkZSB0b2dnbGUgZXZlbnQgaW4gY2FydCBwYWdlIHByb21vIGNvZGUqL1xyXG4gICAgaWYgKCQoJy5wdF9jYXJ0JykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICQodGhpcykuZmluZCgnLmFwcGx5Y291cG9uIC5sYWJlbCcpLnRleHQoJ0hhdmUgYSBQcm9tbyBDb2RlPycpO1xyXG4gICAgICAgICQoJy5jb3Vwb25jb2RlIC5sYWJlbCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyICRjdXJPYmogPSAkKHRoaXMpO1xyXG4gICAgICAgICAgICB2YXIgZmllbGRTZWN0aW9uID0gJyc7XHJcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdwcmVfbGFiZWwnKSkge1xyXG5cclxuICAgICAgICAgICAgICAgIGZpZWxkU2VjdGlvbiA9ICRjdXJPYmouY2xvc2VzdCgnLmNhcnQtY291cG9uLWNvZGUnKS5maW5kKCcucHJvbW8tc2VjLnByZS1wcm9tbycpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCQoZmllbGRTZWN0aW9uKS5pcygnOnZpc2libGUnKSA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJChmaWVsZFNlY3Rpb24pLnNsaWRlVXAoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJChmaWVsZFNlY3Rpb24pLnNsaWRlRG93bigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ3Bvc3QtY291cG9uY29kZScpKSB7XHJcbiAgICAgICAgICAgICAgICBmaWVsZFNlY3Rpb24gPSAkY3VyT2JqLmNsb3Nlc3QoJy5jYXJ0LWNvdXBvbi1jb2RlJykuZmluZCgnLnByb21vLXNlYy5ib3R0b20tcHJvbW8tc2VjdGlvbicpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCQoZmllbGRTZWN0aW9uKS5pcygnOnZpc2libGUnKSA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJChmaWVsZFNlY3Rpb24pLnNsaWRlVXAoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJChmaWVsZFNlY3Rpb24pLnNsaWRlRG93bigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyICRjdXJPYmogPSAkKCcuY291cG9uY29kZSAubGFiZWwucG9zdC1jb3Vwb25jb2RlJyk7XHJcbiAgICAgICAgdmFyIGZpZWxkU2VjdGlvbiA9ICRjdXJPYmouY2xvc2VzdCgnLmNhcnQtY291cG9uLWNvZGUnKS5maW5kKCcucHJvbW8tc2VjLmJvdHRvbS1wcm9tby1zZWN0aW9uJyk7XHJcbiAgICAgICAgaWYgKCQoZmllbGRTZWN0aW9uKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGlmICgkKCcucHJvbW8tc2VjLmJvdHRvbS1wcm9tby1zZWN0aW9uIC5lcnJvcicpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICQoZmllbGRTZWN0aW9uKS5zbGlkZURvd24oKTtcclxuICAgICAgICAgICAgICAgICQoJy5wcm9tby1zZWMuYm90dG9tLXByb21vLXNlY3Rpb24nKS5maW5kKCcuY291cG9uaW5wdXQnKS5hZGRDbGFzcygnaW5wdXRsYWJlbCcpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpIDwgNDgxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnYm9keSwgaHRtbCcpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb3A6ICQoJy5jb3Vwb25jb2RlIC5sYWJlbC5wb3N0LWNvdXBvbmNvZGUnKS5vZmZzZXQoKS50b3BcclxuICAgICAgICAgICAgICAgICAgICB9LCA2MDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciAkY3VyT2JqdG9wID0gJCgnLmNvdXBvbmNvZGUgLmxhYmVsLnByZV9sYWJlbCcpO1xyXG4gICAgICAgIHZhciBmaWVsZFNlY3Rpb250b3AgPSAkY3VyT2JqdG9wLmNsb3Nlc3QoJy5jYXJ0LWNvdXBvbi1jb2RlJykuZmluZCgnLnByb21vLXNlYy5wcmUtcHJvbW8nKTtcclxuICAgICAgICBpZiAoJChmaWVsZFNlY3Rpb250b3ApLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgaWYgKCQoJy5wcm9tby1zZWMucHJlLXByb21vIC5lcnJvcicpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICQoZmllbGRTZWN0aW9udG9wKS5zbGlkZURvd24oKTtcclxuICAgICAgICAgICAgICAgICQoJy5wcm9tby1zZWMucHJlLXByb21vJykuZmluZCgnLmNvdXBvbmlucHV0JykuYWRkQ2xhc3MoJ2lucHV0bGFiZWwnKTtcclxuICAgICAgICAgICAgICAgICQoJ2JvZHksIGh0bWwnKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb3A6ICQoJy5jb3Vwb25jb2RlIC5sYWJlbC5wcmVfbGFiZWwnKS5vZmZzZXQoKS50b3BcclxuICAgICAgICAgICAgICAgIH0sIDYwMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG4gICAgJCgnLnByb21vLXNlYycpLmZpbmQoJy5jb3Vwb25pbnB1dCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCcucHJvbW8tc2VjJykuZmluZCgnLmNvdXBvbmlucHV0JykucmVtb3ZlQ2xhc3MoJ2lucHV0bGFiZWwnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHZhciBjYXJ0cHJvbW8gPSAkKCcucHRfY2FydCAudXBzaGlmdC5jZWxsLmNvbnRlbnRib3ggLmNvbnRlbnRib3hjb250ZW50IHRhYmxlI2NhcnQtdGFibGUgdHIuY2FydC1yb3cgdGQuaXRlbXRvdGFsY29sdW1uJyk7XHJcbiAgICBjYXJ0cHJvbW8uZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCQodGhpcykuZmluZCgnLnByb21vLWFkanVzdG1lbnQnKS5sZW5ndGggPj0gMSkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdwcm9tb2RpdicpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ3Byb21vZGl2Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnYm9keScpLm9uKCdjbGljaycsICcuY2FydGNvdXBvbi1hcHBseScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgJGN1ck9iaiA9ICQoJy5jb3Vwb25jb2RlIC5sYWJlbCcpO1xyXG4gICAgICAgIHZhciBmaWVsZFNlY3Rpb24gPSAnJztcclxuICAgICAgICBpZiAoJCh0aGlzKS5jbG9zZXN0KCcuYm90dG9tLXByb21vLXNlY3Rpb24nKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICQoJy5wcm9tby1hcHBsaWVkLXBvc2l0aW9uJykudmFsKCdib3R0b21zZWN0aW9uJyk7XHJcbiAgICAgICAgICAgICQoJy5wcm9tby1hcHBsaWVkLXBvc2l0aW9uJykuYXR0cigndmFsdWUnLCAnYm90dG9tc2VjdGlvbicpO1xyXG4gICAgICAgICAgICBmaWVsZFNlY3Rpb24gPSAkY3VyT2JqLmNsb3Nlc3QoJy5jYXJ0LWNvdXBvbi1jb2RlJykuZmluZCgnLnByb21vLXNlYy5ib3R0b20tcHJvbW8tc2VjdGlvbicpO1xyXG4gICAgICAgICAgICBpZiAoJChmaWVsZFNlY3Rpb24pLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGlmICgkKCcuZXJyb3InKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJChmaWVsZFNlY3Rpb24pLnNsaWRlRG93bigpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5wcm9tby1zZWMuYm90dG9tLXByb21vLXNlY3Rpb24nKS5maW5kKCcuY291cG9uaW5wdXQnKS5hZGRDbGFzcygnaW5wdXRsYWJlbCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmICgkKHRoaXMpLmNsb3Nlc3QoJy50b3AtcHJvbW8tc2VjdGlvbicpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgJCgnLnByb21vLWFwcGxpZWQtcG9zaXRpb24nKS52YWwoJ3RvcHNlY3Rpb24nKTtcclxuICAgICAgICAgICAgJCgnLnByb21vLWFwcGxpZWQtcG9zaXRpb24nKS5hdHRyKCd2YWx1ZScsICd0b3BzZWN0aW9uJyk7XHJcbiAgICAgICAgICAgIGZpZWxkU2VjdGlvbiA9ICRjdXJPYmouY2xvc2VzdCgnLmNhcnQtY291cG9uLWNvZGUnKS5maW5kKCcucHJvbW8tc2VjLnRvcC1wcm9tby1zZWN0aW9uJyk7XHJcbiAgICAgICAgICAgIGlmICgkKGZpZWxkU2VjdGlvbikubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCQoJy5lcnJvcicpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAkKGZpZWxkU2VjdGlvbikuc2xpZGVEb3duKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLnByb21vLXNlYy50b3AtcHJvbW8tc2VjdGlvbicpLmZpbmQoJy5jb3Vwb25pbnB1dCcpLmFkZENsYXNzKCdpbnB1dGxhYmVsJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgICQoJy5wdF9jYXJ0IC5jYXJ0cmVjb21tYWRzX2NvbnQnKS5jc3MoJ2hlaWdodCcsICc0NHB4Jyk7XHJcbiAgICAvLyBvdmVycmlkZSBlbnRlciBrZXkgZm9yIGNvdXBvbiBjb2RlIGVudHJ5XHJcbiAgICAkKCdmb3JtIGlucHV0LmNvdXBvbmlucHV0Jykub24oJ2tleWRvd24nLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGlmIChlLndoaWNoID09PSAxMykge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnZm9ybScpLmZpbmQoJy5jYXJ0Y291cG9uLWFwcGx5JykuY2xpY2soKTtcclxuICAgICAgICB9IC8vIEpJUkEgUFJFVi0zMCA6IENhcnQgcGFnZTogIENvdXBvbiBDb2RlIGlzIG5vdCBhcHBseWluZywgd2hlbiB0aGUgdXNlciBoaXQgZW50ZXIga2V5LlxyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnYm9keScpLm9uKCdjaGFuZ2UsaW5wdXQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyICRjdXJPYmogPSAkKHRoaXMpO1xyXG4gICAgICAgICQoJ2JvZHknKS5maW5kKCcuY291cG9uaW5wdXQnKS52YWwoJGN1ck9iai52YWwoKSk7XHJcbiAgICAgICAgJCgnYm9keScpLmZpbmQoJy5jb3Vwb25pbnB1dCcpLmF0dHIoJ3ZhbHVlJywgJGN1ck9iai52YWwoKSk7XHJcbiAgICB9KTtcclxuICAgIC8vdG8gcHJldmVudCBtdWx0aXBsZSBzdWJtaXNzaW9ucyBvZiB0aGUgZm9ybSB3aGVuIHJlbW92aW5nIGEgcHJvZHVjdCBmcm9tIHRoZSBjYXJ0XHJcbiAgICB2YXIgcmVtb3ZlSXRlbUV2ZW50ID0gZmFsc2U7XHJcbiAgICAkKCdidXR0b25bbmFtZSQ9XCJkZWxldGVQcm9kdWN0XCJdJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBpZiAocmVtb3ZlSXRlbUV2ZW50KSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZW1vdmVJdGVtRXZlbnQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgdmFyIG93bCA9ICQoJy5vd2wtY2Fyb3VzZWwnKTtcclxuICAgIG93bC5vd2xDYXJvdXNlbCh7XHJcbiAgICAgICAgaXRlbXM6IDMsXHJcbiAgICAgICAgc2xpZGVCeTogMyxcclxuICAgICAgICByZXdpbmQ6IHRydWUsXHJcbiAgICAgICAgbmF2OiB0cnVlLFxyXG4gICAgICAgIGxvb3A6IHRydWUsXHJcbiAgICAgICAgZG90czogZmFsc2VcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnRzLmluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBpbml0aWFsaXplRXZlbnRzKCk7XHJcbiAgICBpZiAoU2l0ZVByZWZlcmVuY2VzLlNUT1JFX1BJQ0tVUCkge1xyXG4gICAgICAgIGNhcnRTdG9yZUludmVudG9yeS5pbml0KCk7XHJcbiAgICB9XHJcbiAgICBhY2NvdW50LmluaXRDYXJ0TG9naW4oKTtcclxufTtcclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxudmFyIHV0aWwgPSByZXF1aXJlKCcuLi8uLi91dGlsJyksXHJcbiAgICB1aWV2ZW50cyA9IHJlcXVpcmUoJy4uLy4uL3VpZXZlbnRzJyksXHJcbiAgICBzaGlwcGluZyA9IHJlcXVpcmUoJy4vc2hpcHBpbmcnKTtcclxuXHJcbi8qKlxyXG4gKiBAZnVuY3Rpb25cclxuICogQGRlc2NyaXB0aW9uIFNlbGVjdHMgdGhlIGZpcnN0IGFkZHJlc3MgZnJvbSB0aGUgbGlzdCBvZiBhZGRyZXNzZXNcclxuICovXHJcbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciAkZm9ybSA9ICQoJy5hZGRyZXNzJyk7XHJcbiAgICAvLyBzZWxlY3QgYWRkcmVzcyBmcm9tIGxpc3RcclxuICAgICQoJ3NlbGVjdFtuYW1lJD1cIl9hZGRyZXNzTGlzdFwiXScsICRmb3JtKS5vbignY2hhbmdlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBzZWxlY3RlZCA9ICQodGhpcykuY2hpbGRyZW4oJzpzZWxlY3RlZCcpLmZpcnN0KCk7XHJcbiAgICAgICAgdmFyIHNlbGVjdGVkQWRkcmVzcyA9ICQoc2VsZWN0ZWQpLmRhdGEoJ2FkZHJlc3MnKTtcclxuICAgICAgICBpZiAoIXNlbGVjdGVkQWRkcmVzcykge1xyXG4gICAgICAgICAgICBpZiAoJCgnLmNoZWNrb3V0JykuaGFzQ2xhc3MoJ2JpbGxpbmdzZWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgICQoJy5hZGRyZXNzb3B0aW9ucy1hZGRUb0FkZHJlc3NCb29rLC5hZGRyZXNzb3B0aW9ucy1tYWtlZGVmYXVsdCAnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XFwnc2hpcHBpbmdBZGRyZXNzX3NlbGVjdGVkYWRkcmVzc1xcJ10nKS52YWwoJycpO1xyXG4gICAgICAgICAgICAgICAgJCgnLnNlbGVjdGVkLXNoaXBwaW5nLWFkZHJlc3MnKS5lbXB0eSgpO1xyXG4gICAgICAgICAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XFwnX2FkZHJlc3NpZFxcJ10nKS52YWwoJycpO1xyXG4gICAgICAgICAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XFwnX2FkZHJlc3NGaWVsZHNfZmlyc3ROYW1lXFwnXScpLnZhbCgnJyk7XHJcbiAgICAgICAgICAgICAgICAkKCdpbnB1dFtuYW1lJD1cXCdfYWRkcmVzc0ZpZWxkc19sYXN0TmFtZVxcJ10nKS52YWwoJycpO1xyXG4gICAgICAgICAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XFwnX2FkZHJlc3NGaWVsZHNfYWRkcmVzczFcXCddJykudmFsKCcnKTtcclxuICAgICAgICAgICAgICAgICQoJ2lucHV0W25hbWUkPVxcJ19hZGRyZXNzRmllbGRzX2FkZHJlc3MyXFwnXScpLnZhbCgnJyk7XHJcbiAgICAgICAgICAgICAgICAkKCdpbnB1dFtuYW1lJD1cXCdfYWRkcmVzc0ZpZWxkc19jaXR5XFwnXScpLnZhbCgnJyk7XHJcbiAgICAgICAgICAgICAgICAkKCdpbnB1dFtuYW1lJD1cXCdfYWRkcmVzc0ZpZWxkc19wb3N0YWxcXCddJykudmFsKCcnKTtcclxuICAgICAgICAgICAgICAgICQoJ2lucHV0W25hbWUkPVxcJ19hZGRyZXNzRmllbGRzX3Bob25lXFwnXScpLnZhbCgnJyk7XHJcbiAgICAgICAgICAgICAgICB1aWV2ZW50cy5jaGFuZ2VGb3JtU2VsZWN0aW9uKGpRdWVyeSgnc2VsZWN0W25hbWUkPVxcJ19hZGRyZXNzRmllbGRzX3N0YXRlc19zdGF0ZVxcJ10nKVswXSwgJycpO1xyXG4gICAgICAgICAgICAgICAgdWlldmVudHMuY2hhbmdlRm9ybVNlbGVjdGlvbihqUXVlcnkoJ3NlbGVjdC5hZGRyZXNzLXNlbGVjdCcpWzBdLCAnJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcuc2hpcHBpbmctYWRkcmVzcy1maWVsZC1zZWN0aW9uJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgICAgICQoJy5zZWxlY3RlZC1zaGlwcGluZy1hZGRyZXNzLCAubmV3LWFkZHJlc3MtZmllbGQsIC5lZGl0LWFkZHJlc3MtZmllbGQnKS5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XFwnX2FkZHJlc3NGaWVsZHNfcGhvbmVcXCddJykuY2xvc2VzdCgnZGl2LnBob25lJykuZmluZCgnc3Bhbi5lcnJvcmNsaWVudCcpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XFwnX2FkZHJlc3NGaWVsZHNfcG9zdGFsXFwnXScpLmNsb3Nlc3QoJ2Rpdi56aXAnKS5maW5kKCdzcGFuLmVycm9yY2xpZW50JykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcuYWRkcmVzc2Zvcm0gLmZvcm0tcm93LmN1c3RvbS1zZWxlY3QnKS5yZW1vdmVDbGFzcygnY3VzdG9tc2VsZWN0LWVycm9yJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcuY3VzdG9tLXNlbGVjdCcpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RWYWwgPSAkKHRoaXMpLmZpbmQoJzpzZWxlY3RlZCcpLnRleHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5zZWxlY3Rvck91dCcpLnRleHQoc2VsZWN0VmFsKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgJCgnYS5jbGVhcmJ1dHRvbicpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICQoJy5zaGlwcGluZy1hZGRyZXNzLWZpZWxkLXNlY3Rpb24gLmZvcm0tcm93JykuZmluZCgnaW5wdXQnKS5yZW1vdmVDbGFzcygnZXJyb3JjbGllbnQnKTtcclxuICAgICAgICAgICAgICAgIHVpZXZlbnRzLmN1c3RvbUZpZWxkcygpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJCgnLnNlbGVjdGVkLXNoaXBwaW5nLWFkZHJlc3MsIC5uZXctYWRkcmVzcy1maWVsZCcpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcuc2hpcHBpbmctYWRkcmVzcy1maWVsZC1zZWN0aW9uJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB1aWV2ZW50cy5zeW5jY2hlY2tvdXRIKCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgJCgnLnNlbGVjdGVkLXNoaXBwaW5nLWFkZHJlc3MnKS5lbXB0eSgpO1xyXG4gICAgICAgIGlmIChzZWxlY3RlZEFkZHJlc3MuYWRkcmVzczIgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBzZWxlY3RlZEFkZHJlc3MuYWRkcmVzczIgPSAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgJCgnLnNlbGVjdGVkLXNoaXBwaW5nLWFkZHJlc3MnKS5hcHBlbmQoc2VsZWN0ZWRBZGRyZXNzLmZpcnN0TmFtZSArICcgJyArIHNlbGVjdGVkQWRkcmVzcy5sYXN0TmFtZSArICc8YnIvPicgKyBzZWxlY3RlZEFkZHJlc3MuYWRkcmVzczEgKyAnICcgKyBzZWxlY3RlZEFkZHJlc3MuYWRkcmVzczIgKyAnPGJyLz4nICsgc2VsZWN0ZWRBZGRyZXNzLmNpdHkgKyAnICcgKyBzZWxlY3RlZEFkZHJlc3Muc3RhdGVDb2RlICsgJyAnICsgc2VsZWN0ZWRBZGRyZXNzLnBvc3RhbENvZGUgKyAnPGJyLz4nICsgc2VsZWN0ZWRBZGRyZXNzLnBob25lKTtcclxuICAgICAgICBpZiAoJCgnLmNoZWNrb3V0JykuaGFzQ2xhc3MoJ2JpbGxpbmdzZWN0aW9uJykpIHtcclxuICAgICAgICAgICAgdmFyIGVkaXRBZGRyZXNzT2JqZWN0ID0ge1xyXG4gICAgICAgICAgICAgICAgZmlyc3ROYW1lOiBzZWxlY3RlZEFkZHJlc3MuZmlyc3ROYW1lLFxyXG4gICAgICAgICAgICAgICAgbGFzdE5hbWU6IHNlbGVjdGVkQWRkcmVzcy5sYXN0TmFtZSxcclxuICAgICAgICAgICAgICAgIGFkZHJlc3MxOiBzZWxlY3RlZEFkZHJlc3MuYWRkcmVzczEsXHJcbiAgICAgICAgICAgICAgICBhZGRyZXNzMjogc2VsZWN0ZWRBZGRyZXNzLmFkZHJlc3MyLFxyXG4gICAgICAgICAgICAgICAgcG9zdGFsQ29kZTogc2VsZWN0ZWRBZGRyZXNzLnBvc3RhbENvZGUsXHJcbiAgICAgICAgICAgICAgICBjaXR5OiBzZWxlY3RlZEFkZHJlc3MuY2l0eSxcclxuICAgICAgICAgICAgICAgIHN0YXRlQ29kZTogc2VsZWN0ZWRBZGRyZXNzLnN0YXRlQ29kZSxcclxuICAgICAgICAgICAgICAgIGNvdW50cnlDb2RlOiAnVVMnLFxyXG4gICAgICAgICAgICAgICAgcGhvbmU6IHNlbGVjdGVkQWRkcmVzcy5waG9uZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAkKCcubmV3LWFkZHJlc3MtZmllbGQnKS5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICAkKCcuZWRpdC1hZGRyZXNzLWZpZWxkJykuYXR0cignZGF0YS1hZGRyZXNzJywgZWRpdEFkZHJlc3NPYmplY3QpO1xyXG4gICAgICAgICAgICAkKCcuc2VsZWN0ZWQtc2hpcHBpbmctYWRkcmVzcywgLmVkaXQtYWRkcmVzcy1maWVsZCcpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJCgnLnNlbGVjdGVkLXNoaXBwaW5nLWFkZHJlc3MsIC5uZXctYWRkcmVzcy1maWVsZCcpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICQoJy5zaGlwcGluZy1hZGRyZXNzLWZpZWxkLXNlY3Rpb24nKS5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICAgIHV0aWwuZmlsbEFkZHJlc3NGaWVsZHMoc2VsZWN0ZWRBZGRyZXNzLCAkZm9ybSk7XHJcbiAgICAgICAgJCgnYm9keScpLmZpbmQoJ2lucHV0W25hbWUkPV9zYW1lYXNzaGlwcGluZ2FkZHJlc3NdJykucmVtb3ZlQXR0cignY2hlY2tlZCcpO1xyXG4gICAgICAgICQoJ2JvZHknKS5maW5kKCdpbnB1dFtuYW1lJD1fc2FtZWFzc2hpcHBpbmdhZGRyZXNzXScpLmNsb3Nlc3QoJy5jdXN0b20tY2hlY2tib3gnKS5maW5kKCcuY3VzdG9tLWxpbmsnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xyXG4gICAgICAgIHNoaXBwaW5nLnVwZGF0ZVNoaXBwaW5nTWV0aG9kTGlzdCgpO1xyXG4gICAgICAgIC8vIHJlLXZhbGlkYXRlIHRoZSBmb3JtXHJcbiAgICAgICAgLyogSklSQSBQUkVWLTk1IDogSGlnaGxpZ2h0aW5nIHRoZSBDcmVkaXQgY2FyZCAgZGV0YWlscyBmaWVsZCwgd2hlbiB0aGUgdXNlciBzZWxlY3QgYW55IHNhdmVkIGFkZHJlc3MgZnJvbSB0aGUgJ1NlbGVjdCBBbiBBZGRyZXNzJyBkcm9wIGRvd24uXHJcbiAgICAgICAgICAgKGxvZ2dlZC1pbiB1c2VyKSAuQ29tbWVudGVkIHRvIHByZXZlbnQgZm9ybSBmcm9tIHJlLXZhbGlkYXRpb24uXHJcblx0XHQqL1xyXG4gICAgICAgIC8vJGZvcm0udmFsaWRhdGUoKS5mb3JtKCk7XHJcbiAgICB9KTtcclxuICAgIC8qIGlmKCQoXCJib2R5XCIpLmZpbmQoXCJpbnB1dFtuYW1lJD1fc2FtZWFzc2hpcHBpbmdhZGRyZXNzXVwiKS5pcyhcIjpjaGVja2VkXCIpKSB7XHJcbiAgICAgICAgICB2YXIgcGFnZUxvYWRTZWxlY3RlZEFkZHJlc3MgPSAkKCdzZWxlY3RbbmFtZSQ9XCJfYWRkcmVzc0xpc3RcIl0nKS5jaGlsZHJlbignOnNlbGVjdGVkJykuZmlyc3QoKTtcclxuICAgICAgICAgICAgIHZhciBvblBhZ2VMb2FkU2VsZWN0ZWRBZGRyZXNzID0gJChwYWdlTG9hZFNlbGVjdGVkQWRkcmVzcykuZGF0YSgnYWRkcmVzcycpO1xyXG4gICAgICAgICAgICAgaWYgKCFvblBhZ2VMb2FkU2VsZWN0ZWRBZGRyZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgJChcIi5zZWxlY3RlZC1zaGlwcGluZy1hZGRyZXNzLCAubmV3LWFkZHJlc3MtZmllbGRcIikuYWRkQ2xhc3MoXCJoaWRlXCIpO1xyXG4gICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZEFkZHJlc3MgPSBvblBhZ2VMb2FkU2VsZWN0ZWRBZGRyZXNzO1xyXG4gICAgICAgICAgICAgICAgICQoXCIuc2VsZWN0ZWQtc2hpcHBpbmctYWRkcmVzc1wiKS5lbXB0eSgpO1xyXG4gICAgICAgICAgICAgICAgICQoXCIuc2VsZWN0ZWQtc2hpcHBpbmctYWRkcmVzc1wiKS5hcHBlbmQoc2VsZWN0ZWRBZGRyZXNzLmZpcnN0TmFtZStcIiBcIitzZWxlY3RlZEFkZHJlc3MubGFzdE5hbWUrXCI8YnIvPlwiK3NlbGVjdGVkQWRkcmVzcy5hZGRyZXNzMStcIiBcIitzZWxlY3RlZEFkZHJlc3MuYWRkcmVzczIrXCI8YnIvPlwiK3NlbGVjdGVkQWRkcmVzcy5jaXR5K1wiIFwiK3NlbGVjdGVkQWRkcmVzcy5zdGF0ZUNvZGUrXCIgXCIrc2VsZWN0ZWRBZGRyZXNzLnBvc3RhbENvZGUrXCI8YnIvPlwiK3NlbGVjdGVkQWRkcmVzcy5waG9uZSk7XHJcbiAgICAgICAgICAgICAgICAgJChcIi5zZWxlY3RlZC1zaGlwcGluZy1hZGRyZXNzLCAubmV3LWFkZHJlc3MtZmllbGRcIikucmVtb3ZlQ2xhc3MoXCJoaWRlXCIpO1xyXG4gICAgICAgICAgICAgICAgICQoXCIuc2hpcHBpbmctYWRkcmVzcy1maWVsZC1zZWN0aW9uXCIpLmFkZENsYXNzKFwiaGlkZVwiKTtcclxuICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgfSovXHJcblxyXG59O1xyXG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG52YXIgYWpheCA9IHJlcXVpcmUoJy4uLy4uL2FqYXgnKSxcclxuICAgIC8vZm9ybVByZXBhcmUgPSByZXF1aXJlKCcuL2Zvcm1QcmVwYXJlJyksXHJcbiAgICB1aWV2ZW50cyA9IHJlcXVpcmUoJy4uLy4uL3VpZXZlbnRzJyksXHJcbiAgICB0b29sdGlwID0gcmVxdWlyZSgnLi4vLi4vdG9vbHRpcCcpLFxyXG4gICAgcHJvZ3Jlc3MgPSByZXF1aXJlKCcuLi8uLi9wcm9ncmVzcycpLFxyXG4gICAgdmFsaWRhdG9yID0gcmVxdWlyZSgnLi4vLi4vdmFsaWRhdG9yJyksXHJcbiAgICAvL2dpZnRjYXJkID0gcmVxdWlyZSgnLi4vLi4vZ2lmdGNhcmQnKSxcclxuICAgIHV0aWwgPSByZXF1aXJlKCcuLi8uLi91dGlsJyk7XHJcblxyXG4vKipcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBkZXNjcmlwdGlvbiB1cGRhdGVzIHRoZSBvcmRlciBzdW1tYXJ5IGJhc2VkIG9uIGEgcG9zc2libHkgcmVjYWxjdWxhdGVkIGJhc2tldCBhZnRlciBhIHNoaXBwaW5nIHByb21vdGlvbiBoYXMgYmVlbiBhcHBsaWVkXHJcbiAqL1xyXG52YXIgZmxhZ2VhbGxvdG1lbnRjb3ZlciA9ICQoJ2lucHV0LmZsYWdlYWxsb3RtZW50Y292ZXInKS52YWwoKTtcclxudmFyIGFsbG90bWVudEFtb3VudCA9IHBhcnNlSW50KCQoJ2lucHV0LmFsbG90bWVudEFtb3VudCcpLnZhbCgpLCAxMCk7XHJcbnZhciBjb3Vwb25NZW50aG9kcyA9IHtcclxuICAgIHVwZGF0ZVN1bW1hcnk6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgJHN1bW1hcnkgPSAkKCcjc2Vjb25kYXJ5IC5uZXctc3VtbWVyeS1jYXJ0Jyk7XHJcbiAgICAgICAgLy8gaW5kaWNhdGUgcHJvZ3Jlc3NcclxuICAgICAgICAkKGZ1bmN0aW9uICgpe1xyXG4gICAgICAgICAgICBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvVHJpZGVudFxcLzdcXC4vKSkge1xyXG4gICAgICAgICAgICAgICAgJHN1bW1hcnkuYXBwZW5kKCc8ZGl2IGNsYXNzPVwibG9hZGVyXCI+PGRpdiBjbGFzcz1cImxvYWRlci1pbmRpY2F0b3JcIj48L2Rpdj48ZGl2IGNsYXNzPVwibG9hZGVyLWJnXCI+PC9kaXY+PC9kaXY+Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBwcm9ncmVzcy5zaG93KCRzdW1tYXJ5KTtcclxuICAgICAgICB2YXIgc3RhdGVWYWx1ZSA9ICQoJ2JvZHknKS5maW5kKCcuc2hpcHBpbmctc3RhdGUnKS52YWwoKTtcclxuICAgICAgICB2YXIgdXJsID0gdXRpbC5hcHBlbmRQYXJhbVRvVVJMKFVybHMuc3VtbWFyeVJlZnJlc2hVUkwsICdzZWxlY3RlZFN0YXRlJywgc3RhdGVWYWx1ZSk7XHJcbiAgICAgICAgLy8gbG9hZCB0aGUgdXBkYXRlZCBzdW1tYXJ5IGFyZWFcclxuICAgICAgICAkc3VtbWFyeS5sb2FkKHVybCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBoaWRlIGVkaXQgc2hpcHBpbmcgbWV0aG9kIGxpbmtcclxuICAgICAgICAgICAgJHN1bW1hcnkuZmFkZUluKCdmYXN0Jyk7XHJcbiAgICAgICAgICAgICRzdW1tYXJ5LmZpbmQoJy5jaGVja291dC1taW5pLWNhcnQgLm1pbmlzaGlwbWVudCAuaGVhZGVyIGEnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICRzdW1tYXJ5LmZpbmQoJy5vcmRlci10b3RhbHMtdGFibGUgLm9yZGVyLXNoaXBwaW5nIC5sYWJlbCBhJykuaGlkZSgpO1xyXG4gICAgICAgICAgICB1aWV2ZW50cy5zeW5jY2hlY2tvdXRIKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgdXBkYXRlY2FydHN1bW1hcnk6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdXJsID0gdXRpbC5hcHBlbmRQYXJhbVRvVVJMKFVybHMuVXBkYXRlQ2FydFN1bW1hcnkpO1xyXG4gICAgICAgIC8vIGxvYWQgdGhlIHVwZGF0ZWQgY2FydCBzdW1tYXJ5IGFyZWFcclxuICAgICAgICBqUXVlcnkuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2h0bWwnLFxyXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgalF1ZXJ5KCcuYWpheC1jYXJ0c3VtbWFyeScpLmh0bWwoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB1aWV2ZW50cy5zeW5jY2hlY2tvdXRIKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICBzZXRDb3Vwb25SZWRlbXB0aW9uSW5mbzogZnVuY3Rpb24gKHJlZGVtcHRpb24pIHtcclxuICAgICAgICBpZiAoIXJlZGVtcHRpb24pIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL3ZhciByZWRlZW1Nc2cgPSBcIiR7UmVzb3VyY2UubXNnKCdiaWxsaW5nLmNvdXBvbm5vdGFwcGxpZWQnLCdjaGVja291dCcsbnVsbCl9XCI7XHJcbiAgICAgICAgLy9pZihyZWRlbXB0aW9uLmFwcGxpZWQpIHJlZGVlbU1zZyA9IFwiJHtSZXNvdXJjZS5tc2coJ2JpbGxpbmcuY291cG9uYXBwbGllZCcsJ2NoZWNrb3V0JyxudWxsKX1cIjtcclxuICAgICAgICAvL2pRdWVyeShcIiR7JyMnfWNvdXBvbmVudHJ5IC5yZWRlbXB0aW9uXCIpLmFwcGVuZChcIjxkaXYgY2xhc3M9XFxcImRpc2NvdW50LXN1Y2Nlc3NcXFwiPiR7UmVzb3VyY2UubXNnKCdiaWxsaW5nLmNvdXBvbmxhYmVsJywnY2hlY2tvdXQnLG51bGwpfSA8c3BhbiBjbGFzcz1cXFwic3VibWl0ZWRjb3Vwb25cXFwiPlwiICsgcmVkZW1wdGlvbi5jb3Vwb25Db2RlICsgXCI8L3NwYW4+IFwiICsgcmVkZWVtTXNnICsgXCI8YnV0dG9uICB2YWx1ZT1cIityZWRlbXB0aW9uLmNvdXBvbkNvZGUrXCIgY2xhc3M9J3JlbW92ZWNvdXBvbic+UmVtb3ZlPC9idXR0b24+PC9kaXY+XCIpO1xyXG4gICAgICAgIHZhciB1cmwgPSB1dGlsLmFwcGVuZFBhcmFtVG9VUkwoVXJscy5TdWNjZXNzRGlzcGxheUNvdXBvbik7XHJcbiAgICAgICAgalF1ZXJ5LmdldCh1cmwsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGpRdWVyeSgnI2NvdXBvbmVudHJ5IC5yZWRlbXB0aW9uJykuaHRtbChkYXRhKTtcclxuICAgICAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIHNldENvdXBvbkVycm9yOiBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgdmFyICRjb3Vwb25jb2RlID0galF1ZXJ5KCdpbnB1dFtuYW1lJD1cXCdfYmlsbGluZ19jb3Vwb25Db2RlXFwnXScpLmNsb3Nlc3QoJy5jb3Vwb25jb2RlJyk7XHJcbiAgICAgICAgaWYgKCFtc2cpIHtcclxuICAgICAgICAgICAgalF1ZXJ5KCcjY291cG9uZW50cnkgc3Bhbi5lcnJvcicpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgkY291cG9uY29kZS5maW5kKCdzcGFuLmVycm9yJykubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XFwnX2JpbGxpbmdfY291cG9uQ29kZVxcJ10nKS5jbG9zZXN0KCcuY291cG9uY29kZScpLmFwcGVuZCgnPHNwYW4gY2xhc3M9XFwnZXJyb3JcXCc+PFxcL3NwYW4+Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICRjb3Vwb25jb2RlLmZpbmQoJ3NwYW4uZXJyb3InKS5odG1sKG1zZyk7XHJcbiAgICAgICAgalF1ZXJ5KCdpbnB1dFtuYW1lJD1cXCdfYmlsbGluZ19jb3Vwb25Db2RlXFwnXScpLmFkZENsYXNzKCdlcnJvcmNsaWVudCcpO1xyXG4gICAgfSxcclxuICAgIHNldEdpZnRDZXJ0RXJyb3I6IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICB2YXIgJHJlZGVlbWNvZGUgPSBqUXVlcnkoJ2lucHV0W25hbWUkPVxcJ19iaWxsaW5nX2dpZnRDZXJ0Q29kZVxcJ10nKS5jbG9zZXN0KCcuZ2lmdGNlcnRmaWVsZHMnKTtcclxuICAgICAgICBpZiAoIW1zZykge1xyXG4gICAgICAgICAgICBqUXVlcnkoJy5naWZ0Y2VydGZpZWxkcyAuZXJyb3InKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgalF1ZXJ5KCdpbnB1dFtuYW1lJD1cXCdfYmlsbGluZ19jb3Vwb25Db2RlXFwnXScpLnJlbW92ZUNsYXNzKCdlcnJvcmNsaWVudCcpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgkcmVkZWVtY29kZS5maW5kKCdzcGFuLmVycm9yJykubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgalF1ZXJ5KCdpbnB1dFtuYW1lJD1cXCdfYmlsbGluZ19naWZ0Q2VydENvZGVcXCddJykuY2xvc2VzdCgnLmdpZnRjZXJ0ZmllbGRzJykuYXBwZW5kKCc8c3BhbiBjbGFzcz1cXCdlcnJvclxcJz48XFwvc3Bhbj4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgJHJlZGVlbWNvZGUuZmluZCgnc3Bhbi5lcnJvcicpLmh0bWwobXNnKTtcclxuICAgICAgICBqUXVlcnkoJ2lucHV0W25hbWUkPVxcJ19iaWxsaW5nX2dpZnRDZXJ0Q29kZVxcJ10nKS5hZGRDbGFzcygnZXJyb3JjbGllbnQnKTtcclxuICAgICAgICAvL2pRdWVyeShcImlucHV0W25hbWU9JHtwZGljdC5DdXJyZW50Rm9ybXMuYmlsbGluZ2dpZnRjZXJ0LmdpZnRDZXJ0Q29kZS5odG1sTmFtZX1dXCIpLnBhcmVudCgpLmFwcGVuZChcIjxzcGFuIGNsYXNzPVxcXCJlcnJvcm1lc3NhZ2VcXFwiPlwiICsgbXNnICsgXCI8XFwvc3Bhbj5cIik7XHJcbiAgICB9LFxyXG4gICAgLy9yZWZyZXNoIENDIGZvcm1cclxuICAgIHJlZnJlc2hDQzogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB1cmwgPSB1dGlsLmFwcGVuZFBhcmFtVG9VUkwoVXJscy5DbGVhckNDRm9ybSk7XHJcbiAgICAgICAgalF1ZXJ5LmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICAgICAgZGF0YVR5cGU6ICdodG1sJyxcclxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgc2V0UGF5bWVudFNlY3Rpb246IGZ1bmN0aW9uIChvcmRlckJhbGFuY2UpIHtcclxuXHJcbiAgICAgICAgLyppZighb3JkZXJCYWxhbmNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9Ki9cclxuXHJcbiAgICAgICAgaWYgKG9yZGVyQmFsYW5jZSA8PSAwKSB7XHJcbiAgICAgICAgICAgIC8vQ2xlYXJpbmcgdGhlIENDIEZvcm0gaWYgdGhlIHJlbWFpbmluZyBiYWxhbmNlIGFmdGVyIGFsbG90bWVudCBhbmQgR0MgaXMgemVyb1xyXG4gICAgICAgICAgICBjb3Vwb25NZW50aG9kcy5yZWZyZXNoQ0MoKTtcclxuXHJcbiAgICAgICAgICAgIC8vIGlmIHRoZSB3aG9sZSBvcmRlciB0b3RhbCB3YXMgcGFpZCB3aXRoIGdpZnQgY2VydHMgdGhlbiBoaWRlIG90aGVyIHBheW1lbnQgbWV0aG9kcyBhbmQgc2hvdyBhIG1lc3NhZ2VcclxuICAgICAgICAgICAgJCgnI3BheW1lbnRtZXRob2RzJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKCcuY29udGludWVjaGVja291dGJ1dHRvbiAuY29udGludWVjaGVja291dCcpLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICAgIC8vIGlmIHRoZSBvcmRlciB0b3RhbCBpcyB6ZXJvLCBkZXRlcm1pbmUgd2FzIGl0IGJlY2F1c2Ugb2YgdGhlIGdpZnQgY2VydGlmaWNhdGUgdXNlIG9yIGEgcHJvbW90aW9uPyBhbmQgc2hvdyBhcHByb3ByaWF0ZSBtZXNzYWdlXHJcbiAgICAgICAgICAgIGlmIChmbGFnZWFsbG90bWVudGNvdmVyID09ICd0cnVlJykge1xyXG4gICAgICAgICAgICAgICAgJCgnLmdpZnRjZXJ0dXNlZCcpLmFkZENsYXNzKCdhbGxvdG1lbnRjb3ZlcicpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmdpZnRjZXJ0dXNlZCcpLmh0bWwoJzxwIGNsYXNzPVxcJ2ZpcnN0LXBhcmFcXCc+WW91ciBhbGxvdG1lbnQgYmFsYW5jZSB3aWxsIGNvdmVyIHRoZSBmdWxsIGNvc3Qgb2YgdGhpcyBvcmRlci48L3A+PHA+Tm8gZnVydGhlciBwYXltZW50IHdpbGwgYmUgbmVjZXNzYXJ5LjwvcD4nKS5zaG93KCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYWxsb3RtZW50QW1vdW50ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5naWZ0Y2VydHVzZWQnKS5hZGRDbGFzcygnYWxsb3RtZW50Y292ZXInKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYWxsb3RtZW50TWVzc2FnZSA9ICc8ZGl2IGNsYXNzPVwiZ3JlYXRlci10aGFuLTc2N1wiPjxwIGNsYXNzPVwiZmlyc3QtcGFyYVwiPllvdXIgYWxsb3RtZW50IGJhbGFuY2Ugd2lsbCBjb3ZlciB0aGUgZnVsbCBjb3N0IG9mIHRoaXMgb3JkZXIuPC9wPjxwPk5vIGZ1cnRoZXIgcGF5bWVudCB3aWxsIGJlIG5lY2Vzc2FyeS48L3A+PC9kaXY+PGRpdiBjbGFzcz1cImxlc3MtdGhhbi03NjdcIj48cD5Zb3VyIGFsbG90bWVudCBiYWxhbmNlIHdpbGwgY292ZXIgdGhlIGZ1bGwgY29zdCBvZiB0aGlzIG9yZGVyLiBObyBmdXJ0aGVyIHBheW1lbnQgd2lsbCBiZSBuZWNlc3NhcnkuPC9wPjwvZGl2Pic7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmdpZnRjZXJ0dXNlZCcpLmh0bWwoYWxsb3RtZW50TWVzc2FnZSkuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuZ2lmdGNlcnR1c2VkJykuYWRkQ2xhc3MoJ21lcmNoYW50Y292ZXInKS5odG1sKCQoJy5naWZ0Y2VydHBpJykubGVuZ3RoID4gMCA/ICc8cCBjbGFzcz1cXCdmaXJzdC1wYXJhXFwnPicgKyBSZXNvdXJjZXMuR0lGVENFUlRfTk8gKyAnPC9wPicgOiAnPHAgY2xhc3M9XFwnZmlyc3QtcGFyYVxcJz4nICsgUmVzb3VyY2VzLlpFUk9fQkFMQU5DRSArICc8L3A+Jykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICQoJy5jYXJkbm90d29ya2luZycpLmhpZGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKChvcmRlckJhbGFuY2UgPiAwKSAmJiAoJCgnaW5wdXRbbmFtZSQ9XCJwYXltZW50TWV0aG9kc19zZWxlY3RlZFBheW1lbnRNZXRob2RJRFwiXTpjaGVja2VkJykudmFsKCkgPT0gJ0NSRURJVF9DQVJEJykpIHtcclxuICAgICAgICAgICAgJCgnLmNhcmRub3R3b3JraW5nJykuc2hvdygpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICQoJy5jYXJkbm90d29ya2luZycpLmhpZGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgb3JkZXJ0b3RhbHM6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdXJsID0gVXJscy5HZXRPcmRlclRvdGFsSnNvbjtcclxuICAgICAgICBhamF4LmdldEpzb24oe1xyXG4gICAgICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5Ub3RhbC5PcmRlclRvdGFsLmluZGV4T2YoJzAuMDAnKSAhPSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvdXBvbk1lbnRob2RzLnNldFBheW1lbnRTZWN0aW9uKCcwLjAnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnI3BheW1lbnRtZXRob2RzJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeSgnLmdpZnRjZXJ0dXNlZCAnKS5yZW1vdmVDbGFzcygnbWVyY2hhbnRjb3ZlcicpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIHJlbW92ZUdpZnRDZXJ0aWZpY2F0ZTogZnVuY3Rpb24gKGdpZnRDZXJ0aWZpY2F0ZUlkKSB7XHJcbiAgICAgICAgalF1ZXJ5KCcuYmFsYW5jZScpLmVtcHR5KCk7XHJcbiAgICAgICAgLy8gcmVtb3ZlIGdpZnQgY2VydGlmaWNhdGVcclxuICAgICAgICB2YXIgdXJsID0gdXRpbC5hcHBlbmRQYXJhbVRvVVJMKFVybHMuUmVtb3ZlR2lmdENlcnRpZmljYXRlLCAnZ2lmdENlcnRpZmljYXRlSUQnLCBnaWZ0Q2VydGlmaWNhdGVJZCk7XHJcbiAgICAgICAgYWpheC5nZXRKc29uKHtcclxuICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFkYXRhIHx8ICFkYXRhLmdpZnRDZXJ0aWZpY2F0ZSB8fCAhZGF0YS5naWZ0Q2VydGlmaWNhdGUucmVtb3ZlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvdXBvbk1lbnRob2RzLnNldEdpZnRDZXJ0RXJyb3IoUmVzb3VyY2VzLkdJRlRDRVJUX0VSUk9SKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyByZW1vdmUgbWVzc2FnZSBpbiBVSVxyXG4gICAgICAgICAgICAgICAgJCgnI2djLScgKyBnaWZ0Q2VydGlmaWNhdGVJZCkucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAvLyByZWluc3RhdGUgcGF5bWVudCBtZXRob2RzIHNlY3Rpb24gd2hpY2ggbWlnaHQgaGF2ZSBiZWVuIGhpZGRlbiBpZiB0aGUgd2hvbGUgb3JkZXIgd2FzIHBhaWQgd2l0aCBnaWZ0IGNlcnRzXHJcbiAgICAgICAgICAgICAgICBpZiAoIWZsYWdlYWxsb3RtZW50Y292ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcjcGF5bWVudG1ldGhvZHMnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBoaWRlIGdpZnQgY2VydCB1c2VkIGZvciBvdGRlciB0b3RhbCBtZXNzYWdlXHJcbiAgICAgICAgICAgICAgICBpZiAoIWZsYWdlYWxsb3RtZW50Y292ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBqUXVlcnkoJy5naWZ0Y2VydHVzZWQnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvL2NvbW1lbnRpbmcgdGhpcyBzaW5jZSB3ZSBkb24ndCBuZWVkIHRvIGNsZWFyIHRoZSBwYXltZW50IGZvcm0gb24gYXBwbHlpbmcgR0MgYXMgaW4gb3JkZXIgQ0MgZmllbGRzIGFyZSBmaXJzdC5cclxuICAgICAgICAgICAgICAgIC8vdmFyIGNvdW50cnlDb2RlID0galF1ZXJ5KFwiaW5wdXRbbmFtZT0ke3BkaWN0LkN1cnJlbnRGb3Jtcy5iaWxsaW5nLmJpbGxpbmdBZGRyZXNzLmFkZHJlc3NGaWVsZHMuY291bnRyeS5odG1sTmFtZX1dXCIpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgLy91cGRhdGVQYXltZW50TWV0aG9kcyggY291bnRyeUNvZGUgKTtcclxuICAgICAgICAgICAgICAgIHZhciBjb3VudHJ5Q29kZSA9IGpRdWVyeSgnaW5wdXRbbmFtZSQ9XFwnYWRkcmVzc0ZpZWxkc19jb3VudHJ5XFwnXScpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjb3VudHJ5Q29kZSA9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvdW50cnlDb2RlID0gJ1VTJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvdXBvbk1lbnRob2RzLnVwZGF0ZVBheW1lbnRNZXRob2RzKGNvdW50cnlDb2RlKTtcclxuICAgICAgICAgICAgICAgIGNvdXBvbk1lbnRob2RzLnVwZGF0ZVN1bW1hcnkoKTtcclxuICAgICAgICAgICAgICAgIGNvdXBvbk1lbnRob2RzLm9yZGVydG90YWxzKCk7XHJcbiAgICAgICAgICAgICAgICB1aWV2ZW50cy5zeW5jY2hlY2tvdXRIKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCgnI3BheW1lbnRtZXRob2RzIC50b2dnbGUnKS5lcSgwKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuY2FyZG5vdHdvcmtpbmcnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgYmluZEdpZnRDZXJ0aWZpY2F0ZVJlbW92YWw6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCcjZ2lmdGNlcnRlbnRyeSBhLnJlbW92ZScpLnVuYmluZCgnY2xpY2snKS5iaW5kKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGdjSWQgPSB1dGlsLnRyaW1QcmVmaXgoJCh0aGlzKS5hdHRyKCdpZCcpLCAncmdjLScpO1xyXG4gICAgICAgICAgICBjb3Vwb25NZW50aG9kcy5yZW1vdmVHaWZ0Q2VydGlmaWNhdGUoZ2NJZCk7XHJcbiAgICAgICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIHNldEdpZnRDZXJ0UmVkZW1wdGlvbkluZm86IGZ1bmN0aW9uIChnaWZ0Q2VydGlmaWNhdGVJZCwgYW1vdW50RXhwcikge1xyXG5cclxuICAgICAgICBpZiAoIWdpZnRDZXJ0aWZpY2F0ZUlkIHx8ICFnaWZ0Q2VydGlmaWNhdGVJZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgICQoJyNnYy0nICsgZ2lmdENlcnRpZmljYXRlSWQpLnJlbW92ZSgpO1xyXG4gICAgICAgIC8qalF1ZXJ5KFwiJHsnIyd9Z2lmdGNlcnRlbnRyeSAucmVkZW1wdGlvblwiKS5hcHBlbmQoXCI8ZGl2IGNsYXNzPSdzdWNjZXNzIGdpZnRjZXJ0cGknIGlkPSdnYy1cIisgZ2lmdENlcnRpZmljYXRlSWQrXCInPjxkaXYgY2xhc3M9J2djcmVtb3ZlIGRpc2NvdW50LXN1Y2Nlc3MnPjxkaXYgY2xhc3M9J2djcmVtb3ZlX2ljb24nPjxhIGlkPSdyZ2MtXCIrZ2lmdENlcnRpZmljYXRlSWQgK1wiJyBjbGFzcz0ncmVtb3ZlJyBocmVmPSckeycjJ30nPjxpbWcgc3JjPScke1VSTFV0aWxzLnN0YXRpY1VSTCgnL2ltYWdlcy9pY29uX3JlbW92ZS5naWYnKX0nIGFsdD0nJHtSZXNvdXJjZS5tc2coJ2dsb2JhbC5yZW1vdmUnLCdsb2NhbGUnLG51bGwpfScvPjwvYT48L2Rpdj48ZGl2IGNsYXNzPSdnY19pZGxhYmVsJz4ke1Jlc291cmNlLm1zZygnbWluaWJpbGxpbmdpbmZvLmdpZnRjZXJ0aWZpY2F0ZScsJ2NoZWNrb3V0JyxudWxsKX0gLSBcIitnaWZ0Q2VydGlmaWNhdGVJZCtcIiA8L2Rpdj48ZGl2IGNsYXNzPSdnY3JlZGVlbWFtb3VudCc+XCIrJy0nK1wiXCIrYW1vdW50RXhwcitcIjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9J2djZGlzY2FwcGxpZWQnPlwiKyBhbW91bnRFeHByK1wiIFwiKycgJytcIiAke1Jlc291cmNlLm1zZygnYmlsbGluZy5naWZ0Y2VydHJlZGVlbWVkJywnY2hlY2tvdXQnLG51bGwpfTwvZGl2PjwvZGl2PlwiKTsqL1xyXG4gICAgICAgICQoJyNnaWZ0Y2VydGVudHJ5IC5yZWRlbXB0aW9uJykuYXBwZW5kKCc8ZGl2IGNsYXNzPVxcJ3N1Y2Nlc3MgZ2lmdGNlcnRwaVxcJyBpZD1cXCdnYy0nICsgZ2lmdENlcnRpZmljYXRlSWQgKyAnXFwnPjxkaXYgY2xhc3M9XFwnZ2NyZW1vdmUgZGlzY291bnQtc3VjY2Vzc1xcJz48ZGl2IGNsYXNzPVxcJ2djX2lkbGFiZWxcXCc+JyArIGdpZnRDZXJ0aWZpY2F0ZUlkICsgJyA8L2Rpdj48ZGl2IGNsYXNzPVxcJ2djcmVkZWVtYW1vdW50XFwnPicgKyAnIC0gJyArICcnICsgYW1vdW50RXhwciArICcgJyArIFJlc291cmNlcy5HSUZUX0NFUlRJRklDQVRFX0NSRURJVCArICc8L2Rpdj48ZGl2IGNsYXNzPVxcJ2djcmVtb3ZlX2ljb25cXCc+PGEgaWQ9XFwncmdjLScgKyBnaWZ0Q2VydGlmaWNhdGVJZCArICdcXCcgY2xhc3M9XFwncmVtb3ZlXFwnIGhyZWY9XFwnI1xcJz48c3Bhbj4nICsgUmVzb3VyY2VzLlJFTU9WRSArICc8L3NwYW4+PC9hPjwvZGl2PjwvZGl2PjwvZGl2PicpO1xyXG4gICAgICAgICQoJy5naWZ0Y2VydGZpZWxkcycpLmNzcyh7J2Rpc3BsYXknOiAnbm9uZSd9KTtcclxuICAgICAgICBjb3Vwb25NZW50aG9kcy5iaW5kR2lmdENlcnRpZmljYXRlUmVtb3ZhbCgpO1xyXG4gICAgfSxcclxuICAgIC8vIGluaXRpYWxpemVzIHRoZSBwYXltZW50IG1ldGhvZCBmb3Jtc1xyXG4gICAgaW5pdFBheW1lbnRNZXRob2RTZWxlY3Rpb246IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgLy8gZ2V0IHNlbGVjdGVkIHBheW1lbnQgbWV0aG9kIGZyb20gcGF5bWVudCBtZXRob2QgZm9ybVxyXG4gICAgICAgIHZhciBwYXltZW50TWV0aG9kSUQgPSBqUXVlcnkoJ2lucHV0W25hbWUkPVxcJ19zZWxlY3RlZFBheW1lbnRNZXRob2RJRFxcJ106Y2hlY2tlZCcpLnZhbCgpO1xyXG4gICAgICAgIGlmICghcGF5bWVudE1ldGhvZElEKSB7XHJcbiAgICAgICAgICAgIC8vIGlmIG5lY2Vzc2FyeSBmYWxsIGJhY2sgdG8gZGVmYXVsdCBwYXltZW50IG1ldGhvZCAoZmlyc3Qgbm9uLWdpZnQtY2VydGlmaWNhdGUgbWV0aG9kKVxyXG4gICAgICAgICAgICBwYXltZW50TWV0aG9kSUQgPSAkKCdpbnB1dFt2YWx1ZT1cXCdDUkVESVRfQ0FSRFxcJ10nKS5hdHRyKCdpZCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gc2hvdyBwYXltZW50IG1ldGhvZCBzZWN0aW9uXHJcbiAgICAgICAgY291cG9uTWVudGhvZHMuY2hhbmdlUGF5bWVudE1ldGhvZChwYXltZW50TWV0aG9kSUQpO1xyXG4gICAgfSxcclxuICAgIC8vIGNoYW5nZXMgdGhlIHBheW1lbnQgbWV0aG9kIGZvcm1cclxuICAgIGNoYW5nZVBheW1lbnRNZXRob2Q6IGZ1bmN0aW9uIChwYXltZW50TWV0aG9kSUQpIHtcclxuICAgICAgICAvL2lmIChqUXVlcnkoXCIuZ2lmdGNlcnR1c2VkXCIpLmNzcyhcImRpc3BsYXlcIikgIT0gXCJub25lXCIpIHJldHVybjtcclxuICAgICAgICAvKlxyXG4gICAgICAgICAgIGpRdWVyeShcIi5wYXltZW50Zm9ybVwiKS5oaWRlKCk7XHJcbiAgICAgICAgICAgalF1ZXJ5KFwiI1BheW1lbnRNZXRob2RfXCIgKyBwYXltZW50TWV0aG9kSUQpLnNob3coKTtcclxuICAgICAgICAgICBpZiggalF1ZXJ5KFwiI1BheW1lbnRNZXRob2RfXCIgKyBwYXltZW50TWV0aG9kSUQpLmxlbmd0aCA9PSAwIClcclxuICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgIGpRdWVyeShcIiNQYXltZW50TWV0aG9kX0N1c3RvbVwiKS5zaG93KCk7XHJcbiAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAvLyBlbnN1cmUgY2hlY2tib3ggb2YgcGF5bWVudCBtZXRob2QgaXMgY2hlY2tlZFxyXG4gICAgICAgICAgIGpRdWVyeShcIiNpcy1cIiArIHBheW1lbnRNZXRob2RJRCkuYXR0cihcImNoZWNrZWRcIiwgdHJ1ZSk7XHJcbiAgICAgICAgICAgaWYoJChcIiNQYXltZW50TWV0aG9kX0NSRURJVF9DQVJEXCIpLmlzKCc6dmlzaWJsZScpKXtcclxuICAgICAgICAgICAgICAgaWYocGF5bWVudE1ldGhvZElEID09IFwiUGF5UGFsXCIpe1xyXG4gICAgICAgICAgICAgICAgICAgJCgnLmNhcmRub3R3b3JraW5nJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICQoJy5jYXJkbm90d29ya2luZycpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgIGpRdWVyeSgnLnBheW1lbnRmb3JtLnBheXBhbCAucGF5cGFsbXNnJykucmVtb3ZlQ2xhc3MoJ2Vycm9yJyk7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICB9Ki9cclxuXHJcbiAgICAgICAgdmFyICRwYXltZW50TWV0aG9kcyA9ICQoJy5wYXltZW50LW1ldGhvZCcpO1xyXG4gICAgICAgICRwYXltZW50TWV0aG9kcy5yZW1vdmVDbGFzcygncGF5bWVudC1tZXRob2QtZXhwYW5kZWQnKTtcclxuXHJcbiAgICAgICAgdmFyICRzZWxlY3RlZFBheW1lbnRNZXRob2QgPSAkcGF5bWVudE1ldGhvZHMuZmlsdGVyKCdbZGF0YS1tZXRob2Q9XCInICsgcGF5bWVudE1ldGhvZElEICsgJ1wiXScpO1xyXG4gICAgICAgIGlmICgkc2VsZWN0ZWRQYXltZW50TWV0aG9kLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAkc2VsZWN0ZWRQYXltZW50TWV0aG9kID0gJCgnW2RhdGEtbWV0aG9kPVwiQ3VzdG9tXCJdJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICRzZWxlY3RlZFBheW1lbnRNZXRob2QuYWRkQ2xhc3MoJ3BheW1lbnQtbWV0aG9kLWV4cGFuZGVkJyk7XHJcblxyXG4gICAgICAgIC8vIGVuc3VyZSBjaGVja2JveCBvZiBwYXltZW50IG1ldGhvZCBpcyBjaGVja2VkXHJcbiAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XCJfc2VsZWN0ZWRQYXltZW50TWV0aG9kSURcIl0nKS5yZW1vdmVBdHRyKCdjaGVja2VkJyk7XHJcbiAgICAgICAgJCgnaW5wdXRbdmFsdWU9JyArIHBheW1lbnRNZXRob2RJRCArICddJykucHJvcCgnY2hlY2tlZCcsICdjaGVja2VkJyk7XHJcbiAgICB9LFxyXG4gICAgYmluZENyZWRpdENhcmRQb3B1bGF0aW9uSGFuZGxlcjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIHNlbGVjdCBjcmVkaXQgY2FyZCBmcm9tIGxpc3RcclxuICAgICAgICAkKCcuY3JlZGl0Y2FyZGxpc3Qgc2VsZWN0JykuY2hhbmdlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGNhcmRVVUlEID0gJCh0aGlzKS52YWwoKTtcclxuICAgICAgICAgICAgaWYgKCFjYXJkVVVJRCkge1xyXG4gICAgICAgICAgICAgICAgalF1ZXJ5KCdpbnB1dFtuYW1lJD1cXCdwYXltZW50TWV0aG9kc19jcmVkaXRDYXJkX293bmVyXFwnXScpLnZhbCgnJyk7XHJcbiAgICAgICAgICAgICAgICBqUXVlcnkoJ2lucHV0W25hbWUkPVxcJ3BheW1lbnRNZXRob2RzX2NyZWRpdENhcmRfbnVtYmVyXFwnXScpLnZhbCgnJyk7XHJcbiAgICAgICAgICAgICAgICBqUXVlcnkoJ3NlbGVjdFtuYW1lJD1cXCdwYXltZW50TWV0aG9kc19jcmVkaXRDYXJkX21vbnRoXFwnXScpLnZhbCgnJyk7XHJcbiAgICAgICAgICAgICAgICBqUXVlcnkoJ3NlbGVjdFtuYW1lJD1cXCdwYXltZW50TWV0aG9kc19jcmVkaXRDYXJkX3llYXJcXCddJykudmFsKCcnKTtcclxuICAgICAgICAgICAgICAgIGpRdWVyeSgnc2VsZWN0W25hbWUkPVxcJ3BheW1lbnRNZXRob2RzX2NyZWRpdENhcmRfY3ZuXFwnXScpLnZhbCgnJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcuY2FyZHR5cGVpbWcgPiBkaXYnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcuZXhwaXJhdGlvbmRhdGUuZXJyb3InKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICBqUXVlcnkoJy5wYXltZW50Zm9ybSBhLmNsZWFyYnV0dG9uJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmN1c3RvbS1zZWxlY3QnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0VmFsID0gJCh0aGlzKS5maW5kKCc6c2VsZWN0ZWQnKS50ZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuc2VsZWN0b3JPdXQnKS50ZXh0KHNlbGVjdFZhbCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGpRdWVyeSgnZm9ybVtpZCQ9XFwncGF5bWVudE1ldGhvZHNfY3JlZGl0Q2FyZFxcJ10gaW5wdXQsIGZvcm1baWQkPVxcJ3BheW1lbnRNZXRob2RzX2NyZWRpdENhcmRcXCddIHNlbGVjdCcpLnJlbW92ZUNsYXNzKCdlcnJvcmNsaWVudCcpO1xyXG4gICAgICAgICAgICAgICAgalF1ZXJ5KCdmb3JtW2lkJD1cXCdwYXltZW50TWV0aG9kc19jcmVkaXRDYXJkXFwnXSBzcGFuLmVycm9yY2xpZW50JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgalF1ZXJ5KCdmb3JtW2lkJD1cXCdwYXltZW50TWV0aG9kc19jcmVkaXRDYXJkXFwnXSAuY3VzdG9tLXNlbGVjdCcpLnJlbW92ZUNsYXNzKCdjdXN0b21zZWxlY3QtZXJyb3InKTtcclxuICAgICAgICAgICAgICAgIGpRdWVyeSgnZm9ybVtpZCQ9XFwncGF5bWVudE1ldGhvZHNfY3JlZGl0Q2FyZFxcJ10gLmV4cGlyYXRpb25kYXRlLmVycm9yJykuaGlkZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvdXBvbk1lbnRob2RzLnBvcHVsYXRlQ3JlZGl0Q2FyZEZvcm0oY2FyZFVVSUQpO1xyXG4gICAgICAgICAgICB1aWV2ZW50cy5zeW5jY2hlY2tvdXRIKCk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICBiaW5kUGF5bWVudE1ldGhvZENoYW5nZUhhbmRsZXI6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBiaW5kIHBheW1lbnQgbWV0aG9kIGNoYW5nZSBoYW5kbGVyXHJcbiAgICAgICAgJCgnI3BheW1lbnRtZXRob2RzIC50b2dnbGUnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChqUXVlcnkoJ2lucHV0W25hbWUkPVwiYmlsbGluZ19wYXlwYWxwcm9jZXNzZWRcIl0nKS52YWwoKSAhPSAndHJ1ZScpIHtcclxuICAgICAgICAgICAgICAgICQoJyNwYXltZW50bWV0aG9kcyAudG9nZ2xlJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRJRCA9IGpRdWVyeSh0aGlzKS5maW5kKCdpbnB1dFtuYW1lJD1cIl9iaWxsaW5nX3BheW1lbnRNZXRob2RzX3NlbGVjdGVkUGF5bWVudE1ldGhvZElEXCJdJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWRJRCA9PSAnUGF5UGFsJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXlwYWxTdGF0dXMgPSBqUXVlcnkoJ2lucHV0W25hbWUkPVwiX2JpbGxpbmdfcGF5cGFsdmFsX3BheXBhbHByb2Nlc3NlZFwiXScpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5jYXJkbm90d29ya2luZycpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGF5cGFsU3RhdHVzID09ICd0cnVlJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyQoJy5jb250aW51ZWNoZWNrb3V0YnV0dG9uIC5jb250aW51ZWNoZWNrb3V0JykucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyQoJy5jb250aW51ZWNoZWNrb3V0YnV0dG9uIC5jb250aW51ZWNoZWNrb3V0JykuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNlbGVjdGVkSUQgPT0gJ0NSRURJVF9DQVJEJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghJCgnaW5wdXRbbmFtZSQ9XCJfY3JlZGl0Q2FyZF9vd25lclwiXScpLmhhc0NsYXNzKCdlcnJvcmNsaWVudCcpICYmICEkKCdpbnB1dFtuYW1lJD1cIl9jcmVkaXRDYXJkX251bWJlclwiXScpLmhhc0NsYXNzKCdlcnJvcmNsaWVudCcpICYmICEkKCdpbnB1dFtuYW1lJD1cIl9jcmVkaXRDYXJkX2N2blwiXScpLmhhc0NsYXNzKCdlcnJvcmNsaWVudCcpICYmICEkKCdzZWxlY3RbbmFtZSQ9XCJwYXltZW50TWV0aG9kc19jcmVkaXRDYXJkX3llYXJcIl0nKS5oYXNDbGFzcygnZXJyb3JjbGllbnQnKSAmJiAhJCgnc2VsZWN0W25hbWUkPVwicGF5bWVudE1ldGhvZHNfY3JlZGl0Q2FyZF9tb250aFwiXScpLmhhc0NsYXNzKCdlcnJvcmNsaWVudCcpICYmICQoJ2lucHV0W25hbWUkPVwiX2NyZWRpdENhcmRfb3duZXJcIl0nKS52YWwoKSAhPSAnJyAmJiAkKCdpbnB1dFtuYW1lJD1cIl9jcmVkaXRDYXJkX251bWJlclwiXScpLnZhbCgpICE9ICcnICYmICQoJ2lucHV0W25hbWUkPVwiX2NyZWRpdENhcmRfY3ZuXCJdJykudmFsKCkgIT0gJycgJiYgJCgnc2VsZWN0W25hbWUkPVwicGF5bWVudE1ldGhvZHNfY3JlZGl0Q2FyZF9leHBpcmF0aW9uX21vbnRoXCJdJykudmFsKCkgIT0gJycgJiYgJCgnc2VsZWN0W25hbWUkPVwicGF5bWVudE1ldGhvZHNfY3JlZGl0Q2FyZF9leHBpcmF0aW9uX21vbnRoXCJdJykudmFsKCkgIT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8kKCcuY29udGludWVjaGVja291dGJ1dHRvbiAuY29udGludWVjaGVja291dCcpLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8kKCcuY29udGludWVjaGVja291dGJ1dHRvbiAuY29udGludWVjaGVja291dCcpLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCdpbnB1dFtuYW1lPVwiYmlsbGluZ19wYXltZW50TWV0aG9kc19zZWxlY3RlZFBheW1lbnRNZXRob2RJRFwiXScpLnByb3AoJ2NoZWNrZWQnLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIGNvdXBvbk1lbnRob2RzLmNoYW5nZVBheW1lbnRNZXRob2Qoc2VsZWN0ZWRJRCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAkKCcjcGF5bWVudG1ldGhvZHMgLnBheW1lbnRmb3JtLmNyZWRpdGNhcmRwYXltZW50JykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKCcucGF5bWVudG1ldGhvZHMgLnRvZ2dsZSBpbnB1dCNpcy1DUkVESVRfQ0FSRCcpLmNsb3Nlc3QoJy50b2dnbGUnKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJCgnI3BheW1lbnRtZXRob2RzIC5wYXltZW50Zm9ybS5wYXlwYWwnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQoJy5wYXltZW50bWV0aG9kcyAudG9nZ2xlIGlucHV0I2lzLVBheVBhbCcpLmNsb3Nlc3QoJy50b2dnbGUnKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgdXBkYXRlUGF5bWVudE1ldGhvZHM6IGZ1bmN0aW9uIChjb3VudHJ5Q29kZSkge1xyXG5cclxuICAgICAgICB2YXIgdXJsID0gdXRpbC5hcHBlbmRQYXJhbVRvVVJMKFVybHMuUmVmcmVzaFBheW1lbnRNZXRob2RzLCAnY291bnRyeUNvZGUnLCBjb3VudHJ5Q29kZSk7XHJcblxyXG4gICAgICAgIC8vIGluZGljYXRlIHByb2dyZXNzXHJcbiAgICAgICAgcHJvZ3Jlc3Muc2hvdygnI3BheW1lbnRtZXRob2Rmb3JtJyk7XHJcblxyXG4gICAgICAgIC8vIGxvYWQgdGhlIHVwZGF0ZWQgcGF5bWVudCBtZXRob2QgYXJlYVxyXG4gICAgICAgICQoJyNwYXltZW50bWV0aG9kZm9ybScpLmxvYWQodXJsLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQoJyNwYXltZW50bWV0aG9kZm9ybScpLmZhZGVJbignZmFzdCcpO1xyXG4gICAgICAgICAgICAvLyQoJy5jb250aW51ZWNoZWNrb3V0YnV0dG9uIC5jb250aW51ZWNoZWNrb3V0JykuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgLy9jb3Vwb25NZW50aG9kcy5pbml0UGF5bWVudE1ldGhvZFNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICBjb3Vwb25NZW50aG9kcy5iaW5kUGF5bWVudE1ldGhvZENoYW5nZUhhbmRsZXIoKTtcclxuICAgICAgICAgICAgY291cG9uTWVudGhvZHMuYmluZENyZWRpdENhcmRQb3B1bGF0aW9uSGFuZGxlcigpO1xyXG4gICAgICAgICAgICB2YWxpZGF0b3IuaW5pdCgpO1xyXG4gICAgICAgICAgICB0b29sdGlwLmluaXQoKTtcclxuICAgICAgICAgICAgdXRpbC5jYXJkdHlwZS5pbml0KCk7XHJcbiAgICAgICAgICAgICQoJy5leHBpcmF0aW9uZGF0ZSAuY3VzdG9tLXNlbGVjdCBzZWxlY3QnKTtcclxuICAgICAgICAgICAgJCgnI1BheW1lbnRNZXRob2RfQ1JFRElUX0NBUkQgaW5wdXQnKTtcclxuICAgICAgICAgICAgJCgnI1BheW1lbnRNZXRob2RfQ1JFRElUX0NBUkQgc2VsZWN0Jyk7XHJcbiAgICAgICAgICAgIHVpZXZlbnRzLmluaXQoJCgnI3BheW1lbnRtZXRob2Rmb3JtJykpO1xyXG4gICAgICAgICAgICAvL2xvYWQgY2hlY2tpbmcgZm9yIHBheW1lbnQgdHlwZVxyXG4gICAgICAgICAgICB2YXIgJHBheVNlbGVjdGVkID0galF1ZXJ5KCcjcGF5bWVudG1ldGhvZHMnKS5maW5kKCdpbnB1dFtuYW1lJD1cInBheW1lbnRNZXRob2RzX3NlbGVjdGVkUGF5bWVudE1ldGhvZElEXCJdOmNoZWNrZWQnKTtcclxuICAgICAgICAgICAgaWYgKCRwYXlTZWxlY3RlZC5sZW5ndGggPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgJHBheVNlbGVjdGVkLmNsb3Nlc3QoJy50b2dnbGUnKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRJRCA9ICRwYXlTZWxlY3RlZC52YWwoKTtcclxuICAgICAgICAgICAgICAgIGNvdXBvbk1lbnRob2RzLmNoYW5nZVBheW1lbnRNZXRob2Qoc2VsZWN0ZWRJRCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY291cG9uTWVudGhvZHMub3JkZXJ0b3RhbHMoKTtcclxuICAgICAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vYXBwLmV4ZWNVanMoKTtcclxuICAgIH0sXHJcbiAgICByZW1vdmVDb3Vwb25Db2RlOiBmdW5jdGlvbiAoY291cG9uQ29kZSkge1xyXG4gICAgICAgIGNvdXBvbk1lbnRob2RzLnNldENvdXBvbkVycm9yKG51bGwpO1xyXG4gICAgICAgIC8vIG5vdGhpbmcgZW50ZXJlZFxyXG4gICAgICAgIGlmICghY291cG9uQ29kZSkge1xyXG4gICAgICAgICAgICBjb3Vwb25NZW50aG9kcy5zZXRDb3Vwb25FcnJvcihSZXNvdXJjZXMuQklMTElOR19DT1VQT05NSVMpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGF0dGVtcHQgdG8gcmVtb3ZlXHJcbiAgICAgICAgalF1ZXJ5KCdpbnB1dFtuYW1lJD1cXCdiaWxsaW5nX2NvdXBvbkNvZGVcXCddJykudmFsKCcnKTtcclxuXHJcbiAgICAgICAgdmFyIHVybCA9IHV0aWwuYXBwZW5kUGFyYW1Ub1VSTChVcmxzLlJlbW92ZUNvdXBvbiwgJ2NvdXBvbkNvZGUnLCBjb3Vwb25Db2RlKTtcclxuICAgICAgICAkLmdldCh1cmwsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGNvdXBvbk1lbnRob2RzLnVwZGF0ZVN1bW1hcnkoKTtcclxuICAgICAgICAgICAgY291cG9uTWVudGhvZHMudXBkYXRlY2FydHN1bW1hcnkoKTtcclxuICAgICAgICAgICAgdmFyIGdpZnRDZXJ0aWZpY2F0ZXMgPSBqUXVlcnkoZGF0YSkuZmlsdGVyKCcjZ2lmdENlcnRpZmljYXRlRGF0YScpLnRleHQoKTtcclxuICAgICAgICAgICAgaWYgKGdpZnRDZXJ0aWZpY2F0ZXMgIT0gJ3VuZGVmaW5lZCcgJiYgZ2lmdENlcnRpZmljYXRlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZ2lmdENlcnRpZmljYXRlZGF0YSA9IGdpZnRDZXJ0aWZpY2F0ZXMuc3BsaXQoJ3wnKTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBnaWZ0Q2VydGlmaWNhdGVkYXRhLmxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvdXBvbk1lbnRob2RzLnNldEdpZnRDZXJ0UmVkZW1wdGlvbkluZm8oZ2lmdENlcnRpZmljYXRlZGF0YVtpbmRleF0uc3BsaXQoJy0nKVswXS50cmltKCksIGdpZnRDZXJ0aWZpY2F0ZWRhdGFbaW5kZXhdLnNwbGl0KCctJylbMV0udHJpbSgpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB1aWV2ZW50cy5zeW5jY2hlY2tvdXRIKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyIGNvdW50cnlDb2RlID0galF1ZXJ5KCdpbnB1dFtuYW1lJD1cXCdhZGRyZXNzRmllbGRzX2NvdW50cnlcXCddJykudmFsKCk7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBjb3VudHJ5Q29kZSA9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICBjb3VudHJ5Q29kZSA9ICdVUyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvdXBvbk1lbnRob2RzLnVwZGF0ZVBheW1lbnRNZXRob2RzKGNvdW50cnlDb2RlKTtcclxuICAgICAgICBjb3Vwb25NZW50aG9kcy5vcmRlcnRvdGFscygpO1xyXG5cclxuICAgICAgICAvLyBEZXRlcm1pbmUgaWYgYSBib251cy1wcm9kdWN0IHByb21vdGlvbiB3YXMgdHJpZ2dlcmVkIGJ5IHRoZSBjb3Vwb24uXHJcbiAgICAgICAgLy8gSWYgc28sIGRpc3BsYXkgYSBwb3B1cCBhbGVydCBhbmQgZ2l2ZSB0aGUgY3VzdG9tZXIgYSBjaGFuY2UgdG9cclxuICAgICAgICAvLyByZXR1cm4gdG8gdGhlIGNhcnQgYW5kIHNlbGVjdCB0aGUgYm9udXMgcHJvZHVjdC5cclxuXHJcbiAgICAgICAgLyokKCcubm9Cb251c0J0bicpLnVuYmluZChcImNsaWNrXCIpLmNsaWNrKCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgJCgnLmJvbnVzZGlzY291bnRjb250YWluZXInKS5kaWFsb2coJ2Nsb3NlJyk7XHJcbiAgICAgICAgICB9KTsqL1xyXG4gICAgfSxcclxuICAgIHBvcHVsYXRlQ3JlZGl0Q2FyZEZvcm06IGZ1bmN0aW9uIChjYXJkSUQpIHtcclxuICAgICAgICAvLyBsb2FkIGNhcmQgZGV0YWlsc1xyXG4gICAgICAgIHZhciB1cmwgPSBVcmxzLmJpbGxpbmdTZWxlY3RDQztcclxuICAgICAgICB1cmwgPSB1dGlsLmFwcGVuZFBhcmFtVG9VUkwodXJsLCAnY3JlZGl0Q2FyZFVVSUQnLCBjYXJkSUQpO1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBhamF4LmdldEpzb24oe1xyXG4gICAgICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBhbGVydChSZXNvdXJjZXMuQ0NfTE9BRF9FUlJPUik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyICRjcmVkaXRDYXJkID0gJCgnYm9keScpLmZpbmQoJy5jcmVkaXRjYXJkcGF5bWVudCcpO1xyXG4gICAgICAgICAgICAgICAgLy8gZmlsbCB0aGUgZm9ybSAvIGNsZWFyIHRoZSBmb3JtZXIgY3ZuIGlucHV0XHJcbiAgICAgICAgICAgICAgICAkY3JlZGl0Q2FyZC5maW5kKCdpbnB1dFtuYW1lJD1cImNyZWRpdENhcmRfb3duZXJcIl0nKS52YWwoZGF0YS5ob2xkZXIpLnRyaWdnZXIoJ2NoYW5nZScpO1xyXG4gICAgICAgICAgICAgICAgJGNyZWRpdENhcmQuZmluZCgnc2VsZWN0W25hbWUkPVwiX3R5cGVcIl0nKS52YWwoZGF0YS50eXBlKS50cmlnZ2VyKCdjaGFuZ2UnKTtcclxuICAgICAgICAgICAgICAgICRjcmVkaXRDYXJkLmZpbmQoJy5jcmVkaXRDYXJkLW51bWJlcicpLnZhbChkYXRhLm1hc2tlZE51bWJlcikudHJpZ2dlcignY2hhbmdlJyk7XHJcbiAgICAgICAgICAgICAgICAkY3JlZGl0Q2FyZC5maW5kKCdbbmFtZSQ9XCJfbW9udGhcIl0nKS52YWwoZGF0YS5leHBpcmF0aW9uTW9udGgpLnRyaWdnZXIoJ2NoYW5nZScpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRZZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xyXG4gICAgICAgICAgICAgICAgaWYgKChkYXRhLmV4cGlyYXRpb25ZZWFyIDw9IGN1cnJlbnRZZWFyKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICRjcmVkaXRDYXJkLmZpbmQoJ1tuYW1lJD1cIl95ZWFyXCJdJykudmFsKCcnKS5jaGFuZ2UoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGNyZWRpdENhcmQuZmluZCgnW25hbWUkPVwiX3llYXJcIl0nKS52YWwoZGF0YS5leHBpcmF0aW9uWWVhcikudHJpZ2dlcignY2hhbmdlJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkY3JlZGl0Q2FyZC5maW5kKCdpbnB1dFtuYW1lJD1cIl9jdm5cIl0nKS52YWwoJycpLnRyaWdnZXIoJ2NoYW5nZScpO1xyXG4gICAgICAgICAgICAgICAgalF1ZXJ5KCdpbnB1dFtuYW1lJD1cImNyZWRpdENhcmRfb3duZXJcIl0nKS52YWwoZGF0YS5jcmVkaXRDYXJkLmhvbGRlcik7XHJcbiAgICAgICAgICAgICAgICB1aWV2ZW50cy5jaGFuZ2VGb3JtU2VsZWN0aW9uKCQoJ3NlbGVjdFtuYW1lJD1cIl90eXBlXCJdJylbMF0sIGRhdGEuY3JlZGl0Q2FyZC50eXBlKTtcclxuICAgICAgICAgICAgICAgICQoJy5jcmVkaXRDYXJkLW51bWJlcicpLnZhbChkYXRhLmNyZWRpdENhcmQubWFza2VkTnVtYmVyKTtcclxuICAgICAgICAgICAgICAgIHVpZXZlbnRzLmNoYW5nZUZvcm1TZWxlY3Rpb24oJCgnW25hbWUkPVwiX21vbnRoXCJdJylbMF0sIGRhdGEuY3JlZGl0Q2FyZC5leHBpcmF0aW9uTW9udGgpO1xyXG4gICAgICAgICAgICAgICAgdWlldmVudHMuY2hhbmdlRm9ybVNlbGVjdGlvbigkKCdbbmFtZSQ9XCJfeWVhclwiXScpWzBdLCBkYXRhLmNyZWRpdENhcmQuZXhwaXJhdGlvblllYXIpO1xyXG4gICAgICAgICAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XCJfY3ZuXCJdJykudmFsKCcnKTtcclxuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBlcnJvciBtZXNzYWdpbmdcclxuICAgICAgICAgICAgICAgICQoJyNQYXltZW50TWV0aG9kX0NSRURJVF9DQVJEIHNwYW4uZXJyb3JtZXNzYWdlJykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcjUGF5bWVudE1ldGhvZF9DUkVESVRfQ0FSRCBpbnB1dC5lcnJvcm1lc3NhZ2UnKS5yZW1vdmVDbGFzcygnZXJyb3JtZXNzYWdlJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcjUGF5bWVudE1ldGhvZF9DUkVESVRfQ0FSRCAuZXJyb3JsYWJlbCcpLnJlbW92ZUNsYXNzKCdlcnJvcmxhYmVsJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgJCgnLnBheW1lbnRmb3JtLmNyZWRpdGNhcmRwYXltZW50IC5mb3JtZmllbGQgLmZpZWxkLXdyYXBwZXInKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5maW5kKCdpbnB1dCcpLnZhbCgpICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5maW5kKCdpbnB1dCcpLnZhbCgpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50KCcuZm9ybWZpZWxkJykuZmluZCgnYS5jbGVhcmJ1dHRvbicpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50KCcuZm9ybWZpZWxkJykuZmluZCgnYS5jbGVhcmJ1dHRvbicpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuY3JlZGl0Q2FyZC50eXBlID09ICdWaXNhJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9ICdWaXNhJztcclxuICAgICAgICAgICAgICAgICAgICAvL3Zpc2FcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS5jcmVkaXRDYXJkLnR5cGUgPT0gJ0Rpc2NvdmVyJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9ICdEaXNjb3Zlcic7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9EaXNjb3ZlclxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhLmNyZWRpdENhcmQudHlwZSA9PSAnQW1leCcpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSAnQW1leCc7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9BbWVyaWNhbiBFeHByZXNzXHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEuY3JlZGl0Q2FyZC50eXBlID09ICdNYXN0ZXJDYXJkJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9ICdNYXN0ZXJDYXJkJztcclxuICAgICAgICAgICAgICAgICAgICAvL01hc3RlciBDYXJkXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvL2Vycm9yc3Bhbi5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcjcGF5bWVudG1ldGhvZHMnKS5maW5kKCdzZWxlY3RbbmFtZSQ9XCJfcGF5bWVudE1ldGhvZHNfY3JlZGl0Q2FyZF90eXBlXCJdJykudmFsKHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAkKCcuY2FyZHR5cGVpbWcgPiBkaXYnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcuY2FyZHR5cGVpbWcgPiBkaXYuJyArIHJlc3VsdCkuc2hvdygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgc2V0R2lmdENlcnRCYWxhbmNlSW5mbzogZnVuY3Rpb24gKGFtb3VudEV4cHIpIHtcclxuICAgICAgICBpZiAoIWFtb3VudEV4cHIpIHtcclxuICAgICAgICAgICAgalF1ZXJ5KCcuYmFsYW5jZScpLmVtcHR5KCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgJCgnLmJhbGFuY2UnKS5hcHBlbmQoJzxkaXYgY2xhc3M9XFwnYmFsYW5jZWFtdFxcJz4nICsgUmVzb3VyY2VzLkdJRlRfQ0VSVF9CQUxBTkNFICsgJyAnICsgYW1vdW50RXhwciArICcgPC9kaXY+Jyk7XHJcbiAgICB9LFxyXG4gICAgcmVkZWVtR2lmdENlcnQ6IGZ1bmN0aW9uIChnaWZ0Q2VydGlmaWNhdGVJZCkge1xyXG4gICAgICAgIGNvdXBvbk1lbnRob2RzLnNldEdpZnRDZXJ0RXJyb3IobnVsbCk7XHJcbiAgICAgICAgY291cG9uTWVudGhvZHMuc2V0R2lmdENlcnRCYWxhbmNlSW5mbyhudWxsKTtcclxuICAgICAgICAvLyBub3RoaW5nIGVudGVyZWRcclxuICAgICAgICBpZiAoIWdpZnRDZXJ0aWZpY2F0ZUlkKSB7XHJcbiAgICAgICAgICAgIGNvdXBvbk1lbnRob2RzLnNldEdpZnRDZXJ0RXJyb3IoUmVzb3VyY2VzLkdJRlRfQ0VSVF9JTlZBTElEKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBhdHRlbXB0IHRvIHJlZGVlbVxyXG4gICAgICAgIHZhciB1cmwgPSB1dGlsLmFwcGVuZFBhcmFtc1RvVXJsKFVybHMucmVkZWVtR2lmdENlcnQsIHtnaWZ0Q2VydGlmaWNhdGVJRDogZ2lmdENlcnRpZmljYXRlSWQsIGZvcm1hdDogJ2FqYXgnfSk7XHJcbiAgICAgICAgYWpheC5nZXRKc29uKHtcclxuICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY291cG9uTWVudGhvZHMuc2V0R2lmdENlcnRFcnJvcihSZXNvdXJjZXMuR0lGVF9DRVJUX0lOVkFMSUQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChkYXRhLnJlZGVtcHRpb25FcnJvck1zZykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvdXBvbk1lbnRob2RzLnNldEdpZnRDZXJ0RXJyb3IoZGF0YS5yZWRlbXB0aW9uRXJyb3JNc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICghZGF0YS5yZWRlbXB0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY291cG9uTWVudGhvZHMuc2V0R2lmdENlcnRFcnJvcihSZXNvdXJjZXMuR0lGVF9DRVJUX0lOVkFMSUQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIGVtcHR5IGlucHV0IGZpZWxkIGFuZCBkaXNwbGF5IHJlZGVtcHRpb24gaW4gVUlcclxuICAgICAgICAgICAgICAgICQoJ2lucHV0W25hbWUkPVxcJ2JpbGxpbmdfZ2lmdENlcnRDb2RlXFwnXScpLnZhbCgnJyk7XHJcbiAgICAgICAgICAgICAgICAvL2NvdXBvbk1lbnRob2RzLnNldEdpZnRDZXJ0UmVkZW1wdGlvbkluZm8oZGF0YS5yZWRlbXB0aW9uLmdpZnRDZXJ0aWZpY2F0ZUlELCBkYXRhLnJlZGVtcHRpb24uYW1vdW50KTtcclxuICAgICAgICAgICAgICAgIHZhciBjb3VudHJ5Q29kZSA9ICQoJ2lucHV0W25hbWUkPVxcJ19hZGRyZXNzRmllbGRzX2NvdW50cnlcXCddJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNvdW50cnlDb2RlID09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY291bnRyeUNvZGUgPSAnVVMnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY291cG9uTWVudGhvZHMudXBkYXRlUGF5bWVudE1ldGhvZHMoY291bnRyeUNvZGUpO1xyXG4gICAgICAgICAgICAgICAgY291cG9uTWVudGhvZHMudXBkYXRlU3VtbWFyeSgpO1xyXG4gICAgICAgICAgICAgICAgY291cG9uTWVudGhvZHMub3JkZXJ0b3RhbHMoKTtcclxuICAgICAgICAgICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIGNoZWNrR2lmdENlcnRCYWxhbmNlOiBmdW5jdGlvbiAoZ2lmdENlcnRpZmljYXRlSWQpIHtcclxuICAgICAgICBjb3Vwb25NZW50aG9kcy5zZXRHaWZ0Q2VydEVycm9yKG51bGwpO1xyXG4gICAgICAgIGNvdXBvbk1lbnRob2RzLnNldEdpZnRDZXJ0QmFsYW5jZUluZm8obnVsbCk7XHJcbiAgICAgICAgLy8gbm90aGluZyBlbnRlcmVkXHJcbiAgICAgICAgaWYgKCFnaWZ0Q2VydGlmaWNhdGVJZCkge1xyXG4gICAgICAgICAgICBjb3Vwb25NZW50aG9kcy5zZXRHaWZ0Q2VydEVycm9yKFJlc291cmNlcy5HSUZUX0NFUlRfTUlTU0lORyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gbG9hZCBnaWZ0IGNlcnRpZmljYXRlIGRldGFpbHNcclxuICAgICAgICB2YXIgdXJsID0gdXRpbC5hcHBlbmRQYXJhbXNUb1VybChVcmxzLkdldEdpZnRDZXJ0aWZpY2F0ZUJhbGFuY2UsIHtcclxuICAgICAgICAgICAgZ2lmdENlcnRpZmljYXRlSUQ6IGdpZnRDZXJ0aWZpY2F0ZUlkLFxyXG4gICAgICAgICAgICBmb3JtYXQ6ICdhamF4J1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGFqYXguZ2V0SnNvbih7XHJcbiAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmICghZGF0YSB8fCAhZGF0YS5naWZ0Q2VydGlmaWNhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb3Vwb25NZW50aG9kcy5zZXRHaWZ0Q2VydEVycm9yKFJlc291cmNlcy5HSUZUX0NFUlRfSU5WQUxJRCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gZGlzcGxheSBkZXRhaWxzIGluIFVJXHJcbiAgICAgICAgICAgICAgICBjb3Vwb25NZW50aG9kcy5zZXRHaWZ0Q2VydEJhbGFuY2VJbmZvKGRhdGEuZ2lmdENlcnRpZmljYXRlLmJhbGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn07XHJcblxyXG4vKipcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBkZXNjcmlwdGlvbiBGaWxscyB0aGUgQ3JlZGl0IENhcmQgZm9ybSB3aXRoIHRoZSBwYXNzZWQgZGF0YS1wYXJhbWV0ZXIgYW5kIGNsZWFycyB0aGUgZm9ybWVyIGN2biBpbnB1dFxyXG4gKiBAcGFyYW0ge09iamVjdH0gZGF0YSBUaGUgQ3JlZGl0IENhcmQgZGF0YSAoaG9sZGVyLCB0eXBlLCBtYXNrZWQgbnVtYmVyLCBleHBpcmF0aW9uIG1vbnRoL3llYXIpXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXRDQ0ZpZWxkcyhkYXRhKSB7XHJcblxyXG4gICAgdmFyICRjcmVkaXRDYXJkID0gJCgnW2RhdGEtbWV0aG9kPVwiQ1JFRElUX0NBUkRcIl0nKTtcclxuICAgICRjcmVkaXRDYXJkLmZpbmQoJ2lucHV0W25hbWUkPVwiY3JlZGl0Q2FyZF9vd25lclwiXScpLnZhbChkYXRhLmhvbGRlcikudHJpZ2dlcignY2hhbmdlJyk7XHJcbiAgICAkY3JlZGl0Q2FyZC5maW5kKCdpbnB1dFtuYW1lJD1cImNyZWRpdENhcmRfb3duZXJcIl0nKS52YWwoZGF0YS5ob2xkZXIpLnRyaWdnZXIoJ2JsdXInKTtcclxuICAgICRjcmVkaXRDYXJkLmZpbmQoJ3NlbGVjdFtuYW1lJD1cIl90eXBlXCJdJykudmFsKGRhdGEudHlwZSkudHJpZ2dlcignY2hhbmdlJyk7XHJcbiAgICAkY3JlZGl0Q2FyZC5maW5kKCdzZWxlY3RbbmFtZSQ9XCJfdHlwZVwiXScpLnZhbChkYXRhLnR5cGUpLnRyaWdnZXIoJ2JsdXInKTtcclxuICAgICRjcmVkaXRDYXJkLmZpbmQoJ2lucHV0W25hbWUqPVwiX2NyZWRpdENhcmRfbnVtYmVyXCJdJykudmFsKGRhdGEubWFza2VkTnVtYmVyKS50cmlnZ2VyKCdjaGFuZ2UnKTtcclxuICAgICRjcmVkaXRDYXJkLmZpbmQoJ2lucHV0W25hbWUqPVwiX2NyZWRpdENhcmRfbnVtYmVyXCJdJykudmFsKGRhdGEubWFza2VkTnVtYmVyKS50cmlnZ2VyKCdibHVyJyk7XHJcbiAgICAkY3JlZGl0Q2FyZC5maW5kKCdbbmFtZSQ9XCJfZXhwaXJhdGlvbl9tb250aFwiXScpLnZhbChkYXRhLmV4cGlyYXRpb25Nb250aCkudHJpZ2dlcignY2hhbmdlJyk7XHJcbiAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICB2YXIgY3VycmVudFllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XHJcbiAgICBpZiAoKGRhdGEuZXhwaXJhdGlvblllYXIgPD0gY3VycmVudFllYXIpKSB7XHJcbiAgICAgICAgJGNyZWRpdENhcmQuZmluZCgnW25hbWUkPVwiX3llYXJcIl0nKS52YWwoJycpLmNoYW5nZSgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAkY3JlZGl0Q2FyZC5maW5kKCdbbmFtZSQ9XCJfeWVhclwiXScpLnZhbChkYXRhLmV4cGlyYXRpb25ZZWFyKS50cmlnZ2VyKCdjaGFuZ2UnKTtcclxuICAgIH1cclxuICAgICRjcmVkaXRDYXJkLmZpbmQoJ1tuYW1lJD1cIl9leHBpcmF0aW9uX21vbnRoXCJdJykudmFsKGRhdGEuZXhwaXJhdGlvbk1vbnRoKS50cmlnZ2VyKCdibHVyJyk7XHJcbiAgICBpZiAoKGRhdGEuZXhwaXJhdGlvblllYXIgPD0gY3VycmVudFllYXIpKSB7XHJcbiAgICAgICAgJGNyZWRpdENhcmQuZmluZCgnW25hbWUkPVwiX3llYXJcIl0nKS52YWwoJycpLmJsdXIoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJGNyZWRpdENhcmQuZmluZCgnW25hbWUkPVwiX3llYXJcIl0nKS52YWwoZGF0YS5leHBpcmF0aW9uWWVhcikudHJpZ2dlcignYmx1cicpO1xyXG4gICAgfVxyXG4gICAgJGNyZWRpdENhcmQuZmluZCgnaW5wdXRbbmFtZSQ9XCJfY3ZuXCJdJykudmFsKCcnKS50cmlnZ2VyKCdjaGFuZ2UnKTtcclxuICAgICRjcmVkaXRDYXJkLmZpbmQoJ2lucHV0W25hbWUkPVwiX2N2blwiXScpLnZhbCgnJykudHJpZ2dlcignYmx1cicpO1xyXG4gICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xyXG59XHJcblxyXG4vKipcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBkZXNjcmlwdGlvbiBVcGRhdGVzIHRoZSBjcmVkaXQgY2FyZCBmb3JtIHdpdGggdGhlIGF0dHJpYnV0ZXMgb2YgYSBnaXZlbiBjYXJkXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBjYXJkSUQgdGhlIGNyZWRpdCBjYXJkIElEIG9mIGEgZ2l2ZW4gY2FyZFxyXG4gKi9cclxuZnVuY3Rpb24gcG9wdWxhdGVDcmVkaXRDYXJkRm9ybShjYXJkSUQpIHtcclxuICAgIC8vIGxvYWQgY2FyZCBkZXRhaWxzXHJcbiAgICB2YXIgdXJsID0gdXRpbC5hcHBlbmRQYXJhbVRvVVJMKFVybHMuYmlsbGluZ1NlbGVjdENDLCAnY3JlZGl0Q2FyZFVVSUQnLCBjYXJkSUQpO1xyXG4gICAgYWpheC5nZXRKc29uKHtcclxuICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xyXG4gICAgICAgICAgICBpZiAoIWRhdGEpIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5hbGVydChSZXNvdXJjZXMuQ0NfTE9BRF9FUlJPUik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0Q0NGaWVsZHMoZGF0YSk7XHJcbiAgICAgICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAZGVzY3JpcHRpb24gQ2hhbmdlcyB0aGUgcGF5bWVudCBtZXRob2QgZm9ybSBkZXBlbmRpbmcgb24gdGhlIHBhc3NlZCBwYXltZW50TWV0aG9kSURcclxuICogQHBhcmFtIHtTdHJpbmd9IHBheW1lbnRNZXRob2RJRCB0aGUgSUQgb2YgdGhlIHBheW1lbnQgbWV0aG9kLCB0byB3aGljaCB0aGUgcGF5bWVudCBtZXRob2QgZm9ybSBzaG91bGQgYmUgY2hhbmdlZCB0b1xyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlUGF5bWVudE1ldGhvZChwYXltZW50TWV0aG9kSUQpIHtcclxuICAgIHZhciAkcGF5bWVudE1ldGhvZHMgPSAkKCcucGF5bWVudC1tZXRob2QnKTtcclxuICAgICRwYXltZW50TWV0aG9kcy5yZW1vdmVDbGFzcygncGF5bWVudC1tZXRob2QtZXhwYW5kZWQnKTtcclxuXHJcbiAgICB2YXIgJHNlbGVjdGVkUGF5bWVudE1ldGhvZCA9ICRwYXltZW50TWV0aG9kcy5maWx0ZXIoJ1tkYXRhLW1ldGhvZD1cIicgKyBwYXltZW50TWV0aG9kSUQgKyAnXCJdJyk7XHJcbiAgICBpZiAoJHNlbGVjdGVkUGF5bWVudE1ldGhvZC5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAkc2VsZWN0ZWRQYXltZW50TWV0aG9kID0gJCgnW2RhdGEtbWV0aG9kPVwiQ3VzdG9tXCJdJyk7XHJcbiAgICB9XHJcbiAgICAkc2VsZWN0ZWRQYXltZW50TWV0aG9kLmFkZENsYXNzKCdwYXltZW50LW1ldGhvZC1leHBhbmRlZCcpO1xyXG5cclxuICAgIC8vIGVuc3VyZSBjaGVja2JveCBvZiBwYXltZW50IG1ldGhvZCBpcyBjaGVja2VkXHJcbiAgICAkKCdpbnB1dFtuYW1lJD1cIl9zZWxlY3RlZFBheW1lbnRNZXRob2RJRFwiXScpLnJlbW92ZUF0dHIoJ2NoZWNrZWQnKTtcclxuICAgICQoJ2lucHV0W3ZhbHVlPScgKyBwYXltZW50TWV0aG9kSUQgKyAnXScpLnByb3AoJ2NoZWNrZWQnLCAnY2hlY2tlZCcpO1xyXG5cclxuICAgIC8vZm9ybVByZXBhcmUudmFsaWRhdGVGb3JtKCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAZnVuY3Rpb25cclxuICogQGRlc2NyaXB0aW9uIGxvYWRzIGJpbGxpbmcgYWRkcmVzcywgR2lmdCBDZXJ0aWZpY2F0ZXMsIENvdXBvbiBhbmQgUGF5bWVudCBtZXRob2RzXHJcbiAqL1xyXG5leHBvcnRzLmluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvL3ZhciAkY2hlY2tvdXRGb3JtID0gJCgnLmNoZWNrb3V0LWJpbGxpbmcnKTtcclxuICAgIC8vdmFyICRhZGRHaWZ0Q2VydCA9ICQoJyNhZGQtZ2lmdGNlcnQnKTtcclxuICAgIC8vdmFyICRnaWZ0Q2VydENvZGUgPSAkKCdpbnB1dFtuYW1lJD1cIl9naWZ0Q2VydENvZGVcIl0nKTtcclxuICAgIC8vdmFyICRhZGRDb3Vwb24gPSAkKCcjYWRkLWNvdXBvbicpO1xyXG4gICAgLy92YXIgJGNvdXBvbkNvZGUgPSAkKCdpbnB1dFtuYW1lJD1cIl9jb3Vwb25Db2RlXCJdJyk7XHJcbiAgICB2YXIgJHNlbGVjdFBheW1lbnRNZXRob2QgPSAkKCcucGF5bWVudC1tZXRob2Qtb3B0aW9ucycpO1xyXG4gICAgdmFyIHNlbGVjdGVkUGF5bWVudE1ldGhvZCA9ICRzZWxlY3RQYXltZW50TWV0aG9kLmZpbmQoJzpjaGVja2VkJykudmFsKCk7XHJcblxyXG4gICAgLyogZm9ybVByZXBhcmUuaW5pdCh7XHJcbiAgICAgICAgIGZvcm1TZWxlY3RvcjogJ2Zvcm1baWQkPVwiYmlsbGluZ1wiXScsXHJcbiAgICAgICAgIGNvbnRpbnVlU2VsZWN0b3I6ICdbbmFtZSQ9XCJiaWxsaW5nX3NhdmVcIl0nXHJcbiAgICAgfSk7Ki9cclxuICAgIHZhciBhY3RpdmVQYXltZW50TWV0aG9kSUQgPSAkKCdib2R5JykuZmluZCgnLnBheW1lbnRtZXRob2RzX2NvbnQgLmlucHV0LXJhZGlvOmNoZWNrZWQnKS5hdHRyKCdpZCcpO1xyXG4gICAgaWYgKGFjdGl2ZVBheW1lbnRNZXRob2RJRCA9PSAnaXMtUGF5UGFsJykge1xyXG4gICAgICAgICQoJy5wYXltZW50Zm9ybSAudGV4dGlucHV0LCAucGF5bWVudGZvcm0gLnllYXJzZWxlY3Qgc2VsZWN0LCAucGF5bWVudGZvcm0gLm1vbnRoc2VsZWN0IHNlbGVjdCwgLmFkZHJlc3NvcHRpb25zIC5jaGVja2lucHV0JykucmVtb3ZlQ2xhc3MoJ3JlcXVpcmVkJyk7XHJcbiAgICAgICAgJCgnLmNhcmRub3R3b3JraW5nJykuaGlkZSgpO1xyXG5cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJCgnLnBheW1lbnRmb3JtIC50ZXh0aW5wdXQsIC5wYXltZW50Zm9ybSAueWVhcnNlbGVjdCBzZWxlY3QsIC5wYXltZW50Zm9ybSAubW9udGhzZWxlY3Qgc2VsZWN0LCAuYWRkcmVzc29wdGlvbnMgLmNoZWNraW5wdXQnKS5hZGRDbGFzcygncmVxdWlyZWQnKTtcclxuICAgICAgICAkKCcuY2FyZG5vdHdvcmtpbmcnKS5zaG93KCk7XHJcblxyXG4gICAgfVxyXG4gICAgaWYgKCFqUXVlcnkoJy5jcmVkaXRjYXJkbGlzdCBzZWxlY3QnKS52YWwoKSkge1xyXG4gICAgICAgICQoJy5jcmVkaXRjYXJkX25hbWUnKS52YWwoJycpO1xyXG4gICAgICAgICQoJy5jcmVkaXRDYXJkLW51bWJlcicpLnZhbCgnJyk7XHJcbiAgICAgICAgJCgnLm1vbnRoc2VsZWN0JykudmFsKCcnKTtcclxuICAgICAgICAkKCcueWVhcnNlbGVjdCcpLnZhbCgnJyk7XHJcbiAgICAgICAgJCgnLmNyZWRpdGNhcmRfY3ZuJykudmFsKCcnKTtcclxuICAgICAgICAkKCcuY2FyZHR5cGVpbWcgPiBkaXYnKS5oaWRlKCk7XHJcbiAgICAgICAgJCgnLmV4cGlyYXRpb25kYXRlLmVycm9yJykuaGlkZSgpO1xyXG4gICAgICAgICQoJy5leHBpcmF0aW9uZGF0ZXZhbGlkLmVycm9yJykuaGlkZSgpO1xyXG4gICAgICAgICQoJy5wYXltZW50Zm9ybSBhLmNsZWFyYnV0dG9uJykuaGlkZSgpO1xyXG4gICAgfVxyXG4gICAgJCgnLmV4cGlyYXRpb25kYXRlIC5jdXN0b20tc2VsZWN0IHNlbGVjdCcpLm9uKCdibHVyJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBkID0gbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgbXRoID0gZC5nZXRNb250aCgpICsgMSxcclxuICAgICAgICAgICAgeXkgPSBkLmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgaWYgKCFqUXVlcnkodGhpcykudmFsKCkpIHtcclxuICAgICAgICAgICAgJCgnLmV4cGlyYXRpb25kYXRlLmVycm9yJykuc2hvdygpO1xyXG4gICAgICAgICAgICAkKCcuZXhwaXJhdGlvbmRhdGV2YWxpZC5lcnJvcicpLmhpZGUoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoalF1ZXJ5KCcuZXhwaXJhdGlvbmRhdGUgLmN1c3RvbS1zZWxlY3QuY3VzdG9tc2VsZWN0LWVycm9yJykubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgICQoJy5leHBpcmF0aW9uZGF0ZS5lcnJvcicpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICQoJy5leHBpcmF0aW9uZGF0ZXZhbGlkLmVycm9yJykuaGlkZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZE10aCA9ICQoJy5leHBpcmF0aW9uZGF0ZSAuY3VzdG9tLXNlbGVjdCBzZWxlY3RbaWQkPVxcJ2JpbGxpbmdfcGF5bWVudE1ldGhvZHNfY3JlZGl0Q2FyZF9leHBpcmF0aW9uX21vbnRoXFwnXScpLnZhbCgpO1xyXG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWR5ZWFyID0gJCgnLmV4cGlyYXRpb25kYXRlIC5jdXN0b20tc2VsZWN0IHNlbGVjdFtpZCQ9XFwnYmlsbGluZ19wYXltZW50TWV0aG9kc19jcmVkaXRDYXJkX2V4cGlyYXRpb25feWVhclxcJ10nKS52YWwoKTtcclxuICAgICAgICAgICAgaWYgKHNlbGVjdGVkeWVhciAmJiBzZWxlY3RlZE10aCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWR5ZWFyID0gc2VsZWN0ZWR5ZWFyLnJlcGxhY2UoJywnLCAnJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoKHNlbGVjdGVkeWVhciA8PSB5eSkgJiYgKHNlbGVjdGVkTXRoIDwgbXRoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5leHBpcmF0aW9uZGF0ZS5lcnJvcicpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuZXhwaXJhdGlvbmRhdGV2YWxpZC5lcnJvcicpLnNob3coKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgJCgnYm9keScpLm9uKCdjbGljaycsICcucmVkZW1wdGlvbiAuZGlzY291bnQtc3VjY2VzcyBidXR0b24ucmVtb3ZlLWNvcCcsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHZhciB1cmwgPSAkKHRoaXMpLnZhbCgpO1xyXG4gICAgICAgIGNvdXBvbk1lbnRob2RzLnJlbW92ZUNvdXBvbkNvZGUodXJsKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9KTtcclxuICAgIC8qIEpJUkEgUFJFVi0xMzUgOiBEaXNhYmxlZCBDcmVkaXQgQ2FyZCBpbiBCTSBpcyBkaXNwbGF5aW5nIGluIHRoZSBhcHBsaWNhdGlvbi5cclxuICAgICAgIENoYW5nZWQgZGVmYXVsdCBvcHRpb24gZnJvbSAnQ1JFRElUX0NBUkQnIHRvIGZpcnN0IGF2YWlsYWJsZSBwYXltZW50IG1ldGhvZC4qL1xyXG4gICAgdXBkYXRlUGF5bWVudE1ldGhvZCgoc2VsZWN0ZWRQYXltZW50TWV0aG9kKSA/IHNlbGVjdGVkUGF5bWVudE1ldGhvZCA6ICQoJy5wYXltZW50LW1ldGhvZC1vcHRpb25zIGlucHV0JykuZmlyc3QoKS52YWwoKSk7XHJcbiAgICAkKCdib2R5Jykub24oJ2NsaWNrJywgJy5wYXltZW50LW1ldGhvZC1vcHRpb25zIGlucHV0W3R5cGU9XCJyYWRpb1wiXScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB1cGRhdGVQYXltZW50TWV0aG9kKCQodGhpcykudmFsKCkpO1xyXG4gICAgICAgIGlmICgkKHRoaXMpLmlzKCc6Y2hlY2tlZCcpKSB7XHJcbiAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLnRvZ2dsZScpLnNpYmxpbmdzKCcudG9nZ2xlJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5hdHRyKCdpZCcpID09ICdpcy1QYXlQYWwnKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcucGF5bWVudGZvcm0gLnRleHRpbnB1dCwgLnBheW1lbnRmb3JtIC55ZWFyc2VsZWN0IHNlbGVjdCwgLnBheW1lbnRmb3JtIC5tb250aHNlbGVjdCBzZWxlY3QsIC5hZGRyZXNzb3B0aW9ucyAuY2hlY2tpbnB1dCcpLnJlbW92ZUNsYXNzKCdyZXF1aXJlZCcpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmNhcmRub3R3b3JraW5nJykuaGlkZSgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJCgnLnBheW1lbnRmb3JtIC50ZXh0aW5wdXQsIC5wYXltZW50Zm9ybSAueWVhcnNlbGVjdCBzZWxlY3QsIC5wYXltZW50Zm9ybSAubW9udGhzZWxlY3Qgc2VsZWN0LCAuYWRkcmVzc29wdGlvbnMgLmNoZWNraW5wdXQnKS5hZGRDbGFzcygncmVxdWlyZWQnKTtcclxuICAgICAgICAgICAgICAgICQoJy5jYXJkbm90d29ya2luZycpLnNob3coKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy50b2dnbGUnKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHVpZXZlbnRzLmN1c3RvbUZpZWxkcygpO1xyXG4gICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcclxuICAgIH0pO1xyXG4gICAgJCgnYm9keScpLm9uKCdjbGljaycsICcucGF5bWVudC1tZXRob2Qtb3B0aW9ucyAudG9nZ2xlICBpbWcnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCdsYWJlbCcpLmZpbmQoJ2lucHV0W3R5cGU9XCJyYWRpb1wiXScpLnRyaWdnZXIoJ2NsaWNrJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBzZWxlY3QgY3JlZGl0IGNhcmQgZnJvbSBsaXN0XHJcbiAgICAkKCdib2R5Jykub24oJ2NoYW5nZScsICcjY3JlZGl0Q2FyZExpc3QnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGNhcmRVVUlEID0gJCh0aGlzKS52YWwoKTtcclxuICAgICAgICBpZiAoIWNhcmRVVUlEKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcG9wdWxhdGVDcmVkaXRDYXJkRm9ybShjYXJkVVVJRCk7XHJcblxyXG4gICAgICAgIC8vIHJlbW92ZSBzZXJ2ZXIgc2lkZSBlcnJvclxyXG4gICAgICAgICQoJy5yZXF1aXJlZC5lcnJvcicpLnJlbW92ZUNsYXNzKCdlcnJvcicpO1xyXG4gICAgICAgICQoJy5lcnJvci1tZXNzYWdlJykucmVtb3ZlKCk7XHJcbiAgICB9KTtcclxuICAgICQoJ2JvZHknKS5vbignY2xpY2snLCAnI2dpZnRjZXJ0ZW50cnkgYS5yZW1vdmUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGdjSWQgPSB1dGlsLnRyaW1QcmVmaXgoJCh0aGlzKS5hdHRyKCdpZCcpLCAncmdjLScpO1xyXG4gICAgICAgIGNvdXBvbk1lbnRob2RzLnJlbW92ZUdpZnRDZXJ0aWZpY2F0ZShnY0lkKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9KTtcclxuICAgICQoJ2JvZHknKS5vbignY2xpY2snLCAnI2NoZWNrLWdpZnRjZXJ0JywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdmFyIGdjSWQgPSBqUXVlcnkoJ2lucHV0W25hbWUkPVxcJ2JpbGxpbmdfZ2lmdENlcnRDb2RlXFwnXScpLnZhbCgpLnRvVXBwZXJDYXNlKCk7XHJcbiAgICAgICAgY291cG9uTWVudGhvZHMuY2hlY2tHaWZ0Q2VydEJhbGFuY2UoZ2NJZCk7XHJcbiAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0pO1xyXG5cclxuICAgICQoJ2JvZHknKS5vbignY2xpY2snLCAnI2FkZC1naWZ0Y2VydCcsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHZhciBnY0lkID0galF1ZXJ5KCdpbnB1dFtuYW1lJD1cXCdiaWxsaW5nX2dpZnRDZXJ0Q29kZVxcJ10nKS52YWwoKS50b1VwcGVyQ2FzZSgpO1xyXG4gICAgICAgIGNvdXBvbk1lbnRob2RzLnJlZGVlbUdpZnRDZXJ0KGdjSWQpO1xyXG4gICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCdib2R5Jykub24oJ2NsaWNrJywgJyNhZGQtY291cG9uJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdmFyIC8vJGVycm9yID0gJGNoZWNrb3V0Rm9ybS5maW5kKCcuY291cG9uLWVycm9yJyksXHJcbiAgICAgICAgICAgIGNvZGUgPSAkKCdpbnB1dFtuYW1lJD1cIl9jb3Vwb25Db2RlXCJdJykudmFsKCk7XHJcbiAgICAgICAgY291cG9uTWVudGhvZHMuc2V0Q291cG9uRXJyb3IobnVsbCk7XHJcbiAgICAgICAgaWYgKGNvZGUubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIGNvdXBvbk1lbnRob2RzLnNldENvdXBvbkVycm9yKFJlc291cmNlcy5DT1VQT05fQ09ERV9NSVNTSU5HKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHVybCA9IHV0aWwuYXBwZW5kUGFyYW1zVG9VcmwoVXJscy5hZGRDb3Vwb24sIHtcclxuICAgICAgICAgICAgY291cG9uQ29kZTogY29kZSxcclxuICAgICAgICAgICAgZm9ybWF0OiAnYWpheCdcclxuICAgICAgICB9KTtcclxuICAgICAgICAkLmdldEpTT04odXJsLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICB2YXIgbXNnID0gJyc7XHJcbiAgICAgICAgICAgIGlmICghZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgbXNnID0gUmVzb3VyY2VzLkNPVVBPTl9JTlZBTElEO1xyXG4gICAgICAgICAgICAgICAgY291cG9uTWVudGhvZHMuc2V0Q291cG9uRXJyb3IobXNnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZGF0YS5yZWRlbXB0aW9uLnJlZGVtcHRpb25FcnJvck1zZykge1xyXG4gICAgICAgICAgICAgICAgY291cG9uTWVudGhvZHMuc2V0Q291cG9uRXJyb3IoZGF0YS5yZWRlbXB0aW9uLnJlZGVtcHRpb25FcnJvck1zZyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFkYXRhLnJlZGVtcHRpb24pIHtcclxuICAgICAgICAgICAgICAgIG1zZyA9IFJlc291cmNlcy5DT1VQT05fSU5WQUxJRDtcclxuICAgICAgICAgICAgICAgIGNvdXBvbk1lbnRob2RzLnNldENvdXBvbkVycm9yKG1zZyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gZW1wdHkgaW5wdXQgZmllbGQgYW5kIGRpc3BsYXkgcmVkZW1wdGlvbiBpbiBVSVxyXG4gICAgICAgICAgICBqUXVlcnkoJ2lucHV0W25hbWUkPVxcJ19iaWxsaW5nX2NvdXBvbkNvZGVcXCddJykudmFsKCcnKTtcclxuICAgICAgICAgICAgalF1ZXJ5KCdpbnB1dFtuYW1lJD1cXCdfYmlsbGluZ19jb3Vwb25Db2RlXFwnXScpLnJlbW92ZUNsYXNzKCdlcnJvcmNsaWVudCcpO1xyXG4gICAgICAgICAgICBjb3Vwb25NZW50aG9kcy5zZXRDb3Vwb25SZWRlbXB0aW9uSW5mbyhkYXRhLnJlZGVtcHRpb24pO1xyXG4gICAgICAgICAgICAvLyB1cGRhdGUgZ2lmdCBjYXJkIHJlZGVtcHRpb25zIGFzIGFtb3VudHMgbWlnaHQgaGF2ZSBjaGFuZ2VkIGFmdGVyIGNvdXBvblxyXG4gICAgICAgICAgICBqUXVlcnkuZWFjaChkYXRhLnJlZGVtcHRpb24uZ2NSZWRlbXB0aW9ucywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgY291cG9uTWVudGhvZHMuc2V0R2lmdENlcnRSZWRlbXB0aW9uSW5mbyh0aGlzLmdpZnRDZXJ0aWZpY2F0ZUlELCB0aGlzLmFtb3VudCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB2YXIgY291bnRyeUNvZGUgPSAkKCdpbnB1dFtuYW1lJD1cXCdfYWRkcmVzc0ZpZWxkc19jb3VudHJ5XFwnXScpLnZhbCgpO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGNvdW50cnlDb2RlID09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICBjb3VudHJ5Q29kZSA9ICdVUyc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvdXBvbk1lbnRob2RzLnVwZGF0ZVN1bW1hcnkoKTtcclxuICAgICAgICAgICAgY291cG9uTWVudGhvZHMudXBkYXRlY2FydHN1bW1hcnkoKTtcclxuICAgICAgICAgICAgY291cG9uTWVudGhvZHMudXBkYXRlUGF5bWVudE1ldGhvZHMoY291bnRyeUNvZGUpO1xyXG4gICAgICAgICAgICBjb3Vwb25NZW50aG9kcy5vcmRlcnRvdGFscygpO1xyXG4gICAgICAgICAgICB1aWV2ZW50cy5zeW5jY2hlY2tvdXRIKCk7XHJcbiAgICAgICAgICAgIC8vIERldGVybWluZSBpZiBhIGJvbnVzLXByb2R1Y3QgcHJvbW90aW9uIHdhcyB0cmlnZ2VyZWQgYnkgdGhlIGNvdXBvbi5cclxuICAgICAgICAgICAgLy8gSWYgc28sIGRpc3BsYXkgYSBwb3B1cCBhbGVydCBhbmQgZ2l2ZSB0aGUgY3VzdG9tZXIgYSBjaGFuY2UgdG9cclxuICAgICAgICAgICAgLy8gcmV0dXJuIHRvIHRoZSBjYXJ0IGFuZCBzZWxlY3QgdGhlIGJvbnVzIHByb2R1Y3QuXHJcbiAgICAgICAgICAgIGlmIChkYXRhLnJlZGVtcHRpb24uYm9udXNQcm9tb3Rpb25BcHBsaWVkKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcuYm9udXNkaXNjb3VudGNvbnRhaW5lciAuYm9udXNwcm9kdWN0cHJvbW8nKS5hcHBlbmQoZGF0YS5yZWRlbXB0aW9uLmJvbnVzUHJvbW90aW9uQ2FsbG91dCk7XHJcbiAgICAgICAgICAgICAgICAkKCcuYm9udXNkaXNjb3VudGNvbnRhaW5lciBkaXYuZGV0YWlscycpLmh0bWwoZGF0YS5yZWRlbXB0aW9uLmJvbnVzUHJvbW90aW9uRGV0YWlscyk7XHJcblxyXG4gICAgICAgICAgICAgICAgJCgnLmJvbnVzZGlzY291bnRjb250YWluZXInKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAkKCcuYm9udXNkaXNjb3VudGNvbnRhaW5lcicpLmRpYWxvZyh7XHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFJlc291cmNlcy5CT05VU19QUk9EVUNULFxyXG4gICAgICAgICAgICAgICAgICAgIGJnaWZyYW1lOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGF1dG9PcGVuOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBtb2RhbDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDI1MCxcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogNTAwLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogZmFsc2VcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgalF1ZXJ5KCcuYm9udXNkaXNjb3VudGNvbnRhaW5lcicpLmRpYWxvZygnb3BlbicpO1xyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgalF1ZXJ5KCcuc2VsZWN0Qm9udXNCdG4nKS51bmJpbmQoJ2NsaWNrJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgalF1ZXJ5KCcuYm9udXNkaXNjb3VudGNvbnRhaW5lcicpLmRpYWxvZygnY2xvc2UnKTtcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uLmhyZWYgPSAnJHtVUkxVdGlscy5odHRwcyhcXCdDYXJ0LVNob3dcXCcpfSc7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgalF1ZXJ5KCcubm9Cb251c0J0bicpLnVuYmluZCgnY2xpY2snKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBqUXVlcnkoJy5ib251c2Rpc2NvdW50Y29udGFpbmVyJykuZGlhbG9nKCdjbG9zZScpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIHRyaWdnZXIgZXZlbnRzIG9uIGVudGVyXHJcbiAgICAkKCdib2R5Jykub24oJ2tleWRvd24nLCAnaW5wdXRbbmFtZSQ9XCJfY291cG9uQ29kZVwiXScsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgaWYgKGUud2hpY2ggPT09IDEzKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgJCgnI2FkZC1jb3Vwb24nKS5jbGljaygpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgJCgnYm9keScpLm9uKCdrZXlkb3duJywgJ2lucHV0W25hbWUkPVwiX2dpZnRDZXJ0Q29kZVwiXScsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgaWYgKGUud2hpY2ggPT09IDEzKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgJCgnI2FkZC1naWZ0Y2VydCcpLmNsaWNrKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnLnRyeXBheXBhbCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCcuY29udGludWVjaGVja291dC1wYXlwYWxsb2dpbicpLnRyaWdnZXIoJ2NsaWNrJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoJCgnLnB0X2NoZWNrb3V0IC5wYXltZW50Zm9ybS5wYXlwYWwgLmVycm9yLXBheXBhbC1oZWFkaW5nJykubGVuZ3RoID4gMCB8fCAkKCcucHRfY2hlY2tvdXQgLnBheW1lbnRmb3JtLnBheXBhbCAucGF5cGFsbXNnLnN1Y2Nlc3MtcGF5cGFsJykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICQoJ2JvZHksIGh0bWwnKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgc2Nyb2xsVG9wOiAkKCcjcGF5bWVudG1ldGhvZGZvcm0gbGVnZW5kJykub2Zmc2V0KCkudG9wXHJcbiAgICAgICAgfSwgNjAwKTtcclxuICAgIH1cclxuXHJcbiAgICAkKCcuc3dpdGNodG9jcmVkaXQnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnLnBheW1lbnRtZXRob2RzX2NvbnQgLnRvZ2dsZScpLmVxKDApLmZpbmQoJy5pbnB1dC1yYWRpbycpLnRyaWdnZXIoJ2NsaWNrJyk7XHJcbiAgICB9KTtcclxuICAgIC8vUFJFVkFJTCAtIGluaXQgQWRkcmVzcyBWYWxpZGF0aW9uXHJcbiAgICByZXF1aXJlKCcuLi8uLi9hZGRyZXNzdmFsaWRhdGlvbicpLmluaXQoKTtcclxuXHJcbiAgICB1dGlsLmNhcmR0eXBlLmluaXQoKTtcclxuICAgICQoJ2JvZHknKS5vbignY2xpY2snLCAnLmNvdXBvbmNvZGUgLmxhYmVsJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICgkKCcucHJvbW8taW5wdXQtYnV0dG9uJykuaXMoJzp2aXNpYmxlJykgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAkKCcucHJvbW8taW5wdXQtYnV0dG9uJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5jb3Vwb25jb2RlJykuZmluZCgnc3Bhbi5lcnJvcicpLmhpZGUoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkKCcucHJvbW8taW5wdXQtYnV0dG9uJykuc2hvdygpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5jb3Vwb25jb2RlJykuZmluZCgnc3Bhbi5lcnJvcicpLnNob3coKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xyXG4gICAgfSk7XHJcbiAgICBpZiAoJCgnLmd1ZXN0YmlsbGluZ2Zvcm0gLnBhc3N3b3JkIC5lcnJvcm1lc3NhZ2UnKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgJCgnLmd1ZXN0YmlsbGluZ2Zvcm0gLnBhc3N3b3JkIC5lcnJvcm1lc3NhZ2UnKS5yZW1vdmUoKTtcclxuICAgIH1cclxuXHJcbiAgICAkKCcuZ3Vlc3RiaWxsaW5nZm9ybSAuYmlsbGluZy1jb25wYXNzd29yZCcpLmJsdXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBiaWxsaW5nUGFzID0gJCgnLmd1ZXN0YmlsbGluZ2Zvcm0gLmJpbGxpbmctcGFzc3dvcmQnKS52YWwoKTtcclxuICAgICAgICB2YXIgYmlsbGluZ0NvbnBhcyA9ICQoJy5ndWVzdGJpbGxpbmdmb3JtIC5iaWxsaW5nLWNvbnBhc3N3b3JkJykudmFsKCk7XHJcbiAgICAgICAgJCgnLmd1ZXN0YmlsbGluZ2Zvcm0gLnBhc3N3b3JkIC5lcnJvcm1lc3NhZ2UnKS5yZW1vdmUoKTtcclxuICAgICAgICBpZiAoYmlsbGluZ1Bhcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGlmIChiaWxsaW5nQ29ucGFzLmxlbmd0aCA8IDUpIHtcclxuICAgICAgICAgICAgICAgICQoJy5ndWVzdGJpbGxpbmdmb3JtIC5iaWxsaW5nLWNvbnBhc3N3b3JkJykuYWRkQ2xhc3MoJ2Vycm9yY2xpZW50Jyk7XHJcbiAgICAgICAgICAgICAgICAkKCcuYmlsbGluZ2NvbmZwYXNzd29yZCcpLnRleHQoUmVzb3VyY2VzLmJpbGxpbmdwYXNzd29yZGNvbmZpcm1fbWluKS5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICAgICAgLy8kKCcuY29udGludWVjaGVja291dGJ1dHRvbiAuY29udGludWVjaGVja291dCcpLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYmlsbGluZ1BhcyAhPSBiaWxsaW5nQ29ucGFzKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcuZ3Vlc3RiaWxsaW5nZm9ybSAuYmlsbGluZy1jb25wYXNzd29yZCcpLmFkZENsYXNzKCdlcnJvcmNsaWVudCcpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmJpbGxpbmdjb25mcGFzc3dvcmQnKS50ZXh0KFJlc291cmNlcy5iaWxsaW5ncGFzc3dvcmRjb25maXJtKS5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICAgICAgLy8kKCcuY29udGludWVjaGVja291dGJ1dHRvbiAuY29udGludWVjaGVja291dCcpLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkKCcuZ3Vlc3RiaWxsaW5nZm9ybSAuYmlsbGluZy1jb25wYXNzd29yZCcpLnJlbW92ZUNsYXNzKCdlcnJvcmNsaWVudCcpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmJpbGxpbmdjb25mcGFzc3dvcmQnKS50ZXh0KFJlc291cmNlcy5iaWxsaW5ncGFzc3dvcmRjb25maXJtKS5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCEkKCdpbnB1dFtuYW1lJD1cIl9jcmVkaXRDYXJkX293bmVyXCJdJykuaGFzQ2xhc3MoJ2Vycm9yY2xpZW50JykgJiYgISQoJ2lucHV0W25hbWUkPVwiX2NyZWRpdENhcmRfbnVtYmVyXCJdJykuaGFzQ2xhc3MoJ2Vycm9yY2xpZW50JykgJiYgISQoJ2lucHV0W25hbWUkPVwiX2NyZWRpdENhcmRfY3ZuXCJdJykuaGFzQ2xhc3MoJ2Vycm9yY2xpZW50JykgJiYgISQoJ3NlbGVjdFtuYW1lJD1cInBheW1lbnRNZXRob2RzX2NyZWRpdENhcmRfeWVhclwiXScpLmhhc0NsYXNzKCdlcnJvcmNsaWVudCcpICYmICEkKCdzZWxlY3RbbmFtZSQ9XCJwYXltZW50TWV0aG9kc19jcmVkaXRDYXJkX21vbnRoXCJdJykuaGFzQ2xhc3MoJ2Vycm9yY2xpZW50JykgJiYgJCgnaW5wdXRbbmFtZSQ9XCJfY3JlZGl0Q2FyZF9vd25lclwiXScpLnZhbCgpICE9ICcnICYmICQoJ2lucHV0W25hbWUkPVwiX2NyZWRpdENhcmRfbnVtYmVyXCJdJykudmFsKCkgIT0gJycgJiYgJCgnaW5wdXRbbmFtZSQ9XCJfY3JlZGl0Q2FyZF9jdm5cIl0nKS52YWwoKSAhPSAnJyAmJiAkKCdzZWxlY3RbbmFtZSQ9XCJwYXltZW50TWV0aG9kc19jcmVkaXRDYXJkX3llYXJcIl0nKS52YWwoKSAhPSAnJyAmJiAkKCdzZWxlY3RbbmFtZSQ9XCJwYXltZW50TWV0aG9kc19jcmVkaXRDYXJkX21vbnRoXCJdJykudmFsKCkgIT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyQoJy5jb250aW51ZWNoZWNrb3V0YnV0dG9uIC5jb250aW51ZWNoZWNrb3V0JykucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICQoJy5ndWVzdGJpbGxpbmdmb3JtIC5iaWxsaW5nLWNvbnBhc3N3b3JkJykucmVtb3ZlQ2xhc3MoJ2Vycm9yY2xpZW50Jyk7XHJcbiAgICAgICAgICAgICQoJy5iaWxsaW5nY29uZnBhc3N3b3JkJykudGV4dChSZXNvdXJjZXMuYmlsbGluZ3Bhc3N3b3JkY29uZmlybSkuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgaWYgKCEkKCdpbnB1dFtuYW1lJD1cIl9jcmVkaXRDYXJkX293bmVyXCJdJykuaGFzQ2xhc3MoJ2Vycm9yY2xpZW50JykgJiYgISQoJ2lucHV0W25hbWUkPVwiX2NyZWRpdENhcmRfbnVtYmVyXCJdJykuaGFzQ2xhc3MoJ2Vycm9yY2xpZW50JykgJiYgISQoJ2lucHV0W25hbWUkPVwiX2NyZWRpdENhcmRfY3ZuXCJdJykuaGFzQ2xhc3MoJ2Vycm9yY2xpZW50JykgJiYgISQoJ3NlbGVjdFtuYW1lJD1cInBheW1lbnRNZXRob2RzX2NyZWRpdENhcmRfeWVhclwiXScpLmhhc0NsYXNzKCdlcnJvcmNsaWVudCcpICYmICEkKCdzZWxlY3RbbmFtZSQ9XCJwYXltZW50TWV0aG9kc19jcmVkaXRDYXJkX21vbnRoXCJdJykuaGFzQ2xhc3MoJ2Vycm9yY2xpZW50JykgJiYgJCgnaW5wdXRbbmFtZSQ9XCJfY3JlZGl0Q2FyZF9vd25lclwiXScpLnZhbCgpICE9ICcnICYmICQoJ2lucHV0W25hbWUkPVwiX2NyZWRpdENhcmRfbnVtYmVyXCJdJykudmFsKCkgIT0gJycgJiYgJCgnaW5wdXRbbmFtZSQ9XCJfY3JlZGl0Q2FyZF9jdm5cIl0nKS52YWwoKSAhPSAnJyAmJiAkKCdzZWxlY3RbbmFtZSQ9XCJwYXltZW50TWV0aG9kc19jcmVkaXRDYXJkX3llYXJcIl0nKS52YWwoKSAhPSAnJyAmJiAkKCdzZWxlY3RbbmFtZSQ9XCJwYXltZW50TWV0aG9kc19jcmVkaXRDYXJkX21vbnRoXCJdJykudmFsKCkgIT0gJycpIHtcclxuICAgICAgICAgICAgICAgIC8vJCgnLmNvbnRpbnVlY2hlY2tvdXRidXR0b24gLmNvbnRpbnVlY2hlY2tvdXQnKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAkKCcuZ3Vlc3RiaWxsaW5nZm9ybSAuYmlsbGluZy1wYXNzd29yZCcpLmJpbmQoJ2JsdXInLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGJpbGxpbmdQYXMgPSAkKCcuZ3Vlc3RiaWxsaW5nZm9ybSAuYmlsbGluZy1wYXNzd29yZCcpLnZhbCgpO1xyXG4gICAgICAgIHZhciBiaWxsaW5nQ29ucGFzID0gJCgnLmd1ZXN0YmlsbGluZ2Zvcm0gLmJpbGxpbmctY29ucGFzc3dvcmQnKS52YWwoKTtcclxuICAgICAgICAvLyQoJy5jb250aW51ZWNoZWNrb3V0YnV0dG9uIC5jb250aW51ZWNoZWNrb3V0JykuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcclxuXHJcbiAgICAgICAgaWYgKCQodGhpcykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAkKCcuZ3Vlc3RiaWxsaW5nZm9ybSAuYmlsbGluZy1jb25wYXNzd29yZCcpLmFkZENsYXNzKCdyZXF1aXJlZCcpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICQoJy5ndWVzdGJpbGxpbmdmb3JtIC5iaWxsaW5nLWNvbnBhc3N3b3JkJykucmVtb3ZlQ2xhc3MoJ3JlcXVpcmVkJyk7XHJcbiAgICAgICAgICAgICQoJy5ndWVzdGJpbGxpbmdmb3JtIC5iaWxsaW5nLWNvbnBhc3N3b3JkJykucmVtb3ZlQ2xhc3MoJ2Vycm9yY2xpZW50Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChiaWxsaW5nUGFzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgaWYgKGJpbGxpbmdQYXMubGVuZ3RoIDwgNSkge1xyXG4gICAgICAgICAgICAgICAgJCgnLmd1ZXN0YmlsbGluZ2Zvcm0gLmJpbGxpbmctcGFzc3dvcmQnKS5hZGRDbGFzcygnZXJyb3JjbGllbnQnKTtcclxuICAgICAgICAgICAgICAgICQoJy5iaWxsaW5ncGFzc3dvcmQnKS50ZXh0KFJlc291cmNlcy5iaWxsaW5ncGFzc3dvcmRjb25maXJtX21pbikucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgICAgIC8vJCgnLmNvbnRpbnVlY2hlY2tvdXRidXR0b24gLmNvbnRpbnVlY2hlY2tvdXQnKS5hdHRyKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJCgnLmd1ZXN0YmlsbGluZ2Zvcm0gLmJpbGxpbmctcGFzc3dvcmQnKS5yZW1vdmVDbGFzcygnZXJyb3JjbGllbnQnKTtcclxuICAgICAgICAgICAgICAgICQoJy5iaWxsaW5ncGFzc3dvcmQnKS5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJCgnLmd1ZXN0YmlsbGluZ2Zvcm0gLmJpbGxpbmctcGFzc3dvcmQnKS5yZW1vdmVDbGFzcygnZXJyb3JjbGllbnQnKTtcclxuICAgICAgICAgICAgJCgnLmJpbGxpbmdwYXNzd29yZCcpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoKGJpbGxpbmdQYXMgPT0gYmlsbGluZ0NvbnBhcykgJiYgKGJpbGxpbmdQYXMubGVuZ3RoID49IDUpKSB7XHJcbiAgICAgICAgICAgIGlmICghJCgnaW5wdXRbbmFtZSQ9XCJfY3JlZGl0Q2FyZF9vd25lclwiXScpLmhhc0NsYXNzKCdlcnJvcmNsaWVudCcpICYmICEkKCdpbnB1dFtuYW1lJD1cIl9jcmVkaXRDYXJkX251bWJlclwiXScpLmhhc0NsYXNzKCdlcnJvcmNsaWVudCcpICYmICEkKCdpbnB1dFtuYW1lJD1cIl9jcmVkaXRDYXJkX2N2blwiXScpLmhhc0NsYXNzKCdlcnJvcmNsaWVudCcpICYmICEkKCdzZWxlY3RbbmFtZSQ9XCJwYXltZW50TWV0aG9kc19jcmVkaXRDYXJkX3llYXJcIl0nKS5oYXNDbGFzcygnZXJyb3JjbGllbnQnKSAmJiAhJCgnc2VsZWN0W25hbWUkPVwicGF5bWVudE1ldGhvZHNfY3JlZGl0Q2FyZF9tb250aFwiXScpLmhhc0NsYXNzKCdlcnJvcmNsaWVudCcpICYmICQoJ2lucHV0W25hbWUkPVwiX2NyZWRpdENhcmRfb3duZXJcIl0nKS52YWwoKSAhPSAnJyAmJiAkKCdpbnB1dFtuYW1lJD1cIl9jcmVkaXRDYXJkX251bWJlclwiXScpLnZhbCgpICE9ICcnICYmICQoJ2lucHV0W25hbWUkPVwiX2NyZWRpdENhcmRfY3ZuXCJdJykudmFsKCkgIT0gJycgJiYgJCgnc2VsZWN0W25hbWUkPVwicGF5bWVudE1ldGhvZHNfY3JlZGl0Q2FyZF95ZWFyXCJdJykudmFsKCkgIT0gJycgJiYgJCgnc2VsZWN0W25hbWUkPVwicGF5bWVudE1ldGhvZHNfY3JlZGl0Q2FyZF9tb250aFwiXScpLnZhbCgpICE9ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAvLyQoJy5jb250aW51ZWNoZWNrb3V0YnV0dG9uIC5jb250aW51ZWNoZWNrb3V0JykucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGlmICgkKCcuZXhwaXJhdGlvbmRhdGUgLmN1c3RvbS1zZWxlY3QgLmZpZWxkLXdyYXBwZXIgc3Bhbi5lcnJvcm1lc3NhZ2UnKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgJCgnLmV4cGlyYXRpb25kYXRlIC5jdXN0b20tc2VsZWN0IHNwYW4uZXJyb3JtZXNzYWdlJykuaGlkZSgpO1xyXG4gICAgICAgICQoJy5leHBpcmF0aW9uZGF0ZS5lcnJvcicpLnNob3coKTtcclxuICAgIH1cclxuICAgICQoJy5jaGVja291dGJpbGxpbmcgLmNvbnRpbnVlLWNoZWNrb3V0LWJ1dHRvbiAuY29udGludWVjaGVja291dCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgJGNoZWNrb3V0QnV0dG9uID0gJCgnLmNvbnRpbnVlY2hlY2tvdXQucGxhY2Utb3JkZXItYnRuJyk7XHJcbiAgICAgICAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL1RyaWRlbnRcXC83XFwuLykpIHtcclxuICAgICAgICAgICAgJCgnLmNvbnRpbnVlY2hlY2tvdXQucGxhY2Utb3JkZXItYnRuJykuYXBwZW5kKCc8ZGl2IGNsYXNzPVwibG9hZGVyXCI+PGRpdiBjbGFzcz1cImxvYWRlci1pbmRpY2F0b3JcIj48L2Rpdj48ZGl2IGNsYXNzPVwibG9hZGVyLWJnXCI+PC9kaXY+PC9kaXY+Jyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcHJvZ3Jlc3Muc2hvdygkY2hlY2tvdXRCdXR0b24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZXJyb3Jjb3VudCA9IDA7XHJcbiAgICAgICAgaWYgKCEoJCgnI1BheW1lbnRNZXRob2RfQ1JFRElUX0NBUkQnKS5pcygnOnZpc2libGUnKSkpIHtcclxuICAgICAgICAgICAgJCgnLnBheW1lbnRmb3JtIC50ZXh0aW5wdXQsIC5wYXltZW50Zm9ybSBzZWxlY3QnKS5yZW1vdmVDbGFzcygncmVxdWlyZWQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFqUXVlcnkoJ2Zvcm1baWQkPVwiX2JpbGxpbmdcIl0nKS52YWxpZCgpKSB7XHJcbiAgICAgICAgICAgIHByb2dyZXNzLmhpZGUoKTtcclxuICAgICAgICAgICAgJChmdW5jdGlvbiAoKXtcclxuICAgICAgICAgICAgICAgIGlmIChuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9UcmlkZW50XFwvN1xcLi8pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmNvbnRpbnVlY2hlY2tvdXQucGxhY2Utb3JkZXItYnRuIC5sb2FkZXInKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgalF1ZXJ5KCcuc3RhdGUtYmxrIHNlbGVjdCcpLnRyaWdnZXIoJ2JsdXInKTtcclxuICAgICAgICAgICAgaWYgKGpRdWVyeSgnLmJpbGxpbmctYWRkcmVzcy1maWVsZHMnKS5oYXNDbGFzcygnaGlkZScpKSB7XHJcbiAgICAgICAgICAgICAgICAkKCdzZWxlY3RbbmFtZSQ9YmlsbGluZ19hZGRyZXNzTGlzdF0nKS52YWwoJycpO1xyXG4gICAgICAgICAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XCJiaWxsaW5nQWRkcmVzc19zZWxlY3RlZGJpbGxpbmdhZGRcIl0nKS52YWwoJycpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmN1c3RvbS1zZWxlY3QnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0VmFsID0gJCh0aGlzKS5maW5kKCc6c2VsZWN0ZWQnKS50ZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuc2VsZWN0b3JPdXQnKS50ZXh0KHNlbGVjdFZhbCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGpRdWVyeSgnLmJpbGxpbmctYWRkcmVzcy1maWVsZHMnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICAgICAgalF1ZXJ5KCcuc2VsZWN0ZWQtYmlsbGluZy1hZGRyZXNzICwgLnNlbGVjdGVkLXNoaXBwaW5nLWFkZHJlc3MnKS5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICAgICAgdWlldmVudHMuY3VzdG9tRmllbGRzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZXJyb3Jjb3VudCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoJCgnI1BheW1lbnRNZXRob2RfQ1JFRElUX0NBUkQnKS5pcygnOnZpc2libGUnKSkge1xyXG4gICAgICAgICAgICBpZiAoISQoJ2Zvcm1baWQkPVwiZHdmcm1fYmlsbGluZ1wiXScpLnZhbGlkKCkpIHtcclxuICAgICAgICAgICAgICAgIHByb2dyZXNzLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICQoJy5leHBpcmF0aW9uZGF0ZSBzZWxlY3QnKS50cmlnZ2VyKCdibHVyJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCQoJy52aXAtdGVybXMgLmN1c3RvbS1saW5rJykuaXMoJzp2aXNpYmxlJykgJiYgISQoJ2lucHV0W25hbWUkPVwiX2lzdmlwXCJdJykuaXMoJzpjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJCgnLnZpcC10ZXJtcyAuY3VzdG9tLWNoZWNrYm94IC52aXAtbWVzc2FnZSAjbWVzc2FnZScpLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy52aXAtdGVybXMgLmN1c3RvbS1jaGVja2JveCAudmlwLW1lc3NhZ2UnKS5wcmVwZW5kKCc8c3BhbiBpZD1cIm1lc3NhZ2VcIiBjbGFzcz1cImVycm9yIHZpcGNoZWNrbWVzc2FnZVwiPlBsZWFzZSBjaGVjayB0aGUgYm94IHRvIGNvbmZpcm0geW91IGhhdmUgcmVhZCBhbmQgYWdyZWUgdG8gdGhlIFJhcGFsYSBWSVAgVGVybXMgJiBDb25kaXRpb25zLjwvc3Bhbj4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnNpbmdsZXNoaXBwaW5nX2Vycm9yJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAkKCcudmlwLXRlcm1zIC5jdXN0b20tY2hlY2tib3ggLmN1c3RvbS1saW5rJykuYWRkQ2xhc3MoJ2Vycm9yJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCQoJy5rbmlmZSAuY3VzdG9tLWxpbmsuYWdlY2hlY2stbGluaycpLmlzKCc6dmlzaWJsZScpICYmICEkKCdpbnB1dFtuYW1lJD1cImFnZWNoZWNrX2lzY2hlY2tcIl0nKS5pcygnOmNoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkKCcuYWRkcmVzc29wdGlvbnMua25pZmUgLmFnZWNoZWNrX21lc3NhZ2UgI21lc3NhZ2UnKS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuYWRkcmVzc29wdGlvbnMua25pZmUgLmFnZWNoZWNrX21lc3NhZ2UnKS5wcmVwZW5kKCc8c3BhbiBpZD1cIm1lc3NhZ2VcIiBjbGFzcz1cImVycm9yIGFnZWNoZWNrbWVzc2FnZVwiPlBsZWFzZSBWZXJpZnkgeW91IGFyZSAxOCB5ZWFycyBvZiBhZ2Ugb3Igb2xkZXIsIG9yIHJlbW92ZSBhbGwga25pdmVzIGZyb20geW91ciBjYXJ0Ljwvc3Bhbj4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnNpbmdsZXNoaXBwaW5nX2Vycm9yJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAkKCcuYWRkcmVzc29wdGlvbnMua25pZmUgPiAuY3VzdG9tLWNoZWNrYm94IC5jdXN0b20tbGluaycpLmFkZENsYXNzKCdlcnJvcicpO1xyXG4gICAgICAgICAgICAgICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVycm9yY291bnQrKztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoJCgnLnZpcC10ZXJtcyAuY3VzdG9tLWxpbmsnKS5pcygnOnZpc2libGUnKSAmJiAhJCgnaW5wdXRbbmFtZSQ9XCJfaXN2aXBcIl0nKS5pcygnOmNoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkKCcudmlwLXRlcm1zIC5jdXN0b20tY2hlY2tib3ggLnZpcC1tZXNzYWdlICNtZXNzYWdlJykubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnZpcC10ZXJtcyAuY3VzdG9tLWNoZWNrYm94IC52aXAtbWVzc2FnZScpLnByZXBlbmQoJzxzcGFuIGlkPVwibWVzc2FnZVwiIGNsYXNzPVwiZXJyb3IgdmlwY2hlY2ttZXNzYWdlXCI+UGxlYXNlIGNoZWNrIHRoZSBib3ggdG8gY29uZmlybSB5b3UgaGF2ZSByZWFkIGFuZCBhZ3JlZSB0byB0aGUgUmFwYWxhIFZJUCBUZXJtcyAmIENvbmRpdGlvbnMuPC9zcGFuPicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuc2luZ2xlc2hpcHBpbmdfZXJyb3InKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICQoJy52aXAtdGVybXMgLmN1c3RvbS1jaGVja2JveCAuY3VzdG9tLWxpbmsnKS5hZGRDbGFzcygnZXJyb3InKTtcclxuICAgICAgICAgICAgICAgICAgICB1aWV2ZW50cy5zeW5jY2hlY2tvdXRIKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3Jjb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCQoJy5rbmlmZSAuY3VzdG9tLWxpbmsuYWdlY2hlY2stbGluaycpLmlzKCc6dmlzaWJsZScpICYmICEkKCdpbnB1dFtuYW1lJD1cImFnZWNoZWNrX2lzY2hlY2tcIl0nKS5pcygnOmNoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkKCcuYWRkcmVzc29wdGlvbnMua25pZmUgLmFnZWNoZWNrX21lc3NhZ2UgI21lc3NhZ2UnKS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuYWRkcmVzc29wdGlvbnMua25pZmUgLmFnZWNoZWNrX21lc3NhZ2UnKS5wcmVwZW5kKCc8c3BhbiBpZD1cIm1lc3NhZ2VcIiBjbGFzcz1cImVycm9yIGFnZWNoZWNrbWVzc2FnZVwiPlBsZWFzZSBWZXJpZnkgeW91IGFyZSAxOCB5ZWFycyBvZiBhZ2Ugb3Igb2xkZXIsIG9yIHJlbW92ZSBhbGwga25pdmVzIGZyb20geW91ciBjYXJ0Ljwvc3Bhbj4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnNpbmdsZXNoaXBwaW5nX2Vycm9yJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAkKCcuYWRkcmVzc29wdGlvbnMua25pZmUgPiAuY3VzdG9tLWNoZWNrYm94IC5jdXN0b20tbGluaycpLmFkZENsYXNzKCdlcnJvcicpO1xyXG4gICAgICAgICAgICAgICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcmNvdW50Kys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoJCgnLnZpcC10ZXJtcyAuY3VzdG9tLWxpbmsnKS5pcygnOnZpc2libGUnKSAmJiAhJCgnaW5wdXRbbmFtZSQ9XCJfaXN2aXBcIl0nKS5pcygnOmNoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCQoJy52aXAtdGVybXMgLmN1c3RvbS1jaGVja2JveCAudmlwLW1lc3NhZ2UgI21lc3NhZ2UnKS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy52aXAtdGVybXMgLmN1c3RvbS1jaGVja2JveCAudmlwLW1lc3NhZ2UnKS5wcmVwZW5kKCc8c3BhbiBpZD1cIm1lc3NhZ2VcIiBjbGFzcz1cImVycm9yIHZpcGNoZWNrbWVzc2FnZVwiPlBsZWFzZSBjaGVjayB0aGUgYm94IHRvIGNvbmZpcm0geW91IGhhdmUgcmVhZCBhbmQgYWdyZWUgdG8gdGhlIFJhcGFsYSBWSVAgVGVybXMgJiBDb25kaXRpb25zLjwvc3Bhbj4nKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuc2luZ2xlc2hpcHBpbmdfZXJyb3InKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkKCcudmlwLXRlcm1zIC5jdXN0b20tY2hlY2tib3ggLmN1c3RvbS1saW5rJykuYWRkQ2xhc3MoJ2Vycm9yJyk7XHJcbiAgICAgICAgICAgICAgICB1aWV2ZW50cy5zeW5jY2hlY2tvdXRIKCk7XHJcbiAgICAgICAgICAgICAgICBlcnJvcmNvdW50Kys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCQoJy5rbmlmZSAuY3VzdG9tLWxpbmsuYWdlY2hlY2stbGluaycpLmlzKCc6dmlzaWJsZScpICYmICEkKCdpbnB1dFtuYW1lJD1cImFnZWNoZWNrX2lzY2hlY2tcIl0nKS5pcygnOmNoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCQoJy5hZGRyZXNzb3B0aW9ucy5rbmlmZSAuYWdlY2hlY2tfbWVzc2FnZSAjbWVzc2FnZScpLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmFkZHJlc3NvcHRpb25zLmtuaWZlICAuYWdlY2hlY2tfbWVzc2FnZScpLnByZXBlbmQoJzxzcGFuIGlkPVwibWVzc2FnZVwiIGNsYXNzPVwiZXJyb3IgYWdlY2hlY2ttZXNzYWdlXCI+UGxlYXNlIFZlcmlmeSB5b3UgYXJlIDE4IHllYXJzIG9mIGFnZSBvciBvbGRlciwgb3IgcmVtb3ZlIGFsbCBrbml2ZXMgZnJvbSB5b3VyIGNhcnQuPC9zcGFuPicpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5zaW5nbGVzaGlwcGluZ19lcnJvcicpLnNob3coKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICQoJy5hZGRyZXNzb3B0aW9ucy5rbmlmZSAgPiAuY3VzdG9tLWNoZWNrYm94IC5jdXN0b20tbGluaycpLmFkZENsYXNzKCdlcnJvcicpO1xyXG4gICAgICAgICAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xyXG4gICAgICAgICAgICAgICAgZXJyb3Jjb3VudCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8qICAgICBpZighJCgnaW5wdXQucGF5cGFscHJvY2Vzc2VkJykudmFsKCkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAkKCcucGF5bWVudGZvcm0ucGF5cGFsIC5wYXlwYWxtc2cnKS5hZGRDbGFzcygnZXJyb3InKTtcclxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgfSovXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChlcnJvcmNvdW50ID4gMCkge1xyXG4gICAgICAgICAgICBwcm9ncmVzcy5oaWRlKCk7XHJcbiAgICAgICAgICAgICQoJy5zaW5nbGVzaGlwcGluZ19lcnJvcicpLnNob3coKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoJCgnLmJpbGxpbmctYWRkcmVzcy1maWVsZHMnKS5pcygnOnZpc2libGUnKSkge1xyXG4gICAgICAgICAgICAkKCcuYmlsbGluZy1hZGRyZXNzLWZpZWxkcyAuc3RhdGUtYmxrIHNlbGVjdCcpLmJsdXIoKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIC8vSklSQSBQUkVWLTM4IDogQmlsbGluZyBwYWdlX0NyZWRpdCBDYXJkIFNlY3Rpb246IENWViBudW1iZXIgc2hvdWxkIG5vdCBwcmUtcG9wdWxhdGUuXHJcbiAgICAvKmlmICgkKCcuYnlwYXNzREFWJykubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgJCgnLnNwYy1iaWxsaW5nIC5mb3JtLXJvdy5jdm4gaW5wdXQnKS52YWwoJycpO1xyXG4gICAgfSovXHJcbiAgICBpZiAoJCgnLmludmFsaWRDcmVkaXRjYXJkJykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIC8vJCgnLnNpbmdsZXNoaXBwaW5nX2Vycm9yJykuc2hvdygpO1xyXG4gICAgICAgICQoJy5jYXJkbnVtYmVyIGlucHV0JykuYWRkQ2xhc3MoJ2Vycm9yY2xpZW50Jyk7XHJcbiAgICAgICAgJCgnLmNhcmRudW1iZXIgLmxhYmVsdGV4dCcpLmFkZENsYXNzKCdlcnJvcicpO1xyXG4gICAgICAgICQoJzxzcGFuIGNsYXNzPVwiaW52YWxpZGNyZWRpdCBlcnJvclwiPi0gSW52YWxpZCBDcmVkaXQgQ2FyZCBOdW1iZXI8L3NwYW4+JykuYXBwZW5kVG8oJy5jYXJkbnVtYmVyIC5maWVsZC13cmFwcGVyJyk7XHJcbiAgICAgICAgLy8kKCcuc2luZ2xlc2hpcHBpbmdfZXJyb3InKS5zaG93KCk7XHJcbiAgICAgICAgJCgnLmNhcmRudW1iZXIgLmVycm9ybWVzc2FnZScpLmNzcygnZGlzcGxheScsICdub25lJyk7XHJcbiAgICB9XHJcbn07XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuXHJcbnZhciBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XHJcblxyXG52YXIgJGZvcm0sICRyZXF1aXJlZElucHV0cywgdmFsaWRhdG9yO1xyXG5cclxudmFyIGhhc0VtcHR5UmVxdWlyZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyBmaWx0ZXIgb3V0IG9ubHkgdGhlIHZpc2libGUgZmllbGRzXHJcbiAgICB2YXIgcmVxdWlyZWRWYWx1ZXMgPSAkcmVxdWlyZWRJbnB1dHMuZmlsdGVyKCc6dmlzaWJsZScpLm1hcChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuICQodGhpcykudmFsKCk7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBfKHJlcXVpcmVkVmFsdWVzKS5jb250YWlucygnJyk7XHJcbn07XHJcblxyXG52YXIgdmFsaWRhdGVGb3JtID0gZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gb25seSB2YWxpZGF0ZSBmb3JtIHdoZW4gYWxsIHJlcXVpcmVkIGZpZWxkcyBhcmUgZmlsbGVkIHRvIGF2b2lkXHJcbiAgICAvLyB0aHJvd2luZyBlcnJvcnMgb24gZW1wdHkgZm9ybVxyXG4gICAgaWYgKCF2YWxpZGF0b3IpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAoIWhhc0VtcHR5UmVxdWlyZWQoKSkge1xyXG4gICAgICAgIGlmICh2YWxpZGF0b3IuZm9ybSgpKSB7XHJcbiAgICAgICAgICAgIC8vJGNvbnRpbnVlLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAvLyRjb250aW51ZS5hdHRyKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xyXG4gICAgfVxyXG59O1xyXG5cclxudmFyIHZhbGlkYXRlRWwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAoJCh0aGlzKS52YWwoKSA9PT0gJycpIHtcclxuICAgICAgICAvLyAkY29udGludWUuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gZW5hYmxlIGNvbnRpbnVlIGJ1dHRvbiBvbiBsYXN0IHJlcXVpcmVkIGZpZWxkIHRoYXQgaXMgdmFsaWRcclxuICAgICAgICAvLyBvbmx5IHZhbGlkYXRlIHNpbmdsZSBmaWVsZFxyXG4gICAgICAgIGlmICh2YWxpZGF0b3IuZWxlbWVudCh0aGlzKSAmJiAhaGFzRW1wdHlSZXF1aXJlZCgpKSB7XHJcbiAgICAgICAgICAgIC8vJGNvbnRpbnVlLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8kY29udGludWUuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcblxyXG52YXIgaW5pdCA9IGZ1bmN0aW9uIChvcHRzKSB7XHJcbiAgICBpZiAoIW9wdHMuZm9ybVNlbGVjdG9yIHx8ICFvcHRzLmNvbnRpbnVlU2VsZWN0b3IpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZm9ybSBhbmQgY29udGludWUgYWN0aW9uIHNlbGVjdG9ycy4nKTtcclxuICAgIH1cclxuICAgICRmb3JtID0gJChvcHRzLmZvcm1TZWxlY3Rvcik7XHJcbiAgICAvLyRjb250aW51ZSA9ICQob3B0cy5jb250aW51ZVNlbGVjdG9yKTtcclxuICAgIHZhbGlkYXRvciA9ICRmb3JtLnZhbGlkYXRlKCk7XHJcbiAgICAkcmVxdWlyZWRJbnB1dHMgPSAkKCcucmVxdWlyZWQnLCAkZm9ybSkuZmluZCgnOmlucHV0Jyk7XHJcbiAgICB2YWxpZGF0ZUZvcm0oKTtcclxuICAgIC8vIHN0YXJ0IGxpc3RlbmluZ1xyXG4gICAgJHJlcXVpcmVkSW5wdXRzLm9uKCdjaGFuZ2UnLCB2YWxpZGF0ZUVsKTtcclxuICAgICRyZXF1aXJlZElucHV0cy5maWx0ZXIoJ2lucHV0Jykub24oJ2tleXVwJywgXy5kZWJvdW5jZSh2YWxpZGF0ZUVsLCAyMDApKTtcclxufTtcclxuXHJcbmV4cG9ydHMuaW5pdCA9IGluaXQ7XHJcbmV4cG9ydHMudmFsaWRhdGVGb3JtID0gdmFsaWRhdGVGb3JtO1xyXG5leHBvcnRzLnZhbGlkYXRlRWwgPSB2YWxpZGF0ZUVsO1xyXG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG52YXIgYWRkcmVzcyA9IHJlcXVpcmUoJy4vYWRkcmVzcycpLFxyXG4gICAgYmlsbGluZyA9IHJlcXVpcmUoJy4vYmlsbGluZycpLFxyXG4gICAgbXVsdGlzaGlwID0gcmVxdWlyZSgnLi9tdWx0aXNoaXAnKSxcclxuICAgIHVpZXZlbnRzID0gcmVxdWlyZSgnLi4vLi4vdWlldmVudHMnKSxcclxuICAgIHV0aWwgPSByZXF1aXJlKCcuLi8uLi91dGlsJyksXHJcbiAgICBzaGlwcGluZyA9IHJlcXVpcmUoJy4vc2hpcHBpbmcnKTtcclxuXHJcbi8qKlxyXG4gKiBAZnVuY3Rpb24gSW5pdGlhbGl6ZXMgdGhlIHBhZ2UgZXZlbnRzIGRlcGVuZGluZyBvbiB0aGUgY2hlY2tvdXQgc3RhZ2UgKHNoaXBwaW5nL2JpbGxpbmcpXHJcbiAqL1xyXG5leHBvcnRzLmluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBhZGRyZXNzLmluaXQoKTtcclxuICAgIGlmICgkKCcuYWxsb3RtZW50LWxhYmVsJykubGVuZ3RoID4gMCB8fCAkKCcuYnJhbmQtcmFwYWxhLWNoZWNrb3V0JykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICQoJ2JvZHknKS5maW5kKCcjbWFpbicpLmFkZENsYXNzKCdhbGxvdG1lbnQtYXZhaWxhYmxlJyk7XHJcbiAgICB9XHJcbiAgICBpZiAoJCgnLmNoZWNrb3V0LXNoaXBwaW5nJykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHNoaXBwaW5nLmluaXQoKTtcclxuICAgIH0gZWxzZSBpZiAoJCgnLmNoZWNrb3V0LW11bHRpLXNoaXBwaW5nJykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIG11bHRpc2hpcC5pbml0KCk7XHJcbiAgICB9ICBlbHNlIHtcclxuICAgICAgICBiaWxsaW5nLmluaXQoKTtcclxuICAgIH1cclxuICAgICQod2luZG93KS5yZXNpemUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJy51aS1kaWFsb2ctY29udGVudDp2aXNpYmxlJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQodGhpcykuZGlhbG9nKCdvcHRpb24nLCAncG9zaXRpb24nLCAkKHRoaXMpLmRpYWxvZygnb3B0aW9uJywgJ3Bvc2l0aW9uJykpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICAkKCdib2R5JykuZmluZCgnLmZvcm0tcm93JykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCQodGhpcykuZmluZCgnLmZpZWxkLXdyYXBwZXIgLmNsZWFyYnV0dG9uJykubGVuZ3RoID09IDAgJiYgJCh0aGlzKS5maW5kKCcuZmllbGQtd3JhcHBlcicpLmZpbmQoJ2lucHV0W3R5cGU9XFwndGV4dFxcJ10nKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICQodGhpcykuZmluZCgnLmZpZWxkLXdyYXBwZXInKS5hcHBlbmQoJzxhIGNsYXNzPVwiY2xlYXJidXR0b25cIj48L2E+Jyk7XHJcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmZpbmQoJy5maWVsZC13cmFwcGVyJykuZmluZCgnaW5wdXRbdHlwZT1cXCd0ZXh0XFwnXScpLnZhbCgpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLmZpZWxkLXdyYXBwZXInKS5maW5kKCcuY2xlYXJidXR0b24nKS5zaG93KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKCQodGhpcykuZmluZCgnLmZpZWxkLXdyYXBwZXIgLmNsZWFyYnV0dG9uJykubGVuZ3RoID09IDAgJiYgJCh0aGlzKS5maW5kKCcuZmllbGQtd3JhcHBlcicpLmZpbmQoJ2lucHV0W3R5cGU9XFwncGFzc3dvcmRcXCddJykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5maWVsZC13cmFwcGVyJykuYXBwZW5kKCc8YSBjbGFzcz1cImNsZWFyYnV0dG9uXCI+PC9hPicpO1xyXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5maW5kKCcuZmllbGQtd3JhcHBlcicpLmZpbmQoJ2lucHV0W3R5cGU9XFwncGFzc3dvcmRcXCddJykudmFsKCkubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuZmllbGQtd3JhcHBlcicpLmZpbmQoJy5jbGVhcmJ1dHRvbicpLnNob3coKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgJCgnYm9keScpLmZpbmQoJy5mb3JtLXJvdyAuZmllbGQtd3JhcHBlciBpbnB1dCcpLm9uKCdmb2N1cycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnZXJyb3JjbGllbnQnKSkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdlcnJvcmNsaWVudCcpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgJCgnYm9keScpLmZpbmQoJy5mb3JtLXJvdyAuZmllbGQtd3JhcHBlciBpbnB1dCcpLm9uKCdrZXl1cCBpbnB1dCBibHVyJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICgkKHRoaXMpLnZhbCgpICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS52YWwoKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtLXJvdycpLmZpbmQoJ2EuY2xlYXJidXR0b24nKS5zaG93KCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtLXJvdycpLmZpbmQoJ2EuY2xlYXJidXR0b24nKS5oaWRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgICQoJ2JvZHknKS5maW5kKCdpbnB1dCcpLmZvY3VzaW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCwgLmZvcm0tcm93JykucmVtb3ZlQ2xhc3MoJ2lucHV0bGFiZWwnKTtcclxuICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcuZm9ybS1yb3cgLCAubGFiZWwgc3BhbicpLnJlbW92ZUNsYXNzKCdpbnB1dGxhYmVsJyk7XHJcbiAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnZXJyb3JjbGllbnQnKTtcclxuICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQgLCAuZm9ybS1yb3cnKS5maW5kKCcubG9nZXJyb3IgLCAuZXhpc3RpbmdfcmVnaXN0ZXInKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xyXG4gICAgfSk7XHJcbiAgICAkKCdib2R5JykuZmluZCgnLmZvcm0tcm93IGEuY2xlYXJidXR0b24nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZmllbGQtd3JhcHBlcicpLmZpbmQoJ3NwYW4nKS5yZW1vdmUoKTtcclxuICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5maWVsZC13cmFwcGVyJykuZmluZCgnLnJlcXVpcmVkJykucmVtb3ZlQ2xhc3MoJ2Vycm9yY2xpZW50Jyk7XHJcbiAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybS1yb3cnKS5maW5kKCcuZm9ybS1yb3cgLCAubGFiZWwgc3BhbicpLnJlbW92ZUNsYXNzKCdpbnB1dGxhYmVsJyk7XHJcbiAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybS1yb3cnKS5maW5kKCdpbnB1dCcpLnZhbCgnJyk7XHJcbiAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybS1yb3cnKS5maW5kKCdhLmNsZWFyYnV0dG9uJykuaGlkZSgpO1xyXG4gICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm0tcm93JykuZmluZCgnc3Bhbi5sb2dlcnJvciAsIC5leGlzdGluZ19yZWdpc3RlcicpLmhpZGUoKTtcclxuICAgIH0pO1xyXG5cclxuICAgICQoJy5wdF9jaGVja291dCAudGV4dGlucHV0LCAucHRfY2hlY2tvdXQgLmN1c3RvbS1zZWxlY3Qtd3JhcCwgLnB0X2NoZWNrb3V0IC50ZXh0aW5wdXRwdycpLmJpbmQoJ2tleXVwIGJsdXInLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKGpRdWVyeSgnLk5ldy1zaGlwcGluZy1hdXRoZW50aWNhdGlvbi1kZXRhaWwnKS5maW5kKCdpbnB1dFtuYW1lJD1cXCdfUHJvY2Vzc1dheVxcJ10nKS52YWwoKSA9PSAyKSB7XHJcbiAgICAgICAgICAgIHZhciBlcnJvcmRpdiA9ICc8ZGl2IGNsYXNzPVxcJ2Vycm9yIGxvZ2luZXJyb3JcXCc+JyArIFJlc291cmNlcy5jaGVja291dF9sb2dpbl9lcnJvciArICc8L2Rpdj4nO1xyXG4gICAgICAgICAgICBpZiAoJCgnLnNoaXBwaW5nbG9naW5kZXRhaWxzJykuaXMoJzp2aXNpYmxlJykgfHwgISQoJy5jaGVja291dHNoaXBwaW5nIGZvcm1baWQkPVwiX2xvZ2luXCJdJykudmFsaWQoKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCQoJy5jaGVja291dCAubG9naW5lcnJvcicpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuY2hlY2tvdXQgLmxvZ2luZXJyb3InKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGpRdWVyeSgnLnN0YXRlLWJsayAuc3RhdGVlcnJvci5lcnJvcicpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcubG9naW5lcnJvcicpLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuYXBwZW5kKGVycm9yZGl2KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xyXG4gICAgICAgIH0sIDEwMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCcubmV3LWFkZHJlc3MtYnV0dG9uJykuYmluZCgnY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy9qUXVlcnkoXCJpbnB1dFtuYW1lPSR7cGRpY3QuQ3VycmVudEZvcm1zLnNpbmdsZXNoaXBwaW5nLnNoaXBwaW5nQWRkcmVzcy5tYWtlZGVmYXVsdC5odG1sTmFtZX1dXCIpLmF0dHIoJ2NoZWNrZWQnLCB0cnVlKTtcclxuICAgICAgICAkKCcuYWRkcmVzc29wdGlvbnMtYWRkVG9BZGRyZXNzQm9vaywuYWRkcmVzc29wdGlvbnMtbWFrZWRlZmF1bHQgJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAkKCdpbnB1dFtuYW1lJD1cXCdzaGlwcGluZ0FkZHJlc3Nfc2VsZWN0ZWRhZGRyZXNzXFwnXScpLnZhbCgnJyk7XHJcbiAgICAgICAgJCgnLnNlbGVjdGVkLXNoaXBwaW5nLWFkZHJlc3MnKS5lbXB0eSgpO1xyXG4gICAgICAgICQoJ2lucHV0W25hbWUkPVxcJ19hZGRyZXNzaWRcXCddJykudmFsKCcnKTtcclxuICAgICAgICAkKCdpbnB1dFtuYW1lJD1cXCdfYWRkcmVzc0ZpZWxkc19maXJzdE5hbWVcXCddJykudmFsKCcnKTtcclxuICAgICAgICAkKCdpbnB1dFtuYW1lJD1cXCdfYWRkcmVzc0ZpZWxkc19sYXN0TmFtZVxcJ10nKS52YWwoJycpO1xyXG4gICAgICAgICQoJ2lucHV0W25hbWUkPVxcJ19hZGRyZXNzRmllbGRzX2FkZHJlc3MxXFwnXScpLnZhbCgnJyk7XHJcbiAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XFwnX2FkZHJlc3NGaWVsZHNfYWRkcmVzczJcXCddJykudmFsKCcnKTtcclxuICAgICAgICAkKCdpbnB1dFtuYW1lJD1cXCdfYWRkcmVzc0ZpZWxkc19jaXR5XFwnXScpLnZhbCgnJyk7XHJcbiAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XFwnX2FkZHJlc3NGaWVsZHNfcG9zdGFsXFwnXScpLnZhbCgnJyk7XHJcbiAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XFwnX2FkZHJlc3NGaWVsZHNfcGhvbmVcXCddJykudmFsKCcnKTtcclxuICAgICAgICAkKCdpbnB1dFtuYW1lJD1cXCdfYWRkcmVzc0ZpZWxkc19zdGF0ZXNfc3RhdGVcXCddJykudmFsKCcnKTtcclxuICAgICAgICB1aWV2ZW50cy5jaGFuZ2VGb3JtU2VsZWN0aW9uKGpRdWVyeSgnc2VsZWN0W25hbWUkPVxcJ19hZGRyZXNzRmllbGRzX3RpdGxlXFwnXScpWzBdLCAnJyk7XHJcbiAgICAgICAgdWlldmVudHMuY2hhbmdlRm9ybVNlbGVjdGlvbihqUXVlcnkoJ3NlbGVjdFtuYW1lJD1cXCdfYWRkcmVzc0ZpZWxkc19jb3VudHJ5XFwnXScpWzBdLCAnJyk7XHJcbiAgICAgICAgdWlldmVudHMuY2hhbmdlRm9ybVNlbGVjdGlvbihqUXVlcnkoJ3NlbGVjdFtuYW1lJD1cXCdfYWRkcmVzc0ZpZWxkc19zdGF0ZXNfc3RhdGVcXCddJylbMF0sICcnKTtcclxuICAgICAgICB1aWV2ZW50cy5jaGFuZ2VGb3JtU2VsZWN0aW9uKGpRdWVyeSgnc2VsZWN0LmFkZHJlc3Mtc2VsZWN0JylbMF0sICcnKTtcclxuICAgICAgICAkKCcuc2hpcHBpbmctYWRkcmVzcy1maWVsZC1zZWN0aW9uJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAkKCcuc2VsZWN0ZWQtc2hpcHBpbmctYWRkcmVzcywgLm5ldy1hZGRyZXNzLWZpZWxkJykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAkKCdpbnB1dFtuYW1lJD1cXCdfYWRkcmVzc0ZpZWxkc19waG9uZVxcJ10nKS5jbG9zZXN0KCdkaXYucGhvbmUnKS5maW5kKCdzcGFuLmVycm9yY2xpZW50JykucmVtb3ZlKCk7XHJcbiAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XFwnX2FkZHJlc3NGaWVsZHNfcG9zdGFsXFwnXScpLmNsb3Nlc3QoJ2Rpdi56aXAnKS5maW5kKCdzcGFuLmVycm9yY2xpZW50JykucmVtb3ZlKCk7XHJcbiAgICAgICAgJCgnLmFkZHJlc3Nmb3JtIC5mb3JtLXJvdy5jdXN0b20tc2VsZWN0JykucmVtb3ZlQ2xhc3MoJ2N1c3RvbXNlbGVjdC1lcnJvcicpO1xyXG4gICAgICAgICQoJy5jdXN0b20tc2VsZWN0JykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBzZWxlY3RWYWwgPSAkKHRoaXMpLmZpbmQoJzpzZWxlY3RlZCcpLnRleHQoKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuc2VsZWN0b3JPdXQnKS50ZXh0KHNlbGVjdFZhbCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKCQoJy5jaGVja291dCcpLmhhc0NsYXNzKCdiaWxsaW5nc2VjdGlvbicpKSB7XHJcbiAgICAgICAgICAgICQoJ2JvZHknKS5maW5kKCdpbnB1dFtuYW1lJD1fc2FtZWFzc2hpcHBpbmdhZGRyZXNzXScpLnJlbW92ZUF0dHIoJ2NoZWNrZWQnKTtcclxuICAgICAgICAgICAgJCgnYm9keScpLmZpbmQoJ2lucHV0W25hbWUkPV9zYW1lYXNzaGlwcGluZ2FkZHJlc3NdJykuY2xvc2VzdCgnLmN1c3RvbS1jaGVja2JveCcpLmZpbmQoJy5jdXN0b20tbGluaycpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgJCgnYS5jbGVhcmJ1dHRvbicpLmhpZGUoKTtcclxuICAgICAgICAkKCcuc2hpcHBpbmctYWRkcmVzcy1maWVsZC1zZWN0aW9uIC5mb3JtLXJvdycpLmZpbmQoJ2lucHV0JykucmVtb3ZlQ2xhc3MoJ2Vycm9yY2xpZW50Jyk7XHJcbiAgICAgICAgdWlldmVudHMuY3VzdG9tRmllbGRzKCk7XHJcbiAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xyXG4gICAgfSk7XHJcbiAgICAkKCcuZWRpdC1hZGRyZXNzLWZpZWxkIC5lZGl0LWJpbGxpbmctYnV0dG9uJykuYmluZCgnY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyICRmb3JtID0gJCgnLmFkZHJlc3MnKTtcclxuICAgICAgICB2YXIgc2VsZWN0ZWRBZGRyZXNzID0gJCh0aGlzKS5jbG9zZXN0KCcuZWRpdC1hZGRyZXNzLWZpZWxkJykuZGF0YSgnYWRkcmVzcycpO1xyXG4gICAgICAgIHV0aWwuZmlsbEFkZHJlc3NGaWVsZHMoc2VsZWN0ZWRBZGRyZXNzLCAkZm9ybSk7XHJcbiAgICAgICAgJCgnLmVkaXQtYWRkcmVzcy1maWVsZCcpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgJCgnLnNlbGVjdGVkLXNoaXBwaW5nLWFkZHJlc3MsIC5uZXctYWRkcmVzcy1maWVsZCcpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgJCgnLmJpbGxpbmctYWRkcmVzcy1maWVsZHMnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG4gICAgICAgIHVpZXZlbnRzLmN1c3RvbUZpZWxkcygpO1xyXG4gICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcclxuICAgIH0pO1xyXG4gICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xyXG4gICAgLy9pZiBvbiB0aGUgb3JkZXIgcmV2aWV3IHBhZ2UgYW5kIHRoZXJlIGFyZSBwcm9kdWN0cyB0aGF0IGFyZSBub3QgYXZhaWxhYmxlIGRpYWJsZSB0aGUgc3VibWl0IG9yZGVyIGJ1dHRvblxyXG4gICAgLyogaWYgKCQoJy5vcmRlci1zdW1tYXJ5LWZvb3RlcicpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgaWYgKCQoJy5ub3RhdmFpbGFibGUnKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAkKCcub3JkZXItc3VtbWFyeS1mb290ZXIgLnN1Ym1pdC1vcmRlciAuYnV0dG9uLWZhbmN5LWxhcmdlJykuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcclxuICAgICAgICAgfVxyXG4gICAgIH0qL1xyXG59O1xyXG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG52YXIgYWRkcmVzcyA9IHJlcXVpcmUoJy4vYWRkcmVzcycpLFxyXG4gICAgZm9ybVByZXBhcmUgPSByZXF1aXJlKCcuL2Zvcm1QcmVwYXJlJyksXHJcbiAgICBkaWFsb2cgPSByZXF1aXJlKCcuLi8uLi9kaWFsb2cnKSxcclxuICAgIHV0aWwgPSByZXF1aXJlKCcuLi8uLi91dGlsJyksXHJcbiAgICBzaGlwcGluZyA9IHJlcXVpcmUoJy4vc2hpcHBpbmcnKSwgLy9KSVJBIFBSRVYtOTkgOiBzaGlwcGluZyBtZXRob2RzIGlzIG5vdCBkaXNwbGF5ZWQgZm9yIDJuZCBhZGRyZXNzIGluIHJpZ2h0IG5hdi5cclxuICAgIGFqYXggPSByZXF1aXJlKCcuLi8uLi9hamF4Jyk7IC8vSklSQSBQUkVWLTk5IDogc2hpcHBpbmcgbWV0aG9kcyBpcyBub3QgZGlzcGxheWVkIGZvciAybmQgYWRkcmVzcyBpbiByaWdodCBuYXYuXHJcblxyXG4vKipcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBkZXNjcmlwdGlvbiBJbml0aWFsaXplcyBnaWZ0IG1lc3NhZ2UgYm94IGZvciBtdWx0aXNoaXAgc2hpcHBpbmcsIHRoZSBtZXNzYWdlIGJveCBzdGFydHMgb2ZmIGFzIGhpZGRlbiBhbmQgdGhpcyB3aWxsIGRpc3BsYXkgaXQgaWYgdGhlIHJhZGlvIGJ1dHRvbiBpcyBjaGVja2VkIHRvIHllcywgYWxzbyBhZGRlZCBldmVudCBoYW5kbGVyIHRvIGxpc3RlbiBmb3Igd2hlbiBhIHJhZGlvIGJ1dHRvbiBpcyBwcmVzc2VkIHRvIGRpc3BsYXkgdGhlIG1lc3NhZ2UgYm94XHJcbiAqL1xyXG5mdW5jdGlvbiBpbml0TXVsdGlHaWZ0TWVzc2FnZUJveCgpIHtcclxuICAgICQuZWFjaCgkKCcuaXRlbS1saXN0JyksIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciAkZ2lmdE1lc3NhZ2UgPSAkdGhpcy5maW5kKCcuZ2lmdC1tZXNzYWdlLXRleHQnKTtcclxuXHJcbiAgICAgICAgLy9oYW5kbGUgaW5pdGlhbCBsb2FkXHJcbiAgICAgICAgJGdpZnRNZXNzYWdlLnRvZ2dsZUNsYXNzKCdoaWRkZW4nLCAkKCdpbnB1dFtuYW1lJD1cIl9pc0dpZnRcIl06Y2hlY2tlZCcsIHRoaXMpLnZhbCgpICE9PSAndHJ1ZScpO1xyXG5cclxuICAgICAgICAvL3NldCBldmVudCBsaXN0ZW5lcnNcclxuICAgICAgICAkdGhpcy5vbignY2hhbmdlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkZ2lmdE1lc3NhZ2UudG9nZ2xlQ2xhc3MoJ2hpZGRlbicsICQoJ2lucHV0W25hbWUkPVwiX2lzR2lmdFwiXTpjaGVja2VkJywgdGhpcykudmFsKCkgIT09ICd0cnVlJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAZGVzY3JpcHRpb24gY2FwdHVyZSBhZGQgZWRpdCBhZGRkcmVzcyBmb3JtIGV2ZW50c1xyXG4gKi9cclxuZnVuY3Rpb24gYWRkRWRpdEFkZHJlc3ModGFyZ2V0KSB7XHJcbiAgICB2YXIgJGFkZHJlc3NGb3JtID0gJCgnZm9ybVtuYW1lJD1cIm11bHRpc2hpcHBpbmdfZWRpdEFkZHJlc3NcIl0nKSxcclxuICAgICAgICAkYWRkcmVzc0Ryb3Bkb3duID0gJGFkZHJlc3NGb3JtLmZpbmQoJ3NlbGVjdFtuYW1lJD1fYWRkcmVzc0xpc3RdJyksXHJcbiAgICAgICAgJGFkZHJlc3NMaXN0ID0gJGFkZHJlc3NGb3JtLmZpbmQoJy5hZGRyZXNzLWxpc3QnKSxcclxuICAgICAgICBhZGQgPSB0cnVlLFxyXG4gICAgICAgIHNlbGVjdGVkQWRkcmVzc1VVSUQgPSAkKHRhcmdldCkucGFyZW50KCkuc2libGluZ3MoJy5zZWxlY3QtYWRkcmVzcycpLnZhbCgpO1xyXG5cclxuICAgICRhZGRyZXNzRHJvcGRvd24ub24oJ2NoYW5nZScsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHZhciBzZWxlY3RlZEFkZHJlc3MgPSAkYWRkcmVzc0xpc3QuZmluZCgnc2VsZWN0JykudmFsKCk7XHJcbiAgICAgICAgaWYgKHNlbGVjdGVkQWRkcmVzcyAhPT0gJ25ld0FkZHJlc3MnKSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkQWRkcmVzcyA9ICQuZ3JlcCgkYWRkcmVzc0xpc3QuZGF0YSgnYWRkcmVzc2VzJyksIGZ1bmN0aW9uIChhZGQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhZGQuVVVJRCA9PT0gc2VsZWN0ZWRBZGRyZXNzO1xyXG4gICAgICAgICAgICB9KVswXTtcclxuICAgICAgICAgICAgYWRkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIC8vIHByb2NlZWQgdG8gZmlsbCB0aGUgZm9ybSB3aXRoIHRoZSBzZWxlY3RlZCBhZGRyZXNzXHJcbiAgICAgICAgICAgIHV0aWwuZmlsbEFkZHJlc3NGaWVsZHMoc2VsZWN0ZWRBZGRyZXNzLCAkYWRkcmVzc0Zvcm0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vcmVzZXQgdGhlIGZvcm0gaWYgdGhlIHZhbHVlIG9mIHRoZSBvcHRpb24gaXMgbm90IGEgVVVJRFxyXG4gICAgICAgICAgICBhZGQgPSB0cnVlOyAvL1BSRVZBSUwgLSBBZGRlZCB0byBoYW5kbGUgYmFjayBhbmQgZm9ydGggc2NlbmFyaW9zLlxyXG4gICAgICAgICAgICAkYWRkcmVzc0Zvcm0uZmluZCgnLmlucHV0LXRleHQsIC5pbnB1dC1zZWxlY3QnKS52YWwoJycpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgICRhZGRyZXNzRm9ybS5vbignY2xpY2snLCAnLmNhbmNlbCcsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGRpYWxvZy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJGFkZHJlc3NGb3JtLm9uKCdzdWJtaXQnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgLy8gUFJFVi05ODogdmFsaWRhdGlvbiBlcnJvciBtZXNzYWdlcyBhcmUgbm90IGRpc3BsYXllZCB3aGVuIGFkZGluZyBhZGRyZXNzIGluIE11bHRpLVNoaXBwaW5nLiBBZGRlZCB0aGUgZm9sbG93aW5nIElGIGJsb2NrLlxyXG4gICAgICAgIGlmICghJGFkZHJlc3NGb3JtLnZhbGlkKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkLmdldEpTT04oVXJscy5hZGRFZGl0QWRkcmVzcywgJGFkZHJlc3NGb3JtLnNlcmlhbGl6ZSgpLCBmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBAVE9ETzogZmlndXJlIG91dCBhIHdheSB0byBoYW5kbGUgZXJyb3Igb24gdGhlIGZvcm1cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgYWRkcmVzcyA9IHJlc3BvbnNlLmFkZHJlc3MsXHJcbiAgICAgICAgICAgICAgICAkc2hpcHBpbmdBZGRyZXNzID0gJCh0YXJnZXQpLmNsb3Nlc3QoJy5zaGlwcGluZ2FkZHJlc3MnKSxcclxuICAgICAgICAgICAgICAgICRzZWxlY3QgPSAkc2hpcHBpbmdBZGRyZXNzLmZpbmQoJy5zZWxlY3QtYWRkcmVzcycpLFxyXG4gICAgICAgICAgICAgICAgJHNlbGVjdGVkID0gJHNlbGVjdC5maW5kKCdvcHRpb246c2VsZWN0ZWQnKSxcclxuICAgICAgICAgICAgICAgIG5ld09wdGlvbiA9ICc8b3B0aW9uIHZhbHVlPVwiJyArIGFkZHJlc3MuVVVJRCArICdcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAoKGFkZHJlc3MuSUQpID8gJygnICsgYWRkcmVzcy5JRCArICcpJyA6IGFkZHJlc3MuZmlyc3ROYW1lICsgJyAnICsgYWRkcmVzcy5sYXN0TmFtZSkgKyAnLCAnICtcclxuICAgICAgICAgICAgICAgICAgICBhZGRyZXNzLmFkZHJlc3MxICsgJywgJyArIGFkZHJlc3MuY2l0eSArICcsICcgKyBhZGRyZXNzLnN0YXRlQ29kZSArICcsICcgKyBhZGRyZXNzLnBvc3RhbENvZGUgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8L29wdGlvbj4nO1xyXG4gICAgICAgICAgICBkaWFsb2cuY2xvc2UoKTtcclxuICAgICAgICAgICAgaWYgKGFkZCkge1xyXG4gICAgICAgICAgICAgICAgJCgnLnNoaXBwaW5nYWRkcmVzcyBzZWxlY3QnKS5yZW1vdmVDbGFzcygnbm8tb3B0aW9uJykuYXBwZW5kKG5ld09wdGlvbik7XHJcbiAgICAgICAgICAgICAgICAkKCcubm8tYWRkcmVzcycpLmhpZGUoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICQoJy5zaGlwcGluZ2FkZHJlc3Mgc2VsZWN0JykuZmluZCgnb3B0aW9uW3ZhbHVlPVwiJyArIGFkZHJlc3MuVVVJRCArICdcIl0nKS5odG1sKG5ld09wdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gaWYgdGhlcmUncyBubyBwcmV2aW91c2x5IHNlbGVjdGVkIG9wdGlvbiwgc2VsZWN0IGl0XHJcbiAgICAgICAgICAgIGlmICgkc2VsZWN0ZWQubGVuZ3RoID09PSAwIHx8ICRzZWxlY3RlZC52YWwoKSA9PT0gJycpIHtcclxuICAgICAgICAgICAgICAgICRzZWxlY3QuZmluZCgnb3B0aW9uW3ZhbHVlPVwiJyArIGFkZHJlc3MuVVVJRCArICdcIl0nKS5wcm9wKCdzZWxlY3RlZCcsICdzZWxlY3RlZCcpLnRyaWdnZXIoJ2NoYW5nZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvL3ByZXNlcnZlIHRoZSB1dWlkIG9mIHRoZSBvcHRpb24gZm9yIHRoZSBob3AgdXAgZm9ybVxyXG4gICAgaWYgKHNlbGVjdGVkQWRkcmVzc1VVSUQpIHtcclxuICAgICAgICAvL3VwZGF0ZSB0aGUgZm9ybSB3aXRoIHNlbGVjdGVkIGFkZHJlc3NcclxuICAgICAgICAkYWRkcmVzc0xpc3QuZmluZCgnb3B0aW9uJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vY2hlY2sgdGhlIHZhbHVlcyBvZiB0aGUgb3B0aW9uc1xyXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5hdHRyKCd2YWx1ZScpID09PSBzZWxlY3RlZEFkZHJlc3NVVUlEKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnByb3AoJ3NlbGVjdGVkJywgJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICAkYWRkcmVzc0Ryb3Bkb3duLnRyaWdnZXIoJ2NoYW5nZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAZnVuY3Rpb25cclxuICogQGRlc2NyaXB0aW9uIHNob3dzIGdpZnQgbWVzc2FnZSBib3ggaW4gbXVsdGlzaGlwLCBhbmQgaWYgdGhlIHBhZ2UgaXMgdGhlIG11bHRpIHNoaXBwaW5nIGFkZHJlc3MgcGFnZSBpdCB3aWxsIGNhbGwgaW5pdG11bHRpc2hpcHNoaXBhZGRyZXNzKCkgdG8gaW5pdGlhbGl6ZSB0aGUgZm9ybVxyXG4gKi9cclxuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgaW5pdE11bHRpR2lmdE1lc3NhZ2VCb3goKTtcclxuICAgIGlmICgkKCcuY2FydC1yb3cgLnNoaXBwaW5nYWRkcmVzcyAuc2VsZWN0LWFkZHJlc3MnKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgZm9ybVByZXBhcmUuaW5pdCh7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlU2VsZWN0b3I6ICdbbmFtZSQ9XCJhZGRyZXNzU2VsZWN0aW9uX3NhdmVcIl0nLFxyXG4gICAgICAgICAgICBmb3JtU2VsZWN0b3I6ICdbaWQkPVwibXVsdGlzaGlwcGluZ19hZGRyZXNzU2VsZWN0aW9uXCJdJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgJCgnLmVkaXQtYWRkcmVzcycpLm9uKCdjbGljaycsICdhJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7IC8vSklSQSBQUkVWLTIwNS1DaGVja291dCBNdWx0aXBsZSBTaGlwcGluZyBQYWdlIC0gSW4gQWRkL0VkaXQgYWRkcmVzcyBwYWdlIGNhbmNlbCBidXR0b24gbm90IHJlc3BvbmRpbmdcclxuICAgICAgICBkaWFsb2cub3Blbih7XHJcbiAgICAgICAgICAgIHVybDogdGhpcy5ocmVmLFxyXG4gICAgICAgICAgICBvcHRpb25zOiB7XHJcbiAgICAgICAgICAgICAgICBvcGVuOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkcmVzcy5pbml0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkRWRpdEFkZHJlc3MoZS50YXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmUoJy4uLy4uL3ZhbGlkYXRvcicpLmluaXQoKTsgLy9KSVJBIFBSRVYtOTggOiB2YWxpZGF0aW9uIGVycm9yIG1lc3NhZ2VzIGFyZSBub3QgZGlzcGxheWVkIHdoZW4gYWRkaW5nICBtdWx0aXBsZSBhZGRyZXNzLnJlLWluaXQgdmFsaWRhdG9yLlxyXG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmUoJy4uLy4uL3Rvb2x0aXAnKS5pbml0KCk7IC8vIEpJUkEgUFJFVi04NCA6IE11bHRpcGxlIHNoaXBwaW5nIHBhZ2U6IE5vdCBkaXNwbGF5aW5nIFRvb2wgdGlwLiByZS1pbml0IHRvb2x0aXBzLlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKlxyXG4gICAgICBTdGFydCBKSVJBIFBSRVYtOTkgOiBzaGlwcGluZyBtZXRob2RzIGlzIG5vdCBkaXNwbGF5ZWQgZm9yIDJuZCBhZGRyZXNzIGluIHJpZ2h0IG5hdlxyXG4gICAgICBTdGFydCBKSVJBIFBSRVYtMTAzIDogU2VsZWN0ZWQgc2hpcHBpbmcgbWV0aG9kIHdpbGwgbm90IHVwZGF0ZSBhdXRvbWF0aWNhbGx5IGluIHJpZ2h0IG5hdlxyXG4gICAgKi9cclxuICAgICQoZG9jdW1lbnQpLmZpbmQoJy5jaGVja291dG11bHRpc2hpcHBpbmcgc2VsZWN0W25hbWUkPVwiX3NoaXBwaW5nTWV0aG9kSURcIl0nKS5vbignY2hhbmdlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBzaGlwbWVudElEID0gJCh0aGlzKS5kYXRhKCdzaGlwbWVudGlkJyk7XHJcbiAgICAgICAgdmFyIHNoaXBwaW5nTWV0aG9kSWQgPSAkKCdvcHRpb246c2VsZWN0ZWQnLCB0aGlzKS5hdHRyKCd2YWx1ZScpO1xyXG4gICAgICAgIGFqYXguZ2V0SnNvbih7XHJcbiAgICAgICAgICAgIHVybDogVXJscy5tdWx0aVNoaXBwaW5nU2VsZWN0U00sXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICdzaGlwbWVudElEJzogc2hpcG1lbnRJRCxcclxuICAgICAgICAgICAgICAgICdzaGlwcGluZ01ldGhvZElkJzogc2hpcHBpbmdNZXRob2RJZFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIHNoaXBwaW5nLnVwZGF0ZVN1bW1hcnkoKTtcclxuICAgICAgICAgICAgICAgIGlmICghZGF0YSB8fCAhZGF0YS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmFsZXJ0KCdDb3VsZCBub3Qgc2VsZWN0IHNoaXBwaW5nIG1ldGhvZC4nKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgLypFbmQgSklSQSBQUkVWLTEwMywgUFJFVi05OSovXHJcbn07XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuXHJcbnZhciBhamF4ID0gcmVxdWlyZSgnLi4vLi4vYWpheCcpLFxyXG4gICAgcHJvZ3Jlc3MgPSByZXF1aXJlKCcuLi8uLi9wcm9ncmVzcycpLFxyXG4gICAgdG9vbHRpcCA9IHJlcXVpcmUoJy4uLy4uL3Rvb2x0aXAnKSxcclxuICAgIHV0aWwgPSByZXF1aXJlKCcuLi8uLi91dGlsJyksXHJcbiAgICBkaWFsb2cgPSByZXF1aXJlKCcuLi8uLi9kaWFsb2cnKSxcclxuICAgIHVpZXZlbnRzID0gcmVxdWlyZSgnLi4vLi4vdWlldmVudHMnKSxcclxuICAgICRzdWJtaXRCdXR0b24gPSAkKCdidXR0b24uY29udGludWUtY2hlY2tvdXQnKTtcclxuXHJcbi8qKlxyXG4gKiBAZnVuY3Rpb25cclxuICogQGRlc2NyaXB0aW9uIEluaXRpYWxpemVzIGdpZnQgbWVzc2FnZSBib3gsIGlmIHNoaXBtZW50IGlzIGdpZnRcclxuICovXHJcbmZ1bmN0aW9uIGdpZnRNZXNzYWdlQm94KCkge1xyXG4gICAgLy8gc2hvdyBnaWZ0IG1lc3NhZ2UgYm94LCBpZiBzaGlwbWVudCBpcyBnaWZ0XHJcbiAgICAkKCcuZ2lmdC1tZXNzYWdlLXRleHQnKS50b2dnbGVDbGFzcygnaGlkZGVuJywgJCgnaW5wdXRbbmFtZSQ9XCJfc2hpcHBpbmdBZGRyZXNzX2lzR2lmdFwiXTpjaGVja2VkJykudmFsKCkgIT09ICd0cnVlJyk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAZnVuY3Rpb25cclxuICogQGRlc2NyaXB0aW9uIHNob3dzIHRoZSBzcGlubmluZyBpY29uIG9uIHRoZSBDb250aW51ZSBUbyBCaWxsaW5nIGJ1dHRvbiBmb3IgSUUxMVxyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlQnV0dG9uSUUoKSB7XHJcbiAgICAvLyBpbmRpY2F0ZSBwcm9ncmVzc1xyXG4gICAgJHN1Ym1pdEJ1dHRvbi5hcHBlbmQoJzxkaXYgY2xhc3M9XCJsb2FkZXJcIj48ZGl2IGNsYXNzPVwibG9hZGVyLWluZGljYXRvclwiPjwvZGl2PjxkaXYgY2xhc3M9XCJsb2FkZXItYmdcIj48L2Rpdj48L2Rpdj4nKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAZGVzY3JpcHRpb24gdXBkYXRlcyB0aGUgb3JkZXIgc3VtbWFyeSBiYXNlZCBvbiBhIHBvc3NpYmx5IHJlY2FsY3VsYXRlZCBiYXNrZXQgYWZ0ZXIgYSBzaGlwcGluZyBwcm9tb3Rpb24gaGFzIGJlZW4gYXBwbGllZFxyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlU3VtbWFyeSgpIHtcclxuICAgIHZhciAkc3VtbWFyeSA9ICQoJyNzZWNvbmRhcnkgLm5ldy1zdW1tZXJ5LWNhcnQnKTtcclxuICAgIC8vIGluZGljYXRlIHByb2dyZXNzXHJcbiAgICBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvVHJpZGVudFxcLzdcXC4vKSkge1xyXG4gICAgICAgIHVwZGF0ZUJ1dHRvbklFKCk7XHJcbiAgICB9XHJcbiAgICBwcm9ncmVzcy5zaG93KCRzdW1tYXJ5KTtcclxuICAgIHZhciBzdGF0ZVZhbHVlID0gJCgnYm9keScpLmZpbmQoJ3NlbGVjdFtpZCQ9XCJfYWRkcmVzc0ZpZWxkc19zdGF0ZXNfc3RhdGVcIl0nKS52YWwoKTtcclxuICAgIHZhciB1cmwgPSB1dGlsLmFwcGVuZFBhcmFtVG9VUkwoVXJscy5zdW1tYXJ5UmVmcmVzaFVSTCwgJ3NlbGVjdGVkU3RhdGUnLCBzdGF0ZVZhbHVlKTtcclxuICAgIC8vIGxvYWQgdGhlIHVwZGF0ZWQgc3VtbWFyeSBhcmVhXHJcbiAgICAkc3VtbWFyeS5sb2FkKHVybCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIGhpZGUgZWRpdCBzaGlwcGluZyBtZXRob2QgbGlua1xyXG4gICAgICAgICRzdW1tYXJ5LmZhZGVJbignZmFzdCcpO1xyXG4gICAgICAgICRzdW1tYXJ5LmZpbmQoJy5jaGVja291dC1taW5pLWNhcnQgLm1pbmlzaGlwbWVudCAuaGVhZGVyIGEnKS5oaWRlKCk7XHJcbiAgICAgICAgJHN1bW1hcnkuZmluZCgnLm9yZGVyLXRvdGFscy10YWJsZSAub3JkZXItc2hpcHBpbmcgLmxhYmVsIGEnKS5oaWRlKCk7XHJcbiAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAZnVuY3Rpb25cclxuICogQGRlc2NyaXB0aW9uIHNob3dzIHRoZSBzcGlubmluZyBpY29uIG9uIHRoZSBDb250aW51ZSBUbyBCaWxsaW5nIGJ1dHRvblxyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlQnV0dG9uKCkge1xyXG4gICAgLy8gaW5kaWNhdGUgcHJvZ3Jlc3NcclxuICAgICQoZnVuY3Rpb24gKCl7XHJcbiAgICAgICAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL1RyaWRlbnRcXC83XFwuLykpIHtcclxuICAgICAgICAgICAgJHN1Ym1pdEJ1dHRvbi5hcHBlbmQoJzxkaXYgY2xhc3M9XCJsb2FkZXJcIj48ZGl2IGNsYXNzPVwibG9hZGVyLWluZGljYXRvclwiPjwvZGl2PjxkaXYgY2xhc3M9XCJsb2FkZXItYmdcIj48L2Rpdj48L2Rpdj4nKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIHByb2dyZXNzLnNob3coJHN1Ym1pdEJ1dHRvbik7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAZnVuY3Rpb25cclxuICogQGRlc2NyaXB0aW9uIEhlbHBlciBtZXRob2Qgd2hpY2ggY29uc3RydWN0cyBhIFVSTCBmb3IgYW4gQUpBWCByZXF1ZXN0IHVzaW5nIHRoZVxyXG4gKiBlbnRlcmVkIGFkZHJlc3MgaW5mb3JtYXRpb24gYXMgVVJMIHJlcXVlc3QgcGFyYW1ldGVycy5cclxuICovXHJcbmZ1bmN0aW9uIGdldFNoaXBwaW5nTWV0aG9kVVJMKHVybCwgZXh0cmFQYXJhbXMpIHtcclxuICAgIHZhciAkZm9ybSA9ICQoJy5hZGRyZXNzJyk7XHJcbiAgICB2YXIgcGFyYW1zID0ge1xyXG4gICAgICAgIGFkZHJlc3MxOiAkZm9ybS5maW5kKCdpbnB1dFtuYW1lJD1cIl9hZGRyZXNzMVwiXScpLnZhbCgpLFxyXG4gICAgICAgIGFkZHJlc3MyOiAkZm9ybS5maW5kKCdpbnB1dFtuYW1lJD1cIl9hZGRyZXNzMlwiXScpLnZhbCgpLFxyXG4gICAgICAgIGNvdW50cnlDb2RlOiAkZm9ybS5maW5kKCdzZWxlY3RbaWQkPVwiX2NvdW50cnlcIl0nKS52YWwoKSxcclxuICAgICAgICBzdGF0ZUNvZGU6ICRmb3JtLmZpbmQoJ3NlbGVjdFtpZCQ9XCJfc3RhdGVcIl0nKS52YWwoKSxcclxuICAgICAgICBwb3N0YWxDb2RlOiAkZm9ybS5maW5kKCdpbnB1dFtuYW1lJD1cIl9wb3N0YWxcIl0nKS52YWwoKSxcclxuICAgICAgICBjaXR5OiAkZm9ybS5maW5kKCdpbnB1dFtuYW1lJD1cIl9jaXR5XCJdJykudmFsKClcclxuICAgIH07XHJcbiAgICByZXR1cm4gdXRpbC5hcHBlbmRQYXJhbXNUb1VybCh1cmwsICQuZXh0ZW5kKHBhcmFtcywgZXh0cmFQYXJhbXMpKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAZGVzY3JpcHRpb24gc2VsZWN0cyBhIHNoaXBwaW5nIG1ldGhvZCBmb3IgdGhlIGRlZmF1bHQgc2hpcG1lbnQgYW5kIHVwZGF0ZXMgdGhlIHN1bW1hcnkgc2VjdGlvbiBvbiB0aGUgcmlnaHQgaGFuZCBzaWRlXHJcbiAqIEBwYXJhbVxyXG4gKi9cclxuZnVuY3Rpb24gc2VsZWN0U2hpcHBpbmdNZXRob2Qoc2hpcHBpbmdNZXRob2RJRCkge1xyXG4gICAgLy8gbm90aGluZyBlbnRlcmVkXHJcbiAgICBpZiAoIXNoaXBwaW5nTWV0aG9kSUQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8gYXR0ZW1wdCB0byBzZXQgc2hpcHBpbmcgbWV0aG9kXHJcbiAgICB2YXIgdXJsID0gZ2V0U2hpcHBpbmdNZXRob2RVUkwoVXJscy5zZWxlY3RTaGlwcGluZ01ldGhvZHNMaXN0LCB7XHJcbiAgICAgICAgc2hpcHBpbmdNZXRob2RJRDogc2hpcHBpbmdNZXRob2RJRFxyXG4gICAgfSk7XHJcbiAgICBhamF4LmdldEpzb24oe1xyXG4gICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICB1cGRhdGVTdW1tYXJ5KCk7XHJcbiAgICAgICAgICAgICQoJ2J1dHRvbi5jb250aW51ZS1jaGVja291dCAubG9hZGVyJykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcclxuICAgICAgICAgICAgaWYgKCFkYXRhIHx8ICFkYXRhLnNoaXBwaW5nTWV0aG9kSUQpIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5hbGVydCgnQ291bGRuXFwndCBzZWxlY3Qgc2hpcHBpbmcgbWV0aG9kLicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGRpc3BsYXkgcHJvbW90aW9uIGluIFVJIGFuZCB1cGRhdGUgdGhlIHN1bW1hcnkgc2VjdGlvbixcclxuICAgICAgICAgICAgLy8gaWYgc29tZSBwcm9tb3Rpb25zIHdlcmUgYXBwbGllZFxyXG4gICAgICAgICAgICAkKCcuc2hpcHBpbmdwcm9tb3Rpb25zJykuZW1wdHkoKTtcclxuXHJcbiAgICAgICAgICAgIC8vIGlmIChkYXRhLnNoaXBwaW5nUHJpY2VBZGp1c3RtZW50cyAmJiBkYXRhLnNoaXBwaW5nUHJpY2VBZGp1c3RtZW50cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIC8vIFx0dmFyIGxlbiA9IGRhdGEuc2hpcHBpbmdQcmljZUFkanVzdG1lbnRzLmxlbmd0aDtcclxuICAgICAgICAgICAgLy8gXHRmb3IgKHZhciBpPTA7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgICAvLyBcdFx0dmFyIHNwYSA9IGRhdGEuc2hpcHBpbmdQcmljZUFkanVzdG1lbnRzW2ldO1xyXG4gICAgICAgICAgICAvLyBcdH1cclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBkZXNjcmlwdGlvbiBNYWtlIGFuIEFKQVggcmVxdWVzdCB0byB0aGUgc2VydmVyIHRvIHJldHJpZXZlIHRoZSBsaXN0IG9mIGFwcGxpY2FibGUgc2hpcHBpbmcgbWV0aG9kc1xyXG4gKiBiYXNlZCBvbiB0aGUgbWVyY2hhbmRpc2UgaW4gdGhlIGNhcnQgYW5kIHRoZSBjdXJyZW50bHkgZW50ZXJlZCBzaGlwcGluZyBhZGRyZXNzXHJcbiAqICh0aGUgYWRkcmVzcyBtYXkgYmUgb25seSBwYXJ0aWFsbHkgZW50ZXJlZCkuICBJZiB0aGUgbGlzdCBvZiBhcHBsaWNhYmxlIHNoaXBwaW5nIG1ldGhvZHNcclxuICogaGFzIGNoYW5nZWQgYmVjYXVzZSBuZXcgYWRkcmVzcyBpbmZvcm1hdGlvbiBoYXMgYmVlbiBlbnRlcmVkLCB0aGVuIGlzc3VlIGFub3RoZXIgQUpBWFxyXG4gKiByZXF1ZXN0IHdoaWNoIHVwZGF0ZXMgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCBzaGlwcGluZyBtZXRob2QgKGlmIG5lZWRlZCkgYW5kIGFsc28gdXBkYXRlc1xyXG4gKiB0aGUgVUkuXHJcbiAqL1xyXG5mdW5jdGlvbiB1cGRhdGVTaGlwcGluZ01ldGhvZExpc3QoKSB7XHJcbiAgICB2YXIgJHNoaXBwaW5nTWV0aG9kTGlzdCA9ICQoJyNzaGlwcGluZy1tZXRob2QtbGlzdCcpO1xyXG4gICAgaWYgKCEkc2hpcHBpbmdNZXRob2RMaXN0IHx8ICRzaGlwcGluZ01ldGhvZExpc3QubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9UcmlkZW50XFwvN1xcLi8pKSB7XHJcbiAgICAgICAgdXBkYXRlQnV0dG9uSUUoKTtcclxuICAgIH1cclxuICAgIHZhciB1cmwgPSBnZXRTaGlwcGluZ01ldGhvZFVSTChVcmxzLnNoaXBwaW5nTWV0aG9kc0pTT04pO1xyXG5cclxuICAgIGFqYXguZ2V0SnNvbih7XHJcbiAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGlmICghZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmFsZXJ0KCdDb3VsZG5cXCd0IGdldCBsaXN0IG9mIGFwcGxpY2FibGUgc2hpcHBpbmcgbWV0aG9kcy4nKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvKmlmIChmYWxzZSAmJiBzaGlwcGluZ01ldGhvZHMgJiYgc2hpcHBpbmdNZXRob2RzLnRvU3RyaW5nKCkgPT09IGRhdGEudG9TdHJpbmcoKSkgeyAvLyBQUkVWQUlMLUFkZGVkIGZvciAnZmFsc2UnIHRvIGhhbmRsZSBTUEMuXHJcbiAgICAgICAgICAgICAgICAvLyBObyBuZWVkIHRvIHVwZGF0ZSB0aGUgVUkuICBUaGUgbGlzdCBoYXMgbm90IGNoYW5nZWQuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSovXHJcblxyXG4gICAgICAgICAgICAvLyBXZSBuZWVkIHRvIHVwZGF0ZSB0aGUgVUkuICBUaGUgbGlzdCBoYXMgY2hhbmdlZC5cclxuICAgICAgICAgICAgLy8gQ2FjaGUgdGhlIGFycmF5IG9mIHJldHVybmVkIHNoaXBwaW5nIG1ldGhvZHMuXHJcbiAgICAgICAgICAgIC8vc2hpcHBpbmdNZXRob2RzID0gZGF0YTtcclxuICAgICAgICAgICAgLy8gaW5kaWNhdGUgcHJvZ3Jlc3NcclxuICAgICAgICAgICAgcHJvZ3Jlc3Muc2hvdygkc2hpcHBpbmdNZXRob2RMaXN0KTtcclxuICAgICAgICAgICAgdXBkYXRlQnV0dG9uKCk7XHJcbiAgICAgICAgICAgIC8vIGxvYWQgdGhlIHNoaXBwaW5nIG1ldGhvZCBmb3JtXHJcbiAgICAgICAgICAgIHZhciBzbWxVcmwgPSBnZXRTaGlwcGluZ01ldGhvZFVSTChVcmxzLnNoaXBwaW5nTWV0aG9kc0xpc3QpO1xyXG4gICAgICAgICAgICAkc2hpcHBpbmdNZXRob2RMaXN0LmxvYWQoc21sVXJsLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkc2hpcHBpbmdNZXRob2RMaXN0LmZhZGVJbignZmFzdCcpO1xyXG4gICAgICAgICAgICAgICAgLy8gcmViaW5kIHRoZSByYWRpbyBidXR0b25zIG9uY2xpY2sgZnVuY3Rpb24gdG8gYSBoYW5kbGVyLlxyXG4gICAgICAgICAgICAgICAgJHNoaXBwaW5nTWV0aG9kTGlzdC5maW5kKCdbbmFtZSQ9XCJfc2hpcHBpbmdNZXRob2RJRFwiXScpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVCdXR0b24oKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuc2hpcHBpbmctbWV0aG9kcyAuc2hpcHBpbmctbWV0aG9kIC52YWx1ZSAuY3VzdG9tLWxpbmsgJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmN1c3RvbS1saW5rJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdFNoaXBwaW5nTWV0aG9kKCQodGhpcykudmFsKCkpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIHRoZSBzdW1tYXJ5XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVTdW1tYXJ5KCk7XHJcbiAgICAgICAgICAgICAgICB1aWV2ZW50cy5zeW5jY2hlY2tvdXRIKCk7XHJcbiAgICAgICAgICAgICAgICBwcm9ncmVzcy5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICB0b29sdGlwLmluaXQoKTtcclxuICAgICAgICAgICAgICAgIC8vaWYgbm90aGluZyBpcyBzZWxlY3RlZCBpbiB0aGUgc2hpcHBpbmcgbWV0aG9kcyBzZWxlY3QgdGhlIGZpcnN0IG9uZVxyXG4gICAgICAgICAgICAgICAgaWYgKCRzaGlwcGluZ01ldGhvZExpc3QuZmluZCgnLmlucHV0LXJhZGlvOmNoZWNrZWQnKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2hpcHBpbmdNZXRob2RMaXN0LmZpbmQoJy5pbnB1dC1yYWRpbzpmaXJzdCcpLnByb3AoJ2NoZWNrZWQnLCAnY2hlY2tlZCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJChmdW5jdGlvbiAoKXtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvVHJpZGVudFxcLzdcXC4vKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCdidXR0b24uY29udGludWUtY2hlY2tvdXQgLmxvYWRlcicpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2lnbmluKCkge1xyXG4gICAgJCgnI2FkZHJlc3Nmb3JtIC50ZXh0aW5wdXQnKS5hZGRDbGFzcygnYmx1cmVkJyk7XHJcbiAgICAkKCcjYWRkcmVzc2Zvcm0gLmN1c3RvbS1zZWxlY3QnKS5hZGRDbGFzcygnYmx1cmVkJyk7XHJcbiAgICAkKCcjYWRkcmVzc2Zvcm0gLmN1c3RvbS1jaGVja2JveCcpLmFkZENsYXNzKCdibHVyZWQnKTtcclxuICAgICQoJy5zaWduaW50b215YWNjb3VudC1ibG9jaywuc2hpcHBpbmctY3JlYXRlcmFwYWxhYWNjb3VudCwuc2hpcHBpbmctY29uZmlybWVtYWlsYWRkcmVzcywuc2hpcHBpbmctZW1haWxhZGRyZXNzLC5zaGlwcGluZy1ndWVzdGNvbmZpcm1lbWFpbGFkZHJlc3MsLnNoaXBwaW5nLWd1ZXN0ZW1haWxhZGRyZXNzLC5zaGlwcGluZy1wYXNzd29yZCwuc2hpcHBpbmctY29uZmlybXBhc3N3b3JkLC5zaGlwcGluZy1jaGVja291dGFzZ3Vlc3QsLm9yMSwuY3JlYXRlYWNjb3VudG1zZycpXHJcbiAgICAgICAgLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICAkKCcuY2hlY2tvdXRhc2d1ZXN0LWJsb2NrLC5zaGlwcGluZ2xvZ2luZGV0YWlscywuY3JlYXRlYW5hY2NvdW50LWJsb2NrLC5vcjIsLmFkZHJlc3NvcHRpb25zLWFkZFRvQWRkcmVzc0Jvb2ssLmFkZHJlc3NvcHRpb25zLW1ha2VkZWZhdWx0LC5hZGRyZXNzaWQnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG4gICAgJCgnLnNoaXBwaW5nbG9naW5kZXRhaWxzJykuZmluZCgnaW5wdXRbbmFtZSQ9XFwnX3VzZXJuYW1lXFwnXSxpbnB1dFtuYW1lJD1cXCdfcGFzc3dvcmRcXCddJykuYWRkQ2xhc3MoJ3JlcXVpcmVkJyk7XHJcbiAgICAkKCcuTmV3LXNoaXBwaW5nLWF1dGhlbnRpY2F0aW9uLWRldGFpbCcpLmZpbmQoJ2lucHV0W25hbWUkPVxcJ19wYXNzd29yZGNvbmZpcm1cXCddLGlucHV0W25hbWUkPVxcJ19wYXNzd29yZFxcJ10saW5wdXRbbmFtZSQ9XFwnX2VtYWlsXFwnXSxpbnB1dFtuYW1lJD1cXCdfZW1haWxjb25maXJtXFwnXSxpbnB1dFtuYW1lJD1cXCdfZ3Vlc3RlbWFpbGNvbmZpcm1cXCddLGlucHV0W25hbWUkPVxcJ19ndWVzdGVtYWlsXFwnXScpLnJlbW92ZUNsYXNzKCdyZXF1aXJlZCcpO1xyXG4gICAgJCgnLk5ldy1zaGlwcGluZy1hdXRoZW50aWNhdGlvbi1kZXRhaWwnKS5maW5kKCdpbnB1dFtuYW1lJD1cXCdfUHJvY2Vzc1dheVxcJ10nKS52YWwoJzInKTtcclxuICAgICQoJy5OZXctc2hpcHBpbmctYXV0aGVudGljYXRpb24tZGV0YWlsJykuZmluZCgnaW5wdXRbbmFtZSQ9XFwnX3Bhc3N3b3JkY29uZmlybVxcJ10saW5wdXRbbmFtZSQ9XFwnX3Bhc3N3b3JkXFwnXScpLnZhbCgnJyk7XHJcbiAgICAkKCcuY2hlY2tvdXQgLnNoaXBwaW5nLWFkZHJlc3MtZmllbGQtc2VjdGlvbiAuZm9ybWZpZWxkIHNwYW4uZXJyb3JjbGllbnQnKS5yZW1vdmUoKTtcclxuICAgICQoJy5zaGlwcGluZy1hZGRyZXNzLWZpZWxkLXNlY3Rpb24nKS5hZGRDbGFzcygnc2lnbmluLWVycm9yJyk7XHJcbiAgICB1aWV2ZW50cy5zeW5jY2hlY2tvdXRIKCk7XHJcbn1cclxuXHJcbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICgkKGRvY3VtZW50KS5maW5kKCcuYWRkcmVzcy1zZWxlY3QnKS52YWwoKSAhPSAnJyAmJiAkKGRvY3VtZW50KS5maW5kKCcuYWRkcmVzcy1zZWxlY3QnKS52YWwoKSAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAkKGRvY3VtZW50KS5maW5kKCcuc2hpcHBpbmctYWRkcmVzcy1maWVsZC1zZWN0aW9uJykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJChkb2N1bWVudCkuZmluZCgnLnNoaXBwaW5nLWFkZHJlc3MtZmllbGQtc2VjdGlvbicpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgJChkb2N1bWVudCkuZmluZCgnLnNlbGVjdGVkLXNoaXBwaW5nLWFkZHJlc3MnKS5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLmZpbmQoJy5uZXctYWRkcmVzcy1maWVsZCcpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICB9XHJcbiAgICBpZiAoJChkb2N1bWVudCkuZmluZCgnLmZyb21yZXR1cm4xJykudmFsKCkgPT0gJ3RydWUnKSB7XHJcbiAgICAgICAgJChkb2N1bWVudCkuZmluZCgnLnNoaXBwaW5nLWFkZHJlc3MtZmllbGQtc2VjdGlvbicpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICB9XHJcbiAgICAkKCdpbnB1dFtuYW1lJD1cIl9zaGlwcGluZ0FkZHJlc3NfaXNHaWZ0XCJdJykub24oJ2NsaWNrJywgZ2lmdE1lc3NhZ2VCb3gpO1xyXG5cclxuICAgICQoJy5hZGRyZXNzJykub24oJ2NoYW5nZScsXHJcbiAgICAgICAgJ2lucHV0W25hbWUkPVwiX2FkZHJlc3NGaWVsZHNfYWRkcmVzczFcIl0sIGlucHV0W25hbWUkPVwiX2FkZHJlc3NGaWVsZHNfYWRkcmVzczJcIl0sIHNlbGVjdFtuYW1lJD1cIl9hZGRyZXNzRmllbGRzX3N0YXRlc19zdGF0ZVwiXSwgaW5wdXRbbmFtZSQ9XCJfYWRkcmVzc0ZpZWxkc19jaXR5XCJdLCBpbnB1dFtuYW1lJD1cIl9hZGRyZXNzRmllbGRzX3Bvc3RhbFwiXScsIC8vIFBSRVZBSUwtQ2hhbmdlZCBaSVAgdG8gcG9zdGFsXHJcbiAgICAgICAgdXBkYXRlU2hpcHBpbmdNZXRob2RMaXN0XHJcbiAgICApO1xyXG5cclxuICAgIGdpZnRNZXNzYWdlQm94KCk7XHJcbiAgICB1cGRhdGVTaGlwcGluZ01ldGhvZExpc3QoKTtcclxuXHJcbiAgICAkKCcuY29udGludWUtY2hlY2tvdXQtYnV0dG9uIC5jb250aW51ZS1jaGVja291dCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgdXBkYXRlQnV0dG9uKCk7XHJcbiAgICAgICAgdmFyIGZvcm0gPSAkKHRoaXMpLmNsb3Nlc3QoJ2Zvcm1baWQkPVwiX3NoaXBwaW5nQWRkcmVzc1wiXScpO1xyXG4gICAgICAgIGlmICgkKCcuc3RhdGUtYmxrIHNlbGVjdCcpLnZhbGlkKCkgPT0gMCkge1xyXG4gICAgICAgICAgICBpZiAoISQoJy5zdGF0ZS1ibGsuY3VzdG9tLXNlbGVjdCcpLmhhc0NsYXNzKCdibHVyZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgJCgnLnN0YXRlLWJsay5jdXN0b20tc2VsZWN0JykuYWRkQ2xhc3MoJ2N1c3RvbXNlbGVjdC1lcnJvcicpO1xyXG4gICAgICAgICAgICAgICAgLy8kKCcuc3RhdGUtYmxrIC5zdGF0ZWVycm9yJykuc2hvdygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8kKCcuc3RhdGUtYmxrICAuc3RhdGVlcnJvcicpLmhpZGUoKTtcclxuICAgICAgICAgICAgJCgnLnN0YXRlLWJsay5jdXN0b20tc2VsZWN0JykucmVtb3ZlQ2xhc3MoJ2N1c3RvbXNlbGVjdC1lcnJvcicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCEkKCcuY2hlY2tvdXRhc2d1ZXN0YnV0dG9uJykuaXMoJzp2aXNpYmxlJykpIHtcclxuICAgICAgICAgICAgJCgnLmd1ZXN0ZW1haWxjb24nKS5ibHVyKCk7XHJcbiAgICAgICAgICAgICQoJy5ndWVzdGVtYWlsJykuYmx1cigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWZvcm0udmFsaWQoKSkge1xyXG4gICAgICAgICAgICBwcm9ncmVzcy5oaWRlKCk7XHJcbiAgICAgICAgICAgIGlmIChuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9UcmlkZW50XFwvN1xcLi8pKSB7XHJcbiAgICAgICAgICAgICAgICAkKCdidXR0b24uY29udGludWUtY2hlY2tvdXQgLmxvYWRlcicpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChqUXVlcnkoJy5zaGlwcGluZy1hZGRyZXNzLWZpZWxkLXNlY3Rpb24nKS5oYXNDbGFzcygnaGlkZScpKSB7XHJcbiAgICAgICAgICAgICAgICAkKCdzZWxlY3RbbmFtZSQ9c2luZ2xlc2hpcHBpbmdfYWRkcmVzc0xpc3RdJykudmFsKCcnKTtcclxuICAgICAgICAgICAgICAgICQoJ2lucHV0W25hbWUkPVwic2luZ2xlc2hpcHBpbmdfc2hpcHBpbmdBZGRyZXNzX3NlbGVjdGVkYWRkcmVzc1wiXScpLnZhbCgnJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcuY3VzdG9tLXNlbGVjdCcpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RWYWwgPSAkKHRoaXMpLmZpbmQoJzpzZWxlY3RlZCcpLnRleHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5zZWxlY3Rvck91dCcpLnRleHQoc2VsZWN0VmFsKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgJCgnLnNoaXBwaW5nLWFkZHJlc3MtZmllbGQtc2VjdGlvbicpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcuc2VsZWN0ZWQtc2hpcHBpbmctYWRkcmVzcycpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCEkKCcuc2hpcHBpbmdsb2dpbmRldGFpbHMnKS5pcygnOnZpc2libGUnKSkge1xyXG4gICAgICAgICAgICAgICAgJCgnLnNpbmdsZXNoaXBwaW5nX2Vycm9yJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgICAgICQoJy5zaWduaW5hYm92ZScpLmhpZGUoKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICgkKCcuc2hpcHBpbmdsb2dpbmRldGFpbHMnKS5pcygnOnZpc2libGUnKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEkKCcuc2hpcHBpbmdsb2dpbmRldGFpbHMgZm9ybScpLnZhbGlkKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuc2hpcHBpbmdsb2dpbmRldGFpbHMgLnVzZXJuYW1lIC50ZXh0aW5wdXQsIC5zaGlwcGluZ2xvZ2luZGV0YWlscyAudGV4dGlucHV0cHcnKS5ibHVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnYnV0dG9uW25hbWUkPVwibG9naW5fbG9naW5cIl0nKS50cmlnZ2VyKCdjbGljaycpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIGVycm9ybXNnID0gJzxkaXYgaWQ9XFwnbWVzc2FnZVxcJyBjbGFzcz1cXCdlcnJvci1hbGVydCBzaWduaW5hYm92ZVxcJyBzdHlsZT1cXCd0ZXh0LWFsaWduOiBsZWZ0O1xcJz5QbGVhc2UgTG9nIGluIGFib3ZlIHRvIGNvbnRpbnVlPC9kaXY+JztcclxuICAgICAgICAgICAgICAgIGlmICgkKCcjZHdmcm1fc2luZ2xlc2hpcHBpbmdfc2hpcHBpbmdBZGRyZXNzIC5mb3JtYWN0aW9ucyAjbWVzc2FnZScpLmxlbmd0aCA+IDAgfHwgJCgnI2R3ZnJtX3NpbmdsZXNoaXBwaW5nX3NoaXBwaW5nQWRkcmVzcyAuZm9ybWFjdGlvbnMgLnNpbmdsZXNoaXBwaW5nX2Vycm9yJykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeSgnI2R3ZnJtX3NpbmdsZXNoaXBwaW5nX3NoaXBwaW5nQWRkcmVzcyAuZm9ybWFjdGlvbnMgI21lc3NhZ2UnKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICBqUXVlcnkoJyNkd2ZybV9zaW5nbGVzaGlwcGluZ19zaGlwcGluZ0FkZHJlc3MgLmZvcm1hY3Rpb25zIC5zaW5nbGVzaGlwcGluZ19lcnJvcicpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGpRdWVyeSgnLnNpbmdsZXNoaXBwaW5nX2Vycm9yJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgalF1ZXJ5KCcjZHdmcm1fc2luZ2xlc2hpcHBpbmdfc2hpcHBpbmdBZGRyZXNzIC5mb3JtYWN0aW9ucycpLnByZXBlbmQoZXJyb3Jtc2cpO1xyXG4gICAgICAgICAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJCgnLnNpbmdsZXNoaXBwaW5nX2Vycm9yJykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnYm9keScpLm9uKCdjbGljaycsICcuZ28tYXMtZ3Vlc3QtY2hlY2tvdXQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnLnNoaXBwaW5nLWNoZWNrb3V0YXNndWVzdCwgLnNpZ25pbnRvbXlhY2NvdW50LWJsb2NrJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAkKCcuc2hpcHBpbmdsb2dpbmRldGFpbHMgLCAuYWRkcmVzc2lkJykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICB1aWV2ZW50cy5zeW5jY2hlY2tvdXRIKCk7XHJcbiAgICB9KTtcclxuICAgIGlmICgkKCcuc3RhdGUtc2hpcHBpbmctdmFsaWQtZGlhbG9nJykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHZhciBkaWFsb2dXaWR0aCA9IDUxMTtcclxuICAgICAgICB2YXIgc2luZ091dERpYWxvZyA9IGRpYWxvZy5jcmVhdGUoe1xyXG4gICAgICAgICAgICB0YXJnZXQ6ICcjZGlhbG9nLWNvbnRhaW5lcicsXHJcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcclxuICAgICAgICAgICAgICAgIGJnaWZyYW1lOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgYXV0b09wZW46IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgbW9kYWw6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogZGlhbG9nV2lkdGgsXHJcbiAgICAgICAgICAgICAgICBkaWFsb2dDbGFzczogJ3N0YXRlLXNoaXBwaW5nLWRpYWxvZydcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoc2luZ091dERpYWxvZykuZW1wdHkoKS5hcHBlbmQoJCgnLnN0YXRlLXNoaXBwaW5nLXZhbGlkLWRpYWxvZycpLmh0bWwoKSk7XHJcbiAgICAgICAgc2luZ091dERpYWxvZy5kaWFsb2coJ29wZW4nKTtcclxuICAgIH1cclxuICAgICQoJ2JvZHknKS5vbignY2xpY2snLCAnLnNoaXBwaW5nc2lnbm91dCcsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogdGhpcy5ocmVmLFxyXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRpYWxvZ1dpZHRoID0gNTAwO1xyXG4gICAgICAgICAgICAgICAgLyppZiggJCh3aW5kb3cpLndpZHRoKCkgPCA3NjcgKXtcclxuICAgICAgICAgICAgICAgICAgICBkaWFsb2dXaWR0aCA9IDMwMFxyXG4gICAgICAgICAgICAgICAgfSovXHJcbiAgICAgICAgICAgICAgICB2YXIgc2luZ091dERpYWxvZyA9IGRpYWxvZy5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogJyNkaWFsb2ctY29udGFpbmVyJyxcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJnaWZyYW1lOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRvT3BlbjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFsOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogZGlhbG9nV2lkdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpYWxvZ0NsYXNzOiAnc2luZy1vdXQtZGlhbG9nJ1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgJChzaW5nT3V0RGlhbG9nKS5lbXB0eSgpLmFwcGVuZChkYXRhKTtcclxuICAgICAgICAgICAgICAgIHNpbmdPdXREaWFsb2cuZGlhbG9nKCdvcGVuJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgJCgnYm9keScpLm9uKCdjbGljaycsICcuc2lnbmludG9teWFjY291bnRidXR0b24nLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2lnbmluKCk7XHJcbiAgICAgICAgJCgnZm9ybVtpZCQ9XCJfbG9naW5cIl0gLmZvcm1maWVsZC51c2VybmFtZSwgZm9ybVtpZCQ9XCJfbG9naW5cIl0gLmZvcm1maWVsZC5wYXNzd29yZCcpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy52YWx1ZSBpbnB1dCcpLnZhbCgnJykucmVtb3ZlQ2xhc3MoJ2Vycm9yY2xpZW50Jyk7XHJcbiAgICAgICAgICAgICQodGhpcykuZmluZCgnLnZhbHVlIHNwYW4uZXJyb3JjbGllbnQnKS5oaWRlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJCgnZm9ybVtpZCQ9XCJfbG9naW5cIl0gLndyb25nYWRkcmVzcycpLmhpZGUoKTtcclxuICAgICAgICAkKCdmb3JtW2lkJD1cIl9sb2dpblwiXSAuI21lc3NhZ2UuZXJyb3InKS5yZW1vdmUoKTtcclxuXHJcbiAgICAgICAgJCgnLnNpbmdsZXNoaXBwaW5nX2Vycm9yJykuaGlkZSgpO1xyXG4gICAgICAgICQoJy5zaGlwcGluZy1lbWFpbGRldGFpbGxpbmtzJykuYWRkQ2xhc3MoJ2xvZ2luYWN0aXZlJyk7XHJcbiAgICAgICAgJCgnLnNoaXBwaW5nLWVtYWlsZGV0YWlsbGlua3MnKS5yZW1vdmVDbGFzcygncmVnaW5hY3RpdmUnKTtcclxuICAgICAgICAkKCcuTmV3LXNoaXBwaW5nLWF1dGhlbnRpY2F0aW9uLWRldGFpbCBpbnB1dFtpZCQ9XCJzaGlwcGluZ0FkZHJlc3NfZW1haWxcIl0nKS5yZW1vdmVDbGFzcygnYWNjZW1haWwnKTtcclxuICAgICAgICAkKCcuTmV3LXNoaXBwaW5nLWF1dGhlbnRpY2F0aW9uLWRldGFpbCBpbnB1dFtpZCQ9XCJzaGlwcGluZ0FkZHJlc3NfZW1haWxjb25maXJtXCJdJykucmVtb3ZlQ2xhc3MoJ2FjY2VtYWlsY29uJyk7XHJcbiAgICAgICAgJCgnLk5ldy1zaGlwcGluZy1hdXRoZW50aWNhdGlvbi1kZXRhaWwgaW5wdXRbbmFtZSQ9XFwnX2d1ZXN0ZW1haWxjb25maXJtXFwnXScpLnJlbW92ZUNsYXNzKCdndWVzdGVtYWlsY29uJyk7XHJcbiAgICAgICAgJCgnLk5ldy1zaGlwcGluZy1hdXRoZW50aWNhdGlvbi1kZXRhaWwgaW5wdXRbbmFtZSQ9XFwnX2d1ZXN0ZW1haWxcXCddJykucmVtb3ZlQ2xhc3MoJ2d1ZXN0ZW1haWwnKTtcclxuICAgICAgICAkKCcuc2hpcHBpbmdsb2dpbmRldGFpbHMgaW5wdXRbbmFtZSQ9XFwnbG9naW5fdXNlcm5hbWVcXCddJykuYWRkQ2xhc3MoJ2xvZ2dlZGVtYWlsJyk7XHJcbiAgICAgICAgJCgnLnNoaXBwaW5nbG9naW5kZXRhaWxzIC5jb3JyZWN0YWRkcmVzcycpLnJlbW92ZUNsYXNzKCdlcnJvcicpLmhpZGUoKTtcclxuICAgICAgICBpZiAoJCgnLmVtYWlsaGlkZGVuJykudmFsKCkpIHtcclxuICAgICAgICAgICAgJCgnaW5wdXRbaWQkPVwibG9naW5fdXNlcm5hbWVcIl0nKS52YWwoJCgnLmVtYWlsaGlkZGVuJykudmFsKCkpO1xyXG4gICAgICAgICAgICAkKCdpbnB1dFtpZCQ9XCJsb2dpbl91c2VybmFtZVwiXScpLmJsdXIoKTtcclxuICAgICAgICAgICAgJCgnaW5wdXRbaWQkPVwibG9naW5fdXNlcm5hbWVcIl0nKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmNvcnJlY3RhZGRyZXNzJykuc2hvdygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkKCcuTmV3LXNoaXBwaW5nLWF1dGhlbnRpY2F0aW9uLWRldGFpbCBpbnB1dFtuYW1lJD1cXCdzaGlwcGluZ0FkZHJlc3NfcGFzc3dvcmRcXCddJykucmVtb3ZlQ2xhc3MoJ2NfcGFzc3dvcmQnKTtcclxuICAgICAgICAkKCcuTmV3LXNoaXBwaW5nLWF1dGhlbnRpY2F0aW9uLWRldGFpbCBpbnB1dFtuYW1lJD1cXCdzaGlwcGluZ0FkZHJlc3NfcGFzc3dvcmRjb25maXJtXFwnXScpLnJlbW92ZUNsYXNzKCdjbV9wYXNzd29yZCcpO1xyXG4gICAgICAgICQoJy5zaGlwcGluZ2xvZ2luZGV0YWlscyBpbnB1dFtuYW1lJD1cXCdsb2dpbl9wYXNzd29yZFxcJ10nKS5hZGRDbGFzcygnbG9naW5fcGFzc3dvcmQnKTtcclxuICAgICAgICAkKCcuc2hpcHBpbmctYWRkcmVzcy1maWVsZC1zZWN0aW9uIC52YWx1ZSBpbnB1dCcpLnJlbW92ZUNsYXNzKCdlcnJvcmNsaWVudCcpO1xyXG4gICAgICAgICQoJy5zaGlwcGluZy1hZGRyZXNzLWZpZWxkLXNlY3Rpb24gLnZhbHVlIHNwYW4uZXJyb3JjbGllbnQnKS5oaWRlKCk7XHJcbiAgICAgICAgJCgnLmN1c3RvbS1zZWxlY3QnKS5yZW1vdmVDbGFzcygnY3VzdG9tc2VsZWN0LWVycm9yJyk7XHJcbiAgICAgICAgJCgnLnN0YXRlZXJyb3InKS5oaWRlKCk7XHJcbiAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnLnNoaXBwaW5nLWd1ZXN0ZW1haWxhZGRyZXNzIC50ZXh0aW5wdXQsIC5zaGlwcGluZy1ndWVzdGNvbmZpcm1lbWFpbGFkZHJlc3MgLnRleHRpbnB1dCwgLnNoaXBwaW5nbG9naW5kZXRhaWxzIC51c2VybmFtZSAudGV4dGlucHV0LCAuc2hpcHBpbmdsb2dpbmRldGFpbHMgLnRleHRpbnB1dHB3LCAuc2hpcHBpbmctZW1haWxhZGRyZXNzIC50ZXh0aW5wdXQsIC5zaGlwcGluZy1jb25maXJtZW1haWxhZGRyZXNzIC50ZXh0aW5wdXQsIC5zaGlwcGluZy1wYXNzd29yZCAudGV4dGlucHV0cHcsIC5zaGlwcGluZy1jb25maXJtcGFzc3dvcmQgLnRleHRpbnB1dHB3JykuYmx1cihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCQodGhpcykudmFsaWQoKSA9PSAwKSB7XHJcbiAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5jb3JyZWN0YWRkcmVzcycpLmFkZENsYXNzKCdlcnJvcicpLnNob3coKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcuY29ycmVjdGFkZHJlc3MnKS5yZW1vdmVDbGFzcygnZXJyb3InKS5zaG93KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAvL1BSRVZBSUwgLSBpbml0IEFkZHJlc3MgVmFsaWRhdGlvblxyXG4gICAgcmVxdWlyZSgnLi4vLi4vYWRkcmVzc3ZhbGlkYXRpb24nKS5pbml0KCk7XHJcbn07XHJcblxyXG5leHBvcnRzLnVwZGF0ZVNoaXBwaW5nTWV0aG9kTGlzdCA9IHVwZGF0ZVNoaXBwaW5nTWV0aG9kTGlzdDtcclxuZXhwb3J0cy51cGRhdGVTdW1tYXJ5ID0gdXBkYXRlU3VtbWFyeTsgLy9KSVJBIFBSRVYtOTkgOiBzaGlwcGluZyBtZXRob2RzIGlzIG5vdCBkaXNwbGF5ZWQgZm9yIDJuZCBhZGRyZXNzIGluIHJpZ2h0IG5hdi5cclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxudmFyIGFkZFByb2R1Y3RUb0NhcnQgPSByZXF1aXJlKCcuL3Byb2R1Y3QvYWRkVG9DYXJ0JyksXHJcbiAgICBhamF4ID0gcmVxdWlyZSgnLi4vYWpheCcpLFxyXG4gICAgcGFnZSA9IHJlcXVpcmUoJy4uL3BhZ2UnKSxcclxuICAgIHByb2R1Y3RUaWxlID0gcmVxdWlyZSgnLi4vcHJvZHVjdC10aWxlJyksXHJcbiAgICBxdWlja3ZpZXcgPSByZXF1aXJlKCcuLi9xdWlja3ZpZXcnKTtcclxuXHJcbi8qKlxyXG4gKiBAcHJpdmF0ZVxyXG4gKiBAZnVuY3Rpb25cclxuICogQGRlc2NyaXB0aW9uIEJpbmRzIHRoZSBjbGljayBldmVudHMgdG8gdGhlIHJlbW92ZS1saW5rIGFuZCBxdWljay12aWV3IGJ1dHRvblxyXG4gKi9cclxuZnVuY3Rpb24gaW5pdGlhbGl6ZUV2ZW50cygpIHtcclxuICAgICQoJyNjb21wYXJlLXRhYmxlJykub24oJ2NsaWNrJywgJy5yZW1vdmUtbGluaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGFqYXguZ2V0SnNvbih7XHJcbiAgICAgICAgICAgIHVybDogdGhpcy5ocmVmLFxyXG4gICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAvKiBTdGFydCBKSVJBIFBSRVYtNzQgOiBDb21wYXJlIHBhZ2U6IE5vdCBuYXZpZ2F0aW5nIHRvIFBMUCwgV2hlbiB1c2VyIGNsaWNrcyB0aGUgXCJSZW1vdmUgKFgpXCIgaWNvbiBvbiB0aGUgbGFzdCBwcm9kdWN0LHByZXNlbnQgaW4gdGhlIHByb2R1Y3QgY29tcGFyZSBwYWdlLlxyXG4gICAgICAgICAgICAgICAgICAgQWRkZWQgY29uZGl0aW9uIHRvIGNoZWNrIGZvciB0aGUgbGFzdCBwcm9kdWN0IHJlbW92YWwgaWYgc28gbmF2aWdhdGUgYmFjayB0byBwcmV2aW91cyBQTFAuXHJcbiAgICAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmICQoJyNjb21wYXJlLXRhYmxlIC5wcm9kdWN0LXRpbGUnKS5sZW5ndGggPD0gMSAmJiAkKCcjY29tcGFyZS1jYXRlZ29yeS1saXN0JykubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAkKCcuYmFjaycpLmF0dHIoJ2hyZWYnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiAkKCcjY29tcGFyZS10YWJsZSAucHJvZHVjdC10aWxlJykubGVuZ3RoIDw9IDEgJiYgJCgnI2NvbXBhcmUtY2F0ZWdvcnktbGlzdCcpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcjY29tcGFyZS1jYXRlZ29yeS1saXN0IG9wdGlvbjpzZWxlY3RlZCcpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJyNjb21wYXJlLWNhdGVnb3J5LWxpc3QnKS50cmlnZ2VyKCdjaGFuZ2UnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZS5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvKkVuZCBKSVJBIFBSRVYtNzQgKi9cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSlcclxuICAgICAgICAub24oJ2NsaWNrJywgJy5vcGVuLXF1aWNrLXZpZXcnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHZhciB1cmwgPSAkKHRoaXMpLmNsb3Nlc3QoJy5wcm9kdWN0JykuZmluZCgnLnRodW1iLWxpbmsnKS5hdHRyKCdocmVmJyk7XHJcbiAgICAgICAgICAgIHF1aWNrdmlldy5zaG93KHtcclxuICAgICAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICAgICAgc291cmNlOiAncXVpY2t2aWV3J1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAkKCcjY29tcGFyZS1jYXRlZ29yeS1saXN0Jykub24oJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJ2Zvcm0nKS5zdWJtaXQoKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnRzLmluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBwcm9kdWN0VGlsZS5pbml0KCk7XHJcbiAgICBpbml0aWFsaXplRXZlbnRzKCk7XHJcbiAgICBhZGRQcm9kdWN0VG9DYXJ0KCk7XHJcbn07XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuXHJcbnZhciB1dGlsID0gcmVxdWlyZSgnLi4vdXRpbCcpO1xyXG5cclxuZnVuY3Rpb24gaW5pdGlhbGl6YXRpb25FdmVudCgpIHtcclxuICAgIHZhciBjdXJyZW50U2l0ZUlEID0gJyc7XHJcbiAgICB2YXIgY3VycmVudFNlc3Npb25TaXRlID0gJCgnYm9keScpLmZpbmQoJy5jdXJyZW50LXNlc3Npb24tc2l0ZScpLnZhbCgpO1xyXG4gICAgc3dpdGNoIChjdXJyZW50U2Vzc2lvblNpdGUpIHtcclxuICAgICAgICBjYXNlICdyYXBhbGEnOlxyXG4gICAgICAgICAgICBjdXJyZW50U2l0ZUlEID0gJzEnO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdzdWZpeCc6XHJcbiAgICAgICAgICAgIGN1cnJlbnRTaXRlSUQgPSAnMic7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ3RyaWdnZXJ4JzpcclxuICAgICAgICAgICAgY3VycmVudFNpdGVJRCA9ICczJztcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnc3Rvcm0nOlxyXG4gICAgICAgICAgICBjdXJyZW50U2l0ZUlEID0gJzQnO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdsdWhyamVuc2VuJzpcclxuICAgICAgICAgICAgY3VycmVudFNpdGVJRCA9ICc1JztcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAndm1jJzpcclxuICAgICAgICAgICAgY3VycmVudFNpdGVJRCA9ICc2JztcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAndGVybWluYXRvcic6XHJcbiAgICAgICAgICAgIGN1cnJlbnRTaXRlSUQgPSAnNyc7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ2JsdWVmb3gnOlxyXG4gICAgICAgICAgICBjdXJyZW50U2l0ZUlEID0gJzgnO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICd3aWxsaWFtc29uJzpcclxuICAgICAgICAgICAgY3VycmVudFNpdGVJRCA9ICc5JztcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnbWFyY3VtJzpcclxuICAgICAgICAgICAgY3VycmVudFNpdGVJRCA9ICcxMCc7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ3N0cmlrZW1hc3Rlcic6XHJcbiAgICAgICAgICAgIGN1cnJlbnRTaXRlSUQgPSAnMTEnO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdpY2Vmb3JjZSc6XHJcbiAgICAgICAgICAgIGN1cnJlbnRTaXRlSUQgPSAnMjAnO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdvdHRlcic6XHJcbiAgICAgICAgICAgIGN1cnJlbnRTaXRlSUQgPSAnMjEnO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICBjdXJyZW50U2l0ZUlEID0gJzEnO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChkb2N1bWVudC5sb2NhdGlvbi5wYXRobmFtZS5pbmRleE9mKCdDaGFuZ2VSZWdpb24nKSA8IDApIHtcclxuICAgICAgICBpZiAodHlwZW9mIGdlb2lwQ291bnRyeUNvZGUgPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICB2YXIgSVBHZW9Db2RlID0gZ2VvaXBDb3VudHJ5Q29kZSgpO1xyXG4gICAgICAgICAgICB2YXIgYWxsb3dlZENvdW50cmllcyA9ICQoJy5hbGxvd2VkLWNvdW50cmllcycpLnRleHQoKTtcclxuICAgICAgICAgICAgaWYgKGFsbG93ZWRDb3VudHJpZXMgPT0gbnVsbCB8fCBhbGxvd2VkQ291bnRyaWVzID09ICdudWxsJyB8fCBhbGxvd2VkQ291bnRyaWVzID09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICBhbGxvd2VkQ291bnRyaWVzID0gJ1VTJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoYWxsb3dlZENvdW50cmllcy5pbmRleE9mKElQR2VvQ29kZSkgIT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIHZhciB1cmwgPSB1dGlsLmFwcGVuZFBhcmFtVG9VUkwoVXJscy5pbnRlcm5hdGlvbmFsSG9tZVNob3csICdpZCcsIGN1cnJlbnRTaXRlSUQpO1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSB1cmw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG52YXIgaW50ZXJuYXRpb25hbCA9IHtcclxuICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpbml0aWFsaXphdGlvbkV2ZW50KCk7XHJcbiAgICB9XHJcbn07XHJcbm1vZHVsZS5leHBvcnRzID0gaW50ZXJuYXRpb25hbDtcclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxudmFyIGRpYWxvZyA9IHJlcXVpcmUoJy4uLy4uL2RpYWxvZycpLFxyXG4gICAgbWluaWNhcnQgPSByZXF1aXJlKCcuLi8uLi9taW5pY2FydCcpLFxyXG4gICAgdXRpbCA9IHJlcXVpcmUoJy4uLy4uL3V0aWwnKSxcclxuICAgIFRQcm9taXNlID0gcmVxdWlyZSgncHJvbWlzZScpLFxyXG4gICAgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xyXG5cclxuLyoqXHJcbiAqIEBkZXNjcmlwdGlvbiBIYW5kbGVyIHRvIGhhbmRsZSB0aGUgYWRkIGFsbCBpdGVtcyB0byBjYXJ0IGV2ZW50XHJcbiAqL1xyXG52YXIgYWRkQWxsVG9DYXJ0ID0gZnVuY3Rpb24gKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAvL1BSRVZBSUwtQWRkZWQgZm9yIEdBIGludGVncmF0aW9uXHJcbiAgICAvL0dBY29tbWVudGVkXHJcbiAgICBpZiAoaXNFdmVudFRyYWNraW5nRW5hYmxlZCAmJiBpc0dvb2dsZUFuYWx5dGljc0VuYWJsZWQpIHtcclxuICAgICAgICBnb29nbGVBbmFseXRpY3NFdmVudHMuYWRkUHJvZHVjdFNldCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciAkcHJvZHVjdEZvcm1zID0gJCgnI3Byb2R1Y3Qtc2V0LWxpc3QnKS5maW5kKCdmb3JtJykudG9BcnJheSgpO1xyXG4gICAgVFByb21pc2UuYWxsKF8ubWFwKCRwcm9kdWN0Rm9ybXMsIGFkZFRvQ2FydCkpXHJcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlcykge1xyXG4gICAgICAgICAgICBkaWFsb2cuY2xvc2UoKTtcclxuICAgICAgICAgICAgLy8gc2hvdyB0aGUgZmluYWwgcmVzcG9uc2Ugb25seSwgd2hpY2ggd291bGQgaW5jbHVkZSBhbGwgdGhlIG90aGVyIGl0ZW1zXHJcbiAgICAgICAgICAgIG1pbmljYXJ0LnNob3cocmVzcG9uc2VzW3Jlc3BvbnNlcy5sZW5ndGggLSAxXSk7XHJcbiAgICAgICAgfSk7XHJcbn07XHJcblxyXG4vKipcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBkZXNjcmlwdGlvbiBCaW5kcyB0aGUgY2xpY2sgZXZlbnQgdG8gYSBnaXZlbiB0YXJnZXQgZm9yIHRoZSBhZGQtdG8tY2FydCBoYW5kbGluZ1xyXG4gKi9cclxuLy8gYWRkcyBhIHByb2R1Y3QgdG8gdGhlIG1pbmkgY2FydFxyXG4vLyBAcGFyYW1zXHJcbi8vIHByb2dyZXNzSW1hZ2VTcmMgLSBzb3VyY2UvdXJsIG9mIHRoZSBpbWFnZSB0byBzaG93IHdoZW4gdGhlIGl0ZW1cclxuLy8gaXMgYmVpbmcgYWRkZWQgdG8gdGhlIGNhcnRcclxuLy8gcG9zdGRhdGEgLSBmb3JtIGRhdGEgY29udGFpbmluZyB0aGUgcHJvZHVjdCBpbmZvcm1hdGlvbiB0byBiZVxyXG4vLyBhZGRlZCB0byBtaW5pLWNhcnRcclxuLy8gY2FsbGJhY2sgLSBjYWxsIGJhY2sgZnVuY3Rpb24vaGFuZGxlclxyXG52YXIgYWRkVG9DYXJ0ID0ge1xyXG4gICAgaW5pdDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJy5jaGVja291dG1pbmljYXJ0Jykuc2xpbXNjcm9sbCgpO1xyXG4gICAgICAgICQoJy5hZGQtdG8tY2FydFtkaXNhYmxlZF0nKS5hdHRyKCd0aXRsZScsICQoJy5hdmFpbGFiaWxpdHktbXNnJykudGV4dCgpKTtcclxuICAgICAgICAvL1N0YXJ0IEpJUkEgUFJFVi00NTQsIFBSRVYtNDY5IDogQXBwbGljYXRpb24gbmF2aWdhdGlvbiBub3QgY29uc2lzdGVudCB3aGVuIGNsaWNrIG9mIGFkZCB0byBjYXJ0IGJ1dHRvbiBvZiB0aGUgUHJvZHVjdCBzZXQgcGFnZVxyXG4gICAgICAgICQoJyNhZGQtYWxsLXRvLWNhcnQnKS5vbignY2xpY2snLCBhZGRBbGxUb0NhcnQpO1xyXG4gICAgICAgIGlmICgkKCcubWluaS1jYXJ0LXByb2R1Y3QnKS5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgICQoJy5taW5pY2FydGNvbnRlbnQgLnNsaW1TY3JvbGxEaXYnKS5yZW1vdmVDbGFzcygnbGVzcycpO1xyXG4gICAgICAgICAgICAkKCcubWluaWNhcnRjb250ZW50IC5zbGltU2Nyb2xsRGl2IC5zbGltU2Nyb2xsQmFyJykuc2hvdygpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICQoJy5taW5pY2FydGNvbnRlbnQgLnNsaW1TY3JvbGxEaXYnKS5hZGRDbGFzcygnbGVzcycpO1xyXG4gICAgICAgICAgICAkKCcubWluaWNhcnRjb250ZW50IC5zbGltU2Nyb2xsRGl2IC5zbGltU2Nyb2xsQmFyJykuaGlkZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBhZGQ6IGZ1bmN0aW9uIChwcm9ncmVzc0ltYWdlU3JjLCBwb3N0ZGF0YSwgY2FsbGJhY2spIHtcclxuICAgICAgICAvLyBnZXQgdGhlIGRhdGEgb2YgdGhlIGZvcm0gYXMgc2VyaWFsaXplZCBzdHJpbmdcclxuICAgICAgICAvL3ZhciBwb3N0ZGF0YSA9IHBvc3RkYXRhO1xyXG5cclxuICAgICAgICBmYnEoJ3RyYWNrJywgJ0FkZFRvQ2FydCcsIHtcclxuICAgICAgICAgICAgJ2NvbnRlbnRfaWRzJzogW3Bvc3RkYXRhLnBpZF0sXHJcbiAgICAgICAgICAgICdjb250ZW50X3R5cGUnOiAncHJvZHVjdCdcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gZ2V0IGJ1dHRvbiByZWZlcmVuY2VcclxuICAgICAgICB2YXIgYWRkQnV0dG9ucyA9IFtdO1xyXG5cclxuICAgICAgICAvLyB0aGUgYnV0dG9uIHRvIHVwZGF0ZVxyXG4gICAgICAgIHZhciBhZGRCdXR0b24gPSBudWxsO1xyXG5cclxuICAgICAgICAvLyBpdCBpcyBhbiBhcnJheSBvZiBidXR0b25zLCBidXQgd2UgbmVlZCBvbmx5IG9uZSBhbGxcclxuICAgICAgICAvLyBvdGhlciBjb21iaW5hdGlvbnMgYXJlIHN0cmFuZ2Ugc28gZmFyXHJcbiAgICAgICAgaWYgKGFkZEJ1dHRvbnMubGVuZ3RoID09IDEpIHtcclxuICAgICAgICAgICAgYWRkQnV0dG9uID0gYWRkQnV0dG9uc1swXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBwcmV2aW91c0ltYWdlU3JjID0gbnVsbDtcclxuXHJcbiAgICAgICAgLy8gc2hvdyBwcm9ncmVzcyBpbmRpY2F0b3JcclxuICAgICAgICBpZiAoYWRkQnV0dG9uICE9IG51bGwpIHtcclxuICAgICAgICAgICAgcHJldmlvdXNJbWFnZVNyYyA9IGFkZEJ1dHRvbi5zcmM7XHJcbiAgICAgICAgICAgIGFkZEJ1dHRvbi5zcmMgPSBwcm9ncmVzc0ltYWdlU3JjO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gaGFuZGxlcyBzdWNjZXNzZnVsIGFkZCB0byBjYXJ0XHJcbiAgICAgICAgdmFyIGhhbmRsZXJGdW5jID0gZnVuY3Rpb24gKHJlcSkge1xyXG5cclxuICAgICAgICAgICAgaWYgKCQoJyNjb250YWluZXInKS5oYXNDbGFzcygncHRfY2FydCcpKSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGhpZGUgcHJvZ3Jlc3MgaW5kaWNhdG9yXHJcbiAgICAgICAgICAgIGlmIChhZGRCdXR0b24gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgYWRkQnV0dG9uLnNyYyA9IHByZXZpb3VzSW1hZ2VTcmM7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIHJlcGxhY2UgdGhlIGNvbnRlbnRcclxuICAgICAgICAgICAgalF1ZXJ5KCcjbWluaWNhcnQnKS5odG1sKHJlcSk7XHJcbiAgICAgICAgICAgIGFkZFRvQ2FydC5pbml0KCk7XHJcbiAgICAgICAgICAgIGlmICgkKCcubWluaXJvdycpLmxlbmd0aCA+IDEgJiYgISgkKCdib2R5JykuaGFzQ2xhc3MoJ3JhcGFsYV9kZXZpY2UnKSkpIHtcclxuICAgICAgICAgICAgICAgICQoJy5jaGVja291dG1pbmljYXJ0Jykuc2xpbXNjcm9sbCh7XHJcbiAgICAgICAgICAgICAgICAgICAgcmFpbFZpc2libGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgYWx3YXlzVmlzaWJsZTogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAkKCcubWluaWNhcnR0YWJsZScpLmZpbmQoJ3RoZWFkJykuZmlyc3QoKS5hZGRDbGFzcygndGhlYWRmaXhlZFRvcCcpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmNoZWNrb3V0bWluaWNhcnQnKS5maW5kKCcuY2FydG9yZGVydG90YWxzJykucmVtb3ZlQ2xhc3MoJ2NhcnR0b3RhbHMnKTtcclxuICAgICAgICAgICAgICAgICQoJy5jaGVja291dG1pbmljYXJ0JykuZmluZCgnLm1pbmljYXJ0dGFibGUnKS5yZW1vdmVDbGFzcygnbWluaXdpdGhvdXRTY3JvbGwnKTtcclxuICAgICAgICAgICAgICAgICQoJy5taW5pY2FydGNvbnRlbnQnKS5maW5kKCcubWluaWNhcnR0YWJsZWhlYWRlcicpLnJlbW92ZUNsYXNzKCdtaW5pd2l0aG91dFNjcm9sbGhlYWQnKTtcclxuICAgICAgICAgICAgICAgICQoJy5taW5pY2FydHRhYmxlaGVhZGVyJykuY3NzKCdib3JkZXItYm90dG9tJywgJzFweCBzb2xpZCAjY2NjJyk7XHJcblxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJCgnLm1pbmljYXJ0dGFibGUnKS5maW5kKCcudGhlYWRmaXhlZFRvcCcpLnJlbW92ZUNsYXNzKCd0aGVhZGZpeGVkVG9wJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcubWluaWNhcnR0YWJsZScpLmZpbmQoJy5maXhlZFRvcCcpLnJlbW92ZUNsYXNzKCdmaXhlZFRvcCcpO1xyXG4gICAgICAgICAgICAgICAgJCgnLm1pbmljYXJ0JykuZmluZCgnLmNhcnRvcmRlcnRvdGFscycpLmFkZENsYXNzKCdjYXJ0dG90YWxzJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcuY2hlY2tvdXRtaW5pY2FydCcpLmZpbmQoJy5taW5pY2FydHRhYmxlJykuYWRkQ2xhc3MoJ21pbml3aXRob3V0U2Nyb2xsJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcubWluaWNhcnRjb250ZW50JykuZmluZCgnLm1pbmljYXJ0dGFibGVoZWFkZXInKS5hZGRDbGFzcygnbWluaXdpdGhvdXRTY3JvbGxoZWFkJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcubWluaWNhcnR0YWJsZWhlYWRlcicpLmNzcygnYm9yZGVyLWJvdHRvbScsICcxcHggc29saWQgI2NjYycpO1xyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCQoJ2JvZHknKS5oYXNDbGFzcygncmFwYWxhX2RldmljZScpKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcuY2hlY2tvdXRtaW5pY2FydCcpLmZpbmQoJy5taW5pY2FydHRhYmxlJykucmVtb3ZlQ2xhc3MoJ21pbml3aXRob3V0U2Nyb2xsJyk7XHJcbiAgICAgICAgICAgICAgICAvLyAkKFwiLm1pbmljYXJ0dGFibGUgLnRyX3JvdGF0aW9uOmxhc3QtY2hpbGRcIikuZmluZCgnLm1pbmlyb3cnKS5jc3MoJ2JvcmRlcicsJzFweCcpO1xyXG4gICAgICAgICAgICAgICAgJCgnLm1pbmljYXJ0dGFibGUnKS5maW5kKCd0aGVhZCcpLmZpcnN0KCkuYWRkQ2xhc3MoJ3RoZWFkZml4ZWRUb3AnKTtcclxuICAgICAgICAgICAgICAgICQoJy5taW5pY2FydHRhYmxlIC50cl9yb3RhdGlvbjpsYXN0LWNoaWxkJykuZmluZCgnLm1pbmlyb3cnKS5jc3MoJ2JvcmRlcicsICcwcHgnKTtcclxuICAgICAgICAgICAgICAgICQoJy5taW5pY2FydHRhYmxlaGVhZGVyJykuY3NzKCdib3JkZXItYm90dG9tJywgJzFweCBzb2xpZCAjY2NjJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJCgnLm1pbmljYXJ0dGFibGUgLnRyX3JvdGF0aW9uOmxhc3QtY2hpbGQnKS5maW5kKCcubWluaXJvdycpLmNzcygnYm9yZGVyJywgJzBweCcpO1xyXG5cclxuICAgICAgICAgICAgaWYgKG1pbmljYXJ0LnN1cHByZXNzU2xpZGVEb3duICYmIG1pbmljYXJ0LnN1cHByZXNzU2xpZGVEb3duKCkpIHtcclxuICAgICAgICAgICAgICAgIC8vIGRvIG5vdGhpbmdcclxuICAgICAgICAgICAgICAgIC8vIHRoZSBob29rICdNaW5pQ2FydC5zdXBwcmVzc1NsaWRlRG93bigpJyBzaG91bGQgaGF2ZVxyXG4gICAgICAgICAgICAgICAgLy8gZG9uZSB0aGUgcmVmcmVzaFxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbWluaWNhcnQuc2xpZGUoKTtcclxuICAgICAgICAgICAgICAgIG1pbmljYXJ0LnNldG1pbmljYXJoZWlnaHQoKTtcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJCgnI3BkcE1haW4gLmFkZHRvY2FydGNvbmZpcm0tdG9vbHRpcCcpLmZhZGVJbig0MDApLnNob3coKVxyXG4gICAgICAgICAgICAgICAgLmRlbGF5KDE1MDApLmZhZGVPdXQoNDAwKTtcclxuICAgICAgICAgICAgLy8gZmlyZSB0aGUgQm9udXNEaXNjb3VudExpbmVJdGVtQ2hlY2sgZXZlbnQgc28gd2UgY2FuIGNoZWNrXHJcbiAgICAgICAgICAgIC8vIGlmIHRoZXJlIGlzIGEgYm9udXMgZGlzY291bnQgbGluZSBpdGVtXHJcbiAgICAgICAgICAgIGpRdWVyeShkb2N1bWVudCkudHJpZ2dlcihcclxuICAgICAgICAgICAgICAgIC8qZXNsaW50LWRpc2FibGUgKi9cclxuICAgICAgICAgICAgICAgIGpRdWVyeS5FdmVudCgnQm9udXNEaXNjb3VudExpbmVJdGVtQ2hlY2snKSk7XHJcbiAgICAgICAgICAgICAgICAvKmVzbGludC1lbmFibGUgKi9cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBoYW5kbGVzIGFkZCB0byBjYXJ0IGVycm9yXHJcbiAgICAgICAgdmFyIGVyckZ1bmMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIGhpZGUgcHJvZ3Jlc3MgaW5kaWNhdG9yXHJcbiAgICAgICAgICAgIGlmIChhZGRCdXR0b24gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgYWRkQnV0dG9uLnNyYyA9IHByZXZpb3VzSW1hZ2VTcmM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBjbG9zZXMgYSBwcmV2aW91cyBtaW5pIGNhcnRcclxuICAgICAgICBtaW5pY2FydC5jbG9zZSgpO1xyXG5cclxuICAgICAgICB2YXIgdXJsID0gVXJscy5hZGRQcm9kdWN0O1xyXG5cclxuICAgICAgICAvLyBhZGQgdGhlIHByb2R1Y3RcclxuICAgICAgICAvL0xvb2tzIHRoZSBiZWxvdyBjb21tZW50ZWQgY29kZSBpcyBub3QgcmVxdWlyZWQgYW5kIHRoaXMgaXMgc3RvcHBpbmcgbm90IGFibGUgYWRkIHZhcmlhdGlvbiBwcm9kdWN0IGZyb20gcXVpY2sgdmlldyBpbiBjYXJ0IHBhZ2UuXHJcbiAgICAgICAgLyogaWYgKCQoJyNjb250YWluZXInKS5oYXNDbGFzcygncHRfY2FydCcpICYmICQoJy5hZGRUby1jYXJ0LXNlY3Rpb24nKS5maW5kKCcucmVjb21tZW5kYXRpb25fY2FydCcpLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgIHZhciBwbEl0ZW1JZCA9ICQoJ2lucHV0LmxpbmUtaXRlbWlkJykudmFsKCk7XHJcbiAgICAgICAgICAgIHZhciBwYXJhbXMgPSB7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVRdHk6ICd0cnVlJyxcclxuICAgICAgICAgICAgICAgIGxpbmVJdGVtSWQ6IHBsSXRlbUlkXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHVybCA9IHV0aWwuYXBwZW5kUGFyYW1zVG9VcmwoVXJscy5lZGl0TGluZUl0ZW0sIHBhcmFtcyk7XHJcbiAgICAgICAgfSAqL1xyXG5cclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB0eXBlOiAnUE9TVCcsXHJcbiAgICAgICAgICAgIHVybDogdXRpbC5hamF4VXJsKHVybCksXHJcbiAgICAgICAgICAgIGNhY2hlOiB0cnVlLFxyXG4gICAgICAgICAgICBkYXRhOiBwb3N0ZGF0YSxcclxuICAgICAgICAgICAgc3VjY2VzczogaGFuZGxlckZ1bmMsXHJcbiAgICAgICAgICAgIGVycm9yOiBlcnJGdW5jXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn07XHJcbm1vZHVsZS5leHBvcnRzID0gYWRkVG9DYXJ0O1xyXG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG52YXIgcGRwRXZlbnRzID0gcmVxdWlyZSgnLi9wZHBFdmVudHMnKSxcclxuICAgIGFkZFRvQ2FydCA9IHJlcXVpcmUoJy4vYWRkVG9DYXJ0Jyk7XHJcblxyXG52YXIgcHJvZHVjdCA9IHtcclxuICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvL2luaXRpYWxpemVEb20oKTtcclxuICAgICAgICAvL2luaXRpYWxpemVFdmVudHMoKTtcclxuICAgICAgICBhZGRUb0NhcnQuaW5pdCgpO1xyXG4gICAgICAgIHBkcEV2ZW50cy5pbml0KCk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHByb2R1Y3Q7XHJcbiIsIid1c2Ugc3RyaWN0JztcclxudmFyIHV0aWwgPSByZXF1aXJlKCcuLi8uLi91dGlsJyksXHJcbiAgICBkaWFsb2cgPSByZXF1aXJlKCcuLi8uLi9kaWFsb2cnKSxcclxuICAgIC8vdG9vbHRpcCA9IHJlcXVpcmUoJy4uLy4uL3Rvb2x0aXAnKSxcclxuICAgIC8vdWlldmVudHMgPSByZXF1aXJlKCcuLi8uLi91aWV2ZW50cycpLFxyXG4gICAgLy9xdWlja3ZpZXcgPSByZXF1aXJlKCcuLi8uLi9xdWlja3ZpZXcnKSxcclxuICAgIGFkZFRvQ2FydCA9IHJlcXVpcmUoJy4vYWRkVG9DYXJ0JyksXHJcbiAgICBwcm9ncmVzcyA9IHJlcXVpcmUoJy4uLy4uL3Byb2dyZXNzJyksXHJcbiAgICBhamF4ID0gcmVxdWlyZSgnLi4vLi4vYWpheCcpO1xyXG5cclxudmFyIHByb2R1Y3QgPSBmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgIC8vIHByb2R1Y3QgcHJpdmF0ZSBkYXRhXHJcblxyXG4gICAgLy8gcHJvZHVjdCBqc29uIGRhdGFcclxuICAgIHZhciBtb2RlbCA9IHJlc3BvbnNlO1xyXG5cclxuICAgIC8vIGRpdiBjb3RhaW5lciBpZFxyXG4gICAgdmFyIG15Q29udGFpbmVySWQgPSAnJztcclxuXHJcbiAgICAvLyBib29sZWFuIGZsYWcgdG8gdHJhY2sgdGhlIHZhcmlhbnRzIGRhdGEgcmVxdWVzdCwgcmVzZXQgaW4gbG9hZFZhcmlhbnRzKCkgd2hlbiB0aGUgdmFyaWFudHMgZGF0YSBpcyBsb2FkZWRcclxuICAgIHZhciBpc0xvYWRpbmdWYXIgPSBmYWxzZTtcclxuXHJcbiAgICAvLyBoZWxwZXIgZnVuY3Rpb24gdG8gbG9hZCB2YXJpYW50cyBkYXRhIGZyb20gdGhlIHNlcnZlclxyXG4gICAgLy8gb25jZSB0aGUgZGF0YSBpcyByZXRyaWV2ZWQsIGl0IGZpcmVzIFZhcmlhdGlvbnNMb2FkZWQgZXZlbnQgc28gdGhhdCBVSSBjYW4gYmUgcmVmcmVzaGVkIGFwcHJvcHJpYXRlbHlcclxuICAgIHZhciBsb2FkVmFyaWFudHMgPSBmdW5jdGlvbiAodGhpc1Byb2R1Y3QpIHtcclxuICAgICAgICBpc0xvYWRpbmdWYXIgPSB0cnVlO1xyXG4gICAgICAgIC8vIGJ1aWxkIHRoZSB1cmwgYW5kIGxvYWQgdmFyaWFudHMgZGF0YVxyXG4gICAgICAgIGFqYXguZ2V0SnNvbih7XHJcbiAgICAgICAgICAgIHVybDogVXJscy5nZXRWYXJpYW50cyxcclxuICAgICAgICAgICAgZGF0YTogeydwaWQnOiB0aGlzUHJvZHVjdC5waWQsICdmb3JtYXQnOiAnanNvbid9LFxyXG4gICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKGRhdGEpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIWRhdGEgfHwgIWRhdGEudmFyaWF0aW9ucyB8fCAhZGF0YS52YXJpYXRpb25zLnZhcmlhbnRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbW9kZWwudmFyaWF0aW9ucy52YXJpYW50cyA9IGRhdGEudmFyaWF0aW9ucy52YXJpYW50cztcclxuICAgICAgICAgICAgICAgIGlzTG9hZGluZ1ZhciA9IGZhbHNlOyAvLyB3ZSBoYXZlIGxvYWRlZCB0aGUgdmFyaWFudHNcclxuICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzUHJvZHVjdCkudHJpZ2dlcignVmFyaWF0aW9uc0xvYWRlZCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGhlbHBlciBmdW5jdGlvbiB0byByZWxvYWQgYXZhaWxhYmlsaXR5IGRhdGEuXHJcbiAgICAvLyBieSBkZWZhdWx0LCBhdmFpbGFiaWxpdHkgZGF0YSBpcyBiYXNlZCBvbiBhIHF1YW50aXR5IG9mIDEuXHJcbiAgICAvLyBpZiBhIGN1c3RvbWVyIGNoYW5nZXMgdGhlIHF1YW50aXR5LCB1c2UgdGhpcyBtZXRob2RcclxuICAgIC8vIHRvIHJlbG9hZCB0aGUgYXZhaWxhYmlsaXR5IGJhc2VkIG9uIHRoZSBuZXcgcXVhbnRpdHkuXHJcbiAgICB2YXIgcmVsb2FkQXZhaWxhYmlsaXR5ID0gZnVuY3Rpb24gKHRoaXNQcm9kdWN0LCBxdWFudGl0eSkge1xyXG5cclxuICAgICAgICB2YXIgaWQgPSAnJztcclxuICAgICAgICBpZiAodGhpc1Byb2R1Y3QubWFzdGVyIHx8IHRoaXNQcm9kdWN0LnZhcmlhbnQpIHtcclxuICAgICAgICAgICAgaWQgPSB0aGlzUHJvZHVjdC5zZWxlY3RlZFZhci5pZDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZCA9IHRoaXNQcm9kdWN0LnBpZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGFqYXguZ2V0SnNvbih7XHJcbiAgICAgICAgICAgIHVybDogVXJscy5nZXRBdmFpbGFiaWxpdHksXHJcbiAgICAgICAgICAgIGRhdGE6IHsncGlkJzogaWQsICdRdWFudGl0eSc6IHF1YW50aXR5LCAnZm9ybWF0JzogJ2pzb24nfSxcclxuICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChkYXRhKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFkYXRhIHx8ICFkYXRhLmxldmVscykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgdGhlIGRhdGEgaW4gdGhlIHZhcmlhbnRcclxuICAgICAgICAgICAgICAgIGlmICgodGhpc1Byb2R1Y3QubWFzdGVyIHx8IHRoaXNQcm9kdWN0LnZhcmlhbnQpICYmIHRoaXNQcm9kdWN0LnNlbGVjdGVkVmFyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3Quc2VsZWN0ZWRWYXIuYXZMZXZlbHMgPSBkYXRhLmxldmVscztcclxuICAgICAgICAgICAgICAgICAgICB0aGlzUHJvZHVjdC5zZWxlY3RlZFZhci5hdlN0YXR1cyA9IGRhdGEuc3RhdHVzO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LnNlbGVjdGVkVmFyLmF2U3RhdHVzUXVhbnRpdHkgPSBkYXRhLnN0YXR1c1F1YW50aXR5O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBtb2RlbC5hdkxldmVscyA9IGRhdGEubGV2ZWxzO1xyXG4gICAgICAgICAgICAgICAgICAgIG1vZGVsLmF2U3RhdHVzID0gZGF0YS5zdGF0dXM7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kZWwuYXZTdGF0dXNRdWFudGl0eSA9IGRhdGEuc3RhdHVzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXNQcm9kdWN0KS50cmlnZ2VyKCdSZWxvYWRBdmFpbGFiaWxpdHknKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH07XHJcbiAgICAvLyByZXR1cm5zIHRoZSBhZ2dyZWdhdGUgYXZhaWxhYmxlIHRvIHNlbGwgdmFsdWVcclxuICAgIC8vIGZyb20gYWxsIHZhcmlhbnRzXHJcbiAgICB2YXIgZ2V0QVRTID0gZnVuY3Rpb24gKHZhcmlhbnRzKSB7XHJcblxyXG4gICAgICAgIHZhciBhdHNDb3VudCA9IDA7XHJcbiAgICAgICAgdmFyIHZhcmlhbnQ7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YXJpYW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXJpYW50ID0gdmFyaWFudHNbaV07XHJcbiAgICAgICAgICAgIGlmICh2YXJpYW50LkFUUyA+IDApIHtcclxuICAgICAgICAgICAgICAgIGF0c0NvdW50ID0gYXRzQ291bnQgKyB2YXJpYW50LkFUUztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYXRzQ291bnQ7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHJldHVybnMgdGhlIGFnZ3JlZ2F0ZSBhdmFpbGFibGUgdG8gc2VsbCB2YWx1ZVxyXG4gICAgLy8gZnJvbSBhbGwgdmFyaWFudHNcclxuICAgIHZhciBnZXRBdmFpbGFiaWxpdHkgPSBmdW5jdGlvbiAodmFyaWFudHMpIHtcclxuXHJcbiAgICAgICAgdmFyIGF2YWlsYWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIHZhciB2YXJpYW50O1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFyaWFudHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyaWFudCA9IHZhcmlhbnRzW2ldO1xyXG4gICAgICAgICAgICBpZiAodmFyaWFudC5hdlN0YXR1cyAhPT0gJ05PVF9BVkFJTEFCTEUnKSB7XHJcbiAgICAgICAgICAgICAgICBhdmFpbGFibGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGF2YWlsYWJsZTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gaGVscGVyIGZ1bmN0aW9uIHRvIGJpbmQgcHJvZHVjdCBvcHRpb25zIGRyb3AgZG93bnMgZXZlbnQgaGFuZGxlcnNcclxuICAgIC8vIEludGlhbGl6ZXMgdGhlIHByb2R1Y3Quc2VsZWN0ZWRPcHRpb25zIG9iamVjdCB3aXRoIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgb3B0aW9uc1xyXG4gICAgLy8gaXQgYWxzbyBzaG93cyB0aGUgY29tcHV0ZWQvdXBkYXRlZCBwcmljZVxyXG4gICAgdmFyIGdldE9wdGlvbnNEaXYgPSBmdW5jdGlvbiAodGhpc1Byb2R1Y3QpIHtcclxuXHJcbiAgICAgICAgaWYgKG1vZGVsLmlzT3B0aW9uKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgcGRwT3B0ID0galF1ZXJ5KHRoaXNQcm9kdWN0LmNvbnRhaW5lcklkICsgJyAucHJvZHVjdF9vcHRpb25zOmxhc3Qgc2VsZWN0Jyk7XHJcblxyXG4gICAgICAgICAgICBwZHBPcHQuY2hhbmdlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciB2YWxzID0gdGhpcy5vcHRpb25zW3RoaXMuc2VsZWN0ZWRJbmRleF0udmFsdWUuc3BsaXQoJyU/JScpOyAvLyAwID0gdmFsdWUsIDEgPSBwcmljZVxyXG4gICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3Quc2VsZWN0ZWRPcHRpb25zW3RoaXMuaWRdID0gdmFsc1swXTtcclxuICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LnNlbGVjdGVkUHJpY2VbdGhpcy5pZF0gPSB2YWxzWzFdO1xyXG4gICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3Quc2hvd1VwZGF0ZWRQcmljZShjb21wdXRlUHJpY2UodGhpc1Byb2R1Y3QpLCBtb2RlbC5wcmljaW5nLnN0YW5kYXJkKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBsZXQgdXMgZ2V0IHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgdmFsdWUgYW5kIGludGlsaXplIHRoZSB1aVxyXG4gICAgICAgICAgICBwZHBPcHQuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdmFscyA9IHRoaXMub3B0aW9uc1t0aGlzLnNlbGVjdGVkSW5kZXhdLnZhbHVlLnNwbGl0KCclPyUnKTsgLy8gMCA9IHZhbHVlLCAxID0gcHJpY2VcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzUHJvZHVjdC5zZWxlY3RlZE9wdGlvbnNbdGhpcy5pZF0gPSB2YWxzWzBdO1xyXG4gICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3Quc2VsZWN0ZWRQcmljZVt0aGlzLmlkXSA9IHZhbHNbMV07XHJcbiAgICAgICAgICAgICAgICB0aGlzUHJvZHVjdC5zaG93VXBkYXRlZFByaWNlKGNvbXB1dGVQcmljZSh0aGlzUHJvZHVjdCksIG1vZGVsLnByaWNpbmcuc3RhbmRhcmQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGJpbmRzIEEyQyBidXR0b24gY2xpY2sgaGFuZGxlclxyXG4gICAgdmFyIGdldEFkZFRvQ2FydEJ0biA9IGZ1bmN0aW9uICh0aGlzUHJvZHVjdCkge1xyXG4gICAgICAgIHZhciBhZGRUb0NhcnRCdG4gPSBqUXVlcnkodGhpc1Byb2R1Y3QuY29udGFpbmVySWQgKyAnIC5hZGR0b2NhcnRidXR0b246bGFzdCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKG1vZGVsLm1hc3RlciB8fCBtb2RlbC52YXJpYW50KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpc1Byb2R1Y3Quc2VsZWN0ZWRWYXIgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBpdCBpcyBuZWNlc3NhcnkgdG8gdXBkYXRlIHRoZSBvcHRpb24gaWQgdG8gYmUgdmFyaWFudC1zcGVjaWZpY1xyXG4gICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXNQcm9kdWN0LmNvbnRhaW5lcklkICsgJyAucHJvZHVjdF9vcHRpb25zOmxhc3Qgc2VsZWN0JykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpc1Byb2R1Y3Quc2VsZWN0ZWRPcHRpb25zW3RoaXMuaWRdO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdJZCA9IHRoaXMuaWQucmVwbGFjZSh0aGlzUHJvZHVjdC5waWQsIHRoaXNQcm9kdWN0LnNlbGVjdGVkVmFyLmlkKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzUHJvZHVjdC5zZWxlY3RlZE9wdGlvbnNbbmV3SWRdID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXNQcm9kdWN0LnNlbGVjdGVkT3B0aW9uc1t0aGlzLmlkXTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LnNlbGVjdGVkT3B0aW9ucy5waWQgPSB0aGlzUHJvZHVjdC5zZWxlY3RlZFZhci5pZDtcclxuICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LnNlbGVjdGVkT3B0aW9ucy5tYXN0ZXJQaWQgPSB0aGlzUHJvZHVjdC5waWQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGVtcFF0eSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgd2UgYXJlIGFkZGluZyBhIGJ1bmRsZS9wcm9kdWN0c2V0IHRvIHRoZSBjYXJ0XHJcbiAgICAgICAgICAgICAgICBpZiAobW9kZWwuYnVuZGxlIHx8IG1vZGVsLnByb2R1Y3RTZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3ViUHJvZHVjdHMgPSB0aGlzUHJvZHVjdC5zdWJQcm9kdWN0cztcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY29tbWEgPSAnLCc7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN1YnByb2R1Y3QgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzUHJvZHVjdC5zZWxlY3RlZE9wdGlvbnMuY2hpbGRQaWRzID0gJyc7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChtb2RlbC5wcm9kdWN0U2V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LnNlbGVjdGVkT3B0aW9ucy5RdWFudGl0eSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcHJvY2VzcyBlYWNoIGluZGl2aWR1YWwgcHJvZHVjdHMgaW4gdGhlIHNldC9idW5kbGVcclxuICAgICAgICAgICAgICAgICAgICAvLyBhbmQgcHJlcGFyZSBwcm9kdWN0LnNlbGVjdGVkT3B0aW9ucyBmb3IgZmluYWwgc3VibWlzc2lvblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3ViUHJvZHVjdHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VicHJvZHVjdCA9IHN1YlByb2R1Y3RzW2ldO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT0gc3ViUHJvZHVjdHMubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWEgPSAnJzsgLy8gYXQgdGhlIGVuZCBvZiB0aGUgbGlzdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzZWUgaWYgYW55IG9mIHRoZSBzdWIgcHJvZHVjdHMgYXJlIHZhcmlhdGlvbnMsIGlmIHNvIHRoZW4gZ2V0IHRoZSBzZWxlY3RlZCB2YXJpYXRpb24gaWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZnJvbSBzZWxlY3RlZFZhciBwcm9wZXJ0eSBhbmQgbWFrZSBpdCBhIGNvbW1hIHNlcGFyYXRlZCBsaXN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoc3VicHJvZHVjdC52YXJpYW50IHx8IHN1YnByb2R1Y3QubWFzdGVyKSAmJiBzdWJwcm9kdWN0LnNlbGVjdGVkVmFyID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdWJwcm9kdWN0LnZhcmlhbnQgfHwgc3VicHJvZHVjdC5tYXN0ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LnNlbGVjdGVkT3B0aW9ucy5jaGlsZFBpZHMgKz0gc3VicHJvZHVjdC5zZWxlY3RlZFZhci5pZCArIGNvbW1hO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3Quc2VsZWN0ZWRPcHRpb25zLmNoaWxkUGlkcyArPSBzdWJwcm9kdWN0LnBpZCArIGNvbW1hO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcFBpZCA9IHN1YnByb2R1Y3Quc2VsZWN0ZWRPcHRpb25zLnBpZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VicHJvZHVjdC5zZWxlY3RlZE9wdGlvbnMucGlkID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWVyZ2Ugc2VsZWN0ZWQgb3B0aW9ucyBvZiBzdWIgcHJvZHVjdCB3aXRoIHRoZSBtYWluIHByb2R1Y3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3Quc2VsZWN0ZWRPcHRpb25zID0galF1ZXJ5LmV4dGVuZCh7fSwgdGhpc1Byb2R1Y3Quc2VsZWN0ZWRPcHRpb25zLCBzdWJwcm9kdWN0LnNlbGVjdGVkT3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnByb2R1Y3Quc2VsZWN0ZWRPcHRpb25zLnBpZCA9IHRlbXBQaWQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBpdCBpcyBhIHByb2R1Y3Qgc2V0IHRoZW4gc3ViIHByb2R1Y3RzIGNhbiBoYXZlIHRoZWlyIHNlcGFyYXRlIHF0eVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobW9kZWwucHJvZHVjdFNldCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFF0eSArPSBzdWJwcm9kdWN0LnNlbGVjdGVkT3B0aW9ucy5RdWFudGl0eSArIGNvbW1hO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIGlmIGl0IGlzIGEgcHJvZHVjdCBzZXQgdGhlbiBzdWIgcHJvZHVjdHMgY2FuIGhhdmUgdGhlaXIgc2VwYXJhdGUgcXR5XHJcbiAgICAgICAgICAgICAgICAvLyB0ZW1wUXR5IGlzIGEgY29tbWEgc2VwYXJhdGVkIGxpc3Qgb2YgcXR5IGZvciBlYWNoIHByb2R1Y3QgaW4gdGhlIHNldFxyXG4gICAgICAgICAgICAgICAgaWYgKG1vZGVsLnByb2R1Y3RTZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzUHJvZHVjdC5zZWxlY3RlZE9wdGlvbnMuUXVhbnRpdHkgPSB0ZW1wUXR5O1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIG1ha2Ugc3VyZSB0aGUgcGlkIHdoaWNoIGdldHMgc3VibWl0dGVkIGlzIGZvciB0aGUgbWFpbiBwcm9kdWN0XHJcbiAgICAgICAgICAgICAgICB0aGlzUHJvZHVjdC5zZWxlY3RlZE9wdGlvbnMucGlkID0gdGhpc1Byb2R1Y3QucGlkO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAobW9kZWwuYnVuZGxlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzUHJvZHVjdC5zZWxlY3RlZE9wdGlvbnMuUXVhbnRpdHkgPSAxOyAvLyBoYXJkIGNvZGVkIHF0eT0xIHdoZW4gd2UgdGhlIHByb2R1Y3QgaXMgYSBidW5kbGVcclxuICAgICAgICAgICAgfSBlbHNlIGlmICghbW9kZWwucHJvZHVjdFNldCkge1xyXG4gICAgICAgICAgICAgICAgLy8gZ3JhYiB0aGUgdXNlciBlbnRlcmVkIHF0eVxyXG4gICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3Quc2VsZWN0ZWRPcHRpb25zLlF1YW50aXR5ID0galF1ZXJ5KHRoaXNQcm9kdWN0LmNvbnRhaW5lcklkICsgJyAucXVhbnRpdHlpbnB1dDpsYXN0JykudmFsKCk7XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBpZiBpdCBpcyBub3QgYSBwcm9kdWN0c2V0IHRoZW4gbWFrZSBzdXJlIHF0eSBpcyBzcGVjaWZpZWQgZ3JlYXRlciB0aGFuIDBcclxuICAgICAgICAgICAgaWYgKG1vZGVsLnByb2R1Y3RTZXQgfHwgdGhpc1Byb2R1Y3Quc2VsZWN0ZWRPcHRpb25zLlF1YW50aXR5ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgLy8gZGlzYWJsZSBhMmMgYnV0dG9uXHJcbiAgICAgICAgICAgICAgICBhZGRUb0NhcnRCdG4ucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBmaW5kIGlmIHRoZXJlIGlzIGEgaGFuZGxlciBib3VuZCB0byBBZGRUb0NhcnQgZXZlbnQgZS5nLiBjYXJ0IC0+IGVkaXQgZGV0YWlscyBvciB3aXNobGlzdCAtPiBlZGl0IGRldGFpbHMgZXRjLlxyXG4gICAgICAgICAgICAgICAgLy8gdGhlbiBmaXJlIGl0IG90aGVyZXdpc2UgY2FsbCBhZGRUb0NhcnQuYWRkIHRvIGFkZCB0aGUgc2VsZWN0ZWQgcHJvZHVjdCB0byB0aGUgY2FydCBhbmQgc2hvdyBtaW5pY2FydFxyXG4gICAgICAgICAgICAgICAgLyplc2xpbnQtZGlzYWJsZSAqL1xyXG4gICAgICAgICAgICAgICAgdmFyIGV2ZW50ID0galF1ZXJ5LkV2ZW50KCdBZGRUb0NhcnQnKTtcclxuICAgICAgICAgICAgICAgIC8qZXNsaW50LWVuYWJsZSAqL1xyXG4gICAgICAgICAgICAgICAgZXZlbnQuc2VsZWN0ZWRPcHRpb25zID0gdGhpc1Byb2R1Y3Quc2VsZWN0ZWRPcHRpb25zO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChqUXVlcnkuZXZlbnQuZ2xvYmFsLkFkZFRvQ2FydCA9PSB1bmRlZmluZWQgfHwgalF1ZXJ5LmV2ZW50Lmdsb2JhbC5BZGRUb0NhcnQgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZFRvQ2FydC5hZGQoJycsIHRoaXNQcm9kdWN0LnNlbGVjdGVkT3B0aW9ucywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRUb0NhcnRCdG4ucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeShkb2N1bWVudCkudHJpZ2dlcihldmVudClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBhZGRUb0NhcnRCdG47XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGJpbmQgcXR5IGJveCBrZXl1cCBoYW5kbGVyXHJcbiAgICAvLyB0aGUgaGFuZGxlciBncmFicyB0aGUgdmFsdWUgYW5kIHVwZGF0ZXNcclxuICAgIC8vIHByb2R1Y3Quc2VsZWN0ZWRPcHRpb24uUXVhbnRpdHlcclxuICAgIC8vIHNob3cgdGhlIHVwZGF0ZWQgYXZhaWxhYmlsdHkgbWVzc2FnZSBpbiBjYXNlIHRoZSBhdmFpbGFibGUgcXR5IGlzIGRpZmZlcmVudCB0aGFuIGF2YWlsYWJsZSBldGMuXHJcbiAgICAvLyB0cmlnZ2VyIEFkZHRvQ2FydEVuYWJsZWQgZXZlbnRcclxuICAgIHZhciBnZXRRdHlCb3ggPSBmdW5jdGlvbiAodGhpc1Byb2R1Y3QpIHtcclxuXHJcbiAgICAgICAgalF1ZXJ5KHRoaXNQcm9kdWN0LmNvbnRhaW5lcklkICsgJyAucXVhbnRpdHlpbnB1dDpsYXN0Jykua2V5dXAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdmFsID0gbnVsbDtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHZhbCA9IHBhcnNlSW50KGpRdWVyeSh0aGlzUHJvZHVjdC5jb250YWluZXJJZCArICcgLnF1YW50aXR5aW5wdXQ6bGFzdCcpLnZhbCgpLCAxMCk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIHZhbCA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh2YWwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LnNlbGVjdGVkT3B0aW9ucy5RdWFudGl0eSA9IHZhbDtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBpZiB0aGUgcHJvZHVjdCBoYXMgdmFyaWF0aW9ucyBjaGVjayBmb3Igbm9uIHNlbGVjdGVkIG9uZXMgYW5kIGRpc3BsYXkgbWlzc2luZyB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgaWYgKG1vZGVsLnZhcmlhdGlvbnMgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5vblNlbGVjdGVkVmFycyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBnZXQgdGhlIG5vbi1zZWxlY3RlZCB2YXJpYXRpb25zXHJcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5LmVhY2gobW9kZWwudmFyaWF0aW9ucy5hdHRyaWJ1dGVzLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpc1Byb2R1Y3Quc2VsZWN0ZWRWYXJBdHRyaWJzW3RoaXMuaWRdIHx8IHRoaXNQcm9kdWN0LnNlbGVjdGVkVmFyQXR0cmlic1t0aGlzLmlkXSA9PSAnJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9uU2VsZWN0ZWRWYXJzLnB1c2godGhpcy5uYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAobm9uU2VsZWN0ZWRWYXJzLmxlbmd0aCA+IDApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1ha2Ugc3VyZSB0aGVyZSBpcyBzb21ldGhpbmcgdG8gc2VsbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXRzQ291bnQgPSBnZXRBVFMobW9kZWwudmFyaWF0aW9ucy52YXJpYW50cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdHNDb3VudCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0b29sdGlwU3RyID0gZ2V0Tm9uU2VsZWN0ZWRUb29sdGlwKG5vblNlbGVjdGVkVmFycyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtaXNzaW5nTXNnID0gJC52YWxpZGF0b3IuZm9ybWF0KFJlc291cmNlcy5NSVNTSU5HX1ZBTCwgdG9vbHRpcFN0cik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEF2YWlsYWJpbGl0eU1zZyhtaXNzaW5nTXNnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgcXVhbnRpdHkgdmFsdWUgaXMgZGlmZmVyZW50IHRoYW5cclxuICAgICAgICAgICAgICAgIC8vIHdoZW4gd2UgbG9hZGVkIHRoZSBhdmFpbGFiaWxpdHkgZGF0YSwgdGhlblxyXG4gICAgICAgICAgICAgICAgLy8gcmVmcmVzaCBhdmFpbGFiaWxpdHkgZGF0YSBmb3IgdGhpcyB2YXJpYW50XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsICE9IHRoaXNQcm9kdWN0LmdldEF2YWlsYWJpbGl0eVF0eSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVsb2FkQXZhaWxhYmlsaXR5KHRoaXNQcm9kdWN0LCB2YWwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy9KQ0s6IHRoaXMgaXNuJ3QgYmVpbmcgcnVuIEFGVEVSIEFKQVg/XHJcbiAgICAgICAgICAgICAgICAvL3NldEF2YWlsYWJpbGl0eU1zZyhjcmVhdGVBdk1lc3NhZ2UodGhpc1Byb2R1Y3QsIHZhbCkpO1xyXG4gICAgICAgICAgICAgICAgLy9qUXVlcnkodGhpc1Byb2R1Y3QpLnRyaWdnZXIoXCJBZGR0b0NhcnRFbmFibGVkXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIGdyYWIgdGhlIGN1cnJlbnRseSBkaXNwbGF5ZWQgdmFsdWUgYmFzaWNhbGx5IHRoZSBpbml0aWFsIGRpc3BsYXllZCB2YWx1ZVxyXG4gICAgICAgIHRoaXNQcm9kdWN0LnNlbGVjdGVkT3B0aW9ucy5RdWFudGl0eSA9IGpRdWVyeSh0aGlzUHJvZHVjdC5jb250YWluZXJJZCArICcgLnF1YW50aXR5aW5wdXQ6bGFzdCcpLnZhbCgpO1xyXG5cclxuICAgICAgICBpZiAoIWlzTG9hZGluZ1Zhcikge1xyXG4gICAgICAgICAgICAvLyBzaG93IHByb3BlciBhdmFpbGFiaWxpdHkgbWVzc2FnZVxyXG4gICAgICAgICAgICBzZXRBdmFpbGFiaWxpdHlNc2coY3JlYXRlQXZNZXNzYWdlKHRoaXNQcm9kdWN0LCB0aGlzUHJvZHVjdC5zZWxlY3RlZE9wdGlvbnMuUXVhbnRpdHkpKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGNyZWF0ZSBwcm9kdWN0IHRhYnMgaS5lLiBkZXNjcmlwdGlvbiwgQXR0cmlidXRlcywgUmV2aWV3cyBldGMuXHJcbiAgICAvLyBpdCBkZXBlbmRzIG9uIGpRdWVyeSB0byBjcmVhdGUgdGFiIGRpc3BsYXkuXHJcbiAgICAvLyBhbHNvIGJpbmQgdGFiIHByaW50IGJ1dHRvbiBjbGljayBoYW5kbGVyXHJcbiAgICB2YXIgZ2V0VGFicyA9IGZ1bmN0aW9uIChjb250YWluZXJJZCkge1xyXG5cclxuICAgICAgICB2YXIgdGFic0RpdiA9IGpRdWVyeShjb250YWluZXJJZCArICcgI3RhYnMnKTtcclxuICAgICAgICB0YWJzRGl2LnRhYnMoKTtcclxuXHJcbiAgICAgICAgLy8gdGFiIHByaW50IGhhbmRsZXJcclxuICAgICAgICBqUXVlcnkoJ2EucHJpbnRwYWdlJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB3aW5kb3cucHJpbnQoKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyByZWdpc3RlciBpbml0aWFsaXphdGlvbnMgaGVyZVxyXG4gICAgLy9zaG93IGFuZCBoaWRlIGhhbmRsaW5nIG9mIHNwZWNpZmljIGNvdW50cnkuXHJcbiAgICBpZiAodHlwZW9mIGdlb2lwQ291bnRyeUNvZGUgPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIHZhciBJUEdlb0NvZGUgPSBnZW9pcENvdW50cnlDb2RlKCk7XHJcbiAgICAgICAgdmFyIGFsbG93ZWRDb3VudHJpZXMgPSAkKCcuYWxsb3dlZC1jb3VudHJpZXMnKS50ZXh0KCk7XHJcbiAgICAgICAgaWYgKGFsbG93ZWRDb3VudHJpZXMgPT0gbnVsbCB8fCBhbGxvd2VkQ291bnRyaWVzID09ICdudWxsJyB8fCBhbGxvd2VkQ291bnRyaWVzID09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgIGFsbG93ZWRDb3VudHJpZXMgPSAnVVMnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYWxsb3dlZENvdW50cmllcy5pbmRleE9mKElQR2VvQ29kZSkgPT0gLTEpIHtcclxuICAgICAgICAgICAgJCgnLmFkZHRvd2lzaGxpc3QnKS5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBiaW5kIGFkZHRvd2lzaGxpc3QsIGdpZnRyZWdpc3RyeSwgc2VuZCB0byBmcmllbmQgY2xpY2sgaGFuZGxlcnNcclxuICAgIC8vIGJpbmQgaGFuZGxlcnMgdG8gQWRkdG9DYXJ0RGlzYWJsZWQsIEFkZHRvQ2FydEVuYWJsZWQgZXZlbnRzIGZvciBkaXNhYmxpbmcvZW5hYmxpbmcgd2lzaGxpc3QvZ2lmdCByZWdpc3RyeSBsaW5rc1xyXG4gICAgdmFyIGdldE1pc2NMaW5rcyA9IGZ1bmN0aW9uICh0aGlzUHJvZHVjdCkge1xyXG5cclxuICAgICAgICB2YXIgZGlzYWJsZWxpbmtzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoKG1vZGVsLm1hc3RlciB8fCBtb2RlbC52YXJpYW50KSAmJiB0aGlzUHJvZHVjdC5zZWxlY3RlZFZhciA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBkaXNhYmxlIHdpc2hsaXN0L2dpZnQgcmVnaXN0cnkgbGlua3MgZm9yIG1hc3RlciBwcm9kdWN0c1xyXG4gICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXNQcm9kdWN0LmNvbnRhaW5lcklkICsgJyAuYWRkdG93aXNobGlzdCwgJyArIHRoaXNQcm9kdWN0LmNvbnRhaW5lcklkICsgJyAuYWRkdG9yZWdpc3RyeScpLmFkZENsYXNzKCd1bnNlbGVjdGFibGUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGRpc2FibGVsaW5rcygpOyAvLyBjYWxsIGl0IGZvciBpbml0aWFsIGRpc3BsYXkgYW5kIHRoZW4gcmVnaXN0ZXIgaXQgd2l0aCBBZGR0b0NhcnREaXNhYmxlZCBldmVudFxyXG5cclxuICAgICAgICBqUXVlcnkodGhpc1Byb2R1Y3QpLmJpbmQoJ0FkZHRvQ2FydERpc2FibGVkJywge30sIGRpc2FibGVsaW5rcyk7XHJcblxyXG4gICAgICAgIGpRdWVyeSh0aGlzUHJvZHVjdCkuYmluZCgnQWRkdG9DYXJ0RW5hYmxlZCcsIHt9LCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIGVuYWJsZSB3aXNobGlzdC9naWZ0IHJlZ2lzdHJ5IGxpbmtzIGZvciB2YXJpYW50IHByb2R1Y3RzXHJcbiAgICAgICAgICAgIGpRdWVyeSh0aGlzUHJvZHVjdC5jb250YWluZXJJZCArICcgLmFkZHRvd2lzaGxpc3QsICcgKyB0aGlzUHJvZHVjdC5jb250YWluZXJJZCArICcgLmFkZHRvcmVnaXN0cnknKS5yZW1vdmVDbGFzcygndW5zZWxlY3RhYmxlJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIGxpc3RlbiBmb3IgYXZhaWxhYmlsaXR5IHJlbG9hZCBldmVudHNcclxuICAgICAgICBqUXVlcnkodGhpc1Byb2R1Y3QpLmJpbmQoJ1JlbG9hZEF2YWlsYWJpbGl0eScsIHt9LCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAvLyB1cGRhdGUgdGhlIGF2YWlsYWJpbGl0eSBtZXNzYWdlXHJcbiAgICAgICAgICAgIHZhciB2YXJpYW50ID0gZS50YXJnZXQuc2VsZWN0ZWRWYXI7XHJcbiAgICAgICAgICAgIHNldEF2YWlsYWJpbGl0eU1zZyhjcmVhdGVBdk1lc3NhZ2UoZS50YXJnZXQsICh2YXJpYW50ID09IG51bGwgPyBtb2RlbC5hdlN0YXR1c1F1YW50aXR5IDogdmFyaWFudC5hdlN0YXR1c1F1YW50aXR5KSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkoZS50YXJnZXQpLnRyaWdnZXIoJ0FkZHRvQ2FydEVuYWJsZWQnKTtcclxuXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIEFkZCB0byB3aXNobGlzdCwgQWRkIHRvIGdpZnQgcmVnaXN0cnkgY2xpY2sgaGFuZGxlclxyXG5cclxuICAgICAgICBqUXVlcnkodGhpc1Byb2R1Y3QuY29udGFpbmVySWQgKyAnIC5hZGR0b3dpc2hsaXN0IGEuYXV0aCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gYXBwZW5kIHRoZSBjdXJyZW50bHkgc2VsZWN0aWVkIG9wdGlvbnMgdG8gdGhlIHVybFxyXG5cclxuICAgICAgICAgICAgLy8gY3JlYXRlIGEgbG9jYWwgY29weSBvZiB0aGUgc2VsZWN0ZWQgb3B0aW9uc1xyXG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRPcHRpb25zID0galF1ZXJ5LmV4dGVuZCh7fSwge30sIHRoaXNQcm9kdWN0LnNlbGVjdGVkT3B0aW9ucyk7XHJcblxyXG4gICAgICAgICAgICBpZiAobW9kZWwubWFzdGVyIHx8IG1vZGVsLnZhcmlhbnQpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzUHJvZHVjdC5zZWxlY3RlZFZhciAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRPcHRpb25zLnBpZCA9IHRoaXNQcm9kdWN0LnNlbGVjdGVkVmFyLmlkO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7IC8vIGRvIG5vdCBhbGxvdyBtYXN0ZXIgcHJvZHVjdCB0byBiZSBhZGRlZCB0byBnaWZ0IHJlZ2lzdHJ5L3dpc2hsaXN0XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZE9wdGlvbnMucGlkID0gdGhpc1Byb2R1Y3QucGlkO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgdGVtcFVybCA9IHRoaXMuaHJlZjtcclxuXHJcbiAgICAgICAgICAgIGlmICghKHRlbXBVcmwuaW5kZXhPZignPycpID4gMCkpIHtcclxuICAgICAgICAgICAgICAgIHRlbXBVcmwgPSB0ZW1wVXJsICsgJz8nO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGVtcFVybCA9IHRlbXBVcmwgKyAnJic7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gc2VyaWFsaXplIHRoZSBuYW1lL3ZhbHVlIGludG8gdXJsIHF1ZXJ5IHN0cmluZyBhbmQgYXBwZW5kIGl0IHRvIHRoZSB1cmwsIG1ha2UgcmVxdWVzdFxyXG4gICAgICAgICAgICB2YXIgdXJsID0gdGVtcFVybCArIGpRdWVyeS5wYXJhbShzZWxlY3RlZE9wdGlvbnMpO1xyXG4gICAgICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgdHlwZTogJ0dFVCcsXHJcbiAgICAgICAgICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnaHRtbCcsXHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KCcjcGRwTWFpbiAuYWRkdG93aXNobGlzdCAuYWRkdG93aXNoLXRvb2x0aXAnKS5mYWRlSW4oNDAwKS5kZWxheSgxNTAwKS5mYWRlT3V0KDQwMCk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZmFpbHVyZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KCcke1Jlc291cmNlLm1zZyhcXCdnbG9iYWwuc2VydmVyY29ubmVjdGlvblxcJyxcXCdsb2NhbGVcXCcsbnVsbCl9Jyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQoJy51aS1kaWFsb2ctdGl0bGViYXItY2xvc2UnKS50cmlnZ2VyKCdjbGljaycpO1xyXG4gICAgICAgICAgICB9LCAxNTAwKTtcclxuICAgICAgICAgICAgLy93aW5kb3cubG9jYXRpb24gPSB0ZW1wVXJsICsgalF1ZXJ5LnBhcmFtKHNlbGVjdGVkT3B0aW9ucyk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gQWRkIHRvIHdpc2hsaXN0LCBBZGQgdG8gZ2lmdCByZWdpc3RyeSBjbGljayBoYW5kbGVyXHJcbiAgICAgICAgalF1ZXJ5KHRoaXNQcm9kdWN0LmNvbnRhaW5lcklkICsgJyAuYWRkdG93aXNobGlzdCBhLm5vbi1hdXRoLCAnICsgdGhpc1Byb2R1Y3QuY29udGFpbmVySWQgKyAnIC5hZGR0b3JlZ2lzdHJ5IGEnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIGFwcGVuZCB0aGUgY3VycmVudGx5IHNlbGVjdGllZCBvcHRpb25zIHRvIHRoZSB1cmxcclxuXHJcbiAgICAgICAgICAgIC8vIGNyZWF0ZSBhIGxvY2FsIGNvcHkgb2YgdGhlIHNlbGVjdGVkIG9wdGlvbnNcclxuICAgICAgICAgICAgdmFyIHNlbGVjdGVkT3B0aW9ucyA9IGpRdWVyeS5leHRlbmQoe30sIHt9LCB0aGlzUHJvZHVjdC5zZWxlY3RlZE9wdGlvbnMpO1xyXG5cclxuICAgICAgICAgICAgaWYgKG1vZGVsLm1hc3RlciB8fCBtb2RlbC52YXJpYW50KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpc1Byb2R1Y3Quc2VsZWN0ZWRWYXIgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkT3B0aW9ucy5waWQgPSB0aGlzUHJvZHVjdC5zZWxlY3RlZFZhci5pZDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBkbyBub3QgYWxsb3cgbWFzdGVyIHByb2R1Y3QgdG8gYmUgYWRkZWQgdG8gZ2lmdCByZWdpc3RyeS93aXNobGlzdFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRPcHRpb25zLnBpZCA9IHRoaXNQcm9kdWN0LnBpZDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIHRlbXBVcmwgPSB0aGlzLmhyZWY7XHJcblxyXG4gICAgICAgICAgICBpZiAoISh0ZW1wVXJsLmluZGV4T2YoJz8nKSA+IDApKSB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wVXJsID0gdGVtcFVybCArICc/JztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRlbXBVcmwgPSB0ZW1wVXJsICsgJyYnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIHNlcmlhbGl6ZSB0aGUgbmFtZS92YWx1ZSBpbnRvIHVybCBxdWVyeSBzdHJpbmcgYW5kIGFwcGVuZCBpdCB0byB0aGUgdXJsLCBtYWtlIHJlcXVlc3RcclxuICAgICAgICAgICAgLy92YXIgdXJsID0gdGVtcFVybCArIGpRdWVyeS5wYXJhbShzZWxlY3RlZE9wdGlvbnMpO1xyXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSB0ZW1wVXJsICsgalF1ZXJ5LnBhcmFtKHNlbGVjdGVkT3B0aW9ucyk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgalF1ZXJ5KHRoaXNQcm9kdWN0LmNvbnRhaW5lcklkICsgJyAuc2VuZHRvZnJpZW5kJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBjcmVhdGUgYSBsb2NhbCBjb3B5IG9mIHRoZSBzZWxlY3RlZCBvcHRpb25zXHJcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZE9wdGlvbnMgPSBqUXVlcnkuZXh0ZW5kKHt9LCB7fSwgdGhpc1Byb2R1Y3Quc2VsZWN0ZWRPcHRpb25zKTtcclxuXHJcbiAgICAgICAgICAgIGlmICgobW9kZWwubWFzdGVyIHx8IG1vZGVsLnZhcmlhbnQpICYmIHRoaXNQcm9kdWN0LnNlbGVjdGVkVmFyICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkT3B0aW9ucy5waWQgPSB0aGlzUHJvZHVjdC5zZWxlY3RlZFZhci5pZDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkT3B0aW9ucy5waWQgPSB0aGlzUHJvZHVjdC5waWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIHRlbXBVUkwgPSBVcmxzLnNlbmRUb0ZyaWVuZCArICc/JyArIGpRdWVyeS5wYXJhbShzZWxlY3RlZE9wdGlvbnMpO1xyXG4gICAgICAgICAgICBkaWFsb2cub3Blbih0ZW1wVVJMLCBSZXNvdXJjZXMuU0VORF9UT19GUklFTkQpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGJpbmRzIHByb2R1Y3QgcmV2aWV3cyBjbGljayBoYW5kbGVyc1xyXG4gICAgLy8gcmVhZCByZXZpZXcgbGluayBvcGVucyByZXZpZXdzIHRhYlxyXG4gICAgdmFyIGdldFJhdGluZ1NlY3Rpb24gPSBmdW5jdGlvbiAoY29udGFpbmVySWQpIHtcclxuXHJcbiAgICAgICAgalF1ZXJ5KGNvbnRhaW5lcklkICsgJyAjcGRwUmVhZFJldmlldycpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgalF1ZXJ5KGNvbnRhaW5lcklkICsgJyAjdGFicycpLnRhYnMoJ3NlbGVjdCcsICdwZHBSZXZpZXdzVGFiJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGpRdWVyeShjb250YWluZXJJZCArICcgI3BkcFdyaXRlUmV2aWV3JykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBiYXNlZCBvbiBhdmFpbGFiaWxpdHkgc3RhdHVzLCBjcmVhdGVzIGEgbWVzc2FnZVxyXG4gICAgLy8gcGFyYW0gdmFsIC0gdGhlIHN0b2NrIHZhbHVlIHRvIGNvbXBhcmUgaS5lLiBxdHkgZW50ZXJlZCBieSB1c2VyXHJcbiAgICB2YXIgY3JlYXRlQXZNZXNzYWdlID0gZnVuY3Rpb24gKHRoaXNQcm9kdWN0LCB2YWwpIHtcclxuXHJcbiAgICAgICAgdmFyIGF2U3RhdHVzID0gdGhpc1Byb2R1Y3QuZ2V0QXZTdGF0dXMoKTsgLy8gYXZhaWxhYmlsaXR5IHN0YXR1c1xyXG4gICAgICAgIHZhciBhdk1lc3NhZ2UgPSBSZXNvdXJjZXNbYXZTdGF0dXNdO1xyXG4gICAgICAgIHZhciBhdHMgPSB0aGlzUHJvZHVjdC5nZXRBVFMoKTsgLy8gZ2V0IGF2YWlsYWJsZSB0byBzZWxsIHF0eVxyXG4gICAgICAgIHZhciBhdkxldmVscyA9IHRoaXNQcm9kdWN0LmdldEF2TGV2ZWxzKCk7XHJcbiAgICAgICAgdmFyIG5vbkNsb3Nlb3V0TG93UXR5VGhyZXNob2xkID0gdGhpc1Byb2R1Y3QuZ2V0Tm9uQ2xvc2VvdXRMb3dRdHlUaHJlc2hvbGQoKTtcclxuXHJcbiAgICAgICAgLy8gZ2V0IGF0cyBsZXZlbHMgcGVyLXN0YXR1c1xyXG4gICAgICAgIHZhciBpblN0b2NrTGV2ZWwgPSBhdkxldmVsc1tDb25zdGFudHMuQVZBSUxfU1RBVFVTX0lOX1NUT0NLXTtcclxuICAgICAgICB2YXIgYmFja09yZGVyTGV2ZWwgPSBhdkxldmVsc1tDb25zdGFudHMuQVZBSUxfU1RBVFVTX0JBQ0tPUkRFUl07XHJcbiAgICAgICAgdmFyIHByZU9yZGVyTGV2ZWwgPSBhdkxldmVsc1tDb25zdGFudHMuQVZBSUxfU1RBVFVTX1BSRU9SREVSXTtcclxuICAgICAgICAvL3ZhciBub3RBdmFpbExldmVsID0gYXZMZXZlbHNbQ29uc3RhbnRzLkFWQUlMX1NUQVRVU19OT1RfQVZBSUxBQkxFXTtcclxuXHJcbiAgICAgICAgaWYgKGF2U3RhdHVzID09PSBDb25zdGFudHMuQVZBSUxfU1RBVFVTX0lOX1NUT0NLKSB7XHJcbiAgICAgICAgICAgIGF2TWVzc2FnZSA9ICc8c3BhbiBjbGFzcz1cXCdpbi1zdG9ja1xcJz4nICsgYXZNZXNzYWdlICsgJzwvc3Bhbj4nO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYXZTdGF0dXMgPT09ICdOT1RfQVZBSUxBQkxFJykge1xyXG4gICAgICAgICAgICBhdk1lc3NhZ2UgPSAnPHNwYW4gY2xhc3M9XFwnb3V0LW9mLXN0b2NrXFwnPicgKyBhdk1lc3NhZ2UgKyAnPC9zcGFuPic7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChhdlN0YXR1cyA9PT0gQ29uc3RhbnRzLkFWQUlMX1NUQVRVU19CQUNLT1JERVIgfHxcclxuICAgICAgICAgICAgYXZTdGF0dXMgPT09IENvbnN0YW50cy5BVkFJTF9TVEFUVVNfUFJFT1JERVIpIHtcclxuICAgICAgICAgICAgaWYgKHZhbCA+IGF0cyAmJiBhdHMgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBhdk1lc3NhZ2UgPSBhdk1lc3NhZ2UgKyAnPHNwYW4gY2xhc3M9XFwnaW4tc3RvY2tcXCc+JyArICQudmFsaWRhdG9yLmZvcm1hdChSZXNvdXJjZXNbJ1FUWV8nICsgYXZTdGF0dXNdLCBhdHMpICsgJzwvc3Bhbj4nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGRpc3BsYXkgYmFja29yZGVyL3ByZW9yZGVyIGF2YWlsYWJpbGl0eVxyXG4gICAgICAgICAgICBhdk1lc3NhZ2UgPSBhdk1lc3NhZ2UgKyBnZXRJblN0b2NrRGF0ZU1zZyh0aGlzUHJvZHVjdCk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh2YWwgPiBpblN0b2NrTGV2ZWwgJiYgYXZTdGF0dXMgIT09IENvbnN0YW50cy5BVkFJTF9TVEFUVVNfTk9UX0FWQUlMQUJMRSkge1xyXG5cclxuICAgICAgICAgICAgYXZNZXNzYWdlID0gJyc7XHJcbiAgICAgICAgICAgIGlmIChpblN0b2NrTGV2ZWwgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBhdk1lc3NhZ2UgPSBhdk1lc3NhZ2UgKyAnPHNwYW4gY2xhc3M9XFwnaW4tc3RvY2tcXCc+JyArICQudmFsaWRhdG9yLmZvcm1hdChSZXNvdXJjZXNbJ1FUWV8nICsgQ29uc3RhbnRzLkFWQUlMX1NUQVRVU19JTl9TVE9DS10sIGluU3RvY2tMZXZlbCkgKyAnPC9zcGFuPic7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGJhY2tPcmRlckxldmVsID4gMCkge1xyXG4gICAgICAgICAgICAgICAgYXZNZXNzYWdlID0gYXZNZXNzYWdlICsgJC52YWxpZGF0b3IuZm9ybWF0KFJlc291cmNlc1snUVRZXycgKyBDb25zdGFudHMuQVZBSUxfU1RBVFVTX0JBQ0tPUkRFUl0sIGJhY2tPcmRlckxldmVsKTtcclxuICAgICAgICAgICAgICAgIC8vIHVuY29tbWVudCB0aGUgZm9sbG93aW5nIGxpbmUgdG8gZGlzcGxheSBhdmFpbGFiaWxpdHkgbWVzc2FnZSB3aXRoIGJhY2sgb3JkZXIgaW5mb3JtYXRpb25cclxuICAgICAgICAgICAgICAgIC8vIGF2TWVzc2FnZSA9IGF2TWVzc2FnZSArIGdldEluU3RvY2tEYXRlTXNnKHRoaXNQcm9kdWN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocHJlT3JkZXJMZXZlbCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGF2TWVzc2FnZSA9IGF2TWVzc2FnZSArICQudmFsaWRhdG9yLmZvcm1hdChSZXNvdXJjZXNbJ1FUWV8nICsgQ29uc3RhbnRzLkFWQUlMX1NUQVRVU19QUkVPUkRFUl0sIHByZU9yZGVyTGV2ZWwpO1xyXG4gICAgICAgICAgICAgICAgLy8gdW5jb21tZW50IHRoZSBmb2xsb3dpbmcgbGluZSB0byBkaXNwbGF5IGF2YWlsYWJpbGl0eSBtZXNzYWdlIHdpdGggYmFjayBvcmRlciBpbmZvcm1hdGlvblxyXG4gICAgICAgICAgICAgICAgLy8gYXZNZXNzYWdlID0gYXZNZXNzYWdlICsgZ2V0SW5TdG9ja0RhdGVNc2codGhpc1Byb2R1Y3QpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChhdHMgIT09IDAgJiYgYXRzIDw9IG5vbkNsb3Nlb3V0TG93UXR5VGhyZXNob2xkKSB7XHJcbiAgICAgICAgICAgIGF2TWVzc2FnZSA9ICc8c3BhbiBjbGFzcz1cXCdsb3dcXCc+JyArICQudmFsaWRhdG9yLmZvcm1hdChSZXNvdXJjZXMuTE9XLCBub25DbG9zZW91dExvd1F0eVRocmVzaG9sZCkgKyAnPC9zcGFuPic7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBzdGFuZGFyZFByaWNlID0gdGhpc1Byb2R1Y3Quc2VsZWN0ZWRWYXIgIT0gbnVsbCA/IE51bWJlcih0aGlzUHJvZHVjdC5zZWxlY3RlZFZhci5wcmljaW5nLnN0YW5kYXJkIHx8IDApIDogTnVtYmVyKG1vZGVsLnByaWNpbmcuc3RhbmRhcmQgfHwgMCk7XHJcblxyXG4gICAgICAgIHZhciBzYWxlUHJpY2UgPSBOdW1iZXIoY29tcHV0ZVByaWNlKHRoaXNQcm9kdWN0KSB8fCAwKTtcclxuXHJcbiAgICAgICAgaWYgKHN0YW5kYXJkUHJpY2UgPT09IDAgJiYgc2FsZVByaWNlID09PSAwKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzUHJvZHVjdC5zZWxlY3RlZFZhciAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpc1Byb2R1Y3Quc2VsZWN0ZWRWYXIuZWFybHlCaXJkTWVzc2FnZSAhPSAnJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGF2TWVzc2FnZSA9ICc8c3BhbiBjbGFzcz1cXCdjb21pbmctc29vblxcJz4nICsgdGhpc1Byb2R1Y3Quc2VsZWN0ZWRWYXIuZWFybHlCaXJkTWVzc2FnZSArICc8L3NwYW4+JztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXZNZXNzYWdlID0gJyc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCgnLmVibS1zdGQtcHJvZCcpLmxlbmd0aCA+IDAgJiYgJC50cmltKCQoJy5lYm0tc3RkLXByb2QnKS50ZXh0KCkpICE9ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXZNZXNzYWdlID0gJzxzcGFuIGNsYXNzPVxcJ2NvbWluZy1zb29uXFwnPicgKyAkKCcuZWJtLXN0ZC1wcm9kJykudGV4dCgpICsgJzwvc3Bhbj4nO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBhdk1lc3NhZ2UgPSAnJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYXZNZXNzYWdlO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBoZWxwZXIgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBpbi1zdG9jayBkYXRlXHJcbiAgICB2YXIgZ2V0SW5TdG9ja0RhdGVNc2cgPSBmdW5jdGlvbiAocHJvZHVjdCkge1xyXG4gICAgICAgIHZhciBtc2cgPSAnJztcclxuICAgICAgICBpZiAocHJvZHVjdC5nZXRJblN0b2NrRGF0ZSgpICYmIHByb2R1Y3QuZ2V0SW5TdG9ja0RhdGUoKSAhPSAnbnVsbCcpIHtcclxuICAgICAgICAgICAgbXNnID0gJC52YWxpZGF0b3IuZm9ybWF0KFJlc291cmNlcy5JTl9TVE9DS19EQVRFLCAobmV3IERhdGUocHJvZHVjdC5nZXRJblN0b2NrRGF0ZSgpKSkudG9EYXRlU3RyaW5nKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbXNnO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBoZWxwZXIgZnVuY3Rpb24gdG8gc2V0IGF2YWlsYWJpbGl0eSBtZXNzYWdlXHJcbiAgICB2YXIgc2V0QXZhaWxhYmlsaXR5TXNnID0gZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgIGpRdWVyeShteUNvbnRhaW5lcklkICsgJyAuYXZhaWxhYmlsaXR5Omxhc3QgLnZhbHVlJykuaHRtbChtc2cpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFByaXZhdGUuIENvbXB1dGVzIHByaWNlIG9mIGEgZ2l2ZW4gcHJvZHVjdCBpbnN0YW5jZSBiYXNlZCBvbiB0aGUgc2VsZWN0ZWQgb3B0aW9ucy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdGhpc1Byb2R1Y3QgLSB0aGUgcHJvZHVjdCBpbnN0YW5jZVxyXG4gICAgICogQHJldHVybiBwcmljZSBvZiB0aGUgcHJvZHVjdCB0byAyIGRlY2ltYWwgcG9pbnRzLlxyXG4gICAgICovXHJcbiAgICB2YXIgY29tcHV0ZVByaWNlID0gZnVuY3Rpb24gKHRoaXNQcm9kdWN0KSB7XHJcblxyXG4gICAgICAgIHZhciBwcmljZSA9IHRoaXNQcm9kdWN0LnNlbGVjdGVkVmFyICE9IG51bGwgPyB0aGlzUHJvZHVjdC5zZWxlY3RlZFZhci5wcmljaW5nLnNhbGUgOiBtb2RlbC5wcmljaW5nLnNhbGU7XHJcbiAgICAgICAgLy8gY2FsY3VsYXRlIHByaWNlIGJhc2VkIG9uIHRoZSBzZWxlY3RlZCBvcHRpb25zIHByaWNlc1xyXG4gICAgICAgIGpRdWVyeS5lYWNoKHRoaXNQcm9kdWN0LnNlbGVjdGVkUHJpY2UsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcHJpY2UgPSAobmV3IE51bWJlcihwcmljZSkgKyBuZXcgTnVtYmVyKHRoaXMpKS50b0ZpeGVkKDIpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gcHJpY2U7XHJcbiAgICB9O1xyXG4gICAgLy8gTG9hZCB0aGUgeW91dHViZSB2aWRlb3Mgb25seSBvbiBkZW1hbmRcclxuICAgIC8vIHdoZW4gdGhlIHVzZXIgY2xpY2tzIG9uIHRoZSB2aWRlb3MgdGFiLCB0aGVuIHRoZSB5b3V0dWJlIHZpZGVvcyB3aWxsIGJlIGZldGNoZWQgZHluYW1pY2FsbHlcclxuICAgIC8vIGFuZCBsb2FkcyB0aGUgY29udGVudCBpbiB0aGUgcGRwVmlkZW9UYWIgZGl2LlxyXG4gICAgalF1ZXJ5KCcudmlkZW9UYWInKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ2xvYWRlZCcpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnbG9hZGVkJyk7XHJcbiAgICAgICAgdmFyIHRhcmdldCA9ICQoJyNwZHBWaWRlb1RhYicpO1xyXG4gICAgICAgIHZhciB1cmwgPSAkKCcjcHJvZHVjdFVSTCcpLnZhbCgpO1xyXG4gICAgICAgIGFqYXgubG9hZCh7XHJcbiAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2h0bWwnLFxyXG4gICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldC5odG1sKGRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIC8vIGJpbmQgY2xpY2sgaGFuZGxlcnMgZm9yIHByZXYvbmV4dCBidXR0b25zIG9uIHBkcCBmcm9tIHNlYXJjaFxyXG4gICAgdmFyIGdldE5hdkxpbmtzID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAvLyBOT1RFOiAgV0UgQ09NTUVOVCBUSElTIE9VVCBCRUNBVVNFIFBPV0VSIFJFVklFV1MgUkVOREVSSU5HIExJQlJBUlkgRE9FUyBOT1RcclxuICAgICAgICAvLyBXT1JLIElOIFNPTUUgQlJPV1NFUlMgV0hFTiBBIFBST0RVQ1QgREVUQUlMIFBBR0UgSVMgUEFSVElBTExZIFJFTE9BREVEIFVTSU5HIEFKQVguXHJcbiAgICAgICAgLy8gSUYgV0UgRE8gTk9UIEJJTkQgRVZFTlRTLCBUSEVOIFRIRSBQUkVWL05FWFQgQU5DSE9SUyBKVVNUIFdPUksgQVMgU1RBTkRBUkRcclxuICAgICAgICAvLyBIWVBFUkxJTktTIEFORCBQT1dFUlJFVklFV1MgV09SS1MgRklORS5cclxuXHJcbiAgICAgICAgLy8gYmluZCBldmVudHNcclxuICAgICAgICAvL2pRdWVyeShcIi5wcm9kdWN0bmF2aWdhdGlvbiBhXCIpLmNsaWNrKGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAvL1x0YXBwLmdldFByb2R1Y3Qoe3VybDogdGhpcy5ocmVmLCBzb3VyY2U6IFwic2VhcmNoXCJ9KTtcclxuICAgICAgICAvL1x0cmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIC8vfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHNpemUgY2hhcnQgbGluayBjbGljayBiaW5kaW5nXHJcbiAgICB2YXIgZ2V0U2l6ZUNoYXJ0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGpRdWVyeSgnLmF0dHJpYnV0ZWNvbnRlbnRsaW5rJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBhZGQgc2l6ZSBjaGFydCBkaWFsb2cgY29udGFpbmVyIGRpdiBpZiBpdHMgbm90IGFkZGVkIHlldFxyXG4gICAgICAgICAgICAvLyBvbmx5IGFkZGVkIG9uY2VcclxuICAgICAgICAgICAgaWYgKGpRdWVyeSgnI3NpemVDaGFydERpYWxvZycpLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBqUXVlcnkoJzxkaXYvPicpLmF0dHIoJ2lkJywgJ3NpemVDaGFydERpYWxvZycpLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgc2l6ZUNoYXJ0RGlhbG9nID0gZGlhbG9nLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBpZDogJ3NpemVDaGFydERpYWxvZycsIG9wdGlvbnM6IHtcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDUzMCxcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogODAwLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBSZXNvdXJjZXMuU0laRUNIQVJUX1RJVExFXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgc2l6ZUNoYXJ0RGlhbG9nLmRpYWxvZygnb3BlbicpO1xyXG5cclxuICAgICAgICAgICAgLy8gbWFrZSB0aGUgc2VydmVyIGNhbGwgdG8gbG9hZCB0aGUgc2l6ZSBjaGFydCBodG1sXHJcbiAgICAgICAgICAgICQoJyNzaXplQ2hhcnREaWFsb2cnKS5sb2FkKHRoaXMuaHJlZik7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoJy5wcm9kdWN0LXNwZWNpZmljYXRpb25zJykucmVhZHkoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKCcucHJvZHVjdC1zcGVjaWZpY2F0aW9ucycpLmxvYWQoalF1ZXJ5KCcuYXR0cmlidXRlY29udGVudGxpbmsnKS5hdHRyKCdocmVmJykpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8vIGJ1aWxkIHRoZSB0b29sdGlwIHN0cmluZyBmb3Igbm9uIHNlbGVjdGVkIHZhcmlhdGlvbnNcclxuICAgIHZhciBnZXROb25TZWxlY3RlZFRvb2x0aXAgPSBmdW5jdGlvbiAobm9uU2VsZWN0ZWRWYXJzKSB7XHJcbiAgICAgICAgdmFyIHRvb2x0aXBTdHIgPSAnJztcclxuICAgICAgICB2YXIgbnNMZW4gPSBub25TZWxlY3RlZFZhcnMubGVuZ3RoO1xyXG4gICAgICAgIGlmIChuc0xlbiA9PSAxIHx8IG5zTGVuID09IDIpIHtcclxuICAgICAgICAgICAgdG9vbHRpcFN0ciA9IG5vblNlbGVjdGVkVmFycy5qb2luKCcgJiAnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5zTGVuOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChpID09IG5zTGVuIC0gMikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvb2x0aXBTdHIgKz0gbm9uU2VsZWN0ZWRWYXJzW2ldICsgJyAmICcgKyBub25TZWxlY3RlZFZhcnNbaSArIDFdO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0b29sdGlwU3RyICs9IG5vblNlbGVjdGVkVmFyc1tpXSArICcsICc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0b29sdGlwU3RyO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBQcm9kdWN0IGluc3RhbmNlXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHBpZDogbW9kZWwuSUQsXHJcbiAgICAgICAgbmFtZTogbW9kZWwubmFtZSxcclxuICAgICAgICB2YXJpYW50OiBtb2RlbC52YXJpYW50LFxyXG4gICAgICAgIG1hc3RlcjogbW9kZWwubWFzdGVyLFxyXG4gICAgICAgIGJ1bmRsZWQ6IG1vZGVsLmJ1bmRsZWQsXHJcbiAgICAgICAgc2VsZWN0ZWRWYXJBdHRyaWJzOiB7fSwgLy8gb2JqZWN0IGNvbnRhaW5pbmcgdmFyaWF0aW9uIGF0dHJpYnV0ZXMgdmFsdWVzIGFzIG5hbWUgdmFsdWUgZS5nLiB7Y29sb3I6IFwiYmx1ZVwiLCBzaXplOiBcIjNcIiwgd2lkdGg6IFwiXCJ9XHJcbiAgICAgICAgc2VsZWN0ZWRWYXI6IG51bGwsIC8vIGN1cnJlbnRseSBzZWxlY3RlZCB2YXJpYW50XHJcbiAgICAgICAgc2VsZWN0ZWRPcHRpb25zOiB7fSwgLy8gaG9sZHMgY3VycmVudGx5IHNlbGVjdGVkIG9wdGlvbnMgb2JqZWN0IHtvcHRpb25OYW1lLCBzZWxlY3RlZCB2YWx9XHJcbiAgICAgICAgc2VsZWN0ZWRQcmljZToge30sIC8vIGhvbGRzIHByaWNlcyBmb3Igc2VsZWN0ZWQgb3B0aW9ucyBhcyB7d2FycmFudHk6IFwiXCJ9XHJcbiAgICAgICAgY29udGFpbmVySWQ6IG51bGwsIC8vIGhvbGRzIHRoZSBodG1sIGNvbnRhaW5lciBpZCBvZiB0aGlzIHByb2R1Y3RcclxuICAgICAgICBzdWJQcm9kdWN0czogW10sIC8vIGFycmF5IHRvIGtlZXAgc3ViIHByb2R1Y3RzIGluc3RhbmNlc1xyXG4gICAgICAgIGJvbnVzUHJvZHVjdDogZmFsc2UsXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEVuYWJsZSBBZGQgdG8gQ2FydCBCdXR0b24uXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZW5hYmxlQTJDQnV0dG9uOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGpRdWVyeSh0aGlzLmNvbnRhaW5lcklkICsgJyAuYWRkdG9jYXJ0IGlucHV0LCAnICsgdGhpcy5jb250YWluZXJJZCArICcgLmFkZHRvY2FydGJ1dHRvbjpsYXN0JykucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIGpRdWVyeSh0aGlzLmNvbnRhaW5lcklkICsgJyAuYWRkdG9jYXJ0YnV0dG9uOmxhc3QsICcgKyB0aGlzLmNvbnRhaW5lcklkICsgJyAuYWRkdG9jYXJ0JykucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcblxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIERpc2FibGUgQWRkIHRvIENhcnQgQnV0dG9uLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGRpc2FibGVBMkNCdXR0b246IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgalF1ZXJ5KHRoaXMuY29udGFpbmVySWQgKyAnIC5hZGR0b2NhcnQgaW5wdXQsICcgKyB0aGlzLmNvbnRhaW5lcklkICsgJyAuYWRkdG9jYXJ0YnV0dG9uOmxhc3QnKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgICAgICAgICBqUXVlcnkodGhpcy5jb250YWluZXJJZCArICcgLmFkZHRvY2FydGJ1dHRvbjpsYXN0LCAnICsgdGhpcy5jb250YWluZXJJZCArICcgLmFkZHRvY2FydCcpLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xyXG5cclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICByZW1vdmVBMkNCdXR0b246IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgIGpRdWVyeSgnLmFkZHRvY2FydCcpLmNzcygnZGlzcGxheScsICdub25lJyk7XHJcbiAgICAgICAgICAgIGpRdWVyeSgnLnByb2R1Y3RpbmZvIC5wcmljZScpLmNzcygnZGlzcGxheScsICdub25lJyk7XHJcbiAgICAgICAgICAgIGlmIChQcm9kdWN0Q2FjaGUubWFzdGVyKSB7XHJcbiAgICAgICAgICAgICAgICBqUXVlcnkoJy5wcm9kdWN0aW5mbyAucHJvZHVjdGlkJykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL2pRdWVyeSh0aGlzLmNvbnRhaW5lcklkK1wiIC52YXJpYXRpb25hdHRyaWJ1dGVzXCIpLmNzcygnZGlzcGxheScsJ25vbmUnKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIC8vIHNob3cgYXZhaWxhYmlsaXR5XHJcbiAgICAgICAgc2hvd0F2YWlsYWJpbGl0eTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBqUXVlcnkodGhpcy5jb250YWluZXJJZCArICcgLmF2YWlsYWJpbGl0eScpLnNob3coKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIC8vIGhpZGUgYXZhaWxhYmlsaXR5XHJcbiAgICAgICAgaGlkZUF2YWlsYWJpbGl0eTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBqUXVlcnkodGhpcy5jb250YWluZXJJZCArICcgLmF2YWlsYWJpbGl0eScpLmhpZGUoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIC8vIHNob3cgc2VsZWN0ZWQgaXRlbSAjXHJcbiAgICAgICAgc2hvd0l0ZW1ObzogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBqUXVlcnkodGhpcy5jb250YWluZXJJZCArICcgLnByb2R1Y3RpZCAudmFsdWUnKS5odG1sKHRoaXMuc2VsZWN0ZWRWYXIuaWQpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgLy8gcmVtb3ZlcyAgaXRlbSAjXHJcbiAgICAgICAgcmVtb3ZlSXRlbU5vOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGpRdWVyeSh0aGlzLmNvbnRhaW5lcklkICsgJyAucHJvZHVjdGlkIC52YWx1ZScpLmVtcHR5KCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICByZXZlcnRQcmljZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgJHByaWNlID0galF1ZXJ5KHRoaXMuY29udGFpbmVySWQgKyAnIC5wcm9kdWN0aW5mbyAucHJpY2U6Zmlyc3QnKTtcclxuICAgICAgICAgICAgaWYgKCEkcHJpY2UuZGF0YSgnb3JpZ2luYWxQcmljZScpKSB7XHJcbiAgICAgICAgICAgICAgICAkcHJpY2UuZGF0YSgnb3JpZ2luYWxQcmljZScsICRwcmljZS5odG1sKCkpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJHByaWNlLmh0bWwoJHByaWNlLmRhdGEoJ29yaWdpbmFsUHJpY2UnKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIC8vIGRldGVybWluZSBpZiB0aGlzIHByb2R1Y3QgaXMgcGFydCBvZiBhIGJ1bmRsZS9wcm9kdWN0IHNldCBWSUVXXHJcbiAgICAgICAgc2V0Qm9udXNQcm9kdWN0OiBmdW5jdGlvbiAoYm9udXNQcm9kdWN0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuYm9udXNQcm9kdWN0ID0gYm9udXNQcm9kdWN0O1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8vIGRldGVybWluZSBpZiB0aGlzIHByb2R1Y3QgaXMgcGFydCBvZiBhIGJ1bmRsZS9wcm9kdWN0IHNldCBWSUVXXHJcbiAgICAgICAgaXNCb251c1Byb2R1Y3Q6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYm9udXNQcm9kdWN0O1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8vIGRldGVybWluZSBpZiB0aGlzIHByb2R1Y3QgaXMgcGFydCBvZiBhIGJ1bmRsZS9wcm9kdWN0IHNldCBWSUVXXHJcbiAgICAgICAgaXNTdWJQcm9kdWN0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAobW9kZWwuYnVuZGxlZCB8fCBtb2RlbC5wcm9kdWN0U2V0UHJvZHVjdCk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgLy8gc2hvdyB0aGUgc2VsZWN0ZWQgdmFyaWF0aW9uIGF0dHJpYnV0ZSB2YWx1ZSBuZXh0IHRvIHRoZSBhdHRyaWJ1dGUgbGFiZWwgZS5nLiBDb2xvcjogQmVpZ2VcclxuICAgICAgICBzaG93U2VsZWN0ZWRWYXJBdHRyVmFsOiBmdW5jdGlvbiAodmFySWQsIHZhbCkge1xyXG4gICAgICAgICAgICBqUXVlcnkodGhpcy5jb250YWluZXJJZCArICcgLnZhcmlhdGlvbmF0dHJpYnV0ZXMgZGl2Om5vdCguY2xlYXIpJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaWQgPSBqUXVlcnkodGhpcykuZGF0YSgnZGF0YScpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh2YXJJZCA9PT0gaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcykuZmluZCgnc3Bhbi5zZWxlY3RlZHZhcnZhbCcpLmh0bWwodmFsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgLy8gc2VsZWN0cyByZXZpZXcgdGFiXHJcbiAgICAgICAgcmVhZFJldmlld3M6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgalF1ZXJ5KHRoaXMuY29udGFpbmVySWQgKyAnICN0YWJzJykudGFicygnc2VsZWN0JywgJ3BkcFJldmlld3NUYWInKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvLyBzaG93cyBwcm9kdWN0IGltYWdlcyBhbmQgdGh1bWJuYWlsc1xyXG4gICAgICAgIC8vIEBwYXJhbSBzZWxlY3RlZFZhbCAtIGN1cnJlbnRseSBzZWxlY3RlZCB2YXJpYXRpb24gYXR0ciB2YWxcclxuICAgICAgICAvLyBAcGFyYW0gdmFscyAtIHRvdGFsIGF2YWlsYWJsZSB2YXJpYXRpb24gYXR0ciB2YWx1ZXNcclxuICAgICAgICBzaG93SW1hZ2VzOiBmdW5jdGlvbiAoc2VsZWN0ZWRWYWwsIHZhbHMpIHtcclxuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgICAgICB2YWxzID0gdmFscyB8fCB7fTtcclxuXHJcbiAgICAgICAgICAgIC8vIHNob3cgc3dhdGNoIHJlbGF0ZWQgaW1hZ2VzIGZvciB0aGUgY3VycmVudCB2YXJpYXRpb24gdmFsdWVcclxuICAgICAgICAgICAgalF1ZXJ5LmVhY2godmFscywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGltZ0NvdW50ZXIgPSAtMTtcclxuICAgICAgICAgICAgICAgIHZhciB0aGlzVmFsID0gdGhpcztcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnZhbCA9PT0gc2VsZWN0ZWRWYWwgJiYgdGhpcy5pbWFnZXMpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaW1hZ2VzLnNtYWxsLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoYXQuY29udGFpbmVySWQgKyAnIC5wcm9kdWN0dGh1bWJuYWlsczpsYXN0JykuaHRtbCgnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBTaG93IE1hZ2ljWm9vbSBkYXRhIC0gYWRkZWQgYnkgbGdlbGJlcmcgOS8xNC8xMVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHpvb21pbWFnZXVybCA9ICh0aGlzVmFsLmltYWdlcy5vcmlnaW5hbC5sZW5ndGggPiAwKSA/IHRoaXNWYWwuaW1hZ2VzLm9yaWdpbmFsWzBdLnVybCA6ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2pRdWVyeSgnLnByb2R1Y3RkZXRhaWxjb2x1bW4gLnByb2R1Y3RpbWFnZSBpbWcsIC5wcm9kdWN0ZGV0YWlsY29sdW1uIC5xdWlja3ZpZXdwcm9kdWN0aW1hZ2UgaW1nJykuYXR0cignc3JjJyx0aGlzVmFsLmltYWdlcy5sYXJnZVtpXS51cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkoJy5NYWdpY1pvb20nKS5hdHRyKCdocmVmJywgem9vbWltYWdldXJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnYm9keScpLmZpbmQoJy5NYWdpY1pvb20gaW1nJykuYXR0cignc3JjJywgem9vbWltYWdldXJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTWFnaWNab29tLnVwZGF0ZSgncHJvZHVjdC1pbWFnZScsIHpvb21pbWFnZXVybCwgem9vbWltYWdldXJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8galF1ZXJ5KHRoYXQuY29udGFpbmVySWQrXCIgLnByb2R1Y3RpbWFnZVwiKS5odG1sKFwiXCIpLmFwcGVuZChqUXVlcnkoXCI8aW1nLz5cIikuYXR0cihcInNyY1wiLCB0aGlzVmFsLmltYWdlcy5sYXJnZVswXS51cmwpLmF0dHIoXCJhbHRcIiwgdGhpc1ZhbC5pbWFnZXMubGFyZ2VbMF0uYWx0KS5hdHRyKFwidGl0bGVcIiwgdGhpc1ZhbC5pbWFnZXMubGFyZ2VbMF0udGl0bGUpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIG1ha2Ugc3VyZSB0byBzaG93IG51bWJlciBvZiBpbWFnZXMgYmFzZWQgb24gdGhlIHNtYWxsZXN0IG9mIGxhcmdlIG9yIHNtYWxsIGFzIHRoZXNlIGhhdmUgdG8gaGF2ZSAxLTEgY29ycmVzcG9uZGVuY2UuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5vT2ZJbWFnZXMgPSB0aGlzLmltYWdlcy5sYXJnZS5sZW5ndGggPj0gdGhpcy5pbWFnZXMuc21hbGwubGVuZ3RoID8gdGhpcy5pbWFnZXMuc21hbGwubGVuZ3RoIDogdGhpcy5pbWFnZXMubGFyZ2UubGVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBzaG93IHRodW1ibmFpbHMgb25seSBpZiBtb3JlIHRoYW4gMSBvciBpZiB0aGlzIGlzIGEgc3VicHJvZHVjdCAoYnVuZGxlZC9zdWJwcm9kdWN0KVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgodGhpcy5pbWFnZXMuc21hbGwubGVuZ3RoID4gMSB8fCB0aGF0LmlzU3ViUHJvZHVjdCgpKSAmJiAhdGhhdC5pc0JvbnVzUHJvZHVjdCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeS5lYWNoKHRoaXMuaW1hZ2VzLnNtYWxsLCBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZ0NvdW50ZXIrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdmFyIGltYWdlSW5kID0gaW1nQ291bnRlcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbWdDb3VudGVyID4gbm9PZkltYWdlcyAtIDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaHJlZiA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJCgnI2NvbnRhaW5lcicpLmhhc0NsYXNzKCdwdF9wcm9kdWN0LWRldGFpbHMnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhyZWYgPSB0aGlzVmFsLmltYWdlcy5vcmlnaW5hbFtpbmRleF0udXJsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbiBxdWljayB2aWV3IHNpbmNlIG1hZ2ljIHpvb20gaXMgbm90IHRoZXJlLCBIZW5jZSB3ZSBuZWVkIHRvIHNldCBqYXZhc2NyaXB0OnZvaWQoMCk7IGZvciBhIHRhZyBocmVmIHZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHJlZiA9ICdqYXZhc2NyaXB0OnZvaWQoMCk7JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhhdC5jb250YWluZXJJZCArICcgLnByb2R1Y3R0aHVtYm5haWxzOmxhc3QnKS5hcHBlbmQoJzxkaXYgY2xhc3M9XFwnYWx0ZXJuYXRlLWltYWdlc1xcJz48YSBkYXRhLXpvb20taWQ9XFwncHJvZHVjdC1pbWFnZVxcJyBocmVmPVxcJycgKyBocmVmICsgJ1xcJyBjbGFzcz1cXCdhbHRlcm5hdGUtaW1hZ2VcXCcgZGF0YS1pbWFnZT1cXCcnICsgdGhpc1ZhbC5pbWFnZXMub3JpZ2luYWxbaW5kZXhdLnVybCArICdcXCc+PGltZyBjbGFzcz1cXCdpbmRleCcgKyBpbmRleCArICdcXCcgc3JjPVxcJycgKyB0aGlzLnVybCArICdcXCcgdGl0bGU9XFwnJyArIHRoaXMudGl0bGUgKyAnXFwnIGFsdD1cXCcnICsgdGhpcy5hbHQgKyAnXFwnLz48L2E+PC9kaXY+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhhdC5jb250YWluZXJJZC5pbmRleE9mKCd1aS1kaWFsb2cnKSA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGF0LmNvbnRhaW5lcklkICsgJyAucHJvZHVjdHRodW1ibmFpbHM6bGFzdCAuYWx0ZXJuYXRlLWltYWdlIGltZycpLm9uKCdjbGljayB0b3VjaHN0YXJ0JywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5vd2wtaXRlbScpLnNpYmxpbmdzKCcub3dsLWl0ZW0nKS5maW5kKCdhLmFsdGVybmF0ZS1pbWFnZScpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5vd2wtaXRlbScpLmZpbmQoJ2EuYWx0ZXJuYXRlLWltYWdlJykuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB6b29taW1hZ2V1cmwgPSAkKHRoaXMpLmNsb3Nlc3QoJy5hbHRlcm5hdGUtaW1hZ2UnKS5kYXRhKCdpbWFnZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2pRdWVyeSgnLnByb2R1Y3RkZXRhaWxjb2x1bW4gLnByb2R1Y3RpbWFnZSBpbWcsIC5wcm9kdWN0ZGV0YWlsY29sdW1uIC5xdWlja3ZpZXdwcm9kdWN0aW1hZ2UgaW1nJykuYXR0cignc3JjJyx0aGlzVmFsLmltYWdlcy5sYXJnZVtpbWFnZUluZF0udXJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnYm9keScpLmZpbmQoJy5NYWdpY1pvb20nKS5hdHRyKCdocmVmJywgem9vbWltYWdldXJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnYm9keScpLmZpbmQoJy5NYWdpY1pvb20gaW1nJykuYXR0cignc3JjJywgem9vbWltYWdldXJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWFnaWNab29tLnVwZGF0ZSgncHJvZHVjdC1pbWFnZScsIHpvb21pbWFnZXVybCwgem9vbWltYWdldXJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWFnaWNab29tLnVwZGF0ZSgncHJpbWFyeS1pbWFnZScsIHpvb21pbWFnZXVybCwgem9vbWltYWdldXJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8kKFwiYm9keVwiKS5maW5kKCcucHJvZHVjdC1pbWFnZScpLnRyaWdnZXIoXCJjbGlja1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGF0LmNvbnRhaW5lcklkICsgJyAucHJvZHVjdHRodW1ibmFpbHM6bGFzdCAub3dsLWl0ZW0nKS5maXJzdCgpLmZpbmQoJ2ltZycpLmNsaWNrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vdmFyICRpbWFnZXMgPSBqUXVlcnkodGhhdC5jb250YWluZXJJZCtcIiAucHJvZHVjdHRodW1ibmFpbHM6bGFzdCAub3dsLWl0ZW0gaW1nXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3ZhciBudW1PZlJvd3MgPSBNYXRoLmNlaWwoJGltYWdlcy5zaXplKCkvNik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vJGltYWdlcy5zbGljZShudW1PZlJvd3MgKiA2IC0gNiwgbnVtT2ZSb3dzICogNiAtIDEpLmNzcygnbWFyZ2luLWJvdHRvbScsJzAnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlc2t0b3BJdGVtcyA9IDQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGF0LmNvbnRhaW5lcklkLmluZGV4T2YoJ3VpLWRpYWxvZycpID09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2t0b3BJdGVtcyA9IDM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBkcE93bENhcm91c2VsID0gJCgnLnBkcC1vd2wtY3VzdG9taXphdGlvbicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPiA0ODApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmltYWdlcy5zbWFsbC5sZW5ndGggPiA0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGRwT3dsQ2Fyb3VzZWwub3dsQ2Fyb3VzZWwoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDEwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYXZSZXdpbmQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXdpbmQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYXY6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvdHM6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdmlnYXRpb246IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zaXZlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVCeTogMVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDQ4MToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zOiAzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlQnk6IDNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA5NjA6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtczogZGVza3RvcEl0ZW1zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlQnk6IGRlc2t0b3BJdGVtc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnaW1nLmluZGV4MCcpLnBhcmVudHMoJy5vd2wtaXRlbScpLmZpbmQoJ2EuYWx0ZXJuYXRlLWltYWdlJykuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJChwZHBPd2xDYXJvdXNlbCkuaGFzQ2xhc3MoJ293bC1jYXJvdXNlbCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBkcE93bENhcm91c2VsLnRyaWdnZXIoJ2Rlc3Ryb3kub3dsLmNhcm91c2VsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBkcE93bENhcm91c2VsLm93bENhcm91c2VsKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6IGRlc2t0b3BJdGVtcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmF2UmV3aW5kOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAxMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV3aW5kOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmF2OiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG90czogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdmlnYXRpb246IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zaXZlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVCeTogMVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDQ4MToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zOiAzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlQnk6IDNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA5NjA6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtczogZGVza3RvcEl0ZW1zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlQnk6IGRlc2t0b3BJdGVtc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnaW1nLmluZGV4MCcpLnBhcmVudHMoJy5vd2wtaXRlbScpLmZpbmQoJ2EuYWx0ZXJuYXRlLWltYWdlJykuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPCA0ODEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBkcE93bENhcm91c2VsLm93bENhcm91c2VsKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtczogMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZUJ5OiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbjogMTAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmF2UmV3aW5kOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXdpbmQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3RzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdmlnYXRpb246IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNpdmU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZUJ5OiAxXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDQ4MToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6IDMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZUJ5OiAzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDk2MDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6IGRlc2t0b3BJdGVtcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlQnk6IGRlc2t0b3BJdGVtc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEV2ZW50IGhhbmRsZXIgd2hlbiBhIHZhcmlhdGlvbiBhdHRyaWJ1dGUgaXMgc2VsZWN0ZWQvZGVzZWxlY3RlZC5cclxuICAgICAgICAgKi9cclxuICAgICAgICB2YXJBdHRyU2VsZWN0ZWQ6IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgc2VsZWN0ZWQgdmFsdWUgbm9kZVxyXG4gICAgICAgICAgICB0aGlzLnNob3dTZWxlY3RlZFZhckF0dHJWYWwoZS5kYXRhLmlkLCBlLmRhdGEudmFsIHx8ICcnKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRWYXJBdHRyaWJzW2UuZGF0YS5pZF0gPSBlLmRhdGEudmFsO1xyXG5cclxuICAgICAgICAgICAgLy8gaWYgdGhpcyBpcyBhIGRlc2VsZWN0aW9uIGFuZCB1c2VyIGxhbmRlZCBvbiBhIHZhcmlhbnQgcGFnZSB0aGVuIHJlc2V0IGl0cyB2YXJpYW50IGZsYWdcclxuICAgICAgICAgICAgLy8gYXMgbm93IHVzZXIgaGFzIGRlc2VsZWN0ZWQgYW4gYXR0cmlidXRlIHRodXMgbWFraW5nIGl0IGVzc2VudGlhbGx5IGEgbWFzdGVyIHByb2R1Y3Qgdmlld1xyXG4gICAgICAgICAgICBpZiAoZS5kYXRhLnZhbCA9PSBudWxsICYmIHRoaXMudmFyaWFudCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52YXJpYW50ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1hc3RlciA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIHN0b3JlIHRoaXMgcmVmXHJcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgIC8vIHRyaWdnZXIgdXBkYXRlIGV2ZW50IHdoaWNoIHdpbGwgdXBkYXRlIGV2ZXJ5IG90aGVyIHZhcmlhdGlvbiBhdHRyaWJ1dGUgaS5lLiBlbmFibGUvZGlzYWJsZSBldGMuXHJcblxyXG4gICAgICAgICAgICAvLyBmaXJzdCByZXNldCB0aGUgY29udGVudHMgb2YgZWFjaCBhdHRyaWJ1dGUgZGlzcGxheVxyXG4gICAgICAgICAgICAvLyB3aGVuIHdlIGhhdmUgZ290IHRoZSB2YXJyaWF0aW9ucyBkYXRhXHJcbiAgICAgICAgICAgIGlmICghaXNMb2FkaW5nVmFyKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBmaW5kIHZhcmlhbnRzIHdoaWNoIG1hdGNoIHRoZSBjdXJyZW50IHNlbGVjdGlvblxyXG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkVmFyQXR0clZhcmlhbnRzID0gZS5kYXRhLnZhbCAhPSBudWxsID8gdGhpcy5maW5kVmFyaWF0aW9ucyh7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGUuZGF0YS5pZCxcclxuICAgICAgICAgICAgICAgICAgICB2YWw6IGUuZGF0YS52YWxcclxuICAgICAgICAgICAgICAgIH0pIDogbnVsbDtcclxuICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZFZhckF0dHJzID0galF1ZXJ5LmV4dGVuZCh7fSwge30sIHRoaXMuc2VsZWN0ZWRWYXJBdHRyaWJzKTtcclxuICAgICAgICAgICAgICAgIHZhciB2YWxpZFZhcmlhbnRzID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHZhciB1bnNlbGVjdGVkVmFyQXR0cnMgPSBuZXcgQXJyYXkoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBmb3IgZWFjaCBzZWxlY3RlZCB2YXJpYXRpb24gYXR0cmlidXRlIGZpbmQgdmFsaWQgdmFyaWFudHNcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIHNlbGVjdGVkVmFyIGluIHNlbGVjdGVkVmFyQXR0cnMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWRWYXJBdHRyc1tzZWxlY3RlZFZhcl0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRWYXJpYW50cyA9IHRoaXMuZmluZFZhcmlhdGlvbnMoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHNlbGVjdGVkVmFyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsOiBzZWxlY3RlZFZhckF0dHJzW3NlbGVjdGVkVmFyXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCB2YWxpZFZhcmlhbnRzKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1bnNlbGVjdGVkVmFyQXR0cnMucHVzaChzZWxlY3RlZFZhcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIGVhY2ggdmFyaWF0aW9uIGF0dHJpYnV0ZSBkaXNwbGF5XHJcbiAgICAgICAgICAgICAgICBqUXVlcnkuZWFjaChtb2RlbC52YXJpYXRpb25zLmF0dHJpYnV0ZXMsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoKHRoaXMuaWQgIT0gZS5kYXRhLmlkIHx8IGUuZGF0YS52YWwgPT0gbnVsbCkgJiYgc2VsZWN0ZWRWYXJBdHRyc1t0aGlzLmlkXSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQudmFyQXR0ckRpc3BsYXlIYW5kbGVyKHRoaXMuaWQsIHZhbGlkVmFyaWFudHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5pZCAhPSBlLmRhdGEuaWQgJiYgc2VsZWN0ZWRWYXJBdHRyc1t0aGlzLmlkXSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQudmFyQXR0ckRpc3BsYXlIYW5kbGVyKHRoaXMuaWQsIHNlbGVjdGVkVmFyQXR0clZhcmlhbnRzKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzaG93IHN3YXRjaCByZWxhdGVkIGltYWdlcyBmb3IgdGhlIGN1cnJlbnQgdmFsdWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5zaG93SW1hZ2VzKGUuZGF0YS52YWwsIHRoaXMudmFscyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gYmFzZWQgb24gdGhlIGN1cnJlbnRseSBzZWxlY3RlZCB2YXJpYXRpb24gYXR0cmlidXRlIHZhbHVlcywgdHJ5IHRvIGZpbmQgYSBtYXRjaGluZyB2YXJpYW50XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkVmFyID0gdGhpcy5maW5kVmFyaWF0aW9uKHRoaXMuc2VsZWN0ZWRWYXJBdHRyaWJzKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gbGV0cyBmaXJlIHJlZnJlc2ggdmlldyBldmVudCB0byBlbmFibGUvZGlzYWJsZSB2YXJpYXRpb25zIGF0dHJzXHJcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFZpZXcoKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBnbyB0aHJ1IGFsbCB2YXJpYXRpb25zIGF0dHIgYW5kIGRpc2FibGUgd2hpY2ggYXJlIG5vdCBhdmFpbGFibGVcclxuICAgICAgICAgKi9cclxuICAgICAgICByZXNldFZhcmlhdGlvbnM6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKGlzTG9hZGluZ1Zhcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuOyAvLyB3ZSBkb24ndCBoYXZlIHRoZSBjb21wbGV0ZSBkYXRhIHlldFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICAgICAgdmFyIHZhbGlkVmFyaWFudHMgPSBtb2RlbC52YXJpYXRpb25zLnZhcmlhbnRzO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFZhckF0dHJpYnMpIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIHNlbGVjdGVkVmFyQXR0ciBpbiB0aGlzLnNlbGVjdGVkVmFyQXR0cmlicykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkVmFyQXR0cmlic1tzZWxlY3RlZFZhckF0dHJdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkVmFyaWFudHMgPSB0aGF0LmZpbmRWYXJpYXRpb25zKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBzZWxlY3RlZFZhckF0dHIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWw6IHRoaXMuc2VsZWN0ZWRWYXJBdHRyaWJzW3NlbGVjdGVkVmFyQXR0cl1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgdmFsaWRWYXJpYW50cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBqUXVlcnkodGhpcy5jb250YWluZXJJZCArICcgLnZhcmlhdGlvbmF0dHJpYnV0ZXMgLnN3YXRjaGVzJykubm90KCcuY3VycmVudCcpLm5vdCgnLnNlbGVjdGVkJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YWEgPSBqUXVlcnkodGhpcykuZGF0YSgnZGF0YScpOyAvLyBkYXRhIGlzIGlkIHNldCB2aWEgYXBwLmhpZGRlbkRhdGEgYXBpXHJcbiAgICAgICAgICAgICAgICBqUXVlcnkodGhpcykuZmluZCgnYS5zd2F0Y2hhbmNob3InKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBmaW5kIEEgdmFyaWF0aW9uIHdpdGggdGhpcyB2YWxcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZmlsdGVyZWRWYXJpYW50cyA9IHRoYXQuZmluZFZhcmlhdGlvbnMoe2lkOiBkYXRhYSwgdmFsOiB0aGlzLnRpdGxlfSwgdmFsaWRWYXJpYW50cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbHRlcmVkVmFyaWFudHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBmb3VuZCBhdCBsZWFzdCAxIHNvIGtlZXAgaXQgZW5hYmxlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcykucGFyZW50KCkucmVtb3ZlQ2xhc3MoJ3Vuc2VsZWN0YWJsZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzKS5wYXJlbnQoKS5hZGRDbGFzcygndW5zZWxlY3RhYmxlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzKS5wYXJlbnQoKS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGpRdWVyeSh0aGlzLmNvbnRhaW5lcklkICsgJyAudmFyaWF0aW9uYXR0cmlidXRlcyAudmFyaWFudGRyb3Bkb3duIHNlbGVjdCcpLm5vdCgnLmN1cnJlbnQgc2VsZWN0Jykubm90KCcuc2VsZWN0ZWQgc2VsZWN0JykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgJHNlbGVjdCA9IGpRdWVyeSh0aGlzKTtcclxuICAgICAgICAgICAgICAgIHZhciB2YUlkID0gJHNlbGVjdC5kYXRhKCdkYXRhJykuaWQ7ICAvLyBkYXRhIGlzIGlkIHNldCB2aWEgYXBwLmhpZGRlbkRhdGEgYXBpXHJcbiAgICAgICAgICAgICAgICB2YXIgb3B0aW9ucyA9ICRzZWxlY3QuZGF0YSgnb3B0aW9ucycpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFvcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICRzZWxlY3QuZmluZCgnb3B0aW9uJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkb3B0aW9uID0galF1ZXJ5KHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnB1c2goe3ZhbHVlOiAkb3B0aW9uLnZhbCgpLCB0ZXh0OiAkb3B0aW9uLnRleHQoKSwgc2VsZWN0ZWQ6IGZhbHNlfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNlbGVjdC5kYXRhKCdvcHRpb25zJywgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgbGVuID0gb3B0aW9ucy5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRWYWwgPSAkc2VsZWN0LnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgJHNlbGVjdC5lbXB0eSgpO1xyXG4gICAgICAgICAgICAgICAgalF1ZXJ5LmVhY2gob3B0aW9ucywgZnVuY3Rpb24gKGluZGV4LCB2YWx1ZSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAobGVuID4gMSAmJiBpbmRleCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzZWxlY3QuYXBwZW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KCc8b3B0aW9uPjwvb3B0aW9uPicpLnRleHQodmFsdWUudGV4dCkudmFsKHZhbHVlLnZhbHVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47IC8vIHZlcnkgZmlyc3Qgb3B0aW9uIHdoZW4gdGhlIGxlbmd0aCBpcyBncmVhdGVyIHRoYW4gMSBpcyAnU2VsZWN0IC4uLicgbWVzc2FnZSBzbyBza2lwIGl0XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmaWx0ZXJlZFZhcmlhbnRzID0gdGhhdC5maW5kVmFyaWF0aW9ucyh7aWQ6IHZhSWQsIHZhbDogdmFsdWUudmFsdWV9LCB2YWxpZFZhcmlhbnRzKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZmlsdGVyZWRWYXJpYW50cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vYWRkIGl0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzZWxlY3QuYXBwZW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KCc8b3B0aW9uPjwvb3B0aW9uPicpLnRleHQodmFsdWUudGV4dCkudmFsKHZhbHVlLnZhbHVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vIHZhcmlhbnQgZm91bmQgd2l0aCB0aGlzIHZhbHVlIGNvbWJpbmF0aW9uIHNvIGRpc2FibGUgaXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy90aGlzLmRpc2FibGVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKmlmICh0aGlzLnNlbGVjdGVkKSB7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyByZW1vdmUgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCB2YWx1ZSBpZiB0aGUgdmFsdWUgaXMgbm90IHNlbGVjdGFibGVcclxuXHRcdFx0XHRcdFx0XHRcdHRoYXQuc2hvd1NlbGVjdGVkVmFyQXR0clZhbChhdHRySWQsIFwiXCIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhhdC5zZWxlY3RlZFZhckF0dHJpYnNbYXR0cklkXSA9IG51bGw7XHJcblx0XHRcdFx0XHRcdFx0fSovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBjdXJyZW50IHNlbGVjdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3RoaXMuc2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAkc2VsZWN0LnZhbChzZWxlY3RlZFZhbCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIGdpdmVuIGEgdmFyaWF0aW9uIGF0dHJpYnV0ZSBpZCBhbmQgdmFsaWQgdmFyaWFudHMsIGl0IHdvdWxkIGFkanVzdCB0aGUgdWkgaS5lLiBlbmFibGUvZGlzYWJsZVxyXG4gICAgICAgICAqIGFwcHJvcHJpYXRlIGF0dHJpYnV0ZSB2YWx1ZXMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gYXR0cklkIC0gU3RyaW5nLCBpZCBvZiB0aGUgdmFyaWF0aW9uIGF0dHJpYnV0ZVxyXG4gICAgICAgICAqIEBwYXJhbSB2YWxpZFZhcmlhbnRzIC0gQXJyYXkgb2YganNvbiBvYmplY3RzIG9mIHZhbGlkIHZhcmlhbnRzIGZvciB0aGUgZ2l2ZW4gYXR0cmlidXRlIGlkXHJcbiAgICAgICAgICogKi9cclxuICAgICAgICB2YXJBdHRyRGlzcGxheUhhbmRsZXI6IGZ1bmN0aW9uIChhdHRySWQsIHZhbGlkVmFyaWFudHMpIHtcclxuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzOyAvLyBwcmVzZXJ2ZSB0aGlzIGluc3RhbmNlXHJcbiAgICAgICAgICAgIHZhciBmdXR1cmVWYXJpYW50cyA9IHZhbGlkVmFyaWFudHM7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkVmFyQXR0cmlicykge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgc2VsZWN0ZWRWYXJBdHRyIGluIHRoaXMuc2VsZWN0ZWRWYXJBdHRyaWJzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRWYXJBdHRyaWJzW3NlbGVjdGVkVmFyQXR0cl0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnV0dXJlVmFyaWFudHMgPSB0aGF0LmZpbmRWYXJpYXRpb25zKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBzZWxlY3RlZFZhckF0dHIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWw6IHRoaXMuc2VsZWN0ZWRWYXJBdHRyaWJzW3NlbGVjdGVkVmFyQXR0cl1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnV0dXJlVmFyaWFudHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBsb29wIHRocnUgYWxsIG5vbi1kcm9wZG93biB1aSBlbGVtZW50cyBpLmUuIHN3YXRjaGVzIGUuZy4gY29sb3IsIHdpZHRoLCBsZW5ndGggZXRjLlxyXG4gICAgICAgICAgICBqUXVlcnkodGhpcy5jb250YWluZXJJZCArICcgLnZhcmlhdGlvbmF0dHJpYnV0ZXMgLnN3YXRjaGVzLmZ1dHVyZSwgJyArIHRoaXMuY29udGFpbmVySWQgKyAnIC52YXJpYXRpb25hdHRyaWJ1dGVzIC5zd2F0Y2hlcy5jdXJyZW50JykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgJHN3YXRjaCA9IGpRdWVyeSh0aGlzKTtcclxuICAgICAgICAgICAgICAgIHZhciBzd2F0Y2hJZCA9ICRzd2F0Y2guZGF0YSgnZGF0YScpOyAgLy8gZGF0YSBpcyBpZCBzZXQgdmlhIGFwcC5oaWRkZW5EYXRhIGFwaVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChzd2F0Y2hJZCA9PT0gYXR0cklkICYmIHZhbGlkVmFyaWFudHMpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHN3YXRjaC5maW5kKCdhLnN3YXRjaGFuY2hvcicpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSBqUXVlcnkodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYXJlbnRMaSA9ICR0aGlzLnBhcmVudCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmluZCBBIHZhcmlhdGlvbiB3aXRoIHRoaXMgdmFsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaWx0ZXJlZFZhcmlhbnRzID0gJHN3YXRjaC5oYXNDbGFzcygnZnV0dXJlJykgPyB0aGF0LmZpbmRWYXJpYXRpb25zKHtpZDogYXR0cklkLCB2YWw6IHRoaXMudGl0bGV9LCBmdXR1cmVWYXJpYW50cykgOiB0aGF0LmZpbmRWYXJpYXRpb25zKHtpZDogYXR0cklkLCB2YWw6IHRoaXMudGl0bGV9LCB2YWxpZFZhcmlhbnRzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbHRlcmVkVmFyaWFudHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZm91bmQgYXQgbGVhc3QgMSBzbyBrZWVwIGl0IGVuYWJsZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudExpLnJlbW92ZUNsYXNzKCd1bnNlbGVjdGFibGUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc3dhdGNoLmhhc0NsYXNzKCdjb2xvcicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFnZXRBdmFpbGFiaWxpdHkoZmlsdGVyZWRWYXJpYW50cykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCR0aGlzLmZpbmQoJy5vdXQtb2Ytc3RvY2snKS5zaXplKCkgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLnByZXBlbmQoJzxzcGFuIGNsYXNzPVxcJ291dC1vZi1zdG9ja1xcJz48L3NwYW4+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy5maW5kKCcub3V0LW9mLXN0b2NrJykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWdldEF2YWlsYWJpbGl0eShmaWx0ZXJlZFZhcmlhbnRzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHRoaXMuZmluZCgnc3BhbicpLnRleHQoKS5pbmRleE9mKCdPdXQgb2YgU3RvY2snKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkdGhpcy5maW5kKCdzcGFuJykudGV4dCgpLmluZGV4T2YoJ05ldycpICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoJ3NwYW4nKS50ZXh0KCR0aGlzLmZpbmQoJ3NwYW4nKS50ZXh0KCkgKyAnIC8gT3V0IG9mIFN0b2NrJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoJ3NwYW4nKS50ZXh0KCdPdXQgb2YgU3RvY2snKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkdGhpcy5maW5kKCdzcGFuJykudGV4dCgpLmluZGV4T2YoJ05ldycpICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMuZmluZCgnc3BhbicpLnRleHQoJHRoaXMuZmluZCgnc3BhbicpLnRleHQoKS5yZXBsYWNlKCcgLyBPdXQgb2YgU3RvY2snLCAnJykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMuZmluZCgnc3BhbicpLnRleHQoJHRoaXMuZmluZCgnc3BhbicpLnRleHQoKS5yZXBsYWNlKCdPdXQgb2YgU3RvY2snLCAnJykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm8gdmFyaWFudCBmb3VuZCB3aXRoIHRoaXMgdmFsdWUgY29tYmluYXRpb24gc28gZGlzYWJsZSBpdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50TGkuYWRkQ2xhc3MoJ3Vuc2VsZWN0YWJsZScpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnRMaS5oYXNDbGFzcygnc2VsZWN0ZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSB0aGUgY3VycmVudGx5IHNlbGVjdGVkIHZhbHVlIGlmIHRoZSB2YWx1ZSBpcyBub3Qgc2VsZWN0YWJsZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuc2hvd1NlbGVjdGVkVmFyQXR0clZhbChhdHRySWQsICcnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LnNlbGVjdGVkVmFyQXR0cmlic1thdHRySWRdID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBjdXJyZW50IHNlbGVjdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50TGkucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBsb29wIHRocnUgYWxsIHRoZSBub24tc3dhdGNoZXMoZHJvcCBkb3duKSBhdHRyaWJ1dGVzXHJcbiAgICAgICAgICAgIGpRdWVyeSh0aGlzLmNvbnRhaW5lcklkICsgJyAudmFyaWF0aW9uYXR0cmlidXRlcyAudmFyaWFudGRyb3Bkb3duLmZ1dHVyZSBzZWxlY3QsICcgKyB0aGlzLmNvbnRhaW5lcklkICsgJyAudmFyaWF0aW9uYXR0cmlidXRlcyAudmFyaWFudGRyb3Bkb3duLmN1cnJlbnQgc2VsZWN0JykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgJHNlbGVjdCA9IGpRdWVyeSh0aGlzKTtcclxuICAgICAgICAgICAgICAgIHZhciB2YUlkID0gJHNlbGVjdC5kYXRhKCdkYXRhJykuaWQ7ICAvLyBkYXRhIGlzIGlkIHNldCB2aWEgYXBwLmhpZGRlbkRhdGEgYXBpXHJcbiAgICAgICAgICAgICAgICBpZiAodmFJZCA9PT0gYXR0cklkICYmIHZhbGlkVmFyaWFudHMpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSAkc2VsZWN0LmRhdGEoJ29wdGlvbnMnKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIW9wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2VsZWN0LmZpbmQoJ29wdGlvbicpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRvcHRpb24gPSBqUXVlcnkodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnB1c2goe3ZhbHVlOiAkb3B0aW9uLnZhbCgpLCB0ZXh0OiAkb3B0aW9uLnRleHQoKSwgc2VsZWN0ZWQ6IGZhbHNlfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2VsZWN0LmRhdGEoJ29wdGlvbnMnLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxlbiA9IG9wdGlvbnMubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZFZhbCA9ICRzZWxlY3QudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNlbGVjdC5lbXB0eSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeS5lYWNoKG9wdGlvbnMsIGZ1bmN0aW9uIChpbmRleCwgdmFsdWUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsZW4gPiAxICYmIGluZGV4ID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzZWxlY3QuYXBwZW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSgnPG9wdGlvbj48L29wdGlvbj4nKS50ZXh0KHZhbHVlLnRleHQpLnZhbCh2YWx1ZS52YWx1ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47IC8vIHZlcnkgZmlyc3Qgb3B0aW9uIHdoZW4gdGhlIGxlbmd0aCBpcyBncmVhdGVyIHRoYW4gMSBpcyAnU2VsZWN0IC4uLicgbWVzc2FnZSBzbyBza2lwIGl0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZpbmQgQSB2YXJpYXRpb24gd2l0aCB0aGlzIHZhbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmlsdGVyZWRWYXJpYW50cyA9ICRzZWxlY3QuY2xvc2VzdCgnLnZhcmlhbnRkcm9wZG93bicpLmhhc0NsYXNzKCdmdXR1cmUnKSA/IHRoYXQuZmluZFZhcmlhdGlvbnMoe2lkOiBhdHRySWQsIHZhbDogdmFsdWUudmFsdWV9LCBmdXR1cmVWYXJpYW50cykgOiB0aGF0LmZpbmRWYXJpYXRpb25zKHtpZDogYXR0cklkLCB2YWw6IHZhbHVlLnZhbHVlfSwgdmFsaWRWYXJpYW50cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWx0ZXJlZFZhcmlhbnRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZvdW5kIGF0IGxlYXN0IDEgc28ga2VlcCBpdCBlbmFibGVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb29zID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWdldEF2YWlsYWJpbGl0eShmaWx0ZXJlZFZhcmlhbnRzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9vcyA9ICcgLSBPdXQgb2YgU3RvY2snO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9hZGQgaXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzZWxlY3QuYXBwZW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSgnPG9wdGlvbj48L29wdGlvbj4nKS50ZXh0KHZhbHVlLnRleHQgKyBvb3MpLnZhbCh2YWx1ZS52YWx1ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBubyB2YXJpYW50IGZvdW5kIHdpdGggdGhpcyB2YWx1ZSBjb21iaW5hdGlvbiBzbyBkaXNhYmxlIGl0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3RoaXMuZGlzYWJsZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKmlmICh0aGlzLnNlbGVjdGVkKSB7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyByZW1vdmUgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCB2YWx1ZSBpZiB0aGUgdmFsdWUgaXMgbm90IHNlbGVjdGFibGVcclxuXHRcdFx0XHRcdFx0XHRcdHRoYXQuc2hvd1NlbGVjdGVkVmFyQXR0clZhbChhdHRySWQsIFwiXCIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhhdC5zZWxlY3RlZFZhckF0dHJpYnNbYXR0cklkXSA9IG51bGw7XHJcblx0XHRcdFx0XHRcdFx0fSovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgY3VycmVudCBzZWxlY3Rpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdGhpcy5zZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNlbGVjdC52YWwoc2VsZWN0ZWRWYWwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogcmVmcmVzaCB0aGUgVUkgaS5lLiBhdmFpbGFiaWxpdHksIHByaWNlLCBBMkMgYnV0dG9uIGFuZCB2YXJpYXRpb24gYXR0cmlidXRlcyBkaXNwbGF5XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcmVmcmVzaFZpZXc6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHRoaXNQcm9kdWN0ID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgIGlmICghaXNMb2FkaW5nVmFyICYmIHRoaXMuc2VsZWN0ZWRWYXIgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgLy8gaWYgd2UgaGF2ZSBsb2FkZWQgdGhlIHZhcmlhdGlvbnMgZGF0YSB0aGVuIGxldHMgaWYgdGhlIHVzZXIgaGFzIGFscmVhZHkgc2VsZWN0ZWQgc29tZSB2YWx1ZXNcclxuICAgICAgICAgICAgICAgIC8vIGZpbmQgYSBtYXRjaGluZyB2YXJpYXRpb25cclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRWYXIgPSB0aGlzLmZpbmRWYXJpYXRpb24odGhpcy5zZWxlY3RlZFZhckF0dHJpYnMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIWlzTG9hZGluZ1ZhciAmJiB0aGlzLnNlbGVjdGVkVmFyICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIC8vRmFjZWJvb2sgUGl4ZWwgQ29kZSBmb3IgdmFyaWFudCB2aWV3XHJcbiAgICAgICAgICAgICAgICBmYnEoJ3RyYWNrJywgJ1ZpZXdDb250ZW50Jywge1xyXG4gICAgICAgICAgICAgICAgICAgICdjb250ZW50X2lkcyc6IFt0aGlzUHJvZHVjdC5zZWxlY3RlZFZhci5pZF0sXHJcbiAgICAgICAgICAgICAgICAgICAgJ2NvbnRlbnRfdHlwZSc6ICdwcm9kdWN0J1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgYXZhaWxhYmlsaXR5XHJcbiAgICAgICAgICAgICAgICByZWxvYWRBdmFpbGFiaWxpdHkodGhpc1Byb2R1Y3QsIHRoaXNQcm9kdWN0LnNlbGVjdGVkT3B0aW9ucy5RdWFudGl0eSk7XHJcbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgcHJpY2VcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd1VwZGF0ZWRQcmljZShjb21wdXRlUHJpY2UodGhpc1Byb2R1Y3QpLCB0aGlzLnNlbGVjdGVkVmFyLnByaWNpbmcuc3RhbmRhcmQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghKCF0aGlzLnNlbGVjdGVkVmFyLmluU3RvY2sgJiYgdGhpcy5zZWxlY3RlZFZhci5hdlN0YXR1cyA9PT0gQ29uc3RhbnRzLkFWQUlMX1NUQVRVU19OT1RfQVZBSUxBQkxFKSAmJiAodGhpcy5nZXRQcmljZSgpID4gMCB8fCB0aGlzLmlzUHJvbW9QcmljZSgpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlcGxhY2UgdGhlIGhlcm8gc2hvdCB3aXRoIHRoZSBzcGVjaWZpYyB2YXJpYW50IGNob3NlblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2YXJJRCA9IHRoaXMuc2VsZWN0ZWRWYXIuaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGltYWdlVXJsID0gbW9kZWwuaW1hZ2VzLnZhcmlhbnRzW3ZhcklEXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgem9vbUltYWdlVXJsID0gbW9kZWwuaW1hZ2VzLnpvb212YXJpYW50c1t2YXJJRF07XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbG9hZCB0aGUgZnVsbHkgcXVhbGlmaWVkIHZhcmlhdGlvbiBpbWFnZVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbWFnZVVybCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8valF1ZXJ5KCcucHJvZHVjdGRldGFpbGNvbHVtbiAucHJvZHVjdGltYWdlIGltZywgLnByb2R1Y3RkZXRhaWxjb2x1bW4gLnF1aWNrdmlld3Byb2R1Y3RpbWFnZSBpbWcnKS5hdHRyKCdzcmMnLGltYWdlVXJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KCcuTWFnaWNab29tJykuYXR0cignaHJlZicsIHpvb21JbWFnZVVybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJ2JvZHknKS5maW5kKCcuTWFnaWNab29tIGltZycpLmF0dHIoJ3NyYycsIHpvb21JbWFnZVVybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hZ2ljWm9vbS51cGRhdGUoJ3Byb2R1Y3QtaW1hZ2UnLCB6b29tSW1hZ2VVcmwsIHpvb21JbWFnZVVybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dJdGVtTm8oKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dBdmFpbGFiaWxpdHkoKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBlbmFibGUgYWRkIHRvIGNhcnQgYnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmFibGVBMkNCdXR0b24oKTtcclxuICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcykudHJpZ2dlcignQWRkdG9DYXJ0RW5hYmxlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkKCcjUXVhbnRpdHknKS52YWwoKSA8IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnYWRkdG9jYXJ0YnV0dG9uOmxhc3QnKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuYWRkdG9jYXJ0JykuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdGVkVmFyLmVhcmx5QmlyZE1lc3NhZ2UgIT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dJdGVtTm8oKTtcclxuICAgICAgICAgICAgICAgICAgICAvL3RoaXMuaGlkZUF2YWlsYWJpbGl0eSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzYWJsZUEyQ0J1dHRvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzKS50cmlnZ2VyKCdBZGR0b0NhcnREaXNhYmxlZCcpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvL3RoaXMucmVtb3ZlSXRlbU5vKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93SXRlbU5vKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93QXZhaWxhYmlsaXR5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy90aGlzLnJldmVydFByaWNlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNhYmxlQTJDQnV0dG9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMpLnRyaWdnZXIoJ0FkZHRvQ2FydERpc2FibGVkJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFZhci5hdlN0YXR1cyA9PT0gQ29uc3RhbnRzLkFWQUlMX1NUQVRVU19OT1RfQVZBSUxBQkxFKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy90aGlzLnJlbW92ZUEyQ0J1dHRvbigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzTG9hZGluZ1Zhcikge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBhdmFpbGFiaWxpdHlcclxuICAgICAgICAgICAgICAgICAgICBzZXRBdmFpbGFiaWxpdHlNc2cocHJvZ3Jlc3Muc2hvdygncHJvZHVjdGxvYWRlcicpKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0QXZhaWxhYmlsaXR5TXNnKFJlc291cmNlcy5OT05fU0VMRUNURUQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVJdGVtTm8oKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0F2YWlsYWJpbGl0eSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXZlcnRQcmljZSgpO1xyXG4gICAgICAgICAgICAgICAgLy8gZGlzYWJsZSBhZGQgdG8gY2FydCBidXR0b25cclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzYWJsZUEyQ0J1dHRvbigpO1xyXG4gICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMpLnRyaWdnZXIoJ0FkZHRvQ2FydERpc2FibGVkJyk7XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgbm9uU2VsZWN0ZWRWYXJzID0gW107XHJcblxyXG4gICAgICAgICAgICB2YXIgdmFsaWRWYXJpYW50cyA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBzZWxlY3RlZFZhciBpbiB0aGlzLnNlbGVjdGVkVmFyQXR0cmlicykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRWYXJBdHRyaWJzW3NlbGVjdGVkVmFyXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbGlkVmFyaWFudHMgPSB0aGlzLmZpbmRWYXJpYXRpb25zKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHNlbGVjdGVkVmFyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWw6IHRoaXMuc2VsZWN0ZWRWYXJBdHRyaWJzW3NlbGVjdGVkVmFyXVxyXG4gICAgICAgICAgICAgICAgICAgIH0sIHZhbGlkVmFyaWFudHMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyB1cGRhdGUgc2VsZWN0ZWQgdmFyIGF0dHIgdmFscyBhbmQgcmVmcmVzaCB0aGVpciBkaXNwbGF5XHJcbiAgICAgICAgICAgIGpRdWVyeS5lYWNoKG1vZGVsLnZhcmlhdGlvbnMuYXR0cmlidXRlcywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3Quc2hvd1NlbGVjdGVkVmFyQXR0clZhbCh0aGlzLmlkLCB0aGlzUHJvZHVjdC5zZWxlY3RlZFZhckF0dHJpYnNbdGhpcy5pZF0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghdGhpc1Byb2R1Y3Quc2VsZWN0ZWRWYXJBdHRyaWJzW3RoaXMuaWRdIHx8IHRoaXNQcm9kdWN0LnNlbGVjdGVkVmFyQXR0cmlic1t0aGlzLmlkXSA9PSAnJykge1xyXG4gICAgICAgICAgICAgICAgICAgIG5vblNlbGVjdGVkVmFycy5wdXNoKHRoaXMubmFtZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LnZhckF0dHJEaXNwbGF5SGFuZGxlcih0aGlzLmlkLCB2YWxpZFZhcmlhbnRzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBwcm9jZXNzIG5vbi1zZWxlY3RlZCB2YWxzIGFuZCBzaG93IHVwZGF0ZWQgdG9vbHRpcCBmb3IgQTJDIGJ1dHRvbiBhcyBhIHJlbWluZGVyXHJcbiAgICAgICAgICAgIC8vIGFuZCBzaG93IGl0IGFsb25nIGF2YWlsYWJpbGl0eVxyXG4gICAgICAgICAgICB2YXIgdG9vbHRpcFN0ciA9IGdldE5vblNlbGVjdGVkVG9vbHRpcChub25TZWxlY3RlZFZhcnMpO1xyXG4gICAgICAgICAgICAvL3ZhciBtaXNzaW5ndmFsdWUgPSAkKFwiLm1pc3Npbmd2YWx1ZVwiKS52YWwoKTtcclxuICAgICAgICAgICAgaWYgKG5vblNlbGVjdGVkVmFycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXZhaWxNc2cgPSAkLnZhbGlkYXRvci5mb3JtYXQoUmVzb3VyY2VzLk1JU1NJTkdfVkFMLCB0b29sdGlwU3RyKTtcclxuICAgICAgICAgICAgICAgIHNldEF2YWlsYWJpbGl0eU1zZyhhdmFpbE1zZyk7XHJcbiAgICAgICAgICAgICAgICAvL2pRdWVyeSh0aGlzUHJvZHVjdC5jb250YWluZXJJZCtcIiAuYWRkdG9jYXJ0YnV0dG9uOmxhc3RcIikuYXR0cihcInRpdGxlXCIsIGF2YWlsTXNnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIHJlbmRlcnMgcHJpY2luZyBkaXYgZ2l2ZW4gYSBzYWxlIHByaWNlIGFuZCBvcHRpb25hbCBzdGFuZGFyZCBwcmljZVxyXG4gICAgICAgICAqIFRvIGZvcm1hdCB0aGUgcHJpY2UgZGlzcGxheSwgaXQgZ29lcyB0byBzZXJ2ZXIgdmlhIGFuIGFqYXggY2FsbC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBzYWxlIC0gc2FsZSBwcmljZVxyXG4gICAgICAgICAqIEBwYXJhbSBzdGFuZGFyZCAtIHN0YW5kYXJkIHByaWNlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgc2hvd1VwZGF0ZWRQcmljZTogZnVuY3Rpb24gKHNhbGUsIHN0YW5kYXJkKSB7XHJcbiAgICAgICAgICAgIHZhciBzdGFuZGFyZFByaWNlID0gTnVtYmVyKHN0YW5kYXJkIHx8IDApO1xyXG4gICAgICAgICAgICB2YXIgc2FsZVByaWNlID0gTnVtYmVyKHNhbGUgfHwgMCk7XHJcbiAgICAgICAgICAgIHZhciBwcmljZUh0bWwgPSAnJztcclxuICAgICAgICAgICAgdmFyIGZvcm1hdHRlZFByaWNlcyA9IHsnc2FsZVByaWNlJzogc2FsZVByaWNlLCAnc3RhbmRhcmRQcmljZSc6IHN0YW5kYXJkUHJpY2V9O1xyXG5cclxuICAgICAgICAgICAgLy8gc2VuZCBzZXJ2ZXIgcmVxdWVzdCB0byBmb3JtYXQgdGhlIG1vbmV5IGJhZWQgb24gc2l0ZSBzZXR0aW5ncyB1c2luZyBNb25leSBhcGlcclxuICAgICAgICAgICAgYWpheC5nZXRKc29uKHtcclxuICAgICAgICAgICAgICAgIHVybDogVXJscy5mb3JtYXRNb25leSxcclxuICAgICAgICAgICAgICAgIGNhY2hlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgYXN5bmM6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZGF0YTogeydzYWxlUHJpY2UnOiBzYWxlUHJpY2UsICdzdGFuZGFyZFByaWNlJzogc3RhbmRhcmRQcmljZX0sXHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWRQcmljZXMgPSBkYXRhO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIGluIGNhc2UgaXQgaXMgYSBwcm9tb3Rpb25hbCBwcmljZSB0aGVuIHdlIGRvIG5vdCBjYXJlIGlmIGl0IGlzIDBcclxuICAgICAgICAgICAgcHJpY2VIdG1sID0gKHNhbGVQcmljZSA+IDAgfHwgdGhpcy5pc1Byb21vUHJpY2UoKSkgPyAnPGRpdiBjbGFzcz1cInNhbGVzcHJpY2VcIj4nICsgZm9ybWF0dGVkUHJpY2VzLnNhbGVQcmljZSArICc8L2Rpdj4nIDogJyA8ZGl2IGNsYXNzPVwic2FsZXNwcmljZVwiPk4vQTwvZGl2Pic7XHJcblxyXG4gICAgICAgICAgICBpZiAoc3RhbmRhcmRQcmljZSA+IDAgJiYgc3RhbmRhcmRQcmljZSA+IHNhbGVQcmljZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gc2hvdyBib3RoIHByaWNlc1xyXG4gICAgICAgICAgICAgICAgcHJpY2VIdG1sID0gJzxkaXYgY2xhc3M9XCJzdGFuZGFyZHByaWNlXCI+JyArIGZvcm1hdHRlZFByaWNlcy5zdGFuZGFyZFByaWNlICsgJzwvZGl2PicgKyBwcmljZUh0bWw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHN0YW5kYXJkUHJpY2UgPT09IDAgJiYgc2FsZVByaWNlID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFZhci5lYXJseUJpcmRNZXNzYWdlICE9ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJpY2VIdG1sID0gJzxkaXYgY2xhc3M9XCJzYWxlc3ByaWNlXCI+JyArIHRoaXMuc2VsZWN0ZWRWYXIuZWFybHlCaXJkTWVzc2FnZSArICc8L2Rpdj4nO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBwcmljZUh0bWwgPSAnPGRpdiBjbGFzcz1cInNhbGVzcHJpY2VcIj48L2Rpdj4nO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgJHByaWNlID0galF1ZXJ5KHRoaXMuY29udGFpbmVySWQgKyAnIC5wcm9kdWN0aW5mbyAucHJpY2U6Zmlyc3QnKTtcclxuICAgICAgICAgICAgaWYgKCEkcHJpY2UuZGF0YSgnb3JpZ2luYWxQcmljZScpKSB7XHJcbiAgICAgICAgICAgICAgICAkcHJpY2UuZGF0YSgnb3JpZ2luYWxQcmljZScsICRwcmljZS5odG1sKCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICRwcmljZS5odG1sKHByaWNlSHRtbCk7XHJcbiAgICAgICAgICAgIC8vIGNvbnRhaW5lcklkIGNvbnRhaW5zICMsIGdldCByaWQgb2YgaXQgYmVmb3JlIGZpbmRpbmcgdGhlIHJpZ2h0IHByaWNlIGRpdlxyXG4gICAgICAgICAgICBqUXVlcnkodGhpcy5jb250YWluZXJJZCArICcgI3BkcEFUQ0RpdicgKyB0aGlzLmNvbnRhaW5lcklkLnN1YnN0cmluZygxKSArICcgLnByaWNlJykuaHRtbChwcmljZUh0bWwpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIHJldHVybnMgYSBjb21wdXRlZCBwcmljZSBmb3IgdGhpcyBwcm9kdWN0XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0UHJpY2U6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbXB1dGVQcmljZSh0aGlzKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZXRlcm1pbmVzIGlmIHRoZSBzZWxlY3RlZCBwcm9kdWN0IGhhcyBwcm9tb3Rpb25hbCBwcmljZS5cclxuICAgICAgICAgKiAgICAgICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiBib29sZWFuIHRydWUgaWYgcHJvbW90aW9uYWwgcHJpY2UgaXMgcHJlc2VudCBvdGhlcndpc2UgZmFsc2VcclxuICAgICAgICAgKi9cclxuICAgICAgICBpc1Byb21vUHJpY2U6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuICh0aGlzLnNlbGVjdGVkVmFyICE9IG51bGwgPyB0aGlzLnNlbGVjdGVkVmFyLnByaWNpbmcuaXNQcm9tb1ByaWNlIDogbW9kZWwucHJpY2luZy5pc1Byb21vUHJpY2UpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIHJlY2VpdmVzIDIgb3IgMSB2YXJpYXRpb24gYXR0cmlidXRlIHZhbHVlcyBhbmQgdHJpZXMgdG8gZmlndXJlIG91dCBpZiB0aGVyZSBpcyBhIHZhcmlhbnQgd2l0aCB0aGVzZSB2YWx1ZXMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gdmFsMSAtIHZhcmlhdGlvbiBhdHRyaWJ1dGUgdmFsdWVcclxuICAgICAgICAgKiBAcGFyYW0gdmFsMiAtIHZhcmlhdGlvbiBhdHRyaWJ1dGUgdmFsdWVcclxuICAgICAgICAgKiBAcmV0dXJuIGJvb2xlYW4gLSB0cnVlIGlmIGEgdmFyaWFudCBleGlzdHMgb3RoZXJ3aXNlIGZhbHNlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgaXNWYXJpYXRpb246IGZ1bmN0aW9uICh2YWwxLCB2YWwyKSB7XHJcbiAgICAgICAgICAgIHZhciB2YXJpYW50ID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbW9kZWwudmFyaWF0aW9ucy52YXJpYW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyaWFudCA9IG1vZGVsLnZhcmlhdGlvbnMudmFyaWFudHNbaV07XHJcbiAgICAgICAgICAgICAgICBpZiAodmFyaWFudC5hdHRyaWJ1dGVzW3ZhbDEuaWRdID09IHZhbDEudmFsICYmICh2YWwyID09IHVuZGVmaW5lZCB8fCB2YXJpYW50LmF0dHJpYnV0ZXNbdmFsMi5pZF0gPT0gdmFsMi52YWwpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIGFwcGFyZW50bHkgdGhlcmUgaXMgbm8gd2F5IHRvIGJyZWFrIG91dCBvZiBqUXVlcnkuZWFjaCBoYWxmIHdheSA6KFxyXG4gICAgICAgICAgICAgalF1ZXJ5LmVhY2gobW9kZWwudmFyaWF0aW9ucy52YXJpYW50cywgZnVuY3Rpb24oKXtcclxuXHRcdFx0XHRpZiAoIWZvdW5kICYmIHRoaXMuYXR0cmlidXRlc1t2YWwxLmlkXSA9PSB2YWwxLnZhbCAmJiB0aGlzLmF0dHJpYnV0ZXNbdmFsMi5pZF0gPT0gdmFsMi52YWwpIHtcclxuXHRcdFx0XHRcdGZvdW5kID0gdHJ1ZTtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pOyovXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBmaW5kIDAgb3IgbW9yZSB2YXJpYW50cyBtYXRjaGluZyB0aGUgZ2l2ZW4gYXR0cmlicyBvYmplY3QocykgYW5kIGluIHN0b2NrXHJcbiAgICAgICAgICogcmV0dXJuIG51bGwgb3IgZm91bmQgdmFyaWFudHNcclxuICAgICAgICAgKi9cclxuICAgICAgICBmaW5kVmFyaWF0aW9uczogZnVuY3Rpb24gKGF0dHIsIHZhcmlhbnRzKSB7XHJcbiAgICAgICAgICAgIHZhciBmb3VuZFZhcmlhbnRzID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgICAgIHZhcmlhbnRzID0gdmFyaWFudHMgfHwgbW9kZWwudmFyaWF0aW9ucy52YXJpYW50cztcclxuXHJcbiAgICAgICAgICAgIHZhciB2YXJpYW50ID0gbnVsbDtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YXJpYW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyaWFudCA9IHZhcmlhbnRzW2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKCh2YXJpYW50LmF0dHJpYnV0ZXNbYXR0ci5pZF0gPT09IGF0dHIudmFsKSAvKiYmXHJcblx0XHRcdFx0XHRcdC8vKHZhcmlhbnQuaW5TdG9jayB8fCAodmFyaWFudC5hdlN0YXR1cyA9PT0gYXBwLmNvbnN0YW50cy5BVkFJTF9TVEFUVVNfQkFDS09SREVSICYmIHZhcmlhbnQuQVRTID4gMCkgfHwgKHZhcmlhbnQuYXZTdGF0dXMgPT09IGFwcC5jb25zdGFudHMuQVZBSUxfU1RBVFVTX1BSRU9SREVSICYmIHZhcmlhbnQuQVRTID4gMCkpKi9cclxuICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvdW5kVmFyaWFudHMucHVzaCh2YXJpYW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZvdW5kVmFyaWFudHM7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogZmluZCBhIHZhcmlhbnQgd2l0aCB0aGUgZ2l2ZW4gYXR0cmlicyBvYmplY3RcclxuICAgICAgICAgKiByZXR1cm4gbnVsbCBvciBmb3VuZCB2YXJpYXRpb24ganNvblxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZpbmRWYXJpYXRpb246IGZ1bmN0aW9uIChhdHRycykge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuY2hlY2tBdHRycyhhdHRycykpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgYXR0clRvU3RyID0gZnVuY3Rpb24gKGF0dHJPYmopIHtcclxuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSAnJztcclxuICAgICAgICAgICAgICAgIGpRdWVyeS5lYWNoKG1vZGVsLnZhcmlhdGlvbnMuYXR0cmlidXRlcywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBhdHRyT2JqW3RoaXMuaWRdO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdmFyIGF0dHJzU3RyID0gYXR0clRvU3RyKGF0dHJzKTtcclxuICAgICAgICAgICAgdmFyIHZhcmlhbnQgPSBudWxsO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1vZGVsLnZhcmlhdGlvbnMudmFyaWFudHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhcmlhbnQgPSBtb2RlbC52YXJpYXRpb25zLnZhcmlhbnRzW2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKGF0dHJUb1N0cih2YXJpYW50LmF0dHJpYnV0ZXMpID09PSBhdHRyc1N0cikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YXJpYW50O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8vIGZpbmQgYSB2YXJpYXRpb24gd2l0aCB0aGUgZ2l2ZSBpZCBvdGhlcndpc2UgZW1wdHkgb2JqZWN0XHJcbiAgICAgICAgZmluZFZhcmlhdGlvbkJ5SWQ6IGZ1bmN0aW9uIChpZCkge1xyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtb2RlbC52YXJpYXRpb25zLnZhcmlhbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJRTcgZG9lcyBOT1Qgc3VwcG9ydCB0aGlzISEhXHJcbiAgICAgICAgICAgICAgICAvL2ZvciBlYWNoKHZhciB2YXJpYXRpb24gaW4gbW9kZWwudmFyaWF0aW9ucy52YXJpYW50cykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHZhcmlhdGlvbiA9IG1vZGVsLnZhcmlhdGlvbnMudmFyaWFudHNbaV07XHJcbiAgICAgICAgICAgICAgICBpZiAodmFyaWF0aW9uICYmIHZhcmlhdGlvbi5pZCA9PT0gaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFyaWF0aW9uO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ge307XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogc2VlIGlmIHRoZSBzcGVjaWZpZWQgYXR0cnMgb2JqZWN0IGhhcyBhbGwgdGhlIHZhcmlhdGlvbiBhdHRyaWJ1dGVzIHByZXNlbnQgaW4gaXRcclxuICAgICAgICAgKiByZXR1cm4gdHJ1ZS9mYWxzZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNoZWNrQXR0cnM6IGZ1bmN0aW9uIChhdHRycykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1vZGVsLnZhcmlhdGlvbnMuYXR0cmlidXRlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGF0dHJzW21vZGVsLnZhcmlhdGlvbnMuYXR0cmlidXRlc1tpXS5pZF0gPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvLyBnaXZlbiBhbiBpZCwgcmV0dXJuIGF0dHIgZGVmaW5pdGlvbiBmcm9tIG1vZGVsLnZhcmlhdGlvbnMuYXR0cmlidXRlc1xyXG4gICAgICAgIGdldEF0dHJCeUlEOiBmdW5jdGlvbiAoaWQpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtb2RlbC52YXJpYXRpb25zLmF0dHJpYnV0ZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChtb2RlbC52YXJpYXRpb25zLmF0dHJpYnV0ZXNbaV0uaWQgPT09IGlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1vZGVsLnZhcmlhdGlvbnMuYXR0cmlidXRlc1tpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4ge307XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgLy8gcmV0dXJucyBjdXJyZW50IGF2YWlsYWJpbGl0eSBzdGF0dXMgZS5nLiBpbl9zdG9jaywgcHJlb3JkZXIgZXRjLlxyXG4gICAgICAgIGdldEF2U3RhdHVzOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICgodGhpcy52YXJpYW50IHx8IHRoaXMubWFzdGVyKSAmJiB0aGlzLnNlbGVjdGVkVmFyICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkVmFyLmF2U3RhdHVzO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1vZGVsLmF2U3RhdHVzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgLy8gcmV0dXJuIGF2YWlsYWJsZSB0byBzZWxsIHF0eVxyXG4gICAgICAgIGdldEFUUzogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoKHRoaXMudmFyaWFudCB8fCB0aGlzLm1hc3RlcikgJiYgdGhpcy5zZWxlY3RlZFZhciAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZFZhci5BVFM7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbW9kZWwuQVRTO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgLy8gcmV0dXJuIG5vbi1jbG9zZW91dCBsb3cgcXR5IHRocmVzaG9sZFxyXG4gICAgICAgIGdldE5vbkNsb3Nlb3V0TG93UXR5VGhyZXNob2xkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICgodGhpcy52YXJpYW50IHx8IHRoaXMubWFzdGVyKSAmJiB0aGlzLnNlbGVjdGVkVmFyICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkVmFyLm5vbkNsb3Nlb3V0TG93UXR5VGhyZXNob2xkO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1vZGVsLm5vbkNsb3Nlb3V0TG93UXR5VGhyZXNob2xkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgLy8gcmV0dXJuIHRoZSBxdWFudGl0eSB0aGF0IHdhcyB1c2VkIHRvIGNhbGN1bGF0ZSBhdmFpbGFiaWxpdHlcclxuICAgICAgICBnZXRBdmFpbGFiaWxpdHlRdHk6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCh0aGlzLnZhcmlhbnQgfHwgdGhpcy5tYXN0ZXIpICYmIHRoaXMuc2VsZWN0ZWRWYXIgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0ZWRWYXIuYXZTdGF0dXNRdWFudGl0eTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBtb2RlbC5hdlN0YXR1c1F1YW50aXR5O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgLy8gcmV0dXJuIHRoZSBhdmFpbGFiaWxpdHkgbGV2ZWxzXHJcbiAgICAgICAgZ2V0QXZMZXZlbHM6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCh0aGlzLnZhcmlhbnQgfHwgdGhpcy5tYXN0ZXIpICYmIHRoaXMuc2VsZWN0ZWRWYXIgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0ZWRWYXIuYXZMZXZlbHM7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbW9kZWwuYXZMZXZlbHM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvLyByZXR1cm5zIGluIHN0b2NrIGRhdGVcclxuICAgICAgICBnZXRJblN0b2NrRGF0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoKHRoaXMudmFyaWFudCB8fCB0aGlzLm1hc3RlcikgJiYgdGhpcy5zZWxlY3RlZFZhciAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZFZhci5pblN0b2NrRGF0ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBtb2RlbC5pblN0b2NrRGF0ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8vIHNldCB0aGUgYWRkIHRvIGNhcnQgYnV0dG9uIGFuZCBiaW5kIGhhbmRsZXJzIGZvciBidW5kbGUvcHJvZHVjdCBzZXRcclxuICAgICAgICBnZXRTdWJQcm9kdWN0c0JpbmRpbmc6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHRoaXNQcm9kdWN0ID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgIC8vIEZvciBidW5kbGVzIGFuZCBwcm9kdWN0LXNldHMsIGVuYWJsZSBvciBkaXNhYmxlIHRoZSBhZGQtdG8tY2FydCBidXR0b24uXHJcbiAgICAgICAgICAgIC8vIFRoZSBidXR0b24gc2hvdWxkIGJlIGRpc2FibGVkIGlmIHRoZSBhZGQtdG8tY2FydCBidXR0b24gb2YgYW55IHN1YnByb2R1Y3QgaXMgZGlzYWJsZWQsIGVuYWJsZWQgb3RoZXJ3aXNlLlxyXG4gICAgICAgICAgICAvLyBGb3IgcHJvZHVjdC1zZXRzLCBkaXNwbGF5IGEgcHJpY2Ugd2hpY2ggaXMgdGhlIHN1bSBvZiB0aGUgc2V0LXByb2R1Y3RzIHByaWNlcyBhcyBsb25nIGFzIHRoZSBhZGQtdG8tY2FydCBidXR0b24gaXMgZW5hYmxlZC5cclxuICAgICAgICAgICAgaWYgKG1vZGVsLmJ1bmRsZSB8fCBtb2RlbC5wcm9kdWN0U2V0KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGJ1bmRsZUEyQ0VuYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHZhciBwcmljZSA9IG5ldyBOdW1iZXIoKTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpc1Byb2R1Y3Quc3ViUHJvZHVjdHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3ViUHJvZHVjdCA9IHRoaXNQcm9kdWN0LnN1YlByb2R1Y3RzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1bmRsZUEyQ0VuYWJsZWQgPSBzdWJQcm9kdWN0LmlzQTJDRW5hYmxlZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghYnVuZGxlQTJDRW5hYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbGxlY3QgcHJpY2UgaW5mb1xyXG4gICAgICAgICAgICAgICAgICAgIHByaWNlICs9IG5ldyBOdW1iZXIoc3ViUHJvZHVjdC5nZXRQcmljZSgpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBpZiBhbnkgb2YgdGhlIGJ1bmRsZWQgcHJvZHVjdCBoYXMgaXRzIEEyQyBidXR0b24gZGlzYWJsZWQgdGhlbiB0aGUgYnVuZGxlIGlzIG5vdCBvcmRlcmFibGVcclxuICAgICAgICAgICAgICAgIGlmICghYnVuZGxlQTJDRW5hYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzYWJsZUEyQ0J1dHRvbigpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuYWJsZUEyQ0J1dHRvbigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBzaG93IHRvdGFsIHByaWNlIGV4Y2VwdCBmb3IgYSBidW5kbGVcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIW1vZGVsLmJ1bmRsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzUHJvZHVjdC5zaG93VXBkYXRlZFByaWNlKHByaWNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGJpbmQgQWRkdG9DYXJ0RGlzYWJsZWQgZXZlbnQgZm9yIGVhY2ggc3VicHJvZHVjdCAoYnVuZGxlIG9yIHByb2R1Y3Qgc2V0KVxyXG4gICAgICAgICAgICBqUXVlcnkuZWFjaCh0aGlzUHJvZHVjdC5zdWJQcm9kdWN0cywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMpLmJpbmQoJ0FkZHRvQ2FydERpc2FibGVkJywge30sXHJcbiAgICAgICAgICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAgICAgICAgICogRXZlbnQgaGFuZGxlciB3aGVuIGEgc3VicHJvZHVjdCBvZiBhIHByb2R1Y3Qgc2V0IG9yIGEgYnVuZGxlIGlzIHNlbGVjdGVkLlxyXG4gICAgICAgICAgICAgICAgICAgICAqIGRpc2FibGUgdGhlIGFkZCB0byBjYXJ0IGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3QuZGlzYWJsZUEyQ0J1dHRvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIHNlZSBpZiBoYXZlIGFueSBzdWItcHJvZHVjdHMgYW5kIGJpbmQgQWRkdG9DYXJ0RW5hYmxlZCBldmVudFxyXG4gICAgICAgICAgICBqUXVlcnkuZWFjaCh0aGlzUHJvZHVjdC5zdWJQcm9kdWN0cywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMpLmJpbmQoJ0FkZHRvQ2FydEVuYWJsZWQnLCB7fSxcclxuICAgICAgICAgICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICAgICAgICAgKiBFdmVudCBoYW5kbGVyIHdoZW4gYSBzdWJwcm9kdWN0IG9mIGEgcHJvZHVjdCBzZXQgb3IgYSBidW5kbGUgaXMgc2VsZWN0ZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgICogQmFzaWNhbGx5IGVuYWJsZSB0aGUgYWRkIHRvIGNhcnQgYnV0dG9uIG9yIGRvIG90aGVyICByZWZyZXNoIGlmIG5lZWRlZCBsaWtlIHByaWNlIGV0Yy5cclxuICAgICAgICAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVuYWJsZSBBZGQgdG8gY2FydCBidXR0b24gaWYgYWxsIHRoZSBzdWIgcHJvZHVjdHMgaGF2ZSBiZWVuIHNlbGVjdGVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFuZCBzaG93IHRoZSB1cGRhdGVkIHByaWNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbmFibGVBZGRUb0NhcnQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3ViUHJvZHVjdHMgPSB0aGlzUHJvZHVjdC5zdWJQcm9kdWN0cztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByaWNlID0gbmV3IE51bWJlcigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdWJQcm9kdWN0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCgoc3ViUHJvZHVjdHNbaV0udmFyaWFudCB8fCBzdWJQcm9kdWN0c1tpXS5tYXN0ZXIpICYmIHN1YlByb2R1Y3RzW2ldLnNlbGVjdGVkVmFyID09IG51bGwpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCFzdWJQcm9kdWN0c1tpXS5idW5kbGVkICYmIChzdWJQcm9kdWN0c1tpXS5zZWxlY3RlZE9wdGlvbnMuUXVhbnRpdHkgPT0gdW5kZWZpbmVkIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YlByb2R1Y3RzW2ldLnNlbGVjdGVkT3B0aW9ucy5RdWFudGl0eSA8PSAwKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmFibGVBZGRUb0NhcnQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YlByb2R1Y3RzW2ldLnNlbGVjdGVkVmFyICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViUHJvZHVjdHNbaV0uc2VsZWN0ZWRPcHRpb25zLnBpZCA9IHN1YlByb2R1Y3RzW2ldLnNlbGVjdGVkVmFyLnBpZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJQcm9kdWN0c1tpXS5zZWxlY3RlZE9wdGlvbnMucGlkID0gc3ViUHJvZHVjdHNbaV0ucGlkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTXVsdGlwbHkgdGhlIHN1YnByb2R1Y3QgcXVhbnRpdHktb25lIHByaWNlIGJ5IHRoZSBlbnRlcmVkIHF1YW50aXR5LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEltcG9ydGFudCBub3RlOiAgVGhpcyB2YWx1ZSB3aWxsIGJlIGluY29ycmVjdCBpZiBzdWJwcm9kdWN0IHVzZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aWVyZWQgcHJpY2luZyAhISEhIVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdWJwcm9kdWN0UXVhbnRpdHkgPSBzdWJQcm9kdWN0c1tpXS5zZWxlY3RlZE9wdGlvbnMuUXVhbnRpdHk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnByb2R1Y3RRdWFudGl0eSA9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VicHJvZHVjdFF1YW50aXR5ID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpY2UgKz0gbmV3IE51bWJlcihzdWJwcm9kdWN0UXVhbnRpdHkgKiBzdWJQcm9kdWN0c1tpXS5nZXRQcmljZSgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVuYWJsZUFkZFRvQ2FydCAmJiAobW9kZWwucHJvZHVjdFNldCB8fCBtb2RlbC5pblN0b2NrKSAmJiAocHJpY2UgPiAwIHx8IHRoaXNQcm9kdWN0LmlzUHJvbW9QcmljZSgpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3QuZW5hYmxlQTJDQnV0dG9uKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2hvdyB0b3RhbCBwcmljZSBleGNlcHQgZm9yIGEgYnVuZGxlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1vZGVsLmJ1bmRsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LnNob3dVcGRhdGVkUHJpY2UocHJpY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3QuZGlzYWJsZUEyQ0J1dHRvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgLy8gZGV0ZXJtaW5lIGlmIEEyQyBidXR0b24gaXMgZW5hYmxlZCBvciBkaXNhYmxlZFxyXG4gICAgICAgIC8vIHRydWUgaWYgZW5hYmxlZCwgZmFsc2Ugb3RoZXJ3aXNlXHJcbiAgICAgICAgaXNBMkNFbmFibGVkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnZhcmlhbnQgfHwgdGhpcy5tYXN0ZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkVmFyICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHRoaXMuc2VsZWN0ZWRWYXIuYXZTdGF0dXMgPT09IENvbnN0YW50cy5BVkFJTF9TVEFUVVNfSU5fU1RPQ0sgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFZhci5hdlN0YXR1cyA9PT0gQ29uc3RhbnRzLkFWQUlMX1NUQVRVU19CQUNLT1JERVIgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFZhci5hdlN0YXR1cyA9PT0gQ29uc3RhbnRzLkFWQUlMX1NUQVRVU19QUkVPUkRFUik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAobW9kZWwuYXZTdGF0dXMgPT09IENvbnN0YW50cy5BVkFJTF9TVEFUVVNfSU5fU1RPQ0sgfHxcclxuICAgICAgICAgICAgICAgICAgICBtb2RlbC5hdlN0YXR1cyA9PT0gQ29uc3RhbnRzLkFWQUlMX1NUQVRVU19CQUNLT1JERVIgfHxcclxuICAgICAgICAgICAgICAgICAgICBtb2RlbC5hdlN0YXR1cyA9PT0gQ29uc3RhbnRzLkFWQUlMX1NUQVRVU19QUkVPUkRFUik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiB3b3JrIGhvcnNlIG9mIHRoZSBwcm9kdWN0IGRldGFpbCBwYWdlIGdldHRpbmcgZXZlcnl0aGluZyB0aWVkIHRvZ2V0aGVyIGkuZS4gYWxsIHRoZSBkeW5hbWljIHN0dWZmXHJcbiAgICAgICAgICogYW5kIG9uZSB0aW1lIGluaXRpYWxpemF0aW9uLiBjYWxsZWQgb25seSBPTkNFXHJcbiAgICAgICAgICogYmluZCBhbGwgdGhlIHByb2R1Y3QgZGlzcGxheSBldmVudHMgYW5kIGhhbmRsZXJzXHJcbiAgICAgICAgICogbG9hZCB2YXJpYW50cyBpbiBjYXNlIHRoaXMgaXMgYSB2YXJpYXRpb24gcHJvZHVjdFxyXG4gICAgICAgICAqIGJpbmQgc3VicHJvZHVjdHMgYTJjIGJ1dHRvbiBlbmFibGUgZXZlbnQgaGFuZGxlclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMuY290YWluZXJJZCAtIGlkIG9mIHRoZSBjb250YWluaW5nIGRpdlxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zLnNvdXJjZSAtIHNvdXJjZSBvZiB0aGlzIHByb2R1Y3Qgc2hvdyByZXF1ZXN0LCBtYWlubHkgcXVpY2t2aWV3XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgc2hvdzogZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgLy8gcHJlc2VydmUgdGhpcyBpbnN0YW5jZVxyXG4gICAgICAgICAgICB2YXIgdGhpc1Byb2R1Y3QgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgLy8gYmluZCBWYXJpYXRpb25zTG9hZGVkIHdoaWNoIGdldHMgZmlyZWQgd2hlbiB0aGUgdmFyaWF0aW9uIGRhdGEgaXMgcmVjZWl2ZWQgZnJvbSB0aGUgc2VydmVyXHJcbiAgICAgICAgICAgIC8vIGFuZCB3ZSBuZWVkIHRvIHJlZnJlc2ggdGhlIHVpXHJcbiAgICAgICAgICAgIGpRdWVyeSh0aGlzKS5iaW5kKCdWYXJpYXRpb25zTG9hZGVkJywge30sIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIC8vIGVuYWJsZS9kaXNhYmxlIHVuYXZhaWxhYmxlIHZhbHVlc1xyXG4gICAgICAgICAgICAgICAgLy8gYW5kIHNldCB0aGUgY3VycmVudGx5IHNlbGVjdGVkIHZhbHVlc1xyXG4gICAgICAgICAgICAgICAgLy8gcmVzZXQgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCB2YXJpYXRpb24gYXR0cmlidXRlcyBpLmUuIHJlc2V0IHRoZSB1aVxyXG4gICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3QucmVzZXRWYXJpYXRpb25zKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gY3JlYXRlIHRoZSBkZWZhdWx0IGF2YWlsYWJpbGl0eSBtZXNzYWdlIGJhc2VkIG9uIEFUUyBjb3VudFxyXG4gICAgICAgICAgICAgICAgLy8gZnJvbSB0aGUgdmFyaWFudHNcclxuICAgICAgICAgICAgICAgIHZhciBhdHNDb3VudCA9IGdldEFUUyhtb2RlbC52YXJpYXRpb25zLnZhcmlhbnRzKTtcclxuICAgICAgICAgICAgICAgIGlmIChhdHNDb3VudCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0QXZhaWxhYmlsaXR5TXNnKCc8c3BhbiBjbGFzcz1cXCdvdXQtb2Ytc3RvY2tcXCc+JyArIFJlc291cmNlc1tDb25zdGFudHMuQVZBSUxfU1RBVFVTX05PVF9BVkFJTEFCTEVdICsgJzwvc3Bhbj4nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIFdlIHdpbGwgdXNlIHRoaXMgaW4gdGhlIDJuZCBvZiB0aGUgdHdvIGZvbGxvd2luZyBsb29wc1xyXG4gICAgICAgICAgICAgICAgdmFyIHNvbWVBcmVOb3RTZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIHRoZSBzZWxlY3RlZCBzdGF0ZSBvZiBlYWNoIG9wdGlvblxyXG4gICAgICAgICAgICAgICAgdmFyICRhdHRyaWJ1dGVzID0galF1ZXJ5KHRoaXNQcm9kdWN0LmNvbnRhaW5lcklkICsgJyAudmFyaWF0aW9uYXR0cmlidXRlcyAuc3dhdGNoZXMsJyArIHRoaXNQcm9kdWN0LmNvbnRhaW5lcklkICsgJyAudmFyaWF0aW9uYXR0cmlidXRlcyAudmFyaWFudGRyb3Bkb3duJyk7XHJcbiAgICAgICAgICAgICAgICAkYXR0cmlidXRlcy5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSBqUXVlcnkodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCR0aGlzLmhhc0NsYXNzKCdzd2F0Y2hlcycpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vaWYgaXQgaXMgc3dhdGNoZXMsIGZpbmQgdGhlIHNlbGVjdGVkIHN3YXRjaFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHRoaXMuZmluZCgnLnNlbGVjdGVkJykuc2l6ZSgpID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RCb3ggPSAkdGhpcy5maW5kKCdzZWxlY3QnKS5nZXQoMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKHNlbGVjdEJveCkuZmluZCgnb3B0aW9uJykubGVuZ3RoID09IDIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoc2VsZWN0Qm94KS5maW5kKCdvcHRpb24nKS5lcSgxKS5wcm9wKCdzZWxlY3RlZCcsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RCb3guc2VsZWN0ZWRJbmRleCA+PSAwICYmIHNlbGVjdEJveC5vcHRpb25zW3NlbGVjdEJveC5zZWxlY3RlZEluZGV4XS52YWx1ZSAhPSAnJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9KS5lYWNoKGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciAkdGhpcyA9IGpRdWVyeSh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc29tZUFyZU5vdFNlbGVjdGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpLmFkZENsYXNzKCdmdXR1cmUnKS5maW5kKCcuc2VsZWN0ZWQnKS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMuZmluZCgnLm9wdGlvbndyYXBwZXInKS5zbGlkZVVwKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghJHRoaXMuaGFzQ2xhc3MoJ3NlbGVjdGVkJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzb21lQXJlTm90U2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLmFkZENsYXNzKCdjdXJyZW50Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb21lQXJlTm90U2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgaXQncyBub3QgdGhlIGxhc3QgaXRlbSwgaGlkZSB0aGUgc2VsZWN0aW9ucyBhbmQgbGVhdmUgdGhlIGJ1dHRvbiBlbmFibGVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkYXR0cmlidXRlcy5zaXplKCkgLSAxICE9IGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy5maW5kKCcub3B0aW9ud3JhcHBlcicpLnNsaWRlVXAoKS5maW5kKCdidXR0b24nKS5yZW1vdmVDbGFzcygnbm9uLXNlbGVjdGFibGUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vaXQgaXMgdGhlIGxhc3QgaXRlbSwgYW5kIGl0J3Mgc2VsZWN0ZWQsIHNvIGl0J3MgY3VycmVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJykuYWRkQ2xhc3MoJ2N1cnJlbnQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIEdyYWIgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCB2YWx1ZXMgYW5kIHVwZGF0ZSB0aGUgVUlcclxuICAgICAgICAgICAgICAgIC8vIHN3YXRjaCB2YXJpYXRpb24gYXR0cmlidXRlc1xyXG4gICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXNQcm9kdWN0LmNvbnRhaW5lcklkICsgJyAudmFyaWF0aW9uYXR0cmlidXRlcyAuc3dhdGNoZXMsICcgKyB0aGlzUHJvZHVjdC5jb250YWluZXJJZCArICcgLnZhcmlhdGlvbmF0dHJpYnV0ZXMgLnZhcmlhbnRkcm9wZG93biBzZWxlY3QnKS5lYWNoKGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgJHN3YXRjaCA9IGpRdWVyeSh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN3YXRjaElkID0gJHN3YXRjaC5kYXRhKCdkYXRhJyk7ICAvLyBkYXRhIGlzIGlkIHNldCB2aWEgYXBwLmhpZGRlbkRhdGEgYXBpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobW9kZWwudmFyaWF0aW9ucy52YXJpYW50cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnNlbGVjdGVkSW5kZXggPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHN3YXRjaC5maW5kKCdhLnN3YXRjaGFuY2hvcicpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSBqUXVlcnkodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdmFyIHBhcmVudExpID0gJHRoaXMucGFyZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZpbmQgQSB2YXJpYXRpb24gd2l0aCB0aGlzIHZhbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmlsdGVyZWRWYXJpYW50cyA9IHRoaXNQcm9kdWN0LmZpbmRWYXJpYXRpb25zKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBzd2F0Y2hJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbDogdGhpcy50aXRsZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBtb2RlbC52YXJpYXRpb25zLnZhcmlhbnRzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc3dhdGNoLmhhc0NsYXNzKCdjb2xvcicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWdldEF2YWlsYWJpbGl0eShmaWx0ZXJlZFZhcmlhbnRzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkdGhpcy5maW5kKCcub3V0LW9mLXN0b2NrJykuc2l6ZSgpID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLnByZXBlbmQoJzxzcGFuIGNsYXNzPVxcJ291dC1vZi1zdG9ja1xcJz48L3NwYW4+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy5maW5kKCcub3V0LW9mLXN0b2NrJykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWdldEF2YWlsYWJpbGl0eShmaWx0ZXJlZFZhcmlhbnRzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkdGhpcy5maW5kKCdzcGFuJykudGV4dCgpLmluZGV4T2YoJ091dCBvZiBTdG9jaycpID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHRoaXMuZmluZCgnc3BhbicpLnRleHQoKS5pbmRleE9mKCdOZXcnKSAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoJ3NwYW4nKS5hZGRDbGFzcygnb3V0b2ZzdG9ja3BkcCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMuZmluZCgnc3BhbicpLnRleHQoJHRoaXMuZmluZCgnc3BhbicpLnRleHQoKSArICcgLyBPdXQgb2YgU3RvY2snKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoJ3NwYW4nKS5hZGRDbGFzcygnb3V0b2ZzdG9ja3BkcCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMuZmluZCgnc3BhbicpLnRleHQoJ091dCBvZiBTdG9jaycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHRoaXMuZmluZCgnc3BhbicpLnRleHQoKS5pbmRleE9mKCdOZXcnKSAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMuZmluZCgnc3BhbicpLnRleHQoJHRoaXMuZmluZCgnc3BhbicpLnRleHQoKS5yZXBsYWNlKCcgLyBPdXQgb2YgU3RvY2snLCAnJykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy5maW5kKCdzcGFuJykudGV4dCgkdGhpcy5maW5kKCdzcGFuJykudGV4dCgpLnJlcGxhY2UoJ091dCBvZiBTdG9jaycsICcnKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc3dhdGNoLmZpbmQoJ29wdGlvbicpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy52YWx1ZSAhPT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaWx0ZXJlZFZhcmlhbnRzID0gdGhpc1Byb2R1Y3QuZmluZFZhcmlhdGlvbnMoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBzd2F0Y2hJZC5pZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWw6IHRoaXMudmFsdWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIG1vZGVsLnZhcmlhdGlvbnMudmFyaWFudHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFnZXRBdmFpbGFiaWxpdHkoZmlsdGVyZWRWYXJpYW50cykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRleHQgPSB0aGlzLnRleHQgKyAnIC0gT3V0IG9mIFN0b2NrJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuc2VsZWN0ZWRJbmRleCA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRoaXNTd2F0Y2ggPSBqUXVlcnkodGhpcyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZHBWYXJJZCA9IHRoaXNTd2F0Y2guZGF0YSgnZGF0YScpOyAvLyBkYXRhIGlzIGlkIHdoaWNoIGlzIHNldCB2aWEgYXBwLmhpZGRlbkRhdGEgb25sb2FkXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBncmFiIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgdmFyaWF0aW9uIGF0dHJpYnV0ZSB2YWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1N3YXRjaC5maW5kKCcuc2VsZWN0ZWQgYScpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3QudmFyQXR0clNlbGVjdGVkKHtkYXRhOiB7aWQ6IHBkcFZhcklkLCB2YWw6IHRoaXMudGl0bGV9fSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vbi1zd2F0Y2ggdmFyaWF0aW9uIGF0dHJpYnV0ZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRJbmRleCA+PSAwICYmIHRoaXMub3B0aW9uc1t0aGlzLnNlbGVjdGVkSW5kZXhdLnZhbHVlICE9ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBncmFiIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgdmFsIGJ5IGZpcmluZyB1cGRhdGUgdWkgYXBpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3aGVuIGRlYWxpbmcgd2l0aCBhIHNlbGVjdCBlbGVtZW50LCBkYXRhIHJldHVybnMgYW4gb2JqZWN0IHNvIHdlIG11c3QgYXNrIGZvciBpZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3QudmFyQXR0clNlbGVjdGVkKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBqUXVlcnkodGhpcykuZGF0YSgnZGF0YScpLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWw6IHRoaXMub3B0aW9uc1t0aGlzLnNlbGVjdGVkSW5kZXhdLnZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgICAgIC8vIGxvb3AgdGhydSBhbGwgbm9uLWRyb3Bkb3duIHVpIGVsZW1lbnRzIGkuZS4gc3dhdGNoZXMgZS5nLiBjb2xvciwgd2lkdGgsIGxlbmd0aCBldGMuXHJcbiAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMuY29udGFpbmVySWQgKyBcIiAudmFyaWF0aW9uYXR0cmlidXRlcyAuc3dhdGNoZXNcIikuZWFjaChmdW5jdGlvbigpe1xyXG5cclxuXHRcdFx0XHR9KTsqL1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVySWQgPSAnIycgKyBvcHRpb25zLmNvbnRhaW5lcklkO1xyXG4gICAgICAgICAgICB2YXIgaXNRdWlja1ZpZXcgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnNvdXJjZSAmJiBvcHRpb25zLnNvdXJjZSA9PSAncXVpY2t2aWV3Jykge1xyXG4gICAgICAgICAgICAgICAgaXNRdWlja1ZpZXcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXJJZCA9ICcudWktZGlhbG9nICMnICsgb3B0aW9ucy5jb250YWluZXJJZDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbXlDb250YWluZXJJZCA9IHRoaXMuY29udGFpbmVySWQ7XHJcblxyXG4gICAgICAgICAgICAvLyBiaW5kIGNsaWNrIGhhbmRsZXJzIGZvciBwcmV2L25leHQgbGlua3NcclxuICAgICAgICAgICAgZ2V0TmF2TGlua3MoKTtcclxuXHJcbiAgICAgICAgICAgIC8vIHNpemUgY2hhcnQgY2xpY2sgYmluZGluZ1xyXG4gICAgICAgICAgICBnZXRTaXplQ2hhcnQoKTtcclxuXHJcbiAgICAgICAgICAgIC8vIHZhcmlhdGlvbiBhdHRyaWJ1dGVzIGhhbmRsaW5nIGluIGNhc2UgaXQgaXMgYSBtYXN0ZXIgb3IgYSB2YXJpYW50IHByb2R1Y3RcclxuICAgICAgICAgICAgaWYgKG1vZGVsLm1hc3RlciB8fCBtb2RlbC52YXJpYW50KSB7XHJcbiAgICAgICAgICAgICAgICBsb2FkVmFyaWFudHModGhpcyk7IC8vIG1ha2UgYSBzZXJ2ZXIgY2FsbCB0byBsb2FkIHRoZSB2YXJpYW50cywgdGhpcyBpcyBkdWUgdG8gdGhlIHBlcmZvcm1hbmNlIHJlYXNvbnNcclxuICAgICAgICAgICAgICAgIC8vIG1lYW53aGlsZSBkaXNwbGF5IHRoZSBhdmFpbGFibGUgdmFyaWF0aW9uIGF0dHJpYnV0ZXNcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBiaW5kIHRoZSBcIm5leHRcIiBidXR0b25zIGluIHRoZSBwaWNrZXJcclxuICAgICAgICAgICAgICAgIGpRdWVyeSgnYnV0dG9uLm5leHQnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLyoqdmFyICR0aGlzID0galF1ZXJ5KHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICBpZighJHRoaXMuaGFzQ2xhc3MoXCJub24tc2VsZWN0YWJsZVwiKSkge1xyXG5cdFx0XHRcdFx0JHRoaXMuY2xvc2VzdChcIi5zd2F0Y2hlcywgLnZhcmlhbnRkcm9wZG93blwiKS5maW5kKFwiLm9wdGlvbndyYXBwZXJcIikuc2xpZGVVcCg0MDAsZnVuY3Rpb24oKXtcclxuXHRcdFx0XHRcdFx0alF1ZXJ5KHRoaXMpLmNsb3Nlc3QoXCIuc3dhdGNoZXMsIC52YXJpYW50ZHJvcGRvd25cIilcclxuXHRcdFx0XHRcdFx0XHQucmVtb3ZlQ2xhc3MoXCJjdXJyZW50XCIpLmFkZENsYXNzKFwic2VsZWN0ZWRcIilcclxuXHRcdFx0XHRcdFx0XHQubmV4dFVudGlsKFwiLnN3YXRjaGVzLCAudmFyaWFudGRyb3Bkb3duXCIpLm5leHQoKVxyXG5cdFx0XHRcdFx0XHRcdFx0LmFkZENsYXNzKFwiY3VycmVudFwiKS5yZW1vdmVDbGFzcyhcImZ1dHVyZVwiKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHQuZmluZChcIi5vcHRpb253cmFwcGVyXCIpLnNsaWRlRG93bigpLmZpbmQoJ3NlbGVjdCcpLmNoYW5nZSgpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9Ki9cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vYmluZCB0aGUgXCJwcmV2aW91c1wiIGJ1dHRvbnMgaW4gdGhlIHBpY2tlclxyXG4gICAgICAgICAgICAgICAgalF1ZXJ5KCdhLnByZXZpb3VzJykuY2xpY2soZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jbG9zZXN0KCcuc3dhdGNoZXMsIC52YXJpYW50ZHJvcGRvd24nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAucHJldlVudGlsKCcuc3dhdGNoZXMsIC52YXJpYW50ZHJvcGRvd24nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAucHJldigpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKCdhLmZpbHRlcicpLmNsaWNrKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICQoJy5NYWdpY1pvb20gaW1nLnByaW1hcnktaW1hZ2UnKS5iaW5kKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcubmV3LXN3aW0sLm9sZC1zd2ltJykuYWRkQ2xhc3MoJ3N3aW1IaWRlJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3ZhciB6b29tZWRDb250ZW50ID0gJCgnLm16LWV4cGFuZC1zdGFnZScpLmh0bWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLm16LWJ1dHRvbi1jbG9zZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5uZXctc3dpbSwub2xkLXN3aW0nKS5yZW1vdmVDbGFzcygnc3dpbUhpZGUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgNTAwKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgLy8gY2xpY2tpbmcgb24gYSBwcmV2aW91cyBzdGVwXHJcbiAgICAgICAgICAgICAgICBqUXVlcnkoJy52YXJpYXRpb25hdHRyaWJ1dGVzJykuZGVsZWdhdGUoJy5zZWxlY3RlZCBhLmZpbHRlcicsICdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciAkdGhpcyA9IGpRdWVyeSh0aGlzKS5jbG9zZXN0KCcuc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICBqUXVlcnkoJy52YXJpYXRpb25hdHRyaWJ1dGVzIC5zd2F0Y2hlcywudmFyaWF0aW9uYXR0cmlidXRlcyAudmFyaWFudGRyb3Bkb3duJykucmVtb3ZlQ2xhc3MoJ2N1cnJlbnQnKTtcclxuICAgICAgICAgICAgICAgICAgICAkdGhpcy5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKS5hZGRDbGFzcygnY3VycmVudCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICR0aGlzLm5leHRBbGwoJy5zd2F0Y2hlcywgLnZhcmlhbnRkcm9wZG93bicpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgJHZhcmlhbnQgPSBqUXVlcnkodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICR2YXJpYW50LmFkZENsYXNzKCdmdXR1cmUnKS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCR2YXJpYW50Lmhhc0NsYXNzKCdzd2F0Y2hlcycpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdmFyaWFudC5maW5kKCcuc2VsZWN0ZWQgYScpLmNsaWNrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJHZhcmlhbnQuaGFzQ2xhc3MoJ3ZhcmlhbnRkcm9wZG93bicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgJHNlbGVjdCA9ICR2YXJpYW50LmZpbmQoJ3NlbGVjdCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzZWxlY3QuZmluZCgnb3B0aW9uJykuc2l6ZSgpID4gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzZWxlY3QudmFsKCcnKS5jaGFuZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50KCkuZmluZCgnLnN3YXRjaGVzZGlzcGxheSAuc2VsZWN0ZWQgYScpLmNsaWNrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5maW5kKCdzZWxlY3QnKS52YWwoJycpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBqUXVlcnkoJy52YXJpYXRpb25hdHRyaWJ1dGVzJykuZmluZCgnLmZ1dHVyZSAub3B0aW9ud3JhcHBlcicpLnNsaWRlVXAoNDAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSgnLmN1cnJlbnQgLm9wdGlvbndyYXBwZXInKS5zbGlkZURvd24oNDAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5maWx0ZXIgLnZhbHVlJykudGV4dCgnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeSgnLnZhcmlhdGlvbmF0dHJpYnV0ZXMnKS5maW5kKCcuY3VycmVudCAub3B0aW9ud3JhcHBlcicpLnNsaWRlRG93big0MDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuY3VycmVudCcpLmZpbmQoJy5maWx0ZXIgLnZhbHVlJykudGV4dCgnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBiaW5kIHRoZSBcImxlYXJuIG1vcmVcIiBsaW5rc1xyXG4gICAgICAgICAgICAgICAgalF1ZXJ5KCdzcGFuLmxlYXJubW9yZSBhJykuY2xpY2soZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYWRkIGxlYXJuIG1vcmUgZGlhbG9nIGNvbnRhaW5lciBkaXYgaWYgaXRzIG5vdCBhZGRlZCB5ZXRcclxuICAgICAgICAgICAgICAgICAgICAvLyBvbmx5IGFkZGVkIG9uY2VcclxuICAgICAgICAgICAgICAgICAgICBpZiAoalF1ZXJ5KCcjbGVhcm5Nb3JlRGlhbG9nJykubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KCc8ZGl2PjwvZGl2PicpLmF0dHIoJ2lkJywgJ2xlYXJuTW9yZURpYWxvZycpLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxlYXJuTW9yZURpYWxvZyA9IGRpYWxvZy5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogJ2xlYXJuTW9yZURpYWxvZycsIG9wdGlvbnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogNTMwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDgwMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBSZXNvdXJjZXMuU0laRUNIQVJUX1RJVExFXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbGVhcm5Nb3JlRGlhbG9nLmRpYWxvZygnb3BlbicpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBtYWtlIHRoZSBzZXJ2ZXIgY2FsbCB0byBsb2FkIHRoZSBsZWFybiBtb3JlIGh0bWxcclxuICAgICAgICAgICAgICAgICAgICBqUXVlcnkoJyNsZWFybk1vcmVEaWFsb2cnKS5sb2FkKHRoaXMuaHJlZik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBsb29wIHRocnUgYWxsIHRoZSBzd2F0Y2hlcyBhbmQgYmluZCBldmVudHMgZXRjLlxyXG4gICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXNQcm9kdWN0LmNvbnRhaW5lcklkICsgJyAudmFyaWF0aW9uYXR0cmlidXRlcyAuc3dhdGNoZXMnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGhpc1N3YXRjaCA9IGpRdWVyeSh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGRwVmFySWQgPSB0aGlzU3dhdGNoLmRhdGEoJ2RhdGEnKTsgLy8gZGF0YSBpcyBpZCB3aGljaCBpcyBzZXQgdmlhIGFwcC5oaWRkZW5EYXRhIG9ubG9hZFxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhdHRyRGVmID0gdGhpc1Byb2R1Y3QuZ2V0QXR0ckJ5SUQocGRwVmFySWQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWF0dHJEZWYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY2xpY2sgaGFuZGxlciBmb3Igc3dhdGNoZXMgbGlua3NcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdmFyRXZlbnRIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRoaXNPYmogPSBqUXVlcnkodGhpcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlLmRhdGEgPSB7aWQ6IHBkcFZhcklkLCB2YWw6IHRoaXMudGl0bGV9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXNPYmoucGFyZW50KCkuaGFzQ2xhc3MoJ3Vuc2VsZWN0YWJsZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpc09iai5wYXJlbnQoKS5oYXNDbGFzcygnc2VsZWN0ZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVzZWxlY3Rpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuZGF0YSA9IHtpZDogcGRwVmFySWQsIHZhbDogbnVsbH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzT2JqLnBhcmVudCgpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2xlYXIgdGhlIGN1cnJlbnQgc2VsZWN0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzUHJvZHVjdC52YXJBdHRyU2VsZWN0ZWQoZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3QucmVzZXRWYXJpYXRpb25zKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZWxlY3Rpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuZGF0YSA9IHtpZDogcGRwVmFySWQsIHZhbDogdGhpcy50aXRsZX07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgdGhlIGN1cnJlbnQgc2VsZWN0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzU3dhdGNoLmZpbmQoJy5zZWxlY3RlZCcpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXNPYmouY2xvc2VzdCgnLnN3YXRjaGVzJykubmV4dFVudGlsKCcuc3dhdGNoZXMsIC52YXJpYW50ZHJvcGRvd24nKS5uZXh0KCkuc2l6ZSgpID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNPYmoucGFyZW50KCkuYWRkQ2xhc3MoJ3NlbGVjdGVkJykuY2xvc2VzdCgnLnN3YXRjaGVzJykuZmluZCgnYnV0dG9uJykucmVtb3ZlQ2xhc3MoJ25vbi1zZWxlY3RhYmxlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyICR0aGlzID0galF1ZXJ5KHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghJHRoaXMuaGFzQ2xhc3MoJ25vbi1zZWxlY3RhYmxlJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMuY2xvc2VzdCgnLnN3YXRjaGVzJykuZmluZCgnLm9wdGlvbndyYXBwZXInKS5zbGlkZVVwKDQwMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMpLmNsb3Nlc3QoJy5zd2F0Y2hlcycpLnJlbW92ZUNsYXNzKCdjdXJyZW50JykuYWRkQ2xhc3MoJ3NlbGVjdGVkJykubmV4dFVudGlsKCcuc3dhdGNoZXMnKS5uZXh0KCkubm90KCcuY2xlYXInKS5maXJzdCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKCdjdXJyZW50JykucmVtb3ZlQ2xhc3MoJ2Z1dHVyZScpLmZpbmQoJy5vcHRpb253cmFwcGVyJykuc2xpZGVEb3duKDQwMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcykuZmluZCgnc2VsZWN0IG9wdGlvbicpLmVhY2goZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5jbG9zZXN0KCdzZWxlY3QnKS5maW5kKCdvcHRpb24nKS5sZW5ndGggPT0gMiAmJiBpbmRleCA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5wcm9wKCdzZWxlY3RlZCcsIHRydWUpLnRyaWdnZXIoJ2NoYW5nZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vJCh0aGlzKS5hdHRyKCdzZWxlY3RlZCcsJ3NlbGVjdGVkJykudHJpZ2dlcignY2hhbmdlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmZpbmQoJ3NlbGVjdCcpLmNoYW5nZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNPYmoucGFyZW50KCkuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzUHJvZHVjdC52YXJBdHRyU2VsZWN0ZWQoZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBhbGwgc3d0YWNoIGFuY2hvcnNcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdmFySnFyeU9ianMgPSB0aGlzU3dhdGNoLmZpbmQoJ2Euc3dhdGNoYW5jaG9yJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIGl0cyBhIGNvbG9yIGF0dHIgdGhlbiByZW5kZXIgaXRzIHN3YXRjaGVzIGFuZCBpbWFnZXNcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGRwVmFySWQgPT09ICdjb2xvcicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbG9yQXR0ckRlZiA9IHRoaXNQcm9kdWN0LmdldEF0dHJCeUlEKCdjb2xvcicpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFySnFyeU9ianMuZWFjaChmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ2l2ZW4gYSB2YXJpYXRpb24gYXR0ciB2YWx1ZSwgZmluZCBpdHMgc3dhdGNoIGltYWdlIHVybFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpbmRTd2F0Y2ggPSBmdW5jdGlvbiAodmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb2xvckF0dHJEZWYudmFscy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29sb3JBdHRyRGVmLnZhbHNbaV0udmFsID09PSB2YWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb2xvckF0dHJEZWYudmFsc1tpXS5pbWFnZXMuc3dhdGNoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnJzsgLy8gbm8gc3dhdGNoIGltYWdlIGZvdW5kXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzd2F0Y2hVcmwgPSAoZmluZFN3YXRjaCh0aGlzLnRpdGxlKSkudXJsOyAvLyBmaW5kIHN3YXRjaCB1cmxcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3dhdGNoVXJsICYmIHN3YXRjaFVybCAhPSAnJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8valF1ZXJ5KHRoaXMpLmNzcyhcImNvbG9yXCIsIFwidHJhbnNwYXJlbnRcIikucGFyZW50KCkuY3NzKFwiYmFja2dyb3VuZFwiLCBcInVybChcIiArIHN3YXRjaFVybCArIFwiKVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcykuY3NzKCd0ZXh0LWluZGVudCcsICctOTk5OXB4JykucHJlcGVuZCgnPGltZyBhbHQ9XCInICsgdGhpcy50aXRsZSArICdcIiBzcmM9XCInICsgc3dhdGNoVXJsICsgJ1wiLz4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMpLmNzcygnY29sb3InLCAndHJhbnNwYXJlbnQnKTsgLy8gbm8gc3dhdGNoIGltYWdlIGZvdW5kXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3dhdGNoZXMgY2xpY2ssIGhvdmVyIGFuZCBtb3VzZWxlYXZlIGV2ZW50IGhhbmRsZXJzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhckpxcnlPYmpzLmRhdGEoJ2RhdGEnLCB7aWQ6IHBkcFZhcklkfSkuY2xpY2sodmFyRXZlbnRIYW5kbGVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpID4gMTAyNCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFySnFyeU9ianMuZGF0YSgnZGF0YScsIHtpZDogcGRwVmFySWR9KS5tb3VzZWVudGVyKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzUHJvZHVjdC5zaG93U2VsZWN0ZWRWYXJBdHRyVmFsKCdjb2xvcicsIHRoaXMudGl0bGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LnNob3dJbWFnZXModGhpcy50aXRsZSwgY29sb3JBdHRyRGVmLnZhbHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkubW91c2VsZWF2ZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXNQcm9kdWN0LnNlbGVjdGVkVmFyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LnNob3dJbWFnZXModGhpc1Byb2R1Y3Quc2VsZWN0ZWRWYXIuaWQsIFt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAndmFsJzogdGhpc1Byb2R1Y3Quc2VsZWN0ZWRWYXIuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaW1hZ2VzJzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdvcmlnaW5hbCc6IFt7J3VybCc6IG1vZGVsLmltYWdlcy56b29tdmFyaWFudHNbdGhpc1Byb2R1Y3Quc2VsZWN0ZWRWYXIuaWRdfV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3NtYWxsJzogW3sndXJsJzogbW9kZWwuaW1hZ2VzLnZhcmlhbnRzW3RoaXNQcm9kdWN0LnNlbGVjdGVkVmFyLmlkXX1dLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdsYXJnZSc6IFt7J3VybCc6IG1vZGVsLmltYWdlcy52YXJpYW50c1t0aGlzUHJvZHVjdC5zZWxlY3RlZFZhci5pZF19XVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzUHJvZHVjdC5zZWxlY3RlZFZhckF0dHJpYnMuY29sb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3Quc2hvd0ltYWdlcyh0aGlzUHJvZHVjdC5zZWxlY3RlZFZhckF0dHJpYnMuY29sb3IsIGNvbG9yQXR0ckRlZi52YWxzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzUHJvZHVjdC5zaG93SW1hZ2VzKCcnLCBbe3ZhbDogJycsIGltYWdlczogbW9kZWwuaW1hZ2VzfV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3Quc2hvd1NlbGVjdGVkVmFyQXR0clZhbCgnY29sb3InLCB0aGlzUHJvZHVjdC5zZWxlY3RlZFZhckF0dHJpYnMuY29sb3IgfHwgJycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm90IGEgY29sb3Igc3dhdGNoLCB3ZSBvbmx5IGhhdmUgY2xpY2sgaGFuZGxlciBmb3IgdGhpcyB0eXBlIG9mIHZhcmlhdGlvbiBhdHRyaWJ1dGUgZS5nLiB3aWR0aCwgbGVuZ3RoIGV0Yy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFySnFyeU9ianMuZGF0YSgnZGF0YScsIHtpZDogcGRwVmFySWR9KS5jbGljayh2YXJFdmVudEhhbmRsZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzUHJvZHVjdC5jb250YWluZXJJZCArICcgLnZhcmlhdGlvbmF0dHJpYnV0ZXMgLnZhcmlhbnRkcm9wZG93biBzZWxlY3Qgb3B0aW9uJykuZWFjaChmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoalF1ZXJ5KHRoaXNQcm9kdWN0LmNvbnRhaW5lcklkICsgJyAudmFyaWF0aW9uYXR0cmlidXRlcyAudmFyaWFudGRyb3Bkb3duIHNlbGVjdCBvcHRpb24nKS5sZW5ndGggPT0gMiAmJiBpbmRleCA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykucHJvcCgnc2VsZWN0ZWQnLCB0cnVlKS50cmlnZ2VyKCdjaGFuZ2UnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBsb29wIHRocnUgYWxsIHRoZSBub24tc3dhdGNoZXMgYXR0cmlidXRlcyBhbmQgYmluZCBldmVudHMgZXRjLlxyXG4gICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXNQcm9kdWN0LmNvbnRhaW5lcklkICsgJyAudmFyaWF0aW9uYXR0cmlidXRlcyAudmFyaWFudGRyb3Bkb3duIHNlbGVjdCcpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGRlZmF1bHQgdWkgaS5lLiBkcm9wIGRvd255XHJcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMpLmRhdGEoJ2RhdGEnLCB7aWQ6IGpRdWVyeSh0aGlzKS5kYXRhKCdkYXRhJyksIHZhbDogJyd9KS5jaGFuZ2UoZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlcmUgaXMgb25seSAxIHZhbHVlIHRvIGJlIHNlbGVjdGVkIHRoZW4gcmV0dXJuIGkuZS4gbm8gZGVzZWxlY3Rpb24gYXZhaWxhYmxlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vaWYgKHRoaXMuc2VsZWN0ZWRJbmRleCA9PSAwICYmIHRoaXMub3B0aW9ucy5sZW5ndGggPT0gMSkgeyByZXR1cm47IH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuZGF0YSA9IGpRdWVyeSh0aGlzKS5kYXRhKCdkYXRhJyk7IC8vIGRhdGEgaXMgaWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5zZWxlY3RlZEluZGV4ID09IDAsIGl0IGlzIGRlc2VsZWN0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuZGF0YS52YWwgPSAodGhpcy5zZWxlY3RlZEluZGV4ID09IDAgJiYgdGhpcy5vcHRpb25zLmxlbmd0aCA+IDEpID8gbnVsbCA6IHRoaXMub3B0aW9uc1t0aGlzLnNlbGVjdGVkSW5kZXhdLnZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRJbmRleCA9PSAwICYmIHRoaXMub3B0aW9ucy5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZXNlbGVjdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9qUXVlcnkodGhpcykuY2xvc2VzdChcIi52YXJpYW50ZHJvcGRvd25cIikuZmluZChcImJ1dHRvblwiKS5hZGRDbGFzcyhcIm5vbi1zZWxlY3RhYmxlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VsZWN0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2pRdWVyeSh0aGlzKS5jbG9zZXN0KFwiLnZhcmlhbnRkcm9wZG93blwiKS5maW5kKFwiYnV0dG9uXCIpLnJlbW92ZUNsYXNzKFwibm9uLXNlbGVjdGFibGVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcykuY2xvc2VzdCgnLnZhcmlhbnRkcm9wZG93bicpLmZpbmQoJy5vcHRpb253cmFwcGVyJykuc2xpZGVVcCg0MDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcykuY2xvc2VzdCgnLnZhcmlhbnRkcm9wZG93bicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcygnY3VycmVudCcpLmFkZENsYXNzKCdzZWxlY3RlZCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5uZXh0VW50aWwoJy5mdXR1cmUnKS5uZXh0KClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKCdjdXJyZW50JykucmVtb3ZlQ2xhc3MoJ2Z1dHVyZScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKCcub3B0aW9ud3JhcHBlcicpLnNsaWRlRG93big0MDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzKS5maW5kKCdzZWxlY3Qgb3B0aW9uJykuZWFjaChmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5jbG9zZXN0KCdzZWxlY3QnKS5maW5kKCdvcHRpb24nKS5sZW5ndGggPT0gMiAmJiBpbmRleCA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykucHJvcCgnc2VsZWN0ZWQnLCB0cnVlKS50cmlnZ2VyKCdjaGFuZ2UnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8kKHRoaXMpLmF0dHIoJ3NlbGVjdGVkJywnc2VsZWN0ZWQnKS50cmlnZ2VyKCdjaGFuZ2UnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuZmluZCgnc2VsZWN0JykuY2hhbmdlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3QudmFyQXR0clNlbGVjdGVkKGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZEluZGV4ID09IDAgJiYgdGhpcy5vcHRpb25zLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNsZWFyIHRoZSBjdXJyZW50IHNlbGVjdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3QucmVzZXRWYXJpYXRpb25zKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzUHJvZHVjdC5zZWxlY3RlZFZhckF0dHJpYnMuY29sb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBzaG93IHN3YXRjaCByZWxhdGVkIGltYWdlcyBmb3IgdGhlIGN1cnJlbnQgdmFsdWVcclxuICAgICAgICAgICAgICAgICAgICB0aGlzUHJvZHVjdC5zaG93SW1hZ2VzKHRoaXNQcm9kdWN0LnNlbGVjdGVkVmFyQXR0cmlicy5jb2xvciwgdGhpc1Byb2R1Y3QuZ2V0QXR0ckJ5SUQoJ2NvbG9yJykudmFscyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHNob3cgaW1hZ2VzIGFuZCBiaW5kIGhvdmVyIGV2ZW50IGhhbmRsZXJzIGZvciBzbWFsbC90aHVtYm5haWxzIHRvIHRvZ2dsZSBsYXJnZSBpbWFnZVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LnNob3dJbWFnZXMoJycsIFt7dmFsOiAnJywgaW1hZ2VzOiBtb2RlbC5pbWFnZXN9XSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBzaG93IGltYWdlcyBhbmQgYmluZCBob3ZlciBldmVudCBoYW5kbGVycyBmb3Igc21hbGwvdGh1bWJuYWlscyB0byB0b2dnbGUgbGFyZ2UgaW1hZ2VcclxuICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LnNob3dJbWFnZXMoJycsIFt7dmFsOiAnJywgaW1hZ2VzOiBtb2RlbC5pbWFnZXN9XSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGJpbmQgcHJvZHVjdCBvcHRpb25zIGV2ZW50KHMpXHJcbiAgICAgICAgICAgIGdldE9wdGlvbnNEaXYodGhpcyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIW1vZGVsLnByb2R1Y3RTZXQpIHtcclxuICAgICAgICAgICAgICAgIC8vIHF1YW50aXR5IGJveFxyXG4gICAgICAgICAgICAgICAgaWYgKCFtb2RlbC5idW5kbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBnZXRRdHlCb3godGhpcyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1vZGVsLmJ1bmRsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBhdmFpYWJpbGl0eSBmb3IgYSBidW5kbGUgcHJvZHVjdCwgZm9yIGV2ZXJ5dGhpbmcgZWxzZSBpdHMgZG9uZSBpbnNpZGUgZ2V0UXR5Qm94XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0QXZhaWxhYmlsaXR5TXNnKGNyZWF0ZUF2TWVzc2FnZSh0aGlzLCAxKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIEFkZCB0byBjYXJ0IGJ1dHRvbiBjbGljayBiaW5kaW5nXHJcbiAgICAgICAgICAgIGdldEFkZFRvQ2FydEJ0bih0aGlzKTtcclxuICAgICAgICAgICAgLy8gaW50aWFsIGRpc3BsYXkgb2YgQTJDIGJ1dHRvblxyXG4gICAgICAgICAgICAvLyBpZiB0aGUgcHJpY2UgaXMgMCBvciBub3QgYXZhaWxhYmxlLCBpdHMgZGlzYWJsZWRcclxuICAgICAgICAgICAgLy8gaWYgbm90IGluIHN0b2NrLCBpdHMgZGlzYWJsZWRcclxuICAgICAgICAgICAgLy8gaXNQcm9tb1ByaWNlIHdvdWxkIGJlIHRydWUgaW4gY2FzZSBpZiBhIHByb2R1Y3QgaGFzIGEgcHJvbW90aW9uYWwgcHJpY2Ugd2hpY2ggY291bGQgbWFrZSBwcm9kdWN0J3MgcHJpY2UgMFxyXG4gICAgICAgICAgICBpZiAoISh0aGlzLmdldFByaWNlKCkgPiAwIHx8IHRoaXMuaXNQcm9tb1ByaWNlKCkpIHx8XHJcbiAgICAgICAgICAgICAgICBtb2RlbC5tYXN0ZXIgfHwgbW9kZWwudmFyaWFudCB8fCBtb2RlbC5wcm9kdWN0U2V0IHx8IG1vZGVsLmJ1bmRsZSB8fFxyXG4gICAgICAgICAgICAgICAgKCFtb2RlbC5pblN0b2NrICYmIG1vZGVsLmF2U3RhdHVzID09PSBDb25zdGFudHMuQVZBSUxfU1RBVFVTX05PVF9BVkFJTEFCTEUgJiYgIW1vZGVsLnByb2R1Y3RTZXQpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc2FibGVBMkNCdXR0b24oKTtcclxuICAgICAgICAgICAgICAgIC8qKiBpZigodGhpcy5nZXRQcmljZSgpID09IDAgJiYgIXRoaXMuaXNQcm9tb1ByaWNlKCkpKSB7XHJcblx0XHRcdFx0XHR0aGlzLmhpZGVBdmFpbGFiaWxpdHkoKTtcclxuXHRcdFx0XHR9Ki9cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobW9kZWwuYXZTdGF0dXMgPT09IENvbnN0YW50cy5BVkFJTF9TVEFUVVNfTk9UX0FWQUlMQUJMRSkge1xyXG4gICAgICAgICAgICAgICAgLy90aGlzLnJlbW92ZUEyQ0J1dHRvbigpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBjdXN0b21lciByYXRpbmcgc2VjdGlvbiBvbmx5IGRpc3BsYXllZCBmb3IgdGhlIG1haW4gcHJvZHVjdFxyXG4gICAgICAgICAgICBpZiAoIW1vZGVsLnByb2R1Y3RTZXRQcm9kdWN0ICYmICFtb2RlbC5idW5kbGVkKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIW1vZGVsLnByb2R1Y3RTZXQgJiYgIWlzUXVpY2tWaWV3ICYmICFtb2RlbC5idW5kbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBnZXRSYXRpbmdTZWN0aW9uKHRoaXMuY29udGFpbmVySWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyB3aXNoIGxpc3QsIHNlbnQgdG8gZnJpZW5kLCBhZGQgdG8gZ2lmdFxyXG4gICAgICAgICAgICBnZXRNaXNjTGlua3ModGhpcyk7XHJcblxyXG4gICAgICAgICAgICAvLyBwcm9kdWN0IHRhYnNcclxuICAgICAgICAgICAgZ2V0VGFicyh0aGlzLmNvbnRhaW5lcklkKTtcclxuXHJcbiAgICAgICAgICAgIC8vIHNldHVwIGJ1bmRsZS9wcm9kdWN0IHNldFxyXG4gICAgICAgICAgICB0aGlzLmdldFN1YlByb2R1Y3RzQmluZGluZygpO1xyXG5cclxuICAgICAgICB9LFxyXG4gICAgICAgIHRvU3RyaW5nOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1vZGVsO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn07IC8vIFByb2R1Y3QgZGVmaW50aW9uIGVuZFxyXG52YXIgUHJvZHVjdENhY2hlID0gbnVsbDtcclxudmFyIHF1aWNrdmlld1Nob3cgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgdmFyIHVybCA9IG9wdGlvbnMudXJsO1xyXG4gICAgdXJsID0gdXJsID0gdXRpbC5hcHBlbmRQYXJhbVRvVVJMKHVybCwgJ3NvdXJjZScsIG9wdGlvbnMuc291cmNlKTtcclxuICAgICQoJyNRdWlja1ZpZXdEaWFsb2cnKS5odG1sKCcnKTtcclxuICAgIHZhciBxdWlja1ZpZXdEaWFsb2cgPSBkaWFsb2cuY3JlYXRlKHtcclxuICAgICAgICB0YXJnZXQ6ICcjUXVpY2tWaWV3RGlhbG9nJyxcclxuICAgICAgICBvcHRpb25zOiB7XHJcbiAgICAgICAgICAgIGhlaWdodDogNTMwLFxyXG4gICAgICAgICAgICB3aWR0aDogNzYwLFxyXG4gICAgICAgICAgICBkaWFsb2dDbGFzczogJ3F1aWNrdmlldycsXHJcbiAgICAgICAgICAgIHRpdGxlOiBSZXNvdXJjZXMuUVVJQ0tfVklFV19QT1BVUFxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcXVpY2tWaWV3RGlhbG9nLmRpYWxvZygnb3BlbicpO1xyXG4gICAgcHJvZ3Jlc3Muc2hvdygnI1F1aWNrVmlld0RpYWxvZycpO1xyXG5cclxuICAgICQuYWpheCh7XHJcbiAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgJChxdWlja1ZpZXdEaWFsb2cpLmh0bWwoJycpLmFwcGVuZChkYXRhKTtcclxuICAgICAgICAgICAgdXRpbC5oaWRkZW5EYXRhKCk7XHJcbiAgICAgICAgICAgIHZhciBQcm9kdWN0Q2FjaGUgPSBudWxsO1xyXG4gICAgICAgICAgICB2YXIgcHJvZHVjSnNvbiA9ICQoJyNRdWlja1ZpZXdEaWFsb2cgLnByb2R1Y3Rqc29uJykuZGF0YSgncHJvZHVjdGpzb24nKTtcclxuICAgICAgICAgICAgUHJvZHVjdENhY2hlID0gcHJvZHVjdChwcm9kdWNKc29uKTtcclxuICAgICAgICAgICAgUHJvZHVjdENhY2hlLnNob3coe2NvbnRhaW5lcklkOiAncGRwTWFpbicsIGFwcGVuZDogZmFsc2UsIHNvdXJjZTogb3B0aW9ucy5zb3VyY2V9KTtcclxuICAgICAgICAgICAgYWRkVG9DYXJ0LmluaXQoKTtcclxuICAgICAgICAgICAgJCgnYm9keScpLmZpbmQoJy5xdWFudGl0eWlucHV0Jykub2ZmKCdrZXlkb3duJykub24oJ2tleWRvd24nLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PSAxMykge1xyXG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHByb2dyZXNzLmhpZGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufTtcclxudmFyIHBkcEV2ZW50cyA9IHtcclxuICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB1dGlsLmhpZGRlbkRhdGEoKTtcclxuICAgICAgICB2YXIgcHJvZHVjSnNvbiA9ICQoJ2JvZHknKS5maW5kKCcucHJvZHVjdGpzb24nKS5kYXRhKCdwcm9kdWN0anNvbicpO1xyXG4gICAgICAgIHZhciBzb3VyY2VWYWx1ZSA9ICQoJ2JvZHknKS5maW5kKCcuaHR0cC1zb3VyY2UnKS52YWwoKTtcclxuICAgICAgICBQcm9kdWN0Q2FjaGUgPSBwcm9kdWN0KHByb2R1Y0pzb24pO1xyXG4gICAgICAgIFByb2R1Y3RDYWNoZS5zaG93KHtjb250YWluZXJJZDogJ3BkcE1haW4nLCBhcHBlbmQ6IGZhbHNlLCBzb3VyY2U6IHNvdXJjZVZhbHVlfSk7XHJcbiAgICAgICAgJCgnI3RhYnMnKS5maW5kKCdhW2hyZWY9XCIjcGRwVGFiMVwiXScpLnRyaWdnZXIoJ2NsaWNrJyk7XHJcbiAgICAgICAgLy92YXIgZ2V0RGF0YU9wdGlvbiA9ICQoJy5wcm9kdWN0LXByaW1hcnktaW1hZ2UnKS5maW5kKCdhJykuYXR0cignZGF0YS1vcHRpb25zJyk7XHJcbiAgICAgICAgJCgnYm9keScpLmZpbmQoJy5xdWFudGl0eWlucHV0Jykub24oJ2tleWRvd24nLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09IDEzKSB7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAkKCcjUXVhbnRpdHknKS5rZXl1cChmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIHZhciBrZXkgPSBlLmNoYXJDb2RlIHx8IGUua2V5Q29kZSB8fCBlLndoaWNoIHx8IDA7XHJcbiAgICAgICAgICAgIGlmICgkLmlzTnVtZXJpYygkKCcjUXVhbnRpdHknKS52YWwoKSkgJiYgKGtleSA9PSAxMykpIHtcclxuICAgICAgICAgICAgICAgICQoJyNhZGQtdG8tY2FydCcpLnRyaWdnZXIoJ2NsaWNrJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoISQuaXNOdW1lcmljKCQoJyNRdWFudGl0eScpLnZhbCgpKSkge1xyXG4gICAgICAgICAgICAgICAgJCgnLmFkZHRvY2FydGJ1dHRvbjpsYXN0JykucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICQoJy5hZGR0b2NhcnQsIC5hZGR0b2NhcnRidXR0b24nKS5hZGRDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLnZhbCgpIDwgMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJ2FkZHRvY2FydGJ1dHRvbjpsYXN0JykucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuYWRkdG9jYXJ0JykuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5hZGR0b2NhcnRidXR0b246bGFzdCcpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5hZGR0b2NhcnQsIC5hZGR0b2NhcnRidXR0b24nKS5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcueW91dHViZS1saXN0LXZpZGVvIGEnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA+IDQ4MCAmJiAkKHdpbmRvdykud2lkdGgoKSA8IDk1OSkge1xyXG4gICAgICAgICAgICAgICAgdXRpbC5zY3JvbGxCcm93c2VyKCQoJy50YWItc2VjJykub2Zmc2V0KCkudG9wKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICgkKHdpbmRvdykud2lkdGgoKSA8IDQ4MSkge1xyXG4gICAgICAgICAgICAgICAgdXRpbC5zY3JvbGxCcm93c2VyKCQoJy5tb2JpbGUtdGFicy1zZWN0aW9uIC50YWJzSGVhZGVyLnZpZGVvVGFiJykub2Zmc2V0KCkudG9wKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcudmlkZW8tbGluaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpID4gNDgwKSB7XHJcbiAgICAgICAgICAgICAgICB1dGlsLnNjcm9sbEJyb3dzZXIoJCgnLnRhYi1zZWMnKS5vZmZzZXQoKS50b3ApO1xyXG4gICAgICAgICAgICAgICAgJCgnI3RhYnMgI3ZpZGVvVGFiJykuZmluZCgnYVtocmVmPVwiI3BkcFZpZGVvVGFiXCJdJykudHJpZ2dlcignY2xpY2snKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICgkKHdpbmRvdykud2lkdGgoKSA8IDQ4MSkge1xyXG4gICAgICAgICAgICAgICAgdXRpbC5zY3JvbGxCcm93c2VyKCQoJy5tb2JpbGUtdGFicy1zZWN0aW9uIC50YWJzSGVhZGVyLnZpZGVvVGFiJykub2Zmc2V0KCkudG9wKTtcclxuICAgICAgICAgICAgICAgICQoJy50YWJzSGVhZGVyLnZpZGVvVGFiJykucGFyZW50KCcubW9iaWxlLXRhYnMtc2VjdGlvbiAnKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCgnLnZpZGVvVGFiJykuaGFzQ2xhc3MoJ2xvYWRlZCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJCgnLnZpZGVvVGFiJykuYWRkQ2xhc3MoJ2xvYWRlZCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9ICQoJyNwZHBWaWRlb1RhYicpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHVybCA9ICQoJyNwcm9kdWN0VVJMJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICBhamF4LmxvYWQoe1xyXG4gICAgICAgICAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnaHRtbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5odG1sKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJCgnI2FkZC10by1jYXJ0JykuYmluZCgnY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICgkKCcjUXVhbnRpdHknKS52YWwoKSA+IDApIHtcclxuICAgICAgICAgICAgICAgICQoJy5hZGRlZHRvLWNhcnRvdmVybGF5JykuYWRkQ2xhc3MoJ2FkZGVkLW92ZXJsYXknKTtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5hZGRlZHRvLWNhcnRvdmVybGF5JykucmVtb3ZlQ2xhc3MoJ2FkZGVkLW92ZXJsYXknKTtcclxuICAgICAgICAgICAgICAgIH0sIDIwMDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJCgnI1F1aWNrVmlld0RpYWxvZyAucHJvZHVjdC1wcmltYXJ5LWltYWdlJykuZmluZCgnLnByb2R1Y3QtaW1hZ2UnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAoKCQoJy5wcm92aWRlby1zcGVjLWxpbmsnKS5sZW5ndGggPiAwKSkge1xyXG4gICAgICAgICAgICBpZiAoISgkKCcudmlkZW8tbGluaycpLmxlbmd0aCA+IDApKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPiA0ODApIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcucHJvZHVjdG5hbWUuaC1vbmUtdGFnJykuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3dpZHRoJzogJ2F1dG8nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnbWFyZ2luLWJvdHRvbSc6ICctMjZweCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdmbG9hdCc6ICdsZWZ0JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3BhZGRpbmctYm90dG9tJzogJzhweCdcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA+IDQ4MCkge1xyXG4gICAgICAgICAgICAgICAgJCgnLnByb2R1Y3RuYW1lLmgtb25lLXRhZycpLmNzcyh7J3BhZGRpbmctYm90dG9tJzogJzRweCd9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLnNwZWNDaGFydC1saW5rJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPiA0ODApIHtcclxuICAgICAgICAgICAgICAgIHV0aWwuc2Nyb2xsQnJvd3NlcigkKCcudGFiLXNlYycpLm9mZnNldCgpLnRvcCk7XHJcbiAgICAgICAgICAgICAgICAkKCcjdGFicycpLmZpbmQoJ2FbaHJlZj1cIiNzcGVjQ2hhcnRUYWJcIl0nKS50cmlnZ2VyKCdjbGljaycpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCQod2luZG93KS53aWR0aCgpIDwgNDgxKSB7XHJcbiAgICAgICAgICAgICAgICB1dGlsLnNjcm9sbEJyb3dzZXIoJCgnLm1vYmlsZS10YWJzLXNlY3Rpb24gLnRhYnNIZWFkZXIuc3BlY1RhYicpLm9mZnNldCgpLnRvcCk7XHJcbiAgICAgICAgICAgICAgICAkKCcudGFic0hlYWRlci5zcGVjVGFiJykucGFyZW50KCcubW9iaWxlLXRhYnMtc2VjdGlvbiAnKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB2YXIgcGRwUmVjb21lbmRhdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHBkcFJlY29tZW5kYXRpb25DYXJvdXNlbCA9ICQoJy5wdF9wcm9kdWN0LWRldGFpbHMgLmpjYXJvdXNlbGNvbnQgLnJlY29tbWVuZGF0aW9ucycpLmZpbmQoJy5wZHByZWNvbW8tb3dsJyk7XHJcbiAgICAgICAgICAgIHBkcFJlY29tZW5kYXRpb25DYXJvdXNlbC5vd2xDYXJvdXNlbCh7XHJcbiAgICAgICAgICAgICAgICBuYXY6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBkb3RzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgbmF2aWdhdGlvbjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBuYXZSZXdpbmQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgcmV3aW5kOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGxvb3A6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgaXRlbXM6IDUsXHJcbiAgICAgICAgICAgICAgICByZXNwb25zaXZlQ2xhc3M6IHRydWUsXHJcbiAgICAgICAgICAgICAgICByZXNwb25zaXZlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgMDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtczogMixcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVCeTogMlxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgNzY3OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zOiAyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzbGlkZUJ5OiAyXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICA3Njg6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6IDUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlQnk6IDVcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB2YXIgdmlld3BvcnQgPSBqUXVlcnkod2luZG93KS53aWR0aCgpO1xyXG4gICAgICAgICAgICB2YXIgaXRlbUNvdW50ID0galF1ZXJ5KCcub3dsLWNhcm91c2VsIC5pdGVtJykubGVuZ3RoO1xyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAodmlld3BvcnQgPj0gOTU5ICYmIGl0ZW1Db3VudCA+IDUpIC8vZGVza3RvcFxyXG4gICAgICAgICAgICAgICAgfHwgKCh2aWV3cG9ydCA+PSA0ODEgJiYgdmlld3BvcnQgPCA2MDApICYmIGl0ZW1Db3VudCA+IDMpIC8vdGFibGV0XHJcbiAgICAgICAgICAgICAgICB8fCAodmlld3BvcnQgPCA0ODAgJiYgaXRlbUNvdW50ID4gMikgLy9tb2JpbGVcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcucGRwcmVjb21vLW93bCcpLmZpbmQoJy5vd2wtcHJldiwgLm93bC1uZXh0Jykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgJCgnLnBkcHJlY29tby1vd2wnKS5maW5kKCcub3dsLWRvdHMnKS5zaG93KCk7XHJcblxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJCgnLnBkcHJlY29tby1vd2wnKS5maW5kKCcub3dsLXByZXYsIC5vd2wtbmV4dCcpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICQoJy5wZHByZWNvbW8tb3dsJykuZmluZCgnLm93bC1kb3RzJykuaGlkZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICQoJy5wcm9kdWN0LWxpc3RpbmcnKS5maW5kKCdoMi5oaWRlJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgdmFyIGhlaWdodCA9ICQoJy5vd2wtaXRlbScpLmhlaWdodCgpO1xyXG4gICAgICAgICAgICAkKCcucGRwcmVjb21vLW93bCcpLmZpbmQoJy5vd2wtaXRlbScpLmZpbmQoJy5wcm9kdWN0LXRpbGUuaXRlbScpLmhlaWdodChoZWlnaHQgLSAxMDApO1xyXG4gICAgICAgICAgICAkKCcucHRfcHJvZHVjdC1kZXRhaWxzIC5wcm9kdWN0LXRpbGUgLnByb2R1Y3QtaW1hZ2UnKS5vbignbW91c2VlbnRlcicsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciAkcXZCdXR0b24gPSAkKCcjcXVpY2t2aWV3YnV0dG9uJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoJHF2QnV0dG9uLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRxdkJ1dHRvbiA9ICQoJzxhIGlkPVwicXVpY2t2aWV3YnV0dG9uXCIgY2xhc3M9XCJxdWlja3ZpZXdcIj4nICsgUmVzb3VyY2VzLlFVSUNLX1ZJRVcgKyAnPGkgY2xhc3M9XCJmYSBmYS1hcnJvd3MtYWx0XCI+PC9pPjwvYT4nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciAkbGluayA9ICQodGhpcykuZmluZCgnLnRodW1iLWxpbmsnKTtcclxuICAgICAgICAgICAgICAgICRxdkJ1dHRvbi5hdHRyKHtcclxuICAgICAgICAgICAgICAgICAgICAnaHJlZic6ICRsaW5rLmF0dHIoJ2hyZWYnKSxcclxuICAgICAgICAgICAgICAgICAgICAndGl0bGUnOiAkbGluay5hdHRyKCd0aXRsZScpXHJcbiAgICAgICAgICAgICAgICB9KS5hcHBlbmRUbyh0aGlzKTtcclxuICAgICAgICAgICAgICAgICRxdkJ1dHRvbi5vZmYoJ2NsaWNrJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogJCh0aGlzKS5hdHRyKCdocmVmJyksIC8vUFJFViBKSVJBIFBSRVYtMjU1IDpQTFA6IE9uIENsaWNrIFF1aWNrIHZpZXcgbmF2aWdhdGluZyB0byBhIHdyb25nIHBhZ2Ugd2hlbiB1c2VyIGZpcnN0IGNoYW5nZXMgdGhlIHN3YXRjaGVzLiBUYWtpbmcgb25seSBocmVmLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U6ICdxdWlja3ZpZXcnXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICBxdWlja3ZpZXdTaG93KG9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgc2V0VGltZW91dChwZHBSZWNvbWVuZGF0aW9uLCA1NTAwKTtcclxuICAgIH1cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcGRwRXZlbnRzO1xyXG4iLCIndXNlIHN0cmljdCc7XHJcbnZhciBwcm9ncmVzcyA9IHJlcXVpcmUoJy4uL3Byb2dyZXNzJyksXHJcbiAgICB1aWV2ZW50cyA9IHJlcXVpcmUoJy4uL3VpZXZlbnRzJyksXHJcbiAgICB0b29sdGlwID0gcmVxdWlyZSgnLi4vdG9vbHRpcCcpLFxyXG4gICAgdmFsaWRhdG9yID0gcmVxdWlyZSgnLi4vdmFsaWRhdG9yJyksXHJcbiAgICBhamF4ID0gcmVxdWlyZSgnLi4vYWpheCcpLFxyXG4gICAgdXRpbCA9IHJlcXVpcmUoJy4uL3V0aWwnKTtcclxuXHJcbnZhciByYXBhbGFpbnNpZGVyID0ge1xyXG4gICAgaW5pdDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRvb2x0aXAuaW5pdCgpO1xyXG4gICAgICAgIHZhbGlkYXRvci5pbml0KCk7XHJcbiAgICAgICAgdWlldmVudHMuaW5pdCgpO1xyXG4gICAgICAgIGlmIChqUXVlcnkoJyNkaWFsb2djb250YWluZXIxMjMnKS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICBqUXVlcnkoZG9jdW1lbnQuYm9keSkuYXBwZW5kKCc8ZGl2IGlkPVxcJ2RpYWxvZ2NvbnRhaW5lcjEyM1xcJyBjbGFzcz1cXCd2aXBpbnNpZGVyLWNvbnRhaW5lclxcJz48L2Rpdj4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgalF1ZXJ5LmVhY2goalF1ZXJ5KCdmb3JtOm5vdCguc3VwcHJlc3MpJyksIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgalF1ZXJ5KHRoaXMpLnZhbGlkYXRlKHZhbGlkYXRvci5zZXR0aW5ncyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHZhciAkdmlwaW5zaWRlciA9ICQoJy52aXBpbnNpZGVyLWNvbnRhaW5lcicpO1xyXG4gICAgICAgICAgICAvL3ZpcGZvcm0gPSAkKCcuVmlwaW5zaWRlckZvcm0nKTtcclxuICAgICAgICAvL3ZhciB2YWxpZGF0b3Jpbml0ID0gJCh0aGlzKS5jbG9zZXN0KCdmb3JtJykudmFsaWRhdGUoKTtcclxuICAgICAgICAkKCcjUGFzc3dvcmRSZXNldDEyMycpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgJHZpcGluc2lkZXIubG9hZChVcmxzLnZpcEluc2lkZXIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICR2aXBpbnNpZGVyLmRpYWxvZyh7XHJcbiAgICAgICAgICAgICAgICAgICAgYmdpZnJhbWU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgYXV0b09wZW46IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIG1vZGFsOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIG92ZXJsYXk6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMC41LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAnd2hpdGUnXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogMzU4LFxyXG4gICAgICAgICAgICAgICAgICAgIGRpYWxvZ0NsYXNzOiAndmlwSW5zaWRlci1kbGcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgb3BlbjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sdGlwLmluaXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdG9yLmluaXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdWlldmVudHMuaW5pdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByYXBhbGFpbnNpZGVyLmRpYWxvZ0V2ZW50cygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByYXBhbGFpbnNpZGVyLmZvcm1QcmVwYXJlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1TZWxlY3RvcjogJyNWaXBpbnNpZGVyRm9ybScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZVNlbGVjdG9yOiAnI1ZJUEluc2lkZXItZm9ybS1zYm10LWlkJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdvcGFjaXR5J1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmFwYWxhaW5zaWRlci52aXBpbnNpZGVyZXZlbnRzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA+IDEyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhcGFsYWluc2lkZXIuY3VzdG9tc2VsZWN0ZXZlbnRzYigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhcGFsYWluc2lkZXIudGV4dGFyZWFyYXBhbGEoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmFwYWxhaW5zaWRlci5jbGVhcmJ1dHRvbmZ1bmN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5yZW1vdmUnKS5jbGljayhmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpbGVuYW1lID0gJCh0aGlzKS5hdHRyKCdkYXRhLWZpbGUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmb3JtID0gJCh0aGlzKS5jbG9zZXN0KCdmb3JtJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gZm9ybS5hdHRyKCdhY3Rpb24nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaW5hbFVSTCA9IHV0aWwuYXBwZW5kUGFyYW1Ub1VSTCh1cmwsICdmaWxlbmFtZScsIGZpbGVuYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFqYXgubG9hZCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBmaW5hbFVSTCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGpRdWVyeSgnI2RpYWxvZ2NvbnRhaW5lcjEyMycpLmRpYWxvZygnb3BlbicpO1xyXG4gICAgICAgICAgICAgICAgJCh3aW5kb3cpLnNjcm9sbFRvcCgwKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgZGlhbG9nRXZlbnRzOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyICR2aXBpbnNpZGVyID0gJCgnLnZpcGluc2lkZXItY29udGFpbmVyJyk7XHJcbiAgICAgICAgICAgIC8vdmlwZm9ybSA9ICQoJy5WaXBpbnNpZGVyRm9ybScpO1xyXG4gICAgICAgIHJhcGFsYWluc2lkZXIuY2xlYXJidXR0b25mdW5jdCgpO1xyXG4gICAgICAgICR2aXBpbnNpZGVyLmZpbmQoJyNWSVBJbnNpZGVyLWZvcm0tc2JtdC1pZCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdmFyIHByb2RpZCA9ICQoJy5maWVsZHN0YWZmIGZvcm0gLmR5bi1jYXQtc2VsZWN0IHNlbGVjdCcpLmZpbmQoJzpzZWxlY3RlZCcpLnZhbCgpO1xyXG4gICAgICAgICAgICBpZiAoJCgnLnRyaWdnZXJfc2luZ2xldXBsb2FkJykuaXMoJzp2aXNpYmxlJykgJiYgcHJvZGlkICE9ICdkb25hdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIGlmICghKCQoJy52aXAtdXBsb2FkZm9ybS1ob2xkZXIgLmZpbGVsaXN0JykuZmluZCgnLnVwZGF0ZXRleHQnKS5sZW5ndGggIT0gMCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcudmlwLXVwbG9hZGZvcm0taG9sZGVyJykuZmluZCgnLmVtcHR5LWF0dGFjaG1lbnQtZXJyb3InKS5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghJCh0aGlzKS5jbG9zZXN0KCdmb3JtJykudmFsaWQoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoISQodGhpcykuY2xvc2VzdCgnZm9ybScpLnZhbGlkKCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkKCcudmlwLXVwbG9hZGZvcm0taG9sZGVyJykuZmluZCgnLmVtcHR5LWF0dGFjaG1lbnQtZXJyb3InKS5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICB2YXIgdmlwVVJMID0gJCh0aGlzKS5jbG9zZXN0KCdmb3JtJykuYXR0cignYWN0aW9uJyk7XHJcbiAgICAgICAgICAgIHZhciB2aXBEYXRhID0gJCh0aGlzKS5jbG9zZXN0KCdmb3JtJykuc2VyaWFsaXplKCk7XHJcbiAgICAgICAgICAgIHByb2dyZXNzLnNob3coJCgnLmZpZWxkc3RhZmYgZm9ybScpKTtcclxuICAgICAgICAgICAgalF1ZXJ5KCcjbXNnY29udGlhbmVyJykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICQoJzxkaXYvPicpLmF0dHIoJ2lkJywgJ21zZ2NvbnRpYW5lcicpLmh0bWwoJyAnKS5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KTtcclxuICAgICAgICAgICAgYWpheC5sb2FkKHtcclxuICAgICAgICAgICAgICAgIHVybDogdmlwVVJMLFxyXG4gICAgICAgICAgICAgICAgZGF0YTogdmlwRGF0YSxcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAodmlwRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJ2JvZHknKS5maW5kKCcudmlwSW5zaWRlci1kbGcgLnVpLWRpYWxvZy10aXRsZWJhci1jbG9zZScpLnRyaWdnZXIoJ2NsaWNrJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByZXNlbnQgPSAkKHZpcERhdGEpLmZpbmQoJy5leGl0aW5nX3VzZXInKS5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoID0gcHJlc2VudCA+IDAgPyAnMzE2cHgnIDogJzM1OHB4JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0ID0gcHJlc2VudCA+IDAgPyAnYXV0bycgOiAnMTg0JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGxnQ2xhc3MgPSBwcmVzZW50ID4gMCA/ICdleGlzdGluZ3VzZXJkbGcnIDogJ25ld3VzZXJkbGcnO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJyNtc2djb250aWFuZXInKS5maW5kKCcucmVnY2hlY2snKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICBqUXVlcnkoJyNtc2djb250aWFuZXInKS5hcHBlbmQodmlwRGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KCcjbXNnY29udGlhbmVyJykuZGlhbG9nKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmdpZnJhbWU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9PcGVuOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWw6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJsYXk6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuNSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICd3aGl0ZSdcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHdpZHRoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IGhlaWdodCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlhbG9nQ2xhc3M6ICd2aXBJbnNpZGVyLWRsZyAnICsgZGxnQ2xhc3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wZW46IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeSgnI21zZ2NvbnRpYW5lcicpLmRpYWxvZygnb3BlbicpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy52aXBJbnNpZGVyLWRsZy51aS1kaWFsb2cuZXhpc3Rpbmd1c2VyZGxnIGJ1dHRvbi5jbG9zZSwgLnZpcEluc2lkZXItZGxnLnVpLWRpYWxvZy5uZXd1c2VyZGxnIGJ1dHRvbi5jbG9zZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcudWktZGlhbG9nJykuZmluZCgnLnVpLWRpYWxvZy10aXRsZWJhci1jbG9zZScpLnRyaWdnZXIoJ2NsaWNrJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoJy52aXBJbnNpZGVyLWRsZy51aS1kaWFsb2cuZXhpc3Rpbmd1c2VyZGxnIGJ1dHRvbi5jbG9zZSwgLnZpcEluc2lkZXItZGxnLnVpLWRpYWxvZy5uZXd1c2VyZGxnIGJ1dHRvbi5jbG9zZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcudWktZGlhbG9nJykuZmluZCgnLnVpLWRpYWxvZy10aXRsZWJhci1jbG9zZScpLnRyaWdnZXIoJ2NsaWNrJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJHZpcGluc2lkZXIuZmluZCgnLnRyaWdnZXJfc2luZ2xldXBsb2FkIGlucHV0W3R5cGU9XCJmaWxlXCJdJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5jbG9zZXN0KCcudmlwLXVwbG9hZGZvcm0taG9sZGVyJykuZmluZCgnLmVtcHR5LWF0dGFjaG1lbnQtZXJyb3InKS5pcygnOnZpc2libGUnKSkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcudmlwLXVwbG9hZGZvcm0taG9sZGVyJykuZmluZCgnLmVtcHR5LWF0dGFjaG1lbnQtZXJyb3InKS5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy9WSVAgaW5zaWRlciBkcm9wZG93biBjaGFuZ2VcclxuICAgICAgICAkKCcuZmllbGRzdGFmZiBmb3JtJykuZmluZCgnLmR5bi1jYXQtc2VsZWN0IHNlbGVjdCcpLm9mZignY2hhbmdlJykub24oJ2NoYW5nZScsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdmFyICRjdXJPYmogPSAkKHRoaXMpO1xyXG4gICAgICAgICAgICB2YXIgcHJvZGlkID0gJyc7XHJcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmNsb3Nlc3QoJy5keW4tY2F0LXNlbGVjdCcpLmZpbmQoJy5zYkhvbGRlcicpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZFRleHQgPSAkKHRoaXMpLmNsb3Nlc3QoJy5keW4tY2F0LXNlbGVjdCcpLmZpbmQoJy5zYlNlbGVjdG9yJykudGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgcHJvZGlkID0gJCh0aGlzKS5maW5kKCdvcHRpb25bbGFiZWw9XCInICsgc2VsZWN0ZWRUZXh0ICsgJ1wiXScpLmF0dHIoJ3ZhbHVlJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBwcm9kaWQgPSAkKHRoaXMpLmZpbmQoJzpzZWxlY3RlZCcpLnZhbCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vYWxlcnQoJCh0aGlzKS5maW5kKCc6c2VsZWN0ZWQnKS52YWwoKSk7XHJcbiAgICAgICAgICAgIHZhciB1cmwgPSBVcmxzLnZpcEluc2lkZXJEeW5hbWljRm9ybXM7XHJcblxyXG4gICAgICAgICAgICBpZiAocHJvZGlkID09ICdmaWVsZCcgfHwgcHJvZGlkID09ICdzcG9ydHMnIHx8IHByb2RpZCA9PSAnaW5kdXN0cnknIHx8IHByb2RpZCA9PSAnZG9uYXRpb24nKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvZGlkID09ICdzcG9ydHMnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLnZpcC11cGxvYWRmb3JtLWhvbGRlcicpLmZpbmQoJ3NwYW4udGV4dC1ob2xkZXItdXBsb2FkJykucmVwbGFjZVdpdGgoJzxzcGFuIGNsYXNzPVwidGV4dC1ob2xkZXItdXBsb2FkXCI+KlVwbG9hZCBCdXNpbmVzcyBDYXJkIG9yIFBheSBTdHViPC9zcGFuPicpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy52aXAtdXBsb2FkZm9ybS1ob2xkZXInKS5maW5kKCcudHJpZ2dlcl9zaW5nbGV1cGxvYWQgLmVtcHR5LWF0dGFjaG1lbnQtZXJyb3InKS50ZXh0KCdQbGVhc2UgdXBsb2FkIEJ1c2luZXNzIGNhcmQgb3IgUGF5IFN0dWInKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChwcm9kaWQgPT0gJ2ZpZWxkJykge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy52aXAtdXBsb2FkZm9ybS1ob2xkZXInKS5maW5kKCdzcGFuLnRleHQtaG9sZGVyLXVwbG9hZCcpLnJlcGxhY2VXaXRoKCc8c3BhbiBjbGFzcz1cInRleHQtaG9sZGVyLXVwbG9hZFwiPipBdHRhY2ggUmVzdW1lPC9zcGFuPicpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy52aXAtdXBsb2FkZm9ybS1ob2xkZXInKS5maW5kKCcudHJpZ2dlcl9zaW5nbGV1cGxvYWQgLmVtcHR5LWF0dGFjaG1lbnQtZXJyb3InKS50ZXh0KCdQbGVhc2UgdXBsb2FkIHlvdXIgUmVzdW1lJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvZGlkID09ICdpbmR1c3RyeScpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcudmlwLXVwbG9hZGZvcm0taG9sZGVyJykuZmluZCgnc3Bhbi50ZXh0LWhvbGRlci11cGxvYWQnKS5yZXBsYWNlV2l0aCgnPHNwYW4gY2xhc3M9XCJ0ZXh0LWhvbGRlci11cGxvYWRcIj4qVXBsb2FkIEJ1c2luZXNzIENhcmQ8L3NwYW4+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLnZpcC11cGxvYWRmb3JtLWhvbGRlcicpLmZpbmQoJy50cmlnZ2VyX3NpbmdsZXVwbG9hZCAuZW1wdHktYXR0YWNobWVudC1lcnJvcicpLnRleHQoJ1BsZWFzZSB1cGxvYWQgYSBCdXNpbmVzcyBDYXJkJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvZGlkID09ICdkb25hdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcudmlwLXVwbG9hZGZvcm0taG9sZGVyJykuZmluZCgnc3Bhbi50ZXh0LWhvbGRlci11cGxvYWQnKS5yZXBsYWNlV2l0aCgnPHNwYW4gY2xhc3M9XCJ0ZXh0LWhvbGRlci11cGxvYWRcIj5VcGxvYWQgRmx5ZXI8L3NwYW4+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8kKCcudmlwLXVwbG9hZGZvcm0taG9sZGVyJykuZmluZCgnLnRyaWdnZXJfc2luZ2xldXBsb2FkIC5lbXB0eS1hdHRhY2htZW50LWVycm9yJykudGV4dCgnUGxlYXNlIHVwbG9hZCBhIEZseWVyJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8kKCcudmlwLXVwbG9hZGZvcm0taG9sZGVyJykuZmluZCgnc3Bhbi50ZXh0LWhvbGRlci11cGxvYWQnKS5jbG9zZXN0KCdmb3JtJykucmVtb3ZlQ2xhc3MoJ3RyaWdnZXJfc2luZ2xldXBsb2FkJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkKCcudmlwLXVwbG9hZGZvcm0taG9sZGVyJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICQoJy52aXAtdXBsb2FkZm9ybS1ob2xkZXInKS5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAocHJvZGlkICE9IHVuZGVmaW5lZCAmJiBwcm9kaWQgIT0gbnVsbCAmJiBwcm9kaWQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdXJsID0gdXJsICsgJz9wcm9kaWQ9JyArIHByb2RpZDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcHJvZ3Jlc3Muc2hvdygkKCcuZmllbGRzdGFmZiBmb3JtJykpO1xyXG4gICAgICAgICAgICBhamF4LmxvYWQoe1xyXG4gICAgICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoKCQoJy5maWVsZHN0YWZmIGZvcm0gLmR5bmFtaWMtY29udGVudC1ob2xkZXItdmlwJykgIT0gdW5kZWZpbmVkICYmICQoJy5maWVsZHN0YWZmIGZvcm0gLmR5bmFtaWMtY29udGVudC1ob2xkZXItdmlwJykubGVuZ3RoID4gMCkgJiYgKCQoZGF0YSkuZmlsdGVyKCcudmlwaW5zaWRlci1vbmxvYWQtZGF0YS1ob2xkZXInKSAhPSB1bmRlZmluZWQgJiYgJChkYXRhKS5maWx0ZXIoJy52aXBpbnNpZGVyLW9ubG9hZC1kYXRhLWhvbGRlcicpLmxlbmd0aCA+IDApKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5maWVsZHN0YWZmIGZvcm0gLmR5bmFtaWMtY29udGVudC1ob2xkZXItdmlwJykuaHRtbCgkKGRhdGEpLmZpbHRlcignLnZpcGluc2lkZXItb25sb2FkLWRhdGEtaG9sZGVyJykuaHRtbCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnRyaWdnZXJfc2luZ2xldXBsb2FkIC5wcm9faWQnKS52YWwocHJvZGlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGVPYmogPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlT2JqLnNldFRpbWUoZGF0ZU9iai5nZXRUaW1lKCkgKyAoNjAgKiA2MCAqIDEwMDApKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuY29va2llID0gJ3Byb2djb29raWU9JyArIHByb2RpZCArICc7IGV4cGlyZXM9JyArIGRhdGVPYmoudG9VVENTdHJpbmcoKSArICc7IHBhdGg9Lyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpID4gMTIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFwYWxhaW5zaWRlci5jdXN0b21zZWxlY3RldmVudHNiKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmFwYWxhaW5zaWRlci50ZXh0YXJlYXJhcGFsYSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByYXBhbGFpbnNpZGVyLmNsZWFyYnV0dG9uZnVuY3QoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmFwYWxhaW5zaWRlci5mb3JtUHJlcGFyZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtU2VsZWN0b3I6ICcjVmlwaW5zaWRlckZvcm0nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWVTZWxlY3RvcjogJyNWSVBJbnNpZGVyLWZvcm0tc2JtdC1pZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnb3BhY2l0eSdcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkY3VyT2JqLmNsb3Nlc3QoJy5keW4tY2F0LXNlbGVjdCcpLmZpbmQoJy5zYkhvbGRlcicpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZFRleHQgPSAkY3VyT2JqLmNsb3Nlc3QoJy5keW4tY2F0LXNlbGVjdCcpLmZpbmQoJy5zYlNlbGVjdG9yJykudGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZGlkID0gJGN1ck9iai5maW5kKCdvcHRpb25bbGFiZWw9XCInICsgc2VsZWN0ZWRUZXh0ICsgJ1wiXScpLmF0dHIoJ3ZhbHVlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kaWQgPSAkY3VyT2JqLmZpbmQoJzpzZWxlY3RlZCcpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9kaWQgIT0gJ1NlbGVjdCBBIFByb2dyYW0nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuZHluLWNhdC1zZWxlY3QnKS5maW5kKCcubGFiZWwnKS5yZW1vdmVDbGFzcygnZXJyb3JvY2N1cmVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuZHluLWNhdC1zZWxlY3QnKS5maW5kKCcubGFiZWwgc3Bhbi5lcnJvcmNsaWVudC5pbnB1dGxhYmVsJykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuZHluLWNhdC1zZWxlY3QnKS5maW5kKCcubGFiZWwgc3BhbicpLnJlbW92ZUNsYXNzKCdpbnB1dGxhYmVsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuZHluLWNhdC1zZWxlY3QnKS5maW5kKCdzZWxlY3QnKS5yZW1vdmVDbGFzcygnZXJyb3JjbGllbnQnKS5hZGRDbGFzcygndmFsaWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJCgnLmZpbGVsaXN0JykuZmluZCgndWwnKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuZmlsZWxpc3QnKS5maW5kKCd1bCcpLmNzcyh7J2Rpc3BsYXknOiAnbm9uZSd9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgLy8gc3ViIG5hbWVzcGFjZSBhcHAuYWpheC4qIGNvbnRhaW5zIGFwcGxpY2F0aW9uIHNwZWNpZmljIGFqYXhcclxuICAgIC8vIGNvbXBvbmVudHNcclxuICAgIGFqYXg6IHtcclxuICAgICAgICBTdWNjZXNzOiAnc3VjY2VzcycsXHJcbiAgICAgICAgY3VycmVudFJlcXVlc3RzOiB7fSwgLy8gcmVxdWVzdCBjYWNoZVxyXG5cclxuICAgICAgICAvLyBhamF4IHJlcXVlc3QgdG8gZ2V0IGpzb24gcmVzcG9uc2VcclxuICAgICAgICAvLyBAcGFyYW0gLSByZXFOYW1lIC0gU3RyaW5nIC0gbmFtZSBvZiB0aGUgcmVxdWVzdFxyXG4gICAgICAgIC8vIEBwYXJhbSAtIGFzeW5jIC0gYm9vbGVhbiAtIGFzeW5jaHJvbm91cyBvciBub3RcclxuICAgICAgICAvLyBAcGFyYW0gLSB1cmwgLSBTdHJpbmcgLSB1cmkgZm9yIHRoZSByZXF1ZXN0XHJcbiAgICAgICAgLy8gQHBhcmFtIC0gZGF0YSAtIG5hbWUvdmFsdWUgcGFpciBkYXRhIHJlcXVlc3RcclxuICAgICAgICAvLyBAcGFyYW0gLSBjYWxsYmFjayAtIGZ1bmN0aW9uIC0gY2FsbGJhY2sgZnVuY3Rpb24gdG8gYmUgY2FsbGVkXHJcbiAgICAgICAgZ2V0SnNvbjogZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgdmFyIHRoaXNBamF4ID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgIC8vIGRvIG5vdCBib3RoZXIgaWYgdGhlIHJlcXVlc3QgaXMgYWxyZWFkeSBpbiBwcm9ncmVzc1xyXG4gICAgICAgICAgICAvLyBhbmQgbGV0IGdvIG51bGwgcmVxTmFtZVxyXG4gICAgICAgICAgICBpZiAoIW9wdGlvbnMucmVxTmFtZSB8fCAhdGhpcy5jdXJyZW50UmVxdWVzdHNbb3B0aW9ucy5yZXFOYW1lXSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UmVxdWVzdHNbb3B0aW9ucy5yZXFOYW1lXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5hc3luYyA9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuYXN5bmMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gbWFrZSB0aGUgc2VydmVyIGNhbGxcclxuICAgICAgICAgICAgICAgIGpRdWVyeS5hamF4KHtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBvcHRpb25zLnVybCxcclxuICAgICAgICAgICAgICAgICAgICBjYWNoZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBhc3luYzogb3B0aW9ucy5hc3luYyxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBvcHRpb25zLmRhdGEsXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXNwb25zZSwgdGV4dFN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzQWpheC5jdXJyZW50UmVxdWVzdHNbb3B0aW9ucy5yZXFOYW1lXSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5TdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBoYW5kbGUgZmFpbHVyZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmNhbGxiYWNrKHJlc3BvbnNlLCB0ZXh0U3RhdHVzKTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHJlcXVlc3QsIHRleHRTdGF0dXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRleHRTdGF0dXMgPT09ICdwYXJzZXJlcnJvcicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KFJlc291cmNlcy5CQURfUkVTUE9OU0UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmNhbGxiYWNrKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge31cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvLyBhamF4IHJlcXVlc3QgdG8gbG9hZCBodG1sIHJlc3BvbnNlIGluIGEgZ2l2ZW4gY29udGFpbmVyXHJcbiAgICAgICAgLy8gQHBhcmFtIC0gcmVxTmFtZSAtIFN0cmluZyAtIG5hbWUgb2YgdGhlIHJlcXVlc3RcclxuICAgICAgICAvLyBAcGFyYW0gLSB1cmwgLSBTdHJpbmcgLSB1cmkgZm9yIHRoZSByZXF1ZXN0XHJcbiAgICAgICAgLy8gQHBhcmFtIC0gZGF0YSAtIG5hbWUvdmFsdWUgcGFpciBkYXRhIHJlcXVlc3RcclxuICAgICAgICAvLyBAcGFyYW0gLSBjYWxsYmFjayAtIGZ1bmN0aW9uIC0gY2FsbGJhY2sgZnVuY3Rpb24gdG8gYmUgY2FsbGVkXHJcbiAgICAgICAgLy8gQHBhcmFtIC0gc2VsZWN0b3IgLSBzdHJpbmcgLSBpZCBvZiB0aGUgY29udGFpbmVyIGRpdi9zcGFuXHJcbiAgICAgICAgLy8gKCNteWNvbnRhaW5lcikgLSBpdCBtdXN0IHN0YXJ0IHdpdGggJyMnXHJcbiAgICAgICAgbG9hZDogZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciB0aGlzQWpheCA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICAvLyBkbyBub3QgYm90aGVyIGlmIHRoZSByZXF1ZXN0IGlzIGFscmVhZHkgaW4gcHJvZ3Jlc3NcclxuICAgICAgICAgICAgLy8gYW5kIGxldCBnbyBudWxsIHJlcW5hbWVcclxuICAgICAgICAgICAgaWYgKCFvcHRpb25zLnJlcU5hbWUgfHwgIXRoaXMuY3VycmVudFJlcXVlc3RzW29wdGlvbnMucmVxTmFtZV0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFJlcXVlc3RzW29wdGlvbnMucmVxTmFtZV0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgLy8gbWFrZSB0aGUgc2VydmVyIGNhbGxcclxuICAgICAgICAgICAgICAgIGpRdWVyeS5hamF4KHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2h0bWwnLFxyXG4gICAgICAgICAgICAgICAgICAgIHVybDogb3B0aW9ucy51cmwsXHJcbiAgICAgICAgICAgICAgICAgICAgY2FjaGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogb3B0aW9ucy5kYXRhLFxyXG5cclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzcG9uc2UsIHRleHRTdGF0dXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc0FqYXguY3VycmVudFJlcXVlc3RzW29wdGlvbnMucmVxTmFtZV0gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnNlbGVjdG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkob3B0aW9ucy5zZWxlY3RvcikuaHRtbChyZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmNhbGxiYWNrICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5jYWxsYmFjayhyZXNwb25zZSwgdGV4dFN0YXR1cylcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHJlcXVlc3QsIHRleHRTdGF0dXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRleHRTdGF0dXMgPT09ICdwYXJzZXJlcnJvcicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KFJlc291cmNlcy5CQURfUkVTUE9OU0UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmNhbGxiYWNrKG51bGwsIHRleHRTdGF0dXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICB2aXBpbnNpZGVyZXZlbnRzOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyICR2aXBpbnNpZGVyID0gJCgnLnZpcGluc2lkZXItY29udGFpbmVyJyk7XHJcbiAgICAgICAgICAgIC8vdmlwZm9ybSA9ICQoJy5WaXBpbnNpZGVyRm9ybScpO1xyXG4gICAgICAgICR2aXBpbnNpZGVyLmZpbmQoJy50cmlnZ2VyX3NpbmdsZXVwbG9hZCBpbnB1dFt0eXBlPVwiZmlsZVwiXScpLnVuYmluZCgnY2hhbmdlJykuY2hhbmdlKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKSxcclxuICAgICAgICAgICAgICAgIGRhdGEgPSBuZXcgRm9ybURhdGEoKSxcclxuICAgICAgICAgICAgICAgIGZpbGVzID0gJCgnI2ZpbGVpZCcpLmdldCgwKS5maWxlcyxcclxuICAgICAgICAgICAgICAgIGZvcm0gPSAkKHRoaXMpLmNsb3Nlc3QoJ2Zvcm0nKTtcclxuICAgICAgICAgICAgLy9pZigkKHRoaXMpLmhhc0NsYXNzKCdlcnJvcmNsaWVudCcpKXsgJCh0aGlzKS50cmlnZ2VyKCdibHVyJyk7IH1cclxuICAgICAgICAgICAgdmFyIHRvdGFsc2l6ZSA9IDA7XHJcbiAgICAgICAgICAgIHRvdGFsc2l6ZSA9ICQoJy52aXAtdXBsb2FkZm9ybS1ob2xkZXIgLnJlbW92ZV9zaW5nbGV1cGxvYWQgc3Bhbi51cGRhdGV0ZXh0JykuZXEoMCkuYXR0cigndmFsdWUnKTtcclxuXHJcbiAgICAgICAgICAgIGlmICgodGhpcy5maWxlc1swXS5zaXplIC8gMTAyNCAvIDEwMjQpID4gMiB8fCB0b3RhbHNpemUgPiAyKSB7XHJcbiAgICAgICAgICAgICAgICAkdmlwaW5zaWRlci5maW5kKCcudmlwLXVwbG9hZGZvcm0taG9sZGVyIC5maWxlLXNpemUtZXhjZWVkLWVycm9yJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGV4dGVuc2lvbiA9IHRoaXMuZmlsZXNbMF0ubmFtZS5zcGxpdCgnLicpWzFdLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgIGlmICgoZXh0ZW5zaW9uICE9ICdqcGcnKSAmJiAoZXh0ZW5zaW9uICE9ICdwbmcnKSAmJiAoZXh0ZW5zaW9uICE9ICdQTkcnKSAmJiAoZXh0ZW5zaW9uICE9ICdqcGVnJykgJiYgKGV4dGVuc2lvbiAhPSAncGRmJykgJiYgKGV4dGVuc2lvbiAhPSAnZ2lmJykgJiYgKGV4dGVuc2lvbiAhPSAnZG9jJykgJiYgKGV4dGVuc2lvbiAhPSAnZG9jeCcpICYmIChleHRlbnNpb24gIT0gJ3BhZ2VzJykpIHtcclxuICAgICAgICAgICAgICAgICR2aXBpbnNpZGVyLmZpbmQoJy52aXAtdXBsb2FkZm9ybS1ob2xkZXIgLmZpbGUtZm9ybWF0LWV4Y2VlZC1lcnJvcicpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICR2aXBpbnNpZGVyLmZpbmQoJy52aXAtdXBsb2FkZm9ybS1ob2xkZXIgLmZpbGUtZm9ybWF0LWV4Y2VlZC1lcnJvcicpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgICR2aXBpbnNpZGVyLmZpbmQoJy52aXAtdXBsb2FkZm9ybS1ob2xkZXIgLmZpbGUtc2l6ZS1leGNlZWQtZXJyb3InKS5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICBmb3JtLmZpbmQoJy5wcm9ncmVzc2JhcicpLmZhZGVJbig1MDApO1xyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmaWxlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgZGF0YS5hcHBlbmQoZmlsZXNbaV0ubmFtZSwgZmlsZXNbaV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHhoci51cGxvYWQuYWRkRXZlbnRMaXN0ZW5lcigncHJvZ3Jlc3MnLCBmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXZ0Lmxlbmd0aENvbXB1dGFibGUpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcHJvZ3Jlc3MgPSBNYXRoLnJvdW5kKGV2dC5sb2FkZWQgKiAxMDAgLyBldnQudG90YWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcm0uZmluZCgnLnByb2dyZXNzYmFyIC5jb3VudCcpLnRleHQocHJvZ3Jlc3MgKyAnJSBDb21wbGV0ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcm0uZmluZCgnLnByb2dyZXNzYmFyIC5wcm9ncmVzc2xvYWQnKS53aWR0aChwcm9ncmVzcyArICclJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIGZhbHNlKTtcclxuICAgICAgICAgICAgeGhyLm9wZW4oJ1BPU1QnLCBmb3JtLmF0dHIoJ2FjdGlvbicpKTtcclxuICAgICAgICAgICAgeGhyLnNlbmQoZGF0YSk7XHJcblxyXG4gICAgICAgICAgICB4aHIudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRlbmQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBmb3JtLmZpbmQoJyNmaWxlaWQnKS52YWwoJycpO1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9ybS5maW5kKCcucHJvZ3Jlc3NiYXInKS5mYWRlT3V0KDEwMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtLmZpbmQoJy5wcm9ncmVzc2JhciAuY291bnQnKS50ZXh0KCcwJScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtLmZpbmQoJy5wcm9ncmVzc2JhciAucHJvZ3Jlc3Nsb2FkJykud2lkdGgoJzAnKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0sIDUwMCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQoJy52aXAtdXBsb2FkZm9ybS1ob2xkZXIgLmZpbGVsaXN0JykuaHRtbCh4aHIucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICAgICAgICAgIHJhcGFsYWluc2lkZXIudmlwaW5zaWRlcmV2ZW50cygpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPD0gNzY3KSB7XHJcbiAgICAgICAgICAgICQoJy5pbnNpZGVyX2JvZHkucmFwYWxhX2RldmljZSBbbWF4bGVuZ3RoXScpLmJpbmQoJ2tleXByZXNzIGtleXVwJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgICAgIHZhciB2YWwgPSAkdGhpcy52YWwoKTtcclxuICAgICAgICAgICAgICAgIHZhciB2YWxMZW5ndGggPSB2YWwubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgdmFyIG1heENvdW50ID0gJHRoaXMuYXR0cignbWF4bGVuZ3RoJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsTGVuZ3RoID4gbWF4Q291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAkdGhpcy52YWwoJHRoaXMudmFsKCkuc3Vic3RyaW5nKDAsIG1heENvdW50KSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJHZpcGluc2lkZXIuZmluZCgnLnJlbW92ZScpLnVuYmluZCgnY2xpY2snKS5jbGljayhmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHZhciBmaWxlbmFtZSA9ICQodGhpcykuYXR0cignZGF0YS1maWxlJyk7XHJcbiAgICAgICAgICAgIHZhciBmb3JtID0gJCh0aGlzKS5jbG9zZXN0KCdmb3JtJyk7XHJcbiAgICAgICAgICAgIHZhciB1cmwgPSBmb3JtLmF0dHIoJ2FjdGlvbicpO1xyXG4gICAgICAgICAgICB2YXIgZmluYWxVUkwgPSB1dGlsLmFwcGVuZFBhcmFtVG9VUkwodXJsLCAnZmlsZW5hbWUnLCBmaWxlbmFtZSk7XHJcbiAgICAgICAgICAgIGFqYXgubG9hZCh7XHJcbiAgICAgICAgICAgICAgICB1cmw6IGZpbmFsVVJMLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLnZpcC11cGxvYWRmb3JtLWhvbGRlciAuZmlsZWxpc3QnKS5odG1sKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJhcGFsYWluc2lkZXIudmlwaW5zaWRlcmV2ZW50cygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIGZvcm1QcmVwYXJlOiBmdW5jdGlvbiAob3B0cykge1xyXG5cclxuICAgICAgICB2YXIgJGZvcm0sICRjb250aW51ZSwgJHJlcXVpcmVkSW5wdXRzLCB2YWxpZGF0b3I7XHJcblxyXG4gICAgICAgIHZhciBoYXNFbXB0eVJlcXVpcmVkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBmaWx0ZXIgb3V0IG9ubHkgdGhlIHZpc2libGUgZmllbGRzXHJcbiAgICAgICAgICAgIHZhciByZXF1aXJlZFZhbHVlcyA9ICRyZXF1aXJlZElucHV0cy5maWx0ZXIoJzp2aXNpYmxlJykubWFwKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAkKHRoaXMpLnZhbCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuICQuaW5BcnJheSgnJywgcmVxdWlyZWRWYWx1ZXMpICE9IC0xO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciB2YWxpZGF0ZUZvcm0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIG9ubHkgdmFsaWRhdGUgZm9ybSB3aGVuIGFsbCByZXF1aXJlZCBmaWVsZHMgYXJlIGZpbGxlZCB0byBhdm9pZFxyXG4gICAgICAgICAgICAvLyB0aHJvd2luZyBlcnJvcnMgb24gZW1wdHkgZm9ybVxyXG4gICAgICAgICAgICBpZiAoIWhhc0VtcHR5UmVxdWlyZWQoKSAmJiB2YWxpZGF0b3IuZm9ybSgpKSB7XHJcbiAgICAgICAgICAgICAgICAkY29udGludWUucmVtb3ZlQXR0cignZGlzYWJsZWQnKS5yZW1vdmVDbGFzcygnYnV0dG9uX2ludmlzaWJsZScpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdHMudHlwZSA9PSAnZGlzYWJsZScpIHtcclxuICAgICAgICAgICAgICAgICAgICAkY29udGludWUuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGNvbnRpbnVlLmFkZENsYXNzKCdidXR0b25faW52aXNpYmxlJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgdmFsaWRhdGVFbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCQodGhpcykudmFsKCkgPT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0cy50eXBlID09ICdkaXNhYmxlJykge1xyXG4gICAgICAgICAgICAgICAgICAgICRjb250aW51ZS5hdHRyKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkY29udGludWUuYWRkQ2xhc3MoJ2J1dHRvbl9pbnZpc2libGUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIGVuYWJsZSBjb250aW51ZSBidXR0b24gb24gbGFzdCByZXF1aXJlZCBmaWVsZCB0aGF0IGlzIHZhbGlkXHJcbiAgICAgICAgICAgICAgICAvLyBvbmx5IHZhbGlkYXRlIHNpbmdsZSBmaWVsZFxyXG4gICAgICAgICAgICAgICAgaWYgKHZhbGlkYXRvci5lbGVtZW50KHRoaXMpICYmICFoYXNFbXB0eVJlcXVpcmVkKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAkY29udGludWUucmVtb3ZlQXR0cignZGlzYWJsZWQnKS5yZW1vdmVDbGFzcygnYnV0dG9uX2ludmlzaWJsZScpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0cy50eXBlID09ICdkaXNhYmxlJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkY29udGludWUuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkY29udGludWUuYWRkQ2xhc3MoJ2J1dHRvbl9pbnZpc2libGUnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vdHlwZSBvcHRpb25hbCB2YWx1ZSBkaXNhYmxlIG9yIG9wYWNpdHlcclxuICAgICAgICAkZm9ybSA9ICQob3B0cy5mb3JtU2VsZWN0b3IpO1xyXG4gICAgICAgICRjb250aW51ZSA9ICQob3B0cy5jb250aW51ZVNlbGVjdG9yKTtcclxuICAgICAgICB2YWxpZGF0b3IgPSAkZm9ybS52YWxpZGF0ZSgpO1xyXG4gICAgICAgICRyZXF1aXJlZElucHV0cyA9ICQoJy5yZXF1aXJlZCcsICRmb3JtKS5maWx0ZXIoJzppbnB1dCcpO1xyXG4gICAgICAgIHZhbGlkYXRlRm9ybSgpO1xyXG4gICAgICAgIC8vIHN0YXJ0IGxpc3RlbmluZ1xyXG4gICAgICAgICRyZXF1aXJlZElucHV0cy5jaGFuZ2UodmFsaWRhdGVFbCk7XHJcbiAgICAgICAgJHJlcXVpcmVkSW5wdXRzLmZpbHRlcignaW5wdXQnKS5ibHVyKHZhbGlkYXRlRWwpO1xyXG4gICAgfSxcclxuXHJcbiAgICBjdXN0b21zZWxlY3RldmVudHNiOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCEkKCdib2R5JykuaGFzQ2xhc3MoJ3JhcGFsYV9kZXZpY2UnKSkge1xyXG4gICAgICAgICAgICB2YXIgJGNvbiA9ICQoJ2JvZHknKTtcclxuICAgICAgICAgICAgJGNvbi5maW5kKCcuY3VzdG9taXplZC1zZWxlY3QnKS5maW5kKCdzZWxlY3QnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmF0dHIoJ2Rpc2FibGVkJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnNlbGVjdGJveCgnZGlzYWJsZScpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnNlbGVjdGJveCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJCgnLnNiT3B0aW9ucyBsaTpsYXN0JykuYWRkQ2xhc3MoJ2xhc3QnKTtcclxuICAgICAgICAgICAgfSkuZm9jdXMoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5uZXh0KCcuc2JIb2xkZXInKS50cmlnZ2VyKCdmb2N1cycpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0sXHJcblxyXG4gICAgdGV4dGFyZWFyYXBhbGE6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCd0ZXh0YXJlYVttYXhsZW5ndGhdJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNoYXJjb3VudCgkKHRoaXMpKTtcclxuICAgICAgICAgICAgLy8gdHJpZ2dlciB0aGUga2V5ZG93biBldmVudCBzbyB0aGF0IGFueSBleGlzdGluZyBjaGFyYWN0ZXIgZGF0YSBpcyBjYWxjdWxhdGVkXHJcbiAgICAgICAgfSkub24oJ2tleXVwIGtleXByZXNzJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjaGFyY291bnQoJCh0aGlzKSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGNoYXJjb3VudCgkdGhpcykge1xyXG4gICAgICAgICAgICB2YXIgY2hhcmFjdGVyTGltaXQgPSAnMTIwMCc7XHJcbiAgICAgICAgICAgIHZhciBjaGFyUmVtYWlucyA9IGNoYXJhY3RlckxpbWl0IC0gJHRoaXMudmFsKCkudHJpbSgpLmxlbmd0aDtcclxuICAgICAgICAgICAgLy92YXIgY2hhckNvdW50Q29udGFpbmVyID0gJyc7XHJcbiAgICAgICAgICAgIHZhciBjaGFyQ291bnRIdG1sID0gJ0NoYXJhY3RlcnMgUmVtYWluaW5nICcgKyBjaGFyUmVtYWlucztcclxuICAgICAgICAgICAgaWYgKCR0aGlzLmhhc0NsYXNzKCd2aXAtdGV4dGFyZWEnKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCR0aGlzLm5leHQoJ2Rpdi5jaGFyLWNvdW50JykubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnPGRpdiBjbGFzcz1cImNoYXItY291bnRcIi8+JykuaW5zZXJ0QWZ0ZXIoJHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJHRoaXMubmV4dCgnZGl2LmNoYXItY291bnQnKS5odG1sKGNoYXJDb3VudEh0bWwpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKCR0aGlzLnByZXYoJ2Rpdi5jaGFyLWNvdW50JykubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnPGRpdiBjbGFzcz1cImNoYXItY291bnRcIi8+JykuaW5zZXJ0QmVmb3JlKCR0aGlzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICR0aGlzLnByZXYoJ2Rpdi5jaGFyLWNvdW50JykuaHRtbChjaGFyQ291bnRIdG1sKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9LFxyXG5cclxuICAgIGNsZWFyYnV0dG9uZnVuY3Q6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoJCgnI2RpYWxvZ2NvbnRhaW5lcjEyMycpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgJCgnI2RpYWxvZ2NvbnRhaW5lcjEyMycpLmZpbmQoJy5mb3JtZmllbGQnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmZpbmQoJy5maWVsZC13cmFwcGVyIC5jbGVhcmJ1dHRvbicpLmxlbmd0aCA9PSAwICYmICQodGhpcykuZmluZCgnLmZpZWxkLXdyYXBwZXIgaW5wdXRbdHlwZT1cInRleHRcIl0nKS5sZW5ndGggPiAwIHx8ICQodGhpcykuZmluZCgnLmZpZWxkLXdyYXBwZXIgaW5wdXRbdHlwZT1cInBhc3N3b3JkXCJdJykubGVuZ3RoID4gMCB8fCAkKHRoaXMpLmZpbmQoJy5maWVsZC13cmFwcGVyIHRleHRhcmVhJykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLmZpZWxkLXdyYXBwZXInKS5hcHBlbmQoJzxhIGNsYXNzPVwiY2xlYXJidXR0b25cIj48L2E+Jyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkKCdib2R5JykuZmluZCgnI2RpYWxvZ2NvbnRhaW5lcjEyMyAuZmllbGQtd3JhcHBlciBpbnB1dCwgdGV4dGFyZWEnKS5vbigna2V5dXAgaW5wdXQgYmx1cicsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCQodGhpcykudmFsKCkgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS52YWwoKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnYS5jbGVhcmJ1dHRvbicpLnNob3coKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnYS5jbGVhcmJ1dHRvbicpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKCdib2R5JykuZmluZCgnI2RpYWxvZ2NvbnRhaW5lcjEyMyAuZmllbGQtd3JhcHBlciBhLmNsZWFyYnV0dG9uJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgY2hhcmFjdGVyTGltaXQgPSAnQ2hhcmFjdGVycyBSZW1haW5pbmcgMTIwMCc7XHJcbiAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJ2lucHV0JykudmFsKCcnKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgndGV4dGFyZWEnKS52YWwoJycpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5maWVsZC13cmFwcGVyJykuZmluZCgnc3BhbicpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5maWVsZC13cmFwcGVyJykuZmluZCgnLnJlcXVpcmVkJykucmVtb3ZlQ2xhc3MoJ2Vycm9yY2xpZW50Jyk7XHJcbiAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJ2EuY2xlYXJidXR0b24nKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCAnKS5maW5kKCcuZm9ybS1yb3cnKS5yZW1vdmVDbGFzcygnaW5wdXRsYWJlbCcpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcuZm9ybS1yb3cgLCAubGFiZWwgc3BhbicpLnJlbW92ZUNsYXNzKCdpbnB1dGxhYmVsJyk7XHJcbiAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJ3NwYW4ubG9nZXJyb3IgLCAuZXhpc3RpbmdfcmVnaXN0ZXInKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICQoJ2Rpdi5jaGFyLWNvdW50JykuaHRtbChjaGFyYWN0ZXJMaW1pdCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG59O1xyXG5tb2R1bGUuZXhwb3J0cyA9IHJhcGFsYWluc2lkZXI7XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuXHJcbnZhciBhZGRQcm9kdWN0VG9DYXJ0ID0gcmVxdWlyZSgnLi9wcm9kdWN0L2FkZFRvQ2FydCcpLFxyXG4gICAgYWpheCA9IHJlcXVpcmUoJy4uL2FqYXgnKSxcclxuICAgIHF1aWNrdmlldyA9IHJlcXVpcmUoJy4uL3F1aWNrdmlldycpLFxyXG4gICAgYWNjb3VudCA9IHJlcXVpcmUoJy4vYWNjb3VudCcpLFxyXG4gICAgdXRpbCA9IHJlcXVpcmUoJy4uL3V0aWwnKTtcclxuXHJcbi8qKlxyXG4gKiBAZnVuY3Rpb25cclxuICogQGRlc2NyaXB0aW9uIExvYWRzIGFkZHJlc3MgZGV0YWlscyB0byBhIGdpdmVuIGFkZHJlc3MgYW5kIGZpbGxzIHRoZSBhZGRyZXNzIGZvcm1cclxuICogQHBhcmFtIHtTdHJpbmd9IGFkZHJlc3NJRCBUaGUgSUQgb2YgdGhlIGFkZHJlc3MgdG8gd2hpY2ggZGF0YSB3aWxsIGJlIGxvYWRlZFxyXG4gKi9cclxuZnVuY3Rpb24gcG9wdWxhdGVGb3JtKGFkZHJlc3NJRCwgJGZvcm0pIHtcclxuICAgIC8vIGxvYWQgYWRkcmVzcyBkZXRhaWxzXHJcbiAgICB2YXIgdXJsID0gVXJscy5naWZ0UmVnQWRkICsgYWRkcmVzc0lEO1xyXG4gICAgYWpheC5nZXRKc29uKHtcclxuICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgaWYgKCFkYXRhIHx8ICFkYXRhLmFkZHJlc3MpIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5hbGVydChSZXNvdXJjZXMuUkVHX0FERFJfRVJST1IpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGZpbGwgdGhlIGZvcm1cclxuICAgICAgICAgICAgJGZvcm0uZmluZCgnW25hbWUkPVwiX2FkZHJlc3NpZFwiXScpLnZhbChkYXRhLmFkZHJlc3MuSUQpO1xyXG4gICAgICAgICAgICAkZm9ybS5maW5kKCdbbmFtZSQ9XCJfZmlyc3RuYW1lXCJdJykudmFsKGRhdGEuYWRkcmVzcy5maXJzdE5hbWUpO1xyXG4gICAgICAgICAgICAkZm9ybS5maW5kKCdbbmFtZSQ9XCJfbGFzdG5hbWVcIl0nKS52YWwoZGF0YS5hZGRyZXNzLmxhc3ROYW1lKTtcclxuICAgICAgICAgICAgJGZvcm0uZmluZCgnW25hbWUkPVwiX2FkZHJlc3MxXCJdJykudmFsKGRhdGEuYWRkcmVzcy5hZGRyZXNzMSk7XHJcbiAgICAgICAgICAgICRmb3JtLmZpbmQoJ1tuYW1lJD1cIl9hZGRyZXNzMlwiXScpLnZhbChkYXRhLmFkZHJlc3MuYWRkcmVzczIpO1xyXG4gICAgICAgICAgICAkZm9ybS5maW5kKCdbbmFtZSQ9XCJfY2l0eVwiXScpLnZhbChkYXRhLmFkZHJlc3MuY2l0eSk7XHJcbiAgICAgICAgICAgICRmb3JtLmZpbmQoJ1tuYW1lJD1cIl9jb3VudHJ5XCJdJykudmFsKGRhdGEuYWRkcmVzcy5jb3VudHJ5Q29kZSkudHJpZ2dlcignY2hhbmdlJyk7XHJcbiAgICAgICAgICAgICRmb3JtLmZpbmQoJ1tuYW1lJD1cIl9wb3N0YWxcIl0nKS52YWwoZGF0YS5hZGRyZXNzLnBvc3RhbENvZGUpO1xyXG4gICAgICAgICAgICAkZm9ybS5maW5kKCdbbmFtZSQ9XCJfc3RhdGVcIl0nKS52YWwoZGF0YS5hZGRyZXNzLnN0YXRlQ29kZSk7XHJcbiAgICAgICAgICAgICRmb3JtLmZpbmQoJ1tuYW1lJD1cIl9waG9uZVwiXScpLnZhbChkYXRhLmFkZHJlc3MucGhvbmUpO1xyXG4gICAgICAgICAgICAvLyAkZm9ybS5wYXJlbnQoJ2Zvcm0nKS52YWxpZGF0ZSgpLmZvcm0oKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBwcml2YXRlXHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAZGVzY3JpcHRpb24gSW5pdGlhbGl6ZXMgZXZlbnRzIGZvciB0aGUgZ2lmdCByZWdpc3RyYXRpb25cclxuICovXHJcbmZ1bmN0aW9uIGluaXRpYWxpemVFdmVudHMoKSB7XHJcbiAgICB2YXIgJGV2ZW50QWRkcmVzc0Zvcm0gPSAkKCdmb3JtW25hbWUkPVwiX2dpZnRyZWdpc3RyeVwiXScpLFxyXG4gICAgICAgICRiZWZvcmVBZGRyZXNzID0gJGV2ZW50QWRkcmVzc0Zvcm0uZmluZCgnZmllbGRzZXRbbmFtZT1cImFkZHJlc3MtYmVmb3JlXCJdJyksXHJcbiAgICAgICAgJGFmdGVyQWRkcmVzcyA9ICRldmVudEFkZHJlc3NGb3JtLmZpbmQoJ2ZpZWxkc2V0W25hbWU9XCJhZGRyZXNzLWFmdGVyXCJdJyk7XHJcblxyXG4gICAgJCgnLnVzZXByZWV2ZW50Jykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIGZpbHRlciBvdXQgc3RvcmVmcm9udCB0b29sa2l0XHJcbiAgICAgICAgJCgnOmlucHV0JywgJGJlZm9yZUFkZHJlc3MpLm5vdCgnW2lkXj1cImV4dFwiXScpLm5vdCgnc2VsZWN0W25hbWUkPVwiX2FkZHJlc3NCZWZvcmVMaXN0XCJdJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBmaWVsZE5hbWUgPSAkKHRoaXMpLmF0dHIoJ25hbWUnKSxcclxuICAgICAgICAgICAgICAgICRhZnRlckZpZWxkID0gJGFmdGVyQWRkcmVzcy5maW5kKCdbbmFtZT1cIicgKyBmaWVsZE5hbWUucmVwbGFjZSgnQmVmb3JlJywgJ0FmdGVyJykgKyAnXCJdJyk7XHJcbiAgICAgICAgICAgICRhZnRlckZpZWxkLnZhbCgkKHRoaXMpLnZhbCgpKS50cmlnZ2VyKCdjaGFuZ2UnKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgICRldmVudEFkZHJlc3NGb3JtLm9uKCdjaGFuZ2UnLCAnc2VsZWN0W25hbWUkPVwiX2FkZHJlc3NCZWZvcmVMaXN0XCJdJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBhZGRyZXNzSUQgPSAkKHRoaXMpLnZhbCgpO1xyXG4gICAgICAgIGlmIChhZGRyZXNzSUQubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcG9wdWxhdGVGb3JtKGFkZHJlc3NJRCwgJGJlZm9yZUFkZHJlc3MpO1xyXG4gICAgfSlcclxuICAgICAgICAub24oJ2NoYW5nZScsICdzZWxlY3RbbmFtZSQ9XCJfYWRkcmVzc0FmdGVyTGlzdFwiXScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGFkZHJlc3NJRCA9ICQodGhpcykudmFsKCk7XHJcbiAgICAgICAgICAgIGlmIChhZGRyZXNzSUQubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcG9wdWxhdGVGb3JtKGFkZHJlc3NJRCwgJGFmdGVyQWRkcmVzcyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgJCgnZm9ybVtuYW1lJD1cIl9naWZ0cmVnaXN0cnlfaXRlbXNcIl0nKS5vbignY2xpY2snLCAnLml0ZW0tZGV0YWlscyBhJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdmFyIHByb2R1Y3RMaXN0SUQgPSAkKCdpbnB1dFtuYW1lPXByb2R1Y3RMaXN0SURdJykudmFsKCk7XHJcbiAgICAgICAgcXVpY2t2aWV3LnNob3coe1xyXG4gICAgICAgICAgICB1cmw6IGUudGFyZ2V0LmhyZWYsXHJcbiAgICAgICAgICAgIHNvdXJjZTogJ2dpZnRyZWdpc3RyeScsXHJcbiAgICAgICAgICAgIHByb2R1Y3RsaXN0aWQ6IHByb2R1Y3RMaXN0SURcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnRzLmluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBpbml0aWFsaXplRXZlbnRzKCk7XHJcbiAgICBhZGRQcm9kdWN0VG9DYXJ0KCk7XHJcbiAgICAvL1N0YXJ0IEpJUkEgUFJFVi0zMzMgOiBPbiBjbGljayBvZiBGb3Jnb3QgUGFzc3dvcmQgbGluayBuYXZpZ2F0ZXMgdG8gdGhlIHBhZ2UgaW5zdGVhZCBvZiBvdmVybGF5LlxyXG4gICAgYWNjb3VudC5pbml0Q2FydExvZ2luKCk7XHJcbiAgICB1dGlsLnNldERlbGV0ZUNvbmZpcm1hdGlvbignLml0ZW0tbGlzdCcsIFN0cmluZy5mb3JtYXQoUmVzb3VyY2VzLkNPTkZJUk1fREVMRVRFLCBSZXNvdXJjZXMuVElUTEVfR0lGVFJFR0lTVFJZKSk7XHJcbn07XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuXHJcbnZhciBjb21wYXJlV2lkZ2V0ID0gcmVxdWlyZSgnLi4vY29tcGFyZS13aWRnZXQnKSxcclxuICAgIHByb2R1Y3RUaWxlID0gcmVxdWlyZSgnLi4vcHJvZHVjdC10aWxlJyksXHJcbiAgICBwcm9ncmVzcyA9IHJlcXVpcmUoJy4uL3Byb2dyZXNzJyksXHJcbiAgICB1aWV2ZW50cyA9IHJlcXVpcmUoJy4uL3VpZXZlbnRzJyksXHJcbiAgICAvL2ltYWdlc0xvYWRlZCA9IHJlcXVpcmUoJ2ltYWdlc2xvYWRlZCcpLFxyXG4gICAgdXRpbCA9IHJlcXVpcmUoJy4uL3V0aWwnKTtcclxuXHJcbmZ1bmN0aW9uIGluZmluaXRlU2Nyb2xsKCkge1xyXG4gICAgLy8gZ2V0dGluZyB0aGUgaGlkZGVuIGRpdiwgd2hpY2ggaXMgdGhlIHBsYWNlaG9sZGVyIGZvciB0aGUgbmV4dCBwYWdlXHJcbiAgICB2YXIgbG9hZGluZ1BsYWNlSG9sZGVyID0gJCgnLmluZmluaXRlLXNjcm9sbC1wbGFjZWhvbGRlcltkYXRhLWxvYWRpbmctc3RhdGU9XCJ1bmxvYWRlZFwiXScpO1xyXG4gICAgLy8gZ2V0IHVybCBoaWRkZW4gaW4gRE9NXHJcbiAgICB2YXIgZ3JpZFVybCA9IGxvYWRpbmdQbGFjZUhvbGRlci5hdHRyKCdkYXRhLWdyaWQtdXJsJyk7XHJcbiAgICBpZiAobG9hZGluZ1BsYWNlSG9sZGVyLmxlbmd0aCA9PT0gMSAmJiB1dGlsLmVsZW1lbnRJblZpZXdwb3J0KGxvYWRpbmdQbGFjZUhvbGRlci5nZXQoMCksIDI1MCkpIHtcclxuICAgICAgICAvLyBzd2l0Y2ggc3RhdGUgdG8gJ2xvYWRpbmcnXHJcbiAgICAgICAgLy8gLSBzd2l0Y2hlcyBzdGF0ZSwgc28gdGhlIGFib3ZlIHNlbGVjdG9yIGlzIG9ubHkgbWF0Y2hpbmcgb25jZVxyXG4gICAgICAgIC8vIC0gc2hvd3MgbG9hZGluZyBpbmRpY2F0b3JcclxuICAgICAgICBsb2FkaW5nUGxhY2VIb2xkZXIuYXR0cignZGF0YS1sb2FkaW5nLXN0YXRlJywgJ2xvYWRpbmcnKTtcclxuICAgICAgICBsb2FkaW5nUGxhY2VIb2xkZXIuYWRkQ2xhc3MoJ2luZmluaXRlLXNjcm9sbC1sb2FkaW5nJyk7XHJcblxyXG4gICAgICAgIC8vIG5hbWVkIHdyYXBwZXIgZnVuY3Rpb24sIHdoaWNoIGNhbiBlaXRoZXIgYmUgY2FsbGVkLCBpZiBjYWNoZSBpcyBoaXQsIG9yIGFqYXggcmVwc29uc2UgaXMgcmVjZWl2ZWRcclxuICAgICAgICB2YXIgZmlsbEVuZGxlc3NTY3JvbGxDaHVuayA9IGZ1bmN0aW9uIChodG1sKSB7XHJcbiAgICAgICAgICAgIGxvYWRpbmdQbGFjZUhvbGRlci5yZW1vdmVDbGFzcygnaW5maW5pdGUtc2Nyb2xsLWxvYWRpbmcnKTtcclxuICAgICAgICAgICAgbG9hZGluZ1BsYWNlSG9sZGVyLmF0dHIoJ2RhdGEtbG9hZGluZy1zdGF0ZScsICdsb2FkZWQnKTtcclxuICAgICAgICAgICAgJCgnZGl2LnNlYXJjaC1yZXN1bHQtY29udGVudCcpLmFwcGVuZChodG1sKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBvbGQgY29uZGl0aW9uIGZvciBjYWNoaW5nIHdhcyBgJ3Nlc3Npb25TdG9yYWdlJyBpbiB3aW5kb3cgJiYgc2Vzc2lvblN0b3JhZ2VbXCJzY3JvbGwtY2FjaGVfXCIgKyBncmlkVXJsXWBcclxuICAgICAgICAvLyBpdCB3YXMgcmVtb3ZlZCB0byB0ZW1wb3JhcmlseSBhZGRyZXNzIFJBUC0yNjQ5XHJcblxyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHR5cGU6ICdHRVQnLFxyXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2h0bWwnLFxyXG4gICAgICAgICAgICB1cmw6IGdyaWRVcmwsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gcHV0IHJlc3BvbnNlIGludG8gY2FjaGVcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2VbJ3Njcm9sbC1jYWNoZV8nICsgZ3JpZFVybF0gPSByZXNwb25zZTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBub3RoaW5nIHRvIGNhdGNoIGluIGNhc2Ugb2Ygb3V0IG9mIG1lbW9yeSBvZiBzZXNzaW9uIHN0b3JhZ2VcclxuICAgICAgICAgICAgICAgICAgICAvLyBpdCB3aWxsIGZhbGwgYmFjayB0byBsb2FkIHZpYSBhamF4XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgVUlcclxuICAgICAgICAgICAgICAgIGZpbGxFbmRsZXNzU2Nyb2xsQ2h1bmsocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgcHJvZHVjdFRpbGUuaW5pdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAcHJpdmF0ZVxyXG4gKiBAZnVuY3Rpb25cclxuICogQGRlc2NyaXB0aW9uIHJlcGxhY2VzIGJyZWFkY3J1bWJzLCBsZWZ0aGFuZCBuYXYgYW5kIHByb2R1Y3QgbGlzdGluZyB3aXRoIGFqYXggYW5kIHB1dHMgYSBsb2FkaW5nIGluZGljYXRvciBvdmVyIHRoZSBwcm9kdWN0IGxpc3RpbmdcclxuICovXHJcbmZ1bmN0aW9uIHVwZGF0ZVByb2R1Y3RMaXN0aW5nKHVybCkge1xyXG4gICAgaWYgKHVybCA9PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgJCgnI21haW4nKS5hZGRDbGFzcygnaGlkZWNvbnRlbnQnKTtcclxuICAgIHByb2dyZXNzLnNob3coJyNtYWluJyk7XHJcbiAgICAkKCcjbWFpbicpLmxvYWQodXRpbC5hcHBlbmRQYXJhbVRvVVJMKHVybCwgJ2Zvcm1hdCcsICdhamF4JyksIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWFyY2hSZWZpbm1lbnQuc2VhcmNoUmVmaW5lbWVudFRvZ2dsZSgpO1xyXG4gICAgICAgIHVpZXZlbnRzLmluaXQoKTtcclxuICAgICAgICBjb21wYXJlV2lkZ2V0LmluaXQoKTtcclxuICAgICAgICBwcm9kdWN0VGlsZS5pbml0KCk7XHJcbiAgICAgICAgb3dsY2Fyb3VzZWwoKTtcclxuICAgICAgICAvKiAkKCcuc2Nyb2xsYWJsZScpLmVhY2goZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICQodGhpcykuc2xpbVNjcm9sbCh7XHJcbiAgICAgICAgICAgICAgICAgc2l6ZTogJzEwcHgnLFxyXG4gICAgICAgICAgICAgICAgIGhlaWdodDogJzIwMHB4JyxcclxuICAgICAgICAgICAgICAgICByYWlsVmlzaWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICBhbHdheXNWaXNpYmxlOiB0cnVlXHJcbiAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgIH0pOyovXHJcblxyXG4gICAgICAgIHByb2dyZXNzLmhpZGUoKTtcclxuICAgICAgICAkKCcjbWFpbicpLnJlbW92ZUNsYXNzKCdoaWRlY29udGVudCcpO1xyXG4gICAgICAgIGhpc3RvcnkucHVzaFN0YXRlKHVuZGVmaW5lZCwgJycsIHVybCk7XHJcbiAgICAgICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe3Njcm9sbFRvcDogMH0sICdmYXN0Jyk7XHJcbiAgICAgICAgaWYgKCQoJy5wdF9wcm9kdWN0LXNlYXJjaC1yZXN1bHQgLnNlYXJjaC1ibGsnKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICQoJy5wdF9wcm9kdWN0LXNlYXJjaC1yZXN1bHQnKS5maW5kKCcjcHJpbWFyeScpLmFkZENsYXNzKCdzZWFyY2gtcmVzdWx0Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgkKCcucmVmaW5lLWRpc3BsYXkucmVmaW5lLXZhbHVlcyAuYnJlYWRjcnVtYi1yZWZpbmVtZW50JykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAkKCcucHRfcHJvZHVjdC1zZWFyY2gtcmVzdWx0LnNlYXJjaHJlc3VsdCcpLmZpbmQoJyNwcmltYXJ5JykuYWRkQ2xhc3MoJ3NlYXJjaC1yZXN1bHQnKTtcclxuICAgICAgICAgICAgJCgnLnB0X3Byb2R1Y3Qtc2VhcmNoLXJlc3VsdC5jYXRlZ29yeWxhbmRpbmcnKS5maW5kKCcjcHJpbWFyeScpLmFkZENsYXNzKCdzZWFyY2gtcmVzdWx0Jyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJCgnLnB0X3Byb2R1Y3Qtc2VhcmNoLXJlc3VsdC5zZWFyY2hyZXN1bHQnKS5maW5kKCcjcHJpbWFyeScpLmFkZENsYXNzKCdzZWFyY2gtcmVzdWx0Jyk7XHJcbiAgICAgICAgICAgICQoJy5wdF9wcm9kdWN0LXNlYXJjaC1yZXN1bHQuY2F0ZWdvcnlsYW5kaW5nJykuZmluZCgnI3ByaW1hcnknKS5yZW1vdmVDbGFzcygnc2VhcmNoLXJlc3VsdCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBncmlkU3luY2hlaWdodCgpO1xyXG4gICAgICAgICQoJyNzZWNvbmRhcnknKS5yZW1vdmVDbGFzcygndmlzaWJsZS1oaWRkZW4nKS5hZGRDbGFzcygnc2Vjb25kYXJ5LWhpZGUnKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG4vLyB1cGRhdGVzIHRoZSBncmlkIHVzaW5nIHRoZSAncG9zdCBoYXNoJyByZWZpbmVtZW50IHZhbHVlc1xyXG5mdW5jdGlvbiBncmlkU3luY2hlaWdodCgpIHtcclxuICAgICQoJy50aWxlcy1jb250YWluZXIgLnByb2R1Y3QtdGlsZScpLnN5bmNIZWlnaHQoKTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIG93bGNhcm91c2VsKCkge1xyXG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIG93bCA9ICQoJy5vd2wtY2Fyb3VzZWwnKTtcclxuICAgICAgICBvd2wub3dsQ2Fyb3VzZWwoe1xyXG4gICAgICAgICAgICBpdGVtczogNSxcclxuICAgICAgICAgICAgc2xpZGVCeTogNSxcclxuICAgICAgICAgICAgcmV3aW5kOiBmYWxzZSxcclxuICAgICAgICAgICAgbmF2OiB0cnVlLFxyXG4gICAgICAgICAgICBuYXZSZXdpbmQ6IGZhbHNlLFxyXG4gICAgICAgICAgICBsb29wOiBmYWxzZSxcclxuICAgICAgICAgICAgZG90czogdHJ1ZSxcclxuICAgICAgICAgICAgcmVzcG9uc2l2ZToge1xyXG4gICAgICAgICAgICAgICAgMDoge1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zOiAyLFxyXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlQnk6IDJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICA3Njc6IHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtczogMixcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZUJ5OiAyXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgNzY4OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbXM6IDUsXHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVCeTogNVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHZhciB2aWV3cG9ydCA9IGpRdWVyeSh3aW5kb3cpLndpZHRoKCk7XHJcbiAgICAgICAgLy92YXIgY3VycmVudCA9ICQodGhpcyk7XHJcbiAgICAgICAgdmFyIGl0ZW1Db3VudCA9ICQoJy5yZWNvbW1lbmRhdGlvbnMuY3Jvc3Mtc2VsbC5SZWNvbW1lbmRlZC5Gb3IuWW91IC5vd2wtY2Fyb3VzZWwgLm93bC1pdGVtJykubGVuZ3RoO1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgKHZpZXdwb3J0ID49IDc2OCAmJiBpdGVtQ291bnQgPiA1KSB8fCAodmlld3BvcnQgPCA3NjggJiYgaXRlbUNvdW50ID4gMilcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgJCgnLnJlY29tbWVuZGF0aW9ucy5jcm9zcy1zZWxsLlJlY29tbWVuZGVkLkZvci5Zb3UgLnBkcHJlY29tby1vd2wnKS5maW5kKCcub3dsLXByZXYsIC5vd2wtbmV4dCcpLnNob3coKTtcclxuICAgICAgICAgICAgJCgnLnJlY29tbWVuZGF0aW9ucy5jcm9zcy1zZWxsLlJlY29tbWVuZGVkLkZvci5Zb3UgLnBkcHJlY29tby1vd2wnKS5maW5kKCcub3dsLWRvdHMnKS5zaG93KCk7XHJcblxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICQoJy5yZWNvbW1lbmRhdGlvbnMuY3Jvc3Mtc2VsbC5SZWNvbW1lbmRlZC5Gb3IuWW91IC5wZHByZWNvbW8tb3dsJykuZmluZCgnLm93bC1wcmV2LCAub3dsLW5leHQnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICQoJy5yZWNvbW1lbmRhdGlvbnMuY3Jvc3Mtc2VsbC5SZWNvbW1lbmRlZC5Gb3IuWW91IC5wZHByZWNvbW8tb3dsJykuZmluZCgnLm93bC1kb3RzJykuaGlkZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy92YXIgdmlld3BvcnRvbmUgPSBqUXVlcnkod2luZG93KS53aWR0aCgpO1xyXG4gICAgICAgIC8vdmFyIGN1cnJlbnRvbmUgPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciBpdGVtQ291bnRvbmUgPSAkKCcucmVjb21tZW5kYXRpb25zLmNyb3NzLXNlbGwuUmVjZW50bHkuVmlld2VkIC5vd2wtY2Fyb3VzZWwgLm93bC1pdGVtJykubGVuZ3RoO1xyXG5cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICh2aWV3cG9ydCA+PSA3NjggJiYgaXRlbUNvdW50b25lID4gNSkgfHwgKHZpZXdwb3J0IDwgNzY4ICYmIGl0ZW1Db3VudG9uZSA+IDIpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICQoJy5yZWNvbW1lbmRhdGlvbnMuY3Jvc3Mtc2VsbC5SZWNlbnRseS5WaWV3ZWQgLnBkcHJlY29tby1vd2wnKS5maW5kKCcub3dsLXByZXYsIC5vd2wtbmV4dCcpLnNob3coKTtcclxuICAgICAgICAgICAgJCgnLnJlY29tbWVuZGF0aW9ucy5jcm9zcy1zZWxsLlJlY2VudGx5LlZpZXdlZCAucGRwcmVjb21vLW93bCcpLmZpbmQoJy5vd2wtZG90cycpLnNob3coKTtcclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJCgnLnJlY29tbWVuZGF0aW9ucy5jcm9zcy1zZWxsLlJlY2VudGx5LlZpZXdlZCAucGRwcmVjb21vLW93bCcpLmZpbmQoJy5vd2wtcHJldiwgLm93bC1uZXh0JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKCcucmVjb21tZW5kYXRpb25zLmNyb3NzLXNlbGwuUmVjZW50bHkuVmlld2VkIC5wZHByZWNvbW8tb3dsJykuZmluZCgnLm93bC1kb3RzJykuaGlkZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkKCcucHJvZHVjdC1saXN0aW5nJykuZmluZCgnaDIuaGlkZScpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcblxyXG4gICAgICAgIHByb2R1Y3RUaWxlLmluaXQoKTtcclxuICAgICAgICAkKCcucHRfcHJvZHVjdC1zZWFyY2gtcmVzdWx0IC5yZWNvbW1lbmRhdGlvbnMuY3Jvc3Mtc2VsbCAuc2VhcmNoLXJlc3VsdC1pdGVtcyAucHJvZHVjdC10aWxlLml0ZW0nKS5sYXN0KCkuYWRkQ2xhc3MoJ3JlY29tbGFzdCcpO1xyXG4gICAgfSwgNTUwMCk7XHJcblxyXG59XHJcblxyXG52YXIgc2VhcmNoUmVmaW5tZW50ID0ge1xyXG4gICAgc2VhcmNoUmVmaW5lbWVudFRvZ2dsZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vJChcIiNzZWNvbmRhcnlcIikucmVtb3ZlQXR0cihcInN0eWxlXCIpO1xyXG4gICAgICAgICQoJy5qcy1zY3JvbGxiYXInKS5lYWNoKGZ1bmN0aW9uICgkaSkge1xyXG4gICAgICAgICAgICAvL3ZhciBjdXJPYmogPSAkKHRoaXMpO1xyXG4gICAgICAgICAgICAvL3ZhciB0aHJlc2hvbGRWYWx1ZSA9ICQoY3VyT2JqKS5jbG9zZXN0KCcucmVmaW5lbWVudCcpLmZpbmQoJy5kZXZpY2UtcmVmaW5lJykudmFsKCk7XHJcbiAgICAgICAgICAgIGlmICgkKCcucmFwYWxhX2RldmljZScpLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5jbG9zZXN0KCcubmF2Z3JvdXAnKS5oYXNDbGFzcygncmVmaW5lbWVudCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQodGhpcykuZmluZCgnbGknKS5sZW5ndGggPiA4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2pzLXNjcm9sbGJhci1oZWlnaHQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcub3ZlcnZpZXcnKS5zbGltU2Nyb2xsKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhaWxWaXNpYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAnMjAwcHgnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZTogJzEwcHgnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFpbENvbG9yOiAndHJhbnNwYXJlbnQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjYTBhMGEwJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsd2F5c1Zpc2libGU6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vJCh0aGlzKS50aW55c2Nyb2xsYmFyKHt0cmFja1NpemUgOiAyMDB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5vdmVydmlldycpLmNzcygncG9zaXRpb24nLCAnc3RhdGljJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8kKHRoaXMpLnRpbnlzY3JvbGxiYXIoe3RyYWNrU2l6ZSA6IDIwMH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLm92ZXJ2aWV3Jykuc2xpbVNjcm9sbCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhaWxWaXNpYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICcyMDBweCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpemU6ICcxMHB4JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmFpbENvbG9yOiAndHJhbnNwYXJlbnQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJyNhMGEwYTAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbHdheXNWaXNpYmxlOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLyppZigkKHRoaXMpLmZpbmQoJ2xpJykubGVuZ3RoID4gdGhyZXNob2xkVmFsdWUgJiYgJCh0aGlzKS5maW5kKCcuc2VlTW9yZVJlZmluZW1lbnRzJykubGVuZ3RoID09IDApe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKCQodGhpcykuZmluZCgnLnNlZU5leHRSZWZpbmVtZW50cycpLmxlbmd0aCA9PSAwICYmICQodGhpcykuZmluZCgnLnNlZVByZXZSZWZpbmVtZW50cycpLmxlbmd0aCA9PSAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hcHBlbmQoJzxhIGhyZWY9XCIjXCIgY2xhc3M9XCJzZWVOZXh0UmVmaW5lbWVudHNcIj5TZWUgTmV4dDwvYT4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hcHBlbmQoJzxhIGhyZWY9XCIjXCIgY2xhc3M9XCJzZWVQcmV2UmVmaW5lbWVudHNcIj5TZWUgUHJldmlvdXM8L2E+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRocmVzaG9sZFZhbHVlIC09IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCdsaScpLmVxKHRocmVzaG9sZFZhbHVlKS5uZXh0QWxsKCdsaScpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuc2VlUHJldlJlZmluZW1lbnRzJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ2xpJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLnNlZU5leHRSZWZpbmVtZW50cycpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIH0qL1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoJGkgPT0gKCQoJy5qcy1zY3JvbGxiYXInKS5sZW5ndGggLSAxKSkge1xyXG4gICAgICAgICAgICAgICAgJCgnI3NlYXJjaHJlZmluZW1lbnRzIGRpdi5uYXZncm91cCcpLmVhY2goZnVuY3Rpb24gKGkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPCA5NjApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCQodGhpcykuZmluZCgnbGkuc2VsZWN0ZWQnKS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCdkaXYucmVmaW5lYXR0cmlidXRlcycpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLmZpbHRlcicpLmFkZENsYXNzKCdleHBhbmQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2NvbGxhcHNlLWV4cGFuZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPiAyICYmICQodGhpcykuZmluZCgnbGkuc2VsZWN0ZWQnKS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCdkaXYucmVmaW5lYXR0cmlidXRlcycpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLmZpbHRlcicpLmFkZENsYXNzKCdleHBhbmQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2NvbGxhcHNlLWV4cGFuZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGkgPCAzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ2Rpdi5yZWZpbmVhdHRyaWJ1dGVzJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuZmlsdGVyJykucmVtb3ZlQ2xhc3MoJ2V4cGFuZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnY29sbGFwc2UtZXhwYW5kJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gaW5pdCByZWZpbmVtZW50IHRvZ2dsaW5nXHJcbiAgICAgICAgJCgnI3NlYXJjaHJlZmluZW1lbnRzIC5maWx0ZXInKS5vZmYoJ2NsaWNrJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBqUXVlcnkodGhpcykudG9nZ2xlQ2xhc3MoJ2V4cGFuZCcpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5uYXZncm91cCcpLnRvZ2dsZUNsYXNzKCdjb2xsYXBzZS1leHBhbmQnKTtcclxuICAgICAgICAgICAgalF1ZXJ5KHRoaXMpLmNsb3Nlc3QoJy5uYXZncm91cCcpLmZpbmQoJ2Rpdi5yZWZpbmVhdHRyaWJ1dGVzJykudG9nZ2xlKCk7XHJcbiAgICAgICAgICAgIC8valF1ZXJ5KHRoaXMpLmNsb3Nlc3QoJy5uYXZncm91cCcpLmZpbmQoXCIuanMtc2Nyb2xsYmFyXCIpLnRpbnlzY3JvbGxiYXIoe3RyYWNrU2l6ZSA6IDIwMH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKHdpbmRvdykubG9hZChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQoJyNzZWNvbmRhcnknKS5yZW1vdmVDbGFzcygndmlzaWJsZS1oaWRkZW4nKS5hZGRDbGFzcygnc2Vjb25kYXJ5LWhpZGUnKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPiA5NTkpIHtcclxuICAgICAgICAgICAgJCgnLm1vYmlsZS1maWx0ZXItYnknKS5yZW1vdmVDbGFzcygnanMtZmlsdGVyLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICAkKCcjc2Vjb25kYXJ5JykucmVtb3ZlQ2xhc3MoJy52aXNpYmxlLWhpZGRlbicpLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIEBwcml2YXRlXHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAZGVzY3JpcHRpb24gSW5pdGlhbGl6ZXMgZXZlbnRzIGZvciB0aGUgZm9sbG93aW5nIGVsZW1lbnRzOjxici8+XHJcbiAqIDxwPnJlZmluZW1lbnQgYmxvY2tzPC9wPlxyXG4gKiA8cD51cGRhdGluZyBncmlkOiByZWZpbmVtZW50cywgcGFnaW5hdGlvbiwgYnJlYWRjcnVtYjwvcD5cclxuICogPHA+aXRlbSBjbGljazwvcD5cclxuICogPHA+c29ydGluZyBjaGFuZ2VzPC9wPlxyXG4gKi9cclxuZnVuY3Rpb24gaW5pdGlhbGl6ZUV2ZW50cygpIHtcclxuICAgIG93bGNhcm91c2VsKCk7XHJcbiAgICBncmlkU3luY2hlaWdodCgpO1xyXG4gICAgcHJvZHVjdFRpbGUuaW5pdCgpO1xyXG4gICAgdmFyICRtYWluID0gJCgnI21haW4nKTtcclxuICAgIC8vIGNvbXBhcmUgY2hlY2tlZFxyXG4gICAgJG1haW4ub24oJ2NsaWNrJywgJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXS5jb21wYXJlLWNoZWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBjYiA9ICQodGhpcyk7XHJcbiAgICAgICAgdmFyIHRpbGUgPSBjYi5jbG9zZXN0KCcucHJvZHVjdC10aWxlJyk7XHJcblxyXG4gICAgICAgIHZhciBmdW5jID0gdGhpcy5jaGVja2VkID8gY29tcGFyZVdpZGdldC5hZGRQcm9kdWN0IDogY29tcGFyZVdpZGdldC5yZW1vdmVQcm9kdWN0O1xyXG4gICAgICAgIHZhciBpdGVtSW1nID0gdGlsZS5maW5kKCcucHJvZHVjdC1pbWFnZSBhIGltZycpLmZpcnN0KCk7XHJcbiAgICAgICAgZnVuYyh7XHJcbiAgICAgICAgICAgIGl0ZW1pZDogdGlsZS5kYXRhKCdpdGVtaWQnKSxcclxuICAgICAgICAgICAgdXVpZDogdGlsZVswXS5pZCxcclxuICAgICAgICAgICAgaW1nOiBpdGVtSW1nLFxyXG4gICAgICAgICAgICBjYjogY2JcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoJCgnLmNvbnRlbnRBc3NldC1uZXcnKS5maW5kKCcuaHRtbC1zbG90LWNvbnRhaW5lcicpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICB2YXIgY3VycmVudCA9ICQoJy5jb250ZW50QXNzZXQtbmV3JykuZmluZCgnLmh0bWwtc2xvdC1jb250YWluZXInKTtcclxuICAgICAgICBjdXJyZW50LnBhcmVudHMoJy5kZXNrdG9wJykucmVtb3ZlQ2xhc3MoJ3Byb21vaGlkZScpLmFkZENsYXNzKCdwcm9tb3Nob3cnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJCgnLmRlc2t0b3AnKS5yZW1vdmVDbGFzcygncHJvbW9zaG93JykuYWRkQ2xhc3MoJ3Byb21vaGlkZScpO1xyXG4gICAgfVxyXG5cclxuICAgICRtYWluLm9uKCdjbGljaycsICcubW9iaWxlLWZpbHRlci1ieScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoISQoJy5tb2JpbGUtZmlsdGVyLWJ5JykuaGFzQ2xhc3MoJ2pzLWZpbHRlci1hY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAkKCcubW9iaWxlLWZpbHRlci1ieScpLmFkZENsYXNzKCdqcy1maWx0ZXItYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICQoJyNzZWNvbmRhcnknKS5zaG93KCk7XHJcbiAgICAgICAgICAgIC8vJChcIiNzZWNvbmRhcnlcIikuY3NzKFwidG9wXCIsc2Vjb25kYXJ5VG9wK1wicHhcIik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJCgnLm1vYmlsZS1maWx0ZXItYnknKS5yZW1vdmVDbGFzcygnanMtZmlsdGVyLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICAkKCcjc2Vjb25kYXJ5JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAvLyQoXCIjc2Vjb25kYXJ5XCIpLmNzcyhcInRvcFwiLHNlY29uZGFyeVRvcCtcInB4XCIpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgJCgnI3RhYnMgYScpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQodGhpcykucHJldignaW5wdXRbdHlwZT1cInJhZGlvXCJdJykucHJvcCgnY2hlY2tlZCcsIHRydWUpO1xyXG4gICAgICAgIHZhciBocmVmID0gJCh0aGlzKS5hdHRyKCdocmVmJyk7XHJcbiAgICAgICAgd2luZG93LmxvY2F0aW9uID0gaHJlZjtcclxuICAgIH0pO1xyXG5cclxuICAgICRtYWluLm9uKCdjbGljaycsICcjdGFicyBpbnB1dFt0eXBlPVwicmFkaW9cIl0nLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGNoZWNrZWQgPSAkKHRoaXMpLnByb3AoJ2NoZWNrZWQnLCB0cnVlKTtcclxuICAgICAgICBpZiAoY2hlY2tlZCkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICQodGhpcykubmV4dCgnYScpLnRyaWdnZXIoJ2NsaWNrJyk7XHJcbiAgICAgICAgJCh0aGlzKS5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvL3NlYXJjaGNvbnRlbnQtc2VjdGlvblxyXG4gICAgJG1haW4ub24oJ2NsaWNrJywgJy5tb2JpbGUtZmlsdGVyLWJ5LnJlc3VsdHMtY29udGVudCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoISQoJy5tb2JpbGUtZmlsdGVyLWJ5LnJlc3VsdHMtY29udGVudCcpLmhhc0NsYXNzKCdqcy1maWx0ZXItYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgJCgnLm1vYmlsZS1maWx0ZXItYnkucmVzdWx0cy1jb250ZW50JykuYWRkQ2xhc3MoJ2pzLWZpbHRlci1hY3RpdmUnKTtcclxuICAgICAgICAgICAgJCgnI3NlY29uZGFyeS5zZWFyY2hSZXN1bHQtcmVmaW5lbWVudCcpLnNob3coKTtcclxuICAgICAgICAgICAgLy8kKFwiI3NlY29uZGFyeVwiKS5jc3MoXCJ0b3BcIixzZWNvbmRhcnlUb3ArXCJweFwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkKCcubW9iaWxlLWZpbHRlci1ieS5yZXN1bHRzLWNvbnRlbnQnKS5yZW1vdmVDbGFzcygnanMtZmlsdGVyLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICAkKCcjc2Vjb25kYXJ5LnNlYXJjaFJlc3VsdC1yZWZpbmVtZW50JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAvLyQoXCIjc2Vjb25kYXJ5XCIpLmNzcyhcInRvcFwiLHNlY29uZGFyeVRvcCtcInB4XCIpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGlmICgkKCcucHRfcHJvZHVjdC1zZWFyY2gtcmVzdWx0IC5zZWFyY2gtYmxrJykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICQoJy5wdF9wcm9kdWN0LXNlYXJjaC1yZXN1bHQnKS5maW5kKCcjcHJpbWFyeScpLmFkZENsYXNzKCdzZWFyY2gtcmVzdWx0Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCQoJy5wdF9jb250ZW50LXNlYXJjaC1yZXN1bHQgLmZvbGRlci1jb250ZW50LWxpc3QnKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgJCgnLnB0X2NvbnRlbnQtc2VhcmNoLXJlc3VsdCcpLmZpbmQoJyN0YWJzICNwcm9kdWN0dGFiJykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcclxuICAgICAgICAkKCcucHRfY29udGVudC1zZWFyY2gtcmVzdWx0JykuZmluZCgnI3RhYnMgI2NvbnRlbnR0YWInKS5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgJG1haW4ub24oJ2NsaWNrJywgJy5zb3J0YnktYnV0dG9uJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA+PSA0ODEgJiYgJCh3aW5kb3cpLndpZHRoKCkgPD0gOTU5KSB7XHJcbiAgICAgICAgICAgIGlmICghJCgnLnNvcnRieS1idXR0b24nKS5oYXNDbGFzcygnanMtc29ydC1hY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgJCgnLnNvcnRieS1idXR0b24nKS5hZGRDbGFzcygnanMtc29ydC1hY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICQoJy5zZWFyY2gtcmVzdWx0LW9wdGlvbnMnKS5hZGRDbGFzcygnc2hvdy1zb3J0Jyk7XHJcbiAgICAgICAgICAgICAgICAkKCcubW9iaWxlLXNvcnQtYnktY29udGVudCcpLnNob3coKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICQoJy5zb3J0YnktYnV0dG9uJykucmVtb3ZlQ2xhc3MoJ2pzLXNvcnQtYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcuc2VhcmNoLXJlc3VsdC1vcHRpb25zJykucmVtb3ZlQ2xhc3MoJ3Nob3ctc29ydCcpO1xyXG4gICAgICAgICAgICAgICAgJCgnLm1vYmlsZS1zb3J0LWJ5LWNvbnRlbnQnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgc2VhcmNoUmVmaW5tZW50LnNlYXJjaFJlZmluZW1lbnRUb2dnbGUoKTtcclxuXHJcbiAgICAvKiQod2luZG93KS5yZXNpemUoZnVuY3Rpb24oKXtcclxuXHRcdHNlYXJjaFJlZmlubWVudC5zZWFyY2hSZWZpbmVtZW50VG9nZ2xlKCk7XHJcbiAgICB9KTsqL1xyXG5cclxuICAgIC8qICQoJy5zY3JvbGxhYmxlJykuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgXHQkKHRoaXMpLnNsaW1TY3JvbGwoe1xyXG4gICAgICAgICAgICBzaXplOiAnMTBweCcsXHJcbiAgICAgICAgICAgIGhlaWdodDogJzIwMHB4JyxcclxuICAgICAgICAgICAgcmFpbFZpc2libGU6IHRydWUsXHJcbiAgICAgICAgICAgIGFsd2F5c1Zpc2libGU6IHRydWVcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9KTsqL1xyXG4gICAgLy8gaGFuZGxlIHRvZ2dsZSByZWZpbmVtZW50IGJsb2Nrc1xyXG4gICAgLyogJG1haW4ub24oJ2NsaWNrJywgJy5yZWZpbmVtZW50IGgzJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgaWYoICEkKHRoaXMpLmhhc0NsYXNzKCdleHBhbmQnKSApe1xyXG4gICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2V4cGFuZCcpLmNsb3Nlc3QoJy5uYXZncm91cCcpLmFkZENsYXNzKCdjb2xsYXBzZS1leHBhbmQnKS5maW5kKCcuc3ViLXJlZmluZW1lbnQnKS5oaWRlKCk7XHJcblxyXG4gICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2V4cGFuZCcpLmNsb3Nlc3QoJy5uYXZncm91cCcpLnJlbW92ZUNsYXNzKCdjb2xsYXBzZS1leHBhbmQnKS5maW5kKCcuc3ViLXJlZmluZW1lbnQnKS5zaG93KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgfSk7Ki9cclxuXHJcbiAgICAvLyBjb2xvciBzd2F0Y2hlcyBldmVudHMgLy9cclxuICAgICRtYWluLm9uKCdjbGljaycsICcucHJvZHVjdC1zd2F0Y2hlcyAucHJvZHVjdC1zd2F0Y2hlcy1hbGwnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ2xvYWRlZCcpKSB7XHJcbiAgICAgICAgICAgICQodGhpcykubmV4dCgnLnN3YXRjaC1saXN0LnN3YXRjaC10b2dnbGUnKS5zaG93KCk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnbG9hZGVkJyk7XHJcbiAgICAgICAgdmFyIGNvbnQgPSAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJ3VsLnN3YXRjaC1saXN0LnN3YXRjaC10b2dnbGUnKTtcclxuICAgICAgICBjb250LnNob3coKS5mb2N1cygpO1xyXG4gICAgICAgICQodGhpcykucGFyZW50KCkuZmluZCgndWwuc3dhdGNoLXRvZ2dsZSBsaSA+IGEnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCQodGhpcykuZGF0YSgnaHJlZicpKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ2ltZycpLmF0dHIoJ3NyYycsICQodGhpcykuZGF0YSgnaHJlZicpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9KTtcclxuICAgICAgICBjb250LnNob3coKS5mb2N1cygpO1xyXG4gICAgfSk7XHJcbiAgICAvLyBwcmVwYXJlIHN3YXRjaCBwYWxldHRlcyBhbmQgdGh1bWJuYWlsc1xyXG4gICAgLy8gc2hvdyB0aGUgcGFsZXR0ZVxyXG5cclxuICAgIC8vIGhpZGUgdGhlIHBhbGV0dGVcclxuICAgICQoJyNjb250ZW50IGRpdi5wcm9kdWN0LXN3YXRjaGVzIGRpdi5zd2F0Y2gtaW1hZ2UnKS5tb3VzZW91dChmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIC8vIGZpeCBmb3IgZXZlbnQgYnViYmxpbmcgKGh0dHA6Ly93d3cucXVpcmtzbW9kZS5vcmcvanMvZXZlbnRzX21vdXNlLmh0bWwpXHJcbiAgICAgICAgaWYgKCFlKSB7XHJcbiAgICAgICAgICAgIGUgPSB3aW5kb3cuZXZlbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciB0ZyA9ICh3aW5kb3cuZXZlbnQpID8gZS5zcmNFbGVtZW50IDogZS50YXJnZXQ7XHJcbiAgICAgICAgaWYgKHRnLm5vZGVOYW1lICE9ICdESVYnKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHJlbHRnID0gKGUucmVsYXRlZFRhcmdldCkgPyBlLnJlbGF0ZWRUYXJnZXQgOiBlLnRvRWxlbWVudDtcclxuICAgICAgICB3aGlsZSAocmVsdGcgIT0gdGcgJiYgcmVsdGcubm9kZU5hbWUgIT0gJ0JPRFknKSB7XHJcbiAgICAgICAgICAgIHJlbHRnID0gcmVsdGcucGFyZW50Tm9kZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJlbHRnID09IHRnKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIG1vdXNlb3V0IHRvb2sgcGxhY2Ugd2hlbiBtb3VzZSBhY3R1YWxseSBsZWZ0IGxheWVyXHJcbiAgICAgICAgLy8gaGFuZGxlIGV2ZW50IG5vd1xyXG4gICAgICAgICQodGhpcykuaGlkZSgpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0pO1xyXG5cclxuICAgICQoJy5zd2F0Y2gtbGlzdC5zd2F0Y2gtdG9nZ2xlJykubW91c2VsZWF2ZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnLnN3YXRjaC1saXN0LnN3YXRjaC10b2dnbGUnKS5oaWRlKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBqUXVlcnkoJyNjb250ZW50IC5wcm9kdWN0dGlsZSBkaXYuc3dhdGNoZXMgZGl2LmludmlzaWJsZScpLmhpZGUoKTtcclxuICAgIGpRdWVyeSgnI2NvbnRlbnQgLnByb2R1Y3R0aWxlIGRpdi5zd2F0Y2hlcyBhLnN3YXRjaCBpbWcuaGlkZGVudGh1bWJuYWlsJykuaGlkZSgpO1xyXG5cclxuICAgICQoJyNjb250ZW50LnByb2R1Y3Qtc3dhdGNoZXMgLnByb2R1Y3Qtc3dhdGNoZXMtYWxsLmxvYWRlZCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvL3ZhciBzd2F0Y2ggPSBqUXVlcnkodGhpcyk7XHJcbiAgICAgICAgdXBkYXRlUHJvZHVjdExpc3RpbmcodGhpcy5ocmVmKTtcclxuICAgICAgICAvLyBvbWl0IGZvbGxvd2luZyB0aGUgc3dhdGNoIGxpbmtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCdib2R5JykubW91c2VsZWF2ZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpID4gOTYwKSB7XHJcbiAgICAgICAgICAgICQoJy5zd2F0Y2gtbGlzdC5zd2F0Y2gtdG9nZ2xlJykuaGlkZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgJCgnYm9keScpLmJpbmQoJ2JsdXInLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnLnN3YXRjaC1saXN0LnN3YXRjaC10b2dnbGUnKS5oaWRlKCk7XHJcblxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gaGFuZGxlIGV2ZW50cyBmb3IgdXBkYXRpbmcgZ3JpZFxyXG4gICAgJG1haW4ub24oJ2NsaWNrJywgJy5yZWZpbmVtZW50IGEsIC5zb3J0aGl0c2NvbnRhaW5lciAucGFnaW5hdGlvbiBhLCAuYnJlYWRjcnVtYi1yZWZpbmVtZW50LXZhbHVlIGEsIC5tb2JpbGUtc29ydC1ieS1jb250ZW50IGEnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIC8vIGRvbid0IGludGVyY2VwdCBmb3IgY2F0ZWdvcnkgYW5kIGZvbGRlciByZWZpbmVtZW50cywgYXMgd2VsbCBhcyB1bnNlbGVjdGFibGVcclxuICAgICAgICBpZiAoJCh0aGlzKS5wYXJlbnRzKCcuY2F0ZWdvcnktcmVmaW5lbWVudCcpLmxlbmd0aCA+IDAgfHwgJCh0aGlzKS5wYXJlbnRzKCcuZm9sZGVyLXJlZmluZW1lbnQnKS5sZW5ndGggPiAwIHx8ICQodGhpcykucGFyZW50KCkuaGFzQ2xhc3MoJ3Vuc2VsZWN0YWJsZScpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHZhciBxdWVyeSA9IHV0aWwuZ2V0UXVlcnlTdHJpbmcodGhpcy5ocmVmKTtcclxuICAgICAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9IHF1ZXJ5O1xyXG4gICAgICAgIGlmICh0aGlzLmhyZWYgPT09IHdpbmRvdy5sb2NhdGlvbi5ocmVmKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdXBkYXRlUHJvZHVjdExpc3RpbmcodGhpcy5ocmVmKTtcclxuICAgIH0pO1xyXG5cclxuICAgICQoJy5wcm9kdWN0bGlzdGluZy5zdWItY2F0JykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCh0aGlzKS5maW5kKCcucHJvZHVjdC5wcm9kdWN0dGlsZS5jZWxsJykuZmlyc3QoKS5hZGRDbGFzcygnc3ViZmlyc3QnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIGhhbmRsZSBldmVudHMgaXRlbSBjbGljay4gYXBwZW5kIHBhcmFtcy5cclxuICAgICRtYWluLm9uKCdjbGljaycsICcucHJvZHVjdC10aWxlIGE6bm90KFwiI3F1aWNrdmlld2J1dHRvblwiKScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYSA9ICQodGhpcyk7XHJcbiAgICAgICAgLy8gZ2V0IGN1cnJlbnQgcGFnZSByZWZpbmVtZW50IHZhbHVlc1xyXG4gICAgICAgIHZhciB3bCA9IHdpbmRvdy5sb2NhdGlvbjtcclxuXHJcbiAgICAgICAgdmFyIHFzUGFyYW1zID0gKHdsLnNlYXJjaC5sZW5ndGggPiAxKSA/IHV0aWwuZ2V0UXVlcnlTdHJpbmdQYXJhbXMod2wuc2VhcmNoLnN1YnN0cigxKSkgOiB7fTtcclxuICAgICAgICB2YXIgaGFzaFBhcmFtcyA9ICh3bC5oYXNoLmxlbmd0aCA+IDEpID8gdXRpbC5nZXRRdWVyeVN0cmluZ1BhcmFtcyh3bC5oYXNoLnN1YnN0cigxKSkgOiB7fTtcclxuXHJcbiAgICAgICAgLy8gbWVyZ2UgaGFzaCBwYXJhbXMgd2l0aCBxdWVyeXN0cmluZyBwYXJhbXNcclxuICAgICAgICB2YXIgcGFyYW1zID0gJC5leHRlbmQoaGFzaFBhcmFtcywgcXNQYXJhbXMpO1xyXG4gICAgICAgIGlmICghcGFyYW1zLnN0YXJ0KSB7XHJcbiAgICAgICAgICAgIHBhcmFtcy5zdGFydCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGdldCB0aGUgaW5kZXggb2YgdGhlIHNlbGVjdGVkIGl0ZW0gYW5kIHNhdmUgYXMgc3RhcnQgcGFyYW1ldGVyXHJcbiAgICAgICAgdmFyIHRpbGUgPSBhLmNsb3Nlc3QoJy5wcm9kdWN0LXRpbGUnKTtcclxuICAgICAgICB2YXIgaWR4ID0gdGlsZS5kYXRhKCdpZHgnKSA/ICt0aWxlLmRhdGEoJ2lkeCcpIDogMDtcclxuXHJcbiAgICAgICAgLypTdGFydCBKSVJBIFBSRVYtNTAgOiBOZXh0IGFuZCBQcmV2aW91cyBsaW5rcyB3aWxsIG5vdCBiZSBkaXNwbGF5ZWQgb24gUERQIGlmIHVzZXIgbmF2aWdhdGUgZnJvbSBRdWljayBWaWV3LkFkZGVkIGNnaWQgdG8gaGFzaCovXHJcbiAgICAgICAgaWYgKCFwYXJhbXMuY2dpZCAmJiB0aWxlLmRhdGEoJ2NnaWQnKSAhPT0gbnVsbCAmJiB0aWxlLmRhdGEoJ2NnaWQnKSAhPT0gJycpIHtcclxuICAgICAgICAgICAgcGFyYW1zLmNnaWQgPSB0aWxlLmRhdGEoJ2NnaWQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLypFbmQgSklSQSBQUkVWLTUwKi9cclxuXHJcbiAgICAgICAgLy8gY29udmVydCBwYXJhbXMuc3RhcnQgdG8gaW50ZWdlciBhbmQgYWRkIGluZGV4XHJcbiAgICAgICAgcGFyYW1zLnN0YXJ0ID0gKCtwYXJhbXMuc3RhcnQpICsgKGlkeCArIDEpO1xyXG4gICAgICAgIC8vIHNldCB0aGUgaGFzaCBhbmQgYWxsb3cgbm9ybWFsIGFjdGlvbiB0byBjb250aW51ZVxyXG4gICAgICAgIGFbMF0uaGFzaCA9ICQucGFyYW0ocGFyYW1zKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIGhhbmRsZSBzb3J0aW5nIGNoYW5nZVxyXG4gICAgJG1haW4ub24oJ2NoYW5nZScsICcuc29ydC1ieSBzZWxlY3QnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIHZhciBzZWxlY3RlZE9wdGlvbiA9ICQoJy5zb3J0LWJ5IG9wdGlvbjpzZWxlY3RlZCcpLnZhbCgpLnNwbGl0KCc/JylbMV0uc3BsaXQoJyYnKTtcclxuICAgICAgICAvL3ZhciB1cmwgPSAkKHRoaXMpLnZhbCgpO1xyXG4gICAgICAgIHZhciBzZWxlY3RlZE9wdGlvbnZhbCA9ICcnO1xyXG4gICAgICAgICQuZWFjaChzZWxlY3RlZE9wdGlvbiwgZnVuY3Rpb24gKGksIHYpIHtcclxuICAgICAgICAgICAgaWYgKHYuaW5kZXhPZignc3J1bGUnKSAhPSAtMSkge1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRPcHRpb252YWwgPSB2LnNwbGl0KCc9JylbMV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKHNlbGVjdGVkT3B0aW9udmFsLmxlbmd0aCAhPSAwKSB7XHJcbiAgICAgICAgICAgIHZhciBkYXRlT2JqID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgZGF0ZU9iai5zZXRUaW1lKGRhdGVPYmouZ2V0VGltZSgpICsgKDYwICogNjAgKiAxMDAwKSk7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmNvb2tpZSA9ICdzZWxlY3RlZE9wdGlvbj0nICsgc2VsZWN0ZWRPcHRpb252YWwgKyAnOyBleHBpcmVzPScgKyBkYXRlT2JqLnRvVVRDU3RyaW5nKCkgKyAnOyBwYXRoPS8nO1xyXG4gICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICB2YXIgc29ydFJ1bGUgPSB1cmwuc3BsaXQoJz8nKVsxXS5zcGxpdCgnJicpO1xyXG4gICAgICAgICAgICB2YXIgc29ydFR5cGUgPSAnJztcclxuXHJcbiAgICAgICAgICAgICQuZWFjaChzb3J0UnVsZSwgZnVuY3Rpb24gKGksIHYpIHtcclxuICAgICAgICAgICAgICAgIGlmICh2LmluZGV4T2YoJ3NydWxlJykgIT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICBzb3J0VHlwZSA9IHYuc3BsaXQoJz0nKVsxXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICovXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB2YXIgcXVlcnkgPSB1dGlsLmdldFF1ZXJ5U3RyaW5nKCQodGhpcykuZmluZCgnb3B0aW9uOnNlbGVjdGVkJykudmFsKCkpO1xyXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gcXVlcnk7XHJcbiAgICAgICAgaWYgKCQodGhpcykuZmluZCgnb3B0aW9uOnNlbGVjdGVkJykudmFsKCkgPT09IHdpbmRvdy5sb2NhdGlvbi5ocmVmKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdXBkYXRlUHJvZHVjdExpc3RpbmcoJCh0aGlzKS5maW5kKCdvcHRpb246c2VsZWN0ZWQnKS52YWwoKSk7XHJcbiAgICB9KS5vbignY2hhbmdlJywgJy5pdGVtcy1wZXItcGFnZSBzZWxlY3QnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHJlZmluZVVybCA9ICQodGhpcykuZmluZCgnb3B0aW9uOnNlbGVjdGVkJykudmFsKCk7XHJcbiAgICAgICAgaWYgKHJlZmluZVVybCA9PT0gJ0lORklOSVRFX1NDUk9MTCcpIHtcclxuICAgICAgICAgICAgJCgnaHRtbCcpLmFkZENsYXNzKCdpbmZpbml0ZS1zY3JvbGwnKS5yZW1vdmVDbGFzcygnZGlzYWJsZS1pbmZpbml0ZS1zY3JvbGwnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkKCdodG1sJykuYWRkQ2xhc3MoJ2Rpc2FibGUtaW5maW5pdGUtc2Nyb2xsJykucmVtb3ZlQ2xhc3MoJ2luZmluaXRlLXNjcm9sbCcpO1xyXG4gICAgICAgICAgICB2YXIgcXVlcnkgPSB1dGlsLmdldFF1ZXJ5U3RyaW5nKHJlZmluZVVybCk7XHJcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gcXVlcnk7XHJcbiAgICAgICAgICAgIGlmIChyZWZpbmVVcmwgPT09IHdpbmRvdy5sb2NhdGlvbi5ocmVmKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdXBkYXRlUHJvZHVjdExpc3RpbmcocmVmaW5lVXJsKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgY29tcGFyZVdpZGdldC5pbml0KCk7XHJcbiAgICBpZiAoU2l0ZVByZWZlcmVuY2VzLkxJU1RJTkdfSU5GSU5JVEVfU0NST0xMKSB7XHJcbiAgICAgICAgJCh3aW5kb3cpLm9uKCdzY3JvbGwnLCBpbmZpbml0ZVNjcm9sbCk7XHJcbiAgICB9XHJcbiAgICBwcm9kdWN0VGlsZS5pbml0KCk7XHJcbiAgICBpbml0aWFsaXplRXZlbnRzKCk7XHJcbn07XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIG93bCA9ICQoJy5vd2wtY2Fyb3VzZWwnKTtcclxuICAgIG93bC5vd2xDYXJvdXNlbCh7XHJcbiAgICAgICAgaXRlbXM6IDEsXHJcbiAgICAgICAgbG9vcDogdHJ1ZSxcclxuICAgICAgICBkb3RzOiB0cnVlLFxyXG4gICAgICAgIGF1dG9wbGF5OiB0cnVlLFxyXG4gICAgICAgIGF1dG9wbGF5VGltZW91dDogNzAwMCxcclxuICAgICAgICBhdXRvcGxheUhvdmVyUGF1c2U6IHRydWUsXHJcbiAgICAgICAgYW5pbWF0ZU91dDogJ2ZhZGVPdXQnLFxyXG4gICAgICAgIHJlc3BvbnNpdmU6IHtcclxuICAgICAgICAgICAgMDoge1xyXG4gICAgICAgICAgICAgICAgaXRlbXM6IDFcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgNjAwOiB7XHJcbiAgICAgICAgICAgICAgICBpdGVtczogMVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAxMDAwOiB7XHJcbiAgICAgICAgICAgICAgICBpdGVtczogMVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn07XHJcbiIsIid1c2Ugc3RyaWN0JztcclxudmFyIGRpYWxvZyA9IHJlcXVpcmUoJy4uL2RpYWxvZycpLFxyXG4gICAgdXRpbCA9IHJlcXVpcmUoJy4uL3V0aWwnKSxcclxuICAgIHZhbGlkYXRvciA9IHJlcXVpcmUoJy4uL3ZhbGlkYXRvcicpO1xyXG5cclxuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgJCgnLnN0b3JlLWRldGFpbHMtbGluaycpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGRpYWxvZy5vcGVuKHtcclxuICAgICAgICAgICAgdXJsOiAkKGUudGFyZ2V0KS5hdHRyKCdocmVmJylcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgc3RvcmVMb2NhdG9yLmluaXQoKTtcclxufTtcclxuJCgnLmN1c3RvbWVyc3VibWl0Jykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKCQoJy5mbG9hdGxlZnQuc3RhdGUuY3VzdG9tLXNlbGVjdCBzZWxlY3QnKS52YWxpZCgpID09IDApIHtcclxuICAgICAgICBpZiAoISQoJy5mbG9hdGxlZnQuc3RhdGUuY3VzdG9tLXNlbGVjdCcpLmhhc0NsYXNzKCdibHVyZWQnKSkge1xyXG4gICAgICAgICAgICAkKCcuZmxvYXRsZWZ0LnN0YXRlLmN1c3RvbS1zZWxlY3QnKS5hZGRDbGFzcygnY3VzdG9tc2VsZWN0LWVycm9yJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAkKCcuZmxvYXRsZWZ0LnN0YXRlLmN1c3RvbS1zZWxlY3QnKS5yZW1vdmVDbGFzcygnY3VzdG9tc2VsZWN0LWVycm9yJyk7XHJcbiAgICB9XHJcbn0pO1xyXG52YXIgc3RvcmVMb2NhdG9yID0ge1xyXG4gICAgaW5pdDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhbGlkYXRvci5pbml0KCk7XHJcbiAgICAgICAgJCgnLmdvb2dsZW1hcCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgd2luZG93Lm9wZW4odGhpcy5uYW1lKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKCdib2R5JykuZmluZCgnZm9ybS5sb2NhdG9yRm9ybScpLnN1Ym1pdChmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHZhciAkZm9ybSA9IGpRdWVyeSh0aGlzKTtcclxuICAgICAgICAgICAgaWYgKCQoJyNsb2NhdG9yRm9ybSBidXR0b24nKS5wcm9wKCdkaXNhYmxlZCcpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJCgnI25vcmVzdWx0c2Vycm9yJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKCcjbWVzc2FnZS5zdWNjZXNzJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKCcjcmVzdWx0cycpLmhpZGUoKTtcclxuICAgICAgICAgICAgJCgnI2xvY2F0b3JGb3JtIGJ1dHRvbicpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHZhciBwYXJhbSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBjb3VudHJ5Q29kZTogJ1VTJyxcclxuICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZVVuaXQ6ICdtaScsXHJcbiAgICAgICAgICAgICAgICAgICAgcG9zdGFsQ29kZTogJCgnLnBvc3RhbENoZWNrJykudmFsKCksXHJcbiAgICAgICAgICAgICAgICAgICAgbWF4ZGlzdGFuY2U6ICQoJy5teGRpc3RhbmNlQ2hlY2snKS52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICByYXBhbGE6ICQoJy5yYXBhbGFDaGVjaycpLnByb3AoJ2NoZWNrZWQnKSxcclxuICAgICAgICAgICAgICAgICAgICB2bWM6ICQoJy52bWNDaGVjaycpLnByb3AoJ2NoZWNrZWQnKSxcclxuICAgICAgICAgICAgICAgICAgICBzdG9ybTogJCgnLnN0b3JtQ2hlY2snKS5wcm9wKCdjaGVja2VkJyksXHJcbiAgICAgICAgICAgICAgICAgICAgbHVocmplbnNlbjogJCgnLmx1aHJDaGVjaycpLnByb3AoJ2NoZWNrZWQnKSxcclxuICAgICAgICAgICAgICAgICAgICBibHVlZm94OiAkKCcuYmx1ZWZveENoZWNrJykucHJvcCgnY2hlY2tlZCcpLFxyXG4gICAgICAgICAgICAgICAgICAgIHRlcm1pbmF0b3I6ICQoJy50ZXJtaW5hdG9yQ2hlY2snKS5wcm9wKCdjaGVja2VkJyksXHJcbiAgICAgICAgICAgICAgICAgICAgd2lsbGlhbXNvbjogJCgnLndpbGxpYW1DaGVjaycpLnByb3AoJ2NoZWNrZWQnKSxcclxuICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyeDogJCgnLnRyaWdnZXJDaGVjaycpLnByb3AoJ2NoZWNrZWQnKSxcclxuICAgICAgICAgICAgICAgICAgICBzdWZpeDogJCgnLnN1Zml4Q2hlY2snKS5wcm9wKCdjaGVja2VkJyksXHJcbiAgICAgICAgICAgICAgICAgICAgbWFyY3VtOiAkKCcubWFyY3VtQ2hlY2snKS5wcm9wKCdjaGVja2VkJyksXHJcbiAgICAgICAgICAgICAgICAgICAgc3RyaWtlbWFzdGVyOiAkKCcuc3RyaWtlQ2hlY2snKS5wcm9wKCdjaGVja2VkJylcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBzZXJ2aWNlUGFyYW0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY291bnRyeUNvZGU6ICdVUycsXHJcbiAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2VVbml0OiAnbWknLFxyXG4gICAgICAgICAgICAgICAgICAgIHBvc3RhbENvZGU6ICQoJy5wb3N0YWxDaGVjaycpLnZhbCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIG1heGRpc3RhbmNlOiAkKCcubXhkaXN0YW5jZUNoZWNrJykudmFsKClcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHZhciB1cmwgPSB1dGlsLmFwcGVuZFBhcmFtc1RvVXJsKFVybHMuc3RvcmVKc29uLCBwYXJhbSksXHJcbiAgICAgICAgICAgICAgICBzZXJ2aWNlVXJsID0gdXRpbC5hcHBlbmRQYXJhbXNUb1VybChVcmxzLnNlcnZpY2VTdG9yZUpzb24sIHNlcnZpY2VQYXJhbSk7XHJcbiAgICAgICAgICAgIGlmICgkKCcuc3RvcmUtTG9jYXRvci1wYWdlJykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogJGZvcm0uc2VyaWFsaXplKCksXHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWxlcnQoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNsb2NhdG9yRm9ybSBidXR0b24nKS5yZW1vdmVQcm9wKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5zdG9yZUNvdW50ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3N0b3JlQ291bnQnKS5odG1sKGRhdGEuc3RvcmVDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjbWVzc2FnZS5zdWNjZXNzJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0b3JlID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaHRtbCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFsbFN0b3JlSHRtbCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLnN0b3Jlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlID0gZGF0YS5zdG9yZXNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwucHVzaCgnPGRpdiBjbGFzcz1cInN0b3JlcmVzdWx0XCI+PGRpdiBjbGFzcz1cInN0b3JlaW5mb3JtYXRpb25cIj4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sLnB1c2goJzxoMiBjbGFzcz1cImlucHV0LXN0eWxlXCI+JyArIHN0b3JlLm5hbWUgKyAnPC9oMj4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sLnB1c2goJzxkaXY+JyArIHN0b3JlLmFkZHJlc3MxICsgJzxici8+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbC5wdXNoKHN0b3JlLmNpdHkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdG9yZS5jaXR5ICE9ICcnICYmIHN0b3JlLnN0YXRlICE9ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwucHVzaCgnLCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sLnB1c2goc3RvcmUuc3RhdGUgKyAnICcgKyBzdG9yZS5wb3N0YWxDb2RlICsgJzxiciAvPicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdG9yZS5waG9uZSAhPSAnJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sLnB1c2goJzxkaXYgY2xhc3M9XCJzdG9yZXBob25lXCI+JyArIHN0b3JlLnBob25lICsgJzwvZGl2PicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RvcmUuc3RvcmVIb3VycyAhPSAnJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sLnB1c2goJzxkaXYgY2xhc3M9XCJzdG9yZUhvdXJzXCI+JyArIHN0b3JlLnN0b3JlSG91cnMgKyAnPC9kaXY+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdG9yZS5zdG9yZUV2ZW50cyAhPSAnJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sLnB1c2goJzxkaXYgY2xhc3M9XCJzdG9yZUV2ZW50c1wiPicgKyBzdG9yZS5zdG9yZUV2ZW50cyArICc8L2Rpdj4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbC5wdXNoKCc8L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPVwic3RvcmVicmFuZHNcIj4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sLnB1c2goJzxzcGFuIGNsYXNzPVwiYnJhbmRsYWJlbFwiPicgKyBSZXNvdXJjZXMuQlJBTkRfQ0FURUdPUlkxICsgJzwvc3Bhbj48aHI+PC9ocj4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RvcmUuY3VzdG9tLmJyYW5kcy5yYXBhbGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbC5wdXNoKCc8aW1nIGFsdD0nICsgUmVzb3VyY2VzLlNUT1JFTE9DQVRFUl9SQVBBTEEgKyAnIGNsYXNzPVwibG9nbyBtZWRpdW1cIiBzcmM9JyArIFVybHMucmFwYWxhbG9nbyArICc+PC9pbWc+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdG9yZS5jdXN0b20uYnJhbmRzLnZtYykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sLnB1c2goJzxpbWcgYWx0PScgKyBSZXNvdXJjZXMuU1RPUkVMT0NBVEVSX1ZNQyArICcgY2xhc3M9XCJsb2dvIG1lZGl1bVwiIHNyYz0nICsgVXJscy52bWNsb2dvICsgJz48L2ltZz4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0b3JlLmN1c3RvbS5icmFuZHMuc3VmaXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbC5wdXNoKCc8aW1nIGFsdD0nICsgUmVzb3VyY2VzLlNUT1JFTE9DQVRFUl9TVUZJWCArICcgY2xhc3M9XCJsb2dvIG1lZGl1bVwiIHNyYz0nICsgVXJscy5zdWZpeGxvZ28gKyAnPjwvaW1nPicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RvcmUuY3VzdG9tLmJyYW5kcy5zdG9ybSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sLnB1c2goJzxpbWcgYWx0PScgKyBSZXNvdXJjZXMuU1RPUkVMT0NBVEVSX1NUT1JNICsgJyBjbGFzcz1cImxvZ28gbWVkaXVtXCIgc3JjPScgKyBVcmxzLnN0b3JtbG9nbyArICc+PC9pbWc+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdG9yZS5jdXN0b20uYnJhbmRzLnRyaWdnZXJ4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwucHVzaCgnPGltZyBhbHQ9JyArIFJlc291cmNlcy5TVE9SRUxPQ0FURVJfVFJJR0dFUlggKyAnIGNsYXNzPVwibG9nbyBtZWRpdW1cIiBzcmM9JyArIFVybHMudHJpZ2dlcnhsb2dvICsgJz48L2ltZz4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0b3JlLmN1c3RvbS5icmFuZHMubHVocmplbnNlbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sLnB1c2goJzxpbWcgYWx0PScgKyBSZXNvdXJjZXMuU1RPUkVMT0NBVEVSX0xVSFJKT05TT04gKyAnIGNsYXNzPVwibG9nbyBtZWRpdW1cIiBzcmM9JyArIFVybHMubHVocmpvbnNvbmxvZ28gKyAnPjwvaW1nPicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RvcmUuY3VzdG9tLmJyYW5kcy50ZXJtaW5hdG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwucHVzaCgnPGltZyBhbHQ9JyArIFJlc291cmNlcy5TVE9SRUxPQ0FURVJfVEVSTUlOQVRPUiArICcgY2xhc3M9XCJsb2dvIG1lZGl1bVwiIHNyYz0nICsgVXJscy50ZXJtaW5hdG9ybG9nbyArICc+PC9pbWc+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdG9yZS5jdXN0b20uYnJhbmRzLmJsdWVmb3gpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbC5wdXNoKCc8aW1nIGFsdD0nICsgUmVzb3VyY2VzLlNUT1JFTE9DQVRFUl9CTFVFRk9YICsgJyBjbGFzcz1cImxvZ28gbWVkaXVtXCIgc3JjPScgKyBVcmxzLmJsdWVmb3hsb2dvICsgJz48L2ltZz4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0b3JlLmN1c3RvbS5icmFuZHMud2lsbGlhbXNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sLnB1c2goJzxpbWcgYWx0PScgKyBSZXNvdXJjZXMuU1RPUkVMT0NBVEVSX1dJTExJQU1TT04gKyAnIGNsYXNzPVwibG9nbyBtZWRpdW1cIiBzcmM9JyArIFVybHMud2lsbGlhbXNvbmxvZ28gKyAnPjwvaW1nPicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RvcmUuY3VzdG9tLmJyYW5kcy5tYXJjdW0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbC5wdXNoKCc8aW1nIGFsdD0nICsgUmVzb3VyY2VzLlNUT1JFTE9DQVRFUl9NQVJDVU0gKyAnIGNsYXNzPVwibG9nbyBtZWRpdW1cIiBzcmM9JyArIFVybHMubWFyY3VtbG9nbyArICc+PC9pbWc+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdG9yZS5jdXN0b20uYnJhbmRzLnN0cmlrZW1hc3Rlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sLnB1c2goJzxpbWcgYWx0PScgKyBSZXNvdXJjZXMuU1RPUkVMT0NBVEVSX1NUUklLRU1BU1RFUiArICcgY2xhc3M9XCJsb2dvIG1lZGl1bVwiIHNyYz0nICsgVXJscy5zdHJpa2VtYXN0ZXJsb2dvICsgJz48L2ltZz4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogaWYoc3RvcmUuY3VzdG9tLmJyYW5kcy5vdHRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sLnB1c2goJzxpbWcgYWx0PVwiJHtSZXNvdXJjZS5tc2coJ3N0b3JlbG9jYXRvci5vdHRlcicsJ2Zvcm1zJyxudWxsKX1cIiBjbGFzcz1cImxvZ28gbWVkaXVtXCIgc3JjPVwiJHtVUkxVdGlscy5zdGF0aWNVUkwoJy9pbWFnZXMvbG9nby1vdHRlci5qcGcnKX1cIj48L2ltZz4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbC5wdXNoKCc8L2Rpdj4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sLnB1c2goJzxkaXYgY2xhc3M9XCJzdG9yZW1hcFwiPjxhIGNsYXNzPVwiYnV0dG9uIGdvb2dsZW1hcFwiIG5hbWU9XCInICsgc3RvcmUubWFwICsgJ1wiPicgKyBSZXNvdXJjZXMuU1RPUkVMT0NBVEVSX01BUCArICc8L2E+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0b3JlLndlYnNpdGUgIT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbC5wdXNoKCc8YnIgLz48YSB0YXJnZXQ9XCJfYmxhbmtcIiBjbGFzcz1cImJ1dHRvblwiIGhyZWY9XCInICsgc3RvcmUud2Vic2l0ZSArICdcIj4nICsgUmVzb3VyY2VzLlNUT1JFTE9DQVRFUl9XRUJTSVRFICsgJzwvYT4nKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwucHVzaCgnPC9kaXY+PGRpdiBjbGFzcz1cImNsZWFyXCI+PCEtLSBGTE9BVCBDTEVBUiAtLT48L2Rpdj48L2Rpdj4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxTdG9yZUh0bWwgKz0gaHRtbC5qb2luKCcnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJ2Rpdi5zdG9yZWxvY2F0b3JzZWFyY2hyZXN1bHRzJykuaHRtbChhbGxTdG9yZUh0bWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3Jlc3VsdHMnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjbWVzc2FnZS5zdWNjZXNzJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3Jlc3VsdHMnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjbm9yZXN1bHRzZXJyb3InKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuU3RhdHVzID09PSA0MDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSgnLmVtYWlsLWZvcm0gI21lc3NhZ2UnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcygnc3VjY2Vzcy1lbWFpbCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKCdlcnJvci1hbGVydCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmh0bWwoZGF0YS5NZXNzYWdlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7IC8vIDIwMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmVtYWlsLWZvcm0gI21lc3NhZ2UnKS5yZW1vdmVDbGFzcygnZXJyb3ItYWxlcnQnKS5hZGRDbGFzcygnc3VjY2Vzcy1lbWFpbCcpLmh0bWwoJ1lvdSBoYXZlIHN1Y2Nlc3NmdWxseSBzdWJzY3JpYmVkIHRvIHRoZSBSYXBhbGEgRW1haWwgTmV3c2xldHRlci4nKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuZW1haWwtZm9ybSBpbnB1dCwgLmVtYWlsLWZvcm0gc2VsZWN0JykudmFsKCcnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuZ29vZ2xlbWFwJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm9wZW4odGhpcy5uYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoJCgnLnNlcnZpY2UtbG9jYXRvci1mb3JtJykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBzZXJ2aWNlVXJsLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6ICRmb3JtLnNlcmlhbGl6ZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFsZXJ0KGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjbG9jYXRvckZvcm0gYnV0dG9uJykucmVtb3ZlUHJvcCgnZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuc3RvcmVDb3VudCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNzdG9yZUNvdW50JykuaHRtbChkYXRhLnN0b3JlQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI21lc3NhZ2Uuc3VjY2VzcycpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdG9yZSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGh0bWwgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbGxTdG9yZUh0bWwgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5zdG9yZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9yZSA9IGRhdGEuc3RvcmVzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sLnB1c2goJzxkaXYgY2xhc3M9XCJzdG9yZXJlc3VsdFwiPjxkaXYgY2xhc3M9XCJzdG9yZWluZm9ybWF0aW9uXCI+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbC5wdXNoKCc8aDIgY2xhc3M9XCJpbnB1dC1zdHlsZVwiPicgKyBzdG9yZS5uYW1lICsgJzwvaDI+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbC5wdXNoKCc8ZGl2PicgKyBzdG9yZS5hZGRyZXNzMSArICc8YnIvPicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwucHVzaChzdG9yZS5jaXR5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RvcmUuY2l0eSAhPSAnJyAmJiBzdG9yZS5zdGF0ZSAhPSAnJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sLnB1c2goJywnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbC5wdXNoKHN0b3JlLnN0YXRlICsgJyAnICsgc3RvcmUucG9zdGFsQ29kZSArICc8YnIgLz4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RvcmUucGhvbmUgIT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbC5wdXNoKCc8ZGl2IGNsYXNzPVwic3RvcmVwaG9uZVwiPicgKyBzdG9yZS5waG9uZSArICc8L2Rpdj4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0b3JlLnN0b3JlSG91cnMgIT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbC5wdXNoKCc8ZGl2IGNsYXNzPVwic3RvcmVIb3Vyc1wiPicgKyBzdG9yZS5zdG9yZUhvdXJzICsgJzwvZGl2PicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RvcmUuc3RvcmVFdmVudHMgIT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbC5wdXNoKCc8ZGl2IGNsYXNzPVwic3RvcmVFdmVudHNcIj4nICsgc3RvcmUuc3RvcmVFdmVudHMgKyAnPC9kaXY+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwucHVzaCgnPC9kaXY+PC9kaXY+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbC5wdXNoKCc8ZGl2IGNsYXNzPVwic3RvcmVtYXBcIj48ZGl2IGNsYXNzPVwic3RvcmVkaXN0YW5jZVwiPicgKyBzdG9yZS5kaXN0YW5jZSArICc8L2Rpdj48YSBjbGFzcz1cImJ1dHRvbiBnb29nbGVtYXBcIiBuYW1lPVwiJyArIHN0b3JlLm1hcCArICdcIj4nICsgUmVzb3VyY2VzLlNUT1JFTE9DQVRFUl9NQVAgKyAnPC9hPicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdG9yZS53ZWJzaXRlICE9ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwucHVzaCgnPGJyIC8+PGEgdGFyZ2V0PVwiX2JsYW5rXCIgY2xhc3M9XCJidXR0b25cIiBocmVmPVwiJyArIHN0b3JlLndlYnNpdGUgKyAnXCI+JyArIFJlc291cmNlcy5TVE9SRUxPQ0FURVJfV0VCU0lURSArICc8L2E+Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sLnB1c2goJzwvZGl2PjxkaXYgY2xhc3M9XCJjbGVhclwiPjwhLS0gRkxPQVQgQ0xFQVIgLS0+PC9kaXY+PC9kaXY+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsU3RvcmVIdG1sICs9IGh0bWwuam9pbignJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCdkaXYuc3RvcmVsb2NhdG9yc2VhcmNocmVzdWx0cycpLmh0bWwoYWxsU3RvcmVIdG1sKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNyZXN1bHRzJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI21lc3NhZ2Uuc3VjY2VzcycpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNyZXN1bHRzJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI25vcmVzdWx0c2Vycm9yJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5nb29nbGVtYXAnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cub3Blbih0aGlzLm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vJCgnI2xvY2F0b3JGb3JtJykuZGF0YSgndmFsaWRhdG9yJywnJykudmFsaWRhdGUoc3RvcmVsb2NhdG9yRm9ybVNldHRpbmdzKTtcclxuICAgIH1cclxufTtcclxubW9kdWxlLmV4cG9ydHMgPSBzdG9yZUxvY2F0b3I7XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuXHJcbnZhciBwYWdlID0gcmVxdWlyZSgnLi4vcGFnZScpLFxyXG4gICAgYWNjb3VudCA9IHJlcXVpcmUoJy4vYWNjb3VudCcpLFxyXG4gICAgdXRpbCA9IHJlcXVpcmUoJy4uL3V0aWwnKTtcclxuXHJcbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vU3RhcnQgSklSQSBQUkVWLTQxMiA6IFNHIElzc3VlOiBQYXNzd29yZCByZXNldCBvdmVybGF5IGRpc3BsYXllZCBhcyBhIHBhZ2VcclxuICAgIGFjY291bnQuaW5pdENhcnRMb2dpbigpO1xyXG4gICAgJCgnI2VkaXRBZGRyZXNzJykub24oJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBwYWdlLnJlZGlyZWN0KHV0aWwuYXBwZW5kUGFyYW1Ub1VSTChVcmxzLndpc2hsaXN0QWRkcmVzcywgJ0FkZHJlc3NJRCcsICQodGhpcykudmFsKCkpKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vYWRkIGpzIGxvZ2ljIHRvIHJlbW92ZSB0aGUgLCBmcm9tIHRoZSBxdHkgZmVpbGQgdG8gcGFzcyByZWdleCBleHByZXNzaW9uIG9uIGNsaWVudCBzaWRlXHJcbiAgICAkKCcub3B0aW9uLXF1YW50aXR5LWRlc2lyZWQgaW5wdXQnKS5vbignZm9jdXNvdXQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCh0aGlzKS52YWwoJCh0aGlzKS52YWwoKS5yZXBsYWNlKCcsJywgJycpKTtcclxuICAgIH0pO1xyXG59O1xyXG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG52YXIgaW1hZ2VzTG9hZGVkID0gcmVxdWlyZSgnaW1hZ2VzbG9hZGVkJyksXHJcbiAgICB1dGlsID0gcmVxdWlyZSgnLi91dGlsJyksXHJcbiAgICBxdWlja3ZpZXcgPSByZXF1aXJlKCcuL3F1aWNrdmlldycpO1xyXG5cclxuZnVuY3Rpb24gaW5pdFF1aWNrVmlld0J1dHRvbnMoKSB7XHJcbiAgICAkKCcucHJvZHVjdC10aWxlIC5wcm9kdWN0LWltYWdlJykub24oJ21vdXNlZW50ZXInLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyICRxdkJ1dHRvbiA9ICQoJyNxdWlja3ZpZXdidXR0b24nKTtcclxuICAgICAgICBpZiAoJHF2QnV0dG9uLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAkcXZCdXR0b24gPSAkKCc8YSBpZD1cInF1aWNrdmlld2J1dHRvblwiIGNsYXNzPVwicXVpY2t2aWV3XCI+JyArIFJlc291cmNlcy5RVUlDS19WSUVXICsgJzxpIGNsYXNzPVwiZmEgZmEtYXJyb3dzLWFsdFwiPjwvaT48L2E+Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciAkbGluayA9ICQodGhpcykuZmluZCgnLnRodW1iLWxpbmsnKTtcclxuICAgICAgICAkcXZCdXR0b24uYXR0cih7XHJcbiAgICAgICAgICAgICdocmVmJzogJGxpbmsuYXR0cignaHJlZicpLFxyXG4gICAgICAgICAgICAndGl0bGUnOiAkbGluay5hdHRyKCd0aXRsZScpXHJcbiAgICAgICAgfSkuYXBwZW5kVG8odGhpcyk7XHJcbiAgICAgICAgJHF2QnV0dG9uLm9mZignY2xpY2snKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHF1aWNrdmlldy5zaG93KHtcclxuICAgICAgICAgICAgICAgIHVybDogJCh0aGlzKS5hdHRyKCdocmVmJykuc3BsaXQoJyMnKVswXSwgLy9QUkVWIEpJUkEgUFJFVi0yNTUgOlBMUDogT24gQ2xpY2sgUXVpY2sgdmlldyBuYXZpZ2F0aW5nIHRvIGEgd3JvbmcgcGFnZSB3aGVuIHVzZXIgZmlyc3QgY2hhbmdlcyB0aGUgc3dhdGNoZXMuIFRha2luZyBvbmx5IGhyZWYuXHJcbiAgICAgICAgICAgICAgICBzb3VyY2U6ICdxdWlja3ZpZXcnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdyaWRWaWV3VG9nZ2xlKCkge1xyXG4gICAgdmFyIENvb2tpZUltYWdlVmFsdWUgPSB1dGlsLnJlYWRDb29raWUoJ0ltYWdlU2l6ZScpO1xyXG4gICAgLy9UaGlzIGlzIHVzZWQgdG8gcGVyc2lzdCB0aGUgSW1hZ2VTaXplcyBvdmVyYWxsIHNpdGUuXHJcbiAgICBpZiAoQ29va2llSW1hZ2VWYWx1ZSAhPSBudWxsKSB7XHJcbiAgICAgICAgaWYgKENvb2tpZUltYWdlVmFsdWUgPT0gJ2xpc3R2aWV3Jykge1xyXG4gICAgICAgICAgICBqUXVlcnkoJy5zZWFyY2gtcmVzdWx0LWNvbnRlbnQnKS5hZGRDbGFzcygnd2lkZS10aWxlcycpO1xyXG4gICAgICAgICAgICBqUXVlcnkoJy5wcm9kdWN0LWltYWdlJykuYWRkQ2xhc3MoJ2dyaWQnKTtcclxuICAgICAgICAgICAgJCgnLnRvZ2dsZS1ncmlkIGknKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICQoJy50b2dnbGUtZ3JpZCAubGlzdHZpZXcnKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICQoJy5zZWFyY2gtcmVzdWx0LWNvbnRlbnQud2lkZS10aWxlcyAucHJvZHVjdC10aWxlIC5wcm9kdWN0LWltYWdlIGltZycpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zcmMgPSB0aGlzLnNyYy5yZXBsYWNlKCdzdz0xMzAmc2g9OTInLCAnc3c9MzUyJnNoPTI1MScpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJCgnLnByb2R1Y3QtaW1nJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ2ltZycpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hcHBlbmQoJzxpbWcgc3JjPVwiJyArICQodGhpcykuYXR0cignZGF0YS1sYXJnZS1zcmMnKSArICdcIiB0aXRsZT1cIicgKyAkKHRoaXMpLmF0dHIoJ2RhdGEtdGl0bGUnKSArICdcIiBhbHQ9XCInICsgJCh0aGlzKS5hdHRyKCdkYXRhLWFsdCcpICsgJ1wiPjwvaW1nPicpO1xyXG5cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGpRdWVyeSgnLnNlYXJjaC1yZXN1bHQtY29udGVudCcpLnJlbW92ZUNsYXNzKCd3aWRlLXRpbGVzJyk7XHJcbiAgICAgICAgICAgIGpRdWVyeSgnLnByb2R1Y3QtaW1hZ2UnKS5yZW1vdmVDbGFzcygnZ3JpZCcpO1xyXG4gICAgICAgICAgICAkKCcudG9nZ2xlLWdyaWQgaScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgJCgnLnRvZ2dsZS1ncmlkIC5ncmlkdmlldycpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgJCgnLnNlYXJjaC1yZXN1bHQtY29udGVudC53aWRlLXRpbGVzIC5wcm9kdWN0LXRpbGUgLnByb2R1Y3QtaW1hZ2UgaW1nJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNyYyA9IHRoaXMuc3JjLnJlcGxhY2UoJ3N3PTEzMCZzaD05MicsICdzdz0xMzAmc2g9OTInKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICQoJy5wcm9kdWN0LWltZycpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCdpbWcnKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykuYXBwZW5kKCc8aW1nIHNyYz1cIicgKyAkKHRoaXMpLmF0dHIoJ2RhdGEtc21hbGwtc3JjJykgKyAnXCIgdGl0bGU9XCInICsgJCh0aGlzKS5hdHRyKCdkYXRhLXRpdGxlJykgKyAnXCIgYWx0PVwiJyArICQodGhpcykuYXR0cignZGF0YS1hbHQnKSArICdcIj48L2ltZz4nKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoJCgnLmxpc3R2aWV3LmFjdGl2ZScpLmxlbmd0aCA9PSAxKSB7XHJcbiAgICAgICAgICAgICQoJy5wdF9wcm9kdWN0LXNlYXJjaC1yZXN1bHQnKS5hdHRyKCdkYXRhLXZpZXdUeXBlJywgJ2xpc3R2aWV3Jyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJCgnLnB0X3Byb2R1Y3Qtc2VhcmNoLXJlc3VsdCcpLmF0dHIoJ2RhdGEtdmlld1R5cGUnLCAnZ3JpZHZpZXcnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgJCgnLnRvZ2dsZS1ncmlkIGknKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGRhdGVPYmogPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIGRhdGVPYmouc2V0VGltZShkYXRlT2JqLmdldFRpbWUoKSArICg2MCAqIDYwICogMTAwMCkpO1xyXG4gICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdncmlkdmlldycpKSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmNvb2tpZSA9ICdJbWFnZVNpemU9JyArICdncmlkdmlldycgKyAnOyBleHBpcmVzPScgKyBkYXRlT2JqLnRvVVRDU3RyaW5nKCkgKyAnOyBwYXRoPS8nO1xyXG4gICAgICAgICAgICAkKCcudG9nZ2xlLWdyaWQgaScpLnBhcmVudCgnLnRvZ2dsZS1ncmlkJykucmVtb3ZlQ2xhc3MoJ3dpZGUnKTtcclxuICAgICAgICAgICAgJCgnLnRvZ2dsZS1ncmlkIGknKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICQodGhpcykucGFyZW50KCcudG9nZ2xlLWdyaWQnKS5yZW1vdmVDbGFzcygnd2lkZScpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgJCgnLnNlYXJjaC1yZXN1bHQtY29udGVudCcpLnJlbW92ZUNsYXNzKCd3aWRlLXRpbGVzJyk7XHJcbiAgICAgICAgICAgICQoJy5wcm9kdWN0LWltZycpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCdpbWcnKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykuYXBwZW5kKCc8aW1nIHNyYz1cIicgKyAkKHRoaXMpLmF0dHIoJ2RhdGEtbGFyZ2Utc3JjJykgKyAnXCIgdGl0bGU9XCInICsgJCh0aGlzKS5hdHRyKCdkYXRhLXRpdGxlJykgKyAnXCIgYWx0PVwiJyArICQodGhpcykuYXR0cignZGF0YS1hbHQnKSArICdcIj48L2ltZz4nKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdsaXN0dmlldycpKSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmNvb2tpZSA9ICdJbWFnZVNpemU9JyArICdsaXN0dmlldycgKyAnOyBleHBpcmVzPScgKyBkYXRlT2JqLnRvVVRDU3RyaW5nKCkgKyAnOyBwYXRoPS8nO1xyXG4gICAgICAgICAgICAkKCcudG9nZ2xlLWdyaWQgaScpLnBhcmVudCgnLnRvZ2dsZS1ncmlkJykucmVtb3ZlQ2xhc3MoJ3dpZGUnKTtcclxuICAgICAgICAgICAgJCgnLnRvZ2dsZS1ncmlkIGknKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICQodGhpcykucGFyZW50KCcudG9nZ2xlLWdyaWQnKS5hZGRDbGFzcygnd2lkZScpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgJCgnLnNlYXJjaC1yZXN1bHQtY29udGVudCcpLmFkZENsYXNzKCd3aWRlLXRpbGVzJyk7XHJcbiAgICAgICAgICAgICQoJy5zZWFyY2gtcmVzdWx0LWNvbnRlbnQud2lkZS10aWxlcyAucHJvZHVjdC10aWxlIC5wcm9kdWN0LWltYWdlIGltZycpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zcmMgPSB0aGlzLnNyYy5yZXBsYWNlKCdzdz0xMzAmc2g9OTInLCAnc3c9MzUyJnNoPTI1MScpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJCgnLnByb2R1Y3QtaW1nJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ2ltZycpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hcHBlbmQoJzxpbWcgc3JjPVwiJyArICQodGhpcykuYXR0cignZGF0YS1zbWFsbC1zcmMnKSArICdcIiB0aXRsZT1cIicgKyAkKHRoaXMpLmF0dHIoJ2RhdGEtdGl0bGUnKSArICdcIiBhbHQ9XCInICsgJCh0aGlzKS5hdHRyKCdkYXRhLWFsdCcpICsgJ1wiPjwvaW1nPicpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGN1cnJPYmogPSAkKHRoaXMpO1xyXG4gICAgICAgIGpRdWVyeSgnLnRvZ2dsZS1ncmlkIC5mYScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAkKGN1cnJPYmopLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICBpZiAoJCgnLmxhcmdlLmFjdGl2ZScpLmxlbmd0aCA9PSAxKSB7XHJcbiAgICAgICAgICAgICQoJy5wdF9wcm9kdWN0LXNlYXJjaC1yZXN1bHQnKS5hdHRyKCdkYXRhLXZpZXdUeXBlJywgJ2xpc3R2aWV3Jyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJCgnLnB0X3Byb2R1Y3Qtc2VhcmNoLXJlc3VsdCcpLmF0dHIoJ2RhdGEtdmlld1R5cGUnLCAnZ3JpZHZpZXcnKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAcHJpdmF0ZVxyXG4gKiBAZnVuY3Rpb25cclxuICogQGRlc2NyaXB0aW9uIEluaXRpYWxpemVzIGV2ZW50cyBvbiB0aGUgcHJvZHVjdC10aWxlIGZvciB0aGUgZm9sbG93aW5nIGVsZW1lbnRzOlxyXG4gKiAtIHN3YXRjaGVzXHJcbiAqIC0gdGh1bWJuYWlsc1xyXG4gKi9cclxuZnVuY3Rpb24gaW5pdGlhbGl6ZUV2ZW50cygpIHtcclxuICAgIGluaXRRdWlja1ZpZXdCdXR0b25zKCk7XHJcbiAgICBncmlkVmlld1RvZ2dsZSgpO1xyXG4gICAgJCgnLnN3YXRjaC1saXN0Jykub24oJ21vdXNlbGVhdmUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gUmVzdG9yZSBjdXJyZW50IHRodW1iIGltYWdlXHJcbiAgICAgICAgdmFyICR0aWxlID0gJCh0aGlzKS5jbG9zZXN0KCcucHJvZHVjdC10aWxlJyksXHJcbiAgICAgICAgICAgICR0aHVtYiA9ICR0aWxlLmZpbmQoJy5wcm9kdWN0LWltYWdlIC50aHVtYi1saW5rIGltZycpLmVxKDApLFxyXG4gICAgICAgICAgICBkYXRhID0gJHRodW1iLmRhdGEoJ2N1cnJlbnQnKTtcclxuICAgICAgICAkdGh1bWIuYXR0cih7XHJcbiAgICAgICAgICAgIHNyYzogZGF0YS5zcmMsXHJcbiAgICAgICAgICAgIGFsdDogZGF0YS5hbHQsXHJcbiAgICAgICAgICAgIHRpdGxlOiBkYXRhLnRpdGxlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJCgnLnNlYXJjaC1yZXN1bHQtY29udGVudC53aWRlLXRpbGVzIC5wcm9kdWN0LXRpbGUgLnByb2R1Y3QtaW1hZ2UgYS50aHVtYi1saW5rLmN1cnJlbnRpbWcgaW1nJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3JjID0gdGhpcy5zcmMucmVwbGFjZSgnc3c9MTMwJnNoPTkyJywgJ3N3PTM1MiZzaD0yNTEnKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgJCgnLnN3YXRjaC1saXN0IC5zd2F0Y2gnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnc2VsZWN0ZWQnKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgJHRpbGUgPSAkKHRoaXMpLmNsb3Nlc3QoJy5wcm9kdWN0LXRpbGUnKTtcclxuICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5zd2F0Y2gtbGlzdCcpLmZpbmQoJy5zd2F0Y2guc2VsZWN0ZWQnKS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcclxuICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICR0aWxlLmZpbmQoJy50aHVtYi1saW5rJykuYXR0cignaHJlZicsICQodGhpcykuYXR0cignaHJlZicpKTtcclxuICAgICAgICAkdGlsZS5maW5kKCduYW1lLWxpbmsnKS5hdHRyKCdocmVmJywgJCh0aGlzKS5hdHRyKCdocmVmJykpO1xyXG5cclxuICAgICAgICB2YXIgZGF0YSA9ICQodGhpcykuY2hpbGRyZW4oJ2ltZycpLmZpbHRlcignOmZpcnN0JykuZGF0YSgndGh1bWInKTtcclxuICAgICAgICB2YXIgJHRodW1iID0gJHRpbGUuZmluZCgnLnByb2R1Y3QtaW1hZ2UgLnRodW1iLWxpbmsgaW1nJykuZXEoMCk7XHJcbiAgICAgICAgdmFyIGN1cnJlbnRBdHRycyA9IHtcclxuICAgICAgICAgICAgc3JjOiBkYXRhLnNyYyxcclxuICAgICAgICAgICAgYWx0OiBkYXRhLmFsdCxcclxuICAgICAgICAgICAgdGl0bGU6IGRhdGEudGl0bGVcclxuICAgICAgICB9O1xyXG4gICAgICAgICR0aHVtYi5jbG9zZXN0KCcudGh1bWItbGluaycpLmFkZENsYXNzKCdjdXJyZW50aW1nJyk7XHJcbiAgICAgICAgJHRodW1iLmF0dHIoY3VycmVudEF0dHJzKTtcclxuICAgICAgICAkdGh1bWIuZGF0YSgnY3VycmVudCcsIGN1cnJlbnRBdHRycyk7XHJcblxyXG4gICAgICAgIC8qU3RhcnQgSklSQSBQUkVWLTQ2NiA6IFByb2R1Y3QgaW1hZ2VzIGFyZSBub3QgdXBkYXRpbmcgaW4gdGhlIGNvbXBhcmUgc2VjdGlvbiB3aGVuIHRoZSBjb2xvciBzd2F0Y2hlcyBhcmUgY2hhbmdlZCBpbiBQTFAuKi9cclxuICAgICAgICB2YXIgcGlkID0gJCh0aGlzKS5jbG9zZXN0KCcucHJvZHVjdC10aWxlJykuYXR0cignZGF0YS1pdGVtaWQnKTtcclxuICAgICAgICAkKCcuY29tcGFyZS1pdGVtcy1wYW5lbCAuY29tcGFyZS1pdGVtJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBjb21wYXJlaWQgPSAkKHRoaXMpLmF0dHIoJ2RhdGEtaXRlbWlkJyk7XHJcbiAgICAgICAgICAgIGlmIChwaWQgPT09IGNvbXBhcmVpZCkge1xyXG4gICAgICAgICAgICAgICAgdmFyICRjb21wYXJlID0gJCh0aGlzKS5maW5kKCcuY29tcGFyZS1pdGVtLWltYWdlJykuZXEoMCk7XHJcbiAgICAgICAgICAgICAgICAkY29tcGFyZS5hdHRyKGN1cnJlbnRBdHRycyk7XHJcbiAgICAgICAgICAgICAgICAkY29tcGFyZS5kYXRhKCdjdXJyZW50JywgY3VycmVudEF0dHJzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8qRW5kIEpJUkEgUFJFVi00NjYqL1xyXG4gICAgfSkuYmluZCgnbW91c2VlbnRlciBjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBnZXQgY3VycmVudCB0aHVtYiBkZXRhaWxzXHJcbiAgICAgICAgdmFyICR0aWxlID0gJCh0aGlzKS5jbG9zZXN0KCcucHJvZHVjdC10aWxlJyksXHJcbiAgICAgICAgICAgICR0aHVtYiA9ICR0aWxlLmZpbmQoJy5wcm9kdWN0LWltYWdlIC50aHVtYi1saW5rIGltZycpLmVxKDApLFxyXG4gICAgICAgICAgICBkYXRhID0gJCh0aGlzKS5jaGlsZHJlbignaW1nJykuZmlsdGVyKCc6Zmlyc3QnKS5kYXRhKCd0aHVtYicpLFxyXG4gICAgICAgICAgICBjdXJyZW50ID0gJHRodW1iLmRhdGEoJ2N1cnJlbnQnKTtcclxuXHJcbiAgICAgICAgLy8gSWYgdGhpcyBpcyB0aGUgZmlyc3QgdGltZSwgdGhlbiByZWNvcmQgdGhlIGN1cnJlbnQgaW1nXHJcbiAgICAgICAgaWYgKCFjdXJyZW50KSB7XHJcbiAgICAgICAgICAgICR0aHVtYi5kYXRhKCdjdXJyZW50Jywge1xyXG4gICAgICAgICAgICAgICAgc3JjOiAkdGh1bWJbMF0uc3JjLFxyXG4gICAgICAgICAgICAgICAgYWx0OiAkdGh1bWJbMF0uYWx0LFxyXG4gICAgICAgICAgICAgICAgdGl0bGU6ICR0aHVtYlswXS50aXRsZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFNldCB0aGUgdGlsZSBpbWFnZSB0byB0aGUgdmFsdWVzIHByb3ZpZGVkIG9uIHRoZSBzd2F0Y2ggZGF0YSBhdHRyaWJ1dGVzXHJcbiAgICAgICAgJHRodW1iLmF0dHIoe1xyXG4gICAgICAgICAgICBzcmM6IGRhdGEuc3JjLFxyXG4gICAgICAgICAgICBhbHQ6IGRhdGEuYWx0LFxyXG4gICAgICAgICAgICB0aXRsZTogZGF0YS50aXRsZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoJy5zZWFyY2gtcmVzdWx0LWNvbnRlbnQud2lkZS10aWxlcyAucHJvZHVjdC10aWxlIC5wcm9kdWN0LWltYWdlIGEudGh1bWItbGluay5jdXJyZW50aW1nIGltZycpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aGlzLnNyYyA9IHRoaXMuc3JjLnJlcGxhY2UoJ3N3PTEzMCZzaD05MicsICdzdz0zNTImc2g9MjUxJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciAkdGlsZXMgPSAkKCcudGlsZXMtY29udGFpbmVyIC5wcm9kdWN0LXRpbGUnKTtcclxuICAgIGlmICgkdGlsZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaW1hZ2VzTG9hZGVkKCcudGlsZXMtY29udGFpbmVyJykub24oJ2RvbmUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJHRpbGVzLnN5bmNIZWlnaHQoKVxyXG4gICAgICAgICAgICAuZWFjaChmdW5jdGlvbiAoaWR4KSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmRhdGEoJ2lkeCcsIGlkeCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICBpbml0aWFsaXplRXZlbnRzKCk7XHJcbn07XHJcblxyXG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG52YXIgJGxvYWRlcjtcclxuXHJcbi8qKlxyXG4gKiBAZnVuY3Rpb25cclxuICogQGRlc2NyaXB0aW9uIFNob3dzIGFuIEFKQVgtbG9hZGVyIG9uIHRvcCBvZiBhIGdpdmVuIGNvbnRhaW5lclxyXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGNvbnRhaW5lciBUaGUgRWxlbWVudCBvbiB0b3Agb2Ygd2hpY2ggdGhlIEFKQVgtTG9hZGVyIHdpbGwgYmUgc2hvd25cclxuICovXHJcbnZhciBzaG93ID0gZnVuY3Rpb24gKGNvbnRhaW5lcikge1xyXG4gICAgdmFyIHRhcmdldCA9ICghY29udGFpbmVyIHx8ICQoY29udGFpbmVyKS5sZW5ndGggPT09IDApID8gJCgnYm9keScpIDogJChjb250YWluZXIpO1xyXG4gICAgJGxvYWRlciA9ICRsb2FkZXIgfHwgJCgnLmxvYWRlcicpO1xyXG5cclxuICAgIGlmICgkbG9hZGVyLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICRsb2FkZXIgPSAkKCc8ZGl2Lz4nKS5hZGRDbGFzcygnbG9hZGVyJylcclxuICAgICAgICAgICAgLmFwcGVuZCgkKCc8ZGl2Lz4nKS5hZGRDbGFzcygnbG9hZGVyLWluZGljYXRvcicpLCAkKCc8ZGl2Lz4nKS5hZGRDbGFzcygnbG9hZGVyLWJnJykpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuICRsb2FkZXIuYXBwZW5kVG8odGFyZ2V0KS5zaG93KCk7XHJcbn07XHJcbi8qKlxyXG4gKiBAZnVuY3Rpb25cclxuICogQGRlc2NyaXB0aW9uIEhpZGVzIGFuIEFKQVgtbG9hZGVyXHJcbiAqL1xyXG52YXIgaGlkZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICgkbG9hZGVyKSB7XHJcbiAgICAgICAgJGxvYWRlci5oaWRlKCk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5leHBvcnRzLnNob3cgPSBzaG93O1xyXG5leHBvcnRzLmhpZGUgPSBoaWRlO1xyXG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG52YXIgcXVpY2t2aWV3ID0gcmVxdWlyZSgnLi9xdWlja3ZpZXcnKTtcclxuXHJcbmZ1bmN0aW9uIGluaXRRdWlja3ZpZXdCdXR0b25Bc3NldCgpIHtcclxuICAgICQoJy5wcm9kdWN0LWJ1eS1jb250ZW50LWFzc2V0Jykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgcXVpY2t2aWV3LnNob3coe1xyXG4gICAgICAgICAgICB1cmw6ICQodGhpcykuYXR0cignaHJlZicpLnNwbGl0KCcjJylbMF0sXHJcbiAgICAgICAgICAgIHNvdXJjZTogJ3F1aWNrdmlldydcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAod2luZG93LmlubmVyV2lkdGggPCAxMDI0KSB7XHJcbiAgICAgICAgICAgICQoJyNRdWlja1ZpZXdEaWFsb2cnKS5kaWFsb2coJ3dpZGdldCcpLnBvc2l0aW9uKHtcclxuICAgICAgICAgICAgICAgIG15OiAndG9wKzIwJyxcclxuICAgICAgICAgICAgICAgIGF0OiAndG9wJyxcclxuICAgICAgICAgICAgICAgIG9mOiB3aW5kb3dcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyICRxdWlja3ZpZXdBc3NldCA9ICQoJy5wcm9kdWN0LWJ1eS1jb250ZW50LWFzc2V0LWluaXQnKTtcclxuICAgIGlmICgkcXVpY2t2aWV3QXNzZXQubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaW5pdFF1aWNrdmlld0J1dHRvbkFzc2V0KCk7XHJcbn1cclxuXHJcbiIsIid1c2Ugc3RyaWN0JztcclxuXHJcbnZhciBkaWFsb2cgPSByZXF1aXJlKCcuL2RpYWxvZycpLFxyXG4gICAgcHJvZHVjdCA9IHJlcXVpcmUoJy4vcGFnZXMvcHJvZHVjdCcpLFxyXG4gICAgcHJvZ3Jlc3MgPSByZXF1aXJlKCcuL3Byb2dyZXNzJyksXHJcbiAgICB1dGlsID0gcmVxdWlyZSgnLi91dGlsJyksXHJcbiAgICBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XHJcblxyXG52YXIgbWFrZVVybCA9IGZ1bmN0aW9uICh1cmwsIHNvdXJjZSwgcHJvZHVjdExpc3RJRCkge1xyXG4gICAgaWYgKHNvdXJjZSkge1xyXG4gICAgICAgIHVybCA9IHV0aWwuYXBwZW5kUGFyYW1Ub1VSTCh1cmwsICdzb3VyY2UnLCBzb3VyY2UpO1xyXG4gICAgfVxyXG4gICAgaWYgKHByb2R1Y3RMaXN0SUQpIHtcclxuICAgICAgICB1cmwgPSB1dGlsLmFwcGVuZFBhcmFtVG9VUkwodXJsLCAncHJvZHVjdGxpc3RpZCcsIHByb2R1Y3RMaXN0SUQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHVybDtcclxufTtcclxuXHJcbnZhciByZW1vdmVQYXJhbSA9IGZ1bmN0aW9uICh1cmwpIHtcclxuICAgIGlmICh1cmwuaW5kZXhPZignPycpICE9PSAtMSkge1xyXG4gICAgICAgIHJldHVybiB1cmwuc3Vic3RyaW5nKDAsIHVybC5pbmRleE9mKCc/JykpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdXJsO1xyXG4gICAgfVxyXG59O1xyXG5cclxudmFyIHF1aWNrdmlldyA9IHtcclxuICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuZXhpc3RzKCkpIHtcclxuICAgICAgICAgICAgdGhpcy4kY29udGFpbmVyID0gJCgnPGRpdi8+JykuYXR0cignaWQnLCAnUXVpY2tWaWV3RGlhbG9nJykuYXBwZW5kVG8oZG9jdW1lbnQuYm9keSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucHJvZHVjdExpbmtzID0gJCgnI3NlYXJjaC1yZXN1bHQtaXRlbXMgLnRodW1iLWxpbmsnKS5tYXAoZnVuY3Rpb24gKGluZGV4LCB0aHVtYkxpbmspIHtcclxuICAgICAgICAgICAgcmV0dXJuICQodGh1bWJMaW5rKS5hdHRyKCdocmVmJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG5cclxuICAgIHNldHVwOiBmdW5jdGlvbiAocXZVcmwpIHtcclxuICAgICAgICB2YXIgJGJ0bk5leHQgPSAkKCcucXVpY2t2aWV3LW5leHQnKSxcclxuICAgICAgICAgICAgJGJ0blByZXYgPSAkKCcucXVpY2t2aWV3LXByZXYnKTtcclxuXHJcbiAgICAgICAgcHJvZHVjdC5pbml0KCk7XHJcblxyXG4gICAgICAgIHRoaXMucHJvZHVjdExpbmtJbmRleCA9IF8odGhpcy5wcm9kdWN0TGlua3MpLmZpbmRJbmRleChmdW5jdGlvbiAodXJsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZW1vdmVQYXJhbSh1cmwpID09PSByZW1vdmVQYXJhbShxdlVybCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIGhpZGUgdGhlIGJ1dHRvbnMgb24gdGhlIGNvbXBhcmUgcGFnZSBvciB3aGVuIHRoZXJlIGFyZSBubyBvdGhlciBwcm9kdWN0c1xyXG4gICAgICAgIGlmICh0aGlzLnByb2R1Y3RMaW5rcy5sZW5ndGggPD0gMSB8fCAkKCcuY29tcGFyZXJlbW92ZWNlbGwnKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICRidG5OZXh0LmhpZGUoKTtcclxuICAgICAgICAgICAgJGJ0blByZXYuaGlkZSgpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLyogIFN0YXJ0IEpJUkEgUFJFVi01MDogTmV4dCBhbmQgUHJldmlvdXMgbGlua3Mgd2lsbCBub3QgYmUgZGlzcGxheWVkIG9uIFBEUCBpZiB1c2VyIG5hdmlnYXRlIGZyb20gUXVpY2sgVmlldy5cclxuICAgICAgICAgICAgICBBZGRlZCBjdXJyZW50IFVSTCBwYXJhbWV0ZXJzIGFuZCBpbmRleCB0byB2aWV3ZnVsbGRldGFpbHMgbGlua1xyXG4gICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICB2YXIgYSA9ICQoJyN2aWV3LWZ1bGwtZGV0YWlscycpO1xyXG4gICAgICAgICAgICB2YXIgd2wgPSB3aW5kb3cubG9jYXRpb247XHJcbiAgICAgICAgICAgIHZhciBxc1BhcmFtcyA9ICh3bC5zZWFyY2gubGVuZ3RoID4gMSkgPyB1dGlsLmdldFF1ZXJ5U3RyaW5nUGFyYW1zKHdsLnNlYXJjaC5zdWJzdHIoMSkpIDoge307XHJcbiAgICAgICAgICAgIHZhciBoYXNoUGFyYW1zID0gKHdsLmhhc2gubGVuZ3RoID4gMSkgPyB1dGlsLmdldFF1ZXJ5U3RyaW5nUGFyYW1zKHdsLmhhc2guc3Vic3RyKDEpKSA6IHt9O1xyXG4gICAgICAgICAgICB2YXIgcGFyYW1zID0gJC5leHRlbmQoaGFzaFBhcmFtcywgcXNQYXJhbXMpO1xyXG4gICAgICAgICAgICBwYXJhbXMuc3RhcnQgPSBwYXJzZUludCh0aGlzLnByb2R1Y3RMaW5rSW5kZXgsIDEwKSArIDE7XHJcbiAgICAgICAgICAgIHZhciB0aWxlID0gJCgnI3NlYXJjaC1yZXN1bHQtaXRlbXMgLnByb2R1Y3QtdGlsZScpLmZpcnN0KCk7XHJcbiAgICAgICAgICAgIGlmICghcGFyYW1zLmNnaWQgJiYgdGlsZS5kYXRhKCdjZ2lkJykgIT09IG51bGwgJiYgdGlsZS5kYXRhKCdjZ2lkJykgIT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXMuY2dpZCA9IHRpbGUuZGF0YSgnY2dpZCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGEuYXR0cignaHJlZicsIGEuYXR0cignaHJlZicpICsgJyMnICsgJC5wYXJhbShwYXJhbXMpKTtcclxuICAgICAgICAgICAgLypFbmQgSklSQSBQUkVWLTUwKi9cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnByb2R1Y3RMaW5rSW5kZXggPT09IHRoaXMucHJvZHVjdExpbmtzLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgJGJ0bk5leHQuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMucHJvZHVjdExpbmtJbmRleCA9PT0gMCkge1xyXG4gICAgICAgICAgICAkYnRuUHJldi5hdHRyKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGJ0bk5leHQub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB0aGlzLm5hdmlnYXRlUXVpY2t2aWV3KDEpO1xyXG4gICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgJGJ0blByZXYub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB0aGlzLm5hdmlnYXRlUXVpY2t2aWV3KC0xKTtcclxuICAgICAgICB9LmJpbmQodGhpcykpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzdGVwIC0gSG93IG1hbnkgcHJvZHVjdHMgYXdheSBmcm9tIGN1cnJlbnQgcHJvZHVjdCB0byBuYXZpZ2F0ZSB0by4gTmVnYXRpdmUgbnVtYmVyIG1lYW5zIG5hdmlnYXRlIGJhY2t3YXJkXHJcbiAgICAgKi9cclxuICAgIG5hdmlnYXRlUXVpY2t2aWV3OiBmdW5jdGlvbiAoc3RlcCkge1xyXG4gICAgICAgIC8vIGRlZmF1bHQgc3RlcCB0byAwXHJcbiAgICAgICAgdGhpcy5wcm9kdWN0TGlua0luZGV4ICs9IChzdGVwID8gc3RlcCA6IDApO1xyXG4gICAgICAgIHZhciB1cmwgPSBtYWtlVXJsKHRoaXMucHJvZHVjdExpbmtzW3RoaXMucHJvZHVjdExpbmtJbmRleF0sICdxdWlja3ZpZXcnKTtcclxuICAgICAgICBkaWFsb2cucmVwbGFjZSh7XHJcbiAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICBjYWxsYmFjazogdGhpcy5zZXR1cC5iaW5kKHRoaXMsIHVybClcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gc2hvdyBxdWljayB2aWV3IGRpYWxvZ1xyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBvcHRpb25zLnVybCAtIHVybCBvZiB0aGUgcHJvZHVjdCBkZXRhaWxzXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gb3B0aW9ucy5zb3VyY2UgLSBzb3VyY2Ugb2YgdGhlIGRpYWxvZyB0byBiZSBhcHBlbmRlZCB0byBVUkxcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBvcHRpb25zLnByb2R1Y3RsaXN0aWQgLSB0byBiZSBhcHBlbmRlZCB0byBVUkxcclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IG9wdGlvbnMuY2FsbGJhY2sgLSBjYWxsYmFjayBvbmNlIHRoZSBkaWFsb2cgaXMgb3BlbmVkXHJcbiAgICAgKi9cclxuICAgIHNob3c6IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIHVybDtcclxuICAgICAgICBpZiAoIXRoaXMuZXhpc3RzKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5pbml0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHVybCA9IG1ha2VVcmwob3B0aW9ucy51cmwsIG9wdGlvbnMuc291cmNlLCBvcHRpb25zLnByb2R1Y3RsaXN0aWQpO1xyXG4gICAgICAgICQoJyNRdWlja1ZpZXdEaWFsb2cnKS5lbXB0eSgpO1xyXG4gICAgICAgIHZhciBxdWlja1ZpZXdEaWFsb2cgPSBkaWFsb2cuY3JlYXRlKHtcclxuICAgICAgICAgICAgdGFyZ2V0OiB0aGlzLiRjb250YWluZXIsXHJcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcclxuICAgICAgICAgICAgICAgIGhlaWdodDogNTMwLFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDc2MCxcclxuICAgICAgICAgICAgICAgIGRpYWxvZ0NsYXNzOiAncXVpY2t2aWV3JyxcclxuICAgICAgICAgICAgICAgIHRpdGxlOiBSZXNvdXJjZXMuUVVJQ0tfVklFV19QT1BVUFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcXVpY2tWaWV3RGlhbG9nLmRpYWxvZygnb3BlbicpO1xyXG4gICAgICAgIHByb2dyZXNzLnNob3coJyNRdWlja1ZpZXdEaWFsb2cnKTtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICQocXVpY2tWaWV3RGlhbG9nKS5hcHBlbmQoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICBwcm9kdWN0LmluaXQoKTtcclxuICAgICAgICAgICAgICAgIHByb2dyZXNzLmhpZGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vUFJFVkFJTC1BZGRlZCBmb3IgR0EgaW50ZWdyYXRpb25cclxuICAgICAgICAvL0dBY29tbWVudGVkXHJcbiAgICAgICAgaWYgKGlzRXZlbnRUcmFja2luZ0VuYWJsZWQgJiYgaXNHb29nbGVBbmFseXRpY3NFbmFibGVkKSB7XHJcbiAgICAgICAgICAgIGdvb2dsZUFuYWx5dGljc0V2ZW50cy5xdWlja1ZpZXcoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgZXhpc3RzOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuJGNvbnRhaW5lciAmJiAodGhpcy4kY29udGFpbmVyLmxlbmd0aCA+IDApO1xyXG4gICAgfSxcclxuICAgIGNsb3NlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgalF1ZXJ5KCcjUXVpY2tWaWV3RGlhbG9nJykuZGlhbG9nKCdjbG9zZScpO1xyXG4gICAgfVxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBxdWlja3ZpZXc7XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuXHJcbi8qKlxyXG4gKiBAcHJpdmF0ZVxyXG4gKiBAZnVuY3Rpb25cclxuICogQGRlc2NyaXB0aW9uIEJpbmRzIGV2ZW50IHRvIHRoZSBwbGFjZSBob2xkZXIgKC5ibHVyKVxyXG4gKi9cclxuZnVuY3Rpb24gaW5pdGlhbGl6ZUV2ZW50cygpIHtcclxuICAgIC8qIFN0YXJ0IEpJUkEgUFJFVi01MzpObyBzZWFyY2ggcmVzdWx0IHBhZ2U6IFdoZW4gdGhlIHNlYXJjaCB0ZXh0IGZpZWxkIGlzXHJcbiAgICAgIGVtcHR5LG9uIGNsaWNraW5nIG9mIFwiR09cIiBidXR0b24gdXNlciBpcyBuYXZpZ2F0aW5nIHRvIEhvbWUgcGFnZS5cclxuICAgICAgUmVwbGFjZWQgI3Egd2l0aCAnaW5wdXRbbmFtZT1xXScqL1xyXG4gICAgJCgnaW5wdXRbbmFtZT1xXScpLmZvY3VzKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgaW5wdXQgPSAkKHRoaXMpO1xyXG4gICAgICAgIGlmIChpbnB1dC52YWwoKSA9PT0gaW5wdXQuYXR0cigndmFsdWUnKSkge1xyXG4gICAgICAgICAgICBpbnB1dC52YWwoJycpO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbiAgICAgICAgLmJsdXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgaW5wdXQgPSAkKHRoaXMpO1xyXG4gICAgICAgICAgICAvKiBTdGFydCBKSVJBIFBSRVYtNTM6Tm8gc2VhcmNoIHJlc3VsdCBwYWdlOiBXaGVuIHRoZSBzZWFyY2ggdGV4dCBmaWVsZCBpcyBlbXB0eSxvbiBjbGlja2luZyBvZiBcIkdPXCJcclxuICAgICAgICAgICAgICAgICBidXR0b24gdXNlciBpcyBuYXZpZ2F0aW5nIHRvIEhvbWUgcGFnZS5BZGRlZCAkLnRyaW0oaW5wdXQudmFsKCkpID09PSBcIlwiKi9cclxuICAgICAgICAgICAgaWYgKCQudHJpbShpbnB1dC52YWwoKSkgPT09ICcnIHx8IGlucHV0LnZhbCgpID09PSAnJyB8fCBpbnB1dC52YWwoKSA9PT0gaW5wdXQuYXR0cigndmFsdWUnKSkge1xyXG4gICAgICAgICAgICAgICAgaW5wdXQudmFsKGlucHV0LmF0dHIoJ3ZhbHVlJykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuYmx1cigpO1xyXG5cclxuICAgIC8qIFN0YXJ0IEpJUkEtUFJFVi01NDpHZW5lcmFsIEVycm9yIHBhZ2U6IFdoZW4gdGhlIG5ldyBzZWFyY2ggZmllbGQgZW1wdHksIG9uIGNsaWNraW5nIG9mIFwiR09cIiB1c2VyIGlzIG5hdmlnYXRpbmcgdG8gSG9tZSBwYWdlLlxyXG4gICAgICAgICBBZGRlZCBjb25kaXRpb24gZm9yIGRpc2FibGluZyBzZWFyY2ggYnV0dG9uIGluIGhlYWRlciBhbmQgTm8gc2VhcmNoIHJlc3VsdHMgcGFnZSBhbmQgZXJyb3IgcGFnZXMuXHJcbiAgICAgICAgIFN0YXJ0IEpJUkEtUFJFVi01MzpObyBzZWFyY2ggcmVzdWx0IHBhZ2U6IFdoZW4gdGhlIHNlYXJjaCB0ZXh0IGZpZWxkIGlzIGVtcHR5LG9uIGNsaWNraW5nIG9mIFwiR09cIiBidXR0b24gdXNlciBpcyBuYXZpZ2F0aW5nIHRvIEhvbWUgcGFnZS4qL1xyXG4gICAgJCgnaW5wdXRbbmFtZT1xXScpLmNsb3Nlc3QoJ2Zvcm0nKS5zdWJtaXQoZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICB2YXIgaW5wdXQgPSAkKHRoaXMpLmZpbmQoJ2lucHV0W25hbWU9cV0nKTtcclxuICAgICAgICBpZiAoJC50cmltKGlucHV0LnZhbCgpKSA9PT0gaW5wdXQuYXR0cigndmFsdWUnKSB8fCAkLnRyaW0oaW5wdXQudmFsKCkpID09PSAnJykge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoJCgnLnB0X3Byb2R1Y3Qtc2VhcmNoLW5vcmVzdWx0IC5ub2hpdHMgLm5vcmVzdWx0LWJhbm5lcicpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAkKCcucHRfcHJvZHVjdC1zZWFyY2gtbm9yZXN1bHQgLm5vaGl0cycpLmNzcygnaGVpZ2h0JywgJ2F1dG8nKTtcclxuICAgIH1cclxuICAgIC8qRW5kIEpJUkEgUFJFVi01MyxQUkVWLTU0ICovXHJcbn1cclxuXHJcbmV4cG9ydHMuaW5pdCA9IGluaXRpYWxpemVFdmVudHM7XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuXHJcbnZhciB1dGlsID0gcmVxdWlyZSgnLi91dGlsJyk7XHJcblxyXG52YXIgY3VycmVudFF1ZXJ5ID0gbnVsbCxcclxuICAgIGxhc3RRdWVyeSA9IG51bGwsXHJcbiAgICBydW5uaW5nUXVlcnkgPSBudWxsLFxyXG4gICAgbGlzdFRvdGFsID0gLTEsXHJcbiAgICBsaXN0Q3VycmVudCA9IC0xLFxyXG4gICAgZGVsYXkgPSAzMCxcclxuICAgICRyZXN1bHRzQ29udGFpbmVyO1xyXG5cclxuLyoqXHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAZGVzY3JpcHRpb24gSGFuZGxlcyBrZXlib2FyZCdzIGFycm93IGtleXNcclxuICogQHBhcmFtIGtleUNvZGUgQ29kZSBvZiBhbiBhcnJvdyBrZXkgdG8gYmUgaGFuZGxlZFxyXG4gKi9cclxuZnVuY3Rpb24gaGFuZGxlQXJyb3dLZXlzKGtleUNvZGUpIHtcclxuICAgIHN3aXRjaCAoa2V5Q29kZSkge1xyXG4gICAgICAgIGNhc2UgMzg6XHJcbiAgICAgICAgICAgIC8vIGtleVVwXHJcbiAgICAgICAgICAgIGxpc3RDdXJyZW50ID0gKGxpc3RDdXJyZW50IDw9IDApID8gKGxpc3RUb3RhbCAtIDEpIDogKGxpc3RDdXJyZW50IC0gMSk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgNDA6XHJcbiAgICAgICAgICAgIC8vIGtleURvd25cclxuICAgICAgICAgICAgbGlzdEN1cnJlbnQgPSAobGlzdEN1cnJlbnQgPj0gbGlzdFRvdGFsIC0gMSkgPyAwIDogbGlzdEN1cnJlbnQgKyAxO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAvLyByZXNldFxyXG4gICAgICAgICAgICBsaXN0Q3VycmVudCA9IC0xO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgJHJlc3VsdHNDb250YWluZXIuY2hpbGRyZW4oKS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKS5lcShsaXN0Q3VycmVudCkuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICAkKCdpbnB1dFtuYW1lPVwicVwiXScpLnZhbCgkcmVzdWx0c0NvbnRhaW5lci5maW5kKCcuc2VsZWN0ZWQgLnN1Z2dlc3Rpb250ZXJtJykuZmlyc3QoKS50ZXh0KCkpO1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuXHJcbnZhciBzZWFyY2hzdWdnZXN0ID0ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb25cclxuICAgICAqIEBkZXNjcmlwdGlvbiBDb25maWd1cmVzIHBhcmFtZXRlcnMgYW5kIHJlcXVpcmVkIG9iamVjdCBpbnN0YW5jZXNcclxuICAgICAqL1xyXG4gICAgaW5pdDogZnVuY3Rpb24gKGNvbnRhaW5lciwgZGVmYXVsdFZhbHVlKSB7XHJcbiAgICAgICAgdmFyICRzZWFyY2hDb250YWluZXIgPSAkKGNvbnRhaW5lcik7XHJcbiAgICAgICAgdmFyICRzZWFyY2hGb3JtID0gJHNlYXJjaENvbnRhaW5lci5maW5kKCdmb3JtW25hbWU9XCJzaW1wbGVTZWFyY2hcIl0nKTtcclxuICAgICAgICB2YXIgJHNlYXJjaEZpZWxkID0gJHNlYXJjaEZvcm0uZmluZCgnaW5wdXRbbmFtZT1cInFcIl0nKTtcclxuXHJcbiAgICAgICAgLy8gZGlzYWJsZSBicm93c2VyIGF1dG8gY29tcGxldGVcclxuICAgICAgICAkc2VhcmNoRmllbGQuYXR0cignYXV0b2NvbXBsZXRlJywgJ29mZicpO1xyXG5cclxuICAgICAgICAvLyBvbiBmb2N1cyBsaXN0ZW5lciAoY2xlYXIgZGVmYXVsdCB2YWx1ZSlcclxuICAgICAgICAkc2VhcmNoRmllbGQuZm9jdXMoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoISRyZXN1bHRzQ29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBjcmVhdGUgcmVzdWx0cyBjb250YWluZXIgaWYgbmVlZGVkXHJcbiAgICAgICAgICAgICAgICAvLyRyZXN1bHRzQ29udGFpbmVyID0gJCgnPGRpdi8+JykuYXR0cignaWQnLCAnc2VhcmNoLXN1Z2dlc3Rpb25zJykuYXBwZW5kVG8oJHNlYXJjaENvbnRhaW5lcik7XHJcbiAgICAgICAgICAgICAgICAkcmVzdWx0c0NvbnRhaW5lciA9ICQoJzxkaXYvPicpLmF0dHIoJ2NsYXNzJywgJ3N1Z2dlc3Rpb25zJykuYXR0cignaWQnLCAnc3VnZ2VzdGlvbnMnKS5hcHBlbmRUbygkc2VhcmNoQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoJHNlYXJjaEZpZWxkLnZhbCgpID09PSBkZWZhdWx0VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICRzZWFyY2hGaWVsZC52YWwoJycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJHNlYXJjaEZpZWxkLmJsdXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdGVtcCA9ICRzZWFyY2hGaWVsZC52YWwoKTtcclxuICAgICAgICAgICAgaWYgKCQudHJpbSh0ZW1wKSA9PSAnJykge1xyXG4gICAgICAgICAgICAgICAgJHNlYXJjaEZpZWxkLnZhbCgnU2VhcmNoIEVudGlyZSBTaXRlLi4uJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgaWYgKCEkc2VhcmNoQ29udGFpbmVyLmlzKGUudGFyZ2V0KSkge1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCh0aGlzLmNsZWFyUmVzdWx0cywgMjAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgLy8gb24gc3VibWl0IHdlIGRvIG5vdCBzdWJtaXQgdGhlIGZvcm0sIGJ1dCBjaGFuZ2UgdGhlIHdpbmRvdyBsb2NhdGlvblxyXG4gICAgICAgIC8vIGluIG9yZGVyIHRvIGF2b2lkIGh0dHBzIHRvIGh0dHAgd2FybmluZ3MgaW4gdGhlIGJyb3dzZXJcclxuICAgICAgICAvLyBvbmx5IGlmIGl0J3Mgbm90IHRoZSBkZWZhdWx0IHZhbHVlIGFuZCBpdCdzIG5vdCBlbXB0eVxyXG4gICAgICAgICRzZWFyY2hGb3JtLnN1Ym1pdChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBzZWFyY2hVcmwgPSAkc2VhcmNoRm9ybS5hdHRyKCdhY3Rpb24nKTtcclxuICAgICAgICAgICAgdmFyIHNlc3Npb25JZCA9IGpRdWVyeSgnI2Zvb3RlcmhpZGRlbmlkJykudGV4dCgpO1xyXG4gICAgICAgICAgICB2YXIgayA9ICcnXHJcbiAgICAgICAgICAgIGlmIChzZXNzaW9uSWQgPT0gJ3JhcGFsYScpIHtcclxuICAgICAgICAgICAgICAgIGsgPSBzZWFyY2hVcmwgKyAnP2lkPTEnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNlc3Npb25JZCA9PSAnc3VmaXgnKSB7XHJcbiAgICAgICAgICAgICAgICBrID0gc2VhcmNoVXJsICsgJz9pZD0yJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChzZXNzaW9uSWQgPT0gJ3RyaWdnZXJ4Jykge1xyXG4gICAgICAgICAgICAgICAgayA9IHNlYXJjaFVybCArICc/aWQ9Myc7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2Vzc2lvbklkID09ICdzdG9ybScpIHtcclxuICAgICAgICAgICAgICAgIGsgPSBzZWFyY2hVcmwgKyAnP2lkPTQnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNlc3Npb25JZCA9PSAnbHVocmplbnNlbicpIHtcclxuICAgICAgICAgICAgICAgIGsgPSBzZWFyY2hVcmwgKyAnP2lkPTUnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNlc3Npb25JZCA9PSAndm1jJykge1xyXG4gICAgICAgICAgICAgICAgayA9IHNlYXJjaFVybCArICc/aWQ9Nic7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2Vzc2lvbklkID09ICd0ZXJtaW5hdG9yJykge1xyXG4gICAgICAgICAgICAgICAgayA9IHNlYXJjaFVybCArICc/aWQ9Nyc7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2Vzc2lvbklkID09ICdibHVlZm94Jykge1xyXG4gICAgICAgICAgICAgICAgayA9IHNlYXJjaFVybCArICc/aWQ9OCc7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2Vzc2lvbklkID09ICd3aWxsaWFtc29uJykge1xyXG4gICAgICAgICAgICAgICAgayA9IHNlYXJjaFVybCArICc/aWQ9OSc7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2Vzc2lvbklkID09ICdtYXJjdW0nKSB7XHJcbiAgICAgICAgICAgICAgICBrID0gc2VhcmNoVXJsICsgJz9pZD0xMCc7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2Vzc2lvbklkID09ICdzdHJpa2VtYXN0ZXInKSB7XHJcbiAgICAgICAgICAgICAgICBrID0gc2VhcmNoVXJsICsgJz9pZD0xMSc7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2Vzc2lvbklkID09ICdvdHRlcicpIHtcclxuICAgICAgICAgICAgICAgIGsgPSBzZWFyY2hVcmwgKyAnP2lkPTIxJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgc2VhcmNoVGVybSA9ICRzZWFyY2hGaWVsZC52YWwoKTtcclxuICAgICAgICAgICAgaWYgKHNlYXJjaFRlcm0gIT0gZGVmYXVsdFZhbHVlICYmIHNlYXJjaFRlcm0gIT0gJycpIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9IHV0aWwuYXBwZW5kUGFyYW1Ub1VSTChrLCAncScsIHNlYXJjaFRlcm0pLnJlcGxhY2UoJ2h0dHBzJywgJ2h0dHAnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gb24ga2V5IHVwIGxpc3RlbmVyXHJcbiAgICAgICAgJHNlYXJjaEZpZWxkLmtleXVwKGZ1bmN0aW9uIChlKSB7XHJcblxyXG4gICAgICAgICAgICAvLyBnZXQga2V5Q29kZSAod2luZG93LmV2ZW50IGlzIGZvciBJRSlcclxuICAgICAgICAgICAgdmFyIGtleUNvZGUgPSBlLmtleUNvZGUgfHwgd2luZG93LmV2ZW50LmtleUNvZGU7XHJcblxyXG4gICAgICAgICAgICAvLyBjaGVjayBhbmQgdHJlYXQgdXAgYW5kIGRvd24gYXJyb3dzXHJcbiAgICAgICAgICAgIGlmIChoYW5kbGVBcnJvd0tleXMoa2V5Q29kZSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBjaGVjayBmb3IgYW4gRU5URVIgb3IgRVNDXHJcbiAgICAgICAgICAgIGlmIChrZXlDb2RlID09PSAxMyB8fCBrZXlDb2RlID09PSAyNykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhclJlc3VsdHMoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY3VycmVudFF1ZXJ5ID0gJHNlYXJjaEZpZWxkLnZhbCgpLnRyaW0oKTtcclxuXHJcbiAgICAgICAgICAgIC8vIG5vIHF1ZXJ5IGN1cnJlbnRseSBydW5uaW5nLCBpbml0IGFuIHVwZGF0ZVxyXG4gICAgICAgICAgICBpZiAoIXJ1bm5pbmdRdWVyeSkge1xyXG4gICAgICAgICAgICAgICAgcnVubmluZ1F1ZXJ5ID0gY3VycmVudFF1ZXJ5O1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCh0aGlzLnN1Z2dlc3QuYmluZCh0aGlzKSwgZGVsYXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb25cclxuICAgICAqIEBkZXNjcmlwdGlvbiB0cmlnZ2VyIHN1Z2dlc3QgYWN0aW9uXHJcbiAgICAgKi9cclxuICAgIHN1Z2dlc3Q6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBjaGVjayB3aGV0aGVyIHF1ZXJ5IHRvIGV4ZWN1dGUgKHJ1bm5pbmdRdWVyeSkgaXMgc3RpbGwgdXAgdG8gZGF0ZSBhbmQgaGFkIG5vdCBjaGFuZ2VkIGluIHRoZSBtZWFud2hpbGVcclxuICAgICAgICAvLyAod2UgaGFkIGEgbGl0dGxlIGRlbGF5KVxyXG4gICAgICAgIGlmIChydW5uaW5nUXVlcnkgIT09IGN1cnJlbnRRdWVyeSkge1xyXG4gICAgICAgICAgICAvLyB1cGRhdGUgcnVubmluZyBxdWVyeSB0byB0aGUgbW9zdCByZWNlbnQgc2VhcmNoIHBocmFzZVxyXG4gICAgICAgICAgICBydW5uaW5nUXVlcnkgPSBjdXJyZW50UXVlcnk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBpZiBpdCdzIGVtcHR5IGNsZWFyIHRoZSByZXN1bHRzIGJveCBhbmQgcmV0dXJuXHJcbiAgICAgICAgaWYgKHJ1bm5pbmdRdWVyeS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5jbGVhclJlc3VsdHMoKTtcclxuICAgICAgICAgICAgcnVubmluZ1F1ZXJ5ID0gbnVsbDtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gaWYgdGhlIGN1cnJlbnQgc2VhcmNoIHBocmFzZSBpcyB0aGUgc2FtZSBhcyBmb3IgdGhlIGxhc3Qgc3VnZ2VzdGlvbiBjYWxsLCBqdXN0IHJldHVyblxyXG4gICAgICAgIGlmIChsYXN0UXVlcnkgPT09IHJ1bm5pbmdRdWVyeSkge1xyXG4gICAgICAgICAgICBydW5uaW5nUXVlcnkgPSBudWxsO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBidWlsZCB0aGUgcmVxdWVzdCB1cmxcclxuICAgICAgICB2YXIgcmVxVXJsID0gdXRpbC5hcHBlbmRQYXJhbVRvVVJMKFVybHMuc2VhcmNoc3VnZ2VzdCwgJ3EnLCBydW5uaW5nUXVlcnkpO1xyXG5cclxuICAgICAgICAvLyBleGVjdXRlIHNlcnZlciBjYWxsXHJcbiAgICAgICAgJC5nZXQocmVxVXJsLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICB2YXIgc3VnZ2VzdGlvbkhUTUwgPSBkYXRhLFxyXG4gICAgICAgICAgICAgICAgYW5zTGVuZ3RoID0gc3VnZ2VzdGlvbkhUTUwudHJpbSgpLmxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgIC8vIGlmIHRoZXJlIGFyZSByZXN1bHRzIHBvcHVsYXRlIHRoZSByZXN1bHRzIGRpdlxyXG4gICAgICAgICAgICBpZiAoYW5zTGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyUmVzdWx0cygpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIHRoZSByZXN1bHRzIGRpdlxyXG4gICAgICAgICAgICAgICAgJHJlc3VsdHNDb250YWluZXIuaHRtbChzdWdnZXN0aW9uSFRNTCkuZmFkZUluKDIwMCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIHJlY29yZCB0aGUgcXVlcnkgdGhhdCBoYXMgYmVlbiBleGVjdXRlZFxyXG4gICAgICAgICAgICBsYXN0UXVlcnkgPSBydW5uaW5nUXVlcnk7XHJcbiAgICAgICAgICAgIC8vIHJlc2V0IGN1cnJlbnRseSBydW5uaW5nIHF1ZXJ5XHJcbiAgICAgICAgICAgIHJ1bm5pbmdRdWVyeSA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICAvLyBjaGVjayBmb3IgYW5vdGhlciByZXF1aXJlZCB1cGRhdGUgKGlmIGN1cnJlbnQgc2VhcmNoIHBocmFzZSBpcyBkaWZmZXJlbnQgZnJvbSBqdXN0IGV4ZWN1dGVkIGNhbGwpXHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVlcnkgIT09IGxhc3RRdWVyeSkge1xyXG4gICAgICAgICAgICAgICAgLy8gLi4uIGFuZCBleGVjdXRlIGltbWVkaWF0ZWx5IGlmIHNlYXJjaCBoYXMgY2hhbmdlZCB3aGlsZSB0aGlzIHNlcnZlciBjYWxsIHdhcyBpbiB0cmFuc2l0XHJcbiAgICAgICAgICAgICAgICBydW5uaW5nUXVlcnkgPSBjdXJyZW50UXVlcnk7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KHRoaXMuc3VnZ2VzdC5iaW5kKHRoaXMpLCBkZWxheSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5oaWRlTGVmdFBhbmVsKCk7XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEBmdW5jdGlvblxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKi9cclxuICAgIGNsZWFyUmVzdWx0czogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghJHJlc3VsdHNDb250YWluZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkcmVzdWx0c0NvbnRhaW5lci5mYWRlT3V0KDIwMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkcmVzdWx0c0NvbnRhaW5lci5lbXB0eSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqL1xyXG4gICAgaGlkZUxlZnRQYW5lbDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vaGlkZSBsZWZ0IHBhbmVsIGlmIHRoZXJlIGlzIG9ubHkgYSBtYXRjaGluZyBzdWdnZXN0ZWQgY3VzdG9tIHBocmFzZVxyXG4gICAgICAgIGlmICgkKCcuc2VhcmNoLXN1Z2dlc3Rpb24tbGVmdC1wYW5lbC1oaXQnKS5sZW5ndGggPT09IDEgJiYgJCgnLnNlYXJjaC1waHJhc2Utc3VnZ2VzdGlvbiBhJykudGV4dCgpLnJlcGxhY2UoLyheW1xcc10rfFtcXHNdKyQpL2csICcnKS50b1VwcGVyQ2FzZSgpID09PSAkKCcuc2VhcmNoLXN1Z2dlc3Rpb24tbGVmdC1wYW5lbC1oaXQgYScpLnRleHQoKS50b1VwcGVyQ2FzZSgpKSB7XHJcbiAgICAgICAgICAgICQoJy5zZWFyY2gtc3VnZ2VzdGlvbi1sZWZ0LXBhbmVsJykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcclxuICAgICAgICAgICAgJCgnLnNlYXJjaC1zdWdnZXN0aW9uLXdyYXBwZXItZnVsbCcpLmFkZENsYXNzKCdzZWFyY2gtc3VnZ2VzdGlvbi13cmFwcGVyJyk7XHJcbiAgICAgICAgICAgICQoJy5zZWFyY2gtc3VnZ2VzdGlvbi13cmFwcGVyJykucmVtb3ZlQ2xhc3MoJ3NlYXJjaC1zdWdnZXN0aW9uLXdyYXBwZXItZnVsbCcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gc2VhcmNoc3VnZ2VzdDtcclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxudmFyIGludmVudG9yeSA9IHJlcXVpcmUoJy4vJyk7XHJcblxyXG52YXIgY2FydEludmVudG9yeSA9IHtcclxuICAgIHNldFNlbGVjdGVkU3RvcmU6IGZ1bmN0aW9uIChzdG9yZUlkKSB7XHJcbiAgICAgICAgdmFyICRzZWxlY3RlZFN0b3JlID0gJCgnLnN0b3JlLXRpbGUuJyArIHN0b3JlSWQpLFxyXG4gICAgICAgICAgICAkbGluZUl0ZW0gPSAkKCcuY2FydC1yb3dbZGF0YS11dWlkPVwiJyArIHRoaXMudXVpZCArICdcIl0nKSxcclxuICAgICAgICAgICAgc3RvcmVBZGRyZXNzID0gJHNlbGVjdGVkU3RvcmUuZmluZCgnLnN0b3JlLWFkZHJlc3MnKS5odG1sKCksXHJcbiAgICAgICAgICAgIHN0b3JlU3RhdHVzID0gJHNlbGVjdGVkU3RvcmUuZmluZCgnLnN0b3JlLXN0YXR1cycpLmRhdGEoJ3N0YXR1cycpLFxyXG4gICAgICAgICAgICBzdG9yZVN0YXR1c1RleHQgPSAkc2VsZWN0ZWRTdG9yZS5maW5kKCcuc3RvcmUtc3RhdHVzJykudGV4dCgpO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRTdG9yZSA9IHN0b3JlSWQ7XHJcblxyXG4gICAgICAgICRsaW5lSXRlbS5maW5kKCcuaW5zdG9yZS1kZWxpdmVyeSAuc2VsZWN0ZWQtc3RvcmUtYWRkcmVzcycpXHJcbiAgICAgICAgICAgIC5kYXRhKCdzdG9yZUlkJywgc3RvcmVJZClcclxuICAgICAgICAgICAgLmF0dHIoJ2RhdGEtc3RvcmUtaWQnLCBzdG9yZUlkKVxyXG4gICAgICAgICAgICAuaHRtbChzdG9yZUFkZHJlc3MpO1xyXG4gICAgICAgICRsaW5lSXRlbS5maW5kKCcuaW5zdG9yZS1kZWxpdmVyeSAuc2VsZWN0ZWQtc3RvcmUtYXZhaWxhYmlsaXR5JylcclxuICAgICAgICAgICAgLmRhdGEoJ3N0YXR1cycsIHN0b3JlU3RhdHVzKVxyXG4gICAgICAgICAgICAuYXR0cignZGF0YS1zdGF0dXMnLCBzdG9yZVN0YXR1cylcclxuICAgICAgICAgICAgLnRleHQoc3RvcmVTdGF0dXNUZXh0KTtcclxuICAgICAgICAkbGluZUl0ZW0uZmluZCgnLmluc3RvcmUtZGVsaXZlcnkgLmRlbGl2ZXJ5LW9wdGlvbicpLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJykudHJpZ2dlcignY2xpY2snKTtcclxuICAgIH0sXHJcbiAgICBjYXJ0U2VsZWN0U3RvcmU6IGZ1bmN0aW9uIChzZWxlY3RlZFN0b3JlKSB7XHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIGludmVudG9yeS5nZXRTdG9yZXNJbnZlbnRvcnkodGhpcy51dWlkKS50aGVuKGZ1bmN0aW9uIChzdG9yZXMpIHtcclxuICAgICAgICAgICAgaW52ZW50b3J5LnNlbGVjdFN0b3JlRGlhbG9nKHtcclxuICAgICAgICAgICAgICAgIHN0b3Jlczogc3RvcmVzLFxyXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRTdG9yZUlkOiBzZWxlY3RlZFN0b3JlLFxyXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRTdG9yZVRleHQ6IFJlc291cmNlcy5TRUxFQ1RFRF9TVE9SRSxcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlQ2FsbGJhY2s6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBzZWxlY3RTdG9yZUNhbGxiYWNrOiBzZWxmLnNldFNlbGVjdGVkU3RvcmUuYmluZChzZWxmKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KS5kb25lKCk7XHJcbiAgICB9LFxyXG4gICAgc2V0RGVsaXZlcnlPcHRpb246IGZ1bmN0aW9uICh2YWx1ZSwgc3RvcmVJZCkge1xyXG4gICAgICAgIC8vIHNldCBsb2FkaW5nIHN0YXRlXHJcbiAgICAgICAgJCgnLml0ZW0tZGVsaXZlcnktb3B0aW9ucycpXHJcbiAgICAgICAgICAgIC5hZGRDbGFzcygnbG9hZGluZycpXHJcbiAgICAgICAgICAgIC5jaGlsZHJlbigpLmhpZGUoKTtcclxuXHJcbiAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgIHBsaWQ6IHRoaXMudXVpZCxcclxuICAgICAgICAgICAgc3RvcmVwaWNrdXA6ICh2YWx1ZSA9PT0gJ3N0b3JlJyA/IHRydWUgOiBmYWxzZSlcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmICh2YWx1ZSA9PT0gJ3N0b3JlJykge1xyXG4gICAgICAgICAgICBkYXRhLnN0b3JlcGlja3VwID0gdHJ1ZTtcclxuICAgICAgICAgICAgZGF0YS5zdG9yZWlkID0gc3RvcmVJZDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkYXRhLnN0b3JlcGlja3VwID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogVXJscy5zZXRTdG9yZVBpY2t1cCxcclxuICAgICAgICAgICAgZGF0YTogZGF0YSxcclxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGxvYWRpbmcgc3RhdGVcclxuICAgICAgICAgICAgICAgICQoJy5pdGVtLWRlbGl2ZXJ5LW9wdGlvbnMnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcygnbG9hZGluZycpXHJcbiAgICAgICAgICAgICAgICAgICAgLmNoaWxkcmVuKCkuc2hvdygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgaW5pdDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICAkKCcuaXRlbS1kZWxpdmVyeS1vcHRpb25zIC5zZXQtcHJlZmVycmVkLXN0b3JlJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBzZWxmLnV1aWQgPSAkKHRoaXMpLmRhdGEoJ3V1aWQnKTtcclxuICAgICAgICAgICAgdmFyIHNlbGVjdGVkU3RvcmUgPSAkKHRoaXMpLmNsb3Nlc3QoJy5pbnN0b3JlLWRlbGl2ZXJ5JykuZmluZCgnLnNlbGVjdGVkLXN0b3JlLWFkZHJlc3MnKS5kYXRhKCdzdG9yZUlkJyk7XHJcbiAgICAgICAgICAgIGlmICghVXNlci56aXApIHtcclxuICAgICAgICAgICAgICAgIGludmVudG9yeS56aXBQcm9tcHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY2FydFNlbGVjdFN0b3JlKHNlbGVjdGVkU3RvcmUpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmNhcnRTZWxlY3RTdG9yZShzZWxlY3RlZFN0b3JlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoJy5pdGVtLWRlbGl2ZXJ5LW9wdGlvbnMgLmRlbGl2ZXJ5LW9wdGlvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gcmVzZXQgdGhlIHV1aWRcclxuICAgICAgICAgICAgdmFyIHNlbGVjdGVkU3RvcmUgPSAkKHRoaXMpLmNsb3Nlc3QoJy5pbnN0b3JlLWRlbGl2ZXJ5JykuZmluZCgnLnNlbGVjdGVkLXN0b3JlLWFkZHJlc3MnKS5kYXRhKCdzdG9yZUlkJyk7XHJcbiAgICAgICAgICAgIHNlbGYudXVpZCA9ICQodGhpcykuY2xvc2VzdCgnLmNhcnQtcm93JykuZGF0YSgndXVpZCcpO1xyXG4gICAgICAgICAgICBzZWxmLnNldERlbGl2ZXJ5T3B0aW9uKCQodGhpcykudmFsKCksIHNlbGVjdGVkU3RvcmUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBjYXJ0SW52ZW50b3J5O1xyXG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG52YXIgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpLFxyXG4gICAgZGlhbG9nID0gcmVxdWlyZSgnLi4vZGlhbG9nJyksXHJcbiAgICBUUHJvbWlzZSA9IHJlcXVpcmUoJ3Byb21pc2UnKSxcclxuICAgIHV0aWwgPSByZXF1aXJlKCcuLi91dGlsJyk7XHJcblxyXG52YXIgbmV3TGluZSA9ICdcXG4nO1xyXG52YXIgc3RvcmVUZW1wbGF0ZSA9IGZ1bmN0aW9uIChzdG9yZSwgc2VsZWN0ZWRTdG9yZUlkLCBzZWxlY3RlZFN0b3JlVGV4dCkge1xyXG4gICAgcmV0dXJuIFtcclxuICAgICAgICAnPGxpIGNsYXNzPVwic3RvcmUtdGlsZSAnICsgc3RvcmUuc3RvcmVJZCArIChzdG9yZS5zdG9yZUlkID09PSBzZWxlY3RlZFN0b3JlSWQgPyAnIHNlbGVjdGVkJyA6ICcnKSArICdcIj4nLFxyXG4gICAgICAgICdcdDxwIGNsYXNzPVwic3RvcmUtYWRkcmVzc1wiPicsXHJcbiAgICAgICAgJ1x0XHQnICsgc3RvcmUuYWRkcmVzczEgKyAnPGJyLz4nLFxyXG4gICAgICAgICdcdFx0JyArIHN0b3JlLmNpdHkgKyAnLCAnICsgc3RvcmUuc3RhdGVDb2RlICsgJyAnICsgc3RvcmUucG9zdGFsQ29kZSxcclxuICAgICAgICAnXHQ8L3A+JyxcclxuICAgICAgICAnXHQ8cCBjbGFzcz1cInN0b3JlLXN0YXR1c1wiIGRhdGEtc3RhdHVzPVwiJyArIHN0b3JlLnN0YXR1c2NsYXNzICsgJ1wiPicgKyBzdG9yZS5zdGF0dXMgKyAnPC9wPicsXHJcbiAgICAgICAgJ1x0PGJ1dHRvbiBjbGFzcz1cInNlbGVjdC1zdG9yZS1idXR0b25cIiBkYXRhLXN0b3JlLWlkPVwiJyArIHN0b3JlLnN0b3JlSWQgKyAnXCInICtcclxuICAgICAgICAoc3RvcmUuc3RhdHVzY2xhc3MgIT09ICdzdG9yZS1pbi1zdG9jaycgPyAnZGlzYWJsZWQ9XCJkaXNhYmxlZFwiJyA6ICcnKSArICc+JyxcclxuICAgICAgICAnXHRcdCcgKyAoc3RvcmUuc3RvcmVJZCA9PT0gc2VsZWN0ZWRTdG9yZUlkID8gc2VsZWN0ZWRTdG9yZVRleHQgOiBSZXNvdXJjZXMuU0VMRUNUX1NUT1JFKSxcclxuICAgICAgICAnXHQ8L2J1dHRvbj4nLFxyXG4gICAgICAgICc8L2xpPidcclxuICAgIF0uam9pbihuZXdMaW5lKTtcclxufTtcclxuXHJcbnZhciBzdG9yZUxpc3RUZW1wbGF0ZSA9IGZ1bmN0aW9uIChzdG9yZXMsIHNlbGVjdGVkU3RvcmVJZCwgc2VsZWN0ZWRTdG9yZVRleHQpIHtcclxuICAgIGlmIChzdG9yZXMgJiYgc3RvcmVzLmxlbmd0aCkge1xyXG4gICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwic3RvcmUtbGlzdC1jb250YWluZXJcIj4nLFxyXG4gICAgICAgICAgICAnPHVsIGNsYXNzPVwic3RvcmUtbGlzdFwiPicsXHJcbiAgICAgICAgICAgIF8ubWFwKHN0b3JlcywgZnVuY3Rpb24gKHN0b3JlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RvcmVUZW1wbGF0ZShzdG9yZSwgc2VsZWN0ZWRTdG9yZUlkLCBzZWxlY3RlZFN0b3JlVGV4dCk7XHJcbiAgICAgICAgICAgIH0pLmpvaW4obmV3TGluZSksXHJcbiAgICAgICAgICAgICc8L3VsPicsXHJcbiAgICAgICAgICAgICc8L2Rpdj4nLFxyXG4gICAgICAgICAgICAnPGRpdiBjbGFzcz1cInN0b3JlLWxpc3QtcGFnaW5hdGlvblwiPicsXHJcbiAgICAgICAgICAgICc8L2Rpdj4nXHJcbiAgICAgICAgXS5qb2luKG5ld0xpbmUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gJzxkaXYgY2xhc3M9XCJuby1yZXN1bHRzXCI+JyArIFJlc291cmNlcy5JTlZBTElEX1pJUCArICc8L2Rpdj4nO1xyXG4gICAgfVxyXG59O1xyXG5cclxudmFyIHppcFByb21wdFRlbXBsYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIFtcclxuICAgICAgICAnPGRpdiBpZD1cInByZWZlcnJlZC1zdG9yZS1wYW5lbFwiPicsXHJcbiAgICAgICAgJ1x0PGlucHV0IHR5cGU9XCJ0ZXh0XCIgaWQ9XCJ1c2VyLXppcFwiIHBsYWNlaG9sZGVyPVwiJyArIFJlc291cmNlcy5FTlRFUl9aSVAgKyAnXCIgbmFtZT1cInppcENvZGVcIi8+JyxcclxuICAgICAgICAnPC9kaXY+J1xyXG4gICAgXS5qb2luKG5ld0xpbmUpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEBkZXNjcmlwdGlvbiB0ZXN0IHdoZXRoZXIgemlwY29kZSBpcyB2YWxpZCBmb3IgZWl0aGVyIFVTIG9yIENhbmFkYVxyXG4gKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlIGlmIHRoZSB6aXBjb2RlIGlzIHZhbGlkIGZvciBlaXRoZXIgY291bnRyeSwgZmFsc2UgaWYgaXQncyBpbnZhbGlkIGZvciBib3RoXHJcbiAqKi9cclxudmFyIHZhbGlkYXRlWmlwQ29kZSA9IGZ1bmN0aW9uICh6aXBDb2RlKSB7XHJcbiAgICB2YXIgcmVnZXhlcyA9IHtcclxuICAgICAgICAgICAgY2FuYWRhOiAvXltBQkNFR0hKS0xNTlBSU1RWWFldXFxkW0FCQ0VHSEpLTE1OUFJTVFZXWFlaXSggKT9cXGRbQUJDRUdISktMTU5QUlNUVldYWVpdXFxkJC9pLFxyXG4gICAgICAgICAgICB1c2E6IC9eXFxkezV9KC1cXGR7NH0pPyQvXHJcbiAgICAgICAgfSxcclxuICAgICAgICB2YWxpZCA9IGZhbHNlO1xyXG4gICAgaWYgKCF6aXBDb2RlKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgXy5lYWNoKHJlZ2V4ZXMsIGZ1bmN0aW9uIChyZSkge1xyXG4gICAgICAgIHZhciByZWdleHAgPSBuZXcgUmVnRXhwKHJlKTtcclxuICAgICAgICB2YWxpZCA9IHJlZ2V4cC50ZXN0KHppcENvZGUpO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdmFsaWQ7XHJcbn07XHJcblxyXG52YXIgc3RvcmVpbnZlbnRvcnkgPSB7XHJcbiAgICB6aXBQcm9tcHQ6IGZ1bmN0aW9uIChjYWxsYmFjaykge1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICBkaWFsb2cub3Blbih7XHJcbiAgICAgICAgICAgIGh0bWw6IHppcFByb21wdFRlbXBsYXRlKCksXHJcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcclxuICAgICAgICAgICAgICAgIHRpdGxlOiBSZXNvdXJjZXMuU1RPUkVfTkVBUl9ZT1UsXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogNTAwLFxyXG4gICAgICAgICAgICAgICAgYnV0dG9uczogW3tcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBSZXNvdXJjZXMuU0VBUkNILFxyXG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB6aXBDb2RlID0gJCgnI3VzZXItemlwJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWxpZGF0ZVppcENvZGUoemlwQ29kZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2V0VXNlclppcCh6aXBDb2RlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHppcENvZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfV0sXHJcbiAgICAgICAgICAgICAgICBvcGVuOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnI3VzZXItemlwJykub24oJ2tleXByZXNzJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUud2hpY2ggPT09IDEzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0cmlnZ2VyIHRoZSBzZWFyY2ggYnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcudWktZGlhbG9nLWJ1dHRvbnNldCAudWktYnV0dG9uJykudHJpZ2dlcignY2xpY2snKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgZ2V0U3RvcmVzSW52ZW50b3J5OiBmdW5jdGlvbiAocGlkKSB7XHJcbiAgICAgICAgcmV0dXJuIFRQcm9taXNlLnJlc29sdmUoJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiB1dGlsLmFwcGVuZFBhcmFtc1RvVXJsKFVybHMuc3RvcmVzSW52ZW50b3J5LCB7XHJcbiAgICAgICAgICAgICAgICBwaWQ6IHBpZCxcclxuICAgICAgICAgICAgICAgIHppcENvZGU6IFVzZXIuemlwXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nXHJcbiAgICAgICAgfSkpO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogQGRlc2NyaXB0aW9uIG9wZW4gdGhlIGRpYWxvZyB0byBzZWxlY3Qgc3RvcmVcclxuICAgICAqIEBwYXJhbSB7QXJyYXl9IG9wdGlvbnMuc3RvcmVzXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gb3B0aW9ucy5zZWxlY3RlZFN0b3JlSWRcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBvcHRpb25zLnNlbGVjdGVkU3RvcmVUZXh0XHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcHRpb25zLmNvbnRpbnVlQ2FsbGJhY2tcclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IG9wdGlvbnMuc2VsZWN0U3RvcmVDYWxsYmFja1xyXG4gICAgICoqL1xyXG4gICAgc2VsZWN0U3RvcmVEaWFsb2c6IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzLFxyXG4gICAgICAgICAgICBzdG9yZXMgPSBvcHRpb25zLnN0b3JlcyxcclxuICAgICAgICAgICAgc2VsZWN0ZWRTdG9yZUlkID0gb3B0aW9ucy5zZWxlY3RlZFN0b3JlSWQsXHJcbiAgICAgICAgICAgIHNlbGVjdGVkU3RvcmVUZXh0ID0gb3B0aW9ucy5zZWxlY3RlZFN0b3JlVGV4dCxcclxuICAgICAgICAgICAgc3RvcmVMaXN0ID0gc3RvcmVMaXN0VGVtcGxhdGUoc3RvcmVzLCBzZWxlY3RlZFN0b3JlSWQsIHNlbGVjdGVkU3RvcmVUZXh0KTtcclxuICAgICAgICBkaWFsb2cub3Blbih7XHJcbiAgICAgICAgICAgIGh0bWw6IHN0b3JlTGlzdCxcclxuICAgICAgICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgICAgICAgICAgdGl0bGU6IFJlc291cmNlcy5TRUxFQ1RfU1RPUkUgKyAnIC0gJyArIFVzZXIuemlwLFxyXG4gICAgICAgICAgICAgICAgYnV0dG9uczogW3tcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBSZXNvdXJjZXMuQ0hBTkdFX0xPQ0FUSU9OLFxyXG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2V0VXNlclppcChudWxsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHJpZ2dlciB0aGUgZXZlbnQgdG8gc3RhcnQgdGhlIHByb2Nlc3MgYWxsIG92ZXIgYWdhaW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnNldC1wcmVmZXJyZWQtc3RvcmUnKS50cmlnZ2VyKCdjbGljaycpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKVxyXG4gICAgICAgICAgICAgICAgfSwge1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IFJlc291cmNlcy5DT05USU5VRSxcclxuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5jb250aW51ZUNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmNvbnRpbnVlQ2FsbGJhY2soc3RvcmVzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaWFsb2cuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XSxcclxuICAgICAgICAgICAgICAgIG9wZW46IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuc2VsZWN0LXN0b3JlLWJ1dHRvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0b3JlSWQgPSAkKHRoaXMpLmRhdGEoJ3N0b3JlSWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlIHN0b3JlIGlzIGFscmVhZHkgc2VsZWN0ZWQsIGRvbid0IHNlbGVjdCBhZ2FpblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RvcmVJZCA9PT0gc2VsZWN0ZWRTdG9yZUlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnN0b3JlLWxpc3QgLnN0b3JlLXRpbGUuc2VsZWN0ZWQnKS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQoJy5zZWxlY3Qtc3RvcmUtYnV0dG9uJykudGV4dChSZXNvdXJjZXMuU0VMRUNUX1NUT1JFKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS50ZXh0KHNlbGVjdGVkU3RvcmVUZXh0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNsb3Nlc3QoJy5zdG9yZS10aWxlJykuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnNlbGVjdFN0b3JlQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuc2VsZWN0U3RvcmVDYWxsYmFjayhzdG9yZUlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgc2V0VXNlclppcDogZnVuY3Rpb24gKHppcCkge1xyXG4gICAgICAgIFVzZXIuemlwID0gemlwO1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcclxuICAgICAgICAgICAgdXJsOiBVcmxzLnNldFppcENvZGUsXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIHppcENvZGU6IHppcFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgc2hpcHBpbmdMb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyICRjaGVja291dEZvcm0gPSAkKCcuYWRkcmVzcycpO1xyXG4gICAgICAgICRjaGVja291dEZvcm0ub2ZmKCdjbGljaycpO1xyXG4gICAgICAgICRjaGVja291dEZvcm0ub24oJ2NsaWNrJywgJ2lucHV0W25hbWUkPVwiX3NoaXBwaW5nQWRkcmVzc19pc0dpZnRcIl0nLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQodGhpcykucGFyZW50KCkuc2libGluZ3MoJy5naWZ0LW1lc3NhZ2UtdGV4dCcpLnRvZ2dsZUNsYXNzKCdoaWRkZW4nLCAkKCdpbnB1dFtuYW1lJD1cIl9zaGlwcGluZ0FkZHJlc3NfaXNHaWZ0XCJdOmNoZWNrZWQnKS52YWwoKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHN0b3JlaW52ZW50b3J5O1xyXG4iLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogRXZlbnRzIGFyZSBkaXZpZGVkIHVwIGJ5IG5hbWUgc3BhY2Ugc28gb25seSB0aGVcbiAqIGV2ZW50cyB0aGF0IGFyZSBuZWVkZWQgYXJlIGluaXRpYWxpemVkLlxuICovXG52YXIgZXZlbnRzID0ge1xuICAgIGFjY291bnQ6IGZ1bmN0aW9uICgpIHt9LFxuICAgIGNhcnQ6IGZ1bmN0aW9uICgpIHt9LFxuICAgIGNoZWNrb3V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJ1tuYW1lJD1fZGVsZXRlUHJvZHVjdF0nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZW1vdmVGcm9tQ2FydCgkLnBhcnNlSlNPTigkKHRoaXMpLmF0dHIoJ2RhdGEtZ3RtZGF0YScpKSwgMSk7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgY29tcGFyZTogZnVuY3Rpb24gKCkge30sXG4gICAgcHJvZHVjdDogZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcjYWRkLXRvLWNhcnQnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBhZGRUb0NhcnQoJC5wYXJzZUpTT04oJCh0aGlzKS5hdHRyKCdkYXRhLWd0bWRhdGEnKSksICQodGhpcykuY2xvc2VzdCgnZGl2JykuZmluZCgnW25hbWU9UXVhbnRpdHldJykudmFsKCkpO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIHNlYXJjaDogZnVuY3Rpb24gKCkge30sXG4gICAgc3RvcmVmcm9udDogZnVuY3Rpb24gKCkge30sXG4gICAgd2lzaGxpc3Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnW25hbWUkPV9hZGRUb0NhcnRdJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgYWRkVG9DYXJ0KCQucGFyc2VKU09OKCQodGhpcykuYXR0cignZGF0YS1ndG1kYXRhJykpLCAkKHRoaXMpLmNsb3Nlc3QoJ2RpdicpLmZpbmQoJ1tuYW1lPVF1YW50aXR5XScpLnZhbCgpKTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICAvLyBldmVudHMgdGhhdCBzaG91bGQgaGFwcGVuIG9uIGV2ZXJ5IHBhZ2VcbiAgICBhbGw6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnLm5hbWUtbGluaycpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHByb2R1Y3RDbGljaygkLnBhcnNlSlNPTigkKHRoaXMpLmF0dHIoJ2RhdGEtZ3RtZGF0YScpKSk7XG4gICAgICAgIH0pO1xuICAgICAgICAkKCcudGh1bWItbGluaycpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHByb2R1Y3RDbGljaygkLnBhcnNlSlNPTigkKHRoaXMpLmF0dHIoJ2RhdGEtZ3RtZGF0YScpKSk7XG4gICAgICAgIH0pO1xuICAgICAgICAkKCcuaGFzLXN1Yi1tZW51Jykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcHVzaEV2ZW50KCd0cmFja0V2ZW50JywgJ1VzZXIgQWN0aW9uJywgJ0hlYWRlciBDbGljaycsICQodGhpcykuaHRtbCgpKTtcbiAgICAgICAgfSk7XG4gICAgICAgICQoJy5wcmltYXJ5LWxvZ28nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBwdXNoRXZlbnQoJ3RyYWNrRXZlbnQnLCAnVXNlciBBY3Rpb24nLCAnSGVhZGVyIENsaWNrJywgJ0hvbWUgTGluaycpO1xuICAgICAgICB9KTtcbiAgICB9XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9kdWN0T2JqZWN0IFRoZSBwcm9kdWN0IGRhdGFcbiAqIEBkZXNjcmlwdGlvbiBnZXRzIHRoZSBkYXRhIGZvciBhIHByb2R1Y3QgY2xpY2tcbiAqL1xuZnVuY3Rpb24gcHJvZHVjdENsaWNrIChwcm9kdWN0T2JqZWN0KSB7XG4gICAgdmFyIG9iaiA9IHtcbiAgICAgICAgJ2V2ZW50JzogJ3Byb2R1Y3RDbGljaycsXG4gICAgICAgICdlY29tbWVyY2UnOiB7XG4gICAgICAgICAgICAnY2xpY2snOiB7XG4gICAgICAgICAgICAgICAgJ2FjdGlvbkZpZWxkJzogeydsaXN0JzogJ1NlYXJjaFJlc3VsdHMnfSxcbiAgICAgICAgICAgICAgICAncHJvZHVjdHMnOiBbXVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBvYmouZWNvbW1lcmNlLmNsaWNrLnByb2R1Y3RzLnB1c2gocHJvZHVjdE9iamVjdCk7XG4gICAgZGF0YUxheWVyLnB1c2gob2JqKTtcbn1cblxuLyoqXG4gKiBAZGVzY3JpcHRpb24gQ2xpY2sgZXZlbnQgZm9yIGFkZCBwcm9kdWN0IHRvIGNhcnRcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9kdWN0T2JqZWN0IFRoZSBwcm9kdWN0IGRhdGFcbiAqIEBwYXJhbSB7U3RyaW5nfSBxdWFudGl0eVxuICovXG5mdW5jdGlvbiBhZGRUb0NhcnQgKHByb2R1Y3RPYmplY3QsIHF1YW50aXR5KSB7XG4gICAgdmFyIHF1YW50aXR5T2JqID0geydxdWFudGl0eSc6IHF1YW50aXR5fSxcbiAgICAgICAgb2JqID0ge1xuICAgICAgICAgICAgJ2V2ZW50JzogJ2FkZFRvQ2FydCcsXG4gICAgICAgICAgICAnZWNvbW1lcmNlJzoge1xuICAgICAgICAgICAgICAgICdhZGQnOiB7XG4gICAgICAgICAgICAgICAgICAgICdwcm9kdWN0cyc6IFtdXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIG9iai5lY29tbWVyY2UuYWRkLnByb2R1Y3RzLnB1c2goJC5leHRlbmQocHJvZHVjdE9iamVjdCxxdWFudGl0eU9iaikpO1xuICAgIGRhdGFMYXllci5wdXNoKG9iaik7XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9kdWN0T2JqZWN0XG4gKiBAcGFyYW0ge1N0cmluZ3xOdW1iZXJ9IHF1YW50aXR5XG4gKi9cbmZ1bmN0aW9uIHJlbW92ZUZyb21DYXJ0IChwcm9kdWN0T2JqZWN0LCBxdWFudGl0eSkge1xuICAgIHZhciBxdWFudGl0eU9iaiA9IHsncXVhbnRpdHknOiBxdWFudGl0eX0sXG4gICAgICAgIG9iaiA9IHtcbiAgICAgICAgICAgICdldmVudCc6ICdyZW1vdmVGcm9tQ2FydCcsXG4gICAgICAgICAgICAnZWNvbW1lcmNlJzoge1xuICAgICAgICAgICAgICAgICdyZW1vdmUnOiB7XG4gICAgICAgICAgICAgICAgICAgICdwcm9kdWN0cyc6IFtdXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIG9iai5lY29tbWVyY2UuYWRkLnByb2R1Y3RzLnB1c2goJC5leHRlbmQocHJvZHVjdE9iamVjdCxxdWFudGl0eU9iaikpO1xuICAgIGRhdGFMYXllci5wdXNoKG9iaik7XG59XG5cbi8qKlxuICogQGRlc2NyaXB0aW9uIENvbnZlbmllbmNlIG1ldGhvZCBmb3IgY3JlYXRpbmcgYSBjbGljayBldmVudC5cbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50Q2F0ZWdvcnlcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudEFjdGlvblxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50TGFiZWxcbiAqL1xuZnVuY3Rpb24gcHVzaEV2ZW50IChldmVudCwgZXZlbnRDYXRlZ29yeSwgZXZlbnRBY3Rpb24sIGV2ZW50TGFiZWwpIHtcbiAgICBkYXRhTGF5ZXIucHVzaCh7XG4gICAgICAgICdldmVudCc6IGV2ZW50LFxuICAgICAgICAnZXZlbnRDYXRlZ29yeSc6IGV2ZW50Q2F0ZWdvcnksXG4gICAgICAgICdldmVudEFjdGlvbic6IGV2ZW50QWN0aW9uLFxuICAgICAgICAnZXZlbnRMYWJlbCc6IGV2ZW50TGFiZWxcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBAZGVzY3JpcHRpb24gSW5pdGlhbGl6ZSB0aGUgdGFnIG1hbmFnZXIgZnVuY3Rpb25hbGl0eVxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVTcGFjZSBUaGUgY3VycmVudCBuYW1lIHNwYWNlXG4gKi9cbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uIChuYW1lU3BhY2UpIHtcbiAgICBpZiAobmFtZVNwYWNlICYmIGV2ZW50c1tuYW1lU3BhY2VdKSB7XG4gICAgICAgIGV2ZW50c1tuYW1lU3BhY2VdKCk7XG4gICAgfVxuICAgIGV2ZW50cy5hbGwoKTtcbn07XG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG4vKipcclxuICogQ2hlY2tzIHRoZSBUTFMgYW5kIGRpc3BsYXlzIGEgd2FybmluZyBpZiBhcHByb3ByaWF0ZVxyXG4gKiBAZnVuY3Rpb24gZ2V0VXNlckFnZW50IENoZWNrcyB0aGUgVExTIGFuZCBkaXNwbGF5cyBhIHdhcm5pbmcgaWYgYXBwcm9wcmlhdGVcclxuICoqL1xyXG5mdW5jdGlvbiBnZXRVc2VyQWdlbnQoKSB7XHJcblxyXG4gICAgdmFyIHVhID0gbmF2aWdhdG9yLnVzZXJBZ2VudCwgdGVtLFxyXG4gICAgICAgIE0gPSB1YS5tYXRjaCgvKG9wZXJhfGNocm9tZXxzYWZhcml8ZmlyZWZveHxtc2llfHRyaWRlbnQoPz1cXC8pKVxcLz9cXHMqKFxcZCspL2kpIHx8IFtdO1xyXG4gICAgaWYgKC90cmlkZW50L2kudGVzdChNWzFdKSkge1xyXG4gICAgICAgIHRlbSA9ICgvXFxicnZbIDpdKyhcXGQrKS9nKS5leGVjKHVhKSB8fCBbXTtcclxuICAgICAgICByZXR1cm4ge25hbWU6ICdJRScsIHZlcnNpb246ICh0ZW1bMV0gfHwgJycpfTtcclxuICAgIH1cclxuICAgIGlmIChNWzFdID09PSAnQ2hyb21lJykge1xyXG4gICAgICAgIHRlbSA9IHVhLm1hdGNoKC9cXGJPUFJcXC8oXFxkKykvKTtcclxuICAgICAgICBpZiAodGVtICE9IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtuYW1lOiAnT3BlcmEnLCB2ZXJzaW9uOiB0ZW1bMV19O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIE0gPSBNWzJdID8gW01bMV0sIE1bMl1dIDogW25hdmlnYXRvci5hcHBOYW1lLCBuYXZpZ2F0b3IuYXBwVmVyc2lvbiwgJy0/J107XHJcbiAgICBpZiAoKHRlbSA9IHVhLm1hdGNoKC92ZXJzaW9uXFwvKFxcZCspL2kpKSAhPSBudWxsKSB7XHJcbiAgICAgICAgTS5zcGxpY2UoMSwgMSwgdGVtWzFdKTtcclxuICAgIH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgbmFtZTogTVswXSxcclxuICAgICAgICB2ZXJzaW9uOiBNWzFdXHJcbiAgICB9O1xyXG5cclxufVxyXG5cclxuLyoqXHJcbiAqIEV4cG9ydCB0aGUgZ2V0VXNlckFnZW50IGZ1bmN0aW9uXHJcbiAqL1xyXG5cclxuZXhwb3J0cy5nZXRVc2VyQWdlbnQgPSBnZXRVc2VyQWdlbnQ7XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuXHJcbi8qKlxyXG4gKiBAZnVuY3Rpb25cclxuICogQGRlc2NyaXB0aW9uIEluaXRpYWxpemVzIHRoZSB0b29sdGlwLWNvbnRlbnQgYW5kIGxheW91dFxyXG4gKi9cclxudmFyIHNldHRpbmdzID0ge1xyXG4gICAgaXRlbXM6ICcudG9vbHRpcCwgLkN1c3RvbS10b29sdGlwJyxcclxuICAgIGRlbGF5OiAwLFxyXG4gICAgdHJhY2s6IGZhbHNlLFxyXG4gICAgc2hvd1VSTDogZmFsc2UsXHJcbiAgICBleHRyYUNsYXNzOiAndG9vbHRpcHNoYWRvdycsXHJcbiAgICB0b3A6IDUsXHJcbiAgICBsZWZ0OiAtMTUwXHJcbn07XHJcbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICQoZG9jdW1lbnQpLnRvb2x0aXAoXHJcbiAgICAgICAgJC5leHRlbmQoe30sIHNldHRpbmdzLCB7XHJcbiAgICAgICAgICAgIGNvbnRlbnQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAkKHRoaXMpLmZpbmQoJy50b29sdGlwLWNvbnRlbnQgLCAudG9vbHRpcC1ib2R5JykuaHRtbCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkpO1xyXG4gICAgLyokKCcuQ3VzdG9tLXRvb2x0aXAnKS50b29sdGlwc3Rlcih7XHJcbiAgICAgICAgICAgIGNvbnRlbnQ6IGpRdWVyeSh0aGlzKS5maW5kKCcudG9vbHRpcGNvbnRhaW5lcicpLmh0bWwoKSxcclxuICAgICAgICAgICAgY29udGVudEFzSFRNTDogdHJ1ZSxcclxuICAgICAgICAgICAgbWF4V2lkdGg6IDMwMCxcclxuICAgICAgICAgICAgdG91Y2hEZXZpY2VzOiB0cnVlLFxyXG4gICAgICAgICAgICB0cmlnZ2VyOiAnY2xpY2snXHJcbiAgICB9KTsgKi9cclxuICAgICQoJy5zaGFyZS1saW5rJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdmFyIHRhcmdldCA9ICQodGhpcykuZGF0YSgndGFyZ2V0Jyk7XHJcbiAgICAgICAgaWYgKCF0YXJnZXQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkKHRhcmdldCkudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLypKSVJBIFBSRVYtMjgyIDogREVWLTMyOiBTRyBpc3N1ZS0gJ1doYXQgaXMgdGhpcycgbGluayBpbiBjaGVja291dCBiaWxsaW5nIHBhZ2Ugc2hvdWxkIG5vdCBiZSBjbGlja2FibGUuIEFkZGVkIHRoZSBmb2xsb2l3bmcgYmxvY2suKi9cclxuICAgICQoJ2EudG9vbHRpcCcpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbn07XHJcbiIsIid1c2Ugc3RyaWN0JztcclxudmFyIHV0aWwgPSByZXF1aXJlKCcuL3V0aWwnKTtcclxuLypmdW5jdGlvbiBjaGFyY291bnQoJHRoaXMpe1xyXG5cdHZhciBjaGFyYWN0ZXJMaW1pdCA9IHBhcnNlSW50KCR0aGlzLmRhdGEoXCJjaGFyYWN0ZXItbGltaXRcIikpO1xyXG5cdHZhciBjaGFyUmVtYWlucyA9IGNoYXJhY3RlckxpbWl0IC0gJHRoaXMudmFsKCkudHJpbSgpLmxlbmd0aDtcclxuXHR2YXIgY2hhckNvdW50SHRtbCA9ICdDaGFyYWN0ZXJzIFJlbWFpbmluZyAnICsgY2hhclJlbWFpbnNcclxuXHRpZigkdGhpcy5oYXNDbGFzcyhcInZpcC10ZXh0YXJlYVwiKSl7XHJcblx0XHRpZiAoJHRoaXMubmV4dCgnZGl2LmNoYXItY291bnQnKS5sZW5ndGggPT09IDApIHtcclxuXHRcdFx0Y2hhckNvdW50Q29udGFpbmVyID0gJCgnPGRpdiBjbGFzcz1cImNoYXItY291bnRcIi8+JykuaW5zZXJ0QWZ0ZXIoJHRoaXMpO1xyXG5cdFx0fVxyXG5cdFx0JHRoaXMubmV4dCgnZGl2LmNoYXItY291bnQnKS5odG1sKGNoYXJDb3VudEh0bWwpO1xyXG5cdH1lbHNlIHtcclxuXHRcdGlmICgkdGhpcy5wcmV2KCdkaXYuY2hhci1jb3VudCcpLmxlbmd0aCA9PT0gMCkge1xyXG5cdFx0XHRjaGFyQ291bnRDb250YWluZXIgPSAkKCc8ZGl2IGNsYXNzPVwiY2hhci1jb3VudFwiLz4nKS5pbnNlcnRCZWZvcmUoJHRoaXMpO1xyXG5cdFx0fVxyXG5cdFx0JHRoaXMucHJldignZGl2LmNoYXItY291bnQnKS5odG1sKGNoYXJDb3VudEh0bWwpO1xyXG5cdH1cclxufSovXHJcbnZhciB1aWV2ZW50cyA9IHtcclxuICAgIGN1c3RvbUZpZWxkczogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciAkY29uID0gJCgnYm9keScpO1xyXG4gICAgICAgICRjb24uZmluZCgnLmN1c3RvbS1jaGVja2JveCcpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoalF1ZXJ5KHRoaXMpLmZpbmQoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScpLmlzKCc6Y2hlY2tlZCcpKSB7XHJcbiAgICAgICAgICAgICAgICBqUXVlcnkodGhpcykuZmluZCgnLmN1c3RvbS1saW5rJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICRjb24uZmluZCgnLmN1c3RvbS1jaGVja2JveCAuY3VzdG9tLWxpbmsnKS5vZmYoJ2NsaWNrJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgJGN1c3RvbWNoZWNrID0gJCh0aGlzKS5jbG9zZXN0KCcuY3VzdG9tLWNoZWNrYm94Jyk7XHJcbiAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2Vycm9yJyk7XHJcbiAgICAgICAgICAgIGlmICgkY3VzdG9tY2hlY2suZmluZCgnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJykuaXMoJzpjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICAgICRjdXN0b21jaGVjay5maW5kKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKS5jbGljaygpO1xyXG4gICAgICAgICAgICAgICAgJGN1c3RvbWNoZWNrLmZpbmQoJy5jdXN0b20tbGluaycpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICRjdXN0b21jaGVjay5maW5kKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKS5jbGljaygpO1xyXG4gICAgICAgICAgICAgICAgJGN1c3RvbWNoZWNrLmZpbmQoJy5jdXN0b20tbGluaycpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8qaWYoJCgnYm9keScpLmhhc0NsYXNzKCdyYXBhbGFfZGV2aWNlJykpe1xyXG4gICAgICAgICAgICAkY29uLmZpbmQoXCIudWktZGlhbG9nICNkaWFsb2djb250YWluZXIxMjMgI1ZpcGluc2lkZXJGb3JtIC5zZWxlY3Qtc3R5bGUgLnNlbGVjdGJveFwiKS5vZmYoJ2NsaWNrJykub24oXCJjbGlja1wiLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoXCIuZmllbGQtd3JhcHBlclwiKS5hZGRDbGFzcygnZXhwYW5kZWQnKTtcclxuICAgICAgICAgICAgICAgIH0pLm9uKFwiYmx1ciBjaGFuZ2VcIiwgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoXCIuZmllbGQtd3JhcHBlclwiKS5yZW1vdmVDbGFzcygnZXhwYW5kZWQnKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0qL1xyXG5cclxuICAgICAgICAvLyBjdXN0b20gc2VsZWN0IGltcGxlbWVudGF0aW9uIGluIFZJUCBpbnNpZGVyXHJcbiAgICAgICAgLyppZighJCgnYm9keScpLmhhc0NsYXNzKCdyYXBhbGFfZGV2aWNlJykpe1xyXG4gICAgICAgICAgICAkY29uLmZpbmQoXCIuY3VzdG9taXplZC1zZWxlY3RcIikuZmluZChcInNlbGVjdFwiKS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBpZigkKHRoaXMpLmF0dHIoJ2Rpc2FibGVkJykpe1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuc2VsZWN0Ym94KCdkaXNhYmxlJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgICQodGhpcykuc2VsZWN0Ym94KCk7XHJcbiAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkKCcuc2JPcHRpb25zIGxpOmxhc3QnKS5hZGRDbGFzcygnbGFzdCcpO1xyXG4gICAgICAgICAgICB9KS5mb2N1cyhmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5uZXh0KCcuc2JIb2xkZXInKS50cmlnZ2VyKCdmb2N1cycpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgKi9cclxuICAgICAgICAkY29uLmZpbmQoJy5jdXN0b20tY2hlY2tib3ggaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJykub2ZmKCdjaGFuZ2UnKS5vbignY2hhbmdlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5jdXN0b20tY2hlY2tib3gnKS5maW5kKCcuY3VzdG9tLWxpbmsnKS5yZW1vdmVDbGFzcygnZXJyb3InKTtcclxuICAgICAgICAgICAgdmFyICRmb3JtID0gJCgnLmFkZHJlc3MnKTtcclxuICAgICAgICAgICAgaWYgKCQodGhpcykuaXMoJzpjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmN1c3RvbS1jaGVja2JveCcpLmZpbmQoJy5jdXN0b20tbGluaycpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmlzKCdbbmFtZSQ9X3NhbWVhc3NoaXBwaW5nYWRkcmVzc10nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZEFkZHJlc3MgPSAkKHRoaXMpLmNsb3Nlc3QoJy5jdXN0b20tY2hlY2tib3gnKS5kYXRhKCdhZGRyZXNzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLnNlbGVjdGVkLXNoaXBwaW5nLWFkZHJlc3MnKS5lbXB0eSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5zZWxlY3RlZC1zaGlwcGluZy1hZGRyZXNzJykuYXBwZW5kKHNlbGVjdGVkQWRkcmVzcy5maXJzdE5hbWUgKyAnICcgKyBzZWxlY3RlZEFkZHJlc3MubGFzdE5hbWUgKyAnPGJyLz4nICsgc2VsZWN0ZWRBZGRyZXNzLmFkZHJlc3MxICsgJyAnICsgc2VsZWN0ZWRBZGRyZXNzLmFkZHJlc3MyICsgJzxici8+JyArIHNlbGVjdGVkQWRkcmVzcy5jaXR5ICsgJyAnICsgc2VsZWN0ZWRBZGRyZXNzLnN0YXRlQ29kZSArICcgJyArIHNlbGVjdGVkQWRkcmVzcy5wb3N0YWxDb2RlICsgJzxici8+JyArIHNlbGVjdGVkQWRkcmVzcy5waG9uZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdXRpbC5maWxsQWRkcmVzc0ZpZWxkcyhzZWxlY3RlZEFkZHJlc3MsICRmb3JtKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuZWRpdC1hZGRyZXNzLWZpZWxkJykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuc2VsZWN0ZWQtc2hpcHBpbmctYWRkcmVzcywgLm5ldy1hZGRyZXNzLWZpZWxkJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuc2hpcHBpbmctYWRkcmVzcy1maWVsZC1zZWN0aW9uJykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgICAgICAgICB1aWV2ZW50cy5jdXN0b21GaWVsZHMoKTtcclxuICAgICAgICAgICAgICAgICAgICB1aWV2ZW50cy5zeW5jY2hlY2tvdXRIKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuY3VzdG9tLWNoZWNrYm94JykuZmluZCgnLmN1c3RvbS1saW5rJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCQodGhpcykuaXMoJ1tuYW1lJD1fc2FtZWFzc2hpcHBpbmdhZGRyZXNzXScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmFkZHJlc3NvcHRpb25zLWFkZFRvQWRkcmVzc0Jvb2ssLmFkZHJlc3NvcHRpb25zLW1ha2VkZWZhdWx0ICcpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XFwnc2hpcHBpbmdBZGRyZXNzX3NlbGVjdGVkYWRkcmVzc1xcJ10nKS52YWwoJycpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5zZWxlY3RlZC1zaGlwcGluZy1hZGRyZXNzJykuZW1wdHkoKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCdpbnB1dFtuYW1lJD1cXCdfYWRkcmVzc2lkXFwnXScpLnZhbCgnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XFwnX2FkZHJlc3NGaWVsZHNfZmlyc3ROYW1lXFwnXScpLnZhbCgnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XFwnX2FkZHJlc3NGaWVsZHNfbGFzdE5hbWVcXCddJykudmFsKCcnKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCdpbnB1dFtuYW1lJD1cXCdfYWRkcmVzc0ZpZWxkc19hZGRyZXNzMVxcJ10nKS52YWwoJycpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJ2lucHV0W25hbWUkPVxcJ19hZGRyZXNzRmllbGRzX2FkZHJlc3MyXFwnXScpLnZhbCgnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XFwnX2FkZHJlc3NGaWVsZHNfY2l0eVxcJ10nKS52YWwoJycpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJ2lucHV0W25hbWUkPVxcJ19hZGRyZXNzRmllbGRzX3Bvc3RhbFxcJ10nKS52YWwoJycpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJ2lucHV0W25hbWUkPVxcJ19hZGRyZXNzRmllbGRzX3Bob25lXFwnXScpLnZhbCgnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdWlldmVudHMuY2hhbmdlRm9ybVNlbGVjdGlvbihqUXVlcnkoJ3NlbGVjdFtuYW1lJD1cXCdfYWRkcmVzc0ZpZWxkc19zdGF0ZXNfc3RhdGVcXCddJylbMF0sICcnKTtcclxuICAgICAgICAgICAgICAgICAgICB1aWV2ZW50cy5jaGFuZ2VGb3JtU2VsZWN0aW9uKGpRdWVyeSgnc2VsZWN0LmFkZHJlc3Mtc2VsZWN0JylbMF0sICcnKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuc2hpcHBpbmctYWRkcmVzcy1maWVsZC1zZWN0aW9uJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuc2VsZWN0ZWQtc2hpcHBpbmctYWRkcmVzcywgLm5ldy1hZGRyZXNzLWZpZWxkLCAuZWRpdC1hZGRyZXNzLWZpZWxkJykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCdpbnB1dFtuYW1lJD1cXCdfYWRkcmVzc0ZpZWxkc19waG9uZVxcJ10nKS5jbG9zZXN0KCdkaXYucGhvbmUnKS5maW5kKCdzcGFuLmVycm9yY2xpZW50JykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XFwnX2FkZHJlc3NGaWVsZHNfcG9zdGFsXFwnXScpLmNsb3Nlc3QoJ2Rpdi56aXAnKS5maW5kKCdzcGFuLmVycm9yY2xpZW50JykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmFkZHJlc3Nmb3JtIC5mb3JtLXJvdy5jdXN0b20tc2VsZWN0JykucmVtb3ZlQ2xhc3MoJ2N1c3RvbXNlbGVjdC1lcnJvcicpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5jdXN0b20tc2VsZWN0JykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RWYWwgPSAkKHRoaXMpLmZpbmQoJzpzZWxlY3RlZCcpLnRleHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuc2VsZWN0b3JPdXQnKS50ZXh0KHNlbGVjdFZhbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnYS5jbGVhcmJ1dHRvbicpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuc2hpcHBpbmctYWRkcmVzcy1maWVsZC1zZWN0aW9uIC5mb3JtLXJvdycpLmZpbmQoJ2lucHV0JykucmVtb3ZlQ2xhc3MoJ2Vycm9yY2xpZW50Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdWlldmVudHMuY3VzdG9tRmllbGRzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkY29uLmZpbmQoJy5jdXN0b20tc2VsZWN0JykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQodGhpcykuZmluZCgnc2VsZWN0JykucmVtb3ZlQXR0cignc3R5bGUnKTtcclxuICAgICAgICAgICAgdmFyIHNlbFdpZHRoID0gJCh0aGlzKS5maW5kKCdzZWxlY3QnKS53aWR0aCgpO1xyXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5maW5kKCdzZWxlY3QnKS5oYXNDbGFzcygnaW5wdXQtbG9uZ2VyJykpIHtcclxuICAgICAgICAgICAgICAgIHNlbFdpZHRoID0gc2VsV2lkdGggLSAxNztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ3NlbGVjdCcpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAnd2lkdGgnOiBzZWxXaWR0aCArIDIwLFxyXG4gICAgICAgICAgICAgICAgJ2xlZnQnOiAnMHB4JyxcclxuICAgICAgICAgICAgICAgICdsaW5lLWhlaWdodCc6ICcyOHB4JyxcclxuICAgICAgICAgICAgICAgICd6LWluZGV4JzogJzk5JyxcclxuICAgICAgICAgICAgICAgICdwb3NpdGlvbic6ICdyZWxhdGl2ZScsXHJcbiAgICAgICAgICAgICAgICAnZmxvYXQnOiAnbGVmdCcsXHJcbiAgICAgICAgICAgICAgICAncGFkZGluZyc6ICcwcHgnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5maWVsZC13cmFwcGVyJykuY3NzKHtcclxuICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kLXBvc2l0aW9uJzogc2VsV2lkdGgsXHJcbiAgICAgICAgICAgICAgICAnd2lkdGgnOiBzZWxXaWR0aCArIDIwLFxyXG4gICAgICAgICAgICAgICAgJ3BhZGRpbmcnOiAnMHB4J1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKCQoJy5jcmVkaXRDYXJkJykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kLXBvc2l0aW9uJzogc2VsV2lkdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3dpZHRoJzogc2VsV2lkdGggKyAxNSxcclxuICAgICAgICAgICAgICAgICAgICAncGFkZGluZyc6ICcwcHgnXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCQodGhpcykuZmluZCgnLnNlbGVjdG9yT3V0JykubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnc2VsZWN0JykuYWZ0ZXIoJzxkaXYgY2xhc3M9XFwnc2VsZWN0b3JPdXRcXCcgc3R5bGU9XFwncG9zaXRpb246YWJzb2x1dGU7dG9wOjBweDt6LWluZGV4OjE7cGFkZGluZzowIDIwcHggMCAxMHB4O1xcJz48L2Rpdj4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5maW5kKCcuc2VsZWN0b3JFcnJvcicpLmxlbmd0aCA9PSAwICYmICEkKHRoaXMpLmNsb3Nlc3QoJ21vbnRoJykgJiYgISQodGhpcykuY2xvc2VzdCgneWVhcicpKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQgLmZpZWxkLXdyYXBwZXInKS5hcHBlbmQoJzxkaXYgY2xhc3M9XFwnc2VsZWN0b3JFcnJvciBlcnJvclxcJz48L2Rpdj4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5zZWxlY3Rvck91dCcpLnRleHQoJycpLnRleHQoJCh0aGlzKS5maW5kKCc6c2VsZWN0ZWQnKS50ZXh0KCkpO1xyXG5cclxuICAgICAgICB9KS5jaGFuZ2UoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgc3RyID0gJyc7XHJcbiAgICAgICAgICAgIHN0ciA9ICQodGhpcykuZmluZCgnOnNlbGVjdGVkJykudGV4dCgpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5zZWxlY3Rvck91dCcpLnRleHQoJycpLnRleHQoc3RyKTtcclxuICAgICAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ2FkZHJlc3NsaXN0JykpIHtcclxuICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmZpbmQoJy5zZWxlY3Rvck91dCcpLm91dGVyV2lkdGgoKSA+PSAyOTgpIHtcclxuICAgICAgICAgICAgICAgICAgICBzdHIgPSBzdHIuc3Vic3RyKDAsIDM0KSArICcuLi4nO1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLnNlbGVjdG9yT3V0JykudGV4dCgnJykudGV4dChzdHIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICRjb24uZmluZCgnLmN1c3RvbS1zZWxlY3Qgc2VsZWN0JykuYmluZCgnYmx1ciBjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCd2YWxpZCcpIHx8ICQodGhpcykudmFsKCkubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuY3VzdG9tLXNlbGVjdCcpLnJlbW92ZUNsYXNzKCdjdXN0b21zZWxlY3QtZXJyb3InKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2Vycm9yY2xpZW50JykuYWRkQ2xhc3MoJ3ZhbGlkJyk7XHJcbiAgICAgICAgICAgICAgICAvLyQodGhpcykuZmluZChcIm9wdGlvblt2YWx1ZT1cIiskKHRoaXMpLnZhbCgpK1wiXVwiKS5hdHRyKFwic2VsZWN0ZWRcIixcInNlbGVjdGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGpRdWVyeSh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuaGFzQ2xhc3MoJ3N0YXRlJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuc3RhdGUtYmxrIC5zdGF0ZWVycm9yLmVycm9yJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuY3VzdG9tLXNlbGVjdCcpLmFkZENsYXNzKCdjdXN0b21zZWxlY3QtZXJyb3InKTtcclxuICAgICAgICAgICAgICAgIGlmIChqUXVlcnkodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmhhc0NsYXNzKCdzdGF0ZScpICYmICFqUXVlcnkodGhpcykuY2xvc2VzdCgnLmN1c3RvbS1zZWxlY3QnKS5oYXNDbGFzcygnYmx1cmVkJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBqUXVlcnkoJy5zdGF0ZS1ibGsgLnN0YXRlZXJyb3IuZXJyb3InKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGpRdWVyeSh0aGlzKS5oYXNDbGFzcygneWVhcnNlbGVjdCcpIHx8IGpRdWVyeSh0aGlzKS5oYXNDbGFzcygnbW9udGhzZWxlY3QnKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGpRdWVyeSgnLnllYXJzZWxlY3QnKS52YWxpZCgpID09IDEgJiYgalF1ZXJ5KCcubW9udGhzZWxlY3QnKS52YWxpZCgpID09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBqUXVlcnkoJy5leHBpcmF0aW9uZGF0ZXZhbGlkLmVycm9yJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeSgnLmV4cGlyYXRpb25kYXRlLmVycm9yJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgLy9jaGFuZ2VzIHRoZSBzZWxlY3Rpb24gb2YgdGhlIGdpdmVuIGZvcm0gc2VsZWN0IHRvIHRoZSBnaXZlbiB2YWx1ZVxyXG4gICAgY2hhbmdlRm9ybVNlbGVjdGlvbjogZnVuY3Rpb24gKHNlbGVjdEVsZW0sIHNlbGVjdGVkVmFsdWUpIHtcclxuICAgICAgICBpZiAoIXNlbGVjdEVsZW0pIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgb3B0aW9ucyA9IHNlbGVjdEVsZW0ub3B0aW9ucztcclxuICAgICAgICBpZiAob3B0aW9ucy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIC8vIGZpbmQgaW5kZXggb2YgdmFsdWUgdG8gc2VsZWN0XHJcbiAgICAgICAgICAgIHZhciBpZHggPSAwO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9wdGlvbnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zW2ldLnZhbHVlICE9IHNlbGVjdGVkVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlkeCA9IGk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZWxlY3RFbGVtLnNlbGVjdGVkSW5kZXggPSBpZHg7XHJcbiAgICAgICAgICAgICQoJy5jdXN0b20tc2VsZWN0JykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0VmFsID0gJCh0aGlzKS5maW5kKCc6c2VsZWN0ZWQnKS50ZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5zZWxlY3Rvck91dCcpLnRleHQoc2VsZWN0VmFsKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIGluaXQ6IGZ1bmN0aW9uICgkY29uKSB7XHJcblxyXG4gICAgICAgIGlmICgkY29uID09IG51bGwpIHtcclxuICAgICAgICAgICAgJGNvbiA9ICQoJ2JvZHknKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHVpZXZlbnRzLmN1c3RvbUZpZWxkcygpO1xyXG4gICAgICAgIC8vIER5bmFtaWNhbHkgZ2VuZXJhdGluZyB0YWJpbmRleCBmb3IgVklQXHJcbiAgICAgICAgaWYgKCQoJy51aS1kaWFsb2cnKS5oYXNDbGFzcygndmlwSW5zaWRlci1kbGcnKSkge1xyXG4gICAgICAgICAgICAkKCcudmlwSW5zaWRlci1kbGcgLmZvcm1maWVsZCcpLmVhY2goZnVuY3Rpb24gKGkpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnOmlucHV0Om5vdCg6aGlkZGVuKScpLmF0dHIoJ3RhYmluZGV4JywgaSArIDIxKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8qJChkb2N1bWVudCkuYWpheENvbXBsZXRlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYoJCgnLnB0X3Byb2R1Y3RzZWFyY2hyZXN1bHQnKS5sZW5ndGggPiAwKXthcHAuc2VhcmNoLnNlYXJjaFJlZmluZW1lbnRUb2dnbGUoKTt9XHJcbiAgICAgICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcclxuICAgICAgICB9KTsqL1xyXG4gICAgICAgICRjb24uZmluZCgnYS5jbGVhcmJ1dHRvbicpLm9uKCdjbGljayB0b3VjaHN0YXJ0JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCdpbnB1dCcpLnZhbCgnJyk7XHJcbiAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJ3RleHRhcmVhJykudmFsKCcnKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnYS5jbGVhcmJ1dHRvbicpLmhpZGUoKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmNvcnJlY3RhZGRyZXNzJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcuZm9ybS1yb3cgLCAubGFiZWwgc3BhbicpLnJlbW92ZUNsYXNzKCdpbnB1dGxhYmVsJyk7XHJcbiAgICAgICAgICAgIHZhciB0ZXh0YXJlTWF4TGVuZ3RoID0gJCh0aGlzKS5jbG9zZXN0KCcuZmllbGQtd3JhcHBlcicpLmZpbmQoJ3RleHRhcmVhJykuYXR0cignbWF4bGVuZ3RoJyk7XHJcbiAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZpZWxkLXdyYXBwZXInKS5maW5kKCcuY2hhci1jb3VudCcpLmh0bWwoJycpLmh0bWwoJ0NoYXJhY3RlcnMgUmVtYWluaW5nICcgKyB0ZXh0YXJlTWF4TGVuZ3RoKTtcclxuICAgICAgICAgICAgaWYgKCQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJ2lucHV0W25hbWUkPVwiX2NyZWRpdENhcmRfbnVtYmVyXCJdJykubGVuZ3RoID4gMCAmJiAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCdpbnB1dFtuYW1lJD1cIl9jcmVkaXRDYXJkX251bWJlclwiXScpLnZhbCgpLmxlbmd0aCA8IDQpIHtcclxuICAgICAgICAgICAgICAgICQoJy5jYXJkdHlwZWltZyA+IGRpdicpLmhpZGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmZpZWxkLXdyYXBwZXIgLm1heGVsZW1lbnQnKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcuZmllbGQtd3JhcHBlciAubWF4ZWxlbWVudCcpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJGNvbi5maW5kKCcucHJvbW8taW5wdXQtYnV0dG9uIC5maWVsZC13cmFwcGVyJykub24oJ2tleXVwIGJsdXInLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmZpbmQoJ2lucHV0JykudmFsKCkgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5maW5kKCdpbnB1dCcpLnZhbCgpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ2EuY2xlYXJidXR0b24nKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnYS5jbGVhcmJ1dHRvbicpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICRjb24uZmluZCgnLmdpZnRjZXJ0ZmllbGRzIC5maWVsZC13cmFwcGVyJykub24oJ2tleXVwIGJsdXInLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmZpbmQoJ2lucHV0JykudmFsKCkgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ2lucHV0JykucmVtb3ZlQ2xhc3MoJ2Vycm9yY2xpZW50Jyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5maW5kKCdpbnB1dCcpLnZhbCgpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ2EuY2xlYXJidXR0b24nKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnYS5jbGVhcmJ1dHRvbicpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAoJCgnLnVpLWxvZ2luJykubGVuZ3RoID4gMCB8fCAkKCcucGFzc3dvcmRyZXNldCcpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgJGNvbi5maW5kKCcudWktbG9naW4gLmZvcm1maWVsZCcpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyICR2YWwgPSAkKHRoaXMpLmZpbmQoJ2lucHV0W3R5cGU9XCJ0ZXh0XCJdJykubGVuZ3RoID4gMCA/ICQodGhpcykuZmluZCgnaW5wdXRbdHlwZT1cInRleHRcIl0nKS52YWwoKSA6ICQodGhpcykuZmluZCgnaW5wdXRbdHlwZT1cInBhc3N3b3JkXCJdJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5maW5kKCcuZmllbGQtd3JhcHBlciAuY2xlYXJidXR0b24nKS5sZW5ndGggPT0gMCAmJiAkKHRoaXMpLmZpbmQoJy5maWVsZC13cmFwcGVyIGlucHV0W3R5cGU9XCJ0ZXh0XCJdJykubGVuZ3RoID4gMCB8fCAkKHRoaXMpLmZpbmQoJy5maWVsZC13cmFwcGVyIGlucHV0W3R5cGU9XCJwYXNzd29yZFwiXScpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5maWVsZC13cmFwcGVyJykuYXBwZW5kKCc8YSBjbGFzcz1cImNsZWFyYnV0dG9uXCI+PC9hPicpO1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLmNsZWFyYnV0dG9uJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCgkdmFsICE9IG51bGwgfHwgJHZhbCAhPSB1bmRlZmluZWQpICYmICR2YWwubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLmNsZWFyYnV0dG9uJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCQoJy5hY2NvdW50LXNlY3Rpb24nKS5sZW5ndGggPiAwIHx8ICQoJy5wYXNzd29yZHJlc2V0JykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAkY29uLmZpbmQoJy5hY2NvdW50LXNlY3Rpb24gLmZvcm1maWVsZCcpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyICR2YWwgPSAkKHRoaXMpLmZpbmQoJ2lucHV0W3R5cGU9XCJ0ZXh0XCJdJykubGVuZ3RoID4gMCA/ICQodGhpcykuZmluZCgnaW5wdXRbdHlwZT1cInRleHRcIl0nKS52YWwoKSA6ICQodGhpcykuZmluZCgnaW5wdXRbdHlwZT1cInBhc3N3b3JkXCJdJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5maW5kKCcuZmllbGQtd3JhcHBlciAuY2xlYXJidXR0b24nKS5sZW5ndGggPT0gMCAmJiAkKHRoaXMpLmZpbmQoJy5maWVsZC13cmFwcGVyIGlucHV0W3R5cGU9XCJ0ZXh0XCJdJykubGVuZ3RoID4gMCB8fCAkKHRoaXMpLmZpbmQoJy5maWVsZC13cmFwcGVyIGlucHV0W3R5cGU9XCJwYXNzd29yZFwiXScpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5maWVsZC13cmFwcGVyJykuYXBwZW5kKCc8YSBjbGFzcz1cImNsZWFyYnV0dG9uXCI+PC9hPicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCgkdmFsICE9IG51bGwgfHwgJHZhbCAhPSB1bmRlZmluZWQpICYmICR2YWwubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLmNsZWFyYnV0dG9uJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjb24uZmluZCgnLmZvcm1maWVsZCAuZmllbGQtd3JhcHBlciBpbnB1dCwuZm9ybWZpZWxkIC5maWVsZC13cmFwcGVyIHRleHRhcmVhJykub24oJ2tleXVwIGlucHV0IGJsdXInLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLnZhbCgpICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCQodGhpcykudmFsKCkubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJ2EuY2xlYXJidXR0b24nKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJ2EuY2xlYXJidXR0b24nKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAvL3ZhciBPU05hbWUgPSAnVW5rbm93biBPUyc7XHJcbiAgICAgICAgaWYgKG5hdmlnYXRvci5hcHBWZXJzaW9uLmluZGV4T2YoJ01hYycpICE9IC0xKSB7XHJcbiAgICAgICAgICAgICQoJy5wdF92aXBpbnNpZGVyJykuZmluZCgnc3Bhbi5yYXBhbGEtZW50aXR5LWhvbGRlciBpJykuYWRkQ2xhc3MoJ21hY2ZvbnQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICQoJy5wYXltZW50bWV0aG9kc19jb250IC50b2dnbGUnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJCgnYnV0dG9uW25hbWU9XFwnZHdmcm1fbG9naW5fbG9naW5cXCddJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcclxuICAgICAgICAgICAgfSwgMTAwKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKCdidXR0b25bbmFtZT1cXCdkd2ZybV9iaWxsaW5nZ2lmdGNlcnRfcmVkZWVtR2lmdENlcnRcXCddJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcclxuICAgICAgICAgICAgfSwgMTAwKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKCdidXR0b25bbmFtZT1cXCdkd2ZybV9iaWxsaW5nY291cG9uX2FwcGx5Q291cG9uXFwnXScpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB1aWV2ZW50cy5zeW5jY2hlY2tvdXRIKCk7XHJcbiAgICAgICAgICAgIH0sIDEwMCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJCgnLmNoZWNrYmFsYW5jZSBhJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcclxuICAgICAgICAgICAgfSwgMTAwKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKCcuZ2lmdGNlcnRjb3Vwb25mb3JtIC5naWZ0LWhlYWRpbmcnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICgkKCcuc2hvdy1jb250ZW50JykuaXMoJzp2aXNpYmxlJykgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgJCgnLnNob3ctY29udGVudCcpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmdpZnRjZXJ0ZmllbGQnKS5maW5kKCdzcGFuLmVycm9yJykuaGlkZSgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJCgnLnNob3ctY29udGVudCcpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmdpZnRjZXJ0ZmllbGQnKS5maW5kKCdzcGFuLmVycm9yJykuc2hvdygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKCdib2R5Jykub24oJ2tleXByZXNzIGtleXVwJywgJ2lucHV0W2lkJD1cIl9hZGRyZXNzaWRcIl0saW5wdXRbaWQkPVwiX2FkZHJlc3NGaWVsZHNfZmlyc3ROYW1lXCJdLGlucHV0W2lkJD1cIl9hZGRyZXNzRmllbGRzX2xhc3ROYW1lXCJdLGlucHV0W2lkJD1cIl9hZGRyZXNzRmllbGRzX2FkZHJlc3MxXCJdLGlucHV0W2lkJD1cIl9hZGRyZXNzRmllbGRzX2FkZHJlc3MyXCJdLGlucHV0W2lkJD1cIl9hZGRyZXNzRmllbGRzX2NpdHlcIl0saW5wdXRbaWQkPVwiX2FkZHJlc3NGaWVsZHNfcGhvbmVcIl0saW5wdXRbaWQkPVwiX2FkZHJlc3NGaWVsZHNfcG9zdGFsXCJdLGlucHV0W2lkJD1cIl9jb250YWN0dXNfcGhvbmVcIl0nLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICB2YXIga2V5Y29kZSA9IGUua2V5Q29kZSA/IGUua2V5Q29kZSA6IGUud2hpY2g7XHJcbiAgICAgICAgICAgIHZhciBtYXhsZW5ndGggPSAkKHRoaXMpLmF0dHIoJ21heGxlbmd0aCcpO1xyXG4gICAgICAgICAgICB2YXIgbWF4bG1zZyA9ICdUaGlzIGZpZWxkIGlzIGxpbWl0ZWQgdG8gJyArIG1heGxlbmd0aCArICcgY2hhcmFjdGVycy4nO1xyXG4gICAgICAgICAgICBpZiAoalF1ZXJ5KHRoaXMpLmhhc0NsYXNzKCdwaG9uZScpIHx8IGpRdWVyeSh0aGlzKS5oYXNDbGFzcygncGhvbmVDRFVTJykpIHtcclxuICAgICAgICAgICAgICAgIG1heGxlbmd0aCA9IDE0O1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdtYXhsZW5ndGgnLCBtYXhsZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgbWF4bG1zZyA9ICdUaGlzIGZpZWxkIGlzIGxpbWl0ZWQgdG8gMTAgbnVtYmVycy4nO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoalF1ZXJ5KHRoaXMpLmhhc0NsYXNzKCdwb3N0YWwnKSkge1xyXG4gICAgICAgICAgICAgICAgbWF4bGVuZ3RoID0gMTA7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ21heGxlbmd0aCcsIG1heGxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICBtYXhsbXNnID0gJ1RoaXMgZmllbGQgaXMgbGltaXRlZCB0byA5IG51bWJlcnMuJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoa2V5Y29kZSAhPSA4Nikge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1heEVsZW1lbnQgPSAnPGRpdiBjbGFzcz1cXCdtYXhlbGVtZW50IGhpZGVcXCc+JyArIG1heGxtc2cgKyAnPC9kaXY+JztcclxuICAgICAgICAgICAgICAgIGlmICgoJCh0aGlzKS52YWwoKS5sZW5ndGggPj0gbWF4bGVuZ3RoKSAmJiAoa2V5Y29kZSAhPSA5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmNsb3Nlc3QoJy5maWVsZC13cmFwcGVyJykuZmluZCgnc3Bhbi5lcnJvcmNsaWVudCcpLmxlbmd0aCAhPSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZpZWxkLXdyYXBwZXInKS5maW5kKCdzcGFuLmVycm9yY2xpZW50JykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmNsb3Nlc3QoJy5maWVsZC13cmFwcGVyJykuZmluZCgnLm1heGVsZW1lbnQnKS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5maWVsZC13cmFwcGVyJykuYXBwZW5kKG1heEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZpZWxkLXdyYXBwZXInKS5maW5kKCcubWF4ZWxlbWVudCcpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykudmFsKCQodGhpcykudmFsKCkuc3Vic3RyKDAsIG1heGxlbmd0aCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5jbG9zZXN0KCcuZmllbGQtd3JhcHBlcicpLmZpbmQoJy5tYXhlbGVtZW50JykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5maWVsZC13cmFwcGVyJykuZmluZCgnLm1heGVsZW1lbnQnKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJCgnYm9keScpLm9uKCdibHVyJywgJ2lucHV0W2lkJD1cIl9hZGRyZXNzaWRcIl0saW5wdXRbaWQkPVwiX2FkZHJlc3NGaWVsZHNfZmlyc3ROYW1lXCJdLGlucHV0W2lkJD1cIl9hZGRyZXNzRmllbGRzX2xhc3ROYW1lXCJdLGlucHV0W2lkJD1cIl9hZGRyZXNzRmllbGRzX2FkZHJlc3MxXCJdLGlucHV0W2lkJD1cIl9hZGRyZXNzRmllbGRzX2FkZHJlc3MyXCJdLGlucHV0W2lkJD1cIl9hZGRyZXNzRmllbGRzX2NpdHlcIl0saW5wdXRbaWQkPVwiX2FkZHJlc3NGaWVsZHNfcGhvbmVcIl0saW5wdXRbaWQkPVwiX2FkZHJlc3NGaWVsZHNfcG9zdGFsXCJdLGlucHV0W2lkJD1cIl9jb250YWN0dXNfcGhvbmVcIl0nLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQoJy5tYXhlbGVtZW50JykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgJCgnI2N1c3RvbWVyY29udGFjdHVzJykuZmluZCgnc3BhbicpLnJlbW92ZUNsYXNzKCdtYXhlbGVtZW50Jyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLyogaWYoJChcIi5vcmRlcnRvdGFsc2F2aW5nXCIpLmxlbmd0aCA+IDAgKSB7XHJcbiAgICAgICAgICAgICAkKFwiLm5ldy1zdW1tZXJ5XCIpLnJlbW92ZUNsYXNzKFwiZGlzY291bnQtYXZhaWxhYmxlXCIpO1xyXG4gICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgICAkKFwiLm5ldy1zdW1tZXJ5XCIpLmFkZENsYXNzKFwiZGlzY291bnQtYXZhaWxhYmxlXCIpO1xyXG4gICAgICAgICB9Ki9cclxuICAgICAgICBpZiAoJCgnLnVpLWRpYWxvZycpLmhhc0NsYXNzKCd2aXBJbnNpZGVyLWRsZycpKSB7XHJcbiAgICAgICAgICAgICQoJy52aXBJbnNpZGVyLWRsZyAuZm9ybWZpZWxkJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5maW5kKCcuZmllbGQtd3JhcHBlciAuY2xlYXJidXR0b24nKS5sZW5ndGggPT0gMCAmJiAkKHRoaXMpLmZpbmQoJy5maWVsZC13cmFwcGVyIGlucHV0W3R5cGU9XCJ0ZXh0XCJdJykubGVuZ3RoID4gMCB8fCAkKHRoaXMpLmZpbmQoJy5maWVsZC13cmFwcGVyIHRleHRhcmVhJykubGVuZ3RoID4gMCB8fCAkKHRoaXMpLmZpbmQoJy5maWVsZC13cmFwcGVyIGlucHV0W3R5cGU9XCJwYXNzd29yZFwiXScpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5maWVsZC13cmFwcGVyJykuYXBwZW5kKCc8YSBjbGFzcz1cImNsZWFyYnV0dG9uXCI+PC9hPicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuZmllbGQtd3JhcHBlciBpbnB1dC50ZXh0aW5wdXQsIC5maWVsZC13cmFwcGVyIHRleHRhcmVhJykudW5iaW5kKCdjaGFuZ2UnKS5iaW5kKCdjbGljayBjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ2Vycm9yY2xpZW50JykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnZXJyb3JjbGllbnQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxhYmVsJykuZmluZCgnc3Bhbi5lcnJvcmNsaWVudCcpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcubGFiZWwnKS5yZW1vdmVDbGFzcygnZXJyb3JvY2N1cmVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5mb3JtLXJvdyAsIC5sYWJlbCBzcGFuJykucmVtb3ZlQ2xhc3MoJ2lucHV0bGFiZWwnKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5maWVsZC13cmFwcGVyIHNlbGVjdCcpLnVuYmluZCgnY2hhbmdlJykuYmluZCgnZm9jdXNpbiBjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ2Vycm9yY2xpZW50JykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnZXJyb3JjbGllbnQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxhYmVsJykuZmluZCgnc3Bhbi5lcnJvcmNsaWVudCcpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcubGFiZWwnKS5yZW1vdmVDbGFzcygnZXJyb3JvY2N1cmVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5mb3JtLXJvdyAsIC5sYWJlbCBzcGFuJykucmVtb3ZlQ2xhc3MoJ2lucHV0bGFiZWwnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICQoJyNWSVBJbnNpZGVyLWZvcm0tY2FuY2VsLWlkJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJCgnLnVpLWRpYWxvZy10aXRsZWJhci1jbG9zZScpLnRyaWdnZXIoJ2NsaWNrJyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKiB2aXAgcGhvbmUgYW5kIHppcCBlcnJvciBleGNlZWQgY29kZSAqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgICQoJ2lucHV0W2lkJD1cIl92aXBpbnNpZGVyX2N1c3RvbWVyX3ppcFwiXSxpbnB1dFtpZCQ9XCJfdmlwaW5zaWRlcl9jdXN0b21lcl9waG9uZVwiXScpLmJpbmQoJ2tleXByZXNzIGtleXVwJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBrZXljb2RlID0gZS5rZXlDb2RlID8gZS5rZXlDb2RlIDogZS53aGljaDtcclxuICAgICAgICAgICAgICAgIHZhciBtYXhsZW5ndGggPSAkKHRoaXMpLmF0dHIoJ21heGxlbmd0aCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG1heGxtc2cgPSAnVGhpcyBmaWVsZCBpcyBsaW1pdGVkIHRvICcgKyBtYXhsZW5ndGggKyAnIGNoYXJhY3RlcnMuJztcclxuICAgICAgICAgICAgICAgIGlmIChqUXVlcnkodGhpcykuaGFzQ2xhc3MoJ3ZpcC1waG9uZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF4bGVuZ3RoID0gMTQ7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdtYXhsZW5ndGgnLCBtYXhsZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1heGxtc2cgPSAnLVRoaXMgZmllbGQgaXMgbGltaXRlZCB0byAxMCBudW1iZXJzLic7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoalF1ZXJ5KHRoaXMpLmhhc0NsYXNzKCd2aXAtemlwJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXhsZW5ndGggPSAxMDtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ21heGxlbmd0aCcsIG1heGxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF4bG1zZyA9ICctVGhpcyBmaWVsZCBpcyBsaW1pdGVkIHRvIDkgbnVtYmVycy4nO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGtleWNvZGUgIT0gODYpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbWF4RWxlbWVudCA9ICc8ZGl2IGNsYXNzPVxcJ21heGVsZW1lbnQgaGlkZVxcJz4nICsgbWF4bG1zZyArICc8L2Rpdj4nO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLnZhbCgpLmxlbmd0aCA+PSBtYXhsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCQodGhpcykuY2xvc2VzdCgnLmZpZWxkLXdyYXBwZXInKS5maW5kKCdzcGFuLmVycm9yY2xpZW50JykubGVuZ3RoICE9IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZpZWxkLXdyYXBwZXInKS5maW5kKCdzcGFuLmVycm9yY2xpZW50JykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5tYXhlbGVtZW50JykubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5sYWJlbCcpLmFwcGVuZChtYXhFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoa2V5Y29kZSA+IDQ3ICYmIGtleWNvZGUgPCA1OCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcubWF4ZWxlbWVudCcpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxhYmVsJykuYWRkQ2xhc3MoJ2Vycm9yb2NjdXJlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykudmFsKCQodGhpcykudmFsKCkuc3Vic3RyKDAsIG1heGxlbmd0aCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcubWF4ZWxlbWVudCcpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5tYXhlbGVtZW50JykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcubGFiZWwnKS5yZW1vdmVDbGFzcygnZXJyb3JvY2N1cmVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvL3RoaXMgaXMgdXNlZCBhZnRlciB0byByZW1vdmUgdGhlIGV4Y2VlZGluZyBlcnJvciBtZXNzYWdlIG9uIGJsdXIgZm9yIDExNDMgdGlja2V0XHJcbiAgICAgICAgICAgIGpRdWVyeSgnaW5wdXRbaWQkPVwiX3ZpcGluc2lkZXJfY3VzdG9tZXJfemlwXCJdLGlucHV0W2lkJD1cIl92aXBpbnNpZGVyX2N1c3RvbWVyX3Bob25lXCJdJykuYmluZCgnYmx1cicsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcubGFiZWwnKS5maW5kKCcubWF4ZWxlbWVudCcpLmlzKCc6dmlzaWJsZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLm1heGVsZW1lbnQnKS5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJyNWaXBpbnNpZGVyRm9ybScpLmZpbmQoJ3NwYW4nKS5yZW1vdmVDbGFzcygnbWF4ZWxlbWVudCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5sYWJlbCcpLnJlbW92ZUNsYXNzKCdlcnJvcm9jY3VyZWQnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8qKi0tLS0tLS0gbGVmdCBuYXYtLS0tLS0tLS0tLS0tLS0tKi9cclxuICAgICAgICAkY29uLmZpbmQoJy5jYXRlZ29yeW1lbnVzbmV3IGxpLmFjdGl2ZScpLmNsb3Nlc3QoJy5jYXRlZ29yeS10b3AtbGV2ZWwnKS5hZGRDbGFzcygnY3VycmVudCcpO1xyXG4gICAgICAgICRjb24uZmluZCgnLmNhdGVnb3J5LXRvcC1sZXZlbCcpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnY3VycmVudCcpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSAkKCcuY2F0ZWdvcnltZW51c25ldyBsaS5hY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIC8qXHJcbiAgICAgICAgICAgICAgICB2YXIgJG5vdHRoaXMgPSAkKCcuY2F0ZWdvcnltZW51c25ldyBsaScpLmZpbHRlcihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQodGhpcykubm90KCcuYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCQodGhpcykuZmluZCgnPiB1bCcpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnPiBhIC5jb3VudC1wcm9kdWN0cycpLmFkZENsYXNzKCdzZWxlY3Rfc3VibGV2ZWxhcnJvdycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgJHRoaXMuZmluZCgnPiB1bCcpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICR0aGlzLnBhcmVudHMoJ3VsJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCR0aGlzLmZpbmQoJz4gdWwnKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMuZmluZCgnPiBhIC5jb3VudC1wcm9kdWN0cycpLmFkZENsYXNzKCdzdWJsZXZlbGFycm93Jyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkdGhpcy5wYXJlbnRzKCdsaScpLm5vdCgnbGkuYWN0aXZlJykuZmluZCgnPiBhIC5jb3VudC1wcm9kdWN0cycpLmFkZENsYXNzKCdzdWJsZXZlbGFycm93Jyk7XHJcbiAgICAgICAgICAgICAgICAkdGhpcy5maW5kKCdsaScpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmZpbmQoJz4gdWwnKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnPiBhIC5jb3VudC1wcm9kdWN0cycpLmFkZENsYXNzKCdzZWxlY3Rfc3VibGV2ZWxhcnJvdycpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKCQodGhpcykuZmluZCgnPiB1bCcpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJz4gYSAuY291bnQtcHJvZHVjdHMnKS5hZGRDbGFzcygnc2VsZWN0X3N1YmxldmVsYXJyb3cnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8qJCgndGV4dGFyZWFbZGF0YS1jaGFyYWN0ZXItbGltaXRdJykuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBjaGFyY291bnQoJCh0aGlzKSk7XHJcbiAgICAgICAgICAgIC8vIHRyaWdnZXIgdGhlIGtleWRvd24gZXZlbnQgc28gdGhhdCBhbnkgZXhpc3RpbmcgY2hhcmFjdGVyIGRhdGEgaXMgY2FsY3VsYXRlZFxyXG4gICAgICAgIH0pLm9uKCdrZXl1cCBrZXlwcmVzcycsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIGNoYXJjb3VudCgkKHRoaXMpKTtcclxuICAgICAgICB9KTsqL1xyXG4gICAgfSxcclxuICAgIHN5bmNjaGVja291dEg6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoJCgnLnB0X2NoZWNrb3V0JykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAkKCcuaXRlbS1jYXJ0LXNjcm9sbGJhcicpLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XHJcbiAgICAgICAgICAgICQoJy5wdF9jaGVja291dCAuc3VtbWFyeS1zZWN0aW9uIC5zbGltU2Nyb2xsRGl2JykucmVtb3ZlQXR0cignc3R5bGUnKTtcclxuICAgICAgICAgICAgJCgnLml0ZW0tY2FydC1zY3JvbGxiYXInKS5yZW1vdmVDbGFzcygnc2Nyb2xsYmFyLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICAkKCcucHRfY2hlY2tvdXQgIC5hamF4LWNhcnRzdW1tYXJ5JykuZmluZCgnLnN1bW1hcnktY2FydHRhYmxlJykucmVtb3ZlQ2xhc3MoJ3Njcm9sbGJhci1pcy1hY3RpdmUnKTtcclxuICAgICAgICAgICAgJCgnLml0ZW0tY2FydC1zY3JvbGxiYXInKS5zbGltU2Nyb2xsKHtkZXN0cm95OiB0cnVlfSk7XHJcbiAgICAgICAgICAgIHZhciBjaGVja291dExlZnRIID0gJCgnLnB0X2NoZWNrb3V0IC5jaGVja291dF9jb250JykuaGVpZ2h0KCksXHJcbiAgICAgICAgICAgICAgICBzdW1tYXJ5SCA9ICQoJy5wdF9jaGVja291dCAuc3VtbWFyeS1zZWN0aW9uJykuaGVpZ2h0KCksXHJcbiAgICAgICAgICAgICAgICBuZXdzdW1tYXJ5SCA9ICQoJy5wdF9jaGVja291dCAgLm5ldy1zdW1tZXJ5LWNhcnQnKS5ub3QoJy5tb2JpbGUtdmlldycpLmhlaWdodCgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIG5ld0hlaWdodFJpZ2h0ID0gc3VtbWFyeUggKyBuZXdzdW1tYXJ5SDtcclxuICAgICAgICAgICAgaWYgKG5ld0hlaWdodFJpZ2h0ID49IGNoZWNrb3V0TGVmdEgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBzdW1tYXJ5SGVpZ2h0ID0gY2hlY2tvdXRMZWZ0SCAtIG5ld3N1bW1hcnlIO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN1bW1hcnlIZWlnaHRSaWdodEJvdHRvbSA9IHN1bW1hcnlIZWlnaHQgLSA5OTtcclxuICAgICAgICAgICAgICAgICQoJy5wdF9jaGVja291dCAuc3VtbWFyeS1zZWN0aW9uIC5zbGltU2Nyb2xsRGl2JykuY3NzKHsnaGVpZ2h0Jzogc3VtbWFyeUhlaWdodFJpZ2h0Qm90dG9tfSk7XHJcbiAgICAgICAgICAgICAgICAkKCcuaXRlbS1jYXJ0LXNjcm9sbGJhcicpLmFkZENsYXNzKCdzY3JvbGxiYXItYWN0aXZlJykuY3NzKHsnaGVpZ2h0Jzogc3VtbWFyeUhlaWdodFJpZ2h0Qm90dG9tfSk7XHJcbiAgICAgICAgICAgICAgICAkKCcuaXRlbS1jYXJ0LXNjcm9sbGJhcicpLnNsaW1TY3JvbGwoe1xyXG4gICAgICAgICAgICAgICAgICAgIHJhaWxWaXNpYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnI2EwYTBhMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgYWx3YXlzVmlzaWJsZTogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAkKCcucHRfY2hlY2tvdXQgIC5hamF4LWNhcnRzdW1tYXJ5JykuZmluZCgnLnN1bW1hcnktY2FydHRhYmxlJykuYWRkQ2xhc3MoJ3Njcm9sbGJhci1pcy1hY3RpdmUnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICQoJy5pdGVtLWNhcnQtc2Nyb2xsYmFyJykuY3NzKHsnaGVpZ2h0JzogJ2F1dG8nfSk7XHJcbiAgICAgICAgICAgICAgICAkKCcucHRfY2hlY2tvdXQgLnN1bW1hcnktc2VjdGlvbiAuc2xpbVNjcm9sbERpdicpLmNzcyh7J2hlaWdodCc6ICdhdXRvJywgJ292ZXJmbG93LXknOiAnYXV0byd9KTtcclxuICAgICAgICAgICAgICAgICQoJy5pdGVtLWNhcnQtc2Nyb2xsYmFyJykucmVtb3ZlQ2xhc3MoJ3Njcm9sbGJhci1hY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICQoJy5wdF9jaGVja291dCAgLmFqYXgtY2FydHN1bW1hcnknKS5maW5kKCcuc3VtbWFyeS1jYXJ0dGFibGUnKS5yZW1vdmVDbGFzcygnc2Nyb2xsYmFyLWlzLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgJCgnLml0ZW0tY2FydC1zY3JvbGxiYXInKS5zbGltU2Nyb2xsKHtkZXN0cm95OiB0cnVlfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxubW9kdWxlLmV4cG9ydHMgPSB1aWV2ZW50cztcclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxudmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcclxudmFyIGNhcmRyZWdleCA9IHtcclxuICAgIG1hc3RlcmNhcmQ6IC9eNVsxLTVdWzAtOV17MiwxNH0kLyxcclxuICAgIHZpc2E6IC9eNFswLTldezMsMTV9JC8sXHJcbiAgICBhbWV4OiAvXjNbNDddKFswLTldezIsMTN9KSQvLFxyXG4gICAgZGlzY292ZXI6IC9eNig/OjAxMVswLTldezAsMTJ9fDVbMC05XXsyLDE0fSkkL1xyXG59O1xyXG52YXIgdXRpbCA9IHtcclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gYXBwZW5kcyB0aGUgcGFyYW1ldGVyIHdpdGggdGhlIGdpdmVuIG5hbWUgYW5kIHZhbHVlIHRvIHRoZSBnaXZlbiB1cmwgYW5kIHJldHVybnMgdGhlIGNoYW5nZWQgdXJsXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdXJsIHRoZSB1cmwgdG8gd2hpY2ggdGhlIHBhcmFtZXRlciB3aWxsIGJlIGFkZGVkXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSB0aGUgbmFtZSBvZiB0aGUgcGFyYW1ldGVyXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdmFsdWUgdGhlIHZhbHVlIG9mIHRoZSBwYXJhbWV0ZXJcclxuICAgICAqL1xyXG4gICAgYXBwZW5kUGFyYW1Ub1VSTDogZnVuY3Rpb24gKHVybCwgbmFtZSwgdmFsdWUpIHtcclxuICAgICAgICAvLyBxdWl0IGlmIHRoZSBwYXJhbSBhbHJlYWR5IGV4aXN0c1xyXG4gICAgICAgIGlmICh1cmwuaW5kZXhPZihuYW1lICsgJz0nKSAhPT0gLTEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVybDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHNlcGFyYXRvciA9IHVybC5pbmRleE9mKCc/JykgIT09IC0xID8gJyYnIDogJz8nO1xyXG4gICAgICAgIHJldHVybiB1cmwgKyBzZXBhcmF0b3IgKyBuYW1lICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKTtcclxuICAgIH0sXHJcbiAgICBoaWRkZW5EYXRhOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgalF1ZXJ5LmVhY2goalF1ZXJ5KCcuaGlkZGVuJyksIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGhpZGRlblN0ciA9IGpRdWVyeSh0aGlzKS5odG1sKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoaGlkZGVuU3RyID09PSAnJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBzZWUgaWYgaXRzIGEganNvbiBzdHJpbmdcclxuICAgICAgICAgICAgaWYgKGpRdWVyeSh0aGlzKS5oYXNDbGFzcygnanNvbicpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB0cnkgdG8gcGFyc2UgaXQgYXMgYSBqc29uXHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGhpZGRlblN0ciA9IHdpbmRvdy5ldmFsKCcoJyArIGhpZGRlblN0ciArICcpJyk7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRG8gTm90aGluZ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBqUXVlcnkodGhpcykucHJldigpLmRhdGEoJ2RhdGEnLCBoaWRkZW5TdHIpO1xyXG5cclxuICAgICAgICAgICAgalF1ZXJ5KHRoaXMpLnJlbW92ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKioqKiBSZWFkIGNvb2tpZWVlICAqKioqKi9cclxuICAgIHJlYWRDb29raWU6IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgdmFyIG5hbWVFUSA9IG5hbWUgKyAnPSc7XHJcbiAgICAgICAgdmFyIGNhID0gZG9jdW1lbnQuY29va2llLnNwbGl0KCc7Jyk7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjYS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgYyA9IGNhW2ldO1xyXG4gICAgICAgICAgICB3aGlsZSAoYy5jaGFyQXQoMCkgPT0gJyAnKSBjID0gYy5zdWJzdHJpbmcoMSwgYy5sZW5ndGgpO1xyXG4gICAgICAgICAgICBpZiAoYy5pbmRleE9mKG5hbWVFUSkgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGMuc3Vic3RyaW5nKG5hbWVFUS5sZW5ndGgsIGMubGVuZ3RoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqKiAgUmVhZCBjb29raWUgKioqL1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb25cclxuICAgICAqIEBkZXNjcmlwdGlvbiBhcHBlbmRzIHRoZSBwYXJhbWV0ZXJzIHRvIHRoZSBnaXZlbiB1cmwgYW5kIHJldHVybnMgdGhlIGNoYW5nZWQgdXJsXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdXJsIHRoZSB1cmwgdG8gd2hpY2ggdGhlIHBhcmFtZXRlcnMgd2lsbCBiZSBhZGRlZFxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtc1xyXG4gICAgICovXHJcbiAgICBhcHBlbmRQYXJhbXNUb1VybDogZnVuY3Rpb24gKHVybCwgcGFyYW1zKSB7XHJcbiAgICAgICAgdmFyIF91cmwgPSB1cmw7XHJcbiAgICAgICAgXy5lYWNoKHBhcmFtcywgZnVuY3Rpb24gKHZhbHVlLCBuYW1lKSB7XHJcbiAgICAgICAgICAgIF91cmwgPSB0aGlzLmFwcGVuZFBhcmFtVG9VUkwoX3VybCwgbmFtZSwgdmFsdWUpO1xyXG4gICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgcmV0dXJuIF91cmw7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gcmVtb3ZlIHRoZSBwYXJhbWV0ZXIgYW5kIGl0cyB2YWx1ZSBmcm9tIHRoZSBnaXZlbiB1cmwgYW5kIHJldHVybnMgdGhlIGNoYW5nZWQgdXJsXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdXJsIHRoZSB1cmwgZnJvbSB3aGljaCB0aGUgcGFyYW1ldGVyIHdpbGwgYmUgcmVtb3ZlZFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgdGhlIG5hbWUgb2YgcGFyYW1ldGVyIHRoYXQgd2lsbCBiZSByZW1vdmVkIGZyb20gdXJsXHJcbiAgICAgKi9cclxuICAgIHJlbW92ZVBhcmFtRnJvbVVSTDogZnVuY3Rpb24gKHVybCwgbmFtZSkge1xyXG4gICAgICAgIGlmICh1cmwuaW5kZXhPZignPycpID09PSAtMSB8fCB1cmwuaW5kZXhPZihuYW1lICsgJz0nKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVybDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGhhc2g7XHJcbiAgICAgICAgdmFyIHBhcmFtcztcclxuICAgICAgICB2YXIgZG9tYWluID0gdXJsLnNwbGl0KCc/JylbMF07XHJcbiAgICAgICAgdmFyIHBhcmFtVXJsID0gdXJsLnNwbGl0KCc/JylbMV07XHJcbiAgICAgICAgdmFyIG5ld1BhcmFtcyA9IFtdO1xyXG4gICAgICAgIC8vIGlmIHRoZXJlIGlzIGEgaGFzaCBhdCB0aGUgZW5kLCBzdG9yZSB0aGUgaGFzaFxyXG4gICAgICAgIGlmIChwYXJhbVVybC5pbmRleE9mKCcjJykgPiAtMSkge1xyXG4gICAgICAgICAgICBoYXNoID0gcGFyYW1Vcmwuc3BsaXQoJyMnKVsxXSB8fCAnJztcclxuICAgICAgICAgICAgcGFyYW1VcmwgPSBwYXJhbVVybC5zcGxpdCgnIycpWzBdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwYXJhbXMgPSBwYXJhbVVybC5zcGxpdCgnJicpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFyYW1zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIC8vIHB1dCBiYWNrIHBhcmFtIHRvIG5ld1BhcmFtcyBhcnJheSBpZiBpdCBpcyBub3QgdGhlIG9uZSB0byBiZSByZW1vdmVkXHJcbiAgICAgICAgICAgIGlmIChwYXJhbXNbaV0uc3BsaXQoJz0nKVswXSAhPT0gbmFtZSkge1xyXG4gICAgICAgICAgICAgICAgbmV3UGFyYW1zLnB1c2gocGFyYW1zW2ldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZG9tYWluICsgJz8nICsgbmV3UGFyYW1zLmpvaW4oJyYnKSArIChoYXNoID8gJyMnICsgaGFzaCA6ICcnKTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb25cclxuICAgICAqIEBkZXNjcmlwdGlvbiBleHRyYWN0IHRoZSBxdWVyeSBzdHJpbmcgZnJvbSBVUkxcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB1cmwgdGhlIHVybCB0byBleHRyYSBxdWVyeSBzdHJpbmcgZnJvbVxyXG4gICAgICoqL1xyXG4gICAgZ2V0UXVlcnlTdHJpbmc6IGZ1bmN0aW9uICh1cmwpIHtcclxuICAgICAgICB2YXIgcXM7XHJcbiAgICAgICAgaWYgKCFfLmlzU3RyaW5nKHVybCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICAgICAgICBhLmhyZWYgPSB1cmw7XHJcbiAgICAgICAgaWYgKGEuc2VhcmNoKSB7XHJcbiAgICAgICAgICAgIHFzID0gYS5zZWFyY2guc3Vic3RyKDEpOyAvLyByZW1vdmUgdGhlIGxlYWRpbmcgP1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcXM7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb25cclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9XHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ31cclxuICAgICAqL1xyXG4gICAgZWxlbWVudEluVmlld3BvcnQ6IGZ1bmN0aW9uIChlbCwgb2Zmc2V0VG9Ub3ApIHtcclxuICAgICAgICB2YXIgdG9wID0gZWwub2Zmc2V0VG9wLFxyXG4gICAgICAgICAgICBsZWZ0ID0gZWwub2Zmc2V0TGVmdCxcclxuICAgICAgICAgICAgd2lkdGggPSBlbC5vZmZzZXRXaWR0aCxcclxuICAgICAgICAgICAgaGVpZ2h0ID0gZWwub2Zmc2V0SGVpZ2h0O1xyXG5cclxuICAgICAgICB3aGlsZSAoZWwub2Zmc2V0UGFyZW50KSB7XHJcbiAgICAgICAgICAgIGVsID0gZWwub2Zmc2V0UGFyZW50O1xyXG4gICAgICAgICAgICB0b3AgKz0gZWwub2Zmc2V0VG9wO1xyXG4gICAgICAgICAgICBsZWZ0ICs9IGVsLm9mZnNldExlZnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodHlwZW9mKG9mZnNldFRvVG9wKSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgdG9wIC09IG9mZnNldFRvVG9wO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHdpbmRvdy5wYWdlWE9mZnNldCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgdG9wIDwgKHdpbmRvdy5wYWdlWU9mZnNldCArIHdpbmRvdy5pbm5lckhlaWdodCkgJiZcclxuICAgICAgICAgICAgICAgIGxlZnQgPCAod2luZG93LnBhZ2VYT2Zmc2V0ICsgd2luZG93LmlubmVyV2lkdGgpICYmXHJcbiAgICAgICAgICAgICAgICAodG9wICsgaGVpZ2h0KSA+IHdpbmRvdy5wYWdlWU9mZnNldCAmJlxyXG4gICAgICAgICAgICAgICAgKGxlZnQgKyB3aWR0aCkgPiB3aW5kb3cucGFnZVhPZmZzZXRcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChkb2N1bWVudC5jb21wYXRNb2RlID09PSAnQ1NTMUNvbXBhdCcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgIHRvcCA8ICh3aW5kb3cuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCArIHdpbmRvdy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KSAmJlxyXG4gICAgICAgICAgICAgICAgbGVmdCA8ICh3aW5kb3cuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQgKyB3aW5kb3cuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoKSAmJlxyXG4gICAgICAgICAgICAgICAgKHRvcCArIGhlaWdodCkgPiB3aW5kb3cuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCAmJlxyXG4gICAgICAgICAgICAgICAgKGxlZnQgKyB3aWR0aCkgPiB3aW5kb3cuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnRcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gQXBwZW5kcyB0aGUgcGFyYW1ldGVyICdmb3JtYXQ9YWpheCcgdG8gYSBnaXZlbiBwYXRoXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0aCB0aGUgcmVsYXRpdmUgcGF0aFxyXG4gICAgICovXHJcbiAgICBhamF4VXJsOiBmdW5jdGlvbiAocGF0aCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFwcGVuZFBhcmFtVG9VUkwocGF0aCwgJ2Zvcm1hdCcsICdhamF4Jyk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB1cmxcclxuICAgICAqL1xyXG4gICAgdG9BYnNvbHV0ZVVybDogZnVuY3Rpb24gKHVybCkge1xyXG4gICAgICAgIGlmICh1cmwuaW5kZXhPZignaHR0cCcpICE9PSAwICYmIHVybC5jaGFyQXQoMCkgIT09ICcvJykge1xyXG4gICAgICAgICAgICB1cmwgPSAnLycgKyB1cmw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB1cmw7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb25cclxuICAgICAqIEBkZXNjcmlwdGlvbiBMb2FkcyBjc3MgZHluYW1pY2FsbHkgZnJvbSBnaXZlbiB1cmxzXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSB1cmxzIEFycmF5IG9mIHVybHMgZnJvbSB3aGljaCBjc3Mgd2lsbCBiZSBkeW5hbWljYWxseSBsb2FkZWQuXHJcbiAgICAgKi9cclxuICAgIGxvYWREeW5hbWljQ3NzOiBmdW5jdGlvbiAodXJscykge1xyXG4gICAgICAgIHZhciBpLCBsZW4gPSB1cmxzLmxlbmd0aDtcclxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5sb2FkZWRDc3NGaWxlcy5wdXNoKHRoaXMubG9hZENzc0ZpbGUodXJsc1tpXSkpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb25cclxuICAgICAqIEBkZXNjcmlwdGlvbiBMb2FkcyBjc3MgZmlsZSBkeW5hbWljYWxseSBmcm9tIGdpdmVuIHVybFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHVybCBUaGUgdXJsIGZyb20gd2hpY2ggY3NzIGZpbGUgd2lsbCBiZSBkeW5hbWljYWxseSBsb2FkZWQuXHJcbiAgICAgKi9cclxuICAgIGxvYWRDc3NGaWxlOiBmdW5jdGlvbiAodXJsKSB7XHJcbiAgICAgICAgcmV0dXJuICQoJzxsaW5rLz4nKS5hcHBlbmRUbygkKCdoZWFkJykpLmF0dHIoe1xyXG4gICAgICAgICAgICB0eXBlOiAndGV4dC9jc3MnLFxyXG4gICAgICAgICAgICByZWw6ICdzdHlsZXNoZWV0J1xyXG4gICAgICAgIH0pLmF0dHIoJ2hyZWYnLCB1cmwpOyAvLyBmb3IgaS5lLiA8OSwgaHJlZiBtdXN0IGJlIGFkZGVkIGFmdGVyIGxpbmsgaGFzIGJlZW4gYXBwZW5kZWQgdG8gaGVhZFxyXG4gICAgfSxcclxuICAgIC8vIGFycmF5IHRvIGtlZXAgdHJhY2sgb2YgdGhlIGR5bmFtaWNhbGx5IGxvYWRlZCBDU1MgZmlsZXNcclxuICAgIGxvYWRlZENzc0ZpbGVzOiBbXSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBmdW5jdGlvblxyXG4gICAgICogQGRlc2NyaXB0aW9uIFJlbW92ZXMgYWxsIGNzcyBmaWxlcyB3aGljaCB3ZXJlIGR5bmFtaWNhbGx5IGxvYWRlZFxyXG4gICAgICovXHJcbiAgICBjbGVhckR5bmFtaWNDc3M6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgaSA9IHRoaXMubG9hZGVkQ3NzRmlsZXMubGVuZ3RoO1xyXG4gICAgICAgIHdoaWxlICgwID4gaS0tKSB7XHJcbiAgICAgICAgICAgICQodGhpcy5sb2FkZWRDc3NGaWxlc1tpXSkucmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubG9hZGVkQ3NzRmlsZXMgPSBbXTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEBmdW5jdGlvblxyXG4gICAgICogQGRlc2NyaXB0aW9uIEV4dHJhY3RzIGFsbCBwYXJhbWV0ZXJzIGZyb20gYSBnaXZlbiBxdWVyeSBzdHJpbmcgaW50byBhbiBvYmplY3RcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBxcyBUaGUgcXVlcnkgc3RyaW5nIGZyb20gd2hpY2ggdGhlIHBhcmFtZXRlcnMgd2lsbCBiZSBleHRyYWN0ZWRcclxuICAgICAqL1xyXG4gICAgZ2V0UXVlcnlTdHJpbmdQYXJhbXM6IGZ1bmN0aW9uIChxcykge1xyXG4gICAgICAgIGlmICghcXMgfHwgcXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7fTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHBhcmFtcyA9IHt9LFxyXG4gICAgICAgICAgICB1bmVzY2FwZWRRUyA9IGRlY29kZVVSSUNvbXBvbmVudChxcyk7XHJcbiAgICAgICAgLy8gVXNlIHRoZSBTdHJpbmc6OnJlcGxhY2UgbWV0aG9kIHRvIGl0ZXJhdGUgb3ZlciBlYWNoXHJcbiAgICAgICAgLy8gbmFtZS12YWx1ZSBwYWlyIGluIHRoZSBzdHJpbmcuXHJcbiAgICAgICAgdW5lc2NhcGVkUVMucmVwbGFjZShuZXcgUmVnRXhwKCcoW14/PSZdKykoPShbXiZdKikpPycsICdnJyksXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uICgkMCwgJDEsICQyLCAkMykge1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zWyQxXSA9ICQzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gcGFyYW1zO1xyXG4gICAgfSxcclxuXHJcbiAgICBmaWxsQWRkcmVzc0ZpZWxkczogZnVuY3Rpb24gKGFkZHJlc3MsICRmb3JtKSB7XHJcbiAgICAgICAgZm9yICh2YXIgZmllbGQgaW4gYWRkcmVzcykge1xyXG4gICAgICAgICAgICBpZiAoZmllbGQgPT09ICdJRCcgfHwgZmllbGQgPT09ICdVVUlEJyB8fCBmaWVsZCA9PT0gJ2tleScpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGlmIHRoZSBrZXkgaW4gYWRkcmVzcyBvYmplY3QgZW5kcyB3aXRoICdDb2RlJywgcmVtb3ZlIHRoYXQgc3VmZml4XHJcbiAgICAgICAgICAgIC8vIGtleXMgdGhhdCBlbmRzIHdpdGggJ0NvZGUnIGFyZSBwb3N0YWxDb2RlLCBzdGF0ZUNvZGUgYW5kIGNvdW50cnlDb2RlXHJcbiAgICAgICAgICAgICRmb3JtLmZpbmQoJ1tuYW1lJD1cIicgKyBmaWVsZC5yZXBsYWNlKCdDb2RlJywgJycpICsgJ1wiXScpLnZhbChhZGRyZXNzW2ZpZWxkXSk7XHJcbiAgICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgc3RhdGUgZmllbGRzXHJcbiAgICAgICAgICAgIGlmIChmaWVsZCA9PT0gJ2NvdW50cnlDb2RlJykge1xyXG4gICAgICAgICAgICAgICAgJGZvcm0uZmluZCgnW25hbWUkPVwiY291bnRyeVwiXScpLnRyaWdnZXIoJ2NoYW5nZScpO1xyXG4gICAgICAgICAgICAgICAgLy8gcmV0cmlnZ2VyIHN0YXRlIHNlbGVjdGlvbiBhZnRlciBjb3VudHJ5IGhhcyBjaGFuZ2VkXHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzIHJlc3VsdHMgaW4gZHVwbGljYXRpb24gb2YgdGhlIHN0YXRlIGNvZGUsIGJ1dCBpcyBhIG5lY2Vzc2FyeSBldmlsXHJcbiAgICAgICAgICAgICAgICAvLyBmb3Igbm93IGJlY2F1c2Ugc29tZXRpbWVzIGNvdW50cnlDb2RlIGNvbWVzIGFmdGVyIHN0YXRlQ29kZVxyXG4gICAgICAgICAgICAgICAgJGZvcm0uZmluZCgnW25hbWUkPVwic3RhdGVcIl0nKS52YWwoYWRkcmVzcy5zdGF0ZUNvZGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gVXBkYXRlcyB0aGUgbnVtYmVyIG9mIHRoZSByZW1haW5pbmcgY2hhcmFjdGVyXHJcbiAgICAgKiBiYXNlZCBvbiB0aGUgY2hhcmFjdGVyIGxpbWl0IGluIGEgdGV4dCBhcmVhXHJcbiAgICAgKi9cclxuICAgIGxpbWl0Q2hhcmFjdGVyczogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJ2Zvcm0nKS5maW5kKCd0ZXh0YXJlYVtkYXRhLWNoYXJhY3Rlci1saW1pdF0nKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGNoYXJhY3RlckxpbWl0ID0gJCh0aGlzKS5kYXRhKCdjaGFyYWN0ZXItbGltaXQnKTtcclxuICAgICAgICAgICAgdmFyIGNoYXJDb3VudEh0bWwgPSBTdHJpbmcuZm9ybWF0KFJlc291cmNlcy5DSEFSX0xJTUlUX01TRyxcclxuICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz1cImNoYXItcmVtYWluLWNvdW50XCI+JyArIGNoYXJhY3RlckxpbWl0ICsgJzwvc3Bhbj4nLFxyXG4gICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwiY2hhci1hbGxvd2VkLWNvdW50XCI+JyArIGNoYXJhY3RlckxpbWl0ICsgJzwvc3Bhbj4nKTtcclxuICAgICAgICAgICAgdmFyIGNoYXJDb3VudENvbnRhaW5lciA9ICQodGhpcykubmV4dCgnZGl2LmNoYXItY291bnQnKTtcclxuICAgICAgICAgICAgaWYgKGNoYXJDb3VudENvbnRhaW5lci5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGNoYXJDb3VudENvbnRhaW5lciA9ICQoJzxkaXYgY2xhc3M9XCJjaGFyLWNvdW50XCIvPicpLmluc2VydEFmdGVyKCQodGhpcykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNoYXJDb3VudENvbnRhaW5lci5odG1sKGNoYXJDb3VudEh0bWwpO1xyXG4gICAgICAgICAgICAvLyB0cmlnZ2VyIHRoZSBrZXlkb3duIGV2ZW50IHNvIHRoYXQgYW55IGV4aXN0aW5nIGNoYXJhY3RlciBkYXRhIGlzIGNhbGN1bGF0ZWRcclxuICAgICAgICAgICAgJCh0aGlzKS5jaGFuZ2UoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICB0cmltUHJlZml4OiBmdW5jdGlvbiAoc3RyLCBwcmVmaXgpIHtcclxuICAgICAgICByZXR1cm4gc3RyLnN1YnN0cmluZyhwcmVmaXgubGVuZ3RoKTtcclxuICAgIH0sXHJcbiAgICBjYXJkdHlwZToge1xyXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCQoJyNwYXltZW50bWV0aG9kcycpLmZpbmQoJy5jcmVkaXRDYXJkLW51bWJlcicpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICQoJyNwYXltZW50bWV0aG9kcycpLmZpbmQoJy5jcmVkaXRDYXJkLW51bWJlcicpLmJpbmQoJ2tleXByZXNzIGtleXVwJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLnZhbCgpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuY2FyZGVycm9yLmVycm9yJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS52YWwoKS5sZW5ndGggPCA0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5jYXJkdHlwZWltZyA+IGRpdicpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICQoJy5jcmVkaXRDYXJkLW51bWJlciwgLmNyZWRpdGNhcmRfY3ZuJykub24oJ2tleXByZXNzJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBlID0gKGUpID8gZSA6IHdpbmRvdy5ldmVudDtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hhckNvZGUgPSAoZS53aGljaCkgPyBlLndoaWNoIDogZS5rZXlDb2RlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGFyQ29kZSA+IDMxICYmIChjaGFyQ29kZSA8IDQ4IHx8IGNoYXJDb2RlID4gNTcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICQoJyNwYXltZW50bWV0aG9kcycpLmZpbmQoJy5jcmVkaXRDYXJkLW51bWJlcicpLmJsdXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWwgPSAkLnRyaW0oJCh0aGlzKS52YWwoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy92YXIgcmVnZXggPSAvXlthLXpBLVpdKyQvO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlcnJvcnNwYW4gPSAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCdzcGFuLmNhcmRlcnJvcicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yc3Bhbi5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCQoJy5jYXJkZXJyb3IuZXJyb3InKS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuYXBwZW5kKCc8c3BhbiBjbGFzcz1cImNhcmRlcnJvciBlcnJvclwiPk5vdCBhIHZhbGlkIENyZWRpdCBDYXJkIE51bWJlciwgcGxlYXNlIHRyeSBhZ2Fpbi48L3NwYW4+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmNhcmRlcnJvci5lcnJvcicpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhcmRUeXBldmFsID0gdXRpbC52YWxpZGF0ZWNhcmR0eXBlKHZhbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYXJkVHlwZXZhbCAhPSAnRXJyb3InKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcnNwYW4uaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3BheW1lbnRtZXRob2RzJykuZmluZCgnc2VsZWN0W25hbWUkPVwiX3BheW1lbnRNZXRob2RzX2NyZWRpdENhcmRfdHlwZVwiXScpLnZhbChjYXJkVHlwZXZhbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuY2FyZHR5cGVpbWcgPiBkaXYnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuY2FyZHR5cGVpbWcgPiBkaXYuJyArIGNhcmRUeXBldmFsKS5zaG93KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChjYXJkVHlwZXZhbCA9PSAnTWFzdGVyQ2FyZCcpIHx8IChjYXJkVHlwZXZhbCA9PSAnVmlzYScpIHx8IChjYXJkVHlwZXZhbCA9PSAnRGlzY292ZXInKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWwubGVuZ3RoIDwgMTYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmNhcmRlcnJvci5lcnJvcicpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnZXJyb3JjbGllbnQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNhcmRUeXBldmFsID09ICdBbWV4Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWwubGVuZ3RoIDwgMTUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmNhcmRlcnJvci5lcnJvcicpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnZXJyb3JjbGllbnQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5jYXJkZXJyb3IuZXJyb3InKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnZXJyb3JjbGllbnQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLnZhbCgpLmluZGV4T2YoJyonKSA9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWwubGVuZ3RoIDwgMTYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmNhcmRlcnJvci5lcnJvcicpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnZXJyb3JjbGllbnQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmNhcmR0eXBlaW1nID4gZGl2JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoJCgnI3BheW1lbnRtZXRob2RzJykuZmluZCgnLmNyZWRpdENhcmQtbnVtYmVyJykudmFsKCkubGVuZ3RoIDwgNCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuY2FyZHR5cGVpbWcgPiBkaXYnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0sXHJcbiAgICB2YWxpZGF0ZWNhcmR0eXBlOiBmdW5jdGlvbiAodmFsKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9ICcgJyxcclxuICAgICAgICAgICAgY2FyTm8gPSB2YWw7XHJcblxyXG4gICAgICAgIGlmIChjYXJkcmVnZXgubWFzdGVyY2FyZC50ZXN0KGNhck5vKSkgey8vIGZpcnN0IGNoZWNrIGZvciBNYXN0ZXJDYXJkXHJcbiAgICAgICAgICAgIHJlc3VsdCA9ICdNYXN0ZXJDYXJkJztcclxuICAgICAgICB9IGVsc2UgaWYgKGNhcmRyZWdleC52aXNhLnRlc3QoY2FyTm8pKSB7Ly8gdGhlbiBjaGVjayBmb3IgVmlzYVxyXG4gICAgICAgICAgICByZXN1bHQgPSAnVmlzYSc7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjYXJkcmVnZXguYW1leC50ZXN0KGNhck5vKSkgey8vIHRoZW4gY2hlY2sgZm9yIEFtRXhcclxuICAgICAgICAgICAgcmVzdWx0ID0gJ0FtZXgnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY2FyZHJlZ2V4LmRpc2NvdmVyLnRlc3QoY2FyTm8pKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9ICdEaXNjb3Zlcic7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0gJ0Vycm9yJztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEBmdW5jdGlvblxyXG4gICAgICogQGRlc2NyaXB0aW9uIEJpbmRzIHRoZSBvbmNsaWNrLWV2ZW50IHRvIGEgZGVsZXRlIGJ1dHRvbiBvbiBhIGdpdmVuIGNvbnRhaW5lcixcclxuICAgICAqIHdoaWNoIG9wZW5zIGEgY29uZmlybWF0aW9uIGJveCB3aXRoIGEgZ2l2ZW4gbWVzc2FnZVxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGNvbnRhaW5lciBUaGUgbmFtZSBvZiBlbGVtZW50IHRvIHdoaWNoIHRoZSBmdW5jdGlvbiB3aWxsIGJlIGJpbmRcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIFRoZSBtZXNzYWdlIHRoZSB3aWxsIGJlIHNob3duIHVwb24gYSBjbGlja1xyXG4gICAgICovXHJcbiAgICBzZXREZWxldGVDb25maXJtYXRpb246IGZ1bmN0aW9uIChjb250YWluZXIsIG1lc3NhZ2UpIHtcclxuICAgICAgICAkKGNvbnRhaW5lcikub24oJ2NsaWNrJywgJy5kZWxldGUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB3aW5kb3cuY29uZmlybShtZXNzYWdlKTtcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEBmdW5jdGlvblxyXG4gICAgICogQGRlc2NyaXB0aW9uIFNjcm9sbHMgYSBicm93c2VyIHdpbmRvdyB0byBhIGdpdmVuIHggcG9pbnRcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBUaGUgeCBjb29yZGluYXRlXHJcbiAgICAgKi9cclxuICAgIHNjcm9sbEJyb3dzZXI6IGZ1bmN0aW9uICh4TG9jYXRpb24pIHtcclxuICAgICAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgIHNjcm9sbFRvcDogeExvY2F0aW9uXHJcbiAgICAgICAgfSwgNTAwKTtcclxuICAgIH0sXHJcblxyXG4gICAgaXNNb2JpbGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgbW9iaWxlQWdlbnRIYXNoID0gWydtb2JpbGUnLCAndGFibGV0JywgJ3Bob25lJywgJ2lwYWQnLCAnaXBvZCcsICdhbmRyb2lkJywgJ2JsYWNrYmVycnknLCAnd2luZG93cyBjZScsICdvcGVyYSBtaW5pJywgJ3BhbG0nXTtcclxuICAgICAgICB2YXIgaWR4ID0gMDtcclxuICAgICAgICB2YXIgaXNNb2JpbGUgPSBmYWxzZTtcclxuICAgICAgICB2YXIgdXNlckFnZW50ID0gKG5hdmlnYXRvci51c2VyQWdlbnQpLnRvTG93ZXJDYXNlKCk7XHJcblxyXG4gICAgICAgIHdoaWxlIChtb2JpbGVBZ2VudEhhc2hbaWR4XSAmJiAhaXNNb2JpbGUpIHtcclxuICAgICAgICAgICAgaXNNb2JpbGUgPSAodXNlckFnZW50LmluZGV4T2YobW9iaWxlQWdlbnRIYXNoW2lkeF0pID49IDApO1xyXG4gICAgICAgICAgICBpZHgrKztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGlzTW9iaWxlO1xyXG4gICAgfVxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB1dGlsO1xyXG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG52YXIgbmFQaG9uZSA9IC9eXFwoPyhbMi05XVswLThdWzAtOV0pXFwpP1tcXC1cXC4gXT8oWzItOV1bMC05XXsyfSlbXFwtXFwuIF0/KFswLTldezR9KShcXHMqeFswLTldKyk/JC87XHJcbnZhciByZWdleCA9IHtcclxuICAgIHBob25lOiB7XHJcbiAgICAgICAgdXM6IG5hUGhvbmUsXHJcbiAgICAgICAgY2E6IG5hUGhvbmUsXHJcbiAgICAgICAgZnI6IC9eMFsxLTZdezF9KChbMC05XXsyfSl7NH0pfCgoXFxzWzAtOV17Mn0pezR9KXwoKC1bMC05XXsyfSl7NH0pJC8sXHJcbiAgICAgICAgaXQ6IC9eKChbMC05XXsyLDR9KShbLVxcc1xcL117MCwxfSkoWzAtOV17NCw4fSkpPyQvLFxyXG4gICAgICAgIGpwOiAvXigwXFxkezEsNH0tID8pP1xcZHsxLDR9LVxcZHs0fSQvLFxyXG4gICAgICAgIGNuOiAvLiovLFxyXG4gICAgICAgIGdiOiAvXigoXFwoPzBcXGR7NH1cXCk/XFxzP1xcZHszfVxccz9cXGR7M30pfChcXCg/MFxcZHszfVxcKT9cXHM/XFxkezN9XFxzP1xcZHs0fSl8KFxcKD8wXFxkezJ9XFwpP1xccz9cXGR7NH1cXHM/XFxkezR9KSkoXFxzP1xcIyhcXGR7NH18XFxkezN9KSk/JC9cclxuICAgIH0sXHJcbiAgICBwb3N0YWw6IHtcclxuICAgICAgICB1czogL15cXGR7NX0oLVxcZHs0fSk/JC8sXHJcbiAgICAgICAgY2E6IC9eW0FCQ0VHSEpLTE1OUFJTVFZYWV17MX1cXGR7MX1bQS1aXXsxfSAqXFxkezF9W0EtWl17MX1cXGR7MX0kLyxcclxuICAgICAgICBmcjogL14oRi0pPygoMltBfEJdKXxbMC05XXsyfSlbMC05XXszfSQvLFxyXG4gICAgICAgIGl0OiAvXihbMC05XSl7NX0kLyxcclxuICAgICAgICBqcDogL14oWzAtOV0pezN9Wy1dKFswLTldKXs0fSQvLFxyXG4gICAgICAgIGNuOiAvXihbMC05XSl7Nn0kLyxcclxuICAgICAgICBnYjogL14oW0EtUFItVVdZWjAtOV1bQS1ISy1ZMC05XVtBRUhNTlBSVFZYWTAtOV0/W0FCRUhNTlBSVldYWTAtOV0/IHsxLDJ9WzAtOV1bQUJELUhKTE4tVVctWl17Mn18R0lSIDBBQSkkL1xyXG4gICAgfSxcclxuICAgIG5vdENDOiAvXig/ISgoWzAtOSAtXSl7MTMsMTl9KSkuKiQvXHJcbn07XHJcbi8vIGdsb2JhbCBmb3JtIHZhbGlkYXRvciBzZXR0aW5nc1xyXG52YXIgc2V0dGluZ3MgPSB7XHJcbiAgICBlcnJvckNsYXNzOiAnZXJyb3JjbGllbnQnLFxyXG4gICAgZXJyb3JFbGVtZW50OiAnc3BhbicsXHJcbiAgICBmb2N1c0ludmFsaWQ6IHRydWUsXHJcbiAgICBvbmtleXVwOiBmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgIGlmICghdGhpcy5jaGVja2FibGUoZWxlbWVudCkpIHtcclxuICAgICAgICAgICAgJChlbGVtZW50KS5hZGRDbGFzcygnc3RvcEtleXByZXNzJyk7XHJcbiAgICAgICAgICAgIGlmICgkKGVsZW1lbnQpLnZhbCgpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudChlbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoJCgnLmFjY291bnQtbG9ncycpLmxlbmd0aCA+IDAgfHwgJCgnLm5ldy1yZWdpc3RlcicpLmxlbmd0aCA+IDAgfHwgJCgnLndpc2gtbG9ncycpLmxlbmd0aCA+IDAgfHwgJCgnLmZvcmdvdF9vbGQnKS5sZW5ndGggPiAwIHx8ICQoJy5jcmVhdGVhbi1hY2NvdW50JykubGVuZ3RoID4gMCB8fCAkKCcucHJvbW8tc2VjJykubGVuZ3RoID4gMCB8fCAkKCcuaGVhZGVyY3VzdG9tZXJpbmZvJykubGVuZ3RoID4gMCB8fCAkKCcudWktbG9naW4nKS5sZW5ndGggPiAwIHx8ICQoJy52aXBJbnNpZGVyLWRsZy51aS1kaWFsb2cgJykubGVuZ3RoID4gMCB8fCAkKCcucGFzc3dvcmRyZXNldCcpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICQoZWxlbWVudCkuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5sYWJlbCBzcGFuJykucmVtb3ZlQ2xhc3MoJ2lucHV0bGFiZWwnKTtcclxuICAgICAgICAgICAgICAgICQoJy5wcm9tby1zZWMnKS5maW5kKCcuY291cG9uaW5wdXQnKS5yZW1vdmVDbGFzcygnaW5wdXRsYWJlbCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8vZm9jdXNDbGVhbnVwOiBmYWxzZSxcclxuICAgIC8vb25mb2N1c291dDogZmFsc2UsXHJcblxyXG4gICAgb25mb2N1c291dDogZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICBpZiAoIXRoaXMuY2hlY2thYmxlKGVsZW1lbnQpKSB7XHJcbiAgICAgICAgICAgICQoZWxlbWVudCkucmVtb3ZlQ2xhc3MoJ3N0b3BLZXlwcmVzcycpO1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQoZWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoJCgnLmFjY291bnQtbG9ncycpLmxlbmd0aCA+IDAgfHwgJCgnLm5ldy1yZWdpc3RlcicpLmxlbmd0aCA+IDAgfHwgJCgnLndpc2gtbG9ncycpLmxlbmd0aCA+IDAgfHwgJCgnLmZvcmdvdF9vbGQnKS5sZW5ndGggPiAwIHx8ICQoJy5wYXNzd29yZHJlc2V0JykubGVuZ3RoID4gMCB8fCAkKCcudmlwSW5zaWRlci1kbGcudWktZGlhbG9nICcpLmxlbmd0aCA+IDAgfHwgJCgnLnByb21vLXNlYycpLmxlbmd0aCA+IDAgfHwgJCgnLnB0X2NoZWNrb3V0JykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCQoZWxlbWVudCkuaGFzQ2xhc3MoJ2Vycm9yY2xpZW50JykpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKGVsZW1lbnQpLmNsb3Nlc3QoJy5mb3JtLXJvdycpLmFkZENsYXNzKCdpbnB1dGxhYmVsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJChlbGVtZW50KS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuYWRkQ2xhc3MoJ2lucHV0bGFiZWwnKTtcclxuICAgICAgICAgICAgICAgICAgICAkKGVsZW1lbnQpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcubGFiZWwgc3BhbicpLmFkZENsYXNzKCdpbnB1dGxhYmVsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJChlbGVtZW50KS5jbG9zZXN0KCcuZm9ybS1yb3cnKS5maW5kKCcubGFiZWwgc3BhbicpLmFkZENsYXNzKCdpbnB1dGxhYmVsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJChlbGVtZW50KS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxvZ2Vycm9yICwgLmV4aXN0aW5nX3JlZ2lzdGVyJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkKGVsZW1lbnQpLmNsb3Nlc3QoJy5mb3JtLXJvdycpLnJlbW92ZUNsYXNzKCdpbnB1dGxhYmVsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJChlbGVtZW50KS5jbG9zZXN0KCcuZm9ybWZpZWxkJykucmVtb3ZlQ2xhc3MoJ2lucHV0bGFiZWwnKTtcclxuICAgICAgICAgICAgICAgICAgICAkKGVsZW1lbnQpLmNsb3Nlc3QoJy5mb3JtLXJvdycpLmZpbmQoJy5sYWJlbCBzcGFuJykucmVtb3ZlQ2xhc3MoJ2lucHV0bGFiZWwnKTtcclxuICAgICAgICAgICAgICAgICAgICAkKGVsZW1lbnQpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcubGFiZWwgc3BhbicpLnJlbW92ZUNsYXNzKCdpbnB1dGxhYmVsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJChlbGVtZW50KS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxvZ2Vycm9yICwgLmV4aXN0aW5nX3JlZ2lzdGVyJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8qKiogaWYoJChlbGVtZW50KS5jbG9zZXN0KCcudWktZGlhbG9nJykuaGFzQ2xhc3MoJ3ZpcEluc2lkZXItZGxnJykpIHtcclxuXHRcdFx0XHRpZigkKGVsZW1lbnQpLmhhc0NsYXNzKFwiZXJyb3JjbGllbnRcIikpIHtcclxuXHRcdFx0XHRcdGlmKCQoZWxlbWVudCkuY2xvc2VzdChcIi5mb3JtZmllbGRcIikuZmluZChcIi5sYWJlbCBzcGFuLmVycm9yY2xpZW50XCIpLmlzKCc6dmlzaWJsZScpKXtcclxuXHRcdFx0XHRcdFx0JChlbGVtZW50KS5jbG9zZXN0KFwiLmZvcm0tcm93XCIpLmFkZENsYXNzKFwiZXJyb3JvY2N1cmVkXCIpO1xyXG5cdFx0XHRcdFx0fWVsc2Uge1xyXG5cdFx0XHRcdFx0XHQkKGVsZW1lbnQpLmNsb3Nlc3QoXCIuZm9ybS1yb3dcIikucmVtb3ZlQ2xhc3MoXCJlcnJvcm9jY3VyZWRcIik7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9ICoqKi9cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgZXJyb3JQbGFjZW1lbnQ6IGZ1bmN0aW9uIChlcnJvciwgZWxlbWVudCkge1xyXG4gICAgICAgIGlmICgkKGVsZW1lbnQpLmhhc0NsYXNzKCdlcnJvcmNsaWVudCcpKSB7XHJcbiAgICAgICAgICAgICQoZWxlbWVudCkuY2xvc2VzdCgnLmZvcm0tcm93JykuYWRkQ2xhc3MoJ2lucHV0bGFiZWwnKTtcclxuICAgICAgICAgICAgJChlbGVtZW50KS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuYWRkQ2xhc3MoJ2lucHV0bGFiZWwnKTtcclxuICAgICAgICAgICAgJChlbGVtZW50KS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxhYmVsIHNwYW4nKS5hZGRDbGFzcygnaW5wdXRsYWJlbCcpO1xyXG4gICAgICAgICAgICAkKGVsZW1lbnQpLmNsb3Nlc3QoJy5mb3JtLXJvdycpLmZpbmQoJy5sYWJlbCBzcGFuJykuYWRkQ2xhc3MoJ2lucHV0bGFiZWwnKTtcclxuICAgICAgICAgICAgJChlbGVtZW50KS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxvZ2Vycm9yICwgLmV4aXN0aW5nX3JlZ2lzdGVyJykuaGlkZSgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICQoZWxlbWVudCkuY2xvc2VzdCgnLmZvcm0tcm93JykucmVtb3ZlQ2xhc3MoJ2lucHV0bGFiZWwnKTtcclxuICAgICAgICAgICAgJChlbGVtZW50KS5jbG9zZXN0KCcuZm9ybWZpZWxkJykucmVtb3ZlQ2xhc3MoJ2lucHV0bGFiZWwnKTtcclxuICAgICAgICAgICAgJChlbGVtZW50KS5jbG9zZXN0KCcuZm9ybS1yb3cnKS5maW5kKCcubGFiZWwgc3BhbicpLnJlbW92ZUNsYXNzKCdpbnB1dGxhYmVsJyk7XHJcbiAgICAgICAgICAgICQoZWxlbWVudCkuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5sYWJlbCBzcGFuJykucmVtb3ZlQ2xhc3MoJ2lucHV0bGFiZWwnKTtcclxuICAgICAgICAgICAgJChlbGVtZW50KS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxvZ2Vycm9yICwgLmV4aXN0aW5nX3JlZ2lzdGVyJykuaGlkZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoJChlbGVtZW50KS5oYXNDbGFzcygnZW1haWxmb290ZXInKSkge1xyXG4gICAgICAgICAgICAkKGVsZW1lbnQpLmNsb3Nlc3QoJyNlbWFpbGZvb3RlcicpLmJlZm9yZShlcnJvcik7XHJcbiAgICAgICAgfSBlbHNlIGlmICgkKGVsZW1lbnQpLmNsb3Nlc3QoJy51aS1kaWFsb2cnKS5oYXNDbGFzcygndmlwSW5zaWRlci1kbGcnKSkge1xyXG4gICAgICAgICAgICAkKGVsZW1lbnQpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcubGFiZWwnKS5hcHBlbmQoZXJyb3IpO1xyXG4gICAgICAgICAgICBpZiAoJChlbGVtZW50KS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxhYmVsIHNwYW4uZXJyb3JjbGllbnQnKS5pcygnOnZpc2libGUnKSAmJiAhKCQoZWxlbWVudCkuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5sYWJlbCcpLmhhc0NsYXNzKCdlcnJvcm9jY3VyZWQnKSkpIHtcclxuICAgICAgICAgICAgICAgICQoZWxlbWVudCkuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5sYWJlbCcpLmFkZENsYXNzKCdlcnJvcm9jY3VyZWQnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICQoZWxlbWVudCkuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5sYWJlbCcpLnJlbW92ZUNsYXNzKCdlcnJvcm9jY3VyZWQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICgkKCcucGFzc3dvcmRyZXNldCcpLmZpbmQoJ2J1dHRvbi5zZW5kLmNsaWNrZWRCdXR0b24nKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAkKGVsZW1lbnQpLmFmdGVyKGVycm9yKTtcclxuICAgICAgICAgICAgICAgICQoJy5wYXNzd29yZHJlc2V0JykuZmluZCgnYnV0dG9uLnNlbmQuY2xpY2tlZEJ1dHRvbicpLnJlbW92ZUNsYXNzKCdjbGlja2VkQnV0dG9uJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCgnLmhlYWRlci1mb3Jnb3QtcHdkLmFjY291bnRjb250ZW50JykuY3NzKCdkaXNwbGF5JykgPT0gJ25vbmUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJChlbGVtZW50KS5hZnRlcihlcnJvcik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCQoJy5oZWFkZXItZm9yZ290LXB3ZC5hY2NvdW50Y29udGVudCcpLmNzcygnZGlzcGxheScpID09ICdibG9jaycpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBEbyBOb3RoaW5nXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkKGVsZW1lbnQpLmhhc0NsYXNzKCdjdXN0b20tc2VsZWN0LXdyYXAnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKGVsZW1lbnQpLmNsb3Nlc3QoJy5maWVsZC13cmFwcGVyJykuYWZ0ZXIoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoZWxlbWVudCkuYWZ0ZXIoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuXHJcbi8vZmlyc3RuYW1lIHZhbGlkYXRpb25cclxudmFyIGN0cmwgPSBmYWxzZTtcclxudmFyIHNlbGVjdFRleHQgPSBmYWxzZTtcclxuJCgnaW5wdXRbYXR0cmlidXRlbWF4bGVuZ3RoXSx0ZXh0YXJlYVthdHRyaWJ1dGVtYXhsZW5ndGhdJykub24oJ2tleWRvd24nLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgLy92YXIgajtcclxuICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdmaXJzdG5hbWUnKSkge1xyXG4gICAgICAgIC8vaiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkd2ZybV9wcm9maWxlX2N1c3RvbWVyX2ZpcnN0bmFtZScpO1xyXG4gICAgfSBlbHNlIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdsYXN0bmFtZScpKSB7XHJcbiAgICAgICAgLy9qID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2R3ZnJtX3Byb2ZpbGVfY3VzdG9tZXJfbGFzdG5hbWUnKTtcclxuICAgIH1cclxuICAgIGlmIChlLmtleUNvZGUgPT0gMTcpIHtcclxuICAgICAgICBjdHJsID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoKCQodGhpcykuaGFzQ2xhc3MoJ3ZpcC10ZXh0YXJlYScpICYmIGUua2V5Q29kZSAhPSA4ICYmIGUua2V5Q29kZSAhPSA0NiAmJiAhc2VsZWN0VGV4dCkgfHwgKCgoZS5rZXlDb2RlID49IDQ4ICYmIGUua2V5Q29kZSA8PSA5MCkgfHwgKGUua2V5Q29kZSA+PSA5NiAmJiBlLmtleUNvZGUgPD0gMTA1KSkgJiYgIWN0cmwgJiYgIXNlbGVjdFRleHQpKSB7XHJcbiAgICAgICAgdmFyIGN1cnJPYmogPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciBtYXhjaGFycyA9ICQodGhpcykuYXR0cignbWF4bGVuZ3RoJyk7XHJcbiAgICAgICAgdmFyIHRsZW5ndGggPSAkKHRoaXMpLnZhbCgpLmxlbmd0aDtcclxuICAgICAgICBpZiAodGxlbmd0aCA+PSBtYXhjaGFycykge1xyXG4gICAgICAgICAgICAkKHRoaXMpLnZhbCgkKHRoaXMpLnZhbCgpLnN1YnN0cmluZygwLCBtYXhjaGFycykpO1xyXG4gICAgICAgICAgICBpZiAoJChjdXJyT2JqKS5jbG9zZXN0KCcuZmllbGQtd3JhcHBlcicpLmZpbmQoJy5tYXgtbGVuZ3RoLWVycm9yJykubGVuZ3RoID09IDAgJiYgJChjdXJyT2JqKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLm1heC1sZW5ndGgtZXJyb3InKS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJzxkaXYgY2xhc3M9XFwnbWF4LWxlbmd0aC1lcnJvclxcJz4gVGhpcyBmaWVsZCBpcyBsaW1pdGVkIHRvIDMwIGNoYXJhY3RlcnMuPC9kaXY+JztcclxuICAgICAgICAgICAgICAgIGlmICgkKGN1cnJPYmopLmhhc0NsYXNzKCd2aXAtdGV4dGFyZWEnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yID0gJzxkaXYgY2xhc3M9XFwnbWF4LWxlbmd0aC1lcnJvclxcJz4gLVRoaXMgZmllbGQgaXMgbGltaXRlZCB0byAxMjAwIGNoYXJhY3RlcnMuPC9kaXY+JztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICgkKGN1cnJPYmopLmhhc0NsYXNzKCd2aXAtdGV4dGFyZWExJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBlcnJvciA9ICc8ZGl2IGNsYXNzPVxcJ21heC1sZW5ndGgtZXJyb3JcXCc+IC1UaGlzIGZpZWxkIGlzIGxpbWl0ZWQgdG8gMzAgY2hhcmFjdGVycy48L2Rpdj4nO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgkKGN1cnJPYmopLmNsb3Nlc3QoJ2Zvcm0nKS5oYXNDbGFzcygndmlwZmllbGRzdGFmZicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IgPSAnPGRpdiBjbGFzcz1cXCdtYXgtbGVuZ3RoLWVycm9yXFwnPiAtVGhpcyBmaWVsZCBpcyBsaW1pdGVkIHRvIDMwIGNoYXJhY3RlcnMuPC9kaXY+JztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5jbG9zZXN0KCdmb3JtJykuaGFzQ2xhc3MoJ3ZpcGZpZWxkc3RhZmYnKSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcubGFiZWwnKS5hcHBlbmQoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5maWVsZC13cmFwcGVyJykuYXBwZW5kKGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcubGFiZWwgc3BhbicpLmFkZENsYXNzKCdjb3VudGxhYmVsZXJyb3InKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2NvdW50ZXJyb3InKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChlLmtleUNvZGUgIT0gOSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCQodGhpcykuY2xvc2VzdCgnZm9ybScpLmhhc0NsYXNzKCd2aXBmaWVsZHN0YWZmJykgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxhYmVsJykuZmluZCgnLm1heC1sZW5ndGgtZXJyb3InKS5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5maWVsZC13cmFwcGVyJykuZmluZCgnLm1heC1sZW5ndGgtZXJyb3InKS5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnY291bnRlcnJvcicpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxhYmVsIHNwYW4nKS5hZGRDbGFzcygnY291bnRsYWJlbGVycm9yJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdjb3VudGVycm9yJyk7XHJcbiAgICAgICAgICAgICQoJy5tYXgtbGVuZ3RoLWVycm9yJykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5sYWJlbCBzcGFuJykucmVtb3ZlQ2xhc3MoJ2NvdW50bGFiZWxlcnJvcicpO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoKGUua2V5Q29kZSA+PSA0OCAmJiBlLmtleUNvZGUgPD0gNTcpIHx8IChlLmtleUNvZGUgPj0gOTYgJiYgZS5rZXlDb2RlIDw9IDEwNSkpIHtcclxuICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygndmlwaW5zaWRlcmVtYWlsJykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLm1heC1sZW5ndGgtZXJyb3InKS5yZW1vdmUoKTtcclxuICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdjb3VudGVycm9yJyk7XHJcbiAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxhYmVsIHNwYW4nKS5yZW1vdmVDbGFzcygnY291bnRsYWJlbGVycm9yJyk7XHJcbiAgICAgICAgc2VsZWN0VGV4dCA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxufSkub24oJ2tleXVwJywgZnVuY3Rpb24gKCkge1xyXG4gICAgY3RybCA9IGZhbHNlO1xyXG4gICAgLy92YXIgY3Vyck9iaiA9ICQodGhpcyk7XHJcbiAgICB2YXIgbWF4Y2hhcnMgPSAkKHRoaXMpLmF0dHIoJ21heGxlbmd0aCcpO1xyXG4gICAgdmFyIHRsZW5ndGggPSAkKHRoaXMpLnZhbCgpLmxlbmd0aDtcclxuICAgIGlmICh0bGVuZ3RoIDwgbWF4Y2hhcnMpIHtcclxuICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdjb3VudGVycm9yJyk7XHJcbiAgICAgICAgJCgnLm1heC1sZW5ndGgtZXJyb3InKS5yZW1vdmUoKTtcclxuICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcubGFiZWwgc3BhbicpLnJlbW92ZUNsYXNzKCdjb3VudGxhYmVsZXJyb3InKTtcclxuICAgIH1cclxufSkub24oJ3NlbGVjdCcsIGZ1bmN0aW9uICgpIHtcclxuICAgIHNlbGVjdFRleHQgPSB0cnVlO1xyXG4gICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnY291bnRlcnJvcicpO1xyXG4gICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxhYmVsIHNwYW4nKS5yZW1vdmVDbGFzcygnY291bnRsYWJlbGVycm9yJyk7XHJcbn0pO1xyXG4kKCdpbnB1dFthdHRyaWJ1dGVtYXhsZW5ndGhdLHRleHRhcmVhW2F0dHJpYnV0ZW1heGxlbmd0aF0nKS5vbignZm9jdXNvdXQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdjb3VudGVycm9yJyk7XHJcbiAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcubGFiZWwgc3BhbicpLnJlbW92ZUNsYXNzKCdjb3VudGxhYmVsZXJyb3InKTtcclxuICAgICQodGhpcykuY2xvc2VzdCgnLmZpZWxkLXdyYXBwZXInKS5maW5kKCcubWF4LWxlbmd0aC1lcnJvcicpLnJlbW92ZSgpO1xyXG4gICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLm1heC1sZW5ndGgtZXJyb3InKS5yZW1vdmUoKTtcclxuICAgIC8vJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxhYmVsIHNwYW4nKS5yZW1vdmVDbGFzcygnaW5wdXRsYWJlbCcpO1xyXG59KTtcclxuaWYgKCQoJy5sb2dpbmZhaWxlZGNsYXNzOnZpc2libGUnKS5sZW5ndGggPiAwKSB7XHJcbiAgICAkKCcucmVnaXN0cmF0aW9uIC5mb3JtZmllbGRfZW1haWwnKS5maW5kKCcubGFiZWx0ZXh0JykucmVtb3ZlQ2xhc3MoJ2lucHV0bGFiZWwnKTtcclxuICAgICQoJy5yZWdpc3RyYXRpb24gLmZvcm1maWVsZF9lbWFpbCcpLmZpbmQoJy5yZXF1aXJlZGluZGljYXRvcicpLnJlbW92ZUNsYXNzKCdpbnB1dGxhYmVsJyk7XHJcbiAgICAkKCcucmVnaXN0cmF0aW9uIC5mb3JtZmllbGRfZW1haWwnKS5maW5kKCcucmVxdWlyZWRpbmRpY2F0b3InKS5yZW1vdmVDbGFzcygnaW5wdXRsYWJlbCcpO1xyXG4gICAgJCgnLnJlZ2lzdHJhdGlvbiAuZm9ybWZpZWxkX2VtYWlsJykuZmluZCgnLmV4aXN0aW5nX3JlZ2lzdGVyJykuaGlkZSgpO1xyXG59XHJcblxyXG4vLyQoXCJib2R5XCIpLm9uKCdjaGFuZ2UgaW5wdXQnLFwiLmFjY291bnRlbWFpbCAsIC5ndWVzdGVtYWlsLCAuZW1haWxDTXJhcGFsYSwgLmd1ZXN0ZW1haWxjb24sIC52aXBpbnNpZGVyZW1haWwsIC5lbWFpbGZvb3RlciwgLmFjY291bnRlbWFpbGNvbmYsIC5hY2NvdW50RW1haWxDb25maXJtYXRpb24sIC5yZXNldGVtYWlsLCAuYWNjZW1haWxjb24sIC5sb2dnZWRlbWFpbFwiLCBmdW5jdGlvbiAoZSkge1xyXG4vL1x0Ly8kKHRoaXMpLnZhbCh0aGlzLnZhbHVlLnJlcGxhY2UoL1tcXHNdL2csICcnKSk7XHJcbi8vXHJcbi8vfSk7XHJcbiQoJy5hY2NvdW50ZW1haWwgLCAuZ3Vlc3RlbWFpbCwgLmVtYWlsQ01yYXBhbGEsIC5ndWVzdGVtYWlsY29uLCAudmlwaW5zaWRlcmVtYWlsLCAuZW1haWxmb290ZXIsIC5hY2NvdW50ZW1haWxjb25mLCAuYWNjb3VudEVtYWlsQ29uZmlybWF0aW9uLCAucmVzZXRlbWFpbCwgLmFjY2VtYWlsY29uLCAubG9nZ2VkZW1haWwnKS5vbih7XHJcbiAgICBrZXlkb3duOiBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGlmIChlLndoaWNoID09PSAzMikge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIGNoYW5nZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnJlcGxhY2UoL1xccy9nLCAnJyk7XHJcbiAgICB9XHJcbn0pO1xyXG4vL292ZXJyaWRlIGRlZmF1bHQgcmVxdWlyZWQgZmllbGQgbWVzc2FnZVxyXG4kLnZhbGlkYXRvci5tZXNzYWdlcy5yZXF1aXJlZCA9IGZ1bmN0aW9uICgkMSwgZWxlKSB7XHJcbiAgICB2YXIgcmVxdWlyZWRUZXh0ID0gJChlbGUpLmNsb3Nlc3QoJy5mb3JtLXJvdycpLmF0dHIoXHJcbiAgICAgICAgJ2RhdGEtcmVxdWlyZWQtdGV4dCcpO1xyXG4gICAgcmV0dXJuIHJlcXVpcmVkVGV4dCB8fCAnJztcclxufTtcclxuXHJcbi8qKlxyXG4gKiBBZGQgcGhvbmUgdmFsaWRhdGlvbiBtZXRob2QgdG8gJCB2YWxpZGF0aW9uIHBsdWdpbi4gVGV4dFxyXG4gKiBmaWVsZHMgbXVzdCBoYXZlICdwaG9uZScgY3NzIGNsYXNzIHRvIGJlIHZhbGlkYXRlZCBhcyBwaG9uZVxyXG4gKiBwaG9uZVVTIGlzIGNvcGllZCBmcm9tXHJcbiAqIGh0dHA6Ly9kb2NzLiQuY29tL1BsdWdpbnMvVmFsaWRhdGlvbi9DdXN0b21NZXRob2RzL3Bob25lVVNcclxuICovXHJcbiQudmFsaWRhdG9yXHJcbiAgICAuYWRkTWV0aG9kKFxyXG4gICAgICAgICdwaG9uZScsXHJcbiAgICAgICAgZnVuY3Rpb24gKHBob25lTnVtYmVyLCBlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGlmICgkKGVsZW1lbnQpLmhhc0NsYXNzKCdzdG9wS2V5cHJlc3MnKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBmaW5kIG91dCB0aGUgY291bnRyeSBjb2RlXHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9ICQoZWxlbWVudCkuZGF0YSgnZGF0YScpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvdW50cnkgPSAoZGF0YSAmJiBkYXRhLmNvdW50cnkgJiYgZGF0YS5jb3VudHJ5ICE9ICcnKSA/IGRhdGEuY291bnRyeSA6ICdVUyc7IC8vIGRlZmF1bHQgdG8gVVMgcGhvbmVcclxuICAgICAgICAgICAgICAgIC8vIHZhbGlkYXRpb25cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBwcmVzZXJ2ZSB0aGlzIGluc3RhbmNlXHJcbiAgICAgICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gY291bnRyeSBzcGVjaWZpYyBwaG9uZSB2YWxpZGF0aW9uIGhhbmRsZXJzXHJcbiAgICAgICAgICAgICAgICAvL3ZhciBwaG9uZVVTLCBwaG9uZUNBO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBwaG9uZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBwaG9uZU51bWJlciA9IHBob25lTnVtYmVyLnJlcGxhY2UoL1xccysvZywgJycpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGF0Lm9wdGlvbmFsKGVsZW1lbnQpIHx8IHBob25lTnVtYmVyLmxlbmd0aCA+IDkgJiYgcGhvbmVOdW1iZXIubWF0Y2goL14oXFxkezEwfXxcXGR7M30oLVxcZHszfSkoLVxcZHs0fSkkfF5cXGR7M30oXFxzXFxkezN9KT8oXFxzXFxkezR9KT8pJC8pO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIC8vcGhvbmVVUyA9IHBob25lQ0E7XHJcbiAgICAgICAgICAgICAgICAvL3dpbmRvdy5ldmFsKCd2YXIgcGhvbmVIYW5kbGVyID0gKHR5cGVvZiBwaG9uZScgKyBjb3VudHJ5ICsgJyAhPSBcXCd1bmRlZmluZWRcXCcpID8gcGhvbmUnICsgY291bnRyeSArICc6IG51bGw7Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gY2FsbCB0aGUgY291bnRyeSBzcGVjaWZpYyBwaG9uZSB2YWxpZGF0aW9uXHJcbiAgICAgICAgICAgICAgICAvLyBoYW5kbGVyXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY291bnRyeSA9PT0gJ1VTJyB8fCBjb3VudHJ5ID09PSAnQ0EnID8gcGhvbmUoKSA6IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCBSZXNvdXJjZXMuSU5WQUxJRF9QSE9ORSk7XHJcblxyXG4kLnZhbGlkYXRvci5hZGRNZXRob2QoJ3Bob25lQ0RVUycsIGZ1bmN0aW9uIChwaG9uZU51bWJlciwgZWxlbWVudCkge1xyXG4gICAgaWYgKCQoZWxlbWVudCkuaGFzQ2xhc3MoJ3N0b3BLZXlwcmVzcycpKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHBob25lTnVtYmVyID0gcGhvbmVOdW1iZXIucmVwbGFjZSgvXFxzKy9nLCAnJyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9uYWwoZWxlbWVudCkgfHwgcGhvbmVOdW1iZXIubGVuZ3RoID4gOSAmJiBwaG9uZU51bWJlclxyXG4gICAgICAgICAgICAubWF0Y2goL15cXCg/W1xcZF17M31cXCk/W1xccy1dP1tcXGRdezN9W1xccy1dP1tcXGRdezR9JC8pO1xyXG4gICAgfVxyXG59LCAnUGxlYXNlIHNwZWNpZnkgYSB2YWxpZCBwaG9uZSBudW1iZXInKTtcclxuXHJcbiQudmFsaWRhdG9yLmFkZE1ldGhvZCgncGhvbmUnLCBmdW5jdGlvbiAocGhvbmVOdW1iZXIsIGVsZW1lbnQpIHtcclxuICAgIGlmICgkKGVsZW1lbnQpLmhhc0NsYXNzKCdzdG9wS2V5cHJlc3MnKSkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBwaG9uZU51bWJlciA9IHBob25lTnVtYmVyLnJlcGxhY2UoL1xccysvZywgJycpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbmFsKGVsZW1lbnQpIHx8IHBob25lTnVtYmVyLmxlbmd0aCA+IDkgJiYgcGhvbmVOdW1iZXJcclxuICAgICAgICAgICAgLm1hdGNoKC9eXFwoP1tcXGRdezN9XFwpP1tcXHMtXT9bXFxkXXszfVtcXHMtXT9bXFxkXXs0fSQvKTtcclxuICAgIH1cclxufSwgJ1BsZWFzZSBzcGVjaWZ5IGEgdmFsaWQgcGhvbmUgbnVtYmVyJyk7XHJcblxyXG4kLnZhbGlkYXRvci5hZGRNZXRob2QoJ3Bob25lVUsnLCBmdW5jdGlvbiAocGhvbmVOdW1iZXIsIGVsZW1lbnQpIHtcclxuICAgIGlmICgkKGVsZW1lbnQpLmhhc0NsYXNzKCdzdG9wS2V5cHJlc3MnKSkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25hbChlbGVtZW50KSB8fCBwaG9uZU51bWJlci5sZW5ndGggPiA5ICYmIHBob25lTnVtYmVyXHJcbiAgICAgICAgICAgIC5tYXRjaCgvXihcXCg/KDB8XFwrNDQpWzEtOV17MX1cXGR7MSw0fT9cXCk/XFxzP1xcZHszLDR9XFxzP1xcZHszLDR9KSQvKTtcclxuICAgIH1cclxufSwgJ1BsZWFzZSBzcGVjaWZ5IGEgdmFsaWQgcGhvbmUgbnVtYmVyJyk7XHJcblxyXG4kLnZhbGlkYXRvci5hZGRNZXRob2QoJ3Bvc3RhbCcsIGZ1bmN0aW9uICh2YWx1ZSwgZWxlbWVudCkge1xyXG4gICAgaWYgKCQoZWxlbWVudCkuaGFzQ2xhc3MoJ3N0b3BLZXlwcmVzcycpKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmICh2YWx1ZSA9PSAnJykge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuICgvXlxcZHs1fSgoLVxcZHs0fSl8KFxcZHs0fSkpPyQvKS50ZXN0KHZhbHVlKTtcclxuICAgIH1cclxufSwgJ1BsZWFzZSBlbnRlciB5b3VyIDUgb3IgOSBkaWdpdCBaaXAgQ29kZSB3aXRoIG9yIHdpdGhvdXQgYSBoeXBoZW4nKTtcclxuXHJcbiQudmFsaWRhdG9yLmFkZE1ldGhvZCgnemlwQ29kZUN1c3RvbScsIGZ1bmN0aW9uICh2YWx1ZSwgZWxlbWVudCkge1xyXG4gICAgaWYgKCQoZWxlbWVudCkuaGFzQ2xhc3MoJ3N0b3BLZXlwcmVzcycpKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmICh2YWx1ZSA9PSAnJykge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuICgvXlxcZHs1fSgoLVxcZHs0fSl8KFxcZHs0fSkpPyQvKS50ZXN0KHZhbHVlKTtcclxuICAgIH1cclxufSwgJy0gUGxlYXNlIGVudGVyIGEgdmFsaWQgWmlwQ29kZScpO1xyXG5cclxuJC52YWxpZGF0b3IuYWRkTWV0aG9kKCdwaG9uZUN1c3RvbScsIGZ1bmN0aW9uIChwaG9uZU51bWJlciwgZWxlbWVudCkge1xyXG4gICAgaWYgKCQoZWxlbWVudCkuaGFzQ2xhc3MoJ3N0b3BLZXlwcmVzcycpKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHBob25lTnVtYmVyID0gcGhvbmVOdW1iZXIucmVwbGFjZSgvXFxzKy9nLCAnJyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9uYWwoZWxlbWVudCkgfHwgcGhvbmVOdW1iZXIubGVuZ3RoID4gOSAmJiBwaG9uZU51bWJlclxyXG4gICAgICAgICAgICAubWF0Y2goL15cXCg/W1xcZF17M31cXCk/W1xccy1dP1tcXGRdezN9W1xccy1dP1tcXGRdezR9JC8pO1xyXG4gICAgfVxyXG59LCAnLSBQbGVhc2Ugc3BlY2lmeSBhIHZhbGlkIHBob25lIG51bWJlcicpO1xyXG5cclxuJC52YWxpZGF0b3IuYWRkTWV0aG9kKCdlbWFpbENNJywgZnVuY3Rpb24gKHZhbHVlLCBlbGVtZW50KSB7XHJcbiAgICBpZiAoJChlbGVtZW50KS5oYXNDbGFzcygnc3RvcEtleXByZXNzJykpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKHZhbHVlID09ICcnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gKC9eW1xcdy1cXC5dezEsfVxcQChbXFxkYS16QS1aLV17MSx9XFwuKXsxLH1bXFxkYS16QS1aLV17Miw0fSQvKS50ZXN0KHZhbHVlKTtcclxuICAgIH1cclxufSwgJ1BsZWFzZSBzcGVjaWZ5IGEgdmFsaWQgRW1haWwgSWQnKTtcclxuXHJcbnZhciBjdXN0b21FcnJvcm1zZyA9ICcnO1xyXG52YXIgY3VzdG9tRXJyb3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gY3VzdG9tRXJyb3Jtc2c7XHJcbn07XHJcblxyXG4kLnZhbGlkYXRvci5hZGRNZXRob2QoJ2VtYWlsQ01yYXBhbGEnLCBmdW5jdGlvbiAodmFsdWUsIGVsZW1lbnQpIHtcclxuICAgIGlmICgkKGVsZW1lbnQpLmhhc0NsYXNzKCdzdG9wS2V5cHJlc3MnKSkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB2YXIgdkluZGV4ID0gdmFsdWUubGVuZ3RoO1xyXG4gICAgICAgIHZhciBmY2hhciA9IHZhbHVlLnN1YnN0cmluZygwLCAxKTtcclxuICAgICAgICB2YXIgbGNoYXIgPSB2YWx1ZS5zdWJzdHJpbmcodkluZGV4IC0gMSk7XHJcbiAgICAgICAgaWYgKHZhbHVlLmluZGV4T2YoJ0AnKSAhPSAtMSkge1xyXG4gICAgICAgICAgICB2YXIgc3BsaXR2YWwgPSB2YWx1ZS5zcGxpdCgnQCcpO1xyXG4gICAgICAgICAgICBmY2hhciA9IHNwbGl0dmFsWzBdLnN1YnN0cmluZygwLCAxKTtcclxuICAgICAgICAgICAgbGNoYXIgPSBzcGxpdHZhbFswXS5zdWJzdHJpbmcoc3BsaXR2YWxbMF0ubGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBmY2hhclMgPSAoL15bYS16QS1aMC05XSQvKS50ZXN0KGZjaGFyKTtcclxuICAgICAgICB2YXIgbGNoYXJTID0gKC9eW2EtekEtWjAtOV0kLykudGVzdChsY2hhcik7XHJcbiAgICAgICAgdmFyIGVtYWlsQ2hlY2sgPSAoL15bLTAtOWEtekEtWi4tX10rQCgoXFxbWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcXSl8KChbYS16QS1aXFwtMC05XStcXC4pK1thLXpBLVpdezIsfSkpJC8pLnRlc3QodmFsdWUpO1xyXG4gICAgICAgIGlmICgoZmNoYXJTID09IGZhbHNlKSB8fCAobGNoYXJTID09IGZhbHNlKSkge1xyXG4gICAgICAgICAgICBjdXN0b21FcnJvcm1zZyA9ICctU29tZXRoaW5nIGRvZXNuXFwndCBsb29rIHJpZ2h0LCBwbGVhc2UgdHJ5IGFnYWluLic7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2UgaWYgKGVtYWlsQ2hlY2sgPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgY3VzdG9tRXJyb3Jtc2cgPSAnT29wcyAtIHRoZSBlbWFpbCBlbnRlcmVkIGlzIG5vdCBpbiBhIHZhbGlkIGZvcm1hdC4nO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59LCBjdXN0b21FcnJvcik7XHJcblxyXG4kLnZhbGlkYXRvci5hZGRNZXRob2QoJ2NyZWRpdGNhcmRfbmFtZScsIGZ1bmN0aW9uICh2YWx1ZSwgZWxlbWVudCkge1xyXG4gICAgaWYgKCQoZWxlbWVudCkuaGFzQ2xhc3MoJ3N0b3BLZXlwcmVzcycpKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmICh2YWx1ZSA9PSAnJykge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuICgvXlthLXpBLVogXSskLykudGVzdCh2YWx1ZSk7XHJcbiAgICB9XHJcbn0sICdPbmx5IGxldHRlcnMgYXJlIHZhbGlkIGZvciB0aGlzIGZpZWxkJyk7XHJcblxyXG4kLnZhbGlkYXRvci5hZGRNZXRob2QoJ2NyZWRpdGNhcmRfY3ZuJywgZnVuY3Rpb24gKHZhbHVlLCBlbGVtZW50KSB7XHJcbiAgICBpZiAoJChlbGVtZW50KS5oYXNDbGFzcygnc3RvcEtleXByZXNzJykpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgIHZhciBjYXJkdHlwZSA9ICQoJy5zZWxlY3QtY3JlZGl0Q2FyZC10eXBlJykudmFsKCk7XHJcbiAgICAgICAgdmFyIGN2dkxlbmd0aCA9IDM7XHJcbiAgICAgICAgaWYgKHZhbHVlID09ICcnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2FyZHR5cGUgPT0gJ0FtZXgnKSB7XHJcbiAgICAgICAgICAgIGN2dkxlbmd0aCA9IDQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgodmFsdWUubGVuZ3RoICE9IGN2dkxlbmd0aCkpIHtcclxuICAgICAgICAgICAgJCgnLmVycm9yS2V5cHJlc3MnKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSwgJ1BsZWFzZSBlbnRlciBhIHZhbGlkIFNlY3VyaXR5IENvZGUgZm9yIHRoZSBDcmVkaXQgQ2FyZCBlbnRlcmVkJyk7XHJcblxyXG4kLnZhbGlkYXRvci5hZGRNZXRob2QoJ2d1ZXN0ZW1haWxjb24nLCBmdW5jdGlvbiAodmFsdWUsIGVsZW1lbnQpIHtcclxuICAgIGlmICgkKGVsZW1lbnQpLmhhc0NsYXNzKCdzdG9wS2V5cHJlc3MnKSkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBlbHNlIGlmICghJCgnLmNoZWNrb3V0YXNndWVzdGJ1dHRvbicpLmlzKCc6dmlzaWJsZScpKSB7XHJcbiAgICAgICAgdmFyIHZJbmRleCA9IHZhbHVlLmxlbmd0aDtcclxuICAgICAgICB2YXIgZmNoYXIgPSB2YWx1ZS5zdWJzdHJpbmcoMCwgMSk7XHJcbiAgICAgICAgdmFyIGxjaGFyID0gdmFsdWUuc3Vic3RyaW5nKHZJbmRleCAtIDEpO1xyXG4gICAgICAgIGlmICh2YWx1ZS5pbmRleE9mKCdAJykgIT0gLTEpIHtcclxuICAgICAgICAgICAgdmFyIHNwbGl0dmFsID0gdmFsdWUuc3BsaXQoJ0AnKTtcclxuICAgICAgICAgICAgZmNoYXIgPSBzcGxpdHZhbFswXS5zdWJzdHJpbmcoMCwgMSk7XHJcbiAgICAgICAgICAgIGxjaGFyID0gc3BsaXR2YWxbMF0uc3Vic3RyaW5nKHNwbGl0dmFsWzBdLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZmNoYXJTID0gKC9eW2EtekEtWjAtOV0kLykudGVzdChmY2hhcik7XHJcbiAgICAgICAgdmFyIGxjaGFyUyA9ICgvXlthLXpBLVowLTldJC8pLnRlc3QobGNoYXIpO1xyXG4gICAgICAgIHZhciBlbWFpbENoZWNrID0gKC9eWy0wLTlhLXpBLVouLV9dK0AoKFxcW1swLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXF0pfCgoW2EtekEtWlxcLTAtOV0rXFwuKStbYS16QS1aXXsyLH0pKSQvKS50ZXN0KHZhbHVlKTtcclxuICAgICAgICB2YXIgZW1haWxWYWwgPSAkKGVsZW1lbnQpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5wcmV2KCcuZm9ybWZpZWxkJykuZmluZCgnLmd1ZXN0ZW1haWwnKS52YWwoKTtcclxuICAgICAgICBpZiAoKGZjaGFyUyA9PSBmYWxzZSkgfHwgKGxjaGFyUyA9PSBmYWxzZSkpIHtcclxuICAgICAgICAgICAgY3VzdG9tRXJyb3Jtc2cgPSAnU29tZXRoaW5nIGRvZXNuXFwndCBsb29rIHJpZ2h0LCBwbGVhc2UgdHJ5IGFnYWluLic7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2UgaWYgKGVtYWlsQ2hlY2sgPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgY3VzdG9tRXJyb3Jtc2cgPSAnT29wcyAtIHRoZSBlbWFpbCBlbnRlcmVkIGlzIG5vdCBpbiBhIHZhbGlkIGZvcm1hdC4nO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlbWFpbFZhbCAhPSB2YWx1ZSkge1xyXG4gICAgICAgICAgICBjdXN0b21FcnJvcm1zZyA9ICdQbGVhc2UgbWFrZSBzdXJlIGVtYWlscyBtYXRjaC4nO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxufSwgY3VzdG9tRXJyb3IpO1xyXG5cclxuJC52YWxpZGF0b3IuYWRkTWV0aG9kKCdndWVzdGVtYWlsJywgZnVuY3Rpb24gKHZhbHVlLCBlbGVtZW50KSB7XHJcbiAgICBpZiAoJChlbGVtZW50KS5oYXNDbGFzcygnc3RvcEtleXByZXNzJykpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gZWxzZSBpZiAoISQoJy5jaGVja291dGFzZ3Vlc3RidXR0b24nKS5pcygnOnZpc2libGUnKSkge1xyXG4gICAgICAgIHZhciB2SW5kZXggPSB2YWx1ZS5sZW5ndGg7XHJcbiAgICAgICAgdmFyIGZjaGFyID0gdmFsdWUuc3Vic3RyaW5nKDAsIDEpO1xyXG4gICAgICAgIHZhciBsY2hhciA9IHZhbHVlLnN1YnN0cmluZyh2SW5kZXggLSAxKTtcclxuICAgICAgICBpZiAodmFsdWUuaW5kZXhPZignQCcpICE9IC0xKSB7XHJcbiAgICAgICAgICAgIHZhciBzcGxpdHZhbCA9IHZhbHVlLnNwbGl0KCdAJyk7XHJcbiAgICAgICAgICAgIGZjaGFyID0gc3BsaXR2YWxbMF0uc3Vic3RyaW5nKDAsIDEpO1xyXG4gICAgICAgICAgICBsY2hhciA9IHNwbGl0dmFsWzBdLnN1YnN0cmluZyhzcGxpdHZhbFswXS5sZW5ndGggLSAxKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBmY2hhclMgPSAoL15bYS16QS1aMC05XSQvKS50ZXN0KGZjaGFyKTtcclxuICAgICAgICB2YXIgbGNoYXJTID0gKC9eW2EtekEtWjAtOV0kLykudGVzdChsY2hhcik7XHJcbiAgICAgICAgdmFyIGVtYWlsQ2hlY2sgPSAoL15bLTAtOWEtekEtWi4tX10rQCgoXFxbWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcXSl8KChbYS16QS1aXFwtMC05XStcXC4pK1thLXpBLVpdezIsfSkpJC8pLnRlc3QodmFsdWUpO1xyXG4gICAgICAgIGlmICgoZmNoYXJTID09IGZhbHNlKSB8fCAobGNoYXJTID09IGZhbHNlKSkge1xyXG4gICAgICAgICAgICBjdXN0b21FcnJvcm1zZyA9ICdTb21ldGhpbmcgZG9lc25cXCd0IGxvb2sgcmlnaHQsIHBsZWFzZSB0cnkgYWdhaW4uJztcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZW1haWxDaGVjayA9PSBmYWxzZSkge1xyXG4gICAgICAgICAgICBjdXN0b21FcnJvcm1zZyA9ICdPb3BzIC0gdGhlIGVtYWlsIGVudGVyZWQgaXMgbm90IGluIGEgdmFsaWQgZm9ybWF0Lic7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG59LCBjdXN0b21FcnJvcik7XHJcblxyXG4kLnZhbGlkYXRvci5hZGRNZXRob2QoJ2xvZ2dlZGVtYWlsJywgZnVuY3Rpb24gKHZhbHVlLCBlbGVtZW50KSB7XHJcbiAgICBpZiAoJChlbGVtZW50KS5oYXNDbGFzcygnc3RvcEtleXByZXNzJykpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gZWxzZSBpZiAoISQoJy5zaWduaW50b215YWNjb3VudGJ1dHRvbicpLmlzKCc6dmlzaWJsZScpKSB7XHJcbiAgICAgICAgdmFyIHZJbmRleCA9IHZhbHVlLmxlbmd0aDtcclxuICAgICAgICB2YXIgZmNoYXIgPSB2YWx1ZS5zdWJzdHJpbmcoMCwgMSk7XHJcbiAgICAgICAgdmFyIGxjaGFyID0gdmFsdWUuc3Vic3RyaW5nKHZJbmRleCAtIDEpO1xyXG4gICAgICAgIGlmICh2YWx1ZS5pbmRleE9mKCdAJykgIT0gLTEpIHtcclxuICAgICAgICAgICAgdmFyIHNwbGl0dmFsID0gdmFsdWUuc3BsaXQoJ0AnKTtcclxuICAgICAgICAgICAgZmNoYXIgPSBzcGxpdHZhbFswXS5zdWJzdHJpbmcoMCwgMSk7XHJcbiAgICAgICAgICAgIGxjaGFyID0gc3BsaXR2YWxbMF0uc3Vic3RyaW5nKHNwbGl0dmFsWzBdLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZmNoYXJTID0gKC9eW2EtekEtWjAtOV0kLykudGVzdChmY2hhcik7XHJcbiAgICAgICAgdmFyIGxjaGFyUyA9ICgvXlthLXpBLVowLTldJC8pLnRlc3QobGNoYXIpO1xyXG4gICAgICAgIHZhciBlbWFpbENoZWNrID0gKC9eWy0wLTlhLXpBLVouLV9dK0AoKFxcW1swLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXF0pfCgoW2EtekEtWlxcLTAtOV0rXFwuKStbYS16QS1aXXsyLH0pKSQvKS50ZXN0KHZhbHVlKTtcclxuICAgICAgICAvL3ZhciBlbWFpbFZhbCA9ICQoZWxlbWVudCkuY2xvc2VzdCgnLmZvcm1maWVsZCcpLnByZXYoJy5mb3JtZmllbGQnKS5maW5kKCcuZ3Vlc3RlbWFpbCcpLnZhbCgpO1xyXG4gICAgICAgIGlmICgoZmNoYXJTID09IGZhbHNlKSB8fCAobGNoYXJTID09IGZhbHNlKSkge1xyXG4gICAgICAgICAgICBjdXN0b21FcnJvcm1zZyA9ICdTb21ldGhpbmcgZG9lc25cXCd0IGxvb2sgcmlnaHQsIHBsZWFzZSB0cnkgYWdhaW4uJztcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZW1haWxDaGVjayA9PSBmYWxzZSkge1xyXG4gICAgICAgICAgICBjdXN0b21FcnJvcm1zZyA9ICdPb3BzIC0gdGhlIGVtYWlsIGVudGVyZWQgaXMgbm90IGluIGEgdmFsaWQgZm9ybWF0Lic7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG59LCBjdXN0b21FcnJvcik7XHJcblxyXG4kLnZhbGlkYXRvci5hZGRNZXRob2QoJ2FjY2VtYWlsY29uJywgZnVuY3Rpb24gKHZhbHVlLCBlbGVtZW50KSB7XHJcbiAgICBpZiAoJChlbGVtZW50KS5oYXNDbGFzcygnc3RvcEtleXByZXNzJykpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gZWxzZSBpZiAoISQoJy5jcmVhdGVhbmFjY291bnRidXR0b24nKS5pcygnOnZpc2libGUnKSkge1xyXG4gICAgICAgIHZhciB2SW5kZXggPSB2YWx1ZS5sZW5ndGg7XHJcbiAgICAgICAgdmFyIGZjaGFyID0gdmFsdWUuc3Vic3RyaW5nKDAsIDEpO1xyXG4gICAgICAgIHZhciBsY2hhciA9IHZhbHVlLnN1YnN0cmluZyh2SW5kZXggLSAxKTtcclxuICAgICAgICBpZiAodmFsdWUuaW5kZXhPZignQCcpICE9IC0xKSB7XHJcbiAgICAgICAgICAgIHZhciBzcGxpdHZhbCA9IHZhbHVlLnNwbGl0KCdAJyk7XHJcbiAgICAgICAgICAgIGZjaGFyID0gc3BsaXR2YWxbMF0uc3Vic3RyaW5nKDAsIDEpO1xyXG4gICAgICAgICAgICBsY2hhciA9IHNwbGl0dmFsWzBdLnN1YnN0cmluZyhzcGxpdHZhbFswXS5sZW5ndGggLSAxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGZjaGFyUyA9ICgvXlthLXpBLVowLTldJC8pLnRlc3QoZmNoYXIpO1xyXG4gICAgICAgIHZhciBsY2hhclMgPSAoL15bYS16QS1aMC05XSQvKS50ZXN0KGxjaGFyKTtcclxuICAgICAgICB2YXIgZW1haWxDaGVjayA9ICgvXlstMC05YS16QS1aLi1fXStAKChcXFtbMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFxdKXwoKFthLXpBLVpcXC0wLTldK1xcLikrW2EtekEtWl17Mix9KSkkLykudGVzdCh2YWx1ZSk7XHJcbiAgICAgICAgdmFyIGVtYWlsVmFsID0gJChlbGVtZW50KS5jbG9zZXN0KCcuZm9ybWZpZWxkJykucHJldignLmZvcm1maWVsZCcpLmZpbmQoJy5hY2NlbWFpbCcpLnZhbCgpO1xyXG4gICAgICAgIGlmICgoZmNoYXJTID09IGZhbHNlKSB8fCAobGNoYXJTID09IGZhbHNlKSkge1xyXG4gICAgICAgICAgICBjdXN0b21FcnJvcm1zZyA9ICdTb21ldGhpbmcgZG9lc25cXCd0IGxvb2sgcmlnaHQsIHBsZWFzZSB0cnkgYWdhaW4uJztcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZW1haWxDaGVjayA9PSBmYWxzZSkge1xyXG4gICAgICAgICAgICBjdXN0b21FcnJvcm1zZyA9ICdPb3BzIC0gdGhlIGVtYWlsIGVudGVyZWQgaXMgbm90IGluIGEgdmFsaWQgZm9ybWF0Lic7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2UgaWYgKGVtYWlsVmFsICE9IHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGN1c3RvbUVycm9ybXNnID0gJ1BsZWFzZSBtYWtlIHN1cmUgZW1haWxzIG1hdGNoLic7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0sIGN1c3RvbUVycm9yKTtcclxuXHJcbiQudmFsaWRhdG9yLmFkZE1ldGhvZCgnYS16QS1aMC05JywgZnVuY3Rpb24gKHZhbHVlLCBlbGVtZW50KSB7XHJcbiAgICBpZiAoJChlbGVtZW50KS5oYXNDbGFzcygnc3RvcEtleXByZXNzJykpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gZWxzZSBpZiAoISQoJy5jcmVhdGVhbmFjY291bnRidXR0b24nKS5pcygnOnZpc2libGUnKSkge1xyXG4gICAgICAgIHZhciB2SW5kZXggPSB2YWx1ZS5sZW5ndGg7XHJcbiAgICAgICAgdmFyIGZjaGFyID0gdmFsdWUuc3Vic3RyaW5nKDAsIDEpO1xyXG4gICAgICAgIHZhciBsY2hhciA9IHZhbHVlLnN1YnN0cmluZyh2SW5kZXggLSAxKTtcclxuICAgICAgICBpZiAodmFsdWUuaW5kZXhPZignQCcpICE9IC0xKSB7XHJcbiAgICAgICAgICAgIHZhciBzcGxpdHZhbCA9IHZhbHVlLnNwbGl0KCdAJyk7XHJcbiAgICAgICAgICAgIGZjaGFyID0gc3BsaXR2YWxbMF0uc3Vic3RyaW5nKDAsIDEpO1xyXG4gICAgICAgICAgICBsY2hhciA9IHNwbGl0dmFsWzBdLnN1YnN0cmluZyhzcGxpdHZhbFswXS5sZW5ndGggLSAxKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBmY2hhclMgPSAoL15bYS16QS1aXSQvKS50ZXN0KGZjaGFyKTtcclxuICAgICAgICB2YXIgbGNoYXJTID0gKC9eW2EtekEtWjAtOV0kLykudGVzdChsY2hhcik7XHJcbiAgICAgICAgdmFyIGVtYWlsQ2hlY2sgPSAoL15bLTAtOWEtekEtWi4tX10rQCgoXFxbWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcXSl8KChbYS16QS1aXFwtMC05XStcXC4pK1thLXpBLVpdezIsfSkpJC8pLnRlc3QodmFsdWUpO1xyXG4gICAgICAgIC8vdmFyIGVtYWlsVmFsID0gJChlbGVtZW50KS5jbG9zZXN0KCcuZm9ybWZpZWxkJykucHJldignLmZvcm1maWVsZCcpLmZpbmQoJy5lbWFpbCcpLnZhbCgpO1xyXG5cclxuICAgICAgICBpZiAoKGZjaGFyUyA9PSBmYWxzZSkgfHwgKGxjaGFyUyA9PSBmYWxzZSkpIHtcclxuICAgICAgICAgICAgY3VzdG9tRXJyb3Jtc2cgPSAnU29tZXRoaW5nIGRvZXNuXFwndCBsb29rIHJpZ2h0LCBwbGVhc2UgdHJ5IGFnYWluLic7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2UgaWYgKGVtYWlsQ2hlY2sgPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgY3VzdG9tRXJyb3Jtc2cgPSAnT29wcyAtIHRoZSBlbWFpbCBlbnRlcmVkIGlzIG5vdCBpbiBhIHZhbGlkIGZvcm1hdC4nO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59LCBjdXN0b21FcnJvcik7XHJcblxyXG4kLnZhbGlkYXRvci5hZGRNZXRob2QoJ2NtX3Bhc3N3b3JkJywgZnVuY3Rpb24gKHZhbHVlLCBlbGVtZW50KSB7XHJcbiAgICBpZiAoJChlbGVtZW50KS5oYXNDbGFzcygnc3RvcEtleXByZXNzJykpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gZWxzZSBpZiAoISQoJy5jcmVhdGVhbmFjY291bnRidXR0b24nKS5pcygnOnZpc2libGUnKSAmJiAkKGVsZW1lbnQpLmhhc0NsYXNzKCdyZXF1aXJlZCcpKSB7XHJcbiAgICAgICAgdmFyIHBhc3N3b3JkVmFsID0gJCgnLmNfcGFzc3dvcmQnKS52YWwoKTtcclxuICAgICAgICBpZiAoJChlbGVtZW50KS5jbG9zZXN0KCdmb3JtJykubGVuZ3RoID4gMCAmJiAkKGVsZW1lbnQpLmNsb3Nlc3QoJ2Zvcm0nKS5hdHRyKCdpZCcpID09ICdSZWdpc3RyYXRpb25Gb3JtJykge1xyXG4gICAgICAgICAgICBwYXNzd29yZFZhbCA9ICQoZWxlbWVudCkuY2xvc2VzdCgnZm9ybScpLmZpbmQoJy5jX3Bhc3N3b3JkJykudmFsKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodmFsdWUubGVuZ3RoIDwgNSkge1xyXG4gICAgICAgICAgICBjdXN0b21FcnJvcm1zZyA9ICdQYXNzd29yZHMgbXVzdCBjb250YWluIGEgbWluaW11bSBvZiA1IGNoYXJhY3RlcnMgYW5kIGFyZSBDYVNlIFNlTnNJdEl2RS4nO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIGlmIChwYXNzd29yZFZhbCAhPSB2YWx1ZSkge1xyXG4gICAgICAgICAgICBjdXN0b21FcnJvcm1zZyA9ICdPb3BzIC0geW91ciBwYXNzd29yZHMgZG8gbm90IG1hdGNoLic7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG59LCBjdXN0b21FcnJvcik7XHJcblxyXG4kLnZhbGlkYXRvci5hZGRNZXRob2QoJ2NvbmZpcm1fcGFzc3dvcmQnLCBmdW5jdGlvbiAodmFsdWUsIGVsZW1lbnQpIHtcclxuICAgIGlmICgkKGVsZW1lbnQpLmhhc0NsYXNzKCdzdG9wS2V5cHJlc3MnKSkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBlbHNlIGlmICgkKGVsZW1lbnQpLmhhc0NsYXNzKCdyZXF1aXJlZCcpKSB7XHJcbiAgICAgICAgdmFyIHBhc3N3b3JkVmFsID0gJChlbGVtZW50KS5jbG9zZXN0KCdmb3JtJykuZmluZCgnLmNfcGFzc3dvcmQnKS52YWwoKTtcclxuICAgICAgICBpZiAodmFsdWUubGVuZ3RoIDwgNSkge1xyXG4gICAgICAgICAgICBjdXN0b21FcnJvcm1zZyA9ICdQYXNzd29yZHMgbXVzdCBjb250YWluIGEgbWluaW11bSBvZiA1IGNoYXJhY3RlcnMgYW5kIGFyZSBDYVNlIFNlTnNJdEl2RS4nO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIGlmIChwYXNzd29yZFZhbCAhPSB2YWx1ZSkge1xyXG4gICAgICAgICAgICBjdXN0b21FcnJvcm1zZyA9ICdPb3BzIC0geW91ciBwYXNzd29yZHMgZG8gbm90IG1hdGNoLic7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG59LCBjdXN0b21FcnJvcik7XHJcblxyXG4kLnZhbGlkYXRvci5hZGRNZXRob2QoJ2NfcGFzc3dvcmQnLCBmdW5jdGlvbiAodmFsdWUsIGVsZW1lbnQpIHtcclxuICAgIGlmICgkKGVsZW1lbnQpLmhhc0NsYXNzKCdzdG9wS2V5cHJlc3MnKSkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBlbHNlIGlmICgkKGVsZW1lbnQpLmhhc0NsYXNzKCdyZXF1aXJlZCcpICYmICh2YWx1ZS5sZW5ndGggPCA1KSkge1xyXG4gICAgICAgIGN1c3RvbUVycm9ybXNnID0gJ1Bhc3N3b3JkcyBtdXN0IGNvbnRhaW4gYSBtaW5pbXVtIG9mIDUgY2hhcmFjdGVycyBhbmQgYXJlIENhU2UgU2VOc0l0SXZFLic7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxufSwgY3VzdG9tRXJyb3IpO1xyXG5cclxuJC52YWxpZGF0b3IuYWRkTWV0aG9kKCdsb2dpbl9wYXNzd29yZCcsIGZ1bmN0aW9uICh2YWx1ZSwgZWxlbWVudCkge1xyXG4gICAgaWYgKCQoZWxlbWVudCkuaGFzQ2xhc3MoJ3N0b3BLZXlwcmVzcycpKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGVsc2UgaWYgKCQoZWxlbWVudCkuaGFzQ2xhc3MoJ3JlcXVpcmVkJykgJiYgKHZhbHVlLmxlbmd0aCA8IDUpKSB7XHJcbiAgICAgICAgY3VzdG9tRXJyb3Jtc2cgPSAnUGFzc3dvcmRzIG11c3QgY29udGFpbiBhIG1pbmltdW0gb2YgNSBjaGFyYWN0ZXJzIGFuZCBhcmUgQ2FTZSBTZU5zSXRJdkUuJztcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG59LCBjdXN0b21FcnJvcik7XHJcblxyXG4kLnZhbGlkYXRvci5hZGRNZXRob2QoJ3Jlc2V0ZW1haWwnLCBmdW5jdGlvbiAodmFsdWUsIGVsZW1lbnQpIHtcclxuICAgIHZhciB2SW5kZXggPSB2YWx1ZS5sZW5ndGg7XHJcbiAgICB2YXIgZmNoYXIgPSB2YWx1ZS5zdWJzdHJpbmcoMCwgMSk7XHJcbiAgICB2YXIgbGNoYXIgPSB2YWx1ZS5zdWJzdHJpbmcodkluZGV4IC0gMSk7XHJcblxyXG4gICAgaWYgKCQoZWxlbWVudCkuaGFzQ2xhc3MoJ3N0b3BLZXlwcmVzcycpKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmICh2YWx1ZS5pbmRleE9mKCdAJykgIT0gLTEpIHtcclxuICAgICAgICAgICAgdmFyIHNwbGl0dmFsID0gdmFsdWUuc3BsaXQoJ0AnKTtcclxuICAgICAgICAgICAgZmNoYXIgPSBzcGxpdHZhbFswXS5zdWJzdHJpbmcoMCwgMSk7XHJcbiAgICAgICAgICAgIGxjaGFyID0gc3BsaXR2YWxbMF0uc3Vic3RyaW5nKHNwbGl0dmFsWzBdLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZmNoYXJTID0gKC9eW2EtekEtWjAtOV0kLykudGVzdChmY2hhcik7XHJcbiAgICAgICAgdmFyIGxjaGFyUyA9ICgvXlthLXpBLVowLTldJC8pLnRlc3QobGNoYXIpO1xyXG4gICAgICAgIHZhciBlbWFpbENoZWNrID0gKC9eWy0wLTlhLXpBLVouLV9dK0AoKFxcW1swLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXF0pfCgoW2EtekEtWlxcLTAtOV0rXFwuKStbYS16QS1aXXsyLH0pKSQvKS50ZXN0KHZhbHVlKTtcclxuICAgICAgICBpZiAoKGZjaGFyUyA9PSBmYWxzZSkgfHwgKGxjaGFyUyA9PSBmYWxzZSkpIHtcclxuICAgICAgICAgICAgY3VzdG9tRXJyb3Jtc2cgPSAnU29tZXRoaW5nIGRvZXNuXFwndCBsb29rIHJpZ2h0LCBwbGVhc2UgdHJ5IGFnYWluLic7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2UgaWYgKGVtYWlsQ2hlY2sgPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgY3VzdG9tRXJyb3Jtc2cgPSAnT29wcyAtIHRoZSBlbWFpbCBlbnRlcmVkIGlzIG5vdCBpbiBhIHZhbGlkIGZvcm1hdC4nO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSwgY3VzdG9tRXJyb3IpO1xyXG5cclxuJC52YWxpZGF0b3IuYWRkTWV0aG9kKCdhY2NvdW50ZW1haWwnLCBmdW5jdGlvbiAodmFsdWUsIGVsZW1lbnQpIHtcclxuICAgIHZhciB2SW5kZXggPSB2YWx1ZS5sZW5ndGg7XHJcbiAgICB2YXIgZmNoYXIgPSB2YWx1ZS5zdWJzdHJpbmcoMCwgMSk7XHJcbiAgICB2YXIgbGNoYXIgPSB2YWx1ZS5zdWJzdHJpbmcodkluZGV4IC0gMSk7XHJcbiAgICBpZiAoJChlbGVtZW50KS5oYXNDbGFzcygnc3RvcEtleXByZXNzJykpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKHZhbHVlLmluZGV4T2YoJ0AnKSAhPSAtMSkge1xyXG4gICAgICAgICAgICB2YXIgc3BsaXR2YWwgPSB2YWx1ZS5zcGxpdCgnQCcpO1xyXG4gICAgICAgICAgICBmY2hhciA9IHNwbGl0dmFsWzBdLnN1YnN0cmluZygwLCAxKTtcclxuICAgICAgICAgICAgbGNoYXIgPSBzcGxpdHZhbFswXS5zdWJzdHJpbmcoc3BsaXR2YWxbMF0ubGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBmY2hhclMgPSAoL15bYS16QS1aMC05XSQvKS50ZXN0KGZjaGFyKTtcclxuICAgICAgICB2YXIgbGNoYXJTID0gKC9eW2EtekEtWjAtOV0kLykudGVzdChsY2hhcik7XHJcbiAgICAgICAgdmFyIGVtYWlsQ2hlY2sgPSAoL15bLTAtOWEtekEtWi4tX10rQCgoXFxbWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcXSl8KChbYS16QS1aXFwtMC05XStcXC4pK1thLXpBLVpdezIsfSkpJC8pLnRlc3QodmFsdWUpO1xyXG4gICAgICAgIGlmICgoZmNoYXJTID09IGZhbHNlKSB8fCAobGNoYXJTID09IGZhbHNlKSkge1xyXG4gICAgICAgICAgICBjdXN0b21FcnJvcm1zZyA9ICdTb21ldGhpbmcgZG9lc25cXCd0IGxvb2sgcmlnaHQsIHBsZWFzZSB0cnkgYWdhaW4uJztcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZW1haWxDaGVjayA9PSBmYWxzZSkge1xyXG4gICAgICAgICAgICBjdXN0b21FcnJvcm1zZyA9ICdPb3BzIC0gdGhlIGVtYWlsIGVudGVyZWQgaXMgbm90IGluIGEgdmFsaWQgZm9ybWF0Lic7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59LCBjdXN0b21FcnJvcik7XHJcblxyXG4vL2VtYWlsIHZhbGlkYXRpb24gZm9yIHZpcGluc2lkZXJcclxuXHJcbiQudmFsaWRhdG9yLmFkZE1ldGhvZCgndmlwaW5zaWRlcmVtYWlsJywgZnVuY3Rpb24gKHZhbHVlLCBlbGVtZW50KSB7XHJcbiAgICBpZiAoJChlbGVtZW50KS5oYXNDbGFzcygnc3RvcEtleXByZXNzJykpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdmFyIHZJbmRleCA9IHZhbHVlLmxlbmd0aDtcclxuICAgICAgICB2YXIgZmNoYXIgPSB2YWx1ZS5zdWJzdHJpbmcoMCwgMSk7XHJcbiAgICAgICAgdmFyIGxjaGFyID0gdmFsdWUuc3Vic3RyaW5nKHZJbmRleCAtIDEpO1xyXG4gICAgICAgIGlmICh2YWx1ZS5pbmRleE9mKCdAJykgIT0gLTEpIHtcclxuICAgICAgICAgICAgdmFyIHNwbGl0dmFsID0gdmFsdWUuc3BsaXQoJ0AnKTtcclxuICAgICAgICAgICAgZmNoYXIgPSBzcGxpdHZhbFswXS5zdWJzdHJpbmcoMCwgMSk7XHJcbiAgICAgICAgICAgIGxjaGFyID0gc3BsaXR2YWxbMF0uc3Vic3RyaW5nKHNwbGl0dmFsWzBdLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZmNoYXJTID0gKC9eW2EtekEtWjAtOV0kLykudGVzdChmY2hhcik7XHJcbiAgICAgICAgdmFyIGxjaGFyUyA9ICgvXlthLXpBLVowLTldJC8pLnRlc3QobGNoYXIpO1xyXG4gICAgICAgIHZhciBlbWFpbENoZWNrID0gKC9eWy0wLTlhLXpBLVouLV9dK0AoKFxcW1swLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXF0pfCgoW2EtekEtWlxcLTAtOV0rXFwuKStbYS16QS1aXXsyLH0pKSQvKS50ZXN0KHZhbHVlKTtcclxuICAgICAgICBpZiAoKGZjaGFyUyA9PSBmYWxzZSkgfHwgKGxjaGFyUyA9PSBmYWxzZSkpIHtcclxuICAgICAgICAgICAgY3VzdG9tRXJyb3Jtc2cgPSAnLVNvbWV0aGluZyBkb2VzblxcJ3QgbG9vayByaWdodCwgcGxlYXNlIHRyeSBhZ2Fpbi4nO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlbWFpbENoZWNrID09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIGN1c3RvbUVycm9ybXNnID0gJ09vcHMgLSB0aGUgZW1haWwgZW50ZXJlZCBpcyBub3QgaW4gYSB2YWxpZCBmb3JtYXQuJztcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSwgY3VzdG9tRXJyb3IpO1xyXG5cclxuJC52YWxpZGF0b3IuYWRkTWV0aG9kKCdlbWFpbGZvb3RlcicsIGZ1bmN0aW9uICh2YWx1ZSwgZWxlbWVudCkge1xyXG4gICAgaWYgKCQoZWxlbWVudCkuaGFzQ2xhc3MoJ3N0b3BLZXlwcmVzcycpKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZhciB2SW5kZXggPSB2YWx1ZS5sZW5ndGg7XHJcbiAgICAgICAgaWYgKHZJbmRleCA+IDApIHtcclxuICAgICAgICAgICAgdmFyIGZjaGFyID0gdmFsdWUuc3Vic3RyaW5nKDAsIDEpO1xyXG4gICAgICAgICAgICB2YXIgbGNoYXIgPSB2YWx1ZS5zdWJzdHJpbmcodkluZGV4IC0gMSk7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZS5pbmRleE9mKCdAJykgIT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIHZhciBzcGxpdHZhbCA9IHZhbHVlLnNwbGl0KCdAJyk7XHJcbiAgICAgICAgICAgICAgICBmY2hhciA9IHNwbGl0dmFsWzBdLnN1YnN0cmluZygwLCAxKTtcclxuICAgICAgICAgICAgICAgIGxjaGFyID0gc3BsaXR2YWxbMF0uc3Vic3RyaW5nKHNwbGl0dmFsWzBdLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBmY2hhclMgPSAoL15bYS16QS1aMC05XSQvKS50ZXN0KGZjaGFyKTtcclxuICAgICAgICAgICAgdmFyIGxjaGFyUyA9ICgvXlthLXpBLVowLTldJC8pLnRlc3QobGNoYXIpO1xyXG4gICAgICAgICAgICB2YXIgZW1haWxDaGVjayA9ICgvXlstMC05YS16QS1aLi1fXStAKChcXFtbMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFxdKXwoKFthLXpBLVpcXC0wLTldK1xcLikrW2EtekEtWl17Mix9KSkkLykudGVzdCh2YWx1ZSk7XHJcbiAgICAgICAgICAgIGlmICgoZmNoYXJTID09IGZhbHNlKSB8fCAobGNoYXJTID09IGZhbHNlKSkge1xyXG4gICAgICAgICAgICAgICAgY3VzdG9tRXJyb3Jtc2cgPSAnU29tZXRoaW5nIGRvZXNuXFwndCBsb29rIHJpZ2h0LCBwbGVhc2UgdHJ5IGFnYWluLic7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZW1haWxDaGVjayA9PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgY3VzdG9tRXJyb3Jtc2cgPSAnT29wcyAtIHRoZSBlbWFpbCBlbnRlcmVkIGlzIG5vdCBpbiBhIHZhbGlkIGZvcm1hdC4nO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjdXN0b21FcnJvcm1zZyA9ICdQbGVhc2UgZW50ZXIgeW91ciBlbWFpbCBhZGRyZXNzLic7XHJcblxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSwgY3VzdG9tRXJyb3IpO1xyXG5cclxuJC52YWxpZGF0b3IuYWRkTWV0aG9kKCdhY2NvdW50ZW1haWxjb25mJywgZnVuY3Rpb24gKHZhbHVlLCBlbGVtZW50KSB7XHJcbiAgICBpZiAoJChlbGVtZW50KS5oYXNDbGFzcygnc3RvcEtleXByZXNzJykpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdmFyIHZJbmRleCA9IHZhbHVlLmxlbmd0aDtcclxuICAgICAgICB2YXIgZmNoYXIgPSB2YWx1ZS5zdWJzdHJpbmcoMCwgMSk7XHJcbiAgICAgICAgdmFyIGxjaGFyID0gdmFsdWUuc3Vic3RyaW5nKHZJbmRleCAtIDEpO1xyXG4gICAgICAgIGlmICh2YWx1ZS5pbmRleE9mKCdAJykgIT0gLTEpIHtcclxuICAgICAgICAgICAgdmFyIHNwbGl0dmFsID0gdmFsdWUuc3BsaXQoJ0AnKTtcclxuICAgICAgICAgICAgZmNoYXIgPSBzcGxpdHZhbFswXS5zdWJzdHJpbmcoMCwgMSk7XHJcbiAgICAgICAgICAgIGxjaGFyID0gc3BsaXR2YWxbMF0uc3Vic3RyaW5nKHNwbGl0dmFsWzBdLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZmNoYXJTID0gKC9eW2EtekEtWjAtOV0kLykudGVzdChmY2hhcik7XHJcbiAgICAgICAgdmFyIGxjaGFyUyA9ICgvXlthLXpBLVowLTldJC8pLnRlc3QobGNoYXIpO1xyXG4gICAgICAgIHZhciBlbWFpbENoZWNrID0gKC9eWy0wLTlhLXpBLVouLV9dK0AoKFxcW1swLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXF0pfCgoW2EtekEtWlxcLTAtOV0rXFwuKStbYS16QS1aXXsyLH0pKSQvKS50ZXN0KHZhbHVlKTtcclxuICAgICAgICB2YXIgZW1haWxWYWwgPSAkKCcuYWNjb3VudGVtYWlsJykudmFsKCk7XHJcbiAgICAgICAgaWYgKCQoZWxlbWVudCkuY2xvc2VzdCgnZm9ybScpLmxlbmd0aCA+IDAgJiYgJChlbGVtZW50KS5jbG9zZXN0KCdmb3JtJykuYXR0cignaWQnKSA9PSAnUmVnaXN0cmF0aW9uRm9ybScpIHtcclxuICAgICAgICAgICAgZW1haWxWYWwgPSAkKGVsZW1lbnQpLmNsb3Nlc3QoJ2Zvcm0nKS5maW5kKCcuYWNjb3VudGVtYWlsJykudmFsKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgoZmNoYXJTID09IGZhbHNlKSB8fCAobGNoYXJTID09IGZhbHNlKSkge1xyXG4gICAgICAgICAgICBjdXN0b21FcnJvcm1zZyA9ICdTb21ldGhpbmcgZG9lc25cXCd0IGxvb2sgcmlnaHQsIHBsZWFzZSB0cnkgYWdhaW4uJztcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZW1haWxDaGVjayA9PSBmYWxzZSkge1xyXG4gICAgICAgICAgICBjdXN0b21FcnJvcm1zZyA9ICdPb3BzIC0gdGhlIGVtYWlsIGVudGVyZWQgaXMgbm90IGluIGEgdmFsaWQgZm9ybWF0Lic7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2UgaWYgKGVtYWlsVmFsICE9IHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGN1c3RvbUVycm9ybXNnID0gJ1BsZWFzZSBtYWtlIHN1cmUgZW1haWxzIG1hdGNoLic7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0sIGN1c3RvbUVycm9yKTtcclxuXHJcbiQudmFsaWRhdG9yLmFkZE1ldGhvZCgnYWNjb3VudEVtYWlsQ29uZmlybWF0aW9uJywgZnVuY3Rpb24gKHZhbHVlLCBlbGVtZW50KSB7XHJcbiAgICBpZiAoJChlbGVtZW50KS5oYXNDbGFzcygnc3RvcEtleXByZXNzJykpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdmFyIHZJbmRleCA9IHZhbHVlLmxlbmd0aDtcclxuICAgICAgICB2YXIgZmNoYXIgPSB2YWx1ZS5zdWJzdHJpbmcoMCwgMSk7XHJcbiAgICAgICAgdmFyIGxjaGFyID0gdmFsdWUuc3Vic3RyaW5nKHZJbmRleCAtIDEpO1xyXG4gICAgICAgIGlmICh2YWx1ZS5pbmRleE9mKCdAJykgIT0gLTEpIHtcclxuICAgICAgICAgICAgdmFyIHNwbGl0dmFsID0gdmFsdWUuc3BsaXQoJ0AnKTtcclxuICAgICAgICAgICAgZmNoYXIgPSBzcGxpdHZhbFswXS5zdWJzdHJpbmcoMCwgMSk7XHJcbiAgICAgICAgICAgIGxjaGFyID0gc3BsaXR2YWxbMF0uc3Vic3RyaW5nKHNwbGl0dmFsWzBdLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZmNoYXJTID0gKC9eW2EtekEtWjAtOV0kLykudGVzdChmY2hhcik7XHJcbiAgICAgICAgdmFyIGxjaGFyUyA9ICgvXlthLXpBLVowLTldJC8pLnRlc3QobGNoYXIpO1xyXG4gICAgICAgIHZhciBlbWFpbENoZWNrID0gKC9eWy0wLTlhLXpBLVouLV9dK0AoKFxcW1swLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXF0pfCgoW2EtekEtWlxcLTAtOV0rXFwuKStbYS16QS1aXXsyLH0pKSQvKS50ZXN0KHZhbHVlKTtcclxuICAgICAgICB2YXIgZW1haWxWYWwgPSAkKGVsZW1lbnQpLmNsb3Nlc3QoJ2Zvcm0nKS5maW5kKCcuYWNjb3VudGVtYWlsJykudmFsKCk7XHJcbiAgICAgICAgaWYgKChmY2hhclMgPT0gZmFsc2UpIHx8IChsY2hhclMgPT0gZmFsc2UpKSB7XHJcbiAgICAgICAgICAgIGN1c3RvbUVycm9ybXNnID0gJ1NvbWV0aGluZyBkb2VzblxcJ3QgbG9vayByaWdodCwgcGxlYXNlIHRyeSBhZ2Fpbi4nO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlbWFpbENoZWNrID09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIGN1c3RvbUVycm9ybXNnID0gJ09vcHMgLSB0aGUgZW1haWwgZW50ZXJlZCBpcyBub3QgaW4gYSB2YWxpZCBmb3JtYXQuJztcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZW1haWxWYWwgIT0gdmFsdWUpIHtcclxuICAgICAgICAgICAgY3VzdG9tRXJyb3Jtc2cgPSAnUGxlYXNlIG1ha2Ugc3VyZSBlbWFpbHMgbWF0Y2guJztcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSwgY3VzdG9tRXJyb3IpO1xyXG4vKipcclxuICogQWRkIHBvc2l0aXZlIG51bWJlciB2YWxpZGF0aW9uIG1ldGhvZCB0byAkIHZhbGlkYXRpb25cclxuICogcGx1Z2luLiBUZXh0IGZpZWxkcyBtdXN0IGhhdmUgJ3Bvc2l0aXZlbnVtYmVyJyBjc3MgY2xhc3MgdG8gYmVcclxuICogdmFsaWRhdGVkIGFzIHBvc2l0aXZlbnVtYmVyIGl0IHZhbGlkYXRlcyBhIG51bWJlciBhbmQgdGhyb3dzXHJcbiAqIGVycm9yIGlmIGl0IGlzIGJlbG93IDAgb3IgaWYgaXQgaXMgbm90IGEgbnVtYmVyLlxyXG4gKi9cclxuJC52YWxpZGF0b3IuYWRkTWV0aG9kKCdwb3NpdGl2ZW51bWJlcicsIGZ1bmN0aW9uICh2YWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50KSB7XHJcbiAgICBpZiAoJChlbGVtZW50KS5oYXNDbGFzcygnc3RvcEtleXByZXNzJykpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKHZhbHVlID09ICcnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gKC9eLT8oPzpcXGQrfFxcZHsxLDN9KD86LFxcZHszfSkrKSg/OlxcLlxcZCspPyQvKS50ZXN0KHZhbHVlKSAmJiBOdW1iZXIodmFsdWUpID49IDA7XHJcbiAgICB9XHJcbn0sICcnKTsgLy8gXCJcIiBzaG91bGQgYmUgcmVwbGFjZWQgd2l0aCBlcnJvciBtZXNzYWdlIGlmIG5lZWRlZFxyXG5cclxuJC52YWxpZGF0b3IuYWRkTWV0aG9kKCdtb250aHNlbGVjdCcsIGZ1bmN0aW9uICh2YWx1ZSwgZWxlbWVudCkge1xyXG4gICAgaWYgKCQoZWxlbWVudCkuaGFzQ2xhc3MoJ3N0b3BLZXlwcmVzcycpKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZhciBkID0gbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgbXRoID0gZC5nZXRNb250aCgpICsgMSxcclxuICAgICAgICAgICAgeXkgPSBkLmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgdmFyIHNlbGVjdGVkTXRoID0gJCgnLmN1c3RvbS1zZWxlY3Qgc2VsZWN0W2lkJD1cXCdfZXhwaXJhdGlvbl9tb250aFxcJ10nKS52YWwoKTtcclxuXHJcbiAgICAgICAgdmFyIHNlbGVjdGVkeWVhciA9ICQoJy5jdXN0b20tc2VsZWN0IHNlbGVjdFtpZCQ9XFwnX2V4cGlyYXRpb25feWVhclxcJ10nKS52YWwoKTtcclxuXHJcbiAgICAgICAgaWYgKHNlbGVjdGVkeWVhcikge1xyXG4gICAgICAgICAgICBzZWxlY3RlZHllYXIgPSBzZWxlY3RlZHllYXIucmVwbGFjZSgnLCcsICcnKTtcclxuICAgICAgICAgICAgaWYgKChzZWxlY3RlZHllYXIgPD0geXkpICYmIChzZWxlY3RlZE10aCA8IG10aCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59LCAnJyk7XHJcblxyXG4kLnZhbGlkYXRvci5hZGRNZXRob2QoJ3llYXJzZWxlY3QnLCBmdW5jdGlvbiAodmFsdWUsIGVsZW1lbnQpIHtcclxuICAgIGlmICgkKGVsZW1lbnQpLmhhc0NsYXNzKCdzdG9wS2V5cHJlc3MnKSkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB2YXIgZCA9IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgIG10aCA9IGQuZ2V0TW9udGgoKSArIDEsXHJcbiAgICAgICAgICAgIHl5ID0gZC5nZXRGdWxsWWVhcigpO1xyXG4gICAgICAgIHZhciBzZWxlY3RlZE10aCA9ICQoJy5jdXN0b20tc2VsZWN0IHNlbGVjdFtpZCQ9XFwnX2V4cGlyYXRpb25fbW9udGhcXCddJykudmFsKCk7XHJcblxyXG4gICAgICAgIHZhciBzZWxlY3RlZHllYXIgPSAkKCcuY3VzdG9tLXNlbGVjdCBzZWxlY3RbaWQkPVxcJ19leHBpcmF0aW9uX3llYXJcXCddJykudmFsKCk7XHJcblxyXG4gICAgICAgIGlmIChzZWxlY3RlZHllYXIpIHtcclxuICAgICAgICAgICAgc2VsZWN0ZWR5ZWFyID0gc2VsZWN0ZWR5ZWFyLnJlcGxhY2UoJywnLCAnJyk7XHJcbiAgICAgICAgICAgIGlmICgoc2VsZWN0ZWR5ZWFyIDw9IHl5KSAmJiAoc2VsZWN0ZWRNdGggPCBtdGgpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSwgJycpO1xyXG5cclxuLy8gcmVnaXN0ZXIgZm9ybSB2YWxpZGF0b3IgZm9yIGZvcm0gZWxlbWVudHNcclxuLy8gZXhjZXB0IGZvciB0aG9zZSB3aGljaCBhcmUgbWFya2VkIFwic3VwcHJlc3NcIlxyXG4kLmVhY2goJCgnZm9ybTpub3QoLnN1cHByZXNzKScpLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAkKHRoaXMpLnZhbGlkYXRlKHNldHRpbmdzKTtcclxufSk7XHJcbi8qKlxyXG4gKiBAZnVuY3Rpb25cclxuICogQGRlc2NyaXB0aW9uIFZhbGlkYXRlcyBhIGdpdmVuIHBob25lIG51bWJlciBhZ2FpbnN0IHRoZSBjb3VudHJpZXMgcGhvbmUgcmVnZXhcclxuICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlIFRoZSBwaG9uZSBudW1iZXIgd2hpY2ggd2lsbCBiZSB2YWxpZGF0ZWRcclxuICogQHBhcmFtIHtTdHJpbmd9IGVsIFRoZSBpbnB1dCBmaWVsZFxyXG4gKi9cclxuLyp2YXIgdmFsaWRhdGVQaG9uZSA9IGZ1bmN0aW9uICh2YWx1ZSwgZWwpIHtcclxuICAgIHZhciBjb3VudHJ5ID0gJChlbCkuY2xvc2VzdCgnZm9ybScpLmZpbmQoJy5jb3VudHJ5Jyk7XHJcbiAgICBpZiAoY291bnRyeS5sZW5ndGggPT09IDAgfHwgY291bnRyeS52YWwoKS5sZW5ndGggPT09IDAgfHwgIXJlZ2V4LnBob25lW2NvdW50cnkudmFsKCkudG9Mb3dlckNhc2UoKV0pIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgcmd4ID0gcmVnZXgucGhvbmVbY291bnRyeS52YWwoKS50b0xvd2VyQ2FzZSgpXTtcclxuICAgIHZhciBpc09wdGlvbmFsID0gdGhpcy5vcHRpb25hbChlbCk7XHJcbiAgICB2YXIgaXNWYWxpZCA9IHJneC50ZXN0KCQudHJpbSh2YWx1ZSkpO1xyXG5cclxuICAgIHJldHVybiBpc09wdGlvbmFsIHx8IGlzVmFsaWQ7XHJcbn07Ki9cclxuXHJcbi8qKlxyXG4gKiBAZnVuY3Rpb25cclxuICogQGRlc2NyaXB0aW9uIFZhbGlkYXRlcyB0aGF0IGEgY3JlZGl0IGNhcmQgb3duZXIgaXMgbm90IGEgQ3JlZGl0IGNhcmQgbnVtYmVyXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZSBUaGUgb3duZXIgZmllbGQgd2hpY2ggd2lsbCBiZSB2YWxpZGF0ZWRcclxuICogQHBhcmFtIHtTdHJpbmd9IGVsIFRoZSBpbnB1dCBmaWVsZFxyXG4gKi9cclxuLyp2YXIgdmFsaWRhdGVPd25lciA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgdmFyIGlzVmFsaWQgPSByZWdleC5ub3RDQy50ZXN0KCQudHJpbSh2YWx1ZSkpO1xyXG4gICAgcmV0dXJuIGlzVmFsaWQ7XHJcbn07XHJcbiovXHJcbi8qKlxyXG4gKiBBZGQgcGhvbmUgdmFsaWRhdGlvbiBtZXRob2QgdG8gJCB2YWxpZGF0aW9uIHBsdWdpbi5cclxuICogVGV4dCBmaWVsZHMgbXVzdCBoYXZlICdwaG9uZScgY3NzIGNsYXNzIHRvIGJlIHZhbGlkYXRlZCBhcyBwaG9uZVxyXG4gKi9cclxuLyokLnZhbGlkYXRvci5hZGRNZXRob2QoJ3Bob25lJywgdmFsaWRhdGVQaG9uZSwgUmVzb3VyY2VzLklOVkFMSURfUEhPTkUpOyovXHJcblxyXG4vKipcclxuICogQWRkIENDT3duZXIgdmFsaWRhdGlvbiBtZXRob2QgdG8gJCB2YWxpZGF0aW9uIHBsdWdpbi5cclxuICogVGV4dCBmaWVsZHMgbXVzdCBoYXZlICdvd25lcicgY3NzIGNsYXNzIHRvIGJlIHZhbGlkYXRlZCBhcyBub3QgYSBjcmVkaXQgY2FyZFxyXG4gKi9cclxuLyokLnZhbGlkYXRvci5hZGRNZXRob2QoJ293bmVyJywgdmFsaWRhdGVPd25lciwgUmVzb3VyY2VzLklOVkFMSURfT1dORVIpOyovXHJcblxyXG4vKipcclxuICogQWRkIGdpZnQgY2VydCBhbW91bnQgdmFsaWRhdGlvbiBtZXRob2QgdG8gJCB2YWxpZGF0aW9uIHBsdWdpbi5cclxuICogVGV4dCBmaWVsZHMgbXVzdCBoYXZlICdnaWZ0LWNlcnQtYW1vbnQnIGNzcyBjbGFzcyB0byBiZSB2YWxpZGF0ZWRcclxuICovXHJcbiQudmFsaWRhdG9yLmFkZE1ldGhvZCgnZ2lmdC1jZXJ0LWFtb3VudCcsIGZ1bmN0aW9uICh2YWx1ZSwgZWwpIHtcclxuICAgIHZhciBpc09wdGlvbmFsID0gdGhpcy5vcHRpb25hbChlbCk7XHJcbiAgICB2YXIgaXNWYWxpZCA9ICghaXNOYU4odmFsdWUpKSAmJiAocGFyc2VGbG9hdCh2YWx1ZSkgPj0gNSkgJiYgKHBhcnNlRmxvYXQodmFsdWUpIDw9IDUwMDApO1xyXG4gICAgcmV0dXJuIGlzT3B0aW9uYWwgfHwgaXNWYWxpZDtcclxufSwgUmVzb3VyY2VzLkdJRlRfQ0VSVF9BTU9VTlRfSU5WQUxJRCk7XHJcblxyXG4vKipcclxuICogQWRkIHBvc2l0aXZlIG51bWJlciB2YWxpZGF0aW9uIG1ldGhvZCB0byAkIHZhbGlkYXRpb24gcGx1Z2luLlxyXG4gKiBUZXh0IGZpZWxkcyBtdXN0IGhhdmUgJ3Bvc2l0aXZlbnVtYmVyJyBjc3MgY2xhc3MgdG8gYmUgdmFsaWRhdGVkIGFzIHBvc2l0aXZlbnVtYmVyXHJcbiAqL1xyXG4vKiQudmFsaWRhdG9yLmFkZE1ldGhvZCgncG9zaXRpdmVudW1iZXInLCBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgIGlmICgkLnRyaW0odmFsdWUpLmxlbmd0aCA9PT0gMCkgeyByZXR1cm4gdHJ1ZTsgfVxyXG4gICAgcmV0dXJuICghaXNOYU4odmFsdWUpICYmIE51bWJlcih2YWx1ZSkgPj0gMCk7XHJcbn0sICcnKTsgLy8gJycgc2hvdWxkIGJlIHJlcGxhY2VkIHdpdGggZXJyb3IgbWVzc2FnZSBpZiBuZWVkZWRcclxuKi9cclxuLypTdGFydCBKSVJBIFBSRVYtNzcgOiBaaXAgY29kZSB2YWxpZGF0aW9uIGlzIG5vdCBoYXBwZW5pbmcgd2l0aCByZXNwZWN0IHRvIHRoZSBTdGF0ZS9Db3VudHJ5LiovXHJcbi8qZnVuY3Rpb24gdmFsaWRhdGVaaXAodmFsdWUsIGVsKSB7XHJcbiAgICB2YXIgY291bnRyeSA9ICQoZWwpLmNsb3Nlc3QoJ2Zvcm0nKS5maW5kKCcuY291bnRyeScpO1xyXG4gICAgaWYgKGNvdW50cnkubGVuZ3RoID09PSAwIHx8IGNvdW50cnkudmFsKCkubGVuZ3RoID09PSAwIHx8ICFyZWdleC5wb3N0YWxbY291bnRyeS52YWwoKS50b0xvd2VyQ2FzZSgpXSkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgdmFyIGlzT3B0aW9uYWwgPSB0aGlzLm9wdGlvbmFsKGVsKTtcclxuICAgIHZhciBpc1ZhbGlkID0gcmVnZXgucG9zdGFsW2NvdW50cnkudmFsKCkudG9Mb3dlckNhc2UoKV0udGVzdCgkLnRyaW0odmFsdWUpKTtcclxuICAgIHJldHVybiBpc09wdGlvbmFsIHx8IGlzVmFsaWQ7XHJcbn1cclxuJC52YWxpZGF0b3IuYWRkTWV0aG9kKCdwb3N0YWwnLCB2YWxpZGF0ZVppcCwgUmVzb3VyY2VzLklOVkFMSURfWklQKTsqL1xyXG4vKkVuZCBKSVJBIFBSRVYtNzcqL1xyXG5cclxuJC5leHRlbmQoJC52YWxpZGF0b3IubWVzc2FnZXMsIHtcclxuICAgIC8vcmVxdWlyZWQ6IFJlc291cmNlcy5WQUxJREFURV9SRVFVSVJFRCxcclxuICAgIHJlbW90ZTogUmVzb3VyY2VzLlZBTElEQVRFX1JFTU9URSxcclxuICAgIGVtYWlsOiBSZXNvdXJjZXMuVkFMSURBVEVfRU1BSUwsXHJcbiAgICB1cmw6IFJlc291cmNlcy5WQUxJREFURV9VUkwsXHJcbiAgICBkYXRlOiBSZXNvdXJjZXMuVkFMSURBVEVfREFURSxcclxuICAgIGRhdGVJU086IFJlc291cmNlcy5WQUxJREFURV9EQVRFSVNPLFxyXG4gICAgbnVtYmVyOiBSZXNvdXJjZXMuVkFMSURBVEVfTlVNQkVSLFxyXG4gICAgZGlnaXRzOiBSZXNvdXJjZXMuVkFMSURBVEVfRElHSVRTLFxyXG4gICAgY3JlZGl0Y2FyZDogUmVzb3VyY2VzLlZBTElEQVRFX0NSRURJVENBUkQsXHJcbiAgICBlcXVhbFRvOiBSZXNvdXJjZXMuVkFMSURBVEVfRVFVQUxUTyxcclxuICAgIG1heGxlbmd0aDogJC52YWxpZGF0b3IuZm9ybWF0KFJlc291cmNlcy5WQUxJREFURV9NQVhMRU5HVEgpLFxyXG4gICAgbWlubGVuZ3RoOiAkLnZhbGlkYXRvci5mb3JtYXQoUmVzb3VyY2VzLlZBTElEQVRFX01JTkxFTkdUSCksXHJcbiAgICByYW5nZWxlbmd0aDogJC52YWxpZGF0b3IuZm9ybWF0KFJlc291cmNlcy5WQUxJREFURV9SQU5HRUxFTkdUSCksXHJcbiAgICByYW5nZTogJC52YWxpZGF0b3IuZm9ybWF0KFJlc291cmNlcy5WQUxJREFURV9SQU5HRSksXHJcbiAgICBtYXg6ICQudmFsaWRhdG9yLmZvcm1hdChSZXNvdXJjZXMuVkFMSURBVEVfTUFYKSxcclxuICAgIG1pbjogJC52YWxpZGF0b3IuZm9ybWF0KFJlc291cmNlcy5WQUxJREFURV9NSU4pXHJcbn0pO1xyXG5cclxudmFyIHZhbGlkYXRvciA9IHtcclxuICAgIHJlZ2V4OiByZWdleCxcclxuICAgIHNldHRpbmdzOiBzZXR0aW5ncyxcclxuICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgJCgnZm9ybTpub3QoLnN1cHByZXNzKScpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLnZhbGlkYXRlKHNlbGYuc2V0dGluZ3MpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhbGlkYXRvci5waG9uZVZhbGlkYXRpb24oKTtcclxuICAgICAgICB2YWxpZGF0b3IuemlwRm9ybWF0dGVyKCk7XHJcbiAgICB9LFxyXG4gICAgaW5pdEZvcm06IGZ1bmN0aW9uIChmKSB7XHJcbiAgICAgICAgJChmKS52YWxpZGF0ZSh0aGlzLnNldHRpbmdzKTtcclxuICAgIH0sXHJcbiAgICBwaG9uZVZhbGlkYXRpb246IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBwaG9uZSB2YWxpZGF0aW9uXHJcbiAgICAgICAgdmFyIGlzRmlyZWZveCA9IG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignRmlyZWZveCcpID4gLTE7XHJcbiAgICAgICAgdmFyIGlzRXhwbG9yZXIgPSBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ01TSUUnKSA+IC0xO1xyXG4gICAgICAgIGlmIChpc0ZpcmVmb3ggfHwgaXNFeHBsb3Jlcikge1xyXG4gICAgICAgICAgICAkKCdpbnB1dFtuYW1lJD1cXCdwaG9uZVxcJ10nKS5iaW5kKCdrZXl1cCBrZXlkb3duJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChlLnNoaWZ0S2V5IHx8IGUuY3RybEtleSB8fCBlLmFsdEtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IGUua2V5Q29kZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISgoa2V5ID09IDgpIHx8IChrZXkgPT0gOSkgfHwgKGtleSA9PSA0NikgfHwgKGtleSA+PSAzNSAmJiBrZXkgPD0gNDApIHx8IChrZXkgPj0gNDggJiYga2V5IDw9IDU3KSB8fCAoa2V5ID49IDk2ICYmIGtleSA8PSAxMDUpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy92YXIgY3VyY2hyID0gJCh0aGlzKS52YWwoKS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB2YXIgY3VydmFsID0gJCh0aGlzKS52YWwoKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgY3VydmFsMSA9IGN1cnZhbC5yZXBsYWNlKC9bQS1aYS16YCB+IUAjJCVeJiooKV98K1xcLT0/OzonXCIsLjw+XFx7XFx9XFxbXFxdXFxcXFxcL10vZ2ksICcnKTtcclxuICAgICAgICAgICAgICAgIHZhciBzdHIxID0gY3VydmFsMS5zdWJzdHJpbmcoMCwgMyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3RyMiA9IGN1cnZhbDEuc3Vic3RyaW5nKDMsIDYpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN0cjMgPSBjdXJ2YWwxLnN1YnN0cmluZyg2LCAxMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnZhbC5pbmRleE9mKCcoJykgPT0gLTEgJiYgY3VydmFsLmluZGV4T2YoJyknKSA9PSAtMSAmJiBjdXJ2YWwxLmxlbmd0aCA9PSAzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS52YWwoJygnICsgc3RyMSArICcpICcpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJ2YWwuaW5kZXhPZignKCcpICE9IC0xICYmIGN1cnZhbC5pbmRleE9mKCcpJykgPT0gLTEgJiYgY3VydmFsMS5sZW5ndGggPT0gNCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykudmFsKCcoJyArIHN0cjEgKyAnKSAnICsgc3RyMik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnZhbC5pbmRleE9mKCcoJykgIT0gLTEgJiYgY3VydmFsLmluZGV4T2YoJyknKSAhPSAtMSAmJiBjdXJ2YWwuaW5kZXhPZignICcpID09IC0xICYmIGN1cnZhbDEubGVuZ3RoID09IDYpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnZhbCgnKCcgKyBzdHIxICsgJykgJyArIHN0cjIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJ2YWwuaW5kZXhPZignKCcpICE9IC0xICYmIGN1cnZhbC5pbmRleE9mKCcpJykgIT0gLTEgJiYgY3VydmFsLmluZGV4T2YoJyAnKSAhPSAtMSAmJiBjdXJ2YWwuaW5kZXhPZignLScpID09IC0xICYmIGN1cnZhbDEubGVuZ3RoID4gNikge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykudmFsKCcoJyArIHN0cjEgKyAnKSAnICsgc3RyMiArICctJyArIHN0cjMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnZhbC5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykudmFsKCcnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJCgnYm9keScpLm9uKCdjaGFuZ2UgaW5wdXQga2V5dXAnLCAnaW5wdXRbbmFtZSQ9XFwncGhvbmVcXCddJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgIC8vdmFyIGN1cmNociA9ICQodGhpcykudmFsKCkubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS52YWwodGhpcy52YWx1ZS5yZXBsYWNlKC9bXlxcZF0vZywgJycpKTtcclxuICAgICAgICAgICAgICAgIHZhciBjdXJ2YWwgPSAkKHRoaXMpLnZhbCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBjdXJ2YWwxID0gY3VydmFsO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN0cjEgPSBjdXJ2YWwxLnN1YnN0cmluZygwLCAzKTtcclxuICAgICAgICAgICAgICAgIHZhciBzdHIyID0gY3VydmFsMS5zdWJzdHJpbmcoMywgNik7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3RyMyA9IGN1cnZhbDEuc3Vic3RyaW5nKDYsIDEwKTtcclxuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBldmVudC53aGljaCB8fCBldmVudC5rZXlDb2RlIHx8IGV2ZW50LmNoYXJDb2RlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChrZXkgPT0gOCB8fCBlLnNoaWZ0S2V5IHx8IGUuY3RybEtleSB8fCBlLmFsdEtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VydmFsMS5sZW5ndGggPT0gNCB8fCBjdXJ2YWwxLmxlbmd0aCA9PSA1IHx8IGN1cnZhbDEubGVuZ3RoID09IDYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS52YWwoJygnICsgc3RyMSArICcpICcgKyBzdHIyKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnZhbDEubGVuZ3RoID4gNikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnZhbCgnKCcgKyBzdHIxICsgJykgJyArIHN0cjIgKyAnLScgKyBzdHIzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJ2YWwxLmxlbmd0aCA9PSAzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykudmFsKCcoJyArIHN0cjEgKyAnKSAnKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnZhbDEubGVuZ3RoID09IDQgfHwgY3VydmFsMS5sZW5ndGggPT0gNSB8fCBjdXJ2YWwxLmxlbmd0aCA9PSA2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykudmFsKCcoJyArIHN0cjEgKyAnKSAnICsgc3RyMik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJ2YWwxLmxlbmd0aCA+IDYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS52YWwoJygnICsgc3RyMSArICcpICcgKyBzdHIyICsgJy0nICsgc3RyMyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJ2YWwubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS52YWwoJycpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiAkKFwiaW5wdXRbbmFtZSQ9J3Bob25lJ11cIikuYmx1cihmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgJCh0aGlzKS52YWwodGhpcy52YWx1ZS5yZXBsYWNlKC9bQS1aYS16YCB+IUAjJCVeJiooKV98K1xcLT0/OzonXCIsLjw+XFx7XFx9XFxbXFxdXFxcXFxcL10vZ2ksICcnKSk7XHJcbiAgICAgICAgICAgICAgICAgdmFyIGN1cnZhbCA9ICQodGhpcykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgdmFyIHN0cjEgPSBjdXJ2YWwuc3Vic3RyaW5nKDAsIDMpO1xyXG4gICAgICAgICAgICAgICAgIHZhciBzdHIyID0gY3VydmFsLnN1YnN0cmluZygzLCA2KTtcclxuICAgICAgICAgICAgICAgICB2YXIgc3RyMyA9IGN1cnZhbC5zdWJzdHJpbmcoNiwgMTApO1xyXG4gICAgICAgICAgICAgICAgIGlmKGN1cnZhbC5sZW5ndGggPD0gMyAmJiBjdXJ2YWwubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICQodGhpcykudmFsKCBcIihcIiArIHN0cjEgKyBcIikgXCIpO1xyXG4gICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICBlbHNlICBpZihjdXJ2YWwubGVuZ3RoIDw9IDYgJiYgY3VydmFsLmxlbmd0aCA+IDMpe1xyXG4gICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnZhbCggXCIoXCIgKyBzdHIxICsgXCIpIFwiICsgc3RyMiApO1xyXG4gICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICBlbHNlICBpZihjdXJ2YWwubGVuZ3RoIDw9IDEwICYmIGN1cnZhbC5sZW5ndGggPiA2KXtcclxuICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS52YWwoIFwiKFwiICsgc3RyMSArIFwiKSBcIiArIHN0cjIgKyBcIi1cIiArIHN0cjMpO1xyXG4gICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgfSk7Ki9cclxuXHJcbiAgICB9LFxyXG4gICAgemlwRm9ybWF0dGVyOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnYm9keScpLm9uKCdjaGFuZ2UgaW5wdXQnLCAnaW5wdXRbbmFtZSQ9XFwncG9zdGFsXFwnXSwgaW5wdXRbbmFtZSQ9XFwnemlwXFwnXScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS52YWwodGhpcy52YWx1ZS5yZXBsYWNlKC9bXlxcZF0vZywgJycpKTtcclxuICAgICAgICAgICAgdmFyIGN1cnZhbCA9ICQodGhpcykudmFsKCk7XHJcbiAgICAgICAgICAgIGlmIChjdXJ2YWwubGVuZ3RoID4gNSkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS52YWwoY3VydmFsLnN1YnN0cmluZygwLCA1KSArICctJyArIGN1cnZhbC5zdWJzdHJpbmcoNSwgOSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn07XHJcbm1vZHVsZS5leHBvcnRzID0gdmFsaWRhdG9yO1xyXG4iXX0=
