(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";

// rawAsap provides everything we need except exception management.
var rawAsap = require("./raw");
// RawTasks are recycled to reduce GC churn.
var freeTasks = [];
// We queue errors to ensure they are thrown in right order (FIFO).
// Array-as-queue is good enough here, since we are just dealing with exceptions.
var pendingErrors = [];
var requestErrorThrow = rawAsap.makeRequestCallFromTimer(throwFirstError);

function throwFirstError() {
    if (pendingErrors.length) {
        throw pendingErrors.shift();
    }
}

/**
 * Calls a task as soon as possible after returning, in its own event, with priority
 * over other events like animation, reflow, and repaint. An error thrown from an
 * event will not interrupt, nor even substantially slow down the processing of
 * other events, but will be rather postponed to a lower priority event.
 * @param {{call}} task A callable object, typically a function that takes no
 * arguments.
 */
module.exports = asap;
function asap(task) {
    var rawTask;
    if (freeTasks.length) {
        rawTask = freeTasks.pop();
    } else {
        rawTask = new RawTask();
    }
    rawTask.task = task;
    rawAsap(rawTask);
}

// We wrap tasks with recyclable task objects.  A task object implements
// `call`, just like a function.
function RawTask() {
    this.task = null;
}

// The sole purpose of wrapping the task is to catch the exception and recycle
// the task object after its single use.
RawTask.prototype.call = function () {
    try {
        this.task.call();
    } catch (error) {
        if (asap.onerror) {
            // This hook exists purely for testing purposes.
            // Its name will be periodically randomized to break any code that
            // depends on its existence.
            asap.onerror(error);
        } else {
            // In a web browser, exceptions are not fatal. However, to avoid
            // slowing down the queue of pending tasks, we rethrow the error in a
            // lower priority turn.
            pendingErrors.push(error);
            requestErrorThrow();
        }
    } finally {
        this.task = null;
        freeTasks[freeTasks.length] = this;
    }
};

},{"./raw":2}],2:[function(require,module,exports){
(function (global){
"use strict";

// Use the fastest means possible to execute a task in its own turn, with
// priority over other events including IO, animation, reflow, and redraw
// events in browsers.
//
// An exception thrown by a task will permanently interrupt the processing of
// subsequent tasks. The higher level `asap` function ensures that if an
// exception is thrown by a task, that the task queue will continue flushing as
// soon as possible, but if you use `rawAsap` directly, you are responsible to
// either ensure that no exceptions are thrown from your task, or to manually
// call `rawAsap.requestFlush` if an exception is thrown.
module.exports = rawAsap;
function rawAsap(task) {
    if (!queue.length) {
        requestFlush();
        flushing = true;
    }
    // Equivalent to push, but avoids a function call.
    queue[queue.length] = task;
}

var queue = [];
// Once a flush has been requested, no further calls to `requestFlush` are
// necessary until the next `flush` completes.
var flushing = false;
// `requestFlush` is an implementation-specific method that attempts to kick
// off a `flush` event as quickly as possible. `flush` will attempt to exhaust
// the event queue before yielding to the browser's own event loop.
var requestFlush;
// The position of the next task to execute in the task queue. This is
// preserved between calls to `flush` so that it can be resumed if
// a task throws an exception.
var index = 0;
// If a task schedules additional tasks recursively, the task queue can grow
// unbounded. To prevent memory exhaustion, the task queue will periodically
// truncate already-completed tasks.
var capacity = 1024;

// The flush function processes all tasks that have been scheduled with
// `rawAsap` unless and until one of those tasks throws an exception.
// If a task throws an exception, `flush` ensures that its state will remain
// consistent and will resume where it left off when called again.
// However, `flush` does not make any arrangements to be called again if an
// exception is thrown.
function flush() {
    while (index < queue.length) {
        var currentIndex = index;
        // Advance the index before calling the task. This ensures that we will
        // begin flushing on the next task the task throws an error.
        index = index + 1;
        queue[currentIndex].call();
        // Prevent leaking memory for long chains of recursive calls to `asap`.
        // If we call `asap` within tasks scheduled by `asap`, the queue will
        // grow, but to avoid an O(n) walk for every task we execute, we don't
        // shift tasks off the queue after they have been executed.
        // Instead, we periodically shift 1024 tasks off the queue.
        if (index > capacity) {
            // Manually shift all values starting at the index back to the
            // beginning of the queue.
            for (var scan = 0, newLength = queue.length - index; scan < newLength; scan++) {
                queue[scan] = queue[scan + index];
            }
            queue.length -= index;
            index = 0;
        }
    }
    queue.length = 0;
    index = 0;
    flushing = false;
}

// `requestFlush` is implemented using a strategy based on data collected from
// every available SauceLabs Selenium web driver worker at time of writing.
// https://docs.google.com/spreadsheets/d/1mG-5UYGup5qxGdEMWkhP6BWCz053NUb2E1QoUTU16uA/edit#gid=783724593

// Safari 6 and 6.1 for desktop, iPad, and iPhone are the only browsers that
// have WebKitMutationObserver but not un-prefixed MutationObserver.
// Must use `global` or `self` instead of `window` to work in both frames and web
// workers. `global` is a provision of Browserify, Mr, Mrs, or Mop.

/* globals self */
var scope = typeof global !== "undefined" ? global : self;
var BrowserMutationObserver = scope.MutationObserver || scope.WebKitMutationObserver;

// MutationObservers are desirable because they have high priority and work
// reliably everywhere they are implemented.
// They are implemented in all modern browsers.
//
// - Android 4-4.3
// - Chrome 26-34
// - Firefox 14-29
// - Internet Explorer 11
// - iPad Safari 6-7.1
// - iPhone Safari 7-7.1
// - Safari 6-7
if (typeof BrowserMutationObserver === "function") {
    requestFlush = makeRequestCallFromMutationObserver(flush);

// MessageChannels are desirable because they give direct access to the HTML
// task queue, are implemented in Internet Explorer 10, Safari 5.0-1, and Opera
// 11-12, and in web workers in many engines.
// Although message channels yield to any queued rendering and IO tasks, they
// would be better than imposing the 4ms delay of timers.
// However, they do not work reliably in Internet Explorer or Safari.

// Internet Explorer 10 is the only browser that has setImmediate but does
// not have MutationObservers.
// Although setImmediate yields to the browser's renderer, it would be
// preferrable to falling back to setTimeout since it does not have
// the minimum 4ms penalty.
// Unfortunately there appears to be a bug in Internet Explorer 10 Mobile (and
// Desktop to a lesser extent) that renders both setImmediate and
// MessageChannel useless for the purposes of ASAP.
// https://github.com/kriskowal/q/issues/396

// Timers are implemented universally.
// We fall back to timers in workers in most engines, and in foreground
// contexts in the following browsers.
// However, note that even this simple case requires nuances to operate in a
// broad spectrum of browsers.
//
// - Firefox 3-13
// - Internet Explorer 6-9
// - iPad Safari 4.3
// - Lynx 2.8.7
} else {
    requestFlush = makeRequestCallFromTimer(flush);
}

// `requestFlush` requests that the high priority event queue be flushed as
// soon as possible.
// This is useful to prevent an error thrown in a task from stalling the event
// queue if the exception handled by Node.jsâ€™s
// `process.on("uncaughtException")` or by a domain.
rawAsap.requestFlush = requestFlush;

// To request a high priority event, we induce a mutation observer by toggling
// the text of a text node between "1" and "-1".
function makeRequestCallFromMutationObserver(callback) {
    var toggle = 1;
    var observer = new BrowserMutationObserver(callback);
    var node = document.createTextNode("");
    observer.observe(node, {characterData: true});
    return function requestCall() {
        toggle = -toggle;
        node.data = toggle;
    };
}

// The message channel technique was discovered by Malte Ubl and was the
// original foundation for this library.
// http://www.nonblocking.io/2011/06/windownexttick.html

// Safari 6.0.5 (at least) intermittently fails to create message ports on a
// page's first load. Thankfully, this version of Safari supports
// MutationObservers, so we don't need to fall back in that case.

// function makeRequestCallFromMessageChannel(callback) {
//     var channel = new MessageChannel();
//     channel.port1.onmessage = callback;
//     return function requestCall() {
//         channel.port2.postMessage(0);
//     };
// }

// For reasons explained above, we are also unable to use `setImmediate`
// under any circumstances.
// Even if we were, there is another bug in Internet Explorer 10.
// It is not sufficient to assign `setImmediate` to `requestFlush` because
// `setImmediate` must be called *by name* and therefore must be wrapped in a
// closure.
// Never forget.

// function makeRequestCallFromSetImmediate(callback) {
//     return function requestCall() {
//         setImmediate(callback);
//     };
// }

// Safari 6.0 has a problem where timers will get lost while the user is
// scrolling. This problem does not impact ASAP because Safari 6.0 supports
// mutation observers, so that implementation is used instead.
// However, if we ever elect to use timers in Safari, the prevalent work-around
// is to add a scroll event listener that calls for a flush.

// `setTimeout` does not call the passed callback if the delay is less than
// approximately 7 in web workers in Firefox 8 through 18, and sometimes not
// even then.

function makeRequestCallFromTimer(callback) {
    return function requestCall() {
        // We dispatch a timeout with a specified delay of 0 for engines that
        // can reliably accommodate that request. This will usually be snapped
        // to a 4 milisecond delay, but once we're flushing, there's no delay
        // between events.
        var timeoutHandle = setTimeout(handleTimer, 0);
        // However, since this timer gets frequently dropped in Firefox
        // workers, we enlist an interval handle that will try to fire
        // an event 20 times per second until it succeeds.
        var intervalHandle = setInterval(handleTimer, 50);

        function handleTimer() {
            // Whichever timer succeeds will cancel both timers and
            // execute the callback.
            clearTimeout(timeoutHandle);
            clearInterval(intervalHandle);
            callback();
        }
    };
}

// This is for `asap.js` only.
// Its name will be periodically randomized to break any code that depends on
// its existence.
rawAsap.makeRequestCallFromTimer = makeRequestCallFromTimer;

// ASAP was originally a nextTick shim included in Q. This was factored out
// into this ASAP package. It was later adapted to RSVP which made further
// amendments. These decisions, particularly to marginalize MessageChannel and
// to capture the MutationObserver implementation in a closure, were integrated
// back into ASAP proper.
// https://github.com/tildeio/rsvp.js/blob/cddf7232546a9cf858524b75cde6f9edf72620a7/lib/rsvp/asap.js

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],3:[function(require,module,exports){
/**
 * EvEmitter v1.1.0
 * Lil' event emitter
 * MIT License
 */

/* jshint unused: true, undef: true, strict: true */

( function( global, factory ) {
  // universal module definition
  /* jshint strict: false */ /* globals define, module, window */
  if ( typeof define == 'function' && define.amd ) {
    // AMD - RequireJS
    define( factory );
  } else if ( typeof module == 'object' && module.exports ) {
    // CommonJS - Browserify, Webpack
    module.exports = factory();
  } else {
    // Browser globals
    global.EvEmitter = factory();
  }

}( typeof window != 'undefined' ? window : this, function() {

"use strict";

function EvEmitter() {}

var proto = EvEmitter.prototype;

proto.on = function( eventName, listener ) {
  if ( !eventName || !listener ) {
    return;
  }
  // set events hash
  var events = this._events = this._events || {};
  // set listeners array
  var listeners = events[ eventName ] = events[ eventName ] || [];
  // only add once
  if ( listeners.indexOf( listener ) == -1 ) {
    listeners.push( listener );
  }

  return this;
};

proto.once = function( eventName, listener ) {
  if ( !eventName || !listener ) {
    return;
  }
  // add event
  this.on( eventName, listener );
  // set once flag
  // set onceEvents hash
  var onceEvents = this._onceEvents = this._onceEvents || {};
  // set onceListeners object
  var onceListeners = onceEvents[ eventName ] = onceEvents[ eventName ] || {};
  // set flag
  onceListeners[ listener ] = true;

  return this;
};

proto.off = function( eventName, listener ) {
  var listeners = this._events && this._events[ eventName ];
  if ( !listeners || !listeners.length ) {
    return;
  }
  var index = listeners.indexOf( listener );
  if ( index != -1 ) {
    listeners.splice( index, 1 );
  }

  return this;
};

proto.emitEvent = function( eventName, args ) {
  var listeners = this._events && this._events[ eventName ];
  if ( !listeners || !listeners.length ) {
    return;
  }
  // copy over to avoid interference if .off() in listener
  listeners = listeners.slice(0);
  args = args || [];
  // once stuff
  var onceListeners = this._onceEvents && this._onceEvents[ eventName ];

  for ( var i=0; i < listeners.length; i++ ) {
    var listener = listeners[i]
    var isOnce = onceListeners && onceListeners[ listener ];
    if ( isOnce ) {
      // remove listener
      // remove before trigger to prevent recursion
      this.off( eventName, listener );
      // unset once flag
      delete onceListeners[ listener ];
    }
    // trigger listener
    listener.apply( this, args );
  }

  return this;
};

proto.allOff = function() {
  delete this._events;
  delete this._onceEvents;
};

return EvEmitter;

}));

},{}],4:[function(require,module,exports){
/*!
 * imagesLoaded v4.1.3
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */

( function( window, factory ) { 'use strict';
  // universal module definition

  /*global define: false, module: false, require: false */

  if ( typeof define == 'function' && define.amd ) {
    // AMD
    define( [
      'ev-emitter/ev-emitter'
    ], function( EvEmitter ) {
      return factory( window, EvEmitter );
    });
  } else if ( typeof module == 'object' && module.exports ) {
    // CommonJS
    module.exports = factory(
      window,
      require('ev-emitter')
    );
  } else {
    // browser global
    window.imagesLoaded = factory(
      window,
      window.EvEmitter
    );
  }

})( typeof window !== 'undefined' ? window : this,

// --------------------------  factory -------------------------- //

function factory( window, EvEmitter ) {

'use strict';

var $ = window.jQuery;
var console = window.console;

// -------------------------- helpers -------------------------- //

// extend objects
function extend( a, b ) {
  for ( var prop in b ) {
    a[ prop ] = b[ prop ];
  }
  return a;
}

// turn element or nodeList into an array
function makeArray( obj ) {
  var ary = [];
  if ( Array.isArray( obj ) ) {
    // use object if already an array
    ary = obj;
  } else if ( typeof obj.length == 'number' ) {
    // convert nodeList to array
    for ( var i=0; i < obj.length; i++ ) {
      ary.push( obj[i] );
    }
  } else {
    // array of single index
    ary.push( obj );
  }
  return ary;
}

// -------------------------- imagesLoaded -------------------------- //

/**
 * @param {Array, Element, NodeList, String} elem
 * @param {Object or Function} options - if function, use as callback
 * @param {Function} onAlways - callback function
 */
function ImagesLoaded( elem, options, onAlways ) {
  // coerce ImagesLoaded() without new, to be new ImagesLoaded()
  if ( !( this instanceof ImagesLoaded ) ) {
    return new ImagesLoaded( elem, options, onAlways );
  }
  // use elem as selector string
  if ( typeof elem == 'string' ) {
    elem = document.querySelectorAll( elem );
  }

  this.elements = makeArray( elem );
  this.options = extend( {}, this.options );

  if ( typeof options == 'function' ) {
    onAlways = options;
  } else {
    extend( this.options, options );
  }

  if ( onAlways ) {
    this.on( 'always', onAlways );
  }

  this.getImages();

  if ( $ ) {
    // add jQuery Deferred object
    this.jqDeferred = new $.Deferred();
  }

  // HACK check async to allow time to bind listeners
  setTimeout( function() {
    this.check();
  }.bind( this ));
}

ImagesLoaded.prototype = Object.create( EvEmitter.prototype );

ImagesLoaded.prototype.options = {};

ImagesLoaded.prototype.getImages = function() {
  this.images = [];

  // filter & find items if we have an item selector
  this.elements.forEach( this.addElementImages, this );
};

/**
 * @param {Node} element
 */
ImagesLoaded.prototype.addElementImages = function( elem ) {
  // filter siblings
  if ( elem.nodeName == 'IMG' ) {
    this.addImage( elem );
  }
  // get background image on element
  if ( this.options.background === true ) {
    this.addElementBackgroundImages( elem );
  }

  // find children
  // no non-element nodes, #143
  var nodeType = elem.nodeType;
  if ( !nodeType || !elementNodeTypes[ nodeType ] ) {
    return;
  }
  var childImgs = elem.querySelectorAll('img');
  // concat childElems to filterFound array
  for ( var i=0; i < childImgs.length; i++ ) {
    var img = childImgs[i];
    this.addImage( img );
  }

  // get child background images
  if ( typeof this.options.background == 'string' ) {
    var children = elem.querySelectorAll( this.options.background );
    for ( i=0; i < children.length; i++ ) {
      var child = children[i];
      this.addElementBackgroundImages( child );
    }
  }
};

var elementNodeTypes = {
  1: true,
  9: true,
  11: true
};

ImagesLoaded.prototype.addElementBackgroundImages = function( elem ) {
  var style = getComputedStyle( elem );
  if ( !style ) {
    // Firefox returns null if in a hidden iframe https://bugzil.la/548397
    return;
  }
  // get url inside url("...")
  var reURL = /url\((['"])?(.*?)\1\)/gi;
  var matches = reURL.exec( style.backgroundImage );
  while ( matches !== null ) {
    var url = matches && matches[2];
    if ( url ) {
      this.addBackground( url, elem );
    }
    matches = reURL.exec( style.backgroundImage );
  }
};

/**
 * @param {Image} img
 */
ImagesLoaded.prototype.addImage = function( img ) {
  var loadingImage = new LoadingImage( img );
  this.images.push( loadingImage );
};

ImagesLoaded.prototype.addBackground = function( url, elem ) {
  var background = new Background( url, elem );
  this.images.push( background );
};

ImagesLoaded.prototype.check = function() {
  var _this = this;
  this.progressedCount = 0;
  this.hasAnyBroken = false;
  // complete if no images
  if ( !this.images.length ) {
    this.complete();
    return;
  }

  function onProgress( image, elem, message ) {
    // HACK - Chrome triggers event before object properties have changed. #83
    setTimeout( function() {
      _this.progress( image, elem, message );
    });
  }

  this.images.forEach( function( loadingImage ) {
    loadingImage.once( 'progress', onProgress );
    loadingImage.check();
  });
};

ImagesLoaded.prototype.progress = function( image, elem, message ) {
  this.progressedCount++;
  this.hasAnyBroken = this.hasAnyBroken || !image.isLoaded;
  // progress event
  this.emitEvent( 'progress', [ this, image, elem ] );
  if ( this.jqDeferred && this.jqDeferred.notify ) {
    this.jqDeferred.notify( this, image );
  }
  // check if completed
  if ( this.progressedCount == this.images.length ) {
    this.complete();
  }

  if ( this.options.debug && console ) {
    console.log( 'progress: ' + message, image, elem );
  }
};

ImagesLoaded.prototype.complete = function() {
  var eventName = this.hasAnyBroken ? 'fail' : 'done';
  this.isComplete = true;
  this.emitEvent( eventName, [ this ] );
  this.emitEvent( 'always', [ this ] );
  if ( this.jqDeferred ) {
    var jqMethod = this.hasAnyBroken ? 'reject' : 'resolve';
    this.jqDeferred[ jqMethod ]( this );
  }
};

// --------------------------  -------------------------- //

function LoadingImage( img ) {
  this.img = img;
}

LoadingImage.prototype = Object.create( EvEmitter.prototype );

LoadingImage.prototype.check = function() {
  // If complete is true and browser supports natural sizes,
  // try to check for image status manually.
  var isComplete = this.getIsImageComplete();
  if ( isComplete ) {
    // report based on naturalWidth
    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );
    return;
  }

  // If none of the checks above matched, simulate loading on detached element.
  this.proxyImage = new Image();
  this.proxyImage.addEventListener( 'load', this );
  this.proxyImage.addEventListener( 'error', this );
  // bind to image as well for Firefox. #191
  this.img.addEventListener( 'load', this );
  this.img.addEventListener( 'error', this );
  this.proxyImage.src = this.img.src;
};

LoadingImage.prototype.getIsImageComplete = function() {
  return this.img.complete && this.img.naturalWidth !== undefined;
};

LoadingImage.prototype.confirm = function( isLoaded, message ) {
  this.isLoaded = isLoaded;
  this.emitEvent( 'progress', [ this, this.img, message ] );
};

// ----- events ----- //

// trigger specified handler for event type
LoadingImage.prototype.handleEvent = function( event ) {
  var method = 'on' + event.type;
  if ( this[ method ] ) {
    this[ method ]( event );
  }
};

LoadingImage.prototype.onload = function() {
  this.confirm( true, 'onload' );
  this.unbindEvents();
};

LoadingImage.prototype.onerror = function() {
  this.confirm( false, 'onerror' );
  this.unbindEvents();
};

LoadingImage.prototype.unbindEvents = function() {
  this.proxyImage.removeEventListener( 'load', this );
  this.proxyImage.removeEventListener( 'error', this );
  this.img.removeEventListener( 'load', this );
  this.img.removeEventListener( 'error', this );
};

// -------------------------- Background -------------------------- //

function Background( url, element ) {
  this.url = url;
  this.element = element;
  this.img = new Image();
}

// inherit LoadingImage prototype
Background.prototype = Object.create( LoadingImage.prototype );

Background.prototype.check = function() {
  this.img.addEventListener( 'load', this );
  this.img.addEventListener( 'error', this );
  this.img.src = this.url;
  // check if image is already complete
  var isComplete = this.getIsImageComplete();
  if ( isComplete ) {
    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );
    this.unbindEvents();
  }
};

Background.prototype.unbindEvents = function() {
  this.img.removeEventListener( 'load', this );
  this.img.removeEventListener( 'error', this );
};

Background.prototype.confirm = function( isLoaded, message ) {
  this.isLoaded = isLoaded;
  this.emitEvent( 'progress', [ this, this.element, message ] );
};

// -------------------------- jQuery -------------------------- //

ImagesLoaded.makeJQueryPlugin = function( jQuery ) {
  jQuery = jQuery || window.jQuery;
  if ( !jQuery ) {
    return;
  }
  // set local variable
  $ = jQuery;
  // $().imagesLoaded()
  $.fn.imagesLoaded = function( options, callback ) {
    var instance = new ImagesLoaded( this, options, callback );
    return instance.jqDeferred.promise( $(this) );
  };
};
// try making plugin
ImagesLoaded.makeJQueryPlugin();

// --------------------------  -------------------------- //

return ImagesLoaded;

});

},{"ev-emitter":3}],5:[function(require,module,exports){
(function (global){
/**
 * @license
 * lodash 3.10.1 (Custom Build) <https://lodash.com/>
 * Build: `lodash modern -d -o ./index.js`
 * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <https://lodash.com/license>
 */
;(function() {

  /** Used as a safe reference for `undefined` in pre-ES5 environments. */
  var undefined;

  /** Used as the semantic version number. */
  var VERSION = '3.10.1';

  /** Used to compose bitmasks for wrapper metadata. */
  var BIND_FLAG = 1,
      BIND_KEY_FLAG = 2,
      CURRY_BOUND_FLAG = 4,
      CURRY_FLAG = 8,
      CURRY_RIGHT_FLAG = 16,
      PARTIAL_FLAG = 32,
      PARTIAL_RIGHT_FLAG = 64,
      ARY_FLAG = 128,
      REARG_FLAG = 256;

  /** Used as default options for `_.trunc`. */
  var DEFAULT_TRUNC_LENGTH = 30,
      DEFAULT_TRUNC_OMISSION = '...';

  /** Used to detect when a function becomes hot. */
  var HOT_COUNT = 150,
      HOT_SPAN = 16;

  /** Used as the size to enable large array optimizations. */
  var LARGE_ARRAY_SIZE = 200;

  /** Used to indicate the type of lazy iteratees. */
  var LAZY_FILTER_FLAG = 1,
      LAZY_MAP_FLAG = 2;

  /** Used as the `TypeError` message for "Functions" methods. */
  var FUNC_ERROR_TEXT = 'Expected a function';

  /** Used as the internal argument placeholder. */
  var PLACEHOLDER = '__lodash_placeholder__';

  /** `Object#toString` result references. */
  var argsTag = '[object Arguments]',
      arrayTag = '[object Array]',
      boolTag = '[object Boolean]',
      dateTag = '[object Date]',
      errorTag = '[object Error]',
      funcTag = '[object Function]',
      mapTag = '[object Map]',
      numberTag = '[object Number]',
      objectTag = '[object Object]',
      regexpTag = '[object RegExp]',
      setTag = '[object Set]',
      stringTag = '[object String]',
      weakMapTag = '[object WeakMap]';

  var arrayBufferTag = '[object ArrayBuffer]',
      float32Tag = '[object Float32Array]',
      float64Tag = '[object Float64Array]',
      int8Tag = '[object Int8Array]',
      int16Tag = '[object Int16Array]',
      int32Tag = '[object Int32Array]',
      uint8Tag = '[object Uint8Array]',
      uint8ClampedTag = '[object Uint8ClampedArray]',
      uint16Tag = '[object Uint16Array]',
      uint32Tag = '[object Uint32Array]';

  /** Used to match empty string literals in compiled template source. */
  var reEmptyStringLeading = /\b__p \+= '';/g,
      reEmptyStringMiddle = /\b(__p \+=) '' \+/g,
      reEmptyStringTrailing = /(__e\(.*?\)|\b__t\)) \+\n'';/g;

  /** Used to match HTML entities and HTML characters. */
  var reEscapedHtml = /&(?:amp|lt|gt|quot|#39|#96);/g,
      reUnescapedHtml = /[&<>"'`]/g,
      reHasEscapedHtml = RegExp(reEscapedHtml.source),
      reHasUnescapedHtml = RegExp(reUnescapedHtml.source);

  /** Used to match template delimiters. */
  var reEscape = /<%-([\s\S]+?)%>/g,
      reEvaluate = /<%([\s\S]+?)%>/g,
      reInterpolate = /<%=([\s\S]+?)%>/g;

  /** Used to match property names within property paths. */
  var reIsDeepProp = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,
      reIsPlainProp = /^\w*$/,
      rePropName = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g;

  /**
   * Used to match `RegExp` [syntax characters](http://ecma-international.org/ecma-262/6.0/#sec-patterns)
   * and those outlined by [`EscapeRegExpPattern`](http://ecma-international.org/ecma-262/6.0/#sec-escaperegexppattern).
   */
  var reRegExpChars = /^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,
      reHasRegExpChars = RegExp(reRegExpChars.source);

  /** Used to match [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks). */
  var reComboMark = /[\u0300-\u036f\ufe20-\ufe23]/g;

  /** Used to match backslashes in property paths. */
  var reEscapeChar = /\\(\\)?/g;

  /** Used to match [ES template delimiters](http://ecma-international.org/ecma-262/6.0/#sec-template-literal-lexical-components). */
  var reEsTemplate = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;

  /** Used to match `RegExp` flags from their coerced string values. */
  var reFlags = /\w*$/;

  /** Used to detect hexadecimal string values. */
  var reHasHexPrefix = /^0[xX]/;

  /** Used to detect host constructors (Safari > 5). */
  var reIsHostCtor = /^\[object .+?Constructor\]$/;

  /** Used to detect unsigned integer values. */
  var reIsUint = /^\d+$/;

  /** Used to match latin-1 supplementary letters (excluding mathematical operators). */
  var reLatin1 = /[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g;

  /** Used to ensure capturing order of template delimiters. */
  var reNoMatch = /($^)/;

  /** Used to match unescaped characters in compiled string literals. */
  var reUnescapedString = /['\n\r\u2028\u2029\\]/g;

  /** Used to match words to create compound words. */
  var reWords = (function() {
    var upper = '[A-Z\\xc0-\\xd6\\xd8-\\xde]',
        lower = '[a-z\\xdf-\\xf6\\xf8-\\xff]+';

    return RegExp(upper + '+(?=' + upper + lower + ')|' + upper + '?' + lower + '|' + upper + '+|[0-9]+', 'g');
  }());

  /** Used to assign default `context` object properties. */
  var contextProps = [
    'Array', 'ArrayBuffer', 'Date', 'Error', 'Float32Array', 'Float64Array',
    'Function', 'Int8Array', 'Int16Array', 'Int32Array', 'Math', 'Number',
    'Object', 'RegExp', 'Set', 'String', '_', 'clearTimeout', 'isFinite',
    'parseFloat', 'parseInt', 'setTimeout', 'TypeError', 'Uint8Array',
    'Uint8ClampedArray', 'Uint16Array', 'Uint32Array', 'WeakMap'
  ];

  /** Used to make template sourceURLs easier to identify. */
  var templateCounter = -1;

  /** Used to identify `toStringTag` values of typed arrays. */
  var typedArrayTags = {};
  typedArrayTags[float32Tag] = typedArrayTags[float64Tag] =
  typedArrayTags[int8Tag] = typedArrayTags[int16Tag] =
  typedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =
  typedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =
  typedArrayTags[uint32Tag] = true;
  typedArrayTags[argsTag] = typedArrayTags[arrayTag] =
  typedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =
  typedArrayTags[dateTag] = typedArrayTags[errorTag] =
  typedArrayTags[funcTag] = typedArrayTags[mapTag] =
  typedArrayTags[numberTag] = typedArrayTags[objectTag] =
  typedArrayTags[regexpTag] = typedArrayTags[setTag] =
  typedArrayTags[stringTag] = typedArrayTags[weakMapTag] = false;

  /** Used to identify `toStringTag` values supported by `_.clone`. */
  var cloneableTags = {};
  cloneableTags[argsTag] = cloneableTags[arrayTag] =
  cloneableTags[arrayBufferTag] = cloneableTags[boolTag] =
  cloneableTags[dateTag] = cloneableTags[float32Tag] =
  cloneableTags[float64Tag] = cloneableTags[int8Tag] =
  cloneableTags[int16Tag] = cloneableTags[int32Tag] =
  cloneableTags[numberTag] = cloneableTags[objectTag] =
  cloneableTags[regexpTag] = cloneableTags[stringTag] =
  cloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =
  cloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;
  cloneableTags[errorTag] = cloneableTags[funcTag] =
  cloneableTags[mapTag] = cloneableTags[setTag] =
  cloneableTags[weakMapTag] = false;

  /** Used to map latin-1 supplementary letters to basic latin letters. */
  var deburredLetters = {
    '\xc0': 'A',  '\xc1': 'A', '\xc2': 'A', '\xc3': 'A', '\xc4': 'A', '\xc5': 'A',
    '\xe0': 'a',  '\xe1': 'a', '\xe2': 'a', '\xe3': 'a', '\xe4': 'a', '\xe5': 'a',
    '\xc7': 'C',  '\xe7': 'c',
    '\xd0': 'D',  '\xf0': 'd',
    '\xc8': 'E',  '\xc9': 'E', '\xca': 'E', '\xcb': 'E',
    '\xe8': 'e',  '\xe9': 'e', '\xea': 'e', '\xeb': 'e',
    '\xcC': 'I',  '\xcd': 'I', '\xce': 'I', '\xcf': 'I',
    '\xeC': 'i',  '\xed': 'i', '\xee': 'i', '\xef': 'i',
    '\xd1': 'N',  '\xf1': 'n',
    '\xd2': 'O',  '\xd3': 'O', '\xd4': 'O', '\xd5': 'O', '\xd6': 'O', '\xd8': 'O',
    '\xf2': 'o',  '\xf3': 'o', '\xf4': 'o', '\xf5': 'o', '\xf6': 'o', '\xf8': 'o',
    '\xd9': 'U',  '\xda': 'U', '\xdb': 'U', '\xdc': 'U',
    '\xf9': 'u',  '\xfa': 'u', '\xfb': 'u', '\xfc': 'u',
    '\xdd': 'Y',  '\xfd': 'y', '\xff': 'y',
    '\xc6': 'Ae', '\xe6': 'ae',
    '\xde': 'Th', '\xfe': 'th',
    '\xdf': 'ss'
  };

  /** Used to map characters to HTML entities. */
  var htmlEscapes = {
    '&': '&amp;',
    '<': '&lt;',
    '>': '&gt;',
    '"': '&quot;',
    "'": '&#39;',
    '`': '&#96;'
  };

  /** Used to map HTML entities to characters. */
  var htmlUnescapes = {
    '&amp;': '&',
    '&lt;': '<',
    '&gt;': '>',
    '&quot;': '"',
    '&#39;': "'",
    '&#96;': '`'
  };

  /** Used to determine if values are of the language type `Object`. */
  var objectTypes = {
    'function': true,
    'object': true
  };

  /** Used to escape characters for inclusion in compiled regexes. */
  var regexpEscapes = {
    '0': 'x30', '1': 'x31', '2': 'x32', '3': 'x33', '4': 'x34',
    '5': 'x35', '6': 'x36', '7': 'x37', '8': 'x38', '9': 'x39',
    'A': 'x41', 'B': 'x42', 'C': 'x43', 'D': 'x44', 'E': 'x45', 'F': 'x46',
    'a': 'x61', 'b': 'x62', 'c': 'x63', 'd': 'x64', 'e': 'x65', 'f': 'x66',
    'n': 'x6e', 'r': 'x72', 't': 'x74', 'u': 'x75', 'v': 'x76', 'x': 'x78'
  };

  /** Used to escape characters for inclusion in compiled string literals. */
  var stringEscapes = {
    '\\': '\\',
    "'": "'",
    '\n': 'n',
    '\r': 'r',
    '\u2028': 'u2028',
    '\u2029': 'u2029'
  };

  /** Detect free variable `exports`. */
  var freeExports = objectTypes[typeof exports] && exports && !exports.nodeType && exports;

  /** Detect free variable `module`. */
  var freeModule = objectTypes[typeof module] && module && !module.nodeType && module;

  /** Detect free variable `global` from Node.js. */
  var freeGlobal = freeExports && freeModule && typeof global == 'object' && global && global.Object && global;

  /** Detect free variable `self`. */
  var freeSelf = objectTypes[typeof self] && self && self.Object && self;

  /** Detect free variable `window`. */
  var freeWindow = objectTypes[typeof window] && window && window.Object && window;

  /** Detect the popular CommonJS extension `module.exports`. */
  var moduleExports = freeModule && freeModule.exports === freeExports && freeExports;

  /**
   * Used as a reference to the global object.
   *
   * The `this` value is used if it's the global object to avoid Greasemonkey's
   * restricted `window` object, otherwise the `window` object is used.
   */
  var root = freeGlobal || ((freeWindow !== (this && this.window)) && freeWindow) || freeSelf || this;

  /*--------------------------------------------------------------------------*/

  /**
   * The base implementation of `compareAscending` which compares values and
   * sorts them in ascending order without guaranteeing a stable sort.
   *
   * @private
   * @param {*} value The value to compare.
   * @param {*} other The other value to compare.
   * @returns {number} Returns the sort order indicator for `value`.
   */
  function baseCompareAscending(value, other) {
    if (value !== other) {
      var valIsNull = value === null,
          valIsUndef = value === undefined,
          valIsReflexive = value === value;

      var othIsNull = other === null,
          othIsUndef = other === undefined,
          othIsReflexive = other === other;

      if ((value > other && !othIsNull) || !valIsReflexive ||
          (valIsNull && !othIsUndef && othIsReflexive) ||
          (valIsUndef && othIsReflexive)) {
        return 1;
      }
      if ((value < other && !valIsNull) || !othIsReflexive ||
          (othIsNull && !valIsUndef && valIsReflexive) ||
          (othIsUndef && valIsReflexive)) {
        return -1;
      }
    }
    return 0;
  }

  /**
   * The base implementation of `_.findIndex` and `_.findLastIndex` without
   * support for callback shorthands and `this` binding.
   *
   * @private
   * @param {Array} array The array to search.
   * @param {Function} predicate The function invoked per iteration.
   * @param {boolean} [fromRight] Specify iterating from right to left.
   * @returns {number} Returns the index of the matched value, else `-1`.
   */
  function baseFindIndex(array, predicate, fromRight) {
    var length = array.length,
        index = fromRight ? length : -1;

    while ((fromRight ? index-- : ++index < length)) {
      if (predicate(array[index], index, array)) {
        return index;
      }
    }
    return -1;
  }

  /**
   * The base implementation of `_.indexOf` without support for binary searches.
   *
   * @private
   * @param {Array} array The array to search.
   * @param {*} value The value to search for.
   * @param {number} fromIndex The index to search from.
   * @returns {number} Returns the index of the matched value, else `-1`.
   */
  function baseIndexOf(array, value, fromIndex) {
    if (value !== value) {
      return indexOfNaN(array, fromIndex);
    }
    var index = fromIndex - 1,
        length = array.length;

    while (++index < length) {
      if (array[index] === value) {
        return index;
      }
    }
    return -1;
  }

  /**
   * The base implementation of `_.isFunction` without support for environments
   * with incorrect `typeof` results.
   *
   * @private
   * @param {*} value The value to check.
   * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.
   */
  function baseIsFunction(value) {
    // Avoid a Chakra JIT bug in compatibility modes of IE 11.
    // See https://github.com/jashkenas/underscore/issues/1621 for more details.
    return typeof value == 'function' || false;
  }

  /**
   * Converts `value` to a string if it's not one. An empty string is returned
   * for `null` or `undefined` values.
   *
   * @private
   * @param {*} value The value to process.
   * @returns {string} Returns the string.
   */
  function baseToString(value) {
    return value == null ? '' : (value + '');
  }

  /**
   * Used by `_.trim` and `_.trimLeft` to get the index of the first character
   * of `string` that is not found in `chars`.
   *
   * @private
   * @param {string} string The string to inspect.
   * @param {string} chars The characters to find.
   * @returns {number} Returns the index of the first character not found in `chars`.
   */
  function charsLeftIndex(string, chars) {
    var index = -1,
        length = string.length;

    while (++index < length && chars.indexOf(string.charAt(index)) > -1) {}
    return index;
  }

  /**
   * Used by `_.trim` and `_.trimRight` to get the index of the last character
   * of `string` that is not found in `chars`.
   *
   * @private
   * @param {string} string The string to inspect.
   * @param {string} chars The characters to find.
   * @returns {number} Returns the index of the last character not found in `chars`.
   */
  function charsRightIndex(string, chars) {
    var index = string.length;

    while (index-- && chars.indexOf(string.charAt(index)) > -1) {}
    return index;
  }

  /**
   * Used by `_.sortBy` to compare transformed elements of a collection and stable
   * sort them in ascending order.
   *
   * @private
   * @param {Object} object The object to compare.
   * @param {Object} other The other object to compare.
   * @returns {number} Returns the sort order indicator for `object`.
   */
  function compareAscending(object, other) {
    return baseCompareAscending(object.criteria, other.criteria) || (object.index - other.index);
  }

  /**
   * Used by `_.sortByOrder` to compare multiple properties of a value to another
   * and stable sort them.
   *
   * If `orders` is unspecified, all valuess are sorted in ascending order. Otherwise,
   * a value is sorted in ascending order if its corresponding order is "asc", and
   * descending if "desc".
   *
   * @private
   * @param {Object} object The object to compare.
   * @param {Object} other The other object to compare.
   * @param {boolean[]} orders The order to sort by for each property.
   * @returns {number} Returns the sort order indicator for `object`.
   */
  function compareMultiple(object, other, orders) {
    var index = -1,
        objCriteria = object.criteria,
        othCriteria = other.criteria,
        length = objCriteria.length,
        ordersLength = orders.length;

    while (++index < length) {
      var result = baseCompareAscending(objCriteria[index], othCriteria[index]);
      if (result) {
        if (index >= ordersLength) {
          return result;
        }
        var order = orders[index];
        return result * ((order === 'asc' || order === true) ? 1 : -1);
      }
    }
    // Fixes an `Array#sort` bug in the JS engine embedded in Adobe applications
    // that causes it, under certain circumstances, to provide the same value for
    // `object` and `other`. See https://github.com/jashkenas/underscore/pull/1247
    // for more details.
    //
    // This also ensures a stable sort in V8 and other engines.
    // See https://code.google.com/p/v8/issues/detail?id=90 for more details.
    return object.index - other.index;
  }

  /**
   * Used by `_.deburr` to convert latin-1 supplementary letters to basic latin letters.
   *
   * @private
   * @param {string} letter The matched letter to deburr.
   * @returns {string} Returns the deburred letter.
   */
  function deburrLetter(letter) {
    return deburredLetters[letter];
  }

  /**
   * Used by `_.escape` to convert characters to HTML entities.
   *
   * @private
   * @param {string} chr The matched character to escape.
   * @returns {string} Returns the escaped character.
   */
  function escapeHtmlChar(chr) {
    return htmlEscapes[chr];
  }

  /**
   * Used by `_.escapeRegExp` to escape characters for inclusion in compiled regexes.
   *
   * @private
   * @param {string} chr The matched character to escape.
   * @param {string} leadingChar The capture group for a leading character.
   * @param {string} whitespaceChar The capture group for a whitespace character.
   * @returns {string} Returns the escaped character.
   */
  function escapeRegExpChar(chr, leadingChar, whitespaceChar) {
    if (leadingChar) {
      chr = regexpEscapes[chr];
    } else if (whitespaceChar) {
      chr = stringEscapes[chr];
    }
    return '\\' + chr;
  }

  /**
   * Used by `_.template` to escape characters for inclusion in compiled string literals.
   *
   * @private
   * @param {string} chr The matched character to escape.
   * @returns {string} Returns the escaped character.
   */
  function escapeStringChar(chr) {
    return '\\' + stringEscapes[chr];
  }

  /**
   * Gets the index at which the first occurrence of `NaN` is found in `array`.
   *
   * @private
   * @param {Array} array The array to search.
   * @param {number} fromIndex The index to search from.
   * @param {boolean} [fromRight] Specify iterating from right to left.
   * @returns {number} Returns the index of the matched `NaN`, else `-1`.
   */
  function indexOfNaN(array, fromIndex, fromRight) {
    var length = array.length,
        index = fromIndex + (fromRight ? 0 : -1);

    while ((fromRight ? index-- : ++index < length)) {
      var other = array[index];
      if (other !== other) {
        return index;
      }
    }
    return -1;
  }

  /**
   * Checks if `value` is object-like.
   *
   * @private
   * @param {*} value The value to check.
   * @returns {boolean} Returns `true` if `value` is object-like, else `false`.
   */
  function isObjectLike(value) {
    return !!value && typeof value == 'object';
  }

  /**
   * Used by `trimmedLeftIndex` and `trimmedRightIndex` to determine if a
   * character code is whitespace.
   *
   * @private
   * @param {number} charCode The character code to inspect.
   * @returns {boolean} Returns `true` if `charCode` is whitespace, else `false`.
   */
  function isSpace(charCode) {
    return ((charCode <= 160 && (charCode >= 9 && charCode <= 13) || charCode == 32 || charCode == 160) || charCode == 5760 || charCode == 6158 ||
      (charCode >= 8192 && (charCode <= 8202 || charCode == 8232 || charCode == 8233 || charCode == 8239 || charCode == 8287 || charCode == 12288 || charCode == 65279)));
  }

  /**
   * Replaces all `placeholder` elements in `array` with an internal placeholder
   * and returns an array of their indexes.
   *
   * @private
   * @param {Array} array The array to modify.
   * @param {*} placeholder The placeholder to replace.
   * @returns {Array} Returns the new array of placeholder indexes.
   */
  function replaceHolders(array, placeholder) {
    var index = -1,
        length = array.length,
        resIndex = -1,
        result = [];

    while (++index < length) {
      if (array[index] === placeholder) {
        array[index] = PLACEHOLDER;
        result[++resIndex] = index;
      }
    }
    return result;
  }

  /**
   * An implementation of `_.uniq` optimized for sorted arrays without support
   * for callback shorthands and `this` binding.
   *
   * @private
   * @param {Array} array The array to inspect.
   * @param {Function} [iteratee] The function invoked per iteration.
   * @returns {Array} Returns the new duplicate-value-free array.
   */
  function sortedUniq(array, iteratee) {
    var seen,
        index = -1,
        length = array.length,
        resIndex = -1,
        result = [];

    while (++index < length) {
      var value = array[index],
          computed = iteratee ? iteratee(value, index, array) : value;

      if (!index || seen !== computed) {
        seen = computed;
        result[++resIndex] = value;
      }
    }
    return result;
  }

  /**
   * Used by `_.trim` and `_.trimLeft` to get the index of the first non-whitespace
   * character of `string`.
   *
   * @private
   * @param {string} string The string to inspect.
   * @returns {number} Returns the index of the first non-whitespace character.
   */
  function trimmedLeftIndex(string) {
    var index = -1,
        length = string.length;

    while (++index < length && isSpace(string.charCodeAt(index))) {}
    return index;
  }

  /**
   * Used by `_.trim` and `_.trimRight` to get the index of the last non-whitespace
   * character of `string`.
   *
   * @private
   * @param {string} string The string to inspect.
   * @returns {number} Returns the index of the last non-whitespace character.
   */
  function trimmedRightIndex(string) {
    var index = string.length;

    while (index-- && isSpace(string.charCodeAt(index))) {}
    return index;
  }

  /**
   * Used by `_.unescape` to convert HTML entities to characters.
   *
   * @private
   * @param {string} chr The matched character to unescape.
   * @returns {string} Returns the unescaped character.
   */
  function unescapeHtmlChar(chr) {
    return htmlUnescapes[chr];
  }

  /*--------------------------------------------------------------------------*/

  /**
   * Create a new pristine `lodash` function using the given `context` object.
   *
   * @static
   * @memberOf _
   * @category Utility
   * @param {Object} [context=root] The context object.
   * @returns {Function} Returns a new `lodash` function.
   * @example
   *
   * _.mixin({ 'foo': _.constant('foo') });
   *
   * var lodash = _.runInContext();
   * lodash.mixin({ 'bar': lodash.constant('bar') });
   *
   * _.isFunction(_.foo);
   * // => true
   * _.isFunction(_.bar);
   * // => false
   *
   * lodash.isFunction(lodash.foo);
   * // => false
   * lodash.isFunction(lodash.bar);
   * // => true
   *
   * // using `context` to mock `Date#getTime` use in `_.now`
   * var mock = _.runInContext({
   *   'Date': function() {
   *     return { 'getTime': getTimeMock };
   *   }
   * });
   *
   * // or creating a suped-up `defer` in Node.js
   * var defer = _.runInContext({ 'setTimeout': setImmediate }).defer;
   */
  function runInContext(context) {
    // Avoid issues with some ES3 environments that attempt to use values, named
    // after built-in constructors like `Object`, for the creation of literals.
    // ES5 clears this up by stating that literals must use built-in constructors.
    // See https://es5.github.io/#x11.1.5 for more details.
    context = context ? _.defaults(root.Object(), context, _.pick(root, contextProps)) : root;

    /** Native constructor references. */
    var Array = context.Array,
        Date = context.Date,
        Error = context.Error,
        Function = context.Function,
        Math = context.Math,
        Number = context.Number,
        Object = context.Object,
        RegExp = context.RegExp,
        String = context.String,
        TypeError = context.TypeError;

    /** Used for native method references. */
    var arrayProto = Array.prototype,
        objectProto = Object.prototype,
        stringProto = String.prototype;

    /** Used to resolve the decompiled source of functions. */
    var fnToString = Function.prototype.toString;

    /** Used to check objects for own properties. */
    var hasOwnProperty = objectProto.hasOwnProperty;

    /** Used to generate unique IDs. */
    var idCounter = 0;

    /**
     * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)
     * of values.
     */
    var objToString = objectProto.toString;

    /** Used to restore the original `_` reference in `_.noConflict`. */
    var oldDash = root._;

    /** Used to detect if a method is native. */
    var reIsNative = RegExp('^' +
      fnToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g, '\\$&')
      .replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, '$1.*?') + '$'
    );

    /** Native method references. */
    var ArrayBuffer = context.ArrayBuffer,
        clearTimeout = context.clearTimeout,
        parseFloat = context.parseFloat,
        pow = Math.pow,
        propertyIsEnumerable = objectProto.propertyIsEnumerable,
        Set = getNative(context, 'Set'),
        setTimeout = context.setTimeout,
        splice = arrayProto.splice,
        Uint8Array = context.Uint8Array,
        WeakMap = getNative(context, 'WeakMap');

    /* Native method references for those with the same name as other `lodash` methods. */
    var nativeCeil = Math.ceil,
        nativeCreate = getNative(Object, 'create'),
        nativeFloor = Math.floor,
        nativeIsArray = getNative(Array, 'isArray'),
        nativeIsFinite = context.isFinite,
        nativeKeys = getNative(Object, 'keys'),
        nativeMax = Math.max,
        nativeMin = Math.min,
        nativeNow = getNative(Date, 'now'),
        nativeParseInt = context.parseInt,
        nativeRandom = Math.random;

    /** Used as references for `-Infinity` and `Infinity`. */
    var NEGATIVE_INFINITY = Number.NEGATIVE_INFINITY,
        POSITIVE_INFINITY = Number.POSITIVE_INFINITY;

    /** Used as references for the maximum length and index of an array. */
    var MAX_ARRAY_LENGTH = 4294967295,
        MAX_ARRAY_INDEX = MAX_ARRAY_LENGTH - 1,
        HALF_MAX_ARRAY_LENGTH = MAX_ARRAY_LENGTH >>> 1;

    /**
     * Used as the [maximum length](http://ecma-international.org/ecma-262/6.0/#sec-number.max_safe_integer)
     * of an array-like value.
     */
    var MAX_SAFE_INTEGER = 9007199254740991;

    /** Used to store function metadata. */
    var metaMap = WeakMap && new WeakMap;

    /** Used to lookup unminified function names. */
    var realNames = {};

    /*------------------------------------------------------------------------*/

    /**
     * Creates a `lodash` object which wraps `value` to enable implicit chaining.
     * Methods that operate on and return arrays, collections, and functions can
     * be chained together. Methods that retrieve a single value or may return a
     * primitive value will automatically end the chain returning the unwrapped
     * value. Explicit chaining may be enabled using `_.chain`. The execution of
     * chained methods is lazy, that is, execution is deferred until `_#value`
     * is implicitly or explicitly called.
     *
     * Lazy evaluation allows several methods to support shortcut fusion. Shortcut
     * fusion is an optimization strategy which merge iteratee calls; this can help
     * to avoid the creation of intermediate data structures and greatly reduce the
     * number of iteratee executions.
     *
     * Chaining is supported in custom builds as long as the `_#value` method is
     * directly or indirectly included in the build.
     *
     * In addition to lodash methods, wrappers have `Array` and `String` methods.
     *
     * The wrapper `Array` methods are:
     * `concat`, `join`, `pop`, `push`, `reverse`, `shift`, `slice`, `sort`,
     * `splice`, and `unshift`
     *
     * The wrapper `String` methods are:
     * `replace` and `split`
     *
     * The wrapper methods that support shortcut fusion are:
     * `compact`, `drop`, `dropRight`, `dropRightWhile`, `dropWhile`, `filter`,
     * `first`, `initial`, `last`, `map`, `pluck`, `reject`, `rest`, `reverse`,
     * `slice`, `take`, `takeRight`, `takeRightWhile`, `takeWhile`, `toArray`,
     * and `where`
     *
     * The chainable wrapper methods are:
     * `after`, `ary`, `assign`, `at`, `before`, `bind`, `bindAll`, `bindKey`,
     * `callback`, `chain`, `chunk`, `commit`, `compact`, `concat`, `constant`,
     * `countBy`, `create`, `curry`, `debounce`, `defaults`, `defaultsDeep`,
     * `defer`, `delay`, `difference`, `drop`, `dropRight`, `dropRightWhile`,
     * `dropWhile`, `fill`, `filter`, `flatten`, `flattenDeep`, `flow`, `flowRight`,
     * `forEach`, `forEachRight`, `forIn`, `forInRight`, `forOwn`, `forOwnRight`,
     * `functions`, `groupBy`, `indexBy`, `initial`, `intersection`, `invert`,
     * `invoke`, `keys`, `keysIn`, `map`, `mapKeys`, `mapValues`, `matches`,
     * `matchesProperty`, `memoize`, `merge`, `method`, `methodOf`, `mixin`,
     * `modArgs`, `negate`, `omit`, `once`, `pairs`, `partial`, `partialRight`,
     * `partition`, `pick`, `plant`, `pluck`, `property`, `propertyOf`, `pull`,
     * `pullAt`, `push`, `range`, `rearg`, `reject`, `remove`, `rest`, `restParam`,
     * `reverse`, `set`, `shuffle`, `slice`, `sort`, `sortBy`, `sortByAll`,
     * `sortByOrder`, `splice`, `spread`, `take`, `takeRight`, `takeRightWhile`,
     * `takeWhile`, `tap`, `throttle`, `thru`, `times`, `toArray`, `toPlainObject`,
     * `transform`, `union`, `uniq`, `unshift`, `unzip`, `unzipWith`, `values`,
     * `valuesIn`, `where`, `without`, `wrap`, `xor`, `zip`, `zipObject`, `zipWith`
     *
     * The wrapper methods that are **not** chainable by default are:
     * `add`, `attempt`, `camelCase`, `capitalize`, `ceil`, `clone`, `cloneDeep`,
     * `deburr`, `endsWith`, `escape`, `escapeRegExp`, `every`, `find`, `findIndex`,
     * `findKey`, `findLast`, `findLastIndex`, `findLastKey`, `findWhere`, `first`,
     * `floor`, `get`, `gt`, `gte`, `has`, `identity`, `includes`, `indexOf`,
     * `inRange`, `isArguments`, `isArray`, `isBoolean`, `isDate`, `isElement`,
     * `isEmpty`, `isEqual`, `isError`, `isFinite` `isFunction`, `isMatch`,
     * `isNative`, `isNaN`, `isNull`, `isNumber`, `isObject`, `isPlainObject`,
     * `isRegExp`, `isString`, `isUndefined`, `isTypedArray`, `join`, `kebabCase`,
     * `last`, `lastIndexOf`, `lt`, `lte`, `max`, `min`, `noConflict`, `noop`,
     * `now`, `pad`, `padLeft`, `padRight`, `parseInt`, `pop`, `random`, `reduce`,
     * `reduceRight`, `repeat`, `result`, `round`, `runInContext`, `shift`, `size`,
     * `snakeCase`, `some`, `sortedIndex`, `sortedLastIndex`, `startCase`,
     * `startsWith`, `sum`, `template`, `trim`, `trimLeft`, `trimRight`, `trunc`,
     * `unescape`, `uniqueId`, `value`, and `words`
     *
     * The wrapper method `sample` will return a wrapped value when `n` is provided,
     * otherwise an unwrapped value is returned.
     *
     * @name _
     * @constructor
     * @category Chain
     * @param {*} value The value to wrap in a `lodash` instance.
     * @returns {Object} Returns the new `lodash` wrapper instance.
     * @example
     *
     * var wrapped = _([1, 2, 3]);
     *
     * // returns an unwrapped value
     * wrapped.reduce(function(total, n) {
     *   return total + n;
     * });
     * // => 6
     *
     * // returns a wrapped value
     * var squares = wrapped.map(function(n) {
     *   return n * n;
     * });
     *
     * _.isArray(squares);
     * // => false
     *
     * _.isArray(squares.value());
     * // => true
     */
    function lodash(value) {
      if (isObjectLike(value) && !isArray(value) && !(value instanceof LazyWrapper)) {
        if (value instanceof LodashWrapper) {
          return value;
        }
        if (hasOwnProperty.call(value, '__chain__') && hasOwnProperty.call(value, '__wrapped__')) {
          return wrapperClone(value);
        }
      }
      return new LodashWrapper(value);
    }

    /**
     * The function whose prototype all chaining wrappers inherit from.
     *
     * @private
     */
    function baseLodash() {
      // No operation performed.
    }

    /**
     * The base constructor for creating `lodash` wrapper objects.
     *
     * @private
     * @param {*} value The value to wrap.
     * @param {boolean} [chainAll] Enable chaining for all wrapper methods.
     * @param {Array} [actions=[]] Actions to peform to resolve the unwrapped value.
     */
    function LodashWrapper(value, chainAll, actions) {
      this.__wrapped__ = value;
      this.__actions__ = actions || [];
      this.__chain__ = !!chainAll;
    }

    /**
     * An object environment feature flags.
     *
     * @static
     * @memberOf _
     * @type Object
     */
    var support = lodash.support = {};

    /**
     * By default, the template delimiters used by lodash are like those in
     * embedded Ruby (ERB). Change the following template settings to use
     * alternative delimiters.
     *
     * @static
     * @memberOf _
     * @type Object
     */
    lodash.templateSettings = {

      /**
       * Used to detect `data` property values to be HTML-escaped.
       *
       * @memberOf _.templateSettings
       * @type RegExp
       */
      'escape': reEscape,

      /**
       * Used to detect code to be evaluated.
       *
       * @memberOf _.templateSettings
       * @type RegExp
       */
      'evaluate': reEvaluate,

      /**
       * Used to detect `data` property values to inject.
       *
       * @memberOf _.templateSettings
       * @type RegExp
       */
      'interpolate': reInterpolate,

      /**
       * Used to reference the data object in the template text.
       *
       * @memberOf _.templateSettings
       * @type string
       */
      'variable': '',

      /**
       * Used to import variables into the compiled template.
       *
       * @memberOf _.templateSettings
       * @type Object
       */
      'imports': {

        /**
         * A reference to the `lodash` function.
         *
         * @memberOf _.templateSettings.imports
         * @type Function
         */
        '_': lodash
      }
    };

    /*------------------------------------------------------------------------*/

    /**
     * Creates a lazy wrapper object which wraps `value` to enable lazy evaluation.
     *
     * @private
     * @param {*} value The value to wrap.
     */
    function LazyWrapper(value) {
      this.__wrapped__ = value;
      this.__actions__ = [];
      this.__dir__ = 1;
      this.__filtered__ = false;
      this.__iteratees__ = [];
      this.__takeCount__ = POSITIVE_INFINITY;
      this.__views__ = [];
    }

    /**
     * Creates a clone of the lazy wrapper object.
     *
     * @private
     * @name clone
     * @memberOf LazyWrapper
     * @returns {Object} Returns the cloned `LazyWrapper` object.
     */
    function lazyClone() {
      var result = new LazyWrapper(this.__wrapped__);
      result.__actions__ = arrayCopy(this.__actions__);
      result.__dir__ = this.__dir__;
      result.__filtered__ = this.__filtered__;
      result.__iteratees__ = arrayCopy(this.__iteratees__);
      result.__takeCount__ = this.__takeCount__;
      result.__views__ = arrayCopy(this.__views__);
      return result;
    }

    /**
     * Reverses the direction of lazy iteration.
     *
     * @private
     * @name reverse
     * @memberOf LazyWrapper
     * @returns {Object} Returns the new reversed `LazyWrapper` object.
     */
    function lazyReverse() {
      if (this.__filtered__) {
        var result = new LazyWrapper(this);
        result.__dir__ = -1;
        result.__filtered__ = true;
      } else {
        result = this.clone();
        result.__dir__ *= -1;
      }
      return result;
    }

    /**
     * Extracts the unwrapped value from its lazy wrapper.
     *
     * @private
     * @name value
     * @memberOf LazyWrapper
     * @returns {*} Returns the unwrapped value.
     */
    function lazyValue() {
      var array = this.__wrapped__.value(),
          dir = this.__dir__,
          isArr = isArray(array),
          isRight = dir < 0,
          arrLength = isArr ? array.length : 0,
          view = getView(0, arrLength, this.__views__),
          start = view.start,
          end = view.end,
          length = end - start,
          index = isRight ? end : (start - 1),
          iteratees = this.__iteratees__,
          iterLength = iteratees.length,
          resIndex = 0,
          takeCount = nativeMin(length, this.__takeCount__);

      if (!isArr || arrLength < LARGE_ARRAY_SIZE || (arrLength == length && takeCount == length)) {
        return baseWrapperValue((isRight && isArr) ? array.reverse() : array, this.__actions__);
      }
      var result = [];

      outer:
      while (length-- && resIndex < takeCount) {
        index += dir;

        var iterIndex = -1,
            value = array[index];

        while (++iterIndex < iterLength) {
          var data = iteratees[iterIndex],
              iteratee = data.iteratee,
              type = data.type,
              computed = iteratee(value);

          if (type == LAZY_MAP_FLAG) {
            value = computed;
          } else if (!computed) {
            if (type == LAZY_FILTER_FLAG) {
              continue outer;
            } else {
              break outer;
            }
          }
        }
        result[resIndex++] = value;
      }
      return result;
    }

    /*------------------------------------------------------------------------*/

    /**
     * Creates a cache object to store key/value pairs.
     *
     * @private
     * @static
     * @name Cache
     * @memberOf _.memoize
     */
    function MapCache() {
      this.__data__ = {};
    }

    /**
     * Removes `key` and its value from the cache.
     *
     * @private
     * @name delete
     * @memberOf _.memoize.Cache
     * @param {string} key The key of the value to remove.
     * @returns {boolean} Returns `true` if the entry was removed successfully, else `false`.
     */
    function mapDelete(key) {
      return this.has(key) && delete this.__data__[key];
    }

    /**
     * Gets the cached value for `key`.
     *
     * @private
     * @name get
     * @memberOf _.memoize.Cache
     * @param {string} key The key of the value to get.
     * @returns {*} Returns the cached value.
     */
    function mapGet(key) {
      return key == '__proto__' ? undefined : this.__data__[key];
    }

    /**
     * Checks if a cached value for `key` exists.
     *
     * @private
     * @name has
     * @memberOf _.memoize.Cache
     * @param {string} key The key of the entry to check.
     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
     */
    function mapHas(key) {
      return key != '__proto__' && hasOwnProperty.call(this.__data__, key);
    }

    /**
     * Sets `value` to `key` of the cache.
     *
     * @private
     * @name set
     * @memberOf _.memoize.Cache
     * @param {string} key The key of the value to cache.
     * @param {*} value The value to cache.
     * @returns {Object} Returns the cache object.
     */
    function mapSet(key, value) {
      if (key != '__proto__') {
        this.__data__[key] = value;
      }
      return this;
    }

    /*------------------------------------------------------------------------*/

    /**
     *
     * Creates a cache object to store unique values.
     *
     * @private
     * @param {Array} [values] The values to cache.
     */
    function SetCache(values) {
      var length = values ? values.length : 0;

      this.data = { 'hash': nativeCreate(null), 'set': new Set };
      while (length--) {
        this.push(values[length]);
      }
    }

    /**
     * Checks if `value` is in `cache` mimicking the return signature of
     * `_.indexOf` by returning `0` if the value is found, else `-1`.
     *
     * @private
     * @param {Object} cache The cache to search.
     * @param {*} value The value to search for.
     * @returns {number} Returns `0` if `value` is found, else `-1`.
     */
    function cacheIndexOf(cache, value) {
      var data = cache.data,
          result = (typeof value == 'string' || isObject(value)) ? data.set.has(value) : data.hash[value];

      return result ? 0 : -1;
    }

    /**
     * Adds `value` to the cache.
     *
     * @private
     * @name push
     * @memberOf SetCache
     * @param {*} value The value to cache.
     */
    function cachePush(value) {
      var data = this.data;
      if (typeof value == 'string' || isObject(value)) {
        data.set.add(value);
      } else {
        data.hash[value] = true;
      }
    }

    /*------------------------------------------------------------------------*/

    /**
     * Creates a new array joining `array` with `other`.
     *
     * @private
     * @param {Array} array The array to join.
     * @param {Array} other The other array to join.
     * @returns {Array} Returns the new concatenated array.
     */
    function arrayConcat(array, other) {
      var index = -1,
          length = array.length,
          othIndex = -1,
          othLength = other.length,
          result = Array(length + othLength);

      while (++index < length) {
        result[index] = array[index];
      }
      while (++othIndex < othLength) {
        result[index++] = other[othIndex];
      }
      return result;
    }

    /**
     * Copies the values of `source` to `array`.
     *
     * @private
     * @param {Array} source The array to copy values from.
     * @param {Array} [array=[]] The array to copy values to.
     * @returns {Array} Returns `array`.
     */
    function arrayCopy(source, array) {
      var index = -1,
          length = source.length;

      array || (array = Array(length));
      while (++index < length) {
        array[index] = source[index];
      }
      return array;
    }

    /**
     * A specialized version of `_.forEach` for arrays without support for callback
     * shorthands and `this` binding.
     *
     * @private
     * @param {Array} array The array to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @returns {Array} Returns `array`.
     */
    function arrayEach(array, iteratee) {
      var index = -1,
          length = array.length;

      while (++index < length) {
        if (iteratee(array[index], index, array) === false) {
          break;
        }
      }
      return array;
    }

    /**
     * A specialized version of `_.forEachRight` for arrays without support for
     * callback shorthands and `this` binding.
     *
     * @private
     * @param {Array} array The array to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @returns {Array} Returns `array`.
     */
    function arrayEachRight(array, iteratee) {
      var length = array.length;

      while (length--) {
        if (iteratee(array[length], length, array) === false) {
          break;
        }
      }
      return array;
    }

    /**
     * A specialized version of `_.every` for arrays without support for callback
     * shorthands and `this` binding.
     *
     * @private
     * @param {Array} array The array to iterate over.
     * @param {Function} predicate The function invoked per iteration.
     * @returns {boolean} Returns `true` if all elements pass the predicate check,
     *  else `false`.
     */
    function arrayEvery(array, predicate) {
      var index = -1,
          length = array.length;

      while (++index < length) {
        if (!predicate(array[index], index, array)) {
          return false;
        }
      }
      return true;
    }

    /**
     * A specialized version of `baseExtremum` for arrays which invokes `iteratee`
     * with one argument: (value).
     *
     * @private
     * @param {Array} array The array to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @param {Function} comparator The function used to compare values.
     * @param {*} exValue The initial extremum value.
     * @returns {*} Returns the extremum value.
     */
    function arrayExtremum(array, iteratee, comparator, exValue) {
      var index = -1,
          length = array.length,
          computed = exValue,
          result = computed;

      while (++index < length) {
        var value = array[index],
            current = +iteratee(value);

        if (comparator(current, computed)) {
          computed = current;
          result = value;
        }
      }
      return result;
    }

    /**
     * A specialized version of `_.filter` for arrays without support for callback
     * shorthands and `this` binding.
     *
     * @private
     * @param {Array} array The array to iterate over.
     * @param {Function} predicate The function invoked per iteration.
     * @returns {Array} Returns the new filtered array.
     */
    function arrayFilter(array, predicate) {
      var index = -1,
          length = array.length,
          resIndex = -1,
          result = [];

      while (++index < length) {
        var value = array[index];
        if (predicate(value, index, array)) {
          result[++resIndex] = value;
        }
      }
      return result;
    }

    /**
     * A specialized version of `_.map` for arrays without support for callback
     * shorthands and `this` binding.
     *
     * @private
     * @param {Array} array The array to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @returns {Array} Returns the new mapped array.
     */
    function arrayMap(array, iteratee) {
      var index = -1,
          length = array.length,
          result = Array(length);

      while (++index < length) {
        result[index] = iteratee(array[index], index, array);
      }
      return result;
    }

    /**
     * Appends the elements of `values` to `array`.
     *
     * @private
     * @param {Array} array The array to modify.
     * @param {Array} values The values to append.
     * @returns {Array} Returns `array`.
     */
    function arrayPush(array, values) {
      var index = -1,
          length = values.length,
          offset = array.length;

      while (++index < length) {
        array[offset + index] = values[index];
      }
      return array;
    }

    /**
     * A specialized version of `_.reduce` for arrays without support for callback
     * shorthands and `this` binding.
     *
     * @private
     * @param {Array} array The array to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @param {*} [accumulator] The initial value.
     * @param {boolean} [initFromArray] Specify using the first element of `array`
     *  as the initial value.
     * @returns {*} Returns the accumulated value.
     */
    function arrayReduce(array, iteratee, accumulator, initFromArray) {
      var index = -1,
          length = array.length;

      if (initFromArray && length) {
        accumulator = array[++index];
      }
      while (++index < length) {
        accumulator = iteratee(accumulator, array[index], index, array);
      }
      return accumulator;
    }

    /**
     * A specialized version of `_.reduceRight` for arrays without support for
     * callback shorthands and `this` binding.
     *
     * @private
     * @param {Array} array The array to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @param {*} [accumulator] The initial value.
     * @param {boolean} [initFromArray] Specify using the last element of `array`
     *  as the initial value.
     * @returns {*} Returns the accumulated value.
     */
    function arrayReduceRight(array, iteratee, accumulator, initFromArray) {
      var length = array.length;
      if (initFromArray && length) {
        accumulator = array[--length];
      }
      while (length--) {
        accumulator = iteratee(accumulator, array[length], length, array);
      }
      return accumulator;
    }

    /**
     * A specialized version of `_.some` for arrays without support for callback
     * shorthands and `this` binding.
     *
     * @private
     * @param {Array} array The array to iterate over.
     * @param {Function} predicate The function invoked per iteration.
     * @returns {boolean} Returns `true` if any element passes the predicate check,
     *  else `false`.
     */
    function arraySome(array, predicate) {
      var index = -1,
          length = array.length;

      while (++index < length) {
        if (predicate(array[index], index, array)) {
          return true;
        }
      }
      return false;
    }

    /**
     * A specialized version of `_.sum` for arrays without support for callback
     * shorthands and `this` binding..
     *
     * @private
     * @param {Array} array The array to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @returns {number} Returns the sum.
     */
    function arraySum(array, iteratee) {
      var length = array.length,
          result = 0;

      while (length--) {
        result += +iteratee(array[length]) || 0;
      }
      return result;
    }

    /**
     * Used by `_.defaults` to customize its `_.assign` use.
     *
     * @private
     * @param {*} objectValue The destination object property value.
     * @param {*} sourceValue The source object property value.
     * @returns {*} Returns the value to assign to the destination object.
     */
    function assignDefaults(objectValue, sourceValue) {
      return objectValue === undefined ? sourceValue : objectValue;
    }

    /**
     * Used by `_.template` to customize its `_.assign` use.
     *
     * **Note:** This function is like `assignDefaults` except that it ignores
     * inherited property values when checking if a property is `undefined`.
     *
     * @private
     * @param {*} objectValue The destination object property value.
     * @param {*} sourceValue The source object property value.
     * @param {string} key The key associated with the object and source values.
     * @param {Object} object The destination object.
     * @returns {*} Returns the value to assign to the destination object.
     */
    function assignOwnDefaults(objectValue, sourceValue, key, object) {
      return (objectValue === undefined || !hasOwnProperty.call(object, key))
        ? sourceValue
        : objectValue;
    }

    /**
     * A specialized version of `_.assign` for customizing assigned values without
     * support for argument juggling, multiple sources, and `this` binding `customizer`
     * functions.
     *
     * @private
     * @param {Object} object The destination object.
     * @param {Object} source The source object.
     * @param {Function} customizer The function to customize assigned values.
     * @returns {Object} Returns `object`.
     */
    function assignWith(object, source, customizer) {
      var index = -1,
          props = keys(source),
          length = props.length;

      while (++index < length) {
        var key = props[index],
            value = object[key],
            result = customizer(value, source[key], key, object, source);

        if ((result === result ? (result !== value) : (value === value)) ||
            (value === undefined && !(key in object))) {
          object[key] = result;
        }
      }
      return object;
    }

    /**
     * The base implementation of `_.assign` without support for argument juggling,
     * multiple sources, and `customizer` functions.
     *
     * @private
     * @param {Object} object The destination object.
     * @param {Object} source The source object.
     * @returns {Object} Returns `object`.
     */
    function baseAssign(object, source) {
      return source == null
        ? object
        : baseCopy(source, keys(source), object);
    }

    /**
     * The base implementation of `_.at` without support for string collections
     * and individual key arguments.
     *
     * @private
     * @param {Array|Object} collection The collection to iterate over.
     * @param {number[]|string[]} props The property names or indexes of elements to pick.
     * @returns {Array} Returns the new array of picked elements.
     */
    function baseAt(collection, props) {
      var index = -1,
          isNil = collection == null,
          isArr = !isNil && isArrayLike(collection),
          length = isArr ? collection.length : 0,
          propsLength = props.length,
          result = Array(propsLength);

      while(++index < propsLength) {
        var key = props[index];
        if (isArr) {
          result[index] = isIndex(key, length) ? collection[key] : undefined;
        } else {
          result[index] = isNil ? undefined : collection[key];
        }
      }
      return result;
    }

    /**
     * Copies properties of `source` to `object`.
     *
     * @private
     * @param {Object} source The object to copy properties from.
     * @param {Array} props The property names to copy.
     * @param {Object} [object={}] The object to copy properties to.
     * @returns {Object} Returns `object`.
     */
    function baseCopy(source, props, object) {
      object || (object = {});

      var index = -1,
          length = props.length;

      while (++index < length) {
        var key = props[index];
        object[key] = source[key];
      }
      return object;
    }

    /**
     * The base implementation of `_.callback` which supports specifying the
     * number of arguments to provide to `func`.
     *
     * @private
     * @param {*} [func=_.identity] The value to convert to a callback.
     * @param {*} [thisArg] The `this` binding of `func`.
     * @param {number} [argCount] The number of arguments to provide to `func`.
     * @returns {Function} Returns the callback.
     */
    function baseCallback(func, thisArg, argCount) {
      var type = typeof func;
      if (type == 'function') {
        return thisArg === undefined
          ? func
          : bindCallback(func, thisArg, argCount);
      }
      if (func == null) {
        return identity;
      }
      if (type == 'object') {
        return baseMatches(func);
      }
      return thisArg === undefined
        ? property(func)
        : baseMatchesProperty(func, thisArg);
    }

    /**
     * The base implementation of `_.clone` without support for argument juggling
     * and `this` binding `customizer` functions.
     *
     * @private
     * @param {*} value The value to clone.
     * @param {boolean} [isDeep] Specify a deep clone.
     * @param {Function} [customizer] The function to customize cloning values.
     * @param {string} [key] The key of `value`.
     * @param {Object} [object] The object `value` belongs to.
     * @param {Array} [stackA=[]] Tracks traversed source objects.
     * @param {Array} [stackB=[]] Associates clones with source counterparts.
     * @returns {*} Returns the cloned value.
     */
    function baseClone(value, isDeep, customizer, key, object, stackA, stackB) {
      var result;
      if (customizer) {
        result = object ? customizer(value, key, object) : customizer(value);
      }
      if (result !== undefined) {
        return result;
      }
      if (!isObject(value)) {
        return value;
      }
      var isArr = isArray(value);
      if (isArr) {
        result = initCloneArray(value);
        if (!isDeep) {
          return arrayCopy(value, result);
        }
      } else {
        var tag = objToString.call(value),
            isFunc = tag == funcTag;

        if (tag == objectTag || tag == argsTag || (isFunc && !object)) {
          result = initCloneObject(isFunc ? {} : value);
          if (!isDeep) {
            return baseAssign(result, value);
          }
        } else {
          return cloneableTags[tag]
            ? initCloneByTag(value, tag, isDeep)
            : (object ? value : {});
        }
      }
      // Check for circular references and return its corresponding clone.
      stackA || (stackA = []);
      stackB || (stackB = []);

      var length = stackA.length;
      while (length--) {
        if (stackA[length] == value) {
          return stackB[length];
        }
      }
      // Add the source value to the stack of traversed objects and associate it with its clone.
      stackA.push(value);
      stackB.push(result);

      // Recursively populate clone (susceptible to call stack limits).
      (isArr ? arrayEach : baseForOwn)(value, function(subValue, key) {
        result[key] = baseClone(subValue, isDeep, customizer, key, value, stackA, stackB);
      });
      return result;
    }

    /**
     * The base implementation of `_.create` without support for assigning
     * properties to the created object.
     *
     * @private
     * @param {Object} prototype The object to inherit from.
     * @returns {Object} Returns the new object.
     */
    var baseCreate = (function() {
      function object() {}
      return function(prototype) {
        if (isObject(prototype)) {
          object.prototype = prototype;
          var result = new object;
          object.prototype = undefined;
        }
        return result || {};
      };
    }());

    /**
     * The base implementation of `_.delay` and `_.defer` which accepts an index
     * of where to slice the arguments to provide to `func`.
     *
     * @private
     * @param {Function} func The function to delay.
     * @param {number} wait The number of milliseconds to delay invocation.
     * @param {Object} args The arguments provide to `func`.
     * @returns {number} Returns the timer id.
     */
    function baseDelay(func, wait, args) {
      if (typeof func != 'function') {
        throw new TypeError(FUNC_ERROR_TEXT);
      }
      return setTimeout(function() { func.apply(undefined, args); }, wait);
    }

    /**
     * The base implementation of `_.difference` which accepts a single array
     * of values to exclude.
     *
     * @private
     * @param {Array} array The array to inspect.
     * @param {Array} values The values to exclude.
     * @returns {Array} Returns the new array of filtered values.
     */
    function baseDifference(array, values) {
      var length = array ? array.length : 0,
          result = [];

      if (!length) {
        return result;
      }
      var index = -1,
          indexOf = getIndexOf(),
          isCommon = indexOf == baseIndexOf,
          cache = (isCommon && values.length >= LARGE_ARRAY_SIZE) ? createCache(values) : null,
          valuesLength = values.length;

      if (cache) {
        indexOf = cacheIndexOf;
        isCommon = false;
        values = cache;
      }
      outer:
      while (++index < length) {
        var value = array[index];

        if (isCommon && value === value) {
          var valuesIndex = valuesLength;
          while (valuesIndex--) {
            if (values[valuesIndex] === value) {
              continue outer;
            }
          }
          result.push(value);
        }
        else if (indexOf(values, value, 0) < 0) {
          result.push(value);
        }
      }
      return result;
    }

    /**
     * The base implementation of `_.forEach` without support for callback
     * shorthands and `this` binding.
     *
     * @private
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @returns {Array|Object|string} Returns `collection`.
     */
    var baseEach = createBaseEach(baseForOwn);

    /**
     * The base implementation of `_.forEachRight` without support for callback
     * shorthands and `this` binding.
     *
     * @private
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @returns {Array|Object|string} Returns `collection`.
     */
    var baseEachRight = createBaseEach(baseForOwnRight, true);

    /**
     * The base implementation of `_.every` without support for callback
     * shorthands and `this` binding.
     *
     * @private
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} predicate The function invoked per iteration.
     * @returns {boolean} Returns `true` if all elements pass the predicate check,
     *  else `false`
     */
    function baseEvery(collection, predicate) {
      var result = true;
      baseEach(collection, function(value, index, collection) {
        result = !!predicate(value, index, collection);
        return result;
      });
      return result;
    }

    /**
     * Gets the extremum value of `collection` invoking `iteratee` for each value
     * in `collection` to generate the criterion by which the value is ranked.
     * The `iteratee` is invoked with three arguments: (value, index|key, collection).
     *
     * @private
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @param {Function} comparator The function used to compare values.
     * @param {*} exValue The initial extremum value.
     * @returns {*} Returns the extremum value.
     */
    function baseExtremum(collection, iteratee, comparator, exValue) {
      var computed = exValue,
          result = computed;

      baseEach(collection, function(value, index, collection) {
        var current = +iteratee(value, index, collection);
        if (comparator(current, computed) || (current === exValue && current === result)) {
          computed = current;
          result = value;
        }
      });
      return result;
    }

    /**
     * The base implementation of `_.fill` without an iteratee call guard.
     *
     * @private
     * @param {Array} array The array to fill.
     * @param {*} value The value to fill `array` with.
     * @param {number} [start=0] The start position.
     * @param {number} [end=array.length] The end position.
     * @returns {Array} Returns `array`.
     */
    function baseFill(array, value, start, end) {
      var length = array.length;

      start = start == null ? 0 : (+start || 0);
      if (start < 0) {
        start = -start > length ? 0 : (length + start);
      }
      end = (end === undefined || end > length) ? length : (+end || 0);
      if (end < 0) {
        end += length;
      }
      length = start > end ? 0 : (end >>> 0);
      start >>>= 0;

      while (start < length) {
        array[start++] = value;
      }
      return array;
    }

    /**
     * The base implementation of `_.filter` without support for callback
     * shorthands and `this` binding.
     *
     * @private
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} predicate The function invoked per iteration.
     * @returns {Array} Returns the new filtered array.
     */
    function baseFilter(collection, predicate) {
      var result = [];
      baseEach(collection, function(value, index, collection) {
        if (predicate(value, index, collection)) {
          result.push(value);
        }
      });
      return result;
    }

    /**
     * The base implementation of `_.find`, `_.findLast`, `_.findKey`, and `_.findLastKey`,
     * without support for callback shorthands and `this` binding, which iterates
     * over `collection` using the provided `eachFunc`.
     *
     * @private
     * @param {Array|Object|string} collection The collection to search.
     * @param {Function} predicate The function invoked per iteration.
     * @param {Function} eachFunc The function to iterate over `collection`.
     * @param {boolean} [retKey] Specify returning the key of the found element
     *  instead of the element itself.
     * @returns {*} Returns the found element or its key, else `undefined`.
     */
    function baseFind(collection, predicate, eachFunc, retKey) {
      var result;
      eachFunc(collection, function(value, key, collection) {
        if (predicate(value, key, collection)) {
          result = retKey ? key : value;
          return false;
        }
      });
      return result;
    }

    /**
     * The base implementation of `_.flatten` with added support for restricting
     * flattening and specifying the start index.
     *
     * @private
     * @param {Array} array The array to flatten.
     * @param {boolean} [isDeep] Specify a deep flatten.
     * @param {boolean} [isStrict] Restrict flattening to arrays-like objects.
     * @param {Array} [result=[]] The initial result value.
     * @returns {Array} Returns the new flattened array.
     */
    function baseFlatten(array, isDeep, isStrict, result) {
      result || (result = []);

      var index = -1,
          length = array.length;

      while (++index < length) {
        var value = array[index];
        if (isObjectLike(value) && isArrayLike(value) &&
            (isStrict || isArray(value) || isArguments(value))) {
          if (isDeep) {
            // Recursively flatten arrays (susceptible to call stack limits).
            baseFlatten(value, isDeep, isStrict, result);
          } else {
            arrayPush(result, value);
          }
        } else if (!isStrict) {
          result[result.length] = value;
        }
      }
      return result;
    }

    /**
     * The base implementation of `baseForIn` and `baseForOwn` which iterates
     * over `object` properties returned by `keysFunc` invoking `iteratee` for
     * each property. Iteratee functions may exit iteration early by explicitly
     * returning `false`.
     *
     * @private
     * @param {Object} object The object to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @param {Function} keysFunc The function to get the keys of `object`.
     * @returns {Object} Returns `object`.
     */
    var baseFor = createBaseFor();

    /**
     * This function is like `baseFor` except that it iterates over properties
     * in the opposite order.
     *
     * @private
     * @param {Object} object The object to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @param {Function} keysFunc The function to get the keys of `object`.
     * @returns {Object} Returns `object`.
     */
    var baseForRight = createBaseFor(true);

    /**
     * The base implementation of `_.forIn` without support for callback
     * shorthands and `this` binding.
     *
     * @private
     * @param {Object} object The object to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @returns {Object} Returns `object`.
     */
    function baseForIn(object, iteratee) {
      return baseFor(object, iteratee, keysIn);
    }

    /**
     * The base implementation of `_.forOwn` without support for callback
     * shorthands and `this` binding.
     *
     * @private
     * @param {Object} object The object to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @returns {Object} Returns `object`.
     */
    function baseForOwn(object, iteratee) {
      return baseFor(object, iteratee, keys);
    }

    /**
     * The base implementation of `_.forOwnRight` without support for callback
     * shorthands and `this` binding.
     *
     * @private
     * @param {Object} object The object to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @returns {Object} Returns `object`.
     */
    function baseForOwnRight(object, iteratee) {
      return baseForRight(object, iteratee, keys);
    }

    /**
     * The base implementation of `_.functions` which creates an array of
     * `object` function property names filtered from those provided.
     *
     * @private
     * @param {Object} object The object to inspect.
     * @param {Array} props The property names to filter.
     * @returns {Array} Returns the new array of filtered property names.
     */
    function baseFunctions(object, props) {
      var index = -1,
          length = props.length,
          resIndex = -1,
          result = [];

      while (++index < length) {
        var key = props[index];
        if (isFunction(object[key])) {
          result[++resIndex] = key;
        }
      }
      return result;
    }

    /**
     * The base implementation of `get` without support for string paths
     * and default values.
     *
     * @private
     * @param {Object} object The object to query.
     * @param {Array} path The path of the property to get.
     * @param {string} [pathKey] The key representation of path.
     * @returns {*} Returns the resolved value.
     */
    function baseGet(object, path, pathKey) {
      if (object == null) {
        return;
      }
      if (pathKey !== undefined && pathKey in toObject(object)) {
        path = [pathKey];
      }
      var index = 0,
          length = path.length;

      while (object != null && index < length) {
        object = object[path[index++]];
      }
      return (index && index == length) ? object : undefined;
    }

    /**
     * The base implementation of `_.isEqual` without support for `this` binding
     * `customizer` functions.
     *
     * @private
     * @param {*} value The value to compare.
     * @param {*} other The other value to compare.
     * @param {Function} [customizer] The function to customize comparing values.
     * @param {boolean} [isLoose] Specify performing partial comparisons.
     * @param {Array} [stackA] Tracks traversed `value` objects.
     * @param {Array} [stackB] Tracks traversed `other` objects.
     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.
     */
    function baseIsEqual(value, other, customizer, isLoose, stackA, stackB) {
      if (value === other) {
        return true;
      }
      if (value == null || other == null || (!isObject(value) && !isObjectLike(other))) {
        return value !== value && other !== other;
      }
      return baseIsEqualDeep(value, other, baseIsEqual, customizer, isLoose, stackA, stackB);
    }

    /**
     * A specialized version of `baseIsEqual` for arrays and objects which performs
     * deep comparisons and tracks traversed objects enabling objects with circular
     * references to be compared.
     *
     * @private
     * @param {Object} object The object to compare.
     * @param {Object} other The other object to compare.
     * @param {Function} equalFunc The function to determine equivalents of values.
     * @param {Function} [customizer] The function to customize comparing objects.
     * @param {boolean} [isLoose] Specify performing partial comparisons.
     * @param {Array} [stackA=[]] Tracks traversed `value` objects.
     * @param {Array} [stackB=[]] Tracks traversed `other` objects.
     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.
     */
    function baseIsEqualDeep(object, other, equalFunc, customizer, isLoose, stackA, stackB) {
      var objIsArr = isArray(object),
          othIsArr = isArray(other),
          objTag = arrayTag,
          othTag = arrayTag;

      if (!objIsArr) {
        objTag = objToString.call(object);
        if (objTag == argsTag) {
          objTag = objectTag;
        } else if (objTag != objectTag) {
          objIsArr = isTypedArray(object);
        }
      }
      if (!othIsArr) {
        othTag = objToString.call(other);
        if (othTag == argsTag) {
          othTag = objectTag;
        } else if (othTag != objectTag) {
          othIsArr = isTypedArray(other);
        }
      }
      var objIsObj = objTag == objectTag,
          othIsObj = othTag == objectTag,
          isSameTag = objTag == othTag;

      if (isSameTag && !(objIsArr || objIsObj)) {
        return equalByTag(object, other, objTag);
      }
      if (!isLoose) {
        var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),
            othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');

        if (objIsWrapped || othIsWrapped) {
          return equalFunc(objIsWrapped ? object.value() : object, othIsWrapped ? other.value() : other, customizer, isLoose, stackA, stackB);
        }
      }
      if (!isSameTag) {
        return false;
      }
      // Assume cyclic values are equal.
      // For more information on detecting circular references see https://es5.github.io/#JO.
      stackA || (stackA = []);
      stackB || (stackB = []);

      var length = stackA.length;
      while (length--) {
        if (stackA[length] == object) {
          return stackB[length] == other;
        }
      }
      // Add `object` and `other` to the stack of traversed objects.
      stackA.push(object);
      stackB.push(other);

      var result = (objIsArr ? equalArrays : equalObjects)(object, other, equalFunc, customizer, isLoose, stackA, stackB);

      stackA.pop();
      stackB.pop();

      return result;
    }

    /**
     * The base implementation of `_.isMatch` without support for callback
     * shorthands and `this` binding.
     *
     * @private
     * @param {Object} object The object to inspect.
     * @param {Array} matchData The propery names, values, and compare flags to match.
     * @param {Function} [customizer] The function to customize comparing objects.
     * @returns {boolean} Returns `true` if `object` is a match, else `false`.
     */
    function baseIsMatch(object, matchData, customizer) {
      var index = matchData.length,
          length = index,
          noCustomizer = !customizer;

      if (object == null) {
        return !length;
      }
      object = toObject(object);
      while (index--) {
        var data = matchData[index];
        if ((noCustomizer && data[2])
              ? data[1] !== object[data[0]]
              : !(data[0] in object)
            ) {
          return false;
        }
      }
      while (++index < length) {
        data = matchData[index];
        var key = data[0],
            objValue = object[key],
            srcValue = data[1];

        if (noCustomizer && data[2]) {
          if (objValue === undefined && !(key in object)) {
            return false;
          }
        } else {
          var result = customizer ? customizer(objValue, srcValue, key) : undefined;
          if (!(result === undefined ? baseIsEqual(srcValue, objValue, customizer, true) : result)) {
            return false;
          }
        }
      }
      return true;
    }

    /**
     * The base implementation of `_.map` without support for callback shorthands
     * and `this` binding.
     *
     * @private
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @returns {Array} Returns the new mapped array.
     */
    function baseMap(collection, iteratee) {
      var index = -1,
          result = isArrayLike(collection) ? Array(collection.length) : [];

      baseEach(collection, function(value, key, collection) {
        result[++index] = iteratee(value, key, collection);
      });
      return result;
    }

    /**
     * The base implementation of `_.matches` which does not clone `source`.
     *
     * @private
     * @param {Object} source The object of property values to match.
     * @returns {Function} Returns the new function.
     */
    function baseMatches(source) {
      var matchData = getMatchData(source);
      if (matchData.length == 1 && matchData[0][2]) {
        var key = matchData[0][0],
            value = matchData[0][1];

        return function(object) {
          if (object == null) {
            return false;
          }
          return object[key] === value && (value !== undefined || (key in toObject(object)));
        };
      }
      return function(object) {
        return baseIsMatch(object, matchData);
      };
    }

    /**
     * The base implementation of `_.matchesProperty` which does not clone `srcValue`.
     *
     * @private
     * @param {string} path The path of the property to get.
     * @param {*} srcValue The value to compare.
     * @returns {Function} Returns the new function.
     */
    function baseMatchesProperty(path, srcValue) {
      var isArr = isArray(path),
          isCommon = isKey(path) && isStrictComparable(srcValue),
          pathKey = (path + '');

      path = toPath(path);
      return function(object) {
        if (object == null) {
          return false;
        }
        var key = pathKey;
        object = toObject(object);
        if ((isArr || !isCommon) && !(key in object)) {
          object = path.length == 1 ? object : baseGet(object, baseSlice(path, 0, -1));
          if (object == null) {
            return false;
          }
          key = last(path);
          object = toObject(object);
        }
        return object[key] === srcValue
          ? (srcValue !== undefined || (key in object))
          : baseIsEqual(srcValue, object[key], undefined, true);
      };
    }

    /**
     * The base implementation of `_.merge` without support for argument juggling,
     * multiple sources, and `this` binding `customizer` functions.
     *
     * @private
     * @param {Object} object The destination object.
     * @param {Object} source The source object.
     * @param {Function} [customizer] The function to customize merged values.
     * @param {Array} [stackA=[]] Tracks traversed source objects.
     * @param {Array} [stackB=[]] Associates values with source counterparts.
     * @returns {Object} Returns `object`.
     */
    function baseMerge(object, source, customizer, stackA, stackB) {
      if (!isObject(object)) {
        return object;
      }
      var isSrcArr = isArrayLike(source) && (isArray(source) || isTypedArray(source)),
          props = isSrcArr ? undefined : keys(source);

      arrayEach(props || source, function(srcValue, key) {
        if (props) {
          key = srcValue;
          srcValue = source[key];
        }
        if (isObjectLike(srcValue)) {
          stackA || (stackA = []);
          stackB || (stackB = []);
          baseMergeDeep(object, source, key, baseMerge, customizer, stackA, stackB);
        }
        else {
          var value = object[key],
              result = customizer ? customizer(value, srcValue, key, object, source) : undefined,
              isCommon = result === undefined;

          if (isCommon) {
            result = srcValue;
          }
          if ((result !== undefined || (isSrcArr && !(key in object))) &&
              (isCommon || (result === result ? (result !== value) : (value === value)))) {
            object[key] = result;
          }
        }
      });
      return object;
    }

    /**
     * A specialized version of `baseMerge` for arrays and objects which performs
     * deep merges and tracks traversed objects enabling objects with circular
     * references to be merged.
     *
     * @private
     * @param {Object} object The destination object.
     * @param {Object} source The source object.
     * @param {string} key The key of the value to merge.
     * @param {Function} mergeFunc The function to merge values.
     * @param {Function} [customizer] The function to customize merged values.
     * @param {Array} [stackA=[]] Tracks traversed source objects.
     * @param {Array} [stackB=[]] Associates values with source counterparts.
     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.
     */
    function baseMergeDeep(object, source, key, mergeFunc, customizer, stackA, stackB) {
      var length = stackA.length,
          srcValue = source[key];

      while (length--) {
        if (stackA[length] == srcValue) {
          object[key] = stackB[length];
          return;
        }
      }
      var value = object[key],
          result = customizer ? customizer(value, srcValue, key, object, source) : undefined,
          isCommon = result === undefined;

      if (isCommon) {
        result = srcValue;
        if (isArrayLike(srcValue) && (isArray(srcValue) || isTypedArray(srcValue))) {
          result = isArray(value)
            ? value
            : (isArrayLike(value) ? arrayCopy(value) : []);
        }
        else if (isPlainObject(srcValue) || isArguments(srcValue)) {
          result = isArguments(value)
            ? toPlainObject(value)
            : (isPlainObject(value) ? value : {});
        }
        else {
          isCommon = false;
        }
      }
      // Add the source value to the stack of traversed objects and associate
      // it with its merged value.
      stackA.push(srcValue);
      stackB.push(result);

      if (isCommon) {
        // Recursively merge objects and arrays (susceptible to call stack limits).
        object[key] = mergeFunc(result, srcValue, customizer, stackA, stackB);
      } else if (result === result ? (result !== value) : (value === value)) {
        object[key] = result;
      }
    }

    /**
     * The base implementation of `_.property` without support for deep paths.
     *
     * @private
     * @param {string} key The key of the property to get.
     * @returns {Function} Returns the new function.
     */
    function baseProperty(key) {
      return function(object) {
        return object == null ? undefined : object[key];
      };
    }

    /**
     * A specialized version of `baseProperty` which supports deep paths.
     *
     * @private
     * @param {Array|string} path The path of the property to get.
     * @returns {Function} Returns the new function.
     */
    function basePropertyDeep(path) {
      var pathKey = (path + '');
      path = toPath(path);
      return function(object) {
        return baseGet(object, path, pathKey);
      };
    }

    /**
     * The base implementation of `_.pullAt` without support for individual
     * index arguments and capturing the removed elements.
     *
     * @private
     * @param {Array} array The array to modify.
     * @param {number[]} indexes The indexes of elements to remove.
     * @returns {Array} Returns `array`.
     */
    function basePullAt(array, indexes) {
      var length = array ? indexes.length : 0;
      while (length--) {
        var index = indexes[length];
        if (index != previous && isIndex(index)) {
          var previous = index;
          splice.call(array, index, 1);
        }
      }
      return array;
    }

    /**
     * The base implementation of `_.random` without support for argument juggling
     * and returning floating-point numbers.
     *
     * @private
     * @param {number} min The minimum possible value.
     * @param {number} max The maximum possible value.
     * @returns {number} Returns the random number.
     */
    function baseRandom(min, max) {
      return min + nativeFloor(nativeRandom() * (max - min + 1));
    }

    /**
     * The base implementation of `_.reduce` and `_.reduceRight` without support
     * for callback shorthands and `this` binding, which iterates over `collection`
     * using the provided `eachFunc`.
     *
     * @private
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @param {*} accumulator The initial value.
     * @param {boolean} initFromCollection Specify using the first or last element
     *  of `collection` as the initial value.
     * @param {Function} eachFunc The function to iterate over `collection`.
     * @returns {*} Returns the accumulated value.
     */
    function baseReduce(collection, iteratee, accumulator, initFromCollection, eachFunc) {
      eachFunc(collection, function(value, index, collection) {
        accumulator = initFromCollection
          ? (initFromCollection = false, value)
          : iteratee(accumulator, value, index, collection);
      });
      return accumulator;
    }

    /**
     * The base implementation of `setData` without support for hot loop detection.
     *
     * @private
     * @param {Function} func The function to associate metadata with.
     * @param {*} data The metadata.
     * @returns {Function} Returns `func`.
     */
    var baseSetData = !metaMap ? identity : function(func, data) {
      metaMap.set(func, data);
      return func;
    };

    /**
     * The base implementation of `_.slice` without an iteratee call guard.
     *
     * @private
     * @param {Array} array The array to slice.
     * @param {number} [start=0] The start position.
     * @param {number} [end=array.length] The end position.
     * @returns {Array} Returns the slice of `array`.
     */
    function baseSlice(array, start, end) {
      var index = -1,
          length = array.length;

      start = start == null ? 0 : (+start || 0);
      if (start < 0) {
        start = -start > length ? 0 : (length + start);
      }
      end = (end === undefined || end > length) ? length : (+end || 0);
      if (end < 0) {
        end += length;
      }
      length = start > end ? 0 : ((end - start) >>> 0);
      start >>>= 0;

      var result = Array(length);
      while (++index < length) {
        result[index] = array[index + start];
      }
      return result;
    }

    /**
     * The base implementation of `_.some` without support for callback shorthands
     * and `this` binding.
     *
     * @private
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} predicate The function invoked per iteration.
     * @returns {boolean} Returns `true` if any element passes the predicate check,
     *  else `false`.
     */
    function baseSome(collection, predicate) {
      var result;

      baseEach(collection, function(value, index, collection) {
        result = predicate(value, index, collection);
        return !result;
      });
      return !!result;
    }

    /**
     * The base implementation of `_.sortBy` which uses `comparer` to define
     * the sort order of `array` and replaces criteria objects with their
     * corresponding values.
     *
     * @private
     * @param {Array} array The array to sort.
     * @param {Function} comparer The function to define sort order.
     * @returns {Array} Returns `array`.
     */
    function baseSortBy(array, comparer) {
      var length = array.length;

      array.sort(comparer);
      while (length--) {
        array[length] = array[length].value;
      }
      return array;
    }

    /**
     * The base implementation of `_.sortByOrder` without param guards.
     *
     * @private
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function[]|Object[]|string[]} iteratees The iteratees to sort by.
     * @param {boolean[]} orders The sort orders of `iteratees`.
     * @returns {Array} Returns the new sorted array.
     */
    function baseSortByOrder(collection, iteratees, orders) {
      var callback = getCallback(),
          index = -1;

      iteratees = arrayMap(iteratees, function(iteratee) { return callback(iteratee); });

      var result = baseMap(collection, function(value) {
        var criteria = arrayMap(iteratees, function(iteratee) { return iteratee(value); });
        return { 'criteria': criteria, 'index': ++index, 'value': value };
      });

      return baseSortBy(result, function(object, other) {
        return compareMultiple(object, other, orders);
      });
    }

    /**
     * The base implementation of `_.sum` without support for callback shorthands
     * and `this` binding.
     *
     * @private
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @returns {number} Returns the sum.
     */
    function baseSum(collection, iteratee) {
      var result = 0;
      baseEach(collection, function(value, index, collection) {
        result += +iteratee(value, index, collection) || 0;
      });
      return result;
    }

    /**
     * The base implementation of `_.uniq` without support for callback shorthands
     * and `this` binding.
     *
     * @private
     * @param {Array} array The array to inspect.
     * @param {Function} [iteratee] The function invoked per iteration.
     * @returns {Array} Returns the new duplicate-value-free array.
     */
    function baseUniq(array, iteratee) {
      var index = -1,
          indexOf = getIndexOf(),
          length = array.length,
          isCommon = indexOf == baseIndexOf,
          isLarge = isCommon && length >= LARGE_ARRAY_SIZE,
          seen = isLarge ? createCache() : null,
          result = [];

      if (seen) {
        indexOf = cacheIndexOf;
        isCommon = false;
      } else {
        isLarge = false;
        seen = iteratee ? [] : result;
      }
      outer:
      while (++index < length) {
        var value = array[index],
            computed = iteratee ? iteratee(value, index, array) : value;

        if (isCommon && value === value) {
          var seenIndex = seen.length;
          while (seenIndex--) {
            if (seen[seenIndex] === computed) {
              continue outer;
            }
          }
          if (iteratee) {
            seen.push(computed);
          }
          result.push(value);
        }
        else if (indexOf(seen, computed, 0) < 0) {
          if (iteratee || isLarge) {
            seen.push(computed);
          }
          result.push(value);
        }
      }
      return result;
    }

    /**
     * The base implementation of `_.values` and `_.valuesIn` which creates an
     * array of `object` property values corresponding to the property names
     * of `props`.
     *
     * @private
     * @param {Object} object The object to query.
     * @param {Array} props The property names to get values for.
     * @returns {Object} Returns the array of property values.
     */
    function baseValues(object, props) {
      var index = -1,
          length = props.length,
          result = Array(length);

      while (++index < length) {
        result[index] = object[props[index]];
      }
      return result;
    }

    /**
     * The base implementation of `_.dropRightWhile`, `_.dropWhile`, `_.takeRightWhile`,
     * and `_.takeWhile` without support for callback shorthands and `this` binding.
     *
     * @private
     * @param {Array} array The array to query.
     * @param {Function} predicate The function invoked per iteration.
     * @param {boolean} [isDrop] Specify dropping elements instead of taking them.
     * @param {boolean} [fromRight] Specify iterating from right to left.
     * @returns {Array} Returns the slice of `array`.
     */
    function baseWhile(array, predicate, isDrop, fromRight) {
      var length = array.length,
          index = fromRight ? length : -1;

      while ((fromRight ? index-- : ++index < length) && predicate(array[index], index, array)) {}
      return isDrop
        ? baseSlice(array, (fromRight ? 0 : index), (fromRight ? index + 1 : length))
        : baseSlice(array, (fromRight ? index + 1 : 0), (fromRight ? length : index));
    }

    /**
     * The base implementation of `wrapperValue` which returns the result of
     * performing a sequence of actions on the unwrapped `value`, where each
     * successive action is supplied the return value of the previous.
     *
     * @private
     * @param {*} value The unwrapped value.
     * @param {Array} actions Actions to peform to resolve the unwrapped value.
     * @returns {*} Returns the resolved value.
     */
    function baseWrapperValue(value, actions) {
      var result = value;
      if (result instanceof LazyWrapper) {
        result = result.value();
      }
      var index = -1,
          length = actions.length;

      while (++index < length) {
        var action = actions[index];
        result = action.func.apply(action.thisArg, arrayPush([result], action.args));
      }
      return result;
    }

    /**
     * Performs a binary search of `array` to determine the index at which `value`
     * should be inserted into `array` in order to maintain its sort order.
     *
     * @private
     * @param {Array} array The sorted array to inspect.
     * @param {*} value The value to evaluate.
     * @param {boolean} [retHighest] Specify returning the highest qualified index.
     * @returns {number} Returns the index at which `value` should be inserted
     *  into `array`.
     */
    function binaryIndex(array, value, retHighest) {
      var low = 0,
          high = array ? array.length : low;

      if (typeof value == 'number' && value === value && high <= HALF_MAX_ARRAY_LENGTH) {
        while (low < high) {
          var mid = (low + high) >>> 1,
              computed = array[mid];

          if ((retHighest ? (computed <= value) : (computed < value)) && computed !== null) {
            low = mid + 1;
          } else {
            high = mid;
          }
        }
        return high;
      }
      return binaryIndexBy(array, value, identity, retHighest);
    }

    /**
     * This function is like `binaryIndex` except that it invokes `iteratee` for
     * `value` and each element of `array` to compute their sort ranking. The
     * iteratee is invoked with one argument; (value).
     *
     * @private
     * @param {Array} array The sorted array to inspect.
     * @param {*} value The value to evaluate.
     * @param {Function} iteratee The function invoked per iteration.
     * @param {boolean} [retHighest] Specify returning the highest qualified index.
     * @returns {number} Returns the index at which `value` should be inserted
     *  into `array`.
     */
    function binaryIndexBy(array, value, iteratee, retHighest) {
      value = iteratee(value);

      var low = 0,
          high = array ? array.length : 0,
          valIsNaN = value !== value,
          valIsNull = value === null,
          valIsUndef = value === undefined;

      while (low < high) {
        var mid = nativeFloor((low + high) / 2),
            computed = iteratee(array[mid]),
            isDef = computed !== undefined,
            isReflexive = computed === computed;

        if (valIsNaN) {
          var setLow = isReflexive || retHighest;
        } else if (valIsNull) {
          setLow = isReflexive && isDef && (retHighest || computed != null);
        } else if (valIsUndef) {
          setLow = isReflexive && (retHighest || isDef);
        } else if (computed == null) {
          setLow = false;
        } else {
          setLow = retHighest ? (computed <= value) : (computed < value);
        }
        if (setLow) {
          low = mid + 1;
        } else {
          high = mid;
        }
      }
      return nativeMin(high, MAX_ARRAY_INDEX);
    }

    /**
     * A specialized version of `baseCallback` which only supports `this` binding
     * and specifying the number of arguments to provide to `func`.
     *
     * @private
     * @param {Function} func The function to bind.
     * @param {*} thisArg The `this` binding of `func`.
     * @param {number} [argCount] The number of arguments to provide to `func`.
     * @returns {Function} Returns the callback.
     */
    function bindCallback(func, thisArg, argCount) {
      if (typeof func != 'function') {
        return identity;
      }
      if (thisArg === undefined) {
        return func;
      }
      switch (argCount) {
        case 1: return function(value) {
          return func.call(thisArg, value);
        };
        case 3: return function(value, index, collection) {
          return func.call(thisArg, value, index, collection);
        };
        case 4: return function(accumulator, value, index, collection) {
          return func.call(thisArg, accumulator, value, index, collection);
        };
        case 5: return function(value, other, key, object, source) {
          return func.call(thisArg, value, other, key, object, source);
        };
      }
      return function() {
        return func.apply(thisArg, arguments);
      };
    }

    /**
     * Creates a clone of the given array buffer.
     *
     * @private
     * @param {ArrayBuffer} buffer The array buffer to clone.
     * @returns {ArrayBuffer} Returns the cloned array buffer.
     */
    function bufferClone(buffer) {
      var result = new ArrayBuffer(buffer.byteLength),
          view = new Uint8Array(result);

      view.set(new Uint8Array(buffer));
      return result;
    }

    /**
     * Creates an array that is the composition of partially applied arguments,
     * placeholders, and provided arguments into a single array of arguments.
     *
     * @private
     * @param {Array|Object} args The provided arguments.
     * @param {Array} partials The arguments to prepend to those provided.
     * @param {Array} holders The `partials` placeholder indexes.
     * @returns {Array} Returns the new array of composed arguments.
     */
    function composeArgs(args, partials, holders) {
      var holdersLength = holders.length,
          argsIndex = -1,
          argsLength = nativeMax(args.length - holdersLength, 0),
          leftIndex = -1,
          leftLength = partials.length,
          result = Array(leftLength + argsLength);

      while (++leftIndex < leftLength) {
        result[leftIndex] = partials[leftIndex];
      }
      while (++argsIndex < holdersLength) {
        result[holders[argsIndex]] = args[argsIndex];
      }
      while (argsLength--) {
        result[leftIndex++] = args[argsIndex++];
      }
      return result;
    }

    /**
     * This function is like `composeArgs` except that the arguments composition
     * is tailored for `_.partialRight`.
     *
     * @private
     * @param {Array|Object} args The provided arguments.
     * @param {Array} partials The arguments to append to those provided.
     * @param {Array} holders The `partials` placeholder indexes.
     * @returns {Array} Returns the new array of composed arguments.
     */
    function composeArgsRight(args, partials, holders) {
      var holdersIndex = -1,
          holdersLength = holders.length,
          argsIndex = -1,
          argsLength = nativeMax(args.length - holdersLength, 0),
          rightIndex = -1,
          rightLength = partials.length,
          result = Array(argsLength + rightLength);

      while (++argsIndex < argsLength) {
        result[argsIndex] = args[argsIndex];
      }
      var offset = argsIndex;
      while (++rightIndex < rightLength) {
        result[offset + rightIndex] = partials[rightIndex];
      }
      while (++holdersIndex < holdersLength) {
        result[offset + holders[holdersIndex]] = args[argsIndex++];
      }
      return result;
    }

    /**
     * Creates a `_.countBy`, `_.groupBy`, `_.indexBy`, or `_.partition` function.
     *
     * @private
     * @param {Function} setter The function to set keys and values of the accumulator object.
     * @param {Function} [initializer] The function to initialize the accumulator object.
     * @returns {Function} Returns the new aggregator function.
     */
    function createAggregator(setter, initializer) {
      return function(collection, iteratee, thisArg) {
        var result = initializer ? initializer() : {};
        iteratee = getCallback(iteratee, thisArg, 3);

        if (isArray(collection)) {
          var index = -1,
              length = collection.length;

          while (++index < length) {
            var value = collection[index];
            setter(result, value, iteratee(value, index, collection), collection);
          }
        } else {
          baseEach(collection, function(value, key, collection) {
            setter(result, value, iteratee(value, key, collection), collection);
          });
        }
        return result;
      };
    }

    /**
     * Creates a `_.assign`, `_.defaults`, or `_.merge` function.
     *
     * @private
     * @param {Function} assigner The function to assign values.
     * @returns {Function} Returns the new assigner function.
     */
    function createAssigner(assigner) {
      return restParam(function(object, sources) {
        var index = -1,
            length = object == null ? 0 : sources.length,
            customizer = length > 2 ? sources[length - 2] : undefined,
            guard = length > 2 ? sources[2] : undefined,
            thisArg = length > 1 ? sources[length - 1] : undefined;

        if (typeof customizer == 'function') {
          customizer = bindCallback(customizer, thisArg, 5);
          length -= 2;
        } else {
          customizer = typeof thisArg == 'function' ? thisArg : undefined;
          length -= (customizer ? 1 : 0);
        }
        if (guard && isIterateeCall(sources[0], sources[1], guard)) {
          customizer = length < 3 ? undefined : customizer;
          length = 1;
        }
        while (++index < length) {
          var source = sources[index];
          if (source) {
            assigner(object, source, customizer);
          }
        }
        return object;
      });
    }

    /**
     * Creates a `baseEach` or `baseEachRight` function.
     *
     * @private
     * @param {Function} eachFunc The function to iterate over a collection.
     * @param {boolean} [fromRight] Specify iterating from right to left.
     * @returns {Function} Returns the new base function.
     */
    function createBaseEach(eachFunc, fromRight) {
      return function(collection, iteratee) {
        var length = collection ? getLength(collection) : 0;
        if (!isLength(length)) {
          return eachFunc(collection, iteratee);
        }
        var index = fromRight ? length : -1,
            iterable = toObject(collection);

        while ((fromRight ? index-- : ++index < length)) {
          if (iteratee(iterable[index], index, iterable) === false) {
            break;
          }
        }
        return collection;
      };
    }

    /**
     * Creates a base function for `_.forIn` or `_.forInRight`.
     *
     * @private
     * @param {boolean} [fromRight] Specify iterating from right to left.
     * @returns {Function} Returns the new base function.
     */
    function createBaseFor(fromRight) {
      return function(object, iteratee, keysFunc) {
        var iterable = toObject(object),
            props = keysFunc(object),
            length = props.length,
            index = fromRight ? length : -1;

        while ((fromRight ? index-- : ++index < length)) {
          var key = props[index];
          if (iteratee(iterable[key], key, iterable) === false) {
            break;
          }
        }
        return object;
      };
    }

    /**
     * Creates a function that wraps `func` and invokes it with the `this`
     * binding of `thisArg`.
     *
     * @private
     * @param {Function} func The function to bind.
     * @param {*} [thisArg] The `this` binding of `func`.
     * @returns {Function} Returns the new bound function.
     */
    function createBindWrapper(func, thisArg) {
      var Ctor = createCtorWrapper(func);

      function wrapper() {
        var fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;
        return fn.apply(thisArg, arguments);
      }
      return wrapper;
    }

    /**
     * Creates a `Set` cache object to optimize linear searches of large arrays.
     *
     * @private
     * @param {Array} [values] The values to cache.
     * @returns {null|Object} Returns the new cache object if `Set` is supported, else `null`.
     */
    function createCache(values) {
      return (nativeCreate && Set) ? new SetCache(values) : null;
    }

    /**
     * Creates a function that produces compound words out of the words in a
     * given string.
     *
     * @private
     * @param {Function} callback The function to combine each word.
     * @returns {Function} Returns the new compounder function.
     */
    function createCompounder(callback) {
      return function(string) {
        var index = -1,
            array = words(deburr(string)),
            length = array.length,
            result = '';

        while (++index < length) {
          result = callback(result, array[index], index);
        }
        return result;
      };
    }

    /**
     * Creates a function that produces an instance of `Ctor` regardless of
     * whether it was invoked as part of a `new` expression or by `call` or `apply`.
     *
     * @private
     * @param {Function} Ctor The constructor to wrap.
     * @returns {Function} Returns the new wrapped function.
     */
    function createCtorWrapper(Ctor) {
      return function() {
        // Use a `switch` statement to work with class constructors.
        // See http://ecma-international.org/ecma-262/6.0/#sec-ecmascript-function-objects-call-thisargument-argumentslist
        // for more details.
        var args = arguments;
        switch (args.length) {
          case 0: return new Ctor;
          case 1: return new Ctor(args[0]);
          case 2: return new Ctor(args[0], args[1]);
          case 3: return new Ctor(args[0], args[1], args[2]);
          case 4: return new Ctor(args[0], args[1], args[2], args[3]);
          case 5: return new Ctor(args[0], args[1], args[2], args[3], args[4]);
          case 6: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5]);
          case 7: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5], args[6]);
        }
        var thisBinding = baseCreate(Ctor.prototype),
            result = Ctor.apply(thisBinding, args);

        // Mimic the constructor's `return` behavior.
        // See https://es5.github.io/#x13.2.2 for more details.
        return isObject(result) ? result : thisBinding;
      };
    }

    /**
     * Creates a `_.curry` or `_.curryRight` function.
     *
     * @private
     * @param {boolean} flag The curry bit flag.
     * @returns {Function} Returns the new curry function.
     */
    function createCurry(flag) {
      function curryFunc(func, arity, guard) {
        if (guard && isIterateeCall(func, arity, guard)) {
          arity = undefined;
        }
        var result = createWrapper(func, flag, undefined, undefined, undefined, undefined, undefined, arity);
        result.placeholder = curryFunc.placeholder;
        return result;
      }
      return curryFunc;
    }

    /**
     * Creates a `_.defaults` or `_.defaultsDeep` function.
     *
     * @private
     * @param {Function} assigner The function to assign values.
     * @param {Function} customizer The function to customize assigned values.
     * @returns {Function} Returns the new defaults function.
     */
    function createDefaults(assigner, customizer) {
      return restParam(function(args) {
        var object = args[0];
        if (object == null) {
          return object;
        }
        args.push(customizer);
        return assigner.apply(undefined, args);
      });
    }

    /**
     * Creates a `_.max` or `_.min` function.
     *
     * @private
     * @param {Function} comparator The function used to compare values.
     * @param {*} exValue The initial extremum value.
     * @returns {Function} Returns the new extremum function.
     */
    function createExtremum(comparator, exValue) {
      return function(collection, iteratee, thisArg) {
        if (thisArg && isIterateeCall(collection, iteratee, thisArg)) {
          iteratee = undefined;
        }
        iteratee = getCallback(iteratee, thisArg, 3);
        if (iteratee.length == 1) {
          collection = isArray(collection) ? collection : toIterable(collection);
          var result = arrayExtremum(collection, iteratee, comparator, exValue);
          if (!(collection.length && result === exValue)) {
            return result;
          }
        }
        return baseExtremum(collection, iteratee, comparator, exValue);
      };
    }

    /**
     * Creates a `_.find` or `_.findLast` function.
     *
     * @private
     * @param {Function} eachFunc The function to iterate over a collection.
     * @param {boolean} [fromRight] Specify iterating from right to left.
     * @returns {Function} Returns the new find function.
     */
    function createFind(eachFunc, fromRight) {
      return function(collection, predicate, thisArg) {
        predicate = getCallback(predicate, thisArg, 3);
        if (isArray(collection)) {
          var index = baseFindIndex(collection, predicate, fromRight);
          return index > -1 ? collection[index] : undefined;
        }
        return baseFind(collection, predicate, eachFunc);
      };
    }

    /**
     * Creates a `_.findIndex` or `_.findLastIndex` function.
     *
     * @private
     * @param {boolean} [fromRight] Specify iterating from right to left.
     * @returns {Function} Returns the new find function.
     */
    function createFindIndex(fromRight) {
      return function(array, predicate, thisArg) {
        if (!(array && array.length)) {
          return -1;
        }
        predicate = getCallback(predicate, thisArg, 3);
        return baseFindIndex(array, predicate, fromRight);
      };
    }

    /**
     * Creates a `_.findKey` or `_.findLastKey` function.
     *
     * @private
     * @param {Function} objectFunc The function to iterate over an object.
     * @returns {Function} Returns the new find function.
     */
    function createFindKey(objectFunc) {
      return function(object, predicate, thisArg) {
        predicate = getCallback(predicate, thisArg, 3);
        return baseFind(object, predicate, objectFunc, true);
      };
    }

    /**
     * Creates a `_.flow` or `_.flowRight` function.
     *
     * @private
     * @param {boolean} [fromRight] Specify iterating from right to left.
     * @returns {Function} Returns the new flow function.
     */
    function createFlow(fromRight) {
      return function() {
        var wrapper,
            length = arguments.length,
            index = fromRight ? length : -1,
            leftIndex = 0,
            funcs = Array(length);

        while ((fromRight ? index-- : ++index < length)) {
          var func = funcs[leftIndex++] = arguments[index];
          if (typeof func != 'function') {
            throw new TypeError(FUNC_ERROR_TEXT);
          }
          if (!wrapper && LodashWrapper.prototype.thru && getFuncName(func) == 'wrapper') {
            wrapper = new LodashWrapper([], true);
          }
        }
        index = wrapper ? -1 : length;
        while (++index < length) {
          func = funcs[index];

          var funcName = getFuncName(func),
              data = funcName == 'wrapper' ? getData(func) : undefined;

          if (data && isLaziable(data[0]) && data[1] == (ARY_FLAG | CURRY_FLAG | PARTIAL_FLAG | REARG_FLAG) && !data[4].length && data[9] == 1) {
            wrapper = wrapper[getFuncName(data[0])].apply(wrapper, data[3]);
          } else {
            wrapper = (func.length == 1 && isLaziable(func)) ? wrapper[funcName]() : wrapper.thru(func);
          }
        }
        return function() {
          var args = arguments,
              value = args[0];

          if (wrapper && args.length == 1 && isArray(value) && value.length >= LARGE_ARRAY_SIZE) {
            return wrapper.plant(value).value();
          }
          var index = 0,
              result = length ? funcs[index].apply(this, args) : value;

          while (++index < length) {
            result = funcs[index].call(this, result);
          }
          return result;
        };
      };
    }

    /**
     * Creates a function for `_.forEach` or `_.forEachRight`.
     *
     * @private
     * @param {Function} arrayFunc The function to iterate over an array.
     * @param {Function} eachFunc The function to iterate over a collection.
     * @returns {Function} Returns the new each function.
     */
    function createForEach(arrayFunc, eachFunc) {
      return function(collection, iteratee, thisArg) {
        return (typeof iteratee == 'function' && thisArg === undefined && isArray(collection))
          ? arrayFunc(collection, iteratee)
          : eachFunc(collection, bindCallback(iteratee, thisArg, 3));
      };
    }

    /**
     * Creates a function for `_.forIn` or `_.forInRight`.
     *
     * @private
     * @param {Function} objectFunc The function to iterate over an object.
     * @returns {Function} Returns the new each function.
     */
    function createForIn(objectFunc) {
      return function(object, iteratee, thisArg) {
        if (typeof iteratee != 'function' || thisArg !== undefined) {
          iteratee = bindCallback(iteratee, thisArg, 3);
        }
        return objectFunc(object, iteratee, keysIn);
      };
    }

    /**
     * Creates a function for `_.forOwn` or `_.forOwnRight`.
     *
     * @private
     * @param {Function} objectFunc The function to iterate over an object.
     * @returns {Function} Returns the new each function.
     */
    function createForOwn(objectFunc) {
      return function(object, iteratee, thisArg) {
        if (typeof iteratee != 'function' || thisArg !== undefined) {
          iteratee = bindCallback(iteratee, thisArg, 3);
        }
        return objectFunc(object, iteratee);
      };
    }

    /**
     * Creates a function for `_.mapKeys` or `_.mapValues`.
     *
     * @private
     * @param {boolean} [isMapKeys] Specify mapping keys instead of values.
     * @returns {Function} Returns the new map function.
     */
    function createObjectMapper(isMapKeys) {
      return function(object, iteratee, thisArg) {
        var result = {};
        iteratee = getCallback(iteratee, thisArg, 3);

        baseForOwn(object, function(value, key, object) {
          var mapped = iteratee(value, key, object);
          key = isMapKeys ? mapped : key;
          value = isMapKeys ? value : mapped;
          result[key] = value;
        });
        return result;
      };
    }

    /**
     * Creates a function for `_.padLeft` or `_.padRight`.
     *
     * @private
     * @param {boolean} [fromRight] Specify padding from the right.
     * @returns {Function} Returns the new pad function.
     */
    function createPadDir(fromRight) {
      return function(string, length, chars) {
        string = baseToString(string);
        return (fromRight ? string : '') + createPadding(string, length, chars) + (fromRight ? '' : string);
      };
    }

    /**
     * Creates a `_.partial` or `_.partialRight` function.
     *
     * @private
     * @param {boolean} flag The partial bit flag.
     * @returns {Function} Returns the new partial function.
     */
    function createPartial(flag) {
      var partialFunc = restParam(function(func, partials) {
        var holders = replaceHolders(partials, partialFunc.placeholder);
        return createWrapper(func, flag, undefined, partials, holders);
      });
      return partialFunc;
    }

    /**
     * Creates a function for `_.reduce` or `_.reduceRight`.
     *
     * @private
     * @param {Function} arrayFunc The function to iterate over an array.
     * @param {Function} eachFunc The function to iterate over a collection.
     * @returns {Function} Returns the new each function.
     */
    function createReduce(arrayFunc, eachFunc) {
      return function(collection, iteratee, accumulator, thisArg) {
        var initFromArray = arguments.length < 3;
        return (typeof iteratee == 'function' && thisArg === undefined && isArray(collection))
          ? arrayFunc(collection, iteratee, accumulator, initFromArray)
          : baseReduce(collection, getCallback(iteratee, thisArg, 4), accumulator, initFromArray, eachFunc);
      };
    }

    /**
     * Creates a function that wraps `func` and invokes it with optional `this`
     * binding of, partial application, and currying.
     *
     * @private
     * @param {Function|string} func The function or method name to reference.
     * @param {number} bitmask The bitmask of flags. See `createWrapper` for more details.
     * @param {*} [thisArg] The `this` binding of `func`.
     * @param {Array} [partials] The arguments to prepend to those provided to the new function.
     * @param {Array} [holders] The `partials` placeholder indexes.
     * @param {Array} [partialsRight] The arguments to append to those provided to the new function.
     * @param {Array} [holdersRight] The `partialsRight` placeholder indexes.
     * @param {Array} [argPos] The argument positions of the new function.
     * @param {number} [ary] The arity cap of `func`.
     * @param {number} [arity] The arity of `func`.
     * @returns {Function} Returns the new wrapped function.
     */
    function createHybridWrapper(func, bitmask, thisArg, partials, holders, partialsRight, holdersRight, argPos, ary, arity) {
      var isAry = bitmask & ARY_FLAG,
          isBind = bitmask & BIND_FLAG,
          isBindKey = bitmask & BIND_KEY_FLAG,
          isCurry = bitmask & CURRY_FLAG,
          isCurryBound = bitmask & CURRY_BOUND_FLAG,
          isCurryRight = bitmask & CURRY_RIGHT_FLAG,
          Ctor = isBindKey ? undefined : createCtorWrapper(func);

      function wrapper() {
        // Avoid `arguments` object use disqualifying optimizations by
        // converting it to an array before providing it to other functions.
        var length = arguments.length,
            index = length,
            args = Array(length);

        while (index--) {
          args[index] = arguments[index];
        }
        if (partials) {
          args = composeArgs(args, partials, holders);
        }
        if (partialsRight) {
          args = composeArgsRight(args, partialsRight, holdersRight);
        }
        if (isCurry || isCurryRight) {
          var placeholder = wrapper.placeholder,
              argsHolders = replaceHolders(args, placeholder);

          length -= argsHolders.length;
          if (length < arity) {
            var newArgPos = argPos ? arrayCopy(argPos) : undefined,
                newArity = nativeMax(arity - length, 0),
                newsHolders = isCurry ? argsHolders : undefined,
                newHoldersRight = isCurry ? undefined : argsHolders,
                newPartials = isCurry ? args : undefined,
                newPartialsRight = isCurry ? undefined : args;

            bitmask |= (isCurry ? PARTIAL_FLAG : PARTIAL_RIGHT_FLAG);
            bitmask &= ~(isCurry ? PARTIAL_RIGHT_FLAG : PARTIAL_FLAG);

            if (!isCurryBound) {
              bitmask &= ~(BIND_FLAG | BIND_KEY_FLAG);
            }
            var newData = [func, bitmask, thisArg, newPartials, newsHolders, newPartialsRight, newHoldersRight, newArgPos, ary, newArity],
                result = createHybridWrapper.apply(undefined, newData);

            if (isLaziable(func)) {
              setData(result, newData);
            }
            result.placeholder = placeholder;
            return result;
          }
        }
        var thisBinding = isBind ? thisArg : this,
            fn = isBindKey ? thisBinding[func] : func;

        if (argPos) {
          args = reorder(args, argPos);
        }
        if (isAry && ary < args.length) {
          args.length = ary;
        }
        if (this && this !== root && this instanceof wrapper) {
          fn = Ctor || createCtorWrapper(func);
        }
        return fn.apply(thisBinding, args);
      }
      return wrapper;
    }

    /**
     * Creates the padding required for `string` based on the given `length`.
     * The `chars` string is truncated if the number of characters exceeds `length`.
     *
     * @private
     * @param {string} string The string to create padding for.
     * @param {number} [length=0] The padding length.
     * @param {string} [chars=' '] The string used as padding.
     * @returns {string} Returns the pad for `string`.
     */
    function createPadding(string, length, chars) {
      var strLength = string.length;
      length = +length;

      if (strLength >= length || !nativeIsFinite(length)) {
        return '';
      }
      var padLength = length - strLength;
      chars = chars == null ? ' ' : (chars + '');
      return repeat(chars, nativeCeil(padLength / chars.length)).slice(0, padLength);
    }

    /**
     * Creates a function that wraps `func` and invokes it with the optional `this`
     * binding of `thisArg` and the `partials` prepended to those provided to
     * the wrapper.
     *
     * @private
     * @param {Function} func The function to partially apply arguments to.
     * @param {number} bitmask The bitmask of flags. See `createWrapper` for more details.
     * @param {*} thisArg The `this` binding of `func`.
     * @param {Array} partials The arguments to prepend to those provided to the new function.
     * @returns {Function} Returns the new bound function.
     */
    function createPartialWrapper(func, bitmask, thisArg, partials) {
      var isBind = bitmask & BIND_FLAG,
          Ctor = createCtorWrapper(func);

      function wrapper() {
        // Avoid `arguments` object use disqualifying optimizations by
        // converting it to an array before providing it `func`.
        var argsIndex = -1,
            argsLength = arguments.length,
            leftIndex = -1,
            leftLength = partials.length,
            args = Array(leftLength + argsLength);

        while (++leftIndex < leftLength) {
          args[leftIndex] = partials[leftIndex];
        }
        while (argsLength--) {
          args[leftIndex++] = arguments[++argsIndex];
        }
        var fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;
        return fn.apply(isBind ? thisArg : this, args);
      }
      return wrapper;
    }

    /**
     * Creates a `_.ceil`, `_.floor`, or `_.round` function.
     *
     * @private
     * @param {string} methodName The name of the `Math` method to use when rounding.
     * @returns {Function} Returns the new round function.
     */
    function createRound(methodName) {
      var func = Math[methodName];
      return function(number, precision) {
        precision = precision === undefined ? 0 : (+precision || 0);
        if (precision) {
          precision = pow(10, precision);
          return func(number * precision) / precision;
        }
        return func(number);
      };
    }

    /**
     * Creates a `_.sortedIndex` or `_.sortedLastIndex` function.
     *
     * @private
     * @param {boolean} [retHighest] Specify returning the highest qualified index.
     * @returns {Function} Returns the new index function.
     */
    function createSortedIndex(retHighest) {
      return function(array, value, iteratee, thisArg) {
        var callback = getCallback(iteratee);
        return (iteratee == null && callback === baseCallback)
          ? binaryIndex(array, value, retHighest)
          : binaryIndexBy(array, value, callback(iteratee, thisArg, 1), retHighest);
      };
    }

    /**
     * Creates a function that either curries or invokes `func` with optional
     * `this` binding and partially applied arguments.
     *
     * @private
     * @param {Function|string} func The function or method name to reference.
     * @param {number} bitmask The bitmask of flags.
     *  The bitmask may be composed of the following flags:
     *     1 - `_.bind`
     *     2 - `_.bindKey`
     *     4 - `_.curry` or `_.curryRight` of a bound function
     *     8 - `_.curry`
     *    16 - `_.curryRight`
     *    32 - `_.partial`
     *    64 - `_.partialRight`
     *   128 - `_.rearg`
     *   256 - `_.ary`
     * @param {*} [thisArg] The `this` binding of `func`.
     * @param {Array} [partials] The arguments to be partially applied.
     * @param {Array} [holders] The `partials` placeholder indexes.
     * @param {Array} [argPos] The argument positions of the new function.
     * @param {number} [ary] The arity cap of `func`.
     * @param {number} [arity] The arity of `func`.
     * @returns {Function} Returns the new wrapped function.
     */
    function createWrapper(func, bitmask, thisArg, partials, holders, argPos, ary, arity) {
      var isBindKey = bitmask & BIND_KEY_FLAG;
      if (!isBindKey && typeof func != 'function') {
        throw new TypeError(FUNC_ERROR_TEXT);
      }
      var length = partials ? partials.length : 0;
      if (!length) {
        bitmask &= ~(PARTIAL_FLAG | PARTIAL_RIGHT_FLAG);
        partials = holders = undefined;
      }
      length -= (holders ? holders.length : 0);
      if (bitmask & PARTIAL_RIGHT_FLAG) {
        var partialsRight = partials,
            holdersRight = holders;

        partials = holders = undefined;
      }
      var data = isBindKey ? undefined : getData(func),
          newData = [func, bitmask, thisArg, partials, holders, partialsRight, holdersRight, argPos, ary, arity];

      if (data) {
        mergeData(newData, data);
        bitmask = newData[1];
        arity = newData[9];
      }
      newData[9] = arity == null
        ? (isBindKey ? 0 : func.length)
        : (nativeMax(arity - length, 0) || 0);

      if (bitmask == BIND_FLAG) {
        var result = createBindWrapper(newData[0], newData[2]);
      } else if ((bitmask == PARTIAL_FLAG || bitmask == (BIND_FLAG | PARTIAL_FLAG)) && !newData[4].length) {
        result = createPartialWrapper.apply(undefined, newData);
      } else {
        result = createHybridWrapper.apply(undefined, newData);
      }
      var setter = data ? baseSetData : setData;
      return setter(result, newData);
    }

    /**
     * A specialized version of `baseIsEqualDeep` for arrays with support for
     * partial deep comparisons.
     *
     * @private
     * @param {Array} array The array to compare.
     * @param {Array} other The other array to compare.
     * @param {Function} equalFunc The function to determine equivalents of values.
     * @param {Function} [customizer] The function to customize comparing arrays.
     * @param {boolean} [isLoose] Specify performing partial comparisons.
     * @param {Array} [stackA] Tracks traversed `value` objects.
     * @param {Array} [stackB] Tracks traversed `other` objects.
     * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.
     */
    function equalArrays(array, other, equalFunc, customizer, isLoose, stackA, stackB) {
      var index = -1,
          arrLength = array.length,
          othLength = other.length;

      if (arrLength != othLength && !(isLoose && othLength > arrLength)) {
        return false;
      }
      // Ignore non-index properties.
      while (++index < arrLength) {
        var arrValue = array[index],
            othValue = other[index],
            result = customizer ? customizer(isLoose ? othValue : arrValue, isLoose ? arrValue : othValue, index) : undefined;

        if (result !== undefined) {
          if (result) {
            continue;
          }
          return false;
        }
        // Recursively compare arrays (susceptible to call stack limits).
        if (isLoose) {
          if (!arraySome(other, function(othValue) {
                return arrValue === othValue || equalFunc(arrValue, othValue, customizer, isLoose, stackA, stackB);
              })) {
            return false;
          }
        } else if (!(arrValue === othValue || equalFunc(arrValue, othValue, customizer, isLoose, stackA, stackB))) {
          return false;
        }
      }
      return true;
    }

    /**
     * A specialized version of `baseIsEqualDeep` for comparing objects of
     * the same `toStringTag`.
     *
     * **Note:** This function only supports comparing values with tags of
     * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.
     *
     * @private
     * @param {Object} object The object to compare.
     * @param {Object} other The other object to compare.
     * @param {string} tag The `toStringTag` of the objects to compare.
     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.
     */
    function equalByTag(object, other, tag) {
      switch (tag) {
        case boolTag:
        case dateTag:
          // Coerce dates and booleans to numbers, dates to milliseconds and booleans
          // to `1` or `0` treating invalid dates coerced to `NaN` as not equal.
          return +object == +other;

        case errorTag:
          return object.name == other.name && object.message == other.message;

        case numberTag:
          // Treat `NaN` vs. `NaN` as equal.
          return (object != +object)
            ? other != +other
            : object == +other;

        case regexpTag:
        case stringTag:
          // Coerce regexes to strings and treat strings primitives and string
          // objects as equal. See https://es5.github.io/#x15.10.6.4 for more details.
          return object == (other + '');
      }
      return false;
    }

    /**
     * A specialized version of `baseIsEqualDeep` for objects with support for
     * partial deep comparisons.
     *
     * @private
     * @param {Object} object The object to compare.
     * @param {Object} other The other object to compare.
     * @param {Function} equalFunc The function to determine equivalents of values.
     * @param {Function} [customizer] The function to customize comparing values.
     * @param {boolean} [isLoose] Specify performing partial comparisons.
     * @param {Array} [stackA] Tracks traversed `value` objects.
     * @param {Array} [stackB] Tracks traversed `other` objects.
     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.
     */
    function equalObjects(object, other, equalFunc, customizer, isLoose, stackA, stackB) {
      var objProps = keys(object),
          objLength = objProps.length,
          othProps = keys(other),
          othLength = othProps.length;

      if (objLength != othLength && !isLoose) {
        return false;
      }
      var index = objLength;
      while (index--) {
        var key = objProps[index];
        if (!(isLoose ? key in other : hasOwnProperty.call(other, key))) {
          return false;
        }
      }
      var skipCtor = isLoose;
      while (++index < objLength) {
        key = objProps[index];
        var objValue = object[key],
            othValue = other[key],
            result = customizer ? customizer(isLoose ? othValue : objValue, isLoose? objValue : othValue, key) : undefined;

        // Recursively compare objects (susceptible to call stack limits).
        if (!(result === undefined ? equalFunc(objValue, othValue, customizer, isLoose, stackA, stackB) : result)) {
          return false;
        }
        skipCtor || (skipCtor = key == 'constructor');
      }
      if (!skipCtor) {
        var objCtor = object.constructor,
            othCtor = other.constructor;

        // Non `Object` object instances with different constructors are not equal.
        if (objCtor != othCtor &&
            ('constructor' in object && 'constructor' in other) &&
            !(typeof objCtor == 'function' && objCtor instanceof objCtor &&
              typeof othCtor == 'function' && othCtor instanceof othCtor)) {
          return false;
        }
      }
      return true;
    }

    /**
     * Gets the appropriate "callback" function. If the `_.callback` method is
     * customized this function returns the custom method, otherwise it returns
     * the `baseCallback` function. If arguments are provided the chosen function
     * is invoked with them and its result is returned.
     *
     * @private
     * @returns {Function} Returns the chosen function or its result.
     */
    function getCallback(func, thisArg, argCount) {
      var result = lodash.callback || callback;
      result = result === callback ? baseCallback : result;
      return argCount ? result(func, thisArg, argCount) : result;
    }

    /**
     * Gets metadata for `func`.
     *
     * @private
     * @param {Function} func The function to query.
     * @returns {*} Returns the metadata for `func`.
     */
    var getData = !metaMap ? noop : function(func) {
      return metaMap.get(func);
    };

    /**
     * Gets the name of `func`.
     *
     * @private
     * @param {Function} func The function to query.
     * @returns {string} Returns the function name.
     */
    function getFuncName(func) {
      var result = func.name,
          array = realNames[result],
          length = array ? array.length : 0;

      while (length--) {
        var data = array[length],
            otherFunc = data.func;
        if (otherFunc == null || otherFunc == func) {
          return data.name;
        }
      }
      return result;
    }

    /**
     * Gets the appropriate "indexOf" function. If the `_.indexOf` method is
     * customized this function returns the custom method, otherwise it returns
     * the `baseIndexOf` function. If arguments are provided the chosen function
     * is invoked with them and its result is returned.
     *
     * @private
     * @returns {Function|number} Returns the chosen function or its result.
     */
    function getIndexOf(collection, target, fromIndex) {
      var result = lodash.indexOf || indexOf;
      result = result === indexOf ? baseIndexOf : result;
      return collection ? result(collection, target, fromIndex) : result;
    }

    /**
     * Gets the "length" property value of `object`.
     *
     * **Note:** This function is used to avoid a [JIT bug](https://bugs.webkit.org/show_bug.cgi?id=142792)
     * that affects Safari on at least iOS 8.1-8.3 ARM64.
     *
     * @private
     * @param {Object} object The object to query.
     * @returns {*} Returns the "length" value.
     */
    var getLength = baseProperty('length');

    /**
     * Gets the propery names, values, and compare flags of `object`.
     *
     * @private
     * @param {Object} object The object to query.
     * @returns {Array} Returns the match data of `object`.
     */
    function getMatchData(object) {
      var result = pairs(object),
          length = result.length;

      while (length--) {
        result[length][2] = isStrictComparable(result[length][1]);
      }
      return result;
    }

    /**
     * Gets the native function at `key` of `object`.
     *
     * @private
     * @param {Object} object The object to query.
     * @param {string} key The key of the method to get.
     * @returns {*} Returns the function if it's native, else `undefined`.
     */
    function getNative(object, key) {
      var value = object == null ? undefined : object[key];
      return isNative(value) ? value : undefined;
    }

    /**
     * Gets the view, applying any `transforms` to the `start` and `end` positions.
     *
     * @private
     * @param {number} start The start of the view.
     * @param {number} end The end of the view.
     * @param {Array} transforms The transformations to apply to the view.
     * @returns {Object} Returns an object containing the `start` and `end`
     *  positions of the view.
     */
    function getView(start, end, transforms) {
      var index = -1,
          length = transforms.length;

      while (++index < length) {
        var data = transforms[index],
            size = data.size;

        switch (data.type) {
          case 'drop':      start += size; break;
          case 'dropRight': end -= size; break;
          case 'take':      end = nativeMin(end, start + size); break;
          case 'takeRight': start = nativeMax(start, end - size); break;
        }
      }
      return { 'start': start, 'end': end };
    }

    /**
     * Initializes an array clone.
     *
     * @private
     * @param {Array} array The array to clone.
     * @returns {Array} Returns the initialized clone.
     */
    function initCloneArray(array) {
      var length = array.length,
          result = new array.constructor(length);

      // Add array properties assigned by `RegExp#exec`.
      if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {
        result.index = array.index;
        result.input = array.input;
      }
      return result;
    }

    /**
     * Initializes an object clone.
     *
     * @private
     * @param {Object} object The object to clone.
     * @returns {Object} Returns the initialized clone.
     */
    function initCloneObject(object) {
      var Ctor = object.constructor;
      if (!(typeof Ctor == 'function' && Ctor instanceof Ctor)) {
        Ctor = Object;
      }
      return new Ctor;
    }

    /**
     * Initializes an object clone based on its `toStringTag`.
     *
     * **Note:** This function only supports cloning values with tags of
     * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.
     *
     * @private
     * @param {Object} object The object to clone.
     * @param {string} tag The `toStringTag` of the object to clone.
     * @param {boolean} [isDeep] Specify a deep clone.
     * @returns {Object} Returns the initialized clone.
     */
    function initCloneByTag(object, tag, isDeep) {
      var Ctor = object.constructor;
      switch (tag) {
        case arrayBufferTag:
          return bufferClone(object);

        case boolTag:
        case dateTag:
          return new Ctor(+object);

        case float32Tag: case float64Tag:
        case int8Tag: case int16Tag: case int32Tag:
        case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:
          var buffer = object.buffer;
          return new Ctor(isDeep ? bufferClone(buffer) : buffer, object.byteOffset, object.length);

        case numberTag:
        case stringTag:
          return new Ctor(object);

        case regexpTag:
          var result = new Ctor(object.source, reFlags.exec(object));
          result.lastIndex = object.lastIndex;
      }
      return result;
    }

    /**
     * Invokes the method at `path` on `object`.
     *
     * @private
     * @param {Object} object The object to query.
     * @param {Array|string} path The path of the method to invoke.
     * @param {Array} args The arguments to invoke the method with.
     * @returns {*} Returns the result of the invoked method.
     */
    function invokePath(object, path, args) {
      if (object != null && !isKey(path, object)) {
        path = toPath(path);
        object = path.length == 1 ? object : baseGet(object, baseSlice(path, 0, -1));
        path = last(path);
      }
      var func = object == null ? object : object[path];
      return func == null ? undefined : func.apply(object, args);
    }

    /**
     * Checks if `value` is array-like.
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is array-like, else `false`.
     */
    function isArrayLike(value) {
      return value != null && isLength(getLength(value));
    }

    /**
     * Checks if `value` is a valid array-like index.
     *
     * @private
     * @param {*} value The value to check.
     * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.
     * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.
     */
    function isIndex(value, length) {
      value = (typeof value == 'number' || reIsUint.test(value)) ? +value : -1;
      length = length == null ? MAX_SAFE_INTEGER : length;
      return value > -1 && value % 1 == 0 && value < length;
    }

    /**
     * Checks if the provided arguments are from an iteratee call.
     *
     * @private
     * @param {*} value The potential iteratee value argument.
     * @param {*} index The potential iteratee index or key argument.
     * @param {*} object The potential iteratee object argument.
     * @returns {boolean} Returns `true` if the arguments are from an iteratee call, else `false`.
     */
    function isIterateeCall(value, index, object) {
      if (!isObject(object)) {
        return false;
      }
      var type = typeof index;
      if (type == 'number'
          ? (isArrayLike(object) && isIndex(index, object.length))
          : (type == 'string' && index in object)) {
        var other = object[index];
        return value === value ? (value === other) : (other !== other);
      }
      return false;
    }

    /**
     * Checks if `value` is a property name and not a property path.
     *
     * @private
     * @param {*} value The value to check.
     * @param {Object} [object] The object to query keys on.
     * @returns {boolean} Returns `true` if `value` is a property name, else `false`.
     */
    function isKey(value, object) {
      var type = typeof value;
      if ((type == 'string' && reIsPlainProp.test(value)) || type == 'number') {
        return true;
      }
      if (isArray(value)) {
        return false;
      }
      var result = !reIsDeepProp.test(value);
      return result || (object != null && value in toObject(object));
    }

    /**
     * Checks if `func` has a lazy counterpart.
     *
     * @private
     * @param {Function} func The function to check.
     * @returns {boolean} Returns `true` if `func` has a lazy counterpart, else `false`.
     */
    function isLaziable(func) {
      var funcName = getFuncName(func);
      if (!(funcName in LazyWrapper.prototype)) {
        return false;
      }
      var other = lodash[funcName];
      if (func === other) {
        return true;
      }
      var data = getData(other);
      return !!data && func === data[0];
    }

    /**
     * Checks if `value` is a valid array-like length.
     *
     * **Note:** This function is based on [`ToLength`](http://ecma-international.org/ecma-262/6.0/#sec-tolength).
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.
     */
    function isLength(value) {
      return typeof value == 'number' && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;
    }

    /**
     * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` if suitable for strict
     *  equality comparisons, else `false`.
     */
    function isStrictComparable(value) {
      return value === value && !isObject(value);
    }

    /**
     * Merges the function metadata of `source` into `data`.
     *
     * Merging metadata reduces the number of wrappers required to invoke a function.
     * This is possible because methods like `_.bind`, `_.curry`, and `_.partial`
     * may be applied regardless of execution order. Methods like `_.ary` and `_.rearg`
     * augment function arguments, making the order in which they are executed important,
     * preventing the merging of metadata. However, we make an exception for a safe
     * common case where curried functions have `_.ary` and or `_.rearg` applied.
     *
     * @private
     * @param {Array} data The destination metadata.
     * @param {Array} source The source metadata.
     * @returns {Array} Returns `data`.
     */
    function mergeData(data, source) {
      var bitmask = data[1],
          srcBitmask = source[1],
          newBitmask = bitmask | srcBitmask,
          isCommon = newBitmask < ARY_FLAG;

      var isCombo =
        (srcBitmask == ARY_FLAG && bitmask == CURRY_FLAG) ||
        (srcBitmask == ARY_FLAG && bitmask == REARG_FLAG && data[7].length <= source[8]) ||
        (srcBitmask == (ARY_FLAG | REARG_FLAG) && bitmask == CURRY_FLAG);

      // Exit early if metadata can't be merged.
      if (!(isCommon || isCombo)) {
        return data;
      }
      // Use source `thisArg` if available.
      if (srcBitmask & BIND_FLAG) {
        data[2] = source[2];
        // Set when currying a bound function.
        newBitmask |= (bitmask & BIND_FLAG) ? 0 : CURRY_BOUND_FLAG;
      }
      // Compose partial arguments.
      var value = source[3];
      if (value) {
        var partials = data[3];
        data[3] = partials ? composeArgs(partials, value, source[4]) : arrayCopy(value);
        data[4] = partials ? replaceHolders(data[3], PLACEHOLDER) : arrayCopy(source[4]);
      }
      // Compose partial right arguments.
      value = source[5];
      if (value) {
        partials = data[5];
        data[5] = partials ? composeArgsRight(partials, value, source[6]) : arrayCopy(value);
        data[6] = partials ? replaceHolders(data[5], PLACEHOLDER) : arrayCopy(source[6]);
      }
      // Use source `argPos` if available.
      value = source[7];
      if (value) {
        data[7] = arrayCopy(value);
      }
      // Use source `ary` if it's smaller.
      if (srcBitmask & ARY_FLAG) {
        data[8] = data[8] == null ? source[8] : nativeMin(data[8], source[8]);
      }
      // Use source `arity` if one is not provided.
      if (data[9] == null) {
        data[9] = source[9];
      }
      // Use source `func` and merge bitmasks.
      data[0] = source[0];
      data[1] = newBitmask;

      return data;
    }

    /**
     * Used by `_.defaultsDeep` to customize its `_.merge` use.
     *
     * @private
     * @param {*} objectValue The destination object property value.
     * @param {*} sourceValue The source object property value.
     * @returns {*} Returns the value to assign to the destination object.
     */
    function mergeDefaults(objectValue, sourceValue) {
      return objectValue === undefined ? sourceValue : merge(objectValue, sourceValue, mergeDefaults);
    }

    /**
     * A specialized version of `_.pick` which picks `object` properties specified
     * by `props`.
     *
     * @private
     * @param {Object} object The source object.
     * @param {string[]} props The property names to pick.
     * @returns {Object} Returns the new object.
     */
    function pickByArray(object, props) {
      object = toObject(object);

      var index = -1,
          length = props.length,
          result = {};

      while (++index < length) {
        var key = props[index];
        if (key in object) {
          result[key] = object[key];
        }
      }
      return result;
    }

    /**
     * A specialized version of `_.pick` which picks `object` properties `predicate`
     * returns truthy for.
     *
     * @private
     * @param {Object} object The source object.
     * @param {Function} predicate The function invoked per iteration.
     * @returns {Object} Returns the new object.
     */
    function pickByCallback(object, predicate) {
      var result = {};
      baseForIn(object, function(value, key, object) {
        if (predicate(value, key, object)) {
          result[key] = value;
        }
      });
      return result;
    }

    /**
     * Reorder `array` according to the specified indexes where the element at
     * the first index is assigned as the first element, the element at
     * the second index is assigned as the second element, and so on.
     *
     * @private
     * @param {Array} array The array to reorder.
     * @param {Array} indexes The arranged array indexes.
     * @returns {Array} Returns `array`.
     */
    function reorder(array, indexes) {
      var arrLength = array.length,
          length = nativeMin(indexes.length, arrLength),
          oldArray = arrayCopy(array);

      while (length--) {
        var index = indexes[length];
        array[length] = isIndex(index, arrLength) ? oldArray[index] : undefined;
      }
      return array;
    }

    /**
     * Sets metadata for `func`.
     *
     * **Note:** If this function becomes hot, i.e. is invoked a lot in a short
     * period of time, it will trip its breaker and transition to an identity function
     * to avoid garbage collection pauses in V8. See [V8 issue 2070](https://code.google.com/p/v8/issues/detail?id=2070)
     * for more details.
     *
     * @private
     * @param {Function} func The function to associate metadata with.
     * @param {*} data The metadata.
     * @returns {Function} Returns `func`.
     */
    var setData = (function() {
      var count = 0,
          lastCalled = 0;

      return function(key, value) {
        var stamp = now(),
            remaining = HOT_SPAN - (stamp - lastCalled);

        lastCalled = stamp;
        if (remaining > 0) {
          if (++count >= HOT_COUNT) {
            return key;
          }
        } else {
          count = 0;
        }
        return baseSetData(key, value);
      };
    }());

    /**
     * A fallback implementation of `Object.keys` which creates an array of the
     * own enumerable property names of `object`.
     *
     * @private
     * @param {Object} object The object to query.
     * @returns {Array} Returns the array of property names.
     */
    function shimKeys(object) {
      var props = keysIn(object),
          propsLength = props.length,
          length = propsLength && object.length;

      var allowIndexes = !!length && isLength(length) &&
        (isArray(object) || isArguments(object));

      var index = -1,
          result = [];

      while (++index < propsLength) {
        var key = props[index];
        if ((allowIndexes && isIndex(key, length)) || hasOwnProperty.call(object, key)) {
          result.push(key);
        }
      }
      return result;
    }

    /**
     * Converts `value` to an array-like object if it's not one.
     *
     * @private
     * @param {*} value The value to process.
     * @returns {Array|Object} Returns the array-like object.
     */
    function toIterable(value) {
      if (value == null) {
        return [];
      }
      if (!isArrayLike(value)) {
        return values(value);
      }
      return isObject(value) ? value : Object(value);
    }

    /**
     * Converts `value` to an object if it's not one.
     *
     * @private
     * @param {*} value The value to process.
     * @returns {Object} Returns the object.
     */
    function toObject(value) {
      return isObject(value) ? value : Object(value);
    }

    /**
     * Converts `value` to property path array if it's not one.
     *
     * @private
     * @param {*} value The value to process.
     * @returns {Array} Returns the property path array.
     */
    function toPath(value) {
      if (isArray(value)) {
        return value;
      }
      var result = [];
      baseToString(value).replace(rePropName, function(match, number, quote, string) {
        result.push(quote ? string.replace(reEscapeChar, '$1') : (number || match));
      });
      return result;
    }

    /**
     * Creates a clone of `wrapper`.
     *
     * @private
     * @param {Object} wrapper The wrapper to clone.
     * @returns {Object} Returns the cloned wrapper.
     */
    function wrapperClone(wrapper) {
      return wrapper instanceof LazyWrapper
        ? wrapper.clone()
        : new LodashWrapper(wrapper.__wrapped__, wrapper.__chain__, arrayCopy(wrapper.__actions__));
    }

    /*------------------------------------------------------------------------*/

    /**
     * Creates an array of elements split into groups the length of `size`.
     * If `collection` can't be split evenly, the final chunk will be the remaining
     * elements.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to process.
     * @param {number} [size=1] The length of each chunk.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {Array} Returns the new array containing chunks.
     * @example
     *
     * _.chunk(['a', 'b', 'c', 'd'], 2);
     * // => [['a', 'b'], ['c', 'd']]
     *
     * _.chunk(['a', 'b', 'c', 'd'], 3);
     * // => [['a', 'b', 'c'], ['d']]
     */
    function chunk(array, size, guard) {
      if (guard ? isIterateeCall(array, size, guard) : size == null) {
        size = 1;
      } else {
        size = nativeMax(nativeFloor(size) || 1, 1);
      }
      var index = 0,
          length = array ? array.length : 0,
          resIndex = -1,
          result = Array(nativeCeil(length / size));

      while (index < length) {
        result[++resIndex] = baseSlice(array, index, (index += size));
      }
      return result;
    }

    /**
     * Creates an array with all falsey values removed. The values `false`, `null`,
     * `0`, `""`, `undefined`, and `NaN` are falsey.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to compact.
     * @returns {Array} Returns the new array of filtered values.
     * @example
     *
     * _.compact([0, 1, false, 2, '', 3]);
     * // => [1, 2, 3]
     */
    function compact(array) {
      var index = -1,
          length = array ? array.length : 0,
          resIndex = -1,
          result = [];

      while (++index < length) {
        var value = array[index];
        if (value) {
          result[++resIndex] = value;
        }
      }
      return result;
    }

    /**
     * Creates an array of unique `array` values not included in the other
     * provided arrays using [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)
     * for equality comparisons.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to inspect.
     * @param {...Array} [values] The arrays of values to exclude.
     * @returns {Array} Returns the new array of filtered values.
     * @example
     *
     * _.difference([1, 2, 3], [4, 2]);
     * // => [1, 3]
     */
    var difference = restParam(function(array, values) {
      return (isObjectLike(array) && isArrayLike(array))
        ? baseDifference(array, baseFlatten(values, false, true))
        : [];
    });

    /**
     * Creates a slice of `array` with `n` elements dropped from the beginning.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to query.
     * @param {number} [n=1] The number of elements to drop.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * _.drop([1, 2, 3]);
     * // => [2, 3]
     *
     * _.drop([1, 2, 3], 2);
     * // => [3]
     *
     * _.drop([1, 2, 3], 5);
     * // => []
     *
     * _.drop([1, 2, 3], 0);
     * // => [1, 2, 3]
     */
    function drop(array, n, guard) {
      var length = array ? array.length : 0;
      if (!length) {
        return [];
      }
      if (guard ? isIterateeCall(array, n, guard) : n == null) {
        n = 1;
      }
      return baseSlice(array, n < 0 ? 0 : n);
    }

    /**
     * Creates a slice of `array` with `n` elements dropped from the end.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to query.
     * @param {number} [n=1] The number of elements to drop.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * _.dropRight([1, 2, 3]);
     * // => [1, 2]
     *
     * _.dropRight([1, 2, 3], 2);
     * // => [1]
     *
     * _.dropRight([1, 2, 3], 5);
     * // => []
     *
     * _.dropRight([1, 2, 3], 0);
     * // => [1, 2, 3]
     */
    function dropRight(array, n, guard) {
      var length = array ? array.length : 0;
      if (!length) {
        return [];
      }
      if (guard ? isIterateeCall(array, n, guard) : n == null) {
        n = 1;
      }
      n = length - (+n || 0);
      return baseSlice(array, 0, n < 0 ? 0 : n);
    }

    /**
     * Creates a slice of `array` excluding elements dropped from the end.
     * Elements are dropped until `predicate` returns falsey. The predicate is
     * bound to `thisArg` and invoked with three arguments: (value, index, array).
     *
     * If a property name is provided for `predicate` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `predicate` the created `_.matches` style
     * callback returns `true` for elements that match the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to query.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * _.dropRightWhile([1, 2, 3], function(n) {
     *   return n > 1;
     * });
     * // => [1]
     *
     * var users = [
     *   { 'user': 'barney',  'active': true },
     *   { 'user': 'fred',    'active': false },
     *   { 'user': 'pebbles', 'active': false }
     * ];
     *
     * // using the `_.matches` callback shorthand
     * _.pluck(_.dropRightWhile(users, { 'user': 'pebbles', 'active': false }), 'user');
     * // => ['barney', 'fred']
     *
     * // using the `_.matchesProperty` callback shorthand
     * _.pluck(_.dropRightWhile(users, 'active', false), 'user');
     * // => ['barney']
     *
     * // using the `_.property` callback shorthand
     * _.pluck(_.dropRightWhile(users, 'active'), 'user');
     * // => ['barney', 'fred', 'pebbles']
     */
    function dropRightWhile(array, predicate, thisArg) {
      return (array && array.length)
        ? baseWhile(array, getCallback(predicate, thisArg, 3), true, true)
        : [];
    }

    /**
     * Creates a slice of `array` excluding elements dropped from the beginning.
     * Elements are dropped until `predicate` returns falsey. The predicate is
     * bound to `thisArg` and invoked with three arguments: (value, index, array).
     *
     * If a property name is provided for `predicate` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `predicate` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to query.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * _.dropWhile([1, 2, 3], function(n) {
     *   return n < 3;
     * });
     * // => [3]
     *
     * var users = [
     *   { 'user': 'barney',  'active': false },
     *   { 'user': 'fred',    'active': false },
     *   { 'user': 'pebbles', 'active': true }
     * ];
     *
     * // using the `_.matches` callback shorthand
     * _.pluck(_.dropWhile(users, { 'user': 'barney', 'active': false }), 'user');
     * // => ['fred', 'pebbles']
     *
     * // using the `_.matchesProperty` callback shorthand
     * _.pluck(_.dropWhile(users, 'active', false), 'user');
     * // => ['pebbles']
     *
     * // using the `_.property` callback shorthand
     * _.pluck(_.dropWhile(users, 'active'), 'user');
     * // => ['barney', 'fred', 'pebbles']
     */
    function dropWhile(array, predicate, thisArg) {
      return (array && array.length)
        ? baseWhile(array, getCallback(predicate, thisArg, 3), true)
        : [];
    }

    /**
     * Fills elements of `array` with `value` from `start` up to, but not
     * including, `end`.
     *
     * **Note:** This method mutates `array`.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to fill.
     * @param {*} value The value to fill `array` with.
     * @param {number} [start=0] The start position.
     * @param {number} [end=array.length] The end position.
     * @returns {Array} Returns `array`.
     * @example
     *
     * var array = [1, 2, 3];
     *
     * _.fill(array, 'a');
     * console.log(array);
     * // => ['a', 'a', 'a']
     *
     * _.fill(Array(3), 2);
     * // => [2, 2, 2]
     *
     * _.fill([4, 6, 8], '*', 1, 2);
     * // => [4, '*', 8]
     */
    function fill(array, value, start, end) {
      var length = array ? array.length : 0;
      if (!length) {
        return [];
      }
      if (start && typeof start != 'number' && isIterateeCall(array, value, start)) {
        start = 0;
        end = length;
      }
      return baseFill(array, value, start, end);
    }

    /**
     * This method is like `_.find` except that it returns the index of the first
     * element `predicate` returns truthy for instead of the element itself.
     *
     * If a property name is provided for `predicate` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `predicate` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to search.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {number} Returns the index of the found element, else `-1`.
     * @example
     *
     * var users = [
     *   { 'user': 'barney',  'active': false },
     *   { 'user': 'fred',    'active': false },
     *   { 'user': 'pebbles', 'active': true }
     * ];
     *
     * _.findIndex(users, function(chr) {
     *   return chr.user == 'barney';
     * });
     * // => 0
     *
     * // using the `_.matches` callback shorthand
     * _.findIndex(users, { 'user': 'fred', 'active': false });
     * // => 1
     *
     * // using the `_.matchesProperty` callback shorthand
     * _.findIndex(users, 'active', false);
     * // => 0
     *
     * // using the `_.property` callback shorthand
     * _.findIndex(users, 'active');
     * // => 2
     */
    var findIndex = createFindIndex();

    /**
     * This method is like `_.findIndex` except that it iterates over elements
     * of `collection` from right to left.
     *
     * If a property name is provided for `predicate` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `predicate` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to search.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {number} Returns the index of the found element, else `-1`.
     * @example
     *
     * var users = [
     *   { 'user': 'barney',  'active': true },
     *   { 'user': 'fred',    'active': false },
     *   { 'user': 'pebbles', 'active': false }
     * ];
     *
     * _.findLastIndex(users, function(chr) {
     *   return chr.user == 'pebbles';
     * });
     * // => 2
     *
     * // using the `_.matches` callback shorthand
     * _.findLastIndex(users, { 'user': 'barney', 'active': true });
     * // => 0
     *
     * // using the `_.matchesProperty` callback shorthand
     * _.findLastIndex(users, 'active', false);
     * // => 2
     *
     * // using the `_.property` callback shorthand
     * _.findLastIndex(users, 'active');
     * // => 0
     */
    var findLastIndex = createFindIndex(true);

    /**
     * Gets the first element of `array`.
     *
     * @static
     * @memberOf _
     * @alias head
     * @category Array
     * @param {Array} array The array to query.
     * @returns {*} Returns the first element of `array`.
     * @example
     *
     * _.first([1, 2, 3]);
     * // => 1
     *
     * _.first([]);
     * // => undefined
     */
    function first(array) {
      return array ? array[0] : undefined;
    }

    /**
     * Flattens a nested array. If `isDeep` is `true` the array is recursively
     * flattened, otherwise it is only flattened a single level.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to flatten.
     * @param {boolean} [isDeep] Specify a deep flatten.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {Array} Returns the new flattened array.
     * @example
     *
     * _.flatten([1, [2, 3, [4]]]);
     * // => [1, 2, 3, [4]]
     *
     * // using `isDeep`
     * _.flatten([1, [2, 3, [4]]], true);
     * // => [1, 2, 3, 4]
     */
    function flatten(array, isDeep, guard) {
      var length = array ? array.length : 0;
      if (guard && isIterateeCall(array, isDeep, guard)) {
        isDeep = false;
      }
      return length ? baseFlatten(array, isDeep) : [];
    }

    /**
     * Recursively flattens a nested array.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to recursively flatten.
     * @returns {Array} Returns the new flattened array.
     * @example
     *
     * _.flattenDeep([1, [2, 3, [4]]]);
     * // => [1, 2, 3, 4]
     */
    function flattenDeep(array) {
      var length = array ? array.length : 0;
      return length ? baseFlatten(array, true) : [];
    }

    /**
     * Gets the index at which the first occurrence of `value` is found in `array`
     * using [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)
     * for equality comparisons. If `fromIndex` is negative, it is used as the offset
     * from the end of `array`. If `array` is sorted providing `true` for `fromIndex`
     * performs a faster binary search.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to search.
     * @param {*} value The value to search for.
     * @param {boolean|number} [fromIndex=0] The index to search from or `true`
     *  to perform a binary search on a sorted array.
     * @returns {number} Returns the index of the matched value, else `-1`.
     * @example
     *
     * _.indexOf([1, 2, 1, 2], 2);
     * // => 1
     *
     * // using `fromIndex`
     * _.indexOf([1, 2, 1, 2], 2, 2);
     * // => 3
     *
     * // performing a binary search
     * _.indexOf([1, 1, 2, 2], 2, true);
     * // => 2
     */
    function indexOf(array, value, fromIndex) {
      var length = array ? array.length : 0;
      if (!length) {
        return -1;
      }
      if (typeof fromIndex == 'number') {
        fromIndex = fromIndex < 0 ? nativeMax(length + fromIndex, 0) : fromIndex;
      } else if (fromIndex) {
        var index = binaryIndex(array, value);
        if (index < length &&
            (value === value ? (value === array[index]) : (array[index] !== array[index]))) {
          return index;
        }
        return -1;
      }
      return baseIndexOf(array, value, fromIndex || 0);
    }

    /**
     * Gets all but the last element of `array`.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to query.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * _.initial([1, 2, 3]);
     * // => [1, 2]
     */
    function initial(array) {
      return dropRight(array, 1);
    }

    /**
     * Creates an array of unique values that are included in all of the provided
     * arrays using [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)
     * for equality comparisons.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {...Array} [arrays] The arrays to inspect.
     * @returns {Array} Returns the new array of shared values.
     * @example
     * _.intersection([1, 2], [4, 2], [2, 1]);
     * // => [2]
     */
    var intersection = restParam(function(arrays) {
      var othLength = arrays.length,
          othIndex = othLength,
          caches = Array(length),
          indexOf = getIndexOf(),
          isCommon = indexOf == baseIndexOf,
          result = [];

      while (othIndex--) {
        var value = arrays[othIndex] = isArrayLike(value = arrays[othIndex]) ? value : [];
        caches[othIndex] = (isCommon && value.length >= 120) ? createCache(othIndex && value) : null;
      }
      var array = arrays[0],
          index = -1,
          length = array ? array.length : 0,
          seen = caches[0];

      outer:
      while (++index < length) {
        value = array[index];
        if ((seen ? cacheIndexOf(seen, value) : indexOf(result, value, 0)) < 0) {
          var othIndex = othLength;
          while (--othIndex) {
            var cache = caches[othIndex];
            if ((cache ? cacheIndexOf(cache, value) : indexOf(arrays[othIndex], value, 0)) < 0) {
              continue outer;
            }
          }
          if (seen) {
            seen.push(value);
          }
          result.push(value);
        }
      }
      return result;
    });

    /**
     * Gets the last element of `array`.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to query.
     * @returns {*} Returns the last element of `array`.
     * @example
     *
     * _.last([1, 2, 3]);
     * // => 3
     */
    function last(array) {
      var length = array ? array.length : 0;
      return length ? array[length - 1] : undefined;
    }

    /**
     * This method is like `_.indexOf` except that it iterates over elements of
     * `array` from right to left.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to search.
     * @param {*} value The value to search for.
     * @param {boolean|number} [fromIndex=array.length-1] The index to search from
     *  or `true` to perform a binary search on a sorted array.
     * @returns {number} Returns the index of the matched value, else `-1`.
     * @example
     *
     * _.lastIndexOf([1, 2, 1, 2], 2);
     * // => 3
     *
     * // using `fromIndex`
     * _.lastIndexOf([1, 2, 1, 2], 2, 2);
     * // => 1
     *
     * // performing a binary search
     * _.lastIndexOf([1, 1, 2, 2], 2, true);
     * // => 3
     */
    function lastIndexOf(array, value, fromIndex) {
      var length = array ? array.length : 0;
      if (!length) {
        return -1;
      }
      var index = length;
      if (typeof fromIndex == 'number') {
        index = (fromIndex < 0 ? nativeMax(length + fromIndex, 0) : nativeMin(fromIndex || 0, length - 1)) + 1;
      } else if (fromIndex) {
        index = binaryIndex(array, value, true) - 1;
        var other = array[index];
        if (value === value ? (value === other) : (other !== other)) {
          return index;
        }
        return -1;
      }
      if (value !== value) {
        return indexOfNaN(array, index, true);
      }
      while (index--) {
        if (array[index] === value) {
          return index;
        }
      }
      return -1;
    }

    /**
     * Removes all provided values from `array` using
     * [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)
     * for equality comparisons.
     *
     * **Note:** Unlike `_.without`, this method mutates `array`.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to modify.
     * @param {...*} [values] The values to remove.
     * @returns {Array} Returns `array`.
     * @example
     *
     * var array = [1, 2, 3, 1, 2, 3];
     *
     * _.pull(array, 2, 3);
     * console.log(array);
     * // => [1, 1]
     */
    function pull() {
      var args = arguments,
          array = args[0];

      if (!(array && array.length)) {
        return array;
      }
      var index = 0,
          indexOf = getIndexOf(),
          length = args.length;

      while (++index < length) {
        var fromIndex = 0,
            value = args[index];

        while ((fromIndex = indexOf(array, value, fromIndex)) > -1) {
          splice.call(array, fromIndex, 1);
        }
      }
      return array;
    }

    /**
     * Removes elements from `array` corresponding to the given indexes and returns
     * an array of the removed elements. Indexes may be specified as an array of
     * indexes or as individual arguments.
     *
     * **Note:** Unlike `_.at`, this method mutates `array`.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to modify.
     * @param {...(number|number[])} [indexes] The indexes of elements to remove,
     *  specified as individual indexes or arrays of indexes.
     * @returns {Array} Returns the new array of removed elements.
     * @example
     *
     * var array = [5, 10, 15, 20];
     * var evens = _.pullAt(array, 1, 3);
     *
     * console.log(array);
     * // => [5, 15]
     *
     * console.log(evens);
     * // => [10, 20]
     */
    var pullAt = restParam(function(array, indexes) {
      indexes = baseFlatten(indexes);

      var result = baseAt(array, indexes);
      basePullAt(array, indexes.sort(baseCompareAscending));
      return result;
    });

    /**
     * Removes all elements from `array` that `predicate` returns truthy for
     * and returns an array of the removed elements. The predicate is bound to
     * `thisArg` and invoked with three arguments: (value, index, array).
     *
     * If a property name is provided for `predicate` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `predicate` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * **Note:** Unlike `_.filter`, this method mutates `array`.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to modify.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {Array} Returns the new array of removed elements.
     * @example
     *
     * var array = [1, 2, 3, 4];
     * var evens = _.remove(array, function(n) {
     *   return n % 2 == 0;
     * });
     *
     * console.log(array);
     * // => [1, 3]
     *
     * console.log(evens);
     * // => [2, 4]
     */
    function remove(array, predicate, thisArg) {
      var result = [];
      if (!(array && array.length)) {
        return result;
      }
      var index = -1,
          indexes = [],
          length = array.length;

      predicate = getCallback(predicate, thisArg, 3);
      while (++index < length) {
        var value = array[index];
        if (predicate(value, index, array)) {
          result.push(value);
          indexes.push(index);
        }
      }
      basePullAt(array, indexes);
      return result;
    }

    /**
     * Gets all but the first element of `array`.
     *
     * @static
     * @memberOf _
     * @alias tail
     * @category Array
     * @param {Array} array The array to query.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * _.rest([1, 2, 3]);
     * // => [2, 3]
     */
    function rest(array) {
      return drop(array, 1);
    }

    /**
     * Creates a slice of `array` from `start` up to, but not including, `end`.
     *
     * **Note:** This method is used instead of `Array#slice` to support node
     * lists in IE < 9 and to ensure dense arrays are returned.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to slice.
     * @param {number} [start=0] The start position.
     * @param {number} [end=array.length] The end position.
     * @returns {Array} Returns the slice of `array`.
     */
    function slice(array, start, end) {
      var length = array ? array.length : 0;
      if (!length) {
        return [];
      }
      if (end && typeof end != 'number' && isIterateeCall(array, start, end)) {
        start = 0;
        end = length;
      }
      return baseSlice(array, start, end);
    }

    /**
     * Uses a binary search to determine the lowest index at which `value` should
     * be inserted into `array` in order to maintain its sort order. If an iteratee
     * function is provided it is invoked for `value` and each element of `array`
     * to compute their sort ranking. The iteratee is bound to `thisArg` and
     * invoked with one argument; (value).
     *
     * If a property name is provided for `iteratee` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `iteratee` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The sorted array to inspect.
     * @param {*} value The value to evaluate.
     * @param {Function|Object|string} [iteratee=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {number} Returns the index at which `value` should be inserted
     *  into `array`.
     * @example
     *
     * _.sortedIndex([30, 50], 40);
     * // => 1
     *
     * _.sortedIndex([4, 4, 5, 5], 5);
     * // => 2
     *
     * var dict = { 'data': { 'thirty': 30, 'forty': 40, 'fifty': 50 } };
     *
     * // using an iteratee function
     * _.sortedIndex(['thirty', 'fifty'], 'forty', function(word) {
     *   return this.data[word];
     * }, dict);
     * // => 1
     *
     * // using the `_.property` callback shorthand
     * _.sortedIndex([{ 'x': 30 }, { 'x': 50 }], { 'x': 40 }, 'x');
     * // => 1
     */
    var sortedIndex = createSortedIndex();

    /**
     * This method is like `_.sortedIndex` except that it returns the highest
     * index at which `value` should be inserted into `array` in order to
     * maintain its sort order.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The sorted array to inspect.
     * @param {*} value The value to evaluate.
     * @param {Function|Object|string} [iteratee=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {number} Returns the index at which `value` should be inserted
     *  into `array`.
     * @example
     *
     * _.sortedLastIndex([4, 4, 5, 5], 5);
     * // => 4
     */
    var sortedLastIndex = createSortedIndex(true);

    /**
     * Creates a slice of `array` with `n` elements taken from the beginning.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to query.
     * @param {number} [n=1] The number of elements to take.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * _.take([1, 2, 3]);
     * // => [1]
     *
     * _.take([1, 2, 3], 2);
     * // => [1, 2]
     *
     * _.take([1, 2, 3], 5);
     * // => [1, 2, 3]
     *
     * _.take([1, 2, 3], 0);
     * // => []
     */
    function take(array, n, guard) {
      var length = array ? array.length : 0;
      if (!length) {
        return [];
      }
      if (guard ? isIterateeCall(array, n, guard) : n == null) {
        n = 1;
      }
      return baseSlice(array, 0, n < 0 ? 0 : n);
    }

    /**
     * Creates a slice of `array` with `n` elements taken from the end.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to query.
     * @param {number} [n=1] The number of elements to take.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * _.takeRight([1, 2, 3]);
     * // => [3]
     *
     * _.takeRight([1, 2, 3], 2);
     * // => [2, 3]
     *
     * _.takeRight([1, 2, 3], 5);
     * // => [1, 2, 3]
     *
     * _.takeRight([1, 2, 3], 0);
     * // => []
     */
    function takeRight(array, n, guard) {
      var length = array ? array.length : 0;
      if (!length) {
        return [];
      }
      if (guard ? isIterateeCall(array, n, guard) : n == null) {
        n = 1;
      }
      n = length - (+n || 0);
      return baseSlice(array, n < 0 ? 0 : n);
    }

    /**
     * Creates a slice of `array` with elements taken from the end. Elements are
     * taken until `predicate` returns falsey. The predicate is bound to `thisArg`
     * and invoked with three arguments: (value, index, array).
     *
     * If a property name is provided for `predicate` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `predicate` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to query.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * _.takeRightWhile([1, 2, 3], function(n) {
     *   return n > 1;
     * });
     * // => [2, 3]
     *
     * var users = [
     *   { 'user': 'barney',  'active': true },
     *   { 'user': 'fred',    'active': false },
     *   { 'user': 'pebbles', 'active': false }
     * ];
     *
     * // using the `_.matches` callback shorthand
     * _.pluck(_.takeRightWhile(users, { 'user': 'pebbles', 'active': false }), 'user');
     * // => ['pebbles']
     *
     * // using the `_.matchesProperty` callback shorthand
     * _.pluck(_.takeRightWhile(users, 'active', false), 'user');
     * // => ['fred', 'pebbles']
     *
     * // using the `_.property` callback shorthand
     * _.pluck(_.takeRightWhile(users, 'active'), 'user');
     * // => []
     */
    function takeRightWhile(array, predicate, thisArg) {
      return (array && array.length)
        ? baseWhile(array, getCallback(predicate, thisArg, 3), false, true)
        : [];
    }

    /**
     * Creates a slice of `array` with elements taken from the beginning. Elements
     * are taken until `predicate` returns falsey. The predicate is bound to
     * `thisArg` and invoked with three arguments: (value, index, array).
     *
     * If a property name is provided for `predicate` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `predicate` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to query.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * _.takeWhile([1, 2, 3], function(n) {
     *   return n < 3;
     * });
     * // => [1, 2]
     *
     * var users = [
     *   { 'user': 'barney',  'active': false },
     *   { 'user': 'fred',    'active': false},
     *   { 'user': 'pebbles', 'active': true }
     * ];
     *
     * // using the `_.matches` callback shorthand
     * _.pluck(_.takeWhile(users, { 'user': 'barney', 'active': false }), 'user');
     * // => ['barney']
     *
     * // using the `_.matchesProperty` callback shorthand
     * _.pluck(_.takeWhile(users, 'active', false), 'user');
     * // => ['barney', 'fred']
     *
     * // using the `_.property` callback shorthand
     * _.pluck(_.takeWhile(users, 'active'), 'user');
     * // => []
     */
    function takeWhile(array, predicate, thisArg) {
      return (array && array.length)
        ? baseWhile(array, getCallback(predicate, thisArg, 3))
        : [];
    }

    /**
     * Creates an array of unique values, in order, from all of the provided arrays
     * using [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)
     * for equality comparisons.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {...Array} [arrays] The arrays to inspect.
     * @returns {Array} Returns the new array of combined values.
     * @example
     *
     * _.union([1, 2], [4, 2], [2, 1]);
     * // => [1, 2, 4]
     */
    var union = restParam(function(arrays) {
      return baseUniq(baseFlatten(arrays, false, true));
    });

    /**
     * Creates a duplicate-free version of an array, using
     * [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)
     * for equality comparisons, in which only the first occurence of each element
     * is kept. Providing `true` for `isSorted` performs a faster search algorithm
     * for sorted arrays. If an iteratee function is provided it is invoked for
     * each element in the array to generate the criterion by which uniqueness
     * is computed. The `iteratee` is bound to `thisArg` and invoked with three
     * arguments: (value, index, array).
     *
     * If a property name is provided for `iteratee` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `iteratee` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @alias unique
     * @category Array
     * @param {Array} array The array to inspect.
     * @param {boolean} [isSorted] Specify the array is sorted.
     * @param {Function|Object|string} [iteratee] The function invoked per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Array} Returns the new duplicate-value-free array.
     * @example
     *
     * _.uniq([2, 1, 2]);
     * // => [2, 1]
     *
     * // using `isSorted`
     * _.uniq([1, 1, 2], true);
     * // => [1, 2]
     *
     * // using an iteratee function
     * _.uniq([1, 2.5, 1.5, 2], function(n) {
     *   return this.floor(n);
     * }, Math);
     * // => [1, 2.5]
     *
     * // using the `_.property` callback shorthand
     * _.uniq([{ 'x': 1 }, { 'x': 2 }, { 'x': 1 }], 'x');
     * // => [{ 'x': 1 }, { 'x': 2 }]
     */
    function uniq(array, isSorted, iteratee, thisArg) {
      var length = array ? array.length : 0;
      if (!length) {
        return [];
      }
      if (isSorted != null && typeof isSorted != 'boolean') {
        thisArg = iteratee;
        iteratee = isIterateeCall(array, isSorted, thisArg) ? undefined : isSorted;
        isSorted = false;
      }
      var callback = getCallback();
      if (!(iteratee == null && callback === baseCallback)) {
        iteratee = callback(iteratee, thisArg, 3);
      }
      return (isSorted && getIndexOf() == baseIndexOf)
        ? sortedUniq(array, iteratee)
        : baseUniq(array, iteratee);
    }

    /**
     * This method is like `_.zip` except that it accepts an array of grouped
     * elements and creates an array regrouping the elements to their pre-zip
     * configuration.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array of grouped elements to process.
     * @returns {Array} Returns the new array of regrouped elements.
     * @example
     *
     * var zipped = _.zip(['fred', 'barney'], [30, 40], [true, false]);
     * // => [['fred', 30, true], ['barney', 40, false]]
     *
     * _.unzip(zipped);
     * // => [['fred', 'barney'], [30, 40], [true, false]]
     */
    function unzip(array) {
      if (!(array && array.length)) {
        return [];
      }
      var index = -1,
          length = 0;

      array = arrayFilter(array, function(group) {
        if (isArrayLike(group)) {
          length = nativeMax(group.length, length);
          return true;
        }
      });
      var result = Array(length);
      while (++index < length) {
        result[index] = arrayMap(array, baseProperty(index));
      }
      return result;
    }

    /**
     * This method is like `_.unzip` except that it accepts an iteratee to specify
     * how regrouped values should be combined. The `iteratee` is bound to `thisArg`
     * and invoked with four arguments: (accumulator, value, index, group).
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array of grouped elements to process.
     * @param {Function} [iteratee] The function to combine regrouped values.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Array} Returns the new array of regrouped elements.
     * @example
     *
     * var zipped = _.zip([1, 2], [10, 20], [100, 200]);
     * // => [[1, 10, 100], [2, 20, 200]]
     *
     * _.unzipWith(zipped, _.add);
     * // => [3, 30, 300]
     */
    function unzipWith(array, iteratee, thisArg) {
      var length = array ? array.length : 0;
      if (!length) {
        return [];
      }
      var result = unzip(array);
      if (iteratee == null) {
        return result;
      }
      iteratee = bindCallback(iteratee, thisArg, 4);
      return arrayMap(result, function(group) {
        return arrayReduce(group, iteratee, undefined, true);
      });
    }

    /**
     * Creates an array excluding all provided values using
     * [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)
     * for equality comparisons.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {Array} array The array to filter.
     * @param {...*} [values] The values to exclude.
     * @returns {Array} Returns the new array of filtered values.
     * @example
     *
     * _.without([1, 2, 1, 3], 1, 2);
     * // => [3]
     */
    var without = restParam(function(array, values) {
      return isArrayLike(array)
        ? baseDifference(array, values)
        : [];
    });

    /**
     * Creates an array of unique values that is the [symmetric difference](https://en.wikipedia.org/wiki/Symmetric_difference)
     * of the provided arrays.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {...Array} [arrays] The arrays to inspect.
     * @returns {Array} Returns the new array of values.
     * @example
     *
     * _.xor([1, 2], [4, 2]);
     * // => [1, 4]
     */
    function xor() {
      var index = -1,
          length = arguments.length;

      while (++index < length) {
        var array = arguments[index];
        if (isArrayLike(array)) {
          var result = result
            ? arrayPush(baseDifference(result, array), baseDifference(array, result))
            : array;
        }
      }
      return result ? baseUniq(result) : [];
    }

    /**
     * Creates an array of grouped elements, the first of which contains the first
     * elements of the given arrays, the second of which contains the second elements
     * of the given arrays, and so on.
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {...Array} [arrays] The arrays to process.
     * @returns {Array} Returns the new array of grouped elements.
     * @example
     *
     * _.zip(['fred', 'barney'], [30, 40], [true, false]);
     * // => [['fred', 30, true], ['barney', 40, false]]
     */
    var zip = restParam(unzip);

    /**
     * The inverse of `_.pairs`; this method returns an object composed from arrays
     * of property names and values. Provide either a single two dimensional array,
     * e.g. `[[key1, value1], [key2, value2]]` or two arrays, one of property names
     * and one of corresponding values.
     *
     * @static
     * @memberOf _
     * @alias object
     * @category Array
     * @param {Array} props The property names.
     * @param {Array} [values=[]] The property values.
     * @returns {Object} Returns the new object.
     * @example
     *
     * _.zipObject([['fred', 30], ['barney', 40]]);
     * // => { 'fred': 30, 'barney': 40 }
     *
     * _.zipObject(['fred', 'barney'], [30, 40]);
     * // => { 'fred': 30, 'barney': 40 }
     */
    function zipObject(props, values) {
      var index = -1,
          length = props ? props.length : 0,
          result = {};

      if (length && !values && !isArray(props[0])) {
        values = [];
      }
      while (++index < length) {
        var key = props[index];
        if (values) {
          result[key] = values[index];
        } else if (key) {
          result[key[0]] = key[1];
        }
      }
      return result;
    }

    /**
     * This method is like `_.zip` except that it accepts an iteratee to specify
     * how grouped values should be combined. The `iteratee` is bound to `thisArg`
     * and invoked with four arguments: (accumulator, value, index, group).
     *
     * @static
     * @memberOf _
     * @category Array
     * @param {...Array} [arrays] The arrays to process.
     * @param {Function} [iteratee] The function to combine grouped values.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Array} Returns the new array of grouped elements.
     * @example
     *
     * _.zipWith([1, 2], [10, 20], [100, 200], _.add);
     * // => [111, 222]
     */
    var zipWith = restParam(function(arrays) {
      var length = arrays.length,
          iteratee = length > 2 ? arrays[length - 2] : undefined,
          thisArg = length > 1 ? arrays[length - 1] : undefined;

      if (length > 2 && typeof iteratee == 'function') {
        length -= 2;
      } else {
        iteratee = (length > 1 && typeof thisArg == 'function') ? (--length, thisArg) : undefined;
        thisArg = undefined;
      }
      arrays.length = length;
      return unzipWith(arrays, iteratee, thisArg);
    });

    /*------------------------------------------------------------------------*/

    /**
     * Creates a `lodash` object that wraps `value` with explicit method
     * chaining enabled.
     *
     * @static
     * @memberOf _
     * @category Chain
     * @param {*} value The value to wrap.
     * @returns {Object} Returns the new `lodash` wrapper instance.
     * @example
     *
     * var users = [
     *   { 'user': 'barney',  'age': 36 },
     *   { 'user': 'fred',    'age': 40 },
     *   { 'user': 'pebbles', 'age': 1 }
     * ];
     *
     * var youngest = _.chain(users)
     *   .sortBy('age')
     *   .map(function(chr) {
     *     return chr.user + ' is ' + chr.age;
     *   })
     *   .first()
     *   .value();
     * // => 'pebbles is 1'
     */
    function chain(value) {
      var result = lodash(value);
      result.__chain__ = true;
      return result;
    }

    /**
     * This method invokes `interceptor` and returns `value`. The interceptor is
     * bound to `thisArg` and invoked with one argument; (value). The purpose of
     * this method is to "tap into" a method chain in order to perform operations
     * on intermediate results within the chain.
     *
     * @static
     * @memberOf _
     * @category Chain
     * @param {*} value The value to provide to `interceptor`.
     * @param {Function} interceptor The function to invoke.
     * @param {*} [thisArg] The `this` binding of `interceptor`.
     * @returns {*} Returns `value`.
     * @example
     *
     * _([1, 2, 3])
     *  .tap(function(array) {
     *    array.pop();
     *  })
     *  .reverse()
     *  .value();
     * // => [2, 1]
     */
    function tap(value, interceptor, thisArg) {
      interceptor.call(thisArg, value);
      return value;
    }

    /**
     * This method is like `_.tap` except that it returns the result of `interceptor`.
     *
     * @static
     * @memberOf _
     * @category Chain
     * @param {*} value The value to provide to `interceptor`.
     * @param {Function} interceptor The function to invoke.
     * @param {*} [thisArg] The `this` binding of `interceptor`.
     * @returns {*} Returns the result of `interceptor`.
     * @example
     *
     * _('  abc  ')
     *  .chain()
     *  .trim()
     *  .thru(function(value) {
     *    return [value];
     *  })
     *  .value();
     * // => ['abc']
     */
    function thru(value, interceptor, thisArg) {
      return interceptor.call(thisArg, value);
    }

    /**
     * Enables explicit method chaining on the wrapper object.
     *
     * @name chain
     * @memberOf _
     * @category Chain
     * @returns {Object} Returns the new `lodash` wrapper instance.
     * @example
     *
     * var users = [
     *   { 'user': 'barney', 'age': 36 },
     *   { 'user': 'fred',   'age': 40 }
     * ];
     *
     * // without explicit chaining
     * _(users).first();
     * // => { 'user': 'barney', 'age': 36 }
     *
     * // with explicit chaining
     * _(users).chain()
     *   .first()
     *   .pick('user')
     *   .value();
     * // => { 'user': 'barney' }
     */
    function wrapperChain() {
      return chain(this);
    }

    /**
     * Executes the chained sequence and returns the wrapped result.
     *
     * @name commit
     * @memberOf _
     * @category Chain
     * @returns {Object} Returns the new `lodash` wrapper instance.
     * @example
     *
     * var array = [1, 2];
     * var wrapped = _(array).push(3);
     *
     * console.log(array);
     * // => [1, 2]
     *
     * wrapped = wrapped.commit();
     * console.log(array);
     * // => [1, 2, 3]
     *
     * wrapped.last();
     * // => 3
     *
     * console.log(array);
     * // => [1, 2, 3]
     */
    function wrapperCommit() {
      return new LodashWrapper(this.value(), this.__chain__);
    }

    /**
     * Creates a new array joining a wrapped array with any additional arrays
     * and/or values.
     *
     * @name concat
     * @memberOf _
     * @category Chain
     * @param {...*} [values] The values to concatenate.
     * @returns {Array} Returns the new concatenated array.
     * @example
     *
     * var array = [1];
     * var wrapped = _(array).concat(2, [3], [[4]]);
     *
     * console.log(wrapped.value());
     * // => [1, 2, 3, [4]]
     *
     * console.log(array);
     * // => [1]
     */
    var wrapperConcat = restParam(function(values) {
      values = baseFlatten(values);
      return this.thru(function(array) {
        return arrayConcat(isArray(array) ? array : [toObject(array)], values);
      });
    });

    /**
     * Creates a clone of the chained sequence planting `value` as the wrapped value.
     *
     * @name plant
     * @memberOf _
     * @category Chain
     * @returns {Object} Returns the new `lodash` wrapper instance.
     * @example
     *
     * var array = [1, 2];
     * var wrapped = _(array).map(function(value) {
     *   return Math.pow(value, 2);
     * });
     *
     * var other = [3, 4];
     * var otherWrapped = wrapped.plant(other);
     *
     * otherWrapped.value();
     * // => [9, 16]
     *
     * wrapped.value();
     * // => [1, 4]
     */
    function wrapperPlant(value) {
      var result,
          parent = this;

      while (parent instanceof baseLodash) {
        var clone = wrapperClone(parent);
        if (result) {
          previous.__wrapped__ = clone;
        } else {
          result = clone;
        }
        var previous = clone;
        parent = parent.__wrapped__;
      }
      previous.__wrapped__ = value;
      return result;
    }

    /**
     * Reverses the wrapped array so the first element becomes the last, the
     * second element becomes the second to last, and so on.
     *
     * **Note:** This method mutates the wrapped array.
     *
     * @name reverse
     * @memberOf _
     * @category Chain
     * @returns {Object} Returns the new reversed `lodash` wrapper instance.
     * @example
     *
     * var array = [1, 2, 3];
     *
     * _(array).reverse().value()
     * // => [3, 2, 1]
     *
     * console.log(array);
     * // => [3, 2, 1]
     */
    function wrapperReverse() {
      var value = this.__wrapped__;

      var interceptor = function(value) {
        return (wrapped && wrapped.__dir__ < 0) ? value : value.reverse();
      };
      if (value instanceof LazyWrapper) {
        var wrapped = value;
        if (this.__actions__.length) {
          wrapped = new LazyWrapper(this);
        }
        wrapped = wrapped.reverse();
        wrapped.__actions__.push({ 'func': thru, 'args': [interceptor], 'thisArg': undefined });
        return new LodashWrapper(wrapped, this.__chain__);
      }
      return this.thru(interceptor);
    }

    /**
     * Produces the result of coercing the unwrapped value to a string.
     *
     * @name toString
     * @memberOf _
     * @category Chain
     * @returns {string} Returns the coerced string value.
     * @example
     *
     * _([1, 2, 3]).toString();
     * // => '1,2,3'
     */
    function wrapperToString() {
      return (this.value() + '');
    }

    /**
     * Executes the chained sequence to extract the unwrapped value.
     *
     * @name value
     * @memberOf _
     * @alias run, toJSON, valueOf
     * @category Chain
     * @returns {*} Returns the resolved unwrapped value.
     * @example
     *
     * _([1, 2, 3]).value();
     * // => [1, 2, 3]
     */
    function wrapperValue() {
      return baseWrapperValue(this.__wrapped__, this.__actions__);
    }

    /*------------------------------------------------------------------------*/

    /**
     * Creates an array of elements corresponding to the given keys, or indexes,
     * of `collection`. Keys may be specified as individual arguments or as arrays
     * of keys.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {...(number|number[]|string|string[])} [props] The property names
     *  or indexes of elements to pick, specified individually or in arrays.
     * @returns {Array} Returns the new array of picked elements.
     * @example
     *
     * _.at(['a', 'b', 'c'], [0, 2]);
     * // => ['a', 'c']
     *
     * _.at(['barney', 'fred', 'pebbles'], 0, 2);
     * // => ['barney', 'pebbles']
     */
    var at = restParam(function(collection, props) {
      return baseAt(collection, baseFlatten(props));
    });

    /**
     * Creates an object composed of keys generated from the results of running
     * each element of `collection` through `iteratee`. The corresponding value
     * of each key is the number of times the key was returned by `iteratee`.
     * The `iteratee` is bound to `thisArg` and invoked with three arguments:
     * (value, index|key, collection).
     *
     * If a property name is provided for `iteratee` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `iteratee` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [iteratee=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Object} Returns the composed aggregate object.
     * @example
     *
     * _.countBy([4.3, 6.1, 6.4], function(n) {
     *   return Math.floor(n);
     * });
     * // => { '4': 1, '6': 2 }
     *
     * _.countBy([4.3, 6.1, 6.4], function(n) {
     *   return this.floor(n);
     * }, Math);
     * // => { '4': 1, '6': 2 }
     *
     * _.countBy(['one', 'two', 'three'], 'length');
     * // => { '3': 2, '5': 1 }
     */
    var countBy = createAggregator(function(result, value, key) {
      hasOwnProperty.call(result, key) ? ++result[key] : (result[key] = 1);
    });

    /**
     * Checks if `predicate` returns truthy for **all** elements of `collection`.
     * The predicate is bound to `thisArg` and invoked with three arguments:
     * (value, index|key, collection).
     *
     * If a property name is provided for `predicate` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `predicate` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @alias all
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {boolean} Returns `true` if all elements pass the predicate check,
     *  else `false`.
     * @example
     *
     * _.every([true, 1, null, 'yes'], Boolean);
     * // => false
     *
     * var users = [
     *   { 'user': 'barney', 'active': false },
     *   { 'user': 'fred',   'active': false }
     * ];
     *
     * // using the `_.matches` callback shorthand
     * _.every(users, { 'user': 'barney', 'active': false });
     * // => false
     *
     * // using the `_.matchesProperty` callback shorthand
     * _.every(users, 'active', false);
     * // => true
     *
     * // using the `_.property` callback shorthand
     * _.every(users, 'active');
     * // => false
     */
    function every(collection, predicate, thisArg) {
      var func = isArray(collection) ? arrayEvery : baseEvery;
      if (thisArg && isIterateeCall(collection, predicate, thisArg)) {
        predicate = undefined;
      }
      if (typeof predicate != 'function' || thisArg !== undefined) {
        predicate = getCallback(predicate, thisArg, 3);
      }
      return func(collection, predicate);
    }

    /**
     * Iterates over elements of `collection`, returning an array of all elements
     * `predicate` returns truthy for. The predicate is bound to `thisArg` and
     * invoked with three arguments: (value, index|key, collection).
     *
     * If a property name is provided for `predicate` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `predicate` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @alias select
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {Array} Returns the new filtered array.
     * @example
     *
     * _.filter([4, 5, 6], function(n) {
     *   return n % 2 == 0;
     * });
     * // => [4, 6]
     *
     * var users = [
     *   { 'user': 'barney', 'age': 36, 'active': true },
     *   { 'user': 'fred',   'age': 40, 'active': false }
     * ];
     *
     * // using the `_.matches` callback shorthand
     * _.pluck(_.filter(users, { 'age': 36, 'active': true }), 'user');
     * // => ['barney']
     *
     * // using the `_.matchesProperty` callback shorthand
     * _.pluck(_.filter(users, 'active', false), 'user');
     * // => ['fred']
     *
     * // using the `_.property` callback shorthand
     * _.pluck(_.filter(users, 'active'), 'user');
     * // => ['barney']
     */
    function filter(collection, predicate, thisArg) {
      var func = isArray(collection) ? arrayFilter : baseFilter;
      predicate = getCallback(predicate, thisArg, 3);
      return func(collection, predicate);
    }

    /**
     * Iterates over elements of `collection`, returning the first element
     * `predicate` returns truthy for. The predicate is bound to `thisArg` and
     * invoked with three arguments: (value, index|key, collection).
     *
     * If a property name is provided for `predicate` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `predicate` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @alias detect
     * @category Collection
     * @param {Array|Object|string} collection The collection to search.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {*} Returns the matched element, else `undefined`.
     * @example
     *
     * var users = [
     *   { 'user': 'barney',  'age': 36, 'active': true },
     *   { 'user': 'fred',    'age': 40, 'active': false },
     *   { 'user': 'pebbles', 'age': 1,  'active': true }
     * ];
     *
     * _.result(_.find(users, function(chr) {
     *   return chr.age < 40;
     * }), 'user');
     * // => 'barney'
     *
     * // using the `_.matches` callback shorthand
     * _.result(_.find(users, { 'age': 1, 'active': true }), 'user');
     * // => 'pebbles'
     *
     * // using the `_.matchesProperty` callback shorthand
     * _.result(_.find(users, 'active', false), 'user');
     * // => 'fred'
     *
     * // using the `_.property` callback shorthand
     * _.result(_.find(users, 'active'), 'user');
     * // => 'barney'
     */
    var find = createFind(baseEach);

    /**
     * This method is like `_.find` except that it iterates over elements of
     * `collection` from right to left.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to search.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {*} Returns the matched element, else `undefined`.
     * @example
     *
     * _.findLast([1, 2, 3, 4], function(n) {
     *   return n % 2 == 1;
     * });
     * // => 3
     */
    var findLast = createFind(baseEachRight, true);

    /**
     * Performs a deep comparison between each element in `collection` and the
     * source object, returning the first element that has equivalent property
     * values.
     *
     * **Note:** This method supports comparing arrays, booleans, `Date` objects,
     * numbers, `Object` objects, regexes, and strings. Objects are compared by
     * their own, not inherited, enumerable properties. For comparing a single
     * own or inherited property value see `_.matchesProperty`.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to search.
     * @param {Object} source The object of property values to match.
     * @returns {*} Returns the matched element, else `undefined`.
     * @example
     *
     * var users = [
     *   { 'user': 'barney', 'age': 36, 'active': true },
     *   { 'user': 'fred',   'age': 40, 'active': false }
     * ];
     *
     * _.result(_.findWhere(users, { 'age': 36, 'active': true }), 'user');
     * // => 'barney'
     *
     * _.result(_.findWhere(users, { 'age': 40, 'active': false }), 'user');
     * // => 'fred'
     */
    function findWhere(collection, source) {
      return find(collection, baseMatches(source));
    }

    /**
     * Iterates over elements of `collection` invoking `iteratee` for each element.
     * The `iteratee` is bound to `thisArg` and invoked with three arguments:
     * (value, index|key, collection). Iteratee functions may exit iteration early
     * by explicitly returning `false`.
     *
     * **Note:** As with other "Collections" methods, objects with a "length" property
     * are iterated like arrays. To avoid this behavior `_.forIn` or `_.forOwn`
     * may be used for object iteration.
     *
     * @static
     * @memberOf _
     * @alias each
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Array|Object|string} Returns `collection`.
     * @example
     *
     * _([1, 2]).forEach(function(n) {
     *   console.log(n);
     * }).value();
     * // => logs each value from left to right and returns the array
     *
     * _.forEach({ 'a': 1, 'b': 2 }, function(n, key) {
     *   console.log(n, key);
     * });
     * // => logs each value-key pair and returns the object (iteration order is not guaranteed)
     */
    var forEach = createForEach(arrayEach, baseEach);

    /**
     * This method is like `_.forEach` except that it iterates over elements of
     * `collection` from right to left.
     *
     * @static
     * @memberOf _
     * @alias eachRight
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Array|Object|string} Returns `collection`.
     * @example
     *
     * _([1, 2]).forEachRight(function(n) {
     *   console.log(n);
     * }).value();
     * // => logs each value from right to left and returns the array
     */
    var forEachRight = createForEach(arrayEachRight, baseEachRight);

    /**
     * Creates an object composed of keys generated from the results of running
     * each element of `collection` through `iteratee`. The corresponding value
     * of each key is an array of the elements responsible for generating the key.
     * The `iteratee` is bound to `thisArg` and invoked with three arguments:
     * (value, index|key, collection).
     *
     * If a property name is provided for `iteratee` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `iteratee` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [iteratee=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Object} Returns the composed aggregate object.
     * @example
     *
     * _.groupBy([4.2, 6.1, 6.4], function(n) {
     *   return Math.floor(n);
     * });
     * // => { '4': [4.2], '6': [6.1, 6.4] }
     *
     * _.groupBy([4.2, 6.1, 6.4], function(n) {
     *   return this.floor(n);
     * }, Math);
     * // => { '4': [4.2], '6': [6.1, 6.4] }
     *
     * // using the `_.property` callback shorthand
     * _.groupBy(['one', 'two', 'three'], 'length');
     * // => { '3': ['one', 'two'], '5': ['three'] }
     */
    var groupBy = createAggregator(function(result, value, key) {
      if (hasOwnProperty.call(result, key)) {
        result[key].push(value);
      } else {
        result[key] = [value];
      }
    });

    /**
     * Checks if `value` is in `collection` using
     * [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)
     * for equality comparisons. If `fromIndex` is negative, it is used as the offset
     * from the end of `collection`.
     *
     * @static
     * @memberOf _
     * @alias contains, include
     * @category Collection
     * @param {Array|Object|string} collection The collection to search.
     * @param {*} target The value to search for.
     * @param {number} [fromIndex=0] The index to search from.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.reduce`.
     * @returns {boolean} Returns `true` if a matching element is found, else `false`.
     * @example
     *
     * _.includes([1, 2, 3], 1);
     * // => true
     *
     * _.includes([1, 2, 3], 1, 2);
     * // => false
     *
     * _.includes({ 'user': 'fred', 'age': 40 }, 'fred');
     * // => true
     *
     * _.includes('pebbles', 'eb');
     * // => true
     */
    function includes(collection, target, fromIndex, guard) {
      var length = collection ? getLength(collection) : 0;
      if (!isLength(length)) {
        collection = values(collection);
        length = collection.length;
      }
      if (typeof fromIndex != 'number' || (guard && isIterateeCall(target, fromIndex, guard))) {
        fromIndex = 0;
      } else {
        fromIndex = fromIndex < 0 ? nativeMax(length + fromIndex, 0) : (fromIndex || 0);
      }
      return (typeof collection == 'string' || !isArray(collection) && isString(collection))
        ? (fromIndex <= length && collection.indexOf(target, fromIndex) > -1)
        : (!!length && getIndexOf(collection, target, fromIndex) > -1);
    }

    /**
     * Creates an object composed of keys generated from the results of running
     * each element of `collection` through `iteratee`. The corresponding value
     * of each key is the last element responsible for generating the key. The
     * iteratee function is bound to `thisArg` and invoked with three arguments:
     * (value, index|key, collection).
     *
     * If a property name is provided for `iteratee` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `iteratee` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [iteratee=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Object} Returns the composed aggregate object.
     * @example
     *
     * var keyData = [
     *   { 'dir': 'left', 'code': 97 },
     *   { 'dir': 'right', 'code': 100 }
     * ];
     *
     * _.indexBy(keyData, 'dir');
     * // => { 'left': { 'dir': 'left', 'code': 97 }, 'right': { 'dir': 'right', 'code': 100 } }
     *
     * _.indexBy(keyData, function(object) {
     *   return String.fromCharCode(object.code);
     * });
     * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }
     *
     * _.indexBy(keyData, function(object) {
     *   return this.fromCharCode(object.code);
     * }, String);
     * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }
     */
    var indexBy = createAggregator(function(result, value, key) {
      result[key] = value;
    });

    /**
     * Invokes the method at `path` of each element in `collection`, returning
     * an array of the results of each invoked method. Any additional arguments
     * are provided to each invoked method. If `methodName` is a function it is
     * invoked for, and `this` bound to, each element in `collection`.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Array|Function|string} path The path of the method to invoke or
     *  the function invoked per iteration.
     * @param {...*} [args] The arguments to invoke the method with.
     * @returns {Array} Returns the array of results.
     * @example
     *
     * _.invoke([[5, 1, 7], [3, 2, 1]], 'sort');
     * // => [[1, 5, 7], [1, 2, 3]]
     *
     * _.invoke([123, 456], String.prototype.split, '');
     * // => [['1', '2', '3'], ['4', '5', '6']]
     */
    var invoke = restParam(function(collection, path, args) {
      var index = -1,
          isFunc = typeof path == 'function',
          isProp = isKey(path),
          result = isArrayLike(collection) ? Array(collection.length) : [];

      baseEach(collection, function(value) {
        var func = isFunc ? path : ((isProp && value != null) ? value[path] : undefined);
        result[++index] = func ? func.apply(value, args) : invokePath(value, path, args);
      });
      return result;
    });

    /**
     * Creates an array of values by running each element in `collection` through
     * `iteratee`. The `iteratee` is bound to `thisArg` and invoked with three
     * arguments: (value, index|key, collection).
     *
     * If a property name is provided for `iteratee` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `iteratee` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * Many lodash methods are guarded to work as iteratees for methods like
     * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.
     *
     * The guarded methods are:
     * `ary`, `callback`, `chunk`, `clone`, `create`, `curry`, `curryRight`,
     * `drop`, `dropRight`, `every`, `fill`, `flatten`, `invert`, `max`, `min`,
     * `parseInt`, `slice`, `sortBy`, `take`, `takeRight`, `template`, `trim`,
     * `trimLeft`, `trimRight`, `trunc`, `random`, `range`, `sample`, `some`,
     * `sum`, `uniq`, and `words`
     *
     * @static
     * @memberOf _
     * @alias collect
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [iteratee=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Array} Returns the new mapped array.
     * @example
     *
     * function timesThree(n) {
     *   return n * 3;
     * }
     *
     * _.map([1, 2], timesThree);
     * // => [3, 6]
     *
     * _.map({ 'a': 1, 'b': 2 }, timesThree);
     * // => [3, 6] (iteration order is not guaranteed)
     *
     * var users = [
     *   { 'user': 'barney' },
     *   { 'user': 'fred' }
     * ];
     *
     * // using the `_.property` callback shorthand
     * _.map(users, 'user');
     * // => ['barney', 'fred']
     */
    function map(collection, iteratee, thisArg) {
      var func = isArray(collection) ? arrayMap : baseMap;
      iteratee = getCallback(iteratee, thisArg, 3);
      return func(collection, iteratee);
    }

    /**
     * Creates an array of elements split into two groups, the first of which
     * contains elements `predicate` returns truthy for, while the second of which
     * contains elements `predicate` returns falsey for. The predicate is bound
     * to `thisArg` and invoked with three arguments: (value, index|key, collection).
     *
     * If a property name is provided for `predicate` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `predicate` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {Array} Returns the array of grouped elements.
     * @example
     *
     * _.partition([1, 2, 3], function(n) {
     *   return n % 2;
     * });
     * // => [[1, 3], [2]]
     *
     * _.partition([1.2, 2.3, 3.4], function(n) {
     *   return this.floor(n) % 2;
     * }, Math);
     * // => [[1.2, 3.4], [2.3]]
     *
     * var users = [
     *   { 'user': 'barney',  'age': 36, 'active': false },
     *   { 'user': 'fred',    'age': 40, 'active': true },
     *   { 'user': 'pebbles', 'age': 1,  'active': false }
     * ];
     *
     * var mapper = function(array) {
     *   return _.pluck(array, 'user');
     * };
     *
     * // using the `_.matches` callback shorthand
     * _.map(_.partition(users, { 'age': 1, 'active': false }), mapper);
     * // => [['pebbles'], ['barney', 'fred']]
     *
     * // using the `_.matchesProperty` callback shorthand
     * _.map(_.partition(users, 'active', false), mapper);
     * // => [['barney', 'pebbles'], ['fred']]
     *
     * // using the `_.property` callback shorthand
     * _.map(_.partition(users, 'active'), mapper);
     * // => [['fred'], ['barney', 'pebbles']]
     */
    var partition = createAggregator(function(result, value, key) {
      result[key ? 0 : 1].push(value);
    }, function() { return [[], []]; });

    /**
     * Gets the property value of `path` from all elements in `collection`.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Array|string} path The path of the property to pluck.
     * @returns {Array} Returns the property values.
     * @example
     *
     * var users = [
     *   { 'user': 'barney', 'age': 36 },
     *   { 'user': 'fred',   'age': 40 }
     * ];
     *
     * _.pluck(users, 'user');
     * // => ['barney', 'fred']
     *
     * var userIndex = _.indexBy(users, 'user');
     * _.pluck(userIndex, 'age');
     * // => [36, 40] (iteration order is not guaranteed)
     */
    function pluck(collection, path) {
      return map(collection, property(path));
    }

    /**
     * Reduces `collection` to a value which is the accumulated result of running
     * each element in `collection` through `iteratee`, where each successive
     * invocation is supplied the return value of the previous. If `accumulator`
     * is not provided the first element of `collection` is used as the initial
     * value. The `iteratee` is bound to `thisArg` and invoked with four arguments:
     * (accumulator, value, index|key, collection).
     *
     * Many lodash methods are guarded to work as iteratees for methods like
     * `_.reduce`, `_.reduceRight`, and `_.transform`.
     *
     * The guarded methods are:
     * `assign`, `defaults`, `defaultsDeep`, `includes`, `merge`, `sortByAll`,
     * and `sortByOrder`
     *
     * @static
     * @memberOf _
     * @alias foldl, inject
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @param {*} [accumulator] The initial value.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {*} Returns the accumulated value.
     * @example
     *
     * _.reduce([1, 2], function(total, n) {
     *   return total + n;
     * });
     * // => 3
     *
     * _.reduce({ 'a': 1, 'b': 2 }, function(result, n, key) {
     *   result[key] = n * 3;
     *   return result;
     * }, {});
     * // => { 'a': 3, 'b': 6 } (iteration order is not guaranteed)
     */
    var reduce = createReduce(arrayReduce, baseEach);

    /**
     * This method is like `_.reduce` except that it iterates over elements of
     * `collection` from right to left.
     *
     * @static
     * @memberOf _
     * @alias foldr
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @param {*} [accumulator] The initial value.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {*} Returns the accumulated value.
     * @example
     *
     * var array = [[0, 1], [2, 3], [4, 5]];
     *
     * _.reduceRight(array, function(flattened, other) {
     *   return flattened.concat(other);
     * }, []);
     * // => [4, 5, 2, 3, 0, 1]
     */
    var reduceRight = createReduce(arrayReduceRight, baseEachRight);

    /**
     * The opposite of `_.filter`; this method returns the elements of `collection`
     * that `predicate` does **not** return truthy for.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {Array} Returns the new filtered array.
     * @example
     *
     * _.reject([1, 2, 3, 4], function(n) {
     *   return n % 2 == 0;
     * });
     * // => [1, 3]
     *
     * var users = [
     *   { 'user': 'barney', 'age': 36, 'active': false },
     *   { 'user': 'fred',   'age': 40, 'active': true }
     * ];
     *
     * // using the `_.matches` callback shorthand
     * _.pluck(_.reject(users, { 'age': 40, 'active': true }), 'user');
     * // => ['barney']
     *
     * // using the `_.matchesProperty` callback shorthand
     * _.pluck(_.reject(users, 'active', false), 'user');
     * // => ['fred']
     *
     * // using the `_.property` callback shorthand
     * _.pluck(_.reject(users, 'active'), 'user');
     * // => ['barney']
     */
    function reject(collection, predicate, thisArg) {
      var func = isArray(collection) ? arrayFilter : baseFilter;
      predicate = getCallback(predicate, thisArg, 3);
      return func(collection, function(value, index, collection) {
        return !predicate(value, index, collection);
      });
    }

    /**
     * Gets a random element or `n` random elements from a collection.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to sample.
     * @param {number} [n] The number of elements to sample.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {*} Returns the random sample(s).
     * @example
     *
     * _.sample([1, 2, 3, 4]);
     * // => 2
     *
     * _.sample([1, 2, 3, 4], 2);
     * // => [3, 1]
     */
    function sample(collection, n, guard) {
      if (guard ? isIterateeCall(collection, n, guard) : n == null) {
        collection = toIterable(collection);
        var length = collection.length;
        return length > 0 ? collection[baseRandom(0, length - 1)] : undefined;
      }
      var index = -1,
          result = toArray(collection),
          length = result.length,
          lastIndex = length - 1;

      n = nativeMin(n < 0 ? 0 : (+n || 0), length);
      while (++index < n) {
        var rand = baseRandom(index, lastIndex),
            value = result[rand];

        result[rand] = result[index];
        result[index] = value;
      }
      result.length = n;
      return result;
    }

    /**
     * Creates an array of shuffled values, using a version of the
     * [Fisher-Yates shuffle](https://en.wikipedia.org/wiki/Fisher-Yates_shuffle).
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to shuffle.
     * @returns {Array} Returns the new shuffled array.
     * @example
     *
     * _.shuffle([1, 2, 3, 4]);
     * // => [4, 1, 3, 2]
     */
    function shuffle(collection) {
      return sample(collection, POSITIVE_INFINITY);
    }

    /**
     * Gets the size of `collection` by returning its length for array-like
     * values or the number of own enumerable properties for objects.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to inspect.
     * @returns {number} Returns the size of `collection`.
     * @example
     *
     * _.size([1, 2, 3]);
     * // => 3
     *
     * _.size({ 'a': 1, 'b': 2 });
     * // => 2
     *
     * _.size('pebbles');
     * // => 7
     */
    function size(collection) {
      var length = collection ? getLength(collection) : 0;
      return isLength(length) ? length : keys(collection).length;
    }

    /**
     * Checks if `predicate` returns truthy for **any** element of `collection`.
     * The function returns as soon as it finds a passing value and does not iterate
     * over the entire collection. The predicate is bound to `thisArg` and invoked
     * with three arguments: (value, index|key, collection).
     *
     * If a property name is provided for `predicate` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `predicate` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @alias any
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {boolean} Returns `true` if any element passes the predicate check,
     *  else `false`.
     * @example
     *
     * _.some([null, 0, 'yes', false], Boolean);
     * // => true
     *
     * var users = [
     *   { 'user': 'barney', 'active': true },
     *   { 'user': 'fred',   'active': false }
     * ];
     *
     * // using the `_.matches` callback shorthand
     * _.some(users, { 'user': 'barney', 'active': false });
     * // => false
     *
     * // using the `_.matchesProperty` callback shorthand
     * _.some(users, 'active', false);
     * // => true
     *
     * // using the `_.property` callback shorthand
     * _.some(users, 'active');
     * // => true
     */
    function some(collection, predicate, thisArg) {
      var func = isArray(collection) ? arraySome : baseSome;
      if (thisArg && isIterateeCall(collection, predicate, thisArg)) {
        predicate = undefined;
      }
      if (typeof predicate != 'function' || thisArg !== undefined) {
        predicate = getCallback(predicate, thisArg, 3);
      }
      return func(collection, predicate);
    }

    /**
     * Creates an array of elements, sorted in ascending order by the results of
     * running each element in a collection through `iteratee`. This method performs
     * a stable sort, that is, it preserves the original sort order of equal elements.
     * The `iteratee` is bound to `thisArg` and invoked with three arguments:
     * (value, index|key, collection).
     *
     * If a property name is provided for `iteratee` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `iteratee` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [iteratee=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Array} Returns the new sorted array.
     * @example
     *
     * _.sortBy([1, 2, 3], function(n) {
     *   return Math.sin(n);
     * });
     * // => [3, 1, 2]
     *
     * _.sortBy([1, 2, 3], function(n) {
     *   return this.sin(n);
     * }, Math);
     * // => [3, 1, 2]
     *
     * var users = [
     *   { 'user': 'fred' },
     *   { 'user': 'pebbles' },
     *   { 'user': 'barney' }
     * ];
     *
     * // using the `_.property` callback shorthand
     * _.pluck(_.sortBy(users, 'user'), 'user');
     * // => ['barney', 'fred', 'pebbles']
     */
    function sortBy(collection, iteratee, thisArg) {
      if (collection == null) {
        return [];
      }
      if (thisArg && isIterateeCall(collection, iteratee, thisArg)) {
        iteratee = undefined;
      }
      var index = -1;
      iteratee = getCallback(iteratee, thisArg, 3);

      var result = baseMap(collection, function(value, key, collection) {
        return { 'criteria': iteratee(value, key, collection), 'index': ++index, 'value': value };
      });
      return baseSortBy(result, compareAscending);
    }

    /**
     * This method is like `_.sortBy` except that it can sort by multiple iteratees
     * or property names.
     *
     * If a property name is provided for an iteratee the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If an object is provided for an iteratee the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {...(Function|Function[]|Object|Object[]|string|string[])} iteratees
     *  The iteratees to sort by, specified as individual values or arrays of values.
     * @returns {Array} Returns the new sorted array.
     * @example
     *
     * var users = [
     *   { 'user': 'fred',   'age': 48 },
     *   { 'user': 'barney', 'age': 36 },
     *   { 'user': 'fred',   'age': 42 },
     *   { 'user': 'barney', 'age': 34 }
     * ];
     *
     * _.map(_.sortByAll(users, ['user', 'age']), _.values);
     * // => [['barney', 34], ['barney', 36], ['fred', 42], ['fred', 48]]
     *
     * _.map(_.sortByAll(users, 'user', function(chr) {
     *   return Math.floor(chr.age / 10);
     * }), _.values);
     * // => [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 42]]
     */
    var sortByAll = restParam(function(collection, iteratees) {
      if (collection == null) {
        return [];
      }
      var guard = iteratees[2];
      if (guard && isIterateeCall(iteratees[0], iteratees[1], guard)) {
        iteratees.length = 1;
      }
      return baseSortByOrder(collection, baseFlatten(iteratees), []);
    });

    /**
     * This method is like `_.sortByAll` except that it allows specifying the
     * sort orders of the iteratees to sort by. If `orders` is unspecified, all
     * values are sorted in ascending order. Otherwise, a value is sorted in
     * ascending order if its corresponding order is "asc", and descending if "desc".
     *
     * If a property name is provided for an iteratee the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If an object is provided for an iteratee the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function[]|Object[]|string[]} iteratees The iteratees to sort by.
     * @param {boolean[]} [orders] The sort orders of `iteratees`.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.reduce`.
     * @returns {Array} Returns the new sorted array.
     * @example
     *
     * var users = [
     *   { 'user': 'fred',   'age': 48 },
     *   { 'user': 'barney', 'age': 34 },
     *   { 'user': 'fred',   'age': 42 },
     *   { 'user': 'barney', 'age': 36 }
     * ];
     *
     * // sort by `user` in ascending order and by `age` in descending order
     * _.map(_.sortByOrder(users, ['user', 'age'], ['asc', 'desc']), _.values);
     * // => [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 42]]
     */
    function sortByOrder(collection, iteratees, orders, guard) {
      if (collection == null) {
        return [];
      }
      if (guard && isIterateeCall(iteratees, orders, guard)) {
        orders = undefined;
      }
      if (!isArray(iteratees)) {
        iteratees = iteratees == null ? [] : [iteratees];
      }
      if (!isArray(orders)) {
        orders = orders == null ? [] : [orders];
      }
      return baseSortByOrder(collection, iteratees, orders);
    }

    /**
     * Performs a deep comparison between each element in `collection` and the
     * source object, returning an array of all elements that have equivalent
     * property values.
     *
     * **Note:** This method supports comparing arrays, booleans, `Date` objects,
     * numbers, `Object` objects, regexes, and strings. Objects are compared by
     * their own, not inherited, enumerable properties. For comparing a single
     * own or inherited property value see `_.matchesProperty`.
     *
     * @static
     * @memberOf _
     * @category Collection
     * @param {Array|Object|string} collection The collection to search.
     * @param {Object} source The object of property values to match.
     * @returns {Array} Returns the new filtered array.
     * @example
     *
     * var users = [
     *   { 'user': 'barney', 'age': 36, 'active': false, 'pets': ['hoppy'] },
     *   { 'user': 'fred',   'age': 40, 'active': true, 'pets': ['baby puss', 'dino'] }
     * ];
     *
     * _.pluck(_.where(users, { 'age': 36, 'active': false }), 'user');
     * // => ['barney']
     *
     * _.pluck(_.where(users, { 'pets': ['dino'] }), 'user');
     * // => ['fred']
     */
    function where(collection, source) {
      return filter(collection, baseMatches(source));
    }

    /*------------------------------------------------------------------------*/

    /**
     * Gets the number of milliseconds that have elapsed since the Unix epoch
     * (1 January 1970 00:00:00 UTC).
     *
     * @static
     * @memberOf _
     * @category Date
     * @example
     *
     * _.defer(function(stamp) {
     *   console.log(_.now() - stamp);
     * }, _.now());
     * // => logs the number of milliseconds it took for the deferred function to be invoked
     */
    var now = nativeNow || function() {
      return new Date().getTime();
    };

    /*------------------------------------------------------------------------*/

    /**
     * The opposite of `_.before`; this method creates a function that invokes
     * `func` once it is called `n` or more times.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {number} n The number of calls before `func` is invoked.
     * @param {Function} func The function to restrict.
     * @returns {Function} Returns the new restricted function.
     * @example
     *
     * var saves = ['profile', 'settings'];
     *
     * var done = _.after(saves.length, function() {
     *   console.log('done saving!');
     * });
     *
     * _.forEach(saves, function(type) {
     *   asyncSave({ 'type': type, 'complete': done });
     * });
     * // => logs 'done saving!' after the two async saves have completed
     */
    function after(n, func) {
      if (typeof func != 'function') {
        if (typeof n == 'function') {
          var temp = n;
          n = func;
          func = temp;
        } else {
          throw new TypeError(FUNC_ERROR_TEXT);
        }
      }
      n = nativeIsFinite(n = +n) ? n : 0;
      return function() {
        if (--n < 1) {
          return func.apply(this, arguments);
        }
      };
    }

    /**
     * Creates a function that accepts up to `n` arguments ignoring any
     * additional arguments.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to cap arguments for.
     * @param {number} [n=func.length] The arity cap.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {Function} Returns the new function.
     * @example
     *
     * _.map(['6', '8', '10'], _.ary(parseInt, 1));
     * // => [6, 8, 10]
     */
    function ary(func, n, guard) {
      if (guard && isIterateeCall(func, n, guard)) {
        n = undefined;
      }
      n = (func && n == null) ? func.length : nativeMax(+n || 0, 0);
      return createWrapper(func, ARY_FLAG, undefined, undefined, undefined, undefined, n);
    }

    /**
     * Creates a function that invokes `func`, with the `this` binding and arguments
     * of the created function, while it is called less than `n` times. Subsequent
     * calls to the created function return the result of the last `func` invocation.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {number} n The number of calls at which `func` is no longer invoked.
     * @param {Function} func The function to restrict.
     * @returns {Function} Returns the new restricted function.
     * @example
     *
     * jQuery('#add').on('click', _.before(5, addContactToList));
     * // => allows adding up to 4 contacts to the list
     */
    function before(n, func) {
      var result;
      if (typeof func != 'function') {
        if (typeof n == 'function') {
          var temp = n;
          n = func;
          func = temp;
        } else {
          throw new TypeError(FUNC_ERROR_TEXT);
        }
      }
      return function() {
        if (--n > 0) {
          result = func.apply(this, arguments);
        }
        if (n <= 1) {
          func = undefined;
        }
        return result;
      };
    }

    /**
     * Creates a function that invokes `func` with the `this` binding of `thisArg`
     * and prepends any additional `_.bind` arguments to those provided to the
     * bound function.
     *
     * The `_.bind.placeholder` value, which defaults to `_` in monolithic builds,
     * may be used as a placeholder for partially applied arguments.
     *
     * **Note:** Unlike native `Function#bind` this method does not set the "length"
     * property of bound functions.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to bind.
     * @param {*} thisArg The `this` binding of `func`.
     * @param {...*} [partials] The arguments to be partially applied.
     * @returns {Function} Returns the new bound function.
     * @example
     *
     * var greet = function(greeting, punctuation) {
     *   return greeting + ' ' + this.user + punctuation;
     * };
     *
     * var object = { 'user': 'fred' };
     *
     * var bound = _.bind(greet, object, 'hi');
     * bound('!');
     * // => 'hi fred!'
     *
     * // using placeholders
     * var bound = _.bind(greet, object, _, '!');
     * bound('hi');
     * // => 'hi fred!'
     */
    var bind = restParam(function(func, thisArg, partials) {
      var bitmask = BIND_FLAG;
      if (partials.length) {
        var holders = replaceHolders(partials, bind.placeholder);
        bitmask |= PARTIAL_FLAG;
      }
      return createWrapper(func, bitmask, thisArg, partials, holders);
    });

    /**
     * Binds methods of an object to the object itself, overwriting the existing
     * method. Method names may be specified as individual arguments or as arrays
     * of method names. If no method names are provided all enumerable function
     * properties, own and inherited, of `object` are bound.
     *
     * **Note:** This method does not set the "length" property of bound functions.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Object} object The object to bind and assign the bound methods to.
     * @param {...(string|string[])} [methodNames] The object method names to bind,
     *  specified as individual method names or arrays of method names.
     * @returns {Object} Returns `object`.
     * @example
     *
     * var view = {
     *   'label': 'docs',
     *   'onClick': function() {
     *     console.log('clicked ' + this.label);
     *   }
     * };
     *
     * _.bindAll(view);
     * jQuery('#docs').on('click', view.onClick);
     * // => logs 'clicked docs' when the element is clicked
     */
    var bindAll = restParam(function(object, methodNames) {
      methodNames = methodNames.length ? baseFlatten(methodNames) : functions(object);

      var index = -1,
          length = methodNames.length;

      while (++index < length) {
        var key = methodNames[index];
        object[key] = createWrapper(object[key], BIND_FLAG, object);
      }
      return object;
    });

    /**
     * Creates a function that invokes the method at `object[key]` and prepends
     * any additional `_.bindKey` arguments to those provided to the bound function.
     *
     * This method differs from `_.bind` by allowing bound functions to reference
     * methods that may be redefined or don't yet exist.
     * See [Peter Michaux's article](http://peter.michaux.ca/articles/lazy-function-definition-pattern)
     * for more details.
     *
     * The `_.bindKey.placeholder` value, which defaults to `_` in monolithic
     * builds, may be used as a placeholder for partially applied arguments.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Object} object The object the method belongs to.
     * @param {string} key The key of the method.
     * @param {...*} [partials] The arguments to be partially applied.
     * @returns {Function} Returns the new bound function.
     * @example
     *
     * var object = {
     *   'user': 'fred',
     *   'greet': function(greeting, punctuation) {
     *     return greeting + ' ' + this.user + punctuation;
     *   }
     * };
     *
     * var bound = _.bindKey(object, 'greet', 'hi');
     * bound('!');
     * // => 'hi fred!'
     *
     * object.greet = function(greeting, punctuation) {
     *   return greeting + 'ya ' + this.user + punctuation;
     * };
     *
     * bound('!');
     * // => 'hiya fred!'
     *
     * // using placeholders
     * var bound = _.bindKey(object, 'greet', _, '!');
     * bound('hi');
     * // => 'hiya fred!'
     */
    var bindKey = restParam(function(object, key, partials) {
      var bitmask = BIND_FLAG | BIND_KEY_FLAG;
      if (partials.length) {
        var holders = replaceHolders(partials, bindKey.placeholder);
        bitmask |= PARTIAL_FLAG;
      }
      return createWrapper(key, bitmask, object, partials, holders);
    });

    /**
     * Creates a function that accepts one or more arguments of `func` that when
     * called either invokes `func` returning its result, if all `func` arguments
     * have been provided, or returns a function that accepts one or more of the
     * remaining `func` arguments, and so on. The arity of `func` may be specified
     * if `func.length` is not sufficient.
     *
     * The `_.curry.placeholder` value, which defaults to `_` in monolithic builds,
     * may be used as a placeholder for provided arguments.
     *
     * **Note:** This method does not set the "length" property of curried functions.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to curry.
     * @param {number} [arity=func.length] The arity of `func`.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {Function} Returns the new curried function.
     * @example
     *
     * var abc = function(a, b, c) {
     *   return [a, b, c];
     * };
     *
     * var curried = _.curry(abc);
     *
     * curried(1)(2)(3);
     * // => [1, 2, 3]
     *
     * curried(1, 2)(3);
     * // => [1, 2, 3]
     *
     * curried(1, 2, 3);
     * // => [1, 2, 3]
     *
     * // using placeholders
     * curried(1)(_, 3)(2);
     * // => [1, 2, 3]
     */
    var curry = createCurry(CURRY_FLAG);

    /**
     * This method is like `_.curry` except that arguments are applied to `func`
     * in the manner of `_.partialRight` instead of `_.partial`.
     *
     * The `_.curryRight.placeholder` value, which defaults to `_` in monolithic
     * builds, may be used as a placeholder for provided arguments.
     *
     * **Note:** This method does not set the "length" property of curried functions.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to curry.
     * @param {number} [arity=func.length] The arity of `func`.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {Function} Returns the new curried function.
     * @example
     *
     * var abc = function(a, b, c) {
     *   return [a, b, c];
     * };
     *
     * var curried = _.curryRight(abc);
     *
     * curried(3)(2)(1);
     * // => [1, 2, 3]
     *
     * curried(2, 3)(1);
     * // => [1, 2, 3]
     *
     * curried(1, 2, 3);
     * // => [1, 2, 3]
     *
     * // using placeholders
     * curried(3)(1, _)(2);
     * // => [1, 2, 3]
     */
    var curryRight = createCurry(CURRY_RIGHT_FLAG);

    /**
     * Creates a debounced function that delays invoking `func` until after `wait`
     * milliseconds have elapsed since the last time the debounced function was
     * invoked. The debounced function comes with a `cancel` method to cancel
     * delayed invocations. Provide an options object to indicate that `func`
     * should be invoked on the leading and/or trailing edge of the `wait` timeout.
     * Subsequent calls to the debounced function return the result of the last
     * `func` invocation.
     *
     * **Note:** If `leading` and `trailing` options are `true`, `func` is invoked
     * on the trailing edge of the timeout only if the the debounced function is
     * invoked more than once during the `wait` timeout.
     *
     * See [David Corbacho's article](http://drupalmotion.com/article/debounce-and-throttle-visual-explanation)
     * for details over the differences between `_.debounce` and `_.throttle`.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to debounce.
     * @param {number} [wait=0] The number of milliseconds to delay.
     * @param {Object} [options] The options object.
     * @param {boolean} [options.leading=false] Specify invoking on the leading
     *  edge of the timeout.
     * @param {number} [options.maxWait] The maximum time `func` is allowed to be
     *  delayed before it is invoked.
     * @param {boolean} [options.trailing=true] Specify invoking on the trailing
     *  edge of the timeout.
     * @returns {Function} Returns the new debounced function.
     * @example
     *
     * // avoid costly calculations while the window size is in flux
     * jQuery(window).on('resize', _.debounce(calculateLayout, 150));
     *
     * // invoke `sendMail` when the click event is fired, debouncing subsequent calls
     * jQuery('#postbox').on('click', _.debounce(sendMail, 300, {
     *   'leading': true,
     *   'trailing': false
     * }));
     *
     * // ensure `batchLog` is invoked once after 1 second of debounced calls
     * var source = new EventSource('/stream');
     * jQuery(source).on('message', _.debounce(batchLog, 250, {
     *   'maxWait': 1000
     * }));
     *
     * // cancel a debounced call
     * var todoChanges = _.debounce(batchLog, 1000);
     * Object.observe(models.todo, todoChanges);
     *
     * Object.observe(models, function(changes) {
     *   if (_.find(changes, { 'user': 'todo', 'type': 'delete'})) {
     *     todoChanges.cancel();
     *   }
     * }, ['delete']);
     *
     * // ...at some point `models.todo` is changed
     * models.todo.completed = true;
     *
     * // ...before 1 second has passed `models.todo` is deleted
     * // which cancels the debounced `todoChanges` call
     * delete models.todo;
     */
    function debounce(func, wait, options) {
      var args,
          maxTimeoutId,
          result,
          stamp,
          thisArg,
          timeoutId,
          trailingCall,
          lastCalled = 0,
          maxWait = false,
          trailing = true;

      if (typeof func != 'function') {
        throw new TypeError(FUNC_ERROR_TEXT);
      }
      wait = wait < 0 ? 0 : (+wait || 0);
      if (options === true) {
        var leading = true;
        trailing = false;
      } else if (isObject(options)) {
        leading = !!options.leading;
        maxWait = 'maxWait' in options && nativeMax(+options.maxWait || 0, wait);
        trailing = 'trailing' in options ? !!options.trailing : trailing;
      }

      function cancel() {
        if (timeoutId) {
          clearTimeout(timeoutId);
        }
        if (maxTimeoutId) {
          clearTimeout(maxTimeoutId);
        }
        lastCalled = 0;
        maxTimeoutId = timeoutId = trailingCall = undefined;
      }

      function complete(isCalled, id) {
        if (id) {
          clearTimeout(id);
        }
        maxTimeoutId = timeoutId = trailingCall = undefined;
        if (isCalled) {
          lastCalled = now();
          result = func.apply(thisArg, args);
          if (!timeoutId && !maxTimeoutId) {
            args = thisArg = undefined;
          }
        }
      }

      function delayed() {
        var remaining = wait - (now() - stamp);
        if (remaining <= 0 || remaining > wait) {
          complete(trailingCall, maxTimeoutId);
        } else {
          timeoutId = setTimeout(delayed, remaining);
        }
      }

      function maxDelayed() {
        complete(trailing, timeoutId);
      }

      function debounced() {
        args = arguments;
        stamp = now();
        thisArg = this;
        trailingCall = trailing && (timeoutId || !leading);

        if (maxWait === false) {
          var leadingCall = leading && !timeoutId;
        } else {
          if (!maxTimeoutId && !leading) {
            lastCalled = stamp;
          }
          var remaining = maxWait - (stamp - lastCalled),
              isCalled = remaining <= 0 || remaining > maxWait;

          if (isCalled) {
            if (maxTimeoutId) {
              maxTimeoutId = clearTimeout(maxTimeoutId);
            }
            lastCalled = stamp;
            result = func.apply(thisArg, args);
          }
          else if (!maxTimeoutId) {
            maxTimeoutId = setTimeout(maxDelayed, remaining);
          }
        }
        if (isCalled && timeoutId) {
          timeoutId = clearTimeout(timeoutId);
        }
        else if (!timeoutId && wait !== maxWait) {
          timeoutId = setTimeout(delayed, wait);
        }
        if (leadingCall) {
          isCalled = true;
          result = func.apply(thisArg, args);
        }
        if (isCalled && !timeoutId && !maxTimeoutId) {
          args = thisArg = undefined;
        }
        return result;
      }
      debounced.cancel = cancel;
      return debounced;
    }

    /**
     * Defers invoking the `func` until the current call stack has cleared. Any
     * additional arguments are provided to `func` when it is invoked.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to defer.
     * @param {...*} [args] The arguments to invoke the function with.
     * @returns {number} Returns the timer id.
     * @example
     *
     * _.defer(function(text) {
     *   console.log(text);
     * }, 'deferred');
     * // logs 'deferred' after one or more milliseconds
     */
    var defer = restParam(function(func, args) {
      return baseDelay(func, 1, args);
    });

    /**
     * Invokes `func` after `wait` milliseconds. Any additional arguments are
     * provided to `func` when it is invoked.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to delay.
     * @param {number} wait The number of milliseconds to delay invocation.
     * @param {...*} [args] The arguments to invoke the function with.
     * @returns {number} Returns the timer id.
     * @example
     *
     * _.delay(function(text) {
     *   console.log(text);
     * }, 1000, 'later');
     * // => logs 'later' after one second
     */
    var delay = restParam(function(func, wait, args) {
      return baseDelay(func, wait, args);
    });

    /**
     * Creates a function that returns the result of invoking the provided
     * functions with the `this` binding of the created function, where each
     * successive invocation is supplied the return value of the previous.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {...Function} [funcs] Functions to invoke.
     * @returns {Function} Returns the new function.
     * @example
     *
     * function square(n) {
     *   return n * n;
     * }
     *
     * var addSquare = _.flow(_.add, square);
     * addSquare(1, 2);
     * // => 9
     */
    var flow = createFlow();

    /**
     * This method is like `_.flow` except that it creates a function that
     * invokes the provided functions from right to left.
     *
     * @static
     * @memberOf _
     * @alias backflow, compose
     * @category Function
     * @param {...Function} [funcs] Functions to invoke.
     * @returns {Function} Returns the new function.
     * @example
     *
     * function square(n) {
     *   return n * n;
     * }
     *
     * var addSquare = _.flowRight(square, _.add);
     * addSquare(1, 2);
     * // => 9
     */
    var flowRight = createFlow(true);

    /**
     * Creates a function that memoizes the result of `func`. If `resolver` is
     * provided it determines the cache key for storing the result based on the
     * arguments provided to the memoized function. By default, the first argument
     * provided to the memoized function is coerced to a string and used as the
     * cache key. The `func` is invoked with the `this` binding of the memoized
     * function.
     *
     * **Note:** The cache is exposed as the `cache` property on the memoized
     * function. Its creation may be customized by replacing the `_.memoize.Cache`
     * constructor with one whose instances implement the [`Map`](http://ecma-international.org/ecma-262/6.0/#sec-properties-of-the-map-prototype-object)
     * method interface of `get`, `has`, and `set`.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to have its output memoized.
     * @param {Function} [resolver] The function to resolve the cache key.
     * @returns {Function} Returns the new memoizing function.
     * @example
     *
     * var upperCase = _.memoize(function(string) {
     *   return string.toUpperCase();
     * });
     *
     * upperCase('fred');
     * // => 'FRED'
     *
     * // modifying the result cache
     * upperCase.cache.set('fred', 'BARNEY');
     * upperCase('fred');
     * // => 'BARNEY'
     *
     * // replacing `_.memoize.Cache`
     * var object = { 'user': 'fred' };
     * var other = { 'user': 'barney' };
     * var identity = _.memoize(_.identity);
     *
     * identity(object);
     * // => { 'user': 'fred' }
     * identity(other);
     * // => { 'user': 'fred' }
     *
     * _.memoize.Cache = WeakMap;
     * var identity = _.memoize(_.identity);
     *
     * identity(object);
     * // => { 'user': 'fred' }
     * identity(other);
     * // => { 'user': 'barney' }
     */
    function memoize(func, resolver) {
      if (typeof func != 'function' || (resolver && typeof resolver != 'function')) {
        throw new TypeError(FUNC_ERROR_TEXT);
      }
      var memoized = function() {
        var args = arguments,
            key = resolver ? resolver.apply(this, args) : args[0],
            cache = memoized.cache;

        if (cache.has(key)) {
          return cache.get(key);
        }
        var result = func.apply(this, args);
        memoized.cache = cache.set(key, result);
        return result;
      };
      memoized.cache = new memoize.Cache;
      return memoized;
    }

    /**
     * Creates a function that runs each argument through a corresponding
     * transform function.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to wrap.
     * @param {...(Function|Function[])} [transforms] The functions to transform
     * arguments, specified as individual functions or arrays of functions.
     * @returns {Function} Returns the new function.
     * @example
     *
     * function doubled(n) {
     *   return n * 2;
     * }
     *
     * function square(n) {
     *   return n * n;
     * }
     *
     * var modded = _.modArgs(function(x, y) {
     *   return [x, y];
     * }, square, doubled);
     *
     * modded(1, 2);
     * // => [1, 4]
     *
     * modded(5, 10);
     * // => [25, 20]
     */
    var modArgs = restParam(function(func, transforms) {
      transforms = baseFlatten(transforms);
      if (typeof func != 'function' || !arrayEvery(transforms, baseIsFunction)) {
        throw new TypeError(FUNC_ERROR_TEXT);
      }
      var length = transforms.length;
      return restParam(function(args) {
        var index = nativeMin(args.length, length);
        while (index--) {
          args[index] = transforms[index](args[index]);
        }
        return func.apply(this, args);
      });
    });

    /**
     * Creates a function that negates the result of the predicate `func`. The
     * `func` predicate is invoked with the `this` binding and arguments of the
     * created function.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} predicate The predicate to negate.
     * @returns {Function} Returns the new function.
     * @example
     *
     * function isEven(n) {
     *   return n % 2 == 0;
     * }
     *
     * _.filter([1, 2, 3, 4, 5, 6], _.negate(isEven));
     * // => [1, 3, 5]
     */
    function negate(predicate) {
      if (typeof predicate != 'function') {
        throw new TypeError(FUNC_ERROR_TEXT);
      }
      return function() {
        return !predicate.apply(this, arguments);
      };
    }

    /**
     * Creates a function that is restricted to invoking `func` once. Repeat calls
     * to the function return the value of the first call. The `func` is invoked
     * with the `this` binding and arguments of the created function.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to restrict.
     * @returns {Function} Returns the new restricted function.
     * @example
     *
     * var initialize = _.once(createApplication);
     * initialize();
     * initialize();
     * // `initialize` invokes `createApplication` once
     */
    function once(func) {
      return before(2, func);
    }

    /**
     * Creates a function that invokes `func` with `partial` arguments prepended
     * to those provided to the new function. This method is like `_.bind` except
     * it does **not** alter the `this` binding.
     *
     * The `_.partial.placeholder` value, which defaults to `_` in monolithic
     * builds, may be used as a placeholder for partially applied arguments.
     *
     * **Note:** This method does not set the "length" property of partially
     * applied functions.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to partially apply arguments to.
     * @param {...*} [partials] The arguments to be partially applied.
     * @returns {Function} Returns the new partially applied function.
     * @example
     *
     * var greet = function(greeting, name) {
     *   return greeting + ' ' + name;
     * };
     *
     * var sayHelloTo = _.partial(greet, 'hello');
     * sayHelloTo('fred');
     * // => 'hello fred'
     *
     * // using placeholders
     * var greetFred = _.partial(greet, _, 'fred');
     * greetFred('hi');
     * // => 'hi fred'
     */
    var partial = createPartial(PARTIAL_FLAG);

    /**
     * This method is like `_.partial` except that partially applied arguments
     * are appended to those provided to the new function.
     *
     * The `_.partialRight.placeholder` value, which defaults to `_` in monolithic
     * builds, may be used as a placeholder for partially applied arguments.
     *
     * **Note:** This method does not set the "length" property of partially
     * applied functions.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to partially apply arguments to.
     * @param {...*} [partials] The arguments to be partially applied.
     * @returns {Function} Returns the new partially applied function.
     * @example
     *
     * var greet = function(greeting, name) {
     *   return greeting + ' ' + name;
     * };
     *
     * var greetFred = _.partialRight(greet, 'fred');
     * greetFred('hi');
     * // => 'hi fred'
     *
     * // using placeholders
     * var sayHelloTo = _.partialRight(greet, 'hello', _);
     * sayHelloTo('fred');
     * // => 'hello fred'
     */
    var partialRight = createPartial(PARTIAL_RIGHT_FLAG);

    /**
     * Creates a function that invokes `func` with arguments arranged according
     * to the specified indexes where the argument value at the first index is
     * provided as the first argument, the argument value at the second index is
     * provided as the second argument, and so on.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to rearrange arguments for.
     * @param {...(number|number[])} indexes The arranged argument indexes,
     *  specified as individual indexes or arrays of indexes.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var rearged = _.rearg(function(a, b, c) {
     *   return [a, b, c];
     * }, 2, 0, 1);
     *
     * rearged('b', 'c', 'a')
     * // => ['a', 'b', 'c']
     *
     * var map = _.rearg(_.map, [1, 0]);
     * map(function(n) {
     *   return n * 3;
     * }, [1, 2, 3]);
     * // => [3, 6, 9]
     */
    var rearg = restParam(function(func, indexes) {
      return createWrapper(func, REARG_FLAG, undefined, undefined, undefined, baseFlatten(indexes));
    });

    /**
     * Creates a function that invokes `func` with the `this` binding of the
     * created function and arguments from `start` and beyond provided as an array.
     *
     * **Note:** This method is based on the [rest parameter](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters).
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to apply a rest parameter to.
     * @param {number} [start=func.length-1] The start position of the rest parameter.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var say = _.restParam(function(what, names) {
     *   return what + ' ' + _.initial(names).join(', ') +
     *     (_.size(names) > 1 ? ', & ' : '') + _.last(names);
     * });
     *
     * say('hello', 'fred', 'barney', 'pebbles');
     * // => 'hello fred, barney, & pebbles'
     */
    function restParam(func, start) {
      if (typeof func != 'function') {
        throw new TypeError(FUNC_ERROR_TEXT);
      }
      start = nativeMax(start === undefined ? (func.length - 1) : (+start || 0), 0);
      return function() {
        var args = arguments,
            index = -1,
            length = nativeMax(args.length - start, 0),
            rest = Array(length);

        while (++index < length) {
          rest[index] = args[start + index];
        }
        switch (start) {
          case 0: return func.call(this, rest);
          case 1: return func.call(this, args[0], rest);
          case 2: return func.call(this, args[0], args[1], rest);
        }
        var otherArgs = Array(start + 1);
        index = -1;
        while (++index < start) {
          otherArgs[index] = args[index];
        }
        otherArgs[start] = rest;
        return func.apply(this, otherArgs);
      };
    }

    /**
     * Creates a function that invokes `func` with the `this` binding of the created
     * function and an array of arguments much like [`Function#apply`](https://es5.github.io/#x15.3.4.3).
     *
     * **Note:** This method is based on the [spread operator](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_operator).
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to spread arguments over.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var say = _.spread(function(who, what) {
     *   return who + ' says ' + what;
     * });
     *
     * say(['fred', 'hello']);
     * // => 'fred says hello'
     *
     * // with a Promise
     * var numbers = Promise.all([
     *   Promise.resolve(40),
     *   Promise.resolve(36)
     * ]);
     *
     * numbers.then(_.spread(function(x, y) {
     *   return x + y;
     * }));
     * // => a Promise of 76
     */
    function spread(func) {
      if (typeof func != 'function') {
        throw new TypeError(FUNC_ERROR_TEXT);
      }
      return function(array) {
        return func.apply(this, array);
      };
    }

    /**
     * Creates a throttled function that only invokes `func` at most once per
     * every `wait` milliseconds. The throttled function comes with a `cancel`
     * method to cancel delayed invocations. Provide an options object to indicate
     * that `func` should be invoked on the leading and/or trailing edge of the
     * `wait` timeout. Subsequent calls to the throttled function return the
     * result of the last `func` call.
     *
     * **Note:** If `leading` and `trailing` options are `true`, `func` is invoked
     * on the trailing edge of the timeout only if the the throttled function is
     * invoked more than once during the `wait` timeout.
     *
     * See [David Corbacho's article](http://drupalmotion.com/article/debounce-and-throttle-visual-explanation)
     * for details over the differences between `_.throttle` and `_.debounce`.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {Function} func The function to throttle.
     * @param {number} [wait=0] The number of milliseconds to throttle invocations to.
     * @param {Object} [options] The options object.
     * @param {boolean} [options.leading=true] Specify invoking on the leading
     *  edge of the timeout.
     * @param {boolean} [options.trailing=true] Specify invoking on the trailing
     *  edge of the timeout.
     * @returns {Function} Returns the new throttled function.
     * @example
     *
     * // avoid excessively updating the position while scrolling
     * jQuery(window).on('scroll', _.throttle(updatePosition, 100));
     *
     * // invoke `renewToken` when the click event is fired, but not more than once every 5 minutes
     * jQuery('.interactive').on('click', _.throttle(renewToken, 300000, {
     *   'trailing': false
     * }));
     *
     * // cancel a trailing throttled call
     * jQuery(window).on('popstate', throttled.cancel);
     */
    function throttle(func, wait, options) {
      var leading = true,
          trailing = true;

      if (typeof func != 'function') {
        throw new TypeError(FUNC_ERROR_TEXT);
      }
      if (options === false) {
        leading = false;
      } else if (isObject(options)) {
        leading = 'leading' in options ? !!options.leading : leading;
        trailing = 'trailing' in options ? !!options.trailing : trailing;
      }
      return debounce(func, wait, { 'leading': leading, 'maxWait': +wait, 'trailing': trailing });
    }

    /**
     * Creates a function that provides `value` to the wrapper function as its
     * first argument. Any additional arguments provided to the function are
     * appended to those provided to the wrapper function. The wrapper is invoked
     * with the `this` binding of the created function.
     *
     * @static
     * @memberOf _
     * @category Function
     * @param {*} value The value to wrap.
     * @param {Function} wrapper The wrapper function.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var p = _.wrap(_.escape, function(func, text) {
     *   return '<p>' + func(text) + '</p>';
     * });
     *
     * p('fred, barney, & pebbles');
     * // => '<p>fred, barney, &amp; pebbles</p>'
     */
    function wrap(value, wrapper) {
      wrapper = wrapper == null ? identity : wrapper;
      return createWrapper(wrapper, PARTIAL_FLAG, undefined, [value], []);
    }

    /*------------------------------------------------------------------------*/

    /**
     * Creates a clone of `value`. If `isDeep` is `true` nested objects are cloned,
     * otherwise they are assigned by reference. If `customizer` is provided it is
     * invoked to produce the cloned values. If `customizer` returns `undefined`
     * cloning is handled by the method instead. The `customizer` is bound to
     * `thisArg` and invoked with two argument; (value [, index|key, object]).
     *
     * **Note:** This method is loosely based on the
     * [structured clone algorithm](http://www.w3.org/TR/html5/infrastructure.html#internal-structured-cloning-algorithm).
     * The enumerable properties of `arguments` objects and objects created by
     * constructors other than `Object` are cloned to plain `Object` objects. An
     * empty object is returned for uncloneable values such as functions, DOM nodes,
     * Maps, Sets, and WeakMaps.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to clone.
     * @param {boolean} [isDeep] Specify a deep clone.
     * @param {Function} [customizer] The function to customize cloning values.
     * @param {*} [thisArg] The `this` binding of `customizer`.
     * @returns {*} Returns the cloned value.
     * @example
     *
     * var users = [
     *   { 'user': 'barney' },
     *   { 'user': 'fred' }
     * ];
     *
     * var shallow = _.clone(users);
     * shallow[0] === users[0];
     * // => true
     *
     * var deep = _.clone(users, true);
     * deep[0] === users[0];
     * // => false
     *
     * // using a customizer callback
     * var el = _.clone(document.body, function(value) {
     *   if (_.isElement(value)) {
     *     return value.cloneNode(false);
     *   }
     * });
     *
     * el === document.body
     * // => false
     * el.nodeName
     * // => BODY
     * el.childNodes.length;
     * // => 0
     */
    function clone(value, isDeep, customizer, thisArg) {
      if (isDeep && typeof isDeep != 'boolean' && isIterateeCall(value, isDeep, customizer)) {
        isDeep = false;
      }
      else if (typeof isDeep == 'function') {
        thisArg = customizer;
        customizer = isDeep;
        isDeep = false;
      }
      return typeof customizer == 'function'
        ? baseClone(value, isDeep, bindCallback(customizer, thisArg, 1))
        : baseClone(value, isDeep);
    }

    /**
     * Creates a deep clone of `value`. If `customizer` is provided it is invoked
     * to produce the cloned values. If `customizer` returns `undefined` cloning
     * is handled by the method instead. The `customizer` is bound to `thisArg`
     * and invoked with two argument; (value [, index|key, object]).
     *
     * **Note:** This method is loosely based on the
     * [structured clone algorithm](http://www.w3.org/TR/html5/infrastructure.html#internal-structured-cloning-algorithm).
     * The enumerable properties of `arguments` objects and objects created by
     * constructors other than `Object` are cloned to plain `Object` objects. An
     * empty object is returned for uncloneable values such as functions, DOM nodes,
     * Maps, Sets, and WeakMaps.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to deep clone.
     * @param {Function} [customizer] The function to customize cloning values.
     * @param {*} [thisArg] The `this` binding of `customizer`.
     * @returns {*} Returns the deep cloned value.
     * @example
     *
     * var users = [
     *   { 'user': 'barney' },
     *   { 'user': 'fred' }
     * ];
     *
     * var deep = _.cloneDeep(users);
     * deep[0] === users[0];
     * // => false
     *
     * // using a customizer callback
     * var el = _.cloneDeep(document.body, function(value) {
     *   if (_.isElement(value)) {
     *     return value.cloneNode(true);
     *   }
     * });
     *
     * el === document.body
     * // => false
     * el.nodeName
     * // => BODY
     * el.childNodes.length;
     * // => 20
     */
    function cloneDeep(value, customizer, thisArg) {
      return typeof customizer == 'function'
        ? baseClone(value, true, bindCallback(customizer, thisArg, 1))
        : baseClone(value, true);
    }

    /**
     * Checks if `value` is greater than `other`.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to compare.
     * @param {*} other The other value to compare.
     * @returns {boolean} Returns `true` if `value` is greater than `other`, else `false`.
     * @example
     *
     * _.gt(3, 1);
     * // => true
     *
     * _.gt(3, 3);
     * // => false
     *
     * _.gt(1, 3);
     * // => false
     */
    function gt(value, other) {
      return value > other;
    }

    /**
     * Checks if `value` is greater than or equal to `other`.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to compare.
     * @param {*} other The other value to compare.
     * @returns {boolean} Returns `true` if `value` is greater than or equal to `other`, else `false`.
     * @example
     *
     * _.gte(3, 1);
     * // => true
     *
     * _.gte(3, 3);
     * // => true
     *
     * _.gte(1, 3);
     * // => false
     */
    function gte(value, other) {
      return value >= other;
    }

    /**
     * Checks if `value` is classified as an `arguments` object.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.
     * @example
     *
     * _.isArguments(function() { return arguments; }());
     * // => true
     *
     * _.isArguments([1, 2, 3]);
     * // => false
     */
    function isArguments(value) {
      return isObjectLike(value) && isArrayLike(value) &&
        hasOwnProperty.call(value, 'callee') && !propertyIsEnumerable.call(value, 'callee');
    }

    /**
     * Checks if `value` is classified as an `Array` object.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.
     * @example
     *
     * _.isArray([1, 2, 3]);
     * // => true
     *
     * _.isArray(function() { return arguments; }());
     * // => false
     */
    var isArray = nativeIsArray || function(value) {
      return isObjectLike(value) && isLength(value.length) && objToString.call(value) == arrayTag;
    };

    /**
     * Checks if `value` is classified as a boolean primitive or object.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.
     * @example
     *
     * _.isBoolean(false);
     * // => true
     *
     * _.isBoolean(null);
     * // => false
     */
    function isBoolean(value) {
      return value === true || value === false || (isObjectLike(value) && objToString.call(value) == boolTag);
    }

    /**
     * Checks if `value` is classified as a `Date` object.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.
     * @example
     *
     * _.isDate(new Date);
     * // => true
     *
     * _.isDate('Mon April 23 2012');
     * // => false
     */
    function isDate(value) {
      return isObjectLike(value) && objToString.call(value) == dateTag;
    }

    /**
     * Checks if `value` is a DOM element.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a DOM element, else `false`.
     * @example
     *
     * _.isElement(document.body);
     * // => true
     *
     * _.isElement('<body>');
     * // => false
     */
    function isElement(value) {
      return !!value && value.nodeType === 1 && isObjectLike(value) && !isPlainObject(value);
    }

    /**
     * Checks if `value` is empty. A value is considered empty unless it is an
     * `arguments` object, array, string, or jQuery-like collection with a length
     * greater than `0` or an object with own enumerable properties.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {Array|Object|string} value The value to inspect.
     * @returns {boolean} Returns `true` if `value` is empty, else `false`.
     * @example
     *
     * _.isEmpty(null);
     * // => true
     *
     * _.isEmpty(true);
     * // => true
     *
     * _.isEmpty(1);
     * // => true
     *
     * _.isEmpty([1, 2, 3]);
     * // => false
     *
     * _.isEmpty({ 'a': 1 });
     * // => false
     */
    function isEmpty(value) {
      if (value == null) {
        return true;
      }
      if (isArrayLike(value) && (isArray(value) || isString(value) || isArguments(value) ||
          (isObjectLike(value) && isFunction(value.splice)))) {
        return !value.length;
      }
      return !keys(value).length;
    }

    /**
     * Performs a deep comparison between two values to determine if they are
     * equivalent. If `customizer` is provided it is invoked to compare values.
     * If `customizer` returns `undefined` comparisons are handled by the method
     * instead. The `customizer` is bound to `thisArg` and invoked with three
     * arguments: (value, other [, index|key]).
     *
     * **Note:** This method supports comparing arrays, booleans, `Date` objects,
     * numbers, `Object` objects, regexes, and strings. Objects are compared by
     * their own, not inherited, enumerable properties. Functions and DOM nodes
     * are **not** supported. Provide a customizer function to extend support
     * for comparing other values.
     *
     * @static
     * @memberOf _
     * @alias eq
     * @category Lang
     * @param {*} value The value to compare.
     * @param {*} other The other value to compare.
     * @param {Function} [customizer] The function to customize value comparisons.
     * @param {*} [thisArg] The `this` binding of `customizer`.
     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.
     * @example
     *
     * var object = { 'user': 'fred' };
     * var other = { 'user': 'fred' };
     *
     * object == other;
     * // => false
     *
     * _.isEqual(object, other);
     * // => true
     *
     * // using a customizer callback
     * var array = ['hello', 'goodbye'];
     * var other = ['hi', 'goodbye'];
     *
     * _.isEqual(array, other, function(value, other) {
     *   if (_.every([value, other], RegExp.prototype.test, /^h(?:i|ello)$/)) {
     *     return true;
     *   }
     * });
     * // => true
     */
    function isEqual(value, other, customizer, thisArg) {
      customizer = typeof customizer == 'function' ? bindCallback(customizer, thisArg, 3) : undefined;
      var result = customizer ? customizer(value, other) : undefined;
      return  result === undefined ? baseIsEqual(value, other, customizer) : !!result;
    }

    /**
     * Checks if `value` is an `Error`, `EvalError`, `RangeError`, `ReferenceError`,
     * `SyntaxError`, `TypeError`, or `URIError` object.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is an error object, else `false`.
     * @example
     *
     * _.isError(new Error);
     * // => true
     *
     * _.isError(Error);
     * // => false
     */
    function isError(value) {
      return isObjectLike(value) && typeof value.message == 'string' && objToString.call(value) == errorTag;
    }

    /**
     * Checks if `value` is a finite primitive number.
     *
     * **Note:** This method is based on [`Number.isFinite`](http://ecma-international.org/ecma-262/6.0/#sec-number.isfinite).
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a finite number, else `false`.
     * @example
     *
     * _.isFinite(10);
     * // => true
     *
     * _.isFinite('10');
     * // => false
     *
     * _.isFinite(true);
     * // => false
     *
     * _.isFinite(Object(10));
     * // => false
     *
     * _.isFinite(Infinity);
     * // => false
     */
    function isFinite(value) {
      return typeof value == 'number' && nativeIsFinite(value);
    }

    /**
     * Checks if `value` is classified as a `Function` object.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.
     * @example
     *
     * _.isFunction(_);
     * // => true
     *
     * _.isFunction(/abc/);
     * // => false
     */
    function isFunction(value) {
      // The use of `Object#toString` avoids issues with the `typeof` operator
      // in older versions of Chrome and Safari which return 'function' for regexes
      // and Safari 8 equivalents which return 'object' for typed array constructors.
      return isObject(value) && objToString.call(value) == funcTag;
    }

    /**
     * Checks if `value` is the [language type](https://es5.github.io/#x8) of `Object`.
     * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is an object, else `false`.
     * @example
     *
     * _.isObject({});
     * // => true
     *
     * _.isObject([1, 2, 3]);
     * // => true
     *
     * _.isObject(1);
     * // => false
     */
    function isObject(value) {
      // Avoid a V8 JIT bug in Chrome 19-20.
      // See https://code.google.com/p/v8/issues/detail?id=2291 for more details.
      var type = typeof value;
      return !!value && (type == 'object' || type == 'function');
    }

    /**
     * Performs a deep comparison between `object` and `source` to determine if
     * `object` contains equivalent property values. If `customizer` is provided
     * it is invoked to compare values. If `customizer` returns `undefined`
     * comparisons are handled by the method instead. The `customizer` is bound
     * to `thisArg` and invoked with three arguments: (value, other, index|key).
     *
     * **Note:** This method supports comparing properties of arrays, booleans,
     * `Date` objects, numbers, `Object` objects, regexes, and strings. Functions
     * and DOM nodes are **not** supported. Provide a customizer function to extend
     * support for comparing other values.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {Object} object The object to inspect.
     * @param {Object} source The object of property values to match.
     * @param {Function} [customizer] The function to customize value comparisons.
     * @param {*} [thisArg] The `this` binding of `customizer`.
     * @returns {boolean} Returns `true` if `object` is a match, else `false`.
     * @example
     *
     * var object = { 'user': 'fred', 'age': 40 };
     *
     * _.isMatch(object, { 'age': 40 });
     * // => true
     *
     * _.isMatch(object, { 'age': 36 });
     * // => false
     *
     * // using a customizer callback
     * var object = { 'greeting': 'hello' };
     * var source = { 'greeting': 'hi' };
     *
     * _.isMatch(object, source, function(value, other) {
     *   return _.every([value, other], RegExp.prototype.test, /^h(?:i|ello)$/) || undefined;
     * });
     * // => true
     */
    function isMatch(object, source, customizer, thisArg) {
      customizer = typeof customizer == 'function' ? bindCallback(customizer, thisArg, 3) : undefined;
      return baseIsMatch(object, getMatchData(source), customizer);
    }

    /**
     * Checks if `value` is `NaN`.
     *
     * **Note:** This method is not the same as [`isNaN`](https://es5.github.io/#x15.1.2.4)
     * which returns `true` for `undefined` and other non-numeric values.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.
     * @example
     *
     * _.isNaN(NaN);
     * // => true
     *
     * _.isNaN(new Number(NaN));
     * // => true
     *
     * isNaN(undefined);
     * // => true
     *
     * _.isNaN(undefined);
     * // => false
     */
    function isNaN(value) {
      // An `NaN` primitive is the only value that is not equal to itself.
      // Perform the `toStringTag` check first to avoid errors with some host objects in IE.
      return isNumber(value) && value != +value;
    }

    /**
     * Checks if `value` is a native function.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a native function, else `false`.
     * @example
     *
     * _.isNative(Array.prototype.push);
     * // => true
     *
     * _.isNative(_);
     * // => false
     */
    function isNative(value) {
      if (value == null) {
        return false;
      }
      if (isFunction(value)) {
        return reIsNative.test(fnToString.call(value));
      }
      return isObjectLike(value) && reIsHostCtor.test(value);
    }

    /**
     * Checks if `value` is `null`.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is `null`, else `false`.
     * @example
     *
     * _.isNull(null);
     * // => true
     *
     * _.isNull(void 0);
     * // => false
     */
    function isNull(value) {
      return value === null;
    }

    /**
     * Checks if `value` is classified as a `Number` primitive or object.
     *
     * **Note:** To exclude `Infinity`, `-Infinity`, and `NaN`, which are classified
     * as numbers, use the `_.isFinite` method.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.
     * @example
     *
     * _.isNumber(8.4);
     * // => true
     *
     * _.isNumber(NaN);
     * // => true
     *
     * _.isNumber('8.4');
     * // => false
     */
    function isNumber(value) {
      return typeof value == 'number' || (isObjectLike(value) && objToString.call(value) == numberTag);
    }

    /**
     * Checks if `value` is a plain object, that is, an object created by the
     * `Object` constructor or one with a `[[Prototype]]` of `null`.
     *
     * **Note:** This method assumes objects created by the `Object` constructor
     * have no inherited enumerable properties.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     * }
     *
     * _.isPlainObject(new Foo);
     * // => false
     *
     * _.isPlainObject([1, 2, 3]);
     * // => false
     *
     * _.isPlainObject({ 'x': 0, 'y': 0 });
     * // => true
     *
     * _.isPlainObject(Object.create(null));
     * // => true
     */
    function isPlainObject(value) {
      var Ctor;

      // Exit early for non `Object` objects.
      if (!(isObjectLike(value) && objToString.call(value) == objectTag && !isArguments(value)) ||
          (!hasOwnProperty.call(value, 'constructor') && (Ctor = value.constructor, typeof Ctor == 'function' && !(Ctor instanceof Ctor)))) {
        return false;
      }
      // IE < 9 iterates inherited properties before own properties. If the first
      // iterated property is an object's own property then there are no inherited
      // enumerable properties.
      var result;
      // In most environments an object's own properties are iterated before
      // its inherited properties. If the last iterated property is an object's
      // own property then there are no inherited enumerable properties.
      baseForIn(value, function(subValue, key) {
        result = key;
      });
      return result === undefined || hasOwnProperty.call(value, result);
    }

    /**
     * Checks if `value` is classified as a `RegExp` object.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.
     * @example
     *
     * _.isRegExp(/abc/);
     * // => true
     *
     * _.isRegExp('/abc/');
     * // => false
     */
    function isRegExp(value) {
      return isObject(value) && objToString.call(value) == regexpTag;
    }

    /**
     * Checks if `value` is classified as a `String` primitive or object.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.
     * @example
     *
     * _.isString('abc');
     * // => true
     *
     * _.isString(1);
     * // => false
     */
    function isString(value) {
      return typeof value == 'string' || (isObjectLike(value) && objToString.call(value) == stringTag);
    }

    /**
     * Checks if `value` is classified as a typed array.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.
     * @example
     *
     * _.isTypedArray(new Uint8Array);
     * // => true
     *
     * _.isTypedArray([]);
     * // => false
     */
    function isTypedArray(value) {
      return isObjectLike(value) && isLength(value.length) && !!typedArrayTags[objToString.call(value)];
    }

    /**
     * Checks if `value` is `undefined`.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is `undefined`, else `false`.
     * @example
     *
     * _.isUndefined(void 0);
     * // => true
     *
     * _.isUndefined(null);
     * // => false
     */
    function isUndefined(value) {
      return value === undefined;
    }

    /**
     * Checks if `value` is less than `other`.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to compare.
     * @param {*} other The other value to compare.
     * @returns {boolean} Returns `true` if `value` is less than `other`, else `false`.
     * @example
     *
     * _.lt(1, 3);
     * // => true
     *
     * _.lt(3, 3);
     * // => false
     *
     * _.lt(3, 1);
     * // => false
     */
    function lt(value, other) {
      return value < other;
    }

    /**
     * Checks if `value` is less than or equal to `other`.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to compare.
     * @param {*} other The other value to compare.
     * @returns {boolean} Returns `true` if `value` is less than or equal to `other`, else `false`.
     * @example
     *
     * _.lte(1, 3);
     * // => true
     *
     * _.lte(3, 3);
     * // => true
     *
     * _.lte(3, 1);
     * // => false
     */
    function lte(value, other) {
      return value <= other;
    }

    /**
     * Converts `value` to an array.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to convert.
     * @returns {Array} Returns the converted array.
     * @example
     *
     * (function() {
     *   return _.toArray(arguments).slice(1);
     * }(1, 2, 3));
     * // => [2, 3]
     */
    function toArray(value) {
      var length = value ? getLength(value) : 0;
      if (!isLength(length)) {
        return values(value);
      }
      if (!length) {
        return [];
      }
      return arrayCopy(value);
    }

    /**
     * Converts `value` to a plain object flattening inherited enumerable
     * properties of `value` to own properties of the plain object.
     *
     * @static
     * @memberOf _
     * @category Lang
     * @param {*} value The value to convert.
     * @returns {Object} Returns the converted plain object.
     * @example
     *
     * function Foo() {
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.assign({ 'a': 1 }, new Foo);
     * // => { 'a': 1, 'b': 2 }
     *
     * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));
     * // => { 'a': 1, 'b': 2, 'c': 3 }
     */
    function toPlainObject(value) {
      return baseCopy(value, keysIn(value));
    }

    /*------------------------------------------------------------------------*/

    /**
     * Recursively merges own enumerable properties of the source object(s), that
     * don't resolve to `undefined` into the destination object. Subsequent sources
     * overwrite property assignments of previous sources. If `customizer` is
     * provided it is invoked to produce the merged values of the destination and
     * source properties. If `customizer` returns `undefined` merging is handled
     * by the method instead. The `customizer` is bound to `thisArg` and invoked
     * with five arguments: (objectValue, sourceValue, key, object, source).
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The destination object.
     * @param {...Object} [sources] The source objects.
     * @param {Function} [customizer] The function to customize assigned values.
     * @param {*} [thisArg] The `this` binding of `customizer`.
     * @returns {Object} Returns `object`.
     * @example
     *
     * var users = {
     *   'data': [{ 'user': 'barney' }, { 'user': 'fred' }]
     * };
     *
     * var ages = {
     *   'data': [{ 'age': 36 }, { 'age': 40 }]
     * };
     *
     * _.merge(users, ages);
     * // => { 'data': [{ 'user': 'barney', 'age': 36 }, { 'user': 'fred', 'age': 40 }] }
     *
     * // using a customizer callback
     * var object = {
     *   'fruits': ['apple'],
     *   'vegetables': ['beet']
     * };
     *
     * var other = {
     *   'fruits': ['banana'],
     *   'vegetables': ['carrot']
     * };
     *
     * _.merge(object, other, function(a, b) {
     *   if (_.isArray(a)) {
     *     return a.concat(b);
     *   }
     * });
     * // => { 'fruits': ['apple', 'banana'], 'vegetables': ['beet', 'carrot'] }
     */
    var merge = createAssigner(baseMerge);

    /**
     * Assigns own enumerable properties of source object(s) to the destination
     * object. Subsequent sources overwrite property assignments of previous sources.
     * If `customizer` is provided it is invoked to produce the assigned values.
     * The `customizer` is bound to `thisArg` and invoked with five arguments:
     * (objectValue, sourceValue, key, object, source).
     *
     * **Note:** This method mutates `object` and is based on
     * [`Object.assign`](http://ecma-international.org/ecma-262/6.0/#sec-object.assign).
     *
     * @static
     * @memberOf _
     * @alias extend
     * @category Object
     * @param {Object} object The destination object.
     * @param {...Object} [sources] The source objects.
     * @param {Function} [customizer] The function to customize assigned values.
     * @param {*} [thisArg] The `this` binding of `customizer`.
     * @returns {Object} Returns `object`.
     * @example
     *
     * _.assign({ 'user': 'barney' }, { 'age': 40 }, { 'user': 'fred' });
     * // => { 'user': 'fred', 'age': 40 }
     *
     * // using a customizer callback
     * var defaults = _.partialRight(_.assign, function(value, other) {
     *   return _.isUndefined(value) ? other : value;
     * });
     *
     * defaults({ 'user': 'barney' }, { 'age': 36 }, { 'user': 'fred' });
     * // => { 'user': 'barney', 'age': 36 }
     */
    var assign = createAssigner(function(object, source, customizer) {
      return customizer
        ? assignWith(object, source, customizer)
        : baseAssign(object, source);
    });

    /**
     * Creates an object that inherits from the given `prototype` object. If a
     * `properties` object is provided its own enumerable properties are assigned
     * to the created object.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} prototype The object to inherit from.
     * @param {Object} [properties] The properties to assign to the object.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {Object} Returns the new object.
     * @example
     *
     * function Shape() {
     *   this.x = 0;
     *   this.y = 0;
     * }
     *
     * function Circle() {
     *   Shape.call(this);
     * }
     *
     * Circle.prototype = _.create(Shape.prototype, {
     *   'constructor': Circle
     * });
     *
     * var circle = new Circle;
     * circle instanceof Circle;
     * // => true
     *
     * circle instanceof Shape;
     * // => true
     */
    function create(prototype, properties, guard) {
      var result = baseCreate(prototype);
      if (guard && isIterateeCall(prototype, properties, guard)) {
        properties = undefined;
      }
      return properties ? baseAssign(result, properties) : result;
    }

    /**
     * Assigns own enumerable properties of source object(s) to the destination
     * object for all destination properties that resolve to `undefined`. Once a
     * property is set, additional values of the same property are ignored.
     *
     * **Note:** This method mutates `object`.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The destination object.
     * @param {...Object} [sources] The source objects.
     * @returns {Object} Returns `object`.
     * @example
     *
     * _.defaults({ 'user': 'barney' }, { 'age': 36 }, { 'user': 'fred' });
     * // => { 'user': 'barney', 'age': 36 }
     */
    var defaults = createDefaults(assign, assignDefaults);

    /**
     * This method is like `_.defaults` except that it recursively assigns
     * default properties.
     *
     * **Note:** This method mutates `object`.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The destination object.
     * @param {...Object} [sources] The source objects.
     * @returns {Object} Returns `object`.
     * @example
     *
     * _.defaultsDeep({ 'user': { 'name': 'barney' } }, { 'user': { 'name': 'fred', 'age': 36 } });
     * // => { 'user': { 'name': 'barney', 'age': 36 } }
     *
     */
    var defaultsDeep = createDefaults(merge, mergeDefaults);

    /**
     * This method is like `_.find` except that it returns the key of the first
     * element `predicate` returns truthy for instead of the element itself.
     *
     * If a property name is provided for `predicate` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `predicate` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to search.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {string|undefined} Returns the key of the matched element, else `undefined`.
     * @example
     *
     * var users = {
     *   'barney':  { 'age': 36, 'active': true },
     *   'fred':    { 'age': 40, 'active': false },
     *   'pebbles': { 'age': 1,  'active': true }
     * };
     *
     * _.findKey(users, function(chr) {
     *   return chr.age < 40;
     * });
     * // => 'barney' (iteration order is not guaranteed)
     *
     * // using the `_.matches` callback shorthand
     * _.findKey(users, { 'age': 1, 'active': true });
     * // => 'pebbles'
     *
     * // using the `_.matchesProperty` callback shorthand
     * _.findKey(users, 'active', false);
     * // => 'fred'
     *
     * // using the `_.property` callback shorthand
     * _.findKey(users, 'active');
     * // => 'barney'
     */
    var findKey = createFindKey(baseForOwn);

    /**
     * This method is like `_.findKey` except that it iterates over elements of
     * a collection in the opposite order.
     *
     * If a property name is provided for `predicate` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `predicate` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to search.
     * @param {Function|Object|string} [predicate=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {string|undefined} Returns the key of the matched element, else `undefined`.
     * @example
     *
     * var users = {
     *   'barney':  { 'age': 36, 'active': true },
     *   'fred':    { 'age': 40, 'active': false },
     *   'pebbles': { 'age': 1,  'active': true }
     * };
     *
     * _.findLastKey(users, function(chr) {
     *   return chr.age < 40;
     * });
     * // => returns `pebbles` assuming `_.findKey` returns `barney`
     *
     * // using the `_.matches` callback shorthand
     * _.findLastKey(users, { 'age': 36, 'active': true });
     * // => 'barney'
     *
     * // using the `_.matchesProperty` callback shorthand
     * _.findLastKey(users, 'active', false);
     * // => 'fred'
     *
     * // using the `_.property` callback shorthand
     * _.findLastKey(users, 'active');
     * // => 'pebbles'
     */
    var findLastKey = createFindKey(baseForOwnRight);

    /**
     * Iterates over own and inherited enumerable properties of an object invoking
     * `iteratee` for each property. The `iteratee` is bound to `thisArg` and invoked
     * with three arguments: (value, key, object). Iteratee functions may exit
     * iteration early by explicitly returning `false`.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Object} Returns `object`.
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.forIn(new Foo, function(value, key) {
     *   console.log(key);
     * });
     * // => logs 'a', 'b', and 'c' (iteration order is not guaranteed)
     */
    var forIn = createForIn(baseFor);

    /**
     * This method is like `_.forIn` except that it iterates over properties of
     * `object` in the opposite order.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Object} Returns `object`.
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.forInRight(new Foo, function(value, key) {
     *   console.log(key);
     * });
     * // => logs 'c', 'b', and 'a' assuming `_.forIn ` logs 'a', 'b', and 'c'
     */
    var forInRight = createForIn(baseForRight);

    /**
     * Iterates over own enumerable properties of an object invoking `iteratee`
     * for each property. The `iteratee` is bound to `thisArg` and invoked with
     * three arguments: (value, key, object). Iteratee functions may exit iteration
     * early by explicitly returning `false`.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Object} Returns `object`.
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.forOwn(new Foo, function(value, key) {
     *   console.log(key);
     * });
     * // => logs 'a' and 'b' (iteration order is not guaranteed)
     */
    var forOwn = createForOwn(baseForOwn);

    /**
     * This method is like `_.forOwn` except that it iterates over properties of
     * `object` in the opposite order.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Object} Returns `object`.
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.forOwnRight(new Foo, function(value, key) {
     *   console.log(key);
     * });
     * // => logs 'b' and 'a' assuming `_.forOwn` logs 'a' and 'b'
     */
    var forOwnRight = createForOwn(baseForOwnRight);

    /**
     * Creates an array of function property names from all enumerable properties,
     * own and inherited, of `object`.
     *
     * @static
     * @memberOf _
     * @alias methods
     * @category Object
     * @param {Object} object The object to inspect.
     * @returns {Array} Returns the new array of property names.
     * @example
     *
     * _.functions(_);
     * // => ['after', 'ary', 'assign', ...]
     */
    function functions(object) {
      return baseFunctions(object, keysIn(object));
    }

    /**
     * Gets the property value at `path` of `object`. If the resolved value is
     * `undefined` the `defaultValue` is used in its place.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to query.
     * @param {Array|string} path The path of the property to get.
     * @param {*} [defaultValue] The value returned if the resolved value is `undefined`.
     * @returns {*} Returns the resolved value.
     * @example
     *
     * var object = { 'a': [{ 'b': { 'c': 3 } }] };
     *
     * _.get(object, 'a[0].b.c');
     * // => 3
     *
     * _.get(object, ['a', '0', 'b', 'c']);
     * // => 3
     *
     * _.get(object, 'a.b.c', 'default');
     * // => 'default'
     */
    function get(object, path, defaultValue) {
      var result = object == null ? undefined : baseGet(object, toPath(path), path + '');
      return result === undefined ? defaultValue : result;
    }

    /**
     * Checks if `path` is a direct property.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to query.
     * @param {Array|string} path The path to check.
     * @returns {boolean} Returns `true` if `path` is a direct property, else `false`.
     * @example
     *
     * var object = { 'a': { 'b': { 'c': 3 } } };
     *
     * _.has(object, 'a');
     * // => true
     *
     * _.has(object, 'a.b.c');
     * // => true
     *
     * _.has(object, ['a', 'b', 'c']);
     * // => true
     */
    function has(object, path) {
      if (object == null) {
        return false;
      }
      var result = hasOwnProperty.call(object, path);
      if (!result && !isKey(path)) {
        path = toPath(path);
        object = path.length == 1 ? object : baseGet(object, baseSlice(path, 0, -1));
        if (object == null) {
          return false;
        }
        path = last(path);
        result = hasOwnProperty.call(object, path);
      }
      return result || (isLength(object.length) && isIndex(path, object.length) &&
        (isArray(object) || isArguments(object)));
    }

    /**
     * Creates an object composed of the inverted keys and values of `object`.
     * If `object` contains duplicate values, subsequent values overwrite property
     * assignments of previous values unless `multiValue` is `true`.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to invert.
     * @param {boolean} [multiValue] Allow multiple values per key.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {Object} Returns the new inverted object.
     * @example
     *
     * var object = { 'a': 1, 'b': 2, 'c': 1 };
     *
     * _.invert(object);
     * // => { '1': 'c', '2': 'b' }
     *
     * // with `multiValue`
     * _.invert(object, true);
     * // => { '1': ['a', 'c'], '2': ['b'] }
     */
    function invert(object, multiValue, guard) {
      if (guard && isIterateeCall(object, multiValue, guard)) {
        multiValue = undefined;
      }
      var index = -1,
          props = keys(object),
          length = props.length,
          result = {};

      while (++index < length) {
        var key = props[index],
            value = object[key];

        if (multiValue) {
          if (hasOwnProperty.call(result, value)) {
            result[value].push(key);
          } else {
            result[value] = [key];
          }
        }
        else {
          result[value] = key;
        }
      }
      return result;
    }

    /**
     * Creates an array of the own enumerable property names of `object`.
     *
     * **Note:** Non-object values are coerced to objects. See the
     * [ES spec](http://ecma-international.org/ecma-262/6.0/#sec-object.keys)
     * for more details.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to query.
     * @returns {Array} Returns the array of property names.
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.keys(new Foo);
     * // => ['a', 'b'] (iteration order is not guaranteed)
     *
     * _.keys('hi');
     * // => ['0', '1']
     */
    var keys = !nativeKeys ? shimKeys : function(object) {
      var Ctor = object == null ? undefined : object.constructor;
      if ((typeof Ctor == 'function' && Ctor.prototype === object) ||
          (typeof object != 'function' && isArrayLike(object))) {
        return shimKeys(object);
      }
      return isObject(object) ? nativeKeys(object) : [];
    };

    /**
     * Creates an array of the own and inherited enumerable property names of `object`.
     *
     * **Note:** Non-object values are coerced to objects.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to query.
     * @returns {Array} Returns the array of property names.
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.keysIn(new Foo);
     * // => ['a', 'b', 'c'] (iteration order is not guaranteed)
     */
    function keysIn(object) {
      if (object == null) {
        return [];
      }
      if (!isObject(object)) {
        object = Object(object);
      }
      var length = object.length;
      length = (length && isLength(length) &&
        (isArray(object) || isArguments(object)) && length) || 0;

      var Ctor = object.constructor,
          index = -1,
          isProto = typeof Ctor == 'function' && Ctor.prototype === object,
          result = Array(length),
          skipIndexes = length > 0;

      while (++index < length) {
        result[index] = (index + '');
      }
      for (var key in object) {
        if (!(skipIndexes && isIndex(key, length)) &&
            !(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {
          result.push(key);
        }
      }
      return result;
    }

    /**
     * The opposite of `_.mapValues`; this method creates an object with the
     * same values as `object` and keys generated by running each own enumerable
     * property of `object` through `iteratee`.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to iterate over.
     * @param {Function|Object|string} [iteratee=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Object} Returns the new mapped object.
     * @example
     *
     * _.mapKeys({ 'a': 1, 'b': 2 }, function(value, key) {
     *   return key + value;
     * });
     * // => { 'a1': 1, 'b2': 2 }
     */
    var mapKeys = createObjectMapper(true);

    /**
     * Creates an object with the same keys as `object` and values generated by
     * running each own enumerable property of `object` through `iteratee`. The
     * iteratee function is bound to `thisArg` and invoked with three arguments:
     * (value, key, object).
     *
     * If a property name is provided for `iteratee` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `iteratee` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to iterate over.
     * @param {Function|Object|string} [iteratee=_.identity] The function invoked
     *  per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Object} Returns the new mapped object.
     * @example
     *
     * _.mapValues({ 'a': 1, 'b': 2 }, function(n) {
     *   return n * 3;
     * });
     * // => { 'a': 3, 'b': 6 }
     *
     * var users = {
     *   'fred':    { 'user': 'fred',    'age': 40 },
     *   'pebbles': { 'user': 'pebbles', 'age': 1 }
     * };
     *
     * // using the `_.property` callback shorthand
     * _.mapValues(users, 'age');
     * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)
     */
    var mapValues = createObjectMapper();

    /**
     * The opposite of `_.pick`; this method creates an object composed of the
     * own and inherited enumerable properties of `object` that are not omitted.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The source object.
     * @param {Function|...(string|string[])} [predicate] The function invoked per
     *  iteration or property names to omit, specified as individual property
     *  names or arrays of property names.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {Object} Returns the new object.
     * @example
     *
     * var object = { 'user': 'fred', 'age': 40 };
     *
     * _.omit(object, 'age');
     * // => { 'user': 'fred' }
     *
     * _.omit(object, _.isNumber);
     * // => { 'user': 'fred' }
     */
    var omit = restParam(function(object, props) {
      if (object == null) {
        return {};
      }
      if (typeof props[0] != 'function') {
        var props = arrayMap(baseFlatten(props), String);
        return pickByArray(object, baseDifference(keysIn(object), props));
      }
      var predicate = bindCallback(props[0], props[1], 3);
      return pickByCallback(object, function(value, key, object) {
        return !predicate(value, key, object);
      });
    });

    /**
     * Creates a two dimensional array of the key-value pairs for `object`,
     * e.g. `[[key1, value1], [key2, value2]]`.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to query.
     * @returns {Array} Returns the new array of key-value pairs.
     * @example
     *
     * _.pairs({ 'barney': 36, 'fred': 40 });
     * // => [['barney', 36], ['fred', 40]] (iteration order is not guaranteed)
     */
    function pairs(object) {
      object = toObject(object);

      var index = -1,
          props = keys(object),
          length = props.length,
          result = Array(length);

      while (++index < length) {
        var key = props[index];
        result[index] = [key, object[key]];
      }
      return result;
    }

    /**
     * Creates an object composed of the picked `object` properties. Property
     * names may be specified as individual arguments or as arrays of property
     * names. If `predicate` is provided it is invoked for each property of `object`
     * picking the properties `predicate` returns truthy for. The predicate is
     * bound to `thisArg` and invoked with three arguments: (value, key, object).
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The source object.
     * @param {Function|...(string|string[])} [predicate] The function invoked per
     *  iteration or property names to pick, specified as individual property
     *  names or arrays of property names.
     * @param {*} [thisArg] The `this` binding of `predicate`.
     * @returns {Object} Returns the new object.
     * @example
     *
     * var object = { 'user': 'fred', 'age': 40 };
     *
     * _.pick(object, 'user');
     * // => { 'user': 'fred' }
     *
     * _.pick(object, _.isString);
     * // => { 'user': 'fred' }
     */
    var pick = restParam(function(object, props) {
      if (object == null) {
        return {};
      }
      return typeof props[0] == 'function'
        ? pickByCallback(object, bindCallback(props[0], props[1], 3))
        : pickByArray(object, baseFlatten(props));
    });

    /**
     * This method is like `_.get` except that if the resolved value is a function
     * it is invoked with the `this` binding of its parent object and its result
     * is returned.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to query.
     * @param {Array|string} path The path of the property to resolve.
     * @param {*} [defaultValue] The value returned if the resolved value is `undefined`.
     * @returns {*} Returns the resolved value.
     * @example
     *
     * var object = { 'a': [{ 'b': { 'c1': 3, 'c2': _.constant(4) } }] };
     *
     * _.result(object, 'a[0].b.c1');
     * // => 3
     *
     * _.result(object, 'a[0].b.c2');
     * // => 4
     *
     * _.result(object, 'a.b.c', 'default');
     * // => 'default'
     *
     * _.result(object, 'a.b.c', _.constant('default'));
     * // => 'default'
     */
    function result(object, path, defaultValue) {
      var result = object == null ? undefined : object[path];
      if (result === undefined) {
        if (object != null && !isKey(path, object)) {
          path = toPath(path);
          object = path.length == 1 ? object : baseGet(object, baseSlice(path, 0, -1));
          result = object == null ? undefined : object[last(path)];
        }
        result = result === undefined ? defaultValue : result;
      }
      return isFunction(result) ? result.call(object) : result;
    }

    /**
     * Sets the property value of `path` on `object`. If a portion of `path`
     * does not exist it is created.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to augment.
     * @param {Array|string} path The path of the property to set.
     * @param {*} value The value to set.
     * @returns {Object} Returns `object`.
     * @example
     *
     * var object = { 'a': [{ 'b': { 'c': 3 } }] };
     *
     * _.set(object, 'a[0].b.c', 4);
     * console.log(object.a[0].b.c);
     * // => 4
     *
     * _.set(object, 'x[0].y.z', 5);
     * console.log(object.x[0].y.z);
     * // => 5
     */
    function set(object, path, value) {
      if (object == null) {
        return object;
      }
      var pathKey = (path + '');
      path = (object[pathKey] != null || isKey(path, object)) ? [pathKey] : toPath(path);

      var index = -1,
          length = path.length,
          lastIndex = length - 1,
          nested = object;

      while (nested != null && ++index < length) {
        var key = path[index];
        if (isObject(nested)) {
          if (index == lastIndex) {
            nested[key] = value;
          } else if (nested[key] == null) {
            nested[key] = isIndex(path[index + 1]) ? [] : {};
          }
        }
        nested = nested[key];
      }
      return object;
    }

    /**
     * An alternative to `_.reduce`; this method transforms `object` to a new
     * `accumulator` object which is the result of running each of its own enumerable
     * properties through `iteratee`, with each invocation potentially mutating
     * the `accumulator` object. The `iteratee` is bound to `thisArg` and invoked
     * with four arguments: (accumulator, value, key, object). Iteratee functions
     * may exit iteration early by explicitly returning `false`.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Array|Object} object The object to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @param {*} [accumulator] The custom accumulator value.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {*} Returns the accumulated value.
     * @example
     *
     * _.transform([2, 3, 4], function(result, n) {
     *   result.push(n *= n);
     *   return n % 2 == 0;
     * });
     * // => [4, 9]
     *
     * _.transform({ 'a': 1, 'b': 2 }, function(result, n, key) {
     *   result[key] = n * 3;
     * });
     * // => { 'a': 3, 'b': 6 }
     */
    function transform(object, iteratee, accumulator, thisArg) {
      var isArr = isArray(object) || isTypedArray(object);
      iteratee = getCallback(iteratee, thisArg, 4);

      if (accumulator == null) {
        if (isArr || isObject(object)) {
          var Ctor = object.constructor;
          if (isArr) {
            accumulator = isArray(object) ? new Ctor : [];
          } else {
            accumulator = baseCreate(isFunction(Ctor) ? Ctor.prototype : undefined);
          }
        } else {
          accumulator = {};
        }
      }
      (isArr ? arrayEach : baseForOwn)(object, function(value, index, object) {
        return iteratee(accumulator, value, index, object);
      });
      return accumulator;
    }

    /**
     * Creates an array of the own enumerable property values of `object`.
     *
     * **Note:** Non-object values are coerced to objects.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to query.
     * @returns {Array} Returns the array of property values.
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.values(new Foo);
     * // => [1, 2] (iteration order is not guaranteed)
     *
     * _.values('hi');
     * // => ['h', 'i']
     */
    function values(object) {
      return baseValues(object, keys(object));
    }

    /**
     * Creates an array of the own and inherited enumerable property values
     * of `object`.
     *
     * **Note:** Non-object values are coerced to objects.
     *
     * @static
     * @memberOf _
     * @category Object
     * @param {Object} object The object to query.
     * @returns {Array} Returns the array of property values.
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.valuesIn(new Foo);
     * // => [1, 2, 3] (iteration order is not guaranteed)
     */
    function valuesIn(object) {
      return baseValues(object, keysIn(object));
    }

    /*------------------------------------------------------------------------*/

    /**
     * Checks if `n` is between `start` and up to but not including, `end`. If
     * `end` is not specified it is set to `start` with `start` then set to `0`.
     *
     * @static
     * @memberOf _
     * @category Number
     * @param {number} n The number to check.
     * @param {number} [start=0] The start of the range.
     * @param {number} end The end of the range.
     * @returns {boolean} Returns `true` if `n` is in the range, else `false`.
     * @example
     *
     * _.inRange(3, 2, 4);
     * // => true
     *
     * _.inRange(4, 8);
     * // => true
     *
     * _.inRange(4, 2);
     * // => false
     *
     * _.inRange(2, 2);
     * // => false
     *
     * _.inRange(1.2, 2);
     * // => true
     *
     * _.inRange(5.2, 4);
     * // => false
     */
    function inRange(value, start, end) {
      start = +start || 0;
      if (end === undefined) {
        end = start;
        start = 0;
      } else {
        end = +end || 0;
      }
      return value >= nativeMin(start, end) && value < nativeMax(start, end);
    }

    /**
     * Produces a random number between `min` and `max` (inclusive). If only one
     * argument is provided a number between `0` and the given number is returned.
     * If `floating` is `true`, or either `min` or `max` are floats, a floating-point
     * number is returned instead of an integer.
     *
     * @static
     * @memberOf _
     * @category Number
     * @param {number} [min=0] The minimum possible value.
     * @param {number} [max=1] The maximum possible value.
     * @param {boolean} [floating] Specify returning a floating-point number.
     * @returns {number} Returns the random number.
     * @example
     *
     * _.random(0, 5);
     * // => an integer between 0 and 5
     *
     * _.random(5);
     * // => also an integer between 0 and 5
     *
     * _.random(5, true);
     * // => a floating-point number between 0 and 5
     *
     * _.random(1.2, 5.2);
     * // => a floating-point number between 1.2 and 5.2
     */
    function random(min, max, floating) {
      if (floating && isIterateeCall(min, max, floating)) {
        max = floating = undefined;
      }
      var noMin = min == null,
          noMax = max == null;

      if (floating == null) {
        if (noMax && typeof min == 'boolean') {
          floating = min;
          min = 1;
        }
        else if (typeof max == 'boolean') {
          floating = max;
          noMax = true;
        }
      }
      if (noMin && noMax) {
        max = 1;
        noMax = false;
      }
      min = +min || 0;
      if (noMax) {
        max = min;
        min = 0;
      } else {
        max = +max || 0;
      }
      if (floating || min % 1 || max % 1) {
        var rand = nativeRandom();
        return nativeMin(min + (rand * (max - min + parseFloat('1e-' + ((rand + '').length - 1)))), max);
      }
      return baseRandom(min, max);
    }

    /*------------------------------------------------------------------------*/

    /**
     * Converts `string` to [camel case](https://en.wikipedia.org/wiki/CamelCase).
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to convert.
     * @returns {string} Returns the camel cased string.
     * @example
     *
     * _.camelCase('Foo Bar');
     * // => 'fooBar'
     *
     * _.camelCase('--foo-bar');
     * // => 'fooBar'
     *
     * _.camelCase('__foo_bar__');
     * // => 'fooBar'
     */
    var camelCase = createCompounder(function(result, word, index) {
      word = word.toLowerCase();
      return result + (index ? (word.charAt(0).toUpperCase() + word.slice(1)) : word);
    });

    /**
     * Capitalizes the first character of `string`.
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to capitalize.
     * @returns {string} Returns the capitalized string.
     * @example
     *
     * _.capitalize('fred');
     * // => 'Fred'
     */
    function capitalize(string) {
      string = baseToString(string);
      return string && (string.charAt(0).toUpperCase() + string.slice(1));
    }

    /**
     * Deburrs `string` by converting [latin-1 supplementary letters](https://en.wikipedia.org/wiki/Latin-1_Supplement_(Unicode_block)#Character_table)
     * to basic latin letters and removing [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks).
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to deburr.
     * @returns {string} Returns the deburred string.
     * @example
     *
     * _.deburr('dÃ©jÃ  vu');
     * // => 'deja vu'
     */
    function deburr(string) {
      string = baseToString(string);
      return string && string.replace(reLatin1, deburrLetter).replace(reComboMark, '');
    }

    /**
     * Checks if `string` ends with the given target string.
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to search.
     * @param {string} [target] The string to search for.
     * @param {number} [position=string.length] The position to search from.
     * @returns {boolean} Returns `true` if `string` ends with `target`, else `false`.
     * @example
     *
     * _.endsWith('abc', 'c');
     * // => true
     *
     * _.endsWith('abc', 'b');
     * // => false
     *
     * _.endsWith('abc', 'b', 2);
     * // => true
     */
    function endsWith(string, target, position) {
      string = baseToString(string);
      target = (target + '');

      var length = string.length;
      position = position === undefined
        ? length
        : nativeMin(position < 0 ? 0 : (+position || 0), length);

      position -= target.length;
      return position >= 0 && string.indexOf(target, position) == position;
    }

    /**
     * Converts the characters "&", "<", ">", '"', "'", and "\`", in `string` to
     * their corresponding HTML entities.
     *
     * **Note:** No other characters are escaped. To escape additional characters
     * use a third-party library like [_he_](https://mths.be/he).
     *
     * Though the ">" character is escaped for symmetry, characters like
     * ">" and "/" don't need escaping in HTML and have no special meaning
     * unless they're part of a tag or unquoted attribute value.
     * See [Mathias Bynens's article](https://mathiasbynens.be/notes/ambiguous-ampersands)
     * (under "semi-related fun fact") for more details.
     *
     * Backticks are escaped because in Internet Explorer < 9, they can break out
     * of attribute values or HTML comments. See [#59](https://html5sec.org/#59),
     * [#102](https://html5sec.org/#102), [#108](https://html5sec.org/#108), and
     * [#133](https://html5sec.org/#133) of the [HTML5 Security Cheatsheet](https://html5sec.org/)
     * for more details.
     *
     * When working with HTML you should always [quote attribute values](http://wonko.com/post/html-escaping)
     * to reduce XSS vectors.
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to escape.
     * @returns {string} Returns the escaped string.
     * @example
     *
     * _.escape('fred, barney, & pebbles');
     * // => 'fred, barney, &amp; pebbles'
     */
    function escape(string) {
      // Reset `lastIndex` because in IE < 9 `String#replace` does not.
      string = baseToString(string);
      return (string && reHasUnescapedHtml.test(string))
        ? string.replace(reUnescapedHtml, escapeHtmlChar)
        : string;
    }

    /**
     * Escapes the `RegExp` special characters "\", "/", "^", "$", ".", "|", "?",
     * "*", "+", "(", ")", "[", "]", "{" and "}" in `string`.
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to escape.
     * @returns {string} Returns the escaped string.
     * @example
     *
     * _.escapeRegExp('[lodash](https://lodash.com/)');
     * // => '\[lodash\]\(https:\/\/lodash\.com\/\)'
     */
    function escapeRegExp(string) {
      string = baseToString(string);
      return (string && reHasRegExpChars.test(string))
        ? string.replace(reRegExpChars, escapeRegExpChar)
        : (string || '(?:)');
    }

    /**
     * Converts `string` to [kebab case](https://en.wikipedia.org/wiki/Letter_case#Special_case_styles).
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to convert.
     * @returns {string} Returns the kebab cased string.
     * @example
     *
     * _.kebabCase('Foo Bar');
     * // => 'foo-bar'
     *
     * _.kebabCase('fooBar');
     * // => 'foo-bar'
     *
     * _.kebabCase('__foo_bar__');
     * // => 'foo-bar'
     */
    var kebabCase = createCompounder(function(result, word, index) {
      return result + (index ? '-' : '') + word.toLowerCase();
    });

    /**
     * Pads `string` on the left and right sides if it's shorter than `length`.
     * Padding characters are truncated if they can't be evenly divided by `length`.
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to pad.
     * @param {number} [length=0] The padding length.
     * @param {string} [chars=' '] The string used as padding.
     * @returns {string} Returns the padded string.
     * @example
     *
     * _.pad('abc', 8);
     * // => '  abc   '
     *
     * _.pad('abc', 8, '_-');
     * // => '_-abc_-_'
     *
     * _.pad('abc', 3);
     * // => 'abc'
     */
    function pad(string, length, chars) {
      string = baseToString(string);
      length = +length;

      var strLength = string.length;
      if (strLength >= length || !nativeIsFinite(length)) {
        return string;
      }
      var mid = (length - strLength) / 2,
          leftLength = nativeFloor(mid),
          rightLength = nativeCeil(mid);

      chars = createPadding('', rightLength, chars);
      return chars.slice(0, leftLength) + string + chars;
    }

    /**
     * Pads `string` on the left side if it's shorter than `length`. Padding
     * characters are truncated if they exceed `length`.
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to pad.
     * @param {number} [length=0] The padding length.
     * @param {string} [chars=' '] The string used as padding.
     * @returns {string} Returns the padded string.
     * @example
     *
     * _.padLeft('abc', 6);
     * // => '   abc'
     *
     * _.padLeft('abc', 6, '_-');
     * // => '_-_abc'
     *
     * _.padLeft('abc', 3);
     * // => 'abc'
     */
    var padLeft = createPadDir();

    /**
     * Pads `string` on the right side if it's shorter than `length`. Padding
     * characters are truncated if they exceed `length`.
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to pad.
     * @param {number} [length=0] The padding length.
     * @param {string} [chars=' '] The string used as padding.
     * @returns {string} Returns the padded string.
     * @example
     *
     * _.padRight('abc', 6);
     * // => 'abc   '
     *
     * _.padRight('abc', 6, '_-');
     * // => 'abc_-_'
     *
     * _.padRight('abc', 3);
     * // => 'abc'
     */
    var padRight = createPadDir(true);

    /**
     * Converts `string` to an integer of the specified radix. If `radix` is
     * `undefined` or `0`, a `radix` of `10` is used unless `value` is a hexadecimal,
     * in which case a `radix` of `16` is used.
     *
     * **Note:** This method aligns with the [ES5 implementation](https://es5.github.io/#E)
     * of `parseInt`.
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} string The string to convert.
     * @param {number} [radix] The radix to interpret `value` by.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {number} Returns the converted integer.
     * @example
     *
     * _.parseInt('08');
     * // => 8
     *
     * _.map(['6', '08', '10'], _.parseInt);
     * // => [6, 8, 10]
     */
    function parseInt(string, radix, guard) {
      // Firefox < 21 and Opera < 15 follow ES3 for `parseInt`.
      // Chrome fails to trim leading <BOM> whitespace characters.
      // See https://code.google.com/p/v8/issues/detail?id=3109 for more details.
      if (guard ? isIterateeCall(string, radix, guard) : radix == null) {
        radix = 0;
      } else if (radix) {
        radix = +radix;
      }
      string = trim(string);
      return nativeParseInt(string, radix || (reHasHexPrefix.test(string) ? 16 : 10));
    }

    /**
     * Repeats the given string `n` times.
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to repeat.
     * @param {number} [n=0] The number of times to repeat the string.
     * @returns {string} Returns the repeated string.
     * @example
     *
     * _.repeat('*', 3);
     * // => '***'
     *
     * _.repeat('abc', 2);
     * // => 'abcabc'
     *
     * _.repeat('abc', 0);
     * // => ''
     */
    function repeat(string, n) {
      var result = '';
      string = baseToString(string);
      n = +n;
      if (n < 1 || !string || !nativeIsFinite(n)) {
        return result;
      }
      // Leverage the exponentiation by squaring algorithm for a faster repeat.
      // See https://en.wikipedia.org/wiki/Exponentiation_by_squaring for more details.
      do {
        if (n % 2) {
          result += string;
        }
        n = nativeFloor(n / 2);
        string += string;
      } while (n);

      return result;
    }

    /**
     * Converts `string` to [snake case](https://en.wikipedia.org/wiki/Snake_case).
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to convert.
     * @returns {string} Returns the snake cased string.
     * @example
     *
     * _.snakeCase('Foo Bar');
     * // => 'foo_bar'
     *
     * _.snakeCase('fooBar');
     * // => 'foo_bar'
     *
     * _.snakeCase('--foo-bar');
     * // => 'foo_bar'
     */
    var snakeCase = createCompounder(function(result, word, index) {
      return result + (index ? '_' : '') + word.toLowerCase();
    });

    /**
     * Converts `string` to [start case](https://en.wikipedia.org/wiki/Letter_case#Stylistic_or_specialised_usage).
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to convert.
     * @returns {string} Returns the start cased string.
     * @example
     *
     * _.startCase('--foo-bar');
     * // => 'Foo Bar'
     *
     * _.startCase('fooBar');
     * // => 'Foo Bar'
     *
     * _.startCase('__foo_bar__');
     * // => 'Foo Bar'
     */
    var startCase = createCompounder(function(result, word, index) {
      return result + (index ? ' ' : '') + (word.charAt(0).toUpperCase() + word.slice(1));
    });

    /**
     * Checks if `string` starts with the given target string.
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to search.
     * @param {string} [target] The string to search for.
     * @param {number} [position=0] The position to search from.
     * @returns {boolean} Returns `true` if `string` starts with `target`, else `false`.
     * @example
     *
     * _.startsWith('abc', 'a');
     * // => true
     *
     * _.startsWith('abc', 'b');
     * // => false
     *
     * _.startsWith('abc', 'b', 1);
     * // => true
     */
    function startsWith(string, target, position) {
      string = baseToString(string);
      position = position == null
        ? 0
        : nativeMin(position < 0 ? 0 : (+position || 0), string.length);

      return string.lastIndexOf(target, position) == position;
    }

    /**
     * Creates a compiled template function that can interpolate data properties
     * in "interpolate" delimiters, HTML-escape interpolated data properties in
     * "escape" delimiters, and execute JavaScript in "evaluate" delimiters. Data
     * properties may be accessed as free variables in the template. If a setting
     * object is provided it takes precedence over `_.templateSettings` values.
     *
     * **Note:** In the development build `_.template` utilizes
     * [sourceURLs](http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/#toc-sourceurl)
     * for easier debugging.
     *
     * For more information on precompiling templates see
     * [lodash's custom builds documentation](https://lodash.com/custom-builds).
     *
     * For more information on Chrome extension sandboxes see
     * [Chrome's extensions documentation](https://developer.chrome.com/extensions/sandboxingEval).
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The template string.
     * @param {Object} [options] The options object.
     * @param {RegExp} [options.escape] The HTML "escape" delimiter.
     * @param {RegExp} [options.evaluate] The "evaluate" delimiter.
     * @param {Object} [options.imports] An object to import into the template as free variables.
     * @param {RegExp} [options.interpolate] The "interpolate" delimiter.
     * @param {string} [options.sourceURL] The sourceURL of the template's compiled source.
     * @param {string} [options.variable] The data object variable name.
     * @param- {Object} [otherOptions] Enables the legacy `options` param signature.
     * @returns {Function} Returns the compiled template function.
     * @example
     *
     * // using the "interpolate" delimiter to create a compiled template
     * var compiled = _.template('hello <%= user %>!');
     * compiled({ 'user': 'fred' });
     * // => 'hello fred!'
     *
     * // using the HTML "escape" delimiter to escape data property values
     * var compiled = _.template('<b><%- value %></b>');
     * compiled({ 'value': '<script>' });
     * // => '<b>&lt;script&gt;</b>'
     *
     * // using the "evaluate" delimiter to execute JavaScript and generate HTML
     * var compiled = _.template('<% _.forEach(users, function(user) { %><li><%- user %></li><% }); %>');
     * compiled({ 'users': ['fred', 'barney'] });
     * // => '<li>fred</li><li>barney</li>'
     *
     * // using the internal `print` function in "evaluate" delimiters
     * var compiled = _.template('<% print("hello " + user); %>!');
     * compiled({ 'user': 'barney' });
     * // => 'hello barney!'
     *
     * // using the ES delimiter as an alternative to the default "interpolate" delimiter
     * var compiled = _.template('hello ${ user }!');
     * compiled({ 'user': 'pebbles' });
     * // => 'hello pebbles!'
     *
     * // using custom template delimiters
     * _.templateSettings.interpolate = /{{([\s\S]+?)}}/g;
     * var compiled = _.template('hello {{ user }}!');
     * compiled({ 'user': 'mustache' });
     * // => 'hello mustache!'
     *
     * // using backslashes to treat delimiters as plain text
     * var compiled = _.template('<%= "\\<%- value %\\>" %>');
     * compiled({ 'value': 'ignored' });
     * // => '<%- value %>'
     *
     * // using the `imports` option to import `jQuery` as `jq`
     * var text = '<% jq.each(users, function(user) { %><li><%- user %></li><% }); %>';
     * var compiled = _.template(text, { 'imports': { 'jq': jQuery } });
     * compiled({ 'users': ['fred', 'barney'] });
     * // => '<li>fred</li><li>barney</li>'
     *
     * // using the `sourceURL` option to specify a custom sourceURL for the template
     * var compiled = _.template('hello <%= user %>!', { 'sourceURL': '/basic/greeting.jst' });
     * compiled(data);
     * // => find the source of "greeting.jst" under the Sources tab or Resources panel of the web inspector
     *
     * // using the `variable` option to ensure a with-statement isn't used in the compiled template
     * var compiled = _.template('hi <%= data.user %>!', { 'variable': 'data' });
     * compiled.source;
     * // => function(data) {
     * //   var __t, __p = '';
     * //   __p += 'hi ' + ((__t = ( data.user )) == null ? '' : __t) + '!';
     * //   return __p;
     * // }
     *
     * // using the `source` property to inline compiled templates for meaningful
     * // line numbers in error messages and a stack trace
     * fs.writeFileSync(path.join(cwd, 'jst.js'), '\
     *   var JST = {\
     *     "main": ' + _.template(mainText).source + '\
     *   };\
     * ');
     */
    function template(string, options, otherOptions) {
      // Based on John Resig's `tmpl` implementation (http://ejohn.org/blog/javascript-micro-templating/)
      // and Laura Doktorova's doT.js (https://github.com/olado/doT).
      var settings = lodash.templateSettings;

      if (otherOptions && isIterateeCall(string, options, otherOptions)) {
        options = otherOptions = undefined;
      }
      string = baseToString(string);
      options = assignWith(baseAssign({}, otherOptions || options), settings, assignOwnDefaults);

      var imports = assignWith(baseAssign({}, options.imports), settings.imports, assignOwnDefaults),
          importsKeys = keys(imports),
          importsValues = baseValues(imports, importsKeys);

      var isEscaping,
          isEvaluating,
          index = 0,
          interpolate = options.interpolate || reNoMatch,
          source = "__p += '";

      // Compile the regexp to match each delimiter.
      var reDelimiters = RegExp(
        (options.escape || reNoMatch).source + '|' +
        interpolate.source + '|' +
        (interpolate === reInterpolate ? reEsTemplate : reNoMatch).source + '|' +
        (options.evaluate || reNoMatch).source + '|$'
      , 'g');

      // Use a sourceURL for easier debugging.
      var sourceURL = '//# sourceURL=' +
        ('sourceURL' in options
          ? options.sourceURL
          : ('lodash.templateSources[' + (++templateCounter) + ']')
        ) + '\n';

      string.replace(reDelimiters, function(match, escapeValue, interpolateValue, esTemplateValue, evaluateValue, offset) {
        interpolateValue || (interpolateValue = esTemplateValue);

        // Escape characters that can't be included in string literals.
        source += string.slice(index, offset).replace(reUnescapedString, escapeStringChar);

        // Replace delimiters with snippets.
        if (escapeValue) {
          isEscaping = true;
          source += "' +\n__e(" + escapeValue + ") +\n'";
        }
        if (evaluateValue) {
          isEvaluating = true;
          source += "';\n" + evaluateValue + ";\n__p += '";
        }
        if (interpolateValue) {
          source += "' +\n((__t = (" + interpolateValue + ")) == null ? '' : __t) +\n'";
        }
        index = offset + match.length;

        // The JS engine embedded in Adobe products requires returning the `match`
        // string in order to produce the correct `offset` value.
        return match;
      });

      source += "';\n";

      // If `variable` is not specified wrap a with-statement around the generated
      // code to add the data object to the top of the scope chain.
      var variable = options.variable;
      if (!variable) {
        source = 'with (obj) {\n' + source + '\n}\n';
      }
      // Cleanup code by stripping empty strings.
      source = (isEvaluating ? source.replace(reEmptyStringLeading, '') : source)
        .replace(reEmptyStringMiddle, '$1')
        .replace(reEmptyStringTrailing, '$1;');

      // Frame code as the function body.
      source = 'function(' + (variable || 'obj') + ') {\n' +
        (variable
          ? ''
          : 'obj || (obj = {});\n'
        ) +
        "var __t, __p = ''" +
        (isEscaping
           ? ', __e = _.escape'
           : ''
        ) +
        (isEvaluating
          ? ', __j = Array.prototype.join;\n' +
            "function print() { __p += __j.call(arguments, '') }\n"
          : ';\n'
        ) +
        source +
        'return __p\n}';

      var result = attempt(function() {
        return Function(importsKeys, sourceURL + 'return ' + source).apply(undefined, importsValues);
      });

      // Provide the compiled function's source by its `toString` method or
      // the `source` property as a convenience for inlining compiled templates.
      result.source = source;
      if (isError(result)) {
        throw result;
      }
      return result;
    }

    /**
     * Removes leading and trailing whitespace or specified characters from `string`.
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to trim.
     * @param {string} [chars=whitespace] The characters to trim.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {string} Returns the trimmed string.
     * @example
     *
     * _.trim('  abc  ');
     * // => 'abc'
     *
     * _.trim('-_-abc-_-', '_-');
     * // => 'abc'
     *
     * _.map(['  foo  ', '  bar  '], _.trim);
     * // => ['foo', 'bar']
     */
    function trim(string, chars, guard) {
      var value = string;
      string = baseToString(string);
      if (!string) {
        return string;
      }
      if (guard ? isIterateeCall(value, chars, guard) : chars == null) {
        return string.slice(trimmedLeftIndex(string), trimmedRightIndex(string) + 1);
      }
      chars = (chars + '');
      return string.slice(charsLeftIndex(string, chars), charsRightIndex(string, chars) + 1);
    }

    /**
     * Removes leading whitespace or specified characters from `string`.
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to trim.
     * @param {string} [chars=whitespace] The characters to trim.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {string} Returns the trimmed string.
     * @example
     *
     * _.trimLeft('  abc  ');
     * // => 'abc  '
     *
     * _.trimLeft('-_-abc-_-', '_-');
     * // => 'abc-_-'
     */
    function trimLeft(string, chars, guard) {
      var value = string;
      string = baseToString(string);
      if (!string) {
        return string;
      }
      if (guard ? isIterateeCall(value, chars, guard) : chars == null) {
        return string.slice(trimmedLeftIndex(string));
      }
      return string.slice(charsLeftIndex(string, (chars + '')));
    }

    /**
     * Removes trailing whitespace or specified characters from `string`.
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to trim.
     * @param {string} [chars=whitespace] The characters to trim.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {string} Returns the trimmed string.
     * @example
     *
     * _.trimRight('  abc  ');
     * // => '  abc'
     *
     * _.trimRight('-_-abc-_-', '_-');
     * // => '-_-abc'
     */
    function trimRight(string, chars, guard) {
      var value = string;
      string = baseToString(string);
      if (!string) {
        return string;
      }
      if (guard ? isIterateeCall(value, chars, guard) : chars == null) {
        return string.slice(0, trimmedRightIndex(string) + 1);
      }
      return string.slice(0, charsRightIndex(string, (chars + '')) + 1);
    }

    /**
     * Truncates `string` if it's longer than the given maximum string length.
     * The last characters of the truncated string are replaced with the omission
     * string which defaults to "...".
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to truncate.
     * @param {Object|number} [options] The options object or maximum string length.
     * @param {number} [options.length=30] The maximum string length.
     * @param {string} [options.omission='...'] The string to indicate text is omitted.
     * @param {RegExp|string} [options.separator] The separator pattern to truncate to.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {string} Returns the truncated string.
     * @example
     *
     * _.trunc('hi-diddly-ho there, neighborino');
     * // => 'hi-diddly-ho there, neighbo...'
     *
     * _.trunc('hi-diddly-ho there, neighborino', 24);
     * // => 'hi-diddly-ho there, n...'
     *
     * _.trunc('hi-diddly-ho there, neighborino', {
     *   'length': 24,
     *   'separator': ' '
     * });
     * // => 'hi-diddly-ho there,...'
     *
     * _.trunc('hi-diddly-ho there, neighborino', {
     *   'length': 24,
     *   'separator': /,? +/
     * });
     * // => 'hi-diddly-ho there...'
     *
     * _.trunc('hi-diddly-ho there, neighborino', {
     *   'omission': ' [...]'
     * });
     * // => 'hi-diddly-ho there, neig [...]'
     */
    function trunc(string, options, guard) {
      if (guard && isIterateeCall(string, options, guard)) {
        options = undefined;
      }
      var length = DEFAULT_TRUNC_LENGTH,
          omission = DEFAULT_TRUNC_OMISSION;

      if (options != null) {
        if (isObject(options)) {
          var separator = 'separator' in options ? options.separator : separator;
          length = 'length' in options ? (+options.length || 0) : length;
          omission = 'omission' in options ? baseToString(options.omission) : omission;
        } else {
          length = +options || 0;
        }
      }
      string = baseToString(string);
      if (length >= string.length) {
        return string;
      }
      var end = length - omission.length;
      if (end < 1) {
        return omission;
      }
      var result = string.slice(0, end);
      if (separator == null) {
        return result + omission;
      }
      if (isRegExp(separator)) {
        if (string.slice(end).search(separator)) {
          var match,
              newEnd,
              substring = string.slice(0, end);

          if (!separator.global) {
            separator = RegExp(separator.source, (reFlags.exec(separator) || '') + 'g');
          }
          separator.lastIndex = 0;
          while ((match = separator.exec(substring))) {
            newEnd = match.index;
          }
          result = result.slice(0, newEnd == null ? end : newEnd);
        }
      } else if (string.indexOf(separator, end) != end) {
        var index = result.lastIndexOf(separator);
        if (index > -1) {
          result = result.slice(0, index);
        }
      }
      return result + omission;
    }

    /**
     * The inverse of `_.escape`; this method converts the HTML entities
     * `&amp;`, `&lt;`, `&gt;`, `&quot;`, `&#39;`, and `&#96;` in `string` to their
     * corresponding characters.
     *
     * **Note:** No other HTML entities are unescaped. To unescape additional HTML
     * entities use a third-party library like [_he_](https://mths.be/he).
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to unescape.
     * @returns {string} Returns the unescaped string.
     * @example
     *
     * _.unescape('fred, barney, &amp; pebbles');
     * // => 'fred, barney, & pebbles'
     */
    function unescape(string) {
      string = baseToString(string);
      return (string && reHasEscapedHtml.test(string))
        ? string.replace(reEscapedHtml, unescapeHtmlChar)
        : string;
    }

    /**
     * Splits `string` into an array of its words.
     *
     * @static
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to inspect.
     * @param {RegExp|string} [pattern] The pattern to match words.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {Array} Returns the words of `string`.
     * @example
     *
     * _.words('fred, barney, & pebbles');
     * // => ['fred', 'barney', 'pebbles']
     *
     * _.words('fred, barney, & pebbles', /[^, ]+/g);
     * // => ['fred', 'barney', '&', 'pebbles']
     */
    function words(string, pattern, guard) {
      if (guard && isIterateeCall(string, pattern, guard)) {
        pattern = undefined;
      }
      string = baseToString(string);
      return string.match(pattern || reWords) || [];
    }

    /*------------------------------------------------------------------------*/

    /**
     * Attempts to invoke `func`, returning either the result or the caught error
     * object. Any additional arguments are provided to `func` when it is invoked.
     *
     * @static
     * @memberOf _
     * @category Utility
     * @param {Function} func The function to attempt.
     * @returns {*} Returns the `func` result or error object.
     * @example
     *
     * // avoid throwing errors for invalid selectors
     * var elements = _.attempt(function(selector) {
     *   return document.querySelectorAll(selector);
     * }, '>_>');
     *
     * if (_.isError(elements)) {
     *   elements = [];
     * }
     */
    var attempt = restParam(function(func, args) {
      try {
        return func.apply(undefined, args);
      } catch(e) {
        return isError(e) ? e : new Error(e);
      }
    });

    /**
     * Creates a function that invokes `func` with the `this` binding of `thisArg`
     * and arguments of the created function. If `func` is a property name the
     * created callback returns the property value for a given element. If `func`
     * is an object the created callback returns `true` for elements that contain
     * the equivalent object properties, otherwise it returns `false`.
     *
     * @static
     * @memberOf _
     * @alias iteratee
     * @category Utility
     * @param {*} [func=_.identity] The value to convert to a callback.
     * @param {*} [thisArg] The `this` binding of `func`.
     * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
     * @returns {Function} Returns the callback.
     * @example
     *
     * var users = [
     *   { 'user': 'barney', 'age': 36 },
     *   { 'user': 'fred',   'age': 40 }
     * ];
     *
     * // wrap to create custom callback shorthands
     * _.callback = _.wrap(_.callback, function(callback, func, thisArg) {
     *   var match = /^(.+?)__([gl]t)(.+)$/.exec(func);
     *   if (!match) {
     *     return callback(func, thisArg);
     *   }
     *   return function(object) {
     *     return match[2] == 'gt'
     *       ? object[match[1]] > match[3]
     *       : object[match[1]] < match[3];
     *   };
     * });
     *
     * _.filter(users, 'age__gt36');
     * // => [{ 'user': 'fred', 'age': 40 }]
     */
    function callback(func, thisArg, guard) {
      if (guard && isIterateeCall(func, thisArg, guard)) {
        thisArg = undefined;
      }
      return isObjectLike(func)
        ? matches(func)
        : baseCallback(func, thisArg);
    }

    /**
     * Creates a function that returns `value`.
     *
     * @static
     * @memberOf _
     * @category Utility
     * @param {*} value The value to return from the new function.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var object = { 'user': 'fred' };
     * var getter = _.constant(object);
     *
     * getter() === object;
     * // => true
     */
    function constant(value) {
      return function() {
        return value;
      };
    }

    /**
     * This method returns the first argument provided to it.
     *
     * @static
     * @memberOf _
     * @category Utility
     * @param {*} value Any value.
     * @returns {*} Returns `value`.
     * @example
     *
     * var object = { 'user': 'fred' };
     *
     * _.identity(object) === object;
     * // => true
     */
    function identity(value) {
      return value;
    }

    /**
     * Creates a function that performs a deep comparison between a given object
     * and `source`, returning `true` if the given object has equivalent property
     * values, else `false`.
     *
     * **Note:** This method supports comparing arrays, booleans, `Date` objects,
     * numbers, `Object` objects, regexes, and strings. Objects are compared by
     * their own, not inherited, enumerable properties. For comparing a single
     * own or inherited property value see `_.matchesProperty`.
     *
     * @static
     * @memberOf _
     * @category Utility
     * @param {Object} source The object of property values to match.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var users = [
     *   { 'user': 'barney', 'age': 36, 'active': true },
     *   { 'user': 'fred',   'age': 40, 'active': false }
     * ];
     *
     * _.filter(users, _.matches({ 'age': 40, 'active': false }));
     * // => [{ 'user': 'fred', 'age': 40, 'active': false }]
     */
    function matches(source) {
      return baseMatches(baseClone(source, true));
    }

    /**
     * Creates a function that compares the property value of `path` on a given
     * object to `value`.
     *
     * **Note:** This method supports comparing arrays, booleans, `Date` objects,
     * numbers, `Object` objects, regexes, and strings. Objects are compared by
     * their own, not inherited, enumerable properties.
     *
     * @static
     * @memberOf _
     * @category Utility
     * @param {Array|string} path The path of the property to get.
     * @param {*} srcValue The value to match.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var users = [
     *   { 'user': 'barney' },
     *   { 'user': 'fred' }
     * ];
     *
     * _.find(users, _.matchesProperty('user', 'fred'));
     * // => { 'user': 'fred' }
     */
    function matchesProperty(path, srcValue) {
      return baseMatchesProperty(path, baseClone(srcValue, true));
    }

    /**
     * Creates a function that invokes the method at `path` on a given object.
     * Any additional arguments are provided to the invoked method.
     *
     * @static
     * @memberOf _
     * @category Utility
     * @param {Array|string} path The path of the method to invoke.
     * @param {...*} [args] The arguments to invoke the method with.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var objects = [
     *   { 'a': { 'b': { 'c': _.constant(2) } } },
     *   { 'a': { 'b': { 'c': _.constant(1) } } }
     * ];
     *
     * _.map(objects, _.method('a.b.c'));
     * // => [2, 1]
     *
     * _.invoke(_.sortBy(objects, _.method(['a', 'b', 'c'])), 'a.b.c');
     * // => [1, 2]
     */
    var method = restParam(function(path, args) {
      return function(object) {
        return invokePath(object, path, args);
      };
    });

    /**
     * The opposite of `_.method`; this method creates a function that invokes
     * the method at a given path on `object`. Any additional arguments are
     * provided to the invoked method.
     *
     * @static
     * @memberOf _
     * @category Utility
     * @param {Object} object The object to query.
     * @param {...*} [args] The arguments to invoke the method with.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var array = _.times(3, _.constant),
     *     object = { 'a': array, 'b': array, 'c': array };
     *
     * _.map(['a[2]', 'c[0]'], _.methodOf(object));
     * // => [2, 0]
     *
     * _.map([['a', '2'], ['c', '0']], _.methodOf(object));
     * // => [2, 0]
     */
    var methodOf = restParam(function(object, args) {
      return function(path) {
        return invokePath(object, path, args);
      };
    });

    /**
     * Adds all own enumerable function properties of a source object to the
     * destination object. If `object` is a function then methods are added to
     * its prototype as well.
     *
     * **Note:** Use `_.runInContext` to create a pristine `lodash` function to
     * avoid conflicts caused by modifying the original.
     *
     * @static
     * @memberOf _
     * @category Utility
     * @param {Function|Object} [object=lodash] The destination object.
     * @param {Object} source The object of functions to add.
     * @param {Object} [options] The options object.
     * @param {boolean} [options.chain=true] Specify whether the functions added
     *  are chainable.
     * @returns {Function|Object} Returns `object`.
     * @example
     *
     * function vowels(string) {
     *   return _.filter(string, function(v) {
     *     return /[aeiou]/i.test(v);
     *   });
     * }
     *
     * _.mixin({ 'vowels': vowels });
     * _.vowels('fred');
     * // => ['e']
     *
     * _('fred').vowels().value();
     * // => ['e']
     *
     * _.mixin({ 'vowels': vowels }, { 'chain': false });
     * _('fred').vowels();
     * // => ['e']
     */
    function mixin(object, source, options) {
      if (options == null) {
        var isObj = isObject(source),
            props = isObj ? keys(source) : undefined,
            methodNames = (props && props.length) ? baseFunctions(source, props) : undefined;

        if (!(methodNames ? methodNames.length : isObj)) {
          methodNames = false;
          options = source;
          source = object;
          object = this;
        }
      }
      if (!methodNames) {
        methodNames = baseFunctions(source, keys(source));
      }
      var chain = true,
          index = -1,
          isFunc = isFunction(object),
          length = methodNames.length;

      if (options === false) {
        chain = false;
      } else if (isObject(options) && 'chain' in options) {
        chain = options.chain;
      }
      while (++index < length) {
        var methodName = methodNames[index],
            func = source[methodName];

        object[methodName] = func;
        if (isFunc) {
          object.prototype[methodName] = (function(func) {
            return function() {
              var chainAll = this.__chain__;
              if (chain || chainAll) {
                var result = object(this.__wrapped__),
                    actions = result.__actions__ = arrayCopy(this.__actions__);

                actions.push({ 'func': func, 'args': arguments, 'thisArg': object });
                result.__chain__ = chainAll;
                return result;
              }
              return func.apply(object, arrayPush([this.value()], arguments));
            };
          }(func));
        }
      }
      return object;
    }

    /**
     * Reverts the `_` variable to its previous value and returns a reference to
     * the `lodash` function.
     *
     * @static
     * @memberOf _
     * @category Utility
     * @returns {Function} Returns the `lodash` function.
     * @example
     *
     * var lodash = _.noConflict();
     */
    function noConflict() {
      root._ = oldDash;
      return this;
    }

    /**
     * A no-operation function that returns `undefined` regardless of the
     * arguments it receives.
     *
     * @static
     * @memberOf _
     * @category Utility
     * @example
     *
     * var object = { 'user': 'fred' };
     *
     * _.noop(object) === undefined;
     * // => true
     */
    function noop() {
      // No operation performed.
    }

    /**
     * Creates a function that returns the property value at `path` on a
     * given object.
     *
     * @static
     * @memberOf _
     * @category Utility
     * @param {Array|string} path The path of the property to get.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var objects = [
     *   { 'a': { 'b': { 'c': 2 } } },
     *   { 'a': { 'b': { 'c': 1 } } }
     * ];
     *
     * _.map(objects, _.property('a.b.c'));
     * // => [2, 1]
     *
     * _.pluck(_.sortBy(objects, _.property(['a', 'b', 'c'])), 'a.b.c');
     * // => [1, 2]
     */
    function property(path) {
      return isKey(path) ? baseProperty(path) : basePropertyDeep(path);
    }

    /**
     * The opposite of `_.property`; this method creates a function that returns
     * the property value at a given path on `object`.
     *
     * @static
     * @memberOf _
     * @category Utility
     * @param {Object} object The object to query.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var array = [0, 1, 2],
     *     object = { 'a': array, 'b': array, 'c': array };
     *
     * _.map(['a[2]', 'c[0]'], _.propertyOf(object));
     * // => [2, 0]
     *
     * _.map([['a', '2'], ['c', '0']], _.propertyOf(object));
     * // => [2, 0]
     */
    function propertyOf(object) {
      return function(path) {
        return baseGet(object, toPath(path), path + '');
      };
    }

    /**
     * Creates an array of numbers (positive and/or negative) progressing from
     * `start` up to, but not including, `end`. If `end` is not specified it is
     * set to `start` with `start` then set to `0`. If `end` is less than `start`
     * a zero-length range is created unless a negative `step` is specified.
     *
     * @static
     * @memberOf _
     * @category Utility
     * @param {number} [start=0] The start of the range.
     * @param {number} end The end of the range.
     * @param {number} [step=1] The value to increment or decrement by.
     * @returns {Array} Returns the new array of numbers.
     * @example
     *
     * _.range(4);
     * // => [0, 1, 2, 3]
     *
     * _.range(1, 5);
     * // => [1, 2, 3, 4]
     *
     * _.range(0, 20, 5);
     * // => [0, 5, 10, 15]
     *
     * _.range(0, -4, -1);
     * // => [0, -1, -2, -3]
     *
     * _.range(1, 4, 0);
     * // => [1, 1, 1]
     *
     * _.range(0);
     * // => []
     */
    function range(start, end, step) {
      if (step && isIterateeCall(start, end, step)) {
        end = step = undefined;
      }
      start = +start || 0;
      step = step == null ? 1 : (+step || 0);

      if (end == null) {
        end = start;
        start = 0;
      } else {
        end = +end || 0;
      }
      // Use `Array(length)` so engines like Chakra and V8 avoid slower modes.
      // See https://youtu.be/XAqIpGU8ZZk#t=17m25s for more details.
      var index = -1,
          length = nativeMax(nativeCeil((end - start) / (step || 1)), 0),
          result = Array(length);

      while (++index < length) {
        result[index] = start;
        start += step;
      }
      return result;
    }

    /**
     * Invokes the iteratee function `n` times, returning an array of the results
     * of each invocation. The `iteratee` is bound to `thisArg` and invoked with
     * one argument; (index).
     *
     * @static
     * @memberOf _
     * @category Utility
     * @param {number} n The number of times to invoke `iteratee`.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {Array} Returns the array of results.
     * @example
     *
     * var diceRolls = _.times(3, _.partial(_.random, 1, 6, false));
     * // => [3, 6, 4]
     *
     * _.times(3, function(n) {
     *   mage.castSpell(n);
     * });
     * // => invokes `mage.castSpell(n)` three times with `n` of `0`, `1`, and `2`
     *
     * _.times(3, function(n) {
     *   this.cast(n);
     * }, mage);
     * // => also invokes `mage.castSpell(n)` three times
     */
    function times(n, iteratee, thisArg) {
      n = nativeFloor(n);

      // Exit early to avoid a JSC JIT bug in Safari 8
      // where `Array(0)` is treated as `Array(1)`.
      if (n < 1 || !nativeIsFinite(n)) {
        return [];
      }
      var index = -1,
          result = Array(nativeMin(n, MAX_ARRAY_LENGTH));

      iteratee = bindCallback(iteratee, thisArg, 1);
      while (++index < n) {
        if (index < MAX_ARRAY_LENGTH) {
          result[index] = iteratee(index);
        } else {
          iteratee(index);
        }
      }
      return result;
    }

    /**
     * Generates a unique ID. If `prefix` is provided the ID is appended to it.
     *
     * @static
     * @memberOf _
     * @category Utility
     * @param {string} [prefix] The value to prefix the ID with.
     * @returns {string} Returns the unique ID.
     * @example
     *
     * _.uniqueId('contact_');
     * // => 'contact_104'
     *
     * _.uniqueId();
     * // => '105'
     */
    function uniqueId(prefix) {
      var id = ++idCounter;
      return baseToString(prefix) + id;
    }

    /*------------------------------------------------------------------------*/

    /**
     * Adds two numbers.
     *
     * @static
     * @memberOf _
     * @category Math
     * @param {number} augend The first number to add.
     * @param {number} addend The second number to add.
     * @returns {number} Returns the sum.
     * @example
     *
     * _.add(6, 4);
     * // => 10
     */
    function add(augend, addend) {
      return (+augend || 0) + (+addend || 0);
    }

    /**
     * Calculates `n` rounded up to `precision`.
     *
     * @static
     * @memberOf _
     * @category Math
     * @param {number} n The number to round up.
     * @param {number} [precision=0] The precision to round up to.
     * @returns {number} Returns the rounded up number.
     * @example
     *
     * _.ceil(4.006);
     * // => 5
     *
     * _.ceil(6.004, 2);
     * // => 6.01
     *
     * _.ceil(6040, -2);
     * // => 6100
     */
    var ceil = createRound('ceil');

    /**
     * Calculates `n` rounded down to `precision`.
     *
     * @static
     * @memberOf _
     * @category Math
     * @param {number} n The number to round down.
     * @param {number} [precision=0] The precision to round down to.
     * @returns {number} Returns the rounded down number.
     * @example
     *
     * _.floor(4.006);
     * // => 4
     *
     * _.floor(0.046, 2);
     * // => 0.04
     *
     * _.floor(4060, -2);
     * // => 4000
     */
    var floor = createRound('floor');

    /**
     * Gets the maximum value of `collection`. If `collection` is empty or falsey
     * `-Infinity` is returned. If an iteratee function is provided it is invoked
     * for each value in `collection` to generate the criterion by which the value
     * is ranked. The `iteratee` is bound to `thisArg` and invoked with three
     * arguments: (value, index, collection).
     *
     * If a property name is provided for `iteratee` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `iteratee` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Math
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [iteratee] The function invoked per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {*} Returns the maximum value.
     * @example
     *
     * _.max([4, 2, 8, 6]);
     * // => 8
     *
     * _.max([]);
     * // => -Infinity
     *
     * var users = [
     *   { 'user': 'barney', 'age': 36 },
     *   { 'user': 'fred',   'age': 40 }
     * ];
     *
     * _.max(users, function(chr) {
     *   return chr.age;
     * });
     * // => { 'user': 'fred', 'age': 40 }
     *
     * // using the `_.property` callback shorthand
     * _.max(users, 'age');
     * // => { 'user': 'fred', 'age': 40 }
     */
    var max = createExtremum(gt, NEGATIVE_INFINITY);

    /**
     * Gets the minimum value of `collection`. If `collection` is empty or falsey
     * `Infinity` is returned. If an iteratee function is provided it is invoked
     * for each value in `collection` to generate the criterion by which the value
     * is ranked. The `iteratee` is bound to `thisArg` and invoked with three
     * arguments: (value, index, collection).
     *
     * If a property name is provided for `iteratee` the created `_.property`
     * style callback returns the property value of the given element.
     *
     * If a value is also provided for `thisArg` the created `_.matchesProperty`
     * style callback returns `true` for elements that have a matching property
     * value, else `false`.
     *
     * If an object is provided for `iteratee` the created `_.matches` style
     * callback returns `true` for elements that have the properties of the given
     * object, else `false`.
     *
     * @static
     * @memberOf _
     * @category Math
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [iteratee] The function invoked per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {*} Returns the minimum value.
     * @example
     *
     * _.min([4, 2, 8, 6]);
     * // => 2
     *
     * _.min([]);
     * // => Infinity
     *
     * var users = [
     *   { 'user': 'barney', 'age': 36 },
     *   { 'user': 'fred',   'age': 40 }
     * ];
     *
     * _.min(users, function(chr) {
     *   return chr.age;
     * });
     * // => { 'user': 'barney', 'age': 36 }
     *
     * // using the `_.property` callback shorthand
     * _.min(users, 'age');
     * // => { 'user': 'barney', 'age': 36 }
     */
    var min = createExtremum(lt, POSITIVE_INFINITY);

    /**
     * Calculates `n` rounded to `precision`.
     *
     * @static
     * @memberOf _
     * @category Math
     * @param {number} n The number to round.
     * @param {number} [precision=0] The precision to round to.
     * @returns {number} Returns the rounded number.
     * @example
     *
     * _.round(4.006);
     * // => 4
     *
     * _.round(4.006, 2);
     * // => 4.01
     *
     * _.round(4060, -2);
     * // => 4100
     */
    var round = createRound('round');

    /**
     * Gets the sum of the values in `collection`.
     *
     * @static
     * @memberOf _
     * @category Math
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [iteratee] The function invoked per iteration.
     * @param {*} [thisArg] The `this` binding of `iteratee`.
     * @returns {number} Returns the sum.
     * @example
     *
     * _.sum([4, 6]);
     * // => 10
     *
     * _.sum({ 'a': 4, 'b': 6 });
     * // => 10
     *
     * var objects = [
     *   { 'n': 4 },
     *   { 'n': 6 }
     * ];
     *
     * _.sum(objects, function(object) {
     *   return object.n;
     * });
     * // => 10
     *
     * // using the `_.property` callback shorthand
     * _.sum(objects, 'n');
     * // => 10
     */
    function sum(collection, iteratee, thisArg) {
      if (thisArg && isIterateeCall(collection, iteratee, thisArg)) {
        iteratee = undefined;
      }
      iteratee = getCallback(iteratee, thisArg, 3);
      return iteratee.length == 1
        ? arraySum(isArray(collection) ? collection : toIterable(collection), iteratee)
        : baseSum(collection, iteratee);
    }

    /*------------------------------------------------------------------------*/

    // Ensure wrappers are instances of `baseLodash`.
    lodash.prototype = baseLodash.prototype;

    LodashWrapper.prototype = baseCreate(baseLodash.prototype);
    LodashWrapper.prototype.constructor = LodashWrapper;

    LazyWrapper.prototype = baseCreate(baseLodash.prototype);
    LazyWrapper.prototype.constructor = LazyWrapper;

    // Add functions to the `Map` cache.
    MapCache.prototype['delete'] = mapDelete;
    MapCache.prototype.get = mapGet;
    MapCache.prototype.has = mapHas;
    MapCache.prototype.set = mapSet;

    // Add functions to the `Set` cache.
    SetCache.prototype.push = cachePush;

    // Assign cache to `_.memoize`.
    memoize.Cache = MapCache;

    // Add functions that return wrapped values when chaining.
    lodash.after = after;
    lodash.ary = ary;
    lodash.assign = assign;
    lodash.at = at;
    lodash.before = before;
    lodash.bind = bind;
    lodash.bindAll = bindAll;
    lodash.bindKey = bindKey;
    lodash.callback = callback;
    lodash.chain = chain;
    lodash.chunk = chunk;
    lodash.compact = compact;
    lodash.constant = constant;
    lodash.countBy = countBy;
    lodash.create = create;
    lodash.curry = curry;
    lodash.curryRight = curryRight;
    lodash.debounce = debounce;
    lodash.defaults = defaults;
    lodash.defaultsDeep = defaultsDeep;
    lodash.defer = defer;
    lodash.delay = delay;
    lodash.difference = difference;
    lodash.drop = drop;
    lodash.dropRight = dropRight;
    lodash.dropRightWhile = dropRightWhile;
    lodash.dropWhile = dropWhile;
    lodash.fill = fill;
    lodash.filter = filter;
    lodash.flatten = flatten;
    lodash.flattenDeep = flattenDeep;
    lodash.flow = flow;
    lodash.flowRight = flowRight;
    lodash.forEach = forEach;
    lodash.forEachRight = forEachRight;
    lodash.forIn = forIn;
    lodash.forInRight = forInRight;
    lodash.forOwn = forOwn;
    lodash.forOwnRight = forOwnRight;
    lodash.functions = functions;
    lodash.groupBy = groupBy;
    lodash.indexBy = indexBy;
    lodash.initial = initial;
    lodash.intersection = intersection;
    lodash.invert = invert;
    lodash.invoke = invoke;
    lodash.keys = keys;
    lodash.keysIn = keysIn;
    lodash.map = map;
    lodash.mapKeys = mapKeys;
    lodash.mapValues = mapValues;
    lodash.matches = matches;
    lodash.matchesProperty = matchesProperty;
    lodash.memoize = memoize;
    lodash.merge = merge;
    lodash.method = method;
    lodash.methodOf = methodOf;
    lodash.mixin = mixin;
    lodash.modArgs = modArgs;
    lodash.negate = negate;
    lodash.omit = omit;
    lodash.once = once;
    lodash.pairs = pairs;
    lodash.partial = partial;
    lodash.partialRight = partialRight;
    lodash.partition = partition;
    lodash.pick = pick;
    lodash.pluck = pluck;
    lodash.property = property;
    lodash.propertyOf = propertyOf;
    lodash.pull = pull;
    lodash.pullAt = pullAt;
    lodash.range = range;
    lodash.rearg = rearg;
    lodash.reject = reject;
    lodash.remove = remove;
    lodash.rest = rest;
    lodash.restParam = restParam;
    lodash.set = set;
    lodash.shuffle = shuffle;
    lodash.slice = slice;
    lodash.sortBy = sortBy;
    lodash.sortByAll = sortByAll;
    lodash.sortByOrder = sortByOrder;
    lodash.spread = spread;
    lodash.take = take;
    lodash.takeRight = takeRight;
    lodash.takeRightWhile = takeRightWhile;
    lodash.takeWhile = takeWhile;
    lodash.tap = tap;
    lodash.throttle = throttle;
    lodash.thru = thru;
    lodash.times = times;
    lodash.toArray = toArray;
    lodash.toPlainObject = toPlainObject;
    lodash.transform = transform;
    lodash.union = union;
    lodash.uniq = uniq;
    lodash.unzip = unzip;
    lodash.unzipWith = unzipWith;
    lodash.values = values;
    lodash.valuesIn = valuesIn;
    lodash.where = where;
    lodash.without = without;
    lodash.wrap = wrap;
    lodash.xor = xor;
    lodash.zip = zip;
    lodash.zipObject = zipObject;
    lodash.zipWith = zipWith;

    // Add aliases.
    lodash.backflow = flowRight;
    lodash.collect = map;
    lodash.compose = flowRight;
    lodash.each = forEach;
    lodash.eachRight = forEachRight;
    lodash.extend = assign;
    lodash.iteratee = callback;
    lodash.methods = functions;
    lodash.object = zipObject;
    lodash.select = filter;
    lodash.tail = rest;
    lodash.unique = uniq;

    // Add functions to `lodash.prototype`.
    mixin(lodash, lodash);

    /*------------------------------------------------------------------------*/

    // Add functions that return unwrapped values when chaining.
    lodash.add = add;
    lodash.attempt = attempt;
    lodash.camelCase = camelCase;
    lodash.capitalize = capitalize;
    lodash.ceil = ceil;
    lodash.clone = clone;
    lodash.cloneDeep = cloneDeep;
    lodash.deburr = deburr;
    lodash.endsWith = endsWith;
    lodash.escape = escape;
    lodash.escapeRegExp = escapeRegExp;
    lodash.every = every;
    lodash.find = find;
    lodash.findIndex = findIndex;
    lodash.findKey = findKey;
    lodash.findLast = findLast;
    lodash.findLastIndex = findLastIndex;
    lodash.findLastKey = findLastKey;
    lodash.findWhere = findWhere;
    lodash.first = first;
    lodash.floor = floor;
    lodash.get = get;
    lodash.gt = gt;
    lodash.gte = gte;
    lodash.has = has;
    lodash.identity = identity;
    lodash.includes = includes;
    lodash.indexOf = indexOf;
    lodash.inRange = inRange;
    lodash.isArguments = isArguments;
    lodash.isArray = isArray;
    lodash.isBoolean = isBoolean;
    lodash.isDate = isDate;
    lodash.isElement = isElement;
    lodash.isEmpty = isEmpty;
    lodash.isEqual = isEqual;
    lodash.isError = isError;
    lodash.isFinite = isFinite;
    lodash.isFunction = isFunction;
    lodash.isMatch = isMatch;
    lodash.isNaN = isNaN;
    lodash.isNative = isNative;
    lodash.isNull = isNull;
    lodash.isNumber = isNumber;
    lodash.isObject = isObject;
    lodash.isPlainObject = isPlainObject;
    lodash.isRegExp = isRegExp;
    lodash.isString = isString;
    lodash.isTypedArray = isTypedArray;
    lodash.isUndefined = isUndefined;
    lodash.kebabCase = kebabCase;
    lodash.last = last;
    lodash.lastIndexOf = lastIndexOf;
    lodash.lt = lt;
    lodash.lte = lte;
    lodash.max = max;
    lodash.min = min;
    lodash.noConflict = noConflict;
    lodash.noop = noop;
    lodash.now = now;
    lodash.pad = pad;
    lodash.padLeft = padLeft;
    lodash.padRight = padRight;
    lodash.parseInt = parseInt;
    lodash.random = random;
    lodash.reduce = reduce;
    lodash.reduceRight = reduceRight;
    lodash.repeat = repeat;
    lodash.result = result;
    lodash.round = round;
    lodash.runInContext = runInContext;
    lodash.size = size;
    lodash.snakeCase = snakeCase;
    lodash.some = some;
    lodash.sortedIndex = sortedIndex;
    lodash.sortedLastIndex = sortedLastIndex;
    lodash.startCase = startCase;
    lodash.startsWith = startsWith;
    lodash.sum = sum;
    lodash.template = template;
    lodash.trim = trim;
    lodash.trimLeft = trimLeft;
    lodash.trimRight = trimRight;
    lodash.trunc = trunc;
    lodash.unescape = unescape;
    lodash.uniqueId = uniqueId;
    lodash.words = words;

    // Add aliases.
    lodash.all = every;
    lodash.any = some;
    lodash.contains = includes;
    lodash.eq = isEqual;
    lodash.detect = find;
    lodash.foldl = reduce;
    lodash.foldr = reduceRight;
    lodash.head = first;
    lodash.include = includes;
    lodash.inject = reduce;

    mixin(lodash, (function() {
      var source = {};
      baseForOwn(lodash, function(func, methodName) {
        if (!lodash.prototype[methodName]) {
          source[methodName] = func;
        }
      });
      return source;
    }()), false);

    /*------------------------------------------------------------------------*/

    // Add functions capable of returning wrapped and unwrapped values when chaining.
    lodash.sample = sample;

    lodash.prototype.sample = function(n) {
      if (!this.__chain__ && n == null) {
        return sample(this.value());
      }
      return this.thru(function(value) {
        return sample(value, n);
      });
    };

    /*------------------------------------------------------------------------*/

    /**
     * The semantic version number.
     *
     * @static
     * @memberOf _
     * @type string
     */
    lodash.VERSION = VERSION;

    // Assign default placeholders.
    arrayEach(['bind', 'bindKey', 'curry', 'curryRight', 'partial', 'partialRight'], function(methodName) {
      lodash[methodName].placeholder = lodash;
    });

    // Add `LazyWrapper` methods for `_.drop` and `_.take` variants.
    arrayEach(['drop', 'take'], function(methodName, index) {
      LazyWrapper.prototype[methodName] = function(n) {
        var filtered = this.__filtered__;
        if (filtered && !index) {
          return new LazyWrapper(this);
        }
        n = n == null ? 1 : nativeMax(nativeFloor(n) || 0, 0);

        var result = this.clone();
        if (filtered) {
          result.__takeCount__ = nativeMin(result.__takeCount__, n);
        } else {
          result.__views__.push({ 'size': n, 'type': methodName + (result.__dir__ < 0 ? 'Right' : '') });
        }
        return result;
      };

      LazyWrapper.prototype[methodName + 'Right'] = function(n) {
        return this.reverse()[methodName](n).reverse();
      };
    });

    // Add `LazyWrapper` methods that accept an `iteratee` value.
    arrayEach(['filter', 'map', 'takeWhile'], function(methodName, index) {
      var type = index + 1,
          isFilter = type != LAZY_MAP_FLAG;

      LazyWrapper.prototype[methodName] = function(iteratee, thisArg) {
        var result = this.clone();
        result.__iteratees__.push({ 'iteratee': getCallback(iteratee, thisArg, 1), 'type': type });
        result.__filtered__ = result.__filtered__ || isFilter;
        return result;
      };
    });

    // Add `LazyWrapper` methods for `_.first` and `_.last`.
    arrayEach(['first', 'last'], function(methodName, index) {
      var takeName = 'take' + (index ? 'Right' : '');

      LazyWrapper.prototype[methodName] = function() {
        return this[takeName](1).value()[0];
      };
    });

    // Add `LazyWrapper` methods for `_.initial` and `_.rest`.
    arrayEach(['initial', 'rest'], function(methodName, index) {
      var dropName = 'drop' + (index ? '' : 'Right');

      LazyWrapper.prototype[methodName] = function() {
        return this.__filtered__ ? new LazyWrapper(this) : this[dropName](1);
      };
    });

    // Add `LazyWrapper` methods for `_.pluck` and `_.where`.
    arrayEach(['pluck', 'where'], function(methodName, index) {
      var operationName = index ? 'filter' : 'map',
          createCallback = index ? baseMatches : property;

      LazyWrapper.prototype[methodName] = function(value) {
        return this[operationName](createCallback(value));
      };
    });

    LazyWrapper.prototype.compact = function() {
      return this.filter(identity);
    };

    LazyWrapper.prototype.reject = function(predicate, thisArg) {
      predicate = getCallback(predicate, thisArg, 1);
      return this.filter(function(value) {
        return !predicate(value);
      });
    };

    LazyWrapper.prototype.slice = function(start, end) {
      start = start == null ? 0 : (+start || 0);

      var result = this;
      if (result.__filtered__ && (start > 0 || end < 0)) {
        return new LazyWrapper(result);
      }
      if (start < 0) {
        result = result.takeRight(-start);
      } else if (start) {
        result = result.drop(start);
      }
      if (end !== undefined) {
        end = (+end || 0);
        result = end < 0 ? result.dropRight(-end) : result.take(end - start);
      }
      return result;
    };

    LazyWrapper.prototype.takeRightWhile = function(predicate, thisArg) {
      return this.reverse().takeWhile(predicate, thisArg).reverse();
    };

    LazyWrapper.prototype.toArray = function() {
      return this.take(POSITIVE_INFINITY);
    };

    // Add `LazyWrapper` methods to `lodash.prototype`.
    baseForOwn(LazyWrapper.prototype, function(func, methodName) {
      var checkIteratee = /^(?:filter|map|reject)|While$/.test(methodName),
          retUnwrapped = /^(?:first|last)$/.test(methodName),
          lodashFunc = lodash[retUnwrapped ? ('take' + (methodName == 'last' ? 'Right' : '')) : methodName];

      if (!lodashFunc) {
        return;
      }
      lodash.prototype[methodName] = function() {
        var args = retUnwrapped ? [1] : arguments,
            chainAll = this.__chain__,
            value = this.__wrapped__,
            isHybrid = !!this.__actions__.length,
            isLazy = value instanceof LazyWrapper,
            iteratee = args[0],
            useLazy = isLazy || isArray(value);

        if (useLazy && checkIteratee && typeof iteratee == 'function' && iteratee.length != 1) {
          // Avoid lazy use if the iteratee has a "length" value other than `1`.
          isLazy = useLazy = false;
        }
        var interceptor = function(value) {
          return (retUnwrapped && chainAll)
            ? lodashFunc(value, 1)[0]
            : lodashFunc.apply(undefined, arrayPush([value], args));
        };

        var action = { 'func': thru, 'args': [interceptor], 'thisArg': undefined },
            onlyLazy = isLazy && !isHybrid;

        if (retUnwrapped && !chainAll) {
          if (onlyLazy) {
            value = value.clone();
            value.__actions__.push(action);
            return func.call(value);
          }
          return lodashFunc.call(undefined, this.value())[0];
        }
        if (!retUnwrapped && useLazy) {
          value = onlyLazy ? value : new LazyWrapper(this);
          var result = func.apply(value, args);
          result.__actions__.push(action);
          return new LodashWrapper(result, chainAll);
        }
        return this.thru(interceptor);
      };
    });

    // Add `Array` and `String` methods to `lodash.prototype`.
    arrayEach(['join', 'pop', 'push', 'replace', 'shift', 'sort', 'splice', 'split', 'unshift'], function(methodName) {
      var func = (/^(?:replace|split)$/.test(methodName) ? stringProto : arrayProto)[methodName],
          chainName = /^(?:push|sort|unshift)$/.test(methodName) ? 'tap' : 'thru',
          retUnwrapped = /^(?:join|pop|replace|shift)$/.test(methodName);

      lodash.prototype[methodName] = function() {
        var args = arguments;
        if (retUnwrapped && !this.__chain__) {
          return func.apply(this.value(), args);
        }
        return this[chainName](function(value) {
          return func.apply(value, args);
        });
      };
    });

    // Map minified function names to their real names.
    baseForOwn(LazyWrapper.prototype, function(func, methodName) {
      var lodashFunc = lodash[methodName];
      if (lodashFunc) {
        var key = lodashFunc.name,
            names = realNames[key] || (realNames[key] = []);

        names.push({ 'name': methodName, 'func': lodashFunc });
      }
    });

    realNames[createHybridWrapper(undefined, BIND_KEY_FLAG).name] = [{ 'name': 'wrapper', 'func': undefined }];

    // Add functions to the lazy wrapper.
    LazyWrapper.prototype.clone = lazyClone;
    LazyWrapper.prototype.reverse = lazyReverse;
    LazyWrapper.prototype.value = lazyValue;

    // Add chaining functions to the `lodash` wrapper.
    lodash.prototype.chain = wrapperChain;
    lodash.prototype.commit = wrapperCommit;
    lodash.prototype.concat = wrapperConcat;
    lodash.prototype.plant = wrapperPlant;
    lodash.prototype.reverse = wrapperReverse;
    lodash.prototype.toString = wrapperToString;
    lodash.prototype.run = lodash.prototype.toJSON = lodash.prototype.valueOf = lodash.prototype.value = wrapperValue;

    // Add function aliases to the `lodash` wrapper.
    lodash.prototype.collect = lodash.prototype.map;
    lodash.prototype.head = lodash.prototype.first;
    lodash.prototype.select = lodash.prototype.filter;
    lodash.prototype.tail = lodash.prototype.rest;

    return lodash;
  }

  /*--------------------------------------------------------------------------*/

  // Export lodash.
  var _ = runInContext();

  // Some AMD build optimizers like r.js check for condition patterns like the following:
  if (typeof define == 'function' && typeof define.amd == 'object' && define.amd) {
    // Expose lodash to the global object when an AMD loader is present to avoid
    // errors in cases where lodash is loaded by a script tag and not intended
    // as an AMD module. See http://requirejs.org/docs/errors.html#mismatch for
    // more details.
    root._ = _;

    // Define as an anonymous module so, through path mapping, it can be
    // referenced as the "underscore" module.
    define(function() {
      return _;
    });
  }
  // Check for `exports` after `define` in case a build optimizer adds an `exports` object.
  else if (freeExports && freeModule) {
    // Export for Node.js or RingoJS.
    if (moduleExports) {
      (freeModule.exports = _)._ = _;
    }
    // Export for Rhino with CommonJS support.
    else {
      freeExports._ = _;
    }
  }
  else {
    // Export for a browser or Rhino.
    root._ = _;
  }
}.call(this));

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],6:[function(require,module,exports){
'use strict';

module.exports = require('./lib')

},{"./lib":11}],7:[function(require,module,exports){
'use strict';

var asap = require('asap/raw');

function noop() {}

// States:
//
// 0 - pending
// 1 - fulfilled with _value
// 2 - rejected with _value
// 3 - adopted the state of another promise, _value
//
// once the state is no longer pending (0) it is immutable

// All `_` prefixed properties will be reduced to `_{random number}`
// at build time to obfuscate them and discourage their use.
// We don't use symbols or Object.defineProperty to fully hide them
// because the performance isn't good enough.


// to avoid using try/catch inside critical functions, we
// extract them to here.
var LAST_ERROR = null;
var IS_ERROR = {};
function getThen(obj) {
  try {
    return obj.then;
  } catch (ex) {
    LAST_ERROR = ex;
    return IS_ERROR;
  }
}

function tryCallOne(fn, a) {
  try {
    return fn(a);
  } catch (ex) {
    LAST_ERROR = ex;
    return IS_ERROR;
  }
}
function tryCallTwo(fn, a, b) {
  try {
    fn(a, b);
  } catch (ex) {
    LAST_ERROR = ex;
    return IS_ERROR;
  }
}

module.exports = Promise;

function Promise(fn) {
  if (typeof this !== 'object') {
    throw new TypeError('Promises must be constructed via new');
  }
  if (typeof fn !== 'function') {
    throw new TypeError('Promise constructor\'s argument is not a function');
  }
  this._40 = 0;
  this._65 = 0;
  this._55 = null;
  this._72 = null;
  if (fn === noop) return;
  doResolve(fn, this);
}
Promise._37 = null;
Promise._87 = null;
Promise._61 = noop;

Promise.prototype.then = function(onFulfilled, onRejected) {
  if (this.constructor !== Promise) {
    return safeThen(this, onFulfilled, onRejected);
  }
  var res = new Promise(noop);
  handle(this, new Handler(onFulfilled, onRejected, res));
  return res;
};

function safeThen(self, onFulfilled, onRejected) {
  return new self.constructor(function (resolve, reject) {
    var res = new Promise(noop);
    res.then(resolve, reject);
    handle(self, new Handler(onFulfilled, onRejected, res));
  });
}
function handle(self, deferred) {
  while (self._65 === 3) {
    self = self._55;
  }
  if (Promise._37) {
    Promise._37(self);
  }
  if (self._65 === 0) {
    if (self._40 === 0) {
      self._40 = 1;
      self._72 = deferred;
      return;
    }
    if (self._40 === 1) {
      self._40 = 2;
      self._72 = [self._72, deferred];
      return;
    }
    self._72.push(deferred);
    return;
  }
  handleResolved(self, deferred);
}

function handleResolved(self, deferred) {
  asap(function() {
    var cb = self._65 === 1 ? deferred.onFulfilled : deferred.onRejected;
    if (cb === null) {
      if (self._65 === 1) {
        resolve(deferred.promise, self._55);
      } else {
        reject(deferred.promise, self._55);
      }
      return;
    }
    var ret = tryCallOne(cb, self._55);
    if (ret === IS_ERROR) {
      reject(deferred.promise, LAST_ERROR);
    } else {
      resolve(deferred.promise, ret);
    }
  });
}
function resolve(self, newValue) {
  // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure
  if (newValue === self) {
    return reject(
      self,
      new TypeError('A promise cannot be resolved with itself.')
    );
  }
  if (
    newValue &&
    (typeof newValue === 'object' || typeof newValue === 'function')
  ) {
    var then = getThen(newValue);
    if (then === IS_ERROR) {
      return reject(self, LAST_ERROR);
    }
    if (
      then === self.then &&
      newValue instanceof Promise
    ) {
      self._65 = 3;
      self._55 = newValue;
      finale(self);
      return;
    } else if (typeof then === 'function') {
      doResolve(then.bind(newValue), self);
      return;
    }
  }
  self._65 = 1;
  self._55 = newValue;
  finale(self);
}

function reject(self, newValue) {
  self._65 = 2;
  self._55 = newValue;
  if (Promise._87) {
    Promise._87(self, newValue);
  }
  finale(self);
}
function finale(self) {
  if (self._40 === 1) {
    handle(self, self._72);
    self._72 = null;
  }
  if (self._40 === 2) {
    for (var i = 0; i < self._72.length; i++) {
      handle(self, self._72[i]);
    }
    self._72 = null;
  }
}

function Handler(onFulfilled, onRejected, promise){
  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;
  this.onRejected = typeof onRejected === 'function' ? onRejected : null;
  this.promise = promise;
}

/**
 * Take a potentially misbehaving resolver function and make sure
 * onFulfilled and onRejected are only called once.
 *
 * Makes no guarantees about asynchrony.
 */
function doResolve(fn, promise) {
  var done = false;
  var res = tryCallTwo(fn, function (value) {
    if (done) return;
    done = true;
    resolve(promise, value);
  }, function (reason) {
    if (done) return;
    done = true;
    reject(promise, reason);
  });
  if (!done && res === IS_ERROR) {
    done = true;
    reject(promise, LAST_ERROR);
  }
}

},{"asap/raw":2}],8:[function(require,module,exports){
'use strict';

var Promise = require('./core.js');

module.exports = Promise;
Promise.prototype.done = function (onFulfilled, onRejected) {
  var self = arguments.length ? this.then.apply(this, arguments) : this;
  self.then(null, function (err) {
    setTimeout(function () {
      throw err;
    }, 0);
  });
};

},{"./core.js":7}],9:[function(require,module,exports){
'use strict';

//This file contains the ES6 extensions to the core Promises/A+ API

var Promise = require('./core.js');

module.exports = Promise;

/* Static Functions */

var TRUE = valuePromise(true);
var FALSE = valuePromise(false);
var NULL = valuePromise(null);
var UNDEFINED = valuePromise(undefined);
var ZERO = valuePromise(0);
var EMPTYSTRING = valuePromise('');

function valuePromise(value) {
  var p = new Promise(Promise._61);
  p._65 = 1;
  p._55 = value;
  return p;
}
Promise.resolve = function (value) {
  if (value instanceof Promise) return value;

  if (value === null) return NULL;
  if (value === undefined) return UNDEFINED;
  if (value === true) return TRUE;
  if (value === false) return FALSE;
  if (value === 0) return ZERO;
  if (value === '') return EMPTYSTRING;

  if (typeof value === 'object' || typeof value === 'function') {
    try {
      var then = value.then;
      if (typeof then === 'function') {
        return new Promise(then.bind(value));
      }
    } catch (ex) {
      return new Promise(function (resolve, reject) {
        reject(ex);
      });
    }
  }
  return valuePromise(value);
};

Promise.all = function (arr) {
  var args = Array.prototype.slice.call(arr);

  return new Promise(function (resolve, reject) {
    if (args.length === 0) return resolve([]);
    var remaining = args.length;
    function res(i, val) {
      if (val && (typeof val === 'object' || typeof val === 'function')) {
        if (val instanceof Promise && val.then === Promise.prototype.then) {
          while (val._65 === 3) {
            val = val._55;
          }
          if (val._65 === 1) return res(i, val._55);
          if (val._65 === 2) reject(val._55);
          val.then(function (val) {
            res(i, val);
          }, reject);
          return;
        } else {
          var then = val.then;
          if (typeof then === 'function') {
            var p = new Promise(then.bind(val));
            p.then(function (val) {
              res(i, val);
            }, reject);
            return;
          }
        }
      }
      args[i] = val;
      if (--remaining === 0) {
        resolve(args);
      }
    }
    for (var i = 0; i < args.length; i++) {
      res(i, args[i]);
    }
  });
};

Promise.reject = function (value) {
  return new Promise(function (resolve, reject) {
    reject(value);
  });
};

Promise.race = function (values) {
  return new Promise(function (resolve, reject) {
    values.forEach(function(value){
      Promise.resolve(value).then(resolve, reject);
    });
  });
};

/* Prototype Methods */

Promise.prototype['catch'] = function (onRejected) {
  return this.then(null, onRejected);
};

},{"./core.js":7}],10:[function(require,module,exports){
'use strict';

var Promise = require('./core.js');

module.exports = Promise;
Promise.prototype['finally'] = function (f) {
  return this.then(function (value) {
    return Promise.resolve(f()).then(function () {
      return value;
    });
  }, function (err) {
    return Promise.resolve(f()).then(function () {
      throw err;
    });
  });
};

},{"./core.js":7}],11:[function(require,module,exports){
'use strict';

module.exports = require('./core.js');
require('./done.js');
require('./finally.js');
require('./es6-extensions.js');
require('./node-extensions.js');
require('./synchronous.js');

},{"./core.js":7,"./done.js":8,"./es6-extensions.js":9,"./finally.js":10,"./node-extensions.js":12,"./synchronous.js":13}],12:[function(require,module,exports){
'use strict';

// This file contains then/promise specific extensions that are only useful
// for node.js interop

var Promise = require('./core.js');
var asap = require('asap');

module.exports = Promise;

/* Static Functions */

Promise.denodeify = function (fn, argumentCount) {
  if (
    typeof argumentCount === 'number' && argumentCount !== Infinity
  ) {
    return denodeifyWithCount(fn, argumentCount);
  } else {
    return denodeifyWithoutCount(fn);
  }
};

var callbackFn = (
  'function (err, res) {' +
  'if (err) { rj(err); } else { rs(res); }' +
  '}'
);
function denodeifyWithCount(fn, argumentCount) {
  var args = [];
  for (var i = 0; i < argumentCount; i++) {
    args.push('a' + i);
  }
  var body = [
    'return function (' + args.join(',') + ') {',
    'var self = this;',
    'return new Promise(function (rs, rj) {',
    'var res = fn.call(',
    ['self'].concat(args).concat([callbackFn]).join(','),
    ');',
    'if (res &&',
    '(typeof res === "object" || typeof res === "function") &&',
    'typeof res.then === "function"',
    ') {rs(res);}',
    '});',
    '};'
  ].join('');
  return Function(['Promise', 'fn'], body)(Promise, fn);
}
function denodeifyWithoutCount(fn) {
  var fnLength = Math.max(fn.length - 1, 3);
  var args = [];
  for (var i = 0; i < fnLength; i++) {
    args.push('a' + i);
  }
  var body = [
    'return function (' + args.join(',') + ') {',
    'var self = this;',
    'var args;',
    'var argLength = arguments.length;',
    'if (arguments.length > ' + fnLength + ') {',
    'args = new Array(arguments.length + 1);',
    'for (var i = 0; i < arguments.length; i++) {',
    'args[i] = arguments[i];',
    '}',
    '}',
    'return new Promise(function (rs, rj) {',
    'var cb = ' + callbackFn + ';',
    'var res;',
    'switch (argLength) {',
    args.concat(['extra']).map(function (_, index) {
      return (
        'case ' + (index) + ':' +
        'res = fn.call(' + ['self'].concat(args.slice(0, index)).concat('cb').join(',') + ');' +
        'break;'
      );
    }).join(''),
    'default:',
    'args[argLength] = cb;',
    'res = fn.apply(self, args);',
    '}',
    
    'if (res &&',
    '(typeof res === "object" || typeof res === "function") &&',
    'typeof res.then === "function"',
    ') {rs(res);}',
    '});',
    '};'
  ].join('');

  return Function(
    ['Promise', 'fn'],
    body
  )(Promise, fn);
}

Promise.nodeify = function (fn) {
  return function () {
    var args = Array.prototype.slice.call(arguments);
    var callback =
      typeof args[args.length - 1] === 'function' ? args.pop() : null;
    var ctx = this;
    try {
      return fn.apply(this, arguments).nodeify(callback, ctx);
    } catch (ex) {
      if (callback === null || typeof callback == 'undefined') {
        return new Promise(function (resolve, reject) {
          reject(ex);
        });
      } else {
        asap(function () {
          callback.call(ctx, ex);
        })
      }
    }
  }
};

Promise.prototype.nodeify = function (callback, ctx) {
  if (typeof callback != 'function') return this;

  this.then(function (value) {
    asap(function () {
      callback.call(ctx, null, value);
    });
  }, function (err) {
    asap(function () {
      callback.call(ctx, err);
    });
  });
};

},{"./core.js":7,"asap":1}],13:[function(require,module,exports){
'use strict';

var Promise = require('./core.js');

module.exports = Promise;
Promise.enableSynchronous = function () {
  Promise.prototype.isPending = function() {
    return this.getState() == 0;
  };

  Promise.prototype.isFulfilled = function() {
    return this.getState() == 1;
  };

  Promise.prototype.isRejected = function() {
    return this.getState() == 2;
  };

  Promise.prototype.getValue = function () {
    if (this._65 === 3) {
      return this._55.getValue();
    }

    if (!this.isFulfilled()) {
      throw new Error('Cannot get a value of an unfulfilled promise.');
    }

    return this._55;
  };

  Promise.prototype.getReason = function () {
    if (this._65 === 3) {
      return this._55.getReason();
    }

    if (!this.isRejected()) {
      throw new Error('Cannot get a rejection reason of a non-rejected promise.');
    }

    return this._55;
  };

  Promise.prototype.getState = function () {
    if (this._65 === 3) {
      return this._55.getState();
    }
    if (this._65 === -1 || this._65 === -2) {
      return 0;
    }

    return this._65;
  };
};

Promise.disableSynchronous = function() {
  Promise.prototype.isPending = undefined;
  Promise.prototype.isFulfilled = undefined;
  Promise.prototype.isRejected = undefined;
  Promise.prototype.getValue = undefined;
  Promise.prototype.getReason = undefined;
  Promise.prototype.getState = undefined;
};

},{"./core.js":7}],14:[function(require,module,exports){
'use strict';

var dialog = require('./dialog');

var $cache = {};

function initializeCache() {
    $cache.primary = $('#primary');
    $cache.checkoutForm = $cache.primary.find('.checkout-shipping.address').length > 0 ? $cache.primary.find('.checkout-shipping.address') : $cache.primary.find('.checkout-billing.address');
    $cache.submitFormButton = $cache.checkoutForm.find('button.saveShipping').length > 0 ? $cache.checkoutForm.find('button.saveShipping') : $cache.checkoutForm.find('button[name$=_save]');
    $cache.validatoionDialog = $cache.primary.find('#address-validation-dialog');
    $cache.byPassDAV = $cache.checkoutForm.find('.bypassDAV');
    $cache.address1 = $cache.checkoutForm.find('input[name$="_address1"]');
    $cache.address2 = $cache.checkoutForm.find('input[name$="_address2"]');
    $cache.city = $cache.checkoutForm.find('input[name$="_city"]');
    $cache.stateCode = $cache.checkoutForm.find('select[id$="_state"]');
    $cache.countryCode = $cache.checkoutForm.find('select[id$="_country"]');
    $cache.postalCode = $cache.checkoutForm.find('input[name$="_postal"]');
}

function initializeDom() {
    if ($cache.validatoionDialog.length > 0) {

        var dlg = dialog.create({
            target: $cache.validatoionDialog,
            options: {
                width: 300,
                dialogClass: 'address-validation-dialog',
                open: initializeEvents
            }
        });

        $cache.validatoionDialog.show();
        dlg.dialog('open');
    }
}

function initializeEvents() {

    $cache.validatoionDialog.on('click', '#original-address-edit', function () {
        $cache.validatoionDialog.dialog('close');
        $('.shipping-address-field-section').removeClass('hide');
        $('.selected-shipping-address').addClass('hide');
        $('.new-address-field').addClass('hide');

        /*jQuery('html, body').animate({
            scrollTop: $('#navigation').position().top
        }, 500);*/
    });
    $cache.validatoionDialog.on('click', '#suggested-address-edit-1', function () {

        $('.shipping-address-field-section').removeClass('hide');
        $('.selected-shipping-address').addClass('hide');
    });

    $cache.validatoionDialog.on('click', '#ship-to-original-address', function () {

        $cache.validatoionDialog.dialog('close');
        $cache.byPassDAV.attr('value', 'true');
        $cache.submitFormButton.click();
    });

    $cache.validatoionDialog.on('click', '[id|="suggested-address-edit"]', function () {
        var selectedAddress = $(this).data('address').split('||');
        $cache.address1.val(selectedAddress[0]);
        if (selectedAddress[1] !== 'undefined' && selectedAddress[1] !== '') {
            $cache.address2.val(selectedAddress[1]);
        }
        $cache.city.val(selectedAddress[2]);
        $cache.stateCode.val(selectedAddress[3]);
        $cache.countryCode.val(selectedAddress[4]);
        $cache.postalCode.val(selectedAddress[5]);
        $cache.validatoionDialog.dialog('close');
        jQuery('html, body').animate({
            scrollTop: $('#navigation').position().top
        }, 500);
    });

    $cache.validatoionDialog.on('click', '[id|="ship-to-address-selected"]', function () {
        var selectedAddress = $(this).data('address').split('||');
        $cache.address1.val(selectedAddress[0]);
        if (selectedAddress[1] !== 'undefined' && selectedAddress[1] !== '') {
            $cache.address2.val(selectedAddress[1]);
        }
        $cache.city.val(selectedAddress[2]);
        $cache.stateCode.val(selectedAddress[3]);
        $cache.countryCode.val(selectedAddress[4]);
        $cache.postalCode.val(selectedAddress[5]);
        $cache.byPassDAV.attr('value', 'true');
        $cache.validatoionDialog.dialog('close');

        $cache.submitFormButton.click();
    });
}

exports.init = function () {
    initializeCache();
    initializeDom();
};

},{"./dialog":23}],15:[function(require,module,exports){
'use strict';

var progress = require('./progress'),
    util = require('./util');

var currentRequests = [];

/**
 * @function
 * @description Ajax request to get json response
 * @param {Boolean} async  Asynchronous or not
 * @param {String} url URI for the request
 * @param {Object} data Name/Value pair data request
 * @param {Function} callback  Callback function to be called
 */
var getJson = function getJson(options) {
    options.url = util.toAbsoluteUrl(options.url);
    // return if no url exists or url matches a current request
    if (!options.url || currentRequests[options.url]) {
        return;
    }

    currentRequests[options.url] = true;

    // make the server call
    $.ajax({
        dataType: 'json',
        url: options.url,
        async: typeof options.async === 'undefined' || options.async === null ? true : options.async,
        data: options.data || {},
        type: options.type || 'GET' //PREVAIL-Added to handle security form issues.
    })
    // success
    .done(function (response) {
        if (options.callback) {
            options.callback(response);
        }
    })
    // failed
    .fail(function (xhr, textStatus) {
        if (textStatus === 'parsererror') {
            window.alert(Resources.BAD_RESPONSE);
        }
        if (options.callback) {
            options.callback(null);
        }
    })
    // executed on success or fail
    .always(function () {
        // remove current request from hash
        if (currentRequests[options.url]) {
            delete currentRequests[options.url];
        }
    });
};
/**
 * @function
 * @description ajax request to load html response in a given container
 * @param {String} url URI for the request
 * @param {Object} data Name/Value pair data request
 * @param {Function} callback  Callback function to be called
 * @param {Object} target Selector or element that will receive content
 */
var load = function load(options) {
    options.url = util.toAbsoluteUrl(options.url);
    // return if no url exists or url matches a current request
    if (!options.url || currentRequests[options.url]) {
        return;
    }

    currentRequests[options.url] = true;

    // make the server call
    $.ajax({
        dataType: 'html',
        url: util.appendParamToURL(options.url, 'format', 'ajax'),
        data: options.data,
        xhrFields: {
            withCredentials: true
        },
        type: options.type || 'GET' //PREVAIL-Added to handle security form issues.
    }).done(function (response) {
        // success
        if (options.target) {
            $(options.target).empty().html(response);
        }
        if (options.callback) {
            options.callback(response);
        }
    }).fail(function (xhr, textStatus) {
        // failed
        if (textStatus === 'parsererror') {
            window.alert(Resources.BAD_RESPONSE);
        }
        options.callback(null, textStatus);
    }).always(function () {
        progress.hide();
        // remove current request from hash
        if (currentRequests[options.url]) {
            delete currentRequests[options.url];
        }
    });
};

exports.getJson = getJson;
exports.load = load;

},{"./progress":52,"./util":63}],16:[function(require,module,exports){
/**
 *    (c) 2009-2014 Demandware Inc.
 *    Subject to standard usage terms and conditions
 *    For all details and documentation:
 *    https://bitbucket.com/demandware/sitegenesis
 */
'use strict';

var countries = require('./countries'),
    dialog = require('./dialog'),
    minicart = require('./minicart'),
    page = require('./page'),
    searchplaceholder = require('./searchplaceholder'),
    searchsuggest = require('./searchsuggest'),
    tooltip = require('./tooltip'),
    util = require('./util'),
    validator = require('./validator'),
    megamenu = require('./megamenu'),
    headerinit = require('./headerinit'),
    uievents = require('./uievents'),

//progress = require('./progress'),
tls = require('./tls'),
    tagmanager = require('./tagmanager');

// if jQuery has not been loaded, load from google cdn
if (!window.jQuery) {
    var s = document.createElement('script');
    s.setAttribute('src', 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js');
    s.setAttribute('type', 'text/javascript');
    document.getElementsByTagName('head')[0].appendChild(s);
}

require('./jquery-ext')();
require('./cookieprivacy')();
require('./captcha')();

var $ = window.jQuery;

function resetPasswordEvents() {
    $('body').find('.PasswordResetDialog .field-wrapper input').off('change').on('click change', function () {
        $(this).removeClass('errorclient');
        $(this).closest('.passwordreset').find('#message').hide();
        $(this).closest('.formfield').find('.label').find('span.errorclient').remove();
        $(this).closest('.formfield').find('.form-row , .label span').removeClass('inputlabel');
    });
    if ($('.PasswordResetDialog').length > 0) {
        $('.PasswordResetDialog').find('.formfield').each(function () {
            if ($(this).find('.field-wrapper .clearbutton').length == 0 && $(this).find('.field-wrapper input[type="text"]').length > 0 || $(this).find('.field-wrapper input[type="password"]').length > 0) {
                $(this).find('.field-wrapper').append('<a class="clearbutton"></a>');
            }
        });
    }
    $('body').find('.PasswordResetDialog a.clearbutton').on('click', function () {
        $(this).closest('.field-wrapper').find('span').remove();
        $(this).closest('.field-wrapper').find('.required').removeClass('errorclient');
        $(this).closest('.formfield ').find('.form-row , .label span').removeClass('inputlabel');
        $(this).closest('.formfield').find('input').val('');
        $(this).closest('.formfield').find('a.clearbutton').hide();
        $(this).closest('.formfield').find('span.logerror , .existing_register').hide();
    });
    // Attach keypress handler to input box.  Submit form if user presses 'enter' key.
    $('body').find('.PasswordResetDialog input.resetold').keypress(function (e) {
        if (e.which == 13) {
            //jQuery('#sendBtn').click();
            return false;
        }
        return true;
    });
    $('body').find('.PasswordResetDialog .field-wrapper input').on('keyup input blur', function () {
        if ($(this).val() != undefined) {
            if ($(this).val().length > 0) {
                $(this).closest('.formfield').find('a.clearbutton').show();
            } else {
                $(this).closest('.formfield').find('a.clearbutton').hide();
            }
        }
    });
    var $requestPasswordForm = $('[name$="_requestpassword"]'),
        $submit = $requestPasswordForm.find('[name$="_requestpassword_send"]');
    $($submit).on('click', function (e) {
        if (!$requestPasswordForm.valid()) {
            return;
        }
        e.preventDefault();
        dialog.submit($submit.attr('name'));
        setTimeout(function () {
            resetPasswordEvents();
        }, 1300);
    });
    validator.init();
}

function initializeEvents() {
    var isSafari = navigator.userAgent.indexOf('Safari') > -1;
    var isChrome = navigator.userAgent.indexOf('Chrome') > -1;
    var isExplorer = navigator.userAgent.indexOf('MSIE') > -1;
    var isFirefox = navigator.userAgent.indexOf('Firefox') > -1;
    //var is_safari = navigator.userAgent.indexOf('Safari') > -1;
    var isOpera = navigator.userAgent.toLowerCase().indexOf('op') > -1;
    if (isChrome && isSafari) {
        isSafari = false;
    }
    if (isChrome && isOpera) {
        isChrome = false;
    }
    if (isSafari) {
        $('body').addClass('safari-browser');
    } else if (isFirefox) {
        $('body').addClass('firefox-browser');
    } else if (isExplorer) {
        $('body').addClass('ie-browser');
    } else if (isChrome) {
        $('body').addClass('chrome-browser');
    }
    if (navigator.userAgent.indexOf('Mac OS X') != -1) {
        $('body').addClass('mac');
    } else {
        $('body').addClass('pc');
    }
    var controlKeys = ['8', '13', '46', '45', '36', '35', '38', '37', '40', '39'];

    //PREVAIL-Added to handle form dialog boxes server side issues.
    $('body').on('click', '.dialogify, [data-dlg-options], [data-dlg-action]', require('./dialogify').setDialogify).on('keydown', 'textarea[data-character-limit]', function (e) {
        var text = $.trim($(this).val()),
            charsLimit = $(this).data('character-limit'),
            charsUsed = text.length;

        if (charsUsed >= charsLimit && controlKeys.indexOf(e.which.toString()) < 0) {
            e.preventDefault();
        }
    }).on('change keyup mouseup', 'textarea[data-character-limit]', function () {
        var text = $.trim($(this).val()),
            charsLimit = $(this).data('character-limit'),
            charsUsed = text.length,
            charsRemain = charsLimit - charsUsed;

        if (charsRemain < 0) {
            $(this).val(text.slice(0, charsRemain));
            charsRemain = 0;
        }

        $(this).next('div.char-count').find('.char-remain-count').html(charsRemain);
    });

    /**
     * initialize search suggestions, pending the value of the site preference(enhancedSearchSuggestions)
     * this will either init the legacy(false) or the beta versions(true) of the the search suggest feature.
     * */

    /*** minicart hide ***/
    var minicartlink = $('#headerwrapper #header .row.column1 #minicart .minicarttotal .minicarticon-cont .minicart-button');
    minicartlink.on('click', function () {
        if ($(window).width() < 959) {
            $('#minicart .minicartcontent').hide();
        }
    });

    var $searchContainer = $('.site-suggestion-section');
    searchsuggest.init($searchContainer, Resources.SIMPLE_SEARCH);

    $('#password-reset').on('click', function (e) {
        e.preventDefault();
        dialog.open({
            url: $(e.target).attr('href'),
            options: {
                //Start JIRA PREV-334 : Title is missing for the Forgot password overlay.
                title: Resources.FORGOT_PASSWORD,
                width: 475,
                dialogClass: 'PasswordResetDialog',
                open: function open() {
                    resetPasswordEvents();
                }
            }
        });
    });

    // print handler
    $('.print-page').on('click', function () {
        window.print();
        return false;
    });

    $('.mobile-banner-stuff').on('click', function (e) {
        e.preventDefault();
        if ($('.calloutexist').length > 0) {
            var promoCallOut = $('.calloutexist').html();
            var bannerDialogOpen = dialog.create({
                target: '#calloutexist',
                options: {
                    dialogClass: 'dialogBanner'
                }
            });
            util.scrollBrowser($('html').offset().top);
            bannerDialogOpen.html(promoCallOut);
            $('.ui-dialog-content:visible').each(function () {
                $(this).dialog('option', 'position', $(this).dialog('option', 'position'));
            });
            bannerDialogOpen.dialog('open');
        }
    });
    $(document).on('click', '.dialogBanner #closeBtn01', function (e) {
        e.preventDefault();
        $(this).parents('.dialogBanner').find('.ui-dialog-titlebar-close').trigger('click');
    });
    //footer change region event
    $('.change-region-footer').hover(function () {
        $('.domainswitch').show();
    }, function () {
        $('.domainswitch').hide();
    });
    $('.domainswitch').hover(function () {
        $(this).show();
    }, function () {
        $(this).hide();
    });
    $('div.pseudo_self_label').each(function () {
        var $this = jQuery(this);
        var $input = $this.children('input[type="text"]');
        $input.data('toggle', $input.val());
        //used to add a class to placeholder for styling
        if ($('.emailinput.emailfooter').attr('data-placeholder') == $input.val()) {
            $('.emailinput.emailfooter').addClass('footerplace');
        }
        /**
         * if(jQuery.trim($input.val()) != "") {
             * $input.data('toggle').hide(); } else
         *if($input.data('toggle') &&
         * $input.data('toggle').size() >= 1) {
             * $input.val($input.data('toggle')); }
         */
        $input.blur(function () {
            var $this = jQuery(this);
            if (jQuery.trim($this.val()) == '') {
                // $this.data('toggle').show();
                $this.val($this.data('toggle'));
                //used to add a class to placeholder for styling
                if ($('.emailinput.emailfooter').attr('data-placeholder') == $input.val()) {
                    $('.emailinput.emailfooter').addClass('footerplace');
                }
            }
        });
        $input.focus(function () {
            $('.emailinput.emailfooter').removeClass('footerplace');
            var $this = jQuery(this);
            if ($this.data('toggle') && jQuery.trim($this.val()) == jQuery.trim($this.data('toggle'))) {
                // $this.data('toggle').show();
                $this.val('');
            }
        });
        $this.parents('form').submit(function () {
            var $this = jQuery(this);
            $this.find('div.pseudo_self_label input').each(function () {
                var $this = jQuery(this);
                if ($this.data('toggle') && $this.data('toggle') == $this.val()) {
                    $this.val('');
                }
            });
        });
    });

    //
    $('body').on('submit', '#customercontactus', function (e) {
        e.preventDefault();
        var $form = $(this);
        if ($form.valid()) {
            // set the action
            $('<input/>').attr({
                name: $form.attr('action'),
                type: 'hidden'
            }).appendTo($form);
            // serialize the form and get the post url
            var data = $form.serialize();
            var url = $form.attr('action');
            // make sure the server knows this is an ajax request
            if (data.indexOf('ajax') === -1) {
                data += '&format=ajax';
            }

            $.ajax({
                url: url,
                type: 'POST',
                dataType: 'html',
                data: data
            }).done(function (response) {
                $('.column.colspan2').empty().html(response);
            });
        }
    });

    $('.first-level').on('click', function () {
        $(this).children('.second-level').toggle();
        $(this).toggleClass('list-active');
    });
    $('.first-level li.active').closest('.first-level').click();
    $('.first-level li a').click(function (event) {
        event.stopPropagation();
    });
    $('.first-levell').on('click', function () {
        $(this).children('.second-levell').toggle();
        //$(this).toggleClass('list-active');
    });
    $(window).load(function () {
        var currentItem = null;
        if ($('.newMargin').length > 0) {
            currentItem = $('.newMargin');
            currentItem.parents('.cell-header').addClass('new-margin-update');
        }
        if ($('.newMargin-one').length > 0) {
            currentItem = $('.newMargin-one');
            currentItem.parents('.cell-header').addClass('new-margin-updateone');
        }
        if ($('.vmc-manufacturer-margin').length > 0) {
            currentItem = $('.vmc-manufacturer-margin');
            currentItem.parents('.cell-header').addClass('manufacture-margin-update');
        }
        if ($('.strikemaster-paragraph').length > 0) {
            currentItem = $('.strikemaster-paragraph');
            currentItem.parents('.cell-header').addClass('strikemaster-margin-update');
        }
        var spancountleftnav = $('.pt_customerservice .customer .column .contentbox .left-nav-top .contentboxcontent .nav-group li span');
        spancountleftnav.each(function () {
            if ($(this).height() > 19) {
                $(this).addClass('newone');
            } else {
                $(this).removeClass('newone');
            }
        });
        spancountleftnav = $('.pt_customerservice .style-cservice .column .contentbox .left-nav-top .contentboxcontent .nav-group li span');
        spancountleftnav.each(function () {
            if ($(this).height() > 19) {
                $(this).addClass('newone');
            } else {
                $(this).removeClass('newone');
            }
        });
        if ($('.shadow-box').length > 0) {
            currentItem = $('.shadow-box');
            currentItem.parents('.pt_customerservice').addClass('pt_customerservice-box');
        }
        if ($('.zero-margin').length > 0) {
            currentItem = $('.zero-margin');
            currentItem.parents('.cell-header').addClass('zero-margin-cell-header');
        }
        if ($('.checkoutloginsignin').find('.TokenExpired').length > 0) {
            $('#password-reset').trigger('click');
            setTimeout(function () {
                $('#dialog-container').find('p').hide();
                if ($('#dialog-container #PasswordResetForm').length > 0) {
                    $('#dialog-container #PasswordResetForm').prepend('<div class="TokenExpireError">We&#39;re sorry, the link to reset your password has expired. Reset Password links expire after 30 minutes for security purposes. Please submit your email again.</div>');
                    $('#dialog-container #PasswordResetForm .passwordemail').prepend('<div class="Emaillabel">Enter your email address to get reset password instructions sent to your inbox.</div>');
                }
            }, 2000);
        }
    });
    $(window).resize(function () {
        if ($(window).width() > 960) {
            if ($('#container').hasClass('js-container-active')) {
                $('#container, .open-menu-wrap').removeAttr('style');
                $('#container').removeClass('js-container-active').find('.menu-toggle').removeClass('js-menu-toggle');
                $('#main, #footernew').unwrap();
                $('#brand-tabs-header').unwrap();
            }
            //megamenu.init();
        }
    });
    // add generic toggle functionality
    $('.toggle').next('.toggle-content').hide();
    if ($('.pt_checkout').length == 0) {
        if ($('.pt_customerservice').length == 0) {
            $('.toggle').off('click').on('click', function (e) {
                e.preventDefault(); //JIRA PREV-90 : When click on advance search from gift registry login page, focus is happening towards top of the page.
                $(this).toggleClass('expanded').next('ul, .toggle-content').toggle();
            });
        }
    }
    // toggle for customer service FAQ
    if ($('.pt_customerservice').length > 0) {
        $('.section a.toggle').off('click').on('click', function (e) {
            e.preventDefault();
            $(this).parent().next('.reveal').slideToggle('fast', function () {});
            return false;
        });
    }

    $('#footernew .footer-main #linkheading').click(function () {
        $(this).toggleClass('show');
        $(this).closest('div').toggleClass('expanded');
        if ($('#about, #customer-service, #More-ways-to-shop').hasClass('expanded')) {
            $('#rapala_insider').addClass('new');
        } else {
            $('#rapala_insider').removeClass('new');
        }
        if ($('#busniness').hasClass('expanded')) {
            $('#follow_us').addClass('new');
        } else {
            $('#follow_us').removeClass('new');
        }
    });

    function isTouchDevice() {
        return true == ('ontouchstart' in window || window.DocumentTouch && document instanceof DocumentTouch);
    }

    if (isTouchDevice() === true) {
        //alert('Touch Device'); //your logic for touch device here
        $('.old-swim').removeClass('show').addClass('hide');
        $('.new-swim').removeClass('hide').addClass('show');
    } else {
        //alert('Not a Touch Device');//your logic for non touch device here
        $('.old-swim').removeClass('hide').addClass('show');
        $('.new-swim').removeClass('show').addClass('hide');
    }
    $(window).bind('scroll resize', function () {
        if ($('.rapala_device').length > 0 && $(window).width() < 768) {
            if ($('#footerEmailDialog.ui-dialog-content').length > 0) {
                $('.ui-dialog').css({ 'left': ($(document).width() - $('.ui-dialog').width()) / 2, 'top': '100px' });
            } else {
                $('.ui-dialog').css({ 'left': ($(document).width() - $('.ui-dialog').width()) / 2 });
            }
        }
    });

    $('.tabsHeader').bind('click', function () {
        var currentItem = $(this);
        currentItem.closest('.mobile-tabs-section').toggleClass('active');
    });

    $(document).on('click', '.upgradenow-link', function () {
        $('html, body').animate({
            scrollTop: $('.viploginsignin').offset().top
        }, 2000);
    });
    $('.menu-category li .menu-item-toggle').on('click', function (e) {
        e.preventDefault();
        var $parentLi = $(e.target).closest('li');
        $parentLi.siblings('li').removeClass('active').find('.menu-item-toggle').removeClass('fa-chevron-up active').addClass('fa-chevron-right');
        $parentLi.toggleClass('active');
        $(e.target).toggleClass('fa-chevron-right fa-chevron-up active');
    });

    $('body').on('click', '.dialog-close', function () {
        $(this).closest('.ui-dialog').find('.ui-dialog-titlebar-close').trigger('click');
    });
    if ($(window).width() > 959) {
        var item = $('.sign-up-blk'),
            clickItem = item.find('.userlogin');

        clickItem.on('click', function () {
            return false;
        });
    }

    $('.email-subscribe').submit(function (e) {
        e.preventDefault();
        var $form = $(this);
        if ($form.valid()) {
            // set the action
            $('<input/>').attr({
                name: $form.attr('action'),
                type: 'hidden'
            }).appendTo($form);
            // serialize the form and get the post url
            var data = $form.serialize();
            var url = $form.attr('action');
            // make sure the server knows this is an ajax request
            if (data.indexOf('ajax') === -1) {
                data += '&format=ajax';
            }

            dialog.open({
                url: url,
                data: data,
                options: {
                    title: 'email',
                    width: 800,
                    height: 530,
                    dialogClass: 'footerEmailDialog'
                },
                open: function open() {}
            });
        }
    });
}

/**
 * @private
 * @function
 * @description Adds class ('js') to html for css targeting and loads js specific styles.
 */
function initializeDom() {
    // add class to html for css targeting
    $('html').addClass('js');
    if (SitePreferences.LISTING_INFINITE_SCROLL) {
        $('html').addClass('infinite-scroll');
    }
    // load js specific styles//
    util.limitCharacters();
}

var pages = {
    account: require('./pages/account'),
    cart: require('./pages/cart'),
    checkout: require('./pages/checkout'),
    compare: require('./pages/compare'),
    product: require('./pages/product'),
    registry: require('./pages/registry'),
    search: require('./pages/search'),
    storefront: require('./pages/storefront'),
    wishlist: require('./pages/wishlist'),
    rapalainsider: require('./pages/rapalainsider'),
    storelocator: require('./pages/storelocator'),
    international: require('./pages/international')
};

var app = {
    init: function init() {
        if (typeof geoipCountryCode == 'function') {
            var IPGeoCode = geoipCountryCode();
            var allowedCountries = $('.allowed-countries').text();
            if (allowedCountries == null || allowedCountries == 'null' || allowedCountries == 'undefined') {
                allowedCountries = 'US';
            }
            if (allowedCountries.indexOf(IPGeoCode) == -1) {
                $('html').addClass('no-pricing');
                $('.non-usa-alert').removeClass('hide');
                $('.ui-customer,.dividers.pipe,.ui-email,.ui-storelocator,.ui-wishlist,.ui-login,.handle-non-us,.welcomemessage,.anonymous,.site-suggestion-section').addClass('hide');
                $('.minicart, .promotional-message, .product-colors-size').css({ 'display': 'none' });
                $('#customer-returns,#customer-shipping,#customer-warranty').addClass('hide');
                $('.addtowishlist').addClass('hide');
                $('.non-us-contactus geo,.us-contactus').addClass('hide');
                $('.non-us-contactus-non').removeClass('hide');
                $('.desktopHide.handle-non-us.geo').removeClass('desktopHide');
                $('.mobileHide.handle-non-us.geo').removeClass('mobileHide');
                var contactusNonusUrl = Urls.contactusnonus;
                $('.handle-non-us.geo').addClass('hide');
                $('.ca-contactus-link').attr('href', contactusNonusUrl);
                $('.cust-non-us').find('a').attr('href', contactusNonusUrl);
                $('.ui-login,.magnifier-icon').css({ 'background': 'none' });
                $('.handle-non-us-vh').addClass('vhide');
                $('.subscribe').prop('disabled', true);
                setTimeout(function () {
                    $('.product-promo, .newrecommendation').css({ 'display': 'none' });
                }, 5000);
            }
        }

        // Check TLS status if indicated by site preference
        var checkTLS = SitePreferences.CHECK_TLS;
        if (checkTLS == true) {
            var tlsBroswer = tls.getUserAgent();
            if (tlsBroswer.name == 'Chrome' && tlsBroswer.version < 22 || tlsBroswer.name == 'Firefox' && tlsBroswer.version < 27 || tlsBroswer.name == 'Safari' && tlsBroswer.version < 5 || tlsBroswer.name == 'MSIE' && tlsBroswer.version < 11) {
                if (tlsBroswer.name == 'MSIE') {
                    tlsBroswer.name = 'Internet Explorer';
                }
                $('.browser-compatibility-alert').removeClass('hide');
                $('.browser-compatibility-alert p').find('.browser_version').text(' ' + tlsBroswer.name + ' ' + tlsBroswer.version + '.');
            }
        }
        initializeDom();
        // init specific global components
        countries.init();
        tooltip.init();
        minicart.init();
        validator.init();
        uievents.init();
        megamenu.init();
        headerinit.init();
        searchplaceholder.init();
        tagmanager.init(window.pageContext.ns);

        // execute page specific initializations
        $.extend(page, window.pageContext);
        var ns = page.ns;
        if (ns && pages[ns] && pages[ns].init) {
            pages[ns].init();
        }
        initializeEvents();
        require('./browsera').init();
    }
};

// general extension functions
(function () {
    String.format = function () {
        var s = arguments[0];
        var i,
            len = arguments.length - 1;
        for (i = 0; i < len; i++) {
            var reg = new RegExp('\\{' + i + '\\}', 'gm');
            s = s.replace(reg, arguments[i + 1]);
        }
        return s;
    };
})();

jQuery(function () {
    jQuery('.accordion').hover(function () {
        var $this = jQuery(this);
        if ($this.hasClass('highlight')) {
            $this.addClass('contentbox');
        } else {
            $this.removeClass('contentbox').addClass('tabover');
        }
    }, function () {
        jQuery(this).removeClass('tabover').addClass('contentbox');
    }).click(function () {
        var $this = jQuery(this);
        if ($this.find('.expandcontent').length > 0) {
            $this.find('h1').toggleClass('downarrow').next().toggle('fast');
            $this.toggleClass('highlight').toggleClass('tabover').toggleClass('contentbox');
        } else {
            window.location.href = $this.find('a').attr('href');
        }
    });
});

// initialize app
$(document).ready(function () {
    app.init();
});

},{"./browsera":18,"./captcha":19,"./cookieprivacy":21,"./countries":22,"./dialog":23,"./dialogify":24,"./headerinit":26,"./jquery-ext":27,"./megamenu":29,"./minicart":30,"./page":31,"./pages/account":32,"./pages/cart":33,"./pages/checkout":37,"./pages/compare":40,"./pages/international":41,"./pages/product":43,"./pages/rapalainsider":45,"./pages/registry":46,"./pages/search":47,"./pages/storefront":48,"./pages/storelocator":49,"./pages/wishlist":50,"./searchplaceholder":54,"./searchsuggest":55,"./tagmanager":59,"./tls":60,"./tooltip":61,"./uievents":62,"./util":63,"./validator":64}],17:[function(require,module,exports){
'use strict';

var dialog = require('./dialog'),
    page = require('./page'),
    util = require('./util');

var selectedList = [];
var maxItems = 1;
var bliUUID = '';

/**
 * @private
 * @function
 * description Gets a list of bonus products related to a promoted product
 */
function getBonusProducts() {
    var bonusproducts = [];

    var i, len;
    for (i = 0, len = selectedList.length; i < len; i++) {
        var p = {
            pid: selectedList[i].pid,
            qty: selectedList[i].qty,
            options: {}
        };
        var a,
            alen,
            bp = selectedList[i];
        if (bp.options) {
            for (a = 0, alen = bp.options.length; a < alen; a++) {
                var opt = bp.options[a];
                p.options = { optionName: opt.name, optionValue: opt.value };
            }
        }
        bonusproducts.push({ product: p });
    }
    return { bonusproducts: bonusproducts };
}

var selectedItemTemplate = function selectedItemTemplate(data) {
    var attributes = '';
    for (var attrID in data.attributes) {
        var attr = data.attributes[attrID];
        attributes += '<li data-attribute-id="' + attrID + '">\n';
        attributes += '<span class="display-name">' + attr.displayName + '</span>: ';
        attributes += '<span class="display-value">' + attr.displayValue + '</span>\n';
        attributes += '</li>';
    }
    attributes += '<li class="item-qty">\n';
    attributes += '<span class="display-name">Qty</span>: ';
    attributes += '<span class="display-value">' + data.qty + '</span>';
    return ['<li class="selected-bonus-item" data-uuid="' + data.uuid + '" data-pid="' + data.pid + '">', '<i class="remove-link fa fa-remove" title="Remove this product" href="#"></i>', '<div class="item-name">' + data.name + '</div>', '<ul class="item-attributes">', attributes, '<ul>', '<li>'].join('\n');
};

// hide swatches that are not selected or not part of a Product Variation Group
var hideSwatches = function hideSwatches() {
    $('.bonus-product-item:not([data-producttype="master"]) .swatches li').not('.selected').not('.variation-group-value').hide();
    // prevent unselecting the selected variant
    $('.bonus-product-item .swatches .selected').on('click', function () {
        return false;
    });
};

/**
 * @private
 * @function
 * @description Updates the summary page with the selected bonus product
 */
function updateSummary() {
    var $bonusProductList = $('#bonus-product-list');
    if (!selectedList.length) {
        $bonusProductList.find('li.selected-bonus-item').remove();
    } else {
        var ulList = $bonusProductList.find('ul.selected-bonus-items').first();
        var i, len;
        for (i = 0, len = selectedList.length; i < len; i++) {
            var item = selectedList[i];
            var li = selectedItemTemplate(item);
            $(li).appendTo(ulList);
        }
    }

    // get remaining item count
    var remain = maxItems - selectedList.length;
    $bonusProductList.find('.bonus-items-available').text(remain);
    if (remain <= 0) {
        $bonusProductList.find('.select-bonus-item').attr('disabled', 'disabled');
    } else {
        $bonusProductList.find('.select-bonus-item').removeAttr('disabled');
    }
}

function initializeGrid() {
    var $bonusProduct = $('#bonus-product-dialog'),
        $bonusProductList = $('#bonus-product-list'),
        bliData = $bonusProductList.data('line-item-detail');
    maxItems = bliData.maxItems;
    bliUUID = bliData.uuid;

    if (bliData.itemCount >= maxItems) {
        $bonusProductList.find('.select-bonus-item').attr('disabled', 'disabled');
    }

    var cartItems = $bonusProductList.find('.selected-bonus-item');
    cartItems.each(function () {
        var ci = $(this);
        var product = {
            uuid: ci.data('uuid'),
            pid: ci.data('pid'),
            qty: ci.find('.item-qty').text(),
            name: ci.find('.item-name').html(),
            attributes: {}
        };
        var attributes = ci.find('ul.item-attributes li');
        attributes.each(function () {
            var li = $(this);
            product.attributes[li.data('attributeId')] = {
                displayName: li.children('.display-name').html(),
                displayValue: li.children('.display-value').html()
            };
        });
        selectedList.push(product);
    });

    $bonusProductList.on('click', '.bonus-product-item a[href].swatchanchor', function (e) {
        e.preventDefault();
        var url = this.href,
            $this = $(this);
        url = util.appendParamsToUrl(url, {
            'source': 'bonus',
            'format': 'ajax'
        });
        $.ajax({
            url: url,
            success: function success(response) {
                $this.closest('.bonus-product-item').empty().html(response);
                hideSwatches();
            }
        });
    }).on('change', '.input-text', function () {
        $bonusProductList.find('.select-bonus-item').removeAttr('disabled');
        $(this).closest('.bonus-product-form').find('.quantity-error').text('');
    }).on('click', '.select-bonus-item', function (e) {
        e.preventDefault();
        if (selectedList.length >= maxItems) {
            $bonusProductList.find('.select-bonus-item').attr('disabled', 'disabled');
            $bonusProductList.find('.bonus-items-available').text('0');
            return;
        }

        var form = $(this).closest('.bonus-product-form'),
            detail = $(this).closest('.product-detail'),
            uuid = form.find('input[name="productUUID"]').val(),
            qtyVal = form.find('input[name="Quantity"]').val(),
            qty = isNaN(qtyVal) ? 1 : +qtyVal;

        if (qty > maxItems) {
            $bonusProductList.find('.select-bonus-item').attr('disabled', 'disabled');
            form.find('.quantity-error').text(Resources.BONUS_PRODUCT_TOOMANY);
            return;
        }

        var product = {
            uuid: uuid,
            pid: form.find('input[name="pid"]').val(),
            qty: qty,
            name: detail.find('.product-name').text(),
            attributes: detail.find('.product-variations').data('attributes'),
            options: []
        };

        var optionSelects = form.find('.product-option');

        optionSelects.each(function () {
            product.options.push({
                name: this.name,
                value: $(this).val(),
                display: $(this).children(':selected').first().html()
            });
        });
        selectedList.push(product);
        updateSummary();
    }).on('click', '.remove-link', function (e) {
        e.preventDefault();
        var container = $(this).closest('.selected-bonus-item');
        if (!container.data('uuid')) {
            return;
        }

        var uuid = container.data('uuid');
        var i,
            len = selectedList.length;
        for (i = 0; i < len; i++) {
            if (selectedList[i].uuid === uuid) {
                selectedList.splice(i, 1);
                break;
            }
        }
        updateSummary();
    }).on('click', '.add-to-cart-bonus', function (e) {
        e.preventDefault();
        var url = util.appendParamsToUrl(Urls.addBonusProduct, { bonusDiscountLineItemUUID: bliUUID });
        var bonusProducts = getBonusProducts();
        if (bonusProducts.bonusproducts[0].product.qty > maxItems) {
            bonusProducts.bonusproducts[0].product.qty = maxItems;
        }
        // make the server call
        $.ajax({
            type: 'POST',
            dataType: 'json',
            cache: false,
            contentType: 'application/json',
            url: url,
            data: JSON.stringify(bonusProducts)
        }).done(function () {
            // success
            page.refresh();
        }).fail(function (xhr, textStatus) {
            // failed
            if (textStatus === 'parsererror') {
                window.alert(Resources.BAD_RESPONSE);
            } else {
                window.alert(Resources.SERVER_CONNECTION_ERROR);
            }
        }).always(function () {
            $bonusProduct.dialog('close');
        });
    }).on('click', '#more-bonus-products', function (e) {
        e.preventDefault();
        var uuid = $('#bonus-product-list').data().lineItemDetail.uuid;

        //get the next page of choice of bonus products
        var lineItemDetail = JSON.parse($('#bonus-product-list').attr('data-line-item-detail'));
        lineItemDetail.pageStart = lineItemDetail.pageStart + lineItemDetail.pageSize;
        $('#bonus-product-list').attr('data-line-item-detail', JSON.stringify(lineItemDetail));

        var url = util.appendParamsToUrl(Urls.getBonusProducts, {
            bonusDiscountLineItemUUID: uuid,
            format: 'ajax',
            lazyLoad: 'true',
            pageStart: lineItemDetail.pageStart,
            pageSize: $('#bonus-product-list').data().lineItemDetail.pageSize,
            bonusProductsTotal: $('#bonus-product-list').data().lineItemDetail.bpTotal
        });

        $.ajax({
            type: 'GET',
            cache: false,
            contentType: 'application/json',
            url: url
        }).done(function (data) {
            //add the new page to DOM and remove 'More' link if it is the last page of results
            $('#more-bonus-products').before(data);
            if (lineItemDetail.pageStart + lineItemDetail.pageSize >= $('#bonus-product-list').data().lineItemDetail.bpTotal) {
                $('#more-bonus-products').remove();
            }
        }).fail(function (xhr, textStatus) {
            if (textStatus === 'parsererror') {
                window.alert(Resources.BAD_RESPONSE);
            } else {
                window.alert(Resources.SERVER_CONNECTION_ERROR);
            }
        });
    });
}

var bonusProductsView = {
    /**
     * @function
     * @description Open the list of bonus products selection dialog
     */
    show: function show(url) {
        var $bonusProduct = $('#bonus-product-dialog');
        // create the dialog
        dialog.open({
            target: $bonusProduct,
            url: url,
            options: {
                width: 795,
                title: Resources.BONUS_PRODUCTS
            },
            callback: function callback() {
                initializeGrid();
                hideSwatches();
            }
        });
    },
    /**
     * @function
     * @description Open bonus product promo prompt dialog
     */
    loadBonusOption: function loadBonusOption() {
        var self = this,
            bonusDiscountContainer = document.querySelector('.bonus-discount-container');
        if (!bonusDiscountContainer) {
            return;
        }

        // get the html from minicart, then trash it
        var bonusDiscountContainerHtml = bonusDiscountContainer.outerHTML;
        bonusDiscountContainer.parentNode.removeChild(bonusDiscountContainer);

        dialog.open({
            html: bonusDiscountContainerHtml,
            options: {
                width: 400,
                title: Resources.BONUS_PRODUCT,
                buttons: [{
                    text: Resources.SELECT_BONUS_PRODUCTS,
                    click: function click() {
                        var uuid = $('.bonus-product-promo').data('lineitemid'),
                            url = util.appendParamsToUrl(Urls.getBonusProducts, {
                            bonusDiscountLineItemUUID: uuid,
                            source: 'bonus',
                            format: 'ajax',
                            lazyLoad: 'false',
                            pageStart: 0,
                            pageSize: 10,
                            bonusProductsTotal: -1
                        });
                        $(this).dialog('close');
                        self.show(url);
                    }
                }, {
                    text: Resources.NO_THANKS,
                    click: function click() {
                        $(this).dialog('close');
                    }
                }]
            },
            callback: function callback() {
                // show hide promo details
                $('.show-promo-details').on('click', function () {
                    $('.promo-details').toggleClass('visible');
                });
            }
        });
    }
};

module.exports = bonusProductsView;

},{"./dialog":23,"./page":31,"./util":63}],18:[function(require,module,exports){
'use strict';

function getUrlVars() {
    var vars = [],
        hash;
    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
    for (var i = 0; i < hashes.length; i++) {
        hash = hashes[i].split('=');
        vars.push(hash[0]);
        vars[hash[0]] = hash[1];
    }
    return vars;
}

function runBrowseraTest() {

    var hoverSelector = decodeURI(getUrlVars().hover);
    if (hoverSelector !== '') {
        hoverSelector = hoverSelector.replace(' eq ', '=');
        if ($(hoverSelector).length > 0) {
            $(hoverSelector).trigger('mouseenter');
        }
    }
    var clickSelector = decodeURI(getUrlVars().click);
    if (clickSelector !== '') {
        clickSelector = clickSelector.replace(' eq ', '=');
        if ($(clickSelector).length > 0) {
            $(clickSelector).trigger('click');
        }
    }
}

exports.init = function () {
    runBrowseraTest();
};

},{}],19:[function(require,module,exports){
'use strict';

var dialog = require('./dialog');
var util = require('./util');
var SessionAttributes = window.SessionAttributes;

/**
 * @function captcha    Used to display/control the scrim containing the simulated captcha code
 **/
module.exports = function () {
    /**
     * if the session.privacy.ratelimited element is present then show the notification
     * NOTE: You will probably want to replace this with a call to an actual CAPTCHA system to replace the simple one here
     */
    if (SessionAttributes.SHOW_CAPTCHA) {
        dialog.open({
            html: '<h1>' + Resources.ARE_YOU_HUMAN + '</h1>',
            options: {
                closeOnEscape: false,
                dialogClass: 'no-close',
                buttons: [{
                    text: Resources.OK,
                    click: function click() {
                        var url = util.appendParamsToUrl(Urls.rateLimiterReset, { format: 'ajax' });
                        $.ajax({
                            url: url
                        });
                        $(this).dialog('close');
                    }
                }]
            }
        });
    }
};

},{"./dialog":23,"./util":63}],20:[function(require,module,exports){
'use strict';

var page = require('./page'),
    util = require('./util'),
    TPromise = require('promise');

var _currentCategory = '',
    MAX_ACTIVE = 6;

/**
 * @private
 * @function
 * @description Verifies the number of elements in the compare container and updates it with sequential classes for ui targeting
 */
function refreshContainer() {
    var $compareContainer = $('.compare-items');
    var $compareItems = $compareContainer.find('.compare-item');
    var numActive = $compareItems.filter('.active').length;

    if (numActive < 2) {
        $('#compare-items-button').attr('disabled', 'disabled');
    } else {
        $('#compare-items-button').removeAttr('disabled');
    }
    /*Start JIRA PREV-234 : PLP - Not able to remove individual product from the compare grid from PLP.*/
    for (var i = 0; i < $compareItems.length; i++) {
        $($compareItems[i]).find('.compare-item-number').text(i + 1);
    }
    /*End JIRA PREV-234*/
    $compareContainer.toggle(numActive > 0);
}

/**
 * @private
 * @function
 * @description Adds an item to the compare container and refreshes it
 */
function addToList(data) {
    // get the first compare-item not currently active
    var $item = $('.compare-items .compare-item').not('.active').first(),
        $productTile = $('#' + data.uuid);

    if ($item.length === 0) {
        if ($productTile.length > 0) {
            $productTile.find('.compare-check')[0].checked = false;
        }
        window.alert(Resources.COMPARE_ADD_FAIL);
        return;
    }

    // if already added somehow, return
    if ($('[data-uuid="' + data.uuid + '"]').length > 0) {
        return;
    }
    // set as active item
    $item.addClass('active').attr('data-uuid', data.uuid).attr('data-itemid', data.itemid).data('uuid', data.uuid).data('itemid', data.itemid).append($(data.img).clone().addClass('compare-item-image'));
}

/**
 * @private
 * @function
 * description Removes an item from the compare container and refreshes it
 */
function removeFromList($item) {
    if ($item.length === 0) {
        return;
    }
    // remove class, data and id from item
    $item.removeClass('active').removeAttr('data-uuid').removeAttr('data-itemid').data('uuid', '').data('itemid', '')
    // remove the image
    .find('.compare-item-image').remove();

    /*Start JIRA PREV-234 : PLP - Not able to remove individual product from the compare grid from PLP.*/
    var $cloneItem = $item.clone();
    $item.remove();
    $cloneItem.appendTo('.compare-items-panel');
    refreshContainer();
    /*End JIRA PREV-234*/
}

function addProductAjax(args) {
    var promise = new TPromise(function (resolve, reject) {
        $.ajax({
            url: Urls.compareAdd,
            data: {
                pid: args.itemid,
                category: _currentCategory
            },
            dataType: 'json'
        }).done(function (response) {
            if (!response || !response.success) {
                reject(new Error(Resources.COMPARE_ADD_FAIL));
            } else {
                resolve(response);
                initializeEvents(); // JIRA PREV-234 : PLP - Not able to remove individual product from the compare grid from PLP.
            }
        }).fail(function (jqxhr, status, err) {
            reject(new Error(err));
        });
    });
    return promise;
}

function removeProductAjax(args) {
    var promise = new TPromise(function (resolve, reject) {
        $.ajax({
            url: Urls.compareRemove,
            data: {
                pid: args.itemid,
                category: _currentCategory
            },
            dataType: 'json'
        }).done(function (response) {
            if (!response || !response.success) {
                reject(new Error(Resources.COMPARE_REMOVE_FAIL));
            } else {
                resolve(response);
            }
        }).fail(function (jqxhr, status, err) {
            reject(new Error(err));
        });
    });
    return promise;
}

function shiftImages() {
    return new TPromise(function (resolve) {
        var $items = $('.compare-items .compare-item');
        $items.each(function (i, item) {
            var $item = $(item);
            // last item
            if (i === $items.length - 1) {
                return removeFromList($item);
            }
            var $next = $items.eq(i); //JIRA PREV-261 : PLP: When more than 6 product compared then Comparesection not displaying all the product images. Removed +1
            if ($next.hasClass('active')) {
                // remove its own image
                $next.find('.compare-item-image').detach().appendTo($item);
                $item.addClass('active').attr('data-uuid', $next.data('uuid')).attr('data-itemid', $next.data('itemid')).data('uuid', $next.data('uuid')).data('itemid', $next.data('itemid'));
            }
        });
        resolve();
    });
}

/**
 * @function
 * @description Adds product to the compare table
 */
function addProduct(args) {
    var promise;
    var $items = $('.compare-items .compare-item');
    var $cb = $(args.cb);
    var numActive = $items.filter('.active').length;
    if (numActive === MAX_ACTIVE) {
        if (!window.confirm(Resources.COMPARE_CONFIRMATION)) {
            $cb[0].checked = false;
            return;
        }

        // remove product using id
        var $firstItem = $items.first();
        promise = removeItem($firstItem).then(function () {
            return shiftImages();
        });
    } else {
        promise = TPromise.resolve(0);
    }
    return promise.then(function () {
        return addProductAjax(args).then(function () {
            addToList(args);
            if ($cb && $cb.length > 0) {
                $cb[0].checked = true;
            }
            refreshContainer();
        });
    }).then(null, function () {
        if ($cb && $cb.length > 0) {
            $cb[0].checked = false;
        }
    });
}

/**
 * @function
 * @description Removes product from the compare table
 * @param {object} args - the arguments object should have the following properties: itemid, uuid and cb (checkbox)
 */
function removeProduct(args) {
    var $cb = args.cb ? $(args.cb) : null;
    return removeProductAjax(args).then(function () {
        var $item = $('[data-uuid="' + args.uuid + '"]');
        removeFromList($item);
        if ($cb && $cb.length > 0) {
            $cb[0].checked = false;
        }
        refreshContainer();
    }, function () {
        if ($cb && $cb.length > 0) {
            $cb[0].checked = true;
        }
    });
}

function removeItem($item) {
    var uuid = $item.data('uuid'),
        $productTile = $('#' + uuid);
    return removeProduct({
        itemid: $item.data('itemid'),
        uuid: uuid,
        cb: $productTile.length === 0 ? null : $productTile.find('.compare-check')
    });
}

/**
 * @private
 * @function
 * @description Initializes the DOM-Object of the compare container
 */
function initializeDom() {
    var $compareContainer = $('.compare-items');
    _currentCategory = $compareContainer.data('category') || '';
    var $active = $compareContainer.find('.compare-item').filter('.active');
    $active.each(function () {
        var $productTile = $('#' + $(this).data('uuid'));
        if ($productTile.length === 0) {
            return;
        }
        $productTile.find('.compare-check')[0].checked = true;
    });
    // set container state
    refreshContainer();
}

/**
 * @private
 * @function
 * @description Initializes the events on the compare container
 */
function initializeEvents() {
    // add event to buttons to remove products
    $('.compare-item').on('click', '.compare-item-remove', function () {
        removeItem($(this).closest('.compare-item'));
    });

    // Button to go to compare page
    $('#compare-items-button').on('click', function () {
        page.redirect(util.appendParamToURL(Urls.compareShow, 'category', _currentCategory));
    });

    // Button to clear all compared items
    // rely on refreshContainer to take care of hiding the container
    $('#clear-compared-items').on('click', function () {
        $('.compare-items .active').each(function () {
            removeItem($(this));
        });
    });
}

exports.init = function () {
    initializeDom();
    initializeEvents();
};

exports.addProduct = addProduct;
exports.removeProduct = removeProduct;

},{"./page":31,"./util":63,"promise":6}],21:[function(require,module,exports){
'use strict';

var ajax = require('./ajax');

/**
 * @function cookieprivacy    Used to display/control the scrim containing the cookie privacy code
 **/
module.exports = function () {
    /**
     * If we have not accepted cookies AND we're not on the Privacy Policy page, then show the notification
     * NOTE: You will probably want to adjust the Privacy Page test to match your site's specific privacy / cookie page
     */
    if (SitePreferences.COOKIE_HINT === true && document.cookie.indexOf('dw_cookies_accepted') < 0) {
        // check for privacy policy page
        if ($('.privacy-policy').length === 0) {
            var $container = $('.cookie-footer');
            ajax.load({
                url: Urls.cookieHint,
                method: 'GET',
                target: $container
            });
            enableCookies();
        }
    } else {
        // Otherwise, we don't need to show the asset, just enable the cookies
        enableCookies();
    }

    function enableCookies() {
        if (document.cookie.indexOf('dw=1') < 0) {
            document.cookie = 'dw=1; path=/';
        }
        if (document.cookie.indexOf('dw_cookies_accepted') < 0) {
            document.cookie = 'dw_cookies_accepted=1; path=/';
        }
    }
};

},{"./ajax":15}],22:[function(require,module,exports){
'use strict';

exports.init = function init() {
    $('.country-selector .current-country').on('click', function () {
        $('.country-selector .selector').toggleClass('active');
        $(this).toggleClass('selector-active');
    });
    // set currency first before reload
    $('.country-selector .selector .locale').on('click', function (e) {
        e.preventDefault();
        var url = this.href;
        var currency = this.getAttribute('data-currency');
        $.ajax({
            dataType: 'json',
            url: Urls.setSessionCurrency,
            data: {
                format: 'ajax',
                currencyMnemonic: currency
            }
        }).done(function (response) {
            if (!response.success) {
                throw new Error('Unable to set currency');
            }
            window.location.href = url;
        });
    });

    $('.change-currency-link').on('click', function (e) {
        e.preventDefault();
        var url = this.href;
        $.ajax({
            dataType: 'json',
            url: url,
            data: {
                format: 'ajax'
            }
        }).done(function (response) {
            if (!response.success) {
                throw new Error('Unable to set currency');
            }
            window.location.reload(false);
        });
    });
};

},{}],23:[function(require,module,exports){
'use strict';

var ajax = require('./ajax'),
    util = require('./util'),
    _ = require('lodash'),
    imagesLoaded = require('imagesloaded');

var dialog = {
    /**
     * @function
     * @description Appends a dialog to a given container (target)
     * @param {Object} params  params.target can be an id selector or an jquery object
     */
    create: function create(params) {
        var $target, id;

        if (_.isString(params.target)) {
            if (params.target.charAt(0) === '#') {
                $target = $(params.target);
            } else {
                $target = $('#' + params.target);
            }
        } else if (params.target instanceof jQuery) {
            $target = params.target;
        } else {
            $target = $('#dialog-container');
        }

        // if no element found, create one
        if ($target.length === 0) {
            if ($target.selector && $target.selector.charAt(0) === '#') {
                id = $target.selector.substr(1);
                $target = $('<div>').attr('id', id).addClass('dialog-content').appendTo('body');
            }
        }

        // create the dialog
        this.$container = $target;
        this.$container.dialog(_.merge({}, this.settings, params.options || {}));
        return this.$container; // PREVAIL-Added Return value.
    },
    /**
     * @function
     * @description Opens a dialog using the given url (params.url) or html (params.html)
     * @param {Object} params
     * @param {Object} params.url should contain the url
     * @param {String} params.html contains the html of the dialog content
     */
    open: function open(params) {
        // close any open dialog
        this.close();
        this.create(params);
        this.replace(params);
    },
    /**
     * @description populate the dialog with html content, then open it
     **/
    openWithContent: function openWithContent(params) {
        var content, position, callback;

        if (!this.$container) {
            return;
        }
        content = params.content || params.html;
        if (!content) {
            return;
        }
        this.$container.empty().html(content);
        if (!this.$container.dialog('isOpen')) {
            this.$container.dialog('open');
        }

        if (params.options) {
            position = params.options.position;
        }
        if (!position) {
            position = this.settings.position;
        }
        imagesLoaded(this.$container).on('done', function () {
            this.$container.dialog('option', 'position', position);
        }.bind(this));

        callback = typeof params.callback === 'function' ? params.callback : function () {};
        callback();
    },
    /**
     * @description Replace the content of current dialog
     * @param {object} params
     * @param {string} params.url - If the url property is provided, an ajax call is performed to get the content to replace
     * @param {string} params.html - If no url property is provided, use html provided to replace
     */
    replace: function replace(params) {
        if (!this.$container) {
            return;
        }
        if (params.url) {
            params.url = util.appendParamToURL(params.url, 'format', 'ajax');
            ajax.load({
                url: params.url,
                data: params.data,
                callback: function (response) {
                    params.content = response;
                    this.openWithContent(params);
                }.bind(this)
            });
        } else if (params.html) {
            this.openWithContent(params);
        }
    },
    /**
     * @function
     * @description Closes the dialog
     */
    close: function close() {
        if (!this.$container) {
            return;
        }
        this.$container.dialog('close');
    },
    /**
     * @function
     * @description Submits the dialog form with the given action
     * @param {String} The action which will be triggered upon form submit
     */
    submit: function submit(action) {
        var $form = this.$container.find('form:first');
        // set the action
        $('<input/>').attr({
            name: action,
            type: 'hidden'
        }).appendTo($form);
        // serialize the form and get the post url
        var data = $form.serialize();
        var url = $form.attr('action');
        // make sure the server knows this is an ajax request
        if (data.indexOf('ajax') === -1) {
            data += '&format=ajax';
        }
        // post the data and replace current content with response content
        $.ajax({
            type: 'POST',
            url: url,
            data: data,
            dataType: 'html',
            success: function (html) {
                this.$container.html(html);
                $('.ui-dialog-content:visible').each(function () {
                    $(this).dialog('option', 'position', $(this).dialog('option', 'position'));
                });
            }.bind(this),
            failure: function failure() {
                window.alert(Resources.SERVER_ERROR);
            }
        });
    },
    exists: function exists() {
        return this.$container && this.$container.length > 0;
    },
    isActive: function isActive() {
        return this.exists() && this.$container.children.length > 0;
    },
    settings: {
        autoOpen: false,
        height: 'auto',
        modal: true,
        overlay: {
            opacity: 0.5,
            background: 'black'
        },
        resizable: false,
        title: '',
        width: '800',
        close: function close() {
            $(this).dialog('close');
        },
        position: {
            my: 'center',
            at: 'center',
            of: window,
            collision: 'flipfit'
        }
    }
};

module.exports = dialog;

},{"./ajax":15,"./util":63,"imagesloaded":4,"lodash":5}],24:[function(require,module,exports){
'use strict';

var ajax = require('./ajax'),
    util = require('./util'),
    tooltip = require('./tooltip'),
    validator = require('./validator'),
    dialog = require('./dialog');

var setDialogify = function setDialogify(e) {
    e.preventDefault();
    var actionSource = $(this),
        dlgAction = $(actionSource).data('dlg-action') || {},
        // url, target, isForm
    dlgOptions = $.extend({}, dialog.settings, $(actionSource).data('dlg-options') || {});

    dlgOptions.title = dlgOptions.title || $(actionSource).attr('title') || '';

    var url = dlgAction.url // url from data
    || (dlgAction.isForm ? $(actionSource).closest('form').attr('action') : null) // or url from form action if isForm=true
    || $(actionSource).attr('href'); // or url from href

    if (!url) {
        return;
    }

    var form = jQuery(this).parents('form');
    var method = form.attr('method') || 'POST';

    if (actionSource[0].tagName === 'BUTTON' && !form.valid() || actionSource[0].tagName === 'INPUT' && !form.valid()) {
        return false;
    }

    // if this is a content link, update url from Page-Show to Page-Include
    if ($(this).hasClass('attributecontentlink')) {
        var uri = util.getUri(url);
        url = Urls.pageInclude + uri.query;
    }
    var postData;
    if (method && method.toUpperCase() === 'POST') {
        postData = form.serialize() + '&' + jQuery(this).attr('name') + '=submit';
    } else {
        if (url.indexOf('?') === -1) {
            url += '?';
        } else {
            url += '&';
        }
        url += form.serialize();
        url = util.appendParamToURL(url, jQuery(this).attr('name'), 'submit');
    }

    var dlg = dialog.create({
        target: dlgAction.target,
        options: dlgOptions
    });

    ajax.load({
        url: $(actionSource).attr('href') || $(actionSource).closest('form').attr('action'),
        target: dlg,
        callback: function callback() {
            dlg.dialog('open'); // open after load to ensure dialog is centered
            validator.init();
            tooltip.init();
            if (dlg.find('.closedialog').length > 0) {
                dialog.close();
            }
        },
        data: !$(actionSource).attr('href') ? postData : null,
        type: method

    });
};

exports.setDialogify = setDialogify;

},{"./ajax":15,"./dialog":23,"./tooltip":61,"./util":63,"./validator":64}],25:[function(require,module,exports){
'use strict';

var ajax = require('./ajax'),
    minicart = require('./minicart'),
    util = require('./util');

var setAddToCartHandler = function setAddToCartHandler(e) {
    e.preventDefault();
    var form = $(this).closest('form');

    var options = {
        url: util.ajaxUrl(form.attr('action')),
        method: 'POST',
        cache: false,
        data: form.serialize()
    };
    $.ajax(options).done(function (response) {
        if (response.success) {
            ajax.load({
                url: Urls.minicartGC,
                data: {
                    lineItemId: response.result.lineItemId
                },
                callback: function callback(response) {
                    minicart.show(response);
                    form.find('input,textarea').val('');
                }
            });
        } else {
            form.find('span.error').hide();
            for (var id in response.errors.FormErrors) {
                var $errorEl = $('#' + id).addClass('error').removeClass('valid').next('.error');
                if (!$errorEl || $errorEl.length === 0) {
                    $errorEl = $('<span for="' + id + '" generated="true" class="error" style=""></span>');
                    $('#' + id).after($errorEl);
                }
                $errorEl.text(response.errors.FormErrors[id].replace(/\\'/g, '\'')).show();
            }
        }
    }).fail(function (xhr, textStatus) {
        // failed
        if (textStatus === 'parsererror') {
            window.alert(Resources.BAD_RESPONSE);
        } else {
            window.alert(Resources.SERVER_CONNECTION_ERROR);
        }
    });
};

exports.init = function () {
    $('#AddToBasketButton').on('click', setAddToCartHandler);
};

},{"./ajax":15,"./minicart":30,"./util":63}],26:[function(require,module,exports){
'use strict';

var //uievents = require('./uievents'),
dialog = require('./dialog'),
    progress = require('./progress');

//var $con = $('body');
var appGlobal = {
    globalTimer: 0
};
var headerEvents = {
    initializeEvent: function initializeEvent() {
        $('body').find('input, select.input-select').focusin(function () {
            $(this).closest('.formfield').removeClass('inputlabel');
            $(this).closest('.formfield').find('.form-row , .label span').removeClass('inputlabel');
            $(this).removeClass('errorclient');
            $(this).closest('.formfield').find('.logerror , .existing_register').css('display', 'none');
        });
        if ($('.logincustomers').length > 0) {
            var crrobj = $(this).find('.formfield  .logerror');
            $(crrobj).closest('.formfield').find('.form-row , .label span').removeClass('inputlabel');
        }

        $('.privacy-policy').on('click', function (e) {
            e.preventDefault();
            dialog.open({
                url: $(e.target).attr('href'),
                options: {
                    height: 600
                }
            });
        });
        //label text color change on submit
        if ($('.account-logs').length > 0 || $('.new-register').length > 0 || $('.wish-logs').length > 0 || $('.createan-account').length > 0 || $('.headercustomerinfo').length > 0 || $('.ui-login').length > 0 || $('.passwordreset').length > 0) {
            $('.formactions button').click(function () {
                $('span.existing_register').hide();
                var crrobj = $(this).closest('form').find('.field-wrapper .required');
                $(crrobj).each(function () {
                    if ($(this).hasClass('errorclient')) {
                        $(this).closest('.formfield').find('.label .labeltext').addClass('inputlabel');
                        $(this).closest('.formfield').find('.label .requiredindicator').addClass('inputlabel');
                    } else {
                        $(this).closest('.formfield').find('.label .labeltext').removeClass('inputlabel');
                        $(this).closest('.formfield').find('.label .requiredindicator').removeClass('inputlabel');
                    }
                });
            });
        }
        //login & wish list validations
        if ($('.account-logs').length > 0 || $('.new-register').length > 0 || $('.wish-logs').length > 0 || $('.createan-account').length > 0 || $('.headercustomerinfo').length > 0 || $('.ui-login').length > 0) {
            $('a.clearbutton').click(function () {
                $(this).closest('.formfield').find('input').val('');
                $(this).closest('.formfield').find('textarea').val('');
                $(this).closest('.field-wrapper').find('span').remove();
                $(this).closest('.field-wrapper').find('.required').removeClass('errorclient');
                $(this).closest('.formfield').find('a.clearbutton').hide();
                $(this).closest('.formfield ').find('.form-row').removeClass('inputlabel');
                $(this).closest('.formfield').find('.form-row , .label span').removeClass('inputlabel');
                $(this).closest('.formfield').find('span.logerror , .existing_register').hide();
            });
        }
        $('.ui-login .sign-up-blk > a').on('mouseenter click', function (e) {
            if ($(window).width() < 960) {
                return true;
            } else {
                if (e.type == 'click' && $('.accountcontent').is(':visible')) {
                    clearTimeout(appGlobal.globalTimer);
                    //appGlobal.globalTimer == 0;
                    $('.accountcontent').hide();
                    $('.headermask').hide();
                    $('.confirmationcontainer').hide();
                    return false;
                }
                if ($('.header-create').is(':visible')) {
                    return false;
                }
                $('.accountcontent').removeClass('js-entered');
                $('.accountcontent').hide();
                $('.sign-up-blk').addClass('js-active');
                if (!$(this).closest('.ui-login').find('.header-sign-in').is(':visible')) {
                    headerEvents.accountContPos($('.ui-login .sign-up-blk > a'), $(this).closest('.ui-login').find('.header-sign-in'));
                    $(this).closest('.ui-login').find('.header-sign-in').show();
                }
                $('.headermask').show();
                /*if(appGlobal.util.readCookie("emailId")){
                    $('.header-sign-in.accountcontent .guestemail').val(appGlobal.util.readCookie("emailId"));
                    $('.header-sign-in.accountcontent .login_password').removeAttr('placeholder').val('');
                }*/
                clearTimeout(appGlobal.globalTimer);
                //appGlobal.globalTimer == 0;
                appGlobal.globalTimer = setTimeout(function () {
                    $('.accountcontent').hide();
                    $('.headermask').hide();
                    $('.headercustomerinfo').find('.js-active').removeClass('js-active');
                }, 5000);
                $('.confirmationcontainer').hide();
            }
        });
        $('.signingin').click(function (e) {
            e.preventDefault();
            $('.accountcontent').hide();
            var validator = $(this).closest('form').validate();
            if (validator.element($(this).closest('form').find('.guestemail'))) {
                $('.accountcontent .guestemail').val($(this).closest('.accountcontent').find('.guestemail').val());
                $('.accountcontent .guestemail').removeClass('error');
                $('.accountcontent .guestemail').next('span.error').remove();
                $('.login_password').removeClass('error');
                $('.login_password').next('span.error').remove();
                $('.accountcontent .guestemail').addClass('click-mark valid');
            }
            $(this).closest('.ui-login').find('.header-sign-in').show();
            $('.header-sign-in .signin_main .loginfail.errormessage').hide();
            $('.headermask').addClass('no-hide').show();
        });

        $('.sign-message a, .ExistedUser-error .createaccount').click(function (e) {
            e.preventDefault();
            $('.accountcontent').hide();
            $(this).closest('.ui-login').find('.header-create').show();
            var validator = $(this).closest('form').validate();
            if (validator.element($(this).closest('form').find('.guestemail'))) {
                $('.accountcontent .guestemail').val($(this).closest('.accountcontent').find('.guestemail').val());
                $('.accountcontent .guestemail').removeClass('error');
                $('.accountcontent .guestemail').next('span.error').remove();
                $('.accountcontent .guestemail').addClass('click-mark valid');
            }
            headerEvents.accountContPos($('.ui-login .sign-up-blk > a'), $(this).closest('.ui-login').find('.header-create'));
            $('.headermask').show();
            $('.ExistedUser-error').hide();
            clearTimeout(appGlobal.globalTimer);
            //appGlobal.globalTimer == 0;
            appGlobal.globalTimer = setTimeout(function () {
                $('.accountcontent').hide();
                $('.headermask').hide();
                $('.headercustomerinfo').find('.js-active').removeClass('js-active');
            }, 5000);
        });

        $('.forgot-password a').click(function (e) {
            e.preventDefault();
            $('.accountcontent').hide();
            $('.header-forgot-pwd span.reset_email_error').hide();
            $(this).closest('.ui-login').find('.header-forgot-pwd').show();
            headerEvents.accountContPos($('.ui-login .sign-up-blk > a'), $(this).closest('.ui-login').find('.header-forgot-pwd'));
            $('.headermask').show();
            var validator = $(this).closest('form').validate({
                onkeyup: false
            });
            if (validator.element($(this).closest('form').find('.guestemail'))) {
                $('.accountcontent .guestemail').val($(this).closest('.accountcontent').find('.guestemail').val());
                $('.accountcontent .guestemail').removeClass('error');
                $('.accountcontent .guestemail').next('span.error').remove();
                $('.accountcontent .guestemail').addClass('click-mark valid');
            }
            clearTimeout(appGlobal.globalTimer);
            //appGlobal.globalTimer == 0;
            appGlobal.globalTimer = setTimeout(function () {
                $('.accountcontent').hide();
                $('.headermask').hide();
                $('.headercustomerinfo').find('.js-active').removeClass('js-active');
            }, 5000);
        });

        $('.accountcontent').mouseenter(function () {
            $('.headermask').removeClass('no-hide');
            $('.headermask').show();
            $('.confirmationcontainer').hide();
            $('.sign-up-blk').addClass('js-active');
            clearTimeout(appGlobal.globalTimer);
            //appGlobal.globalTimer == 0;
        });

        $('.headermask').click(function (e) {
            headerEvents.maskEvent(e);
        });

        $('.headermask').mouseenter(function (e) {
            headerEvents.maskEvent(e);
        });
        $('.accountcontent').mouseenter(function () {
            $('.headermask').removeClass('no-hide');
            $('.headermask').show();
            $('.confirmationcontainer').hide();
            $('.sign-up-blk').addClass('js-active');
            clearTimeout(appGlobal.globalTimer);
            //appGlobal.globalTimer == 0;
        });
        $('.user-account').on('click', function (e) {
            e.preventDefault();
            $(this).parent('.user-info').toggleClass('active');
        });
        $('.change-regionnew').mouseenter(function () {
            $('.domainswitch-header').show();
            $('.headermask').show();
        });
        $('.change-region').mouseenter(function () {
            jQuery('.domainswitch').show();
            $('.region_overlay').show();
        });
        $('.region_overlay').mouseenter(function () {
            jQuery('.domainswitch').hide();
            $(this).hide();
        });
        $('button').on('click', function () {
            if ($('.resetpassword').is(':Visible')) {
                $('.resetpassword').closest('div.dialog-content').addClass('confirmationcontainer');
            }
        });
        $('.sample-section').click(function () {
            if (!$(this).find('.sample_mail_main').is(':visible')) {
                $(this).find('.sample_mail_main').slideDown(500);
            }
        });
        $('.signupfor-email .seesamples').click(function () {
            $(this).closest('.signupfor-email').find('.sample_mail_main').slideToggle(500);
        });

        $('body').click(function (event) {
            if (!$(event.target).is('.signupfor-email .seesamples') && !$(event.target).is('.create_email_checkbox .seesamples')) {
                $('.sample_mail_main').slideUp(500);
            }
        });
        /**This is used to get the tick mark for create account when the field is valid*/
        $('.ui-login input.required').blur(function () {
            if ($(this).hasClass('valid')) {
                $(this).addClass('click-mark');
            } else {
                $(this).removeClass('click-mark');
            }
        });

        $('.back-link, .signingin').click(function () {
            $('.accountcontent').hide();
            $(this).closest('.ui-login').find('.header-sign-in').show();
            $('.header-sign-in .signin_main .loginfail.errormessage').hide();
        });

        $('.forgot_create').click(function () {
            $('.header-forgot-pwd').hide();
            $('.header-create').show();
            $('.header-create .errormessage').hide();
        });

        $('.loggeduser a, .headercustomerinfo .second_name').on('mouseenter', function (e) {
            e.preventDefault();
            if ($('.rapala_device').length == 0) {
                $('.accountcontent').hide();
                headerEvents.accountContPos($('.headercustomerinfo .loggeduser a'), $('.user-info'));
                $('.user-info').show();
            }
        });

        $('.rapala_device .loggeduser a,.headercustomerinfo .second_name').on('click', function (e) {
            e.preventDefault();
            $('.accountcontent').hide();
            headerEvents.accountContPos($('.headercustomerinfo .loggeduser a'), $('.user-info'));
            $('.user-info').show();
            $('.headermask').show();
        });
        jQuery(window).bind('message', function (e) {
            var str;
            e = e.originalEvent;
            if (e.origin.indexOf(document.location.host) === -1) {
                return;
            }
            var obj = e.data;
            try {
                str = JSON.parse(obj);
            } catch (err) {
                return;
            }
            if (str.process !== 'sign-in') {
                return;
            }

            if (str.status === 'success') {
                if (typeof str.email === 'string') {
                    headerEvents.userCookie(str.email);
                }
                document.location.reload(true);
            } else {
                $('.ExistedUser-error').hide();
                $('.custom_signin').find('.loading').remove();
                progress.hide();
                $('.custom_signin input[type="text"], .custom_signin input[type="password"]').addClass('errorclient');
                $('.loginfail').show();
                $('.accountcontent .loading').remove();
            }
        });
        jQuery('.signin-button').click(function (e) {
            e.preventDefault();
            var realForm = $(this).closest('form');
            if (!realForm.valid()) {
                return false;
            }
            $('.loginfail').hide();
            progress.show('.header-sign-in.accountcontent');
            var iframeId = 'js-header-signin-iframe';
            var formId = 'js-header-signin-form';
            $('#' + iframeId).remove();
            $('#' + formId).remove();
            var $form = $('<form></form>');
            $form.attr('id', formId);
            $form.attr('action', realForm.attr('action'));
            $form.attr('target', iframeId);
            $form.attr('method', 'POST');

            $('<iframe name="' + iframeId + '" id="' + iframeId + '" />').appendTo('body');
            $('#' + iframeId).attr('style', 'display: none;');

            realForm.find('input, select, textarea').each(function () {
                var $input = $(this).clone();
                $form.append($input);
            });

            $('body').append($form);
            $form.hide();
            $form.submit();
        });
        /*$(".PasswordResetForm").on("keyup",".guestemail",function(e){
                if(e.keyCode == 13) {
                    $('.lost_btn .send').trigger("click");
                }
            });*/
        $('.PasswordResetForm').unbind('submit').on('submit', function (e) {
            $('.header-forgot-pwd span.reset_email_error').hide();
            $('.lost_btn .send').addClass('clickedButton');
            e.preventDefault();
            var $form = $(this);
            if (!$form.valid()) {
                return false;
            }
            progress.show('.header-forgot-pwd.accountcontent');
            $.ajax({
                dataType: 'html',
                url: $form.attr('action'),
                data: $form.serialize(),
                success: function success(data) {
                    if ($(data).find('div#messages.error').length > 0) {
                        progress.hide();
                        $('.header-forgot-pwd').show();
                        $('.header-forgot-pwd span.reset_email_error').show();
                        $('.accountcontent .loading').remove();
                    } else {
                        progress.hide();
                        $('.header-forgot-pwd').hide();
                        $('.confirmationcontainer').fadeIn(400);
                        //to display the messeage
                        headerEvents.initializeEvent();
                        headerEvents.accountContPos($('.ui-login .sign-up-blk > a'), $('.confirmationcontainer'));
                        $('.accountcontent .loading').remove();
                        $('.confirmationcontainer').find('.headermask').hide();
                        $('.confirmationcontainer').delay(4000).fadeOut();
                    }
                }
            });
            return false;
        });
        jQuery(window).bind('message', function (e) {
            var str;
            e = e.originalEvent;
            if (e.origin.indexOf(document.location.host) === -1) {
                return;
            }
            var obj = e.data;
            try {
                str = JSON.parse(obj);
            } catch (err) {
                return;
            }
            if (str.process !== 'create-account') {
                return;
            }

            if (str.status === 'success') {
                if (typeof str.email === 'string') {
                    headerEvents.userCookie(str.email);
                }
                $.ajax({
                    dataType: 'html',
                    url: document.location.toString(),
                    success: function success(data) {
                        progress.hide();
                        $('.headermask').removeClass('no-hide').hide();
                        $('.header-sign-in.accountcontent').remove();
                        $('.headercustomerinfo #user').html($(data).find('#user').html());
                        $('#userinfo').html($(data).find('#userinfo').html());
                        headerEvents.accountContPos($('.headercustomerinfo .loggeduser a'), $('.congrats-message.accountcontent'));
                        $('.congrats-message').fadeIn(400).show().delay(3000).fadeOut(400);
                        headerEvents.initializeEvent();
                    }
                });
            } else {
                $('.accountcontent').hide();
                progress.hide();
                $('.ExistedUser-error').show();
                $('.errormessage').hide();
                $('.ui-login').find('.header-sign-in').show();
                //$('.ui-login').find('.header-sign-in .accountemail').val(emailId);
                $('.accountcontent .guestemail').removeClass('errorclient');
                $('.accountcontent .guestemail').next('span.errorclient').remove();
                $('.ui-login').find('.header-sign-in .accountemail').addClass('click-mark valid');
                $('.headermask').addClass('no-hide').show();
                $('.custom_signup input[type="text"], .custom_signup input[type="password"]').removeClass('errorclient');
            }
        });

        jQuery('.create-account').unbind('click').click(function (e) {
            e.preventDefault();
            var realForm = $(this).closest('form');
            if (!realForm.valid()) {
                return false;
            }
            progress.show('.header-create.accountcontent');
            var iframeId = 'js-header-create-account-iframe';
            var formId = 'js-header-create-account-form';
            $('#' + iframeId).remove();
            $('#' + formId).remove();
            var $form = $('<form></form>');
            $form.attr('id', formId);
            $form.attr('action', realForm.attr('action'));
            $form.attr('target', iframeId);
            $form.attr('method', 'POST');

            $('<iframe name="' + iframeId + '" id="' + iframeId + '" />').appendTo('body');
            $('#' + iframeId).attr('style', 'display: none;');

            realForm.find('input, select, textarea').each(function () {
                var $input = $(this).clone();
                $form.append($input);
            });

            $('body').append($form);
            $form.hide();
            $form.submit();
        });

        if ($('#user').length > 0) {
            firstnamesplit();
        }

        function firstnamesplit() {
            var firstname = $('.loggeduser > a span.username').text();
            var firstnameWords = firstname.split(' ');
            var textlength = 0;
            var limit = 19;
            var nameLength = $('.loggeduser > a span.username').text() + ' ' + $.trim($('.loggeduser > a .prostaff-header.badge-header').text());
            if (nameLength.length <= 19) {
                $('.loggeduser > a span.username').text($('.loggeduser > a span.username').text() + ' ' + $.trim($('.loggeduser > a .prostaff-header.badge-header').text()));
                $('.loggeduser > a .prostaff-header.badge-header').remove();
            } else if (firstnameWords.length > 0) {
                $('.loggeduser > a span.username').text('');
                if ($('.loggeduser > a span.username .first_name').length == 0) {
                    $('.loggeduser > a span.username').html('<span class="first_name"></span>');
                }
                if ($('.headercustomerinfo .second_name').length == 0) {
                    $('.headercustomerinfo').append('<span class="second_name"></span>');
                }

                var fName = $('.loggeduser > a span.username span.first_name').eq(0);
                var Lname = $('.headercustomerinfo > .second_name');

                jQuery.each(firstnameWords, function (i, v) {
                    textlength = textlength == 0 ? textlength + v.length : textlength + v.length + 1;
                    if (i == 0 && v.length > limit) {
                        fName.text(v.substr(0, 16) + '...');
                    } else if (textlength < 20) {
                        if (fName.text().length == 0) {
                            fName.text(v);
                        } else {
                            fName.text(fName.text() + ' ' + v);
                        }
                    } else {
                        if (Lname.text().length == 0) {
                            Lname.text(v);
                        } else {
                            Lname.text(Lname.text() + ' ' + v);
                        }
                    }
                });
                Lname.text(Lname.text() + ' ' + $.trim($('.loggeduser > a .badge-mini').text()));
                if ($('#user .loggeduser').width() > Lname.width()) {
                    $('.loggeduser').append(Lname.clone());
                    Lname.remove();
                }
                $('.loggeduser > a .prostaff-header.badge-header').remove();
                $('.loggeduser > a .badge-mini').remove();
            } else {
                $('.loggeduser > a span.username span').hide();
            }
        }

        $('.accountcontent input[type="text"], .accountcontent input[type="password"]').bind('keyup', function (e) {
            var keycode = e.keyCode ? e.keyCode : e.which;
            if (!$(this).closest('.accountcontent').hasClass('js-entered')) {
                $(this).closest('.accountcontent').addClass('js-entered');
            }

            if (keycode == 13) {
                $(this).closest('form').find('.formactions button').trigger('click');
            }
            clearTimeout(appGlobal.globalTimer);
            //appGlobal.globalTimer == 0;
        });

        $('.rapala_device .user-profile a').on('hover', function () {
            window.location.href = $(this).attr('href');
        });
    },
    /** ON HOVER */
    accountContPos: function accountContPos($source, $destiny) {
        var leftPos = $source.offset().left + $source.width() - $('.headercustomerinfo').offset().left - $destiny.width() / 2;
        var arrowPos = ($destiny.width() - $destiny.find('.top_arrow').width()) / 2 - 4;
        $('.accountcontent .loading').remove();
        if ($destiny.length != 0) {
            $destiny.css('left', leftPos);
            $destiny.find('.top_arrow').css('left', arrowPos);
        }
        $('.accountcontent .formfield .label .errorlabel').addClass('labeltext').removeClass('errorlabel');
    },
    userCookie: function userCookie() {
        var dateObj = new Date();
        dateObj.setTime(dateObj.getTime() + 365 * 24 * 60 * 60 * 1000);
        //document.cookie="emailId="+$val+"; expires="+dateObj.toUTCString()+"; path=/";
    },
    maskEvent: function maskEvent(ele) {
        $('.domainswitch-header').hide();
        $('.domainswitch').hide();
        if (!$('.headermask').hasClass('no-hide')) {
            clearTimeout(appGlobal.globalTimer);
            //appGlobal.globalTimer == 0;
            if (ele.type != 'click' && $('.rapala_device').length == 0 && ele.pageY > 60 && ele.pageY < 100) {
                $('.headermask').hide();
            }
            if (ele.type == 'click') {
                $('.headermask').hide();
                $('.accountcontent').hide();
                $('.headercustomerinfo').find('.js-active').removeClass('js-active');
            } else {
                clearTimeout(appGlobal.globalTimer);
                //appGlobal.globalTimer == 0;
                if ($('.accountcontent:visible').hasClass('js-entered')) {
                    appGlobal.globalTimer = setTimeout(function () {
                        $('.accountcontent').hide();
                        $('.headermask').hide();
                    }, 5000);
                } else {
                    $('.accountcontent').hide();
                    $('.headermask').hide();
                }
            }
        }
    }
};
var headerinit = {
    init: function init() {
        headerEvents.initializeEvent();
    }
};

module.exports = headerinit;

},{"./dialog":23,"./progress":52}],27:[function(require,module,exports){
'use strict';
// jQuery extensions

module.exports = function () {
    // params
    // toggleClass - required
    // triggerSelector - optional. the selector for the element that triggers the event handler. defaults to the child elements of the list.
    // eventName - optional. defaults to 'click'
    $.fn.toggledList = function (options) {
        if (!options.toggleClass) {
            return this;
        }
        var list = this;
        return list.on(options.eventName || 'click', options.triggerSelector || list.children(), function (e) {
            e.preventDefault();
            var classTarget = options.triggerSelector ? $(this).parent() : $(this);
            classTarget.toggleClass(options.toggleClass);
            // execute callback if exists
            if (options.callback) {
                options.callback();
            }
        });
    };

    $.fn.syncHeight = function () {
        var arr = $.makeArray(this);
        arr.sort(function (a, b) {
            return $(a).height() - $(b).height();
        });
        return this.height($(arr[arr.length - 1]).height());
    };
};

},{}],28:[function(require,module,exports){
'use strict';

/**
 * @name MarkerWithLabel for V3
 * @version 1.1.9 [June 30, 2013]
 * @author Gary Little (inspired by code from Marc Ridey of Google).
 * @copyright Copyright 2012 Gary Little [gary at luxcentral.com]
 * @fileoverview MarkerWithLabel extends the Google Maps JavaScript API V3
 *  <code>google.maps.Marker</code> class.
 *  <p>
 *  MarkerWithLabel allows you to define markers with associated labels. As you would expect,
 *  if the marker is draggable, so too will be the label. In addition, a marker with a label
 *  responds to all mouse events in the same manner as a regular marker. It also fires mouse
 *  events and "property changed" events just as a regular marker would. Version 1.1 adds
 *  support for the raiseOnDrag feature introduced in API V3.3.
 *  <p>
 *  If you drag a marker by its label, you can cancel the drag and return the marker to its
 *  original position by pressing the <code>Esc</code> key. This doesn't work if you drag the marker
 *  itself because this feature is not (yet) supported in the <code>google.maps.Marker</code> class.
 */

/*!
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *		http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/* eslint-disable */

/**
 * @param {Function} childCtor Child class.
 * @param {Function} parentCtor Parent class.
 */

function inherits(childCtor, parentCtor) {
    /** @constructor */
    function TempCtor() {}
    TempCtor.prototype = parentCtor.prototype;
    childCtor.superClass_ = parentCtor.prototype;
    childCtor.prototype = new TempCtor();
    /** @override */
    childCtor.prototype.constructor = childCtor;
}

/**
 * This constructor creates a label and associates it with a marker.
 * It is for the private use of the MarkerWithLabel class.
 * @constructor
 * @param {Marker} marker The marker with which the label is to be associated.
 * @param {string} crossURL The URL of the cross image =.
 * @private
 */
function MarkerLabel_(marker, crossURL) {
    this.marker_ = marker;
    this.handCursorURL_ = marker.handCursorURL;

    this.labelDiv_ = document.createElement('div');
    this.labelDiv_.style.cssText = 'position: absolute; overflow: hidden;';

    // Set up the DIV for handling mouse events in the label. This DIV forms a transparent veil
    // in the "overlayMouseTarget" pane, a veil that covers just the label. This is done so that
    // events can be captured even if the label is in the shadow of a google.maps.InfoWindow.
    // Code is included here to ensure the veil is always exactly the same size as the label.
    this.eventDiv_ = document.createElement('div');
    this.eventDiv_.style.cssText = this.labelDiv_.style.cssText;

    // This is needed for proper behavior on MSIE:
    this.eventDiv_.setAttribute('onselectstart', 'return false;');
    this.eventDiv_.setAttribute('ondragstart', 'return false;');

    // Get the DIV for the "X" to be displayed when the marker is raised.
    this.crossDiv_ = MarkerLabel_.getSharedCross(crossURL);
}
if (typeof google !== 'undefined') {
    inherits(MarkerLabel_, google.maps.OverlayView);
}

/**
 * Returns the DIV for the cross used when dragging a marker when the
 * raiseOnDrag parameter set to true. One cross is shared with all markers.
 * @param {string} crossURL The URL of the cross image =.
 * @private
 */
MarkerLabel_.getSharedCross = function (crossURL) {
    var div;
    if (typeof MarkerLabel_.getSharedCross.crossDiv === 'undefined') {
        div = document.createElement('img');
        div.style.cssText = 'position: absolute; z-index: 1000002; display: none;';
        // Hopefully Google never changes the standard "X" attributes:
        div.style.marginLeft = '-8px';
        div.style.marginTop = '-9px';
        div.src = crossURL;
        MarkerLabel_.getSharedCross.crossDiv = div;
    }
    return MarkerLabel_.getSharedCross.crossDiv;
};

/**
 * Adds the DIV representing the label to the DOM. This method is called
 * automatically when the marker's <code>setMap</code> method is called.
 * @private
 */
MarkerLabel_.prototype.onAdd = function () {
    var me = this;
    var cMouseIsDown = false;
    var cDraggingLabel = false;
    var cSavedZIndex;
    var cLatOffset, cLngOffset;
    var cIgnoreClick;
    var cRaiseEnabled;
    var cStartPosition;
    var cStartCenter;
    // Constants:
    var cRaiseOffset = 20;
    var cDraggingCursor = 'url(' + this.handCursorURL_ + ')';

    // Stops all processing of an event.
    //
    var cAbortEvent = function cAbortEvent(e) {
        if (e.preventDefault) {
            e.preventDefault();
        }
        e.cancelBubble = true;
        if (e.stopPropagation) {
            e.stopPropagation();
        }
    };

    var cStopBounce = function cStopBounce() {
        me.marker_.setAnimation(null);
    };

    this.getPanes().overlayImage.appendChild(this.labelDiv_);
    this.getPanes().overlayMouseTarget.appendChild(this.eventDiv_);
    // One cross is shared with all markers, so only add it once:
    if (typeof MarkerLabel_.getSharedCross.processed === 'undefined') {
        this.getPanes().overlayImage.appendChild(this.crossDiv_);
        MarkerLabel_.getSharedCross.processed = true;
    }

    this.listeners_ = [google.maps.event.addDomListener(this.eventDiv_, 'mouseover', function (e) {
        if (me.marker_.getDraggable() || me.marker_.getClickable()) {
            this.style.cursor = 'pointer';
            google.maps.event.trigger(me.marker_, 'mouseover', e);
        }
    }), google.maps.event.addDomListener(this.eventDiv_, 'mouseout', function (e) {
        if ((me.marker_.getDraggable() || me.marker_.getClickable()) && !cDraggingLabel) {
            this.style.cursor = me.marker_.getCursor();
            google.maps.event.trigger(me.marker_, 'mouseout', e);
        }
    }), google.maps.event.addDomListener(this.eventDiv_, 'mousedown', function (e) {
        cDraggingLabel = false;
        if (me.marker_.getDraggable()) {
            cMouseIsDown = true;
            this.style.cursor = cDraggingCursor;
        }
        if (me.marker_.getDraggable() || me.marker_.getClickable()) {
            google.maps.event.trigger(me.marker_, 'mousedown', e);
            cAbortEvent(e); // Prevent map pan when starting a drag on a label
        }
    }), google.maps.event.addDomListener(document, 'mouseup', function (mEvent) {
        var position;
        if (cMouseIsDown) {
            cMouseIsDown = false;
            me.eventDiv_.style.cursor = 'pointer';
            google.maps.event.trigger(me.marker_, 'mouseup', mEvent);
        }
        if (cDraggingLabel) {
            if (cRaiseEnabled) {
                // Lower the marker & label
                position = me.getProjection().fromLatLngToDivPixel(me.marker_.getPosition());
                position.y += cRaiseOffset;
                me.marker_.setPosition(me.getProjection().fromDivPixelToLatLng(position));
                // This is not the same bouncing style as when the marker portion is dragged,
                // but it will have to do:
                try {
                    // Will fail if running Google Maps API earlier than V3.3
                    me.marker_.setAnimation(google.maps.Animation.BOUNCE);
                    setTimeout(cStopBounce, 1406);
                } catch (e) {}
            }
            me.crossDiv_.style.display = 'none';
            me.marker_.setZIndex(cSavedZIndex);
            cIgnoreClick = true; // Set flag to ignore the click event reported after a label drag
            cDraggingLabel = false;
            mEvent.latLng = me.marker_.getPosition();
            google.maps.event.trigger(me.marker_, 'dragend', mEvent);
        }
    }), google.maps.event.addListener(me.marker_.getMap(), 'mousemove', function (mEvent) {
        var position;
        if (cMouseIsDown) {
            if (cDraggingLabel) {
                // Change the reported location from the mouse position to the marker position:
                mEvent.latLng = new google.maps.LatLng(mEvent.latLng.lat() - cLatOffset, mEvent.latLng.lng() - cLngOffset);
                position = me.getProjection().fromLatLngToDivPixel(mEvent.latLng);
                if (cRaiseEnabled) {
                    me.crossDiv_.style.left = position.x + 'px';
                    me.crossDiv_.style.top = position.y + 'px';
                    me.crossDiv_.style.display = '';
                    position.y -= cRaiseOffset;
                }
                me.marker_.setPosition(me.getProjection().fromDivPixelToLatLng(position));
                if (cRaiseEnabled) {
                    // Don't raise the veil; this hack needed to make MSIE act properly
                    me.eventDiv_.style.top = position.y + cRaiseOffset + 'px';
                }
                google.maps.event.trigger(me.marker_, 'drag', mEvent);
            } else {
                // Calculate offsets from the click point to the marker position:
                cLatOffset = mEvent.latLng.lat() - me.marker_.getPosition().lat();
                cLngOffset = mEvent.latLng.lng() - me.marker_.getPosition().lng();
                cSavedZIndex = me.marker_.getZIndex();
                cStartPosition = me.marker_.getPosition();
                cStartCenter = me.marker_.getMap().getCenter();
                cRaiseEnabled = me.marker_.get('raiseOnDrag');
                cDraggingLabel = true;
                me.marker_.setZIndex(1000000); // Moves the marker & label to the foreground during a drag
                mEvent.latLng = me.marker_.getPosition();
                google.maps.event.trigger(me.marker_, 'dragstart', mEvent);
            }
        }
    }), google.maps.event.addDomListener(document, 'keydown', function (e) {
        if (cDraggingLabel) {
            if (e.keyCode === 27) {
                // Esc key
                cRaiseEnabled = false;
                me.marker_.setPosition(cStartPosition);
                me.marker_.getMap().setCenter(cStartCenter);
                google.maps.event.trigger(document, 'mouseup', e);
            }
        }
    }), google.maps.event.addDomListener(this.eventDiv_, 'click', function (e) {
        if (me.marker_.getDraggable() || me.marker_.getClickable()) {
            if (cIgnoreClick) {
                // Ignore the click reported when a label drag ends
                cIgnoreClick = false;
            } else {
                google.maps.event.trigger(me.marker_, 'click', e);
                cAbortEvent(e); // Prevent click from being passed on to map
            }
        }
    }), google.maps.event.addDomListener(this.eventDiv_, 'dblclick', function (e) {
        if (me.marker_.getDraggable() || me.marker_.getClickable()) {
            google.maps.event.trigger(me.marker_, 'dblclick', e);
            cAbortEvent(e); // Prevent map zoom when double-clicking on a label
        }
    }), google.maps.event.addListener(this.marker_, 'dragstart', function () {
        if (!cDraggingLabel) {
            cRaiseEnabled = this.get('raiseOnDrag');
        }
    }), google.maps.event.addListener(this.marker_, 'drag', function () {
        if (!cDraggingLabel) {
            if (cRaiseEnabled) {
                me.setPosition(cRaiseOffset);
                // During a drag, the marker's z-index is temporarily set to 1000000 to
                // ensure it appears above all other markers. Also set the label's z-index
                // to 1000000 (plus or minus 1 depending on whether the label is supposed
                // to be above or below the marker).
                me.labelDiv_.style.zIndex = 1000000 + (this.get('labelInBackground') ? -1 : +1);
            }
        }
    }), google.maps.event.addListener(this.marker_, 'dragend', function () {
        if (!cDraggingLabel) {
            if (cRaiseEnabled) {
                me.setPosition(0); // Also restores z-index of label
            }
        }
    }), google.maps.event.addListener(this.marker_, 'position_changed', function () {
        me.setPosition();
    }), google.maps.event.addListener(this.marker_, 'zindex_changed', function () {
        me.setZIndex();
    }), google.maps.event.addListener(this.marker_, 'visible_changed', function () {
        me.setVisible();
    }), google.maps.event.addListener(this.marker_, 'labelvisible_changed', function () {
        me.setVisible();
    }), google.maps.event.addListener(this.marker_, 'title_changed', function () {
        me.setTitle();
    }), google.maps.event.addListener(this.marker_, 'labelcontent_changed', function () {
        me.setContent();
    }), google.maps.event.addListener(this.marker_, 'labelanchor_changed', function () {
        me.setAnchor();
    }), google.maps.event.addListener(this.marker_, 'labelclass_changed', function () {
        me.setStyles();
    }), google.maps.event.addListener(this.marker_, 'labelstyle_changed', function () {
        me.setStyles();
    })];
};

/**
 * Removes the DIV for the label from the DOM. It also removes all event handlers.
 * This method is called automatically when the marker's <code>setMap(null)</code>
 * method is called.
 * @private
 */
MarkerLabel_.prototype.onRemove = function () {
    var i;
    this.labelDiv_.parentNode.removeChild(this.labelDiv_);
    this.eventDiv_.parentNode.removeChild(this.eventDiv_);

    // Remove event listeners:
    for (i = 0; i < this.listeners_.length; i++) {
        google.maps.event.removeListener(this.listeners_[i]);
    }
};

/**
 * Draws the label on the map.
 * @private
 */
MarkerLabel_.prototype.draw = function () {
    this.setContent();
    this.setTitle();
    this.setStyles();
};

/**
 * Sets the content of the label.
 * The content can be plain text or an HTML DOM node.
 * @private
 */
MarkerLabel_.prototype.setContent = function () {
    var content = this.marker_.get('labelContent');
    if (typeof content.nodeType === 'undefined') {
        this.labelDiv_.innerHTML = content;
        this.eventDiv_.innerHTML = this.labelDiv_.innerHTML;
    } else {
        this.labelDiv_.innerHTML = ''; // Remove current content
        this.labelDiv_.appendChild(content);
        content = content.cloneNode(true);
        this.eventDiv_.appendChild(content);
    }
};

/**
 * Sets the content of the tool tip for the label. It is
 * always set to be the same as for the marker itself.
 * @private
 */
MarkerLabel_.prototype.setTitle = function () {
    this.eventDiv_.title = this.marker_.getTitle() || '';
};

/**
 * Sets the style of the label by setting the style sheet and applying
 * other specific styles requested.
 * @private
 */
MarkerLabel_.prototype.setStyles = function () {
    var i, labelStyle;

    // Apply style values from the style sheet defined in the labelClass parameter:
    this.labelDiv_.className = this.marker_.get('labelClass');
    this.eventDiv_.className = this.labelDiv_.className;

    // Clear existing inline style values:
    this.labelDiv_.style.cssText = '';
    this.eventDiv_.style.cssText = '';
    // Apply style values defined in the labelStyle parameter:
    labelStyle = this.marker_.get('labelStyle');
    for (i in labelStyle) {
        if (labelStyle.hasOwnProperty(i)) {
            this.labelDiv_.style[i] = labelStyle[i];
            this.eventDiv_.style[i] = labelStyle[i];
        }
    }
    this.setMandatoryStyles();
};

/**
 * Sets the mandatory styles to the DIV representing the label as well as to the
 * associated event DIV. This includes setting the DIV position, z-index, and visibility.
 * @private
 */
MarkerLabel_.prototype.setMandatoryStyles = function () {
    this.labelDiv_.style.position = 'absolute';
    this.labelDiv_.style.overflow = 'hidden';
    this.eventDiv_.style.position = this.labelDiv_.style.position;
    this.eventDiv_.style.overflow = this.labelDiv_.style.overflow;
    this.setAnchor();
    this.setPosition(); // This also updates z-index, if necessary.
    this.setVisible(true);
};

/**
 * Sets the anchor point of the label.
 * @private
 */
MarkerLabel_.prototype.setAnchor = function () {
    var anchor = this.marker_.get('labelAnchor');
    this.labelDiv_.style.marginLeft = -anchor.x + 'px';
    this.labelDiv_.style.marginTop = -anchor.y + 'px';
    this.eventDiv_.style.marginLeft = -anchor.x + 'px';
    this.eventDiv_.style.marginTop = -anchor.y + 'px';
};

/**
 * Sets the position of the label. The z-index is also updated, if necessary.
 * @private
 */
MarkerLabel_.prototype.setPosition = function (yOffset) {
    var position = this.getProjection().fromLatLngToDivPixel(this.marker_.getPosition());
    if (typeof yOffset === 'undefined') {
        yOffset = 0;
    }
    this.labelDiv_.style.left = Math.round(position.x) + 'px';
    this.labelDiv_.style.top = Math.round(position.y - yOffset) + 'px';
    this.eventDiv_.style.left = this.labelDiv_.style.left;
    this.eventDiv_.style.top = this.labelDiv_.style.top;

    this.setZIndex();
};

/**
 * Sets the z-index of the label. If the marker's z-index property has not been defined, the z-index
 * of the label is set to the vertical coordinate of the label. This is in keeping with the default
 * stacking order for Google Maps: markers to the south are in front of markers to the north.
 * @private
 */
MarkerLabel_.prototype.setZIndex = function () {
    var zAdjust = this.marker_.get('labelInBackground') ? -1 : +1;
    if (typeof this.marker_.getZIndex() === 'undefined') {
        this.labelDiv_.style.zIndex = parseInt(this.labelDiv_.style.top, 10) + zAdjust;
        this.eventDiv_.style.zIndex = this.labelDiv_.style.zIndex;
    } else {
        this.labelDiv_.style.zIndex = this.marker_.getZIndex() + zAdjust;
        this.eventDiv_.style.zIndex = this.labelDiv_.style.zIndex;
    }
};

/**
 * Sets the visibility of the label. The label is visible only if the marker itself is
 * visible (i.e., its visible property is true) and the labelVisible property is true.
 * @private
 */
MarkerLabel_.prototype.setVisible = function () {
    if (this.marker_.get('labelVisible')) {
        this.labelDiv_.style.display = this.marker_.getVisible() ? 'block' : 'none';
    } else {
        this.labelDiv_.style.display = 'none';
    }
    this.eventDiv_.style.display = this.labelDiv_.style.display;
};

/**
 * @name MarkerWithLabelOptions
 * @class This class represents the optional parameter passed to the {@link MarkerWithLabel} constructor.
 *  The properties available are the same as for <code>google.maps.Marker</code> with the addition
 *  of the properties listed below. To change any of these additional properties after the labeled
 *  marker has been created, call <code>google.maps.Marker.set(propertyName, propertyValue)</code>.
 *  <p>
 *  When any of these properties changes, a property changed event is fired. The names of these
 *  events are derived from the name of the property and are of the form <code>propertyname_changed</code>.
 *  For example, if the content of the label changes, a <code>labelcontent_changed</code> event
 *  is fired.
 *  <p>
 * @property {string|Node} [labelContent] The content of the label (plain text or an HTML DOM node).
 * @property {Point} [labelAnchor] By default, a label is drawn with its anchor point at (0,0) so
 *  that its top left corner is positioned at the anchor point of the associated marker. Use this
 *  property to change the anchor point of the label. For example, to center a 50px-wide label
 *  beneath a marker, specify a <code>labelAnchor</code> of <code>google.maps.Point(25, 0)</code>.
 *  (Note: x-values increase to the right and y-values increase to the top.)
 * @property {string} [labelClass] The name of the CSS class defining the styles for the label.
 *  Note that style values for <code>position</code>, <code>overflow</code>, <code>top</code>,
 *  <code>left</code>, <code>zIndex</code>, <code>display</code>, <code>marginLeft</code>, and
 *  <code>marginTop</code> are ignored; these styles are for internal use only.
 * @property {Object} [labelStyle] An object literal whose properties define specific CSS
 *  style values to be applied to the label. Style values defined here override those that may
 *  be defined in the <code>labelClass</code> style sheet. If this property is changed after the
 *  label has been created, all previously set styles (except those defined in the style sheet)
 *  are removed from the label before the new style values are applied.
 *  Note that style values for <code>position</code>, <code>overflow</code>, <code>top</code>,
 *  <code>left</code>, <code>zIndex</code>, <code>display</code>, <code>marginLeft</code>, and
 *  <code>marginTop</code> are ignored; these styles are for internal use only.
 * @property {boolean} [labelInBackground] A flag indicating whether a label that overlaps its
 *  associated marker should appear in the background (i.e., in a plane below the marker).
 *  The default is <code>false</code>, which causes the label to appear in the foreground.
 * @property {boolean} [labelVisible] A flag indicating whether the label is to be visible.
 *  The default is <code>true</code>. Note that even if <code>labelVisible</code> is
 *  <code>true</code>, the label will <i>not</i> be visible unless the associated marker is also
 *  visible (i.e., unless the marker's <code>visible</code> property is <code>true</code>).
 * @property {boolean} [raiseOnDrag] A flag indicating whether the label and marker are to be
 *  raised when the marker is dragged. The default is <code>true</code>. If a draggable marker is
 *  being created and a version of Google Maps API earlier than V3.3 is being used, this property
 *  must be set to <code>false</code>.
 * @property {boolean} [optimized] A flag indicating whether rendering is to be optimized for the
 *  marker. <b>Important: The optimized rendering technique is not supported by MarkerWithLabel,
 *  so the value of this parameter is always forced to <code>false</code>.
 * @property {string} [crossImage="http://maps.gstatic.com/intl/en_us/mapfiles/drag_cross_67_16.png"]
 *  The URL of the cross image to be displayed while dragging a marker.
 * @property {string} [handCursor="http://maps.gstatic.com/intl/en_us/mapfiles/closedhand_8_8.cur"]
 *  The URL of the cursor to be displayed while dragging a marker.
 */
/**
 * Creates a MarkerWithLabel with the options specified in {@link MarkerWithLabelOptions}.
 * @constructor
 * @param {MarkerWithLabelOptions} [optOptions] The optional parameters.
 */
function MarkerWithLabel(optOptions) {
    optOptions = optOptions || {};
    optOptions.labelContent = optOptions.labelContent || '';
    optOptions.labelAnchor = optOptions.labelAnchor || new google.maps.Point(0, 0);
    optOptions.labelClass = optOptions.labelClass || 'markerLabels';
    optOptions.labelStyle = optOptions.labelStyle || {};
    optOptions.labelInBackground = optOptions.labelInBackground || false;
    if (typeof optOptions.labelVisible === 'undefined') {
        optOptions.labelVisible = true;
    }
    if (typeof optOptions.raiseOnDrag === 'undefined') {
        optOptions.raiseOnDrag = true;
    }
    if (typeof optOptions.clickable === 'undefined') {
        optOptions.clickable = true;
    }
    if (typeof optOptions.draggable === 'undefined') {
        optOptions.draggable = false;
    }
    if (typeof optOptions.optimized === 'undefined') {
        optOptions.optimized = false;
    }
    optOptions.crossImage = optOptions.crossImage || 'http' + (document.location.protocol === 'https:' ? 's' : '') + '://maps.gstatic.com/intl/en_us/mapfiles/drag_cross_67_16.png';
    optOptions.handCursor = optOptions.handCursor || 'http' + (document.location.protocol === 'https:' ? 's' : '') + '://maps.gstatic.com/intl/en_us/mapfiles/closedhand_8_8.cur';
    optOptions.optimized = false; // Optimized rendering is not supported

    this.label = new MarkerLabel_(this, optOptions.crossImage, optOptions.handCursor); // Bind the label to the marker

    // Call the parent constructor. It calls Marker.setValues to initialize, so all
    // the new parameters are conveniently saved and can be accessed with get/set.
    // Marker.set triggers a property changed event (called 'propertyname_changed')
    // that the marker label listens for in order to react to state changes.
    google.maps.Marker.apply(this, arguments);
}
if (typeof google !== 'undefined') {
    inherits(MarkerWithLabel, google.maps.Marker);
}

/**
 * Overrides the standard Marker setMap function.
 * @param {Map} theMap The map to which the marker is to be added.
 * @private
 */
MarkerWithLabel.prototype.setMap = function (theMap) {

    // Call the inherited function...
    google.maps.Marker.prototype.setMap.apply(this, arguments);

    // ... then deal with the label:
    this.label.setMap(theMap);
};

module.exports = MarkerWithLabel;

},{}],29:[function(require,module,exports){
'use strict';

var $main = $('#main'),
    $footer = $('#footernew'),
    $banner = $('.banner_prostaff');

var megamenu = {
    globalTimer: 0,
    init: function init() {
        megamenu.megamenuEvent();
    },
    open: function open() {

        //var $width = $('#brand-tabs-header').width();
        // To make default menu based on the brand active
        $('#brand-tabs-header > ul > li.active .mobile-main-menu-heading').trigger('click');
        $('#container').addClass('js-container-active');
        $('.menu-toggle').addClass('js-menu-toggle');
        $('.menu-open-shadow').remove();
        $main.wrap('<div class=\'open-menu-wrap\'></div>');
        $('body').addClass('js-body');
        $('.open-menu-wrap').prepend($banner);
        $('.open-menu-wrap').append($footer).prepend('<a href=\'javascript:void(0);\' class=\'menu-open-shadow\'></a>');
        //$("#main, #footernew").prepend("<div class='menu-open-shadow'></div>")
        $('#container, .open-menu-wrap').animate({ marginLeft: '280px' }, 300);
        $('#brand-tabs-header').wrap('<div class=\'brand-active\'></div>');
        $('.brand-active').animate({ left: '0' }, 300);
        $('.banner_prostaff').animate({ left: '280px' }, 300);
        $('.owl-carousel').find('.owl-item, .owl-item img').trigger('mouseenter');
    },
    close: function close() {
        $('#container, .open-menu-wrap').animate({ marginLeft: '0' }, 300);
        $('.banner_prostaff').animate({ left: '0' }, 300);
        $('#container').removeClass('js-container-active');
        $('body').removeClass('js-body');
        $('.owl-carousel').find('.owl-item, .owl-item img').trigger('mouseout');
        $('#main, #footernew').unwrap();
        $('.magnifier-icon').removeClass('js-magnifier-icon-active');
        $('.menu-toggle').removeClass('js-menu-toggle');
        $('#brand-tabs-header').unwrap();
        setTimeout(function () {
            $(window).scrollTop(0);
        }, 300);
    },
    megamenuEvent: function megamenuEvent() {
        /* Click event for brands to see sub menus in mobile */
        $('#brand-tabs-header > ul > li .mobile-main-menu-heading').on('click', function (e) {
            if ($(window).width() <= 959) {
                e.preventDefault();
                var $this = $(this).closest('li');
                $this.closest('ul').addClass('hide-after');
                $this.siblings('li').removeClass('js-sub-menu-active').addClass('js-sub-menu-inactive');
                $this.removeClass('js-sub-menu-inactive').addClass('js-sub-menu-active');
                $this.find('.megamenu-drop').animate({ 'left': [0, 'easeOutExpo'] });
                $this.find('.shop-rapala').each(function () {
                    var $curObj = $(this);
                    if (!$curObj.closest('.sub-category-section-1').hasClass('js-active-sub-menu')) {
                        $curObj.next('.sub-cat-drop-down').trigger('click');
                    }
                });
                $this.find('.menulist .sub-category-section-1 > a').each(function () {
                    var menuList = $(this).closest('.menulist');
                    var mainContent = $(this).closest('.sub-category-section-1');
                    $(mainContent).find('.sub-cat-drop-down').removeAttr('style');
                    var achorWidth = $(this).width();
                    var dropDownWisth = $(menuList).width() - achorWidth;
                    dropDownWisth = dropDownWisth - 70;
                    if (dropDownWisth > 17) {
                        $(mainContent).find('.sub-cat-drop-down').width(dropDownWisth);
                    }
                });
            }
        });
        /* Click event for to see all the brands in mobile */
        $('body').off('click', '.see-all-brands').on('click', '.see-all-brands', function (e) {
            //var $width = $('#brand-tabs-header').width();
            if ($(window).width() <= 959) {
                e.preventDefault();
                var $width = $('#brand-tabs-header').width();
                var $this = $(this).closest('li');
                $this.find('.megamenu-drop').animate({ 'left': [$width, 'easeOutExpo'] });
                $this.siblings('li').removeClass('js-sub-menu-inactive');
                $this.closest('ul').removeClass('hide-after');
                setTimeout(function () {
                    if ($this.find('.megamenu-drop').position().left == $width) {

                        $this.removeClass('js-sub-menu-active');
                    }
                }, 400);
            }
        });

        /* Click event for sub menu drop down in mobile */
        $('body').off('click', '.sub-category-section-1 .sub-cat-drop-down').on('click', '.sub-category-section-1 .sub-cat-drop-down', function (e) {
            if ($(window).width() <= 959) {
                if (!$(this).hasClass('no-click')) {
                    e.preventDefault();
                    var $this = $(this).closest('.sub-category-section-1');
                    if (!$this.hasClass('js-active-sub-menu')) {
                        $this.addClass('js-active-sub-menu');
                        $this.find('.sub-category-section-2').removeAttr('style');
                        $this.find('.sub-category-section-2').slideDown();
                    } else {
                        $this.find('.sub-category-section-2').slideUp();
                        $this.delay(1000).removeClass('js-active-sub-menu');
                    }
                }
            }
        });
        // main menu toggle
        $('body').off('click', '.menu-toggle').on('click', '.menu-toggle', function (e) {
            e.preventDefault();
            if ($(window).width() <= 959) {
                if (!$('#container').hasClass('js-container-active')) {
                    megamenu.open();
                } else {
                    megamenu.close();
                }
            }
        });
        $('body').off('touchstart click', 'a.menu-open-shadow').on('touchstart click', 'a.menu-open-shadow', function (e) {
            e.preventDefault();
            if ($(window).width() <= 959) {
                if (!$('#container').hasClass('js-container-active')) {
                    megamenu.open();
                } else {
                    megamenu.close();
                }
            }
        });
        $('body').off('click', 'a.magnifier-icon').on('click', 'a.magnifier-icon', function (e) {
            e.preventDefault();
            if ($(window).width() <= 959) {
                //var $width = $('#brand-tabs-header').width();
                if (!$('#container').hasClass('js-container-active')) {
                    $('.magnifier-icon').addClass('js-magnifier-icon-active');
                    megamenu.open();
                    if ($('.magnifier-icon').hasClass('js-magnifier-icon-active')) {
                        $('#container').find('.simplesearchinput').focus();
                    }
                }
            }
        });

        /** single click redirecting of megamenu categories*/
        $('#brand-tabs-header').mouseleave(function () {
            if ($(window).width() > 959) {
                $('.megamenu-drop').hide();
                $('.megamenudrop').hide();
                $('#brand-tabs-header > ul > li.active').removeClass('inactive');
                $('#brand-tabs-header > ul > li').removeClass('current');
            }
        });

        $('.brand-tabs-header-mask').mouseenter(function () {
            if ($(window).width() > 959) {
                $('.megamenu-drop').hide();
                $('.megamenudrop').hide();
                $('#brand-tabs-header > ul > li.active').removeClass('inactive');
                $('#brand-tabs-header > ul > li').removeClass('current');
                $(this).hide();
            }
        });
    },
    syncheight: function syncheight($sel) {
        var current = 0;
        if ($($sel).hasClass('menulist')) {
            $sel.each(function () {
                if ($(this).height() > current) {
                    current = $(this).height();
                }
            });
        } else {
            $sel.each(function () {
                if ($(this).height() > current) {
                    current = $(this).height();
                }
            });
        }
        $sel.height(current);
    }
};

module.exports = megamenu;

},{}],30:[function(require,module,exports){
'use strict';

var util = require('./util');
//bonusProductsView = require('./bonus-products-view');

var timer = {
    id: null,
    clear: function clear() {
        if (this.id) {
            window.clearTimeout(this.id);
            delete this.id;
        }
    },
    start: function start(duration, callback) {
        this.id = setTimeout(callback, duration);
    }
};

var minicart = {
    url: util.ajaxUrl(Urls.addProduct),
    init: function init() {
        minicart.reset();
        $('.checkoutminicart').slimscroll();
        this.$el = $('#minicart');
        this.$content = this.$el.find('.minicartcontent');
        jQuery('.minicarticon-cont').on('mouseover touchstart', function () {
            if (!minicart.isShow()) {
                minicart.hoverSlide();
            }
            $('.Custom-tooltip, .cvc_tooltip, .ordergothrough_tooltip').each(function () {
                if ($('.rapala_device').length == 1) {
                    jQuery(this).tooltipster({
                        content: jQuery(this).find('.tooltipcontainer').html(),
                        contentAsHTML: true,
                        maxWidth: 300,
                        touchDevices: true,
                        trigger: 'click'
                    });
                } else {
                    jQuery(this).tooltipster({
                        content: jQuery(this).find('.tooltipcontainer').html(),
                        contentAsHTML: true,
                        maxWidth: 300,
                        touchDevices: true
                    });
                }
            });
        });
        // register close button event
        $('.minicartcontent .minicartclose').click(function () {
            // reset all the events bindings
            minicart.reset();
            minicart.close(0);
            $('.rapala_device .minicart-button').removeClass('clicked');
        });
        $('.minicartcontent').click(function () {
            clearTimeout(minicart.timer);
            minicart.timer = null;
        });
        $('.minicart').mouseenter(function () {
            minicart.setminicarheight();
            clearTimeout(minicart.timer);
            minicart.timer = null;
            if ($('.minicartcontent').is(':animated')) {
                $('.minicartcontent').stop();
                $('.minicartcontent').css({ 'opacity': '1', 'height': 'auto' });
                minicart.init();
            }
        }).mouseleave(function () {
            $('.rapala_device .minicart-button').removeClass('clicked');
            clearTimeout(minicart.timer);
            minicart.timer = null;
            // after a time out automatically close it
            minicart.timer = setTimeout('minicart.close()', 30);
            minicart.close();
        });

        if ($('.mini-cart-product').length > 1) {
            $('.minicartcontent').removeClass('lessone');
            $('.minicartcontent .slimScrollDiv').removeClass('less');
        } else {
            $('.minicartcontent').addClass('lessone');
            $('.minicartcontent .slimScrollDiv').addClass('less');
        }
    },

    // returns a boolean if a minicart is visible/shown or hidden
    isShow: function isShow() {
        return jQuery('.minicartcontent').css('display') == 'none' ? false : true;
    },

    // reset minicart
    reset: function reset() {
        jQuery('.minicarticon-cont').unbind('hover');
        jQuery('.minicart').unbind('mouseenter').unbind('mouseleave');
    },

    enablehovereffect: function enablehovereffect() {
        jQuery('.minicarttotal').mouseenter(function () {
            minicart.setminicarheight();
            //clearTimeout(minicart.timer);
            //minicart.timer = null;
            timer.clear();
            if ($('.minicartcontent').is(':animated')) {
                $('.minicartcontent').stop();
                $('.minicartcontent').css({ 'opacity': '1', 'height': 'auto' });
                minicart.init();
            }
        });
        jQuery('.minicarttotal').mouseleave(function () {
            jQuery('.minicartcontent').fadeOut(1000);
            $('.rapala_device .minicart-button').removeClass('clicked');
        });
    },
    /**
     * @function
     * @description Shows the given content in the mini cart
     * @param {String} A HTML string with the content which will be shown
     */
    // shows the given content in the mini cart
    show: function show(html) {
        jQuery('#minicart').html(html);
        // bind all the events
        minicart.init();
        if (minicart.suppressSlideDown && minicart.suppressSlideDown()) {
            // do nothing
            // the hook 'MiniCart.suppressSlideDown()' should have done
            // the refresh
        } else {
            minicart.slide();
        }
    },
    setminicarheight: function setminicarheight() {
        var scrollheight = $('.mini-cart-product:eq(0)').height();
        if ($('.mini-cart-product').length > 1) {
            var scrollheight2 = $('.mini-cart-product:eq(1)').height();
            var avgheight = (scrollheight + scrollheight2) / 2;
            var newscrollheight = avgheight + (avgheight - avgheight / 4) + 20;

            $('.slimScrollDiv').css('height', newscrollheight + 'px');
            $('.checkoutminicart').css('height', newscrollheight + 'px');
        } else {
            var heightImg = $('.minibrandcolumn').find('a').height();
            var heightImg1 = $('.minibrandcolumn').find('img').height();

            while (scrollheight < heightImg + heightImg1) {
                heightImg = $('.minibrandcolumn').find('a').height();
                scrollheight = $('.tr_rotation').height();
                $('.slimScrollDiv').css('height', scrollheight + 'px');

                var scrollheight1 = $('.checkoutminicart').height();
                if (scrollheight1 > scrollheight) {
                    $('.checkoutminicart').css('height', scrollheight1 + 'px');
                } else {
                    $('.checkoutminicart').css('height', scrollheight + 'px');
                }
            }
        }
    },
    // hook which can be replaced by individual pages/page types (e.g.
    // cart)
    suppressSlideDown: function suppressSlideDown() {
        return false;
    },
    /**
     * @function
     * @description Slides down and show the contents of the mini cart
     */
    slide: function slide() {
        timer.clear();
        // show the item
        this.$content.slideDown('slow');
        // after a time out automatically close it
        timer.start(6000, this.close.bind(this));

        if (minicart.suppressSlideDown && minicart.suppressSlideDown()) {
            return;
        }
        // register close button event
        jQuery('.minicartcontent .minicartclose').click(function () {
            // reset all the events bindings
            minicart.reset();
            minicart.close(0);
            $('.rapala_device .minicart-button').removeClass('clicked');
        });

        //Removing padding from the banner if it doesnot contains data/image
        if ($('.slot_banner').find('img').length == 0) {
            $('.slot_banner').css('padding', '0 0 0px 0');
        }

        // register the mouseout events
        jQuery('.minicartcontent').mouseenter(function () {
            minicart.setminicarheight();
            clearTimeout(minicart.timer);
            minicart.timer = null;
            if ($(this).is(':animated')) {
                $(this).stop();
                $(this).css({ 'opacity': '1', 'height': 'auto' });
                minicart.init();
            }
        });
        $('.minicart').mouseleave(function () {
            $('.rapala_device .minicart-button').removeClass('clicked');
            clearTimeout(minicart.timer);
            minicart.timer = null;
            // after a time out automatically close it
            minicart.timer = setTimeout('minicart.close()', 30);
            minicart.init();
            minicart.close();
        });

        // show the item
        jQuery('.minicartcontent').slideDown('2000', function () {
            minicart.setminicarheight();
        });
        // show("slide",
        // { direction:
        // "up" },
        // 1000);

        // add the open class to the total
        jQuery('.minicart .minicarttotal').addClass('open');

        jQuery('.summaryproduct').each(function () {
            var $this = jQuery(this);
            var height = '';
            if ($this.find('.imageexpanded').is(':visible')) {
                $this.find('.hideoncollapse').hide().end().find('.attribute').addClass('collapsed');
                height = $(this).find('.attributes').height();
                height += $(this).find('.name').height();
                jQuery(this).find('.image').css({
                    'min-height': height
                });
            }
            if ($this.find('.imagecollapsed').is(':visible')) {
                height = $(this).find('.attributes').height();
                height += $(this).find('.name').height() + 30;
                jQuery(this).find('.image').css({
                    'min-height': height
                });
            }
        });

        clearTimeout(minicart.timer);
        minicart.timer = null;

        // after a time out automatically close it
        minicart.timer = setTimeout('minicart.close()', 1000);

        // Google Analytics code to track mini cart open.
        if (isEventTrackingEnabled && isGoogleAnalyticsEnabled) {
            googleAnalyticsEvents.miniCart();
        }
    },
    hoverSlide: function hoverSlide() {
        if (minicart.suppressSlideDown && minicart.suppressSlideDown()) {
            return;
        }
        // register close button event
        jQuery('.minicartcontent .minicartclose').click(function () {
            // reset all the events bindings
            minicart.reset();
            minicart.close(0);
            $('.rapala_device .minicart-button').removeClass('clicked');
        });

        //Removing padding from the banner if it doesnot contains data/image
        if ($('.slot_banner').find('img').length == 0) {
            $('.slot_banner').css('padding', '0 0 0px 0');
        }

        // register the mouseout events
        jQuery('.minicartcontent').mouseenter(function () {
            minicart.setminicarheight();
            clearTimeout(minicart.timer);
            minicart.timer = null;
            if ($(this).is(':animated')) {
                $(this).stop();
                $(this).css({ 'opacity': '1', 'height': 'auto' });
                minicart.init();
            }
        });
        $('.minicart').mouseleave(function () {
            $('.rapala_device .minicart-button').removeClass('clicked');
            clearTimeout(minicart.timer);
            minicart.timer = null;
            // after a time out automatically close it
            minicart.timer = setTimeout('minicart.close()', 30);
            minicart.close();
        });

        // show the item
        jQuery('.minicartcontent').slideDown('2000', function () {
            minicart.setminicarheight();
        });
        // show("slide",
        // { direction:
        // "up" },
        // 1000);

        // add the open class to the total
        jQuery('.minicart .minicarttotal').addClass('open');

        jQuery('.summaryproduct').each(function () {
            var $this = jQuery(this);
            var height = '';
            if ($this.find('.imageexpanded').is(':visible')) {
                $this.find('.hideoncollapse').hide().end().find('.attribute').addClass('collapsed');
                height = $(this).find('.attributes').height();
                height += $(this).find('.name').height();
                jQuery(this).find('.image').css({
                    'min-height': height
                });
            }
            if ($this.find('.imagecollapsed').is(':visible')) {
                height = $(this).find('.attributes').height();
                height += $(this).find('.name').height() + 30;
                jQuery(this).find('.image').css({
                    'min-height': height
                });
            }
        });

        // Google Analytics code to track mini cart open.
        if (isEventTrackingEnabled && isGoogleAnalyticsEnabled) {
            googleAnalyticsEvents.miniCart();
        }

        jQuery('.minicarttotal').addClass('enablehover');
        minicart.enablehovereffect();

        $('#main , #header , #footernew, #footernew .row').unbind('touchstart').bind('touchstart', function (e) {
            if ($('.minicartcontent').is(':visible')) {
                var currentLinkLength = $(e.target).closest('.minicartcontent').length;
                var minicarttotal = $(e.target).closest('.minicart-button').length;
                if (currentLinkLength === 0 && minicarttotal === 0) {
                    clearTimeout(minicart.timer);
                    minicart.timer = null;
                    // after a time out automatically close it
                    minicart.timer = setTimeout('minicart.close()', 30);
                    minicart.reset();
                    minicart.close();
                    minicart.init();
                    $('.rapala_device .minicart-button').removeClass('clicked');
                } else if (minicarttotal > 0) {
                    $('.rapala_device .minicart-button').trigger('click');
                }
            }
        });
    },
    // adds a product to the mini cart
    // @params
    // progressImageSrc - source/url of the image to show when the item
    // is being added to the cart
    // postdata - form data containing the product information to be
    // added to mini-cart
    // callback - call back function/handler
    add: function add(progressImageSrc, postdata, callback) {
        // get the data of the form as serialized string
        //var postdata = postdata;

        // get button reference
        var addButtons = [];

        // the button to update
        var addButton = null;

        // it is an array of buttons, but we need only one all
        // other combinations are strange so far
        if (addButtons.length == 1) {
            addButton = addButtons[0];
        }

        var previousImageSrc = null;

        // show progress indicator
        if (addButton != null) {
            previousImageSrc = addButton.src;
            addButton.src = progressImageSrc;
        }

        // handles successful add to cart
        var handlerFunc = function handlerFunc(req) {
            // hide progress indicator
            if (addButton != null) {
                addButton.src = previousImageSrc;
            }

            // replace the content
            jQuery('#minicart').html(req);

            // bind all the events
            minicart.init();
            if ($('.mini-cart-product').length > 1) {
                $('.checkoutminicart').slimscroll({
                    railVisible: true,
                    alwaysVisible: true
                });
                $('.minicarttable').find('thead').first().addClass('theadfixedTop');
                $('.checkoutminicart').find('.cartordertotals').removeClass('carttotals');
                $('.checkoutminicart').find('.minicarttable').removeClass('miniwithoutScroll');
                $('.minicartcontent').find('.minicarttableheader').removeClass('miniwithoutScrollhead');
                $('.minicarttableheader').css('border-bottom', '1px solid #ccc');
            } else {
                $('.minicarttable').find('.theadfixedTop').removeClass('theadfixedTop');
                $('.minicarttable').find('.fixedTop').removeClass('fixedTop');
                $('.minicart').find('.cartordertotals').addClass('carttotals');
                $('.checkoutminicart').find('.minicarttable').addClass('miniwithoutScroll');
                $('.minicartcontent').find('.minicarttableheader').addClass('miniwithoutScrollhead');
                $('.minicarttableheader').css('border-bottom', '1px solid #ccc');
            }
            $('.minicarttable .mini-cart-product:last-child').find('.mini-cart-product').css('border', '0px');

            if ($('body').hasClass('rapala_device')) {
                $('.checkoutminicart').find('.minicarttable').removeClass('miniwithoutScroll');
                // $(".minicarttable .tr_rotation:last-child").find('.minirow').css('border','1px');
                $('.minicarttable').find('thead').first().addClass('theadfixedTop');
                $('.minicarttable .mini-cart-product:last-child').find('.mini-cart-product').css('border', '0px');
                $('.minicarttableheader').css('border-bottom', '1px solid #ccc');
            }

            if (minicart.suppressSlideDown && minicart.suppressSlideDown()) {
                // do nothing
                // the hook 'MiniCart.suppressSlideDown()' should have
                // done the refresh
            } else {
                minicart.slide();
                minicart.setminicarheight();
                if (callback) {
                    callback();
                }
            }
            $('#pdpMain .addtocartconfirm-tooltip').fadeIn(400).show().delay(1500).fadeOut(400);
            // fire the BonusDiscountLineItemCheck event so we can check
            // if there is a bonus discount line item
            jQuery(document).trigger(jQuery.Event('BonusDiscountLineItemCheck'));
        };

        // handles add to cart error
        var errFunc = function errFunc() {
            // hide progress indicator
            if (addButton != null) {
                addButton.src = previousImageSrc;
            }
        };

        // closes a previous mini cart
        minicart.close();

        // add the product
        jQuery.ajax({
            type: 'POST',
            url: minicart.url,
            cache: true,
            data: postdata,
            success: handlerFunc,
            error: errFunc
        });
    },

    // closes the mini cart with given delay
    close: function close(delay) {
        if (minicart.timer != null || delay == 0) {
            clearTimeout(minicart.timer);
            minicart.timer = null;
            jQuery('.minicartcontent').fadeOut(1000);
            // hide with "slide" causes to fire mouse enter/leave events
            // sometimes infinitely thus changed it to fadeOut
            // add the open class to the total
            jQuery('.minicart .minicarttotal').removeClass('open');
            jQuery('.minicartcontent .minicartclose').unbind('click');
        }
    }
};

module.exports = minicart;

},{"./util":63}],31:[function(require,module,exports){
'use strict';

var util = require('./util');

var page = {
    title: '',
    type: '',
    params: util.getQueryStringParams(window.location.search.substr(1)),
    redirect: function redirect(newURL) {
        setTimeout(function () {
            window.location.href = newURL;
        }, 0);
    },
    refresh: function refresh() {
        setTimeout(function () {
            window.location.assign(window.location.href);
        }, 500);
    }
};

module.exports = page;

},{"./util":63}],32:[function(require,module,exports){
'use strict';

var giftcert = require('../giftcert'),
    tooltip = require('../tooltip'),
    util = require('../util'),
    dialog = require('../dialog'),
    page = require('../page'),
    validator = require('../validator');

/**
 * @function
 * @description Initializes the events on the address form (apply, cancel, delete)
 * @param {Element} form The form which will be initialized
 */
function initializeAddressForm() {
    var $form = $('#edit-address-form');

    $form.find('input[name="format"]').remove();
    tooltip.init();
    //$("<input/>").attr({type:"hidden", name:"format", value:"ajax"}).appendTo(form);

    $form.on('click', '.apply-button', function (e) {
        e.preventDefault();
        if (!$form.valid()) {
            return false;
        }
        var url = util.appendParamToURL($form.attr('action'), 'format', 'ajax');
        var applyName = $form.find('.apply-button').attr('name');
        var options = {
            url: url,
            data: $form.serialize() + '&' + applyName + '=x',
            type: 'POST'
        };
        $.ajax(options).done(function (data) {
            if (typeof data !== 'string') {
                if (data.success) {
                    dialog.close();
                    page.refresh();
                } else {
                    window.alert(data.message);
                    return false;
                }
            } else {
                $('#dialog-container').html(data);
                account.init();
                tooltip.init();
            }
        });
    }).on('click', '.cancel-button, .close-button', function (e) {
        e.preventDefault();
        dialog.close();
    }).on('click', '.delete-button', function (e) {
        e.preventDefault();
        if (window.confirm(String.format(Resources.CONFIRM_DELETE, Resources.TITLE_ADDRESS))) {
            var url = util.appendParamsToUrl(Urls.deleteAddress, {
                AddressID: $form.find('#addressid').val(),
                format: 'ajax'
            });
            $.ajax({
                url: url,
                method: 'POST',
                dataType: 'json'
            }).done(function (data) {
                if (data.status.toLowerCase() === 'ok') {
                    dialog.close();
                    page.refresh();
                } else if (data.message.length > 0) {
                    window.alert(data.message);
                    return false;
                } else {
                    dialog.close();
                    page.refresh();
                }
            });
        }
    });
    if ($('.logerror:visible').length > 0) {
        $('.account-logs .returningcustomers').find('.accountemail').addClass('errorclient');
        $('.account-logs .logincustomers .login_password').addClass('errorclient');
        //$(".pt_account .wrapper .account-section .returningcustomers .value ").css("margin-bottom", "0");
    }
    $('.registration-button').click(function () {
        var maskheight = $('.createan-account .formsubmit').parent('div').outerHeight();
        var realForm = jQuery(this).closest('form');
        if (!realForm.valid()) {
            $(this).closest('.form-row').addClass('inputlabel');
            realForm.find('.max-length-error').each(function () {
                if ($(this).closest('.value').find('input').val().length > 0) {
                    realForm.find('.max-length-error').remove();
                }
            });
            return false;
        } else {
            $('.registration-button span.loadImage').css('display', 'block');
            $('.createan-account .formsubmit').css({ 'height': maskheight + 'px', 'display': 'block' });
        }
    });
    if ($('.existing_register:visible').length > 0) {
        $('.createan-account .registration').find('.accountemail').addClass('errorclient');
        $('.createan-account .registration').find('.formfield_email').find('.labeltext').addClass('inputlabel');
        $('.createan-account .registration').find('.formfield_email').find('.requiredindicator').addClass('inputlabel');
        if ($('.registration').find('input.required').val().length > 0) {
            $('.registration').find('.clearbutton').show();
        }
    }
    if ($('.account-email.err.log_error:visible').length > 0) {
        $('.returningcustomers').find('.formfield_email').find('.labeltext').addClass('inputlabel');
        $('.returningcustomers').find('.formfield_email').find('.requiredindicator').addClass('inputlabel');
    }
    $('.signinbtn').click(function () {
        var maskheight = $('.account-logs .formsubmit').parent('div').outerHeight();
        var maskheightwishlist = $('.wish-logs .formsubmit').parent('div').outerHeight();
        var realForm = jQuery(this).closest('form');
        if (!realForm.valid()) {
            return false;
        } else {
            //$(this).closest('.formactions').addClass('loadImage');
            $('.signinbtn span.loadImage').css('display', 'block');
            $('.account-logs .formsubmit').css({ 'height': maskheight + 'px', 'display': 'block' });
            $(this).closest('.wish-logs').find('.formsubmit').css({
                'height': maskheightwishlist + 'px',
                'display': 'block'
            });
        }
    });
    if ($('.ui-login .header-forgot-pwd').length > 0) {
        $(this).find('input.required').bind('keydown keyup focusin focusout keypress', function () {
            //e.stopPropagation();
            $(this).closest('.value').find('errorclient').remove();
        });
        $('.ui-login header-forgot-pwd').find('input.required').bind('focusin', function () {
            $(this).closest('.value').find('errorclient').remove();
        });
    }
    $('.sample-section').click(function () {
        if (!$(this).find('.sample_mail_main').is(':visible')) {
            $(this).find('.sample_mail_main').slideDown(500);
        }
    });
    validator.init();
}

/**
 * @private
 * @function
 * @description Toggles the list of Orders
 */
function toggleFullOrder() {
    $('.order-items').find('li.hidden:first').prev('li').append('<a class="toggle">View All</a>').children('.toggle').click(function () {
        $(this).parent().siblings('li.hidden').show();
        $(this).remove();
    });
}

/**
 * @private
 * @function
 * @description Binds the events on the address form (edit, create, delete)
 */
function initAddressEvents() {
    var addresses = $('#addresses');
    if (addresses.length === 0) {
        return;
    }

    addresses.on('click', '.address-edit, .address-create', function (e) {
        e.preventDefault();
        dialog.open({
            url: this.href,
            options: {
                dialogClass: 'addressadd',
                open: initializeAddressForm
            }
        });
    }).on('click', '.delete', function (e) {
        e.preventDefault();
        if (window.confirm(String.format(Resources.CONFIRM_DELETE, Resources.TITLE_ADDRESS))) {
            $.ajax({
                url: util.appendParamToURL($(this).attr('href'), 'format', 'ajax'),
                dataType: 'json'
            }).done(function (data) {
                if (data.status.toLowerCase() === 'ok') {
                    page.redirect(Urls.addressesList);
                } else if (data.message.length > 0) {
                    window.alert(data.message);
                } else {
                    page.refresh();
                }
            });
        }
    });
}

/**
 * @private
 * @function
 * @description Binds the events of the payment methods list (delete card)
 */
function initPaymentEvents() {
    $('.add-card').on('click', function (e) {
        e.preventDefault();
        dialog.open({
            //PREVAIL-Added  to handle validation issues
            url: $(e.target).attr('href'),
            options: {
                dialogClass: 'payment-settings',
                open: initializePaymentForm
            }
        });
    });

    var paymentList = $('.payment-list');
    if (paymentList.length === 0) {
        return;
    }

    util.setDeleteConfirmation(paymentList, String.format(Resources.CONFIRM_DELETE, Resources.TITLE_CREDITCARD));

    $('form[name="payment-remove"]').on('submit', function (e) {
        e.preventDefault();
        // override form submission in order to prevent refresh issues
        var button = $(this).find('.delete');
        $('<input/>').attr({
            type: 'hidden',
            name: button.attr('name'),
            value: button.attr('value') || 'delete card'
        }).appendTo($(this));
        var data = $(this).serialize();
        $.ajax({
            type: 'POST',
            url: $(this).attr('action'),
            data: data
        }).done(function () {
            page.redirect(Urls.paymentsList);
        });
    });
}

function initializePaymentForm() {

    $('#CreditCardForm').on('click', '.cancel-button', function (e) {
        e.preventDefault();
        dialog.close();
    });
}

/**
 * @private
 * @function
 * @description init events for the loginPage
 */
function initLoginPage() {
    //o-auth binding for which icon is clicked
    $('.oAuthIcon').bind('click', function () {
        $('#OAuthProvider').val(this.id);
    });

    //toggle the value of the rememberme checkbox
    $('#dwfrm_login_rememberme').bind('change', function () {
        if ($('#dwfrm_login_rememberme').attr('checked')) {
            $('#rememberme').val('true');
        } else {
            $('#rememberme').val('false');
        }
    });
}

/**
 * @private
 * @function
 * @description Binds the events of the order, address and payment pages
 */
function initializeEvents() {
    initializeAddressForm(); // JIRA PREV-63: 'Add Address' or 'Edit address' overlay changing to page after click on Apply button,when there is an error message on overlay.
    toggleFullOrder();
    initAddressEvents();
    initPaymentEvents();
    initLoginPage();
    if ($('.server-error').length > 0) {
        $(window).scrollTop($('.server-error').offset().top);
    }
    $('body').on('change input', '.desktop-accesscode', function () {
        var curValue = $(this).val();
        $('body').find('.mobile-accesscode').val(curValue);
        $('body').find('.mobile-accesscode').attr('value', curValue);
    });
    $('body').on('change input', '.mobile-accesscode', function () {
        var curValue = $(this).val();
        $('body').find('.desktop-accesscode').val(curValue);
        $('body').find('.desktop-accesscode').attr('value', curValue);
    });
}

var account = {
    init: function init() {
        initializeEvents();
        giftcert.init();
    },
    initCartLogin: function initCartLogin() {
        initLoginPage();
    }
};

module.exports = account;

},{"../dialog":23,"../giftcert":25,"../page":31,"../tooltip":61,"../util":63,"../validator":64}],33:[function(require,module,exports){
'use strict';

var account = require('./account'),
    bonusProductsView = require('../bonus-products-view'),
    quickview = require('../quickview'),
    validator = require('../validator'),
    cartStoreInventory = require('../storeinventory/cart');

/**
 * @private
 * @function
 * @description Binds events to the cart page (edit item's details, bonus item's actions, coupon code entry)
 */

function initQuickViewrecommButtons() {
    var $qvButton = $('.pt_cart .producttile #quickviewbutton');
    var $link = $(this).find('.thumb-link');
    $qvButton.attr({
        'href': $link.attr('href'),
        'title': $link.attr('title')
    }).appendTo(this);
    $qvButton.off('click').on('click', function (e) {
        e.preventDefault();
        quickview.show({
            url: $(this).attr('href').split('#')[0], //PREV JIRA PREV-255 :PLP: On Click Quick view navigating to a wrong page when user first changes the swatches. Taking only href.
            source: 'quickview'
        });
    });
}

function initQuickVieweditButtons() {
    var $qvButton = $('.pt_cart  table#cart-table td.itemtotalcolumn.cartactions .item-edit-details #quickviewbutton');
    var $link = $(this);
    $qvButton.attr({
        'href': $link.attr('href'),
        'title': $link.attr('title')
    }).appendTo(this);
    $qvButton.off('click').on('click', function (e) {
        e.preventDefault();
        quickview.show({
            url: $(this).attr('href').split('#')[0], //PREV JIRA PREV-255 :PLP: On Click Quick view navigating to a wrong page when user first changes the swatches. Taking only href.
            source: 'quickview'
        });
    });
}

function initializeEvents() {
    quickview.init();
    validator.init();
    initQuickViewrecommButtons();
    initQuickVieweditButtons();
    $('#cart-table').on('click', '.bonus-item-actions a, .item-details .bonusproducts a', function (e) {
        e.preventDefault();
        bonusProductsView.show(this.href);
    });
    /* used to slide toggle event in cart page promo code*/
    if ($('.pt_cart').length > 0) {
        $(this).find('.applycoupon .label').text('Have a Promo Code?');
        $('.couponcode .label').click(function () {
            var $curObj = $(this);
            var fieldSection = '';
            if ($(this).hasClass('pre_label')) {

                fieldSection = $curObj.closest('.cart-coupon-code').find('.promo-sec.pre-promo');
                if ($(fieldSection).is(':visible') == true) {
                    $(fieldSection).slideUp();
                } else {
                    $(fieldSection).slideDown();
                }
            } else if ($(this).hasClass('post-couponcode')) {
                fieldSection = $curObj.closest('.cart-coupon-code').find('.promo-sec.bottom-promo-section');
                if ($(fieldSection).is(':visible') == true) {
                    $(fieldSection).slideUp();
                } else {
                    $(fieldSection).slideDown();
                }
            }
        });
        var $curObj = $('.couponcode .label.post-couponcode');
        var fieldSection = $curObj.closest('.cart-coupon-code').find('.promo-sec.bottom-promo-section');
        if ($(fieldSection).length > 0) {
            if ($('.promo-sec.bottom-promo-section .error').length > 0) {
                $(fieldSection).slideDown();
                $('.promo-sec.bottom-promo-section').find('.couponinput').addClass('inputlabel');
                if ($(window).width() < 481) {
                    $('body, html').animate({
                        scrollTop: $('.couponcode .label.post-couponcode').offset().top
                    }, 600);
                }
            }
        }
        var $curObjtop = $('.couponcode .label.pre_label');
        var fieldSectiontop = $curObjtop.closest('.cart-coupon-code').find('.promo-sec.pre-promo');
        if ($(fieldSectiontop).length > 0) {
            if ($('.promo-sec.pre-promo .error').length > 0) {
                $(fieldSectiontop).slideDown();
                $('.promo-sec.pre-promo').find('.couponinput').addClass('inputlabel');
                $('body, html').animate({
                    scrollTop: $('.couponcode .label.pre_label').offset().top
                }, 600);
            }
        }
    }
    $('.promo-sec').find('.couponinput').click(function () {
        $('.promo-sec').find('.couponinput').removeClass('inputlabel');
    });

    var cartpromo = $('.pt_cart .upshift.cell.contentbox .contentboxcontent table#cart-table tr.cart-row td.itemtotalcolumn');
    cartpromo.each(function () {
        if ($(this).find('.promo-adjustment').length >= 1) {
            $(this).addClass('promodiv');
        } else {
            $(this).removeClass('promodiv');
        }
    });

    $('body').on('click', '.cartcoupon-apply', function () {
        var $curObj = $('.couponcode .label');
        var fieldSection = '';
        if ($(this).closest('.bottom-promo-section').length > 0) {
            $('.promo-applied-position').val('bottomsection');
            $('.promo-applied-position').attr('value', 'bottomsection');
            fieldSection = $curObj.closest('.cart-coupon-code').find('.promo-sec.bottom-promo-section');
            if ($(fieldSection).length > 0) {
                if ($('.error').length > 0) {
                    $(fieldSection).slideDown();
                    $('.promo-sec.bottom-promo-section').find('.couponinput').addClass('inputlabel');
                }
            }
        } else if ($(this).closest('.top-promo-section').length > 0) {
            $('.promo-applied-position').val('topsection');
            $('.promo-applied-position').attr('value', 'topsection');
            fieldSection = $curObj.closest('.cart-coupon-code').find('.promo-sec.top-promo-section');
            if ($(fieldSection).length > 0) {
                if ($('.error').length > 0) {
                    $(fieldSection).slideDown();
                    $('.promo-sec.top-promo-section').find('.couponinput').addClass('inputlabel');
                }
            }
        }
    });
    $('.pt_cart .cartrecommads_cont').css('height', '44px');
    // override enter key for coupon code entry
    $('form input.couponinput').on('keydown', function (e) {
        if (e.which === 13) {
            e.preventDefault();
            $(this).closest('form').find('.cartcoupon-apply').click();
        } // JIRA PREV-30 : Cart page:  Coupon Code is not applying, when the user hit enter key.
    });

    $('body').on('change,input', function () {
        var $curObj = $(this);
        $('body').find('.couponinput').val($curObj.val());
        $('body').find('.couponinput').attr('value', $curObj.val());
    });
    //to prevent multiple submissions of the form when removing a product from the cart
    var removeItemEvent = false;
    $('button[name$="deleteProduct"]').on('click', function (e) {
        if (removeItemEvent) {
            e.preventDefault();
        } else {
            removeItemEvent = true;
        }
    });
    var owl = $('.owl-carousel');
    owl.owlCarousel({
        items: 3,
        slideBy: 3,
        rewind: true,
        nav: true,
        loop: true,
        dots: false
    });
}

exports.init = function () {
    initializeEvents();
    if (SitePreferences.STORE_PICKUP) {
        cartStoreInventory.init();
    }
    account.initCartLogin();
};

},{"../bonus-products-view":17,"../quickview":53,"../storeinventory/cart":57,"../validator":64,"./account":32}],34:[function(require,module,exports){
'use strict';

var util = require('../../util'),
    uievents = require('../../uievents'),
    shipping = require('./shipping');

/**
 * @function
 * @description Selects the first address from the list of addresses
 */
exports.init = function () {
    var $form = $('.address');
    // select address from list
    $('select[name$="_addressList"]', $form).on('change', function () {
        var selected = $(this).children(':selected').first();
        var selectedAddress = $(selected).data('address');
        if (!selectedAddress) {
            if ($('.checkout').hasClass('billingsection')) {
                $('.addressoptions-addToAddressBook,.addressoptions-makedefault ').removeClass('hide');
                $('input[name$=\'shippingAddress_selectedaddress\']').val('');
                $('.selected-shipping-address').empty();
                $('input[name$=\'_addressid\']').val('');
                $('input[name$=\'_addressFields_firstName\']').val('');
                $('input[name$=\'_addressFields_lastName\']').val('');
                $('input[name$=\'_addressFields_address1\']').val('');
                $('input[name$=\'_addressFields_address2\']').val('');
                $('input[name$=\'_addressFields_city\']').val('');
                $('input[name$=\'_addressFields_postal\']').val('');
                $('input[name$=\'_addressFields_phone\']').val('');
                uievents.changeFormSelection(jQuery('select[name$=\'_addressFields_states_state\']')[0], '');
                uievents.changeFormSelection(jQuery('select.address-select')[0], '');
                $('.shipping-address-field-section').removeClass('hide');
                $('.selected-shipping-address, .new-address-field, .edit-address-field').addClass('hide');
                $('input[name$=\'_addressFields_phone\']').closest('div.phone').find('span.errorclient').remove();
                $('input[name$=\'_addressFields_postal\']').closest('div.zip').find('span.errorclient').remove();
                $('.addressform .form-row.custom-select').removeClass('customselect-error');
                $('.custom-select').each(function () {
                    var selectVal = $(this).find(':selected').text();
                    $(this).find('.selectorOut').text(selectVal);
                });
                $('a.clearbutton').hide();
                $('.shipping-address-field-section .form-row').find('input').removeClass('errorclient');
                uievents.customFields();
            } else {
                $('.selected-shipping-address, .new-address-field').addClass('hide');
                $('.shipping-address-field-section').removeClass('hide');
            }
            uievents.synccheckoutH();
            return;
        }
        $('.selected-shipping-address').empty();
        if (selectedAddress.address2 == null) {
            selectedAddress.address2 = '';
        }
        $('.selected-shipping-address').append(selectedAddress.firstName + ' ' + selectedAddress.lastName + '<br/>' + selectedAddress.address1 + ' ' + selectedAddress.address2 + '<br/>' + selectedAddress.city + ' ' + selectedAddress.stateCode + ' ' + selectedAddress.postalCode + '<br/>' + selectedAddress.phone);
        if ($('.checkout').hasClass('billingsection')) {
            var editAddressObject = {
                firstName: selectedAddress.firstName,
                lastName: selectedAddress.lastName,
                address1: selectedAddress.address1,
                address2: selectedAddress.address2,
                postalCode: selectedAddress.postalCode,
                city: selectedAddress.city,
                stateCode: selectedAddress.stateCode,
                countryCode: 'US',
                phone: selectedAddress.phone
            };
            $('.new-address-field').addClass('hide');
            $('.edit-address-field').attr('data-address', editAddressObject);
            $('.selected-shipping-address, .edit-address-field').removeClass('hide');
        } else {
            $('.selected-shipping-address, .new-address-field').removeClass('hide');
        }
        $('.shipping-address-field-section').addClass('hide');
        util.fillAddressFields(selectedAddress, $form);
        $('body').find('input[name$=_sameasshippingaddress]').removeAttr('checked');
        $('body').find('input[name$=_sameasshippingaddress]').closest('.custom-checkbox').find('.custom-link').removeClass('active');
        uievents.synccheckoutH();
        shipping.updateShippingMethodList();
        // re-validate the form
        /* JIRA PREV-95 : Highlighting the Credit card  details field, when the user select any saved address from the 'Select An Address' drop down.
           (logged-in user) .Commented to prevent form from re-validation.
        */
        //$form.validate().form();
    });
    /* if($("body").find("input[name$=_sameasshippingaddress]").is(":checked")) {
          var pageLoadSelectedAddress = $('select[name$="_addressList"]').children(':selected').first();
             var onPageLoadSelectedAddress = $(pageLoadSelectedAddress).data('address');
             if (!onPageLoadSelectedAddress) {
                 $(".selected-shipping-address, .new-address-field").addClass("hide");
                 return;
             }
             else {
                 var selectedAddress = onPageLoadSelectedAddress;
                 $(".selected-shipping-address").empty();
                 $(".selected-shipping-address").append(selectedAddress.firstName+" "+selectedAddress.lastName+"<br/>"+selectedAddress.address1+" "+selectedAddress.address2+"<br/>"+selectedAddress.city+" "+selectedAddress.stateCode+" "+selectedAddress.postalCode+"<br/>"+selectedAddress.phone);
                 $(".selected-shipping-address, .new-address-field").removeClass("hide");
                 $(".shipping-address-field-section").addClass("hide");
             }
      }*/
};

},{"../../uievents":62,"../../util":63,"./shipping":39}],35:[function(require,module,exports){
'use strict';

var ajax = require('../../ajax'),

//formPrepare = require('./formPrepare'),
uievents = require('../../uievents'),
    tooltip = require('../../tooltip'),
    progress = require('../../progress'),
    validator = require('../../validator'),

//giftcard = require('../../giftcard'),
util = require('../../util');

/**
 * @function
 * @description updates the order summary based on a possibly recalculated basket after a shipping promotion has been applied
 */
var flageallotmentcover = $('input.flageallotmentcover').val();
var allotmentAmount = parseInt($('input.allotmentAmount').val(), 10);
var couponMenthods = {
    updateSummary: function updateSummary() {
        var $summary = $('#secondary .new-summery-cart');
        // indicate progress
        progress.show($summary);
        var stateValue = $('body').find('.shipping-state').val();
        var url = util.appendParamToURL(Urls.summaryRefreshURL, 'selectedState', stateValue);
        // load the updated summary area
        $summary.load(url, function () {
            // hide edit shipping method link
            $summary.fadeIn('fast');
            $summary.find('.checkout-mini-cart .minishipment .header a').hide();
            $summary.find('.order-totals-table .order-shipping .label a').hide();
            uievents.synccheckoutH();
        });
    },
    updatecartsummary: function updatecartsummary() {
        var url = util.appendParamToURL(Urls.UpdateCartSummary);
        // load the updated cart summary area
        jQuery.ajax({
            url: url,
            dataType: 'html',
            success: function success(data) {
                jQuery('.ajax-cartsummary').html(data);
                uievents.synccheckoutH();
            }
        });
    },
    setCouponRedemptionInfo: function setCouponRedemptionInfo(redemption) {
        if (!redemption) {
            return;
        }
        //var redeemMsg = "${Resource.msg('billing.couponnotapplied','checkout',null)}";
        //if(redemption.applied) redeemMsg = "${Resource.msg('billing.couponapplied','checkout',null)}";
        //jQuery("${'#'}couponentry .redemption").append("<div class=\"discount-success\">${Resource.msg('billing.couponlabel','checkout',null)} <span class=\"submitedcoupon\">" + redemption.couponCode + "</span> " + redeemMsg + "<button  value="+redemption.couponCode+" class='removecoupon'>Remove</button></div>");
        var url = util.appendParamToURL(Urls.SuccessDisplayCoupon);
        jQuery.get(url, function (data) {
            jQuery('#couponentry .redemption').html(data);
            uievents.synccheckoutH();
        });
    },
    setCouponError: function setCouponError(msg) {
        var $couponcode = jQuery('input[name$=\'_billing_couponCode\']').closest('.couponcode');
        if (!msg) {
            jQuery('#couponentry span.error').remove();
            return;
        }
        if ($couponcode.find('span.error').length == 0) {
            $('input[name$=\'_billing_couponCode\']').closest('.couponcode').append('<span class=\'error\'><\/span>');
        }
        $couponcode.find('span.error').html(msg);
        jQuery('input[name$=\'_billing_couponCode\']').addClass('errorclient');
    },
    setGiftCertError: function setGiftCertError(msg) {
        var $redeemcode = jQuery('input[name$=\'_billing_giftCertCode\']').closest('.giftcertfields');
        if (!msg) {
            jQuery('.giftcertfields .error').remove();
            jQuery('input[name$=\'_billing_couponCode\']').removeClass('errorclient');
            return;
        }
        if ($redeemcode.find('span.error').length == 0) {
            jQuery('input[name$=\'_billing_giftCertCode\']').closest('.giftcertfields').append('<span class=\'error\'><\/span>');
        }
        $redeemcode.find('span.error').html(msg);
        jQuery('input[name$=\'_billing_giftCertCode\']').addClass('errorclient');
        //jQuery("input[name=${pdict.CurrentForms.billinggiftcert.giftCertCode.htmlName}]").parent().append("<span class=\"errormessage\">" + msg + "<\/span>");
    },
    //refresh CC form
    refreshCC: function refreshCC() {
        var url = util.appendParamToURL(Urls.ClearCCForm);
        jQuery.ajax({
            url: url,
            dataType: 'html',
            success: function success() {
                uievents.synccheckoutH();
            }
        });
    },
    setPaymentSection: function setPaymentSection(orderBalance) {

        /*if(!orderBalance) {
            return;
        }*/

        if (orderBalance <= 0) {
            //Clearing the CC Form if the remaining balance after allotment and GC is zero
            couponMenthods.refreshCC();

            // if the whole order total was paid with gift certs then hide other payment methods and show a message
            $('#paymentmethods').hide();
            $('.continuecheckoutbutton .continuecheckout').removeAttr('disabled');
            // if the order total is zero, determine was it because of the gift certificate use or a promotion? and show appropriate message
            if (flageallotmentcover == 'true') {
                $('.giftcertused').addClass('allotmentcover');
                $('.giftcertused').html('<p class=\'first-para\'>Your allotment balance will cover the full cost of this order.</p><p>No further payment will be necessary.</p>').show();
            } else {
                if (allotmentAmount > 0) {
                    $('.giftcertused').addClass('allotmentcover');
                    var allotmentMessage = '<div class="greater-than-767"><p class="first-para">Your allotment balance will cover the full cost of this order.</p><p>No further payment will be necessary.</p></div><div class="less-than-767"><p>Your allotment balance will cover the full cost of this order. No further payment will be necessary.</p></div>';
                    $('.giftcertused').html(allotmentMessage).show();
                } else {
                    $('.giftcertused').addClass('merchantcover').html($('.giftcertpi').length > 0 ? '<p class=\'first-para\'>' + Resources.GIFTCERT_NO + '</p>' : '<p class=\'first-para\'>' + Resources.ZERO_BALANCE + '</p>').show();
                }
            }
            $('.cardnotworking').hide();
        }
        if (orderBalance > 0 && $('input[name$="paymentMethods_selectedPaymentMethodID"]:checked').val() == 'CREDIT_CARD') {
            $('.cardnotworking').show();
        } else {
            $('.cardnotworking').hide();
        }
    },
    ordertotals: function ordertotals() {
        var url = Urls.GetOrderTotalJson;
        ajax.getJson({
            url: url,
            callback: function callback(data) {
                if (data.Total.OrderTotal.indexOf('0.00') != -1) {
                    couponMenthods.setPaymentSection('0.0');
                } else {
                    $('#paymentmethods').show();
                    jQuery('.giftcertused ').removeClass('merchantcover').hide();
                }
                uievents.synccheckoutH();
            }
        });
    },
    removeGiftCertificate: function removeGiftCertificate(giftCertificateId) {
        jQuery('.balance').empty();
        // remove gift certificate
        var url = util.appendParamToURL(Urls.RemoveGiftCertificate, 'giftCertificateID', giftCertificateId);
        ajax.getJson({
            url: url,
            callback: function callback(data) {
                if (!data || !data.giftCertificate || !data.giftCertificate.removed) {
                    couponMenthods.setGiftCertError(Resources.GIFTCERT_ERROR);
                    return false;
                }
                // remove message in UI
                $('#gc-' + giftCertificateId).remove();
                // reinstate payment methods section which might have been hidden if the whole order was paid with gift certs
                if (!flageallotmentcover) {
                    $('#paymentmethods').show();
                }
                // hide gift cert used for otder total message
                if (!flageallotmentcover) {
                    jQuery('.giftcertused').hide();
                }
                //commenting this since we don't need to clear the payment form on applying GC as in order CC fields are first.
                //var countryCode = jQuery("input[name=${pdict.CurrentForms.billing.billingAddress.addressFields.country.htmlName}]").val();
                //updatePaymentMethods( countryCode );
                var countryCode = jQuery('input[name$=\'addressFields_country\']').val();
                if (typeof countryCode == 'undefined') {
                    countryCode = 'US';
                }
                couponMenthods.updatePaymentMethods(countryCode);
                couponMenthods.updateSummary();
                couponMenthods.ordertotals();
                uievents.synccheckoutH();
                if ($('#paymentmethods .toggle').eq(0).hasClass('active')) {
                    $('.cardnotworking').show();
                }
            }
        });
    },
    bindGiftCertificateRemoval: function bindGiftCertificateRemoval() {
        $('#giftcertentry a.remove').unbind('click').bind('click', function () {
            var gcId = util.trimPrefix($(this).attr('id'), 'rgc-');
            couponMenthods.removeGiftCertificate(gcId);
            uievents.synccheckoutH();
            return false;
        });
    },
    setGiftCertRedemptionInfo: function setGiftCertRedemptionInfo(giftCertificateId, amountExpr) {

        if (!giftCertificateId || !giftCertificateId) {
            return;
        }
        $('#gc-' + giftCertificateId).remove();
        /*jQuery("${'#'}giftcertentry .redemption").append("<div class='success giftcertpi' id='gc-"+ giftCertificateId+"'><div class='gcremove discount-success'><div class='gcremove_icon'><a id='rgc-"+giftCertificateId +"' class='remove' href='${'#'}'><img src='${URLUtils.staticURL('/images/icon_remove.gif')}' alt='${Resource.msg('global.remove','locale',null)}'/></a></div><div class='gc_idlabel'>${Resource.msg('minibillinginfo.giftcertificate','checkout',null)} - "+giftCertificateId+" </div><div class='gcredeemamount'>"+'-'+""+amountExpr+"</div></div><div class='gcdiscapplied'>"+ amountExpr+" "+' '+" ${Resource.msg('billing.giftcertredeemed','checkout',null)}</div></div>");*/
        $('#giftcertentry .redemption').append('<div class=\'success giftcertpi\' id=\'gc-' + giftCertificateId + '\'><div class=\'gcremove discount-success\'><div class=\'gc_idlabel\'>' + giftCertificateId + ' </div><div class=\'gcredeemamount\'>' + ' - ' + '' + amountExpr + ' ' + Resources.GIFT_CERTIFICATE_CREDIT + '</div><div class=\'gcremove_icon\'><a id=\'rgc-' + giftCertificateId + '\' class=\'remove\' href=\'#\'><span>' + Resources.REMOVE + '</span></a></div></div></div>');
        $('.giftcertfields').css({ 'display': 'none' });
        couponMenthods.bindGiftCertificateRemoval();
    },
    // initializes the payment method forms
    initPaymentMethodSelection: function initPaymentMethodSelection() {

        // get selected payment method from payment method form
        var paymentMethodID = jQuery('input[name$=\'_selectedPaymentMethodID\']:checked').val();
        if (!paymentMethodID) {
            // if necessary fall back to default payment method (first non-gift-certificate method)
            paymentMethodID = $('input[value=\'CREDIT_CARD\']').attr('id');
        }

        // show payment method section
        couponMenthods.changePaymentMethod(paymentMethodID);
    },
    // changes the payment method form
    changePaymentMethod: function changePaymentMethod(paymentMethodID) {
        //if (jQuery(".giftcertused").css("display") != "none") return;
        /*
           jQuery(".paymentform").hide();
           jQuery("#PaymentMethod_" + paymentMethodID).show();
           if( jQuery("#PaymentMethod_" + paymentMethodID).length == 0 )
           {
               jQuery("#PaymentMethod_Custom").show();
           }
            // ensure checkbox of payment method is checked
           jQuery("#is-" + paymentMethodID).attr("checked", true);
           if($("#PaymentMethod_CREDIT_CARD").is(':visible')){
               if(paymentMethodID == "PayPal"){
                   $('.cardnotworking').hide();
               }else{
                   $('.cardnotworking').show();
                   jQuery('.paymentform.paypal .paypalmsg').removeClass('error');
               }
           }*/

        var $paymentMethods = $('.payment-method');
        $paymentMethods.removeClass('payment-method-expanded');

        var $selectedPaymentMethod = $paymentMethods.filter('[data-method="' + paymentMethodID + '"]');
        if ($selectedPaymentMethod.length === 0) {
            $selectedPaymentMethod = $('[data-method="Custom"]');
        }
        $selectedPaymentMethod.addClass('payment-method-expanded');

        // ensure checkbox of payment method is checked
        $('input[name$="_selectedPaymentMethodID"]').removeAttr('checked');
        $('input[value=' + paymentMethodID + ']').prop('checked', 'checked');
    },
    bindCreditCardPopulationHandler: function bindCreditCardPopulationHandler() {
        // select credit card from list
        $('.creditcardlist select').change(function () {
            var cardUUID = $(this).val();
            if (!cardUUID) {
                jQuery('input[name$=\'paymentMethods_creditCard_owner\']').val('');
                jQuery('input[name$=\'paymentMethods_creditCard_number\']').val('');
                jQuery('select[name$=\'paymentMethods_creditCard_month\']').val('');
                jQuery('select[name$=\'paymentMethods_creditCard_year\']').val('');
                jQuery('select[name$=\'paymentMethods_creditCard_cvn\']').val('');
                $('.cardtypeimg > div').hide();
                $('.expirationdate.error').hide();
                jQuery('.paymentform a.clearbutton').hide();
                $('.custom-select').each(function () {
                    var selectVal = $(this).find(':selected').text();
                    $(this).find('.selectorOut').text(selectVal);
                });
                return false;
            } else {
                jQuery('form[id$=\'paymentMethods_creditCard\'] input, form[id$=\'paymentMethods_creditCard\'] select').removeClass('errorclient');
                jQuery('form[id$=\'paymentMethods_creditCard\'] span.errorclient').hide();
                jQuery('form[id$=\'paymentMethods_creditCard\'] .custom-select').removeClass('customselect-error');
                jQuery('form[id$=\'paymentMethods_creditCard\'] .expirationdate.error').hide();
            }
            couponMenthods.populateCreditCardForm(cardUUID);
            uievents.synccheckoutH();
            return false;
        });
    },
    bindPaymentMethodChangeHandler: function bindPaymentMethodChangeHandler() {
        // bind payment method change handler
        $('#paymentmethods .toggle').click(function () {
            if (jQuery('input[name$="billing_paypalprocessed"]').val() != 'true') {
                $('#paymentmethods .toggle').removeClass('active');
                $(this).addClass('active');
                var selectedID = jQuery(this).find('input[name$="_billing_paymentMethods_selectedPaymentMethodID"]').val();
                if (selectedID == 'PayPal') {
                    var paypalStatus = jQuery('input[name$="_billing_paypalval_paypalprocessed"]').val();
                    $('.cardnotworking').hide();
                    if (paypalStatus == 'true') {
                        //$('.continuecheckoutbutton .continuecheckout').removeAttr('disabled');
                    } else {
                            //$('.continuecheckoutbutton .continuecheckout').attr('disabled', 'disabled');
                        }
                } else if (selectedID == 'CREDIT_CARD') {
                    if (!$('input[name$="_creditCard_owner"]').hasClass('errorclient') && !$('input[name$="_creditCard_number"]').hasClass('errorclient') && !$('input[name$="_creditCard_cvn"]').hasClass('errorclient') && !$('select[name$="paymentMethods_creditCard_year"]').hasClass('errorclient') && !$('select[name$="paymentMethods_creditCard_month"]').hasClass('errorclient') && $('input[name$="_creditCard_owner"]').val() != '' && $('input[name$="_creditCard_number"]').val() != '' && $('input[name$="_creditCard_cvn"]').val() != '' && $('select[name$="paymentMethods_creditCard_expiration_month"]').val() != '' && $('select[name$="paymentMethods_creditCard_expiration_month"]').val() != '') {
                        //$('.continuecheckoutbutton .continuecheckout').removeAttr('disabled');
                    } else {
                            //$('.continuecheckoutbutton .continuecheckout').attr('disabled', 'disabled');
                        }
                }
                $(this).find('input[name="billing_paymentMethods_selectedPaymentMethodID"]').prop('checked', true);
                couponMenthods.changePaymentMethod(selectedID);
            }
        });
        $('#paymentmethods .paymentform.creditcardpayment').click(function () {
            $('.paymentmethods .toggle input#is-CREDIT_CARD').closest('.toggle').addClass('active');
        });
        $('#paymentmethods .paymentform.paypal').click(function () {
            $('.paymentmethods .toggle input#is-PayPal').closest('.toggle').addClass('active');
        });
    },
    updatePaymentMethods: function updatePaymentMethods(countryCode) {

        var url = util.appendParamToURL(Urls.RefreshPaymentMethods, 'countryCode', countryCode);

        // indicate progress
        progress.show('#paymentmethodform');

        // load the updated payment method area
        $('#paymentmethodform').load(url, function () {
            $('#paymentmethodform').fadeIn('fast');
            //$('.continuecheckoutbutton .continuecheckout').attr('disabled', 'disabled');
            //couponMenthods.initPaymentMethodSelection();
            couponMenthods.bindPaymentMethodChangeHandler();
            couponMenthods.bindCreditCardPopulationHandler();
            validator.init();
            tooltip.init();
            util.cardtype.init();
            $('.expirationdate .custom-select select');
            $('#PaymentMethod_CREDIT_CARD input');
            $('#PaymentMethod_CREDIT_CARD select');
            uievents.init($('#paymentmethodform'));
            //load checking for payment type
            var $paySelected = jQuery('#paymentmethods').find('input[name$="paymentMethods_selectedPaymentMethodID"]:checked');
            if ($paySelected.length == 1) {
                $paySelected.closest('.toggle').addClass('active');
                var selectedID = $paySelected.val();
                couponMenthods.changePaymentMethod(selectedID);
            }
            couponMenthods.ordertotals();
            uievents.synccheckoutH();
        });
        //app.execUjs();
    },
    removeCouponCode: function removeCouponCode(couponCode) {
        couponMenthods.setCouponError(null);
        // nothing entered
        if (!couponCode) {
            couponMenthods.setCouponError(Resources.BILLING_COUPONMIS);
            return;
        }
        // attempt to remove
        jQuery('input[name$=\'billing_couponCode\']').val('');

        var url = util.appendParamToURL(Urls.RemoveCoupon, 'couponCode', couponCode);
        $.get(url, function (data) {
            couponMenthods.updateSummary();
            couponMenthods.updatecartsummary();
            var giftCertificates = jQuery(data).filter('#giftCertificateData').text();
            if (giftCertificates != 'undefined' && giftCertificates.length > 0) {
                var giftCertificatedata = giftCertificates.split('|');
                for (var index = 0; index < giftCertificatedata.length; index++) {
                    couponMenthods.setGiftCertRedemptionInfo(giftCertificatedata[index].split('-')[0].trim(), giftCertificatedata[index].split('-')[1].trim());
                }
            }
            uievents.synccheckoutH();
        });
        var countryCode = jQuery('input[name$=\'addressFields_country\']').val();
        if (typeof countryCode == 'undefined') {
            countryCode = 'US';
        }
        couponMenthods.updatePaymentMethods(countryCode);
        couponMenthods.ordertotals();

        // Determine if a bonus-product promotion was triggered by the coupon.
        // If so, display a popup alert and give the customer a chance to
        // return to the cart and select the bonus product.

        /*$('.noBonusBtn').unbind("click").click( function() {
            $('.bonusdiscountcontainer').dialog('close');
          });*/
    },
    populateCreditCardForm: function populateCreditCardForm(cardID) {
        // load card details
        var url = Urls.billingSelectCC;
        url = util.appendParamToURL(url, 'creditCardUUID', cardID);
        var result = ajax.getJson({
            url: url,
            callback: function callback(data) {
                if (!data) {
                    alert(Resources.CC_LOAD_ERROR);
                    return false;
                }
                var $creditCard = $('body').find('.creditcardpayment');
                // fill the form / clear the former cvn input
                $creditCard.find('input[name$="creditCard_owner"]').val(data.holder).trigger('change');
                $creditCard.find('select[name$="_type"]').val(data.type).trigger('change');
                $creditCard.find('.creditCard-number').val(data.maskedNumber).trigger('change');
                $creditCard.find('[name$="_month"]').val(data.expirationMonth).trigger('change');
                var date = new Date();
                var currentYear = date.getFullYear();
                if (data.expirationYear <= currentYear) {
                    $creditCard.find('[name$="_year"]').val('').change();
                } else {
                    $creditCard.find('[name$="_year"]').val(data.expirationYear).trigger('change');
                }
                $creditCard.find('input[name$="_cvn"]').val('').trigger('change');
                jQuery('input[name$="creditCard_owner"]').val(data.creditCard.holder);
                uievents.changeFormSelection($('select[name$="_type"]')[0], data.creditCard.type);
                $('.creditCard-number').val(data.creditCard.maskedNumber);
                uievents.changeFormSelection($('[name$="_month"]')[0], data.creditCard.expirationMonth);
                uievents.changeFormSelection($('[name$="_year"]')[0], data.creditCard.expirationYear);
                $('input[name$="_cvn"]').val('');
                // remove error messaging
                $('#PaymentMethod_CREDIT_CARD span.errormessage').remove();
                $('#PaymentMethod_CREDIT_CARD input.errormessage').removeClass('errormessage');
                $('#PaymentMethod_CREDIT_CARD .errorlabel').removeClass('errorlabel');

                $('.paymentform.creditcardpayment .formfield .field-wrapper').each(function () {
                    if ($(this).find('input').val() != undefined) {
                        if ($(this).find('input').val().length > 0) {
                            $(this).parent('.formfield').find('a.clearbutton').show();
                        } else {
                            $(this).parent('.formfield').find('a.clearbutton').hide();
                        }
                    }
                });
                if (data.creditCard.type == 'Visa') {
                    result = 'Visa';
                    //visa
                } else if (data.creditCard.type == 'Discover') {
                    result = 'Discover';
                    //Discover
                } else if (data.creditCard.type == 'Amex') {
                    result = 'Amex';
                    //American Express
                } else if (data.creditCard.type == 'MasterCard') {
                    result = 'MasterCard';
                    //Master Card
                }
                //errorspan.hide();
                $('#paymentmethods').find('select[name$="_paymentMethods_creditCard_type"]').val(result);
                $('.cardtypeimg > div').hide();
                $('.cardtypeimg > div.' + result).show();
            }
        });
    },
    setGiftCertBalanceInfo: function setGiftCertBalanceInfo(amountExpr) {
        if (!amountExpr) {
            jQuery('.balance').empty();
            return;
        }
        $('.balance').append('<div class=\'balanceamt\'>' + Resources.GIFT_CERT_BALANCE + ' ' + amountExpr + ' </div>');
    },
    redeemGiftCert: function redeemGiftCert(giftCertificateId) {
        couponMenthods.setGiftCertError(null);
        couponMenthods.setGiftCertBalanceInfo(null);
        // nothing entered
        if (!giftCertificateId) {
            couponMenthods.setGiftCertError(Resources.GIFT_CERT_INVALID);
            return;
        }
        // attempt to redeem
        var url = util.appendParamsToUrl(Urls.redeemGiftCert, { giftCertificateID: giftCertificateId, format: 'ajax' });
        ajax.getJson({
            url: url,
            callback: function callback(data) {
                if (!data) {
                    couponMenthods.setGiftCertError(Resources.GIFT_CERT_INVALID);
                    return false;
                }
                if (data.redemptionErrorMsg) {
                    couponMenthods.setGiftCertError(data.redemptionErrorMsg);
                    return false;
                }
                if (!data.redemption) {
                    couponMenthods.setGiftCertError(Resources.GIFT_CERT_INVALID);
                    return false;
                }
                // empty input field and display redemption in UI
                $('input[name$=\'billing_giftCertCode\']').val('');
                //couponMenthods.setGiftCertRedemptionInfo(data.redemption.giftCertificateID, data.redemption.amount);
                var countryCode = $('input[name$=\'_addressFields_country\']').val();
                if (typeof countryCode == 'undefined') {
                    countryCode = 'US';
                }
                couponMenthods.updatePaymentMethods(countryCode);
                couponMenthods.updateSummary();
                couponMenthods.ordertotals();
                uievents.synccheckoutH();
            }
        });
    },
    checkGiftCertBalance: function checkGiftCertBalance(giftCertificateId) {
        couponMenthods.setGiftCertError(null);
        couponMenthods.setGiftCertBalanceInfo(null);
        // nothing entered
        if (!giftCertificateId) {
            couponMenthods.setGiftCertError(Resources.GIFT_CERT_MISSING);
            return;
        }
        // load gift certificate details
        var url = util.appendParamsToUrl(Urls.GetGiftCertificateBalance, {
            giftCertificateID: giftCertificateId,
            format: 'ajax'
        });
        ajax.getJson({
            url: url,
            callback: function callback(data) {
                if (!data || !data.giftCertificate) {
                    couponMenthods.setGiftCertError(Resources.GIFT_CERT_INVALID);
                    return false;
                }
                // display details in UI
                couponMenthods.setGiftCertBalanceInfo(data.giftCertificate.balance);
                uievents.synccheckoutH();
            }
        });
    }
};

/**
 * @function
 * @description Fills the Credit Card form with the passed data-parameter and clears the former cvn input
 * @param {Object} data The Credit Card data (holder, type, masked number, expiration month/year)
 */
function setCCFields(data) {

    var $creditCard = $('[data-method="CREDIT_CARD"]');
    $creditCard.find('input[name$="creditCard_owner"]').val(data.holder).trigger('change');
    $creditCard.find('input[name$="creditCard_owner"]').val(data.holder).trigger('blur');
    $creditCard.find('select[name$="_type"]').val(data.type).trigger('change');
    $creditCard.find('select[name$="_type"]').val(data.type).trigger('blur');
    $creditCard.find('input[name*="_creditCard_number"]').val(data.maskedNumber).trigger('change');
    $creditCard.find('input[name*="_creditCard_number"]').val(data.maskedNumber).trigger('blur');
    $creditCard.find('[name$="_expiration_month"]').val(data.expirationMonth).trigger('change');
    var date = new Date();
    var currentYear = date.getFullYear();
    if (data.expirationYear <= currentYear) {
        $creditCard.find('[name$="_year"]').val('').change();
    } else {
        $creditCard.find('[name$="_year"]').val(data.expirationYear).trigger('change');
    }
    $creditCard.find('[name$="_expiration_month"]').val(data.expirationMonth).trigger('blur');
    if (data.expirationYear <= currentYear) {
        $creditCard.find('[name$="_year"]').val('').blur();
    } else {
        $creditCard.find('[name$="_year"]').val(data.expirationYear).trigger('blur');
    }
    $creditCard.find('input[name$="_cvn"]').val('').trigger('change');
    $creditCard.find('input[name$="_cvn"]').val('').trigger('blur');
    uievents.synccheckoutH();
}

/**
 * @function
 * @description Updates the credit card form with the attributes of a given card
 * @param {String} cardID the credit card ID of a given card
 */
function populateCreditCardForm(cardID) {
    // load card details
    var url = util.appendParamToURL(Urls.billingSelectCC, 'creditCardUUID', cardID);
    ajax.getJson({
        url: url,
        callback: function callback(data) {
            uievents.synccheckoutH();
            if (!data) {
                window.alert(Resources.CC_LOAD_ERROR);
                return false;
            }
            setCCFields(data);
            uievents.synccheckoutH();
        }
    });
}

/**
 * @function
 * @description Changes the payment method form depending on the passed paymentMethodID
 * @param {String} paymentMethodID the ID of the payment method, to which the payment method form should be changed to
 */
function updatePaymentMethod(paymentMethodID) {
    var $paymentMethods = $('.payment-method');
    $paymentMethods.removeClass('payment-method-expanded');

    var $selectedPaymentMethod = $paymentMethods.filter('[data-method="' + paymentMethodID + '"]');
    if ($selectedPaymentMethod.length === 0) {
        $selectedPaymentMethod = $('[data-method="Custom"]');
    }
    $selectedPaymentMethod.addClass('payment-method-expanded');

    // ensure checkbox of payment method is checked
    $('input[name$="_selectedPaymentMethodID"]').removeAttr('checked');
    $('input[value=' + paymentMethodID + ']').prop('checked', 'checked');

    //formPrepare.validateForm();
}

/**
 * @function
 * @description loads billing address, Gift Certificates, Coupon and Payment methods
 */
exports.init = function () {
    //var $checkoutForm = $('.checkout-billing');
    //var $addGiftCert = $('#add-giftcert');
    //var $giftCertCode = $('input[name$="_giftCertCode"]');
    //var $addCoupon = $('#add-coupon');
    //var $couponCode = $('input[name$="_couponCode"]');
    var $selectPaymentMethod = $('.payment-method-options');
    var selectedPaymentMethod = $selectPaymentMethod.find(':checked').val();

    /* formPrepare.init({
         formSelector: 'form[id$="billing"]',
         continueSelector: '[name$="billing_save"]'
     });*/
    var activePaymentMethodID = $('body').find('.paymentmethods_cont .input-radio:checked').attr('id');
    if (activePaymentMethodID == 'is-PayPal') {
        $('.paymentform .textinput, .paymentform .yearselect select, .paymentform .monthselect select, .addressoptions .checkinput').removeClass('required');
        $('.cardnotworking').hide();
    } else {
        $('.paymentform .textinput, .paymentform .yearselect select, .paymentform .monthselect select, .addressoptions .checkinput').addClass('required');
        $('.cardnotworking').show();
    }
    if (!jQuery('.creditcardlist select').val()) {
        $('.creditcard_name').val('');
        $('.creditCard-number').val('');
        $('.monthselect').val('');
        $('.yearselect').val('');
        $('.creditcard_cvn').val('');
        $('.cardtypeimg > div').hide();
        $('.expirationdate.error').hide();
        $('.expirationdatevalid.error').hide();
        $('.paymentform a.clearbutton').hide();
    }
    $('.expirationdate .custom-select select').on('blur', function () {
        var d = new Date(),
            mth = d.getMonth() + 1,
            yy = d.getFullYear();
        if (!jQuery(this).val()) {
            $('.expirationdate.error').show();
            $('.expirationdatevalid.error').hide();
        } else {
            if (jQuery('.expirationdate .custom-select.customselect-error').length == 0) {
                $('.expirationdate.error').hide();
                $('.expirationdatevalid.error').hide();
            }
            var selectedMth = $('.expirationdate .custom-select select[id$=\'billing_paymentMethods_creditCard_expiration_month\']').val();
            var selectedyear = $('.expirationdate .custom-select select[id$=\'billing_paymentMethods_creditCard_expiration_year\']').val();
            if (selectedyear && selectedMth) {
                selectedyear = selectedyear.replace(',', '');
                if (selectedyear <= yy && selectedMth < mth) {
                    $('.expirationdate.error').hide();
                    $('.expirationdatevalid.error').show();
                }
            }
        }
    });
    $('body').on('click', '.redemption .discount-success button.remove-cop', function (e) {
        e.preventDefault();
        var url = $(this).val();
        couponMenthods.removeCouponCode(url);
        return false;
    });
    /* JIRA PREV-135 : Disabled Credit Card in BM is displaying in the application.
       Changed default option from 'CREDIT_CARD' to first available payment method.*/
    updatePaymentMethod(selectedPaymentMethod ? selectedPaymentMethod : $('.payment-method-options input').first().val());
    $('body').on('click', '.payment-method-options input[type="radio"]', function () {
        updatePaymentMethod($(this).val());
        if ($(this).is(':checked')) {
            $(this).closest('.toggle').siblings('.toggle').removeClass('active');
            if ($(this).attr('id') == 'is-PayPal') {
                $('.paymentform .textinput, .paymentform .yearselect select, .paymentform .monthselect select, .addressoptions .checkinput').removeClass('required');
                $('.cardnotworking').hide();
            } else {
                $('.paymentform .textinput, .paymentform .yearselect select, .paymentform .monthselect select, .addressoptions .checkinput').addClass('required');
                $('.cardnotworking').show();
            }
            $(this).closest('.toggle').addClass('active');
        }
        uievents.customFields();
        uievents.synccheckoutH();
    });
    $('body').on('click', '.payment-method-options .toggle  img', function () {
        $(this).closest('label').find('input[type="radio"]').trigger('click');
    });

    // select credit card from list
    $('body').on('change', '#creditCardList', function () {
        var cardUUID = $(this).val();
        if (!cardUUID) {
            return;
        }
        populateCreditCardForm(cardUUID);

        // remove server side error
        $('.required.error').removeClass('error');
        $('.error-message').remove();
    });
    $('body').on('click', '#giftcertentry a.remove', function () {
        var gcId = util.trimPrefix($(this).attr('id'), 'rgc-');
        couponMenthods.removeGiftCertificate(gcId);
        return false;
    });
    $('body').on('click', '#check-giftcert', function (e) {
        e.preventDefault();
        var gcId = jQuery('input[name$=\'billing_giftCertCode\']').val().toUpperCase();
        couponMenthods.checkGiftCertBalance(gcId);
        uievents.synccheckoutH();
        return false;
    });

    $('body').on('click', '#add-giftcert', function (e) {
        e.preventDefault();
        var gcId = jQuery('input[name$=\'billing_giftCertCode\']').val().toUpperCase();
        couponMenthods.redeemGiftCert(gcId);
        uievents.synccheckoutH();
        return false;
    });

    $('body').on('click', '#add-coupon', function (e) {
        e.preventDefault();
        var //$error = $checkoutForm.find('.coupon-error'),
        code = $('input[name$="_couponCode"]').val();
        couponMenthods.setCouponError(null);
        if (code.length === 0) {
            couponMenthods.setCouponError(Resources.COUPON_CODE_MISSING);
            return false;
        }

        var url = util.appendParamsToUrl(Urls.addCoupon, {
            couponCode: code,
            format: 'ajax'
        });
        $.getJSON(url, function (data) {
            var msg = '';
            if (!data) {
                msg = Resources.COUPON_INVALID;
                couponMenthods.setCouponError(msg);
                return false;
            }
            if (data.redemption.redemptionErrorMsg) {
                couponMenthods.setCouponError(data.redemption.redemptionErrorMsg);
                return false;
            }
            if (!data.redemption) {
                msg = Resources.COUPON_INVALID;
                couponMenthods.setCouponError(msg);
                return false;
            }
            // empty input field and display redemption in UI
            jQuery('input[name$=\'_billing_couponCode\']').val('');
            jQuery('input[name$=\'_billing_couponCode\']').removeClass('errorclient');
            couponMenthods.setCouponRedemptionInfo(data.redemption);
            // update gift card redemptions as amounts might have changed after coupon
            jQuery.each(data.redemption.gcRedemptions, function () {
                couponMenthods.setGiftCertRedemptionInfo(this.giftCertificateID, this.amount);
            });
            var countryCode = $('input[name$=\'_addressFields_country\']').val();
            if (typeof countryCode == 'undefined') {
                countryCode = 'US';
            }

            couponMenthods.updateSummary();
            couponMenthods.updatecartsummary();
            couponMenthods.updatePaymentMethods(countryCode);
            couponMenthods.ordertotals();
            uievents.synccheckoutH();
            // Determine if a bonus-product promotion was triggered by the coupon.
            // If so, display a popup alert and give the customer a chance to
            // return to the cart and select the bonus product.
            if (data.redemption.bonusPromotionApplied) {
                $('.bonusdiscountcontainer .bonusproductpromo').append(data.redemption.bonusPromotionCallout);
                $('.bonusdiscountcontainer div.details').html(data.redemption.bonusPromotionDetails);

                $('.bonusdiscountcontainer').show();
                $('.bonusdiscountcontainer').dialog({
                    title: Resources.BONUS_PRODUCT,
                    bgiframe: true,
                    autoOpen: false,
                    modal: true,
                    height: 250,
                    width: 500,
                    resizable: false
                });
                jQuery('.bonusdiscountcontainer').dialog('open');
            }

            jQuery('.selectBonusBtn').unbind('click').click(function () {
                jQuery('.bonusdiscountcontainer').dialog('close');
                location.href = '${URLUtils.https(\'Cart-Show\')}';
                return false;
            });

            jQuery('.noBonusBtn').unbind('click').click(function () {
                jQuery('.bonusdiscountcontainer').dialog('close');
            });
        });
    });

    // trigger events on enter
    $('body').on('keydown', 'input[name$="_couponCode"]', function (e) {
        if (e.which === 13) {
            e.preventDefault();
            $('#add-coupon').click();
        }
    });
    $('body').on('keydown', 'input[name$="_giftCertCode"]', function (e) {
        if (e.which === 13) {
            e.preventDefault();
            $('#add-giftcert').click();
        }
    });

    $('.trypaypal').on('click', function () {
        $('.continuecheckout-paypallogin').trigger('click');
    });

    if ($('.pt_checkout .paymentform.paypal .error-paypal-heading').length > 0 || $('.pt_checkout .paymentform.paypal .paypalmsg.success-paypal').length > 0) {
        $('body, html').animate({
            scrollTop: $('#paymentmethodform legend').offset().top
        }, 600);
    }

    $('.switchtocredit').on('click', function () {
        $('.paymentmethods_cont .toggle').eq(0).find('.input-radio').trigger('click');
    });
    //PREVAIL - init Address Validation
    require('../../addressvalidation').init();

    util.cardtype.init();
    $('body').on('click', '.couponcode .label', function () {
        if ($('.promo-input-button').is(':visible') == true) {
            $('.promo-input-button').hide();
            $(this).closest('.couponcode').find('span.error').hide();
        } else {
            $('.promo-input-button').show();
            $(this).closest('.couponcode').find('span.error').show();
        }
        uievents.synccheckoutH();
    });
    if ($('.guestbillingform .password .errormessage').length > 0) {
        $('.guestbillingform .password .errormessage').remove();
    }

    $('.guestbillingform .billing-conpassword').blur(function () {
        var billingPas = $('.guestbillingform .billing-password').val();
        var billingConpas = $('.guestbillingform .billing-conpassword').val();
        $('.guestbillingform .password .errormessage').remove();
        if (billingPas.length > 0) {
            if (billingConpas.length < 5) {
                $('.guestbillingform .billing-conpassword').addClass('errorclient');
                $('.billingconfpassword').text(Resources.billingpasswordconfirm_min).removeClass('hide');
                //$('.continuecheckoutbutton .continuecheckout').attr('disabled', 'disabled');
            } else if (billingPas != billingConpas) {
                $('.guestbillingform .billing-conpassword').addClass('errorclient');
                $('.billingconfpassword').text(Resources.billingpasswordconfirm).removeClass('hide');
                //$('.continuecheckoutbutton .continuecheckout').attr('disabled', 'disabled');
            } else {
                $('.guestbillingform .billing-conpassword').removeClass('errorclient');
                $('.billingconfpassword').text(Resources.billingpasswordconfirm).addClass('hide');
                if (!$('input[name$="_creditCard_owner"]').hasClass('errorclient') && !$('input[name$="_creditCard_number"]').hasClass('errorclient') && !$('input[name$="_creditCard_cvn"]').hasClass('errorclient') && !$('select[name$="paymentMethods_creditCard_year"]').hasClass('errorclient') && !$('select[name$="paymentMethods_creditCard_month"]').hasClass('errorclient') && $('input[name$="_creditCard_owner"]').val() != '' && $('input[name$="_creditCard_number"]').val() != '' && $('input[name$="_creditCard_cvn"]').val() != '' && $('select[name$="paymentMethods_creditCard_year"]').val() != '' && $('select[name$="paymentMethods_creditCard_month"]').val() != '') {
                    //$('.continuecheckoutbutton .continuecheckout').removeAttr('disabled');
                }
            }
        } else {
            $('.guestbillingform .billing-conpassword').removeClass('errorclient');
            $('.billingconfpassword').text(Resources.billingpasswordconfirm).addClass('hide');
            if (!$('input[name$="_creditCard_owner"]').hasClass('errorclient') && !$('input[name$="_creditCard_number"]').hasClass('errorclient') && !$('input[name$="_creditCard_cvn"]').hasClass('errorclient') && !$('select[name$="paymentMethods_creditCard_year"]').hasClass('errorclient') && !$('select[name$="paymentMethods_creditCard_month"]').hasClass('errorclient') && $('input[name$="_creditCard_owner"]').val() != '' && $('input[name$="_creditCard_number"]').val() != '' && $('input[name$="_creditCard_cvn"]').val() != '' && $('select[name$="paymentMethods_creditCard_year"]').val() != '' && $('select[name$="paymentMethods_creditCard_month"]').val() != '') {
                //$('.continuecheckoutbutton .continuecheckout').removeAttr('disabled');
            }
        }
    });
    $('.guestbillingform .billing-password').bind('blur', function () {
        var billingPas = $('.guestbillingform .billing-password').val();
        var billingConpas = $('.guestbillingform .billing-conpassword').val();
        //$('.continuecheckoutbutton .continuecheckout').attr('disabled', 'disabled');

        if ($(this).length > 0) {
            $('.guestbillingform .billing-conpassword').addClass('required');
        } else {
            $('.guestbillingform .billing-conpassword').removeClass('required');
            $('.guestbillingform .billing-conpassword').removeClass('errorclient');
        }
        if (billingPas.length > 0) {
            if (billingPas.length < 5) {
                $('.guestbillingform .billing-password').addClass('errorclient');
                $('.billingpassword').text(Resources.billingpasswordconfirm_min).removeClass('hide');
                //$('.continuecheckoutbutton .continuecheckout').attr('disabled', 'disabled');
            } else {
                $('.guestbillingform .billing-password').removeClass('errorclient');
                $('.billingpassword').addClass('hide');
            }
        } else {
            $('.guestbillingform .billing-password').removeClass('errorclient');
            $('.billingpassword').addClass('hide');
        }

        if (billingPas == billingConpas && billingPas.length >= 5) {
            if (!$('input[name$="_creditCard_owner"]').hasClass('errorclient') && !$('input[name$="_creditCard_number"]').hasClass('errorclient') && !$('input[name$="_creditCard_cvn"]').hasClass('errorclient') && !$('select[name$="paymentMethods_creditCard_year"]').hasClass('errorclient') && !$('select[name$="paymentMethods_creditCard_month"]').hasClass('errorclient') && $('input[name$="_creditCard_owner"]').val() != '' && $('input[name$="_creditCard_number"]').val() != '' && $('input[name$="_creditCard_cvn"]').val() != '' && $('select[name$="paymentMethods_creditCard_year"]').val() != '' && $('select[name$="paymentMethods_creditCard_month"]').val() != '') {
                //$('.continuecheckoutbutton .continuecheckout').removeAttr('disabled');
            }
        }
    });

    if ($('.expirationdate .custom-select .field-wrapper span.errormessage').length > 0) {
        $('.expirationdate .custom-select span.errormessage').hide();
        $('.expirationdate.error').show();
    }
    $('.checkoutbilling .continue-checkout-button .continuecheckout').click(function () {
        var errorcount = 0;
        if (!$('#PaymentMethod_CREDIT_CARD').is(':visible')) {
            $('.paymentform .textinput, .paymentform select').removeClass('required');
        }
        if (!jQuery('form[id$="_billing"]').valid()) {
            jQuery('.state-blk select').trigger('blur');
            if (jQuery('.billing-address-fields').hasClass('hide')) {
                $('select[name$=billing_addressList]').val('');
                $('input[name$="billingAddress_selectedbillingadd"]').val('');
                $('.custom-select').each(function () {
                    var selectVal = $(this).find(':selected').text();
                    $(this).find('.selectorOut').text(selectVal);
                });
                jQuery('.billing-address-fields').removeClass('hide');
                jQuery('.selected-billing-address , .selected-shipping-address').addClass('hide');
                uievents.customFields();
            }
            errorcount++;
        }
        if ($('#PaymentMethod_CREDIT_CARD').is(':visible')) {
            if (!$('form[id$="dwfrm_billing"]').valid()) {
                $('.expirationdate select').trigger('blur');

                if ($('.vip-terms .custom-link').is(':visible') && !$('input[name$="_isvip"]').is(':checked')) {
                    if ($('.vip-terms .custom-checkbox .vip-message #message').length == 0) {
                        $('.vip-terms .custom-checkbox .vip-message').prepend('<span id="message" class="error vipcheckmessage">Please check the box to confirm you have read and agree to the Rapala VIP Terms & Conditions.</span>');
                        $('.singleshipping_error').show();
                    }
                    $('.vip-terms .custom-checkbox .custom-link').addClass('error');
                    uievents.synccheckoutH();
                }
                if ($('.knife .custom-link.agecheck-link').is(':visible') && !$('input[name$="agecheck_ischeck"]').is(':checked')) {
                    if ($('.addressoptions.knife .agecheck_message #message').length == 0) {
                        $('.addressoptions.knife .agecheck_message').prepend('<span id="message" class="error agecheckmessage">Please Verify you are 18 years of age or older, or remove all knives from your cart.</span>');
                        $('.singleshipping_error').show();
                    }
                    $('.addressoptions.knife > .custom-checkbox .custom-link').addClass('error');
                    uievents.synccheckoutH();
                }
                errorcount++;
            } else {

                if ($('.vip-terms .custom-link').is(':visible') && !$('input[name$="_isvip"]').is(':checked')) {
                    if ($('.vip-terms .custom-checkbox .vip-message #message').length == 0) {
                        $('.vip-terms .custom-checkbox .vip-message').prepend('<span id="message" class="error vipcheckmessage">Please check the box to confirm you have read and agree to the Rapala VIP Terms & Conditions.</span>');
                        $('.singleshipping_error').show();
                    }
                    $('.vip-terms .custom-checkbox .custom-link').addClass('error');
                    uievents.synccheckoutH();
                    errorcount++;
                }
                if ($('.knife .custom-link.agecheck-link').is(':visible') && !$('input[name$="agecheck_ischeck"]').is(':checked')) {
                    if ($('.addressoptions.knife .agecheck_message #message').length == 0) {
                        $('.addressoptions.knife .agecheck_message').prepend('<span id="message" class="error agecheckmessage">Please Verify you are 18 years of age or older, or remove all knives from your cart.</span>');
                        $('.singleshipping_error').show();
                    }
                    $('.addressoptions.knife > .custom-checkbox .custom-link').addClass('error');
                    uievents.synccheckoutH();
                    errorcount++;
                }
            }
        } else {
            if ($('.vip-terms .custom-link').is(':visible') && !$('input[name$="_isvip"]').is(':checked')) {
                if ($('.vip-terms .custom-checkbox .vip-message #message').length == 0) {
                    $('.vip-terms .custom-checkbox .vip-message').prepend('<span id="message" class="error vipcheckmessage">Please check the box to confirm you have read and agree to the Rapala VIP Terms & Conditions.</span>');
                    $('.singleshipping_error').show();
                }
                $('.vip-terms .custom-checkbox .custom-link').addClass('error');
                uievents.synccheckoutH();
                errorcount++;
            }
            if ($('.knife .custom-link.agecheck-link').is(':visible') && !$('input[name$="agecheck_ischeck"]').is(':checked')) {
                if ($('.addressoptions.knife .agecheck_message #message').length == 0) {
                    $('.addressoptions.knife  .agecheck_message').prepend('<span id="message" class="error agecheckmessage">Please Verify you are 18 years of age or older, or remove all knives from your cart.</span>');
                    $('.singleshipping_error').show();
                }
                $('.addressoptions.knife  > .custom-checkbox .custom-link').addClass('error');
                uievents.synccheckoutH();
                errorcount++;
            }
            /*     if(!$('input.paypalprocessed').val()){
                     $('.paymentform.paypal .paypalmsg').addClass('error');
                      return false;
                  }*/
        }
        if (errorcount > 0) {
            $('.singleshipping_error').show();
            return false;
        }
        if ($('.billing-address-fields').is(':visible')) {
            $('.billing-address-fields .state-blk select').blur();
        }
    });
    //JIRA PREV-38 : Billing page_Credit Card Section: CVV number should not pre-populate.
    /*if ($('.bypassDAV').length === 0) {
        $('.spc-billing .form-row.cvn input').val('');
    }*/
    if ($('.invalidCreditcard').length > 0) {
        //$('.singleshipping_error').show();
        $('.cardnumber input').addClass('errorclient');
        $('.cardnumber .labeltext').addClass('error');
        $('<span class="invalidcredit error">- Invalid Credit Card Number</span>').appendTo('.cardnumber .field-wrapper');
        //$('.singleshipping_error').show();
        $('.cardnumber .errormessage').css('display', 'none');
    }
};

},{"../../addressvalidation":14,"../../ajax":15,"../../progress":52,"../../tooltip":61,"../../uievents":62,"../../util":63,"../../validator":64}],36:[function(require,module,exports){
'use strict';

var _ = require('lodash');

var $form, $requiredInputs, validator;

var hasEmptyRequired = function hasEmptyRequired() {
    // filter out only the visible fields
    var requiredValues = $requiredInputs.filter(':visible').map(function () {
        return $(this).val();
    });
    return _(requiredValues).contains('');
};

var validateForm = function validateForm() {
    // only validate form when all required fields are filled to avoid
    // throwing errors on empty form
    if (!validator) {
        return;
    }
    if (!hasEmptyRequired()) {
        if (validator.form()) {
            //$continue.removeAttr('disabled');
        }
    } else {
            //$continue.attr('disabled', 'disabled');
        }
};

var validateEl = function validateEl() {
    if ($(this).val() === '') {
        // $continue.attr('disabled', 'disabled');
    } else {
        // enable continue button on last required field that is valid
        // only validate single field
        if (validator.element(this) && !hasEmptyRequired()) {
            //$continue.removeAttr('disabled');
        } else {
                //$continue.attr('disabled', 'disabled');
            }
    }
};

var init = function init(opts) {
    if (!opts.formSelector || !opts.continueSelector) {
        throw new Error('Missing form and continue action selectors.');
    }
    $form = $(opts.formSelector);
    //$continue = $(opts.continueSelector);
    validator = $form.validate();
    $requiredInputs = $('.required', $form).find(':input');
    validateForm();
    // start listening
    $requiredInputs.on('change', validateEl);
    $requiredInputs.filter('input').on('keyup', _.debounce(validateEl, 200));
};

exports.init = init;
exports.validateForm = validateForm;
exports.validateEl = validateEl;

},{"lodash":5}],37:[function(require,module,exports){
'use strict';

var address = require('./address'),
    billing = require('./billing'),
    multiship = require('./multiship'),
    uievents = require('../../uievents'),
    util = require('../../util'),
    shipping = require('./shipping');

/**
 * @function Initializes the page events depending on the checkout stage (shipping/billing)
 */
exports.init = function () {
    address.init();
    if ($('.allotment-label').length > 0 || $('.brand-rapala-checkout').length > 0) {
        $('body').find('#main').addClass('allotment-available');
    }
    if ($('.checkout-shipping').length > 0) {
        shipping.init();
    } else if ($('.checkout-multi-shipping').length > 0) {
        multiship.init();
    } else {
        billing.init();
    }
    $(window).resize(function () {
        $('.ui-dialog-content:visible').each(function () {
            $(this).dialog('option', 'position', $(this).dialog('option', 'position'));
        });
    });
    $('body').find('.form-row').each(function () {
        if ($(this).find('.field-wrapper .clearbutton').length == 0 && $(this).find('.field-wrapper').find('input[type=\'text\']').length > 0) {
            $(this).find('.field-wrapper').append('<a class="clearbutton"></a>');
            if ($(this).find('.field-wrapper').find('input[type=\'text\']').val().length > 0) {
                $(this).find('.field-wrapper').find('.clearbutton').show();
            }
        } else if ($(this).find('.field-wrapper .clearbutton').length == 0 && $(this).find('.field-wrapper').find('input[type=\'password\']').length > 0) {
            $(this).find('.field-wrapper').append('<a class="clearbutton"></a>');
            if ($(this).find('.field-wrapper').find('input[type=\'password\']').val().length > 0) {
                $(this).find('.field-wrapper').find('.clearbutton').show();
            }
        }
    });
    $('body').find('.form-row .field-wrapper input').on('focus', function () {
        if ($(this).hasClass('errorclient')) {
            $(this).removeClass('errorclient');
        }
    });
    $('body').find('.form-row .field-wrapper input').on('keyup input blur', function () {
        if ($(this).val() != undefined) {
            if ($(this).val().length > 0) {
                $(this).closest('.form-row').find('a.clearbutton').show();
            } else {
                $(this).closest('.form-row').find('a.clearbutton').hide();
            }
        }
    });
    $('body').find('input').focusin(function () {
        $(this).closest('.formfield, .form-row').removeClass('inputlabel');
        $(this).closest('.formfield').find('.form-row , .label span').removeClass('inputlabel');
        $(this).removeClass('errorclient');
        $(this).closest('.formfield , .form-row').find('.logerror , .existing_register').css('display', 'none');
    });
    $('body').find('.form-row a.clearbutton').on('click', function () {
        $(this).closest('.field-wrapper').find('span').remove();
        $(this).closest('.field-wrapper').find('.required').removeClass('errorclient');
        $(this).closest('.form-row').find('.form-row , .label span').removeClass('inputlabel');
        $(this).closest('.form-row').find('input').val('');
        $(this).closest('.form-row').find('a.clearbutton').hide();
        $(this).closest('.form-row').find('span.logerror , .existing_register').hide();
    });

    $('.pt_checkout .textinput, .pt_checkout .custom-select-wrap, .pt_checkout .textinputpw').bind('keyup blur', function () {
        if (jQuery('.New-shipping-authentication-detail').find('input[name$=\'_ProcessWay\']').val() == 2) {
            var errordiv = '<div class=\'error loginerror\'>' + Resources.checkout_login_error + '</div>';
            if ($('.shippinglogindetails').is(':visible') || !$('.checkoutshipping form[id$="_login"]').valid()) {
                if ($('.checkout .loginerror').length > 0) {
                    $('.checkout .loginerror').remove();
                }
                jQuery('.state-blk .stateerror.error').hide();
                if ($(this).closest('.formfield').find('.loginerror').length == 0) {
                    $(this).closest('.formfield').append(errordiv);
                }
            }
        }
        setTimeout(function () {
            uievents.synccheckoutH();
        }, 100);
    });

    $('.new-address-button').bind('click', function () {
        //jQuery("input[name=${pdict.CurrentForms.singleshipping.shippingAddress.makedefault.htmlName}]").attr('checked', true);
        $('.addressoptions-addToAddressBook,.addressoptions-makedefault ').removeClass('hide');
        $('input[name$=\'shippingAddress_selectedaddress\']').val('');
        $('.selected-shipping-address').empty();
        $('input[name$=\'_addressid\']').val('');
        $('input[name$=\'_addressFields_firstName\']').val('');
        $('input[name$=\'_addressFields_lastName\']').val('');
        $('input[name$=\'_addressFields_address1\']').val('');
        $('input[name$=\'_addressFields_address2\']').val('');
        $('input[name$=\'_addressFields_city\']').val('');
        $('input[name$=\'_addressFields_postal\']').val('');
        $('input[name$=\'_addressFields_phone\']').val('');
        uievents.changeFormSelection(jQuery('select[name$=\'_addressFields_states_state\']')[0], '');
        uievents.changeFormSelection(jQuery('select.address-select')[0], '');
        $('.shipping-address-field-section').removeClass('hide');
        $('.selected-shipping-address, .new-address-field').addClass('hide');
        $('input[name$=\'_addressFields_phone\']').closest('div.phone').find('span.errorclient').remove();
        $('input[name$=\'_addressFields_postal\']').closest('div.zip').find('span.errorclient').remove();
        $('.addressform .form-row.custom-select').removeClass('customselect-error');
        $('.custom-select').each(function () {
            var selectVal = $(this).find(':selected').text();
            $(this).find('.selectorOut').text(selectVal);
        });
        if ($('.checkout').hasClass('billingsection')) {
            $('body').find('input[name$=_sameasshippingaddress]').removeAttr('checked');
            $('body').find('input[name$=_sameasshippingaddress]').closest('.custom-checkbox').find('.custom-link').removeClass('active');
        }
        $('a.clearbutton').hide();
        $('.shipping-address-field-section .form-row').find('input').removeClass('errorclient');
        uievents.customFields();
        uievents.synccheckoutH();
    });
    $('.edit-address-field .edit-billing-button').bind('click', function () {
        var $form = $('.address');
        var selectedAddress = $(this).closest('.edit-address-field').data('address');
        util.fillAddressFields(selectedAddress, $form);
        $('.edit-address-field').addClass('hide');
        $('.selected-shipping-address, .new-address-field').addClass('hide');
        $('.billing-address-fields').removeClass('hide');
        uievents.customFields();
        uievents.synccheckoutH();
    });
    uievents.synccheckoutH();
    //if on the order review page and there are products that are not available diable the submit order button
    /* if ($('.order-summary-footer').length > 0) {
         if ($('.notavailable').length > 0) {
             $('.order-summary-footer .submit-order .button-fancy-large').attr('disabled', 'disabled');
         }
     }*/
};

},{"../../uievents":62,"../../util":63,"./address":34,"./billing":35,"./multiship":38,"./shipping":39}],38:[function(require,module,exports){
'use strict';

var address = require('./address'),
    formPrepare = require('./formPrepare'),
    dialog = require('../../dialog'),
    util = require('../../util'),
    shipping = require('./shipping'),
    //JIRA PREV-99 : shipping methods is not displayed for 2nd address in right nav.
ajax = require('../../ajax'); //JIRA PREV-99 : shipping methods is not displayed for 2nd address in right nav.

/**
 * @function
 * @description Initializes gift message box for multiship shipping, the message box starts off as hidden and this will display it if the radio button is checked to yes, also added event handler to listen for when a radio button is pressed to display the message box
 */
function initMultiGiftMessageBox() {
    $.each($('.item-list'), function () {
        var $this = $(this);
        var $giftMessage = $this.find('.gift-message-text');

        //handle initial load
        $giftMessage.toggleClass('hidden', $('input[name$="_isGift"]:checked', this).val() !== 'true');

        //set event listeners
        $this.on('change', function () {
            $giftMessage.toggleClass('hidden', $('input[name$="_isGift"]:checked', this).val() !== 'true');
        });
    });
}

/**
 * @function
 * @description capture add edit adddress form events
 */
function addEditAddress(target) {
    var $addressForm = $('form[name$="multishipping_editAddress"]'),
        $addressDropdown = $addressForm.find('select[name$=_addressList]'),
        $addressList = $addressForm.find('.address-list'),
        add = true,
        selectedAddressUUID = $(target).parent().siblings('.select-address').val();

    $addressDropdown.on('change', function (e) {
        e.preventDefault();
        var selectedAddress = $addressList.find('select').val();
        if (selectedAddress !== 'newAddress') {
            selectedAddress = $.grep($addressList.data('addresses'), function (add) {
                return add.UUID === selectedAddress;
            })[0];
            add = false;
            // proceed to fill the form with the selected address
            util.fillAddressFields(selectedAddress, $addressForm);
        } else {
            //reset the form if the value of the option is not a UUID
            add = true; //PREVAIL - Added to handle back and forth scenarios.
            $addressForm.find('.input-text, .input-select').val('');
        }
    });

    $addressForm.on('click', '.cancel', function (e) {
        e.preventDefault();
        dialog.close();
    });

    $addressForm.on('submit', function (e) {
        e.preventDefault();

        // PREV-98: validation error messages are not displayed when adding address in Multi-Shipping. Added the following IF block.
        if (!$addressForm.valid()) {
            return false;
        }
        $.getJSON(Urls.addEditAddress, $addressForm.serialize(), function (response) {
            if (!response.success) {
                // @TODO: figure out a way to handle error on the form
                return;
            }
            var address = response.address,
                $shippingAddress = $(target).closest('.shippingaddress'),
                $select = $shippingAddress.find('.select-address'),
                $selected = $select.find('option:selected'),
                newOption = '<option value="' + address.UUID + '">' + (address.ID ? '(' + address.ID + ')' : address.firstName + ' ' + address.lastName) + ', ' + address.address1 + ', ' + address.city + ', ' + address.stateCode + ', ' + address.postalCode + '</option>';
            dialog.close();
            if (add) {
                $('.shippingaddress select').removeClass('no-option').append(newOption);
                $('.no-address').hide();
            } else {
                $('.shippingaddress select').find('option[value="' + address.UUID + '"]').html(newOption);
            }
            // if there's no previously selected option, select it
            if ($selected.length === 0 || $selected.val() === '') {
                $select.find('option[value="' + address.UUID + '"]').prop('selected', 'selected').trigger('change');
            }
        });
    });

    //preserve the uuid of the option for the hop up form
    if (selectedAddressUUID) {
        //update the form with selected address
        $addressList.find('option').each(function () {
            //check the values of the options
            if ($(this).attr('value') === selectedAddressUUID) {
                $(this).prop('selected', 'selected');
                $addressDropdown.trigger('change');
            }
        });
    }
}

/**
 * @function
 * @description shows gift message box in multiship, and if the page is the multi shipping address page it will call initmultishipshipaddress() to initialize the form
 */
exports.init = function () {
    initMultiGiftMessageBox();
    if ($('.cart-row .shippingaddress .select-address').length > 0) {
        formPrepare.init({
            continueSelector: '[name$="addressSelection_save"]',
            formSelector: '[id$="multishipping_addressSelection"]'
        });
    }
    $('.edit-address').on('click', 'a', function (e) {
        e.preventDefault(); //JIRA PREV-205-Checkout Multiple Shipping Page - In Add/Edit address page cancel button not responding
        dialog.open({
            url: this.href,
            options: {
                open: function open() {
                    address.init();
                    addEditAddress(e.target);
                    require('../../validator').init(); //JIRA PREV-98 : validation error messages are not displayed when adding  multiple address.re-init validator.
                    require('../../tooltip').init(); // JIRA PREV-84 : Multiple shipping page: Not displaying Tool tip. re-init tooltips.
                }
            }
        });
    });

    /*
      Start JIRA PREV-99 : shipping methods is not displayed for 2nd address in right nav
      Start JIRA PREV-103 : Selected shipping method will not update automatically in right nav
    */
    $(document).find('.checkoutmultishipping select[name$="_shippingMethodID"]').on('change', function () {
        var shipmentID = $(this).data('shipmentid');
        var shippingMethodId = $('option:selected', this).attr('value');
        ajax.getJson({
            url: Urls.multiShippingSelectSM,
            data: {
                'shipmentID': shipmentID,
                'shippingMethodId': shippingMethodId
            },
            callback: function callback(data) {
                shipping.updateSummary();
                if (!data || !data.success) {
                    window.alert('Could not select shipping method.');
                    return false;
                }
            }
        });
    });
    /*End JIRA PREV-103, PREV-99*/
};

},{"../../ajax":15,"../../dialog":23,"../../tooltip":61,"../../util":63,"../../validator":64,"./address":34,"./formPrepare":36,"./shipping":39}],39:[function(require,module,exports){
'use strict';

var ajax = require('../../ajax'),
    progress = require('../../progress'),
    tooltip = require('../../tooltip'),
    util = require('../../util'),
    dialog = require('../../dialog'),
    uievents = require('../../uievents');

//var shippingMethods;

/**
 * @function
 * @description Initializes gift message box, if shipment is gift
 */
function giftMessageBox() {
    // show gift message box, if shipment is gift
    $('.gift-message-text').toggleClass('hidden', $('input[name$="_shippingAddress_isGift"]:checked').val() !== 'true');
}

/**
 * @function
 * @description updates the order summary based on a possibly recalculated basket after a shipping promotion has been applied
 */
function updateSummary() {
    var $summary = $('#secondary .new-summery-cart');
    // indicate progress
    progress.show($summary);
    var stateValue = $('body').find('select[id$="_addressFields_states_state"]').val();
    var url = util.appendParamToURL(Urls.summaryRefreshURL, 'selectedState', stateValue);
    // load the updated summary area
    $summary.load(url, function () {
        // hide edit shipping method link
        $summary.fadeIn('fast');
        $summary.find('.checkout-mini-cart .minishipment .header a').hide();
        $summary.find('.order-totals-table .order-shipping .label a').hide();
        uievents.synccheckoutH();
    });
}

/**
 * @function
 * @description Helper method which constructs a URL for an AJAX request using the
 * entered address information as URL request parameters.
 */
function getShippingMethodURL(url, extraParams) {
    var $form = $('.address');
    var params = {
        address1: $form.find('input[name$="_address1"]').val(),
        address2: $form.find('input[name$="_address2"]').val(),
        countryCode: $form.find('select[id$="_country"]').val(),
        stateCode: $form.find('select[id$="_state"]').val(),
        postalCode: $form.find('input[name$="_postal"]').val(),
        city: $form.find('input[name$="_city"]').val()
    };
    return util.appendParamsToUrl(url, $.extend(params, extraParams));
}

/**
 * @function
 * @description selects a shipping method for the default shipment and updates the summary section on the right hand side
 * @param
 */
function selectShippingMethod(shippingMethodID) {
    // nothing entered
    if (!shippingMethodID) {
        return;
    }
    // attempt to set shipping method
    var url = getShippingMethodURL(Urls.selectShippingMethodsList, {
        shippingMethodID: shippingMethodID
    });
    ajax.getJson({
        url: url,
        callback: function callback(data) {
            updateSummary();
            uievents.synccheckoutH();
            if (!data || !data.shippingMethodID) {
                window.alert('Couldn\'t select shipping method.');
                return false;
            }
            // display promotion in UI and update the summary section,
            // if some promotions were applied
            $('.shippingpromotions').empty();

            // if (data.shippingPriceAdjustments && data.shippingPriceAdjustments.length > 0) {
            // 	var len = data.shippingPriceAdjustments.length;
            // 	for (var i=0; i < len; i++) {
            // 		var spa = data.shippingPriceAdjustments[i];
            // 	}
            // }
        }
    });
}

/**
 * @function
 * @description Make an AJAX request to the server to retrieve the list of applicable shipping methods
 * based on the merchandise in the cart and the currently entered shipping address
 * (the address may be only partially entered).  If the list of applicable shipping methods
 * has changed because new address information has been entered, then issue another AJAX
 * request which updates the currently selected shipping method (if needed) and also updates
 * the UI.
 */
function updateShippingMethodList() {
    var $shippingMethodList = $('#shipping-method-list');
    if (!$shippingMethodList || $shippingMethodList.length === 0) {
        return;
    }
    var url = getShippingMethodURL(Urls.shippingMethodsJSON);

    ajax.getJson({
        url: url,
        callback: function callback(data) {
            if (!data) {
                window.alert('Couldn\'t get list of applicable shipping methods.');
                return false;
            }
            /*if (false && shippingMethods && shippingMethods.toString() === data.toString()) { // PREVAIL-Added for 'false' to handle SPC.
                // No need to update the UI.  The list has not changed.
                return true;
            }*/

            // We need to update the UI.  The list has changed.
            // Cache the array of returned shipping methods.
            //shippingMethods = data;
            // indicate progress
            progress.show($shippingMethodList);

            // load the shipping method form
            var smlUrl = getShippingMethodURL(Urls.shippingMethodsList);
            $shippingMethodList.load(smlUrl, function () {
                $shippingMethodList.fadeIn('fast');
                // rebind the radio buttons onclick function to a handler.
                $shippingMethodList.find('[name$="_shippingMethodID"]').click(function () {
                    $('.shipping-methods .shipping-method .value .custom-link ').removeClass('active');
                    $(this).closest('.custom-link').addClass('active');
                    selectShippingMethod($(this).val());
                });

                // update the summary
                updateSummary();
                uievents.synccheckoutH();
                progress.hide();
                tooltip.init();
                //if nothing is selected in the shipping methods select the first one
                if ($shippingMethodList.find('.input-radio:checked').length === 0) {
                    $shippingMethodList.find('.input-radio:first').prop('checked', 'checked');
                }
            });
        }
    });
}

function signin() {
    $('#addressform .textinput').addClass('blured');
    $('#addressform .custom-select').addClass('blured');
    $('#addressform .custom-checkbox').addClass('blured');
    $('.signintomyaccount-block,.shipping-createrapalaaccount,.shipping-confirmemailaddress,.shipping-emailaddress,.shipping-guestconfirmemailaddress,.shipping-guestemailaddress,.shipping-password,.shipping-confirmpassword,.shipping-checkoutasguest,.or1,.createaccountmsg').addClass('hide');
    $('.checkoutasguest-block,.shippinglogindetails,.createanaccount-block,.or2,.addressoptions-addToAddressBook,.addressoptions-makedefault,.addressid').removeClass('hide');
    $('.shippinglogindetails').find('input[name$=\'_username\'],input[name$=\'_password\']').addClass('required');
    $('.New-shipping-authentication-detail').find('input[name$=\'_passwordconfirm\'],input[name$=\'_password\'],input[name$=\'_email\'],input[name$=\'_emailconfirm\'],input[name$=\'_guestemailconfirm\'],input[name$=\'_guestemail\']').removeClass('required');
    $('.New-shipping-authentication-detail').find('input[name$=\'_ProcessWay\']').val('2');
    $('.New-shipping-authentication-detail').find('input[name$=\'_passwordconfirm\'],input[name$=\'_password\']').val('');
    $('.checkout .shipping-address-field-section .formfield span.errorclient').remove();
    $('.shipping-address-field-section').addClass('signin-error');
    uievents.synccheckoutH();
}

exports.init = function () {
    if ($(document).find('.address-select').val() != '' && $(document).find('.address-select').val() != undefined) {
        $(document).find('.shipping-address-field-section').addClass('hide');
    } else {
        $(document).find('.shipping-address-field-section').removeClass('hide');
        $(document).find('.selected-shipping-address').addClass('hide');
        $(document).find('.new-address-field').addClass('hide');
    }
    if ($(document).find('.fromreturn1').val() == 'true') {
        $(document).find('.shipping-address-field-section').removeClass('hide');
    }
    $('input[name$="_shippingAddress_isGift"]').on('click', giftMessageBox);

    $('.address').on('change', 'input[name$="_addressFields_address1"], input[name$="_addressFields_address2"], select[name$="_addressFields_states_state"], input[name$="_addressFields_city"], input[name$="_addressFields_postal"]', // PREVAIL-Changed ZIP to postal
    updateShippingMethodList);

    giftMessageBox();
    updateShippingMethodList();

    $('.continue-checkout-button .continue-checkout').on('click', function () {
        var form = $(this).closest('form[id$="_shippingAddress"]');
        if ($('.state-blk select').valid() == 0) {
            if (!$('.state-blk.custom-select').hasClass('blured')) {
                $('.state-blk.custom-select').addClass('customselect-error');
                //$('.state-blk .stateerror').show();
            }
        } else {
            //$('.state-blk  .stateerror').hide();
            $('.state-blk.custom-select').removeClass('customselect-error');
        }

        if (!$('.checkoutasguestbutton').is(':visible')) {
            $('.guestemailcon').blur();
            $('.guestemail').blur();
        }
        if (!form.valid()) {
            if (jQuery('.shipping-address-field-section').hasClass('hide')) {
                $('select[name$=singleshipping_addressList]').val('');
                $('input[name$="singleshipping_shippingAddress_selectedaddress"]').val('');
                $('.custom-select').each(function () {
                    var selectVal = $(this).find(':selected').text();
                    $(this).find('.selectorOut').text(selectVal);
                });
                $('.shipping-address-field-section').removeClass('hide');
                $('.selected-shipping-address').addClass('hide');
            }
            if (!$('.shippinglogindetails').is(':visible')) {
                $('.singleshipping_error').removeClass('hide');
                $('.signinabove').hide();
            } else if ($('.shippinglogindetails').is(':visible')) {
                if (!$('.shippinglogindetails form').valid()) {
                    $('.shippinglogindetails .username .textinput, .shippinglogindetails .textinputpw').blur();
                    $('button[name$="login_login"]').trigger('click');
                }
                var errormsg = '<div id=\'message\' class=\'error-alert signinabove\' style=\'text-align: left;\'>Please Log in above to continue</div>';
                if ($('#dwfrm_singleshipping_shippingAddress .formactions #message').length > 0 || $('#dwfrm_singleshipping_shippingAddress .formactions .singleshipping_error').length > 0) {
                    jQuery('#dwfrm_singleshipping_shippingAddress .formactions #message').remove();
                    jQuery('#dwfrm_singleshipping_shippingAddress .formactions .singleshipping_error').hide();
                }
                jQuery('.singleshipping_error').hide();
                jQuery('#dwfrm_singleshipping_shippingAddress .formactions').prepend(errormsg);
                uievents.synccheckoutH();
                return false;
            }
        } else {
            $('.singleshipping_error').addClass('hide');
        }
        uievents.synccheckoutH();
    });

    $('body').on('click', '.go-as-guest-checkout', function () {
        $('.shipping-checkoutasguest, .signintomyaccount-block').removeClass('hide');
        $('.shippinglogindetails , .addressid').addClass('hide');
        uievents.synccheckoutH();
    });
    if ($('.state-shipping-valid-dialog').length > 0) {
        var dialogWidth = 511;
        var singOutDialog = dialog.create({
            target: '#dialog-container',
            options: {
                bgiframe: true,
                autoOpen: false,
                modal: true,
                width: dialogWidth,
                dialogClass: 'state-shipping-dialog'
            }
        });
        $(singOutDialog).empty().append($('.state-shipping-valid-dialog').html());
        singOutDialog.dialog('open');
    }
    $('body').on('click', '.shippingsignout', function (e) {
        e.preventDefault();
        $.ajax({
            url: this.href,
            success: function success(data) {
                var dialogWidth = 500;
                /*if( $(window).width() < 767 ){
                    dialogWidth = 300
                }*/
                var singOutDialog = dialog.create({
                    target: '#dialog-container',
                    options: {
                        bgiframe: true,
                        autoOpen: false,
                        modal: true,
                        width: dialogWidth,
                        dialogClass: 'sing-out-dialog'
                    }
                });
                $(singOutDialog).empty().append(data);
                singOutDialog.dialog('open');
            }
        });
    });
    $('body').on('click', '.signintomyaccountbutton', function () {
        signin();
        $('form[id$="_login"] .formfield.username, form[id$="_login"] .formfield.password').each(function () {
            $(this).find('.value input').val('').removeClass('errorclient');
            $(this).find('.value span.errorclient').hide();
        });
        $('form[id$="_login"] .wrongaddress').hide();
        $('form[id$="_login"] .#message.error').remove();

        $('.singleshipping_error').hide();
        $('.shipping-emaildetaillinks').addClass('loginactive');
        $('.shipping-emaildetaillinks').removeClass('reginactive');
        $('.New-shipping-authentication-detail input[id$="shippingAddress_email"]').removeClass('accemail');
        $('.New-shipping-authentication-detail input[id$="shippingAddress_emailconfirm"]').removeClass('accemailcon');
        $('.New-shipping-authentication-detail input[name$=\'_guestemailconfirm\']').removeClass('guestemailcon');
        $('.New-shipping-authentication-detail input[name$=\'_guestemail\']').removeClass('guestemail');
        $('.shippinglogindetails input[name$=\'login_username\']').addClass('loggedemail');
        $('.shippinglogindetails .correctaddress').removeClass('error').hide();
        if ($('.emailhidden').val()) {
            $('input[id$="login_username"]').val($('.emailhidden').val());
            $('input[id$="login_username"]').blur();
            $('input[id$="login_username"]').closest('.formfield').find('.correctaddress').show();
        }
        $('.New-shipping-authentication-detail input[name$=\'shippingAddress_password\']').removeClass('c_password');
        $('.New-shipping-authentication-detail input[name$=\'shippingAddress_passwordconfirm\']').removeClass('cm_password');
        $('.shippinglogindetails input[name$=\'login_password\']').addClass('login_password');
        $('.shipping-address-field-section .value input').removeClass('errorclient');
        $('.shipping-address-field-section .value span.errorclient').hide();
        $('.custom-select').removeClass('customselect-error');
        $('.stateerror').hide();
        uievents.synccheckoutH();
    });

    $('.shipping-guestemailaddress .textinput, .shipping-guestconfirmemailaddress .textinput, .shippinglogindetails .username .textinput, .shippinglogindetails .textinputpw, .shipping-emailaddress .textinput, .shipping-confirmemailaddress .textinput, .shipping-password .textinputpw, .shipping-confirmpassword .textinputpw').blur(function () {
        if ($(this).valid() == 0) {
            $(this).closest('.formfield').find('.correctaddress').addClass('error').show();
        } else {
            $(this).closest('.formfield').find('.correctaddress').removeClass('error').show();
        }
    });
    //PREVAIL - init Address Validation
    require('../../addressvalidation').init();
};

exports.updateShippingMethodList = updateShippingMethodList;
exports.updateSummary = updateSummary; //JIRA PREV-99 : shipping methods is not displayed for 2nd address in right nav.

},{"../../addressvalidation":14,"../../ajax":15,"../../dialog":23,"../../progress":52,"../../tooltip":61,"../../uievents":62,"../../util":63}],40:[function(require,module,exports){
'use strict';

var addProductToCart = require('./product/addToCart'),
    ajax = require('../ajax'),
    page = require('../page'),
    productTile = require('../product-tile'),
    quickview = require('../quickview');

/**
 * @private
 * @function
 * @description Binds the click events to the remove-link and quick-view button
 */
function initializeEvents() {
    $('#compare-table').on('click', '.remove-link', function (e) {
        e.preventDefault();
        ajax.getJson({
            url: this.href,
            callback: function callback(response) {
                /* Start JIRA PREV-74 : Compare page: Not navigating to PLP, When user clicks the "Remove (X)" icon on the last product,present in the product compare page.
                   Added condition to check for the last product removal if so navigate back to previous PLP.
                 */
                if (response.success && $('#compare-table .product-tile').length <= 1 && $('#compare-category-list').length === 0) {
                    window.location.href = $('.back').attr('href');
                } else if (response.success && $('#compare-table .product-tile').length <= 1 && $('#compare-category-list').length > 0) {
                    $('#compare-category-list option:selected').remove();
                    $('#compare-category-list').trigger('change');
                } else {
                    page.refresh();
                }
                /*End JIRA PREV-74 */
            }
        });
    }).on('click', '.open-quick-view', function (e) {
        e.preventDefault();
        var url = $(this).closest('.product').find('.thumb-link').attr('href');
        quickview.show({
            url: url,
            source: 'quickview'
        });
    });

    $('#compare-category-list').on('change', function () {
        $(this).closest('form').submit();
    });
}

exports.init = function () {
    productTile.init();
    initializeEvents();
    addProductToCart();
};

},{"../ajax":15,"../page":31,"../product-tile":51,"../quickview":53,"./product/addToCart":42}],41:[function(require,module,exports){
'use strict';

var util = require('../util');

function initializationEvent() {
    var currentSiteID = '';
    var currentSessionSite = $('body').find('.current-session-site').val();
    switch (currentSessionSite) {
        case 'rapala':
            currentSiteID = '1';
            break;
        case 'sufix':
            currentSiteID = '2';
            break;
        case 'triggerx':
            currentSiteID = '3';
            break;
        case 'storm':
            currentSiteID = '4';
            break;
        case 'luhrjensen':
            currentSiteID = '5';
            break;
        case 'vmc':
            currentSiteID = '6';
            break;
        case 'terminator':
            currentSiteID = '7';
            break;
        case 'bluefox':
            currentSiteID = '8';
            break;
        case 'williamson':
            currentSiteID = '9';
            break;
        case 'marcum':
            currentSiteID = '10';
            break;
        case 'strikemaster':
            currentSiteID = '11';
            break;
        case 'iceforce':
            currentSiteID = '20';
            break;
        case 'otter':
            currentSiteID = '21';
            break;
        default:
            currentSiteID = '1';
    }

    if (document.location.pathname.indexOf('ChangeRegion') < 0) {
        if (typeof geoipCountryCode == 'function') {
            var IPGeoCode = geoipCountryCode();
            var allowedCountries = $('.allowed-countries').text();
            if (allowedCountries == null || allowedCountries == 'null' || allowedCountries == 'undefined') {
                allowedCountries = 'US';
            }
            if (allowedCountries.indexOf(IPGeoCode) != -1) {
                var url = util.appendParamToURL(Urls.internationalHomeShow, 'id', currentSiteID);
                window.location.href = url;
            }
        }
    }
}

var international = {
    init: function init() {
        initializationEvent();
    }
};
module.exports = international;

},{"../util":63}],42:[function(require,module,exports){
'use strict';

var dialog = require('../../dialog'),
    minicart = require('../../minicart'),
    util = require('../../util'),
    TPromise = require('promise'),
    _ = require('lodash');

/**
 * @description Handler to handle the add all items to cart event
 */
var addAllToCart = function addAllToCart(e) {
    e.preventDefault();

    //PREVAIL-Added for GA integration
    //GAcommented
    if (isEventTrackingEnabled && isGoogleAnalyticsEnabled) {
        googleAnalyticsEvents.addProductSet();
    }

    var $productForms = $('#product-set-list').find('form').toArray();
    TPromise.all(_.map($productForms, addToCart)).then(function (responses) {
        dialog.close();
        // show the final response only, which would include all the other items
        minicart.show(responses[responses.length - 1]);
    });
};

/**
 * @function
 * @description Binds the click event to a given target for the add-to-cart handling
 */
// adds a product to the mini cart
// @params
// progressImageSrc - source/url of the image to show when the item
// is being added to the cart
// postdata - form data containing the product information to be
// added to mini-cart
// callback - call back function/handler
var addToCart = {
    init: function init() {
        $('.checkoutminicart').slimscroll();
        $('.add-to-cart[disabled]').attr('title', $('.availability-msg').text());
        //Start JIRA PREV-454, PREV-469 : Application navigation not consistent when click of add to cart button of the Product set page
        $('#add-all-to-cart').on('click', addAllToCart);
        if ($('.mini-cart-product').length > 1) {
            $('.minicartcontent .slimScrollDiv').removeClass('less');
            $('.minicartcontent .slimScrollDiv .slimScrollBar').show();
        } else {
            $('.minicartcontent .slimScrollDiv').addClass('less');
            $('.minicartcontent .slimScrollDiv .slimScrollBar').hide();
        }
    },
    add: function add(progressImageSrc, postdata, callback) {
        // get the data of the form as serialized string
        //var postdata = postdata;

        fbq('track', 'AddToCart', {
            'content_ids': [postdata.pid],
            'content_type': 'product'
        });

        // get button reference
        var addButtons = [];

        // the button to update
        var addButton = null;

        // it is an array of buttons, but we need only one all
        // other combinations are strange so far
        if (addButtons.length == 1) {
            addButton = addButtons[0];
        }

        var previousImageSrc = null;

        // show progress indicator
        if (addButton != null) {
            previousImageSrc = addButton.src;
            addButton.src = progressImageSrc;
        }

        // handles successful add to cart
        var handlerFunc = function handlerFunc(req) {

            if ($('#container').hasClass('pt_cart')) {
                window.location.href = window.location.href;
            }
            // hide progress indicator
            if (addButton != null) {
                addButton.src = previousImageSrc;
            }

            // replace the content
            jQuery('#minicart').html(req);
            addToCart.init();
            if ($('.minirow').length > 1 && !$('body').hasClass('rapala_device')) {
                $('.checkoutminicart').slimscroll({
                    railVisible: true,
                    alwaysVisible: true
                });
                $('.minicarttable').find('thead').first().addClass('theadfixedTop');
                $('.checkoutminicart').find('.cartordertotals').removeClass('carttotals');
                $('.checkoutminicart').find('.minicarttable').removeClass('miniwithoutScroll');
                $('.minicartcontent').find('.minicarttableheader').removeClass('miniwithoutScrollhead');
                $('.minicarttableheader').css('border-bottom', '1px solid #ccc');
            } else {
                $('.minicarttable').find('.theadfixedTop').removeClass('theadfixedTop');
                $('.minicarttable').find('.fixedTop').removeClass('fixedTop');
                $('.minicart').find('.cartordertotals').addClass('carttotals');
                $('.checkoutminicart').find('.minicarttable').addClass('miniwithoutScroll');
                $('.minicartcontent').find('.minicarttableheader').addClass('miniwithoutScrollhead');
                $('.minicarttableheader').css('border-bottom', '1px solid #ccc');
            }

            if ($('body').hasClass('rapala_device')) {
                $('.checkoutminicart').find('.minicarttable').removeClass('miniwithoutScroll');
                // $(".minicarttable .tr_rotation:last-child").find('.minirow').css('border','1px');
                $('.minicarttable').find('thead').first().addClass('theadfixedTop');
                $('.minicarttable .tr_rotation:last-child').find('.minirow').css('border', '0px');
                $('.minicarttableheader').css('border-bottom', '1px solid #ccc');
            }
            $('.minicarttable .tr_rotation:last-child').find('.minirow').css('border', '0px');

            if (minicart.suppressSlideDown && minicart.suppressSlideDown()) {
                // do nothing
                // the hook 'MiniCart.suppressSlideDown()' should have
                // done the refresh
            } else {
                minicart.slide();
                minicart.setminicarheight();
                if (callback) {
                    callback();
                }
            }
            $('#pdpMain .addtocartconfirm-tooltip').fadeIn(400).show().delay(1500).fadeOut(400);
            // fire the BonusDiscountLineItemCheck event so we can check
            // if there is a bonus discount line item
            jQuery(document).trigger(jQuery.Event('BonusDiscountLineItemCheck'));
        };

        // handles add to cart error
        var errFunc = function errFunc() {
            // hide progress indicator
            if (addButton != null) {
                addButton.src = previousImageSrc;
            }
        };

        // closes a previous mini cart
        minicart.close();

        var url = Urls.addProduct;

        // add the product
        //Looks the below commented code is not required and this is stopping not able add variation product from quick view in cart page.
        /* if ($('#container').hasClass('pt_cart') && $('.addTo-cart-section').find('.recommendation_cart').length == 0) {
            var plItemId = $('input.line-itemid').val();
            var params = {
                updateQty: 'true',
                lineItemId: plItemId
            };
            url = util.appendParamsToUrl(Urls.editLineItem, params);
        } */

        $.ajax({
            type: 'POST',
            url: util.ajaxUrl(url),
            cache: true,
            data: postdata,
            success: handlerFunc,
            error: errFunc
        });
    }
};
module.exports = addToCart;

},{"../../dialog":23,"../../minicart":30,"../../util":63,"lodash":5,"promise":6}],43:[function(require,module,exports){
'use strict';

var pdpEvents = require('./pdpEvents'),
    addToCart = require('./addToCart');

var product = {
    init: function init() {
        //initializeDom();
        //initializeEvents();
        addToCart.init();
        pdpEvents.init();
    }
};

module.exports = product;

},{"./addToCart":42,"./pdpEvents":44}],44:[function(require,module,exports){
'use strict';

var util = require('../../util'),
    dialog = require('../../dialog'),

//tooltip = require('../../tooltip'),
//uievents = require('../../uievents'),
//quickview = require('../../quickview'),
addToCart = require('./addToCart'),
    progress = require('../../progress'),
    ajax = require('../../ajax');

var product = function product(response) {
    // product private data

    // product json data
    var model = response;

    // div cotainer id
    var myContainerId = '';

    // boolean flag to track the variants data request, reset in loadVariants() when the variants data is loaded
    var isLoadingVar = false;

    // helper function to load variants data from the server
    // once the data is retrieved, it fires VariationsLoaded event so that UI can be refreshed appropriately
    var loadVariants = function loadVariants(thisProduct) {
        isLoadingVar = true;
        // build the url and load variants data
        ajax.getJson({
            url: Urls.getVariants,
            data: { 'pid': thisProduct.pid, 'format': 'json' },
            callback: function callback(data) {

                if (!data || !data.variations || !data.variations.variants) {
                    return;
                }
                model.variations.variants = data.variations.variants;
                isLoadingVar = false; // we have loaded the variants
                jQuery(thisProduct).trigger('VariationsLoaded');
            }
        });
    };

    // helper function to reload availability data.
    // by default, availability data is based on a quantity of 1.
    // if a customer changes the quantity, use this method
    // to reload the availability based on the new quantity.
    var reloadAvailability = function reloadAvailability(thisProduct, quantity) {

        var id = '';
        if (thisProduct.master || thisProduct.variant) {
            id = thisProduct.selectedVar.id;
        } else {
            id = thisProduct.pid;
        }

        ajax.getJson({
            url: Urls.getAvailability,
            data: { 'pid': id, 'Quantity': quantity, 'format': 'json' },
            callback: function callback(data) {

                if (!data || !data.levels) {
                    return;
                }

                // update the data in the variant
                if ((thisProduct.master || thisProduct.variant) && thisProduct.selectedVar) {
                    thisProduct.selectedVar.avLevels = data.levels;
                    thisProduct.selectedVar.avStatus = data.status;
                    thisProduct.selectedVar.avStatusQuantity = data.statusQuantity;
                } else {
                    model.avLevels = data.levels;
                    model.avStatus = data.status;
                    model.avStatusQuantity = data.status;
                }
                jQuery(thisProduct).trigger('ReloadAvailability');
            }
        });
    };
    // returns the aggregate available to sell value
    // from all variants
    var getATS = function getATS(variants) {

        var atsCount = 0;
        var variant;
        for (var i = 0; i < variants.length; i++) {
            variant = variants[i];
            if (variant.ATS > 0) {
                atsCount = atsCount + variant.ATS;
            }
        }
        return atsCount;
    };

    // returns the aggregate available to sell value
    // from all variants
    var getAvailability = function getAvailability(variants) {

        var available = false;
        var variant;
        for (var i = 0; i < variants.length; i++) {
            variant = variants[i];
            if (variant.avStatus !== 'NOT_AVAILABLE') {
                available = true;
                break;
            }
        }
        return available;
    };

    // helper function to bind product options drop downs event handlers
    // Intializes the product.selectedOptions object with the currently selected options
    // it also shows the computed/updated price
    var getOptionsDiv = function getOptionsDiv(thisProduct) {

        if (model.isOption) {

            var pdpOpt = jQuery(thisProduct.containerId + ' .product_options:last select');

            pdpOpt.change(function () {
                var vals = this.options[this.selectedIndex].value.split('%?%'); // 0 = value, 1 = price
                thisProduct.selectedOptions[this.id] = vals[0];
                thisProduct.selectedPrice[this.id] = vals[1];
                thisProduct.showUpdatedPrice(computePrice(thisProduct), model.pricing.standard);
            });

            // let us get the currently selected value and intilize the ui
            pdpOpt.each(function () {
                var vals = this.options[this.selectedIndex].value.split('%?%'); // 0 = value, 1 = price

                thisProduct.selectedOptions[this.id] = vals[0];
                thisProduct.selectedPrice[this.id] = vals[1];
                thisProduct.showUpdatedPrice(computePrice(thisProduct), model.pricing.standard);
            });
        }
    };

    // binds A2C button click handler
    var getAddToCartBtn = function getAddToCartBtn(thisProduct) {
        var addToCartBtn = jQuery(thisProduct.containerId + ' .addtocartbutton:last').click(function () {
            if (model.master || model.variant) {
                if (thisProduct.selectedVar == null) {
                    return false;
                }

                // it is necessary to update the option id to be variant-specific
                jQuery(thisProduct.containerId + ' .product_options:last select').each(function () {
                    var value = thisProduct.selectedOptions[this.id];
                    var newId = this.id.replace(thisProduct.pid, thisProduct.selectedVar.id);
                    thisProduct.selectedOptions[newId] = value;
                    delete thisProduct.selectedOptions[this.id];
                });

                thisProduct.selectedOptions.pid = thisProduct.selectedVar.id;
                thisProduct.selectedOptions.masterPid = thisProduct.pid;
            } else {
                var tempQty = '';
                // check if we are adding a bundle/productset to the cart
                if (model.bundle || model.productSet) {
                    var subProducts = thisProduct.subProducts;
                    var comma = ',';
                    var subproduct = null;

                    thisProduct.selectedOptions.childPids = '';

                    if (model.productSet) {
                        thisProduct.selectedOptions.Quantity = '';
                    }

                    // process each individual products in the set/bundle
                    // and prepare product.selectedOptions for final submission
                    for (var i = 0; i < subProducts.length; i++) {
                        subproduct = subProducts[i];

                        if (i == subProducts.length - 1) {
                            comma = ''; // at the end of the list
                        }

                        // see if any of the sub products are variations, if so then get the selected variation id
                        // from selectedVar property and make it a comma separated list
                        if ((subproduct.variant || subproduct.master) && subproduct.selectedVar == null) return false;
                        if (subproduct.variant || subproduct.master) {
                            thisProduct.selectedOptions.childPids += subproduct.selectedVar.id + comma;
                        } else {
                            thisProduct.selectedOptions.childPids += subproduct.pid + comma;
                        }

                        var tempPid = subproduct.selectedOptions.pid;
                        subproduct.selectedOptions.pid = null;
                        // merge selected options of sub product with the main product
                        thisProduct.selectedOptions = jQuery.extend({}, thisProduct.selectedOptions, subproduct.selectedOptions);
                        subproduct.selectedOptions.pid = tempPid;

                        // if it is a product set then sub products can have their separate qty
                        if (model.productSet) {
                            tempQty += subproduct.selectedOptions.Quantity + comma;
                        }
                    }
                }

                // if it is a product set then sub products can have their separate qty
                // tempQty is a comma separated list of qty for each product in the set
                if (model.productSet) {
                    thisProduct.selectedOptions.Quantity = tempQty;
                }

                // make sure the pid which gets submitted is for the main product
                thisProduct.selectedOptions.pid = thisProduct.pid;
            }

            if (model.bundle) {
                thisProduct.selectedOptions.Quantity = 1; // hard coded qty=1 when we the product is a bundle
            } else if (!model.productSet) {
                // grab the user entered qty
                thisProduct.selectedOptions.Quantity = jQuery(thisProduct.containerId + ' .quantityinput:last').val();
            }

            // if it is not a productset then make sure qty is specified greater than 0
            if (model.productSet || thisProduct.selectedOptions.Quantity > 0) {
                // disable a2c button
                addToCartBtn.prop('disabled', true);

                // close the quick view when user clicks A2C.
                if ($('#QuickViewDialog').length > 0) {
                    $('#QuickViewDialog').dialog('close');
                }
                // find if there is a handler bound to AddToCart event e.g. cart -> edit details or wishlist -> edit details etc.
                // then fire it otherewise call addToCart.add to add the selected product to the cart and show minicart
                var event = jQuery.Event('AddToCart');
                event.selectedOptions = thisProduct.selectedOptions;

                if (jQuery.event.global.AddToCart == undefined || jQuery.event.global.AddToCart == null) {
                    addToCart.add('', thisProduct.selectedOptions, function () {
                        addToCartBtn.prop('disabled', false);
                    });
                } else {
                    jQuery(document).trigger(event);
                }
            }
            return false;
        });

        return addToCartBtn;
    };

    // bind qty box keyup handler
    // the handler grabs the value and updates
    // product.selectedOption.Quantity
    // show the updated availabilty message in case the available qty is different than available etc.
    // trigger AddtoCartEnabled event
    var getQtyBox = function getQtyBox(thisProduct) {

        jQuery(thisProduct.containerId + ' .quantityinput:last').keyup(function () {
            var val = null;
            try {
                val = parseInt(jQuery(thisProduct.containerId + ' .quantityinput:last').val(), 10);
            } catch (e) {
                val = null;
            }

            if (val) {
                thisProduct.selectedOptions.Quantity = val;

                // if the product has variations check for non selected ones and display missing value
                if (model.variations != undefined) {
                    var nonSelectedVars = [];

                    // get the non-selected variations
                    jQuery.each(model.variations.attributes, function () {
                        if (!thisProduct.selectedVarAttribs[this.id] || thisProduct.selectedVarAttribs[this.id] == '') {
                            nonSelectedVars.push(this.name);
                        }
                    });

                    if (nonSelectedVars.length > 0) {

                        // make sure there is something to sell
                        var atsCount = getATS(model.variations.variants);
                        if (atsCount == 0) {
                            return;
                        }

                        var tooltipStr = getNonSelectedTooltip(nonSelectedVars);
                        var missingMsg = $.validator.format(Resources.MISSING_VAL, tooltipStr);
                        setAvailabilityMsg(missingMsg);
                        return;
                    }
                }

                // If the quantity value is different than
                // when we loaded the availability data, then
                // refresh availability data for this variant
                if (val != thisProduct.getAvailabilityQty()) {
                    reloadAvailability(thisProduct, val);
                }
                //JCK: this isn't being run AFTER AJAX?
                //setAvailabilityMsg(createAvMessage(thisProduct, val));
                //jQuery(thisProduct).trigger("AddtoCartEnabled");
            }
        });

        // grab the currently displayed value basically the initial displayed value
        thisProduct.selectedOptions.Quantity = jQuery(thisProduct.containerId + ' .quantityinput:last').val();

        if (!isLoadingVar) {
            // show proper availability message
            setAvailabilityMsg(createAvMessage(thisProduct, thisProduct.selectedOptions.Quantity));
        }
    };

    // create product tabs i.e. description, Attributes, Reviews etc.
    // it depends on jQuery to create tab display.
    // also bind tab print button click handler
    var getTabs = function getTabs(containerId) {

        var tabsDiv = jQuery(containerId + ' #tabs');
        tabsDiv.tabs();

        // tab print handler
        jQuery('a.printpage').click(function () {
            window.print();
            return false;
        });
    };

    // register initializations here
    //show and hide handling of specific country.
    if (typeof geoipCountryCode == 'function') {
        var IPGeoCode = geoipCountryCode();
        var allowedCountries = $('.allowed-countries').text();
        if (allowedCountries == null || allowedCountries == 'null' || allowedCountries == 'undefined') {
            allowedCountries = 'US';
        }
        if (allowedCountries.indexOf(IPGeoCode) == -1) {
            $('.addtowishlist').addClass('hide');
        }
    }

    // bind addtowishlist, giftregistry, send to friend click handlers
    // bind handlers to AddtoCartDisabled, AddtoCartEnabled events for disabling/enabling wishlist/gift registry links
    var getMiscLinks = function getMiscLinks(thisProduct) {

        var disablelinks = function disablelinks() {
            if ((model.master || model.variant) && thisProduct.selectedVar == null) {
                // disable wishlist/gift registry links for master products
                jQuery(thisProduct.containerId + ' .addtowishlist, ' + thisProduct.containerId + ' .addtoregistry').addClass('unselectable');
            }
        };

        disablelinks(); // call it for initial display and then register it with AddtoCartDisabled event

        jQuery(thisProduct).bind('AddtoCartDisabled', {}, disablelinks);

        jQuery(thisProduct).bind('AddtoCartEnabled', {}, function () {
            // enable wishlist/gift registry links for variant products
            jQuery(thisProduct.containerId + ' .addtowishlist, ' + thisProduct.containerId + ' .addtoregistry').removeClass('unselectable');
        });

        // listen for availability reload events
        jQuery(thisProduct).bind('ReloadAvailability', {}, function (e) {
            // update the availability message
            var variant = e.target.selectedVar;
            setAvailabilityMsg(createAvMessage(e.target, variant == null ? model.avStatusQuantity : variant.avStatusQuantity));
            jQuery(e.target).trigger('AddtoCartEnabled');
        });

        // Add to wishlist, Add to gift registry click handler

        jQuery(thisProduct.containerId + ' .addtowishlist a.auth').click(function () {
            // append the currently selectied options to the url

            // create a local copy of the selected options
            var selectedOptions = jQuery.extend({}, {}, thisProduct.selectedOptions);

            if (model.master || model.variant) {
                if (thisProduct.selectedVar != null) {
                    selectedOptions.pid = thisProduct.selectedVar.id;
                } else {
                    return false; // do not allow master product to be added to gift registry/wishlist
                }
            } else {
                selectedOptions.pid = thisProduct.pid;
            }

            var tempUrl = this.href;

            if (!(tempUrl.indexOf('?') > 0)) {
                tempUrl = tempUrl + '?';
            } else {
                tempUrl = tempUrl + '&';
            }
            // serialize the name/value into url query string and append it to the url, make request
            var url = tempUrl + jQuery.param(selectedOptions);
            $.ajax({
                type: 'GET',
                url: url,
                dataType: 'html',
                success: function success() {
                    jQuery('#pdpMain .addtowishlist .addtowish-tooltip').fadeIn(400).delay(1500).fadeOut(400);
                },
                failure: function failure() {
                    alert('${Resource.msg(\'global.serverconnection\',\'locale\',null)}');
                }
            });
            setTimeout(function () {
                $('.ui-dialog-titlebar-close').trigger('click');
            }, 1500);
            //window.location = tempUrl + jQuery.param(selectedOptions);
            return false;
        });

        // Add to wishlist, Add to gift registry click handler
        jQuery(thisProduct.containerId + ' .addtowishlist a.non-auth, ' + thisProduct.containerId + ' .addtoregistry a').click(function () {
            // append the currently selectied options to the url

            // create a local copy of the selected options
            var selectedOptions = jQuery.extend({}, {}, thisProduct.selectedOptions);

            if (model.master || model.variant) {
                if (thisProduct.selectedVar != null) {
                    selectedOptions.pid = thisProduct.selectedVar.id;
                } else {
                    return false; // do not allow master product to be added to gift registry/wishlist
                }
            } else {
                selectedOptions.pid = thisProduct.pid;
            }

            var tempUrl = this.href;

            if (!(tempUrl.indexOf('?') > 0)) {
                tempUrl = tempUrl + '?';
            } else {
                tempUrl = tempUrl + '&';
            }
            // serialize the name/value into url query string and append it to the url, make request
            //var url = tempUrl + jQuery.param(selectedOptions);
            window.location = tempUrl + jQuery.param(selectedOptions);
            return false;
        });

        jQuery(thisProduct.containerId + ' .sendtofriend').click(function () {
            // create a local copy of the selected options
            var selectedOptions = jQuery.extend({}, {}, thisProduct.selectedOptions);

            if ((model.master || model.variant) && thisProduct.selectedVar != null) {
                selectedOptions.pid = thisProduct.selectedVar.id;
            } else {
                selectedOptions.pid = thisProduct.pid;
            }
            var tempURL = Urls.sendToFriend + '?' + jQuery.param(selectedOptions);
            dialog.open(tempURL, Resources.SEND_TO_FRIEND);
            return false;
        });
    };

    // binds product reviews click handlers
    // read review link opens reviews tab
    var getRatingSection = function getRatingSection(containerId) {

        jQuery(containerId + ' #pdpReadReview').click(function () {
            jQuery(containerId + ' #tabs').tabs('select', 'pdpReviewsTab');
        });

        jQuery(containerId + ' #pdpWriteReview').click(function () {});
    };

    // based on availability status, creates a message
    // param val - the stock value to compare i.e. qty entered by user
    var createAvMessage = function createAvMessage(thisProduct, val) {

        var avStatus = thisProduct.getAvStatus(); // availability status
        var avMessage = Resources[avStatus];
        var ats = thisProduct.getATS(); // get available to sell qty
        var avLevels = thisProduct.getAvLevels();
        var nonCloseoutLowQtyThreshold = thisProduct.getNonCloseoutLowQtyThreshold();

        // get ats levels per-status
        var inStockLevel = avLevels[Constants.AVAIL_STATUS_IN_STOCK];
        var backOrderLevel = avLevels[Constants.AVAIL_STATUS_BACKORDER];
        var preOrderLevel = avLevels[Constants.AVAIL_STATUS_PREORDER];
        //var notAvailLevel = avLevels[Constants.AVAIL_STATUS_NOT_AVAILABLE];

        if (avStatus === Constants.AVAIL_STATUS_IN_STOCK) {
            avMessage = '<span class=\'in-stock\'>' + avMessage + '</span>';
        }
        if (avStatus === 'NOT_AVAILABLE') {
            avMessage = '<span class=\'out-of-stock\'>' + avMessage + '</span>';
        }
        if (avStatus === Constants.AVAIL_STATUS_BACKORDER || avStatus === Constants.AVAIL_STATUS_PREORDER) {
            if (val > ats && ats > 0) {
                avMessage = avMessage + '<span class=\'in-stock\'>' + $.validator.format(Resources['QTY_' + avStatus], ats) + '</span>';
            }
            // display backorder/preorder availability
            avMessage = avMessage + getInStockDateMsg(thisProduct);
        } else if (val > inStockLevel && avStatus !== Constants.AVAIL_STATUS_NOT_AVAILABLE) {

            avMessage = '';
            if (inStockLevel > 0) {
                avMessage = avMessage + '<span class=\'in-stock\'>' + $.validator.format(Resources['QTY_' + Constants.AVAIL_STATUS_IN_STOCK], inStockLevel) + '</span>';
            }
            if (backOrderLevel > 0) {
                avMessage = avMessage + $.validator.format(Resources['QTY_' + Constants.AVAIL_STATUS_BACKORDER], backOrderLevel);
                // uncomment the following line to display availability message with back order information
                // avMessage = avMessage + getInStockDateMsg(thisProduct);
            }
            if (preOrderLevel > 0) {
                avMessage = avMessage + $.validator.format(Resources['QTY_' + Constants.AVAIL_STATUS_PREORDER], preOrderLevel);
                // uncomment the following line to display availability message with back order information
                // avMessage = avMessage + getInStockDateMsg(thisProduct);
            }
        } else if (ats !== 0 && ats <= nonCloseoutLowQtyThreshold) {
            avMessage = '<span class=\'low\'>' + $.validator.format(Resources.LOW, nonCloseoutLowQtyThreshold) + '</span>';
        }
        var standardPrice = thisProduct.selectedVar != null ? Number(thisProduct.selectedVar.pricing.standard || 0) : Number(model.pricing.standard || 0);

        var salePrice = Number(computePrice(thisProduct) || 0);

        if (standardPrice === 0 && salePrice === 0) {
            if (thisProduct.selectedVar != null) {
                if (thisProduct.selectedVar.earlyBirdMessage != '') {
                    avMessage = '<span class=\'coming-soon\'>' + thisProduct.selectedVar.earlyBirdMessage + '</span>';
                } else {
                    avMessage = '';
                }
            } else {
                if ($('.ebm-std-prod').length > 0 && $.trim($('.ebm-std-prod').text()) != '') {
                    avMessage = '<span class=\'coming-soon\'>' + $('.ebm-std-prod').text() + '</span>';
                } else {
                    avMessage = '';
                }
            }
        }
        return avMessage;
    };

    // helper function that returns the in-stock date
    var getInStockDateMsg = function getInStockDateMsg(product) {
        var msg = '';
        if (product.getInStockDate() && product.getInStockDate() != 'null') {
            msg = $.validator.format(Resources.IN_STOCK_DATE, new Date(product.getInStockDate()).toDateString());
        }
        return msg;
    };

    // helper function to set availability message
    var setAvailabilityMsg = function setAvailabilityMsg(msg) {
        jQuery(myContainerId + ' .availability:last .value').html(msg);
    };

    /**
     * Private. Computes price of a given product instance based on the selected options.
     *
     * @param thisProduct - the product instance
     * @return price of the product to 2 decimal points.
     */
    var computePrice = function computePrice(thisProduct) {

        var price = thisProduct.selectedVar != null ? thisProduct.selectedVar.pricing.sale : model.pricing.sale;
        // calculate price based on the selected options prices
        jQuery.each(thisProduct.selectedPrice, function () {
            price = (new Number(price) + new Number(this)).toFixed(2);
        });

        return price;
    };
    // Load the youtube videos only on demand
    // when the user clicks on the videos tab, then the youtube videos will be fetched dynamically
    // and loads the content in the pdpVideoTab div.
    jQuery('.videoTab').click(function () {
        if ($(this).hasClass('loaded')) {
            return false;
        }
        $(this).addClass('loaded');
        var target = $('#pdpVideoTab');
        var url = $('#productURL').val();
        ajax.load({
            url: url,
            dataType: 'html',
            callback: function callback(data) {
                target.html(data);
            }
        });
    });
    // bind click handlers for prev/next buttons on pdp from search
    var getNavLinks = function getNavLinks() {

        // NOTE:  WE COMMENT THIS OUT BECAUSE POWER REVIEWS RENDERING LIBRARY DOES NOT
        // WORK IN SOME BROWSERS WHEN A PRODUCT DETAIL PAGE IS PARTIALLY RELOADED USING AJAX.
        // IF WE DO NOT BIND EVENTS, THEN THE PREV/NEXT ANCHORS JUST WORK AS STANDARD
        // HYPERLINKS AND POWERREVIEWS WORKS FINE.

        // bind events
        //jQuery(".productnavigation a").click(function(e) {
        //	app.getProduct({url: this.href, source: "search"});
        //	return false;
        //});
    };

    // size chart link click binding
    var getSizeChart = function getSizeChart() {
        jQuery('.attributecontentlink').click(function () {
            // add size chart dialog container div if its not added yet
            // only added once
            if (jQuery('#sizeChartDialog').length == 0) {
                jQuery('<div/>').attr('id', 'sizeChartDialog').appendTo(document.body);
            }

            var sizeChartDialog = dialog.create({
                id: 'sizeChartDialog', options: {
                    height: 530,
                    width: 800,
                    title: Resources.SIZECHART_TITLE
                }
            });

            sizeChartDialog.dialog('open');

            // make the server call to load the size chart html
            $('#sizeChartDialog').load(this.href);

            return false;
        });

        $('.product-specifications').ready(function () {
            $('.product-specifications').load(jQuery('.attributecontentlink').attr('href'));
        });
    };
    // build the tooltip string for non selected variations
    var getNonSelectedTooltip = function getNonSelectedTooltip(nonSelectedVars) {
        var tooltipStr = '';
        var nsLen = nonSelectedVars.length;
        if (nsLen == 1 || nsLen == 2) {
            tooltipStr = nonSelectedVars.join(' & ');
        } else {
            for (var i = 0; i < nsLen; i++) {
                if (i == nsLen - 2) {
                    tooltipStr += nonSelectedVars[i] + ' & ' + nonSelectedVars[i + 1];
                    break;
                } else {
                    tooltipStr += nonSelectedVars[i] + ', ';
                }
            }
        }

        return tooltipStr;
    };

    // Product instance
    return {
        pid: model.ID,
        name: model.name,
        variant: model.variant,
        master: model.master,
        bundled: model.bundled,
        selectedVarAttribs: {}, // object containing variation attributes values as name value e.g. {color: "blue", size: "3", width: ""}
        selectedVar: null, // currently selected variant
        selectedOptions: {}, // holds currently selected options object {optionName, selected val}
        selectedPrice: {}, // holds prices for selected options as {warranty: ""}
        containerId: null, // holds the html container id of this product
        subProducts: [], // array to keep sub products instances
        bonusProduct: false,

        /**
         * Enable Add to Cart Button.
         */
        enableA2CButton: function enableA2CButton() {
            jQuery(this.containerId + ' .addtocart input, ' + this.containerId + ' .addtocartbutton:last').prop('disabled', false);
            jQuery(this.containerId + ' .addtocartbutton:last, ' + this.containerId + ' .addtocart').removeClass('disabled');
        },

        /**
         * Disable Add to Cart Button.
         */
        disableA2CButton: function disableA2CButton() {
            jQuery(this.containerId + ' .addtocart input, ' + this.containerId + ' .addtocartbutton:last').prop('disabled', true);
            jQuery(this.containerId + ' .addtocartbutton:last, ' + this.containerId + ' .addtocart').addClass('disabled');
        },

        removeA2CButton: function removeA2CButton() {

            jQuery('.addtocart').css('display', 'none');
            jQuery('.productinfo .price').css('display', 'none');
            if (ProductCache.master) {
                jQuery('.productinfo .productid').css('display', 'none');
            }
            //jQuery(this.containerId+" .variationattributes").css('display','none');
        },
        // show availability
        showAvailability: function showAvailability() {
            jQuery(this.containerId + ' .availability').show();
        },
        // hide availability
        hideAvailability: function hideAvailability() {
            jQuery(this.containerId + ' .availability').hide();
        },
        // show selected item #
        showItemNo: function showItemNo() {
            jQuery(this.containerId + ' .productid .value').html(this.selectedVar.id);
        },
        // removes  item #
        removeItemNo: function removeItemNo() {
            jQuery(this.containerId + ' .productid .value').empty();
        },
        revertPrice: function revertPrice() {
            var $price = jQuery(this.containerId + ' .productinfo .price:first');
            if (!$price.data('originalPrice')) {
                $price.data('originalPrice', $price.html());
            } else {
                $price.html($price.data('originalPrice'));
            }
        },
        // determine if this product is part of a bundle/product set VIEW
        setBonusProduct: function setBonusProduct(bonusProduct) {
            this.bonusProduct = bonusProduct;
        },

        // determine if this product is part of a bundle/product set VIEW
        isBonusProduct: function isBonusProduct() {
            return this.bonusProduct;
        },

        // determine if this product is part of a bundle/product set VIEW
        isSubProduct: function isSubProduct() {
            return model.bundled || model.productSetProduct;
        },

        // show the selected variation attribute value next to the attribute label e.g. Color: Beige
        showSelectedVarAttrVal: function showSelectedVarAttrVal(varId, val) {
            jQuery(this.containerId + ' .variationattributes div:not(.clear)').each(function () {
                var id = jQuery(this).data('data');

                if (varId === id) {
                    jQuery(this).find('span.selectedvarval').html(val);
                }
            });
        },

        // selects review tab
        readReviews: function readReviews() {
            jQuery(this.containerId + ' #tabs').tabs('select', 'pdpReviewsTab');
        },

        // shows product images and thumbnails
        // @param selectedVal - currently selected variation attr val
        // @param vals - total available variation attr values
        showImages: function showImages(selectedVal, vals) {
            var that = this;
            vals = vals || {};

            // show swatch related images for the current variation value
            jQuery.each(vals, function () {
                var imgCounter = -1;
                var thisVal = this;
                if (this.val === selectedVal && this.images) {

                    if (this.images.small.length > 0) {
                        jQuery(that.containerId + ' .productthumbnails:last').html('');
                        /**
                         * Show MagicZoom data - added by lgelberg 9/14/11
                         */
                        var zoomimageurl = thisVal.images.original.length > 0 ? thisVal.images.original[0].url : '';
                        //jQuery('.productdetailcolumn .productimage img, .productdetailcolumn .quickviewproductimage img').attr('src',thisVal.images.large[i].url);
                        jQuery('.MagicZoom').attr('href', zoomimageurl);
                        $('body').find('.MagicZoom img').attr('src', zoomimageurl);
                        MagicZoom.update('product-image', zoomimageurl, zoomimageurl);
                        // jQuery(that.containerId+" .productimage").html("").append(jQuery("<img/>").attr("src", thisVal.images.large[0].url).attr("alt", thisVal.images.large[0].alt).attr("title", thisVal.images.large[0].title));
                    }

                    // make sure to show number of images based on the smallest of large or small as these have to have 1-1 correspondence.
                    var noOfImages = this.images.large.length >= this.images.small.length ? this.images.small.length : this.images.large.length;

                    // show thumbnails only if more than 1 or if this is a subproduct (bundled/subproduct)
                    if ((this.images.small.length > 1 || that.isSubProduct()) && !that.isBonusProduct()) {
                        jQuery.each(this.images.small, function (index) {
                            imgCounter++;
                            //var imageInd = imgCounter;
                            if (imgCounter > noOfImages - 1) {
                                return;
                            }
                            var href = null;
                            if ($('#container').hasClass('pt_product-details')) {
                                href = thisVal.images.original[index].url;
                            } else {
                                // In quick view since magic zoom is not there, Hence we need to set javascript:void(0); for a tag href value
                                href = 'javascript:void(0);';
                            }
                            $(that.containerId + ' .productthumbnails:last').append('<div class=\'alternate-images\'><a data-zoom-id=\'product-image\' href=\'' + href + '\' class=\'alternate-image\' data-image=\'' + thisVal.images.original[index].url + '\'><img class=\'index' + index + '\' src=\'' + this.url + '\' title=\'' + this.title + '\' alt=\'' + this.alt + '\'/></a></div>');
                            if (that.containerId.indexOf('ui-dialog') == 1) {
                                $(that.containerId + ' .productthumbnails:last .alternate-image img').on('click touchstart', function (e) {
                                    e.preventDefault();
                                    $(this).closest('.owl-item').siblings('.owl-item').find('a.alternate-image').removeClass('selected');
                                    $(this).closest('.owl-item').find('a.alternate-image').addClass('selected');
                                    var zoomimageurl = $(this).closest('.alternate-image').data('image');
                                    //jQuery('.productdetailcolumn .productimage img, .productdetailcolumn .quickviewproductimage img').attr('src',thisVal.images.large[imageInd].url);
                                    $('body').find('.MagicZoom').attr('href', zoomimageurl);
                                    $('body').find('.MagicZoom img').attr('src', zoomimageurl);
                                    MagicZoom.update('product-image', zoomimageurl, zoomimageurl);
                                    MagicZoom.update('primary-image', zoomimageurl, zoomimageurl);
                                    //$("body").find('.product-image').trigger("click");
                                });
                            }
                        });
                        jQuery(that.containerId + ' .productthumbnails:last .owl-item').first().find('img').click();
                        //var $images = jQuery(that.containerId+" .productthumbnails:last .owl-item img");
                        //var numOfRows = Math.ceil($images.size()/6);
                        //$images.slice(numOfRows * 6 - 6, numOfRows * 6 - 1).css('margin-bottom','0');
                        var desktopItems = 4;
                        if (that.containerId.indexOf('ui-dialog') == 1) {
                            desktopItems = 3;
                        }
                        var pdpOwlCarousel = $('.pdp-owl-customization');
                        if ($(window).width() > 480) {
                            if (this.images.small.length > 4) {
                                pdpOwlCarousel.owlCarousel({
                                    margin: 10,
                                    navRewind: false,
                                    rewind: false,
                                    nav: true,
                                    dots: true,
                                    navigation: false,
                                    responsive: {
                                        0: {
                                            items: 1,
                                            slideBy: 1
                                        },
                                        481: {
                                            items: 3,
                                            slideBy: 3
                                        },
                                        960: {
                                            items: desktopItems,
                                            slideBy: desktopItems
                                        }
                                    }
                                });
                                $('img.index0').parents('.owl-item').find('a.alternate-image').addClass('selected');
                            } else {

                                if ($(pdpOwlCarousel).hasClass('owl-carousel')) {
                                    pdpOwlCarousel.trigger('destroy.owl.carousel');
                                }
                                pdpOwlCarousel.owlCarousel({
                                    items: desktopItems,
                                    navRewind: false,
                                    margin: 10,
                                    rewind: false,
                                    nav: false,
                                    dots: false,
                                    navigation: false,
                                    responsive: {
                                        0: {
                                            items: 1,
                                            slideBy: 1
                                        },
                                        481: {
                                            items: 3,
                                            slideBy: 3
                                        },
                                        960: {
                                            items: desktopItems,
                                            slideBy: desktopItems
                                        }
                                    }
                                });
                                $('img.index0').parents('.owl-item').find('a.alternate-image').addClass('selected');
                            }
                        } else if ($(window).width() < 481) {
                            pdpOwlCarousel.owlCarousel({
                                items: 1,
                                slideBy: 1,
                                margin: 10,
                                navRewind: false,
                                rewind: false,
                                nav: true,
                                dots: true,
                                navigation: false,
                                responsive: {
                                    0: {
                                        items: 1,
                                        slideBy: 1
                                    },
                                    481: {
                                        items: 3,
                                        slideBy: 3
                                    },
                                    960: {
                                        items: desktopItems,
                                        slideBy: desktopItems
                                    }
                                }
                            });
                        }
                    }
                }
            });
        },

        /**
         * Event handler when a variation attribute is selected/deselected.
         */
        varAttrSelected: function varAttrSelected(e) {
            // update the selected value node
            this.showSelectedVarAttrVal(e.data.id, e.data.val || '');

            this.selectedVarAttribs[e.data.id] = e.data.val;

            // if this is a deselection and user landed on a variant page then reset its variant flag
            // as now user has deselected an attribute thus making it essentially a master product view
            if (e.data.val == null && this.variant) {
                this.variant = false;
                this.master = true;
            }

            // store this ref
            var that = this;

            // trigger update event which will update every other variation attribute i.e. enable/disable etc.

            // first reset the contents of each attribute display
            // when we have got the varriations data
            if (!isLoadingVar) {
                // find variants which match the current selection
                var selectedVarAttrVariants = e.data.val != null ? this.findVariations({
                    id: e.data.id,
                    val: e.data.val
                }) : null;
                var selectedVarAttrs = jQuery.extend({}, {}, this.selectedVarAttribs);
                var validVariants = null;
                var unselectedVarAttrs = new Array();

                // for each selected variation attribute find valid variants
                for (var selectedVar in selectedVarAttrs) {
                    if (selectedVarAttrs[selectedVar]) {
                        validVariants = this.findVariations({
                            id: selectedVar,
                            val: selectedVarAttrs[selectedVar]
                        }, validVariants);
                    } else {
                        unselectedVarAttrs.push(selectedVar);
                    }
                }
                // update each variation attribute display
                jQuery.each(model.variations.attributes, function () {
                    if ((this.id != e.data.id || e.data.val == null) && selectedVarAttrs[this.id] == null) {
                        that.varAttrDisplayHandler(this.id, validVariants);
                    } else if (this.id != e.data.id && selectedVarAttrs[this.id] != null) {
                        that.varAttrDisplayHandler(this.id, selectedVarAttrVariants);
                    } else {
                        // show swatch related images for the current value
                        that.showImages(e.data.val, this.vals);
                    }
                });

                // based on the currently selected variation attribute values, try to find a matching variant
                this.selectedVar = this.findVariation(this.selectedVarAttribs);
            }

            // lets fire refresh view event to enable/disable variations attrs
            this.refreshView();
        },

        /**
         * go thru all variations attr and disable which are not available
         */
        resetVariations: function resetVariations() {
            if (isLoadingVar) {
                return; // we don't have the complete data yet
            }
            var that = this;
            var validVariants = model.variations.variants;
            if (this.selectedVarAttribs) {
                for (var selectedVarAttr in this.selectedVarAttribs) {
                    if (this.selectedVarAttribs[selectedVarAttr]) {
                        validVariants = that.findVariations({
                            id: selectedVarAttr,
                            val: this.selectedVarAttribs[selectedVarAttr]
                        }, validVariants);
                    }
                }
            }

            jQuery(this.containerId + ' .variationattributes .swatches').not('.current').not('.selected').each(function () {
                var dataa = jQuery(this).data('data'); // data is id set via app.hiddenData api
                jQuery(this).find('a.swatchanchor').each(function () {
                    // find A variation with this val
                    var filteredVariants = that.findVariations({ id: dataa, val: this.title }, validVariants);
                    if (filteredVariants.length > 0) {
                        // found at least 1 so keep it enabled
                        jQuery(this).parent().removeClass('unselectable');
                    } else {
                        jQuery(this).parent().addClass('unselectable');
                        jQuery(this).parent().removeClass('selected');
                    }
                });
            });
            jQuery(this.containerId + ' .variationattributes .variantdropdown select').not('.current select').not('.selected select').each(function () {
                var $select = jQuery(this);
                var vaId = $select.data('data').id; // data is id set via app.hiddenData api
                var options = $select.data('options');
                if (!options) {
                    options = [];
                    $select.find('option').each(function () {
                        var $option = jQuery(this);
                        options.push({ value: $option.val(), text: $option.text(), selected: false });
                    });
                    $select.data('options', options);
                }
                var len = options.length;
                var selectedVal = $select.val();
                $select.empty();
                jQuery.each(options, function (index, value) {

                    if (len > 1 && index == 0) {
                        $select.append(jQuery('<option></option>').text(value.text).val(value.value));
                        return; // very first option when the length is greater than 1 is 'Select ...' message so skip it
                    }
                    var filteredVariants = that.findVariations({ id: vaId, val: value.value }, validVariants);
                    if (filteredVariants.length > 0) {
                        //add it
                        $select.append(jQuery('<option></option>').text(value.text).val(value.value));
                    } else {
                        // no variant found with this value combination so disable it
                        //this.disabled = true;

                        /**if (this.selected) {
                        // remove the currently selected value if the value is not selectable
                        that.showSelectedVarAttrVal(attrId, "");
                        that.selectedVarAttribs[attrId] = null;
                        }*/
                        // remove current selection
                        //this.selected = false;
                    }
                });
                $select.val(selectedVal);
            });
        },

        /**
         * given a variation attribute id and valid variants, it would adjust the ui i.e. enable/disable
         * appropriate attribute values.
         *
         * @param attrId - String, id of the variation attribute
         * @param validVariants - Array of json objects of valid variants for the given attribute id
         * */
        varAttrDisplayHandler: function varAttrDisplayHandler(attrId, validVariants) {
            var that = this; // preserve this instance
            var futureVariants = validVariants;
            if (this.selectedVarAttribs) {
                for (var selectedVarAttr in this.selectedVarAttribs) {
                    if (this.selectedVarAttribs[selectedVarAttr]) {
                        futureVariants = that.findVariations({
                            id: selectedVarAttr,
                            val: this.selectedVarAttribs[selectedVarAttr]
                        }, futureVariants);
                    }
                }
            }
            // loop thru all non-dropdown ui elements i.e. swatches e.g. color, width, length etc.
            jQuery(this.containerId + ' .variationattributes .swatches.future, ' + this.containerId + ' .variationattributes .swatches.current').each(function () {
                var $swatch = jQuery(this);
                var swatchId = $swatch.data('data'); // data is id set via app.hiddenData api

                if (swatchId === attrId && validVariants) {

                    $swatch.find('a.swatchanchor').each(function () {
                        var $this = jQuery(this);
                        var parentLi = $this.parent();

                        // find A variation with this val
                        var filteredVariants = $swatch.hasClass('future') ? that.findVariations({ id: attrId, val: this.title }, futureVariants) : that.findVariations({ id: attrId, val: this.title }, validVariants);
                        if (filteredVariants.length > 0) {
                            // found at least 1 so keep it enabled
                            parentLi.removeClass('unselectable');
                            if ($swatch.hasClass('color')) {
                                if (!getAvailability(filteredVariants)) {
                                    if ($this.find('.out-of-stock').size() === 0) {
                                        $this.prepend('<span class=\'out-of-stock\'></span>');
                                    }
                                } else {
                                    $this.find('.out-of-stock').remove();
                                }
                            } else {
                                if (!getAvailability(filteredVariants)) {
                                    if ($this.find('span').text().indexOf('Out of Stock') === -1) {
                                        if ($this.find('span').text().indexOf('New') !== -1) {
                                            $this.find('span').text($this.find('span').text() + ' / Out of Stock');
                                        } else {
                                            $this.find('span').text('Out of Stock');
                                        }
                                    }
                                } else {
                                    if ($this.find('span').text().indexOf('New') !== -1) {
                                        $this.find('span').text($this.find('span').text().replace(' / Out of Stock', ''));
                                    } else {
                                        $this.find('span').text($this.find('span').text().replace('Out of Stock', ''));
                                    }
                                }
                            }
                        } else {
                            // no variant found with this value combination so disable it
                            parentLi.addClass('unselectable');

                            if (parentLi.hasClass('selected')) {
                                // remove the currently selected value if the value is not selectable
                                that.showSelectedVarAttrVal(attrId, '');
                                that.selectedVarAttribs[attrId] = null;
                            }
                            // remove current selection
                            parentLi.removeClass('selected');
                        }
                    });
                }
            });

            // loop thru all the non-swatches(drop down) attributes
            jQuery(this.containerId + ' .variationattributes .variantdropdown.future select, ' + this.containerId + ' .variationattributes .variantdropdown.current select').each(function () {
                var $select = jQuery(this);
                var vaId = $select.data('data').id; // data is id set via app.hiddenData api
                if (vaId === attrId && validVariants) {

                    var options = $select.data('options');
                    if (!options) {
                        options = [];
                        $select.find('option').each(function () {
                            var $option = jQuery(this);
                            options.push({ value: $option.val(), text: $option.text(), selected: false });
                        });
                        $select.data('options', options);
                    }
                    var len = options.length;
                    var selectedVal = $select.val();
                    $select.empty();
                    jQuery.each(options, function (index, value) {

                        if (len > 1 && index == 0) {
                            $select.append(jQuery('<option></option>').text(value.text).val(value.value));
                            return; // very first option when the length is greater than 1 is 'Select ...' message so skip it
                        }

                        // find A variation with this val
                        var filteredVariants = $select.closest('.variantdropdown').hasClass('future') ? that.findVariations({ id: attrId, val: value.value }, futureVariants) : that.findVariations({ id: attrId, val: value.value }, validVariants);
                        if (filteredVariants.length > 0) {
                            // found at least 1 so keep it enabled
                            var oos = '';
                            if (!getAvailability(filteredVariants)) {
                                oos = ' - Out of Stock';
                            }
                            //add it
                            $select.append(jQuery('<option></option>').text(value.text + oos).val(value.value));
                        } else {
                            // no variant found with this value combination so disable it
                            //this.disabled = true;

                            /**if (this.selected) {
                            // remove the currently selected value if the value is not selectable
                            that.showSelectedVarAttrVal(attrId, "");
                            that.selectedVarAttribs[attrId] = null;
                            }*/
                            // remove current selection
                            //this.selected = false;
                        }
                    });
                    $select.val(selectedVal);
                }
            });
        },

        /**
         * refresh the UI i.e. availability, price, A2C button and variation attributes display
         */
        refreshView: function refreshView() {
            var thisProduct = this;

            if (!isLoadingVar && this.selectedVar == null) {
                // if we have loaded the variations data then lets if the user has already selected some values
                // find a matching variation
                this.selectedVar = this.findVariation(this.selectedVarAttribs);
            }

            if (!isLoadingVar && this.selectedVar != null) {
                //Facebook Pixel Code for variant view
                fbq('track', 'ViewContent', {
                    'content_ids': [thisProduct.selectedVar.id],
                    'content_type': 'product'
                });
                // update availability
                reloadAvailability(thisProduct, thisProduct.selectedOptions.Quantity);
                // update price
                this.showUpdatedPrice(computePrice(thisProduct), this.selectedVar.pricing.standard);

                if (!(!this.selectedVar.inStock && this.selectedVar.avStatus === Constants.AVAIL_STATUS_NOT_AVAILABLE) && (this.getPrice() > 0 || this.isPromoPrice())) {
                    // Replace the hero shot with the specific variant chosen
                    var varID = this.selectedVar.id;
                    var imageUrl = model.images.variants[varID];
                    var zoomImageUrl = model.images.zoomvariants[varID];
                    // load the fully qualified variation image
                    if (imageUrl != null) {
                        //jQuery('.productdetailcolumn .productimage img, .productdetailcolumn .quickviewproductimage img').attr('src',imageUrl);
                        jQuery('.MagicZoom').attr('href', zoomImageUrl);
                        $('body').find('.MagicZoom img').attr('src', zoomImageUrl);
                        MagicZoom.update('product-image', zoomImageUrl, zoomImageUrl);
                    }

                    this.showItemNo();
                    this.showAvailability();
                    // enable add to cart button
                    this.enableA2CButton();
                    jQuery(this).trigger('AddtoCartEnabled');
                } else if (this.selectedVar.earlyBirdMessage != '') {
                    this.showItemNo();
                    //this.hideAvailability();
                    this.disableA2CButton();
                    jQuery(this).trigger('AddtoCartDisabled');
                } else {
                    //this.removeItemNo();
                    this.showItemNo();
                    this.showAvailability();
                    //this.revertPrice();
                    this.disableA2CButton();
                    jQuery(this).trigger('AddtoCartDisabled');
                }
                if (this.selectedVar.avStatus === Constants.AVAIL_STATUS_NOT_AVAILABLE) {
                    //this.removeA2CButton();
                }
            } else {
                if (isLoadingVar) {
                    // update availability
                    setAvailabilityMsg(progress.show('productloader'));
                } else {
                    setAvailabilityMsg(Resources.NON_SELECTED);
                }
                this.removeItemNo();
                this.showAvailability();
                this.revertPrice();
                // disable add to cart button
                this.disableA2CButton();
                jQuery(this).trigger('AddtoCartDisabled');
            }

            var nonSelectedVars = [];

            var validVariants = null;

            for (var selectedVar in this.selectedVarAttribs) {
                if (this.selectedVarAttribs[selectedVar]) {
                    validVariants = this.findVariations({
                        id: selectedVar,
                        val: this.selectedVarAttribs[selectedVar]
                    }, validVariants);
                }
            }

            // update selected var attr vals and refresh their display
            jQuery.each(model.variations.attributes, function () {
                thisProduct.showSelectedVarAttrVal(this.id, thisProduct.selectedVarAttribs[this.id]);

                if (!thisProduct.selectedVarAttribs[this.id] || thisProduct.selectedVarAttribs[this.id] == '') {
                    nonSelectedVars.push(this.name);

                    thisProduct.varAttrDisplayHandler(this.id, validVariants);
                }
            });

            // process non-selected vals and show updated tooltip for A2C button as a reminder
            // and show it along availability
            var tooltipStr = getNonSelectedTooltip(nonSelectedVars);
            //var missingvalue = $(".missingvalue").val();
            if (nonSelectedVars.length > 0) {
                var availMsg = $.validator.format(Resources.MISSING_VAL, tooltipStr);
                setAvailabilityMsg(availMsg);
                //jQuery(thisProduct.containerId+" .addtocartbutton:last").attr("title", availMsg);
            }
        },

        /**
         * renders pricing div given a sale price and optional standard price
         * To format the price display, it goes to server via an ajax call.
         *
         * @param sale - sale price
         * @param standard - standard price
         */
        showUpdatedPrice: function showUpdatedPrice(sale, standard) {
            var standardPrice = Number(standard || 0);
            var salePrice = Number(sale || 0);
            var priceHtml = '';
            var formattedPrices = { 'salePrice': salePrice, 'standardPrice': standardPrice };

            // send server request to format the money baed on site settings using Money api
            ajax.getJson({
                url: Urls.formatMoney,
                cache: true,
                async: false,
                data: { 'salePrice': salePrice, 'standardPrice': standardPrice },
                callback: function callback(data) {
                    formattedPrices = data;
                }
            });

            // in case it is a promotional price then we do not care if it is 0
            priceHtml = salePrice > 0 || this.isPromoPrice() ? '<div class="salesprice">' + formattedPrices.salePrice + '</div>' : ' <div class="salesprice">N/A</div>';

            if (standardPrice > 0 && standardPrice > salePrice) {
                // show both prices
                priceHtml = '<div class="standardprice">' + formattedPrices.standardPrice + '</div>' + priceHtml;
            }
            if (standardPrice === 0 && salePrice === 0) {
                if (this.selectedVar.earlyBirdMessage != '') {
                    priceHtml = '<div class="salesprice">' + this.selectedVar.earlyBirdMessage + '</div>';
                } else {
                    priceHtml = '<div class="salesprice"></div>';
                }
            }
            var $price = jQuery(this.containerId + ' .productinfo .price:first');
            if (!$price.data('originalPrice')) {
                $price.data('originalPrice', $price.html());
            }
            $price.html(priceHtml);
            // containerId contains #, get rid of it before finding the right price div
            jQuery(this.containerId + ' #pdpATCDiv' + this.containerId.substring(1) + ' .price').html(priceHtml);
        },

        /**
         * returns a computed price for this product
         */
        getPrice: function getPrice() {
            return computePrice(this);
        },

        /**
         * Determines if the selected product has promotional price.
         *             *
         * @return boolean true if promotional price is present otherwise false
         */
        isPromoPrice: function isPromoPrice() {
            return this.selectedVar != null ? this.selectedVar.pricing.isPromoPrice : model.pricing.isPromoPrice;
        },

        /**
         * receives 2 or 1 variation attribute values and tries to figure out if there is a variant with these values.
         *
         * @param val1 - variation attribute value
         * @param val2 - variation attribute value
         * @return boolean - true if a variant exists otherwise false
         */
        isVariation: function isVariation(val1, val2) {
            var variant = null;

            for (var i = 0; i < model.variations.variants.length; i++) {
                variant = model.variations.variants[i];
                if (variant.attributes[val1.id] == val1.val && (val2 == undefined || variant.attributes[val2.id] == val2.val)) {
                    return true;
                }
            }
            /**
             * apparently there is no way to break out of jQuery.each half way :(
             jQuery.each(model.variations.variants, function(){
            if (!found && this.attributes[val1.id] == val1.val && this.attributes[val2.id] == val2.val) {
            found = true;
            return;
            }
            });*/
            return false;
        },

        /**
         * find 0 or more variants matching the given attribs object(s) and in stock
         * return null or found variants
         */
        findVariations: function findVariations(attr, variants) {
            var foundVariants = new Array();
            variants = variants || model.variations.variants;

            var variant = null;
            for (var i = 0; i < variants.length; i++) {
                variant = variants[i];
                if (variant.attributes[attr.id] === attr.val) /*&&
                                                              //(variant.inStock || (variant.avStatus === app.constants.AVAIL_STATUS_BACKORDER && variant.ATS > 0) || (variant.avStatus === app.constants.AVAIL_STATUS_PREORDER && variant.ATS > 0))*/
                    {
                        foundVariants.push(variant);
                    }
            }

            return foundVariants;
        },

        /**
         * find a variant with the given attribs object
         * return null or found variation json
         */
        findVariation: function findVariation(attrs) {
            if (!this.checkAttrs(attrs)) {
                return null;
            }

            var attrToStr = function attrToStr(attrObj) {
                var result = '';
                jQuery.each(model.variations.attributes, function () {
                    result += attrObj[this.id];
                });
                return result;
            };

            var attrsStr = attrToStr(attrs);
            var variant = null;
            for (var i = 0; i < model.variations.variants.length; i++) {
                variant = model.variations.variants[i];
                if (attrToStr(variant.attributes) === attrsStr) {
                    return variant;
                }
            }
            return null;
        },

        // find a variation with the give id otherwise empty object
        findVariationById: function findVariationById(id) {

            for (var i = 0; i < model.variations.variants.length; i++) {
                // IE7 does NOT support this!!!
                //for each(var variation in model.variations.variants) {
                var variation = model.variations.variants[i];
                if (variation && variation.id === id) {
                    return variation;
                }
            }

            return {};
        },

        /**
         * see if the specified attrs object has all the variation attributes present in it
         * return true/false
         */
        checkAttrs: function checkAttrs(attrs) {
            for (var i = 0; i < model.variations.attributes.length; i++) {
                if (attrs[model.variations.attributes[i].id] == null) {
                    return false;
                }
            }
            return true;
        },

        // given an id, return attr definition from model.variations.attributes
        getAttrByID: function getAttrByID(id) {
            for (var i = 0; i < model.variations.attributes.length; i++) {
                if (model.variations.attributes[i].id === id) {
                    return model.variations.attributes[i];
                }
            }
            return {};
        },

        // returns current availability status e.g. in_stock, preorder etc.
        getAvStatus: function getAvStatus() {
            if ((this.variant || this.master) && this.selectedVar != null) {
                return this.selectedVar.avStatus;
            } else {
                return model.avStatus;
            }
        },

        // return available to sell qty
        getATS: function getATS() {
            if ((this.variant || this.master) && this.selectedVar != null) {
                return this.selectedVar.ATS;
            } else {
                return model.ATS;
            }
        },

        // return non-closeout low qty threshold
        getNonCloseoutLowQtyThreshold: function getNonCloseoutLowQtyThreshold() {
            if ((this.variant || this.master) && this.selectedVar != null) {
                return this.selectedVar.nonCloseoutLowQtyThreshold;
            } else {
                return model.nonCloseoutLowQtyThreshold;
            }
        },

        // return the quantity that was used to calculate availability
        getAvailabilityQty: function getAvailabilityQty() {
            if ((this.variant || this.master) && this.selectedVar != null) {
                return this.selectedVar.avStatusQuantity;
            } else {
                return model.avStatusQuantity;
            }
        },

        // return the availability levels
        getAvLevels: function getAvLevels() {
            if ((this.variant || this.master) && this.selectedVar != null) {
                return this.selectedVar.avLevels;
            } else {
                return model.avLevels;
            }
        },

        // returns in stock date
        getInStockDate: function getInStockDate() {
            if ((this.variant || this.master) && this.selectedVar != null) {
                return this.selectedVar.inStockDate;
            } else {
                return model.inStockDate;
            }
        },

        // set the add to cart button and bind handlers for bundle/product set
        getSubProductsBinding: function getSubProductsBinding() {
            var thisProduct = this;

            // For bundles and product-sets, enable or disable the add-to-cart button.
            // The button should be disabled if the add-to-cart button of any subproduct is disabled, enabled otherwise.
            // For product-sets, display a price which is the sum of the set-products prices as long as the add-to-cart button is enabled.
            if (model.bundle || model.productSet) {

                var bundleA2CEnabled = false;
                var price = new Number();
                for (var i = 0; i < thisProduct.subProducts.length; i++) {
                    var subProduct = thisProduct.subProducts[i];
                    bundleA2CEnabled = subProduct.isA2CEnabled();
                    if (!bundleA2CEnabled) {
                        break;
                    }

                    // collect price info
                    price += new Number(subProduct.getPrice());
                }

                // if any of the bundled product has its A2C button disabled then the bundle is not orderable
                if (!bundleA2CEnabled) {
                    this.disableA2CButton();
                } else {
                    this.enableA2CButton();

                    // show total price except for a bundle
                    if (!model.bundle) {
                        thisProduct.showUpdatedPrice(price);
                    }
                }
            }

            // bind AddtoCartDisabled event for each subproduct (bundle or product set)
            jQuery.each(thisProduct.subProducts, function () {
                jQuery(this).bind('AddtoCartDisabled', {},
                /**
                 * Event handler when a subproduct of a product set or a bundle is selected.
                 * disable the add to cart button
                 */
                function () {
                    thisProduct.disableA2CButton();
                });
            });

            // see if have any sub-products and bind AddtoCartEnabled event
            jQuery.each(thisProduct.subProducts, function () {
                jQuery(this).bind('AddtoCartEnabled', {},
                /**
                 * Event handler when a subproduct of a product set or a bundle is selected.
                 * Basically enable the add to cart button or do other  refresh if needed like price etc.
                 */
                function () {
                    // enable Add to cart button if all the sub products have been selected
                    // and show the updated price
                    var enableAddToCart = true;
                    var subProducts = thisProduct.subProducts;
                    var price = new Number();

                    for (var i = 0; i < subProducts.length; i++) {
                        if ((subProducts[i].variant || subProducts[i].master) && subProducts[i].selectedVar == null || !subProducts[i].bundled && (subProducts[i].selectedOptions.Quantity == undefined || subProducts[i].selectedOptions.Quantity <= 0)) {
                            enableAddToCart = false;
                            break;
                        } else {
                            if (subProducts[i].selectedVar != null) {
                                subProducts[i].selectedOptions.pid = subProducts[i].selectedVar.pid;
                            } else {
                                subProducts[i].selectedOptions.pid = subProducts[i].pid;
                            }

                            // Multiply the subproduct quantity-one price by the entered quantity.
                            // Important note:  This value will be incorrect if subproduct uses
                            // tiered pricing !!!!!
                            var subproductQuantity = subProducts[i].selectedOptions.Quantity;
                            if (subproductQuantity == undefined) {
                                subproductQuantity = 1;
                            }
                            price += new Number(subproductQuantity * subProducts[i].getPrice());
                        }
                    }

                    if (enableAddToCart && (model.productSet || model.inStock) && (price > 0 || thisProduct.isPromoPrice())) {
                        thisProduct.enableA2CButton();

                        // show total price except for a bundle
                        if (!model.bundle) {
                            thisProduct.showUpdatedPrice(price);
                        }
                    } else {
                        thisProduct.disableA2CButton();
                    }
                });
            });
        },

        // determine if A2C button is enabled or disabled
        // true if enabled, false otherwise
        isA2CEnabled: function isA2CEnabled() {
            if (this.variant || this.master) {
                if (this.selectedVar != null) {
                    return this.selectedVar.avStatus === Constants.AVAIL_STATUS_IN_STOCK || this.selectedVar.avStatus === Constants.AVAIL_STATUS_BACKORDER || this.selectedVar.avStatus === Constants.AVAIL_STATUS_PREORDER;
                } else {
                    return false;
                }
            } else {
                return model.avStatus === Constants.AVAIL_STATUS_IN_STOCK || model.avStatus === Constants.AVAIL_STATUS_BACKORDER || model.avStatus === Constants.AVAIL_STATUS_PREORDER;
            }
        },

        /**
         * work horse of the product detail page getting everything tied together i.e. all the dynamic stuff
         * and one time initialization. called only ONCE
         * bind all the product display events and handlers
         * load variants in case this is a variation product
         * bind subproducts a2c button enable event handler
         *
         * @param options.cotainerId - id of the containing div
         * @param options.source - source of this product show request, mainly quickview
         */
        show: function show(options) {
            // preserve this instance
            var thisProduct = this;

            // bind VariationsLoaded which gets fired when the variation data is received from the server
            // and we need to refresh the ui
            jQuery(this).bind('VariationsLoaded', {}, function () {
                // enable/disable unavailable values
                // and set the currently selected values
                // reset the currently selected variation attributes i.e. reset the ui
                thisProduct.resetVariations();

                // create the default availability message based on ATS count
                // from the variants
                var atsCount = getATS(model.variations.variants);
                if (atsCount == 0) {
                    setAvailabilityMsg('<span class=\'out-of-stock\'>' + Resources[Constants.AVAIL_STATUS_NOT_AVAILABLE] + '</span>');
                }
                // We will use this in the 2nd of the two following loops
                var someAreNotSelected = false;
                // Determine the selected state of each option
                var $attributes = jQuery(thisProduct.containerId + ' .variationattributes .swatches,' + thisProduct.containerId + ' .variationattributes .variantdropdown');
                $attributes.each(function () {
                    var $this = jQuery(this);
                    if ($this.hasClass('swatches')) {
                        //if it is swatches, find the selected swatch
                        if ($this.find('.selected').size() > 0) {
                            $this.addClass('selected');
                        } else {
                            $this.removeClass('selected');
                        }
                    } else {
                        var selectBox = $this.find('select').get(0);
                        if ($(selectBox).find('option').length == 2) {
                            $(selectBox).find('option').eq(1).prop('selected', true);
                        }
                        if (selectBox.selectedIndex >= 0 && selectBox.options[selectBox.selectedIndex].value != '') {
                            $this.addClass('selected');
                        } else {
                            $this.removeClass('selected');
                        }
                    }
                }).each(function (index) {
                    var $this = jQuery(this);
                    if (someAreNotSelected) {
                        $this.removeClass('selected').addClass('future').find('.selected').removeClass('selected');
                        $this.find('.optionwrapper').slideUp();
                    }
                    if (!$this.hasClass('selected')) {
                        if (!someAreNotSelected) {
                            $this.addClass('current');
                            someAreNotSelected = true;
                        }
                    } else {
                        // if it's not the last item, hide the selections and leave the button enabled
                        if ($attributes.size() - 1 != index) {
                            $this.find('.optionwrapper').slideUp().find('button').removeClass('non-selectable');
                        } else {
                            //it is the last item, and it's selected, so it's current
                            $this.removeClass('selected').addClass('current');
                        }
                    }
                });

                // Grab the currently selected values and update the UI
                // swatch variation attributes
                jQuery(thisProduct.containerId + ' .variationattributes .swatches, ' + thisProduct.containerId + ' .variationattributes .variantdropdown select').each(function (index) {
                    if (index === 0) {
                        var $swatch = jQuery(this);
                        var swatchId = $swatch.data('data'); // data is id set via app.hiddenData api

                        if (model.variations.variants) {
                            if (typeof this.selectedIndex === 'undefined') {
                                $swatch.find('a.swatchanchor').each(function () {
                                    var $this = jQuery(this);
                                    //var parentLi = $this.parent();
                                    // find A variation with this val
                                    var filteredVariants = thisProduct.findVariations({
                                        id: swatchId,
                                        val: this.title
                                    }, model.variations.variants);

                                    if ($swatch.hasClass('color')) {
                                        if (!getAvailability(filteredVariants)) {
                                            if ($this.find('.out-of-stock').size() === 0) {
                                                $this.prepend('<span class=\'out-of-stock\'></span>');
                                            }
                                        } else {
                                            $this.find('.out-of-stock').remove();
                                        }
                                    } else {
                                        if (!getAvailability(filteredVariants)) {
                                            if ($this.find('span').text().indexOf('Out of Stock') === -1) {
                                                if ($this.find('span').text().indexOf('New') !== -1) {
                                                    $this.find('span').addClass('outofstockpdp');
                                                    $this.find('span').text($this.find('span').text() + ' / Out of Stock');
                                                } else {
                                                    $this.find('span').addClass('outofstockpdp');
                                                    $this.find('span').text('Out of Stock');
                                                }
                                            }
                                        } else {
                                            if ($this.find('span').text().indexOf('New') !== -1) {
                                                $this.find('span').text($this.find('span').text().replace(' / Out of Stock', ''));
                                            } else {

                                                $this.find('span').text($this.find('span').text().replace('Out of Stock', ''));
                                            }
                                        }
                                    }
                                });
                            } else {

                                $swatch.find('option').each(function () {
                                    if (this.value !== '') {
                                        var filteredVariants = thisProduct.findVariations({
                                            id: swatchId.id,
                                            val: this.value
                                        }, model.variations.variants);
                                        if (!getAvailability(filteredVariants)) {
                                            this.text = this.text + ' - Out of Stock';
                                        }
                                    }
                                });
                            }
                        }
                    }

                    if (typeof this.selectedIndex === 'undefined') {
                        var thisSwatch = jQuery(this),
                            pdpVarId = thisSwatch.data('data'); // data is id which is set via app.hiddenData onload

                        // grab the currently selected variation attribute val
                        thisSwatch.find('.selected a').each(function () {
                            thisProduct.varAttrSelected({ data: { id: pdpVarId, val: this.title } });
                        });
                    } else {
                        // non-swatch variation attributes
                        if (this.selectedIndex >= 0 && this.options[this.selectedIndex].value != '') {
                            // grab the currently selected val by firing update ui api
                            // when dealing with a select element, data returns an object so we must ask for id
                            thisProduct.varAttrSelected({
                                data: {
                                    id: jQuery(this).data('data').id,
                                    val: this.options[this.selectedIndex].value
                                }
                            });
                        }
                    }
                });
                /**
                 // loop thru all non-dropdown ui elements i.e. swatches e.g. color, width, length etc.
                 jQuery(this.containerId + " .variationattributes .swatches").each(function(){
                });*/
            });

            this.containerId = '#' + options.containerId;
            var isQuickView = false;

            if (options.source && options.source == 'quickview') {
                isQuickView = true;
                this.containerId = '.ui-dialog #' + options.containerId;
            }

            myContainerId = this.containerId;

            // bind click handlers for prev/next links
            getNavLinks();

            // size chart click binding
            getSizeChart();

            // variation attributes handling in case it is a master or a variant product
            if (model.master || model.variant) {
                loadVariants(this); // make a server call to load the variants, this is due to the performance reasons
                // meanwhile display the available variation attributes

                // bind the "next" buttons in the picker
                jQuery('button.next').click(function () {
                    /**var $this = jQuery(this);
                     if(!$this.hasClass("non-selectable")) {
                    $this.closest(".swatches, .variantdropdown").find(".optionwrapper").slideUp(400,function(){
                    jQuery(this).closest(".swatches, .variantdropdown")
                    .removeClass("current").addClass("selected")
                    .nextUntil(".swatches, .variantdropdown").next()
                    .addClass("current").removeClass("future")
                    .find(".optionwrapper").slideDown().find('select').change();
                    });
                    }*/
                });

                //bind the "previous" buttons in the picker
                jQuery('a.previous').click(function (e) {
                    e.preventDefault();
                    jQuery(this).closest('.swatches, .variantdropdown').prevUntil('.swatches, .variantdropdown').prev().find('a.filter').click();
                });
                $('.MagicZoom img.primary-image').bind('click', function () {
                    $('.new-swim,.old-swim').addClass('swimHide');

                    setTimeout(function () {
                        //var zoomedContent = $('.mz-expand-stage').html();
                        $('.mz-button-close').on('click', function () {
                            $('.new-swim,.old-swim').removeClass('swimHide');
                        });
                    }, 500);
                });
                // clicking on a previous step
                jQuery('.variationattributes').delegate('.selected a.filter', 'click', function (e) {
                    e.preventDefault();
                    var $this = jQuery(this).closest('.selected');
                    jQuery('.variationattributes .swatches,.variationattributes .variantdropdown').removeClass('current');
                    $this.removeClass('selected').addClass('current');
                    $this.nextAll('.swatches, .variantdropdown').each(function () {
                        var $variant = jQuery(this);
                        $variant.addClass('future').removeClass('selected');
                        if ($variant.hasClass('swatches')) {
                            $variant.find('.selected a').click();
                        } else if ($variant.hasClass('variantdropdown')) {
                            var $select = $variant.find('select');
                            if ($select.find('option').size() > 1) {
                                $select.val('').change();
                            }
                        }
                    });
                    $(this).parent().find('.swatchesdisplay .selected a').click();
                    $(this).parent().find('select').val('');

                    jQuery('.variationattributes').find('.future .optionwrapper').slideUp(400, function () {
                        jQuery('.current .optionwrapper').slideDown(400, function () {
                            $(this).find('.filter .value').text('');
                        });
                    });
                    jQuery('.variationattributes').find('.current .optionwrapper').slideDown(400, function () {
                        $(this).closest('.current').find('.filter .value').text('');
                    });
                });

                // bind the "learn more" links
                jQuery('span.learnmore a').click(function (e) {
                    e.preventDefault();
                    // add learn more dialog container div if its not added yet
                    // only added once
                    if (jQuery('#learnMoreDialog').length == 0) {
                        jQuery('<div></div>').attr('id', 'learnMoreDialog').appendTo(document.body);
                    }

                    var learnMoreDialog = dialog.create({
                        id: 'learnMoreDialog', options: {
                            height: 530,
                            width: 800,
                            title: Resources.SIZECHART_TITLE
                        }
                    });

                    learnMoreDialog.dialog('open');

                    // make the server call to load the learn more html
                    jQuery('#learnMoreDialog').load(this.href);
                });

                // loop thru all the swatches and bind events etc.
                jQuery(thisProduct.containerId + ' .variationattributes .swatches').each(function () {
                    var thisSwatch = jQuery(this);
                    var pdpVarId = thisSwatch.data('data'); // data is id which is set via app.hiddenData onload
                    var attrDef = thisProduct.getAttrByID(pdpVarId);

                    if (!attrDef) {
                        return;
                    }

                    // click handler for swatches links
                    var varEventHandler = function varEventHandler(e) {
                        var thisObj = jQuery(this);

                        e.data = { id: pdpVarId, val: this.title };

                        if (thisObj.parent().hasClass('unselectable')) {
                            return false;
                        } else if (thisObj.parent().hasClass('selected')) {
                            // deselection
                            e.data = { id: pdpVarId, val: null };
                            thisObj.parent().removeClass('selected');
                            // clear the current selection
                            thisProduct.varAttrSelected(e);

                            thisProduct.resetVariations();
                        } else {
                            // selection
                            e.data = { id: pdpVarId, val: this.title };
                            // remove the current selection
                            thisSwatch.find('.selected').removeClass('selected');
                            if (thisObj.closest('.swatches').nextUntil('.swatches, .variantdropdown').next().size() > 0) {
                                thisObj.parent().addClass('selected').closest('.swatches').find('button').removeClass('non-selectable');
                                var $this = jQuery(this);
                                if (!$this.hasClass('non-selectable')) {
                                    $this.closest('.swatches').find('.optionwrapper').slideUp(400, function () {
                                        jQuery(this).closest('.swatches').removeClass('current').addClass('selected').nextUntil('.swatches').next().not('.clear').first().addClass('current').removeClass('future').find('.optionwrapper').slideDown(400, function () {
                                            jQuery(this).find('select option').each(function (index) {
                                                if ($(this).closest('select').find('option').length == 2 && index == 1) {
                                                    $(this).prop('selected', true).trigger('change');
                                                    //$(this).attr('selected','selected').trigger('change');
                                                }
                                            });
                                        }).find('select').change();
                                    });
                                }
                            } else {
                                thisObj.parent().addClass('selected');
                            }
                            thisProduct.varAttrSelected(e);
                        }

                        return false;
                    };

                    // all swtach anchors
                    var varJqryObjs = thisSwatch.find('a.swatchanchor');

                    // if its a color attr then render its swatches and images
                    if (pdpVarId === 'color') {
                        var colorAttrDef = thisProduct.getAttrByID('color');

                        varJqryObjs.each(function () {

                            // given a variation attr value, find its swatch image url
                            var findSwatch = function findSwatch(val) {
                                for (var i = 0; i < colorAttrDef.vals.length; i++) {
                                    if (colorAttrDef.vals[i].val === val) {
                                        return colorAttrDef.vals[i].images.swatch;
                                    }
                                }
                                return ''; // no swatch image found
                            };

                            var swatchUrl = findSwatch(this.title).url; // find swatch url

                            if (swatchUrl && swatchUrl != '') {
                                //jQuery(this).css("color", "transparent").parent().css("background", "url(" + swatchUrl + ")");
                                jQuery(this).css('text-indent', '-9999px').prepend('<img alt="' + this.title + '" src="' + swatchUrl + '"/>');
                            } else {
                                jQuery(this).css('color', 'transparent'); // no swatch image found
                            }
                        });

                        // swatches click, hover and mouseleave event handlers
                        varJqryObjs.data('data', { id: pdpVarId }).click(varEventHandler);
                        if ($(window).width() > 1024) {
                            varJqryObjs.data('data', { id: pdpVarId }).mouseenter(function () {
                                thisProduct.showSelectedVarAttrVal('color', this.title);
                                thisProduct.showImages(this.title, colorAttrDef.vals);
                            }).mouseleave(function () {
                                if (thisProduct.selectedVar) {
                                    thisProduct.showImages(thisProduct.selectedVar.id, [{
                                        'val': thisProduct.selectedVar.id,
                                        'images': {
                                            'original': [{ 'url': model.images.zoomvariants[thisProduct.selectedVar.id] }],
                                            'small': [{ 'url': model.images.variants[thisProduct.selectedVar.id] }],
                                            'large': [{ 'url': model.images.variants[thisProduct.selectedVar.id] }]
                                        }
                                    }]);
                                } else if (thisProduct.selectedVarAttribs.color) {
                                    thisProduct.showImages(thisProduct.selectedVarAttribs.color, colorAttrDef.vals);
                                } else {
                                    thisProduct.showImages('', [{ val: '', images: model.images }]);
                                }

                                thisProduct.showSelectedVarAttrVal('color', thisProduct.selectedVarAttribs.color || '');
                            });
                        }
                    } else {
                        // not a color swatch, we only have click handler for this type of variation attribute e.g. width, length etc.
                        varJqryObjs.data('data', { id: pdpVarId }).click(varEventHandler);
                    }
                });

                jQuery(thisProduct.containerId + ' .variationattributes .variantdropdown select option').each(function (index) {
                    if (jQuery(thisProduct.containerId + ' .variationattributes .variantdropdown select option').length == 2 && index == 1) {
                        $(this).prop('selected', true).trigger('change');
                    }
                });

                // loop thru all the non-swatches attributes and bind events etc.
                jQuery(thisProduct.containerId + ' .variationattributes .variantdropdown select').each(function () {
                    // default ui i.e. drop downy
                    jQuery(this).data('data', { id: jQuery(this).data('data'), val: '' }).change(function (e) {
                        // if there is only 1 value to be selected then return i.e. no deselection available
                        //if (this.selectedIndex == 0 && this.options.length == 1) { return; }

                        e.data = jQuery(this).data('data'); // data is id
                        // this.selectedIndex == 0, it is deselection
                        e.data.val = this.selectedIndex == 0 && this.options.length > 1 ? null : this.options[this.selectedIndex].value;

                        if (this.selectedIndex == 0 && this.options.length > 1) {
                            // deselection
                            //jQuery(this).closest(".variantdropdown").find("button").addClass("non-selectable");
                        } else {
                            // selection
                            //jQuery(this).closest(".variantdropdown").find("button").removeClass("non-selectable");
                            jQuery(this).closest('.variantdropdown').find('.optionwrapper').slideUp(400, function () {
                                jQuery(this).closest('.variantdropdown').removeClass('current').addClass('selected').nextUntil('.future').next().addClass('current').removeClass('future').find('.optionwrapper').slideDown(400, function () {
                                    jQuery(this).find('select option').each(function (index) {
                                        if ($(this).closest('select').find('option').length == 2 && index == 1) {
                                            $(this).prop('selected', true).trigger('change');
                                            //$(this).attr('selected','selected').trigger('change');
                                        }
                                    });
                                }).find('select').change();
                            });
                        }

                        thisProduct.varAttrSelected(e);
                        if (this.selectedIndex == 0 && this.options.length > 1) {
                            // clear the current selection
                            thisProduct.resetVariations();
                        }
                    });
                });

                if (thisProduct.selectedVarAttribs.color) {
                    // show swatch related images for the current value
                    thisProduct.showImages(thisProduct.selectedVarAttribs.color, thisProduct.getAttrByID('color').vals);
                } else {
                    // show images and bind hover event handlers for small/thumbnails to toggle large image
                    thisProduct.showImages('', [{ val: '', images: model.images }]);
                }
            } else {
                // show images and bind hover event handlers for small/thumbnails to toggle large image
                thisProduct.showImages('', [{ val: '', images: model.images }]);
            }

            // bind product options event(s)
            getOptionsDiv(this);

            if (!model.productSet) {
                // quantity box
                if (!model.bundle) {
                    getQtyBox(this);
                } else if (model.bundle) {
                    // update avaiability for a bundle product, for everything else its done inside getQtyBox
                    setAvailabilityMsg(createAvMessage(this, 1));
                }
            }

            // Add to cart button click binding
            getAddToCartBtn(this);
            // intial display of A2C button
            // if the price is 0 or not available, its disabled
            // if not in stock, its disabled
            // isPromoPrice would be true in case if a product has a promotional price which could make product's price 0
            if (!(this.getPrice() > 0 || this.isPromoPrice()) || model.master || model.variant || model.productSet || model.bundle || !model.inStock && model.avStatus === Constants.AVAIL_STATUS_NOT_AVAILABLE && !model.productSet) {
                this.disableA2CButton();
                /** if((this.getPrice() == 0 && !this.isPromoPrice())) {
                this.hideAvailability();
                }*/
            }
            if (model.avStatus === Constants.AVAIL_STATUS_NOT_AVAILABLE) {}
            //this.removeA2CButton();


            // customer rating section only displayed for the main product
            if (!model.productSetProduct && !model.bundled) {
                if (!model.productSet && !isQuickView && !model.bundle) {
                    getRatingSection(this.containerId);
                }
            }

            // wish list, sent to friend, add to gift
            getMiscLinks(this);

            // product tabs
            getTabs(this.containerId);

            // setup bundle/product set
            this.getSubProductsBinding();
        },
        toString: function toString() {
            return this.model;
        }
    };
}; // Product defintion end
var ProductCache = null;
var quickviewShow = function quickviewShow(options) {
    var url = options.url;
    url = url = util.appendParamToURL(url, 'source', options.source);
    $('#QuickViewDialog').html('');
    var quickViewDialog = dialog.create({
        target: '#QuickViewDialog',
        options: {
            height: 530,
            width: 760,
            dialogClass: 'quickview',
            title: Resources.QUICK_VIEW_POPUP
        }
    });
    quickViewDialog.dialog('open');
    progress.show('#QuickViewDialog');

    $.ajax({
        url: url,
        success: function success(data) {
            $(quickViewDialog).html('').append(data);
            util.hiddenData();
            var ProductCache = null;
            var producJson = $('#QuickViewDialog .productjson').data('productjson');
            ProductCache = product(producJson);
            ProductCache.show({ containerId: 'pdpMain', append: false, source: options.source });
            addToCart.init();
            $('body').find('.quantityinput').off('keydown').on('keydown', function (e) {
                if (e.keyCode == 13) {
                    e.preventDefault();
                }
            });
            progress.hide();
        }
    });
};
var pdpEvents = {
    init: function init() {
        util.hiddenData();
        var producJson = $('body').find('.productjson').data('productjson');
        var sourceValue = $('body').find('.http-source').val();
        ProductCache = product(producJson);
        ProductCache.show({ containerId: 'pdpMain', append: false, source: sourceValue });
        $('#tabs').find('a[href="#pdpTab1"]').trigger('click');
        //var getDataOption = $('.product-primary-image').find('a').attr('data-options');
        $('body').find('.quantityinput').on('keydown', function (e) {
            if (e.keyCode == 13) {
                e.preventDefault();
            }
        });
        $(document).on('click', '.youtube-list-video a', function () {
            if ($(window).width() > 480 && $(window).width() < 959) {
                util.scrollBrowser($('.tab-sec').offset().top);
            } else if ($(window).width() < 481) {
                util.scrollBrowser($('.mobile-tabs-section .tabsHeader.videoTab').offset().top);
            }
        });
        $(document).on('click', '.video-link', function () {
            if ($(window).width() > 480) {
                util.scrollBrowser($('.tab-sec').offset().top);
                $('#tabs #videoTab').find('a[href="#pdpVideoTab"]').trigger('click');
            } else if ($(window).width() < 481) {
                util.scrollBrowser($('.mobile-tabs-section .tabsHeader.videoTab').offset().top);
                $('.tabsHeader.videoTab').parent('.mobile-tabs-section ').addClass('active');
                if ($('.videoTab').hasClass('loaded')) {
                    return false;
                }
                $('.videoTab').addClass('loaded');
                var target = $('#pdpVideoTab');
                var url = $('#productURL').val();
                ajax.load({
                    url: url,
                    dataType: 'html',
                    callback: function callback(data) {
                        target.html(data);
                    }
                });
            }
        });
        $('#add-to-cart').bind('click', function () {
            $('.addedto-cartoverlay').addClass('added-overlay');
            setTimeout(function () {
                $('.addedto-cartoverlay').removeClass('added-overlay');
            }, 2000);
        });
        $('#QuickViewDialog .product-primary-image').find('.product-image').click(function () {
            return false;
        });
        if ($('.provideo-spec-link').length > 0) {
            if (!($('.video-link').length > 0)) {
                if ($(window).width() > 480) {
                    $('.productname.h-one-tag').css({
                        'width': 'auto',
                        'margin-bottom': '-26px',
                        'float': 'left',
                        'padding-bottom': '8px'
                    });
                }
            }
        } else {
            if ($(window).width() > 480) {
                $('.productname.h-one-tag').css({ 'padding-bottom': '4px' });
            }
        }
        $(document).on('click', '.specChart-link', function () {
            if ($(window).width() > 480) {
                util.scrollBrowser($('.tab-sec').offset().top);
                $('#tabs').find('a[href="#specChartTab"]').trigger('click');
            } else if ($(window).width() < 481) {
                util.scrollBrowser($('.mobile-tabs-section .tabsHeader.specTab').offset().top);
                $('.tabsHeader.specTab').parent('.mobile-tabs-section ').addClass('active');
            }
        });
        var pdpRecomendation = function pdpRecomendation() {
            var pdpRecomendationCarousel = $('.pt_product-details .jcarouselcont .recommendations').find('.pdprecomo-owl');
            pdpRecomendationCarousel.owlCarousel({
                nav: true,
                dots: true,
                navigation: false,
                navRewind: false,
                rewind: false,
                loop: false,
                items: 5,
                responsiveClass: true,
                responsive: {
                    0: {
                        items: 2,
                        slideBy: 2
                    },
                    767: {
                        items: 2,
                        slideBy: 2
                    },
                    768: {
                        items: 5,
                        slideBy: 5
                    }
                }
            });
            var viewport = jQuery(window).width();
            var itemCount = jQuery('.owl-carousel .item').length;
            if (viewport >= 959 && itemCount > 5 || //desktop
            viewport >= 481 && viewport < 600 && itemCount > 3 //tablet
            || viewport < 480 && itemCount > 2 //mobile
            ) {
                    $('.pdprecomo-owl').find('.owl-prev, .owl-next').show();
                    $('.pdprecomo-owl').find('.owl-dots').show();
                } else {
                $('.pdprecomo-owl').find('.owl-prev, .owl-next').hide();
                $('.pdprecomo-owl').find('.owl-dots').hide();
            }
            $('.product-listing').find('h2.hide').removeClass('hide');
            var height = $('.owl-item').height();
            $('.pdprecomo-owl').find('.owl-item').find('.product-tile.item').height(height - 100);
            $('.pt_product-details .product-tile .product-image').on('mouseenter', function () {
                var $qvButton = $('#quickviewbutton');
                if ($qvButton.length === 0) {
                    $qvButton = $('<a id="quickviewbutton" class="quickview">' + Resources.QUICK_VIEW + '<i class="fa fa-arrows-alt"></i></a>');
                }
                var $link = $(this).find('.thumb-link');
                $qvButton.attr({
                    'href': $link.attr('href'),
                    'title': $link.attr('title')
                }).appendTo(this);
                $qvButton.off('click').on('click', function (e) {
                    e.preventDefault();
                    var options = {
                        url: $(this).attr('href'), //PREV JIRA PREV-255 :PLP: On Click Quick view navigating to a wrong page when user first changes the swatches. Taking only href.
                        source: 'quickview'
                    };
                    quickviewShow(options);
                });
            });
        };
        setTimeout(pdpRecomendation, 5500);
    }
};

module.exports = pdpEvents;

},{"../../ajax":15,"../../dialog":23,"../../progress":52,"../../util":63,"./addToCart":42}],45:[function(require,module,exports){
'use strict';

var progress = require('../progress'),
    uievents = require('../uievents'),
    tooltip = require('../tooltip'),
    validator = require('../validator'),
    ajax = require('../ajax'),
    util = require('../util');

var rapalainsider = {
    init: function init() {
        tooltip.init();
        validator.init();
        uievents.init();
        if (jQuery('#dialogcontainer123').length == 0) {
            jQuery(document.body).append('<div id=\'dialogcontainer123\' class=\'vipinsider-container\'></div>');
        }
        jQuery.each(jQuery('form:not(.suppress)'), function () {
            jQuery(this).validate(validator.settings);
        });

        var $vipinsider = $('.vipinsider-container');
        //vipform = $('.VipinsiderForm');
        //var validatorinit = $(this).closest('form').validate();
        $('#PasswordReset123').click(function (e) {
            e.preventDefault();
            $vipinsider.load(Urls.vipInsider, function () {
                $vipinsider.dialog({
                    bgiframe: true,
                    autoOpen: false,
                    modal: true,
                    overlay: {
                        opacity: 0.5,
                        background: 'white'
                    },
                    width: 358,
                    dialogClass: 'vipInsider-dlg',
                    resizable: false,
                    open: function open() {
                        tooltip.init();
                        validator.init();
                        uievents.init();
                        rapalainsider.dialogEvents();
                        rapalainsider.formPrepare({
                            formSelector: '#VipinsiderForm',
                            continueSelector: '#VIPInsider-form-sbmt-id',
                            type: 'opacity'
                        });
                        rapalainsider.vipinsiderevents();
                        if ($(window).width() > 1200) {
                            rapalainsider.customselecteventsb();
                        }
                        rapalainsider.textarearapala();
                        rapalainsider.clearbuttonfunct();
                        $('.remove').click(function (e) {
                            e.preventDefault();
                            var filename = $(this).attr('data-file');
                            var form = $(this).closest('form');
                            var url = form.attr('action');
                            var finalURL = util.appendParamToURL(url, 'filename', filename);
                            ajax.load({
                                url: finalURL,
                                callback: function callback() {}
                            });
                        });
                    }
                });
                jQuery('#dialogcontainer123').dialog('open');
                $(window).scrollTop(0);
            });
        });
    },
    dialogEvents: function dialogEvents() {
        var $vipinsider = $('.vipinsider-container');
        //vipform = $('.VipinsiderForm');
        rapalainsider.clearbuttonfunct();
        $vipinsider.find('#VIPInsider-form-sbmt-id').on('click', function (e) {
            e.preventDefault();
            var prodid = $('.fieldstaff form .dyn-cat-select select').find(':selected').val();
            if ($('.trigger_singleupload').is(':visible') && prodid != 'donation') {
                if (!($('.vip-uploadform-holder .filelist').find('.updatetext').length != 0)) {
                    $('.vip-uploadform-holder').find('.empty-attachment-error').removeClass('hide');
                    if (!$(this).closest('form').valid()) {
                        return false;
                    }
                    return false;
                }
            }
            if (!$(this).closest('form').valid()) {
                return false;
            }
            $('.vip-uploadform-holder').find('.empty-attachment-error').addClass('hide');
            var vipURL = $(this).closest('form').attr('action');
            var vipData = $(this).closest('form').serialize();
            progress.show($('.fieldstaff form'));
            jQuery('#msgcontianer').remove();
            $('<div/>').attr('id', 'msgcontianer').html(' ').appendTo(document.body);
            ajax.load({
                url: vipURL,
                data: vipData,
                type: 'POST',
                callback: function callback(vipData) {
                    $('body').find('.vipInsider-dlg .ui-dialog-titlebar-close').trigger('click');
                    var present = $(vipData).find('.exiting_user').length,
                        width = present > 0 ? '316px' : '358px',
                        height = present > 0 ? 'auto' : '184',
                        dlgClass = present > 0 ? 'existinguserdlg' : 'newuserdlg';
                    $('#msgcontianer').find('.regcheck').remove();
                    jQuery('#msgcontianer').append(vipData);
                    jQuery('#msgcontianer').dialog({
                        bgiframe: true,
                        autoOpen: false,
                        modal: true,
                        overlay: {
                            opacity: 0.5,
                            background: 'white'
                        },
                        width: width,
                        height: height,
                        dialogClass: 'vipInsider-dlg ' + dlgClass,
                        resizable: false,
                        open: function open() {}
                    });
                    jQuery('#msgcontianer').dialog('open');
                    $('.vipInsider-dlg.ui-dialog.existinguserdlg button.close, .vipInsider-dlg.ui-dialog.newuserdlg button.close').on('click', function (e) {
                        e.preventDefault();
                        $(this).closest('.ui-dialog').find('.ui-dialog-titlebar-close').trigger('click');
                    });
                }
            });
        });
        $('.vipInsider-dlg.ui-dialog.existinguserdlg button.close, .vipInsider-dlg.ui-dialog.newuserdlg button.close').on('click', function (e) {
            e.preventDefault();
            $(this).closest('.ui-dialog').find('.ui-dialog-titlebar-close').trigger('click');
        });
        $vipinsider.find('.trigger_singleupload input[type="file"]').on('click', function () {
            if ($(this).closest('.vip-uploadform-holder').find('.empty-attachment-error').is(':visible')) {
                $(this).closest('.vip-uploadform-holder').find('.empty-attachment-error').addClass('hide');
            }
        });
        //VIP insider dropdown change
        $('.fieldstaff form').find('.dyn-cat-select select').off('change').on('change', function (e) {
            e.preventDefault();
            var $curObj = $(this);
            var prodid = '';
            if ($(this).closest('.dyn-cat-select').find('.sbHolder').length > 0) {
                var selectedText = $(this).closest('.dyn-cat-select').find('.sbSelector').text();
                prodid = $(this).find('option[label="' + selectedText + '"]').attr('value');
            } else {
                prodid = $(this).find(':selected').val();
            }
            //alert($(this).find(':selected').val());
            var url = Urls.vipInsiderDynamicForms;

            if (prodid == 'field' || prodid == 'sports' || prodid == 'industry' || prodid == 'donation') {
                if (prodid == 'sports') {
                    $('.vip-uploadform-holder').find('span.text-holder-upload').replaceWith('<span class="text-holder-upload">*Upload Business Card or Pay Stub</span>');
                    $('.vip-uploadform-holder').find('.trigger_singleupload .empty-attachment-error').text('Please upload Business card or Pay Stub');
                }
                if (prodid == 'field') {
                    $('.vip-uploadform-holder').find('span.text-holder-upload').replaceWith('<span class="text-holder-upload">*Attach Resume</span>');
                    $('.vip-uploadform-holder').find('.trigger_singleupload .empty-attachment-error').text('Please upload your Resume');
                }
                if (prodid == 'industry') {
                    $('.vip-uploadform-holder').find('span.text-holder-upload').replaceWith('<span class="text-holder-upload">*Upload Business Card</span>');
                    $('.vip-uploadform-holder').find('.trigger_singleupload .empty-attachment-error').text('Please upload a Business Card');
                }
                if (prodid == 'donation') {
                    $('.vip-uploadform-holder').find('span.text-holder-upload').replaceWith('<span class="text-holder-upload">Upload Flyer</span>');
                    //$('.vip-uploadform-holder').find('.trigger_singleupload .empty-attachment-error').text('Please upload a Flyer');
                    //$('.vip-uploadform-holder').find('span.text-holder-upload').closest('form').removeClass('trigger_singleupload');
                }
                $('.vip-uploadform-holder').removeClass('hide');
            } else {
                $('.vip-uploadform-holder').addClass('hide');
            }

            if (prodid != undefined && prodid != null && prodid.length > 0) {
                url = url + '?prodid=' + prodid;
            } else {
                return false;
            }

            progress.show($('.fieldstaff form'));
            ajax.load({
                url: url,
                callback: function callback(data) {
                    if ($('.fieldstaff form .dynamic-content-holder-vip') != undefined && $('.fieldstaff form .dynamic-content-holder-vip').length > 0 && $(data).filter('.vipinsider-onload-data-holder') != undefined && $(data).filter('.vipinsider-onload-data-holder').length > 0) {
                        $('.fieldstaff form .dynamic-content-holder-vip').html($(data).filter('.vipinsider-onload-data-holder').html());
                        $('.trigger_singleupload .pro_id').val(prodid);
                        var dateObj = new Date();
                        dateObj.setTime(dateObj.getTime() + 60 * 60 * 1000);
                        document.cookie = 'progcookie=' + prodid + '; expires=' + dateObj.toUTCString() + '; path=/';
                        progress.hide();
                        if ($(window).width() > 1200) {
                            rapalainsider.customselecteventsb();
                        }
                        rapalainsider.textarearapala();
                        rapalainsider.clearbuttonfunct();
                        rapalainsider.formPrepare({
                            formSelector: '#VipinsiderForm',
                            continueSelector: '#VIPInsider-form-sbmt-id',
                            type: 'opacity'
                        });
                        if ($curObj.closest('.dyn-cat-select').find('.sbHolder').length > 0) {
                            var selectedText = $curObj.closest('.dyn-cat-select').find('.sbSelector').text();
                            prodid = $curObj.find('option[label="' + selectedText + '"]').attr('value');
                        } else {
                            prodid = $curObj.find(':selected').val();
                        }
                        if (prodid != 'Select A Program') {
                            $('.dyn-cat-select').find('.label').removeClass('erroroccured');
                            $('.dyn-cat-select').find('.label span.errorclient.inputlabel').remove();
                            $('.dyn-cat-select').find('.label span').removeClass('inputlabel');
                            $('.dyn-cat-select').find('select').removeClass('errorclient').addClass('valid');
                        }
                        if ($('.filelist').find('ul').length > 0) {
                            $('.filelist').find('ul').css({ 'display': 'none' });
                        }
                    }
                }
            });
        });
    },
    // sub namespace app.ajax.* contains application specific ajax
    // components
    ajax: {
        Success: 'success',
        currentRequests: {}, // request cache

        // ajax request to get json response
        // @param - reqName - String - name of the request
        // @param - async - boolean - asynchronous or not
        // @param - url - String - uri for the request
        // @param - data - name/value pair data request
        // @param - callback - function - callback function to be called
        getJson: function getJson(options) {
            var thisAjax = this;

            // do not bother if the request is already in progress
            // and let go null reqName
            if (!options.reqName || !this.currentRequests[options.reqName]) {
                this.currentRequests[options.reqName] = true;
                if (options.async == 'undefined') {
                    options.async = true;
                }
                // make the server call
                jQuery.ajax({
                    contentType: 'application/json; charset=utf-8',
                    dataType: 'json',
                    url: options.url,
                    cache: true,
                    async: options.async,
                    data: options.data,

                    success: function success(response, textStatus) {
                        thisAjax.currentRequests[options.reqName] = false;

                        if (!response.Success) {
                            // handle failure
                        }

                        options.callback(response, textStatus);
                    },

                    error: function error(request, textStatus) {
                        if (textStatus === 'parsererror') {
                            alert(Resources.BAD_RESPONSE);
                        }

                        options.callback({
                            Success: false,
                            data: {}
                        });
                    }
                });
            }
        },

        // ajax request to load html response in a given container
        // @param - reqName - String - name of the request
        // @param - url - String - uri for the request
        // @param - data - name/value pair data request
        // @param - callback - function - callback function to be called
        // @param - selector - string - id of the container div/span
        // (#mycontainer) - it must start with '#'
        load: function load(options) {

            var thisAjax = this;

            // do not bother if the request is already in progress
            // and let go null reqname
            if (!options.reqName || !this.currentRequests[options.reqName]) {
                this.currentRequests[options.reqName] = true;
                // make the server call
                jQuery.ajax({
                    dataType: 'html',
                    url: options.url,
                    cache: true,
                    data: options.data,

                    success: function success(response, textStatus) {
                        thisAjax.currentRequests[options.reqName] = false;

                        if (options.selector) {
                            jQuery(options.selector).html(response);
                        }

                        if (options.callback != undefined) {
                            options.callback(response, textStatus);
                        }
                    },

                    error: function error(request, textStatus) {
                        if (textStatus === 'parsererror') {
                            alert(Resources.BAD_RESPONSE);
                        }

                        options.callback(null, textStatus);
                    }
                });
            }
        }
    },

    vipinsiderevents: function vipinsiderevents() {
        var $vipinsider = $('.vipinsider-container');
        //vipform = $('.VipinsiderForm');
        $vipinsider.find('.trigger_singleupload input[type="file"]').unbind('change').change(function () {

            var xhr = new XMLHttpRequest(),
                data = new FormData(),
                files = $('#fileid').get(0).files,
                form = $(this).closest('form');
            //if($(this).hasClass('errorclient')){ $(this).trigger('blur'); }
            var totalsize = 0;
            totalsize = $('.vip-uploadform-holder .remove_singleupload span.updatetext').eq(0).attr('value');

            if (this.files[0].size / 1024 / 1024 > 2 || totalsize > 2) {
                $vipinsider.find('.vip-uploadform-holder .file-size-exceed-error').removeClass('hide');
                return false;
            }

            var extension = this.files[0].name.split('.')[1].toLowerCase();
            if (extension != 'jpg' && extension != 'png' && extension != 'PNG' && extension != 'jpeg' && extension != 'pdf' && extension != 'gif' && extension != 'doc' && extension != 'docx' && extension != 'pages') {
                $vipinsider.find('.vip-uploadform-holder .file-format-exceed-error').removeClass('hide');
                return false;
            }

            $vipinsider.find('.vip-uploadform-holder .file-format-exceed-error').addClass('hide');
            $vipinsider.find('.vip-uploadform-holder .file-size-exceed-error').addClass('hide');
            form.find('.progressbar').fadeIn(500);

            for (var i = 0; i < files.length; i++) {
                data.append(files[i].name, files[i]);
            }
            xhr.upload.addEventListener('progress', function (evt) {
                if (evt.lengthComputable) {
                    var progress = Math.round(evt.loaded * 100 / evt.total);
                    form.find('.progressbar .count').text(progress + '% Complete');
                    form.find('.progressbar .progressload').width(progress + '%');
                }
            }, false);
            xhr.open('POST', form.attr('action'));
            xhr.send(data);

            xhr.upload.addEventListener('loadend', function () {
                form.find('#fileid').val('');
                setTimeout(function () {
                    form.find('.progressbar').fadeOut(100, function () {
                        form.find('.progressbar .count').text('0%');
                        form.find('.progressbar .progressload').width('0');
                    });
                }, 500);
            });

            xhr.onload = function () {
                $('.vip-uploadform-holder .filelist').html(xhr.responseText);
                rapalainsider.vipinsiderevents();
            };
        });

        if ($(window).width() <= 767) {
            $('.insider_body.rapala_device [maxlength]').bind('keypress keyup', function () {
                var $this = $(this);
                var val = $this.val();
                var valLength = val.length;
                var maxCount = $this.attr('maxlength');
                if (valLength > maxCount) {
                    $this.val($this.val().substring(0, maxCount));
                }
            });
        }

        $vipinsider.find('.remove').unbind('click').click(function (e) {
            e.preventDefault();
            var filename = $(this).attr('data-file');
            var form = $(this).closest('form');
            var url = form.attr('action');
            var finalURL = util.appendParamToURL(url, 'filename', filename);
            ajax.load({
                url: finalURL,
                type: 'POST',
                callback: function callback(data) {
                    $('.vip-uploadform-holder .filelist').html(data);
                    rapalainsider.vipinsiderevents();
                }
            });
        });
    },

    formPrepare: function formPrepare(opts) {

        var $form, $continue, $requiredInputs, validator;

        var hasEmptyRequired = function hasEmptyRequired() {
            // filter out only the visible fields
            var requiredValues = $requiredInputs.filter(':visible').map(function () {
                return $(this).val();
            });
            return $.inArray('', requiredValues) != -1;
        };

        var validateForm = function validateForm() {
            // only validate form when all required fields are filled to avoid
            // throwing errors on empty form
            if (!hasEmptyRequired() && validator.form()) {
                $continue.removeAttr('disabled').removeClass('button_invisible');
            } else {
                if (opts.type == 'disable') {
                    $continue.attr('disabled', 'disabled');
                } else {
                    $continue.addClass('button_invisible');
                }
            }
        };

        var validateEl = function validateEl() {
            if ($(this).val() === '') {
                if (opts.type == 'disable') {
                    $continue.attr('disabled', 'disabled');
                } else {
                    $continue.addClass('button_invisible');
                }
            } else {
                // enable continue button on last required field that is valid
                // only validate single field
                if (validator.element(this) && !hasEmptyRequired()) {
                    $continue.removeAttr('disabled').removeClass('button_invisible');
                } else {
                    if (opts.type == 'disable') {
                        $continue.attr('disabled', 'disabled');
                    } else {
                        $continue.addClass('button_invisible');
                    }
                }
            }
        };
        //type optional value disable or opacity
        $form = $(opts.formSelector);
        $continue = $(opts.continueSelector);
        validator = $form.validate();
        $requiredInputs = $('.required', $form).filter(':input');
        validateForm();
        // start listening
        $requiredInputs.change(validateEl);
        $requiredInputs.filter('input').blur(validateEl);
    },

    customselecteventsb: function customselecteventsb() {
        if (!$('body').hasClass('rapala_device')) {
            var $con = $('body');
            $con.find('.customized-select').find('select').each(function () {
                if ($(this).attr('disabled')) {
                    $(this).selectbox('disable');
                } else {
                    $(this).selectbox();
                }
                $('.sbOptions li:last').addClass('last');
            }).focus(function () {
                $(this).next('.sbHolder').trigger('focus');
            });
        }
    },

    textarearapala: function textarearapala() {
        $('textarea[maxlength]').each(function () {
            charcount($(this));
            // trigger the keydown event so that any existing character data is calculated
        }).on('keyup keypress', function () {
            charcount($(this));
        });

        function charcount($this) {
            var characterLimit = '1200';
            var charRemains = characterLimit - $this.val().trim().length;
            //var charCountContainer = '';
            var charCountHtml = 'Characters Remaining ' + charRemains;
            if ($this.hasClass('vip-textarea')) {
                if ($this.next('div.char-count').length === 0) {
                    $('<div class="char-count"/>').insertAfter($this);
                }
                $this.next('div.char-count').html(charCountHtml);
            } else {
                if ($this.prev('div.char-count').length === 0) {
                    $('<div class="char-count"/>').insertBefore($this);
                }
                $this.prev('div.char-count').html(charCountHtml);
            }
        }
    },

    clearbuttonfunct: function clearbuttonfunct() {
        if ($('#dialogcontainer123').length > 0) {
            $('#dialogcontainer123').find('.formfield').each(function () {
                if ($(this).find('.field-wrapper .clearbutton').length == 0 && $(this).find('.field-wrapper input[type="text"]').length > 0 || $(this).find('.field-wrapper input[type="password"]').length > 0 || $(this).find('.field-wrapper textarea').length > 0) {
                    $(this).find('.field-wrapper').append('<a class="clearbutton"></a>');
                }
            });
        }
        $('body').find('#dialogcontainer123 .field-wrapper input, textarea').on('keyup input blur', function () {
            if ($(this).val() != undefined) {
                if ($(this).val().length > 0) {
                    $(this).closest('.formfield').find('a.clearbutton').show();
                } else {
                    $(this).closest('.formfield').find('a.clearbutton').hide();
                }
            }
        });

        $('body').find('#dialogcontainer123 .field-wrapper a.clearbutton').on('click', function () {
            var characterLimit = 'Characters Remaining 1200';
            $(this).closest('.formfield').find('input').val('');
            $(this).closest('.formfield').find('textarea').val('');
            $(this).closest('.field-wrapper').find('span').remove();
            $(this).closest('.field-wrapper').find('.required').removeClass('errorclient');
            $(this).closest('.formfield').find('a.clearbutton').hide();
            $(this).closest('.formfield ').find('.form-row').removeClass('inputlabel');
            $(this).closest('.formfield').find('.form-row , .label span').removeClass('inputlabel');
            $(this).closest('.formfield').find('span.logerror , .existing_register').hide();
            $('div.char-count').html(characterLimit);
        });
    }

};
module.exports = rapalainsider;

},{"../ajax":15,"../progress":52,"../tooltip":61,"../uievents":62,"../util":63,"../validator":64}],46:[function(require,module,exports){
'use strict';

var addProductToCart = require('./product/addToCart'),
    ajax = require('../ajax'),
    quickview = require('../quickview'),
    account = require('./account'),
    util = require('../util');

/**
 * @function
 * @description Loads address details to a given address and fills the address form
 * @param {String} addressID The ID of the address to which data will be loaded
 */
function populateForm(addressID, $form) {
    // load address details
    var url = Urls.giftRegAdd + addressID;
    ajax.getJson({
        url: url,
        callback: function callback(data) {
            if (!data || !data.address) {
                window.alert(Resources.REG_ADDR_ERROR);
                return false;
            }
            // fill the form
            $form.find('[name$="_addressid"]').val(data.address.ID);
            $form.find('[name$="_firstname"]').val(data.address.firstName);
            $form.find('[name$="_lastname"]').val(data.address.lastName);
            $form.find('[name$="_address1"]').val(data.address.address1);
            $form.find('[name$="_address2"]').val(data.address.address2);
            $form.find('[name$="_city"]').val(data.address.city);
            $form.find('[name$="_country"]').val(data.address.countryCode).trigger('change');
            $form.find('[name$="_postal"]').val(data.address.postalCode);
            $form.find('[name$="_state"]').val(data.address.stateCode);
            $form.find('[name$="_phone"]').val(data.address.phone);
            // $form.parent('form').validate().form();
        }
    });
}

/**
 * @private
 * @function
 * @description Initializes events for the gift registration
 */
function initializeEvents() {
    var $eventAddressForm = $('form[name$="_giftregistry"]'),
        $beforeAddress = $eventAddressForm.find('fieldset[name="address-before"]'),
        $afterAddress = $eventAddressForm.find('fieldset[name="address-after"]');

    $('.usepreevent').on('click', function () {
        // filter out storefront toolkit
        $(':input', $beforeAddress).not('[id^="ext"]').not('select[name$="_addressBeforeList"]').each(function () {
            var fieldName = $(this).attr('name'),
                $afterField = $afterAddress.find('[name="' + fieldName.replace('Before', 'After') + '"]');
            $afterField.val($(this).val()).trigger('change');
        });
    });

    $eventAddressForm.on('change', 'select[name$="_addressBeforeList"]', function () {
        var addressID = $(this).val();
        if (addressID.length === 0) {
            return;
        }
        populateForm(addressID, $beforeAddress);
    }).on('change', 'select[name$="_addressAfterList"]', function () {
        var addressID = $(this).val();
        if (addressID.length === 0) {
            return;
        }
        populateForm(addressID, $afterAddress);
    });

    $('form[name$="_giftregistry_items"]').on('click', '.item-details a', function (e) {
        e.preventDefault();
        var productListID = $('input[name=productListID]').val();
        quickview.show({
            url: e.target.href,
            source: 'giftregistry',
            productlistid: productListID
        });
    });
}

exports.init = function () {
    initializeEvents();
    addProductToCart();
    //Start JIRA PREV-333 : On click of Forgot Password link navigates to the page instead of overlay.
    account.initCartLogin();
    util.setDeleteConfirmation('.item-list', String.format(Resources.CONFIRM_DELETE, Resources.TITLE_GIFTREGISTRY));
};

},{"../ajax":15,"../quickview":53,"../util":63,"./account":32,"./product/addToCart":42}],47:[function(require,module,exports){
'use strict';

var compareWidget = require('../compare-widget'),
    productTile = require('../product-tile'),
    progress = require('../progress'),
    uievents = require('../uievents'),

//imagesLoaded = require('imagesloaded'),
util = require('../util');

function infiniteScroll() {
    // getting the hidden div, which is the placeholder for the next page
    var loadingPlaceHolder = $('.infinite-scroll-placeholder[data-loading-state="unloaded"]');
    // get url hidden in DOM
    var gridUrl = loadingPlaceHolder.attr('data-grid-url');
    if (loadingPlaceHolder.length === 1 && util.elementInViewport(loadingPlaceHolder.get(0), 250)) {
        // switch state to 'loading'
        // - switches state, so the above selector is only matching once
        // - shows loading indicator
        loadingPlaceHolder.attr('data-loading-state', 'loading');
        loadingPlaceHolder.addClass('infinite-scroll-loading');

        // named wrapper function, which can either be called, if cache is hit, or ajax repsonse is received
        var fillEndlessScrollChunk = function fillEndlessScrollChunk(html) {
            loadingPlaceHolder.removeClass('infinite-scroll-loading');
            loadingPlaceHolder.attr('data-loading-state', 'loaded');
            $('div.search-result-content').append(html);
        };

        // old condition for caching was `'sessionStorage' in window && sessionStorage["scroll-cache_" + gridUrl]`
        // it was removed to temporarily address RAP-2649

        $.ajax({
            type: 'GET',
            dataType: 'html',
            url: gridUrl,
            success: function success(response) {
                // put response into cache
                try {
                    sessionStorage['scroll-cache_' + gridUrl] = response;
                } catch (e) {}
                // nothing to catch in case of out of memory of session storage
                // it will fall back to load via ajax

                // update UI
                fillEndlessScrollChunk(response);
                productTile.init();
            }
        });
    }
}

/**
 * @private
 * @function
 * @description replaces breadcrumbs, lefthand nav and product listing with ajax and puts a loading indicator over the product listing
 */
function updateProductListing(url) {
    if (url == null) {
        return;
    }
    $('#main').addClass('hidecontent');
    progress.show('#main');
    $('#main').load(util.appendParamToURL(url, 'format', 'ajax'), function () {
        searchRefinment.searchRefinementToggle();
        uievents.init();
        compareWidget.init();
        productTile.init();
        owlcarousel();
        /* $('.scrollable').each(function(){
             $(this).slimScroll({
                 size: '10px',
                 height: '200px',
                 railVisible: true,
                 alwaysVisible: true
             });
          });*/

        progress.hide();
        $('#main').removeClass('hidecontent');
        history.pushState(undefined, '', url);
        $('html, body').animate({ scrollTop: 0 }, 'fast');
        if ($('.pt_product-search-result .search-blk').length > 0) {
            $('.pt_product-search-result').find('#primary').addClass('search-result');
        }
        if ($('.refine-display.refine-values .breadcrumb-refinement').length > 0) {
            $('.pt_product-search-result.searchresult').find('#primary').addClass('search-result');
            $('.pt_product-search-result.categorylanding').find('#primary').addClass('search-result');
        } else {
            $('.pt_product-search-result.searchresult').find('#primary').addClass('search-result');
            $('.pt_product-search-result.categorylanding').find('#primary').removeClass('search-result');
        }
        gridSyncheight();
        $('#secondary').removeClass('visible-hidden').addClass('secondary-hide');
    });
}

// updates the grid using the 'post hash' refinement values
function gridSyncheight() {
    $('.tiles-container .product-tile').syncHeight();
}

function updateGrid() {
    if (util.readCookie('selectedOption') && window.location.hash.length == 0 && window.location.href.indexOf('srule=') == -1 && $('.sortitem-blk').is(':visible')) {
        window.location.hash = 'srule=' + util.readCookie('selectedOption');
    }

    if (window.location.hash) {
        var url = window.location.href;
        if (url.indexOf('?') != -1 && url.indexOf('#') != -1) {
            url = url.replace('#', '&');
        } else if (url.indexOf('?') == -1) {
            url = url.replace('#', '?');
        }
        updateProductListing(url);
    }
}

function owlcarousel() {
    setTimeout(function () {
        var owl = $('.owl-carousel');
        owl.owlCarousel({
            items: 5,
            slideBy: 5,
            rewind: false,
            nav: true,
            navRewind: false,
            loop: false,
            dots: true,
            responsive: {
                0: {
                    items: 2,
                    slideBy: 2
                },
                767: {
                    items: 2,
                    slideBy: 2
                },
                768: {
                    items: 5,
                    slideBy: 5
                }
            }
        });

        var viewport = jQuery(window).width();
        //var current = $(this);
        var itemCount = $('.recommendations.cross-sell.Recommended.For.You .owl-carousel .owl-item').length;
        if (viewport >= 768 && itemCount > 5 || viewport < 768 && itemCount > 2) {
            $('.recommendations.cross-sell.Recommended.For.You .pdprecomo-owl').find('.owl-prev, .owl-next').show();
            $('.recommendations.cross-sell.Recommended.For.You .pdprecomo-owl').find('.owl-dots').show();
        } else {
            $('.recommendations.cross-sell.Recommended.For.You .pdprecomo-owl').find('.owl-prev, .owl-next').hide();
            $('.recommendations.cross-sell.Recommended.For.You .pdprecomo-owl').find('.owl-dots').hide();
        }

        //var viewportone = jQuery(window).width();
        //var currentone = $(this);
        var itemCountone = $('.recommendations.cross-sell.Recently.Viewed .owl-carousel .owl-item').length;

        if (viewport >= 768 && itemCountone > 5 || viewport < 768 && itemCountone > 2) {
            $('.recommendations.cross-sell.Recently.Viewed .pdprecomo-owl').find('.owl-prev, .owl-next').show();
            $('.recommendations.cross-sell.Recently.Viewed .pdprecomo-owl').find('.owl-dots').show();
        } else {
            $('.recommendations.cross-sell.Recently.Viewed .pdprecomo-owl').find('.owl-prev, .owl-next').hide();
            $('.recommendations.cross-sell.Recently.Viewed .pdprecomo-owl').find('.owl-dots').hide();
        }
        $('.product-listing').find('h2.hide').removeClass('hide');

        productTile.init();
        $('.pt_product-search-result .recommendations.cross-sell .search-result-items .product-tile.item').last().addClass('recomlast');
    }, 5500);
}

var searchRefinment = {
    searchRefinementToggle: function searchRefinementToggle() {
        //$("#secondary").removeAttr("style");
        $('.js-scrollbar').each(function ($i) {
            //var curObj = $(this);
            //var thresholdValue = $(curObj).closest('.refinement').find('.device-refine').val();
            if ($('.rapala_device').length == 0) {
                if ($(this).closest('.navgroup').hasClass('refinement')) {
                    if ($(this).find('li').length > 8) {
                        $(this).addClass('js-scrollbar-height');
                        $(this).find('.overview').slimScroll({
                            railVisible: true,
                            height: '200px',
                            size: '10px',
                            railColor: 'transparent',
                            color: '#a0a0a0',
                            alwaysVisible: true
                        });
                        //$(this).tinyscrollbar({trackSize : 200});
                    } else {
                        $(this).find('.overview').css('position', 'static');
                    }
                } else {
                    //$(this).tinyscrollbar({trackSize : 200});
                    $(this).find('.overview').slimScroll({
                        railVisible: true,
                        height: '200px',
                        size: '10px',
                        railColor: 'transparent',
                        color: '#a0a0a0',
                        alwaysVisible: true
                    });
                }
            } else {
                /*if($(this).find('li').length > thresholdValue && $(this).find('.seeMoreRefinements').length == 0){
                    if($(this).find('.seeNextRefinements').length == 0 && $(this).find('.seePrevRefinements').length == 0){
                        $(this).append('<a href="#" class="seeNextRefinements">See Next</a>');
                        $(this).append('<a href="#" class="seePrevRefinements">See Previous</a>');
                    }
                    thresholdValue -= 1;
                    $(this).find('li').eq(thresholdValue).nextAll('li').hide();
                    $('.seePrevRefinements').hide();
                }
                else{
                    $(this).find('li').show();
                    $(this).find('.seeNextRefinements').hide();
                }*/
            }

            if ($i == $('.js-scrollbar').length - 1) {
                $('#searchrefinements div.navgroup').each(function (i) {
                    if ($(window).width() < 960) {
                        if ($(this).find('li.selected').length == 0) {
                            $(this).find('div.refineattributes').hide();
                            $(this).find('.filter').addClass('expand');
                            $(this).addClass('collapse-expand');
                        }
                    } else {
                        if (i > 2 && $(this).find('li.selected').length == 0) {
                            $(this).find('div.refineattributes').hide();
                            $(this).find('.filter').addClass('expand');
                            $(this).addClass('collapse-expand');
                        } else if (i < 3) {
                            $(this).find('div.refineattributes').show();
                            $(this).find('.filter').removeClass('expand');
                            $(this).removeClass('collapse-expand');
                        }
                    }
                });
            }
        });

        // init refinement toggling
        $('#searchrefinements .filter').off('click').on('click', function (e) {
            e.preventDefault();
            jQuery(this).toggleClass('expand');
            $(this).closest('.navgroup').toggleClass('collapse-expand');
            jQuery(this).closest('.navgroup').find('div.refineattributes').toggle();
            //jQuery(this).closest('.navgroup').find(".js-scrollbar").tinyscrollbar({trackSize : 200});
        });

        $(window).load(function () {
            $('#secondary').removeClass('visible-hidden').addClass('secondary-hide');
        });
        if ($(window).width() > 959) {
            $('.mobile-filter-by').removeClass('js-filter-active');
            $('#secondary').removeClass('.visible-hidden').removeAttr('style');
        }
    }
};

/**
 * @private
 * @function
 * @description Initializes events for the following elements:<br/>
 * <p>refinement blocks</p>
 * <p>updating grid: refinements, pagination, breadcrumb</p>
 * <p>item click</p>
 * <p>sorting changes</p>
 */
function initializeEvents() {
    updateGrid();
    owlcarousel();
    gridSyncheight();
    productTile.init();
    var $main = $('#main');
    // compare checked
    $main.on('click', 'input[type="checkbox"].compare-check', function () {
        var cb = $(this);
        var tile = cb.closest('.product-tile');

        var func = this.checked ? compareWidget.addProduct : compareWidget.removeProduct;
        var itemImg = tile.find('.product-image a img').first();
        func({
            itemid: tile.data('itemid'),
            uuid: tile[0].id,
            img: itemImg,
            cb: cb
        });
    });

    if ($('.contentAsset-new').find('.html-slot-container').length > 0) {
        var current = $('.contentAsset-new').find('.html-slot-container');
        current.parents('.desktop').removeClass('promohide').addClass('promoshow');
    } else {
        $('.desktop').removeClass('promoshow').addClass('promohide');
    }

    $main.on('click', '.mobile-filter-by', function () {
        if (!$('.mobile-filter-by').hasClass('js-filter-active')) {
            $('.mobile-filter-by').addClass('js-filter-active');
            $('#secondary').show();
            //$("#secondary").css("top",secondaryTop+"px");
        } else {
            $('.mobile-filter-by').removeClass('js-filter-active');
            $('#secondary').hide();
            //$("#secondary").css("top",secondaryTop+"px");
        }
    });
    $('#tabs a').click(function (e) {
        e.preventDefault();
        $(this).prev('input[type="radio"]').prop('checked', true);
        var href = $(this).attr('href');
        window.location = href;
    });

    $main.on('click', '#tabs input[type="radio"]', function () {
        var checked = $(this).prop('checked', true);
        if (checked) {
            $(this).prop('checked', false);
        } else {
            $(this).prop('checked', true);
        }
        $(this).next('a').trigger('click');
        $(this).prop('checked', true);
    });

    //searchcontent-section
    $main.on('click', '.mobile-filter-by.results-content', function () {
        if (!$('.mobile-filter-by.results-content').hasClass('js-filter-active')) {
            $('.mobile-filter-by.results-content').addClass('js-filter-active');
            $('#secondary.searchResult-refinement').show();
            //$("#secondary").css("top",secondaryTop+"px");
        } else {
            $('.mobile-filter-by.results-content').removeClass('js-filter-active');
            $('#secondary.searchResult-refinement').hide();
            //$("#secondary").css("top",secondaryTop+"px");
        }
    });

    if ($('.pt_product-search-result .search-blk').length > 0) {
        $('.pt_product-search-result').find('#primary').addClass('search-result');
    }

    if ($('.pt_content-search-result .folder-content-list').length > 0) {
        $('.pt_content-search-result').find('#tabs #producttab').prop('checked', false);
        $('.pt_content-search-result').find('#tabs #contenttab').prop('checked', true);
    }

    $main.on('click', '.sortby-button', function () {
        if ($(window).width() >= 481 && $(window).width() <= 959) {
            if (!$('.sortby-button').hasClass('js-sort-active')) {
                $('.sortby-button').addClass('js-sort-active');
                $('.search-result-options').addClass('show-sort');
                $('.mobile-sort-by-content').show();
            } else {
                $('.sortby-button').removeClass('js-sort-active');
                $('.search-result-options').removeClass('show-sort');
                $('.mobile-sort-by-content').hide();
            }
        }
    });

    searchRefinment.searchRefinementToggle();

    /*$(window).resize(function(){
    searchRefinment.searchRefinementToggle();
    });*/

    /* $('.scrollable').each(function(){
    	$(this).slimScroll({
            size: '10px',
            height: '200px',
            railVisible: true,
            alwaysVisible: true
        });
     });*/
    // handle toggle refinement blocks
    /* $main.on('click', '.refinement h3', function () {
          if( !$(this).hasClass('expand') ){
              $(this).addClass('expand').closest('.navgroup').addClass('collapse-expand').find('.sub-refinement').hide();
           }else {
              $(this).removeClass('expand').closest('.navgroup').removeClass('collapse-expand').find('.sub-refinement').show();
          }
     });*/

    // color swatches events //
    $main.on('click', '.product-swatches .product-swatches-all', function () {
        if ($(this).hasClass('loaded')) {
            $(this).next('.swatch-list.swatch-toggle').show();
            return false;
        }
        $(this).addClass('loaded');
        var cont = $(this).parent().find('ul.swatch-list.swatch-toggle');
        cont.show().focus();
        $(this).parent().find('ul.swatch-toggle li > a').each(function () {
            if ($(this).data('href')) {
                $(this).find('img').attr('src', $(this).data('href'));
            }
        });
        cont.show().focus();
    });
    // prepare swatch palettes and thumbnails
    // show the palette

    // hide the palette
    $('#content div.product-swatches div.swatch-image').mouseout(function (e) {
        // fix for event bubbling (http://www.quirksmode.org/js/events_mouse.html)
        if (!e) {
            e = window.event;
        }
        var tg = window.event ? e.srcElement : e.target;
        if (tg.nodeName != 'DIV') {
            return;
        }
        var reltg = e.relatedTarget ? e.relatedTarget : e.toElement;
        while (reltg != tg && reltg.nodeName != 'BODY') {
            reltg = reltg.parentNode;
        }
        if (reltg == tg) {
            return;
        }

        // mouseout took place when mouse actually left layer
        // handle event now
        $(this).hide();
        return false;
    });

    $('.swatch-list.swatch-toggle').mouseleave(function () {
        $('.swatch-list.swatch-toggle').hide();
    });

    jQuery('#content .producttile div.swatches div.invisible').hide();
    jQuery('#content .producttile div.swatches a.swatch img.hiddenthumbnail').hide();

    $('#content.product-swatches .product-swatches-all.loaded').click(function () {
        //var swatch = jQuery(this);
        updateProductListing(this.href);
        // omit following the swatch link
        return false;
    });

    $('body').mouseleave(function () {
        if ($(window).width() > 960) {
            $('.swatch-list.swatch-toggle').hide();
        }
    });
    $('body').bind('blur', function () {
        $('.swatch-list.swatch-toggle').hide();
    });

    // handle events for updating grid
    $main.on('click', '.refinement a, .sorthitscontainer .pagination a, .breadcrumb-refinement-value a, .mobile-sort-by-content a', function (e) {
        // don't intercept for category and folder refinements, as well as unselectable
        if ($(this).parents('.category-refinement').length > 0 || $(this).parents('.folder-refinement').length > 0 || $(this).parent().hasClass('unselectable')) {
            return;
        }
        e.preventDefault();
        var query = util.getQueryString(this.href);
        window.location.hash = query;
        if (this.href === window.location.href) {
            return;
        }
        updateProductListing(this.href);
    });

    $('.productlisting.sub-cat').each(function () {
        $(this).find('.product.producttile.cell').first().addClass('subfirst');
    });

    // handle events item click. append params.
    $main.on('click', '.product-tile a:not("#quickviewbutton")', function () {
        var a = $(this);
        // get current page refinement values
        var wl = window.location;

        var qsParams = wl.search.length > 1 ? util.getQueryStringParams(wl.search.substr(1)) : {};
        var hashParams = wl.hash.length > 1 ? util.getQueryStringParams(wl.hash.substr(1)) : {};

        // merge hash params with querystring params
        var params = $.extend(hashParams, qsParams);
        if (!params.start) {
            params.start = 0;
        }
        // get the index of the selected item and save as start parameter
        var tile = a.closest('.product-tile');
        var idx = tile.data('idx') ? +tile.data('idx') : 0;

        /*Start JIRA PREV-50 : Next and Previous links will not be displayed on PDP if user navigate from Quick View.Added cgid to hash*/
        if (!params.cgid && tile.data('cgid') !== null && tile.data('cgid') !== '') {
            params.cgid = tile.data('cgid');
        }
        /*End JIRA PREV-50*/

        // convert params.start to integer and add index
        params.start = +params.start + (idx + 1);
        // set the hash and allow normal action to continue
        a[0].hash = $.param(params);
    });

    // handle sorting change
    $main.on('change', '.sort-by select', function (e) {
        var selectedOption = $('.sort-by option:selected').val().split('?')[1].split('&');
        //var url = $(this).val();
        var selectedOptionval = '';
        $.each(selectedOption, function (i, v) {
            if (v.indexOf('srule') != -1) {
                selectedOptionval = v.split('=')[1];
            }
        });

        if (selectedOptionval.length != 0) {
            var dateObj = new Date();
            dateObj.setTime(dateObj.getTime() + 60 * 60 * 1000);
            document.cookie = 'selectedOption=' + selectedOptionval + '; expires=' + dateObj.toUTCString() + '; path=/';
            /*
            var sortRule = url.split('?')[1].split('&');
            var sortType = '';
             $.each(sortRule, function (i, v) {
                if (v.indexOf('srule') != -1) {
                    sortType = v.split('=')[1];
                }
            });
            */
        }
        e.preventDefault();
        var query = util.getQueryString($(this).find('option:selected').val());
        window.location.hash = query;
        if ($(this).find('option:selected').val() === window.location.href) {
            return;
        }
        updateProductListing($(this).find('option:selected').val());
    }).on('change', '.items-per-page select', function () {
        var refineUrl = $(this).find('option:selected').val();
        if (refineUrl === 'INFINITE_SCROLL') {
            $('html').addClass('infinite-scroll').removeClass('disable-infinite-scroll');
        } else {
            $('html').addClass('disable-infinite-scroll').removeClass('infinite-scroll');
            var query = util.getQueryString(refineUrl);
            window.location.hash = query;
            if (refineUrl === window.location.href) {
                return;
            }
            updateProductListing(refineUrl);
        }
    });
}

exports.init = function () {
    compareWidget.init();
    if (SitePreferences.LISTING_INFINITE_SCROLL) {
        $(window).on('scroll', infiniteScroll);
    }
    productTile.init();
    initializeEvents();
};

},{"../compare-widget":20,"../product-tile":51,"../progress":52,"../uievents":62,"../util":63}],48:[function(require,module,exports){
'use strict';

exports.init = function () {
    var owl = $('.owl-carousel');
    owl.owlCarousel({
        items: 1,
        loop: true,
        dots: true,
        autoplay: true,
        autoplayTimeout: 7000,
        autoplayHoverPause: true,
        animateOut: 'fadeOut',
        responsive: {
            0: {
                items: 1
            },
            600: {
                items: 1
            },
            1000: {
                items: 1
            }
        }
    });
};

},{}],49:[function(require,module,exports){
'use strict';

var storeLocator = require('../store-locator');

exports.init = function () {
    var locator = window.Scripts.storeLocator,
        options = locator.vars,
        marker = options.markerurl;

    if ($('#storedetails-wrapper').length > 0) {
        marker = options.markerdetailurl;
    }

    storeLocator.init(options.zoomradius, options.storeurl, marker, options.queryurl, options.cookieurl, options.cookiename, options.defaultlocation, options.maptype);
};

},{"../store-locator":56}],50:[function(require,module,exports){
'use strict';

var page = require('../page'),
    account = require('./account'),
    util = require('../util');

exports.init = function () {
    //Start JIRA PREV-412 : SG Issue: Password reset overlay displayed as a page
    account.initCartLogin();
    $('#editAddress').on('change', function () {
        page.redirect(util.appendParamToURL(Urls.wishlistAddress, 'AddressID', $(this).val()));
    });

    //add js logic to remove the , from the qty feild to pass regex expression on client side
    $('.option-quantity-desired input').on('focusout', function () {
        $(this).val($(this).val().replace(',', ''));
    });
};

},{"../page":31,"../util":63,"./account":32}],51:[function(require,module,exports){
'use strict';

var imagesLoaded = require('imagesloaded'),
    util = require('./util'),
    quickview = require('./quickview');

function initQuickViewButtons() {
    $('.product-tile .product-image').on('mouseenter', function () {
        var $qvButton = $('#quickviewbutton');
        if ($qvButton.length === 0) {
            $qvButton = $('<a id="quickviewbutton" class="quickview">' + Resources.QUICK_VIEW + '<i class="fa fa-arrows-alt"></i></a>');
        }
        var $link = $(this).find('.thumb-link');
        $qvButton.attr({
            'href': $link.attr('href'),
            'title': $link.attr('title')
        }).appendTo(this);
        $qvButton.off('click').on('click', function (e) {
            e.preventDefault();
            quickview.show({
                url: $(this).attr('href').split('#')[0], //PREV JIRA PREV-255 :PLP: On Click Quick view navigating to a wrong page when user first changes the swatches. Taking only href.
                source: 'quickview'
            });
        });
    });
}

function gridViewToggle() {
    var CookieImageValue = util.readCookie('ImageSize');
    //This is used to persist the ImageSizes overall site.
    if (CookieImageValue != null) {
        if (CookieImageValue == 'listview') {
            jQuery('.search-result-content').addClass('wide-tiles');
            jQuery('.product-image').addClass('grid');
            $('.toggle-grid i').removeClass('active');
            $('.toggle-grid .listview').addClass('active');
            $('.search-result-content.wide-tiles .product-tile .product-image img').each(function () {
                this.src = this.src.replace('sw=130&sh=92', 'sw=352&sh=251');
            });
            $('.product-img').each(function () {
                $(this).find('img').remove();
                $(this).append('<img src="' + $(this).attr('data-large-src') + '" title="' + $(this).attr('data-title') + '" alt="' + $(this).attr('data-alt') + '"></img>');
            });
        } else {
            jQuery('.search-result-content').removeClass('wide-tiles');
            jQuery('.product-image').removeClass('grid');
            $('.toggle-grid i').removeClass('active');
            $('.toggle-grid .gridview').addClass('active');
            $('.search-result-content.wide-tiles .product-tile .product-image img').each(function () {
                this.src = this.src.replace('sw=130&sh=92', 'sw=130&sh=92');
            });
            $('.product-img').each(function () {
                $(this).find('img').remove();
                $(this).append('<img src="' + $(this).attr('data-small-src') + '" title="' + $(this).attr('data-title') + '" alt="' + $(this).attr('data-alt') + '"></img>');
            });
        }

        if ($('.listview.active').length == 1) {
            $('.pt_product-search-result').attr('data-viewType', 'listview');
        } else {
            $('.pt_product-search-result').attr('data-viewType', 'gridview');
        }
    }

    $('.toggle-grid i').on('click', function () {
        var dateObj = new Date();
        dateObj.setTime(dateObj.getTime() + 60 * 60 * 1000);
        if ($(this).hasClass('gridview')) {
            document.cookie = 'ImageSize=' + 'gridview' + '; expires=' + dateObj.toUTCString() + '; path=/';
            $('.toggle-grid i').parent('.toggle-grid').removeClass('wide');
            $('.toggle-grid i').removeClass('active');
            $(this).parent('.toggle-grid').removeClass('wide');
            $(this).addClass('active');
            $('.search-result-content').removeClass('wide-tiles');
            $('.product-img').each(function () {
                $(this).find('img').remove();
                $(this).append('<img src="' + $(this).attr('data-large-src') + '" title="' + $(this).attr('data-title') + '" alt="' + $(this).attr('data-alt') + '"></img>');
            });
        } else if ($(this).hasClass('listview')) {
            document.cookie = 'ImageSize=' + 'listview' + '; expires=' + dateObj.toUTCString() + '; path=/';
            $('.toggle-grid i').parent('.toggle-grid').removeClass('wide');
            $('.toggle-grid i').removeClass('active');
            $(this).parent('.toggle-grid').addClass('wide');
            $(this).addClass('active');
            $('.search-result-content').addClass('wide-tiles');
            $('.search-result-content.wide-tiles .product-tile .product-image img').each(function () {
                this.src = this.src.replace('sw=130&sh=92', 'sw=352&sh=251');
            });
            $('.product-img').each(function () {
                $(this).find('img').remove();
                $(this).append('<img src="' + $(this).attr('data-small-src') + '" title="' + $(this).attr('data-title') + '" alt="' + $(this).attr('data-alt') + '"></img>');
            });
        }
        var currObj = $(this);
        jQuery('.toggle-grid .fa').removeClass('active');
        $(currObj).addClass('active');
        if ($('.large.active').length == 1) {
            $('.pt_product-search-result').attr('data-viewType', 'listview');
        } else {
            $('.pt_product-search-result').attr('data-viewType', 'gridview');
        }
    });
}

/**
 * @private
 * @function
 * @description Initializes events on the product-tile for the following elements:
 * - swatches
 * - thumbnails
 */
function initializeEvents() {
    initQuickViewButtons();
    gridViewToggle();
    $('.swatch-list').on('mouseleave', function () {
        // Restore current thumb image
        var $tile = $(this).closest('.product-tile'),
            $thumb = $tile.find('.product-image .thumb-link img').eq(0),
            data = $thumb.data('current');
        $thumb.attr({
            src: data.src,
            alt: data.alt,
            title: data.title
        });
        $('.search-result-content.wide-tiles .product-tile .product-image a.thumb-link.currentimg img').each(function () {
            this.src = this.src.replace('sw=130&sh=92', 'sw=352&sh=251');
        });
    });
    $('.swatch-list .swatch').on('click', function (e) {
        e.preventDefault();
        if ($(this).hasClass('selected')) {
            return;
        }

        var $tile = $(this).closest('.product-tile');
        $(this).closest('.swatch-list').find('.swatch.selected').removeClass('selected');
        $(this).addClass('selected');
        $tile.find('.thumb-link').attr('href', $(this).attr('href'));
        $tile.find('name-link').attr('href', $(this).attr('href'));

        var data = $(this).children('img').filter(':first').data('thumb');
        var $thumb = $tile.find('.product-image .thumb-link img').eq(0);
        var currentAttrs = {
            src: data.src,
            alt: data.alt,
            title: data.title
        };
        $thumb.closest('.thumb-link').addClass('currentimg');
        $thumb.attr(currentAttrs);
        $thumb.data('current', currentAttrs);

        /*Start JIRA PREV-466 : Product images are not updating in the compare section when the color swatches are changed in PLP.*/
        var pid = $(this).closest('.product-tile').attr('data-itemid');
        $('.compare-items-panel .compare-item').each(function () {
            var compareid = $(this).attr('data-itemid');
            if (pid === compareid) {
                var $compare = $(this).find('.compare-item-image').eq(0);
                $compare.attr(currentAttrs);
                $compare.data('current', currentAttrs);
            }
        });
        /*End JIRA PREV-466*/
    }).bind('mouseenter click', function () {
        // get current thumb details
        var $tile = $(this).closest('.product-tile'),
            $thumb = $tile.find('.product-image .thumb-link img').eq(0),
            data = $(this).children('img').filter(':first').data('thumb'),
            current = $thumb.data('current');

        // If this is the first time, then record the current img
        if (!current) {
            $thumb.data('current', {
                src: $thumb[0].src,
                alt: $thumb[0].alt,
                title: $thumb[0].title
            });
        }

        // Set the tile image to the values provided on the swatch data attributes
        $thumb.attr({
            src: data.src,
            alt: data.alt,
            title: data.title
        });
        $('.search-result-content.wide-tiles .product-tile .product-image a.thumb-link.currentimg img').each(function () {
            this.src = this.src.replace('sw=130&sh=92', 'sw=352&sh=251');
        });
    });
}

exports.init = function () {
    var $tiles = $('.tiles-container .product-tile');
    if ($tiles.length === 0) {
        return;
    }
    imagesLoaded('.tiles-container').on('done', function () {
        $tiles.syncHeight().each(function (idx) {
            $(this).data('idx', idx);
        });
    });
    initializeEvents();
};

},{"./quickview":53,"./util":63,"imagesloaded":4}],52:[function(require,module,exports){
'use strict';

var $loader;

/**
 * @function
 * @description Shows an AJAX-loader on top of a given container
 * @param {Element} container The Element on top of which the AJAX-Loader will be shown
 */
var show = function show(container) {
    var target = !container || $(container).length === 0 ? $('body') : $(container);
    $loader = $loader || $('.loader');

    if ($loader.length === 0) {
        $loader = $('<div/>').addClass('loader').append($('<div/>').addClass('loader-indicator'), $('<div/>').addClass('loader-bg'));
    }
    return $loader.appendTo(target).show();
};
/**
 * @function
 * @description Hides an AJAX-loader
 */
var hide = function hide() {
    if ($loader) {
        $loader.hide();
    }
};

exports.show = show;
exports.hide = hide;

},{}],53:[function(require,module,exports){
'use strict';

var dialog = require('./dialog'),
    product = require('./pages/product'),
    progress = require('./progress'),
    util = require('./util'),
    _ = require('lodash');

var makeUrl = function makeUrl(url, source, productListID) {
    if (source) {
        url = util.appendParamToURL(url, 'source', source);
    }
    if (productListID) {
        url = util.appendParamToURL(url, 'productlistid', productListID);
    }
    return url;
};

var removeParam = function removeParam(url) {
    if (url.indexOf('?') !== -1) {
        return url.substring(0, url.indexOf('?'));
    } else {
        return url;
    }
};

var quickview = {
    init: function init() {
        if (!this.exists()) {
            this.$container = $('<div/>').attr('id', 'QuickViewDialog').appendTo(document.body);
        }
        this.productLinks = $('#search-result-items .thumb-link').map(function (index, thumbLink) {
            return $(thumbLink).attr('href');
        });
    },

    setup: function setup(qvUrl) {
        var $btnNext = $('.quickview-next'),
            $btnPrev = $('.quickview-prev');

        product.init();

        this.productLinkIndex = _(this.productLinks).findIndex(function (url) {
            return removeParam(url) === removeParam(qvUrl);
        });

        // hide the buttons on the compare page or when there are no other products
        if (this.productLinks.length <= 1 || $('.compareremovecell').length > 0) {
            $btnNext.hide();
            $btnPrev.hide();
            return;
        } else {
            /*  Start JIRA PREV-50: Next and Previous links will not be displayed on PDP if user navigate from Quick View.
              Added current URL parameters and index to viewfulldetails link
            */
            var a = $('#view-full-details');
            var wl = window.location;
            var qsParams = wl.search.length > 1 ? util.getQueryStringParams(wl.search.substr(1)) : {};
            var hashParams = wl.hash.length > 1 ? util.getQueryStringParams(wl.hash.substr(1)) : {};
            var params = $.extend(hashParams, qsParams);
            params.start = parseInt(this.productLinkIndex, 10) + 1;
            var tile = $('#search-result-items .product-tile').first();
            if (!params.cgid && tile.data('cgid') !== null && tile.data('cgid') !== '') {
                params.cgid = tile.data('cgid');
            }
            a.attr('href', a.attr('href') + '#' + $.param(params));
            /*End JIRA PREV-50*/
        }

        if (this.productLinkIndex === this.productLinks.length - 1) {
            $btnNext.attr('disabled', 'disabled');
        }
        if (this.productLinkIndex === 0) {
            $btnPrev.attr('disabled', 'disabled');
        }

        $btnNext.on('click', function (e) {
            e.preventDefault();
            this.navigateQuickview(1);
        }.bind(this));
        $btnPrev.on('click', function (e) {
            e.preventDefault();
            this.navigateQuickview(-1);
        }.bind(this));
    },

    /**
     * @param {Number} step - How many products away from current product to navigate to. Negative number means navigate backward
     */
    navigateQuickview: function navigateQuickview(step) {
        // default step to 0
        this.productLinkIndex += step ? step : 0;
        var url = makeUrl(this.productLinks[this.productLinkIndex], 'quickview');
        dialog.replace({
            url: url,
            callback: this.setup.bind(this, url)
        });
    },

    /**
     * @description show quick view dialog
     * @param {Object} options
     * @param {String} options.url - url of the product details
     * @param {String} options.source - source of the dialog to be appended to URL
     * @param {String} options.productlistid - to be appended to URL
     * @param {Function} options.callback - callback once the dialog is opened
     */
    show: function show(options) {
        var url;
        if (!this.exists()) {
            this.init();
        }
        url = makeUrl(options.url, options.source, options.productlistid);
        $('#QuickViewDialog').empty();
        var quickViewDialog = dialog.create({
            target: this.$container,
            options: {
                height: 530,
                width: 760,
                dialogClass: 'quickview',
                title: Resources.QUICK_VIEW_POPUP
            }
        });
        quickViewDialog.dialog('open');
        progress.show('#QuickViewDialog');
        $.ajax({
            url: url,
            success: function success(data) {
                $(quickViewDialog).append(data);
                product.init();
                progress.hide();
            }
        });
        //PREVAIL-Added for GA integration
        //GAcommented
        if (isEventTrackingEnabled && isGoogleAnalyticsEnabled) {
            googleAnalyticsEvents.quickView();
        }
    },
    exists: function exists() {
        return this.$container && this.$container.length > 0;
    },
    close: function close() {
        jQuery('#QuickViewDialog').dialog('close');
    }
};

module.exports = quickview;

},{"./dialog":23,"./pages/product":43,"./progress":52,"./util":63,"lodash":5}],54:[function(require,module,exports){
'use strict';

/**
 * @private
 * @function
 * @description Binds event to the place holder (.blur)
 */

function initializeEvents() {
    /* Start JIRA PREV-53:No search result page: When the search text field is
      empty,on clicking of "GO" button user is navigating to Home page.
      Replaced #q with 'input[name=q]'*/
    $('input[name=q]').focus(function () {
        var input = $(this);
        if (input.val() === input.attr('value')) {
            input.val('');
        }
    }).blur(function () {
        var input = $(this);
        /* Start JIRA PREV-53:No search result page: When the search text field is empty,on clicking of "GO"
             button user is navigating to Home page.Added $.trim(input.val()) === ""*/
        if ($.trim(input.val()) === '' || input.val() === '' || input.val() === input.attr('value')) {
            input.val(input.attr('value'));
        }
    }).blur();

    /* Start JIRA-PREV-54:General Error page: When the new search field empty, on clicking of "GO" user is navigating to Home page.
         Added condition for disabling search button in header and No search results page and error pages.
         Start JIRA-PREV-53:No search result page: When the search text field is empty,on clicking of "GO" button user is navigating to Home page.*/
    $('input[name=q]').closest('form').submit(function (e) {
        var input = $(this).find('input[name=q]');
        if ($.trim(input.val()) === input.attr('value') || $.trim(input.val()) === '') {
            e.preventDefault();
            return false;
        }
    });

    if ($('.pt_product-search-noresult .nohits .noresult-banner').length > 0) {
        $('.pt_product-search-noresult .nohits').css('height', 'auto');
    }
    /*End JIRA PREV-53,PREV-54 */
}

exports.init = initializeEvents;

},{}],55:[function(require,module,exports){
'use strict';

var util = require('./util');

var currentQuery = null,
    lastQuery = null,
    runningQuery = null,
    listTotal = -1,
    listCurrent = -1,
    delay = 30,
    $resultsContainer;

/**
 * @function
 * @description Handles keyboard's arrow keys
 * @param keyCode Code of an arrow key to be handled
 */
function handleArrowKeys(keyCode) {
    switch (keyCode) {
        case 38:
            // keyUp
            listCurrent = listCurrent <= 0 ? listTotal - 1 : listCurrent - 1;
            break;
        case 40:
            // keyDown
            listCurrent = listCurrent >= listTotal - 1 ? 0 : listCurrent + 1;
            break;
        default:
            // reset
            listCurrent = -1;
            return false;
    }

    $resultsContainer.children().removeClass('selected').eq(listCurrent).addClass('selected');
    $('input[name="q"]').val($resultsContainer.find('.selected .suggestionterm').first().text());
    return true;
}

var searchsuggest = {
    /**
     * @function
     * @description Configures parameters and required object instances
     */
    init: function init(container, defaultValue) {
        var $searchContainer = $(container);
        var $searchForm = $searchContainer.find('form[name="simpleSearch"]');
        var $searchField = $searchForm.find('input[name="q"]');

        // disable browser auto complete
        $searchField.attr('autocomplete', 'off');

        // on focus listener (clear default value)
        $searchField.focus(function () {
            if (!$resultsContainer) {
                // create results container if needed
                //$resultsContainer = $('<div/>').attr('id', 'search-suggestions').appendTo($searchContainer);
                $resultsContainer = $('<div/>').attr('class', 'suggestions').attr('id', 'suggestions').appendTo($searchContainer);
            }
            if ($searchField.val() === defaultValue) {
                $searchField.val('');
            }
        });
        $searchField.blur(function () {
            var temp = $searchField.val();
            if ($.trim(temp) == '') {
                $searchField.val('Search Entire Site...');
            }
        });
        $(document).on('click', function (e) {
            if (!$searchContainer.is(e.target)) {
                setTimeout(this.clearResults, 200);
            }
        }.bind(this));
        // on submit we do not submit the form, but change the window location
        // in order to avoid https to http warnings in the browser
        // only if it's not the default value and it's not empty
        $searchForm.submit(function () {
            var searchUrl = $searchForm.attr('action');
            var sessionId = jQuery('#footerhiddenid').text();
            var k = '';
            if (sessionId == 'rapala') {
                k = searchUrl + '?id=1';
            } else if (sessionId == 'sufix') {
                k = searchUrl + '?id=2';
            } else if (sessionId == 'triggerx') {
                k = searchUrl + '?id=3';
            } else if (sessionId == 'storm') {
                k = searchUrl + '?id=4';
            } else if (sessionId == 'luhrjensen') {
                k = searchUrl + '?id=5';
            } else if (sessionId == 'vmc') {
                k = searchUrl + '?id=6';
            } else if (sessionId == 'terminator') {
                k = searchUrl + '?id=7';
            } else if (sessionId == 'bluefox') {
                k = searchUrl + '?id=8';
            } else if (sessionId == 'williamson') {
                k = searchUrl + '?id=9';
            } else if (sessionId == 'marcum') {
                k = searchUrl + '?id=10';
            } else if (sessionId == 'strikemaster') {
                k = searchUrl + '?id=11';
            } else if (sessionId == 'otter') {
                k = searchUrl + '?id=21';
            }
            var searchTerm = $searchField.val();
            if (searchTerm != defaultValue && searchTerm != '') {
                window.location = util.appendParamToURL(k, 'q', searchTerm).replace('https', 'http');
            }
            return false;
        });
        // on key up listener
        $searchField.keyup(function (e) {

            // get keyCode (window.event is for IE)
            var keyCode = e.keyCode || window.event.keyCode;

            // check and treat up and down arrows
            if (handleArrowKeys(keyCode)) {
                return;
            }
            // check for an ENTER or ESC
            if (keyCode === 13 || keyCode === 27) {
                this.clearResults();
                return;
            }

            currentQuery = $searchField.val().trim();

            // no query currently running, init an update
            if (!runningQuery) {
                runningQuery = currentQuery;
                setTimeout(this.suggest.bind(this), delay);
            }
        }.bind(this));
    },

    /**
     * @function
     * @description trigger suggest action
     */
    suggest: function suggest() {
        // check whether query to execute (runningQuery) is still up to date and had not changed in the meanwhile
        // (we had a little delay)
        if (runningQuery !== currentQuery) {
            // update running query to the most recent search phrase
            runningQuery = currentQuery;
        }

        // if it's empty clear the results box and return
        if (runningQuery.length === 0) {
            this.clearResults();
            runningQuery = null;
            return;
        }

        // if the current search phrase is the same as for the last suggestion call, just return
        if (lastQuery === runningQuery) {
            runningQuery = null;
            return;
        }

        // build the request url
        var reqUrl = util.appendParamToURL(Urls.searchsuggest, 'q', runningQuery);

        // execute server call
        $.get(reqUrl, function (data) {
            var suggestionHTML = data,
                ansLength = suggestionHTML.trim().length;

            // if there are results populate the results div
            if (ansLength === 0) {
                this.clearResults();
            } else {
                // update the results div
                $resultsContainer.html(suggestionHTML).fadeIn(200);
            }

            // record the query that has been executed
            lastQuery = runningQuery;
            // reset currently running query
            runningQuery = null;

            // check for another required update (if current search phrase is different from just executed call)
            if (currentQuery !== lastQuery) {
                // ... and execute immediately if search has changed while this server call was in transit
                runningQuery = currentQuery;
                setTimeout(this.suggest.bind(this), delay);
            }
            this.hideLeftPanel();
        }.bind(this));
    },
    /**
     * @function
     * @description
     */
    clearResults: function clearResults() {
        if (!$resultsContainer) {
            return;
        }
        $resultsContainer.fadeOut(200, function () {
            $resultsContainer.empty();
        });
    },
    /**
     * @function
     * @description
     */
    hideLeftPanel: function hideLeftPanel() {
        //hide left panel if there is only a matching suggested custom phrase
        if ($('.search-suggestion-left-panel-hit').length === 1 && $('.search-phrase-suggestion a').text().replace(/(^[\s]+|[\s]+$)/g, '').toUpperCase() === $('.search-suggestion-left-panel-hit a').text().toUpperCase()) {
            $('.search-suggestion-left-panel').css('display', 'none');
            $('.search-suggestion-wrapper-full').addClass('search-suggestion-wrapper');
            $('.search-suggestion-wrapper').removeClass('search-suggestion-wrapper-full');
        }
    }
};

module.exports = searchsuggest;

},{"./util":63}],56:[function(require,module,exports){
/*
 * All java script logic for google driven store locator.
 *
 * The code relies on the jQuery JS library to
 * be also loaded.
 *
 */

'use strict';
/*global google */
/*eslint block-scoped-var: 0 */

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var MarkerWithLabel = require('./marker-with-label');

var StoreLocator = {
    // configuration parameters and required object instances
    initialLocation: null,
    browserSupportFlag: false,
    storeurl: null,
    markerurl: null,
    queryurl: null,
    cookieurl: null,
    cookiename: null,
    defaultlocation: null,
    zoomradius: {},
    markers: [],
    infowindows: [],
    radius: 50,
    map: null,
    unit: 'mi',
    timer: null,
    maptype: null,
    LatLngList: [],
    isDetails: $('.pt_store-locator-details').length ? true : false,

    /*********************************************************
    * initialize the google map
    * @param - zoomradius : json object with radius settings for each google zoom level (0-20)
    * @param - storeurl : url for displaying store details
    * @param - markerurl : url for marker image
    * @param - queryurl : url for querying nearest stores
    * @param - cookieurl : url for setting preferred location cookie
    * @param - cookiename : name for preferred location cookie
    * @param - defaultlocation : default address for map if users geolocation can not be detected
    * @param - maptype : type of google map to display
    **********************************************************/

    init: function init(zoomradius, storeurl, markerurl, queryurl, cookieurl, cookiename, defaultlocation, maptype) {

        this.zoomradius = zoomradius;
        this.storeurl = storeurl;
        this.markerurl = markerurl;
        this.queryurl = queryurl;
        this.cookieurl = cookieurl;
        this.cookiename = cookiename;
        this.defaultlocation = defaultlocation;
        this.maptype = maptype;

        // Define the options for the Google Maps object
        var myOptions = {
            zoom: 7,
            mapTypeId: google.maps.MapTypeId[maptype],
            disableDefaultUI: true,
            scrollwheel: false,
            zoomControl: true
        },
            self = this;

        // Create a new Google Maps object with the given options
        this.map = new google.maps.Map(document.getElementById('map-canvas'), myOptions);

        // Render Store Detail
        if ($('#storedetails-wrapper').size() > 0) {
            StoreLocator.getSearchPosition('onestore');
            // Check for cookie preference
        } else if (this.getCookieLatLng()) {
            this.initialLocation = this.getCookieLatLng();
            this.map.setCenter(this.initialLocation);
            // Try Demandware Geolocation
        } else if (window.User.geolocation) {
            this.initialLocation = new google.maps.LatLng(window.User.geolocation.latitude, window.User.geolocation.longitude);
            this.renderStores(window.User.geolocation.latitude, window.User.geolocation.longitude, $('#country').val(), $('#distanceunitpref').val(), 50, false, true);
            // Try W3C Geolocation (preferred for detection)
        } else if (google.loader.ClientLocation) {
            this.initialLocation = new google.maps.LatLng(google.loader.ClientLocation.latitude, google.loader.ClientLocation.longitude);
            this.map.setCenter(this.initialLocation);
            // Try Google Gears Geolocation
        } else if (google.gears) {
            this.browserSupportFlag = true;
            var geo = google.gears.factory.create('beta.geolocation');
            geo.getCurrentPosition(function (position) {
                this.initialLocation = new google.maps.LatLng(position.latitude, position.longitude);
                this.map.setCenter(this.initialLocation);
            }, function () {
                this.handleNoGeoLocation(this.browserSupportFlag);
                $('#stores').html('');
            });
            // Browser doesn't support Geolocation so geolocate the default
        } else {
            this.browserSupportFlag = false;
            this.handleNoGeolocation();
            $('#stores').html('');
        }

        $('#store-search-form').on('submit', function () {
            document.activeElement.blur();
            StoreLocator.getSearchPosition();
            return false;
        });

        $('#distance').change(function () {
            if ($('#distance').val() !== '') {
                StoreLocator.radius = $('#distance').val();
            } else {
                StoreLocator.radius = StoreLocator.zoomradius[self.map.getZoom()];
            }
        });

        // Update the bounds of the store locator when the browser is resized
        this.smartResize(function () {
            if (StoreLocator.markers.length) {
                StoreLocator.updateBounds();
            }
        });
    },

    /*********************************************************
    * function to close all open google InfoWindow objects
    **********************************************************/

    closeInfoWindows: function closeInfoWindows() {
        for (var i in this.infowindows) {
            if (_typeof(this.infowindows[i]) === 'object') {
                this.infowindows[i].close();
            }
        }
    },

    /*********************************************************
    * function to create and position google Markers and
    * InfoWindows for a result set of Stores
    * @param - stores : a json object containing stores
    * @param - map : the map
    **********************************************************/
    populateStores: function populateStores(stores, noLoc, location, initLoad, milesAround, customerAddresses) {
        var noLocation = noLoc || false,
            thisLoc = location || null,
            image = this.markerurl,
            distance = 0,
            storeCount = 0,
            storeLatLng = '',
            self = this;

        // Function that is called when a map marker is clicked
        function markerClick(storeid) {
            return function () {
                StoreLocator.closeInfoWindows();
                StoreLocator.infowindows[storeid + 'Info'].open(self.map);
            };
        }

        // Function that is called when a store's link is clicked
        function storeClick() {
            /*jshint validthis:true */
            StoreLocator.closeInfoWindows();
            var storeid = $(this).parent().parent().attr('id'),
                infowindow = StoreLocator.infowindows[storeid + 'Info'];
            infowindow.open(self.map);
            self.map.setCenter(infowindow.position);
            if (screen.width < 1200) {
                $('body').scrollTop($('#store-locator').offset().top);
            }
        }

        if (this.markers.length > 0) {
            for (var j in this.markers) {
                if (_typeof(this.markers[j]) === 'object') {
                    this.markers[j].setMap(null);
                }
            }
            this.markers.length = 0;
        }
        this.closeInfoWindows();
        this.infowindows.length = 0;
        this.LatLngList = [];
        $('#stores').addClass('noStores').html('<div class="stores-container"></div>');

        //create array of store IDs and add distance if available
        var storesArray = [];
        for (var store in stores) {
            var tempArray = [store];
            if (!noLocation) {
                if (thisLoc && stores[store].latitude && stores[store].longitude) {
                    //calculate distance from search location
                    storeLatLng = new google.maps.LatLng(stores[store].latitude, stores[store].longitude);
                    distance = google.maps.geometry.spherical.computeDistanceBetween(thisLoc, storeLatLng, 3959).toFixed(1);
                    tempArray.push(distance);
                }
            }
            storesArray.push(tempArray);
        }

        //if we have stores with distances we sort the array of store IDs
        if (storesArray.length && storesArray[0].length > 1) {
            storesArray.sort(function (a, b) {
                return a[1] - b[1];
            });
        }

        for (var i = 0; i < storesArray.length; i++) {
            store = storesArray[i][0];

            storeCount++;

            //format the address
            var formattedAddress = '';
            formattedAddress = stores[store].address1 ? formattedAddress + stores[store].address1 : formattedAddress;
            formattedAddress = stores[store].city ? formattedAddress + ', ' + stores[store].city : formattedAddress;
            formattedAddress = stores[store].stateCode ? formattedAddress + ', ' + stores[store].stateCode : formattedAddress;
            formattedAddress = stores[store].postalCode ? formattedAddress + ' ' + stores[store].postalCode : formattedAddress;

            //URL encode the address
            var encodedAddress = encodeURIComponent(formattedAddress);

            if (!noLocation) {
                // build the store info HTML for right column
                var storeinfo = '<div class="store" id="' + store + '">';
                if (thisLoc && stores[store].latitude && stores[store].longitude) {
                    //calculate distance from search location
                    storeLatLng = new google.maps.LatLng(stores[store].latitude, stores[store].longitude);
                    distance = google.maps.geometry.spherical.computeDistanceBetween(thisLoc, storeLatLng, 3959).toFixed(1);
                    storeinfo += '<div class="distance">' + distance + ' ' + $('#distanceunitpref').val() + ' away</div>';
                }

                var secondaryName = stores[store].storeSecondaryName;
                if (secondaryName !== '') {
                    secondaryName = '(' + secondaryName + ')';
                }

                storeinfo += '<div class="storenumber"><a href="javascript:void(0)">' + storeCount + '</a></div> ';
                storeinfo += '<div class="storename"><a href="' + this.storeurl + store + '"><span class="primaryName">' + stores[store].name + '</span> <span class="secondaryName">' + secondaryName + '</span></a></div>';
                storeinfo += '<div class="address1">' + stores[store].address1 + '</div>';
                storeinfo += '<div class="address2">' + stores[store].address2 + '</div>';
                storeinfo += '<div class="cityStateZip">' + stores[store].city + ', ' + stores[store].stateCode + ' ' + stores[store].postalCode + '</div>';
                storeinfo += '<div class="phone">' + stores[store].phone + '</div>';
                storeinfo += '<div class="hours">' + stores[store].storeHours + '</div>';
                storeinfo += '<div class="directions"><a href="https://maps.google.com/maps?daddr=' + encodedAddress + '" class="directionslink" target="_blank">' + Resources.STORE_DIRECTIONS + '</a></div>';
                storeinfo += '</div>';
                $('#stores .stores-container').append(storeinfo);
            }

            var markerOptions = {
                position: new google.maps.LatLng(stores[store].latitude, stores[store].longitude),
                map: this.map,
                title: stores[store].name + ' ' + stores[store].address1 + ' ' + stores[store].city + ', ' + stores[store].stateCode + ' ' + stores[store].postalCode + stores[store].phone,
                icon: image,
                storeid: store
            };

            if (!noLocation) {
                $.extend(markerOptions, {
                    labelContent: storeCount,
                    labelAnchor: storeCount > 9 ? new google.maps.Point(9, 30) : new google.maps.Point(5, 30),
                    labelClass: 'markerLabel',
                    labelInBackground: false
                });
            }

            //create map marker object
            var marker = new MarkerWithLabel(markerOptions);
            marker.setMap(this.map);
            this.markers.push(marker);

            if (!noLocation || noLocation && stores[store].countryCode === $('#country').val()) {
                //add store's coordinates to array for setting zoom and centering map later
                StoreLocator.LatLngList.push(marker.position);
            }

            //build the store info HTML for tooltip
            var contentString = '<div class="mapContent">' + '<h1>' + stores[store].name + '</h1>' + '<div class="contentBody"><div>' + stores[store].address1 + '</div><div>' + stores[store].address2 + '</div><div>' + stores[store].city + ', ' + stores[store].stateCode + ' ' + stores[store].postalCode + '</div>';

            if (StoreLocator.isDetails) {
                contentString += '<p><a href="https://maps.google.com/maps?daddr=' + encodedAddress + '">' + Resources.STORE_DIRECTIONS + '</a></p></div></div>';
            } else {
                contentString += '<div class="storedetailslink"><a href="' + this.storeurl + store + '">' + Resources.STORE_DETAILS + '</a></div></div></div>';
            }

            var infowindowPosition = -35;
            if ($('#storedetails-wrapper').size() > 0) {
                infowindowPosition = -5;
            }
            //populate store info into tooltip object
            StoreLocator.infowindows[store + 'Info'] = new google.maps.InfoWindow({
                content: contentString,
                position: marker.position,
                maxWidth: 265,
                pixelOffset: new google.maps.Size(0, infowindowPosition, 'px', 'px')
            });

            google.maps.event.addListener(marker, 'click', markerClick(store));

            $('#' + store + ' .storenumber a').on('click', storeClick);

            if ($('#storedetails-wrapper').size() > 0) {
                var storeId = $('#storeId').val();
                StoreLocator.infowindows[storeId + 'Info'].open(this.map);
            }
        }

        if (!noLocation && storeCount > 0) {
            var addressMessage = null;
            if (customerAddresses.length > 0) {
                if (!isNaN(customerAddresses)) {
                    addressMessage = Resources.STORE_RESULTS_POSTAL_CODE + ' ' + customerAddresses;
                } else {
                    addressMessage = customerAddresses;
                }
            } else if (stores[Object.keys(stores)[0]].postalCode.length > 0) {
                addressMessage = Resources.STORE_RESULTS_POSTAL_CODE + ' ' + stores[Object.keys(stores)[0]].postalCode;
            } else {
                addressMessage = stores[Object.keys(stores)[0]].name;
            }

            var storetext = storeCount > 1 ? Resources.STORE_RESULTS_MULT : Resources.STORE_RESULTS_ONE;
            storetext = storetext.toString().replace('{storeCount}', storeCount, 'g').replace('{milesAround}', milesAround, 'g').replace('{addressMessage}', addressMessage, 'g');
            //var storetext = (storeCount > 1) ? 'There are ' + storeCount + ' stores within ' + milesAround + ' miles of ' + addressMessage : 'There is ' + storeCount + ' store within ' + milesAround + ' miles of ' + addressMessage;

            var titleString = '<div class="stores-header">' + storetext + '</div>';
            $('#stores').removeClass('noStores').prepend(titleString);
        }

        if (initLoad && storeCount < 1) {
            $('#stores').removeClass('noStores').html('<div class="stores-header no-stores">' + Resources.STORE_NO_RESULTS_GEO + '</div>');
            this.map.setCenter(location);
        } else {
            StoreLocator.updateBounds();
        }
    },

    updateBounds: function updateBounds() {
        //  Create a new viewpoint bound
        var bounds = new google.maps.LatLngBounds();
        //  Go through each...
        for (var i = 0, LtLgLen = StoreLocator.LatLngList.length; i < LtLgLen; i++) {
            //  And increase the bounds to take this point
            bounds.extend(StoreLocator.LatLngList[i]);
        }
        //  Fit these bounds to the map
        this.map.fitBounds(bounds);
        // Set zoom
        if (this.map.getZoom() >= 17) {
            this.map.setZoom(16);
        }
    },

    /*********************************************************
    * function to collect search data and retrieve a position
    **********************************************************/

    getSearchPosition: function getSearchPosition(type) {
        var address = $('#address').val(),
            radius = $('#distance').val();

        if ($.trim(address) !== '') {
            this.geoCode(address, function (results, status) {
                if (status === google.maps.GeocoderStatus.OK) {
                    var location = results[0].geometry.location,
                        lat = location.lat(),
                        lng = location.lng();
                    if (type === 'onestore') {
                        var storeId = $('#storeId').val();
                        StoreLocator.renderOneStore(storeId, lat, lng, $('#country').val(), $('#distanceunitpref').val(), radius);
                    } else {
                        StoreLocator.renderStores(lat, lng, $('#country').val(), $('#distanceunitpref').val(), radius);
                    }
                } else if (status === google.maps.GeocoderStatus.ZERO_RESULTS) {
                    StoreLocator.handleNoGeolocation();
                    $('#store-results').addClass('noStores').html('<div class="stores-header no-stores">' + Resources.STORE_NO_RESULTS + '</div>');
                } else if (typeof window.console !== 'undefined') {
                    window.console.error('Geocode was not successful for the following reason: ' + status);
                }
            });
        }
    },

    /*********************************************************
    * function to perform a google geocode (address -> LatLng)
    * @param - address : an address string to geocode
    * @param - callback : a callback function to handle the result
    **********************************************************/

    geoCode: function geoCode(address, callback) {
        var geocoder = new google.maps.Geocoder();
        geocoder.geocode({ 'address': address }, function (results, status) {
            callback(results, status);
        });
    },

    /*********************************************************
    * function to perform a nearest stores query
    * @param - zip : a postal code
    * @param - country : a country code
    * @param - unit : a distance unit (mi/km)
    * @param - radius : the radius to display stores from
    **********************************************************/

    renderStores: function renderStores(latitude, longitude, country, unit, radius, noLoc, initLoad) {
        var xhr = $.getJSON(this.queryurl, { 'latitude': latitude, 'longitude': longitude, 'countryCode': country, 'distanceUnit': unit, 'maxdistance': radius }, function (data) {
            var size = 0,
                key;
            for (key in data.stores) {
                if (data.stores.hasOwnProperty(key)) {
                    size++;
                }
            }

            if (size > 0 || initLoad) {
                var location = new google.maps.LatLng(latitude, longitude);
                var milesAround = $('#distance').val();
                var customerAddresses = $('#address').val();
                StoreLocator.populateStores(data.stores, noLoc, location, initLoad, milesAround, customerAddresses);
            } else {
                StoreLocator.handleNoGeolocation();
                $('#stores').addClass('noStores').html('<div class="stores-header no-stores">' + Resources.STORE_NO_RESULTS + '</div>');
            }
        });

        return xhr;
    },

    /*********************************************************
    * function to perform a nearest stores query
    * @param - zip : a postal code
    * @param - country : a country code
    * @param - unit : a distance unit (mi/km)
    * @param - radius : the radius to display stores from
    **********************************************************/

    renderOneStore: function renderOneStore(storeId, latitude, longitude, country, unit, radius, noLoc, initLoad) {
        var self = this,
            xhr = $.getJSON(this.queryurl, { 'latitude': latitude, 'longitude': longitude, 'countryCode': country, 'distanceUnit': unit, 'maxdistance': radius }, function (data) {
            var size = 0,
                key;
            for (key in data.stores) {
                if (data.stores.hasOwnProperty(key)) {
                    size++;
                }
            }
            if (size > 0 || initLoad) {
                var store = {};
                store[storeId] = data.stores[storeId];

                var location = new google.maps.LatLng(latitude, longitude);
                var milesAround = $('#distance').val();
                var customerAddresses = $('#address').val();
                StoreLocator.populateStores(store, noLoc, location, initLoad, milesAround, customerAddresses);
                self.map.setZoom(16);
            } else {
                StoreLocator.handleNoGeolocation();
                $('#stores').html('');
            }
        });

        return xhr;
    },

    /*********************************************************
    * function to perform a reverse geocode (LatLng -> address)
    * @param - position : the google LatLng position
    * @param - callback : a callback function to handle the results
    **********************************************************/

    reverseGeocode: function reverseGeocode(position, callback) {
        var geocoder = new google.maps.Geocoder();
        var location = geocoder.geocode({ 'latLng': position }, function (results, status) {
            if (status === google.maps.GeocoderStatus.OK) {
                callback(results);
            } else if (typeof window.console !== 'undefined') {
                // debug google requests
                window.console.error('Geocoder failed due to: ' + status);
            }
        });

        return location;
    },

    /*********************************************************
    * function handles case where geodata can't be found
    **********************************************************/

    handleNoGeolocation: function handleNoGeolocation() {
        if (this.markers.length > 0) {
            for (var i in this.markers) {
                if (_typeof(this.markers[i]) === 'object') {
                    this.markers[i].setMap(null);
                }
            }
            this.markers.length = 0;
        }

        StoreLocator.geoCode(StoreLocator.defaultlocation, function (results, status) {
            if (status === google.maps.GeocoderStatus.OK && results[0].geometry.location) {
                StoreLocator.initialLocation = results[0].geometry.location;
            } else {
                StoreLocator.initialLocation = new google.maps.LatLng(37.09024, -95.71289100000001);
            }
            StoreLocator.renderStores(StoreLocator.initialLocation.lat(), StoreLocator.initialLocation.lng(), $('#country').val(), $('#distanceunitpref').val(), 15000, true);
        });
    },

    /*********************************************************
    * function to parse cookie value and instantiate LatLng object
    **********************************************************/

    getCookieLatLng: function getCookieLatLng() {
        if (!this.readCookie(this.cookiename)) {
            return null;
        }
        var position = this.readCookie(this.cookiename).split(',');
        var latlngpref = new google.maps.LatLng(position[0], position[1]);
        return latlngpref;
    },

    /*********************************************************
    * function read cookie value
    * @param - name : name of the cookie to retrieve value for
    **********************************************************/

    readCookie: function readCookie(name) {
        var nameEQ = name + '=';
        var ca = document.cookie.split(';');
        for (var i = 0; i < ca.length; i++) {
            var c = ca[i];
            while (c.charAt(0) === ' ') {
                c = c.substring(1, c.length);
            }
            if (c.indexOf(nameEQ) === 0) {
                return c.substring(nameEQ.length + 1, c.length - 1);
            }
        }
        return null;
    },

    /**
     * Execute callback function when the user has stopped resizing the screen.
     * @param callback {Function} The callback function to execute.
     */

    smartResize: function smartResize(callback) {
        var timeout;

        window.addEventListener('resize', function () {
            clearTimeout(timeout);
            timeout = setTimeout(callback, 100);
        });

        return callback;
    }

}; // end storelocator

module.exports = StoreLocator;

},{"./marker-with-label":28}],57:[function(require,module,exports){
'use strict';

var inventory = require('./');

var cartInventory = {
    setSelectedStore: function setSelectedStore(storeId) {
        var $selectedStore = $('.store-tile.' + storeId),
            $lineItem = $('.cart-row[data-uuid="' + this.uuid + '"]'),
            storeAddress = $selectedStore.find('.store-address').html(),
            storeStatus = $selectedStore.find('.store-status').data('status'),
            storeStatusText = $selectedStore.find('.store-status').text();
        this.selectedStore = storeId;

        $lineItem.find('.instore-delivery .selected-store-address').data('storeId', storeId).attr('data-store-id', storeId).html(storeAddress);
        $lineItem.find('.instore-delivery .selected-store-availability').data('status', storeStatus).attr('data-status', storeStatus).text(storeStatusText);
        $lineItem.find('.instore-delivery .delivery-option').removeAttr('disabled').trigger('click');
    },
    cartSelectStore: function cartSelectStore(selectedStore) {
        var self = this;
        inventory.getStoresInventory(this.uuid).then(function (stores) {
            inventory.selectStoreDialog({
                stores: stores,
                selectedStoreId: selectedStore,
                selectedStoreText: Resources.SELECTED_STORE,
                continueCallback: function continueCallback() {},
                selectStoreCallback: self.setSelectedStore.bind(self)
            });
        }).done();
    },
    setDeliveryOption: function setDeliveryOption(value, storeId) {
        // set loading state
        $('.item-delivery-options').addClass('loading').children().hide();

        var data = {
            plid: this.uuid,
            storepickup: value === 'store' ? true : false
        };
        if (value === 'store') {
            data.storepickup = true;
            data.storeid = storeId;
        } else {
            data.storepickup = false;
        }
        $.ajax({
            url: Urls.setStorePickup,
            data: data,
            success: function success() {
                // remove loading state
                $('.item-delivery-options').removeClass('loading').children().show();
            }
        });
    },
    init: function init() {
        var self = this;
        $('.item-delivery-options .set-preferred-store').on('click', function (e) {
            e.preventDefault();
            self.uuid = $(this).data('uuid');
            var selectedStore = $(this).closest('.instore-delivery').find('.selected-store-address').data('storeId');
            if (!User.zip) {
                inventory.zipPrompt(function () {
                    self.cartSelectStore(selectedStore);
                });
            } else {
                self.cartSelectStore(selectedStore);
            }
        });
        $('.item-delivery-options .delivery-option').on('click', function () {
            // reset the uuid
            var selectedStore = $(this).closest('.instore-delivery').find('.selected-store-address').data('storeId');
            self.uuid = $(this).closest('.cart-row').data('uuid');
            self.setDeliveryOption($(this).val(), selectedStore);
        });
    }
};

module.exports = cartInventory;

},{"./":58}],58:[function(require,module,exports){
'use strict';

var _ = require('lodash'),
    dialog = require('../dialog'),
    TPromise = require('promise'),
    util = require('../util');

var newLine = '\n';
var storeTemplate = function storeTemplate(store, selectedStoreId, selectedStoreText) {
    return ['<li class="store-tile ' + store.storeId + (store.storeId === selectedStoreId ? ' selected' : '') + '">', '	<p class="store-address">', '		' + store.address1 + '<br/>', '		' + store.city + ', ' + store.stateCode + ' ' + store.postalCode, '	</p>', '	<p class="store-status" data-status="' + store.statusclass + '">' + store.status + '</p>', '	<button class="select-store-button" data-store-id="' + store.storeId + '"' + (store.statusclass !== 'store-in-stock' ? 'disabled="disabled"' : '') + '>', '		' + (store.storeId === selectedStoreId ? selectedStoreText : Resources.SELECT_STORE), '	</button>', '</li>'].join(newLine);
};

var storeListTemplate = function storeListTemplate(stores, selectedStoreId, selectedStoreText) {
    if (stores && stores.length) {
        return ['<div class="store-list-container">', '<ul class="store-list">', _.map(stores, function (store) {
            return storeTemplate(store, selectedStoreId, selectedStoreText);
        }).join(newLine), '</ul>', '</div>', '<div class="store-list-pagination">', '</div>'].join(newLine);
    } else {
        return '<div class="no-results">' + Resources.INVALID_ZIP + '</div>';
    }
};

var zipPromptTemplate = function zipPromptTemplate() {
    return ['<div id="preferred-store-panel">', '	<input type="text" id="user-zip" placeholder="' + Resources.ENTER_ZIP + '" name="zipCode"/>', '</div>'].join(newLine);
};

/**
 * @description test whether zipcode is valid for either US or Canada
 * @return {Boolean} true if the zipcode is valid for either country, false if it's invalid for both
 **/
var validateZipCode = function validateZipCode(zipCode) {
    var regexes = {
        canada: /^[ABCEGHJKLMNPRSTVXY]\d[ABCEGHJKLMNPRSTVWXYZ]( )?\d[ABCEGHJKLMNPRSTVWXYZ]\d$/i,
        usa: /^\d{5}(-\d{4})?$/
    },
        valid = false;
    if (!zipCode) {
        return;
    }
    _.each(regexes, function (re) {
        var regexp = new RegExp(re);
        valid = regexp.test(zipCode);
    });
    return valid;
};

var storeinventory = {
    zipPrompt: function zipPrompt(callback) {
        var self = this;
        dialog.open({
            html: zipPromptTemplate(),
            options: {
                title: Resources.STORE_NEAR_YOU,
                width: 500,
                buttons: [{
                    text: Resources.SEARCH,
                    click: function click() {
                        var zipCode = $('#user-zip').val();
                        if (validateZipCode(zipCode)) {
                            self.setUserZip(zipCode);
                            if (callback) {
                                callback(zipCode);
                            }
                        }
                    }
                }],
                open: function open() {
                    $('#user-zip').on('keypress', function (e) {
                        if (e.which === 13) {
                            // trigger the search button
                            $('.ui-dialog-buttonset .ui-button').trigger('click');
                        }
                    });
                }
            }
        });
    },
    getStoresInventory: function getStoresInventory(pid) {
        return TPromise.resolve($.ajax({
            url: util.appendParamsToUrl(Urls.storesInventory, {
                pid: pid,
                zipCode: User.zip
            }),
            dataType: 'json'
        }));
    },
    /**
     * @description open the dialog to select store
     * @param {Array} options.stores
     * @param {String} options.selectedStoreId
     * @param {String} options.selectedStoreText
     * @param {Function} options.continueCallback
     * @param {Function} options.selectStoreCallback
     **/
    selectStoreDialog: function selectStoreDialog(options) {
        var self = this,
            stores = options.stores,
            selectedStoreId = options.selectedStoreId,
            selectedStoreText = options.selectedStoreText,
            storeList = storeListTemplate(stores, selectedStoreId, selectedStoreText);
        dialog.open({
            html: storeList,
            options: {
                title: Resources.SELECT_STORE + ' - ' + User.zip,
                buttons: [{
                    text: Resources.CHANGE_LOCATION,
                    click: function () {
                        self.setUserZip(null);
                        // trigger the event to start the process all over again
                        $('.set-preferred-store').trigger('click');
                    }.bind(this)
                }, {
                    text: Resources.CONTINUE,
                    click: function click() {
                        if (options.continueCallback) {
                            options.continueCallback(stores);
                        }
                        dialog.close();
                    }
                }],
                open: function open() {
                    $('.select-store-button').on('click', function (e) {
                        e.preventDefault();
                        var storeId = $(this).data('storeId');
                        // if the store is already selected, don't select again
                        if (storeId === selectedStoreId) {
                            return;
                        }
                        $('.store-list .store-tile.selected').removeClass('selected').find('.select-store-button').text(Resources.SELECT_STORE);
                        $(this).text(selectedStoreText).closest('.store-tile').addClass('selected');
                        if (options.selectStoreCallback) {
                            options.selectStoreCallback(storeId);
                        }
                    });
                }
            }
        });
    },
    setUserZip: function setUserZip(zip) {
        User.zip = zip;
        $.ajax({
            type: 'POST',
            url: Urls.setZipCode,
            data: {
                zipCode: zip
            }
        });
    },
    shippingLoad: function shippingLoad() {
        var $checkoutForm = $('.address');
        $checkoutForm.off('click');
        $checkoutForm.on('click', 'input[name$="_shippingAddress_isGift"]', function () {
            $(this).parent().siblings('.gift-message-text').toggleClass('hidden', $('input[name$="_shippingAddress_isGift"]:checked').val());
        });
    }
};

module.exports = storeinventory;

},{"../dialog":23,"../util":63,"lodash":5,"promise":6}],59:[function(require,module,exports){
'use strict';

/**
 * Events are divided up by name space so only the
 * events that are needed are initialized.
 */

var events = {
    account: function account() {},
    cart: function cart() {},
    checkout: function checkout() {
        $('[name$=_deleteProduct]').on('click', function () {
            removeFromCart($.parseJSON($(this).attr('data-gtmdata')), 1);
        });
    },
    compare: function compare() {},
    product: function product() {
        $('#add-to-cart').on('click', function () {
            addToCart($.parseJSON($(this).attr('data-gtmdata')), $(this).closest('div').find('[name=Quantity]').val());
        });
    },
    search: function search() {},
    storefront: function storefront() {},
    wishlist: function wishlist() {
        $('[name$=_addToCart]').on('click', function () {
            addToCart($.parseJSON($(this).attr('data-gtmdata')), $(this).closest('div').find('[name=Quantity]').val());
        });
    },
    // events that should happen on every page
    all: function all() {
        $('.name-link').on('click', function () {
            productClick($.parseJSON($(this).attr('data-gtmdata')));
        });
        $('.thumb-link').on('click', function () {
            productClick($.parseJSON($(this).attr('data-gtmdata')));
        });
        $('.has-sub-menu').on('click', function () {
            pushEvent('trackEvent', 'User Action', 'Header Click', $(this).html());
        });
        $('.primary-logo').on('click', function () {
            pushEvent('trackEvent', 'User Action', 'Header Click', 'Home Link');
        });
    }
};

/**
 * @param {Object} productObject The product data
 * @description gets the data for a product click
 */
function productClick(productObject) {
    var obj = {
        'event': 'productClick',
        'ecommerce': {
            'click': {
                'actionField': { 'list': 'SearchResults' },
                'products': []
            }
        }
    };
    obj.ecommerce.click.products.push(productObject);
    dataLayer.push(obj);
}

/**
 * @description Click event for add product to cart
 * @param {Object} productObject The product data
 * @param {String} quantity
 */
function addToCart(productObject, quantity) {
    var quantityObj = { 'quantity': quantity },
        obj = {
        'event': 'addToCart',
        'ecommerce': {
            'add': {
                'products': []
            }
        }
    };
    obj.ecommerce.add.products.push($.extend(productObject, quantityObj));
    dataLayer.push(obj);
}

/**
 *
 * @param {Object} productObject
 * @param {String|Number} quantity
 */
function removeFromCart(productObject, quantity) {
    var quantityObj = { 'quantity': quantity },
        obj = {
        'event': 'removeFromCart',
        'ecommerce': {
            'remove': {
                'products': []
            }
        }
    };
    obj.ecommerce.add.products.push($.extend(productObject, quantityObj));
    dataLayer.push(obj);
}

/**
 * @description Convenience method for creating a click event.
 * @param {String} event
 * @param {String} eventCategory
 * @param {String} eventAction
 * @param {String} eventLabel
 */
function pushEvent(event, eventCategory, eventAction, eventLabel) {
    dataLayer.push({
        'event': event,
        'eventCategory': eventCategory,
        'eventAction': eventAction,
        'eventLabel': eventLabel
    });
}

/**
 * @description Initialize the tag manager functionality
 * @param {String} nameSpace The current name space
 */
exports.init = function (nameSpace) {
    if (nameSpace && events[nameSpace]) {
        events[nameSpace]();
    }
    events.all();
};

},{}],60:[function(require,module,exports){
'use strict';

/**
 * Checks the TLS and displays a warning if appropriate
 * @function getUserAgent Checks the TLS and displays a warning if appropriate
 **/

function getUserAgent() {

    var ua = navigator.userAgent,
        tem,
        M = ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i) || [];
    if (/trident/i.test(M[1])) {
        tem = /\brv[ :]+(\d+)/g.exec(ua) || [];
        return { name: 'IE', version: tem[1] || '' };
    }
    if (M[1] === 'Chrome') {
        tem = ua.match(/\bOPR\/(\d+)/);
        if (tem != null) {
            return { name: 'Opera', version: tem[1] };
        }
    }
    M = M[2] ? [M[1], M[2]] : [navigator.appName, navigator.appVersion, '-?'];
    if ((tem = ua.match(/version\/(\d+)/i)) != null) {
        M.splice(1, 1, tem[1]);
    }
    return {
        name: M[0],
        version: M[1]
    };
}

/**
 * Export the getUserAgent function
 */

exports.getUserAgent = getUserAgent;

},{}],61:[function(require,module,exports){
'use strict';

/**
 * @function
 * @description Initializes the tooltip-content and layout
 */

var settings = {
    items: '.tooltip, .Custom-tooltip',
    delay: 0,
    track: false,
    showURL: false,
    extraClass: 'tooltipshadow',
    top: 5,
    left: -150
};
exports.init = function () {
    $(document).tooltip($.extend({}, settings, {
        content: function content() {
            return $(this).find('.tooltip-content , .tooltip-body').html();
        }
    }));
    /*$('.Custom-tooltip').tooltipster({
            content: jQuery(this).find('.tooltipcontainer').html(),
            contentAsHTML: true,
            maxWidth: 300,
            touchDevices: true,
            trigger: 'click'
    }); */
    $('.share-link').on('click', function (e) {
        e.preventDefault();
        var target = $(this).data('target');
        if (!target) {
            return;
        }
        $(target).toggleClass('active');
    });

    /*JIRA PREV-282 : DEV-32: SG issue- 'What is this' link in checkout billing page should not be clickable. Added the folloiwng block.*/
    $('a.tooltip').click(function (e) {
        e.preventDefault();
    });
};

},{}],62:[function(require,module,exports){
'use strict';

var util = require('./util');
/*function charcount($this){
	var characterLimit = parseInt($this.data("character-limit"));
	var charRemains = characterLimit - $this.val().trim().length;
	var charCountHtml = 'Characters Remaining ' + charRemains
	if($this.hasClass("vip-textarea")){
		if ($this.next('div.char-count').length === 0) {
			charCountContainer = $('<div class="char-count"/>').insertAfter($this);
		}
		$this.next('div.char-count').html(charCountHtml);
	}else {
		if ($this.prev('div.char-count').length === 0) {
			charCountContainer = $('<div class="char-count"/>').insertBefore($this);
		}
		$this.prev('div.char-count').html(charCountHtml);
	}
}*/
var uievents = {
    customFields: function customFields() {
        var $con = $('body');
        $con.find('.custom-checkbox').each(function () {
            if (jQuery(this).find('input[type="checkbox"]').is(':checked')) {
                jQuery(this).find('.custom-link').addClass('active');
            }
        });

        $con.find('.custom-checkbox .custom-link').off('click').on('click', function () {
            var $customcheck = $(this).closest('.custom-checkbox');
            $(this).removeClass('error');
            if ($customcheck.find('input[type="checkbox"]').is(':checked')) {
                $customcheck.find('input[type="checkbox"]').click();
                $customcheck.find('.custom-link').removeClass('active');
            } else {
                $customcheck.find('input[type="checkbox"]').click();
                $customcheck.find('.custom-link').addClass('active');
            }
        });
        /*if($('body').hasClass('rapala_device')){
            $con.find(".ui-dialog #dialogcontainer123 #VipinsiderForm .select-style .selectbox").off('click').on("click",function(){
                $(this).closest(".field-wrapper").addClass('expanded');
                }).on("blur change", function(){
                    $(this).closest(".field-wrapper").removeClass('expanded');
                });
        }*/

        // custom select implementation in VIP insider
        /*if(!$('body').hasClass('rapala_device')){
            $con.find(".customized-select").find("select").each(function(){
                if($(this).attr('disabled')){
                    $(this).selectbox('disable');
                }
             else{
                 $(this).selectbox();
             }
                $('.sbOptions li:last').addClass('last');
            }).focus(function(){
                $(this).next('.sbHolder').trigger('focus');
            });
         }
        */
        $con.find('.custom-checkbox input[type="checkbox"]').off('change').on('change', function () {
            $(this).closest('.custom-checkbox').find('.custom-link').removeClass('error');
            var $form = $('.address');
            if ($(this).is(':checked')) {
                $(this).closest('.custom-checkbox').find('.custom-link').addClass('active');
                if ($(this).is('[name$=_sameasshippingaddress]')) {
                    var selectedAddress = $(this).closest('.custom-checkbox').data('address');
                    $('.selected-shipping-address').empty();
                    $('.selected-shipping-address').append(selectedAddress.firstName + ' ' + selectedAddress.lastName + '<br/>' + selectedAddress.address1 + ' ' + selectedAddress.address2 + '<br/>' + selectedAddress.city + ' ' + selectedAddress.stateCode + ' ' + selectedAddress.postalCode + '<br/>' + selectedAddress.phone);
                    util.fillAddressFields(selectedAddress, $form);
                    $('.edit-address-field').addClass('hide');
                    $('.selected-shipping-address, .new-address-field').removeClass('hide');
                    $('.shipping-address-field-section').addClass('hide');
                    uievents.customFields();
                    uievents.synccheckoutH();
                }
            } else {
                $(this).closest('.custom-checkbox').find('.custom-link').removeClass('active');
                if ($(this).is('[name$=_sameasshippingaddress]')) {
                    $('.addressoptions-addToAddressBook,.addressoptions-makedefault ').removeClass('hide');
                    $('input[name$=\'shippingAddress_selectedaddress\']').val('');
                    $('.selected-shipping-address').empty();
                    $('input[name$=\'_addressid\']').val('');
                    $('input[name$=\'_addressFields_firstName\']').val('');
                    $('input[name$=\'_addressFields_lastName\']').val('');
                    $('input[name$=\'_addressFields_address1\']').val('');
                    $('input[name$=\'_addressFields_address2\']').val('');
                    $('input[name$=\'_addressFields_city\']').val('');
                    $('input[name$=\'_addressFields_postal\']').val('');
                    $('input[name$=\'_addressFields_phone\']').val('');
                    uievents.changeFormSelection(jQuery('select[name$=\'_addressFields_states_state\']')[0], '');
                    uievents.changeFormSelection(jQuery('select.address-select')[0], '');
                    $('.shipping-address-field-section').removeClass('hide');
                    $('.selected-shipping-address, .new-address-field, .edit-address-field').addClass('hide');
                    $('input[name$=\'_addressFields_phone\']').closest('div.phone').find('span.errorclient').remove();
                    $('input[name$=\'_addressFields_postal\']').closest('div.zip').find('span.errorclient').remove();
                    $('.addressform .form-row.custom-select').removeClass('customselect-error');
                    $('.custom-select').each(function () {
                        var selectVal = $(this).find(':selected').text();
                        $(this).find('.selectorOut').text(selectVal);
                    });
                    $('a.clearbutton').hide();
                    $('.shipping-address-field-section .form-row').find('input').removeClass('errorclient');
                    uievents.customFields();
                    uievents.synccheckoutH();
                }
            }
        });

        $con.find('.custom-select').each(function () {
            $(this).find('select').removeAttr('style');
            var selWidth = $(this).find('select').width();
            if ($(this).find('select').hasClass('input-longer')) {
                selWidth = selWidth - 17;
            }
            $(this).find('select').css({
                'width': selWidth + 20,
                'left': '0px',
                'line-height': '28px',
                'z-index': '99',
                'position': 'relative',
                'float': 'left',
                'padding': '0px'
            });
            $(this).find('.field-wrapper').css({
                'background-position': selWidth,
                'width': selWidth + 20,
                'padding': '0px'
            });
            if ($('.creditCard').length > 0) {
                $(this).css({
                    'background-position': selWidth,
                    'width': selWidth + 15,
                    'padding': '0px'
                });
            }

            if ($(this).find('.selectorOut').length == 0) {
                $(this).find('select').after('<div class=\'selectorOut\' style=\'position:absolute;top:0px;z-index:1;padding:0 20px 0 10px;\'></div>');
            }
            if ($(this).find('.selectorError').length == 0 && !$(this).closest('month') && !$(this).closest('year')) {
                $(this).closest('.formfield .field-wrapper').append('<div class=\'selectorError error\'></div>');
            }
            $(this).find('.selectorOut').text('').text($(this).find(':selected').text());
        }).change(function () {
            var str = '';
            str = $(this).find(':selected').text();
            $(this).find('.selectorOut').text('').text(str);
            if ($(this).hasClass('addresslist')) {
                if ($(this).find('.selectorOut').outerWidth() >= 298) {
                    str = str.substr(0, 34) + '...';
                    $(this).find('.selectorOut').text('').text(str);
                }
            }
        });

        $con.find('.custom-select select').bind('blur change', function () {
            if ($(this).hasClass('valid') || $(this).val().length > 0) {
                $(this).closest('.custom-select').removeClass('customselect-error');
                $(this).removeClass('errorclient').addClass('valid');
                //$(this).find("option[value="+$(this).val()+"]").attr("selected","selected");
                if (jQuery(this).closest('.formfield').hasClass('state')) {
                    $('.state-blk .stateerror.error').hide();
                }
            } else {
                $(this).closest('.custom-select').addClass('customselect-error');
                if (jQuery(this).closest('.formfield').hasClass('state') && !jQuery(this).closest('.custom-select').hasClass('blured')) {
                    jQuery('.state-blk .stateerror.error').show();
                }
            }
            if (jQuery(this).hasClass('yearselect') || jQuery(this).hasClass('monthselect')) {
                if (jQuery('.yearselect').valid() == 1 && jQuery('.monthselect').valid() == 1) {
                    jQuery('.expirationdatevalid.error').hide();
                    jQuery('.expirationdate.error').hide();
                }
            }
        });
    },
    //changes the selection of the given form select to the given value
    changeFormSelection: function changeFormSelection(selectElem, selectedValue) {
        if (!selectElem) {
            return;
        }
        var options = selectElem.options;
        if (options.length > 0) {
            // find index of value to select
            var idx = 0;
            for (var i = 0; i < options.length; i++) {
                if (options[i].value != selectedValue) {
                    continue;
                }
                idx = i;
                break;
            }
            selectElem.selectedIndex = idx;
            $('.custom-select').each(function () {
                var selectVal = $(this).find(':selected').text();
                $(this).find('.selectorOut').text(selectVal);
            });
        }
    },
    init: function init($con) {

        if ($con == null) {
            $con = $('body');
        }

        uievents.customFields();
        // Dynamicaly generating tabindex for VIP
        if ($('.ui-dialog').hasClass('vipInsider-dlg')) {
            $('.vipInsider-dlg .formfield').each(function (i) {
                $(this).find(':input:not(:hidden)').attr('tabindex', i + 21);
            });
        }
        /*$(document).ajaxComplete(function () {
            if($('.pt_productsearchresult').length > 0){app.search.searchRefinementToggle();}
            uievents.synccheckoutH();
        });*/
        $con.find('a.clearbutton').on('click touchstart', function () {
            $(this).closest('.formfield').find('input').val('');
            $(this).closest('.formfield').find('textarea').val('');
            $(this).closest('.formfield').find('a.clearbutton').hide();
            $(this).closest('.formfield').find('.correctaddress').hide();
            $(this).closest('.formfield').find('.form-row , .label span').removeClass('inputlabel');
            var textareMaxLength = $(this).closest('.field-wrapper').find('textarea').attr('maxlength');
            $(this).closest('.field-wrapper').find('.char-count').html('').html('Characters Remaining ' + textareMaxLength);
            if ($(this).closest('.formfield').find('input[name$="_creditCard_number"]').length > 0 && $(this).closest('.formfield').find('input[name$="_creditCard_number"]').val().length < 4) {
                $('.cardtypeimg > div').hide();
            }
            if ($(this).closest('.formfield').find('.field-wrapper .maxelement').length > 0) {
                $(this).closest('.formfield').find('.field-wrapper .maxelement').remove();
            }
        });
        $con.find('.promo-input-button .field-wrapper').on('keyup blur', function () {
            if ($(this).find('input').val() != undefined) {
                if ($(this).find('input').val().length > 0) {
                    $(this).find('a.clearbutton').show();
                } else {
                    $(this).find('a.clearbutton').hide();
                }
            }
        });
        $con.find('.giftcertfields .field-wrapper').on('keyup blur', function () {
            if ($(this).find('input').val() != undefined) {
                $(this).find('input').removeClass('errorclient');
                if ($(this).find('input').val().length > 0) {
                    $(this).find('a.clearbutton').show();
                } else {
                    $(this).find('a.clearbutton').hide();
                }
            }
        });

        if ($('.ui-login').length > 0 || $('.passwordreset').length > 0) {
            $con.find('.ui-login .formfield').each(function () {
                var $val = $(this).find('input[type="text"]').length > 0 ? $(this).find('input[type="text"]').val() : $(this).find('input[type="password"]').val();
                if ($(this).find('.field-wrapper .clearbutton').length == 0 && $(this).find('.field-wrapper input[type="text"]').length > 0 || $(this).find('.field-wrapper input[type="password"]').length > 0) {
                    $(this).find('.field-wrapper').append('<a class="clearbutton"></a>');
                    $(this).find('.clearbutton').hide();
                }
                if (($val != null || $val != undefined) && $val.length > 0) {
                    $(this).find('.clearbutton').show();
                }
            });
        }
        if ($('.account-section').length > 0 || $('.passwordreset').length > 0) {
            $con.find('.account-section .formfield').each(function () {
                var $val = $(this).find('input[type="text"]').length > 0 ? $(this).find('input[type="text"]').val() : $(this).find('input[type="password"]').val();
                if ($(this).find('.field-wrapper .clearbutton').length == 0 && $(this).find('.field-wrapper input[type="text"]').length > 0 || $(this).find('.field-wrapper input[type="password"]').length > 0) {
                    $(this).find('.field-wrapper').append('<a class="clearbutton"></a>');
                }
                if (($val != null || $val != undefined) && $val.length > 0) {
                    $(this).find('.clearbutton').show();
                }
            });
        }

        $con.find('.formfield .field-wrapper input,.formfield .field-wrapper textarea').on('keyup input blur', function () {
            if ($(this).val() != undefined) {
                if ($(this).val().length > 0) {
                    $(this).closest('.formfield').find('a.clearbutton').show();
                } else {
                    $(this).closest('.formfield').find('a.clearbutton').hide();
                }
            }
        });
        //var OSName = 'Unknown OS';
        if (navigator.appVersion.indexOf('Mac') != -1) {
            $('.pt_vipinsider').find('span.rapala-entity-holder i').addClass('macfont');
        }

        $('.paymentmethods_cont .toggle').click(function () {
            uievents.synccheckoutH();
        });

        $('button[name=\'dwfrm_login_login\']').click(function () {
            setTimeout(function () {
                uievents.synccheckoutH();
            }, 100);
        });
        $('button[name=\'dwfrm_billinggiftcert_redeemGiftCert\']').click(function () {
            setTimeout(function () {
                uievents.synccheckoutH();
            }, 100);
        });
        $('button[name=\'dwfrm_billingcoupon_applyCoupon\']').click(function () {
            setTimeout(function () {
                uievents.synccheckoutH();
            }, 100);
        });
        $('.checkbalance a').click(function () {
            setTimeout(function () {
                uievents.synccheckoutH();
            }, 100);
        });
        $('.giftcertcouponform .gift-heading').click(function () {
            if ($('.show-content').is(':visible') == true) {
                $('.show-content').hide();
                $(this).closest('.giftcertfield').find('span.error').hide();
            } else {
                $('.show-content').show();
                $(this).closest('.giftcertfield').find('span.error').show();
            }
            uievents.synccheckoutH();
        });
        $('body').on('keypress keyup', 'input[id$="_addressid"],input[id$="_addressFields_firstName"],input[id$="_addressFields_lastName"],input[id$="_addressFields_address1"],input[id$="_addressFields_address2"],input[id$="_addressFields_city"],input[id$="_addressFields_phone"],input[id$="_addressFields_postal"],input[id$="_contactus_phone"]', function (e) {
            var keycode = e.keyCode ? e.keyCode : e.which;
            var maxlength = $(this).attr('maxlength');
            var maxlmsg = 'This field is limited to ' + maxlength + ' characters.';
            if (jQuery(this).hasClass('phone') || jQuery(this).hasClass('phoneCDUS')) {
                maxlength = 14;
                $(this).attr('maxlength', maxlength);
                maxlmsg = 'This field is limited to 10 numbers.';
            }

            if (jQuery(this).hasClass('postal')) {
                maxlength = 10;
                $(this).attr('maxlength', maxlength);
                maxlmsg = 'This field is limited to 9 numbers.';
            }
            if (keycode != 86) {
                var maxElement = '<div class=\'maxelement hide\'>' + maxlmsg + '</div>';
                if ($(this).val().length >= maxlength && keycode != 9) {
                    if ($(this).closest('.field-wrapper').find('span.errorclient').length != 0) {
                        $(this).closest('.field-wrapper').find('span.errorclient').remove();
                    }
                    if ($(this).closest('.field-wrapper').find('.maxelement').length == 0) {
                        $(this).closest('.field-wrapper').append(maxElement);
                    } else {
                        $(this).closest('.field-wrapper').find('.maxelement').removeClass('hide');
                        $(this).val($(this).val().substr(0, maxlength));
                        return false;
                    }
                } else {
                    if ($(this).closest('.field-wrapper').find('.maxelement').length > 0) {
                        $(this).closest('.field-wrapper').find('.maxelement').remove();
                    }
                }
            }
        });
        $('body').on('blur', 'input[id$="_addressid"],input[id$="_addressFields_firstName"],input[id$="_addressFields_lastName"],input[id$="_addressFields_address1"],input[id$="_addressFields_address2"],input[id$="_addressFields_city"],input[id$="_addressFields_phone"],input[id$="_addressFields_postal"],input[id$="_contactus_phone"]', function () {
            $('.maxelement').addClass('hide');
            $('#customercontactus').find('span').removeClass('maxelement');
        });
        /* if($(".ordertotalsaving").length > 0 ) {
             $(".new-summery").removeClass("discount-available");
         }else {
             $(".new-summery").addClass("discount-available");
         }*/
        if ($('.ui-dialog').hasClass('vipInsider-dlg')) {
            $('.vipInsider-dlg .formfield').each(function () {
                if ($(this).find('.field-wrapper .clearbutton').length == 0 && $(this).find('.field-wrapper input[type="text"]').length > 0 || $(this).find('.field-wrapper textarea').length > 0 || $(this).find('.field-wrapper input[type="password"]').length > 0) {
                    $(this).find('.field-wrapper').append('<a class="clearbutton"></a>');
                }
                $(this).find('.field-wrapper input.textinput, .field-wrapper textarea').unbind('change').bind('click change', function () {
                    if ($(this).hasClass('errorclient')) {
                        $(this).removeClass('errorclient');
                        $(this).closest('.formfield').find('.label').find('span.errorclient').remove();
                        $(this).closest('.formfield').find('.label').removeClass('erroroccured');
                        $(this).closest('.formfield').find('.form-row , .label span').removeClass('inputlabel');
                    } else {
                        return false;
                    }
                });
                $(this).find('.field-wrapper select').unbind('change').bind('focusin change', function () {
                    if ($(this).hasClass('errorclient')) {
                        $(this).removeClass('errorclient');
                        $(this).closest('.formfield').find('.label').find('span.errorclient').remove();
                        $(this).closest('.formfield').find('.label').removeClass('erroroccured');
                        $(this).closest('.formfield').find('.form-row , .label span').removeClass('inputlabel');
                    }
                });
            });
            $('#VIPInsider-form-cancel-id').click(function () {
                $('.ui-dialog-titlebar-close').trigger('click');
            });

            /********************* vip phone and zip error exceed code **************************/

            $('input[id$="_vipinsider_customer_zip"],input[id$="_vipinsider_customer_phone"]').bind('keypress keyup', function (e) {
                var keycode = e.keyCode ? e.keyCode : e.which;
                var maxlength = $(this).attr('maxlength');
                var maxlmsg = 'This field is limited to ' + maxlength + ' characters.';
                if (jQuery(this).hasClass('vip-phone')) {
                    maxlength = 14;
                    $(this).attr('maxlength', maxlength);
                    maxlmsg = '-This field is limited to 10 numbers.';
                }
                if (jQuery(this).hasClass('vip-zip')) {
                    maxlength = 10;
                    $(this).attr('maxlength', maxlength);
                    maxlmsg = '-This field is limited to 9 numbers.';
                }
                if (keycode != 86) {
                    var maxElement = '<div class=\'maxelement hide\'>' + maxlmsg + '</div>';
                    if ($(this).val().length >= maxlength) {
                        if ($(this).closest('.field-wrapper').find('span.errorclient').length != 0) {
                            $(this).closest('.field-wrapper').find('span.errorclient').remove();
                        }
                        if ($(this).closest('.formfield').find('.maxelement').length == 0) {
                            $(this).closest('.formfield').find('.label').append(maxElement);
                        } else {
                            if (keycode > 47 && keycode < 58) {
                                $(this).closest('.formfield').find('.maxelement').removeClass('hide');
                                $(this).closest('.formfield').find('.label').addClass('erroroccured');
                                $(this).val($(this).val().substr(0, maxlength));
                                return false;
                            }
                        }
                    } else {
                        if ($(this).closest('.formfield').find('.maxelement').length > 0) {
                            $(this).closest('.formfield').find('.maxelement').remove();
                            $(this).closest('.formfield').find('.label').removeClass('erroroccured');
                        }
                    }
                }
            });
            //this is used after to remove the exceeding error message on blur for 1143 ticket
            jQuery('input[id$="_vipinsider_customer_zip"],input[id$="_vipinsider_customer_phone"]').bind('blur', function () {
                if ($(this).closest('.formfield').find('.label').find('.maxelement').is(':visible')) {
                    $('.maxelement').addClass('hide');
                    $('#VipinsiderForm').find('span').removeClass('maxelement');
                    $(this).closest('.formfield').find('.label').removeClass('erroroccured');
                }
            });
        }
        /**------- left nav----------------*/
        $con.find('.categorymenusnew li.active').closest('.category-top-level').addClass('current');
        $con.find('.category-top-level').each(function () {
            if ($(this).hasClass('current')) {
                var $this = $('.categorymenusnew li.active');
                /*
                var $notthis = $('.categorymenusnew li').filter(function () {
                    if ($(this).not('.active')) {
                        if ($(this).find('> ul').length > 0) {
                            $(this).find('> a .count-products').addClass('select_sublevelarrow');
                        }
                    }
                });
                */
                $this.find('> ul').show();
                $this.parents('ul').show();
                if ($this.find('> ul').length > 0) {
                    $this.find('> a .count-products').addClass('sublevelarrow');
                }
                $this.parents('li').not('li.active').find('> a .count-products').addClass('sublevelarrow');
                $this.find('li').each(function () {
                    if ($(this).find('> ul').length > 0) {
                        $(this).find('> a .count-products').addClass('select_sublevelarrow');
                    }
                });
            } else {
                if ($(this).find('> ul').length > 0) {
                    $(this).find('> a .count-products').addClass('select_sublevelarrow');
                }
            }
        });
        /*$('textarea[data-character-limit]').each(function(){
            charcount($(this));
            // trigger the keydown event so that any existing character data is calculated
        }).on('keyup keypress', function(){
            charcount($(this));
        });*/
    },
    synccheckoutH: function synccheckoutH() {
        if ($('.pt_checkout').length > 0) {
            $('.item-cart-scrollbar').removeAttr('style');
            $('.pt_checkout .summary-section .slimScrollDiv').removeAttr('style');
            $('.item-cart-scrollbar').removeClass('scrollbar-active');
            $('.pt_checkout  .ajax-cartsummary').find('.summary-carttable').removeClass('scrollbar-is-active');
            $('.item-cart-scrollbar').slimScroll({ destroy: true });
            var checkoutLeftH = $('.pt_checkout .checkout_cont').height(),
                summaryH = $('.pt_checkout .summary-section').height(),
                newsummaryH = $('.pt_checkout  .new-summery-cart').not('.mobile-view').height();

            var newHeightRight = summaryH + newsummaryH;
            if (newHeightRight >= checkoutLeftH) {
                var summaryHeight = checkoutLeftH - newsummaryH;
                var summaryHeightRightBottom = summaryHeight - 99;
                $('.pt_checkout .summary-section .slimScrollDiv').css({ 'height': summaryHeightRightBottom });
                $('.item-cart-scrollbar').addClass('scrollbar-active').css({ 'height': summaryHeightRightBottom });
                $('.item-cart-scrollbar').slimScroll({
                    railVisible: true,
                    color: '#a0a0a0',
                    alwaysVisible: true
                });
                $('.pt_checkout  .ajax-cartsummary').find('.summary-carttable').addClass('scrollbar-is-active');
            } else {
                $('.item-cart-scrollbar').css({ 'height': 'auto' });
                $('.pt_checkout .summary-section .slimScrollDiv').css({ 'height': 'auto', 'overflow-y': 'auto' });
                $('.item-cart-scrollbar').removeClass('scrollbar-active');
                $('.pt_checkout  .ajax-cartsummary').find('.summary-carttable').removeClass('scrollbar-is-active');
                $('.item-cart-scrollbar').slimScroll({ destroy: true });
            }
        }
    }
};
module.exports = uievents;

},{"./util":63}],63:[function(require,module,exports){
'use strict';

var _ = require('lodash');
var cardregex = {
    mastercard: /^5[1-5][0-9]{2,14}$/,
    visa: /^4[0-9]{3,15}$/,
    amex: /^3[47]([0-9]{2,13})$/,
    discover: /^6(?:011[0-9]{0,12}|5[0-9]{2,14})$/
};
var util = {
    /**
     * @function
     * @description appends the parameter with the given name and value to the given url and returns the changed url
     * @param {String} url the url to which the parameter will be added
     * @param {String} name the name of the parameter
     * @param {String} value the value of the parameter
     */
    appendParamToURL: function appendParamToURL(url, name, value) {
        // quit if the param already exists
        if (url.indexOf(name + '=') !== -1) {
            return url;
        }
        var separator = url.indexOf('?') !== -1 ? '&' : '?';
        return url + separator + name + '=' + encodeURIComponent(value);
    },
    hiddenData: function hiddenData() {
        jQuery.each(jQuery('.hidden'), function () {
            var hiddenStr = jQuery(this).html();

            if (hiddenStr === '') {
                return;
            }

            // see if its a json string
            if (jQuery(this).hasClass('json')) {
                // try to parse it as a json
                try {
                    hiddenStr = window.eval('(' + hiddenStr + ')');
                } catch (e) {
                    // Do Nothing
                }
            }

            jQuery(this).prev().data('data', hiddenStr);

            jQuery(this).remove();
        });
    },

    /**** Read cookieee  *****/
    readCookie: function readCookie(name) {
        var nameEQ = name + '=';
        var ca = document.cookie.split(';');
        for (var i = 0; i < ca.length; i++) {
            var c = ca[i];
            while (c.charAt(0) == ' ') {
                c = c.substring(1, c.length);
            }if (c.indexOf(nameEQ) == 0) {
                return c.substring(nameEQ.length, c.length);
            }
        }
        return null;
    },

    /***  Read cookie ***/
    /**
     * @function
     * @description appends the parameters to the given url and returns the changed url
     * @param {String} url the url to which the parameters will be added
     * @param {Object} params
     */
    appendParamsToUrl: function appendParamsToUrl(url, params) {
        var _url = url;
        _.each(params, function (value, name) {
            _url = this.appendParamToURL(_url, name, value);
        }.bind(this));
        return _url;
    },

    /**
     * @function
     * @description remove the parameter and its value from the given url and returns the changed url
     * @param {String} url the url from which the parameter will be removed
     * @param {String} name the name of parameter that will be removed from url
     */
    removeParamFromURL: function removeParamFromURL(url, name) {
        if (url.indexOf('?') === -1 || url.indexOf(name + '=') === -1) {
            return url;
        }
        var hash;
        var params;
        var domain = url.split('?')[0];
        var paramUrl = url.split('?')[1];
        var newParams = [];
        // if there is a hash at the end, store the hash
        if (paramUrl.indexOf('#') > -1) {
            hash = paramUrl.split('#')[1] || '';
            paramUrl = paramUrl.split('#')[0];
        }
        params = paramUrl.split('&');
        for (var i = 0; i < params.length; i++) {
            // put back param to newParams array if it is not the one to be removed
            if (params[i].split('=')[0] !== name) {
                newParams.push(params[i]);
            }
        }
        return domain + '?' + newParams.join('&') + (hash ? '#' + hash : '');
    },

    /**
     * @function
     * @description extract the query string from URL
     * @param {String} url the url to extra query string from
     **/
    getQueryString: function getQueryString(url) {
        var qs;
        if (!_.isString(url)) {
            return;
        }
        var a = document.createElement('a');
        a.href = url;
        if (a.search) {
            qs = a.search.substr(1); // remove the leading ?
        }
        return qs;
    },
    /**
     * @function
     * @description
     * @param {String}
     * @param {String}
     */
    elementInViewport: function elementInViewport(el, offsetToTop) {
        var top = el.offsetTop,
            left = el.offsetLeft,
            width = el.offsetWidth,
            height = el.offsetHeight;

        while (el.offsetParent) {
            el = el.offsetParent;
            top += el.offsetTop;
            left += el.offsetLeft;
        }

        if (typeof offsetToTop !== 'undefined') {
            top -= offsetToTop;
        }

        if (window.pageXOffset !== null) {
            return top < window.pageYOffset + window.innerHeight && left < window.pageXOffset + window.innerWidth && top + height > window.pageYOffset && left + width > window.pageXOffset;
        }

        if (document.compatMode === 'CSS1Compat') {
            return top < window.document.documentElement.scrollTop + window.document.documentElement.clientHeight && left < window.document.documentElement.scrollLeft + window.document.documentElement.clientWidth && top + height > window.document.documentElement.scrollTop && left + width > window.document.documentElement.scrollLeft;
        }
    },

    /**
     * @function
     * @description Appends the parameter 'format=ajax' to a given path
     * @param {String} path the relative path
     */
    ajaxUrl: function ajaxUrl(path) {
        return this.appendParamToURL(path, 'format', 'ajax');
    },

    /**
     * @function
     * @description
     * @param {String} url
     */
    toAbsoluteUrl: function toAbsoluteUrl(url) {
        if (url.indexOf('http') !== 0 && url.charAt(0) !== '/') {
            url = '/' + url;
        }
        return url;
    },
    /**
     * @function
     * @description Loads css dynamically from given urls
     * @param {Array} urls Array of urls from which css will be dynamically loaded.
     */
    loadDynamicCss: function loadDynamicCss(urls) {
        var i,
            len = urls.length;
        for (i = 0; i < len; i++) {
            this.loadedCssFiles.push(this.loadCssFile(urls[i]));
        }
    },

    /**
     * @function
     * @description Loads css file dynamically from given url
     * @param {String} url The url from which css file will be dynamically loaded.
     */
    loadCssFile: function loadCssFile(url) {
        return $('<link/>').appendTo($('head')).attr({
            type: 'text/css',
            rel: 'stylesheet'
        }).attr('href', url); // for i.e. <9, href must be added after link has been appended to head
    },
    // array to keep track of the dynamically loaded CSS files
    loadedCssFiles: [],

    /**
     * @function
     * @description Removes all css files which were dynamically loaded
     */
    clearDynamicCss: function clearDynamicCss() {
        var i = this.loadedCssFiles.length;
        while (0 > i--) {
            $(this.loadedCssFiles[i]).remove();
        }
        this.loadedCssFiles = [];
    },
    /**
     * @function
     * @description Extracts all parameters from a given query string into an object
     * @param {String} qs The query string from which the parameters will be extracted
     */
    getQueryStringParams: function getQueryStringParams(qs) {
        if (!qs || qs.length === 0) {
            return {};
        }
        var params = {},
            unescapedQS = decodeURIComponent(qs);
        // Use the String::replace method to iterate over each
        // name-value pair in the string.
        unescapedQS.replace(new RegExp('([^?=&]+)(=([^&]*))?', 'g'), function ($0, $1, $2, $3) {
            params[$1] = $3;
        });
        return params;
    },

    fillAddressFields: function fillAddressFields(address, $form) {
        for (var field in address) {
            if (field === 'ID' || field === 'UUID' || field === 'key') {
                continue;
            }
            // if the key in address object ends with 'Code', remove that suffix
            // keys that ends with 'Code' are postalCode, stateCode and countryCode
            $form.find('[name$="' + field.replace('Code', '') + '"]').val(address[field]);
            // update the state fields
            if (field === 'countryCode') {
                $form.find('[name$="country"]').trigger('change');
                // retrigger state selection after country has changed
                // this results in duplication of the state code, but is a necessary evil
                // for now because sometimes countryCode comes after stateCode
                $form.find('[name$="state"]').val(address.stateCode);
            }
        }
    },
    /**
     * @function
     * @description Updates the number of the remaining character
     * based on the character limit in a text area
     */
    limitCharacters: function limitCharacters() {
        $('form').find('textarea[data-character-limit]').each(function () {
            var characterLimit = $(this).data('character-limit');
            var charCountHtml = String.format(Resources.CHAR_LIMIT_MSG, '<span class="char-remain-count">' + characterLimit + '</span>', '<span class="char-allowed-count">' + characterLimit + '</span>');
            var charCountContainer = $(this).next('div.char-count');
            if (charCountContainer.length === 0) {
                charCountContainer = $('<div class="char-count"/>').insertAfter($(this));
            }
            charCountContainer.html(charCountHtml);
            // trigger the keydown event so that any existing character data is calculated
            $(this).change();
        });
    },
    trimPrefix: function trimPrefix(str, prefix) {
        return str.substring(prefix.length);
    },
    cardtype: {
        init: function init() {
            if ($('#paymentmethods').find('.creditCard-number').length > 0) {
                $('#paymentmethods').find('.creditCard-number').bind('keypress keyup', function () {
                    if ($(this).val().length) {
                        $('.carderror.error').hide();
                    }
                    if ($(this).val().length < 4) {
                        $('.cardtypeimg > div').hide();
                    }
                });
                $('.creditCard-number, .creditcard_cvn').on('keypress', function (e) {
                    e = e ? e : window.event;
                    var charCode = e.which ? e.which : e.keyCode;
                    if (charCode > 31 && (charCode < 48 || charCode > 57)) {
                        return false;
                    }
                    return true;
                });
                $('#paymentmethods').find('.creditCard-number').blur(function () {
                    var val = $.trim($(this).val());
                    //var regex = /^[a-zA-Z]+$/;
                    var errorspan = $(this).closest('.formfield').find('span.carderror');
                    if (!val) {
                        errorspan.hide();
                        return;
                    }
                    if (val.length) {
                        if ($('.carderror.error').length == 0) {
                            $(this).closest('.formfield').append('<span class="carderror error">Not a valid Credit Card Number, please try again.</span>');
                        }
                        $('.carderror.error').hide();
                        var cardTypeval = util.validatecardtype(val);
                        if (cardTypeval != 'Error') {
                            errorspan.hide();
                            $('#paymentmethods').find('select[name$="_paymentMethods_creditCard_type"]').val(cardTypeval);
                            $('.cardtypeimg > div').hide();
                            $('.cardtypeimg > div.' + cardTypeval).show();

                            if (cardTypeval == 'MasterCard' || cardTypeval == 'Visa' || cardTypeval == 'Discover') {
                                if (val.length < 16) {
                                    $('.carderror.error').show();
                                    $(this).addClass('errorclient');
                                }
                            } else if (cardTypeval == 'Amex') {
                                if (val.length < 15) {
                                    $('.carderror.error').show();
                                    $(this).addClass('errorclient');
                                }
                            } else {
                                $('.carderror.error').hide();
                                $(this).removeClass('errorclient');
                            }
                        } else {
                            if ($(this).val().indexOf('*') == -1) {
                                if (val.length < 16) {
                                    $('.carderror.error').show();
                                    $(this).addClass('errorclient');
                                    $('.cardtypeimg > div').hide();
                                }
                            }
                        }
                    }
                    if ($('#paymentmethods').find('.creditCard-number').val().length < 4) {
                        $('.cardtypeimg > div').hide();
                    }
                });
            }
        }

    },
    validatecardtype: function validatecardtype(val) {
        var result = ' ',
            carNo = val;

        if (cardregex.mastercard.test(carNo)) {
            // first check for MasterCard
            result = 'MasterCard';
        } else if (cardregex.visa.test(carNo)) {
            // then check for Visa
            result = 'Visa';
        } else if (cardregex.amex.test(carNo)) {
            // then check for AmEx
            result = 'Amex';
        } else if (cardregex.discover.test(carNo)) {
            result = 'Discover';
        } else {
            result = 'Error';
        }
        return result;
    },
    /**
     * @function
     * @description Binds the onclick-event to a delete button on a given container,
     * which opens a confirmation box with a given message
     * @param {String} container The name of element to which the function will be bind
     * @param {String} message The message the will be shown upon a click
     */
    setDeleteConfirmation: function setDeleteConfirmation(container, message) {
        $(container).on('click', '.delete', function () {
            return window.confirm(message);
        });
    },
    /**
     * @function
     * @description Scrolls a browser window to a given x point
     * @param {String} The x coordinate
     */
    scrollBrowser: function scrollBrowser(xLocation) {
        $('html, body').animate({
            scrollTop: xLocation
        }, 500);
    },

    isMobile: function isMobile() {
        var mobileAgentHash = ['mobile', 'tablet', 'phone', 'ipad', 'ipod', 'android', 'blackberry', 'windows ce', 'opera mini', 'palm'];
        var idx = 0;
        var isMobile = false;
        var userAgent = navigator.userAgent.toLowerCase();

        while (mobileAgentHash[idx] && !isMobile) {
            isMobile = userAgent.indexOf(mobileAgentHash[idx]) >= 0;
            idx++;
        }
        return isMobile;
    }
};

module.exports = util;

},{"lodash":5}],64:[function(require,module,exports){
'use strict';

var naPhone = /^\(?([2-9][0-8][0-9])\)?[\-\. ]?([2-9][0-9]{2})[\-\. ]?([0-9]{4})(\s*x[0-9]+)?$/;
var regex = {
    phone: {
        us: naPhone,
        ca: naPhone,
        fr: /^0[1-6]{1}(([0-9]{2}){4})|((\s[0-9]{2}){4})|((-[0-9]{2}){4})$/,
        it: /^(([0-9]{2,4})([-\s\/]{0,1})([0-9]{4,8}))?$/,
        jp: /^(0\d{1,4}- ?)?\d{1,4}-\d{4}$/,
        cn: /.*/,
        gb: /^((\(?0\d{4}\)?\s?\d{3}\s?\d{3})|(\(?0\d{3}\)?\s?\d{3}\s?\d{4})|(\(?0\d{2}\)?\s?\d{4}\s?\d{4}))(\s?\#(\d{4}|\d{3}))?$/
    },
    postal: {
        us: /^\d{5}(-\d{4})?$/,
        ca: /^[ABCEGHJKLMNPRSTVXY]{1}\d{1}[A-Z]{1} *\d{1}[A-Z]{1}\d{1}$/,
        fr: /^(F-)?((2[A|B])|[0-9]{2})[0-9]{3}$/,
        it: /^([0-9]){5}$/,
        jp: /^([0-9]){3}[-]([0-9]){4}$/,
        cn: /^([0-9]){6}$/,
        gb: /^([A-PR-UWYZ0-9][A-HK-Y0-9][AEHMNPRTVXY0-9]?[ABEHMNPRVWXY0-9]? {1,2}[0-9][ABD-HJLN-UW-Z]{2}|GIR 0AA)$/
    },
    notCC: /^(?!(([0-9 -]){13,19})).*$/
};
// global form validator settings
var settings = {
    errorClass: 'errorclient',
    errorElement: 'span',
    focusInvalid: false,
    onkeyup: function onkeyup(element) {
        if (!this.checkable(element)) {
            $(element).addClass('stopKeypress');
            if ($(element).val().length > 0) {
                this.element(element);
            }
            if ($('.account-logs').length > 0 || $('.new-register').length > 0 || $('.wish-logs').length > 0 || $('.forgot_old').length > 0 || $('.createan-account').length > 0 || $('.promo-sec').length > 0 || $('.headercustomerinfo').length > 0 || $('.ui-login').length > 0 || $('.vipInsider-dlg.ui-dialog ').length > 0 || $('.passwordreset').length > 0) {
                $(element).closest('.formfield').find('.label span').removeClass('inputlabel');
                $('.promo-sec').find('.couponinput').removeClass('inputlabel');
            }
        }
    },
    //focusCleanup: false,
    //onfocusout: false,

    onfocusout: function onfocusout(element) {
        if (!this.checkable(element)) {
            $(element).removeClass('stopKeypress');
            this.element(element);

            if ($('.account-logs').length > 0 || $('.new-register').length > 0 || $('.wish-logs').length > 0 || $('.forgot_old').length > 0 || $('.passwordreset').length > 0 || $('.vipInsider-dlg.ui-dialog ').length > 0 || $('.promo-sec').length > 0 || $('.pt_checkout').length > 0) {
                if ($(element).hasClass('errorclient')) {
                    $(element).closest('.form-row').addClass('inputlabel');
                    $(element).closest('.formfield').addClass('inputlabel');
                    $(element).closest('.formfield').find('.label span').addClass('inputlabel');
                    $(element).closest('.form-row').find('.label span').addClass('inputlabel');
                    $(element).closest('.formfield').find('.logerror , .existing_register').hide();
                } else {
                    $(element).closest('.form-row').removeClass('inputlabel');
                    $(element).closest('.formfield').removeClass('inputlabel');
                    $(element).closest('.form-row').find('.label span').removeClass('inputlabel');
                    $(element).closest('.formfield').find('.label span').removeClass('inputlabel');
                    $(element).closest('.formfield').find('.logerror , .existing_register').hide();
                }
            }
            /*** if($(element).closest('.ui-dialog').hasClass('vipInsider-dlg')) {
            if($(element).hasClass("errorclient")) {
            if($(element).closest(".formfield").find(".label span.errorclient").is(':visible')){
            $(element).closest(".form-row").addClass("erroroccured");
            }else {
            $(element).closest(".form-row").removeClass("erroroccured");
            }
            }
            } ***/
        }
    },
    errorPlacement: function errorPlacement(error, element) {
        if ($(element).hasClass('errorclient')) {
            $(element).closest('.form-row').addClass('inputlabel');
            $(element).closest('.formfield').addClass('inputlabel');
            $(element).closest('.formfield').find('.label span').addClass('inputlabel');
            $(element).closest('.form-row').find('.label span').addClass('inputlabel');
            $(element).closest('.formfield').find('.logerror , .existing_register').hide();
        } else {
            $(element).closest('.form-row').removeClass('inputlabel');
            $(element).closest('.formfield').removeClass('inputlabel');
            $(element).closest('.form-row').find('.label span').removeClass('inputlabel');
            $(element).closest('.formfield').find('.label span').removeClass('inputlabel');
            $(element).closest('.formfield').find('.logerror , .existing_register').hide();
        }
        if ($(element).hasClass('emailfooter')) {
            $(element).closest('#emailfooter').before(error);
        } else if ($(element).closest('.ui-dialog').hasClass('vipInsider-dlg')) {
            $(element).closest('.formfield').find('.label').append(error);
            if ($(element).closest('.formfield').find('.label span.errorclient').is(':visible') && !$(element).closest('.formfield').find('.label').hasClass('erroroccured')) {
                $(element).closest('.formfield').find('.label').addClass('erroroccured');
            } else {
                $(element).closest('.formfield').find('.label').removeClass('erroroccured');
            }
        } else {
            if ($('.passwordreset').find('button.send.clickedButton').length > 0) {
                $(element).after(error);
                $('.passwordreset').find('button.send.clickedButton').removeClass('clickedButton');
            } else {
                if ($('.header-forgot-pwd.accountcontent').css('display') == 'none') {
                    $(element).after(error);
                } else if ($('.header-forgot-pwd.accountcontent').css('display') == 'block') {
                    // Do Nothing
                } else {
                    if ($(element).hasClass('custom-select-wrap')) {
                        $(element).closest('.field-wrapper').after(error);
                    } else {
                        $(element).after(error);
                    }
                }
            }
        }
    }
};

//firstname validation
var ctrl = false;
var selectText = false;
$('input[attributemaxlength],textarea[attributemaxlength]').on('keydown', function (e) {
    //var j;
    if ($(this).hasClass('firstname')) {
        //j = document.getElementById('dwfrm_profile_customer_firstname');
    } else if ($(this).hasClass('lastname')) {
        //j = document.getElementById('dwfrm_profile_customer_lastname');
    }
    if (e.keyCode == 17) {
        ctrl = true;
    }

    if ($(this).hasClass('vip-textarea') && e.keyCode != 8 && e.keyCode != 46 && !selectText || (e.keyCode >= 48 && e.keyCode <= 90 || e.keyCode >= 96 && e.keyCode <= 105) && !ctrl && !selectText) {
        var currObj = $(this);
        var maxchars = $(this).attr('maxlength');
        var tlength = $(this).val().length;
        if (tlength >= maxchars) {
            $(this).val($(this).val().substring(0, maxchars));
            if ($(currObj).closest('.field-wrapper').find('.max-length-error').length == 0 && $(currObj).closest('.formfield').find('.max-length-error').length == 0) {
                var error = '<div class=\'max-length-error\'> This field is limited to 30 characters.</div>';
                if ($(currObj).hasClass('vip-textarea')) {
                    error = '<div class=\'max-length-error\'> -This field is limited to 1200 characters.</div>';
                }
                if ($(currObj).hasClass('vip-textarea1')) {
                    error = '<div class=\'max-length-error\'> -This field is limited to 30 characters.</div>';
                } else if ($(currObj).closest('form').hasClass('vipfieldstaff')) {
                    error = '<div class=\'max-length-error\'> -This field is limited to 30 characters.</div>';
                }

                if ($(this).closest('form').hasClass('vipfieldstaff') > 0) {
                    $(this).closest('.formfield').find('.label').append(error);
                } else {
                    $(this).closest('.field-wrapper').append(error);
                }

                $(this).closest('.formfield').find('.label span').addClass('countlabelerror');
                $(this).addClass('counterror');
            } else if (e.keyCode != 9) {
                if ($(this).closest('form').hasClass('vipfieldstaff') > 0) {
                    $(this).closest('.formfield').find('.label').find('.max-length-error').removeClass('hide');
                } else {
                    $(this).closest('.field-wrapper').find('.max-length-error').removeClass('hide');
                }
                $(this).addClass('counterror');
                $(this).closest('.formfield').find('.label span').addClass('countlabelerror');
                return false;
            }
        } else {
            $(this).removeClass('counterror');
            $('.max-length-error').remove();
            $(this).closest('.formfield').find('.label span').removeClass('countlabelerror');
        }
    } else if (e.keyCode >= 48 && e.keyCode <= 57 || e.keyCode >= 96 && e.keyCode <= 105) {
        if ($(this).hasClass('vipinsideremail')) {
            return true;
        } else {
            return false;
        }
    } else {
        $(this).closest('.formfield').find('.max-length-error').remove();
        $(this).removeClass('counterror');
        $(this).closest('.formfield').find('.label span').removeClass('countlabelerror');
        selectText = false;
    }
}).on('keyup', function () {
    ctrl = false;
    //var currObj = $(this);
    var maxchars = $(this).attr('maxlength');
    var tlength = $(this).val().length;
    if (tlength < maxchars) {
        $(this).removeClass('counterror');
        $('.max-length-error').remove();
        $(this).closest('.formfield').find('.label span').removeClass('countlabelerror');
    }
}).on('select', function () {
    selectText = true;
    $(this).removeClass('counterror');
    $(this).closest('.formfield').find('.label span').removeClass('countlabelerror');
});
$('input[attributemaxlength],textarea[attributemaxlength]').on('focusout', function () {
    $(this).removeClass('counterror');
    $(this).closest('.formfield').find('.label span').removeClass('countlabelerror');
    $(this).closest('.field-wrapper').find('.max-length-error').remove();
    $(this).closest('.formfield').find('.max-length-error').remove();
    //$(this).closest('.formfield').find('.label span').removeClass('inputlabel');
});
if ($('.loginfailedclass:visible').length > 0) {
    $('.registration .formfield_email').find('.labeltext').removeClass('inputlabel');
    $('.registration .formfield_email').find('.requiredindicator').removeClass('inputlabel');
    $('.registration .formfield_email').find('.requiredindicator').removeClass('inputlabel');
    $('.registration .formfield_email').find('.existing_register').hide();
}

//$("body").on('change input',".accountemail , .guestemail, .emailCMrapala, .guestemailcon, .vipinsideremail, .emailfooter, .accountemailconf, .accountEmailConfirmation, .resetemail, .accemailcon, .loggedemail", function (e) {
//	//$(this).val(this.value.replace(/[\s]/g, ''));
//
//});
$('.accountemail , .guestemail, .emailCMrapala, .guestemailcon, .vipinsideremail, .emailfooter, .accountemailconf, .accountEmailConfirmation, .resetemail, .accemailcon, .loggedemail').on({
    keydown: function keydown(e) {
        if (e.which === 32) {
            return false;
        }
    },
    change: function change() {
        this.value = this.value.replace(/\s/g, '');
    }
});
//override default required field message
$.validator.messages.required = function ($1, ele) {
    var requiredText = $(ele).closest('.form-row').attr('data-required-text');
    return requiredText || '';
};

/**
 * Add phone validation method to $ validation plugin. Text
 * fields must have 'phone' css class to be validated as phone
 * phoneUS is copied from
 * http://docs.$.com/Plugins/Validation/CustomMethods/phoneUS
 */
$.validator.addMethod('phone', function (phoneNumber, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        // find out the country code
        var data = $(element).data('data');
        var country = data && data.country && data.country != '' ? data.country : 'US'; // default to US phone
        // validation

        // preserve this instance
        var that = this;

        // country specific phone validation handlers
        //var phoneUS, phoneCA;

        var phone = function phone() {
            phoneNumber = phoneNumber.replace(/\s+/g, '');
            return that.optional(element) || phoneNumber.length > 9 && phoneNumber.match(/^(\d{10}|\d{3}(-\d{3})(-\d{4})$|^\d{3}(\s\d{3})?(\s\d{4})?)$/);
        };
        //phoneUS = phoneCA;
        //window.eval('var phoneHandler = (typeof phone' + country + ' != \'undefined\') ? phone' + country + ': null;');

        // call the country specific phone validation
        // handler
        return country === 'US' || country === 'CA' ? phone() : true;
    }
}, Resources.INVALID_PHONE);

$.validator.addMethod('phoneCDUS', function (phoneNumber, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        phoneNumber = phoneNumber.replace(/\s+/g, '');
        return this.optional(element) || phoneNumber.length > 9 && phoneNumber.match(/^\(?[\d]{3}\)?[\s-]?[\d]{3}[\s-]?[\d]{4}$/);
    }
}, 'Please specify a valid phone number');

$.validator.addMethod('phone', function (phoneNumber, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        phoneNumber = phoneNumber.replace(/\s+/g, '');
        return this.optional(element) || phoneNumber.length > 9 && phoneNumber.match(/^\(?[\d]{3}\)?[\s-]?[\d]{3}[\s-]?[\d]{4}$/);
    }
}, 'Please specify a valid phone number');

$.validator.addMethod('phoneUK', function (phoneNumber, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        return this.optional(element) || phoneNumber.length > 9 && phoneNumber.match(/^(\(?(0|\+44)[1-9]{1}\d{1,4}?\)?\s?\d{3,4}\s?\d{3,4})$/);
    }
}, 'Please specify a valid phone number');

$.validator.addMethod('postal', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        if (value == '') {
            return true;
        }
        return (/^\d{5}((-\d{4})|(\d{4}))?$/.test(value)
        );
    }
}, 'Please enter your 5 or 9 digit Zip Code with or without a hyphen');

$.validator.addMethod('zipCodeCustom', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        if (value == '') {
            return true;
        }
        return (/^\d{5}((-\d{4})|(\d{4}))?$/.test(value)
        );
    }
}, '- Please enter a valid ZipCode');

$.validator.addMethod('phoneCustom', function (phoneNumber, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        phoneNumber = phoneNumber.replace(/\s+/g, '');
        return this.optional(element) || phoneNumber.length > 9 && phoneNumber.match(/^\(?[\d]{3}\)?[\s-]?[\d]{3}[\s-]?[\d]{4}$/);
    }
}, '- Please specify a valid phone number');

$.validator.addMethod('emailCM', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        if (value == '') {
            return true;
        }
        return (/^[\w-\.]{1,}\@([\da-zA-Z-]{1,}\.){1,}[\da-zA-Z-]{2,4}$/.test(value)
        );
    }
}, 'Please specify a valid Email Id');

var customErrormsg = '';
var customError = function customError() {
    return customErrormsg;
};

$.validator.addMethod('emailCMrapala', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        var vIndex = value.length;
        var fchar = value.substring(0, 1);
        var lchar = value.substring(vIndex - 1);
        if (value.indexOf('@') != -1) {
            var splitval = value.split('@');
            fchar = splitval[0].substring(0, 1);
            lchar = splitval[0].substring(splitval[0].length - 1);
        }
        var fcharS = /^[a-zA-Z0-9]$/.test(fchar);
        var lcharS = /^[a-zA-Z0-9]$/.test(lchar);
        var emailCheck = /^[-0-9a-zA-Z.-_]+@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(value);
        if (fcharS == false || lcharS == false) {
            customErrormsg = '-Something doesn\'t look right, please try again.';
            return false;
        } else if (emailCheck == false) {
            customErrormsg = 'Oops - the email entered is not in a valid format.';
            return false;
        } else {
            return true;
        }
    }
}, customError);

$.validator.addMethod('creditcard_name', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        if (value == '') {
            return true;
        }
        return (/^[a-zA-Z ]+$/.test(value)
        );
    }
}, 'Only letters are valid for this field');

$.validator.addMethod('creditcard_cvn', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {

        var cardtype = $('.select-creditCard-type').val();
        var cvvLength = 3;
        if (value == '') {
            return true;
        }
        if (cardtype == 'Amex') {
            cvvLength = 4;
        }
        if (value.length != cvvLength) {
            $('.errorKeypress').remove();
            return false;
        } else {
            return true;
        }
    }
}, 'Please enter a valid Security Code for the Credit Card entered');

$.validator.addMethod('guestemailcon', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else if (!$('.checkoutasguestbutton').is(':visible')) {
        var vIndex = value.length;
        var fchar = value.substring(0, 1);
        var lchar = value.substring(vIndex - 1);
        if (value.indexOf('@') != -1) {
            var splitval = value.split('@');
            fchar = splitval[0].substring(0, 1);
            lchar = splitval[0].substring(splitval[0].length - 1);
        }
        var fcharS = /^[a-zA-Z0-9]$/.test(fchar);
        var lcharS = /^[a-zA-Z0-9]$/.test(lchar);
        var emailCheck = /^[-0-9a-zA-Z.-_]+@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(value);
        var emailVal = $(element).closest('.formfield').prev('.formfield').find('.guestemail').val();
        if (fcharS == false || lcharS == false) {
            customErrormsg = 'Something doesn\'t look right, please try again.';
            return false;
        } else if (emailCheck == false) {
            customErrormsg = 'Oops - the email entered is not in a valid format.';
            return false;
        } else if (emailVal != value) {
            customErrormsg = 'Please make sure emails match.';
            return false;
        } else {
            return true;
        }
    }
}, customError);

$.validator.addMethod('guestemail', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else if (!$('.checkoutasguestbutton').is(':visible')) {
        var vIndex = value.length;
        var fchar = value.substring(0, 1);
        var lchar = value.substring(vIndex - 1);
        if (value.indexOf('@') != -1) {
            var splitval = value.split('@');
            fchar = splitval[0].substring(0, 1);
            lchar = splitval[0].substring(splitval[0].length - 1);
        }

        var fcharS = /^[a-zA-Z0-9]$/.test(fchar);
        var lcharS = /^[a-zA-Z0-9]$/.test(lchar);
        var emailCheck = /^[-0-9a-zA-Z.-_]+@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(value);
        if (fcharS == false || lcharS == false) {
            customErrormsg = 'Something doesn\'t look right, please try again.';
            return false;
        } else if (emailCheck == false) {
            customErrormsg = 'Oops - the email entered is not in a valid format.';
            return false;
        } else {
            return true;
        }
    }
}, customError);

$.validator.addMethod('loggedemail', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else if (!$('.signintomyaccountbutton').is(':visible')) {
        var vIndex = value.length;
        var fchar = value.substring(0, 1);
        var lchar = value.substring(vIndex - 1);
        if (value.indexOf('@') != -1) {
            var splitval = value.split('@');
            fchar = splitval[0].substring(0, 1);
            lchar = splitval[0].substring(splitval[0].length - 1);
        }
        var fcharS = /^[a-zA-Z0-9]$/.test(fchar);
        var lcharS = /^[a-zA-Z0-9]$/.test(lchar);
        var emailCheck = /^[-0-9a-zA-Z.-_]+@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(value);
        //var emailVal = $(element).closest('.formfield').prev('.formfield').find('.guestemail').val();
        if (fcharS == false || lcharS == false) {
            customErrormsg = 'Something doesn\'t look right, please try again.';
            return false;
        } else if (emailCheck == false) {
            customErrormsg = 'Oops - the email entered is not in a valid format.';
            return false;
        } else {
            return true;
        }
    }
}, customError);

$.validator.addMethod('accemailcon', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else if (!$('.createanaccountbutton').is(':visible')) {
        var vIndex = value.length;
        var fchar = value.substring(0, 1);
        var lchar = value.substring(vIndex - 1);
        if (value.indexOf('@') != -1) {
            var splitval = value.split('@');
            fchar = splitval[0].substring(0, 1);
            lchar = splitval[0].substring(splitval[0].length - 1);
        }
        var fcharS = /^[a-zA-Z0-9]$/.test(fchar);
        var lcharS = /^[a-zA-Z0-9]$/.test(lchar);
        var emailCheck = /^[-0-9a-zA-Z.-_]+@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(value);
        var emailVal = $(element).closest('.formfield').prev('.formfield').find('.accemail').val();
        if (fcharS == false || lcharS == false) {
            customErrormsg = 'Something doesn\'t look right, please try again.';
            return false;
        } else if (emailCheck == false) {
            customErrormsg = 'Oops - the email entered is not in a valid format.';
            return false;
        } else if (emailVal != value) {
            customErrormsg = 'Please make sure emails match.';
            return false;
        } else {
            return true;
        }
    }
}, customError);

$.validator.addMethod('a-zA-Z0-9', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else if (!$('.createanaccountbutton').is(':visible')) {
        var vIndex = value.length;
        var fchar = value.substring(0, 1);
        var lchar = value.substring(vIndex - 1);
        if (value.indexOf('@') != -1) {
            var splitval = value.split('@');
            fchar = splitval[0].substring(0, 1);
            lchar = splitval[0].substring(splitval[0].length - 1);
        }

        var fcharS = /^[a-zA-Z]$/.test(fchar);
        var lcharS = /^[a-zA-Z0-9]$/.test(lchar);
        var emailCheck = /^[-0-9a-zA-Z.-_]+@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(value);
        //var emailVal = $(element).closest('.formfield').prev('.formfield').find('.email').val();

        if (fcharS == false || lcharS == false) {
            customErrormsg = 'Something doesn\'t look right, please try again.';
            return false;
        } else if (emailCheck == false) {
            customErrormsg = 'Oops - the email entered is not in a valid format.';
            return false;
        } else {
            return true;
        }
    }
}, customError);

$.validator.addMethod('cm_password', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else if (!$('.createanaccountbutton').is(':visible') && $(element).hasClass('required')) {
        var passwordVal = $('.c_password').val();
        if ($(element).closest('form').length > 0 && $(element).closest('form').attr('id') == 'RegistrationForm') {
            passwordVal = $(element).closest('form').find('.c_password').val();
        }

        if (value.length < 5) {
            customErrormsg = 'Passwords must contain a minimum of 5 characters and are CaSe SeNsItIvE.';
            return false;
        } else if (passwordVal != value) {
            customErrormsg = 'Oops - your passwords do not match.';
            return false;
        } else {
            return true;
        }
    } else {
        return true;
    }
}, customError);

$.validator.addMethod('confirm_password', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else if ($(element).hasClass('required')) {
        var passwordVal = $(element).closest('form').find('.c_password').val();
        if (value.length < 5) {
            customErrormsg = 'Passwords must contain a minimum of 5 characters and are CaSe SeNsItIvE.';
            return false;
        } else if (passwordVal != value) {
            customErrormsg = 'Oops - your passwords do not match.';
            return false;
        } else {
            return true;
        }
    } else {
        return true;
    }
}, customError);

$.validator.addMethod('c_password', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else if ($(element).hasClass('required') && value.length < 5) {
        customErrormsg = 'Passwords must contain a minimum of 5 characters and are CaSe SeNsItIvE.';
        return false;
    } else {
        return true;
    }
}, customError);

$.validator.addMethod('login_password', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else if ($(element).hasClass('required') && value.length < 5) {
        customErrormsg = 'Passwords must contain a minimum of 5 characters and are CaSe SeNsItIvE.';
        return false;
    } else {
        return true;
    }
}, customError);

$.validator.addMethod('resetemail', function (value, element) {
    var vIndex = value.length;
    var fchar = value.substring(0, 1);
    var lchar = value.substring(vIndex - 1);

    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        if (value.indexOf('@') != -1) {
            var splitval = value.split('@');
            fchar = splitval[0].substring(0, 1);
            lchar = splitval[0].substring(splitval[0].length - 1);
        }
        var fcharS = /^[a-zA-Z0-9]$/.test(fchar);
        var lcharS = /^[a-zA-Z0-9]$/.test(lchar);
        var emailCheck = /^[-0-9a-zA-Z.-_]+@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(value);
        if (fcharS == false || lcharS == false) {
            customErrormsg = 'Something doesn\'t look right, please try again.';
            return false;
        } else if (emailCheck == false) {
            customErrormsg = 'Oops - the email entered is not in a valid format.';

            return false;
        } else {
            return true;
        }
    }
}, customError);

$.validator.addMethod('accountemail', function (value, element) {
    var vIndex = value.length;
    var fchar = value.substring(0, 1);
    var lchar = value.substring(vIndex - 1);
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        if (value.indexOf('@') != -1) {
            var splitval = value.split('@');
            fchar = splitval[0].substring(0, 1);
            lchar = splitval[0].substring(splitval[0].length - 1);
        }
        var fcharS = /^[a-zA-Z0-9]$/.test(fchar);
        var lcharS = /^[a-zA-Z0-9]$/.test(lchar);
        var emailCheck = /^[-0-9a-zA-Z.-_]+@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(value);
        if (fcharS == false || lcharS == false) {
            customErrormsg = 'Something doesn\'t look right, please try again.';
            return false;
        } else if (emailCheck == false) {
            customErrormsg = 'Oops - the email entered is not in a valid format.';
            return false;
        } else {
            return true;
        }
    }
}, customError);

//email validation for vipinsider

$.validator.addMethod('vipinsideremail', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        var vIndex = value.length;
        var fchar = value.substring(0, 1);
        var lchar = value.substring(vIndex - 1);
        if (value.indexOf('@') != -1) {
            var splitval = value.split('@');
            fchar = splitval[0].substring(0, 1);
            lchar = splitval[0].substring(splitval[0].length - 1);
        }
        var fcharS = /^[a-zA-Z0-9]$/.test(fchar);
        var lcharS = /^[a-zA-Z0-9]$/.test(lchar);
        var emailCheck = /^[-0-9a-zA-Z.-_]+@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(value);
        if (fcharS == false || lcharS == false) {
            customErrormsg = '-Something doesn\'t look right, please try again.';
            return false;
        } else if (emailCheck == false) {
            customErrormsg = 'Oops - the email entered is not in a valid format.';
            return false;
        } else {
            return true;
        }
    }
}, customError);

$.validator.addMethod('emailfooter', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        var vIndex = value.length;
        if (vIndex > 0) {
            var fchar = value.substring(0, 1);
            var lchar = value.substring(vIndex - 1);
            if (value.indexOf('@') != -1) {
                var splitval = value.split('@');
                fchar = splitval[0].substring(0, 1);
                lchar = splitval[0].substring(splitval[0].length - 1);
            }
            var fcharS = /^[a-zA-Z0-9]$/.test(fchar);
            var lcharS = /^[a-zA-Z0-9]$/.test(lchar);
            var emailCheck = /^[-0-9a-zA-Z.-_]+@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(value);
            if (fcharS == false || lcharS == false) {
                customErrormsg = 'Something doesn\'t look right, please try again.';
                return false;
            } else if (emailCheck == false) {
                customErrormsg = 'Oops - the email entered is not in a valid format.';
                return false;
            } else {
                return true;
            }
        } else {
            customErrormsg = 'Please enter your email address.';
        }
    }
}, customError);

$.validator.addMethod('accountemailconf', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        var vIndex = value.length;
        var fchar = value.substring(0, 1);
        var lchar = value.substring(vIndex - 1);
        if (value.indexOf('@') != -1) {
            var splitval = value.split('@');
            fchar = splitval[0].substring(0, 1);
            lchar = splitval[0].substring(splitval[0].length - 1);
        }
        var fcharS = /^[a-zA-Z0-9]$/.test(fchar);
        var lcharS = /^[a-zA-Z0-9]$/.test(lchar);
        var emailCheck = /^[-0-9a-zA-Z.-_]+@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(value);
        var emailVal = $('.accountemail').val();
        if ($(element).closest('form').length > 0 && $(element).closest('form').attr('id') == 'RegistrationForm') {
            emailVal = $(element).closest('form').find('.accountemail').val();
        }
        if (fcharS == false || lcharS == false) {
            customErrormsg = 'Something doesn\'t look right, please try again.';
            return false;
        } else if (emailCheck == false) {
            customErrormsg = 'Oops - the email entered is not in a valid format.';
            return false;
        } else if (emailVal != value) {
            customErrormsg = 'Please make sure emails match.';
            return false;
        } else {
            return true;
        }
    }
}, customError);

$.validator.addMethod('accountEmailConfirmation', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        var vIndex = value.length;
        var fchar = value.substring(0, 1);
        var lchar = value.substring(vIndex - 1);
        if (value.indexOf('@') != -1) {
            var splitval = value.split('@');
            fchar = splitval[0].substring(0, 1);
            lchar = splitval[0].substring(splitval[0].length - 1);
        }
        var fcharS = /^[a-zA-Z0-9]$/.test(fchar);
        var lcharS = /^[a-zA-Z0-9]$/.test(lchar);
        var emailCheck = /^[-0-9a-zA-Z.-_]+@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(value);
        var emailVal = $(element).closest('form').find('.accountemail').val();
        if (fcharS == false || lcharS == false) {
            customErrormsg = 'Something doesn\'t look right, please try again.';
            return false;
        } else if (emailCheck == false) {
            customErrormsg = 'Oops - the email entered is not in a valid format.';
            return false;
        } else if (emailVal != value) {
            customErrormsg = 'Please make sure emails match.';
            return false;
        } else {
            return true;
        }
    }
}, customError);
/**
 * Add positive number validation method to $ validation
 * plugin. Text fields must have 'positivenumber' css class to be
 * validated as positivenumber it validates a number and throws
 * error if it is below 0 or if it is not a number.
 */
$.validator.addMethod('positivenumber', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        if (value == '') {
            return true;
        }
        return (/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(value) && Number(value) >= 0
        );
    }
}, ''); // "" should be replaced with error message if needed

$.validator.addMethod('monthselect', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        var d = new Date(),
            mth = d.getMonth() + 1,
            yy = d.getFullYear();
        var selectedMth = $('.custom-select select[id$=\'_expiration_month\']').val();

        var selectedyear = $('.custom-select select[id$=\'_expiration_year\']').val();

        if (selectedyear) {
            selectedyear = selectedyear.replace(',', '');
            if (selectedyear <= yy && selectedMth < mth) {
                return false;
            } else {
                return true;
            }
        }
    }
}, '');

$.validator.addMethod('yearselect', function (value, element) {
    if ($(element).hasClass('stopKeypress')) {
        return true;
    } else {
        var d = new Date(),
            mth = d.getMonth() + 1,
            yy = d.getFullYear();
        var selectedMth = $('.custom-select select[id$=\'_expiration_month\']').val();

        var selectedyear = $('.custom-select select[id$=\'_expiration_year\']').val();

        if (selectedyear) {
            selectedyear = selectedyear.replace(',', '');
            if (selectedyear <= yy && selectedMth < mth) {
                return false;
            } else {
                return true;
            }
        }
    }
}, '');

// register form validator for form elements
// except for those which are marked "suppress"
$.each($('form:not(.suppress)'), function () {
    $(this).validate(settings);
});
/**
 * @function
 * @description Validates a given phone number against the countries phone regex
 * @param {String} value The phone number which will be validated
 * @param {String} el The input field
 */
/*var validatePhone = function (value, el) {
    var country = $(el).closest('form').find('.country');
    if (country.length === 0 || country.val().length === 0 || !regex.phone[country.val().toLowerCase()]) {
        return true;
    }

    var rgx = regex.phone[country.val().toLowerCase()];
    var isOptional = this.optional(el);
    var isValid = rgx.test($.trim(value));

    return isOptional || isValid;
};*/

/**
 * @function
 * @description Validates that a credit card owner is not a Credit card number
 * @param {String} value The owner field which will be validated
 * @param {String} el The input field
 */
/*var validateOwner = function (value) {
    var isValid = regex.notCC.test($.trim(value));
    return isValid;
};
*/
/**
 * Add phone validation method to $ validation plugin.
 * Text fields must have 'phone' css class to be validated as phone
 */
/*$.validator.addMethod('phone', validatePhone, Resources.INVALID_PHONE);*/

/**
 * Add CCOwner validation method to $ validation plugin.
 * Text fields must have 'owner' css class to be validated as not a credit card
 */
/*$.validator.addMethod('owner', validateOwner, Resources.INVALID_OWNER);*/

/**
 * Add gift cert amount validation method to $ validation plugin.
 * Text fields must have 'gift-cert-amont' css class to be validated
 */
$.validator.addMethod('gift-cert-amount', function (value, el) {
    var isOptional = this.optional(el);
    var isValid = !isNaN(value) && parseFloat(value) >= 5 && parseFloat(value) <= 5000;
    return isOptional || isValid;
}, Resources.GIFT_CERT_AMOUNT_INVALID);

/**
 * Add positive number validation method to $ validation plugin.
 * Text fields must have 'positivenumber' css class to be validated as positivenumber
 */
/*$.validator.addMethod('positivenumber', function (value) {
    if ($.trim(value).length === 0) { return true; }
    return (!isNaN(value) && Number(value) >= 0);
}, ''); // '' should be replaced with error message if needed
*/
/*Start JIRA PREV-77 : Zip code validation is not happening with respect to the State/Country.*/
/*function validateZip(value, el) {
    var country = $(el).closest('form').find('.country');
    if (country.length === 0 || country.val().length === 0 || !regex.postal[country.val().toLowerCase()]) {
        return true;
    }
    var isOptional = this.optional(el);
    var isValid = regex.postal[country.val().toLowerCase()].test($.trim(value));
    return isOptional || isValid;
}
$.validator.addMethod('postal', validateZip, Resources.INVALID_ZIP);*/
/*End JIRA PREV-77*/

$.extend($.validator.messages, {
    //required: Resources.VALIDATE_REQUIRED,
    remote: Resources.VALIDATE_REMOTE,
    email: Resources.VALIDATE_EMAIL,
    url: Resources.VALIDATE_URL,
    date: Resources.VALIDATE_DATE,
    dateISO: Resources.VALIDATE_DATEISO,
    number: Resources.VALIDATE_NUMBER,
    digits: Resources.VALIDATE_DIGITS,
    creditcard: Resources.VALIDATE_CREDITCARD,
    equalTo: Resources.VALIDATE_EQUALTO,
    maxlength: $.validator.format(Resources.VALIDATE_MAXLENGTH),
    minlength: $.validator.format(Resources.VALIDATE_MINLENGTH),
    rangelength: $.validator.format(Resources.VALIDATE_RANGELENGTH),
    range: $.validator.format(Resources.VALIDATE_RANGE),
    max: $.validator.format(Resources.VALIDATE_MAX),
    min: $.validator.format(Resources.VALIDATE_MIN)
});

var validator = {
    regex: regex,
    settings: settings,
    init: function init() {
        var self = this;
        $('form:not(.suppress)').each(function () {
            $(this).validate(self.settings);
        });
        validator.phoneValidation();
        validator.zipFormatter();
    },
    initForm: function initForm(f) {
        $(f).validate(this.settings);
    },
    phoneValidation: function phoneValidation() {
        // phone validation
        var isFirefox = navigator.userAgent.indexOf('Firefox') > -1;
        var isExplorer = navigator.userAgent.indexOf('MSIE') > -1;
        if (isFirefox || isExplorer) {
            $('input[name$=\'phone\']').bind('keyup keydown', function (e) {
                if (e.shiftKey || e.ctrlKey || e.altKey) {
                    e.preventDefault();
                } else {
                    var key = e.keyCode;
                    if (!(key == 8 || key == 9 || key == 46 || key >= 35 && key <= 40 || key >= 48 && key <= 57 || key >= 96 && key <= 105)) {
                        e.preventDefault();
                    }
                }
                //var curchr = $(this).val().length;
                var curval = $(this).val();

                var curval1 = curval.replace(/[A-Za-z` ~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi, '');
                var str1 = curval1.substring(0, 3);
                var str2 = curval1.substring(3, 6);
                var str3 = curval1.substring(6, 10);

                if (curval.indexOf('(') == -1 && curval.indexOf(')') == -1 && curval1.length == 3) {
                    $(this).val('(' + str1 + ') ');
                } else if (curval.indexOf('(') != -1 && curval.indexOf(')') == -1 && curval1.length == 4) {
                    $(this).val('(' + str1 + ') ' + str2);
                } else if (curval.indexOf('(') != -1 && curval.indexOf(')') != -1 && curval.indexOf(' ') == -1 && curval1.length == 6) {
                    $(this).val('(' + str1 + ') ' + str2);
                } else if (curval.indexOf('(') != -1 && curval.indexOf(')') != -1 && curval.indexOf(' ') != -1 && curval.indexOf('-') == -1 && curval1.length > 6) {
                    $(this).val('(' + str1 + ') ' + str2 + '-' + str3);
                }
                if (curval.length == 0) {
                    $(this).val('');
                }
            });
        } else {
            $('body').on('change input keyup', 'input[name$=\'phone\']', function (e) {
                //var curchr = $(this).val().length;
                $(this).val(this.value.replace(/[^\d]/g, ''));
                var curval = $(this).val();

                var curval1 = curval;
                var str1 = curval1.substring(0, 3);
                var str2 = curval1.substring(3, 6);
                var str3 = curval1.substring(6, 10);
                var key = event.which || event.keyCode || event.charCode;

                if (key == 8 || e.shiftKey || e.ctrlKey || e.altKey) {
                    e.preventDefault();
                    if (curval1.length == 4 || curval1.length == 5 || curval1.length == 6) {
                        $(this).val('(' + str1 + ') ' + str2);
                    } else if (curval1.length > 6) {
                        $(this).val('(' + str1 + ') ' + str2 + '-' + str3);
                    }
                } else {
                    if (curval1.length == 3) {
                        $(this).val('(' + str1 + ') ');
                    } else if (curval1.length == 4 || curval1.length == 5 || curval1.length == 6) {
                        $(this).val('(' + str1 + ') ' + str2);
                    } else if (curval1.length > 6) {
                        $(this).val('(' + str1 + ') ' + str2 + '-' + str3);
                    }
                    if (curval.length == 0) {
                        $(this).val('');
                    }
                }
            });
        }

        /* $("input[name$='phone']").blur(function (e) {
             $(this).val(this.value.replace(/[A-Za-z` ~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi, ''));
                 var curval = $(this).val();
                 var str1 = curval.substring(0, 3);
                 var str2 = curval.substring(3, 6);
                 var str3 = curval.substring(6, 10);
                 if(curval.length <= 3 && curval.length > 0){
                     $(this).val( "(" + str1 + ") ");
                 }
                 else  if(curval.length <= 6 && curval.length > 3){
                     $(this).val( "(" + str1 + ") " + str2 );
                 }
                 else  if(curval.length <= 10 && curval.length > 6){
                     $(this).val( "(" + str1 + ") " + str2 + "-" + str3);
                 }
         });*/
    },
    zipFormatter: function zipFormatter() {
        $('body').on('change input', 'input[name$=\'postal\'], input[name$=\'zip\']', function () {
            $(this).val(this.value.replace(/[^\d]/g, ''));
            var curval = $(this).val();
            if (curval.length > 5) {
                $(this).val(curval.substring(0, 5) + '-' + curval.substring(5, 9));
            }
        });
    }
};
module.exports = validator;

},{}]},{},[16])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvYXNhcC9icm93c2VyLWFzYXAuanMiLCJub2RlX21vZHVsZXMvYXNhcC9icm93c2VyLXJhdy5qcyIsIm5vZGVfbW9kdWxlcy9ldi1lbWl0dGVyL2V2LWVtaXR0ZXIuanMiLCJub2RlX21vZHVsZXMvaW1hZ2VzbG9hZGVkL2ltYWdlc2xvYWRlZC5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW5kZXguanMiLCJub2RlX21vZHVsZXMvcHJvbWlzZS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9wcm9taXNlL2xpYi9jb3JlLmpzIiwibm9kZV9tb2R1bGVzL3Byb21pc2UvbGliL2RvbmUuanMiLCJub2RlX21vZHVsZXMvcHJvbWlzZS9saWIvZXM2LWV4dGVuc2lvbnMuanMiLCJub2RlX21vZHVsZXMvcHJvbWlzZS9saWIvZmluYWxseS5qcyIsIm5vZGVfbW9kdWxlcy9wcm9taXNlL2xpYi9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9wcm9taXNlL2xpYi9ub2RlLWV4dGVuc2lvbnMuanMiLCJub2RlX21vZHVsZXMvcHJvbWlzZS9saWIvc3luY2hyb25vdXMuanMiLCJ0ZW1wLVJhcGFsYSBDb3JlL2FkZHJlc3N2YWxpZGF0aW9uLmpzIiwidGVtcC1SYXBhbGEgQ29yZS9hamF4LmpzIiwidGVtcC1SYXBhbGEgQ29yZS9hcHAuanMiLCJ0ZW1wLVJhcGFsYSBDb3JlL2JvbnVzLXByb2R1Y3RzLXZpZXcuanMiLCJ0ZW1wLVJhcGFsYSBDb3JlL2Jyb3dzZXJhLmpzIiwidGVtcC1SYXBhbGEgQ29yZS9jYXB0Y2hhLmpzIiwidGVtcC1SYXBhbGEgQ29yZS9jb21wYXJlLXdpZGdldC5qcyIsInRlbXAtUmFwYWxhIENvcmUvY29va2llcHJpdmFjeS5qcyIsInRlbXAtUmFwYWxhIENvcmUvY291bnRyaWVzLmpzIiwidGVtcC1SYXBhbGEgQ29yZS9kaWFsb2cuanMiLCJ0ZW1wLVJhcGFsYSBDb3JlL2RpYWxvZ2lmeS5qcyIsInRlbXAtUmFwYWxhIENvcmUvZ2lmdGNlcnQuanMiLCJ0ZW1wLVJhcGFsYSBDb3JlL2hlYWRlcmluaXQuanMiLCJ0ZW1wLVJhcGFsYSBDb3JlL2pxdWVyeS1leHQuanMiLCJ0ZW1wLVJhcGFsYSBDb3JlL21hcmtlci13aXRoLWxhYmVsLmpzIiwidGVtcC1SYXBhbGEgQ29yZS9tZWdhbWVudS5qcyIsInRlbXAtUmFwYWxhIENvcmUvbWluaWNhcnQuanMiLCJ0ZW1wLVJhcGFsYSBDb3JlL3BhZ2UuanMiLCJ0ZW1wLVJhcGFsYSBDb3JlL3BhZ2VzL2FjY291bnQuanMiLCJ0ZW1wLVJhcGFsYSBDb3JlL3BhZ2VzL2NhcnQuanMiLCJ0ZW1wLVJhcGFsYSBDb3JlL3BhZ2VzL2NoZWNrb3V0L2FkZHJlc3MuanMiLCJ0ZW1wLVJhcGFsYSBDb3JlL3BhZ2VzL2NoZWNrb3V0L2JpbGxpbmcuanMiLCJ0ZW1wLVJhcGFsYSBDb3JlL3BhZ2VzL2NoZWNrb3V0L2Zvcm1QcmVwYXJlLmpzIiwidGVtcC1SYXBhbGEgQ29yZS9wYWdlcy9jaGVja291dC9pbmRleC5qcyIsInRlbXAtUmFwYWxhIENvcmUvcGFnZXMvY2hlY2tvdXQvbXVsdGlzaGlwLmpzIiwidGVtcC1SYXBhbGEgQ29yZS9wYWdlcy9jaGVja291dC9zaGlwcGluZy5qcyIsInRlbXAtUmFwYWxhIENvcmUvcGFnZXMvY29tcGFyZS5qcyIsInRlbXAtUmFwYWxhIENvcmUvcGFnZXMvaW50ZXJuYXRpb25hbC5qcyIsInRlbXAtUmFwYWxhIENvcmUvcGFnZXMvcHJvZHVjdC9hZGRUb0NhcnQuanMiLCJ0ZW1wLVJhcGFsYSBDb3JlL3BhZ2VzL3Byb2R1Y3QvaW5kZXguanMiLCJ0ZW1wLVJhcGFsYSBDb3JlL3BhZ2VzL3Byb2R1Y3QvcGRwRXZlbnRzLmpzIiwidGVtcC1SYXBhbGEgQ29yZS9wYWdlcy9yYXBhbGFpbnNpZGVyLmpzIiwidGVtcC1SYXBhbGEgQ29yZS9wYWdlcy9yZWdpc3RyeS5qcyIsInRlbXAtUmFwYWxhIENvcmUvcGFnZXMvc2VhcmNoLmpzIiwidGVtcC1SYXBhbGEgQ29yZS9wYWdlcy9zdG9yZWZyb250LmpzIiwidGVtcC1SYXBhbGEgQ29yZS9wYWdlcy9zdG9yZWxvY2F0b3IuanMiLCJ0ZW1wLVJhcGFsYSBDb3JlL3BhZ2VzL3dpc2hsaXN0LmpzIiwidGVtcC1SYXBhbGEgQ29yZS9wcm9kdWN0LXRpbGUuanMiLCJ0ZW1wLVJhcGFsYSBDb3JlL3Byb2dyZXNzLmpzIiwidGVtcC1SYXBhbGEgQ29yZS9xdWlja3ZpZXcuanMiLCJ0ZW1wLVJhcGFsYSBDb3JlL3NlYXJjaHBsYWNlaG9sZGVyLmpzIiwidGVtcC1SYXBhbGEgQ29yZS9zZWFyY2hzdWdnZXN0LmpzIiwidGVtcC1SYXBhbGEgQ29yZS9zdG9yZS1sb2NhdG9yLmpzIiwidGVtcC1SYXBhbGEgQ29yZS9zdG9yZWludmVudG9yeS9jYXJ0LmpzIiwidGVtcC1SYXBhbGEgQ29yZS9zdG9yZWludmVudG9yeS9pbmRleC5qcyIsInRlbXAtUmFwYWxhIENvcmUvdGFnbWFuYWdlci5qcyIsInRlbXAtUmFwYWxhIENvcmUvdGxzLmpzIiwidGVtcC1SYXBhbGEgQ29yZS90b29sdGlwLmpzIiwidGVtcC1SYXBhbGEgQ29yZS91aWV2ZW50cy5qcyIsInRlbXAtUmFwYWxhIENvcmUvdXRpbC5qcyIsInRlbXAtUmFwYWxhIENvcmUvdmFsaWRhdG9yLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ2xFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDL05BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaEhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ2xYQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQy9qWUE7QUFDQTtBQUNBO0FBQ0E7O0FDSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDck5BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDYkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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Q0FBWSxNQUFNLElBQU4sR0FBYSxJQUFiLEdBQW9CLElBQXBCLEdBQTJCLEdBQTNCLEdBQWlDLElBQTdDO0FBQ0g7QUFDRCx3QkFBSSxPQUFPLE1BQVAsSUFBaUIsQ0FBckIsRUFBd0I7QUFDcEIsMEJBQUUsSUFBRixFQUFRLEdBQVIsQ0FBWSxFQUFaO0FBQ0g7QUFDSjtBQUNKLGFBOUJEO0FBK0JIOztBQUVEOzs7Ozs7Ozs7Ozs7Ozs7O0FBaUJILEtBcEdXO0FBcUdaLGtCQUFjLHdCQUFZO0FBQ3RCLFVBQUUsTUFBRixFQUFVLEVBQVYsQ0FBYSxjQUFiLEVBQTZCLCtDQUE3QixFQUE4RSxZQUFZO0FBQ3RGLGNBQUUsSUFBRixFQUFRLEdBQVIsQ0FBWSxLQUFLLEtBQUwsQ0FBVyxPQUFYLENBQW1CLFFBQW5CLEVBQTZCLEVBQTdCLENBQVo7QUFDQSxnQkFBSSxTQUFTLEVBQUUsSUFBRixFQUFRLEdBQVIsRUFBYjtBQUNBLGdCQUFJLE9BQU8sTUFBUCxHQUFnQixDQUFwQixFQUF1QjtBQUNuQixrQkFBRSxJQUFGLEVBQVEsR0FBUixDQUFZLE9BQU8sU0FBUCxDQUFpQixDQUFqQixFQUFvQixDQUFwQixJQUF5QixHQUF6QixHQUErQixPQUFPLFNBQVAsQ0FBaUIsQ0FBakIsRUFBb0IsQ0FBcEIsQ0FBM0M7QUFDSDtBQUNKLFNBTkQ7QUFPSDtBQTdHVyxDQUFoQjtBQStHQSxPQUFPLE9BQVAsR0FBaUIsU0FBakIiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8vIHJhd0FzYXAgcHJvdmlkZXMgZXZlcnl0aGluZyB3ZSBuZWVkIGV4Y2VwdCBleGNlcHRpb24gbWFuYWdlbWVudC5cbnZhciByYXdBc2FwID0gcmVxdWlyZShcIi4vcmF3XCIpO1xuLy8gUmF3VGFza3MgYXJlIHJlY3ljbGVkIHRvIHJlZHVjZSBHQyBjaHVybi5cbnZhciBmcmVlVGFza3MgPSBbXTtcbi8vIFdlIHF1ZXVlIGVycm9ycyB0byBlbnN1cmUgdGhleSBhcmUgdGhyb3duIGluIHJpZ2h0IG9yZGVyIChGSUZPKS5cbi8vIEFycmF5LWFzLXF1ZXVlIGlzIGdvb2QgZW5vdWdoIGhlcmUsIHNpbmNlIHdlIGFyZSBqdXN0IGRlYWxpbmcgd2l0aCBleGNlcHRpb25zLlxudmFyIHBlbmRpbmdFcnJvcnMgPSBbXTtcbnZhciByZXF1ZXN0RXJyb3JUaHJvdyA9IHJhd0FzYXAubWFrZVJlcXVlc3RDYWxsRnJvbVRpbWVyKHRocm93Rmlyc3RFcnJvcik7XG5cbmZ1bmN0aW9uIHRocm93Rmlyc3RFcnJvcigpIHtcbiAgICBpZiAocGVuZGluZ0Vycm9ycy5sZW5ndGgpIHtcbiAgICAgICAgdGhyb3cgcGVuZGluZ0Vycm9ycy5zaGlmdCgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDYWxscyBhIHRhc2sgYXMgc29vbiBhcyBwb3NzaWJsZSBhZnRlciByZXR1cm5pbmcsIGluIGl0cyBvd24gZXZlbnQsIHdpdGggcHJpb3JpdHlcbiAqIG92ZXIgb3RoZXIgZXZlbnRzIGxpa2UgYW5pbWF0aW9uLCByZWZsb3csIGFuZCByZXBhaW50LiBBbiBlcnJvciB0aHJvd24gZnJvbSBhblxuICogZXZlbnQgd2lsbCBub3QgaW50ZXJydXB0LCBub3IgZXZlbiBzdWJzdGFudGlhbGx5IHNsb3cgZG93biB0aGUgcHJvY2Vzc2luZyBvZlxuICogb3RoZXIgZXZlbnRzLCBidXQgd2lsbCBiZSByYXRoZXIgcG9zdHBvbmVkIHRvIGEgbG93ZXIgcHJpb3JpdHkgZXZlbnQuXG4gKiBAcGFyYW0ge3tjYWxsfX0gdGFzayBBIGNhbGxhYmxlIG9iamVjdCwgdHlwaWNhbGx5IGEgZnVuY3Rpb24gdGhhdCB0YWtlcyBub1xuICogYXJndW1lbnRzLlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGFzYXA7XG5mdW5jdGlvbiBhc2FwKHRhc2spIHtcbiAgICB2YXIgcmF3VGFzaztcbiAgICBpZiAoZnJlZVRhc2tzLmxlbmd0aCkge1xuICAgICAgICByYXdUYXNrID0gZnJlZVRhc2tzLnBvcCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJhd1Rhc2sgPSBuZXcgUmF3VGFzaygpO1xuICAgIH1cbiAgICByYXdUYXNrLnRhc2sgPSB0YXNrO1xuICAgIHJhd0FzYXAocmF3VGFzayk7XG59XG5cbi8vIFdlIHdyYXAgdGFza3Mgd2l0aCByZWN5Y2xhYmxlIHRhc2sgb2JqZWN0cy4gIEEgdGFzayBvYmplY3QgaW1wbGVtZW50c1xuLy8gYGNhbGxgLCBqdXN0IGxpa2UgYSBmdW5jdGlvbi5cbmZ1bmN0aW9uIFJhd1Rhc2soKSB7XG4gICAgdGhpcy50YXNrID0gbnVsbDtcbn1cblxuLy8gVGhlIHNvbGUgcHVycG9zZSBvZiB3cmFwcGluZyB0aGUgdGFzayBpcyB0byBjYXRjaCB0aGUgZXhjZXB0aW9uIGFuZCByZWN5Y2xlXG4vLyB0aGUgdGFzayBvYmplY3QgYWZ0ZXIgaXRzIHNpbmdsZSB1c2UuXG5SYXdUYXNrLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIHRoaXMudGFzay5jYWxsKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgaWYgKGFzYXAub25lcnJvcikge1xuICAgICAgICAgICAgLy8gVGhpcyBob29rIGV4aXN0cyBwdXJlbHkgZm9yIHRlc3RpbmcgcHVycG9zZXMuXG4gICAgICAgICAgICAvLyBJdHMgbmFtZSB3aWxsIGJlIHBlcmlvZGljYWxseSByYW5kb21pemVkIHRvIGJyZWFrIGFueSBjb2RlIHRoYXRcbiAgICAgICAgICAgIC8vIGRlcGVuZHMgb24gaXRzIGV4aXN0ZW5jZS5cbiAgICAgICAgICAgIGFzYXAub25lcnJvcihlcnJvcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBJbiBhIHdlYiBicm93c2VyLCBleGNlcHRpb25zIGFyZSBub3QgZmF0YWwuIEhvd2V2ZXIsIHRvIGF2b2lkXG4gICAgICAgICAgICAvLyBzbG93aW5nIGRvd24gdGhlIHF1ZXVlIG9mIHBlbmRpbmcgdGFza3MsIHdlIHJldGhyb3cgdGhlIGVycm9yIGluIGFcbiAgICAgICAgICAgIC8vIGxvd2VyIHByaW9yaXR5IHR1cm4uXG4gICAgICAgICAgICBwZW5kaW5nRXJyb3JzLnB1c2goZXJyb3IpO1xuICAgICAgICAgICAgcmVxdWVzdEVycm9yVGhyb3coKTtcbiAgICAgICAgfVxuICAgIH0gZmluYWxseSB7XG4gICAgICAgIHRoaXMudGFzayA9IG51bGw7XG4gICAgICAgIGZyZWVUYXNrc1tmcmVlVGFza3MubGVuZ3RoXSA9IHRoaXM7XG4gICAgfVxufTtcbiIsIlwidXNlIHN0cmljdFwiO1xuXG4vLyBVc2UgdGhlIGZhc3Rlc3QgbWVhbnMgcG9zc2libGUgdG8gZXhlY3V0ZSBhIHRhc2sgaW4gaXRzIG93biB0dXJuLCB3aXRoXG4vLyBwcmlvcml0eSBvdmVyIG90aGVyIGV2ZW50cyBpbmNsdWRpbmcgSU8sIGFuaW1hdGlvbiwgcmVmbG93LCBhbmQgcmVkcmF3XG4vLyBldmVudHMgaW4gYnJvd3NlcnMuXG4vL1xuLy8gQW4gZXhjZXB0aW9uIHRocm93biBieSBhIHRhc2sgd2lsbCBwZXJtYW5lbnRseSBpbnRlcnJ1cHQgdGhlIHByb2Nlc3Npbmcgb2Zcbi8vIHN1YnNlcXVlbnQgdGFza3MuIFRoZSBoaWdoZXIgbGV2ZWwgYGFzYXBgIGZ1bmN0aW9uIGVuc3VyZXMgdGhhdCBpZiBhblxuLy8gZXhjZXB0aW9uIGlzIHRocm93biBieSBhIHRhc2ssIHRoYXQgdGhlIHRhc2sgcXVldWUgd2lsbCBjb250aW51ZSBmbHVzaGluZyBhc1xuLy8gc29vbiBhcyBwb3NzaWJsZSwgYnV0IGlmIHlvdSB1c2UgYHJhd0FzYXBgIGRpcmVjdGx5LCB5b3UgYXJlIHJlc3BvbnNpYmxlIHRvXG4vLyBlaXRoZXIgZW5zdXJlIHRoYXQgbm8gZXhjZXB0aW9ucyBhcmUgdGhyb3duIGZyb20geW91ciB0YXNrLCBvciB0byBtYW51YWxseVxuLy8gY2FsbCBgcmF3QXNhcC5yZXF1ZXN0Rmx1c2hgIGlmIGFuIGV4Y2VwdGlvbiBpcyB0aHJvd24uXG5tb2R1bGUuZXhwb3J0cyA9IHJhd0FzYXA7XG5mdW5jdGlvbiByYXdBc2FwKHRhc2spIHtcbiAgICBpZiAoIXF1ZXVlLmxlbmd0aCkge1xuICAgICAgICByZXF1ZXN0Rmx1c2goKTtcbiAgICAgICAgZmx1c2hpbmcgPSB0cnVlO1xuICAgIH1cbiAgICAvLyBFcXVpdmFsZW50IHRvIHB1c2gsIGJ1dCBhdm9pZHMgYSBmdW5jdGlvbiBjYWxsLlxuICAgIHF1ZXVlW3F1ZXVlLmxlbmd0aF0gPSB0YXNrO1xufVxuXG52YXIgcXVldWUgPSBbXTtcbi8vIE9uY2UgYSBmbHVzaCBoYXMgYmVlbiByZXF1ZXN0ZWQsIG5vIGZ1cnRoZXIgY2FsbHMgdG8gYHJlcXVlc3RGbHVzaGAgYXJlXG4vLyBuZWNlc3NhcnkgdW50aWwgdGhlIG5leHQgYGZsdXNoYCBjb21wbGV0ZXMuXG52YXIgZmx1c2hpbmcgPSBmYWxzZTtcbi8vIGByZXF1ZXN0Rmx1c2hgIGlzIGFuIGltcGxlbWVudGF0aW9uLXNwZWNpZmljIG1ldGhvZCB0aGF0IGF0dGVtcHRzIHRvIGtpY2tcbi8vIG9mZiBhIGBmbHVzaGAgZXZlbnQgYXMgcXVpY2tseSBhcyBwb3NzaWJsZS4gYGZsdXNoYCB3aWxsIGF0dGVtcHQgdG8gZXhoYXVzdFxuLy8gdGhlIGV2ZW50IHF1ZXVlIGJlZm9yZSB5aWVsZGluZyB0byB0aGUgYnJvd3NlcidzIG93biBldmVudCBsb29wLlxudmFyIHJlcXVlc3RGbHVzaDtcbi8vIFRoZSBwb3NpdGlvbiBvZiB0aGUgbmV4dCB0YXNrIHRvIGV4ZWN1dGUgaW4gdGhlIHRhc2sgcXVldWUuIFRoaXMgaXNcbi8vIHByZXNlcnZlZCBiZXR3ZWVuIGNhbGxzIHRvIGBmbHVzaGAgc28gdGhhdCBpdCBjYW4gYmUgcmVzdW1lZCBpZlxuLy8gYSB0YXNrIHRocm93cyBhbiBleGNlcHRpb24uXG52YXIgaW5kZXggPSAwO1xuLy8gSWYgYSB0YXNrIHNjaGVkdWxlcyBhZGRpdGlvbmFsIHRhc2tzIHJlY3Vyc2l2ZWx5LCB0aGUgdGFzayBxdWV1ZSBjYW4gZ3Jvd1xuLy8gdW5ib3VuZGVkLiBUbyBwcmV2ZW50IG1lbW9yeSBleGhhdXN0aW9uLCB0aGUgdGFzayBxdWV1ZSB3aWxsIHBlcmlvZGljYWxseVxuLy8gdHJ1bmNhdGUgYWxyZWFkeS1jb21wbGV0ZWQgdGFza3MuXG52YXIgY2FwYWNpdHkgPSAxMDI0O1xuXG4vLyBUaGUgZmx1c2ggZnVuY3Rpb24gcHJvY2Vzc2VzIGFsbCB0YXNrcyB0aGF0IGhhdmUgYmVlbiBzY2hlZHVsZWQgd2l0aFxuLy8gYHJhd0FzYXBgIHVubGVzcyBhbmQgdW50aWwgb25lIG9mIHRob3NlIHRhc2tzIHRocm93cyBhbiBleGNlcHRpb24uXG4vLyBJZiBhIHRhc2sgdGhyb3dzIGFuIGV4Y2VwdGlvbiwgYGZsdXNoYCBlbnN1cmVzIHRoYXQgaXRzIHN0YXRlIHdpbGwgcmVtYWluXG4vLyBjb25zaXN0ZW50IGFuZCB3aWxsIHJlc3VtZSB3aGVyZSBpdCBsZWZ0IG9mZiB3aGVuIGNhbGxlZCBhZ2Fpbi5cbi8vIEhvd2V2ZXIsIGBmbHVzaGAgZG9lcyBub3QgbWFrZSBhbnkgYXJyYW5nZW1lbnRzIHRvIGJlIGNhbGxlZCBhZ2FpbiBpZiBhblxuLy8gZXhjZXB0aW9uIGlzIHRocm93bi5cbmZ1bmN0aW9uIGZsdXNoKCkge1xuICAgIHdoaWxlIChpbmRleCA8IHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICB2YXIgY3VycmVudEluZGV4ID0gaW5kZXg7XG4gICAgICAgIC8vIEFkdmFuY2UgdGhlIGluZGV4IGJlZm9yZSBjYWxsaW5nIHRoZSB0YXNrLiBUaGlzIGVuc3VyZXMgdGhhdCB3ZSB3aWxsXG4gICAgICAgIC8vIGJlZ2luIGZsdXNoaW5nIG9uIHRoZSBuZXh0IHRhc2sgdGhlIHRhc2sgdGhyb3dzIGFuIGVycm9yLlxuICAgICAgICBpbmRleCA9IGluZGV4ICsgMTtcbiAgICAgICAgcXVldWVbY3VycmVudEluZGV4XS5jYWxsKCk7XG4gICAgICAgIC8vIFByZXZlbnQgbGVha2luZyBtZW1vcnkgZm9yIGxvbmcgY2hhaW5zIG9mIHJlY3Vyc2l2ZSBjYWxscyB0byBgYXNhcGAuXG4gICAgICAgIC8vIElmIHdlIGNhbGwgYGFzYXBgIHdpdGhpbiB0YXNrcyBzY2hlZHVsZWQgYnkgYGFzYXBgLCB0aGUgcXVldWUgd2lsbFxuICAgICAgICAvLyBncm93LCBidXQgdG8gYXZvaWQgYW4gTyhuKSB3YWxrIGZvciBldmVyeSB0YXNrIHdlIGV4ZWN1dGUsIHdlIGRvbid0XG4gICAgICAgIC8vIHNoaWZ0IHRhc2tzIG9mZiB0aGUgcXVldWUgYWZ0ZXIgdGhleSBoYXZlIGJlZW4gZXhlY3V0ZWQuXG4gICAgICAgIC8vIEluc3RlYWQsIHdlIHBlcmlvZGljYWxseSBzaGlmdCAxMDI0IHRhc2tzIG9mZiB0aGUgcXVldWUuXG4gICAgICAgIGlmIChpbmRleCA+IGNhcGFjaXR5KSB7XG4gICAgICAgICAgICAvLyBNYW51YWxseSBzaGlmdCBhbGwgdmFsdWVzIHN0YXJ0aW5nIGF0IHRoZSBpbmRleCBiYWNrIHRvIHRoZVxuICAgICAgICAgICAgLy8gYmVnaW5uaW5nIG9mIHRoZSBxdWV1ZS5cbiAgICAgICAgICAgIGZvciAodmFyIHNjYW4gPSAwLCBuZXdMZW5ndGggPSBxdWV1ZS5sZW5ndGggLSBpbmRleDsgc2NhbiA8IG5ld0xlbmd0aDsgc2NhbisrKSB7XG4gICAgICAgICAgICAgICAgcXVldWVbc2Nhbl0gPSBxdWV1ZVtzY2FuICsgaW5kZXhdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcXVldWUubGVuZ3RoIC09IGluZGV4O1xuICAgICAgICAgICAgaW5kZXggPSAwO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLmxlbmd0aCA9IDA7XG4gICAgaW5kZXggPSAwO1xuICAgIGZsdXNoaW5nID0gZmFsc2U7XG59XG5cbi8vIGByZXF1ZXN0Rmx1c2hgIGlzIGltcGxlbWVudGVkIHVzaW5nIGEgc3RyYXRlZ3kgYmFzZWQgb24gZGF0YSBjb2xsZWN0ZWQgZnJvbVxuLy8gZXZlcnkgYXZhaWxhYmxlIFNhdWNlTGFicyBTZWxlbml1bSB3ZWIgZHJpdmVyIHdvcmtlciBhdCB0aW1lIG9mIHdyaXRpbmcuXG4vLyBodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9zcHJlYWRzaGVldHMvZC8xbUctNVVZR3VwNXF4R2RFTVdraFA2QldDejA1M05VYjJFMVFvVVRVMTZ1QS9lZGl0I2dpZD03ODM3MjQ1OTNcblxuLy8gU2FmYXJpIDYgYW5kIDYuMSBmb3IgZGVza3RvcCwgaVBhZCwgYW5kIGlQaG9uZSBhcmUgdGhlIG9ubHkgYnJvd3NlcnMgdGhhdFxuLy8gaGF2ZSBXZWJLaXRNdXRhdGlvbk9ic2VydmVyIGJ1dCBub3QgdW4tcHJlZml4ZWQgTXV0YXRpb25PYnNlcnZlci5cbi8vIE11c3QgdXNlIGBnbG9iYWxgIG9yIGBzZWxmYCBpbnN0ZWFkIG9mIGB3aW5kb3dgIHRvIHdvcmsgaW4gYm90aCBmcmFtZXMgYW5kIHdlYlxuLy8gd29ya2Vycy4gYGdsb2JhbGAgaXMgYSBwcm92aXNpb24gb2YgQnJvd3NlcmlmeSwgTXIsIE1ycywgb3IgTW9wLlxuXG4vKiBnbG9iYWxzIHNlbGYgKi9cbnZhciBzY29wZSA9IHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiBzZWxmO1xudmFyIEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyID0gc2NvcGUuTXV0YXRpb25PYnNlcnZlciB8fCBzY29wZS5XZWJLaXRNdXRhdGlvbk9ic2VydmVyO1xuXG4vLyBNdXRhdGlvbk9ic2VydmVycyBhcmUgZGVzaXJhYmxlIGJlY2F1c2UgdGhleSBoYXZlIGhpZ2ggcHJpb3JpdHkgYW5kIHdvcmtcbi8vIHJlbGlhYmx5IGV2ZXJ5d2hlcmUgdGhleSBhcmUgaW1wbGVtZW50ZWQuXG4vLyBUaGV5IGFyZSBpbXBsZW1lbnRlZCBpbiBhbGwgbW9kZXJuIGJyb3dzZXJzLlxuLy9cbi8vIC0gQW5kcm9pZCA0LTQuM1xuLy8gLSBDaHJvbWUgMjYtMzRcbi8vIC0gRmlyZWZveCAxNC0yOVxuLy8gLSBJbnRlcm5ldCBFeHBsb3JlciAxMVxuLy8gLSBpUGFkIFNhZmFyaSA2LTcuMVxuLy8gLSBpUGhvbmUgU2FmYXJpIDctNy4xXG4vLyAtIFNhZmFyaSA2LTdcbmlmICh0eXBlb2YgQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIHJlcXVlc3RGbHVzaCA9IG1ha2VSZXF1ZXN0Q2FsbEZyb21NdXRhdGlvbk9ic2VydmVyKGZsdXNoKTtcblxuLy8gTWVzc2FnZUNoYW5uZWxzIGFyZSBkZXNpcmFibGUgYmVjYXVzZSB0aGV5IGdpdmUgZGlyZWN0IGFjY2VzcyB0byB0aGUgSFRNTFxuLy8gdGFzayBxdWV1ZSwgYXJlIGltcGxlbWVudGVkIGluIEludGVybmV0IEV4cGxvcmVyIDEwLCBTYWZhcmkgNS4wLTEsIGFuZCBPcGVyYVxuLy8gMTEtMTIsIGFuZCBpbiB3ZWIgd29ya2VycyBpbiBtYW55IGVuZ2luZXMuXG4vLyBBbHRob3VnaCBtZXNzYWdlIGNoYW5uZWxzIHlpZWxkIHRvIGFueSBxdWV1ZWQgcmVuZGVyaW5nIGFuZCBJTyB0YXNrcywgdGhleVxuLy8gd291bGQgYmUgYmV0dGVyIHRoYW4gaW1wb3NpbmcgdGhlIDRtcyBkZWxheSBvZiB0aW1lcnMuXG4vLyBIb3dldmVyLCB0aGV5IGRvIG5vdCB3b3JrIHJlbGlhYmx5IGluIEludGVybmV0IEV4cGxvcmVyIG9yIFNhZmFyaS5cblxuLy8gSW50ZXJuZXQgRXhwbG9yZXIgMTAgaXMgdGhlIG9ubHkgYnJvd3NlciB0aGF0IGhhcyBzZXRJbW1lZGlhdGUgYnV0IGRvZXNcbi8vIG5vdCBoYXZlIE11dGF0aW9uT2JzZXJ2ZXJzLlxuLy8gQWx0aG91Z2ggc2V0SW1tZWRpYXRlIHlpZWxkcyB0byB0aGUgYnJvd3NlcidzIHJlbmRlcmVyLCBpdCB3b3VsZCBiZVxuLy8gcHJlZmVycmFibGUgdG8gZmFsbGluZyBiYWNrIHRvIHNldFRpbWVvdXQgc2luY2UgaXQgZG9lcyBub3QgaGF2ZVxuLy8gdGhlIG1pbmltdW0gNG1zIHBlbmFsdHkuXG4vLyBVbmZvcnR1bmF0ZWx5IHRoZXJlIGFwcGVhcnMgdG8gYmUgYSBidWcgaW4gSW50ZXJuZXQgRXhwbG9yZXIgMTAgTW9iaWxlIChhbmRcbi8vIERlc2t0b3AgdG8gYSBsZXNzZXIgZXh0ZW50KSB0aGF0IHJlbmRlcnMgYm90aCBzZXRJbW1lZGlhdGUgYW5kXG4vLyBNZXNzYWdlQ2hhbm5lbCB1c2VsZXNzIGZvciB0aGUgcHVycG9zZXMgb2YgQVNBUC5cbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9rcmlza293YWwvcS9pc3N1ZXMvMzk2XG5cbi8vIFRpbWVycyBhcmUgaW1wbGVtZW50ZWQgdW5pdmVyc2FsbHkuXG4vLyBXZSBmYWxsIGJhY2sgdG8gdGltZXJzIGluIHdvcmtlcnMgaW4gbW9zdCBlbmdpbmVzLCBhbmQgaW4gZm9yZWdyb3VuZFxuLy8gY29udGV4dHMgaW4gdGhlIGZvbGxvd2luZyBicm93c2Vycy5cbi8vIEhvd2V2ZXIsIG5vdGUgdGhhdCBldmVuIHRoaXMgc2ltcGxlIGNhc2UgcmVxdWlyZXMgbnVhbmNlcyB0byBvcGVyYXRlIGluIGFcbi8vIGJyb2FkIHNwZWN0cnVtIG9mIGJyb3dzZXJzLlxuLy9cbi8vIC0gRmlyZWZveCAzLTEzXG4vLyAtIEludGVybmV0IEV4cGxvcmVyIDYtOVxuLy8gLSBpUGFkIFNhZmFyaSA0LjNcbi8vIC0gTHlueCAyLjguN1xufSBlbHNlIHtcbiAgICByZXF1ZXN0Rmx1c2ggPSBtYWtlUmVxdWVzdENhbGxGcm9tVGltZXIoZmx1c2gpO1xufVxuXG4vLyBgcmVxdWVzdEZsdXNoYCByZXF1ZXN0cyB0aGF0IHRoZSBoaWdoIHByaW9yaXR5IGV2ZW50IHF1ZXVlIGJlIGZsdXNoZWQgYXNcbi8vIHNvb24gYXMgcG9zc2libGUuXG4vLyBUaGlzIGlzIHVzZWZ1bCB0byBwcmV2ZW50IGFuIGVycm9yIHRocm93biBpbiBhIHRhc2sgZnJvbSBzdGFsbGluZyB0aGUgZXZlbnRcbi8vIHF1ZXVlIGlmIHRoZSBleGNlcHRpb24gaGFuZGxlZCBieSBOb2RlLmpz4oCZc1xuLy8gYHByb2Nlc3Mub24oXCJ1bmNhdWdodEV4Y2VwdGlvblwiKWAgb3IgYnkgYSBkb21haW4uXG5yYXdBc2FwLnJlcXVlc3RGbHVzaCA9IHJlcXVlc3RGbHVzaDtcblxuLy8gVG8gcmVxdWVzdCBhIGhpZ2ggcHJpb3JpdHkgZXZlbnQsIHdlIGluZHVjZSBhIG11dGF0aW9uIG9ic2VydmVyIGJ5IHRvZ2dsaW5nXG4vLyB0aGUgdGV4dCBvZiBhIHRleHQgbm9kZSBiZXR3ZWVuIFwiMVwiIGFuZCBcIi0xXCIuXG5mdW5jdGlvbiBtYWtlUmVxdWVzdENhbGxGcm9tTXV0YXRpb25PYnNlcnZlcihjYWxsYmFjaykge1xuICAgIHZhciB0b2dnbGUgPSAxO1xuICAgIHZhciBvYnNlcnZlciA9IG5ldyBCcm93c2VyTXV0YXRpb25PYnNlcnZlcihjYWxsYmFjayk7XG4gICAgdmFyIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIlwiKTtcbiAgICBvYnNlcnZlci5vYnNlcnZlKG5vZGUsIHtjaGFyYWN0ZXJEYXRhOiB0cnVlfSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHJlcXVlc3RDYWxsKCkge1xuICAgICAgICB0b2dnbGUgPSAtdG9nZ2xlO1xuICAgICAgICBub2RlLmRhdGEgPSB0b2dnbGU7XG4gICAgfTtcbn1cblxuLy8gVGhlIG1lc3NhZ2UgY2hhbm5lbCB0ZWNobmlxdWUgd2FzIGRpc2NvdmVyZWQgYnkgTWFsdGUgVWJsIGFuZCB3YXMgdGhlXG4vLyBvcmlnaW5hbCBmb3VuZGF0aW9uIGZvciB0aGlzIGxpYnJhcnkuXG4vLyBodHRwOi8vd3d3Lm5vbmJsb2NraW5nLmlvLzIwMTEvMDYvd2luZG93bmV4dHRpY2suaHRtbFxuXG4vLyBTYWZhcmkgNi4wLjUgKGF0IGxlYXN0KSBpbnRlcm1pdHRlbnRseSBmYWlscyB0byBjcmVhdGUgbWVzc2FnZSBwb3J0cyBvbiBhXG4vLyBwYWdlJ3MgZmlyc3QgbG9hZC4gVGhhbmtmdWxseSwgdGhpcyB2ZXJzaW9uIG9mIFNhZmFyaSBzdXBwb3J0c1xuLy8gTXV0YXRpb25PYnNlcnZlcnMsIHNvIHdlIGRvbid0IG5lZWQgdG8gZmFsbCBiYWNrIGluIHRoYXQgY2FzZS5cblxuLy8gZnVuY3Rpb24gbWFrZVJlcXVlc3RDYWxsRnJvbU1lc3NhZ2VDaGFubmVsKGNhbGxiYWNrKSB7XG4vLyAgICAgdmFyIGNoYW5uZWwgPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTtcbi8vICAgICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGNhbGxiYWNrO1xuLy8gICAgIHJldHVybiBmdW5jdGlvbiByZXF1ZXN0Q2FsbCgpIHtcbi8vICAgICAgICAgY2hhbm5lbC5wb3J0Mi5wb3N0TWVzc2FnZSgwKTtcbi8vICAgICB9O1xuLy8gfVxuXG4vLyBGb3IgcmVhc29ucyBleHBsYWluZWQgYWJvdmUsIHdlIGFyZSBhbHNvIHVuYWJsZSB0byB1c2UgYHNldEltbWVkaWF0ZWBcbi8vIHVuZGVyIGFueSBjaXJjdW1zdGFuY2VzLlxuLy8gRXZlbiBpZiB3ZSB3ZXJlLCB0aGVyZSBpcyBhbm90aGVyIGJ1ZyBpbiBJbnRlcm5ldCBFeHBsb3JlciAxMC5cbi8vIEl0IGlzIG5vdCBzdWZmaWNpZW50IHRvIGFzc2lnbiBgc2V0SW1tZWRpYXRlYCB0byBgcmVxdWVzdEZsdXNoYCBiZWNhdXNlXG4vLyBgc2V0SW1tZWRpYXRlYCBtdXN0IGJlIGNhbGxlZCAqYnkgbmFtZSogYW5kIHRoZXJlZm9yZSBtdXN0IGJlIHdyYXBwZWQgaW4gYVxuLy8gY2xvc3VyZS5cbi8vIE5ldmVyIGZvcmdldC5cblxuLy8gZnVuY3Rpb24gbWFrZVJlcXVlc3RDYWxsRnJvbVNldEltbWVkaWF0ZShjYWxsYmFjaykge1xuLy8gICAgIHJldHVybiBmdW5jdGlvbiByZXF1ZXN0Q2FsbCgpIHtcbi8vICAgICAgICAgc2V0SW1tZWRpYXRlKGNhbGxiYWNrKTtcbi8vICAgICB9O1xuLy8gfVxuXG4vLyBTYWZhcmkgNi4wIGhhcyBhIHByb2JsZW0gd2hlcmUgdGltZXJzIHdpbGwgZ2V0IGxvc3Qgd2hpbGUgdGhlIHVzZXIgaXNcbi8vIHNjcm9sbGluZy4gVGhpcyBwcm9ibGVtIGRvZXMgbm90IGltcGFjdCBBU0FQIGJlY2F1c2UgU2FmYXJpIDYuMCBzdXBwb3J0c1xuLy8gbXV0YXRpb24gb2JzZXJ2ZXJzLCBzbyB0aGF0IGltcGxlbWVudGF0aW9uIGlzIHVzZWQgaW5zdGVhZC5cbi8vIEhvd2V2ZXIsIGlmIHdlIGV2ZXIgZWxlY3QgdG8gdXNlIHRpbWVycyBpbiBTYWZhcmksIHRoZSBwcmV2YWxlbnQgd29yay1hcm91bmRcbi8vIGlzIHRvIGFkZCBhIHNjcm9sbCBldmVudCBsaXN0ZW5lciB0aGF0IGNhbGxzIGZvciBhIGZsdXNoLlxuXG4vLyBgc2V0VGltZW91dGAgZG9lcyBub3QgY2FsbCB0aGUgcGFzc2VkIGNhbGxiYWNrIGlmIHRoZSBkZWxheSBpcyBsZXNzIHRoYW5cbi8vIGFwcHJveGltYXRlbHkgNyBpbiB3ZWIgd29ya2VycyBpbiBGaXJlZm94IDggdGhyb3VnaCAxOCwgYW5kIHNvbWV0aW1lcyBub3Rcbi8vIGV2ZW4gdGhlbi5cblxuZnVuY3Rpb24gbWFrZVJlcXVlc3RDYWxsRnJvbVRpbWVyKGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHJlcXVlc3RDYWxsKCkge1xuICAgICAgICAvLyBXZSBkaXNwYXRjaCBhIHRpbWVvdXQgd2l0aCBhIHNwZWNpZmllZCBkZWxheSBvZiAwIGZvciBlbmdpbmVzIHRoYXRcbiAgICAgICAgLy8gY2FuIHJlbGlhYmx5IGFjY29tbW9kYXRlIHRoYXQgcmVxdWVzdC4gVGhpcyB3aWxsIHVzdWFsbHkgYmUgc25hcHBlZFxuICAgICAgICAvLyB0byBhIDQgbWlsaXNlY29uZCBkZWxheSwgYnV0IG9uY2Ugd2UncmUgZmx1c2hpbmcsIHRoZXJlJ3Mgbm8gZGVsYXlcbiAgICAgICAgLy8gYmV0d2VlbiBldmVudHMuXG4gICAgICAgIHZhciB0aW1lb3V0SGFuZGxlID0gc2V0VGltZW91dChoYW5kbGVUaW1lciwgMCk7XG4gICAgICAgIC8vIEhvd2V2ZXIsIHNpbmNlIHRoaXMgdGltZXIgZ2V0cyBmcmVxdWVudGx5IGRyb3BwZWQgaW4gRmlyZWZveFxuICAgICAgICAvLyB3b3JrZXJzLCB3ZSBlbmxpc3QgYW4gaW50ZXJ2YWwgaGFuZGxlIHRoYXQgd2lsbCB0cnkgdG8gZmlyZVxuICAgICAgICAvLyBhbiBldmVudCAyMCB0aW1lcyBwZXIgc2Vjb25kIHVudGlsIGl0IHN1Y2NlZWRzLlxuICAgICAgICB2YXIgaW50ZXJ2YWxIYW5kbGUgPSBzZXRJbnRlcnZhbChoYW5kbGVUaW1lciwgNTApO1xuXG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZVRpbWVyKCkge1xuICAgICAgICAgICAgLy8gV2hpY2hldmVyIHRpbWVyIHN1Y2NlZWRzIHdpbGwgY2FuY2VsIGJvdGggdGltZXJzIGFuZFxuICAgICAgICAgICAgLy8gZXhlY3V0ZSB0aGUgY2FsbGJhY2suXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dEhhbmRsZSk7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsSGFuZGxlKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG4vLyBUaGlzIGlzIGZvciBgYXNhcC5qc2Agb25seS5cbi8vIEl0cyBuYW1lIHdpbGwgYmUgcGVyaW9kaWNhbGx5IHJhbmRvbWl6ZWQgdG8gYnJlYWsgYW55IGNvZGUgdGhhdCBkZXBlbmRzIG9uXG4vLyBpdHMgZXhpc3RlbmNlLlxucmF3QXNhcC5tYWtlUmVxdWVzdENhbGxGcm9tVGltZXIgPSBtYWtlUmVxdWVzdENhbGxGcm9tVGltZXI7XG5cbi8vIEFTQVAgd2FzIG9yaWdpbmFsbHkgYSBuZXh0VGljayBzaGltIGluY2x1ZGVkIGluIFEuIFRoaXMgd2FzIGZhY3RvcmVkIG91dFxuLy8gaW50byB0aGlzIEFTQVAgcGFja2FnZS4gSXQgd2FzIGxhdGVyIGFkYXB0ZWQgdG8gUlNWUCB3aGljaCBtYWRlIGZ1cnRoZXJcbi8vIGFtZW5kbWVudHMuIFRoZXNlIGRlY2lzaW9ucywgcGFydGljdWxhcmx5IHRvIG1hcmdpbmFsaXplIE1lc3NhZ2VDaGFubmVsIGFuZFxuLy8gdG8gY2FwdHVyZSB0aGUgTXV0YXRpb25PYnNlcnZlciBpbXBsZW1lbnRhdGlvbiBpbiBhIGNsb3N1cmUsIHdlcmUgaW50ZWdyYXRlZFxuLy8gYmFjayBpbnRvIEFTQVAgcHJvcGVyLlxuLy8gaHR0cHM6Ly9naXRodWIuY29tL3RpbGRlaW8vcnN2cC5qcy9ibG9iL2NkZGY3MjMyNTQ2YTljZjg1ODUyNGI3NWNkZTZmOWVkZjcyNjIwYTcvbGliL3JzdnAvYXNhcC5qc1xuIiwiLyoqXG4gKiBFdkVtaXR0ZXIgdjEuMS4wXG4gKiBMaWwnIGV2ZW50IGVtaXR0ZXJcbiAqIE1JVCBMaWNlbnNlXG4gKi9cblxuLyoganNoaW50IHVudXNlZDogdHJ1ZSwgdW5kZWY6IHRydWUsIHN0cmljdDogdHJ1ZSAqL1xuXG4oIGZ1bmN0aW9uKCBnbG9iYWwsIGZhY3RvcnkgKSB7XG4gIC8vIHVuaXZlcnNhbCBtb2R1bGUgZGVmaW5pdGlvblxuICAvKiBqc2hpbnQgc3RyaWN0OiBmYWxzZSAqLyAvKiBnbG9iYWxzIGRlZmluZSwgbW9kdWxlLCB3aW5kb3cgKi9cbiAgaWYgKCB0eXBlb2YgZGVmaW5lID09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCApIHtcbiAgICAvLyBBTUQgLSBSZXF1aXJlSlNcbiAgICBkZWZpbmUoIGZhY3RvcnkgKTtcbiAgfSBlbHNlIGlmICggdHlwZW9mIG1vZHVsZSA9PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cyApIHtcbiAgICAvLyBDb21tb25KUyAtIEJyb3dzZXJpZnksIFdlYnBhY2tcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBCcm93c2VyIGdsb2JhbHNcbiAgICBnbG9iYWwuRXZFbWl0dGVyID0gZmFjdG9yeSgpO1xuICB9XG5cbn0oIHR5cGVvZiB3aW5kb3cgIT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB0aGlzLCBmdW5jdGlvbigpIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbmZ1bmN0aW9uIEV2RW1pdHRlcigpIHt9XG5cbnZhciBwcm90byA9IEV2RW1pdHRlci5wcm90b3R5cGU7XG5cbnByb3RvLm9uID0gZnVuY3Rpb24oIGV2ZW50TmFtZSwgbGlzdGVuZXIgKSB7XG4gIGlmICggIWV2ZW50TmFtZSB8fCAhbGlzdGVuZXIgKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8vIHNldCBldmVudHMgaGFzaFxuICB2YXIgZXZlbnRzID0gdGhpcy5fZXZlbnRzID0gdGhpcy5fZXZlbnRzIHx8IHt9O1xuICAvLyBzZXQgbGlzdGVuZXJzIGFycmF5XG4gIHZhciBsaXN0ZW5lcnMgPSBldmVudHNbIGV2ZW50TmFtZSBdID0gZXZlbnRzWyBldmVudE5hbWUgXSB8fCBbXTtcbiAgLy8gb25seSBhZGQgb25jZVxuICBpZiAoIGxpc3RlbmVycy5pbmRleE9mKCBsaXN0ZW5lciApID09IC0xICkge1xuICAgIGxpc3RlbmVycy5wdXNoKCBsaXN0ZW5lciApO1xuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5wcm90by5vbmNlID0gZnVuY3Rpb24oIGV2ZW50TmFtZSwgbGlzdGVuZXIgKSB7XG4gIGlmICggIWV2ZW50TmFtZSB8fCAhbGlzdGVuZXIgKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8vIGFkZCBldmVudFxuICB0aGlzLm9uKCBldmVudE5hbWUsIGxpc3RlbmVyICk7XG4gIC8vIHNldCBvbmNlIGZsYWdcbiAgLy8gc2V0IG9uY2VFdmVudHMgaGFzaFxuICB2YXIgb25jZUV2ZW50cyA9IHRoaXMuX29uY2VFdmVudHMgPSB0aGlzLl9vbmNlRXZlbnRzIHx8IHt9O1xuICAvLyBzZXQgb25jZUxpc3RlbmVycyBvYmplY3RcbiAgdmFyIG9uY2VMaXN0ZW5lcnMgPSBvbmNlRXZlbnRzWyBldmVudE5hbWUgXSA9IG9uY2VFdmVudHNbIGV2ZW50TmFtZSBdIHx8IHt9O1xuICAvLyBzZXQgZmxhZ1xuICBvbmNlTGlzdGVuZXJzWyBsaXN0ZW5lciBdID0gdHJ1ZTtcblxuICByZXR1cm4gdGhpcztcbn07XG5cbnByb3RvLm9mZiA9IGZ1bmN0aW9uKCBldmVudE5hbWUsIGxpc3RlbmVyICkge1xuICB2YXIgbGlzdGVuZXJzID0gdGhpcy5fZXZlbnRzICYmIHRoaXMuX2V2ZW50c1sgZXZlbnROYW1lIF07XG4gIGlmICggIWxpc3RlbmVycyB8fCAhbGlzdGVuZXJzLmxlbmd0aCApIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIGluZGV4ID0gbGlzdGVuZXJzLmluZGV4T2YoIGxpc3RlbmVyICk7XG4gIGlmICggaW5kZXggIT0gLTEgKSB7XG4gICAgbGlzdGVuZXJzLnNwbGljZSggaW5kZXgsIDEgKTtcbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufTtcblxucHJvdG8uZW1pdEV2ZW50ID0gZnVuY3Rpb24oIGV2ZW50TmFtZSwgYXJncyApIHtcbiAgdmFyIGxpc3RlbmVycyA9IHRoaXMuX2V2ZW50cyAmJiB0aGlzLl9ldmVudHNbIGV2ZW50TmFtZSBdO1xuICBpZiAoICFsaXN0ZW5lcnMgfHwgIWxpc3RlbmVycy5sZW5ndGggKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8vIGNvcHkgb3ZlciB0byBhdm9pZCBpbnRlcmZlcmVuY2UgaWYgLm9mZigpIGluIGxpc3RlbmVyXG4gIGxpc3RlbmVycyA9IGxpc3RlbmVycy5zbGljZSgwKTtcbiAgYXJncyA9IGFyZ3MgfHwgW107XG4gIC8vIG9uY2Ugc3R1ZmZcbiAgdmFyIG9uY2VMaXN0ZW5lcnMgPSB0aGlzLl9vbmNlRXZlbnRzICYmIHRoaXMuX29uY2VFdmVudHNbIGV2ZW50TmFtZSBdO1xuXG4gIGZvciAoIHZhciBpPTA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyBpKysgKSB7XG4gICAgdmFyIGxpc3RlbmVyID0gbGlzdGVuZXJzW2ldXG4gICAgdmFyIGlzT25jZSA9IG9uY2VMaXN0ZW5lcnMgJiYgb25jZUxpc3RlbmVyc1sgbGlzdGVuZXIgXTtcbiAgICBpZiAoIGlzT25jZSApIHtcbiAgICAgIC8vIHJlbW92ZSBsaXN0ZW5lclxuICAgICAgLy8gcmVtb3ZlIGJlZm9yZSB0cmlnZ2VyIHRvIHByZXZlbnQgcmVjdXJzaW9uXG4gICAgICB0aGlzLm9mZiggZXZlbnROYW1lLCBsaXN0ZW5lciApO1xuICAgICAgLy8gdW5zZXQgb25jZSBmbGFnXG4gICAgICBkZWxldGUgb25jZUxpc3RlbmVyc1sgbGlzdGVuZXIgXTtcbiAgICB9XG4gICAgLy8gdHJpZ2dlciBsaXN0ZW5lclxuICAgIGxpc3RlbmVyLmFwcGx5KCB0aGlzLCBhcmdzICk7XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn07XG5cbnByb3RvLmFsbE9mZiA9IGZ1bmN0aW9uKCkge1xuICBkZWxldGUgdGhpcy5fZXZlbnRzO1xuICBkZWxldGUgdGhpcy5fb25jZUV2ZW50cztcbn07XG5cbnJldHVybiBFdkVtaXR0ZXI7XG5cbn0pKTtcbiIsIi8qIVxuICogaW1hZ2VzTG9hZGVkIHY0LjEuM1xuICogSmF2YVNjcmlwdCBpcyBhbGwgbGlrZSBcIllvdSBpbWFnZXMgYXJlIGRvbmUgeWV0IG9yIHdoYXQ/XCJcbiAqIE1JVCBMaWNlbnNlXG4gKi9cblxuKCBmdW5jdGlvbiggd2luZG93LCBmYWN0b3J5ICkgeyAndXNlIHN0cmljdCc7XG4gIC8vIHVuaXZlcnNhbCBtb2R1bGUgZGVmaW5pdGlvblxuXG4gIC8qZ2xvYmFsIGRlZmluZTogZmFsc2UsIG1vZHVsZTogZmFsc2UsIHJlcXVpcmU6IGZhbHNlICovXG5cbiAgaWYgKCB0eXBlb2YgZGVmaW5lID09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCApIHtcbiAgICAvLyBBTURcbiAgICBkZWZpbmUoIFtcbiAgICAgICdldi1lbWl0dGVyL2V2LWVtaXR0ZXInXG4gICAgXSwgZnVuY3Rpb24oIEV2RW1pdHRlciApIHtcbiAgICAgIHJldHVybiBmYWN0b3J5KCB3aW5kb3csIEV2RW1pdHRlciApO1xuICAgIH0pO1xuICB9IGVsc2UgaWYgKCB0eXBlb2YgbW9kdWxlID09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzICkge1xuICAgIC8vIENvbW1vbkpTXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KFxuICAgICAgd2luZG93LFxuICAgICAgcmVxdWlyZSgnZXYtZW1pdHRlcicpXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBicm93c2VyIGdsb2JhbFxuICAgIHdpbmRvdy5pbWFnZXNMb2FkZWQgPSBmYWN0b3J5KFxuICAgICAgd2luZG93LFxuICAgICAgd2luZG93LkV2RW1pdHRlclxuICAgICk7XG4gIH1cblxufSkoIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogdGhpcyxcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gIGZhY3RvcnkgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cblxuZnVuY3Rpb24gZmFjdG9yeSggd2luZG93LCBFdkVtaXR0ZXIgKSB7XG5cbid1c2Ugc3RyaWN0JztcblxudmFyICQgPSB3aW5kb3cualF1ZXJ5O1xudmFyIGNvbnNvbGUgPSB3aW5kb3cuY29uc29sZTtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gaGVscGVycyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG4vLyBleHRlbmQgb2JqZWN0c1xuZnVuY3Rpb24gZXh0ZW5kKCBhLCBiICkge1xuICBmb3IgKCB2YXIgcHJvcCBpbiBiICkge1xuICAgIGFbIHByb3AgXSA9IGJbIHByb3AgXTtcbiAgfVxuICByZXR1cm4gYTtcbn1cblxuLy8gdHVybiBlbGVtZW50IG9yIG5vZGVMaXN0IGludG8gYW4gYXJyYXlcbmZ1bmN0aW9uIG1ha2VBcnJheSggb2JqICkge1xuICB2YXIgYXJ5ID0gW107XG4gIGlmICggQXJyYXkuaXNBcnJheSggb2JqICkgKSB7XG4gICAgLy8gdXNlIG9iamVjdCBpZiBhbHJlYWR5IGFuIGFycmF5XG4gICAgYXJ5ID0gb2JqO1xuICB9IGVsc2UgaWYgKCB0eXBlb2Ygb2JqLmxlbmd0aCA9PSAnbnVtYmVyJyApIHtcbiAgICAvLyBjb252ZXJ0IG5vZGVMaXN0IHRvIGFycmF5XG4gICAgZm9yICggdmFyIGk9MDsgaSA8IG9iai5sZW5ndGg7IGkrKyApIHtcbiAgICAgIGFyeS5wdXNoKCBvYmpbaV0gKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gYXJyYXkgb2Ygc2luZ2xlIGluZGV4XG4gICAgYXJ5LnB1c2goIG9iaiApO1xuICB9XG4gIHJldHVybiBhcnk7XG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIGltYWdlc0xvYWRlZCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXksIEVsZW1lbnQsIE5vZGVMaXN0LCBTdHJpbmd9IGVsZW1cbiAqIEBwYXJhbSB7T2JqZWN0IG9yIEZ1bmN0aW9ufSBvcHRpb25zIC0gaWYgZnVuY3Rpb24sIHVzZSBhcyBjYWxsYmFja1xuICogQHBhcmFtIHtGdW5jdGlvbn0gb25BbHdheXMgLSBjYWxsYmFjayBmdW5jdGlvblxuICovXG5mdW5jdGlvbiBJbWFnZXNMb2FkZWQoIGVsZW0sIG9wdGlvbnMsIG9uQWx3YXlzICkge1xuICAvLyBjb2VyY2UgSW1hZ2VzTG9hZGVkKCkgd2l0aG91dCBuZXcsIHRvIGJlIG5ldyBJbWFnZXNMb2FkZWQoKVxuICBpZiAoICEoIHRoaXMgaW5zdGFuY2VvZiBJbWFnZXNMb2FkZWQgKSApIHtcbiAgICByZXR1cm4gbmV3IEltYWdlc0xvYWRlZCggZWxlbSwgb3B0aW9ucywgb25BbHdheXMgKTtcbiAgfVxuICAvLyB1c2UgZWxlbSBhcyBzZWxlY3RvciBzdHJpbmdcbiAgaWYgKCB0eXBlb2YgZWxlbSA9PSAnc3RyaW5nJyApIHtcbiAgICBlbGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCggZWxlbSApO1xuICB9XG5cbiAgdGhpcy5lbGVtZW50cyA9IG1ha2VBcnJheSggZWxlbSApO1xuICB0aGlzLm9wdGlvbnMgPSBleHRlbmQoIHt9LCB0aGlzLm9wdGlvbnMgKTtcblxuICBpZiAoIHR5cGVvZiBvcHRpb25zID09ICdmdW5jdGlvbicgKSB7XG4gICAgb25BbHdheXMgPSBvcHRpb25zO1xuICB9IGVsc2Uge1xuICAgIGV4dGVuZCggdGhpcy5vcHRpb25zLCBvcHRpb25zICk7XG4gIH1cblxuICBpZiAoIG9uQWx3YXlzICkge1xuICAgIHRoaXMub24oICdhbHdheXMnLCBvbkFsd2F5cyApO1xuICB9XG5cbiAgdGhpcy5nZXRJbWFnZXMoKTtcblxuICBpZiAoICQgKSB7XG4gICAgLy8gYWRkIGpRdWVyeSBEZWZlcnJlZCBvYmplY3RcbiAgICB0aGlzLmpxRGVmZXJyZWQgPSBuZXcgJC5EZWZlcnJlZCgpO1xuICB9XG5cbiAgLy8gSEFDSyBjaGVjayBhc3luYyB0byBhbGxvdyB0aW1lIHRvIGJpbmQgbGlzdGVuZXJzXG4gIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuY2hlY2soKTtcbiAgfS5iaW5kKCB0aGlzICkpO1xufVxuXG5JbWFnZXNMb2FkZWQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggRXZFbWl0dGVyLnByb3RvdHlwZSApO1xuXG5JbWFnZXNMb2FkZWQucHJvdG90eXBlLm9wdGlvbnMgPSB7fTtcblxuSW1hZ2VzTG9hZGVkLnByb3RvdHlwZS5nZXRJbWFnZXMgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5pbWFnZXMgPSBbXTtcblxuICAvLyBmaWx0ZXIgJiBmaW5kIGl0ZW1zIGlmIHdlIGhhdmUgYW4gaXRlbSBzZWxlY3RvclxuICB0aGlzLmVsZW1lbnRzLmZvckVhY2goIHRoaXMuYWRkRWxlbWVudEltYWdlcywgdGhpcyApO1xufTtcblxuLyoqXG4gKiBAcGFyYW0ge05vZGV9IGVsZW1lbnRcbiAqL1xuSW1hZ2VzTG9hZGVkLnByb3RvdHlwZS5hZGRFbGVtZW50SW1hZ2VzID0gZnVuY3Rpb24oIGVsZW0gKSB7XG4gIC8vIGZpbHRlciBzaWJsaW5nc1xuICBpZiAoIGVsZW0ubm9kZU5hbWUgPT0gJ0lNRycgKSB7XG4gICAgdGhpcy5hZGRJbWFnZSggZWxlbSApO1xuICB9XG4gIC8vIGdldCBiYWNrZ3JvdW5kIGltYWdlIG9uIGVsZW1lbnRcbiAgaWYgKCB0aGlzLm9wdGlvbnMuYmFja2dyb3VuZCA9PT0gdHJ1ZSApIHtcbiAgICB0aGlzLmFkZEVsZW1lbnRCYWNrZ3JvdW5kSW1hZ2VzKCBlbGVtICk7XG4gIH1cblxuICAvLyBmaW5kIGNoaWxkcmVuXG4gIC8vIG5vIG5vbi1lbGVtZW50IG5vZGVzLCAjMTQzXG4gIHZhciBub2RlVHlwZSA9IGVsZW0ubm9kZVR5cGU7XG4gIGlmICggIW5vZGVUeXBlIHx8ICFlbGVtZW50Tm9kZVR5cGVzWyBub2RlVHlwZSBdICkge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgY2hpbGRJbWdzID0gZWxlbS5xdWVyeVNlbGVjdG9yQWxsKCdpbWcnKTtcbiAgLy8gY29uY2F0IGNoaWxkRWxlbXMgdG8gZmlsdGVyRm91bmQgYXJyYXlcbiAgZm9yICggdmFyIGk9MDsgaSA8IGNoaWxkSW1ncy5sZW5ndGg7IGkrKyApIHtcbiAgICB2YXIgaW1nID0gY2hpbGRJbWdzW2ldO1xuICAgIHRoaXMuYWRkSW1hZ2UoIGltZyApO1xuICB9XG5cbiAgLy8gZ2V0IGNoaWxkIGJhY2tncm91bmQgaW1hZ2VzXG4gIGlmICggdHlwZW9mIHRoaXMub3B0aW9ucy5iYWNrZ3JvdW5kID09ICdzdHJpbmcnICkge1xuICAgIHZhciBjaGlsZHJlbiA9IGVsZW0ucXVlcnlTZWxlY3RvckFsbCggdGhpcy5vcHRpb25zLmJhY2tncm91bmQgKTtcbiAgICBmb3IgKCBpPTA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKyApIHtcbiAgICAgIHZhciBjaGlsZCA9IGNoaWxkcmVuW2ldO1xuICAgICAgdGhpcy5hZGRFbGVtZW50QmFja2dyb3VuZEltYWdlcyggY2hpbGQgKTtcbiAgICB9XG4gIH1cbn07XG5cbnZhciBlbGVtZW50Tm9kZVR5cGVzID0ge1xuICAxOiB0cnVlLFxuICA5OiB0cnVlLFxuICAxMTogdHJ1ZVxufTtcblxuSW1hZ2VzTG9hZGVkLnByb3RvdHlwZS5hZGRFbGVtZW50QmFja2dyb3VuZEltYWdlcyA9IGZ1bmN0aW9uKCBlbGVtICkge1xuICB2YXIgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKCBlbGVtICk7XG4gIGlmICggIXN0eWxlICkge1xuICAgIC8vIEZpcmVmb3ggcmV0dXJucyBudWxsIGlmIGluIGEgaGlkZGVuIGlmcmFtZSBodHRwczovL2J1Z3ppbC5sYS81NDgzOTdcbiAgICByZXR1cm47XG4gIH1cbiAgLy8gZ2V0IHVybCBpbnNpZGUgdXJsKFwiLi4uXCIpXG4gIHZhciByZVVSTCA9IC91cmxcXCgoWydcIl0pPyguKj8pXFwxXFwpL2dpO1xuICB2YXIgbWF0Y2hlcyA9IHJlVVJMLmV4ZWMoIHN0eWxlLmJhY2tncm91bmRJbWFnZSApO1xuICB3aGlsZSAoIG1hdGNoZXMgIT09IG51bGwgKSB7XG4gICAgdmFyIHVybCA9IG1hdGNoZXMgJiYgbWF0Y2hlc1syXTtcbiAgICBpZiAoIHVybCApIHtcbiAgICAgIHRoaXMuYWRkQmFja2dyb3VuZCggdXJsLCBlbGVtICk7XG4gICAgfVxuICAgIG1hdGNoZXMgPSByZVVSTC5leGVjKCBzdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgKTtcbiAgfVxufTtcblxuLyoqXG4gKiBAcGFyYW0ge0ltYWdlfSBpbWdcbiAqL1xuSW1hZ2VzTG9hZGVkLnByb3RvdHlwZS5hZGRJbWFnZSA9IGZ1bmN0aW9uKCBpbWcgKSB7XG4gIHZhciBsb2FkaW5nSW1hZ2UgPSBuZXcgTG9hZGluZ0ltYWdlKCBpbWcgKTtcbiAgdGhpcy5pbWFnZXMucHVzaCggbG9hZGluZ0ltYWdlICk7XG59O1xuXG5JbWFnZXNMb2FkZWQucHJvdG90eXBlLmFkZEJhY2tncm91bmQgPSBmdW5jdGlvbiggdXJsLCBlbGVtICkge1xuICB2YXIgYmFja2dyb3VuZCA9IG5ldyBCYWNrZ3JvdW5kKCB1cmwsIGVsZW0gKTtcbiAgdGhpcy5pbWFnZXMucHVzaCggYmFja2dyb3VuZCApO1xufTtcblxuSW1hZ2VzTG9hZGVkLnByb3RvdHlwZS5jaGVjayA9IGZ1bmN0aW9uKCkge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuICB0aGlzLnByb2dyZXNzZWRDb3VudCA9IDA7XG4gIHRoaXMuaGFzQW55QnJva2VuID0gZmFsc2U7XG4gIC8vIGNvbXBsZXRlIGlmIG5vIGltYWdlc1xuICBpZiAoICF0aGlzLmltYWdlcy5sZW5ndGggKSB7XG4gICAgdGhpcy5jb21wbGV0ZSgpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uUHJvZ3Jlc3MoIGltYWdlLCBlbGVtLCBtZXNzYWdlICkge1xuICAgIC8vIEhBQ0sgLSBDaHJvbWUgdHJpZ2dlcnMgZXZlbnQgYmVmb3JlIG9iamVjdCBwcm9wZXJ0aWVzIGhhdmUgY2hhbmdlZC4gIzgzXG4gICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG4gICAgICBfdGhpcy5wcm9ncmVzcyggaW1hZ2UsIGVsZW0sIG1lc3NhZ2UgKTtcbiAgICB9KTtcbiAgfVxuXG4gIHRoaXMuaW1hZ2VzLmZvckVhY2goIGZ1bmN0aW9uKCBsb2FkaW5nSW1hZ2UgKSB7XG4gICAgbG9hZGluZ0ltYWdlLm9uY2UoICdwcm9ncmVzcycsIG9uUHJvZ3Jlc3MgKTtcbiAgICBsb2FkaW5nSW1hZ2UuY2hlY2soKTtcbiAgfSk7XG59O1xuXG5JbWFnZXNMb2FkZWQucHJvdG90eXBlLnByb2dyZXNzID0gZnVuY3Rpb24oIGltYWdlLCBlbGVtLCBtZXNzYWdlICkge1xuICB0aGlzLnByb2dyZXNzZWRDb3VudCsrO1xuICB0aGlzLmhhc0FueUJyb2tlbiA9IHRoaXMuaGFzQW55QnJva2VuIHx8ICFpbWFnZS5pc0xvYWRlZDtcbiAgLy8gcHJvZ3Jlc3MgZXZlbnRcbiAgdGhpcy5lbWl0RXZlbnQoICdwcm9ncmVzcycsIFsgdGhpcywgaW1hZ2UsIGVsZW0gXSApO1xuICBpZiAoIHRoaXMuanFEZWZlcnJlZCAmJiB0aGlzLmpxRGVmZXJyZWQubm90aWZ5ICkge1xuICAgIHRoaXMuanFEZWZlcnJlZC5ub3RpZnkoIHRoaXMsIGltYWdlICk7XG4gIH1cbiAgLy8gY2hlY2sgaWYgY29tcGxldGVkXG4gIGlmICggdGhpcy5wcm9ncmVzc2VkQ291bnQgPT0gdGhpcy5pbWFnZXMubGVuZ3RoICkge1xuICAgIHRoaXMuY29tcGxldGUoKTtcbiAgfVxuXG4gIGlmICggdGhpcy5vcHRpb25zLmRlYnVnICYmIGNvbnNvbGUgKSB7XG4gICAgY29uc29sZS5sb2coICdwcm9ncmVzczogJyArIG1lc3NhZ2UsIGltYWdlLCBlbGVtICk7XG4gIH1cbn07XG5cbkltYWdlc0xvYWRlZC5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGV2ZW50TmFtZSA9IHRoaXMuaGFzQW55QnJva2VuID8gJ2ZhaWwnIDogJ2RvbmUnO1xuICB0aGlzLmlzQ29tcGxldGUgPSB0cnVlO1xuICB0aGlzLmVtaXRFdmVudCggZXZlbnROYW1lLCBbIHRoaXMgXSApO1xuICB0aGlzLmVtaXRFdmVudCggJ2Fsd2F5cycsIFsgdGhpcyBdICk7XG4gIGlmICggdGhpcy5qcURlZmVycmVkICkge1xuICAgIHZhciBqcU1ldGhvZCA9IHRoaXMuaGFzQW55QnJva2VuID8gJ3JlamVjdCcgOiAncmVzb2x2ZSc7XG4gICAgdGhpcy5qcURlZmVycmVkWyBqcU1ldGhvZCBdKCB0aGlzICk7XG4gIH1cbn07XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG5mdW5jdGlvbiBMb2FkaW5nSW1hZ2UoIGltZyApIHtcbiAgdGhpcy5pbWcgPSBpbWc7XG59XG5cbkxvYWRpbmdJbWFnZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBFdkVtaXR0ZXIucHJvdG90eXBlICk7XG5cbkxvYWRpbmdJbWFnZS5wcm90b3R5cGUuY2hlY2sgPSBmdW5jdGlvbigpIHtcbiAgLy8gSWYgY29tcGxldGUgaXMgdHJ1ZSBhbmQgYnJvd3NlciBzdXBwb3J0cyBuYXR1cmFsIHNpemVzLFxuICAvLyB0cnkgdG8gY2hlY2sgZm9yIGltYWdlIHN0YXR1cyBtYW51YWxseS5cbiAgdmFyIGlzQ29tcGxldGUgPSB0aGlzLmdldElzSW1hZ2VDb21wbGV0ZSgpO1xuICBpZiAoIGlzQ29tcGxldGUgKSB7XG4gICAgLy8gcmVwb3J0IGJhc2VkIG9uIG5hdHVyYWxXaWR0aFxuICAgIHRoaXMuY29uZmlybSggdGhpcy5pbWcubmF0dXJhbFdpZHRoICE9PSAwLCAnbmF0dXJhbFdpZHRoJyApO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIElmIG5vbmUgb2YgdGhlIGNoZWNrcyBhYm92ZSBtYXRjaGVkLCBzaW11bGF0ZSBsb2FkaW5nIG9uIGRldGFjaGVkIGVsZW1lbnQuXG4gIHRoaXMucHJveHlJbWFnZSA9IG5ldyBJbWFnZSgpO1xuICB0aGlzLnByb3h5SW1hZ2UuYWRkRXZlbnRMaXN0ZW5lciggJ2xvYWQnLCB0aGlzICk7XG4gIHRoaXMucHJveHlJbWFnZS5hZGRFdmVudExpc3RlbmVyKCAnZXJyb3InLCB0aGlzICk7XG4gIC8vIGJpbmQgdG8gaW1hZ2UgYXMgd2VsbCBmb3IgRmlyZWZveC4gIzE5MVxuICB0aGlzLmltZy5hZGRFdmVudExpc3RlbmVyKCAnbG9hZCcsIHRoaXMgKTtcbiAgdGhpcy5pbWcuYWRkRXZlbnRMaXN0ZW5lciggJ2Vycm9yJywgdGhpcyApO1xuICB0aGlzLnByb3h5SW1hZ2Uuc3JjID0gdGhpcy5pbWcuc3JjO1xufTtcblxuTG9hZGluZ0ltYWdlLnByb3RvdHlwZS5nZXRJc0ltYWdlQ29tcGxldGUgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuaW1nLmNvbXBsZXRlICYmIHRoaXMuaW1nLm5hdHVyYWxXaWR0aCAhPT0gdW5kZWZpbmVkO1xufTtcblxuTG9hZGluZ0ltYWdlLnByb3RvdHlwZS5jb25maXJtID0gZnVuY3Rpb24oIGlzTG9hZGVkLCBtZXNzYWdlICkge1xuICB0aGlzLmlzTG9hZGVkID0gaXNMb2FkZWQ7XG4gIHRoaXMuZW1pdEV2ZW50KCAncHJvZ3Jlc3MnLCBbIHRoaXMsIHRoaXMuaW1nLCBtZXNzYWdlIF0gKTtcbn07XG5cbi8vIC0tLS0tIGV2ZW50cyAtLS0tLSAvL1xuXG4vLyB0cmlnZ2VyIHNwZWNpZmllZCBoYW5kbGVyIGZvciBldmVudCB0eXBlXG5Mb2FkaW5nSW1hZ2UucHJvdG90eXBlLmhhbmRsZUV2ZW50ID0gZnVuY3Rpb24oIGV2ZW50ICkge1xuICB2YXIgbWV0aG9kID0gJ29uJyArIGV2ZW50LnR5cGU7XG4gIGlmICggdGhpc1sgbWV0aG9kIF0gKSB7XG4gICAgdGhpc1sgbWV0aG9kIF0oIGV2ZW50ICk7XG4gIH1cbn07XG5cbkxvYWRpbmdJbWFnZS5wcm90b3R5cGUub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuY29uZmlybSggdHJ1ZSwgJ29ubG9hZCcgKTtcbiAgdGhpcy51bmJpbmRFdmVudHMoKTtcbn07XG5cbkxvYWRpbmdJbWFnZS5wcm90b3R5cGUub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLmNvbmZpcm0oIGZhbHNlLCAnb25lcnJvcicgKTtcbiAgdGhpcy51bmJpbmRFdmVudHMoKTtcbn07XG5cbkxvYWRpbmdJbWFnZS5wcm90b3R5cGUudW5iaW5kRXZlbnRzID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMucHJveHlJbWFnZS5yZW1vdmVFdmVudExpc3RlbmVyKCAnbG9hZCcsIHRoaXMgKTtcbiAgdGhpcy5wcm94eUltYWdlLnJlbW92ZUV2ZW50TGlzdGVuZXIoICdlcnJvcicsIHRoaXMgKTtcbiAgdGhpcy5pbWcucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ2xvYWQnLCB0aGlzICk7XG4gIHRoaXMuaW1nLnJlbW92ZUV2ZW50TGlzdGVuZXIoICdlcnJvcicsIHRoaXMgKTtcbn07XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIEJhY2tncm91bmQgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cblxuZnVuY3Rpb24gQmFja2dyb3VuZCggdXJsLCBlbGVtZW50ICkge1xuICB0aGlzLnVybCA9IHVybDtcbiAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgdGhpcy5pbWcgPSBuZXcgSW1hZ2UoKTtcbn1cblxuLy8gaW5oZXJpdCBMb2FkaW5nSW1hZ2UgcHJvdG90eXBlXG5CYWNrZ3JvdW5kLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIExvYWRpbmdJbWFnZS5wcm90b3R5cGUgKTtcblxuQmFja2dyb3VuZC5wcm90b3R5cGUuY2hlY2sgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5pbWcuYWRkRXZlbnRMaXN0ZW5lciggJ2xvYWQnLCB0aGlzICk7XG4gIHRoaXMuaW1nLmFkZEV2ZW50TGlzdGVuZXIoICdlcnJvcicsIHRoaXMgKTtcbiAgdGhpcy5pbWcuc3JjID0gdGhpcy51cmw7XG4gIC8vIGNoZWNrIGlmIGltYWdlIGlzIGFscmVhZHkgY29tcGxldGVcbiAgdmFyIGlzQ29tcGxldGUgPSB0aGlzLmdldElzSW1hZ2VDb21wbGV0ZSgpO1xuICBpZiAoIGlzQ29tcGxldGUgKSB7XG4gICAgdGhpcy5jb25maXJtKCB0aGlzLmltZy5uYXR1cmFsV2lkdGggIT09IDAsICduYXR1cmFsV2lkdGgnICk7XG4gICAgdGhpcy51bmJpbmRFdmVudHMoKTtcbiAgfVxufTtcblxuQmFja2dyb3VuZC5wcm90b3R5cGUudW5iaW5kRXZlbnRzID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuaW1nLnJlbW92ZUV2ZW50TGlzdGVuZXIoICdsb2FkJywgdGhpcyApO1xuICB0aGlzLmltZy5yZW1vdmVFdmVudExpc3RlbmVyKCAnZXJyb3InLCB0aGlzICk7XG59O1xuXG5CYWNrZ3JvdW5kLnByb3RvdHlwZS5jb25maXJtID0gZnVuY3Rpb24oIGlzTG9hZGVkLCBtZXNzYWdlICkge1xuICB0aGlzLmlzTG9hZGVkID0gaXNMb2FkZWQ7XG4gIHRoaXMuZW1pdEV2ZW50KCAncHJvZ3Jlc3MnLCBbIHRoaXMsIHRoaXMuZWxlbWVudCwgbWVzc2FnZSBdICk7XG59O1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBqUXVlcnkgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cblxuSW1hZ2VzTG9hZGVkLm1ha2VKUXVlcnlQbHVnaW4gPSBmdW5jdGlvbiggalF1ZXJ5ICkge1xuICBqUXVlcnkgPSBqUXVlcnkgfHwgd2luZG93LmpRdWVyeTtcbiAgaWYgKCAhalF1ZXJ5ICkge1xuICAgIHJldHVybjtcbiAgfVxuICAvLyBzZXQgbG9jYWwgdmFyaWFibGVcbiAgJCA9IGpRdWVyeTtcbiAgLy8gJCgpLmltYWdlc0xvYWRlZCgpXG4gICQuZm4uaW1hZ2VzTG9hZGVkID0gZnVuY3Rpb24oIG9wdGlvbnMsIGNhbGxiYWNrICkge1xuICAgIHZhciBpbnN0YW5jZSA9IG5ldyBJbWFnZXNMb2FkZWQoIHRoaXMsIG9wdGlvbnMsIGNhbGxiYWNrICk7XG4gICAgcmV0dXJuIGluc3RhbmNlLmpxRGVmZXJyZWQucHJvbWlzZSggJCh0aGlzKSApO1xuICB9O1xufTtcbi8vIHRyeSBtYWtpbmcgcGx1Z2luXG5JbWFnZXNMb2FkZWQubWFrZUpRdWVyeVBsdWdpbigpO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cblxucmV0dXJuIEltYWdlc0xvYWRlZDtcblxufSk7XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBsb2Rhc2ggMy4xMC4xIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuICogQnVpbGQ6IGBsb2Rhc2ggbW9kZXJuIC1kIC1vIC4vaW5kZXguanNgXG4gKiBDb3B5cmlnaHQgMjAxMi0yMDE1IFRoZSBEb2pvIEZvdW5kYXRpb24gPGh0dHA6Ly9kb2pvZm91bmRhdGlvbi5vcmcvPlxuICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cbiAqIENvcHlyaWdodCAyMDA5LTIwMTUgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbiAqIEF2YWlsYWJsZSB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKi9cbjsoZnVuY3Rpb24oKSB7XG5cbiAgLyoqIFVzZWQgYXMgYSBzYWZlIHJlZmVyZW5jZSBmb3IgYHVuZGVmaW5lZGAgaW4gcHJlLUVTNSBlbnZpcm9ubWVudHMuICovXG4gIHZhciB1bmRlZmluZWQ7XG5cbiAgLyoqIFVzZWQgYXMgdGhlIHNlbWFudGljIHZlcnNpb24gbnVtYmVyLiAqL1xuICB2YXIgVkVSU0lPTiA9ICczLjEwLjEnO1xuXG4gIC8qKiBVc2VkIHRvIGNvbXBvc2UgYml0bWFza3MgZm9yIHdyYXBwZXIgbWV0YWRhdGEuICovXG4gIHZhciBCSU5EX0ZMQUcgPSAxLFxuICAgICAgQklORF9LRVlfRkxBRyA9IDIsXG4gICAgICBDVVJSWV9CT1VORF9GTEFHID0gNCxcbiAgICAgIENVUlJZX0ZMQUcgPSA4LFxuICAgICAgQ1VSUllfUklHSFRfRkxBRyA9IDE2LFxuICAgICAgUEFSVElBTF9GTEFHID0gMzIsXG4gICAgICBQQVJUSUFMX1JJR0hUX0ZMQUcgPSA2NCxcbiAgICAgIEFSWV9GTEFHID0gMTI4LFxuICAgICAgUkVBUkdfRkxBRyA9IDI1NjtcblxuICAvKiogVXNlZCBhcyBkZWZhdWx0IG9wdGlvbnMgZm9yIGBfLnRydW5jYC4gKi9cbiAgdmFyIERFRkFVTFRfVFJVTkNfTEVOR1RIID0gMzAsXG4gICAgICBERUZBVUxUX1RSVU5DX09NSVNTSU9OID0gJy4uLic7XG5cbiAgLyoqIFVzZWQgdG8gZGV0ZWN0IHdoZW4gYSBmdW5jdGlvbiBiZWNvbWVzIGhvdC4gKi9cbiAgdmFyIEhPVF9DT1VOVCA9IDE1MCxcbiAgICAgIEhPVF9TUEFOID0gMTY7XG5cbiAgLyoqIFVzZWQgYXMgdGhlIHNpemUgdG8gZW5hYmxlIGxhcmdlIGFycmF5IG9wdGltaXphdGlvbnMuICovXG4gIHZhciBMQVJHRV9BUlJBWV9TSVpFID0gMjAwO1xuXG4gIC8qKiBVc2VkIHRvIGluZGljYXRlIHRoZSB0eXBlIG9mIGxhenkgaXRlcmF0ZWVzLiAqL1xuICB2YXIgTEFaWV9GSUxURVJfRkxBRyA9IDEsXG4gICAgICBMQVpZX01BUF9GTEFHID0gMjtcblxuICAvKiogVXNlZCBhcyB0aGUgYFR5cGVFcnJvcmAgbWVzc2FnZSBmb3IgXCJGdW5jdGlvbnNcIiBtZXRob2RzLiAqL1xuICB2YXIgRlVOQ19FUlJPUl9URVhUID0gJ0V4cGVjdGVkIGEgZnVuY3Rpb24nO1xuXG4gIC8qKiBVc2VkIGFzIHRoZSBpbnRlcm5hbCBhcmd1bWVudCBwbGFjZWhvbGRlci4gKi9cbiAgdmFyIFBMQUNFSE9MREVSID0gJ19fbG9kYXNoX3BsYWNlaG9sZGVyX18nO1xuXG4gIC8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbiAgdmFyIGFyZ3NUYWcgPSAnW29iamVjdCBBcmd1bWVudHNdJyxcbiAgICAgIGFycmF5VGFnID0gJ1tvYmplY3QgQXJyYXldJyxcbiAgICAgIGJvb2xUYWcgPSAnW29iamVjdCBCb29sZWFuXScsXG4gICAgICBkYXRlVGFnID0gJ1tvYmplY3QgRGF0ZV0nLFxuICAgICAgZXJyb3JUYWcgPSAnW29iamVjdCBFcnJvcl0nLFxuICAgICAgZnVuY1RhZyA9ICdbb2JqZWN0IEZ1bmN0aW9uXScsXG4gICAgICBtYXBUYWcgPSAnW29iamVjdCBNYXBdJyxcbiAgICAgIG51bWJlclRhZyA9ICdbb2JqZWN0IE51bWJlcl0nLFxuICAgICAgb2JqZWN0VGFnID0gJ1tvYmplY3QgT2JqZWN0XScsXG4gICAgICByZWdleHBUYWcgPSAnW29iamVjdCBSZWdFeHBdJyxcbiAgICAgIHNldFRhZyA9ICdbb2JqZWN0IFNldF0nLFxuICAgICAgc3RyaW5nVGFnID0gJ1tvYmplY3QgU3RyaW5nXScsXG4gICAgICB3ZWFrTWFwVGFnID0gJ1tvYmplY3QgV2Vha01hcF0nO1xuXG4gIHZhciBhcnJheUJ1ZmZlclRhZyA9ICdbb2JqZWN0IEFycmF5QnVmZmVyXScsXG4gICAgICBmbG9hdDMyVGFnID0gJ1tvYmplY3QgRmxvYXQzMkFycmF5XScsXG4gICAgICBmbG9hdDY0VGFnID0gJ1tvYmplY3QgRmxvYXQ2NEFycmF5XScsXG4gICAgICBpbnQ4VGFnID0gJ1tvYmplY3QgSW50OEFycmF5XScsXG4gICAgICBpbnQxNlRhZyA9ICdbb2JqZWN0IEludDE2QXJyYXldJyxcbiAgICAgIGludDMyVGFnID0gJ1tvYmplY3QgSW50MzJBcnJheV0nLFxuICAgICAgdWludDhUYWcgPSAnW29iamVjdCBVaW50OEFycmF5XScsXG4gICAgICB1aW50OENsYW1wZWRUYWcgPSAnW29iamVjdCBVaW50OENsYW1wZWRBcnJheV0nLFxuICAgICAgdWludDE2VGFnID0gJ1tvYmplY3QgVWludDE2QXJyYXldJyxcbiAgICAgIHVpbnQzMlRhZyA9ICdbb2JqZWN0IFVpbnQzMkFycmF5XSc7XG5cbiAgLyoqIFVzZWQgdG8gbWF0Y2ggZW1wdHkgc3RyaW5nIGxpdGVyYWxzIGluIGNvbXBpbGVkIHRlbXBsYXRlIHNvdXJjZS4gKi9cbiAgdmFyIHJlRW1wdHlTdHJpbmdMZWFkaW5nID0gL1xcYl9fcCBcXCs9ICcnOy9nLFxuICAgICAgcmVFbXB0eVN0cmluZ01pZGRsZSA9IC9cXGIoX19wIFxcKz0pICcnIFxcKy9nLFxuICAgICAgcmVFbXB0eVN0cmluZ1RyYWlsaW5nID0gLyhfX2VcXCguKj9cXCl8XFxiX190XFwpKSBcXCtcXG4nJzsvZztcblxuICAvKiogVXNlZCB0byBtYXRjaCBIVE1MIGVudGl0aWVzIGFuZCBIVE1MIGNoYXJhY3RlcnMuICovXG4gIHZhciByZUVzY2FwZWRIdG1sID0gLyYoPzphbXB8bHR8Z3R8cXVvdHwjMzl8Izk2KTsvZyxcbiAgICAgIHJlVW5lc2NhcGVkSHRtbCA9IC9bJjw+XCInYF0vZyxcbiAgICAgIHJlSGFzRXNjYXBlZEh0bWwgPSBSZWdFeHAocmVFc2NhcGVkSHRtbC5zb3VyY2UpLFxuICAgICAgcmVIYXNVbmVzY2FwZWRIdG1sID0gUmVnRXhwKHJlVW5lc2NhcGVkSHRtbC5zb3VyY2UpO1xuXG4gIC8qKiBVc2VkIHRvIG1hdGNoIHRlbXBsYXRlIGRlbGltaXRlcnMuICovXG4gIHZhciByZUVzY2FwZSA9IC88JS0oW1xcc1xcU10rPyklPi9nLFxuICAgICAgcmVFdmFsdWF0ZSA9IC88JShbXFxzXFxTXSs/KSU+L2csXG4gICAgICByZUludGVycG9sYXRlID0gLzwlPShbXFxzXFxTXSs/KSU+L2c7XG5cbiAgLyoqIFVzZWQgdG8gbWF0Y2ggcHJvcGVydHkgbmFtZXMgd2l0aGluIHByb3BlcnR5IHBhdGhzLiAqL1xuICB2YXIgcmVJc0RlZXBQcm9wID0gL1xcLnxcXFsoPzpbXltcXF1dKnwoW1wiJ10pKD86KD8hXFwxKVteXFxuXFxcXF18XFxcXC4pKj9cXDEpXFxdLyxcbiAgICAgIHJlSXNQbGFpblByb3AgPSAvXlxcdyokLyxcbiAgICAgIHJlUHJvcE5hbWUgPSAvW14uW1xcXV0rfFxcWyg/OigtP1xcZCsoPzpcXC5cXGQrKT8pfChbXCInXSkoKD86KD8hXFwyKVteXFxuXFxcXF18XFxcXC4pKj8pXFwyKVxcXS9nO1xuXG4gIC8qKlxuICAgKiBVc2VkIHRvIG1hdGNoIGBSZWdFeHBgIFtzeW50YXggY2hhcmFjdGVyc10oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtcGF0dGVybnMpXG4gICAqIGFuZCB0aG9zZSBvdXRsaW5lZCBieSBbYEVzY2FwZVJlZ0V4cFBhdHRlcm5gXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1lc2NhcGVyZWdleHBwYXR0ZXJuKS5cbiAgICovXG4gIHZhciByZVJlZ0V4cENoYXJzID0gL15bOiEsXXxbXFxcXF4kLiorPygpW1xcXXt9fFxcL118KF5bMC05YS1mQS1GbnJ0dXZ4XSl8KFtcXG5cXHJcXHUyMDI4XFx1MjAyOV0pL2csXG4gICAgICByZUhhc1JlZ0V4cENoYXJzID0gUmVnRXhwKHJlUmVnRXhwQ2hhcnMuc291cmNlKTtcblxuICAvKiogVXNlZCB0byBtYXRjaCBbY29tYmluaW5nIGRpYWNyaXRpY2FsIG1hcmtzXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Db21iaW5pbmdfRGlhY3JpdGljYWxfTWFya3MpLiAqL1xuICB2YXIgcmVDb21ib01hcmsgPSAvW1xcdTAzMDAtXFx1MDM2ZlxcdWZlMjAtXFx1ZmUyM10vZztcblxuICAvKiogVXNlZCB0byBtYXRjaCBiYWNrc2xhc2hlcyBpbiBwcm9wZXJ0eSBwYXRocy4gKi9cbiAgdmFyIHJlRXNjYXBlQ2hhciA9IC9cXFxcKFxcXFwpPy9nO1xuXG4gIC8qKiBVc2VkIHRvIG1hdGNoIFtFUyB0ZW1wbGF0ZSBkZWxpbWl0ZXJzXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy10ZW1wbGF0ZS1saXRlcmFsLWxleGljYWwtY29tcG9uZW50cykuICovXG4gIHZhciByZUVzVGVtcGxhdGUgPSAvXFwkXFx7KFteXFxcXH1dKig/OlxcXFwuW15cXFxcfV0qKSopXFx9L2c7XG5cbiAgLyoqIFVzZWQgdG8gbWF0Y2ggYFJlZ0V4cGAgZmxhZ3MgZnJvbSB0aGVpciBjb2VyY2VkIHN0cmluZyB2YWx1ZXMuICovXG4gIHZhciByZUZsYWdzID0gL1xcdyokLztcblxuICAvKiogVXNlZCB0byBkZXRlY3QgaGV4YWRlY2ltYWwgc3RyaW5nIHZhbHVlcy4gKi9cbiAgdmFyIHJlSGFzSGV4UHJlZml4ID0gL14wW3hYXS87XG5cbiAgLyoqIFVzZWQgdG8gZGV0ZWN0IGhvc3QgY29uc3RydWN0b3JzIChTYWZhcmkgPiA1KS4gKi9cbiAgdmFyIHJlSXNIb3N0Q3RvciA9IC9eXFxbb2JqZWN0IC4rP0NvbnN0cnVjdG9yXFxdJC87XG5cbiAgLyoqIFVzZWQgdG8gZGV0ZWN0IHVuc2lnbmVkIGludGVnZXIgdmFsdWVzLiAqL1xuICB2YXIgcmVJc1VpbnQgPSAvXlxcZCskLztcblxuICAvKiogVXNlZCB0byBtYXRjaCBsYXRpbi0xIHN1cHBsZW1lbnRhcnkgbGV0dGVycyAoZXhjbHVkaW5nIG1hdGhlbWF0aWNhbCBvcGVyYXRvcnMpLiAqL1xuICB2YXIgcmVMYXRpbjEgPSAvW1xceGMwLVxceGQ2XFx4ZDgtXFx4ZGVcXHhkZi1cXHhmNlxceGY4LVxceGZmXS9nO1xuXG4gIC8qKiBVc2VkIHRvIGVuc3VyZSBjYXB0dXJpbmcgb3JkZXIgb2YgdGVtcGxhdGUgZGVsaW1pdGVycy4gKi9cbiAgdmFyIHJlTm9NYXRjaCA9IC8oJF4pLztcblxuICAvKiogVXNlZCB0byBtYXRjaCB1bmVzY2FwZWQgY2hhcmFjdGVycyBpbiBjb21waWxlZCBzdHJpbmcgbGl0ZXJhbHMuICovXG4gIHZhciByZVVuZXNjYXBlZFN0cmluZyA9IC9bJ1xcblxcclxcdTIwMjhcXHUyMDI5XFxcXF0vZztcblxuICAvKiogVXNlZCB0byBtYXRjaCB3b3JkcyB0byBjcmVhdGUgY29tcG91bmQgd29yZHMuICovXG4gIHZhciByZVdvcmRzID0gKGZ1bmN0aW9uKCkge1xuICAgIHZhciB1cHBlciA9ICdbQS1aXFxcXHhjMC1cXFxceGQ2XFxcXHhkOC1cXFxceGRlXScsXG4gICAgICAgIGxvd2VyID0gJ1thLXpcXFxceGRmLVxcXFx4ZjZcXFxceGY4LVxcXFx4ZmZdKyc7XG5cbiAgICByZXR1cm4gUmVnRXhwKHVwcGVyICsgJysoPz0nICsgdXBwZXIgKyBsb3dlciArICcpfCcgKyB1cHBlciArICc/JyArIGxvd2VyICsgJ3wnICsgdXBwZXIgKyAnK3xbMC05XSsnLCAnZycpO1xuICB9KCkpO1xuXG4gIC8qKiBVc2VkIHRvIGFzc2lnbiBkZWZhdWx0IGBjb250ZXh0YCBvYmplY3QgcHJvcGVydGllcy4gKi9cbiAgdmFyIGNvbnRleHRQcm9wcyA9IFtcbiAgICAnQXJyYXknLCAnQXJyYXlCdWZmZXInLCAnRGF0ZScsICdFcnJvcicsICdGbG9hdDMyQXJyYXknLCAnRmxvYXQ2NEFycmF5JyxcbiAgICAnRnVuY3Rpb24nLCAnSW50OEFycmF5JywgJ0ludDE2QXJyYXknLCAnSW50MzJBcnJheScsICdNYXRoJywgJ051bWJlcicsXG4gICAgJ09iamVjdCcsICdSZWdFeHAnLCAnU2V0JywgJ1N0cmluZycsICdfJywgJ2NsZWFyVGltZW91dCcsICdpc0Zpbml0ZScsXG4gICAgJ3BhcnNlRmxvYXQnLCAncGFyc2VJbnQnLCAnc2V0VGltZW91dCcsICdUeXBlRXJyb3InLCAnVWludDhBcnJheScsXG4gICAgJ1VpbnQ4Q2xhbXBlZEFycmF5JywgJ1VpbnQxNkFycmF5JywgJ1VpbnQzMkFycmF5JywgJ1dlYWtNYXAnXG4gIF07XG5cbiAgLyoqIFVzZWQgdG8gbWFrZSB0ZW1wbGF0ZSBzb3VyY2VVUkxzIGVhc2llciB0byBpZGVudGlmeS4gKi9cbiAgdmFyIHRlbXBsYXRlQ291bnRlciA9IC0xO1xuXG4gIC8qKiBVc2VkIHRvIGlkZW50aWZ5IGB0b1N0cmluZ1RhZ2AgdmFsdWVzIG9mIHR5cGVkIGFycmF5cy4gKi9cbiAgdmFyIHR5cGVkQXJyYXlUYWdzID0ge307XG4gIHR5cGVkQXJyYXlUYWdzW2Zsb2F0MzJUYWddID0gdHlwZWRBcnJheVRhZ3NbZmxvYXQ2NFRhZ10gPVxuICB0eXBlZEFycmF5VGFnc1tpbnQ4VGFnXSA9IHR5cGVkQXJyYXlUYWdzW2ludDE2VGFnXSA9XG4gIHR5cGVkQXJyYXlUYWdzW2ludDMyVGFnXSA9IHR5cGVkQXJyYXlUYWdzW3VpbnQ4VGFnXSA9XG4gIHR5cGVkQXJyYXlUYWdzW3VpbnQ4Q2xhbXBlZFRhZ10gPSB0eXBlZEFycmF5VGFnc1t1aW50MTZUYWddID1cbiAgdHlwZWRBcnJheVRhZ3NbdWludDMyVGFnXSA9IHRydWU7XG4gIHR5cGVkQXJyYXlUYWdzW2FyZ3NUYWddID0gdHlwZWRBcnJheVRhZ3NbYXJyYXlUYWddID1cbiAgdHlwZWRBcnJheVRhZ3NbYXJyYXlCdWZmZXJUYWddID0gdHlwZWRBcnJheVRhZ3NbYm9vbFRhZ10gPVxuICB0eXBlZEFycmF5VGFnc1tkYXRlVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2Vycm9yVGFnXSA9XG4gIHR5cGVkQXJyYXlUYWdzW2Z1bmNUYWddID0gdHlwZWRBcnJheVRhZ3NbbWFwVGFnXSA9XG4gIHR5cGVkQXJyYXlUYWdzW251bWJlclRhZ10gPSB0eXBlZEFycmF5VGFnc1tvYmplY3RUYWddID1cbiAgdHlwZWRBcnJheVRhZ3NbcmVnZXhwVGFnXSA9IHR5cGVkQXJyYXlUYWdzW3NldFRhZ10gPVxuICB0eXBlZEFycmF5VGFnc1tzdHJpbmdUYWddID0gdHlwZWRBcnJheVRhZ3Nbd2Vha01hcFRhZ10gPSBmYWxzZTtcblxuICAvKiogVXNlZCB0byBpZGVudGlmeSBgdG9TdHJpbmdUYWdgIHZhbHVlcyBzdXBwb3J0ZWQgYnkgYF8uY2xvbmVgLiAqL1xuICB2YXIgY2xvbmVhYmxlVGFncyA9IHt9O1xuICBjbG9uZWFibGVUYWdzW2FyZ3NUYWddID0gY2xvbmVhYmxlVGFnc1thcnJheVRhZ10gPVxuICBjbG9uZWFibGVUYWdzW2FycmF5QnVmZmVyVGFnXSA9IGNsb25lYWJsZVRhZ3NbYm9vbFRhZ10gPVxuICBjbG9uZWFibGVUYWdzW2RhdGVUYWddID0gY2xvbmVhYmxlVGFnc1tmbG9hdDMyVGFnXSA9XG4gIGNsb25lYWJsZVRhZ3NbZmxvYXQ2NFRhZ10gPSBjbG9uZWFibGVUYWdzW2ludDhUYWddID1cbiAgY2xvbmVhYmxlVGFnc1tpbnQxNlRhZ10gPSBjbG9uZWFibGVUYWdzW2ludDMyVGFnXSA9XG4gIGNsb25lYWJsZVRhZ3NbbnVtYmVyVGFnXSA9IGNsb25lYWJsZVRhZ3Nbb2JqZWN0VGFnXSA9XG4gIGNsb25lYWJsZVRhZ3NbcmVnZXhwVGFnXSA9IGNsb25lYWJsZVRhZ3Nbc3RyaW5nVGFnXSA9XG4gIGNsb25lYWJsZVRhZ3NbdWludDhUYWddID0gY2xvbmVhYmxlVGFnc1t1aW50OENsYW1wZWRUYWddID1cbiAgY2xvbmVhYmxlVGFnc1t1aW50MTZUYWddID0gY2xvbmVhYmxlVGFnc1t1aW50MzJUYWddID0gdHJ1ZTtcbiAgY2xvbmVhYmxlVGFnc1tlcnJvclRhZ10gPSBjbG9uZWFibGVUYWdzW2Z1bmNUYWddID1cbiAgY2xvbmVhYmxlVGFnc1ttYXBUYWddID0gY2xvbmVhYmxlVGFnc1tzZXRUYWddID1cbiAgY2xvbmVhYmxlVGFnc1t3ZWFrTWFwVGFnXSA9IGZhbHNlO1xuXG4gIC8qKiBVc2VkIHRvIG1hcCBsYXRpbi0xIHN1cHBsZW1lbnRhcnkgbGV0dGVycyB0byBiYXNpYyBsYXRpbiBsZXR0ZXJzLiAqL1xuICB2YXIgZGVidXJyZWRMZXR0ZXJzID0ge1xuICAgICdcXHhjMCc6ICdBJywgICdcXHhjMSc6ICdBJywgJ1xceGMyJzogJ0EnLCAnXFx4YzMnOiAnQScsICdcXHhjNCc6ICdBJywgJ1xceGM1JzogJ0EnLFxuICAgICdcXHhlMCc6ICdhJywgICdcXHhlMSc6ICdhJywgJ1xceGUyJzogJ2EnLCAnXFx4ZTMnOiAnYScsICdcXHhlNCc6ICdhJywgJ1xceGU1JzogJ2EnLFxuICAgICdcXHhjNyc6ICdDJywgICdcXHhlNyc6ICdjJyxcbiAgICAnXFx4ZDAnOiAnRCcsICAnXFx4ZjAnOiAnZCcsXG4gICAgJ1xceGM4JzogJ0UnLCAgJ1xceGM5JzogJ0UnLCAnXFx4Y2EnOiAnRScsICdcXHhjYic6ICdFJyxcbiAgICAnXFx4ZTgnOiAnZScsICAnXFx4ZTknOiAnZScsICdcXHhlYSc6ICdlJywgJ1xceGViJzogJ2UnLFxuICAgICdcXHhjQyc6ICdJJywgICdcXHhjZCc6ICdJJywgJ1xceGNlJzogJ0knLCAnXFx4Y2YnOiAnSScsXG4gICAgJ1xceGVDJzogJ2knLCAgJ1xceGVkJzogJ2knLCAnXFx4ZWUnOiAnaScsICdcXHhlZic6ICdpJyxcbiAgICAnXFx4ZDEnOiAnTicsICAnXFx4ZjEnOiAnbicsXG4gICAgJ1xceGQyJzogJ08nLCAgJ1xceGQzJzogJ08nLCAnXFx4ZDQnOiAnTycsICdcXHhkNSc6ICdPJywgJ1xceGQ2JzogJ08nLCAnXFx4ZDgnOiAnTycsXG4gICAgJ1xceGYyJzogJ28nLCAgJ1xceGYzJzogJ28nLCAnXFx4ZjQnOiAnbycsICdcXHhmNSc6ICdvJywgJ1xceGY2JzogJ28nLCAnXFx4ZjgnOiAnbycsXG4gICAgJ1xceGQ5JzogJ1UnLCAgJ1xceGRhJzogJ1UnLCAnXFx4ZGInOiAnVScsICdcXHhkYyc6ICdVJyxcbiAgICAnXFx4ZjknOiAndScsICAnXFx4ZmEnOiAndScsICdcXHhmYic6ICd1JywgJ1xceGZjJzogJ3UnLFxuICAgICdcXHhkZCc6ICdZJywgICdcXHhmZCc6ICd5JywgJ1xceGZmJzogJ3knLFxuICAgICdcXHhjNic6ICdBZScsICdcXHhlNic6ICdhZScsXG4gICAgJ1xceGRlJzogJ1RoJywgJ1xceGZlJzogJ3RoJyxcbiAgICAnXFx4ZGYnOiAnc3MnXG4gIH07XG5cbiAgLyoqIFVzZWQgdG8gbWFwIGNoYXJhY3RlcnMgdG8gSFRNTCBlbnRpdGllcy4gKi9cbiAgdmFyIGh0bWxFc2NhcGVzID0ge1xuICAgICcmJzogJyZhbXA7JyxcbiAgICAnPCc6ICcmbHQ7JyxcbiAgICAnPic6ICcmZ3Q7JyxcbiAgICAnXCInOiAnJnF1b3Q7JyxcbiAgICBcIidcIjogJyYjMzk7JyxcbiAgICAnYCc6ICcmIzk2OydcbiAgfTtcblxuICAvKiogVXNlZCB0byBtYXAgSFRNTCBlbnRpdGllcyB0byBjaGFyYWN0ZXJzLiAqL1xuICB2YXIgaHRtbFVuZXNjYXBlcyA9IHtcbiAgICAnJmFtcDsnOiAnJicsXG4gICAgJyZsdDsnOiAnPCcsXG4gICAgJyZndDsnOiAnPicsXG4gICAgJyZxdW90Oyc6ICdcIicsXG4gICAgJyYjMzk7JzogXCInXCIsXG4gICAgJyYjOTY7JzogJ2AnXG4gIH07XG5cbiAgLyoqIFVzZWQgdG8gZGV0ZXJtaW5lIGlmIHZhbHVlcyBhcmUgb2YgdGhlIGxhbmd1YWdlIHR5cGUgYE9iamVjdGAuICovXG4gIHZhciBvYmplY3RUeXBlcyA9IHtcbiAgICAnZnVuY3Rpb24nOiB0cnVlLFxuICAgICdvYmplY3QnOiB0cnVlXG4gIH07XG5cbiAgLyoqIFVzZWQgdG8gZXNjYXBlIGNoYXJhY3RlcnMgZm9yIGluY2x1c2lvbiBpbiBjb21waWxlZCByZWdleGVzLiAqL1xuICB2YXIgcmVnZXhwRXNjYXBlcyA9IHtcbiAgICAnMCc6ICd4MzAnLCAnMSc6ICd4MzEnLCAnMic6ICd4MzInLCAnMyc6ICd4MzMnLCAnNCc6ICd4MzQnLFxuICAgICc1JzogJ3gzNScsICc2JzogJ3gzNicsICc3JzogJ3gzNycsICc4JzogJ3gzOCcsICc5JzogJ3gzOScsXG4gICAgJ0EnOiAneDQxJywgJ0InOiAneDQyJywgJ0MnOiAneDQzJywgJ0QnOiAneDQ0JywgJ0UnOiAneDQ1JywgJ0YnOiAneDQ2JyxcbiAgICAnYSc6ICd4NjEnLCAnYic6ICd4NjInLCAnYyc6ICd4NjMnLCAnZCc6ICd4NjQnLCAnZSc6ICd4NjUnLCAnZic6ICd4NjYnLFxuICAgICduJzogJ3g2ZScsICdyJzogJ3g3MicsICd0JzogJ3g3NCcsICd1JzogJ3g3NScsICd2JzogJ3g3NicsICd4JzogJ3g3OCdcbiAgfTtcblxuICAvKiogVXNlZCB0byBlc2NhcGUgY2hhcmFjdGVycyBmb3IgaW5jbHVzaW9uIGluIGNvbXBpbGVkIHN0cmluZyBsaXRlcmFscy4gKi9cbiAgdmFyIHN0cmluZ0VzY2FwZXMgPSB7XG4gICAgJ1xcXFwnOiAnXFxcXCcsXG4gICAgXCInXCI6IFwiJ1wiLFxuICAgICdcXG4nOiAnbicsXG4gICAgJ1xccic6ICdyJyxcbiAgICAnXFx1MjAyOCc6ICd1MjAyOCcsXG4gICAgJ1xcdTIwMjknOiAndTIwMjknXG4gIH07XG5cbiAgLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBleHBvcnRzYC4gKi9cbiAgdmFyIGZyZWVFeHBvcnRzID0gb2JqZWN0VHlwZXNbdHlwZW9mIGV4cG9ydHNdICYmIGV4cG9ydHMgJiYgIWV4cG9ydHMubm9kZVR5cGUgJiYgZXhwb3J0cztcblxuICAvKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYG1vZHVsZWAuICovXG4gIHZhciBmcmVlTW9kdWxlID0gb2JqZWN0VHlwZXNbdHlwZW9mIG1vZHVsZV0gJiYgbW9kdWxlICYmICFtb2R1bGUubm9kZVR5cGUgJiYgbW9kdWxlO1xuXG4gIC8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgZ2xvYmFsYCBmcm9tIE5vZGUuanMuICovXG4gIHZhciBmcmVlR2xvYmFsID0gZnJlZUV4cG9ydHMgJiYgZnJlZU1vZHVsZSAmJiB0eXBlb2YgZ2xvYmFsID09ICdvYmplY3QnICYmIGdsb2JhbCAmJiBnbG9iYWwuT2JqZWN0ICYmIGdsb2JhbDtcblxuICAvKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYHNlbGZgLiAqL1xuICB2YXIgZnJlZVNlbGYgPSBvYmplY3RUeXBlc1t0eXBlb2Ygc2VsZl0gJiYgc2VsZiAmJiBzZWxmLk9iamVjdCAmJiBzZWxmO1xuXG4gIC8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgd2luZG93YC4gKi9cbiAgdmFyIGZyZWVXaW5kb3cgPSBvYmplY3RUeXBlc1t0eXBlb2Ygd2luZG93XSAmJiB3aW5kb3cgJiYgd2luZG93Lk9iamVjdCAmJiB3aW5kb3c7XG5cbiAgLyoqIERldGVjdCB0aGUgcG9wdWxhciBDb21tb25KUyBleHRlbnNpb24gYG1vZHVsZS5leHBvcnRzYC4gKi9cbiAgdmFyIG1vZHVsZUV4cG9ydHMgPSBmcmVlTW9kdWxlICYmIGZyZWVNb2R1bGUuZXhwb3J0cyA9PT0gZnJlZUV4cG9ydHMgJiYgZnJlZUV4cG9ydHM7XG5cbiAgLyoqXG4gICAqIFVzZWQgYXMgYSByZWZlcmVuY2UgdG8gdGhlIGdsb2JhbCBvYmplY3QuXG4gICAqXG4gICAqIFRoZSBgdGhpc2AgdmFsdWUgaXMgdXNlZCBpZiBpdCdzIHRoZSBnbG9iYWwgb2JqZWN0IHRvIGF2b2lkIEdyZWFzZW1vbmtleSdzXG4gICAqIHJlc3RyaWN0ZWQgYHdpbmRvd2Agb2JqZWN0LCBvdGhlcndpc2UgdGhlIGB3aW5kb3dgIG9iamVjdCBpcyB1c2VkLlxuICAgKi9cbiAgdmFyIHJvb3QgPSBmcmVlR2xvYmFsIHx8ICgoZnJlZVdpbmRvdyAhPT0gKHRoaXMgJiYgdGhpcy53aW5kb3cpKSAmJiBmcmVlV2luZG93KSB8fCBmcmVlU2VsZiB8fCB0aGlzO1xuXG4gIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gIC8qKlxuICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgY29tcGFyZUFzY2VuZGluZ2Agd2hpY2ggY29tcGFyZXMgdmFsdWVzIGFuZFxuICAgKiBzb3J0cyB0aGVtIGluIGFzY2VuZGluZyBvcmRlciB3aXRob3V0IGd1YXJhbnRlZWluZyBhIHN0YWJsZSBzb3J0LlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb21wYXJlLlxuICAgKiBAcGFyYW0geyp9IG90aGVyIFRoZSBvdGhlciB2YWx1ZSB0byBjb21wYXJlLlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBzb3J0IG9yZGVyIGluZGljYXRvciBmb3IgYHZhbHVlYC5cbiAgICovXG4gIGZ1bmN0aW9uIGJhc2VDb21wYXJlQXNjZW5kaW5nKHZhbHVlLCBvdGhlcikge1xuICAgIGlmICh2YWx1ZSAhPT0gb3RoZXIpIHtcbiAgICAgIHZhciB2YWxJc051bGwgPSB2YWx1ZSA9PT0gbnVsbCxcbiAgICAgICAgICB2YWxJc1VuZGVmID0gdmFsdWUgPT09IHVuZGVmaW5lZCxcbiAgICAgICAgICB2YWxJc1JlZmxleGl2ZSA9IHZhbHVlID09PSB2YWx1ZTtcblxuICAgICAgdmFyIG90aElzTnVsbCA9IG90aGVyID09PSBudWxsLFxuICAgICAgICAgIG90aElzVW5kZWYgPSBvdGhlciA9PT0gdW5kZWZpbmVkLFxuICAgICAgICAgIG90aElzUmVmbGV4aXZlID0gb3RoZXIgPT09IG90aGVyO1xuXG4gICAgICBpZiAoKHZhbHVlID4gb3RoZXIgJiYgIW90aElzTnVsbCkgfHwgIXZhbElzUmVmbGV4aXZlIHx8XG4gICAgICAgICAgKHZhbElzTnVsbCAmJiAhb3RoSXNVbmRlZiAmJiBvdGhJc1JlZmxleGl2ZSkgfHxcbiAgICAgICAgICAodmFsSXNVbmRlZiAmJiBvdGhJc1JlZmxleGl2ZSkpIHtcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgICB9XG4gICAgICBpZiAoKHZhbHVlIDwgb3RoZXIgJiYgIXZhbElzTnVsbCkgfHwgIW90aElzUmVmbGV4aXZlIHx8XG4gICAgICAgICAgKG90aElzTnVsbCAmJiAhdmFsSXNVbmRlZiAmJiB2YWxJc1JlZmxleGl2ZSkgfHxcbiAgICAgICAgICAob3RoSXNVbmRlZiAmJiB2YWxJc1JlZmxleGl2ZSkpIHtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5maW5kSW5kZXhgIGFuZCBgXy5maW5kTGFzdEluZGV4YCB3aXRob3V0XG4gICAqIHN1cHBvcnQgZm9yIGNhbGxiYWNrIHNob3J0aGFuZHMgYW5kIGB0aGlzYCBiaW5kaW5nLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gc2VhcmNoLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICogQHBhcmFtIHtib29sZWFufSBbZnJvbVJpZ2h0XSBTcGVjaWZ5IGl0ZXJhdGluZyBmcm9tIHJpZ2h0IHRvIGxlZnQuXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBtYXRjaGVkIHZhbHVlLCBlbHNlIGAtMWAuXG4gICAqL1xuICBmdW5jdGlvbiBiYXNlRmluZEluZGV4KGFycmF5LCBwcmVkaWNhdGUsIGZyb21SaWdodCkge1xuICAgIHZhciBsZW5ndGggPSBhcnJheS5sZW5ndGgsXG4gICAgICAgIGluZGV4ID0gZnJvbVJpZ2h0ID8gbGVuZ3RoIDogLTE7XG5cbiAgICB3aGlsZSAoKGZyb21SaWdodCA/IGluZGV4LS0gOiArK2luZGV4IDwgbGVuZ3RoKSkge1xuICAgICAgaWYgKHByZWRpY2F0ZShhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSkpIHtcbiAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gLTE7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaW5kZXhPZmAgd2l0aG91dCBzdXBwb3J0IGZvciBiaW5hcnkgc2VhcmNoZXMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBzZWFyY2guXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNlYXJjaCBmb3IuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBmcm9tSW5kZXggVGhlIGluZGV4IHRvIHNlYXJjaCBmcm9tLlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgbWF0Y2hlZCB2YWx1ZSwgZWxzZSBgLTFgLlxuICAgKi9cbiAgZnVuY3Rpb24gYmFzZUluZGV4T2YoYXJyYXksIHZhbHVlLCBmcm9tSW5kZXgpIHtcbiAgICBpZiAodmFsdWUgIT09IHZhbHVlKSB7XG4gICAgICByZXR1cm4gaW5kZXhPZk5hTihhcnJheSwgZnJvbUluZGV4KTtcbiAgICB9XG4gICAgdmFyIGluZGV4ID0gZnJvbUluZGV4IC0gMSxcbiAgICAgICAgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuXG4gICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgIGlmIChhcnJheVtpbmRleF0gPT09IHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBpbmRleDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIC0xO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmlzRnVuY3Rpb25gIHdpdGhvdXQgc3VwcG9ydCBmb3IgZW52aXJvbm1lbnRzXG4gICAqIHdpdGggaW5jb3JyZWN0IGB0eXBlb2ZgIHJlc3VsdHMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBjb3JyZWN0bHkgY2xhc3NpZmllZCwgZWxzZSBgZmFsc2VgLlxuICAgKi9cbiAgZnVuY3Rpb24gYmFzZUlzRnVuY3Rpb24odmFsdWUpIHtcbiAgICAvLyBBdm9pZCBhIENoYWtyYSBKSVQgYnVnIGluIGNvbXBhdGliaWxpdHkgbW9kZXMgb2YgSUUgMTEuXG4gICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9qYXNoa2VuYXMvdW5kZXJzY29yZS9pc3N1ZXMvMTYyMSBmb3IgbW9yZSBkZXRhaWxzLlxuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ2Z1bmN0aW9uJyB8fCBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgc3RyaW5nIGlmIGl0J3Mgbm90IG9uZS4gQW4gZW1wdHkgc3RyaW5nIGlzIHJldHVybmVkXG4gICAqIGZvciBgbnVsbGAgb3IgYHVuZGVmaW5lZGAgdmFsdWVzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBzdHJpbmcuXG4gICAqL1xuICBmdW5jdGlvbiBiYXNlVG9TdHJpbmcodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT0gbnVsbCA/ICcnIDogKHZhbHVlICsgJycpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVzZWQgYnkgYF8udHJpbWAgYW5kIGBfLnRyaW1MZWZ0YCB0byBnZXQgdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBjaGFyYWN0ZXJcbiAgICogb2YgYHN0cmluZ2AgdGhhdCBpcyBub3QgZm91bmQgaW4gYGNoYXJzYC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyBUaGUgc3RyaW5nIHRvIGluc3BlY3QuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjaGFycyBUaGUgY2hhcmFjdGVycyB0byBmaW5kLlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgZmlyc3QgY2hhcmFjdGVyIG5vdCBmb3VuZCBpbiBgY2hhcnNgLlxuICAgKi9cbiAgZnVuY3Rpb24gY2hhcnNMZWZ0SW5kZXgoc3RyaW5nLCBjaGFycykge1xuICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICBsZW5ndGggPSBzdHJpbmcubGVuZ3RoO1xuXG4gICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGggJiYgY2hhcnMuaW5kZXhPZihzdHJpbmcuY2hhckF0KGluZGV4KSkgPiAtMSkge31cbiAgICByZXR1cm4gaW5kZXg7XG4gIH1cblxuICAvKipcbiAgICogVXNlZCBieSBgXy50cmltYCBhbmQgYF8udHJpbVJpZ2h0YCB0byBnZXQgdGhlIGluZGV4IG9mIHRoZSBsYXN0IGNoYXJhY3RlclxuICAgKiBvZiBgc3RyaW5nYCB0aGF0IGlzIG5vdCBmb3VuZCBpbiBgY2hhcnNgLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIFRoZSBzdHJpbmcgdG8gaW5zcGVjdC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGNoYXJzIFRoZSBjaGFyYWN0ZXJzIHRvIGZpbmQuXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBsYXN0IGNoYXJhY3RlciBub3QgZm91bmQgaW4gYGNoYXJzYC5cbiAgICovXG4gIGZ1bmN0aW9uIGNoYXJzUmlnaHRJbmRleChzdHJpbmcsIGNoYXJzKSB7XG4gICAgdmFyIGluZGV4ID0gc3RyaW5nLmxlbmd0aDtcblxuICAgIHdoaWxlIChpbmRleC0tICYmIGNoYXJzLmluZGV4T2Yoc3RyaW5nLmNoYXJBdChpbmRleCkpID4gLTEpIHt9XG4gICAgcmV0dXJuIGluZGV4O1xuICB9XG5cbiAgLyoqXG4gICAqIFVzZWQgYnkgYF8uc29ydEJ5YCB0byBjb21wYXJlIHRyYW5zZm9ybWVkIGVsZW1lbnRzIG9mIGEgY29sbGVjdGlvbiBhbmQgc3RhYmxlXG4gICAqIHNvcnQgdGhlbSBpbiBhc2NlbmRpbmcgb3JkZXIuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjb21wYXJlLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3RoZXIgVGhlIG90aGVyIG9iamVjdCB0byBjb21wYXJlLlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBzb3J0IG9yZGVyIGluZGljYXRvciBmb3IgYG9iamVjdGAuXG4gICAqL1xuICBmdW5jdGlvbiBjb21wYXJlQXNjZW5kaW5nKG9iamVjdCwgb3RoZXIpIHtcbiAgICByZXR1cm4gYmFzZUNvbXBhcmVBc2NlbmRpbmcob2JqZWN0LmNyaXRlcmlhLCBvdGhlci5jcml0ZXJpYSkgfHwgKG9iamVjdC5pbmRleCAtIG90aGVyLmluZGV4KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVc2VkIGJ5IGBfLnNvcnRCeU9yZGVyYCB0byBjb21wYXJlIG11bHRpcGxlIHByb3BlcnRpZXMgb2YgYSB2YWx1ZSB0byBhbm90aGVyXG4gICAqIGFuZCBzdGFibGUgc29ydCB0aGVtLlxuICAgKlxuICAgKiBJZiBgb3JkZXJzYCBpcyB1bnNwZWNpZmllZCwgYWxsIHZhbHVlc3MgYXJlIHNvcnRlZCBpbiBhc2NlbmRpbmcgb3JkZXIuIE90aGVyd2lzZSxcbiAgICogYSB2YWx1ZSBpcyBzb3J0ZWQgaW4gYXNjZW5kaW5nIG9yZGVyIGlmIGl0cyBjb3JyZXNwb25kaW5nIG9yZGVyIGlzIFwiYXNjXCIsIGFuZFxuICAgKiBkZXNjZW5kaW5nIGlmIFwiZGVzY1wiLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gY29tcGFyZS5cbiAgICogQHBhcmFtIHtPYmplY3R9IG90aGVyIFRoZSBvdGhlciBvYmplY3QgdG8gY29tcGFyZS5cbiAgICogQHBhcmFtIHtib29sZWFuW119IG9yZGVycyBUaGUgb3JkZXIgdG8gc29ydCBieSBmb3IgZWFjaCBwcm9wZXJ0eS5cbiAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgc29ydCBvcmRlciBpbmRpY2F0b3IgZm9yIGBvYmplY3RgLlxuICAgKi9cbiAgZnVuY3Rpb24gY29tcGFyZU11bHRpcGxlKG9iamVjdCwgb3RoZXIsIG9yZGVycykge1xuICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICBvYmpDcml0ZXJpYSA9IG9iamVjdC5jcml0ZXJpYSxcbiAgICAgICAgb3RoQ3JpdGVyaWEgPSBvdGhlci5jcml0ZXJpYSxcbiAgICAgICAgbGVuZ3RoID0gb2JqQ3JpdGVyaWEubGVuZ3RoLFxuICAgICAgICBvcmRlcnNMZW5ndGggPSBvcmRlcnMubGVuZ3RoO1xuXG4gICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgIHZhciByZXN1bHQgPSBiYXNlQ29tcGFyZUFzY2VuZGluZyhvYmpDcml0ZXJpYVtpbmRleF0sIG90aENyaXRlcmlhW2luZGV4XSk7XG4gICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgIGlmIChpbmRleCA+PSBvcmRlcnNMZW5ndGgpIHtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIHZhciBvcmRlciA9IG9yZGVyc1tpbmRleF07XG4gICAgICAgIHJldHVybiByZXN1bHQgKiAoKG9yZGVyID09PSAnYXNjJyB8fCBvcmRlciA9PT0gdHJ1ZSkgPyAxIDogLTEpO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBGaXhlcyBhbiBgQXJyYXkjc29ydGAgYnVnIGluIHRoZSBKUyBlbmdpbmUgZW1iZWRkZWQgaW4gQWRvYmUgYXBwbGljYXRpb25zXG4gICAgLy8gdGhhdCBjYXVzZXMgaXQsIHVuZGVyIGNlcnRhaW4gY2lyY3Vtc3RhbmNlcywgdG8gcHJvdmlkZSB0aGUgc2FtZSB2YWx1ZSBmb3JcbiAgICAvLyBgb2JqZWN0YCBhbmQgYG90aGVyYC4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9qYXNoa2VuYXMvdW5kZXJzY29yZS9wdWxsLzEyNDdcbiAgICAvLyBmb3IgbW9yZSBkZXRhaWxzLlxuICAgIC8vXG4gICAgLy8gVGhpcyBhbHNvIGVuc3VyZXMgYSBzdGFibGUgc29ydCBpbiBWOCBhbmQgb3RoZXIgZW5naW5lcy5cbiAgICAvLyBTZWUgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTkwIGZvciBtb3JlIGRldGFpbHMuXG4gICAgcmV0dXJuIG9iamVjdC5pbmRleCAtIG90aGVyLmluZGV4O1xuICB9XG5cbiAgLyoqXG4gICAqIFVzZWQgYnkgYF8uZGVidXJyYCB0byBjb252ZXJ0IGxhdGluLTEgc3VwcGxlbWVudGFyeSBsZXR0ZXJzIHRvIGJhc2ljIGxhdGluIGxldHRlcnMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBsZXR0ZXIgVGhlIG1hdGNoZWQgbGV0dGVyIHRvIGRlYnVyci5cbiAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgZGVidXJyZWQgbGV0dGVyLlxuICAgKi9cbiAgZnVuY3Rpb24gZGVidXJyTGV0dGVyKGxldHRlcikge1xuICAgIHJldHVybiBkZWJ1cnJlZExldHRlcnNbbGV0dGVyXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVc2VkIGJ5IGBfLmVzY2FwZWAgdG8gY29udmVydCBjaGFyYWN0ZXJzIHRvIEhUTUwgZW50aXRpZXMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjaHIgVGhlIG1hdGNoZWQgY2hhcmFjdGVyIHRvIGVzY2FwZS5cbiAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgZXNjYXBlZCBjaGFyYWN0ZXIuXG4gICAqL1xuICBmdW5jdGlvbiBlc2NhcGVIdG1sQ2hhcihjaHIpIHtcbiAgICByZXR1cm4gaHRtbEVzY2FwZXNbY2hyXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVc2VkIGJ5IGBfLmVzY2FwZVJlZ0V4cGAgdG8gZXNjYXBlIGNoYXJhY3RlcnMgZm9yIGluY2x1c2lvbiBpbiBjb21waWxlZCByZWdleGVzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gY2hyIFRoZSBtYXRjaGVkIGNoYXJhY3RlciB0byBlc2NhcGUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBsZWFkaW5nQ2hhciBUaGUgY2FwdHVyZSBncm91cCBmb3IgYSBsZWFkaW5nIGNoYXJhY3Rlci5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHdoaXRlc3BhY2VDaGFyIFRoZSBjYXB0dXJlIGdyb3VwIGZvciBhIHdoaXRlc3BhY2UgY2hhcmFjdGVyLlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBlc2NhcGVkIGNoYXJhY3Rlci5cbiAgICovXG4gIGZ1bmN0aW9uIGVzY2FwZVJlZ0V4cENoYXIoY2hyLCBsZWFkaW5nQ2hhciwgd2hpdGVzcGFjZUNoYXIpIHtcbiAgICBpZiAobGVhZGluZ0NoYXIpIHtcbiAgICAgIGNociA9IHJlZ2V4cEVzY2FwZXNbY2hyXTtcbiAgICB9IGVsc2UgaWYgKHdoaXRlc3BhY2VDaGFyKSB7XG4gICAgICBjaHIgPSBzdHJpbmdFc2NhcGVzW2Nocl07XG4gICAgfVxuICAgIHJldHVybiAnXFxcXCcgKyBjaHI7XG4gIH1cblxuICAvKipcbiAgICogVXNlZCBieSBgXy50ZW1wbGF0ZWAgdG8gZXNjYXBlIGNoYXJhY3RlcnMgZm9yIGluY2x1c2lvbiBpbiBjb21waWxlZCBzdHJpbmcgbGl0ZXJhbHMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjaHIgVGhlIG1hdGNoZWQgY2hhcmFjdGVyIHRvIGVzY2FwZS5cbiAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgZXNjYXBlZCBjaGFyYWN0ZXIuXG4gICAqL1xuICBmdW5jdGlvbiBlc2NhcGVTdHJpbmdDaGFyKGNocikge1xuICAgIHJldHVybiAnXFxcXCcgKyBzdHJpbmdFc2NhcGVzW2Nocl07XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgaW5kZXggYXQgd2hpY2ggdGhlIGZpcnN0IG9jY3VycmVuY2Ugb2YgYE5hTmAgaXMgZm91bmQgaW4gYGFycmF5YC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHNlYXJjaC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGZyb21JbmRleCBUaGUgaW5kZXggdG8gc2VhcmNoIGZyb20uXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2Zyb21SaWdodF0gU3BlY2lmeSBpdGVyYXRpbmcgZnJvbSByaWdodCB0byBsZWZ0LlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgbWF0Y2hlZCBgTmFOYCwgZWxzZSBgLTFgLlxuICAgKi9cbiAgZnVuY3Rpb24gaW5kZXhPZk5hTihhcnJheSwgZnJvbUluZGV4LCBmcm9tUmlnaHQpIHtcbiAgICB2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoLFxuICAgICAgICBpbmRleCA9IGZyb21JbmRleCArIChmcm9tUmlnaHQgPyAwIDogLTEpO1xuXG4gICAgd2hpbGUgKChmcm9tUmlnaHQgPyBpbmRleC0tIDogKytpbmRleCA8IGxlbmd0aCkpIHtcbiAgICAgIHZhciBvdGhlciA9IGFycmF5W2luZGV4XTtcbiAgICAgIGlmIChvdGhlciAhPT0gb3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gLTE7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLlxuICAgKi9cbiAgZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG4gICAgcmV0dXJuICEhdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnO1xuICB9XG5cbiAgLyoqXG4gICAqIFVzZWQgYnkgYHRyaW1tZWRMZWZ0SW5kZXhgIGFuZCBgdHJpbW1lZFJpZ2h0SW5kZXhgIHRvIGRldGVybWluZSBpZiBhXG4gICAqIGNoYXJhY3RlciBjb2RlIGlzIHdoaXRlc3BhY2UuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBjaGFyQ29kZSBUaGUgY2hhcmFjdGVyIGNvZGUgdG8gaW5zcGVjdC5cbiAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBjaGFyQ29kZWAgaXMgd2hpdGVzcGFjZSwgZWxzZSBgZmFsc2VgLlxuICAgKi9cbiAgZnVuY3Rpb24gaXNTcGFjZShjaGFyQ29kZSkge1xuICAgIHJldHVybiAoKGNoYXJDb2RlIDw9IDE2MCAmJiAoY2hhckNvZGUgPj0gOSAmJiBjaGFyQ29kZSA8PSAxMykgfHwgY2hhckNvZGUgPT0gMzIgfHwgY2hhckNvZGUgPT0gMTYwKSB8fCBjaGFyQ29kZSA9PSA1NzYwIHx8IGNoYXJDb2RlID09IDYxNTggfHxcbiAgICAgIChjaGFyQ29kZSA+PSA4MTkyICYmIChjaGFyQ29kZSA8PSA4MjAyIHx8IGNoYXJDb2RlID09IDgyMzIgfHwgY2hhckNvZGUgPT0gODIzMyB8fCBjaGFyQ29kZSA9PSA4MjM5IHx8IGNoYXJDb2RlID09IDgyODcgfHwgY2hhckNvZGUgPT0gMTIyODggfHwgY2hhckNvZGUgPT0gNjUyNzkpKSk7XG4gIH1cblxuICAvKipcbiAgICogUmVwbGFjZXMgYWxsIGBwbGFjZWhvbGRlcmAgZWxlbWVudHMgaW4gYGFycmF5YCB3aXRoIGFuIGludGVybmFsIHBsYWNlaG9sZGVyXG4gICAqIGFuZCByZXR1cm5zIGFuIGFycmF5IG9mIHRoZWlyIGluZGV4ZXMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBtb2RpZnkuXG4gICAqIEBwYXJhbSB7Kn0gcGxhY2Vob2xkZXIgVGhlIHBsYWNlaG9sZGVyIHRvIHJlcGxhY2UuXG4gICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGFycmF5IG9mIHBsYWNlaG9sZGVyIGluZGV4ZXMuXG4gICAqL1xuICBmdW5jdGlvbiByZXBsYWNlSG9sZGVycyhhcnJheSwgcGxhY2Vob2xkZXIpIHtcbiAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgbGVuZ3RoID0gYXJyYXkubGVuZ3RoLFxuICAgICAgICByZXNJbmRleCA9IC0xLFxuICAgICAgICByZXN1bHQgPSBbXTtcblxuICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICBpZiAoYXJyYXlbaW5kZXhdID09PSBwbGFjZWhvbGRlcikge1xuICAgICAgICBhcnJheVtpbmRleF0gPSBQTEFDRUhPTERFUjtcbiAgICAgICAgcmVzdWx0WysrcmVzSW5kZXhdID0gaW5kZXg7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogQW4gaW1wbGVtZW50YXRpb24gb2YgYF8udW5pcWAgb3B0aW1pemVkIGZvciBzb3J0ZWQgYXJyYXlzIHdpdGhvdXQgc3VwcG9ydFxuICAgKiBmb3IgY2FsbGJhY2sgc2hvcnRoYW5kcyBhbmQgYHRoaXNgIGJpbmRpbmcuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBpbnNwZWN0LlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbaXRlcmF0ZWVdIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGR1cGxpY2F0ZS12YWx1ZS1mcmVlIGFycmF5LlxuICAgKi9cbiAgZnVuY3Rpb24gc29ydGVkVW5pcShhcnJheSwgaXRlcmF0ZWUpIHtcbiAgICB2YXIgc2VlbixcbiAgICAgICAgaW5kZXggPSAtMSxcbiAgICAgICAgbGVuZ3RoID0gYXJyYXkubGVuZ3RoLFxuICAgICAgICByZXNJbmRleCA9IC0xLFxuICAgICAgICByZXN1bHQgPSBbXTtcblxuICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICB2YXIgdmFsdWUgPSBhcnJheVtpbmRleF0sXG4gICAgICAgICAgY29tcHV0ZWQgPSBpdGVyYXRlZSA/IGl0ZXJhdGVlKHZhbHVlLCBpbmRleCwgYXJyYXkpIDogdmFsdWU7XG5cbiAgICAgIGlmICghaW5kZXggfHwgc2VlbiAhPT0gY29tcHV0ZWQpIHtcbiAgICAgICAgc2VlbiA9IGNvbXB1dGVkO1xuICAgICAgICByZXN1bHRbKytyZXNJbmRleF0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBVc2VkIGJ5IGBfLnRyaW1gIGFuZCBgXy50cmltTGVmdGAgdG8gZ2V0IHRoZSBpbmRleCBvZiB0aGUgZmlyc3Qgbm9uLXdoaXRlc3BhY2VcbiAgICogY2hhcmFjdGVyIG9mIGBzdHJpbmdgLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIFRoZSBzdHJpbmcgdG8gaW5zcGVjdC5cbiAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IG5vbi13aGl0ZXNwYWNlIGNoYXJhY3Rlci5cbiAgICovXG4gIGZ1bmN0aW9uIHRyaW1tZWRMZWZ0SW5kZXgoc3RyaW5nKSB7XG4gICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgIGxlbmd0aCA9IHN0cmluZy5sZW5ndGg7XG5cbiAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCAmJiBpc1NwYWNlKHN0cmluZy5jaGFyQ29kZUF0KGluZGV4KSkpIHt9XG4gICAgcmV0dXJuIGluZGV4O1xuICB9XG5cbiAgLyoqXG4gICAqIFVzZWQgYnkgYF8udHJpbWAgYW5kIGBfLnRyaW1SaWdodGAgdG8gZ2V0IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBub24td2hpdGVzcGFjZVxuICAgKiBjaGFyYWN0ZXIgb2YgYHN0cmluZ2AuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmcgVGhlIHN0cmluZyB0byBpbnNwZWN0LlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgbGFzdCBub24td2hpdGVzcGFjZSBjaGFyYWN0ZXIuXG4gICAqL1xuICBmdW5jdGlvbiB0cmltbWVkUmlnaHRJbmRleChzdHJpbmcpIHtcbiAgICB2YXIgaW5kZXggPSBzdHJpbmcubGVuZ3RoO1xuXG4gICAgd2hpbGUgKGluZGV4LS0gJiYgaXNTcGFjZShzdHJpbmcuY2hhckNvZGVBdChpbmRleCkpKSB7fVxuICAgIHJldHVybiBpbmRleDtcbiAgfVxuXG4gIC8qKlxuICAgKiBVc2VkIGJ5IGBfLnVuZXNjYXBlYCB0byBjb252ZXJ0IEhUTUwgZW50aXRpZXMgdG8gY2hhcmFjdGVycy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNociBUaGUgbWF0Y2hlZCBjaGFyYWN0ZXIgdG8gdW5lc2NhcGUuXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHVuZXNjYXBlZCBjaGFyYWN0ZXIuXG4gICAqL1xuICBmdW5jdGlvbiB1bmVzY2FwZUh0bWxDaGFyKGNocikge1xuICAgIHJldHVybiBodG1sVW5lc2NhcGVzW2Nocl07XG4gIH1cblxuICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IHByaXN0aW5lIGBsb2Rhc2hgIGZ1bmN0aW9uIHVzaW5nIHRoZSBnaXZlbiBgY29udGV4dGAgb2JqZWN0LlxuICAgKlxuICAgKiBAc3RhdGljXG4gICAqIEBtZW1iZXJPZiBfXG4gICAqIEBjYXRlZ29yeSBVdGlsaXR5XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbY29udGV4dD1yb290XSBUaGUgY29udGV4dCBvYmplY3QuXG4gICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyBhIG5ldyBgbG9kYXNoYCBmdW5jdGlvbi5cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogXy5taXhpbih7ICdmb28nOiBfLmNvbnN0YW50KCdmb28nKSB9KTtcbiAgICpcbiAgICogdmFyIGxvZGFzaCA9IF8ucnVuSW5Db250ZXh0KCk7XG4gICAqIGxvZGFzaC5taXhpbih7ICdiYXInOiBsb2Rhc2guY29uc3RhbnQoJ2JhcicpIH0pO1xuICAgKlxuICAgKiBfLmlzRnVuY3Rpb24oXy5mb28pO1xuICAgKiAvLyA9PiB0cnVlXG4gICAqIF8uaXNGdW5jdGlvbihfLmJhcik7XG4gICAqIC8vID0+IGZhbHNlXG4gICAqXG4gICAqIGxvZGFzaC5pc0Z1bmN0aW9uKGxvZGFzaC5mb28pO1xuICAgKiAvLyA9PiBmYWxzZVxuICAgKiBsb2Rhc2guaXNGdW5jdGlvbihsb2Rhc2guYmFyKTtcbiAgICogLy8gPT4gdHJ1ZVxuICAgKlxuICAgKiAvLyB1c2luZyBgY29udGV4dGAgdG8gbW9jayBgRGF0ZSNnZXRUaW1lYCB1c2UgaW4gYF8ubm93YFxuICAgKiB2YXIgbW9jayA9IF8ucnVuSW5Db250ZXh0KHtcbiAgICogICAnRGF0ZSc6IGZ1bmN0aW9uKCkge1xuICAgKiAgICAgcmV0dXJuIHsgJ2dldFRpbWUnOiBnZXRUaW1lTW9jayB9O1xuICAgKiAgIH1cbiAgICogfSk7XG4gICAqXG4gICAqIC8vIG9yIGNyZWF0aW5nIGEgc3VwZWQtdXAgYGRlZmVyYCBpbiBOb2RlLmpzXG4gICAqIHZhciBkZWZlciA9IF8ucnVuSW5Db250ZXh0KHsgJ3NldFRpbWVvdXQnOiBzZXRJbW1lZGlhdGUgfSkuZGVmZXI7XG4gICAqL1xuICBmdW5jdGlvbiBydW5JbkNvbnRleHQoY29udGV4dCkge1xuICAgIC8vIEF2b2lkIGlzc3VlcyB3aXRoIHNvbWUgRVMzIGVudmlyb25tZW50cyB0aGF0IGF0dGVtcHQgdG8gdXNlIHZhbHVlcywgbmFtZWRcbiAgICAvLyBhZnRlciBidWlsdC1pbiBjb25zdHJ1Y3RvcnMgbGlrZSBgT2JqZWN0YCwgZm9yIHRoZSBjcmVhdGlvbiBvZiBsaXRlcmFscy5cbiAgICAvLyBFUzUgY2xlYXJzIHRoaXMgdXAgYnkgc3RhdGluZyB0aGF0IGxpdGVyYWxzIG11c3QgdXNlIGJ1aWx0LWluIGNvbnN0cnVjdG9ycy5cbiAgICAvLyBTZWUgaHR0cHM6Ly9lczUuZ2l0aHViLmlvLyN4MTEuMS41IGZvciBtb3JlIGRldGFpbHMuXG4gICAgY29udGV4dCA9IGNvbnRleHQgPyBfLmRlZmF1bHRzKHJvb3QuT2JqZWN0KCksIGNvbnRleHQsIF8ucGljayhyb290LCBjb250ZXh0UHJvcHMpKSA6IHJvb3Q7XG5cbiAgICAvKiogTmF0aXZlIGNvbnN0cnVjdG9yIHJlZmVyZW5jZXMuICovXG4gICAgdmFyIEFycmF5ID0gY29udGV4dC5BcnJheSxcbiAgICAgICAgRGF0ZSA9IGNvbnRleHQuRGF0ZSxcbiAgICAgICAgRXJyb3IgPSBjb250ZXh0LkVycm9yLFxuICAgICAgICBGdW5jdGlvbiA9IGNvbnRleHQuRnVuY3Rpb24sXG4gICAgICAgIE1hdGggPSBjb250ZXh0Lk1hdGgsXG4gICAgICAgIE51bWJlciA9IGNvbnRleHQuTnVtYmVyLFxuICAgICAgICBPYmplY3QgPSBjb250ZXh0Lk9iamVjdCxcbiAgICAgICAgUmVnRXhwID0gY29udGV4dC5SZWdFeHAsXG4gICAgICAgIFN0cmluZyA9IGNvbnRleHQuU3RyaW5nLFxuICAgICAgICBUeXBlRXJyb3IgPSBjb250ZXh0LlR5cGVFcnJvcjtcblxuICAgIC8qKiBVc2VkIGZvciBuYXRpdmUgbWV0aG9kIHJlZmVyZW5jZXMuICovXG4gICAgdmFyIGFycmF5UHJvdG8gPSBBcnJheS5wcm90b3R5cGUsXG4gICAgICAgIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZSxcbiAgICAgICAgc3RyaW5nUHJvdG8gPSBTdHJpbmcucHJvdG90eXBlO1xuXG4gICAgLyoqIFVzZWQgdG8gcmVzb2x2ZSB0aGUgZGVjb21waWxlZCBzb3VyY2Ugb2YgZnVuY3Rpb25zLiAqL1xuICAgIHZhciBmblRvU3RyaW5nID0gRnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nO1xuXG4gICAgLyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovXG4gICAgdmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cbiAgICAvKiogVXNlZCB0byBnZW5lcmF0ZSB1bmlxdWUgSURzLiAqL1xuICAgIHZhciBpZENvdW50ZXIgPSAwO1xuXG4gICAgLyoqXG4gICAgICogVXNlZCB0byByZXNvbHZlIHRoZSBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAgICAgKiBvZiB2YWx1ZXMuXG4gICAgICovXG4gICAgdmFyIG9ialRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbiAgICAvKiogVXNlZCB0byByZXN0b3JlIHRoZSBvcmlnaW5hbCBgX2AgcmVmZXJlbmNlIGluIGBfLm5vQ29uZmxpY3RgLiAqL1xuICAgIHZhciBvbGREYXNoID0gcm9vdC5fO1xuXG4gICAgLyoqIFVzZWQgdG8gZGV0ZWN0IGlmIGEgbWV0aG9kIGlzIG5hdGl2ZS4gKi9cbiAgICB2YXIgcmVJc05hdGl2ZSA9IFJlZ0V4cCgnXicgK1xuICAgICAgZm5Ub1N0cmluZy5jYWxsKGhhc093blByb3BlcnR5KS5yZXBsYWNlKC9bXFxcXF4kLiorPygpW1xcXXt9fF0vZywgJ1xcXFwkJicpXG4gICAgICAucmVwbGFjZSgvaGFzT3duUHJvcGVydHl8KGZ1bmN0aW9uKS4qPyg/PVxcXFxcXCgpfCBmb3IgLis/KD89XFxcXFxcXSkvZywgJyQxLio/JykgKyAnJCdcbiAgICApO1xuXG4gICAgLyoqIE5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbiAgICB2YXIgQXJyYXlCdWZmZXIgPSBjb250ZXh0LkFycmF5QnVmZmVyLFxuICAgICAgICBjbGVhclRpbWVvdXQgPSBjb250ZXh0LmNsZWFyVGltZW91dCxcbiAgICAgICAgcGFyc2VGbG9hdCA9IGNvbnRleHQucGFyc2VGbG9hdCxcbiAgICAgICAgcG93ID0gTWF0aC5wb3csXG4gICAgICAgIHByb3BlcnR5SXNFbnVtZXJhYmxlID0gb2JqZWN0UHJvdG8ucHJvcGVydHlJc0VudW1lcmFibGUsXG4gICAgICAgIFNldCA9IGdldE5hdGl2ZShjb250ZXh0LCAnU2V0JyksXG4gICAgICAgIHNldFRpbWVvdXQgPSBjb250ZXh0LnNldFRpbWVvdXQsXG4gICAgICAgIHNwbGljZSA9IGFycmF5UHJvdG8uc3BsaWNlLFxuICAgICAgICBVaW50OEFycmF5ID0gY29udGV4dC5VaW50OEFycmF5LFxuICAgICAgICBXZWFrTWFwID0gZ2V0TmF0aXZlKGNvbnRleHQsICdXZWFrTWFwJyk7XG5cbiAgICAvKiBOYXRpdmUgbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xuICAgIHZhciBuYXRpdmVDZWlsID0gTWF0aC5jZWlsLFxuICAgICAgICBuYXRpdmVDcmVhdGUgPSBnZXROYXRpdmUoT2JqZWN0LCAnY3JlYXRlJyksXG4gICAgICAgIG5hdGl2ZUZsb29yID0gTWF0aC5mbG9vcixcbiAgICAgICAgbmF0aXZlSXNBcnJheSA9IGdldE5hdGl2ZShBcnJheSwgJ2lzQXJyYXknKSxcbiAgICAgICAgbmF0aXZlSXNGaW5pdGUgPSBjb250ZXh0LmlzRmluaXRlLFxuICAgICAgICBuYXRpdmVLZXlzID0gZ2V0TmF0aXZlKE9iamVjdCwgJ2tleXMnKSxcbiAgICAgICAgbmF0aXZlTWF4ID0gTWF0aC5tYXgsXG4gICAgICAgIG5hdGl2ZU1pbiA9IE1hdGgubWluLFxuICAgICAgICBuYXRpdmVOb3cgPSBnZXROYXRpdmUoRGF0ZSwgJ25vdycpLFxuICAgICAgICBuYXRpdmVQYXJzZUludCA9IGNvbnRleHQucGFyc2VJbnQsXG4gICAgICAgIG5hdGl2ZVJhbmRvbSA9IE1hdGgucmFuZG9tO1xuXG4gICAgLyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgYC1JbmZpbml0eWAgYW5kIGBJbmZpbml0eWAuICovXG4gICAgdmFyIE5FR0FUSVZFX0lORklOSVRZID0gTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLFxuICAgICAgICBQT1NJVElWRV9JTkZJTklUWSA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTtcblxuICAgIC8qKiBVc2VkIGFzIHJlZmVyZW5jZXMgZm9yIHRoZSBtYXhpbXVtIGxlbmd0aCBhbmQgaW5kZXggb2YgYW4gYXJyYXkuICovXG4gICAgdmFyIE1BWF9BUlJBWV9MRU5HVEggPSA0Mjk0OTY3Mjk1LFxuICAgICAgICBNQVhfQVJSQVlfSU5ERVggPSBNQVhfQVJSQVlfTEVOR1RIIC0gMSxcbiAgICAgICAgSEFMRl9NQVhfQVJSQVlfTEVOR1RIID0gTUFYX0FSUkFZX0xFTkdUSCA+Pj4gMTtcblxuICAgIC8qKlxuICAgICAqIFVzZWQgYXMgdGhlIFttYXhpbXVtIGxlbmd0aF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtbnVtYmVyLm1heF9zYWZlX2ludGVnZXIpXG4gICAgICogb2YgYW4gYXJyYXktbGlrZSB2YWx1ZS5cbiAgICAgKi9cbiAgICB2YXIgTUFYX1NBRkVfSU5URUdFUiA9IDkwMDcxOTkyNTQ3NDA5OTE7XG5cbiAgICAvKiogVXNlZCB0byBzdG9yZSBmdW5jdGlvbiBtZXRhZGF0YS4gKi9cbiAgICB2YXIgbWV0YU1hcCA9IFdlYWtNYXAgJiYgbmV3IFdlYWtNYXA7XG5cbiAgICAvKiogVXNlZCB0byBsb29rdXAgdW5taW5pZmllZCBmdW5jdGlvbiBuYW1lcy4gKi9cbiAgICB2YXIgcmVhbE5hbWVzID0ge307XG5cbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgYGxvZGFzaGAgb2JqZWN0IHdoaWNoIHdyYXBzIGB2YWx1ZWAgdG8gZW5hYmxlIGltcGxpY2l0IGNoYWluaW5nLlxuICAgICAqIE1ldGhvZHMgdGhhdCBvcGVyYXRlIG9uIGFuZCByZXR1cm4gYXJyYXlzLCBjb2xsZWN0aW9ucywgYW5kIGZ1bmN0aW9ucyBjYW5cbiAgICAgKiBiZSBjaGFpbmVkIHRvZ2V0aGVyLiBNZXRob2RzIHRoYXQgcmV0cmlldmUgYSBzaW5nbGUgdmFsdWUgb3IgbWF5IHJldHVybiBhXG4gICAgICogcHJpbWl0aXZlIHZhbHVlIHdpbGwgYXV0b21hdGljYWxseSBlbmQgdGhlIGNoYWluIHJldHVybmluZyB0aGUgdW53cmFwcGVkXG4gICAgICogdmFsdWUuIEV4cGxpY2l0IGNoYWluaW5nIG1heSBiZSBlbmFibGVkIHVzaW5nIGBfLmNoYWluYC4gVGhlIGV4ZWN1dGlvbiBvZlxuICAgICAqIGNoYWluZWQgbWV0aG9kcyBpcyBsYXp5LCB0aGF0IGlzLCBleGVjdXRpb24gaXMgZGVmZXJyZWQgdW50aWwgYF8jdmFsdWVgXG4gICAgICogaXMgaW1wbGljaXRseSBvciBleHBsaWNpdGx5IGNhbGxlZC5cbiAgICAgKlxuICAgICAqIExhenkgZXZhbHVhdGlvbiBhbGxvd3Mgc2V2ZXJhbCBtZXRob2RzIHRvIHN1cHBvcnQgc2hvcnRjdXQgZnVzaW9uLiBTaG9ydGN1dFxuICAgICAqIGZ1c2lvbiBpcyBhbiBvcHRpbWl6YXRpb24gc3RyYXRlZ3kgd2hpY2ggbWVyZ2UgaXRlcmF0ZWUgY2FsbHM7IHRoaXMgY2FuIGhlbHBcbiAgICAgKiB0byBhdm9pZCB0aGUgY3JlYXRpb24gb2YgaW50ZXJtZWRpYXRlIGRhdGEgc3RydWN0dXJlcyBhbmQgZ3JlYXRseSByZWR1Y2UgdGhlXG4gICAgICogbnVtYmVyIG9mIGl0ZXJhdGVlIGV4ZWN1dGlvbnMuXG4gICAgICpcbiAgICAgKiBDaGFpbmluZyBpcyBzdXBwb3J0ZWQgaW4gY3VzdG9tIGJ1aWxkcyBhcyBsb25nIGFzIHRoZSBgXyN2YWx1ZWAgbWV0aG9kIGlzXG4gICAgICogZGlyZWN0bHkgb3IgaW5kaXJlY3RseSBpbmNsdWRlZCBpbiB0aGUgYnVpbGQuXG4gICAgICpcbiAgICAgKiBJbiBhZGRpdGlvbiB0byBsb2Rhc2ggbWV0aG9kcywgd3JhcHBlcnMgaGF2ZSBgQXJyYXlgIGFuZCBgU3RyaW5nYCBtZXRob2RzLlxuICAgICAqXG4gICAgICogVGhlIHdyYXBwZXIgYEFycmF5YCBtZXRob2RzIGFyZTpcbiAgICAgKiBgY29uY2F0YCwgYGpvaW5gLCBgcG9wYCwgYHB1c2hgLCBgcmV2ZXJzZWAsIGBzaGlmdGAsIGBzbGljZWAsIGBzb3J0YCxcbiAgICAgKiBgc3BsaWNlYCwgYW5kIGB1bnNoaWZ0YFxuICAgICAqXG4gICAgICogVGhlIHdyYXBwZXIgYFN0cmluZ2AgbWV0aG9kcyBhcmU6XG4gICAgICogYHJlcGxhY2VgIGFuZCBgc3BsaXRgXG4gICAgICpcbiAgICAgKiBUaGUgd3JhcHBlciBtZXRob2RzIHRoYXQgc3VwcG9ydCBzaG9ydGN1dCBmdXNpb24gYXJlOlxuICAgICAqIGBjb21wYWN0YCwgYGRyb3BgLCBgZHJvcFJpZ2h0YCwgYGRyb3BSaWdodFdoaWxlYCwgYGRyb3BXaGlsZWAsIGBmaWx0ZXJgLFxuICAgICAqIGBmaXJzdGAsIGBpbml0aWFsYCwgYGxhc3RgLCBgbWFwYCwgYHBsdWNrYCwgYHJlamVjdGAsIGByZXN0YCwgYHJldmVyc2VgLFxuICAgICAqIGBzbGljZWAsIGB0YWtlYCwgYHRha2VSaWdodGAsIGB0YWtlUmlnaHRXaGlsZWAsIGB0YWtlV2hpbGVgLCBgdG9BcnJheWAsXG4gICAgICogYW5kIGB3aGVyZWBcbiAgICAgKlxuICAgICAqIFRoZSBjaGFpbmFibGUgd3JhcHBlciBtZXRob2RzIGFyZTpcbiAgICAgKiBgYWZ0ZXJgLCBgYXJ5YCwgYGFzc2lnbmAsIGBhdGAsIGBiZWZvcmVgLCBgYmluZGAsIGBiaW5kQWxsYCwgYGJpbmRLZXlgLFxuICAgICAqIGBjYWxsYmFja2AsIGBjaGFpbmAsIGBjaHVua2AsIGBjb21taXRgLCBgY29tcGFjdGAsIGBjb25jYXRgLCBgY29uc3RhbnRgLFxuICAgICAqIGBjb3VudEJ5YCwgYGNyZWF0ZWAsIGBjdXJyeWAsIGBkZWJvdW5jZWAsIGBkZWZhdWx0c2AsIGBkZWZhdWx0c0RlZXBgLFxuICAgICAqIGBkZWZlcmAsIGBkZWxheWAsIGBkaWZmZXJlbmNlYCwgYGRyb3BgLCBgZHJvcFJpZ2h0YCwgYGRyb3BSaWdodFdoaWxlYCxcbiAgICAgKiBgZHJvcFdoaWxlYCwgYGZpbGxgLCBgZmlsdGVyYCwgYGZsYXR0ZW5gLCBgZmxhdHRlbkRlZXBgLCBgZmxvd2AsIGBmbG93UmlnaHRgLFxuICAgICAqIGBmb3JFYWNoYCwgYGZvckVhY2hSaWdodGAsIGBmb3JJbmAsIGBmb3JJblJpZ2h0YCwgYGZvck93bmAsIGBmb3JPd25SaWdodGAsXG4gICAgICogYGZ1bmN0aW9uc2AsIGBncm91cEJ5YCwgYGluZGV4QnlgLCBgaW5pdGlhbGAsIGBpbnRlcnNlY3Rpb25gLCBgaW52ZXJ0YCxcbiAgICAgKiBgaW52b2tlYCwgYGtleXNgLCBga2V5c0luYCwgYG1hcGAsIGBtYXBLZXlzYCwgYG1hcFZhbHVlc2AsIGBtYXRjaGVzYCxcbiAgICAgKiBgbWF0Y2hlc1Byb3BlcnR5YCwgYG1lbW9pemVgLCBgbWVyZ2VgLCBgbWV0aG9kYCwgYG1ldGhvZE9mYCwgYG1peGluYCxcbiAgICAgKiBgbW9kQXJnc2AsIGBuZWdhdGVgLCBgb21pdGAsIGBvbmNlYCwgYHBhaXJzYCwgYHBhcnRpYWxgLCBgcGFydGlhbFJpZ2h0YCxcbiAgICAgKiBgcGFydGl0aW9uYCwgYHBpY2tgLCBgcGxhbnRgLCBgcGx1Y2tgLCBgcHJvcGVydHlgLCBgcHJvcGVydHlPZmAsIGBwdWxsYCxcbiAgICAgKiBgcHVsbEF0YCwgYHB1c2hgLCBgcmFuZ2VgLCBgcmVhcmdgLCBgcmVqZWN0YCwgYHJlbW92ZWAsIGByZXN0YCwgYHJlc3RQYXJhbWAsXG4gICAgICogYHJldmVyc2VgLCBgc2V0YCwgYHNodWZmbGVgLCBgc2xpY2VgLCBgc29ydGAsIGBzb3J0QnlgLCBgc29ydEJ5QWxsYCxcbiAgICAgKiBgc29ydEJ5T3JkZXJgLCBgc3BsaWNlYCwgYHNwcmVhZGAsIGB0YWtlYCwgYHRha2VSaWdodGAsIGB0YWtlUmlnaHRXaGlsZWAsXG4gICAgICogYHRha2VXaGlsZWAsIGB0YXBgLCBgdGhyb3R0bGVgLCBgdGhydWAsIGB0aW1lc2AsIGB0b0FycmF5YCwgYHRvUGxhaW5PYmplY3RgLFxuICAgICAqIGB0cmFuc2Zvcm1gLCBgdW5pb25gLCBgdW5pcWAsIGB1bnNoaWZ0YCwgYHVuemlwYCwgYHVuemlwV2l0aGAsIGB2YWx1ZXNgLFxuICAgICAqIGB2YWx1ZXNJbmAsIGB3aGVyZWAsIGB3aXRob3V0YCwgYHdyYXBgLCBgeG9yYCwgYHppcGAsIGB6aXBPYmplY3RgLCBgemlwV2l0aGBcbiAgICAgKlxuICAgICAqIFRoZSB3cmFwcGVyIG1ldGhvZHMgdGhhdCBhcmUgKipub3QqKiBjaGFpbmFibGUgYnkgZGVmYXVsdCBhcmU6XG4gICAgICogYGFkZGAsIGBhdHRlbXB0YCwgYGNhbWVsQ2FzZWAsIGBjYXBpdGFsaXplYCwgYGNlaWxgLCBgY2xvbmVgLCBgY2xvbmVEZWVwYCxcbiAgICAgKiBgZGVidXJyYCwgYGVuZHNXaXRoYCwgYGVzY2FwZWAsIGBlc2NhcGVSZWdFeHBgLCBgZXZlcnlgLCBgZmluZGAsIGBmaW5kSW5kZXhgLFxuICAgICAqIGBmaW5kS2V5YCwgYGZpbmRMYXN0YCwgYGZpbmRMYXN0SW5kZXhgLCBgZmluZExhc3RLZXlgLCBgZmluZFdoZXJlYCwgYGZpcnN0YCxcbiAgICAgKiBgZmxvb3JgLCBgZ2V0YCwgYGd0YCwgYGd0ZWAsIGBoYXNgLCBgaWRlbnRpdHlgLCBgaW5jbHVkZXNgLCBgaW5kZXhPZmAsXG4gICAgICogYGluUmFuZ2VgLCBgaXNBcmd1bWVudHNgLCBgaXNBcnJheWAsIGBpc0Jvb2xlYW5gLCBgaXNEYXRlYCwgYGlzRWxlbWVudGAsXG4gICAgICogYGlzRW1wdHlgLCBgaXNFcXVhbGAsIGBpc0Vycm9yYCwgYGlzRmluaXRlYCBgaXNGdW5jdGlvbmAsIGBpc01hdGNoYCxcbiAgICAgKiBgaXNOYXRpdmVgLCBgaXNOYU5gLCBgaXNOdWxsYCwgYGlzTnVtYmVyYCwgYGlzT2JqZWN0YCwgYGlzUGxhaW5PYmplY3RgLFxuICAgICAqIGBpc1JlZ0V4cGAsIGBpc1N0cmluZ2AsIGBpc1VuZGVmaW5lZGAsIGBpc1R5cGVkQXJyYXlgLCBgam9pbmAsIGBrZWJhYkNhc2VgLFxuICAgICAqIGBsYXN0YCwgYGxhc3RJbmRleE9mYCwgYGx0YCwgYGx0ZWAsIGBtYXhgLCBgbWluYCwgYG5vQ29uZmxpY3RgLCBgbm9vcGAsXG4gICAgICogYG5vd2AsIGBwYWRgLCBgcGFkTGVmdGAsIGBwYWRSaWdodGAsIGBwYXJzZUludGAsIGBwb3BgLCBgcmFuZG9tYCwgYHJlZHVjZWAsXG4gICAgICogYHJlZHVjZVJpZ2h0YCwgYHJlcGVhdGAsIGByZXN1bHRgLCBgcm91bmRgLCBgcnVuSW5Db250ZXh0YCwgYHNoaWZ0YCwgYHNpemVgLFxuICAgICAqIGBzbmFrZUNhc2VgLCBgc29tZWAsIGBzb3J0ZWRJbmRleGAsIGBzb3J0ZWRMYXN0SW5kZXhgLCBgc3RhcnRDYXNlYCxcbiAgICAgKiBgc3RhcnRzV2l0aGAsIGBzdW1gLCBgdGVtcGxhdGVgLCBgdHJpbWAsIGB0cmltTGVmdGAsIGB0cmltUmlnaHRgLCBgdHJ1bmNgLFxuICAgICAqIGB1bmVzY2FwZWAsIGB1bmlxdWVJZGAsIGB2YWx1ZWAsIGFuZCBgd29yZHNgXG4gICAgICpcbiAgICAgKiBUaGUgd3JhcHBlciBtZXRob2QgYHNhbXBsZWAgd2lsbCByZXR1cm4gYSB3cmFwcGVkIHZhbHVlIHdoZW4gYG5gIGlzIHByb3ZpZGVkLFxuICAgICAqIG90aGVyd2lzZSBhbiB1bndyYXBwZWQgdmFsdWUgaXMgcmV0dXJuZWQuXG4gICAgICpcbiAgICAgKiBAbmFtZSBfXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQGNhdGVnb3J5IENoYWluXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gd3JhcCBpbiBhIGBsb2Rhc2hgIGluc3RhbmNlLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG5ldyBgbG9kYXNoYCB3cmFwcGVyIGluc3RhbmNlLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgd3JhcHBlZCA9IF8oWzEsIDIsIDNdKTtcbiAgICAgKlxuICAgICAqIC8vIHJldHVybnMgYW4gdW53cmFwcGVkIHZhbHVlXG4gICAgICogd3JhcHBlZC5yZWR1Y2UoZnVuY3Rpb24odG90YWwsIG4pIHtcbiAgICAgKiAgIHJldHVybiB0b3RhbCArIG47XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gNlxuICAgICAqXG4gICAgICogLy8gcmV0dXJucyBhIHdyYXBwZWQgdmFsdWVcbiAgICAgKiB2YXIgc3F1YXJlcyA9IHdyYXBwZWQubWFwKGZ1bmN0aW9uKG4pIHtcbiAgICAgKiAgIHJldHVybiBuICogbjtcbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIF8uaXNBcnJheShzcXVhcmVzKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqXG4gICAgICogXy5pc0FycmF5KHNxdWFyZXMudmFsdWUoKSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGxvZGFzaCh2YWx1ZSkge1xuICAgICAgaWYgKGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgIWlzQXJyYXkodmFsdWUpICYmICEodmFsdWUgaW5zdGFuY2VvZiBMYXp5V3JhcHBlcikpIHtcbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgTG9kYXNoV3JhcHBlcikge1xuICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwgJ19fY2hhaW5fXycpICYmIGhhc093blByb3BlcnR5LmNhbGwodmFsdWUsICdfX3dyYXBwZWRfXycpKSB7XG4gICAgICAgICAgcmV0dXJuIHdyYXBwZXJDbG9uZSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXcgTG9kYXNoV3JhcHBlcih2YWx1ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGZ1bmN0aW9uIHdob3NlIHByb3RvdHlwZSBhbGwgY2hhaW5pbmcgd3JhcHBlcnMgaW5oZXJpdCBmcm9tLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlTG9kYXNoKCkge1xuICAgICAgLy8gTm8gb3BlcmF0aW9uIHBlcmZvcm1lZC5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBjb25zdHJ1Y3RvciBmb3IgY3JlYXRpbmcgYGxvZGFzaGAgd3JhcHBlciBvYmplY3RzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byB3cmFwLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2NoYWluQWxsXSBFbmFibGUgY2hhaW5pbmcgZm9yIGFsbCB3cmFwcGVyIG1ldGhvZHMuXG4gICAgICogQHBhcmFtIHtBcnJheX0gW2FjdGlvbnM9W11dIEFjdGlvbnMgdG8gcGVmb3JtIHRvIHJlc29sdmUgdGhlIHVud3JhcHBlZCB2YWx1ZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBMb2Rhc2hXcmFwcGVyKHZhbHVlLCBjaGFpbkFsbCwgYWN0aW9ucykge1xuICAgICAgdGhpcy5fX3dyYXBwZWRfXyA9IHZhbHVlO1xuICAgICAgdGhpcy5fX2FjdGlvbnNfXyA9IGFjdGlvbnMgfHwgW107XG4gICAgICB0aGlzLl9fY2hhaW5fXyA9ICEhY2hhaW5BbGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQW4gb2JqZWN0IGVudmlyb25tZW50IGZlYXR1cmUgZmxhZ3MuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAdHlwZSBPYmplY3RcbiAgICAgKi9cbiAgICB2YXIgc3VwcG9ydCA9IGxvZGFzaC5zdXBwb3J0ID0ge307XG5cbiAgICAvKipcbiAgICAgKiBCeSBkZWZhdWx0LCB0aGUgdGVtcGxhdGUgZGVsaW1pdGVycyB1c2VkIGJ5IGxvZGFzaCBhcmUgbGlrZSB0aG9zZSBpblxuICAgICAqIGVtYmVkZGVkIFJ1YnkgKEVSQikuIENoYW5nZSB0aGUgZm9sbG93aW5nIHRlbXBsYXRlIHNldHRpbmdzIHRvIHVzZVxuICAgICAqIGFsdGVybmF0aXZlIGRlbGltaXRlcnMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAdHlwZSBPYmplY3RcbiAgICAgKi9cbiAgICBsb2Rhc2gudGVtcGxhdGVTZXR0aW5ncyA9IHtcblxuICAgICAgLyoqXG4gICAgICAgKiBVc2VkIHRvIGRldGVjdCBgZGF0YWAgcHJvcGVydHkgdmFsdWVzIHRvIGJlIEhUTUwtZXNjYXBlZC5cbiAgICAgICAqXG4gICAgICAgKiBAbWVtYmVyT2YgXy50ZW1wbGF0ZVNldHRpbmdzXG4gICAgICAgKiBAdHlwZSBSZWdFeHBcbiAgICAgICAqL1xuICAgICAgJ2VzY2FwZSc6IHJlRXNjYXBlLFxuXG4gICAgICAvKipcbiAgICAgICAqIFVzZWQgdG8gZGV0ZWN0IGNvZGUgdG8gYmUgZXZhbHVhdGVkLlxuICAgICAgICpcbiAgICAgICAqIEBtZW1iZXJPZiBfLnRlbXBsYXRlU2V0dGluZ3NcbiAgICAgICAqIEB0eXBlIFJlZ0V4cFxuICAgICAgICovXG4gICAgICAnZXZhbHVhdGUnOiByZUV2YWx1YXRlLFxuXG4gICAgICAvKipcbiAgICAgICAqIFVzZWQgdG8gZGV0ZWN0IGBkYXRhYCBwcm9wZXJ0eSB2YWx1ZXMgdG8gaW5qZWN0LlxuICAgICAgICpcbiAgICAgICAqIEBtZW1iZXJPZiBfLnRlbXBsYXRlU2V0dGluZ3NcbiAgICAgICAqIEB0eXBlIFJlZ0V4cFxuICAgICAgICovXG4gICAgICAnaW50ZXJwb2xhdGUnOiByZUludGVycG9sYXRlLFxuXG4gICAgICAvKipcbiAgICAgICAqIFVzZWQgdG8gcmVmZXJlbmNlIHRoZSBkYXRhIG9iamVjdCBpbiB0aGUgdGVtcGxhdGUgdGV4dC5cbiAgICAgICAqXG4gICAgICAgKiBAbWVtYmVyT2YgXy50ZW1wbGF0ZVNldHRpbmdzXG4gICAgICAgKiBAdHlwZSBzdHJpbmdcbiAgICAgICAqL1xuICAgICAgJ3ZhcmlhYmxlJzogJycsXG5cbiAgICAgIC8qKlxuICAgICAgICogVXNlZCB0byBpbXBvcnQgdmFyaWFibGVzIGludG8gdGhlIGNvbXBpbGVkIHRlbXBsYXRlLlxuICAgICAgICpcbiAgICAgICAqIEBtZW1iZXJPZiBfLnRlbXBsYXRlU2V0dGluZ3NcbiAgICAgICAqIEB0eXBlIE9iamVjdFxuICAgICAgICovXG4gICAgICAnaW1wb3J0cyc6IHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQSByZWZlcmVuY2UgdG8gdGhlIGBsb2Rhc2hgIGZ1bmN0aW9uLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyT2YgXy50ZW1wbGF0ZVNldHRpbmdzLmltcG9ydHNcbiAgICAgICAgICogQHR5cGUgRnVuY3Rpb25cbiAgICAgICAgICovXG4gICAgICAgICdfJzogbG9kYXNoXG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBsYXp5IHdyYXBwZXIgb2JqZWN0IHdoaWNoIHdyYXBzIGB2YWx1ZWAgdG8gZW5hYmxlIGxhenkgZXZhbHVhdGlvbi5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gd3JhcC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBMYXp5V3JhcHBlcih2YWx1ZSkge1xuICAgICAgdGhpcy5fX3dyYXBwZWRfXyA9IHZhbHVlO1xuICAgICAgdGhpcy5fX2FjdGlvbnNfXyA9IFtdO1xuICAgICAgdGhpcy5fX2Rpcl9fID0gMTtcbiAgICAgIHRoaXMuX19maWx0ZXJlZF9fID0gZmFsc2U7XG4gICAgICB0aGlzLl9faXRlcmF0ZWVzX18gPSBbXTtcbiAgICAgIHRoaXMuX190YWtlQ291bnRfXyA9IFBPU0lUSVZFX0lORklOSVRZO1xuICAgICAgdGhpcy5fX3ZpZXdzX18gPSBbXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgY2xvbmUgb2YgdGhlIGxhenkgd3JhcHBlciBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBuYW1lIGNsb25lXG4gICAgICogQG1lbWJlck9mIExhenlXcmFwcGVyXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgY2xvbmVkIGBMYXp5V3JhcHBlcmAgb2JqZWN0LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGxhenlDbG9uZSgpIHtcbiAgICAgIHZhciByZXN1bHQgPSBuZXcgTGF6eVdyYXBwZXIodGhpcy5fX3dyYXBwZWRfXyk7XG4gICAgICByZXN1bHQuX19hY3Rpb25zX18gPSBhcnJheUNvcHkodGhpcy5fX2FjdGlvbnNfXyk7XG4gICAgICByZXN1bHQuX19kaXJfXyA9IHRoaXMuX19kaXJfXztcbiAgICAgIHJlc3VsdC5fX2ZpbHRlcmVkX18gPSB0aGlzLl9fZmlsdGVyZWRfXztcbiAgICAgIHJlc3VsdC5fX2l0ZXJhdGVlc19fID0gYXJyYXlDb3B5KHRoaXMuX19pdGVyYXRlZXNfXyk7XG4gICAgICByZXN1bHQuX190YWtlQ291bnRfXyA9IHRoaXMuX190YWtlQ291bnRfXztcbiAgICAgIHJlc3VsdC5fX3ZpZXdzX18gPSBhcnJheUNvcHkodGhpcy5fX3ZpZXdzX18pO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXZlcnNlcyB0aGUgZGlyZWN0aW9uIG9mIGxhenkgaXRlcmF0aW9uLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAbmFtZSByZXZlcnNlXG4gICAgICogQG1lbWJlck9mIExhenlXcmFwcGVyXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbmV3IHJldmVyc2VkIGBMYXp5V3JhcHBlcmAgb2JqZWN0LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGxhenlSZXZlcnNlKCkge1xuICAgICAgaWYgKHRoaXMuX19maWx0ZXJlZF9fKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBuZXcgTGF6eVdyYXBwZXIodGhpcyk7XG4gICAgICAgIHJlc3VsdC5fX2Rpcl9fID0gLTE7XG4gICAgICAgIHJlc3VsdC5fX2ZpbHRlcmVkX18gPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0ID0gdGhpcy5jbG9uZSgpO1xuICAgICAgICByZXN1bHQuX19kaXJfXyAqPSAtMTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXh0cmFjdHMgdGhlIHVud3JhcHBlZCB2YWx1ZSBmcm9tIGl0cyBsYXp5IHdyYXBwZXIuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBuYW1lIHZhbHVlXG4gICAgICogQG1lbWJlck9mIExhenlXcmFwcGVyXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHVud3JhcHBlZCB2YWx1ZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBsYXp5VmFsdWUoKSB7XG4gICAgICB2YXIgYXJyYXkgPSB0aGlzLl9fd3JhcHBlZF9fLnZhbHVlKCksXG4gICAgICAgICAgZGlyID0gdGhpcy5fX2Rpcl9fLFxuICAgICAgICAgIGlzQXJyID0gaXNBcnJheShhcnJheSksXG4gICAgICAgICAgaXNSaWdodCA9IGRpciA8IDAsXG4gICAgICAgICAgYXJyTGVuZ3RoID0gaXNBcnIgPyBhcnJheS5sZW5ndGggOiAwLFxuICAgICAgICAgIHZpZXcgPSBnZXRWaWV3KDAsIGFyckxlbmd0aCwgdGhpcy5fX3ZpZXdzX18pLFxuICAgICAgICAgIHN0YXJ0ID0gdmlldy5zdGFydCxcbiAgICAgICAgICBlbmQgPSB2aWV3LmVuZCxcbiAgICAgICAgICBsZW5ndGggPSBlbmQgLSBzdGFydCxcbiAgICAgICAgICBpbmRleCA9IGlzUmlnaHQgPyBlbmQgOiAoc3RhcnQgLSAxKSxcbiAgICAgICAgICBpdGVyYXRlZXMgPSB0aGlzLl9faXRlcmF0ZWVzX18sXG4gICAgICAgICAgaXRlckxlbmd0aCA9IGl0ZXJhdGVlcy5sZW5ndGgsXG4gICAgICAgICAgcmVzSW5kZXggPSAwLFxuICAgICAgICAgIHRha2VDb3VudCA9IG5hdGl2ZU1pbihsZW5ndGgsIHRoaXMuX190YWtlQ291bnRfXyk7XG5cbiAgICAgIGlmICghaXNBcnIgfHwgYXJyTGVuZ3RoIDwgTEFSR0VfQVJSQVlfU0laRSB8fCAoYXJyTGVuZ3RoID09IGxlbmd0aCAmJiB0YWtlQ291bnQgPT0gbGVuZ3RoKSkge1xuICAgICAgICByZXR1cm4gYmFzZVdyYXBwZXJWYWx1ZSgoaXNSaWdodCAmJiBpc0FycikgPyBhcnJheS5yZXZlcnNlKCkgOiBhcnJheSwgdGhpcy5fX2FjdGlvbnNfXyk7XG4gICAgICB9XG4gICAgICB2YXIgcmVzdWx0ID0gW107XG5cbiAgICAgIG91dGVyOlxuICAgICAgd2hpbGUgKGxlbmd0aC0tICYmIHJlc0luZGV4IDwgdGFrZUNvdW50KSB7XG4gICAgICAgIGluZGV4ICs9IGRpcjtcblxuICAgICAgICB2YXIgaXRlckluZGV4ID0gLTEsXG4gICAgICAgICAgICB2YWx1ZSA9IGFycmF5W2luZGV4XTtcblxuICAgICAgICB3aGlsZSAoKytpdGVySW5kZXggPCBpdGVyTGVuZ3RoKSB7XG4gICAgICAgICAgdmFyIGRhdGEgPSBpdGVyYXRlZXNbaXRlckluZGV4XSxcbiAgICAgICAgICAgICAgaXRlcmF0ZWUgPSBkYXRhLml0ZXJhdGVlLFxuICAgICAgICAgICAgICB0eXBlID0gZGF0YS50eXBlLFxuICAgICAgICAgICAgICBjb21wdXRlZCA9IGl0ZXJhdGVlKHZhbHVlKTtcblxuICAgICAgICAgIGlmICh0eXBlID09IExBWllfTUFQX0ZMQUcpIHtcbiAgICAgICAgICAgIHZhbHVlID0gY29tcHV0ZWQ7XG4gICAgICAgICAgfSBlbHNlIGlmICghY29tcHV0ZWQpIHtcbiAgICAgICAgICAgIGlmICh0eXBlID09IExBWllfRklMVEVSX0ZMQUcpIHtcbiAgICAgICAgICAgICAgY29udGludWUgb3V0ZXI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBicmVhayBvdXRlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0W3Jlc0luZGV4KytdID0gdmFsdWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBjYWNoZSBvYmplY3QgdG8gc3RvcmUga2V5L3ZhbHVlIHBhaXJzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG5hbWUgQ2FjaGVcbiAgICAgKiBAbWVtYmVyT2YgXy5tZW1vaXplXG4gICAgICovXG4gICAgZnVuY3Rpb24gTWFwQ2FjaGUoKSB7XG4gICAgICB0aGlzLl9fZGF0YV9fID0ge307XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBga2V5YCBhbmQgaXRzIHZhbHVlIGZyb20gdGhlIGNhY2hlLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAbmFtZSBkZWxldGVcbiAgICAgKiBAbWVtYmVyT2YgXy5tZW1vaXplLkNhY2hlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byByZW1vdmUuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBlbnRyeSB3YXMgcmVtb3ZlZCBzdWNjZXNzZnVsbHksIGVsc2UgYGZhbHNlYC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBtYXBEZWxldGUoa2V5KSB7XG4gICAgICByZXR1cm4gdGhpcy5oYXMoa2V5KSAmJiBkZWxldGUgdGhpcy5fX2RhdGFfX1trZXldO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGNhY2hlZCB2YWx1ZSBmb3IgYGtleWAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBuYW1lIGdldFxuICAgICAqIEBtZW1iZXJPZiBfLm1lbW9pemUuQ2FjaGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIGdldC5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgY2FjaGVkIHZhbHVlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1hcEdldChrZXkpIHtcbiAgICAgIHJldHVybiBrZXkgPT0gJ19fcHJvdG9fXycgPyB1bmRlZmluZWQgOiB0aGlzLl9fZGF0YV9fW2tleV07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGEgY2FjaGVkIHZhbHVlIGZvciBga2V5YCBleGlzdHMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBuYW1lIGhhc1xuICAgICAqIEBtZW1iZXJPZiBfLm1lbW9pemUuQ2FjaGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbiBlbnRyeSBmb3IgYGtleWAgZXhpc3RzLCBlbHNlIGBmYWxzZWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gbWFwSGFzKGtleSkge1xuICAgICAgcmV0dXJuIGtleSAhPSAnX19wcm90b19fJyAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMuX19kYXRhX18sIGtleSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyBgdmFsdWVgIHRvIGBrZXlgIG9mIHRoZSBjYWNoZS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQG5hbWUgc2V0XG4gICAgICogQG1lbWJlck9mIF8ubWVtb2l6ZS5DYWNoZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gY2FjaGUuXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2FjaGUuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgY2FjaGUgb2JqZWN0LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1hcFNldChrZXksIHZhbHVlKSB7XG4gICAgICBpZiAoa2V5ICE9ICdfX3Byb3RvX18nKSB7XG4gICAgICAgIHRoaXMuX19kYXRhX19ba2V5XSA9IHZhbHVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBDcmVhdGVzIGEgY2FjaGUgb2JqZWN0IHRvIHN0b3JlIHVuaXF1ZSB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFt2YWx1ZXNdIFRoZSB2YWx1ZXMgdG8gY2FjaGUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gU2V0Q2FjaGUodmFsdWVzKSB7XG4gICAgICB2YXIgbGVuZ3RoID0gdmFsdWVzID8gdmFsdWVzLmxlbmd0aCA6IDA7XG5cbiAgICAgIHRoaXMuZGF0YSA9IHsgJ2hhc2gnOiBuYXRpdmVDcmVhdGUobnVsbCksICdzZXQnOiBuZXcgU2V0IH07XG4gICAgICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICAgICAgdGhpcy5wdXNoKHZhbHVlc1tsZW5ndGhdKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBpbiBgY2FjaGVgIG1pbWlja2luZyB0aGUgcmV0dXJuIHNpZ25hdHVyZSBvZlxuICAgICAqIGBfLmluZGV4T2ZgIGJ5IHJldHVybmluZyBgMGAgaWYgdGhlIHZhbHVlIGlzIGZvdW5kLCBlbHNlIGAtMWAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjYWNoZSBUaGUgY2FjaGUgdG8gc2VhcmNoLlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNlYXJjaCBmb3IuXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyBgMGAgaWYgYHZhbHVlYCBpcyBmb3VuZCwgZWxzZSBgLTFgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNhY2hlSW5kZXhPZihjYWNoZSwgdmFsdWUpIHtcbiAgICAgIHZhciBkYXRhID0gY2FjaGUuZGF0YSxcbiAgICAgICAgICByZXN1bHQgPSAodHlwZW9mIHZhbHVlID09ICdzdHJpbmcnIHx8IGlzT2JqZWN0KHZhbHVlKSkgPyBkYXRhLnNldC5oYXModmFsdWUpIDogZGF0YS5oYXNoW3ZhbHVlXTtcblxuICAgICAgcmV0dXJuIHJlc3VsdCA/IDAgOiAtMTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGB2YWx1ZWAgdG8gdGhlIGNhY2hlLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAbmFtZSBwdXNoXG4gICAgICogQG1lbWJlck9mIFNldENhY2hlXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2FjaGUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gY2FjaGVQdXNoKHZhbHVlKSB7XG4gICAgICB2YXIgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT0gJ3N0cmluZycgfHwgaXNPYmplY3QodmFsdWUpKSB7XG4gICAgICAgIGRhdGEuc2V0LmFkZCh2YWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkYXRhLmhhc2hbdmFsdWVdID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGFycmF5IGpvaW5pbmcgYGFycmF5YCB3aXRoIGBvdGhlcmAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBqb2luLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IG90aGVyIFRoZSBvdGhlciBhcnJheSB0byBqb2luLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGNvbmNhdGVuYXRlZCBhcnJheS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhcnJheUNvbmNhdChhcnJheSwgb3RoZXIpIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IGFycmF5Lmxlbmd0aCxcbiAgICAgICAgICBvdGhJbmRleCA9IC0xLFxuICAgICAgICAgIG90aExlbmd0aCA9IG90aGVyLmxlbmd0aCxcbiAgICAgICAgICByZXN1bHQgPSBBcnJheShsZW5ndGggKyBvdGhMZW5ndGgpO1xuXG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICByZXN1bHRbaW5kZXhdID0gYXJyYXlbaW5kZXhdO1xuICAgICAgfVxuICAgICAgd2hpbGUgKCsrb3RoSW5kZXggPCBvdGhMZW5ndGgpIHtcbiAgICAgICAgcmVzdWx0W2luZGV4KytdID0gb3RoZXJbb3RoSW5kZXhdO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb3BpZXMgdGhlIHZhbHVlcyBvZiBgc291cmNlYCB0byBgYXJyYXlgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBzb3VyY2UgVGhlIGFycmF5IHRvIGNvcHkgdmFsdWVzIGZyb20uXG4gICAgICogQHBhcmFtIHtBcnJheX0gW2FycmF5PVtdXSBUaGUgYXJyYXkgdG8gY29weSB2YWx1ZXMgdG8uXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGBhcnJheWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYXJyYXlDb3B5KHNvdXJjZSwgYXJyYXkpIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IHNvdXJjZS5sZW5ndGg7XG5cbiAgICAgIGFycmF5IHx8IChhcnJheSA9IEFycmF5KGxlbmd0aCkpO1xuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgYXJyYXlbaW5kZXhdID0gc291cmNlW2luZGV4XTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhcnJheTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYF8uZm9yRWFjaGAgZm9yIGFycmF5cyB3aXRob3V0IHN1cHBvcnQgZm9yIGNhbGxiYWNrXG4gICAgICogc2hvcnRoYW5kcyBhbmQgYHRoaXNgIGJpbmRpbmcuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYGFycmF5YC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhcnJheUVhY2goYXJyYXksIGl0ZXJhdGVlKSB7XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSBhcnJheS5sZW5ndGg7XG5cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIGlmIChpdGVyYXRlZShhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBhcnJheTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYF8uZm9yRWFjaFJpZ2h0YCBmb3IgYXJyYXlzIHdpdGhvdXQgc3VwcG9ydCBmb3JcbiAgICAgKiBjYWxsYmFjayBzaG9ydGhhbmRzIGFuZCBgdGhpc2AgYmluZGluZy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBgYXJyYXlgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFycmF5RWFjaFJpZ2h0KGFycmF5LCBpdGVyYXRlZSkge1xuICAgICAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcblxuICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICAgIGlmIChpdGVyYXRlZShhcnJheVtsZW5ndGhdLCBsZW5ndGgsIGFycmF5KSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGFycmF5O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgXy5ldmVyeWAgZm9yIGFycmF5cyB3aXRob3V0IHN1cHBvcnQgZm9yIGNhbGxiYWNrXG4gICAgICogc2hvcnRoYW5kcyBhbmQgYHRoaXNgIGJpbmRpbmcuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZGljYXRlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFsbCBlbGVtZW50cyBwYXNzIHRoZSBwcmVkaWNhdGUgY2hlY2ssXG4gICAgICogIGVsc2UgYGZhbHNlYC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhcnJheUV2ZXJ5KGFycmF5LCBwcmVkaWNhdGUpIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcblxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgaWYgKCFwcmVkaWNhdGUoYXJyYXlbaW5kZXhdLCBpbmRleCwgYXJyYXkpKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VFeHRyZW11bWAgZm9yIGFycmF5cyB3aGljaCBpbnZva2VzIGBpdGVyYXRlZWBcbiAgICAgKiB3aXRoIG9uZSBhcmd1bWVudDogKHZhbHVlKS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNvbXBhcmF0b3IgVGhlIGZ1bmN0aW9uIHVzZWQgdG8gY29tcGFyZSB2YWx1ZXMuXG4gICAgICogQHBhcmFtIHsqfSBleFZhbHVlIFRoZSBpbml0aWFsIGV4dHJlbXVtIHZhbHVlLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBleHRyZW11bSB2YWx1ZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhcnJheUV4dHJlbXVtKGFycmF5LCBpdGVyYXRlZSwgY29tcGFyYXRvciwgZXhWYWx1ZSkge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gYXJyYXkubGVuZ3RoLFxuICAgICAgICAgIGNvbXB1dGVkID0gZXhWYWx1ZSxcbiAgICAgICAgICByZXN1bHQgPSBjb21wdXRlZDtcblxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gYXJyYXlbaW5kZXhdLFxuICAgICAgICAgICAgY3VycmVudCA9ICtpdGVyYXRlZSh2YWx1ZSk7XG5cbiAgICAgICAgaWYgKGNvbXBhcmF0b3IoY3VycmVudCwgY29tcHV0ZWQpKSB7XG4gICAgICAgICAgY29tcHV0ZWQgPSBjdXJyZW50O1xuICAgICAgICAgIHJlc3VsdCA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgXy5maWx0ZXJgIGZvciBhcnJheXMgd2l0aG91dCBzdXBwb3J0IGZvciBjYWxsYmFja1xuICAgICAqIHNob3J0aGFuZHMgYW5kIGB0aGlzYCBiaW5kaW5nLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGZpbHRlcmVkIGFycmF5LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFycmF5RmlsdGVyKGFycmF5LCBwcmVkaWNhdGUpIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IGFycmF5Lmxlbmd0aCxcbiAgICAgICAgICByZXNJbmRleCA9IC0xLFxuICAgICAgICAgIHJlc3VsdCA9IFtdO1xuXG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICB2YXIgdmFsdWUgPSBhcnJheVtpbmRleF07XG4gICAgICAgIGlmIChwcmVkaWNhdGUodmFsdWUsIGluZGV4LCBhcnJheSkpIHtcbiAgICAgICAgICByZXN1bHRbKytyZXNJbmRleF0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYF8ubWFwYCBmb3IgYXJyYXlzIHdpdGhvdXQgc3VwcG9ydCBmb3IgY2FsbGJhY2tcbiAgICAgKiBzaG9ydGhhbmRzIGFuZCBgdGhpc2AgYmluZGluZy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IG1hcHBlZCBhcnJheS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhcnJheU1hcChhcnJheSwgaXRlcmF0ZWUpIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IGFycmF5Lmxlbmd0aCxcbiAgICAgICAgICByZXN1bHQgPSBBcnJheShsZW5ndGgpO1xuXG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICByZXN1bHRbaW5kZXhdID0gaXRlcmF0ZWUoYXJyYXlbaW5kZXhdLCBpbmRleCwgYXJyYXkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBcHBlbmRzIHRoZSBlbGVtZW50cyBvZiBgdmFsdWVzYCB0byBgYXJyYXlgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gbW9kaWZ5LlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHZhbHVlcyBUaGUgdmFsdWVzIHRvIGFwcGVuZC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYGFycmF5YC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhcnJheVB1c2goYXJyYXksIHZhbHVlcykge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gdmFsdWVzLmxlbmd0aCxcbiAgICAgICAgICBvZmZzZXQgPSBhcnJheS5sZW5ndGg7XG5cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIGFycmF5W29mZnNldCArIGluZGV4XSA9IHZhbHVlc1tpbmRleF07XG4gICAgICB9XG4gICAgICByZXR1cm4gYXJyYXk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBfLnJlZHVjZWAgZm9yIGFycmF5cyB3aXRob3V0IHN1cHBvcnQgZm9yIGNhbGxiYWNrXG4gICAgICogc2hvcnRoYW5kcyBhbmQgYHRoaXNgIGJpbmRpbmcuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFthY2N1bXVsYXRvcl0gVGhlIGluaXRpYWwgdmFsdWUuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbaW5pdEZyb21BcnJheV0gU3BlY2lmeSB1c2luZyB0aGUgZmlyc3QgZWxlbWVudCBvZiBgYXJyYXlgXG4gICAgICogIGFzIHRoZSBpbml0aWFsIHZhbHVlLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBhY2N1bXVsYXRlZCB2YWx1ZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhcnJheVJlZHVjZShhcnJheSwgaXRlcmF0ZWUsIGFjY3VtdWxhdG9yLCBpbml0RnJvbUFycmF5KSB7XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSBhcnJheS5sZW5ndGg7XG5cbiAgICAgIGlmIChpbml0RnJvbUFycmF5ICYmIGxlbmd0aCkge1xuICAgICAgICBhY2N1bXVsYXRvciA9IGFycmF5WysraW5kZXhdO1xuICAgICAgfVxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgYWNjdW11bGF0b3IgPSBpdGVyYXRlZShhY2N1bXVsYXRvciwgYXJyYXlbaW5kZXhdLCBpbmRleCwgYXJyYXkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFjY3VtdWxhdG9yO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgXy5yZWR1Y2VSaWdodGAgZm9yIGFycmF5cyB3aXRob3V0IHN1cHBvcnQgZm9yXG4gICAgICogY2FsbGJhY2sgc2hvcnRoYW5kcyBhbmQgYHRoaXNgIGJpbmRpbmcuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFthY2N1bXVsYXRvcl0gVGhlIGluaXRpYWwgdmFsdWUuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbaW5pdEZyb21BcnJheV0gU3BlY2lmeSB1c2luZyB0aGUgbGFzdCBlbGVtZW50IG9mIGBhcnJheWBcbiAgICAgKiAgYXMgdGhlIGluaXRpYWwgdmFsdWUuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGFjY3VtdWxhdGVkIHZhbHVlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFycmF5UmVkdWNlUmlnaHQoYXJyYXksIGl0ZXJhdGVlLCBhY2N1bXVsYXRvciwgaW5pdEZyb21BcnJheSkge1xuICAgICAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcbiAgICAgIGlmIChpbml0RnJvbUFycmF5ICYmIGxlbmd0aCkge1xuICAgICAgICBhY2N1bXVsYXRvciA9IGFycmF5Wy0tbGVuZ3RoXTtcbiAgICAgIH1cbiAgICAgIHdoaWxlIChsZW5ndGgtLSkge1xuICAgICAgICBhY2N1bXVsYXRvciA9IGl0ZXJhdGVlKGFjY3VtdWxhdG9yLCBhcnJheVtsZW5ndGhdLCBsZW5ndGgsIGFycmF5KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhY2N1bXVsYXRvcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYF8uc29tZWAgZm9yIGFycmF5cyB3aXRob3V0IHN1cHBvcnQgZm9yIGNhbGxiYWNrXG4gICAgICogc2hvcnRoYW5kcyBhbmQgYHRoaXNgIGJpbmRpbmcuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZGljYXRlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFueSBlbGVtZW50IHBhc3NlcyB0aGUgcHJlZGljYXRlIGNoZWNrLFxuICAgICAqICBlbHNlIGBmYWxzZWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYXJyYXlTb21lKGFycmF5LCBwcmVkaWNhdGUpIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcblxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgaWYgKHByZWRpY2F0ZShhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSkpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgXy5zdW1gIGZvciBhcnJheXMgd2l0aG91dCBzdXBwb3J0IGZvciBjYWxsYmFja1xuICAgICAqIHNob3J0aGFuZHMgYW5kIGB0aGlzYCBiaW5kaW5nLi5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHN1bS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhcnJheVN1bShhcnJheSwgaXRlcmF0ZWUpIHtcbiAgICAgIHZhciBsZW5ndGggPSBhcnJheS5sZW5ndGgsXG4gICAgICAgICAgcmVzdWx0ID0gMDtcblxuICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICAgIHJlc3VsdCArPSAraXRlcmF0ZWUoYXJyYXlbbGVuZ3RoXSkgfHwgMDtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXNlZCBieSBgXy5kZWZhdWx0c2AgdG8gY3VzdG9taXplIGl0cyBgXy5hc3NpZ25gIHVzZS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHsqfSBvYmplY3RWYWx1ZSBUaGUgZGVzdGluYXRpb24gb2JqZWN0IHByb3BlcnR5IHZhbHVlLlxuICAgICAqIEBwYXJhbSB7Kn0gc291cmNlVmFsdWUgVGhlIHNvdXJjZSBvYmplY3QgcHJvcGVydHkgdmFsdWUuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHZhbHVlIHRvIGFzc2lnbiB0byB0aGUgZGVzdGluYXRpb24gb2JqZWN0LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFzc2lnbkRlZmF1bHRzKG9iamVjdFZhbHVlLCBzb3VyY2VWYWx1ZSkge1xuICAgICAgcmV0dXJuIG9iamVjdFZhbHVlID09PSB1bmRlZmluZWQgPyBzb3VyY2VWYWx1ZSA6IG9iamVjdFZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVzZWQgYnkgYF8udGVtcGxhdGVgIHRvIGN1c3RvbWl6ZSBpdHMgYF8uYXNzaWduYCB1c2UuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVGhpcyBmdW5jdGlvbiBpcyBsaWtlIGBhc3NpZ25EZWZhdWx0c2AgZXhjZXB0IHRoYXQgaXQgaWdub3Jlc1xuICAgICAqIGluaGVyaXRlZCBwcm9wZXJ0eSB2YWx1ZXMgd2hlbiBjaGVja2luZyBpZiBhIHByb3BlcnR5IGlzIGB1bmRlZmluZWRgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0geyp9IG9iamVjdFZhbHVlIFRoZSBkZXN0aW5hdGlvbiBvYmplY3QgcHJvcGVydHkgdmFsdWUuXG4gICAgICogQHBhcmFtIHsqfSBzb3VyY2VWYWx1ZSBUaGUgc291cmNlIG9iamVjdCBwcm9wZXJ0eSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgYXNzb2NpYXRlZCB3aXRoIHRoZSBvYmplY3QgYW5kIHNvdXJjZSB2YWx1ZXMuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgZGVzdGluYXRpb24gb2JqZWN0LlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSB2YWx1ZSB0byBhc3NpZ24gdG8gdGhlIGRlc3RpbmF0aW9uIG9iamVjdC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhc3NpZ25Pd25EZWZhdWx0cyhvYmplY3RWYWx1ZSwgc291cmNlVmFsdWUsIGtleSwgb2JqZWN0KSB7XG4gICAgICByZXR1cm4gKG9iamVjdFZhbHVlID09PSB1bmRlZmluZWQgfHwgIWhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBrZXkpKVxuICAgICAgICA/IHNvdXJjZVZhbHVlXG4gICAgICAgIDogb2JqZWN0VmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBfLmFzc2lnbmAgZm9yIGN1c3RvbWl6aW5nIGFzc2lnbmVkIHZhbHVlcyB3aXRob3V0XG4gICAgICogc3VwcG9ydCBmb3IgYXJndW1lbnQganVnZ2xpbmcsIG11bHRpcGxlIHNvdXJjZXMsIGFuZCBgdGhpc2AgYmluZGluZyBgY3VzdG9taXplcmBcbiAgICAgKiBmdW5jdGlvbnMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIGRlc3RpbmF0aW9uIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gc291cmNlIFRoZSBzb3VyY2Ugb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGN1c3RvbWl6ZXIgVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBhc3NpZ25lZCB2YWx1ZXMuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhc3NpZ25XaXRoKG9iamVjdCwgc291cmNlLCBjdXN0b21pemVyKSB7XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBwcm9wcyA9IGtleXMoc291cmNlKSxcbiAgICAgICAgICBsZW5ndGggPSBwcm9wcy5sZW5ndGg7XG5cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHZhciBrZXkgPSBwcm9wc1tpbmRleF0sXG4gICAgICAgICAgICB2YWx1ZSA9IG9iamVjdFtrZXldLFxuICAgICAgICAgICAgcmVzdWx0ID0gY3VzdG9taXplcih2YWx1ZSwgc291cmNlW2tleV0sIGtleSwgb2JqZWN0LCBzb3VyY2UpO1xuXG4gICAgICAgIGlmICgocmVzdWx0ID09PSByZXN1bHQgPyAocmVzdWx0ICE9PSB2YWx1ZSkgOiAodmFsdWUgPT09IHZhbHVlKSkgfHxcbiAgICAgICAgICAgICh2YWx1ZSA9PT0gdW5kZWZpbmVkICYmICEoa2V5IGluIG9iamVjdCkpKSB7XG4gICAgICAgICAgb2JqZWN0W2tleV0gPSByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uYXNzaWduYCB3aXRob3V0IHN1cHBvcnQgZm9yIGFyZ3VtZW50IGp1Z2dsaW5nLFxuICAgICAqIG11bHRpcGxlIHNvdXJjZXMsIGFuZCBgY3VzdG9taXplcmAgZnVuY3Rpb25zLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZSBUaGUgc291cmNlIG9iamVjdC5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VBc3NpZ24ob2JqZWN0LCBzb3VyY2UpIHtcbiAgICAgIHJldHVybiBzb3VyY2UgPT0gbnVsbFxuICAgICAgICA/IG9iamVjdFxuICAgICAgICA6IGJhc2VDb3B5KHNvdXJjZSwga2V5cyhzb3VyY2UpLCBvYmplY3QpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmF0YCB3aXRob3V0IHN1cHBvcnQgZm9yIHN0cmluZyBjb2xsZWN0aW9uc1xuICAgICAqIGFuZCBpbmRpdmlkdWFsIGtleSBhcmd1bWVudHMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge251bWJlcltdfHN0cmluZ1tdfSBwcm9wcyBUaGUgcHJvcGVydHkgbmFtZXMgb3IgaW5kZXhlcyBvZiBlbGVtZW50cyB0byBwaWNrLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGFycmF5IG9mIHBpY2tlZCBlbGVtZW50cy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlQXQoY29sbGVjdGlvbiwgcHJvcHMpIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGlzTmlsID0gY29sbGVjdGlvbiA9PSBudWxsLFxuICAgICAgICAgIGlzQXJyID0gIWlzTmlsICYmIGlzQXJyYXlMaWtlKGNvbGxlY3Rpb24pLFxuICAgICAgICAgIGxlbmd0aCA9IGlzQXJyID8gY29sbGVjdGlvbi5sZW5ndGggOiAwLFxuICAgICAgICAgIHByb3BzTGVuZ3RoID0gcHJvcHMubGVuZ3RoLFxuICAgICAgICAgIHJlc3VsdCA9IEFycmF5KHByb3BzTGVuZ3RoKTtcblxuICAgICAgd2hpbGUoKytpbmRleCA8IHByb3BzTGVuZ3RoKSB7XG4gICAgICAgIHZhciBrZXkgPSBwcm9wc1tpbmRleF07XG4gICAgICAgIGlmIChpc0Fycikge1xuICAgICAgICAgIHJlc3VsdFtpbmRleF0gPSBpc0luZGV4KGtleSwgbGVuZ3RoKSA/IGNvbGxlY3Rpb25ba2V5XSA6IHVuZGVmaW5lZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHRbaW5kZXhdID0gaXNOaWwgPyB1bmRlZmluZWQgOiBjb2xsZWN0aW9uW2tleV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29waWVzIHByb3BlcnRpZXMgb2YgYHNvdXJjZWAgdG8gYG9iamVjdGAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgVGhlIG9iamVjdCB0byBjb3B5IHByb3BlcnRpZXMgZnJvbS5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBwcm9wcyBUaGUgcHJvcGVydHkgbmFtZXMgdG8gY29weS5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29iamVjdD17fV0gVGhlIG9iamVjdCB0byBjb3B5IHByb3BlcnRpZXMgdG8uXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlQ29weShzb3VyY2UsIHByb3BzLCBvYmplY3QpIHtcbiAgICAgIG9iamVjdCB8fCAob2JqZWN0ID0ge30pO1xuXG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSBwcm9wcy5sZW5ndGg7XG5cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHZhciBrZXkgPSBwcm9wc1tpbmRleF07XG4gICAgICAgIG9iamVjdFtrZXldID0gc291cmNlW2tleV07XG4gICAgICB9XG4gICAgICByZXR1cm4gb2JqZWN0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmNhbGxiYWNrYCB3aGljaCBzdXBwb3J0cyBzcGVjaWZ5aW5nIHRoZVxuICAgICAqIG51bWJlciBvZiBhcmd1bWVudHMgdG8gcHJvdmlkZSB0byBgZnVuY2AuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Kn0gW2Z1bmM9Xy5pZGVudGl0eV0gVGhlIHZhbHVlIHRvIGNvbnZlcnQgdG8gYSBjYWxsYmFjay5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGZ1bmNgLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbYXJnQ291bnRdIFRoZSBudW1iZXIgb2YgYXJndW1lbnRzIHRvIHByb3ZpZGUgdG8gYGZ1bmNgLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgY2FsbGJhY2suXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZUNhbGxiYWNrKGZ1bmMsIHRoaXNBcmcsIGFyZ0NvdW50KSB7XG4gICAgICB2YXIgdHlwZSA9IHR5cGVvZiBmdW5jO1xuICAgICAgaWYgKHR5cGUgPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gdGhpc0FyZyA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgPyBmdW5jXG4gICAgICAgICAgOiBiaW5kQ2FsbGJhY2soZnVuYywgdGhpc0FyZywgYXJnQ291bnQpO1xuICAgICAgfVxuICAgICAgaWYgKGZ1bmMgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gaWRlbnRpdHk7XG4gICAgICB9XG4gICAgICBpZiAodHlwZSA9PSAnb2JqZWN0Jykge1xuICAgICAgICByZXR1cm4gYmFzZU1hdGNoZXMoZnVuYyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpc0FyZyA9PT0gdW5kZWZpbmVkXG4gICAgICAgID8gcHJvcGVydHkoZnVuYylcbiAgICAgICAgOiBiYXNlTWF0Y2hlc1Byb3BlcnR5KGZ1bmMsIHRoaXNBcmcpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmNsb25lYCB3aXRob3V0IHN1cHBvcnQgZm9yIGFyZ3VtZW50IGp1Z2dsaW5nXG4gICAgICogYW5kIGB0aGlzYCBiaW5kaW5nIGBjdXN0b21pemVyYCBmdW5jdGlvbnMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNsb25lLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzRGVlcF0gU3BlY2lmeSBhIGRlZXAgY2xvbmUuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY2xvbmluZyB2YWx1ZXMuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtrZXldIFRoZSBrZXkgb2YgYHZhbHVlYC5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29iamVjdF0gVGhlIG9iamVjdCBgdmFsdWVgIGJlbG9uZ3MgdG8uXG4gICAgICogQHBhcmFtIHtBcnJheX0gW3N0YWNrQT1bXV0gVHJhY2tzIHRyYXZlcnNlZCBzb3VyY2Ugb2JqZWN0cy5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbc3RhY2tCPVtdXSBBc3NvY2lhdGVzIGNsb25lcyB3aXRoIHNvdXJjZSBjb3VudGVycGFydHMuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGNsb25lZCB2YWx1ZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlQ2xvbmUodmFsdWUsIGlzRGVlcCwgY3VzdG9taXplciwga2V5LCBvYmplY3QsIHN0YWNrQSwgc3RhY2tCKSB7XG4gICAgICB2YXIgcmVzdWx0O1xuICAgICAgaWYgKGN1c3RvbWl6ZXIpIHtcbiAgICAgICAgcmVzdWx0ID0gb2JqZWN0ID8gY3VzdG9taXplcih2YWx1ZSwga2V5LCBvYmplY3QpIDogY3VzdG9taXplcih2YWx1ZSk7XG4gICAgICB9XG4gICAgICBpZiAocmVzdWx0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICAgIGlmICghaXNPYmplY3QodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH1cbiAgICAgIHZhciBpc0FyciA9IGlzQXJyYXkodmFsdWUpO1xuICAgICAgaWYgKGlzQXJyKSB7XG4gICAgICAgIHJlc3VsdCA9IGluaXRDbG9uZUFycmF5KHZhbHVlKTtcbiAgICAgICAgaWYgKCFpc0RlZXApIHtcbiAgICAgICAgICByZXR1cm4gYXJyYXlDb3B5KHZhbHVlLCByZXN1bHQpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgdGFnID0gb2JqVG9TdHJpbmcuY2FsbCh2YWx1ZSksXG4gICAgICAgICAgICBpc0Z1bmMgPSB0YWcgPT0gZnVuY1RhZztcblxuICAgICAgICBpZiAodGFnID09IG9iamVjdFRhZyB8fCB0YWcgPT0gYXJnc1RhZyB8fCAoaXNGdW5jICYmICFvYmplY3QpKSB7XG4gICAgICAgICAgcmVzdWx0ID0gaW5pdENsb25lT2JqZWN0KGlzRnVuYyA/IHt9IDogdmFsdWUpO1xuICAgICAgICAgIGlmICghaXNEZWVwKSB7XG4gICAgICAgICAgICByZXR1cm4gYmFzZUFzc2lnbihyZXN1bHQsIHZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIGNsb25lYWJsZVRhZ3NbdGFnXVxuICAgICAgICAgICAgPyBpbml0Q2xvbmVCeVRhZyh2YWx1ZSwgdGFnLCBpc0RlZXApXG4gICAgICAgICAgICA6IChvYmplY3QgPyB2YWx1ZSA6IHt9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gQ2hlY2sgZm9yIGNpcmN1bGFyIHJlZmVyZW5jZXMgYW5kIHJldHVybiBpdHMgY29ycmVzcG9uZGluZyBjbG9uZS5cbiAgICAgIHN0YWNrQSB8fCAoc3RhY2tBID0gW10pO1xuICAgICAgc3RhY2tCIHx8IChzdGFja0IgPSBbXSk7XG5cbiAgICAgIHZhciBsZW5ndGggPSBzdGFja0EubGVuZ3RoO1xuICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICAgIGlmIChzdGFja0FbbGVuZ3RoXSA9PSB2YWx1ZSkge1xuICAgICAgICAgIHJldHVybiBzdGFja0JbbGVuZ3RoXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gQWRkIHRoZSBzb3VyY2UgdmFsdWUgdG8gdGhlIHN0YWNrIG9mIHRyYXZlcnNlZCBvYmplY3RzIGFuZCBhc3NvY2lhdGUgaXQgd2l0aCBpdHMgY2xvbmUuXG4gICAgICBzdGFja0EucHVzaCh2YWx1ZSk7XG4gICAgICBzdGFja0IucHVzaChyZXN1bHQpO1xuXG4gICAgICAvLyBSZWN1cnNpdmVseSBwb3B1bGF0ZSBjbG9uZSAoc3VzY2VwdGlibGUgdG8gY2FsbCBzdGFjayBsaW1pdHMpLlxuICAgICAgKGlzQXJyID8gYXJyYXlFYWNoIDogYmFzZUZvck93bikodmFsdWUsIGZ1bmN0aW9uKHN1YlZhbHVlLCBrZXkpIHtcbiAgICAgICAgcmVzdWx0W2tleV0gPSBiYXNlQ2xvbmUoc3ViVmFsdWUsIGlzRGVlcCwgY3VzdG9taXplciwga2V5LCB2YWx1ZSwgc3RhY2tBLCBzdGFja0IpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmNyZWF0ZWAgd2l0aG91dCBzdXBwb3J0IGZvciBhc3NpZ25pbmdcbiAgICAgKiBwcm9wZXJ0aWVzIHRvIHRoZSBjcmVhdGVkIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHByb3RvdHlwZSBUaGUgb2JqZWN0IHRvIGluaGVyaXQgZnJvbS5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBuZXcgb2JqZWN0LlxuICAgICAqL1xuICAgIHZhciBiYXNlQ3JlYXRlID0gKGZ1bmN0aW9uKCkge1xuICAgICAgZnVuY3Rpb24gb2JqZWN0KCkge31cbiAgICAgIHJldHVybiBmdW5jdGlvbihwcm90b3R5cGUpIHtcbiAgICAgICAgaWYgKGlzT2JqZWN0KHByb3RvdHlwZSkpIHtcbiAgICAgICAgICBvYmplY3QucHJvdG90eXBlID0gcHJvdG90eXBlO1xuICAgICAgICAgIHZhciByZXN1bHQgPSBuZXcgb2JqZWN0O1xuICAgICAgICAgIG9iamVjdC5wcm90b3R5cGUgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdCB8fCB7fTtcbiAgICAgIH07XG4gICAgfSgpKTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmRlbGF5YCBhbmQgYF8uZGVmZXJgIHdoaWNoIGFjY2VwdHMgYW4gaW5kZXhcbiAgICAgKiBvZiB3aGVyZSB0byBzbGljZSB0aGUgYXJndW1lbnRzIHRvIHByb3ZpZGUgdG8gYGZ1bmNgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBkZWxheS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gd2FpdCBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byBkZWxheSBpbnZvY2F0aW9uLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBhcmdzIFRoZSBhcmd1bWVudHMgcHJvdmlkZSB0byBgZnVuY2AuXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgdGltZXIgaWQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZURlbGF5KGZ1bmMsIHdhaXQsIGFyZ3MpIHtcbiAgICAgIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBmdW5jLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7IH0sIHdhaXQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmRpZmZlcmVuY2VgIHdoaWNoIGFjY2VwdHMgYSBzaW5nbGUgYXJyYXlcbiAgICAgKiBvZiB2YWx1ZXMgdG8gZXhjbHVkZS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGluc3BlY3QuXG4gICAgICogQHBhcmFtIHtBcnJheX0gdmFsdWVzIFRoZSB2YWx1ZXMgdG8gZXhjbHVkZS5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBhcnJheSBvZiBmaWx0ZXJlZCB2YWx1ZXMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZURpZmZlcmVuY2UoYXJyYXksIHZhbHVlcykge1xuICAgICAgdmFyIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMCxcbiAgICAgICAgICByZXN1bHQgPSBbXTtcblxuICAgICAgaWYgKCFsZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGluZGV4T2YgPSBnZXRJbmRleE9mKCksXG4gICAgICAgICAgaXNDb21tb24gPSBpbmRleE9mID09IGJhc2VJbmRleE9mLFxuICAgICAgICAgIGNhY2hlID0gKGlzQ29tbW9uICYmIHZhbHVlcy5sZW5ndGggPj0gTEFSR0VfQVJSQVlfU0laRSkgPyBjcmVhdGVDYWNoZSh2YWx1ZXMpIDogbnVsbCxcbiAgICAgICAgICB2YWx1ZXNMZW5ndGggPSB2YWx1ZXMubGVuZ3RoO1xuXG4gICAgICBpZiAoY2FjaGUpIHtcbiAgICAgICAgaW5kZXhPZiA9IGNhY2hlSW5kZXhPZjtcbiAgICAgICAgaXNDb21tb24gPSBmYWxzZTtcbiAgICAgICAgdmFsdWVzID0gY2FjaGU7XG4gICAgICB9XG4gICAgICBvdXRlcjpcbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IGFycmF5W2luZGV4XTtcblxuICAgICAgICBpZiAoaXNDb21tb24gJiYgdmFsdWUgPT09IHZhbHVlKSB7XG4gICAgICAgICAgdmFyIHZhbHVlc0luZGV4ID0gdmFsdWVzTGVuZ3RoO1xuICAgICAgICAgIHdoaWxlICh2YWx1ZXNJbmRleC0tKSB7XG4gICAgICAgICAgICBpZiAodmFsdWVzW3ZhbHVlc0luZGV4XSA9PT0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgY29udGludWUgb3V0ZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJlc3VsdC5wdXNoKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpbmRleE9mKHZhbHVlcywgdmFsdWUsIDApIDwgMCkge1xuICAgICAgICAgIHJlc3VsdC5wdXNoKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5mb3JFYWNoYCB3aXRob3V0IHN1cHBvcnQgZm9yIGNhbGxiYWNrXG4gICAgICogc2hvcnRoYW5kcyBhbmQgYHRoaXNgIGJpbmRpbmcuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl8T2JqZWN0fHN0cmluZ30gUmV0dXJucyBgY29sbGVjdGlvbmAuXG4gICAgICovXG4gICAgdmFyIGJhc2VFYWNoID0gY3JlYXRlQmFzZUVhY2goYmFzZUZvck93bik7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5mb3JFYWNoUmlnaHRgIHdpdGhvdXQgc3VwcG9ydCBmb3IgY2FsbGJhY2tcbiAgICAgKiBzaG9ydGhhbmRzIGFuZCBgdGhpc2AgYmluZGluZy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEByZXR1cm5zIHtBcnJheXxPYmplY3R8c3RyaW5nfSBSZXR1cm5zIGBjb2xsZWN0aW9uYC5cbiAgICAgKi9cbiAgICB2YXIgYmFzZUVhY2hSaWdodCA9IGNyZWF0ZUJhc2VFYWNoKGJhc2VGb3JPd25SaWdodCwgdHJ1ZSk7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5ldmVyeWAgd2l0aG91dCBzdXBwb3J0IGZvciBjYWxsYmFja1xuICAgICAqIHNob3J0aGFuZHMgYW5kIGB0aGlzYCBiaW5kaW5nLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbGwgZWxlbWVudHMgcGFzcyB0aGUgcHJlZGljYXRlIGNoZWNrLFxuICAgICAqICBlbHNlIGBmYWxzZWBcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlRXZlcnkoY29sbGVjdGlvbiwgcHJlZGljYXRlKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gdHJ1ZTtcbiAgICAgIGJhc2VFYWNoKGNvbGxlY3Rpb24sIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikge1xuICAgICAgICByZXN1bHQgPSAhIXByZWRpY2F0ZSh2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGV4dHJlbXVtIHZhbHVlIG9mIGBjb2xsZWN0aW9uYCBpbnZva2luZyBgaXRlcmF0ZWVgIGZvciBlYWNoIHZhbHVlXG4gICAgICogaW4gYGNvbGxlY3Rpb25gIHRvIGdlbmVyYXRlIHRoZSBjcml0ZXJpb24gYnkgd2hpY2ggdGhlIHZhbHVlIGlzIHJhbmtlZC5cbiAgICAgKiBUaGUgYGl0ZXJhdGVlYCBpcyBpbnZva2VkIHdpdGggdGhyZWUgYXJndW1lbnRzOiAodmFsdWUsIGluZGV4fGtleSwgY29sbGVjdGlvbikuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjb21wYXJhdG9yIFRoZSBmdW5jdGlvbiB1c2VkIHRvIGNvbXBhcmUgdmFsdWVzLlxuICAgICAqIEBwYXJhbSB7Kn0gZXhWYWx1ZSBUaGUgaW5pdGlhbCBleHRyZW11bSB2YWx1ZS5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZXh0cmVtdW0gdmFsdWUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZUV4dHJlbXVtKGNvbGxlY3Rpb24sIGl0ZXJhdGVlLCBjb21wYXJhdG9yLCBleFZhbHVlKSB7XG4gICAgICB2YXIgY29tcHV0ZWQgPSBleFZhbHVlLFxuICAgICAgICAgIHJlc3VsdCA9IGNvbXB1dGVkO1xuXG4gICAgICBiYXNlRWFjaChjb2xsZWN0aW9uLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgdmFyIGN1cnJlbnQgPSAraXRlcmF0ZWUodmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKTtcbiAgICAgICAgaWYgKGNvbXBhcmF0b3IoY3VycmVudCwgY29tcHV0ZWQpIHx8IChjdXJyZW50ID09PSBleFZhbHVlICYmIGN1cnJlbnQgPT09IHJlc3VsdCkpIHtcbiAgICAgICAgICBjb21wdXRlZCA9IGN1cnJlbnQ7XG4gICAgICAgICAgcmVzdWx0ID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5maWxsYCB3aXRob3V0IGFuIGl0ZXJhdGVlIGNhbGwgZ3VhcmQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBmaWxsLlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGZpbGwgYGFycmF5YCB3aXRoLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbc3RhcnQ9MF0gVGhlIHN0YXJ0IHBvc2l0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbZW5kPWFycmF5Lmxlbmd0aF0gVGhlIGVuZCBwb3NpdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYGFycmF5YC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlRmlsbChhcnJheSwgdmFsdWUsIHN0YXJ0LCBlbmQpIHtcbiAgICAgIHZhciBsZW5ndGggPSBhcnJheS5sZW5ndGg7XG5cbiAgICAgIHN0YXJ0ID0gc3RhcnQgPT0gbnVsbCA/IDAgOiAoK3N0YXJ0IHx8IDApO1xuICAgICAgaWYgKHN0YXJ0IDwgMCkge1xuICAgICAgICBzdGFydCA9IC1zdGFydCA+IGxlbmd0aCA/IDAgOiAobGVuZ3RoICsgc3RhcnQpO1xuICAgICAgfVxuICAgICAgZW5kID0gKGVuZCA9PT0gdW5kZWZpbmVkIHx8IGVuZCA+IGxlbmd0aCkgPyBsZW5ndGggOiAoK2VuZCB8fCAwKTtcbiAgICAgIGlmIChlbmQgPCAwKSB7XG4gICAgICAgIGVuZCArPSBsZW5ndGg7XG4gICAgICB9XG4gICAgICBsZW5ndGggPSBzdGFydCA+IGVuZCA/IDAgOiAoZW5kID4+PiAwKTtcbiAgICAgIHN0YXJ0ID4+Pj0gMDtcblxuICAgICAgd2hpbGUgKHN0YXJ0IDwgbGVuZ3RoKSB7XG4gICAgICAgIGFycmF5W3N0YXJ0KytdID0gdmFsdWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gYXJyYXk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uZmlsdGVyYCB3aXRob3V0IHN1cHBvcnQgZm9yIGNhbGxiYWNrXG4gICAgICogc2hvcnRoYW5kcyBhbmQgYHRoaXNgIGJpbmRpbmcuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZGljYXRlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgZmlsdGVyZWQgYXJyYXkuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZUZpbHRlcihjb2xsZWN0aW9uLCBwcmVkaWNhdGUpIHtcbiAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgIGJhc2VFYWNoKGNvbGxlY3Rpb24sIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikge1xuICAgICAgICBpZiAocHJlZGljYXRlKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikpIHtcbiAgICAgICAgICByZXN1bHQucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5maW5kYCwgYF8uZmluZExhc3RgLCBgXy5maW5kS2V5YCwgYW5kIGBfLmZpbmRMYXN0S2V5YCxcbiAgICAgKiB3aXRob3V0IHN1cHBvcnQgZm9yIGNhbGxiYWNrIHNob3J0aGFuZHMgYW5kIGB0aGlzYCBiaW5kaW5nLCB3aGljaCBpdGVyYXRlc1xuICAgICAqIG92ZXIgYGNvbGxlY3Rpb25gIHVzaW5nIHRoZSBwcm92aWRlZCBgZWFjaEZ1bmNgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gc2VhcmNoLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGVhY2hGdW5jIFRoZSBmdW5jdGlvbiB0byBpdGVyYXRlIG92ZXIgYGNvbGxlY3Rpb25gLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3JldEtleV0gU3BlY2lmeSByZXR1cm5pbmcgdGhlIGtleSBvZiB0aGUgZm91bmQgZWxlbWVudFxuICAgICAqICBpbnN0ZWFkIG9mIHRoZSBlbGVtZW50IGl0c2VsZi5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZm91bmQgZWxlbWVudCBvciBpdHMga2V5LCBlbHNlIGB1bmRlZmluZWRgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VGaW5kKGNvbGxlY3Rpb24sIHByZWRpY2F0ZSwgZWFjaEZ1bmMsIHJldEtleSkge1xuICAgICAgdmFyIHJlc3VsdDtcbiAgICAgIGVhY2hGdW5jKGNvbGxlY3Rpb24sIGZ1bmN0aW9uKHZhbHVlLCBrZXksIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgaWYgKHByZWRpY2F0ZSh2YWx1ZSwga2V5LCBjb2xsZWN0aW9uKSkge1xuICAgICAgICAgIHJlc3VsdCA9IHJldEtleSA/IGtleSA6IHZhbHVlO1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmZsYXR0ZW5gIHdpdGggYWRkZWQgc3VwcG9ydCBmb3IgcmVzdHJpY3RpbmdcbiAgICAgKiBmbGF0dGVuaW5nIGFuZCBzcGVjaWZ5aW5nIHRoZSBzdGFydCBpbmRleC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGZsYXR0ZW4uXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbaXNEZWVwXSBTcGVjaWZ5IGEgZGVlcCBmbGF0dGVuLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzU3RyaWN0XSBSZXN0cmljdCBmbGF0dGVuaW5nIHRvIGFycmF5cy1saWtlIG9iamVjdHMuXG4gICAgICogQHBhcmFtIHtBcnJheX0gW3Jlc3VsdD1bXV0gVGhlIGluaXRpYWwgcmVzdWx0IHZhbHVlLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGZsYXR0ZW5lZCBhcnJheS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlRmxhdHRlbihhcnJheSwgaXNEZWVwLCBpc1N0cmljdCwgcmVzdWx0KSB7XG4gICAgICByZXN1bHQgfHwgKHJlc3VsdCA9IFtdKTtcblxuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuXG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICB2YXIgdmFsdWUgPSBhcnJheVtpbmRleF07XG4gICAgICAgIGlmIChpc09iamVjdExpa2UodmFsdWUpICYmIGlzQXJyYXlMaWtlKHZhbHVlKSAmJlxuICAgICAgICAgICAgKGlzU3RyaWN0IHx8IGlzQXJyYXkodmFsdWUpIHx8IGlzQXJndW1lbnRzKHZhbHVlKSkpIHtcbiAgICAgICAgICBpZiAoaXNEZWVwKSB7XG4gICAgICAgICAgICAvLyBSZWN1cnNpdmVseSBmbGF0dGVuIGFycmF5cyAoc3VzY2VwdGlibGUgdG8gY2FsbCBzdGFjayBsaW1pdHMpLlxuICAgICAgICAgICAgYmFzZUZsYXR0ZW4odmFsdWUsIGlzRGVlcCwgaXNTdHJpY3QsIHJlc3VsdCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFycmF5UHVzaChyZXN1bHQsIHZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoIWlzU3RyaWN0KSB7XG4gICAgICAgICAgcmVzdWx0W3Jlc3VsdC5sZW5ndGhdID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYGJhc2VGb3JJbmAgYW5kIGBiYXNlRm9yT3duYCB3aGljaCBpdGVyYXRlc1xuICAgICAqIG92ZXIgYG9iamVjdGAgcHJvcGVydGllcyByZXR1cm5lZCBieSBga2V5c0Z1bmNgIGludm9raW5nIGBpdGVyYXRlZWAgZm9yXG4gICAgICogZWFjaCBwcm9wZXJ0eS4gSXRlcmF0ZWUgZnVuY3Rpb25zIG1heSBleGl0IGl0ZXJhdGlvbiBlYXJseSBieSBleHBsaWNpdGx5XG4gICAgICogcmV0dXJuaW5nIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBrZXlzRnVuYyBUaGUgZnVuY3Rpb24gdG8gZ2V0IHRoZSBrZXlzIG9mIGBvYmplY3RgLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gICAgICovXG4gICAgdmFyIGJhc2VGb3IgPSBjcmVhdGVCYXNlRm9yKCk7XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGlzIGxpa2UgYGJhc2VGb3JgIGV4Y2VwdCB0aGF0IGl0IGl0ZXJhdGVzIG92ZXIgcHJvcGVydGllc1xuICAgICAqIGluIHRoZSBvcHBvc2l0ZSBvcmRlci5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGtleXNGdW5jIFRoZSBmdW5jdGlvbiB0byBnZXQgdGhlIGtleXMgb2YgYG9iamVjdGAuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAgICAgKi9cbiAgICB2YXIgYmFzZUZvclJpZ2h0ID0gY3JlYXRlQmFzZUZvcih0cnVlKTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmZvckluYCB3aXRob3V0IHN1cHBvcnQgZm9yIGNhbGxiYWNrXG4gICAgICogc2hvcnRoYW5kcyBhbmQgYHRoaXNgIGJpbmRpbmcuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VGb3JJbihvYmplY3QsIGl0ZXJhdGVlKSB7XG4gICAgICByZXR1cm4gYmFzZUZvcihvYmplY3QsIGl0ZXJhdGVlLCBrZXlzSW4pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmZvck93bmAgd2l0aG91dCBzdXBwb3J0IGZvciBjYWxsYmFja1xuICAgICAqIHNob3J0aGFuZHMgYW5kIGB0aGlzYCBiaW5kaW5nLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlRm9yT3duKG9iamVjdCwgaXRlcmF0ZWUpIHtcbiAgICAgIHJldHVybiBiYXNlRm9yKG9iamVjdCwgaXRlcmF0ZWUsIGtleXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmZvck93blJpZ2h0YCB3aXRob3V0IHN1cHBvcnQgZm9yIGNhbGxiYWNrXG4gICAgICogc2hvcnRoYW5kcyBhbmQgYHRoaXNgIGJpbmRpbmcuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VGb3JPd25SaWdodChvYmplY3QsIGl0ZXJhdGVlKSB7XG4gICAgICByZXR1cm4gYmFzZUZvclJpZ2h0KG9iamVjdCwgaXRlcmF0ZWUsIGtleXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmZ1bmN0aW9uc2Agd2hpY2ggY3JlYXRlcyBhbiBhcnJheSBvZlxuICAgICAqIGBvYmplY3RgIGZ1bmN0aW9uIHByb3BlcnR5IG5hbWVzIGZpbHRlcmVkIGZyb20gdGhvc2UgcHJvdmlkZWQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpbnNwZWN0LlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHByb3BzIFRoZSBwcm9wZXJ0eSBuYW1lcyB0byBmaWx0ZXIuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgYXJyYXkgb2YgZmlsdGVyZWQgcHJvcGVydHkgbmFtZXMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZUZ1bmN0aW9ucyhvYmplY3QsIHByb3BzKSB7XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSBwcm9wcy5sZW5ndGgsXG4gICAgICAgICAgcmVzSW5kZXggPSAtMSxcbiAgICAgICAgICByZXN1bHQgPSBbXTtcblxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgdmFyIGtleSA9IHByb3BzW2luZGV4XTtcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24ob2JqZWN0W2tleV0pKSB7XG4gICAgICAgICAgcmVzdWx0WysrcmVzSW5kZXhdID0ga2V5O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBnZXRgIHdpdGhvdXQgc3VwcG9ydCBmb3Igc3RyaW5nIHBhdGhzXG4gICAgICogYW5kIGRlZmF1bHQgdmFsdWVzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gICAgICogQHBhcmFtIHtBcnJheX0gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbcGF0aEtleV0gVGhlIGtleSByZXByZXNlbnRhdGlvbiBvZiBwYXRoLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSByZXNvbHZlZCB2YWx1ZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlR2V0KG9iamVjdCwgcGF0aCwgcGF0aEtleSkge1xuICAgICAgaWYgKG9iamVjdCA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChwYXRoS2V5ICE9PSB1bmRlZmluZWQgJiYgcGF0aEtleSBpbiB0b09iamVjdChvYmplY3QpKSB7XG4gICAgICAgIHBhdGggPSBbcGF0aEtleV07XG4gICAgICB9XG4gICAgICB2YXIgaW5kZXggPSAwLFxuICAgICAgICAgIGxlbmd0aCA9IHBhdGgubGVuZ3RoO1xuXG4gICAgICB3aGlsZSAob2JqZWN0ICE9IG51bGwgJiYgaW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgb2JqZWN0ID0gb2JqZWN0W3BhdGhbaW5kZXgrK11dO1xuICAgICAgfVxuICAgICAgcmV0dXJuIChpbmRleCAmJiBpbmRleCA9PSBsZW5ndGgpID8gb2JqZWN0IDogdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmlzRXF1YWxgIHdpdGhvdXQgc3VwcG9ydCBmb3IgYHRoaXNgIGJpbmRpbmdcbiAgICAgKiBgY3VzdG9taXplcmAgZnVuY3Rpb25zLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb21wYXJlLlxuICAgICAqIEBwYXJhbSB7Kn0gb3RoZXIgVGhlIG90aGVyIHZhbHVlIHRvIGNvbXBhcmUuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaW5nIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc0xvb3NlXSBTcGVjaWZ5IHBlcmZvcm1pbmcgcGFydGlhbCBjb21wYXJpc29ucy5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbc3RhY2tBXSBUcmFja3MgdHJhdmVyc2VkIGB2YWx1ZWAgb2JqZWN0cy5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbc3RhY2tCXSBUcmFja3MgdHJhdmVyc2VkIGBvdGhlcmAgb2JqZWN0cy5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHZhbHVlcyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VJc0VxdWFsKHZhbHVlLCBvdGhlciwgY3VzdG9taXplciwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpIHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gb3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICBpZiAodmFsdWUgPT0gbnVsbCB8fCBvdGhlciA9PSBudWxsIHx8ICghaXNPYmplY3QodmFsdWUpICYmICFpc09iamVjdExpa2Uob3RoZXIpKSkge1xuICAgICAgICByZXR1cm4gdmFsdWUgIT09IHZhbHVlICYmIG90aGVyICE9PSBvdGhlcjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBiYXNlSXNFcXVhbERlZXAodmFsdWUsIG90aGVyLCBiYXNlSXNFcXVhbCwgY3VzdG9taXplciwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUlzRXF1YWxgIGZvciBhcnJheXMgYW5kIG9iamVjdHMgd2hpY2ggcGVyZm9ybXNcbiAgICAgKiBkZWVwIGNvbXBhcmlzb25zIGFuZCB0cmFja3MgdHJhdmVyc2VkIG9iamVjdHMgZW5hYmxpbmcgb2JqZWN0cyB3aXRoIGNpcmN1bGFyXG4gICAgICogcmVmZXJlbmNlcyB0byBiZSBjb21wYXJlZC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGNvbXBhcmUuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG90aGVyIFRoZSBvdGhlciBvYmplY3QgdG8gY29tcGFyZS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBlcXVhbEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRldGVybWluZSBlcXVpdmFsZW50cyBvZiB2YWx1ZXMuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaW5nIG9iamVjdHMuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbaXNMb29zZV0gU3BlY2lmeSBwZXJmb3JtaW5nIHBhcnRpYWwgY29tcGFyaXNvbnMuXG4gICAgICogQHBhcmFtIHtBcnJheX0gW3N0YWNrQT1bXV0gVHJhY2tzIHRyYXZlcnNlZCBgdmFsdWVgIG9iamVjdHMuXG4gICAgICogQHBhcmFtIHtBcnJheX0gW3N0YWNrQj1bXV0gVHJhY2tzIHRyYXZlcnNlZCBgb3RoZXJgIG9iamVjdHMuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBvYmplY3RzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZUlzRXF1YWxEZWVwKG9iamVjdCwgb3RoZXIsIGVxdWFsRnVuYywgY3VzdG9taXplciwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpIHtcbiAgICAgIHZhciBvYmpJc0FyciA9IGlzQXJyYXkob2JqZWN0KSxcbiAgICAgICAgICBvdGhJc0FyciA9IGlzQXJyYXkob3RoZXIpLFxuICAgICAgICAgIG9ialRhZyA9IGFycmF5VGFnLFxuICAgICAgICAgIG90aFRhZyA9IGFycmF5VGFnO1xuXG4gICAgICBpZiAoIW9iaklzQXJyKSB7XG4gICAgICAgIG9ialRhZyA9IG9ialRvU3RyaW5nLmNhbGwob2JqZWN0KTtcbiAgICAgICAgaWYgKG9ialRhZyA9PSBhcmdzVGFnKSB7XG4gICAgICAgICAgb2JqVGFnID0gb2JqZWN0VGFnO1xuICAgICAgICB9IGVsc2UgaWYgKG9ialRhZyAhPSBvYmplY3RUYWcpIHtcbiAgICAgICAgICBvYmpJc0FyciA9IGlzVHlwZWRBcnJheShvYmplY3QpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoIW90aElzQXJyKSB7XG4gICAgICAgIG90aFRhZyA9IG9ialRvU3RyaW5nLmNhbGwob3RoZXIpO1xuICAgICAgICBpZiAob3RoVGFnID09IGFyZ3NUYWcpIHtcbiAgICAgICAgICBvdGhUYWcgPSBvYmplY3RUYWc7XG4gICAgICAgIH0gZWxzZSBpZiAob3RoVGFnICE9IG9iamVjdFRhZykge1xuICAgICAgICAgIG90aElzQXJyID0gaXNUeXBlZEFycmF5KG90aGVyKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdmFyIG9iaklzT2JqID0gb2JqVGFnID09IG9iamVjdFRhZyxcbiAgICAgICAgICBvdGhJc09iaiA9IG90aFRhZyA9PSBvYmplY3RUYWcsXG4gICAgICAgICAgaXNTYW1lVGFnID0gb2JqVGFnID09IG90aFRhZztcblxuICAgICAgaWYgKGlzU2FtZVRhZyAmJiAhKG9iaklzQXJyIHx8IG9iaklzT2JqKSkge1xuICAgICAgICByZXR1cm4gZXF1YWxCeVRhZyhvYmplY3QsIG90aGVyLCBvYmpUYWcpO1xuICAgICAgfVxuICAgICAgaWYgKCFpc0xvb3NlKSB7XG4gICAgICAgIHZhciBvYmpJc1dyYXBwZWQgPSBvYmpJc09iaiAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgJ19fd3JhcHBlZF9fJyksXG4gICAgICAgICAgICBvdGhJc1dyYXBwZWQgPSBvdGhJc09iaiAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG90aGVyLCAnX193cmFwcGVkX18nKTtcblxuICAgICAgICBpZiAob2JqSXNXcmFwcGVkIHx8IG90aElzV3JhcHBlZCkge1xuICAgICAgICAgIHJldHVybiBlcXVhbEZ1bmMob2JqSXNXcmFwcGVkID8gb2JqZWN0LnZhbHVlKCkgOiBvYmplY3QsIG90aElzV3JhcHBlZCA/IG90aGVyLnZhbHVlKCkgOiBvdGhlciwgY3VzdG9taXplciwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoIWlzU2FtZVRhZykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICAvLyBBc3N1bWUgY3ljbGljIHZhbHVlcyBhcmUgZXF1YWwuXG4gICAgICAvLyBGb3IgbW9yZSBpbmZvcm1hdGlvbiBvbiBkZXRlY3RpbmcgY2lyY3VsYXIgcmVmZXJlbmNlcyBzZWUgaHR0cHM6Ly9lczUuZ2l0aHViLmlvLyNKTy5cbiAgICAgIHN0YWNrQSB8fCAoc3RhY2tBID0gW10pO1xuICAgICAgc3RhY2tCIHx8IChzdGFja0IgPSBbXSk7XG5cbiAgICAgIHZhciBsZW5ndGggPSBzdGFja0EubGVuZ3RoO1xuICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICAgIGlmIChzdGFja0FbbGVuZ3RoXSA9PSBvYmplY3QpIHtcbiAgICAgICAgICByZXR1cm4gc3RhY2tCW2xlbmd0aF0gPT0gb3RoZXI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIEFkZCBgb2JqZWN0YCBhbmQgYG90aGVyYCB0byB0aGUgc3RhY2sgb2YgdHJhdmVyc2VkIG9iamVjdHMuXG4gICAgICBzdGFja0EucHVzaChvYmplY3QpO1xuICAgICAgc3RhY2tCLnB1c2gob3RoZXIpO1xuXG4gICAgICB2YXIgcmVzdWx0ID0gKG9iaklzQXJyID8gZXF1YWxBcnJheXMgOiBlcXVhbE9iamVjdHMpKG9iamVjdCwgb3RoZXIsIGVxdWFsRnVuYywgY3VzdG9taXplciwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpO1xuXG4gICAgICBzdGFja0EucG9wKCk7XG4gICAgICBzdGFja0IucG9wKCk7XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXNNYXRjaGAgd2l0aG91dCBzdXBwb3J0IGZvciBjYWxsYmFja1xuICAgICAqIHNob3J0aGFuZHMgYW5kIGB0aGlzYCBiaW5kaW5nLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaW5zcGVjdC5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBtYXRjaERhdGEgVGhlIHByb3BlcnkgbmFtZXMsIHZhbHVlcywgYW5kIGNvbXBhcmUgZmxhZ3MgdG8gbWF0Y2guXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaW5nIG9iamVjdHMuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBvYmplY3RgIGlzIGEgbWF0Y2gsIGVsc2UgYGZhbHNlYC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlSXNNYXRjaChvYmplY3QsIG1hdGNoRGF0YSwgY3VzdG9taXplcikge1xuICAgICAgdmFyIGluZGV4ID0gbWF0Y2hEYXRhLmxlbmd0aCxcbiAgICAgICAgICBsZW5ndGggPSBpbmRleCxcbiAgICAgICAgICBub0N1c3RvbWl6ZXIgPSAhY3VzdG9taXplcjtcblxuICAgICAgaWYgKG9iamVjdCA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiAhbGVuZ3RoO1xuICAgICAgfVxuICAgICAgb2JqZWN0ID0gdG9PYmplY3Qob2JqZWN0KTtcbiAgICAgIHdoaWxlIChpbmRleC0tKSB7XG4gICAgICAgIHZhciBkYXRhID0gbWF0Y2hEYXRhW2luZGV4XTtcbiAgICAgICAgaWYgKChub0N1c3RvbWl6ZXIgJiYgZGF0YVsyXSlcbiAgICAgICAgICAgICAgPyBkYXRhWzFdICE9PSBvYmplY3RbZGF0YVswXV1cbiAgICAgICAgICAgICAgOiAhKGRhdGFbMF0gaW4gb2JqZWN0KVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICBkYXRhID0gbWF0Y2hEYXRhW2luZGV4XTtcbiAgICAgICAgdmFyIGtleSA9IGRhdGFbMF0sXG4gICAgICAgICAgICBvYmpWYWx1ZSA9IG9iamVjdFtrZXldLFxuICAgICAgICAgICAgc3JjVmFsdWUgPSBkYXRhWzFdO1xuXG4gICAgICAgIGlmIChub0N1c3RvbWl6ZXIgJiYgZGF0YVsyXSkge1xuICAgICAgICAgIGlmIChvYmpWYWx1ZSA9PT0gdW5kZWZpbmVkICYmICEoa2V5IGluIG9iamVjdCkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIHJlc3VsdCA9IGN1c3RvbWl6ZXIgPyBjdXN0b21pemVyKG9ialZhbHVlLCBzcmNWYWx1ZSwga2V5KSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICBpZiAoIShyZXN1bHQgPT09IHVuZGVmaW5lZCA/IGJhc2VJc0VxdWFsKHNyY1ZhbHVlLCBvYmpWYWx1ZSwgY3VzdG9taXplciwgdHJ1ZSkgOiByZXN1bHQpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5tYXBgIHdpdGhvdXQgc3VwcG9ydCBmb3IgY2FsbGJhY2sgc2hvcnRoYW5kc1xuICAgICAqIGFuZCBgdGhpc2AgYmluZGluZy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IG1hcHBlZCBhcnJheS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlTWFwKGNvbGxlY3Rpb24sIGl0ZXJhdGVlKSB7XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICByZXN1bHQgPSBpc0FycmF5TGlrZShjb2xsZWN0aW9uKSA/IEFycmF5KGNvbGxlY3Rpb24ubGVuZ3RoKSA6IFtdO1xuXG4gICAgICBiYXNlRWFjaChjb2xsZWN0aW9uLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBjb2xsZWN0aW9uKSB7XG4gICAgICAgIHJlc3VsdFsrK2luZGV4XSA9IGl0ZXJhdGVlKHZhbHVlLCBrZXksIGNvbGxlY3Rpb24pO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLm1hdGNoZXNgIHdoaWNoIGRvZXMgbm90IGNsb25lIGBzb3VyY2VgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gc291cmNlIFRoZSBvYmplY3Qgb2YgcHJvcGVydHkgdmFsdWVzIHRvIG1hdGNoLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VNYXRjaGVzKHNvdXJjZSkge1xuICAgICAgdmFyIG1hdGNoRGF0YSA9IGdldE1hdGNoRGF0YShzb3VyY2UpO1xuICAgICAgaWYgKG1hdGNoRGF0YS5sZW5ndGggPT0gMSAmJiBtYXRjaERhdGFbMF1bMl0pIHtcbiAgICAgICAgdmFyIGtleSA9IG1hdGNoRGF0YVswXVswXSxcbiAgICAgICAgICAgIHZhbHVlID0gbWF0Y2hEYXRhWzBdWzFdO1xuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcbiAgICAgICAgICBpZiAob2JqZWN0ID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG9iamVjdFtrZXldID09PSB2YWx1ZSAmJiAodmFsdWUgIT09IHVuZGVmaW5lZCB8fCAoa2V5IGluIHRvT2JqZWN0KG9iamVjdCkpKTtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIGJhc2VJc01hdGNoKG9iamVjdCwgbWF0Y2hEYXRhKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ubWF0Y2hlc1Byb3BlcnR5YCB3aGljaCBkb2VzIG5vdCBjbG9uZSBgc3JjVmFsdWVgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuICAgICAqIEBwYXJhbSB7Kn0gc3JjVmFsdWUgVGhlIHZhbHVlIHRvIGNvbXBhcmUuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZU1hdGNoZXNQcm9wZXJ0eShwYXRoLCBzcmNWYWx1ZSkge1xuICAgICAgdmFyIGlzQXJyID0gaXNBcnJheShwYXRoKSxcbiAgICAgICAgICBpc0NvbW1vbiA9IGlzS2V5KHBhdGgpICYmIGlzU3RyaWN0Q29tcGFyYWJsZShzcmNWYWx1ZSksXG4gICAgICAgICAgcGF0aEtleSA9IChwYXRoICsgJycpO1xuXG4gICAgICBwYXRoID0gdG9QYXRoKHBhdGgpO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuICAgICAgICBpZiAob2JqZWN0ID09IG51bGwpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGtleSA9IHBhdGhLZXk7XG4gICAgICAgIG9iamVjdCA9IHRvT2JqZWN0KG9iamVjdCk7XG4gICAgICAgIGlmICgoaXNBcnIgfHwgIWlzQ29tbW9uKSAmJiAhKGtleSBpbiBvYmplY3QpKSB7XG4gICAgICAgICAgb2JqZWN0ID0gcGF0aC5sZW5ndGggPT0gMSA/IG9iamVjdCA6IGJhc2VHZXQob2JqZWN0LCBiYXNlU2xpY2UocGF0aCwgMCwgLTEpKTtcbiAgICAgICAgICBpZiAob2JqZWN0ID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgICAga2V5ID0gbGFzdChwYXRoKTtcbiAgICAgICAgICBvYmplY3QgPSB0b09iamVjdChvYmplY3QpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmplY3Rba2V5XSA9PT0gc3JjVmFsdWVcbiAgICAgICAgICA/IChzcmNWYWx1ZSAhPT0gdW5kZWZpbmVkIHx8IChrZXkgaW4gb2JqZWN0KSlcbiAgICAgICAgICA6IGJhc2VJc0VxdWFsKHNyY1ZhbHVlLCBvYmplY3Rba2V5XSwgdW5kZWZpbmVkLCB0cnVlKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ubWVyZ2VgIHdpdGhvdXQgc3VwcG9ydCBmb3IgYXJndW1lbnQganVnZ2xpbmcsXG4gICAgICogbXVsdGlwbGUgc291cmNlcywgYW5kIGB0aGlzYCBiaW5kaW5nIGBjdXN0b21pemVyYCBmdW5jdGlvbnMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIGRlc3RpbmF0aW9uIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gc291cmNlIFRoZSBzb3VyY2Ugb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIG1lcmdlZCB2YWx1ZXMuXG4gICAgICogQHBhcmFtIHtBcnJheX0gW3N0YWNrQT1bXV0gVHJhY2tzIHRyYXZlcnNlZCBzb3VyY2Ugb2JqZWN0cy5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbc3RhY2tCPVtdXSBBc3NvY2lhdGVzIHZhbHVlcyB3aXRoIHNvdXJjZSBjb3VudGVycGFydHMuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlTWVyZ2Uob2JqZWN0LCBzb3VyY2UsIGN1c3RvbWl6ZXIsIHN0YWNrQSwgc3RhY2tCKSB7XG4gICAgICBpZiAoIWlzT2JqZWN0KG9iamVjdCkpIHtcbiAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICAgIH1cbiAgICAgIHZhciBpc1NyY0FyciA9IGlzQXJyYXlMaWtlKHNvdXJjZSkgJiYgKGlzQXJyYXkoc291cmNlKSB8fCBpc1R5cGVkQXJyYXkoc291cmNlKSksXG4gICAgICAgICAgcHJvcHMgPSBpc1NyY0FyciA/IHVuZGVmaW5lZCA6IGtleXMoc291cmNlKTtcblxuICAgICAgYXJyYXlFYWNoKHByb3BzIHx8IHNvdXJjZSwgZnVuY3Rpb24oc3JjVmFsdWUsIGtleSkge1xuICAgICAgICBpZiAocHJvcHMpIHtcbiAgICAgICAgICBrZXkgPSBzcmNWYWx1ZTtcbiAgICAgICAgICBzcmNWYWx1ZSA9IHNvdXJjZVtrZXldO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc09iamVjdExpa2Uoc3JjVmFsdWUpKSB7XG4gICAgICAgICAgc3RhY2tBIHx8IChzdGFja0EgPSBbXSk7XG4gICAgICAgICAgc3RhY2tCIHx8IChzdGFja0IgPSBbXSk7XG4gICAgICAgICAgYmFzZU1lcmdlRGVlcChvYmplY3QsIHNvdXJjZSwga2V5LCBiYXNlTWVyZ2UsIGN1c3RvbWl6ZXIsIHN0YWNrQSwgc3RhY2tCKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICB2YXIgdmFsdWUgPSBvYmplY3Rba2V5XSxcbiAgICAgICAgICAgICAgcmVzdWx0ID0gY3VzdG9taXplciA/IGN1c3RvbWl6ZXIodmFsdWUsIHNyY1ZhbHVlLCBrZXksIG9iamVjdCwgc291cmNlKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgaXNDb21tb24gPSByZXN1bHQgPT09IHVuZGVmaW5lZDtcblxuICAgICAgICAgIGlmIChpc0NvbW1vbikge1xuICAgICAgICAgICAgcmVzdWx0ID0gc3JjVmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICgocmVzdWx0ICE9PSB1bmRlZmluZWQgfHwgKGlzU3JjQXJyICYmICEoa2V5IGluIG9iamVjdCkpKSAmJlxuICAgICAgICAgICAgICAoaXNDb21tb24gfHwgKHJlc3VsdCA9PT0gcmVzdWx0ID8gKHJlc3VsdCAhPT0gdmFsdWUpIDogKHZhbHVlID09PSB2YWx1ZSkpKSkge1xuICAgICAgICAgICAgb2JqZWN0W2tleV0gPSByZXN1bHQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlTWVyZ2VgIGZvciBhcnJheXMgYW5kIG9iamVjdHMgd2hpY2ggcGVyZm9ybXNcbiAgICAgKiBkZWVwIG1lcmdlcyBhbmQgdHJhY2tzIHRyYXZlcnNlZCBvYmplY3RzIGVuYWJsaW5nIG9iamVjdHMgd2l0aCBjaXJjdWxhclxuICAgICAqIHJlZmVyZW5jZXMgdG8gYmUgbWVyZ2VkLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZSBUaGUgc291cmNlIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIG1lcmdlLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IG1lcmdlRnVuYyBUaGUgZnVuY3Rpb24gdG8gbWVyZ2UgdmFsdWVzLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIG1lcmdlZCB2YWx1ZXMuXG4gICAgICogQHBhcmFtIHtBcnJheX0gW3N0YWNrQT1bXV0gVHJhY2tzIHRyYXZlcnNlZCBzb3VyY2Ugb2JqZWN0cy5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbc3RhY2tCPVtdXSBBc3NvY2lhdGVzIHZhbHVlcyB3aXRoIHNvdXJjZSBjb3VudGVycGFydHMuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBvYmplY3RzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZU1lcmdlRGVlcChvYmplY3QsIHNvdXJjZSwga2V5LCBtZXJnZUZ1bmMsIGN1c3RvbWl6ZXIsIHN0YWNrQSwgc3RhY2tCKSB7XG4gICAgICB2YXIgbGVuZ3RoID0gc3RhY2tBLmxlbmd0aCxcbiAgICAgICAgICBzcmNWYWx1ZSA9IHNvdXJjZVtrZXldO1xuXG4gICAgICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICAgICAgaWYgKHN0YWNrQVtsZW5ndGhdID09IHNyY1ZhbHVlKSB7XG4gICAgICAgICAgb2JqZWN0W2tleV0gPSBzdGFja0JbbGVuZ3RoXTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHZhciB2YWx1ZSA9IG9iamVjdFtrZXldLFxuICAgICAgICAgIHJlc3VsdCA9IGN1c3RvbWl6ZXIgPyBjdXN0b21pemVyKHZhbHVlLCBzcmNWYWx1ZSwga2V5LCBvYmplY3QsIHNvdXJjZSkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgaXNDb21tb24gPSByZXN1bHQgPT09IHVuZGVmaW5lZDtcblxuICAgICAgaWYgKGlzQ29tbW9uKSB7XG4gICAgICAgIHJlc3VsdCA9IHNyY1ZhbHVlO1xuICAgICAgICBpZiAoaXNBcnJheUxpa2Uoc3JjVmFsdWUpICYmIChpc0FycmF5KHNyY1ZhbHVlKSB8fCBpc1R5cGVkQXJyYXkoc3JjVmFsdWUpKSkge1xuICAgICAgICAgIHJlc3VsdCA9IGlzQXJyYXkodmFsdWUpXG4gICAgICAgICAgICA/IHZhbHVlXG4gICAgICAgICAgICA6IChpc0FycmF5TGlrZSh2YWx1ZSkgPyBhcnJheUNvcHkodmFsdWUpIDogW10pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzUGxhaW5PYmplY3Qoc3JjVmFsdWUpIHx8IGlzQXJndW1lbnRzKHNyY1ZhbHVlKSkge1xuICAgICAgICAgIHJlc3VsdCA9IGlzQXJndW1lbnRzKHZhbHVlKVxuICAgICAgICAgICAgPyB0b1BsYWluT2JqZWN0KHZhbHVlKVxuICAgICAgICAgICAgOiAoaXNQbGFpbk9iamVjdCh2YWx1ZSkgPyB2YWx1ZSA6IHt9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBpc0NvbW1vbiA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBBZGQgdGhlIHNvdXJjZSB2YWx1ZSB0byB0aGUgc3RhY2sgb2YgdHJhdmVyc2VkIG9iamVjdHMgYW5kIGFzc29jaWF0ZVxuICAgICAgLy8gaXQgd2l0aCBpdHMgbWVyZ2VkIHZhbHVlLlxuICAgICAgc3RhY2tBLnB1c2goc3JjVmFsdWUpO1xuICAgICAgc3RhY2tCLnB1c2gocmVzdWx0KTtcblxuICAgICAgaWYgKGlzQ29tbW9uKSB7XG4gICAgICAgIC8vIFJlY3Vyc2l2ZWx5IG1lcmdlIG9iamVjdHMgYW5kIGFycmF5cyAoc3VzY2VwdGlibGUgdG8gY2FsbCBzdGFjayBsaW1pdHMpLlxuICAgICAgICBvYmplY3Rba2V5XSA9IG1lcmdlRnVuYyhyZXN1bHQsIHNyY1ZhbHVlLCBjdXN0b21pemVyLCBzdGFja0EsIHN0YWNrQik7XG4gICAgICB9IGVsc2UgaWYgKHJlc3VsdCA9PT0gcmVzdWx0ID8gKHJlc3VsdCAhPT0gdmFsdWUpIDogKHZhbHVlID09PSB2YWx1ZSkpIHtcbiAgICAgICAgb2JqZWN0W2tleV0gPSByZXN1bHQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ucHJvcGVydHlgIHdpdGhvdXQgc3VwcG9ydCBmb3IgZGVlcCBwYXRocy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZVByb3BlcnR5KGtleSkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuICAgICAgICByZXR1cm4gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBvYmplY3Rba2V5XTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlUHJvcGVydHlgIHdoaWNoIHN1cHBvcnRzIGRlZXAgcGF0aHMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBwYXRoIFRoZSBwYXRoIG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZVByb3BlcnR5RGVlcChwYXRoKSB7XG4gICAgICB2YXIgcGF0aEtleSA9IChwYXRoICsgJycpO1xuICAgICAgcGF0aCA9IHRvUGF0aChwYXRoKTtcbiAgICAgIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIGJhc2VHZXQob2JqZWN0LCBwYXRoLCBwYXRoS2V5KTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ucHVsbEF0YCB3aXRob3V0IHN1cHBvcnQgZm9yIGluZGl2aWR1YWxcbiAgICAgKiBpbmRleCBhcmd1bWVudHMgYW5kIGNhcHR1cmluZyB0aGUgcmVtb3ZlZCBlbGVtZW50cy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIG1vZGlmeS5cbiAgICAgKiBAcGFyYW0ge251bWJlcltdfSBpbmRleGVzIFRoZSBpbmRleGVzIG9mIGVsZW1lbnRzIHRvIHJlbW92ZS5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYGFycmF5YC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlUHVsbEF0KGFycmF5LCBpbmRleGVzKSB7XG4gICAgICB2YXIgbGVuZ3RoID0gYXJyYXkgPyBpbmRleGVzLmxlbmd0aCA6IDA7XG4gICAgICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICAgICAgdmFyIGluZGV4ID0gaW5kZXhlc1tsZW5ndGhdO1xuICAgICAgICBpZiAoaW5kZXggIT0gcHJldmlvdXMgJiYgaXNJbmRleChpbmRleCkpIHtcbiAgICAgICAgICB2YXIgcHJldmlvdXMgPSBpbmRleDtcbiAgICAgICAgICBzcGxpY2UuY2FsbChhcnJheSwgaW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gYXJyYXk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ucmFuZG9tYCB3aXRob3V0IHN1cHBvcnQgZm9yIGFyZ3VtZW50IGp1Z2dsaW5nXG4gICAgICogYW5kIHJldHVybmluZyBmbG9hdGluZy1wb2ludCBudW1iZXJzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWluIFRoZSBtaW5pbXVtIHBvc3NpYmxlIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtYXggVGhlIG1heGltdW0gcG9zc2libGUgdmFsdWUuXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgcmFuZG9tIG51bWJlci5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlUmFuZG9tKG1pbiwgbWF4KSB7XG4gICAgICByZXR1cm4gbWluICsgbmF0aXZlRmxvb3IobmF0aXZlUmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnJlZHVjZWAgYW5kIGBfLnJlZHVjZVJpZ2h0YCB3aXRob3V0IHN1cHBvcnRcbiAgICAgKiBmb3IgY2FsbGJhY2sgc2hvcnRoYW5kcyBhbmQgYHRoaXNgIGJpbmRpbmcsIHdoaWNoIGl0ZXJhdGVzIG92ZXIgYGNvbGxlY3Rpb25gXG4gICAgICogdXNpbmcgdGhlIHByb3ZpZGVkIGBlYWNoRnVuY2AuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IGFjY3VtdWxhdG9yIFRoZSBpbml0aWFsIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gaW5pdEZyb21Db2xsZWN0aW9uIFNwZWNpZnkgdXNpbmcgdGhlIGZpcnN0IG9yIGxhc3QgZWxlbWVudFxuICAgICAqICBvZiBgY29sbGVjdGlvbmAgYXMgdGhlIGluaXRpYWwgdmFsdWUuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZWFjaEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGl0ZXJhdGUgb3ZlciBgY29sbGVjdGlvbmAuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGFjY3VtdWxhdGVkIHZhbHVlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VSZWR1Y2UoY29sbGVjdGlvbiwgaXRlcmF0ZWUsIGFjY3VtdWxhdG9yLCBpbml0RnJvbUNvbGxlY3Rpb24sIGVhY2hGdW5jKSB7XG4gICAgICBlYWNoRnVuYyhjb2xsZWN0aW9uLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgYWNjdW11bGF0b3IgPSBpbml0RnJvbUNvbGxlY3Rpb25cbiAgICAgICAgICA/IChpbml0RnJvbUNvbGxlY3Rpb24gPSBmYWxzZSwgdmFsdWUpXG4gICAgICAgICAgOiBpdGVyYXRlZShhY2N1bXVsYXRvciwgdmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGFjY3VtdWxhdG9yO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBzZXREYXRhYCB3aXRob3V0IHN1cHBvcnQgZm9yIGhvdCBsb29wIGRldGVjdGlvbi5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gYXNzb2NpYXRlIG1ldGFkYXRhIHdpdGguXG4gICAgICogQHBhcmFtIHsqfSBkYXRhIFRoZSBtZXRhZGF0YS5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgYGZ1bmNgLlxuICAgICAqL1xuICAgIHZhciBiYXNlU2V0RGF0YSA9ICFtZXRhTWFwID8gaWRlbnRpdHkgOiBmdW5jdGlvbihmdW5jLCBkYXRhKSB7XG4gICAgICBtZXRhTWFwLnNldChmdW5jLCBkYXRhKTtcbiAgICAgIHJldHVybiBmdW5jO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5zbGljZWAgd2l0aG91dCBhbiBpdGVyYXRlZSBjYWxsIGd1YXJkLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gc2xpY2UuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtzdGFydD0wXSBUaGUgc3RhcnQgcG9zaXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtlbmQ9YXJyYXkubGVuZ3RoXSBUaGUgZW5kIHBvc2l0aW9uLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgc2xpY2Ugb2YgYGFycmF5YC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlU2xpY2UoYXJyYXksIHN0YXJ0LCBlbmQpIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcblxuICAgICAgc3RhcnQgPSBzdGFydCA9PSBudWxsID8gMCA6ICgrc3RhcnQgfHwgMCk7XG4gICAgICBpZiAoc3RhcnQgPCAwKSB7XG4gICAgICAgIHN0YXJ0ID0gLXN0YXJ0ID4gbGVuZ3RoID8gMCA6IChsZW5ndGggKyBzdGFydCk7XG4gICAgICB9XG4gICAgICBlbmQgPSAoZW5kID09PSB1bmRlZmluZWQgfHwgZW5kID4gbGVuZ3RoKSA/IGxlbmd0aCA6ICgrZW5kIHx8IDApO1xuICAgICAgaWYgKGVuZCA8IDApIHtcbiAgICAgICAgZW5kICs9IGxlbmd0aDtcbiAgICAgIH1cbiAgICAgIGxlbmd0aCA9IHN0YXJ0ID4gZW5kID8gMCA6ICgoZW5kIC0gc3RhcnQpID4+PiAwKTtcbiAgICAgIHN0YXJ0ID4+Pj0gMDtcblxuICAgICAgdmFyIHJlc3VsdCA9IEFycmF5KGxlbmd0aCk7XG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICByZXN1bHRbaW5kZXhdID0gYXJyYXlbaW5kZXggKyBzdGFydF07XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnNvbWVgIHdpdGhvdXQgc3VwcG9ydCBmb3IgY2FsbGJhY2sgc2hvcnRoYW5kc1xuICAgICAqIGFuZCBgdGhpc2AgYmluZGluZy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW55IGVsZW1lbnQgcGFzc2VzIHRoZSBwcmVkaWNhdGUgY2hlY2ssXG4gICAgICogIGVsc2UgYGZhbHNlYC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlU29tZShjb2xsZWN0aW9uLCBwcmVkaWNhdGUpIHtcbiAgICAgIHZhciByZXN1bHQ7XG5cbiAgICAgIGJhc2VFYWNoKGNvbGxlY3Rpb24sIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikge1xuICAgICAgICByZXN1bHQgPSBwcmVkaWNhdGUodmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKTtcbiAgICAgICAgcmV0dXJuICFyZXN1bHQ7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiAhIXJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5zb3J0QnlgIHdoaWNoIHVzZXMgYGNvbXBhcmVyYCB0byBkZWZpbmVcbiAgICAgKiB0aGUgc29ydCBvcmRlciBvZiBgYXJyYXlgIGFuZCByZXBsYWNlcyBjcml0ZXJpYSBvYmplY3RzIHdpdGggdGhlaXJcbiAgICAgKiBjb3JyZXNwb25kaW5nIHZhbHVlcy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHNvcnQuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY29tcGFyZXIgVGhlIGZ1bmN0aW9uIHRvIGRlZmluZSBzb3J0IG9yZGVyLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBgYXJyYXlgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VTb3J0QnkoYXJyYXksIGNvbXBhcmVyKSB7XG4gICAgICB2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuXG4gICAgICBhcnJheS5zb3J0KGNvbXBhcmVyKTtcbiAgICAgIHdoaWxlIChsZW5ndGgtLSkge1xuICAgICAgICBhcnJheVtsZW5ndGhdID0gYXJyYXlbbGVuZ3RoXS52YWx1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhcnJheTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5zb3J0QnlPcmRlcmAgd2l0aG91dCBwYXJhbSBndWFyZHMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbltdfE9iamVjdFtdfHN0cmluZ1tdfSBpdGVyYXRlZXMgVGhlIGl0ZXJhdGVlcyB0byBzb3J0IGJ5LlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbltdfSBvcmRlcnMgVGhlIHNvcnQgb3JkZXJzIG9mIGBpdGVyYXRlZXNgLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IHNvcnRlZCBhcnJheS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlU29ydEJ5T3JkZXIoY29sbGVjdGlvbiwgaXRlcmF0ZWVzLCBvcmRlcnMpIHtcbiAgICAgIHZhciBjYWxsYmFjayA9IGdldENhbGxiYWNrKCksXG4gICAgICAgICAgaW5kZXggPSAtMTtcblxuICAgICAgaXRlcmF0ZWVzID0gYXJyYXlNYXAoaXRlcmF0ZWVzLCBmdW5jdGlvbihpdGVyYXRlZSkgeyByZXR1cm4gY2FsbGJhY2soaXRlcmF0ZWUpOyB9KTtcblxuICAgICAgdmFyIHJlc3VsdCA9IGJhc2VNYXAoY29sbGVjdGlvbiwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgdmFyIGNyaXRlcmlhID0gYXJyYXlNYXAoaXRlcmF0ZWVzLCBmdW5jdGlvbihpdGVyYXRlZSkgeyByZXR1cm4gaXRlcmF0ZWUodmFsdWUpOyB9KTtcbiAgICAgICAgcmV0dXJuIHsgJ2NyaXRlcmlhJzogY3JpdGVyaWEsICdpbmRleCc6ICsraW5kZXgsICd2YWx1ZSc6IHZhbHVlIH07XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIGJhc2VTb3J0QnkocmVzdWx0LCBmdW5jdGlvbihvYmplY3QsIG90aGVyKSB7XG4gICAgICAgIHJldHVybiBjb21wYXJlTXVsdGlwbGUob2JqZWN0LCBvdGhlciwgb3JkZXJzKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnN1bWAgd2l0aG91dCBzdXBwb3J0IGZvciBjYWxsYmFjayBzaG9ydGhhbmRzXG4gICAgICogYW5kIGB0aGlzYCBiaW5kaW5nLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgc3VtLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VTdW0oY29sbGVjdGlvbiwgaXRlcmF0ZWUpIHtcbiAgICAgIHZhciByZXN1bHQgPSAwO1xuICAgICAgYmFzZUVhY2goY29sbGVjdGlvbiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSB7XG4gICAgICAgIHJlc3VsdCArPSAraXRlcmF0ZWUodmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSB8fCAwO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnVuaXFgIHdpdGhvdXQgc3VwcG9ydCBmb3IgY2FsbGJhY2sgc2hvcnRoYW5kc1xuICAgICAqIGFuZCBgdGhpc2AgYmluZGluZy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGluc3BlY3QuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2l0ZXJhdGVlXSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGR1cGxpY2F0ZS12YWx1ZS1mcmVlIGFycmF5LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VVbmlxKGFycmF5LCBpdGVyYXRlZSkge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgaW5kZXhPZiA9IGdldEluZGV4T2YoKSxcbiAgICAgICAgICBsZW5ndGggPSBhcnJheS5sZW5ndGgsXG4gICAgICAgICAgaXNDb21tb24gPSBpbmRleE9mID09IGJhc2VJbmRleE9mLFxuICAgICAgICAgIGlzTGFyZ2UgPSBpc0NvbW1vbiAmJiBsZW5ndGggPj0gTEFSR0VfQVJSQVlfU0laRSxcbiAgICAgICAgICBzZWVuID0gaXNMYXJnZSA/IGNyZWF0ZUNhY2hlKCkgOiBudWxsLFxuICAgICAgICAgIHJlc3VsdCA9IFtdO1xuXG4gICAgICBpZiAoc2Vlbikge1xuICAgICAgICBpbmRleE9mID0gY2FjaGVJbmRleE9mO1xuICAgICAgICBpc0NvbW1vbiA9IGZhbHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaXNMYXJnZSA9IGZhbHNlO1xuICAgICAgICBzZWVuID0gaXRlcmF0ZWUgPyBbXSA6IHJlc3VsdDtcbiAgICAgIH1cbiAgICAgIG91dGVyOlxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gYXJyYXlbaW5kZXhdLFxuICAgICAgICAgICAgY29tcHV0ZWQgPSBpdGVyYXRlZSA/IGl0ZXJhdGVlKHZhbHVlLCBpbmRleCwgYXJyYXkpIDogdmFsdWU7XG5cbiAgICAgICAgaWYgKGlzQ29tbW9uICYmIHZhbHVlID09PSB2YWx1ZSkge1xuICAgICAgICAgIHZhciBzZWVuSW5kZXggPSBzZWVuLmxlbmd0aDtcbiAgICAgICAgICB3aGlsZSAoc2VlbkluZGV4LS0pIHtcbiAgICAgICAgICAgIGlmIChzZWVuW3NlZW5JbmRleF0gPT09IGNvbXB1dGVkKSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlIG91dGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXRlcmF0ZWUpIHtcbiAgICAgICAgICAgIHNlZW4ucHVzaChjb21wdXRlZCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJlc3VsdC5wdXNoKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpbmRleE9mKHNlZW4sIGNvbXB1dGVkLCAwKSA8IDApIHtcbiAgICAgICAgICBpZiAoaXRlcmF0ZWUgfHwgaXNMYXJnZSkge1xuICAgICAgICAgICAgc2Vlbi5wdXNoKGNvbXB1dGVkKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnZhbHVlc2AgYW5kIGBfLnZhbHVlc0luYCB3aGljaCBjcmVhdGVzIGFuXG4gICAgICogYXJyYXkgb2YgYG9iamVjdGAgcHJvcGVydHkgdmFsdWVzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHByb3BlcnR5IG5hbWVzXG4gICAgICogb2YgYHByb3BzYC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHByb3BzIFRoZSBwcm9wZXJ0eSBuYW1lcyB0byBnZXQgdmFsdWVzIGZvci5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSB2YWx1ZXMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZVZhbHVlcyhvYmplY3QsIHByb3BzKSB7XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSBwcm9wcy5sZW5ndGgsXG4gICAgICAgICAgcmVzdWx0ID0gQXJyYXkobGVuZ3RoKTtcblxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgcmVzdWx0W2luZGV4XSA9IG9iamVjdFtwcm9wc1tpbmRleF1dO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5kcm9wUmlnaHRXaGlsZWAsIGBfLmRyb3BXaGlsZWAsIGBfLnRha2VSaWdodFdoaWxlYCxcbiAgICAgKiBhbmQgYF8udGFrZVdoaWxlYCB3aXRob3V0IHN1cHBvcnQgZm9yIGNhbGxiYWNrIHNob3J0aGFuZHMgYW5kIGB0aGlzYCBiaW5kaW5nLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gcXVlcnkuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZGljYXRlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbaXNEcm9wXSBTcGVjaWZ5IGRyb3BwaW5nIGVsZW1lbnRzIGluc3RlYWQgb2YgdGFraW5nIHRoZW0uXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbZnJvbVJpZ2h0XSBTcGVjaWZ5IGl0ZXJhdGluZyBmcm9tIHJpZ2h0IHRvIGxlZnQuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBzbGljZSBvZiBgYXJyYXlgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VXaGlsZShhcnJheSwgcHJlZGljYXRlLCBpc0Ryb3AsIGZyb21SaWdodCkge1xuICAgICAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aCxcbiAgICAgICAgICBpbmRleCA9IGZyb21SaWdodCA/IGxlbmd0aCA6IC0xO1xuXG4gICAgICB3aGlsZSAoKGZyb21SaWdodCA/IGluZGV4LS0gOiArK2luZGV4IDwgbGVuZ3RoKSAmJiBwcmVkaWNhdGUoYXJyYXlbaW5kZXhdLCBpbmRleCwgYXJyYXkpKSB7fVxuICAgICAgcmV0dXJuIGlzRHJvcFxuICAgICAgICA/IGJhc2VTbGljZShhcnJheSwgKGZyb21SaWdodCA/IDAgOiBpbmRleCksIChmcm9tUmlnaHQgPyBpbmRleCArIDEgOiBsZW5ndGgpKVxuICAgICAgICA6IGJhc2VTbGljZShhcnJheSwgKGZyb21SaWdodCA/IGluZGV4ICsgMSA6IDApLCAoZnJvbVJpZ2h0ID8gbGVuZ3RoIDogaW5kZXgpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgd3JhcHBlclZhbHVlYCB3aGljaCByZXR1cm5zIHRoZSByZXN1bHQgb2ZcbiAgICAgKiBwZXJmb3JtaW5nIGEgc2VxdWVuY2Ugb2YgYWN0aW9ucyBvbiB0aGUgdW53cmFwcGVkIGB2YWx1ZWAsIHdoZXJlIGVhY2hcbiAgICAgKiBzdWNjZXNzaXZlIGFjdGlvbiBpcyBzdXBwbGllZCB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBwcmV2aW91cy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdW53cmFwcGVkIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFjdGlvbnMgQWN0aW9ucyB0byBwZWZvcm0gdG8gcmVzb2x2ZSB0aGUgdW53cmFwcGVkIHZhbHVlLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSByZXNvbHZlZCB2YWx1ZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlV3JhcHBlclZhbHVlKHZhbHVlLCBhY3Rpb25zKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gdmFsdWU7XG4gICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgTGF6eVdyYXBwZXIpIHtcbiAgICAgICAgcmVzdWx0ID0gcmVzdWx0LnZhbHVlKCk7XG4gICAgICB9XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSBhY3Rpb25zLmxlbmd0aDtcblxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgdmFyIGFjdGlvbiA9IGFjdGlvbnNbaW5kZXhdO1xuICAgICAgICByZXN1bHQgPSBhY3Rpb24uZnVuYy5hcHBseShhY3Rpb24udGhpc0FyZywgYXJyYXlQdXNoKFtyZXN1bHRdLCBhY3Rpb24uYXJncykpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBhIGJpbmFyeSBzZWFyY2ggb2YgYGFycmF5YCB0byBkZXRlcm1pbmUgdGhlIGluZGV4IGF0IHdoaWNoIGB2YWx1ZWBcbiAgICAgKiBzaG91bGQgYmUgaW5zZXJ0ZWQgaW50byBgYXJyYXlgIGluIG9yZGVyIHRvIG1haW50YWluIGl0cyBzb3J0IG9yZGVyLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgc29ydGVkIGFycmF5IHRvIGluc3BlY3QuXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gZXZhbHVhdGUuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbcmV0SGlnaGVzdF0gU3BlY2lmeSByZXR1cm5pbmcgdGhlIGhpZ2hlc3QgcXVhbGlmaWVkIGluZGV4LlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IGF0IHdoaWNoIGB2YWx1ZWAgc2hvdWxkIGJlIGluc2VydGVkXG4gICAgICogIGludG8gYGFycmF5YC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiaW5hcnlJbmRleChhcnJheSwgdmFsdWUsIHJldEhpZ2hlc3QpIHtcbiAgICAgIHZhciBsb3cgPSAwLFxuICAgICAgICAgIGhpZ2ggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IGxvdztcblxuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJyAmJiB2YWx1ZSA9PT0gdmFsdWUgJiYgaGlnaCA8PSBIQUxGX01BWF9BUlJBWV9MRU5HVEgpIHtcbiAgICAgICAgd2hpbGUgKGxvdyA8IGhpZ2gpIHtcbiAgICAgICAgICB2YXIgbWlkID0gKGxvdyArIGhpZ2gpID4+PiAxLFxuICAgICAgICAgICAgICBjb21wdXRlZCA9IGFycmF5W21pZF07XG5cbiAgICAgICAgICBpZiAoKHJldEhpZ2hlc3QgPyAoY29tcHV0ZWQgPD0gdmFsdWUpIDogKGNvbXB1dGVkIDwgdmFsdWUpKSAmJiBjb21wdXRlZCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbG93ID0gbWlkICsgMTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaGlnaCA9IG1pZDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGhpZ2g7XG4gICAgICB9XG4gICAgICByZXR1cm4gYmluYXJ5SW5kZXhCeShhcnJheSwgdmFsdWUsIGlkZW50aXR5LCByZXRIaWdoZXN0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGlzIGxpa2UgYGJpbmFyeUluZGV4YCBleGNlcHQgdGhhdCBpdCBpbnZva2VzIGBpdGVyYXRlZWAgZm9yXG4gICAgICogYHZhbHVlYCBhbmQgZWFjaCBlbGVtZW50IG9mIGBhcnJheWAgdG8gY29tcHV0ZSB0aGVpciBzb3J0IHJhbmtpbmcuIFRoZVxuICAgICAqIGl0ZXJhdGVlIGlzIGludm9rZWQgd2l0aCBvbmUgYXJndW1lbnQ7ICh2YWx1ZSkuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBzb3J0ZWQgYXJyYXkgdG8gaW5zcGVjdC5cbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBldmFsdWF0ZS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3JldEhpZ2hlc3RdIFNwZWNpZnkgcmV0dXJuaW5nIHRoZSBoaWdoZXN0IHF1YWxpZmllZCBpbmRleC5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBhdCB3aGljaCBgdmFsdWVgIHNob3VsZCBiZSBpbnNlcnRlZFxuICAgICAqICBpbnRvIGBhcnJheWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmluYXJ5SW5kZXhCeShhcnJheSwgdmFsdWUsIGl0ZXJhdGVlLCByZXRIaWdoZXN0KSB7XG4gICAgICB2YWx1ZSA9IGl0ZXJhdGVlKHZhbHVlKTtcblxuICAgICAgdmFyIGxvdyA9IDAsXG4gICAgICAgICAgaGlnaCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMCxcbiAgICAgICAgICB2YWxJc05hTiA9IHZhbHVlICE9PSB2YWx1ZSxcbiAgICAgICAgICB2YWxJc051bGwgPSB2YWx1ZSA9PT0gbnVsbCxcbiAgICAgICAgICB2YWxJc1VuZGVmID0gdmFsdWUgPT09IHVuZGVmaW5lZDtcblxuICAgICAgd2hpbGUgKGxvdyA8IGhpZ2gpIHtcbiAgICAgICAgdmFyIG1pZCA9IG5hdGl2ZUZsb29yKChsb3cgKyBoaWdoKSAvIDIpLFxuICAgICAgICAgICAgY29tcHV0ZWQgPSBpdGVyYXRlZShhcnJheVttaWRdKSxcbiAgICAgICAgICAgIGlzRGVmID0gY29tcHV0ZWQgIT09IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGlzUmVmbGV4aXZlID0gY29tcHV0ZWQgPT09IGNvbXB1dGVkO1xuXG4gICAgICAgIGlmICh2YWxJc05hTikge1xuICAgICAgICAgIHZhciBzZXRMb3cgPSBpc1JlZmxleGl2ZSB8fCByZXRIaWdoZXN0O1xuICAgICAgICB9IGVsc2UgaWYgKHZhbElzTnVsbCkge1xuICAgICAgICAgIHNldExvdyA9IGlzUmVmbGV4aXZlICYmIGlzRGVmICYmIChyZXRIaWdoZXN0IHx8IGNvbXB1dGVkICE9IG51bGwpO1xuICAgICAgICB9IGVsc2UgaWYgKHZhbElzVW5kZWYpIHtcbiAgICAgICAgICBzZXRMb3cgPSBpc1JlZmxleGl2ZSAmJiAocmV0SGlnaGVzdCB8fCBpc0RlZik7XG4gICAgICAgIH0gZWxzZSBpZiAoY29tcHV0ZWQgPT0gbnVsbCkge1xuICAgICAgICAgIHNldExvdyA9IGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNldExvdyA9IHJldEhpZ2hlc3QgPyAoY29tcHV0ZWQgPD0gdmFsdWUpIDogKGNvbXB1dGVkIDwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZXRMb3cpIHtcbiAgICAgICAgICBsb3cgPSBtaWQgKyAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGhpZ2ggPSBtaWQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBuYXRpdmVNaW4oaGlnaCwgTUFYX0FSUkFZX0lOREVYKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VDYWxsYmFja2Agd2hpY2ggb25seSBzdXBwb3J0cyBgdGhpc2AgYmluZGluZ1xuICAgICAqIGFuZCBzcGVjaWZ5aW5nIHRoZSBudW1iZXIgb2YgYXJndW1lbnRzIHRvIHByb3ZpZGUgdG8gYGZ1bmNgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBiaW5kLlxuICAgICAqIEBwYXJhbSB7Kn0gdGhpc0FyZyBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGZ1bmNgLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbYXJnQ291bnRdIFRoZSBudW1iZXIgb2YgYXJndW1lbnRzIHRvIHByb3ZpZGUgdG8gYGZ1bmNgLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgY2FsbGJhY2suXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmluZENhbGxiYWNrKGZ1bmMsIHRoaXNBcmcsIGFyZ0NvdW50KSB7XG4gICAgICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gaWRlbnRpdHk7XG4gICAgICB9XG4gICAgICBpZiAodGhpc0FyZyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBmdW5jO1xuICAgICAgfVxuICAgICAgc3dpdGNoIChhcmdDb3VudCkge1xuICAgICAgICBjYXNlIDE6IHJldHVybiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgIHJldHVybiBmdW5jLmNhbGwodGhpc0FyZywgdmFsdWUpO1xuICAgICAgICB9O1xuICAgICAgICBjYXNlIDM6IHJldHVybiBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgICByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcsIHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbik7XG4gICAgICAgIH07XG4gICAgICAgIGNhc2UgNDogcmV0dXJuIGZ1bmN0aW9uKGFjY3VtdWxhdG9yLCB2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgICByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcsIGFjY3VtdWxhdG9yLCB2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pO1xuICAgICAgICB9O1xuICAgICAgICBjYXNlIDU6IHJldHVybiBmdW5jdGlvbih2YWx1ZSwgb3RoZXIsIGtleSwgb2JqZWN0LCBzb3VyY2UpIHtcbiAgICAgICAgICByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcsIHZhbHVlLCBvdGhlciwga2V5LCBvYmplY3QsIHNvdXJjZSk7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3VtZW50cyk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBjbG9uZSBvZiB0aGUgZ2l2ZW4gYXJyYXkgYnVmZmVyLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5QnVmZmVyfSBidWZmZXIgVGhlIGFycmF5IGJ1ZmZlciB0byBjbG9uZS5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXlCdWZmZXJ9IFJldHVybnMgdGhlIGNsb25lZCBhcnJheSBidWZmZXIuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYnVmZmVyQ2xvbmUoYnVmZmVyKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gbmV3IEFycmF5QnVmZmVyKGJ1ZmZlci5ieXRlTGVuZ3RoKSxcbiAgICAgICAgICB2aWV3ID0gbmV3IFVpbnQ4QXJyYXkocmVzdWx0KTtcblxuICAgICAgdmlldy5zZXQobmV3IFVpbnQ4QXJyYXkoYnVmZmVyKSk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgdGhhdCBpcyB0aGUgY29tcG9zaXRpb24gb2YgcGFydGlhbGx5IGFwcGxpZWQgYXJndW1lbnRzLFxuICAgICAqIHBsYWNlaG9sZGVycywgYW5kIHByb3ZpZGVkIGFyZ3VtZW50cyBpbnRvIGEgc2luZ2xlIGFycmF5IG9mIGFyZ3VtZW50cy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R9IGFyZ3MgVGhlIHByb3ZpZGVkIGFyZ3VtZW50cy5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBwYXJ0aWFscyBUaGUgYXJndW1lbnRzIHRvIHByZXBlbmQgdG8gdGhvc2UgcHJvdmlkZWQuXG4gICAgICogQHBhcmFtIHtBcnJheX0gaG9sZGVycyBUaGUgYHBhcnRpYWxzYCBwbGFjZWhvbGRlciBpbmRleGVzLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGFycmF5IG9mIGNvbXBvc2VkIGFyZ3VtZW50cy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjb21wb3NlQXJncyhhcmdzLCBwYXJ0aWFscywgaG9sZGVycykge1xuICAgICAgdmFyIGhvbGRlcnNMZW5ndGggPSBob2xkZXJzLmxlbmd0aCxcbiAgICAgICAgICBhcmdzSW5kZXggPSAtMSxcbiAgICAgICAgICBhcmdzTGVuZ3RoID0gbmF0aXZlTWF4KGFyZ3MubGVuZ3RoIC0gaG9sZGVyc0xlbmd0aCwgMCksXG4gICAgICAgICAgbGVmdEluZGV4ID0gLTEsXG4gICAgICAgICAgbGVmdExlbmd0aCA9IHBhcnRpYWxzLmxlbmd0aCxcbiAgICAgICAgICByZXN1bHQgPSBBcnJheShsZWZ0TGVuZ3RoICsgYXJnc0xlbmd0aCk7XG5cbiAgICAgIHdoaWxlICgrK2xlZnRJbmRleCA8IGxlZnRMZW5ndGgpIHtcbiAgICAgICAgcmVzdWx0W2xlZnRJbmRleF0gPSBwYXJ0aWFsc1tsZWZ0SW5kZXhdO1xuICAgICAgfVxuICAgICAgd2hpbGUgKCsrYXJnc0luZGV4IDwgaG9sZGVyc0xlbmd0aCkge1xuICAgICAgICByZXN1bHRbaG9sZGVyc1thcmdzSW5kZXhdXSA9IGFyZ3NbYXJnc0luZGV4XTtcbiAgICAgIH1cbiAgICAgIHdoaWxlIChhcmdzTGVuZ3RoLS0pIHtcbiAgICAgICAgcmVzdWx0W2xlZnRJbmRleCsrXSA9IGFyZ3NbYXJnc0luZGV4KytdO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGlzIGxpa2UgYGNvbXBvc2VBcmdzYCBleGNlcHQgdGhhdCB0aGUgYXJndW1lbnRzIGNvbXBvc2l0aW9uXG4gICAgICogaXMgdGFpbG9yZWQgZm9yIGBfLnBhcnRpYWxSaWdodGAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fSBhcmdzIFRoZSBwcm92aWRlZCBhcmd1bWVudHMuXG4gICAgICogQHBhcmFtIHtBcnJheX0gcGFydGlhbHMgVGhlIGFyZ3VtZW50cyB0byBhcHBlbmQgdG8gdGhvc2UgcHJvdmlkZWQuXG4gICAgICogQHBhcmFtIHtBcnJheX0gaG9sZGVycyBUaGUgYHBhcnRpYWxzYCBwbGFjZWhvbGRlciBpbmRleGVzLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGFycmF5IG9mIGNvbXBvc2VkIGFyZ3VtZW50cy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjb21wb3NlQXJnc1JpZ2h0KGFyZ3MsIHBhcnRpYWxzLCBob2xkZXJzKSB7XG4gICAgICB2YXIgaG9sZGVyc0luZGV4ID0gLTEsXG4gICAgICAgICAgaG9sZGVyc0xlbmd0aCA9IGhvbGRlcnMubGVuZ3RoLFxuICAgICAgICAgIGFyZ3NJbmRleCA9IC0xLFxuICAgICAgICAgIGFyZ3NMZW5ndGggPSBuYXRpdmVNYXgoYXJncy5sZW5ndGggLSBob2xkZXJzTGVuZ3RoLCAwKSxcbiAgICAgICAgICByaWdodEluZGV4ID0gLTEsXG4gICAgICAgICAgcmlnaHRMZW5ndGggPSBwYXJ0aWFscy5sZW5ndGgsXG4gICAgICAgICAgcmVzdWx0ID0gQXJyYXkoYXJnc0xlbmd0aCArIHJpZ2h0TGVuZ3RoKTtcblxuICAgICAgd2hpbGUgKCsrYXJnc0luZGV4IDwgYXJnc0xlbmd0aCkge1xuICAgICAgICByZXN1bHRbYXJnc0luZGV4XSA9IGFyZ3NbYXJnc0luZGV4XTtcbiAgICAgIH1cbiAgICAgIHZhciBvZmZzZXQgPSBhcmdzSW5kZXg7XG4gICAgICB3aGlsZSAoKytyaWdodEluZGV4IDwgcmlnaHRMZW5ndGgpIHtcbiAgICAgICAgcmVzdWx0W29mZnNldCArIHJpZ2h0SW5kZXhdID0gcGFydGlhbHNbcmlnaHRJbmRleF07XG4gICAgICB9XG4gICAgICB3aGlsZSAoKytob2xkZXJzSW5kZXggPCBob2xkZXJzTGVuZ3RoKSB7XG4gICAgICAgIHJlc3VsdFtvZmZzZXQgKyBob2xkZXJzW2hvbGRlcnNJbmRleF1dID0gYXJnc1thcmdzSW5kZXgrK107XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBgXy5jb3VudEJ5YCwgYF8uZ3JvdXBCeWAsIGBfLmluZGV4QnlgLCBvciBgXy5wYXJ0aXRpb25gIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBzZXR0ZXIgVGhlIGZ1bmN0aW9uIHRvIHNldCBrZXlzIGFuZCB2YWx1ZXMgb2YgdGhlIGFjY3VtdWxhdG9yIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbaW5pdGlhbGl6ZXJdIFRoZSBmdW5jdGlvbiB0byBpbml0aWFsaXplIHRoZSBhY2N1bXVsYXRvciBvYmplY3QuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgYWdncmVnYXRvciBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVBZ2dyZWdhdG9yKHNldHRlciwgaW5pdGlhbGl6ZXIpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihjb2xsZWN0aW9uLCBpdGVyYXRlZSwgdGhpc0FyZykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gaW5pdGlhbGl6ZXIgPyBpbml0aWFsaXplcigpIDoge307XG4gICAgICAgIGl0ZXJhdGVlID0gZ2V0Q2FsbGJhY2soaXRlcmF0ZWUsIHRoaXNBcmcsIDMpO1xuXG4gICAgICAgIGlmIChpc0FycmF5KGNvbGxlY3Rpb24pKSB7XG4gICAgICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgICAgIGxlbmd0aCA9IGNvbGxlY3Rpb24ubGVuZ3RoO1xuXG4gICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGNvbGxlY3Rpb25baW5kZXhdO1xuICAgICAgICAgICAgc2V0dGVyKHJlc3VsdCwgdmFsdWUsIGl0ZXJhdGVlKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbiksIGNvbGxlY3Rpb24pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBiYXNlRWFjaChjb2xsZWN0aW9uLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBjb2xsZWN0aW9uKSB7XG4gICAgICAgICAgICBzZXR0ZXIocmVzdWx0LCB2YWx1ZSwgaXRlcmF0ZWUodmFsdWUsIGtleSwgY29sbGVjdGlvbiksIGNvbGxlY3Rpb24pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBgXy5hc3NpZ25gLCBgXy5kZWZhdWx0c2AsIG9yIGBfLm1lcmdlYCBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gYXNzaWduZXIgVGhlIGZ1bmN0aW9uIHRvIGFzc2lnbiB2YWx1ZXMuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgYXNzaWduZXIgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlQXNzaWduZXIoYXNzaWduZXIpIHtcbiAgICAgIHJldHVybiByZXN0UGFyYW0oZnVuY3Rpb24ob2JqZWN0LCBzb3VyY2VzKSB7XG4gICAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgICAgbGVuZ3RoID0gb2JqZWN0ID09IG51bGwgPyAwIDogc291cmNlcy5sZW5ndGgsXG4gICAgICAgICAgICBjdXN0b21pemVyID0gbGVuZ3RoID4gMiA/IHNvdXJjZXNbbGVuZ3RoIC0gMl0gOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBndWFyZCA9IGxlbmd0aCA+IDIgPyBzb3VyY2VzWzJdIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgdGhpc0FyZyA9IGxlbmd0aCA+IDEgPyBzb3VyY2VzW2xlbmd0aCAtIDFdIDogdW5kZWZpbmVkO1xuXG4gICAgICAgIGlmICh0eXBlb2YgY3VzdG9taXplciA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgY3VzdG9taXplciA9IGJpbmRDYWxsYmFjayhjdXN0b21pemVyLCB0aGlzQXJnLCA1KTtcbiAgICAgICAgICBsZW5ndGggLT0gMjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjdXN0b21pemVyID0gdHlwZW9mIHRoaXNBcmcgPT0gJ2Z1bmN0aW9uJyA/IHRoaXNBcmcgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgbGVuZ3RoIC09IChjdXN0b21pemVyID8gMSA6IDApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChndWFyZCAmJiBpc0l0ZXJhdGVlQ2FsbChzb3VyY2VzWzBdLCBzb3VyY2VzWzFdLCBndWFyZCkpIHtcbiAgICAgICAgICBjdXN0b21pemVyID0gbGVuZ3RoIDwgMyA/IHVuZGVmaW5lZCA6IGN1c3RvbWl6ZXI7XG4gICAgICAgICAgbGVuZ3RoID0gMTtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICAgIHZhciBzb3VyY2UgPSBzb3VyY2VzW2luZGV4XTtcbiAgICAgICAgICBpZiAoc291cmNlKSB7XG4gICAgICAgICAgICBhc3NpZ25lcihvYmplY3QsIHNvdXJjZSwgY3VzdG9taXplcik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgYGJhc2VFYWNoYCBvciBgYmFzZUVhY2hSaWdodGAgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGVhY2hGdW5jIFRoZSBmdW5jdGlvbiB0byBpdGVyYXRlIG92ZXIgYSBjb2xsZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2Zyb21SaWdodF0gU3BlY2lmeSBpdGVyYXRpbmcgZnJvbSByaWdodCB0byBsZWZ0LlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGJhc2UgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlQmFzZUVhY2goZWFjaEZ1bmMsIGZyb21SaWdodCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGNvbGxlY3Rpb24sIGl0ZXJhdGVlKSB7XG4gICAgICAgIHZhciBsZW5ndGggPSBjb2xsZWN0aW9uID8gZ2V0TGVuZ3RoKGNvbGxlY3Rpb24pIDogMDtcbiAgICAgICAgaWYgKCFpc0xlbmd0aChsZW5ndGgpKSB7XG4gICAgICAgICAgcmV0dXJuIGVhY2hGdW5jKGNvbGxlY3Rpb24sIGl0ZXJhdGVlKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgaW5kZXggPSBmcm9tUmlnaHQgPyBsZW5ndGggOiAtMSxcbiAgICAgICAgICAgIGl0ZXJhYmxlID0gdG9PYmplY3QoY29sbGVjdGlvbik7XG5cbiAgICAgICAgd2hpbGUgKChmcm9tUmlnaHQgPyBpbmRleC0tIDogKytpbmRleCA8IGxlbmd0aCkpIHtcbiAgICAgICAgICBpZiAoaXRlcmF0ZWUoaXRlcmFibGVbaW5kZXhdLCBpbmRleCwgaXRlcmFibGUpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb2xsZWN0aW9uO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgYmFzZSBmdW5jdGlvbiBmb3IgYF8uZm9ySW5gIG9yIGBfLmZvckluUmlnaHRgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtmcm9tUmlnaHRdIFNwZWNpZnkgaXRlcmF0aW5nIGZyb20gcmlnaHQgdG8gbGVmdC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBiYXNlIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZUJhc2VGb3IoZnJvbVJpZ2h0KSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0LCBpdGVyYXRlZSwga2V5c0Z1bmMpIHtcbiAgICAgICAgdmFyIGl0ZXJhYmxlID0gdG9PYmplY3Qob2JqZWN0KSxcbiAgICAgICAgICAgIHByb3BzID0ga2V5c0Z1bmMob2JqZWN0KSxcbiAgICAgICAgICAgIGxlbmd0aCA9IHByb3BzLmxlbmd0aCxcbiAgICAgICAgICAgIGluZGV4ID0gZnJvbVJpZ2h0ID8gbGVuZ3RoIDogLTE7XG5cbiAgICAgICAgd2hpbGUgKChmcm9tUmlnaHQgPyBpbmRleC0tIDogKytpbmRleCA8IGxlbmd0aCkpIHtcbiAgICAgICAgICB2YXIga2V5ID0gcHJvcHNbaW5kZXhdO1xuICAgICAgICAgIGlmIChpdGVyYXRlZShpdGVyYWJsZVtrZXldLCBrZXksIGl0ZXJhYmxlKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCB3cmFwcyBgZnVuY2AgYW5kIGludm9rZXMgaXQgd2l0aCB0aGUgYHRoaXNgXG4gICAgICogYmluZGluZyBvZiBgdGhpc0FyZ2AuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGJpbmQuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBmdW5jYC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBib3VuZCBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVCaW5kV3JhcHBlcihmdW5jLCB0aGlzQXJnKSB7XG4gICAgICB2YXIgQ3RvciA9IGNyZWF0ZUN0b3JXcmFwcGVyKGZ1bmMpO1xuXG4gICAgICBmdW5jdGlvbiB3cmFwcGVyKCkge1xuICAgICAgICB2YXIgZm4gPSAodGhpcyAmJiB0aGlzICE9PSByb290ICYmIHRoaXMgaW5zdGFuY2VvZiB3cmFwcGVyKSA/IEN0b3IgOiBmdW5jO1xuICAgICAgICByZXR1cm4gZm4uYXBwbHkodGhpc0FyZywgYXJndW1lbnRzKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB3cmFwcGVyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBgU2V0YCBjYWNoZSBvYmplY3QgdG8gb3B0aW1pemUgbGluZWFyIHNlYXJjaGVzIG9mIGxhcmdlIGFycmF5cy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gW3ZhbHVlc10gVGhlIHZhbHVlcyB0byBjYWNoZS5cbiAgICAgKiBAcmV0dXJucyB7bnVsbHxPYmplY3R9IFJldHVybnMgdGhlIG5ldyBjYWNoZSBvYmplY3QgaWYgYFNldGAgaXMgc3VwcG9ydGVkLCBlbHNlIGBudWxsYC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVDYWNoZSh2YWx1ZXMpIHtcbiAgICAgIHJldHVybiAobmF0aXZlQ3JlYXRlICYmIFNldCkgPyBuZXcgU2V0Q2FjaGUodmFsdWVzKSA6IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgcHJvZHVjZXMgY29tcG91bmQgd29yZHMgb3V0IG9mIHRoZSB3b3JkcyBpbiBhXG4gICAgICogZ2l2ZW4gc3RyaW5nLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBUaGUgZnVuY3Rpb24gdG8gY29tYmluZSBlYWNoIHdvcmQuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgY29tcG91bmRlciBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVDb21wb3VuZGVyKGNhbGxiYWNrKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgICAgYXJyYXkgPSB3b3JkcyhkZWJ1cnIoc3RyaW5nKSksXG4gICAgICAgICAgICBsZW5ndGggPSBhcnJheS5sZW5ndGgsXG4gICAgICAgICAgICByZXN1bHQgPSAnJztcblxuICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICAgIHJlc3VsdCA9IGNhbGxiYWNrKHJlc3VsdCwgYXJyYXlbaW5kZXhdLCBpbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgcHJvZHVjZXMgYW4gaW5zdGFuY2Ugb2YgYEN0b3JgIHJlZ2FyZGxlc3Mgb2ZcbiAgICAgKiB3aGV0aGVyIGl0IHdhcyBpbnZva2VkIGFzIHBhcnQgb2YgYSBgbmV3YCBleHByZXNzaW9uIG9yIGJ5IGBjYWxsYCBvciBgYXBwbHlgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBDdG9yIFRoZSBjb25zdHJ1Y3RvciB0byB3cmFwLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHdyYXBwZWQgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlQ3RvcldyYXBwZXIoQ3Rvcikge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBVc2UgYSBgc3dpdGNoYCBzdGF0ZW1lbnQgdG8gd29yayB3aXRoIGNsYXNzIGNvbnN0cnVjdG9ycy5cbiAgICAgICAgLy8gU2VlIGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLWVjbWFzY3JpcHQtZnVuY3Rpb24tb2JqZWN0cy1jYWxsLXRoaXNhcmd1bWVudC1hcmd1bWVudHNsaXN0XG4gICAgICAgIC8vIGZvciBtb3JlIGRldGFpbHMuXG4gICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgICBzd2l0Y2ggKGFyZ3MubGVuZ3RoKSB7XG4gICAgICAgICAgY2FzZSAwOiByZXR1cm4gbmV3IEN0b3I7XG4gICAgICAgICAgY2FzZSAxOiByZXR1cm4gbmV3IEN0b3IoYXJnc1swXSk7XG4gICAgICAgICAgY2FzZSAyOiByZXR1cm4gbmV3IEN0b3IoYXJnc1swXSwgYXJnc1sxXSk7XG4gICAgICAgICAgY2FzZSAzOiByZXR1cm4gbmV3IEN0b3IoYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSk7XG4gICAgICAgICAgY2FzZSA0OiByZXR1cm4gbmV3IEN0b3IoYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSwgYXJnc1szXSk7XG4gICAgICAgICAgY2FzZSA1OiByZXR1cm4gbmV3IEN0b3IoYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSwgYXJnc1szXSwgYXJnc1s0XSk7XG4gICAgICAgICAgY2FzZSA2OiByZXR1cm4gbmV3IEN0b3IoYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSwgYXJnc1szXSwgYXJnc1s0XSwgYXJnc1s1XSk7XG4gICAgICAgICAgY2FzZSA3OiByZXR1cm4gbmV3IEN0b3IoYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSwgYXJnc1szXSwgYXJnc1s0XSwgYXJnc1s1XSwgYXJnc1s2XSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRoaXNCaW5kaW5nID0gYmFzZUNyZWF0ZShDdG9yLnByb3RvdHlwZSksXG4gICAgICAgICAgICByZXN1bHQgPSBDdG9yLmFwcGx5KHRoaXNCaW5kaW5nLCBhcmdzKTtcblxuICAgICAgICAvLyBNaW1pYyB0aGUgY29uc3RydWN0b3IncyBgcmV0dXJuYCBiZWhhdmlvci5cbiAgICAgICAgLy8gU2VlIGh0dHBzOi8vZXM1LmdpdGh1Yi5pby8jeDEzLjIuMiBmb3IgbW9yZSBkZXRhaWxzLlxuICAgICAgICByZXR1cm4gaXNPYmplY3QocmVzdWx0KSA/IHJlc3VsdCA6IHRoaXNCaW5kaW5nO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgYF8uY3VycnlgIG9yIGBfLmN1cnJ5UmlnaHRgIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGZsYWcgVGhlIGN1cnJ5IGJpdCBmbGFnLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGN1cnJ5IGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZUN1cnJ5KGZsYWcpIHtcbiAgICAgIGZ1bmN0aW9uIGN1cnJ5RnVuYyhmdW5jLCBhcml0eSwgZ3VhcmQpIHtcbiAgICAgICAgaWYgKGd1YXJkICYmIGlzSXRlcmF0ZWVDYWxsKGZ1bmMsIGFyaXR5LCBndWFyZCkpIHtcbiAgICAgICAgICBhcml0eSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmVzdWx0ID0gY3JlYXRlV3JhcHBlcihmdW5jLCBmbGFnLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgYXJpdHkpO1xuICAgICAgICByZXN1bHQucGxhY2Vob2xkZXIgPSBjdXJyeUZ1bmMucGxhY2Vob2xkZXI7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gY3VycnlGdW5jO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBgXy5kZWZhdWx0c2Agb3IgYF8uZGVmYXVsdHNEZWVwYCBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gYXNzaWduZXIgVGhlIGZ1bmN0aW9uIHRvIGFzc2lnbiB2YWx1ZXMuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY3VzdG9taXplciBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGFzc2lnbmVkIHZhbHVlcy5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBkZWZhdWx0cyBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVEZWZhdWx0cyhhc3NpZ25lciwgY3VzdG9taXplcikge1xuICAgICAgcmV0dXJuIHJlc3RQYXJhbShmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgIHZhciBvYmplY3QgPSBhcmdzWzBdO1xuICAgICAgICBpZiAob2JqZWN0ID09IG51bGwpIHtcbiAgICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgICB9XG4gICAgICAgIGFyZ3MucHVzaChjdXN0b21pemVyKTtcbiAgICAgICAgcmV0dXJuIGFzc2lnbmVyLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgYF8ubWF4YCBvciBgXy5taW5gIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjb21wYXJhdG9yIFRoZSBmdW5jdGlvbiB1c2VkIHRvIGNvbXBhcmUgdmFsdWVzLlxuICAgICAqIEBwYXJhbSB7Kn0gZXhWYWx1ZSBUaGUgaW5pdGlhbCBleHRyZW11bSB2YWx1ZS5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBleHRyZW11bSBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVFeHRyZW11bShjb21wYXJhdG9yLCBleFZhbHVlKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oY29sbGVjdGlvbiwgaXRlcmF0ZWUsIHRoaXNBcmcpIHtcbiAgICAgICAgaWYgKHRoaXNBcmcgJiYgaXNJdGVyYXRlZUNhbGwoY29sbGVjdGlvbiwgaXRlcmF0ZWUsIHRoaXNBcmcpKSB7XG4gICAgICAgICAgaXRlcmF0ZWUgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgaXRlcmF0ZWUgPSBnZXRDYWxsYmFjayhpdGVyYXRlZSwgdGhpc0FyZywgMyk7XG4gICAgICAgIGlmIChpdGVyYXRlZS5sZW5ndGggPT0gMSkge1xuICAgICAgICAgIGNvbGxlY3Rpb24gPSBpc0FycmF5KGNvbGxlY3Rpb24pID8gY29sbGVjdGlvbiA6IHRvSXRlcmFibGUoY29sbGVjdGlvbik7XG4gICAgICAgICAgdmFyIHJlc3VsdCA9IGFycmF5RXh0cmVtdW0oY29sbGVjdGlvbiwgaXRlcmF0ZWUsIGNvbXBhcmF0b3IsIGV4VmFsdWUpO1xuICAgICAgICAgIGlmICghKGNvbGxlY3Rpb24ubGVuZ3RoICYmIHJlc3VsdCA9PT0gZXhWYWx1ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBiYXNlRXh0cmVtdW0oY29sbGVjdGlvbiwgaXRlcmF0ZWUsIGNvbXBhcmF0b3IsIGV4VmFsdWUpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgYF8uZmluZGAgb3IgYF8uZmluZExhc3RgIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBlYWNoRnVuYyBUaGUgZnVuY3Rpb24gdG8gaXRlcmF0ZSBvdmVyIGEgY29sbGVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtmcm9tUmlnaHRdIFNwZWNpZnkgaXRlcmF0aW5nIGZyb20gcmlnaHQgdG8gbGVmdC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmaW5kIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZUZpbmQoZWFjaEZ1bmMsIGZyb21SaWdodCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGNvbGxlY3Rpb24sIHByZWRpY2F0ZSwgdGhpc0FyZykge1xuICAgICAgICBwcmVkaWNhdGUgPSBnZXRDYWxsYmFjayhwcmVkaWNhdGUsIHRoaXNBcmcsIDMpO1xuICAgICAgICBpZiAoaXNBcnJheShjb2xsZWN0aW9uKSkge1xuICAgICAgICAgIHZhciBpbmRleCA9IGJhc2VGaW5kSW5kZXgoY29sbGVjdGlvbiwgcHJlZGljYXRlLCBmcm9tUmlnaHQpO1xuICAgICAgICAgIHJldHVybiBpbmRleCA+IC0xID8gY29sbGVjdGlvbltpbmRleF0gOiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJhc2VGaW5kKGNvbGxlY3Rpb24sIHByZWRpY2F0ZSwgZWFjaEZ1bmMpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgYF8uZmluZEluZGV4YCBvciBgXy5maW5kTGFzdEluZGV4YCBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbZnJvbVJpZ2h0XSBTcGVjaWZ5IGl0ZXJhdGluZyBmcm9tIHJpZ2h0IHRvIGxlZnQuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZmluZCBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVGaW5kSW5kZXgoZnJvbVJpZ2h0KSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oYXJyYXksIHByZWRpY2F0ZSwgdGhpc0FyZykge1xuICAgICAgICBpZiAoIShhcnJheSAmJiBhcnJheS5sZW5ndGgpKSB7XG4gICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9XG4gICAgICAgIHByZWRpY2F0ZSA9IGdldENhbGxiYWNrKHByZWRpY2F0ZSwgdGhpc0FyZywgMyk7XG4gICAgICAgIHJldHVybiBiYXNlRmluZEluZGV4KGFycmF5LCBwcmVkaWNhdGUsIGZyb21SaWdodCk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBgXy5maW5kS2V5YCBvciBgXy5maW5kTGFzdEtleWAgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IG9iamVjdEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGl0ZXJhdGUgb3ZlciBhbiBvYmplY3QuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZmluZCBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVGaW5kS2V5KG9iamVjdEZ1bmMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihvYmplY3QsIHByZWRpY2F0ZSwgdGhpc0FyZykge1xuICAgICAgICBwcmVkaWNhdGUgPSBnZXRDYWxsYmFjayhwcmVkaWNhdGUsIHRoaXNBcmcsIDMpO1xuICAgICAgICByZXR1cm4gYmFzZUZpbmQob2JqZWN0LCBwcmVkaWNhdGUsIG9iamVjdEZ1bmMsIHRydWUpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgYF8uZmxvd2Agb3IgYF8uZmxvd1JpZ2h0YCBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbZnJvbVJpZ2h0XSBTcGVjaWZ5IGl0ZXJhdGluZyBmcm9tIHJpZ2h0IHRvIGxlZnQuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZmxvdyBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVGbG93KGZyb21SaWdodCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgd3JhcHBlcixcbiAgICAgICAgICAgIGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGgsXG4gICAgICAgICAgICBpbmRleCA9IGZyb21SaWdodCA/IGxlbmd0aCA6IC0xLFxuICAgICAgICAgICAgbGVmdEluZGV4ID0gMCxcbiAgICAgICAgICAgIGZ1bmNzID0gQXJyYXkobGVuZ3RoKTtcblxuICAgICAgICB3aGlsZSAoKGZyb21SaWdodCA/IGluZGV4LS0gOiArK2luZGV4IDwgbGVuZ3RoKSkge1xuICAgICAgICAgIHZhciBmdW5jID0gZnVuY3NbbGVmdEluZGV4KytdID0gYXJndW1lbnRzW2luZGV4XTtcbiAgICAgICAgICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIXdyYXBwZXIgJiYgTG9kYXNoV3JhcHBlci5wcm90b3R5cGUudGhydSAmJiBnZXRGdW5jTmFtZShmdW5jKSA9PSAnd3JhcHBlcicpIHtcbiAgICAgICAgICAgIHdyYXBwZXIgPSBuZXcgTG9kYXNoV3JhcHBlcihbXSwgdHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGluZGV4ID0gd3JhcHBlciA/IC0xIDogbGVuZ3RoO1xuICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICAgIGZ1bmMgPSBmdW5jc1tpbmRleF07XG5cbiAgICAgICAgICB2YXIgZnVuY05hbWUgPSBnZXRGdW5jTmFtZShmdW5jKSxcbiAgICAgICAgICAgICAgZGF0YSA9IGZ1bmNOYW1lID09ICd3cmFwcGVyJyA/IGdldERhdGEoZnVuYykgOiB1bmRlZmluZWQ7XG5cbiAgICAgICAgICBpZiAoZGF0YSAmJiBpc0xhemlhYmxlKGRhdGFbMF0pICYmIGRhdGFbMV0gPT0gKEFSWV9GTEFHIHwgQ1VSUllfRkxBRyB8IFBBUlRJQUxfRkxBRyB8IFJFQVJHX0ZMQUcpICYmICFkYXRhWzRdLmxlbmd0aCAmJiBkYXRhWzldID09IDEpIHtcbiAgICAgICAgICAgIHdyYXBwZXIgPSB3cmFwcGVyW2dldEZ1bmNOYW1lKGRhdGFbMF0pXS5hcHBseSh3cmFwcGVyLCBkYXRhWzNdKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgd3JhcHBlciA9IChmdW5jLmxlbmd0aCA9PSAxICYmIGlzTGF6aWFibGUoZnVuYykpID8gd3JhcHBlcltmdW5jTmFtZV0oKSA6IHdyYXBwZXIudGhydShmdW5jKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzLFxuICAgICAgICAgICAgICB2YWx1ZSA9IGFyZ3NbMF07XG5cbiAgICAgICAgICBpZiAod3JhcHBlciAmJiBhcmdzLmxlbmd0aCA9PSAxICYmIGlzQXJyYXkodmFsdWUpICYmIHZhbHVlLmxlbmd0aCA+PSBMQVJHRV9BUlJBWV9TSVpFKSB7XG4gICAgICAgICAgICByZXR1cm4gd3JhcHBlci5wbGFudCh2YWx1ZSkudmFsdWUoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFyIGluZGV4ID0gMCxcbiAgICAgICAgICAgICAgcmVzdWx0ID0gbGVuZ3RoID8gZnVuY3NbaW5kZXhdLmFwcGx5KHRoaXMsIGFyZ3MpIDogdmFsdWU7XG5cbiAgICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICAgICAgcmVzdWx0ID0gZnVuY3NbaW5kZXhdLmNhbGwodGhpcywgcmVzdWx0KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIGZvciBgXy5mb3JFYWNoYCBvciBgXy5mb3JFYWNoUmlnaHRgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBhcnJheUZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGl0ZXJhdGUgb3ZlciBhbiBhcnJheS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBlYWNoRnVuYyBUaGUgZnVuY3Rpb24gdG8gaXRlcmF0ZSBvdmVyIGEgY29sbGVjdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBlYWNoIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZUZvckVhY2goYXJyYXlGdW5jLCBlYWNoRnVuYykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGNvbGxlY3Rpb24sIGl0ZXJhdGVlLCB0aGlzQXJnKSB7XG4gICAgICAgIHJldHVybiAodHlwZW9mIGl0ZXJhdGVlID09ICdmdW5jdGlvbicgJiYgdGhpc0FyZyA9PT0gdW5kZWZpbmVkICYmIGlzQXJyYXkoY29sbGVjdGlvbikpXG4gICAgICAgICAgPyBhcnJheUZ1bmMoY29sbGVjdGlvbiwgaXRlcmF0ZWUpXG4gICAgICAgICAgOiBlYWNoRnVuYyhjb2xsZWN0aW9uLCBiaW5kQ2FsbGJhY2soaXRlcmF0ZWUsIHRoaXNBcmcsIDMpKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIGZvciBgXy5mb3JJbmAgb3IgYF8uZm9ySW5SaWdodGAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IG9iamVjdEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGl0ZXJhdGUgb3ZlciBhbiBvYmplY3QuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZWFjaCBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVGb3JJbihvYmplY3RGdW5jKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0LCBpdGVyYXRlZSwgdGhpc0FyZykge1xuICAgICAgICBpZiAodHlwZW9mIGl0ZXJhdGVlICE9ICdmdW5jdGlvbicgfHwgdGhpc0FyZyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgaXRlcmF0ZWUgPSBiaW5kQ2FsbGJhY2soaXRlcmF0ZWUsIHRoaXNBcmcsIDMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmplY3RGdW5jKG9iamVjdCwgaXRlcmF0ZWUsIGtleXNJbik7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiBmb3IgYF8uZm9yT3duYCBvciBgXy5mb3JPd25SaWdodGAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IG9iamVjdEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGl0ZXJhdGUgb3ZlciBhbiBvYmplY3QuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZWFjaCBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVGb3JPd24ob2JqZWN0RnVuYykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCwgaXRlcmF0ZWUsIHRoaXNBcmcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBpdGVyYXRlZSAhPSAnZnVuY3Rpb24nIHx8IHRoaXNBcmcgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGl0ZXJhdGVlID0gYmluZENhbGxiYWNrKGl0ZXJhdGVlLCB0aGlzQXJnLCAzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqZWN0RnVuYyhvYmplY3QsIGl0ZXJhdGVlKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIGZvciBgXy5tYXBLZXlzYCBvciBgXy5tYXBWYWx1ZXNgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc01hcEtleXNdIFNwZWNpZnkgbWFwcGluZyBrZXlzIGluc3RlYWQgb2YgdmFsdWVzLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IG1hcCBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVPYmplY3RNYXBwZXIoaXNNYXBLZXlzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0LCBpdGVyYXRlZSwgdGhpc0FyZykge1xuICAgICAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgICAgIGl0ZXJhdGVlID0gZ2V0Q2FsbGJhY2soaXRlcmF0ZWUsIHRoaXNBcmcsIDMpO1xuXG4gICAgICAgIGJhc2VGb3JPd24ob2JqZWN0LCBmdW5jdGlvbih2YWx1ZSwga2V5LCBvYmplY3QpIHtcbiAgICAgICAgICB2YXIgbWFwcGVkID0gaXRlcmF0ZWUodmFsdWUsIGtleSwgb2JqZWN0KTtcbiAgICAgICAgICBrZXkgPSBpc01hcEtleXMgPyBtYXBwZWQgOiBrZXk7XG4gICAgICAgICAgdmFsdWUgPSBpc01hcEtleXMgPyB2YWx1ZSA6IG1hcHBlZDtcbiAgICAgICAgICByZXN1bHRba2V5XSA9IHZhbHVlO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIGZvciBgXy5wYWRMZWZ0YCBvciBgXy5wYWRSaWdodGAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2Zyb21SaWdodF0gU3BlY2lmeSBwYWRkaW5nIGZyb20gdGhlIHJpZ2h0LlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHBhZCBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVQYWREaXIoZnJvbVJpZ2h0KSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oc3RyaW5nLCBsZW5ndGgsIGNoYXJzKSB7XG4gICAgICAgIHN0cmluZyA9IGJhc2VUb1N0cmluZyhzdHJpbmcpO1xuICAgICAgICByZXR1cm4gKGZyb21SaWdodCA/IHN0cmluZyA6ICcnKSArIGNyZWF0ZVBhZGRpbmcoc3RyaW5nLCBsZW5ndGgsIGNoYXJzKSArIChmcm9tUmlnaHQgPyAnJyA6IHN0cmluZyk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBgXy5wYXJ0aWFsYCBvciBgXy5wYXJ0aWFsUmlnaHRgIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGZsYWcgVGhlIHBhcnRpYWwgYml0IGZsYWcuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgcGFydGlhbCBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVQYXJ0aWFsKGZsYWcpIHtcbiAgICAgIHZhciBwYXJ0aWFsRnVuYyA9IHJlc3RQYXJhbShmdW5jdGlvbihmdW5jLCBwYXJ0aWFscykge1xuICAgICAgICB2YXIgaG9sZGVycyA9IHJlcGxhY2VIb2xkZXJzKHBhcnRpYWxzLCBwYXJ0aWFsRnVuYy5wbGFjZWhvbGRlcik7XG4gICAgICAgIHJldHVybiBjcmVhdGVXcmFwcGVyKGZ1bmMsIGZsYWcsIHVuZGVmaW5lZCwgcGFydGlhbHMsIGhvbGRlcnMpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gcGFydGlhbEZ1bmM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIGZvciBgXy5yZWR1Y2VgIG9yIGBfLnJlZHVjZVJpZ2h0YC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gYXJyYXlGdW5jIFRoZSBmdW5jdGlvbiB0byBpdGVyYXRlIG92ZXIgYW4gYXJyYXkuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZWFjaEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGl0ZXJhdGUgb3ZlciBhIGNvbGxlY3Rpb24uXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZWFjaCBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVSZWR1Y2UoYXJyYXlGdW5jLCBlYWNoRnVuYykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGNvbGxlY3Rpb24sIGl0ZXJhdGVlLCBhY2N1bXVsYXRvciwgdGhpc0FyZykge1xuICAgICAgICB2YXIgaW5pdEZyb21BcnJheSA9IGFyZ3VtZW50cy5sZW5ndGggPCAzO1xuICAgICAgICByZXR1cm4gKHR5cGVvZiBpdGVyYXRlZSA9PSAnZnVuY3Rpb24nICYmIHRoaXNBcmcgPT09IHVuZGVmaW5lZCAmJiBpc0FycmF5KGNvbGxlY3Rpb24pKVxuICAgICAgICAgID8gYXJyYXlGdW5jKGNvbGxlY3Rpb24sIGl0ZXJhdGVlLCBhY2N1bXVsYXRvciwgaW5pdEZyb21BcnJheSlcbiAgICAgICAgICA6IGJhc2VSZWR1Y2UoY29sbGVjdGlvbiwgZ2V0Q2FsbGJhY2soaXRlcmF0ZWUsIHRoaXNBcmcsIDQpLCBhY2N1bXVsYXRvciwgaW5pdEZyb21BcnJheSwgZWFjaEZ1bmMpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCB3cmFwcyBgZnVuY2AgYW5kIGludm9rZXMgaXQgd2l0aCBvcHRpb25hbCBgdGhpc2BcbiAgICAgKiBiaW5kaW5nIG9mLCBwYXJ0aWFsIGFwcGxpY2F0aW9uLCBhbmQgY3VycnlpbmcuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258c3RyaW5nfSBmdW5jIFRoZSBmdW5jdGlvbiBvciBtZXRob2QgbmFtZSB0byByZWZlcmVuY2UuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGJpdG1hc2sgVGhlIGJpdG1hc2sgb2YgZmxhZ3MuIFNlZSBgY3JlYXRlV3JhcHBlcmAgZm9yIG1vcmUgZGV0YWlscy5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGZ1bmNgLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFtwYXJ0aWFsc10gVGhlIGFyZ3VtZW50cyB0byBwcmVwZW5kIHRvIHRob3NlIHByb3ZpZGVkIHRvIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIHtBcnJheX0gW2hvbGRlcnNdIFRoZSBgcGFydGlhbHNgIHBsYWNlaG9sZGVyIGluZGV4ZXMuXG4gICAgICogQHBhcmFtIHtBcnJheX0gW3BhcnRpYWxzUmlnaHRdIFRoZSBhcmd1bWVudHMgdG8gYXBwZW5kIHRvIHRob3NlIHByb3ZpZGVkIHRvIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIHtBcnJheX0gW2hvbGRlcnNSaWdodF0gVGhlIGBwYXJ0aWFsc1JpZ2h0YCBwbGFjZWhvbGRlciBpbmRleGVzLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFthcmdQb3NdIFRoZSBhcmd1bWVudCBwb3NpdGlvbnMgb2YgdGhlIG5ldyBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2FyeV0gVGhlIGFyaXR5IGNhcCBvZiBgZnVuY2AuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFthcml0eV0gVGhlIGFyaXR5IG9mIGBmdW5jYC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyB3cmFwcGVkIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZUh5YnJpZFdyYXBwZXIoZnVuYywgYml0bWFzaywgdGhpc0FyZywgcGFydGlhbHMsIGhvbGRlcnMsIHBhcnRpYWxzUmlnaHQsIGhvbGRlcnNSaWdodCwgYXJnUG9zLCBhcnksIGFyaXR5KSB7XG4gICAgICB2YXIgaXNBcnkgPSBiaXRtYXNrICYgQVJZX0ZMQUcsXG4gICAgICAgICAgaXNCaW5kID0gYml0bWFzayAmIEJJTkRfRkxBRyxcbiAgICAgICAgICBpc0JpbmRLZXkgPSBiaXRtYXNrICYgQklORF9LRVlfRkxBRyxcbiAgICAgICAgICBpc0N1cnJ5ID0gYml0bWFzayAmIENVUlJZX0ZMQUcsXG4gICAgICAgICAgaXNDdXJyeUJvdW5kID0gYml0bWFzayAmIENVUlJZX0JPVU5EX0ZMQUcsXG4gICAgICAgICAgaXNDdXJyeVJpZ2h0ID0gYml0bWFzayAmIENVUlJZX1JJR0hUX0ZMQUcsXG4gICAgICAgICAgQ3RvciA9IGlzQmluZEtleSA/IHVuZGVmaW5lZCA6IGNyZWF0ZUN0b3JXcmFwcGVyKGZ1bmMpO1xuXG4gICAgICBmdW5jdGlvbiB3cmFwcGVyKCkge1xuICAgICAgICAvLyBBdm9pZCBgYXJndW1lbnRzYCBvYmplY3QgdXNlIGRpc3F1YWxpZnlpbmcgb3B0aW1pemF0aW9ucyBieVxuICAgICAgICAvLyBjb252ZXJ0aW5nIGl0IHRvIGFuIGFycmF5IGJlZm9yZSBwcm92aWRpbmcgaXQgdG8gb3RoZXIgZnVuY3Rpb25zLlxuICAgICAgICB2YXIgbGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aCxcbiAgICAgICAgICAgIGluZGV4ID0gbGVuZ3RoLFxuICAgICAgICAgICAgYXJncyA9IEFycmF5KGxlbmd0aCk7XG5cbiAgICAgICAgd2hpbGUgKGluZGV4LS0pIHtcbiAgICAgICAgICBhcmdzW2luZGV4XSA9IGFyZ3VtZW50c1tpbmRleF07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnRpYWxzKSB7XG4gICAgICAgICAgYXJncyA9IGNvbXBvc2VBcmdzKGFyZ3MsIHBhcnRpYWxzLCBob2xkZXJzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFydGlhbHNSaWdodCkge1xuICAgICAgICAgIGFyZ3MgPSBjb21wb3NlQXJnc1JpZ2h0KGFyZ3MsIHBhcnRpYWxzUmlnaHQsIGhvbGRlcnNSaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzQ3VycnkgfHwgaXNDdXJyeVJpZ2h0KSB7XG4gICAgICAgICAgdmFyIHBsYWNlaG9sZGVyID0gd3JhcHBlci5wbGFjZWhvbGRlcixcbiAgICAgICAgICAgICAgYXJnc0hvbGRlcnMgPSByZXBsYWNlSG9sZGVycyhhcmdzLCBwbGFjZWhvbGRlcik7XG5cbiAgICAgICAgICBsZW5ndGggLT0gYXJnc0hvbGRlcnMubGVuZ3RoO1xuICAgICAgICAgIGlmIChsZW5ndGggPCBhcml0eSkge1xuICAgICAgICAgICAgdmFyIG5ld0FyZ1BvcyA9IGFyZ1BvcyA/IGFycmF5Q29weShhcmdQb3MpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIG5ld0FyaXR5ID0gbmF0aXZlTWF4KGFyaXR5IC0gbGVuZ3RoLCAwKSxcbiAgICAgICAgICAgICAgICBuZXdzSG9sZGVycyA9IGlzQ3VycnkgPyBhcmdzSG9sZGVycyA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBuZXdIb2xkZXJzUmlnaHQgPSBpc0N1cnJ5ID8gdW5kZWZpbmVkIDogYXJnc0hvbGRlcnMsXG4gICAgICAgICAgICAgICAgbmV3UGFydGlhbHMgPSBpc0N1cnJ5ID8gYXJncyA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBuZXdQYXJ0aWFsc1JpZ2h0ID0gaXNDdXJyeSA/IHVuZGVmaW5lZCA6IGFyZ3M7XG5cbiAgICAgICAgICAgIGJpdG1hc2sgfD0gKGlzQ3VycnkgPyBQQVJUSUFMX0ZMQUcgOiBQQVJUSUFMX1JJR0hUX0ZMQUcpO1xuICAgICAgICAgICAgYml0bWFzayAmPSB+KGlzQ3VycnkgPyBQQVJUSUFMX1JJR0hUX0ZMQUcgOiBQQVJUSUFMX0ZMQUcpO1xuXG4gICAgICAgICAgICBpZiAoIWlzQ3VycnlCb3VuZCkge1xuICAgICAgICAgICAgICBiaXRtYXNrICY9IH4oQklORF9GTEFHIHwgQklORF9LRVlfRkxBRyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbmV3RGF0YSA9IFtmdW5jLCBiaXRtYXNrLCB0aGlzQXJnLCBuZXdQYXJ0aWFscywgbmV3c0hvbGRlcnMsIG5ld1BhcnRpYWxzUmlnaHQsIG5ld0hvbGRlcnNSaWdodCwgbmV3QXJnUG9zLCBhcnksIG5ld0FyaXR5XSxcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBjcmVhdGVIeWJyaWRXcmFwcGVyLmFwcGx5KHVuZGVmaW5lZCwgbmV3RGF0YSk7XG5cbiAgICAgICAgICAgIGlmIChpc0xhemlhYmxlKGZ1bmMpKSB7XG4gICAgICAgICAgICAgIHNldERhdGEocmVzdWx0LCBuZXdEYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc3VsdC5wbGFjZWhvbGRlciA9IHBsYWNlaG9sZGVyO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRoaXNCaW5kaW5nID0gaXNCaW5kID8gdGhpc0FyZyA6IHRoaXMsXG4gICAgICAgICAgICBmbiA9IGlzQmluZEtleSA/IHRoaXNCaW5kaW5nW2Z1bmNdIDogZnVuYztcblxuICAgICAgICBpZiAoYXJnUG9zKSB7XG4gICAgICAgICAgYXJncyA9IHJlb3JkZXIoYXJncywgYXJnUG9zKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNBcnkgJiYgYXJ5IDwgYXJncy5sZW5ndGgpIHtcbiAgICAgICAgICBhcmdzLmxlbmd0aCA9IGFyeTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcyAmJiB0aGlzICE9PSByb290ICYmIHRoaXMgaW5zdGFuY2VvZiB3cmFwcGVyKSB7XG4gICAgICAgICAgZm4gPSBDdG9yIHx8IGNyZWF0ZUN0b3JXcmFwcGVyKGZ1bmMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzQmluZGluZywgYXJncyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gd3JhcHBlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIHRoZSBwYWRkaW5nIHJlcXVpcmVkIGZvciBgc3RyaW5nYCBiYXNlZCBvbiB0aGUgZ2l2ZW4gYGxlbmd0aGAuXG4gICAgICogVGhlIGBjaGFyc2Agc3RyaW5nIGlzIHRydW5jYXRlZCBpZiB0aGUgbnVtYmVyIG9mIGNoYXJhY3RlcnMgZXhjZWVkcyBgbGVuZ3RoYC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyBUaGUgc3RyaW5nIHRvIGNyZWF0ZSBwYWRkaW5nIGZvci5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aD0wXSBUaGUgcGFkZGluZyBsZW5ndGguXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtjaGFycz0nICddIFRoZSBzdHJpbmcgdXNlZCBhcyBwYWRkaW5nLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHBhZCBmb3IgYHN0cmluZ2AuXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlUGFkZGluZyhzdHJpbmcsIGxlbmd0aCwgY2hhcnMpIHtcbiAgICAgIHZhciBzdHJMZW5ndGggPSBzdHJpbmcubGVuZ3RoO1xuICAgICAgbGVuZ3RoID0gK2xlbmd0aDtcblxuICAgICAgaWYgKHN0ckxlbmd0aCA+PSBsZW5ndGggfHwgIW5hdGl2ZUlzRmluaXRlKGxlbmd0aCkpIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfVxuICAgICAgdmFyIHBhZExlbmd0aCA9IGxlbmd0aCAtIHN0ckxlbmd0aDtcbiAgICAgIGNoYXJzID0gY2hhcnMgPT0gbnVsbCA/ICcgJyA6IChjaGFycyArICcnKTtcbiAgICAgIHJldHVybiByZXBlYXQoY2hhcnMsIG5hdGl2ZUNlaWwocGFkTGVuZ3RoIC8gY2hhcnMubGVuZ3RoKSkuc2xpY2UoMCwgcGFkTGVuZ3RoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCB3cmFwcyBgZnVuY2AgYW5kIGludm9rZXMgaXQgd2l0aCB0aGUgb3B0aW9uYWwgYHRoaXNgXG4gICAgICogYmluZGluZyBvZiBgdGhpc0FyZ2AgYW5kIHRoZSBgcGFydGlhbHNgIHByZXBlbmRlZCB0byB0aG9zZSBwcm92aWRlZCB0b1xuICAgICAqIHRoZSB3cmFwcGVyLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBwYXJ0aWFsbHkgYXBwbHkgYXJndW1lbnRzIHRvLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBiaXRtYXNrIFRoZSBiaXRtYXNrIG9mIGZsYWdzLiBTZWUgYGNyZWF0ZVdyYXBwZXJgIGZvciBtb3JlIGRldGFpbHMuXG4gICAgICogQHBhcmFtIHsqfSB0aGlzQXJnIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgZnVuY2AuXG4gICAgICogQHBhcmFtIHtBcnJheX0gcGFydGlhbHMgVGhlIGFyZ3VtZW50cyB0byBwcmVwZW5kIHRvIHRob3NlIHByb3ZpZGVkIHRvIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgYm91bmQgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlUGFydGlhbFdyYXBwZXIoZnVuYywgYml0bWFzaywgdGhpc0FyZywgcGFydGlhbHMpIHtcbiAgICAgIHZhciBpc0JpbmQgPSBiaXRtYXNrICYgQklORF9GTEFHLFxuICAgICAgICAgIEN0b3IgPSBjcmVhdGVDdG9yV3JhcHBlcihmdW5jKTtcblxuICAgICAgZnVuY3Rpb24gd3JhcHBlcigpIHtcbiAgICAgICAgLy8gQXZvaWQgYGFyZ3VtZW50c2Agb2JqZWN0IHVzZSBkaXNxdWFsaWZ5aW5nIG9wdGltaXphdGlvbnMgYnlcbiAgICAgICAgLy8gY29udmVydGluZyBpdCB0byBhbiBhcnJheSBiZWZvcmUgcHJvdmlkaW5nIGl0IGBmdW5jYC5cbiAgICAgICAgdmFyIGFyZ3NJbmRleCA9IC0xLFxuICAgICAgICAgICAgYXJnc0xlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGgsXG4gICAgICAgICAgICBsZWZ0SW5kZXggPSAtMSxcbiAgICAgICAgICAgIGxlZnRMZW5ndGggPSBwYXJ0aWFscy5sZW5ndGgsXG4gICAgICAgICAgICBhcmdzID0gQXJyYXkobGVmdExlbmd0aCArIGFyZ3NMZW5ndGgpO1xuXG4gICAgICAgIHdoaWxlICgrK2xlZnRJbmRleCA8IGxlZnRMZW5ndGgpIHtcbiAgICAgICAgICBhcmdzW2xlZnRJbmRleF0gPSBwYXJ0aWFsc1tsZWZ0SW5kZXhdO1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlIChhcmdzTGVuZ3RoLS0pIHtcbiAgICAgICAgICBhcmdzW2xlZnRJbmRleCsrXSA9IGFyZ3VtZW50c1srK2FyZ3NJbmRleF07XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGZuID0gKHRoaXMgJiYgdGhpcyAhPT0gcm9vdCAmJiB0aGlzIGluc3RhbmNlb2Ygd3JhcHBlcikgPyBDdG9yIDogZnVuYztcbiAgICAgICAgcmV0dXJuIGZuLmFwcGx5KGlzQmluZCA/IHRoaXNBcmcgOiB0aGlzLCBhcmdzKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB3cmFwcGVyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBgXy5jZWlsYCwgYF8uZmxvb3JgLCBvciBgXy5yb3VuZGAgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtZXRob2ROYW1lIFRoZSBuYW1lIG9mIHRoZSBgTWF0aGAgbWV0aG9kIHRvIHVzZSB3aGVuIHJvdW5kaW5nLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHJvdW5kIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZVJvdW5kKG1ldGhvZE5hbWUpIHtcbiAgICAgIHZhciBmdW5jID0gTWF0aFttZXRob2ROYW1lXTtcbiAgICAgIHJldHVybiBmdW5jdGlvbihudW1iZXIsIHByZWNpc2lvbikge1xuICAgICAgICBwcmVjaXNpb24gPSBwcmVjaXNpb24gPT09IHVuZGVmaW5lZCA/IDAgOiAoK3ByZWNpc2lvbiB8fCAwKTtcbiAgICAgICAgaWYgKHByZWNpc2lvbikge1xuICAgICAgICAgIHByZWNpc2lvbiA9IHBvdygxMCwgcHJlY2lzaW9uKTtcbiAgICAgICAgICByZXR1cm4gZnVuYyhudW1iZXIgKiBwcmVjaXNpb24pIC8gcHJlY2lzaW9uO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmdW5jKG51bWJlcik7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBgXy5zb3J0ZWRJbmRleGAgb3IgYF8uc29ydGVkTGFzdEluZGV4YCBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbcmV0SGlnaGVzdF0gU3BlY2lmeSByZXR1cm5pbmcgdGhlIGhpZ2hlc3QgcXVhbGlmaWVkIGluZGV4LlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGluZGV4IGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZVNvcnRlZEluZGV4KHJldEhpZ2hlc3QpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihhcnJheSwgdmFsdWUsIGl0ZXJhdGVlLCB0aGlzQXJnKSB7XG4gICAgICAgIHZhciBjYWxsYmFjayA9IGdldENhbGxiYWNrKGl0ZXJhdGVlKTtcbiAgICAgICAgcmV0dXJuIChpdGVyYXRlZSA9PSBudWxsICYmIGNhbGxiYWNrID09PSBiYXNlQ2FsbGJhY2spXG4gICAgICAgICAgPyBiaW5hcnlJbmRleChhcnJheSwgdmFsdWUsIHJldEhpZ2hlc3QpXG4gICAgICAgICAgOiBiaW5hcnlJbmRleEJ5KGFycmF5LCB2YWx1ZSwgY2FsbGJhY2soaXRlcmF0ZWUsIHRoaXNBcmcsIDEpLCByZXRIaWdoZXN0KTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgZWl0aGVyIGN1cnJpZXMgb3IgaW52b2tlcyBgZnVuY2Agd2l0aCBvcHRpb25hbFxuICAgICAqIGB0aGlzYCBiaW5kaW5nIGFuZCBwYXJ0aWFsbHkgYXBwbGllZCBhcmd1bWVudHMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258c3RyaW5nfSBmdW5jIFRoZSBmdW5jdGlvbiBvciBtZXRob2QgbmFtZSB0byByZWZlcmVuY2UuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGJpdG1hc2sgVGhlIGJpdG1hc2sgb2YgZmxhZ3MuXG4gICAgICogIFRoZSBiaXRtYXNrIG1heSBiZSBjb21wb3NlZCBvZiB0aGUgZm9sbG93aW5nIGZsYWdzOlxuICAgICAqICAgICAxIC0gYF8uYmluZGBcbiAgICAgKiAgICAgMiAtIGBfLmJpbmRLZXlgXG4gICAgICogICAgIDQgLSBgXy5jdXJyeWAgb3IgYF8uY3VycnlSaWdodGAgb2YgYSBib3VuZCBmdW5jdGlvblxuICAgICAqICAgICA4IC0gYF8uY3VycnlgXG4gICAgICogICAgMTYgLSBgXy5jdXJyeVJpZ2h0YFxuICAgICAqICAgIDMyIC0gYF8ucGFydGlhbGBcbiAgICAgKiAgICA2NCAtIGBfLnBhcnRpYWxSaWdodGBcbiAgICAgKiAgIDEyOCAtIGBfLnJlYXJnYFxuICAgICAqICAgMjU2IC0gYF8uYXJ5YFxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgZnVuY2AuXG4gICAgICogQHBhcmFtIHtBcnJheX0gW3BhcnRpYWxzXSBUaGUgYXJndW1lbnRzIHRvIGJlIHBhcnRpYWxseSBhcHBsaWVkLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFtob2xkZXJzXSBUaGUgYHBhcnRpYWxzYCBwbGFjZWhvbGRlciBpbmRleGVzLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFthcmdQb3NdIFRoZSBhcmd1bWVudCBwb3NpdGlvbnMgb2YgdGhlIG5ldyBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2FyeV0gVGhlIGFyaXR5IGNhcCBvZiBgZnVuY2AuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFthcml0eV0gVGhlIGFyaXR5IG9mIGBmdW5jYC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyB3cmFwcGVkIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZVdyYXBwZXIoZnVuYywgYml0bWFzaywgdGhpc0FyZywgcGFydGlhbHMsIGhvbGRlcnMsIGFyZ1BvcywgYXJ5LCBhcml0eSkge1xuICAgICAgdmFyIGlzQmluZEtleSA9IGJpdG1hc2sgJiBCSU5EX0tFWV9GTEFHO1xuICAgICAgaWYgKCFpc0JpbmRLZXkgJiYgdHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG4gICAgICB9XG4gICAgICB2YXIgbGVuZ3RoID0gcGFydGlhbHMgPyBwYXJ0aWFscy5sZW5ndGggOiAwO1xuICAgICAgaWYgKCFsZW5ndGgpIHtcbiAgICAgICAgYml0bWFzayAmPSB+KFBBUlRJQUxfRkxBRyB8IFBBUlRJQUxfUklHSFRfRkxBRyk7XG4gICAgICAgIHBhcnRpYWxzID0gaG9sZGVycyA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIGxlbmd0aCAtPSAoaG9sZGVycyA/IGhvbGRlcnMubGVuZ3RoIDogMCk7XG4gICAgICBpZiAoYml0bWFzayAmIFBBUlRJQUxfUklHSFRfRkxBRykge1xuICAgICAgICB2YXIgcGFydGlhbHNSaWdodCA9IHBhcnRpYWxzLFxuICAgICAgICAgICAgaG9sZGVyc1JpZ2h0ID0gaG9sZGVycztcblxuICAgICAgICBwYXJ0aWFscyA9IGhvbGRlcnMgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICB2YXIgZGF0YSA9IGlzQmluZEtleSA/IHVuZGVmaW5lZCA6IGdldERhdGEoZnVuYyksXG4gICAgICAgICAgbmV3RGF0YSA9IFtmdW5jLCBiaXRtYXNrLCB0aGlzQXJnLCBwYXJ0aWFscywgaG9sZGVycywgcGFydGlhbHNSaWdodCwgaG9sZGVyc1JpZ2h0LCBhcmdQb3MsIGFyeSwgYXJpdHldO1xuXG4gICAgICBpZiAoZGF0YSkge1xuICAgICAgICBtZXJnZURhdGEobmV3RGF0YSwgZGF0YSk7XG4gICAgICAgIGJpdG1hc2sgPSBuZXdEYXRhWzFdO1xuICAgICAgICBhcml0eSA9IG5ld0RhdGFbOV07XG4gICAgICB9XG4gICAgICBuZXdEYXRhWzldID0gYXJpdHkgPT0gbnVsbFxuICAgICAgICA/IChpc0JpbmRLZXkgPyAwIDogZnVuYy5sZW5ndGgpXG4gICAgICAgIDogKG5hdGl2ZU1heChhcml0eSAtIGxlbmd0aCwgMCkgfHwgMCk7XG5cbiAgICAgIGlmIChiaXRtYXNrID09IEJJTkRfRkxBRykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gY3JlYXRlQmluZFdyYXBwZXIobmV3RGF0YVswXSwgbmV3RGF0YVsyXSk7XG4gICAgICB9IGVsc2UgaWYgKChiaXRtYXNrID09IFBBUlRJQUxfRkxBRyB8fCBiaXRtYXNrID09IChCSU5EX0ZMQUcgfCBQQVJUSUFMX0ZMQUcpKSAmJiAhbmV3RGF0YVs0XS5sZW5ndGgpIHtcbiAgICAgICAgcmVzdWx0ID0gY3JlYXRlUGFydGlhbFdyYXBwZXIuYXBwbHkodW5kZWZpbmVkLCBuZXdEYXRhKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdCA9IGNyZWF0ZUh5YnJpZFdyYXBwZXIuYXBwbHkodW5kZWZpbmVkLCBuZXdEYXRhKTtcbiAgICAgIH1cbiAgICAgIHZhciBzZXR0ZXIgPSBkYXRhID8gYmFzZVNldERhdGEgOiBzZXREYXRhO1xuICAgICAgcmV0dXJuIHNldHRlcihyZXN1bHQsIG5ld0RhdGEpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUlzRXF1YWxEZWVwYCBmb3IgYXJyYXlzIHdpdGggc3VwcG9ydCBmb3JcbiAgICAgKiBwYXJ0aWFsIGRlZXAgY29tcGFyaXNvbnMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBjb21wYXJlLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IG90aGVyIFRoZSBvdGhlciBhcnJheSB0byBjb21wYXJlLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGVxdWFsRnVuYyBUaGUgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIGVxdWl2YWxlbnRzIG9mIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY3VzdG9taXplcl0gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpbmcgYXJyYXlzLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzTG9vc2VdIFNwZWNpZnkgcGVyZm9ybWluZyBwYXJ0aWFsIGNvbXBhcmlzb25zLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0FdIFRyYWNrcyB0cmF2ZXJzZWQgYHZhbHVlYCBvYmplY3RzLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0JdIFRyYWNrcyB0cmF2ZXJzZWQgYG90aGVyYCBvYmplY3RzLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYXJyYXlzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gZXF1YWxBcnJheXMoYXJyYXksIG90aGVyLCBlcXVhbEZ1bmMsIGN1c3RvbWl6ZXIsIGlzTG9vc2UsIHN0YWNrQSwgc3RhY2tCKSB7XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBhcnJMZW5ndGggPSBhcnJheS5sZW5ndGgsXG4gICAgICAgICAgb3RoTGVuZ3RoID0gb3RoZXIubGVuZ3RoO1xuXG4gICAgICBpZiAoYXJyTGVuZ3RoICE9IG90aExlbmd0aCAmJiAhKGlzTG9vc2UgJiYgb3RoTGVuZ3RoID4gYXJyTGVuZ3RoKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICAvLyBJZ25vcmUgbm9uLWluZGV4IHByb3BlcnRpZXMuXG4gICAgICB3aGlsZSAoKytpbmRleCA8IGFyckxlbmd0aCkge1xuICAgICAgICB2YXIgYXJyVmFsdWUgPSBhcnJheVtpbmRleF0sXG4gICAgICAgICAgICBvdGhWYWx1ZSA9IG90aGVyW2luZGV4XSxcbiAgICAgICAgICAgIHJlc3VsdCA9IGN1c3RvbWl6ZXIgPyBjdXN0b21pemVyKGlzTG9vc2UgPyBvdGhWYWx1ZSA6IGFyclZhbHVlLCBpc0xvb3NlID8gYXJyVmFsdWUgOiBvdGhWYWx1ZSwgaW5kZXgpIDogdW5kZWZpbmVkO1xuXG4gICAgICAgIGlmIChyZXN1bHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUmVjdXJzaXZlbHkgY29tcGFyZSBhcnJheXMgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKS5cbiAgICAgICAgaWYgKGlzTG9vc2UpIHtcbiAgICAgICAgICBpZiAoIWFycmF5U29tZShvdGhlciwgZnVuY3Rpb24ob3RoVmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXJyVmFsdWUgPT09IG90aFZhbHVlIHx8IGVxdWFsRnVuYyhhcnJWYWx1ZSwgb3RoVmFsdWUsIGN1c3RvbWl6ZXIsIGlzTG9vc2UsIHN0YWNrQSwgc3RhY2tCKTtcbiAgICAgICAgICAgICAgfSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoIShhcnJWYWx1ZSA9PT0gb3RoVmFsdWUgfHwgZXF1YWxGdW5jKGFyclZhbHVlLCBvdGhWYWx1ZSwgY3VzdG9taXplciwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpKSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlSXNFcXVhbERlZXBgIGZvciBjb21wYXJpbmcgb2JqZWN0cyBvZlxuICAgICAqIHRoZSBzYW1lIGB0b1N0cmluZ1RhZ2AuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVGhpcyBmdW5jdGlvbiBvbmx5IHN1cHBvcnRzIGNvbXBhcmluZyB2YWx1ZXMgd2l0aCB0YWdzIG9mXG4gICAgICogYEJvb2xlYW5gLCBgRGF0ZWAsIGBFcnJvcmAsIGBOdW1iZXJgLCBgUmVnRXhwYCwgb3IgYFN0cmluZ2AuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjb21wYXJlLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvdGhlciBUaGUgb3RoZXIgb2JqZWN0IHRvIGNvbXBhcmUuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRhZyBUaGUgYHRvU3RyaW5nVGFnYCBvZiB0aGUgb2JqZWN0cyB0byBjb21wYXJlLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgb2JqZWN0cyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGVxdWFsQnlUYWcob2JqZWN0LCBvdGhlciwgdGFnKSB7XG4gICAgICBzd2l0Y2ggKHRhZykge1xuICAgICAgICBjYXNlIGJvb2xUYWc6XG4gICAgICAgIGNhc2UgZGF0ZVRhZzpcbiAgICAgICAgICAvLyBDb2VyY2UgZGF0ZXMgYW5kIGJvb2xlYW5zIHRvIG51bWJlcnMsIGRhdGVzIHRvIG1pbGxpc2Vjb25kcyBhbmQgYm9vbGVhbnNcbiAgICAgICAgICAvLyB0byBgMWAgb3IgYDBgIHRyZWF0aW5nIGludmFsaWQgZGF0ZXMgY29lcmNlZCB0byBgTmFOYCBhcyBub3QgZXF1YWwuXG4gICAgICAgICAgcmV0dXJuICtvYmplY3QgPT0gK290aGVyO1xuXG4gICAgICAgIGNhc2UgZXJyb3JUYWc6XG4gICAgICAgICAgcmV0dXJuIG9iamVjdC5uYW1lID09IG90aGVyLm5hbWUgJiYgb2JqZWN0Lm1lc3NhZ2UgPT0gb3RoZXIubWVzc2FnZTtcblxuICAgICAgICBjYXNlIG51bWJlclRhZzpcbiAgICAgICAgICAvLyBUcmVhdCBgTmFOYCB2cy4gYE5hTmAgYXMgZXF1YWwuXG4gICAgICAgICAgcmV0dXJuIChvYmplY3QgIT0gK29iamVjdClcbiAgICAgICAgICAgID8gb3RoZXIgIT0gK290aGVyXG4gICAgICAgICAgICA6IG9iamVjdCA9PSArb3RoZXI7XG5cbiAgICAgICAgY2FzZSByZWdleHBUYWc6XG4gICAgICAgIGNhc2Ugc3RyaW5nVGFnOlxuICAgICAgICAgIC8vIENvZXJjZSByZWdleGVzIHRvIHN0cmluZ3MgYW5kIHRyZWF0IHN0cmluZ3MgcHJpbWl0aXZlcyBhbmQgc3RyaW5nXG4gICAgICAgICAgLy8gb2JqZWN0cyBhcyBlcXVhbC4gU2VlIGh0dHBzOi8vZXM1LmdpdGh1Yi5pby8jeDE1LjEwLjYuNCBmb3IgbW9yZSBkZXRhaWxzLlxuICAgICAgICAgIHJldHVybiBvYmplY3QgPT0gKG90aGVyICsgJycpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUlzRXF1YWxEZWVwYCBmb3Igb2JqZWN0cyB3aXRoIHN1cHBvcnQgZm9yXG4gICAgICogcGFydGlhbCBkZWVwIGNvbXBhcmlzb25zLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gY29tcGFyZS5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3RoZXIgVGhlIG90aGVyIG9iamVjdCB0byBjb21wYXJlLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGVxdWFsRnVuYyBUaGUgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIGVxdWl2YWxlbnRzIG9mIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY3VzdG9taXplcl0gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpbmcgdmFsdWVzLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzTG9vc2VdIFNwZWNpZnkgcGVyZm9ybWluZyBwYXJ0aWFsIGNvbXBhcmlzb25zLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0FdIFRyYWNrcyB0cmF2ZXJzZWQgYHZhbHVlYCBvYmplY3RzLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0JdIFRyYWNrcyB0cmF2ZXJzZWQgYG90aGVyYCBvYmplY3RzLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgb2JqZWN0cyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGVxdWFsT2JqZWN0cyhvYmplY3QsIG90aGVyLCBlcXVhbEZ1bmMsIGN1c3RvbWl6ZXIsIGlzTG9vc2UsIHN0YWNrQSwgc3RhY2tCKSB7XG4gICAgICB2YXIgb2JqUHJvcHMgPSBrZXlzKG9iamVjdCksXG4gICAgICAgICAgb2JqTGVuZ3RoID0gb2JqUHJvcHMubGVuZ3RoLFxuICAgICAgICAgIG90aFByb3BzID0ga2V5cyhvdGhlciksXG4gICAgICAgICAgb3RoTGVuZ3RoID0gb3RoUHJvcHMubGVuZ3RoO1xuXG4gICAgICBpZiAob2JqTGVuZ3RoICE9IG90aExlbmd0aCAmJiAhaXNMb29zZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICB2YXIgaW5kZXggPSBvYmpMZW5ndGg7XG4gICAgICB3aGlsZSAoaW5kZXgtLSkge1xuICAgICAgICB2YXIga2V5ID0gb2JqUHJvcHNbaW5kZXhdO1xuICAgICAgICBpZiAoIShpc0xvb3NlID8ga2V5IGluIG90aGVyIDogaGFzT3duUHJvcGVydHkuY2FsbChvdGhlciwga2V5KSkpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHZhciBza2lwQ3RvciA9IGlzTG9vc2U7XG4gICAgICB3aGlsZSAoKytpbmRleCA8IG9iakxlbmd0aCkge1xuICAgICAgICBrZXkgPSBvYmpQcm9wc1tpbmRleF07XG4gICAgICAgIHZhciBvYmpWYWx1ZSA9IG9iamVjdFtrZXldLFxuICAgICAgICAgICAgb3RoVmFsdWUgPSBvdGhlcltrZXldLFxuICAgICAgICAgICAgcmVzdWx0ID0gY3VzdG9taXplciA/IGN1c3RvbWl6ZXIoaXNMb29zZSA/IG90aFZhbHVlIDogb2JqVmFsdWUsIGlzTG9vc2U/IG9ialZhbHVlIDogb3RoVmFsdWUsIGtleSkgOiB1bmRlZmluZWQ7XG5cbiAgICAgICAgLy8gUmVjdXJzaXZlbHkgY29tcGFyZSBvYmplY3RzIChzdXNjZXB0aWJsZSB0byBjYWxsIHN0YWNrIGxpbWl0cykuXG4gICAgICAgIGlmICghKHJlc3VsdCA9PT0gdW5kZWZpbmVkID8gZXF1YWxGdW5jKG9ialZhbHVlLCBvdGhWYWx1ZSwgY3VzdG9taXplciwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpIDogcmVzdWx0KSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBza2lwQ3RvciB8fCAoc2tpcEN0b3IgPSBrZXkgPT0gJ2NvbnN0cnVjdG9yJyk7XG4gICAgICB9XG4gICAgICBpZiAoIXNraXBDdG9yKSB7XG4gICAgICAgIHZhciBvYmpDdG9yID0gb2JqZWN0LmNvbnN0cnVjdG9yLFxuICAgICAgICAgICAgb3RoQ3RvciA9IG90aGVyLmNvbnN0cnVjdG9yO1xuXG4gICAgICAgIC8vIE5vbiBgT2JqZWN0YCBvYmplY3QgaW5zdGFuY2VzIHdpdGggZGlmZmVyZW50IGNvbnN0cnVjdG9ycyBhcmUgbm90IGVxdWFsLlxuICAgICAgICBpZiAob2JqQ3RvciAhPSBvdGhDdG9yICYmXG4gICAgICAgICAgICAoJ2NvbnN0cnVjdG9yJyBpbiBvYmplY3QgJiYgJ2NvbnN0cnVjdG9yJyBpbiBvdGhlcikgJiZcbiAgICAgICAgICAgICEodHlwZW9mIG9iakN0b3IgPT0gJ2Z1bmN0aW9uJyAmJiBvYmpDdG9yIGluc3RhbmNlb2Ygb2JqQ3RvciAmJlxuICAgICAgICAgICAgICB0eXBlb2Ygb3RoQ3RvciA9PSAnZnVuY3Rpb24nICYmIG90aEN0b3IgaW5zdGFuY2VvZiBvdGhDdG9yKSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgYXBwcm9wcmlhdGUgXCJjYWxsYmFja1wiIGZ1bmN0aW9uLiBJZiB0aGUgYF8uY2FsbGJhY2tgIG1ldGhvZCBpc1xuICAgICAqIGN1c3RvbWl6ZWQgdGhpcyBmdW5jdGlvbiByZXR1cm5zIHRoZSBjdXN0b20gbWV0aG9kLCBvdGhlcndpc2UgaXQgcmV0dXJuc1xuICAgICAqIHRoZSBgYmFzZUNhbGxiYWNrYCBmdW5jdGlvbi4gSWYgYXJndW1lbnRzIGFyZSBwcm92aWRlZCB0aGUgY2hvc2VuIGZ1bmN0aW9uXG4gICAgICogaXMgaW52b2tlZCB3aXRoIHRoZW0gYW5kIGl0cyByZXN1bHQgaXMgcmV0dXJuZWQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgY2hvc2VuIGZ1bmN0aW9uIG9yIGl0cyByZXN1bHQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0Q2FsbGJhY2soZnVuYywgdGhpc0FyZywgYXJnQ291bnQpIHtcbiAgICAgIHZhciByZXN1bHQgPSBsb2Rhc2guY2FsbGJhY2sgfHwgY2FsbGJhY2s7XG4gICAgICByZXN1bHQgPSByZXN1bHQgPT09IGNhbGxiYWNrID8gYmFzZUNhbGxiYWNrIDogcmVzdWx0O1xuICAgICAgcmV0dXJuIGFyZ0NvdW50ID8gcmVzdWx0KGZ1bmMsIHRoaXNBcmcsIGFyZ0NvdW50KSA6IHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIG1ldGFkYXRhIGZvciBgZnVuY2AuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHF1ZXJ5LlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBtZXRhZGF0YSBmb3IgYGZ1bmNgLlxuICAgICAqL1xuICAgIHZhciBnZXREYXRhID0gIW1ldGFNYXAgPyBub29wIDogZnVuY3Rpb24oZnVuYykge1xuICAgICAgcmV0dXJuIG1ldGFNYXAuZ2V0KGZ1bmMpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBuYW1lIG9mIGBmdW5jYC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gcXVlcnkuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgZnVuY3Rpb24gbmFtZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRGdW5jTmFtZShmdW5jKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gZnVuYy5uYW1lLFxuICAgICAgICAgIGFycmF5ID0gcmVhbE5hbWVzW3Jlc3VsdF0sXG4gICAgICAgICAgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwO1xuXG4gICAgICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICAgICAgdmFyIGRhdGEgPSBhcnJheVtsZW5ndGhdLFxuICAgICAgICAgICAgb3RoZXJGdW5jID0gZGF0YS5mdW5jO1xuICAgICAgICBpZiAob3RoZXJGdW5jID09IG51bGwgfHwgb3RoZXJGdW5jID09IGZ1bmMpIHtcbiAgICAgICAgICByZXR1cm4gZGF0YS5uYW1lO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGFwcHJvcHJpYXRlIFwiaW5kZXhPZlwiIGZ1bmN0aW9uLiBJZiB0aGUgYF8uaW5kZXhPZmAgbWV0aG9kIGlzXG4gICAgICogY3VzdG9taXplZCB0aGlzIGZ1bmN0aW9uIHJldHVybnMgdGhlIGN1c3RvbSBtZXRob2QsIG90aGVyd2lzZSBpdCByZXR1cm5zXG4gICAgICogdGhlIGBiYXNlSW5kZXhPZmAgZnVuY3Rpb24uIElmIGFyZ3VtZW50cyBhcmUgcHJvdmlkZWQgdGhlIGNob3NlbiBmdW5jdGlvblxuICAgICAqIGlzIGludm9rZWQgd2l0aCB0aGVtIGFuZCBpdHMgcmVzdWx0IGlzIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb258bnVtYmVyfSBSZXR1cm5zIHRoZSBjaG9zZW4gZnVuY3Rpb24gb3IgaXRzIHJlc3VsdC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRJbmRleE9mKGNvbGxlY3Rpb24sIHRhcmdldCwgZnJvbUluZGV4KSB7XG4gICAgICB2YXIgcmVzdWx0ID0gbG9kYXNoLmluZGV4T2YgfHwgaW5kZXhPZjtcbiAgICAgIHJlc3VsdCA9IHJlc3VsdCA9PT0gaW5kZXhPZiA/IGJhc2VJbmRleE9mIDogcmVzdWx0O1xuICAgICAgcmV0dXJuIGNvbGxlY3Rpb24gPyByZXN1bHQoY29sbGVjdGlvbiwgdGFyZ2V0LCBmcm9tSW5kZXgpIDogcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIFwibGVuZ3RoXCIgcHJvcGVydHkgdmFsdWUgb2YgYG9iamVjdGAuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHRvIGF2b2lkIGEgW0pJVCBidWddKGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xNDI3OTIpXG4gICAgICogdGhhdCBhZmZlY3RzIFNhZmFyaSBvbiBhdCBsZWFzdCBpT1MgOC4xLTguMyBBUk02NC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBcImxlbmd0aFwiIHZhbHVlLlxuICAgICAqL1xuICAgIHZhciBnZXRMZW5ndGggPSBiYXNlUHJvcGVydHkoJ2xlbmd0aCcpO1xuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgcHJvcGVyeSBuYW1lcywgdmFsdWVzLCBhbmQgY29tcGFyZSBmbGFncyBvZiBgb2JqZWN0YC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbWF0Y2ggZGF0YSBvZiBgb2JqZWN0YC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRNYXRjaERhdGEob2JqZWN0KSB7XG4gICAgICB2YXIgcmVzdWx0ID0gcGFpcnMob2JqZWN0KSxcbiAgICAgICAgICBsZW5ndGggPSByZXN1bHQubGVuZ3RoO1xuXG4gICAgICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICAgICAgcmVzdWx0W2xlbmd0aF1bMl0gPSBpc1N0cmljdENvbXBhcmFibGUocmVzdWx0W2xlbmd0aF1bMV0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBuYXRpdmUgZnVuY3Rpb24gYXQgYGtleWAgb2YgYG9iamVjdGAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIG1ldGhvZCB0byBnZXQuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGZ1bmN0aW9uIGlmIGl0J3MgbmF0aXZlLCBlbHNlIGB1bmRlZmluZWRgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldE5hdGl2ZShvYmplY3QsIGtleSkge1xuICAgICAgdmFyIHZhbHVlID0gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBvYmplY3Rba2V5XTtcbiAgICAgIHJldHVybiBpc05hdGl2ZSh2YWx1ZSkgPyB2YWx1ZSA6IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSB2aWV3LCBhcHBseWluZyBhbnkgYHRyYW5zZm9ybXNgIHRvIHRoZSBgc3RhcnRgIGFuZCBgZW5kYCBwb3NpdGlvbnMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydCBUaGUgc3RhcnQgb2YgdGhlIHZpZXcuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGVuZCBUaGUgZW5kIG9mIHRoZSB2aWV3LlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHRyYW5zZm9ybXMgVGhlIHRyYW5zZm9ybWF0aW9ucyB0byBhcHBseSB0byB0aGUgdmlldy5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBgc3RhcnRgIGFuZCBgZW5kYFxuICAgICAqICBwb3NpdGlvbnMgb2YgdGhlIHZpZXcuXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0VmlldyhzdGFydCwgZW5kLCB0cmFuc2Zvcm1zKSB7XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSB0cmFuc2Zvcm1zLmxlbmd0aDtcblxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgdmFyIGRhdGEgPSB0cmFuc2Zvcm1zW2luZGV4XSxcbiAgICAgICAgICAgIHNpemUgPSBkYXRhLnNpemU7XG5cbiAgICAgICAgc3dpdGNoIChkYXRhLnR5cGUpIHtcbiAgICAgICAgICBjYXNlICdkcm9wJzogICAgICBzdGFydCArPSBzaXplOyBicmVhaztcbiAgICAgICAgICBjYXNlICdkcm9wUmlnaHQnOiBlbmQgLT0gc2l6ZTsgYnJlYWs7XG4gICAgICAgICAgY2FzZSAndGFrZSc6ICAgICAgZW5kID0gbmF0aXZlTWluKGVuZCwgc3RhcnQgKyBzaXplKTsgYnJlYWs7XG4gICAgICAgICAgY2FzZSAndGFrZVJpZ2h0Jzogc3RhcnQgPSBuYXRpdmVNYXgoc3RhcnQsIGVuZCAtIHNpemUpOyBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHsgJ3N0YXJ0Jzogc3RhcnQsICdlbmQnOiBlbmQgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplcyBhbiBhcnJheSBjbG9uZS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGNsb25lLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgaW5pdGlhbGl6ZWQgY2xvbmUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gaW5pdENsb25lQXJyYXkoYXJyYXkpIHtcbiAgICAgIHZhciBsZW5ndGggPSBhcnJheS5sZW5ndGgsXG4gICAgICAgICAgcmVzdWx0ID0gbmV3IGFycmF5LmNvbnN0cnVjdG9yKGxlbmd0aCk7XG5cbiAgICAgIC8vIEFkZCBhcnJheSBwcm9wZXJ0aWVzIGFzc2lnbmVkIGJ5IGBSZWdFeHAjZXhlY2AuXG4gICAgICBpZiAobGVuZ3RoICYmIHR5cGVvZiBhcnJheVswXSA9PSAnc3RyaW5nJyAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKGFycmF5LCAnaW5kZXgnKSkge1xuICAgICAgICByZXN1bHQuaW5kZXggPSBhcnJheS5pbmRleDtcbiAgICAgICAgcmVzdWx0LmlucHV0ID0gYXJyYXkuaW5wdXQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemVzIGFuIG9iamVjdCBjbG9uZS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGNsb25lLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGluaXRpYWxpemVkIGNsb25lLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGluaXRDbG9uZU9iamVjdChvYmplY3QpIHtcbiAgICAgIHZhciBDdG9yID0gb2JqZWN0LmNvbnN0cnVjdG9yO1xuICAgICAgaWYgKCEodHlwZW9mIEN0b3IgPT0gJ2Z1bmN0aW9uJyAmJiBDdG9yIGluc3RhbmNlb2YgQ3RvcikpIHtcbiAgICAgICAgQ3RvciA9IE9iamVjdDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXcgQ3RvcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplcyBhbiBvYmplY3QgY2xvbmUgYmFzZWQgb24gaXRzIGB0b1N0cmluZ1RhZ2AuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVGhpcyBmdW5jdGlvbiBvbmx5IHN1cHBvcnRzIGNsb25pbmcgdmFsdWVzIHdpdGggdGFncyBvZlxuICAgICAqIGBCb29sZWFuYCwgYERhdGVgLCBgRXJyb3JgLCBgTnVtYmVyYCwgYFJlZ0V4cGAsIG9yIGBTdHJpbmdgLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gY2xvbmUuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRhZyBUaGUgYHRvU3RyaW5nVGFnYCBvZiB0aGUgb2JqZWN0IHRvIGNsb25lLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzRGVlcF0gU3BlY2lmeSBhIGRlZXAgY2xvbmUuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgaW5pdGlhbGl6ZWQgY2xvbmUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gaW5pdENsb25lQnlUYWcob2JqZWN0LCB0YWcsIGlzRGVlcCkge1xuICAgICAgdmFyIEN0b3IgPSBvYmplY3QuY29uc3RydWN0b3I7XG4gICAgICBzd2l0Y2ggKHRhZykge1xuICAgICAgICBjYXNlIGFycmF5QnVmZmVyVGFnOlxuICAgICAgICAgIHJldHVybiBidWZmZXJDbG9uZShvYmplY3QpO1xuXG4gICAgICAgIGNhc2UgYm9vbFRhZzpcbiAgICAgICAgY2FzZSBkYXRlVGFnOlxuICAgICAgICAgIHJldHVybiBuZXcgQ3Rvcigrb2JqZWN0KTtcblxuICAgICAgICBjYXNlIGZsb2F0MzJUYWc6IGNhc2UgZmxvYXQ2NFRhZzpcbiAgICAgICAgY2FzZSBpbnQ4VGFnOiBjYXNlIGludDE2VGFnOiBjYXNlIGludDMyVGFnOlxuICAgICAgICBjYXNlIHVpbnQ4VGFnOiBjYXNlIHVpbnQ4Q2xhbXBlZFRhZzogY2FzZSB1aW50MTZUYWc6IGNhc2UgdWludDMyVGFnOlxuICAgICAgICAgIHZhciBidWZmZXIgPSBvYmplY3QuYnVmZmVyO1xuICAgICAgICAgIHJldHVybiBuZXcgQ3Rvcihpc0RlZXAgPyBidWZmZXJDbG9uZShidWZmZXIpIDogYnVmZmVyLCBvYmplY3QuYnl0ZU9mZnNldCwgb2JqZWN0Lmxlbmd0aCk7XG5cbiAgICAgICAgY2FzZSBudW1iZXJUYWc6XG4gICAgICAgIGNhc2Ugc3RyaW5nVGFnOlxuICAgICAgICAgIHJldHVybiBuZXcgQ3RvcihvYmplY3QpO1xuXG4gICAgICAgIGNhc2UgcmVnZXhwVGFnOlxuICAgICAgICAgIHZhciByZXN1bHQgPSBuZXcgQ3RvcihvYmplY3Quc291cmNlLCByZUZsYWdzLmV4ZWMob2JqZWN0KSk7XG4gICAgICAgICAgcmVzdWx0Lmxhc3RJbmRleCA9IG9iamVjdC5sYXN0SW5kZXg7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEludm9rZXMgdGhlIG1ldGhvZCBhdCBgcGF0aGAgb24gYG9iamVjdGAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAgICAgKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgbWV0aG9kIHRvIGludm9rZS5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcmdzIFRoZSBhcmd1bWVudHMgdG8gaW52b2tlIHRoZSBtZXRob2Qgd2l0aC5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcmVzdWx0IG9mIHRoZSBpbnZva2VkIG1ldGhvZC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpbnZva2VQYXRoKG9iamVjdCwgcGF0aCwgYXJncykge1xuICAgICAgaWYgKG9iamVjdCAhPSBudWxsICYmICFpc0tleShwYXRoLCBvYmplY3QpKSB7XG4gICAgICAgIHBhdGggPSB0b1BhdGgocGF0aCk7XG4gICAgICAgIG9iamVjdCA9IHBhdGgubGVuZ3RoID09IDEgPyBvYmplY3QgOiBiYXNlR2V0KG9iamVjdCwgYmFzZVNsaWNlKHBhdGgsIDAsIC0xKSk7XG4gICAgICAgIHBhdGggPSBsYXN0KHBhdGgpO1xuICAgICAgfVxuICAgICAgdmFyIGZ1bmMgPSBvYmplY3QgPT0gbnVsbCA/IG9iamVjdCA6IG9iamVjdFtwYXRoXTtcbiAgICAgIHJldHVybiBmdW5jID09IG51bGwgPyB1bmRlZmluZWQgOiBmdW5jLmFwcGx5KG9iamVjdCwgYXJncyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYXJyYXktbGlrZS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYXJyYXktbGlrZSwgZWxzZSBgZmFsc2VgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzQXJyYXlMaWtlKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdmFsdWUgIT0gbnVsbCAmJiBpc0xlbmd0aChnZXRMZW5ndGgodmFsdWUpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGFycmF5LWxpa2UgaW5kZXguXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoPU1BWF9TQUZFX0lOVEVHRVJdIFRoZSB1cHBlciBib3VuZHMgb2YgYSB2YWxpZCBpbmRleC5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGluZGV4LCBlbHNlIGBmYWxzZWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNJbmRleCh2YWx1ZSwgbGVuZ3RoKSB7XG4gICAgICB2YWx1ZSA9ICh0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgfHwgcmVJc1VpbnQudGVzdCh2YWx1ZSkpID8gK3ZhbHVlIDogLTE7XG4gICAgICBsZW5ndGggPSBsZW5ndGggPT0gbnVsbCA/IE1BWF9TQUZFX0lOVEVHRVIgOiBsZW5ndGg7XG4gICAgICByZXR1cm4gdmFsdWUgPiAtMSAmJiB2YWx1ZSAlIDEgPT0gMCAmJiB2YWx1ZSA8IGxlbmd0aDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgdGhlIHByb3ZpZGVkIGFyZ3VtZW50cyBhcmUgZnJvbSBhbiBpdGVyYXRlZSBjYWxsLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSBwb3RlbnRpYWwgaXRlcmF0ZWUgdmFsdWUgYXJndW1lbnQuXG4gICAgICogQHBhcmFtIHsqfSBpbmRleCBUaGUgcG90ZW50aWFsIGl0ZXJhdGVlIGluZGV4IG9yIGtleSBhcmd1bWVudC5cbiAgICAgKiBAcGFyYW0geyp9IG9iamVjdCBUaGUgcG90ZW50aWFsIGl0ZXJhdGVlIG9iamVjdCBhcmd1bWVudC5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGFyZ3VtZW50cyBhcmUgZnJvbSBhbiBpdGVyYXRlZSBjYWxsLCBlbHNlIGBmYWxzZWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNJdGVyYXRlZUNhbGwodmFsdWUsIGluZGV4LCBvYmplY3QpIHtcbiAgICAgIGlmICghaXNPYmplY3Qob2JqZWN0KSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICB2YXIgdHlwZSA9IHR5cGVvZiBpbmRleDtcbiAgICAgIGlmICh0eXBlID09ICdudW1iZXInXG4gICAgICAgICAgPyAoaXNBcnJheUxpa2Uob2JqZWN0KSAmJiBpc0luZGV4KGluZGV4LCBvYmplY3QubGVuZ3RoKSlcbiAgICAgICAgICA6ICh0eXBlID09ICdzdHJpbmcnICYmIGluZGV4IGluIG9iamVjdCkpIHtcbiAgICAgICAgdmFyIG90aGVyID0gb2JqZWN0W2luZGV4XTtcbiAgICAgICAgcmV0dXJuIHZhbHVlID09PSB2YWx1ZSA/ICh2YWx1ZSA9PT0gb3RoZXIpIDogKG90aGVyICE9PSBvdGhlcik7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBwcm9wZXJ0eSBuYW1lIGFuZCBub3QgYSBwcm9wZXJ0eSBwYXRoLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29iamVjdF0gVGhlIG9iamVjdCB0byBxdWVyeSBrZXlzIG9uLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgcHJvcGVydHkgbmFtZSwgZWxzZSBgZmFsc2VgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzS2V5KHZhbHVlLCBvYmplY3QpIHtcbiAgICAgIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICAgICAgaWYgKCh0eXBlID09ICdzdHJpbmcnICYmIHJlSXNQbGFpblByb3AudGVzdCh2YWx1ZSkpIHx8IHR5cGUgPT0gJ251bWJlcicpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgdmFyIHJlc3VsdCA9ICFyZUlzRGVlcFByb3AudGVzdCh2YWx1ZSk7XG4gICAgICByZXR1cm4gcmVzdWx0IHx8IChvYmplY3QgIT0gbnVsbCAmJiB2YWx1ZSBpbiB0b09iamVjdChvYmplY3QpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYGZ1bmNgIGhhcyBhIGxhenkgY291bnRlcnBhcnQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgZnVuY2AgaGFzIGEgbGF6eSBjb3VudGVycGFydCwgZWxzZSBgZmFsc2VgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzTGF6aWFibGUoZnVuYykge1xuICAgICAgdmFyIGZ1bmNOYW1lID0gZ2V0RnVuY05hbWUoZnVuYyk7XG4gICAgICBpZiAoIShmdW5jTmFtZSBpbiBMYXp5V3JhcHBlci5wcm90b3R5cGUpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHZhciBvdGhlciA9IGxvZGFzaFtmdW5jTmFtZV07XG4gICAgICBpZiAoZnVuYyA9PT0gb3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICB2YXIgZGF0YSA9IGdldERhdGEob3RoZXIpO1xuICAgICAgcmV0dXJuICEhZGF0YSAmJiBmdW5jID09PSBkYXRhWzBdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgYXJyYXktbGlrZSBsZW5ndGguXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVGhpcyBmdW5jdGlvbiBpcyBiYXNlZCBvbiBbYFRvTGVuZ3RoYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtdG9sZW5ndGgpLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGxlbmd0aCwgZWxzZSBgZmFsc2VgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzTGVuZ3RoKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdudW1iZXInICYmIHZhbHVlID4gLTEgJiYgdmFsdWUgJSAxID09IDAgJiYgdmFsdWUgPD0gTUFYX1NBRkVfSU5URUdFUjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBzdWl0YWJsZSBmb3Igc3RyaWN0IGVxdWFsaXR5IGNvbXBhcmlzb25zLCBpLmUuIGA9PT1gLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpZiBzdWl0YWJsZSBmb3Igc3RyaWN0XG4gICAgICogIGVxdWFsaXR5IGNvbXBhcmlzb25zLCBlbHNlIGBmYWxzZWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNTdHJpY3RDb21wYXJhYmxlKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdmFsdWUgPT09IHZhbHVlICYmICFpc09iamVjdCh2YWx1ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWVyZ2VzIHRoZSBmdW5jdGlvbiBtZXRhZGF0YSBvZiBgc291cmNlYCBpbnRvIGBkYXRhYC5cbiAgICAgKlxuICAgICAqIE1lcmdpbmcgbWV0YWRhdGEgcmVkdWNlcyB0aGUgbnVtYmVyIG9mIHdyYXBwZXJzIHJlcXVpcmVkIHRvIGludm9rZSBhIGZ1bmN0aW9uLlxuICAgICAqIFRoaXMgaXMgcG9zc2libGUgYmVjYXVzZSBtZXRob2RzIGxpa2UgYF8uYmluZGAsIGBfLmN1cnJ5YCwgYW5kIGBfLnBhcnRpYWxgXG4gICAgICogbWF5IGJlIGFwcGxpZWQgcmVnYXJkbGVzcyBvZiBleGVjdXRpb24gb3JkZXIuIE1ldGhvZHMgbGlrZSBgXy5hcnlgIGFuZCBgXy5yZWFyZ2BcbiAgICAgKiBhdWdtZW50IGZ1bmN0aW9uIGFyZ3VtZW50cywgbWFraW5nIHRoZSBvcmRlciBpbiB3aGljaCB0aGV5IGFyZSBleGVjdXRlZCBpbXBvcnRhbnQsXG4gICAgICogcHJldmVudGluZyB0aGUgbWVyZ2luZyBvZiBtZXRhZGF0YS4gSG93ZXZlciwgd2UgbWFrZSBhbiBleGNlcHRpb24gZm9yIGEgc2FmZVxuICAgICAqIGNvbW1vbiBjYXNlIHdoZXJlIGN1cnJpZWQgZnVuY3Rpb25zIGhhdmUgYF8uYXJ5YCBhbmQgb3IgYF8ucmVhcmdgIGFwcGxpZWQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGRhdGEgVGhlIGRlc3RpbmF0aW9uIG1ldGFkYXRhLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHNvdXJjZSBUaGUgc291cmNlIG1ldGFkYXRhLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBgZGF0YWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gbWVyZ2VEYXRhKGRhdGEsIHNvdXJjZSkge1xuICAgICAgdmFyIGJpdG1hc2sgPSBkYXRhWzFdLFxuICAgICAgICAgIHNyY0JpdG1hc2sgPSBzb3VyY2VbMV0sXG4gICAgICAgICAgbmV3Qml0bWFzayA9IGJpdG1hc2sgfCBzcmNCaXRtYXNrLFxuICAgICAgICAgIGlzQ29tbW9uID0gbmV3Qml0bWFzayA8IEFSWV9GTEFHO1xuXG4gICAgICB2YXIgaXNDb21ibyA9XG4gICAgICAgIChzcmNCaXRtYXNrID09IEFSWV9GTEFHICYmIGJpdG1hc2sgPT0gQ1VSUllfRkxBRykgfHxcbiAgICAgICAgKHNyY0JpdG1hc2sgPT0gQVJZX0ZMQUcgJiYgYml0bWFzayA9PSBSRUFSR19GTEFHICYmIGRhdGFbN10ubGVuZ3RoIDw9IHNvdXJjZVs4XSkgfHxcbiAgICAgICAgKHNyY0JpdG1hc2sgPT0gKEFSWV9GTEFHIHwgUkVBUkdfRkxBRykgJiYgYml0bWFzayA9PSBDVVJSWV9GTEFHKTtcblxuICAgICAgLy8gRXhpdCBlYXJseSBpZiBtZXRhZGF0YSBjYW4ndCBiZSBtZXJnZWQuXG4gICAgICBpZiAoIShpc0NvbW1vbiB8fCBpc0NvbWJvKSkge1xuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgIH1cbiAgICAgIC8vIFVzZSBzb3VyY2UgYHRoaXNBcmdgIGlmIGF2YWlsYWJsZS5cbiAgICAgIGlmIChzcmNCaXRtYXNrICYgQklORF9GTEFHKSB7XG4gICAgICAgIGRhdGFbMl0gPSBzb3VyY2VbMl07XG4gICAgICAgIC8vIFNldCB3aGVuIGN1cnJ5aW5nIGEgYm91bmQgZnVuY3Rpb24uXG4gICAgICAgIG5ld0JpdG1hc2sgfD0gKGJpdG1hc2sgJiBCSU5EX0ZMQUcpID8gMCA6IENVUlJZX0JPVU5EX0ZMQUc7XG4gICAgICB9XG4gICAgICAvLyBDb21wb3NlIHBhcnRpYWwgYXJndW1lbnRzLlxuICAgICAgdmFyIHZhbHVlID0gc291cmNlWzNdO1xuICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgIHZhciBwYXJ0aWFscyA9IGRhdGFbM107XG4gICAgICAgIGRhdGFbM10gPSBwYXJ0aWFscyA/IGNvbXBvc2VBcmdzKHBhcnRpYWxzLCB2YWx1ZSwgc291cmNlWzRdKSA6IGFycmF5Q29weSh2YWx1ZSk7XG4gICAgICAgIGRhdGFbNF0gPSBwYXJ0aWFscyA/IHJlcGxhY2VIb2xkZXJzKGRhdGFbM10sIFBMQUNFSE9MREVSKSA6IGFycmF5Q29weShzb3VyY2VbNF0pO1xuICAgICAgfVxuICAgICAgLy8gQ29tcG9zZSBwYXJ0aWFsIHJpZ2h0IGFyZ3VtZW50cy5cbiAgICAgIHZhbHVlID0gc291cmNlWzVdO1xuICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgIHBhcnRpYWxzID0gZGF0YVs1XTtcbiAgICAgICAgZGF0YVs1XSA9IHBhcnRpYWxzID8gY29tcG9zZUFyZ3NSaWdodChwYXJ0aWFscywgdmFsdWUsIHNvdXJjZVs2XSkgOiBhcnJheUNvcHkodmFsdWUpO1xuICAgICAgICBkYXRhWzZdID0gcGFydGlhbHMgPyByZXBsYWNlSG9sZGVycyhkYXRhWzVdLCBQTEFDRUhPTERFUikgOiBhcnJheUNvcHkoc291cmNlWzZdKTtcbiAgICAgIH1cbiAgICAgIC8vIFVzZSBzb3VyY2UgYGFyZ1Bvc2AgaWYgYXZhaWxhYmxlLlxuICAgICAgdmFsdWUgPSBzb3VyY2VbN107XG4gICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgZGF0YVs3XSA9IGFycmF5Q29weSh2YWx1ZSk7XG4gICAgICB9XG4gICAgICAvLyBVc2Ugc291cmNlIGBhcnlgIGlmIGl0J3Mgc21hbGxlci5cbiAgICAgIGlmIChzcmNCaXRtYXNrICYgQVJZX0ZMQUcpIHtcbiAgICAgICAgZGF0YVs4XSA9IGRhdGFbOF0gPT0gbnVsbCA/IHNvdXJjZVs4XSA6IG5hdGl2ZU1pbihkYXRhWzhdLCBzb3VyY2VbOF0pO1xuICAgICAgfVxuICAgICAgLy8gVXNlIHNvdXJjZSBgYXJpdHlgIGlmIG9uZSBpcyBub3QgcHJvdmlkZWQuXG4gICAgICBpZiAoZGF0YVs5XSA9PSBudWxsKSB7XG4gICAgICAgIGRhdGFbOV0gPSBzb3VyY2VbOV07XG4gICAgICB9XG4gICAgICAvLyBVc2Ugc291cmNlIGBmdW5jYCBhbmQgbWVyZ2UgYml0bWFza3MuXG4gICAgICBkYXRhWzBdID0gc291cmNlWzBdO1xuICAgICAgZGF0YVsxXSA9IG5ld0JpdG1hc2s7XG5cbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVzZWQgYnkgYF8uZGVmYXVsdHNEZWVwYCB0byBjdXN0b21pemUgaXRzIGBfLm1lcmdlYCB1c2UuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Kn0gb2JqZWN0VmFsdWUgVGhlIGRlc3RpbmF0aW9uIG9iamVjdCBwcm9wZXJ0eSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0geyp9IHNvdXJjZVZhbHVlIFRoZSBzb3VyY2Ugb2JqZWN0IHByb3BlcnR5IHZhbHVlLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSB2YWx1ZSB0byBhc3NpZ24gdG8gdGhlIGRlc3RpbmF0aW9uIG9iamVjdC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBtZXJnZURlZmF1bHRzKG9iamVjdFZhbHVlLCBzb3VyY2VWYWx1ZSkge1xuICAgICAgcmV0dXJuIG9iamVjdFZhbHVlID09PSB1bmRlZmluZWQgPyBzb3VyY2VWYWx1ZSA6IG1lcmdlKG9iamVjdFZhbHVlLCBzb3VyY2VWYWx1ZSwgbWVyZ2VEZWZhdWx0cyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBfLnBpY2tgIHdoaWNoIHBpY2tzIGBvYmplY3RgIHByb3BlcnRpZXMgc3BlY2lmaWVkXG4gICAgICogYnkgYHByb3BzYC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgc291cmNlIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBwcm9wcyBUaGUgcHJvcGVydHkgbmFtZXMgdG8gcGljay5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBuZXcgb2JqZWN0LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHBpY2tCeUFycmF5KG9iamVjdCwgcHJvcHMpIHtcbiAgICAgIG9iamVjdCA9IHRvT2JqZWN0KG9iamVjdCk7XG5cbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IHByb3BzLmxlbmd0aCxcbiAgICAgICAgICByZXN1bHQgPSB7fTtcblxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgdmFyIGtleSA9IHByb3BzW2luZGV4XTtcbiAgICAgICAgaWYgKGtleSBpbiBvYmplY3QpIHtcbiAgICAgICAgICByZXN1bHRba2V5XSA9IG9iamVjdFtrZXldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgXy5waWNrYCB3aGljaCBwaWNrcyBgb2JqZWN0YCBwcm9wZXJ0aWVzIGBwcmVkaWNhdGVgXG4gICAgICogcmV0dXJucyB0cnV0aHkgZm9yLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBzb3VyY2Ugb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG5ldyBvYmplY3QuXG4gICAgICovXG4gICAgZnVuY3Rpb24gcGlja0J5Q2FsbGJhY2sob2JqZWN0LCBwcmVkaWNhdGUpIHtcbiAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgIGJhc2VGb3JJbihvYmplY3QsIGZ1bmN0aW9uKHZhbHVlLCBrZXksIG9iamVjdCkge1xuICAgICAgICBpZiAocHJlZGljYXRlKHZhbHVlLCBrZXksIG9iamVjdCkpIHtcbiAgICAgICAgICByZXN1bHRba2V5XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVvcmRlciBgYXJyYXlgIGFjY29yZGluZyB0byB0aGUgc3BlY2lmaWVkIGluZGV4ZXMgd2hlcmUgdGhlIGVsZW1lbnQgYXRcbiAgICAgKiB0aGUgZmlyc3QgaW5kZXggaXMgYXNzaWduZWQgYXMgdGhlIGZpcnN0IGVsZW1lbnQsIHRoZSBlbGVtZW50IGF0XG4gICAgICogdGhlIHNlY29uZCBpbmRleCBpcyBhc3NpZ25lZCBhcyB0aGUgc2Vjb25kIGVsZW1lbnQsIGFuZCBzbyBvbi5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHJlb3JkZXIuXG4gICAgICogQHBhcmFtIHtBcnJheX0gaW5kZXhlcyBUaGUgYXJyYW5nZWQgYXJyYXkgaW5kZXhlcy5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYGFycmF5YC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZW9yZGVyKGFycmF5LCBpbmRleGVzKSB7XG4gICAgICB2YXIgYXJyTGVuZ3RoID0gYXJyYXkubGVuZ3RoLFxuICAgICAgICAgIGxlbmd0aCA9IG5hdGl2ZU1pbihpbmRleGVzLmxlbmd0aCwgYXJyTGVuZ3RoKSxcbiAgICAgICAgICBvbGRBcnJheSA9IGFycmF5Q29weShhcnJheSk7XG5cbiAgICAgIHdoaWxlIChsZW5ndGgtLSkge1xuICAgICAgICB2YXIgaW5kZXggPSBpbmRleGVzW2xlbmd0aF07XG4gICAgICAgIGFycmF5W2xlbmd0aF0gPSBpc0luZGV4KGluZGV4LCBhcnJMZW5ndGgpID8gb2xkQXJyYXlbaW5kZXhdIDogdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFycmF5O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgbWV0YWRhdGEgZm9yIGBmdW5jYC5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBJZiB0aGlzIGZ1bmN0aW9uIGJlY29tZXMgaG90LCBpLmUuIGlzIGludm9rZWQgYSBsb3QgaW4gYSBzaG9ydFxuICAgICAqIHBlcmlvZCBvZiB0aW1lLCBpdCB3aWxsIHRyaXAgaXRzIGJyZWFrZXIgYW5kIHRyYW5zaXRpb24gdG8gYW4gaWRlbnRpdHkgZnVuY3Rpb25cbiAgICAgKiB0byBhdm9pZCBnYXJiYWdlIGNvbGxlY3Rpb24gcGF1c2VzIGluIFY4LiBTZWUgW1Y4IGlzc3VlIDIwNzBdKGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0yMDcwKVxuICAgICAqIGZvciBtb3JlIGRldGFpbHMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGFzc29jaWF0ZSBtZXRhZGF0YSB3aXRoLlxuICAgICAqIEBwYXJhbSB7Kn0gZGF0YSBUaGUgbWV0YWRhdGEuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIGBmdW5jYC5cbiAgICAgKi9cbiAgICB2YXIgc2V0RGF0YSA9IChmdW5jdGlvbigpIHtcbiAgICAgIHZhciBjb3VudCA9IDAsXG4gICAgICAgICAgbGFzdENhbGxlZCA9IDA7XG5cbiAgICAgIHJldHVybiBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgICAgIHZhciBzdGFtcCA9IG5vdygpLFxuICAgICAgICAgICAgcmVtYWluaW5nID0gSE9UX1NQQU4gLSAoc3RhbXAgLSBsYXN0Q2FsbGVkKTtcblxuICAgICAgICBsYXN0Q2FsbGVkID0gc3RhbXA7XG4gICAgICAgIGlmIChyZW1haW5pbmcgPiAwKSB7XG4gICAgICAgICAgaWYgKCsrY291bnQgPj0gSE9UX0NPVU5UKSB7XG4gICAgICAgICAgICByZXR1cm4ga2V5O1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb3VudCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJhc2VTZXREYXRhKGtleSwgdmFsdWUpO1xuICAgICAgfTtcbiAgICB9KCkpO1xuXG4gICAgLyoqXG4gICAgICogQSBmYWxsYmFjayBpbXBsZW1lbnRhdGlvbiBvZiBgT2JqZWN0LmtleXNgIHdoaWNoIGNyZWF0ZXMgYW4gYXJyYXkgb2YgdGhlXG4gICAgICogb3duIGVudW1lcmFibGUgcHJvcGVydHkgbmFtZXMgb2YgYG9iamVjdGAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHNoaW1LZXlzKG9iamVjdCkge1xuICAgICAgdmFyIHByb3BzID0ga2V5c0luKG9iamVjdCksXG4gICAgICAgICAgcHJvcHNMZW5ndGggPSBwcm9wcy5sZW5ndGgsXG4gICAgICAgICAgbGVuZ3RoID0gcHJvcHNMZW5ndGggJiYgb2JqZWN0Lmxlbmd0aDtcblxuICAgICAgdmFyIGFsbG93SW5kZXhlcyA9ICEhbGVuZ3RoICYmIGlzTGVuZ3RoKGxlbmd0aCkgJiZcbiAgICAgICAgKGlzQXJyYXkob2JqZWN0KSB8fCBpc0FyZ3VtZW50cyhvYmplY3QpKTtcblxuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgcmVzdWx0ID0gW107XG5cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgcHJvcHNMZW5ndGgpIHtcbiAgICAgICAgdmFyIGtleSA9IHByb3BzW2luZGV4XTtcbiAgICAgICAgaWYgKChhbGxvd0luZGV4ZXMgJiYgaXNJbmRleChrZXksIGxlbmd0aCkpIHx8IGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBrZXkpKSB7XG4gICAgICAgICAgcmVzdWx0LnB1c2goa2V5KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGFuIGFycmF5LWxpa2Ugb2JqZWN0IGlmIGl0J3Mgbm90IG9uZS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl8T2JqZWN0fSBSZXR1cm5zIHRoZSBhcnJheS1saWtlIG9iamVjdC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB0b0l0ZXJhYmxlKHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgICBpZiAoIWlzQXJyYXlMaWtlKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gdmFsdWVzKHZhbHVlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBpc09iamVjdCh2YWx1ZSkgPyB2YWx1ZSA6IE9iamVjdCh2YWx1ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udmVydHMgYHZhbHVlYCB0byBhbiBvYmplY3QgaWYgaXQncyBub3Qgb25lLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG9iamVjdC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB0b09iamVjdCh2YWx1ZSkge1xuICAgICAgcmV0dXJuIGlzT2JqZWN0KHZhbHVlKSA/IHZhbHVlIDogT2JqZWN0KHZhbHVlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBgdmFsdWVgIHRvIHByb3BlcnR5IHBhdGggYXJyYXkgaWYgaXQncyBub3Qgb25lLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgcHJvcGVydHkgcGF0aCBhcnJheS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB0b1BhdGgodmFsdWUpIHtcbiAgICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9XG4gICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICBiYXNlVG9TdHJpbmcodmFsdWUpLnJlcGxhY2UocmVQcm9wTmFtZSwgZnVuY3Rpb24obWF0Y2gsIG51bWJlciwgcXVvdGUsIHN0cmluZykge1xuICAgICAgICByZXN1bHQucHVzaChxdW90ZSA/IHN0cmluZy5yZXBsYWNlKHJlRXNjYXBlQ2hhciwgJyQxJykgOiAobnVtYmVyIHx8IG1hdGNoKSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGNsb25lIG9mIGB3cmFwcGVyYC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHdyYXBwZXIgVGhlIHdyYXBwZXIgdG8gY2xvbmUuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgY2xvbmVkIHdyYXBwZXIuXG4gICAgICovXG4gICAgZnVuY3Rpb24gd3JhcHBlckNsb25lKHdyYXBwZXIpIHtcbiAgICAgIHJldHVybiB3cmFwcGVyIGluc3RhbmNlb2YgTGF6eVdyYXBwZXJcbiAgICAgICAgPyB3cmFwcGVyLmNsb25lKClcbiAgICAgICAgOiBuZXcgTG9kYXNoV3JhcHBlcih3cmFwcGVyLl9fd3JhcHBlZF9fLCB3cmFwcGVyLl9fY2hhaW5fXywgYXJyYXlDb3B5KHdyYXBwZXIuX19hY3Rpb25zX18pKTtcbiAgICB9XG5cbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIGVsZW1lbnRzIHNwbGl0IGludG8gZ3JvdXBzIHRoZSBsZW5ndGggb2YgYHNpemVgLlxuICAgICAqIElmIGBjb2xsZWN0aW9uYCBjYW4ndCBiZSBzcGxpdCBldmVubHksIHRoZSBmaW5hbCBjaHVuayB3aWxsIGJlIHRoZSByZW1haW5pbmdcbiAgICAgKiBlbGVtZW50cy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBwcm9jZXNzLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbc2l6ZT0xXSBUaGUgbGVuZ3RoIG9mIGVhY2ggY2h1bmsuXG4gICAgICogQHBhcmFtLSB7T2JqZWN0fSBbZ3VhcmRdIEVuYWJsZXMgdXNlIGFzIGEgY2FsbGJhY2sgZm9yIGZ1bmN0aW9ucyBsaWtlIGBfLm1hcGAuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgYXJyYXkgY29udGFpbmluZyBjaHVua3MuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uY2h1bmsoWydhJywgJ2InLCAnYycsICdkJ10sIDIpO1xuICAgICAqIC8vID0+IFtbJ2EnLCAnYiddLCBbJ2MnLCAnZCddXVxuICAgICAqXG4gICAgICogXy5jaHVuayhbJ2EnLCAnYicsICdjJywgJ2QnXSwgMyk7XG4gICAgICogLy8gPT4gW1snYScsICdiJywgJ2MnXSwgWydkJ11dXG4gICAgICovXG4gICAgZnVuY3Rpb24gY2h1bmsoYXJyYXksIHNpemUsIGd1YXJkKSB7XG4gICAgICBpZiAoZ3VhcmQgPyBpc0l0ZXJhdGVlQ2FsbChhcnJheSwgc2l6ZSwgZ3VhcmQpIDogc2l6ZSA9PSBudWxsKSB7XG4gICAgICAgIHNpemUgPSAxO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2l6ZSA9IG5hdGl2ZU1heChuYXRpdmVGbG9vcihzaXplKSB8fCAxLCAxKTtcbiAgICAgIH1cbiAgICAgIHZhciBpbmRleCA9IDAsXG4gICAgICAgICAgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwLFxuICAgICAgICAgIHJlc0luZGV4ID0gLTEsXG4gICAgICAgICAgcmVzdWx0ID0gQXJyYXkobmF0aXZlQ2VpbChsZW5ndGggLyBzaXplKSk7XG5cbiAgICAgIHdoaWxlIChpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICByZXN1bHRbKytyZXNJbmRleF0gPSBiYXNlU2xpY2UoYXJyYXksIGluZGV4LCAoaW5kZXggKz0gc2l6ZSkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IHdpdGggYWxsIGZhbHNleSB2YWx1ZXMgcmVtb3ZlZC4gVGhlIHZhbHVlcyBgZmFsc2VgLCBgbnVsbGAsXG4gICAgICogYDBgLCBgXCJcImAsIGB1bmRlZmluZWRgLCBhbmQgYE5hTmAgYXJlIGZhbHNleS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBjb21wYWN0LlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGFycmF5IG9mIGZpbHRlcmVkIHZhbHVlcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5jb21wYWN0KFswLCAxLCBmYWxzZSwgMiwgJycsIDNdKTtcbiAgICAgKiAvLyA9PiBbMSwgMiwgM11cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjb21wYWN0KGFycmF5KSB7XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDAsXG4gICAgICAgICAgcmVzSW5kZXggPSAtMSxcbiAgICAgICAgICByZXN1bHQgPSBbXTtcblxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gYXJyYXlbaW5kZXhdO1xuICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICByZXN1bHRbKytyZXNJbmRleF0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIHVuaXF1ZSBgYXJyYXlgIHZhbHVlcyBub3QgaW5jbHVkZWQgaW4gdGhlIG90aGVyXG4gICAgICogcHJvdmlkZWQgYXJyYXlzIHVzaW5nIFtgU2FtZVZhbHVlWmVyb2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLXNhbWV2YWx1ZXplcm8pXG4gICAgICogZm9yIGVxdWFsaXR5IGNvbXBhcmlzb25zLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGluc3BlY3QuXG4gICAgICogQHBhcmFtIHsuLi5BcnJheX0gW3ZhbHVlc10gVGhlIGFycmF5cyBvZiB2YWx1ZXMgdG8gZXhjbHVkZS5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBhcnJheSBvZiBmaWx0ZXJlZCB2YWx1ZXMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uZGlmZmVyZW5jZShbMSwgMiwgM10sIFs0LCAyXSk7XG4gICAgICogLy8gPT4gWzEsIDNdXG4gICAgICovXG4gICAgdmFyIGRpZmZlcmVuY2UgPSByZXN0UGFyYW0oZnVuY3Rpb24oYXJyYXksIHZhbHVlcykge1xuICAgICAgcmV0dXJuIChpc09iamVjdExpa2UoYXJyYXkpICYmIGlzQXJyYXlMaWtlKGFycmF5KSlcbiAgICAgICAgPyBiYXNlRGlmZmVyZW5jZShhcnJheSwgYmFzZUZsYXR0ZW4odmFsdWVzLCBmYWxzZSwgdHJ1ZSkpXG4gICAgICAgIDogW107XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgc2xpY2Ugb2YgYGFycmF5YCB3aXRoIGBuYCBlbGVtZW50cyBkcm9wcGVkIGZyb20gdGhlIGJlZ2lubmluZy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBxdWVyeS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW249MV0gVGhlIG51bWJlciBvZiBlbGVtZW50cyB0byBkcm9wLlxuICAgICAqIEBwYXJhbS0ge09iamVjdH0gW2d1YXJkXSBFbmFibGVzIHVzZSBhcyBhIGNhbGxiYWNrIGZvciBmdW5jdGlvbnMgbGlrZSBgXy5tYXBgLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgc2xpY2Ugb2YgYGFycmF5YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5kcm9wKFsxLCAyLCAzXSk7XG4gICAgICogLy8gPT4gWzIsIDNdXG4gICAgICpcbiAgICAgKiBfLmRyb3AoWzEsIDIsIDNdLCAyKTtcbiAgICAgKiAvLyA9PiBbM11cbiAgICAgKlxuICAgICAqIF8uZHJvcChbMSwgMiwgM10sIDUpO1xuICAgICAqIC8vID0+IFtdXG4gICAgICpcbiAgICAgKiBfLmRyb3AoWzEsIDIsIDNdLCAwKTtcbiAgICAgKiAvLyA9PiBbMSwgMiwgM11cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBkcm9wKGFycmF5LCBuLCBndWFyZCkge1xuICAgICAgdmFyIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMDtcbiAgICAgIGlmICghbGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICAgIGlmIChndWFyZCA/IGlzSXRlcmF0ZWVDYWxsKGFycmF5LCBuLCBndWFyZCkgOiBuID09IG51bGwpIHtcbiAgICAgICAgbiA9IDE7XG4gICAgICB9XG4gICAgICByZXR1cm4gYmFzZVNsaWNlKGFycmF5LCBuIDwgMCA/IDAgOiBuKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgc2xpY2Ugb2YgYGFycmF5YCB3aXRoIGBuYCBlbGVtZW50cyBkcm9wcGVkIGZyb20gdGhlIGVuZC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBxdWVyeS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW249MV0gVGhlIG51bWJlciBvZiBlbGVtZW50cyB0byBkcm9wLlxuICAgICAqIEBwYXJhbS0ge09iamVjdH0gW2d1YXJkXSBFbmFibGVzIHVzZSBhcyBhIGNhbGxiYWNrIGZvciBmdW5jdGlvbnMgbGlrZSBgXy5tYXBgLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgc2xpY2Ugb2YgYGFycmF5YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5kcm9wUmlnaHQoWzEsIDIsIDNdKTtcbiAgICAgKiAvLyA9PiBbMSwgMl1cbiAgICAgKlxuICAgICAqIF8uZHJvcFJpZ2h0KFsxLCAyLCAzXSwgMik7XG4gICAgICogLy8gPT4gWzFdXG4gICAgICpcbiAgICAgKiBfLmRyb3BSaWdodChbMSwgMiwgM10sIDUpO1xuICAgICAqIC8vID0+IFtdXG4gICAgICpcbiAgICAgKiBfLmRyb3BSaWdodChbMSwgMiwgM10sIDApO1xuICAgICAqIC8vID0+IFsxLCAyLCAzXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGRyb3BSaWdodChhcnJheSwgbiwgZ3VhcmQpIHtcbiAgICAgIHZhciBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDA7XG4gICAgICBpZiAoIWxlbmd0aCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgICBpZiAoZ3VhcmQgPyBpc0l0ZXJhdGVlQ2FsbChhcnJheSwgbiwgZ3VhcmQpIDogbiA9PSBudWxsKSB7XG4gICAgICAgIG4gPSAxO1xuICAgICAgfVxuICAgICAgbiA9IGxlbmd0aCAtICgrbiB8fCAwKTtcbiAgICAgIHJldHVybiBiYXNlU2xpY2UoYXJyYXksIDAsIG4gPCAwID8gMCA6IG4pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBzbGljZSBvZiBgYXJyYXlgIGV4Y2x1ZGluZyBlbGVtZW50cyBkcm9wcGVkIGZyb20gdGhlIGVuZC5cbiAgICAgKiBFbGVtZW50cyBhcmUgZHJvcHBlZCB1bnRpbCBgcHJlZGljYXRlYCByZXR1cm5zIGZhbHNleS4gVGhlIHByZWRpY2F0ZSBpc1xuICAgICAqIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50czogKHZhbHVlLCBpbmRleCwgYXJyYXkpLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgcHJlZGljYXRlYCB0aGUgY3JlYXRlZCBgXy5wcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGEgdmFsdWUgaXMgYWxzbyBwcm92aWRlZCBmb3IgYHRoaXNBcmdgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNQcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIGEgbWF0Y2hpbmcgcHJvcGVydHlcbiAgICAgKiB2YWx1ZSwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgcHJlZGljYXRlYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzYCBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IG1hdGNoIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlblxuICAgICAqIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHF1ZXJ5LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW3ByZWRpY2F0ZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZFxuICAgICAqICBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgcHJlZGljYXRlYC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHNsaWNlIG9mIGBhcnJheWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uZHJvcFJpZ2h0V2hpbGUoWzEsIDIsIDNdLCBmdW5jdGlvbihuKSB7XG4gICAgICogICByZXR1cm4gbiA+IDE7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gWzFdXG4gICAgICpcbiAgICAgKiB2YXIgdXNlcnMgPSBbXG4gICAgICogICB7ICd1c2VyJzogJ2Jhcm5leScsICAnYWN0aXZlJzogdHJ1ZSB9LFxuICAgICAqICAgeyAndXNlcic6ICdmcmVkJywgICAgJ2FjdGl2ZSc6IGZhbHNlIH0sXG4gICAgICogICB7ICd1c2VyJzogJ3BlYmJsZXMnLCAnYWN0aXZlJzogZmFsc2UgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ubWF0Y2hlc2AgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5wbHVjayhfLmRyb3BSaWdodFdoaWxlKHVzZXJzLCB7ICd1c2VyJzogJ3BlYmJsZXMnLCAnYWN0aXZlJzogZmFsc2UgfSksICd1c2VyJyk7XG4gICAgICogLy8gPT4gWydiYXJuZXknLCAnZnJlZCddXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ubWF0Y2hlc1Byb3BlcnR5YCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLnBsdWNrKF8uZHJvcFJpZ2h0V2hpbGUodXNlcnMsICdhY3RpdmUnLCBmYWxzZSksICd1c2VyJyk7XG4gICAgICogLy8gPT4gWydiYXJuZXknXVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLnByb3BlcnR5YCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLnBsdWNrKF8uZHJvcFJpZ2h0V2hpbGUodXNlcnMsICdhY3RpdmUnKSwgJ3VzZXInKTtcbiAgICAgKiAvLyA9PiBbJ2Jhcm5leScsICdmcmVkJywgJ3BlYmJsZXMnXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGRyb3BSaWdodFdoaWxlKGFycmF5LCBwcmVkaWNhdGUsIHRoaXNBcmcpIHtcbiAgICAgIHJldHVybiAoYXJyYXkgJiYgYXJyYXkubGVuZ3RoKVxuICAgICAgICA/IGJhc2VXaGlsZShhcnJheSwgZ2V0Q2FsbGJhY2socHJlZGljYXRlLCB0aGlzQXJnLCAzKSwgdHJ1ZSwgdHJ1ZSlcbiAgICAgICAgOiBbXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgc2xpY2Ugb2YgYGFycmF5YCBleGNsdWRpbmcgZWxlbWVudHMgZHJvcHBlZCBmcm9tIHRoZSBiZWdpbm5pbmcuXG4gICAgICogRWxlbWVudHMgYXJlIGRyb3BwZWQgdW50aWwgYHByZWRpY2F0ZWAgcmV0dXJucyBmYWxzZXkuIFRoZSBwcmVkaWNhdGUgaXNcbiAgICAgKiBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM6ICh2YWx1ZSwgaW5kZXgsIGFycmF5KS5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYHByZWRpY2F0ZWAgdGhlIGNyZWF0ZWQgYF8ucHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhIHZhbHVlIGlzIGFsc28gcHJvdmlkZWQgZm9yIGB0aGlzQXJnYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzUHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSBhIG1hdGNoaW5nIHByb3BlcnR5XG4gICAgICogdmFsdWUsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYHByZWRpY2F0ZWAgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc2Agc3R5bGVcbiAgICAgKiBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlblxuICAgICAqIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHF1ZXJ5LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW3ByZWRpY2F0ZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZFxuICAgICAqICBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgcHJlZGljYXRlYC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHNsaWNlIG9mIGBhcnJheWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uZHJvcFdoaWxlKFsxLCAyLCAzXSwgZnVuY3Rpb24obikge1xuICAgICAqICAgcmV0dXJuIG4gPCAzO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IFszXVxuICAgICAqXG4gICAgICogdmFyIHVzZXJzID0gW1xuICAgICAqICAgeyAndXNlcic6ICdiYXJuZXknLCAgJ2FjdGl2ZSc6IGZhbHNlIH0sXG4gICAgICogICB7ICd1c2VyJzogJ2ZyZWQnLCAgICAnYWN0aXZlJzogZmFsc2UgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAncGViYmxlcycsICdhY3RpdmUnOiB0cnVlIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLm1hdGNoZXNgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8ucGx1Y2soXy5kcm9wV2hpbGUodXNlcnMsIHsgJ3VzZXInOiAnYmFybmV5JywgJ2FjdGl2ZSc6IGZhbHNlIH0pLCAndXNlcicpO1xuICAgICAqIC8vID0+IFsnZnJlZCcsICdwZWJibGVzJ11cbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5tYXRjaGVzUHJvcGVydHlgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8ucGx1Y2soXy5kcm9wV2hpbGUodXNlcnMsICdhY3RpdmUnLCBmYWxzZSksICd1c2VyJyk7XG4gICAgICogLy8gPT4gWydwZWJibGVzJ11cbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5wcm9wZXJ0eWAgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5wbHVjayhfLmRyb3BXaGlsZSh1c2VycywgJ2FjdGl2ZScpLCAndXNlcicpO1xuICAgICAqIC8vID0+IFsnYmFybmV5JywgJ2ZyZWQnLCAncGViYmxlcyddXG4gICAgICovXG4gICAgZnVuY3Rpb24gZHJvcFdoaWxlKGFycmF5LCBwcmVkaWNhdGUsIHRoaXNBcmcpIHtcbiAgICAgIHJldHVybiAoYXJyYXkgJiYgYXJyYXkubGVuZ3RoKVxuICAgICAgICA/IGJhc2VXaGlsZShhcnJheSwgZ2V0Q2FsbGJhY2socHJlZGljYXRlLCB0aGlzQXJnLCAzKSwgdHJ1ZSlcbiAgICAgICAgOiBbXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGaWxscyBlbGVtZW50cyBvZiBgYXJyYXlgIHdpdGggYHZhbHVlYCBmcm9tIGBzdGFydGAgdXAgdG8sIGJ1dCBub3RcbiAgICAgKiBpbmNsdWRpbmcsIGBlbmRgLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoaXMgbWV0aG9kIG11dGF0ZXMgYGFycmF5YC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBmaWxsLlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGZpbGwgYGFycmF5YCB3aXRoLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbc3RhcnQ9MF0gVGhlIHN0YXJ0IHBvc2l0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbZW5kPWFycmF5Lmxlbmd0aF0gVGhlIGVuZCBwb3NpdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYGFycmF5YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGFycmF5ID0gWzEsIDIsIDNdO1xuICAgICAqXG4gICAgICogXy5maWxsKGFycmF5LCAnYScpO1xuICAgICAqIGNvbnNvbGUubG9nKGFycmF5KTtcbiAgICAgKiAvLyA9PiBbJ2EnLCAnYScsICdhJ11cbiAgICAgKlxuICAgICAqIF8uZmlsbChBcnJheSgzKSwgMik7XG4gICAgICogLy8gPT4gWzIsIDIsIDJdXG4gICAgICpcbiAgICAgKiBfLmZpbGwoWzQsIDYsIDhdLCAnKicsIDEsIDIpO1xuICAgICAqIC8vID0+IFs0LCAnKicsIDhdXG4gICAgICovXG4gICAgZnVuY3Rpb24gZmlsbChhcnJheSwgdmFsdWUsIHN0YXJ0LCBlbmQpIHtcbiAgICAgIHZhciBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDA7XG4gICAgICBpZiAoIWxlbmd0aCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgICBpZiAoc3RhcnQgJiYgdHlwZW9mIHN0YXJ0ICE9ICdudW1iZXInICYmIGlzSXRlcmF0ZWVDYWxsKGFycmF5LCB2YWx1ZSwgc3RhcnQpKSB7XG4gICAgICAgIHN0YXJ0ID0gMDtcbiAgICAgICAgZW5kID0gbGVuZ3RoO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGJhc2VGaWxsKGFycmF5LCB2YWx1ZSwgc3RhcnQsIGVuZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5maW5kYCBleGNlcHQgdGhhdCBpdCByZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgZmlyc3RcbiAgICAgKiBlbGVtZW50IGBwcmVkaWNhdGVgIHJldHVybnMgdHJ1dGh5IGZvciBpbnN0ZWFkIG9mIHRoZSBlbGVtZW50IGl0c2VsZi5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYHByZWRpY2F0ZWAgdGhlIGNyZWF0ZWQgYF8ucHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhIHZhbHVlIGlzIGFsc28gcHJvdmlkZWQgZm9yIGB0aGlzQXJnYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzUHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSBhIG1hdGNoaW5nIHByb3BlcnR5XG4gICAgICogdmFsdWUsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYHByZWRpY2F0ZWAgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc2Agc3R5bGVcbiAgICAgKiBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlblxuICAgICAqIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHNlYXJjaC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtwcmVkaWNhdGU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWRcbiAgICAgKiAgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYHByZWRpY2F0ZWAuXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGZvdW5kIGVsZW1lbnQsIGVsc2UgYC0xYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIHVzZXJzID0gW1xuICAgICAqICAgeyAndXNlcic6ICdiYXJuZXknLCAgJ2FjdGl2ZSc6IGZhbHNlIH0sXG4gICAgICogICB7ICd1c2VyJzogJ2ZyZWQnLCAgICAnYWN0aXZlJzogZmFsc2UgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAncGViYmxlcycsICdhY3RpdmUnOiB0cnVlIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogXy5maW5kSW5kZXgodXNlcnMsIGZ1bmN0aW9uKGNocikge1xuICAgICAqICAgcmV0dXJuIGNoci51c2VyID09ICdiYXJuZXknO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IDBcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5tYXRjaGVzYCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLmZpbmRJbmRleCh1c2VycywgeyAndXNlcic6ICdmcmVkJywgJ2FjdGl2ZSc6IGZhbHNlIH0pO1xuICAgICAqIC8vID0+IDFcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5tYXRjaGVzUHJvcGVydHlgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8uZmluZEluZGV4KHVzZXJzLCAnYWN0aXZlJywgZmFsc2UpO1xuICAgICAqIC8vID0+IDBcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5wcm9wZXJ0eWAgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5maW5kSW5kZXgodXNlcnMsICdhY3RpdmUnKTtcbiAgICAgKiAvLyA9PiAyXG4gICAgICovXG4gICAgdmFyIGZpbmRJbmRleCA9IGNyZWF0ZUZpbmRJbmRleCgpO1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5maW5kSW5kZXhgIGV4Y2VwdCB0aGF0IGl0IGl0ZXJhdGVzIG92ZXIgZWxlbWVudHNcbiAgICAgKiBvZiBgY29sbGVjdGlvbmAgZnJvbSByaWdodCB0byBsZWZ0LlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgcHJlZGljYXRlYCB0aGUgY3JlYXRlZCBgXy5wcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGEgdmFsdWUgaXMgYWxzbyBwcm92aWRlZCBmb3IgYHRoaXNBcmdgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNQcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIGEgbWF0Y2hpbmcgcHJvcGVydHlcbiAgICAgKiB2YWx1ZSwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgcHJlZGljYXRlYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzYCBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuXG4gICAgICogb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gc2VhcmNoLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW3ByZWRpY2F0ZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZFxuICAgICAqICBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgcHJlZGljYXRlYC5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgZm91bmQgZWxlbWVudCwgZWxzZSBgLTFgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgdXNlcnMgPSBbXG4gICAgICogICB7ICd1c2VyJzogJ2Jhcm5leScsICAnYWN0aXZlJzogdHJ1ZSB9LFxuICAgICAqICAgeyAndXNlcic6ICdmcmVkJywgICAgJ2FjdGl2ZSc6IGZhbHNlIH0sXG4gICAgICogICB7ICd1c2VyJzogJ3BlYmJsZXMnLCAnYWN0aXZlJzogZmFsc2UgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiBfLmZpbmRMYXN0SW5kZXgodXNlcnMsIGZ1bmN0aW9uKGNocikge1xuICAgICAqICAgcmV0dXJuIGNoci51c2VyID09ICdwZWJibGVzJztcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiAyXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ubWF0Y2hlc2AgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5maW5kTGFzdEluZGV4KHVzZXJzLCB7ICd1c2VyJzogJ2Jhcm5leScsICdhY3RpdmUnOiB0cnVlIH0pO1xuICAgICAqIC8vID0+IDBcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5tYXRjaGVzUHJvcGVydHlgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8uZmluZExhc3RJbmRleCh1c2VycywgJ2FjdGl2ZScsIGZhbHNlKTtcbiAgICAgKiAvLyA9PiAyXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ucHJvcGVydHlgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8uZmluZExhc3RJbmRleCh1c2VycywgJ2FjdGl2ZScpO1xuICAgICAqIC8vID0+IDBcbiAgICAgKi9cbiAgICB2YXIgZmluZExhc3RJbmRleCA9IGNyZWF0ZUZpbmRJbmRleCh0cnVlKTtcblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGZpcnN0IGVsZW1lbnQgb2YgYGFycmF5YC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBhbGlhcyBoZWFkXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHF1ZXJ5LlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBmaXJzdCBlbGVtZW50IG9mIGBhcnJheWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uZmlyc3QoWzEsIDIsIDNdKTtcbiAgICAgKiAvLyA9PiAxXG4gICAgICpcbiAgICAgKiBfLmZpcnN0KFtdKTtcbiAgICAgKiAvLyA9PiB1bmRlZmluZWRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBmaXJzdChhcnJheSkge1xuICAgICAgcmV0dXJuIGFycmF5ID8gYXJyYXlbMF0gOiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmxhdHRlbnMgYSBuZXN0ZWQgYXJyYXkuIElmIGBpc0RlZXBgIGlzIGB0cnVlYCB0aGUgYXJyYXkgaXMgcmVjdXJzaXZlbHlcbiAgICAgKiBmbGF0dGVuZWQsIG90aGVyd2lzZSBpdCBpcyBvbmx5IGZsYXR0ZW5lZCBhIHNpbmdsZSBsZXZlbC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBmbGF0dGVuLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzRGVlcF0gU3BlY2lmeSBhIGRlZXAgZmxhdHRlbi5cbiAgICAgKiBAcGFyYW0tIHtPYmplY3R9IFtndWFyZF0gRW5hYmxlcyB1c2UgYXMgYSBjYWxsYmFjayBmb3IgZnVuY3Rpb25zIGxpa2UgYF8ubWFwYC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBmbGF0dGVuZWQgYXJyYXkuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uZmxhdHRlbihbMSwgWzIsIDMsIFs0XV1dKTtcbiAgICAgKiAvLyA9PiBbMSwgMiwgMywgWzRdXVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgYGlzRGVlcGBcbiAgICAgKiBfLmZsYXR0ZW4oWzEsIFsyLCAzLCBbNF1dXSwgdHJ1ZSk7XG4gICAgICogLy8gPT4gWzEsIDIsIDMsIDRdXG4gICAgICovXG4gICAgZnVuY3Rpb24gZmxhdHRlbihhcnJheSwgaXNEZWVwLCBndWFyZCkge1xuICAgICAgdmFyIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMDtcbiAgICAgIGlmIChndWFyZCAmJiBpc0l0ZXJhdGVlQ2FsbChhcnJheSwgaXNEZWVwLCBndWFyZCkpIHtcbiAgICAgICAgaXNEZWVwID0gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gbGVuZ3RoID8gYmFzZUZsYXR0ZW4oYXJyYXksIGlzRGVlcCkgOiBbXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZWN1cnNpdmVseSBmbGF0dGVucyBhIG5lc3RlZCBhcnJheS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byByZWN1cnNpdmVseSBmbGF0dGVuLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGZsYXR0ZW5lZCBhcnJheS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5mbGF0dGVuRGVlcChbMSwgWzIsIDMsIFs0XV1dKTtcbiAgICAgKiAvLyA9PiBbMSwgMiwgMywgNF1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBmbGF0dGVuRGVlcChhcnJheSkge1xuICAgICAgdmFyIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMDtcbiAgICAgIHJldHVybiBsZW5ndGggPyBiYXNlRmxhdHRlbihhcnJheSwgdHJ1ZSkgOiBbXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBpbmRleCBhdCB3aGljaCB0aGUgZmlyc3Qgb2NjdXJyZW5jZSBvZiBgdmFsdWVgIGlzIGZvdW5kIGluIGBhcnJheWBcbiAgICAgKiB1c2luZyBbYFNhbWVWYWx1ZVplcm9gXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1zYW1ldmFsdWV6ZXJvKVxuICAgICAqIGZvciBlcXVhbGl0eSBjb21wYXJpc29ucy4gSWYgYGZyb21JbmRleGAgaXMgbmVnYXRpdmUsIGl0IGlzIHVzZWQgYXMgdGhlIG9mZnNldFxuICAgICAqIGZyb20gdGhlIGVuZCBvZiBgYXJyYXlgLiBJZiBgYXJyYXlgIGlzIHNvcnRlZCBwcm92aWRpbmcgYHRydWVgIGZvciBgZnJvbUluZGV4YFxuICAgICAqIHBlcmZvcm1zIGEgZmFzdGVyIGJpbmFyeSBzZWFyY2guXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gc2VhcmNoLlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNlYXJjaCBmb3IuXG4gICAgICogQHBhcmFtIHtib29sZWFufG51bWJlcn0gW2Zyb21JbmRleD0wXSBUaGUgaW5kZXggdG8gc2VhcmNoIGZyb20gb3IgYHRydWVgXG4gICAgICogIHRvIHBlcmZvcm0gYSBiaW5hcnkgc2VhcmNoIG9uIGEgc29ydGVkIGFycmF5LlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBtYXRjaGVkIHZhbHVlLCBlbHNlIGAtMWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaW5kZXhPZihbMSwgMiwgMSwgMl0sIDIpO1xuICAgICAqIC8vID0+IDFcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIGBmcm9tSW5kZXhgXG4gICAgICogXy5pbmRleE9mKFsxLCAyLCAxLCAyXSwgMiwgMik7XG4gICAgICogLy8gPT4gM1xuICAgICAqXG4gICAgICogLy8gcGVyZm9ybWluZyBhIGJpbmFyeSBzZWFyY2hcbiAgICAgKiBfLmluZGV4T2YoWzEsIDEsIDIsIDJdLCAyLCB0cnVlKTtcbiAgICAgKiAvLyA9PiAyXG4gICAgICovXG4gICAgZnVuY3Rpb24gaW5kZXhPZihhcnJheSwgdmFsdWUsIGZyb21JbmRleCkge1xuICAgICAgdmFyIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMDtcbiAgICAgIGlmICghbGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiAtMTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgZnJvbUluZGV4ID09ICdudW1iZXInKSB7XG4gICAgICAgIGZyb21JbmRleCA9IGZyb21JbmRleCA8IDAgPyBuYXRpdmVNYXgobGVuZ3RoICsgZnJvbUluZGV4LCAwKSA6IGZyb21JbmRleDtcbiAgICAgIH0gZWxzZSBpZiAoZnJvbUluZGV4KSB7XG4gICAgICAgIHZhciBpbmRleCA9IGJpbmFyeUluZGV4KGFycmF5LCB2YWx1ZSk7XG4gICAgICAgIGlmIChpbmRleCA8IGxlbmd0aCAmJlxuICAgICAgICAgICAgKHZhbHVlID09PSB2YWx1ZSA/ICh2YWx1ZSA9PT0gYXJyYXlbaW5kZXhdKSA6IChhcnJheVtpbmRleF0gIT09IGFycmF5W2luZGV4XSkpKSB7XG4gICAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAtMTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBiYXNlSW5kZXhPZihhcnJheSwgdmFsdWUsIGZyb21JbmRleCB8fCAwKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIGFsbCBidXQgdGhlIGxhc3QgZWxlbWVudCBvZiBgYXJyYXlgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHF1ZXJ5LlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgc2xpY2Ugb2YgYGFycmF5YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pbml0aWFsKFsxLCAyLCAzXSk7XG4gICAgICogLy8gPT4gWzEsIDJdXG4gICAgICovXG4gICAgZnVuY3Rpb24gaW5pdGlhbChhcnJheSkge1xuICAgICAgcmV0dXJuIGRyb3BSaWdodChhcnJheSwgMSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhcnJheSBvZiB1bmlxdWUgdmFsdWVzIHRoYXQgYXJlIGluY2x1ZGVkIGluIGFsbCBvZiB0aGUgcHJvdmlkZWRcbiAgICAgKiBhcnJheXMgdXNpbmcgW2BTYW1lVmFsdWVaZXJvYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtc2FtZXZhbHVlemVybylcbiAgICAgKiBmb3IgZXF1YWxpdHkgY29tcGFyaXNvbnMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0gey4uLkFycmF5fSBbYXJyYXlzXSBUaGUgYXJyYXlzIHRvIGluc3BlY3QuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgYXJyYXkgb2Ygc2hhcmVkIHZhbHVlcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIF8uaW50ZXJzZWN0aW9uKFsxLCAyXSwgWzQsIDJdLCBbMiwgMV0pO1xuICAgICAqIC8vID0+IFsyXVxuICAgICAqL1xuICAgIHZhciBpbnRlcnNlY3Rpb24gPSByZXN0UGFyYW0oZnVuY3Rpb24oYXJyYXlzKSB7XG4gICAgICB2YXIgb3RoTGVuZ3RoID0gYXJyYXlzLmxlbmd0aCxcbiAgICAgICAgICBvdGhJbmRleCA9IG90aExlbmd0aCxcbiAgICAgICAgICBjYWNoZXMgPSBBcnJheShsZW5ndGgpLFxuICAgICAgICAgIGluZGV4T2YgPSBnZXRJbmRleE9mKCksXG4gICAgICAgICAgaXNDb21tb24gPSBpbmRleE9mID09IGJhc2VJbmRleE9mLFxuICAgICAgICAgIHJlc3VsdCA9IFtdO1xuXG4gICAgICB3aGlsZSAob3RoSW5kZXgtLSkge1xuICAgICAgICB2YXIgdmFsdWUgPSBhcnJheXNbb3RoSW5kZXhdID0gaXNBcnJheUxpa2UodmFsdWUgPSBhcnJheXNbb3RoSW5kZXhdKSA/IHZhbHVlIDogW107XG4gICAgICAgIGNhY2hlc1tvdGhJbmRleF0gPSAoaXNDb21tb24gJiYgdmFsdWUubGVuZ3RoID49IDEyMCkgPyBjcmVhdGVDYWNoZShvdGhJbmRleCAmJiB2YWx1ZSkgOiBudWxsO1xuICAgICAgfVxuICAgICAgdmFyIGFycmF5ID0gYXJyYXlzWzBdLFxuICAgICAgICAgIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwLFxuICAgICAgICAgIHNlZW4gPSBjYWNoZXNbMF07XG5cbiAgICAgIG91dGVyOlxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgdmFsdWUgPSBhcnJheVtpbmRleF07XG4gICAgICAgIGlmICgoc2VlbiA/IGNhY2hlSW5kZXhPZihzZWVuLCB2YWx1ZSkgOiBpbmRleE9mKHJlc3VsdCwgdmFsdWUsIDApKSA8IDApIHtcbiAgICAgICAgICB2YXIgb3RoSW5kZXggPSBvdGhMZW5ndGg7XG4gICAgICAgICAgd2hpbGUgKC0tb3RoSW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBjYWNoZSA9IGNhY2hlc1tvdGhJbmRleF07XG4gICAgICAgICAgICBpZiAoKGNhY2hlID8gY2FjaGVJbmRleE9mKGNhY2hlLCB2YWx1ZSkgOiBpbmRleE9mKGFycmF5c1tvdGhJbmRleF0sIHZhbHVlLCAwKSkgPCAwKSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlIG91dGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoc2Vlbikge1xuICAgICAgICAgICAgc2Vlbi5wdXNoKHZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgbGFzdCBlbGVtZW50IG9mIGBhcnJheWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gcXVlcnkuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGxhc3QgZWxlbWVudCBvZiBgYXJyYXlgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmxhc3QoWzEsIDIsIDNdKTtcbiAgICAgKiAvLyA9PiAzXG4gICAgICovXG4gICAgZnVuY3Rpb24gbGFzdChhcnJheSkge1xuICAgICAgdmFyIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMDtcbiAgICAgIHJldHVybiBsZW5ndGggPyBhcnJheVtsZW5ndGggLSAxXSA6IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmluZGV4T2ZgIGV4Y2VwdCB0aGF0IGl0IGl0ZXJhdGVzIG92ZXIgZWxlbWVudHMgb2ZcbiAgICAgKiBgYXJyYXlgIGZyb20gcmlnaHQgdG8gbGVmdC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBzZWFyY2guXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2VhcmNoIGZvci5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW58bnVtYmVyfSBbZnJvbUluZGV4PWFycmF5Lmxlbmd0aC0xXSBUaGUgaW5kZXggdG8gc2VhcmNoIGZyb21cbiAgICAgKiAgb3IgYHRydWVgIHRvIHBlcmZvcm0gYSBiaW5hcnkgc2VhcmNoIG9uIGEgc29ydGVkIGFycmF5LlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBtYXRjaGVkIHZhbHVlLCBlbHNlIGAtMWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ubGFzdEluZGV4T2YoWzEsIDIsIDEsIDJdLCAyKTtcbiAgICAgKiAvLyA9PiAzXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBgZnJvbUluZGV4YFxuICAgICAqIF8ubGFzdEluZGV4T2YoWzEsIDIsIDEsIDJdLCAyLCAyKTtcbiAgICAgKiAvLyA9PiAxXG4gICAgICpcbiAgICAgKiAvLyBwZXJmb3JtaW5nIGEgYmluYXJ5IHNlYXJjaFxuICAgICAqIF8ubGFzdEluZGV4T2YoWzEsIDEsIDIsIDJdLCAyLCB0cnVlKTtcbiAgICAgKiAvLyA9PiAzXG4gICAgICovXG4gICAgZnVuY3Rpb24gbGFzdEluZGV4T2YoYXJyYXksIHZhbHVlLCBmcm9tSW5kZXgpIHtcbiAgICAgIHZhciBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDA7XG4gICAgICBpZiAoIWxlbmd0aCkge1xuICAgICAgICByZXR1cm4gLTE7XG4gICAgICB9XG4gICAgICB2YXIgaW5kZXggPSBsZW5ndGg7XG4gICAgICBpZiAodHlwZW9mIGZyb21JbmRleCA9PSAnbnVtYmVyJykge1xuICAgICAgICBpbmRleCA9IChmcm9tSW5kZXggPCAwID8gbmF0aXZlTWF4KGxlbmd0aCArIGZyb21JbmRleCwgMCkgOiBuYXRpdmVNaW4oZnJvbUluZGV4IHx8IDAsIGxlbmd0aCAtIDEpKSArIDE7XG4gICAgICB9IGVsc2UgaWYgKGZyb21JbmRleCkge1xuICAgICAgICBpbmRleCA9IGJpbmFyeUluZGV4KGFycmF5LCB2YWx1ZSwgdHJ1ZSkgLSAxO1xuICAgICAgICB2YXIgb3RoZXIgPSBhcnJheVtpbmRleF07XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdmFsdWUgPyAodmFsdWUgPT09IG90aGVyKSA6IChvdGhlciAhPT0gb3RoZXIpKSB7XG4gICAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAtMTtcbiAgICAgIH1cbiAgICAgIGlmICh2YWx1ZSAhPT0gdmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGluZGV4T2ZOYU4oYXJyYXksIGluZGV4LCB0cnVlKTtcbiAgICAgIH1cbiAgICAgIHdoaWxlIChpbmRleC0tKSB7XG4gICAgICAgIGlmIChhcnJheVtpbmRleF0gPT09IHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gLTE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhbGwgcHJvdmlkZWQgdmFsdWVzIGZyb20gYGFycmF5YCB1c2luZ1xuICAgICAqIFtgU2FtZVZhbHVlWmVyb2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLXNhbWV2YWx1ZXplcm8pXG4gICAgICogZm9yIGVxdWFsaXR5IGNvbXBhcmlzb25zLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFVubGlrZSBgXy53aXRob3V0YCwgdGhpcyBtZXRob2QgbXV0YXRlcyBgYXJyYXlgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIG1vZGlmeS5cbiAgICAgKiBAcGFyYW0gey4uLip9IFt2YWx1ZXNdIFRoZSB2YWx1ZXMgdG8gcmVtb3ZlLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBgYXJyYXlgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgYXJyYXkgPSBbMSwgMiwgMywgMSwgMiwgM107XG4gICAgICpcbiAgICAgKiBfLnB1bGwoYXJyYXksIDIsIDMpO1xuICAgICAqIGNvbnNvbGUubG9nKGFycmF5KTtcbiAgICAgKiAvLyA9PiBbMSwgMV1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBwdWxsKCkge1xuICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHMsXG4gICAgICAgICAgYXJyYXkgPSBhcmdzWzBdO1xuXG4gICAgICBpZiAoIShhcnJheSAmJiBhcnJheS5sZW5ndGgpKSB7XG4gICAgICAgIHJldHVybiBhcnJheTtcbiAgICAgIH1cbiAgICAgIHZhciBpbmRleCA9IDAsXG4gICAgICAgICAgaW5kZXhPZiA9IGdldEluZGV4T2YoKSxcbiAgICAgICAgICBsZW5ndGggPSBhcmdzLmxlbmd0aDtcblxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgdmFyIGZyb21JbmRleCA9IDAsXG4gICAgICAgICAgICB2YWx1ZSA9IGFyZ3NbaW5kZXhdO1xuXG4gICAgICAgIHdoaWxlICgoZnJvbUluZGV4ID0gaW5kZXhPZihhcnJheSwgdmFsdWUsIGZyb21JbmRleCkpID4gLTEpIHtcbiAgICAgICAgICBzcGxpY2UuY2FsbChhcnJheSwgZnJvbUluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGFycmF5O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgZWxlbWVudHMgZnJvbSBgYXJyYXlgIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGdpdmVuIGluZGV4ZXMgYW5kIHJldHVybnNcbiAgICAgKiBhbiBhcnJheSBvZiB0aGUgcmVtb3ZlZCBlbGVtZW50cy4gSW5kZXhlcyBtYXkgYmUgc3BlY2lmaWVkIGFzIGFuIGFycmF5IG9mXG4gICAgICogaW5kZXhlcyBvciBhcyBpbmRpdmlkdWFsIGFyZ3VtZW50cy5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBVbmxpa2UgYF8uYXRgLCB0aGlzIG1ldGhvZCBtdXRhdGVzIGBhcnJheWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gbW9kaWZ5LlxuICAgICAqIEBwYXJhbSB7Li4uKG51bWJlcnxudW1iZXJbXSl9IFtpbmRleGVzXSBUaGUgaW5kZXhlcyBvZiBlbGVtZW50cyB0byByZW1vdmUsXG4gICAgICogIHNwZWNpZmllZCBhcyBpbmRpdmlkdWFsIGluZGV4ZXMgb3IgYXJyYXlzIG9mIGluZGV4ZXMuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgYXJyYXkgb2YgcmVtb3ZlZCBlbGVtZW50cy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGFycmF5ID0gWzUsIDEwLCAxNSwgMjBdO1xuICAgICAqIHZhciBldmVucyA9IF8ucHVsbEF0KGFycmF5LCAxLCAzKTtcbiAgICAgKlxuICAgICAqIGNvbnNvbGUubG9nKGFycmF5KTtcbiAgICAgKiAvLyA9PiBbNSwgMTVdXG4gICAgICpcbiAgICAgKiBjb25zb2xlLmxvZyhldmVucyk7XG4gICAgICogLy8gPT4gWzEwLCAyMF1cbiAgICAgKi9cbiAgICB2YXIgcHVsbEF0ID0gcmVzdFBhcmFtKGZ1bmN0aW9uKGFycmF5LCBpbmRleGVzKSB7XG4gICAgICBpbmRleGVzID0gYmFzZUZsYXR0ZW4oaW5kZXhlcyk7XG5cbiAgICAgIHZhciByZXN1bHQgPSBiYXNlQXQoYXJyYXksIGluZGV4ZXMpO1xuICAgICAgYmFzZVB1bGxBdChhcnJheSwgaW5kZXhlcy5zb3J0KGJhc2VDb21wYXJlQXNjZW5kaW5nKSk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhbGwgZWxlbWVudHMgZnJvbSBgYXJyYXlgIHRoYXQgYHByZWRpY2F0ZWAgcmV0dXJucyB0cnV0aHkgZm9yXG4gICAgICogYW5kIHJldHVybnMgYW4gYXJyYXkgb2YgdGhlIHJlbW92ZWQgZWxlbWVudHMuIFRoZSBwcmVkaWNhdGUgaXMgYm91bmQgdG9cbiAgICAgKiBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM6ICh2YWx1ZSwgaW5kZXgsIGFycmF5KS5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYHByZWRpY2F0ZWAgdGhlIGNyZWF0ZWQgYF8ucHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhIHZhbHVlIGlzIGFsc28gcHJvdmlkZWQgZm9yIGB0aGlzQXJnYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzUHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSBhIG1hdGNoaW5nIHByb3BlcnR5XG4gICAgICogdmFsdWUsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYHByZWRpY2F0ZWAgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc2Agc3R5bGVcbiAgICAgKiBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlblxuICAgICAqIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFVubGlrZSBgXy5maWx0ZXJgLCB0aGlzIG1ldGhvZCBtdXRhdGVzIGBhcnJheWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gbW9kaWZ5LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW3ByZWRpY2F0ZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZFxuICAgICAqICBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgcHJlZGljYXRlYC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBhcnJheSBvZiByZW1vdmVkIGVsZW1lbnRzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgYXJyYXkgPSBbMSwgMiwgMywgNF07XG4gICAgICogdmFyIGV2ZW5zID0gXy5yZW1vdmUoYXJyYXksIGZ1bmN0aW9uKG4pIHtcbiAgICAgKiAgIHJldHVybiBuICUgMiA9PSAwO1xuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogY29uc29sZS5sb2coYXJyYXkpO1xuICAgICAqIC8vID0+IFsxLCAzXVxuICAgICAqXG4gICAgICogY29uc29sZS5sb2coZXZlbnMpO1xuICAgICAqIC8vID0+IFsyLCA0XVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlbW92ZShhcnJheSwgcHJlZGljYXRlLCB0aGlzQXJnKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICBpZiAoIShhcnJheSAmJiBhcnJheS5sZW5ndGgpKSB7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBpbmRleGVzID0gW10sXG4gICAgICAgICAgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuXG4gICAgICBwcmVkaWNhdGUgPSBnZXRDYWxsYmFjayhwcmVkaWNhdGUsIHRoaXNBcmcsIDMpO1xuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gYXJyYXlbaW5kZXhdO1xuICAgICAgICBpZiAocHJlZGljYXRlKHZhbHVlLCBpbmRleCwgYXJyYXkpKSB7XG4gICAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpO1xuICAgICAgICAgIGluZGV4ZXMucHVzaChpbmRleCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGJhc2VQdWxsQXQoYXJyYXksIGluZGV4ZXMpO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIGFsbCBidXQgdGhlIGZpcnN0IGVsZW1lbnQgb2YgYGFycmF5YC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBhbGlhcyB0YWlsXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHF1ZXJ5LlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgc2xpY2Ugb2YgYGFycmF5YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5yZXN0KFsxLCAyLCAzXSk7XG4gICAgICogLy8gPT4gWzIsIDNdXG4gICAgICovXG4gICAgZnVuY3Rpb24gcmVzdChhcnJheSkge1xuICAgICAgcmV0dXJuIGRyb3AoYXJyYXksIDEpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBzbGljZSBvZiBgYXJyYXlgIGZyb20gYHN0YXJ0YCB1cCB0bywgYnV0IG5vdCBpbmNsdWRpbmcsIGBlbmRgLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoaXMgbWV0aG9kIGlzIHVzZWQgaW5zdGVhZCBvZiBgQXJyYXkjc2xpY2VgIHRvIHN1cHBvcnQgbm9kZVxuICAgICAqIGxpc3RzIGluIElFIDwgOSBhbmQgdG8gZW5zdXJlIGRlbnNlIGFycmF5cyBhcmUgcmV0dXJuZWQuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gc2xpY2UuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtzdGFydD0wXSBUaGUgc3RhcnQgcG9zaXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtlbmQ9YXJyYXkubGVuZ3RoXSBUaGUgZW5kIHBvc2l0aW9uLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgc2xpY2Ugb2YgYGFycmF5YC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzbGljZShhcnJheSwgc3RhcnQsIGVuZCkge1xuICAgICAgdmFyIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMDtcbiAgICAgIGlmICghbGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICAgIGlmIChlbmQgJiYgdHlwZW9mIGVuZCAhPSAnbnVtYmVyJyAmJiBpc0l0ZXJhdGVlQ2FsbChhcnJheSwgc3RhcnQsIGVuZCkpIHtcbiAgICAgICAgc3RhcnQgPSAwO1xuICAgICAgICBlbmQgPSBsZW5ndGg7XG4gICAgICB9XG4gICAgICByZXR1cm4gYmFzZVNsaWNlKGFycmF5LCBzdGFydCwgZW5kKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVc2VzIGEgYmluYXJ5IHNlYXJjaCB0byBkZXRlcm1pbmUgdGhlIGxvd2VzdCBpbmRleCBhdCB3aGljaCBgdmFsdWVgIHNob3VsZFxuICAgICAqIGJlIGluc2VydGVkIGludG8gYGFycmF5YCBpbiBvcmRlciB0byBtYWludGFpbiBpdHMgc29ydCBvcmRlci4gSWYgYW4gaXRlcmF0ZWVcbiAgICAgKiBmdW5jdGlvbiBpcyBwcm92aWRlZCBpdCBpcyBpbnZva2VkIGZvciBgdmFsdWVgIGFuZCBlYWNoIGVsZW1lbnQgb2YgYGFycmF5YFxuICAgICAqIHRvIGNvbXB1dGUgdGhlaXIgc29ydCByYW5raW5nLiBUaGUgaXRlcmF0ZWUgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZFxuICAgICAqIGludm9rZWQgd2l0aCBvbmUgYXJndW1lbnQ7ICh2YWx1ZSkuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBpdGVyYXRlZWAgdGhlIGNyZWF0ZWQgYF8ucHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhIHZhbHVlIGlzIGFsc28gcHJvdmlkZWQgZm9yIGB0aGlzQXJnYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzUHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSBhIG1hdGNoaW5nIHByb3BlcnR5XG4gICAgICogdmFsdWUsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGl0ZXJhdGVlYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzYCBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuXG4gICAgICogb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgc29ydGVkIGFycmF5IHRvIGluc3BlY3QuXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gZXZhbHVhdGUuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbaXRlcmF0ZWU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWRcbiAgICAgKiAgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGl0ZXJhdGVlYC5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBhdCB3aGljaCBgdmFsdWVgIHNob3VsZCBiZSBpbnNlcnRlZFxuICAgICAqICBpbnRvIGBhcnJheWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uc29ydGVkSW5kZXgoWzMwLCA1MF0sIDQwKTtcbiAgICAgKiAvLyA9PiAxXG4gICAgICpcbiAgICAgKiBfLnNvcnRlZEluZGV4KFs0LCA0LCA1LCA1XSwgNSk7XG4gICAgICogLy8gPT4gMlxuICAgICAqXG4gICAgICogdmFyIGRpY3QgPSB7ICdkYXRhJzogeyAndGhpcnR5JzogMzAsICdmb3J0eSc6IDQwLCAnZmlmdHknOiA1MCB9IH07XG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBhbiBpdGVyYXRlZSBmdW5jdGlvblxuICAgICAqIF8uc29ydGVkSW5kZXgoWyd0aGlydHknLCAnZmlmdHknXSwgJ2ZvcnR5JywgZnVuY3Rpb24od29yZCkge1xuICAgICAqICAgcmV0dXJuIHRoaXMuZGF0YVt3b3JkXTtcbiAgICAgKiB9LCBkaWN0KTtcbiAgICAgKiAvLyA9PiAxXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ucHJvcGVydHlgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8uc29ydGVkSW5kZXgoW3sgJ3gnOiAzMCB9LCB7ICd4JzogNTAgfV0sIHsgJ3gnOiA0MCB9LCAneCcpO1xuICAgICAqIC8vID0+IDFcbiAgICAgKi9cbiAgICB2YXIgc29ydGVkSW5kZXggPSBjcmVhdGVTb3J0ZWRJbmRleCgpO1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5zb3J0ZWRJbmRleGAgZXhjZXB0IHRoYXQgaXQgcmV0dXJucyB0aGUgaGlnaGVzdFxuICAgICAqIGluZGV4IGF0IHdoaWNoIGB2YWx1ZWAgc2hvdWxkIGJlIGluc2VydGVkIGludG8gYGFycmF5YCBpbiBvcmRlciB0b1xuICAgICAqIG1haW50YWluIGl0cyBzb3J0IG9yZGVyLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIHNvcnRlZCBhcnJheSB0byBpbnNwZWN0LlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGV2YWx1YXRlLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2l0ZXJhdGVlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkXG4gICAgICogIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBpdGVyYXRlZWAuXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggYXQgd2hpY2ggYHZhbHVlYCBzaG91bGQgYmUgaW5zZXJ0ZWRcbiAgICAgKiAgaW50byBgYXJyYXlgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnNvcnRlZExhc3RJbmRleChbNCwgNCwgNSwgNV0sIDUpO1xuICAgICAqIC8vID0+IDRcbiAgICAgKi9cbiAgICB2YXIgc29ydGVkTGFzdEluZGV4ID0gY3JlYXRlU29ydGVkSW5kZXgodHJ1ZSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgc2xpY2Ugb2YgYGFycmF5YCB3aXRoIGBuYCBlbGVtZW50cyB0YWtlbiBmcm9tIHRoZSBiZWdpbm5pbmcuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gcXVlcnkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtuPTFdIFRoZSBudW1iZXIgb2YgZWxlbWVudHMgdG8gdGFrZS5cbiAgICAgKiBAcGFyYW0tIHtPYmplY3R9IFtndWFyZF0gRW5hYmxlcyB1c2UgYXMgYSBjYWxsYmFjayBmb3IgZnVuY3Rpb25zIGxpa2UgYF8ubWFwYC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHNsaWNlIG9mIGBhcnJheWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8udGFrZShbMSwgMiwgM10pO1xuICAgICAqIC8vID0+IFsxXVxuICAgICAqXG4gICAgICogXy50YWtlKFsxLCAyLCAzXSwgMik7XG4gICAgICogLy8gPT4gWzEsIDJdXG4gICAgICpcbiAgICAgKiBfLnRha2UoWzEsIDIsIDNdLCA1KTtcbiAgICAgKiAvLyA9PiBbMSwgMiwgM11cbiAgICAgKlxuICAgICAqIF8udGFrZShbMSwgMiwgM10sIDApO1xuICAgICAqIC8vID0+IFtdXG4gICAgICovXG4gICAgZnVuY3Rpb24gdGFrZShhcnJheSwgbiwgZ3VhcmQpIHtcbiAgICAgIHZhciBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDA7XG4gICAgICBpZiAoIWxlbmd0aCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgICBpZiAoZ3VhcmQgPyBpc0l0ZXJhdGVlQ2FsbChhcnJheSwgbiwgZ3VhcmQpIDogbiA9PSBudWxsKSB7XG4gICAgICAgIG4gPSAxO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGJhc2VTbGljZShhcnJheSwgMCwgbiA8IDAgPyAwIDogbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHNsaWNlIG9mIGBhcnJheWAgd2l0aCBgbmAgZWxlbWVudHMgdGFrZW4gZnJvbSB0aGUgZW5kLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHF1ZXJ5LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbj0xXSBUaGUgbnVtYmVyIG9mIGVsZW1lbnRzIHRvIHRha2UuXG4gICAgICogQHBhcmFtLSB7T2JqZWN0fSBbZ3VhcmRdIEVuYWJsZXMgdXNlIGFzIGEgY2FsbGJhY2sgZm9yIGZ1bmN0aW9ucyBsaWtlIGBfLm1hcGAuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBzbGljZSBvZiBgYXJyYXlgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnRha2VSaWdodChbMSwgMiwgM10pO1xuICAgICAqIC8vID0+IFszXVxuICAgICAqXG4gICAgICogXy50YWtlUmlnaHQoWzEsIDIsIDNdLCAyKTtcbiAgICAgKiAvLyA9PiBbMiwgM11cbiAgICAgKlxuICAgICAqIF8udGFrZVJpZ2h0KFsxLCAyLCAzXSwgNSk7XG4gICAgICogLy8gPT4gWzEsIDIsIDNdXG4gICAgICpcbiAgICAgKiBfLnRha2VSaWdodChbMSwgMiwgM10sIDApO1xuICAgICAqIC8vID0+IFtdXG4gICAgICovXG4gICAgZnVuY3Rpb24gdGFrZVJpZ2h0KGFycmF5LCBuLCBndWFyZCkge1xuICAgICAgdmFyIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMDtcbiAgICAgIGlmICghbGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICAgIGlmIChndWFyZCA/IGlzSXRlcmF0ZWVDYWxsKGFycmF5LCBuLCBndWFyZCkgOiBuID09IG51bGwpIHtcbiAgICAgICAgbiA9IDE7XG4gICAgICB9XG4gICAgICBuID0gbGVuZ3RoIC0gKCtuIHx8IDApO1xuICAgICAgcmV0dXJuIGJhc2VTbGljZShhcnJheSwgbiA8IDAgPyAwIDogbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHNsaWNlIG9mIGBhcnJheWAgd2l0aCBlbGVtZW50cyB0YWtlbiBmcm9tIHRoZSBlbmQuIEVsZW1lbnRzIGFyZVxuICAgICAqIHRha2VuIHVudGlsIGBwcmVkaWNhdGVgIHJldHVybnMgZmFsc2V5LiBUaGUgcHJlZGljYXRlIGlzIGJvdW5kIHRvIGB0aGlzQXJnYFxuICAgICAqIGFuZCBpbnZva2VkIHdpdGggdGhyZWUgYXJndW1lbnRzOiAodmFsdWUsIGluZGV4LCBhcnJheSkuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBwcmVkaWNhdGVgIHRoZSBjcmVhdGVkIGBfLnByb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYSB2YWx1ZSBpcyBhbHNvIHByb3ZpZGVkIGZvciBgdGhpc0FyZ2AgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc1Byb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgYSBtYXRjaGluZyBwcm9wZXJ0eVxuICAgICAqIHZhbHVlLCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBwcmVkaWNhdGVgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNgIHN0eWxlXG4gICAgICogY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW5cbiAgICAgKiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBxdWVyeS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtwcmVkaWNhdGU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWRcbiAgICAgKiAgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYHByZWRpY2F0ZWAuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBzbGljZSBvZiBgYXJyYXlgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnRha2VSaWdodFdoaWxlKFsxLCAyLCAzXSwgZnVuY3Rpb24obikge1xuICAgICAqICAgcmV0dXJuIG4gPiAxO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IFsyLCAzXVxuICAgICAqXG4gICAgICogdmFyIHVzZXJzID0gW1xuICAgICAqICAgeyAndXNlcic6ICdiYXJuZXknLCAgJ2FjdGl2ZSc6IHRydWUgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAnZnJlZCcsICAgICdhY3RpdmUnOiBmYWxzZSB9LFxuICAgICAqICAgeyAndXNlcic6ICdwZWJibGVzJywgJ2FjdGl2ZSc6IGZhbHNlIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLm1hdGNoZXNgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8ucGx1Y2soXy50YWtlUmlnaHRXaGlsZSh1c2VycywgeyAndXNlcic6ICdwZWJibGVzJywgJ2FjdGl2ZSc6IGZhbHNlIH0pLCAndXNlcicpO1xuICAgICAqIC8vID0+IFsncGViYmxlcyddXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ubWF0Y2hlc1Byb3BlcnR5YCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLnBsdWNrKF8udGFrZVJpZ2h0V2hpbGUodXNlcnMsICdhY3RpdmUnLCBmYWxzZSksICd1c2VyJyk7XG4gICAgICogLy8gPT4gWydmcmVkJywgJ3BlYmJsZXMnXVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLnByb3BlcnR5YCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLnBsdWNrKF8udGFrZVJpZ2h0V2hpbGUodXNlcnMsICdhY3RpdmUnKSwgJ3VzZXInKTtcbiAgICAgKiAvLyA9PiBbXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHRha2VSaWdodFdoaWxlKGFycmF5LCBwcmVkaWNhdGUsIHRoaXNBcmcpIHtcbiAgICAgIHJldHVybiAoYXJyYXkgJiYgYXJyYXkubGVuZ3RoKVxuICAgICAgICA/IGJhc2VXaGlsZShhcnJheSwgZ2V0Q2FsbGJhY2socHJlZGljYXRlLCB0aGlzQXJnLCAzKSwgZmFsc2UsIHRydWUpXG4gICAgICAgIDogW107XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHNsaWNlIG9mIGBhcnJheWAgd2l0aCBlbGVtZW50cyB0YWtlbiBmcm9tIHRoZSBiZWdpbm5pbmcuIEVsZW1lbnRzXG4gICAgICogYXJlIHRha2VuIHVudGlsIGBwcmVkaWNhdGVgIHJldHVybnMgZmFsc2V5LiBUaGUgcHJlZGljYXRlIGlzIGJvdW5kIHRvXG4gICAgICogYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdGhyZWUgYXJndW1lbnRzOiAodmFsdWUsIGluZGV4LCBhcnJheSkuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBwcmVkaWNhdGVgIHRoZSBjcmVhdGVkIGBfLnByb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYSB2YWx1ZSBpcyBhbHNvIHByb3ZpZGVkIGZvciBgdGhpc0FyZ2AgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc1Byb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgYSBtYXRjaGluZyBwcm9wZXJ0eVxuICAgICAqIHZhbHVlLCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBwcmVkaWNhdGVgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNgIHN0eWxlXG4gICAgICogY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW5cbiAgICAgKiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBxdWVyeS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtwcmVkaWNhdGU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWRcbiAgICAgKiAgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYHByZWRpY2F0ZWAuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBzbGljZSBvZiBgYXJyYXlgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnRha2VXaGlsZShbMSwgMiwgM10sIGZ1bmN0aW9uKG4pIHtcbiAgICAgKiAgIHJldHVybiBuIDwgMztcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiBbMSwgMl1cbiAgICAgKlxuICAgICAqIHZhciB1c2VycyA9IFtcbiAgICAgKiAgIHsgJ3VzZXInOiAnYmFybmV5JywgICdhY3RpdmUnOiBmYWxzZSB9LFxuICAgICAqICAgeyAndXNlcic6ICdmcmVkJywgICAgJ2FjdGl2ZSc6IGZhbHNlfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAncGViYmxlcycsICdhY3RpdmUnOiB0cnVlIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLm1hdGNoZXNgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8ucGx1Y2soXy50YWtlV2hpbGUodXNlcnMsIHsgJ3VzZXInOiAnYmFybmV5JywgJ2FjdGl2ZSc6IGZhbHNlIH0pLCAndXNlcicpO1xuICAgICAqIC8vID0+IFsnYmFybmV5J11cbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5tYXRjaGVzUHJvcGVydHlgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8ucGx1Y2soXy50YWtlV2hpbGUodXNlcnMsICdhY3RpdmUnLCBmYWxzZSksICd1c2VyJyk7XG4gICAgICogLy8gPT4gWydiYXJuZXknLCAnZnJlZCddXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ucHJvcGVydHlgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8ucGx1Y2soXy50YWtlV2hpbGUodXNlcnMsICdhY3RpdmUnKSwgJ3VzZXInKTtcbiAgICAgKiAvLyA9PiBbXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHRha2VXaGlsZShhcnJheSwgcHJlZGljYXRlLCB0aGlzQXJnKSB7XG4gICAgICByZXR1cm4gKGFycmF5ICYmIGFycmF5Lmxlbmd0aClcbiAgICAgICAgPyBiYXNlV2hpbGUoYXJyYXksIGdldENhbGxiYWNrKHByZWRpY2F0ZSwgdGhpc0FyZywgMykpXG4gICAgICAgIDogW107XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhcnJheSBvZiB1bmlxdWUgdmFsdWVzLCBpbiBvcmRlciwgZnJvbSBhbGwgb2YgdGhlIHByb3ZpZGVkIGFycmF5c1xuICAgICAqIHVzaW5nIFtgU2FtZVZhbHVlWmVyb2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLXNhbWV2YWx1ZXplcm8pXG4gICAgICogZm9yIGVxdWFsaXR5IGNvbXBhcmlzb25zLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHsuLi5BcnJheX0gW2FycmF5c10gVGhlIGFycmF5cyB0byBpbnNwZWN0LlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGFycmF5IG9mIGNvbWJpbmVkIHZhbHVlcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy51bmlvbihbMSwgMl0sIFs0LCAyXSwgWzIsIDFdKTtcbiAgICAgKiAvLyA9PiBbMSwgMiwgNF1cbiAgICAgKi9cbiAgICB2YXIgdW5pb24gPSByZXN0UGFyYW0oZnVuY3Rpb24oYXJyYXlzKSB7XG4gICAgICByZXR1cm4gYmFzZVVuaXEoYmFzZUZsYXR0ZW4oYXJyYXlzLCBmYWxzZSwgdHJ1ZSkpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGR1cGxpY2F0ZS1mcmVlIHZlcnNpb24gb2YgYW4gYXJyYXksIHVzaW5nXG4gICAgICogW2BTYW1lVmFsdWVaZXJvYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtc2FtZXZhbHVlemVybylcbiAgICAgKiBmb3IgZXF1YWxpdHkgY29tcGFyaXNvbnMsIGluIHdoaWNoIG9ubHkgdGhlIGZpcnN0IG9jY3VyZW5jZSBvZiBlYWNoIGVsZW1lbnRcbiAgICAgKiBpcyBrZXB0LiBQcm92aWRpbmcgYHRydWVgIGZvciBgaXNTb3J0ZWRgIHBlcmZvcm1zIGEgZmFzdGVyIHNlYXJjaCBhbGdvcml0aG1cbiAgICAgKiBmb3Igc29ydGVkIGFycmF5cy4gSWYgYW4gaXRlcmF0ZWUgZnVuY3Rpb24gaXMgcHJvdmlkZWQgaXQgaXMgaW52b2tlZCBmb3JcbiAgICAgKiBlYWNoIGVsZW1lbnQgaW4gdGhlIGFycmF5IHRvIGdlbmVyYXRlIHRoZSBjcml0ZXJpb24gYnkgd2hpY2ggdW5pcXVlbmVzc1xuICAgICAqIGlzIGNvbXB1dGVkLiBUaGUgYGl0ZXJhdGVlYCBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZVxuICAgICAqIGFyZ3VtZW50czogKHZhbHVlLCBpbmRleCwgYXJyYXkpLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgaXRlcmF0ZWVgIHRoZSBjcmVhdGVkIGBfLnByb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYSB2YWx1ZSBpcyBhbHNvIHByb3ZpZGVkIGZvciBgdGhpc0FyZ2AgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc1Byb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgYSBtYXRjaGluZyBwcm9wZXJ0eVxuICAgICAqIHZhbHVlLCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBpdGVyYXRlZWAgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc2Agc3R5bGVcbiAgICAgKiBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlblxuICAgICAqIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGFsaWFzIHVuaXF1ZVxuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBpbnNwZWN0LlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzU29ydGVkXSBTcGVjaWZ5IHRoZSBhcnJheSBpcyBzb3J0ZWQuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbaXRlcmF0ZWVdIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBpdGVyYXRlZWAuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgZHVwbGljYXRlLXZhbHVlLWZyZWUgYXJyYXkuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8udW5pcShbMiwgMSwgMl0pO1xuICAgICAqIC8vID0+IFsyLCAxXVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgYGlzU29ydGVkYFxuICAgICAqIF8udW5pcShbMSwgMSwgMl0sIHRydWUpO1xuICAgICAqIC8vID0+IFsxLCAyXVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgYW4gaXRlcmF0ZWUgZnVuY3Rpb25cbiAgICAgKiBfLnVuaXEoWzEsIDIuNSwgMS41LCAyXSwgZnVuY3Rpb24obikge1xuICAgICAqICAgcmV0dXJuIHRoaXMuZmxvb3Iobik7XG4gICAgICogfSwgTWF0aCk7XG4gICAgICogLy8gPT4gWzEsIDIuNV1cbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5wcm9wZXJ0eWAgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy51bmlxKFt7ICd4JzogMSB9LCB7ICd4JzogMiB9LCB7ICd4JzogMSB9XSwgJ3gnKTtcbiAgICAgKiAvLyA9PiBbeyAneCc6IDEgfSwgeyAneCc6IDIgfV1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB1bmlxKGFycmF5LCBpc1NvcnRlZCwgaXRlcmF0ZWUsIHRoaXNBcmcpIHtcbiAgICAgIHZhciBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDA7XG4gICAgICBpZiAoIWxlbmd0aCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgICBpZiAoaXNTb3J0ZWQgIT0gbnVsbCAmJiB0eXBlb2YgaXNTb3J0ZWQgIT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgIHRoaXNBcmcgPSBpdGVyYXRlZTtcbiAgICAgICAgaXRlcmF0ZWUgPSBpc0l0ZXJhdGVlQ2FsbChhcnJheSwgaXNTb3J0ZWQsIHRoaXNBcmcpID8gdW5kZWZpbmVkIDogaXNTb3J0ZWQ7XG4gICAgICAgIGlzU29ydGVkID0gZmFsc2U7XG4gICAgICB9XG4gICAgICB2YXIgY2FsbGJhY2sgPSBnZXRDYWxsYmFjaygpO1xuICAgICAgaWYgKCEoaXRlcmF0ZWUgPT0gbnVsbCAmJiBjYWxsYmFjayA9PT0gYmFzZUNhbGxiYWNrKSkge1xuICAgICAgICBpdGVyYXRlZSA9IGNhbGxiYWNrKGl0ZXJhdGVlLCB0aGlzQXJnLCAzKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiAoaXNTb3J0ZWQgJiYgZ2V0SW5kZXhPZigpID09IGJhc2VJbmRleE9mKVxuICAgICAgICA/IHNvcnRlZFVuaXEoYXJyYXksIGl0ZXJhdGVlKVxuICAgICAgICA6IGJhc2VVbmlxKGFycmF5LCBpdGVyYXRlZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy56aXBgIGV4Y2VwdCB0aGF0IGl0IGFjY2VwdHMgYW4gYXJyYXkgb2YgZ3JvdXBlZFxuICAgICAqIGVsZW1lbnRzIGFuZCBjcmVhdGVzIGFuIGFycmF5IHJlZ3JvdXBpbmcgdGhlIGVsZW1lbnRzIHRvIHRoZWlyIHByZS16aXBcbiAgICAgKiBjb25maWd1cmF0aW9uLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IG9mIGdyb3VwZWQgZWxlbWVudHMgdG8gcHJvY2Vzcy5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBhcnJheSBvZiByZWdyb3VwZWQgZWxlbWVudHMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciB6aXBwZWQgPSBfLnppcChbJ2ZyZWQnLCAnYmFybmV5J10sIFszMCwgNDBdLCBbdHJ1ZSwgZmFsc2VdKTtcbiAgICAgKiAvLyA9PiBbWydmcmVkJywgMzAsIHRydWVdLCBbJ2Jhcm5leScsIDQwLCBmYWxzZV1dXG4gICAgICpcbiAgICAgKiBfLnVuemlwKHppcHBlZCk7XG4gICAgICogLy8gPT4gW1snZnJlZCcsICdiYXJuZXknXSwgWzMwLCA0MF0sIFt0cnVlLCBmYWxzZV1dXG4gICAgICovXG4gICAgZnVuY3Rpb24gdW56aXAoYXJyYXkpIHtcbiAgICAgIGlmICghKGFycmF5ICYmIGFycmF5Lmxlbmd0aCkpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gMDtcblxuICAgICAgYXJyYXkgPSBhcnJheUZpbHRlcihhcnJheSwgZnVuY3Rpb24oZ3JvdXApIHtcbiAgICAgICAgaWYgKGlzQXJyYXlMaWtlKGdyb3VwKSkge1xuICAgICAgICAgIGxlbmd0aCA9IG5hdGl2ZU1heChncm91cC5sZW5ndGgsIGxlbmd0aCk7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgdmFyIHJlc3VsdCA9IEFycmF5KGxlbmd0aCk7XG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICByZXN1bHRbaW5kZXhdID0gYXJyYXlNYXAoYXJyYXksIGJhc2VQcm9wZXJ0eShpbmRleCkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLnVuemlwYCBleGNlcHQgdGhhdCBpdCBhY2NlcHRzIGFuIGl0ZXJhdGVlIHRvIHNwZWNpZnlcbiAgICAgKiBob3cgcmVncm91cGVkIHZhbHVlcyBzaG91bGQgYmUgY29tYmluZWQuIFRoZSBgaXRlcmF0ZWVgIGlzIGJvdW5kIHRvIGB0aGlzQXJnYFxuICAgICAqIGFuZCBpbnZva2VkIHdpdGggZm91ciBhcmd1bWVudHM6IChhY2N1bXVsYXRvciwgdmFsdWUsIGluZGV4LCBncm91cCkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgb2YgZ3JvdXBlZCBlbGVtZW50cyB0byBwcm9jZXNzLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtpdGVyYXRlZV0gVGhlIGZ1bmN0aW9uIHRvIGNvbWJpbmUgcmVncm91cGVkIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGl0ZXJhdGVlYC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBhcnJheSBvZiByZWdyb3VwZWQgZWxlbWVudHMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciB6aXBwZWQgPSBfLnppcChbMSwgMl0sIFsxMCwgMjBdLCBbMTAwLCAyMDBdKTtcbiAgICAgKiAvLyA9PiBbWzEsIDEwLCAxMDBdLCBbMiwgMjAsIDIwMF1dXG4gICAgICpcbiAgICAgKiBfLnVuemlwV2l0aCh6aXBwZWQsIF8uYWRkKTtcbiAgICAgKiAvLyA9PiBbMywgMzAsIDMwMF1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB1bnppcFdpdGgoYXJyYXksIGl0ZXJhdGVlLCB0aGlzQXJnKSB7XG4gICAgICB2YXIgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwO1xuICAgICAgaWYgKCFsZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgICAgdmFyIHJlc3VsdCA9IHVuemlwKGFycmF5KTtcbiAgICAgIGlmIChpdGVyYXRlZSA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgICBpdGVyYXRlZSA9IGJpbmRDYWxsYmFjayhpdGVyYXRlZSwgdGhpc0FyZywgNCk7XG4gICAgICByZXR1cm4gYXJyYXlNYXAocmVzdWx0LCBmdW5jdGlvbihncm91cCkge1xuICAgICAgICByZXR1cm4gYXJyYXlSZWR1Y2UoZ3JvdXAsIGl0ZXJhdGVlLCB1bmRlZmluZWQsIHRydWUpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhcnJheSBleGNsdWRpbmcgYWxsIHByb3ZpZGVkIHZhbHVlcyB1c2luZ1xuICAgICAqIFtgU2FtZVZhbHVlWmVyb2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLXNhbWV2YWx1ZXplcm8pXG4gICAgICogZm9yIGVxdWFsaXR5IGNvbXBhcmlzb25zLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGZpbHRlci5cbiAgICAgKiBAcGFyYW0gey4uLip9IFt2YWx1ZXNdIFRoZSB2YWx1ZXMgdG8gZXhjbHVkZS5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBhcnJheSBvZiBmaWx0ZXJlZCB2YWx1ZXMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ud2l0aG91dChbMSwgMiwgMSwgM10sIDEsIDIpO1xuICAgICAqIC8vID0+IFszXVxuICAgICAqL1xuICAgIHZhciB3aXRob3V0ID0gcmVzdFBhcmFtKGZ1bmN0aW9uKGFycmF5LCB2YWx1ZXMpIHtcbiAgICAgIHJldHVybiBpc0FycmF5TGlrZShhcnJheSlcbiAgICAgICAgPyBiYXNlRGlmZmVyZW5jZShhcnJheSwgdmFsdWVzKVxuICAgICAgICA6IFtdO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhcnJheSBvZiB1bmlxdWUgdmFsdWVzIHRoYXQgaXMgdGhlIFtzeW1tZXRyaWMgZGlmZmVyZW5jZV0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvU3ltbWV0cmljX2RpZmZlcmVuY2UpXG4gICAgICogb2YgdGhlIHByb3ZpZGVkIGFycmF5cy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7Li4uQXJyYXl9IFthcnJheXNdIFRoZSBhcnJheXMgdG8gaW5zcGVjdC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBhcnJheSBvZiB2YWx1ZXMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ueG9yKFsxLCAyXSwgWzQsIDJdKTtcbiAgICAgKiAvLyA9PiBbMSwgNF1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB4b3IoKSB7XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoO1xuXG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICB2YXIgYXJyYXkgPSBhcmd1bWVudHNbaW5kZXhdO1xuICAgICAgICBpZiAoaXNBcnJheUxpa2UoYXJyYXkpKSB7XG4gICAgICAgICAgdmFyIHJlc3VsdCA9IHJlc3VsdFxuICAgICAgICAgICAgPyBhcnJheVB1c2goYmFzZURpZmZlcmVuY2UocmVzdWx0LCBhcnJheSksIGJhc2VEaWZmZXJlbmNlKGFycmF5LCByZXN1bHQpKVxuICAgICAgICAgICAgOiBhcnJheTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdCA/IGJhc2VVbmlxKHJlc3VsdCkgOiBbXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIGdyb3VwZWQgZWxlbWVudHMsIHRoZSBmaXJzdCBvZiB3aGljaCBjb250YWlucyB0aGUgZmlyc3RcbiAgICAgKiBlbGVtZW50cyBvZiB0aGUgZ2l2ZW4gYXJyYXlzLCB0aGUgc2Vjb25kIG9mIHdoaWNoIGNvbnRhaW5zIHRoZSBzZWNvbmQgZWxlbWVudHNcbiAgICAgKiBvZiB0aGUgZ2l2ZW4gYXJyYXlzLCBhbmQgc28gb24uXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0gey4uLkFycmF5fSBbYXJyYXlzXSBUaGUgYXJyYXlzIHRvIHByb2Nlc3MuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgYXJyYXkgb2YgZ3JvdXBlZCBlbGVtZW50cy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy56aXAoWydmcmVkJywgJ2Jhcm5leSddLCBbMzAsIDQwXSwgW3RydWUsIGZhbHNlXSk7XG4gICAgICogLy8gPT4gW1snZnJlZCcsIDMwLCB0cnVlXSwgWydiYXJuZXknLCA0MCwgZmFsc2VdXVxuICAgICAqL1xuICAgIHZhciB6aXAgPSByZXN0UGFyYW0odW56aXApO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGludmVyc2Ugb2YgYF8ucGFpcnNgOyB0aGlzIG1ldGhvZCByZXR1cm5zIGFuIG9iamVjdCBjb21wb3NlZCBmcm9tIGFycmF5c1xuICAgICAqIG9mIHByb3BlcnR5IG5hbWVzIGFuZCB2YWx1ZXMuIFByb3ZpZGUgZWl0aGVyIGEgc2luZ2xlIHR3byBkaW1lbnNpb25hbCBhcnJheSxcbiAgICAgKiBlLmcuIGBbW2tleTEsIHZhbHVlMV0sIFtrZXkyLCB2YWx1ZTJdXWAgb3IgdHdvIGFycmF5cywgb25lIG9mIHByb3BlcnR5IG5hbWVzXG4gICAgICogYW5kIG9uZSBvZiBjb3JyZXNwb25kaW5nIHZhbHVlcy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBhbGlhcyBvYmplY3RcbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBwcm9wcyBUaGUgcHJvcGVydHkgbmFtZXMuXG4gICAgICogQHBhcmFtIHtBcnJheX0gW3ZhbHVlcz1bXV0gVGhlIHByb3BlcnR5IHZhbHVlcy5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBuZXcgb2JqZWN0LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnppcE9iamVjdChbWydmcmVkJywgMzBdLCBbJ2Jhcm5leScsIDQwXV0pO1xuICAgICAqIC8vID0+IHsgJ2ZyZWQnOiAzMCwgJ2Jhcm5leSc6IDQwIH1cbiAgICAgKlxuICAgICAqIF8uemlwT2JqZWN0KFsnZnJlZCcsICdiYXJuZXknXSwgWzMwLCA0MF0pO1xuICAgICAqIC8vID0+IHsgJ2ZyZWQnOiAzMCwgJ2Jhcm5leSc6IDQwIH1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB6aXBPYmplY3QocHJvcHMsIHZhbHVlcykge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gcHJvcHMgPyBwcm9wcy5sZW5ndGggOiAwLFxuICAgICAgICAgIHJlc3VsdCA9IHt9O1xuXG4gICAgICBpZiAobGVuZ3RoICYmICF2YWx1ZXMgJiYgIWlzQXJyYXkocHJvcHNbMF0pKSB7XG4gICAgICAgIHZhbHVlcyA9IFtdO1xuICAgICAgfVxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgdmFyIGtleSA9IHByb3BzW2luZGV4XTtcbiAgICAgICAgaWYgKHZhbHVlcykge1xuICAgICAgICAgIHJlc3VsdFtrZXldID0gdmFsdWVzW2luZGV4XTtcbiAgICAgICAgfSBlbHNlIGlmIChrZXkpIHtcbiAgICAgICAgICByZXN1bHRba2V5WzBdXSA9IGtleVsxXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLnppcGAgZXhjZXB0IHRoYXQgaXQgYWNjZXB0cyBhbiBpdGVyYXRlZSB0byBzcGVjaWZ5XG4gICAgICogaG93IGdyb3VwZWQgdmFsdWVzIHNob3VsZCBiZSBjb21iaW5lZC4gVGhlIGBpdGVyYXRlZWAgaXMgYm91bmQgdG8gYHRoaXNBcmdgXG4gICAgICogYW5kIGludm9rZWQgd2l0aCBmb3VyIGFyZ3VtZW50czogKGFjY3VtdWxhdG9yLCB2YWx1ZSwgaW5kZXgsIGdyb3VwKS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheVxuICAgICAqIEBwYXJhbSB7Li4uQXJyYXl9IFthcnJheXNdIFRoZSBhcnJheXMgdG8gcHJvY2Vzcy5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbaXRlcmF0ZWVdIFRoZSBmdW5jdGlvbiB0byBjb21iaW5lIGdyb3VwZWQgdmFsdWVzLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgaXRlcmF0ZWVgLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGFycmF5IG9mIGdyb3VwZWQgZWxlbWVudHMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uemlwV2l0aChbMSwgMl0sIFsxMCwgMjBdLCBbMTAwLCAyMDBdLCBfLmFkZCk7XG4gICAgICogLy8gPT4gWzExMSwgMjIyXVxuICAgICAqL1xuICAgIHZhciB6aXBXaXRoID0gcmVzdFBhcmFtKGZ1bmN0aW9uKGFycmF5cykge1xuICAgICAgdmFyIGxlbmd0aCA9IGFycmF5cy5sZW5ndGgsXG4gICAgICAgICAgaXRlcmF0ZWUgPSBsZW5ndGggPiAyID8gYXJyYXlzW2xlbmd0aCAtIDJdIDogdW5kZWZpbmVkLFxuICAgICAgICAgIHRoaXNBcmcgPSBsZW5ndGggPiAxID8gYXJyYXlzW2xlbmd0aCAtIDFdIDogdW5kZWZpbmVkO1xuXG4gICAgICBpZiAobGVuZ3RoID4gMiAmJiB0eXBlb2YgaXRlcmF0ZWUgPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBsZW5ndGggLT0gMjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGl0ZXJhdGVlID0gKGxlbmd0aCA+IDEgJiYgdHlwZW9mIHRoaXNBcmcgPT0gJ2Z1bmN0aW9uJykgPyAoLS1sZW5ndGgsIHRoaXNBcmcpIDogdW5kZWZpbmVkO1xuICAgICAgICB0aGlzQXJnID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgYXJyYXlzLmxlbmd0aCA9IGxlbmd0aDtcbiAgICAgIHJldHVybiB1bnppcFdpdGgoYXJyYXlzLCBpdGVyYXRlZSwgdGhpc0FyZyk7XG4gICAgfSk7XG5cbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgYGxvZGFzaGAgb2JqZWN0IHRoYXQgd3JhcHMgYHZhbHVlYCB3aXRoIGV4cGxpY2l0IG1ldGhvZFxuICAgICAqIGNoYWluaW5nIGVuYWJsZWQuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQ2hhaW5cbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byB3cmFwLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG5ldyBgbG9kYXNoYCB3cmFwcGVyIGluc3RhbmNlLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgdXNlcnMgPSBbXG4gICAgICogICB7ICd1c2VyJzogJ2Jhcm5leScsICAnYWdlJzogMzYgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAnZnJlZCcsICAgICdhZ2UnOiA0MCB9LFxuICAgICAqICAgeyAndXNlcic6ICdwZWJibGVzJywgJ2FnZSc6IDEgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiB2YXIgeW91bmdlc3QgPSBfLmNoYWluKHVzZXJzKVxuICAgICAqICAgLnNvcnRCeSgnYWdlJylcbiAgICAgKiAgIC5tYXAoZnVuY3Rpb24oY2hyKSB7XG4gICAgICogICAgIHJldHVybiBjaHIudXNlciArICcgaXMgJyArIGNoci5hZ2U7XG4gICAgICogICB9KVxuICAgICAqICAgLmZpcnN0KClcbiAgICAgKiAgIC52YWx1ZSgpO1xuICAgICAqIC8vID0+ICdwZWJibGVzIGlzIDEnXG4gICAgICovXG4gICAgZnVuY3Rpb24gY2hhaW4odmFsdWUpIHtcbiAgICAgIHZhciByZXN1bHQgPSBsb2Rhc2godmFsdWUpO1xuICAgICAgcmVzdWx0Ll9fY2hhaW5fXyA9IHRydWU7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGludm9rZXMgYGludGVyY2VwdG9yYCBhbmQgcmV0dXJucyBgdmFsdWVgLiBUaGUgaW50ZXJjZXB0b3IgaXNcbiAgICAgKiBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCBvbmUgYXJndW1lbnQ7ICh2YWx1ZSkuIFRoZSBwdXJwb3NlIG9mXG4gICAgICogdGhpcyBtZXRob2QgaXMgdG8gXCJ0YXAgaW50b1wiIGEgbWV0aG9kIGNoYWluIGluIG9yZGVyIHRvIHBlcmZvcm0gb3BlcmF0aW9uc1xuICAgICAqIG9uIGludGVybWVkaWF0ZSByZXN1bHRzIHdpdGhpbiB0aGUgY2hhaW4uXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQ2hhaW5cbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm92aWRlIHRvIGBpbnRlcmNlcHRvcmAuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gaW50ZXJjZXB0b3IgVGhlIGZ1bmN0aW9uIHRvIGludm9rZS5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGludGVyY2VwdG9yYC5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyBgdmFsdWVgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfKFsxLCAyLCAzXSlcbiAgICAgKiAgLnRhcChmdW5jdGlvbihhcnJheSkge1xuICAgICAqICAgIGFycmF5LnBvcCgpO1xuICAgICAqICB9KVxuICAgICAqICAucmV2ZXJzZSgpXG4gICAgICogIC52YWx1ZSgpO1xuICAgICAqIC8vID0+IFsyLCAxXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHRhcCh2YWx1ZSwgaW50ZXJjZXB0b3IsIHRoaXNBcmcpIHtcbiAgICAgIGludGVyY2VwdG9yLmNhbGwodGhpc0FyZywgdmFsdWUpO1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8udGFwYCBleGNlcHQgdGhhdCBpdCByZXR1cm5zIHRoZSByZXN1bHQgb2YgYGludGVyY2VwdG9yYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBDaGFpblxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb3ZpZGUgdG8gYGludGVyY2VwdG9yYC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpbnRlcmNlcHRvciBUaGUgZnVuY3Rpb24gdG8gaW52b2tlLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgaW50ZXJjZXB0b3JgLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSByZXN1bHQgb2YgYGludGVyY2VwdG9yYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXygnICBhYmMgICcpXG4gICAgICogIC5jaGFpbigpXG4gICAgICogIC50cmltKClcbiAgICAgKiAgLnRocnUoZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgKiAgICByZXR1cm4gW3ZhbHVlXTtcbiAgICAgKiAgfSlcbiAgICAgKiAgLnZhbHVlKCk7XG4gICAgICogLy8gPT4gWydhYmMnXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHRocnUodmFsdWUsIGludGVyY2VwdG9yLCB0aGlzQXJnKSB7XG4gICAgICByZXR1cm4gaW50ZXJjZXB0b3IuY2FsbCh0aGlzQXJnLCB2YWx1ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRW5hYmxlcyBleHBsaWNpdCBtZXRob2QgY2hhaW5pbmcgb24gdGhlIHdyYXBwZXIgb2JqZWN0LlxuICAgICAqXG4gICAgICogQG5hbWUgY2hhaW5cbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBDaGFpblxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG5ldyBgbG9kYXNoYCB3cmFwcGVyIGluc3RhbmNlLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgdXNlcnMgPSBbXG4gICAgICogICB7ICd1c2VyJzogJ2Jhcm5leScsICdhZ2UnOiAzNiB9LFxuICAgICAqICAgeyAndXNlcic6ICdmcmVkJywgICAnYWdlJzogNDAgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiAvLyB3aXRob3V0IGV4cGxpY2l0IGNoYWluaW5nXG4gICAgICogXyh1c2VycykuZmlyc3QoKTtcbiAgICAgKiAvLyA9PiB7ICd1c2VyJzogJ2Jhcm5leScsICdhZ2UnOiAzNiB9XG4gICAgICpcbiAgICAgKiAvLyB3aXRoIGV4cGxpY2l0IGNoYWluaW5nXG4gICAgICogXyh1c2VycykuY2hhaW4oKVxuICAgICAqICAgLmZpcnN0KClcbiAgICAgKiAgIC5waWNrKCd1c2VyJylcbiAgICAgKiAgIC52YWx1ZSgpO1xuICAgICAqIC8vID0+IHsgJ3VzZXInOiAnYmFybmV5JyB9XG4gICAgICovXG4gICAgZnVuY3Rpb24gd3JhcHBlckNoYWluKCkge1xuICAgICAgcmV0dXJuIGNoYWluKHRoaXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV4ZWN1dGVzIHRoZSBjaGFpbmVkIHNlcXVlbmNlIGFuZCByZXR1cm5zIHRoZSB3cmFwcGVkIHJlc3VsdC5cbiAgICAgKlxuICAgICAqIEBuYW1lIGNvbW1pdFxuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IENoYWluXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbmV3IGBsb2Rhc2hgIHdyYXBwZXIgaW5zdGFuY2UuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBhcnJheSA9IFsxLCAyXTtcbiAgICAgKiB2YXIgd3JhcHBlZCA9IF8oYXJyYXkpLnB1c2goMyk7XG4gICAgICpcbiAgICAgKiBjb25zb2xlLmxvZyhhcnJheSk7XG4gICAgICogLy8gPT4gWzEsIDJdXG4gICAgICpcbiAgICAgKiB3cmFwcGVkID0gd3JhcHBlZC5jb21taXQoKTtcbiAgICAgKiBjb25zb2xlLmxvZyhhcnJheSk7XG4gICAgICogLy8gPT4gWzEsIDIsIDNdXG4gICAgICpcbiAgICAgKiB3cmFwcGVkLmxhc3QoKTtcbiAgICAgKiAvLyA9PiAzXG4gICAgICpcbiAgICAgKiBjb25zb2xlLmxvZyhhcnJheSk7XG4gICAgICogLy8gPT4gWzEsIDIsIDNdXG4gICAgICovXG4gICAgZnVuY3Rpb24gd3JhcHBlckNvbW1pdCgpIHtcbiAgICAgIHJldHVybiBuZXcgTG9kYXNoV3JhcHBlcih0aGlzLnZhbHVlKCksIHRoaXMuX19jaGFpbl9fKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGFycmF5IGpvaW5pbmcgYSB3cmFwcGVkIGFycmF5IHdpdGggYW55IGFkZGl0aW9uYWwgYXJyYXlzXG4gICAgICogYW5kL29yIHZhbHVlcy5cbiAgICAgKlxuICAgICAqIEBuYW1lIGNvbmNhdFxuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IENoYWluXG4gICAgICogQHBhcmFtIHsuLi4qfSBbdmFsdWVzXSBUaGUgdmFsdWVzIHRvIGNvbmNhdGVuYXRlLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGNvbmNhdGVuYXRlZCBhcnJheS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGFycmF5ID0gWzFdO1xuICAgICAqIHZhciB3cmFwcGVkID0gXyhhcnJheSkuY29uY2F0KDIsIFszXSwgW1s0XV0pO1xuICAgICAqXG4gICAgICogY29uc29sZS5sb2cod3JhcHBlZC52YWx1ZSgpKTtcbiAgICAgKiAvLyA9PiBbMSwgMiwgMywgWzRdXVxuICAgICAqXG4gICAgICogY29uc29sZS5sb2coYXJyYXkpO1xuICAgICAqIC8vID0+IFsxXVxuICAgICAqL1xuICAgIHZhciB3cmFwcGVyQ29uY2F0ID0gcmVzdFBhcmFtKGZ1bmN0aW9uKHZhbHVlcykge1xuICAgICAgdmFsdWVzID0gYmFzZUZsYXR0ZW4odmFsdWVzKTtcbiAgICAgIHJldHVybiB0aGlzLnRocnUoZnVuY3Rpb24oYXJyYXkpIHtcbiAgICAgICAgcmV0dXJuIGFycmF5Q29uY2F0KGlzQXJyYXkoYXJyYXkpID8gYXJyYXkgOiBbdG9PYmplY3QoYXJyYXkpXSwgdmFsdWVzKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGNsb25lIG9mIHRoZSBjaGFpbmVkIHNlcXVlbmNlIHBsYW50aW5nIGB2YWx1ZWAgYXMgdGhlIHdyYXBwZWQgdmFsdWUuXG4gICAgICpcbiAgICAgKiBAbmFtZSBwbGFudFxuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IENoYWluXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbmV3IGBsb2Rhc2hgIHdyYXBwZXIgaW5zdGFuY2UuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBhcnJheSA9IFsxLCAyXTtcbiAgICAgKiB2YXIgd3JhcHBlZCA9IF8oYXJyYXkpLm1hcChmdW5jdGlvbih2YWx1ZSkge1xuICAgICAqICAgcmV0dXJuIE1hdGgucG93KHZhbHVlLCAyKTtcbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIHZhciBvdGhlciA9IFszLCA0XTtcbiAgICAgKiB2YXIgb3RoZXJXcmFwcGVkID0gd3JhcHBlZC5wbGFudChvdGhlcik7XG4gICAgICpcbiAgICAgKiBvdGhlcldyYXBwZWQudmFsdWUoKTtcbiAgICAgKiAvLyA9PiBbOSwgMTZdXG4gICAgICpcbiAgICAgKiB3cmFwcGVkLnZhbHVlKCk7XG4gICAgICogLy8gPT4gWzEsIDRdXG4gICAgICovXG4gICAgZnVuY3Rpb24gd3JhcHBlclBsYW50KHZhbHVlKSB7XG4gICAgICB2YXIgcmVzdWx0LFxuICAgICAgICAgIHBhcmVudCA9IHRoaXM7XG5cbiAgICAgIHdoaWxlIChwYXJlbnQgaW5zdGFuY2VvZiBiYXNlTG9kYXNoKSB7XG4gICAgICAgIHZhciBjbG9uZSA9IHdyYXBwZXJDbG9uZShwYXJlbnQpO1xuICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgcHJldmlvdXMuX193cmFwcGVkX18gPSBjbG9uZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQgPSBjbG9uZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcHJldmlvdXMgPSBjbG9uZTtcbiAgICAgICAgcGFyZW50ID0gcGFyZW50Ll9fd3JhcHBlZF9fO1xuICAgICAgfVxuICAgICAgcHJldmlvdXMuX193cmFwcGVkX18gPSB2YWx1ZTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV2ZXJzZXMgdGhlIHdyYXBwZWQgYXJyYXkgc28gdGhlIGZpcnN0IGVsZW1lbnQgYmVjb21lcyB0aGUgbGFzdCwgdGhlXG4gICAgICogc2Vjb25kIGVsZW1lbnQgYmVjb21lcyB0aGUgc2Vjb25kIHRvIGxhc3QsIGFuZCBzbyBvbi5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBtdXRhdGVzIHRoZSB3cmFwcGVkIGFycmF5LlxuICAgICAqXG4gICAgICogQG5hbWUgcmV2ZXJzZVxuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IENoYWluXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbmV3IHJldmVyc2VkIGBsb2Rhc2hgIHdyYXBwZXIgaW5zdGFuY2UuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBhcnJheSA9IFsxLCAyLCAzXTtcbiAgICAgKlxuICAgICAqIF8oYXJyYXkpLnJldmVyc2UoKS52YWx1ZSgpXG4gICAgICogLy8gPT4gWzMsIDIsIDFdXG4gICAgICpcbiAgICAgKiBjb25zb2xlLmxvZyhhcnJheSk7XG4gICAgICogLy8gPT4gWzMsIDIsIDFdXG4gICAgICovXG4gICAgZnVuY3Rpb24gd3JhcHBlclJldmVyc2UoKSB7XG4gICAgICB2YXIgdmFsdWUgPSB0aGlzLl9fd3JhcHBlZF9fO1xuXG4gICAgICB2YXIgaW50ZXJjZXB0b3IgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gKHdyYXBwZWQgJiYgd3JhcHBlZC5fX2Rpcl9fIDwgMCkgPyB2YWx1ZSA6IHZhbHVlLnJldmVyc2UoKTtcbiAgICAgIH07XG4gICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBMYXp5V3JhcHBlcikge1xuICAgICAgICB2YXIgd3JhcHBlZCA9IHZhbHVlO1xuICAgICAgICBpZiAodGhpcy5fX2FjdGlvbnNfXy5sZW5ndGgpIHtcbiAgICAgICAgICB3cmFwcGVkID0gbmV3IExhenlXcmFwcGVyKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIHdyYXBwZWQgPSB3cmFwcGVkLnJldmVyc2UoKTtcbiAgICAgICAgd3JhcHBlZC5fX2FjdGlvbnNfXy5wdXNoKHsgJ2Z1bmMnOiB0aHJ1LCAnYXJncyc6IFtpbnRlcmNlcHRvcl0sICd0aGlzQXJnJzogdW5kZWZpbmVkIH0pO1xuICAgICAgICByZXR1cm4gbmV3IExvZGFzaFdyYXBwZXIod3JhcHBlZCwgdGhpcy5fX2NoYWluX18pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMudGhydShpbnRlcmNlcHRvcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUHJvZHVjZXMgdGhlIHJlc3VsdCBvZiBjb2VyY2luZyB0aGUgdW53cmFwcGVkIHZhbHVlIHRvIGEgc3RyaW5nLlxuICAgICAqXG4gICAgICogQG5hbWUgdG9TdHJpbmdcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBDaGFpblxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGNvZXJjZWQgc3RyaW5nIHZhbHVlLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfKFsxLCAyLCAzXSkudG9TdHJpbmcoKTtcbiAgICAgKiAvLyA9PiAnMSwyLDMnXG4gICAgICovXG4gICAgZnVuY3Rpb24gd3JhcHBlclRvU3RyaW5nKCkge1xuICAgICAgcmV0dXJuICh0aGlzLnZhbHVlKCkgKyAnJyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXhlY3V0ZXMgdGhlIGNoYWluZWQgc2VxdWVuY2UgdG8gZXh0cmFjdCB0aGUgdW53cmFwcGVkIHZhbHVlLlxuICAgICAqXG4gICAgICogQG5hbWUgdmFsdWVcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBhbGlhcyBydW4sIHRvSlNPTiwgdmFsdWVPZlxuICAgICAqIEBjYXRlZ29yeSBDaGFpblxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSByZXNvbHZlZCB1bndyYXBwZWQgdmFsdWUuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8oWzEsIDIsIDNdKS52YWx1ZSgpO1xuICAgICAqIC8vID0+IFsxLCAyLCAzXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHdyYXBwZXJWYWx1ZSgpIHtcbiAgICAgIHJldHVybiBiYXNlV3JhcHBlclZhbHVlKHRoaXMuX193cmFwcGVkX18sIHRoaXMuX19hY3Rpb25zX18pO1xuICAgIH1cblxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgZWxlbWVudHMgY29ycmVzcG9uZGluZyB0byB0aGUgZ2l2ZW4ga2V5cywgb3IgaW5kZXhlcyxcbiAgICAgKiBvZiBgY29sbGVjdGlvbmAuIEtleXMgbWF5IGJlIHNwZWNpZmllZCBhcyBpbmRpdmlkdWFsIGFyZ3VtZW50cyBvciBhcyBhcnJheXNcbiAgICAgKiBvZiBrZXlzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25cbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7Li4uKG51bWJlcnxudW1iZXJbXXxzdHJpbmd8c3RyaW5nW10pfSBbcHJvcHNdIFRoZSBwcm9wZXJ0eSBuYW1lc1xuICAgICAqICBvciBpbmRleGVzIG9mIGVsZW1lbnRzIHRvIHBpY2ssIHNwZWNpZmllZCBpbmRpdmlkdWFsbHkgb3IgaW4gYXJyYXlzLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGFycmF5IG9mIHBpY2tlZCBlbGVtZW50cy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5hdChbJ2EnLCAnYicsICdjJ10sIFswLCAyXSk7XG4gICAgICogLy8gPT4gWydhJywgJ2MnXVxuICAgICAqXG4gICAgICogXy5hdChbJ2Jhcm5leScsICdmcmVkJywgJ3BlYmJsZXMnXSwgMCwgMik7XG4gICAgICogLy8gPT4gWydiYXJuZXknLCAncGViYmxlcyddXG4gICAgICovXG4gICAgdmFyIGF0ID0gcmVzdFBhcmFtKGZ1bmN0aW9uKGNvbGxlY3Rpb24sIHByb3BzKSB7XG4gICAgICByZXR1cm4gYmFzZUF0KGNvbGxlY3Rpb24sIGJhc2VGbGF0dGVuKHByb3BzKSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIG9iamVjdCBjb21wb3NlZCBvZiBrZXlzIGdlbmVyYXRlZCBmcm9tIHRoZSByZXN1bHRzIG9mIHJ1bm5pbmdcbiAgICAgKiBlYWNoIGVsZW1lbnQgb2YgYGNvbGxlY3Rpb25gIHRocm91Z2ggYGl0ZXJhdGVlYC4gVGhlIGNvcnJlc3BvbmRpbmcgdmFsdWVcbiAgICAgKiBvZiBlYWNoIGtleSBpcyB0aGUgbnVtYmVyIG9mIHRpbWVzIHRoZSBrZXkgd2FzIHJldHVybmVkIGJ5IGBpdGVyYXRlZWAuXG4gICAgICogVGhlIGBpdGVyYXRlZWAgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdGhyZWUgYXJndW1lbnRzOlxuICAgICAqICh2YWx1ZSwgaW5kZXh8a2V5LCBjb2xsZWN0aW9uKS5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGl0ZXJhdGVlYCB0aGUgY3JlYXRlZCBgXy5wcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGEgdmFsdWUgaXMgYWxzbyBwcm92aWRlZCBmb3IgYHRoaXNBcmdgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNQcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIGEgbWF0Y2hpbmcgcHJvcGVydHlcbiAgICAgKiB2YWx1ZSwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgaXRlcmF0ZWVgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNgIHN0eWxlXG4gICAgICogY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW5cbiAgICAgKiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtpdGVyYXRlZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZFxuICAgICAqICBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgaXRlcmF0ZWVgLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGNvbXBvc2VkIGFnZ3JlZ2F0ZSBvYmplY3QuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uY291bnRCeShbNC4zLCA2LjEsIDYuNF0sIGZ1bmN0aW9uKG4pIHtcbiAgICAgKiAgIHJldHVybiBNYXRoLmZsb29yKG4pO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IHsgJzQnOiAxLCAnNic6IDIgfVxuICAgICAqXG4gICAgICogXy5jb3VudEJ5KFs0LjMsIDYuMSwgNi40XSwgZnVuY3Rpb24obikge1xuICAgICAqICAgcmV0dXJuIHRoaXMuZmxvb3Iobik7XG4gICAgICogfSwgTWF0aCk7XG4gICAgICogLy8gPT4geyAnNCc6IDEsICc2JzogMiB9XG4gICAgICpcbiAgICAgKiBfLmNvdW50QnkoWydvbmUnLCAndHdvJywgJ3RocmVlJ10sICdsZW5ndGgnKTtcbiAgICAgKiAvLyA9PiB7ICczJzogMiwgJzUnOiAxIH1cbiAgICAgKi9cbiAgICB2YXIgY291bnRCeSA9IGNyZWF0ZUFnZ3JlZ2F0b3IoZnVuY3Rpb24ocmVzdWx0LCB2YWx1ZSwga2V5KSB7XG4gICAgICBoYXNPd25Qcm9wZXJ0eS5jYWxsKHJlc3VsdCwga2V5KSA/ICsrcmVzdWx0W2tleV0gOiAocmVzdWx0W2tleV0gPSAxKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgcHJlZGljYXRlYCByZXR1cm5zIHRydXRoeSBmb3IgKiphbGwqKiBlbGVtZW50cyBvZiBgY29sbGVjdGlvbmAuXG4gICAgICogVGhlIHByZWRpY2F0ZSBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM6XG4gICAgICogKHZhbHVlLCBpbmRleHxrZXksIGNvbGxlY3Rpb24pLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgcHJlZGljYXRlYCB0aGUgY3JlYXRlZCBgXy5wcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGEgdmFsdWUgaXMgYWxzbyBwcm92aWRlZCBmb3IgYHRoaXNBcmdgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNQcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIGEgbWF0Y2hpbmcgcHJvcGVydHlcbiAgICAgKiB2YWx1ZSwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgcHJlZGljYXRlYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzYCBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuXG4gICAgICogb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAYWxpYXMgYWxsXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25cbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW3ByZWRpY2F0ZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZFxuICAgICAqICBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgcHJlZGljYXRlYC5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYWxsIGVsZW1lbnRzIHBhc3MgdGhlIHByZWRpY2F0ZSBjaGVjayxcbiAgICAgKiAgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmV2ZXJ5KFt0cnVlLCAxLCBudWxsLCAneWVzJ10sIEJvb2xlYW4pO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICpcbiAgICAgKiB2YXIgdXNlcnMgPSBbXG4gICAgICogICB7ICd1c2VyJzogJ2Jhcm5leScsICdhY3RpdmUnOiBmYWxzZSB9LFxuICAgICAqICAgeyAndXNlcic6ICdmcmVkJywgICAnYWN0aXZlJzogZmFsc2UgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ubWF0Y2hlc2AgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5ldmVyeSh1c2VycywgeyAndXNlcic6ICdiYXJuZXknLCAnYWN0aXZlJzogZmFsc2UgfSk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5tYXRjaGVzUHJvcGVydHlgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8uZXZlcnkodXNlcnMsICdhY3RpdmUnLCBmYWxzZSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLnByb3BlcnR5YCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLmV2ZXJ5KHVzZXJzLCAnYWN0aXZlJyk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBldmVyeShjb2xsZWN0aW9uLCBwcmVkaWNhdGUsIHRoaXNBcmcpIHtcbiAgICAgIHZhciBmdW5jID0gaXNBcnJheShjb2xsZWN0aW9uKSA/IGFycmF5RXZlcnkgOiBiYXNlRXZlcnk7XG4gICAgICBpZiAodGhpc0FyZyAmJiBpc0l0ZXJhdGVlQ2FsbChjb2xsZWN0aW9uLCBwcmVkaWNhdGUsIHRoaXNBcmcpKSB7XG4gICAgICAgIHByZWRpY2F0ZSA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgcHJlZGljYXRlICE9ICdmdW5jdGlvbicgfHwgdGhpc0FyZyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHByZWRpY2F0ZSA9IGdldENhbGxiYWNrKHByZWRpY2F0ZSwgdGhpc0FyZywgMyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZnVuYyhjb2xsZWN0aW9uLCBwcmVkaWNhdGUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEl0ZXJhdGVzIG92ZXIgZWxlbWVudHMgb2YgYGNvbGxlY3Rpb25gLCByZXR1cm5pbmcgYW4gYXJyYXkgb2YgYWxsIGVsZW1lbnRzXG4gICAgICogYHByZWRpY2F0ZWAgcmV0dXJucyB0cnV0aHkgZm9yLiBUaGUgcHJlZGljYXRlIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmRcbiAgICAgKiBpbnZva2VkIHdpdGggdGhyZWUgYXJndW1lbnRzOiAodmFsdWUsIGluZGV4fGtleSwgY29sbGVjdGlvbikuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBwcmVkaWNhdGVgIHRoZSBjcmVhdGVkIGBfLnByb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYSB2YWx1ZSBpcyBhbHNvIHByb3ZpZGVkIGZvciBgdGhpc0FyZ2AgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc1Byb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgYSBtYXRjaGluZyBwcm9wZXJ0eVxuICAgICAqIHZhbHVlLCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBwcmVkaWNhdGVgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNgIHN0eWxlXG4gICAgICogY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW5cbiAgICAgKiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBhbGlhcyBzZWxlY3RcbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvblxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbcHJlZGljYXRlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkXG4gICAgICogIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBwcmVkaWNhdGVgLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGZpbHRlcmVkIGFycmF5LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmZpbHRlcihbNCwgNSwgNl0sIGZ1bmN0aW9uKG4pIHtcbiAgICAgKiAgIHJldHVybiBuICUgMiA9PSAwO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IFs0LCA2XVxuICAgICAqXG4gICAgICogdmFyIHVzZXJzID0gW1xuICAgICAqICAgeyAndXNlcic6ICdiYXJuZXknLCAnYWdlJzogMzYsICdhY3RpdmUnOiB0cnVlIH0sXG4gICAgICogICB7ICd1c2VyJzogJ2ZyZWQnLCAgICdhZ2UnOiA0MCwgJ2FjdGl2ZSc6IGZhbHNlIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLm1hdGNoZXNgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8ucGx1Y2soXy5maWx0ZXIodXNlcnMsIHsgJ2FnZSc6IDM2LCAnYWN0aXZlJzogdHJ1ZSB9KSwgJ3VzZXInKTtcbiAgICAgKiAvLyA9PiBbJ2Jhcm5leSddXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ubWF0Y2hlc1Byb3BlcnR5YCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLnBsdWNrKF8uZmlsdGVyKHVzZXJzLCAnYWN0aXZlJywgZmFsc2UpLCAndXNlcicpO1xuICAgICAqIC8vID0+IFsnZnJlZCddXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ucHJvcGVydHlgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8ucGx1Y2soXy5maWx0ZXIodXNlcnMsICdhY3RpdmUnKSwgJ3VzZXInKTtcbiAgICAgKiAvLyA9PiBbJ2Jhcm5leSddXG4gICAgICovXG4gICAgZnVuY3Rpb24gZmlsdGVyKGNvbGxlY3Rpb24sIHByZWRpY2F0ZSwgdGhpc0FyZykge1xuICAgICAgdmFyIGZ1bmMgPSBpc0FycmF5KGNvbGxlY3Rpb24pID8gYXJyYXlGaWx0ZXIgOiBiYXNlRmlsdGVyO1xuICAgICAgcHJlZGljYXRlID0gZ2V0Q2FsbGJhY2socHJlZGljYXRlLCB0aGlzQXJnLCAzKTtcbiAgICAgIHJldHVybiBmdW5jKGNvbGxlY3Rpb24sIHByZWRpY2F0ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgb3ZlciBlbGVtZW50cyBvZiBgY29sbGVjdGlvbmAsIHJldHVybmluZyB0aGUgZmlyc3QgZWxlbWVudFxuICAgICAqIGBwcmVkaWNhdGVgIHJldHVybnMgdHJ1dGh5IGZvci4gVGhlIHByZWRpY2F0ZSBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kXG4gICAgICogaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50czogKHZhbHVlLCBpbmRleHxrZXksIGNvbGxlY3Rpb24pLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgcHJlZGljYXRlYCB0aGUgY3JlYXRlZCBgXy5wcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGEgdmFsdWUgaXMgYWxzbyBwcm92aWRlZCBmb3IgYHRoaXNBcmdgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNQcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIGEgbWF0Y2hpbmcgcHJvcGVydHlcbiAgICAgKiB2YWx1ZSwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgcHJlZGljYXRlYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzYCBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuXG4gICAgICogb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAYWxpYXMgZGV0ZWN0XG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25cbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gc2VhcmNoLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW3ByZWRpY2F0ZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZFxuICAgICAqICBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgcHJlZGljYXRlYC5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgbWF0Y2hlZCBlbGVtZW50LCBlbHNlIGB1bmRlZmluZWRgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgdXNlcnMgPSBbXG4gICAgICogICB7ICd1c2VyJzogJ2Jhcm5leScsICAnYWdlJzogMzYsICdhY3RpdmUnOiB0cnVlIH0sXG4gICAgICogICB7ICd1c2VyJzogJ2ZyZWQnLCAgICAnYWdlJzogNDAsICdhY3RpdmUnOiBmYWxzZSB9LFxuICAgICAqICAgeyAndXNlcic6ICdwZWJibGVzJywgJ2FnZSc6IDEsICAnYWN0aXZlJzogdHJ1ZSB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIF8ucmVzdWx0KF8uZmluZCh1c2VycywgZnVuY3Rpb24oY2hyKSB7XG4gICAgICogICByZXR1cm4gY2hyLmFnZSA8IDQwO1xuICAgICAqIH0pLCAndXNlcicpO1xuICAgICAqIC8vID0+ICdiYXJuZXknXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ubWF0Y2hlc2AgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5yZXN1bHQoXy5maW5kKHVzZXJzLCB7ICdhZ2UnOiAxLCAnYWN0aXZlJzogdHJ1ZSB9KSwgJ3VzZXInKTtcbiAgICAgKiAvLyA9PiAncGViYmxlcydcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5tYXRjaGVzUHJvcGVydHlgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8ucmVzdWx0KF8uZmluZCh1c2VycywgJ2FjdGl2ZScsIGZhbHNlKSwgJ3VzZXInKTtcbiAgICAgKiAvLyA9PiAnZnJlZCdcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5wcm9wZXJ0eWAgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5yZXN1bHQoXy5maW5kKHVzZXJzLCAnYWN0aXZlJyksICd1c2VyJyk7XG4gICAgICogLy8gPT4gJ2Jhcm5leSdcbiAgICAgKi9cbiAgICB2YXIgZmluZCA9IGNyZWF0ZUZpbmQoYmFzZUVhY2gpO1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5maW5kYCBleGNlcHQgdGhhdCBpdCBpdGVyYXRlcyBvdmVyIGVsZW1lbnRzIG9mXG4gICAgICogYGNvbGxlY3Rpb25gIGZyb20gcmlnaHQgdG8gbGVmdC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIHNlYXJjaC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtwcmVkaWNhdGU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWRcbiAgICAgKiAgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYHByZWRpY2F0ZWAuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIG1hdGNoZWQgZWxlbWVudCwgZWxzZSBgdW5kZWZpbmVkYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5maW5kTGFzdChbMSwgMiwgMywgNF0sIGZ1bmN0aW9uKG4pIHtcbiAgICAgKiAgIHJldHVybiBuICUgMiA9PSAxO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IDNcbiAgICAgKi9cbiAgICB2YXIgZmluZExhc3QgPSBjcmVhdGVGaW5kKGJhc2VFYWNoUmlnaHQsIHRydWUpO1xuXG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgYSBkZWVwIGNvbXBhcmlzb24gYmV0d2VlbiBlYWNoIGVsZW1lbnQgaW4gYGNvbGxlY3Rpb25gIGFuZCB0aGVcbiAgICAgKiBzb3VyY2Ugb2JqZWN0LCByZXR1cm5pbmcgdGhlIGZpcnN0IGVsZW1lbnQgdGhhdCBoYXMgZXF1aXZhbGVudCBwcm9wZXJ0eVxuICAgICAqIHZhbHVlcy5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBzdXBwb3J0cyBjb21wYXJpbmcgYXJyYXlzLCBib29sZWFucywgYERhdGVgIG9iamVjdHMsXG4gICAgICogbnVtYmVycywgYE9iamVjdGAgb2JqZWN0cywgcmVnZXhlcywgYW5kIHN0cmluZ3MuIE9iamVjdHMgYXJlIGNvbXBhcmVkIGJ5XG4gICAgICogdGhlaXIgb3duLCBub3QgaW5oZXJpdGVkLCBlbnVtZXJhYmxlIHByb3BlcnRpZXMuIEZvciBjb21wYXJpbmcgYSBzaW5nbGVcbiAgICAgKiBvd24gb3IgaW5oZXJpdGVkIHByb3BlcnR5IHZhbHVlIHNlZSBgXy5tYXRjaGVzUHJvcGVydHlgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25cbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gc2VhcmNoLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgVGhlIG9iamVjdCBvZiBwcm9wZXJ0eSB2YWx1ZXMgdG8gbWF0Y2guXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIG1hdGNoZWQgZWxlbWVudCwgZWxzZSBgdW5kZWZpbmVkYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIHVzZXJzID0gW1xuICAgICAqICAgeyAndXNlcic6ICdiYXJuZXknLCAnYWdlJzogMzYsICdhY3RpdmUnOiB0cnVlIH0sXG4gICAgICogICB7ICd1c2VyJzogJ2ZyZWQnLCAgICdhZ2UnOiA0MCwgJ2FjdGl2ZSc6IGZhbHNlIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogXy5yZXN1bHQoXy5maW5kV2hlcmUodXNlcnMsIHsgJ2FnZSc6IDM2LCAnYWN0aXZlJzogdHJ1ZSB9KSwgJ3VzZXInKTtcbiAgICAgKiAvLyA9PiAnYmFybmV5J1xuICAgICAqXG4gICAgICogXy5yZXN1bHQoXy5maW5kV2hlcmUodXNlcnMsIHsgJ2FnZSc6IDQwLCAnYWN0aXZlJzogZmFsc2UgfSksICd1c2VyJyk7XG4gICAgICogLy8gPT4gJ2ZyZWQnXG4gICAgICovXG4gICAgZnVuY3Rpb24gZmluZFdoZXJlKGNvbGxlY3Rpb24sIHNvdXJjZSkge1xuICAgICAgcmV0dXJuIGZpbmQoY29sbGVjdGlvbiwgYmFzZU1hdGNoZXMoc291cmNlKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgb3ZlciBlbGVtZW50cyBvZiBgY29sbGVjdGlvbmAgaW52b2tpbmcgYGl0ZXJhdGVlYCBmb3IgZWFjaCBlbGVtZW50LlxuICAgICAqIFRoZSBgaXRlcmF0ZWVgIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50czpcbiAgICAgKiAodmFsdWUsIGluZGV4fGtleSwgY29sbGVjdGlvbikuIEl0ZXJhdGVlIGZ1bmN0aW9ucyBtYXkgZXhpdCBpdGVyYXRpb24gZWFybHlcbiAgICAgKiBieSBleHBsaWNpdGx5IHJldHVybmluZyBgZmFsc2VgLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIEFzIHdpdGggb3RoZXIgXCJDb2xsZWN0aW9uc1wiIG1ldGhvZHMsIG9iamVjdHMgd2l0aCBhIFwibGVuZ3RoXCIgcHJvcGVydHlcbiAgICAgKiBhcmUgaXRlcmF0ZWQgbGlrZSBhcnJheXMuIFRvIGF2b2lkIHRoaXMgYmVoYXZpb3IgYF8uZm9ySW5gIG9yIGBfLmZvck93bmBcbiAgICAgKiBtYXkgYmUgdXNlZCBmb3Igb2JqZWN0IGl0ZXJhdGlvbi5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBhbGlhcyBlYWNoXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25cbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtpdGVyYXRlZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgaXRlcmF0ZWVgLlxuICAgICAqIEByZXR1cm5zIHtBcnJheXxPYmplY3R8c3RyaW5nfSBSZXR1cm5zIGBjb2xsZWN0aW9uYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXyhbMSwgMl0pLmZvckVhY2goZnVuY3Rpb24obikge1xuICAgICAqICAgY29uc29sZS5sb2cobik7XG4gICAgICogfSkudmFsdWUoKTtcbiAgICAgKiAvLyA9PiBsb2dzIGVhY2ggdmFsdWUgZnJvbSBsZWZ0IHRvIHJpZ2h0IGFuZCByZXR1cm5zIHRoZSBhcnJheVxuICAgICAqXG4gICAgICogXy5mb3JFYWNoKHsgJ2EnOiAxLCAnYic6IDIgfSwgZnVuY3Rpb24obiwga2V5KSB7XG4gICAgICogICBjb25zb2xlLmxvZyhuLCBrZXkpO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IGxvZ3MgZWFjaCB2YWx1ZS1rZXkgcGFpciBhbmQgcmV0dXJucyB0aGUgb2JqZWN0IChpdGVyYXRpb24gb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQpXG4gICAgICovXG4gICAgdmFyIGZvckVhY2ggPSBjcmVhdGVGb3JFYWNoKGFycmF5RWFjaCwgYmFzZUVhY2gpO1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5mb3JFYWNoYCBleGNlcHQgdGhhdCBpdCBpdGVyYXRlcyBvdmVyIGVsZW1lbnRzIG9mXG4gICAgICogYGNvbGxlY3Rpb25gIGZyb20gcmlnaHQgdG8gbGVmdC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBhbGlhcyBlYWNoUmlnaHRcbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvblxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2l0ZXJhdGVlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBpdGVyYXRlZWAuXG4gICAgICogQHJldHVybnMge0FycmF5fE9iamVjdHxzdHJpbmd9IFJldHVybnMgYGNvbGxlY3Rpb25gLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfKFsxLCAyXSkuZm9yRWFjaFJpZ2h0KGZ1bmN0aW9uKG4pIHtcbiAgICAgKiAgIGNvbnNvbGUubG9nKG4pO1xuICAgICAqIH0pLnZhbHVlKCk7XG4gICAgICogLy8gPT4gbG9ncyBlYWNoIHZhbHVlIGZyb20gcmlnaHQgdG8gbGVmdCBhbmQgcmV0dXJucyB0aGUgYXJyYXlcbiAgICAgKi9cbiAgICB2YXIgZm9yRWFjaFJpZ2h0ID0gY3JlYXRlRm9yRWFjaChhcnJheUVhY2hSaWdodCwgYmFzZUVhY2hSaWdodCk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIG9iamVjdCBjb21wb3NlZCBvZiBrZXlzIGdlbmVyYXRlZCBmcm9tIHRoZSByZXN1bHRzIG9mIHJ1bm5pbmdcbiAgICAgKiBlYWNoIGVsZW1lbnQgb2YgYGNvbGxlY3Rpb25gIHRocm91Z2ggYGl0ZXJhdGVlYC4gVGhlIGNvcnJlc3BvbmRpbmcgdmFsdWVcbiAgICAgKiBvZiBlYWNoIGtleSBpcyBhbiBhcnJheSBvZiB0aGUgZWxlbWVudHMgcmVzcG9uc2libGUgZm9yIGdlbmVyYXRpbmcgdGhlIGtleS5cbiAgICAgKiBUaGUgYGl0ZXJhdGVlYCBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM6XG4gICAgICogKHZhbHVlLCBpbmRleHxrZXksIGNvbGxlY3Rpb24pLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgaXRlcmF0ZWVgIHRoZSBjcmVhdGVkIGBfLnByb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYSB2YWx1ZSBpcyBhbHNvIHByb3ZpZGVkIGZvciBgdGhpc0FyZ2AgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc1Byb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgYSBtYXRjaGluZyBwcm9wZXJ0eVxuICAgICAqIHZhbHVlLCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBpdGVyYXRlZWAgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc2Agc3R5bGVcbiAgICAgKiBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlblxuICAgICAqIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25cbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2l0ZXJhdGVlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkXG4gICAgICogIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBpdGVyYXRlZWAuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgY29tcG9zZWQgYWdncmVnYXRlIG9iamVjdC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5ncm91cEJ5KFs0LjIsIDYuMSwgNi40XSwgZnVuY3Rpb24obikge1xuICAgICAqICAgcmV0dXJuIE1hdGguZmxvb3Iobik7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4geyAnNCc6IFs0LjJdLCAnNic6IFs2LjEsIDYuNF0gfVxuICAgICAqXG4gICAgICogXy5ncm91cEJ5KFs0LjIsIDYuMSwgNi40XSwgZnVuY3Rpb24obikge1xuICAgICAqICAgcmV0dXJuIHRoaXMuZmxvb3Iobik7XG4gICAgICogfSwgTWF0aCk7XG4gICAgICogLy8gPT4geyAnNCc6IFs0LjJdLCAnNic6IFs2LjEsIDYuNF0gfVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLnByb3BlcnR5YCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLmdyb3VwQnkoWydvbmUnLCAndHdvJywgJ3RocmVlJ10sICdsZW5ndGgnKTtcbiAgICAgKiAvLyA9PiB7ICczJzogWydvbmUnLCAndHdvJ10sICc1JzogWyd0aHJlZSddIH1cbiAgICAgKi9cbiAgICB2YXIgZ3JvdXBCeSA9IGNyZWF0ZUFnZ3JlZ2F0b3IoZnVuY3Rpb24ocmVzdWx0LCB2YWx1ZSwga2V5KSB7XG4gICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChyZXN1bHQsIGtleSkpIHtcbiAgICAgICAgcmVzdWx0W2tleV0ucHVzaCh2YWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHRba2V5XSA9IFt2YWx1ZV07XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBpbiBgY29sbGVjdGlvbmAgdXNpbmdcbiAgICAgKiBbYFNhbWVWYWx1ZVplcm9gXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1zYW1ldmFsdWV6ZXJvKVxuICAgICAqIGZvciBlcXVhbGl0eSBjb21wYXJpc29ucy4gSWYgYGZyb21JbmRleGAgaXMgbmVnYXRpdmUsIGl0IGlzIHVzZWQgYXMgdGhlIG9mZnNldFxuICAgICAqIGZyb20gdGhlIGVuZCBvZiBgY29sbGVjdGlvbmAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAYWxpYXMgY29udGFpbnMsIGluY2x1ZGVcbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvblxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBzZWFyY2guXG4gICAgICogQHBhcmFtIHsqfSB0YXJnZXQgVGhlIHZhbHVlIHRvIHNlYXJjaCBmb3IuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtmcm9tSW5kZXg9MF0gVGhlIGluZGV4IHRvIHNlYXJjaCBmcm9tLlxuICAgICAqIEBwYXJhbS0ge09iamVjdH0gW2d1YXJkXSBFbmFibGVzIHVzZSBhcyBhIGNhbGxiYWNrIGZvciBmdW5jdGlvbnMgbGlrZSBgXy5yZWR1Y2VgLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhIG1hdGNoaW5nIGVsZW1lbnQgaXMgZm91bmQsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pbmNsdWRlcyhbMSwgMiwgM10sIDEpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaW5jbHVkZXMoWzEsIDIsIDNdLCAxLCAyKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqXG4gICAgICogXy5pbmNsdWRlcyh7ICd1c2VyJzogJ2ZyZWQnLCAnYWdlJzogNDAgfSwgJ2ZyZWQnKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmluY2x1ZGVzKCdwZWJibGVzJywgJ2ViJyk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGluY2x1ZGVzKGNvbGxlY3Rpb24sIHRhcmdldCwgZnJvbUluZGV4LCBndWFyZCkge1xuICAgICAgdmFyIGxlbmd0aCA9IGNvbGxlY3Rpb24gPyBnZXRMZW5ndGgoY29sbGVjdGlvbikgOiAwO1xuICAgICAgaWYgKCFpc0xlbmd0aChsZW5ndGgpKSB7XG4gICAgICAgIGNvbGxlY3Rpb24gPSB2YWx1ZXMoY29sbGVjdGlvbik7XG4gICAgICAgIGxlbmd0aCA9IGNvbGxlY3Rpb24ubGVuZ3RoO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBmcm9tSW5kZXggIT0gJ251bWJlcicgfHwgKGd1YXJkICYmIGlzSXRlcmF0ZWVDYWxsKHRhcmdldCwgZnJvbUluZGV4LCBndWFyZCkpKSB7XG4gICAgICAgIGZyb21JbmRleCA9IDA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmcm9tSW5kZXggPSBmcm9tSW5kZXggPCAwID8gbmF0aXZlTWF4KGxlbmd0aCArIGZyb21JbmRleCwgMCkgOiAoZnJvbUluZGV4IHx8IDApO1xuICAgICAgfVxuICAgICAgcmV0dXJuICh0eXBlb2YgY29sbGVjdGlvbiA9PSAnc3RyaW5nJyB8fCAhaXNBcnJheShjb2xsZWN0aW9uKSAmJiBpc1N0cmluZyhjb2xsZWN0aW9uKSlcbiAgICAgICAgPyAoZnJvbUluZGV4IDw9IGxlbmd0aCAmJiBjb2xsZWN0aW9uLmluZGV4T2YodGFyZ2V0LCBmcm9tSW5kZXgpID4gLTEpXG4gICAgICAgIDogKCEhbGVuZ3RoICYmIGdldEluZGV4T2YoY29sbGVjdGlvbiwgdGFyZ2V0LCBmcm9tSW5kZXgpID4gLTEpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gb2JqZWN0IGNvbXBvc2VkIG9mIGtleXMgZ2VuZXJhdGVkIGZyb20gdGhlIHJlc3VsdHMgb2YgcnVubmluZ1xuICAgICAqIGVhY2ggZWxlbWVudCBvZiBgY29sbGVjdGlvbmAgdGhyb3VnaCBgaXRlcmF0ZWVgLiBUaGUgY29ycmVzcG9uZGluZyB2YWx1ZVxuICAgICAqIG9mIGVhY2gga2V5IGlzIHRoZSBsYXN0IGVsZW1lbnQgcmVzcG9uc2libGUgZm9yIGdlbmVyYXRpbmcgdGhlIGtleS4gVGhlXG4gICAgICogaXRlcmF0ZWUgZnVuY3Rpb24gaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdGhyZWUgYXJndW1lbnRzOlxuICAgICAqICh2YWx1ZSwgaW5kZXh8a2V5LCBjb2xsZWN0aW9uKS5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGl0ZXJhdGVlYCB0aGUgY3JlYXRlZCBgXy5wcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGEgdmFsdWUgaXMgYWxzbyBwcm92aWRlZCBmb3IgYHRoaXNBcmdgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNQcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIGEgbWF0Y2hpbmcgcHJvcGVydHlcbiAgICAgKiB2YWx1ZSwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgaXRlcmF0ZWVgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNgIHN0eWxlXG4gICAgICogY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW5cbiAgICAgKiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtpdGVyYXRlZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZFxuICAgICAqICBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgaXRlcmF0ZWVgLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGNvbXBvc2VkIGFnZ3JlZ2F0ZSBvYmplY3QuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBrZXlEYXRhID0gW1xuICAgICAqICAgeyAnZGlyJzogJ2xlZnQnLCAnY29kZSc6IDk3IH0sXG4gICAgICogICB7ICdkaXInOiAncmlnaHQnLCAnY29kZSc6IDEwMCB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIF8uaW5kZXhCeShrZXlEYXRhLCAnZGlyJyk7XG4gICAgICogLy8gPT4geyAnbGVmdCc6IHsgJ2Rpcic6ICdsZWZ0JywgJ2NvZGUnOiA5NyB9LCAncmlnaHQnOiB7ICdkaXInOiAncmlnaHQnLCAnY29kZSc6IDEwMCB9IH1cbiAgICAgKlxuICAgICAqIF8uaW5kZXhCeShrZXlEYXRhLCBmdW5jdGlvbihvYmplY3QpIHtcbiAgICAgKiAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKG9iamVjdC5jb2RlKTtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiB7ICdhJzogeyAnZGlyJzogJ2xlZnQnLCAnY29kZSc6IDk3IH0sICdkJzogeyAnZGlyJzogJ3JpZ2h0JywgJ2NvZGUnOiAxMDAgfSB9XG4gICAgICpcbiAgICAgKiBfLmluZGV4Qnkoa2V5RGF0YSwgZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgICogICByZXR1cm4gdGhpcy5mcm9tQ2hhckNvZGUob2JqZWN0LmNvZGUpO1xuICAgICAqIH0sIFN0cmluZyk7XG4gICAgICogLy8gPT4geyAnYSc6IHsgJ2Rpcic6ICdsZWZ0JywgJ2NvZGUnOiA5NyB9LCAnZCc6IHsgJ2Rpcic6ICdyaWdodCcsICdjb2RlJzogMTAwIH0gfVxuICAgICAqL1xuICAgIHZhciBpbmRleEJ5ID0gY3JlYXRlQWdncmVnYXRvcihmdW5jdGlvbihyZXN1bHQsIHZhbHVlLCBrZXkpIHtcbiAgICAgIHJlc3VsdFtrZXldID0gdmFsdWU7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBJbnZva2VzIHRoZSBtZXRob2QgYXQgYHBhdGhgIG9mIGVhY2ggZWxlbWVudCBpbiBgY29sbGVjdGlvbmAsIHJldHVybmluZ1xuICAgICAqIGFuIGFycmF5IG9mIHRoZSByZXN1bHRzIG9mIGVhY2ggaW52b2tlZCBtZXRob2QuIEFueSBhZGRpdGlvbmFsIGFyZ3VtZW50c1xuICAgICAqIGFyZSBwcm92aWRlZCB0byBlYWNoIGludm9rZWQgbWV0aG9kLiBJZiBgbWV0aG9kTmFtZWAgaXMgYSBmdW5jdGlvbiBpdCBpc1xuICAgICAqIGludm9rZWQgZm9yLCBhbmQgYHRoaXNgIGJvdW5kIHRvLCBlYWNoIGVsZW1lbnQgaW4gYGNvbGxlY3Rpb25gLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25cbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7QXJyYXl8RnVuY3Rpb258c3RyaW5nfSBwYXRoIFRoZSBwYXRoIG9mIHRoZSBtZXRob2QgdG8gaW52b2tlIG9yXG4gICAgICogIHRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsuLi4qfSBbYXJnc10gVGhlIGFyZ3VtZW50cyB0byBpbnZva2UgdGhlIG1ldGhvZCB3aXRoLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcmVzdWx0cy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pbnZva2UoW1s1LCAxLCA3XSwgWzMsIDIsIDFdXSwgJ3NvcnQnKTtcbiAgICAgKiAvLyA9PiBbWzEsIDUsIDddLCBbMSwgMiwgM11dXG4gICAgICpcbiAgICAgKiBfLmludm9rZShbMTIzLCA0NTZdLCBTdHJpbmcucHJvdG90eXBlLnNwbGl0LCAnJyk7XG4gICAgICogLy8gPT4gW1snMScsICcyJywgJzMnXSwgWyc0JywgJzUnLCAnNiddXVxuICAgICAqL1xuICAgIHZhciBpbnZva2UgPSByZXN0UGFyYW0oZnVuY3Rpb24oY29sbGVjdGlvbiwgcGF0aCwgYXJncykge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgaXNGdW5jID0gdHlwZW9mIHBhdGggPT0gJ2Z1bmN0aW9uJyxcbiAgICAgICAgICBpc1Byb3AgPSBpc0tleShwYXRoKSxcbiAgICAgICAgICByZXN1bHQgPSBpc0FycmF5TGlrZShjb2xsZWN0aW9uKSA/IEFycmF5KGNvbGxlY3Rpb24ubGVuZ3RoKSA6IFtdO1xuXG4gICAgICBiYXNlRWFjaChjb2xsZWN0aW9uLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICB2YXIgZnVuYyA9IGlzRnVuYyA/IHBhdGggOiAoKGlzUHJvcCAmJiB2YWx1ZSAhPSBudWxsKSA/IHZhbHVlW3BhdGhdIDogdW5kZWZpbmVkKTtcbiAgICAgICAgcmVzdWx0WysraW5kZXhdID0gZnVuYyA/IGZ1bmMuYXBwbHkodmFsdWUsIGFyZ3MpIDogaW52b2tlUGF0aCh2YWx1ZSwgcGF0aCwgYXJncyk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIHZhbHVlcyBieSBydW5uaW5nIGVhY2ggZWxlbWVudCBpbiBgY29sbGVjdGlvbmAgdGhyb3VnaFxuICAgICAqIGBpdGVyYXRlZWAuIFRoZSBgaXRlcmF0ZWVgIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIHRocmVlXG4gICAgICogYXJndW1lbnRzOiAodmFsdWUsIGluZGV4fGtleSwgY29sbGVjdGlvbikuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBpdGVyYXRlZWAgdGhlIGNyZWF0ZWQgYF8ucHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhIHZhbHVlIGlzIGFsc28gcHJvdmlkZWQgZm9yIGB0aGlzQXJnYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzUHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSBhIG1hdGNoaW5nIHByb3BlcnR5XG4gICAgICogdmFsdWUsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGl0ZXJhdGVlYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzYCBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuXG4gICAgICogb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBNYW55IGxvZGFzaCBtZXRob2RzIGFyZSBndWFyZGVkIHRvIHdvcmsgYXMgaXRlcmF0ZWVzIGZvciBtZXRob2RzIGxpa2VcbiAgICAgKiBgXy5ldmVyeWAsIGBfLmZpbHRlcmAsIGBfLm1hcGAsIGBfLm1hcFZhbHVlc2AsIGBfLnJlamVjdGAsIGFuZCBgXy5zb21lYC5cbiAgICAgKlxuICAgICAqIFRoZSBndWFyZGVkIG1ldGhvZHMgYXJlOlxuICAgICAqIGBhcnlgLCBgY2FsbGJhY2tgLCBgY2h1bmtgLCBgY2xvbmVgLCBgY3JlYXRlYCwgYGN1cnJ5YCwgYGN1cnJ5UmlnaHRgLFxuICAgICAqIGBkcm9wYCwgYGRyb3BSaWdodGAsIGBldmVyeWAsIGBmaWxsYCwgYGZsYXR0ZW5gLCBgaW52ZXJ0YCwgYG1heGAsIGBtaW5gLFxuICAgICAqIGBwYXJzZUludGAsIGBzbGljZWAsIGBzb3J0QnlgLCBgdGFrZWAsIGB0YWtlUmlnaHRgLCBgdGVtcGxhdGVgLCBgdHJpbWAsXG4gICAgICogYHRyaW1MZWZ0YCwgYHRyaW1SaWdodGAsIGB0cnVuY2AsIGByYW5kb21gLCBgcmFuZ2VgLCBgc2FtcGxlYCwgYHNvbWVgLFxuICAgICAqIGBzdW1gLCBgdW5pcWAsIGFuZCBgd29yZHNgXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAYWxpYXMgY29sbGVjdFxuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtpdGVyYXRlZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZFxuICAgICAqICBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgaXRlcmF0ZWVgLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IG1hcHBlZCBhcnJheS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogZnVuY3Rpb24gdGltZXNUaHJlZShuKSB7XG4gICAgICogICByZXR1cm4gbiAqIDM7XG4gICAgICogfVxuICAgICAqXG4gICAgICogXy5tYXAoWzEsIDJdLCB0aW1lc1RocmVlKTtcbiAgICAgKiAvLyA9PiBbMywgNl1cbiAgICAgKlxuICAgICAqIF8ubWFwKHsgJ2EnOiAxLCAnYic6IDIgfSwgdGltZXNUaHJlZSk7XG4gICAgICogLy8gPT4gWzMsIDZdIChpdGVyYXRpb24gb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQpXG4gICAgICpcbiAgICAgKiB2YXIgdXNlcnMgPSBbXG4gICAgICogICB7ICd1c2VyJzogJ2Jhcm5leScgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAnZnJlZCcgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ucHJvcGVydHlgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8ubWFwKHVzZXJzLCAndXNlcicpO1xuICAgICAqIC8vID0+IFsnYmFybmV5JywgJ2ZyZWQnXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1hcChjb2xsZWN0aW9uLCBpdGVyYXRlZSwgdGhpc0FyZykge1xuICAgICAgdmFyIGZ1bmMgPSBpc0FycmF5KGNvbGxlY3Rpb24pID8gYXJyYXlNYXAgOiBiYXNlTWFwO1xuICAgICAgaXRlcmF0ZWUgPSBnZXRDYWxsYmFjayhpdGVyYXRlZSwgdGhpc0FyZywgMyk7XG4gICAgICByZXR1cm4gZnVuYyhjb2xsZWN0aW9uLCBpdGVyYXRlZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhcnJheSBvZiBlbGVtZW50cyBzcGxpdCBpbnRvIHR3byBncm91cHMsIHRoZSBmaXJzdCBvZiB3aGljaFxuICAgICAqIGNvbnRhaW5zIGVsZW1lbnRzIGBwcmVkaWNhdGVgIHJldHVybnMgdHJ1dGh5IGZvciwgd2hpbGUgdGhlIHNlY29uZCBvZiB3aGljaFxuICAgICAqIGNvbnRhaW5zIGVsZW1lbnRzIGBwcmVkaWNhdGVgIHJldHVybnMgZmFsc2V5IGZvci4gVGhlIHByZWRpY2F0ZSBpcyBib3VuZFxuICAgICAqIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50czogKHZhbHVlLCBpbmRleHxrZXksIGNvbGxlY3Rpb24pLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgcHJlZGljYXRlYCB0aGUgY3JlYXRlZCBgXy5wcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGEgdmFsdWUgaXMgYWxzbyBwcm92aWRlZCBmb3IgYHRoaXNBcmdgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNQcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIGEgbWF0Y2hpbmcgcHJvcGVydHlcbiAgICAgKiB2YWx1ZSwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgcHJlZGljYXRlYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzYCBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuXG4gICAgICogb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvblxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbcHJlZGljYXRlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkXG4gICAgICogIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBwcmVkaWNhdGVgLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgZ3JvdXBlZCBlbGVtZW50cy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5wYXJ0aXRpb24oWzEsIDIsIDNdLCBmdW5jdGlvbihuKSB7XG4gICAgICogICByZXR1cm4gbiAlIDI7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gW1sxLCAzXSwgWzJdXVxuICAgICAqXG4gICAgICogXy5wYXJ0aXRpb24oWzEuMiwgMi4zLCAzLjRdLCBmdW5jdGlvbihuKSB7XG4gICAgICogICByZXR1cm4gdGhpcy5mbG9vcihuKSAlIDI7XG4gICAgICogfSwgTWF0aCk7XG4gICAgICogLy8gPT4gW1sxLjIsIDMuNF0sIFsyLjNdXVxuICAgICAqXG4gICAgICogdmFyIHVzZXJzID0gW1xuICAgICAqICAgeyAndXNlcic6ICdiYXJuZXknLCAgJ2FnZSc6IDM2LCAnYWN0aXZlJzogZmFsc2UgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAnZnJlZCcsICAgICdhZ2UnOiA0MCwgJ2FjdGl2ZSc6IHRydWUgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAncGViYmxlcycsICdhZ2UnOiAxLCAgJ2FjdGl2ZSc6IGZhbHNlIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogdmFyIG1hcHBlciA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgICogICByZXR1cm4gXy5wbHVjayhhcnJheSwgJ3VzZXInKTtcbiAgICAgKiB9O1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLm1hdGNoZXNgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8ubWFwKF8ucGFydGl0aW9uKHVzZXJzLCB7ICdhZ2UnOiAxLCAnYWN0aXZlJzogZmFsc2UgfSksIG1hcHBlcik7XG4gICAgICogLy8gPT4gW1sncGViYmxlcyddLCBbJ2Jhcm5leScsICdmcmVkJ11dXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ubWF0Y2hlc1Byb3BlcnR5YCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLm1hcChfLnBhcnRpdGlvbih1c2VycywgJ2FjdGl2ZScsIGZhbHNlKSwgbWFwcGVyKTtcbiAgICAgKiAvLyA9PiBbWydiYXJuZXknLCAncGViYmxlcyddLCBbJ2ZyZWQnXV1cbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5wcm9wZXJ0eWAgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5tYXAoXy5wYXJ0aXRpb24odXNlcnMsICdhY3RpdmUnKSwgbWFwcGVyKTtcbiAgICAgKiAvLyA9PiBbWydmcmVkJ10sIFsnYmFybmV5JywgJ3BlYmJsZXMnXV1cbiAgICAgKi9cbiAgICB2YXIgcGFydGl0aW9uID0gY3JlYXRlQWdncmVnYXRvcihmdW5jdGlvbihyZXN1bHQsIHZhbHVlLCBrZXkpIHtcbiAgICAgIHJlc3VsdFtrZXkgPyAwIDogMV0ucHVzaCh2YWx1ZSk7XG4gICAgfSwgZnVuY3Rpb24oKSB7IHJldHVybiBbW10sIFtdXTsgfSk7XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiBgcGF0aGAgZnJvbSBhbGwgZWxlbWVudHMgaW4gYGNvbGxlY3Rpb25gLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25cbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBwYXRoIFRoZSBwYXRoIG9mIHRoZSBwcm9wZXJ0eSB0byBwbHVjay5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHByb3BlcnR5IHZhbHVlcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIHVzZXJzID0gW1xuICAgICAqICAgeyAndXNlcic6ICdiYXJuZXknLCAnYWdlJzogMzYgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAnZnJlZCcsICAgJ2FnZSc6IDQwIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogXy5wbHVjayh1c2VycywgJ3VzZXInKTtcbiAgICAgKiAvLyA9PiBbJ2Jhcm5leScsICdmcmVkJ11cbiAgICAgKlxuICAgICAqIHZhciB1c2VySW5kZXggPSBfLmluZGV4QnkodXNlcnMsICd1c2VyJyk7XG4gICAgICogXy5wbHVjayh1c2VySW5kZXgsICdhZ2UnKTtcbiAgICAgKiAvLyA9PiBbMzYsIDQwXSAoaXRlcmF0aW9uIG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkKVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHBsdWNrKGNvbGxlY3Rpb24sIHBhdGgpIHtcbiAgICAgIHJldHVybiBtYXAoY29sbGVjdGlvbiwgcHJvcGVydHkocGF0aCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlZHVjZXMgYGNvbGxlY3Rpb25gIHRvIGEgdmFsdWUgd2hpY2ggaXMgdGhlIGFjY3VtdWxhdGVkIHJlc3VsdCBvZiBydW5uaW5nXG4gICAgICogZWFjaCBlbGVtZW50IGluIGBjb2xsZWN0aW9uYCB0aHJvdWdoIGBpdGVyYXRlZWAsIHdoZXJlIGVhY2ggc3VjY2Vzc2l2ZVxuICAgICAqIGludm9jYXRpb24gaXMgc3VwcGxpZWQgdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgcHJldmlvdXMuIElmIGBhY2N1bXVsYXRvcmBcbiAgICAgKiBpcyBub3QgcHJvdmlkZWQgdGhlIGZpcnN0IGVsZW1lbnQgb2YgYGNvbGxlY3Rpb25gIGlzIHVzZWQgYXMgdGhlIGluaXRpYWxcbiAgICAgKiB2YWx1ZS4gVGhlIGBpdGVyYXRlZWAgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggZm91ciBhcmd1bWVudHM6XG4gICAgICogKGFjY3VtdWxhdG9yLCB2YWx1ZSwgaW5kZXh8a2V5LCBjb2xsZWN0aW9uKS5cbiAgICAgKlxuICAgICAqIE1hbnkgbG9kYXNoIG1ldGhvZHMgYXJlIGd1YXJkZWQgdG8gd29yayBhcyBpdGVyYXRlZXMgZm9yIG1ldGhvZHMgbGlrZVxuICAgICAqIGBfLnJlZHVjZWAsIGBfLnJlZHVjZVJpZ2h0YCwgYW5kIGBfLnRyYW5zZm9ybWAuXG4gICAgICpcbiAgICAgKiBUaGUgZ3VhcmRlZCBtZXRob2RzIGFyZTpcbiAgICAgKiBgYXNzaWduYCwgYGRlZmF1bHRzYCwgYGRlZmF1bHRzRGVlcGAsIGBpbmNsdWRlc2AsIGBtZXJnZWAsIGBzb3J0QnlBbGxgLFxuICAgICAqIGFuZCBgc29ydEJ5T3JkZXJgXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAYWxpYXMgZm9sZGwsIGluamVjdFxuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbaXRlcmF0ZWU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFthY2N1bXVsYXRvcl0gVGhlIGluaXRpYWwgdmFsdWUuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBpdGVyYXRlZWAuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGFjY3VtdWxhdGVkIHZhbHVlLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnJlZHVjZShbMSwgMl0sIGZ1bmN0aW9uKHRvdGFsLCBuKSB7XG4gICAgICogICByZXR1cm4gdG90YWwgKyBuO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IDNcbiAgICAgKlxuICAgICAqIF8ucmVkdWNlKHsgJ2EnOiAxLCAnYic6IDIgfSwgZnVuY3Rpb24ocmVzdWx0LCBuLCBrZXkpIHtcbiAgICAgKiAgIHJlc3VsdFtrZXldID0gbiAqIDM7XG4gICAgICogICByZXR1cm4gcmVzdWx0O1xuICAgICAqIH0sIHt9KTtcbiAgICAgKiAvLyA9PiB7ICdhJzogMywgJ2InOiA2IH0gKGl0ZXJhdGlvbiBvcmRlciBpcyBub3QgZ3VhcmFudGVlZClcbiAgICAgKi9cbiAgICB2YXIgcmVkdWNlID0gY3JlYXRlUmVkdWNlKGFycmF5UmVkdWNlLCBiYXNlRWFjaCk7XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLnJlZHVjZWAgZXhjZXB0IHRoYXQgaXQgaXRlcmF0ZXMgb3ZlciBlbGVtZW50cyBvZlxuICAgICAqIGBjb2xsZWN0aW9uYCBmcm9tIHJpZ2h0IHRvIGxlZnQuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAYWxpYXMgZm9sZHJcbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvblxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2l0ZXJhdGVlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbYWNjdW11bGF0b3JdIFRoZSBpbml0aWFsIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgaXRlcmF0ZWVgLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBhY2N1bXVsYXRlZCB2YWx1ZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGFycmF5ID0gW1swLCAxXSwgWzIsIDNdLCBbNCwgNV1dO1xuICAgICAqXG4gICAgICogXy5yZWR1Y2VSaWdodChhcnJheSwgZnVuY3Rpb24oZmxhdHRlbmVkLCBvdGhlcikge1xuICAgICAqICAgcmV0dXJuIGZsYXR0ZW5lZC5jb25jYXQob3RoZXIpO1xuICAgICAqIH0sIFtdKTtcbiAgICAgKiAvLyA9PiBbNCwgNSwgMiwgMywgMCwgMV1cbiAgICAgKi9cbiAgICB2YXIgcmVkdWNlUmlnaHQgPSBjcmVhdGVSZWR1Y2UoYXJyYXlSZWR1Y2VSaWdodCwgYmFzZUVhY2hSaWdodCk7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgb3Bwb3NpdGUgb2YgYF8uZmlsdGVyYDsgdGhpcyBtZXRob2QgcmV0dXJucyB0aGUgZWxlbWVudHMgb2YgYGNvbGxlY3Rpb25gXG4gICAgICogdGhhdCBgcHJlZGljYXRlYCBkb2VzICoqbm90KiogcmV0dXJuIHRydXRoeSBmb3IuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvblxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbcHJlZGljYXRlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkXG4gICAgICogIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBwcmVkaWNhdGVgLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGZpbHRlcmVkIGFycmF5LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnJlamVjdChbMSwgMiwgMywgNF0sIGZ1bmN0aW9uKG4pIHtcbiAgICAgKiAgIHJldHVybiBuICUgMiA9PSAwO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IFsxLCAzXVxuICAgICAqXG4gICAgICogdmFyIHVzZXJzID0gW1xuICAgICAqICAgeyAndXNlcic6ICdiYXJuZXknLCAnYWdlJzogMzYsICdhY3RpdmUnOiBmYWxzZSB9LFxuICAgICAqICAgeyAndXNlcic6ICdmcmVkJywgICAnYWdlJzogNDAsICdhY3RpdmUnOiB0cnVlIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLm1hdGNoZXNgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8ucGx1Y2soXy5yZWplY3QodXNlcnMsIHsgJ2FnZSc6IDQwLCAnYWN0aXZlJzogdHJ1ZSB9KSwgJ3VzZXInKTtcbiAgICAgKiAvLyA9PiBbJ2Jhcm5leSddXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ubWF0Y2hlc1Byb3BlcnR5YCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLnBsdWNrKF8ucmVqZWN0KHVzZXJzLCAnYWN0aXZlJywgZmFsc2UpLCAndXNlcicpO1xuICAgICAqIC8vID0+IFsnZnJlZCddXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ucHJvcGVydHlgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8ucGx1Y2soXy5yZWplY3QodXNlcnMsICdhY3RpdmUnKSwgJ3VzZXInKTtcbiAgICAgKiAvLyA9PiBbJ2Jhcm5leSddXG4gICAgICovXG4gICAgZnVuY3Rpb24gcmVqZWN0KGNvbGxlY3Rpb24sIHByZWRpY2F0ZSwgdGhpc0FyZykge1xuICAgICAgdmFyIGZ1bmMgPSBpc0FycmF5KGNvbGxlY3Rpb24pID8gYXJyYXlGaWx0ZXIgOiBiYXNlRmlsdGVyO1xuICAgICAgcHJlZGljYXRlID0gZ2V0Q2FsbGJhY2socHJlZGljYXRlLCB0aGlzQXJnLCAzKTtcbiAgICAgIHJldHVybiBmdW5jKGNvbGxlY3Rpb24sIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikge1xuICAgICAgICByZXR1cm4gIXByZWRpY2F0ZSh2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyBhIHJhbmRvbSBlbGVtZW50IG9yIGBuYCByYW5kb20gZWxlbWVudHMgZnJvbSBhIGNvbGxlY3Rpb24uXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvblxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBzYW1wbGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtuXSBUaGUgbnVtYmVyIG9mIGVsZW1lbnRzIHRvIHNhbXBsZS5cbiAgICAgKiBAcGFyYW0tIHtPYmplY3R9IFtndWFyZF0gRW5hYmxlcyB1c2UgYXMgYSBjYWxsYmFjayBmb3IgZnVuY3Rpb25zIGxpa2UgYF8ubWFwYC5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcmFuZG9tIHNhbXBsZShzKS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5zYW1wbGUoWzEsIDIsIDMsIDRdKTtcbiAgICAgKiAvLyA9PiAyXG4gICAgICpcbiAgICAgKiBfLnNhbXBsZShbMSwgMiwgMywgNF0sIDIpO1xuICAgICAqIC8vID0+IFszLCAxXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHNhbXBsZShjb2xsZWN0aW9uLCBuLCBndWFyZCkge1xuICAgICAgaWYgKGd1YXJkID8gaXNJdGVyYXRlZUNhbGwoY29sbGVjdGlvbiwgbiwgZ3VhcmQpIDogbiA9PSBudWxsKSB7XG4gICAgICAgIGNvbGxlY3Rpb24gPSB0b0l0ZXJhYmxlKGNvbGxlY3Rpb24pO1xuICAgICAgICB2YXIgbGVuZ3RoID0gY29sbGVjdGlvbi5sZW5ndGg7XG4gICAgICAgIHJldHVybiBsZW5ndGggPiAwID8gY29sbGVjdGlvbltiYXNlUmFuZG9tKDAsIGxlbmd0aCAtIDEpXSA6IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIHJlc3VsdCA9IHRvQXJyYXkoY29sbGVjdGlvbiksXG4gICAgICAgICAgbGVuZ3RoID0gcmVzdWx0Lmxlbmd0aCxcbiAgICAgICAgICBsYXN0SW5kZXggPSBsZW5ndGggLSAxO1xuXG4gICAgICBuID0gbmF0aXZlTWluKG4gPCAwID8gMCA6ICgrbiB8fCAwKSwgbGVuZ3RoKTtcbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbikge1xuICAgICAgICB2YXIgcmFuZCA9IGJhc2VSYW5kb20oaW5kZXgsIGxhc3RJbmRleCksXG4gICAgICAgICAgICB2YWx1ZSA9IHJlc3VsdFtyYW5kXTtcblxuICAgICAgICByZXN1bHRbcmFuZF0gPSByZXN1bHRbaW5kZXhdO1xuICAgICAgICByZXN1bHRbaW5kZXhdID0gdmFsdWU7XG4gICAgICB9XG4gICAgICByZXN1bHQubGVuZ3RoID0gbjtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhcnJheSBvZiBzaHVmZmxlZCB2YWx1ZXMsIHVzaW5nIGEgdmVyc2lvbiBvZiB0aGVcbiAgICAgKiBbRmlzaGVyLVlhdGVzIHNodWZmbGVdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Zpc2hlci1ZYXRlc19zaHVmZmxlKS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIHNodWZmbGUuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgc2h1ZmZsZWQgYXJyYXkuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uc2h1ZmZsZShbMSwgMiwgMywgNF0pO1xuICAgICAqIC8vID0+IFs0LCAxLCAzLCAyXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHNodWZmbGUoY29sbGVjdGlvbikge1xuICAgICAgcmV0dXJuIHNhbXBsZShjb2xsZWN0aW9uLCBQT1NJVElWRV9JTkZJTklUWSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgc2l6ZSBvZiBgY29sbGVjdGlvbmAgYnkgcmV0dXJuaW5nIGl0cyBsZW5ndGggZm9yIGFycmF5LWxpa2VcbiAgICAgKiB2YWx1ZXMgb3IgdGhlIG51bWJlciBvZiBvd24gZW51bWVyYWJsZSBwcm9wZXJ0aWVzIGZvciBvYmplY3RzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25cbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaW5zcGVjdC5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBzaXplIG9mIGBjb2xsZWN0aW9uYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5zaXplKFsxLCAyLCAzXSk7XG4gICAgICogLy8gPT4gM1xuICAgICAqXG4gICAgICogXy5zaXplKHsgJ2EnOiAxLCAnYic6IDIgfSk7XG4gICAgICogLy8gPT4gMlxuICAgICAqXG4gICAgICogXy5zaXplKCdwZWJibGVzJyk7XG4gICAgICogLy8gPT4gN1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIHNpemUoY29sbGVjdGlvbikge1xuICAgICAgdmFyIGxlbmd0aCA9IGNvbGxlY3Rpb24gPyBnZXRMZW5ndGgoY29sbGVjdGlvbikgOiAwO1xuICAgICAgcmV0dXJuIGlzTGVuZ3RoKGxlbmd0aCkgPyBsZW5ndGggOiBrZXlzKGNvbGxlY3Rpb24pLmxlbmd0aDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHByZWRpY2F0ZWAgcmV0dXJucyB0cnV0aHkgZm9yICoqYW55KiogZWxlbWVudCBvZiBgY29sbGVjdGlvbmAuXG4gICAgICogVGhlIGZ1bmN0aW9uIHJldHVybnMgYXMgc29vbiBhcyBpdCBmaW5kcyBhIHBhc3NpbmcgdmFsdWUgYW5kIGRvZXMgbm90IGl0ZXJhdGVcbiAgICAgKiBvdmVyIHRoZSBlbnRpcmUgY29sbGVjdGlvbi4gVGhlIHByZWRpY2F0ZSBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWRcbiAgICAgKiB3aXRoIHRocmVlIGFyZ3VtZW50czogKHZhbHVlLCBpbmRleHxrZXksIGNvbGxlY3Rpb24pLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgcHJlZGljYXRlYCB0aGUgY3JlYXRlZCBgXy5wcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGEgdmFsdWUgaXMgYWxzbyBwcm92aWRlZCBmb3IgYHRoaXNBcmdgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNQcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIGEgbWF0Y2hpbmcgcHJvcGVydHlcbiAgICAgKiB2YWx1ZSwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgcHJlZGljYXRlYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzYCBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuXG4gICAgICogb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAYWxpYXMgYW55XG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25cbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW3ByZWRpY2F0ZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZFxuICAgICAqICBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgcHJlZGljYXRlYC5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW55IGVsZW1lbnQgcGFzc2VzIHRoZSBwcmVkaWNhdGUgY2hlY2ssXG4gICAgICogIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5zb21lKFtudWxsLCAwLCAneWVzJywgZmFsc2VdLCBCb29sZWFuKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiB2YXIgdXNlcnMgPSBbXG4gICAgICogICB7ICd1c2VyJzogJ2Jhcm5leScsICdhY3RpdmUnOiB0cnVlIH0sXG4gICAgICogICB7ICd1c2VyJzogJ2ZyZWQnLCAgICdhY3RpdmUnOiBmYWxzZSB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5tYXRjaGVzYCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLnNvbWUodXNlcnMsIHsgJ3VzZXInOiAnYmFybmV5JywgJ2FjdGl2ZSc6IGZhbHNlIH0pO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ubWF0Y2hlc1Byb3BlcnR5YCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLnNvbWUodXNlcnMsICdhY3RpdmUnLCBmYWxzZSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLnByb3BlcnR5YCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLnNvbWUodXNlcnMsICdhY3RpdmUnKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICovXG4gICAgZnVuY3Rpb24gc29tZShjb2xsZWN0aW9uLCBwcmVkaWNhdGUsIHRoaXNBcmcpIHtcbiAgICAgIHZhciBmdW5jID0gaXNBcnJheShjb2xsZWN0aW9uKSA/IGFycmF5U29tZSA6IGJhc2VTb21lO1xuICAgICAgaWYgKHRoaXNBcmcgJiYgaXNJdGVyYXRlZUNhbGwoY29sbGVjdGlvbiwgcHJlZGljYXRlLCB0aGlzQXJnKSkge1xuICAgICAgICBwcmVkaWNhdGUgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHByZWRpY2F0ZSAhPSAnZnVuY3Rpb24nIHx8IHRoaXNBcmcgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBwcmVkaWNhdGUgPSBnZXRDYWxsYmFjayhwcmVkaWNhdGUsIHRoaXNBcmcsIDMpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZ1bmMoY29sbGVjdGlvbiwgcHJlZGljYXRlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIGVsZW1lbnRzLCBzb3J0ZWQgaW4gYXNjZW5kaW5nIG9yZGVyIGJ5IHRoZSByZXN1bHRzIG9mXG4gICAgICogcnVubmluZyBlYWNoIGVsZW1lbnQgaW4gYSBjb2xsZWN0aW9uIHRocm91Z2ggYGl0ZXJhdGVlYC4gVGhpcyBtZXRob2QgcGVyZm9ybXNcbiAgICAgKiBhIHN0YWJsZSBzb3J0LCB0aGF0IGlzLCBpdCBwcmVzZXJ2ZXMgdGhlIG9yaWdpbmFsIHNvcnQgb3JkZXIgb2YgZXF1YWwgZWxlbWVudHMuXG4gICAgICogVGhlIGBpdGVyYXRlZWAgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdGhyZWUgYXJndW1lbnRzOlxuICAgICAqICh2YWx1ZSwgaW5kZXh8a2V5LCBjb2xsZWN0aW9uKS5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGl0ZXJhdGVlYCB0aGUgY3JlYXRlZCBgXy5wcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGEgdmFsdWUgaXMgYWxzbyBwcm92aWRlZCBmb3IgYHRoaXNBcmdgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNQcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIGEgbWF0Y2hpbmcgcHJvcGVydHlcbiAgICAgKiB2YWx1ZSwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgaXRlcmF0ZWVgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNgIHN0eWxlXG4gICAgICogY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW5cbiAgICAgKiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtpdGVyYXRlZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZFxuICAgICAqICBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgaXRlcmF0ZWVgLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IHNvcnRlZCBhcnJheS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5zb3J0QnkoWzEsIDIsIDNdLCBmdW5jdGlvbihuKSB7XG4gICAgICogICByZXR1cm4gTWF0aC5zaW4obik7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gWzMsIDEsIDJdXG4gICAgICpcbiAgICAgKiBfLnNvcnRCeShbMSwgMiwgM10sIGZ1bmN0aW9uKG4pIHtcbiAgICAgKiAgIHJldHVybiB0aGlzLnNpbihuKTtcbiAgICAgKiB9LCBNYXRoKTtcbiAgICAgKiAvLyA9PiBbMywgMSwgMl1cbiAgICAgKlxuICAgICAqIHZhciB1c2VycyA9IFtcbiAgICAgKiAgIHsgJ3VzZXInOiAnZnJlZCcgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAncGViYmxlcycgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAnYmFybmV5JyB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5wcm9wZXJ0eWAgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5wbHVjayhfLnNvcnRCeSh1c2VycywgJ3VzZXInKSwgJ3VzZXInKTtcbiAgICAgKiAvLyA9PiBbJ2Jhcm5leScsICdmcmVkJywgJ3BlYmJsZXMnXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHNvcnRCeShjb2xsZWN0aW9uLCBpdGVyYXRlZSwgdGhpc0FyZykge1xuICAgICAgaWYgKGNvbGxlY3Rpb24gPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgICBpZiAodGhpc0FyZyAmJiBpc0l0ZXJhdGVlQ2FsbChjb2xsZWN0aW9uLCBpdGVyYXRlZSwgdGhpc0FyZykpIHtcbiAgICAgICAgaXRlcmF0ZWUgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICB2YXIgaW5kZXggPSAtMTtcbiAgICAgIGl0ZXJhdGVlID0gZ2V0Q2FsbGJhY2soaXRlcmF0ZWUsIHRoaXNBcmcsIDMpO1xuXG4gICAgICB2YXIgcmVzdWx0ID0gYmFzZU1hcChjb2xsZWN0aW9uLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBjb2xsZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiB7ICdjcml0ZXJpYSc6IGl0ZXJhdGVlKHZhbHVlLCBrZXksIGNvbGxlY3Rpb24pLCAnaW5kZXgnOiArK2luZGV4LCAndmFsdWUnOiB2YWx1ZSB9O1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gYmFzZVNvcnRCeShyZXN1bHQsIGNvbXBhcmVBc2NlbmRpbmcpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uc29ydEJ5YCBleGNlcHQgdGhhdCBpdCBjYW4gc29ydCBieSBtdWx0aXBsZSBpdGVyYXRlZXNcbiAgICAgKiBvciBwcm9wZXJ0eSBuYW1lcy5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYW4gaXRlcmF0ZWUgdGhlIGNyZWF0ZWQgYF8ucHJvcGVydHlgXG4gICAgICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGFuIGl0ZXJhdGVlIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNgIHN0eWxlXG4gICAgICogY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW5cbiAgICAgKiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0gey4uLihGdW5jdGlvbnxGdW5jdGlvbltdfE9iamVjdHxPYmplY3RbXXxzdHJpbmd8c3RyaW5nW10pfSBpdGVyYXRlZXNcbiAgICAgKiAgVGhlIGl0ZXJhdGVlcyB0byBzb3J0IGJ5LCBzcGVjaWZpZWQgYXMgaW5kaXZpZHVhbCB2YWx1ZXMgb3IgYXJyYXlzIG9mIHZhbHVlcy5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBzb3J0ZWQgYXJyYXkuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciB1c2VycyA9IFtcbiAgICAgKiAgIHsgJ3VzZXInOiAnZnJlZCcsICAgJ2FnZSc6IDQ4IH0sXG4gICAgICogICB7ICd1c2VyJzogJ2Jhcm5leScsICdhZ2UnOiAzNiB9LFxuICAgICAqICAgeyAndXNlcic6ICdmcmVkJywgICAnYWdlJzogNDIgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAnYmFybmV5JywgJ2FnZSc6IDM0IH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogXy5tYXAoXy5zb3J0QnlBbGwodXNlcnMsIFsndXNlcicsICdhZ2UnXSksIF8udmFsdWVzKTtcbiAgICAgKiAvLyA9PiBbWydiYXJuZXknLCAzNF0sIFsnYmFybmV5JywgMzZdLCBbJ2ZyZWQnLCA0Ml0sIFsnZnJlZCcsIDQ4XV1cbiAgICAgKlxuICAgICAqIF8ubWFwKF8uc29ydEJ5QWxsKHVzZXJzLCAndXNlcicsIGZ1bmN0aW9uKGNocikge1xuICAgICAqICAgcmV0dXJuIE1hdGguZmxvb3IoY2hyLmFnZSAvIDEwKTtcbiAgICAgKiB9KSwgXy52YWx1ZXMpO1xuICAgICAqIC8vID0+IFtbJ2Jhcm5leScsIDM2XSwgWydiYXJuZXknLCAzNF0sIFsnZnJlZCcsIDQ4XSwgWydmcmVkJywgNDJdXVxuICAgICAqL1xuICAgIHZhciBzb3J0QnlBbGwgPSByZXN0UGFyYW0oZnVuY3Rpb24oY29sbGVjdGlvbiwgaXRlcmF0ZWVzKSB7XG4gICAgICBpZiAoY29sbGVjdGlvbiA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICAgIHZhciBndWFyZCA9IGl0ZXJhdGVlc1syXTtcbiAgICAgIGlmIChndWFyZCAmJiBpc0l0ZXJhdGVlQ2FsbChpdGVyYXRlZXNbMF0sIGl0ZXJhdGVlc1sxXSwgZ3VhcmQpKSB7XG4gICAgICAgIGl0ZXJhdGVlcy5sZW5ndGggPSAxO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGJhc2VTb3J0QnlPcmRlcihjb2xsZWN0aW9uLCBiYXNlRmxhdHRlbihpdGVyYXRlZXMpLCBbXSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLnNvcnRCeUFsbGAgZXhjZXB0IHRoYXQgaXQgYWxsb3dzIHNwZWNpZnlpbmcgdGhlXG4gICAgICogc29ydCBvcmRlcnMgb2YgdGhlIGl0ZXJhdGVlcyB0byBzb3J0IGJ5LiBJZiBgb3JkZXJzYCBpcyB1bnNwZWNpZmllZCwgYWxsXG4gICAgICogdmFsdWVzIGFyZSBzb3J0ZWQgaW4gYXNjZW5kaW5nIG9yZGVyLiBPdGhlcndpc2UsIGEgdmFsdWUgaXMgc29ydGVkIGluXG4gICAgICogYXNjZW5kaW5nIG9yZGVyIGlmIGl0cyBjb3JyZXNwb25kaW5nIG9yZGVyIGlzIFwiYXNjXCIsIGFuZCBkZXNjZW5kaW5nIGlmIFwiZGVzY1wiLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBhbiBpdGVyYXRlZSB0aGUgY3JlYXRlZCBgXy5wcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYW4gaXRlcmF0ZWUgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc2Agc3R5bGVcbiAgICAgKiBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlblxuICAgICAqIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25cbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb25bXXxPYmplY3RbXXxzdHJpbmdbXX0gaXRlcmF0ZWVzIFRoZSBpdGVyYXRlZXMgdG8gc29ydCBieS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW5bXX0gW29yZGVyc10gVGhlIHNvcnQgb3JkZXJzIG9mIGBpdGVyYXRlZXNgLlxuICAgICAqIEBwYXJhbS0ge09iamVjdH0gW2d1YXJkXSBFbmFibGVzIHVzZSBhcyBhIGNhbGxiYWNrIGZvciBmdW5jdGlvbnMgbGlrZSBgXy5yZWR1Y2VgLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IHNvcnRlZCBhcnJheS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIHVzZXJzID0gW1xuICAgICAqICAgeyAndXNlcic6ICdmcmVkJywgICAnYWdlJzogNDggfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAnYmFybmV5JywgJ2FnZSc6IDM0IH0sXG4gICAgICogICB7ICd1c2VyJzogJ2ZyZWQnLCAgICdhZ2UnOiA0MiB9LFxuICAgICAqICAgeyAndXNlcic6ICdiYXJuZXknLCAnYWdlJzogMzYgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiAvLyBzb3J0IGJ5IGB1c2VyYCBpbiBhc2NlbmRpbmcgb3JkZXIgYW5kIGJ5IGBhZ2VgIGluIGRlc2NlbmRpbmcgb3JkZXJcbiAgICAgKiBfLm1hcChfLnNvcnRCeU9yZGVyKHVzZXJzLCBbJ3VzZXInLCAnYWdlJ10sIFsnYXNjJywgJ2Rlc2MnXSksIF8udmFsdWVzKTtcbiAgICAgKiAvLyA9PiBbWydiYXJuZXknLCAzNl0sIFsnYmFybmV5JywgMzRdLCBbJ2ZyZWQnLCA0OF0sIFsnZnJlZCcsIDQyXV1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzb3J0QnlPcmRlcihjb2xsZWN0aW9uLCBpdGVyYXRlZXMsIG9yZGVycywgZ3VhcmQpIHtcbiAgICAgIGlmIChjb2xsZWN0aW9uID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgICAgaWYgKGd1YXJkICYmIGlzSXRlcmF0ZWVDYWxsKGl0ZXJhdGVlcywgb3JkZXJzLCBndWFyZCkpIHtcbiAgICAgICAgb3JkZXJzID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgaWYgKCFpc0FycmF5KGl0ZXJhdGVlcykpIHtcbiAgICAgICAgaXRlcmF0ZWVzID0gaXRlcmF0ZWVzID09IG51bGwgPyBbXSA6IFtpdGVyYXRlZXNdO1xuICAgICAgfVxuICAgICAgaWYgKCFpc0FycmF5KG9yZGVycykpIHtcbiAgICAgICAgb3JkZXJzID0gb3JkZXJzID09IG51bGwgPyBbXSA6IFtvcmRlcnNdO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGJhc2VTb3J0QnlPcmRlcihjb2xsZWN0aW9uLCBpdGVyYXRlZXMsIG9yZGVycyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgYSBkZWVwIGNvbXBhcmlzb24gYmV0d2VlbiBlYWNoIGVsZW1lbnQgaW4gYGNvbGxlY3Rpb25gIGFuZCB0aGVcbiAgICAgKiBzb3VyY2Ugb2JqZWN0LCByZXR1cm5pbmcgYW4gYXJyYXkgb2YgYWxsIGVsZW1lbnRzIHRoYXQgaGF2ZSBlcXVpdmFsZW50XG4gICAgICogcHJvcGVydHkgdmFsdWVzLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoaXMgbWV0aG9kIHN1cHBvcnRzIGNvbXBhcmluZyBhcnJheXMsIGJvb2xlYW5zLCBgRGF0ZWAgb2JqZWN0cyxcbiAgICAgKiBudW1iZXJzLCBgT2JqZWN0YCBvYmplY3RzLCByZWdleGVzLCBhbmQgc3RyaW5ncy4gT2JqZWN0cyBhcmUgY29tcGFyZWQgYnlcbiAgICAgKiB0aGVpciBvd24sIG5vdCBpbmhlcml0ZWQsIGVudW1lcmFibGUgcHJvcGVydGllcy4gRm9yIGNvbXBhcmluZyBhIHNpbmdsZVxuICAgICAqIG93biBvciBpbmhlcml0ZWQgcHJvcGVydHkgdmFsdWUgc2VlIGBfLm1hdGNoZXNQcm9wZXJ0eWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvblxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBzZWFyY2guXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZSBUaGUgb2JqZWN0IG9mIHByb3BlcnR5IHZhbHVlcyB0byBtYXRjaC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBmaWx0ZXJlZCBhcnJheS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIHVzZXJzID0gW1xuICAgICAqICAgeyAndXNlcic6ICdiYXJuZXknLCAnYWdlJzogMzYsICdhY3RpdmUnOiBmYWxzZSwgJ3BldHMnOiBbJ2hvcHB5J10gfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAnZnJlZCcsICAgJ2FnZSc6IDQwLCAnYWN0aXZlJzogdHJ1ZSwgJ3BldHMnOiBbJ2JhYnkgcHVzcycsICdkaW5vJ10gfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiBfLnBsdWNrKF8ud2hlcmUodXNlcnMsIHsgJ2FnZSc6IDM2LCAnYWN0aXZlJzogZmFsc2UgfSksICd1c2VyJyk7XG4gICAgICogLy8gPT4gWydiYXJuZXknXVxuICAgICAqXG4gICAgICogXy5wbHVjayhfLndoZXJlKHVzZXJzLCB7ICdwZXRzJzogWydkaW5vJ10gfSksICd1c2VyJyk7XG4gICAgICogLy8gPT4gWydmcmVkJ11cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB3aGVyZShjb2xsZWN0aW9uLCBzb3VyY2UpIHtcbiAgICAgIHJldHVybiBmaWx0ZXIoY29sbGVjdGlvbiwgYmFzZU1hdGNoZXMoc291cmNlKSk7XG4gICAgfVxuXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0aGF0IGhhdmUgZWxhcHNlZCBzaW5jZSB0aGUgVW5peCBlcG9jaFxuICAgICAqICgxIEphbnVhcnkgMTk3MCAwMDowMDowMCBVVEMpLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IERhdGVcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5kZWZlcihmdW5jdGlvbihzdGFtcCkge1xuICAgICAqICAgY29uc29sZS5sb2coXy5ub3coKSAtIHN0YW1wKTtcbiAgICAgKiB9LCBfLm5vdygpKTtcbiAgICAgKiAvLyA9PiBsb2dzIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGl0IHRvb2sgZm9yIHRoZSBkZWZlcnJlZCBmdW5jdGlvbiB0byBiZSBpbnZva2VkXG4gICAgICovXG4gICAgdmFyIG5vdyA9IG5hdGl2ZU5vdyB8fCBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICB9O1xuXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgLyoqXG4gICAgICogVGhlIG9wcG9zaXRlIG9mIGBfLmJlZm9yZWA7IHRoaXMgbWV0aG9kIGNyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGludm9rZXNcbiAgICAgKiBgZnVuY2Agb25jZSBpdCBpcyBjYWxsZWQgYG5gIG9yIG1vcmUgdGltZXMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbiBUaGUgbnVtYmVyIG9mIGNhbGxzIGJlZm9yZSBgZnVuY2AgaXMgaW52b2tlZC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byByZXN0cmljdC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyByZXN0cmljdGVkIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgc2F2ZXMgPSBbJ3Byb2ZpbGUnLCAnc2V0dGluZ3MnXTtcbiAgICAgKlxuICAgICAqIHZhciBkb25lID0gXy5hZnRlcihzYXZlcy5sZW5ndGgsIGZ1bmN0aW9uKCkge1xuICAgICAqICAgY29uc29sZS5sb2coJ2RvbmUgc2F2aW5nIScpO1xuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogXy5mb3JFYWNoKHNhdmVzLCBmdW5jdGlvbih0eXBlKSB7XG4gICAgICogICBhc3luY1NhdmUoeyAndHlwZSc6IHR5cGUsICdjb21wbGV0ZSc6IGRvbmUgfSk7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gbG9ncyAnZG9uZSBzYXZpbmchJyBhZnRlciB0aGUgdHdvIGFzeW5jIHNhdmVzIGhhdmUgY29tcGxldGVkXG4gICAgICovXG4gICAgZnVuY3Rpb24gYWZ0ZXIobiwgZnVuYykge1xuICAgICAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBuID09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICB2YXIgdGVtcCA9IG47XG4gICAgICAgICAgbiA9IGZ1bmM7XG4gICAgICAgICAgZnVuYyA9IHRlbXA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBuID0gbmF0aXZlSXNGaW5pdGUobiA9ICtuKSA/IG4gOiAwO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoLS1uIDwgMSkge1xuICAgICAgICAgIHJldHVybiBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgYWNjZXB0cyB1cCB0byBgbmAgYXJndW1lbnRzIGlnbm9yaW5nIGFueVxuICAgICAqIGFkZGl0aW9uYWwgYXJndW1lbnRzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gY2FwIGFyZ3VtZW50cyBmb3IuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtuPWZ1bmMubGVuZ3RoXSBUaGUgYXJpdHkgY2FwLlxuICAgICAqIEBwYXJhbS0ge09iamVjdH0gW2d1YXJkXSBFbmFibGVzIHVzZSBhcyBhIGNhbGxiYWNrIGZvciBmdW5jdGlvbnMgbGlrZSBgXy5tYXBgLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLm1hcChbJzYnLCAnOCcsICcxMCddLCBfLmFyeShwYXJzZUludCwgMSkpO1xuICAgICAqIC8vID0+IFs2LCA4LCAxMF1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhcnkoZnVuYywgbiwgZ3VhcmQpIHtcbiAgICAgIGlmIChndWFyZCAmJiBpc0l0ZXJhdGVlQ2FsbChmdW5jLCBuLCBndWFyZCkpIHtcbiAgICAgICAgbiA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIG4gPSAoZnVuYyAmJiBuID09IG51bGwpID8gZnVuYy5sZW5ndGggOiBuYXRpdmVNYXgoK24gfHwgMCwgMCk7XG4gICAgICByZXR1cm4gY3JlYXRlV3JhcHBlcihmdW5jLCBBUllfRkxBRywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBuKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBpbnZva2VzIGBmdW5jYCwgd2l0aCB0aGUgYHRoaXNgIGJpbmRpbmcgYW5kIGFyZ3VtZW50c1xuICAgICAqIG9mIHRoZSBjcmVhdGVkIGZ1bmN0aW9uLCB3aGlsZSBpdCBpcyBjYWxsZWQgbGVzcyB0aGFuIGBuYCB0aW1lcy4gU3Vic2VxdWVudFxuICAgICAqIGNhbGxzIHRvIHRoZSBjcmVhdGVkIGZ1bmN0aW9uIHJldHVybiB0aGUgcmVzdWx0IG9mIHRoZSBsYXN0IGBmdW5jYCBpbnZvY2F0aW9uLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG4gVGhlIG51bWJlciBvZiBjYWxscyBhdCB3aGljaCBgZnVuY2AgaXMgbm8gbG9uZ2VyIGludm9rZWQuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gcmVzdHJpY3QuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgcmVzdHJpY3RlZCBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogalF1ZXJ5KCcjYWRkJykub24oJ2NsaWNrJywgXy5iZWZvcmUoNSwgYWRkQ29udGFjdFRvTGlzdCkpO1xuICAgICAqIC8vID0+IGFsbG93cyBhZGRpbmcgdXAgdG8gNCBjb250YWN0cyB0byB0aGUgbGlzdFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJlZm9yZShuLCBmdW5jKSB7XG4gICAgICB2YXIgcmVzdWx0O1xuICAgICAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBuID09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICB2YXIgdGVtcCA9IG47XG4gICAgICAgICAgbiA9IGZ1bmM7XG4gICAgICAgICAgZnVuYyA9IHRlbXA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICgtLW4gPiAwKSB7XG4gICAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChuIDw9IDEpIHtcbiAgICAgICAgICBmdW5jID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGludm9rZXMgYGZ1bmNgIHdpdGggdGhlIGB0aGlzYCBiaW5kaW5nIG9mIGB0aGlzQXJnYFxuICAgICAqIGFuZCBwcmVwZW5kcyBhbnkgYWRkaXRpb25hbCBgXy5iaW5kYCBhcmd1bWVudHMgdG8gdGhvc2UgcHJvdmlkZWQgdG8gdGhlXG4gICAgICogYm91bmQgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBUaGUgYF8uYmluZC5wbGFjZWhvbGRlcmAgdmFsdWUsIHdoaWNoIGRlZmF1bHRzIHRvIGBfYCBpbiBtb25vbGl0aGljIGJ1aWxkcyxcbiAgICAgKiBtYXkgYmUgdXNlZCBhcyBhIHBsYWNlaG9sZGVyIGZvciBwYXJ0aWFsbHkgYXBwbGllZCBhcmd1bWVudHMuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVW5saWtlIG5hdGl2ZSBgRnVuY3Rpb24jYmluZGAgdGhpcyBtZXRob2QgZG9lcyBub3Qgc2V0IHRoZSBcImxlbmd0aFwiXG4gICAgICogcHJvcGVydHkgb2YgYm91bmQgZnVuY3Rpb25zLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gYmluZC5cbiAgICAgKiBAcGFyYW0geyp9IHRoaXNBcmcgVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBmdW5jYC5cbiAgICAgKiBAcGFyYW0gey4uLip9IFtwYXJ0aWFsc10gVGhlIGFyZ3VtZW50cyB0byBiZSBwYXJ0aWFsbHkgYXBwbGllZC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBib3VuZCBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGdyZWV0ID0gZnVuY3Rpb24oZ3JlZXRpbmcsIHB1bmN0dWF0aW9uKSB7XG4gICAgICogICByZXR1cm4gZ3JlZXRpbmcgKyAnICcgKyB0aGlzLnVzZXIgKyBwdW5jdHVhdGlvbjtcbiAgICAgKiB9O1xuICAgICAqXG4gICAgICogdmFyIG9iamVjdCA9IHsgJ3VzZXInOiAnZnJlZCcgfTtcbiAgICAgKlxuICAgICAqIHZhciBib3VuZCA9IF8uYmluZChncmVldCwgb2JqZWN0LCAnaGknKTtcbiAgICAgKiBib3VuZCgnIScpO1xuICAgICAqIC8vID0+ICdoaSBmcmVkISdcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHBsYWNlaG9sZGVyc1xuICAgICAqIHZhciBib3VuZCA9IF8uYmluZChncmVldCwgb2JqZWN0LCBfLCAnIScpO1xuICAgICAqIGJvdW5kKCdoaScpO1xuICAgICAqIC8vID0+ICdoaSBmcmVkISdcbiAgICAgKi9cbiAgICB2YXIgYmluZCA9IHJlc3RQYXJhbShmdW5jdGlvbihmdW5jLCB0aGlzQXJnLCBwYXJ0aWFscykge1xuICAgICAgdmFyIGJpdG1hc2sgPSBCSU5EX0ZMQUc7XG4gICAgICBpZiAocGFydGlhbHMubGVuZ3RoKSB7XG4gICAgICAgIHZhciBob2xkZXJzID0gcmVwbGFjZUhvbGRlcnMocGFydGlhbHMsIGJpbmQucGxhY2Vob2xkZXIpO1xuICAgICAgICBiaXRtYXNrIHw9IFBBUlRJQUxfRkxBRztcbiAgICAgIH1cbiAgICAgIHJldHVybiBjcmVhdGVXcmFwcGVyKGZ1bmMsIGJpdG1hc2ssIHRoaXNBcmcsIHBhcnRpYWxzLCBob2xkZXJzKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEJpbmRzIG1ldGhvZHMgb2YgYW4gb2JqZWN0IHRvIHRoZSBvYmplY3QgaXRzZWxmLCBvdmVyd3JpdGluZyB0aGUgZXhpc3RpbmdcbiAgICAgKiBtZXRob2QuIE1ldGhvZCBuYW1lcyBtYXkgYmUgc3BlY2lmaWVkIGFzIGluZGl2aWR1YWwgYXJndW1lbnRzIG9yIGFzIGFycmF5c1xuICAgICAqIG9mIG1ldGhvZCBuYW1lcy4gSWYgbm8gbWV0aG9kIG5hbWVzIGFyZSBwcm92aWRlZCBhbGwgZW51bWVyYWJsZSBmdW5jdGlvblxuICAgICAqIHByb3BlcnRpZXMsIG93biBhbmQgaW5oZXJpdGVkLCBvZiBgb2JqZWN0YCBhcmUgYm91bmQuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgZG9lcyBub3Qgc2V0IHRoZSBcImxlbmd0aFwiIHByb3BlcnR5IG9mIGJvdW5kIGZ1bmN0aW9ucy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBiaW5kIGFuZCBhc3NpZ24gdGhlIGJvdW5kIG1ldGhvZHMgdG8uXG4gICAgICogQHBhcmFtIHsuLi4oc3RyaW5nfHN0cmluZ1tdKX0gW21ldGhvZE5hbWVzXSBUaGUgb2JqZWN0IG1ldGhvZCBuYW1lcyB0byBiaW5kLFxuICAgICAqICBzcGVjaWZpZWQgYXMgaW5kaXZpZHVhbCBtZXRob2QgbmFtZXMgb3IgYXJyYXlzIG9mIG1ldGhvZCBuYW1lcy5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgdmlldyA9IHtcbiAgICAgKiAgICdsYWJlbCc6ICdkb2NzJyxcbiAgICAgKiAgICdvbkNsaWNrJzogZnVuY3Rpb24oKSB7XG4gICAgICogICAgIGNvbnNvbGUubG9nKCdjbGlja2VkICcgKyB0aGlzLmxhYmVsKTtcbiAgICAgKiAgIH1cbiAgICAgKiB9O1xuICAgICAqXG4gICAgICogXy5iaW5kQWxsKHZpZXcpO1xuICAgICAqIGpRdWVyeSgnI2RvY3MnKS5vbignY2xpY2snLCB2aWV3Lm9uQ2xpY2spO1xuICAgICAqIC8vID0+IGxvZ3MgJ2NsaWNrZWQgZG9jcycgd2hlbiB0aGUgZWxlbWVudCBpcyBjbGlja2VkXG4gICAgICovXG4gICAgdmFyIGJpbmRBbGwgPSByZXN0UGFyYW0oZnVuY3Rpb24ob2JqZWN0LCBtZXRob2ROYW1lcykge1xuICAgICAgbWV0aG9kTmFtZXMgPSBtZXRob2ROYW1lcy5sZW5ndGggPyBiYXNlRmxhdHRlbihtZXRob2ROYW1lcykgOiBmdW5jdGlvbnMob2JqZWN0KTtcblxuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gbWV0aG9kTmFtZXMubGVuZ3RoO1xuXG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICB2YXIga2V5ID0gbWV0aG9kTmFtZXNbaW5kZXhdO1xuICAgICAgICBvYmplY3Rba2V5XSA9IGNyZWF0ZVdyYXBwZXIob2JqZWN0W2tleV0sIEJJTkRfRkxBRywgb2JqZWN0KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBpbnZva2VzIHRoZSBtZXRob2QgYXQgYG9iamVjdFtrZXldYCBhbmQgcHJlcGVuZHNcbiAgICAgKiBhbnkgYWRkaXRpb25hbCBgXy5iaW5kS2V5YCBhcmd1bWVudHMgdG8gdGhvc2UgcHJvdmlkZWQgdG8gdGhlIGJvdW5kIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgZGlmZmVycyBmcm9tIGBfLmJpbmRgIGJ5IGFsbG93aW5nIGJvdW5kIGZ1bmN0aW9ucyB0byByZWZlcmVuY2VcbiAgICAgKiBtZXRob2RzIHRoYXQgbWF5IGJlIHJlZGVmaW5lZCBvciBkb24ndCB5ZXQgZXhpc3QuXG4gICAgICogU2VlIFtQZXRlciBNaWNoYXV4J3MgYXJ0aWNsZV0oaHR0cDovL3BldGVyLm1pY2hhdXguY2EvYXJ0aWNsZXMvbGF6eS1mdW5jdGlvbi1kZWZpbml0aW9uLXBhdHRlcm4pXG4gICAgICogZm9yIG1vcmUgZGV0YWlscy5cbiAgICAgKlxuICAgICAqIFRoZSBgXy5iaW5kS2V5LnBsYWNlaG9sZGVyYCB2YWx1ZSwgd2hpY2ggZGVmYXVsdHMgdG8gYF9gIGluIG1vbm9saXRoaWNcbiAgICAgKiBidWlsZHMsIG1heSBiZSB1c2VkIGFzIGEgcGxhY2Vob2xkZXIgZm9yIHBhcnRpYWxseSBhcHBsaWVkIGFyZ3VtZW50cy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0aGUgbWV0aG9kIGJlbG9uZ3MgdG8uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBtZXRob2QuXG4gICAgICogQHBhcmFtIHsuLi4qfSBbcGFydGlhbHNdIFRoZSBhcmd1bWVudHMgdG8gYmUgcGFydGlhbGx5IGFwcGxpZWQuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgYm91bmQgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBvYmplY3QgPSB7XG4gICAgICogICAndXNlcic6ICdmcmVkJyxcbiAgICAgKiAgICdncmVldCc6IGZ1bmN0aW9uKGdyZWV0aW5nLCBwdW5jdHVhdGlvbikge1xuICAgICAqICAgICByZXR1cm4gZ3JlZXRpbmcgKyAnICcgKyB0aGlzLnVzZXIgKyBwdW5jdHVhdGlvbjtcbiAgICAgKiAgIH1cbiAgICAgKiB9O1xuICAgICAqXG4gICAgICogdmFyIGJvdW5kID0gXy5iaW5kS2V5KG9iamVjdCwgJ2dyZWV0JywgJ2hpJyk7XG4gICAgICogYm91bmQoJyEnKTtcbiAgICAgKiAvLyA9PiAnaGkgZnJlZCEnXG4gICAgICpcbiAgICAgKiBvYmplY3QuZ3JlZXQgPSBmdW5jdGlvbihncmVldGluZywgcHVuY3R1YXRpb24pIHtcbiAgICAgKiAgIHJldHVybiBncmVldGluZyArICd5YSAnICsgdGhpcy51c2VyICsgcHVuY3R1YXRpb247XG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIGJvdW5kKCchJyk7XG4gICAgICogLy8gPT4gJ2hpeWEgZnJlZCEnXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBwbGFjZWhvbGRlcnNcbiAgICAgKiB2YXIgYm91bmQgPSBfLmJpbmRLZXkob2JqZWN0LCAnZ3JlZXQnLCBfLCAnIScpO1xuICAgICAqIGJvdW5kKCdoaScpO1xuICAgICAqIC8vID0+ICdoaXlhIGZyZWQhJ1xuICAgICAqL1xuICAgIHZhciBiaW5kS2V5ID0gcmVzdFBhcmFtKGZ1bmN0aW9uKG9iamVjdCwga2V5LCBwYXJ0aWFscykge1xuICAgICAgdmFyIGJpdG1hc2sgPSBCSU5EX0ZMQUcgfCBCSU5EX0tFWV9GTEFHO1xuICAgICAgaWYgKHBhcnRpYWxzLmxlbmd0aCkge1xuICAgICAgICB2YXIgaG9sZGVycyA9IHJlcGxhY2VIb2xkZXJzKHBhcnRpYWxzLCBiaW5kS2V5LnBsYWNlaG9sZGVyKTtcbiAgICAgICAgYml0bWFzayB8PSBQQVJUSUFMX0ZMQUc7XG4gICAgICB9XG4gICAgICByZXR1cm4gY3JlYXRlV3JhcHBlcihrZXksIGJpdG1hc2ssIG9iamVjdCwgcGFydGlhbHMsIGhvbGRlcnMpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgYWNjZXB0cyBvbmUgb3IgbW9yZSBhcmd1bWVudHMgb2YgYGZ1bmNgIHRoYXQgd2hlblxuICAgICAqIGNhbGxlZCBlaXRoZXIgaW52b2tlcyBgZnVuY2AgcmV0dXJuaW5nIGl0cyByZXN1bHQsIGlmIGFsbCBgZnVuY2AgYXJndW1lbnRzXG4gICAgICogaGF2ZSBiZWVuIHByb3ZpZGVkLCBvciByZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCBhY2NlcHRzIG9uZSBvciBtb3JlIG9mIHRoZVxuICAgICAqIHJlbWFpbmluZyBgZnVuY2AgYXJndW1lbnRzLCBhbmQgc28gb24uIFRoZSBhcml0eSBvZiBgZnVuY2AgbWF5IGJlIHNwZWNpZmllZFxuICAgICAqIGlmIGBmdW5jLmxlbmd0aGAgaXMgbm90IHN1ZmZpY2llbnQuXG4gICAgICpcbiAgICAgKiBUaGUgYF8uY3VycnkucGxhY2Vob2xkZXJgIHZhbHVlLCB3aGljaCBkZWZhdWx0cyB0byBgX2AgaW4gbW9ub2xpdGhpYyBidWlsZHMsXG4gICAgICogbWF5IGJlIHVzZWQgYXMgYSBwbGFjZWhvbGRlciBmb3IgcHJvdmlkZWQgYXJndW1lbnRzLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoaXMgbWV0aG9kIGRvZXMgbm90IHNldCB0aGUgXCJsZW5ndGhcIiBwcm9wZXJ0eSBvZiBjdXJyaWVkIGZ1bmN0aW9ucy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGN1cnJ5LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbYXJpdHk9ZnVuYy5sZW5ndGhdIFRoZSBhcml0eSBvZiBgZnVuY2AuXG4gICAgICogQHBhcmFtLSB7T2JqZWN0fSBbZ3VhcmRdIEVuYWJsZXMgdXNlIGFzIGEgY2FsbGJhY2sgZm9yIGZ1bmN0aW9ucyBsaWtlIGBfLm1hcGAuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgY3VycmllZCBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGFiYyA9IGZ1bmN0aW9uKGEsIGIsIGMpIHtcbiAgICAgKiAgIHJldHVybiBbYSwgYiwgY107XG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIHZhciBjdXJyaWVkID0gXy5jdXJyeShhYmMpO1xuICAgICAqXG4gICAgICogY3VycmllZCgxKSgyKSgzKTtcbiAgICAgKiAvLyA9PiBbMSwgMiwgM11cbiAgICAgKlxuICAgICAqIGN1cnJpZWQoMSwgMikoMyk7XG4gICAgICogLy8gPT4gWzEsIDIsIDNdXG4gICAgICpcbiAgICAgKiBjdXJyaWVkKDEsIDIsIDMpO1xuICAgICAqIC8vID0+IFsxLCAyLCAzXVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgcGxhY2Vob2xkZXJzXG4gICAgICogY3VycmllZCgxKShfLCAzKSgyKTtcbiAgICAgKiAvLyA9PiBbMSwgMiwgM11cbiAgICAgKi9cbiAgICB2YXIgY3VycnkgPSBjcmVhdGVDdXJyeShDVVJSWV9GTEFHKTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uY3VycnlgIGV4Y2VwdCB0aGF0IGFyZ3VtZW50cyBhcmUgYXBwbGllZCB0byBgZnVuY2BcbiAgICAgKiBpbiB0aGUgbWFubmVyIG9mIGBfLnBhcnRpYWxSaWdodGAgaW5zdGVhZCBvZiBgXy5wYXJ0aWFsYC5cbiAgICAgKlxuICAgICAqIFRoZSBgXy5jdXJyeVJpZ2h0LnBsYWNlaG9sZGVyYCB2YWx1ZSwgd2hpY2ggZGVmYXVsdHMgdG8gYF9gIGluIG1vbm9saXRoaWNcbiAgICAgKiBidWlsZHMsIG1heSBiZSB1c2VkIGFzIGEgcGxhY2Vob2xkZXIgZm9yIHByb3ZpZGVkIGFyZ3VtZW50cy5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBkb2VzIG5vdCBzZXQgdGhlIFwibGVuZ3RoXCIgcHJvcGVydHkgb2YgY3VycmllZCBmdW5jdGlvbnMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBjdXJyeS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2FyaXR5PWZ1bmMubGVuZ3RoXSBUaGUgYXJpdHkgb2YgYGZ1bmNgLlxuICAgICAqIEBwYXJhbS0ge09iamVjdH0gW2d1YXJkXSBFbmFibGVzIHVzZSBhcyBhIGNhbGxiYWNrIGZvciBmdW5jdGlvbnMgbGlrZSBgXy5tYXBgLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGN1cnJpZWQgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBhYmMgPSBmdW5jdGlvbihhLCBiLCBjKSB7XG4gICAgICogICByZXR1cm4gW2EsIGIsIGNdO1xuICAgICAqIH07XG4gICAgICpcbiAgICAgKiB2YXIgY3VycmllZCA9IF8uY3VycnlSaWdodChhYmMpO1xuICAgICAqXG4gICAgICogY3VycmllZCgzKSgyKSgxKTtcbiAgICAgKiAvLyA9PiBbMSwgMiwgM11cbiAgICAgKlxuICAgICAqIGN1cnJpZWQoMiwgMykoMSk7XG4gICAgICogLy8gPT4gWzEsIDIsIDNdXG4gICAgICpcbiAgICAgKiBjdXJyaWVkKDEsIDIsIDMpO1xuICAgICAqIC8vID0+IFsxLCAyLCAzXVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgcGxhY2Vob2xkZXJzXG4gICAgICogY3VycmllZCgzKSgxLCBfKSgyKTtcbiAgICAgKiAvLyA9PiBbMSwgMiwgM11cbiAgICAgKi9cbiAgICB2YXIgY3VycnlSaWdodCA9IGNyZWF0ZUN1cnJ5KENVUlJZX1JJR0hUX0ZMQUcpO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGRlYm91bmNlZCBmdW5jdGlvbiB0aGF0IGRlbGF5cyBpbnZva2luZyBgZnVuY2AgdW50aWwgYWZ0ZXIgYHdhaXRgXG4gICAgICogbWlsbGlzZWNvbmRzIGhhdmUgZWxhcHNlZCBzaW5jZSB0aGUgbGFzdCB0aW1lIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gd2FzXG4gICAgICogaW52b2tlZC4gVGhlIGRlYm91bmNlZCBmdW5jdGlvbiBjb21lcyB3aXRoIGEgYGNhbmNlbGAgbWV0aG9kIHRvIGNhbmNlbFxuICAgICAqIGRlbGF5ZWQgaW52b2NhdGlvbnMuIFByb3ZpZGUgYW4gb3B0aW9ucyBvYmplY3QgdG8gaW5kaWNhdGUgdGhhdCBgZnVuY2BcbiAgICAgKiBzaG91bGQgYmUgaW52b2tlZCBvbiB0aGUgbGVhZGluZyBhbmQvb3IgdHJhaWxpbmcgZWRnZSBvZiB0aGUgYHdhaXRgIHRpbWVvdXQuXG4gICAgICogU3Vic2VxdWVudCBjYWxscyB0byB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIHJldHVybiB0aGUgcmVzdWx0IG9mIHRoZSBsYXN0XG4gICAgICogYGZ1bmNgIGludm9jYXRpb24uXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogSWYgYGxlYWRpbmdgIGFuZCBgdHJhaWxpbmdgIG9wdGlvbnMgYXJlIGB0cnVlYCwgYGZ1bmNgIGlzIGludm9rZWRcbiAgICAgKiBvbiB0aGUgdHJhaWxpbmcgZWRnZSBvZiB0aGUgdGltZW91dCBvbmx5IGlmIHRoZSB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIGlzXG4gICAgICogaW52b2tlZCBtb3JlIHRoYW4gb25jZSBkdXJpbmcgdGhlIGB3YWl0YCB0aW1lb3V0LlxuICAgICAqXG4gICAgICogU2VlIFtEYXZpZCBDb3JiYWNobydzIGFydGljbGVdKGh0dHA6Ly9kcnVwYWxtb3Rpb24uY29tL2FydGljbGUvZGVib3VuY2UtYW5kLXRocm90dGxlLXZpc3VhbC1leHBsYW5hdGlvbilcbiAgICAgKiBmb3IgZGV0YWlscyBvdmVyIHRoZSBkaWZmZXJlbmNlcyBiZXR3ZWVuIGBfLmRlYm91bmNlYCBhbmQgYF8udGhyb3R0bGVgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gZGVib3VuY2UuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFt3YWl0PTBdIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIGRlbGF5LlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gVGhlIG9wdGlvbnMgb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMubGVhZGluZz1mYWxzZV0gU3BlY2lmeSBpbnZva2luZyBvbiB0aGUgbGVhZGluZ1xuICAgICAqICBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5tYXhXYWl0XSBUaGUgbWF4aW11bSB0aW1lIGBmdW5jYCBpcyBhbGxvd2VkIHRvIGJlXG4gICAgICogIGRlbGF5ZWQgYmVmb3JlIGl0IGlzIGludm9rZWQuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy50cmFpbGluZz10cnVlXSBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSB0cmFpbGluZ1xuICAgICAqICBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGRlYm91bmNlZCBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogLy8gYXZvaWQgY29zdGx5IGNhbGN1bGF0aW9ucyB3aGlsZSB0aGUgd2luZG93IHNpemUgaXMgaW4gZmx1eFxuICAgICAqIGpRdWVyeSh3aW5kb3cpLm9uKCdyZXNpemUnLCBfLmRlYm91bmNlKGNhbGN1bGF0ZUxheW91dCwgMTUwKSk7XG4gICAgICpcbiAgICAgKiAvLyBpbnZva2UgYHNlbmRNYWlsYCB3aGVuIHRoZSBjbGljayBldmVudCBpcyBmaXJlZCwgZGVib3VuY2luZyBzdWJzZXF1ZW50IGNhbGxzXG4gICAgICogalF1ZXJ5KCcjcG9zdGJveCcpLm9uKCdjbGljaycsIF8uZGVib3VuY2Uoc2VuZE1haWwsIDMwMCwge1xuICAgICAqICAgJ2xlYWRpbmcnOiB0cnVlLFxuICAgICAqICAgJ3RyYWlsaW5nJzogZmFsc2VcbiAgICAgKiB9KSk7XG4gICAgICpcbiAgICAgKiAvLyBlbnN1cmUgYGJhdGNoTG9nYCBpcyBpbnZva2VkIG9uY2UgYWZ0ZXIgMSBzZWNvbmQgb2YgZGVib3VuY2VkIGNhbGxzXG4gICAgICogdmFyIHNvdXJjZSA9IG5ldyBFdmVudFNvdXJjZSgnL3N0cmVhbScpO1xuICAgICAqIGpRdWVyeShzb3VyY2UpLm9uKCdtZXNzYWdlJywgXy5kZWJvdW5jZShiYXRjaExvZywgMjUwLCB7XG4gICAgICogICAnbWF4V2FpdCc6IDEwMDBcbiAgICAgKiB9KSk7XG4gICAgICpcbiAgICAgKiAvLyBjYW5jZWwgYSBkZWJvdW5jZWQgY2FsbFxuICAgICAqIHZhciB0b2RvQ2hhbmdlcyA9IF8uZGVib3VuY2UoYmF0Y2hMb2csIDEwMDApO1xuICAgICAqIE9iamVjdC5vYnNlcnZlKG1vZGVscy50b2RvLCB0b2RvQ2hhbmdlcyk7XG4gICAgICpcbiAgICAgKiBPYmplY3Qub2JzZXJ2ZShtb2RlbHMsIGZ1bmN0aW9uKGNoYW5nZXMpIHtcbiAgICAgKiAgIGlmIChfLmZpbmQoY2hhbmdlcywgeyAndXNlcic6ICd0b2RvJywgJ3R5cGUnOiAnZGVsZXRlJ30pKSB7XG4gICAgICogICAgIHRvZG9DaGFuZ2VzLmNhbmNlbCgpO1xuICAgICAqICAgfVxuICAgICAqIH0sIFsnZGVsZXRlJ10pO1xuICAgICAqXG4gICAgICogLy8gLi4uYXQgc29tZSBwb2ludCBgbW9kZWxzLnRvZG9gIGlzIGNoYW5nZWRcbiAgICAgKiBtb2RlbHMudG9kby5jb21wbGV0ZWQgPSB0cnVlO1xuICAgICAqXG4gICAgICogLy8gLi4uYmVmb3JlIDEgc2Vjb25kIGhhcyBwYXNzZWQgYG1vZGVscy50b2RvYCBpcyBkZWxldGVkXG4gICAgICogLy8gd2hpY2ggY2FuY2VscyB0aGUgZGVib3VuY2VkIGB0b2RvQ2hhbmdlc2AgY2FsbFxuICAgICAqIGRlbGV0ZSBtb2RlbHMudG9kbztcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBkZWJvdW5jZShmdW5jLCB3YWl0LCBvcHRpb25zKSB7XG4gICAgICB2YXIgYXJncyxcbiAgICAgICAgICBtYXhUaW1lb3V0SWQsXG4gICAgICAgICAgcmVzdWx0LFxuICAgICAgICAgIHN0YW1wLFxuICAgICAgICAgIHRoaXNBcmcsXG4gICAgICAgICAgdGltZW91dElkLFxuICAgICAgICAgIHRyYWlsaW5nQ2FsbCxcbiAgICAgICAgICBsYXN0Q2FsbGVkID0gMCxcbiAgICAgICAgICBtYXhXYWl0ID0gZmFsc2UsXG4gICAgICAgICAgdHJhaWxpbmcgPSB0cnVlO1xuXG4gICAgICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG4gICAgICB9XG4gICAgICB3YWl0ID0gd2FpdCA8IDAgPyAwIDogKCt3YWl0IHx8IDApO1xuICAgICAgaWYgKG9wdGlvbnMgPT09IHRydWUpIHtcbiAgICAgICAgdmFyIGxlYWRpbmcgPSB0cnVlO1xuICAgICAgICB0cmFpbGluZyA9IGZhbHNlO1xuICAgICAgfSBlbHNlIGlmIChpc09iamVjdChvcHRpb25zKSkge1xuICAgICAgICBsZWFkaW5nID0gISFvcHRpb25zLmxlYWRpbmc7XG4gICAgICAgIG1heFdhaXQgPSAnbWF4V2FpdCcgaW4gb3B0aW9ucyAmJiBuYXRpdmVNYXgoK29wdGlvbnMubWF4V2FpdCB8fCAwLCB3YWl0KTtcbiAgICAgICAgdHJhaWxpbmcgPSAndHJhaWxpbmcnIGluIG9wdGlvbnMgPyAhIW9wdGlvbnMudHJhaWxpbmcgOiB0cmFpbGluZztcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gY2FuY2VsKCkge1xuICAgICAgICBpZiAodGltZW91dElkKSB7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1heFRpbWVvdXRJZCkge1xuICAgICAgICAgIGNsZWFyVGltZW91dChtYXhUaW1lb3V0SWQpO1xuICAgICAgICB9XG4gICAgICAgIGxhc3RDYWxsZWQgPSAwO1xuICAgICAgICBtYXhUaW1lb3V0SWQgPSB0aW1lb3V0SWQgPSB0cmFpbGluZ0NhbGwgPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGNvbXBsZXRlKGlzQ2FsbGVkLCBpZCkge1xuICAgICAgICBpZiAoaWQpIHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQoaWQpO1xuICAgICAgICB9XG4gICAgICAgIG1heFRpbWVvdXRJZCA9IHRpbWVvdXRJZCA9IHRyYWlsaW5nQ2FsbCA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKGlzQ2FsbGVkKSB7XG4gICAgICAgICAgbGFzdENhbGxlZCA9IG5vdygpO1xuICAgICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpc0FyZywgYXJncyk7XG4gICAgICAgICAgaWYgKCF0aW1lb3V0SWQgJiYgIW1heFRpbWVvdXRJZCkge1xuICAgICAgICAgICAgYXJncyA9IHRoaXNBcmcgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGRlbGF5ZWQoKSB7XG4gICAgICAgIHZhciByZW1haW5pbmcgPSB3YWl0IC0gKG5vdygpIC0gc3RhbXApO1xuICAgICAgICBpZiAocmVtYWluaW5nIDw9IDAgfHwgcmVtYWluaW5nID4gd2FpdCkge1xuICAgICAgICAgIGNvbXBsZXRlKHRyYWlsaW5nQ2FsbCwgbWF4VGltZW91dElkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KGRlbGF5ZWQsIHJlbWFpbmluZyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gbWF4RGVsYXllZCgpIHtcbiAgICAgICAgY29tcGxldGUodHJhaWxpbmcsIHRpbWVvdXRJZCk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGRlYm91bmNlZCgpIHtcbiAgICAgICAgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgICAgc3RhbXAgPSBub3coKTtcbiAgICAgICAgdGhpc0FyZyA9IHRoaXM7XG4gICAgICAgIHRyYWlsaW5nQ2FsbCA9IHRyYWlsaW5nICYmICh0aW1lb3V0SWQgfHwgIWxlYWRpbmcpO1xuXG4gICAgICAgIGlmIChtYXhXYWl0ID09PSBmYWxzZSkge1xuICAgICAgICAgIHZhciBsZWFkaW5nQ2FsbCA9IGxlYWRpbmcgJiYgIXRpbWVvdXRJZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoIW1heFRpbWVvdXRJZCAmJiAhbGVhZGluZykge1xuICAgICAgICAgICAgbGFzdENhbGxlZCA9IHN0YW1wO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgcmVtYWluaW5nID0gbWF4V2FpdCAtIChzdGFtcCAtIGxhc3RDYWxsZWQpLFxuICAgICAgICAgICAgICBpc0NhbGxlZCA9IHJlbWFpbmluZyA8PSAwIHx8IHJlbWFpbmluZyA+IG1heFdhaXQ7XG5cbiAgICAgICAgICBpZiAoaXNDYWxsZWQpIHtcbiAgICAgICAgICAgIGlmIChtYXhUaW1lb3V0SWQpIHtcbiAgICAgICAgICAgICAgbWF4VGltZW91dElkID0gY2xlYXJUaW1lb3V0KG1heFRpbWVvdXRJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsYXN0Q2FsbGVkID0gc3RhbXA7XG4gICAgICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmICghbWF4VGltZW91dElkKSB7XG4gICAgICAgICAgICBtYXhUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KG1heERlbGF5ZWQsIHJlbWFpbmluZyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChpc0NhbGxlZCAmJiB0aW1lb3V0SWQpIHtcbiAgICAgICAgICB0aW1lb3V0SWQgPSBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghdGltZW91dElkICYmIHdhaXQgIT09IG1heFdhaXQpIHtcbiAgICAgICAgICB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KGRlbGF5ZWQsIHdhaXQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsZWFkaW5nQ2FsbCkge1xuICAgICAgICAgIGlzQ2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0NhbGxlZCAmJiAhdGltZW91dElkICYmICFtYXhUaW1lb3V0SWQpIHtcbiAgICAgICAgICBhcmdzID0gdGhpc0FyZyA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgICAgZGVib3VuY2VkLmNhbmNlbCA9IGNhbmNlbDtcbiAgICAgIHJldHVybiBkZWJvdW5jZWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVmZXJzIGludm9raW5nIHRoZSBgZnVuY2AgdW50aWwgdGhlIGN1cnJlbnQgY2FsbCBzdGFjayBoYXMgY2xlYXJlZC4gQW55XG4gICAgICogYWRkaXRpb25hbCBhcmd1bWVudHMgYXJlIHByb3ZpZGVkIHRvIGBmdW5jYCB3aGVuIGl0IGlzIGludm9rZWQuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBkZWZlci5cbiAgICAgKiBAcGFyYW0gey4uLip9IFthcmdzXSBUaGUgYXJndW1lbnRzIHRvIGludm9rZSB0aGUgZnVuY3Rpb24gd2l0aC5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSB0aW1lciBpZC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5kZWZlcihmdW5jdGlvbih0ZXh0KSB7XG4gICAgICogICBjb25zb2xlLmxvZyh0ZXh0KTtcbiAgICAgKiB9LCAnZGVmZXJyZWQnKTtcbiAgICAgKiAvLyBsb2dzICdkZWZlcnJlZCcgYWZ0ZXIgb25lIG9yIG1vcmUgbWlsbGlzZWNvbmRzXG4gICAgICovXG4gICAgdmFyIGRlZmVyID0gcmVzdFBhcmFtKGZ1bmN0aW9uKGZ1bmMsIGFyZ3MpIHtcbiAgICAgIHJldHVybiBiYXNlRGVsYXkoZnVuYywgMSwgYXJncyk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBJbnZva2VzIGBmdW5jYCBhZnRlciBgd2FpdGAgbWlsbGlzZWNvbmRzLiBBbnkgYWRkaXRpb25hbCBhcmd1bWVudHMgYXJlXG4gICAgICogcHJvdmlkZWQgdG8gYGZ1bmNgIHdoZW4gaXQgaXMgaW52b2tlZC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRlbGF5LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB3YWl0IFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIGRlbGF5IGludm9jYXRpb24uXG4gICAgICogQHBhcmFtIHsuLi4qfSBbYXJnc10gVGhlIGFyZ3VtZW50cyB0byBpbnZva2UgdGhlIGZ1bmN0aW9uIHdpdGguXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgdGltZXIgaWQuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uZGVsYXkoZnVuY3Rpb24odGV4dCkge1xuICAgICAqICAgY29uc29sZS5sb2codGV4dCk7XG4gICAgICogfSwgMTAwMCwgJ2xhdGVyJyk7XG4gICAgICogLy8gPT4gbG9ncyAnbGF0ZXInIGFmdGVyIG9uZSBzZWNvbmRcbiAgICAgKi9cbiAgICB2YXIgZGVsYXkgPSByZXN0UGFyYW0oZnVuY3Rpb24oZnVuYywgd2FpdCwgYXJncykge1xuICAgICAgcmV0dXJuIGJhc2VEZWxheShmdW5jLCB3YWl0LCBhcmdzKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIHJlc3VsdCBvZiBpbnZva2luZyB0aGUgcHJvdmlkZWRcbiAgICAgKiBmdW5jdGlvbnMgd2l0aCB0aGUgYHRoaXNgIGJpbmRpbmcgb2YgdGhlIGNyZWF0ZWQgZnVuY3Rpb24sIHdoZXJlIGVhY2hcbiAgICAgKiBzdWNjZXNzaXZlIGludm9jYXRpb24gaXMgc3VwcGxpZWQgdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgcHJldmlvdXMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAcGFyYW0gey4uLkZ1bmN0aW9ufSBbZnVuY3NdIEZ1bmN0aW9ucyB0byBpbnZva2UuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGZ1bmN0aW9uIHNxdWFyZShuKSB7XG4gICAgICogICByZXR1cm4gbiAqIG47XG4gICAgICogfVxuICAgICAqXG4gICAgICogdmFyIGFkZFNxdWFyZSA9IF8uZmxvdyhfLmFkZCwgc3F1YXJlKTtcbiAgICAgKiBhZGRTcXVhcmUoMSwgMik7XG4gICAgICogLy8gPT4gOVxuICAgICAqL1xuICAgIHZhciBmbG93ID0gY3JlYXRlRmxvdygpO1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5mbG93YCBleGNlcHQgdGhhdCBpdCBjcmVhdGVzIGEgZnVuY3Rpb24gdGhhdFxuICAgICAqIGludm9rZXMgdGhlIHByb3ZpZGVkIGZ1bmN0aW9ucyBmcm9tIHJpZ2h0IHRvIGxlZnQuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAYWxpYXMgYmFja2Zsb3csIGNvbXBvc2VcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAcGFyYW0gey4uLkZ1bmN0aW9ufSBbZnVuY3NdIEZ1bmN0aW9ucyB0byBpbnZva2UuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGZ1bmN0aW9uIHNxdWFyZShuKSB7XG4gICAgICogICByZXR1cm4gbiAqIG47XG4gICAgICogfVxuICAgICAqXG4gICAgICogdmFyIGFkZFNxdWFyZSA9IF8uZmxvd1JpZ2h0KHNxdWFyZSwgXy5hZGQpO1xuICAgICAqIGFkZFNxdWFyZSgxLCAyKTtcbiAgICAgKiAvLyA9PiA5XG4gICAgICovXG4gICAgdmFyIGZsb3dSaWdodCA9IGNyZWF0ZUZsb3codHJ1ZSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBtZW1vaXplcyB0aGUgcmVzdWx0IG9mIGBmdW5jYC4gSWYgYHJlc29sdmVyYCBpc1xuICAgICAqIHByb3ZpZGVkIGl0IGRldGVybWluZXMgdGhlIGNhY2hlIGtleSBmb3Igc3RvcmluZyB0aGUgcmVzdWx0IGJhc2VkIG9uIHRoZVxuICAgICAqIGFyZ3VtZW50cyBwcm92aWRlZCB0byB0aGUgbWVtb2l6ZWQgZnVuY3Rpb24uIEJ5IGRlZmF1bHQsIHRoZSBmaXJzdCBhcmd1bWVudFxuICAgICAqIHByb3ZpZGVkIHRvIHRoZSBtZW1vaXplZCBmdW5jdGlvbiBpcyBjb2VyY2VkIHRvIGEgc3RyaW5nIGFuZCB1c2VkIGFzIHRoZVxuICAgICAqIGNhY2hlIGtleS4gVGhlIGBmdW5jYCBpcyBpbnZva2VkIHdpdGggdGhlIGB0aGlzYCBiaW5kaW5nIG9mIHRoZSBtZW1vaXplZFxuICAgICAqIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoZSBjYWNoZSBpcyBleHBvc2VkIGFzIHRoZSBgY2FjaGVgIHByb3BlcnR5IG9uIHRoZSBtZW1vaXplZFxuICAgICAqIGZ1bmN0aW9uLiBJdHMgY3JlYXRpb24gbWF5IGJlIGN1c3RvbWl6ZWQgYnkgcmVwbGFjaW5nIHRoZSBgXy5tZW1vaXplLkNhY2hlYFxuICAgICAqIGNvbnN0cnVjdG9yIHdpdGggb25lIHdob3NlIGluc3RhbmNlcyBpbXBsZW1lbnQgdGhlIFtgTWFwYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtcHJvcGVydGllcy1vZi10aGUtbWFwLXByb3RvdHlwZS1vYmplY3QpXG4gICAgICogbWV0aG9kIGludGVyZmFjZSBvZiBgZ2V0YCwgYGhhc2AsIGFuZCBgc2V0YC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGhhdmUgaXRzIG91dHB1dCBtZW1vaXplZC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcmVzb2x2ZXJdIFRoZSBmdW5jdGlvbiB0byByZXNvbHZlIHRoZSBjYWNoZSBrZXkuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgbWVtb2l6aW5nIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgdXBwZXJDYXNlID0gXy5tZW1vaXplKGZ1bmN0aW9uKHN0cmluZykge1xuICAgICAqICAgcmV0dXJuIHN0cmluZy50b1VwcGVyQ2FzZSgpO1xuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogdXBwZXJDYXNlKCdmcmVkJyk7XG4gICAgICogLy8gPT4gJ0ZSRUQnXG4gICAgICpcbiAgICAgKiAvLyBtb2RpZnlpbmcgdGhlIHJlc3VsdCBjYWNoZVxuICAgICAqIHVwcGVyQ2FzZS5jYWNoZS5zZXQoJ2ZyZWQnLCAnQkFSTkVZJyk7XG4gICAgICogdXBwZXJDYXNlKCdmcmVkJyk7XG4gICAgICogLy8gPT4gJ0JBUk5FWSdcbiAgICAgKlxuICAgICAqIC8vIHJlcGxhY2luZyBgXy5tZW1vaXplLkNhY2hlYFxuICAgICAqIHZhciBvYmplY3QgPSB7ICd1c2VyJzogJ2ZyZWQnIH07XG4gICAgICogdmFyIG90aGVyID0geyAndXNlcic6ICdiYXJuZXknIH07XG4gICAgICogdmFyIGlkZW50aXR5ID0gXy5tZW1vaXplKF8uaWRlbnRpdHkpO1xuICAgICAqXG4gICAgICogaWRlbnRpdHkob2JqZWN0KTtcbiAgICAgKiAvLyA9PiB7ICd1c2VyJzogJ2ZyZWQnIH1cbiAgICAgKiBpZGVudGl0eShvdGhlcik7XG4gICAgICogLy8gPT4geyAndXNlcic6ICdmcmVkJyB9XG4gICAgICpcbiAgICAgKiBfLm1lbW9pemUuQ2FjaGUgPSBXZWFrTWFwO1xuICAgICAqIHZhciBpZGVudGl0eSA9IF8ubWVtb2l6ZShfLmlkZW50aXR5KTtcbiAgICAgKlxuICAgICAqIGlkZW50aXR5KG9iamVjdCk7XG4gICAgICogLy8gPT4geyAndXNlcic6ICdmcmVkJyB9XG4gICAgICogaWRlbnRpdHkob3RoZXIpO1xuICAgICAqIC8vID0+IHsgJ3VzZXInOiAnYmFybmV5JyB9XG4gICAgICovXG4gICAgZnVuY3Rpb24gbWVtb2l6ZShmdW5jLCByZXNvbHZlcikge1xuICAgICAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicgfHwgKHJlc29sdmVyICYmIHR5cGVvZiByZXNvbHZlciAhPSAnZnVuY3Rpb24nKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG4gICAgICB9XG4gICAgICB2YXIgbWVtb2l6ZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHMsXG4gICAgICAgICAgICBrZXkgPSByZXNvbHZlciA/IHJlc29sdmVyLmFwcGx5KHRoaXMsIGFyZ3MpIDogYXJnc1swXSxcbiAgICAgICAgICAgIGNhY2hlID0gbWVtb2l6ZWQuY2FjaGU7XG5cbiAgICAgICAgaWYgKGNhY2hlLmhhcyhrZXkpKSB7XG4gICAgICAgICAgcmV0dXJuIGNhY2hlLmdldChrZXkpO1xuICAgICAgICB9XG4gICAgICAgIHZhciByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgICAgICBtZW1vaXplZC5jYWNoZSA9IGNhY2hlLnNldChrZXksIHJlc3VsdCk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9O1xuICAgICAgbWVtb2l6ZWQuY2FjaGUgPSBuZXcgbWVtb2l6ZS5DYWNoZTtcbiAgICAgIHJldHVybiBtZW1vaXplZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBydW5zIGVhY2ggYXJndW1lbnQgdGhyb3VnaCBhIGNvcnJlc3BvbmRpbmdcbiAgICAgKiB0cmFuc2Zvcm0gZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byB3cmFwLlxuICAgICAqIEBwYXJhbSB7Li4uKEZ1bmN0aW9ufEZ1bmN0aW9uW10pfSBbdHJhbnNmb3Jtc10gVGhlIGZ1bmN0aW9ucyB0byB0cmFuc2Zvcm1cbiAgICAgKiBhcmd1bWVudHMsIHNwZWNpZmllZCBhcyBpbmRpdmlkdWFsIGZ1bmN0aW9ucyBvciBhcnJheXMgb2YgZnVuY3Rpb25zLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBmdW5jdGlvbiBkb3VibGVkKG4pIHtcbiAgICAgKiAgIHJldHVybiBuICogMjtcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBmdW5jdGlvbiBzcXVhcmUobikge1xuICAgICAqICAgcmV0dXJuIG4gKiBuO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIHZhciBtb2RkZWQgPSBfLm1vZEFyZ3MoZnVuY3Rpb24oeCwgeSkge1xuICAgICAqICAgcmV0dXJuIFt4LCB5XTtcbiAgICAgKiB9LCBzcXVhcmUsIGRvdWJsZWQpO1xuICAgICAqXG4gICAgICogbW9kZGVkKDEsIDIpO1xuICAgICAqIC8vID0+IFsxLCA0XVxuICAgICAqXG4gICAgICogbW9kZGVkKDUsIDEwKTtcbiAgICAgKiAvLyA9PiBbMjUsIDIwXVxuICAgICAqL1xuICAgIHZhciBtb2RBcmdzID0gcmVzdFBhcmFtKGZ1bmN0aW9uKGZ1bmMsIHRyYW5zZm9ybXMpIHtcbiAgICAgIHRyYW5zZm9ybXMgPSBiYXNlRmxhdHRlbih0cmFuc2Zvcm1zKTtcbiAgICAgIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nIHx8ICFhcnJheUV2ZXJ5KHRyYW5zZm9ybXMsIGJhc2VJc0Z1bmN0aW9uKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG4gICAgICB9XG4gICAgICB2YXIgbGVuZ3RoID0gdHJhbnNmb3Jtcy5sZW5ndGg7XG4gICAgICByZXR1cm4gcmVzdFBhcmFtKGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gbmF0aXZlTWluKGFyZ3MubGVuZ3RoLCBsZW5ndGgpO1xuICAgICAgICB3aGlsZSAoaW5kZXgtLSkge1xuICAgICAgICAgIGFyZ3NbaW5kZXhdID0gdHJhbnNmb3Jtc1tpbmRleF0oYXJnc1tpbmRleF0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmdW5jLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBuZWdhdGVzIHRoZSByZXN1bHQgb2YgdGhlIHByZWRpY2F0ZSBgZnVuY2AuIFRoZVxuICAgICAqIGBmdW5jYCBwcmVkaWNhdGUgaXMgaW52b2tlZCB3aXRoIHRoZSBgdGhpc2AgYmluZGluZyBhbmQgYXJndW1lbnRzIG9mIHRoZVxuICAgICAqIGNyZWF0ZWQgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgVGhlIHByZWRpY2F0ZSB0byBuZWdhdGUuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGZ1bmN0aW9uIGlzRXZlbihuKSB7XG4gICAgICogICByZXR1cm4gbiAlIDIgPT0gMDtcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBfLmZpbHRlcihbMSwgMiwgMywgNCwgNSwgNl0sIF8ubmVnYXRlKGlzRXZlbikpO1xuICAgICAqIC8vID0+IFsxLCAzLCA1XVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG5lZ2F0ZShwcmVkaWNhdGUpIHtcbiAgICAgIGlmICh0eXBlb2YgcHJlZGljYXRlICE9ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gIXByZWRpY2F0ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBpcyByZXN0cmljdGVkIHRvIGludm9raW5nIGBmdW5jYCBvbmNlLiBSZXBlYXQgY2FsbHNcbiAgICAgKiB0byB0aGUgZnVuY3Rpb24gcmV0dXJuIHRoZSB2YWx1ZSBvZiB0aGUgZmlyc3QgY2FsbC4gVGhlIGBmdW5jYCBpcyBpbnZva2VkXG4gICAgICogd2l0aCB0aGUgYHRoaXNgIGJpbmRpbmcgYW5kIGFyZ3VtZW50cyBvZiB0aGUgY3JlYXRlZCBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHJlc3RyaWN0LlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHJlc3RyaWN0ZWQgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBpbml0aWFsaXplID0gXy5vbmNlKGNyZWF0ZUFwcGxpY2F0aW9uKTtcbiAgICAgKiBpbml0aWFsaXplKCk7XG4gICAgICogaW5pdGlhbGl6ZSgpO1xuICAgICAqIC8vIGBpbml0aWFsaXplYCBpbnZva2VzIGBjcmVhdGVBcHBsaWNhdGlvbmAgb25jZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG9uY2UoZnVuYykge1xuICAgICAgcmV0dXJuIGJlZm9yZSgyLCBmdW5jKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBpbnZva2VzIGBmdW5jYCB3aXRoIGBwYXJ0aWFsYCBhcmd1bWVudHMgcHJlcGVuZGVkXG4gICAgICogdG8gdGhvc2UgcHJvdmlkZWQgdG8gdGhlIG5ldyBmdW5jdGlvbi4gVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5iaW5kYCBleGNlcHRcbiAgICAgKiBpdCBkb2VzICoqbm90KiogYWx0ZXIgdGhlIGB0aGlzYCBiaW5kaW5nLlxuICAgICAqXG4gICAgICogVGhlIGBfLnBhcnRpYWwucGxhY2Vob2xkZXJgIHZhbHVlLCB3aGljaCBkZWZhdWx0cyB0byBgX2AgaW4gbW9ub2xpdGhpY1xuICAgICAqIGJ1aWxkcywgbWF5IGJlIHVzZWQgYXMgYSBwbGFjZWhvbGRlciBmb3IgcGFydGlhbGx5IGFwcGxpZWQgYXJndW1lbnRzLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoaXMgbWV0aG9kIGRvZXMgbm90IHNldCB0aGUgXCJsZW5ndGhcIiBwcm9wZXJ0eSBvZiBwYXJ0aWFsbHlcbiAgICAgKiBhcHBsaWVkIGZ1bmN0aW9ucy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHBhcnRpYWxseSBhcHBseSBhcmd1bWVudHMgdG8uXG4gICAgICogQHBhcmFtIHsuLi4qfSBbcGFydGlhbHNdIFRoZSBhcmd1bWVudHMgdG8gYmUgcGFydGlhbGx5IGFwcGxpZWQuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgcGFydGlhbGx5IGFwcGxpZWQgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBncmVldCA9IGZ1bmN0aW9uKGdyZWV0aW5nLCBuYW1lKSB7XG4gICAgICogICByZXR1cm4gZ3JlZXRpbmcgKyAnICcgKyBuYW1lO1xuICAgICAqIH07XG4gICAgICpcbiAgICAgKiB2YXIgc2F5SGVsbG9UbyA9IF8ucGFydGlhbChncmVldCwgJ2hlbGxvJyk7XG4gICAgICogc2F5SGVsbG9UbygnZnJlZCcpO1xuICAgICAqIC8vID0+ICdoZWxsbyBmcmVkJ1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgcGxhY2Vob2xkZXJzXG4gICAgICogdmFyIGdyZWV0RnJlZCA9IF8ucGFydGlhbChncmVldCwgXywgJ2ZyZWQnKTtcbiAgICAgKiBncmVldEZyZWQoJ2hpJyk7XG4gICAgICogLy8gPT4gJ2hpIGZyZWQnXG4gICAgICovXG4gICAgdmFyIHBhcnRpYWwgPSBjcmVhdGVQYXJ0aWFsKFBBUlRJQUxfRkxBRyk7XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLnBhcnRpYWxgIGV4Y2VwdCB0aGF0IHBhcnRpYWxseSBhcHBsaWVkIGFyZ3VtZW50c1xuICAgICAqIGFyZSBhcHBlbmRlZCB0byB0aG9zZSBwcm92aWRlZCB0byB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogVGhlIGBfLnBhcnRpYWxSaWdodC5wbGFjZWhvbGRlcmAgdmFsdWUsIHdoaWNoIGRlZmF1bHRzIHRvIGBfYCBpbiBtb25vbGl0aGljXG4gICAgICogYnVpbGRzLCBtYXkgYmUgdXNlZCBhcyBhIHBsYWNlaG9sZGVyIGZvciBwYXJ0aWFsbHkgYXBwbGllZCBhcmd1bWVudHMuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgZG9lcyBub3Qgc2V0IHRoZSBcImxlbmd0aFwiIHByb3BlcnR5IG9mIHBhcnRpYWxseVxuICAgICAqIGFwcGxpZWQgZnVuY3Rpb25zLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gcGFydGlhbGx5IGFwcGx5IGFyZ3VtZW50cyB0by5cbiAgICAgKiBAcGFyYW0gey4uLip9IFtwYXJ0aWFsc10gVGhlIGFyZ3VtZW50cyB0byBiZSBwYXJ0aWFsbHkgYXBwbGllZC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBwYXJ0aWFsbHkgYXBwbGllZCBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGdyZWV0ID0gZnVuY3Rpb24oZ3JlZXRpbmcsIG5hbWUpIHtcbiAgICAgKiAgIHJldHVybiBncmVldGluZyArICcgJyArIG5hbWU7XG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIHZhciBncmVldEZyZWQgPSBfLnBhcnRpYWxSaWdodChncmVldCwgJ2ZyZWQnKTtcbiAgICAgKiBncmVldEZyZWQoJ2hpJyk7XG4gICAgICogLy8gPT4gJ2hpIGZyZWQnXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBwbGFjZWhvbGRlcnNcbiAgICAgKiB2YXIgc2F5SGVsbG9UbyA9IF8ucGFydGlhbFJpZ2h0KGdyZWV0LCAnaGVsbG8nLCBfKTtcbiAgICAgKiBzYXlIZWxsb1RvKCdmcmVkJyk7XG4gICAgICogLy8gPT4gJ2hlbGxvIGZyZWQnXG4gICAgICovXG4gICAgdmFyIHBhcnRpYWxSaWdodCA9IGNyZWF0ZVBhcnRpYWwoUEFSVElBTF9SSUdIVF9GTEFHKTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGludm9rZXMgYGZ1bmNgIHdpdGggYXJndW1lbnRzIGFycmFuZ2VkIGFjY29yZGluZ1xuICAgICAqIHRvIHRoZSBzcGVjaWZpZWQgaW5kZXhlcyB3aGVyZSB0aGUgYXJndW1lbnQgdmFsdWUgYXQgdGhlIGZpcnN0IGluZGV4IGlzXG4gICAgICogcHJvdmlkZWQgYXMgdGhlIGZpcnN0IGFyZ3VtZW50LCB0aGUgYXJndW1lbnQgdmFsdWUgYXQgdGhlIHNlY29uZCBpbmRleCBpc1xuICAgICAqIHByb3ZpZGVkIGFzIHRoZSBzZWNvbmQgYXJndW1lbnQsIGFuZCBzbyBvbi5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHJlYXJyYW5nZSBhcmd1bWVudHMgZm9yLlxuICAgICAqIEBwYXJhbSB7Li4uKG51bWJlcnxudW1iZXJbXSl9IGluZGV4ZXMgVGhlIGFycmFuZ2VkIGFyZ3VtZW50IGluZGV4ZXMsXG4gICAgICogIHNwZWNpZmllZCBhcyBpbmRpdmlkdWFsIGluZGV4ZXMgb3IgYXJyYXlzIG9mIGluZGV4ZXMuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciByZWFyZ2VkID0gXy5yZWFyZyhmdW5jdGlvbihhLCBiLCBjKSB7XG4gICAgICogICByZXR1cm4gW2EsIGIsIGNdO1xuICAgICAqIH0sIDIsIDAsIDEpO1xuICAgICAqXG4gICAgICogcmVhcmdlZCgnYicsICdjJywgJ2EnKVxuICAgICAqIC8vID0+IFsnYScsICdiJywgJ2MnXVxuICAgICAqXG4gICAgICogdmFyIG1hcCA9IF8ucmVhcmcoXy5tYXAsIFsxLCAwXSk7XG4gICAgICogbWFwKGZ1bmN0aW9uKG4pIHtcbiAgICAgKiAgIHJldHVybiBuICogMztcbiAgICAgKiB9LCBbMSwgMiwgM10pO1xuICAgICAqIC8vID0+IFszLCA2LCA5XVxuICAgICAqL1xuICAgIHZhciByZWFyZyA9IHJlc3RQYXJhbShmdW5jdGlvbihmdW5jLCBpbmRleGVzKSB7XG4gICAgICByZXR1cm4gY3JlYXRlV3JhcHBlcihmdW5jLCBSRUFSR19GTEFHLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBiYXNlRmxhdHRlbihpbmRleGVzKSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBpbnZva2VzIGBmdW5jYCB3aXRoIHRoZSBgdGhpc2AgYmluZGluZyBvZiB0aGVcbiAgICAgKiBjcmVhdGVkIGZ1bmN0aW9uIGFuZCBhcmd1bWVudHMgZnJvbSBgc3RhcnRgIGFuZCBiZXlvbmQgcHJvdmlkZWQgYXMgYW4gYXJyYXkuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgaXMgYmFzZWQgb24gdGhlIFtyZXN0IHBhcmFtZXRlcl0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvRnVuY3Rpb25zL3Jlc3RfcGFyYW1ldGVycykuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBhcHBseSBhIHJlc3QgcGFyYW1ldGVyIHRvLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbc3RhcnQ9ZnVuYy5sZW5ndGgtMV0gVGhlIHN0YXJ0IHBvc2l0aW9uIG9mIHRoZSByZXN0IHBhcmFtZXRlci5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIHNheSA9IF8ucmVzdFBhcmFtKGZ1bmN0aW9uKHdoYXQsIG5hbWVzKSB7XG4gICAgICogICByZXR1cm4gd2hhdCArICcgJyArIF8uaW5pdGlhbChuYW1lcykuam9pbignLCAnKSArXG4gICAgICogICAgIChfLnNpemUobmFtZXMpID4gMSA/ICcsICYgJyA6ICcnKSArIF8ubGFzdChuYW1lcyk7XG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiBzYXkoJ2hlbGxvJywgJ2ZyZWQnLCAnYmFybmV5JywgJ3BlYmJsZXMnKTtcbiAgICAgKiAvLyA9PiAnaGVsbG8gZnJlZCwgYmFybmV5LCAmIHBlYmJsZXMnXG4gICAgICovXG4gICAgZnVuY3Rpb24gcmVzdFBhcmFtKGZ1bmMsIHN0YXJ0KSB7XG4gICAgICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG4gICAgICB9XG4gICAgICBzdGFydCA9IG5hdGl2ZU1heChzdGFydCA9PT0gdW5kZWZpbmVkID8gKGZ1bmMubGVuZ3RoIC0gMSkgOiAoK3N0YXJ0IHx8IDApLCAwKTtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHMsXG4gICAgICAgICAgICBpbmRleCA9IC0xLFxuICAgICAgICAgICAgbGVuZ3RoID0gbmF0aXZlTWF4KGFyZ3MubGVuZ3RoIC0gc3RhcnQsIDApLFxuICAgICAgICAgICAgcmVzdCA9IEFycmF5KGxlbmd0aCk7XG5cbiAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgICByZXN0W2luZGV4XSA9IGFyZ3Nbc3RhcnQgKyBpbmRleF07XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoIChzdGFydCkge1xuICAgICAgICAgIGNhc2UgMDogcmV0dXJuIGZ1bmMuY2FsbCh0aGlzLCByZXN0KTtcbiAgICAgICAgICBjYXNlIDE6IHJldHVybiBmdW5jLmNhbGwodGhpcywgYXJnc1swXSwgcmVzdCk7XG4gICAgICAgICAgY2FzZSAyOiByZXR1cm4gZnVuYy5jYWxsKHRoaXMsIGFyZ3NbMF0sIGFyZ3NbMV0sIHJlc3QpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvdGhlckFyZ3MgPSBBcnJheShzdGFydCArIDEpO1xuICAgICAgICBpbmRleCA9IC0xO1xuICAgICAgICB3aGlsZSAoKytpbmRleCA8IHN0YXJ0KSB7XG4gICAgICAgICAgb3RoZXJBcmdzW2luZGV4XSA9IGFyZ3NbaW5kZXhdO1xuICAgICAgICB9XG4gICAgICAgIG90aGVyQXJnc1tzdGFydF0gPSByZXN0O1xuICAgICAgICByZXR1cm4gZnVuYy5hcHBseSh0aGlzLCBvdGhlckFyZ3MpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBpbnZva2VzIGBmdW5jYCB3aXRoIHRoZSBgdGhpc2AgYmluZGluZyBvZiB0aGUgY3JlYXRlZFxuICAgICAqIGZ1bmN0aW9uIGFuZCBhbiBhcnJheSBvZiBhcmd1bWVudHMgbXVjaCBsaWtlIFtgRnVuY3Rpb24jYXBwbHlgXShodHRwczovL2VzNS5naXRodWIuaW8vI3gxNS4zLjQuMykuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgaXMgYmFzZWQgb24gdGhlIFtzcHJlYWQgb3BlcmF0b3JdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL09wZXJhdG9ycy9TcHJlYWRfb3BlcmF0b3IpLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gc3ByZWFkIGFyZ3VtZW50cyBvdmVyLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgc2F5ID0gXy5zcHJlYWQoZnVuY3Rpb24od2hvLCB3aGF0KSB7XG4gICAgICogICByZXR1cm4gd2hvICsgJyBzYXlzICcgKyB3aGF0O1xuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogc2F5KFsnZnJlZCcsICdoZWxsbyddKTtcbiAgICAgKiAvLyA9PiAnZnJlZCBzYXlzIGhlbGxvJ1xuICAgICAqXG4gICAgICogLy8gd2l0aCBhIFByb21pc2VcbiAgICAgKiB2YXIgbnVtYmVycyA9IFByb21pc2UuYWxsKFtcbiAgICAgKiAgIFByb21pc2UucmVzb2x2ZSg0MCksXG4gICAgICogICBQcm9taXNlLnJlc29sdmUoMzYpXG4gICAgICogXSk7XG4gICAgICpcbiAgICAgKiBudW1iZXJzLnRoZW4oXy5zcHJlYWQoZnVuY3Rpb24oeCwgeSkge1xuICAgICAqICAgcmV0dXJuIHggKyB5O1xuICAgICAqIH0pKTtcbiAgICAgKiAvLyA9PiBhIFByb21pc2Ugb2YgNzZcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzcHJlYWQoZnVuYykge1xuICAgICAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgICAgIHJldHVybiBmdW5jLmFwcGx5KHRoaXMsIGFycmF5KTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHRocm90dGxlZCBmdW5jdGlvbiB0aGF0IG9ubHkgaW52b2tlcyBgZnVuY2AgYXQgbW9zdCBvbmNlIHBlclxuICAgICAqIGV2ZXJ5IGB3YWl0YCBtaWxsaXNlY29uZHMuIFRoZSB0aHJvdHRsZWQgZnVuY3Rpb24gY29tZXMgd2l0aCBhIGBjYW5jZWxgXG4gICAgICogbWV0aG9kIHRvIGNhbmNlbCBkZWxheWVkIGludm9jYXRpb25zLiBQcm92aWRlIGFuIG9wdGlvbnMgb2JqZWN0IHRvIGluZGljYXRlXG4gICAgICogdGhhdCBgZnVuY2Agc2hvdWxkIGJlIGludm9rZWQgb24gdGhlIGxlYWRpbmcgYW5kL29yIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlXG4gICAgICogYHdhaXRgIHRpbWVvdXQuIFN1YnNlcXVlbnQgY2FsbHMgdG8gdGhlIHRocm90dGxlZCBmdW5jdGlvbiByZXR1cm4gdGhlXG4gICAgICogcmVzdWx0IG9mIHRoZSBsYXN0IGBmdW5jYCBjYWxsLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIElmIGBsZWFkaW5nYCBhbmQgYHRyYWlsaW5nYCBvcHRpb25zIGFyZSBgdHJ1ZWAsIGBmdW5jYCBpcyBpbnZva2VkXG4gICAgICogb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQgb25seSBpZiB0aGUgdGhlIHRocm90dGxlZCBmdW5jdGlvbiBpc1xuICAgICAqIGludm9rZWQgbW9yZSB0aGFuIG9uY2UgZHVyaW5nIHRoZSBgd2FpdGAgdGltZW91dC5cbiAgICAgKlxuICAgICAqIFNlZSBbRGF2aWQgQ29yYmFjaG8ncyBhcnRpY2xlXShodHRwOi8vZHJ1cGFsbW90aW9uLmNvbS9hcnRpY2xlL2RlYm91bmNlLWFuZC10aHJvdHRsZS12aXN1YWwtZXhwbGFuYXRpb24pXG4gICAgICogZm9yIGRldGFpbHMgb3ZlciB0aGUgZGlmZmVyZW5jZXMgYmV0d2VlbiBgXy50aHJvdHRsZWAgYW5kIGBfLmRlYm91bmNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHRocm90dGxlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbd2FpdD0wXSBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byB0aHJvdHRsZSBpbnZvY2F0aW9ucyB0by5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIFRoZSBvcHRpb25zIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmxlYWRpbmc9dHJ1ZV0gU3BlY2lmeSBpbnZva2luZyBvbiB0aGUgbGVhZGluZ1xuICAgICAqICBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudHJhaWxpbmc9dHJ1ZV0gU3BlY2lmeSBpbnZva2luZyBvbiB0aGUgdHJhaWxpbmdcbiAgICAgKiAgZWRnZSBvZiB0aGUgdGltZW91dC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyB0aHJvdHRsZWQgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIC8vIGF2b2lkIGV4Y2Vzc2l2ZWx5IHVwZGF0aW5nIHRoZSBwb3NpdGlvbiB3aGlsZSBzY3JvbGxpbmdcbiAgICAgKiBqUXVlcnkod2luZG93KS5vbignc2Nyb2xsJywgXy50aHJvdHRsZSh1cGRhdGVQb3NpdGlvbiwgMTAwKSk7XG4gICAgICpcbiAgICAgKiAvLyBpbnZva2UgYHJlbmV3VG9rZW5gIHdoZW4gdGhlIGNsaWNrIGV2ZW50IGlzIGZpcmVkLCBidXQgbm90IG1vcmUgdGhhbiBvbmNlIGV2ZXJ5IDUgbWludXRlc1xuICAgICAqIGpRdWVyeSgnLmludGVyYWN0aXZlJykub24oJ2NsaWNrJywgXy50aHJvdHRsZShyZW5ld1Rva2VuLCAzMDAwMDAsIHtcbiAgICAgKiAgICd0cmFpbGluZyc6IGZhbHNlXG4gICAgICogfSkpO1xuICAgICAqXG4gICAgICogLy8gY2FuY2VsIGEgdHJhaWxpbmcgdGhyb3R0bGVkIGNhbGxcbiAgICAgKiBqUXVlcnkod2luZG93KS5vbigncG9wc3RhdGUnLCB0aHJvdHRsZWQuY2FuY2VsKTtcbiAgICAgKi9cbiAgICBmdW5jdGlvbiB0aHJvdHRsZShmdW5jLCB3YWl0LCBvcHRpb25zKSB7XG4gICAgICB2YXIgbGVhZGluZyA9IHRydWUsXG4gICAgICAgICAgdHJhaWxpbmcgPSB0cnVlO1xuXG4gICAgICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG4gICAgICB9XG4gICAgICBpZiAob3B0aW9ucyA9PT0gZmFsc2UpIHtcbiAgICAgICAgbGVhZGluZyA9IGZhbHNlO1xuICAgICAgfSBlbHNlIGlmIChpc09iamVjdChvcHRpb25zKSkge1xuICAgICAgICBsZWFkaW5nID0gJ2xlYWRpbmcnIGluIG9wdGlvbnMgPyAhIW9wdGlvbnMubGVhZGluZyA6IGxlYWRpbmc7XG4gICAgICAgIHRyYWlsaW5nID0gJ3RyYWlsaW5nJyBpbiBvcHRpb25zID8gISFvcHRpb25zLnRyYWlsaW5nIDogdHJhaWxpbmc7XG4gICAgICB9XG4gICAgICByZXR1cm4gZGVib3VuY2UoZnVuYywgd2FpdCwgeyAnbGVhZGluZyc6IGxlYWRpbmcsICdtYXhXYWl0JzogK3dhaXQsICd0cmFpbGluZyc6IHRyYWlsaW5nIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IHByb3ZpZGVzIGB2YWx1ZWAgdG8gdGhlIHdyYXBwZXIgZnVuY3Rpb24gYXMgaXRzXG4gICAgICogZmlyc3QgYXJndW1lbnQuIEFueSBhZGRpdGlvbmFsIGFyZ3VtZW50cyBwcm92aWRlZCB0byB0aGUgZnVuY3Rpb24gYXJlXG4gICAgICogYXBwZW5kZWQgdG8gdGhvc2UgcHJvdmlkZWQgdG8gdGhlIHdyYXBwZXIgZnVuY3Rpb24uIFRoZSB3cmFwcGVyIGlzIGludm9rZWRcbiAgICAgKiB3aXRoIHRoZSBgdGhpc2AgYmluZGluZyBvZiB0aGUgY3JlYXRlZCBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHdyYXAuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gd3JhcHBlciBUaGUgd3JhcHBlciBmdW5jdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIHAgPSBfLndyYXAoXy5lc2NhcGUsIGZ1bmN0aW9uKGZ1bmMsIHRleHQpIHtcbiAgICAgKiAgIHJldHVybiAnPHA+JyArIGZ1bmModGV4dCkgKyAnPC9wPic7XG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiBwKCdmcmVkLCBiYXJuZXksICYgcGViYmxlcycpO1xuICAgICAqIC8vID0+ICc8cD5mcmVkLCBiYXJuZXksICZhbXA7IHBlYmJsZXM8L3A+J1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIHdyYXAodmFsdWUsIHdyYXBwZXIpIHtcbiAgICAgIHdyYXBwZXIgPSB3cmFwcGVyID09IG51bGwgPyBpZGVudGl0eSA6IHdyYXBwZXI7XG4gICAgICByZXR1cm4gY3JlYXRlV3JhcHBlcih3cmFwcGVyLCBQQVJUSUFMX0ZMQUcsIHVuZGVmaW5lZCwgW3ZhbHVlXSwgW10pO1xuICAgIH1cblxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBjbG9uZSBvZiBgdmFsdWVgLiBJZiBgaXNEZWVwYCBpcyBgdHJ1ZWAgbmVzdGVkIG9iamVjdHMgYXJlIGNsb25lZCxcbiAgICAgKiBvdGhlcndpc2UgdGhleSBhcmUgYXNzaWduZWQgYnkgcmVmZXJlbmNlLiBJZiBgY3VzdG9taXplcmAgaXMgcHJvdmlkZWQgaXQgaXNcbiAgICAgKiBpbnZva2VkIHRvIHByb2R1Y2UgdGhlIGNsb25lZCB2YWx1ZXMuIElmIGBjdXN0b21pemVyYCByZXR1cm5zIGB1bmRlZmluZWRgXG4gICAgICogY2xvbmluZyBpcyBoYW5kbGVkIGJ5IHRoZSBtZXRob2QgaW5zdGVhZC4gVGhlIGBjdXN0b21pemVyYCBpcyBib3VuZCB0b1xuICAgICAqIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIHR3byBhcmd1bWVudDsgKHZhbHVlIFssIGluZGV4fGtleSwgb2JqZWN0XSkuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgaXMgbG9vc2VseSBiYXNlZCBvbiB0aGVcbiAgICAgKiBbc3RydWN0dXJlZCBjbG9uZSBhbGdvcml0aG1dKGh0dHA6Ly93d3cudzMub3JnL1RSL2h0bWw1L2luZnJhc3RydWN0dXJlLmh0bWwjaW50ZXJuYWwtc3RydWN0dXJlZC1jbG9uaW5nLWFsZ29yaXRobSkuXG4gICAgICogVGhlIGVudW1lcmFibGUgcHJvcGVydGllcyBvZiBgYXJndW1lbnRzYCBvYmplY3RzIGFuZCBvYmplY3RzIGNyZWF0ZWQgYnlcbiAgICAgKiBjb25zdHJ1Y3RvcnMgb3RoZXIgdGhhbiBgT2JqZWN0YCBhcmUgY2xvbmVkIHRvIHBsYWluIGBPYmplY3RgIG9iamVjdHMuIEFuXG4gICAgICogZW1wdHkgb2JqZWN0IGlzIHJldHVybmVkIGZvciB1bmNsb25lYWJsZSB2YWx1ZXMgc3VjaCBhcyBmdW5jdGlvbnMsIERPTSBub2RlcyxcbiAgICAgKiBNYXBzLCBTZXRzLCBhbmQgV2Vha01hcHMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNsb25lLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzRGVlcF0gU3BlY2lmeSBhIGRlZXAgY2xvbmUuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY2xvbmluZyB2YWx1ZXMuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjdXN0b21pemVyYC5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgY2xvbmVkIHZhbHVlLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgdXNlcnMgPSBbXG4gICAgICogICB7ICd1c2VyJzogJ2Jhcm5leScgfSxcbiAgICAgKiAgIHsgJ3VzZXInOiAnZnJlZCcgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiB2YXIgc2hhbGxvdyA9IF8uY2xvbmUodXNlcnMpO1xuICAgICAqIHNoYWxsb3dbMF0gPT09IHVzZXJzWzBdO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIHZhciBkZWVwID0gXy5jbG9uZSh1c2VycywgdHJ1ZSk7XG4gICAgICogZGVlcFswXSA9PT0gdXNlcnNbMF07XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIGEgY3VzdG9taXplciBjYWxsYmFja1xuICAgICAqIHZhciBlbCA9IF8uY2xvbmUoZG9jdW1lbnQuYm9keSwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgKiAgIGlmIChfLmlzRWxlbWVudCh2YWx1ZSkpIHtcbiAgICAgKiAgICAgcmV0dXJuIHZhbHVlLmNsb25lTm9kZShmYWxzZSk7XG4gICAgICogICB9XG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiBlbCA9PT0gZG9jdW1lbnQuYm9keVxuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICogZWwubm9kZU5hbWVcbiAgICAgKiAvLyA9PiBCT0RZXG4gICAgICogZWwuY2hpbGROb2Rlcy5sZW5ndGg7XG4gICAgICogLy8gPT4gMFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNsb25lKHZhbHVlLCBpc0RlZXAsIGN1c3RvbWl6ZXIsIHRoaXNBcmcpIHtcbiAgICAgIGlmIChpc0RlZXAgJiYgdHlwZW9mIGlzRGVlcCAhPSAnYm9vbGVhbicgJiYgaXNJdGVyYXRlZUNhbGwodmFsdWUsIGlzRGVlcCwgY3VzdG9taXplcikpIHtcbiAgICAgICAgaXNEZWVwID0gZmFsc2U7XG4gICAgICB9XG4gICAgICBlbHNlIGlmICh0eXBlb2YgaXNEZWVwID09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhpc0FyZyA9IGN1c3RvbWl6ZXI7XG4gICAgICAgIGN1c3RvbWl6ZXIgPSBpc0RlZXA7XG4gICAgICAgIGlzRGVlcCA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHR5cGVvZiBjdXN0b21pemVyID09ICdmdW5jdGlvbidcbiAgICAgICAgPyBiYXNlQ2xvbmUodmFsdWUsIGlzRGVlcCwgYmluZENhbGxiYWNrKGN1c3RvbWl6ZXIsIHRoaXNBcmcsIDEpKVxuICAgICAgICA6IGJhc2VDbG9uZSh2YWx1ZSwgaXNEZWVwKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZGVlcCBjbG9uZSBvZiBgdmFsdWVgLiBJZiBgY3VzdG9taXplcmAgaXMgcHJvdmlkZWQgaXQgaXMgaW52b2tlZFxuICAgICAqIHRvIHByb2R1Y2UgdGhlIGNsb25lZCB2YWx1ZXMuIElmIGBjdXN0b21pemVyYCByZXR1cm5zIGB1bmRlZmluZWRgIGNsb25pbmdcbiAgICAgKiBpcyBoYW5kbGVkIGJ5IHRoZSBtZXRob2QgaW5zdGVhZC4gVGhlIGBjdXN0b21pemVyYCBpcyBib3VuZCB0byBgdGhpc0FyZ2BcbiAgICAgKiBhbmQgaW52b2tlZCB3aXRoIHR3byBhcmd1bWVudDsgKHZhbHVlIFssIGluZGV4fGtleSwgb2JqZWN0XSkuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgaXMgbG9vc2VseSBiYXNlZCBvbiB0aGVcbiAgICAgKiBbc3RydWN0dXJlZCBjbG9uZSBhbGdvcml0aG1dKGh0dHA6Ly93d3cudzMub3JnL1RSL2h0bWw1L2luZnJhc3RydWN0dXJlLmh0bWwjaW50ZXJuYWwtc3RydWN0dXJlZC1jbG9uaW5nLWFsZ29yaXRobSkuXG4gICAgICogVGhlIGVudW1lcmFibGUgcHJvcGVydGllcyBvZiBgYXJndW1lbnRzYCBvYmplY3RzIGFuZCBvYmplY3RzIGNyZWF0ZWQgYnlcbiAgICAgKiBjb25zdHJ1Y3RvcnMgb3RoZXIgdGhhbiBgT2JqZWN0YCBhcmUgY2xvbmVkIHRvIHBsYWluIGBPYmplY3RgIG9iamVjdHMuIEFuXG4gICAgICogZW1wdHkgb2JqZWN0IGlzIHJldHVybmVkIGZvciB1bmNsb25lYWJsZSB2YWx1ZXMgc3VjaCBhcyBmdW5jdGlvbnMsIERPTSBub2RlcyxcbiAgICAgKiBNYXBzLCBTZXRzLCBhbmQgV2Vha01hcHMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGRlZXAgY2xvbmUuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY2xvbmluZyB2YWx1ZXMuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjdXN0b21pemVyYC5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZGVlcCBjbG9uZWQgdmFsdWUuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciB1c2VycyA9IFtcbiAgICAgKiAgIHsgJ3VzZXInOiAnYmFybmV5JyB9LFxuICAgICAqICAgeyAndXNlcic6ICdmcmVkJyB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIHZhciBkZWVwID0gXy5jbG9uZURlZXAodXNlcnMpO1xuICAgICAqIGRlZXBbMF0gPT09IHVzZXJzWzBdO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBhIGN1c3RvbWl6ZXIgY2FsbGJhY2tcbiAgICAgKiB2YXIgZWwgPSBfLmNsb25lRGVlcChkb2N1bWVudC5ib2R5LCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAqICAgaWYgKF8uaXNFbGVtZW50KHZhbHVlKSkge1xuICAgICAqICAgICByZXR1cm4gdmFsdWUuY2xvbmVOb2RlKHRydWUpO1xuICAgICAqICAgfVxuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogZWwgPT09IGRvY3VtZW50LmJvZHlcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqIGVsLm5vZGVOYW1lXG4gICAgICogLy8gPT4gQk9EWVxuICAgICAqIGVsLmNoaWxkTm9kZXMubGVuZ3RoO1xuICAgICAqIC8vID0+IDIwXG4gICAgICovXG4gICAgZnVuY3Rpb24gY2xvbmVEZWVwKHZhbHVlLCBjdXN0b21pemVyLCB0aGlzQXJnKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIGN1c3RvbWl6ZXIgPT0gJ2Z1bmN0aW9uJ1xuICAgICAgICA/IGJhc2VDbG9uZSh2YWx1ZSwgdHJ1ZSwgYmluZENhbGxiYWNrKGN1c3RvbWl6ZXIsIHRoaXNBcmcsIDEpKVxuICAgICAgICA6IGJhc2VDbG9uZSh2YWx1ZSwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgZ3JlYXRlciB0aGFuIGBvdGhlcmAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbXBhcmUuXG4gICAgICogQHBhcmFtIHsqfSBvdGhlciBUaGUgb3RoZXIgdmFsdWUgdG8gY29tcGFyZS5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBncmVhdGVyIHRoYW4gYG90aGVyYCwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmd0KDMsIDEpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uZ3QoMywgMyk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKlxuICAgICAqIF8uZ3QoMSwgMyk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBndCh2YWx1ZSwgb3RoZXIpIHtcbiAgICAgIHJldHVybiB2YWx1ZSA+IG90aGVyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byBgb3RoZXJgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IExhbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb21wYXJlLlxuICAgICAqIEBwYXJhbSB7Kn0gb3RoZXIgVGhlIG90aGVyIHZhbHVlIHRvIGNvbXBhcmUuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIGBvdGhlcmAsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5ndGUoMywgMSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5ndGUoMywgMyk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5ndGUoMSwgMyk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBndGUodmFsdWUsIG90aGVyKSB7XG4gICAgICByZXR1cm4gdmFsdWUgPj0gb3RoZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhbiBgYXJndW1lbnRzYCBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGNvcnJlY3RseSBjbGFzc2lmaWVkLCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaXNBcmd1bWVudHMoZnVuY3Rpb24oKSB7IHJldHVybiBhcmd1bWVudHM7IH0oKSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc0FyZ3VtZW50cyhbMSwgMiwgM10pO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNBcmd1bWVudHModmFsdWUpIHtcbiAgICAgIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmIGlzQXJyYXlMaWtlKHZhbHVlKSAmJlxuICAgICAgICBoYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbHVlLCAnY2FsbGVlJykgJiYgIXByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwodmFsdWUsICdjYWxsZWUnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGFuIGBBcnJheWAgb2JqZWN0LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IExhbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBjb3JyZWN0bHkgY2xhc3NpZmllZCwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmlzQXJyYXkoWzEsIDIsIDNdKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzQXJyYXkoZnVuY3Rpb24oKSB7IHJldHVybiBhcmd1bWVudHM7IH0oKSk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICB2YXIgaXNBcnJheSA9IG5hdGl2ZUlzQXJyYXkgfHwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmIGlzTGVuZ3RoKHZhbHVlLmxlbmd0aCkgJiYgb2JqVG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gYXJyYXlUYWc7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBib29sZWFuIHByaW1pdGl2ZSBvciBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGNvcnJlY3RseSBjbGFzc2lmaWVkLCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaXNCb29sZWFuKGZhbHNlKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzQm9vbGVhbihudWxsKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzQm9vbGVhbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlID09PSB0cnVlIHx8IHZhbHVlID09PSBmYWxzZSB8fCAoaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBvYmpUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBib29sVGFnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYERhdGVgIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgY29ycmVjdGx5IGNsYXNzaWZpZWQsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pc0RhdGUobmV3IERhdGUpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNEYXRlKCdNb24gQXByaWwgMjMgMjAxMicpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNEYXRlKHZhbHVlKSB7XG4gICAgICByZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBvYmpUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBkYXRlVGFnO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgRE9NIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgRE9NIGVsZW1lbnQsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pc0VsZW1lbnQoZG9jdW1lbnQuYm9keSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc0VsZW1lbnQoJzxib2R5PicpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNFbGVtZW50KHZhbHVlKSB7XG4gICAgICByZXR1cm4gISF2YWx1ZSAmJiB2YWx1ZS5ub2RlVHlwZSA9PT0gMSAmJiBpc09iamVjdExpa2UodmFsdWUpICYmICFpc1BsYWluT2JqZWN0KHZhbHVlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBlbXB0eS4gQSB2YWx1ZSBpcyBjb25zaWRlcmVkIGVtcHR5IHVubGVzcyBpdCBpcyBhblxuICAgICAqIGBhcmd1bWVudHNgIG9iamVjdCwgYXJyYXksIHN0cmluZywgb3IgalF1ZXJ5LWxpa2UgY29sbGVjdGlvbiB3aXRoIGEgbGVuZ3RoXG4gICAgICogZ3JlYXRlciB0aGFuIGAwYCBvciBhbiBvYmplY3Qgd2l0aCBvd24gZW51bWVyYWJsZSBwcm9wZXJ0aWVzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IExhbmdcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IHZhbHVlIFRoZSB2YWx1ZSB0byBpbnNwZWN0LlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGVtcHR5LCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaXNFbXB0eShudWxsKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzRW1wdHkodHJ1ZSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc0VtcHR5KDEpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNFbXB0eShbMSwgMiwgM10pO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICpcbiAgICAgKiBfLmlzRW1wdHkoeyAnYSc6IDEgfSk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc0VtcHR5KHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmIChpc0FycmF5TGlrZSh2YWx1ZSkgJiYgKGlzQXJyYXkodmFsdWUpIHx8IGlzU3RyaW5nKHZhbHVlKSB8fCBpc0FyZ3VtZW50cyh2YWx1ZSkgfHxcbiAgICAgICAgICAoaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBpc0Z1bmN0aW9uKHZhbHVlLnNwbGljZSkpKSkge1xuICAgICAgICByZXR1cm4gIXZhbHVlLmxlbmd0aDtcbiAgICAgIH1cbiAgICAgIHJldHVybiAha2V5cyh2YWx1ZSkubGVuZ3RoO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBlcmZvcm1zIGEgZGVlcCBjb21wYXJpc29uIGJldHdlZW4gdHdvIHZhbHVlcyB0byBkZXRlcm1pbmUgaWYgdGhleSBhcmVcbiAgICAgKiBlcXVpdmFsZW50LiBJZiBgY3VzdG9taXplcmAgaXMgcHJvdmlkZWQgaXQgaXMgaW52b2tlZCB0byBjb21wYXJlIHZhbHVlcy5cbiAgICAgKiBJZiBgY3VzdG9taXplcmAgcmV0dXJucyBgdW5kZWZpbmVkYCBjb21wYXJpc29ucyBhcmUgaGFuZGxlZCBieSB0aGUgbWV0aG9kXG4gICAgICogaW5zdGVhZC4gVGhlIGBjdXN0b21pemVyYCBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZVxuICAgICAqIGFyZ3VtZW50czogKHZhbHVlLCBvdGhlciBbLCBpbmRleHxrZXldKS5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBzdXBwb3J0cyBjb21wYXJpbmcgYXJyYXlzLCBib29sZWFucywgYERhdGVgIG9iamVjdHMsXG4gICAgICogbnVtYmVycywgYE9iamVjdGAgb2JqZWN0cywgcmVnZXhlcywgYW5kIHN0cmluZ3MuIE9iamVjdHMgYXJlIGNvbXBhcmVkIGJ5XG4gICAgICogdGhlaXIgb3duLCBub3QgaW5oZXJpdGVkLCBlbnVtZXJhYmxlIHByb3BlcnRpZXMuIEZ1bmN0aW9ucyBhbmQgRE9NIG5vZGVzXG4gICAgICogYXJlICoqbm90Kiogc3VwcG9ydGVkLiBQcm92aWRlIGEgY3VzdG9taXplciBmdW5jdGlvbiB0byBleHRlbmQgc3VwcG9ydFxuICAgICAqIGZvciBjb21wYXJpbmcgb3RoZXIgdmFsdWVzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGFsaWFzIGVxXG4gICAgICogQGNhdGVnb3J5IExhbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb21wYXJlLlxuICAgICAqIEBwYXJhbSB7Kn0gb3RoZXIgVGhlIG90aGVyIHZhbHVlIHRvIGNvbXBhcmUuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgdmFsdWUgY29tcGFyaXNvbnMuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjdXN0b21pemVyYC5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHZhbHVlcyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0ID0geyAndXNlcic6ICdmcmVkJyB9O1xuICAgICAqIHZhciBvdGhlciA9IHsgJ3VzZXInOiAnZnJlZCcgfTtcbiAgICAgKlxuICAgICAqIG9iamVjdCA9PSBvdGhlcjtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqXG4gICAgICogXy5pc0VxdWFsKG9iamVjdCwgb3RoZXIpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIGEgY3VzdG9taXplciBjYWxsYmFja1xuICAgICAqIHZhciBhcnJheSA9IFsnaGVsbG8nLCAnZ29vZGJ5ZSddO1xuICAgICAqIHZhciBvdGhlciA9IFsnaGknLCAnZ29vZGJ5ZSddO1xuICAgICAqXG4gICAgICogXy5pc0VxdWFsKGFycmF5LCBvdGhlciwgZnVuY3Rpb24odmFsdWUsIG90aGVyKSB7XG4gICAgICogICBpZiAoXy5ldmVyeShbdmFsdWUsIG90aGVyXSwgUmVnRXhwLnByb3RvdHlwZS50ZXN0LCAvXmgoPzppfGVsbG8pJC8pKSB7XG4gICAgICogICAgIHJldHVybiB0cnVlO1xuICAgICAqICAgfVxuICAgICAqIH0pO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc0VxdWFsKHZhbHVlLCBvdGhlciwgY3VzdG9taXplciwgdGhpc0FyZykge1xuICAgICAgY3VzdG9taXplciA9IHR5cGVvZiBjdXN0b21pemVyID09ICdmdW5jdGlvbicgPyBiaW5kQ2FsbGJhY2soY3VzdG9taXplciwgdGhpc0FyZywgMykgOiB1bmRlZmluZWQ7XG4gICAgICB2YXIgcmVzdWx0ID0gY3VzdG9taXplciA/IGN1c3RvbWl6ZXIodmFsdWUsIG90aGVyKSA6IHVuZGVmaW5lZDtcbiAgICAgIHJldHVybiAgcmVzdWx0ID09PSB1bmRlZmluZWQgPyBiYXNlSXNFcXVhbCh2YWx1ZSwgb3RoZXIsIGN1c3RvbWl6ZXIpIDogISFyZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYW4gYEVycm9yYCwgYEV2YWxFcnJvcmAsIGBSYW5nZUVycm9yYCwgYFJlZmVyZW5jZUVycm9yYCxcbiAgICAgKiBgU3ludGF4RXJyb3JgLCBgVHlwZUVycm9yYCwgb3IgYFVSSUVycm9yYCBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIGVycm9yIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmlzRXJyb3IobmV3IEVycm9yKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzRXJyb3IoRXJyb3IpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNFcnJvcih2YWx1ZSkge1xuICAgICAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgdHlwZW9mIHZhbHVlLm1lc3NhZ2UgPT0gJ3N0cmluZycgJiYgb2JqVG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gZXJyb3JUYWc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBmaW5pdGUgcHJpbWl0aXZlIG51bWJlci5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBpcyBiYXNlZCBvbiBbYE51bWJlci5pc0Zpbml0ZWBdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLW51bWJlci5pc2Zpbml0ZSkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgZmluaXRlIG51bWJlciwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmlzRmluaXRlKDEwKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzRmluaXRlKCcxMCcpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICpcbiAgICAgKiBfLmlzRmluaXRlKHRydWUpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICpcbiAgICAgKiBfLmlzRmluaXRlKE9iamVjdCgxMCkpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICpcbiAgICAgKiBfLmlzRmluaXRlKEluZmluaXR5KTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzRmluaXRlKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdudW1iZXInICYmIG5hdGl2ZUlzRmluaXRlKHZhbHVlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYEZ1bmN0aW9uYCBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGNvcnJlY3RseSBjbGFzc2lmaWVkLCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaXNGdW5jdGlvbihfKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzRnVuY3Rpb24oL2FiYy8pO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNGdW5jdGlvbih2YWx1ZSkge1xuICAgICAgLy8gVGhlIHVzZSBvZiBgT2JqZWN0I3RvU3RyaW5nYCBhdm9pZHMgaXNzdWVzIHdpdGggdGhlIGB0eXBlb2ZgIG9wZXJhdG9yXG4gICAgICAvLyBpbiBvbGRlciB2ZXJzaW9ucyBvZiBDaHJvbWUgYW5kIFNhZmFyaSB3aGljaCByZXR1cm4gJ2Z1bmN0aW9uJyBmb3IgcmVnZXhlc1xuICAgICAgLy8gYW5kIFNhZmFyaSA4IGVxdWl2YWxlbnRzIHdoaWNoIHJldHVybiAnb2JqZWN0JyBmb3IgdHlwZWQgYXJyYXkgY29uc3RydWN0b3JzLlxuICAgICAgcmV0dXJuIGlzT2JqZWN0KHZhbHVlKSAmJiBvYmpUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBmdW5jVGFnO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHRoZSBbbGFuZ3VhZ2UgdHlwZV0oaHR0cHM6Ly9lczUuZ2l0aHViLmlvLyN4OCkgb2YgYE9iamVjdGAuXG4gICAgICogKGUuZy4gYXJyYXlzLCBmdW5jdGlvbnMsIG9iamVjdHMsIHJlZ2V4ZXMsIGBuZXcgTnVtYmVyKDApYCwgYW5kIGBuZXcgU3RyaW5nKCcnKWApXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmlzT2JqZWN0KHt9KTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzT2JqZWN0KFsxLCAyLCAzXSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc09iamVjdCgxKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG4gICAgICAvLyBBdm9pZCBhIFY4IEpJVCBidWcgaW4gQ2hyb21lIDE5LTIwLlxuICAgICAgLy8gU2VlIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0yMjkxIGZvciBtb3JlIGRldGFpbHMuXG4gICAgICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgICAgIHJldHVybiAhIXZhbHVlICYmICh0eXBlID09ICdvYmplY3QnIHx8IHR5cGUgPT0gJ2Z1bmN0aW9uJyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgYSBkZWVwIGNvbXBhcmlzb24gYmV0d2VlbiBgb2JqZWN0YCBhbmQgYHNvdXJjZWAgdG8gZGV0ZXJtaW5lIGlmXG4gICAgICogYG9iamVjdGAgY29udGFpbnMgZXF1aXZhbGVudCBwcm9wZXJ0eSB2YWx1ZXMuIElmIGBjdXN0b21pemVyYCBpcyBwcm92aWRlZFxuICAgICAqIGl0IGlzIGludm9rZWQgdG8gY29tcGFyZSB2YWx1ZXMuIElmIGBjdXN0b21pemVyYCByZXR1cm5zIGB1bmRlZmluZWRgXG4gICAgICogY29tcGFyaXNvbnMgYXJlIGhhbmRsZWQgYnkgdGhlIG1ldGhvZCBpbnN0ZWFkLiBUaGUgYGN1c3RvbWl6ZXJgIGlzIGJvdW5kXG4gICAgICogdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdGhyZWUgYXJndW1lbnRzOiAodmFsdWUsIG90aGVyLCBpbmRleHxrZXkpLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoaXMgbWV0aG9kIHN1cHBvcnRzIGNvbXBhcmluZyBwcm9wZXJ0aWVzIG9mIGFycmF5cywgYm9vbGVhbnMsXG4gICAgICogYERhdGVgIG9iamVjdHMsIG51bWJlcnMsIGBPYmplY3RgIG9iamVjdHMsIHJlZ2V4ZXMsIGFuZCBzdHJpbmdzLiBGdW5jdGlvbnNcbiAgICAgKiBhbmQgRE9NIG5vZGVzIGFyZSAqKm5vdCoqIHN1cHBvcnRlZC4gUHJvdmlkZSBhIGN1c3RvbWl6ZXIgZnVuY3Rpb24gdG8gZXh0ZW5kXG4gICAgICogc3VwcG9ydCBmb3IgY29tcGFyaW5nIG90aGVyIHZhbHVlcy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGluc3BlY3QuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZSBUaGUgb2JqZWN0IG9mIHByb3BlcnR5IHZhbHVlcyB0byBtYXRjaC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY3VzdG9taXplcl0gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSB2YWx1ZSBjb21wYXJpc29ucy5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGN1c3RvbWl6ZXJgLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgb2JqZWN0YCBpcyBhIG1hdGNoLCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBvYmplY3QgPSB7ICd1c2VyJzogJ2ZyZWQnLCAnYWdlJzogNDAgfTtcbiAgICAgKlxuICAgICAqIF8uaXNNYXRjaChvYmplY3QsIHsgJ2FnZSc6IDQwIH0pO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNNYXRjaChvYmplY3QsIHsgJ2FnZSc6IDM2IH0pO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBhIGN1c3RvbWl6ZXIgY2FsbGJhY2tcbiAgICAgKiB2YXIgb2JqZWN0ID0geyAnZ3JlZXRpbmcnOiAnaGVsbG8nIH07XG4gICAgICogdmFyIHNvdXJjZSA9IHsgJ2dyZWV0aW5nJzogJ2hpJyB9O1xuICAgICAqXG4gICAgICogXy5pc01hdGNoKG9iamVjdCwgc291cmNlLCBmdW5jdGlvbih2YWx1ZSwgb3RoZXIpIHtcbiAgICAgKiAgIHJldHVybiBfLmV2ZXJ5KFt2YWx1ZSwgb3RoZXJdLCBSZWdFeHAucHJvdG90eXBlLnRlc3QsIC9eaCg/Oml8ZWxsbykkLykgfHwgdW5kZWZpbmVkO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc01hdGNoKG9iamVjdCwgc291cmNlLCBjdXN0b21pemVyLCB0aGlzQXJnKSB7XG4gICAgICBjdXN0b21pemVyID0gdHlwZW9mIGN1c3RvbWl6ZXIgPT0gJ2Z1bmN0aW9uJyA/IGJpbmRDYWxsYmFjayhjdXN0b21pemVyLCB0aGlzQXJnLCAzKSA6IHVuZGVmaW5lZDtcbiAgICAgIHJldHVybiBiYXNlSXNNYXRjaChvYmplY3QsIGdldE1hdGNoRGF0YShzb3VyY2UpLCBjdXN0b21pemVyKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBgTmFOYC5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBpcyBub3QgdGhlIHNhbWUgYXMgW2Bpc05hTmBdKGh0dHBzOi8vZXM1LmdpdGh1Yi5pby8jeDE1LjEuMi40KVxuICAgICAqIHdoaWNoIHJldHVybnMgYHRydWVgIGZvciBgdW5kZWZpbmVkYCBhbmQgb3RoZXIgbm9uLW51bWVyaWMgdmFsdWVzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IExhbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBgTmFOYCwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmlzTmFOKE5hTik7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc05hTihuZXcgTnVtYmVyKE5hTikpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIGlzTmFOKHVuZGVmaW5lZCk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc05hTih1bmRlZmluZWQpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNOYU4odmFsdWUpIHtcbiAgICAgIC8vIEFuIGBOYU5gIHByaW1pdGl2ZSBpcyB0aGUgb25seSB2YWx1ZSB0aGF0IGlzIG5vdCBlcXVhbCB0byBpdHNlbGYuXG4gICAgICAvLyBQZXJmb3JtIHRoZSBgdG9TdHJpbmdUYWdgIGNoZWNrIGZpcnN0IHRvIGF2b2lkIGVycm9ycyB3aXRoIHNvbWUgaG9zdCBvYmplY3RzIGluIElFLlxuICAgICAgcmV0dXJuIGlzTnVtYmVyKHZhbHVlKSAmJiB2YWx1ZSAhPSArdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBuYXRpdmUgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgbmF0aXZlIGZ1bmN0aW9uLCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaXNOYXRpdmUoQXJyYXkucHJvdG90eXBlLnB1c2gpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNOYXRpdmUoXyk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc05hdGl2ZSh2YWx1ZSkge1xuICAgICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKGlzRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgICAgIHJldHVybiByZUlzTmF0aXZlLnRlc3QoZm5Ub1N0cmluZy5jYWxsKHZhbHVlKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJiByZUlzSG9zdEN0b3IudGVzdCh2YWx1ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYG51bGxgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IExhbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBgbnVsbGAsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pc051bGwobnVsbCk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc051bGwodm9pZCAwKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzTnVsbCh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlID09PSBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgTnVtYmVyYCBwcmltaXRpdmUgb3Igb2JqZWN0LlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRvIGV4Y2x1ZGUgYEluZmluaXR5YCwgYC1JbmZpbml0eWAsIGFuZCBgTmFOYCwgd2hpY2ggYXJlIGNsYXNzaWZpZWRcbiAgICAgKiBhcyBudW1iZXJzLCB1c2UgdGhlIGBfLmlzRmluaXRlYCBtZXRob2QuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGNvcnJlY3RseSBjbGFzc2lmaWVkLCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaXNOdW1iZXIoOC40KTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzTnVtYmVyKE5hTik7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc051bWJlcignOC40Jyk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc051bWJlcih2YWx1ZSkge1xuICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJyB8fCAoaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBvYmpUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBudW1iZXJUYWcpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgcGxhaW4gb2JqZWN0LCB0aGF0IGlzLCBhbiBvYmplY3QgY3JlYXRlZCBieSB0aGVcbiAgICAgKiBgT2JqZWN0YCBjb25zdHJ1Y3RvciBvciBvbmUgd2l0aCBhIGBbW1Byb3RvdHlwZV1dYCBvZiBgbnVsbGAuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgYXNzdW1lcyBvYmplY3RzIGNyZWF0ZWQgYnkgdGhlIGBPYmplY3RgIGNvbnN0cnVjdG9yXG4gICAgICogaGF2ZSBubyBpbmhlcml0ZWQgZW51bWVyYWJsZSBwcm9wZXJ0aWVzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IExhbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHBsYWluIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBmdW5jdGlvbiBGb28oKSB7XG4gICAgICogICB0aGlzLmEgPSAxO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIF8uaXNQbGFpbk9iamVjdChuZXcgRm9vKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqXG4gICAgICogXy5pc1BsYWluT2JqZWN0KFsxLCAyLCAzXSk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKlxuICAgICAqIF8uaXNQbGFpbk9iamVjdCh7ICd4JzogMCwgJ3knOiAwIH0pO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNQbGFpbk9iamVjdChPYmplY3QuY3JlYXRlKG51bGwpKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNQbGFpbk9iamVjdCh2YWx1ZSkge1xuICAgICAgdmFyIEN0b3I7XG5cbiAgICAgIC8vIEV4aXQgZWFybHkgZm9yIG5vbiBgT2JqZWN0YCBvYmplY3RzLlxuICAgICAgaWYgKCEoaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBvYmpUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBvYmplY3RUYWcgJiYgIWlzQXJndW1lbnRzKHZhbHVlKSkgfHxcbiAgICAgICAgICAoIWhhc093blByb3BlcnR5LmNhbGwodmFsdWUsICdjb25zdHJ1Y3RvcicpICYmIChDdG9yID0gdmFsdWUuY29uc3RydWN0b3IsIHR5cGVvZiBDdG9yID09ICdmdW5jdGlvbicgJiYgIShDdG9yIGluc3RhbmNlb2YgQ3RvcikpKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICAvLyBJRSA8IDkgaXRlcmF0ZXMgaW5oZXJpdGVkIHByb3BlcnRpZXMgYmVmb3JlIG93biBwcm9wZXJ0aWVzLiBJZiB0aGUgZmlyc3RcbiAgICAgIC8vIGl0ZXJhdGVkIHByb3BlcnR5IGlzIGFuIG9iamVjdCdzIG93biBwcm9wZXJ0eSB0aGVuIHRoZXJlIGFyZSBubyBpbmhlcml0ZWRcbiAgICAgIC8vIGVudW1lcmFibGUgcHJvcGVydGllcy5cbiAgICAgIHZhciByZXN1bHQ7XG4gICAgICAvLyBJbiBtb3N0IGVudmlyb25tZW50cyBhbiBvYmplY3QncyBvd24gcHJvcGVydGllcyBhcmUgaXRlcmF0ZWQgYmVmb3JlXG4gICAgICAvLyBpdHMgaW5oZXJpdGVkIHByb3BlcnRpZXMuIElmIHRoZSBsYXN0IGl0ZXJhdGVkIHByb3BlcnR5IGlzIGFuIG9iamVjdCdzXG4gICAgICAvLyBvd24gcHJvcGVydHkgdGhlbiB0aGVyZSBhcmUgbm8gaW5oZXJpdGVkIGVudW1lcmFibGUgcHJvcGVydGllcy5cbiAgICAgIGJhc2VGb3JJbih2YWx1ZSwgZnVuY3Rpb24oc3ViVmFsdWUsIGtleSkge1xuICAgICAgICByZXN1bHQgPSBrZXk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXN1bHQgPT09IHVuZGVmaW5lZCB8fCBoYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbHVlLCByZXN1bHQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgUmVnRXhwYCBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGNvcnJlY3RseSBjbGFzc2lmaWVkLCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaXNSZWdFeHAoL2FiYy8pO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNSZWdFeHAoJy9hYmMvJyk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc1JlZ0V4cCh2YWx1ZSkge1xuICAgICAgcmV0dXJuIGlzT2JqZWN0KHZhbHVlKSAmJiBvYmpUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSByZWdleHBUYWc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBTdHJpbmdgIHByaW1pdGl2ZSBvciBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGNvcnJlY3RseSBjbGFzc2lmaWVkLCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaXNTdHJpbmcoJ2FiYycpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNTdHJpbmcoMSk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc1N0cmluZyh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJyB8fCAoaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBvYmpUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBzdHJpbmdUYWcpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSB0eXBlZCBhcnJheS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgY29ycmVjdGx5IGNsYXNzaWZpZWQsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pc1R5cGVkQXJyYXkobmV3IFVpbnQ4QXJyYXkpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNUeXBlZEFycmF5KFtdKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzVHlwZWRBcnJheSh2YWx1ZSkge1xuICAgICAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgaXNMZW5ndGgodmFsdWUubGVuZ3RoKSAmJiAhIXR5cGVkQXJyYXlUYWdzW29ialRvU3RyaW5nLmNhbGwodmFsdWUpXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBgdW5kZWZpbmVkYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYHVuZGVmaW5lZGAsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pc1VuZGVmaW5lZCh2b2lkIDApO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNVbmRlZmluZWQobnVsbCk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc1VuZGVmaW5lZCh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgbGVzcyB0aGFuIGBvdGhlcmAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbXBhcmUuXG4gICAgICogQHBhcmFtIHsqfSBvdGhlciBUaGUgb3RoZXIgdmFsdWUgdG8gY29tcGFyZS5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBsZXNzIHRoYW4gYG90aGVyYCwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmx0KDEsIDMpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8ubHQoMywgMyk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKlxuICAgICAqIF8ubHQoMywgMSk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBsdCh2YWx1ZSwgb3RoZXIpIHtcbiAgICAgIHJldHVybiB2YWx1ZSA8IG90aGVyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGxlc3MgdGhhbiBvciBlcXVhbCB0byBgb3RoZXJgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IExhbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb21wYXJlLlxuICAgICAqIEBwYXJhbSB7Kn0gb3RoZXIgVGhlIG90aGVyIHZhbHVlIHRvIGNvbXBhcmUuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIGBvdGhlcmAsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5sdGUoMSwgMyk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5sdGUoMywgMyk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5sdGUoMywgMSk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBsdGUodmFsdWUsIG90aGVyKSB7XG4gICAgICByZXR1cm4gdmFsdWUgPD0gb3RoZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udmVydHMgYHZhbHVlYCB0byBhbiBhcnJheS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBMYW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29udmVydC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGNvbnZlcnRlZCBhcnJheS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogKGZ1bmN0aW9uKCkge1xuICAgICAqICAgcmV0dXJuIF8udG9BcnJheShhcmd1bWVudHMpLnNsaWNlKDEpO1xuICAgICAqIH0oMSwgMiwgMykpO1xuICAgICAqIC8vID0+IFsyLCAzXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHRvQXJyYXkodmFsdWUpIHtcbiAgICAgIHZhciBsZW5ndGggPSB2YWx1ZSA/IGdldExlbmd0aCh2YWx1ZSkgOiAwO1xuICAgICAgaWYgKCFpc0xlbmd0aChsZW5ndGgpKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZXModmFsdWUpO1xuICAgICAgfVxuICAgICAgaWYgKCFsZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFycmF5Q29weSh2YWx1ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udmVydHMgYHZhbHVlYCB0byBhIHBsYWluIG9iamVjdCBmbGF0dGVuaW5nIGluaGVyaXRlZCBlbnVtZXJhYmxlXG4gICAgICogcHJvcGVydGllcyBvZiBgdmFsdWVgIHRvIG93biBwcm9wZXJ0aWVzIG9mIHRoZSBwbGFpbiBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbnZlcnQuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgY29udmVydGVkIHBsYWluIG9iamVjdC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogZnVuY3Rpb24gRm9vKCkge1xuICAgICAqICAgdGhpcy5iID0gMjtcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBGb28ucHJvdG90eXBlLmMgPSAzO1xuICAgICAqXG4gICAgICogXy5hc3NpZ24oeyAnYSc6IDEgfSwgbmV3IEZvbyk7XG4gICAgICogLy8gPT4geyAnYSc6IDEsICdiJzogMiB9XG4gICAgICpcbiAgICAgKiBfLmFzc2lnbih7ICdhJzogMSB9LCBfLnRvUGxhaW5PYmplY3QobmV3IEZvbykpO1xuICAgICAqIC8vID0+IHsgJ2EnOiAxLCAnYic6IDIsICdjJzogMyB9XG4gICAgICovXG4gICAgZnVuY3Rpb24gdG9QbGFpbk9iamVjdCh2YWx1ZSkge1xuICAgICAgcmV0dXJuIGJhc2VDb3B5KHZhbHVlLCBrZXlzSW4odmFsdWUpKTtcbiAgICB9XG5cbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAvKipcbiAgICAgKiBSZWN1cnNpdmVseSBtZXJnZXMgb3duIGVudW1lcmFibGUgcHJvcGVydGllcyBvZiB0aGUgc291cmNlIG9iamVjdChzKSwgdGhhdFxuICAgICAqIGRvbid0IHJlc29sdmUgdG8gYHVuZGVmaW5lZGAgaW50byB0aGUgZGVzdGluYXRpb24gb2JqZWN0LiBTdWJzZXF1ZW50IHNvdXJjZXNcbiAgICAgKiBvdmVyd3JpdGUgcHJvcGVydHkgYXNzaWdubWVudHMgb2YgcHJldmlvdXMgc291cmNlcy4gSWYgYGN1c3RvbWl6ZXJgIGlzXG4gICAgICogcHJvdmlkZWQgaXQgaXMgaW52b2tlZCB0byBwcm9kdWNlIHRoZSBtZXJnZWQgdmFsdWVzIG9mIHRoZSBkZXN0aW5hdGlvbiBhbmRcbiAgICAgKiBzb3VyY2UgcHJvcGVydGllcy4gSWYgYGN1c3RvbWl6ZXJgIHJldHVybnMgYHVuZGVmaW5lZGAgbWVyZ2luZyBpcyBoYW5kbGVkXG4gICAgICogYnkgdGhlIG1ldGhvZCBpbnN0ZWFkLiBUaGUgYGN1c3RvbWl6ZXJgIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZFxuICAgICAqIHdpdGggZml2ZSBhcmd1bWVudHM6IChvYmplY3RWYWx1ZSwgc291cmNlVmFsdWUsIGtleSwgb2JqZWN0LCBzb3VyY2UpLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIGRlc3RpbmF0aW9uIG9iamVjdC5cbiAgICAgKiBAcGFyYW0gey4uLk9iamVjdH0gW3NvdXJjZXNdIFRoZSBzb3VyY2Ugb2JqZWN0cy5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY3VzdG9taXplcl0gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBhc3NpZ25lZCB2YWx1ZXMuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjdXN0b21pemVyYC5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgdXNlcnMgPSB7XG4gICAgICogICAnZGF0YSc6IFt7ICd1c2VyJzogJ2Jhcm5leScgfSwgeyAndXNlcic6ICdmcmVkJyB9XVxuICAgICAqIH07XG4gICAgICpcbiAgICAgKiB2YXIgYWdlcyA9IHtcbiAgICAgKiAgICdkYXRhJzogW3sgJ2FnZSc6IDM2IH0sIHsgJ2FnZSc6IDQwIH1dXG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIF8ubWVyZ2UodXNlcnMsIGFnZXMpO1xuICAgICAqIC8vID0+IHsgJ2RhdGEnOiBbeyAndXNlcic6ICdiYXJuZXknLCAnYWdlJzogMzYgfSwgeyAndXNlcic6ICdmcmVkJywgJ2FnZSc6IDQwIH1dIH1cbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIGEgY3VzdG9taXplciBjYWxsYmFja1xuICAgICAqIHZhciBvYmplY3QgPSB7XG4gICAgICogICAnZnJ1aXRzJzogWydhcHBsZSddLFxuICAgICAqICAgJ3ZlZ2V0YWJsZXMnOiBbJ2JlZXQnXVxuICAgICAqIH07XG4gICAgICpcbiAgICAgKiB2YXIgb3RoZXIgPSB7XG4gICAgICogICAnZnJ1aXRzJzogWydiYW5hbmEnXSxcbiAgICAgKiAgICd2ZWdldGFibGVzJzogWydjYXJyb3QnXVxuICAgICAqIH07XG4gICAgICpcbiAgICAgKiBfLm1lcmdlKG9iamVjdCwgb3RoZXIsIGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgKiAgIGlmIChfLmlzQXJyYXkoYSkpIHtcbiAgICAgKiAgICAgcmV0dXJuIGEuY29uY2F0KGIpO1xuICAgICAqICAgfVxuICAgICAqIH0pO1xuICAgICAqIC8vID0+IHsgJ2ZydWl0cyc6IFsnYXBwbGUnLCAnYmFuYW5hJ10sICd2ZWdldGFibGVzJzogWydiZWV0JywgJ2NhcnJvdCddIH1cbiAgICAgKi9cbiAgICB2YXIgbWVyZ2UgPSBjcmVhdGVBc3NpZ25lcihiYXNlTWVyZ2UpO1xuXG4gICAgLyoqXG4gICAgICogQXNzaWducyBvd24gZW51bWVyYWJsZSBwcm9wZXJ0aWVzIG9mIHNvdXJjZSBvYmplY3QocykgdG8gdGhlIGRlc3RpbmF0aW9uXG4gICAgICogb2JqZWN0LiBTdWJzZXF1ZW50IHNvdXJjZXMgb3ZlcndyaXRlIHByb3BlcnR5IGFzc2lnbm1lbnRzIG9mIHByZXZpb3VzIHNvdXJjZXMuXG4gICAgICogSWYgYGN1c3RvbWl6ZXJgIGlzIHByb3ZpZGVkIGl0IGlzIGludm9rZWQgdG8gcHJvZHVjZSB0aGUgYXNzaWduZWQgdmFsdWVzLlxuICAgICAqIFRoZSBgY3VzdG9taXplcmAgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggZml2ZSBhcmd1bWVudHM6XG4gICAgICogKG9iamVjdFZhbHVlLCBzb3VyY2VWYWx1ZSwga2V5LCBvYmplY3QsIHNvdXJjZSkuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgbXV0YXRlcyBgb2JqZWN0YCBhbmQgaXMgYmFzZWQgb25cbiAgICAgKiBbYE9iamVjdC5hc3NpZ25gXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1vYmplY3QuYXNzaWduKS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBhbGlhcyBleHRlbmRcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgZGVzdGluYXRpb24gb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7Li4uT2JqZWN0fSBbc291cmNlc10gVGhlIHNvdXJjZSBvYmplY3RzLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGFzc2lnbmVkIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGN1c3RvbWl6ZXJgLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uYXNzaWduKHsgJ3VzZXInOiAnYmFybmV5JyB9LCB7ICdhZ2UnOiA0MCB9LCB7ICd1c2VyJzogJ2ZyZWQnIH0pO1xuICAgICAqIC8vID0+IHsgJ3VzZXInOiAnZnJlZCcsICdhZ2UnOiA0MCB9XG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBhIGN1c3RvbWl6ZXIgY2FsbGJhY2tcbiAgICAgKiB2YXIgZGVmYXVsdHMgPSBfLnBhcnRpYWxSaWdodChfLmFzc2lnbiwgZnVuY3Rpb24odmFsdWUsIG90aGVyKSB7XG4gICAgICogICByZXR1cm4gXy5pc1VuZGVmaW5lZCh2YWx1ZSkgPyBvdGhlciA6IHZhbHVlO1xuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogZGVmYXVsdHMoeyAndXNlcic6ICdiYXJuZXknIH0sIHsgJ2FnZSc6IDM2IH0sIHsgJ3VzZXInOiAnZnJlZCcgfSk7XG4gICAgICogLy8gPT4geyAndXNlcic6ICdiYXJuZXknLCAnYWdlJzogMzYgfVxuICAgICAqL1xuICAgIHZhciBhc3NpZ24gPSBjcmVhdGVBc3NpZ25lcihmdW5jdGlvbihvYmplY3QsIHNvdXJjZSwgY3VzdG9taXplcikge1xuICAgICAgcmV0dXJuIGN1c3RvbWl6ZXJcbiAgICAgICAgPyBhc3NpZ25XaXRoKG9iamVjdCwgc291cmNlLCBjdXN0b21pemVyKVxuICAgICAgICA6IGJhc2VBc3NpZ24ob2JqZWN0LCBzb3VyY2UpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBvYmplY3QgdGhhdCBpbmhlcml0cyBmcm9tIHRoZSBnaXZlbiBgcHJvdG90eXBlYCBvYmplY3QuIElmIGFcbiAgICAgKiBgcHJvcGVydGllc2Agb2JqZWN0IGlzIHByb3ZpZGVkIGl0cyBvd24gZW51bWVyYWJsZSBwcm9wZXJ0aWVzIGFyZSBhc3NpZ25lZFxuICAgICAqIHRvIHRoZSBjcmVhdGVkIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcHJvdG90eXBlIFRoZSBvYmplY3QgdG8gaW5oZXJpdCBmcm9tLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbcHJvcGVydGllc10gVGhlIHByb3BlcnRpZXMgdG8gYXNzaWduIHRvIHRoZSBvYmplY3QuXG4gICAgICogQHBhcmFtLSB7T2JqZWN0fSBbZ3VhcmRdIEVuYWJsZXMgdXNlIGFzIGEgY2FsbGJhY2sgZm9yIGZ1bmN0aW9ucyBsaWtlIGBfLm1hcGAuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbmV3IG9iamVjdC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogZnVuY3Rpb24gU2hhcGUoKSB7XG4gICAgICogICB0aGlzLnggPSAwO1xuICAgICAqICAgdGhpcy55ID0gMDtcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBmdW5jdGlvbiBDaXJjbGUoKSB7XG4gICAgICogICBTaGFwZS5jYWxsKHRoaXMpO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIENpcmNsZS5wcm90b3R5cGUgPSBfLmNyZWF0ZShTaGFwZS5wcm90b3R5cGUsIHtcbiAgICAgKiAgICdjb25zdHJ1Y3Rvcic6IENpcmNsZVxuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogdmFyIGNpcmNsZSA9IG5ldyBDaXJjbGU7XG4gICAgICogY2lyY2xlIGluc3RhbmNlb2YgQ2lyY2xlO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIGNpcmNsZSBpbnN0YW5jZW9mIFNoYXBlO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGUocHJvdG90eXBlLCBwcm9wZXJ0aWVzLCBndWFyZCkge1xuICAgICAgdmFyIHJlc3VsdCA9IGJhc2VDcmVhdGUocHJvdG90eXBlKTtcbiAgICAgIGlmIChndWFyZCAmJiBpc0l0ZXJhdGVlQ2FsbChwcm90b3R5cGUsIHByb3BlcnRpZXMsIGd1YXJkKSkge1xuICAgICAgICBwcm9wZXJ0aWVzID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHByb3BlcnRpZXMgPyBiYXNlQXNzaWduKHJlc3VsdCwgcHJvcGVydGllcykgOiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQXNzaWducyBvd24gZW51bWVyYWJsZSBwcm9wZXJ0aWVzIG9mIHNvdXJjZSBvYmplY3QocykgdG8gdGhlIGRlc3RpbmF0aW9uXG4gICAgICogb2JqZWN0IGZvciBhbGwgZGVzdGluYXRpb24gcHJvcGVydGllcyB0aGF0IHJlc29sdmUgdG8gYHVuZGVmaW5lZGAuIE9uY2UgYVxuICAgICAqIHByb3BlcnR5IGlzIHNldCwgYWRkaXRpb25hbCB2YWx1ZXMgb2YgdGhlIHNhbWUgcHJvcGVydHkgYXJlIGlnbm9yZWQuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgbXV0YXRlcyBgb2JqZWN0YC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gICAgICogQHBhcmFtIHsuLi5PYmplY3R9IFtzb3VyY2VzXSBUaGUgc291cmNlIG9iamVjdHMuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5kZWZhdWx0cyh7ICd1c2VyJzogJ2Jhcm5leScgfSwgeyAnYWdlJzogMzYgfSwgeyAndXNlcic6ICdmcmVkJyB9KTtcbiAgICAgKiAvLyA9PiB7ICd1c2VyJzogJ2Jhcm5leScsICdhZ2UnOiAzNiB9XG4gICAgICovXG4gICAgdmFyIGRlZmF1bHRzID0gY3JlYXRlRGVmYXVsdHMoYXNzaWduLCBhc3NpZ25EZWZhdWx0cyk7XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmRlZmF1bHRzYCBleGNlcHQgdGhhdCBpdCByZWN1cnNpdmVseSBhc3NpZ25zXG4gICAgICogZGVmYXVsdCBwcm9wZXJ0aWVzLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoaXMgbWV0aG9kIG11dGF0ZXMgYG9iamVjdGAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgZGVzdGluYXRpb24gb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7Li4uT2JqZWN0fSBbc291cmNlc10gVGhlIHNvdXJjZSBvYmplY3RzLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uZGVmYXVsdHNEZWVwKHsgJ3VzZXInOiB7ICduYW1lJzogJ2Jhcm5leScgfSB9LCB7ICd1c2VyJzogeyAnbmFtZSc6ICdmcmVkJywgJ2FnZSc6IDM2IH0gfSk7XG4gICAgICogLy8gPT4geyAndXNlcic6IHsgJ25hbWUnOiAnYmFybmV5JywgJ2FnZSc6IDM2IH0gfVxuICAgICAqXG4gICAgICovXG4gICAgdmFyIGRlZmF1bHRzRGVlcCA9IGNyZWF0ZURlZmF1bHRzKG1lcmdlLCBtZXJnZURlZmF1bHRzKTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uZmluZGAgZXhjZXB0IHRoYXQgaXQgcmV0dXJucyB0aGUga2V5IG9mIHRoZSBmaXJzdFxuICAgICAqIGVsZW1lbnQgYHByZWRpY2F0ZWAgcmV0dXJucyB0cnV0aHkgZm9yIGluc3RlYWQgb2YgdGhlIGVsZW1lbnQgaXRzZWxmLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgcHJlZGljYXRlYCB0aGUgY3JlYXRlZCBgXy5wcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGEgdmFsdWUgaXMgYWxzbyBwcm92aWRlZCBmb3IgYHRoaXNBcmdgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNQcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIGEgbWF0Y2hpbmcgcHJvcGVydHlcbiAgICAgKiB2YWx1ZSwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgcHJlZGljYXRlYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzYCBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuXG4gICAgICogb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHNlYXJjaC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtwcmVkaWNhdGU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWRcbiAgICAgKiAgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYHByZWRpY2F0ZWAuXG4gICAgICogQHJldHVybnMge3N0cmluZ3x1bmRlZmluZWR9IFJldHVybnMgdGhlIGtleSBvZiB0aGUgbWF0Y2hlZCBlbGVtZW50LCBlbHNlIGB1bmRlZmluZWRgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgdXNlcnMgPSB7XG4gICAgICogICAnYmFybmV5JzogIHsgJ2FnZSc6IDM2LCAnYWN0aXZlJzogdHJ1ZSB9LFxuICAgICAqICAgJ2ZyZWQnOiAgICB7ICdhZ2UnOiA0MCwgJ2FjdGl2ZSc6IGZhbHNlIH0sXG4gICAgICogICAncGViYmxlcyc6IHsgJ2FnZSc6IDEsICAnYWN0aXZlJzogdHJ1ZSB9XG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIF8uZmluZEtleSh1c2VycywgZnVuY3Rpb24oY2hyKSB7XG4gICAgICogICByZXR1cm4gY2hyLmFnZSA8IDQwO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+ICdiYXJuZXknIChpdGVyYXRpb24gb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQpXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ubWF0Y2hlc2AgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5maW5kS2V5KHVzZXJzLCB7ICdhZ2UnOiAxLCAnYWN0aXZlJzogdHJ1ZSB9KTtcbiAgICAgKiAvLyA9PiAncGViYmxlcydcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5tYXRjaGVzUHJvcGVydHlgIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8uZmluZEtleSh1c2VycywgJ2FjdGl2ZScsIGZhbHNlKTtcbiAgICAgKiAvLyA9PiAnZnJlZCdcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5wcm9wZXJ0eWAgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5maW5kS2V5KHVzZXJzLCAnYWN0aXZlJyk7XG4gICAgICogLy8gPT4gJ2Jhcm5leSdcbiAgICAgKi9cbiAgICB2YXIgZmluZEtleSA9IGNyZWF0ZUZpbmRLZXkoYmFzZUZvck93bik7XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmZpbmRLZXlgIGV4Y2VwdCB0aGF0IGl0IGl0ZXJhdGVzIG92ZXIgZWxlbWVudHMgb2ZcbiAgICAgKiBhIGNvbGxlY3Rpb24gaW4gdGhlIG9wcG9zaXRlIG9yZGVyLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgcHJlZGljYXRlYCB0aGUgY3JlYXRlZCBgXy5wcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGEgdmFsdWUgaXMgYWxzbyBwcm92aWRlZCBmb3IgYHRoaXNBcmdgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNQcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIGEgbWF0Y2hpbmcgcHJvcGVydHlcbiAgICAgKiB2YWx1ZSwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgcHJlZGljYXRlYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzYCBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuXG4gICAgICogb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHNlYXJjaC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtwcmVkaWNhdGU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWRcbiAgICAgKiAgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYHByZWRpY2F0ZWAuXG4gICAgICogQHJldHVybnMge3N0cmluZ3x1bmRlZmluZWR9IFJldHVybnMgdGhlIGtleSBvZiB0aGUgbWF0Y2hlZCBlbGVtZW50LCBlbHNlIGB1bmRlZmluZWRgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgdXNlcnMgPSB7XG4gICAgICogICAnYmFybmV5JzogIHsgJ2FnZSc6IDM2LCAnYWN0aXZlJzogdHJ1ZSB9LFxuICAgICAqICAgJ2ZyZWQnOiAgICB7ICdhZ2UnOiA0MCwgJ2FjdGl2ZSc6IGZhbHNlIH0sXG4gICAgICogICAncGViYmxlcyc6IHsgJ2FnZSc6IDEsICAnYWN0aXZlJzogdHJ1ZSB9XG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIF8uZmluZExhc3RLZXkodXNlcnMsIGZ1bmN0aW9uKGNocikge1xuICAgICAqICAgcmV0dXJuIGNoci5hZ2UgPCA0MDtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiByZXR1cm5zIGBwZWJibGVzYCBhc3N1bWluZyBgXy5maW5kS2V5YCByZXR1cm5zIGBiYXJuZXlgXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ubWF0Y2hlc2AgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5maW5kTGFzdEtleSh1c2VycywgeyAnYWdlJzogMzYsICdhY3RpdmUnOiB0cnVlIH0pO1xuICAgICAqIC8vID0+ICdiYXJuZXknXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYF8ubWF0Y2hlc1Byb3BlcnR5YCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLmZpbmRMYXN0S2V5KHVzZXJzLCAnYWN0aXZlJywgZmFsc2UpO1xuICAgICAqIC8vID0+ICdmcmVkJ1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLnByb3BlcnR5YCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLmZpbmRMYXN0S2V5KHVzZXJzLCAnYWN0aXZlJyk7XG4gICAgICogLy8gPT4gJ3BlYmJsZXMnXG4gICAgICovXG4gICAgdmFyIGZpbmRMYXN0S2V5ID0gY3JlYXRlRmluZEtleShiYXNlRm9yT3duUmlnaHQpO1xuXG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgb3ZlciBvd24gYW5kIGluaGVyaXRlZCBlbnVtZXJhYmxlIHByb3BlcnRpZXMgb2YgYW4gb2JqZWN0IGludm9raW5nXG4gICAgICogYGl0ZXJhdGVlYCBmb3IgZWFjaCBwcm9wZXJ0eS4gVGhlIGBpdGVyYXRlZWAgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkXG4gICAgICogd2l0aCB0aHJlZSBhcmd1bWVudHM6ICh2YWx1ZSwga2V5LCBvYmplY3QpLiBJdGVyYXRlZSBmdW5jdGlvbnMgbWF5IGV4aXRcbiAgICAgKiBpdGVyYXRpb24gZWFybHkgYnkgZXhwbGljaXRseSByZXR1cm5pbmcgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtpdGVyYXRlZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgaXRlcmF0ZWVgLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGZ1bmN0aW9uIEZvbygpIHtcbiAgICAgKiAgIHRoaXMuYSA9IDE7XG4gICAgICogICB0aGlzLmIgPSAyO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIEZvby5wcm90b3R5cGUuYyA9IDM7XG4gICAgICpcbiAgICAgKiBfLmZvckluKG5ldyBGb28sIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgKiAgIGNvbnNvbGUubG9nKGtleSk7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gbG9ncyAnYScsICdiJywgYW5kICdjJyAoaXRlcmF0aW9uIG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkKVxuICAgICAqL1xuICAgIHZhciBmb3JJbiA9IGNyZWF0ZUZvckluKGJhc2VGb3IpO1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5mb3JJbmAgZXhjZXB0IHRoYXQgaXQgaXRlcmF0ZXMgb3ZlciBwcm9wZXJ0aWVzIG9mXG4gICAgICogYG9iamVjdGAgaW4gdGhlIG9wcG9zaXRlIG9yZGVyLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2l0ZXJhdGVlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBpdGVyYXRlZWAuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogZnVuY3Rpb24gRm9vKCkge1xuICAgICAqICAgdGhpcy5hID0gMTtcbiAgICAgKiAgIHRoaXMuYiA9IDI7XG4gICAgICogfVxuICAgICAqXG4gICAgICogRm9vLnByb3RvdHlwZS5jID0gMztcbiAgICAgKlxuICAgICAqIF8uZm9ySW5SaWdodChuZXcgRm9vLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICogICBjb25zb2xlLmxvZyhrZXkpO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IGxvZ3MgJ2MnLCAnYicsIGFuZCAnYScgYXNzdW1pbmcgYF8uZm9ySW4gYCBsb2dzICdhJywgJ2InLCBhbmQgJ2MnXG4gICAgICovXG4gICAgdmFyIGZvckluUmlnaHQgPSBjcmVhdGVGb3JJbihiYXNlRm9yUmlnaHQpO1xuXG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgb3ZlciBvd24gZW51bWVyYWJsZSBwcm9wZXJ0aWVzIG9mIGFuIG9iamVjdCBpbnZva2luZyBgaXRlcmF0ZWVgXG4gICAgICogZm9yIGVhY2ggcHJvcGVydHkuIFRoZSBgaXRlcmF0ZWVgIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoXG4gICAgICogdGhyZWUgYXJndW1lbnRzOiAodmFsdWUsIGtleSwgb2JqZWN0KS4gSXRlcmF0ZWUgZnVuY3Rpb25zIG1heSBleGl0IGl0ZXJhdGlvblxuICAgICAqIGVhcmx5IGJ5IGV4cGxpY2l0bHkgcmV0dXJuaW5nIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbaXRlcmF0ZWU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGl0ZXJhdGVlYC5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBmdW5jdGlvbiBGb28oKSB7XG4gICAgICogICB0aGlzLmEgPSAxO1xuICAgICAqICAgdGhpcy5iID0gMjtcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBGb28ucHJvdG90eXBlLmMgPSAzO1xuICAgICAqXG4gICAgICogXy5mb3JPd24obmV3IEZvbywgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAqICAgY29uc29sZS5sb2coa2V5KTtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiBsb2dzICdhJyBhbmQgJ2InIChpdGVyYXRpb24gb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQpXG4gICAgICovXG4gICAgdmFyIGZvck93biA9IGNyZWF0ZUZvck93bihiYXNlRm9yT3duKTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uZm9yT3duYCBleGNlcHQgdGhhdCBpdCBpdGVyYXRlcyBvdmVyIHByb3BlcnRpZXMgb2ZcbiAgICAgKiBgb2JqZWN0YCBpbiB0aGUgb3Bwb3NpdGUgb3JkZXIuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbaXRlcmF0ZWU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGl0ZXJhdGVlYC5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBmdW5jdGlvbiBGb28oKSB7XG4gICAgICogICB0aGlzLmEgPSAxO1xuICAgICAqICAgdGhpcy5iID0gMjtcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBGb28ucHJvdG90eXBlLmMgPSAzO1xuICAgICAqXG4gICAgICogXy5mb3JPd25SaWdodChuZXcgRm9vLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICogICBjb25zb2xlLmxvZyhrZXkpO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IGxvZ3MgJ2InIGFuZCAnYScgYXNzdW1pbmcgYF8uZm9yT3duYCBsb2dzICdhJyBhbmQgJ2InXG4gICAgICovXG4gICAgdmFyIGZvck93blJpZ2h0ID0gY3JlYXRlRm9yT3duKGJhc2VGb3JPd25SaWdodCk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIGZ1bmN0aW9uIHByb3BlcnR5IG5hbWVzIGZyb20gYWxsIGVudW1lcmFibGUgcHJvcGVydGllcyxcbiAgICAgKiBvd24gYW5kIGluaGVyaXRlZCwgb2YgYG9iamVjdGAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAYWxpYXMgbWV0aG9kc1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaW5zcGVjdC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5mdW5jdGlvbnMoXyk7XG4gICAgICogLy8gPT4gWydhZnRlcicsICdhcnknLCAnYXNzaWduJywgLi4uXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGZ1bmN0aW9ucyhvYmplY3QpIHtcbiAgICAgIHJldHVybiBiYXNlRnVuY3Rpb25zKG9iamVjdCwga2V5c0luKG9iamVjdCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHByb3BlcnR5IHZhbHVlIGF0IGBwYXRoYCBvZiBgb2JqZWN0YC4gSWYgdGhlIHJlc29sdmVkIHZhbHVlIGlzXG4gICAgICogYHVuZGVmaW5lZGAgdGhlIGBkZWZhdWx0VmFsdWVgIGlzIHVzZWQgaW4gaXRzIHBsYWNlLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAgICAgKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuICAgICAqIEBwYXJhbSB7Kn0gW2RlZmF1bHRWYWx1ZV0gVGhlIHZhbHVlIHJldHVybmVkIGlmIHRoZSByZXNvbHZlZCB2YWx1ZSBpcyBgdW5kZWZpbmVkYC5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcmVzb2x2ZWQgdmFsdWUuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBvYmplY3QgPSB7ICdhJzogW3sgJ2InOiB7ICdjJzogMyB9IH1dIH07XG4gICAgICpcbiAgICAgKiBfLmdldChvYmplY3QsICdhWzBdLmIuYycpO1xuICAgICAqIC8vID0+IDNcbiAgICAgKlxuICAgICAqIF8uZ2V0KG9iamVjdCwgWydhJywgJzAnLCAnYicsICdjJ10pO1xuICAgICAqIC8vID0+IDNcbiAgICAgKlxuICAgICAqIF8uZ2V0KG9iamVjdCwgJ2EuYi5jJywgJ2RlZmF1bHQnKTtcbiAgICAgKiAvLyA9PiAnZGVmYXVsdCdcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXQob2JqZWN0LCBwYXRoLCBkZWZhdWx0VmFsdWUpIHtcbiAgICAgIHZhciByZXN1bHQgPSBvYmplY3QgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IGJhc2VHZXQob2JqZWN0LCB0b1BhdGgocGF0aCksIHBhdGggKyAnJyk7XG4gICAgICByZXR1cm4gcmVzdWx0ID09PSB1bmRlZmluZWQgPyBkZWZhdWx0VmFsdWUgOiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGBwYXRoYCBpcyBhIGRpcmVjdCBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gICAgICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBwYXRoYCBpcyBhIGRpcmVjdCBwcm9wZXJ0eSwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0ID0geyAnYSc6IHsgJ2InOiB7ICdjJzogMyB9IH0gfTtcbiAgICAgKlxuICAgICAqIF8uaGFzKG9iamVjdCwgJ2EnKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmhhcyhvYmplY3QsICdhLmIuYycpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaGFzKG9iamVjdCwgWydhJywgJ2InLCAnYyddKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaGFzKG9iamVjdCwgcGF0aCkge1xuICAgICAgaWYgKG9iamVjdCA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHZhciByZXN1bHQgPSBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcGF0aCk7XG4gICAgICBpZiAoIXJlc3VsdCAmJiAhaXNLZXkocGF0aCkpIHtcbiAgICAgICAgcGF0aCA9IHRvUGF0aChwYXRoKTtcbiAgICAgICAgb2JqZWN0ID0gcGF0aC5sZW5ndGggPT0gMSA/IG9iamVjdCA6IGJhc2VHZXQob2JqZWN0LCBiYXNlU2xpY2UocGF0aCwgMCwgLTEpKTtcbiAgICAgICAgaWYgKG9iamVjdCA9PSBudWxsKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHBhdGggPSBsYXN0KHBhdGgpO1xuICAgICAgICByZXN1bHQgPSBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcGF0aCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0IHx8IChpc0xlbmd0aChvYmplY3QubGVuZ3RoKSAmJiBpc0luZGV4KHBhdGgsIG9iamVjdC5sZW5ndGgpICYmXG4gICAgICAgIChpc0FycmF5KG9iamVjdCkgfHwgaXNBcmd1bWVudHMob2JqZWN0KSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gb2JqZWN0IGNvbXBvc2VkIG9mIHRoZSBpbnZlcnRlZCBrZXlzIGFuZCB2YWx1ZXMgb2YgYG9iamVjdGAuXG4gICAgICogSWYgYG9iamVjdGAgY29udGFpbnMgZHVwbGljYXRlIHZhbHVlcywgc3Vic2VxdWVudCB2YWx1ZXMgb3ZlcndyaXRlIHByb3BlcnR5XG4gICAgICogYXNzaWdubWVudHMgb2YgcHJldmlvdXMgdmFsdWVzIHVubGVzcyBgbXVsdGlWYWx1ZWAgaXMgYHRydWVgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpbnZlcnQuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbbXVsdGlWYWx1ZV0gQWxsb3cgbXVsdGlwbGUgdmFsdWVzIHBlciBrZXkuXG4gICAgICogQHBhcmFtLSB7T2JqZWN0fSBbZ3VhcmRdIEVuYWJsZXMgdXNlIGFzIGEgY2FsbGJhY2sgZm9yIGZ1bmN0aW9ucyBsaWtlIGBfLm1hcGAuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbmV3IGludmVydGVkIG9iamVjdC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIG9iamVjdCA9IHsgJ2EnOiAxLCAnYic6IDIsICdjJzogMSB9O1xuICAgICAqXG4gICAgICogXy5pbnZlcnQob2JqZWN0KTtcbiAgICAgKiAvLyA9PiB7ICcxJzogJ2MnLCAnMic6ICdiJyB9XG4gICAgICpcbiAgICAgKiAvLyB3aXRoIGBtdWx0aVZhbHVlYFxuICAgICAqIF8uaW52ZXJ0KG9iamVjdCwgdHJ1ZSk7XG4gICAgICogLy8gPT4geyAnMSc6IFsnYScsICdjJ10sICcyJzogWydiJ10gfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGludmVydChvYmplY3QsIG11bHRpVmFsdWUsIGd1YXJkKSB7XG4gICAgICBpZiAoZ3VhcmQgJiYgaXNJdGVyYXRlZUNhbGwob2JqZWN0LCBtdWx0aVZhbHVlLCBndWFyZCkpIHtcbiAgICAgICAgbXVsdGlWYWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIHByb3BzID0ga2V5cyhvYmplY3QpLFxuICAgICAgICAgIGxlbmd0aCA9IHByb3BzLmxlbmd0aCxcbiAgICAgICAgICByZXN1bHQgPSB7fTtcblxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgdmFyIGtleSA9IHByb3BzW2luZGV4XSxcbiAgICAgICAgICAgIHZhbHVlID0gb2JqZWN0W2tleV07XG5cbiAgICAgICAgaWYgKG11bHRpVmFsdWUpIHtcbiAgICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChyZXN1bHQsIHZhbHVlKSkge1xuICAgICAgICAgICAgcmVzdWx0W3ZhbHVlXS5wdXNoKGtleSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdFt2YWx1ZV0gPSBba2V5XTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgcmVzdWx0W3ZhbHVlXSA9IGtleTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIHRoZSBvd24gZW51bWVyYWJsZSBwcm9wZXJ0eSBuYW1lcyBvZiBgb2JqZWN0YC5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBOb24tb2JqZWN0IHZhbHVlcyBhcmUgY29lcmNlZCB0byBvYmplY3RzLiBTZWUgdGhlXG4gICAgICogW0VTIHNwZWNdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLW9iamVjdC5rZXlzKVxuICAgICAqIGZvciBtb3JlIGRldGFpbHMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGZ1bmN0aW9uIEZvbygpIHtcbiAgICAgKiAgIHRoaXMuYSA9IDE7XG4gICAgICogICB0aGlzLmIgPSAyO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIEZvby5wcm90b3R5cGUuYyA9IDM7XG4gICAgICpcbiAgICAgKiBfLmtleXMobmV3IEZvbyk7XG4gICAgICogLy8gPT4gWydhJywgJ2InXSAoaXRlcmF0aW9uIG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkKVxuICAgICAqXG4gICAgICogXy5rZXlzKCdoaScpO1xuICAgICAqIC8vID0+IFsnMCcsICcxJ11cbiAgICAgKi9cbiAgICB2YXIga2V5cyA9ICFuYXRpdmVLZXlzID8gc2hpbUtleXMgOiBmdW5jdGlvbihvYmplY3QpIHtcbiAgICAgIHZhciBDdG9yID0gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBvYmplY3QuY29uc3RydWN0b3I7XG4gICAgICBpZiAoKHR5cGVvZiBDdG9yID09ICdmdW5jdGlvbicgJiYgQ3Rvci5wcm90b3R5cGUgPT09IG9iamVjdCkgfHxcbiAgICAgICAgICAodHlwZW9mIG9iamVjdCAhPSAnZnVuY3Rpb24nICYmIGlzQXJyYXlMaWtlKG9iamVjdCkpKSB7XG4gICAgICAgIHJldHVybiBzaGltS2V5cyhvYmplY3QpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGlzT2JqZWN0KG9iamVjdCkgPyBuYXRpdmVLZXlzKG9iamVjdCkgOiBbXTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhcnJheSBvZiB0aGUgb3duIGFuZCBpbmhlcml0ZWQgZW51bWVyYWJsZSBwcm9wZXJ0eSBuYW1lcyBvZiBgb2JqZWN0YC5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBOb24tb2JqZWN0IHZhbHVlcyBhcmUgY29lcmNlZCB0byBvYmplY3RzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBmdW5jdGlvbiBGb28oKSB7XG4gICAgICogICB0aGlzLmEgPSAxO1xuICAgICAqICAgdGhpcy5iID0gMjtcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBGb28ucHJvdG90eXBlLmMgPSAzO1xuICAgICAqXG4gICAgICogXy5rZXlzSW4obmV3IEZvbyk7XG4gICAgICogLy8gPT4gWydhJywgJ2InLCAnYyddIChpdGVyYXRpb24gb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQpXG4gICAgICovXG4gICAgZnVuY3Rpb24ga2V5c0luKG9iamVjdCkge1xuICAgICAgaWYgKG9iamVjdCA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICAgIGlmICghaXNPYmplY3Qob2JqZWN0KSkge1xuICAgICAgICBvYmplY3QgPSBPYmplY3Qob2JqZWN0KTtcbiAgICAgIH1cbiAgICAgIHZhciBsZW5ndGggPSBvYmplY3QubGVuZ3RoO1xuICAgICAgbGVuZ3RoID0gKGxlbmd0aCAmJiBpc0xlbmd0aChsZW5ndGgpICYmXG4gICAgICAgIChpc0FycmF5KG9iamVjdCkgfHwgaXNBcmd1bWVudHMob2JqZWN0KSkgJiYgbGVuZ3RoKSB8fCAwO1xuXG4gICAgICB2YXIgQ3RvciA9IG9iamVjdC5jb25zdHJ1Y3RvcixcbiAgICAgICAgICBpbmRleCA9IC0xLFxuICAgICAgICAgIGlzUHJvdG8gPSB0eXBlb2YgQ3RvciA9PSAnZnVuY3Rpb24nICYmIEN0b3IucHJvdG90eXBlID09PSBvYmplY3QsXG4gICAgICAgICAgcmVzdWx0ID0gQXJyYXkobGVuZ3RoKSxcbiAgICAgICAgICBza2lwSW5kZXhlcyA9IGxlbmd0aCA+IDA7XG5cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHJlc3VsdFtpbmRleF0gPSAoaW5kZXggKyAnJyk7XG4gICAgICB9XG4gICAgICBmb3IgKHZhciBrZXkgaW4gb2JqZWN0KSB7XG4gICAgICAgIGlmICghKHNraXBJbmRleGVzICYmIGlzSW5kZXgoa2V5LCBsZW5ndGgpKSAmJlxuICAgICAgICAgICAgIShrZXkgPT0gJ2NvbnN0cnVjdG9yJyAmJiAoaXNQcm90byB8fCAhaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIGtleSkpKSkge1xuICAgICAgICAgIHJlc3VsdC5wdXNoKGtleSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIG9wcG9zaXRlIG9mIGBfLm1hcFZhbHVlc2A7IHRoaXMgbWV0aG9kIGNyZWF0ZXMgYW4gb2JqZWN0IHdpdGggdGhlXG4gICAgICogc2FtZSB2YWx1ZXMgYXMgYG9iamVjdGAgYW5kIGtleXMgZ2VuZXJhdGVkIGJ5IHJ1bm5pbmcgZWFjaCBvd24gZW51bWVyYWJsZVxuICAgICAqIHByb3BlcnR5IG9mIGBvYmplY3RgIHRocm91Z2ggYGl0ZXJhdGVlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2l0ZXJhdGVlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkXG4gICAgICogIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBpdGVyYXRlZWAuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbmV3IG1hcHBlZCBvYmplY3QuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ubWFwS2V5cyh7ICdhJzogMSwgJ2InOiAyIH0sIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgKiAgIHJldHVybiBrZXkgKyB2YWx1ZTtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiB7ICdhMSc6IDEsICdiMic6IDIgfVxuICAgICAqL1xuICAgIHZhciBtYXBLZXlzID0gY3JlYXRlT2JqZWN0TWFwcGVyKHRydWUpO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBvYmplY3Qgd2l0aCB0aGUgc2FtZSBrZXlzIGFzIGBvYmplY3RgIGFuZCB2YWx1ZXMgZ2VuZXJhdGVkIGJ5XG4gICAgICogcnVubmluZyBlYWNoIG93biBlbnVtZXJhYmxlIHByb3BlcnR5IG9mIGBvYmplY3RgIHRocm91Z2ggYGl0ZXJhdGVlYC4gVGhlXG4gICAgICogaXRlcmF0ZWUgZnVuY3Rpb24gaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdGhyZWUgYXJndW1lbnRzOlxuICAgICAqICh2YWx1ZSwga2V5LCBvYmplY3QpLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgaXRlcmF0ZWVgIHRoZSBjcmVhdGVkIGBfLnByb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYSB2YWx1ZSBpcyBhbHNvIHByb3ZpZGVkIGZvciBgdGhpc0FyZ2AgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc1Byb3BlcnR5YFxuICAgICAqIHN0eWxlIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgYSBtYXRjaGluZyBwcm9wZXJ0eVxuICAgICAqIHZhbHVlLCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBpdGVyYXRlZWAgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc2Agc3R5bGVcbiAgICAgKiBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlblxuICAgICAqIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbaXRlcmF0ZWU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWRcbiAgICAgKiAgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGl0ZXJhdGVlYC5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBuZXcgbWFwcGVkIG9iamVjdC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5tYXBWYWx1ZXMoeyAnYSc6IDEsICdiJzogMiB9LCBmdW5jdGlvbihuKSB7XG4gICAgICogICByZXR1cm4gbiAqIDM7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4geyAnYSc6IDMsICdiJzogNiB9XG4gICAgICpcbiAgICAgKiB2YXIgdXNlcnMgPSB7XG4gICAgICogICAnZnJlZCc6ICAgIHsgJ3VzZXInOiAnZnJlZCcsICAgICdhZ2UnOiA0MCB9LFxuICAgICAqICAgJ3BlYmJsZXMnOiB7ICd1c2VyJzogJ3BlYmJsZXMnLCAnYWdlJzogMSB9XG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5wcm9wZXJ0eWAgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5tYXBWYWx1ZXModXNlcnMsICdhZ2UnKTtcbiAgICAgKiAvLyA9PiB7ICdmcmVkJzogNDAsICdwZWJibGVzJzogMSB9IChpdGVyYXRpb24gb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQpXG4gICAgICovXG4gICAgdmFyIG1hcFZhbHVlcyA9IGNyZWF0ZU9iamVjdE1hcHBlcigpO1xuXG4gICAgLyoqXG4gICAgICogVGhlIG9wcG9zaXRlIG9mIGBfLnBpY2tgOyB0aGlzIG1ldGhvZCBjcmVhdGVzIGFuIG9iamVjdCBjb21wb3NlZCBvZiB0aGVcbiAgICAgKiBvd24gYW5kIGluaGVyaXRlZCBlbnVtZXJhYmxlIHByb3BlcnRpZXMgb2YgYG9iamVjdGAgdGhhdCBhcmUgbm90IG9taXR0ZWQuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgc291cmNlIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufC4uLihzdHJpbmd8c3RyaW5nW10pfSBbcHJlZGljYXRlXSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXJcbiAgICAgKiAgaXRlcmF0aW9uIG9yIHByb3BlcnR5IG5hbWVzIHRvIG9taXQsIHNwZWNpZmllZCBhcyBpbmRpdmlkdWFsIHByb3BlcnR5XG4gICAgICogIG5hbWVzIG9yIGFycmF5cyBvZiBwcm9wZXJ0eSBuYW1lcy5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYHByZWRpY2F0ZWAuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbmV3IG9iamVjdC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIG9iamVjdCA9IHsgJ3VzZXInOiAnZnJlZCcsICdhZ2UnOiA0MCB9O1xuICAgICAqXG4gICAgICogXy5vbWl0KG9iamVjdCwgJ2FnZScpO1xuICAgICAqIC8vID0+IHsgJ3VzZXInOiAnZnJlZCcgfVxuICAgICAqXG4gICAgICogXy5vbWl0KG9iamVjdCwgXy5pc051bWJlcik7XG4gICAgICogLy8gPT4geyAndXNlcic6ICdmcmVkJyB9XG4gICAgICovXG4gICAgdmFyIG9taXQgPSByZXN0UGFyYW0oZnVuY3Rpb24ob2JqZWN0LCBwcm9wcykge1xuICAgICAgaWYgKG9iamVjdCA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiB7fTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgcHJvcHNbMF0gIT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB2YXIgcHJvcHMgPSBhcnJheU1hcChiYXNlRmxhdHRlbihwcm9wcyksIFN0cmluZyk7XG4gICAgICAgIHJldHVybiBwaWNrQnlBcnJheShvYmplY3QsIGJhc2VEaWZmZXJlbmNlKGtleXNJbihvYmplY3QpLCBwcm9wcykpO1xuICAgICAgfVxuICAgICAgdmFyIHByZWRpY2F0ZSA9IGJpbmRDYWxsYmFjayhwcm9wc1swXSwgcHJvcHNbMV0sIDMpO1xuICAgICAgcmV0dXJuIHBpY2tCeUNhbGxiYWNrKG9iamVjdCwgZnVuY3Rpb24odmFsdWUsIGtleSwgb2JqZWN0KSB7XG4gICAgICAgIHJldHVybiAhcHJlZGljYXRlKHZhbHVlLCBrZXksIG9iamVjdCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSB0d28gZGltZW5zaW9uYWwgYXJyYXkgb2YgdGhlIGtleS12YWx1ZSBwYWlycyBmb3IgYG9iamVjdGAsXG4gICAgICogZS5nLiBgW1trZXkxLCB2YWx1ZTFdLCBba2V5MiwgdmFsdWUyXV1gLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBhcnJheSBvZiBrZXktdmFsdWUgcGFpcnMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ucGFpcnMoeyAnYmFybmV5JzogMzYsICdmcmVkJzogNDAgfSk7XG4gICAgICogLy8gPT4gW1snYmFybmV5JywgMzZdLCBbJ2ZyZWQnLCA0MF1dIChpdGVyYXRpb24gb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQpXG4gICAgICovXG4gICAgZnVuY3Rpb24gcGFpcnMob2JqZWN0KSB7XG4gICAgICBvYmplY3QgPSB0b09iamVjdChvYmplY3QpO1xuXG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBwcm9wcyA9IGtleXMob2JqZWN0KSxcbiAgICAgICAgICBsZW5ndGggPSBwcm9wcy5sZW5ndGgsXG4gICAgICAgICAgcmVzdWx0ID0gQXJyYXkobGVuZ3RoKTtcblxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgdmFyIGtleSA9IHByb3BzW2luZGV4XTtcbiAgICAgICAgcmVzdWx0W2luZGV4XSA9IFtrZXksIG9iamVjdFtrZXldXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBvYmplY3QgY29tcG9zZWQgb2YgdGhlIHBpY2tlZCBgb2JqZWN0YCBwcm9wZXJ0aWVzLiBQcm9wZXJ0eVxuICAgICAqIG5hbWVzIG1heSBiZSBzcGVjaWZpZWQgYXMgaW5kaXZpZHVhbCBhcmd1bWVudHMgb3IgYXMgYXJyYXlzIG9mIHByb3BlcnR5XG4gICAgICogbmFtZXMuIElmIGBwcmVkaWNhdGVgIGlzIHByb3ZpZGVkIGl0IGlzIGludm9rZWQgZm9yIGVhY2ggcHJvcGVydHkgb2YgYG9iamVjdGBcbiAgICAgKiBwaWNraW5nIHRoZSBwcm9wZXJ0aWVzIGBwcmVkaWNhdGVgIHJldHVybnMgdHJ1dGh5IGZvci4gVGhlIHByZWRpY2F0ZSBpc1xuICAgICAqIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50czogKHZhbHVlLCBrZXksIG9iamVjdCkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgc291cmNlIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufC4uLihzdHJpbmd8c3RyaW5nW10pfSBbcHJlZGljYXRlXSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXJcbiAgICAgKiAgaXRlcmF0aW9uIG9yIHByb3BlcnR5IG5hbWVzIHRvIHBpY2ssIHNwZWNpZmllZCBhcyBpbmRpdmlkdWFsIHByb3BlcnR5XG4gICAgICogIG5hbWVzIG9yIGFycmF5cyBvZiBwcm9wZXJ0eSBuYW1lcy5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYHByZWRpY2F0ZWAuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbmV3IG9iamVjdC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIG9iamVjdCA9IHsgJ3VzZXInOiAnZnJlZCcsICdhZ2UnOiA0MCB9O1xuICAgICAqXG4gICAgICogXy5waWNrKG9iamVjdCwgJ3VzZXInKTtcbiAgICAgKiAvLyA9PiB7ICd1c2VyJzogJ2ZyZWQnIH1cbiAgICAgKlxuICAgICAqIF8ucGljayhvYmplY3QsIF8uaXNTdHJpbmcpO1xuICAgICAqIC8vID0+IHsgJ3VzZXInOiAnZnJlZCcgfVxuICAgICAqL1xuICAgIHZhciBwaWNrID0gcmVzdFBhcmFtKGZ1bmN0aW9uKG9iamVjdCwgcHJvcHMpIHtcbiAgICAgIGlmIChvYmplY3QgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4ge307XG4gICAgICB9XG4gICAgICByZXR1cm4gdHlwZW9mIHByb3BzWzBdID09ICdmdW5jdGlvbidcbiAgICAgICAgPyBwaWNrQnlDYWxsYmFjayhvYmplY3QsIGJpbmRDYWxsYmFjayhwcm9wc1swXSwgcHJvcHNbMV0sIDMpKVxuICAgICAgICA6IHBpY2tCeUFycmF5KG9iamVjdCwgYmFzZUZsYXR0ZW4ocHJvcHMpKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uZ2V0YCBleGNlcHQgdGhhdCBpZiB0aGUgcmVzb2x2ZWQgdmFsdWUgaXMgYSBmdW5jdGlvblxuICAgICAqIGl0IGlzIGludm9rZWQgd2l0aCB0aGUgYHRoaXNgIGJpbmRpbmcgb2YgaXRzIHBhcmVudCBvYmplY3QgYW5kIGl0cyByZXN1bHRcbiAgICAgKiBpcyByZXR1cm5lZC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gICAgICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIHJlc29sdmUuXG4gICAgICogQHBhcmFtIHsqfSBbZGVmYXVsdFZhbHVlXSBUaGUgdmFsdWUgcmV0dXJuZWQgaWYgdGhlIHJlc29sdmVkIHZhbHVlIGlzIGB1bmRlZmluZWRgLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSByZXNvbHZlZCB2YWx1ZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIG9iamVjdCA9IHsgJ2EnOiBbeyAnYic6IHsgJ2MxJzogMywgJ2MyJzogXy5jb25zdGFudCg0KSB9IH1dIH07XG4gICAgICpcbiAgICAgKiBfLnJlc3VsdChvYmplY3QsICdhWzBdLmIuYzEnKTtcbiAgICAgKiAvLyA9PiAzXG4gICAgICpcbiAgICAgKiBfLnJlc3VsdChvYmplY3QsICdhWzBdLmIuYzInKTtcbiAgICAgKiAvLyA9PiA0XG4gICAgICpcbiAgICAgKiBfLnJlc3VsdChvYmplY3QsICdhLmIuYycsICdkZWZhdWx0Jyk7XG4gICAgICogLy8gPT4gJ2RlZmF1bHQnXG4gICAgICpcbiAgICAgKiBfLnJlc3VsdChvYmplY3QsICdhLmIuYycsIF8uY29uc3RhbnQoJ2RlZmF1bHQnKSk7XG4gICAgICogLy8gPT4gJ2RlZmF1bHQnXG4gICAgICovXG4gICAgZnVuY3Rpb24gcmVzdWx0KG9iamVjdCwgcGF0aCwgZGVmYXVsdFZhbHVlKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBvYmplY3RbcGF0aF07XG4gICAgICBpZiAocmVzdWx0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKG9iamVjdCAhPSBudWxsICYmICFpc0tleShwYXRoLCBvYmplY3QpKSB7XG4gICAgICAgICAgcGF0aCA9IHRvUGF0aChwYXRoKTtcbiAgICAgICAgICBvYmplY3QgPSBwYXRoLmxlbmd0aCA9PSAxID8gb2JqZWN0IDogYmFzZUdldChvYmplY3QsIGJhc2VTbGljZShwYXRoLCAwLCAtMSkpO1xuICAgICAgICAgIHJlc3VsdCA9IG9iamVjdCA9PSBudWxsID8gdW5kZWZpbmVkIDogb2JqZWN0W2xhc3QocGF0aCldO1xuICAgICAgICB9XG4gICAgICAgIHJlc3VsdCA9IHJlc3VsdCA9PT0gdW5kZWZpbmVkID8gZGVmYXVsdFZhbHVlIDogcmVzdWx0O1xuICAgICAgfVxuICAgICAgcmV0dXJuIGlzRnVuY3Rpb24ocmVzdWx0KSA/IHJlc3VsdC5jYWxsKG9iamVjdCkgOiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgcHJvcGVydHkgdmFsdWUgb2YgYHBhdGhgIG9uIGBvYmplY3RgLiBJZiBhIHBvcnRpb24gb2YgYHBhdGhgXG4gICAgICogZG9lcyBub3QgZXhpc3QgaXQgaXMgY3JlYXRlZC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gYXVnbWVudC5cbiAgICAgKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gc2V0LlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldC5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0ID0geyAnYSc6IFt7ICdiJzogeyAnYyc6IDMgfSB9XSB9O1xuICAgICAqXG4gICAgICogXy5zZXQob2JqZWN0LCAnYVswXS5iLmMnLCA0KTtcbiAgICAgKiBjb25zb2xlLmxvZyhvYmplY3QuYVswXS5iLmMpO1xuICAgICAqIC8vID0+IDRcbiAgICAgKlxuICAgICAqIF8uc2V0KG9iamVjdCwgJ3hbMF0ueS56JywgNSk7XG4gICAgICogY29uc29sZS5sb2cob2JqZWN0LnhbMF0ueS56KTtcbiAgICAgKiAvLyA9PiA1XG4gICAgICovXG4gICAgZnVuY3Rpb24gc2V0KG9iamVjdCwgcGF0aCwgdmFsdWUpIHtcbiAgICAgIGlmIChvYmplY3QgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgfVxuICAgICAgdmFyIHBhdGhLZXkgPSAocGF0aCArICcnKTtcbiAgICAgIHBhdGggPSAob2JqZWN0W3BhdGhLZXldICE9IG51bGwgfHwgaXNLZXkocGF0aCwgb2JqZWN0KSkgPyBbcGF0aEtleV0gOiB0b1BhdGgocGF0aCk7XG5cbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IHBhdGgubGVuZ3RoLFxuICAgICAgICAgIGxhc3RJbmRleCA9IGxlbmd0aCAtIDEsXG4gICAgICAgICAgbmVzdGVkID0gb2JqZWN0O1xuXG4gICAgICB3aGlsZSAobmVzdGVkICE9IG51bGwgJiYgKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICB2YXIga2V5ID0gcGF0aFtpbmRleF07XG4gICAgICAgIGlmIChpc09iamVjdChuZXN0ZWQpKSB7XG4gICAgICAgICAgaWYgKGluZGV4ID09IGxhc3RJbmRleCkge1xuICAgICAgICAgICAgbmVzdGVkW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICB9IGVsc2UgaWYgKG5lc3RlZFtrZXldID09IG51bGwpIHtcbiAgICAgICAgICAgIG5lc3RlZFtrZXldID0gaXNJbmRleChwYXRoW2luZGV4ICsgMV0pID8gW10gOiB7fTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbmVzdGVkID0gbmVzdGVkW2tleV07XG4gICAgICB9XG4gICAgICByZXR1cm4gb2JqZWN0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFuIGFsdGVybmF0aXZlIHRvIGBfLnJlZHVjZWA7IHRoaXMgbWV0aG9kIHRyYW5zZm9ybXMgYG9iamVjdGAgdG8gYSBuZXdcbiAgICAgKiBgYWNjdW11bGF0b3JgIG9iamVjdCB3aGljaCBpcyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgZWFjaCBvZiBpdHMgb3duIGVudW1lcmFibGVcbiAgICAgKiBwcm9wZXJ0aWVzIHRocm91Z2ggYGl0ZXJhdGVlYCwgd2l0aCBlYWNoIGludm9jYXRpb24gcG90ZW50aWFsbHkgbXV0YXRpbmdcbiAgICAgKiB0aGUgYGFjY3VtdWxhdG9yYCBvYmplY3QuIFRoZSBgaXRlcmF0ZWVgIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZFxuICAgICAqIHdpdGggZm91ciBhcmd1bWVudHM6IChhY2N1bXVsYXRvciwgdmFsdWUsIGtleSwgb2JqZWN0KS4gSXRlcmF0ZWUgZnVuY3Rpb25zXG4gICAgICogbWF5IGV4aXQgaXRlcmF0aW9uIGVhcmx5IGJ5IGV4cGxpY2l0bHkgcmV0dXJuaW5nIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbaXRlcmF0ZWU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFthY2N1bXVsYXRvcl0gVGhlIGN1c3RvbSBhY2N1bXVsYXRvciB2YWx1ZS5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGl0ZXJhdGVlYC5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgYWNjdW11bGF0ZWQgdmFsdWUuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8udHJhbnNmb3JtKFsyLCAzLCA0XSwgZnVuY3Rpb24ocmVzdWx0LCBuKSB7XG4gICAgICogICByZXN1bHQucHVzaChuICo9IG4pO1xuICAgICAqICAgcmV0dXJuIG4gJSAyID09IDA7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gWzQsIDldXG4gICAgICpcbiAgICAgKiBfLnRyYW5zZm9ybSh7ICdhJzogMSwgJ2InOiAyIH0sIGZ1bmN0aW9uKHJlc3VsdCwgbiwga2V5KSB7XG4gICAgICogICByZXN1bHRba2V5XSA9IG4gKiAzO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IHsgJ2EnOiAzLCAnYic6IDYgfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHRyYW5zZm9ybShvYmplY3QsIGl0ZXJhdGVlLCBhY2N1bXVsYXRvciwgdGhpc0FyZykge1xuICAgICAgdmFyIGlzQXJyID0gaXNBcnJheShvYmplY3QpIHx8IGlzVHlwZWRBcnJheShvYmplY3QpO1xuICAgICAgaXRlcmF0ZWUgPSBnZXRDYWxsYmFjayhpdGVyYXRlZSwgdGhpc0FyZywgNCk7XG5cbiAgICAgIGlmIChhY2N1bXVsYXRvciA9PSBudWxsKSB7XG4gICAgICAgIGlmIChpc0FyciB8fCBpc09iamVjdChvYmplY3QpKSB7XG4gICAgICAgICAgdmFyIEN0b3IgPSBvYmplY3QuY29uc3RydWN0b3I7XG4gICAgICAgICAgaWYgKGlzQXJyKSB7XG4gICAgICAgICAgICBhY2N1bXVsYXRvciA9IGlzQXJyYXkob2JqZWN0KSA/IG5ldyBDdG9yIDogW107XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFjY3VtdWxhdG9yID0gYmFzZUNyZWF0ZShpc0Z1bmN0aW9uKEN0b3IpID8gQ3Rvci5wcm90b3R5cGUgOiB1bmRlZmluZWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhY2N1bXVsYXRvciA9IHt9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAoaXNBcnIgPyBhcnJheUVhY2ggOiBiYXNlRm9yT3duKShvYmplY3QsIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgb2JqZWN0KSB7XG4gICAgICAgIHJldHVybiBpdGVyYXRlZShhY2N1bXVsYXRvciwgdmFsdWUsIGluZGV4LCBvYmplY3QpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gYWNjdW11bGF0b3I7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhcnJheSBvZiB0aGUgb3duIGVudW1lcmFibGUgcHJvcGVydHkgdmFsdWVzIG9mIGBvYmplY3RgLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIE5vbi1vYmplY3QgdmFsdWVzIGFyZSBjb2VyY2VkIHRvIG9iamVjdHMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgdmFsdWVzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBmdW5jdGlvbiBGb28oKSB7XG4gICAgICogICB0aGlzLmEgPSAxO1xuICAgICAqICAgdGhpcy5iID0gMjtcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBGb28ucHJvdG90eXBlLmMgPSAzO1xuICAgICAqXG4gICAgICogXy52YWx1ZXMobmV3IEZvbyk7XG4gICAgICogLy8gPT4gWzEsIDJdIChpdGVyYXRpb24gb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQpXG4gICAgICpcbiAgICAgKiBfLnZhbHVlcygnaGknKTtcbiAgICAgKiAvLyA9PiBbJ2gnLCAnaSddXG4gICAgICovXG4gICAgZnVuY3Rpb24gdmFsdWVzKG9iamVjdCkge1xuICAgICAgcmV0dXJuIGJhc2VWYWx1ZXMob2JqZWN0LCBrZXlzKG9iamVjdCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgdGhlIG93biBhbmQgaW5oZXJpdGVkIGVudW1lcmFibGUgcHJvcGVydHkgdmFsdWVzXG4gICAgICogb2YgYG9iamVjdGAuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogTm9uLW9iamVjdCB2YWx1ZXMgYXJlIGNvZXJjZWQgdG8gb2JqZWN0cy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSB2YWx1ZXMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGZ1bmN0aW9uIEZvbygpIHtcbiAgICAgKiAgIHRoaXMuYSA9IDE7XG4gICAgICogICB0aGlzLmIgPSAyO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIEZvby5wcm90b3R5cGUuYyA9IDM7XG4gICAgICpcbiAgICAgKiBfLnZhbHVlc0luKG5ldyBGb28pO1xuICAgICAqIC8vID0+IFsxLCAyLCAzXSAoaXRlcmF0aW9uIG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkKVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHZhbHVlc0luKG9iamVjdCkge1xuICAgICAgcmV0dXJuIGJhc2VWYWx1ZXMob2JqZWN0LCBrZXlzSW4ob2JqZWN0KSk7XG4gICAgfVxuXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGBuYCBpcyBiZXR3ZWVuIGBzdGFydGAgYW5kIHVwIHRvIGJ1dCBub3QgaW5jbHVkaW5nLCBgZW5kYC4gSWZcbiAgICAgKiBgZW5kYCBpcyBub3Qgc3BlY2lmaWVkIGl0IGlzIHNldCB0byBgc3RhcnRgIHdpdGggYHN0YXJ0YCB0aGVuIHNldCB0byBgMGAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgTnVtYmVyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG4gVGhlIG51bWJlciB0byBjaGVjay5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3N0YXJ0PTBdIFRoZSBzdGFydCBvZiB0aGUgcmFuZ2UuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGVuZCBUaGUgZW5kIG9mIHRoZSByYW5nZS5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYG5gIGlzIGluIHRoZSByYW5nZSwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmluUmFuZ2UoMywgMiwgNCk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pblJhbmdlKDQsIDgpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaW5SYW5nZSg0LCAyKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqXG4gICAgICogXy5pblJhbmdlKDIsIDIpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICpcbiAgICAgKiBfLmluUmFuZ2UoMS4yLCAyKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmluUmFuZ2UoNS4yLCA0KTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGluUmFuZ2UodmFsdWUsIHN0YXJ0LCBlbmQpIHtcbiAgICAgIHN0YXJ0ID0gK3N0YXJ0IHx8IDA7XG4gICAgICBpZiAoZW5kID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZW5kID0gc3RhcnQ7XG4gICAgICAgIHN0YXJ0ID0gMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVuZCA9ICtlbmQgfHwgMDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZSA+PSBuYXRpdmVNaW4oc3RhcnQsIGVuZCkgJiYgdmFsdWUgPCBuYXRpdmVNYXgoc3RhcnQsIGVuZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUHJvZHVjZXMgYSByYW5kb20gbnVtYmVyIGJldHdlZW4gYG1pbmAgYW5kIGBtYXhgIChpbmNsdXNpdmUpLiBJZiBvbmx5IG9uZVxuICAgICAqIGFyZ3VtZW50IGlzIHByb3ZpZGVkIGEgbnVtYmVyIGJldHdlZW4gYDBgIGFuZCB0aGUgZ2l2ZW4gbnVtYmVyIGlzIHJldHVybmVkLlxuICAgICAqIElmIGBmbG9hdGluZ2AgaXMgYHRydWVgLCBvciBlaXRoZXIgYG1pbmAgb3IgYG1heGAgYXJlIGZsb2F0cywgYSBmbG9hdGluZy1wb2ludFxuICAgICAqIG51bWJlciBpcyByZXR1cm5lZCBpbnN0ZWFkIG9mIGFuIGludGVnZXIuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgTnVtYmVyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFttaW49MF0gVGhlIG1pbmltdW0gcG9zc2libGUgdmFsdWUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFttYXg9MV0gVGhlIG1heGltdW0gcG9zc2libGUgdmFsdWUuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbZmxvYXRpbmddIFNwZWNpZnkgcmV0dXJuaW5nIGEgZmxvYXRpbmctcG9pbnQgbnVtYmVyLlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHJhbmRvbSBudW1iZXIuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ucmFuZG9tKDAsIDUpO1xuICAgICAqIC8vID0+IGFuIGludGVnZXIgYmV0d2VlbiAwIGFuZCA1XG4gICAgICpcbiAgICAgKiBfLnJhbmRvbSg1KTtcbiAgICAgKiAvLyA9PiBhbHNvIGFuIGludGVnZXIgYmV0d2VlbiAwIGFuZCA1XG4gICAgICpcbiAgICAgKiBfLnJhbmRvbSg1LCB0cnVlKTtcbiAgICAgKiAvLyA9PiBhIGZsb2F0aW5nLXBvaW50IG51bWJlciBiZXR3ZWVuIDAgYW5kIDVcbiAgICAgKlxuICAgICAqIF8ucmFuZG9tKDEuMiwgNS4yKTtcbiAgICAgKiAvLyA9PiBhIGZsb2F0aW5nLXBvaW50IG51bWJlciBiZXR3ZWVuIDEuMiBhbmQgNS4yXG4gICAgICovXG4gICAgZnVuY3Rpb24gcmFuZG9tKG1pbiwgbWF4LCBmbG9hdGluZykge1xuICAgICAgaWYgKGZsb2F0aW5nICYmIGlzSXRlcmF0ZWVDYWxsKG1pbiwgbWF4LCBmbG9hdGluZykpIHtcbiAgICAgICAgbWF4ID0gZmxvYXRpbmcgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICB2YXIgbm9NaW4gPSBtaW4gPT0gbnVsbCxcbiAgICAgICAgICBub01heCA9IG1heCA9PSBudWxsO1xuXG4gICAgICBpZiAoZmxvYXRpbmcgPT0gbnVsbCkge1xuICAgICAgICBpZiAobm9NYXggJiYgdHlwZW9mIG1pbiA9PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICBmbG9hdGluZyA9IG1pbjtcbiAgICAgICAgICBtaW4gPSAxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBtYXggPT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgZmxvYXRpbmcgPSBtYXg7XG4gICAgICAgICAgbm9NYXggPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAobm9NaW4gJiYgbm9NYXgpIHtcbiAgICAgICAgbWF4ID0gMTtcbiAgICAgICAgbm9NYXggPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIG1pbiA9ICttaW4gfHwgMDtcbiAgICAgIGlmIChub01heCkge1xuICAgICAgICBtYXggPSBtaW47XG4gICAgICAgIG1pbiA9IDA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtYXggPSArbWF4IHx8IDA7XG4gICAgICB9XG4gICAgICBpZiAoZmxvYXRpbmcgfHwgbWluICUgMSB8fCBtYXggJSAxKSB7XG4gICAgICAgIHZhciByYW5kID0gbmF0aXZlUmFuZG9tKCk7XG4gICAgICAgIHJldHVybiBuYXRpdmVNaW4obWluICsgKHJhbmQgKiAobWF4IC0gbWluICsgcGFyc2VGbG9hdCgnMWUtJyArICgocmFuZCArICcnKS5sZW5ndGggLSAxKSkpKSwgbWF4KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBiYXNlUmFuZG9tKG1pbiwgbWF4KTtcbiAgICB9XG5cbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBgc3RyaW5nYCB0byBbY2FtZWwgY2FzZV0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ2FtZWxDYXNlKS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZz0nJ10gVGhlIHN0cmluZyB0byBjb252ZXJ0LlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGNhbWVsIGNhc2VkIHN0cmluZy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5jYW1lbENhc2UoJ0ZvbyBCYXInKTtcbiAgICAgKiAvLyA9PiAnZm9vQmFyJ1xuICAgICAqXG4gICAgICogXy5jYW1lbENhc2UoJy0tZm9vLWJhcicpO1xuICAgICAqIC8vID0+ICdmb29CYXInXG4gICAgICpcbiAgICAgKiBfLmNhbWVsQ2FzZSgnX19mb29fYmFyX18nKTtcbiAgICAgKiAvLyA9PiAnZm9vQmFyJ1xuICAgICAqL1xuICAgIHZhciBjYW1lbENhc2UgPSBjcmVhdGVDb21wb3VuZGVyKGZ1bmN0aW9uKHJlc3VsdCwgd29yZCwgaW5kZXgpIHtcbiAgICAgIHdvcmQgPSB3b3JkLnRvTG93ZXJDYXNlKCk7XG4gICAgICByZXR1cm4gcmVzdWx0ICsgKGluZGV4ID8gKHdvcmQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB3b3JkLnNsaWNlKDEpKSA6IHdvcmQpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ2FwaXRhbGl6ZXMgdGhlIGZpcnN0IGNoYXJhY3RlciBvZiBgc3RyaW5nYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZz0nJ10gVGhlIHN0cmluZyB0byBjYXBpdGFsaXplLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGNhcGl0YWxpemVkIHN0cmluZy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5jYXBpdGFsaXplKCdmcmVkJyk7XG4gICAgICogLy8gPT4gJ0ZyZWQnXG4gICAgICovXG4gICAgZnVuY3Rpb24gY2FwaXRhbGl6ZShzdHJpbmcpIHtcbiAgICAgIHN0cmluZyA9IGJhc2VUb1N0cmluZyhzdHJpbmcpO1xuICAgICAgcmV0dXJuIHN0cmluZyAmJiAoc3RyaW5nLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyaW5nLnNsaWNlKDEpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZWJ1cnJzIGBzdHJpbmdgIGJ5IGNvbnZlcnRpbmcgW2xhdGluLTEgc3VwcGxlbWVudGFyeSBsZXR0ZXJzXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9MYXRpbi0xX1N1cHBsZW1lbnRfKFVuaWNvZGVfYmxvY2spI0NoYXJhY3Rlcl90YWJsZSlcbiAgICAgKiB0byBiYXNpYyBsYXRpbiBsZXR0ZXJzIGFuZCByZW1vdmluZyBbY29tYmluaW5nIGRpYWNyaXRpY2FsIG1hcmtzXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Db21iaW5pbmdfRGlhY3JpdGljYWxfTWFya3MpLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbc3RyaW5nPScnXSBUaGUgc3RyaW5nIHRvIGRlYnVyci5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBkZWJ1cnJlZCBzdHJpbmcuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uZGVidXJyKCdkw6lqw6AgdnUnKTtcbiAgICAgKiAvLyA9PiAnZGVqYSB2dSdcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBkZWJ1cnIoc3RyaW5nKSB7XG4gICAgICBzdHJpbmcgPSBiYXNlVG9TdHJpbmcoc3RyaW5nKTtcbiAgICAgIHJldHVybiBzdHJpbmcgJiYgc3RyaW5nLnJlcGxhY2UocmVMYXRpbjEsIGRlYnVyckxldHRlcikucmVwbGFjZShyZUNvbWJvTWFyaywgJycpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgc3RyaW5nYCBlbmRzIHdpdGggdGhlIGdpdmVuIHRhcmdldCBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgU3RyaW5nXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtzdHJpbmc9JyddIFRoZSBzdHJpbmcgdG8gc2VhcmNoLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbdGFyZ2V0XSBUaGUgc3RyaW5nIHRvIHNlYXJjaCBmb3IuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtwb3NpdGlvbj1zdHJpbmcubGVuZ3RoXSBUaGUgcG9zaXRpb24gdG8gc2VhcmNoIGZyb20uXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBzdHJpbmdgIGVuZHMgd2l0aCBgdGFyZ2V0YCwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmVuZHNXaXRoKCdhYmMnLCAnYycpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uZW5kc1dpdGgoJ2FiYycsICdiJyk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKlxuICAgICAqIF8uZW5kc1dpdGgoJ2FiYycsICdiJywgMik7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGVuZHNXaXRoKHN0cmluZywgdGFyZ2V0LCBwb3NpdGlvbikge1xuICAgICAgc3RyaW5nID0gYmFzZVRvU3RyaW5nKHN0cmluZyk7XG4gICAgICB0YXJnZXQgPSAodGFyZ2V0ICsgJycpO1xuXG4gICAgICB2YXIgbGVuZ3RoID0gc3RyaW5nLmxlbmd0aDtcbiAgICAgIHBvc2l0aW9uID0gcG9zaXRpb24gPT09IHVuZGVmaW5lZFxuICAgICAgICA/IGxlbmd0aFxuICAgICAgICA6IG5hdGl2ZU1pbihwb3NpdGlvbiA8IDAgPyAwIDogKCtwb3NpdGlvbiB8fCAwKSwgbGVuZ3RoKTtcblxuICAgICAgcG9zaXRpb24gLT0gdGFyZ2V0Lmxlbmd0aDtcbiAgICAgIHJldHVybiBwb3NpdGlvbiA+PSAwICYmIHN0cmluZy5pbmRleE9mKHRhcmdldCwgcG9zaXRpb24pID09IHBvc2l0aW9uO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoZSBjaGFyYWN0ZXJzIFwiJlwiLCBcIjxcIiwgXCI+XCIsICdcIicsIFwiJ1wiLCBhbmQgXCJcXGBcIiwgaW4gYHN0cmluZ2AgdG9cbiAgICAgKiB0aGVpciBjb3JyZXNwb25kaW5nIEhUTUwgZW50aXRpZXMuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogTm8gb3RoZXIgY2hhcmFjdGVycyBhcmUgZXNjYXBlZC4gVG8gZXNjYXBlIGFkZGl0aW9uYWwgY2hhcmFjdGVyc1xuICAgICAqIHVzZSBhIHRoaXJkLXBhcnR5IGxpYnJhcnkgbGlrZSBbX2hlX10oaHR0cHM6Ly9tdGhzLmJlL2hlKS5cbiAgICAgKlxuICAgICAqIFRob3VnaCB0aGUgXCI+XCIgY2hhcmFjdGVyIGlzIGVzY2FwZWQgZm9yIHN5bW1ldHJ5LCBjaGFyYWN0ZXJzIGxpa2VcbiAgICAgKiBcIj5cIiBhbmQgXCIvXCIgZG9uJ3QgbmVlZCBlc2NhcGluZyBpbiBIVE1MIGFuZCBoYXZlIG5vIHNwZWNpYWwgbWVhbmluZ1xuICAgICAqIHVubGVzcyB0aGV5J3JlIHBhcnQgb2YgYSB0YWcgb3IgdW5xdW90ZWQgYXR0cmlidXRlIHZhbHVlLlxuICAgICAqIFNlZSBbTWF0aGlhcyBCeW5lbnMncyBhcnRpY2xlXShodHRwczovL21hdGhpYXNieW5lbnMuYmUvbm90ZXMvYW1iaWd1b3VzLWFtcGVyc2FuZHMpXG4gICAgICogKHVuZGVyIFwic2VtaS1yZWxhdGVkIGZ1biBmYWN0XCIpIGZvciBtb3JlIGRldGFpbHMuXG4gICAgICpcbiAgICAgKiBCYWNrdGlja3MgYXJlIGVzY2FwZWQgYmVjYXVzZSBpbiBJbnRlcm5ldCBFeHBsb3JlciA8IDksIHRoZXkgY2FuIGJyZWFrIG91dFxuICAgICAqIG9mIGF0dHJpYnV0ZSB2YWx1ZXMgb3IgSFRNTCBjb21tZW50cy4gU2VlIFsjNTldKGh0dHBzOi8vaHRtbDVzZWMub3JnLyM1OSksXG4gICAgICogWyMxMDJdKGh0dHBzOi8vaHRtbDVzZWMub3JnLyMxMDIpLCBbIzEwOF0oaHR0cHM6Ly9odG1sNXNlYy5vcmcvIzEwOCksIGFuZFxuICAgICAqIFsjMTMzXShodHRwczovL2h0bWw1c2VjLm9yZy8jMTMzKSBvZiB0aGUgW0hUTUw1IFNlY3VyaXR5IENoZWF0c2hlZXRdKGh0dHBzOi8vaHRtbDVzZWMub3JnLylcbiAgICAgKiBmb3IgbW9yZSBkZXRhaWxzLlxuICAgICAqXG4gICAgICogV2hlbiB3b3JraW5nIHdpdGggSFRNTCB5b3Ugc2hvdWxkIGFsd2F5cyBbcXVvdGUgYXR0cmlidXRlIHZhbHVlc10oaHR0cDovL3dvbmtvLmNvbS9wb3N0L2h0bWwtZXNjYXBpbmcpXG4gICAgICogdG8gcmVkdWNlIFhTUyB2ZWN0b3JzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbc3RyaW5nPScnXSBUaGUgc3RyaW5nIHRvIGVzY2FwZS5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBlc2NhcGVkIHN0cmluZy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5lc2NhcGUoJ2ZyZWQsIGJhcm5leSwgJiBwZWJibGVzJyk7XG4gICAgICogLy8gPT4gJ2ZyZWQsIGJhcm5leSwgJmFtcDsgcGViYmxlcydcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBlc2NhcGUoc3RyaW5nKSB7XG4gICAgICAvLyBSZXNldCBgbGFzdEluZGV4YCBiZWNhdXNlIGluIElFIDwgOSBgU3RyaW5nI3JlcGxhY2VgIGRvZXMgbm90LlxuICAgICAgc3RyaW5nID0gYmFzZVRvU3RyaW5nKHN0cmluZyk7XG4gICAgICByZXR1cm4gKHN0cmluZyAmJiByZUhhc1VuZXNjYXBlZEh0bWwudGVzdChzdHJpbmcpKVxuICAgICAgICA/IHN0cmluZy5yZXBsYWNlKHJlVW5lc2NhcGVkSHRtbCwgZXNjYXBlSHRtbENoYXIpXG4gICAgICAgIDogc3RyaW5nO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVzY2FwZXMgdGhlIGBSZWdFeHBgIHNwZWNpYWwgY2hhcmFjdGVycyBcIlxcXCIsIFwiL1wiLCBcIl5cIiwgXCIkXCIsIFwiLlwiLCBcInxcIiwgXCI/XCIsXG4gICAgICogXCIqXCIsIFwiK1wiLCBcIihcIiwgXCIpXCIsIFwiW1wiLCBcIl1cIiwgXCJ7XCIgYW5kIFwifVwiIGluIGBzdHJpbmdgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbc3RyaW5nPScnXSBUaGUgc3RyaW5nIHRvIGVzY2FwZS5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBlc2NhcGVkIHN0cmluZy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5lc2NhcGVSZWdFeHAoJ1tsb2Rhc2hdKGh0dHBzOi8vbG9kYXNoLmNvbS8pJyk7XG4gICAgICogLy8gPT4gJ1xcW2xvZGFzaFxcXVxcKGh0dHBzOlxcL1xcL2xvZGFzaFxcLmNvbVxcL1xcKSdcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBlc2NhcGVSZWdFeHAoc3RyaW5nKSB7XG4gICAgICBzdHJpbmcgPSBiYXNlVG9TdHJpbmcoc3RyaW5nKTtcbiAgICAgIHJldHVybiAoc3RyaW5nICYmIHJlSGFzUmVnRXhwQ2hhcnMudGVzdChzdHJpbmcpKVxuICAgICAgICA/IHN0cmluZy5yZXBsYWNlKHJlUmVnRXhwQ2hhcnMsIGVzY2FwZVJlZ0V4cENoYXIpXG4gICAgICAgIDogKHN0cmluZyB8fCAnKD86KScpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGBzdHJpbmdgIHRvIFtrZWJhYiBjYXNlXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9MZXR0ZXJfY2FzZSNTcGVjaWFsX2Nhc2Vfc3R5bGVzKS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZz0nJ10gVGhlIHN0cmluZyB0byBjb252ZXJ0LlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGtlYmFiIGNhc2VkIHN0cmluZy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5rZWJhYkNhc2UoJ0ZvbyBCYXInKTtcbiAgICAgKiAvLyA9PiAnZm9vLWJhcidcbiAgICAgKlxuICAgICAqIF8ua2ViYWJDYXNlKCdmb29CYXInKTtcbiAgICAgKiAvLyA9PiAnZm9vLWJhcidcbiAgICAgKlxuICAgICAqIF8ua2ViYWJDYXNlKCdfX2Zvb19iYXJfXycpO1xuICAgICAqIC8vID0+ICdmb28tYmFyJ1xuICAgICAqL1xuICAgIHZhciBrZWJhYkNhc2UgPSBjcmVhdGVDb21wb3VuZGVyKGZ1bmN0aW9uKHJlc3VsdCwgd29yZCwgaW5kZXgpIHtcbiAgICAgIHJldHVybiByZXN1bHQgKyAoaW5kZXggPyAnLScgOiAnJykgKyB3b3JkLnRvTG93ZXJDYXNlKCk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBQYWRzIGBzdHJpbmdgIG9uIHRoZSBsZWZ0IGFuZCByaWdodCBzaWRlcyBpZiBpdCdzIHNob3J0ZXIgdGhhbiBgbGVuZ3RoYC5cbiAgICAgKiBQYWRkaW5nIGNoYXJhY3RlcnMgYXJlIHRydW5jYXRlZCBpZiB0aGV5IGNhbid0IGJlIGV2ZW5seSBkaXZpZGVkIGJ5IGBsZW5ndGhgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbc3RyaW5nPScnXSBUaGUgc3RyaW5nIHRvIHBhZC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aD0wXSBUaGUgcGFkZGluZyBsZW5ndGguXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtjaGFycz0nICddIFRoZSBzdHJpbmcgdXNlZCBhcyBwYWRkaW5nLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHBhZGRlZCBzdHJpbmcuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ucGFkKCdhYmMnLCA4KTtcbiAgICAgKiAvLyA9PiAnICBhYmMgICAnXG4gICAgICpcbiAgICAgKiBfLnBhZCgnYWJjJywgOCwgJ18tJyk7XG4gICAgICogLy8gPT4gJ18tYWJjXy1fJ1xuICAgICAqXG4gICAgICogXy5wYWQoJ2FiYycsIDMpO1xuICAgICAqIC8vID0+ICdhYmMnXG4gICAgICovXG4gICAgZnVuY3Rpb24gcGFkKHN0cmluZywgbGVuZ3RoLCBjaGFycykge1xuICAgICAgc3RyaW5nID0gYmFzZVRvU3RyaW5nKHN0cmluZyk7XG4gICAgICBsZW5ndGggPSArbGVuZ3RoO1xuXG4gICAgICB2YXIgc3RyTGVuZ3RoID0gc3RyaW5nLmxlbmd0aDtcbiAgICAgIGlmIChzdHJMZW5ndGggPj0gbGVuZ3RoIHx8ICFuYXRpdmVJc0Zpbml0ZShsZW5ndGgpKSB7XG4gICAgICAgIHJldHVybiBzdHJpbmc7XG4gICAgICB9XG4gICAgICB2YXIgbWlkID0gKGxlbmd0aCAtIHN0ckxlbmd0aCkgLyAyLFxuICAgICAgICAgIGxlZnRMZW5ndGggPSBuYXRpdmVGbG9vcihtaWQpLFxuICAgICAgICAgIHJpZ2h0TGVuZ3RoID0gbmF0aXZlQ2VpbChtaWQpO1xuXG4gICAgICBjaGFycyA9IGNyZWF0ZVBhZGRpbmcoJycsIHJpZ2h0TGVuZ3RoLCBjaGFycyk7XG4gICAgICByZXR1cm4gY2hhcnMuc2xpY2UoMCwgbGVmdExlbmd0aCkgKyBzdHJpbmcgKyBjaGFycztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQYWRzIGBzdHJpbmdgIG9uIHRoZSBsZWZ0IHNpZGUgaWYgaXQncyBzaG9ydGVyIHRoYW4gYGxlbmd0aGAuIFBhZGRpbmdcbiAgICAgKiBjaGFyYWN0ZXJzIGFyZSB0cnVuY2F0ZWQgaWYgdGhleSBleGNlZWQgYGxlbmd0aGAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgU3RyaW5nXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtzdHJpbmc9JyddIFRoZSBzdHJpbmcgdG8gcGFkLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoPTBdIFRoZSBwYWRkaW5nIGxlbmd0aC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2NoYXJzPScgJ10gVGhlIHN0cmluZyB1c2VkIGFzIHBhZGRpbmcuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgcGFkZGVkIHN0cmluZy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5wYWRMZWZ0KCdhYmMnLCA2KTtcbiAgICAgKiAvLyA9PiAnICAgYWJjJ1xuICAgICAqXG4gICAgICogXy5wYWRMZWZ0KCdhYmMnLCA2LCAnXy0nKTtcbiAgICAgKiAvLyA9PiAnXy1fYWJjJ1xuICAgICAqXG4gICAgICogXy5wYWRMZWZ0KCdhYmMnLCAzKTtcbiAgICAgKiAvLyA9PiAnYWJjJ1xuICAgICAqL1xuICAgIHZhciBwYWRMZWZ0ID0gY3JlYXRlUGFkRGlyKCk7XG5cbiAgICAvKipcbiAgICAgKiBQYWRzIGBzdHJpbmdgIG9uIHRoZSByaWdodCBzaWRlIGlmIGl0J3Mgc2hvcnRlciB0aGFuIGBsZW5ndGhgLiBQYWRkaW5nXG4gICAgICogY2hhcmFjdGVycyBhcmUgdHJ1bmNhdGVkIGlmIHRoZXkgZXhjZWVkIGBsZW5ndGhgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbc3RyaW5nPScnXSBUaGUgc3RyaW5nIHRvIHBhZC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aD0wXSBUaGUgcGFkZGluZyBsZW5ndGguXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtjaGFycz0nICddIFRoZSBzdHJpbmcgdXNlZCBhcyBwYWRkaW5nLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHBhZGRlZCBzdHJpbmcuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ucGFkUmlnaHQoJ2FiYycsIDYpO1xuICAgICAqIC8vID0+ICdhYmMgICAnXG4gICAgICpcbiAgICAgKiBfLnBhZFJpZ2h0KCdhYmMnLCA2LCAnXy0nKTtcbiAgICAgKiAvLyA9PiAnYWJjXy1fJ1xuICAgICAqXG4gICAgICogXy5wYWRSaWdodCgnYWJjJywgMyk7XG4gICAgICogLy8gPT4gJ2FiYydcbiAgICAgKi9cbiAgICB2YXIgcGFkUmlnaHQgPSBjcmVhdGVQYWREaXIodHJ1ZSk7XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBgc3RyaW5nYCB0byBhbiBpbnRlZ2VyIG9mIHRoZSBzcGVjaWZpZWQgcmFkaXguIElmIGByYWRpeGAgaXNcbiAgICAgKiBgdW5kZWZpbmVkYCBvciBgMGAsIGEgYHJhZGl4YCBvZiBgMTBgIGlzIHVzZWQgdW5sZXNzIGB2YWx1ZWAgaXMgYSBoZXhhZGVjaW1hbCxcbiAgICAgKiBpbiB3aGljaCBjYXNlIGEgYHJhZGl4YCBvZiBgMTZgIGlzIHVzZWQuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgYWxpZ25zIHdpdGggdGhlIFtFUzUgaW1wbGVtZW50YXRpb25dKGh0dHBzOi8vZXM1LmdpdGh1Yi5pby8jRSlcbiAgICAgKiBvZiBgcGFyc2VJbnRgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmcgVGhlIHN0cmluZyB0byBjb252ZXJ0LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbcmFkaXhdIFRoZSByYWRpeCB0byBpbnRlcnByZXQgYHZhbHVlYCBieS5cbiAgICAgKiBAcGFyYW0tIHtPYmplY3R9IFtndWFyZF0gRW5hYmxlcyB1c2UgYXMgYSBjYWxsYmFjayBmb3IgZnVuY3Rpb25zIGxpa2UgYF8ubWFwYC5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBjb252ZXJ0ZWQgaW50ZWdlci5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5wYXJzZUludCgnMDgnKTtcbiAgICAgKiAvLyA9PiA4XG4gICAgICpcbiAgICAgKiBfLm1hcChbJzYnLCAnMDgnLCAnMTAnXSwgXy5wYXJzZUludCk7XG4gICAgICogLy8gPT4gWzYsIDgsIDEwXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHBhcnNlSW50KHN0cmluZywgcmFkaXgsIGd1YXJkKSB7XG4gICAgICAvLyBGaXJlZm94IDwgMjEgYW5kIE9wZXJhIDwgMTUgZm9sbG93IEVTMyBmb3IgYHBhcnNlSW50YC5cbiAgICAgIC8vIENocm9tZSBmYWlscyB0byB0cmltIGxlYWRpbmcgPEJPTT4gd2hpdGVzcGFjZSBjaGFyYWN0ZXJzLlxuICAgICAgLy8gU2VlIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0zMTA5IGZvciBtb3JlIGRldGFpbHMuXG4gICAgICBpZiAoZ3VhcmQgPyBpc0l0ZXJhdGVlQ2FsbChzdHJpbmcsIHJhZGl4LCBndWFyZCkgOiByYWRpeCA9PSBudWxsKSB7XG4gICAgICAgIHJhZGl4ID0gMDtcbiAgICAgIH0gZWxzZSBpZiAocmFkaXgpIHtcbiAgICAgICAgcmFkaXggPSArcmFkaXg7XG4gICAgICB9XG4gICAgICBzdHJpbmcgPSB0cmltKHN0cmluZyk7XG4gICAgICByZXR1cm4gbmF0aXZlUGFyc2VJbnQoc3RyaW5nLCByYWRpeCB8fCAocmVIYXNIZXhQcmVmaXgudGVzdChzdHJpbmcpID8gMTYgOiAxMCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlcGVhdHMgdGhlIGdpdmVuIHN0cmluZyBgbmAgdGltZXMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgU3RyaW5nXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtzdHJpbmc9JyddIFRoZSBzdHJpbmcgdG8gcmVwZWF0LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbj0wXSBUaGUgbnVtYmVyIG9mIHRpbWVzIHRvIHJlcGVhdCB0aGUgc3RyaW5nLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHJlcGVhdGVkIHN0cmluZy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5yZXBlYXQoJyonLCAzKTtcbiAgICAgKiAvLyA9PiAnKioqJ1xuICAgICAqXG4gICAgICogXy5yZXBlYXQoJ2FiYycsIDIpO1xuICAgICAqIC8vID0+ICdhYmNhYmMnXG4gICAgICpcbiAgICAgKiBfLnJlcGVhdCgnYWJjJywgMCk7XG4gICAgICogLy8gPT4gJydcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZXBlYXQoc3RyaW5nLCBuKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gJyc7XG4gICAgICBzdHJpbmcgPSBiYXNlVG9TdHJpbmcoc3RyaW5nKTtcbiAgICAgIG4gPSArbjtcbiAgICAgIGlmIChuIDwgMSB8fCAhc3RyaW5nIHx8ICFuYXRpdmVJc0Zpbml0ZShuKSkge1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgICAgLy8gTGV2ZXJhZ2UgdGhlIGV4cG9uZW50aWF0aW9uIGJ5IHNxdWFyaW5nIGFsZ29yaXRobSBmb3IgYSBmYXN0ZXIgcmVwZWF0LlxuICAgICAgLy8gU2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0V4cG9uZW50aWF0aW9uX2J5X3NxdWFyaW5nIGZvciBtb3JlIGRldGFpbHMuXG4gICAgICBkbyB7XG4gICAgICAgIGlmIChuICUgMikge1xuICAgICAgICAgIHJlc3VsdCArPSBzdHJpbmc7XG4gICAgICAgIH1cbiAgICAgICAgbiA9IG5hdGl2ZUZsb29yKG4gLyAyKTtcbiAgICAgICAgc3RyaW5nICs9IHN0cmluZztcbiAgICAgIH0gd2hpbGUgKG4pO1xuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGBzdHJpbmdgIHRvIFtzbmFrZSBjYXNlXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9TbmFrZV9jYXNlKS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZz0nJ10gVGhlIHN0cmluZyB0byBjb252ZXJ0LlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHNuYWtlIGNhc2VkIHN0cmluZy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5zbmFrZUNhc2UoJ0ZvbyBCYXInKTtcbiAgICAgKiAvLyA9PiAnZm9vX2JhcidcbiAgICAgKlxuICAgICAqIF8uc25ha2VDYXNlKCdmb29CYXInKTtcbiAgICAgKiAvLyA9PiAnZm9vX2JhcidcbiAgICAgKlxuICAgICAqIF8uc25ha2VDYXNlKCctLWZvby1iYXInKTtcbiAgICAgKiAvLyA9PiAnZm9vX2JhcidcbiAgICAgKi9cbiAgICB2YXIgc25ha2VDYXNlID0gY3JlYXRlQ29tcG91bmRlcihmdW5jdGlvbihyZXN1bHQsIHdvcmQsIGluZGV4KSB7XG4gICAgICByZXR1cm4gcmVzdWx0ICsgKGluZGV4ID8gJ18nIDogJycpICsgd29yZC50b0xvd2VyQ2FzZSgpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ29udmVydHMgYHN0cmluZ2AgdG8gW3N0YXJ0IGNhc2VdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xldHRlcl9jYXNlI1N0eWxpc3RpY19vcl9zcGVjaWFsaXNlZF91c2FnZSkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgU3RyaW5nXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtzdHJpbmc9JyddIFRoZSBzdHJpbmcgdG8gY29udmVydC5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBzdGFydCBjYXNlZCBzdHJpbmcuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uc3RhcnRDYXNlKCctLWZvby1iYXInKTtcbiAgICAgKiAvLyA9PiAnRm9vIEJhcidcbiAgICAgKlxuICAgICAqIF8uc3RhcnRDYXNlKCdmb29CYXInKTtcbiAgICAgKiAvLyA9PiAnRm9vIEJhcidcbiAgICAgKlxuICAgICAqIF8uc3RhcnRDYXNlKCdfX2Zvb19iYXJfXycpO1xuICAgICAqIC8vID0+ICdGb28gQmFyJ1xuICAgICAqL1xuICAgIHZhciBzdGFydENhc2UgPSBjcmVhdGVDb21wb3VuZGVyKGZ1bmN0aW9uKHJlc3VsdCwgd29yZCwgaW5kZXgpIHtcbiAgICAgIHJldHVybiByZXN1bHQgKyAoaW5kZXggPyAnICcgOiAnJykgKyAod29yZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHdvcmQuc2xpY2UoMSkpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGBzdHJpbmdgIHN0YXJ0cyB3aXRoIHRoZSBnaXZlbiB0YXJnZXQgc3RyaW5nLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbc3RyaW5nPScnXSBUaGUgc3RyaW5nIHRvIHNlYXJjaC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3RhcmdldF0gVGhlIHN0cmluZyB0byBzZWFyY2ggZm9yLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbcG9zaXRpb249MF0gVGhlIHBvc2l0aW9uIHRvIHNlYXJjaCBmcm9tLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgc3RyaW5nYCBzdGFydHMgd2l0aCBgdGFyZ2V0YCwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnN0YXJ0c1dpdGgoJ2FiYycsICdhJyk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5zdGFydHNXaXRoKCdhYmMnLCAnYicpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICpcbiAgICAgKiBfLnN0YXJ0c1dpdGgoJ2FiYycsICdiJywgMSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHN0YXJ0c1dpdGgoc3RyaW5nLCB0YXJnZXQsIHBvc2l0aW9uKSB7XG4gICAgICBzdHJpbmcgPSBiYXNlVG9TdHJpbmcoc3RyaW5nKTtcbiAgICAgIHBvc2l0aW9uID0gcG9zaXRpb24gPT0gbnVsbFxuICAgICAgICA/IDBcbiAgICAgICAgOiBuYXRpdmVNaW4ocG9zaXRpb24gPCAwID8gMCA6ICgrcG9zaXRpb24gfHwgMCksIHN0cmluZy5sZW5ndGgpO1xuXG4gICAgICByZXR1cm4gc3RyaW5nLmxhc3RJbmRleE9mKHRhcmdldCwgcG9zaXRpb24pID09IHBvc2l0aW9uO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBjb21waWxlZCB0ZW1wbGF0ZSBmdW5jdGlvbiB0aGF0IGNhbiBpbnRlcnBvbGF0ZSBkYXRhIHByb3BlcnRpZXNcbiAgICAgKiBpbiBcImludGVycG9sYXRlXCIgZGVsaW1pdGVycywgSFRNTC1lc2NhcGUgaW50ZXJwb2xhdGVkIGRhdGEgcHJvcGVydGllcyBpblxuICAgICAqIFwiZXNjYXBlXCIgZGVsaW1pdGVycywgYW5kIGV4ZWN1dGUgSmF2YVNjcmlwdCBpbiBcImV2YWx1YXRlXCIgZGVsaW1pdGVycy4gRGF0YVxuICAgICAqIHByb3BlcnRpZXMgbWF5IGJlIGFjY2Vzc2VkIGFzIGZyZWUgdmFyaWFibGVzIGluIHRoZSB0ZW1wbGF0ZS4gSWYgYSBzZXR0aW5nXG4gICAgICogb2JqZWN0IGlzIHByb3ZpZGVkIGl0IHRha2VzIHByZWNlZGVuY2Ugb3ZlciBgXy50ZW1wbGF0ZVNldHRpbmdzYCB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogSW4gdGhlIGRldmVsb3BtZW50IGJ1aWxkIGBfLnRlbXBsYXRlYCB1dGlsaXplc1xuICAgICAqIFtzb3VyY2VVUkxzXShodHRwOi8vd3d3Lmh0bWw1cm9ja3MuY29tL2VuL3R1dG9yaWFscy9kZXZlbG9wZXJ0b29scy9zb3VyY2VtYXBzLyN0b2Mtc291cmNldXJsKVxuICAgICAqIGZvciBlYXNpZXIgZGVidWdnaW5nLlxuICAgICAqXG4gICAgICogRm9yIG1vcmUgaW5mb3JtYXRpb24gb24gcHJlY29tcGlsaW5nIHRlbXBsYXRlcyBzZWVcbiAgICAgKiBbbG9kYXNoJ3MgY3VzdG9tIGJ1aWxkcyBkb2N1bWVudGF0aW9uXShodHRwczovL2xvZGFzaC5jb20vY3VzdG9tLWJ1aWxkcykuXG4gICAgICpcbiAgICAgKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiBvbiBDaHJvbWUgZXh0ZW5zaW9uIHNhbmRib3hlcyBzZWVcbiAgICAgKiBbQ2hyb21lJ3MgZXh0ZW5zaW9ucyBkb2N1bWVudGF0aW9uXShodHRwczovL2RldmVsb3Blci5jaHJvbWUuY29tL2V4dGVuc2lvbnMvc2FuZGJveGluZ0V2YWwpLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbc3RyaW5nPScnXSBUaGUgdGVtcGxhdGUgc3RyaW5nLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gVGhlIG9wdGlvbnMgb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7UmVnRXhwfSBbb3B0aW9ucy5lc2NhcGVdIFRoZSBIVE1MIFwiZXNjYXBlXCIgZGVsaW1pdGVyLlxuICAgICAqIEBwYXJhbSB7UmVnRXhwfSBbb3B0aW9ucy5ldmFsdWF0ZV0gVGhlIFwiZXZhbHVhdGVcIiBkZWxpbWl0ZXIuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLmltcG9ydHNdIEFuIG9iamVjdCB0byBpbXBvcnQgaW50byB0aGUgdGVtcGxhdGUgYXMgZnJlZSB2YXJpYWJsZXMuXG4gICAgICogQHBhcmFtIHtSZWdFeHB9IFtvcHRpb25zLmludGVycG9sYXRlXSBUaGUgXCJpbnRlcnBvbGF0ZVwiIGRlbGltaXRlci5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuc291cmNlVVJMXSBUaGUgc291cmNlVVJMIG9mIHRoZSB0ZW1wbGF0ZSdzIGNvbXBpbGVkIHNvdXJjZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMudmFyaWFibGVdIFRoZSBkYXRhIG9iamVjdCB2YXJpYWJsZSBuYW1lLlxuICAgICAqIEBwYXJhbS0ge09iamVjdH0gW290aGVyT3B0aW9uc10gRW5hYmxlcyB0aGUgbGVnYWN5IGBvcHRpb25zYCBwYXJhbSBzaWduYXR1cmUuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBjb21waWxlZCB0ZW1wbGF0ZSBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIFwiaW50ZXJwb2xhdGVcIiBkZWxpbWl0ZXIgdG8gY3JlYXRlIGEgY29tcGlsZWQgdGVtcGxhdGVcbiAgICAgKiB2YXIgY29tcGlsZWQgPSBfLnRlbXBsYXRlKCdoZWxsbyA8JT0gdXNlciAlPiEnKTtcbiAgICAgKiBjb21waWxlZCh7ICd1c2VyJzogJ2ZyZWQnIH0pO1xuICAgICAqIC8vID0+ICdoZWxsbyBmcmVkISdcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBIVE1MIFwiZXNjYXBlXCIgZGVsaW1pdGVyIHRvIGVzY2FwZSBkYXRhIHByb3BlcnR5IHZhbHVlc1xuICAgICAqIHZhciBjb21waWxlZCA9IF8udGVtcGxhdGUoJzxiPjwlLSB2YWx1ZSAlPjwvYj4nKTtcbiAgICAgKiBjb21waWxlZCh7ICd2YWx1ZSc6ICc8c2NyaXB0PicgfSk7XG4gICAgICogLy8gPT4gJzxiPiZsdDtzY3JpcHQmZ3Q7PC9iPidcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBcImV2YWx1YXRlXCIgZGVsaW1pdGVyIHRvIGV4ZWN1dGUgSmF2YVNjcmlwdCBhbmQgZ2VuZXJhdGUgSFRNTFxuICAgICAqIHZhciBjb21waWxlZCA9IF8udGVtcGxhdGUoJzwlIF8uZm9yRWFjaCh1c2VycywgZnVuY3Rpb24odXNlcikgeyAlPjxsaT48JS0gdXNlciAlPjwvbGk+PCUgfSk7ICU+Jyk7XG4gICAgICogY29tcGlsZWQoeyAndXNlcnMnOiBbJ2ZyZWQnLCAnYmFybmV5J10gfSk7XG4gICAgICogLy8gPT4gJzxsaT5mcmVkPC9saT48bGk+YmFybmV5PC9saT4nXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgaW50ZXJuYWwgYHByaW50YCBmdW5jdGlvbiBpbiBcImV2YWx1YXRlXCIgZGVsaW1pdGVyc1xuICAgICAqIHZhciBjb21waWxlZCA9IF8udGVtcGxhdGUoJzwlIHByaW50KFwiaGVsbG8gXCIgKyB1c2VyKTsgJT4hJyk7XG4gICAgICogY29tcGlsZWQoeyAndXNlcic6ICdiYXJuZXknIH0pO1xuICAgICAqIC8vID0+ICdoZWxsbyBiYXJuZXkhJ1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIEVTIGRlbGltaXRlciBhcyBhbiBhbHRlcm5hdGl2ZSB0byB0aGUgZGVmYXVsdCBcImludGVycG9sYXRlXCIgZGVsaW1pdGVyXG4gICAgICogdmFyIGNvbXBpbGVkID0gXy50ZW1wbGF0ZSgnaGVsbG8gJHsgdXNlciB9IScpO1xuICAgICAqIGNvbXBpbGVkKHsgJ3VzZXInOiAncGViYmxlcycgfSk7XG4gICAgICogLy8gPT4gJ2hlbGxvIHBlYmJsZXMhJ1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgY3VzdG9tIHRlbXBsYXRlIGRlbGltaXRlcnNcbiAgICAgKiBfLnRlbXBsYXRlU2V0dGluZ3MuaW50ZXJwb2xhdGUgPSAve3soW1xcc1xcU10rPyl9fS9nO1xuICAgICAqIHZhciBjb21waWxlZCA9IF8udGVtcGxhdGUoJ2hlbGxvIHt7IHVzZXIgfX0hJyk7XG4gICAgICogY29tcGlsZWQoeyAndXNlcic6ICdtdXN0YWNoZScgfSk7XG4gICAgICogLy8gPT4gJ2hlbGxvIG11c3RhY2hlISdcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIGJhY2tzbGFzaGVzIHRvIHRyZWF0IGRlbGltaXRlcnMgYXMgcGxhaW4gdGV4dFxuICAgICAqIHZhciBjb21waWxlZCA9IF8udGVtcGxhdGUoJzwlPSBcIlxcXFw8JS0gdmFsdWUgJVxcXFw+XCIgJT4nKTtcbiAgICAgKiBjb21waWxlZCh7ICd2YWx1ZSc6ICdpZ25vcmVkJyB9KTtcbiAgICAgKiAvLyA9PiAnPCUtIHZhbHVlICU+J1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBpbXBvcnRzYCBvcHRpb24gdG8gaW1wb3J0IGBqUXVlcnlgIGFzIGBqcWBcbiAgICAgKiB2YXIgdGV4dCA9ICc8JSBqcS5lYWNoKHVzZXJzLCBmdW5jdGlvbih1c2VyKSB7ICU+PGxpPjwlLSB1c2VyICU+PC9saT48JSB9KTsgJT4nO1xuICAgICAqIHZhciBjb21waWxlZCA9IF8udGVtcGxhdGUodGV4dCwgeyAnaW1wb3J0cyc6IHsgJ2pxJzogalF1ZXJ5IH0gfSk7XG4gICAgICogY29tcGlsZWQoeyAndXNlcnMnOiBbJ2ZyZWQnLCAnYmFybmV5J10gfSk7XG4gICAgICogLy8gPT4gJzxsaT5mcmVkPC9saT48bGk+YmFybmV5PC9saT4nXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYHNvdXJjZVVSTGAgb3B0aW9uIHRvIHNwZWNpZnkgYSBjdXN0b20gc291cmNlVVJMIGZvciB0aGUgdGVtcGxhdGVcbiAgICAgKiB2YXIgY29tcGlsZWQgPSBfLnRlbXBsYXRlKCdoZWxsbyA8JT0gdXNlciAlPiEnLCB7ICdzb3VyY2VVUkwnOiAnL2Jhc2ljL2dyZWV0aW5nLmpzdCcgfSk7XG4gICAgICogY29tcGlsZWQoZGF0YSk7XG4gICAgICogLy8gPT4gZmluZCB0aGUgc291cmNlIG9mIFwiZ3JlZXRpbmcuanN0XCIgdW5kZXIgdGhlIFNvdXJjZXMgdGFiIG9yIFJlc291cmNlcyBwYW5lbCBvZiB0aGUgd2ViIGluc3BlY3RvclxuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGB2YXJpYWJsZWAgb3B0aW9uIHRvIGVuc3VyZSBhIHdpdGgtc3RhdGVtZW50IGlzbid0IHVzZWQgaW4gdGhlIGNvbXBpbGVkIHRlbXBsYXRlXG4gICAgICogdmFyIGNvbXBpbGVkID0gXy50ZW1wbGF0ZSgnaGkgPCU9IGRhdGEudXNlciAlPiEnLCB7ICd2YXJpYWJsZSc6ICdkYXRhJyB9KTtcbiAgICAgKiBjb21waWxlZC5zb3VyY2U7XG4gICAgICogLy8gPT4gZnVuY3Rpb24oZGF0YSkge1xuICAgICAqIC8vICAgdmFyIF9fdCwgX19wID0gJyc7XG4gICAgICogLy8gICBfX3AgKz0gJ2hpICcgKyAoKF9fdCA9ICggZGF0YS51c2VyICkpID09IG51bGwgPyAnJyA6IF9fdCkgKyAnISc7XG4gICAgICogLy8gICByZXR1cm4gX19wO1xuICAgICAqIC8vIH1cbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgc291cmNlYCBwcm9wZXJ0eSB0byBpbmxpbmUgY29tcGlsZWQgdGVtcGxhdGVzIGZvciBtZWFuaW5nZnVsXG4gICAgICogLy8gbGluZSBudW1iZXJzIGluIGVycm9yIG1lc3NhZ2VzIGFuZCBhIHN0YWNrIHRyYWNlXG4gICAgICogZnMud3JpdGVGaWxlU3luYyhwYXRoLmpvaW4oY3dkLCAnanN0LmpzJyksICdcXFxuICAgICAqICAgdmFyIEpTVCA9IHtcXFxuICAgICAqICAgICBcIm1haW5cIjogJyArIF8udGVtcGxhdGUobWFpblRleHQpLnNvdXJjZSArICdcXFxuICAgICAqICAgfTtcXFxuICAgICAqICcpO1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIHRlbXBsYXRlKHN0cmluZywgb3B0aW9ucywgb3RoZXJPcHRpb25zKSB7XG4gICAgICAvLyBCYXNlZCBvbiBKb2huIFJlc2lnJ3MgYHRtcGxgIGltcGxlbWVudGF0aW9uIChodHRwOi8vZWpvaG4ub3JnL2Jsb2cvamF2YXNjcmlwdC1taWNyby10ZW1wbGF0aW5nLylcbiAgICAgIC8vIGFuZCBMYXVyYSBEb2t0b3JvdmEncyBkb1QuanMgKGh0dHBzOi8vZ2l0aHViLmNvbS9vbGFkby9kb1QpLlxuICAgICAgdmFyIHNldHRpbmdzID0gbG9kYXNoLnRlbXBsYXRlU2V0dGluZ3M7XG5cbiAgICAgIGlmIChvdGhlck9wdGlvbnMgJiYgaXNJdGVyYXRlZUNhbGwoc3RyaW5nLCBvcHRpb25zLCBvdGhlck9wdGlvbnMpKSB7XG4gICAgICAgIG9wdGlvbnMgPSBvdGhlck9wdGlvbnMgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICBzdHJpbmcgPSBiYXNlVG9TdHJpbmcoc3RyaW5nKTtcbiAgICAgIG9wdGlvbnMgPSBhc3NpZ25XaXRoKGJhc2VBc3NpZ24oe30sIG90aGVyT3B0aW9ucyB8fCBvcHRpb25zKSwgc2V0dGluZ3MsIGFzc2lnbk93bkRlZmF1bHRzKTtcblxuICAgICAgdmFyIGltcG9ydHMgPSBhc3NpZ25XaXRoKGJhc2VBc3NpZ24oe30sIG9wdGlvbnMuaW1wb3J0cyksIHNldHRpbmdzLmltcG9ydHMsIGFzc2lnbk93bkRlZmF1bHRzKSxcbiAgICAgICAgICBpbXBvcnRzS2V5cyA9IGtleXMoaW1wb3J0cyksXG4gICAgICAgICAgaW1wb3J0c1ZhbHVlcyA9IGJhc2VWYWx1ZXMoaW1wb3J0cywgaW1wb3J0c0tleXMpO1xuXG4gICAgICB2YXIgaXNFc2NhcGluZyxcbiAgICAgICAgICBpc0V2YWx1YXRpbmcsXG4gICAgICAgICAgaW5kZXggPSAwLFxuICAgICAgICAgIGludGVycG9sYXRlID0gb3B0aW9ucy5pbnRlcnBvbGF0ZSB8fCByZU5vTWF0Y2gsXG4gICAgICAgICAgc291cmNlID0gXCJfX3AgKz0gJ1wiO1xuXG4gICAgICAvLyBDb21waWxlIHRoZSByZWdleHAgdG8gbWF0Y2ggZWFjaCBkZWxpbWl0ZXIuXG4gICAgICB2YXIgcmVEZWxpbWl0ZXJzID0gUmVnRXhwKFxuICAgICAgICAob3B0aW9ucy5lc2NhcGUgfHwgcmVOb01hdGNoKS5zb3VyY2UgKyAnfCcgK1xuICAgICAgICBpbnRlcnBvbGF0ZS5zb3VyY2UgKyAnfCcgK1xuICAgICAgICAoaW50ZXJwb2xhdGUgPT09IHJlSW50ZXJwb2xhdGUgPyByZUVzVGVtcGxhdGUgOiByZU5vTWF0Y2gpLnNvdXJjZSArICd8JyArXG4gICAgICAgIChvcHRpb25zLmV2YWx1YXRlIHx8IHJlTm9NYXRjaCkuc291cmNlICsgJ3wkJ1xuICAgICAgLCAnZycpO1xuXG4gICAgICAvLyBVc2UgYSBzb3VyY2VVUkwgZm9yIGVhc2llciBkZWJ1Z2dpbmcuXG4gICAgICB2YXIgc291cmNlVVJMID0gJy8vIyBzb3VyY2VVUkw9JyArXG4gICAgICAgICgnc291cmNlVVJMJyBpbiBvcHRpb25zXG4gICAgICAgICAgPyBvcHRpb25zLnNvdXJjZVVSTFxuICAgICAgICAgIDogKCdsb2Rhc2gudGVtcGxhdGVTb3VyY2VzWycgKyAoKyt0ZW1wbGF0ZUNvdW50ZXIpICsgJ10nKVxuICAgICAgICApICsgJ1xcbic7XG5cbiAgICAgIHN0cmluZy5yZXBsYWNlKHJlRGVsaW1pdGVycywgZnVuY3Rpb24obWF0Y2gsIGVzY2FwZVZhbHVlLCBpbnRlcnBvbGF0ZVZhbHVlLCBlc1RlbXBsYXRlVmFsdWUsIGV2YWx1YXRlVmFsdWUsIG9mZnNldCkge1xuICAgICAgICBpbnRlcnBvbGF0ZVZhbHVlIHx8IChpbnRlcnBvbGF0ZVZhbHVlID0gZXNUZW1wbGF0ZVZhbHVlKTtcblxuICAgICAgICAvLyBFc2NhcGUgY2hhcmFjdGVycyB0aGF0IGNhbid0IGJlIGluY2x1ZGVkIGluIHN0cmluZyBsaXRlcmFscy5cbiAgICAgICAgc291cmNlICs9IHN0cmluZy5zbGljZShpbmRleCwgb2Zmc2V0KS5yZXBsYWNlKHJlVW5lc2NhcGVkU3RyaW5nLCBlc2NhcGVTdHJpbmdDaGFyKTtcblxuICAgICAgICAvLyBSZXBsYWNlIGRlbGltaXRlcnMgd2l0aCBzbmlwcGV0cy5cbiAgICAgICAgaWYgKGVzY2FwZVZhbHVlKSB7XG4gICAgICAgICAgaXNFc2NhcGluZyA9IHRydWU7XG4gICAgICAgICAgc291cmNlICs9IFwiJyArXFxuX19lKFwiICsgZXNjYXBlVmFsdWUgKyBcIikgK1xcbidcIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXZhbHVhdGVWYWx1ZSkge1xuICAgICAgICAgIGlzRXZhbHVhdGluZyA9IHRydWU7XG4gICAgICAgICAgc291cmNlICs9IFwiJztcXG5cIiArIGV2YWx1YXRlVmFsdWUgKyBcIjtcXG5fX3AgKz0gJ1wiO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbnRlcnBvbGF0ZVZhbHVlKSB7XG4gICAgICAgICAgc291cmNlICs9IFwiJyArXFxuKChfX3QgPSAoXCIgKyBpbnRlcnBvbGF0ZVZhbHVlICsgXCIpKSA9PSBudWxsID8gJycgOiBfX3QpICtcXG4nXCI7XG4gICAgICAgIH1cbiAgICAgICAgaW5kZXggPSBvZmZzZXQgKyBtYXRjaC5sZW5ndGg7XG5cbiAgICAgICAgLy8gVGhlIEpTIGVuZ2luZSBlbWJlZGRlZCBpbiBBZG9iZSBwcm9kdWN0cyByZXF1aXJlcyByZXR1cm5pbmcgdGhlIGBtYXRjaGBcbiAgICAgICAgLy8gc3RyaW5nIGluIG9yZGVyIHRvIHByb2R1Y2UgdGhlIGNvcnJlY3QgYG9mZnNldGAgdmFsdWUuXG4gICAgICAgIHJldHVybiBtYXRjaDtcbiAgICAgIH0pO1xuXG4gICAgICBzb3VyY2UgKz0gXCInO1xcblwiO1xuXG4gICAgICAvLyBJZiBgdmFyaWFibGVgIGlzIG5vdCBzcGVjaWZpZWQgd3JhcCBhIHdpdGgtc3RhdGVtZW50IGFyb3VuZCB0aGUgZ2VuZXJhdGVkXG4gICAgICAvLyBjb2RlIHRvIGFkZCB0aGUgZGF0YSBvYmplY3QgdG8gdGhlIHRvcCBvZiB0aGUgc2NvcGUgY2hhaW4uXG4gICAgICB2YXIgdmFyaWFibGUgPSBvcHRpb25zLnZhcmlhYmxlO1xuICAgICAgaWYgKCF2YXJpYWJsZSkge1xuICAgICAgICBzb3VyY2UgPSAnd2l0aCAob2JqKSB7XFxuJyArIHNvdXJjZSArICdcXG59XFxuJztcbiAgICAgIH1cbiAgICAgIC8vIENsZWFudXAgY29kZSBieSBzdHJpcHBpbmcgZW1wdHkgc3RyaW5ncy5cbiAgICAgIHNvdXJjZSA9IChpc0V2YWx1YXRpbmcgPyBzb3VyY2UucmVwbGFjZShyZUVtcHR5U3RyaW5nTGVhZGluZywgJycpIDogc291cmNlKVxuICAgICAgICAucmVwbGFjZShyZUVtcHR5U3RyaW5nTWlkZGxlLCAnJDEnKVxuICAgICAgICAucmVwbGFjZShyZUVtcHR5U3RyaW5nVHJhaWxpbmcsICckMTsnKTtcblxuICAgICAgLy8gRnJhbWUgY29kZSBhcyB0aGUgZnVuY3Rpb24gYm9keS5cbiAgICAgIHNvdXJjZSA9ICdmdW5jdGlvbignICsgKHZhcmlhYmxlIHx8ICdvYmonKSArICcpIHtcXG4nICtcbiAgICAgICAgKHZhcmlhYmxlXG4gICAgICAgICAgPyAnJ1xuICAgICAgICAgIDogJ29iaiB8fCAob2JqID0ge30pO1xcbidcbiAgICAgICAgKSArXG4gICAgICAgIFwidmFyIF9fdCwgX19wID0gJydcIiArXG4gICAgICAgIChpc0VzY2FwaW5nXG4gICAgICAgICAgID8gJywgX19lID0gXy5lc2NhcGUnXG4gICAgICAgICAgIDogJydcbiAgICAgICAgKSArXG4gICAgICAgIChpc0V2YWx1YXRpbmdcbiAgICAgICAgICA/ICcsIF9faiA9IEFycmF5LnByb3RvdHlwZS5qb2luO1xcbicgK1xuICAgICAgICAgICAgXCJmdW5jdGlvbiBwcmludCgpIHsgX19wICs9IF9fai5jYWxsKGFyZ3VtZW50cywgJycpIH1cXG5cIlxuICAgICAgICAgIDogJztcXG4nXG4gICAgICAgICkgK1xuICAgICAgICBzb3VyY2UgK1xuICAgICAgICAncmV0dXJuIF9fcFxcbn0nO1xuXG4gICAgICB2YXIgcmVzdWx0ID0gYXR0ZW1wdChmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIEZ1bmN0aW9uKGltcG9ydHNLZXlzLCBzb3VyY2VVUkwgKyAncmV0dXJuICcgKyBzb3VyY2UpLmFwcGx5KHVuZGVmaW5lZCwgaW1wb3J0c1ZhbHVlcyk7XG4gICAgICB9KTtcblxuICAgICAgLy8gUHJvdmlkZSB0aGUgY29tcGlsZWQgZnVuY3Rpb24ncyBzb3VyY2UgYnkgaXRzIGB0b1N0cmluZ2AgbWV0aG9kIG9yXG4gICAgICAvLyB0aGUgYHNvdXJjZWAgcHJvcGVydHkgYXMgYSBjb252ZW5pZW5jZSBmb3IgaW5saW5pbmcgY29tcGlsZWQgdGVtcGxhdGVzLlxuICAgICAgcmVzdWx0LnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIGlmIChpc0Vycm9yKHJlc3VsdCkpIHtcbiAgICAgICAgdGhyb3cgcmVzdWx0O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHdoaXRlc3BhY2Ugb3Igc3BlY2lmaWVkIGNoYXJhY3RlcnMgZnJvbSBgc3RyaW5nYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZz0nJ10gVGhlIHN0cmluZyB0byB0cmltLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbY2hhcnM9d2hpdGVzcGFjZV0gVGhlIGNoYXJhY3RlcnMgdG8gdHJpbS5cbiAgICAgKiBAcGFyYW0tIHtPYmplY3R9IFtndWFyZF0gRW5hYmxlcyB1c2UgYXMgYSBjYWxsYmFjayBmb3IgZnVuY3Rpb25zIGxpa2UgYF8ubWFwYC5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSB0cmltbWVkIHN0cmluZy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy50cmltKCcgIGFiYyAgJyk7XG4gICAgICogLy8gPT4gJ2FiYydcbiAgICAgKlxuICAgICAqIF8udHJpbSgnLV8tYWJjLV8tJywgJ18tJyk7XG4gICAgICogLy8gPT4gJ2FiYydcbiAgICAgKlxuICAgICAqIF8ubWFwKFsnICBmb28gICcsICcgIGJhciAgJ10sIF8udHJpbSk7XG4gICAgICogLy8gPT4gWydmb28nLCAnYmFyJ11cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB0cmltKHN0cmluZywgY2hhcnMsIGd1YXJkKSB7XG4gICAgICB2YXIgdmFsdWUgPSBzdHJpbmc7XG4gICAgICBzdHJpbmcgPSBiYXNlVG9TdHJpbmcoc3RyaW5nKTtcbiAgICAgIGlmICghc3RyaW5nKSB7XG4gICAgICAgIHJldHVybiBzdHJpbmc7XG4gICAgICB9XG4gICAgICBpZiAoZ3VhcmQgPyBpc0l0ZXJhdGVlQ2FsbCh2YWx1ZSwgY2hhcnMsIGd1YXJkKSA6IGNoYXJzID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHN0cmluZy5zbGljZSh0cmltbWVkTGVmdEluZGV4KHN0cmluZyksIHRyaW1tZWRSaWdodEluZGV4KHN0cmluZykgKyAxKTtcbiAgICAgIH1cbiAgICAgIGNoYXJzID0gKGNoYXJzICsgJycpO1xuICAgICAgcmV0dXJuIHN0cmluZy5zbGljZShjaGFyc0xlZnRJbmRleChzdHJpbmcsIGNoYXJzKSwgY2hhcnNSaWdodEluZGV4KHN0cmluZywgY2hhcnMpICsgMSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBsZWFkaW5nIHdoaXRlc3BhY2Ugb3Igc3BlY2lmaWVkIGNoYXJhY3RlcnMgZnJvbSBgc3RyaW5nYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZz0nJ10gVGhlIHN0cmluZyB0byB0cmltLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbY2hhcnM9d2hpdGVzcGFjZV0gVGhlIGNoYXJhY3RlcnMgdG8gdHJpbS5cbiAgICAgKiBAcGFyYW0tIHtPYmplY3R9IFtndWFyZF0gRW5hYmxlcyB1c2UgYXMgYSBjYWxsYmFjayBmb3IgZnVuY3Rpb25zIGxpa2UgYF8ubWFwYC5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSB0cmltbWVkIHN0cmluZy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy50cmltTGVmdCgnICBhYmMgICcpO1xuICAgICAqIC8vID0+ICdhYmMgICdcbiAgICAgKlxuICAgICAqIF8udHJpbUxlZnQoJy1fLWFiYy1fLScsICdfLScpO1xuICAgICAqIC8vID0+ICdhYmMtXy0nXG4gICAgICovXG4gICAgZnVuY3Rpb24gdHJpbUxlZnQoc3RyaW5nLCBjaGFycywgZ3VhcmQpIHtcbiAgICAgIHZhciB2YWx1ZSA9IHN0cmluZztcbiAgICAgIHN0cmluZyA9IGJhc2VUb1N0cmluZyhzdHJpbmcpO1xuICAgICAgaWYgKCFzdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIHN0cmluZztcbiAgICAgIH1cbiAgICAgIGlmIChndWFyZCA/IGlzSXRlcmF0ZWVDYWxsKHZhbHVlLCBjaGFycywgZ3VhcmQpIDogY2hhcnMgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gc3RyaW5nLnNsaWNlKHRyaW1tZWRMZWZ0SW5kZXgoc3RyaW5nKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gc3RyaW5nLnNsaWNlKGNoYXJzTGVmdEluZGV4KHN0cmluZywgKGNoYXJzICsgJycpKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyB0cmFpbGluZyB3aGl0ZXNwYWNlIG9yIHNwZWNpZmllZCBjaGFyYWN0ZXJzIGZyb20gYHN0cmluZ2AuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgU3RyaW5nXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtzdHJpbmc9JyddIFRoZSBzdHJpbmcgdG8gdHJpbS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2NoYXJzPXdoaXRlc3BhY2VdIFRoZSBjaGFyYWN0ZXJzIHRvIHRyaW0uXG4gICAgICogQHBhcmFtLSB7T2JqZWN0fSBbZ3VhcmRdIEVuYWJsZXMgdXNlIGFzIGEgY2FsbGJhY2sgZm9yIGZ1bmN0aW9ucyBsaWtlIGBfLm1hcGAuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgdHJpbW1lZCBzdHJpbmcuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8udHJpbVJpZ2h0KCcgIGFiYyAgJyk7XG4gICAgICogLy8gPT4gJyAgYWJjJ1xuICAgICAqXG4gICAgICogXy50cmltUmlnaHQoJy1fLWFiYy1fLScsICdfLScpO1xuICAgICAqIC8vID0+ICctXy1hYmMnXG4gICAgICovXG4gICAgZnVuY3Rpb24gdHJpbVJpZ2h0KHN0cmluZywgY2hhcnMsIGd1YXJkKSB7XG4gICAgICB2YXIgdmFsdWUgPSBzdHJpbmc7XG4gICAgICBzdHJpbmcgPSBiYXNlVG9TdHJpbmcoc3RyaW5nKTtcbiAgICAgIGlmICghc3RyaW5nKSB7XG4gICAgICAgIHJldHVybiBzdHJpbmc7XG4gICAgICB9XG4gICAgICBpZiAoZ3VhcmQgPyBpc0l0ZXJhdGVlQ2FsbCh2YWx1ZSwgY2hhcnMsIGd1YXJkKSA6IGNoYXJzID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHN0cmluZy5zbGljZSgwLCB0cmltbWVkUmlnaHRJbmRleChzdHJpbmcpICsgMSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gc3RyaW5nLnNsaWNlKDAsIGNoYXJzUmlnaHRJbmRleChzdHJpbmcsIChjaGFycyArICcnKSkgKyAxKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcnVuY2F0ZXMgYHN0cmluZ2AgaWYgaXQncyBsb25nZXIgdGhhbiB0aGUgZ2l2ZW4gbWF4aW11bSBzdHJpbmcgbGVuZ3RoLlxuICAgICAqIFRoZSBsYXN0IGNoYXJhY3RlcnMgb2YgdGhlIHRydW5jYXRlZCBzdHJpbmcgYXJlIHJlcGxhY2VkIHdpdGggdGhlIG9taXNzaW9uXG4gICAgICogc3RyaW5nIHdoaWNoIGRlZmF1bHRzIHRvIFwiLi4uXCIuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgU3RyaW5nXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtzdHJpbmc9JyddIFRoZSBzdHJpbmcgdG8gdHJ1bmNhdGUuXG4gICAgICogQHBhcmFtIHtPYmplY3R8bnVtYmVyfSBbb3B0aW9uc10gVGhlIG9wdGlvbnMgb2JqZWN0IG9yIG1heGltdW0gc3RyaW5nIGxlbmd0aC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMubGVuZ3RoPTMwXSBUaGUgbWF4aW11bSBzdHJpbmcgbGVuZ3RoLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5vbWlzc2lvbj0nLi4uJ10gVGhlIHN0cmluZyB0byBpbmRpY2F0ZSB0ZXh0IGlzIG9taXR0ZWQuXG4gICAgICogQHBhcmFtIHtSZWdFeHB8c3RyaW5nfSBbb3B0aW9ucy5zZXBhcmF0b3JdIFRoZSBzZXBhcmF0b3IgcGF0dGVybiB0byB0cnVuY2F0ZSB0by5cbiAgICAgKiBAcGFyYW0tIHtPYmplY3R9IFtndWFyZF0gRW5hYmxlcyB1c2UgYXMgYSBjYWxsYmFjayBmb3IgZnVuY3Rpb25zIGxpa2UgYF8ubWFwYC5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSB0cnVuY2F0ZWQgc3RyaW5nLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnRydW5jKCdoaS1kaWRkbHktaG8gdGhlcmUsIG5laWdoYm9yaW5vJyk7XG4gICAgICogLy8gPT4gJ2hpLWRpZGRseS1obyB0aGVyZSwgbmVpZ2hiby4uLidcbiAgICAgKlxuICAgICAqIF8udHJ1bmMoJ2hpLWRpZGRseS1obyB0aGVyZSwgbmVpZ2hib3Jpbm8nLCAyNCk7XG4gICAgICogLy8gPT4gJ2hpLWRpZGRseS1obyB0aGVyZSwgbi4uLidcbiAgICAgKlxuICAgICAqIF8udHJ1bmMoJ2hpLWRpZGRseS1obyB0aGVyZSwgbmVpZ2hib3Jpbm8nLCB7XG4gICAgICogICAnbGVuZ3RoJzogMjQsXG4gICAgICogICAnc2VwYXJhdG9yJzogJyAnXG4gICAgICogfSk7XG4gICAgICogLy8gPT4gJ2hpLWRpZGRseS1obyB0aGVyZSwuLi4nXG4gICAgICpcbiAgICAgKiBfLnRydW5jKCdoaS1kaWRkbHktaG8gdGhlcmUsIG5laWdoYm9yaW5vJywge1xuICAgICAqICAgJ2xlbmd0aCc6IDI0LFxuICAgICAqICAgJ3NlcGFyYXRvcic6IC8sPyArL1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+ICdoaS1kaWRkbHktaG8gdGhlcmUuLi4nXG4gICAgICpcbiAgICAgKiBfLnRydW5jKCdoaS1kaWRkbHktaG8gdGhlcmUsIG5laWdoYm9yaW5vJywge1xuICAgICAqICAgJ29taXNzaW9uJzogJyBbLi4uXSdcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiAnaGktZGlkZGx5LWhvIHRoZXJlLCBuZWlnIFsuLi5dJ1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIHRydW5jKHN0cmluZywgb3B0aW9ucywgZ3VhcmQpIHtcbiAgICAgIGlmIChndWFyZCAmJiBpc0l0ZXJhdGVlQ2FsbChzdHJpbmcsIG9wdGlvbnMsIGd1YXJkKSkge1xuICAgICAgICBvcHRpb25zID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgdmFyIGxlbmd0aCA9IERFRkFVTFRfVFJVTkNfTEVOR1RILFxuICAgICAgICAgIG9taXNzaW9uID0gREVGQVVMVF9UUlVOQ19PTUlTU0lPTjtcblxuICAgICAgaWYgKG9wdGlvbnMgIT0gbnVsbCkge1xuICAgICAgICBpZiAoaXNPYmplY3Qob3B0aW9ucykpIHtcbiAgICAgICAgICB2YXIgc2VwYXJhdG9yID0gJ3NlcGFyYXRvcicgaW4gb3B0aW9ucyA/IG9wdGlvbnMuc2VwYXJhdG9yIDogc2VwYXJhdG9yO1xuICAgICAgICAgIGxlbmd0aCA9ICdsZW5ndGgnIGluIG9wdGlvbnMgPyAoK29wdGlvbnMubGVuZ3RoIHx8IDApIDogbGVuZ3RoO1xuICAgICAgICAgIG9taXNzaW9uID0gJ29taXNzaW9uJyBpbiBvcHRpb25zID8gYmFzZVRvU3RyaW5nKG9wdGlvbnMub21pc3Npb24pIDogb21pc3Npb247XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGVuZ3RoID0gK29wdGlvbnMgfHwgMDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgc3RyaW5nID0gYmFzZVRvU3RyaW5nKHN0cmluZyk7XG4gICAgICBpZiAobGVuZ3RoID49IHN0cmluZy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHN0cmluZztcbiAgICAgIH1cbiAgICAgIHZhciBlbmQgPSBsZW5ndGggLSBvbWlzc2lvbi5sZW5ndGg7XG4gICAgICBpZiAoZW5kIDwgMSkge1xuICAgICAgICByZXR1cm4gb21pc3Npb247XG4gICAgICB9XG4gICAgICB2YXIgcmVzdWx0ID0gc3RyaW5nLnNsaWNlKDAsIGVuZCk7XG4gICAgICBpZiAoc2VwYXJhdG9yID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdCArIG9taXNzaW9uO1xuICAgICAgfVxuICAgICAgaWYgKGlzUmVnRXhwKHNlcGFyYXRvcikpIHtcbiAgICAgICAgaWYgKHN0cmluZy5zbGljZShlbmQpLnNlYXJjaChzZXBhcmF0b3IpKSB7XG4gICAgICAgICAgdmFyIG1hdGNoLFxuICAgICAgICAgICAgICBuZXdFbmQsXG4gICAgICAgICAgICAgIHN1YnN0cmluZyA9IHN0cmluZy5zbGljZSgwLCBlbmQpO1xuXG4gICAgICAgICAgaWYgKCFzZXBhcmF0b3IuZ2xvYmFsKSB7XG4gICAgICAgICAgICBzZXBhcmF0b3IgPSBSZWdFeHAoc2VwYXJhdG9yLnNvdXJjZSwgKHJlRmxhZ3MuZXhlYyhzZXBhcmF0b3IpIHx8ICcnKSArICdnJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHNlcGFyYXRvci5sYXN0SW5kZXggPSAwO1xuICAgICAgICAgIHdoaWxlICgobWF0Y2ggPSBzZXBhcmF0b3IuZXhlYyhzdWJzdHJpbmcpKSkge1xuICAgICAgICAgICAgbmV3RW5kID0gbWF0Y2guaW5kZXg7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC5zbGljZSgwLCBuZXdFbmQgPT0gbnVsbCA/IGVuZCA6IG5ld0VuZCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoc3RyaW5nLmluZGV4T2Yoc2VwYXJhdG9yLCBlbmQpICE9IGVuZCkge1xuICAgICAgICB2YXIgaW5kZXggPSByZXN1bHQubGFzdEluZGV4T2Yoc2VwYXJhdG9yKTtcbiAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgICByZXN1bHQgPSByZXN1bHQuc2xpY2UoMCwgaW5kZXgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0ICsgb21pc3Npb247XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGludmVyc2Ugb2YgYF8uZXNjYXBlYDsgdGhpcyBtZXRob2QgY29udmVydHMgdGhlIEhUTUwgZW50aXRpZXNcbiAgICAgKiBgJmFtcDtgLCBgJmx0O2AsIGAmZ3Q7YCwgYCZxdW90O2AsIGAmIzM5O2AsIGFuZCBgJiM5NjtgIGluIGBzdHJpbmdgIHRvIHRoZWlyXG4gICAgICogY29ycmVzcG9uZGluZyBjaGFyYWN0ZXJzLlxuICAgICAqXG4gICAgICogKipOb3RlOioqIE5vIG90aGVyIEhUTUwgZW50aXRpZXMgYXJlIHVuZXNjYXBlZC4gVG8gdW5lc2NhcGUgYWRkaXRpb25hbCBIVE1MXG4gICAgICogZW50aXRpZXMgdXNlIGEgdGhpcmQtcGFydHkgbGlicmFyeSBsaWtlIFtfaGVfXShodHRwczovL210aHMuYmUvaGUpLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbc3RyaW5nPScnXSBUaGUgc3RyaW5nIHRvIHVuZXNjYXBlLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHVuZXNjYXBlZCBzdHJpbmcuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8udW5lc2NhcGUoJ2ZyZWQsIGJhcm5leSwgJmFtcDsgcGViYmxlcycpO1xuICAgICAqIC8vID0+ICdmcmVkLCBiYXJuZXksICYgcGViYmxlcydcbiAgICAgKi9cbiAgICBmdW5jdGlvbiB1bmVzY2FwZShzdHJpbmcpIHtcbiAgICAgIHN0cmluZyA9IGJhc2VUb1N0cmluZyhzdHJpbmcpO1xuICAgICAgcmV0dXJuIChzdHJpbmcgJiYgcmVIYXNFc2NhcGVkSHRtbC50ZXN0KHN0cmluZykpXG4gICAgICAgID8gc3RyaW5nLnJlcGxhY2UocmVFc2NhcGVkSHRtbCwgdW5lc2NhcGVIdG1sQ2hhcilcbiAgICAgICAgOiBzdHJpbmc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU3BsaXRzIGBzdHJpbmdgIGludG8gYW4gYXJyYXkgb2YgaXRzIHdvcmRzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbc3RyaW5nPScnXSBUaGUgc3RyaW5nIHRvIGluc3BlY3QuXG4gICAgICogQHBhcmFtIHtSZWdFeHB8c3RyaW5nfSBbcGF0dGVybl0gVGhlIHBhdHRlcm4gdG8gbWF0Y2ggd29yZHMuXG4gICAgICogQHBhcmFtLSB7T2JqZWN0fSBbZ3VhcmRdIEVuYWJsZXMgdXNlIGFzIGEgY2FsbGJhY2sgZm9yIGZ1bmN0aW9ucyBsaWtlIGBfLm1hcGAuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSB3b3JkcyBvZiBgc3RyaW5nYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy53b3JkcygnZnJlZCwgYmFybmV5LCAmIHBlYmJsZXMnKTtcbiAgICAgKiAvLyA9PiBbJ2ZyZWQnLCAnYmFybmV5JywgJ3BlYmJsZXMnXVxuICAgICAqXG4gICAgICogXy53b3JkcygnZnJlZCwgYmFybmV5LCAmIHBlYmJsZXMnLCAvW14sIF0rL2cpO1xuICAgICAqIC8vID0+IFsnZnJlZCcsICdiYXJuZXknLCAnJicsICdwZWJibGVzJ11cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB3b3JkcyhzdHJpbmcsIHBhdHRlcm4sIGd1YXJkKSB7XG4gICAgICBpZiAoZ3VhcmQgJiYgaXNJdGVyYXRlZUNhbGwoc3RyaW5nLCBwYXR0ZXJuLCBndWFyZCkpIHtcbiAgICAgICAgcGF0dGVybiA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIHN0cmluZyA9IGJhc2VUb1N0cmluZyhzdHJpbmcpO1xuICAgICAgcmV0dXJuIHN0cmluZy5tYXRjaChwYXR0ZXJuIHx8IHJlV29yZHMpIHx8IFtdO1xuICAgIH1cblxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgIC8qKlxuICAgICAqIEF0dGVtcHRzIHRvIGludm9rZSBgZnVuY2AsIHJldHVybmluZyBlaXRoZXIgdGhlIHJlc3VsdCBvciB0aGUgY2F1Z2h0IGVycm9yXG4gICAgICogb2JqZWN0LiBBbnkgYWRkaXRpb25hbCBhcmd1bWVudHMgYXJlIHByb3ZpZGVkIHRvIGBmdW5jYCB3aGVuIGl0IGlzIGludm9rZWQuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgVXRpbGl0eVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGF0dGVtcHQuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGBmdW5jYCByZXN1bHQgb3IgZXJyb3Igb2JqZWN0LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAvLyBhdm9pZCB0aHJvd2luZyBlcnJvcnMgZm9yIGludmFsaWQgc2VsZWN0b3JzXG4gICAgICogdmFyIGVsZW1lbnRzID0gXy5hdHRlbXB0KGZ1bmN0aW9uKHNlbGVjdG9yKSB7XG4gICAgICogICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG4gICAgICogfSwgJz5fPicpO1xuICAgICAqXG4gICAgICogaWYgKF8uaXNFcnJvcihlbGVtZW50cykpIHtcbiAgICAgKiAgIGVsZW1lbnRzID0gW107XG4gICAgICogfVxuICAgICAqL1xuICAgIHZhciBhdHRlbXB0ID0gcmVzdFBhcmFtKGZ1bmN0aW9uKGZ1bmMsIGFyZ3MpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBmdW5jLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7XG4gICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgcmV0dXJuIGlzRXJyb3IoZSkgPyBlIDogbmV3IEVycm9yKGUpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgaW52b2tlcyBgZnVuY2Agd2l0aCB0aGUgYHRoaXNgIGJpbmRpbmcgb2YgYHRoaXNBcmdgXG4gICAgICogYW5kIGFyZ3VtZW50cyBvZiB0aGUgY3JlYXRlZCBmdW5jdGlvbi4gSWYgYGZ1bmNgIGlzIGEgcHJvcGVydHkgbmFtZSB0aGVcbiAgICAgKiBjcmVhdGVkIGNhbGxiYWNrIHJldHVybnMgdGhlIHByb3BlcnR5IHZhbHVlIGZvciBhIGdpdmVuIGVsZW1lbnQuIElmIGBmdW5jYFxuICAgICAqIGlzIGFuIG9iamVjdCB0aGUgY3JlYXRlZCBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBjb250YWluXG4gICAgICogdGhlIGVxdWl2YWxlbnQgb2JqZWN0IHByb3BlcnRpZXMsIG90aGVyd2lzZSBpdCByZXR1cm5zIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAYWxpYXMgaXRlcmF0ZWVcbiAgICAgKiBAY2F0ZWdvcnkgVXRpbGl0eVxuICAgICAqIEBwYXJhbSB7Kn0gW2Z1bmM9Xy5pZGVudGl0eV0gVGhlIHZhbHVlIHRvIGNvbnZlcnQgdG8gYSBjYWxsYmFjay5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGZ1bmNgLlxuICAgICAqIEBwYXJhbS0ge09iamVjdH0gW2d1YXJkXSBFbmFibGVzIHVzZSBhcyBhIGNhbGxiYWNrIGZvciBmdW5jdGlvbnMgbGlrZSBgXy5tYXBgLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgY2FsbGJhY2suXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciB1c2VycyA9IFtcbiAgICAgKiAgIHsgJ3VzZXInOiAnYmFybmV5JywgJ2FnZSc6IDM2IH0sXG4gICAgICogICB7ICd1c2VyJzogJ2ZyZWQnLCAgICdhZ2UnOiA0MCB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIC8vIHdyYXAgdG8gY3JlYXRlIGN1c3RvbSBjYWxsYmFjayBzaG9ydGhhbmRzXG4gICAgICogXy5jYWxsYmFjayA9IF8ud3JhcChfLmNhbGxiYWNrLCBmdW5jdGlvbihjYWxsYmFjaywgZnVuYywgdGhpc0FyZykge1xuICAgICAqICAgdmFyIG1hdGNoID0gL14oLis/KV9fKFtnbF10KSguKykkLy5leGVjKGZ1bmMpO1xuICAgICAqICAgaWYgKCFtYXRjaCkge1xuICAgICAqICAgICByZXR1cm4gY2FsbGJhY2soZnVuYywgdGhpc0FyZyk7XG4gICAgICogICB9XG4gICAgICogICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgICogICAgIHJldHVybiBtYXRjaFsyXSA9PSAnZ3QnXG4gICAgICogICAgICAgPyBvYmplY3RbbWF0Y2hbMV1dID4gbWF0Y2hbM11cbiAgICAgKiAgICAgICA6IG9iamVjdFttYXRjaFsxXV0gPCBtYXRjaFszXTtcbiAgICAgKiAgIH07XG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiBfLmZpbHRlcih1c2VycywgJ2FnZV9fZ3QzNicpO1xuICAgICAqIC8vID0+IFt7ICd1c2VyJzogJ2ZyZWQnLCAnYWdlJzogNDAgfV1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjYWxsYmFjayhmdW5jLCB0aGlzQXJnLCBndWFyZCkge1xuICAgICAgaWYgKGd1YXJkICYmIGlzSXRlcmF0ZWVDYWxsKGZ1bmMsIHRoaXNBcmcsIGd1YXJkKSkge1xuICAgICAgICB0aGlzQXJnID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGlzT2JqZWN0TGlrZShmdW5jKVxuICAgICAgICA/IG1hdGNoZXMoZnVuYylcbiAgICAgICAgOiBiYXNlQ2FsbGJhY2soZnVuYywgdGhpc0FyZyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBgdmFsdWVgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFV0aWxpdHlcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byByZXR1cm4gZnJvbSB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0ID0geyAndXNlcic6ICdmcmVkJyB9O1xuICAgICAqIHZhciBnZXR0ZXIgPSBfLmNvbnN0YW50KG9iamVjdCk7XG4gICAgICpcbiAgICAgKiBnZXR0ZXIoKSA9PT0gb2JqZWN0O1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjb25zdGFudCh2YWx1ZSkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIHJldHVybnMgdGhlIGZpcnN0IGFyZ3VtZW50IHByb3ZpZGVkIHRvIGl0LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFV0aWxpdHlcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIEFueSB2YWx1ZS5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyBgdmFsdWVgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0ID0geyAndXNlcic6ICdmcmVkJyB9O1xuICAgICAqXG4gICAgICogXy5pZGVudGl0eShvYmplY3QpID09PSBvYmplY3Q7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlkZW50aXR5KHZhbHVlKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgcGVyZm9ybXMgYSBkZWVwIGNvbXBhcmlzb24gYmV0d2VlbiBhIGdpdmVuIG9iamVjdFxuICAgICAqIGFuZCBgc291cmNlYCwgcmV0dXJuaW5nIGB0cnVlYCBpZiB0aGUgZ2l2ZW4gb2JqZWN0IGhhcyBlcXVpdmFsZW50IHByb3BlcnR5XG4gICAgICogdmFsdWVzLCBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVGhpcyBtZXRob2Qgc3VwcG9ydHMgY29tcGFyaW5nIGFycmF5cywgYm9vbGVhbnMsIGBEYXRlYCBvYmplY3RzLFxuICAgICAqIG51bWJlcnMsIGBPYmplY3RgIG9iamVjdHMsIHJlZ2V4ZXMsIGFuZCBzdHJpbmdzLiBPYmplY3RzIGFyZSBjb21wYXJlZCBieVxuICAgICAqIHRoZWlyIG93biwgbm90IGluaGVyaXRlZCwgZW51bWVyYWJsZSBwcm9wZXJ0aWVzLiBGb3IgY29tcGFyaW5nIGEgc2luZ2xlXG4gICAgICogb3duIG9yIGluaGVyaXRlZCBwcm9wZXJ0eSB2YWx1ZSBzZWUgYF8ubWF0Y2hlc1Byb3BlcnR5YC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBVdGlsaXR5XG4gICAgICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZSBUaGUgb2JqZWN0IG9mIHByb3BlcnR5IHZhbHVlcyB0byBtYXRjaC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIHVzZXJzID0gW1xuICAgICAqICAgeyAndXNlcic6ICdiYXJuZXknLCAnYWdlJzogMzYsICdhY3RpdmUnOiB0cnVlIH0sXG4gICAgICogICB7ICd1c2VyJzogJ2ZyZWQnLCAgICdhZ2UnOiA0MCwgJ2FjdGl2ZSc6IGZhbHNlIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogXy5maWx0ZXIodXNlcnMsIF8ubWF0Y2hlcyh7ICdhZ2UnOiA0MCwgJ2FjdGl2ZSc6IGZhbHNlIH0pKTtcbiAgICAgKiAvLyA9PiBbeyAndXNlcic6ICdmcmVkJywgJ2FnZSc6IDQwLCAnYWN0aXZlJzogZmFsc2UgfV1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBtYXRjaGVzKHNvdXJjZSkge1xuICAgICAgcmV0dXJuIGJhc2VNYXRjaGVzKGJhc2VDbG9uZShzb3VyY2UsIHRydWUpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBjb21wYXJlcyB0aGUgcHJvcGVydHkgdmFsdWUgb2YgYHBhdGhgIG9uIGEgZ2l2ZW5cbiAgICAgKiBvYmplY3QgdG8gYHZhbHVlYC5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBzdXBwb3J0cyBjb21wYXJpbmcgYXJyYXlzLCBib29sZWFucywgYERhdGVgIG9iamVjdHMsXG4gICAgICogbnVtYmVycywgYE9iamVjdGAgb2JqZWN0cywgcmVnZXhlcywgYW5kIHN0cmluZ3MuIE9iamVjdHMgYXJlIGNvbXBhcmVkIGJ5XG4gICAgICogdGhlaXIgb3duLCBub3QgaW5oZXJpdGVkLCBlbnVtZXJhYmxlIHByb3BlcnRpZXMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgVXRpbGl0eVxuICAgICAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBwYXRoIFRoZSBwYXRoIG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG4gICAgICogQHBhcmFtIHsqfSBzcmNWYWx1ZSBUaGUgdmFsdWUgdG8gbWF0Y2guXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciB1c2VycyA9IFtcbiAgICAgKiAgIHsgJ3VzZXInOiAnYmFybmV5JyB9LFxuICAgICAqICAgeyAndXNlcic6ICdmcmVkJyB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIF8uZmluZCh1c2VycywgXy5tYXRjaGVzUHJvcGVydHkoJ3VzZXInLCAnZnJlZCcpKTtcbiAgICAgKiAvLyA9PiB7ICd1c2VyJzogJ2ZyZWQnIH1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBtYXRjaGVzUHJvcGVydHkocGF0aCwgc3JjVmFsdWUpIHtcbiAgICAgIHJldHVybiBiYXNlTWF0Y2hlc1Byb3BlcnR5KHBhdGgsIGJhc2VDbG9uZShzcmNWYWx1ZSwgdHJ1ZSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGludm9rZXMgdGhlIG1ldGhvZCBhdCBgcGF0aGAgb24gYSBnaXZlbiBvYmplY3QuXG4gICAgICogQW55IGFkZGl0aW9uYWwgYXJndW1lbnRzIGFyZSBwcm92aWRlZCB0byB0aGUgaW52b2tlZCBtZXRob2QuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgVXRpbGl0eVxuICAgICAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBwYXRoIFRoZSBwYXRoIG9mIHRoZSBtZXRob2QgdG8gaW52b2tlLlxuICAgICAqIEBwYXJhbSB7Li4uKn0gW2FyZ3NdIFRoZSBhcmd1bWVudHMgdG8gaW52b2tlIHRoZSBtZXRob2Qgd2l0aC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIG9iamVjdHMgPSBbXG4gICAgICogICB7ICdhJzogeyAnYic6IHsgJ2MnOiBfLmNvbnN0YW50KDIpIH0gfSB9LFxuICAgICAqICAgeyAnYSc6IHsgJ2InOiB7ICdjJzogXy5jb25zdGFudCgxKSB9IH0gfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiBfLm1hcChvYmplY3RzLCBfLm1ldGhvZCgnYS5iLmMnKSk7XG4gICAgICogLy8gPT4gWzIsIDFdXG4gICAgICpcbiAgICAgKiBfLmludm9rZShfLnNvcnRCeShvYmplY3RzLCBfLm1ldGhvZChbJ2EnLCAnYicsICdjJ10pKSwgJ2EuYi5jJyk7XG4gICAgICogLy8gPT4gWzEsIDJdXG4gICAgICovXG4gICAgdmFyIG1ldGhvZCA9IHJlc3RQYXJhbShmdW5jdGlvbihwYXRoLCBhcmdzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiBpbnZva2VQYXRoKG9iamVjdCwgcGF0aCwgYXJncyk7XG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogVGhlIG9wcG9zaXRlIG9mIGBfLm1ldGhvZGA7IHRoaXMgbWV0aG9kIGNyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGludm9rZXNcbiAgICAgKiB0aGUgbWV0aG9kIGF0IGEgZ2l2ZW4gcGF0aCBvbiBgb2JqZWN0YC4gQW55IGFkZGl0aW9uYWwgYXJndW1lbnRzIGFyZVxuICAgICAqIHByb3ZpZGVkIHRvIHRoZSBpbnZva2VkIG1ldGhvZC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBVdGlsaXR5XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICAgICAqIEBwYXJhbSB7Li4uKn0gW2FyZ3NdIFRoZSBhcmd1bWVudHMgdG8gaW52b2tlIHRoZSBtZXRob2Qgd2l0aC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGFycmF5ID0gXy50aW1lcygzLCBfLmNvbnN0YW50KSxcbiAgICAgKiAgICAgb2JqZWN0ID0geyAnYSc6IGFycmF5LCAnYic6IGFycmF5LCAnYyc6IGFycmF5IH07XG4gICAgICpcbiAgICAgKiBfLm1hcChbJ2FbMl0nLCAnY1swXSddLCBfLm1ldGhvZE9mKG9iamVjdCkpO1xuICAgICAqIC8vID0+IFsyLCAwXVxuICAgICAqXG4gICAgICogXy5tYXAoW1snYScsICcyJ10sIFsnYycsICcwJ11dLCBfLm1ldGhvZE9mKG9iamVjdCkpO1xuICAgICAqIC8vID0+IFsyLCAwXVxuICAgICAqL1xuICAgIHZhciBtZXRob2RPZiA9IHJlc3RQYXJhbShmdW5jdGlvbihvYmplY3QsIGFyZ3MpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihwYXRoKSB7XG4gICAgICAgIHJldHVybiBpbnZva2VQYXRoKG9iamVjdCwgcGF0aCwgYXJncyk7XG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQWRkcyBhbGwgb3duIGVudW1lcmFibGUgZnVuY3Rpb24gcHJvcGVydGllcyBvZiBhIHNvdXJjZSBvYmplY3QgdG8gdGhlXG4gICAgICogZGVzdGluYXRpb24gb2JqZWN0LiBJZiBgb2JqZWN0YCBpcyBhIGZ1bmN0aW9uIHRoZW4gbWV0aG9kcyBhcmUgYWRkZWQgdG9cbiAgICAgKiBpdHMgcHJvdG90eXBlIGFzIHdlbGwuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVXNlIGBfLnJ1bkluQ29udGV4dGAgdG8gY3JlYXRlIGEgcHJpc3RpbmUgYGxvZGFzaGAgZnVuY3Rpb24gdG9cbiAgICAgKiBhdm9pZCBjb25mbGljdHMgY2F1c2VkIGJ5IG1vZGlmeWluZyB0aGUgb3JpZ2luYWwuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgVXRpbGl0eVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fSBbb2JqZWN0PWxvZGFzaF0gVGhlIGRlc3RpbmF0aW9uIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gc291cmNlIFRoZSBvYmplY3Qgb2YgZnVuY3Rpb25zIHRvIGFkZC5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIFRoZSBvcHRpb25zIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmNoYWluPXRydWVdIFNwZWNpZnkgd2hldGhlciB0aGUgZnVuY3Rpb25zIGFkZGVkXG4gICAgICogIGFyZSBjaGFpbmFibGUuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufE9iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogZnVuY3Rpb24gdm93ZWxzKHN0cmluZykge1xuICAgICAqICAgcmV0dXJuIF8uZmlsdGVyKHN0cmluZywgZnVuY3Rpb24odikge1xuICAgICAqICAgICByZXR1cm4gL1thZWlvdV0vaS50ZXN0KHYpO1xuICAgICAqICAgfSk7XG4gICAgICogfVxuICAgICAqXG4gICAgICogXy5taXhpbih7ICd2b3dlbHMnOiB2b3dlbHMgfSk7XG4gICAgICogXy52b3dlbHMoJ2ZyZWQnKTtcbiAgICAgKiAvLyA9PiBbJ2UnXVxuICAgICAqXG4gICAgICogXygnZnJlZCcpLnZvd2VscygpLnZhbHVlKCk7XG4gICAgICogLy8gPT4gWydlJ11cbiAgICAgKlxuICAgICAqIF8ubWl4aW4oeyAndm93ZWxzJzogdm93ZWxzIH0sIHsgJ2NoYWluJzogZmFsc2UgfSk7XG4gICAgICogXygnZnJlZCcpLnZvd2VscygpO1xuICAgICAqIC8vID0+IFsnZSddXG4gICAgICovXG4gICAgZnVuY3Rpb24gbWl4aW4ob2JqZWN0LCBzb3VyY2UsIG9wdGlvbnMpIHtcbiAgICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgICAgdmFyIGlzT2JqID0gaXNPYmplY3Qoc291cmNlKSxcbiAgICAgICAgICAgIHByb3BzID0gaXNPYmogPyBrZXlzKHNvdXJjZSkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBtZXRob2ROYW1lcyA9IChwcm9wcyAmJiBwcm9wcy5sZW5ndGgpID8gYmFzZUZ1bmN0aW9ucyhzb3VyY2UsIHByb3BzKSA6IHVuZGVmaW5lZDtcblxuICAgICAgICBpZiAoIShtZXRob2ROYW1lcyA/IG1ldGhvZE5hbWVzLmxlbmd0aCA6IGlzT2JqKSkge1xuICAgICAgICAgIG1ldGhvZE5hbWVzID0gZmFsc2U7XG4gICAgICAgICAgb3B0aW9ucyA9IHNvdXJjZTtcbiAgICAgICAgICBzb3VyY2UgPSBvYmplY3Q7XG4gICAgICAgICAgb2JqZWN0ID0gdGhpcztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCFtZXRob2ROYW1lcykge1xuICAgICAgICBtZXRob2ROYW1lcyA9IGJhc2VGdW5jdGlvbnMoc291cmNlLCBrZXlzKHNvdXJjZSkpO1xuICAgICAgfVxuICAgICAgdmFyIGNoYWluID0gdHJ1ZSxcbiAgICAgICAgICBpbmRleCA9IC0xLFxuICAgICAgICAgIGlzRnVuYyA9IGlzRnVuY3Rpb24ob2JqZWN0KSxcbiAgICAgICAgICBsZW5ndGggPSBtZXRob2ROYW1lcy5sZW5ndGg7XG5cbiAgICAgIGlmIChvcHRpb25zID09PSBmYWxzZSkge1xuICAgICAgICBjaGFpbiA9IGZhbHNlO1xuICAgICAgfSBlbHNlIGlmIChpc09iamVjdChvcHRpb25zKSAmJiAnY2hhaW4nIGluIG9wdGlvbnMpIHtcbiAgICAgICAgY2hhaW4gPSBvcHRpb25zLmNoYWluO1xuICAgICAgfVxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgdmFyIG1ldGhvZE5hbWUgPSBtZXRob2ROYW1lc1tpbmRleF0sXG4gICAgICAgICAgICBmdW5jID0gc291cmNlW21ldGhvZE5hbWVdO1xuXG4gICAgICAgIG9iamVjdFttZXRob2ROYW1lXSA9IGZ1bmM7XG4gICAgICAgIGlmIChpc0Z1bmMpIHtcbiAgICAgICAgICBvYmplY3QucHJvdG90eXBlW21ldGhvZE5hbWVdID0gKGZ1bmN0aW9uKGZ1bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgdmFyIGNoYWluQWxsID0gdGhpcy5fX2NoYWluX187XG4gICAgICAgICAgICAgIGlmIChjaGFpbiB8fCBjaGFpbkFsbCkge1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBvYmplY3QodGhpcy5fX3dyYXBwZWRfXyksXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbnMgPSByZXN1bHQuX19hY3Rpb25zX18gPSBhcnJheUNvcHkodGhpcy5fX2FjdGlvbnNfXyk7XG5cbiAgICAgICAgICAgICAgICBhY3Rpb25zLnB1c2goeyAnZnVuYyc6IGZ1bmMsICdhcmdzJzogYXJndW1lbnRzLCAndGhpc0FyZyc6IG9iamVjdCB9KTtcbiAgICAgICAgICAgICAgICByZXN1bHQuX19jaGFpbl9fID0gY2hhaW5BbGw7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXR1cm4gZnVuYy5hcHBseShvYmplY3QsIGFycmF5UHVzaChbdGhpcy52YWx1ZSgpXSwgYXJndW1lbnRzKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0oZnVuYykpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gb2JqZWN0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldmVydHMgdGhlIGBfYCB2YXJpYWJsZSB0byBpdHMgcHJldmlvdXMgdmFsdWUgYW5kIHJldHVybnMgYSByZWZlcmVuY2UgdG9cbiAgICAgKiB0aGUgYGxvZGFzaGAgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgVXRpbGl0eVxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgYGxvZGFzaGAgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBsb2Rhc2ggPSBfLm5vQ29uZmxpY3QoKTtcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBub0NvbmZsaWN0KCkge1xuICAgICAgcm9vdC5fID0gb2xkRGFzaDtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgbm8tb3BlcmF0aW9uIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBgdW5kZWZpbmVkYCByZWdhcmRsZXNzIG9mIHRoZVxuICAgICAqIGFyZ3VtZW50cyBpdCByZWNlaXZlcy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBVdGlsaXR5XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBvYmplY3QgPSB7ICd1c2VyJzogJ2ZyZWQnIH07XG4gICAgICpcbiAgICAgKiBfLm5vb3Aob2JqZWN0KSA9PT0gdW5kZWZpbmVkO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBub29wKCkge1xuICAgICAgLy8gTm8gb3BlcmF0aW9uIHBlcmZvcm1lZC5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBwcm9wZXJ0eSB2YWx1ZSBhdCBgcGF0aGAgb24gYVxuICAgICAqIGdpdmVuIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBVdGlsaXR5XG4gICAgICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIG9iamVjdHMgPSBbXG4gICAgICogICB7ICdhJzogeyAnYic6IHsgJ2MnOiAyIH0gfSB9LFxuICAgICAqICAgeyAnYSc6IHsgJ2InOiB7ICdjJzogMSB9IH0gfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiBfLm1hcChvYmplY3RzLCBfLnByb3BlcnR5KCdhLmIuYycpKTtcbiAgICAgKiAvLyA9PiBbMiwgMV1cbiAgICAgKlxuICAgICAqIF8ucGx1Y2soXy5zb3J0Qnkob2JqZWN0cywgXy5wcm9wZXJ0eShbJ2EnLCAnYicsICdjJ10pKSwgJ2EuYi5jJyk7XG4gICAgICogLy8gPT4gWzEsIDJdXG4gICAgICovXG4gICAgZnVuY3Rpb24gcHJvcGVydHkocGF0aCkge1xuICAgICAgcmV0dXJuIGlzS2V5KHBhdGgpID8gYmFzZVByb3BlcnR5KHBhdGgpIDogYmFzZVByb3BlcnR5RGVlcChwYXRoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgb3Bwb3NpdGUgb2YgYF8ucHJvcGVydHlgOyB0aGlzIG1ldGhvZCBjcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zXG4gICAgICogdGhlIHByb3BlcnR5IHZhbHVlIGF0IGEgZ2l2ZW4gcGF0aCBvbiBgb2JqZWN0YC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBVdGlsaXR5XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgYXJyYXkgPSBbMCwgMSwgMl0sXG4gICAgICogICAgIG9iamVjdCA9IHsgJ2EnOiBhcnJheSwgJ2InOiBhcnJheSwgJ2MnOiBhcnJheSB9O1xuICAgICAqXG4gICAgICogXy5tYXAoWydhWzJdJywgJ2NbMF0nXSwgXy5wcm9wZXJ0eU9mKG9iamVjdCkpO1xuICAgICAqIC8vID0+IFsyLCAwXVxuICAgICAqXG4gICAgICogXy5tYXAoW1snYScsICcyJ10sIFsnYycsICcwJ11dLCBfLnByb3BlcnR5T2Yob2JqZWN0KSk7XG4gICAgICogLy8gPT4gWzIsIDBdXG4gICAgICovXG4gICAgZnVuY3Rpb24gcHJvcGVydHlPZihvYmplY3QpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihwYXRoKSB7XG4gICAgICAgIHJldHVybiBiYXNlR2V0KG9iamVjdCwgdG9QYXRoKHBhdGgpLCBwYXRoICsgJycpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIG51bWJlcnMgKHBvc2l0aXZlIGFuZC9vciBuZWdhdGl2ZSkgcHJvZ3Jlc3NpbmcgZnJvbVxuICAgICAqIGBzdGFydGAgdXAgdG8sIGJ1dCBub3QgaW5jbHVkaW5nLCBgZW5kYC4gSWYgYGVuZGAgaXMgbm90IHNwZWNpZmllZCBpdCBpc1xuICAgICAqIHNldCB0byBgc3RhcnRgIHdpdGggYHN0YXJ0YCB0aGVuIHNldCB0byBgMGAuIElmIGBlbmRgIGlzIGxlc3MgdGhhbiBgc3RhcnRgXG4gICAgICogYSB6ZXJvLWxlbmd0aCByYW5nZSBpcyBjcmVhdGVkIHVubGVzcyBhIG5lZ2F0aXZlIGBzdGVwYCBpcyBzcGVjaWZpZWQuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgVXRpbGl0eVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbc3RhcnQ9MF0gVGhlIHN0YXJ0IG9mIHRoZSByYW5nZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZW5kIFRoZSBlbmQgb2YgdGhlIHJhbmdlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbc3RlcD0xXSBUaGUgdmFsdWUgdG8gaW5jcmVtZW50IG9yIGRlY3JlbWVudCBieS5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBhcnJheSBvZiBudW1iZXJzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnJhbmdlKDQpO1xuICAgICAqIC8vID0+IFswLCAxLCAyLCAzXVxuICAgICAqXG4gICAgICogXy5yYW5nZSgxLCA1KTtcbiAgICAgKiAvLyA9PiBbMSwgMiwgMywgNF1cbiAgICAgKlxuICAgICAqIF8ucmFuZ2UoMCwgMjAsIDUpO1xuICAgICAqIC8vID0+IFswLCA1LCAxMCwgMTVdXG4gICAgICpcbiAgICAgKiBfLnJhbmdlKDAsIC00LCAtMSk7XG4gICAgICogLy8gPT4gWzAsIC0xLCAtMiwgLTNdXG4gICAgICpcbiAgICAgKiBfLnJhbmdlKDEsIDQsIDApO1xuICAgICAqIC8vID0+IFsxLCAxLCAxXVxuICAgICAqXG4gICAgICogXy5yYW5nZSgwKTtcbiAgICAgKiAvLyA9PiBbXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJhbmdlKHN0YXJ0LCBlbmQsIHN0ZXApIHtcbiAgICAgIGlmIChzdGVwICYmIGlzSXRlcmF0ZWVDYWxsKHN0YXJ0LCBlbmQsIHN0ZXApKSB7XG4gICAgICAgIGVuZCA9IHN0ZXAgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICBzdGFydCA9ICtzdGFydCB8fCAwO1xuICAgICAgc3RlcCA9IHN0ZXAgPT0gbnVsbCA/IDEgOiAoK3N0ZXAgfHwgMCk7XG5cbiAgICAgIGlmIChlbmQgPT0gbnVsbCkge1xuICAgICAgICBlbmQgPSBzdGFydDtcbiAgICAgICAgc3RhcnQgPSAwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZW5kID0gK2VuZCB8fCAwO1xuICAgICAgfVxuICAgICAgLy8gVXNlIGBBcnJheShsZW5ndGgpYCBzbyBlbmdpbmVzIGxpa2UgQ2hha3JhIGFuZCBWOCBhdm9pZCBzbG93ZXIgbW9kZXMuXG4gICAgICAvLyBTZWUgaHR0cHM6Ly95b3V0dS5iZS9YQXFJcEdVOFpaayN0PTE3bTI1cyBmb3IgbW9yZSBkZXRhaWxzLlxuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gbmF0aXZlTWF4KG5hdGl2ZUNlaWwoKGVuZCAtIHN0YXJ0KSAvIChzdGVwIHx8IDEpKSwgMCksXG4gICAgICAgICAgcmVzdWx0ID0gQXJyYXkobGVuZ3RoKTtcblxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgcmVzdWx0W2luZGV4XSA9IHN0YXJ0O1xuICAgICAgICBzdGFydCArPSBzdGVwO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbnZva2VzIHRoZSBpdGVyYXRlZSBmdW5jdGlvbiBgbmAgdGltZXMsIHJldHVybmluZyBhbiBhcnJheSBvZiB0aGUgcmVzdWx0c1xuICAgICAqIG9mIGVhY2ggaW52b2NhdGlvbi4gVGhlIGBpdGVyYXRlZWAgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGhcbiAgICAgKiBvbmUgYXJndW1lbnQ7IChpbmRleCkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgVXRpbGl0eVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBuIFRoZSBudW1iZXIgb2YgdGltZXMgdG8gaW52b2tlIGBpdGVyYXRlZWAuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2l0ZXJhdGVlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBpdGVyYXRlZWAuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiByZXN1bHRzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgZGljZVJvbGxzID0gXy50aW1lcygzLCBfLnBhcnRpYWwoXy5yYW5kb20sIDEsIDYsIGZhbHNlKSk7XG4gICAgICogLy8gPT4gWzMsIDYsIDRdXG4gICAgICpcbiAgICAgKiBfLnRpbWVzKDMsIGZ1bmN0aW9uKG4pIHtcbiAgICAgKiAgIG1hZ2UuY2FzdFNwZWxsKG4pO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IGludm9rZXMgYG1hZ2UuY2FzdFNwZWxsKG4pYCB0aHJlZSB0aW1lcyB3aXRoIGBuYCBvZiBgMGAsIGAxYCwgYW5kIGAyYFxuICAgICAqXG4gICAgICogXy50aW1lcygzLCBmdW5jdGlvbihuKSB7XG4gICAgICogICB0aGlzLmNhc3Qobik7XG4gICAgICogfSwgbWFnZSk7XG4gICAgICogLy8gPT4gYWxzbyBpbnZva2VzIGBtYWdlLmNhc3RTcGVsbChuKWAgdGhyZWUgdGltZXNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiB0aW1lcyhuLCBpdGVyYXRlZSwgdGhpc0FyZykge1xuICAgICAgbiA9IG5hdGl2ZUZsb29yKG4pO1xuXG4gICAgICAvLyBFeGl0IGVhcmx5IHRvIGF2b2lkIGEgSlNDIEpJVCBidWcgaW4gU2FmYXJpIDhcbiAgICAgIC8vIHdoZXJlIGBBcnJheSgwKWAgaXMgdHJlYXRlZCBhcyBgQXJyYXkoMSlgLlxuICAgICAgaWYgKG4gPCAxIHx8ICFuYXRpdmVJc0Zpbml0ZShuKSkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICByZXN1bHQgPSBBcnJheShuYXRpdmVNaW4obiwgTUFYX0FSUkFZX0xFTkdUSCkpO1xuXG4gICAgICBpdGVyYXRlZSA9IGJpbmRDYWxsYmFjayhpdGVyYXRlZSwgdGhpc0FyZywgMSk7XG4gICAgICB3aGlsZSAoKytpbmRleCA8IG4pIHtcbiAgICAgICAgaWYgKGluZGV4IDwgTUFYX0FSUkFZX0xFTkdUSCkge1xuICAgICAgICAgIHJlc3VsdFtpbmRleF0gPSBpdGVyYXRlZShpbmRleCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXRlcmF0ZWUoaW5kZXgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlcyBhIHVuaXF1ZSBJRC4gSWYgYHByZWZpeGAgaXMgcHJvdmlkZWQgdGhlIElEIGlzIGFwcGVuZGVkIHRvIGl0LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFV0aWxpdHlcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3ByZWZpeF0gVGhlIHZhbHVlIHRvIHByZWZpeCB0aGUgSUQgd2l0aC5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSB1bmlxdWUgSUQuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8udW5pcXVlSWQoJ2NvbnRhY3RfJyk7XG4gICAgICogLy8gPT4gJ2NvbnRhY3RfMTA0J1xuICAgICAqXG4gICAgICogXy51bmlxdWVJZCgpO1xuICAgICAqIC8vID0+ICcxMDUnXG4gICAgICovXG4gICAgZnVuY3Rpb24gdW5pcXVlSWQocHJlZml4KSB7XG4gICAgICB2YXIgaWQgPSArK2lkQ291bnRlcjtcbiAgICAgIHJldHVybiBiYXNlVG9TdHJpbmcocHJlZml4KSArIGlkO1xuICAgIH1cblxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgIC8qKlxuICAgICAqIEFkZHMgdHdvIG51bWJlcnMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgTWF0aFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBhdWdlbmQgVGhlIGZpcnN0IG51bWJlciB0byBhZGQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGFkZGVuZCBUaGUgc2Vjb25kIG51bWJlciB0byBhZGQuXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgc3VtLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmFkZCg2LCA0KTtcbiAgICAgKiAvLyA9PiAxMFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFkZChhdWdlbmQsIGFkZGVuZCkge1xuICAgICAgcmV0dXJuICgrYXVnZW5kIHx8IDApICsgKCthZGRlbmQgfHwgMCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlcyBgbmAgcm91bmRlZCB1cCB0byBgcHJlY2lzaW9uYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBNYXRoXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG4gVGhlIG51bWJlciB0byByb3VuZCB1cC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3ByZWNpc2lvbj0wXSBUaGUgcHJlY2lzaW9uIHRvIHJvdW5kIHVwIHRvLlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHJvdW5kZWQgdXAgbnVtYmVyLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmNlaWwoNC4wMDYpO1xuICAgICAqIC8vID0+IDVcbiAgICAgKlxuICAgICAqIF8uY2VpbCg2LjAwNCwgMik7XG4gICAgICogLy8gPT4gNi4wMVxuICAgICAqXG4gICAgICogXy5jZWlsKDYwNDAsIC0yKTtcbiAgICAgKiAvLyA9PiA2MTAwXG4gICAgICovXG4gICAgdmFyIGNlaWwgPSBjcmVhdGVSb3VuZCgnY2VpbCcpO1xuXG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlcyBgbmAgcm91bmRlZCBkb3duIHRvIGBwcmVjaXNpb25gLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE1hdGhcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbiBUaGUgbnVtYmVyIHRvIHJvdW5kIGRvd24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtwcmVjaXNpb249MF0gVGhlIHByZWNpc2lvbiB0byByb3VuZCBkb3duIHRvLlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHJvdW5kZWQgZG93biBudW1iZXIuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uZmxvb3IoNC4wMDYpO1xuICAgICAqIC8vID0+IDRcbiAgICAgKlxuICAgICAqIF8uZmxvb3IoMC4wNDYsIDIpO1xuICAgICAqIC8vID0+IDAuMDRcbiAgICAgKlxuICAgICAqIF8uZmxvb3IoNDA2MCwgLTIpO1xuICAgICAqIC8vID0+IDQwMDBcbiAgICAgKi9cbiAgICB2YXIgZmxvb3IgPSBjcmVhdGVSb3VuZCgnZmxvb3InKTtcblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIG1heGltdW0gdmFsdWUgb2YgYGNvbGxlY3Rpb25gLiBJZiBgY29sbGVjdGlvbmAgaXMgZW1wdHkgb3IgZmFsc2V5XG4gICAgICogYC1JbmZpbml0eWAgaXMgcmV0dXJuZWQuIElmIGFuIGl0ZXJhdGVlIGZ1bmN0aW9uIGlzIHByb3ZpZGVkIGl0IGlzIGludm9rZWRcbiAgICAgKiBmb3IgZWFjaCB2YWx1ZSBpbiBgY29sbGVjdGlvbmAgdG8gZ2VuZXJhdGUgdGhlIGNyaXRlcmlvbiBieSB3aGljaCB0aGUgdmFsdWVcbiAgICAgKiBpcyByYW5rZWQuIFRoZSBgaXRlcmF0ZWVgIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIHRocmVlXG4gICAgICogYXJndW1lbnRzOiAodmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKS5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGl0ZXJhdGVlYCB0aGUgY3JlYXRlZCBgXy5wcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGEgdmFsdWUgaXMgYWxzbyBwcm92aWRlZCBmb3IgYHRoaXNBcmdgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNQcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIGEgbWF0Y2hpbmcgcHJvcGVydHlcbiAgICAgKiB2YWx1ZSwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgaXRlcmF0ZWVgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNgIHN0eWxlXG4gICAgICogY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW5cbiAgICAgKiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBNYXRoXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtpdGVyYXRlZV0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGl0ZXJhdGVlYC5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgbWF4aW11bSB2YWx1ZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5tYXgoWzQsIDIsIDgsIDZdKTtcbiAgICAgKiAvLyA9PiA4XG4gICAgICpcbiAgICAgKiBfLm1heChbXSk7XG4gICAgICogLy8gPT4gLUluZmluaXR5XG4gICAgICpcbiAgICAgKiB2YXIgdXNlcnMgPSBbXG4gICAgICogICB7ICd1c2VyJzogJ2Jhcm5leScsICdhZ2UnOiAzNiB9LFxuICAgICAqICAgeyAndXNlcic6ICdmcmVkJywgICAnYWdlJzogNDAgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiBfLm1heCh1c2VycywgZnVuY3Rpb24oY2hyKSB7XG4gICAgICogICByZXR1cm4gY2hyLmFnZTtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiB7ICd1c2VyJzogJ2ZyZWQnLCAnYWdlJzogNDAgfVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBfLnByb3BlcnR5YCBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLm1heCh1c2VycywgJ2FnZScpO1xuICAgICAqIC8vID0+IHsgJ3VzZXInOiAnZnJlZCcsICdhZ2UnOiA0MCB9XG4gICAgICovXG4gICAgdmFyIG1heCA9IGNyZWF0ZUV4dHJlbXVtKGd0LCBORUdBVElWRV9JTkZJTklUWSk7XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBtaW5pbXVtIHZhbHVlIG9mIGBjb2xsZWN0aW9uYC4gSWYgYGNvbGxlY3Rpb25gIGlzIGVtcHR5IG9yIGZhbHNleVxuICAgICAqIGBJbmZpbml0eWAgaXMgcmV0dXJuZWQuIElmIGFuIGl0ZXJhdGVlIGZ1bmN0aW9uIGlzIHByb3ZpZGVkIGl0IGlzIGludm9rZWRcbiAgICAgKiBmb3IgZWFjaCB2YWx1ZSBpbiBgY29sbGVjdGlvbmAgdG8gZ2VuZXJhdGUgdGhlIGNyaXRlcmlvbiBieSB3aGljaCB0aGUgdmFsdWVcbiAgICAgKiBpcyByYW5rZWQuIFRoZSBgaXRlcmF0ZWVgIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIHRocmVlXG4gICAgICogYXJndW1lbnRzOiAodmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKS5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGl0ZXJhdGVlYCB0aGUgY3JlYXRlZCBgXy5wcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGEgdmFsdWUgaXMgYWxzbyBwcm92aWRlZCBmb3IgYHRoaXNBcmdgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNQcm9wZXJ0eWBcbiAgICAgKiBzdHlsZSBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIGEgbWF0Y2hpbmcgcHJvcGVydHlcbiAgICAgKiB2YWx1ZSwgZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgaXRlcmF0ZWVgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNgIHN0eWxlXG4gICAgICogY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW5cbiAgICAgKiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBNYXRoXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtpdGVyYXRlZV0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGl0ZXJhdGVlYC5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgbWluaW11bSB2YWx1ZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5taW4oWzQsIDIsIDgsIDZdKTtcbiAgICAgKiAvLyA9PiAyXG4gICAgICpcbiAgICAgKiBfLm1pbihbXSk7XG4gICAgICogLy8gPT4gSW5maW5pdHlcbiAgICAgKlxuICAgICAqIHZhciB1c2VycyA9IFtcbiAgICAgKiAgIHsgJ3VzZXInOiAnYmFybmV5JywgJ2FnZSc6IDM2IH0sXG4gICAgICogICB7ICd1c2VyJzogJ2ZyZWQnLCAgICdhZ2UnOiA0MCB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIF8ubWluKHVzZXJzLCBmdW5jdGlvbihjaHIpIHtcbiAgICAgKiAgIHJldHVybiBjaHIuYWdlO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IHsgJ3VzZXInOiAnYmFybmV5JywgJ2FnZSc6IDM2IH1cbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5wcm9wZXJ0eWAgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5taW4odXNlcnMsICdhZ2UnKTtcbiAgICAgKiAvLyA9PiB7ICd1c2VyJzogJ2Jhcm5leScsICdhZ2UnOiAzNiB9XG4gICAgICovXG4gICAgdmFyIG1pbiA9IGNyZWF0ZUV4dHJlbXVtKGx0LCBQT1NJVElWRV9JTkZJTklUWSk7XG5cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGVzIGBuYCByb3VuZGVkIHRvIGBwcmVjaXNpb25gLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE1hdGhcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbiBUaGUgbnVtYmVyIHRvIHJvdW5kLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbcHJlY2lzaW9uPTBdIFRoZSBwcmVjaXNpb24gdG8gcm91bmQgdG8uXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgcm91bmRlZCBudW1iZXIuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ucm91bmQoNC4wMDYpO1xuICAgICAqIC8vID0+IDRcbiAgICAgKlxuICAgICAqIF8ucm91bmQoNC4wMDYsIDIpO1xuICAgICAqIC8vID0+IDQuMDFcbiAgICAgKlxuICAgICAqIF8ucm91bmQoNDA2MCwgLTIpO1xuICAgICAqIC8vID0+IDQxMDBcbiAgICAgKi9cbiAgICB2YXIgcm91bmQgPSBjcmVhdGVSb3VuZCgncm91bmQnKTtcblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHN1bSBvZiB0aGUgdmFsdWVzIGluIGBjb2xsZWN0aW9uYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBNYXRoXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtpdGVyYXRlZV0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGl0ZXJhdGVlYC5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBzdW0uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uc3VtKFs0LCA2XSk7XG4gICAgICogLy8gPT4gMTBcbiAgICAgKlxuICAgICAqIF8uc3VtKHsgJ2EnOiA0LCAnYic6IDYgfSk7XG4gICAgICogLy8gPT4gMTBcbiAgICAgKlxuICAgICAqIHZhciBvYmplY3RzID0gW1xuICAgICAqICAgeyAnbic6IDQgfSxcbiAgICAgKiAgIHsgJ24nOiA2IH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogXy5zdW0ob2JqZWN0cywgZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgICogICByZXR1cm4gb2JqZWN0Lm47XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gMTBcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgXy5wcm9wZXJ0eWAgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5zdW0ob2JqZWN0cywgJ24nKTtcbiAgICAgKiAvLyA9PiAxMFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHN1bShjb2xsZWN0aW9uLCBpdGVyYXRlZSwgdGhpc0FyZykge1xuICAgICAgaWYgKHRoaXNBcmcgJiYgaXNJdGVyYXRlZUNhbGwoY29sbGVjdGlvbiwgaXRlcmF0ZWUsIHRoaXNBcmcpKSB7XG4gICAgICAgIGl0ZXJhdGVlID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgaXRlcmF0ZWUgPSBnZXRDYWxsYmFjayhpdGVyYXRlZSwgdGhpc0FyZywgMyk7XG4gICAgICByZXR1cm4gaXRlcmF0ZWUubGVuZ3RoID09IDFcbiAgICAgICAgPyBhcnJheVN1bShpc0FycmF5KGNvbGxlY3Rpb24pID8gY29sbGVjdGlvbiA6IHRvSXRlcmFibGUoY29sbGVjdGlvbiksIGl0ZXJhdGVlKVxuICAgICAgICA6IGJhc2VTdW0oY29sbGVjdGlvbiwgaXRlcmF0ZWUpO1xuICAgIH1cblxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgIC8vIEVuc3VyZSB3cmFwcGVycyBhcmUgaW5zdGFuY2VzIG9mIGBiYXNlTG9kYXNoYC5cbiAgICBsb2Rhc2gucHJvdG90eXBlID0gYmFzZUxvZGFzaC5wcm90b3R5cGU7XG5cbiAgICBMb2Rhc2hXcmFwcGVyLnByb3RvdHlwZSA9IGJhc2VDcmVhdGUoYmFzZUxvZGFzaC5wcm90b3R5cGUpO1xuICAgIExvZGFzaFdyYXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTG9kYXNoV3JhcHBlcjtcblxuICAgIExhenlXcmFwcGVyLnByb3RvdHlwZSA9IGJhc2VDcmVhdGUoYmFzZUxvZGFzaC5wcm90b3R5cGUpO1xuICAgIExhenlXcmFwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IExhenlXcmFwcGVyO1xuXG4gICAgLy8gQWRkIGZ1bmN0aW9ucyB0byB0aGUgYE1hcGAgY2FjaGUuXG4gICAgTWFwQ2FjaGUucHJvdG90eXBlWydkZWxldGUnXSA9IG1hcERlbGV0ZTtcbiAgICBNYXBDYWNoZS5wcm90b3R5cGUuZ2V0ID0gbWFwR2V0O1xuICAgIE1hcENhY2hlLnByb3RvdHlwZS5oYXMgPSBtYXBIYXM7XG4gICAgTWFwQ2FjaGUucHJvdG90eXBlLnNldCA9IG1hcFNldDtcblxuICAgIC8vIEFkZCBmdW5jdGlvbnMgdG8gdGhlIGBTZXRgIGNhY2hlLlxuICAgIFNldENhY2hlLnByb3RvdHlwZS5wdXNoID0gY2FjaGVQdXNoO1xuXG4gICAgLy8gQXNzaWduIGNhY2hlIHRvIGBfLm1lbW9pemVgLlxuICAgIG1lbW9pemUuQ2FjaGUgPSBNYXBDYWNoZTtcblxuICAgIC8vIEFkZCBmdW5jdGlvbnMgdGhhdCByZXR1cm4gd3JhcHBlZCB2YWx1ZXMgd2hlbiBjaGFpbmluZy5cbiAgICBsb2Rhc2guYWZ0ZXIgPSBhZnRlcjtcbiAgICBsb2Rhc2guYXJ5ID0gYXJ5O1xuICAgIGxvZGFzaC5hc3NpZ24gPSBhc3NpZ247XG4gICAgbG9kYXNoLmF0ID0gYXQ7XG4gICAgbG9kYXNoLmJlZm9yZSA9IGJlZm9yZTtcbiAgICBsb2Rhc2guYmluZCA9IGJpbmQ7XG4gICAgbG9kYXNoLmJpbmRBbGwgPSBiaW5kQWxsO1xuICAgIGxvZGFzaC5iaW5kS2V5ID0gYmluZEtleTtcbiAgICBsb2Rhc2guY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICBsb2Rhc2guY2hhaW4gPSBjaGFpbjtcbiAgICBsb2Rhc2guY2h1bmsgPSBjaHVuaztcbiAgICBsb2Rhc2guY29tcGFjdCA9IGNvbXBhY3Q7XG4gICAgbG9kYXNoLmNvbnN0YW50ID0gY29uc3RhbnQ7XG4gICAgbG9kYXNoLmNvdW50QnkgPSBjb3VudEJ5O1xuICAgIGxvZGFzaC5jcmVhdGUgPSBjcmVhdGU7XG4gICAgbG9kYXNoLmN1cnJ5ID0gY3Vycnk7XG4gICAgbG9kYXNoLmN1cnJ5UmlnaHQgPSBjdXJyeVJpZ2h0O1xuICAgIGxvZGFzaC5kZWJvdW5jZSA9IGRlYm91bmNlO1xuICAgIGxvZGFzaC5kZWZhdWx0cyA9IGRlZmF1bHRzO1xuICAgIGxvZGFzaC5kZWZhdWx0c0RlZXAgPSBkZWZhdWx0c0RlZXA7XG4gICAgbG9kYXNoLmRlZmVyID0gZGVmZXI7XG4gICAgbG9kYXNoLmRlbGF5ID0gZGVsYXk7XG4gICAgbG9kYXNoLmRpZmZlcmVuY2UgPSBkaWZmZXJlbmNlO1xuICAgIGxvZGFzaC5kcm9wID0gZHJvcDtcbiAgICBsb2Rhc2guZHJvcFJpZ2h0ID0gZHJvcFJpZ2h0O1xuICAgIGxvZGFzaC5kcm9wUmlnaHRXaGlsZSA9IGRyb3BSaWdodFdoaWxlO1xuICAgIGxvZGFzaC5kcm9wV2hpbGUgPSBkcm9wV2hpbGU7XG4gICAgbG9kYXNoLmZpbGwgPSBmaWxsO1xuICAgIGxvZGFzaC5maWx0ZXIgPSBmaWx0ZXI7XG4gICAgbG9kYXNoLmZsYXR0ZW4gPSBmbGF0dGVuO1xuICAgIGxvZGFzaC5mbGF0dGVuRGVlcCA9IGZsYXR0ZW5EZWVwO1xuICAgIGxvZGFzaC5mbG93ID0gZmxvdztcbiAgICBsb2Rhc2guZmxvd1JpZ2h0ID0gZmxvd1JpZ2h0O1xuICAgIGxvZGFzaC5mb3JFYWNoID0gZm9yRWFjaDtcbiAgICBsb2Rhc2guZm9yRWFjaFJpZ2h0ID0gZm9yRWFjaFJpZ2h0O1xuICAgIGxvZGFzaC5mb3JJbiA9IGZvckluO1xuICAgIGxvZGFzaC5mb3JJblJpZ2h0ID0gZm9ySW5SaWdodDtcbiAgICBsb2Rhc2guZm9yT3duID0gZm9yT3duO1xuICAgIGxvZGFzaC5mb3JPd25SaWdodCA9IGZvck93blJpZ2h0O1xuICAgIGxvZGFzaC5mdW5jdGlvbnMgPSBmdW5jdGlvbnM7XG4gICAgbG9kYXNoLmdyb3VwQnkgPSBncm91cEJ5O1xuICAgIGxvZGFzaC5pbmRleEJ5ID0gaW5kZXhCeTtcbiAgICBsb2Rhc2guaW5pdGlhbCA9IGluaXRpYWw7XG4gICAgbG9kYXNoLmludGVyc2VjdGlvbiA9IGludGVyc2VjdGlvbjtcbiAgICBsb2Rhc2guaW52ZXJ0ID0gaW52ZXJ0O1xuICAgIGxvZGFzaC5pbnZva2UgPSBpbnZva2U7XG4gICAgbG9kYXNoLmtleXMgPSBrZXlzO1xuICAgIGxvZGFzaC5rZXlzSW4gPSBrZXlzSW47XG4gICAgbG9kYXNoLm1hcCA9IG1hcDtcbiAgICBsb2Rhc2gubWFwS2V5cyA9IG1hcEtleXM7XG4gICAgbG9kYXNoLm1hcFZhbHVlcyA9IG1hcFZhbHVlcztcbiAgICBsb2Rhc2gubWF0Y2hlcyA9IG1hdGNoZXM7XG4gICAgbG9kYXNoLm1hdGNoZXNQcm9wZXJ0eSA9IG1hdGNoZXNQcm9wZXJ0eTtcbiAgICBsb2Rhc2gubWVtb2l6ZSA9IG1lbW9pemU7XG4gICAgbG9kYXNoLm1lcmdlID0gbWVyZ2U7XG4gICAgbG9kYXNoLm1ldGhvZCA9IG1ldGhvZDtcbiAgICBsb2Rhc2gubWV0aG9kT2YgPSBtZXRob2RPZjtcbiAgICBsb2Rhc2gubWl4aW4gPSBtaXhpbjtcbiAgICBsb2Rhc2gubW9kQXJncyA9IG1vZEFyZ3M7XG4gICAgbG9kYXNoLm5lZ2F0ZSA9IG5lZ2F0ZTtcbiAgICBsb2Rhc2gub21pdCA9IG9taXQ7XG4gICAgbG9kYXNoLm9uY2UgPSBvbmNlO1xuICAgIGxvZGFzaC5wYWlycyA9IHBhaXJzO1xuICAgIGxvZGFzaC5wYXJ0aWFsID0gcGFydGlhbDtcbiAgICBsb2Rhc2gucGFydGlhbFJpZ2h0ID0gcGFydGlhbFJpZ2h0O1xuICAgIGxvZGFzaC5wYXJ0aXRpb24gPSBwYXJ0aXRpb247XG4gICAgbG9kYXNoLnBpY2sgPSBwaWNrO1xuICAgIGxvZGFzaC5wbHVjayA9IHBsdWNrO1xuICAgIGxvZGFzaC5wcm9wZXJ0eSA9IHByb3BlcnR5O1xuICAgIGxvZGFzaC5wcm9wZXJ0eU9mID0gcHJvcGVydHlPZjtcbiAgICBsb2Rhc2gucHVsbCA9IHB1bGw7XG4gICAgbG9kYXNoLnB1bGxBdCA9IHB1bGxBdDtcbiAgICBsb2Rhc2gucmFuZ2UgPSByYW5nZTtcbiAgICBsb2Rhc2gucmVhcmcgPSByZWFyZztcbiAgICBsb2Rhc2gucmVqZWN0ID0gcmVqZWN0O1xuICAgIGxvZGFzaC5yZW1vdmUgPSByZW1vdmU7XG4gICAgbG9kYXNoLnJlc3QgPSByZXN0O1xuICAgIGxvZGFzaC5yZXN0UGFyYW0gPSByZXN0UGFyYW07XG4gICAgbG9kYXNoLnNldCA9IHNldDtcbiAgICBsb2Rhc2guc2h1ZmZsZSA9IHNodWZmbGU7XG4gICAgbG9kYXNoLnNsaWNlID0gc2xpY2U7XG4gICAgbG9kYXNoLnNvcnRCeSA9IHNvcnRCeTtcbiAgICBsb2Rhc2guc29ydEJ5QWxsID0gc29ydEJ5QWxsO1xuICAgIGxvZGFzaC5zb3J0QnlPcmRlciA9IHNvcnRCeU9yZGVyO1xuICAgIGxvZGFzaC5zcHJlYWQgPSBzcHJlYWQ7XG4gICAgbG9kYXNoLnRha2UgPSB0YWtlO1xuICAgIGxvZGFzaC50YWtlUmlnaHQgPSB0YWtlUmlnaHQ7XG4gICAgbG9kYXNoLnRha2VSaWdodFdoaWxlID0gdGFrZVJpZ2h0V2hpbGU7XG4gICAgbG9kYXNoLnRha2VXaGlsZSA9IHRha2VXaGlsZTtcbiAgICBsb2Rhc2gudGFwID0gdGFwO1xuICAgIGxvZGFzaC50aHJvdHRsZSA9IHRocm90dGxlO1xuICAgIGxvZGFzaC50aHJ1ID0gdGhydTtcbiAgICBsb2Rhc2gudGltZXMgPSB0aW1lcztcbiAgICBsb2Rhc2gudG9BcnJheSA9IHRvQXJyYXk7XG4gICAgbG9kYXNoLnRvUGxhaW5PYmplY3QgPSB0b1BsYWluT2JqZWN0O1xuICAgIGxvZGFzaC50cmFuc2Zvcm0gPSB0cmFuc2Zvcm07XG4gICAgbG9kYXNoLnVuaW9uID0gdW5pb247XG4gICAgbG9kYXNoLnVuaXEgPSB1bmlxO1xuICAgIGxvZGFzaC51bnppcCA9IHVuemlwO1xuICAgIGxvZGFzaC51bnppcFdpdGggPSB1bnppcFdpdGg7XG4gICAgbG9kYXNoLnZhbHVlcyA9IHZhbHVlcztcbiAgICBsb2Rhc2gudmFsdWVzSW4gPSB2YWx1ZXNJbjtcbiAgICBsb2Rhc2gud2hlcmUgPSB3aGVyZTtcbiAgICBsb2Rhc2gud2l0aG91dCA9IHdpdGhvdXQ7XG4gICAgbG9kYXNoLndyYXAgPSB3cmFwO1xuICAgIGxvZGFzaC54b3IgPSB4b3I7XG4gICAgbG9kYXNoLnppcCA9IHppcDtcbiAgICBsb2Rhc2guemlwT2JqZWN0ID0gemlwT2JqZWN0O1xuICAgIGxvZGFzaC56aXBXaXRoID0gemlwV2l0aDtcblxuICAgIC8vIEFkZCBhbGlhc2VzLlxuICAgIGxvZGFzaC5iYWNrZmxvdyA9IGZsb3dSaWdodDtcbiAgICBsb2Rhc2guY29sbGVjdCA9IG1hcDtcbiAgICBsb2Rhc2guY29tcG9zZSA9IGZsb3dSaWdodDtcbiAgICBsb2Rhc2guZWFjaCA9IGZvckVhY2g7XG4gICAgbG9kYXNoLmVhY2hSaWdodCA9IGZvckVhY2hSaWdodDtcbiAgICBsb2Rhc2guZXh0ZW5kID0gYXNzaWduO1xuICAgIGxvZGFzaC5pdGVyYXRlZSA9IGNhbGxiYWNrO1xuICAgIGxvZGFzaC5tZXRob2RzID0gZnVuY3Rpb25zO1xuICAgIGxvZGFzaC5vYmplY3QgPSB6aXBPYmplY3Q7XG4gICAgbG9kYXNoLnNlbGVjdCA9IGZpbHRlcjtcbiAgICBsb2Rhc2gudGFpbCA9IHJlc3Q7XG4gICAgbG9kYXNoLnVuaXF1ZSA9IHVuaXE7XG5cbiAgICAvLyBBZGQgZnVuY3Rpb25zIHRvIGBsb2Rhc2gucHJvdG90eXBlYC5cbiAgICBtaXhpbihsb2Rhc2gsIGxvZGFzaCk7XG5cbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAvLyBBZGQgZnVuY3Rpb25zIHRoYXQgcmV0dXJuIHVud3JhcHBlZCB2YWx1ZXMgd2hlbiBjaGFpbmluZy5cbiAgICBsb2Rhc2guYWRkID0gYWRkO1xuICAgIGxvZGFzaC5hdHRlbXB0ID0gYXR0ZW1wdDtcbiAgICBsb2Rhc2guY2FtZWxDYXNlID0gY2FtZWxDYXNlO1xuICAgIGxvZGFzaC5jYXBpdGFsaXplID0gY2FwaXRhbGl6ZTtcbiAgICBsb2Rhc2guY2VpbCA9IGNlaWw7XG4gICAgbG9kYXNoLmNsb25lID0gY2xvbmU7XG4gICAgbG9kYXNoLmNsb25lRGVlcCA9IGNsb25lRGVlcDtcbiAgICBsb2Rhc2guZGVidXJyID0gZGVidXJyO1xuICAgIGxvZGFzaC5lbmRzV2l0aCA9IGVuZHNXaXRoO1xuICAgIGxvZGFzaC5lc2NhcGUgPSBlc2NhcGU7XG4gICAgbG9kYXNoLmVzY2FwZVJlZ0V4cCA9IGVzY2FwZVJlZ0V4cDtcbiAgICBsb2Rhc2guZXZlcnkgPSBldmVyeTtcbiAgICBsb2Rhc2guZmluZCA9IGZpbmQ7XG4gICAgbG9kYXNoLmZpbmRJbmRleCA9IGZpbmRJbmRleDtcbiAgICBsb2Rhc2guZmluZEtleSA9IGZpbmRLZXk7XG4gICAgbG9kYXNoLmZpbmRMYXN0ID0gZmluZExhc3Q7XG4gICAgbG9kYXNoLmZpbmRMYXN0SW5kZXggPSBmaW5kTGFzdEluZGV4O1xuICAgIGxvZGFzaC5maW5kTGFzdEtleSA9IGZpbmRMYXN0S2V5O1xuICAgIGxvZGFzaC5maW5kV2hlcmUgPSBmaW5kV2hlcmU7XG4gICAgbG9kYXNoLmZpcnN0ID0gZmlyc3Q7XG4gICAgbG9kYXNoLmZsb29yID0gZmxvb3I7XG4gICAgbG9kYXNoLmdldCA9IGdldDtcbiAgICBsb2Rhc2guZ3QgPSBndDtcbiAgICBsb2Rhc2guZ3RlID0gZ3RlO1xuICAgIGxvZGFzaC5oYXMgPSBoYXM7XG4gICAgbG9kYXNoLmlkZW50aXR5ID0gaWRlbnRpdHk7XG4gICAgbG9kYXNoLmluY2x1ZGVzID0gaW5jbHVkZXM7XG4gICAgbG9kYXNoLmluZGV4T2YgPSBpbmRleE9mO1xuICAgIGxvZGFzaC5pblJhbmdlID0gaW5SYW5nZTtcbiAgICBsb2Rhc2guaXNBcmd1bWVudHMgPSBpc0FyZ3VtZW50cztcbiAgICBsb2Rhc2guaXNBcnJheSA9IGlzQXJyYXk7XG4gICAgbG9kYXNoLmlzQm9vbGVhbiA9IGlzQm9vbGVhbjtcbiAgICBsb2Rhc2guaXNEYXRlID0gaXNEYXRlO1xuICAgIGxvZGFzaC5pc0VsZW1lbnQgPSBpc0VsZW1lbnQ7XG4gICAgbG9kYXNoLmlzRW1wdHkgPSBpc0VtcHR5O1xuICAgIGxvZGFzaC5pc0VxdWFsID0gaXNFcXVhbDtcbiAgICBsb2Rhc2guaXNFcnJvciA9IGlzRXJyb3I7XG4gICAgbG9kYXNoLmlzRmluaXRlID0gaXNGaW5pdGU7XG4gICAgbG9kYXNoLmlzRnVuY3Rpb24gPSBpc0Z1bmN0aW9uO1xuICAgIGxvZGFzaC5pc01hdGNoID0gaXNNYXRjaDtcbiAgICBsb2Rhc2guaXNOYU4gPSBpc05hTjtcbiAgICBsb2Rhc2guaXNOYXRpdmUgPSBpc05hdGl2ZTtcbiAgICBsb2Rhc2guaXNOdWxsID0gaXNOdWxsO1xuICAgIGxvZGFzaC5pc051bWJlciA9IGlzTnVtYmVyO1xuICAgIGxvZGFzaC5pc09iamVjdCA9IGlzT2JqZWN0O1xuICAgIGxvZGFzaC5pc1BsYWluT2JqZWN0ID0gaXNQbGFpbk9iamVjdDtcbiAgICBsb2Rhc2guaXNSZWdFeHAgPSBpc1JlZ0V4cDtcbiAgICBsb2Rhc2guaXNTdHJpbmcgPSBpc1N0cmluZztcbiAgICBsb2Rhc2guaXNUeXBlZEFycmF5ID0gaXNUeXBlZEFycmF5O1xuICAgIGxvZGFzaC5pc1VuZGVmaW5lZCA9IGlzVW5kZWZpbmVkO1xuICAgIGxvZGFzaC5rZWJhYkNhc2UgPSBrZWJhYkNhc2U7XG4gICAgbG9kYXNoLmxhc3QgPSBsYXN0O1xuICAgIGxvZGFzaC5sYXN0SW5kZXhPZiA9IGxhc3RJbmRleE9mO1xuICAgIGxvZGFzaC5sdCA9IGx0O1xuICAgIGxvZGFzaC5sdGUgPSBsdGU7XG4gICAgbG9kYXNoLm1heCA9IG1heDtcbiAgICBsb2Rhc2gubWluID0gbWluO1xuICAgIGxvZGFzaC5ub0NvbmZsaWN0ID0gbm9Db25mbGljdDtcbiAgICBsb2Rhc2gubm9vcCA9IG5vb3A7XG4gICAgbG9kYXNoLm5vdyA9IG5vdztcbiAgICBsb2Rhc2gucGFkID0gcGFkO1xuICAgIGxvZGFzaC5wYWRMZWZ0ID0gcGFkTGVmdDtcbiAgICBsb2Rhc2gucGFkUmlnaHQgPSBwYWRSaWdodDtcbiAgICBsb2Rhc2gucGFyc2VJbnQgPSBwYXJzZUludDtcbiAgICBsb2Rhc2gucmFuZG9tID0gcmFuZG9tO1xuICAgIGxvZGFzaC5yZWR1Y2UgPSByZWR1Y2U7XG4gICAgbG9kYXNoLnJlZHVjZVJpZ2h0ID0gcmVkdWNlUmlnaHQ7XG4gICAgbG9kYXNoLnJlcGVhdCA9IHJlcGVhdDtcbiAgICBsb2Rhc2gucmVzdWx0ID0gcmVzdWx0O1xuICAgIGxvZGFzaC5yb3VuZCA9IHJvdW5kO1xuICAgIGxvZGFzaC5ydW5JbkNvbnRleHQgPSBydW5JbkNvbnRleHQ7XG4gICAgbG9kYXNoLnNpemUgPSBzaXplO1xuICAgIGxvZGFzaC5zbmFrZUNhc2UgPSBzbmFrZUNhc2U7XG4gICAgbG9kYXNoLnNvbWUgPSBzb21lO1xuICAgIGxvZGFzaC5zb3J0ZWRJbmRleCA9IHNvcnRlZEluZGV4O1xuICAgIGxvZGFzaC5zb3J0ZWRMYXN0SW5kZXggPSBzb3J0ZWRMYXN0SW5kZXg7XG4gICAgbG9kYXNoLnN0YXJ0Q2FzZSA9IHN0YXJ0Q2FzZTtcbiAgICBsb2Rhc2guc3RhcnRzV2l0aCA9IHN0YXJ0c1dpdGg7XG4gICAgbG9kYXNoLnN1bSA9IHN1bTtcbiAgICBsb2Rhc2gudGVtcGxhdGUgPSB0ZW1wbGF0ZTtcbiAgICBsb2Rhc2gudHJpbSA9IHRyaW07XG4gICAgbG9kYXNoLnRyaW1MZWZ0ID0gdHJpbUxlZnQ7XG4gICAgbG9kYXNoLnRyaW1SaWdodCA9IHRyaW1SaWdodDtcbiAgICBsb2Rhc2gudHJ1bmMgPSB0cnVuYztcbiAgICBsb2Rhc2gudW5lc2NhcGUgPSB1bmVzY2FwZTtcbiAgICBsb2Rhc2gudW5pcXVlSWQgPSB1bmlxdWVJZDtcbiAgICBsb2Rhc2gud29yZHMgPSB3b3JkcztcblxuICAgIC8vIEFkZCBhbGlhc2VzLlxuICAgIGxvZGFzaC5hbGwgPSBldmVyeTtcbiAgICBsb2Rhc2guYW55ID0gc29tZTtcbiAgICBsb2Rhc2guY29udGFpbnMgPSBpbmNsdWRlcztcbiAgICBsb2Rhc2guZXEgPSBpc0VxdWFsO1xuICAgIGxvZGFzaC5kZXRlY3QgPSBmaW5kO1xuICAgIGxvZGFzaC5mb2xkbCA9IHJlZHVjZTtcbiAgICBsb2Rhc2guZm9sZHIgPSByZWR1Y2VSaWdodDtcbiAgICBsb2Rhc2guaGVhZCA9IGZpcnN0O1xuICAgIGxvZGFzaC5pbmNsdWRlID0gaW5jbHVkZXM7XG4gICAgbG9kYXNoLmluamVjdCA9IHJlZHVjZTtcblxuICAgIG1peGluKGxvZGFzaCwgKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNvdXJjZSA9IHt9O1xuICAgICAgYmFzZUZvck93bihsb2Rhc2gsIGZ1bmN0aW9uKGZ1bmMsIG1ldGhvZE5hbWUpIHtcbiAgICAgICAgaWYgKCFsb2Rhc2gucHJvdG90eXBlW21ldGhvZE5hbWVdKSB7XG4gICAgICAgICAgc291cmNlW21ldGhvZE5hbWVdID0gZnVuYztcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gc291cmNlO1xuICAgIH0oKSksIGZhbHNlKTtcblxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgIC8vIEFkZCBmdW5jdGlvbnMgY2FwYWJsZSBvZiByZXR1cm5pbmcgd3JhcHBlZCBhbmQgdW53cmFwcGVkIHZhbHVlcyB3aGVuIGNoYWluaW5nLlxuICAgIGxvZGFzaC5zYW1wbGUgPSBzYW1wbGU7XG5cbiAgICBsb2Rhc2gucHJvdG90eXBlLnNhbXBsZSA9IGZ1bmN0aW9uKG4pIHtcbiAgICAgIGlmICghdGhpcy5fX2NoYWluX18gJiYgbiA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBzYW1wbGUodGhpcy52YWx1ZSgpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLnRocnUoZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHNhbXBsZSh2YWx1ZSwgbik7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgLyoqXG4gICAgICogVGhlIHNlbWFudGljIHZlcnNpb24gbnVtYmVyLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHR5cGUgc3RyaW5nXG4gICAgICovXG4gICAgbG9kYXNoLlZFUlNJT04gPSBWRVJTSU9OO1xuXG4gICAgLy8gQXNzaWduIGRlZmF1bHQgcGxhY2Vob2xkZXJzLlxuICAgIGFycmF5RWFjaChbJ2JpbmQnLCAnYmluZEtleScsICdjdXJyeScsICdjdXJyeVJpZ2h0JywgJ3BhcnRpYWwnLCAncGFydGlhbFJpZ2h0J10sIGZ1bmN0aW9uKG1ldGhvZE5hbWUpIHtcbiAgICAgIGxvZGFzaFttZXRob2ROYW1lXS5wbGFjZWhvbGRlciA9IGxvZGFzaDtcbiAgICB9KTtcblxuICAgIC8vIEFkZCBgTGF6eVdyYXBwZXJgIG1ldGhvZHMgZm9yIGBfLmRyb3BgIGFuZCBgXy50YWtlYCB2YXJpYW50cy5cbiAgICBhcnJheUVhY2goWydkcm9wJywgJ3Rha2UnXSwgZnVuY3Rpb24obWV0aG9kTmFtZSwgaW5kZXgpIHtcbiAgICAgIExhenlXcmFwcGVyLnByb3RvdHlwZVttZXRob2ROYW1lXSA9IGZ1bmN0aW9uKG4pIHtcbiAgICAgICAgdmFyIGZpbHRlcmVkID0gdGhpcy5fX2ZpbHRlcmVkX187XG4gICAgICAgIGlmIChmaWx0ZXJlZCAmJiAhaW5kZXgpIHtcbiAgICAgICAgICByZXR1cm4gbmV3IExhenlXcmFwcGVyKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIG4gPSBuID09IG51bGwgPyAxIDogbmF0aXZlTWF4KG5hdGl2ZUZsb29yKG4pIHx8IDAsIDApO1xuXG4gICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmNsb25lKCk7XG4gICAgICAgIGlmIChmaWx0ZXJlZCkge1xuICAgICAgICAgIHJlc3VsdC5fX3Rha2VDb3VudF9fID0gbmF0aXZlTWluKHJlc3VsdC5fX3Rha2VDb3VudF9fLCBuKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQuX192aWV3c19fLnB1c2goeyAnc2l6ZSc6IG4sICd0eXBlJzogbWV0aG9kTmFtZSArIChyZXN1bHQuX19kaXJfXyA8IDAgPyAnUmlnaHQnIDogJycpIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9O1xuXG4gICAgICBMYXp5V3JhcHBlci5wcm90b3R5cGVbbWV0aG9kTmFtZSArICdSaWdodCddID0gZnVuY3Rpb24obikge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXZlcnNlKClbbWV0aG9kTmFtZV0obikucmV2ZXJzZSgpO1xuICAgICAgfTtcbiAgICB9KTtcblxuICAgIC8vIEFkZCBgTGF6eVdyYXBwZXJgIG1ldGhvZHMgdGhhdCBhY2NlcHQgYW4gYGl0ZXJhdGVlYCB2YWx1ZS5cbiAgICBhcnJheUVhY2goWydmaWx0ZXInLCAnbWFwJywgJ3Rha2VXaGlsZSddLCBmdW5jdGlvbihtZXRob2ROYW1lLCBpbmRleCkge1xuICAgICAgdmFyIHR5cGUgPSBpbmRleCArIDEsXG4gICAgICAgICAgaXNGaWx0ZXIgPSB0eXBlICE9IExBWllfTUFQX0ZMQUc7XG5cbiAgICAgIExhenlXcmFwcGVyLnByb3RvdHlwZVttZXRob2ROYW1lXSA9IGZ1bmN0aW9uKGl0ZXJhdGVlLCB0aGlzQXJnKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmNsb25lKCk7XG4gICAgICAgIHJlc3VsdC5fX2l0ZXJhdGVlc19fLnB1c2goeyAnaXRlcmF0ZWUnOiBnZXRDYWxsYmFjayhpdGVyYXRlZSwgdGhpc0FyZywgMSksICd0eXBlJzogdHlwZSB9KTtcbiAgICAgICAgcmVzdWx0Ll9fZmlsdGVyZWRfXyA9IHJlc3VsdC5fX2ZpbHRlcmVkX18gfHwgaXNGaWx0ZXI7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgLy8gQWRkIGBMYXp5V3JhcHBlcmAgbWV0aG9kcyBmb3IgYF8uZmlyc3RgIGFuZCBgXy5sYXN0YC5cbiAgICBhcnJheUVhY2goWydmaXJzdCcsICdsYXN0J10sIGZ1bmN0aW9uKG1ldGhvZE5hbWUsIGluZGV4KSB7XG4gICAgICB2YXIgdGFrZU5hbWUgPSAndGFrZScgKyAoaW5kZXggPyAnUmlnaHQnIDogJycpO1xuXG4gICAgICBMYXp5V3JhcHBlci5wcm90b3R5cGVbbWV0aG9kTmFtZV0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbdGFrZU5hbWVdKDEpLnZhbHVlKClbMF07XG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgLy8gQWRkIGBMYXp5V3JhcHBlcmAgbWV0aG9kcyBmb3IgYF8uaW5pdGlhbGAgYW5kIGBfLnJlc3RgLlxuICAgIGFycmF5RWFjaChbJ2luaXRpYWwnLCAncmVzdCddLCBmdW5jdGlvbihtZXRob2ROYW1lLCBpbmRleCkge1xuICAgICAgdmFyIGRyb3BOYW1lID0gJ2Ryb3AnICsgKGluZGV4ID8gJycgOiAnUmlnaHQnKTtcblxuICAgICAgTGF6eVdyYXBwZXIucHJvdG90eXBlW21ldGhvZE5hbWVdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9fZmlsdGVyZWRfXyA/IG5ldyBMYXp5V3JhcHBlcih0aGlzKSA6IHRoaXNbZHJvcE5hbWVdKDEpO1xuICAgICAgfTtcbiAgICB9KTtcblxuICAgIC8vIEFkZCBgTGF6eVdyYXBwZXJgIG1ldGhvZHMgZm9yIGBfLnBsdWNrYCBhbmQgYF8ud2hlcmVgLlxuICAgIGFycmF5RWFjaChbJ3BsdWNrJywgJ3doZXJlJ10sIGZ1bmN0aW9uKG1ldGhvZE5hbWUsIGluZGV4KSB7XG4gICAgICB2YXIgb3BlcmF0aW9uTmFtZSA9IGluZGV4ID8gJ2ZpbHRlcicgOiAnbWFwJyxcbiAgICAgICAgICBjcmVhdGVDYWxsYmFjayA9IGluZGV4ID8gYmFzZU1hdGNoZXMgOiBwcm9wZXJ0eTtcblxuICAgICAgTGF6eVdyYXBwZXIucHJvdG90eXBlW21ldGhvZE5hbWVdID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbb3BlcmF0aW9uTmFtZV0oY3JlYXRlQ2FsbGJhY2sodmFsdWUpKTtcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICBMYXp5V3JhcHBlci5wcm90b3R5cGUuY29tcGFjdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuZmlsdGVyKGlkZW50aXR5KTtcbiAgICB9O1xuXG4gICAgTGF6eVdyYXBwZXIucHJvdG90eXBlLnJlamVjdCA9IGZ1bmN0aW9uKHByZWRpY2F0ZSwgdGhpc0FyZykge1xuICAgICAgcHJlZGljYXRlID0gZ2V0Q2FsbGJhY2socHJlZGljYXRlLCB0aGlzQXJnLCAxKTtcbiAgICAgIHJldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gIXByZWRpY2F0ZSh2YWx1ZSk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgTGF6eVdyYXBwZXIucHJvdG90eXBlLnNsaWNlID0gZnVuY3Rpb24oc3RhcnQsIGVuZCkge1xuICAgICAgc3RhcnQgPSBzdGFydCA9PSBudWxsID8gMCA6ICgrc3RhcnQgfHwgMCk7XG5cbiAgICAgIHZhciByZXN1bHQgPSB0aGlzO1xuICAgICAgaWYgKHJlc3VsdC5fX2ZpbHRlcmVkX18gJiYgKHN0YXJ0ID4gMCB8fCBlbmQgPCAwKSkge1xuICAgICAgICByZXR1cm4gbmV3IExhenlXcmFwcGVyKHJlc3VsdCk7XG4gICAgICB9XG4gICAgICBpZiAoc3RhcnQgPCAwKSB7XG4gICAgICAgIHJlc3VsdCA9IHJlc3VsdC50YWtlUmlnaHQoLXN0YXJ0KTtcbiAgICAgIH0gZWxzZSBpZiAoc3RhcnQpIHtcbiAgICAgICAgcmVzdWx0ID0gcmVzdWx0LmRyb3Aoc3RhcnQpO1xuICAgICAgfVxuICAgICAgaWYgKGVuZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGVuZCA9ICgrZW5kIHx8IDApO1xuICAgICAgICByZXN1bHQgPSBlbmQgPCAwID8gcmVzdWx0LmRyb3BSaWdodCgtZW5kKSA6IHJlc3VsdC50YWtlKGVuZCAtIHN0YXJ0KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcblxuICAgIExhenlXcmFwcGVyLnByb3RvdHlwZS50YWtlUmlnaHRXaGlsZSA9IGZ1bmN0aW9uKHByZWRpY2F0ZSwgdGhpc0FyZykge1xuICAgICAgcmV0dXJuIHRoaXMucmV2ZXJzZSgpLnRha2VXaGlsZShwcmVkaWNhdGUsIHRoaXNBcmcpLnJldmVyc2UoKTtcbiAgICB9O1xuXG4gICAgTGF6eVdyYXBwZXIucHJvdG90eXBlLnRvQXJyYXkgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnRha2UoUE9TSVRJVkVfSU5GSU5JVFkpO1xuICAgIH07XG5cbiAgICAvLyBBZGQgYExhenlXcmFwcGVyYCBtZXRob2RzIHRvIGBsb2Rhc2gucHJvdG90eXBlYC5cbiAgICBiYXNlRm9yT3duKExhenlXcmFwcGVyLnByb3RvdHlwZSwgZnVuY3Rpb24oZnVuYywgbWV0aG9kTmFtZSkge1xuICAgICAgdmFyIGNoZWNrSXRlcmF0ZWUgPSAvXig/OmZpbHRlcnxtYXB8cmVqZWN0KXxXaGlsZSQvLnRlc3QobWV0aG9kTmFtZSksXG4gICAgICAgICAgcmV0VW53cmFwcGVkID0gL14oPzpmaXJzdHxsYXN0KSQvLnRlc3QobWV0aG9kTmFtZSksXG4gICAgICAgICAgbG9kYXNoRnVuYyA9IGxvZGFzaFtyZXRVbndyYXBwZWQgPyAoJ3Rha2UnICsgKG1ldGhvZE5hbWUgPT0gJ2xhc3QnID8gJ1JpZ2h0JyA6ICcnKSkgOiBtZXRob2ROYW1lXTtcblxuICAgICAgaWYgKCFsb2Rhc2hGdW5jKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGxvZGFzaC5wcm90b3R5cGVbbWV0aG9kTmFtZV0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSByZXRVbndyYXBwZWQgPyBbMV0gOiBhcmd1bWVudHMsXG4gICAgICAgICAgICBjaGFpbkFsbCA9IHRoaXMuX19jaGFpbl9fLFxuICAgICAgICAgICAgdmFsdWUgPSB0aGlzLl9fd3JhcHBlZF9fLFxuICAgICAgICAgICAgaXNIeWJyaWQgPSAhIXRoaXMuX19hY3Rpb25zX18ubGVuZ3RoLFxuICAgICAgICAgICAgaXNMYXp5ID0gdmFsdWUgaW5zdGFuY2VvZiBMYXp5V3JhcHBlcixcbiAgICAgICAgICAgIGl0ZXJhdGVlID0gYXJnc1swXSxcbiAgICAgICAgICAgIHVzZUxhenkgPSBpc0xhenkgfHwgaXNBcnJheSh2YWx1ZSk7XG5cbiAgICAgICAgaWYgKHVzZUxhenkgJiYgY2hlY2tJdGVyYXRlZSAmJiB0eXBlb2YgaXRlcmF0ZWUgPT0gJ2Z1bmN0aW9uJyAmJiBpdGVyYXRlZS5sZW5ndGggIT0gMSkge1xuICAgICAgICAgIC8vIEF2b2lkIGxhenkgdXNlIGlmIHRoZSBpdGVyYXRlZSBoYXMgYSBcImxlbmd0aFwiIHZhbHVlIG90aGVyIHRoYW4gYDFgLlxuICAgICAgICAgIGlzTGF6eSA9IHVzZUxhenkgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgaW50ZXJjZXB0b3IgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgIHJldHVybiAocmV0VW53cmFwcGVkICYmIGNoYWluQWxsKVxuICAgICAgICAgICAgPyBsb2Rhc2hGdW5jKHZhbHVlLCAxKVswXVxuICAgICAgICAgICAgOiBsb2Rhc2hGdW5jLmFwcGx5KHVuZGVmaW5lZCwgYXJyYXlQdXNoKFt2YWx1ZV0sIGFyZ3MpKTtcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgYWN0aW9uID0geyAnZnVuYyc6IHRocnUsICdhcmdzJzogW2ludGVyY2VwdG9yXSwgJ3RoaXNBcmcnOiB1bmRlZmluZWQgfSxcbiAgICAgICAgICAgIG9ubHlMYXp5ID0gaXNMYXp5ICYmICFpc0h5YnJpZDtcblxuICAgICAgICBpZiAocmV0VW53cmFwcGVkICYmICFjaGFpbkFsbCkge1xuICAgICAgICAgIGlmIChvbmx5TGF6eSkge1xuICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5jbG9uZSgpO1xuICAgICAgICAgICAgdmFsdWUuX19hY3Rpb25zX18ucHVzaChhY3Rpb24pO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbCh2YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBsb2Rhc2hGdW5jLmNhbGwodW5kZWZpbmVkLCB0aGlzLnZhbHVlKCkpWzBdO1xuICAgICAgICB9XG4gICAgICAgIGlmICghcmV0VW53cmFwcGVkICYmIHVzZUxhenkpIHtcbiAgICAgICAgICB2YWx1ZSA9IG9ubHlMYXp5ID8gdmFsdWUgOiBuZXcgTGF6eVdyYXBwZXIodGhpcyk7XG4gICAgICAgICAgdmFyIHJlc3VsdCA9IGZ1bmMuYXBwbHkodmFsdWUsIGFyZ3MpO1xuICAgICAgICAgIHJlc3VsdC5fX2FjdGlvbnNfXy5wdXNoKGFjdGlvbik7XG4gICAgICAgICAgcmV0dXJuIG5ldyBMb2Rhc2hXcmFwcGVyKHJlc3VsdCwgY2hhaW5BbGwpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnRocnUoaW50ZXJjZXB0b3IpO1xuICAgICAgfTtcbiAgICB9KTtcblxuICAgIC8vIEFkZCBgQXJyYXlgIGFuZCBgU3RyaW5nYCBtZXRob2RzIHRvIGBsb2Rhc2gucHJvdG90eXBlYC5cbiAgICBhcnJheUVhY2goWydqb2luJywgJ3BvcCcsICdwdXNoJywgJ3JlcGxhY2UnLCAnc2hpZnQnLCAnc29ydCcsICdzcGxpY2UnLCAnc3BsaXQnLCAndW5zaGlmdCddLCBmdW5jdGlvbihtZXRob2ROYW1lKSB7XG4gICAgICB2YXIgZnVuYyA9ICgvXig/OnJlcGxhY2V8c3BsaXQpJC8udGVzdChtZXRob2ROYW1lKSA/IHN0cmluZ1Byb3RvIDogYXJyYXlQcm90bylbbWV0aG9kTmFtZV0sXG4gICAgICAgICAgY2hhaW5OYW1lID0gL14oPzpwdXNofHNvcnR8dW5zaGlmdCkkLy50ZXN0KG1ldGhvZE5hbWUpID8gJ3RhcCcgOiAndGhydScsXG4gICAgICAgICAgcmV0VW53cmFwcGVkID0gL14oPzpqb2lufHBvcHxyZXBsYWNlfHNoaWZ0KSQvLnRlc3QobWV0aG9kTmFtZSk7XG5cbiAgICAgIGxvZGFzaC5wcm90b3R5cGVbbWV0aG9kTmFtZV0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICAgIGlmIChyZXRVbndyYXBwZWQgJiYgIXRoaXMuX19jaGFpbl9fKSB7XG4gICAgICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkodGhpcy52YWx1ZSgpLCBhcmdzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpc1tjaGFpbk5hbWVdKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkodmFsdWUsIGFyZ3MpO1xuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICAvLyBNYXAgbWluaWZpZWQgZnVuY3Rpb24gbmFtZXMgdG8gdGhlaXIgcmVhbCBuYW1lcy5cbiAgICBiYXNlRm9yT3duKExhenlXcmFwcGVyLnByb3RvdHlwZSwgZnVuY3Rpb24oZnVuYywgbWV0aG9kTmFtZSkge1xuICAgICAgdmFyIGxvZGFzaEZ1bmMgPSBsb2Rhc2hbbWV0aG9kTmFtZV07XG4gICAgICBpZiAobG9kYXNoRnVuYykge1xuICAgICAgICB2YXIga2V5ID0gbG9kYXNoRnVuYy5uYW1lLFxuICAgICAgICAgICAgbmFtZXMgPSByZWFsTmFtZXNba2V5XSB8fCAocmVhbE5hbWVzW2tleV0gPSBbXSk7XG5cbiAgICAgICAgbmFtZXMucHVzaCh7ICduYW1lJzogbWV0aG9kTmFtZSwgJ2Z1bmMnOiBsb2Rhc2hGdW5jIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmVhbE5hbWVzW2NyZWF0ZUh5YnJpZFdyYXBwZXIodW5kZWZpbmVkLCBCSU5EX0tFWV9GTEFHKS5uYW1lXSA9IFt7ICduYW1lJzogJ3dyYXBwZXInLCAnZnVuYyc6IHVuZGVmaW5lZCB9XTtcblxuICAgIC8vIEFkZCBmdW5jdGlvbnMgdG8gdGhlIGxhenkgd3JhcHBlci5cbiAgICBMYXp5V3JhcHBlci5wcm90b3R5cGUuY2xvbmUgPSBsYXp5Q2xvbmU7XG4gICAgTGF6eVdyYXBwZXIucHJvdG90eXBlLnJldmVyc2UgPSBsYXp5UmV2ZXJzZTtcbiAgICBMYXp5V3JhcHBlci5wcm90b3R5cGUudmFsdWUgPSBsYXp5VmFsdWU7XG5cbiAgICAvLyBBZGQgY2hhaW5pbmcgZnVuY3Rpb25zIHRvIHRoZSBgbG9kYXNoYCB3cmFwcGVyLlxuICAgIGxvZGFzaC5wcm90b3R5cGUuY2hhaW4gPSB3cmFwcGVyQ2hhaW47XG4gICAgbG9kYXNoLnByb3RvdHlwZS5jb21taXQgPSB3cmFwcGVyQ29tbWl0O1xuICAgIGxvZGFzaC5wcm90b3R5cGUuY29uY2F0ID0gd3JhcHBlckNvbmNhdDtcbiAgICBsb2Rhc2gucHJvdG90eXBlLnBsYW50ID0gd3JhcHBlclBsYW50O1xuICAgIGxvZGFzaC5wcm90b3R5cGUucmV2ZXJzZSA9IHdyYXBwZXJSZXZlcnNlO1xuICAgIGxvZGFzaC5wcm90b3R5cGUudG9TdHJpbmcgPSB3cmFwcGVyVG9TdHJpbmc7XG4gICAgbG9kYXNoLnByb3RvdHlwZS5ydW4gPSBsb2Rhc2gucHJvdG90eXBlLnRvSlNPTiA9IGxvZGFzaC5wcm90b3R5cGUudmFsdWVPZiA9IGxvZGFzaC5wcm90b3R5cGUudmFsdWUgPSB3cmFwcGVyVmFsdWU7XG5cbiAgICAvLyBBZGQgZnVuY3Rpb24gYWxpYXNlcyB0byB0aGUgYGxvZGFzaGAgd3JhcHBlci5cbiAgICBsb2Rhc2gucHJvdG90eXBlLmNvbGxlY3QgPSBsb2Rhc2gucHJvdG90eXBlLm1hcDtcbiAgICBsb2Rhc2gucHJvdG90eXBlLmhlYWQgPSBsb2Rhc2gucHJvdG90eXBlLmZpcnN0O1xuICAgIGxvZGFzaC5wcm90b3R5cGUuc2VsZWN0ID0gbG9kYXNoLnByb3RvdHlwZS5maWx0ZXI7XG4gICAgbG9kYXNoLnByb3RvdHlwZS50YWlsID0gbG9kYXNoLnByb3RvdHlwZS5yZXN0O1xuXG4gICAgcmV0dXJuIGxvZGFzaDtcbiAgfVxuXG4gIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gIC8vIEV4cG9ydCBsb2Rhc2guXG4gIHZhciBfID0gcnVuSW5Db250ZXh0KCk7XG5cbiAgLy8gU29tZSBBTUQgYnVpbGQgb3B0aW1pemVycyBsaWtlIHIuanMgY2hlY2sgZm9yIGNvbmRpdGlvbiBwYXR0ZXJucyBsaWtlIHRoZSBmb2xsb3dpbmc6XG4gIGlmICh0eXBlb2YgZGVmaW5lID09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGRlZmluZS5hbWQgPT0gJ29iamVjdCcgJiYgZGVmaW5lLmFtZCkge1xuICAgIC8vIEV4cG9zZSBsb2Rhc2ggdG8gdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBhbiBBTUQgbG9hZGVyIGlzIHByZXNlbnQgdG8gYXZvaWRcbiAgICAvLyBlcnJvcnMgaW4gY2FzZXMgd2hlcmUgbG9kYXNoIGlzIGxvYWRlZCBieSBhIHNjcmlwdCB0YWcgYW5kIG5vdCBpbnRlbmRlZFxuICAgIC8vIGFzIGFuIEFNRCBtb2R1bGUuIFNlZSBodHRwOi8vcmVxdWlyZWpzLm9yZy9kb2NzL2Vycm9ycy5odG1sI21pc21hdGNoIGZvclxuICAgIC8vIG1vcmUgZGV0YWlscy5cbiAgICByb290Ll8gPSBfO1xuXG4gICAgLy8gRGVmaW5lIGFzIGFuIGFub255bW91cyBtb2R1bGUgc28sIHRocm91Z2ggcGF0aCBtYXBwaW5nLCBpdCBjYW4gYmVcbiAgICAvLyByZWZlcmVuY2VkIGFzIHRoZSBcInVuZGVyc2NvcmVcIiBtb2R1bGUuXG4gICAgZGVmaW5lKGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIF87XG4gICAgfSk7XG4gIH1cbiAgLy8gQ2hlY2sgZm9yIGBleHBvcnRzYCBhZnRlciBgZGVmaW5lYCBpbiBjYXNlIGEgYnVpbGQgb3B0aW1pemVyIGFkZHMgYW4gYGV4cG9ydHNgIG9iamVjdC5cbiAgZWxzZSBpZiAoZnJlZUV4cG9ydHMgJiYgZnJlZU1vZHVsZSkge1xuICAgIC8vIEV4cG9ydCBmb3IgTm9kZS5qcyBvciBSaW5nb0pTLlxuICAgIGlmIChtb2R1bGVFeHBvcnRzKSB7XG4gICAgICAoZnJlZU1vZHVsZS5leHBvcnRzID0gXykuXyA9IF87XG4gICAgfVxuICAgIC8vIEV4cG9ydCBmb3IgUmhpbm8gd2l0aCBDb21tb25KUyBzdXBwb3J0LlxuICAgIGVsc2Uge1xuICAgICAgZnJlZUV4cG9ydHMuXyA9IF87XG4gICAgfVxuICB9XG4gIGVsc2Uge1xuICAgIC8vIEV4cG9ydCBmb3IgYSBicm93c2VyIG9yIFJoaW5vLlxuICAgIHJvb3QuXyA9IF87XG4gIH1cbn0uY2FsbCh0aGlzKSk7XG4iLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9saWInKVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgYXNhcCA9IHJlcXVpcmUoJ2FzYXAvcmF3Jyk7XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG4vLyBTdGF0ZXM6XG4vL1xuLy8gMCAtIHBlbmRpbmdcbi8vIDEgLSBmdWxmaWxsZWQgd2l0aCBfdmFsdWVcbi8vIDIgLSByZWplY3RlZCB3aXRoIF92YWx1ZVxuLy8gMyAtIGFkb3B0ZWQgdGhlIHN0YXRlIG9mIGFub3RoZXIgcHJvbWlzZSwgX3ZhbHVlXG4vL1xuLy8gb25jZSB0aGUgc3RhdGUgaXMgbm8gbG9uZ2VyIHBlbmRpbmcgKDApIGl0IGlzIGltbXV0YWJsZVxuXG4vLyBBbGwgYF9gIHByZWZpeGVkIHByb3BlcnRpZXMgd2lsbCBiZSByZWR1Y2VkIHRvIGBfe3JhbmRvbSBudW1iZXJ9YFxuLy8gYXQgYnVpbGQgdGltZSB0byBvYmZ1c2NhdGUgdGhlbSBhbmQgZGlzY291cmFnZSB0aGVpciB1c2UuXG4vLyBXZSBkb24ndCB1c2Ugc3ltYm9scyBvciBPYmplY3QuZGVmaW5lUHJvcGVydHkgdG8gZnVsbHkgaGlkZSB0aGVtXG4vLyBiZWNhdXNlIHRoZSBwZXJmb3JtYW5jZSBpc24ndCBnb29kIGVub3VnaC5cblxuXG4vLyB0byBhdm9pZCB1c2luZyB0cnkvY2F0Y2ggaW5zaWRlIGNyaXRpY2FsIGZ1bmN0aW9ucywgd2Vcbi8vIGV4dHJhY3QgdGhlbSB0byBoZXJlLlxudmFyIExBU1RfRVJST1IgPSBudWxsO1xudmFyIElTX0VSUk9SID0ge307XG5mdW5jdGlvbiBnZXRUaGVuKG9iaikge1xuICB0cnkge1xuICAgIHJldHVybiBvYmoudGhlbjtcbiAgfSBjYXRjaCAoZXgpIHtcbiAgICBMQVNUX0VSUk9SID0gZXg7XG4gICAgcmV0dXJuIElTX0VSUk9SO1xuICB9XG59XG5cbmZ1bmN0aW9uIHRyeUNhbGxPbmUoZm4sIGEpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gZm4oYSk7XG4gIH0gY2F0Y2ggKGV4KSB7XG4gICAgTEFTVF9FUlJPUiA9IGV4O1xuICAgIHJldHVybiBJU19FUlJPUjtcbiAgfVxufVxuZnVuY3Rpb24gdHJ5Q2FsbFR3byhmbiwgYSwgYikge1xuICB0cnkge1xuICAgIGZuKGEsIGIpO1xuICB9IGNhdGNoIChleCkge1xuICAgIExBU1RfRVJST1IgPSBleDtcbiAgICByZXR1cm4gSVNfRVJST1I7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBQcm9taXNlO1xuXG5mdW5jdGlvbiBQcm9taXNlKGZuKSB7XG4gIGlmICh0eXBlb2YgdGhpcyAhPT0gJ29iamVjdCcpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdQcm9taXNlcyBtdXN0IGJlIGNvbnN0cnVjdGVkIHZpYSBuZXcnKTtcbiAgfVxuICBpZiAodHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUHJvbWlzZSBjb25zdHJ1Y3RvclxcJ3MgYXJndW1lbnQgaXMgbm90IGEgZnVuY3Rpb24nKTtcbiAgfVxuICB0aGlzLl80MCA9IDA7XG4gIHRoaXMuXzY1ID0gMDtcbiAgdGhpcy5fNTUgPSBudWxsO1xuICB0aGlzLl83MiA9IG51bGw7XG4gIGlmIChmbiA9PT0gbm9vcCkgcmV0dXJuO1xuICBkb1Jlc29sdmUoZm4sIHRoaXMpO1xufVxuUHJvbWlzZS5fMzcgPSBudWxsO1xuUHJvbWlzZS5fODcgPSBudWxsO1xuUHJvbWlzZS5fNjEgPSBub29wO1xuXG5Qcm9taXNlLnByb3RvdHlwZS50aGVuID0gZnVuY3Rpb24ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpIHtcbiAgaWYgKHRoaXMuY29uc3RydWN0b3IgIT09IFByb21pc2UpIHtcbiAgICByZXR1cm4gc2FmZVRoZW4odGhpcywgb25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpO1xuICB9XG4gIHZhciByZXMgPSBuZXcgUHJvbWlzZShub29wKTtcbiAgaGFuZGxlKHRoaXMsIG5ldyBIYW5kbGVyKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkLCByZXMpKTtcbiAgcmV0dXJuIHJlcztcbn07XG5cbmZ1bmN0aW9uIHNhZmVUaGVuKHNlbGYsIG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKSB7XG4gIHJldHVybiBuZXcgc2VsZi5jb25zdHJ1Y3RvcihmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgdmFyIHJlcyA9IG5ldyBQcm9taXNlKG5vb3ApO1xuICAgIHJlcy50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgaGFuZGxlKHNlbGYsIG5ldyBIYW5kbGVyKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkLCByZXMpKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBoYW5kbGUoc2VsZiwgZGVmZXJyZWQpIHtcbiAgd2hpbGUgKHNlbGYuXzY1ID09PSAzKSB7XG4gICAgc2VsZiA9IHNlbGYuXzU1O1xuICB9XG4gIGlmIChQcm9taXNlLl8zNykge1xuICAgIFByb21pc2UuXzM3KHNlbGYpO1xuICB9XG4gIGlmIChzZWxmLl82NSA9PT0gMCkge1xuICAgIGlmIChzZWxmLl80MCA9PT0gMCkge1xuICAgICAgc2VsZi5fNDAgPSAxO1xuICAgICAgc2VsZi5fNzIgPSBkZWZlcnJlZDtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHNlbGYuXzQwID09PSAxKSB7XG4gICAgICBzZWxmLl80MCA9IDI7XG4gICAgICBzZWxmLl83MiA9IFtzZWxmLl83MiwgZGVmZXJyZWRdO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzZWxmLl83Mi5wdXNoKGRlZmVycmVkKTtcbiAgICByZXR1cm47XG4gIH1cbiAgaGFuZGxlUmVzb2x2ZWQoc2VsZiwgZGVmZXJyZWQpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVSZXNvbHZlZChzZWxmLCBkZWZlcnJlZCkge1xuICBhc2FwKGZ1bmN0aW9uKCkge1xuICAgIHZhciBjYiA9IHNlbGYuXzY1ID09PSAxID8gZGVmZXJyZWQub25GdWxmaWxsZWQgOiBkZWZlcnJlZC5vblJlamVjdGVkO1xuICAgIGlmIChjYiA9PT0gbnVsbCkge1xuICAgICAgaWYgKHNlbGYuXzY1ID09PSAxKSB7XG4gICAgICAgIHJlc29sdmUoZGVmZXJyZWQucHJvbWlzZSwgc2VsZi5fNTUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVqZWN0KGRlZmVycmVkLnByb21pc2UsIHNlbGYuXzU1KTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHJldCA9IHRyeUNhbGxPbmUoY2IsIHNlbGYuXzU1KTtcbiAgICBpZiAocmV0ID09PSBJU19FUlJPUikge1xuICAgICAgcmVqZWN0KGRlZmVycmVkLnByb21pc2UsIExBU1RfRVJST1IpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXNvbHZlKGRlZmVycmVkLnByb21pc2UsIHJldCk7XG4gICAgfVxuICB9KTtcbn1cbmZ1bmN0aW9uIHJlc29sdmUoc2VsZiwgbmV3VmFsdWUpIHtcbiAgLy8gUHJvbWlzZSBSZXNvbHV0aW9uIFByb2NlZHVyZTogaHR0cHM6Ly9naXRodWIuY29tL3Byb21pc2VzLWFwbHVzL3Byb21pc2VzLXNwZWMjdGhlLXByb21pc2UtcmVzb2x1dGlvbi1wcm9jZWR1cmVcbiAgaWYgKG5ld1ZhbHVlID09PSBzZWxmKSB7XG4gICAgcmV0dXJuIHJlamVjdChcbiAgICAgIHNlbGYsXG4gICAgICBuZXcgVHlwZUVycm9yKCdBIHByb21pc2UgY2Fubm90IGJlIHJlc29sdmVkIHdpdGggaXRzZWxmLicpXG4gICAgKTtcbiAgfVxuICBpZiAoXG4gICAgbmV3VmFsdWUgJiZcbiAgICAodHlwZW9mIG5ld1ZhbHVlID09PSAnb2JqZWN0JyB8fCB0eXBlb2YgbmV3VmFsdWUgPT09ICdmdW5jdGlvbicpXG4gICkge1xuICAgIHZhciB0aGVuID0gZ2V0VGhlbihuZXdWYWx1ZSk7XG4gICAgaWYgKHRoZW4gPT09IElTX0VSUk9SKSB7XG4gICAgICByZXR1cm4gcmVqZWN0KHNlbGYsIExBU1RfRVJST1IpO1xuICAgIH1cbiAgICBpZiAoXG4gICAgICB0aGVuID09PSBzZWxmLnRoZW4gJiZcbiAgICAgIG5ld1ZhbHVlIGluc3RhbmNlb2YgUHJvbWlzZVxuICAgICkge1xuICAgICAgc2VsZi5fNjUgPSAzO1xuICAgICAgc2VsZi5fNTUgPSBuZXdWYWx1ZTtcbiAgICAgIGZpbmFsZShzZWxmKTtcbiAgICAgIHJldHVybjtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB0aGVuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBkb1Jlc29sdmUodGhlbi5iaW5kKG5ld1ZhbHVlKSwgc2VsZik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG4gIHNlbGYuXzY1ID0gMTtcbiAgc2VsZi5fNTUgPSBuZXdWYWx1ZTtcbiAgZmluYWxlKHNlbGYpO1xufVxuXG5mdW5jdGlvbiByZWplY3Qoc2VsZiwgbmV3VmFsdWUpIHtcbiAgc2VsZi5fNjUgPSAyO1xuICBzZWxmLl81NSA9IG5ld1ZhbHVlO1xuICBpZiAoUHJvbWlzZS5fODcpIHtcbiAgICBQcm9taXNlLl84NyhzZWxmLCBuZXdWYWx1ZSk7XG4gIH1cbiAgZmluYWxlKHNlbGYpO1xufVxuZnVuY3Rpb24gZmluYWxlKHNlbGYpIHtcbiAgaWYgKHNlbGYuXzQwID09PSAxKSB7XG4gICAgaGFuZGxlKHNlbGYsIHNlbGYuXzcyKTtcbiAgICBzZWxmLl83MiA9IG51bGw7XG4gIH1cbiAgaWYgKHNlbGYuXzQwID09PSAyKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxmLl83Mi5sZW5ndGg7IGkrKykge1xuICAgICAgaGFuZGxlKHNlbGYsIHNlbGYuXzcyW2ldKTtcbiAgICB9XG4gICAgc2VsZi5fNzIgPSBudWxsO1xuICB9XG59XG5cbmZ1bmN0aW9uIEhhbmRsZXIob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQsIHByb21pc2Upe1xuICB0aGlzLm9uRnVsZmlsbGVkID0gdHlwZW9mIG9uRnVsZmlsbGVkID09PSAnZnVuY3Rpb24nID8gb25GdWxmaWxsZWQgOiBudWxsO1xuICB0aGlzLm9uUmVqZWN0ZWQgPSB0eXBlb2Ygb25SZWplY3RlZCA9PT0gJ2Z1bmN0aW9uJyA/IG9uUmVqZWN0ZWQgOiBudWxsO1xuICB0aGlzLnByb21pc2UgPSBwcm9taXNlO1xufVxuXG4vKipcbiAqIFRha2UgYSBwb3RlbnRpYWxseSBtaXNiZWhhdmluZyByZXNvbHZlciBmdW5jdGlvbiBhbmQgbWFrZSBzdXJlXG4gKiBvbkZ1bGZpbGxlZCBhbmQgb25SZWplY3RlZCBhcmUgb25seSBjYWxsZWQgb25jZS5cbiAqXG4gKiBNYWtlcyBubyBndWFyYW50ZWVzIGFib3V0IGFzeW5jaHJvbnkuXG4gKi9cbmZ1bmN0aW9uIGRvUmVzb2x2ZShmbiwgcHJvbWlzZSkge1xuICB2YXIgZG9uZSA9IGZhbHNlO1xuICB2YXIgcmVzID0gdHJ5Q2FsbFR3byhmbiwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgaWYgKGRvbmUpIHJldHVybjtcbiAgICBkb25lID0gdHJ1ZTtcbiAgICByZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcbiAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIGlmIChkb25lKSByZXR1cm47XG4gICAgZG9uZSA9IHRydWU7XG4gICAgcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gIH0pO1xuICBpZiAoIWRvbmUgJiYgcmVzID09PSBJU19FUlJPUikge1xuICAgIGRvbmUgPSB0cnVlO1xuICAgIHJlamVjdChwcm9taXNlLCBMQVNUX0VSUk9SKTtcbiAgfVxufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgUHJvbWlzZSA9IHJlcXVpcmUoJy4vY29yZS5qcycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFByb21pc2U7XG5Qcm9taXNlLnByb3RvdHlwZS5kb25lID0gZnVuY3Rpb24gKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKSB7XG4gIHZhciBzZWxmID0gYXJndW1lbnRzLmxlbmd0aCA/IHRoaXMudGhlbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpIDogdGhpcztcbiAgc2VsZi50aGVuKG51bGwsIGZ1bmN0aW9uIChlcnIpIHtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIHRocm93IGVycjtcbiAgICB9LCAwKTtcbiAgfSk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vL1RoaXMgZmlsZSBjb250YWlucyB0aGUgRVM2IGV4dGVuc2lvbnMgdG8gdGhlIGNvcmUgUHJvbWlzZXMvQSsgQVBJXG5cbnZhciBQcm9taXNlID0gcmVxdWlyZSgnLi9jb3JlLmpzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gUHJvbWlzZTtcblxuLyogU3RhdGljIEZ1bmN0aW9ucyAqL1xuXG52YXIgVFJVRSA9IHZhbHVlUHJvbWlzZSh0cnVlKTtcbnZhciBGQUxTRSA9IHZhbHVlUHJvbWlzZShmYWxzZSk7XG52YXIgTlVMTCA9IHZhbHVlUHJvbWlzZShudWxsKTtcbnZhciBVTkRFRklORUQgPSB2YWx1ZVByb21pc2UodW5kZWZpbmVkKTtcbnZhciBaRVJPID0gdmFsdWVQcm9taXNlKDApO1xudmFyIEVNUFRZU1RSSU5HID0gdmFsdWVQcm9taXNlKCcnKTtcblxuZnVuY3Rpb24gdmFsdWVQcm9taXNlKHZhbHVlKSB7XG4gIHZhciBwID0gbmV3IFByb21pc2UoUHJvbWlzZS5fNjEpO1xuICBwLl82NSA9IDE7XG4gIHAuXzU1ID0gdmFsdWU7XG4gIHJldHVybiBwO1xufVxuUHJvbWlzZS5yZXNvbHZlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFByb21pc2UpIHJldHVybiB2YWx1ZTtcblxuICBpZiAodmFsdWUgPT09IG51bGwpIHJldHVybiBOVUxMO1xuICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgcmV0dXJuIFVOREVGSU5FRDtcbiAgaWYgKHZhbHVlID09PSB0cnVlKSByZXR1cm4gVFJVRTtcbiAgaWYgKHZhbHVlID09PSBmYWxzZSkgcmV0dXJuIEZBTFNFO1xuICBpZiAodmFsdWUgPT09IDApIHJldHVybiBaRVJPO1xuICBpZiAodmFsdWUgPT09ICcnKSByZXR1cm4gRU1QVFlTVFJJTkc7XG5cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgfHwgdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgdHJ5IHtcbiAgICAgIHZhciB0aGVuID0gdmFsdWUudGhlbjtcbiAgICAgIGlmICh0eXBlb2YgdGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UodGhlbi5iaW5kKHZhbHVlKSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHJlamVjdChleCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHZhbHVlUHJvbWlzZSh2YWx1ZSk7XG59O1xuXG5Qcm9taXNlLmFsbCA9IGZ1bmN0aW9uIChhcnIpIHtcbiAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcnIpO1xuXG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgaWYgKGFyZ3MubGVuZ3RoID09PSAwKSByZXR1cm4gcmVzb2x2ZShbXSk7XG4gICAgdmFyIHJlbWFpbmluZyA9IGFyZ3MubGVuZ3RoO1xuICAgIGZ1bmN0aW9uIHJlcyhpLCB2YWwpIHtcbiAgICAgIGlmICh2YWwgJiYgKHR5cGVvZiB2YWwgPT09ICdvYmplY3QnIHx8IHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbicpKSB7XG4gICAgICAgIGlmICh2YWwgaW5zdGFuY2VvZiBQcm9taXNlICYmIHZhbC50aGVuID09PSBQcm9taXNlLnByb3RvdHlwZS50aGVuKSB7XG4gICAgICAgICAgd2hpbGUgKHZhbC5fNjUgPT09IDMpIHtcbiAgICAgICAgICAgIHZhbCA9IHZhbC5fNTU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh2YWwuXzY1ID09PSAxKSByZXR1cm4gcmVzKGksIHZhbC5fNTUpO1xuICAgICAgICAgIGlmICh2YWwuXzY1ID09PSAyKSByZWplY3QodmFsLl81NSk7XG4gICAgICAgICAgdmFsLnRoZW4oZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgcmVzKGksIHZhbCk7XG4gICAgICAgICAgfSwgcmVqZWN0KTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIHRoZW4gPSB2YWwudGhlbjtcbiAgICAgICAgICBpZiAodHlwZW9mIHRoZW4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHZhciBwID0gbmV3IFByb21pc2UodGhlbi5iaW5kKHZhbCkpO1xuICAgICAgICAgICAgcC50aGVuKGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgICAgcmVzKGksIHZhbCk7XG4gICAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYXJnc1tpXSA9IHZhbDtcbiAgICAgIGlmICgtLXJlbWFpbmluZyA9PT0gMCkge1xuICAgICAgICByZXNvbHZlKGFyZ3MpO1xuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIHJlcyhpLCBhcmdzW2ldKTtcbiAgICB9XG4gIH0pO1xufTtcblxuUHJvbWlzZS5yZWplY3QgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICByZWplY3QodmFsdWUpO1xuICB9KTtcbn07XG5cblByb21pc2UucmFjZSA9IGZ1bmN0aW9uICh2YWx1ZXMpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICB2YWx1ZXMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSl7XG4gICAgICBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICB9KTtcbiAgfSk7XG59O1xuXG4vKiBQcm90b3R5cGUgTWV0aG9kcyAqL1xuXG5Qcm9taXNlLnByb3RvdHlwZVsnY2F0Y2gnXSA9IGZ1bmN0aW9uIChvblJlamVjdGVkKSB7XG4gIHJldHVybiB0aGlzLnRoZW4obnVsbCwgb25SZWplY3RlZCk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgUHJvbWlzZSA9IHJlcXVpcmUoJy4vY29yZS5qcycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFByb21pc2U7XG5Qcm9taXNlLnByb3RvdHlwZVsnZmluYWxseSddID0gZnVuY3Rpb24gKGYpIHtcbiAgcmV0dXJuIHRoaXMudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGYoKSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSk7XG4gIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGYoKSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfSk7XG4gIH0pO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2NvcmUuanMnKTtcbnJlcXVpcmUoJy4vZG9uZS5qcycpO1xucmVxdWlyZSgnLi9maW5hbGx5LmpzJyk7XG5yZXF1aXJlKCcuL2VzNi1leHRlbnNpb25zLmpzJyk7XG5yZXF1aXJlKCcuL25vZGUtZXh0ZW5zaW9ucy5qcycpO1xucmVxdWlyZSgnLi9zeW5jaHJvbm91cy5qcycpO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vLyBUaGlzIGZpbGUgY29udGFpbnMgdGhlbi9wcm9taXNlIHNwZWNpZmljIGV4dGVuc2lvbnMgdGhhdCBhcmUgb25seSB1c2VmdWxcbi8vIGZvciBub2RlLmpzIGludGVyb3BcblxudmFyIFByb21pc2UgPSByZXF1aXJlKCcuL2NvcmUuanMnKTtcbnZhciBhc2FwID0gcmVxdWlyZSgnYXNhcCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFByb21pc2U7XG5cbi8qIFN0YXRpYyBGdW5jdGlvbnMgKi9cblxuUHJvbWlzZS5kZW5vZGVpZnkgPSBmdW5jdGlvbiAoZm4sIGFyZ3VtZW50Q291bnQpIHtcbiAgaWYgKFxuICAgIHR5cGVvZiBhcmd1bWVudENvdW50ID09PSAnbnVtYmVyJyAmJiBhcmd1bWVudENvdW50ICE9PSBJbmZpbml0eVxuICApIHtcbiAgICByZXR1cm4gZGVub2RlaWZ5V2l0aENvdW50KGZuLCBhcmd1bWVudENvdW50KTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZGVub2RlaWZ5V2l0aG91dENvdW50KGZuKTtcbiAgfVxufTtcblxudmFyIGNhbGxiYWNrRm4gPSAoXG4gICdmdW5jdGlvbiAoZXJyLCByZXMpIHsnICtcbiAgJ2lmIChlcnIpIHsgcmooZXJyKTsgfSBlbHNlIHsgcnMocmVzKTsgfScgK1xuICAnfSdcbik7XG5mdW5jdGlvbiBkZW5vZGVpZnlXaXRoQ291bnQoZm4sIGFyZ3VtZW50Q291bnQpIHtcbiAgdmFyIGFyZ3MgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudENvdW50OyBpKyspIHtcbiAgICBhcmdzLnB1c2goJ2EnICsgaSk7XG4gIH1cbiAgdmFyIGJvZHkgPSBbXG4gICAgJ3JldHVybiBmdW5jdGlvbiAoJyArIGFyZ3Muam9pbignLCcpICsgJykgeycsXG4gICAgJ3ZhciBzZWxmID0gdGhpczsnLFxuICAgICdyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJzLCByaikgeycsXG4gICAgJ3ZhciByZXMgPSBmbi5jYWxsKCcsXG4gICAgWydzZWxmJ10uY29uY2F0KGFyZ3MpLmNvbmNhdChbY2FsbGJhY2tGbl0pLmpvaW4oJywnKSxcbiAgICAnKTsnLFxuICAgICdpZiAocmVzICYmJyxcbiAgICAnKHR5cGVvZiByZXMgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIHJlcyA9PT0gXCJmdW5jdGlvblwiKSAmJicsXG4gICAgJ3R5cGVvZiByZXMudGhlbiA9PT0gXCJmdW5jdGlvblwiJyxcbiAgICAnKSB7cnMocmVzKTt9JyxcbiAgICAnfSk7JyxcbiAgICAnfTsnXG4gIF0uam9pbignJyk7XG4gIHJldHVybiBGdW5jdGlvbihbJ1Byb21pc2UnLCAnZm4nXSwgYm9keSkoUHJvbWlzZSwgZm4pO1xufVxuZnVuY3Rpb24gZGVub2RlaWZ5V2l0aG91dENvdW50KGZuKSB7XG4gIHZhciBmbkxlbmd0aCA9IE1hdGgubWF4KGZuLmxlbmd0aCAtIDEsIDMpO1xuICB2YXIgYXJncyA9IFtdO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGZuTGVuZ3RoOyBpKyspIHtcbiAgICBhcmdzLnB1c2goJ2EnICsgaSk7XG4gIH1cbiAgdmFyIGJvZHkgPSBbXG4gICAgJ3JldHVybiBmdW5jdGlvbiAoJyArIGFyZ3Muam9pbignLCcpICsgJykgeycsXG4gICAgJ3ZhciBzZWxmID0gdGhpczsnLFxuICAgICd2YXIgYXJnczsnLFxuICAgICd2YXIgYXJnTGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aDsnLFxuICAgICdpZiAoYXJndW1lbnRzLmxlbmd0aCA+ICcgKyBmbkxlbmd0aCArICcpIHsnLFxuICAgICdhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggKyAxKTsnLFxuICAgICdmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeycsXG4gICAgJ2FyZ3NbaV0gPSBhcmd1bWVudHNbaV07JyxcbiAgICAnfScsXG4gICAgJ30nLFxuICAgICdyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJzLCByaikgeycsXG4gICAgJ3ZhciBjYiA9ICcgKyBjYWxsYmFja0ZuICsgJzsnLFxuICAgICd2YXIgcmVzOycsXG4gICAgJ3N3aXRjaCAoYXJnTGVuZ3RoKSB7JyxcbiAgICBhcmdzLmNvbmNhdChbJ2V4dHJhJ10pLm1hcChmdW5jdGlvbiAoXywgaW5kZXgpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgICdjYXNlICcgKyAoaW5kZXgpICsgJzonICtcbiAgICAgICAgJ3JlcyA9IGZuLmNhbGwoJyArIFsnc2VsZiddLmNvbmNhdChhcmdzLnNsaWNlKDAsIGluZGV4KSkuY29uY2F0KCdjYicpLmpvaW4oJywnKSArICcpOycgK1xuICAgICAgICAnYnJlYWs7J1xuICAgICAgKTtcbiAgICB9KS5qb2luKCcnKSxcbiAgICAnZGVmYXVsdDonLFxuICAgICdhcmdzW2FyZ0xlbmd0aF0gPSBjYjsnLFxuICAgICdyZXMgPSBmbi5hcHBseShzZWxmLCBhcmdzKTsnLFxuICAgICd9JyxcbiAgICBcbiAgICAnaWYgKHJlcyAmJicsXG4gICAgJyh0eXBlb2YgcmVzID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiByZXMgPT09IFwiZnVuY3Rpb25cIikgJiYnLFxuICAgICd0eXBlb2YgcmVzLnRoZW4gPT09IFwiZnVuY3Rpb25cIicsXG4gICAgJykge3JzKHJlcyk7fScsXG4gICAgJ30pOycsXG4gICAgJ307J1xuICBdLmpvaW4oJycpO1xuXG4gIHJldHVybiBGdW5jdGlvbihcbiAgICBbJ1Byb21pc2UnLCAnZm4nXSxcbiAgICBib2R5XG4gICkoUHJvbWlzZSwgZm4pO1xufVxuXG5Qcm9taXNlLm5vZGVpZnkgPSBmdW5jdGlvbiAoZm4pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XG4gICAgdmFyIGNhbGxiYWNrID1cbiAgICAgIHR5cGVvZiBhcmdzW2FyZ3MubGVuZ3RoIC0gMV0gPT09ICdmdW5jdGlvbicgPyBhcmdzLnBvcCgpIDogbnVsbDtcbiAgICB2YXIgY3R4ID0gdGhpcztcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykubm9kZWlmeShjYWxsYmFjaywgY3R4KTtcbiAgICB9IGNhdGNoIChleCkge1xuICAgICAgaWYgKGNhbGxiYWNrID09PSBudWxsIHx8IHR5cGVvZiBjYWxsYmFjayA9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgIHJlamVjdChleCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXNhcChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgY2FsbGJhY2suY2FsbChjdHgsIGV4KTtcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLm5vZGVpZnkgPSBmdW5jdGlvbiAoY2FsbGJhY2ssIGN0eCkge1xuICBpZiAodHlwZW9mIGNhbGxiYWNrICE9ICdmdW5jdGlvbicpIHJldHVybiB0aGlzO1xuXG4gIHRoaXMudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICBhc2FwKGZ1bmN0aW9uICgpIHtcbiAgICAgIGNhbGxiYWNrLmNhbGwoY3R4LCBudWxsLCB2YWx1ZSk7XG4gICAgfSk7XG4gIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICBhc2FwKGZ1bmN0aW9uICgpIHtcbiAgICAgIGNhbGxiYWNrLmNhbGwoY3R4LCBlcnIpO1xuICAgIH0pO1xuICB9KTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBQcm9taXNlID0gcmVxdWlyZSgnLi9jb3JlLmpzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gUHJvbWlzZTtcblByb21pc2UuZW5hYmxlU3luY2hyb25vdXMgPSBmdW5jdGlvbiAoKSB7XG4gIFByb21pc2UucHJvdG90eXBlLmlzUGVuZGluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmdldFN0YXRlKCkgPT0gMDtcbiAgfTtcblxuICBQcm9taXNlLnByb3RvdHlwZS5pc0Z1bGZpbGxlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmdldFN0YXRlKCkgPT0gMTtcbiAgfTtcblxuICBQcm9taXNlLnByb3RvdHlwZS5pc1JlamVjdGVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0U3RhdGUoKSA9PSAyO1xuICB9O1xuXG4gIFByb21pc2UucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLl82NSA9PT0gMykge1xuICAgICAgcmV0dXJuIHRoaXMuXzU1LmdldFZhbHVlKCk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmlzRnVsZmlsbGVkKCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGdldCBhIHZhbHVlIG9mIGFuIHVuZnVsZmlsbGVkIHByb21pc2UuJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuXzU1O1xuICB9O1xuXG4gIFByb21pc2UucHJvdG90eXBlLmdldFJlYXNvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5fNjUgPT09IDMpIHtcbiAgICAgIHJldHVybiB0aGlzLl81NS5nZXRSZWFzb24oKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuaXNSZWplY3RlZCgpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBnZXQgYSByZWplY3Rpb24gcmVhc29uIG9mIGEgbm9uLXJlamVjdGVkIHByb21pc2UuJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuXzU1O1xuICB9O1xuXG4gIFByb21pc2UucHJvdG90eXBlLmdldFN0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLl82NSA9PT0gMykge1xuICAgICAgcmV0dXJuIHRoaXMuXzU1LmdldFN0YXRlKCk7XG4gICAgfVxuICAgIGlmICh0aGlzLl82NSA9PT0gLTEgfHwgdGhpcy5fNjUgPT09IC0yKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fNjU7XG4gIH07XG59O1xuXG5Qcm9taXNlLmRpc2FibGVTeW5jaHJvbm91cyA9IGZ1bmN0aW9uKCkge1xuICBQcm9taXNlLnByb3RvdHlwZS5pc1BlbmRpbmcgPSB1bmRlZmluZWQ7XG4gIFByb21pc2UucHJvdG90eXBlLmlzRnVsZmlsbGVkID0gdW5kZWZpbmVkO1xuICBQcm9taXNlLnByb3RvdHlwZS5pc1JlamVjdGVkID0gdW5kZWZpbmVkO1xuICBQcm9taXNlLnByb3RvdHlwZS5nZXRWYWx1ZSA9IHVuZGVmaW5lZDtcbiAgUHJvbWlzZS5wcm90b3R5cGUuZ2V0UmVhc29uID0gdW5kZWZpbmVkO1xuICBQcm9taXNlLnByb3RvdHlwZS5nZXRTdGF0ZSA9IHVuZGVmaW5lZDtcbn07XG4iLCIndXNlIHN0cmljdCc7XG52YXIgZGlhbG9nID0gcmVxdWlyZSgnLi9kaWFsb2cnKTtcblxudmFyICRjYWNoZSA9IHt9O1xuXG5mdW5jdGlvbiBpbml0aWFsaXplQ2FjaGUoKSB7XG4gICAgJGNhY2hlLnByaW1hcnkgPSAkKCcjcHJpbWFyeScpO1xuICAgICRjYWNoZS5jaGVja291dEZvcm0gPSAkY2FjaGUucHJpbWFyeS5maW5kKCcuY2hlY2tvdXQtc2hpcHBpbmcuYWRkcmVzcycpLmxlbmd0aCA+IDAgPyAkY2FjaGUucHJpbWFyeS5maW5kKCcuY2hlY2tvdXQtc2hpcHBpbmcuYWRkcmVzcycpIDogJGNhY2hlLnByaW1hcnkuZmluZCgnLmNoZWNrb3V0LWJpbGxpbmcuYWRkcmVzcycpO1xuICAgICRjYWNoZS5zdWJtaXRGb3JtQnV0dG9uID0gJGNhY2hlLmNoZWNrb3V0Rm9ybS5maW5kKCdidXR0b24uc2F2ZVNoaXBwaW5nJykubGVuZ3RoID4gMCA/ICRjYWNoZS5jaGVja291dEZvcm0uZmluZCgnYnV0dG9uLnNhdmVTaGlwcGluZycpIDogJGNhY2hlLmNoZWNrb3V0Rm9ybS5maW5kKCdidXR0b25bbmFtZSQ9X3NhdmVdJyk7XG4gICAgJGNhY2hlLnZhbGlkYXRvaW9uRGlhbG9nID0gJGNhY2hlLnByaW1hcnkuZmluZCgnI2FkZHJlc3MtdmFsaWRhdGlvbi1kaWFsb2cnKTtcbiAgICAkY2FjaGUuYnlQYXNzREFWID0gJGNhY2hlLmNoZWNrb3V0Rm9ybS5maW5kKCcuYnlwYXNzREFWJyk7XG4gICAgJGNhY2hlLmFkZHJlc3MxID0gJGNhY2hlLmNoZWNrb3V0Rm9ybS5maW5kKCdpbnB1dFtuYW1lJD1cIl9hZGRyZXNzMVwiXScpO1xuICAgICRjYWNoZS5hZGRyZXNzMiA9ICRjYWNoZS5jaGVja291dEZvcm0uZmluZCgnaW5wdXRbbmFtZSQ9XCJfYWRkcmVzczJcIl0nKTtcbiAgICAkY2FjaGUuY2l0eSA9ICRjYWNoZS5jaGVja291dEZvcm0uZmluZCgnaW5wdXRbbmFtZSQ9XCJfY2l0eVwiXScpO1xuICAgICRjYWNoZS5zdGF0ZUNvZGUgPSAkY2FjaGUuY2hlY2tvdXRGb3JtLmZpbmQoJ3NlbGVjdFtpZCQ9XCJfc3RhdGVcIl0nKTtcbiAgICAkY2FjaGUuY291bnRyeUNvZGUgPSAkY2FjaGUuY2hlY2tvdXRGb3JtLmZpbmQoJ3NlbGVjdFtpZCQ9XCJfY291bnRyeVwiXScpO1xuICAgICRjYWNoZS5wb3N0YWxDb2RlID0gJGNhY2hlLmNoZWNrb3V0Rm9ybS5maW5kKCdpbnB1dFtuYW1lJD1cIl9wb3N0YWxcIl0nKTtcbn1cblxuZnVuY3Rpb24gaW5pdGlhbGl6ZURvbSgpIHtcbiAgICBpZiAoJGNhY2hlLnZhbGlkYXRvaW9uRGlhbG9nLmxlbmd0aCA+IDApIHtcblxuICAgICAgICB2YXIgZGxnID0gZGlhbG9nLmNyZWF0ZSh7XG4gICAgICAgICAgICB0YXJnZXQ6ICRjYWNoZS52YWxpZGF0b2lvbkRpYWxvZyxcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICB3aWR0aDogMzAwLFxuICAgICAgICAgICAgICAgIGRpYWxvZ0NsYXNzOiAnYWRkcmVzcy12YWxpZGF0aW9uLWRpYWxvZycsXG4gICAgICAgICAgICAgICAgb3BlbjogaW5pdGlhbGl6ZUV2ZW50c1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAkY2FjaGUudmFsaWRhdG9pb25EaWFsb2cuc2hvdygpO1xuICAgICAgICBkbGcuZGlhbG9nKCdvcGVuJyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBpbml0aWFsaXplRXZlbnRzKCkge1xuXG4gICAgJGNhY2hlLnZhbGlkYXRvaW9uRGlhbG9nLm9uKCdjbGljaycsICcjb3JpZ2luYWwtYWRkcmVzcy1lZGl0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAkY2FjaGUudmFsaWRhdG9pb25EaWFsb2cuZGlhbG9nKCdjbG9zZScpO1xuICAgICAgICAkKCcuc2hpcHBpbmctYWRkcmVzcy1maWVsZC1zZWN0aW9uJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgJCgnLnNlbGVjdGVkLXNoaXBwaW5nLWFkZHJlc3MnKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICAgICAkKCcubmV3LWFkZHJlc3MtZmllbGQnKS5hZGRDbGFzcygnaGlkZScpO1xuXG4gICAgICAgIC8qalF1ZXJ5KCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XG4gICAgICAgICAgICBzY3JvbGxUb3A6ICQoJyNuYXZpZ2F0aW9uJykucG9zaXRpb24oKS50b3BcbiAgICAgICAgfSwgNTAwKTsqL1xuICAgIH0pO1xuICAgICRjYWNoZS52YWxpZGF0b2lvbkRpYWxvZy5vbignY2xpY2snLCAnI3N1Z2dlc3RlZC1hZGRyZXNzLWVkaXQtMScsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAkKCcuc2hpcHBpbmctYWRkcmVzcy1maWVsZC1zZWN0aW9uJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgJCgnLnNlbGVjdGVkLXNoaXBwaW5nLWFkZHJlc3MnKS5hZGRDbGFzcygnaGlkZScpO1xuICAgIH0pO1xuXG4gICAgJGNhY2hlLnZhbGlkYXRvaW9uRGlhbG9nLm9uKCdjbGljaycsICcjc2hpcC10by1vcmlnaW5hbC1hZGRyZXNzJywgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICRjYWNoZS52YWxpZGF0b2lvbkRpYWxvZy5kaWFsb2coJ2Nsb3NlJyk7XG4gICAgICAgICRjYWNoZS5ieVBhc3NEQVYuYXR0cigndmFsdWUnLCAndHJ1ZScpO1xuICAgICAgICAkY2FjaGUuc3VibWl0Rm9ybUJ1dHRvbi5jbGljaygpO1xuICAgIH0pO1xuXG4gICAgJGNhY2hlLnZhbGlkYXRvaW9uRGlhbG9nLm9uKCdjbGljaycsICdbaWR8PVwic3VnZ2VzdGVkLWFkZHJlc3MtZWRpdFwiXScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNlbGVjdGVkQWRkcmVzcyA9ICQodGhpcykuZGF0YSgnYWRkcmVzcycpLnNwbGl0KCd8fCcpO1xuICAgICAgICAkY2FjaGUuYWRkcmVzczEudmFsKHNlbGVjdGVkQWRkcmVzc1swXSk7XG4gICAgICAgIGlmIChzZWxlY3RlZEFkZHJlc3NbMV0gIT09ICd1bmRlZmluZWQnICYmIHNlbGVjdGVkQWRkcmVzc1sxXSAhPT0gJycpIHtcbiAgICAgICAgICAgICRjYWNoZS5hZGRyZXNzMi52YWwoc2VsZWN0ZWRBZGRyZXNzWzFdKTtcbiAgICAgICAgfVxuICAgICAgICAkY2FjaGUuY2l0eS52YWwoc2VsZWN0ZWRBZGRyZXNzWzJdKTtcbiAgICAgICAgJGNhY2hlLnN0YXRlQ29kZS52YWwoc2VsZWN0ZWRBZGRyZXNzWzNdKTtcbiAgICAgICAgJGNhY2hlLmNvdW50cnlDb2RlLnZhbChzZWxlY3RlZEFkZHJlc3NbNF0pO1xuICAgICAgICAkY2FjaGUucG9zdGFsQ29kZS52YWwoc2VsZWN0ZWRBZGRyZXNzWzVdKTtcbiAgICAgICAgJGNhY2hlLnZhbGlkYXRvaW9uRGlhbG9nLmRpYWxvZygnY2xvc2UnKTtcbiAgICAgICAgalF1ZXJ5KCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XG4gICAgICAgICAgICBzY3JvbGxUb3A6ICQoJyNuYXZpZ2F0aW9uJykucG9zaXRpb24oKS50b3BcbiAgICAgICAgfSwgNTAwKTtcbiAgICB9KTtcblxuICAgICRjYWNoZS52YWxpZGF0b2lvbkRpYWxvZy5vbignY2xpY2snLCAnW2lkfD1cInNoaXAtdG8tYWRkcmVzcy1zZWxlY3RlZFwiXScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNlbGVjdGVkQWRkcmVzcyA9ICQodGhpcykuZGF0YSgnYWRkcmVzcycpLnNwbGl0KCd8fCcpO1xuICAgICAgICAkY2FjaGUuYWRkcmVzczEudmFsKHNlbGVjdGVkQWRkcmVzc1swXSk7XG4gICAgICAgIGlmIChzZWxlY3RlZEFkZHJlc3NbMV0gIT09ICd1bmRlZmluZWQnICYmIHNlbGVjdGVkQWRkcmVzc1sxXSAhPT0gJycpIHtcbiAgICAgICAgICAgICRjYWNoZS5hZGRyZXNzMi52YWwoc2VsZWN0ZWRBZGRyZXNzWzFdKTtcbiAgICAgICAgfVxuICAgICAgICAkY2FjaGUuY2l0eS52YWwoc2VsZWN0ZWRBZGRyZXNzWzJdKTtcbiAgICAgICAgJGNhY2hlLnN0YXRlQ29kZS52YWwoc2VsZWN0ZWRBZGRyZXNzWzNdKTtcbiAgICAgICAgJGNhY2hlLmNvdW50cnlDb2RlLnZhbChzZWxlY3RlZEFkZHJlc3NbNF0pO1xuICAgICAgICAkY2FjaGUucG9zdGFsQ29kZS52YWwoc2VsZWN0ZWRBZGRyZXNzWzVdKTtcbiAgICAgICAgJGNhY2hlLmJ5UGFzc0RBVi5hdHRyKCd2YWx1ZScsICd0cnVlJyk7XG4gICAgICAgICRjYWNoZS52YWxpZGF0b2lvbkRpYWxvZy5kaWFsb2coJ2Nsb3NlJyk7XG5cbiAgICAgICAgJGNhY2hlLnN1Ym1pdEZvcm1CdXR0b24uY2xpY2soKTtcbiAgICB9KTtcbn1cblxuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgIGluaXRpYWxpemVDYWNoZSgpO1xuICAgIGluaXRpYWxpemVEb20oKTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBwcm9ncmVzcyA9IHJlcXVpcmUoJy4vcHJvZ3Jlc3MnKSxcbiAgICB1dGlsID0gcmVxdWlyZSgnLi91dGlsJyk7XG5cbnZhciBjdXJyZW50UmVxdWVzdHMgPSBbXTtcblxuLyoqXG4gKiBAZnVuY3Rpb25cbiAqIEBkZXNjcmlwdGlvbiBBamF4IHJlcXVlc3QgdG8gZ2V0IGpzb24gcmVzcG9uc2VcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gYXN5bmMgIEFzeW5jaHJvbm91cyBvciBub3RcbiAqIEBwYXJhbSB7U3RyaW5nfSB1cmwgVVJJIGZvciB0aGUgcmVxdWVzdFxuICogQHBhcmFtIHtPYmplY3R9IGRhdGEgTmFtZS9WYWx1ZSBwYWlyIGRhdGEgcmVxdWVzdFxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgIENhbGxiYWNrIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZFxuICovXG52YXIgZ2V0SnNvbiA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgb3B0aW9ucy51cmwgPSB1dGlsLnRvQWJzb2x1dGVVcmwob3B0aW9ucy51cmwpO1xuICAgIC8vIHJldHVybiBpZiBubyB1cmwgZXhpc3RzIG9yIHVybCBtYXRjaGVzIGEgY3VycmVudCByZXF1ZXN0XG4gICAgaWYgKCFvcHRpb25zLnVybCB8fCBjdXJyZW50UmVxdWVzdHNbb3B0aW9ucy51cmxdKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjdXJyZW50UmVxdWVzdHNbb3B0aW9ucy51cmxdID0gdHJ1ZTtcblxuICAgIC8vIG1ha2UgdGhlIHNlcnZlciBjYWxsXG4gICAgJC5hamF4KHtcbiAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgdXJsOiBvcHRpb25zLnVybCxcbiAgICAgICAgYXN5bmM6ICh0eXBlb2Ygb3B0aW9ucy5hc3luYyA9PT0gJ3VuZGVmaW5lZCcgfHwgb3B0aW9ucy5hc3luYyA9PT0gbnVsbCkgPyB0cnVlIDogb3B0aW9ucy5hc3luYyxcbiAgICAgICAgZGF0YTogb3B0aW9ucy5kYXRhIHx8IHt9LFxuICAgICAgICB0eXBlOiBvcHRpb25zLnR5cGUgfHwgJ0dFVCcgLy9QUkVWQUlMLUFkZGVkIHRvIGhhbmRsZSBzZWN1cml0eSBmb3JtIGlzc3Vlcy5cbiAgICB9KVxuICAgIC8vIHN1Y2Nlc3NcbiAgICAgICAgLmRvbmUoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5jYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuY2FsbGJhY2socmVzcG9uc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAvLyBmYWlsZWRcbiAgICAgICAgLmZhaWwoZnVuY3Rpb24gKHhociwgdGV4dFN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHRleHRTdGF0dXMgPT09ICdwYXJzZXJlcnJvcicpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cuYWxlcnQoUmVzb3VyY2VzLkJBRF9SRVNQT05TRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5jYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuY2FsbGJhY2sobnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC8vIGV4ZWN1dGVkIG9uIHN1Y2Nlc3Mgb3IgZmFpbFxuICAgICAgICAuYWx3YXlzKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIHJlbW92ZSBjdXJyZW50IHJlcXVlc3QgZnJvbSBoYXNoXG4gICAgICAgICAgICBpZiAoY3VycmVudFJlcXVlc3RzW29wdGlvbnMudXJsXSkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBjdXJyZW50UmVxdWVzdHNbb3B0aW9ucy51cmxdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbn07XG4vKipcbiAqIEBmdW5jdGlvblxuICogQGRlc2NyaXB0aW9uIGFqYXggcmVxdWVzdCB0byBsb2FkIGh0bWwgcmVzcG9uc2UgaW4gYSBnaXZlbiBjb250YWluZXJcbiAqIEBwYXJhbSB7U3RyaW5nfSB1cmwgVVJJIGZvciB0aGUgcmVxdWVzdFxuICogQHBhcmFtIHtPYmplY3R9IGRhdGEgTmFtZS9WYWx1ZSBwYWlyIGRhdGEgcmVxdWVzdFxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgIENhbGxiYWNrIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZFxuICogQHBhcmFtIHtPYmplY3R9IHRhcmdldCBTZWxlY3RvciBvciBlbGVtZW50IHRoYXQgd2lsbCByZWNlaXZlIGNvbnRlbnRcbiAqL1xudmFyIGxvYWQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgIG9wdGlvbnMudXJsID0gdXRpbC50b0Fic29sdXRlVXJsKG9wdGlvbnMudXJsKTtcbiAgICAvLyByZXR1cm4gaWYgbm8gdXJsIGV4aXN0cyBvciB1cmwgbWF0Y2hlcyBhIGN1cnJlbnQgcmVxdWVzdFxuICAgIGlmICghb3B0aW9ucy51cmwgfHwgY3VycmVudFJlcXVlc3RzW29wdGlvbnMudXJsXSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY3VycmVudFJlcXVlc3RzW29wdGlvbnMudXJsXSA9IHRydWU7XG5cbiAgICAvLyBtYWtlIHRoZSBzZXJ2ZXIgY2FsbFxuICAgICQuYWpheCh7XG4gICAgICAgIGRhdGFUeXBlOiAnaHRtbCcsXG4gICAgICAgIHVybDogdXRpbC5hcHBlbmRQYXJhbVRvVVJMKG9wdGlvbnMudXJsLCAnZm9ybWF0JywgJ2FqYXgnKSxcbiAgICAgICAgZGF0YTogb3B0aW9ucy5kYXRhLFxuICAgICAgICB4aHJGaWVsZHM6IHtcbiAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICB0eXBlOiBvcHRpb25zLnR5cGUgfHwgJ0dFVCcgLy9QUkVWQUlMLUFkZGVkIHRvIGhhbmRsZSBzZWN1cml0eSBmb3JtIGlzc3Vlcy5cbiAgICB9KVxuICAgICAgICAuZG9uZShmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIC8vIHN1Y2Nlc3NcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnRhcmdldCkge1xuICAgICAgICAgICAgICAgICQob3B0aW9ucy50YXJnZXQpLmVtcHR5KCkuaHRtbChyZXNwb25zZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5jYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuY2FsbGJhY2socmVzcG9uc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAuZmFpbChmdW5jdGlvbiAoeGhyLCB0ZXh0U3RhdHVzKSB7XG4gICAgICAgICAgICAvLyBmYWlsZWRcbiAgICAgICAgICAgIGlmICh0ZXh0U3RhdHVzID09PSAncGFyc2VyZXJyb3InKSB7XG4gICAgICAgICAgICAgICAgd2luZG93LmFsZXJ0KFJlc291cmNlcy5CQURfUkVTUE9OU0UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3B0aW9ucy5jYWxsYmFjayhudWxsLCB0ZXh0U3RhdHVzKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmFsd2F5cyhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBwcm9ncmVzcy5oaWRlKCk7XG4gICAgICAgICAgICAvLyByZW1vdmUgY3VycmVudCByZXF1ZXN0IGZyb20gaGFzaFxuICAgICAgICAgICAgaWYgKGN1cnJlbnRSZXF1ZXN0c1tvcHRpb25zLnVybF0pIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgY3VycmVudFJlcXVlc3RzW29wdGlvbnMudXJsXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG59O1xuXG5leHBvcnRzLmdldEpzb24gPSBnZXRKc29uO1xuZXhwb3J0cy5sb2FkID0gbG9hZDtcbiIsIi8qKlxuICogICAgKGMpIDIwMDktMjAxNCBEZW1hbmR3YXJlIEluYy5cbiAqICAgIFN1YmplY3QgdG8gc3RhbmRhcmQgdXNhZ2UgdGVybXMgYW5kIGNvbmRpdGlvbnNcbiAqICAgIEZvciBhbGwgZGV0YWlscyBhbmQgZG9jdW1lbnRhdGlvbjpcbiAqICAgIGh0dHBzOi8vYml0YnVja2V0LmNvbS9kZW1hbmR3YXJlL3NpdGVnZW5lc2lzXG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIGNvdW50cmllcyA9IHJlcXVpcmUoJy4vY291bnRyaWVzJyksXG4gICAgZGlhbG9nID0gcmVxdWlyZSgnLi9kaWFsb2cnKSxcbiAgICBtaW5pY2FydCA9IHJlcXVpcmUoJy4vbWluaWNhcnQnKSxcbiAgICBwYWdlID0gcmVxdWlyZSgnLi9wYWdlJyksXG4gICAgc2VhcmNocGxhY2Vob2xkZXIgPSByZXF1aXJlKCcuL3NlYXJjaHBsYWNlaG9sZGVyJyksXG4gICAgc2VhcmNoc3VnZ2VzdCA9IHJlcXVpcmUoJy4vc2VhcmNoc3VnZ2VzdCcpLFxuICAgIHRvb2x0aXAgPSByZXF1aXJlKCcuL3Rvb2x0aXAnKSxcbiAgICB1dGlsID0gcmVxdWlyZSgnLi91dGlsJyksXG4gICAgdmFsaWRhdG9yID0gcmVxdWlyZSgnLi92YWxpZGF0b3InKSxcbiAgICBtZWdhbWVudSA9IHJlcXVpcmUoJy4vbWVnYW1lbnUnKSxcbiAgICBoZWFkZXJpbml0ID0gcmVxdWlyZSgnLi9oZWFkZXJpbml0JyksXG4gICAgdWlldmVudHMgPSByZXF1aXJlKCcuL3VpZXZlbnRzJyksXG4gICAgLy9wcm9ncmVzcyA9IHJlcXVpcmUoJy4vcHJvZ3Jlc3MnKSxcbiAgICB0bHMgPSByZXF1aXJlKCcuL3RscycpLFxuICAgIHRhZ21hbmFnZXIgPSByZXF1aXJlKCcuL3RhZ21hbmFnZXInKTtcblxuLy8gaWYgalF1ZXJ5IGhhcyBub3QgYmVlbiBsb2FkZWQsIGxvYWQgZnJvbSBnb29nbGUgY2RuXG5pZiAoIXdpbmRvdy5qUXVlcnkpIHtcbiAgICB2YXIgcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgIHMuc2V0QXR0cmlidXRlKCdzcmMnLCAnaHR0cHM6Ly9hamF4Lmdvb2dsZWFwaXMuY29tL2FqYXgvbGlicy9qcXVlcnkvMS43LjEvanF1ZXJ5Lm1pbi5qcycpO1xuICAgIHMuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQvamF2YXNjcmlwdCcpO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF0uYXBwZW5kQ2hpbGQocyk7XG59XG5cbnJlcXVpcmUoJy4vanF1ZXJ5LWV4dCcpKCk7XG5yZXF1aXJlKCcuL2Nvb2tpZXByaXZhY3knKSgpO1xucmVxdWlyZSgnLi9jYXB0Y2hhJykoKTtcblxudmFyICQgPSB3aW5kb3cualF1ZXJ5O1xuXG5mdW5jdGlvbiByZXNldFBhc3N3b3JkRXZlbnRzKCkge1xuICAgICQoJ2JvZHknKS5maW5kKCcuUGFzc3dvcmRSZXNldERpYWxvZyAuZmllbGQtd3JhcHBlciBpbnB1dCcpLm9mZignY2hhbmdlJykub24oJ2NsaWNrIGNoYW5nZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnZXJyb3JjbGllbnQnKTtcbiAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcucGFzc3dvcmRyZXNldCcpLmZpbmQoJyNtZXNzYWdlJykuaGlkZSgpO1xuICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcubGFiZWwnKS5maW5kKCdzcGFuLmVycm9yY2xpZW50JykucmVtb3ZlKCk7XG4gICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5mb3JtLXJvdyAsIC5sYWJlbCBzcGFuJykucmVtb3ZlQ2xhc3MoJ2lucHV0bGFiZWwnKTtcbiAgICB9KTtcbiAgICBpZiAoJCgnLlBhc3N3b3JkUmVzZXREaWFsb2cnKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICQoJy5QYXNzd29yZFJlc2V0RGlhbG9nJykuZmluZCgnLmZvcm1maWVsZCcpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCQodGhpcykuZmluZCgnLmZpZWxkLXdyYXBwZXIgLmNsZWFyYnV0dG9uJykubGVuZ3RoID09IDAgJiYgJCh0aGlzKS5maW5kKCcuZmllbGQtd3JhcHBlciBpbnB1dFt0eXBlPVwidGV4dFwiXScpLmxlbmd0aCA+IDAgfHwgJCh0aGlzKS5maW5kKCcuZmllbGQtd3JhcHBlciBpbnB1dFt0eXBlPVwicGFzc3dvcmRcIl0nKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuZmllbGQtd3JhcHBlcicpLmFwcGVuZCgnPGEgY2xhc3M9XCJjbGVhcmJ1dHRvblwiPjwvYT4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgICQoJ2JvZHknKS5maW5kKCcuUGFzc3dvcmRSZXNldERpYWxvZyBhLmNsZWFyYnV0dG9uJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5maWVsZC13cmFwcGVyJykuZmluZCgnc3BhbicpLnJlbW92ZSgpO1xuICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5maWVsZC13cmFwcGVyJykuZmluZCgnLnJlcXVpcmVkJykucmVtb3ZlQ2xhc3MoJ2Vycm9yY2xpZW50Jyk7XG4gICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCAnKS5maW5kKCcuZm9ybS1yb3cgLCAubGFiZWwgc3BhbicpLnJlbW92ZUNsYXNzKCdpbnB1dGxhYmVsJyk7XG4gICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJ2lucHV0JykudmFsKCcnKTtcbiAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnYS5jbGVhcmJ1dHRvbicpLmhpZGUoKTtcbiAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnc3Bhbi5sb2dlcnJvciAsIC5leGlzdGluZ19yZWdpc3RlcicpLmhpZGUoKTtcblxuICAgIH0pO1xuICAgIC8vIEF0dGFjaCBrZXlwcmVzcyBoYW5kbGVyIHRvIGlucHV0IGJveC4gIFN1Ym1pdCBmb3JtIGlmIHVzZXIgcHJlc3NlcyAnZW50ZXInIGtleS5cbiAgICAkKCdib2R5JykuZmluZCgnLlBhc3N3b3JkUmVzZXREaWFsb2cgaW5wdXQucmVzZXRvbGQnKS5rZXlwcmVzcyhmdW5jdGlvbiAoZSkge1xuICAgICAgICBpZiAoZS53aGljaCA9PSAxMykge1xuICAgICAgICAgICAgLy9qUXVlcnkoJyNzZW5kQnRuJykuY2xpY2soKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KTtcbiAgICAkKCdib2R5JykuZmluZCgnLlBhc3N3b3JkUmVzZXREaWFsb2cgLmZpZWxkLXdyYXBwZXIgaW5wdXQnKS5vbigna2V5dXAgaW5wdXQgYmx1cicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCQodGhpcykudmFsKCkgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAoJCh0aGlzKS52YWwoKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnYS5jbGVhcmJ1dHRvbicpLnNob3coKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnYS5jbGVhcmJ1dHRvbicpLmhpZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHZhciAkcmVxdWVzdFBhc3N3b3JkRm9ybSA9ICQoJ1tuYW1lJD1cIl9yZXF1ZXN0cGFzc3dvcmRcIl0nKSxcbiAgICAgICAgJHN1Ym1pdCA9ICRyZXF1ZXN0UGFzc3dvcmRGb3JtLmZpbmQoJ1tuYW1lJD1cIl9yZXF1ZXN0cGFzc3dvcmRfc2VuZFwiXScpO1xuICAgICQoJHN1Ym1pdCkub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgaWYgKCEkcmVxdWVzdFBhc3N3b3JkRm9ybS52YWxpZCgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBkaWFsb2cuc3VibWl0KCRzdWJtaXQuYXR0cignbmFtZScpKTtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXNldFBhc3N3b3JkRXZlbnRzKCk7XG4gICAgICAgIH0sIDEzMDApO1xuICAgIH0pO1xuICAgIHZhbGlkYXRvci5pbml0KCk7XG59XG5cbmZ1bmN0aW9uIGluaXRpYWxpemVFdmVudHMoKSB7XG4gICAgdmFyIGlzU2FmYXJpID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdTYWZhcmknKSA+IC0xO1xuICAgIHZhciBpc0Nocm9tZSA9IG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignQ2hyb21lJykgPiAtMTtcbiAgICB2YXIgaXNFeHBsb3JlciA9IG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignTVNJRScpID4gLTE7XG4gICAgdmFyIGlzRmlyZWZveCA9IG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignRmlyZWZveCcpID4gLTE7XG4gICAgLy92YXIgaXNfc2FmYXJpID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdTYWZhcmknKSA+IC0xO1xuICAgIHZhciBpc09wZXJhID0gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJ29wJykgPiAtMTtcbiAgICBpZiAoKGlzQ2hyb21lKSAmJiAoaXNTYWZhcmkpKSB7XG4gICAgICAgIGlzU2FmYXJpID0gZmFsc2U7XG4gICAgfVxuICAgIGlmICgoaXNDaHJvbWUpICYmIChpc09wZXJhKSkge1xuICAgICAgICBpc0Nocm9tZSA9IGZhbHNlO1xuICAgIH1cbiAgICBpZiAoaXNTYWZhcmkpIHtcbiAgICAgICAgJCgnYm9keScpLmFkZENsYXNzKCdzYWZhcmktYnJvd3NlcicpO1xuICAgIH0gZWxzZSBpZiAoaXNGaXJlZm94KSB7XG4gICAgICAgICQoJ2JvZHknKS5hZGRDbGFzcygnZmlyZWZveC1icm93c2VyJyk7XG4gICAgfSBlbHNlIGlmIChpc0V4cGxvcmVyKSB7XG4gICAgICAgICQoJ2JvZHknKS5hZGRDbGFzcygnaWUtYnJvd3NlcicpO1xuICAgIH0gZWxzZSBpZiAoaXNDaHJvbWUpIHtcbiAgICAgICAgJCgnYm9keScpLmFkZENsYXNzKCdjaHJvbWUtYnJvd3NlcicpO1xuICAgIH1cbiAgICBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdNYWMgT1MgWCcpICE9IC0xKSB7XG4gICAgICAgICQoJ2JvZHknKS5hZGRDbGFzcygnbWFjJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgJCgnYm9keScpLmFkZENsYXNzKCdwYycpO1xuICAgIH1cbiAgICB2YXIgY29udHJvbEtleXMgPSBbJzgnLCAnMTMnLCAnNDYnLCAnNDUnLCAnMzYnLCAnMzUnLCAnMzgnLCAnMzcnLCAnNDAnLCAnMzknXTtcblxuICAgIC8vUFJFVkFJTC1BZGRlZCB0byBoYW5kbGUgZm9ybSBkaWFsb2cgYm94ZXMgc2VydmVyIHNpZGUgaXNzdWVzLlxuICAgICQoJ2JvZHknKS5vbignY2xpY2snLCAnLmRpYWxvZ2lmeSwgW2RhdGEtZGxnLW9wdGlvbnNdLCBbZGF0YS1kbGctYWN0aW9uXScsIHJlcXVpcmUoJy4vZGlhbG9naWZ5Jykuc2V0RGlhbG9naWZ5KVxuICAgICAgICAub24oJ2tleWRvd24nLCAndGV4dGFyZWFbZGF0YS1jaGFyYWN0ZXItbGltaXRdJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB0ZXh0ID0gJC50cmltKCQodGhpcykudmFsKCkpLFxuICAgICAgICAgICAgICAgIGNoYXJzTGltaXQgPSAkKHRoaXMpLmRhdGEoJ2NoYXJhY3Rlci1saW1pdCcpLFxuICAgICAgICAgICAgICAgIGNoYXJzVXNlZCA9IHRleHQubGVuZ3RoO1xuXG4gICAgICAgICAgICBpZiAoKGNoYXJzVXNlZCA+PSBjaGFyc0xpbWl0KSAmJiAoY29udHJvbEtleXMuaW5kZXhPZihlLndoaWNoLnRvU3RyaW5nKCkpIDwgMCkpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5vbignY2hhbmdlIGtleXVwIG1vdXNldXAnLCAndGV4dGFyZWFbZGF0YS1jaGFyYWN0ZXItbGltaXRdJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRleHQgPSAkLnRyaW0oJCh0aGlzKS52YWwoKSksXG4gICAgICAgICAgICAgICAgY2hhcnNMaW1pdCA9ICQodGhpcykuZGF0YSgnY2hhcmFjdGVyLWxpbWl0JyksXG4gICAgICAgICAgICAgICAgY2hhcnNVc2VkID0gdGV4dC5sZW5ndGgsXG4gICAgICAgICAgICAgICAgY2hhcnNSZW1haW4gPSBjaGFyc0xpbWl0IC0gY2hhcnNVc2VkO1xuXG4gICAgICAgICAgICBpZiAoY2hhcnNSZW1haW4gPCAwKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS52YWwodGV4dC5zbGljZSgwLCBjaGFyc1JlbWFpbikpO1xuICAgICAgICAgICAgICAgIGNoYXJzUmVtYWluID0gMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJCh0aGlzKS5uZXh0KCdkaXYuY2hhci1jb3VudCcpLmZpbmQoJy5jaGFyLXJlbWFpbi1jb3VudCcpLmh0bWwoY2hhcnNSZW1haW4pO1xuICAgICAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIGluaXRpYWxpemUgc2VhcmNoIHN1Z2dlc3Rpb25zLCBwZW5kaW5nIHRoZSB2YWx1ZSBvZiB0aGUgc2l0ZSBwcmVmZXJlbmNlKGVuaGFuY2VkU2VhcmNoU3VnZ2VzdGlvbnMpXG4gICAgICogdGhpcyB3aWxsIGVpdGhlciBpbml0IHRoZSBsZWdhY3koZmFsc2UpIG9yIHRoZSBiZXRhIHZlcnNpb25zKHRydWUpIG9mIHRoZSB0aGUgc2VhcmNoIHN1Z2dlc3QgZmVhdHVyZS5cbiAgICAgKiAqL1xuXG4gICAgLyoqKiBtaW5pY2FydCBoaWRlICoqKi9cbiAgICB2YXIgbWluaWNhcnRsaW5rID0gJCgnI2hlYWRlcndyYXBwZXIgI2hlYWRlciAucm93LmNvbHVtbjEgI21pbmljYXJ0IC5taW5pY2FydHRvdGFsIC5taW5pY2FydGljb24tY29udCAubWluaWNhcnQtYnV0dG9uJyk7XG4gICAgbWluaWNhcnRsaW5rLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpIDwgOTU5KSB7XG4gICAgICAgICAgICAkKCcjbWluaWNhcnQgLm1pbmljYXJ0Y29udGVudCcpLmhpZGUoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgdmFyICRzZWFyY2hDb250YWluZXIgPSAkKCcuc2l0ZS1zdWdnZXN0aW9uLXNlY3Rpb24nKTtcbiAgICBzZWFyY2hzdWdnZXN0LmluaXQoJHNlYXJjaENvbnRhaW5lciwgUmVzb3VyY2VzLlNJTVBMRV9TRUFSQ0gpO1xuXG4gICAgJCgnI3Bhc3N3b3JkLXJlc2V0Jykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBkaWFsb2cub3Blbih7XG4gICAgICAgICAgICB1cmw6ICQoZS50YXJnZXQpLmF0dHIoJ2hyZWYnKSxcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAvL1N0YXJ0IEpJUkEgUFJFVi0zMzQgOiBUaXRsZSBpcyBtaXNzaW5nIGZvciB0aGUgRm9yZ290IHBhc3N3b3JkIG92ZXJsYXkuXG4gICAgICAgICAgICAgICAgdGl0bGU6IFJlc291cmNlcy5GT1JHT1RfUEFTU1dPUkQsXG4gICAgICAgICAgICAgICAgd2lkdGg6IDQ3NSxcbiAgICAgICAgICAgICAgICBkaWFsb2dDbGFzczogJ1Bhc3N3b3JkUmVzZXREaWFsb2cnLFxuICAgICAgICAgICAgICAgIG9wZW46IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzZXRQYXNzd29yZEV2ZW50cygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyBwcmludCBoYW5kbGVyXG4gICAgJCgnLnByaW50LXBhZ2UnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHdpbmRvdy5wcmludCgpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG5cbiAgICAkKCcubW9iaWxlLWJhbm5lci1zdHVmZicpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYgKCQoJy5jYWxsb3V0ZXhpc3QnKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB2YXIgcHJvbW9DYWxsT3V0ID0gJCgnLmNhbGxvdXRleGlzdCcpLmh0bWwoKTtcbiAgICAgICAgICAgIHZhciBiYW5uZXJEaWFsb2dPcGVuID0gZGlhbG9nLmNyZWF0ZSh7XG4gICAgICAgICAgICAgICAgdGFyZ2V0OiAnI2NhbGxvdXRleGlzdCcsXG4gICAgICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgICAgICBkaWFsb2dDbGFzczogJ2RpYWxvZ0Jhbm5lcidcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHV0aWwuc2Nyb2xsQnJvd3NlcigkKCdodG1sJykub2Zmc2V0KCkudG9wKTtcbiAgICAgICAgICAgIGJhbm5lckRpYWxvZ09wZW4uaHRtbChwcm9tb0NhbGxPdXQpO1xuICAgICAgICAgICAgJCgnLnVpLWRpYWxvZy1jb250ZW50OnZpc2libGUnKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmRpYWxvZygnb3B0aW9uJywgJ3Bvc2l0aW9uJywgJCh0aGlzKS5kaWFsb2coJ29wdGlvbicsICdwb3NpdGlvbicpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYmFubmVyRGlhbG9nT3Blbi5kaWFsb2coJ29wZW4nKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuZGlhbG9nQmFubmVyICNjbG9zZUJ0bjAxJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5kaWFsb2dCYW5uZXInKS5maW5kKCcudWktZGlhbG9nLXRpdGxlYmFyLWNsb3NlJykudHJpZ2dlcignY2xpY2snKTtcbiAgICB9KTtcbiAgICAvL2Zvb3RlciBjaGFuZ2UgcmVnaW9uIGV2ZW50XG4gICAgJCgnLmNoYW5nZS1yZWdpb24tZm9vdGVyJykuaG92ZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcuZG9tYWluc3dpdGNoJykuc2hvdygpO1xuICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnLmRvbWFpbnN3aXRjaCcpLmhpZGUoKTtcbiAgICB9KTtcbiAgICAkKCcuZG9tYWluc3dpdGNoJykuaG92ZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICAkKHRoaXMpLnNob3coKTtcbiAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQodGhpcykuaGlkZSgpO1xuICAgIH0pO1xuICAgICQoJ2Rpdi5wc2V1ZG9fc2VsZl9sYWJlbCcpLmVhY2goXG4gICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciAkdGhpcyA9IGpRdWVyeSh0aGlzKTtcbiAgICAgICAgICAgIHZhciAkaW5wdXQgPSAkdGhpc1xuICAgICAgICAgICAgICAgIC5jaGlsZHJlbignaW5wdXRbdHlwZT1cInRleHRcIl0nKTtcbiAgICAgICAgICAgICRpbnB1dC5kYXRhKCd0b2dnbGUnLCAkaW5wdXQudmFsKCkpO1xuICAgICAgICAgICAgLy91c2VkIHRvIGFkZCBhIGNsYXNzIHRvIHBsYWNlaG9sZGVyIGZvciBzdHlsaW5nXG4gICAgICAgICAgICBpZiAoJCgnLmVtYWlsaW5wdXQuZW1haWxmb290ZXInKS5hdHRyKCdkYXRhLXBsYWNlaG9sZGVyJykgPT0gJGlucHV0LnZhbCgpKSB7XG4gICAgICAgICAgICAgICAgJCgnLmVtYWlsaW5wdXQuZW1haWxmb290ZXInKS5hZGRDbGFzcygnZm9vdGVycGxhY2UnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogaWYoalF1ZXJ5LnRyaW0oJGlucHV0LnZhbCgpKSAhPSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICogJGlucHV0LmRhdGEoJ3RvZ2dsZScpLmhpZGUoKTsgfSBlbHNlXG4gICAgICAgICAgICAgKmlmKCRpbnB1dC5kYXRhKCd0b2dnbGUnKSAmJlxuICAgICAgICAgICAgICogJGlucHV0LmRhdGEoJ3RvZ2dsZScpLnNpemUoKSA+PSAxKSB7XG4gICAgICAgICAgICAgICAgICogJGlucHV0LnZhbCgkaW5wdXQuZGF0YSgndG9nZ2xlJykpOyB9XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICRpbnB1dFxuICAgICAgICAgICAgICAgIC5ibHVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyICR0aGlzID0galF1ZXJ5KHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoalF1ZXJ5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRyaW0oJHRoaXMudmFsKCkpID09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAkdGhpcy5kYXRhKCd0b2dnbGUnKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkdGhpc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC52YWwoJHRoaXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmRhdGEoJ3RvZ2dsZScpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vdXNlZCB0byBhZGQgYSBjbGFzcyB0byBwbGFjZWhvbGRlciBmb3Igc3R5bGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCQoJy5lbWFpbGlucHV0LmVtYWlsZm9vdGVyJykuYXR0cignZGF0YS1wbGFjZWhvbGRlcicpID09ICRpbnB1dC52YWwoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5lbWFpbGlucHV0LmVtYWlsZm9vdGVyJykuYWRkQ2xhc3MoJ2Zvb3RlcnBsYWNlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJGlucHV0XG4gICAgICAgICAgICAgICAgLmZvY3VzKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmVtYWlsaW5wdXQuZW1haWxmb290ZXInKS5yZW1vdmVDbGFzcygnZm9vdGVycGxhY2UnKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyICR0aGlzID0galF1ZXJ5KHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoJHRoaXMuZGF0YSgndG9nZ2xlJykgJiYgKGpRdWVyeVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50cmltKCR0aGlzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC52YWwoKSkgPT0galF1ZXJ5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRyaW0oJHRoaXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmRhdGEoJ3RvZ2dsZScpKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICR0aGlzLmRhdGEoJ3RvZ2dsZScpLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLnZhbCgnJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICR0aGlzXG4gICAgICAgICAgICAgICAgLnBhcmVudHMoJ2Zvcm0nKVxuICAgICAgICAgICAgICAgIC5zdWJtaXQoXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkdGhpcyA9IGpRdWVyeSh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYucHNldWRvX3NlbGZfbGFiZWwgaW5wdXQnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5lYWNoKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSBqUXVlcnkodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHRoaXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmRhdGEoJ3RvZ2dsZScpICYmICR0aGlzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5kYXRhKCd0b2dnbGUnKSA9PSAkdGhpc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudmFsKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGhpc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudmFsKCcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgIC8vXG4gICAgJCgnYm9keScpLm9uKCdzdWJtaXQnLCAnI2N1c3RvbWVyY29udGFjdHVzJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB2YXIgJGZvcm0gPSAkKHRoaXMpO1xuICAgICAgICBpZiAoJGZvcm0udmFsaWQoKSkge1xuICAgICAgICAgICAgLy8gc2V0IHRoZSBhY3Rpb25cbiAgICAgICAgICAgICQoJzxpbnB1dC8+JykuYXR0cih7XG4gICAgICAgICAgICAgICAgbmFtZTogJGZvcm0uYXR0cignYWN0aW9uJyksXG4gICAgICAgICAgICAgICAgdHlwZTogJ2hpZGRlbidcbiAgICAgICAgICAgIH0pLmFwcGVuZFRvKCRmb3JtKTtcbiAgICAgICAgICAgIC8vIHNlcmlhbGl6ZSB0aGUgZm9ybSBhbmQgZ2V0IHRoZSBwb3N0IHVybFxuICAgICAgICAgICAgdmFyIGRhdGEgPSAkZm9ybS5zZXJpYWxpemUoKTtcbiAgICAgICAgICAgIHZhciB1cmwgPSAkZm9ybS5hdHRyKCdhY3Rpb24nKTtcbiAgICAgICAgICAgIC8vIG1ha2Ugc3VyZSB0aGUgc2VydmVyIGtub3dzIHRoaXMgaXMgYW4gYWpheCByZXF1ZXN0XG4gICAgICAgICAgICBpZiAoZGF0YS5pbmRleE9mKCdhamF4JykgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgZGF0YSArPSAnJmZvcm1hdD1hamF4JztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdodG1sJyxcbiAgICAgICAgICAgICAgICBkYXRhOiBkYXRhXG4gICAgICAgICAgICB9KS5kb25lKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICQoJy5jb2x1bW4uY29sc3BhbjInKS5lbXB0eSgpLmh0bWwocmVzcG9uc2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgICQoJy5maXJzdC1sZXZlbCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCh0aGlzKS5jaGlsZHJlbignLnNlY29uZC1sZXZlbCcpLnRvZ2dsZSgpO1xuICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdsaXN0LWFjdGl2ZScpO1xuICAgIH0pO1xuICAgICQoJy5maXJzdC1sZXZlbCBsaS5hY3RpdmUnKS5jbG9zZXN0KCcuZmlyc3QtbGV2ZWwnKS5jbGljaygpO1xuICAgICQoJy5maXJzdC1sZXZlbCBsaSBhJykuY2xpY2soZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH0pO1xuICAgICQoJy5maXJzdC1sZXZlbGwnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQodGhpcykuY2hpbGRyZW4oJy5zZWNvbmQtbGV2ZWxsJykudG9nZ2xlKCk7XG4gICAgICAgIC8vJCh0aGlzKS50b2dnbGVDbGFzcygnbGlzdC1hY3RpdmUnKTtcbiAgICB9KTtcbiAgICAkKHdpbmRvdykubG9hZChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjdXJyZW50SXRlbSA9IG51bGw7XG4gICAgICAgIGlmICgkKCcubmV3TWFyZ2luJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY3VycmVudEl0ZW0gPSAkKCcubmV3TWFyZ2luJyk7XG4gICAgICAgICAgICBjdXJyZW50SXRlbS5wYXJlbnRzKCcuY2VsbC1oZWFkZXInKS5hZGRDbGFzcygnbmV3LW1hcmdpbi11cGRhdGUnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoJCgnLm5ld01hcmdpbi1vbmUnKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjdXJyZW50SXRlbSA9ICQoJy5uZXdNYXJnaW4tb25lJyk7XG4gICAgICAgICAgICBjdXJyZW50SXRlbS5wYXJlbnRzKCcuY2VsbC1oZWFkZXInKS5hZGRDbGFzcygnbmV3LW1hcmdpbi11cGRhdGVvbmUnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoJCgnLnZtYy1tYW51ZmFjdHVyZXItbWFyZ2luJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY3VycmVudEl0ZW0gPSAkKCcudm1jLW1hbnVmYWN0dXJlci1tYXJnaW4nKTtcbiAgICAgICAgICAgIGN1cnJlbnRJdGVtLnBhcmVudHMoJy5jZWxsLWhlYWRlcicpLmFkZENsYXNzKCdtYW51ZmFjdHVyZS1tYXJnaW4tdXBkYXRlJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCQoJy5zdHJpa2VtYXN0ZXItcGFyYWdyYXBoJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY3VycmVudEl0ZW0gPSAkKCcuc3RyaWtlbWFzdGVyLXBhcmFncmFwaCcpO1xuICAgICAgICAgICAgY3VycmVudEl0ZW0ucGFyZW50cygnLmNlbGwtaGVhZGVyJykuYWRkQ2xhc3MoJ3N0cmlrZW1hc3Rlci1tYXJnaW4tdXBkYXRlJyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHNwYW5jb3VudGxlZnRuYXYgPSAkKCcucHRfY3VzdG9tZXJzZXJ2aWNlIC5jdXN0b21lciAuY29sdW1uIC5jb250ZW50Ym94IC5sZWZ0LW5hdi10b3AgLmNvbnRlbnRib3hjb250ZW50IC5uYXYtZ3JvdXAgbGkgc3BhbicpO1xuICAgICAgICBzcGFuY291bnRsZWZ0bmF2LmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCQodGhpcykuaGVpZ2h0KCkgPiAxOSkge1xuICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ25ld29uZScpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCduZXdvbmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHNwYW5jb3VudGxlZnRuYXYgPSAkKCcucHRfY3VzdG9tZXJzZXJ2aWNlIC5zdHlsZS1jc2VydmljZSAuY29sdW1uIC5jb250ZW50Ym94IC5sZWZ0LW5hdi10b3AgLmNvbnRlbnRib3hjb250ZW50IC5uYXYtZ3JvdXAgbGkgc3BhbicpO1xuICAgICAgICBzcGFuY291bnRsZWZ0bmF2LmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCQodGhpcykuaGVpZ2h0KCkgPiAxOSkge1xuICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ25ld29uZScpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCduZXdvbmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmICgkKCcuc2hhZG93LWJveCcpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGN1cnJlbnRJdGVtID0gJCgnLnNoYWRvdy1ib3gnKTtcbiAgICAgICAgICAgIGN1cnJlbnRJdGVtLnBhcmVudHMoJy5wdF9jdXN0b21lcnNlcnZpY2UnKS5hZGRDbGFzcygncHRfY3VzdG9tZXJzZXJ2aWNlLWJveCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmICgkKCcuemVyby1tYXJnaW4nKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjdXJyZW50SXRlbSA9ICQoJy56ZXJvLW1hcmdpbicpO1xuICAgICAgICAgICAgY3VycmVudEl0ZW0ucGFyZW50cygnLmNlbGwtaGVhZGVyJykuYWRkQ2xhc3MoJ3plcm8tbWFyZ2luLWNlbGwtaGVhZGVyJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCQoJy5jaGVja291dGxvZ2luc2lnbmluJykuZmluZCgnLlRva2VuRXhwaXJlZCcpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICQoJyNwYXNzd29yZC1yZXNldCcpLnRyaWdnZXIoJ2NsaWNrJyk7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkKCcjZGlhbG9nLWNvbnRhaW5lcicpLmZpbmQoJ3AnKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgaWYgKCQoJyNkaWFsb2ctY29udGFpbmVyICNQYXNzd29yZFJlc2V0Rm9ybScpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnI2RpYWxvZy1jb250YWluZXIgI1Bhc3N3b3JkUmVzZXRGb3JtJykucHJlcGVuZCgnPGRpdiBjbGFzcz1cIlRva2VuRXhwaXJlRXJyb3JcIj5XZSYjMzk7cmUgc29ycnksIHRoZSBsaW5rIHRvIHJlc2V0IHlvdXIgcGFzc3dvcmQgaGFzIGV4cGlyZWQuIFJlc2V0IFBhc3N3b3JkIGxpbmtzIGV4cGlyZSBhZnRlciAzMCBtaW51dGVzIGZvciBzZWN1cml0eSBwdXJwb3Nlcy4gUGxlYXNlIHN1Ym1pdCB5b3VyIGVtYWlsIGFnYWluLjwvZGl2PicpO1xuICAgICAgICAgICAgICAgICAgICAkKCcjZGlhbG9nLWNvbnRhaW5lciAjUGFzc3dvcmRSZXNldEZvcm0gLnBhc3N3b3JkZW1haWwnKS5wcmVwZW5kKCc8ZGl2IGNsYXNzPVwiRW1haWxsYWJlbFwiPkVudGVyIHlvdXIgZW1haWwgYWRkcmVzcyB0byBnZXQgcmVzZXQgcGFzc3dvcmQgaW5zdHJ1Y3Rpb25zIHNlbnQgdG8geW91ciBpbmJveC48L2Rpdj4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAyMDAwKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgICQod2luZG93KS5yZXNpemUoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPiA5NjApIHtcbiAgICAgICAgICAgIGlmICgkKCcjY29udGFpbmVyJykuaGFzQ2xhc3MoJ2pzLWNvbnRhaW5lci1hY3RpdmUnKSkge1xuICAgICAgICAgICAgICAgICQoJyNjb250YWluZXIsIC5vcGVuLW1lbnUtd3JhcCcpLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XG4gICAgICAgICAgICAgICAgJCgnI2NvbnRhaW5lcicpLnJlbW92ZUNsYXNzKCdqcy1jb250YWluZXItYWN0aXZlJykuZmluZCgnLm1lbnUtdG9nZ2xlJykucmVtb3ZlQ2xhc3MoJ2pzLW1lbnUtdG9nZ2xlJyk7XG4gICAgICAgICAgICAgICAgJCgnI21haW4sICNmb290ZXJuZXcnKS51bndyYXAoKTtcbiAgICAgICAgICAgICAgICAkKCcjYnJhbmQtdGFicy1oZWFkZXInKS51bndyYXAoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vbWVnYW1lbnUuaW5pdCgpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgLy8gYWRkIGdlbmVyaWMgdG9nZ2xlIGZ1bmN0aW9uYWxpdHlcbiAgICAkKCcudG9nZ2xlJykubmV4dCgnLnRvZ2dsZS1jb250ZW50JykuaGlkZSgpO1xuICAgIGlmICgkKCcucHRfY2hlY2tvdXQnKS5sZW5ndGggPT0gMCkge1xuICAgICAgICBpZiAoJCgnLnB0X2N1c3RvbWVyc2VydmljZScpLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAkKCcudG9nZ2xlJykub2ZmKCdjbGljaycpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOyAvL0pJUkEgUFJFVi05MCA6IFdoZW4gY2xpY2sgb24gYWR2YW5jZSBzZWFyY2ggZnJvbSBnaWZ0IHJlZ2lzdHJ5IGxvZ2luIHBhZ2UsIGZvY3VzIGlzIGhhcHBlbmluZyB0b3dhcmRzIHRvcCBvZiB0aGUgcGFnZS5cbiAgICAgICAgICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdleHBhbmRlZCcpLm5leHQoJ3VsLCAudG9nZ2xlLWNvbnRlbnQnKS50b2dnbGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIHRvZ2dsZSBmb3IgY3VzdG9tZXIgc2VydmljZSBGQVFcbiAgICBpZiAoJCgnLnB0X2N1c3RvbWVyc2VydmljZScpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgJCgnLnNlY3Rpb24gYS50b2dnbGUnKS5vZmYoJ2NsaWNrJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICQodGhpcykucGFyZW50KCkubmV4dCgnLnJldmVhbCcpLnNsaWRlVG9nZ2xlKCdmYXN0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgICQoJyNmb290ZXJuZXcgLmZvb3Rlci1tYWluICNsaW5raGVhZGluZycpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygnc2hvdycpO1xuICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJ2RpdicpLnRvZ2dsZUNsYXNzKCdleHBhbmRlZCcpO1xuICAgICAgICBpZiAoJCgnI2Fib3V0LCAjY3VzdG9tZXItc2VydmljZSwgI01vcmUtd2F5cy10by1zaG9wJykuaGFzQ2xhc3MoJ2V4cGFuZGVkJykpIHtcbiAgICAgICAgICAgICQoJyNyYXBhbGFfaW5zaWRlcicpLmFkZENsYXNzKCduZXcnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoJyNyYXBhbGFfaW5zaWRlcicpLnJlbW92ZUNsYXNzKCduZXcnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoJCgnI2J1c25pbmVzcycpLmhhc0NsYXNzKCdleHBhbmRlZCcpKSB7XG4gICAgICAgICAgICAkKCcjZm9sbG93X3VzJykuYWRkQ2xhc3MoJ25ldycpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJCgnI2ZvbGxvd191cycpLnJlbW92ZUNsYXNzKCduZXcnKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gaXNUb3VjaERldmljZSgpIHtcbiAgICAgICAgcmV0dXJuIHRydWUgPT0gKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdyB8fCB3aW5kb3cuRG9jdW1lbnRUb3VjaCAmJiBkb2N1bWVudCBpbnN0YW5jZW9mIERvY3VtZW50VG91Y2gpO1xuICAgIH1cblxuICAgIGlmIChpc1RvdWNoRGV2aWNlKCkgPT09IHRydWUpIHtcbiAgICAgICAgLy9hbGVydCgnVG91Y2ggRGV2aWNlJyk7IC8veW91ciBsb2dpYyBmb3IgdG91Y2ggZGV2aWNlIGhlcmVcbiAgICAgICAgJCgnLm9sZC1zd2ltJykucmVtb3ZlQ2xhc3MoJ3Nob3cnKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICAgICAkKCcubmV3LXN3aW0nKS5yZW1vdmVDbGFzcygnaGlkZScpLmFkZENsYXNzKCdzaG93Jyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy9hbGVydCgnTm90IGEgVG91Y2ggRGV2aWNlJyk7Ly95b3VyIGxvZ2ljIGZvciBub24gdG91Y2ggZGV2aWNlIGhlcmVcbiAgICAgICAgJCgnLm9sZC1zd2ltJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKS5hZGRDbGFzcygnc2hvdycpO1xuICAgICAgICAkKCcubmV3LXN3aW0nKS5yZW1vdmVDbGFzcygnc2hvdycpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgfVxuICAgICQod2luZG93KS5iaW5kKCdzY3JvbGwgcmVzaXplJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoJCgnLnJhcGFsYV9kZXZpY2UnKS5sZW5ndGggPiAwICYmICQod2luZG93KS53aWR0aCgpIDwgNzY4KSB7XG4gICAgICAgICAgICBpZiAoJCgnI2Zvb3RlckVtYWlsRGlhbG9nLnVpLWRpYWxvZy1jb250ZW50JykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICQoJy51aS1kaWFsb2cnKS5jc3MoeydsZWZ0JzogKCQoZG9jdW1lbnQpLndpZHRoKCkgLSAkKCcudWktZGlhbG9nJykud2lkdGgoKSkgLyAyLCAndG9wJzogJzEwMHB4J30pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKCcudWktZGlhbG9nJykuY3NzKHsnbGVmdCc6ICgkKGRvY3VtZW50KS53aWR0aCgpIC0gJCgnLnVpLWRpYWxvZycpLndpZHRoKCkpIC8gMn0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgICQoJy50YWJzSGVhZGVyJykuYmluZCgnY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjdXJyZW50SXRlbSA9ICQodGhpcyk7XG4gICAgICAgIGN1cnJlbnRJdGVtLmNsb3Nlc3QoJy5tb2JpbGUtdGFicy1zZWN0aW9uJykudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIH0pO1xuXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy51cGdyYWRlbm93LWxpbmsnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcbiAgICAgICAgICAgIHNjcm9sbFRvcDogJCgnLnZpcGxvZ2luc2lnbmluJykub2Zmc2V0KCkudG9wXG4gICAgICAgIH0sIDIwMDApO1xuICAgIH0pO1xuICAgICQoJy5tZW51LWNhdGVnb3J5IGxpIC5tZW51LWl0ZW0tdG9nZ2xlJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB2YXIgJHBhcmVudExpID0gJChlLnRhcmdldCkuY2xvc2VzdCgnbGknKTtcbiAgICAgICAgJHBhcmVudExpLnNpYmxpbmdzKCdsaScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKS5maW5kKCcubWVudS1pdGVtLXRvZ2dsZScpLnJlbW92ZUNsYXNzKCdmYS1jaGV2cm9uLXVwIGFjdGl2ZScpLmFkZENsYXNzKCdmYS1jaGV2cm9uLXJpZ2h0Jyk7XG4gICAgICAgICRwYXJlbnRMaS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICQoZS50YXJnZXQpLnRvZ2dsZUNsYXNzKCdmYS1jaGV2cm9uLXJpZ2h0IGZhLWNoZXZyb24tdXAgYWN0aXZlJyk7XG4gICAgfSk7XG5cbiAgICAkKCdib2R5Jykub24oJ2NsaWNrJywgJy5kaWFsb2ctY2xvc2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQodGhpcykuY2xvc2VzdCgnLnVpLWRpYWxvZycpLmZpbmQoJy51aS1kaWFsb2ctdGl0bGViYXItY2xvc2UnKS50cmlnZ2VyKCdjbGljaycpO1xuICAgIH0pO1xuICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA+IDk1OSkge1xuICAgICAgICB2YXIgaXRlbSA9ICQoJy5zaWduLXVwLWJsaycpLFxuICAgICAgICAgICAgY2xpY2tJdGVtID0gaXRlbS5maW5kKCcudXNlcmxvZ2luJyk7XG5cbiAgICAgICAgY2xpY2tJdGVtLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgJCgnLmVtYWlsLXN1YnNjcmliZScpLnN1Ym1pdChmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHZhciAkZm9ybSA9ICQodGhpcyk7XG4gICAgICAgIGlmICgkZm9ybS52YWxpZCgpKSB7XG4gICAgICAgICAgICAvLyBzZXQgdGhlIGFjdGlvblxuICAgICAgICAgICAgJCgnPGlucHV0Lz4nKS5hdHRyKHtcbiAgICAgICAgICAgICAgICBuYW1lOiAkZm9ybS5hdHRyKCdhY3Rpb24nKSxcbiAgICAgICAgICAgICAgICB0eXBlOiAnaGlkZGVuJ1xuICAgICAgICAgICAgfSkuYXBwZW5kVG8oJGZvcm0pO1xuICAgICAgICAgICAgLy8gc2VyaWFsaXplIHRoZSBmb3JtIGFuZCBnZXQgdGhlIHBvc3QgdXJsXG4gICAgICAgICAgICB2YXIgZGF0YSA9ICRmb3JtLnNlcmlhbGl6ZSgpO1xuICAgICAgICAgICAgdmFyIHVybCA9ICRmb3JtLmF0dHIoJ2FjdGlvbicpO1xuICAgICAgICAgICAgLy8gbWFrZSBzdXJlIHRoZSBzZXJ2ZXIga25vd3MgdGhpcyBpcyBhbiBhamF4IHJlcXVlc3RcbiAgICAgICAgICAgIGlmIChkYXRhLmluZGV4T2YoJ2FqYXgnKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICBkYXRhICs9ICcmZm9ybWF0PWFqYXgnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBkaWFsb2cub3Blbih7XG4gICAgICAgICAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnZW1haWwnLFxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogODAwLFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDUzMCxcbiAgICAgICAgICAgICAgICAgICAgZGlhbG9nQ2xhc3M6ICdmb290ZXJFbWFpbERpYWxvZydcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9wZW46IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG59XG5cbi8qKlxuICogQHByaXZhdGVcbiAqIEBmdW5jdGlvblxuICogQGRlc2NyaXB0aW9uIEFkZHMgY2xhc3MgKCdqcycpIHRvIGh0bWwgZm9yIGNzcyB0YXJnZXRpbmcgYW5kIGxvYWRzIGpzIHNwZWNpZmljIHN0eWxlcy5cbiAqL1xuZnVuY3Rpb24gaW5pdGlhbGl6ZURvbSgpIHtcbiAgICAvLyBhZGQgY2xhc3MgdG8gaHRtbCBmb3IgY3NzIHRhcmdldGluZ1xuICAgICQoJ2h0bWwnKS5hZGRDbGFzcygnanMnKTtcbiAgICBpZiAoU2l0ZVByZWZlcmVuY2VzLkxJU1RJTkdfSU5GSU5JVEVfU0NST0xMKSB7XG4gICAgICAgICQoJ2h0bWwnKS5hZGRDbGFzcygnaW5maW5pdGUtc2Nyb2xsJyk7XG4gICAgfVxuICAgIC8vIGxvYWQganMgc3BlY2lmaWMgc3R5bGVzLy9cbiAgICB1dGlsLmxpbWl0Q2hhcmFjdGVycygpO1xufVxuXG52YXIgcGFnZXMgPSB7XG4gICAgYWNjb3VudDogcmVxdWlyZSgnLi9wYWdlcy9hY2NvdW50JyksXG4gICAgY2FydDogcmVxdWlyZSgnLi9wYWdlcy9jYXJ0JyksXG4gICAgY2hlY2tvdXQ6IHJlcXVpcmUoJy4vcGFnZXMvY2hlY2tvdXQnKSxcbiAgICBjb21wYXJlOiByZXF1aXJlKCcuL3BhZ2VzL2NvbXBhcmUnKSxcbiAgICBwcm9kdWN0OiByZXF1aXJlKCcuL3BhZ2VzL3Byb2R1Y3QnKSxcbiAgICByZWdpc3RyeTogcmVxdWlyZSgnLi9wYWdlcy9yZWdpc3RyeScpLFxuICAgIHNlYXJjaDogcmVxdWlyZSgnLi9wYWdlcy9zZWFyY2gnKSxcbiAgICBzdG9yZWZyb250OiByZXF1aXJlKCcuL3BhZ2VzL3N0b3JlZnJvbnQnKSxcbiAgICB3aXNobGlzdDogcmVxdWlyZSgnLi9wYWdlcy93aXNobGlzdCcpLFxuICAgIHJhcGFsYWluc2lkZXI6IHJlcXVpcmUoJy4vcGFnZXMvcmFwYWxhaW5zaWRlcicpLFxuICAgIHN0b3JlbG9jYXRvcjogcmVxdWlyZSgnLi9wYWdlcy9zdG9yZWxvY2F0b3InKSxcbiAgICBpbnRlcm5hdGlvbmFsOiByZXF1aXJlKCcuL3BhZ2VzL2ludGVybmF0aW9uYWwnKVxufTtcblxudmFyIGFwcCA9IHtcbiAgICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZ2VvaXBDb3VudHJ5Q29kZSA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB2YXIgSVBHZW9Db2RlID0gZ2VvaXBDb3VudHJ5Q29kZSgpO1xuICAgICAgICAgICAgdmFyIGFsbG93ZWRDb3VudHJpZXMgPSAkKCcuYWxsb3dlZC1jb3VudHJpZXMnKS50ZXh0KCk7XG4gICAgICAgICAgICBpZiAoYWxsb3dlZENvdW50cmllcyA9PSBudWxsIHx8IGFsbG93ZWRDb3VudHJpZXMgPT0gJ251bGwnIHx8IGFsbG93ZWRDb3VudHJpZXMgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBhbGxvd2VkQ291bnRyaWVzID0gJ1VTJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhbGxvd2VkQ291bnRyaWVzLmluZGV4T2YoSVBHZW9Db2RlKSA9PSAtMSkge1xuICAgICAgICAgICAgICAgICQoJ2h0bWwnKS5hZGRDbGFzcygnbm8tcHJpY2luZycpO1xuICAgICAgICAgICAgICAgICQoJy5ub24tdXNhLWFsZXJ0JykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgICAgICAgICAkKCcudWktY3VzdG9tZXIsLmRpdmlkZXJzLnBpcGUsLnVpLWVtYWlsLC51aS1zdG9yZWxvY2F0b3IsLnVpLXdpc2hsaXN0LC51aS1sb2dpbiwuaGFuZGxlLW5vbi11cywud2VsY29tZW1lc3NhZ2UsLmFub255bW91cywuc2l0ZS1zdWdnZXN0aW9uLXNlY3Rpb24nKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICAgICAgICAgICAgICQoJy5taW5pY2FydCwgLnByb21vdGlvbmFsLW1lc3NhZ2UsIC5wcm9kdWN0LWNvbG9ycy1zaXplJykuY3NzKHsnZGlzcGxheSc6ICdub25lJ30pO1xuICAgICAgICAgICAgICAgICQoJyNjdXN0b21lci1yZXR1cm5zLCNjdXN0b21lci1zaGlwcGluZywjY3VzdG9tZXItd2FycmFudHknKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICAgICAgICAgICAgICQoJy5hZGR0b3dpc2hsaXN0JykuYWRkQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgICAgICAgICAkKCcubm9uLXVzLWNvbnRhY3R1cyBnZW8sLnVzLWNvbnRhY3R1cycpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgICAgICAgICAgICAgJCgnLm5vbi11cy1jb250YWN0dXMtbm9uJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgICAgICAgICAkKCcuZGVza3RvcEhpZGUuaGFuZGxlLW5vbi11cy5nZW8nKS5yZW1vdmVDbGFzcygnZGVza3RvcEhpZGUnKTtcbiAgICAgICAgICAgICAgICAkKCcubW9iaWxlSGlkZS5oYW5kbGUtbm9uLXVzLmdlbycpLnJlbW92ZUNsYXNzKCdtb2JpbGVIaWRlJyk7XG4gICAgICAgICAgICAgICAgdmFyIGNvbnRhY3R1c05vbnVzVXJsID0gVXJscy5jb250YWN0dXNub251cztcbiAgICAgICAgICAgICAgICAkKCcuaGFuZGxlLW5vbi11cy5nZW8nKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICAgICAgICAgICAgICQoJy5jYS1jb250YWN0dXMtbGluaycpLmF0dHIoJ2hyZWYnLCBjb250YWN0dXNOb251c1VybCk7XG4gICAgICAgICAgICAgICAgJCgnLmN1c3Qtbm9uLXVzJykuZmluZCgnYScpLmF0dHIoJ2hyZWYnLCBjb250YWN0dXNOb251c1VybCk7XG4gICAgICAgICAgICAgICAgJCgnLnVpLWxvZ2luLC5tYWduaWZpZXItaWNvbicpLmNzcyh7J2JhY2tncm91bmQnOiAnbm9uZSd9KTtcbiAgICAgICAgICAgICAgICAkKCcuaGFuZGxlLW5vbi11cy12aCcpLmFkZENsYXNzKCd2aGlkZScpO1xuICAgICAgICAgICAgICAgICQoJy5zdWJzY3JpYmUnKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkKCcucHJvZHVjdC1wcm9tbywgLm5ld3JlY29tbWVuZGF0aW9uJykuY3NzKHsnZGlzcGxheSc6ICdub25lJ30pO1xuICAgICAgICAgICAgICAgIH0sIDUwMDApO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDaGVjayBUTFMgc3RhdHVzIGlmIGluZGljYXRlZCBieSBzaXRlIHByZWZlcmVuY2VcbiAgICAgICAgdmFyIGNoZWNrVExTID0gU2l0ZVByZWZlcmVuY2VzLkNIRUNLX1RMUztcbiAgICAgICAgaWYgKGNoZWNrVExTID09IHRydWUpIHtcbiAgICAgICAgICAgIHZhciB0bHNCcm9zd2VyID0gdGxzLmdldFVzZXJBZ2VudCgpO1xuICAgICAgICAgICAgaWYgKCh0bHNCcm9zd2VyLm5hbWUgPT0gJ0Nocm9tZScgJiYgdGxzQnJvc3dlci52ZXJzaW9uIDwgMjIpIHx8ICh0bHNCcm9zd2VyLm5hbWUgPT0gJ0ZpcmVmb3gnICYmIHRsc0Jyb3N3ZXIudmVyc2lvbiA8IDI3KSB8fCAodGxzQnJvc3dlci5uYW1lID09ICdTYWZhcmknICYmIHRsc0Jyb3N3ZXIudmVyc2lvbiA8IDUpIHx8ICh0bHNCcm9zd2VyLm5hbWUgPT0gJ01TSUUnICYmIHRsc0Jyb3N3ZXIudmVyc2lvbiA8IDExKSkge1xuICAgICAgICAgICAgICAgIGlmICh0bHNCcm9zd2VyLm5hbWUgPT0gJ01TSUUnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRsc0Jyb3N3ZXIubmFtZSA9ICdJbnRlcm5ldCBFeHBsb3Jlcic7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICQoJy5icm93c2VyLWNvbXBhdGliaWxpdHktYWxlcnQnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgICAgICAgICAgICQoJy5icm93c2VyLWNvbXBhdGliaWxpdHktYWxlcnQgcCcpLmZpbmQoJy5icm93c2VyX3ZlcnNpb24nKS50ZXh0KCcgJyArIHRsc0Jyb3N3ZXIubmFtZSArICcgJyArIHRsc0Jyb3N3ZXIudmVyc2lvbiArICcuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaW5pdGlhbGl6ZURvbSgpO1xuICAgICAgICAvLyBpbml0IHNwZWNpZmljIGdsb2JhbCBjb21wb25lbnRzXG4gICAgICAgIGNvdW50cmllcy5pbml0KCk7XG4gICAgICAgIHRvb2x0aXAuaW5pdCgpO1xuICAgICAgICBtaW5pY2FydC5pbml0KCk7XG4gICAgICAgIHZhbGlkYXRvci5pbml0KCk7XG4gICAgICAgIHVpZXZlbnRzLmluaXQoKTtcbiAgICAgICAgbWVnYW1lbnUuaW5pdCgpO1xuICAgICAgICBoZWFkZXJpbml0LmluaXQoKTtcbiAgICAgICAgc2VhcmNocGxhY2Vob2xkZXIuaW5pdCgpO1xuICAgICAgICB0YWdtYW5hZ2VyLmluaXQod2luZG93LnBhZ2VDb250ZXh0Lm5zKTtcbiAgICAgICAgXG4gICAgICAgIC8vIGV4ZWN1dGUgcGFnZSBzcGVjaWZpYyBpbml0aWFsaXphdGlvbnNcbiAgICAgICAgJC5leHRlbmQocGFnZSwgd2luZG93LnBhZ2VDb250ZXh0KTtcbiAgICAgICAgdmFyIG5zID0gcGFnZS5ucztcbiAgICAgICAgaWYgKG5zICYmIHBhZ2VzW25zXSAmJiBwYWdlc1tuc10uaW5pdCkge1xuICAgICAgICAgICAgcGFnZXNbbnNdLmluaXQoKTtcbiAgICAgICAgfVxuICAgICAgICBpbml0aWFsaXplRXZlbnRzKCk7XG4gICAgICAgIHJlcXVpcmUoJy4vYnJvd3NlcmEnKS5pbml0KCk7XG4gICAgfVxufTtcblxuLy8gZ2VuZXJhbCBleHRlbnNpb24gZnVuY3Rpb25zXG4oZnVuY3Rpb24gKCkge1xuICAgIFN0cmluZy5mb3JtYXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzID0gYXJndW1lbnRzWzBdO1xuICAgICAgICB2YXIgaSwgbGVuID0gYXJndW1lbnRzLmxlbmd0aCAtIDE7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgdmFyIHJlZyA9IG5ldyBSZWdFeHAoJ1xcXFx7JyArIGkgKyAnXFxcXH0nLCAnZ20nKTtcbiAgICAgICAgICAgIHMgPSBzLnJlcGxhY2UocmVnLCBhcmd1bWVudHNbaSArIDFdKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcztcbiAgICB9O1xufSkoKTtcblxualF1ZXJ5KGZ1bmN0aW9uICgpIHtcbiAgICBqUXVlcnkoJy5hY2NvcmRpb24nKVxuICAgICAgICAuaG92ZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyICR0aGlzID0galF1ZXJ5KHRoaXMpO1xuICAgICAgICAgICAgaWYgKCR0aGlzLmhhc0NsYXNzKCdoaWdobGlnaHQnKSkge1xuICAgICAgICAgICAgICAgICR0aGlzLmFkZENsYXNzKCdjb250ZW50Ym94Jyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICR0aGlzLnJlbW92ZUNsYXNzKCdjb250ZW50Ym94JykuYWRkQ2xhc3MoJ3RhYm92ZXInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBqUXVlcnkodGhpcykucmVtb3ZlQ2xhc3MoJ3RhYm92ZXInKS5hZGRDbGFzcygnY29udGVudGJveCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICApLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciAkdGhpcyA9IGpRdWVyeSh0aGlzKTtcbiAgICAgICAgICAgIGlmICgkdGhpcy5maW5kKCcuZXhwYW5kY29udGVudCcpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAkdGhpcy5maW5kKCdoMScpLnRvZ2dsZUNsYXNzKCdkb3duYXJyb3cnKS5uZXh0KCkudG9nZ2xlKCdmYXN0Jyk7XG4gICAgICAgICAgICAgICAgJHRoaXMudG9nZ2xlQ2xhc3MoJ2hpZ2hsaWdodCcpLnRvZ2dsZUNsYXNzKCd0YWJvdmVyJykudG9nZ2xlQ2xhc3MoJ2NvbnRlbnRib3gnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAkdGhpcy5maW5kKCdhJykuYXR0cignaHJlZicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbn0pO1xuXG4vLyBpbml0aWFsaXplIGFwcFxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuICAgIGFwcC5pbml0KCk7XG59KTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGRpYWxvZyA9IHJlcXVpcmUoJy4vZGlhbG9nJyksXG4gICAgcGFnZSA9IHJlcXVpcmUoJy4vcGFnZScpLFxuICAgIHV0aWwgPSByZXF1aXJlKCcuL3V0aWwnKTtcblxudmFyIHNlbGVjdGVkTGlzdCA9IFtdO1xudmFyIG1heEl0ZW1zID0gMTtcbnZhciBibGlVVUlEID0gJyc7XG5cbi8qKlxuICogQHByaXZhdGVcbiAqIEBmdW5jdGlvblxuICogZGVzY3JpcHRpb24gR2V0cyBhIGxpc3Qgb2YgYm9udXMgcHJvZHVjdHMgcmVsYXRlZCB0byBhIHByb21vdGVkIHByb2R1Y3RcbiAqL1xuZnVuY3Rpb24gZ2V0Qm9udXNQcm9kdWN0cygpIHtcbiAgICB2YXIgYm9udXNwcm9kdWN0cyA9IFtdO1xuXG4gICAgdmFyIGksIGxlbjtcbiAgICBmb3IgKGkgPSAwLCBsZW4gPSBzZWxlY3RlZExpc3QubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgdmFyIHAgPSB7XG4gICAgICAgICAgICBwaWQ6IHNlbGVjdGVkTGlzdFtpXS5waWQsXG4gICAgICAgICAgICBxdHk6IHNlbGVjdGVkTGlzdFtpXS5xdHksXG4gICAgICAgICAgICBvcHRpb25zOiB7fVxuICAgICAgICB9O1xuICAgICAgICB2YXIgYSwgYWxlbiwgYnAgPSBzZWxlY3RlZExpc3RbaV07XG4gICAgICAgIGlmIChicC5vcHRpb25zKSB7XG4gICAgICAgICAgICBmb3IgKGEgPSAwLCBhbGVuID0gYnAub3B0aW9ucy5sZW5ndGg7IGEgPCBhbGVuOyBhKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgb3B0ID0gYnAub3B0aW9uc1thXTtcbiAgICAgICAgICAgICAgICBwLm9wdGlvbnMgPSB7b3B0aW9uTmFtZTogb3B0Lm5hbWUsIG9wdGlvblZhbHVlOiBvcHQudmFsdWV9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJvbnVzcHJvZHVjdHMucHVzaCh7cHJvZHVjdDogcH0pO1xuICAgIH1cbiAgICByZXR1cm4ge2JvbnVzcHJvZHVjdHM6IGJvbnVzcHJvZHVjdHN9O1xufVxuXG52YXIgc2VsZWN0ZWRJdGVtVGVtcGxhdGUgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgIHZhciBhdHRyaWJ1dGVzID0gJyc7XG4gICAgZm9yICh2YXIgYXR0cklEIGluIGRhdGEuYXR0cmlidXRlcykge1xuICAgICAgICB2YXIgYXR0ciA9IGRhdGEuYXR0cmlidXRlc1thdHRySURdO1xuICAgICAgICBhdHRyaWJ1dGVzICs9ICc8bGkgZGF0YS1hdHRyaWJ1dGUtaWQ9XCInICsgYXR0cklEICsgJ1wiPlxcbic7XG4gICAgICAgIGF0dHJpYnV0ZXMgKz0gJzxzcGFuIGNsYXNzPVwiZGlzcGxheS1uYW1lXCI+JyArIGF0dHIuZGlzcGxheU5hbWUgKyAnPC9zcGFuPjogJztcbiAgICAgICAgYXR0cmlidXRlcyArPSAnPHNwYW4gY2xhc3M9XCJkaXNwbGF5LXZhbHVlXCI+JyArIGF0dHIuZGlzcGxheVZhbHVlICsgJzwvc3Bhbj5cXG4nO1xuICAgICAgICBhdHRyaWJ1dGVzICs9ICc8L2xpPic7XG4gICAgfVxuICAgIGF0dHJpYnV0ZXMgKz0gJzxsaSBjbGFzcz1cIml0ZW0tcXR5XCI+XFxuJztcbiAgICBhdHRyaWJ1dGVzICs9ICc8c3BhbiBjbGFzcz1cImRpc3BsYXktbmFtZVwiPlF0eTwvc3Bhbj46ICc7XG4gICAgYXR0cmlidXRlcyArPSAnPHNwYW4gY2xhc3M9XCJkaXNwbGF5LXZhbHVlXCI+JyArIGRhdGEucXR5ICsgJzwvc3Bhbj4nO1xuICAgIHJldHVybiBbXG4gICAgICAgICc8bGkgY2xhc3M9XCJzZWxlY3RlZC1ib251cy1pdGVtXCIgZGF0YS11dWlkPVwiJyArIGRhdGEudXVpZCArICdcIiBkYXRhLXBpZD1cIicgKyBkYXRhLnBpZCArICdcIj4nLFxuICAgICAgICAnPGkgY2xhc3M9XCJyZW1vdmUtbGluayBmYSBmYS1yZW1vdmVcIiB0aXRsZT1cIlJlbW92ZSB0aGlzIHByb2R1Y3RcIiBocmVmPVwiI1wiPjwvaT4nLFxuICAgICAgICAnPGRpdiBjbGFzcz1cIml0ZW0tbmFtZVwiPicgKyBkYXRhLm5hbWUgKyAnPC9kaXY+JyxcbiAgICAgICAgJzx1bCBjbGFzcz1cIml0ZW0tYXR0cmlidXRlc1wiPicsXG4gICAgICAgIGF0dHJpYnV0ZXMsXG4gICAgICAgICc8dWw+JyxcbiAgICAgICAgJzxsaT4nXG4gICAgXS5qb2luKCdcXG4nKTtcbn07XG5cbi8vIGhpZGUgc3dhdGNoZXMgdGhhdCBhcmUgbm90IHNlbGVjdGVkIG9yIG5vdCBwYXJ0IG9mIGEgUHJvZHVjdCBWYXJpYXRpb24gR3JvdXBcbnZhciBoaWRlU3dhdGNoZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgJCgnLmJvbnVzLXByb2R1Y3QtaXRlbTpub3QoW2RhdGEtcHJvZHVjdHR5cGU9XCJtYXN0ZXJcIl0pIC5zd2F0Y2hlcyBsaScpLm5vdCgnLnNlbGVjdGVkJykubm90KCcudmFyaWF0aW9uLWdyb3VwLXZhbHVlJykuaGlkZSgpO1xuICAgIC8vIHByZXZlbnQgdW5zZWxlY3RpbmcgdGhlIHNlbGVjdGVkIHZhcmlhbnRcbiAgICAkKCcuYm9udXMtcHJvZHVjdC1pdGVtIC5zd2F0Y2hlcyAuc2VsZWN0ZWQnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcbn07XG5cbi8qKlxuICogQHByaXZhdGVcbiAqIEBmdW5jdGlvblxuICogQGRlc2NyaXB0aW9uIFVwZGF0ZXMgdGhlIHN1bW1hcnkgcGFnZSB3aXRoIHRoZSBzZWxlY3RlZCBib251cyBwcm9kdWN0XG4gKi9cbmZ1bmN0aW9uIHVwZGF0ZVN1bW1hcnkoKSB7XG4gICAgdmFyICRib251c1Byb2R1Y3RMaXN0ID0gJCgnI2JvbnVzLXByb2R1Y3QtbGlzdCcpO1xuICAgIGlmICghc2VsZWN0ZWRMaXN0Lmxlbmd0aCkge1xuICAgICAgICAkYm9udXNQcm9kdWN0TGlzdC5maW5kKCdsaS5zZWxlY3RlZC1ib251cy1pdGVtJykucmVtb3ZlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHVsTGlzdCA9ICRib251c1Byb2R1Y3RMaXN0LmZpbmQoJ3VsLnNlbGVjdGVkLWJvbnVzLWl0ZW1zJykuZmlyc3QoKTtcbiAgICAgICAgdmFyIGksIGxlbjtcbiAgICAgICAgZm9yIChpID0gMCwgbGVuID0gc2VsZWN0ZWRMaXN0Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgaXRlbSA9IHNlbGVjdGVkTGlzdFtpXTtcbiAgICAgICAgICAgIHZhciBsaSA9IHNlbGVjdGVkSXRlbVRlbXBsYXRlKGl0ZW0pO1xuICAgICAgICAgICAgJChsaSkuYXBwZW5kVG8odWxMaXN0KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIGdldCByZW1haW5pbmcgaXRlbSBjb3VudFxuICAgIHZhciByZW1haW4gPSBtYXhJdGVtcyAtIHNlbGVjdGVkTGlzdC5sZW5ndGg7XG4gICAgJGJvbnVzUHJvZHVjdExpc3QuZmluZCgnLmJvbnVzLWl0ZW1zLWF2YWlsYWJsZScpLnRleHQocmVtYWluKTtcbiAgICBpZiAocmVtYWluIDw9IDApIHtcbiAgICAgICAgJGJvbnVzUHJvZHVjdExpc3QuZmluZCgnLnNlbGVjdC1ib251cy1pdGVtJykuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAkYm9udXNQcm9kdWN0TGlzdC5maW5kKCcuc2VsZWN0LWJvbnVzLWl0ZW0nKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaW5pdGlhbGl6ZUdyaWQoKSB7XG4gICAgdmFyICRib251c1Byb2R1Y3QgPSAkKCcjYm9udXMtcHJvZHVjdC1kaWFsb2cnKSxcbiAgICAgICAgJGJvbnVzUHJvZHVjdExpc3QgPSAkKCcjYm9udXMtcHJvZHVjdC1saXN0JyksXG4gICAgICAgIGJsaURhdGEgPSAkYm9udXNQcm9kdWN0TGlzdC5kYXRhKCdsaW5lLWl0ZW0tZGV0YWlsJyk7XG4gICAgbWF4SXRlbXMgPSBibGlEYXRhLm1heEl0ZW1zO1xuICAgIGJsaVVVSUQgPSBibGlEYXRhLnV1aWQ7XG5cbiAgICBpZiAoYmxpRGF0YS5pdGVtQ291bnQgPj0gbWF4SXRlbXMpIHtcbiAgICAgICAgJGJvbnVzUHJvZHVjdExpc3QuZmluZCgnLnNlbGVjdC1ib251cy1pdGVtJykuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcbiAgICB9XG5cbiAgICB2YXIgY2FydEl0ZW1zID0gJGJvbnVzUHJvZHVjdExpc3QuZmluZCgnLnNlbGVjdGVkLWJvbnVzLWl0ZW0nKTtcbiAgICBjYXJ0SXRlbXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjaSA9ICQodGhpcyk7XG4gICAgICAgIHZhciBwcm9kdWN0ID0ge1xuICAgICAgICAgICAgdXVpZDogY2kuZGF0YSgndXVpZCcpLFxuICAgICAgICAgICAgcGlkOiBjaS5kYXRhKCdwaWQnKSxcbiAgICAgICAgICAgIHF0eTogY2kuZmluZCgnLml0ZW0tcXR5JykudGV4dCgpLFxuICAgICAgICAgICAgbmFtZTogY2kuZmluZCgnLml0ZW0tbmFtZScpLmh0bWwoKSxcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHt9XG4gICAgICAgIH07XG4gICAgICAgIHZhciBhdHRyaWJ1dGVzID0gY2kuZmluZCgndWwuaXRlbS1hdHRyaWJ1dGVzIGxpJyk7XG4gICAgICAgIGF0dHJpYnV0ZXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgbGkgPSAkKHRoaXMpO1xuICAgICAgICAgICAgcHJvZHVjdC5hdHRyaWJ1dGVzW2xpLmRhdGEoJ2F0dHJpYnV0ZUlkJyldID0ge1xuICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBsaS5jaGlsZHJlbignLmRpc3BsYXktbmFtZScpLmh0bWwoKSxcbiAgICAgICAgICAgICAgICBkaXNwbGF5VmFsdWU6IGxpLmNoaWxkcmVuKCcuZGlzcGxheS12YWx1ZScpLmh0bWwoKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIHNlbGVjdGVkTGlzdC5wdXNoKHByb2R1Y3QpO1xuICAgIH0pO1xuXG4gICAgJGJvbnVzUHJvZHVjdExpc3Qub24oJ2NsaWNrJywgJy5ib251cy1wcm9kdWN0LWl0ZW0gYVtocmVmXS5zd2F0Y2hhbmNob3InLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHZhciB1cmwgPSB0aGlzLmhyZWYsXG4gICAgICAgICAgICAkdGhpcyA9ICQodGhpcyk7XG4gICAgICAgIHVybCA9IHV0aWwuYXBwZW5kUGFyYW1zVG9VcmwodXJsLCB7XG4gICAgICAgICAgICAnc291cmNlJzogJ2JvbnVzJyxcbiAgICAgICAgICAgICdmb3JtYXQnOiAnYWpheCdcbiAgICAgICAgfSk7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICR0aGlzLmNsb3Nlc3QoJy5ib251cy1wcm9kdWN0LWl0ZW0nKS5lbXB0eSgpLmh0bWwocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIGhpZGVTd2F0Y2hlcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KVxuICAgICAgICAub24oJ2NoYW5nZScsICcuaW5wdXQtdGV4dCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRib251c1Byb2R1Y3RMaXN0LmZpbmQoJy5zZWxlY3QtYm9udXMtaXRlbScpLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5ib251cy1wcm9kdWN0LWZvcm0nKS5maW5kKCcucXVhbnRpdHktZXJyb3InKS50ZXh0KCcnKTtcbiAgICAgICAgfSlcbiAgICAgICAgLm9uKCdjbGljaycsICcuc2VsZWN0LWJvbnVzLWl0ZW0nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgaWYgKHNlbGVjdGVkTGlzdC5sZW5ndGggPj0gbWF4SXRlbXMpIHtcbiAgICAgICAgICAgICAgICAkYm9udXNQcm9kdWN0TGlzdC5maW5kKCcuc2VsZWN0LWJvbnVzLWl0ZW0nKS5hdHRyKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgICAgICRib251c1Byb2R1Y3RMaXN0LmZpbmQoJy5ib251cy1pdGVtcy1hdmFpbGFibGUnKS50ZXh0KCcwJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgZm9ybSA9ICQodGhpcykuY2xvc2VzdCgnLmJvbnVzLXByb2R1Y3QtZm9ybScpLFxuICAgICAgICAgICAgICAgIGRldGFpbCA9ICQodGhpcykuY2xvc2VzdCgnLnByb2R1Y3QtZGV0YWlsJyksXG4gICAgICAgICAgICAgICAgdXVpZCA9IGZvcm0uZmluZCgnaW5wdXRbbmFtZT1cInByb2R1Y3RVVUlEXCJdJykudmFsKCksXG4gICAgICAgICAgICAgICAgcXR5VmFsID0gZm9ybS5maW5kKCdpbnB1dFtuYW1lPVwiUXVhbnRpdHlcIl0nKS52YWwoKSxcbiAgICAgICAgICAgICAgICBxdHkgPSAoaXNOYU4ocXR5VmFsKSkgPyAxIDogKCtxdHlWYWwpO1xuXG4gICAgICAgICAgICBpZiAocXR5ID4gbWF4SXRlbXMpIHtcbiAgICAgICAgICAgICAgICAkYm9udXNQcm9kdWN0TGlzdC5maW5kKCcuc2VsZWN0LWJvbnVzLWl0ZW0nKS5hdHRyKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgICAgIGZvcm0uZmluZCgnLnF1YW50aXR5LWVycm9yJykudGV4dChSZXNvdXJjZXMuQk9OVVNfUFJPRFVDVF9UT09NQU5ZKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBwcm9kdWN0ID0ge1xuICAgICAgICAgICAgICAgIHV1aWQ6IHV1aWQsXG4gICAgICAgICAgICAgICAgcGlkOiBmb3JtLmZpbmQoJ2lucHV0W25hbWU9XCJwaWRcIl0nKS52YWwoKSxcbiAgICAgICAgICAgICAgICBxdHk6IHF0eSxcbiAgICAgICAgICAgICAgICBuYW1lOiBkZXRhaWwuZmluZCgnLnByb2R1Y3QtbmFtZScpLnRleHQoKSxcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiBkZXRhaWwuZmluZCgnLnByb2R1Y3QtdmFyaWF0aW9ucycpLmRhdGEoJ2F0dHJpYnV0ZXMnKSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBbXVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIG9wdGlvblNlbGVjdHMgPSBmb3JtLmZpbmQoJy5wcm9kdWN0LW9wdGlvbicpO1xuXG4gICAgICAgICAgICBvcHRpb25TZWxlY3RzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHByb2R1Y3Qub3B0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJCh0aGlzKS52YWwoKSxcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogJCh0aGlzKS5jaGlsZHJlbignOnNlbGVjdGVkJykuZmlyc3QoKS5odG1sKClcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc2VsZWN0ZWRMaXN0LnB1c2gocHJvZHVjdCk7XG4gICAgICAgICAgICB1cGRhdGVTdW1tYXJ5KCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5vbignY2xpY2snLCAnLnJlbW92ZS1saW5rJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHZhciBjb250YWluZXIgPSAkKHRoaXMpLmNsb3Nlc3QoJy5zZWxlY3RlZC1ib251cy1pdGVtJyk7XG4gICAgICAgICAgICBpZiAoIWNvbnRhaW5lci5kYXRhKCd1dWlkJykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciB1dWlkID0gY29udGFpbmVyLmRhdGEoJ3V1aWQnKTtcbiAgICAgICAgICAgIHZhciBpLCBsZW4gPSBzZWxlY3RlZExpc3QubGVuZ3RoO1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkTGlzdFtpXS51dWlkID09PSB1dWlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkTGlzdC5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVwZGF0ZVN1bW1hcnkoKTtcbiAgICAgICAgfSlcbiAgICAgICAgLm9uKCdjbGljaycsICcuYWRkLXRvLWNhcnQtYm9udXMnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdmFyIHVybCA9IHV0aWwuYXBwZW5kUGFyYW1zVG9VcmwoVXJscy5hZGRCb251c1Byb2R1Y3QsIHtib251c0Rpc2NvdW50TGluZUl0ZW1VVUlEOiBibGlVVUlEfSk7XG4gICAgICAgICAgICB2YXIgYm9udXNQcm9kdWN0cyA9IGdldEJvbnVzUHJvZHVjdHMoKTtcbiAgICAgICAgICAgIGlmIChib251c1Byb2R1Y3RzLmJvbnVzcHJvZHVjdHNbMF0ucHJvZHVjdC5xdHkgPiBtYXhJdGVtcykge1xuICAgICAgICAgICAgICAgIGJvbnVzUHJvZHVjdHMuYm9udXNwcm9kdWN0c1swXS5wcm9kdWN0LnF0eSA9IG1heEl0ZW1zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gbWFrZSB0aGUgc2VydmVyIGNhbGxcbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICAgICAgY2FjaGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoYm9udXNQcm9kdWN0cylcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmRvbmUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBzdWNjZXNzXG4gICAgICAgICAgICAgICAgICAgIHBhZ2UucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmZhaWwoZnVuY3Rpb24gKHhociwgdGV4dFN0YXR1cykge1xuICAgICAgICAgICAgICAgICAgICAvLyBmYWlsZWRcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRleHRTdGF0dXMgPT09ICdwYXJzZXJlcnJvcicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5hbGVydChSZXNvdXJjZXMuQkFEX1JFU1BPTlNFKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5hbGVydChSZXNvdXJjZXMuU0VSVkVSX0NPTk5FQ1RJT05fRVJST1IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuYWx3YXlzKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJGJvbnVzUHJvZHVjdC5kaWFsb2coJ2Nsb3NlJyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5vbignY2xpY2snLCAnI21vcmUtYm9udXMtcHJvZHVjdHMnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdmFyIHV1aWQgPSAkKCcjYm9udXMtcHJvZHVjdC1saXN0JykuZGF0YSgpLmxpbmVJdGVtRGV0YWlsLnV1aWQ7XG5cbiAgICAgICAgICAgIC8vZ2V0IHRoZSBuZXh0IHBhZ2Ugb2YgY2hvaWNlIG9mIGJvbnVzIHByb2R1Y3RzXG4gICAgICAgICAgICB2YXIgbGluZUl0ZW1EZXRhaWwgPSBKU09OLnBhcnNlKCQoJyNib251cy1wcm9kdWN0LWxpc3QnKS5hdHRyKCdkYXRhLWxpbmUtaXRlbS1kZXRhaWwnKSk7XG4gICAgICAgICAgICBsaW5lSXRlbURldGFpbC5wYWdlU3RhcnQgPSBsaW5lSXRlbURldGFpbC5wYWdlU3RhcnQgKyBsaW5lSXRlbURldGFpbC5wYWdlU2l6ZTtcbiAgICAgICAgICAgICQoJyNib251cy1wcm9kdWN0LWxpc3QnKS5hdHRyKCdkYXRhLWxpbmUtaXRlbS1kZXRhaWwnLCBKU09OLnN0cmluZ2lmeShsaW5lSXRlbURldGFpbCkpO1xuXG4gICAgICAgICAgICB2YXIgdXJsID0gdXRpbC5hcHBlbmRQYXJhbXNUb1VybChVcmxzLmdldEJvbnVzUHJvZHVjdHMsIHtcbiAgICAgICAgICAgICAgICBib251c0Rpc2NvdW50TGluZUl0ZW1VVUlEOiB1dWlkLFxuICAgICAgICAgICAgICAgIGZvcm1hdDogJ2FqYXgnLFxuICAgICAgICAgICAgICAgIGxhenlMb2FkOiAndHJ1ZScsXG4gICAgICAgICAgICAgICAgcGFnZVN0YXJ0OiBsaW5lSXRlbURldGFpbC5wYWdlU3RhcnQsXG4gICAgICAgICAgICAgICAgcGFnZVNpemU6ICQoJyNib251cy1wcm9kdWN0LWxpc3QnKS5kYXRhKCkubGluZUl0ZW1EZXRhaWwucGFnZVNpemUsXG4gICAgICAgICAgICAgICAgYm9udXNQcm9kdWN0c1RvdGFsOiAkKCcjYm9udXMtcHJvZHVjdC1saXN0JykuZGF0YSgpLmxpbmVJdGVtRGV0YWlsLmJwVG90YWxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdHRVQnLFxuICAgICAgICAgICAgICAgIGNhY2hlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgIHVybDogdXJsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5kb25lKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vYWRkIHRoZSBuZXcgcGFnZSB0byBET00gYW5kIHJlbW92ZSAnTW9yZScgbGluayBpZiBpdCBpcyB0aGUgbGFzdCBwYWdlIG9mIHJlc3VsdHNcbiAgICAgICAgICAgICAgICAgICAgJCgnI21vcmUtYm9udXMtcHJvZHVjdHMnKS5iZWZvcmUoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICgobGluZUl0ZW1EZXRhaWwucGFnZVN0YXJ0ICsgbGluZUl0ZW1EZXRhaWwucGFnZVNpemUpID49ICQoJyNib251cy1wcm9kdWN0LWxpc3QnKS5kYXRhKCkubGluZUl0ZW1EZXRhaWwuYnBUb3RhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnI21vcmUtYm9udXMtcHJvZHVjdHMnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmZhaWwoZnVuY3Rpb24gKHhociwgdGV4dFN0YXR1cykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGV4dFN0YXR1cyA9PT0gJ3BhcnNlcmVycm9yJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmFsZXJ0KFJlc291cmNlcy5CQURfUkVTUE9OU0UpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmFsZXJ0KFJlc291cmNlcy5TRVJWRVJfQ09OTkVDVElPTl9FUlJPUik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG59XG5cbnZhciBib251c1Byb2R1Y3RzVmlldyA9IHtcbiAgICAvKipcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAZGVzY3JpcHRpb24gT3BlbiB0aGUgbGlzdCBvZiBib251cyBwcm9kdWN0cyBzZWxlY3Rpb24gZGlhbG9nXG4gICAgICovXG4gICAgc2hvdzogZnVuY3Rpb24gKHVybCkge1xuICAgICAgICB2YXIgJGJvbnVzUHJvZHVjdCA9ICQoJyNib251cy1wcm9kdWN0LWRpYWxvZycpO1xuICAgICAgICAvLyBjcmVhdGUgdGhlIGRpYWxvZ1xuICAgICAgICBkaWFsb2cub3Blbih7XG4gICAgICAgICAgICB0YXJnZXQ6ICRib251c1Byb2R1Y3QsXG4gICAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICB3aWR0aDogNzk1LFxuICAgICAgICAgICAgICAgIHRpdGxlOiBSZXNvdXJjZXMuQk9OVVNfUFJPRFVDVFNcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGluaXRpYWxpemVHcmlkKCk7XG4gICAgICAgICAgICAgICAgaGlkZVN3YXRjaGVzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQGRlc2NyaXB0aW9uIE9wZW4gYm9udXMgcHJvZHVjdCBwcm9tbyBwcm9tcHQgZGlhbG9nXG4gICAgICovXG4gICAgbG9hZEJvbnVzT3B0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcyxcbiAgICAgICAgICAgIGJvbnVzRGlzY291bnRDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYm9udXMtZGlzY291bnQtY29udGFpbmVyJyk7XG4gICAgICAgIGlmICghYm9udXNEaXNjb3VudENvbnRhaW5lcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZ2V0IHRoZSBodG1sIGZyb20gbWluaWNhcnQsIHRoZW4gdHJhc2ggaXRcbiAgICAgICAgdmFyIGJvbnVzRGlzY291bnRDb250YWluZXJIdG1sID0gYm9udXNEaXNjb3VudENvbnRhaW5lci5vdXRlckhUTUw7XG4gICAgICAgIGJvbnVzRGlzY291bnRDb250YWluZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChib251c0Rpc2NvdW50Q29udGFpbmVyKTtcblxuICAgICAgICBkaWFsb2cub3Blbih7XG4gICAgICAgICAgICBodG1sOiBib251c0Rpc2NvdW50Q29udGFpbmVySHRtbCxcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICB3aWR0aDogNDAwLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBSZXNvdXJjZXMuQk9OVVNfUFJPRFVDVCxcbiAgICAgICAgICAgICAgICBidXR0b25zOiBbe1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBSZXNvdXJjZXMuU0VMRUNUX0JPTlVTX1BST0RVQ1RTLFxuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHV1aWQgPSAkKCcuYm9udXMtcHJvZHVjdC1wcm9tbycpLmRhdGEoJ2xpbmVpdGVtaWQnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmwgPSB1dGlsLmFwcGVuZFBhcmFtc1RvVXJsKFVybHMuZ2V0Qm9udXNQcm9kdWN0cywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib251c0Rpc2NvdW50TGluZUl0ZW1VVUlEOiB1dWlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U6ICdib251cycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdDogJ2FqYXgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXp5TG9hZDogJ2ZhbHNlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZVN0YXJ0OiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlU2l6ZTogMTAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbnVzUHJvZHVjdHNUb3RhbDogLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuZGlhbG9nKCdjbG9zZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zaG93KHVybCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IFJlc291cmNlcy5OT19USEFOS1MsXG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmRpYWxvZygnY2xvc2UnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAvLyBzaG93IGhpZGUgcHJvbW8gZGV0YWlsc1xuICAgICAgICAgICAgICAgICQoJy5zaG93LXByb21vLWRldGFpbHMnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJy5wcm9tby1kZXRhaWxzJykudG9nZ2xlQ2xhc3MoJ3Zpc2libGUnKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBib251c1Byb2R1Y3RzVmlldztcbiIsIid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gZ2V0VXJsVmFycygpIHtcbiAgICB2YXIgdmFycyA9IFtdLFxuICAgICAgICBoYXNoO1xuICAgIHZhciBoYXNoZXMgPSB3aW5kb3cubG9jYXRpb24uaHJlZi5zbGljZSh3aW5kb3cubG9jYXRpb24uaHJlZi5pbmRleE9mKCc/JykgKyAxKS5zcGxpdCgnJicpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGFzaGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGhhc2ggPSBoYXNoZXNbaV0uc3BsaXQoJz0nKTtcbiAgICAgICAgdmFycy5wdXNoKGhhc2hbMF0pO1xuICAgICAgICB2YXJzW2hhc2hbMF1dID0gaGFzaFsxXTtcbiAgICB9XG4gICAgcmV0dXJuIHZhcnM7XG59XG5cbmZ1bmN0aW9uIHJ1bkJyb3dzZXJhVGVzdCgpIHtcblxuICAgIHZhciBob3ZlclNlbGVjdG9yID0gZGVjb2RlVVJJKGdldFVybFZhcnMoKS5ob3Zlcik7XG4gICAgaWYgKGhvdmVyU2VsZWN0b3IgIT09ICcnKSB7XG4gICAgICAgIGhvdmVyU2VsZWN0b3IgPSBob3ZlclNlbGVjdG9yLnJlcGxhY2UoJyBlcSAnLCAnPScpO1xuICAgICAgICBpZiAoJChob3ZlclNlbGVjdG9yKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAkKGhvdmVyU2VsZWN0b3IpLnRyaWdnZXIoJ21vdXNlZW50ZXInKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB2YXIgY2xpY2tTZWxlY3RvciA9IGRlY29kZVVSSShnZXRVcmxWYXJzKCkuY2xpY2spO1xuICAgIGlmIChjbGlja1NlbGVjdG9yICE9PSAnJykge1xuICAgICAgICBjbGlja1NlbGVjdG9yID0gY2xpY2tTZWxlY3Rvci5yZXBsYWNlKCcgZXEgJywgJz0nKTtcbiAgICAgICAgaWYgKCQoY2xpY2tTZWxlY3RvcikubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgJChjbGlja1NlbGVjdG9yKS50cmlnZ2VyKCdjbGljaycpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnRzLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICBydW5Ccm93c2VyYVRlc3QoKTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBkaWFsb2cgPSByZXF1aXJlKCcuL2RpYWxvZycpO1xudmFyIHV0aWwgPSByZXF1aXJlKCcuL3V0aWwnKTtcbnZhciBTZXNzaW9uQXR0cmlidXRlcyA9IHdpbmRvdy5TZXNzaW9uQXR0cmlidXRlcztcblxuLyoqXG4gKiBAZnVuY3Rpb24gY2FwdGNoYSAgICBVc2VkIHRvIGRpc3BsYXkvY29udHJvbCB0aGUgc2NyaW0gY29udGFpbmluZyB0aGUgc2ltdWxhdGVkIGNhcHRjaGEgY29kZVxuICoqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogaWYgdGhlIHNlc3Npb24ucHJpdmFjeS5yYXRlbGltaXRlZCBlbGVtZW50IGlzIHByZXNlbnQgdGhlbiBzaG93IHRoZSBub3RpZmljYXRpb25cbiAgICAgKiBOT1RFOiBZb3Ugd2lsbCBwcm9iYWJseSB3YW50IHRvIHJlcGxhY2UgdGhpcyB3aXRoIGEgY2FsbCB0byBhbiBhY3R1YWwgQ0FQVENIQSBzeXN0ZW0gdG8gcmVwbGFjZSB0aGUgc2ltcGxlIG9uZSBoZXJlXG4gICAgICovXG4gICAgaWYgKFNlc3Npb25BdHRyaWJ1dGVzLlNIT1dfQ0FQVENIQSkge1xuICAgICAgICBkaWFsb2cub3Blbih7XG4gICAgICAgICAgICBodG1sOiAnPGgxPicgKyBSZXNvdXJjZXMuQVJFX1lPVV9IVU1BTiArICc8L2gxPicsXG4gICAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgY2xvc2VPbkVzY2FwZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgZGlhbG9nQ2xhc3M6ICduby1jbG9zZScsXG4gICAgICAgICAgICAgICAgYnV0dG9uczogW3tcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogUmVzb3VyY2VzLk9LLFxuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9IHV0aWwuYXBwZW5kUGFyYW1zVG9VcmwoVXJscy5yYXRlTGltaXRlclJlc2V0LCB7Zm9ybWF0OiAnYWpheCd9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiB1cmxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5kaWFsb2coJ2Nsb3NlJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgcGFnZSA9IHJlcXVpcmUoJy4vcGFnZScpLFxuICAgIHV0aWwgPSByZXF1aXJlKCcuL3V0aWwnKSxcbiAgICBUUHJvbWlzZSA9IHJlcXVpcmUoJ3Byb21pc2UnKTtcblxudmFyIF9jdXJyZW50Q2F0ZWdvcnkgPSAnJyxcbiAgICBNQVhfQUNUSVZFID0gNjtcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICogQGZ1bmN0aW9uXG4gKiBAZGVzY3JpcHRpb24gVmVyaWZpZXMgdGhlIG51bWJlciBvZiBlbGVtZW50cyBpbiB0aGUgY29tcGFyZSBjb250YWluZXIgYW5kIHVwZGF0ZXMgaXQgd2l0aCBzZXF1ZW50aWFsIGNsYXNzZXMgZm9yIHVpIHRhcmdldGluZ1xuICovXG5mdW5jdGlvbiByZWZyZXNoQ29udGFpbmVyKCkge1xuICAgIHZhciAkY29tcGFyZUNvbnRhaW5lciA9ICQoJy5jb21wYXJlLWl0ZW1zJyk7XG4gICAgdmFyICRjb21wYXJlSXRlbXMgPSAkY29tcGFyZUNvbnRhaW5lci5maW5kKCcuY29tcGFyZS1pdGVtJyk7XG4gICAgdmFyIG51bUFjdGl2ZSA9ICRjb21wYXJlSXRlbXMuZmlsdGVyKCcuYWN0aXZlJykubGVuZ3RoO1xuXG4gICAgaWYgKG51bUFjdGl2ZSA8IDIpIHtcbiAgICAgICAgJCgnI2NvbXBhcmUtaXRlbXMtYnV0dG9uJykuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAkKCcjY29tcGFyZS1pdGVtcy1idXR0b24nKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xuICAgIH1cbiAgICAvKlN0YXJ0IEpJUkEgUFJFVi0yMzQgOiBQTFAgLSBOb3QgYWJsZSB0byByZW1vdmUgaW5kaXZpZHVhbCBwcm9kdWN0IGZyb20gdGhlIGNvbXBhcmUgZ3JpZCBmcm9tIFBMUC4qL1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJGNvbXBhcmVJdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAkKCRjb21wYXJlSXRlbXNbaV0pLmZpbmQoJy5jb21wYXJlLWl0ZW0tbnVtYmVyJykudGV4dChpICsgMSk7XG4gICAgfVxuICAgIC8qRW5kIEpJUkEgUFJFVi0yMzQqL1xuICAgICRjb21wYXJlQ29udGFpbmVyLnRvZ2dsZShudW1BY3RpdmUgPiAwKTtcbn1cblxuLyoqXG4gKiBAcHJpdmF0ZVxuICogQGZ1bmN0aW9uXG4gKiBAZGVzY3JpcHRpb24gQWRkcyBhbiBpdGVtIHRvIHRoZSBjb21wYXJlIGNvbnRhaW5lciBhbmQgcmVmcmVzaGVzIGl0XG4gKi9cbmZ1bmN0aW9uIGFkZFRvTGlzdChkYXRhKSB7XG4gICAgLy8gZ2V0IHRoZSBmaXJzdCBjb21wYXJlLWl0ZW0gbm90IGN1cnJlbnRseSBhY3RpdmVcbiAgICB2YXIgJGl0ZW0gPSAkKCcuY29tcGFyZS1pdGVtcyAuY29tcGFyZS1pdGVtJykubm90KCcuYWN0aXZlJykuZmlyc3QoKSxcbiAgICAgICAgJHByb2R1Y3RUaWxlID0gJCgnIycgKyBkYXRhLnV1aWQpO1xuXG4gICAgaWYgKCRpdGVtLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBpZiAoJHByb2R1Y3RUaWxlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICRwcm9kdWN0VGlsZS5maW5kKCcuY29tcGFyZS1jaGVjaycpWzBdLmNoZWNrZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB3aW5kb3cuYWxlcnQoUmVzb3VyY2VzLkNPTVBBUkVfQUREX0ZBSUwpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gaWYgYWxyZWFkeSBhZGRlZCBzb21laG93LCByZXR1cm5cbiAgICBpZiAoJCgnW2RhdGEtdXVpZD1cIicgKyBkYXRhLnV1aWQgKyAnXCJdJykubGVuZ3RoID4gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIHNldCBhcyBhY3RpdmUgaXRlbVxuICAgICRpdGVtLmFkZENsYXNzKCdhY3RpdmUnKVxuICAgICAgICAuYXR0cignZGF0YS11dWlkJywgZGF0YS51dWlkKVxuICAgICAgICAuYXR0cignZGF0YS1pdGVtaWQnLCBkYXRhLml0ZW1pZClcbiAgICAgICAgLmRhdGEoJ3V1aWQnLCBkYXRhLnV1aWQpXG4gICAgICAgIC5kYXRhKCdpdGVtaWQnLCBkYXRhLml0ZW1pZClcbiAgICAgICAgLmFwcGVuZCgkKGRhdGEuaW1nKS5jbG9uZSgpLmFkZENsYXNzKCdjb21wYXJlLWl0ZW0taW1hZ2UnKSk7XG59XG5cbi8qKlxuICogQHByaXZhdGVcbiAqIEBmdW5jdGlvblxuICogZGVzY3JpcHRpb24gUmVtb3ZlcyBhbiBpdGVtIGZyb20gdGhlIGNvbXBhcmUgY29udGFpbmVyIGFuZCByZWZyZXNoZXMgaXRcbiAqL1xuZnVuY3Rpb24gcmVtb3ZlRnJvbUxpc3QoJGl0ZW0pIHtcbiAgICBpZiAoJGl0ZW0ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gcmVtb3ZlIGNsYXNzLCBkYXRhIGFuZCBpZCBmcm9tIGl0ZW1cbiAgICAkaXRlbS5yZW1vdmVDbGFzcygnYWN0aXZlJylcbiAgICAgICAgLnJlbW92ZUF0dHIoJ2RhdGEtdXVpZCcpXG4gICAgICAgIC5yZW1vdmVBdHRyKCdkYXRhLWl0ZW1pZCcpXG4gICAgICAgIC5kYXRhKCd1dWlkJywgJycpXG4gICAgICAgIC5kYXRhKCdpdGVtaWQnLCAnJylcbiAgICAgICAgLy8gcmVtb3ZlIHRoZSBpbWFnZVxuICAgICAgICAuZmluZCgnLmNvbXBhcmUtaXRlbS1pbWFnZScpLnJlbW92ZSgpO1xuXG4gICAgLypTdGFydCBKSVJBIFBSRVYtMjM0IDogUExQIC0gTm90IGFibGUgdG8gcmVtb3ZlIGluZGl2aWR1YWwgcHJvZHVjdCBmcm9tIHRoZSBjb21wYXJlIGdyaWQgZnJvbSBQTFAuKi9cbiAgICB2YXIgJGNsb25lSXRlbSA9ICRpdGVtLmNsb25lKCk7XG4gICAgJGl0ZW0ucmVtb3ZlKCk7XG4gICAgJGNsb25lSXRlbS5hcHBlbmRUbygnLmNvbXBhcmUtaXRlbXMtcGFuZWwnKTtcbiAgICByZWZyZXNoQ29udGFpbmVyKCk7XG4gICAgLypFbmQgSklSQSBQUkVWLTIzNCovXG59XG5cbmZ1bmN0aW9uIGFkZFByb2R1Y3RBamF4KGFyZ3MpIHtcbiAgICB2YXIgcHJvbWlzZSA9IG5ldyBUUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IFVybHMuY29tcGFyZUFkZCxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBwaWQ6IGFyZ3MuaXRlbWlkLFxuICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBfY3VycmVudENhdGVnb3J5XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJ1xuICAgICAgICB9KS5kb25lKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgaWYgKCFyZXNwb25zZSB8fCAhcmVzcG9uc2Uuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoUmVzb3VyY2VzLkNPTVBBUkVfQUREX0ZBSUwpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgaW5pdGlhbGl6ZUV2ZW50cygpOyAvLyBKSVJBIFBSRVYtMjM0IDogUExQIC0gTm90IGFibGUgdG8gcmVtb3ZlIGluZGl2aWR1YWwgcHJvZHVjdCBmcm9tIHRoZSBjb21wYXJlIGdyaWQgZnJvbSBQTFAuXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLmZhaWwoZnVuY3Rpb24gKGpxeGhyLCBzdGF0dXMsIGVycikge1xuICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihlcnIpKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVByb2R1Y3RBamF4KGFyZ3MpIHtcbiAgICB2YXIgcHJvbWlzZSA9IG5ldyBUUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IFVybHMuY29tcGFyZVJlbW92ZSxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBwaWQ6IGFyZ3MuaXRlbWlkLFxuICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBfY3VycmVudENhdGVnb3J5XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJ1xuICAgICAgICB9KS5kb25lKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgaWYgKCFyZXNwb25zZSB8fCAhcmVzcG9uc2Uuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoUmVzb3VyY2VzLkNPTVBBUkVfUkVNT1ZFX0ZBSUwpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLmZhaWwoZnVuY3Rpb24gKGpxeGhyLCBzdGF0dXMsIGVycikge1xuICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihlcnIpKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cbmZ1bmN0aW9uIHNoaWZ0SW1hZ2VzKCkge1xuICAgIHJldHVybiBuZXcgVFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgdmFyICRpdGVtcyA9ICQoJy5jb21wYXJlLWl0ZW1zIC5jb21wYXJlLWl0ZW0nKTtcbiAgICAgICAgJGl0ZW1zLmVhY2goZnVuY3Rpb24gKGksIGl0ZW0pIHtcbiAgICAgICAgICAgIHZhciAkaXRlbSA9ICQoaXRlbSk7XG4gICAgICAgICAgICAvLyBsYXN0IGl0ZW1cbiAgICAgICAgICAgIGlmIChpID09PSAkaXRlbXMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZW1vdmVGcm9tTGlzdCgkaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgJG5leHQgPSAkaXRlbXMuZXEoaSk7IC8vSklSQSBQUkVWLTI2MSA6IFBMUDogV2hlbiBtb3JlIHRoYW4gNiBwcm9kdWN0IGNvbXBhcmVkIHRoZW4gQ29tcGFyZXNlY3Rpb24gbm90IGRpc3BsYXlpbmcgYWxsIHRoZSBwcm9kdWN0IGltYWdlcy4gUmVtb3ZlZCArMVxuICAgICAgICAgICAgaWYgKCRuZXh0Lmhhc0NsYXNzKCdhY3RpdmUnKSkge1xuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBpdHMgb3duIGltYWdlXG4gICAgICAgICAgICAgICAgJG5leHQuZmluZCgnLmNvbXBhcmUtaXRlbS1pbWFnZScpLmRldGFjaCgpLmFwcGVuZFRvKCRpdGVtKTtcbiAgICAgICAgICAgICAgICAkaXRlbS5hZGRDbGFzcygnYWN0aXZlJylcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2RhdGEtdXVpZCcsICRuZXh0LmRhdGEoJ3V1aWQnKSlcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2RhdGEtaXRlbWlkJywgJG5leHQuZGF0YSgnaXRlbWlkJykpXG4gICAgICAgICAgICAgICAgICAgIC5kYXRhKCd1dWlkJywgJG5leHQuZGF0YSgndXVpZCcpKVxuICAgICAgICAgICAgICAgICAgICAuZGF0YSgnaXRlbWlkJywgJG5leHQuZGF0YSgnaXRlbWlkJykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgIH0pO1xufVxuXG4vKipcbiAqIEBmdW5jdGlvblxuICogQGRlc2NyaXB0aW9uIEFkZHMgcHJvZHVjdCB0byB0aGUgY29tcGFyZSB0YWJsZVxuICovXG5mdW5jdGlvbiBhZGRQcm9kdWN0KGFyZ3MpIHtcbiAgICB2YXIgcHJvbWlzZTtcbiAgICB2YXIgJGl0ZW1zID0gJCgnLmNvbXBhcmUtaXRlbXMgLmNvbXBhcmUtaXRlbScpO1xuICAgIHZhciAkY2IgPSAkKGFyZ3MuY2IpO1xuICAgIHZhciBudW1BY3RpdmUgPSAkaXRlbXMuZmlsdGVyKCcuYWN0aXZlJykubGVuZ3RoO1xuICAgIGlmIChudW1BY3RpdmUgPT09IE1BWF9BQ1RJVkUpIHtcbiAgICAgICAgaWYgKCF3aW5kb3cuY29uZmlybShSZXNvdXJjZXMuQ09NUEFSRV9DT05GSVJNQVRJT04pKSB7XG4gICAgICAgICAgICAkY2JbMF0uY2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcmVtb3ZlIHByb2R1Y3QgdXNpbmcgaWRcbiAgICAgICAgdmFyICRmaXJzdEl0ZW0gPSAkaXRlbXMuZmlyc3QoKTtcbiAgICAgICAgcHJvbWlzZSA9IHJlbW92ZUl0ZW0oJGZpcnN0SXRlbSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gc2hpZnRJbWFnZXMoKTtcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcHJvbWlzZSA9IFRQcm9taXNlLnJlc29sdmUoMCk7XG4gICAgfVxuICAgIHJldHVybiBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gYWRkUHJvZHVjdEFqYXgoYXJncykudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBhZGRUb0xpc3QoYXJncyk7XG4gICAgICAgICAgICBpZiAoJGNiICYmICRjYi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgJGNiWzBdLmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVmcmVzaENvbnRhaW5lcigpO1xuICAgICAgICB9KTtcbiAgICB9KS50aGVuKG51bGwsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCRjYiAmJiAkY2IubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgJGNiWzBdLmNoZWNrZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG4vKipcbiAqIEBmdW5jdGlvblxuICogQGRlc2NyaXB0aW9uIFJlbW92ZXMgcHJvZHVjdCBmcm9tIHRoZSBjb21wYXJlIHRhYmxlXG4gKiBAcGFyYW0ge29iamVjdH0gYXJncyAtIHRoZSBhcmd1bWVudHMgb2JqZWN0IHNob3VsZCBoYXZlIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczogaXRlbWlkLCB1dWlkIGFuZCBjYiAoY2hlY2tib3gpXG4gKi9cbmZ1bmN0aW9uIHJlbW92ZVByb2R1Y3QoYXJncykge1xuICAgIHZhciAkY2IgPSBhcmdzLmNiID8gJChhcmdzLmNiKSA6IG51bGw7XG4gICAgcmV0dXJuIHJlbW92ZVByb2R1Y3RBamF4KGFyZ3MpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgJGl0ZW0gPSAkKCdbZGF0YS11dWlkPVwiJyArIGFyZ3MudXVpZCArICdcIl0nKTtcbiAgICAgICAgcmVtb3ZlRnJvbUxpc3QoJGl0ZW0pO1xuICAgICAgICBpZiAoJGNiICYmICRjYi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAkY2JbMF0uY2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJlZnJlc2hDb250YWluZXIoKTtcbiAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICgkY2IgJiYgJGNiLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICRjYlswXS5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiByZW1vdmVJdGVtKCRpdGVtKSB7XG4gICAgdmFyIHV1aWQgPSAkaXRlbS5kYXRhKCd1dWlkJyksXG4gICAgICAgICRwcm9kdWN0VGlsZSA9ICQoJyMnICsgdXVpZCk7XG4gICAgcmV0dXJuIHJlbW92ZVByb2R1Y3Qoe1xuICAgICAgICBpdGVtaWQ6ICRpdGVtLmRhdGEoJ2l0ZW1pZCcpLFxuICAgICAgICB1dWlkOiB1dWlkLFxuICAgICAgICBjYjogKCRwcm9kdWN0VGlsZS5sZW5ndGggPT09IDApID8gbnVsbCA6ICRwcm9kdWN0VGlsZS5maW5kKCcuY29tcGFyZS1jaGVjaycpXG4gICAgfSk7XG59XG5cbi8qKlxuICogQHByaXZhdGVcbiAqIEBmdW5jdGlvblxuICogQGRlc2NyaXB0aW9uIEluaXRpYWxpemVzIHRoZSBET00tT2JqZWN0IG9mIHRoZSBjb21wYXJlIGNvbnRhaW5lclxuICovXG5mdW5jdGlvbiBpbml0aWFsaXplRG9tKCkge1xuICAgIHZhciAkY29tcGFyZUNvbnRhaW5lciA9ICQoJy5jb21wYXJlLWl0ZW1zJyk7XG4gICAgX2N1cnJlbnRDYXRlZ29yeSA9ICRjb21wYXJlQ29udGFpbmVyLmRhdGEoJ2NhdGVnb3J5JykgfHwgJyc7XG4gICAgdmFyICRhY3RpdmUgPSAkY29tcGFyZUNvbnRhaW5lci5maW5kKCcuY29tcGFyZS1pdGVtJykuZmlsdGVyKCcuYWN0aXZlJyk7XG4gICAgJGFjdGl2ZS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyICRwcm9kdWN0VGlsZSA9ICQoJyMnICsgJCh0aGlzKS5kYXRhKCd1dWlkJykpO1xuICAgICAgICBpZiAoJHByb2R1Y3RUaWxlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgICRwcm9kdWN0VGlsZS5maW5kKCcuY29tcGFyZS1jaGVjaycpWzBdLmNoZWNrZWQgPSB0cnVlO1xuICAgIH0pO1xuICAgIC8vIHNldCBjb250YWluZXIgc3RhdGVcbiAgICByZWZyZXNoQ29udGFpbmVyKCk7XG59XG5cbi8qKlxuICogQHByaXZhdGVcbiAqIEBmdW5jdGlvblxuICogQGRlc2NyaXB0aW9uIEluaXRpYWxpemVzIHRoZSBldmVudHMgb24gdGhlIGNvbXBhcmUgY29udGFpbmVyXG4gKi9cbmZ1bmN0aW9uIGluaXRpYWxpemVFdmVudHMoKSB7XG4gICAgLy8gYWRkIGV2ZW50IHRvIGJ1dHRvbnMgdG8gcmVtb3ZlIHByb2R1Y3RzXG4gICAgJCgnLmNvbXBhcmUtaXRlbScpLm9uKCdjbGljaycsICcuY29tcGFyZS1pdGVtLXJlbW92ZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmVtb3ZlSXRlbSgkKHRoaXMpLmNsb3Nlc3QoJy5jb21wYXJlLWl0ZW0nKSk7XG4gICAgfSk7XG5cbiAgICAvLyBCdXR0b24gdG8gZ28gdG8gY29tcGFyZSBwYWdlXG4gICAgJCgnI2NvbXBhcmUtaXRlbXMtYnV0dG9uJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBwYWdlLnJlZGlyZWN0KHV0aWwuYXBwZW5kUGFyYW1Ub1VSTChVcmxzLmNvbXBhcmVTaG93LCAnY2F0ZWdvcnknLCBfY3VycmVudENhdGVnb3J5KSk7XG4gICAgfSk7XG5cbiAgICAvLyBCdXR0b24gdG8gY2xlYXIgYWxsIGNvbXBhcmVkIGl0ZW1zXG4gICAgLy8gcmVseSBvbiByZWZyZXNoQ29udGFpbmVyIHRvIHRha2UgY2FyZSBvZiBoaWRpbmcgdGhlIGNvbnRhaW5lclxuICAgICQoJyNjbGVhci1jb21wYXJlZC1pdGVtcycpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnLmNvbXBhcmUtaXRlbXMgLmFjdGl2ZScpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmVtb3ZlSXRlbSgkKHRoaXMpKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5cbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpbml0aWFsaXplRG9tKCk7XG4gICAgaW5pdGlhbGl6ZUV2ZW50cygpO1xufTtcblxuZXhwb3J0cy5hZGRQcm9kdWN0ID0gYWRkUHJvZHVjdDtcbmV4cG9ydHMucmVtb3ZlUHJvZHVjdCA9IHJlbW92ZVByb2R1Y3Q7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBhamF4ID0gcmVxdWlyZSgnLi9hamF4Jyk7XG5cbi8qKlxuICogQGZ1bmN0aW9uIGNvb2tpZXByaXZhY3kgICAgVXNlZCB0byBkaXNwbGF5L2NvbnRyb2wgdGhlIHNjcmltIGNvbnRhaW5pbmcgdGhlIGNvb2tpZSBwcml2YWN5IGNvZGVcbiAqKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIElmIHdlIGhhdmUgbm90IGFjY2VwdGVkIGNvb2tpZXMgQU5EIHdlJ3JlIG5vdCBvbiB0aGUgUHJpdmFjeSBQb2xpY3kgcGFnZSwgdGhlbiBzaG93IHRoZSBub3RpZmljYXRpb25cbiAgICAgKiBOT1RFOiBZb3Ugd2lsbCBwcm9iYWJseSB3YW50IHRvIGFkanVzdCB0aGUgUHJpdmFjeSBQYWdlIHRlc3QgdG8gbWF0Y2ggeW91ciBzaXRlJ3Mgc3BlY2lmaWMgcHJpdmFjeSAvIGNvb2tpZSBwYWdlXG4gICAgICovXG4gICAgaWYgKFNpdGVQcmVmZXJlbmNlcy5DT09LSUVfSElOVCA9PT0gdHJ1ZSAmJiBkb2N1bWVudC5jb29raWUuaW5kZXhPZignZHdfY29va2llc19hY2NlcHRlZCcpIDwgMCkge1xuICAgICAgICAvLyBjaGVjayBmb3IgcHJpdmFjeSBwb2xpY3kgcGFnZVxuICAgICAgICBpZiAoJCgnLnByaXZhY3ktcG9saWN5JykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB2YXIgJGNvbnRhaW5lciA9ICQoJy5jb29raWUtZm9vdGVyJyk7IFxuICAgICAgICAgICAgYWpheC5sb2FkKHtcbiAgICAgICAgICAgICAgICB1cmw6IFVybHMuY29va2llSGludCxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgIHRhcmdldDogJGNvbnRhaW5lclxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBlbmFibGVDb29raWVzKCk7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBPdGhlcndpc2UsIHdlIGRvbid0IG5lZWQgdG8gc2hvdyB0aGUgYXNzZXQsIGp1c3QgZW5hYmxlIHRoZSBjb29raWVzXG4gICAgICAgIGVuYWJsZUNvb2tpZXMoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlbmFibGVDb29raWVzKCkge1xuICAgICAgICBpZiAoZG9jdW1lbnQuY29va2llLmluZGV4T2YoJ2R3PTEnKSA8IDApIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmNvb2tpZSA9ICdkdz0xOyBwYXRoPS8nO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkb2N1bWVudC5jb29raWUuaW5kZXhPZignZHdfY29va2llc19hY2NlcHRlZCcpIDwgMCkge1xuICAgICAgICAgICAgZG9jdW1lbnQuY29va2llID0gJ2R3X2Nvb2tpZXNfYWNjZXB0ZWQ9MTsgcGF0aD0vJztcbiAgICAgICAgfVxuICAgIH1cbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgJCgnLmNvdW50cnktc2VsZWN0b3IgLmN1cnJlbnQtY291bnRyeScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnLmNvdW50cnktc2VsZWN0b3IgLnNlbGVjdG9yJykudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdzZWxlY3Rvci1hY3RpdmUnKTtcbiAgICB9KTtcbiAgICAvLyBzZXQgY3VycmVuY3kgZmlyc3QgYmVmb3JlIHJlbG9hZFxuICAgICQoJy5jb3VudHJ5LXNlbGVjdG9yIC5zZWxlY3RvciAubG9jYWxlJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB2YXIgdXJsID0gdGhpcy5ocmVmO1xuICAgICAgICB2YXIgY3VycmVuY3kgPSB0aGlzLmdldEF0dHJpYnV0ZSgnZGF0YS1jdXJyZW5jeScpO1xuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgIHVybDogVXJscy5zZXRTZXNzaW9uQ3VycmVuY3ksXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgZm9ybWF0OiAnYWpheCcsXG4gICAgICAgICAgICAgICAgY3VycmVuY3lNbmVtb25pYzogY3VycmVuY3lcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5kb25lKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2Uuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuYWJsZSB0byBzZXQgY3VycmVuY3knKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSB1cmw7XG4gICAgICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgICQoJy5jaGFuZ2UtY3VycmVuY3ktbGluaycpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7IFxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHZhciB1cmwgPSB0aGlzLmhyZWY7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgZm9ybWF0OiAnYWpheCdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5kb25lKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2Uuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuYWJsZSB0byBzZXQgY3VycmVuY3knKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZChmYWxzZSk7XG4gICAgICAgICAgICB9KTtcbiAgICB9KTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBhamF4ID0gcmVxdWlyZSgnLi9hamF4JyksXG4gICAgdXRpbCA9IHJlcXVpcmUoJy4vdXRpbCcpLFxuICAgIF8gPSByZXF1aXJlKCdsb2Rhc2gnKSxcbiAgICBpbWFnZXNMb2FkZWQgPSByZXF1aXJlKCdpbWFnZXNsb2FkZWQnKTtcblxudmFyIGRpYWxvZyA9IHtcbiAgICAvKipcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAZGVzY3JpcHRpb24gQXBwZW5kcyBhIGRpYWxvZyB0byBhIGdpdmVuIGNvbnRhaW5lciAodGFyZ2V0KVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXMgIHBhcmFtcy50YXJnZXQgY2FuIGJlIGFuIGlkIHNlbGVjdG9yIG9yIGFuIGpxdWVyeSBvYmplY3RcbiAgICAgKi9cbiAgICBjcmVhdGU6IGZ1bmN0aW9uIChwYXJhbXMpIHtcbiAgICAgICAgdmFyICR0YXJnZXQsIGlkO1xuXG4gICAgICAgIGlmIChfLmlzU3RyaW5nKHBhcmFtcy50YXJnZXQpKSB7XG4gICAgICAgICAgICBpZiAocGFyYW1zLnRhcmdldC5jaGFyQXQoMCkgPT09ICcjJykge1xuICAgICAgICAgICAgICAgICR0YXJnZXQgPSAkKHBhcmFtcy50YXJnZXQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkdGFyZ2V0ID0gJCgnIycgKyBwYXJhbXMudGFyZ2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChwYXJhbXMudGFyZ2V0IGluc3RhbmNlb2YgalF1ZXJ5KSB7XG4gICAgICAgICAgICAkdGFyZ2V0ID0gcGFyYW1zLnRhcmdldDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICR0YXJnZXQgPSAkKCcjZGlhbG9nLWNvbnRhaW5lcicpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaWYgbm8gZWxlbWVudCBmb3VuZCwgY3JlYXRlIG9uZVxuICAgICAgICBpZiAoJHRhcmdldC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGlmICgkdGFyZ2V0LnNlbGVjdG9yICYmICR0YXJnZXQuc2VsZWN0b3IuY2hhckF0KDApID09PSAnIycpIHtcbiAgICAgICAgICAgICAgICBpZCA9ICR0YXJnZXQuc2VsZWN0b3Iuc3Vic3RyKDEpO1xuICAgICAgICAgICAgICAgICR0YXJnZXQgPSAkKCc8ZGl2PicpLmF0dHIoJ2lkJywgaWQpLmFkZENsYXNzKCdkaWFsb2ctY29udGVudCcpLmFwcGVuZFRvKCdib2R5Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBjcmVhdGUgdGhlIGRpYWxvZ1xuICAgICAgICB0aGlzLiRjb250YWluZXIgPSAkdGFyZ2V0O1xuICAgICAgICB0aGlzLiRjb250YWluZXIuZGlhbG9nKF8ubWVyZ2Uoe30sIHRoaXMuc2V0dGluZ3MsIHBhcmFtcy5vcHRpb25zIHx8IHt9KSk7XG4gICAgICAgIHJldHVybiB0aGlzLiRjb250YWluZXI7IC8vIFBSRVZBSUwtQWRkZWQgUmV0dXJuIHZhbHVlLlxuICAgIH0sXG4gICAgLyoqXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQGRlc2NyaXB0aW9uIE9wZW5zIGEgZGlhbG9nIHVzaW5nIHRoZSBnaXZlbiB1cmwgKHBhcmFtcy51cmwpIG9yIGh0bWwgKHBhcmFtcy5odG1sKVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zLnVybCBzaG91bGQgY29udGFpbiB0aGUgdXJsXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHBhcmFtcy5odG1sIGNvbnRhaW5zIHRoZSBodG1sIG9mIHRoZSBkaWFsb2cgY29udGVudFxuICAgICAqL1xuICAgIG9wZW46IGZ1bmN0aW9uIChwYXJhbXMpIHtcbiAgICAgICAgLy8gY2xvc2UgYW55IG9wZW4gZGlhbG9nXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgdGhpcy5jcmVhdGUocGFyYW1zKTtcbiAgICAgICAgdGhpcy5yZXBsYWNlKHBhcmFtcyk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAZGVzY3JpcHRpb24gcG9wdWxhdGUgdGhlIGRpYWxvZyB3aXRoIGh0bWwgY29udGVudCwgdGhlbiBvcGVuIGl0XG4gICAgICoqL1xuICAgIG9wZW5XaXRoQ29udGVudDogZnVuY3Rpb24gKHBhcmFtcykge1xuICAgICAgICB2YXIgY29udGVudCwgcG9zaXRpb24sIGNhbGxiYWNrO1xuXG4gICAgICAgIGlmICghdGhpcy4kY29udGFpbmVyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29udGVudCA9IHBhcmFtcy5jb250ZW50IHx8IHBhcmFtcy5odG1sO1xuICAgICAgICBpZiAoIWNvbnRlbnQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiRjb250YWluZXIuZW1wdHkoKS5odG1sKGNvbnRlbnQpO1xuICAgICAgICBpZiAoIXRoaXMuJGNvbnRhaW5lci5kaWFsb2coJ2lzT3BlbicpKSB7XG4gICAgICAgICAgICB0aGlzLiRjb250YWluZXIuZGlhbG9nKCdvcGVuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocGFyYW1zLm9wdGlvbnMpIHtcbiAgICAgICAgICAgIHBvc2l0aW9uID0gcGFyYW1zLm9wdGlvbnMucG9zaXRpb247XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFwb3NpdGlvbikge1xuICAgICAgICAgICAgcG9zaXRpb24gPSB0aGlzLnNldHRpbmdzLnBvc2l0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGltYWdlc0xvYWRlZCh0aGlzLiRjb250YWluZXIpLm9uKCdkb25lJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy4kY29udGFpbmVyLmRpYWxvZygnb3B0aW9uJywgJ3Bvc2l0aW9uJywgcG9zaXRpb24pO1xuICAgICAgICB9LmJpbmQodGhpcykpO1xuXG4gICAgICAgIGNhbGxiYWNrID0gKHR5cGVvZiBwYXJhbXMuY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpID8gcGFyYW1zLmNhbGxiYWNrIDogZnVuY3Rpb24gKCkge1xuICAgICAgICB9O1xuICAgICAgICBjYWxsYmFjaygpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQGRlc2NyaXB0aW9uIFJlcGxhY2UgdGhlIGNvbnRlbnQgb2YgY3VycmVudCBkaWFsb2dcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gcGFyYW1zXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHBhcmFtcy51cmwgLSBJZiB0aGUgdXJsIHByb3BlcnR5IGlzIHByb3ZpZGVkLCBhbiBhamF4IGNhbGwgaXMgcGVyZm9ybWVkIHRvIGdldCB0aGUgY29udGVudCB0byByZXBsYWNlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHBhcmFtcy5odG1sIC0gSWYgbm8gdXJsIHByb3BlcnR5IGlzIHByb3ZpZGVkLCB1c2UgaHRtbCBwcm92aWRlZCB0byByZXBsYWNlXG4gICAgICovXG4gICAgcmVwbGFjZTogZnVuY3Rpb24gKHBhcmFtcykge1xuICAgICAgICBpZiAoIXRoaXMuJGNvbnRhaW5lcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJhbXMudXJsKSB7XG4gICAgICAgICAgICBwYXJhbXMudXJsID0gdXRpbC5hcHBlbmRQYXJhbVRvVVJMKHBhcmFtcy51cmwsICdmb3JtYXQnLCAnYWpheCcpO1xuICAgICAgICAgICAgYWpheC5sb2FkKHtcbiAgICAgICAgICAgICAgICB1cmw6IHBhcmFtcy51cmwsXG4gICAgICAgICAgICAgICAgZGF0YTogcGFyYW1zLmRhdGEsXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICBwYXJhbXMuY29udGVudCA9IHJlc3BvbnNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW5XaXRoQ29udGVudChwYXJhbXMpO1xuICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAocGFyYW1zLmh0bWwpIHtcbiAgICAgICAgICAgIHRoaXMub3BlbldpdGhDb250ZW50KHBhcmFtcyk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBkZXNjcmlwdGlvbiBDbG9zZXMgdGhlIGRpYWxvZ1xuICAgICAqL1xuICAgIGNsb3NlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy4kY29udGFpbmVyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4kY29udGFpbmVyLmRpYWxvZygnY2xvc2UnKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBkZXNjcmlwdGlvbiBTdWJtaXRzIHRoZSBkaWFsb2cgZm9ybSB3aXRoIHRoZSBnaXZlbiBhY3Rpb25cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gVGhlIGFjdGlvbiB3aGljaCB3aWxsIGJlIHRyaWdnZXJlZCB1cG9uIGZvcm0gc3VibWl0XG4gICAgICovXG4gICAgc3VibWl0OiBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgICAgIHZhciAkZm9ybSA9IHRoaXMuJGNvbnRhaW5lci5maW5kKCdmb3JtOmZpcnN0Jyk7XG4gICAgICAgIC8vIHNldCB0aGUgYWN0aW9uXG4gICAgICAgICQoJzxpbnB1dC8+JykuYXR0cih7XG4gICAgICAgICAgICBuYW1lOiBhY3Rpb24sXG4gICAgICAgICAgICB0eXBlOiAnaGlkZGVuJ1xuICAgICAgICB9KS5hcHBlbmRUbygkZm9ybSk7XG4gICAgICAgIC8vIHNlcmlhbGl6ZSB0aGUgZm9ybSBhbmQgZ2V0IHRoZSBwb3N0IHVybFxuICAgICAgICB2YXIgZGF0YSA9ICRmb3JtLnNlcmlhbGl6ZSgpO1xuICAgICAgICB2YXIgdXJsID0gJGZvcm0uYXR0cignYWN0aW9uJyk7XG4gICAgICAgIC8vIG1ha2Ugc3VyZSB0aGUgc2VydmVyIGtub3dzIHRoaXMgaXMgYW4gYWpheCByZXF1ZXN0XG4gICAgICAgIGlmIChkYXRhLmluZGV4T2YoJ2FqYXgnKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIGRhdGEgKz0gJyZmb3JtYXQ9YWpheCc7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcG9zdCB0aGUgZGF0YSBhbmQgcmVwbGFjZSBjdXJyZW50IGNvbnRlbnQgd2l0aCByZXNwb25zZSBjb250ZW50XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2h0bWwnLFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGh0bWwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRjb250YWluZXIuaHRtbChodG1sKTtcbiAgICAgICAgICAgICAgICAkKCcudWktZGlhbG9nLWNvbnRlbnQ6dmlzaWJsZScpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmRpYWxvZygnb3B0aW9uJywgJ3Bvc2l0aW9uJywgJCh0aGlzKS5kaWFsb2coJ29wdGlvbicsICdwb3NpdGlvbicpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSxcbiAgICAgICAgICAgIGZhaWx1cmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cuYWxlcnQoUmVzb3VyY2VzLlNFUlZFUl9FUlJPUik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgZXhpc3RzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRjb250YWluZXIgJiYgKHRoaXMuJGNvbnRhaW5lci5sZW5ndGggPiAwKTtcbiAgICB9LFxuICAgIGlzQWN0aXZlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmV4aXN0cygpICYmICh0aGlzLiRjb250YWluZXIuY2hpbGRyZW4ubGVuZ3RoID4gMCk7XG4gICAgfSxcbiAgICBzZXR0aW5nczoge1xuICAgICAgICBhdXRvT3BlbjogZmFsc2UsXG4gICAgICAgIGhlaWdodDogJ2F1dG8nLFxuICAgICAgICBtb2RhbDogdHJ1ZSxcbiAgICAgICAgb3ZlcmxheToge1xuICAgICAgICAgICAgb3BhY2l0eTogMC41LFxuICAgICAgICAgICAgYmFja2dyb3VuZDogJ2JsYWNrJ1xuICAgICAgICB9LFxuICAgICAgICByZXNpemFibGU6IGZhbHNlLFxuICAgICAgICB0aXRsZTogJycsXG4gICAgICAgIHdpZHRoOiAnODAwJyxcbiAgICAgICAgY2xvc2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQodGhpcykuZGlhbG9nKCdjbG9zZScpO1xuICAgICAgICB9LFxuICAgICAgICBwb3NpdGlvbjoge1xuICAgICAgICAgICAgbXk6ICdjZW50ZXInLFxuICAgICAgICAgICAgYXQ6ICdjZW50ZXInLFxuICAgICAgICAgICAgb2Y6IHdpbmRvdyxcbiAgICAgICAgICAgIGNvbGxpc2lvbjogJ2ZsaXBmaXQnXG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGRpYWxvZztcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGFqYXggPSByZXF1aXJlKCcuL2FqYXgnKSxcbiAgICB1dGlsID0gcmVxdWlyZSgnLi91dGlsJyksXG4gICAgdG9vbHRpcCA9IHJlcXVpcmUoJy4vdG9vbHRpcCcpLFxuICAgIHZhbGlkYXRvciA9IHJlcXVpcmUoJy4vdmFsaWRhdG9yJyksXG4gICAgZGlhbG9nID0gcmVxdWlyZSgnLi9kaWFsb2cnKTtcblxudmFyIHNldERpYWxvZ2lmeSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHZhciBhY3Rpb25Tb3VyY2UgPSAkKHRoaXMpLFxuICAgICAgICBkbGdBY3Rpb24gPSAkKGFjdGlvblNvdXJjZSkuZGF0YSgnZGxnLWFjdGlvbicpIHx8IHt9LCAvLyB1cmwsIHRhcmdldCwgaXNGb3JtXG4gICAgICAgIGRsZ09wdGlvbnMgPSAkLmV4dGVuZCh7fSwgZGlhbG9nLnNldHRpbmdzLCAkKGFjdGlvblNvdXJjZSkuZGF0YSgnZGxnLW9wdGlvbnMnKSB8fCB7fSk7XG5cbiAgICBkbGdPcHRpb25zLnRpdGxlID0gZGxnT3B0aW9ucy50aXRsZSB8fCAkKGFjdGlvblNvdXJjZSkuYXR0cigndGl0bGUnKSB8fCAnJztcblxuICAgIHZhciB1cmwgPSBkbGdBY3Rpb24udXJsIC8vIHVybCBmcm9tIGRhdGFcbiAgICAgICAgfHxcbiAgICAgICAgKGRsZ0FjdGlvbi5pc0Zvcm0gPyAkKGFjdGlvblNvdXJjZSkuY2xvc2VzdCgnZm9ybScpLmF0dHIoJ2FjdGlvbicpIDogbnVsbCkgLy8gb3IgdXJsIGZyb20gZm9ybSBhY3Rpb24gaWYgaXNGb3JtPXRydWVcbiAgICAgICAgfHxcbiAgICAgICAgJChhY3Rpb25Tb3VyY2UpLmF0dHIoJ2hyZWYnKTsgLy8gb3IgdXJsIGZyb20gaHJlZlxuXG4gICAgaWYgKCF1cmwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBmb3JtID0galF1ZXJ5KHRoaXMpLnBhcmVudHMoJ2Zvcm0nKTtcbiAgICB2YXIgbWV0aG9kID0gZm9ybS5hdHRyKCdtZXRob2QnKSB8fCAnUE9TVCc7XG5cbiAgICBpZiAoYWN0aW9uU291cmNlWzBdLnRhZ05hbWUgPT09ICdCVVRUT04nICYmICFmb3JtLnZhbGlkKCkgfHwgYWN0aW9uU291cmNlWzBdLnRhZ05hbWUgPT09ICdJTlBVVCcgJiYgIWZvcm0udmFsaWQoKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gaWYgdGhpcyBpcyBhIGNvbnRlbnQgbGluaywgdXBkYXRlIHVybCBmcm9tIFBhZ2UtU2hvdyB0byBQYWdlLUluY2x1ZGVcbiAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnYXR0cmlidXRlY29udGVudGxpbmsnKSkge1xuICAgICAgICB2YXIgdXJpID0gdXRpbC5nZXRVcmkodXJsKTtcbiAgICAgICAgdXJsID0gVXJscy5wYWdlSW5jbHVkZSArIHVyaS5xdWVyeTtcbiAgICB9XG4gICAgdmFyIHBvc3REYXRhO1xuICAgIGlmIChtZXRob2QgJiYgbWV0aG9kLnRvVXBwZXJDYXNlKCkgPT09ICdQT1NUJykge1xuICAgICAgICBwb3N0RGF0YSA9IGZvcm0uc2VyaWFsaXplKCkgKyAnJicgKyBqUXVlcnkodGhpcykuYXR0cignbmFtZScpICsgJz1zdWJtaXQnO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh1cmwuaW5kZXhPZignPycpID09PSAtMSkge1xuICAgICAgICAgICAgdXJsICs9ICc/JztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHVybCArPSAnJic7XG4gICAgICAgIH1cbiAgICAgICAgdXJsICs9IGZvcm0uc2VyaWFsaXplKCk7XG4gICAgICAgIHVybCA9IHV0aWwuYXBwZW5kUGFyYW1Ub1VSTCh1cmwsIGpRdWVyeSh0aGlzKS5hdHRyKCduYW1lJyksICdzdWJtaXQnKTtcbiAgICB9XG5cbiAgICB2YXIgZGxnID0gZGlhbG9nLmNyZWF0ZSh7XG4gICAgICAgIHRhcmdldDogZGxnQWN0aW9uLnRhcmdldCxcbiAgICAgICAgb3B0aW9uczogZGxnT3B0aW9uc1xuICAgIH0pO1xuXG4gICAgYWpheC5sb2FkKHtcbiAgICAgICAgdXJsOiAkKGFjdGlvblNvdXJjZSkuYXR0cignaHJlZicpIHx8ICQoYWN0aW9uU291cmNlKS5jbG9zZXN0KCdmb3JtJykuYXR0cignYWN0aW9uJyksXG4gICAgICAgIHRhcmdldDogZGxnLFxuICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZGxnLmRpYWxvZygnb3BlbicpOyAvLyBvcGVuIGFmdGVyIGxvYWQgdG8gZW5zdXJlIGRpYWxvZyBpcyBjZW50ZXJlZFxuICAgICAgICAgICAgdmFsaWRhdG9yLmluaXQoKTtcbiAgICAgICAgICAgIHRvb2x0aXAuaW5pdCgpO1xuICAgICAgICAgICAgaWYgKGRsZy5maW5kKCcuY2xvc2VkaWFsb2cnKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZGlhbG9nLmNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGRhdGE6ICEkKGFjdGlvblNvdXJjZSkuYXR0cignaHJlZicpID8gcG9zdERhdGEgOiBudWxsLFxuICAgICAgICB0eXBlOiBtZXRob2RcblxuICAgIH0pO1xufTtcblxuZXhwb3J0cy5zZXREaWFsb2dpZnkgPSBzZXREaWFsb2dpZnk7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBhamF4ID0gcmVxdWlyZSgnLi9hamF4JyksXG4gICAgbWluaWNhcnQgPSByZXF1aXJlKCcuL21pbmljYXJ0JyksXG4gICAgdXRpbCA9IHJlcXVpcmUoJy4vdXRpbCcpO1xuXG52YXIgc2V0QWRkVG9DYXJ0SGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHZhciBmb3JtID0gJCh0aGlzKS5jbG9zZXN0KCdmb3JtJyk7XG5cbiAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgdXJsOiB1dGlsLmFqYXhVcmwoZm9ybS5hdHRyKCdhY3Rpb24nKSksXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBjYWNoZTogZmFsc2UsXG4gICAgICAgIGRhdGE6IGZvcm0uc2VyaWFsaXplKClcbiAgICB9O1xuICAgICQuYWpheChvcHRpb25zKS5kb25lKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICBpZiAocmVzcG9uc2Uuc3VjY2Vzcykge1xuICAgICAgICAgICAgYWpheC5sb2FkKHtcbiAgICAgICAgICAgICAgICB1cmw6IFVybHMubWluaWNhcnRHQyxcbiAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIGxpbmVJdGVtSWQ6IHJlc3BvbnNlLnJlc3VsdC5saW5lSXRlbUlkXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIG1pbmljYXJ0LnNob3cocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICBmb3JtLmZpbmQoJ2lucHV0LHRleHRhcmVhJykudmFsKCcnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvcm0uZmluZCgnc3Bhbi5lcnJvcicpLmhpZGUoKTtcbiAgICAgICAgICAgIGZvciAodmFyIGlkIGluIHJlc3BvbnNlLmVycm9ycy5Gb3JtRXJyb3JzKSB7XG4gICAgICAgICAgICAgICAgdmFyICRlcnJvckVsID0gJCgnIycgKyBpZCkuYWRkQ2xhc3MoJ2Vycm9yJykucmVtb3ZlQ2xhc3MoJ3ZhbGlkJykubmV4dCgnLmVycm9yJyk7XG4gICAgICAgICAgICAgICAgaWYgKCEkZXJyb3JFbCB8fCAkZXJyb3JFbC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgJGVycm9yRWwgPSAkKCc8c3BhbiBmb3I9XCInICsgaWQgKyAnXCIgZ2VuZXJhdGVkPVwidHJ1ZVwiIGNsYXNzPVwiZXJyb3JcIiBzdHlsZT1cIlwiPjwvc3Bhbj4nKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnIycgKyBpZCkuYWZ0ZXIoJGVycm9yRWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkZXJyb3JFbC50ZXh0KHJlc3BvbnNlLmVycm9ycy5Gb3JtRXJyb3JzW2lkXS5yZXBsYWNlKC9cXFxcJy9nLCAnXFwnJykpLnNob3coKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pLmZhaWwoZnVuY3Rpb24gKHhociwgdGV4dFN0YXR1cykge1xuICAgICAgICAvLyBmYWlsZWRcbiAgICAgICAgaWYgKHRleHRTdGF0dXMgPT09ICdwYXJzZXJlcnJvcicpIHtcbiAgICAgICAgICAgIHdpbmRvdy5hbGVydChSZXNvdXJjZXMuQkFEX1JFU1BPTlNFKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHdpbmRvdy5hbGVydChSZXNvdXJjZXMuU0VSVkVSX0NPTk5FQ1RJT05fRVJST1IpO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5leHBvcnRzLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgJCgnI0FkZFRvQmFza2V0QnV0dG9uJykub24oJ2NsaWNrJywgc2V0QWRkVG9DYXJ0SGFuZGxlcik7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgLy91aWV2ZW50cyA9IHJlcXVpcmUoJy4vdWlldmVudHMnKSxcbiAgICBkaWFsb2cgPSByZXF1aXJlKCcuL2RpYWxvZycpLFxuICAgIHByb2dyZXNzID0gcmVxdWlyZSgnLi9wcm9ncmVzcycpO1xuXG4vL3ZhciAkY29uID0gJCgnYm9keScpO1xudmFyIGFwcEdsb2JhbCA9IHtcbiAgICBnbG9iYWxUaW1lcjogMFxufTtcbnZhciBoZWFkZXJFdmVudHMgPSB7XG4gICAgaW5pdGlhbGl6ZUV2ZW50OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJ2JvZHknKS5maW5kKCdpbnB1dCwgc2VsZWN0LmlucHV0LXNlbGVjdCcpLmZvY3VzaW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykucmVtb3ZlQ2xhc3MoJ2lucHV0bGFiZWwnKTtcbiAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5mb3JtLXJvdyAsIC5sYWJlbCBzcGFuJykucmVtb3ZlQ2xhc3MoJ2lucHV0bGFiZWwnKTtcbiAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2Vycm9yY2xpZW50Jyk7XG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcubG9nZXJyb3IgLCAuZXhpc3RpbmdfcmVnaXN0ZXInKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCQoJy5sb2dpbmN1c3RvbWVycycpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhciBjcnJvYmogPSAkKHRoaXMpLmZpbmQoJy5mb3JtZmllbGQgIC5sb2dlcnJvcicpO1xuICAgICAgICAgICAgJChjcnJvYmopLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcuZm9ybS1yb3cgLCAubGFiZWwgc3BhbicpLnJlbW92ZUNsYXNzKCdpbnB1dGxhYmVsJyk7XG4gICAgICAgIH1cblxuICAgICAgICAkKCcucHJpdmFjeS1wb2xpY3knKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZGlhbG9nLm9wZW4oe1xuICAgICAgICAgICAgICAgIHVybDogJChlLnRhcmdldCkuYXR0cignaHJlZicpLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiA2MDBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vbGFiZWwgdGV4dCBjb2xvciBjaGFuZ2Ugb24gc3VibWl0XG4gICAgICAgIGlmICgkKCcuYWNjb3VudC1sb2dzJykubGVuZ3RoID4gMCB8fCAkKCcubmV3LXJlZ2lzdGVyJykubGVuZ3RoID4gMCB8fCAkKCcud2lzaC1sb2dzJykubGVuZ3RoID4gMCB8fCAkKCcuY3JlYXRlYW4tYWNjb3VudCcpLmxlbmd0aCA+IDAgfHwgJCgnLmhlYWRlcmN1c3RvbWVyaW5mbycpLmxlbmd0aCA+IDAgfHwgJCgnLnVpLWxvZ2luJykubGVuZ3RoID4gMCB8fCAkKCcucGFzc3dvcmRyZXNldCcpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICQoJy5mb3JtYWN0aW9ucyBidXR0b24nKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJCgnc3Bhbi5leGlzdGluZ19yZWdpc3RlcicpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICB2YXIgY3Jyb2JqID0gJCh0aGlzKS5jbG9zZXN0KCdmb3JtJykuZmluZCgnLmZpZWxkLXdyYXBwZXIgLnJlcXVpcmVkJyk7XG4gICAgICAgICAgICAgICAgJChjcnJvYmopLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnZXJyb3JjbGllbnQnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxhYmVsIC5sYWJlbHRleHQnKS5hZGRDbGFzcygnaW5wdXRsYWJlbCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxhYmVsIC5yZXF1aXJlZGluZGljYXRvcicpLmFkZENsYXNzKCdpbnB1dGxhYmVsJyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcubGFiZWwgLmxhYmVsdGV4dCcpLnJlbW92ZUNsYXNzKCdpbnB1dGxhYmVsJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcubGFiZWwgLnJlcXVpcmVkaW5kaWNhdG9yJykucmVtb3ZlQ2xhc3MoJ2lucHV0bGFiZWwnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy9sb2dpbiAmIHdpc2ggbGlzdCB2YWxpZGF0aW9uc1xuICAgICAgICBpZiAoJCgnLmFjY291bnQtbG9ncycpLmxlbmd0aCA+IDAgfHwgJCgnLm5ldy1yZWdpc3RlcicpLmxlbmd0aCA+IDAgfHwgJCgnLndpc2gtbG9ncycpLmxlbmd0aCA+IDAgfHwgJCgnLmNyZWF0ZWFuLWFjY291bnQnKS5sZW5ndGggPiAwIHx8ICQoJy5oZWFkZXJjdXN0b21lcmluZm8nKS5sZW5ndGggPiAwIHx8ICQoJy51aS1sb2dpbicpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICQoJ2EuY2xlYXJidXR0b24nKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnaW5wdXQnKS52YWwoJycpO1xuICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJ3RleHRhcmVhJykudmFsKCcnKTtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5maWVsZC13cmFwcGVyJykuZmluZCgnc3BhbicpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZpZWxkLXdyYXBwZXInKS5maW5kKCcucmVxdWlyZWQnKS5yZW1vdmVDbGFzcygnZXJyb3JjbGllbnQnKTtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCdhLmNsZWFyYnV0dG9uJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCAnKS5maW5kKCcuZm9ybS1yb3cnKS5yZW1vdmVDbGFzcygnaW5wdXRsYWJlbCcpO1xuICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5mb3JtLXJvdyAsIC5sYWJlbCBzcGFuJykucmVtb3ZlQ2xhc3MoJ2lucHV0bGFiZWwnKTtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCdzcGFuLmxvZ2Vycm9yICwgLmV4aXN0aW5nX3JlZ2lzdGVyJykuaGlkZSgpO1xuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAkKCcudWktbG9naW4gLnNpZ24tdXAtYmxrID4gYScpLm9uKCdtb3VzZWVudGVyIGNsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA8IDk2MCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChlLnR5cGUgPT0gJ2NsaWNrJyAmJiAkKCcuYWNjb3VudGNvbnRlbnQnKS5pcygnOnZpc2libGUnKSkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoYXBwR2xvYmFsLmdsb2JhbFRpbWVyKTtcbiAgICAgICAgICAgICAgICAgICAgLy9hcHBHbG9iYWwuZ2xvYmFsVGltZXIgPT0gMDtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmFjY291bnRjb250ZW50JykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAkKCcuaGVhZGVybWFzaycpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmNvbmZpcm1hdGlvbmNvbnRhaW5lcicpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoJCgnLmhlYWRlci1jcmVhdGUnKS5pcygnOnZpc2libGUnKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICQoJy5hY2NvdW50Y29udGVudCcpLnJlbW92ZUNsYXNzKCdqcy1lbnRlcmVkJyk7XG4gICAgICAgICAgICAgICAgJCgnLmFjY291bnRjb250ZW50JykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICQoJy5zaWduLXVwLWJsaycpLmFkZENsYXNzKCdqcy1hY3RpdmUnKTtcbiAgICAgICAgICAgICAgICBpZiAoISQodGhpcykuY2xvc2VzdCgnLnVpLWxvZ2luJykuZmluZCgnLmhlYWRlci1zaWduLWluJykuaXMoJzp2aXNpYmxlJykpIHtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyRXZlbnRzLmFjY291bnRDb250UG9zKCQoJy51aS1sb2dpbiAuc2lnbi11cC1ibGsgPiBhJyksICQodGhpcykuY2xvc2VzdCgnLnVpLWxvZ2luJykuZmluZCgnLmhlYWRlci1zaWduLWluJykpO1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy51aS1sb2dpbicpLmZpbmQoJy5oZWFkZXItc2lnbi1pbicpLnNob3coKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJCgnLmhlYWRlcm1hc2snKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgLyppZihhcHBHbG9iYWwudXRpbC5yZWFkQ29va2llKFwiZW1haWxJZFwiKSl7XG4gICAgICAgICAgICAgICAgICAgICQoJy5oZWFkZXItc2lnbi1pbi5hY2NvdW50Y29udGVudCAuZ3Vlc3RlbWFpbCcpLnZhbChhcHBHbG9iYWwudXRpbC5yZWFkQ29va2llKFwiZW1haWxJZFwiKSk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5oZWFkZXItc2lnbi1pbi5hY2NvdW50Y29udGVudCAubG9naW5fcGFzc3dvcmQnKS5yZW1vdmVBdHRyKCdwbGFjZWhvbGRlcicpLnZhbCgnJyk7XG4gICAgICAgICAgICAgICAgfSovXG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGFwcEdsb2JhbC5nbG9iYWxUaW1lcik7XG4gICAgICAgICAgICAgICAgLy9hcHBHbG9iYWwuZ2xvYmFsVGltZXIgPT0gMDtcbiAgICAgICAgICAgICAgICBhcHBHbG9iYWwuZ2xvYmFsVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmFjY291bnRjb250ZW50JykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAkKCcuaGVhZGVybWFzaycpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmhlYWRlcmN1c3RvbWVyaW5mbycpLmZpbmQoJy5qcy1hY3RpdmUnKS5yZW1vdmVDbGFzcygnanMtYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgfSwgNTAwMCk7XG4gICAgICAgICAgICAgICAgJCgnLmNvbmZpcm1hdGlvbmNvbnRhaW5lcicpLmhpZGUoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9KTtcbiAgICAgICAgJCgnLnNpZ25pbmdpbicpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAkKCcuYWNjb3VudGNvbnRlbnQnKS5oaWRlKCk7XG4gICAgICAgICAgICB2YXIgdmFsaWRhdG9yID0gJCh0aGlzKS5jbG9zZXN0KCdmb3JtJykudmFsaWRhdGUoKTtcbiAgICAgICAgICAgIGlmICh2YWxpZGF0b3IuZWxlbWVudCgkKHRoaXMpLmNsb3Nlc3QoJ2Zvcm0nKS5maW5kKCcuZ3Vlc3RlbWFpbCcpKSkge1xuICAgICAgICAgICAgICAgICQoJy5hY2NvdW50Y29udGVudCAuZ3Vlc3RlbWFpbCcpLnZhbCgkKHRoaXMpLmNsb3Nlc3QoJy5hY2NvdW50Y29udGVudCcpLmZpbmQoJy5ndWVzdGVtYWlsJykudmFsKCkpO1xuICAgICAgICAgICAgICAgICQoJy5hY2NvdW50Y29udGVudCAuZ3Vlc3RlbWFpbCcpLnJlbW92ZUNsYXNzKCdlcnJvcicpO1xuICAgICAgICAgICAgICAgICQoJy5hY2NvdW50Y29udGVudCAuZ3Vlc3RlbWFpbCcpLm5leHQoJ3NwYW4uZXJyb3InKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAkKCcubG9naW5fcGFzc3dvcmQnKS5yZW1vdmVDbGFzcygnZXJyb3InKTtcbiAgICAgICAgICAgICAgICAkKCcubG9naW5fcGFzc3dvcmQnKS5uZXh0KCdzcGFuLmVycm9yJykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgJCgnLmFjY291bnRjb250ZW50IC5ndWVzdGVtYWlsJykuYWRkQ2xhc3MoJ2NsaWNrLW1hcmsgdmFsaWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLnVpLWxvZ2luJykuZmluZCgnLmhlYWRlci1zaWduLWluJykuc2hvdygpO1xuICAgICAgICAgICAgJCgnLmhlYWRlci1zaWduLWluIC5zaWduaW5fbWFpbiAubG9naW5mYWlsLmVycm9ybWVzc2FnZScpLmhpZGUoKTtcbiAgICAgICAgICAgICQoJy5oZWFkZXJtYXNrJykuYWRkQ2xhc3MoJ25vLWhpZGUnKS5zaG93KCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoJy5zaWduLW1lc3NhZ2UgYSwgLkV4aXN0ZWRVc2VyLWVycm9yIC5jcmVhdGVhY2NvdW50JykuY2xpY2soZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICQoJy5hY2NvdW50Y29udGVudCcpLmhpZGUoKTtcbiAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLnVpLWxvZ2luJykuZmluZCgnLmhlYWRlci1jcmVhdGUnKS5zaG93KCk7XG4gICAgICAgICAgICB2YXIgdmFsaWRhdG9yID0gJCh0aGlzKS5jbG9zZXN0KCdmb3JtJykudmFsaWRhdGUoKTtcbiAgICAgICAgICAgIGlmICh2YWxpZGF0b3IuZWxlbWVudCgkKHRoaXMpLmNsb3Nlc3QoJ2Zvcm0nKS5maW5kKCcuZ3Vlc3RlbWFpbCcpKSkge1xuICAgICAgICAgICAgICAgICQoJy5hY2NvdW50Y29udGVudCAuZ3Vlc3RlbWFpbCcpLnZhbCgkKHRoaXMpLmNsb3Nlc3QoJy5hY2NvdW50Y29udGVudCcpLmZpbmQoJy5ndWVzdGVtYWlsJykudmFsKCkpO1xuICAgICAgICAgICAgICAgICQoJy5hY2NvdW50Y29udGVudCAuZ3Vlc3RlbWFpbCcpLnJlbW92ZUNsYXNzKCdlcnJvcicpO1xuICAgICAgICAgICAgICAgICQoJy5hY2NvdW50Y29udGVudCAuZ3Vlc3RlbWFpbCcpLm5leHQoJ3NwYW4uZXJyb3InKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAkKCcuYWNjb3VudGNvbnRlbnQgLmd1ZXN0ZW1haWwnKS5hZGRDbGFzcygnY2xpY2stbWFyayB2YWxpZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaGVhZGVyRXZlbnRzLmFjY291bnRDb250UG9zKCQoJy51aS1sb2dpbiAuc2lnbi11cC1ibGsgPiBhJyksICQodGhpcykuY2xvc2VzdCgnLnVpLWxvZ2luJykuZmluZCgnLmhlYWRlci1jcmVhdGUnKSk7XG4gICAgICAgICAgICAkKCcuaGVhZGVybWFzaycpLnNob3coKTtcbiAgICAgICAgICAgICQoJy5FeGlzdGVkVXNlci1lcnJvcicpLmhpZGUoKTtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChhcHBHbG9iYWwuZ2xvYmFsVGltZXIpO1xuICAgICAgICAgICAgLy9hcHBHbG9iYWwuZ2xvYmFsVGltZXIgPT0gMDtcbiAgICAgICAgICAgIGFwcEdsb2JhbC5nbG9iYWxUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICQoJy5hY2NvdW50Y29udGVudCcpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAkKCcuaGVhZGVybWFzaycpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAkKCcuaGVhZGVyY3VzdG9tZXJpbmZvJykuZmluZCgnLmpzLWFjdGl2ZScpLnJlbW92ZUNsYXNzKCdqcy1hY3RpdmUnKTtcbiAgICAgICAgICAgIH0sIDUwMDApO1xuICAgICAgICB9KTtcblxuICAgICAgICAkKCcuZm9yZ290LXBhc3N3b3JkIGEnKS5jbGljayhmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgJCgnLmFjY291bnRjb250ZW50JykuaGlkZSgpO1xuICAgICAgICAgICAgJCgnLmhlYWRlci1mb3Jnb3QtcHdkIHNwYW4ucmVzZXRfZW1haWxfZXJyb3InKS5oaWRlKCk7XG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy51aS1sb2dpbicpLmZpbmQoJy5oZWFkZXItZm9yZ290LXB3ZCcpLnNob3coKTtcbiAgICAgICAgICAgIGhlYWRlckV2ZW50cy5hY2NvdW50Q29udFBvcygkKCcudWktbG9naW4gLnNpZ24tdXAtYmxrID4gYScpLCAkKHRoaXMpLmNsb3Nlc3QoJy51aS1sb2dpbicpLmZpbmQoJy5oZWFkZXItZm9yZ290LXB3ZCcpKTtcbiAgICAgICAgICAgICQoJy5oZWFkZXJtYXNrJykuc2hvdygpO1xuICAgICAgICAgICAgdmFyIHZhbGlkYXRvciA9ICQodGhpcykuY2xvc2VzdCgnZm9ybScpLnZhbGlkYXRlKHtcbiAgICAgICAgICAgICAgICBvbmtleXVwOiBmYWxzZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAodmFsaWRhdG9yLmVsZW1lbnQoJCh0aGlzKS5jbG9zZXN0KCdmb3JtJykuZmluZCgnLmd1ZXN0ZW1haWwnKSkpIHtcbiAgICAgICAgICAgICAgICAkKCcuYWNjb3VudGNvbnRlbnQgLmd1ZXN0ZW1haWwnKS52YWwoJCh0aGlzKS5jbG9zZXN0KCcuYWNjb3VudGNvbnRlbnQnKS5maW5kKCcuZ3Vlc3RlbWFpbCcpLnZhbCgpKTtcbiAgICAgICAgICAgICAgICAkKCcuYWNjb3VudGNvbnRlbnQgLmd1ZXN0ZW1haWwnKS5yZW1vdmVDbGFzcygnZXJyb3InKTtcbiAgICAgICAgICAgICAgICAkKCcuYWNjb3VudGNvbnRlbnQgLmd1ZXN0ZW1haWwnKS5uZXh0KCdzcGFuLmVycm9yJykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgJCgnLmFjY291bnRjb250ZW50IC5ndWVzdGVtYWlsJykuYWRkQ2xhc3MoJ2NsaWNrLW1hcmsgdmFsaWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNsZWFyVGltZW91dChhcHBHbG9iYWwuZ2xvYmFsVGltZXIpO1xuICAgICAgICAgICAgLy9hcHBHbG9iYWwuZ2xvYmFsVGltZXIgPT0gMDtcbiAgICAgICAgICAgIGFwcEdsb2JhbC5nbG9iYWxUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICQoJy5hY2NvdW50Y29udGVudCcpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAkKCcuaGVhZGVybWFzaycpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAkKCcuaGVhZGVyY3VzdG9tZXJpbmZvJykuZmluZCgnLmpzLWFjdGl2ZScpLnJlbW92ZUNsYXNzKCdqcy1hY3RpdmUnKTtcbiAgICAgICAgICAgIH0sIDUwMDApO1xuICAgICAgICB9KTtcblxuICAgICAgICAkKCcuYWNjb3VudGNvbnRlbnQnKS5tb3VzZWVudGVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQoJy5oZWFkZXJtYXNrJykucmVtb3ZlQ2xhc3MoJ25vLWhpZGUnKTtcbiAgICAgICAgICAgICQoJy5oZWFkZXJtYXNrJykuc2hvdygpO1xuICAgICAgICAgICAgJCgnLmNvbmZpcm1hdGlvbmNvbnRhaW5lcicpLmhpZGUoKTtcbiAgICAgICAgICAgICQoJy5zaWduLXVwLWJsaycpLmFkZENsYXNzKCdqcy1hY3RpdmUnKTtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChhcHBHbG9iYWwuZ2xvYmFsVGltZXIpO1xuICAgICAgICAgICAgLy9hcHBHbG9iYWwuZ2xvYmFsVGltZXIgPT0gMDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJCgnLmhlYWRlcm1hc2snKS5jbGljayhmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaGVhZGVyRXZlbnRzLm1hc2tFdmVudChlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJCgnLmhlYWRlcm1hc2snKS5tb3VzZWVudGVyKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBoZWFkZXJFdmVudHMubWFza0V2ZW50KGUpO1xuICAgICAgICB9KTtcbiAgICAgICAgJCgnLmFjY291bnRjb250ZW50JykubW91c2VlbnRlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKCcuaGVhZGVybWFzaycpLnJlbW92ZUNsYXNzKCduby1oaWRlJyk7XG4gICAgICAgICAgICAkKCcuaGVhZGVybWFzaycpLnNob3coKTtcbiAgICAgICAgICAgICQoJy5jb25maXJtYXRpb25jb250YWluZXInKS5oaWRlKCk7XG4gICAgICAgICAgICAkKCcuc2lnbi11cC1ibGsnKS5hZGRDbGFzcygnanMtYWN0aXZlJyk7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQoYXBwR2xvYmFsLmdsb2JhbFRpbWVyKTtcbiAgICAgICAgICAgIC8vYXBwR2xvYmFsLmdsb2JhbFRpbWVyID09IDA7XG4gICAgICAgIH0pO1xuICAgICAgICAkKCcudXNlci1hY2NvdW50Jykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICQodGhpcykucGFyZW50KCcudXNlci1pbmZvJykudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB9KTtcbiAgICAgICAgJCgnLmNoYW5nZS1yZWdpb25uZXcnKS5tb3VzZWVudGVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQoJy5kb21haW5zd2l0Y2gtaGVhZGVyJykuc2hvdygpO1xuICAgICAgICAgICAgJCgnLmhlYWRlcm1hc2snKS5zaG93KCk7XG4gICAgICAgIH0pO1xuICAgICAgICAkKCcuY2hhbmdlLXJlZ2lvbicpLm1vdXNlZW50ZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgalF1ZXJ5KCcuZG9tYWluc3dpdGNoJykuc2hvdygpO1xuICAgICAgICAgICAgJCgnLnJlZ2lvbl9vdmVybGF5Jykuc2hvdygpO1xuICAgICAgICB9KTtcbiAgICAgICAgJCgnLnJlZ2lvbl9vdmVybGF5JykubW91c2VlbnRlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBqUXVlcnkoJy5kb21haW5zd2l0Y2gnKS5oaWRlKCk7XG4gICAgICAgICAgICAkKHRoaXMpLmhpZGUoKTtcbiAgICAgICAgfSk7XG4gICAgICAgICQoJ2J1dHRvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICgkKCcucmVzZXRwYXNzd29yZCcpLmlzKCc6VmlzaWJsZScpKSB7XG4gICAgICAgICAgICAgICAgJCgnLnJlc2V0cGFzc3dvcmQnKS5jbG9zZXN0KCdkaXYuZGlhbG9nLWNvbnRlbnQnKS5hZGRDbGFzcygnY29uZmlybWF0aW9uY29udGFpbmVyJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAkKCcuc2FtcGxlLXNlY3Rpb24nKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoISQodGhpcykuZmluZCgnLnNhbXBsZV9tYWlsX21haW4nKS5pcygnOnZpc2libGUnKSkge1xuICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLnNhbXBsZV9tYWlsX21haW4nKS5zbGlkZURvd24oNTAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgICQoJy5zaWdudXBmb3ItZW1haWwgLnNlZXNhbXBsZXMnKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5zaWdudXBmb3ItZW1haWwnKS5maW5kKCcuc2FtcGxlX21haWxfbWFpbicpLnNsaWRlVG9nZ2xlKDUwMCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoJ2JvZHknKS5jbGljayhmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGlmICghJChldmVudC50YXJnZXQpLmlzKCcuc2lnbnVwZm9yLWVtYWlsIC5zZWVzYW1wbGVzJykgJiYgKCEkKGV2ZW50LnRhcmdldCkuaXMoJy5jcmVhdGVfZW1haWxfY2hlY2tib3ggLnNlZXNhbXBsZXMnKSkpIHtcbiAgICAgICAgICAgICAgICAkKCcuc2FtcGxlX21haWxfbWFpbicpLnNsaWRlVXAoNTAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIC8qKlRoaXMgaXMgdXNlZCB0byBnZXQgdGhlIHRpY2sgbWFyayBmb3IgY3JlYXRlIGFjY291bnQgd2hlbiB0aGUgZmllbGQgaXMgdmFsaWQqL1xuICAgICAgICAkKCcudWktbG9naW4gaW5wdXQucmVxdWlyZWQnKS5ibHVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCd2YWxpZCcpKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnY2xpY2stbWFyaycpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdjbGljay1tYXJrJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoJy5iYWNrLWxpbmssIC5zaWduaW5naW4nKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKCcuYWNjb3VudGNvbnRlbnQnKS5oaWRlKCk7XG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy51aS1sb2dpbicpLmZpbmQoJy5oZWFkZXItc2lnbi1pbicpLnNob3coKTtcbiAgICAgICAgICAgICQoJy5oZWFkZXItc2lnbi1pbiAuc2lnbmluX21haW4gLmxvZ2luZmFpbC5lcnJvcm1lc3NhZ2UnKS5oaWRlKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoJy5mb3Jnb3RfY3JlYXRlJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCgnLmhlYWRlci1mb3Jnb3QtcHdkJykuaGlkZSgpO1xuICAgICAgICAgICAgJCgnLmhlYWRlci1jcmVhdGUnKS5zaG93KCk7XG4gICAgICAgICAgICAkKCcuaGVhZGVyLWNyZWF0ZSAuZXJyb3JtZXNzYWdlJykuaGlkZSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICAkKCcubG9nZ2VkdXNlciBhLCAuaGVhZGVyY3VzdG9tZXJpbmZvIC5zZWNvbmRfbmFtZScpLm9uKCdtb3VzZWVudGVyJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGlmICgkKCcucmFwYWxhX2RldmljZScpLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgJCgnLmFjY291bnRjb250ZW50JykuaGlkZSgpO1xuICAgICAgICAgICAgICAgIGhlYWRlckV2ZW50cy5hY2NvdW50Q29udFBvcygkKCcuaGVhZGVyY3VzdG9tZXJpbmZvIC5sb2dnZWR1c2VyIGEnKSwgJCgnLnVzZXItaW5mbycpKTtcbiAgICAgICAgICAgICAgICAkKCcudXNlci1pbmZvJykuc2hvdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAkKCcucmFwYWxhX2RldmljZSAubG9nZ2VkdXNlciBhLC5oZWFkZXJjdXN0b21lcmluZm8gLnNlY29uZF9uYW1lJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICQoJy5hY2NvdW50Y29udGVudCcpLmhpZGUoKTtcbiAgICAgICAgICAgIGhlYWRlckV2ZW50cy5hY2NvdW50Q29udFBvcygkKCcuaGVhZGVyY3VzdG9tZXJpbmZvIC5sb2dnZWR1c2VyIGEnKSwgJCgnLnVzZXItaW5mbycpKTtcbiAgICAgICAgICAgICQoJy51c2VyLWluZm8nKS5zaG93KCk7XG4gICAgICAgICAgICAkKCcuaGVhZGVybWFzaycpLnNob3coKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGpRdWVyeSh3aW5kb3cpLmJpbmQoJ21lc3NhZ2UnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHN0cjtcbiAgICAgICAgICAgIGUgPSBlLm9yaWdpbmFsRXZlbnQ7XG4gICAgICAgICAgICBpZiAoZS5vcmlnaW4uaW5kZXhPZihkb2N1bWVudC5sb2NhdGlvbi5ob3N0KSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgb2JqID0gZS5kYXRhO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBzdHIgPSBKU09OLnBhcnNlKG9iaik7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3RyLnByb2Nlc3MgIT09ICdzaWduLWluJykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHN0ci5zdGF0dXMgPT09ICdzdWNjZXNzJykge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc3RyLmVtYWlsID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXJFdmVudHMudXNlckNvb2tpZShzdHIuZW1haWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkb2N1bWVudC5sb2NhdGlvbi5yZWxvYWQodHJ1ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQoJy5FeGlzdGVkVXNlci1lcnJvcicpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAkKCcuY3VzdG9tX3NpZ25pbicpLmZpbmQoJy5sb2FkaW5nJykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3MuaGlkZSgpO1xuICAgICAgICAgICAgICAgICQoJy5jdXN0b21fc2lnbmluIGlucHV0W3R5cGU9XCJ0ZXh0XCJdLCAuY3VzdG9tX3NpZ25pbiBpbnB1dFt0eXBlPVwicGFzc3dvcmRcIl0nKS5hZGRDbGFzcygnZXJyb3JjbGllbnQnKTtcbiAgICAgICAgICAgICAgICAkKCcubG9naW5mYWlsJykuc2hvdygpO1xuICAgICAgICAgICAgICAgICQoJy5hY2NvdW50Y29udGVudCAubG9hZGluZycpLnJlbW92ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgalF1ZXJ5KCcuc2lnbmluLWJ1dHRvbicpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB2YXIgcmVhbEZvcm0gPSAkKHRoaXMpLmNsb3Nlc3QoJ2Zvcm0nKTtcbiAgICAgICAgICAgIGlmICghcmVhbEZvcm0udmFsaWQoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICQoJy5sb2dpbmZhaWwnKS5oaWRlKCk7XG4gICAgICAgICAgICBwcm9ncmVzcy5zaG93KCcuaGVhZGVyLXNpZ24taW4uYWNjb3VudGNvbnRlbnQnKTtcbiAgICAgICAgICAgIHZhciBpZnJhbWVJZCA9ICdqcy1oZWFkZXItc2lnbmluLWlmcmFtZSc7XG4gICAgICAgICAgICB2YXIgZm9ybUlkID0gJ2pzLWhlYWRlci1zaWduaW4tZm9ybSc7XG4gICAgICAgICAgICAkKCcjJyArIGlmcmFtZUlkKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICQoJyMnICsgZm9ybUlkKS5yZW1vdmUoKTtcbiAgICAgICAgICAgIHZhciAkZm9ybSA9ICQoJzxmb3JtPjwvZm9ybT4nKTtcbiAgICAgICAgICAgICRmb3JtLmF0dHIoJ2lkJywgZm9ybUlkKTtcbiAgICAgICAgICAgICRmb3JtLmF0dHIoJ2FjdGlvbicsIHJlYWxGb3JtLmF0dHIoJ2FjdGlvbicpKTtcbiAgICAgICAgICAgICRmb3JtLmF0dHIoJ3RhcmdldCcsIGlmcmFtZUlkKTtcbiAgICAgICAgICAgICRmb3JtLmF0dHIoJ21ldGhvZCcsICdQT1NUJyk7XG5cbiAgICAgICAgICAgICQoJzxpZnJhbWUgbmFtZT1cIicgKyBpZnJhbWVJZCArICdcIiBpZD1cIicgKyBpZnJhbWVJZCArICdcIiAvPicpLmFwcGVuZFRvKCdib2R5Jyk7XG4gICAgICAgICAgICAkKCcjJyArIGlmcmFtZUlkKS5hdHRyKCdzdHlsZScsICdkaXNwbGF5OiBub25lOycpO1xuXG4gICAgICAgICAgICByZWFsRm9ybS5maW5kKCdpbnB1dCwgc2VsZWN0LCB0ZXh0YXJlYScpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciAkaW5wdXQgPSAkKHRoaXMpLmNsb25lKCk7XG4gICAgICAgICAgICAgICAgJGZvcm0uYXBwZW5kKCRpbnB1dCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgJCgnYm9keScpLmFwcGVuZCgkZm9ybSk7XG4gICAgICAgICAgICAkZm9ybS5oaWRlKCk7XG4gICAgICAgICAgICAkZm9ybS5zdWJtaXQoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8qJChcIi5QYXNzd29yZFJlc2V0Rm9ybVwiKS5vbihcImtleXVwXCIsXCIuZ3Vlc3RlbWFpbFwiLGZ1bmN0aW9uKGUpe1xuICAgICAgICAgICAgICAgIGlmKGUua2V5Q29kZSA9PSAxMykge1xuICAgICAgICAgICAgICAgICAgICAkKCcubG9zdF9idG4gLnNlbmQnKS50cmlnZ2VyKFwiY2xpY2tcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7Ki9cbiAgICAgICAgJCgnLlBhc3N3b3JkUmVzZXRGb3JtJykudW5iaW5kKCdzdWJtaXQnKS5vbignc3VibWl0JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICQoJy5oZWFkZXItZm9yZ290LXB3ZCBzcGFuLnJlc2V0X2VtYWlsX2Vycm9yJykuaGlkZSgpO1xuICAgICAgICAgICAgJCgnLmxvc3RfYnRuIC5zZW5kJykuYWRkQ2xhc3MoJ2NsaWNrZWRCdXR0b24nKTtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHZhciAkZm9ybSA9ICQodGhpcyk7XG4gICAgICAgICAgICBpZiAoISRmb3JtLnZhbGlkKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwcm9ncmVzcy5zaG93KCcuaGVhZGVyLWZvcmdvdC1wd2QuYWNjb3VudGNvbnRlbnQnKTtcbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdodG1sJyxcbiAgICAgICAgICAgICAgICB1cmw6ICRmb3JtLmF0dHIoJ2FjdGlvbicpLFxuICAgICAgICAgICAgICAgIGRhdGE6ICRmb3JtLnNlcmlhbGl6ZSgpLFxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkKGRhdGEpLmZpbmQoJ2RpdiNtZXNzYWdlcy5lcnJvcicpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5oZWFkZXItZm9yZ290LXB3ZCcpLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5oZWFkZXItZm9yZ290LXB3ZCBzcGFuLnJlc2V0X2VtYWlsX2Vycm9yJykuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmFjY291bnRjb250ZW50IC5sb2FkaW5nJykucmVtb3ZlKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5oZWFkZXItZm9yZ290LXB3ZCcpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5jb25maXJtYXRpb25jb250YWluZXInKS5mYWRlSW4oNDAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vdG8gZGlzcGxheSB0aGUgbWVzc2VhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlckV2ZW50cy5pbml0aWFsaXplRXZlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlckV2ZW50cy5hY2NvdW50Q29udFBvcygkKCcudWktbG9naW4gLnNpZ24tdXAtYmxrID4gYScpLCAkKCcuY29uZmlybWF0aW9uY29udGFpbmVyJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmFjY291bnRjb250ZW50IC5sb2FkaW5nJykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuY29uZmlybWF0aW9uY29udGFpbmVyJykuZmluZCgnLmhlYWRlcm1hc2snKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuY29uZmlybWF0aW9uY29udGFpbmVyJykuZGVsYXkoNDAwMCkuZmFkZU91dCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgICAgICBqUXVlcnkod2luZG93KS5iaW5kKCdtZXNzYWdlJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBzdHI7XG4gICAgICAgICAgICBlID0gZS5vcmlnaW5hbEV2ZW50O1xuICAgICAgICAgICAgaWYgKGUub3JpZ2luLmluZGV4T2YoZG9jdW1lbnQubG9jYXRpb24uaG9zdCkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG9iaiA9IGUuZGF0YTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgc3RyID0gSlNPTi5wYXJzZShvYmopO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0ci5wcm9jZXNzICE9PSAnY3JlYXRlLWFjY291bnQnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoc3RyLnN0YXR1cyA9PT0gJ3N1Y2Nlc3MnKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzdHIuZW1haWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlckV2ZW50cy51c2VyQ29va2llKHN0ci5lbWFpbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnaHRtbCcsXG4gICAgICAgICAgICAgICAgICAgIHVybDogZG9jdW1lbnQubG9jYXRpb24udG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5oZWFkZXJtYXNrJykucmVtb3ZlQ2xhc3MoJ25vLWhpZGUnKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuaGVhZGVyLXNpZ24taW4uYWNjb3VudGNvbnRlbnQnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5oZWFkZXJjdXN0b21lcmluZm8gI3VzZXInKS5odG1sKCQoZGF0YSkuZmluZCgnI3VzZXInKS5odG1sKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3VzZXJpbmZvJykuaHRtbCgkKGRhdGEpLmZpbmQoJyN1c2VyaW5mbycpLmh0bWwoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJFdmVudHMuYWNjb3VudENvbnRQb3MoJCgnLmhlYWRlcmN1c3RvbWVyaW5mbyAubG9nZ2VkdXNlciBhJyksICQoJy5jb25ncmF0cy1tZXNzYWdlLmFjY291bnRjb250ZW50JykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmNvbmdyYXRzLW1lc3NhZ2UnKS5mYWRlSW4oNDAwKS5zaG93KCkuZGVsYXkoMzAwMCkuZmFkZU91dCg0MDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyRXZlbnRzLmluaXRpYWxpemVFdmVudCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQoJy5hY2NvdW50Y29udGVudCcpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICBwcm9ncmVzcy5oaWRlKCk7XG4gICAgICAgICAgICAgICAgJCgnLkV4aXN0ZWRVc2VyLWVycm9yJykuc2hvdygpO1xuICAgICAgICAgICAgICAgICQoJy5lcnJvcm1lc3NhZ2UnKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgJCgnLnVpLWxvZ2luJykuZmluZCgnLmhlYWRlci1zaWduLWluJykuc2hvdygpO1xuICAgICAgICAgICAgICAgIC8vJCgnLnVpLWxvZ2luJykuZmluZCgnLmhlYWRlci1zaWduLWluIC5hY2NvdW50ZW1haWwnKS52YWwoZW1haWxJZCk7XG4gICAgICAgICAgICAgICAgJCgnLmFjY291bnRjb250ZW50IC5ndWVzdGVtYWlsJykucmVtb3ZlQ2xhc3MoJ2Vycm9yY2xpZW50Jyk7XG4gICAgICAgICAgICAgICAgJCgnLmFjY291bnRjb250ZW50IC5ndWVzdGVtYWlsJykubmV4dCgnc3Bhbi5lcnJvcmNsaWVudCcpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICQoJy51aS1sb2dpbicpLmZpbmQoJy5oZWFkZXItc2lnbi1pbiAuYWNjb3VudGVtYWlsJykuYWRkQ2xhc3MoJ2NsaWNrLW1hcmsgdmFsaWQnKTtcbiAgICAgICAgICAgICAgICAkKCcuaGVhZGVybWFzaycpLmFkZENsYXNzKCduby1oaWRlJykuc2hvdygpO1xuICAgICAgICAgICAgICAgICQoJy5jdXN0b21fc2lnbnVwIGlucHV0W3R5cGU9XCJ0ZXh0XCJdLCAuY3VzdG9tX3NpZ251cCBpbnB1dFt0eXBlPVwicGFzc3dvcmRcIl0nKS5yZW1vdmVDbGFzcygnZXJyb3JjbGllbnQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgalF1ZXJ5KCcuY3JlYXRlLWFjY291bnQnKS51bmJpbmQoJ2NsaWNrJykuY2xpY2soZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHZhciByZWFsRm9ybSA9ICQodGhpcykuY2xvc2VzdCgnZm9ybScpO1xuICAgICAgICAgICAgaWYgKCFyZWFsRm9ybS52YWxpZCgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcHJvZ3Jlc3Muc2hvdygnLmhlYWRlci1jcmVhdGUuYWNjb3VudGNvbnRlbnQnKTtcbiAgICAgICAgICAgIHZhciBpZnJhbWVJZCA9ICdqcy1oZWFkZXItY3JlYXRlLWFjY291bnQtaWZyYW1lJztcbiAgICAgICAgICAgIHZhciBmb3JtSWQgPSAnanMtaGVhZGVyLWNyZWF0ZS1hY2NvdW50LWZvcm0nO1xuICAgICAgICAgICAgJCgnIycgKyBpZnJhbWVJZCkucmVtb3ZlKCk7XG4gICAgICAgICAgICAkKCcjJyArIGZvcm1JZCkucmVtb3ZlKCk7XG4gICAgICAgICAgICB2YXIgJGZvcm0gPSAkKCc8Zm9ybT48L2Zvcm0+Jyk7XG4gICAgICAgICAgICAkZm9ybS5hdHRyKCdpZCcsIGZvcm1JZCk7XG4gICAgICAgICAgICAkZm9ybS5hdHRyKCdhY3Rpb24nLCByZWFsRm9ybS5hdHRyKCdhY3Rpb24nKSk7XG4gICAgICAgICAgICAkZm9ybS5hdHRyKCd0YXJnZXQnLCBpZnJhbWVJZCk7XG4gICAgICAgICAgICAkZm9ybS5hdHRyKCdtZXRob2QnLCAnUE9TVCcpO1xuXG4gICAgICAgICAgICAkKCc8aWZyYW1lIG5hbWU9XCInICsgaWZyYW1lSWQgKyAnXCIgaWQ9XCInICsgaWZyYW1lSWQgKyAnXCIgLz4nKS5hcHBlbmRUbygnYm9keScpO1xuICAgICAgICAgICAgJCgnIycgKyBpZnJhbWVJZCkuYXR0cignc3R5bGUnLCAnZGlzcGxheTogbm9uZTsnKTtcblxuICAgICAgICAgICAgcmVhbEZvcm0uZmluZCgnaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEnKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgJGlucHV0ID0gJCh0aGlzKS5jbG9uZSgpO1xuICAgICAgICAgICAgICAgICRmb3JtLmFwcGVuZCgkaW5wdXQpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICQoJ2JvZHknKS5hcHBlbmQoJGZvcm0pO1xuICAgICAgICAgICAgJGZvcm0uaGlkZSgpO1xuICAgICAgICAgICAgJGZvcm0uc3VibWl0KCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICgkKCcjdXNlcicpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGZpcnN0bmFtZXNwbGl0KCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBmaXJzdG5hbWVzcGxpdCgpIHtcbiAgICAgICAgICAgIHZhciBmaXJzdG5hbWUgPSAkKCcubG9nZ2VkdXNlciA+IGEgc3Bhbi51c2VybmFtZScpLnRleHQoKTtcbiAgICAgICAgICAgIHZhciBmaXJzdG5hbWVXb3JkcyA9IGZpcnN0bmFtZS5zcGxpdCgnICcpO1xuICAgICAgICAgICAgdmFyIHRleHRsZW5ndGggPSAwO1xuICAgICAgICAgICAgdmFyIGxpbWl0ID0gMTk7XG4gICAgICAgICAgICB2YXIgbmFtZUxlbmd0aCA9ICQoJy5sb2dnZWR1c2VyID4gYSBzcGFuLnVzZXJuYW1lJykudGV4dCgpICsgJyAnICsgJC50cmltKCQoJy5sb2dnZWR1c2VyID4gYSAucHJvc3RhZmYtaGVhZGVyLmJhZGdlLWhlYWRlcicpLnRleHQoKSk7XG4gICAgICAgICAgICBpZiAobmFtZUxlbmd0aC5sZW5ndGggPD0gMTkpIHtcbiAgICAgICAgICAgICAgICAkKCcubG9nZ2VkdXNlciA+IGEgc3Bhbi51c2VybmFtZScpLnRleHQoJCgnLmxvZ2dlZHVzZXIgPiBhIHNwYW4udXNlcm5hbWUnKS50ZXh0KCkgKyAnICcgKyAkLnRyaW0oJCgnLmxvZ2dlZHVzZXIgPiBhIC5wcm9zdGFmZi1oZWFkZXIuYmFkZ2UtaGVhZGVyJykudGV4dCgpKSk7XG4gICAgICAgICAgICAgICAgJCgnLmxvZ2dlZHVzZXIgPiBhIC5wcm9zdGFmZi1oZWFkZXIuYmFkZ2UtaGVhZGVyJykucmVtb3ZlKCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGZpcnN0bmFtZVdvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAkKCcubG9nZ2VkdXNlciA+IGEgc3Bhbi51c2VybmFtZScpLnRleHQoJycpO1xuICAgICAgICAgICAgICAgIGlmICgkKCcubG9nZ2VkdXNlciA+IGEgc3Bhbi51c2VybmFtZSAuZmlyc3RfbmFtZScpLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJy5sb2dnZWR1c2VyID4gYSBzcGFuLnVzZXJuYW1lJykuaHRtbCgnPHNwYW4gY2xhc3M9XCJmaXJzdF9uYW1lXCI+PC9zcGFuPicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoJCgnLmhlYWRlcmN1c3RvbWVyaW5mbyAuc2Vjb25kX25hbWUnKS5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAkKCcuaGVhZGVyY3VzdG9tZXJpbmZvJykuYXBwZW5kKCc8c3BhbiBjbGFzcz1cInNlY29uZF9uYW1lXCI+PC9zcGFuPicpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBmTmFtZSA9ICQoJy5sb2dnZWR1c2VyID4gYSBzcGFuLnVzZXJuYW1lIHNwYW4uZmlyc3RfbmFtZScpLmVxKDApO1xuICAgICAgICAgICAgICAgIHZhciBMbmFtZSA9ICQoJy5oZWFkZXJjdXN0b21lcmluZm8gPiAuc2Vjb25kX25hbWUnKTtcblxuICAgICAgICAgICAgICAgIGpRdWVyeS5lYWNoKGZpcnN0bmFtZVdvcmRzLCBmdW5jdGlvbiAoaSwgdikge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0bGVuZ3RoID0gdGV4dGxlbmd0aCA9PSAwID8gdGV4dGxlbmd0aCArIHYubGVuZ3RoIDogdGV4dGxlbmd0aCArIHYubGVuZ3RoICsgMTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT0gMCAmJiB2Lmxlbmd0aCA+IGxpbWl0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmTmFtZS50ZXh0KHYuc3Vic3RyKDAsIDE2KSArICcuLi4nKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0ZXh0bGVuZ3RoIDwgMjApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmTmFtZS50ZXh0KCkubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmTmFtZS50ZXh0KHYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmTmFtZS50ZXh0KGZOYW1lLnRleHQoKSArICcgJyArIHYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKExuYW1lLnRleHQoKS5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIExuYW1lLnRleHQodik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIExuYW1lLnRleHQoTG5hbWUudGV4dCgpICsgJyAnICsgdik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIExuYW1lLnRleHQoTG5hbWUudGV4dCgpICsgJyAnICsgJC50cmltKCQoJy5sb2dnZWR1c2VyID4gYSAuYmFkZ2UtbWluaScpLnRleHQoKSkpO1xuICAgICAgICAgICAgICAgIGlmICgkKCcjdXNlciAubG9nZ2VkdXNlcicpLndpZHRoKCkgPiBMbmFtZS53aWR0aCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJy5sb2dnZWR1c2VyJykuYXBwZW5kKExuYW1lLmNsb25lKCkpO1xuICAgICAgICAgICAgICAgICAgICBMbmFtZS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJCgnLmxvZ2dlZHVzZXIgPiBhIC5wcm9zdGFmZi1oZWFkZXIuYmFkZ2UtaGVhZGVyJykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgJCgnLmxvZ2dlZHVzZXIgPiBhIC5iYWRnZS1taW5pJykucmVtb3ZlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQoJy5sb2dnZWR1c2VyID4gYSBzcGFuLnVzZXJuYW1lIHNwYW4nKS5oaWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAkKCcuYWNjb3VudGNvbnRlbnQgaW5wdXRbdHlwZT1cInRleHRcIl0sIC5hY2NvdW50Y29udGVudCBpbnB1dFt0eXBlPVwicGFzc3dvcmRcIl0nKS5iaW5kKCdrZXl1cCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIga2V5Y29kZSA9IGUua2V5Q29kZSA/IGUua2V5Q29kZSA6IGUud2hpY2g7XG4gICAgICAgICAgICBpZiAoISQodGhpcykuY2xvc2VzdCgnLmFjY291bnRjb250ZW50JykuaGFzQ2xhc3MoJ2pzLWVudGVyZWQnKSkge1xuICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmFjY291bnRjb250ZW50JykuYWRkQ2xhc3MoJ2pzLWVudGVyZWQnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGtleWNvZGUgPT0gMTMpIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJ2Zvcm0nKS5maW5kKCcuZm9ybWFjdGlvbnMgYnV0dG9uJykudHJpZ2dlcignY2xpY2snKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNsZWFyVGltZW91dChhcHBHbG9iYWwuZ2xvYmFsVGltZXIpO1xuICAgICAgICAgICAgLy9hcHBHbG9iYWwuZ2xvYmFsVGltZXIgPT0gMDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJCgnLnJhcGFsYV9kZXZpY2UgLnVzZXItcHJvZmlsZSBhJykub24oJ2hvdmVyJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAkKHRoaXMpLmF0dHIoJ2hyZWYnKTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICAvKiogT04gSE9WRVIgKi9cbiAgICBhY2NvdW50Q29udFBvczogZnVuY3Rpb24gKCRzb3VyY2UsICRkZXN0aW55KSB7XG4gICAgICAgIHZhciBsZWZ0UG9zID0gJHNvdXJjZS5vZmZzZXQoKS5sZWZ0ICsgJHNvdXJjZS53aWR0aCgpIC0gJCgnLmhlYWRlcmN1c3RvbWVyaW5mbycpLm9mZnNldCgpLmxlZnQgLSAkZGVzdGlueS53aWR0aCgpIC8gMjtcbiAgICAgICAgdmFyIGFycm93UG9zID0gKCRkZXN0aW55LndpZHRoKCkgLSAkZGVzdGlueS5maW5kKCcudG9wX2Fycm93Jykud2lkdGgoKSkgLyAyIC0gNDtcbiAgICAgICAgJCgnLmFjY291bnRjb250ZW50IC5sb2FkaW5nJykucmVtb3ZlKCk7XG4gICAgICAgIGlmICgkZGVzdGlueS5sZW5ndGggIT0gMCkge1xuICAgICAgICAgICAgJGRlc3RpbnkuY3NzKCdsZWZ0JywgbGVmdFBvcyk7XG4gICAgICAgICAgICAkZGVzdGlueS5maW5kKCcudG9wX2Fycm93JykuY3NzKCdsZWZ0JywgYXJyb3dQb3MpO1xuICAgICAgICB9XG4gICAgICAgICQoJy5hY2NvdW50Y29udGVudCAuZm9ybWZpZWxkIC5sYWJlbCAuZXJyb3JsYWJlbCcpLmFkZENsYXNzKCdsYWJlbHRleHQnKS5yZW1vdmVDbGFzcygnZXJyb3JsYWJlbCcpO1xuICAgIH0sXG4gICAgdXNlckNvb2tpZTogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZGF0ZU9iaiA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGRhdGVPYmouc2V0VGltZShkYXRlT2JqLmdldFRpbWUoKSArICgzNjUgKiAyNCAqIDYwICogNjAgKiAxMDAwKSk7XG4gICAgICAgIC8vZG9jdW1lbnQuY29va2llPVwiZW1haWxJZD1cIiskdmFsK1wiOyBleHBpcmVzPVwiK2RhdGVPYmoudG9VVENTdHJpbmcoKStcIjsgcGF0aD0vXCI7XG4gICAgfSxcbiAgICBtYXNrRXZlbnQ6IGZ1bmN0aW9uIChlbGUpIHtcbiAgICAgICAgJCgnLmRvbWFpbnN3aXRjaC1oZWFkZXInKS5oaWRlKCk7XG4gICAgICAgICQoJy5kb21haW5zd2l0Y2gnKS5oaWRlKCk7XG4gICAgICAgIGlmICghJCgnLmhlYWRlcm1hc2snKS5oYXNDbGFzcygnbm8taGlkZScpKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQoYXBwR2xvYmFsLmdsb2JhbFRpbWVyKTtcbiAgICAgICAgICAgIC8vYXBwR2xvYmFsLmdsb2JhbFRpbWVyID09IDA7XG4gICAgICAgICAgICBpZiAoZWxlLnR5cGUgIT0gJ2NsaWNrJyAmJiAkKCcucmFwYWxhX2RldmljZScpLmxlbmd0aCA9PSAwICYmIGVsZS5wYWdlWSA+IDYwICYmIGVsZS5wYWdlWSA8IDEwMCkge1xuICAgICAgICAgICAgICAgICQoJy5oZWFkZXJtYXNrJykuaGlkZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVsZS50eXBlID09ICdjbGljaycpIHtcbiAgICAgICAgICAgICAgICAkKCcuaGVhZGVybWFzaycpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAkKCcuYWNjb3VudGNvbnRlbnQnKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgJCgnLmhlYWRlcmN1c3RvbWVyaW5mbycpLmZpbmQoJy5qcy1hY3RpdmUnKS5yZW1vdmVDbGFzcygnanMtYWN0aXZlJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChhcHBHbG9iYWwuZ2xvYmFsVGltZXIpO1xuICAgICAgICAgICAgICAgIC8vYXBwR2xvYmFsLmdsb2JhbFRpbWVyID09IDA7XG4gICAgICAgICAgICAgICAgaWYgKCQoJy5hY2NvdW50Y29udGVudDp2aXNpYmxlJykuaGFzQ2xhc3MoJ2pzLWVudGVyZWQnKSkge1xuICAgICAgICAgICAgICAgICAgICBhcHBHbG9iYWwuZ2xvYmFsVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5hY2NvdW50Y29udGVudCcpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5oZWFkZXJtYXNrJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICB9LCA1MDAwKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkKCcuYWNjb3VudGNvbnRlbnQnKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5oZWFkZXJtYXNrJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn07XG52YXIgaGVhZGVyaW5pdCA9IHtcbiAgICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGhlYWRlckV2ZW50cy5pbml0aWFsaXplRXZlbnQoKTtcbiAgICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGhlYWRlcmluaXQ7XG4iLCIndXNlIHN0cmljdCc7XG4vLyBqUXVlcnkgZXh0ZW5zaW9uc1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAvLyBwYXJhbXNcbiAgICAvLyB0b2dnbGVDbGFzcyAtIHJlcXVpcmVkXG4gICAgLy8gdHJpZ2dlclNlbGVjdG9yIC0gb3B0aW9uYWwuIHRoZSBzZWxlY3RvciBmb3IgdGhlIGVsZW1lbnQgdGhhdCB0cmlnZ2VycyB0aGUgZXZlbnQgaGFuZGxlci4gZGVmYXVsdHMgdG8gdGhlIGNoaWxkIGVsZW1lbnRzIG9mIHRoZSBsaXN0LlxuICAgIC8vIGV2ZW50TmFtZSAtIG9wdGlvbmFsLiBkZWZhdWx0cyB0byAnY2xpY2snXG4gICAgJC5mbi50b2dnbGVkTGlzdCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIGlmICghb3B0aW9ucy50b2dnbGVDbGFzcykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGxpc3QgPSB0aGlzO1xuICAgICAgICByZXR1cm4gbGlzdC5vbihvcHRpb25zLmV2ZW50TmFtZSB8fCAnY2xpY2snLCBvcHRpb25zLnRyaWdnZXJTZWxlY3RvciB8fCBsaXN0LmNoaWxkcmVuKCksIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB2YXIgY2xhc3NUYXJnZXQgPSBvcHRpb25zLnRyaWdnZXJTZWxlY3RvciA/ICQodGhpcykucGFyZW50KCkgOiAkKHRoaXMpO1xuICAgICAgICAgICAgY2xhc3NUYXJnZXQudG9nZ2xlQ2xhc3Mob3B0aW9ucy50b2dnbGVDbGFzcyk7XG4gICAgICAgICAgICAvLyBleGVjdXRlIGNhbGxiYWNrIGlmIGV4aXN0c1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmNhbGxiYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkLmZuLnN5bmNIZWlnaHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhcnIgPSAkLm1ha2VBcnJheSh0aGlzKTtcbiAgICAgICAgYXJyLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgIHJldHVybiAkKGEpLmhlaWdodCgpIC0gJChiKS5oZWlnaHQoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzLmhlaWdodCgkKGFyclthcnIubGVuZ3RoIC0gMV0pLmhlaWdodCgpKTtcbiAgICB9O1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBAbmFtZSBNYXJrZXJXaXRoTGFiZWwgZm9yIFYzXG4gKiBAdmVyc2lvbiAxLjEuOSBbSnVuZSAzMCwgMjAxM11cbiAqIEBhdXRob3IgR2FyeSBMaXR0bGUgKGluc3BpcmVkIGJ5IGNvZGUgZnJvbSBNYXJjIFJpZGV5IG9mIEdvb2dsZSkuXG4gKiBAY29weXJpZ2h0IENvcHlyaWdodCAyMDEyIEdhcnkgTGl0dGxlIFtnYXJ5IGF0IGx1eGNlbnRyYWwuY29tXVxuICogQGZpbGVvdmVydmlldyBNYXJrZXJXaXRoTGFiZWwgZXh0ZW5kcyB0aGUgR29vZ2xlIE1hcHMgSmF2YVNjcmlwdCBBUEkgVjNcbiAqICA8Y29kZT5nb29nbGUubWFwcy5NYXJrZXI8L2NvZGU+IGNsYXNzLlxuICogIDxwPlxuICogIE1hcmtlcldpdGhMYWJlbCBhbGxvd3MgeW91IHRvIGRlZmluZSBtYXJrZXJzIHdpdGggYXNzb2NpYXRlZCBsYWJlbHMuIEFzIHlvdSB3b3VsZCBleHBlY3QsXG4gKiAgaWYgdGhlIG1hcmtlciBpcyBkcmFnZ2FibGUsIHNvIHRvbyB3aWxsIGJlIHRoZSBsYWJlbC4gSW4gYWRkaXRpb24sIGEgbWFya2VyIHdpdGggYSBsYWJlbFxuICogIHJlc3BvbmRzIHRvIGFsbCBtb3VzZSBldmVudHMgaW4gdGhlIHNhbWUgbWFubmVyIGFzIGEgcmVndWxhciBtYXJrZXIuIEl0IGFsc28gZmlyZXMgbW91c2VcbiAqICBldmVudHMgYW5kIFwicHJvcGVydHkgY2hhbmdlZFwiIGV2ZW50cyBqdXN0IGFzIGEgcmVndWxhciBtYXJrZXIgd291bGQuIFZlcnNpb24gMS4xIGFkZHNcbiAqICBzdXBwb3J0IGZvciB0aGUgcmFpc2VPbkRyYWcgZmVhdHVyZSBpbnRyb2R1Y2VkIGluIEFQSSBWMy4zLlxuICogIDxwPlxuICogIElmIHlvdSBkcmFnIGEgbWFya2VyIGJ5IGl0cyBsYWJlbCwgeW91IGNhbiBjYW5jZWwgdGhlIGRyYWcgYW5kIHJldHVybiB0aGUgbWFya2VyIHRvIGl0c1xuICogIG9yaWdpbmFsIHBvc2l0aW9uIGJ5IHByZXNzaW5nIHRoZSA8Y29kZT5Fc2M8L2NvZGU+IGtleS4gVGhpcyBkb2Vzbid0IHdvcmsgaWYgeW91IGRyYWcgdGhlIG1hcmtlclxuICogIGl0c2VsZiBiZWNhdXNlIHRoaXMgZmVhdHVyZSBpcyBub3QgKHlldCkgc3VwcG9ydGVkIGluIHRoZSA8Y29kZT5nb29nbGUubWFwcy5NYXJrZXI8L2NvZGU+IGNsYXNzLlxuICovXG5cbi8qIVxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKlx0XHRodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qIGVzbGludC1kaXNhYmxlICovXG5cbi8qKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2hpbGRDdG9yIENoaWxkIGNsYXNzLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gcGFyZW50Q3RvciBQYXJlbnQgY2xhc3MuXG4gKi9cbmZ1bmN0aW9uIGluaGVyaXRzKGNoaWxkQ3RvciwgcGFyZW50Q3Rvcikge1xuICAgIC8qKiBAY29uc3RydWN0b3IgKi9cbiAgICBmdW5jdGlvbiBUZW1wQ3RvcigpIHt9XG4gICAgVGVtcEN0b3IucHJvdG90eXBlID0gcGFyZW50Q3Rvci5wcm90b3R5cGU7XG4gICAgY2hpbGRDdG9yLnN1cGVyQ2xhc3NfID0gcGFyZW50Q3Rvci5wcm90b3R5cGU7XG4gICAgY2hpbGRDdG9yLnByb3RvdHlwZSA9IG5ldyBUZW1wQ3RvcigpO1xuICAgIC8qKiBAb3ZlcnJpZGUgKi9cbiAgICBjaGlsZEN0b3IucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gY2hpbGRDdG9yO1xufVxuXG4vKipcbiAqIFRoaXMgY29uc3RydWN0b3IgY3JlYXRlcyBhIGxhYmVsIGFuZCBhc3NvY2lhdGVzIGl0IHdpdGggYSBtYXJrZXIuXG4gKiBJdCBpcyBmb3IgdGhlIHByaXZhdGUgdXNlIG9mIHRoZSBNYXJrZXJXaXRoTGFiZWwgY2xhc3MuXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7TWFya2VyfSBtYXJrZXIgVGhlIG1hcmtlciB3aXRoIHdoaWNoIHRoZSBsYWJlbCBpcyB0byBiZSBhc3NvY2lhdGVkLlxuICogQHBhcmFtIHtzdHJpbmd9IGNyb3NzVVJMIFRoZSBVUkwgb2YgdGhlIGNyb3NzIGltYWdlID0uXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBNYXJrZXJMYWJlbF8obWFya2VyLCBjcm9zc1VSTCkge1xuICAgIHRoaXMubWFya2VyXyA9IG1hcmtlcjtcbiAgICB0aGlzLmhhbmRDdXJzb3JVUkxfID0gbWFya2VyLmhhbmRDdXJzb3JVUkw7XG5cbiAgICB0aGlzLmxhYmVsRGl2XyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMubGFiZWxEaXZfLnN0eWxlLmNzc1RleHQgPSAncG9zaXRpb246IGFic29sdXRlOyBvdmVyZmxvdzogaGlkZGVuOyc7XG5cbiAgICAvLyBTZXQgdXAgdGhlIERJViBmb3IgaGFuZGxpbmcgbW91c2UgZXZlbnRzIGluIHRoZSBsYWJlbC4gVGhpcyBESVYgZm9ybXMgYSB0cmFuc3BhcmVudCB2ZWlsXG4gICAgLy8gaW4gdGhlIFwib3ZlcmxheU1vdXNlVGFyZ2V0XCIgcGFuZSwgYSB2ZWlsIHRoYXQgY292ZXJzIGp1c3QgdGhlIGxhYmVsLiBUaGlzIGlzIGRvbmUgc28gdGhhdFxuICAgIC8vIGV2ZW50cyBjYW4gYmUgY2FwdHVyZWQgZXZlbiBpZiB0aGUgbGFiZWwgaXMgaW4gdGhlIHNoYWRvdyBvZiBhIGdvb2dsZS5tYXBzLkluZm9XaW5kb3cuXG4gICAgLy8gQ29kZSBpcyBpbmNsdWRlZCBoZXJlIHRvIGVuc3VyZSB0aGUgdmVpbCBpcyBhbHdheXMgZXhhY3RseSB0aGUgc2FtZSBzaXplIGFzIHRoZSBsYWJlbC5cbiAgICB0aGlzLmV2ZW50RGl2XyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuZXZlbnREaXZfLnN0eWxlLmNzc1RleHQgPSB0aGlzLmxhYmVsRGl2Xy5zdHlsZS5jc3NUZXh0O1xuXG4gICAgLy8gVGhpcyBpcyBuZWVkZWQgZm9yIHByb3BlciBiZWhhdmlvciBvbiBNU0lFOlxuICAgIHRoaXMuZXZlbnREaXZfLnNldEF0dHJpYnV0ZSgnb25zZWxlY3RzdGFydCcsICdyZXR1cm4gZmFsc2U7Jyk7XG4gICAgdGhpcy5ldmVudERpdl8uc2V0QXR0cmlidXRlKCdvbmRyYWdzdGFydCcsICdyZXR1cm4gZmFsc2U7Jyk7XG5cbiAgICAvLyBHZXQgdGhlIERJViBmb3IgdGhlIFwiWFwiIHRvIGJlIGRpc3BsYXllZCB3aGVuIHRoZSBtYXJrZXIgaXMgcmFpc2VkLlxuICAgIHRoaXMuY3Jvc3NEaXZfID0gTWFya2VyTGFiZWxfLmdldFNoYXJlZENyb3NzKGNyb3NzVVJMKTtcbn1cbmlmICh0eXBlb2YgZ29vZ2xlICE9PSAndW5kZWZpbmVkJykge1xuICAgIGluaGVyaXRzKE1hcmtlckxhYmVsXywgZ29vZ2xlLm1hcHMuT3ZlcmxheVZpZXcpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIERJViBmb3IgdGhlIGNyb3NzIHVzZWQgd2hlbiBkcmFnZ2luZyBhIG1hcmtlciB3aGVuIHRoZVxuICogcmFpc2VPbkRyYWcgcGFyYW1ldGVyIHNldCB0byB0cnVlLiBPbmUgY3Jvc3MgaXMgc2hhcmVkIHdpdGggYWxsIG1hcmtlcnMuXG4gKiBAcGFyYW0ge3N0cmluZ30gY3Jvc3NVUkwgVGhlIFVSTCBvZiB0aGUgY3Jvc3MgaW1hZ2UgPS5cbiAqIEBwcml2YXRlXG4gKi9cbk1hcmtlckxhYmVsXy5nZXRTaGFyZWRDcm9zcyA9IGZ1bmN0aW9uIChjcm9zc1VSTCkge1xuICAgIHZhciBkaXY7XG4gICAgaWYgKHR5cGVvZiBNYXJrZXJMYWJlbF8uZ2V0U2hhcmVkQ3Jvc3MuY3Jvc3NEaXYgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgICAgICBkaXYuc3R5bGUuY3NzVGV4dCA9ICdwb3NpdGlvbjogYWJzb2x1dGU7IHotaW5kZXg6IDEwMDAwMDI7IGRpc3BsYXk6IG5vbmU7JztcbiAgICAgICAgLy8gSG9wZWZ1bGx5IEdvb2dsZSBuZXZlciBjaGFuZ2VzIHRoZSBzdGFuZGFyZCBcIlhcIiBhdHRyaWJ1dGVzOlxuICAgICAgICBkaXYuc3R5bGUubWFyZ2luTGVmdCA9ICctOHB4JztcbiAgICAgICAgZGl2LnN0eWxlLm1hcmdpblRvcCA9ICctOXB4JztcbiAgICAgICAgZGl2LnNyYyA9IGNyb3NzVVJMO1xuICAgICAgICBNYXJrZXJMYWJlbF8uZ2V0U2hhcmVkQ3Jvc3MuY3Jvc3NEaXYgPSBkaXY7XG4gICAgfVxuICAgIHJldHVybiBNYXJrZXJMYWJlbF8uZ2V0U2hhcmVkQ3Jvc3MuY3Jvc3NEaXY7XG59O1xuXG4vKipcbiAqIEFkZHMgdGhlIERJViByZXByZXNlbnRpbmcgdGhlIGxhYmVsIHRvIHRoZSBET00uIFRoaXMgbWV0aG9kIGlzIGNhbGxlZFxuICogYXV0b21hdGljYWxseSB3aGVuIHRoZSBtYXJrZXIncyA8Y29kZT5zZXRNYXA8L2NvZGU+IG1ldGhvZCBpcyBjYWxsZWQuXG4gKiBAcHJpdmF0ZVxuICovXG5NYXJrZXJMYWJlbF8ucHJvdG90eXBlLm9uQWRkID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBtZSA9IHRoaXM7XG4gICAgdmFyIGNNb3VzZUlzRG93biA9IGZhbHNlO1xuICAgIHZhciBjRHJhZ2dpbmdMYWJlbCA9IGZhbHNlO1xuICAgIHZhciBjU2F2ZWRaSW5kZXg7XG4gICAgdmFyIGNMYXRPZmZzZXQsIGNMbmdPZmZzZXQ7XG4gICAgdmFyIGNJZ25vcmVDbGljaztcbiAgICB2YXIgY1JhaXNlRW5hYmxlZDtcbiAgICB2YXIgY1N0YXJ0UG9zaXRpb247XG4gICAgdmFyIGNTdGFydENlbnRlcjtcbiAgICAvLyBDb25zdGFudHM6XG4gICAgdmFyIGNSYWlzZU9mZnNldCA9IDIwO1xuICAgIHZhciBjRHJhZ2dpbmdDdXJzb3IgPSAndXJsKCcgKyB0aGlzLmhhbmRDdXJzb3JVUkxfICsgJyknO1xuXG4gICAgLy8gU3RvcHMgYWxsIHByb2Nlc3Npbmcgb2YgYW4gZXZlbnQuXG4gICAgLy9cbiAgICB2YXIgY0Fib3J0RXZlbnQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICBpZiAoZS5wcmV2ZW50RGVmYXVsdCkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgICAgIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTtcbiAgICAgICAgaWYgKGUuc3RvcFByb3BhZ2F0aW9uKSB7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHZhciBjU3RvcEJvdW5jZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbWUubWFya2VyXy5zZXRBbmltYXRpb24obnVsbCk7XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0UGFuZXMoKS5vdmVybGF5SW1hZ2UuYXBwZW5kQ2hpbGQodGhpcy5sYWJlbERpdl8pO1xuICAgIHRoaXMuZ2V0UGFuZXMoKS5vdmVybGF5TW91c2VUYXJnZXQuYXBwZW5kQ2hpbGQodGhpcy5ldmVudERpdl8pO1xuICAgIC8vIE9uZSBjcm9zcyBpcyBzaGFyZWQgd2l0aCBhbGwgbWFya2Vycywgc28gb25seSBhZGQgaXQgb25jZTpcbiAgICBpZiAodHlwZW9mIE1hcmtlckxhYmVsXy5nZXRTaGFyZWRDcm9zcy5wcm9jZXNzZWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRoaXMuZ2V0UGFuZXMoKS5vdmVybGF5SW1hZ2UuYXBwZW5kQ2hpbGQodGhpcy5jcm9zc0Rpdl8pO1xuICAgICAgICBNYXJrZXJMYWJlbF8uZ2V0U2hhcmVkQ3Jvc3MucHJvY2Vzc2VkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICB0aGlzLmxpc3RlbmVyc18gPSBbXG4gICAgICAgICAgICAgICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGREb21MaXN0ZW5lcih0aGlzLmV2ZW50RGl2XywgJ21vdXNlb3ZlcicsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lLm1hcmtlcl8uZ2V0RHJhZ2dhYmxlKCkgfHwgbWUubWFya2VyXy5nZXRDbGlja2FibGUoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQudHJpZ2dlcihtZS5tYXJrZXJfLCAnbW91c2VvdmVyJywgZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGREb21MaXN0ZW5lcih0aGlzLmV2ZW50RGl2XywgJ21vdXNlb3V0JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKG1lLm1hcmtlcl8uZ2V0RHJhZ2dhYmxlKCkgfHwgbWUubWFya2VyXy5nZXRDbGlja2FibGUoKSkgJiYgIWNEcmFnZ2luZ0xhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3R5bGUuY3Vyc29yID0gbWUubWFya2VyXy5nZXRDdXJzb3IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQudHJpZ2dlcihtZS5tYXJrZXJfLCAnbW91c2VvdXQnLCBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZERvbUxpc3RlbmVyKHRoaXMuZXZlbnREaXZfLCAnbW91c2Vkb3duJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjRHJhZ2dpbmdMYWJlbCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZS5tYXJrZXJfLmdldERyYWdnYWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNNb3VzZUlzRG93biA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3R5bGUuY3Vyc29yID0gY0RyYWdnaW5nQ3Vyc29yO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWUubWFya2VyXy5nZXREcmFnZ2FibGUoKSB8fCBtZS5tYXJrZXJfLmdldENsaWNrYWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LnRyaWdnZXIobWUubWFya2VyXywgJ21vdXNlZG93bicsIGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjQWJvcnRFdmVudChlKTsgLy8gUHJldmVudCBtYXAgcGFuIHdoZW4gc3RhcnRpbmcgYSBkcmFnIG9uIGEgbGFiZWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZERvbUxpc3RlbmVyKGRvY3VtZW50LCAnbW91c2V1cCcsIGZ1bmN0aW9uIChtRXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcG9zaXRpb247XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNNb3VzZUlzRG93bikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjTW91c2VJc0Rvd24gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWUuZXZlbnREaXZfLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQudHJpZ2dlcihtZS5tYXJrZXJfLCAnbW91c2V1cCcsIG1FdmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjRHJhZ2dpbmdMYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY1JhaXNlRW5hYmxlZCkgeyAvLyBMb3dlciB0aGUgbWFya2VyICYgbGFiZWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uID0gbWUuZ2V0UHJvamVjdGlvbigpLmZyb21MYXRMbmdUb0RpdlBpeGVsKG1lLm1hcmtlcl8uZ2V0UG9zaXRpb24oKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbi55ICs9IGNSYWlzZU9mZnNldDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lLm1hcmtlcl8uc2V0UG9zaXRpb24obWUuZ2V0UHJvamVjdGlvbigpLmZyb21EaXZQaXhlbFRvTGF0TG5nKHBvc2l0aW9uKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIG5vdCB0aGUgc2FtZSBib3VuY2luZyBzdHlsZSBhcyB3aGVuIHRoZSBtYXJrZXIgcG9ydGlvbiBpcyBkcmFnZ2VkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYnV0IGl0IHdpbGwgaGF2ZSB0byBkbzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7IC8vIFdpbGwgZmFpbCBpZiBydW5uaW5nIEdvb2dsZSBNYXBzIEFQSSBlYXJsaWVyIHRoYW4gVjMuM1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lLm1hcmtlcl8uc2V0QW5pbWF0aW9uKGdvb2dsZS5tYXBzLkFuaW1hdGlvbi5CT1VOQ0UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoY1N0b3BCb3VuY2UsIDE0MDYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZS5jcm9zc0Rpdl8uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWUubWFya2VyXy5zZXRaSW5kZXgoY1NhdmVkWkluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY0lnbm9yZUNsaWNrID0gdHJ1ZTsgLy8gU2V0IGZsYWcgdG8gaWdub3JlIHRoZSBjbGljayBldmVudCByZXBvcnRlZCBhZnRlciBhIGxhYmVsIGRyYWdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY0RyYWdnaW5nTGFiZWwgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbUV2ZW50LmxhdExuZyA9IG1lLm1hcmtlcl8uZ2V0UG9zaXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQudHJpZ2dlcihtZS5tYXJrZXJfLCAnZHJhZ2VuZCcsIG1FdmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtZS5tYXJrZXJfLmdldE1hcCgpLCAnbW91c2Vtb3ZlJywgZnVuY3Rpb24gKG1FdmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3NpdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY01vdXNlSXNEb3duKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjRHJhZ2dpbmdMYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hhbmdlIHRoZSByZXBvcnRlZCBsb2NhdGlvbiBmcm9tIHRoZSBtb3VzZSBwb3NpdGlvbiB0byB0aGUgbWFya2VyIHBvc2l0aW9uOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbUV2ZW50LmxhdExuZyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcobUV2ZW50LmxhdExuZy5sYXQoKSAtIGNMYXRPZmZzZXQsIG1FdmVudC5sYXRMbmcubG5nKCkgLSBjTG5nT2Zmc2V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uID0gbWUuZ2V0UHJvamVjdGlvbigpLmZyb21MYXRMbmdUb0RpdlBpeGVsKG1FdmVudC5sYXRMbmcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNSYWlzZUVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZS5jcm9zc0Rpdl8uc3R5bGUubGVmdCA9IHBvc2l0aW9uLnggKyAncHgnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lLmNyb3NzRGl2Xy5zdHlsZS50b3AgPSBwb3NpdGlvbi55ICsgJ3B4JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZS5jcm9zc0Rpdl8uc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uLnkgLT0gY1JhaXNlT2Zmc2V0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWUubWFya2VyXy5zZXRQb3NpdGlvbihtZS5nZXRQcm9qZWN0aW9uKCkuZnJvbURpdlBpeGVsVG9MYXRMbmcocG9zaXRpb24pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjUmFpc2VFbmFibGVkKSB7IC8vIERvbid0IHJhaXNlIHRoZSB2ZWlsOyB0aGlzIGhhY2sgbmVlZGVkIHRvIG1ha2UgTVNJRSBhY3QgcHJvcGVybHlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZS5ldmVudERpdl8uc3R5bGUudG9wID0gKHBvc2l0aW9uLnkgKyBjUmFpc2VPZmZzZXQpICsgJ3B4JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LnRyaWdnZXIobWUubWFya2VyXywgJ2RyYWcnLCBtRXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIG9mZnNldHMgZnJvbSB0aGUgY2xpY2sgcG9pbnQgdG8gdGhlIG1hcmtlciBwb3NpdGlvbjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNMYXRPZmZzZXQgPSBtRXZlbnQubGF0TG5nLmxhdCgpIC0gbWUubWFya2VyXy5nZXRQb3NpdGlvbigpLmxhdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY0xuZ09mZnNldCA9IG1FdmVudC5sYXRMbmcubG5nKCkgLSBtZS5tYXJrZXJfLmdldFBvc2l0aW9uKCkubG5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjU2F2ZWRaSW5kZXggPSBtZS5tYXJrZXJfLmdldFpJbmRleCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY1N0YXJ0UG9zaXRpb24gPSBtZS5tYXJrZXJfLmdldFBvc2l0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjU3RhcnRDZW50ZXIgPSBtZS5tYXJrZXJfLmdldE1hcCgpLmdldENlbnRlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY1JhaXNlRW5hYmxlZCA9IG1lLm1hcmtlcl8uZ2V0KCdyYWlzZU9uRHJhZycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY0RyYWdnaW5nTGFiZWwgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWUubWFya2VyXy5zZXRaSW5kZXgoMTAwMDAwMCk7IC8vIE1vdmVzIHRoZSBtYXJrZXIgJiBsYWJlbCB0byB0aGUgZm9yZWdyb3VuZCBkdXJpbmcgYSBkcmFnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtRXZlbnQubGF0TG5nID0gbWUubWFya2VyXy5nZXRQb3NpdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQudHJpZ2dlcihtZS5tYXJrZXJfLCAnZHJhZ3N0YXJ0JywgbUV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkRG9tTGlzdGVuZXIoZG9jdW1lbnQsICdrZXlkb3duJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY0RyYWdnaW5nTGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMjcpIHsgLy8gRXNjIGtleVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY1JhaXNlRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWUubWFya2VyXy5zZXRQb3NpdGlvbihjU3RhcnRQb3NpdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZS5tYXJrZXJfLmdldE1hcCgpLnNldENlbnRlcihjU3RhcnRDZW50ZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQudHJpZ2dlcihkb2N1bWVudCwgJ21vdXNldXAnLCBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkRG9tTGlzdGVuZXIodGhpcy5ldmVudERpdl8sICdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lLm1hcmtlcl8uZ2V0RHJhZ2dhYmxlKCkgfHwgbWUubWFya2VyXy5nZXRDbGlja2FibGUoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY0lnbm9yZUNsaWNrKSB7IC8vIElnbm9yZSB0aGUgY2xpY2sgcmVwb3J0ZWQgd2hlbiBhIGxhYmVsIGRyYWcgZW5kc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY0lnbm9yZUNsaWNrID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC50cmlnZ2VyKG1lLm1hcmtlcl8sICdjbGljaycsIGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY0Fib3J0RXZlbnQoZSk7IC8vIFByZXZlbnQgY2xpY2sgZnJvbSBiZWluZyBwYXNzZWQgb24gdG8gbWFwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZERvbUxpc3RlbmVyKHRoaXMuZXZlbnREaXZfLCAnZGJsY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZS5tYXJrZXJfLmdldERyYWdnYWJsZSgpIHx8IG1lLm1hcmtlcl8uZ2V0Q2xpY2thYmxlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQudHJpZ2dlcihtZS5tYXJrZXJfLCAnZGJsY2xpY2snLCBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY0Fib3J0RXZlbnQoZSk7IC8vIFByZXZlbnQgbWFwIHpvb20gd2hlbiBkb3VibGUtY2xpY2tpbmcgb24gYSBsYWJlbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIodGhpcy5tYXJrZXJfLCAnZHJhZ3N0YXJ0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY0RyYWdnaW5nTGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY1JhaXNlRW5hYmxlZCA9IHRoaXMuZ2V0KCdyYWlzZU9uRHJhZycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIodGhpcy5tYXJrZXJfLCAnZHJhZycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNEcmFnZ2luZ0xhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjUmFpc2VFbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZS5zZXRQb3NpdGlvbihjUmFpc2VPZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRHVyaW5nIGEgZHJhZywgdGhlIG1hcmtlcidzIHotaW5kZXggaXMgdGVtcG9yYXJpbHkgc2V0IHRvIDEwMDAwMDAgdG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVuc3VyZSBpdCBhcHBlYXJzIGFib3ZlIGFsbCBvdGhlciBtYXJrZXJzLiBBbHNvIHNldCB0aGUgbGFiZWwncyB6LWluZGV4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0byAxMDAwMDAwIChwbHVzIG9yIG1pbnVzIDEgZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIGxhYmVsIGlzIHN1cHBvc2VkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0byBiZSBhYm92ZSBvciBiZWxvdyB0aGUgbWFya2VyKS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lLmxhYmVsRGl2Xy5zdHlsZS56SW5kZXggPSAxMDAwMDAwICsgKHRoaXMuZ2V0KCdsYWJlbEluQmFja2dyb3VuZCcpID8gLTEgOiArMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKHRoaXMubWFya2VyXywgJ2RyYWdlbmQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjRHJhZ2dpbmdMYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY1JhaXNlRW5hYmxlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWUuc2V0UG9zaXRpb24oMCk7IC8vIEFsc28gcmVzdG9yZXMgei1pbmRleCBvZiBsYWJlbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcih0aGlzLm1hcmtlcl8sICdwb3NpdGlvbl9jaGFuZ2VkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lLnNldFBvc2l0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKHRoaXMubWFya2VyXywgJ3ppbmRleF9jaGFuZ2VkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lLnNldFpJbmRleCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcih0aGlzLm1hcmtlcl8sICd2aXNpYmxlX2NoYW5nZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWUuc2V0VmlzaWJsZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcih0aGlzLm1hcmtlcl8sICdsYWJlbHZpc2libGVfY2hhbmdlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZS5zZXRWaXNpYmxlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKHRoaXMubWFya2VyXywgJ3RpdGxlX2NoYW5nZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWUuc2V0VGl0bGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIodGhpcy5tYXJrZXJfLCAnbGFiZWxjb250ZW50X2NoYW5nZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWUuc2V0Q29udGVudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcih0aGlzLm1hcmtlcl8sICdsYWJlbGFuY2hvcl9jaGFuZ2VkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lLnNldEFuY2hvcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcih0aGlzLm1hcmtlcl8sICdsYWJlbGNsYXNzX2NoYW5nZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWUuc2V0U3R5bGVzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKHRoaXMubWFya2VyXywgJ2xhYmVsc3R5bGVfY2hhbmdlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZS5zZXRTdHlsZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgXTtcbn07XG5cbi8qKlxuICogUmVtb3ZlcyB0aGUgRElWIGZvciB0aGUgbGFiZWwgZnJvbSB0aGUgRE9NLiBJdCBhbHNvIHJlbW92ZXMgYWxsIGV2ZW50IGhhbmRsZXJzLlxuICogVGhpcyBtZXRob2QgaXMgY2FsbGVkIGF1dG9tYXRpY2FsbHkgd2hlbiB0aGUgbWFya2VyJ3MgPGNvZGU+c2V0TWFwKG51bGwpPC9jb2RlPlxuICogbWV0aG9kIGlzIGNhbGxlZC5cbiAqIEBwcml2YXRlXG4gKi9cbk1hcmtlckxhYmVsXy5wcm90b3R5cGUub25SZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGk7XG4gICAgdGhpcy5sYWJlbERpdl8ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmxhYmVsRGl2Xyk7XG4gICAgdGhpcy5ldmVudERpdl8ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmV2ZW50RGl2Xyk7XG5cbiAgICAvLyBSZW1vdmUgZXZlbnQgbGlzdGVuZXJzOlxuICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmxpc3RlbmVyc18ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQucmVtb3ZlTGlzdGVuZXIodGhpcy5saXN0ZW5lcnNfW2ldKTtcbiAgICB9XG59O1xuXG4vKipcbiAqIERyYXdzIHRoZSBsYWJlbCBvbiB0aGUgbWFwLlxuICogQHByaXZhdGVcbiAqL1xuTWFya2VyTGFiZWxfLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuc2V0Q29udGVudCgpO1xuICAgIHRoaXMuc2V0VGl0bGUoKTtcbiAgICB0aGlzLnNldFN0eWxlcygpO1xufTtcblxuLyoqXG4gKiBTZXRzIHRoZSBjb250ZW50IG9mIHRoZSBsYWJlbC5cbiAqIFRoZSBjb250ZW50IGNhbiBiZSBwbGFpbiB0ZXh0IG9yIGFuIEhUTUwgRE9NIG5vZGUuXG4gKiBAcHJpdmF0ZVxuICovXG5NYXJrZXJMYWJlbF8ucHJvdG90eXBlLnNldENvbnRlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGNvbnRlbnQgPSB0aGlzLm1hcmtlcl8uZ2V0KCdsYWJlbENvbnRlbnQnKTtcbiAgICBpZiAodHlwZW9mIGNvbnRlbnQubm9kZVR5cGUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRoaXMubGFiZWxEaXZfLmlubmVySFRNTCA9IGNvbnRlbnQ7XG4gICAgICAgIHRoaXMuZXZlbnREaXZfLmlubmVySFRNTCA9IHRoaXMubGFiZWxEaXZfLmlubmVySFRNTDtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmxhYmVsRGl2Xy5pbm5lckhUTUwgPSAnJzsgLy8gUmVtb3ZlIGN1cnJlbnQgY29udGVudFxuICAgICAgICB0aGlzLmxhYmVsRGl2Xy5hcHBlbmRDaGlsZChjb250ZW50KTtcbiAgICAgICAgY29udGVudCA9IGNvbnRlbnQuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICB0aGlzLmV2ZW50RGl2Xy5hcHBlbmRDaGlsZChjb250ZW50KTtcbiAgICB9XG59O1xuXG4vKipcbiAqIFNldHMgdGhlIGNvbnRlbnQgb2YgdGhlIHRvb2wgdGlwIGZvciB0aGUgbGFiZWwuIEl0IGlzXG4gKiBhbHdheXMgc2V0IHRvIGJlIHRoZSBzYW1lIGFzIGZvciB0aGUgbWFya2VyIGl0c2VsZi5cbiAqIEBwcml2YXRlXG4gKi9cbk1hcmtlckxhYmVsXy5wcm90b3R5cGUuc2V0VGl0bGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5ldmVudERpdl8udGl0bGUgPSB0aGlzLm1hcmtlcl8uZ2V0VGl0bGUoKSB8fCAnJztcbn07XG5cbi8qKlxuICogU2V0cyB0aGUgc3R5bGUgb2YgdGhlIGxhYmVsIGJ5IHNldHRpbmcgdGhlIHN0eWxlIHNoZWV0IGFuZCBhcHBseWluZ1xuICogb3RoZXIgc3BlY2lmaWMgc3R5bGVzIHJlcXVlc3RlZC5cbiAqIEBwcml2YXRlXG4gKi9cbk1hcmtlckxhYmVsXy5wcm90b3R5cGUuc2V0U3R5bGVzID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBpLCBsYWJlbFN0eWxlO1xuXG4gICAgLy8gQXBwbHkgc3R5bGUgdmFsdWVzIGZyb20gdGhlIHN0eWxlIHNoZWV0IGRlZmluZWQgaW4gdGhlIGxhYmVsQ2xhc3MgcGFyYW1ldGVyOlxuICAgIHRoaXMubGFiZWxEaXZfLmNsYXNzTmFtZSA9IHRoaXMubWFya2VyXy5nZXQoJ2xhYmVsQ2xhc3MnKTtcbiAgICB0aGlzLmV2ZW50RGl2Xy5jbGFzc05hbWUgPSB0aGlzLmxhYmVsRGl2Xy5jbGFzc05hbWU7XG5cbiAgICAvLyBDbGVhciBleGlzdGluZyBpbmxpbmUgc3R5bGUgdmFsdWVzOlxuICAgIHRoaXMubGFiZWxEaXZfLnN0eWxlLmNzc1RleHQgPSAnJztcbiAgICB0aGlzLmV2ZW50RGl2Xy5zdHlsZS5jc3NUZXh0ID0gJyc7XG4gICAgLy8gQXBwbHkgc3R5bGUgdmFsdWVzIGRlZmluZWQgaW4gdGhlIGxhYmVsU3R5bGUgcGFyYW1ldGVyOlxuICAgIGxhYmVsU3R5bGUgPSB0aGlzLm1hcmtlcl8uZ2V0KCdsYWJlbFN0eWxlJyk7XG4gICAgZm9yIChpIGluIGxhYmVsU3R5bGUpIHtcbiAgICAgICAgaWYgKGxhYmVsU3R5bGUuaGFzT3duUHJvcGVydHkoaSkpIHtcbiAgICAgICAgICAgIHRoaXMubGFiZWxEaXZfLnN0eWxlW2ldID0gbGFiZWxTdHlsZVtpXTtcbiAgICAgICAgICAgIHRoaXMuZXZlbnREaXZfLnN0eWxlW2ldID0gbGFiZWxTdHlsZVtpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnNldE1hbmRhdG9yeVN0eWxlcygpO1xufTtcblxuLyoqXG4gKiBTZXRzIHRoZSBtYW5kYXRvcnkgc3R5bGVzIHRvIHRoZSBESVYgcmVwcmVzZW50aW5nIHRoZSBsYWJlbCBhcyB3ZWxsIGFzIHRvIHRoZVxuICogYXNzb2NpYXRlZCBldmVudCBESVYuIFRoaXMgaW5jbHVkZXMgc2V0dGluZyB0aGUgRElWIHBvc2l0aW9uLCB6LWluZGV4LCBhbmQgdmlzaWJpbGl0eS5cbiAqIEBwcml2YXRlXG4gKi9cbk1hcmtlckxhYmVsXy5wcm90b3R5cGUuc2V0TWFuZGF0b3J5U3R5bGVzID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMubGFiZWxEaXZfLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICB0aGlzLmxhYmVsRGl2Xy5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xuICAgIHRoaXMuZXZlbnREaXZfLnN0eWxlLnBvc2l0aW9uID0gdGhpcy5sYWJlbERpdl8uc3R5bGUucG9zaXRpb247XG4gICAgdGhpcy5ldmVudERpdl8uc3R5bGUub3ZlcmZsb3cgPSB0aGlzLmxhYmVsRGl2Xy5zdHlsZS5vdmVyZmxvdztcbiAgICB0aGlzLnNldEFuY2hvcigpO1xuICAgIHRoaXMuc2V0UG9zaXRpb24oKTsgLy8gVGhpcyBhbHNvIHVwZGF0ZXMgei1pbmRleCwgaWYgbmVjZXNzYXJ5LlxuICAgIHRoaXMuc2V0VmlzaWJsZSh0cnVlKTtcbn07XG5cbi8qKlxuICogU2V0cyB0aGUgYW5jaG9yIHBvaW50IG9mIHRoZSBsYWJlbC5cbiAqIEBwcml2YXRlXG4gKi9cbk1hcmtlckxhYmVsXy5wcm90b3R5cGUuc2V0QW5jaG9yID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBhbmNob3IgPSB0aGlzLm1hcmtlcl8uZ2V0KCdsYWJlbEFuY2hvcicpO1xuICAgIHRoaXMubGFiZWxEaXZfLnN0eWxlLm1hcmdpbkxlZnQgPSAtYW5jaG9yLnggKyAncHgnO1xuICAgIHRoaXMubGFiZWxEaXZfLnN0eWxlLm1hcmdpblRvcCA9IC1hbmNob3IueSArICdweCc7XG4gICAgdGhpcy5ldmVudERpdl8uc3R5bGUubWFyZ2luTGVmdCA9IC1hbmNob3IueCArICdweCc7XG4gICAgdGhpcy5ldmVudERpdl8uc3R5bGUubWFyZ2luVG9wID0gLWFuY2hvci55ICsgJ3B4Jztcbn07XG5cbi8qKlxuICogU2V0cyB0aGUgcG9zaXRpb24gb2YgdGhlIGxhYmVsLiBUaGUgei1pbmRleCBpcyBhbHNvIHVwZGF0ZWQsIGlmIG5lY2Vzc2FyeS5cbiAqIEBwcml2YXRlXG4gKi9cbk1hcmtlckxhYmVsXy5wcm90b3R5cGUuc2V0UG9zaXRpb24gPSBmdW5jdGlvbiAoeU9mZnNldCkge1xuICAgIHZhciBwb3NpdGlvbiA9IHRoaXMuZ2V0UHJvamVjdGlvbigpLmZyb21MYXRMbmdUb0RpdlBpeGVsKHRoaXMubWFya2VyXy5nZXRQb3NpdGlvbigpKTtcbiAgICBpZiAodHlwZW9mIHlPZmZzZXQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHlPZmZzZXQgPSAwO1xuICAgIH1cbiAgICB0aGlzLmxhYmVsRGl2Xy5zdHlsZS5sZWZ0ID0gTWF0aC5yb3VuZChwb3NpdGlvbi54KSArICdweCc7XG4gICAgdGhpcy5sYWJlbERpdl8uc3R5bGUudG9wID0gTWF0aC5yb3VuZChwb3NpdGlvbi55IC0geU9mZnNldCkgKyAncHgnO1xuICAgIHRoaXMuZXZlbnREaXZfLnN0eWxlLmxlZnQgPSB0aGlzLmxhYmVsRGl2Xy5zdHlsZS5sZWZ0O1xuICAgIHRoaXMuZXZlbnREaXZfLnN0eWxlLnRvcCA9IHRoaXMubGFiZWxEaXZfLnN0eWxlLnRvcDtcblxuICAgIHRoaXMuc2V0WkluZGV4KCk7XG59O1xuXG4vKipcbiAqIFNldHMgdGhlIHotaW5kZXggb2YgdGhlIGxhYmVsLiBJZiB0aGUgbWFya2VyJ3Mgei1pbmRleCBwcm9wZXJ0eSBoYXMgbm90IGJlZW4gZGVmaW5lZCwgdGhlIHotaW5kZXhcbiAqIG9mIHRoZSBsYWJlbCBpcyBzZXQgdG8gdGhlIHZlcnRpY2FsIGNvb3JkaW5hdGUgb2YgdGhlIGxhYmVsLiBUaGlzIGlzIGluIGtlZXBpbmcgd2l0aCB0aGUgZGVmYXVsdFxuICogc3RhY2tpbmcgb3JkZXIgZm9yIEdvb2dsZSBNYXBzOiBtYXJrZXJzIHRvIHRoZSBzb3V0aCBhcmUgaW4gZnJvbnQgb2YgbWFya2VycyB0byB0aGUgbm9ydGguXG4gKiBAcHJpdmF0ZVxuICovXG5NYXJrZXJMYWJlbF8ucHJvdG90eXBlLnNldFpJbmRleCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgekFkanVzdCA9ICh0aGlzLm1hcmtlcl8uZ2V0KCdsYWJlbEluQmFja2dyb3VuZCcpID8gLTEgOiArMSk7XG4gICAgaWYgKHR5cGVvZiB0aGlzLm1hcmtlcl8uZ2V0WkluZGV4KCkgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRoaXMubGFiZWxEaXZfLnN0eWxlLnpJbmRleCA9IHBhcnNlSW50KHRoaXMubGFiZWxEaXZfLnN0eWxlLnRvcCwgMTApICsgekFkanVzdDtcbiAgICAgICAgdGhpcy5ldmVudERpdl8uc3R5bGUuekluZGV4ID0gdGhpcy5sYWJlbERpdl8uc3R5bGUuekluZGV4O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubGFiZWxEaXZfLnN0eWxlLnpJbmRleCA9IHRoaXMubWFya2VyXy5nZXRaSW5kZXgoKSArIHpBZGp1c3Q7XG4gICAgICAgIHRoaXMuZXZlbnREaXZfLnN0eWxlLnpJbmRleCA9IHRoaXMubGFiZWxEaXZfLnN0eWxlLnpJbmRleDtcbiAgICB9XG59O1xuXG4vKipcbiAqIFNldHMgdGhlIHZpc2liaWxpdHkgb2YgdGhlIGxhYmVsLiBUaGUgbGFiZWwgaXMgdmlzaWJsZSBvbmx5IGlmIHRoZSBtYXJrZXIgaXRzZWxmIGlzXG4gKiB2aXNpYmxlIChpLmUuLCBpdHMgdmlzaWJsZSBwcm9wZXJ0eSBpcyB0cnVlKSBhbmQgdGhlIGxhYmVsVmlzaWJsZSBwcm9wZXJ0eSBpcyB0cnVlLlxuICogQHByaXZhdGVcbiAqL1xuTWFya2VyTGFiZWxfLnByb3RvdHlwZS5zZXRWaXNpYmxlID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLm1hcmtlcl8uZ2V0KCdsYWJlbFZpc2libGUnKSkge1xuICAgICAgICB0aGlzLmxhYmVsRGl2Xy5zdHlsZS5kaXNwbGF5ID0gdGhpcy5tYXJrZXJfLmdldFZpc2libGUoKSA/ICdibG9jaycgOiAnbm9uZSc7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5sYWJlbERpdl8uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB9XG4gICAgdGhpcy5ldmVudERpdl8uc3R5bGUuZGlzcGxheSA9IHRoaXMubGFiZWxEaXZfLnN0eWxlLmRpc3BsYXk7XG59O1xuXG4vKipcbiAqIEBuYW1lIE1hcmtlcldpdGhMYWJlbE9wdGlvbnNcbiAqIEBjbGFzcyBUaGlzIGNsYXNzIHJlcHJlc2VudHMgdGhlIG9wdGlvbmFsIHBhcmFtZXRlciBwYXNzZWQgdG8gdGhlIHtAbGluayBNYXJrZXJXaXRoTGFiZWx9IGNvbnN0cnVjdG9yLlxuICogIFRoZSBwcm9wZXJ0aWVzIGF2YWlsYWJsZSBhcmUgdGhlIHNhbWUgYXMgZm9yIDxjb2RlPmdvb2dsZS5tYXBzLk1hcmtlcjwvY29kZT4gd2l0aCB0aGUgYWRkaXRpb25cbiAqICBvZiB0aGUgcHJvcGVydGllcyBsaXN0ZWQgYmVsb3cuIFRvIGNoYW5nZSBhbnkgb2YgdGhlc2UgYWRkaXRpb25hbCBwcm9wZXJ0aWVzIGFmdGVyIHRoZSBsYWJlbGVkXG4gKiAgbWFya2VyIGhhcyBiZWVuIGNyZWF0ZWQsIGNhbGwgPGNvZGU+Z29vZ2xlLm1hcHMuTWFya2VyLnNldChwcm9wZXJ0eU5hbWUsIHByb3BlcnR5VmFsdWUpPC9jb2RlPi5cbiAqICA8cD5cbiAqICBXaGVuIGFueSBvZiB0aGVzZSBwcm9wZXJ0aWVzIGNoYW5nZXMsIGEgcHJvcGVydHkgY2hhbmdlZCBldmVudCBpcyBmaXJlZC4gVGhlIG5hbWVzIG9mIHRoZXNlXG4gKiAgZXZlbnRzIGFyZSBkZXJpdmVkIGZyb20gdGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5IGFuZCBhcmUgb2YgdGhlIGZvcm0gPGNvZGU+cHJvcGVydHluYW1lX2NoYW5nZWQ8L2NvZGU+LlxuICogIEZvciBleGFtcGxlLCBpZiB0aGUgY29udGVudCBvZiB0aGUgbGFiZWwgY2hhbmdlcywgYSA8Y29kZT5sYWJlbGNvbnRlbnRfY2hhbmdlZDwvY29kZT4gZXZlbnRcbiAqICBpcyBmaXJlZC5cbiAqICA8cD5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfE5vZGV9IFtsYWJlbENvbnRlbnRdIFRoZSBjb250ZW50IG9mIHRoZSBsYWJlbCAocGxhaW4gdGV4dCBvciBhbiBIVE1MIERPTSBub2RlKS5cbiAqIEBwcm9wZXJ0eSB7UG9pbnR9IFtsYWJlbEFuY2hvcl0gQnkgZGVmYXVsdCwgYSBsYWJlbCBpcyBkcmF3biB3aXRoIGl0cyBhbmNob3IgcG9pbnQgYXQgKDAsMCkgc29cbiAqICB0aGF0IGl0cyB0b3AgbGVmdCBjb3JuZXIgaXMgcG9zaXRpb25lZCBhdCB0aGUgYW5jaG9yIHBvaW50IG9mIHRoZSBhc3NvY2lhdGVkIG1hcmtlci4gVXNlIHRoaXNcbiAqICBwcm9wZXJ0eSB0byBjaGFuZ2UgdGhlIGFuY2hvciBwb2ludCBvZiB0aGUgbGFiZWwuIEZvciBleGFtcGxlLCB0byBjZW50ZXIgYSA1MHB4LXdpZGUgbGFiZWxcbiAqICBiZW5lYXRoIGEgbWFya2VyLCBzcGVjaWZ5IGEgPGNvZGU+bGFiZWxBbmNob3I8L2NvZGU+IG9mIDxjb2RlPmdvb2dsZS5tYXBzLlBvaW50KDI1LCAwKTwvY29kZT4uXG4gKiAgKE5vdGU6IHgtdmFsdWVzIGluY3JlYXNlIHRvIHRoZSByaWdodCBhbmQgeS12YWx1ZXMgaW5jcmVhc2UgdG8gdGhlIHRvcC4pXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2xhYmVsQ2xhc3NdIFRoZSBuYW1lIG9mIHRoZSBDU1MgY2xhc3MgZGVmaW5pbmcgdGhlIHN0eWxlcyBmb3IgdGhlIGxhYmVsLlxuICogIE5vdGUgdGhhdCBzdHlsZSB2YWx1ZXMgZm9yIDxjb2RlPnBvc2l0aW9uPC9jb2RlPiwgPGNvZGU+b3ZlcmZsb3c8L2NvZGU+LCA8Y29kZT50b3A8L2NvZGU+LFxuICogIDxjb2RlPmxlZnQ8L2NvZGU+LCA8Y29kZT56SW5kZXg8L2NvZGU+LCA8Y29kZT5kaXNwbGF5PC9jb2RlPiwgPGNvZGU+bWFyZ2luTGVmdDwvY29kZT4sIGFuZFxuICogIDxjb2RlPm1hcmdpblRvcDwvY29kZT4gYXJlIGlnbm9yZWQ7IHRoZXNlIHN0eWxlcyBhcmUgZm9yIGludGVybmFsIHVzZSBvbmx5LlxuICogQHByb3BlcnR5IHtPYmplY3R9IFtsYWJlbFN0eWxlXSBBbiBvYmplY3QgbGl0ZXJhbCB3aG9zZSBwcm9wZXJ0aWVzIGRlZmluZSBzcGVjaWZpYyBDU1NcbiAqICBzdHlsZSB2YWx1ZXMgdG8gYmUgYXBwbGllZCB0byB0aGUgbGFiZWwuIFN0eWxlIHZhbHVlcyBkZWZpbmVkIGhlcmUgb3ZlcnJpZGUgdGhvc2UgdGhhdCBtYXlcbiAqICBiZSBkZWZpbmVkIGluIHRoZSA8Y29kZT5sYWJlbENsYXNzPC9jb2RlPiBzdHlsZSBzaGVldC4gSWYgdGhpcyBwcm9wZXJ0eSBpcyBjaGFuZ2VkIGFmdGVyIHRoZVxuICogIGxhYmVsIGhhcyBiZWVuIGNyZWF0ZWQsIGFsbCBwcmV2aW91c2x5IHNldCBzdHlsZXMgKGV4Y2VwdCB0aG9zZSBkZWZpbmVkIGluIHRoZSBzdHlsZSBzaGVldClcbiAqICBhcmUgcmVtb3ZlZCBmcm9tIHRoZSBsYWJlbCBiZWZvcmUgdGhlIG5ldyBzdHlsZSB2YWx1ZXMgYXJlIGFwcGxpZWQuXG4gKiAgTm90ZSB0aGF0IHN0eWxlIHZhbHVlcyBmb3IgPGNvZGU+cG9zaXRpb248L2NvZGU+LCA8Y29kZT5vdmVyZmxvdzwvY29kZT4sIDxjb2RlPnRvcDwvY29kZT4sXG4gKiAgPGNvZGU+bGVmdDwvY29kZT4sIDxjb2RlPnpJbmRleDwvY29kZT4sIDxjb2RlPmRpc3BsYXk8L2NvZGU+LCA8Y29kZT5tYXJnaW5MZWZ0PC9jb2RlPiwgYW5kXG4gKiAgPGNvZGU+bWFyZ2luVG9wPC9jb2RlPiBhcmUgaWdub3JlZDsgdGhlc2Ugc3R5bGVzIGFyZSBmb3IgaW50ZXJuYWwgdXNlIG9ubHkuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtsYWJlbEluQmFja2dyb3VuZF0gQSBmbGFnIGluZGljYXRpbmcgd2hldGhlciBhIGxhYmVsIHRoYXQgb3ZlcmxhcHMgaXRzXG4gKiAgYXNzb2NpYXRlZCBtYXJrZXIgc2hvdWxkIGFwcGVhciBpbiB0aGUgYmFja2dyb3VuZCAoaS5lLiwgaW4gYSBwbGFuZSBiZWxvdyB0aGUgbWFya2VyKS5cbiAqICBUaGUgZGVmYXVsdCBpcyA8Y29kZT5mYWxzZTwvY29kZT4sIHdoaWNoIGNhdXNlcyB0aGUgbGFiZWwgdG8gYXBwZWFyIGluIHRoZSBmb3JlZ3JvdW5kLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbbGFiZWxWaXNpYmxlXSBBIGZsYWcgaW5kaWNhdGluZyB3aGV0aGVyIHRoZSBsYWJlbCBpcyB0byBiZSB2aXNpYmxlLlxuICogIFRoZSBkZWZhdWx0IGlzIDxjb2RlPnRydWU8L2NvZGU+LiBOb3RlIHRoYXQgZXZlbiBpZiA8Y29kZT5sYWJlbFZpc2libGU8L2NvZGU+IGlzXG4gKiAgPGNvZGU+dHJ1ZTwvY29kZT4sIHRoZSBsYWJlbCB3aWxsIDxpPm5vdDwvaT4gYmUgdmlzaWJsZSB1bmxlc3MgdGhlIGFzc29jaWF0ZWQgbWFya2VyIGlzIGFsc29cbiAqICB2aXNpYmxlIChpLmUuLCB1bmxlc3MgdGhlIG1hcmtlcidzIDxjb2RlPnZpc2libGU8L2NvZGU+IHByb3BlcnR5IGlzIDxjb2RlPnRydWU8L2NvZGU+KS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3JhaXNlT25EcmFnXSBBIGZsYWcgaW5kaWNhdGluZyB3aGV0aGVyIHRoZSBsYWJlbCBhbmQgbWFya2VyIGFyZSB0byBiZVxuICogIHJhaXNlZCB3aGVuIHRoZSBtYXJrZXIgaXMgZHJhZ2dlZC4gVGhlIGRlZmF1bHQgaXMgPGNvZGU+dHJ1ZTwvY29kZT4uIElmIGEgZHJhZ2dhYmxlIG1hcmtlciBpc1xuICogIGJlaW5nIGNyZWF0ZWQgYW5kIGEgdmVyc2lvbiBvZiBHb29nbGUgTWFwcyBBUEkgZWFybGllciB0aGFuIFYzLjMgaXMgYmVpbmcgdXNlZCwgdGhpcyBwcm9wZXJ0eVxuICogIG11c3QgYmUgc2V0IHRvIDxjb2RlPmZhbHNlPC9jb2RlPi5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW29wdGltaXplZF0gQSBmbGFnIGluZGljYXRpbmcgd2hldGhlciByZW5kZXJpbmcgaXMgdG8gYmUgb3B0aW1pemVkIGZvciB0aGVcbiAqICBtYXJrZXIuIDxiPkltcG9ydGFudDogVGhlIG9wdGltaXplZCByZW5kZXJpbmcgdGVjaG5pcXVlIGlzIG5vdCBzdXBwb3J0ZWQgYnkgTWFya2VyV2l0aExhYmVsLFxuICogIHNvIHRoZSB2YWx1ZSBvZiB0aGlzIHBhcmFtZXRlciBpcyBhbHdheXMgZm9yY2VkIHRvIDxjb2RlPmZhbHNlPC9jb2RlPi5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbY3Jvc3NJbWFnZT1cImh0dHA6Ly9tYXBzLmdzdGF0aWMuY29tL2ludGwvZW5fdXMvbWFwZmlsZXMvZHJhZ19jcm9zc182N18xNi5wbmdcIl1cbiAqICBUaGUgVVJMIG9mIHRoZSBjcm9zcyBpbWFnZSB0byBiZSBkaXNwbGF5ZWQgd2hpbGUgZHJhZ2dpbmcgYSBtYXJrZXIuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2hhbmRDdXJzb3I9XCJodHRwOi8vbWFwcy5nc3RhdGljLmNvbS9pbnRsL2VuX3VzL21hcGZpbGVzL2Nsb3NlZGhhbmRfOF84LmN1clwiXVxuICogIFRoZSBVUkwgb2YgdGhlIGN1cnNvciB0byBiZSBkaXNwbGF5ZWQgd2hpbGUgZHJhZ2dpbmcgYSBtYXJrZXIuXG4gKi9cbi8qKlxuICogQ3JlYXRlcyBhIE1hcmtlcldpdGhMYWJlbCB3aXRoIHRoZSBvcHRpb25zIHNwZWNpZmllZCBpbiB7QGxpbmsgTWFya2VyV2l0aExhYmVsT3B0aW9uc30uXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7TWFya2VyV2l0aExhYmVsT3B0aW9uc30gW29wdE9wdGlvbnNdIFRoZSBvcHRpb25hbCBwYXJhbWV0ZXJzLlxuICovXG5mdW5jdGlvbiBNYXJrZXJXaXRoTGFiZWwob3B0T3B0aW9ucykge1xuICAgIG9wdE9wdGlvbnMgPSBvcHRPcHRpb25zIHx8IHt9O1xuICAgIG9wdE9wdGlvbnMubGFiZWxDb250ZW50ID0gb3B0T3B0aW9ucy5sYWJlbENvbnRlbnQgfHwgJyc7XG4gICAgb3B0T3B0aW9ucy5sYWJlbEFuY2hvciA9IG9wdE9wdGlvbnMubGFiZWxBbmNob3IgfHwgbmV3IGdvb2dsZS5tYXBzLlBvaW50KDAsIDApO1xuICAgIG9wdE9wdGlvbnMubGFiZWxDbGFzcyA9IG9wdE9wdGlvbnMubGFiZWxDbGFzcyB8fCAnbWFya2VyTGFiZWxzJztcbiAgICBvcHRPcHRpb25zLmxhYmVsU3R5bGUgPSBvcHRPcHRpb25zLmxhYmVsU3R5bGUgfHwge307XG4gICAgb3B0T3B0aW9ucy5sYWJlbEluQmFja2dyb3VuZCA9IG9wdE9wdGlvbnMubGFiZWxJbkJhY2tncm91bmQgfHwgZmFsc2U7XG4gICAgaWYgKHR5cGVvZiBvcHRPcHRpb25zLmxhYmVsVmlzaWJsZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgb3B0T3B0aW9ucy5sYWJlbFZpc2libGUgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG9wdE9wdGlvbnMucmFpc2VPbkRyYWcgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIG9wdE9wdGlvbnMucmFpc2VPbkRyYWcgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG9wdE9wdGlvbnMuY2xpY2thYmxlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICBvcHRPcHRpb25zLmNsaWNrYWJsZSA9IHRydWU7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygb3B0T3B0aW9ucy5kcmFnZ2FibGUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIG9wdE9wdGlvbnMuZHJhZ2dhYmxlID0gZmFsc2U7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygb3B0T3B0aW9ucy5vcHRpbWl6ZWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIG9wdE9wdGlvbnMub3B0aW1pemVkID0gZmFsc2U7XG4gICAgfVxuICAgIG9wdE9wdGlvbnMuY3Jvc3NJbWFnZSA9IG9wdE9wdGlvbnMuY3Jvc3NJbWFnZSB8fCAnaHR0cCcgKyAoZG9jdW1lbnQubG9jYXRpb24ucHJvdG9jb2wgPT09ICdodHRwczonID8gJ3MnIDogJycpICsgJzovL21hcHMuZ3N0YXRpYy5jb20vaW50bC9lbl91cy9tYXBmaWxlcy9kcmFnX2Nyb3NzXzY3XzE2LnBuZyc7XG4gICAgb3B0T3B0aW9ucy5oYW5kQ3Vyc29yID0gb3B0T3B0aW9ucy5oYW5kQ3Vyc29yIHx8ICdodHRwJyArIChkb2N1bWVudC5sb2NhdGlvbi5wcm90b2NvbCA9PT0gJ2h0dHBzOicgPyAncycgOiAnJykgKyAnOi8vbWFwcy5nc3RhdGljLmNvbS9pbnRsL2VuX3VzL21hcGZpbGVzL2Nsb3NlZGhhbmRfOF84LmN1cic7XG4gICAgb3B0T3B0aW9ucy5vcHRpbWl6ZWQgPSBmYWxzZTsgLy8gT3B0aW1pemVkIHJlbmRlcmluZyBpcyBub3Qgc3VwcG9ydGVkXG5cbiAgICB0aGlzLmxhYmVsID0gbmV3IE1hcmtlckxhYmVsXyh0aGlzLCBvcHRPcHRpb25zLmNyb3NzSW1hZ2UsIG9wdE9wdGlvbnMuaGFuZEN1cnNvcik7IC8vIEJpbmQgdGhlIGxhYmVsIHRvIHRoZSBtYXJrZXJcblxuICAgIC8vIENhbGwgdGhlIHBhcmVudCBjb25zdHJ1Y3Rvci4gSXQgY2FsbHMgTWFya2VyLnNldFZhbHVlcyB0byBpbml0aWFsaXplLCBzbyBhbGxcbiAgICAvLyB0aGUgbmV3IHBhcmFtZXRlcnMgYXJlIGNvbnZlbmllbnRseSBzYXZlZCBhbmQgY2FuIGJlIGFjY2Vzc2VkIHdpdGggZ2V0L3NldC5cbiAgICAvLyBNYXJrZXIuc2V0IHRyaWdnZXJzIGEgcHJvcGVydHkgY2hhbmdlZCBldmVudCAoY2FsbGVkICdwcm9wZXJ0eW5hbWVfY2hhbmdlZCcpXG4gICAgLy8gdGhhdCB0aGUgbWFya2VyIGxhYmVsIGxpc3RlbnMgZm9yIGluIG9yZGVyIHRvIHJlYWN0IHRvIHN0YXRlIGNoYW5nZXMuXG4gICAgZ29vZ2xlLm1hcHMuTWFya2VyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5pZiAodHlwZW9mIGdvb2dsZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBpbmhlcml0cyhNYXJrZXJXaXRoTGFiZWwsIGdvb2dsZS5tYXBzLk1hcmtlcik7XG59XG5cbi8qKlxuICogT3ZlcnJpZGVzIHRoZSBzdGFuZGFyZCBNYXJrZXIgc2V0TWFwIGZ1bmN0aW9uLlxuICogQHBhcmFtIHtNYXB9IHRoZU1hcCBUaGUgbWFwIHRvIHdoaWNoIHRoZSBtYXJrZXIgaXMgdG8gYmUgYWRkZWQuXG4gKiBAcHJpdmF0ZVxuICovXG5NYXJrZXJXaXRoTGFiZWwucHJvdG90eXBlLnNldE1hcCA9IGZ1bmN0aW9uICh0aGVNYXApIHtcblxuICAgIC8vIENhbGwgdGhlIGluaGVyaXRlZCBmdW5jdGlvbi4uLlxuICAgIGdvb2dsZS5tYXBzLk1hcmtlci5wcm90b3R5cGUuc2V0TWFwLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cbiAgICAvLyAuLi4gdGhlbiBkZWFsIHdpdGggdGhlIGxhYmVsOlxuICAgIHRoaXMubGFiZWwuc2V0TWFwKHRoZU1hcCk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IE1hcmtlcldpdGhMYWJlbDtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyICRtYWluID0gJCgnI21haW4nKSxcbiAgICAkZm9vdGVyID0gJCgnI2Zvb3Rlcm5ldycpLFxuICAgICRiYW5uZXIgPSAkKCcuYmFubmVyX3Byb3N0YWZmJyk7XG5cbnZhciBtZWdhbWVudSA9IHtcbiAgICBnbG9iYWxUaW1lcjogMCxcbiAgICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIG1lZ2FtZW51Lm1lZ2FtZW51RXZlbnQoKTtcbiAgICB9LFxuICAgIG9wZW46IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAvL3ZhciAkd2lkdGggPSAkKCcjYnJhbmQtdGFicy1oZWFkZXInKS53aWR0aCgpO1xuICAgICAgICAvLyBUbyBtYWtlIGRlZmF1bHQgbWVudSBiYXNlZCBvbiB0aGUgYnJhbmQgYWN0aXZlXG4gICAgICAgICQoJyNicmFuZC10YWJzLWhlYWRlciA+IHVsID4gbGkuYWN0aXZlIC5tb2JpbGUtbWFpbi1tZW51LWhlYWRpbmcnKS50cmlnZ2VyKCdjbGljaycpO1xuICAgICAgICAkKCcjY29udGFpbmVyJykuYWRkQ2xhc3MoJ2pzLWNvbnRhaW5lci1hY3RpdmUnKTtcbiAgICAgICAgJCgnLm1lbnUtdG9nZ2xlJykuYWRkQ2xhc3MoJ2pzLW1lbnUtdG9nZ2xlJyk7XG4gICAgICAgICQoJy5tZW51LW9wZW4tc2hhZG93JykucmVtb3ZlKCk7XG4gICAgICAgICRtYWluLndyYXAoJzxkaXYgY2xhc3M9XFwnb3Blbi1tZW51LXdyYXBcXCc+PC9kaXY+Jyk7XG4gICAgICAgICQoJ2JvZHknKS5hZGRDbGFzcygnanMtYm9keScpO1xuICAgICAgICAkKCcub3Blbi1tZW51LXdyYXAnKS5wcmVwZW5kKCRiYW5uZXIpO1xuICAgICAgICAkKCcub3Blbi1tZW51LXdyYXAnKS5hcHBlbmQoJGZvb3RlcikucHJlcGVuZCgnPGEgaHJlZj1cXCdqYXZhc2NyaXB0OnZvaWQoMCk7XFwnIGNsYXNzPVxcJ21lbnUtb3Blbi1zaGFkb3dcXCc+PC9hPicpO1xuICAgICAgICAvLyQoXCIjbWFpbiwgI2Zvb3Rlcm5ld1wiKS5wcmVwZW5kKFwiPGRpdiBjbGFzcz0nbWVudS1vcGVuLXNoYWRvdyc+PC9kaXY+XCIpXG4gICAgICAgICQoJyNjb250YWluZXIsIC5vcGVuLW1lbnUtd3JhcCcpLmFuaW1hdGUoe21hcmdpbkxlZnQ6ICcyODBweCd9LCAzMDApO1xuICAgICAgICAkKCcjYnJhbmQtdGFicy1oZWFkZXInKS53cmFwKCc8ZGl2IGNsYXNzPVxcJ2JyYW5kLWFjdGl2ZVxcJz48L2Rpdj4nKTtcbiAgICAgICAgJCgnLmJyYW5kLWFjdGl2ZScpLmFuaW1hdGUoe2xlZnQ6ICcwJ30sIDMwMCk7XG4gICAgICAgICQoJy5iYW5uZXJfcHJvc3RhZmYnKS5hbmltYXRlKHtsZWZ0OiAnMjgwcHgnfSwgMzAwKTtcbiAgICAgICAgJCgnLm93bC1jYXJvdXNlbCcpLmZpbmQoJy5vd2wtaXRlbSwgLm93bC1pdGVtIGltZycpLnRyaWdnZXIoJ21vdXNlZW50ZXInKTtcbiAgICB9LFxuICAgIGNsb3NlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJyNjb250YWluZXIsIC5vcGVuLW1lbnUtd3JhcCcpLmFuaW1hdGUoe21hcmdpbkxlZnQ6ICcwJ30sIDMwMCk7XG4gICAgICAgICQoJy5iYW5uZXJfcHJvc3RhZmYnKS5hbmltYXRlKHtsZWZ0OiAnMCd9LCAzMDApO1xuICAgICAgICAkKCcjY29udGFpbmVyJykucmVtb3ZlQ2xhc3MoJ2pzLWNvbnRhaW5lci1hY3RpdmUnKTtcbiAgICAgICAgJCgnYm9keScpLnJlbW92ZUNsYXNzKCdqcy1ib2R5Jyk7XG4gICAgICAgICQoJy5vd2wtY2Fyb3VzZWwnKS5maW5kKCcub3dsLWl0ZW0sIC5vd2wtaXRlbSBpbWcnKS50cmlnZ2VyKCdtb3VzZW91dCcpO1xuICAgICAgICAkKCcjbWFpbiwgI2Zvb3Rlcm5ldycpLnVud3JhcCgpO1xuICAgICAgICAkKCcubWFnbmlmaWVyLWljb24nKS5yZW1vdmVDbGFzcygnanMtbWFnbmlmaWVyLWljb24tYWN0aXZlJyk7XG4gICAgICAgICQoJy5tZW51LXRvZ2dsZScpLnJlbW92ZUNsYXNzKCdqcy1tZW51LXRvZ2dsZScpO1xuICAgICAgICAkKCcjYnJhbmQtdGFicy1oZWFkZXInKS51bndyYXAoKTtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKHdpbmRvdykuc2Nyb2xsVG9wKDApO1xuICAgICAgICB9LCAzMDApO1xuXG4gICAgfSxcbiAgICBtZWdhbWVudUV2ZW50OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8qIENsaWNrIGV2ZW50IGZvciBicmFuZHMgdG8gc2VlIHN1YiBtZW51cyBpbiBtb2JpbGUgKi9cbiAgICAgICAgJCgnI2JyYW5kLXRhYnMtaGVhZGVyID4gdWwgPiBsaSAubW9iaWxlLW1haW4tbWVudS1oZWFkaW5nJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA8PSA5NTkpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKS5jbG9zZXN0KCdsaScpO1xuICAgICAgICAgICAgICAgICR0aGlzLmNsb3Nlc3QoJ3VsJykuYWRkQ2xhc3MoJ2hpZGUtYWZ0ZXInKTtcbiAgICAgICAgICAgICAgICAkdGhpcy5zaWJsaW5ncygnbGknKS5yZW1vdmVDbGFzcygnanMtc3ViLW1lbnUtYWN0aXZlJykuYWRkQ2xhc3MoJ2pzLXN1Yi1tZW51LWluYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgJHRoaXMucmVtb3ZlQ2xhc3MoJ2pzLXN1Yi1tZW51LWluYWN0aXZlJykuYWRkQ2xhc3MoJ2pzLXN1Yi1tZW51LWFjdGl2ZScpO1xuICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoJy5tZWdhbWVudS1kcm9wJykuYW5pbWF0ZSh7J2xlZnQnOiBbMCwgJ2Vhc2VPdXRFeHBvJ119KTtcbiAgICAgICAgICAgICAgICAkdGhpcy5maW5kKCcuc2hvcC1yYXBhbGEnKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyICRjdXJPYmogPSAkKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoISRjdXJPYmouY2xvc2VzdCgnLnN1Yi1jYXRlZ29yeS1zZWN0aW9uLTEnKS5oYXNDbGFzcygnanMtYWN0aXZlLXN1Yi1tZW51JykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRjdXJPYmoubmV4dCgnLnN1Yi1jYXQtZHJvcC1kb3duJykudHJpZ2dlcignY2xpY2snKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoJy5tZW51bGlzdCAuc3ViLWNhdGVnb3J5LXNlY3Rpb24tMSA+IGEnKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1lbnVMaXN0ID0gJCh0aGlzKS5jbG9zZXN0KCcubWVudWxpc3QnKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1haW5Db250ZW50ID0gJCh0aGlzKS5jbG9zZXN0KCcuc3ViLWNhdGVnb3J5LXNlY3Rpb24tMScpO1xuICAgICAgICAgICAgICAgICAgICAkKG1haW5Db250ZW50KS5maW5kKCcuc3ViLWNhdC1kcm9wLWRvd24nKS5yZW1vdmVBdHRyKCdzdHlsZScpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYWNob3JXaWR0aCA9ICQodGhpcykud2lkdGgoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRyb3BEb3duV2lzdGggPSAkKG1lbnVMaXN0KS53aWR0aCgpIC0gYWNob3JXaWR0aDtcbiAgICAgICAgICAgICAgICAgICAgZHJvcERvd25XaXN0aCA9IGRyb3BEb3duV2lzdGggLSA3MDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRyb3BEb3duV2lzdGggPiAxNykge1xuICAgICAgICAgICAgICAgICAgICAgICAgJChtYWluQ29udGVudCkuZmluZCgnLnN1Yi1jYXQtZHJvcC1kb3duJykud2lkdGgoZHJvcERvd25XaXN0aCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLyogQ2xpY2sgZXZlbnQgZm9yIHRvIHNlZSBhbGwgdGhlIGJyYW5kcyBpbiBtb2JpbGUgKi9cbiAgICAgICAgJCgnYm9keScpLm9mZignY2xpY2snLCAnLnNlZS1hbGwtYnJhbmRzJykub24oJ2NsaWNrJywgJy5zZWUtYWxsLWJyYW5kcycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAvL3ZhciAkd2lkdGggPSAkKCcjYnJhbmQtdGFicy1oZWFkZXInKS53aWR0aCgpO1xuICAgICAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpIDw9IDk1OSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB2YXIgJHdpZHRoID0gJCgnI2JyYW5kLXRhYnMtaGVhZGVyJykud2lkdGgoKTtcbiAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpLmNsb3Nlc3QoJ2xpJyk7XG4gICAgICAgICAgICAgICAgJHRoaXMuZmluZCgnLm1lZ2FtZW51LWRyb3AnKS5hbmltYXRlKHsnbGVmdCc6IFskd2lkdGgsICdlYXNlT3V0RXhwbyddfSk7XG4gICAgICAgICAgICAgICAgJHRoaXMuc2libGluZ3MoJ2xpJykucmVtb3ZlQ2xhc3MoJ2pzLXN1Yi1tZW51LWluYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgJHRoaXMuY2xvc2VzdCgndWwnKS5yZW1vdmVDbGFzcygnaGlkZS1hZnRlcicpO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoJHRoaXMuZmluZCgnLm1lZ2FtZW51LWRyb3AnKS5wb3NpdGlvbigpLmxlZnQgPT0gJHdpZHRoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLnJlbW92ZUNsYXNzKCdqcy1zdWItbWVudS1hY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIDQwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8qIENsaWNrIGV2ZW50IGZvciBzdWIgbWVudSBkcm9wIGRvd24gaW4gbW9iaWxlICovXG4gICAgICAgICQoJ2JvZHknKS5vZmYoJ2NsaWNrJywgJy5zdWItY2F0ZWdvcnktc2VjdGlvbi0xIC5zdWItY2F0LWRyb3AtZG93bicpLm9uKCdjbGljaycsICcuc3ViLWNhdGVnb3J5LXNlY3Rpb24tMSAuc3ViLWNhdC1kcm9wLWRvd24nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpIDw9IDk1OSkge1xuICAgICAgICAgICAgICAgIGlmICghJCh0aGlzKS5oYXNDbGFzcygnbm8tY2xpY2snKSkge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcykuY2xvc2VzdCgnLnN1Yi1jYXRlZ29yeS1zZWN0aW9uLTEnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkdGhpcy5oYXNDbGFzcygnanMtYWN0aXZlLXN1Yi1tZW51JykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLmFkZENsYXNzKCdqcy1hY3RpdmUtc3ViLW1lbnUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoJy5zdWItY2F0ZWdvcnktc2VjdGlvbi0yJykucmVtb3ZlQXR0cignc3R5bGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoJy5zdWItY2F0ZWdvcnktc2VjdGlvbi0yJykuc2xpZGVEb3duKCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy5maW5kKCcuc3ViLWNhdGVnb3J5LXNlY3Rpb24tMicpLnNsaWRlVXAoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLmRlbGF5KDEwMDApLnJlbW92ZUNsYXNzKCdqcy1hY3RpdmUtc3ViLW1lbnUnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gbWFpbiBtZW51IHRvZ2dsZVxuICAgICAgICAkKCdib2R5Jykub2ZmKCdjbGljaycsICcubWVudS10b2dnbGUnKS5vbignY2xpY2snLCAnLm1lbnUtdG9nZ2xlJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA8PSA5NTkpIHtcbiAgICAgICAgICAgICAgICBpZiAoISQoJyNjb250YWluZXInKS5oYXNDbGFzcygnanMtY29udGFpbmVyLWFjdGl2ZScpKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lZ2FtZW51Lm9wZW4oKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtZWdhbWVudS5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgICQoJ2JvZHknKS5vZmYoJ3RvdWNoc3RhcnQgY2xpY2snLCAnYS5tZW51LW9wZW4tc2hhZG93Jykub24oJ3RvdWNoc3RhcnQgY2xpY2snLCAnYS5tZW51LW9wZW4tc2hhZG93JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA8PSA5NTkpIHtcbiAgICAgICAgICAgICAgICBpZiAoISQoJyNjb250YWluZXInKS5oYXNDbGFzcygnanMtY29udGFpbmVyLWFjdGl2ZScpKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lZ2FtZW51Lm9wZW4oKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtZWdhbWVudS5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgICQoJ2JvZHknKS5vZmYoJ2NsaWNrJywgJ2EubWFnbmlmaWVyLWljb24nKS5vbignY2xpY2snLCAnYS5tYWduaWZpZXItaWNvbicsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPD0gOTU5KSB7XG4gICAgICAgICAgICAgICAgLy92YXIgJHdpZHRoID0gJCgnI2JyYW5kLXRhYnMtaGVhZGVyJykud2lkdGgoKTtcbiAgICAgICAgICAgICAgICBpZiAoISQoJyNjb250YWluZXInKS5oYXNDbGFzcygnanMtY29udGFpbmVyLWFjdGl2ZScpKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJy5tYWduaWZpZXItaWNvbicpLmFkZENsYXNzKCdqcy1tYWduaWZpZXItaWNvbi1hY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgbWVnYW1lbnUub3BlbigpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoJCgnLm1hZ25pZmllci1pY29uJykuaGFzQ2xhc3MoJ2pzLW1hZ25pZmllci1pY29uLWFjdGl2ZScpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjY29udGFpbmVyJykuZmluZCgnLnNpbXBsZXNlYXJjaGlucHV0JykuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyoqIHNpbmdsZSBjbGljayByZWRpcmVjdGluZyBvZiBtZWdhbWVudSBjYXRlZ29yaWVzKi9cbiAgICAgICAgJCgnI2JyYW5kLXRhYnMtaGVhZGVyJykubW91c2VsZWF2ZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPiA5NTkpIHtcbiAgICAgICAgICAgICAgICAkKCcubWVnYW1lbnUtZHJvcCcpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAkKCcubWVnYW1lbnVkcm9wJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICQoJyNicmFuZC10YWJzLWhlYWRlciA+IHVsID4gbGkuYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2luYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgJCgnI2JyYW5kLXRhYnMtaGVhZGVyID4gdWwgPiBsaScpLnJlbW92ZUNsYXNzKCdjdXJyZW50Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoJy5icmFuZC10YWJzLWhlYWRlci1tYXNrJykubW91c2VlbnRlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPiA5NTkpIHtcbiAgICAgICAgICAgICAgICAkKCcubWVnYW1lbnUtZHJvcCcpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAkKCcubWVnYW1lbnVkcm9wJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICQoJyNicmFuZC10YWJzLWhlYWRlciA+IHVsID4gbGkuYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2luYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgJCgnI2JyYW5kLXRhYnMtaGVhZGVyID4gdWwgPiBsaScpLnJlbW92ZUNsYXNzKCdjdXJyZW50Jyk7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5oaWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgc3luY2hlaWdodDogZnVuY3Rpb24gKCRzZWwpIHtcbiAgICAgICAgdmFyIGN1cnJlbnQgPSAwO1xuICAgICAgICBpZiAoJCgkc2VsKS5oYXNDbGFzcygnbWVudWxpc3QnKSkge1xuICAgICAgICAgICAgJHNlbC5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5oZWlnaHQoKSA+IGN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudCA9ICQodGhpcykuaGVpZ2h0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkc2VsLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmhlaWdodCgpID4gY3VycmVudCkge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50ID0gJCh0aGlzKS5oZWlnaHQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAkc2VsLmhlaWdodChjdXJyZW50KTtcbiAgICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IG1lZ2FtZW51O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbCA9IHJlcXVpcmUoJy4vdXRpbCcpO1xuICAgIC8vYm9udXNQcm9kdWN0c1ZpZXcgPSByZXF1aXJlKCcuL2JvbnVzLXByb2R1Y3RzLXZpZXcnKTtcblxudmFyIHRpbWVyID0ge1xuICAgIGlkOiBudWxsLFxuICAgIGNsZWFyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmlkKSB7XG4gICAgICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuaWQpO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuaWQ7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHN0YXJ0OiBmdW5jdGlvbiAoZHVyYXRpb24sIGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuaWQgPSBzZXRUaW1lb3V0KGNhbGxiYWNrLCBkdXJhdGlvbik7XG4gICAgfVxufTtcblxudmFyIG1pbmljYXJ0ID0ge1xuICAgIHVybDogdXRpbC5hamF4VXJsKFVybHMuYWRkUHJvZHVjdCksXG4gICAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgICAgICBtaW5pY2FydC5yZXNldCgpO1xuICAgICAgICAkKCcuY2hlY2tvdXRtaW5pY2FydCcpLnNsaW1zY3JvbGwoKTtcbiAgICAgICAgdGhpcy4kZWwgPSAkKCcjbWluaWNhcnQnKTtcbiAgICAgICAgdGhpcy4kY29udGVudCA9IHRoaXMuJGVsLmZpbmQoJy5taW5pY2FydGNvbnRlbnQnKTtcbiAgICAgICAgalF1ZXJ5KCcubWluaWNhcnRpY29uLWNvbnQnKS5vbignbW91c2VvdmVyIHRvdWNoc3RhcnQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIW1pbmljYXJ0LmlzU2hvdygpKSB7XG4gICAgICAgICAgICAgICAgbWluaWNhcnQuaG92ZXJTbGlkZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJCgnLkN1c3RvbS10b29sdGlwLCAuY3ZjX3Rvb2x0aXAsIC5vcmRlcmdvdGhyb3VnaF90b29sdGlwJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCQoJy5yYXBhbGFfZGV2aWNlJykubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMpLnRvb2x0aXBzdGVyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGpRdWVyeSh0aGlzKS5maW5kKCcudG9vbHRpcGNvbnRhaW5lcicpLmh0bWwoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRBc0hUTUw6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhXaWR0aDogMzAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG91Y2hEZXZpY2VzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcjogJ2NsaWNrJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcykudG9vbHRpcHN0ZXIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogalF1ZXJ5KHRoaXMpLmZpbmQoJy50b29sdGlwY29udGFpbmVyJykuaHRtbCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudEFzSFRNTDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heFdpZHRoOiAzMDAsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3VjaERldmljZXM6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfSk7XG4gICAgICAgIC8vIHJlZ2lzdGVyIGNsb3NlIGJ1dHRvbiBldmVudFxuICAgICAgICAkKCcubWluaWNhcnRjb250ZW50IC5taW5pY2FydGNsb3NlJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gcmVzZXQgYWxsIHRoZSBldmVudHMgYmluZGluZ3NcbiAgICAgICAgICAgIG1pbmljYXJ0LnJlc2V0KCk7XG4gICAgICAgICAgICBtaW5pY2FydC5jbG9zZSgwKTtcbiAgICAgICAgICAgICQoJy5yYXBhbGFfZGV2aWNlIC5taW5pY2FydC1idXR0b24nKS5yZW1vdmVDbGFzcygnY2xpY2tlZCcpO1xuICAgICAgICB9KTtcbiAgICAgICAgJCgnLm1pbmljYXJ0Y29udGVudCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChtaW5pY2FydC50aW1lcik7XG4gICAgICAgICAgICBtaW5pY2FydC50aW1lciA9IG51bGw7XG4gICAgICAgIH0pO1xuICAgICAgICAkKCcubWluaWNhcnQnKS5tb3VzZWVudGVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIG1pbmljYXJ0LnNldG1pbmljYXJoZWlnaHQoKTtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChtaW5pY2FydC50aW1lcik7XG4gICAgICAgICAgICBtaW5pY2FydC50aW1lciA9IG51bGw7XG4gICAgICAgICAgICBpZiAoJCgnLm1pbmljYXJ0Y29udGVudCcpLmlzKCc6YW5pbWF0ZWQnKSkge1xuICAgICAgICAgICAgICAgICQoJy5taW5pY2FydGNvbnRlbnQnKS5zdG9wKCk7XG4gICAgICAgICAgICAgICAgJCgnLm1pbmljYXJ0Y29udGVudCcpLmNzcyh7J29wYWNpdHknOiAnMScsICdoZWlnaHQnOiAnYXV0byd9KTtcbiAgICAgICAgICAgICAgICBtaW5pY2FydC5pbml0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLm1vdXNlbGVhdmUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCgnLnJhcGFsYV9kZXZpY2UgLm1pbmljYXJ0LWJ1dHRvbicpLnJlbW92ZUNsYXNzKCdjbGlja2VkJyk7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQobWluaWNhcnQudGltZXIpO1xuICAgICAgICAgICAgbWluaWNhcnQudGltZXIgPSBudWxsO1xuICAgICAgICAgICAgLy8gYWZ0ZXIgYSB0aW1lIG91dCBhdXRvbWF0aWNhbGx5IGNsb3NlIGl0XG4gICAgICAgICAgICBtaW5pY2FydC50aW1lciA9IHNldFRpbWVvdXQoXG4gICAgICAgICAgICAgICAgJ21pbmljYXJ0LmNsb3NlKCknLCAzMCk7XG4gICAgICAgICAgICBtaW5pY2FydC5jbG9zZSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoJCgnLm1pbmktY2FydC1wcm9kdWN0JykubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgJCgnLm1pbmljYXJ0Y29udGVudCcpLnJlbW92ZUNsYXNzKCdsZXNzb25lJyk7XG4gICAgICAgICAgICAkKCcubWluaWNhcnRjb250ZW50IC5zbGltU2Nyb2xsRGl2JykucmVtb3ZlQ2xhc3MoJ2xlc3MnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoJy5taW5pY2FydGNvbnRlbnQnKS5hZGRDbGFzcygnbGVzc29uZScpO1xuICAgICAgICAgICAgJCgnLm1pbmljYXJ0Y29udGVudCAuc2xpbVNjcm9sbERpdicpLmFkZENsYXNzKCdsZXNzJyk7XG4gICAgICAgIH1cblxuICAgIH0sXG5cbiAgICAvLyByZXR1cm5zIGEgYm9vbGVhbiBpZiBhIG1pbmljYXJ0IGlzIHZpc2libGUvc2hvd24gb3IgaGlkZGVuXG4gICAgaXNTaG93OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBqUXVlcnkoJy5taW5pY2FydGNvbnRlbnQnKS5jc3MoJ2Rpc3BsYXknKSA9PSAnbm9uZScgPyBmYWxzZSA6IHRydWU7XG4gICAgfSxcblxuICAgIC8vIHJlc2V0IG1pbmljYXJ0XG4gICAgcmVzZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgalF1ZXJ5KCcubWluaWNhcnRpY29uLWNvbnQnKS51bmJpbmQoJ2hvdmVyJyk7XG4gICAgICAgIGpRdWVyeSgnLm1pbmljYXJ0JykudW5iaW5kKCdtb3VzZWVudGVyJykudW5iaW5kKFxuICAgICAgICAgICAgJ21vdXNlbGVhdmUnKTtcbiAgICB9LFxuXG4gICAgZW5hYmxlaG92ZXJlZmZlY3Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgalF1ZXJ5KCcubWluaWNhcnR0b3RhbCcpLm1vdXNlZW50ZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgbWluaWNhcnQuc2V0bWluaWNhcmhlaWdodCgpO1xuICAgICAgICAgICAgLy9jbGVhclRpbWVvdXQobWluaWNhcnQudGltZXIpO1xuICAgICAgICAgICAgLy9taW5pY2FydC50aW1lciA9IG51bGw7XG4gICAgICAgICAgICB0aW1lci5jbGVhcigpO1xuICAgICAgICAgICAgaWYgKCQoJy5taW5pY2FydGNvbnRlbnQnKS5pcygnOmFuaW1hdGVkJykpIHtcbiAgICAgICAgICAgICAgICAkKCcubWluaWNhcnRjb250ZW50Jykuc3RvcCgpO1xuICAgICAgICAgICAgICAgICQoJy5taW5pY2FydGNvbnRlbnQnKS5jc3MoeydvcGFjaXR5JzogJzEnLCAnaGVpZ2h0JzogJ2F1dG8nfSk7XG4gICAgICAgICAgICAgICAgbWluaWNhcnQuaW5pdCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuICAgICAgICBqUXVlcnkoJy5taW5pY2FydHRvdGFsJykubW91c2VsZWF2ZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBqUXVlcnkoJy5taW5pY2FydGNvbnRlbnQnKS5mYWRlT3V0KDEwMDApO1xuICAgICAgICAgICAgJCgnLnJhcGFsYV9kZXZpY2UgLm1pbmljYXJ0LWJ1dHRvbicpLnJlbW92ZUNsYXNzKCdjbGlja2VkJyk7XG5cbiAgICAgICAgfSk7XG5cbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBkZXNjcmlwdGlvbiBTaG93cyB0aGUgZ2l2ZW4gY29udGVudCBpbiB0aGUgbWluaSBjYXJ0XG4gICAgICogQHBhcmFtIHtTdHJpbmd9IEEgSFRNTCBzdHJpbmcgd2l0aCB0aGUgY29udGVudCB3aGljaCB3aWxsIGJlIHNob3duXG4gICAgICovXG4gICAgLy8gc2hvd3MgdGhlIGdpdmVuIGNvbnRlbnQgaW4gdGhlIG1pbmkgY2FydFxuICAgIHNob3c6IGZ1bmN0aW9uIChodG1sKSB7XG4gICAgICAgIGpRdWVyeSgnI21pbmljYXJ0JykuaHRtbChodG1sKTtcbiAgICAgICAgLy8gYmluZCBhbGwgdGhlIGV2ZW50c1xuICAgICAgICBtaW5pY2FydC5pbml0KCk7XG4gICAgICAgIGlmIChtaW5pY2FydC5zdXBwcmVzc1NsaWRlRG93biAmJiBtaW5pY2FydC5zdXBwcmVzc1NsaWRlRG93bigpKSB7XG4gICAgICAgICAgICAvLyBkbyBub3RoaW5nXG4gICAgICAgICAgICAvLyB0aGUgaG9vayAnTWluaUNhcnQuc3VwcHJlc3NTbGlkZURvd24oKScgc2hvdWxkIGhhdmUgZG9uZVxuICAgICAgICAgICAgLy8gdGhlIHJlZnJlc2hcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1pbmljYXJ0LnNsaWRlKCk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHNldG1pbmljYXJoZWlnaHQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNjcm9sbGhlaWdodCA9ICQoJy5taW5pLWNhcnQtcHJvZHVjdDplcSgwKScpLmhlaWdodCgpO1xuICAgICAgICBpZiAoJCgnLm1pbmktY2FydC1wcm9kdWN0JykubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgdmFyIHNjcm9sbGhlaWdodDIgPSAkKCcubWluaS1jYXJ0LXByb2R1Y3Q6ZXEoMSknKS5oZWlnaHQoKTtcbiAgICAgICAgICAgIHZhciBhdmdoZWlnaHQgPSAoc2Nyb2xsaGVpZ2h0ICsgc2Nyb2xsaGVpZ2h0MikgLyAyO1xuICAgICAgICAgICAgdmFyIG5ld3Njcm9sbGhlaWdodCA9ICgoYXZnaGVpZ2h0KSArIChhdmdoZWlnaHQgLSAoYXZnaGVpZ2h0IC8gNCkpKSArIDIwO1xuXG4gICAgICAgICAgICAkKCcuc2xpbVNjcm9sbERpdicpLmNzcygnaGVpZ2h0JywgbmV3c2Nyb2xsaGVpZ2h0ICsgJ3B4Jyk7XG4gICAgICAgICAgICAkKCcuY2hlY2tvdXRtaW5pY2FydCcpLmNzcygnaGVpZ2h0JywgbmV3c2Nyb2xsaGVpZ2h0ICsgJ3B4Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgaGVpZ2h0SW1nID0gJCgnLm1pbmlicmFuZGNvbHVtbicpLmZpbmQoJ2EnKS5oZWlnaHQoKTtcbiAgICAgICAgICAgIHZhciBoZWlnaHRJbWcxID0gJCgnLm1pbmlicmFuZGNvbHVtbicpLmZpbmQoJ2ltZycpLmhlaWdodCgpO1xuXG4gICAgICAgICAgICB3aGlsZSAoc2Nyb2xsaGVpZ2h0IDwgaGVpZ2h0SW1nICsgaGVpZ2h0SW1nMSkge1xuICAgICAgICAgICAgICAgIGhlaWdodEltZyA9ICQoJy5taW5pYnJhbmRjb2x1bW4nKS5maW5kKCdhJykuaGVpZ2h0KCk7XG4gICAgICAgICAgICAgICAgc2Nyb2xsaGVpZ2h0ID0gJCgnLnRyX3JvdGF0aW9uJykuaGVpZ2h0KCk7XG4gICAgICAgICAgICAgICAgJCgnLnNsaW1TY3JvbGxEaXYnKS5jc3MoJ2hlaWdodCcsIHNjcm9sbGhlaWdodCArICdweCcpO1xuXG4gICAgICAgICAgICAgICAgdmFyIHNjcm9sbGhlaWdodDEgPSAkKCcuY2hlY2tvdXRtaW5pY2FydCcpLmhlaWdodCgpO1xuICAgICAgICAgICAgICAgIGlmIChzY3JvbGxoZWlnaHQxID4gc2Nyb2xsaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgICQoJy5jaGVja291dG1pbmljYXJ0JykuY3NzKCdoZWlnaHQnLCBzY3JvbGxoZWlnaHQxICsgJ3B4Jyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmNoZWNrb3V0bWluaWNhcnQnKS5jc3MoJ2hlaWdodCcsIHNjcm9sbGhlaWdodCArICdweCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgLy8gaG9vayB3aGljaCBjYW4gYmUgcmVwbGFjZWQgYnkgaW5kaXZpZHVhbCBwYWdlcy9wYWdlIHR5cGVzIChlLmcuXG4gICAgLy8gY2FydClcbiAgICBzdXBwcmVzc1NsaWRlRG93bjogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAZGVzY3JpcHRpb24gU2xpZGVzIGRvd24gYW5kIHNob3cgdGhlIGNvbnRlbnRzIG9mIHRoZSBtaW5pIGNhcnRcbiAgICAgKi9cbiAgICBzbGlkZTogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aW1lci5jbGVhcigpO1xuICAgICAgICAvLyBzaG93IHRoZSBpdGVtXG4gICAgICAgIHRoaXMuJGNvbnRlbnQuc2xpZGVEb3duKCdzbG93Jyk7XG4gICAgICAgIC8vIGFmdGVyIGEgdGltZSBvdXQgYXV0b21hdGljYWxseSBjbG9zZSBpdFxuICAgICAgICB0aW1lci5zdGFydCg2MDAwLCB0aGlzLmNsb3NlLmJpbmQodGhpcykpO1xuXG4gICAgICAgIGlmIChtaW5pY2FydC5zdXBwcmVzc1NsaWRlRG93biAmJiBtaW5pY2FydC5zdXBwcmVzc1NsaWRlRG93bigpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmVnaXN0ZXIgY2xvc2UgYnV0dG9uIGV2ZW50XG4gICAgICAgIGpRdWVyeSgnLm1pbmljYXJ0Y29udGVudCAubWluaWNhcnRjbG9zZScpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIHJlc2V0IGFsbCB0aGUgZXZlbnRzIGJpbmRpbmdzXG4gICAgICAgICAgICBtaW5pY2FydC5yZXNldCgpO1xuICAgICAgICAgICAgbWluaWNhcnQuY2xvc2UoMCk7XG4gICAgICAgICAgICAkKCcucmFwYWxhX2RldmljZSAubWluaWNhcnQtYnV0dG9uJykucmVtb3ZlQ2xhc3MoJ2NsaWNrZWQnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy9SZW1vdmluZyBwYWRkaW5nIGZyb20gdGhlIGJhbm5lciBpZiBpdCBkb2Vzbm90IGNvbnRhaW5zIGRhdGEvaW1hZ2VcbiAgICAgICAgaWYgKCQoJy5zbG90X2Jhbm5lcicpLmZpbmQoJ2ltZycpLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAkKCcuc2xvdF9iYW5uZXInKS5jc3MoJ3BhZGRpbmcnLCAnMCAwIDBweCAwJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyByZWdpc3RlciB0aGUgbW91c2VvdXQgZXZlbnRzXG4gICAgICAgIGpRdWVyeSgnLm1pbmljYXJ0Y29udGVudCcpLm1vdXNlZW50ZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgbWluaWNhcnQuc2V0bWluaWNhcmhlaWdodCgpO1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KG1pbmljYXJ0LnRpbWVyKTtcbiAgICAgICAgICAgIG1pbmljYXJ0LnRpbWVyID0gbnVsbDtcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmlzKCc6YW5pbWF0ZWQnKSkge1xuICAgICAgICAgICAgICAgICQodGhpcykuc3RvcCgpO1xuICAgICAgICAgICAgICAgICQodGhpcykuY3NzKHsnb3BhY2l0eSc6ICcxJywgJ2hlaWdodCc6ICdhdXRvJ30pO1xuICAgICAgICAgICAgICAgIG1pbmljYXJ0LmluaXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgICQoJy5taW5pY2FydCcpLm1vdXNlbGVhdmUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCgnLnJhcGFsYV9kZXZpY2UgLm1pbmljYXJ0LWJ1dHRvbicpLnJlbW92ZUNsYXNzKCdjbGlja2VkJyk7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQobWluaWNhcnQudGltZXIpO1xuICAgICAgICAgICAgbWluaWNhcnQudGltZXIgPSBudWxsO1xuICAgICAgICAgICAgLy8gYWZ0ZXIgYSB0aW1lIG91dCBhdXRvbWF0aWNhbGx5IGNsb3NlIGl0XG4gICAgICAgICAgICBtaW5pY2FydC50aW1lciA9IHNldFRpbWVvdXQoXG4gICAgICAgICAgICAgICAgJ21pbmljYXJ0LmNsb3NlKCknLCAzMCk7XG4gICAgICAgICAgICBtaW5pY2FydC5pbml0KCk7XG4gICAgICAgICAgICBtaW5pY2FydC5jbG9zZSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBzaG93IHRoZSBpdGVtXG4gICAgICAgIGpRdWVyeSgnLm1pbmljYXJ0Y29udGVudCcpLnNsaWRlRG93bignMjAwMCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIG1pbmljYXJ0LnNldG1pbmljYXJoZWlnaHQoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIHNob3coXCJzbGlkZVwiLFxuICAgICAgICAvLyB7IGRpcmVjdGlvbjpcbiAgICAgICAgLy8gXCJ1cFwiIH0sXG4gICAgICAgIC8vIDEwMDApO1xuXG4gICAgICAgIC8vIGFkZCB0aGUgb3BlbiBjbGFzcyB0byB0aGUgdG90YWxcbiAgICAgICAgalF1ZXJ5KCcubWluaWNhcnQgLm1pbmljYXJ0dG90YWwnKS5hZGRDbGFzcygnb3BlbicpO1xuXG4gICAgICAgIGpRdWVyeSgnLnN1bW1hcnlwcm9kdWN0JykuZWFjaChcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSBqUXVlcnkodGhpcyk7XG4gICAgICAgICAgICAgICAgdmFyIGhlaWdodCA9ICcnO1xuICAgICAgICAgICAgICAgIGlmICgkdGhpcy5maW5kKCcuaW1hZ2VleHBhbmRlZCcpLmlzKCc6dmlzaWJsZScpKSB7XG4gICAgICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoJy5oaWRlb25jb2xsYXBzZScpLmhpZGUoKS5lbmQoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQoJy5hdHRyaWJ1dGUnKS5hZGRDbGFzcyhcbiAgICAgICAgICAgICAgICAgICAgICAgICdjb2xsYXBzZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0ID0gJCh0aGlzKS5maW5kKCcuYXR0cmlidXRlcycpLmhlaWdodCgpO1xuICAgICAgICAgICAgICAgICAgICBoZWlnaHQgKz0gJCh0aGlzKS5maW5kKCcubmFtZScpLmhlaWdodCgpO1xuICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcykuZmluZCgnLmltYWdlJykuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdtaW4taGVpZ2h0JzogaGVpZ2h0XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoJHRoaXMuZmluZCgnLmltYWdlY29sbGFwc2VkJykuaXMoJzp2aXNpYmxlJykpIHtcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0ID0gJCh0aGlzKS5maW5kKCcuYXR0cmlidXRlcycpLmhlaWdodCgpO1xuICAgICAgICAgICAgICAgICAgICBoZWlnaHQgKz0gJCh0aGlzKS5maW5kKCcubmFtZScpLmhlaWdodCgpICsgMzA7XG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzKS5maW5kKCcuaW1hZ2UnKS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgJ21pbi1oZWlnaHQnOiBoZWlnaHRcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgY2xlYXJUaW1lb3V0KG1pbmljYXJ0LnRpbWVyKTtcbiAgICAgICAgbWluaWNhcnQudGltZXIgPSBudWxsO1xuXG4gICAgICAgIC8vIGFmdGVyIGEgdGltZSBvdXQgYXV0b21hdGljYWxseSBjbG9zZSBpdFxuICAgICAgICBtaW5pY2FydC50aW1lciA9IHNldFRpbWVvdXQoJ21pbmljYXJ0LmNsb3NlKCknLCAxMDAwKTtcblxuICAgICAgICAvLyBHb29nbGUgQW5hbHl0aWNzIGNvZGUgdG8gdHJhY2sgbWluaSBjYXJ0IG9wZW4uXG4gICAgICAgIGlmIChpc0V2ZW50VHJhY2tpbmdFbmFibGVkICYmIGlzR29vZ2xlQW5hbHl0aWNzRW5hYmxlZCkge1xuICAgICAgICAgICAgZ29vZ2xlQW5hbHl0aWNzRXZlbnRzLm1pbmlDYXJ0KCk7XG4gICAgICAgIH1cblxuICAgIH0sXG4gICAgaG92ZXJTbGlkZTogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAobWluaWNhcnQuc3VwcHJlc3NTbGlkZURvd24gJiYgbWluaWNhcnQuc3VwcHJlc3NTbGlkZURvd24oKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIHJlZ2lzdGVyIGNsb3NlIGJ1dHRvbiBldmVudFxuICAgICAgICBqUXVlcnkoJy5taW5pY2FydGNvbnRlbnQgLm1pbmljYXJ0Y2xvc2UnKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyByZXNldCBhbGwgdGhlIGV2ZW50cyBiaW5kaW5nc1xuICAgICAgICAgICAgbWluaWNhcnQucmVzZXQoKTtcbiAgICAgICAgICAgIG1pbmljYXJ0LmNsb3NlKDApO1xuICAgICAgICAgICAgJCgnLnJhcGFsYV9kZXZpY2UgLm1pbmljYXJ0LWJ1dHRvbicpLnJlbW92ZUNsYXNzKCdjbGlja2VkJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vUmVtb3ZpbmcgcGFkZGluZyBmcm9tIHRoZSBiYW5uZXIgaWYgaXQgZG9lc25vdCBjb250YWlucyBkYXRhL2ltYWdlXG4gICAgICAgIGlmICgkKCcuc2xvdF9iYW5uZXInKS5maW5kKCdpbWcnKS5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgJCgnLnNsb3RfYmFubmVyJykuY3NzKCdwYWRkaW5nJywgJzAgMCAwcHggMCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcmVnaXN0ZXIgdGhlIG1vdXNlb3V0IGV2ZW50c1xuICAgICAgICBqUXVlcnkoJy5taW5pY2FydGNvbnRlbnQnKS5tb3VzZWVudGVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIG1pbmljYXJ0LnNldG1pbmljYXJoZWlnaHQoKTtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChtaW5pY2FydC50aW1lcik7XG4gICAgICAgICAgICBtaW5pY2FydC50aW1lciA9IG51bGw7XG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5pcygnOmFuaW1hdGVkJykpIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnN0b3AoKTtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcyh7J29wYWNpdHknOiAnMScsICdoZWlnaHQnOiAnYXV0byd9KTtcbiAgICAgICAgICAgICAgICBtaW5pY2FydC5pbml0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAkKCcubWluaWNhcnQnKS5tb3VzZWxlYXZlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQoJy5yYXBhbGFfZGV2aWNlIC5taW5pY2FydC1idXR0b24nKS5yZW1vdmVDbGFzcygnY2xpY2tlZCcpO1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KG1pbmljYXJ0LnRpbWVyKTtcbiAgICAgICAgICAgIG1pbmljYXJ0LnRpbWVyID0gbnVsbDtcbiAgICAgICAgICAgIC8vIGFmdGVyIGEgdGltZSBvdXQgYXV0b21hdGljYWxseSBjbG9zZSBpdFxuICAgICAgICAgICAgbWluaWNhcnQudGltZXIgPSBzZXRUaW1lb3V0KFxuICAgICAgICAgICAgICAgICdtaW5pY2FydC5jbG9zZSgpJywgMzApO1xuICAgICAgICAgICAgbWluaWNhcnQuY2xvc2UoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gc2hvdyB0aGUgaXRlbVxuICAgICAgICBqUXVlcnkoJy5taW5pY2FydGNvbnRlbnQnKS5zbGlkZURvd24oJzIwMDAnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBtaW5pY2FydC5zZXRtaW5pY2FyaGVpZ2h0KCk7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBzaG93KFwic2xpZGVcIixcbiAgICAgICAgLy8geyBkaXJlY3Rpb246XG4gICAgICAgIC8vIFwidXBcIiB9LFxuICAgICAgICAvLyAxMDAwKTtcblxuICAgICAgICAvLyBhZGQgdGhlIG9wZW4gY2xhc3MgdG8gdGhlIHRvdGFsXG4gICAgICAgIGpRdWVyeSgnLm1pbmljYXJ0IC5taW5pY2FydHRvdGFsJykuYWRkQ2xhc3MoJ29wZW4nKTtcblxuICAgICAgICBqUXVlcnkoJy5zdW1tYXJ5cHJvZHVjdCcpLmVhY2goXG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyICR0aGlzID0galF1ZXJ5KHRoaXMpO1xuICAgICAgICAgICAgICAgIHZhciBoZWlnaHQgPSAnJztcbiAgICAgICAgICAgICAgICBpZiAoJHRoaXMuZmluZCgnLmltYWdlZXhwYW5kZWQnKS5pcygnOnZpc2libGUnKSkge1xuICAgICAgICAgICAgICAgICAgICAkdGhpcy5maW5kKCcuaGlkZW9uY29sbGFwc2UnKS5oaWRlKCkuZW5kKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKCcuYXR0cmlidXRlJykuYWRkQ2xhc3MoXG4gICAgICAgICAgICAgICAgICAgICAgICAnY29sbGFwc2VkJyk7XG4gICAgICAgICAgICAgICAgICAgIGhlaWdodCA9ICQodGhpcykuZmluZCgnLmF0dHJpYnV0ZXMnKS5oZWlnaHQoKTtcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0ICs9ICQodGhpcykuZmluZCgnLm5hbWUnKS5oZWlnaHQoKTtcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMpLmZpbmQoJy5pbWFnZScpLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAnbWluLWhlaWdodCc6IGhlaWdodFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCR0aGlzLmZpbmQoJy5pbWFnZWNvbGxhcHNlZCcpLmlzKCc6dmlzaWJsZScpKSB7XG4gICAgICAgICAgICAgICAgICAgIGhlaWdodCA9ICQodGhpcykuZmluZCgnLmF0dHJpYnV0ZXMnKS5oZWlnaHQoKTtcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0ICs9ICQodGhpcykuZmluZCgnLm5hbWUnKS5oZWlnaHQoKSArIDMwO1xuICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcykuZmluZCgnLmltYWdlJykuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdtaW4taGVpZ2h0JzogaGVpZ2h0XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEdvb2dsZSBBbmFseXRpY3MgY29kZSB0byB0cmFjayBtaW5pIGNhcnQgb3Blbi5cbiAgICAgICAgaWYgKGlzRXZlbnRUcmFja2luZ0VuYWJsZWQgJiYgaXNHb29nbGVBbmFseXRpY3NFbmFibGVkKSB7XG4gICAgICAgICAgICBnb29nbGVBbmFseXRpY3NFdmVudHMubWluaUNhcnQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGpRdWVyeSgnLm1pbmljYXJ0dG90YWwnKS5hZGRDbGFzcygnZW5hYmxlaG92ZXInKTtcbiAgICAgICAgbWluaWNhcnQuZW5hYmxlaG92ZXJlZmZlY3QoKTtcblxuICAgICAgICAkKCcjbWFpbiAsICNoZWFkZXIgLCAjZm9vdGVybmV3LCAjZm9vdGVybmV3IC5yb3cnKS51bmJpbmQoJ3RvdWNoc3RhcnQnKS5iaW5kKCd0b3VjaHN0YXJ0JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICgkKCcubWluaWNhcnRjb250ZW50JykuaXMoJzp2aXNpYmxlJykpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudExpbmtMZW5ndGggPSAkKGUudGFyZ2V0KS5jbG9zZXN0KCcubWluaWNhcnRjb250ZW50JykubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHZhciBtaW5pY2FydHRvdGFsID0gJChlLnRhcmdldCkuY2xvc2VzdCgnLm1pbmljYXJ0LWJ1dHRvbicpLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudExpbmtMZW5ndGggPT09IDAgJiYgbWluaWNhcnR0b3RhbCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQobWluaWNhcnQudGltZXIpO1xuICAgICAgICAgICAgICAgICAgICBtaW5pY2FydC50aW1lciA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIC8vIGFmdGVyIGEgdGltZSBvdXQgYXV0b21hdGljYWxseSBjbG9zZSBpdFxuICAgICAgICAgICAgICAgICAgICBtaW5pY2FydC50aW1lciA9IHNldFRpbWVvdXQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnbWluaWNhcnQuY2xvc2UoKScsIDMwKTtcbiAgICAgICAgICAgICAgICAgICAgbWluaWNhcnQucmVzZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgbWluaWNhcnQuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgbWluaWNhcnQuaW5pdCgpO1xuICAgICAgICAgICAgICAgICAgICAkKCcucmFwYWxhX2RldmljZSAubWluaWNhcnQtYnV0dG9uJykucmVtb3ZlQ2xhc3MoJ2NsaWNrZWQnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1pbmljYXJ0dG90YWwgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJy5yYXBhbGFfZGV2aWNlIC5taW5pY2FydC1idXR0b24nKS50cmlnZ2VyKCdjbGljaycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9KTtcbiAgICB9LFxuICAgIC8vIGFkZHMgYSBwcm9kdWN0IHRvIHRoZSBtaW5pIGNhcnRcbiAgICAvLyBAcGFyYW1zXG4gICAgLy8gcHJvZ3Jlc3NJbWFnZVNyYyAtIHNvdXJjZS91cmwgb2YgdGhlIGltYWdlIHRvIHNob3cgd2hlbiB0aGUgaXRlbVxuICAgIC8vIGlzIGJlaW5nIGFkZGVkIHRvIHRoZSBjYXJ0XG4gICAgLy8gcG9zdGRhdGEgLSBmb3JtIGRhdGEgY29udGFpbmluZyB0aGUgcHJvZHVjdCBpbmZvcm1hdGlvbiB0byBiZVxuICAgIC8vIGFkZGVkIHRvIG1pbmktY2FydFxuICAgIC8vIGNhbGxiYWNrIC0gY2FsbCBiYWNrIGZ1bmN0aW9uL2hhbmRsZXJcbiAgICBhZGQ6IGZ1bmN0aW9uIChwcm9ncmVzc0ltYWdlU3JjLCBwb3N0ZGF0YSwgY2FsbGJhY2spIHtcbiAgICAgICAgLy8gZ2V0IHRoZSBkYXRhIG9mIHRoZSBmb3JtIGFzIHNlcmlhbGl6ZWQgc3RyaW5nXG4gICAgICAgIC8vdmFyIHBvc3RkYXRhID0gcG9zdGRhdGE7XG5cbiAgICAgICAgLy8gZ2V0IGJ1dHRvbiByZWZlcmVuY2VcbiAgICAgICAgdmFyIGFkZEJ1dHRvbnMgPSBbXTtcblxuICAgICAgICAvLyB0aGUgYnV0dG9uIHRvIHVwZGF0ZVxuICAgICAgICB2YXIgYWRkQnV0dG9uID0gbnVsbDtcblxuICAgICAgICAvLyBpdCBpcyBhbiBhcnJheSBvZiBidXR0b25zLCBidXQgd2UgbmVlZCBvbmx5IG9uZSBhbGxcbiAgICAgICAgLy8gb3RoZXIgY29tYmluYXRpb25zIGFyZSBzdHJhbmdlIHNvIGZhclxuICAgICAgICBpZiAoYWRkQnV0dG9ucy5sZW5ndGggPT0gMSkge1xuICAgICAgICAgICAgYWRkQnV0dG9uID0gYWRkQnV0dG9uc1swXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBwcmV2aW91c0ltYWdlU3JjID0gbnVsbDtcblxuICAgICAgICAvLyBzaG93IHByb2dyZXNzIGluZGljYXRvclxuICAgICAgICBpZiAoYWRkQnV0dG9uICE9IG51bGwpIHtcbiAgICAgICAgICAgIHByZXZpb3VzSW1hZ2VTcmMgPSBhZGRCdXR0b24uc3JjO1xuICAgICAgICAgICAgYWRkQnV0dG9uLnNyYyA9IHByb2dyZXNzSW1hZ2VTcmM7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBoYW5kbGVzIHN1Y2Nlc3NmdWwgYWRkIHRvIGNhcnRcbiAgICAgICAgdmFyIGhhbmRsZXJGdW5jID0gZnVuY3Rpb24gKHJlcSkge1xuICAgICAgICAgICAgLy8gaGlkZSBwcm9ncmVzcyBpbmRpY2F0b3JcbiAgICAgICAgICAgIGlmIChhZGRCdXR0b24gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGFkZEJ1dHRvbi5zcmMgPSBwcmV2aW91c0ltYWdlU3JjO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyByZXBsYWNlIHRoZSBjb250ZW50XG4gICAgICAgICAgICBqUXVlcnkoJyNtaW5pY2FydCcpLmh0bWwocmVxKTtcblxuICAgICAgICAgICAgLy8gYmluZCBhbGwgdGhlIGV2ZW50c1xuICAgICAgICAgICAgbWluaWNhcnQuaW5pdCgpO1xuICAgICAgICAgICAgaWYgKCQoJy5taW5pLWNhcnQtcHJvZHVjdCcpLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAkKCcuY2hlY2tvdXRtaW5pY2FydCcpLnNsaW1zY3JvbGwoe1xuICAgICAgICAgICAgICAgICAgICByYWlsVmlzaWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgYWx3YXlzVmlzaWJsZTogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICQoJy5taW5pY2FydHRhYmxlJykuZmluZCgndGhlYWQnKS5maXJzdCgpLmFkZENsYXNzKCd0aGVhZGZpeGVkVG9wJyk7XG4gICAgICAgICAgICAgICAgJCgnLmNoZWNrb3V0bWluaWNhcnQnKS5maW5kKCcuY2FydG9yZGVydG90YWxzJykucmVtb3ZlQ2xhc3MoJ2NhcnR0b3RhbHMnKTtcbiAgICAgICAgICAgICAgICAkKCcuY2hlY2tvdXRtaW5pY2FydCcpLmZpbmQoJy5taW5pY2FydHRhYmxlJykucmVtb3ZlQ2xhc3MoJ21pbml3aXRob3V0U2Nyb2xsJyk7XG4gICAgICAgICAgICAgICAgJCgnLm1pbmljYXJ0Y29udGVudCcpLmZpbmQoJy5taW5pY2FydHRhYmxlaGVhZGVyJykucmVtb3ZlQ2xhc3MoJ21pbml3aXRob3V0U2Nyb2xsaGVhZCcpO1xuICAgICAgICAgICAgICAgICQoJy5taW5pY2FydHRhYmxlaGVhZGVyJykuY3NzKCdib3JkZXItYm90dG9tJywgJzFweCBzb2xpZCAjY2NjJyk7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJCgnLm1pbmljYXJ0dGFibGUnKS5maW5kKCcudGhlYWRmaXhlZFRvcCcpLnJlbW92ZUNsYXNzKCd0aGVhZGZpeGVkVG9wJyk7XG4gICAgICAgICAgICAgICAgJCgnLm1pbmljYXJ0dGFibGUnKS5maW5kKCcuZml4ZWRUb3AnKS5yZW1vdmVDbGFzcygnZml4ZWRUb3AnKTtcbiAgICAgICAgICAgICAgICAkKCcubWluaWNhcnQnKS5maW5kKCcuY2FydG9yZGVydG90YWxzJykuYWRkQ2xhc3MoJ2NhcnR0b3RhbHMnKTtcbiAgICAgICAgICAgICAgICAkKCcuY2hlY2tvdXRtaW5pY2FydCcpLmZpbmQoJy5taW5pY2FydHRhYmxlJykuYWRkQ2xhc3MoJ21pbml3aXRob3V0U2Nyb2xsJyk7XG4gICAgICAgICAgICAgICAgJCgnLm1pbmljYXJ0Y29udGVudCcpLmZpbmQoJy5taW5pY2FydHRhYmxlaGVhZGVyJykuYWRkQ2xhc3MoJ21pbml3aXRob3V0U2Nyb2xsaGVhZCcpO1xuICAgICAgICAgICAgICAgICQoJy5taW5pY2FydHRhYmxlaGVhZGVyJykuY3NzKCdib3JkZXItYm90dG9tJywgJzFweCBzb2xpZCAjY2NjJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkKCcubWluaWNhcnR0YWJsZSAubWluaS1jYXJ0LXByb2R1Y3Q6bGFzdC1jaGlsZCcpLmZpbmQoJy5taW5pLWNhcnQtcHJvZHVjdCcpLmNzcygnYm9yZGVyJywgJzBweCcpO1xuXG4gICAgICAgICAgICBpZiAoJCgnYm9keScpLmhhc0NsYXNzKCdyYXBhbGFfZGV2aWNlJykpIHtcbiAgICAgICAgICAgICAgICAkKCcuY2hlY2tvdXRtaW5pY2FydCcpLmZpbmQoJy5taW5pY2FydHRhYmxlJykucmVtb3ZlQ2xhc3MoJ21pbml3aXRob3V0U2Nyb2xsJyk7XG4gICAgICAgICAgICAgICAgLy8gJChcIi5taW5pY2FydHRhYmxlIC50cl9yb3RhdGlvbjpsYXN0LWNoaWxkXCIpLmZpbmQoJy5taW5pcm93JykuY3NzKCdib3JkZXInLCcxcHgnKTtcbiAgICAgICAgICAgICAgICAkKCcubWluaWNhcnR0YWJsZScpLmZpbmQoJ3RoZWFkJykuZmlyc3QoKS5hZGRDbGFzcygndGhlYWRmaXhlZFRvcCcpO1xuICAgICAgICAgICAgICAgICQoJy5taW5pY2FydHRhYmxlIC5taW5pLWNhcnQtcHJvZHVjdDpsYXN0LWNoaWxkJykuZmluZCgnLm1pbmktY2FydC1wcm9kdWN0JykuY3NzKCdib3JkZXInLCAnMHB4Jyk7XG4gICAgICAgICAgICAgICAgJCgnLm1pbmljYXJ0dGFibGVoZWFkZXInKS5jc3MoJ2JvcmRlci1ib3R0b20nLCAnMXB4IHNvbGlkICNjY2MnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG1pbmljYXJ0LnN1cHByZXNzU2xpZGVEb3duICYmIG1pbmljYXJ0LnN1cHByZXNzU2xpZGVEb3duKCkpIHtcbiAgICAgICAgICAgICAgICAvLyBkbyBub3RoaW5nXG4gICAgICAgICAgICAgICAgLy8gdGhlIGhvb2sgJ01pbmlDYXJ0LnN1cHByZXNzU2xpZGVEb3duKCknIHNob3VsZCBoYXZlXG4gICAgICAgICAgICAgICAgLy8gZG9uZSB0aGUgcmVmcmVzaFxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBtaW5pY2FydC5zbGlkZSgpO1xuICAgICAgICAgICAgICAgIG1pbmljYXJ0LnNldG1pbmljYXJoZWlnaHQoKTtcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkKCcjcGRwTWFpbiAuYWRkdG9jYXJ0Y29uZmlybS10b29sdGlwJykuZmFkZUluKDQwMCkuc2hvdygpXG4gICAgICAgICAgICAgICAgLmRlbGF5KDE1MDApLmZhZGVPdXQoNDAwKTtcbiAgICAgICAgICAgIC8vIGZpcmUgdGhlIEJvbnVzRGlzY291bnRMaW5lSXRlbUNoZWNrIGV2ZW50IHNvIHdlIGNhbiBjaGVja1xuICAgICAgICAgICAgLy8gaWYgdGhlcmUgaXMgYSBib251cyBkaXNjb3VudCBsaW5lIGl0ZW1cbiAgICAgICAgICAgIGpRdWVyeShkb2N1bWVudCkudHJpZ2dlcihqUXVlcnkuRXZlbnQoJ0JvbnVzRGlzY291bnRMaW5lSXRlbUNoZWNrJykpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIGhhbmRsZXMgYWRkIHRvIGNhcnQgZXJyb3JcbiAgICAgICAgdmFyIGVyckZ1bmMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBoaWRlIHByb2dyZXNzIGluZGljYXRvclxuICAgICAgICAgICAgaWYgKGFkZEJ1dHRvbiAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgYWRkQnV0dG9uLnNyYyA9IHByZXZpb3VzSW1hZ2VTcmM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gY2xvc2VzIGEgcHJldmlvdXMgbWluaSBjYXJ0XG4gICAgICAgIG1pbmljYXJ0LmNsb3NlKCk7XG5cbiAgICAgICAgLy8gYWRkIHRoZSBwcm9kdWN0XG4gICAgICAgIGpRdWVyeS5hamF4KHtcbiAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgIHVybDogbWluaWNhcnQudXJsLFxuICAgICAgICAgICAgY2FjaGU6IHRydWUsXG4gICAgICAgICAgICBkYXRhOiBwb3N0ZGF0YSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGhhbmRsZXJGdW5jLFxuICAgICAgICAgICAgZXJyb3I6IGVyckZ1bmNcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIC8vIGNsb3NlcyB0aGUgbWluaSBjYXJ0IHdpdGggZ2l2ZW4gZGVsYXlcbiAgICBjbG9zZTogZnVuY3Rpb24gKGRlbGF5KSB7XG4gICAgICAgIGlmIChtaW5pY2FydC50aW1lciAhPSBudWxsIHx8IGRlbGF5ID09IDApIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChtaW5pY2FydC50aW1lcik7XG4gICAgICAgICAgICBtaW5pY2FydC50aW1lciA9IG51bGw7XG4gICAgICAgICAgICBqUXVlcnkoJy5taW5pY2FydGNvbnRlbnQnKS5mYWRlT3V0KDEwMDApO1xuICAgICAgICAgICAgLy8gaGlkZSB3aXRoIFwic2xpZGVcIiBjYXVzZXMgdG8gZmlyZSBtb3VzZSBlbnRlci9sZWF2ZSBldmVudHNcbiAgICAgICAgICAgIC8vIHNvbWV0aW1lcyBpbmZpbml0ZWx5IHRodXMgY2hhbmdlZCBpdCB0byBmYWRlT3V0XG4gICAgICAgICAgICAvLyBhZGQgdGhlIG9wZW4gY2xhc3MgdG8gdGhlIHRvdGFsXG4gICAgICAgICAgICBqUXVlcnkoJy5taW5pY2FydCAubWluaWNhcnR0b3RhbCcpLnJlbW92ZUNsYXNzKCdvcGVuJyk7XG4gICAgICAgICAgICBqUXVlcnkoJy5taW5pY2FydGNvbnRlbnQgLm1pbmljYXJ0Y2xvc2UnKS51bmJpbmQoJ2NsaWNrJyk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IG1pbmljYXJ0O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbCA9IHJlcXVpcmUoJy4vdXRpbCcpO1xuXG52YXIgcGFnZSA9IHtcbiAgICB0aXRsZTogJycsXG4gICAgdHlwZTogJycsXG4gICAgcGFyYW1zOiB1dGlsLmdldFF1ZXJ5U3RyaW5nUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guc3Vic3RyKDEpKSxcbiAgICByZWRpcmVjdDogZnVuY3Rpb24gKG5ld1VSTCkge1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gbmV3VVJMO1xuICAgICAgICB9LCAwKTtcbiAgICB9LFxuICAgIHJlZnJlc2g6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uYXNzaWduKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcbiAgICAgICAgfSwgNTAwKTtcbiAgICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHBhZ2U7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBnaWZ0Y2VydCA9IHJlcXVpcmUoJy4uL2dpZnRjZXJ0JyksXG4gICAgdG9vbHRpcCA9IHJlcXVpcmUoJy4uL3Rvb2x0aXAnKSxcbiAgICB1dGlsID0gcmVxdWlyZSgnLi4vdXRpbCcpLFxuICAgIGRpYWxvZyA9IHJlcXVpcmUoJy4uL2RpYWxvZycpLFxuICAgIHBhZ2UgPSByZXF1aXJlKCcuLi9wYWdlJyksXG4gICAgdmFsaWRhdG9yID0gcmVxdWlyZSgnLi4vdmFsaWRhdG9yJyk7XG5cbi8qKlxuICogQGZ1bmN0aW9uXG4gKiBAZGVzY3JpcHRpb24gSW5pdGlhbGl6ZXMgdGhlIGV2ZW50cyBvbiB0aGUgYWRkcmVzcyBmb3JtIChhcHBseSwgY2FuY2VsLCBkZWxldGUpXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGZvcm0gVGhlIGZvcm0gd2hpY2ggd2lsbCBiZSBpbml0aWFsaXplZFxuICovXG5mdW5jdGlvbiBpbml0aWFsaXplQWRkcmVzc0Zvcm0oKSB7XG4gICAgdmFyICRmb3JtID0gJCgnI2VkaXQtYWRkcmVzcy1mb3JtJyk7XG5cbiAgICAkZm9ybS5maW5kKCdpbnB1dFtuYW1lPVwiZm9ybWF0XCJdJykucmVtb3ZlKCk7XG4gICAgdG9vbHRpcC5pbml0KCk7XG4gICAgLy8kKFwiPGlucHV0Lz5cIikuYXR0cih7dHlwZTpcImhpZGRlblwiLCBuYW1lOlwiZm9ybWF0XCIsIHZhbHVlOlwiYWpheFwifSkuYXBwZW5kVG8oZm9ybSk7XG5cbiAgICAkZm9ybS5vbignY2xpY2snLCAnLmFwcGx5LWJ1dHRvbicsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYgKCEkZm9ybS52YWxpZCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHVybCA9IHV0aWwuYXBwZW5kUGFyYW1Ub1VSTCgkZm9ybS5hdHRyKCdhY3Rpb24nKSwgJ2Zvcm1hdCcsICdhamF4Jyk7XG4gICAgICAgIHZhciBhcHBseU5hbWUgPSAkZm9ybS5maW5kKCcuYXBwbHktYnV0dG9uJykuYXR0cignbmFtZScpO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIHVybDogdXJsLFxuICAgICAgICAgICAgZGF0YTogJGZvcm0uc2VyaWFsaXplKCkgKyAnJicgKyBhcHBseU5hbWUgKyAnPXgnLFxuICAgICAgICAgICAgdHlwZTogJ1BPU1QnXG4gICAgICAgIH07XG4gICAgICAgICQuYWpheChvcHRpb25zKS5kb25lKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mKGRhdGEpICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIGlmIChkYXRhLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgZGlhbG9nLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIHBhZ2UucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5hbGVydChkYXRhLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKCcjZGlhbG9nLWNvbnRhaW5lcicpLmh0bWwoZGF0YSk7XG4gICAgICAgICAgICAgICAgYWNjb3VudC5pbml0KCk7XG4gICAgICAgICAgICAgICAgdG9vbHRpcC5pbml0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pXG4gICAgICAgIC5vbignY2xpY2snLCAnLmNhbmNlbC1idXR0b24sIC5jbG9zZS1idXR0b24nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZGlhbG9nLmNsb3NlKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5vbignY2xpY2snLCAnLmRlbGV0ZS1idXR0b24nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgaWYgKHdpbmRvdy5jb25maXJtKFN0cmluZy5mb3JtYXQoUmVzb3VyY2VzLkNPTkZJUk1fREVMRVRFLCBSZXNvdXJjZXMuVElUTEVfQUREUkVTUykpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHVybCA9IHV0aWwuYXBwZW5kUGFyYW1zVG9VcmwoVXJscy5kZWxldGVBZGRyZXNzLCB7XG4gICAgICAgICAgICAgICAgICAgIEFkZHJlc3NJRDogJGZvcm0uZmluZCgnI2FkZHJlc3NpZCcpLnZhbCgpLFxuICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6ICdhamF4J1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgICAgIHVybDogdXJsLFxuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJ1xuICAgICAgICAgICAgICAgIH0pLmRvbmUoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuc3RhdHVzLnRvTG93ZXJDYXNlKCkgPT09ICdvaycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpYWxvZy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFnZS5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS5tZXNzYWdlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5hbGVydChkYXRhLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlhbG9nLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYWdlLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICBpZiAoJCgnLmxvZ2Vycm9yOnZpc2libGUnKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICQoJy5hY2NvdW50LWxvZ3MgLnJldHVybmluZ2N1c3RvbWVycycpLmZpbmQoJy5hY2NvdW50ZW1haWwnKS5hZGRDbGFzcygnZXJyb3JjbGllbnQnKTtcbiAgICAgICAgJCgnLmFjY291bnQtbG9ncyAubG9naW5jdXN0b21lcnMgLmxvZ2luX3Bhc3N3b3JkJykuYWRkQ2xhc3MoJ2Vycm9yY2xpZW50Jyk7XG4gICAgICAgIC8vJChcIi5wdF9hY2NvdW50IC53cmFwcGVyIC5hY2NvdW50LXNlY3Rpb24gLnJldHVybmluZ2N1c3RvbWVycyAudmFsdWUgXCIpLmNzcyhcIm1hcmdpbi1ib3R0b21cIiwgXCIwXCIpO1xuICAgIH1cbiAgICAkKCcucmVnaXN0cmF0aW9uLWJ1dHRvbicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG1hc2toZWlnaHQgPSAkKCcuY3JlYXRlYW4tYWNjb3VudCAuZm9ybXN1Ym1pdCcpLnBhcmVudCgnZGl2Jykub3V0ZXJIZWlnaHQoKTtcbiAgICAgICAgdmFyIHJlYWxGb3JtID0galF1ZXJ5KHRoaXMpLmNsb3Nlc3QoJ2Zvcm0nKTtcbiAgICAgICAgaWYgKCFyZWFsRm9ybS52YWxpZCgpKSB7XG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtLXJvdycpLmFkZENsYXNzKCdpbnB1dGxhYmVsJyk7XG4gICAgICAgICAgICByZWFsRm9ybS5maW5kKCcubWF4LWxlbmd0aC1lcnJvcicpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmNsb3Nlc3QoJy52YWx1ZScpLmZpbmQoJ2lucHV0JykudmFsKCkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICByZWFsRm9ybS5maW5kKCcubWF4LWxlbmd0aC1lcnJvcicpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJCgnLnJlZ2lzdHJhdGlvbi1idXR0b24gc3Bhbi5sb2FkSW1hZ2UnKS5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKTtcbiAgICAgICAgICAgICQoJy5jcmVhdGVhbi1hY2NvdW50IC5mb3Jtc3VibWl0JykuY3NzKHsnaGVpZ2h0JzogbWFza2hlaWdodCArICdweCcsICdkaXNwbGF5JzogJ2Jsb2NrJ30pO1xuXG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAoJCgnLmV4aXN0aW5nX3JlZ2lzdGVyOnZpc2libGUnKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICQoJy5jcmVhdGVhbi1hY2NvdW50IC5yZWdpc3RyYXRpb24nKS5maW5kKCcuYWNjb3VudGVtYWlsJykuYWRkQ2xhc3MoJ2Vycm9yY2xpZW50Jyk7XG4gICAgICAgICQoJy5jcmVhdGVhbi1hY2NvdW50IC5yZWdpc3RyYXRpb24nKS5maW5kKCcuZm9ybWZpZWxkX2VtYWlsJykuZmluZCgnLmxhYmVsdGV4dCcpLmFkZENsYXNzKCdpbnB1dGxhYmVsJyk7XG4gICAgICAgICQoJy5jcmVhdGVhbi1hY2NvdW50IC5yZWdpc3RyYXRpb24nKS5maW5kKCcuZm9ybWZpZWxkX2VtYWlsJykuZmluZCgnLnJlcXVpcmVkaW5kaWNhdG9yJykuYWRkQ2xhc3MoJ2lucHV0bGFiZWwnKTtcbiAgICAgICAgaWYgKCQoJy5yZWdpc3RyYXRpb24nKS5maW5kKCdpbnB1dC5yZXF1aXJlZCcpLnZhbCgpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICQoJy5yZWdpc3RyYXRpb24nKS5maW5kKCcuY2xlYXJidXR0b24nKS5zaG93KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKCQoJy5hY2NvdW50LWVtYWlsLmVyci5sb2dfZXJyb3I6dmlzaWJsZScpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgJCgnLnJldHVybmluZ2N1c3RvbWVycycpLmZpbmQoJy5mb3JtZmllbGRfZW1haWwnKS5maW5kKCcubGFiZWx0ZXh0JykuYWRkQ2xhc3MoJ2lucHV0bGFiZWwnKTtcbiAgICAgICAgJCgnLnJldHVybmluZ2N1c3RvbWVycycpLmZpbmQoJy5mb3JtZmllbGRfZW1haWwnKS5maW5kKCcucmVxdWlyZWRpbmRpY2F0b3InKS5hZGRDbGFzcygnaW5wdXRsYWJlbCcpO1xuICAgIH1cbiAgICAkKCcuc2lnbmluYnRuJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbWFza2hlaWdodCA9ICQoJy5hY2NvdW50LWxvZ3MgLmZvcm1zdWJtaXQnKS5wYXJlbnQoJ2RpdicpLm91dGVySGVpZ2h0KCk7XG4gICAgICAgIHZhciBtYXNraGVpZ2h0d2lzaGxpc3QgPSAkKCcud2lzaC1sb2dzIC5mb3Jtc3VibWl0JykucGFyZW50KCdkaXYnKS5vdXRlckhlaWdodCgpO1xuICAgICAgICB2YXIgcmVhbEZvcm0gPSBqUXVlcnkodGhpcykuY2xvc2VzdCgnZm9ybScpO1xuICAgICAgICBpZiAoIXJlYWxGb3JtLnZhbGlkKCkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWFjdGlvbnMnKS5hZGRDbGFzcygnbG9hZEltYWdlJyk7XG4gICAgICAgICAgICAkKCcuc2lnbmluYnRuIHNwYW4ubG9hZEltYWdlJykuY3NzKCdkaXNwbGF5JywgJ2Jsb2NrJyk7XG4gICAgICAgICAgICAkKCcuYWNjb3VudC1sb2dzIC5mb3Jtc3VibWl0JykuY3NzKHsnaGVpZ2h0JzogbWFza2hlaWdodCArICdweCcsICdkaXNwbGF5JzogJ2Jsb2NrJ30pO1xuICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcud2lzaC1sb2dzJykuZmluZCgnLmZvcm1zdWJtaXQnKS5jc3Moe1xuICAgICAgICAgICAgICAgICdoZWlnaHQnOiBtYXNraGVpZ2h0d2lzaGxpc3QgKyAncHgnLFxuICAgICAgICAgICAgICAgICdkaXNwbGF5JzogJ2Jsb2NrJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAoJCgnLnVpLWxvZ2luIC5oZWFkZXItZm9yZ290LXB3ZCcpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgJCh0aGlzKS5maW5kKCdpbnB1dC5yZXF1aXJlZCcpLmJpbmQoJ2tleWRvd24ga2V5dXAgZm9jdXNpbiBmb2N1c291dCBrZXlwcmVzcycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLnZhbHVlJykuZmluZCgnZXJyb3JjbGllbnQnKS5yZW1vdmUoKTtcblxuICAgICAgICB9KTtcbiAgICAgICAgJCgnLnVpLWxvZ2luIGhlYWRlci1mb3Jnb3QtcHdkJykuZmluZCgnaW5wdXQucmVxdWlyZWQnKS5iaW5kKCdmb2N1c2luJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcudmFsdWUnKS5maW5kKCdlcnJvcmNsaWVudCcpLnJlbW92ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgJCgnLnNhbXBsZS1zZWN0aW9uJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoISQodGhpcykuZmluZCgnLnNhbXBsZV9tYWlsX21haW4nKS5pcygnOnZpc2libGUnKSkge1xuICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuc2FtcGxlX21haWxfbWFpbicpLnNsaWRlRG93big1MDApO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgdmFsaWRhdG9yLmluaXQoKTtcbn1cblxuLyoqXG4gKiBAcHJpdmF0ZVxuICogQGZ1bmN0aW9uXG4gKiBAZGVzY3JpcHRpb24gVG9nZ2xlcyB0aGUgbGlzdCBvZiBPcmRlcnNcbiAqL1xuZnVuY3Rpb24gdG9nZ2xlRnVsbE9yZGVyKCkge1xuICAgICQoJy5vcmRlci1pdGVtcycpXG4gICAgICAgIC5maW5kKCdsaS5oaWRkZW46Zmlyc3QnKVxuICAgICAgICAucHJldignbGknKVxuICAgICAgICAuYXBwZW5kKCc8YSBjbGFzcz1cInRvZ2dsZVwiPlZpZXcgQWxsPC9hPicpXG4gICAgICAgIC5jaGlsZHJlbignLnRvZ2dsZScpXG4gICAgICAgIC5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLnNpYmxpbmdzKCdsaS5oaWRkZW4nKS5zaG93KCk7XG4gICAgICAgICAgICAkKHRoaXMpLnJlbW92ZSgpO1xuICAgICAgICB9KTtcbn1cblxuLyoqXG4gKiBAcHJpdmF0ZVxuICogQGZ1bmN0aW9uXG4gKiBAZGVzY3JpcHRpb24gQmluZHMgdGhlIGV2ZW50cyBvbiB0aGUgYWRkcmVzcyBmb3JtIChlZGl0LCBjcmVhdGUsIGRlbGV0ZSlcbiAqL1xuZnVuY3Rpb24gaW5pdEFkZHJlc3NFdmVudHMoKSB7XG4gICAgdmFyIGFkZHJlc3NlcyA9ICQoJyNhZGRyZXNzZXMnKTtcbiAgICBpZiAoYWRkcmVzc2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgYWRkcmVzc2VzLm9uKCdjbGljaycsICcuYWRkcmVzcy1lZGl0LCAuYWRkcmVzcy1jcmVhdGUnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGRpYWxvZy5vcGVuKHtcbiAgICAgICAgICAgIHVybDogdGhpcy5ocmVmLFxuICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgIGRpYWxvZ0NsYXNzOiAnYWRkcmVzc2FkZCcsXG4gICAgICAgICAgICAgICAgb3BlbjogaW5pdGlhbGl6ZUFkZHJlc3NGb3JtXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pLm9uKCdjbGljaycsICcuZGVsZXRlJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBpZiAod2luZG93LmNvbmZpcm0oU3RyaW5nLmZvcm1hdChSZXNvdXJjZXMuQ09ORklSTV9ERUxFVEUsIFJlc291cmNlcy5USVRMRV9BRERSRVNTKSkpIHtcbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgdXJsOiB1dGlsLmFwcGVuZFBhcmFtVG9VUkwoJCh0aGlzKS5hdHRyKCdocmVmJyksICdmb3JtYXQnLCAnYWpheCcpLFxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbidcbiAgICAgICAgICAgIH0pLmRvbmUoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5zdGF0dXMudG9Mb3dlckNhc2UoKSA9PT0gJ29rJykge1xuICAgICAgICAgICAgICAgICAgICBwYWdlLnJlZGlyZWN0KFVybHMuYWRkcmVzc2VzTGlzdCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhLm1lc3NhZ2UubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuYWxlcnQoZGF0YS5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwYWdlLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKiBAZnVuY3Rpb25cbiAqIEBkZXNjcmlwdGlvbiBCaW5kcyB0aGUgZXZlbnRzIG9mIHRoZSBwYXltZW50IG1ldGhvZHMgbGlzdCAoZGVsZXRlIGNhcmQpXG4gKi9cbmZ1bmN0aW9uIGluaXRQYXltZW50RXZlbnRzKCkge1xuICAgICQoJy5hZGQtY2FyZCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZGlhbG9nLm9wZW4oe1xuICAgICAgICAgICAgLy9QUkVWQUlMLUFkZGVkICB0byBoYW5kbGUgdmFsaWRhdGlvbiBpc3N1ZXNcbiAgICAgICAgICAgIHVybDogJChlLnRhcmdldCkuYXR0cignaHJlZicpLFxuICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgIGRpYWxvZ0NsYXNzOiAncGF5bWVudC1zZXR0aW5ncycsXG4gICAgICAgICAgICAgICAgb3BlbjogaW5pdGlhbGl6ZVBheW1lbnRGb3JtXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgdmFyIHBheW1lbnRMaXN0ID0gJCgnLnBheW1lbnQtbGlzdCcpO1xuICAgIGlmIChwYXltZW50TGlzdC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHV0aWwuc2V0RGVsZXRlQ29uZmlybWF0aW9uKHBheW1lbnRMaXN0LCBTdHJpbmcuZm9ybWF0KFJlc291cmNlcy5DT05GSVJNX0RFTEVURSwgUmVzb3VyY2VzLlRJVExFX0NSRURJVENBUkQpKTtcblxuICAgICQoJ2Zvcm1bbmFtZT1cInBheW1lbnQtcmVtb3ZlXCJdJykub24oJ3N1Ym1pdCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgLy8gb3ZlcnJpZGUgZm9ybSBzdWJtaXNzaW9uIGluIG9yZGVyIHRvIHByZXZlbnQgcmVmcmVzaCBpc3N1ZXNcbiAgICAgICAgdmFyIGJ1dHRvbiA9ICQodGhpcykuZmluZCgnLmRlbGV0ZScpO1xuICAgICAgICAkKCc8aW5wdXQvPicpLmF0dHIoe1xuICAgICAgICAgICAgdHlwZTogJ2hpZGRlbicsXG4gICAgICAgICAgICBuYW1lOiBidXR0b24uYXR0cignbmFtZScpLFxuICAgICAgICAgICAgdmFsdWU6IGJ1dHRvbi5hdHRyKCd2YWx1ZScpIHx8ICdkZWxldGUgY2FyZCdcbiAgICAgICAgfSkuYXBwZW5kVG8oJCh0aGlzKSk7XG4gICAgICAgIHZhciBkYXRhID0gJCh0aGlzKS5zZXJpYWxpemUoKTtcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgIHVybDogJCh0aGlzKS5hdHRyKCdhY3Rpb24nKSxcbiAgICAgICAgICAgIGRhdGE6IGRhdGFcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5kb25lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBwYWdlLnJlZGlyZWN0KFVybHMucGF5bWVudHNMaXN0KTtcbiAgICAgICAgICAgIH0pO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBpbml0aWFsaXplUGF5bWVudEZvcm0oKSB7XG5cbiAgICAkKCcjQ3JlZGl0Q2FyZEZvcm0nKS5vbignY2xpY2snLCAnLmNhbmNlbC1idXR0b24nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGRpYWxvZy5jbG9zZSgpO1xuICAgIH0pO1xuXG59XG5cbi8qKlxuICogQHByaXZhdGVcbiAqIEBmdW5jdGlvblxuICogQGRlc2NyaXB0aW9uIGluaXQgZXZlbnRzIGZvciB0aGUgbG9naW5QYWdlXG4gKi9cbmZ1bmN0aW9uIGluaXRMb2dpblBhZ2UoKSB7XG4gICAgLy9vLWF1dGggYmluZGluZyBmb3Igd2hpY2ggaWNvbiBpcyBjbGlja2VkXG4gICAgJCgnLm9BdXRoSWNvbicpLmJpbmQoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcjT0F1dGhQcm92aWRlcicpLnZhbCh0aGlzLmlkKTtcbiAgICB9KTtcblxuICAgIC8vdG9nZ2xlIHRoZSB2YWx1ZSBvZiB0aGUgcmVtZW1iZXJtZSBjaGVja2JveFxuICAgICQoJyNkd2ZybV9sb2dpbl9yZW1lbWJlcm1lJykuYmluZCgnY2hhbmdlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoJCgnI2R3ZnJtX2xvZ2luX3JlbWVtYmVybWUnKS5hdHRyKCdjaGVja2VkJykpIHtcbiAgICAgICAgICAgICQoJyNyZW1lbWJlcm1lJykudmFsKCd0cnVlJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKCcjcmVtZW1iZXJtZScpLnZhbCgnZmFsc2UnKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKiBAZnVuY3Rpb25cbiAqIEBkZXNjcmlwdGlvbiBCaW5kcyB0aGUgZXZlbnRzIG9mIHRoZSBvcmRlciwgYWRkcmVzcyBhbmQgcGF5bWVudCBwYWdlc1xuICovXG5mdW5jdGlvbiBpbml0aWFsaXplRXZlbnRzKCkge1xuICAgIGluaXRpYWxpemVBZGRyZXNzRm9ybSgpOyAvLyBKSVJBIFBSRVYtNjM6ICdBZGQgQWRkcmVzcycgb3IgJ0VkaXQgYWRkcmVzcycgb3ZlcmxheSBjaGFuZ2luZyB0byBwYWdlIGFmdGVyIGNsaWNrIG9uIEFwcGx5IGJ1dHRvbix3aGVuIHRoZXJlIGlzIGFuIGVycm9yIG1lc3NhZ2Ugb24gb3ZlcmxheS5cbiAgICB0b2dnbGVGdWxsT3JkZXIoKTtcbiAgICBpbml0QWRkcmVzc0V2ZW50cygpO1xuICAgIGluaXRQYXltZW50RXZlbnRzKCk7XG4gICAgaW5pdExvZ2luUGFnZSgpO1xuICAgIGlmICgkKCcuc2VydmVyLWVycm9yJykubGVuZ3RoID4gMCkge1xuICAgICAgICAkKHdpbmRvdykuc2Nyb2xsVG9wKCQoJy5zZXJ2ZXItZXJyb3InKS5vZmZzZXQoKS50b3ApO1xuICAgIH1cbiAgICAkKCdib2R5Jykub24oJ2NoYW5nZSBpbnB1dCcsICcuZGVza3RvcC1hY2Nlc3Njb2RlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY3VyVmFsdWUgPSAkKHRoaXMpLnZhbCgpO1xuICAgICAgICAkKCdib2R5JykuZmluZCgnLm1vYmlsZS1hY2Nlc3Njb2RlJykudmFsKGN1clZhbHVlKTtcbiAgICAgICAgJCgnYm9keScpLmZpbmQoJy5tb2JpbGUtYWNjZXNzY29kZScpLmF0dHIoJ3ZhbHVlJywgY3VyVmFsdWUpO1xuICAgIH0pO1xuICAgICQoJ2JvZHknKS5vbignY2hhbmdlIGlucHV0JywgJy5tb2JpbGUtYWNjZXNzY29kZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGN1clZhbHVlID0gJCh0aGlzKS52YWwoKTtcbiAgICAgICAgJCgnYm9keScpLmZpbmQoJy5kZXNrdG9wLWFjY2Vzc2NvZGUnKS52YWwoY3VyVmFsdWUpO1xuICAgICAgICAkKCdib2R5JykuZmluZCgnLmRlc2t0b3AtYWNjZXNzY29kZScpLmF0dHIoJ3ZhbHVlJywgY3VyVmFsdWUpO1xuICAgIH0pO1xufVxuXG52YXIgYWNjb3VudCA9IHtcbiAgICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGluaXRpYWxpemVFdmVudHMoKTtcbiAgICAgICAgZ2lmdGNlcnQuaW5pdCgpO1xuICAgIH0sXG4gICAgaW5pdENhcnRMb2dpbjogZnVuY3Rpb24gKCkge1xuICAgICAgICBpbml0TG9naW5QYWdlKCk7XG4gICAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBhY2NvdW50O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgYWNjb3VudCA9IHJlcXVpcmUoJy4vYWNjb3VudCcpLFxuICAgIGJvbnVzUHJvZHVjdHNWaWV3ID0gcmVxdWlyZSgnLi4vYm9udXMtcHJvZHVjdHMtdmlldycpLFxuICAgIHF1aWNrdmlldyA9IHJlcXVpcmUoJy4uL3F1aWNrdmlldycpLFxuICAgIHZhbGlkYXRvciA9IHJlcXVpcmUoJy4uL3ZhbGlkYXRvcicpLFxuICAgIGNhcnRTdG9yZUludmVudG9yeSA9IHJlcXVpcmUoJy4uL3N0b3JlaW52ZW50b3J5L2NhcnQnKTtcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICogQGZ1bmN0aW9uXG4gKiBAZGVzY3JpcHRpb24gQmluZHMgZXZlbnRzIHRvIHRoZSBjYXJ0IHBhZ2UgKGVkaXQgaXRlbSdzIGRldGFpbHMsIGJvbnVzIGl0ZW0ncyBhY3Rpb25zLCBjb3Vwb24gY29kZSBlbnRyeSlcbiAqL1xuXG5mdW5jdGlvbiBpbml0UXVpY2tWaWV3cmVjb21tQnV0dG9ucygpIHtcbiAgICB2YXIgJHF2QnV0dG9uID0gJCgnLnB0X2NhcnQgLnByb2R1Y3R0aWxlICNxdWlja3ZpZXdidXR0b24nKTtcbiAgICB2YXIgJGxpbmsgPSAkKHRoaXMpLmZpbmQoJy50aHVtYi1saW5rJyk7XG4gICAgJHF2QnV0dG9uLmF0dHIoe1xuICAgICAgICAnaHJlZic6ICRsaW5rLmF0dHIoJ2hyZWYnKSxcbiAgICAgICAgJ3RpdGxlJzogJGxpbmsuYXR0cigndGl0bGUnKVxuICAgIH0pLmFwcGVuZFRvKHRoaXMpO1xuICAgICRxdkJ1dHRvbi5vZmYoJ2NsaWNrJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBxdWlja3ZpZXcuc2hvdyh7XG4gICAgICAgICAgICB1cmw6ICQodGhpcykuYXR0cignaHJlZicpLnNwbGl0KCcjJylbMF0sIC8vUFJFViBKSVJBIFBSRVYtMjU1IDpQTFA6IE9uIENsaWNrIFF1aWNrIHZpZXcgbmF2aWdhdGluZyB0byBhIHdyb25nIHBhZ2Ugd2hlbiB1c2VyIGZpcnN0IGNoYW5nZXMgdGhlIHN3YXRjaGVzLiBUYWtpbmcgb25seSBocmVmLlxuICAgICAgICAgICAgc291cmNlOiAncXVpY2t2aWV3J1xuICAgICAgICB9KTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gaW5pdFF1aWNrVmlld2VkaXRCdXR0b25zKCkge1xuICAgIHZhciAkcXZCdXR0b24gPSAkKCcucHRfY2FydCAgdGFibGUjY2FydC10YWJsZSB0ZC5pdGVtdG90YWxjb2x1bW4uY2FydGFjdGlvbnMgLml0ZW0tZWRpdC1kZXRhaWxzICNxdWlja3ZpZXdidXR0b24nKTtcbiAgICB2YXIgJGxpbmsgPSAkKHRoaXMpO1xuICAgICRxdkJ1dHRvbi5hdHRyKHtcbiAgICAgICAgJ2hyZWYnOiAkbGluay5hdHRyKCdocmVmJyksXG4gICAgICAgICd0aXRsZSc6ICRsaW5rLmF0dHIoJ3RpdGxlJylcbiAgICB9KS5hcHBlbmRUbyh0aGlzKTtcbiAgICAkcXZCdXR0b24ub2ZmKCdjbGljaycpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgcXVpY2t2aWV3LnNob3coe1xuICAgICAgICAgICAgdXJsOiAkKHRoaXMpLmF0dHIoJ2hyZWYnKS5zcGxpdCgnIycpWzBdLCAvL1BSRVYgSklSQSBQUkVWLTI1NSA6UExQOiBPbiBDbGljayBRdWljayB2aWV3IG5hdmlnYXRpbmcgdG8gYSB3cm9uZyBwYWdlIHdoZW4gdXNlciBmaXJzdCBjaGFuZ2VzIHRoZSBzd2F0Y2hlcy4gVGFraW5nIG9ubHkgaHJlZi5cbiAgICAgICAgICAgIHNvdXJjZTogJ3F1aWNrdmlldydcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGluaXRpYWxpemVFdmVudHMoKSB7XG4gICAgcXVpY2t2aWV3LmluaXQoKTtcbiAgICB2YWxpZGF0b3IuaW5pdCgpO1xuICAgIGluaXRRdWlja1ZpZXdyZWNvbW1CdXR0b25zKCk7XG4gICAgaW5pdFF1aWNrVmlld2VkaXRCdXR0b25zKCk7XG4gICAgJCgnI2NhcnQtdGFibGUnKS5vbignY2xpY2snLCAnLmJvbnVzLWl0ZW0tYWN0aW9ucyBhLCAuaXRlbS1kZXRhaWxzIC5ib251c3Byb2R1Y3RzIGEnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGJvbnVzUHJvZHVjdHNWaWV3LnNob3codGhpcy5ocmVmKTtcbiAgICB9KTtcbiAgICAvKiB1c2VkIHRvIHNsaWRlIHRvZ2dsZSBldmVudCBpbiBjYXJ0IHBhZ2UgcHJvbW8gY29kZSovXG4gICAgaWYgKCQoJy5wdF9jYXJ0JykubGVuZ3RoID4gMCkge1xuICAgICAgICAkKHRoaXMpLmZpbmQoJy5hcHBseWNvdXBvbiAubGFiZWwnKS50ZXh0KCdIYXZlIGEgUHJvbW8gQ29kZT8nKTtcbiAgICAgICAgJCgnLmNvdXBvbmNvZGUgLmxhYmVsJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyICRjdXJPYmogPSAkKHRoaXMpO1xuICAgICAgICAgICAgdmFyIGZpZWxkU2VjdGlvbiA9ICcnO1xuICAgICAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ3ByZV9sYWJlbCcpKSB7XG5cbiAgICAgICAgICAgICAgICBmaWVsZFNlY3Rpb24gPSAkY3VyT2JqLmNsb3Nlc3QoJy5jYXJ0LWNvdXBvbi1jb2RlJykuZmluZCgnLnByb21vLXNlYy5wcmUtcHJvbW8nKTtcbiAgICAgICAgICAgICAgICBpZiAoJChmaWVsZFNlY3Rpb24pLmlzKCc6dmlzaWJsZScpID09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgJChmaWVsZFNlY3Rpb24pLnNsaWRlVXAoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkKGZpZWxkU2VjdGlvbikuc2xpZGVEb3duKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdwb3N0LWNvdXBvbmNvZGUnKSkge1xuICAgICAgICAgICAgICAgIGZpZWxkU2VjdGlvbiA9ICRjdXJPYmouY2xvc2VzdCgnLmNhcnQtY291cG9uLWNvZGUnKS5maW5kKCcucHJvbW8tc2VjLmJvdHRvbS1wcm9tby1zZWN0aW9uJyk7XG4gICAgICAgICAgICAgICAgaWYgKCQoZmllbGRTZWN0aW9uKS5pcygnOnZpc2libGUnKSA9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICQoZmllbGRTZWN0aW9uKS5zbGlkZVVwKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJChmaWVsZFNlY3Rpb24pLnNsaWRlRG93bigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHZhciAkY3VyT2JqID0gJCgnLmNvdXBvbmNvZGUgLmxhYmVsLnBvc3QtY291cG9uY29kZScpO1xuICAgICAgICB2YXIgZmllbGRTZWN0aW9uID0gJGN1ck9iai5jbG9zZXN0KCcuY2FydC1jb3Vwb24tY29kZScpLmZpbmQoJy5wcm9tby1zZWMuYm90dG9tLXByb21vLXNlY3Rpb24nKTtcbiAgICAgICAgaWYgKCQoZmllbGRTZWN0aW9uKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpZiAoJCgnLnByb21vLXNlYy5ib3R0b20tcHJvbW8tc2VjdGlvbiAuZXJyb3InKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgJChmaWVsZFNlY3Rpb24pLnNsaWRlRG93bigpO1xuICAgICAgICAgICAgICAgICQoJy5wcm9tby1zZWMuYm90dG9tLXByb21vLXNlY3Rpb24nKS5maW5kKCcuY291cG9uaW5wdXQnKS5hZGRDbGFzcygnaW5wdXRsYWJlbCcpO1xuICAgICAgICAgICAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA8IDQ4MSkge1xuICAgICAgICAgICAgICAgICAgICAkKCdib2R5LCBodG1sJykuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb3A6ICQoJy5jb3Vwb25jb2RlIC5sYWJlbC5wb3N0LWNvdXBvbmNvZGUnKS5vZmZzZXQoKS50b3BcbiAgICAgICAgICAgICAgICAgICAgfSwgNjAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyICRjdXJPYmp0b3AgPSAkKCcuY291cG9uY29kZSAubGFiZWwucHJlX2xhYmVsJyk7XG4gICAgICAgIHZhciBmaWVsZFNlY3Rpb250b3AgPSAkY3VyT2JqdG9wLmNsb3Nlc3QoJy5jYXJ0LWNvdXBvbi1jb2RlJykuZmluZCgnLnByb21vLXNlYy5wcmUtcHJvbW8nKTtcbiAgICAgICAgaWYgKCQoZmllbGRTZWN0aW9udG9wKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpZiAoJCgnLnByb21vLXNlYy5wcmUtcHJvbW8gLmVycm9yJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICQoZmllbGRTZWN0aW9udG9wKS5zbGlkZURvd24oKTtcbiAgICAgICAgICAgICAgICAkKCcucHJvbW8tc2VjLnByZS1wcm9tbycpLmZpbmQoJy5jb3Vwb25pbnB1dCcpLmFkZENsYXNzKCdpbnB1dGxhYmVsJyk7XG4gICAgICAgICAgICAgICAgJCgnYm9keSwgaHRtbCcpLmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb3A6ICQoJy5jb3Vwb25jb2RlIC5sYWJlbC5wcmVfbGFiZWwnKS5vZmZzZXQoKS50b3BcbiAgICAgICAgICAgICAgICB9LCA2MDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICB9XG4gICAgJCgnLnByb21vLXNlYycpLmZpbmQoJy5jb3Vwb25pbnB1dCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnLnByb21vLXNlYycpLmZpbmQoJy5jb3Vwb25pbnB1dCcpLnJlbW92ZUNsYXNzKCdpbnB1dGxhYmVsJyk7XG4gICAgfSk7XG5cbiAgICB2YXIgY2FydHByb21vID0gJCgnLnB0X2NhcnQgLnVwc2hpZnQuY2VsbC5jb250ZW50Ym94IC5jb250ZW50Ym94Y29udGVudCB0YWJsZSNjYXJ0LXRhYmxlIHRyLmNhcnQtcm93IHRkLml0ZW10b3RhbGNvbHVtbicpO1xuICAgIGNhcnRwcm9tby5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCQodGhpcykuZmluZCgnLnByb21vLWFkanVzdG1lbnQnKS5sZW5ndGggPj0gMSkge1xuICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygncHJvbW9kaXYnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ3Byb21vZGl2Jyk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgICQoJ2JvZHknKS5vbignY2xpY2snLCAnLmNhcnRjb3Vwb24tYXBwbHknLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciAkY3VyT2JqID0gJCgnLmNvdXBvbmNvZGUgLmxhYmVsJyk7XG4gICAgICAgIHZhciBmaWVsZFNlY3Rpb24gPSAnJztcbiAgICAgICAgaWYgKCQodGhpcykuY2xvc2VzdCgnLmJvdHRvbS1wcm9tby1zZWN0aW9uJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgJCgnLnByb21vLWFwcGxpZWQtcG9zaXRpb24nKS52YWwoJ2JvdHRvbXNlY3Rpb24nKTtcbiAgICAgICAgICAgICQoJy5wcm9tby1hcHBsaWVkLXBvc2l0aW9uJykuYXR0cigndmFsdWUnLCAnYm90dG9tc2VjdGlvbicpO1xuICAgICAgICAgICAgZmllbGRTZWN0aW9uID0gJGN1ck9iai5jbG9zZXN0KCcuY2FydC1jb3Vwb24tY29kZScpLmZpbmQoJy5wcm9tby1zZWMuYm90dG9tLXByb21vLXNlY3Rpb24nKTtcbiAgICAgICAgICAgIGlmICgkKGZpZWxkU2VjdGlvbikubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGlmICgkKCcuZXJyb3InKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICQoZmllbGRTZWN0aW9uKS5zbGlkZURvd24oKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLnByb21vLXNlYy5ib3R0b20tcHJvbW8tc2VjdGlvbicpLmZpbmQoJy5jb3Vwb25pbnB1dCcpLmFkZENsYXNzKCdpbnB1dGxhYmVsJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKCQodGhpcykuY2xvc2VzdCgnLnRvcC1wcm9tby1zZWN0aW9uJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgJCgnLnByb21vLWFwcGxpZWQtcG9zaXRpb24nKS52YWwoJ3RvcHNlY3Rpb24nKTtcbiAgICAgICAgICAgICQoJy5wcm9tby1hcHBsaWVkLXBvc2l0aW9uJykuYXR0cigndmFsdWUnLCAndG9wc2VjdGlvbicpO1xuICAgICAgICAgICAgZmllbGRTZWN0aW9uID0gJGN1ck9iai5jbG9zZXN0KCcuY2FydC1jb3Vwb24tY29kZScpLmZpbmQoJy5wcm9tby1zZWMudG9wLXByb21vLXNlY3Rpb24nKTtcbiAgICAgICAgICAgIGlmICgkKGZpZWxkU2VjdGlvbikubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGlmICgkKCcuZXJyb3InKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICQoZmllbGRTZWN0aW9uKS5zbGlkZURvd24oKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLnByb21vLXNlYy50b3AtcHJvbW8tc2VjdGlvbicpLmZpbmQoJy5jb3Vwb25pbnB1dCcpLmFkZENsYXNzKCdpbnB1dGxhYmVsJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgJCgnLnB0X2NhcnQgLmNhcnRyZWNvbW1hZHNfY29udCcpLmNzcygnaGVpZ2h0JywgJzQ0cHgnKTtcbiAgICAvLyBvdmVycmlkZSBlbnRlciBrZXkgZm9yIGNvdXBvbiBjb2RlIGVudHJ5XG4gICAgJCgnZm9ybSBpbnB1dC5jb3Vwb25pbnB1dCcpLm9uKCdrZXlkb3duJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgaWYgKGUud2hpY2ggPT09IDEzKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJ2Zvcm0nKS5maW5kKCcuY2FydGNvdXBvbi1hcHBseScpLmNsaWNrKCk7XG4gICAgICAgIH0gLy8gSklSQSBQUkVWLTMwIDogQ2FydCBwYWdlOiAgQ291cG9uIENvZGUgaXMgbm90IGFwcGx5aW5nLCB3aGVuIHRoZSB1c2VyIGhpdCBlbnRlciBrZXkuXG4gICAgfSk7XG5cbiAgICAkKCdib2R5Jykub24oJ2NoYW5nZSxpbnB1dCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyICRjdXJPYmogPSAkKHRoaXMpO1xuICAgICAgICAkKCdib2R5JykuZmluZCgnLmNvdXBvbmlucHV0JykudmFsKCRjdXJPYmoudmFsKCkpO1xuICAgICAgICAkKCdib2R5JykuZmluZCgnLmNvdXBvbmlucHV0JykuYXR0cigndmFsdWUnLCAkY3VyT2JqLnZhbCgpKTtcbiAgICB9KTtcbiAgICAvL3RvIHByZXZlbnQgbXVsdGlwbGUgc3VibWlzc2lvbnMgb2YgdGhlIGZvcm0gd2hlbiByZW1vdmluZyBhIHByb2R1Y3QgZnJvbSB0aGUgY2FydFxuICAgIHZhciByZW1vdmVJdGVtRXZlbnQgPSBmYWxzZTtcbiAgICAkKCdidXR0b25bbmFtZSQ9XCJkZWxldGVQcm9kdWN0XCJdJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgaWYgKHJlbW92ZUl0ZW1FdmVudCkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVtb3ZlSXRlbUV2ZW50ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHZhciBvd2wgPSAkKCcub3dsLWNhcm91c2VsJyk7XG4gICAgb3dsLm93bENhcm91c2VsKHtcbiAgICAgICAgaXRlbXM6IDMsXG4gICAgICAgIHNsaWRlQnk6IDMsXG4gICAgICAgIHJld2luZDogdHJ1ZSxcbiAgICAgICAgbmF2OiB0cnVlLFxuICAgICAgICBsb29wOiB0cnVlLFxuICAgICAgICBkb3RzOiBmYWxzZVxuICAgIH0pO1xufVxuXG5leHBvcnRzLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgaW5pdGlhbGl6ZUV2ZW50cygpO1xuICAgIGlmIChTaXRlUHJlZmVyZW5jZXMuU1RPUkVfUElDS1VQKSB7XG4gICAgICAgIGNhcnRTdG9yZUludmVudG9yeS5pbml0KCk7XG4gICAgfVxuICAgIGFjY291bnQuaW5pdENhcnRMb2dpbigpO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWwgPSByZXF1aXJlKCcuLi8uLi91dGlsJyksXG4gICAgdWlldmVudHMgPSByZXF1aXJlKCcuLi8uLi91aWV2ZW50cycpLFxuICAgIHNoaXBwaW5nID0gcmVxdWlyZSgnLi9zaGlwcGluZycpO1xuXG4vKipcbiAqIEBmdW5jdGlvblxuICogQGRlc2NyaXB0aW9uIFNlbGVjdHMgdGhlIGZpcnN0IGFkZHJlc3MgZnJvbSB0aGUgbGlzdCBvZiBhZGRyZXNzZXNcbiAqL1xuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciAkZm9ybSA9ICQoJy5hZGRyZXNzJyk7XG4gICAgLy8gc2VsZWN0IGFkZHJlc3MgZnJvbSBsaXN0XG4gICAgJCgnc2VsZWN0W25hbWUkPVwiX2FkZHJlc3NMaXN0XCJdJywgJGZvcm0pLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzZWxlY3RlZCA9ICQodGhpcykuY2hpbGRyZW4oJzpzZWxlY3RlZCcpLmZpcnN0KCk7XG4gICAgICAgIHZhciBzZWxlY3RlZEFkZHJlc3MgPSAkKHNlbGVjdGVkKS5kYXRhKCdhZGRyZXNzJyk7XG4gICAgICAgIGlmICghc2VsZWN0ZWRBZGRyZXNzKSB7XG4gICAgICAgICAgICBpZiAoJCgnLmNoZWNrb3V0JykuaGFzQ2xhc3MoJ2JpbGxpbmdzZWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAkKCcuYWRkcmVzc29wdGlvbnMtYWRkVG9BZGRyZXNzQm9vaywuYWRkcmVzc29wdGlvbnMtbWFrZWRlZmF1bHQgJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgICAgICAgICAkKCdpbnB1dFtuYW1lJD1cXCdzaGlwcGluZ0FkZHJlc3Nfc2VsZWN0ZWRhZGRyZXNzXFwnXScpLnZhbCgnJyk7XG4gICAgICAgICAgICAgICAgJCgnLnNlbGVjdGVkLXNoaXBwaW5nLWFkZHJlc3MnKS5lbXB0eSgpO1xuICAgICAgICAgICAgICAgICQoJ2lucHV0W25hbWUkPVxcJ19hZGRyZXNzaWRcXCddJykudmFsKCcnKTtcbiAgICAgICAgICAgICAgICAkKCdpbnB1dFtuYW1lJD1cXCdfYWRkcmVzc0ZpZWxkc19maXJzdE5hbWVcXCddJykudmFsKCcnKTtcbiAgICAgICAgICAgICAgICAkKCdpbnB1dFtuYW1lJD1cXCdfYWRkcmVzc0ZpZWxkc19sYXN0TmFtZVxcJ10nKS52YWwoJycpO1xuICAgICAgICAgICAgICAgICQoJ2lucHV0W25hbWUkPVxcJ19hZGRyZXNzRmllbGRzX2FkZHJlc3MxXFwnXScpLnZhbCgnJyk7XG4gICAgICAgICAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XFwnX2FkZHJlc3NGaWVsZHNfYWRkcmVzczJcXCddJykudmFsKCcnKTtcbiAgICAgICAgICAgICAgICAkKCdpbnB1dFtuYW1lJD1cXCdfYWRkcmVzc0ZpZWxkc19jaXR5XFwnXScpLnZhbCgnJyk7XG4gICAgICAgICAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XFwnX2FkZHJlc3NGaWVsZHNfcG9zdGFsXFwnXScpLnZhbCgnJyk7XG4gICAgICAgICAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XFwnX2FkZHJlc3NGaWVsZHNfcGhvbmVcXCddJykudmFsKCcnKTtcbiAgICAgICAgICAgICAgICB1aWV2ZW50cy5jaGFuZ2VGb3JtU2VsZWN0aW9uKGpRdWVyeSgnc2VsZWN0W25hbWUkPVxcJ19hZGRyZXNzRmllbGRzX3N0YXRlc19zdGF0ZVxcJ10nKVswXSwgJycpO1xuICAgICAgICAgICAgICAgIHVpZXZlbnRzLmNoYW5nZUZvcm1TZWxlY3Rpb24oalF1ZXJ5KCdzZWxlY3QuYWRkcmVzcy1zZWxlY3QnKVswXSwgJycpO1xuICAgICAgICAgICAgICAgICQoJy5zaGlwcGluZy1hZGRyZXNzLWZpZWxkLXNlY3Rpb24nKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgICAgICAgICAgICQoJy5zZWxlY3RlZC1zaGlwcGluZy1hZGRyZXNzLCAubmV3LWFkZHJlc3MtZmllbGQsIC5lZGl0LWFkZHJlc3MtZmllbGQnKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICAgICAgICAgICAgICQoJ2lucHV0W25hbWUkPVxcJ19hZGRyZXNzRmllbGRzX3Bob25lXFwnXScpLmNsb3Nlc3QoJ2Rpdi5waG9uZScpLmZpbmQoJ3NwYW4uZXJyb3JjbGllbnQnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAkKCdpbnB1dFtuYW1lJD1cXCdfYWRkcmVzc0ZpZWxkc19wb3N0YWxcXCddJykuY2xvc2VzdCgnZGl2LnppcCcpLmZpbmQoJ3NwYW4uZXJyb3JjbGllbnQnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAkKCcuYWRkcmVzc2Zvcm0gLmZvcm0tcm93LmN1c3RvbS1zZWxlY3QnKS5yZW1vdmVDbGFzcygnY3VzdG9tc2VsZWN0LWVycm9yJyk7XG4gICAgICAgICAgICAgICAgJCgnLmN1c3RvbS1zZWxlY3QnKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdFZhbCA9ICQodGhpcykuZmluZCgnOnNlbGVjdGVkJykudGV4dCgpO1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5zZWxlY3Rvck91dCcpLnRleHQoc2VsZWN0VmFsKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAkKCdhLmNsZWFyYnV0dG9uJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICQoJy5zaGlwcGluZy1hZGRyZXNzLWZpZWxkLXNlY3Rpb24gLmZvcm0tcm93JykuZmluZCgnaW5wdXQnKS5yZW1vdmVDbGFzcygnZXJyb3JjbGllbnQnKTtcbiAgICAgICAgICAgICAgICB1aWV2ZW50cy5jdXN0b21GaWVsZHMoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJCgnLnNlbGVjdGVkLXNoaXBwaW5nLWFkZHJlc3MsIC5uZXctYWRkcmVzcy1maWVsZCcpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgICAgICAgICAgICAgJCgnLnNoaXBwaW5nLWFkZHJlc3MtZmllbGQtc2VjdGlvbicpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1aWV2ZW50cy5zeW5jY2hlY2tvdXRIKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgJCgnLnNlbGVjdGVkLXNoaXBwaW5nLWFkZHJlc3MnKS5lbXB0eSgpO1xuICAgICAgICBpZiAoc2VsZWN0ZWRBZGRyZXNzLmFkZHJlc3MyID09IG51bGwpIHtcbiAgICAgICAgICAgIHNlbGVjdGVkQWRkcmVzcy5hZGRyZXNzMiA9ICcnO1xuICAgICAgICB9XG4gICAgICAgICQoJy5zZWxlY3RlZC1zaGlwcGluZy1hZGRyZXNzJykuYXBwZW5kKHNlbGVjdGVkQWRkcmVzcy5maXJzdE5hbWUgKyAnICcgKyBzZWxlY3RlZEFkZHJlc3MubGFzdE5hbWUgKyAnPGJyLz4nICsgc2VsZWN0ZWRBZGRyZXNzLmFkZHJlc3MxICsgJyAnICsgc2VsZWN0ZWRBZGRyZXNzLmFkZHJlc3MyICsgJzxici8+JyArIHNlbGVjdGVkQWRkcmVzcy5jaXR5ICsgJyAnICsgc2VsZWN0ZWRBZGRyZXNzLnN0YXRlQ29kZSArICcgJyArIHNlbGVjdGVkQWRkcmVzcy5wb3N0YWxDb2RlICsgJzxici8+JyArIHNlbGVjdGVkQWRkcmVzcy5waG9uZSk7XG4gICAgICAgIGlmICgkKCcuY2hlY2tvdXQnKS5oYXNDbGFzcygnYmlsbGluZ3NlY3Rpb24nKSkge1xuICAgICAgICAgICAgdmFyIGVkaXRBZGRyZXNzT2JqZWN0ID0ge1xuICAgICAgICAgICAgICAgIGZpcnN0TmFtZTogc2VsZWN0ZWRBZGRyZXNzLmZpcnN0TmFtZSxcbiAgICAgICAgICAgICAgICBsYXN0TmFtZTogc2VsZWN0ZWRBZGRyZXNzLmxhc3ROYW1lLFxuICAgICAgICAgICAgICAgIGFkZHJlc3MxOiBzZWxlY3RlZEFkZHJlc3MuYWRkcmVzczEsXG4gICAgICAgICAgICAgICAgYWRkcmVzczI6IHNlbGVjdGVkQWRkcmVzcy5hZGRyZXNzMixcbiAgICAgICAgICAgICAgICBwb3N0YWxDb2RlOiBzZWxlY3RlZEFkZHJlc3MucG9zdGFsQ29kZSxcbiAgICAgICAgICAgICAgICBjaXR5OiBzZWxlY3RlZEFkZHJlc3MuY2l0eSxcbiAgICAgICAgICAgICAgICBzdGF0ZUNvZGU6IHNlbGVjdGVkQWRkcmVzcy5zdGF0ZUNvZGUsXG4gICAgICAgICAgICAgICAgY291bnRyeUNvZGU6ICdVUycsXG4gICAgICAgICAgICAgICAgcGhvbmU6IHNlbGVjdGVkQWRkcmVzcy5waG9uZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICQoJy5uZXctYWRkcmVzcy1maWVsZCcpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgICAgICAgICAkKCcuZWRpdC1hZGRyZXNzLWZpZWxkJykuYXR0cignZGF0YS1hZGRyZXNzJywgZWRpdEFkZHJlc3NPYmplY3QpO1xuICAgICAgICAgICAgJCgnLnNlbGVjdGVkLXNoaXBwaW5nLWFkZHJlc3MsIC5lZGl0LWFkZHJlc3MtZmllbGQnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJCgnLnNlbGVjdGVkLXNoaXBwaW5nLWFkZHJlc3MsIC5uZXctYWRkcmVzcy1maWVsZCcpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgICAgIH1cbiAgICAgICAgJCgnLnNoaXBwaW5nLWFkZHJlc3MtZmllbGQtc2VjdGlvbicpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgICAgIHV0aWwuZmlsbEFkZHJlc3NGaWVsZHMoc2VsZWN0ZWRBZGRyZXNzLCAkZm9ybSk7XG4gICAgICAgICQoJ2JvZHknKS5maW5kKCdpbnB1dFtuYW1lJD1fc2FtZWFzc2hpcHBpbmdhZGRyZXNzXScpLnJlbW92ZUF0dHIoJ2NoZWNrZWQnKTtcbiAgICAgICAgJCgnYm9keScpLmZpbmQoJ2lucHV0W25hbWUkPV9zYW1lYXNzaGlwcGluZ2FkZHJlc3NdJykuY2xvc2VzdCgnLmN1c3RvbS1jaGVja2JveCcpLmZpbmQoJy5jdXN0b20tbGluaycpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xuICAgICAgICBzaGlwcGluZy51cGRhdGVTaGlwcGluZ01ldGhvZExpc3QoKTtcbiAgICAgICAgLy8gcmUtdmFsaWRhdGUgdGhlIGZvcm1cbiAgICAgICAgLyogSklSQSBQUkVWLTk1IDogSGlnaGxpZ2h0aW5nIHRoZSBDcmVkaXQgY2FyZCAgZGV0YWlscyBmaWVsZCwgd2hlbiB0aGUgdXNlciBzZWxlY3QgYW55IHNhdmVkIGFkZHJlc3MgZnJvbSB0aGUgJ1NlbGVjdCBBbiBBZGRyZXNzJyBkcm9wIGRvd24uXG4gICAgICAgICAgIChsb2dnZWQtaW4gdXNlcikgLkNvbW1lbnRlZCB0byBwcmV2ZW50IGZvcm0gZnJvbSByZS12YWxpZGF0aW9uLlxuXHRcdCovXG4gICAgICAgIC8vJGZvcm0udmFsaWRhdGUoKS5mb3JtKCk7XG4gICAgfSk7XG4gICAgLyogaWYoJChcImJvZHlcIikuZmluZChcImlucHV0W25hbWUkPV9zYW1lYXNzaGlwcGluZ2FkZHJlc3NdXCIpLmlzKFwiOmNoZWNrZWRcIikpIHtcbiAgICAgICAgICB2YXIgcGFnZUxvYWRTZWxlY3RlZEFkZHJlc3MgPSAkKCdzZWxlY3RbbmFtZSQ9XCJfYWRkcmVzc0xpc3RcIl0nKS5jaGlsZHJlbignOnNlbGVjdGVkJykuZmlyc3QoKTtcbiAgICAgICAgICAgICB2YXIgb25QYWdlTG9hZFNlbGVjdGVkQWRkcmVzcyA9ICQocGFnZUxvYWRTZWxlY3RlZEFkZHJlc3MpLmRhdGEoJ2FkZHJlc3MnKTtcbiAgICAgICAgICAgICBpZiAoIW9uUGFnZUxvYWRTZWxlY3RlZEFkZHJlc3MpIHtcbiAgICAgICAgICAgICAgICAgJChcIi5zZWxlY3RlZC1zaGlwcGluZy1hZGRyZXNzLCAubmV3LWFkZHJlc3MtZmllbGRcIikuYWRkQ2xhc3MoXCJoaWRlXCIpO1xuICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgfVxuICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRBZGRyZXNzID0gb25QYWdlTG9hZFNlbGVjdGVkQWRkcmVzcztcbiAgICAgICAgICAgICAgICAgJChcIi5zZWxlY3RlZC1zaGlwcGluZy1hZGRyZXNzXCIpLmVtcHR5KCk7XG4gICAgICAgICAgICAgICAgICQoXCIuc2VsZWN0ZWQtc2hpcHBpbmctYWRkcmVzc1wiKS5hcHBlbmQoc2VsZWN0ZWRBZGRyZXNzLmZpcnN0TmFtZStcIiBcIitzZWxlY3RlZEFkZHJlc3MubGFzdE5hbWUrXCI8YnIvPlwiK3NlbGVjdGVkQWRkcmVzcy5hZGRyZXNzMStcIiBcIitzZWxlY3RlZEFkZHJlc3MuYWRkcmVzczIrXCI8YnIvPlwiK3NlbGVjdGVkQWRkcmVzcy5jaXR5K1wiIFwiK3NlbGVjdGVkQWRkcmVzcy5zdGF0ZUNvZGUrXCIgXCIrc2VsZWN0ZWRBZGRyZXNzLnBvc3RhbENvZGUrXCI8YnIvPlwiK3NlbGVjdGVkQWRkcmVzcy5waG9uZSk7XG4gICAgICAgICAgICAgICAgICQoXCIuc2VsZWN0ZWQtc2hpcHBpbmctYWRkcmVzcywgLm5ldy1hZGRyZXNzLWZpZWxkXCIpLnJlbW92ZUNsYXNzKFwiaGlkZVwiKTtcbiAgICAgICAgICAgICAgICAgJChcIi5zaGlwcGluZy1hZGRyZXNzLWZpZWxkLXNlY3Rpb25cIikuYWRkQ2xhc3MoXCJoaWRlXCIpO1xuICAgICAgICAgICAgIH1cblxuICAgICB9Ki9cblxufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGFqYXggPSByZXF1aXJlKCcuLi8uLi9hamF4JyksXG4gICAgLy9mb3JtUHJlcGFyZSA9IHJlcXVpcmUoJy4vZm9ybVByZXBhcmUnKSxcbiAgICB1aWV2ZW50cyA9IHJlcXVpcmUoJy4uLy4uL3VpZXZlbnRzJyksXG4gICAgdG9vbHRpcCA9IHJlcXVpcmUoJy4uLy4uL3Rvb2x0aXAnKSxcbiAgICBwcm9ncmVzcyA9IHJlcXVpcmUoJy4uLy4uL3Byb2dyZXNzJyksXG4gICAgdmFsaWRhdG9yID0gcmVxdWlyZSgnLi4vLi4vdmFsaWRhdG9yJyksXG4gICAgLy9naWZ0Y2FyZCA9IHJlcXVpcmUoJy4uLy4uL2dpZnRjYXJkJyksXG4gICAgdXRpbCA9IHJlcXVpcmUoJy4uLy4uL3V0aWwnKTtcblxuLyoqXG4gKiBAZnVuY3Rpb25cbiAqIEBkZXNjcmlwdGlvbiB1cGRhdGVzIHRoZSBvcmRlciBzdW1tYXJ5IGJhc2VkIG9uIGEgcG9zc2libHkgcmVjYWxjdWxhdGVkIGJhc2tldCBhZnRlciBhIHNoaXBwaW5nIHByb21vdGlvbiBoYXMgYmVlbiBhcHBsaWVkXG4gKi9cbnZhciBmbGFnZWFsbG90bWVudGNvdmVyID0gJCgnaW5wdXQuZmxhZ2VhbGxvdG1lbnRjb3ZlcicpLnZhbCgpO1xudmFyIGFsbG90bWVudEFtb3VudCA9IHBhcnNlSW50KCQoJ2lucHV0LmFsbG90bWVudEFtb3VudCcpLnZhbCgpLCAxMCk7XG52YXIgY291cG9uTWVudGhvZHMgPSB7XG4gICAgdXBkYXRlU3VtbWFyeTogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgJHN1bW1hcnkgPSAkKCcjc2Vjb25kYXJ5IC5uZXctc3VtbWVyeS1jYXJ0Jyk7XG4gICAgICAgIC8vIGluZGljYXRlIHByb2dyZXNzXG4gICAgICAgIHByb2dyZXNzLnNob3coJHN1bW1hcnkpO1xuICAgICAgICB2YXIgc3RhdGVWYWx1ZSA9ICQoJ2JvZHknKS5maW5kKCcuc2hpcHBpbmctc3RhdGUnKS52YWwoKTtcbiAgICAgICAgdmFyIHVybCA9IHV0aWwuYXBwZW5kUGFyYW1Ub1VSTChVcmxzLnN1bW1hcnlSZWZyZXNoVVJMLCAnc2VsZWN0ZWRTdGF0ZScsIHN0YXRlVmFsdWUpO1xuICAgICAgICAvLyBsb2FkIHRoZSB1cGRhdGVkIHN1bW1hcnkgYXJlYVxuICAgICAgICAkc3VtbWFyeS5sb2FkKHVybCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gaGlkZSBlZGl0IHNoaXBwaW5nIG1ldGhvZCBsaW5rXG4gICAgICAgICAgICAkc3VtbWFyeS5mYWRlSW4oJ2Zhc3QnKTtcbiAgICAgICAgICAgICRzdW1tYXJ5LmZpbmQoJy5jaGVja291dC1taW5pLWNhcnQgLm1pbmlzaGlwbWVudCAuaGVhZGVyIGEnKS5oaWRlKCk7XG4gICAgICAgICAgICAkc3VtbWFyeS5maW5kKCcub3JkZXItdG90YWxzLXRhYmxlIC5vcmRlci1zaGlwcGluZyAubGFiZWwgYScpLmhpZGUoKTtcbiAgICAgICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICB1cGRhdGVjYXJ0c3VtbWFyeTogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdXJsID0gdXRpbC5hcHBlbmRQYXJhbVRvVVJMKFVybHMuVXBkYXRlQ2FydFN1bW1hcnkpO1xuICAgICAgICAvLyBsb2FkIHRoZSB1cGRhdGVkIGNhcnQgc3VtbWFyeSBhcmVhXG4gICAgICAgIGpRdWVyeS5hamF4KHtcbiAgICAgICAgICAgIHVybDogdXJsLFxuICAgICAgICAgICAgZGF0YVR5cGU6ICdodG1sJyxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgalF1ZXJ5KCcuYWpheC1jYXJ0c3VtbWFyeScpLmh0bWwoZGF0YSk7XG4gICAgICAgICAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9LFxuICAgIHNldENvdXBvblJlZGVtcHRpb25JbmZvOiBmdW5jdGlvbiAocmVkZW1wdGlvbikge1xuICAgICAgICBpZiAoIXJlZGVtcHRpb24pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvL3ZhciByZWRlZW1Nc2cgPSBcIiR7UmVzb3VyY2UubXNnKCdiaWxsaW5nLmNvdXBvbm5vdGFwcGxpZWQnLCdjaGVja291dCcsbnVsbCl9XCI7XG4gICAgICAgIC8vaWYocmVkZW1wdGlvbi5hcHBsaWVkKSByZWRlZW1Nc2cgPSBcIiR7UmVzb3VyY2UubXNnKCdiaWxsaW5nLmNvdXBvbmFwcGxpZWQnLCdjaGVja291dCcsbnVsbCl9XCI7XG4gICAgICAgIC8valF1ZXJ5KFwiJHsnIyd9Y291cG9uZW50cnkgLnJlZGVtcHRpb25cIikuYXBwZW5kKFwiPGRpdiBjbGFzcz1cXFwiZGlzY291bnQtc3VjY2Vzc1xcXCI+JHtSZXNvdXJjZS5tc2coJ2JpbGxpbmcuY291cG9ubGFiZWwnLCdjaGVja291dCcsbnVsbCl9IDxzcGFuIGNsYXNzPVxcXCJzdWJtaXRlZGNvdXBvblxcXCI+XCIgKyByZWRlbXB0aW9uLmNvdXBvbkNvZGUgKyBcIjwvc3Bhbj4gXCIgKyByZWRlZW1Nc2cgKyBcIjxidXR0b24gIHZhbHVlPVwiK3JlZGVtcHRpb24uY291cG9uQ29kZStcIiBjbGFzcz0ncmVtb3ZlY291cG9uJz5SZW1vdmU8L2J1dHRvbj48L2Rpdj5cIik7XG4gICAgICAgIHZhciB1cmwgPSB1dGlsLmFwcGVuZFBhcmFtVG9VUkwoVXJscy5TdWNjZXNzRGlzcGxheUNvdXBvbik7XG4gICAgICAgIGpRdWVyeS5nZXQodXJsLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgalF1ZXJ5KCcjY291cG9uZW50cnkgLnJlZGVtcHRpb24nKS5odG1sKGRhdGEpO1xuICAgICAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIHNldENvdXBvbkVycm9yOiBmdW5jdGlvbiAobXNnKSB7XG4gICAgICAgIHZhciAkY291cG9uY29kZSA9IGpRdWVyeSgnaW5wdXRbbmFtZSQ9XFwnX2JpbGxpbmdfY291cG9uQ29kZVxcJ10nKS5jbG9zZXN0KCcuY291cG9uY29kZScpO1xuICAgICAgICBpZiAoIW1zZykge1xuICAgICAgICAgICAgalF1ZXJ5KCcjY291cG9uZW50cnkgc3Bhbi5lcnJvcicpLnJlbW92ZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICgkY291cG9uY29kZS5maW5kKCdzcGFuLmVycm9yJykubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICQoJ2lucHV0W25hbWUkPVxcJ19iaWxsaW5nX2NvdXBvbkNvZGVcXCddJykuY2xvc2VzdCgnLmNvdXBvbmNvZGUnKS5hcHBlbmQoJzxzcGFuIGNsYXNzPVxcJ2Vycm9yXFwnPjxcXC9zcGFuPicpO1xuICAgICAgICB9XG4gICAgICAgICRjb3Vwb25jb2RlLmZpbmQoJ3NwYW4uZXJyb3InKS5odG1sKG1zZyk7XG4gICAgICAgIGpRdWVyeSgnaW5wdXRbbmFtZSQ9XFwnX2JpbGxpbmdfY291cG9uQ29kZVxcJ10nKS5hZGRDbGFzcygnZXJyb3JjbGllbnQnKTtcbiAgICB9LFxuICAgIHNldEdpZnRDZXJ0RXJyb3I6IGZ1bmN0aW9uIChtc2cpIHtcbiAgICAgICAgdmFyICRyZWRlZW1jb2RlID0galF1ZXJ5KCdpbnB1dFtuYW1lJD1cXCdfYmlsbGluZ19naWZ0Q2VydENvZGVcXCddJykuY2xvc2VzdCgnLmdpZnRjZXJ0ZmllbGRzJyk7XG4gICAgICAgIGlmICghbXNnKSB7XG4gICAgICAgICAgICBqUXVlcnkoJy5naWZ0Y2VydGZpZWxkcyAuZXJyb3InKS5yZW1vdmUoKTtcbiAgICAgICAgICAgIGpRdWVyeSgnaW5wdXRbbmFtZSQ9XFwnX2JpbGxpbmdfY291cG9uQ29kZVxcJ10nKS5yZW1vdmVDbGFzcygnZXJyb3JjbGllbnQnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoJHJlZGVlbWNvZGUuZmluZCgnc3Bhbi5lcnJvcicpLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICBqUXVlcnkoJ2lucHV0W25hbWUkPVxcJ19iaWxsaW5nX2dpZnRDZXJ0Q29kZVxcJ10nKS5jbG9zZXN0KCcuZ2lmdGNlcnRmaWVsZHMnKS5hcHBlbmQoJzxzcGFuIGNsYXNzPVxcJ2Vycm9yXFwnPjxcXC9zcGFuPicpO1xuICAgICAgICB9XG4gICAgICAgICRyZWRlZW1jb2RlLmZpbmQoJ3NwYW4uZXJyb3InKS5odG1sKG1zZyk7XG4gICAgICAgIGpRdWVyeSgnaW5wdXRbbmFtZSQ9XFwnX2JpbGxpbmdfZ2lmdENlcnRDb2RlXFwnXScpLmFkZENsYXNzKCdlcnJvcmNsaWVudCcpO1xuICAgICAgICAvL2pRdWVyeShcImlucHV0W25hbWU9JHtwZGljdC5DdXJyZW50Rm9ybXMuYmlsbGluZ2dpZnRjZXJ0LmdpZnRDZXJ0Q29kZS5odG1sTmFtZX1dXCIpLnBhcmVudCgpLmFwcGVuZChcIjxzcGFuIGNsYXNzPVxcXCJlcnJvcm1lc3NhZ2VcXFwiPlwiICsgbXNnICsgXCI8XFwvc3Bhbj5cIik7XG4gICAgfSxcbiAgICAvL3JlZnJlc2ggQ0MgZm9ybVxuICAgIHJlZnJlc2hDQzogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdXJsID0gdXRpbC5hcHBlbmRQYXJhbVRvVVJMKFVybHMuQ2xlYXJDQ0Zvcm0pO1xuICAgICAgICBqUXVlcnkuYWpheCh7XG4gICAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnaHRtbCcsXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9LFxuICAgIHNldFBheW1lbnRTZWN0aW9uOiBmdW5jdGlvbiAob3JkZXJCYWxhbmNlKSB7XG5cbiAgICAgICAgLyppZighb3JkZXJCYWxhbmNlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0qL1xuXG4gICAgICAgIGlmIChvcmRlckJhbGFuY2UgPD0gMCkge1xuICAgICAgICAgICAgLy9DbGVhcmluZyB0aGUgQ0MgRm9ybSBpZiB0aGUgcmVtYWluaW5nIGJhbGFuY2UgYWZ0ZXIgYWxsb3RtZW50IGFuZCBHQyBpcyB6ZXJvXG4gICAgICAgICAgICBjb3Vwb25NZW50aG9kcy5yZWZyZXNoQ0MoKTtcblxuICAgICAgICAgICAgLy8gaWYgdGhlIHdob2xlIG9yZGVyIHRvdGFsIHdhcyBwYWlkIHdpdGggZ2lmdCBjZXJ0cyB0aGVuIGhpZGUgb3RoZXIgcGF5bWVudCBtZXRob2RzIGFuZCBzaG93IGEgbWVzc2FnZVxuICAgICAgICAgICAgJCgnI3BheW1lbnRtZXRob2RzJykuaGlkZSgpO1xuICAgICAgICAgICAgJCgnLmNvbnRpbnVlY2hlY2tvdXRidXR0b24gLmNvbnRpbnVlY2hlY2tvdXQnKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgLy8gaWYgdGhlIG9yZGVyIHRvdGFsIGlzIHplcm8sIGRldGVybWluZSB3YXMgaXQgYmVjYXVzZSBvZiB0aGUgZ2lmdCBjZXJ0aWZpY2F0ZSB1c2Ugb3IgYSBwcm9tb3Rpb24/IGFuZCBzaG93IGFwcHJvcHJpYXRlIG1lc3NhZ2VcbiAgICAgICAgICAgIGlmIChmbGFnZWFsbG90bWVudGNvdmVyID09ICd0cnVlJykge1xuICAgICAgICAgICAgICAgICQoJy5naWZ0Y2VydHVzZWQnKS5hZGRDbGFzcygnYWxsb3RtZW50Y292ZXInKTtcbiAgICAgICAgICAgICAgICAkKCcuZ2lmdGNlcnR1c2VkJykuaHRtbCgnPHAgY2xhc3M9XFwnZmlyc3QtcGFyYVxcJz5Zb3VyIGFsbG90bWVudCBiYWxhbmNlIHdpbGwgY292ZXIgdGhlIGZ1bGwgY29zdCBvZiB0aGlzIG9yZGVyLjwvcD48cD5ObyBmdXJ0aGVyIHBheW1lbnQgd2lsbCBiZSBuZWNlc3NhcnkuPC9wPicpLnNob3coKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGFsbG90bWVudEFtb3VudCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmdpZnRjZXJ0dXNlZCcpLmFkZENsYXNzKCdhbGxvdG1lbnRjb3ZlcicpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYWxsb3RtZW50TWVzc2FnZSA9ICc8ZGl2IGNsYXNzPVwiZ3JlYXRlci10aGFuLTc2N1wiPjxwIGNsYXNzPVwiZmlyc3QtcGFyYVwiPllvdXIgYWxsb3RtZW50IGJhbGFuY2Ugd2lsbCBjb3ZlciB0aGUgZnVsbCBjb3N0IG9mIHRoaXMgb3JkZXIuPC9wPjxwPk5vIGZ1cnRoZXIgcGF5bWVudCB3aWxsIGJlIG5lY2Vzc2FyeS48L3A+PC9kaXY+PGRpdiBjbGFzcz1cImxlc3MtdGhhbi03NjdcIj48cD5Zb3VyIGFsbG90bWVudCBiYWxhbmNlIHdpbGwgY292ZXIgdGhlIGZ1bGwgY29zdCBvZiB0aGlzIG9yZGVyLiBObyBmdXJ0aGVyIHBheW1lbnQgd2lsbCBiZSBuZWNlc3NhcnkuPC9wPjwvZGl2Pic7XG4gICAgICAgICAgICAgICAgICAgICQoJy5naWZ0Y2VydHVzZWQnKS5odG1sKGFsbG90bWVudE1lc3NhZ2UpLnNob3coKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkKCcuZ2lmdGNlcnR1c2VkJykuYWRkQ2xhc3MoJ21lcmNoYW50Y292ZXInKS5odG1sKCQoJy5naWZ0Y2VydHBpJykubGVuZ3RoID4gMCA/ICc8cCBjbGFzcz1cXCdmaXJzdC1wYXJhXFwnPicgKyBSZXNvdXJjZXMuR0lGVENFUlRfTk8gKyAnPC9wPicgOiAnPHAgY2xhc3M9XFwnZmlyc3QtcGFyYVxcJz4nICsgUmVzb3VyY2VzLlpFUk9fQkFMQU5DRSArICc8L3A+Jykuc2hvdygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICQoJy5jYXJkbm90d29ya2luZycpLmhpZGUoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKG9yZGVyQmFsYW5jZSA+IDApICYmICgkKCdpbnB1dFtuYW1lJD1cInBheW1lbnRNZXRob2RzX3NlbGVjdGVkUGF5bWVudE1ldGhvZElEXCJdOmNoZWNrZWQnKS52YWwoKSA9PSAnQ1JFRElUX0NBUkQnKSkge1xuICAgICAgICAgICAgJCgnLmNhcmRub3R3b3JraW5nJykuc2hvdygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJCgnLmNhcmRub3R3b3JraW5nJykuaGlkZSgpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBvcmRlcnRvdGFsczogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdXJsID0gVXJscy5HZXRPcmRlclRvdGFsSnNvbjtcbiAgICAgICAgYWpheC5nZXRKc29uKHtcbiAgICAgICAgICAgIHVybDogdXJsLFxuICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuVG90YWwuT3JkZXJUb3RhbC5pbmRleE9mKCcwLjAwJykgIT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgY291cG9uTWVudGhvZHMuc2V0UGF5bWVudFNlY3Rpb24oJzAuMCcpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICQoJyNwYXltZW50bWV0aG9kcycpLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KCcuZ2lmdGNlcnR1c2VkICcpLnJlbW92ZUNsYXNzKCdtZXJjaGFudGNvdmVyJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB1aWV2ZW50cy5zeW5jY2hlY2tvdXRIKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgcmVtb3ZlR2lmdENlcnRpZmljYXRlOiBmdW5jdGlvbiAoZ2lmdENlcnRpZmljYXRlSWQpIHtcbiAgICAgICAgalF1ZXJ5KCcuYmFsYW5jZScpLmVtcHR5KCk7XG4gICAgICAgIC8vIHJlbW92ZSBnaWZ0IGNlcnRpZmljYXRlXG4gICAgICAgIHZhciB1cmwgPSB1dGlsLmFwcGVuZFBhcmFtVG9VUkwoVXJscy5SZW1vdmVHaWZ0Q2VydGlmaWNhdGUsICdnaWZ0Q2VydGlmaWNhdGVJRCcsIGdpZnRDZXJ0aWZpY2F0ZUlkKTtcbiAgICAgICAgYWpheC5nZXRKc29uKHtcbiAgICAgICAgICAgIHVybDogdXJsLFxuICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFkYXRhIHx8ICFkYXRhLmdpZnRDZXJ0aWZpY2F0ZSB8fCAhZGF0YS5naWZ0Q2VydGlmaWNhdGUucmVtb3ZlZCkge1xuICAgICAgICAgICAgICAgICAgICBjb3Vwb25NZW50aG9kcy5zZXRHaWZ0Q2VydEVycm9yKFJlc291cmNlcy5HSUZUQ0VSVF9FUlJPUik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gcmVtb3ZlIG1lc3NhZ2UgaW4gVUlcbiAgICAgICAgICAgICAgICAkKCcjZ2MtJyArIGdpZnRDZXJ0aWZpY2F0ZUlkKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAvLyByZWluc3RhdGUgcGF5bWVudCBtZXRob2RzIHNlY3Rpb24gd2hpY2ggbWlnaHQgaGF2ZSBiZWVuIGhpZGRlbiBpZiB0aGUgd2hvbGUgb3JkZXIgd2FzIHBhaWQgd2l0aCBnaWZ0IGNlcnRzXG4gICAgICAgICAgICAgICAgaWYgKCFmbGFnZWFsbG90bWVudGNvdmVyKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJyNwYXltZW50bWV0aG9kcycpLnNob3coKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gaGlkZSBnaWZ0IGNlcnQgdXNlZCBmb3Igb3RkZXIgdG90YWwgbWVzc2FnZVxuICAgICAgICAgICAgICAgIGlmICghZmxhZ2VhbGxvdG1lbnRjb3Zlcikge1xuICAgICAgICAgICAgICAgICAgICBqUXVlcnkoJy5naWZ0Y2VydHVzZWQnKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vY29tbWVudGluZyB0aGlzIHNpbmNlIHdlIGRvbid0IG5lZWQgdG8gY2xlYXIgdGhlIHBheW1lbnQgZm9ybSBvbiBhcHBseWluZyBHQyBhcyBpbiBvcmRlciBDQyBmaWVsZHMgYXJlIGZpcnN0LlxuICAgICAgICAgICAgICAgIC8vdmFyIGNvdW50cnlDb2RlID0galF1ZXJ5KFwiaW5wdXRbbmFtZT0ke3BkaWN0LkN1cnJlbnRGb3Jtcy5iaWxsaW5nLmJpbGxpbmdBZGRyZXNzLmFkZHJlc3NGaWVsZHMuY291bnRyeS5odG1sTmFtZX1dXCIpLnZhbCgpO1xuICAgICAgICAgICAgICAgIC8vdXBkYXRlUGF5bWVudE1ldGhvZHMoIGNvdW50cnlDb2RlICk7XG4gICAgICAgICAgICAgICAgdmFyIGNvdW50cnlDb2RlID0galF1ZXJ5KCdpbnB1dFtuYW1lJD1cXCdhZGRyZXNzRmllbGRzX2NvdW50cnlcXCddJykudmFsKCk7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjb3VudHJ5Q29kZSA9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICBjb3VudHJ5Q29kZSA9ICdVUyc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvdXBvbk1lbnRob2RzLnVwZGF0ZVBheW1lbnRNZXRob2RzKGNvdW50cnlDb2RlKTtcbiAgICAgICAgICAgICAgICBjb3Vwb25NZW50aG9kcy51cGRhdGVTdW1tYXJ5KCk7XG4gICAgICAgICAgICAgICAgY291cG9uTWVudGhvZHMub3JkZXJ0b3RhbHMoKTtcbiAgICAgICAgICAgICAgICB1aWV2ZW50cy5zeW5jY2hlY2tvdXRIKCk7XG4gICAgICAgICAgICAgICAgaWYgKCQoJyNwYXltZW50bWV0aG9kcyAudG9nZ2xlJykuZXEoMCkuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJy5jYXJkbm90d29ya2luZycpLnNob3coKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBiaW5kR2lmdENlcnRpZmljYXRlUmVtb3ZhbDogZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcjZ2lmdGNlcnRlbnRyeSBhLnJlbW92ZScpLnVuYmluZCgnY2xpY2snKS5iaW5kKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnY0lkID0gdXRpbC50cmltUHJlZml4KCQodGhpcykuYXR0cignaWQnKSwgJ3JnYy0nKTtcbiAgICAgICAgICAgIGNvdXBvbk1lbnRob2RzLnJlbW92ZUdpZnRDZXJ0aWZpY2F0ZShnY0lkKTtcbiAgICAgICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBzZXRHaWZ0Q2VydFJlZGVtcHRpb25JbmZvOiBmdW5jdGlvbiAoZ2lmdENlcnRpZmljYXRlSWQsIGFtb3VudEV4cHIpIHtcblxuICAgICAgICBpZiAoIWdpZnRDZXJ0aWZpY2F0ZUlkIHx8ICFnaWZ0Q2VydGlmaWNhdGVJZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgICQoJyNnYy0nICsgZ2lmdENlcnRpZmljYXRlSWQpLnJlbW92ZSgpO1xuICAgICAgICAvKmpRdWVyeShcIiR7JyMnfWdpZnRjZXJ0ZW50cnkgLnJlZGVtcHRpb25cIikuYXBwZW5kKFwiPGRpdiBjbGFzcz0nc3VjY2VzcyBnaWZ0Y2VydHBpJyBpZD0nZ2MtXCIrIGdpZnRDZXJ0aWZpY2F0ZUlkK1wiJz48ZGl2IGNsYXNzPSdnY3JlbW92ZSBkaXNjb3VudC1zdWNjZXNzJz48ZGl2IGNsYXNzPSdnY3JlbW92ZV9pY29uJz48YSBpZD0ncmdjLVwiK2dpZnRDZXJ0aWZpY2F0ZUlkICtcIicgY2xhc3M9J3JlbW92ZScgaHJlZj0nJHsnIyd9Jz48aW1nIHNyYz0nJHtVUkxVdGlscy5zdGF0aWNVUkwoJy9pbWFnZXMvaWNvbl9yZW1vdmUuZ2lmJyl9JyBhbHQ9JyR7UmVzb3VyY2UubXNnKCdnbG9iYWwucmVtb3ZlJywnbG9jYWxlJyxudWxsKX0nLz48L2E+PC9kaXY+PGRpdiBjbGFzcz0nZ2NfaWRsYWJlbCc+JHtSZXNvdXJjZS5tc2coJ21pbmliaWxsaW5naW5mby5naWZ0Y2VydGlmaWNhdGUnLCdjaGVja291dCcsbnVsbCl9IC0gXCIrZ2lmdENlcnRpZmljYXRlSWQrXCIgPC9kaXY+PGRpdiBjbGFzcz0nZ2NyZWRlZW1hbW91bnQnPlwiKyctJytcIlwiK2Ftb3VudEV4cHIrXCI8L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPSdnY2Rpc2NhcHBsaWVkJz5cIisgYW1vdW50RXhwcitcIiBcIisnICcrXCIgJHtSZXNvdXJjZS5tc2coJ2JpbGxpbmcuZ2lmdGNlcnRyZWRlZW1lZCcsJ2NoZWNrb3V0JyxudWxsKX08L2Rpdj48L2Rpdj5cIik7Ki9cbiAgICAgICAgJCgnI2dpZnRjZXJ0ZW50cnkgLnJlZGVtcHRpb24nKS5hcHBlbmQoJzxkaXYgY2xhc3M9XFwnc3VjY2VzcyBnaWZ0Y2VydHBpXFwnIGlkPVxcJ2djLScgKyBnaWZ0Q2VydGlmaWNhdGVJZCArICdcXCc+PGRpdiBjbGFzcz1cXCdnY3JlbW92ZSBkaXNjb3VudC1zdWNjZXNzXFwnPjxkaXYgY2xhc3M9XFwnZ2NfaWRsYWJlbFxcJz4nICsgZ2lmdENlcnRpZmljYXRlSWQgKyAnIDwvZGl2PjxkaXYgY2xhc3M9XFwnZ2NyZWRlZW1hbW91bnRcXCc+JyArICcgLSAnICsgJycgKyBhbW91bnRFeHByICsgJyAnICsgUmVzb3VyY2VzLkdJRlRfQ0VSVElGSUNBVEVfQ1JFRElUICsgJzwvZGl2PjxkaXYgY2xhc3M9XFwnZ2NyZW1vdmVfaWNvblxcJz48YSBpZD1cXCdyZ2MtJyArIGdpZnRDZXJ0aWZpY2F0ZUlkICsgJ1xcJyBjbGFzcz1cXCdyZW1vdmVcXCcgaHJlZj1cXCcjXFwnPjxzcGFuPicgKyBSZXNvdXJjZXMuUkVNT1ZFICsgJzwvc3Bhbj48L2E+PC9kaXY+PC9kaXY+PC9kaXY+Jyk7XG4gICAgICAgICQoJy5naWZ0Y2VydGZpZWxkcycpLmNzcyh7J2Rpc3BsYXknOiAnbm9uZSd9KTtcbiAgICAgICAgY291cG9uTWVudGhvZHMuYmluZEdpZnRDZXJ0aWZpY2F0ZVJlbW92YWwoKTtcbiAgICB9LFxuICAgIC8vIGluaXRpYWxpemVzIHRoZSBwYXltZW50IG1ldGhvZCBmb3Jtc1xuICAgIGluaXRQYXltZW50TWV0aG9kU2VsZWN0aW9uOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgLy8gZ2V0IHNlbGVjdGVkIHBheW1lbnQgbWV0aG9kIGZyb20gcGF5bWVudCBtZXRob2QgZm9ybVxuICAgICAgICB2YXIgcGF5bWVudE1ldGhvZElEID0galF1ZXJ5KCdpbnB1dFtuYW1lJD1cXCdfc2VsZWN0ZWRQYXltZW50TWV0aG9kSURcXCddOmNoZWNrZWQnKS52YWwoKTtcbiAgICAgICAgaWYgKCFwYXltZW50TWV0aG9kSUQpIHtcbiAgICAgICAgICAgIC8vIGlmIG5lY2Vzc2FyeSBmYWxsIGJhY2sgdG8gZGVmYXVsdCBwYXltZW50IG1ldGhvZCAoZmlyc3Qgbm9uLWdpZnQtY2VydGlmaWNhdGUgbWV0aG9kKVxuICAgICAgICAgICAgcGF5bWVudE1ldGhvZElEID0gJCgnaW5wdXRbdmFsdWU9XFwnQ1JFRElUX0NBUkRcXCddJykuYXR0cignaWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHNob3cgcGF5bWVudCBtZXRob2Qgc2VjdGlvblxuICAgICAgICBjb3Vwb25NZW50aG9kcy5jaGFuZ2VQYXltZW50TWV0aG9kKHBheW1lbnRNZXRob2RJRCk7XG4gICAgfSxcbiAgICAvLyBjaGFuZ2VzIHRoZSBwYXltZW50IG1ldGhvZCBmb3JtXG4gICAgY2hhbmdlUGF5bWVudE1ldGhvZDogZnVuY3Rpb24gKHBheW1lbnRNZXRob2RJRCkge1xuICAgICAgICAvL2lmIChqUXVlcnkoXCIuZ2lmdGNlcnR1c2VkXCIpLmNzcyhcImRpc3BsYXlcIikgIT0gXCJub25lXCIpIHJldHVybjtcbiAgICAgICAgLypcbiAgICAgICAgICAgalF1ZXJ5KFwiLnBheW1lbnRmb3JtXCIpLmhpZGUoKTtcbiAgICAgICAgICAgalF1ZXJ5KFwiI1BheW1lbnRNZXRob2RfXCIgKyBwYXltZW50TWV0aG9kSUQpLnNob3coKTtcbiAgICAgICAgICAgaWYoIGpRdWVyeShcIiNQYXltZW50TWV0aG9kX1wiICsgcGF5bWVudE1ldGhvZElEKS5sZW5ndGggPT0gMCApXG4gICAgICAgICAgIHtcbiAgICAgICAgICAgICAgIGpRdWVyeShcIiNQYXltZW50TWV0aG9kX0N1c3RvbVwiKS5zaG93KCk7XG4gICAgICAgICAgIH1cblxuICAgICAgICAgICAvLyBlbnN1cmUgY2hlY2tib3ggb2YgcGF5bWVudCBtZXRob2QgaXMgY2hlY2tlZFxuICAgICAgICAgICBqUXVlcnkoXCIjaXMtXCIgKyBwYXltZW50TWV0aG9kSUQpLmF0dHIoXCJjaGVja2VkXCIsIHRydWUpO1xuICAgICAgICAgICBpZigkKFwiI1BheW1lbnRNZXRob2RfQ1JFRElUX0NBUkRcIikuaXMoJzp2aXNpYmxlJykpe1xuICAgICAgICAgICAgICAgaWYocGF5bWVudE1ldGhvZElEID09IFwiUGF5UGFsXCIpe1xuICAgICAgICAgICAgICAgICAgICQoJy5jYXJkbm90d29ya2luZycpLmhpZGUoKTtcbiAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICQoJy5jYXJkbm90d29ya2luZycpLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICBqUXVlcnkoJy5wYXltZW50Zm9ybS5wYXlwYWwgLnBheXBhbG1zZycpLnJlbW92ZUNsYXNzKCdlcnJvcicpO1xuICAgICAgICAgICAgICAgfVxuICAgICAgICAgICB9Ki9cblxuICAgICAgICB2YXIgJHBheW1lbnRNZXRob2RzID0gJCgnLnBheW1lbnQtbWV0aG9kJyk7XG4gICAgICAgICRwYXltZW50TWV0aG9kcy5yZW1vdmVDbGFzcygncGF5bWVudC1tZXRob2QtZXhwYW5kZWQnKTtcblxuICAgICAgICB2YXIgJHNlbGVjdGVkUGF5bWVudE1ldGhvZCA9ICRwYXltZW50TWV0aG9kcy5maWx0ZXIoJ1tkYXRhLW1ldGhvZD1cIicgKyBwYXltZW50TWV0aG9kSUQgKyAnXCJdJyk7XG4gICAgICAgIGlmICgkc2VsZWN0ZWRQYXltZW50TWV0aG9kLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgJHNlbGVjdGVkUGF5bWVudE1ldGhvZCA9ICQoJ1tkYXRhLW1ldGhvZD1cIkN1c3RvbVwiXScpO1xuICAgICAgICB9XG4gICAgICAgICRzZWxlY3RlZFBheW1lbnRNZXRob2QuYWRkQ2xhc3MoJ3BheW1lbnQtbWV0aG9kLWV4cGFuZGVkJyk7XG5cbiAgICAgICAgLy8gZW5zdXJlIGNoZWNrYm94IG9mIHBheW1lbnQgbWV0aG9kIGlzIGNoZWNrZWRcbiAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XCJfc2VsZWN0ZWRQYXltZW50TWV0aG9kSURcIl0nKS5yZW1vdmVBdHRyKCdjaGVja2VkJyk7XG4gICAgICAgICQoJ2lucHV0W3ZhbHVlPScgKyBwYXltZW50TWV0aG9kSUQgKyAnXScpLnByb3AoJ2NoZWNrZWQnLCAnY2hlY2tlZCcpO1xuICAgIH0sXG4gICAgYmluZENyZWRpdENhcmRQb3B1bGF0aW9uSGFuZGxlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBzZWxlY3QgY3JlZGl0IGNhcmQgZnJvbSBsaXN0XG4gICAgICAgICQoJy5jcmVkaXRjYXJkbGlzdCBzZWxlY3QnKS5jaGFuZ2UoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNhcmRVVUlEID0gJCh0aGlzKS52YWwoKTtcbiAgICAgICAgICAgIGlmICghY2FyZFVVSUQpIHtcbiAgICAgICAgICAgICAgICBqUXVlcnkoJ2lucHV0W25hbWUkPVxcJ3BheW1lbnRNZXRob2RzX2NyZWRpdENhcmRfb3duZXJcXCddJykudmFsKCcnKTtcbiAgICAgICAgICAgICAgICBqUXVlcnkoJ2lucHV0W25hbWUkPVxcJ3BheW1lbnRNZXRob2RzX2NyZWRpdENhcmRfbnVtYmVyXFwnXScpLnZhbCgnJyk7XG4gICAgICAgICAgICAgICAgalF1ZXJ5KCdzZWxlY3RbbmFtZSQ9XFwncGF5bWVudE1ldGhvZHNfY3JlZGl0Q2FyZF9tb250aFxcJ10nKS52YWwoJycpO1xuICAgICAgICAgICAgICAgIGpRdWVyeSgnc2VsZWN0W25hbWUkPVxcJ3BheW1lbnRNZXRob2RzX2NyZWRpdENhcmRfeWVhclxcJ10nKS52YWwoJycpO1xuICAgICAgICAgICAgICAgIGpRdWVyeSgnc2VsZWN0W25hbWUkPVxcJ3BheW1lbnRNZXRob2RzX2NyZWRpdENhcmRfY3ZuXFwnXScpLnZhbCgnJyk7XG4gICAgICAgICAgICAgICAgJCgnLmNhcmR0eXBlaW1nID4gZGl2JykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICQoJy5leHBpcmF0aW9uZGF0ZS5lcnJvcicpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICBqUXVlcnkoJy5wYXltZW50Zm9ybSBhLmNsZWFyYnV0dG9uJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICQoJy5jdXN0b20tc2VsZWN0JykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RWYWwgPSAkKHRoaXMpLmZpbmQoJzpzZWxlY3RlZCcpLnRleHQoKTtcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuc2VsZWN0b3JPdXQnKS50ZXh0KHNlbGVjdFZhbCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBqUXVlcnkoJ2Zvcm1baWQkPVxcJ3BheW1lbnRNZXRob2RzX2NyZWRpdENhcmRcXCddIGlucHV0LCBmb3JtW2lkJD1cXCdwYXltZW50TWV0aG9kc19jcmVkaXRDYXJkXFwnXSBzZWxlY3QnKS5yZW1vdmVDbGFzcygnZXJyb3JjbGllbnQnKTtcbiAgICAgICAgICAgICAgICBqUXVlcnkoJ2Zvcm1baWQkPVxcJ3BheW1lbnRNZXRob2RzX2NyZWRpdENhcmRcXCddIHNwYW4uZXJyb3JjbGllbnQnKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgalF1ZXJ5KCdmb3JtW2lkJD1cXCdwYXltZW50TWV0aG9kc19jcmVkaXRDYXJkXFwnXSAuY3VzdG9tLXNlbGVjdCcpLnJlbW92ZUNsYXNzKCdjdXN0b21zZWxlY3QtZXJyb3InKTtcbiAgICAgICAgICAgICAgICBqUXVlcnkoJ2Zvcm1baWQkPVxcJ3BheW1lbnRNZXRob2RzX2NyZWRpdENhcmRcXCddIC5leHBpcmF0aW9uZGF0ZS5lcnJvcicpLmhpZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvdXBvbk1lbnRob2RzLnBvcHVsYXRlQ3JlZGl0Q2FyZEZvcm0oY2FyZFVVSUQpO1xuICAgICAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIGJpbmRQYXltZW50TWV0aG9kQ2hhbmdlSGFuZGxlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBiaW5kIHBheW1lbnQgbWV0aG9kIGNoYW5nZSBoYW5kbGVyXG4gICAgICAgICQoJyNwYXltZW50bWV0aG9kcyAudG9nZ2xlJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKGpRdWVyeSgnaW5wdXRbbmFtZSQ9XCJiaWxsaW5nX3BheXBhbHByb2Nlc3NlZFwiXScpLnZhbCgpICE9ICd0cnVlJykge1xuICAgICAgICAgICAgICAgICQoJyNwYXltZW50bWV0aG9kcyAudG9nZ2xlJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZElEID0galF1ZXJ5KHRoaXMpLmZpbmQoJ2lucHV0W25hbWUkPVwiX2JpbGxpbmdfcGF5bWVudE1ldGhvZHNfc2VsZWN0ZWRQYXltZW50TWV0aG9kSURcIl0nKS52YWwoKTtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWRJRCA9PSAnUGF5UGFsJykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGF5cGFsU3RhdHVzID0galF1ZXJ5KCdpbnB1dFtuYW1lJD1cIl9iaWxsaW5nX3BheXBhbHZhbF9wYXlwYWxwcm9jZXNzZWRcIl0nKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmNhcmRub3R3b3JraW5nJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocGF5cGFsU3RhdHVzID09ICd0cnVlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8kKCcuY29udGludWVjaGVja291dGJ1dHRvbiAuY29udGludWVjaGVja291dCcpLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyQoJy5jb250aW51ZWNoZWNrb3V0YnV0dG9uIC5jb250aW51ZWNoZWNrb3V0JykuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2VsZWN0ZWRJRCA9PSAnQ1JFRElUX0NBUkQnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghJCgnaW5wdXRbbmFtZSQ9XCJfY3JlZGl0Q2FyZF9vd25lclwiXScpLmhhc0NsYXNzKCdlcnJvcmNsaWVudCcpICYmICEkKCdpbnB1dFtuYW1lJD1cIl9jcmVkaXRDYXJkX251bWJlclwiXScpLmhhc0NsYXNzKCdlcnJvcmNsaWVudCcpICYmICEkKCdpbnB1dFtuYW1lJD1cIl9jcmVkaXRDYXJkX2N2blwiXScpLmhhc0NsYXNzKCdlcnJvcmNsaWVudCcpICYmICEkKCdzZWxlY3RbbmFtZSQ9XCJwYXltZW50TWV0aG9kc19jcmVkaXRDYXJkX3llYXJcIl0nKS5oYXNDbGFzcygnZXJyb3JjbGllbnQnKSAmJiAhJCgnc2VsZWN0W25hbWUkPVwicGF5bWVudE1ldGhvZHNfY3JlZGl0Q2FyZF9tb250aFwiXScpLmhhc0NsYXNzKCdlcnJvcmNsaWVudCcpICYmICQoJ2lucHV0W25hbWUkPVwiX2NyZWRpdENhcmRfb3duZXJcIl0nKS52YWwoKSAhPSAnJyAmJiAkKCdpbnB1dFtuYW1lJD1cIl9jcmVkaXRDYXJkX251bWJlclwiXScpLnZhbCgpICE9ICcnICYmICQoJ2lucHV0W25hbWUkPVwiX2NyZWRpdENhcmRfY3ZuXCJdJykudmFsKCkgIT0gJycgJiYgJCgnc2VsZWN0W25hbWUkPVwicGF5bWVudE1ldGhvZHNfY3JlZGl0Q2FyZF9leHBpcmF0aW9uX21vbnRoXCJdJykudmFsKCkgIT0gJycgJiYgJCgnc2VsZWN0W25hbWUkPVwicGF5bWVudE1ldGhvZHNfY3JlZGl0Q2FyZF9leHBpcmF0aW9uX21vbnRoXCJdJykudmFsKCkgIT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vJCgnLmNvbnRpbnVlY2hlY2tvdXRidXR0b24gLmNvbnRpbnVlY2hlY2tvdXQnKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8kKCcuY29udGludWVjaGVja291dGJ1dHRvbiAuY29udGludWVjaGVja291dCcpLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCdpbnB1dFtuYW1lPVwiYmlsbGluZ19wYXltZW50TWV0aG9kc19zZWxlY3RlZFBheW1lbnRNZXRob2RJRFwiXScpLnByb3AoJ2NoZWNrZWQnLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBjb3Vwb25NZW50aG9kcy5jaGFuZ2VQYXltZW50TWV0aG9kKHNlbGVjdGVkSUQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgJCgnI3BheW1lbnRtZXRob2RzIC5wYXltZW50Zm9ybS5jcmVkaXRjYXJkcGF5bWVudCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQoJy5wYXltZW50bWV0aG9kcyAudG9nZ2xlIGlucHV0I2lzLUNSRURJVF9DQVJEJykuY2xvc2VzdCgnLnRvZ2dsZScpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfSk7XG4gICAgICAgICQoJyNwYXltZW50bWV0aG9kcyAucGF5bWVudGZvcm0ucGF5cGFsJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCgnLnBheW1lbnRtZXRob2RzIC50b2dnbGUgaW5wdXQjaXMtUGF5UGFsJykuY2xvc2VzdCgnLnRvZ2dsZScpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICB1cGRhdGVQYXltZW50TWV0aG9kczogZnVuY3Rpb24gKGNvdW50cnlDb2RlKSB7XG5cbiAgICAgICAgdmFyIHVybCA9IHV0aWwuYXBwZW5kUGFyYW1Ub1VSTChVcmxzLlJlZnJlc2hQYXltZW50TWV0aG9kcywgJ2NvdW50cnlDb2RlJywgY291bnRyeUNvZGUpO1xuXG4gICAgICAgIC8vIGluZGljYXRlIHByb2dyZXNzXG4gICAgICAgIHByb2dyZXNzLnNob3coJyNwYXltZW50bWV0aG9kZm9ybScpO1xuXG4gICAgICAgIC8vIGxvYWQgdGhlIHVwZGF0ZWQgcGF5bWVudCBtZXRob2QgYXJlYVxuICAgICAgICAkKCcjcGF5bWVudG1ldGhvZGZvcm0nKS5sb2FkKHVybCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCgnI3BheW1lbnRtZXRob2Rmb3JtJykuZmFkZUluKCdmYXN0Jyk7XG4gICAgICAgICAgICAvLyQoJy5jb250aW51ZWNoZWNrb3V0YnV0dG9uIC5jb250aW51ZWNoZWNrb3V0JykuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgIC8vY291cG9uTWVudGhvZHMuaW5pdFBheW1lbnRNZXRob2RTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIGNvdXBvbk1lbnRob2RzLmJpbmRQYXltZW50TWV0aG9kQ2hhbmdlSGFuZGxlcigpO1xuICAgICAgICAgICAgY291cG9uTWVudGhvZHMuYmluZENyZWRpdENhcmRQb3B1bGF0aW9uSGFuZGxlcigpO1xuICAgICAgICAgICAgdmFsaWRhdG9yLmluaXQoKTtcbiAgICAgICAgICAgIHRvb2x0aXAuaW5pdCgpO1xuICAgICAgICAgICAgdXRpbC5jYXJkdHlwZS5pbml0KCk7XG4gICAgICAgICAgICAkKCcuZXhwaXJhdGlvbmRhdGUgLmN1c3RvbS1zZWxlY3Qgc2VsZWN0Jyk7XG4gICAgICAgICAgICAkKCcjUGF5bWVudE1ldGhvZF9DUkVESVRfQ0FSRCBpbnB1dCcpO1xuICAgICAgICAgICAgJCgnI1BheW1lbnRNZXRob2RfQ1JFRElUX0NBUkQgc2VsZWN0Jyk7XG4gICAgICAgICAgICB1aWV2ZW50cy5pbml0KCQoJyNwYXltZW50bWV0aG9kZm9ybScpKTtcbiAgICAgICAgICAgIC8vbG9hZCBjaGVja2luZyBmb3IgcGF5bWVudCB0eXBlXG4gICAgICAgICAgICB2YXIgJHBheVNlbGVjdGVkID0galF1ZXJ5KCcjcGF5bWVudG1ldGhvZHMnKS5maW5kKCdpbnB1dFtuYW1lJD1cInBheW1lbnRNZXRob2RzX3NlbGVjdGVkUGF5bWVudE1ldGhvZElEXCJdOmNoZWNrZWQnKTtcbiAgICAgICAgICAgIGlmICgkcGF5U2VsZWN0ZWQubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICAgICAgICAkcGF5U2VsZWN0ZWQuY2xvc2VzdCgnLnRvZ2dsZScpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRJRCA9ICRwYXlTZWxlY3RlZC52YWwoKTtcbiAgICAgICAgICAgICAgICBjb3Vwb25NZW50aG9kcy5jaGFuZ2VQYXltZW50TWV0aG9kKHNlbGVjdGVkSUQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY291cG9uTWVudGhvZHMub3JkZXJ0b3RhbHMoKTtcbiAgICAgICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vYXBwLmV4ZWNVanMoKTtcbiAgICB9LFxuICAgIHJlbW92ZUNvdXBvbkNvZGU6IGZ1bmN0aW9uIChjb3Vwb25Db2RlKSB7XG4gICAgICAgIGNvdXBvbk1lbnRob2RzLnNldENvdXBvbkVycm9yKG51bGwpO1xuICAgICAgICAvLyBub3RoaW5nIGVudGVyZWRcbiAgICAgICAgaWYgKCFjb3Vwb25Db2RlKSB7XG4gICAgICAgICAgICBjb3Vwb25NZW50aG9kcy5zZXRDb3Vwb25FcnJvcihSZXNvdXJjZXMuQklMTElOR19DT1VQT05NSVMpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIGF0dGVtcHQgdG8gcmVtb3ZlXG4gICAgICAgIGpRdWVyeSgnaW5wdXRbbmFtZSQ9XFwnYmlsbGluZ19jb3Vwb25Db2RlXFwnXScpLnZhbCgnJyk7XG5cbiAgICAgICAgdmFyIHVybCA9IHV0aWwuYXBwZW5kUGFyYW1Ub1VSTChVcmxzLlJlbW92ZUNvdXBvbiwgJ2NvdXBvbkNvZGUnLCBjb3Vwb25Db2RlKTtcbiAgICAgICAgJC5nZXQodXJsLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgY291cG9uTWVudGhvZHMudXBkYXRlU3VtbWFyeSgpO1xuICAgICAgICAgICAgY291cG9uTWVudGhvZHMudXBkYXRlY2FydHN1bW1hcnkoKTtcbiAgICAgICAgICAgIHZhciBnaWZ0Q2VydGlmaWNhdGVzID0galF1ZXJ5KGRhdGEpLmZpbHRlcignI2dpZnRDZXJ0aWZpY2F0ZURhdGEnKS50ZXh0KCk7XG4gICAgICAgICAgICBpZiAoZ2lmdENlcnRpZmljYXRlcyAhPSAndW5kZWZpbmVkJyAmJiBnaWZ0Q2VydGlmaWNhdGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgZ2lmdENlcnRpZmljYXRlZGF0YSA9IGdpZnRDZXJ0aWZpY2F0ZXMuc3BsaXQoJ3wnKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgZ2lmdENlcnRpZmljYXRlZGF0YS5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgY291cG9uTWVudGhvZHMuc2V0R2lmdENlcnRSZWRlbXB0aW9uSW5mbyhnaWZ0Q2VydGlmaWNhdGVkYXRhW2luZGV4XS5zcGxpdCgnLScpWzBdLnRyaW0oKSwgZ2lmdENlcnRpZmljYXRlZGF0YVtpbmRleF0uc3BsaXQoJy0nKVsxXS50cmltKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBjb3VudHJ5Q29kZSA9IGpRdWVyeSgnaW5wdXRbbmFtZSQ9XFwnYWRkcmVzc0ZpZWxkc19jb3VudHJ5XFwnXScpLnZhbCgpO1xuICAgICAgICBpZiAodHlwZW9mIGNvdW50cnlDb2RlID09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBjb3VudHJ5Q29kZSA9ICdVUyc7XG4gICAgICAgIH1cbiAgICAgICAgY291cG9uTWVudGhvZHMudXBkYXRlUGF5bWVudE1ldGhvZHMoY291bnRyeUNvZGUpO1xuICAgICAgICBjb3Vwb25NZW50aG9kcy5vcmRlcnRvdGFscygpO1xuXG4gICAgICAgIC8vIERldGVybWluZSBpZiBhIGJvbnVzLXByb2R1Y3QgcHJvbW90aW9uIHdhcyB0cmlnZ2VyZWQgYnkgdGhlIGNvdXBvbi5cbiAgICAgICAgLy8gSWYgc28sIGRpc3BsYXkgYSBwb3B1cCBhbGVydCBhbmQgZ2l2ZSB0aGUgY3VzdG9tZXIgYSBjaGFuY2UgdG9cbiAgICAgICAgLy8gcmV0dXJuIHRvIHRoZSBjYXJ0IGFuZCBzZWxlY3QgdGhlIGJvbnVzIHByb2R1Y3QuXG5cbiAgICAgICAgLyokKCcubm9Cb251c0J0bicpLnVuYmluZChcImNsaWNrXCIpLmNsaWNrKCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQoJy5ib251c2Rpc2NvdW50Y29udGFpbmVyJykuZGlhbG9nKCdjbG9zZScpO1xuICAgICAgICAgIH0pOyovXG4gICAgfSxcbiAgICBwb3B1bGF0ZUNyZWRpdENhcmRGb3JtOiBmdW5jdGlvbiAoY2FyZElEKSB7XG4gICAgICAgIC8vIGxvYWQgY2FyZCBkZXRhaWxzXG4gICAgICAgIHZhciB1cmwgPSBVcmxzLmJpbGxpbmdTZWxlY3RDQztcbiAgICAgICAgdXJsID0gdXRpbC5hcHBlbmRQYXJhbVRvVVJMKHVybCwgJ2NyZWRpdENhcmRVVUlEJywgY2FyZElEKTtcbiAgICAgICAgdmFyIHJlc3VsdCA9IGFqYXguZ2V0SnNvbih7XG4gICAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBhbGVydChSZXNvdXJjZXMuQ0NfTE9BRF9FUlJPUik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyICRjcmVkaXRDYXJkID0gJCgnYm9keScpLmZpbmQoJy5jcmVkaXRjYXJkcGF5bWVudCcpO1xuICAgICAgICAgICAgICAgIC8vIGZpbGwgdGhlIGZvcm0gLyBjbGVhciB0aGUgZm9ybWVyIGN2biBpbnB1dFxuICAgICAgICAgICAgICAgICRjcmVkaXRDYXJkLmZpbmQoJ2lucHV0W25hbWUkPVwiY3JlZGl0Q2FyZF9vd25lclwiXScpLnZhbChkYXRhLmhvbGRlcikudHJpZ2dlcignY2hhbmdlJyk7XG4gICAgICAgICAgICAgICAgJGNyZWRpdENhcmQuZmluZCgnc2VsZWN0W25hbWUkPVwiX3R5cGVcIl0nKS52YWwoZGF0YS50eXBlKS50cmlnZ2VyKCdjaGFuZ2UnKTtcbiAgICAgICAgICAgICAgICAkY3JlZGl0Q2FyZC5maW5kKCcuY3JlZGl0Q2FyZC1udW1iZXInKS52YWwoZGF0YS5tYXNrZWROdW1iZXIpLnRyaWdnZXIoJ2NoYW5nZScpO1xuICAgICAgICAgICAgICAgICRjcmVkaXRDYXJkLmZpbmQoJ1tuYW1lJD1cIl9tb250aFwiXScpLnZhbChkYXRhLmV4cGlyYXRpb25Nb250aCkudHJpZ2dlcignY2hhbmdlJyk7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50WWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgICAgICAgICBpZiAoKGRhdGEuZXhwaXJhdGlvblllYXIgPD0gY3VycmVudFllYXIpKSB7XG4gICAgICAgICAgICAgICAgICAgICRjcmVkaXRDYXJkLmZpbmQoJ1tuYW1lJD1cIl95ZWFyXCJdJykudmFsKCcnKS5jaGFuZ2UoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkY3JlZGl0Q2FyZC5maW5kKCdbbmFtZSQ9XCJfeWVhclwiXScpLnZhbChkYXRhLmV4cGlyYXRpb25ZZWFyKS50cmlnZ2VyKCdjaGFuZ2UnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJGNyZWRpdENhcmQuZmluZCgnaW5wdXRbbmFtZSQ9XCJfY3ZuXCJdJykudmFsKCcnKS50cmlnZ2VyKCdjaGFuZ2UnKTtcbiAgICAgICAgICAgICAgICBqUXVlcnkoJ2lucHV0W25hbWUkPVwiY3JlZGl0Q2FyZF9vd25lclwiXScpLnZhbChkYXRhLmNyZWRpdENhcmQuaG9sZGVyKTtcbiAgICAgICAgICAgICAgICB1aWV2ZW50cy5jaGFuZ2VGb3JtU2VsZWN0aW9uKCQoJ3NlbGVjdFtuYW1lJD1cIl90eXBlXCJdJylbMF0sIGRhdGEuY3JlZGl0Q2FyZC50eXBlKTtcbiAgICAgICAgICAgICAgICAkKCcuY3JlZGl0Q2FyZC1udW1iZXInKS52YWwoZGF0YS5jcmVkaXRDYXJkLm1hc2tlZE51bWJlcik7XG4gICAgICAgICAgICAgICAgdWlldmVudHMuY2hhbmdlRm9ybVNlbGVjdGlvbigkKCdbbmFtZSQ9XCJfbW9udGhcIl0nKVswXSwgZGF0YS5jcmVkaXRDYXJkLmV4cGlyYXRpb25Nb250aCk7XG4gICAgICAgICAgICAgICAgdWlldmVudHMuY2hhbmdlRm9ybVNlbGVjdGlvbigkKCdbbmFtZSQ9XCJfeWVhclwiXScpWzBdLCBkYXRhLmNyZWRpdENhcmQuZXhwaXJhdGlvblllYXIpO1xuICAgICAgICAgICAgICAgICQoJ2lucHV0W25hbWUkPVwiX2N2blwiXScpLnZhbCgnJyk7XG4gICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGVycm9yIG1lc3NhZ2luZ1xuICAgICAgICAgICAgICAgICQoJyNQYXltZW50TWV0aG9kX0NSRURJVF9DQVJEIHNwYW4uZXJyb3JtZXNzYWdlJykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgJCgnI1BheW1lbnRNZXRob2RfQ1JFRElUX0NBUkQgaW5wdXQuZXJyb3JtZXNzYWdlJykucmVtb3ZlQ2xhc3MoJ2Vycm9ybWVzc2FnZScpO1xuICAgICAgICAgICAgICAgICQoJyNQYXltZW50TWV0aG9kX0NSRURJVF9DQVJEIC5lcnJvcmxhYmVsJykucmVtb3ZlQ2xhc3MoJ2Vycm9ybGFiZWwnKTtcblxuICAgICAgICAgICAgICAgICQoJy5wYXltZW50Zm9ybS5jcmVkaXRjYXJkcGF5bWVudCAuZm9ybWZpZWxkIC5maWVsZC13cmFwcGVyJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmZpbmQoJ2lucHV0JykudmFsKCkgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5maW5kKCdpbnB1dCcpLnZhbCgpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgnLmZvcm1maWVsZCcpLmZpbmQoJ2EuY2xlYXJidXR0b24nKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50KCcuZm9ybWZpZWxkJykuZmluZCgnYS5jbGVhcmJ1dHRvbicpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChkYXRhLmNyZWRpdENhcmQudHlwZSA9PSAnVmlzYScpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gJ1Zpc2EnO1xuICAgICAgICAgICAgICAgICAgICAvL3Zpc2FcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEuY3JlZGl0Q2FyZC50eXBlID09ICdEaXNjb3ZlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gJ0Rpc2NvdmVyJztcbiAgICAgICAgICAgICAgICAgICAgLy9EaXNjb3ZlclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS5jcmVkaXRDYXJkLnR5cGUgPT0gJ0FtZXgnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9ICdBbWV4JztcbiAgICAgICAgICAgICAgICAgICAgLy9BbWVyaWNhbiBFeHByZXNzXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhLmNyZWRpdENhcmQudHlwZSA9PSAnTWFzdGVyQ2FyZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gJ01hc3RlckNhcmQnO1xuICAgICAgICAgICAgICAgICAgICAvL01hc3RlciBDYXJkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vZXJyb3JzcGFuLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAkKCcjcGF5bWVudG1ldGhvZHMnKS5maW5kKCdzZWxlY3RbbmFtZSQ9XCJfcGF5bWVudE1ldGhvZHNfY3JlZGl0Q2FyZF90eXBlXCJdJykudmFsKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgJCgnLmNhcmR0eXBlaW1nID4gZGl2JykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICQoJy5jYXJkdHlwZWltZyA+IGRpdi4nICsgcmVzdWx0KS5zaG93KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgc2V0R2lmdENlcnRCYWxhbmNlSW5mbzogZnVuY3Rpb24gKGFtb3VudEV4cHIpIHtcbiAgICAgICAgaWYgKCFhbW91bnRFeHByKSB7XG4gICAgICAgICAgICBqUXVlcnkoJy5iYWxhbmNlJykuZW1wdHkoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAkKCcuYmFsYW5jZScpLmFwcGVuZCgnPGRpdiBjbGFzcz1cXCdiYWxhbmNlYW10XFwnPicgKyBSZXNvdXJjZXMuR0lGVF9DRVJUX0JBTEFOQ0UgKyAnICcgKyBhbW91bnRFeHByICsgJyA8L2Rpdj4nKTtcbiAgICB9LFxuICAgIHJlZGVlbUdpZnRDZXJ0OiBmdW5jdGlvbiAoZ2lmdENlcnRpZmljYXRlSWQpIHtcbiAgICAgICAgY291cG9uTWVudGhvZHMuc2V0R2lmdENlcnRFcnJvcihudWxsKTtcbiAgICAgICAgY291cG9uTWVudGhvZHMuc2V0R2lmdENlcnRCYWxhbmNlSW5mbyhudWxsKTtcbiAgICAgICAgLy8gbm90aGluZyBlbnRlcmVkXG4gICAgICAgIGlmICghZ2lmdENlcnRpZmljYXRlSWQpIHtcbiAgICAgICAgICAgIGNvdXBvbk1lbnRob2RzLnNldEdpZnRDZXJ0RXJyb3IoUmVzb3VyY2VzLkdJRlRfQ0VSVF9JTlZBTElEKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBhdHRlbXB0IHRvIHJlZGVlbVxuICAgICAgICB2YXIgdXJsID0gdXRpbC5hcHBlbmRQYXJhbXNUb1VybChVcmxzLnJlZGVlbUdpZnRDZXJ0LCB7Z2lmdENlcnRpZmljYXRlSUQ6IGdpZnRDZXJ0aWZpY2F0ZUlkLCBmb3JtYXQ6ICdhamF4J30pO1xuICAgICAgICBhamF4LmdldEpzb24oe1xuICAgICAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgY291cG9uTWVudGhvZHMuc2V0R2lmdENlcnRFcnJvcihSZXNvdXJjZXMuR0lGVF9DRVJUX0lOVkFMSUQpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChkYXRhLnJlZGVtcHRpb25FcnJvck1zZykge1xuICAgICAgICAgICAgICAgICAgICBjb3Vwb25NZW50aG9kcy5zZXRHaWZ0Q2VydEVycm9yKGRhdGEucmVkZW1wdGlvbkVycm9yTXNnKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWRhdGEucmVkZW1wdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBjb3Vwb25NZW50aG9kcy5zZXRHaWZ0Q2VydEVycm9yKFJlc291cmNlcy5HSUZUX0NFUlRfSU5WQUxJRCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gZW1wdHkgaW5wdXQgZmllbGQgYW5kIGRpc3BsYXkgcmVkZW1wdGlvbiBpbiBVSVxuICAgICAgICAgICAgICAgICQoJ2lucHV0W25hbWUkPVxcJ2JpbGxpbmdfZ2lmdENlcnRDb2RlXFwnXScpLnZhbCgnJyk7XG4gICAgICAgICAgICAgICAgLy9jb3Vwb25NZW50aG9kcy5zZXRHaWZ0Q2VydFJlZGVtcHRpb25JbmZvKGRhdGEucmVkZW1wdGlvbi5naWZ0Q2VydGlmaWNhdGVJRCwgZGF0YS5yZWRlbXB0aW9uLmFtb3VudCk7XG4gICAgICAgICAgICAgICAgdmFyIGNvdW50cnlDb2RlID0gJCgnaW5wdXRbbmFtZSQ9XFwnX2FkZHJlc3NGaWVsZHNfY291bnRyeVxcJ10nKS52YWwoKTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNvdW50cnlDb2RlID09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvdW50cnlDb2RlID0gJ1VTJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY291cG9uTWVudGhvZHMudXBkYXRlUGF5bWVudE1ldGhvZHMoY291bnRyeUNvZGUpO1xuICAgICAgICAgICAgICAgIGNvdXBvbk1lbnRob2RzLnVwZGF0ZVN1bW1hcnkoKTtcbiAgICAgICAgICAgICAgICBjb3Vwb25NZW50aG9kcy5vcmRlcnRvdGFscygpO1xuICAgICAgICAgICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBjaGVja0dpZnRDZXJ0QmFsYW5jZTogZnVuY3Rpb24gKGdpZnRDZXJ0aWZpY2F0ZUlkKSB7XG4gICAgICAgIGNvdXBvbk1lbnRob2RzLnNldEdpZnRDZXJ0RXJyb3IobnVsbCk7XG4gICAgICAgIGNvdXBvbk1lbnRob2RzLnNldEdpZnRDZXJ0QmFsYW5jZUluZm8obnVsbCk7XG4gICAgICAgIC8vIG5vdGhpbmcgZW50ZXJlZFxuICAgICAgICBpZiAoIWdpZnRDZXJ0aWZpY2F0ZUlkKSB7XG4gICAgICAgICAgICBjb3Vwb25NZW50aG9kcy5zZXRHaWZ0Q2VydEVycm9yKFJlc291cmNlcy5HSUZUX0NFUlRfTUlTU0lORyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gbG9hZCBnaWZ0IGNlcnRpZmljYXRlIGRldGFpbHNcbiAgICAgICAgdmFyIHVybCA9IHV0aWwuYXBwZW5kUGFyYW1zVG9VcmwoVXJscy5HZXRHaWZ0Q2VydGlmaWNhdGVCYWxhbmNlLCB7XG4gICAgICAgICAgICBnaWZ0Q2VydGlmaWNhdGVJRDogZ2lmdENlcnRpZmljYXRlSWQsXG4gICAgICAgICAgICBmb3JtYXQ6ICdhamF4J1xuICAgICAgICB9KTtcbiAgICAgICAgYWpheC5nZXRKc29uKHtcbiAgICAgICAgICAgIHVybDogdXJsLFxuICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFkYXRhIHx8ICFkYXRhLmdpZnRDZXJ0aWZpY2F0ZSkge1xuICAgICAgICAgICAgICAgICAgICBjb3Vwb25NZW50aG9kcy5zZXRHaWZ0Q2VydEVycm9yKFJlc291cmNlcy5HSUZUX0NFUlRfSU5WQUxJRCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gZGlzcGxheSBkZXRhaWxzIGluIFVJXG4gICAgICAgICAgICAgICAgY291cG9uTWVudGhvZHMuc2V0R2lmdENlcnRCYWxhbmNlSW5mbyhkYXRhLmdpZnRDZXJ0aWZpY2F0ZS5iYWxhbmNlKTtcbiAgICAgICAgICAgICAgICB1aWV2ZW50cy5zeW5jY2hlY2tvdXRIKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn07XG5cbi8qKlxuICogQGZ1bmN0aW9uXG4gKiBAZGVzY3JpcHRpb24gRmlsbHMgdGhlIENyZWRpdCBDYXJkIGZvcm0gd2l0aCB0aGUgcGFzc2VkIGRhdGEtcGFyYW1ldGVyIGFuZCBjbGVhcnMgdGhlIGZvcm1lciBjdm4gaW5wdXRcbiAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhIFRoZSBDcmVkaXQgQ2FyZCBkYXRhIChob2xkZXIsIHR5cGUsIG1hc2tlZCBudW1iZXIsIGV4cGlyYXRpb24gbW9udGgveWVhcilcbiAqL1xuZnVuY3Rpb24gc2V0Q0NGaWVsZHMoZGF0YSkge1xuXG4gICAgdmFyICRjcmVkaXRDYXJkID0gJCgnW2RhdGEtbWV0aG9kPVwiQ1JFRElUX0NBUkRcIl0nKTtcbiAgICAkY3JlZGl0Q2FyZC5maW5kKCdpbnB1dFtuYW1lJD1cImNyZWRpdENhcmRfb3duZXJcIl0nKS52YWwoZGF0YS5ob2xkZXIpLnRyaWdnZXIoJ2NoYW5nZScpO1xuICAgICRjcmVkaXRDYXJkLmZpbmQoJ2lucHV0W25hbWUkPVwiY3JlZGl0Q2FyZF9vd25lclwiXScpLnZhbChkYXRhLmhvbGRlcikudHJpZ2dlcignYmx1cicpO1xuICAgICRjcmVkaXRDYXJkLmZpbmQoJ3NlbGVjdFtuYW1lJD1cIl90eXBlXCJdJykudmFsKGRhdGEudHlwZSkudHJpZ2dlcignY2hhbmdlJyk7XG4gICAgJGNyZWRpdENhcmQuZmluZCgnc2VsZWN0W25hbWUkPVwiX3R5cGVcIl0nKS52YWwoZGF0YS50eXBlKS50cmlnZ2VyKCdibHVyJyk7XG4gICAgJGNyZWRpdENhcmQuZmluZCgnaW5wdXRbbmFtZSo9XCJfY3JlZGl0Q2FyZF9udW1iZXJcIl0nKS52YWwoZGF0YS5tYXNrZWROdW1iZXIpLnRyaWdnZXIoJ2NoYW5nZScpO1xuICAgICRjcmVkaXRDYXJkLmZpbmQoJ2lucHV0W25hbWUqPVwiX2NyZWRpdENhcmRfbnVtYmVyXCJdJykudmFsKGRhdGEubWFza2VkTnVtYmVyKS50cmlnZ2VyKCdibHVyJyk7XG4gICAgJGNyZWRpdENhcmQuZmluZCgnW25hbWUkPVwiX2V4cGlyYXRpb25fbW9udGhcIl0nKS52YWwoZGF0YS5leHBpcmF0aW9uTW9udGgpLnRyaWdnZXIoJ2NoYW5nZScpO1xuICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcbiAgICB2YXIgY3VycmVudFllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgaWYgKChkYXRhLmV4cGlyYXRpb25ZZWFyIDw9IGN1cnJlbnRZZWFyKSkge1xuICAgICAgICAkY3JlZGl0Q2FyZC5maW5kKCdbbmFtZSQ9XCJfeWVhclwiXScpLnZhbCgnJykuY2hhbmdlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgJGNyZWRpdENhcmQuZmluZCgnW25hbWUkPVwiX3llYXJcIl0nKS52YWwoZGF0YS5leHBpcmF0aW9uWWVhcikudHJpZ2dlcignY2hhbmdlJyk7XG4gICAgfVxuICAgICRjcmVkaXRDYXJkLmZpbmQoJ1tuYW1lJD1cIl9leHBpcmF0aW9uX21vbnRoXCJdJykudmFsKGRhdGEuZXhwaXJhdGlvbk1vbnRoKS50cmlnZ2VyKCdibHVyJyk7XG4gICAgaWYgKChkYXRhLmV4cGlyYXRpb25ZZWFyIDw9IGN1cnJlbnRZZWFyKSkge1xuICAgICAgICAkY3JlZGl0Q2FyZC5maW5kKCdbbmFtZSQ9XCJfeWVhclwiXScpLnZhbCgnJykuYmx1cigpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgICRjcmVkaXRDYXJkLmZpbmQoJ1tuYW1lJD1cIl95ZWFyXCJdJykudmFsKGRhdGEuZXhwaXJhdGlvblllYXIpLnRyaWdnZXIoJ2JsdXInKTtcbiAgICB9XG4gICAgJGNyZWRpdENhcmQuZmluZCgnaW5wdXRbbmFtZSQ9XCJfY3ZuXCJdJykudmFsKCcnKS50cmlnZ2VyKCdjaGFuZ2UnKTtcbiAgICAkY3JlZGl0Q2FyZC5maW5kKCdpbnB1dFtuYW1lJD1cIl9jdm5cIl0nKS52YWwoJycpLnRyaWdnZXIoJ2JsdXInKTtcbiAgICB1aWV2ZW50cy5zeW5jY2hlY2tvdXRIKCk7XG59XG5cbi8qKlxuICogQGZ1bmN0aW9uXG4gKiBAZGVzY3JpcHRpb24gVXBkYXRlcyB0aGUgY3JlZGl0IGNhcmQgZm9ybSB3aXRoIHRoZSBhdHRyaWJ1dGVzIG9mIGEgZ2l2ZW4gY2FyZFxuICogQHBhcmFtIHtTdHJpbmd9IGNhcmRJRCB0aGUgY3JlZGl0IGNhcmQgSUQgb2YgYSBnaXZlbiBjYXJkXG4gKi9cbmZ1bmN0aW9uIHBvcHVsYXRlQ3JlZGl0Q2FyZEZvcm0oY2FyZElEKSB7XG4gICAgLy8gbG9hZCBjYXJkIGRldGFpbHNcbiAgICB2YXIgdXJsID0gdXRpbC5hcHBlbmRQYXJhbVRvVVJMKFVybHMuYmlsbGluZ1NlbGVjdENDLCAnY3JlZGl0Q2FyZFVVSUQnLCBjYXJkSUQpO1xuICAgIGFqYXguZ2V0SnNvbih7XG4gICAgICAgIHVybDogdXJsLFxuICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcbiAgICAgICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5hbGVydChSZXNvdXJjZXMuQ0NfTE9BRF9FUlJPUik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2V0Q0NGaWVsZHMoZGF0YSk7XG4gICAgICAgICAgICB1aWV2ZW50cy5zeW5jY2hlY2tvdXRIKCk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuLyoqXG4gKiBAZnVuY3Rpb25cbiAqIEBkZXNjcmlwdGlvbiBDaGFuZ2VzIHRoZSBwYXltZW50IG1ldGhvZCBmb3JtIGRlcGVuZGluZyBvbiB0aGUgcGFzc2VkIHBheW1lbnRNZXRob2RJRFxuICogQHBhcmFtIHtTdHJpbmd9IHBheW1lbnRNZXRob2RJRCB0aGUgSUQgb2YgdGhlIHBheW1lbnQgbWV0aG9kLCB0byB3aGljaCB0aGUgcGF5bWVudCBtZXRob2QgZm9ybSBzaG91bGQgYmUgY2hhbmdlZCB0b1xuICovXG5mdW5jdGlvbiB1cGRhdGVQYXltZW50TWV0aG9kKHBheW1lbnRNZXRob2RJRCkge1xuICAgIHZhciAkcGF5bWVudE1ldGhvZHMgPSAkKCcucGF5bWVudC1tZXRob2QnKTtcbiAgICAkcGF5bWVudE1ldGhvZHMucmVtb3ZlQ2xhc3MoJ3BheW1lbnQtbWV0aG9kLWV4cGFuZGVkJyk7XG5cbiAgICB2YXIgJHNlbGVjdGVkUGF5bWVudE1ldGhvZCA9ICRwYXltZW50TWV0aG9kcy5maWx0ZXIoJ1tkYXRhLW1ldGhvZD1cIicgKyBwYXltZW50TWV0aG9kSUQgKyAnXCJdJyk7XG4gICAgaWYgKCRzZWxlY3RlZFBheW1lbnRNZXRob2QubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICRzZWxlY3RlZFBheW1lbnRNZXRob2QgPSAkKCdbZGF0YS1tZXRob2Q9XCJDdXN0b21cIl0nKTtcbiAgICB9XG4gICAgJHNlbGVjdGVkUGF5bWVudE1ldGhvZC5hZGRDbGFzcygncGF5bWVudC1tZXRob2QtZXhwYW5kZWQnKTtcblxuICAgIC8vIGVuc3VyZSBjaGVja2JveCBvZiBwYXltZW50IG1ldGhvZCBpcyBjaGVja2VkXG4gICAgJCgnaW5wdXRbbmFtZSQ9XCJfc2VsZWN0ZWRQYXltZW50TWV0aG9kSURcIl0nKS5yZW1vdmVBdHRyKCdjaGVja2VkJyk7XG4gICAgJCgnaW5wdXRbdmFsdWU9JyArIHBheW1lbnRNZXRob2RJRCArICddJykucHJvcCgnY2hlY2tlZCcsICdjaGVja2VkJyk7XG5cbiAgICAvL2Zvcm1QcmVwYXJlLnZhbGlkYXRlRm9ybSgpO1xufVxuXG4vKipcbiAqIEBmdW5jdGlvblxuICogQGRlc2NyaXB0aW9uIGxvYWRzIGJpbGxpbmcgYWRkcmVzcywgR2lmdCBDZXJ0aWZpY2F0ZXMsIENvdXBvbiBhbmQgUGF5bWVudCBtZXRob2RzXG4gKi9cbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAvL3ZhciAkY2hlY2tvdXRGb3JtID0gJCgnLmNoZWNrb3V0LWJpbGxpbmcnKTtcbiAgICAvL3ZhciAkYWRkR2lmdENlcnQgPSAkKCcjYWRkLWdpZnRjZXJ0Jyk7XG4gICAgLy92YXIgJGdpZnRDZXJ0Q29kZSA9ICQoJ2lucHV0W25hbWUkPVwiX2dpZnRDZXJ0Q29kZVwiXScpO1xuICAgIC8vdmFyICRhZGRDb3Vwb24gPSAkKCcjYWRkLWNvdXBvbicpO1xuICAgIC8vdmFyICRjb3Vwb25Db2RlID0gJCgnaW5wdXRbbmFtZSQ9XCJfY291cG9uQ29kZVwiXScpO1xuICAgIHZhciAkc2VsZWN0UGF5bWVudE1ldGhvZCA9ICQoJy5wYXltZW50LW1ldGhvZC1vcHRpb25zJyk7XG4gICAgdmFyIHNlbGVjdGVkUGF5bWVudE1ldGhvZCA9ICRzZWxlY3RQYXltZW50TWV0aG9kLmZpbmQoJzpjaGVja2VkJykudmFsKCk7XG5cbiAgICAvKiBmb3JtUHJlcGFyZS5pbml0KHtcbiAgICAgICAgIGZvcm1TZWxlY3RvcjogJ2Zvcm1baWQkPVwiYmlsbGluZ1wiXScsXG4gICAgICAgICBjb250aW51ZVNlbGVjdG9yOiAnW25hbWUkPVwiYmlsbGluZ19zYXZlXCJdJ1xuICAgICB9KTsqL1xuICAgIHZhciBhY3RpdmVQYXltZW50TWV0aG9kSUQgPSAkKCdib2R5JykuZmluZCgnLnBheW1lbnRtZXRob2RzX2NvbnQgLmlucHV0LXJhZGlvOmNoZWNrZWQnKS5hdHRyKCdpZCcpO1xuICAgIGlmIChhY3RpdmVQYXltZW50TWV0aG9kSUQgPT0gJ2lzLVBheVBhbCcpIHtcbiAgICAgICAgJCgnLnBheW1lbnRmb3JtIC50ZXh0aW5wdXQsIC5wYXltZW50Zm9ybSAueWVhcnNlbGVjdCBzZWxlY3QsIC5wYXltZW50Zm9ybSAubW9udGhzZWxlY3Qgc2VsZWN0LCAuYWRkcmVzc29wdGlvbnMgLmNoZWNraW5wdXQnKS5yZW1vdmVDbGFzcygncmVxdWlyZWQnKTtcbiAgICAgICAgJCgnLmNhcmRub3R3b3JraW5nJykuaGlkZSgpO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgICAgJCgnLnBheW1lbnRmb3JtIC50ZXh0aW5wdXQsIC5wYXltZW50Zm9ybSAueWVhcnNlbGVjdCBzZWxlY3QsIC5wYXltZW50Zm9ybSAubW9udGhzZWxlY3Qgc2VsZWN0LCAuYWRkcmVzc29wdGlvbnMgLmNoZWNraW5wdXQnKS5hZGRDbGFzcygncmVxdWlyZWQnKTtcbiAgICAgICAgJCgnLmNhcmRub3R3b3JraW5nJykuc2hvdygpO1xuXG4gICAgfVxuICAgIGlmICghalF1ZXJ5KCcuY3JlZGl0Y2FyZGxpc3Qgc2VsZWN0JykudmFsKCkpIHtcbiAgICAgICAgJCgnLmNyZWRpdGNhcmRfbmFtZScpLnZhbCgnJyk7XG4gICAgICAgICQoJy5jcmVkaXRDYXJkLW51bWJlcicpLnZhbCgnJyk7XG4gICAgICAgICQoJy5tb250aHNlbGVjdCcpLnZhbCgnJyk7XG4gICAgICAgICQoJy55ZWFyc2VsZWN0JykudmFsKCcnKTtcbiAgICAgICAgJCgnLmNyZWRpdGNhcmRfY3ZuJykudmFsKCcnKTtcbiAgICAgICAgJCgnLmNhcmR0eXBlaW1nID4gZGl2JykuaGlkZSgpO1xuICAgICAgICAkKCcuZXhwaXJhdGlvbmRhdGUuZXJyb3InKS5oaWRlKCk7XG4gICAgICAgICQoJy5leHBpcmF0aW9uZGF0ZXZhbGlkLmVycm9yJykuaGlkZSgpO1xuICAgICAgICAkKCcucGF5bWVudGZvcm0gYS5jbGVhcmJ1dHRvbicpLmhpZGUoKTtcbiAgICB9XG4gICAgJCgnLmV4cGlyYXRpb25kYXRlIC5jdXN0b20tc2VsZWN0IHNlbGVjdCcpLm9uKCdibHVyJywgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZCA9IG5ldyBEYXRlKCksXG4gICAgICAgICAgICBtdGggPSBkLmdldE1vbnRoKCkgKyAxLFxuICAgICAgICAgICAgeXkgPSBkLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgIGlmICghalF1ZXJ5KHRoaXMpLnZhbCgpKSB7XG4gICAgICAgICAgICAkKCcuZXhwaXJhdGlvbmRhdGUuZXJyb3InKS5zaG93KCk7XG4gICAgICAgICAgICAkKCcuZXhwaXJhdGlvbmRhdGV2YWxpZC5lcnJvcicpLmhpZGUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChqUXVlcnkoJy5leHBpcmF0aW9uZGF0ZSAuY3VzdG9tLXNlbGVjdC5jdXN0b21zZWxlY3QtZXJyb3InKS5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgICQoJy5leHBpcmF0aW9uZGF0ZS5lcnJvcicpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAkKCcuZXhwaXJhdGlvbmRhdGV2YWxpZC5lcnJvcicpLmhpZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBzZWxlY3RlZE10aCA9ICQoJy5leHBpcmF0aW9uZGF0ZSAuY3VzdG9tLXNlbGVjdCBzZWxlY3RbaWQkPVxcJ2JpbGxpbmdfcGF5bWVudE1ldGhvZHNfY3JlZGl0Q2FyZF9leHBpcmF0aW9uX21vbnRoXFwnXScpLnZhbCgpO1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkeWVhciA9ICQoJy5leHBpcmF0aW9uZGF0ZSAuY3VzdG9tLXNlbGVjdCBzZWxlY3RbaWQkPVxcJ2JpbGxpbmdfcGF5bWVudE1ldGhvZHNfY3JlZGl0Q2FyZF9leHBpcmF0aW9uX3llYXJcXCddJykudmFsKCk7XG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWR5ZWFyICYmIHNlbGVjdGVkTXRoKSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWR5ZWFyID0gc2VsZWN0ZWR5ZWFyLnJlcGxhY2UoJywnLCAnJyk7XG4gICAgICAgICAgICAgICAgaWYgKChzZWxlY3RlZHllYXIgPD0geXkpICYmIChzZWxlY3RlZE10aCA8IG10aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmV4cGlyYXRpb25kYXRlLmVycm9yJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAkKCcuZXhwaXJhdGlvbmRhdGV2YWxpZC5lcnJvcicpLnNob3coKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICAkKCdib2R5Jykub24oJ2NsaWNrJywgJy5yZWRlbXB0aW9uIC5kaXNjb3VudC1zdWNjZXNzIGJ1dHRvbi5yZW1vdmUtY29wJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB2YXIgdXJsID0gJCh0aGlzKS52YWwoKTtcbiAgICAgICAgY291cG9uTWVudGhvZHMucmVtb3ZlQ291cG9uQ29kZSh1cmwpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG4gICAgLyogSklSQSBQUkVWLTEzNSA6IERpc2FibGVkIENyZWRpdCBDYXJkIGluIEJNIGlzIGRpc3BsYXlpbmcgaW4gdGhlIGFwcGxpY2F0aW9uLlxuICAgICAgIENoYW5nZWQgZGVmYXVsdCBvcHRpb24gZnJvbSAnQ1JFRElUX0NBUkQnIHRvIGZpcnN0IGF2YWlsYWJsZSBwYXltZW50IG1ldGhvZC4qL1xuICAgIHVwZGF0ZVBheW1lbnRNZXRob2QoKHNlbGVjdGVkUGF5bWVudE1ldGhvZCkgPyBzZWxlY3RlZFBheW1lbnRNZXRob2QgOiAkKCcucGF5bWVudC1tZXRob2Qtb3B0aW9ucyBpbnB1dCcpLmZpcnN0KCkudmFsKCkpO1xuICAgICQoJ2JvZHknKS5vbignY2xpY2snLCAnLnBheW1lbnQtbWV0aG9kLW9wdGlvbnMgaW5wdXRbdHlwZT1cInJhZGlvXCJdJywgZnVuY3Rpb24gKCkge1xuICAgICAgICB1cGRhdGVQYXltZW50TWV0aG9kKCQodGhpcykudmFsKCkpO1xuICAgICAgICBpZiAoJCh0aGlzKS5pcygnOmNoZWNrZWQnKSkge1xuICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcudG9nZ2xlJykuc2libGluZ3MoJy50b2dnbGUnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5hdHRyKCdpZCcpID09ICdpcy1QYXlQYWwnKSB7XG4gICAgICAgICAgICAgICAgJCgnLnBheW1lbnRmb3JtIC50ZXh0aW5wdXQsIC5wYXltZW50Zm9ybSAueWVhcnNlbGVjdCBzZWxlY3QsIC5wYXltZW50Zm9ybSAubW9udGhzZWxlY3Qgc2VsZWN0LCAuYWRkcmVzc29wdGlvbnMgLmNoZWNraW5wdXQnKS5yZW1vdmVDbGFzcygncmVxdWlyZWQnKTtcbiAgICAgICAgICAgICAgICAkKCcuY2FyZG5vdHdvcmtpbmcnKS5oaWRlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQoJy5wYXltZW50Zm9ybSAudGV4dGlucHV0LCAucGF5bWVudGZvcm0gLnllYXJzZWxlY3Qgc2VsZWN0LCAucGF5bWVudGZvcm0gLm1vbnRoc2VsZWN0IHNlbGVjdCwgLmFkZHJlc3NvcHRpb25zIC5jaGVja2lucHV0JykuYWRkQ2xhc3MoJ3JlcXVpcmVkJyk7XG4gICAgICAgICAgICAgICAgJCgnLmNhcmRub3R3b3JraW5nJykuc2hvdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcudG9nZ2xlJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB9XG4gICAgICAgIHVpZXZlbnRzLmN1c3RvbUZpZWxkcygpO1xuICAgICAgICB1aWV2ZW50cy5zeW5jY2hlY2tvdXRIKCk7XG4gICAgfSk7XG4gICAgJCgnYm9keScpLm9uKCdjbGljaycsICcucGF5bWVudC1tZXRob2Qtb3B0aW9ucyAudG9nZ2xlICBpbWcnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQodGhpcykuY2xvc2VzdCgnbGFiZWwnKS5maW5kKCdpbnB1dFt0eXBlPVwicmFkaW9cIl0nKS50cmlnZ2VyKCdjbGljaycpO1xuICAgIH0pO1xuXG4gICAgLy8gc2VsZWN0IGNyZWRpdCBjYXJkIGZyb20gbGlzdFxuICAgICQoJ2JvZHknKS5vbignY2hhbmdlJywgJyNjcmVkaXRDYXJkTGlzdCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNhcmRVVUlEID0gJCh0aGlzKS52YWwoKTtcbiAgICAgICAgaWYgKCFjYXJkVVVJRCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHBvcHVsYXRlQ3JlZGl0Q2FyZEZvcm0oY2FyZFVVSUQpO1xuXG4gICAgICAgIC8vIHJlbW92ZSBzZXJ2ZXIgc2lkZSBlcnJvclxuICAgICAgICAkKCcucmVxdWlyZWQuZXJyb3InKS5yZW1vdmVDbGFzcygnZXJyb3InKTtcbiAgICAgICAgJCgnLmVycm9yLW1lc3NhZ2UnKS5yZW1vdmUoKTtcbiAgICB9KTtcbiAgICAkKCdib2R5Jykub24oJ2NsaWNrJywgJyNnaWZ0Y2VydGVudHJ5IGEucmVtb3ZlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZ2NJZCA9IHV0aWwudHJpbVByZWZpeCgkKHRoaXMpLmF0dHIoJ2lkJyksICdyZ2MtJyk7XG4gICAgICAgIGNvdXBvbk1lbnRob2RzLnJlbW92ZUdpZnRDZXJ0aWZpY2F0ZShnY0lkKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuICAgICQoJ2JvZHknKS5vbignY2xpY2snLCAnI2NoZWNrLWdpZnRjZXJ0JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB2YXIgZ2NJZCA9IGpRdWVyeSgnaW5wdXRbbmFtZSQ9XFwnYmlsbGluZ19naWZ0Q2VydENvZGVcXCddJykudmFsKCkudG9VcHBlckNhc2UoKTtcbiAgICAgICAgY291cG9uTWVudGhvZHMuY2hlY2tHaWZ0Q2VydEJhbGFuY2UoZ2NJZCk7XG4gICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuXG4gICAgJCgnYm9keScpLm9uKCdjbGljaycsICcjYWRkLWdpZnRjZXJ0JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB2YXIgZ2NJZCA9IGpRdWVyeSgnaW5wdXRbbmFtZSQ9XFwnYmlsbGluZ19naWZ0Q2VydENvZGVcXCddJykudmFsKCkudG9VcHBlckNhc2UoKTtcbiAgICAgICAgY291cG9uTWVudGhvZHMucmVkZWVtR2lmdENlcnQoZ2NJZCk7XG4gICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuXG4gICAgJCgnYm9keScpLm9uKCdjbGljaycsICcjYWRkLWNvdXBvbicsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdmFyIC8vJGVycm9yID0gJGNoZWNrb3V0Rm9ybS5maW5kKCcuY291cG9uLWVycm9yJyksXG4gICAgICAgICAgICBjb2RlID0gJCgnaW5wdXRbbmFtZSQ9XCJfY291cG9uQ29kZVwiXScpLnZhbCgpO1xuICAgICAgICBjb3Vwb25NZW50aG9kcy5zZXRDb3Vwb25FcnJvcihudWxsKTtcbiAgICAgICAgaWYgKGNvZGUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBjb3Vwb25NZW50aG9kcy5zZXRDb3Vwb25FcnJvcihSZXNvdXJjZXMuQ09VUE9OX0NPREVfTUlTU0lORyk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgdXJsID0gdXRpbC5hcHBlbmRQYXJhbXNUb1VybChVcmxzLmFkZENvdXBvbiwge1xuICAgICAgICAgICAgY291cG9uQ29kZTogY29kZSxcbiAgICAgICAgICAgIGZvcm1hdDogJ2FqYXgnXG4gICAgICAgIH0pO1xuICAgICAgICAkLmdldEpTT04odXJsLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgdmFyIG1zZyA9ICcnO1xuICAgICAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgICAgICAgbXNnID0gUmVzb3VyY2VzLkNPVVBPTl9JTlZBTElEO1xuICAgICAgICAgICAgICAgIGNvdXBvbk1lbnRob2RzLnNldENvdXBvbkVycm9yKG1zZyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRhdGEucmVkZW1wdGlvbi5yZWRlbXB0aW9uRXJyb3JNc2cpIHtcbiAgICAgICAgICAgICAgICBjb3Vwb25NZW50aG9kcy5zZXRDb3Vwb25FcnJvcihkYXRhLnJlZGVtcHRpb24ucmVkZW1wdGlvbkVycm9yTXNnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWRhdGEucmVkZW1wdGlvbikge1xuICAgICAgICAgICAgICAgIG1zZyA9IFJlc291cmNlcy5DT1VQT05fSU5WQUxJRDtcbiAgICAgICAgICAgICAgICBjb3Vwb25NZW50aG9kcy5zZXRDb3Vwb25FcnJvcihtc2cpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGVtcHR5IGlucHV0IGZpZWxkIGFuZCBkaXNwbGF5IHJlZGVtcHRpb24gaW4gVUlcbiAgICAgICAgICAgIGpRdWVyeSgnaW5wdXRbbmFtZSQ9XFwnX2JpbGxpbmdfY291cG9uQ29kZVxcJ10nKS52YWwoJycpO1xuICAgICAgICAgICAgalF1ZXJ5KCdpbnB1dFtuYW1lJD1cXCdfYmlsbGluZ19jb3Vwb25Db2RlXFwnXScpLnJlbW92ZUNsYXNzKCdlcnJvcmNsaWVudCcpO1xuICAgICAgICAgICAgY291cG9uTWVudGhvZHMuc2V0Q291cG9uUmVkZW1wdGlvbkluZm8oZGF0YS5yZWRlbXB0aW9uKTtcbiAgICAgICAgICAgIC8vIHVwZGF0ZSBnaWZ0IGNhcmQgcmVkZW1wdGlvbnMgYXMgYW1vdW50cyBtaWdodCBoYXZlIGNoYW5nZWQgYWZ0ZXIgY291cG9uXG4gICAgICAgICAgICBqUXVlcnkuZWFjaChkYXRhLnJlZGVtcHRpb24uZ2NSZWRlbXB0aW9ucywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGNvdXBvbk1lbnRob2RzLnNldEdpZnRDZXJ0UmVkZW1wdGlvbkluZm8odGhpcy5naWZ0Q2VydGlmaWNhdGVJRCwgdGhpcy5hbW91bnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YXIgY291bnRyeUNvZGUgPSAkKCdpbnB1dFtuYW1lJD1cXCdfYWRkcmVzc0ZpZWxkc19jb3VudHJ5XFwnXScpLnZhbCgpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBjb3VudHJ5Q29kZSA9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIGNvdW50cnlDb2RlID0gJ1VTJztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY291cG9uTWVudGhvZHMudXBkYXRlU3VtbWFyeSgpO1xuICAgICAgICAgICAgY291cG9uTWVudGhvZHMudXBkYXRlY2FydHN1bW1hcnkoKTtcbiAgICAgICAgICAgIGNvdXBvbk1lbnRob2RzLnVwZGF0ZVBheW1lbnRNZXRob2RzKGNvdW50cnlDb2RlKTtcbiAgICAgICAgICAgIGNvdXBvbk1lbnRob2RzLm9yZGVydG90YWxzKCk7XG4gICAgICAgICAgICB1aWV2ZW50cy5zeW5jY2hlY2tvdXRIKCk7XG4gICAgICAgICAgICAvLyBEZXRlcm1pbmUgaWYgYSBib251cy1wcm9kdWN0IHByb21vdGlvbiB3YXMgdHJpZ2dlcmVkIGJ5IHRoZSBjb3Vwb24uXG4gICAgICAgICAgICAvLyBJZiBzbywgZGlzcGxheSBhIHBvcHVwIGFsZXJ0IGFuZCBnaXZlIHRoZSBjdXN0b21lciBhIGNoYW5jZSB0b1xuICAgICAgICAgICAgLy8gcmV0dXJuIHRvIHRoZSBjYXJ0IGFuZCBzZWxlY3QgdGhlIGJvbnVzIHByb2R1Y3QuXG4gICAgICAgICAgICBpZiAoZGF0YS5yZWRlbXB0aW9uLmJvbnVzUHJvbW90aW9uQXBwbGllZCkge1xuICAgICAgICAgICAgICAgICQoJy5ib251c2Rpc2NvdW50Y29udGFpbmVyIC5ib251c3Byb2R1Y3Rwcm9tbycpLmFwcGVuZChkYXRhLnJlZGVtcHRpb24uYm9udXNQcm9tb3Rpb25DYWxsb3V0KTtcbiAgICAgICAgICAgICAgICAkKCcuYm9udXNkaXNjb3VudGNvbnRhaW5lciBkaXYuZGV0YWlscycpLmh0bWwoZGF0YS5yZWRlbXB0aW9uLmJvbnVzUHJvbW90aW9uRGV0YWlscyk7XG5cbiAgICAgICAgICAgICAgICAkKCcuYm9udXNkaXNjb3VudGNvbnRhaW5lcicpLnNob3coKTtcbiAgICAgICAgICAgICAgICAkKCcuYm9udXNkaXNjb3VudGNvbnRhaW5lcicpLmRpYWxvZyh7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBSZXNvdXJjZXMuQk9OVVNfUFJPRFVDVCxcbiAgICAgICAgICAgICAgICAgICAgYmdpZnJhbWU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGF1dG9PcGVuOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbW9kYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogMjUwLFxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogNTAwLFxuICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgalF1ZXJ5KCcuYm9udXNkaXNjb3VudGNvbnRhaW5lcicpLmRpYWxvZygnb3BlbicpO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGpRdWVyeSgnLnNlbGVjdEJvbnVzQnRuJykudW5iaW5kKCdjbGljaycpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBqUXVlcnkoJy5ib251c2Rpc2NvdW50Y29udGFpbmVyJykuZGlhbG9nKCdjbG9zZScpO1xuICAgICAgICAgICAgICAgIGxvY2F0aW9uLmhyZWYgPSAnJHtVUkxVdGlscy5odHRwcyhcXCdDYXJ0LVNob3dcXCcpfSc7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGpRdWVyeSgnLm5vQm9udXNCdG4nKS51bmJpbmQoJ2NsaWNrJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGpRdWVyeSgnLmJvbnVzZGlzY291bnRjb250YWluZXInKS5kaWFsb2coJ2Nsb3NlJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyB0cmlnZ2VyIGV2ZW50cyBvbiBlbnRlclxuICAgICQoJ2JvZHknKS5vbigna2V5ZG93bicsICdpbnB1dFtuYW1lJD1cIl9jb3Vwb25Db2RlXCJdJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgaWYgKGUud2hpY2ggPT09IDEzKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAkKCcjYWRkLWNvdXBvbicpLmNsaWNrKCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICAkKCdib2R5Jykub24oJ2tleWRvd24nLCAnaW5wdXRbbmFtZSQ9XCJfZ2lmdENlcnRDb2RlXCJdJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgaWYgKGUud2hpY2ggPT09IDEzKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAkKCcjYWRkLWdpZnRjZXJ0JykuY2xpY2soKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgJCgnLnRyeXBheXBhbCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnLmNvbnRpbnVlY2hlY2tvdXQtcGF5cGFsbG9naW4nKS50cmlnZ2VyKCdjbGljaycpO1xuICAgIH0pO1xuXG4gICAgaWYgKCQoJy5wdF9jaGVja291dCAucGF5bWVudGZvcm0ucGF5cGFsIC5lcnJvci1wYXlwYWwtaGVhZGluZycpLmxlbmd0aCA+IDAgfHwgJCgnLnB0X2NoZWNrb3V0IC5wYXltZW50Zm9ybS5wYXlwYWwgLnBheXBhbG1zZy5zdWNjZXNzLXBheXBhbCcpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgJCgnYm9keSwgaHRtbCcpLmFuaW1hdGUoe1xuICAgICAgICAgICAgc2Nyb2xsVG9wOiAkKCcjcGF5bWVudG1ldGhvZGZvcm0gbGVnZW5kJykub2Zmc2V0KCkudG9wXG4gICAgICAgIH0sIDYwMCk7XG4gICAgfVxuXG4gICAgJCgnLnN3aXRjaHRvY3JlZGl0Jykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcucGF5bWVudG1ldGhvZHNfY29udCAudG9nZ2xlJykuZXEoMCkuZmluZCgnLmlucHV0LXJhZGlvJykudHJpZ2dlcignY2xpY2snKTtcbiAgICB9KTtcbiAgICAvL1BSRVZBSUwgLSBpbml0IEFkZHJlc3MgVmFsaWRhdGlvblxuICAgIHJlcXVpcmUoJy4uLy4uL2FkZHJlc3N2YWxpZGF0aW9uJykuaW5pdCgpO1xuXG4gICAgdXRpbC5jYXJkdHlwZS5pbml0KCk7XG4gICAgJCgnYm9keScpLm9uKCdjbGljaycsICcuY291cG9uY29kZSAubGFiZWwnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICgkKCcucHJvbW8taW5wdXQtYnV0dG9uJykuaXMoJzp2aXNpYmxlJykgPT0gdHJ1ZSkge1xuICAgICAgICAgICAgJCgnLnByb21vLWlucHV0LWJ1dHRvbicpLmhpZGUoKTtcbiAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmNvdXBvbmNvZGUnKS5maW5kKCdzcGFuLmVycm9yJykuaGlkZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJCgnLnByb21vLWlucHV0LWJ1dHRvbicpLnNob3coKTtcbiAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmNvdXBvbmNvZGUnKS5maW5kKCdzcGFuLmVycm9yJykuc2hvdygpO1xuICAgICAgICB9XG4gICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcbiAgICB9KTtcbiAgICBpZiAoJCgnLmd1ZXN0YmlsbGluZ2Zvcm0gLnBhc3N3b3JkIC5lcnJvcm1lc3NhZ2UnKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICQoJy5ndWVzdGJpbGxpbmdmb3JtIC5wYXNzd29yZCAuZXJyb3JtZXNzYWdlJykucmVtb3ZlKCk7XG4gICAgfVxuXG4gICAgJCgnLmd1ZXN0YmlsbGluZ2Zvcm0gLmJpbGxpbmctY29ucGFzc3dvcmQnKS5ibHVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGJpbGxpbmdQYXMgPSAkKCcuZ3Vlc3RiaWxsaW5nZm9ybSAuYmlsbGluZy1wYXNzd29yZCcpLnZhbCgpO1xuICAgICAgICB2YXIgYmlsbGluZ0NvbnBhcyA9ICQoJy5ndWVzdGJpbGxpbmdmb3JtIC5iaWxsaW5nLWNvbnBhc3N3b3JkJykudmFsKCk7XG4gICAgICAgICQoJy5ndWVzdGJpbGxpbmdmb3JtIC5wYXNzd29yZCAuZXJyb3JtZXNzYWdlJykucmVtb3ZlKCk7XG4gICAgICAgIGlmIChiaWxsaW5nUGFzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGlmIChiaWxsaW5nQ29ucGFzLmxlbmd0aCA8IDUpIHtcbiAgICAgICAgICAgICAgICAkKCcuZ3Vlc3RiaWxsaW5nZm9ybSAuYmlsbGluZy1jb25wYXNzd29yZCcpLmFkZENsYXNzKCdlcnJvcmNsaWVudCcpO1xuICAgICAgICAgICAgICAgICQoJy5iaWxsaW5nY29uZnBhc3N3b3JkJykudGV4dChSZXNvdXJjZXMuYmlsbGluZ3Bhc3N3b3JkY29uZmlybV9taW4pLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgICAgICAgICAgICAgLy8kKCcuY29udGludWVjaGVja291dGJ1dHRvbiAuY29udGludWVjaGVja291dCcpLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGJpbGxpbmdQYXMgIT0gYmlsbGluZ0NvbnBhcykge1xuICAgICAgICAgICAgICAgICQoJy5ndWVzdGJpbGxpbmdmb3JtIC5iaWxsaW5nLWNvbnBhc3N3b3JkJykuYWRkQ2xhc3MoJ2Vycm9yY2xpZW50Jyk7XG4gICAgICAgICAgICAgICAgJCgnLmJpbGxpbmdjb25mcGFzc3dvcmQnKS50ZXh0KFJlc291cmNlcy5iaWxsaW5ncGFzc3dvcmRjb25maXJtKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgICAgICAgICAgIC8vJCgnLmNvbnRpbnVlY2hlY2tvdXRidXR0b24gLmNvbnRpbnVlY2hlY2tvdXQnKS5hdHRyKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKCcuZ3Vlc3RiaWxsaW5nZm9ybSAuYmlsbGluZy1jb25wYXNzd29yZCcpLnJlbW92ZUNsYXNzKCdlcnJvcmNsaWVudCcpO1xuICAgICAgICAgICAgICAgICQoJy5iaWxsaW5nY29uZnBhc3N3b3JkJykudGV4dChSZXNvdXJjZXMuYmlsbGluZ3Bhc3N3b3JkY29uZmlybSkuYWRkQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgICAgICAgICBpZiAoISQoJ2lucHV0W25hbWUkPVwiX2NyZWRpdENhcmRfb3duZXJcIl0nKS5oYXNDbGFzcygnZXJyb3JjbGllbnQnKSAmJiAhJCgnaW5wdXRbbmFtZSQ9XCJfY3JlZGl0Q2FyZF9udW1iZXJcIl0nKS5oYXNDbGFzcygnZXJyb3JjbGllbnQnKSAmJiAhJCgnaW5wdXRbbmFtZSQ9XCJfY3JlZGl0Q2FyZF9jdm5cIl0nKS5oYXNDbGFzcygnZXJyb3JjbGllbnQnKSAmJiAhJCgnc2VsZWN0W25hbWUkPVwicGF5bWVudE1ldGhvZHNfY3JlZGl0Q2FyZF95ZWFyXCJdJykuaGFzQ2xhc3MoJ2Vycm9yY2xpZW50JykgJiYgISQoJ3NlbGVjdFtuYW1lJD1cInBheW1lbnRNZXRob2RzX2NyZWRpdENhcmRfbW9udGhcIl0nKS5oYXNDbGFzcygnZXJyb3JjbGllbnQnKSAmJiAkKCdpbnB1dFtuYW1lJD1cIl9jcmVkaXRDYXJkX293bmVyXCJdJykudmFsKCkgIT0gJycgJiYgJCgnaW5wdXRbbmFtZSQ9XCJfY3JlZGl0Q2FyZF9udW1iZXJcIl0nKS52YWwoKSAhPSAnJyAmJiAkKCdpbnB1dFtuYW1lJD1cIl9jcmVkaXRDYXJkX2N2blwiXScpLnZhbCgpICE9ICcnICYmICQoJ3NlbGVjdFtuYW1lJD1cInBheW1lbnRNZXRob2RzX2NyZWRpdENhcmRfeWVhclwiXScpLnZhbCgpICE9ICcnICYmICQoJ3NlbGVjdFtuYW1lJD1cInBheW1lbnRNZXRob2RzX2NyZWRpdENhcmRfbW9udGhcIl0nKS52YWwoKSAhPSAnJykge1xuICAgICAgICAgICAgICAgICAgICAvLyQoJy5jb250aW51ZWNoZWNrb3V0YnV0dG9uIC5jb250aW51ZWNoZWNrb3V0JykucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKCcuZ3Vlc3RiaWxsaW5nZm9ybSAuYmlsbGluZy1jb25wYXNzd29yZCcpLnJlbW92ZUNsYXNzKCdlcnJvcmNsaWVudCcpO1xuICAgICAgICAgICAgJCgnLmJpbGxpbmdjb25mcGFzc3dvcmQnKS50ZXh0KFJlc291cmNlcy5iaWxsaW5ncGFzc3dvcmRjb25maXJtKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICAgICAgICAgaWYgKCEkKCdpbnB1dFtuYW1lJD1cIl9jcmVkaXRDYXJkX293bmVyXCJdJykuaGFzQ2xhc3MoJ2Vycm9yY2xpZW50JykgJiYgISQoJ2lucHV0W25hbWUkPVwiX2NyZWRpdENhcmRfbnVtYmVyXCJdJykuaGFzQ2xhc3MoJ2Vycm9yY2xpZW50JykgJiYgISQoJ2lucHV0W25hbWUkPVwiX2NyZWRpdENhcmRfY3ZuXCJdJykuaGFzQ2xhc3MoJ2Vycm9yY2xpZW50JykgJiYgISQoJ3NlbGVjdFtuYW1lJD1cInBheW1lbnRNZXRob2RzX2NyZWRpdENhcmRfeWVhclwiXScpLmhhc0NsYXNzKCdlcnJvcmNsaWVudCcpICYmICEkKCdzZWxlY3RbbmFtZSQ9XCJwYXltZW50TWV0aG9kc19jcmVkaXRDYXJkX21vbnRoXCJdJykuaGFzQ2xhc3MoJ2Vycm9yY2xpZW50JykgJiYgJCgnaW5wdXRbbmFtZSQ9XCJfY3JlZGl0Q2FyZF9vd25lclwiXScpLnZhbCgpICE9ICcnICYmICQoJ2lucHV0W25hbWUkPVwiX2NyZWRpdENhcmRfbnVtYmVyXCJdJykudmFsKCkgIT0gJycgJiYgJCgnaW5wdXRbbmFtZSQ9XCJfY3JlZGl0Q2FyZF9jdm5cIl0nKS52YWwoKSAhPSAnJyAmJiAkKCdzZWxlY3RbbmFtZSQ9XCJwYXltZW50TWV0aG9kc19jcmVkaXRDYXJkX3llYXJcIl0nKS52YWwoKSAhPSAnJyAmJiAkKCdzZWxlY3RbbmFtZSQ9XCJwYXltZW50TWV0aG9kc19jcmVkaXRDYXJkX21vbnRoXCJdJykudmFsKCkgIT0gJycpIHtcbiAgICAgICAgICAgICAgICAvLyQoJy5jb250aW51ZWNoZWNrb3V0YnV0dG9uIC5jb250aW51ZWNoZWNrb3V0JykucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgICQoJy5ndWVzdGJpbGxpbmdmb3JtIC5iaWxsaW5nLXBhc3N3b3JkJykuYmluZCgnYmx1cicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGJpbGxpbmdQYXMgPSAkKCcuZ3Vlc3RiaWxsaW5nZm9ybSAuYmlsbGluZy1wYXNzd29yZCcpLnZhbCgpO1xuICAgICAgICB2YXIgYmlsbGluZ0NvbnBhcyA9ICQoJy5ndWVzdGJpbGxpbmdmb3JtIC5iaWxsaW5nLWNvbnBhc3N3b3JkJykudmFsKCk7XG4gICAgICAgIC8vJCgnLmNvbnRpbnVlY2hlY2tvdXRidXR0b24gLmNvbnRpbnVlY2hlY2tvdXQnKS5hdHRyKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuXG4gICAgICAgIGlmICgkKHRoaXMpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICQoJy5ndWVzdGJpbGxpbmdmb3JtIC5iaWxsaW5nLWNvbnBhc3N3b3JkJykuYWRkQ2xhc3MoJ3JlcXVpcmVkJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKCcuZ3Vlc3RiaWxsaW5nZm9ybSAuYmlsbGluZy1jb25wYXNzd29yZCcpLnJlbW92ZUNsYXNzKCdyZXF1aXJlZCcpO1xuICAgICAgICAgICAgJCgnLmd1ZXN0YmlsbGluZ2Zvcm0gLmJpbGxpbmctY29ucGFzc3dvcmQnKS5yZW1vdmVDbGFzcygnZXJyb3JjbGllbnQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYmlsbGluZ1Bhcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpZiAoYmlsbGluZ1Bhcy5sZW5ndGggPCA1KSB7XG4gICAgICAgICAgICAgICAgJCgnLmd1ZXN0YmlsbGluZ2Zvcm0gLmJpbGxpbmctcGFzc3dvcmQnKS5hZGRDbGFzcygnZXJyb3JjbGllbnQnKTtcbiAgICAgICAgICAgICAgICAkKCcuYmlsbGluZ3Bhc3N3b3JkJykudGV4dChSZXNvdXJjZXMuYmlsbGluZ3Bhc3N3b3JkY29uZmlybV9taW4pLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgICAgICAgICAgICAgLy8kKCcuY29udGludWVjaGVja291dGJ1dHRvbiAuY29udGludWVjaGVja291dCcpLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQoJy5ndWVzdGJpbGxpbmdmb3JtIC5iaWxsaW5nLXBhc3N3b3JkJykucmVtb3ZlQ2xhc3MoJ2Vycm9yY2xpZW50Jyk7XG4gICAgICAgICAgICAgICAgJCgnLmJpbGxpbmdwYXNzd29yZCcpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKCcuZ3Vlc3RiaWxsaW5nZm9ybSAuYmlsbGluZy1wYXNzd29yZCcpLnJlbW92ZUNsYXNzKCdlcnJvcmNsaWVudCcpO1xuICAgICAgICAgICAgJCgnLmJpbGxpbmdwYXNzd29yZCcpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoKGJpbGxpbmdQYXMgPT0gYmlsbGluZ0NvbnBhcykgJiYgKGJpbGxpbmdQYXMubGVuZ3RoID49IDUpKSB7XG4gICAgICAgICAgICBpZiAoISQoJ2lucHV0W25hbWUkPVwiX2NyZWRpdENhcmRfb3duZXJcIl0nKS5oYXNDbGFzcygnZXJyb3JjbGllbnQnKSAmJiAhJCgnaW5wdXRbbmFtZSQ9XCJfY3JlZGl0Q2FyZF9udW1iZXJcIl0nKS5oYXNDbGFzcygnZXJyb3JjbGllbnQnKSAmJiAhJCgnaW5wdXRbbmFtZSQ9XCJfY3JlZGl0Q2FyZF9jdm5cIl0nKS5oYXNDbGFzcygnZXJyb3JjbGllbnQnKSAmJiAhJCgnc2VsZWN0W25hbWUkPVwicGF5bWVudE1ldGhvZHNfY3JlZGl0Q2FyZF95ZWFyXCJdJykuaGFzQ2xhc3MoJ2Vycm9yY2xpZW50JykgJiYgISQoJ3NlbGVjdFtuYW1lJD1cInBheW1lbnRNZXRob2RzX2NyZWRpdENhcmRfbW9udGhcIl0nKS5oYXNDbGFzcygnZXJyb3JjbGllbnQnKSAmJiAkKCdpbnB1dFtuYW1lJD1cIl9jcmVkaXRDYXJkX293bmVyXCJdJykudmFsKCkgIT0gJycgJiYgJCgnaW5wdXRbbmFtZSQ9XCJfY3JlZGl0Q2FyZF9udW1iZXJcIl0nKS52YWwoKSAhPSAnJyAmJiAkKCdpbnB1dFtuYW1lJD1cIl9jcmVkaXRDYXJkX2N2blwiXScpLnZhbCgpICE9ICcnICYmICQoJ3NlbGVjdFtuYW1lJD1cInBheW1lbnRNZXRob2RzX2NyZWRpdENhcmRfeWVhclwiXScpLnZhbCgpICE9ICcnICYmICQoJ3NlbGVjdFtuYW1lJD1cInBheW1lbnRNZXRob2RzX2NyZWRpdENhcmRfbW9udGhcIl0nKS52YWwoKSAhPSAnJykge1xuICAgICAgICAgICAgICAgIC8vJCgnLmNvbnRpbnVlY2hlY2tvdXRidXR0b24gLmNvbnRpbnVlY2hlY2tvdXQnKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAoJCgnLmV4cGlyYXRpb25kYXRlIC5jdXN0b20tc2VsZWN0IC5maWVsZC13cmFwcGVyIHNwYW4uZXJyb3JtZXNzYWdlJykubGVuZ3RoID4gMCkge1xuICAgICAgICAkKCcuZXhwaXJhdGlvbmRhdGUgLmN1c3RvbS1zZWxlY3Qgc3Bhbi5lcnJvcm1lc3NhZ2UnKS5oaWRlKCk7XG4gICAgICAgICQoJy5leHBpcmF0aW9uZGF0ZS5lcnJvcicpLnNob3coKTtcbiAgICB9XG4gICAgJCgnLmNoZWNrb3V0YmlsbGluZyAuY29udGludWUtY2hlY2tvdXQtYnV0dG9uIC5jb250aW51ZWNoZWNrb3V0JykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZXJyb3Jjb3VudCA9IDA7XG4gICAgICAgIGlmICghKCQoJyNQYXltZW50TWV0aG9kX0NSRURJVF9DQVJEJykuaXMoJzp2aXNpYmxlJykpKSB7XG4gICAgICAgICAgICAkKCcucGF5bWVudGZvcm0gLnRleHRpbnB1dCwgLnBheW1lbnRmb3JtIHNlbGVjdCcpLnJlbW92ZUNsYXNzKCdyZXF1aXJlZCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghalF1ZXJ5KCdmb3JtW2lkJD1cIl9iaWxsaW5nXCJdJykudmFsaWQoKSkge1xuICAgICAgICAgICAgalF1ZXJ5KCcuc3RhdGUtYmxrIHNlbGVjdCcpLnRyaWdnZXIoJ2JsdXInKTtcbiAgICAgICAgICAgIGlmIChqUXVlcnkoJy5iaWxsaW5nLWFkZHJlc3MtZmllbGRzJykuaGFzQ2xhc3MoJ2hpZGUnKSkge1xuICAgICAgICAgICAgICAgICQoJ3NlbGVjdFtuYW1lJD1iaWxsaW5nX2FkZHJlc3NMaXN0XScpLnZhbCgnJyk7XG4gICAgICAgICAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XCJiaWxsaW5nQWRkcmVzc19zZWxlY3RlZGJpbGxpbmdhZGRcIl0nKS52YWwoJycpO1xuICAgICAgICAgICAgICAgICQoJy5jdXN0b20tc2VsZWN0JykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RWYWwgPSAkKHRoaXMpLmZpbmQoJzpzZWxlY3RlZCcpLnRleHQoKTtcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuc2VsZWN0b3JPdXQnKS50ZXh0KHNlbGVjdFZhbCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgalF1ZXJ5KCcuYmlsbGluZy1hZGRyZXNzLWZpZWxkcycpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgICAgICAgICAgICAgalF1ZXJ5KCcuc2VsZWN0ZWQtYmlsbGluZy1hZGRyZXNzICwgLnNlbGVjdGVkLXNoaXBwaW5nLWFkZHJlc3MnKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICAgICAgICAgICAgIHVpZXZlbnRzLmN1c3RvbUZpZWxkcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZXJyb3Jjb3VudCsrO1xuICAgICAgICB9XG4gICAgICAgIGlmICgkKCcjUGF5bWVudE1ldGhvZF9DUkVESVRfQ0FSRCcpLmlzKCc6dmlzaWJsZScpKSB7XG4gICAgICAgICAgICBpZiAoISQoJ2Zvcm1baWQkPVwiZHdmcm1fYmlsbGluZ1wiXScpLnZhbGlkKCkpIHtcbiAgICAgICAgICAgICAgICAkKCcuZXhwaXJhdGlvbmRhdGUgc2VsZWN0JykudHJpZ2dlcignYmx1cicpO1xuXG4gICAgICAgICAgICAgICAgaWYgKCQoJy52aXAtdGVybXMgLmN1c3RvbS1saW5rJykuaXMoJzp2aXNpYmxlJykgJiYgISQoJ2lucHV0W25hbWUkPVwiX2lzdmlwXCJdJykuaXMoJzpjaGVja2VkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQoJy52aXAtdGVybXMgLmN1c3RvbS1jaGVja2JveCAudmlwLW1lc3NhZ2UgI21lc3NhZ2UnKS5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnZpcC10ZXJtcyAuY3VzdG9tLWNoZWNrYm94IC52aXAtbWVzc2FnZScpLnByZXBlbmQoJzxzcGFuIGlkPVwibWVzc2FnZVwiIGNsYXNzPVwiZXJyb3IgdmlwY2hlY2ttZXNzYWdlXCI+UGxlYXNlIGNoZWNrIHRoZSBib3ggdG8gY29uZmlybSB5b3UgaGF2ZSByZWFkIGFuZCBhZ3JlZSB0byB0aGUgUmFwYWxhIFZJUCBUZXJtcyAmIENvbmRpdGlvbnMuPC9zcGFuPicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnNpbmdsZXNoaXBwaW5nX2Vycm9yJykuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICQoJy52aXAtdGVybXMgLmN1c3RvbS1jaGVja2JveCAuY3VzdG9tLWxpbmsnKS5hZGRDbGFzcygnZXJyb3InKTtcbiAgICAgICAgICAgICAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoJCgnLmtuaWZlIC5jdXN0b20tbGluay5hZ2VjaGVjay1saW5rJykuaXMoJzp2aXNpYmxlJykgJiYgISQoJ2lucHV0W25hbWUkPVwiYWdlY2hlY2tfaXNjaGVja1wiXScpLmlzKCc6Y2hlY2tlZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkKCcuYWRkcmVzc29wdGlvbnMua25pZmUgLmFnZWNoZWNrX21lc3NhZ2UgI21lc3NhZ2UnKS5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmFkZHJlc3NvcHRpb25zLmtuaWZlIC5hZ2VjaGVja19tZXNzYWdlJykucHJlcGVuZCgnPHNwYW4gaWQ9XCJtZXNzYWdlXCIgY2xhc3M9XCJlcnJvciBhZ2VjaGVja21lc3NhZ2VcIj5QbGVhc2UgVmVyaWZ5IHlvdSBhcmUgMTggeWVhcnMgb2YgYWdlIG9yIG9sZGVyLCBvciByZW1vdmUgYWxsIGtuaXZlcyBmcm9tIHlvdXIgY2FydC48L3NwYW4+Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuc2luZ2xlc2hpcHBpbmdfZXJyb3InKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgJCgnLmFkZHJlc3NvcHRpb25zLmtuaWZlID4gLmN1c3RvbS1jaGVja2JveCAuY3VzdG9tLWxpbmsnKS5hZGRDbGFzcygnZXJyb3InKTtcbiAgICAgICAgICAgICAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlcnJvcmNvdW50Kys7XG4gICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgaWYgKCQoJy52aXAtdGVybXMgLmN1c3RvbS1saW5rJykuaXMoJzp2aXNpYmxlJykgJiYgISQoJ2lucHV0W25hbWUkPVwiX2lzdmlwXCJdJykuaXMoJzpjaGVja2VkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQoJy52aXAtdGVybXMgLmN1c3RvbS1jaGVja2JveCAudmlwLW1lc3NhZ2UgI21lc3NhZ2UnKS5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnZpcC10ZXJtcyAuY3VzdG9tLWNoZWNrYm94IC52aXAtbWVzc2FnZScpLnByZXBlbmQoJzxzcGFuIGlkPVwibWVzc2FnZVwiIGNsYXNzPVwiZXJyb3IgdmlwY2hlY2ttZXNzYWdlXCI+UGxlYXNlIGNoZWNrIHRoZSBib3ggdG8gY29uZmlybSB5b3UgaGF2ZSByZWFkIGFuZCBhZ3JlZSB0byB0aGUgUmFwYWxhIFZJUCBUZXJtcyAmIENvbmRpdGlvbnMuPC9zcGFuPicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnNpbmdsZXNoaXBwaW5nX2Vycm9yJykuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICQoJy52aXAtdGVybXMgLmN1c3RvbS1jaGVja2JveCAuY3VzdG9tLWxpbmsnKS5hZGRDbGFzcygnZXJyb3InKTtcbiAgICAgICAgICAgICAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xuICAgICAgICAgICAgICAgICAgICBlcnJvcmNvdW50Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICgkKCcua25pZmUgLmN1c3RvbS1saW5rLmFnZWNoZWNrLWxpbmsnKS5pcygnOnZpc2libGUnKSAmJiAhJCgnaW5wdXRbbmFtZSQ9XCJhZ2VjaGVja19pc2NoZWNrXCJdJykuaXMoJzpjaGVja2VkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQoJy5hZGRyZXNzb3B0aW9ucy5rbmlmZSAuYWdlY2hlY2tfbWVzc2FnZSAjbWVzc2FnZScpLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuYWRkcmVzc29wdGlvbnMua25pZmUgLmFnZWNoZWNrX21lc3NhZ2UnKS5wcmVwZW5kKCc8c3BhbiBpZD1cIm1lc3NhZ2VcIiBjbGFzcz1cImVycm9yIGFnZWNoZWNrbWVzc2FnZVwiPlBsZWFzZSBWZXJpZnkgeW91IGFyZSAxOCB5ZWFycyBvZiBhZ2Ugb3Igb2xkZXIsIG9yIHJlbW92ZSBhbGwga25pdmVzIGZyb20geW91ciBjYXJ0Ljwvc3Bhbj4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5zaW5nbGVzaGlwcGluZ19lcnJvcicpLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAkKCcuYWRkcmVzc29wdGlvbnMua25pZmUgPiAuY3VzdG9tLWNoZWNrYm94IC5jdXN0b20tbGluaycpLmFkZENsYXNzKCdlcnJvcicpO1xuICAgICAgICAgICAgICAgICAgICB1aWV2ZW50cy5zeW5jY2hlY2tvdXRIKCk7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yY291bnQrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoJCgnLnZpcC10ZXJtcyAuY3VzdG9tLWxpbmsnKS5pcygnOnZpc2libGUnKSAmJiAhJCgnaW5wdXRbbmFtZSQ9XCJfaXN2aXBcIl0nKS5pcygnOmNoZWNrZWQnKSkge1xuICAgICAgICAgICAgICAgIGlmICgkKCcudmlwLXRlcm1zIC5jdXN0b20tY2hlY2tib3ggLnZpcC1tZXNzYWdlICNtZXNzYWdlJykubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnLnZpcC10ZXJtcyAuY3VzdG9tLWNoZWNrYm94IC52aXAtbWVzc2FnZScpLnByZXBlbmQoJzxzcGFuIGlkPVwibWVzc2FnZVwiIGNsYXNzPVwiZXJyb3IgdmlwY2hlY2ttZXNzYWdlXCI+UGxlYXNlIGNoZWNrIHRoZSBib3ggdG8gY29uZmlybSB5b3UgaGF2ZSByZWFkIGFuZCBhZ3JlZSB0byB0aGUgUmFwYWxhIFZJUCBUZXJtcyAmIENvbmRpdGlvbnMuPC9zcGFuPicpO1xuICAgICAgICAgICAgICAgICAgICAkKCcuc2luZ2xlc2hpcHBpbmdfZXJyb3InKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICQoJy52aXAtdGVybXMgLmN1c3RvbS1jaGVja2JveCAuY3VzdG9tLWxpbmsnKS5hZGRDbGFzcygnZXJyb3InKTtcbiAgICAgICAgICAgICAgICB1aWV2ZW50cy5zeW5jY2hlY2tvdXRIKCk7XG4gICAgICAgICAgICAgICAgZXJyb3Jjb3VudCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCQoJy5rbmlmZSAuY3VzdG9tLWxpbmsuYWdlY2hlY2stbGluaycpLmlzKCc6dmlzaWJsZScpICYmICEkKCdpbnB1dFtuYW1lJD1cImFnZWNoZWNrX2lzY2hlY2tcIl0nKS5pcygnOmNoZWNrZWQnKSkge1xuICAgICAgICAgICAgICAgIGlmICgkKCcuYWRkcmVzc29wdGlvbnMua25pZmUgLmFnZWNoZWNrX21lc3NhZ2UgI21lc3NhZ2UnKS5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAkKCcuYWRkcmVzc29wdGlvbnMua25pZmUgIC5hZ2VjaGVja19tZXNzYWdlJykucHJlcGVuZCgnPHNwYW4gaWQ9XCJtZXNzYWdlXCIgY2xhc3M9XCJlcnJvciBhZ2VjaGVja21lc3NhZ2VcIj5QbGVhc2UgVmVyaWZ5IHlvdSBhcmUgMTggeWVhcnMgb2YgYWdlIG9yIG9sZGVyLCBvciByZW1vdmUgYWxsIGtuaXZlcyBmcm9tIHlvdXIgY2FydC48L3NwYW4+Jyk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5zaW5nbGVzaGlwcGluZ19lcnJvcicpLnNob3coKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJCgnLmFkZHJlc3NvcHRpb25zLmtuaWZlICA+IC5jdXN0b20tY2hlY2tib3ggLmN1c3RvbS1saW5rJykuYWRkQ2xhc3MoJ2Vycm9yJyk7XG4gICAgICAgICAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xuICAgICAgICAgICAgICAgIGVycm9yY291bnQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qICAgICBpZighJCgnaW5wdXQucGF5cGFscHJvY2Vzc2VkJykudmFsKCkpe1xuICAgICAgICAgICAgICAgICAgICAgJCgnLnBheW1lbnRmb3JtLnBheXBhbCAucGF5cGFsbXNnJykuYWRkQ2xhc3MoJ2Vycm9yJyk7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgIH0qL1xuICAgICAgICB9XG4gICAgICAgIGlmIChlcnJvcmNvdW50ID4gMCkge1xuICAgICAgICAgICAgJCgnLnNpbmdsZXNoaXBwaW5nX2Vycm9yJykuc2hvdygpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICgkKCcuYmlsbGluZy1hZGRyZXNzLWZpZWxkcycpLmlzKCc6dmlzaWJsZScpKSB7XG4gICAgICAgICAgICAkKCcuYmlsbGluZy1hZGRyZXNzLWZpZWxkcyAuc3RhdGUtYmxrIHNlbGVjdCcpLmJsdXIoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIC8vSklSQSBQUkVWLTM4IDogQmlsbGluZyBwYWdlX0NyZWRpdCBDYXJkIFNlY3Rpb246IENWViBudW1iZXIgc2hvdWxkIG5vdCBwcmUtcG9wdWxhdGUuXG4gICAgLyppZiAoJCgnLmJ5cGFzc0RBVicpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAkKCcuc3BjLWJpbGxpbmcgLmZvcm0tcm93LmN2biBpbnB1dCcpLnZhbCgnJyk7XG4gICAgfSovXG4gICAgaWYgKCQoJy5pbnZhbGlkQ3JlZGl0Y2FyZCcpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8kKCcuc2luZ2xlc2hpcHBpbmdfZXJyb3InKS5zaG93KCk7XG4gICAgICAgICQoJy5jYXJkbnVtYmVyIGlucHV0JykuYWRkQ2xhc3MoJ2Vycm9yY2xpZW50Jyk7XG4gICAgICAgICQoJy5jYXJkbnVtYmVyIC5sYWJlbHRleHQnKS5hZGRDbGFzcygnZXJyb3InKTtcbiAgICAgICAgJCgnPHNwYW4gY2xhc3M9XCJpbnZhbGlkY3JlZGl0IGVycm9yXCI+LSBJbnZhbGlkIENyZWRpdCBDYXJkIE51bWJlcjwvc3Bhbj4nKS5hcHBlbmRUbygnLmNhcmRudW1iZXIgLmZpZWxkLXdyYXBwZXInKTtcbiAgICAgICAgLy8kKCcuc2luZ2xlc2hpcHBpbmdfZXJyb3InKS5zaG93KCk7XG4gICAgICAgICQoJy5jYXJkbnVtYmVyIC5lcnJvcm1lc3NhZ2UnKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgIH1cbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XG5cbnZhciAkZm9ybSwgJHJlcXVpcmVkSW5wdXRzLCB2YWxpZGF0b3I7XG5cbnZhciBoYXNFbXB0eVJlcXVpcmVkID0gZnVuY3Rpb24gKCkge1xuICAgIC8vIGZpbHRlciBvdXQgb25seSB0aGUgdmlzaWJsZSBmaWVsZHNcbiAgICB2YXIgcmVxdWlyZWRWYWx1ZXMgPSAkcmVxdWlyZWRJbnB1dHMuZmlsdGVyKCc6dmlzaWJsZScpLm1hcChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAkKHRoaXMpLnZhbCgpO1xuICAgIH0pO1xuICAgIHJldHVybiBfKHJlcXVpcmVkVmFsdWVzKS5jb250YWlucygnJyk7XG59O1xuXG52YXIgdmFsaWRhdGVGb3JtID0gZnVuY3Rpb24gKCkge1xuICAgIC8vIG9ubHkgdmFsaWRhdGUgZm9ybSB3aGVuIGFsbCByZXF1aXJlZCBmaWVsZHMgYXJlIGZpbGxlZCB0byBhdm9pZFxuICAgIC8vIHRocm93aW5nIGVycm9ycyBvbiBlbXB0eSBmb3JtXG4gICAgaWYgKCF2YWxpZGF0b3IpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIWhhc0VtcHR5UmVxdWlyZWQoKSkge1xuICAgICAgICBpZiAodmFsaWRhdG9yLmZvcm0oKSkge1xuICAgICAgICAgICAgLy8kY29udGludWUucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vJGNvbnRpbnVlLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG4gICAgfVxufTtcblxudmFyIHZhbGlkYXRlRWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCQodGhpcykudmFsKCkgPT09ICcnKSB7XG4gICAgICAgIC8vICRjb250aW51ZS5hdHRyKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGVuYWJsZSBjb250aW51ZSBidXR0b24gb24gbGFzdCByZXF1aXJlZCBmaWVsZCB0aGF0IGlzIHZhbGlkXG4gICAgICAgIC8vIG9ubHkgdmFsaWRhdGUgc2luZ2xlIGZpZWxkXG4gICAgICAgIGlmICh2YWxpZGF0b3IuZWxlbWVudCh0aGlzKSAmJiAhaGFzRW1wdHlSZXF1aXJlZCgpKSB7XG4gICAgICAgICAgICAvLyRjb250aW51ZS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8kY29udGludWUuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbnZhciBpbml0ID0gZnVuY3Rpb24gKG9wdHMpIHtcbiAgICBpZiAoIW9wdHMuZm9ybVNlbGVjdG9yIHx8ICFvcHRzLmNvbnRpbnVlU2VsZWN0b3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGZvcm0gYW5kIGNvbnRpbnVlIGFjdGlvbiBzZWxlY3RvcnMuJyk7XG4gICAgfVxuICAgICRmb3JtID0gJChvcHRzLmZvcm1TZWxlY3Rvcik7XG4gICAgLy8kY29udGludWUgPSAkKG9wdHMuY29udGludWVTZWxlY3Rvcik7XG4gICAgdmFsaWRhdG9yID0gJGZvcm0udmFsaWRhdGUoKTtcbiAgICAkcmVxdWlyZWRJbnB1dHMgPSAkKCcucmVxdWlyZWQnLCAkZm9ybSkuZmluZCgnOmlucHV0Jyk7XG4gICAgdmFsaWRhdGVGb3JtKCk7XG4gICAgLy8gc3RhcnQgbGlzdGVuaW5nXG4gICAgJHJlcXVpcmVkSW5wdXRzLm9uKCdjaGFuZ2UnLCB2YWxpZGF0ZUVsKTtcbiAgICAkcmVxdWlyZWRJbnB1dHMuZmlsdGVyKCdpbnB1dCcpLm9uKCdrZXl1cCcsIF8uZGVib3VuY2UodmFsaWRhdGVFbCwgMjAwKSk7XG59O1xuXG5leHBvcnRzLmluaXQgPSBpbml0O1xuZXhwb3J0cy52YWxpZGF0ZUZvcm0gPSB2YWxpZGF0ZUZvcm07XG5leHBvcnRzLnZhbGlkYXRlRWwgPSB2YWxpZGF0ZUVsO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgYWRkcmVzcyA9IHJlcXVpcmUoJy4vYWRkcmVzcycpLFxuICAgIGJpbGxpbmcgPSByZXF1aXJlKCcuL2JpbGxpbmcnKSxcbiAgICBtdWx0aXNoaXAgPSByZXF1aXJlKCcuL211bHRpc2hpcCcpLFxuICAgIHVpZXZlbnRzID0gcmVxdWlyZSgnLi4vLi4vdWlldmVudHMnKSxcbiAgICB1dGlsID0gcmVxdWlyZSgnLi4vLi4vdXRpbCcpLFxuICAgIHNoaXBwaW5nID0gcmVxdWlyZSgnLi9zaGlwcGluZycpO1xuXG4vKipcbiAqIEBmdW5jdGlvbiBJbml0aWFsaXplcyB0aGUgcGFnZSBldmVudHMgZGVwZW5kaW5nIG9uIHRoZSBjaGVja291dCBzdGFnZSAoc2hpcHBpbmcvYmlsbGluZylcbiAqL1xuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgIGFkZHJlc3MuaW5pdCgpO1xuICAgIGlmICgkKCcuYWxsb3RtZW50LWxhYmVsJykubGVuZ3RoID4gMCB8fCAkKCcuYnJhbmQtcmFwYWxhLWNoZWNrb3V0JykubGVuZ3RoID4gMCkge1xuICAgICAgICAkKCdib2R5JykuZmluZCgnI21haW4nKS5hZGRDbGFzcygnYWxsb3RtZW50LWF2YWlsYWJsZScpO1xuICAgIH1cbiAgICBpZiAoJCgnLmNoZWNrb3V0LXNoaXBwaW5nJykubGVuZ3RoID4gMCkge1xuICAgICAgICBzaGlwcGluZy5pbml0KCk7XG4gICAgfSBlbHNlIGlmICgkKCcuY2hlY2tvdXQtbXVsdGktc2hpcHBpbmcnKS5sZW5ndGggPiAwKSB7XG4gICAgICAgIG11bHRpc2hpcC5pbml0KCk7XG4gICAgfSAgZWxzZSB7XG4gICAgICAgIGJpbGxpbmcuaW5pdCgpO1xuICAgIH1cbiAgICAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnLnVpLWRpYWxvZy1jb250ZW50OnZpc2libGUnKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQodGhpcykuZGlhbG9nKCdvcHRpb24nLCAncG9zaXRpb24nLCAkKHRoaXMpLmRpYWxvZygnb3B0aW9uJywgJ3Bvc2l0aW9uJykpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICAkKCdib2R5JykuZmluZCgnLmZvcm0tcm93JykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICgkKHRoaXMpLmZpbmQoJy5maWVsZC13cmFwcGVyIC5jbGVhcmJ1dHRvbicpLmxlbmd0aCA9PSAwICYmICQodGhpcykuZmluZCgnLmZpZWxkLXdyYXBwZXInKS5maW5kKCdpbnB1dFt0eXBlPVxcJ3RleHRcXCddJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuZmllbGQtd3JhcHBlcicpLmFwcGVuZCgnPGEgY2xhc3M9XCJjbGVhcmJ1dHRvblwiPjwvYT4nKTtcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmZpbmQoJy5maWVsZC13cmFwcGVyJykuZmluZCgnaW5wdXRbdHlwZT1cXCd0ZXh0XFwnXScpLnZhbCgpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5maWVsZC13cmFwcGVyJykuZmluZCgnLmNsZWFyYnV0dG9uJykuc2hvdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKCQodGhpcykuZmluZCgnLmZpZWxkLXdyYXBwZXIgLmNsZWFyYnV0dG9uJykubGVuZ3RoID09IDAgJiYgJCh0aGlzKS5maW5kKCcuZmllbGQtd3JhcHBlcicpLmZpbmQoJ2lucHV0W3R5cGU9XFwncGFzc3dvcmRcXCddJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuZmllbGQtd3JhcHBlcicpLmFwcGVuZCgnPGEgY2xhc3M9XCJjbGVhcmJ1dHRvblwiPjwvYT4nKTtcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmZpbmQoJy5maWVsZC13cmFwcGVyJykuZmluZCgnaW5wdXRbdHlwZT1cXCdwYXNzd29yZFxcJ10nKS52YWwoKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuZmllbGQtd3JhcHBlcicpLmZpbmQoJy5jbGVhcmJ1dHRvbicpLnNob3coKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgICQoJ2JvZHknKS5maW5kKCcuZm9ybS1yb3cgLmZpZWxkLXdyYXBwZXIgaW5wdXQnKS5vbignZm9jdXMnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdlcnJvcmNsaWVudCcpKSB7XG4gICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdlcnJvcmNsaWVudCcpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgJCgnYm9keScpLmZpbmQoJy5mb3JtLXJvdyAuZmllbGQtd3JhcHBlciBpbnB1dCcpLm9uKCdrZXl1cCBpbnB1dCBibHVyJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoJCh0aGlzKS52YWwoKSAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLnZhbCgpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtLXJvdycpLmZpbmQoJ2EuY2xlYXJidXR0b24nKS5zaG93KCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm0tcm93JykuZmluZCgnYS5jbGVhcmJ1dHRvbicpLmhpZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgICQoJ2JvZHknKS5maW5kKCdpbnB1dCcpLmZvY3VzaW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQsIC5mb3JtLXJvdycpLnJlbW92ZUNsYXNzKCdpbnB1dGxhYmVsJyk7XG4gICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5mb3JtLXJvdyAsIC5sYWJlbCBzcGFuJykucmVtb3ZlQ2xhc3MoJ2lucHV0bGFiZWwnKTtcbiAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnZXJyb3JjbGllbnQnKTtcbiAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkICwgLmZvcm0tcm93JykuZmluZCgnLmxvZ2Vycm9yICwgLmV4aXN0aW5nX3JlZ2lzdGVyJykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcbiAgICB9KTtcbiAgICAkKCdib2R5JykuZmluZCgnLmZvcm0tcm93IGEuY2xlYXJidXR0b24nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZpZWxkLXdyYXBwZXInKS5maW5kKCdzcGFuJykucmVtb3ZlKCk7XG4gICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZpZWxkLXdyYXBwZXInKS5maW5kKCcucmVxdWlyZWQnKS5yZW1vdmVDbGFzcygnZXJyb3JjbGllbnQnKTtcbiAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybS1yb3cnKS5maW5kKCcuZm9ybS1yb3cgLCAubGFiZWwgc3BhbicpLnJlbW92ZUNsYXNzKCdpbnB1dGxhYmVsJyk7XG4gICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm0tcm93JykuZmluZCgnaW5wdXQnKS52YWwoJycpO1xuICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtLXJvdycpLmZpbmQoJ2EuY2xlYXJidXR0b24nKS5oaWRlKCk7XG4gICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm0tcm93JykuZmluZCgnc3Bhbi5sb2dlcnJvciAsIC5leGlzdGluZ19yZWdpc3RlcicpLmhpZGUoKTtcbiAgICB9KTtcblxuICAgICQoJy5wdF9jaGVja291dCAudGV4dGlucHV0LCAucHRfY2hlY2tvdXQgLmN1c3RvbS1zZWxlY3Qtd3JhcCwgLnB0X2NoZWNrb3V0IC50ZXh0aW5wdXRwdycpLmJpbmQoJ2tleXVwIGJsdXInLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChqUXVlcnkoJy5OZXctc2hpcHBpbmctYXV0aGVudGljYXRpb24tZGV0YWlsJykuZmluZCgnaW5wdXRbbmFtZSQ9XFwnX1Byb2Nlc3NXYXlcXCddJykudmFsKCkgPT0gMikge1xuICAgICAgICAgICAgdmFyIGVycm9yZGl2ID0gJzxkaXYgY2xhc3M9XFwnZXJyb3IgbG9naW5lcnJvclxcJz4nICsgUmVzb3VyY2VzLmNoZWNrb3V0X2xvZ2luX2Vycm9yICsgJzwvZGl2Pic7XG4gICAgICAgICAgICBpZiAoJCgnLnNoaXBwaW5nbG9naW5kZXRhaWxzJykuaXMoJzp2aXNpYmxlJykgfHwgISQoJy5jaGVja291dHNoaXBwaW5nIGZvcm1baWQkPVwiX2xvZ2luXCJdJykudmFsaWQoKSkge1xuICAgICAgICAgICAgICAgIGlmICgkKCcuY2hlY2tvdXQgLmxvZ2luZXJyb3InKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJy5jaGVja291dCAubG9naW5lcnJvcicpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBqUXVlcnkoJy5zdGF0ZS1ibGsgLnN0YXRlZXJyb3IuZXJyb3InKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgaWYgKCQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5sb2dpbmVycm9yJykubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuYXBwZW5kKGVycm9yZGl2KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB1aWV2ZW50cy5zeW5jY2hlY2tvdXRIKCk7XG4gICAgICAgIH0sIDEwMCk7XG4gICAgfSk7XG5cbiAgICAkKCcubmV3LWFkZHJlc3MtYnV0dG9uJykuYmluZCgnY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8valF1ZXJ5KFwiaW5wdXRbbmFtZT0ke3BkaWN0LkN1cnJlbnRGb3Jtcy5zaW5nbGVzaGlwcGluZy5zaGlwcGluZ0FkZHJlc3MubWFrZWRlZmF1bHQuaHRtbE5hbWV9XVwiKS5hdHRyKCdjaGVja2VkJywgdHJ1ZSk7XG4gICAgICAgICQoJy5hZGRyZXNzb3B0aW9ucy1hZGRUb0FkZHJlc3NCb29rLC5hZGRyZXNzb3B0aW9ucy1tYWtlZGVmYXVsdCAnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgICAkKCdpbnB1dFtuYW1lJD1cXCdzaGlwcGluZ0FkZHJlc3Nfc2VsZWN0ZWRhZGRyZXNzXFwnXScpLnZhbCgnJyk7XG4gICAgICAgICQoJy5zZWxlY3RlZC1zaGlwcGluZy1hZGRyZXNzJykuZW1wdHkoKTtcbiAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XFwnX2FkZHJlc3NpZFxcJ10nKS52YWwoJycpO1xuICAgICAgICAkKCdpbnB1dFtuYW1lJD1cXCdfYWRkcmVzc0ZpZWxkc19maXJzdE5hbWVcXCddJykudmFsKCcnKTtcbiAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XFwnX2FkZHJlc3NGaWVsZHNfbGFzdE5hbWVcXCddJykudmFsKCcnKTtcbiAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XFwnX2FkZHJlc3NGaWVsZHNfYWRkcmVzczFcXCddJykudmFsKCcnKTtcbiAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XFwnX2FkZHJlc3NGaWVsZHNfYWRkcmVzczJcXCddJykudmFsKCcnKTtcbiAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XFwnX2FkZHJlc3NGaWVsZHNfY2l0eVxcJ10nKS52YWwoJycpO1xuICAgICAgICAkKCdpbnB1dFtuYW1lJD1cXCdfYWRkcmVzc0ZpZWxkc19wb3N0YWxcXCddJykudmFsKCcnKTtcbiAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XFwnX2FkZHJlc3NGaWVsZHNfcGhvbmVcXCddJykudmFsKCcnKTtcbiAgICAgICAgdWlldmVudHMuY2hhbmdlRm9ybVNlbGVjdGlvbihqUXVlcnkoJ3NlbGVjdFtuYW1lJD1cXCdfYWRkcmVzc0ZpZWxkc19zdGF0ZXNfc3RhdGVcXCddJylbMF0sICcnKTtcbiAgICAgICAgdWlldmVudHMuY2hhbmdlRm9ybVNlbGVjdGlvbihqUXVlcnkoJ3NlbGVjdC5hZGRyZXNzLXNlbGVjdCcpWzBdLCAnJyk7XG4gICAgICAgICQoJy5zaGlwcGluZy1hZGRyZXNzLWZpZWxkLXNlY3Rpb24nKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgICAkKCcuc2VsZWN0ZWQtc2hpcHBpbmctYWRkcmVzcywgLm5ldy1hZGRyZXNzLWZpZWxkJykuYWRkQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XFwnX2FkZHJlc3NGaWVsZHNfcGhvbmVcXCddJykuY2xvc2VzdCgnZGl2LnBob25lJykuZmluZCgnc3Bhbi5lcnJvcmNsaWVudCcpLnJlbW92ZSgpO1xuICAgICAgICAkKCdpbnB1dFtuYW1lJD1cXCdfYWRkcmVzc0ZpZWxkc19wb3N0YWxcXCddJykuY2xvc2VzdCgnZGl2LnppcCcpLmZpbmQoJ3NwYW4uZXJyb3JjbGllbnQnKS5yZW1vdmUoKTtcbiAgICAgICAgJCgnLmFkZHJlc3Nmb3JtIC5mb3JtLXJvdy5jdXN0b20tc2VsZWN0JykucmVtb3ZlQ2xhc3MoJ2N1c3RvbXNlbGVjdC1lcnJvcicpO1xuICAgICAgICAkKCcuY3VzdG9tLXNlbGVjdCcpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHNlbGVjdFZhbCA9ICQodGhpcykuZmluZCgnOnNlbGVjdGVkJykudGV4dCgpO1xuICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuc2VsZWN0b3JPdXQnKS50ZXh0KHNlbGVjdFZhbCk7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoJCgnLmNoZWNrb3V0JykuaGFzQ2xhc3MoJ2JpbGxpbmdzZWN0aW9uJykpIHtcbiAgICAgICAgICAgICQoJ2JvZHknKS5maW5kKCdpbnB1dFtuYW1lJD1fc2FtZWFzc2hpcHBpbmdhZGRyZXNzXScpLnJlbW92ZUF0dHIoJ2NoZWNrZWQnKTtcbiAgICAgICAgICAgICQoJ2JvZHknKS5maW5kKCdpbnB1dFtuYW1lJD1fc2FtZWFzc2hpcHBpbmdhZGRyZXNzXScpLmNsb3Nlc3QoJy5jdXN0b20tY2hlY2tib3gnKS5maW5kKCcuY3VzdG9tLWxpbmsnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIH1cbiAgICAgICAgJCgnYS5jbGVhcmJ1dHRvbicpLmhpZGUoKTtcbiAgICAgICAgJCgnLnNoaXBwaW5nLWFkZHJlc3MtZmllbGQtc2VjdGlvbiAuZm9ybS1yb3cnKS5maW5kKCdpbnB1dCcpLnJlbW92ZUNsYXNzKCdlcnJvcmNsaWVudCcpO1xuICAgICAgICB1aWV2ZW50cy5jdXN0b21GaWVsZHMoKTtcbiAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xuICAgIH0pO1xuICAgICQoJy5lZGl0LWFkZHJlc3MtZmllbGQgLmVkaXQtYmlsbGluZy1idXR0b24nKS5iaW5kKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyICRmb3JtID0gJCgnLmFkZHJlc3MnKTtcbiAgICAgICAgdmFyIHNlbGVjdGVkQWRkcmVzcyA9ICQodGhpcykuY2xvc2VzdCgnLmVkaXQtYWRkcmVzcy1maWVsZCcpLmRhdGEoJ2FkZHJlc3MnKTtcbiAgICAgICAgdXRpbC5maWxsQWRkcmVzc0ZpZWxkcyhzZWxlY3RlZEFkZHJlc3MsICRmb3JtKTtcbiAgICAgICAgJCgnLmVkaXQtYWRkcmVzcy1maWVsZCcpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgICAgICQoJy5zZWxlY3RlZC1zaGlwcGluZy1hZGRyZXNzLCAubmV3LWFkZHJlc3MtZmllbGQnKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICAgICAkKCcuYmlsbGluZy1hZGRyZXNzLWZpZWxkcycpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgICAgIHVpZXZlbnRzLmN1c3RvbUZpZWxkcygpO1xuICAgICAgICB1aWV2ZW50cy5zeW5jY2hlY2tvdXRIKCk7XG4gICAgfSk7XG4gICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xuICAgIC8vaWYgb24gdGhlIG9yZGVyIHJldmlldyBwYWdlIGFuZCB0aGVyZSBhcmUgcHJvZHVjdHMgdGhhdCBhcmUgbm90IGF2YWlsYWJsZSBkaWFibGUgdGhlIHN1Ym1pdCBvcmRlciBidXR0b25cbiAgICAvKiBpZiAoJCgnLm9yZGVyLXN1bW1hcnktZm9vdGVyJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgaWYgKCQoJy5ub3RhdmFpbGFibGUnKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgJCgnLm9yZGVyLXN1bW1hcnktZm9vdGVyIC5zdWJtaXQtb3JkZXIgLmJ1dHRvbi1mYW5jeS1sYXJnZScpLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG4gICAgICAgICB9XG4gICAgIH0qL1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGFkZHJlc3MgPSByZXF1aXJlKCcuL2FkZHJlc3MnKSxcbiAgICBmb3JtUHJlcGFyZSA9IHJlcXVpcmUoJy4vZm9ybVByZXBhcmUnKSxcbiAgICBkaWFsb2cgPSByZXF1aXJlKCcuLi8uLi9kaWFsb2cnKSxcbiAgICB1dGlsID0gcmVxdWlyZSgnLi4vLi4vdXRpbCcpLFxuICAgIHNoaXBwaW5nID0gcmVxdWlyZSgnLi9zaGlwcGluZycpLCAvL0pJUkEgUFJFVi05OSA6IHNoaXBwaW5nIG1ldGhvZHMgaXMgbm90IGRpc3BsYXllZCBmb3IgMm5kIGFkZHJlc3MgaW4gcmlnaHQgbmF2LlxuICAgIGFqYXggPSByZXF1aXJlKCcuLi8uLi9hamF4Jyk7IC8vSklSQSBQUkVWLTk5IDogc2hpcHBpbmcgbWV0aG9kcyBpcyBub3QgZGlzcGxheWVkIGZvciAybmQgYWRkcmVzcyBpbiByaWdodCBuYXYuXG5cbi8qKlxuICogQGZ1bmN0aW9uXG4gKiBAZGVzY3JpcHRpb24gSW5pdGlhbGl6ZXMgZ2lmdCBtZXNzYWdlIGJveCBmb3IgbXVsdGlzaGlwIHNoaXBwaW5nLCB0aGUgbWVzc2FnZSBib3ggc3RhcnRzIG9mZiBhcyBoaWRkZW4gYW5kIHRoaXMgd2lsbCBkaXNwbGF5IGl0IGlmIHRoZSByYWRpbyBidXR0b24gaXMgY2hlY2tlZCB0byB5ZXMsIGFsc28gYWRkZWQgZXZlbnQgaGFuZGxlciB0byBsaXN0ZW4gZm9yIHdoZW4gYSByYWRpbyBidXR0b24gaXMgcHJlc3NlZCB0byBkaXNwbGF5IHRoZSBtZXNzYWdlIGJveFxuICovXG5mdW5jdGlvbiBpbml0TXVsdGlHaWZ0TWVzc2FnZUJveCgpIHtcbiAgICAkLmVhY2goJCgnLml0ZW0tbGlzdCcpLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XG4gICAgICAgIHZhciAkZ2lmdE1lc3NhZ2UgPSAkdGhpcy5maW5kKCcuZ2lmdC1tZXNzYWdlLXRleHQnKTtcblxuICAgICAgICAvL2hhbmRsZSBpbml0aWFsIGxvYWRcbiAgICAgICAgJGdpZnRNZXNzYWdlLnRvZ2dsZUNsYXNzKCdoaWRkZW4nLCAkKCdpbnB1dFtuYW1lJD1cIl9pc0dpZnRcIl06Y2hlY2tlZCcsIHRoaXMpLnZhbCgpICE9PSAndHJ1ZScpO1xuXG4gICAgICAgIC8vc2V0IGV2ZW50IGxpc3RlbmVyc1xuICAgICAgICAkdGhpcy5vbignY2hhbmdlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJGdpZnRNZXNzYWdlLnRvZ2dsZUNsYXNzKCdoaWRkZW4nLCAkKCdpbnB1dFtuYW1lJD1cIl9pc0dpZnRcIl06Y2hlY2tlZCcsIHRoaXMpLnZhbCgpICE9PSAndHJ1ZScpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBAZnVuY3Rpb25cbiAqIEBkZXNjcmlwdGlvbiBjYXB0dXJlIGFkZCBlZGl0IGFkZGRyZXNzIGZvcm0gZXZlbnRzXG4gKi9cbmZ1bmN0aW9uIGFkZEVkaXRBZGRyZXNzKHRhcmdldCkge1xuICAgIHZhciAkYWRkcmVzc0Zvcm0gPSAkKCdmb3JtW25hbWUkPVwibXVsdGlzaGlwcGluZ19lZGl0QWRkcmVzc1wiXScpLFxuICAgICAgICAkYWRkcmVzc0Ryb3Bkb3duID0gJGFkZHJlc3NGb3JtLmZpbmQoJ3NlbGVjdFtuYW1lJD1fYWRkcmVzc0xpc3RdJyksXG4gICAgICAgICRhZGRyZXNzTGlzdCA9ICRhZGRyZXNzRm9ybS5maW5kKCcuYWRkcmVzcy1saXN0JyksXG4gICAgICAgIGFkZCA9IHRydWUsXG4gICAgICAgIHNlbGVjdGVkQWRkcmVzc1VVSUQgPSAkKHRhcmdldCkucGFyZW50KCkuc2libGluZ3MoJy5zZWxlY3QtYWRkcmVzcycpLnZhbCgpO1xuXG4gICAgJGFkZHJlc3NEcm9wZG93bi5vbignY2hhbmdlJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB2YXIgc2VsZWN0ZWRBZGRyZXNzID0gJGFkZHJlc3NMaXN0LmZpbmQoJ3NlbGVjdCcpLnZhbCgpO1xuICAgICAgICBpZiAoc2VsZWN0ZWRBZGRyZXNzICE9PSAnbmV3QWRkcmVzcycpIHtcbiAgICAgICAgICAgIHNlbGVjdGVkQWRkcmVzcyA9ICQuZ3JlcCgkYWRkcmVzc0xpc3QuZGF0YSgnYWRkcmVzc2VzJyksIGZ1bmN0aW9uIChhZGQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYWRkLlVVSUQgPT09IHNlbGVjdGVkQWRkcmVzcztcbiAgICAgICAgICAgIH0pWzBdO1xuICAgICAgICAgICAgYWRkID0gZmFsc2U7XG4gICAgICAgICAgICAvLyBwcm9jZWVkIHRvIGZpbGwgdGhlIGZvcm0gd2l0aCB0aGUgc2VsZWN0ZWQgYWRkcmVzc1xuICAgICAgICAgICAgdXRpbC5maWxsQWRkcmVzc0ZpZWxkcyhzZWxlY3RlZEFkZHJlc3MsICRhZGRyZXNzRm9ybSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvL3Jlc2V0IHRoZSBmb3JtIGlmIHRoZSB2YWx1ZSBvZiB0aGUgb3B0aW9uIGlzIG5vdCBhIFVVSURcbiAgICAgICAgICAgIGFkZCA9IHRydWU7IC8vUFJFVkFJTCAtIEFkZGVkIHRvIGhhbmRsZSBiYWNrIGFuZCBmb3J0aCBzY2VuYXJpb3MuXG4gICAgICAgICAgICAkYWRkcmVzc0Zvcm0uZmluZCgnLmlucHV0LXRleHQsIC5pbnB1dC1zZWxlY3QnKS52YWwoJycpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAkYWRkcmVzc0Zvcm0ub24oJ2NsaWNrJywgJy5jYW5jZWwnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGRpYWxvZy5jbG9zZSgpO1xuICAgIH0pO1xuXG4gICAgJGFkZHJlc3NGb3JtLm9uKCdzdWJtaXQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgLy8gUFJFVi05ODogdmFsaWRhdGlvbiBlcnJvciBtZXNzYWdlcyBhcmUgbm90IGRpc3BsYXllZCB3aGVuIGFkZGluZyBhZGRyZXNzIGluIE11bHRpLVNoaXBwaW5nLiBBZGRlZCB0aGUgZm9sbG93aW5nIElGIGJsb2NrLlxuICAgICAgICBpZiAoISRhZGRyZXNzRm9ybS52YWxpZCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgJC5nZXRKU09OKFVybHMuYWRkRWRpdEFkZHJlc3MsICRhZGRyZXNzRm9ybS5zZXJpYWxpemUoKSwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAvLyBAVE9ETzogZmlndXJlIG91dCBhIHdheSB0byBoYW5kbGUgZXJyb3Igb24gdGhlIGZvcm1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYWRkcmVzcyA9IHJlc3BvbnNlLmFkZHJlc3MsXG4gICAgICAgICAgICAgICAgJHNoaXBwaW5nQWRkcmVzcyA9ICQodGFyZ2V0KS5jbG9zZXN0KCcuc2hpcHBpbmdhZGRyZXNzJyksXG4gICAgICAgICAgICAgICAgJHNlbGVjdCA9ICRzaGlwcGluZ0FkZHJlc3MuZmluZCgnLnNlbGVjdC1hZGRyZXNzJyksXG4gICAgICAgICAgICAgICAgJHNlbGVjdGVkID0gJHNlbGVjdC5maW5kKCdvcHRpb246c2VsZWN0ZWQnKSxcbiAgICAgICAgICAgICAgICBuZXdPcHRpb24gPSAnPG9wdGlvbiB2YWx1ZT1cIicgKyBhZGRyZXNzLlVVSUQgKyAnXCI+JyArXG4gICAgICAgICAgICAgICAgICAgICgoYWRkcmVzcy5JRCkgPyAnKCcgKyBhZGRyZXNzLklEICsgJyknIDogYWRkcmVzcy5maXJzdE5hbWUgKyAnICcgKyBhZGRyZXNzLmxhc3ROYW1lKSArICcsICcgK1xuICAgICAgICAgICAgICAgICAgICBhZGRyZXNzLmFkZHJlc3MxICsgJywgJyArIGFkZHJlc3MuY2l0eSArICcsICcgKyBhZGRyZXNzLnN0YXRlQ29kZSArICcsICcgKyBhZGRyZXNzLnBvc3RhbENvZGUgK1xuICAgICAgICAgICAgICAgICAgICAnPC9vcHRpb24+JztcbiAgICAgICAgICAgIGRpYWxvZy5jbG9zZSgpO1xuICAgICAgICAgICAgaWYgKGFkZCkge1xuICAgICAgICAgICAgICAgICQoJy5zaGlwcGluZ2FkZHJlc3Mgc2VsZWN0JykucmVtb3ZlQ2xhc3MoJ25vLW9wdGlvbicpLmFwcGVuZChuZXdPcHRpb24pO1xuICAgICAgICAgICAgICAgICQoJy5uby1hZGRyZXNzJykuaGlkZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKCcuc2hpcHBpbmdhZGRyZXNzIHNlbGVjdCcpLmZpbmQoJ29wdGlvblt2YWx1ZT1cIicgKyBhZGRyZXNzLlVVSUQgKyAnXCJdJykuaHRtbChuZXdPcHRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gaWYgdGhlcmUncyBubyBwcmV2aW91c2x5IHNlbGVjdGVkIG9wdGlvbiwgc2VsZWN0IGl0XG4gICAgICAgICAgICBpZiAoJHNlbGVjdGVkLmxlbmd0aCA9PT0gMCB8fCAkc2VsZWN0ZWQudmFsKCkgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgJHNlbGVjdC5maW5kKCdvcHRpb25bdmFsdWU9XCInICsgYWRkcmVzcy5VVUlEICsgJ1wiXScpLnByb3AoJ3NlbGVjdGVkJywgJ3NlbGVjdGVkJykudHJpZ2dlcignY2hhbmdlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy9wcmVzZXJ2ZSB0aGUgdXVpZCBvZiB0aGUgb3B0aW9uIGZvciB0aGUgaG9wIHVwIGZvcm1cbiAgICBpZiAoc2VsZWN0ZWRBZGRyZXNzVVVJRCkge1xuICAgICAgICAvL3VwZGF0ZSB0aGUgZm9ybSB3aXRoIHNlbGVjdGVkIGFkZHJlc3NcbiAgICAgICAgJGFkZHJlc3NMaXN0LmZpbmQoJ29wdGlvbicpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy9jaGVjayB0aGUgdmFsdWVzIG9mIHRoZSBvcHRpb25zXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5hdHRyKCd2YWx1ZScpID09PSBzZWxlY3RlZEFkZHJlc3NVVUlEKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5wcm9wKCdzZWxlY3RlZCcsICdzZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgICRhZGRyZXNzRHJvcGRvd24udHJpZ2dlcignY2hhbmdlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAZnVuY3Rpb25cbiAqIEBkZXNjcmlwdGlvbiBzaG93cyBnaWZ0IG1lc3NhZ2UgYm94IGluIG11bHRpc2hpcCwgYW5kIGlmIHRoZSBwYWdlIGlzIHRoZSBtdWx0aSBzaGlwcGluZyBhZGRyZXNzIHBhZ2UgaXQgd2lsbCBjYWxsIGluaXRtdWx0aXNoaXBzaGlwYWRkcmVzcygpIHRvIGluaXRpYWxpemUgdGhlIGZvcm1cbiAqL1xuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgIGluaXRNdWx0aUdpZnRNZXNzYWdlQm94KCk7XG4gICAgaWYgKCQoJy5jYXJ0LXJvdyAuc2hpcHBpbmdhZGRyZXNzIC5zZWxlY3QtYWRkcmVzcycpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZm9ybVByZXBhcmUuaW5pdCh7XG4gICAgICAgICAgICBjb250aW51ZVNlbGVjdG9yOiAnW25hbWUkPVwiYWRkcmVzc1NlbGVjdGlvbl9zYXZlXCJdJyxcbiAgICAgICAgICAgIGZvcm1TZWxlY3RvcjogJ1tpZCQ9XCJtdWx0aXNoaXBwaW5nX2FkZHJlc3NTZWxlY3Rpb25cIl0nXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAkKCcuZWRpdC1hZGRyZXNzJykub24oJ2NsaWNrJywgJ2EnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7IC8vSklSQSBQUkVWLTIwNS1DaGVja291dCBNdWx0aXBsZSBTaGlwcGluZyBQYWdlIC0gSW4gQWRkL0VkaXQgYWRkcmVzcyBwYWdlIGNhbmNlbCBidXR0b24gbm90IHJlc3BvbmRpbmdcbiAgICAgICAgZGlhbG9nLm9wZW4oe1xuICAgICAgICAgICAgdXJsOiB0aGlzLmhyZWYsXG4gICAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgb3BlbjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBhZGRyZXNzLmluaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgYWRkRWRpdEFkZHJlc3MoZS50YXJnZXQpO1xuICAgICAgICAgICAgICAgICAgICByZXF1aXJlKCcuLi8uLi92YWxpZGF0b3InKS5pbml0KCk7IC8vSklSQSBQUkVWLTk4IDogdmFsaWRhdGlvbiBlcnJvciBtZXNzYWdlcyBhcmUgbm90IGRpc3BsYXllZCB3aGVuIGFkZGluZyAgbXVsdGlwbGUgYWRkcmVzcy5yZS1pbml0IHZhbGlkYXRvci5cbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZSgnLi4vLi4vdG9vbHRpcCcpLmluaXQoKTsgLy8gSklSQSBQUkVWLTg0IDogTXVsdGlwbGUgc2hpcHBpbmcgcGFnZTogTm90IGRpc3BsYXlpbmcgVG9vbCB0aXAuIHJlLWluaXQgdG9vbHRpcHMuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8qXG4gICAgICBTdGFydCBKSVJBIFBSRVYtOTkgOiBzaGlwcGluZyBtZXRob2RzIGlzIG5vdCBkaXNwbGF5ZWQgZm9yIDJuZCBhZGRyZXNzIGluIHJpZ2h0IG5hdlxuICAgICAgU3RhcnQgSklSQSBQUkVWLTEwMyA6IFNlbGVjdGVkIHNoaXBwaW5nIG1ldGhvZCB3aWxsIG5vdCB1cGRhdGUgYXV0b21hdGljYWxseSBpbiByaWdodCBuYXZcbiAgICAqL1xuICAgICQoZG9jdW1lbnQpLmZpbmQoJy5jaGVja291dG11bHRpc2hpcHBpbmcgc2VsZWN0W25hbWUkPVwiX3NoaXBwaW5nTWV0aG9kSURcIl0nKS5vbignY2hhbmdlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2hpcG1lbnRJRCA9ICQodGhpcykuZGF0YSgnc2hpcG1lbnRpZCcpO1xuICAgICAgICB2YXIgc2hpcHBpbmdNZXRob2RJZCA9ICQoJ29wdGlvbjpzZWxlY3RlZCcsIHRoaXMpLmF0dHIoJ3ZhbHVlJyk7XG4gICAgICAgIGFqYXguZ2V0SnNvbih7XG4gICAgICAgICAgICB1cmw6IFVybHMubXVsdGlTaGlwcGluZ1NlbGVjdFNNLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICdzaGlwbWVudElEJzogc2hpcG1lbnRJRCxcbiAgICAgICAgICAgICAgICAnc2hpcHBpbmdNZXRob2RJZCc6IHNoaXBwaW5nTWV0aG9kSWRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBzaGlwcGluZy51cGRhdGVTdW1tYXJ5KCk7XG4gICAgICAgICAgICAgICAgaWYgKCFkYXRhIHx8ICFkYXRhLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmFsZXJ0KCdDb3VsZCBub3Qgc2VsZWN0IHNoaXBwaW5nIG1ldGhvZC4nKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgLypFbmQgSklSQSBQUkVWLTEwMywgUFJFVi05OSovXG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgYWpheCA9IHJlcXVpcmUoJy4uLy4uL2FqYXgnKSxcbiAgICBwcm9ncmVzcyA9IHJlcXVpcmUoJy4uLy4uL3Byb2dyZXNzJyksXG4gICAgdG9vbHRpcCA9IHJlcXVpcmUoJy4uLy4uL3Rvb2x0aXAnKSxcbiAgICB1dGlsID0gcmVxdWlyZSgnLi4vLi4vdXRpbCcpLFxuICAgIGRpYWxvZyA9IHJlcXVpcmUoJy4uLy4uL2RpYWxvZycpLFxuICAgIHVpZXZlbnRzID0gcmVxdWlyZSgnLi4vLi4vdWlldmVudHMnKTtcblxuLy92YXIgc2hpcHBpbmdNZXRob2RzO1xuXG4vKipcbiAqIEBmdW5jdGlvblxuICogQGRlc2NyaXB0aW9uIEluaXRpYWxpemVzIGdpZnQgbWVzc2FnZSBib3gsIGlmIHNoaXBtZW50IGlzIGdpZnRcbiAqL1xuZnVuY3Rpb24gZ2lmdE1lc3NhZ2VCb3goKSB7XG4gICAgLy8gc2hvdyBnaWZ0IG1lc3NhZ2UgYm94LCBpZiBzaGlwbWVudCBpcyBnaWZ0XG4gICAgJCgnLmdpZnQtbWVzc2FnZS10ZXh0JykudG9nZ2xlQ2xhc3MoJ2hpZGRlbicsICQoJ2lucHV0W25hbWUkPVwiX3NoaXBwaW5nQWRkcmVzc19pc0dpZnRcIl06Y2hlY2tlZCcpLnZhbCgpICE9PSAndHJ1ZScpO1xufVxuXG4vKipcbiAqIEBmdW5jdGlvblxuICogQGRlc2NyaXB0aW9uIHVwZGF0ZXMgdGhlIG9yZGVyIHN1bW1hcnkgYmFzZWQgb24gYSBwb3NzaWJseSByZWNhbGN1bGF0ZWQgYmFza2V0IGFmdGVyIGEgc2hpcHBpbmcgcHJvbW90aW9uIGhhcyBiZWVuIGFwcGxpZWRcbiAqL1xuZnVuY3Rpb24gdXBkYXRlU3VtbWFyeSgpIHtcbiAgICB2YXIgJHN1bW1hcnkgPSAkKCcjc2Vjb25kYXJ5IC5uZXctc3VtbWVyeS1jYXJ0Jyk7XG4gICAgLy8gaW5kaWNhdGUgcHJvZ3Jlc3NcbiAgICBwcm9ncmVzcy5zaG93KCRzdW1tYXJ5KTtcbiAgICB2YXIgc3RhdGVWYWx1ZSA9ICQoJ2JvZHknKS5maW5kKCdzZWxlY3RbaWQkPVwiX2FkZHJlc3NGaWVsZHNfc3RhdGVzX3N0YXRlXCJdJykudmFsKCk7XG4gICAgdmFyIHVybCA9IHV0aWwuYXBwZW5kUGFyYW1Ub1VSTChVcmxzLnN1bW1hcnlSZWZyZXNoVVJMLCAnc2VsZWN0ZWRTdGF0ZScsIHN0YXRlVmFsdWUpO1xuICAgIC8vIGxvYWQgdGhlIHVwZGF0ZWQgc3VtbWFyeSBhcmVhXG4gICAgJHN1bW1hcnkubG9hZCh1cmwsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gaGlkZSBlZGl0IHNoaXBwaW5nIG1ldGhvZCBsaW5rXG4gICAgICAgICRzdW1tYXJ5LmZhZGVJbignZmFzdCcpO1xuICAgICAgICAkc3VtbWFyeS5maW5kKCcuY2hlY2tvdXQtbWluaS1jYXJ0IC5taW5pc2hpcG1lbnQgLmhlYWRlciBhJykuaGlkZSgpO1xuICAgICAgICAkc3VtbWFyeS5maW5kKCcub3JkZXItdG90YWxzLXRhYmxlIC5vcmRlci1zaGlwcGluZyAubGFiZWwgYScpLmhpZGUoKTtcbiAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xuICAgIH0pO1xufVxuXG4vKipcbiAqIEBmdW5jdGlvblxuICogQGRlc2NyaXB0aW9uIEhlbHBlciBtZXRob2Qgd2hpY2ggY29uc3RydWN0cyBhIFVSTCBmb3IgYW4gQUpBWCByZXF1ZXN0IHVzaW5nIHRoZVxuICogZW50ZXJlZCBhZGRyZXNzIGluZm9ybWF0aW9uIGFzIFVSTCByZXF1ZXN0IHBhcmFtZXRlcnMuXG4gKi9cbmZ1bmN0aW9uIGdldFNoaXBwaW5nTWV0aG9kVVJMKHVybCwgZXh0cmFQYXJhbXMpIHtcbiAgICB2YXIgJGZvcm0gPSAkKCcuYWRkcmVzcycpO1xuICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAgIGFkZHJlc3MxOiAkZm9ybS5maW5kKCdpbnB1dFtuYW1lJD1cIl9hZGRyZXNzMVwiXScpLnZhbCgpLFxuICAgICAgICBhZGRyZXNzMjogJGZvcm0uZmluZCgnaW5wdXRbbmFtZSQ9XCJfYWRkcmVzczJcIl0nKS52YWwoKSxcbiAgICAgICAgY291bnRyeUNvZGU6ICRmb3JtLmZpbmQoJ3NlbGVjdFtpZCQ9XCJfY291bnRyeVwiXScpLnZhbCgpLFxuICAgICAgICBzdGF0ZUNvZGU6ICRmb3JtLmZpbmQoJ3NlbGVjdFtpZCQ9XCJfc3RhdGVcIl0nKS52YWwoKSxcbiAgICAgICAgcG9zdGFsQ29kZTogJGZvcm0uZmluZCgnaW5wdXRbbmFtZSQ9XCJfcG9zdGFsXCJdJykudmFsKCksXG4gICAgICAgIGNpdHk6ICRmb3JtLmZpbmQoJ2lucHV0W25hbWUkPVwiX2NpdHlcIl0nKS52YWwoKVxuICAgIH07XG4gICAgcmV0dXJuIHV0aWwuYXBwZW5kUGFyYW1zVG9VcmwodXJsLCAkLmV4dGVuZChwYXJhbXMsIGV4dHJhUGFyYW1zKSk7XG59XG5cbi8qKlxuICogQGZ1bmN0aW9uXG4gKiBAZGVzY3JpcHRpb24gc2VsZWN0cyBhIHNoaXBwaW5nIG1ldGhvZCBmb3IgdGhlIGRlZmF1bHQgc2hpcG1lbnQgYW5kIHVwZGF0ZXMgdGhlIHN1bW1hcnkgc2VjdGlvbiBvbiB0aGUgcmlnaHQgaGFuZCBzaWRlXG4gKiBAcGFyYW1cbiAqL1xuZnVuY3Rpb24gc2VsZWN0U2hpcHBpbmdNZXRob2Qoc2hpcHBpbmdNZXRob2RJRCkge1xuICAgIC8vIG5vdGhpbmcgZW50ZXJlZFxuICAgIGlmICghc2hpcHBpbmdNZXRob2RJRCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIGF0dGVtcHQgdG8gc2V0IHNoaXBwaW5nIG1ldGhvZFxuICAgIHZhciB1cmwgPSBnZXRTaGlwcGluZ01ldGhvZFVSTChVcmxzLnNlbGVjdFNoaXBwaW5nTWV0aG9kc0xpc3QsIHtcbiAgICAgICAgc2hpcHBpbmdNZXRob2RJRDogc2hpcHBpbmdNZXRob2RJRFxuICAgIH0pO1xuICAgIGFqYXguZ2V0SnNvbih7XG4gICAgICAgIHVybDogdXJsLFxuICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHVwZGF0ZVN1bW1hcnkoKTtcbiAgICAgICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcbiAgICAgICAgICAgIGlmICghZGF0YSB8fCAhZGF0YS5zaGlwcGluZ01ldGhvZElEKSB7XG4gICAgICAgICAgICAgICAgd2luZG93LmFsZXJ0KCdDb3VsZG5cXCd0IHNlbGVjdCBzaGlwcGluZyBtZXRob2QuJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZGlzcGxheSBwcm9tb3Rpb24gaW4gVUkgYW5kIHVwZGF0ZSB0aGUgc3VtbWFyeSBzZWN0aW9uLFxuICAgICAgICAgICAgLy8gaWYgc29tZSBwcm9tb3Rpb25zIHdlcmUgYXBwbGllZFxuICAgICAgICAgICAgJCgnLnNoaXBwaW5ncHJvbW90aW9ucycpLmVtcHR5KCk7XG5cbiAgICAgICAgICAgIC8vIGlmIChkYXRhLnNoaXBwaW5nUHJpY2VBZGp1c3RtZW50cyAmJiBkYXRhLnNoaXBwaW5nUHJpY2VBZGp1c3RtZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAvLyBcdHZhciBsZW4gPSBkYXRhLnNoaXBwaW5nUHJpY2VBZGp1c3RtZW50cy5sZW5ndGg7XG4gICAgICAgICAgICAvLyBcdGZvciAodmFyIGk9MDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAvLyBcdFx0dmFyIHNwYSA9IGRhdGEuc2hpcHBpbmdQcmljZUFkanVzdG1lbnRzW2ldO1xuICAgICAgICAgICAgLy8gXHR9XG4gICAgICAgICAgICAvLyB9XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuLyoqXG4gKiBAZnVuY3Rpb25cbiAqIEBkZXNjcmlwdGlvbiBNYWtlIGFuIEFKQVggcmVxdWVzdCB0byB0aGUgc2VydmVyIHRvIHJldHJpZXZlIHRoZSBsaXN0IG9mIGFwcGxpY2FibGUgc2hpcHBpbmcgbWV0aG9kc1xuICogYmFzZWQgb24gdGhlIG1lcmNoYW5kaXNlIGluIHRoZSBjYXJ0IGFuZCB0aGUgY3VycmVudGx5IGVudGVyZWQgc2hpcHBpbmcgYWRkcmVzc1xuICogKHRoZSBhZGRyZXNzIG1heSBiZSBvbmx5IHBhcnRpYWxseSBlbnRlcmVkKS4gIElmIHRoZSBsaXN0IG9mIGFwcGxpY2FibGUgc2hpcHBpbmcgbWV0aG9kc1xuICogaGFzIGNoYW5nZWQgYmVjYXVzZSBuZXcgYWRkcmVzcyBpbmZvcm1hdGlvbiBoYXMgYmVlbiBlbnRlcmVkLCB0aGVuIGlzc3VlIGFub3RoZXIgQUpBWFxuICogcmVxdWVzdCB3aGljaCB1cGRhdGVzIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgc2hpcHBpbmcgbWV0aG9kIChpZiBuZWVkZWQpIGFuZCBhbHNvIHVwZGF0ZXNcbiAqIHRoZSBVSS5cbiAqL1xuZnVuY3Rpb24gdXBkYXRlU2hpcHBpbmdNZXRob2RMaXN0KCkge1xuICAgIHZhciAkc2hpcHBpbmdNZXRob2RMaXN0ID0gJCgnI3NoaXBwaW5nLW1ldGhvZC1saXN0Jyk7XG4gICAgaWYgKCEkc2hpcHBpbmdNZXRob2RMaXN0IHx8ICRzaGlwcGluZ01ldGhvZExpc3QubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHVybCA9IGdldFNoaXBwaW5nTWV0aG9kVVJMKFVybHMuc2hpcHBpbmdNZXRob2RzSlNPTik7XG5cbiAgICBhamF4LmdldEpzb24oe1xuICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cuYWxlcnQoJ0NvdWxkblxcJ3QgZ2V0IGxpc3Qgb2YgYXBwbGljYWJsZSBzaGlwcGluZyBtZXRob2RzLicpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qaWYgKGZhbHNlICYmIHNoaXBwaW5nTWV0aG9kcyAmJiBzaGlwcGluZ01ldGhvZHMudG9TdHJpbmcoKSA9PT0gZGF0YS50b1N0cmluZygpKSB7IC8vIFBSRVZBSUwtQWRkZWQgZm9yICdmYWxzZScgdG8gaGFuZGxlIFNQQy5cbiAgICAgICAgICAgICAgICAvLyBObyBuZWVkIHRvIHVwZGF0ZSB0aGUgVUkuICBUaGUgbGlzdCBoYXMgbm90IGNoYW5nZWQuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9Ki9cblxuICAgICAgICAgICAgLy8gV2UgbmVlZCB0byB1cGRhdGUgdGhlIFVJLiAgVGhlIGxpc3QgaGFzIGNoYW5nZWQuXG4gICAgICAgICAgICAvLyBDYWNoZSB0aGUgYXJyYXkgb2YgcmV0dXJuZWQgc2hpcHBpbmcgbWV0aG9kcy5cbiAgICAgICAgICAgIC8vc2hpcHBpbmdNZXRob2RzID0gZGF0YTtcbiAgICAgICAgICAgIC8vIGluZGljYXRlIHByb2dyZXNzXG4gICAgICAgICAgICBwcm9ncmVzcy5zaG93KCRzaGlwcGluZ01ldGhvZExpc3QpO1xuXG4gICAgICAgICAgICAvLyBsb2FkIHRoZSBzaGlwcGluZyBtZXRob2QgZm9ybVxuICAgICAgICAgICAgdmFyIHNtbFVybCA9IGdldFNoaXBwaW5nTWV0aG9kVVJMKFVybHMuc2hpcHBpbmdNZXRob2RzTGlzdCk7XG4gICAgICAgICAgICAkc2hpcHBpbmdNZXRob2RMaXN0LmxvYWQoc21sVXJsLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJHNoaXBwaW5nTWV0aG9kTGlzdC5mYWRlSW4oJ2Zhc3QnKTtcbiAgICAgICAgICAgICAgICAvLyByZWJpbmQgdGhlIHJhZGlvIGJ1dHRvbnMgb25jbGljayBmdW5jdGlvbiB0byBhIGhhbmRsZXIuXG4gICAgICAgICAgICAgICAgJHNoaXBwaW5nTWV0aG9kTGlzdC5maW5kKCdbbmFtZSQ9XCJfc2hpcHBpbmdNZXRob2RJRFwiXScpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnLnNoaXBwaW5nLW1ldGhvZHMgLnNoaXBwaW5nLW1ldGhvZCAudmFsdWUgLmN1c3RvbS1saW5rICcpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuY3VzdG9tLWxpbmsnKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdFNoaXBwaW5nTWV0aG9kKCQodGhpcykudmFsKCkpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIHRoZSBzdW1tYXJ5XG4gICAgICAgICAgICAgICAgdXBkYXRlU3VtbWFyeSgpO1xuICAgICAgICAgICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcbiAgICAgICAgICAgICAgICBwcm9ncmVzcy5oaWRlKCk7XG4gICAgICAgICAgICAgICAgdG9vbHRpcC5pbml0KCk7XG4gICAgICAgICAgICAgICAgLy9pZiBub3RoaW5nIGlzIHNlbGVjdGVkIGluIHRoZSBzaGlwcGluZyBtZXRob2RzIHNlbGVjdCB0aGUgZmlyc3Qgb25lXG4gICAgICAgICAgICAgICAgaWYgKCRzaGlwcGluZ01ldGhvZExpc3QuZmluZCgnLmlucHV0LXJhZGlvOmNoZWNrZWQnKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgJHNoaXBwaW5nTWV0aG9kTGlzdC5maW5kKCcuaW5wdXQtcmFkaW86Zmlyc3QnKS5wcm9wKCdjaGVja2VkJywgJ2NoZWNrZWQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBzaWduaW4oKSB7XG4gICAgJCgnI2FkZHJlc3Nmb3JtIC50ZXh0aW5wdXQnKS5hZGRDbGFzcygnYmx1cmVkJyk7XG4gICAgJCgnI2FkZHJlc3Nmb3JtIC5jdXN0b20tc2VsZWN0JykuYWRkQ2xhc3MoJ2JsdXJlZCcpO1xuICAgICQoJyNhZGRyZXNzZm9ybSAuY3VzdG9tLWNoZWNrYm94JykuYWRkQ2xhc3MoJ2JsdXJlZCcpO1xuICAgICQoJy5zaWduaW50b215YWNjb3VudC1ibG9jaywuc2hpcHBpbmctY3JlYXRlcmFwYWxhYWNjb3VudCwuc2hpcHBpbmctY29uZmlybWVtYWlsYWRkcmVzcywuc2hpcHBpbmctZW1haWxhZGRyZXNzLC5zaGlwcGluZy1ndWVzdGNvbmZpcm1lbWFpbGFkZHJlc3MsLnNoaXBwaW5nLWd1ZXN0ZW1haWxhZGRyZXNzLC5zaGlwcGluZy1wYXNzd29yZCwuc2hpcHBpbmctY29uZmlybXBhc3N3b3JkLC5zaGlwcGluZy1jaGVja291dGFzZ3Vlc3QsLm9yMSwuY3JlYXRlYWNjb3VudG1zZycpXG4gICAgICAgIC5hZGRDbGFzcygnaGlkZScpO1xuICAgICQoJy5jaGVja291dGFzZ3Vlc3QtYmxvY2ssLnNoaXBwaW5nbG9naW5kZXRhaWxzLC5jcmVhdGVhbmFjY291bnQtYmxvY2ssLm9yMiwuYWRkcmVzc29wdGlvbnMtYWRkVG9BZGRyZXNzQm9vaywuYWRkcmVzc29wdGlvbnMtbWFrZWRlZmF1bHQsLmFkZHJlc3NpZCcpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgJCgnLnNoaXBwaW5nbG9naW5kZXRhaWxzJykuZmluZCgnaW5wdXRbbmFtZSQ9XFwnX3VzZXJuYW1lXFwnXSxpbnB1dFtuYW1lJD1cXCdfcGFzc3dvcmRcXCddJykuYWRkQ2xhc3MoJ3JlcXVpcmVkJyk7XG4gICAgJCgnLk5ldy1zaGlwcGluZy1hdXRoZW50aWNhdGlvbi1kZXRhaWwnKS5maW5kKCdpbnB1dFtuYW1lJD1cXCdfcGFzc3dvcmRjb25maXJtXFwnXSxpbnB1dFtuYW1lJD1cXCdfcGFzc3dvcmRcXCddLGlucHV0W25hbWUkPVxcJ19lbWFpbFxcJ10saW5wdXRbbmFtZSQ9XFwnX2VtYWlsY29uZmlybVxcJ10saW5wdXRbbmFtZSQ9XFwnX2d1ZXN0ZW1haWxjb25maXJtXFwnXSxpbnB1dFtuYW1lJD1cXCdfZ3Vlc3RlbWFpbFxcJ10nKS5yZW1vdmVDbGFzcygncmVxdWlyZWQnKTtcbiAgICAkKCcuTmV3LXNoaXBwaW5nLWF1dGhlbnRpY2F0aW9uLWRldGFpbCcpLmZpbmQoJ2lucHV0W25hbWUkPVxcJ19Qcm9jZXNzV2F5XFwnXScpLnZhbCgnMicpO1xuICAgICQoJy5OZXctc2hpcHBpbmctYXV0aGVudGljYXRpb24tZGV0YWlsJykuZmluZCgnaW5wdXRbbmFtZSQ9XFwnX3Bhc3N3b3JkY29uZmlybVxcJ10saW5wdXRbbmFtZSQ9XFwnX3Bhc3N3b3JkXFwnXScpLnZhbCgnJyk7XG4gICAgJCgnLmNoZWNrb3V0IC5zaGlwcGluZy1hZGRyZXNzLWZpZWxkLXNlY3Rpb24gLmZvcm1maWVsZCBzcGFuLmVycm9yY2xpZW50JykucmVtb3ZlKCk7XG4gICAgJCgnLnNoaXBwaW5nLWFkZHJlc3MtZmllbGQtc2VjdGlvbicpLmFkZENsYXNzKCdzaWduaW4tZXJyb3InKTtcbiAgICB1aWV2ZW50cy5zeW5jY2hlY2tvdXRIKCk7XG59XG5cbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoJChkb2N1bWVudCkuZmluZCgnLmFkZHJlc3Mtc2VsZWN0JykudmFsKCkgIT0gJycgJiYgJChkb2N1bWVudCkuZmluZCgnLmFkZHJlc3Mtc2VsZWN0JykudmFsKCkgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICQoZG9jdW1lbnQpLmZpbmQoJy5zaGlwcGluZy1hZGRyZXNzLWZpZWxkLXNlY3Rpb24nKS5hZGRDbGFzcygnaGlkZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgICQoZG9jdW1lbnQpLmZpbmQoJy5zaGlwcGluZy1hZGRyZXNzLWZpZWxkLXNlY3Rpb24nKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgICAkKGRvY3VtZW50KS5maW5kKCcuc2VsZWN0ZWQtc2hpcHBpbmctYWRkcmVzcycpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgICAgICQoZG9jdW1lbnQpLmZpbmQoJy5uZXctYWRkcmVzcy1maWVsZCcpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgfVxuICAgIGlmICgkKGRvY3VtZW50KS5maW5kKCcuZnJvbXJldHVybjEnKS52YWwoKSA9PSAndHJ1ZScpIHtcbiAgICAgICAgJChkb2N1bWVudCkuZmluZCgnLnNoaXBwaW5nLWFkZHJlc3MtZmllbGQtc2VjdGlvbicpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgfVxuICAgICQoJ2lucHV0W25hbWUkPVwiX3NoaXBwaW5nQWRkcmVzc19pc0dpZnRcIl0nKS5vbignY2xpY2snLCBnaWZ0TWVzc2FnZUJveCk7XG5cbiAgICAkKCcuYWRkcmVzcycpLm9uKCdjaGFuZ2UnLFxuICAgICAgICAnaW5wdXRbbmFtZSQ9XCJfYWRkcmVzc0ZpZWxkc19hZGRyZXNzMVwiXSwgaW5wdXRbbmFtZSQ9XCJfYWRkcmVzc0ZpZWxkc19hZGRyZXNzMlwiXSwgc2VsZWN0W25hbWUkPVwiX2FkZHJlc3NGaWVsZHNfc3RhdGVzX3N0YXRlXCJdLCBpbnB1dFtuYW1lJD1cIl9hZGRyZXNzRmllbGRzX2NpdHlcIl0sIGlucHV0W25hbWUkPVwiX2FkZHJlc3NGaWVsZHNfcG9zdGFsXCJdJywgLy8gUFJFVkFJTC1DaGFuZ2VkIFpJUCB0byBwb3N0YWxcbiAgICAgICAgdXBkYXRlU2hpcHBpbmdNZXRob2RMaXN0XG4gICAgKTtcblxuICAgIGdpZnRNZXNzYWdlQm94KCk7XG4gICAgdXBkYXRlU2hpcHBpbmdNZXRob2RMaXN0KCk7XG5cbiAgICAkKCcuY29udGludWUtY2hlY2tvdXQtYnV0dG9uIC5jb250aW51ZS1jaGVja291dCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGZvcm0gPSAkKHRoaXMpLmNsb3Nlc3QoJ2Zvcm1baWQkPVwiX3NoaXBwaW5nQWRkcmVzc1wiXScpO1xuICAgICAgICBpZiAoJCgnLnN0YXRlLWJsayBzZWxlY3QnKS52YWxpZCgpID09IDApIHtcbiAgICAgICAgICAgIGlmICghJCgnLnN0YXRlLWJsay5jdXN0b20tc2VsZWN0JykuaGFzQ2xhc3MoJ2JsdXJlZCcpKSB7XG4gICAgICAgICAgICAgICAgJCgnLnN0YXRlLWJsay5jdXN0b20tc2VsZWN0JykuYWRkQ2xhc3MoJ2N1c3RvbXNlbGVjdC1lcnJvcicpO1xuICAgICAgICAgICAgICAgIC8vJCgnLnN0YXRlLWJsayAuc3RhdGVlcnJvcicpLnNob3coKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vJCgnLnN0YXRlLWJsayAgLnN0YXRlZXJyb3InKS5oaWRlKCk7XG4gICAgICAgICAgICAkKCcuc3RhdGUtYmxrLmN1c3RvbS1zZWxlY3QnKS5yZW1vdmVDbGFzcygnY3VzdG9tc2VsZWN0LWVycm9yJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoISQoJy5jaGVja291dGFzZ3Vlc3RidXR0b24nKS5pcygnOnZpc2libGUnKSkge1xuICAgICAgICAgICAgJCgnLmd1ZXN0ZW1haWxjb24nKS5ibHVyKCk7XG4gICAgICAgICAgICAkKCcuZ3Vlc3RlbWFpbCcpLmJsdXIoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWZvcm0udmFsaWQoKSkge1xuICAgICAgICAgICAgaWYgKGpRdWVyeSgnLnNoaXBwaW5nLWFkZHJlc3MtZmllbGQtc2VjdGlvbicpLmhhc0NsYXNzKCdoaWRlJykpIHtcbiAgICAgICAgICAgICAgICAkKCdzZWxlY3RbbmFtZSQ9c2luZ2xlc2hpcHBpbmdfYWRkcmVzc0xpc3RdJykudmFsKCcnKTtcbiAgICAgICAgICAgICAgICAkKCdpbnB1dFtuYW1lJD1cInNpbmdsZXNoaXBwaW5nX3NoaXBwaW5nQWRkcmVzc19zZWxlY3RlZGFkZHJlc3NcIl0nKS52YWwoJycpO1xuICAgICAgICAgICAgICAgICQoJy5jdXN0b20tc2VsZWN0JykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RWYWwgPSAkKHRoaXMpLmZpbmQoJzpzZWxlY3RlZCcpLnRleHQoKTtcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuc2VsZWN0b3JPdXQnKS50ZXh0KHNlbGVjdFZhbCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgJCgnLnNoaXBwaW5nLWFkZHJlc3MtZmllbGQtc2VjdGlvbicpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgICAgICAgICAgICAgJCgnLnNlbGVjdGVkLXNoaXBwaW5nLWFkZHJlc3MnKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCEkKCcuc2hpcHBpbmdsb2dpbmRldGFpbHMnKS5pcygnOnZpc2libGUnKSkge1xuICAgICAgICAgICAgICAgICQoJy5zaW5nbGVzaGlwcGluZ19lcnJvcicpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgICAgICAgICAgICAgJCgnLnNpZ25pbmFib3ZlJykuaGlkZSgpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICgkKCcuc2hpcHBpbmdsb2dpbmRldGFpbHMnKS5pcygnOnZpc2libGUnKSkge1xuICAgICAgICAgICAgICAgIGlmICghJCgnLnNoaXBwaW5nbG9naW5kZXRhaWxzIGZvcm0nKS52YWxpZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJy5zaGlwcGluZ2xvZ2luZGV0YWlscyAudXNlcm5hbWUgLnRleHRpbnB1dCwgLnNoaXBwaW5nbG9naW5kZXRhaWxzIC50ZXh0aW5wdXRwdycpLmJsdXIoKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnYnV0dG9uW25hbWUkPVwibG9naW5fbG9naW5cIl0nKS50cmlnZ2VyKCdjbGljaycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgZXJyb3Jtc2cgPSAnPGRpdiBpZD1cXCdtZXNzYWdlXFwnIGNsYXNzPVxcJ2Vycm9yLWFsZXJ0IHNpZ25pbmFib3ZlXFwnIHN0eWxlPVxcJ3RleHQtYWxpZ246IGxlZnQ7XFwnPlBsZWFzZSBMb2cgaW4gYWJvdmUgdG8gY29udGludWU8L2Rpdj4nO1xuICAgICAgICAgICAgICAgIGlmICgkKCcjZHdmcm1fc2luZ2xlc2hpcHBpbmdfc2hpcHBpbmdBZGRyZXNzIC5mb3JtYWN0aW9ucyAjbWVzc2FnZScpLmxlbmd0aCA+IDAgfHwgJCgnI2R3ZnJtX3NpbmdsZXNoaXBwaW5nX3NoaXBwaW5nQWRkcmVzcyAuZm9ybWFjdGlvbnMgLnNpbmdsZXNoaXBwaW5nX2Vycm9yJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBqUXVlcnkoJyNkd2ZybV9zaW5nbGVzaGlwcGluZ19zaGlwcGluZ0FkZHJlc3MgLmZvcm1hY3Rpb25zICNtZXNzYWdlJykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeSgnI2R3ZnJtX3NpbmdsZXNoaXBwaW5nX3NoaXBwaW5nQWRkcmVzcyAuZm9ybWFjdGlvbnMgLnNpbmdsZXNoaXBwaW5nX2Vycm9yJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBqUXVlcnkoJy5zaW5nbGVzaGlwcGluZ19lcnJvcicpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICBqUXVlcnkoJyNkd2ZybV9zaW5nbGVzaGlwcGluZ19zaGlwcGluZ0FkZHJlc3MgLmZvcm1hY3Rpb25zJykucHJlcGVuZChlcnJvcm1zZyk7XG4gICAgICAgICAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoJy5zaW5nbGVzaGlwcGluZ19lcnJvcicpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgICAgIH1cbiAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xuICAgIH0pO1xuXG4gICAgJCgnYm9keScpLm9uKCdjbGljaycsICcuZ28tYXMtZ3Vlc3QtY2hlY2tvdXQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJy5zaGlwcGluZy1jaGVja291dGFzZ3Vlc3QsIC5zaWduaW50b215YWNjb3VudC1ibG9jaycpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgICAgICQoJy5zaGlwcGluZ2xvZ2luZGV0YWlscyAsIC5hZGRyZXNzaWQnKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICAgICB1aWV2ZW50cy5zeW5jY2hlY2tvdXRIKCk7XG4gICAgfSk7XG4gICAgaWYgKCQoJy5zdGF0ZS1zaGlwcGluZy12YWxpZC1kaWFsb2cnKS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHZhciBkaWFsb2dXaWR0aCA9IDUxMTtcbiAgICAgICAgdmFyIHNpbmdPdXREaWFsb2cgPSBkaWFsb2cuY3JlYXRlKHtcbiAgICAgICAgICAgIHRhcmdldDogJyNkaWFsb2ctY29udGFpbmVyJyxcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICBiZ2lmcmFtZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBhdXRvT3BlbjogZmFsc2UsXG4gICAgICAgICAgICAgICAgbW9kYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgd2lkdGg6IGRpYWxvZ1dpZHRoLFxuICAgICAgICAgICAgICAgIGRpYWxvZ0NsYXNzOiAnc3RhdGUtc2hpcHBpbmctZGlhbG9nJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgJChzaW5nT3V0RGlhbG9nKS5lbXB0eSgpLmFwcGVuZCgkKCcuc3RhdGUtc2hpcHBpbmctdmFsaWQtZGlhbG9nJykuaHRtbCgpKTtcbiAgICAgICAgc2luZ091dERpYWxvZy5kaWFsb2coJ29wZW4nKTtcbiAgICB9XG4gICAgJCgnYm9keScpLm9uKCdjbGljaycsICcuc2hpcHBpbmdzaWdub3V0JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOiB0aGlzLmhyZWYsXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIHZhciBkaWFsb2dXaWR0aCA9IDUwMDtcbiAgICAgICAgICAgICAgICAvKmlmKCAkKHdpbmRvdykud2lkdGgoKSA8IDc2NyApe1xuICAgICAgICAgICAgICAgICAgICBkaWFsb2dXaWR0aCA9IDMwMFxuICAgICAgICAgICAgICAgIH0qL1xuICAgICAgICAgICAgICAgIHZhciBzaW5nT3V0RGlhbG9nID0gZGlhbG9nLmNyZWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogJyNkaWFsb2ctY29udGFpbmVyJyxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmdpZnJhbWU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRvT3BlbjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RhbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBkaWFsb2dXaWR0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpYWxvZ0NsYXNzOiAnc2luZy1vdXQtZGlhbG9nJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgJChzaW5nT3V0RGlhbG9nKS5lbXB0eSgpLmFwcGVuZChkYXRhKTtcbiAgICAgICAgICAgICAgICBzaW5nT3V0RGlhbG9nLmRpYWxvZygnb3BlbicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICAkKCdib2R5Jykub24oJ2NsaWNrJywgJy5zaWduaW50b215YWNjb3VudGJ1dHRvbicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2lnbmluKCk7XG4gICAgICAgICQoJ2Zvcm1baWQkPVwiX2xvZ2luXCJdIC5mb3JtZmllbGQudXNlcm5hbWUsIGZvcm1baWQkPVwiX2xvZ2luXCJdIC5mb3JtZmllbGQucGFzc3dvcmQnKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQodGhpcykuZmluZCgnLnZhbHVlIGlucHV0JykudmFsKCcnKS5yZW1vdmVDbGFzcygnZXJyb3JjbGllbnQnKTtcbiAgICAgICAgICAgICQodGhpcykuZmluZCgnLnZhbHVlIHNwYW4uZXJyb3JjbGllbnQnKS5oaWRlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICAkKCdmb3JtW2lkJD1cIl9sb2dpblwiXSAud3JvbmdhZGRyZXNzJykuaGlkZSgpO1xuICAgICAgICAkKCdmb3JtW2lkJD1cIl9sb2dpblwiXSAuI21lc3NhZ2UuZXJyb3InKS5yZW1vdmUoKTtcblxuICAgICAgICAkKCcuc2luZ2xlc2hpcHBpbmdfZXJyb3InKS5oaWRlKCk7XG4gICAgICAgICQoJy5zaGlwcGluZy1lbWFpbGRldGFpbGxpbmtzJykuYWRkQ2xhc3MoJ2xvZ2luYWN0aXZlJyk7XG4gICAgICAgICQoJy5zaGlwcGluZy1lbWFpbGRldGFpbGxpbmtzJykucmVtb3ZlQ2xhc3MoJ3JlZ2luYWN0aXZlJyk7XG4gICAgICAgICQoJy5OZXctc2hpcHBpbmctYXV0aGVudGljYXRpb24tZGV0YWlsIGlucHV0W2lkJD1cInNoaXBwaW5nQWRkcmVzc19lbWFpbFwiXScpLnJlbW92ZUNsYXNzKCdhY2NlbWFpbCcpO1xuICAgICAgICAkKCcuTmV3LXNoaXBwaW5nLWF1dGhlbnRpY2F0aW9uLWRldGFpbCBpbnB1dFtpZCQ9XCJzaGlwcGluZ0FkZHJlc3NfZW1haWxjb25maXJtXCJdJykucmVtb3ZlQ2xhc3MoJ2FjY2VtYWlsY29uJyk7XG4gICAgICAgICQoJy5OZXctc2hpcHBpbmctYXV0aGVudGljYXRpb24tZGV0YWlsIGlucHV0W25hbWUkPVxcJ19ndWVzdGVtYWlsY29uZmlybVxcJ10nKS5yZW1vdmVDbGFzcygnZ3Vlc3RlbWFpbGNvbicpO1xuICAgICAgICAkKCcuTmV3LXNoaXBwaW5nLWF1dGhlbnRpY2F0aW9uLWRldGFpbCBpbnB1dFtuYW1lJD1cXCdfZ3Vlc3RlbWFpbFxcJ10nKS5yZW1vdmVDbGFzcygnZ3Vlc3RlbWFpbCcpO1xuICAgICAgICAkKCcuc2hpcHBpbmdsb2dpbmRldGFpbHMgaW5wdXRbbmFtZSQ9XFwnbG9naW5fdXNlcm5hbWVcXCddJykuYWRkQ2xhc3MoJ2xvZ2dlZGVtYWlsJyk7XG4gICAgICAgICQoJy5zaGlwcGluZ2xvZ2luZGV0YWlscyAuY29ycmVjdGFkZHJlc3MnKS5yZW1vdmVDbGFzcygnZXJyb3InKS5oaWRlKCk7XG4gICAgICAgIGlmICgkKCcuZW1haWxoaWRkZW4nKS52YWwoKSkge1xuICAgICAgICAgICAgJCgnaW5wdXRbaWQkPVwibG9naW5fdXNlcm5hbWVcIl0nKS52YWwoJCgnLmVtYWlsaGlkZGVuJykudmFsKCkpO1xuICAgICAgICAgICAgJCgnaW5wdXRbaWQkPVwibG9naW5fdXNlcm5hbWVcIl0nKS5ibHVyKCk7XG4gICAgICAgICAgICAkKCdpbnB1dFtpZCQ9XCJsb2dpbl91c2VybmFtZVwiXScpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcuY29ycmVjdGFkZHJlc3MnKS5zaG93KCk7XG4gICAgICAgIH1cbiAgICAgICAgJCgnLk5ldy1zaGlwcGluZy1hdXRoZW50aWNhdGlvbi1kZXRhaWwgaW5wdXRbbmFtZSQ9XFwnc2hpcHBpbmdBZGRyZXNzX3Bhc3N3b3JkXFwnXScpLnJlbW92ZUNsYXNzKCdjX3Bhc3N3b3JkJyk7XG4gICAgICAgICQoJy5OZXctc2hpcHBpbmctYXV0aGVudGljYXRpb24tZGV0YWlsIGlucHV0W25hbWUkPVxcJ3NoaXBwaW5nQWRkcmVzc19wYXNzd29yZGNvbmZpcm1cXCddJykucmVtb3ZlQ2xhc3MoJ2NtX3Bhc3N3b3JkJyk7XG4gICAgICAgICQoJy5zaGlwcGluZ2xvZ2luZGV0YWlscyBpbnB1dFtuYW1lJD1cXCdsb2dpbl9wYXNzd29yZFxcJ10nKS5hZGRDbGFzcygnbG9naW5fcGFzc3dvcmQnKTtcbiAgICAgICAgJCgnLnNoaXBwaW5nLWFkZHJlc3MtZmllbGQtc2VjdGlvbiAudmFsdWUgaW5wdXQnKS5yZW1vdmVDbGFzcygnZXJyb3JjbGllbnQnKTtcbiAgICAgICAgJCgnLnNoaXBwaW5nLWFkZHJlc3MtZmllbGQtc2VjdGlvbiAudmFsdWUgc3Bhbi5lcnJvcmNsaWVudCcpLmhpZGUoKTtcbiAgICAgICAgJCgnLmN1c3RvbS1zZWxlY3QnKS5yZW1vdmVDbGFzcygnY3VzdG9tc2VsZWN0LWVycm9yJyk7XG4gICAgICAgICQoJy5zdGF0ZWVycm9yJykuaGlkZSgpO1xuICAgICAgICB1aWV2ZW50cy5zeW5jY2hlY2tvdXRIKCk7XG4gICAgfSk7XG5cbiAgICAkKCcuc2hpcHBpbmctZ3Vlc3RlbWFpbGFkZHJlc3MgLnRleHRpbnB1dCwgLnNoaXBwaW5nLWd1ZXN0Y29uZmlybWVtYWlsYWRkcmVzcyAudGV4dGlucHV0LCAuc2hpcHBpbmdsb2dpbmRldGFpbHMgLnVzZXJuYW1lIC50ZXh0aW5wdXQsIC5zaGlwcGluZ2xvZ2luZGV0YWlscyAudGV4dGlucHV0cHcsIC5zaGlwcGluZy1lbWFpbGFkZHJlc3MgLnRleHRpbnB1dCwgLnNoaXBwaW5nLWNvbmZpcm1lbWFpbGFkZHJlc3MgLnRleHRpbnB1dCwgLnNoaXBwaW5nLXBhc3N3b3JkIC50ZXh0aW5wdXRwdywgLnNoaXBwaW5nLWNvbmZpcm1wYXNzd29yZCAudGV4dGlucHV0cHcnKS5ibHVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCQodGhpcykudmFsaWQoKSA9PSAwKSB7XG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcuY29ycmVjdGFkZHJlc3MnKS5hZGRDbGFzcygnZXJyb3InKS5zaG93KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcuY29ycmVjdGFkZHJlc3MnKS5yZW1vdmVDbGFzcygnZXJyb3InKS5zaG93KCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICAvL1BSRVZBSUwgLSBpbml0IEFkZHJlc3MgVmFsaWRhdGlvblxuICAgIHJlcXVpcmUoJy4uLy4uL2FkZHJlc3N2YWxpZGF0aW9uJykuaW5pdCgpO1xufTtcblxuZXhwb3J0cy51cGRhdGVTaGlwcGluZ01ldGhvZExpc3QgPSB1cGRhdGVTaGlwcGluZ01ldGhvZExpc3Q7XG5leHBvcnRzLnVwZGF0ZVN1bW1hcnkgPSB1cGRhdGVTdW1tYXJ5OyAvL0pJUkEgUFJFVi05OSA6IHNoaXBwaW5nIG1ldGhvZHMgaXMgbm90IGRpc3BsYXllZCBmb3IgMm5kIGFkZHJlc3MgaW4gcmlnaHQgbmF2LlxuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgYWRkUHJvZHVjdFRvQ2FydCA9IHJlcXVpcmUoJy4vcHJvZHVjdC9hZGRUb0NhcnQnKSxcbiAgICBhamF4ID0gcmVxdWlyZSgnLi4vYWpheCcpLFxuICAgIHBhZ2UgPSByZXF1aXJlKCcuLi9wYWdlJyksXG4gICAgcHJvZHVjdFRpbGUgPSByZXF1aXJlKCcuLi9wcm9kdWN0LXRpbGUnKSxcbiAgICBxdWlja3ZpZXcgPSByZXF1aXJlKCcuLi9xdWlja3ZpZXcnKTtcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICogQGZ1bmN0aW9uXG4gKiBAZGVzY3JpcHRpb24gQmluZHMgdGhlIGNsaWNrIGV2ZW50cyB0byB0aGUgcmVtb3ZlLWxpbmsgYW5kIHF1aWNrLXZpZXcgYnV0dG9uXG4gKi9cbmZ1bmN0aW9uIGluaXRpYWxpemVFdmVudHMoKSB7XG4gICAgJCgnI2NvbXBhcmUtdGFibGUnKS5vbignY2xpY2snLCAnLnJlbW92ZS1saW5rJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBhamF4LmdldEpzb24oe1xuICAgICAgICAgICAgdXJsOiB0aGlzLmhyZWYsXG4gICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgLyogU3RhcnQgSklSQSBQUkVWLTc0IDogQ29tcGFyZSBwYWdlOiBOb3QgbmF2aWdhdGluZyB0byBQTFAsIFdoZW4gdXNlciBjbGlja3MgdGhlIFwiUmVtb3ZlIChYKVwiIGljb24gb24gdGhlIGxhc3QgcHJvZHVjdCxwcmVzZW50IGluIHRoZSBwcm9kdWN0IGNvbXBhcmUgcGFnZS5cbiAgICAgICAgICAgICAgICAgICBBZGRlZCBjb25kaXRpb24gdG8gY2hlY2sgZm9yIHRoZSBsYXN0IHByb2R1Y3QgcmVtb3ZhbCBpZiBzbyBuYXZpZ2F0ZSBiYWNrIHRvIHByZXZpb3VzIFBMUC5cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiAkKCcjY29tcGFyZS10YWJsZSAucHJvZHVjdC10aWxlJykubGVuZ3RoIDw9IDEgJiYgJCgnI2NvbXBhcmUtY2F0ZWdvcnktbGlzdCcpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICQoJy5iYWNrJykuYXR0cignaHJlZicpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiAkKCcjY29tcGFyZS10YWJsZSAucHJvZHVjdC10aWxlJykubGVuZ3RoIDw9IDEgJiYgJCgnI2NvbXBhcmUtY2F0ZWdvcnktbGlzdCcpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnI2NvbXBhcmUtY2F0ZWdvcnktbGlzdCBvcHRpb246c2VsZWN0ZWQnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnI2NvbXBhcmUtY2F0ZWdvcnktbGlzdCcpLnRyaWdnZXIoJ2NoYW5nZScpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHBhZ2UucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvKkVuZCBKSVJBIFBSRVYtNzQgKi9cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSlcbiAgICAgICAgLm9uKCdjbGljaycsICcub3Blbi1xdWljay12aWV3JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHZhciB1cmwgPSAkKHRoaXMpLmNsb3Nlc3QoJy5wcm9kdWN0JykuZmluZCgnLnRodW1iLWxpbmsnKS5hdHRyKCdocmVmJyk7XG4gICAgICAgICAgICBxdWlja3ZpZXcuc2hvdyh7XG4gICAgICAgICAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgICAgICAgICAgc291cmNlOiAncXVpY2t2aWV3J1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgJCgnI2NvbXBhcmUtY2F0ZWdvcnktbGlzdCcpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQodGhpcykuY2xvc2VzdCgnZm9ybScpLnN1Ym1pdCgpO1xuICAgIH0pO1xufVxuXG5leHBvcnRzLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcHJvZHVjdFRpbGUuaW5pdCgpO1xuICAgIGluaXRpYWxpemVFdmVudHMoKTtcbiAgICBhZGRQcm9kdWN0VG9DYXJ0KCk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbCA9IHJlcXVpcmUoJy4uL3V0aWwnKTtcblxuZnVuY3Rpb24gaW5pdGlhbGl6YXRpb25FdmVudCgpIHtcbiAgICB2YXIgY3VycmVudFNpdGVJRCA9ICcnO1xuICAgIHZhciBjdXJyZW50U2Vzc2lvblNpdGUgPSAkKCdib2R5JykuZmluZCgnLmN1cnJlbnQtc2Vzc2lvbi1zaXRlJykudmFsKCk7XG4gICAgc3dpdGNoIChjdXJyZW50U2Vzc2lvblNpdGUpIHtcbiAgICAgICAgY2FzZSAncmFwYWxhJzpcbiAgICAgICAgICAgIGN1cnJlbnRTaXRlSUQgPSAnMSc7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnc3VmaXgnOlxuICAgICAgICAgICAgY3VycmVudFNpdGVJRCA9ICcyJztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd0cmlnZ2VyeCc6XG4gICAgICAgICAgICBjdXJyZW50U2l0ZUlEID0gJzMnO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3N0b3JtJzpcbiAgICAgICAgICAgIGN1cnJlbnRTaXRlSUQgPSAnNCc7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnbHVocmplbnNlbic6XG4gICAgICAgICAgICBjdXJyZW50U2l0ZUlEID0gJzUnO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3ZtYyc6XG4gICAgICAgICAgICBjdXJyZW50U2l0ZUlEID0gJzYnO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3Rlcm1pbmF0b3InOlxuICAgICAgICAgICAgY3VycmVudFNpdGVJRCA9ICc3JztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdibHVlZm94JzpcbiAgICAgICAgICAgIGN1cnJlbnRTaXRlSUQgPSAnOCc7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnd2lsbGlhbXNvbic6XG4gICAgICAgICAgICBjdXJyZW50U2l0ZUlEID0gJzknO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ21hcmN1bSc6XG4gICAgICAgICAgICBjdXJyZW50U2l0ZUlEID0gJzEwJztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdzdHJpa2VtYXN0ZXInOlxuICAgICAgICAgICAgY3VycmVudFNpdGVJRCA9ICcxMSc7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnaWNlZm9yY2UnOlxuICAgICAgICAgICAgY3VycmVudFNpdGVJRCA9ICcyMCc7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnb3R0ZXInOlxuICAgICAgICAgICAgY3VycmVudFNpdGVJRCA9ICcyMSc7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGN1cnJlbnRTaXRlSUQgPSAnMSc7XG4gICAgfVxuXG4gICAgaWYgKGRvY3VtZW50LmxvY2F0aW9uLnBhdGhuYW1lLmluZGV4T2YoJ0NoYW5nZVJlZ2lvbicpIDwgMCkge1xuICAgICAgICBpZiAodHlwZW9mIGdlb2lwQ291bnRyeUNvZGUgPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdmFyIElQR2VvQ29kZSA9IGdlb2lwQ291bnRyeUNvZGUoKTtcbiAgICAgICAgICAgIHZhciBhbGxvd2VkQ291bnRyaWVzID0gJCgnLmFsbG93ZWQtY291bnRyaWVzJykudGV4dCgpO1xuICAgICAgICAgICAgaWYgKGFsbG93ZWRDb3VudHJpZXMgPT0gbnVsbCB8fCBhbGxvd2VkQ291bnRyaWVzID09ICdudWxsJyB8fCBhbGxvd2VkQ291bnRyaWVzID09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgYWxsb3dlZENvdW50cmllcyA9ICdVUyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYWxsb3dlZENvdW50cmllcy5pbmRleE9mKElQR2VvQ29kZSkgIT0gLTEpIHtcbiAgICAgICAgICAgICAgICB2YXIgdXJsID0gdXRpbC5hcHBlbmRQYXJhbVRvVVJMKFVybHMuaW50ZXJuYXRpb25hbEhvbWVTaG93LCAnaWQnLCBjdXJyZW50U2l0ZUlEKTtcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHVybDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxufVxuXG52YXIgaW50ZXJuYXRpb25hbCA9IHtcbiAgICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGluaXRpYWxpemF0aW9uRXZlbnQoKTtcbiAgICB9XG59O1xubW9kdWxlLmV4cG9ydHMgPSBpbnRlcm5hdGlvbmFsO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgZGlhbG9nID0gcmVxdWlyZSgnLi4vLi4vZGlhbG9nJyksXG4gICAgbWluaWNhcnQgPSByZXF1aXJlKCcuLi8uLi9taW5pY2FydCcpLFxuICAgIHV0aWwgPSByZXF1aXJlKCcuLi8uLi91dGlsJyksXG4gICAgVFByb21pc2UgPSByZXF1aXJlKCdwcm9taXNlJyksXG4gICAgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xuXG4vKipcbiAqIEBkZXNjcmlwdGlvbiBIYW5kbGVyIHRvIGhhbmRsZSB0aGUgYWRkIGFsbCBpdGVtcyB0byBjYXJ0IGV2ZW50XG4gKi9cbnZhciBhZGRBbGxUb0NhcnQgPSBmdW5jdGlvbiAoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIC8vUFJFVkFJTC1BZGRlZCBmb3IgR0EgaW50ZWdyYXRpb25cbiAgICAvL0dBY29tbWVudGVkXG4gICAgaWYgKGlzRXZlbnRUcmFja2luZ0VuYWJsZWQgJiYgaXNHb29nbGVBbmFseXRpY3NFbmFibGVkKSB7XG4gICAgICAgIGdvb2dsZUFuYWx5dGljc0V2ZW50cy5hZGRQcm9kdWN0U2V0KCk7XG4gICAgfVxuXG4gICAgdmFyICRwcm9kdWN0Rm9ybXMgPSAkKCcjcHJvZHVjdC1zZXQtbGlzdCcpLmZpbmQoJ2Zvcm0nKS50b0FycmF5KCk7XG4gICAgVFByb21pc2UuYWxsKF8ubWFwKCRwcm9kdWN0Rm9ybXMsIGFkZFRvQ2FydCkpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZXMpIHtcbiAgICAgICAgICAgIGRpYWxvZy5jbG9zZSgpO1xuICAgICAgICAgICAgLy8gc2hvdyB0aGUgZmluYWwgcmVzcG9uc2Ugb25seSwgd2hpY2ggd291bGQgaW5jbHVkZSBhbGwgdGhlIG90aGVyIGl0ZW1zXG4gICAgICAgICAgICBtaW5pY2FydC5zaG93KHJlc3BvbnNlc1tyZXNwb25zZXMubGVuZ3RoIC0gMV0pO1xuICAgICAgICB9KTtcbn07XG5cbi8qKlxuICogQGZ1bmN0aW9uXG4gKiBAZGVzY3JpcHRpb24gQmluZHMgdGhlIGNsaWNrIGV2ZW50IHRvIGEgZ2l2ZW4gdGFyZ2V0IGZvciB0aGUgYWRkLXRvLWNhcnQgaGFuZGxpbmdcbiAqL1xuLy8gYWRkcyBhIHByb2R1Y3QgdG8gdGhlIG1pbmkgY2FydFxuLy8gQHBhcmFtc1xuLy8gcHJvZ3Jlc3NJbWFnZVNyYyAtIHNvdXJjZS91cmwgb2YgdGhlIGltYWdlIHRvIHNob3cgd2hlbiB0aGUgaXRlbVxuLy8gaXMgYmVpbmcgYWRkZWQgdG8gdGhlIGNhcnRcbi8vIHBvc3RkYXRhIC0gZm9ybSBkYXRhIGNvbnRhaW5pbmcgdGhlIHByb2R1Y3QgaW5mb3JtYXRpb24gdG8gYmVcbi8vIGFkZGVkIHRvIG1pbmktY2FydFxuLy8gY2FsbGJhY2sgLSBjYWxsIGJhY2sgZnVuY3Rpb24vaGFuZGxlclxudmFyIGFkZFRvQ2FydCA9IHtcbiAgICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJy5jaGVja291dG1pbmljYXJ0Jykuc2xpbXNjcm9sbCgpO1xuICAgICAgICAkKCcuYWRkLXRvLWNhcnRbZGlzYWJsZWRdJykuYXR0cigndGl0bGUnLCAkKCcuYXZhaWxhYmlsaXR5LW1zZycpLnRleHQoKSk7XG4gICAgICAgIC8vU3RhcnQgSklSQSBQUkVWLTQ1NCwgUFJFVi00NjkgOiBBcHBsaWNhdGlvbiBuYXZpZ2F0aW9uIG5vdCBjb25zaXN0ZW50IHdoZW4gY2xpY2sgb2YgYWRkIHRvIGNhcnQgYnV0dG9uIG9mIHRoZSBQcm9kdWN0IHNldCBwYWdlXG4gICAgICAgICQoJyNhZGQtYWxsLXRvLWNhcnQnKS5vbignY2xpY2snLCBhZGRBbGxUb0NhcnQpO1xuICAgICAgICBpZiAoJCgnLm1pbmktY2FydC1wcm9kdWN0JykubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgJCgnLm1pbmljYXJ0Y29udGVudCAuc2xpbVNjcm9sbERpdicpLnJlbW92ZUNsYXNzKCdsZXNzJyk7XG4gICAgICAgICAgICAkKCcubWluaWNhcnRjb250ZW50IC5zbGltU2Nyb2xsRGl2IC5zbGltU2Nyb2xsQmFyJykuc2hvdygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJCgnLm1pbmljYXJ0Y29udGVudCAuc2xpbVNjcm9sbERpdicpLmFkZENsYXNzKCdsZXNzJyk7XG4gICAgICAgICAgICAkKCcubWluaWNhcnRjb250ZW50IC5zbGltU2Nyb2xsRGl2IC5zbGltU2Nyb2xsQmFyJykuaGlkZSgpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBhZGQ6IGZ1bmN0aW9uIChwcm9ncmVzc0ltYWdlU3JjLCBwb3N0ZGF0YSwgY2FsbGJhY2spIHtcbiAgICAgICAgLy8gZ2V0IHRoZSBkYXRhIG9mIHRoZSBmb3JtIGFzIHNlcmlhbGl6ZWQgc3RyaW5nXG4gICAgICAgIC8vdmFyIHBvc3RkYXRhID0gcG9zdGRhdGE7XG5cbiAgICAgICAgZmJxKCd0cmFjaycsICdBZGRUb0NhcnQnLCB7XG4gICAgICAgICAgICAnY29udGVudF9pZHMnOiBbcG9zdGRhdGEucGlkXSxcbiAgICAgICAgICAgICdjb250ZW50X3R5cGUnOiAncHJvZHVjdCdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gZ2V0IGJ1dHRvbiByZWZlcmVuY2VcbiAgICAgICAgdmFyIGFkZEJ1dHRvbnMgPSBbXTtcblxuICAgICAgICAvLyB0aGUgYnV0dG9uIHRvIHVwZGF0ZVxuICAgICAgICB2YXIgYWRkQnV0dG9uID0gbnVsbDtcblxuICAgICAgICAvLyBpdCBpcyBhbiBhcnJheSBvZiBidXR0b25zLCBidXQgd2UgbmVlZCBvbmx5IG9uZSBhbGxcbiAgICAgICAgLy8gb3RoZXIgY29tYmluYXRpb25zIGFyZSBzdHJhbmdlIHNvIGZhclxuICAgICAgICBpZiAoYWRkQnV0dG9ucy5sZW5ndGggPT0gMSkge1xuICAgICAgICAgICAgYWRkQnV0dG9uID0gYWRkQnV0dG9uc1swXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBwcmV2aW91c0ltYWdlU3JjID0gbnVsbDtcblxuICAgICAgICAvLyBzaG93IHByb2dyZXNzIGluZGljYXRvclxuICAgICAgICBpZiAoYWRkQnV0dG9uICE9IG51bGwpIHtcbiAgICAgICAgICAgIHByZXZpb3VzSW1hZ2VTcmMgPSBhZGRCdXR0b24uc3JjO1xuICAgICAgICAgICAgYWRkQnV0dG9uLnNyYyA9IHByb2dyZXNzSW1hZ2VTcmM7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBoYW5kbGVzIHN1Y2Nlc3NmdWwgYWRkIHRvIGNhcnRcbiAgICAgICAgdmFyIGhhbmRsZXJGdW5jID0gZnVuY3Rpb24gKHJlcSkge1xuXG4gICAgICAgICAgICBpZiAoJCgnI2NvbnRhaW5lcicpLmhhc0NsYXNzKCdwdF9jYXJ0JykpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gaGlkZSBwcm9ncmVzcyBpbmRpY2F0b3JcbiAgICAgICAgICAgIGlmIChhZGRCdXR0b24gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGFkZEJ1dHRvbi5zcmMgPSBwcmV2aW91c0ltYWdlU3JjO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyByZXBsYWNlIHRoZSBjb250ZW50XG4gICAgICAgICAgICBqUXVlcnkoJyNtaW5pY2FydCcpLmh0bWwocmVxKTtcbiAgICAgICAgICAgIGFkZFRvQ2FydC5pbml0KCk7XG4gICAgICAgICAgICBpZiAoJCgnLm1pbmlyb3cnKS5sZW5ndGggPiAxICYmICEoJCgnYm9keScpLmhhc0NsYXNzKCdyYXBhbGFfZGV2aWNlJykpKSB7XG4gICAgICAgICAgICAgICAgJCgnLmNoZWNrb3V0bWluaWNhcnQnKS5zbGltc2Nyb2xsKHtcbiAgICAgICAgICAgICAgICAgICAgcmFpbFZpc2libGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGFsd2F5c1Zpc2libGU6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAkKCcubWluaWNhcnR0YWJsZScpLmZpbmQoJ3RoZWFkJykuZmlyc3QoKS5hZGRDbGFzcygndGhlYWRmaXhlZFRvcCcpO1xuICAgICAgICAgICAgICAgICQoJy5jaGVja291dG1pbmljYXJ0JykuZmluZCgnLmNhcnRvcmRlcnRvdGFscycpLnJlbW92ZUNsYXNzKCdjYXJ0dG90YWxzJyk7XG4gICAgICAgICAgICAgICAgJCgnLmNoZWNrb3V0bWluaWNhcnQnKS5maW5kKCcubWluaWNhcnR0YWJsZScpLnJlbW92ZUNsYXNzKCdtaW5pd2l0aG91dFNjcm9sbCcpO1xuICAgICAgICAgICAgICAgICQoJy5taW5pY2FydGNvbnRlbnQnKS5maW5kKCcubWluaWNhcnR0YWJsZWhlYWRlcicpLnJlbW92ZUNsYXNzKCdtaW5pd2l0aG91dFNjcm9sbGhlYWQnKTtcbiAgICAgICAgICAgICAgICAkKCcubWluaWNhcnR0YWJsZWhlYWRlcicpLmNzcygnYm9yZGVyLWJvdHRvbScsICcxcHggc29saWQgI2NjYycpO1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQoJy5taW5pY2FydHRhYmxlJykuZmluZCgnLnRoZWFkZml4ZWRUb3AnKS5yZW1vdmVDbGFzcygndGhlYWRmaXhlZFRvcCcpO1xuICAgICAgICAgICAgICAgICQoJy5taW5pY2FydHRhYmxlJykuZmluZCgnLmZpeGVkVG9wJykucmVtb3ZlQ2xhc3MoJ2ZpeGVkVG9wJyk7XG4gICAgICAgICAgICAgICAgJCgnLm1pbmljYXJ0JykuZmluZCgnLmNhcnRvcmRlcnRvdGFscycpLmFkZENsYXNzKCdjYXJ0dG90YWxzJyk7XG4gICAgICAgICAgICAgICAgJCgnLmNoZWNrb3V0bWluaWNhcnQnKS5maW5kKCcubWluaWNhcnR0YWJsZScpLmFkZENsYXNzKCdtaW5pd2l0aG91dFNjcm9sbCcpO1xuICAgICAgICAgICAgICAgICQoJy5taW5pY2FydGNvbnRlbnQnKS5maW5kKCcubWluaWNhcnR0YWJsZWhlYWRlcicpLmFkZENsYXNzKCdtaW5pd2l0aG91dFNjcm9sbGhlYWQnKTtcbiAgICAgICAgICAgICAgICAkKCcubWluaWNhcnR0YWJsZWhlYWRlcicpLmNzcygnYm9yZGVyLWJvdHRvbScsICcxcHggc29saWQgI2NjYycpO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICgkKCdib2R5JykuaGFzQ2xhc3MoJ3JhcGFsYV9kZXZpY2UnKSkge1xuICAgICAgICAgICAgICAgICQoJy5jaGVja291dG1pbmljYXJ0JykuZmluZCgnLm1pbmljYXJ0dGFibGUnKS5yZW1vdmVDbGFzcygnbWluaXdpdGhvdXRTY3JvbGwnKTtcbiAgICAgICAgICAgICAgICAvLyAkKFwiLm1pbmljYXJ0dGFibGUgLnRyX3JvdGF0aW9uOmxhc3QtY2hpbGRcIikuZmluZCgnLm1pbmlyb3cnKS5jc3MoJ2JvcmRlcicsJzFweCcpO1xuICAgICAgICAgICAgICAgICQoJy5taW5pY2FydHRhYmxlJykuZmluZCgndGhlYWQnKS5maXJzdCgpLmFkZENsYXNzKCd0aGVhZGZpeGVkVG9wJyk7XG4gICAgICAgICAgICAgICAgJCgnLm1pbmljYXJ0dGFibGUgLnRyX3JvdGF0aW9uOmxhc3QtY2hpbGQnKS5maW5kKCcubWluaXJvdycpLmNzcygnYm9yZGVyJywgJzBweCcpO1xuICAgICAgICAgICAgICAgICQoJy5taW5pY2FydHRhYmxlaGVhZGVyJykuY3NzKCdib3JkZXItYm90dG9tJywgJzFweCBzb2xpZCAjY2NjJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkKCcubWluaWNhcnR0YWJsZSAudHJfcm90YXRpb246bGFzdC1jaGlsZCcpLmZpbmQoJy5taW5pcm93JykuY3NzKCdib3JkZXInLCAnMHB4Jyk7XG5cbiAgICAgICAgICAgIGlmIChtaW5pY2FydC5zdXBwcmVzc1NsaWRlRG93biAmJiBtaW5pY2FydC5zdXBwcmVzc1NsaWRlRG93bigpKSB7XG4gICAgICAgICAgICAgICAgLy8gZG8gbm90aGluZ1xuICAgICAgICAgICAgICAgIC8vIHRoZSBob29rICdNaW5pQ2FydC5zdXBwcmVzc1NsaWRlRG93bigpJyBzaG91bGQgaGF2ZVxuICAgICAgICAgICAgICAgIC8vIGRvbmUgdGhlIHJlZnJlc2hcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbWluaWNhcnQuc2xpZGUoKTtcbiAgICAgICAgICAgICAgICBtaW5pY2FydC5zZXRtaW5pY2FyaGVpZ2h0KCk7XG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJCgnI3BkcE1haW4gLmFkZHRvY2FydGNvbmZpcm0tdG9vbHRpcCcpLmZhZGVJbig0MDApLnNob3coKVxuICAgICAgICAgICAgICAgIC5kZWxheSgxNTAwKS5mYWRlT3V0KDQwMCk7XG4gICAgICAgICAgICAvLyBmaXJlIHRoZSBCb251c0Rpc2NvdW50TGluZUl0ZW1DaGVjayBldmVudCBzbyB3ZSBjYW4gY2hlY2tcbiAgICAgICAgICAgIC8vIGlmIHRoZXJlIGlzIGEgYm9udXMgZGlzY291bnQgbGluZSBpdGVtXG4gICAgICAgICAgICBqUXVlcnkoZG9jdW1lbnQpLnRyaWdnZXIoXG4gICAgICAgICAgICAgICAgalF1ZXJ5LkV2ZW50KCdCb251c0Rpc2NvdW50TGluZUl0ZW1DaGVjaycpKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBoYW5kbGVzIGFkZCB0byBjYXJ0IGVycm9yXG4gICAgICAgIHZhciBlcnJGdW5jID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gaGlkZSBwcm9ncmVzcyBpbmRpY2F0b3JcbiAgICAgICAgICAgIGlmIChhZGRCdXR0b24gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGFkZEJ1dHRvbi5zcmMgPSBwcmV2aW91c0ltYWdlU3JjO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIGNsb3NlcyBhIHByZXZpb3VzIG1pbmkgY2FydFxuICAgICAgICBtaW5pY2FydC5jbG9zZSgpO1xuXG4gICAgICAgIHZhciB1cmwgPSBVcmxzLmFkZFByb2R1Y3Q7XG5cbiAgICAgICAgLy8gYWRkIHRoZSBwcm9kdWN0XG4gICAgICAgIC8vTG9va3MgdGhlIGJlbG93IGNvbW1lbnRlZCBjb2RlIGlzIG5vdCByZXF1aXJlZCBhbmQgdGhpcyBpcyBzdG9wcGluZyBub3QgYWJsZSBhZGQgdmFyaWF0aW9uIHByb2R1Y3QgZnJvbSBxdWljayB2aWV3IGluIGNhcnQgcGFnZS5cbiAgICAgICAgLyogaWYgKCQoJyNjb250YWluZXInKS5oYXNDbGFzcygncHRfY2FydCcpICYmICQoJy5hZGRUby1jYXJ0LXNlY3Rpb24nKS5maW5kKCcucmVjb21tZW5kYXRpb25fY2FydCcpLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICB2YXIgcGxJdGVtSWQgPSAkKCdpbnB1dC5saW5lLWl0ZW1pZCcpLnZhbCgpO1xuICAgICAgICAgICAgdmFyIHBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICB1cGRhdGVRdHk6ICd0cnVlJyxcbiAgICAgICAgICAgICAgICBsaW5lSXRlbUlkOiBwbEl0ZW1JZFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHVybCA9IHV0aWwuYXBwZW5kUGFyYW1zVG9VcmwoVXJscy5lZGl0TGluZUl0ZW0sIHBhcmFtcyk7XG4gICAgICAgIH0gKi9cblxuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgdXJsOiB1dGlsLmFqYXhVcmwodXJsKSxcbiAgICAgICAgICAgIGNhY2hlOiB0cnVlLFxuICAgICAgICAgICAgZGF0YTogcG9zdGRhdGEsXG4gICAgICAgICAgICBzdWNjZXNzOiBoYW5kbGVyRnVuYyxcbiAgICAgICAgICAgIGVycm9yOiBlcnJGdW5jXG4gICAgICAgIH0pO1xuICAgIH1cbn07XG5tb2R1bGUuZXhwb3J0cyA9IGFkZFRvQ2FydDtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHBkcEV2ZW50cyA9IHJlcXVpcmUoJy4vcGRwRXZlbnRzJyksXG4gICAgYWRkVG9DYXJ0ID0gcmVxdWlyZSgnLi9hZGRUb0NhcnQnKTtcblxudmFyIHByb2R1Y3QgPSB7XG4gICAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgICAgICAvL2luaXRpYWxpemVEb20oKTtcbiAgICAgICAgLy9pbml0aWFsaXplRXZlbnRzKCk7XG4gICAgICAgIGFkZFRvQ2FydC5pbml0KCk7XG4gICAgICAgIHBkcEV2ZW50cy5pbml0KCk7XG4gICAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBwcm9kdWN0O1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIHV0aWwgPSByZXF1aXJlKCcuLi8uLi91dGlsJyksXG4gICAgZGlhbG9nID0gcmVxdWlyZSgnLi4vLi4vZGlhbG9nJyksXG4gICAgLy90b29sdGlwID0gcmVxdWlyZSgnLi4vLi4vdG9vbHRpcCcpLFxuICAgIC8vdWlldmVudHMgPSByZXF1aXJlKCcuLi8uLi91aWV2ZW50cycpLFxuICAgIC8vcXVpY2t2aWV3ID0gcmVxdWlyZSgnLi4vLi4vcXVpY2t2aWV3JyksXG4gICAgYWRkVG9DYXJ0ID0gcmVxdWlyZSgnLi9hZGRUb0NhcnQnKSxcbiAgICBwcm9ncmVzcyA9IHJlcXVpcmUoJy4uLy4uL3Byb2dyZXNzJyksXG4gICAgYWpheCA9IHJlcXVpcmUoJy4uLy4uL2FqYXgnKTtcblxudmFyIHByb2R1Y3QgPSBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAvLyBwcm9kdWN0IHByaXZhdGUgZGF0YVxuXG4gICAgLy8gcHJvZHVjdCBqc29uIGRhdGFcbiAgICB2YXIgbW9kZWwgPSByZXNwb25zZTtcblxuICAgIC8vIGRpdiBjb3RhaW5lciBpZFxuICAgIHZhciBteUNvbnRhaW5lcklkID0gJyc7XG5cbiAgICAvLyBib29sZWFuIGZsYWcgdG8gdHJhY2sgdGhlIHZhcmlhbnRzIGRhdGEgcmVxdWVzdCwgcmVzZXQgaW4gbG9hZFZhcmlhbnRzKCkgd2hlbiB0aGUgdmFyaWFudHMgZGF0YSBpcyBsb2FkZWRcbiAgICB2YXIgaXNMb2FkaW5nVmFyID0gZmFsc2U7XG5cbiAgICAvLyBoZWxwZXIgZnVuY3Rpb24gdG8gbG9hZCB2YXJpYW50cyBkYXRhIGZyb20gdGhlIHNlcnZlclxuICAgIC8vIG9uY2UgdGhlIGRhdGEgaXMgcmV0cmlldmVkLCBpdCBmaXJlcyBWYXJpYXRpb25zTG9hZGVkIGV2ZW50IHNvIHRoYXQgVUkgY2FuIGJlIHJlZnJlc2hlZCBhcHByb3ByaWF0ZWx5XG4gICAgdmFyIGxvYWRWYXJpYW50cyA9IGZ1bmN0aW9uICh0aGlzUHJvZHVjdCkge1xuICAgICAgICBpc0xvYWRpbmdWYXIgPSB0cnVlO1xuICAgICAgICAvLyBidWlsZCB0aGUgdXJsIGFuZCBsb2FkIHZhcmlhbnRzIGRhdGFcbiAgICAgICAgYWpheC5nZXRKc29uKHtcbiAgICAgICAgICAgIHVybDogVXJscy5nZXRWYXJpYW50cyxcbiAgICAgICAgICAgIGRhdGE6IHsncGlkJzogdGhpc1Byb2R1Y3QucGlkLCAnZm9ybWF0JzogJ2pzb24nfSxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoZGF0YSkge1xuXG4gICAgICAgICAgICAgICAgaWYgKCFkYXRhIHx8ICFkYXRhLnZhcmlhdGlvbnMgfHwgIWRhdGEudmFyaWF0aW9ucy52YXJpYW50cykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG1vZGVsLnZhcmlhdGlvbnMudmFyaWFudHMgPSBkYXRhLnZhcmlhdGlvbnMudmFyaWFudHM7XG4gICAgICAgICAgICAgICAgaXNMb2FkaW5nVmFyID0gZmFsc2U7IC8vIHdlIGhhdmUgbG9hZGVkIHRoZSB2YXJpYW50c1xuICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzUHJvZHVjdCkudHJpZ2dlcignVmFyaWF0aW9uc0xvYWRlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLy8gaGVscGVyIGZ1bmN0aW9uIHRvIHJlbG9hZCBhdmFpbGFiaWxpdHkgZGF0YS5cbiAgICAvLyBieSBkZWZhdWx0LCBhdmFpbGFiaWxpdHkgZGF0YSBpcyBiYXNlZCBvbiBhIHF1YW50aXR5IG9mIDEuXG4gICAgLy8gaWYgYSBjdXN0b21lciBjaGFuZ2VzIHRoZSBxdWFudGl0eSwgdXNlIHRoaXMgbWV0aG9kXG4gICAgLy8gdG8gcmVsb2FkIHRoZSBhdmFpbGFiaWxpdHkgYmFzZWQgb24gdGhlIG5ldyBxdWFudGl0eS5cbiAgICB2YXIgcmVsb2FkQXZhaWxhYmlsaXR5ID0gZnVuY3Rpb24gKHRoaXNQcm9kdWN0LCBxdWFudGl0eSkge1xuXG4gICAgICAgIHZhciBpZCA9ICcnO1xuICAgICAgICBpZiAodGhpc1Byb2R1Y3QubWFzdGVyIHx8IHRoaXNQcm9kdWN0LnZhcmlhbnQpIHtcbiAgICAgICAgICAgIGlkID0gdGhpc1Byb2R1Y3Quc2VsZWN0ZWRWYXIuaWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZCA9IHRoaXNQcm9kdWN0LnBpZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGFqYXguZ2V0SnNvbih7XG4gICAgICAgICAgICB1cmw6IFVybHMuZ2V0QXZhaWxhYmlsaXR5LFxuICAgICAgICAgICAgZGF0YTogeydwaWQnOiBpZCwgJ1F1YW50aXR5JzogcXVhbnRpdHksICdmb3JtYXQnOiAnanNvbid9LFxuICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChkYXRhKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAoIWRhdGEgfHwgIWRhdGEubGV2ZWxzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgdGhlIGRhdGEgaW4gdGhlIHZhcmlhbnRcbiAgICAgICAgICAgICAgICBpZiAoKHRoaXNQcm9kdWN0Lm1hc3RlciB8fCB0aGlzUHJvZHVjdC52YXJpYW50KSAmJiB0aGlzUHJvZHVjdC5zZWxlY3RlZFZhcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzUHJvZHVjdC5zZWxlY3RlZFZhci5hdkxldmVscyA9IGRhdGEubGV2ZWxzO1xuICAgICAgICAgICAgICAgICAgICB0aGlzUHJvZHVjdC5zZWxlY3RlZFZhci5hdlN0YXR1cyA9IGRhdGEuc3RhdHVzO1xuICAgICAgICAgICAgICAgICAgICB0aGlzUHJvZHVjdC5zZWxlY3RlZFZhci5hdlN0YXR1c1F1YW50aXR5ID0gZGF0YS5zdGF0dXNRdWFudGl0eTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtb2RlbC5hdkxldmVscyA9IGRhdGEubGV2ZWxzO1xuICAgICAgICAgICAgICAgICAgICBtb2RlbC5hdlN0YXR1cyA9IGRhdGEuc3RhdHVzO1xuICAgICAgICAgICAgICAgICAgICBtb2RlbC5hdlN0YXR1c1F1YW50aXR5ID0gZGF0YS5zdGF0dXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzUHJvZHVjdCkudHJpZ2dlcignUmVsb2FkQXZhaWxhYmlsaXR5Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgfTtcbiAgICAvLyByZXR1cm5zIHRoZSBhZ2dyZWdhdGUgYXZhaWxhYmxlIHRvIHNlbGwgdmFsdWVcbiAgICAvLyBmcm9tIGFsbCB2YXJpYW50c1xuICAgIHZhciBnZXRBVFMgPSBmdW5jdGlvbiAodmFyaWFudHMpIHtcblxuICAgICAgICB2YXIgYXRzQ291bnQgPSAwO1xuICAgICAgICB2YXIgdmFyaWFudDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YXJpYW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyaWFudCA9IHZhcmlhbnRzW2ldO1xuICAgICAgICAgICAgaWYgKHZhcmlhbnQuQVRTID4gMCkge1xuICAgICAgICAgICAgICAgIGF0c0NvdW50ID0gYXRzQ291bnQgKyB2YXJpYW50LkFUUztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXRzQ291bnQ7XG4gICAgfTtcblxuICAgIC8vIHJldHVybnMgdGhlIGFnZ3JlZ2F0ZSBhdmFpbGFibGUgdG8gc2VsbCB2YWx1ZVxuICAgIC8vIGZyb20gYWxsIHZhcmlhbnRzXG4gICAgdmFyIGdldEF2YWlsYWJpbGl0eSA9IGZ1bmN0aW9uICh2YXJpYW50cykge1xuXG4gICAgICAgIHZhciBhdmFpbGFibGUgPSBmYWxzZTtcbiAgICAgICAgdmFyIHZhcmlhbnQ7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFyaWFudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhcmlhbnQgPSB2YXJpYW50c1tpXTtcbiAgICAgICAgICAgIGlmICh2YXJpYW50LmF2U3RhdHVzICE9PSAnTk9UX0FWQUlMQUJMRScpIHtcbiAgICAgICAgICAgICAgICBhdmFpbGFibGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhdmFpbGFibGU7XG4gICAgfTtcblxuICAgIC8vIGhlbHBlciBmdW5jdGlvbiB0byBiaW5kIHByb2R1Y3Qgb3B0aW9ucyBkcm9wIGRvd25zIGV2ZW50IGhhbmRsZXJzXG4gICAgLy8gSW50aWFsaXplcyB0aGUgcHJvZHVjdC5zZWxlY3RlZE9wdGlvbnMgb2JqZWN0IHdpdGggdGhlIGN1cnJlbnRseSBzZWxlY3RlZCBvcHRpb25zXG4gICAgLy8gaXQgYWxzbyBzaG93cyB0aGUgY29tcHV0ZWQvdXBkYXRlZCBwcmljZVxuICAgIHZhciBnZXRPcHRpb25zRGl2ID0gZnVuY3Rpb24gKHRoaXNQcm9kdWN0KSB7XG5cbiAgICAgICAgaWYgKG1vZGVsLmlzT3B0aW9uKSB7XG5cbiAgICAgICAgICAgIHZhciBwZHBPcHQgPSBqUXVlcnkodGhpc1Byb2R1Y3QuY29udGFpbmVySWQgKyAnIC5wcm9kdWN0X29wdGlvbnM6bGFzdCBzZWxlY3QnKTtcblxuICAgICAgICAgICAgcGRwT3B0LmNoYW5nZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHMgPSB0aGlzLm9wdGlvbnNbdGhpcy5zZWxlY3RlZEluZGV4XS52YWx1ZS5zcGxpdCgnJT8lJyk7IC8vIDAgPSB2YWx1ZSwgMSA9IHByaWNlXG4gICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3Quc2VsZWN0ZWRPcHRpb25zW3RoaXMuaWRdID0gdmFsc1swXTtcbiAgICAgICAgICAgICAgICB0aGlzUHJvZHVjdC5zZWxlY3RlZFByaWNlW3RoaXMuaWRdID0gdmFsc1sxXTtcbiAgICAgICAgICAgICAgICB0aGlzUHJvZHVjdC5zaG93VXBkYXRlZFByaWNlKGNvbXB1dGVQcmljZSh0aGlzUHJvZHVjdCksIG1vZGVsLnByaWNpbmcuc3RhbmRhcmQpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIGxldCB1cyBnZXQgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCB2YWx1ZSBhbmQgaW50aWxpemUgdGhlIHVpXG4gICAgICAgICAgICBwZHBPcHQuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHMgPSB0aGlzLm9wdGlvbnNbdGhpcy5zZWxlY3RlZEluZGV4XS52YWx1ZS5zcGxpdCgnJT8lJyk7IC8vIDAgPSB2YWx1ZSwgMSA9IHByaWNlXG5cbiAgICAgICAgICAgICAgICB0aGlzUHJvZHVjdC5zZWxlY3RlZE9wdGlvbnNbdGhpcy5pZF0gPSB2YWxzWzBdO1xuICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LnNlbGVjdGVkUHJpY2VbdGhpcy5pZF0gPSB2YWxzWzFdO1xuICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LnNob3dVcGRhdGVkUHJpY2UoY29tcHV0ZVByaWNlKHRoaXNQcm9kdWN0KSwgbW9kZWwucHJpY2luZy5zdGFuZGFyZCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBiaW5kcyBBMkMgYnV0dG9uIGNsaWNrIGhhbmRsZXJcbiAgICB2YXIgZ2V0QWRkVG9DYXJ0QnRuID0gZnVuY3Rpb24gKHRoaXNQcm9kdWN0KSB7XG4gICAgICAgIHZhciBhZGRUb0NhcnRCdG4gPSBqUXVlcnkodGhpc1Byb2R1Y3QuY29udGFpbmVySWQgKyAnIC5hZGR0b2NhcnRidXR0b246bGFzdCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChtb2RlbC5tYXN0ZXIgfHwgbW9kZWwudmFyaWFudCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzUHJvZHVjdC5zZWxlY3RlZFZhciA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBpdCBpcyBuZWNlc3NhcnkgdG8gdXBkYXRlIHRoZSBvcHRpb24gaWQgdG8gYmUgdmFyaWFudC1zcGVjaWZpY1xuICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzUHJvZHVjdC5jb250YWluZXJJZCArICcgLnByb2R1Y3Rfb3B0aW9uczpsYXN0IHNlbGVjdCcpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzUHJvZHVjdC5zZWxlY3RlZE9wdGlvbnNbdGhpcy5pZF07XG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdJZCA9IHRoaXMuaWQucmVwbGFjZSh0aGlzUHJvZHVjdC5waWQsIHRoaXNQcm9kdWN0LnNlbGVjdGVkVmFyLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3Quc2VsZWN0ZWRPcHRpb25zW25ld0lkXSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpc1Byb2R1Y3Quc2VsZWN0ZWRPcHRpb25zW3RoaXMuaWRdO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3Quc2VsZWN0ZWRPcHRpb25zLnBpZCA9IHRoaXNQcm9kdWN0LnNlbGVjdGVkVmFyLmlkO1xuICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LnNlbGVjdGVkT3B0aW9ucy5tYXN0ZXJQaWQgPSB0aGlzUHJvZHVjdC5waWQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciB0ZW1wUXR5ID0gJyc7XG4gICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgd2UgYXJlIGFkZGluZyBhIGJ1bmRsZS9wcm9kdWN0c2V0IHRvIHRoZSBjYXJ0XG4gICAgICAgICAgICAgICAgaWYgKG1vZGVsLmJ1bmRsZSB8fCBtb2RlbC5wcm9kdWN0U2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzdWJQcm9kdWN0cyA9IHRoaXNQcm9kdWN0LnN1YlByb2R1Y3RzO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29tbWEgPSAnLCc7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzdWJwcm9kdWN0ID0gbnVsbDtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzUHJvZHVjdC5zZWxlY3RlZE9wdGlvbnMuY2hpbGRQaWRzID0gJyc7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG1vZGVsLnByb2R1Y3RTZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LnNlbGVjdGVkT3B0aW9ucy5RdWFudGl0eSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gcHJvY2VzcyBlYWNoIGluZGl2aWR1YWwgcHJvZHVjdHMgaW4gdGhlIHNldC9idW5kbGVcbiAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHByZXBhcmUgcHJvZHVjdC5zZWxlY3RlZE9wdGlvbnMgZm9yIGZpbmFsIHN1Ym1pc3Npb25cbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdWJQcm9kdWN0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3VicHJvZHVjdCA9IHN1YlByb2R1Y3RzW2ldO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PSBzdWJQcm9kdWN0cy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWEgPSAnJzsgLy8gYXQgdGhlIGVuZCBvZiB0aGUgbGlzdFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzZWUgaWYgYW55IG9mIHRoZSBzdWIgcHJvZHVjdHMgYXJlIHZhcmlhdGlvbnMsIGlmIHNvIHRoZW4gZ2V0IHRoZSBzZWxlY3RlZCB2YXJpYXRpb24gaWRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZyb20gc2VsZWN0ZWRWYXIgcHJvcGVydHkgYW5kIG1ha2UgaXQgYSBjb21tYSBzZXBhcmF0ZWQgbGlzdFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChzdWJwcm9kdWN0LnZhcmlhbnQgfHwgc3VicHJvZHVjdC5tYXN0ZXIpICYmIHN1YnByb2R1Y3Quc2VsZWN0ZWRWYXIgPT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3VicHJvZHVjdC52YXJpYW50IHx8IHN1YnByb2R1Y3QubWFzdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3Quc2VsZWN0ZWRPcHRpb25zLmNoaWxkUGlkcyArPSBzdWJwcm9kdWN0LnNlbGVjdGVkVmFyLmlkICsgY29tbWE7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LnNlbGVjdGVkT3B0aW9ucy5jaGlsZFBpZHMgKz0gc3VicHJvZHVjdC5waWQgKyBjb21tYTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXBQaWQgPSBzdWJwcm9kdWN0LnNlbGVjdGVkT3B0aW9ucy5waWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJwcm9kdWN0LnNlbGVjdGVkT3B0aW9ucy5waWQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWVyZ2Ugc2VsZWN0ZWQgb3B0aW9ucyBvZiBzdWIgcHJvZHVjdCB3aXRoIHRoZSBtYWluIHByb2R1Y3RcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LnNlbGVjdGVkT3B0aW9ucyA9IGpRdWVyeS5leHRlbmQoe30sIHRoaXNQcm9kdWN0LnNlbGVjdGVkT3B0aW9ucywgc3VicHJvZHVjdC5zZWxlY3RlZE9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3VicHJvZHVjdC5zZWxlY3RlZE9wdGlvbnMucGlkID0gdGVtcFBpZDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgaXQgaXMgYSBwcm9kdWN0IHNldCB0aGVuIHN1YiBwcm9kdWN0cyBjYW4gaGF2ZSB0aGVpciBzZXBhcmF0ZSBxdHlcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtb2RlbC5wcm9kdWN0U2V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFF0eSArPSBzdWJwcm9kdWN0LnNlbGVjdGVkT3B0aW9ucy5RdWFudGl0eSArIGNvbW1hO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gaWYgaXQgaXMgYSBwcm9kdWN0IHNldCB0aGVuIHN1YiBwcm9kdWN0cyBjYW4gaGF2ZSB0aGVpciBzZXBhcmF0ZSBxdHlcbiAgICAgICAgICAgICAgICAvLyB0ZW1wUXR5IGlzIGEgY29tbWEgc2VwYXJhdGVkIGxpc3Qgb2YgcXR5IGZvciBlYWNoIHByb2R1Y3QgaW4gdGhlIHNldFxuICAgICAgICAgICAgICAgIGlmIChtb2RlbC5wcm9kdWN0U2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LnNlbGVjdGVkT3B0aW9ucy5RdWFudGl0eSA9IHRlbXBRdHk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gbWFrZSBzdXJlIHRoZSBwaWQgd2hpY2ggZ2V0cyBzdWJtaXR0ZWQgaXMgZm9yIHRoZSBtYWluIHByb2R1Y3RcbiAgICAgICAgICAgICAgICB0aGlzUHJvZHVjdC5zZWxlY3RlZE9wdGlvbnMucGlkID0gdGhpc1Byb2R1Y3QucGlkO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobW9kZWwuYnVuZGxlKSB7XG4gICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3Quc2VsZWN0ZWRPcHRpb25zLlF1YW50aXR5ID0gMTsgLy8gaGFyZCBjb2RlZCBxdHk9MSB3aGVuIHdlIHRoZSBwcm9kdWN0IGlzIGEgYnVuZGxlXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFtb2RlbC5wcm9kdWN0U2V0KSB7XG4gICAgICAgICAgICAgICAgLy8gZ3JhYiB0aGUgdXNlciBlbnRlcmVkIHF0eVxuICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LnNlbGVjdGVkT3B0aW9ucy5RdWFudGl0eSA9IGpRdWVyeSh0aGlzUHJvZHVjdC5jb250YWluZXJJZCArICcgLnF1YW50aXR5aW5wdXQ6bGFzdCcpLnZhbCgpO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGlmIGl0IGlzIG5vdCBhIHByb2R1Y3RzZXQgdGhlbiBtYWtlIHN1cmUgcXR5IGlzIHNwZWNpZmllZCBncmVhdGVyIHRoYW4gMFxuICAgICAgICAgICAgaWYgKG1vZGVsLnByb2R1Y3RTZXQgfHwgdGhpc1Byb2R1Y3Quc2VsZWN0ZWRPcHRpb25zLlF1YW50aXR5ID4gMCkge1xuICAgICAgICAgICAgICAgIC8vIGRpc2FibGUgYTJjIGJ1dHRvblxuICAgICAgICAgICAgICAgIGFkZFRvQ2FydEJ0bi5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuXG4gICAgICAgICAgICAgICAgLy8gY2xvc2UgdGhlIHF1aWNrIHZpZXcgd2hlbiB1c2VyIGNsaWNrcyBBMkMuXG4gICAgICAgICAgICAgICAgaWYgKCQoJyNRdWlja1ZpZXdEaWFsb2cnKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJyNRdWlja1ZpZXdEaWFsb2cnKS5kaWFsb2coJ2Nsb3NlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGZpbmQgaWYgdGhlcmUgaXMgYSBoYW5kbGVyIGJvdW5kIHRvIEFkZFRvQ2FydCBldmVudCBlLmcuIGNhcnQgLT4gZWRpdCBkZXRhaWxzIG9yIHdpc2hsaXN0IC0+IGVkaXQgZGV0YWlscyBldGMuXG4gICAgICAgICAgICAgICAgLy8gdGhlbiBmaXJlIGl0IG90aGVyZXdpc2UgY2FsbCBhZGRUb0NhcnQuYWRkIHRvIGFkZCB0aGUgc2VsZWN0ZWQgcHJvZHVjdCB0byB0aGUgY2FydCBhbmQgc2hvdyBtaW5pY2FydFxuICAgICAgICAgICAgICAgIHZhciBldmVudCA9IGpRdWVyeS5FdmVudCgnQWRkVG9DYXJ0Jyk7XG4gICAgICAgICAgICAgICAgZXZlbnQuc2VsZWN0ZWRPcHRpb25zID0gdGhpc1Byb2R1Y3Quc2VsZWN0ZWRPcHRpb25zO1xuXG4gICAgICAgICAgICAgICAgaWYgKGpRdWVyeS5ldmVudC5nbG9iYWwuQWRkVG9DYXJ0ID09IHVuZGVmaW5lZCB8fCBqUXVlcnkuZXZlbnQuZ2xvYmFsLkFkZFRvQ2FydCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZFRvQ2FydC5hZGQoJycsIHRoaXNQcm9kdWN0LnNlbGVjdGVkT3B0aW9ucywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkVG9DYXJ0QnRuLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBqUXVlcnkoZG9jdW1lbnQpLnRyaWdnZXIoZXZlbnQpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gYWRkVG9DYXJ0QnRuO1xuICAgIH07XG5cbiAgICAvLyBiaW5kIHF0eSBib3gga2V5dXAgaGFuZGxlclxuICAgIC8vIHRoZSBoYW5kbGVyIGdyYWJzIHRoZSB2YWx1ZSBhbmQgdXBkYXRlc1xuICAgIC8vIHByb2R1Y3Quc2VsZWN0ZWRPcHRpb24uUXVhbnRpdHlcbiAgICAvLyBzaG93IHRoZSB1cGRhdGVkIGF2YWlsYWJpbHR5IG1lc3NhZ2UgaW4gY2FzZSB0aGUgYXZhaWxhYmxlIHF0eSBpcyBkaWZmZXJlbnQgdGhhbiBhdmFpbGFibGUgZXRjLlxuICAgIC8vIHRyaWdnZXIgQWRkdG9DYXJ0RW5hYmxlZCBldmVudFxuICAgIHZhciBnZXRRdHlCb3ggPSBmdW5jdGlvbiAodGhpc1Byb2R1Y3QpIHtcblxuICAgICAgICBqUXVlcnkodGhpc1Byb2R1Y3QuY29udGFpbmVySWQgKyAnIC5xdWFudGl0eWlucHV0Omxhc3QnKS5rZXl1cChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdmFsID0gbnVsbDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFsID0gcGFyc2VJbnQoalF1ZXJ5KHRoaXNQcm9kdWN0LmNvbnRhaW5lcklkICsgJyAucXVhbnRpdHlpbnB1dDpsYXN0JykudmFsKCksIDEwKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB2YWwgPSBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodmFsKSB7XG4gICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3Quc2VsZWN0ZWRPcHRpb25zLlF1YW50aXR5ID0gdmFsO1xuXG4gICAgICAgICAgICAgICAgLy8gaWYgdGhlIHByb2R1Y3QgaGFzIHZhcmlhdGlvbnMgY2hlY2sgZm9yIG5vbiBzZWxlY3RlZCBvbmVzIGFuZCBkaXNwbGF5IG1pc3NpbmcgdmFsdWVcbiAgICAgICAgICAgICAgICBpZiAobW9kZWwudmFyaWF0aW9ucyAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5vblNlbGVjdGVkVmFycyA9IFtdO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIGdldCB0aGUgbm9uLXNlbGVjdGVkIHZhcmlhdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5LmVhY2gobW9kZWwudmFyaWF0aW9ucy5hdHRyaWJ1dGVzLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXNQcm9kdWN0LnNlbGVjdGVkVmFyQXR0cmlic1t0aGlzLmlkXSB8fCB0aGlzUHJvZHVjdC5zZWxlY3RlZFZhckF0dHJpYnNbdGhpcy5pZF0gPT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub25TZWxlY3RlZFZhcnMucHVzaCh0aGlzLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAobm9uU2VsZWN0ZWRWYXJzLmxlbmd0aCA+IDApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWFrZSBzdXJlIHRoZXJlIGlzIHNvbWV0aGluZyB0byBzZWxsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXRzQ291bnQgPSBnZXRBVFMobW9kZWwudmFyaWF0aW9ucy52YXJpYW50cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXRzQ291bnQgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRvb2x0aXBTdHIgPSBnZXROb25TZWxlY3RlZFRvb2x0aXAobm9uU2VsZWN0ZWRWYXJzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtaXNzaW5nTXNnID0gJC52YWxpZGF0b3IuZm9ybWF0KFJlc291cmNlcy5NSVNTSU5HX1ZBTCwgdG9vbHRpcFN0cik7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRBdmFpbGFiaWxpdHlNc2cobWlzc2luZ01zZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgcXVhbnRpdHkgdmFsdWUgaXMgZGlmZmVyZW50IHRoYW5cbiAgICAgICAgICAgICAgICAvLyB3aGVuIHdlIGxvYWRlZCB0aGUgYXZhaWxhYmlsaXR5IGRhdGEsIHRoZW5cbiAgICAgICAgICAgICAgICAvLyByZWZyZXNoIGF2YWlsYWJpbGl0eSBkYXRhIGZvciB0aGlzIHZhcmlhbnRcbiAgICAgICAgICAgICAgICBpZiAodmFsICE9IHRoaXNQcm9kdWN0LmdldEF2YWlsYWJpbGl0eVF0eSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbG9hZEF2YWlsYWJpbGl0eSh0aGlzUHJvZHVjdCwgdmFsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy9KQ0s6IHRoaXMgaXNuJ3QgYmVpbmcgcnVuIEFGVEVSIEFKQVg/XG4gICAgICAgICAgICAgICAgLy9zZXRBdmFpbGFiaWxpdHlNc2coY3JlYXRlQXZNZXNzYWdlKHRoaXNQcm9kdWN0LCB2YWwpKTtcbiAgICAgICAgICAgICAgICAvL2pRdWVyeSh0aGlzUHJvZHVjdCkudHJpZ2dlcihcIkFkZHRvQ2FydEVuYWJsZWRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGdyYWIgdGhlIGN1cnJlbnRseSBkaXNwbGF5ZWQgdmFsdWUgYmFzaWNhbGx5IHRoZSBpbml0aWFsIGRpc3BsYXllZCB2YWx1ZVxuICAgICAgICB0aGlzUHJvZHVjdC5zZWxlY3RlZE9wdGlvbnMuUXVhbnRpdHkgPSBqUXVlcnkodGhpc1Byb2R1Y3QuY29udGFpbmVySWQgKyAnIC5xdWFudGl0eWlucHV0Omxhc3QnKS52YWwoKTtcblxuICAgICAgICBpZiAoIWlzTG9hZGluZ1Zhcikge1xuICAgICAgICAgICAgLy8gc2hvdyBwcm9wZXIgYXZhaWxhYmlsaXR5IG1lc3NhZ2VcbiAgICAgICAgICAgIHNldEF2YWlsYWJpbGl0eU1zZyhjcmVhdGVBdk1lc3NhZ2UodGhpc1Byb2R1Y3QsIHRoaXNQcm9kdWN0LnNlbGVjdGVkT3B0aW9ucy5RdWFudGl0eSkpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIGNyZWF0ZSBwcm9kdWN0IHRhYnMgaS5lLiBkZXNjcmlwdGlvbiwgQXR0cmlidXRlcywgUmV2aWV3cyBldGMuXG4gICAgLy8gaXQgZGVwZW5kcyBvbiBqUXVlcnkgdG8gY3JlYXRlIHRhYiBkaXNwbGF5LlxuICAgIC8vIGFsc28gYmluZCB0YWIgcHJpbnQgYnV0dG9uIGNsaWNrIGhhbmRsZXJcbiAgICB2YXIgZ2V0VGFicyA9IGZ1bmN0aW9uIChjb250YWluZXJJZCkge1xuXG4gICAgICAgIHZhciB0YWJzRGl2ID0galF1ZXJ5KGNvbnRhaW5lcklkICsgJyAjdGFicycpO1xuICAgICAgICB0YWJzRGl2LnRhYnMoKTtcblxuICAgICAgICAvLyB0YWIgcHJpbnQgaGFuZGxlclxuICAgICAgICBqUXVlcnkoJ2EucHJpbnRwYWdlJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgd2luZG93LnByaW50KCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvLyByZWdpc3RlciBpbml0aWFsaXphdGlvbnMgaGVyZVxuICAgIC8vc2hvdyBhbmQgaGlkZSBoYW5kbGluZyBvZiBzcGVjaWZpYyBjb3VudHJ5LlxuICAgIGlmICh0eXBlb2YgZ2VvaXBDb3VudHJ5Q29kZSA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHZhciBJUEdlb0NvZGUgPSBnZW9pcENvdW50cnlDb2RlKCk7XG4gICAgICAgIHZhciBhbGxvd2VkQ291bnRyaWVzID0gJCgnLmFsbG93ZWQtY291bnRyaWVzJykudGV4dCgpO1xuICAgICAgICBpZiAoYWxsb3dlZENvdW50cmllcyA9PSBudWxsIHx8IGFsbG93ZWRDb3VudHJpZXMgPT0gJ251bGwnIHx8IGFsbG93ZWRDb3VudHJpZXMgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGFsbG93ZWRDb3VudHJpZXMgPSAnVVMnO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhbGxvd2VkQ291bnRyaWVzLmluZGV4T2YoSVBHZW9Db2RlKSA9PSAtMSkge1xuICAgICAgICAgICAgJCgnLmFkZHRvd2lzaGxpc3QnKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gYmluZCBhZGR0b3dpc2hsaXN0LCBnaWZ0cmVnaXN0cnksIHNlbmQgdG8gZnJpZW5kIGNsaWNrIGhhbmRsZXJzXG4gICAgLy8gYmluZCBoYW5kbGVycyB0byBBZGR0b0NhcnREaXNhYmxlZCwgQWRkdG9DYXJ0RW5hYmxlZCBldmVudHMgZm9yIGRpc2FibGluZy9lbmFibGluZyB3aXNobGlzdC9naWZ0IHJlZ2lzdHJ5IGxpbmtzXG4gICAgdmFyIGdldE1pc2NMaW5rcyA9IGZ1bmN0aW9uICh0aGlzUHJvZHVjdCkge1xuXG4gICAgICAgIHZhciBkaXNhYmxlbGlua3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoKG1vZGVsLm1hc3RlciB8fCBtb2RlbC52YXJpYW50KSAmJiB0aGlzUHJvZHVjdC5zZWxlY3RlZFZhciA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgLy8gZGlzYWJsZSB3aXNobGlzdC9naWZ0IHJlZ2lzdHJ5IGxpbmtzIGZvciBtYXN0ZXIgcHJvZHVjdHNcbiAgICAgICAgICAgICAgICBqUXVlcnkodGhpc1Byb2R1Y3QuY29udGFpbmVySWQgKyAnIC5hZGR0b3dpc2hsaXN0LCAnICsgdGhpc1Byb2R1Y3QuY29udGFpbmVySWQgKyAnIC5hZGR0b3JlZ2lzdHJ5JykuYWRkQ2xhc3MoJ3Vuc2VsZWN0YWJsZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGRpc2FibGVsaW5rcygpOyAvLyBjYWxsIGl0IGZvciBpbml0aWFsIGRpc3BsYXkgYW5kIHRoZW4gcmVnaXN0ZXIgaXQgd2l0aCBBZGR0b0NhcnREaXNhYmxlZCBldmVudFxuXG4gICAgICAgIGpRdWVyeSh0aGlzUHJvZHVjdCkuYmluZCgnQWRkdG9DYXJ0RGlzYWJsZWQnLCB7fSwgZGlzYWJsZWxpbmtzKTtcblxuICAgICAgICBqUXVlcnkodGhpc1Byb2R1Y3QpLmJpbmQoJ0FkZHRvQ2FydEVuYWJsZWQnLCB7fSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gZW5hYmxlIHdpc2hsaXN0L2dpZnQgcmVnaXN0cnkgbGlua3MgZm9yIHZhcmlhbnQgcHJvZHVjdHNcbiAgICAgICAgICAgIGpRdWVyeSh0aGlzUHJvZHVjdC5jb250YWluZXJJZCArICcgLmFkZHRvd2lzaGxpc3QsICcgKyB0aGlzUHJvZHVjdC5jb250YWluZXJJZCArICcgLmFkZHRvcmVnaXN0cnknKS5yZW1vdmVDbGFzcygndW5zZWxlY3RhYmxlJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGxpc3RlbiBmb3IgYXZhaWxhYmlsaXR5IHJlbG9hZCBldmVudHNcbiAgICAgICAgalF1ZXJ5KHRoaXNQcm9kdWN0KS5iaW5kKCdSZWxvYWRBdmFpbGFiaWxpdHknLCB7fSwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgYXZhaWxhYmlsaXR5IG1lc3NhZ2VcbiAgICAgICAgICAgIHZhciB2YXJpYW50ID0gZS50YXJnZXQuc2VsZWN0ZWRWYXI7XG4gICAgICAgICAgICBzZXRBdmFpbGFiaWxpdHlNc2coY3JlYXRlQXZNZXNzYWdlKGUudGFyZ2V0LCAodmFyaWFudCA9PSBudWxsID8gbW9kZWwuYXZTdGF0dXNRdWFudGl0eSA6IHZhcmlhbnQuYXZTdGF0dXNRdWFudGl0eSkpKTtcbiAgICAgICAgICAgIGpRdWVyeShlLnRhcmdldCkudHJpZ2dlcignQWRkdG9DYXJ0RW5hYmxlZCcpO1xuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEFkZCB0byB3aXNobGlzdCwgQWRkIHRvIGdpZnQgcmVnaXN0cnkgY2xpY2sgaGFuZGxlclxuXG4gICAgICAgIGpRdWVyeSh0aGlzUHJvZHVjdC5jb250YWluZXJJZCArICcgLmFkZHRvd2lzaGxpc3QgYS5hdXRoJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gYXBwZW5kIHRoZSBjdXJyZW50bHkgc2VsZWN0aWVkIG9wdGlvbnMgdG8gdGhlIHVybFxuXG4gICAgICAgICAgICAvLyBjcmVhdGUgYSBsb2NhbCBjb3B5IG9mIHRoZSBzZWxlY3RlZCBvcHRpb25zXG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRPcHRpb25zID0galF1ZXJ5LmV4dGVuZCh7fSwge30sIHRoaXNQcm9kdWN0LnNlbGVjdGVkT3B0aW9ucyk7XG5cbiAgICAgICAgICAgIGlmIChtb2RlbC5tYXN0ZXIgfHwgbW9kZWwudmFyaWFudCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzUHJvZHVjdC5zZWxlY3RlZFZhciAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkT3B0aW9ucy5waWQgPSB0aGlzUHJvZHVjdC5zZWxlY3RlZFZhci5pZDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7IC8vIGRvIG5vdCBhbGxvdyBtYXN0ZXIgcHJvZHVjdCB0byBiZSBhZGRlZCB0byBnaWZ0IHJlZ2lzdHJ5L3dpc2hsaXN0XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZE9wdGlvbnMucGlkID0gdGhpc1Byb2R1Y3QucGlkO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgdGVtcFVybCA9IHRoaXMuaHJlZjtcblxuICAgICAgICAgICAgaWYgKCEodGVtcFVybC5pbmRleE9mKCc/JykgPiAwKSkge1xuICAgICAgICAgICAgICAgIHRlbXBVcmwgPSB0ZW1wVXJsICsgJz8nO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0ZW1wVXJsID0gdGVtcFVybCArICcmJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHNlcmlhbGl6ZSB0aGUgbmFtZS92YWx1ZSBpbnRvIHVybCBxdWVyeSBzdHJpbmcgYW5kIGFwcGVuZCBpdCB0byB0aGUgdXJsLCBtYWtlIHJlcXVlc3RcbiAgICAgICAgICAgIHZhciB1cmwgPSB0ZW1wVXJsICsgalF1ZXJ5LnBhcmFtKHNlbGVjdGVkT3B0aW9ucyk7XG4gICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdHRVQnLFxuICAgICAgICAgICAgICAgIHVybDogdXJsLFxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnaHRtbCcsXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBqUXVlcnkoJyNwZHBNYWluIC5hZGR0b3dpc2hsaXN0IC5hZGR0b3dpc2gtdG9vbHRpcCcpLmZhZGVJbig0MDApLmRlbGF5KDE1MDApLmZhZGVPdXQoNDAwKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGZhaWx1cmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQoJyR7UmVzb3VyY2UubXNnKFxcJ2dsb2JhbC5zZXJ2ZXJjb25uZWN0aW9uXFwnLFxcJ2xvY2FsZVxcJyxudWxsKX0nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICQoJy51aS1kaWFsb2ctdGl0bGViYXItY2xvc2UnKS50cmlnZ2VyKCdjbGljaycpO1xuICAgICAgICAgICAgfSwgMTUwMCk7XG4gICAgICAgICAgICAvL3dpbmRvdy5sb2NhdGlvbiA9IHRlbXBVcmwgKyBqUXVlcnkucGFyYW0oc2VsZWN0ZWRPcHRpb25zKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQWRkIHRvIHdpc2hsaXN0LCBBZGQgdG8gZ2lmdCByZWdpc3RyeSBjbGljayBoYW5kbGVyXG4gICAgICAgIGpRdWVyeSh0aGlzUHJvZHVjdC5jb250YWluZXJJZCArICcgLmFkZHRvd2lzaGxpc3QgYS5ub24tYXV0aCwgJyArIHRoaXNQcm9kdWN0LmNvbnRhaW5lcklkICsgJyAuYWRkdG9yZWdpc3RyeSBhJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gYXBwZW5kIHRoZSBjdXJyZW50bHkgc2VsZWN0aWVkIG9wdGlvbnMgdG8gdGhlIHVybFxuXG4gICAgICAgICAgICAvLyBjcmVhdGUgYSBsb2NhbCBjb3B5IG9mIHRoZSBzZWxlY3RlZCBvcHRpb25zXG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRPcHRpb25zID0galF1ZXJ5LmV4dGVuZCh7fSwge30sIHRoaXNQcm9kdWN0LnNlbGVjdGVkT3B0aW9ucyk7XG5cbiAgICAgICAgICAgIGlmIChtb2RlbC5tYXN0ZXIgfHwgbW9kZWwudmFyaWFudCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzUHJvZHVjdC5zZWxlY3RlZFZhciAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkT3B0aW9ucy5waWQgPSB0aGlzUHJvZHVjdC5zZWxlY3RlZFZhci5pZDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7IC8vIGRvIG5vdCBhbGxvdyBtYXN0ZXIgcHJvZHVjdCB0byBiZSBhZGRlZCB0byBnaWZ0IHJlZ2lzdHJ5L3dpc2hsaXN0XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZE9wdGlvbnMucGlkID0gdGhpc1Byb2R1Y3QucGlkO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgdGVtcFVybCA9IHRoaXMuaHJlZjtcblxuICAgICAgICAgICAgaWYgKCEodGVtcFVybC5pbmRleE9mKCc/JykgPiAwKSkge1xuICAgICAgICAgICAgICAgIHRlbXBVcmwgPSB0ZW1wVXJsICsgJz8nO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0ZW1wVXJsID0gdGVtcFVybCArICcmJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHNlcmlhbGl6ZSB0aGUgbmFtZS92YWx1ZSBpbnRvIHVybCBxdWVyeSBzdHJpbmcgYW5kIGFwcGVuZCBpdCB0byB0aGUgdXJsLCBtYWtlIHJlcXVlc3RcbiAgICAgICAgICAgIC8vdmFyIHVybCA9IHRlbXBVcmwgKyBqUXVlcnkucGFyYW0oc2VsZWN0ZWRPcHRpb25zKTtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9IHRlbXBVcmwgKyBqUXVlcnkucGFyYW0oc2VsZWN0ZWRPcHRpb25zKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgalF1ZXJ5KHRoaXNQcm9kdWN0LmNvbnRhaW5lcklkICsgJyAuc2VuZHRvZnJpZW5kJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gY3JlYXRlIGEgbG9jYWwgY29weSBvZiB0aGUgc2VsZWN0ZWQgb3B0aW9uc1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkT3B0aW9ucyA9IGpRdWVyeS5leHRlbmQoe30sIHt9LCB0aGlzUHJvZHVjdC5zZWxlY3RlZE9wdGlvbnMpO1xuXG4gICAgICAgICAgICBpZiAoKG1vZGVsLm1hc3RlciB8fCBtb2RlbC52YXJpYW50KSAmJiB0aGlzUHJvZHVjdC5zZWxlY3RlZFZhciAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRPcHRpb25zLnBpZCA9IHRoaXNQcm9kdWN0LnNlbGVjdGVkVmFyLmlkO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZE9wdGlvbnMucGlkID0gdGhpc1Byb2R1Y3QucGlkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHRlbXBVUkwgPSBVcmxzLnNlbmRUb0ZyaWVuZCArICc/JyArIGpRdWVyeS5wYXJhbShzZWxlY3RlZE9wdGlvbnMpO1xuICAgICAgICAgICAgZGlhbG9nLm9wZW4odGVtcFVSTCwgUmVzb3VyY2VzLlNFTkRfVE9fRlJJRU5EKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8vIGJpbmRzIHByb2R1Y3QgcmV2aWV3cyBjbGljayBoYW5kbGVyc1xuICAgIC8vIHJlYWQgcmV2aWV3IGxpbmsgb3BlbnMgcmV2aWV3cyB0YWJcbiAgICB2YXIgZ2V0UmF0aW5nU2VjdGlvbiA9IGZ1bmN0aW9uIChjb250YWluZXJJZCkge1xuXG4gICAgICAgIGpRdWVyeShjb250YWluZXJJZCArICcgI3BkcFJlYWRSZXZpZXcnKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBqUXVlcnkoY29udGFpbmVySWQgKyAnICN0YWJzJykudGFicygnc2VsZWN0JywgJ3BkcFJldmlld3NUYWInKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgalF1ZXJ5KGNvbnRhaW5lcklkICsgJyAjcGRwV3JpdGVSZXZpZXcnKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvLyBiYXNlZCBvbiBhdmFpbGFiaWxpdHkgc3RhdHVzLCBjcmVhdGVzIGEgbWVzc2FnZVxuICAgIC8vIHBhcmFtIHZhbCAtIHRoZSBzdG9jayB2YWx1ZSB0byBjb21wYXJlIGkuZS4gcXR5IGVudGVyZWQgYnkgdXNlclxuICAgIHZhciBjcmVhdGVBdk1lc3NhZ2UgPSBmdW5jdGlvbiAodGhpc1Byb2R1Y3QsIHZhbCkge1xuXG4gICAgICAgIHZhciBhdlN0YXR1cyA9IHRoaXNQcm9kdWN0LmdldEF2U3RhdHVzKCk7IC8vIGF2YWlsYWJpbGl0eSBzdGF0dXNcbiAgICAgICAgdmFyIGF2TWVzc2FnZSA9IFJlc291cmNlc1thdlN0YXR1c107XG4gICAgICAgIHZhciBhdHMgPSB0aGlzUHJvZHVjdC5nZXRBVFMoKTsgLy8gZ2V0IGF2YWlsYWJsZSB0byBzZWxsIHF0eVxuICAgICAgICB2YXIgYXZMZXZlbHMgPSB0aGlzUHJvZHVjdC5nZXRBdkxldmVscygpO1xuICAgICAgICB2YXIgbm9uQ2xvc2VvdXRMb3dRdHlUaHJlc2hvbGQgPSB0aGlzUHJvZHVjdC5nZXROb25DbG9zZW91dExvd1F0eVRocmVzaG9sZCgpO1xuXG4gICAgICAgIC8vIGdldCBhdHMgbGV2ZWxzIHBlci1zdGF0dXNcbiAgICAgICAgdmFyIGluU3RvY2tMZXZlbCA9IGF2TGV2ZWxzW0NvbnN0YW50cy5BVkFJTF9TVEFUVVNfSU5fU1RPQ0tdO1xuICAgICAgICB2YXIgYmFja09yZGVyTGV2ZWwgPSBhdkxldmVsc1tDb25zdGFudHMuQVZBSUxfU1RBVFVTX0JBQ0tPUkRFUl07XG4gICAgICAgIHZhciBwcmVPcmRlckxldmVsID0gYXZMZXZlbHNbQ29uc3RhbnRzLkFWQUlMX1NUQVRVU19QUkVPUkRFUl07XG4gICAgICAgIC8vdmFyIG5vdEF2YWlsTGV2ZWwgPSBhdkxldmVsc1tDb25zdGFudHMuQVZBSUxfU1RBVFVTX05PVF9BVkFJTEFCTEVdO1xuXG4gICAgICAgIGlmIChhdlN0YXR1cyA9PT0gQ29uc3RhbnRzLkFWQUlMX1NUQVRVU19JTl9TVE9DSykge1xuICAgICAgICAgICAgYXZNZXNzYWdlID0gJzxzcGFuIGNsYXNzPVxcJ2luLXN0b2NrXFwnPicgKyBhdk1lc3NhZ2UgKyAnPC9zcGFuPic7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGF2U3RhdHVzID09PSAnTk9UX0FWQUlMQUJMRScpIHtcbiAgICAgICAgICAgIGF2TWVzc2FnZSA9ICc8c3BhbiBjbGFzcz1cXCdvdXQtb2Ytc3RvY2tcXCc+JyArIGF2TWVzc2FnZSArICc8L3NwYW4+JztcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXZTdGF0dXMgPT09IENvbnN0YW50cy5BVkFJTF9TVEFUVVNfQkFDS09SREVSIHx8XG4gICAgICAgICAgICBhdlN0YXR1cyA9PT0gQ29uc3RhbnRzLkFWQUlMX1NUQVRVU19QUkVPUkRFUikge1xuICAgICAgICAgICAgaWYgKHZhbCA+IGF0cyAmJiBhdHMgPiAwKSB7XG4gICAgICAgICAgICAgICAgYXZNZXNzYWdlID0gYXZNZXNzYWdlICsgJzxzcGFuIGNsYXNzPVxcJ2luLXN0b2NrXFwnPicgKyAkLnZhbGlkYXRvci5mb3JtYXQoUmVzb3VyY2VzWydRVFlfJyArIGF2U3RhdHVzXSwgYXRzKSArICc8L3NwYW4+JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGRpc3BsYXkgYmFja29yZGVyL3ByZW9yZGVyIGF2YWlsYWJpbGl0eVxuICAgICAgICAgICAgYXZNZXNzYWdlID0gYXZNZXNzYWdlICsgZ2V0SW5TdG9ja0RhdGVNc2codGhpc1Byb2R1Y3QpO1xuICAgICAgICB9IGVsc2UgaWYgKHZhbCA+IGluU3RvY2tMZXZlbCAmJiBhdlN0YXR1cyAhPT0gQ29uc3RhbnRzLkFWQUlMX1NUQVRVU19OT1RfQVZBSUxBQkxFKSB7XG5cbiAgICAgICAgICAgIGF2TWVzc2FnZSA9ICcnO1xuICAgICAgICAgICAgaWYgKGluU3RvY2tMZXZlbCA+IDApIHtcbiAgICAgICAgICAgICAgICBhdk1lc3NhZ2UgPSBhdk1lc3NhZ2UgKyAnPHNwYW4gY2xhc3M9XFwnaW4tc3RvY2tcXCc+JyArICQudmFsaWRhdG9yLmZvcm1hdChSZXNvdXJjZXNbJ1FUWV8nICsgQ29uc3RhbnRzLkFWQUlMX1NUQVRVU19JTl9TVE9DS10sIGluU3RvY2tMZXZlbCkgKyAnPC9zcGFuPic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYmFja09yZGVyTGV2ZWwgPiAwKSB7XG4gICAgICAgICAgICAgICAgYXZNZXNzYWdlID0gYXZNZXNzYWdlICsgJC52YWxpZGF0b3IuZm9ybWF0KFJlc291cmNlc1snUVRZXycgKyBDb25zdGFudHMuQVZBSUxfU1RBVFVTX0JBQ0tPUkRFUl0sIGJhY2tPcmRlckxldmVsKTtcbiAgICAgICAgICAgICAgICAvLyB1bmNvbW1lbnQgdGhlIGZvbGxvd2luZyBsaW5lIHRvIGRpc3BsYXkgYXZhaWxhYmlsaXR5IG1lc3NhZ2Ugd2l0aCBiYWNrIG9yZGVyIGluZm9ybWF0aW9uXG4gICAgICAgICAgICAgICAgLy8gYXZNZXNzYWdlID0gYXZNZXNzYWdlICsgZ2V0SW5TdG9ja0RhdGVNc2codGhpc1Byb2R1Y3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHByZU9yZGVyTGV2ZWwgPiAwKSB7XG4gICAgICAgICAgICAgICAgYXZNZXNzYWdlID0gYXZNZXNzYWdlICsgJC52YWxpZGF0b3IuZm9ybWF0KFJlc291cmNlc1snUVRZXycgKyBDb25zdGFudHMuQVZBSUxfU1RBVFVTX1BSRU9SREVSXSwgcHJlT3JkZXJMZXZlbCk7XG4gICAgICAgICAgICAgICAgLy8gdW5jb21tZW50IHRoZSBmb2xsb3dpbmcgbGluZSB0byBkaXNwbGF5IGF2YWlsYWJpbGl0eSBtZXNzYWdlIHdpdGggYmFjayBvcmRlciBpbmZvcm1hdGlvblxuICAgICAgICAgICAgICAgIC8vIGF2TWVzc2FnZSA9IGF2TWVzc2FnZSArIGdldEluU3RvY2tEYXRlTXNnKHRoaXNQcm9kdWN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChhdHMgIT09IDAgJiYgYXRzIDw9IG5vbkNsb3Nlb3V0TG93UXR5VGhyZXNob2xkKSB7XG4gICAgICAgICAgICBhdk1lc3NhZ2UgPSAnPHNwYW4gY2xhc3M9XFwnbG93XFwnPicgKyAkLnZhbGlkYXRvci5mb3JtYXQoUmVzb3VyY2VzLkxPVywgbm9uQ2xvc2VvdXRMb3dRdHlUaHJlc2hvbGQpICsgJzwvc3Bhbj4nO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzdGFuZGFyZFByaWNlID0gdGhpc1Byb2R1Y3Quc2VsZWN0ZWRWYXIgIT0gbnVsbCA/IE51bWJlcih0aGlzUHJvZHVjdC5zZWxlY3RlZFZhci5wcmljaW5nLnN0YW5kYXJkIHx8IDApIDogTnVtYmVyKG1vZGVsLnByaWNpbmcuc3RhbmRhcmQgfHwgMCk7XG5cbiAgICAgICAgdmFyIHNhbGVQcmljZSA9IE51bWJlcihjb21wdXRlUHJpY2UodGhpc1Byb2R1Y3QpIHx8IDApO1xuXG4gICAgICAgIGlmIChzdGFuZGFyZFByaWNlID09PSAwICYmIHNhbGVQcmljZSA9PT0gMCkge1xuICAgICAgICAgICAgaWYgKHRoaXNQcm9kdWN0LnNlbGVjdGVkVmFyICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpc1Byb2R1Y3Quc2VsZWN0ZWRWYXIuZWFybHlCaXJkTWVzc2FnZSAhPSAnJykge1xuICAgICAgICAgICAgICAgICAgICBhdk1lc3NhZ2UgPSAnPHNwYW4gY2xhc3M9XFwnY29taW5nLXNvb25cXCc+JyArIHRoaXNQcm9kdWN0LnNlbGVjdGVkVmFyLmVhcmx5QmlyZE1lc3NhZ2UgKyAnPC9zcGFuPic7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYXZNZXNzYWdlID0gJyc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoJCgnLmVibS1zdGQtcHJvZCcpLmxlbmd0aCA+IDAgJiYgJC50cmltKCQoJy5lYm0tc3RkLXByb2QnKS50ZXh0KCkpICE9ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGF2TWVzc2FnZSA9ICc8c3BhbiBjbGFzcz1cXCdjb21pbmctc29vblxcJz4nICsgJCgnLmVibS1zdGQtcHJvZCcpLnRleHQoKSArICc8L3NwYW4+JztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhdk1lc3NhZ2UgPSAnJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGF2TWVzc2FnZTtcbiAgICB9O1xuXG4gICAgLy8gaGVscGVyIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgaW4tc3RvY2sgZGF0ZVxuICAgIHZhciBnZXRJblN0b2NrRGF0ZU1zZyA9IGZ1bmN0aW9uIChwcm9kdWN0KSB7XG4gICAgICAgIHZhciBtc2cgPSAnJztcbiAgICAgICAgaWYgKHByb2R1Y3QuZ2V0SW5TdG9ja0RhdGUoKSAmJiBwcm9kdWN0LmdldEluU3RvY2tEYXRlKCkgIT0gJ251bGwnKSB7XG4gICAgICAgICAgICBtc2cgPSAkLnZhbGlkYXRvci5mb3JtYXQoUmVzb3VyY2VzLklOX1NUT0NLX0RBVEUsIChuZXcgRGF0ZShwcm9kdWN0LmdldEluU3RvY2tEYXRlKCkpKS50b0RhdGVTdHJpbmcoKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1zZztcbiAgICB9O1xuXG4gICAgLy8gaGVscGVyIGZ1bmN0aW9uIHRvIHNldCBhdmFpbGFiaWxpdHkgbWVzc2FnZVxuICAgIHZhciBzZXRBdmFpbGFiaWxpdHlNc2cgPSBmdW5jdGlvbiAobXNnKSB7XG4gICAgICAgIGpRdWVyeShteUNvbnRhaW5lcklkICsgJyAuYXZhaWxhYmlsaXR5Omxhc3QgLnZhbHVlJykuaHRtbChtc2cpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBQcml2YXRlLiBDb21wdXRlcyBwcmljZSBvZiBhIGdpdmVuIHByb2R1Y3QgaW5zdGFuY2UgYmFzZWQgb24gdGhlIHNlbGVjdGVkIG9wdGlvbnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdGhpc1Byb2R1Y3QgLSB0aGUgcHJvZHVjdCBpbnN0YW5jZVxuICAgICAqIEByZXR1cm4gcHJpY2Ugb2YgdGhlIHByb2R1Y3QgdG8gMiBkZWNpbWFsIHBvaW50cy5cbiAgICAgKi9cbiAgICB2YXIgY29tcHV0ZVByaWNlID0gZnVuY3Rpb24gKHRoaXNQcm9kdWN0KSB7XG5cbiAgICAgICAgdmFyIHByaWNlID0gdGhpc1Byb2R1Y3Quc2VsZWN0ZWRWYXIgIT0gbnVsbCA/IHRoaXNQcm9kdWN0LnNlbGVjdGVkVmFyLnByaWNpbmcuc2FsZSA6IG1vZGVsLnByaWNpbmcuc2FsZTtcbiAgICAgICAgLy8gY2FsY3VsYXRlIHByaWNlIGJhc2VkIG9uIHRoZSBzZWxlY3RlZCBvcHRpb25zIHByaWNlc1xuICAgICAgICBqUXVlcnkuZWFjaCh0aGlzUHJvZHVjdC5zZWxlY3RlZFByaWNlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBwcmljZSA9IChuZXcgTnVtYmVyKHByaWNlKSArIG5ldyBOdW1iZXIodGhpcykpLnRvRml4ZWQoMik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBwcmljZTtcbiAgICB9O1xuICAgIC8vIExvYWQgdGhlIHlvdXR1YmUgdmlkZW9zIG9ubHkgb24gZGVtYW5kXG4gICAgLy8gd2hlbiB0aGUgdXNlciBjbGlja3Mgb24gdGhlIHZpZGVvcyB0YWIsIHRoZW4gdGhlIHlvdXR1YmUgdmlkZW9zIHdpbGwgYmUgZmV0Y2hlZCBkeW5hbWljYWxseVxuICAgIC8vIGFuZCBsb2FkcyB0aGUgY29udGVudCBpbiB0aGUgcGRwVmlkZW9UYWIgZGl2LlxuICAgIGpRdWVyeSgnLnZpZGVvVGFiJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnbG9hZGVkJykpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdsb2FkZWQnKTtcbiAgICAgICAgdmFyIHRhcmdldCA9ICQoJyNwZHBWaWRlb1RhYicpO1xuICAgICAgICB2YXIgdXJsID0gJCgnI3Byb2R1Y3RVUkwnKS52YWwoKTtcbiAgICAgICAgYWpheC5sb2FkKHtcbiAgICAgICAgICAgIHVybDogdXJsLFxuICAgICAgICAgICAgZGF0YVR5cGU6ICdodG1sJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIHRhcmdldC5odG1sKGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICAvLyBiaW5kIGNsaWNrIGhhbmRsZXJzIGZvciBwcmV2L25leHQgYnV0dG9ucyBvbiBwZHAgZnJvbSBzZWFyY2hcbiAgICB2YXIgZ2V0TmF2TGlua3MgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgLy8gTk9URTogIFdFIENPTU1FTlQgVEhJUyBPVVQgQkVDQVVTRSBQT1dFUiBSRVZJRVdTIFJFTkRFUklORyBMSUJSQVJZIERPRVMgTk9UXG4gICAgICAgIC8vIFdPUksgSU4gU09NRSBCUk9XU0VSUyBXSEVOIEEgUFJPRFVDVCBERVRBSUwgUEFHRSBJUyBQQVJUSUFMTFkgUkVMT0FERUQgVVNJTkcgQUpBWC5cbiAgICAgICAgLy8gSUYgV0UgRE8gTk9UIEJJTkQgRVZFTlRTLCBUSEVOIFRIRSBQUkVWL05FWFQgQU5DSE9SUyBKVVNUIFdPUksgQVMgU1RBTkRBUkRcbiAgICAgICAgLy8gSFlQRVJMSU5LUyBBTkQgUE9XRVJSRVZJRVdTIFdPUktTIEZJTkUuXG5cbiAgICAgICAgLy8gYmluZCBldmVudHNcbiAgICAgICAgLy9qUXVlcnkoXCIucHJvZHVjdG5hdmlnYXRpb24gYVwiKS5jbGljayhmdW5jdGlvbihlKSB7XG4gICAgICAgIC8vXHRhcHAuZ2V0UHJvZHVjdCh7dXJsOiB0aGlzLmhyZWYsIHNvdXJjZTogXCJzZWFyY2hcIn0pO1xuICAgICAgICAvL1x0cmV0dXJuIGZhbHNlO1xuICAgICAgICAvL30pO1xuICAgIH07XG5cbiAgICAvLyBzaXplIGNoYXJ0IGxpbmsgY2xpY2sgYmluZGluZ1xuICAgIHZhciBnZXRTaXplQ2hhcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGpRdWVyeSgnLmF0dHJpYnV0ZWNvbnRlbnRsaW5rJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gYWRkIHNpemUgY2hhcnQgZGlhbG9nIGNvbnRhaW5lciBkaXYgaWYgaXRzIG5vdCBhZGRlZCB5ZXRcbiAgICAgICAgICAgIC8vIG9ubHkgYWRkZWQgb25jZVxuICAgICAgICAgICAgaWYgKGpRdWVyeSgnI3NpemVDaGFydERpYWxvZycpLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgalF1ZXJ5KCc8ZGl2Lz4nKS5hdHRyKCdpZCcsICdzaXplQ2hhcnREaWFsb2cnKS5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHNpemVDaGFydERpYWxvZyA9IGRpYWxvZy5jcmVhdGUoe1xuICAgICAgICAgICAgICAgIGlkOiAnc2l6ZUNoYXJ0RGlhbG9nJywgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDUzMCxcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDgwMCxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFJlc291cmNlcy5TSVpFQ0hBUlRfVElUTEVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgc2l6ZUNoYXJ0RGlhbG9nLmRpYWxvZygnb3BlbicpO1xuXG4gICAgICAgICAgICAvLyBtYWtlIHRoZSBzZXJ2ZXIgY2FsbCB0byBsb2FkIHRoZSBzaXplIGNoYXJ0IGh0bWxcbiAgICAgICAgICAgICQoJyNzaXplQ2hhcnREaWFsb2cnKS5sb2FkKHRoaXMuaHJlZik7XG5cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJCgnLnByb2R1Y3Qtc3BlY2lmaWNhdGlvbnMnKS5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKCcucHJvZHVjdC1zcGVjaWZpY2F0aW9ucycpLmxvYWQoalF1ZXJ5KCcuYXR0cmlidXRlY29udGVudGxpbmsnKS5hdHRyKCdocmVmJykpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8vIGJ1aWxkIHRoZSB0b29sdGlwIHN0cmluZyBmb3Igbm9uIHNlbGVjdGVkIHZhcmlhdGlvbnNcbiAgICB2YXIgZ2V0Tm9uU2VsZWN0ZWRUb29sdGlwID0gZnVuY3Rpb24gKG5vblNlbGVjdGVkVmFycykge1xuICAgICAgICB2YXIgdG9vbHRpcFN0ciA9ICcnO1xuICAgICAgICB2YXIgbnNMZW4gPSBub25TZWxlY3RlZFZhcnMubGVuZ3RoO1xuICAgICAgICBpZiAobnNMZW4gPT0gMSB8fCBuc0xlbiA9PSAyKSB7XG4gICAgICAgICAgICB0b29sdGlwU3RyID0gbm9uU2VsZWN0ZWRWYXJzLmpvaW4oJyAmICcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuc0xlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGkgPT0gbnNMZW4gLSAyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvb2x0aXBTdHIgKz0gbm9uU2VsZWN0ZWRWYXJzW2ldICsgJyAmICcgKyBub25TZWxlY3RlZFZhcnNbaSArIDFdO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0b29sdGlwU3RyICs9IG5vblNlbGVjdGVkVmFyc1tpXSArICcsICc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRvb2x0aXBTdHI7XG4gICAgfTtcblxuICAgIC8vIFByb2R1Y3QgaW5zdGFuY2VcbiAgICByZXR1cm4ge1xuICAgICAgICBwaWQ6IG1vZGVsLklELFxuICAgICAgICBuYW1lOiBtb2RlbC5uYW1lLFxuICAgICAgICB2YXJpYW50OiBtb2RlbC52YXJpYW50LFxuICAgICAgICBtYXN0ZXI6IG1vZGVsLm1hc3RlcixcbiAgICAgICAgYnVuZGxlZDogbW9kZWwuYnVuZGxlZCxcbiAgICAgICAgc2VsZWN0ZWRWYXJBdHRyaWJzOiB7fSwgLy8gb2JqZWN0IGNvbnRhaW5pbmcgdmFyaWF0aW9uIGF0dHJpYnV0ZXMgdmFsdWVzIGFzIG5hbWUgdmFsdWUgZS5nLiB7Y29sb3I6IFwiYmx1ZVwiLCBzaXplOiBcIjNcIiwgd2lkdGg6IFwiXCJ9XG4gICAgICAgIHNlbGVjdGVkVmFyOiBudWxsLCAvLyBjdXJyZW50bHkgc2VsZWN0ZWQgdmFyaWFudFxuICAgICAgICBzZWxlY3RlZE9wdGlvbnM6IHt9LCAvLyBob2xkcyBjdXJyZW50bHkgc2VsZWN0ZWQgb3B0aW9ucyBvYmplY3Qge29wdGlvbk5hbWUsIHNlbGVjdGVkIHZhbH1cbiAgICAgICAgc2VsZWN0ZWRQcmljZToge30sIC8vIGhvbGRzIHByaWNlcyBmb3Igc2VsZWN0ZWQgb3B0aW9ucyBhcyB7d2FycmFudHk6IFwiXCJ9XG4gICAgICAgIGNvbnRhaW5lcklkOiBudWxsLCAvLyBob2xkcyB0aGUgaHRtbCBjb250YWluZXIgaWQgb2YgdGhpcyBwcm9kdWN0XG4gICAgICAgIHN1YlByb2R1Y3RzOiBbXSwgLy8gYXJyYXkgdG8ga2VlcCBzdWIgcHJvZHVjdHMgaW5zdGFuY2VzXG4gICAgICAgIGJvbnVzUHJvZHVjdDogZmFsc2UsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVuYWJsZSBBZGQgdG8gQ2FydCBCdXR0b24uXG4gICAgICAgICAqL1xuICAgICAgICBlbmFibGVBMkNCdXR0b246IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGpRdWVyeSh0aGlzLmNvbnRhaW5lcklkICsgJyAuYWRkdG9jYXJ0IGlucHV0LCAnICsgdGhpcy5jb250YWluZXJJZCArICcgLmFkZHRvY2FydGJ1dHRvbjpsYXN0JykucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XG4gICAgICAgICAgICBqUXVlcnkodGhpcy5jb250YWluZXJJZCArICcgLmFkZHRvY2FydGJ1dHRvbjpsYXN0LCAnICsgdGhpcy5jb250YWluZXJJZCArICcgLmFkZHRvY2FydCcpLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xuXG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERpc2FibGUgQWRkIHRvIENhcnQgQnV0dG9uLlxuICAgICAgICAgKi9cbiAgICAgICAgZGlzYWJsZUEyQ0J1dHRvbjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgalF1ZXJ5KHRoaXMuY29udGFpbmVySWQgKyAnIC5hZGR0b2NhcnQgaW5wdXQsICcgKyB0aGlzLmNvbnRhaW5lcklkICsgJyAuYWRkdG9jYXJ0YnV0dG9uOmxhc3QnKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgICAgICAgalF1ZXJ5KHRoaXMuY29udGFpbmVySWQgKyAnIC5hZGR0b2NhcnRidXR0b246bGFzdCwgJyArIHRoaXMuY29udGFpbmVySWQgKyAnIC5hZGR0b2NhcnQnKS5hZGRDbGFzcygnZGlzYWJsZWQnKTtcblxuICAgICAgICB9LFxuXG4gICAgICAgIHJlbW92ZUEyQ0J1dHRvbjogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBqUXVlcnkoJy5hZGR0b2NhcnQnKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICAgICAgICAgalF1ZXJ5KCcucHJvZHVjdGluZm8gLnByaWNlJykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcbiAgICAgICAgICAgIGlmIChQcm9kdWN0Q2FjaGUubWFzdGVyKSB7XG4gICAgICAgICAgICAgICAgalF1ZXJ5KCcucHJvZHVjdGluZm8gLnByb2R1Y3RpZCcpLmNzcygnZGlzcGxheScsICdub25lJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvL2pRdWVyeSh0aGlzLmNvbnRhaW5lcklkK1wiIC52YXJpYXRpb25hdHRyaWJ1dGVzXCIpLmNzcygnZGlzcGxheScsJ25vbmUnKTtcbiAgICAgICAgfSxcbiAgICAgICAgLy8gc2hvdyBhdmFpbGFiaWxpdHlcbiAgICAgICAgc2hvd0F2YWlsYWJpbGl0eTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgalF1ZXJ5KHRoaXMuY29udGFpbmVySWQgKyAnIC5hdmFpbGFiaWxpdHknKS5zaG93KCk7XG4gICAgICAgIH0sXG4gICAgICAgIC8vIGhpZGUgYXZhaWxhYmlsaXR5XG4gICAgICAgIGhpZGVBdmFpbGFiaWxpdHk6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGpRdWVyeSh0aGlzLmNvbnRhaW5lcklkICsgJyAuYXZhaWxhYmlsaXR5JykuaGlkZSgpO1xuICAgICAgICB9LFxuICAgICAgICAvLyBzaG93IHNlbGVjdGVkIGl0ZW0gI1xuICAgICAgICBzaG93SXRlbU5vOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBqUXVlcnkodGhpcy5jb250YWluZXJJZCArICcgLnByb2R1Y3RpZCAudmFsdWUnKS5odG1sKHRoaXMuc2VsZWN0ZWRWYXIuaWQpO1xuICAgICAgICB9LFxuICAgICAgICAvLyByZW1vdmVzICBpdGVtICNcbiAgICAgICAgcmVtb3ZlSXRlbU5vOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBqUXVlcnkodGhpcy5jb250YWluZXJJZCArICcgLnByb2R1Y3RpZCAudmFsdWUnKS5lbXB0eSgpO1xuICAgICAgICB9LFxuICAgICAgICByZXZlcnRQcmljZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyICRwcmljZSA9IGpRdWVyeSh0aGlzLmNvbnRhaW5lcklkICsgJyAucHJvZHVjdGluZm8gLnByaWNlOmZpcnN0Jyk7XG4gICAgICAgICAgICBpZiAoISRwcmljZS5kYXRhKCdvcmlnaW5hbFByaWNlJykpIHtcbiAgICAgICAgICAgICAgICAkcHJpY2UuZGF0YSgnb3JpZ2luYWxQcmljZScsICRwcmljZS5odG1sKCkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkcHJpY2UuaHRtbCgkcHJpY2UuZGF0YSgnb3JpZ2luYWxQcmljZScpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgLy8gZGV0ZXJtaW5lIGlmIHRoaXMgcHJvZHVjdCBpcyBwYXJ0IG9mIGEgYnVuZGxlL3Byb2R1Y3Qgc2V0IFZJRVdcbiAgICAgICAgc2V0Qm9udXNQcm9kdWN0OiBmdW5jdGlvbiAoYm9udXNQcm9kdWN0KSB7XG4gICAgICAgICAgICB0aGlzLmJvbnVzUHJvZHVjdCA9IGJvbnVzUHJvZHVjdDtcbiAgICAgICAgfSxcblxuICAgICAgICAvLyBkZXRlcm1pbmUgaWYgdGhpcyBwcm9kdWN0IGlzIHBhcnQgb2YgYSBidW5kbGUvcHJvZHVjdCBzZXQgVklFV1xuICAgICAgICBpc0JvbnVzUHJvZHVjdDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYm9udXNQcm9kdWN0O1xuICAgICAgICB9LFxuXG4gICAgICAgIC8vIGRldGVybWluZSBpZiB0aGlzIHByb2R1Y3QgaXMgcGFydCBvZiBhIGJ1bmRsZS9wcm9kdWN0IHNldCBWSUVXXG4gICAgICAgIGlzU3ViUHJvZHVjdDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIChtb2RlbC5idW5kbGVkIHx8IG1vZGVsLnByb2R1Y3RTZXRQcm9kdWN0KTtcbiAgICAgICAgfSxcblxuICAgICAgICAvLyBzaG93IHRoZSBzZWxlY3RlZCB2YXJpYXRpb24gYXR0cmlidXRlIHZhbHVlIG5leHQgdG8gdGhlIGF0dHJpYnV0ZSBsYWJlbCBlLmcuIENvbG9yOiBCZWlnZVxuICAgICAgICBzaG93U2VsZWN0ZWRWYXJBdHRyVmFsOiBmdW5jdGlvbiAodmFySWQsIHZhbCkge1xuICAgICAgICAgICAgalF1ZXJ5KHRoaXMuY29udGFpbmVySWQgKyAnIC52YXJpYXRpb25hdHRyaWJ1dGVzIGRpdjpub3QoLmNsZWFyKScpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBpZCA9IGpRdWVyeSh0aGlzKS5kYXRhKCdkYXRhJyk7XG5cbiAgICAgICAgICAgICAgICBpZiAodmFySWQgPT09IGlkKSB7XG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzKS5maW5kKCdzcGFuLnNlbGVjdGVkdmFydmFsJykuaHRtbCh2YWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8vIHNlbGVjdHMgcmV2aWV3IHRhYlxuICAgICAgICByZWFkUmV2aWV3czogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgalF1ZXJ5KHRoaXMuY29udGFpbmVySWQgKyAnICN0YWJzJykudGFicygnc2VsZWN0JywgJ3BkcFJldmlld3NUYWInKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvLyBzaG93cyBwcm9kdWN0IGltYWdlcyBhbmQgdGh1bWJuYWlsc1xuICAgICAgICAvLyBAcGFyYW0gc2VsZWN0ZWRWYWwgLSBjdXJyZW50bHkgc2VsZWN0ZWQgdmFyaWF0aW9uIGF0dHIgdmFsXG4gICAgICAgIC8vIEBwYXJhbSB2YWxzIC0gdG90YWwgYXZhaWxhYmxlIHZhcmlhdGlvbiBhdHRyIHZhbHVlc1xuICAgICAgICBzaG93SW1hZ2VzOiBmdW5jdGlvbiAoc2VsZWN0ZWRWYWwsIHZhbHMpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHZhbHMgPSB2YWxzIHx8IHt9O1xuXG4gICAgICAgICAgICAvLyBzaG93IHN3YXRjaCByZWxhdGVkIGltYWdlcyBmb3IgdGhlIGN1cnJlbnQgdmFyaWF0aW9uIHZhbHVlXG4gICAgICAgICAgICBqUXVlcnkuZWFjaCh2YWxzLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGltZ0NvdW50ZXIgPSAtMTtcbiAgICAgICAgICAgICAgICB2YXIgdGhpc1ZhbCA9IHRoaXM7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudmFsID09PSBzZWxlY3RlZFZhbCAmJiB0aGlzLmltYWdlcykge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmltYWdlcy5zbWFsbC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhhdC5jb250YWluZXJJZCArICcgLnByb2R1Y3R0aHVtYm5haWxzOmxhc3QnKS5odG1sKCcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICogU2hvdyBNYWdpY1pvb20gZGF0YSAtIGFkZGVkIGJ5IGxnZWxiZXJnIDkvMTQvMTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHpvb21pbWFnZXVybCA9ICh0aGlzVmFsLmltYWdlcy5vcmlnaW5hbC5sZW5ndGggPiAwKSA/IHRoaXNWYWwuaW1hZ2VzLm9yaWdpbmFsWzBdLnVybCA6ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9qUXVlcnkoJy5wcm9kdWN0ZGV0YWlsY29sdW1uIC5wcm9kdWN0aW1hZ2UgaW1nLCAucHJvZHVjdGRldGFpbGNvbHVtbiAucXVpY2t2aWV3cHJvZHVjdGltYWdlIGltZycpLmF0dHIoJ3NyYycsdGhpc1ZhbC5pbWFnZXMubGFyZ2VbaV0udXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSgnLk1hZ2ljWm9vbScpLmF0dHIoJ2hyZWYnLCB6b29taW1hZ2V1cmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnYm9keScpLmZpbmQoJy5NYWdpY1pvb20gaW1nJykuYXR0cignc3JjJywgem9vbWltYWdldXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hZ2ljWm9vbS51cGRhdGUoJ3Byb2R1Y3QtaW1hZ2UnLCB6b29taW1hZ2V1cmwsIHpvb21pbWFnZXVybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBqUXVlcnkodGhhdC5jb250YWluZXJJZCtcIiAucHJvZHVjdGltYWdlXCIpLmh0bWwoXCJcIikuYXBwZW5kKGpRdWVyeShcIjxpbWcvPlwiKS5hdHRyKFwic3JjXCIsIHRoaXNWYWwuaW1hZ2VzLmxhcmdlWzBdLnVybCkuYXR0cihcImFsdFwiLCB0aGlzVmFsLmltYWdlcy5sYXJnZVswXS5hbHQpLmF0dHIoXCJ0aXRsZVwiLCB0aGlzVmFsLmltYWdlcy5sYXJnZVswXS50aXRsZSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gbWFrZSBzdXJlIHRvIHNob3cgbnVtYmVyIG9mIGltYWdlcyBiYXNlZCBvbiB0aGUgc21hbGxlc3Qgb2YgbGFyZ2Ugb3Igc21hbGwgYXMgdGhlc2UgaGF2ZSB0byBoYXZlIDEtMSBjb3JyZXNwb25kZW5jZS5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG5vT2ZJbWFnZXMgPSB0aGlzLmltYWdlcy5sYXJnZS5sZW5ndGggPj0gdGhpcy5pbWFnZXMuc21hbGwubGVuZ3RoID8gdGhpcy5pbWFnZXMuc21hbGwubGVuZ3RoIDogdGhpcy5pbWFnZXMubGFyZ2UubGVuZ3RoO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIHNob3cgdGh1bWJuYWlscyBvbmx5IGlmIG1vcmUgdGhhbiAxIG9yIGlmIHRoaXMgaXMgYSBzdWJwcm9kdWN0IChidW5kbGVkL3N1YnByb2R1Y3QpXG4gICAgICAgICAgICAgICAgICAgIGlmICgodGhpcy5pbWFnZXMuc21hbGwubGVuZ3RoID4gMSB8fCB0aGF0LmlzU3ViUHJvZHVjdCgpKSAmJiAhdGhhdC5pc0JvbnVzUHJvZHVjdCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkuZWFjaCh0aGlzLmltYWdlcy5zbWFsbCwgZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nQ291bnRlcisrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdmFyIGltYWdlSW5kID0gaW1nQ291bnRlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW1nQ291bnRlciA+IG5vT2ZJbWFnZXMgLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhyZWYgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKCcjY29udGFpbmVyJykuaGFzQ2xhc3MoJ3B0X3Byb2R1Y3QtZGV0YWlscycpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhyZWYgPSB0aGlzVmFsLmltYWdlcy5vcmlnaW5hbFtpbmRleF0udXJsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluIHF1aWNrIHZpZXcgc2luY2UgbWFnaWMgem9vbSBpcyBub3QgdGhlcmUsIEhlbmNlIHdlIG5lZWQgdG8gc2V0IGphdmFzY3JpcHQ6dm9pZCgwKTsgZm9yIGEgdGFnIGhyZWYgdmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHJlZiA9ICdqYXZhc2NyaXB0OnZvaWQoMCk7JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGF0LmNvbnRhaW5lcklkICsgJyAucHJvZHVjdHRodW1ibmFpbHM6bGFzdCcpLmFwcGVuZCgnPGRpdiBjbGFzcz1cXCdhbHRlcm5hdGUtaW1hZ2VzXFwnPjxhIGRhdGEtem9vbS1pZD1cXCdwcm9kdWN0LWltYWdlXFwnIGhyZWY9XFwnJyArIGhyZWYgKyAnXFwnIGNsYXNzPVxcJ2FsdGVybmF0ZS1pbWFnZVxcJyBkYXRhLWltYWdlPVxcJycgKyB0aGlzVmFsLmltYWdlcy5vcmlnaW5hbFtpbmRleF0udXJsICsgJ1xcJz48aW1nIGNsYXNzPVxcJ2luZGV4JyArIGluZGV4ICsgJ1xcJyBzcmM9XFwnJyArIHRoaXMudXJsICsgJ1xcJyB0aXRsZT1cXCcnICsgdGhpcy50aXRsZSArICdcXCcgYWx0PVxcJycgKyB0aGlzLmFsdCArICdcXCcvPjwvYT48L2Rpdj4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhhdC5jb250YWluZXJJZC5pbmRleE9mKCd1aS1kaWFsb2cnKSA9PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhhdC5jb250YWluZXJJZCArICcgLnByb2R1Y3R0aHVtYm5haWxzOmxhc3QgLmFsdGVybmF0ZS1pbWFnZSBpbWcnKS5vbignY2xpY2sgdG91Y2hzdGFydCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5vd2wtaXRlbScpLnNpYmxpbmdzKCcub3dsLWl0ZW0nKS5maW5kKCdhLmFsdGVybmF0ZS1pbWFnZScpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcub3dsLWl0ZW0nKS5maW5kKCdhLmFsdGVybmF0ZS1pbWFnZScpLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHpvb21pbWFnZXVybCA9ICQodGhpcykuY2xvc2VzdCgnLmFsdGVybmF0ZS1pbWFnZScpLmRhdGEoJ2ltYWdlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2pRdWVyeSgnLnByb2R1Y3RkZXRhaWxjb2x1bW4gLnByb2R1Y3RpbWFnZSBpbWcsIC5wcm9kdWN0ZGV0YWlsY29sdW1uIC5xdWlja3ZpZXdwcm9kdWN0aW1hZ2UgaW1nJykuYXR0cignc3JjJyx0aGlzVmFsLmltYWdlcy5sYXJnZVtpbWFnZUluZF0udXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJ2JvZHknKS5maW5kKCcuTWFnaWNab29tJykuYXR0cignaHJlZicsIHpvb21pbWFnZXVybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCdib2R5JykuZmluZCgnLk1hZ2ljWm9vbSBpbWcnKS5hdHRyKCdzcmMnLCB6b29taW1hZ2V1cmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWFnaWNab29tLnVwZGF0ZSgncHJvZHVjdC1pbWFnZScsIHpvb21pbWFnZXVybCwgem9vbWltYWdldXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hZ2ljWm9vbS51cGRhdGUoJ3ByaW1hcnktaW1hZ2UnLCB6b29taW1hZ2V1cmwsIHpvb21pbWFnZXVybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyQoXCJib2R5XCIpLmZpbmQoJy5wcm9kdWN0LWltYWdlJykudHJpZ2dlcihcImNsaWNrXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGF0LmNvbnRhaW5lcklkICsgJyAucHJvZHVjdHRodW1ibmFpbHM6bGFzdCAub3dsLWl0ZW0nKS5maXJzdCgpLmZpbmQoJ2ltZycpLmNsaWNrKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL3ZhciAkaW1hZ2VzID0galF1ZXJ5KHRoYXQuY29udGFpbmVySWQrXCIgLnByb2R1Y3R0aHVtYm5haWxzOmxhc3QgLm93bC1pdGVtIGltZ1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vdmFyIG51bU9mUm93cyA9IE1hdGguY2VpbCgkaW1hZ2VzLnNpemUoKS82KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vJGltYWdlcy5zbGljZShudW1PZlJvd3MgKiA2IC0gNiwgbnVtT2ZSb3dzICogNiAtIDEpLmNzcygnbWFyZ2luLWJvdHRvbScsJzAnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZXNrdG9wSXRlbXMgPSA0O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoYXQuY29udGFpbmVySWQuaW5kZXhPZigndWktZGlhbG9nJykgPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2t0b3BJdGVtcyA9IDM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGRwT3dsQ2Fyb3VzZWwgPSAkKCcucGRwLW93bC1jdXN0b21pemF0aW9uJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPiA0ODApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pbWFnZXMuc21hbGwubGVuZ3RoID4gNCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZHBPd2xDYXJvdXNlbC5vd2xDYXJvdXNlbCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDEwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmF2UmV3aW5kOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJld2luZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYXY6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3RzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmF2aWdhdGlvbjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zaXZlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtczogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVCeTogMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgNDgxOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZUJ5OiAzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA5NjA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6IGRlc2t0b3BJdGVtcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVCeTogZGVza3RvcEl0ZW1zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnaW1nLmluZGV4MCcpLnBhcmVudHMoJy5vd2wtaXRlbScpLmZpbmQoJ2EuYWx0ZXJuYXRlLWltYWdlJykuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJChwZHBPd2xDYXJvdXNlbCkuaGFzQ2xhc3MoJ293bC1jYXJvdXNlbCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZHBPd2xDYXJvdXNlbC50cmlnZ2VyKCdkZXN0cm95Lm93bC5jYXJvdXNlbCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBkcE93bENhcm91c2VsLm93bENhcm91c2VsKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zOiBkZXNrdG9wSXRlbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYXZSZXdpbmQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAxMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJld2luZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYXY6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG90czogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0aW9uOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNpdmU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zOiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZUJ5OiAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA0ODE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlQnk6IDNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDk2MDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtczogZGVza3RvcEl0ZW1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZUJ5OiBkZXNrdG9wSXRlbXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCdpbWcuaW5kZXgwJykucGFyZW50cygnLm93bC1pdGVtJykuZmluZCgnYS5hbHRlcm5hdGUtaW1hZ2UnKS5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCQod2luZG93KS53aWR0aCgpIDwgNDgxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGRwT3dsQ2Fyb3VzZWwub3dsQ2Fyb3VzZWwoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtczogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVCeTogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAxMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmF2UmV3aW5kOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV3aW5kOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmF2OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3RzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0aW9uOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2l2ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zOiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlQnk6IDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA0ODE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtczogMyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZUJ5OiAzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOTYwOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6IGRlc2t0b3BJdGVtcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZUJ5OiBkZXNrdG9wSXRlbXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEV2ZW50IGhhbmRsZXIgd2hlbiBhIHZhcmlhdGlvbiBhdHRyaWJ1dGUgaXMgc2VsZWN0ZWQvZGVzZWxlY3RlZC5cbiAgICAgICAgICovXG4gICAgICAgIHZhckF0dHJTZWxlY3RlZDogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgc2VsZWN0ZWQgdmFsdWUgbm9kZVxuICAgICAgICAgICAgdGhpcy5zaG93U2VsZWN0ZWRWYXJBdHRyVmFsKGUuZGF0YS5pZCwgZS5kYXRhLnZhbCB8fCAnJyk7XG5cbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRWYXJBdHRyaWJzW2UuZGF0YS5pZF0gPSBlLmRhdGEudmFsO1xuXG4gICAgICAgICAgICAvLyBpZiB0aGlzIGlzIGEgZGVzZWxlY3Rpb24gYW5kIHVzZXIgbGFuZGVkIG9uIGEgdmFyaWFudCBwYWdlIHRoZW4gcmVzZXQgaXRzIHZhcmlhbnQgZmxhZ1xuICAgICAgICAgICAgLy8gYXMgbm93IHVzZXIgaGFzIGRlc2VsZWN0ZWQgYW4gYXR0cmlidXRlIHRodXMgbWFraW5nIGl0IGVzc2VudGlhbGx5IGEgbWFzdGVyIHByb2R1Y3Qgdmlld1xuICAgICAgICAgICAgaWYgKGUuZGF0YS52YWwgPT0gbnVsbCAmJiB0aGlzLnZhcmlhbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnZhcmlhbnQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLm1hc3RlciA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHN0b3JlIHRoaXMgcmVmXG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG5cbiAgICAgICAgICAgIC8vIHRyaWdnZXIgdXBkYXRlIGV2ZW50IHdoaWNoIHdpbGwgdXBkYXRlIGV2ZXJ5IG90aGVyIHZhcmlhdGlvbiBhdHRyaWJ1dGUgaS5lLiBlbmFibGUvZGlzYWJsZSBldGMuXG5cbiAgICAgICAgICAgIC8vIGZpcnN0IHJlc2V0IHRoZSBjb250ZW50cyBvZiBlYWNoIGF0dHJpYnV0ZSBkaXNwbGF5XG4gICAgICAgICAgICAvLyB3aGVuIHdlIGhhdmUgZ290IHRoZSB2YXJyaWF0aW9ucyBkYXRhXG4gICAgICAgICAgICBpZiAoIWlzTG9hZGluZ1Zhcikge1xuICAgICAgICAgICAgICAgIC8vIGZpbmQgdmFyaWFudHMgd2hpY2ggbWF0Y2ggdGhlIGN1cnJlbnQgc2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkVmFyQXR0clZhcmlhbnRzID0gZS5kYXRhLnZhbCAhPSBudWxsID8gdGhpcy5maW5kVmFyaWF0aW9ucyh7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBlLmRhdGEuaWQsXG4gICAgICAgICAgICAgICAgICAgIHZhbDogZS5kYXRhLnZhbFxuICAgICAgICAgICAgICAgIH0pIDogbnVsbDtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRWYXJBdHRycyA9IGpRdWVyeS5leHRlbmQoe30sIHt9LCB0aGlzLnNlbGVjdGVkVmFyQXR0cmlicyk7XG4gICAgICAgICAgICAgICAgdmFyIHZhbGlkVmFyaWFudHMgPSBudWxsO1xuICAgICAgICAgICAgICAgIHZhciB1bnNlbGVjdGVkVmFyQXR0cnMgPSBuZXcgQXJyYXkoKTtcblxuICAgICAgICAgICAgICAgIC8vIGZvciBlYWNoIHNlbGVjdGVkIHZhcmlhdGlvbiBhdHRyaWJ1dGUgZmluZCB2YWxpZCB2YXJpYW50c1xuICAgICAgICAgICAgICAgIGZvciAodmFyIHNlbGVjdGVkVmFyIGluIHNlbGVjdGVkVmFyQXR0cnMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkVmFyQXR0cnNbc2VsZWN0ZWRWYXJdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZFZhcmlhbnRzID0gdGhpcy5maW5kVmFyaWF0aW9ucyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHNlbGVjdGVkVmFyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbDogc2VsZWN0ZWRWYXJBdHRyc1tzZWxlY3RlZFZhcl1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHZhbGlkVmFyaWFudHMpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdW5zZWxlY3RlZFZhckF0dHJzLnB1c2goc2VsZWN0ZWRWYXIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBlYWNoIHZhcmlhdGlvbiBhdHRyaWJ1dGUgZGlzcGxheVxuICAgICAgICAgICAgICAgIGpRdWVyeS5lYWNoKG1vZGVsLnZhcmlhdGlvbnMuYXR0cmlidXRlcywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoKHRoaXMuaWQgIT0gZS5kYXRhLmlkIHx8IGUuZGF0YS52YWwgPT0gbnVsbCkgJiYgc2VsZWN0ZWRWYXJBdHRyc1t0aGlzLmlkXSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0LnZhckF0dHJEaXNwbGF5SGFuZGxlcih0aGlzLmlkLCB2YWxpZFZhcmlhbnRzKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlkICE9IGUuZGF0YS5pZCAmJiBzZWxlY3RlZFZhckF0dHJzW3RoaXMuaWRdICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQudmFyQXR0ckRpc3BsYXlIYW5kbGVyKHRoaXMuaWQsIHNlbGVjdGVkVmFyQXR0clZhcmlhbnRzKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNob3cgc3dhdGNoIHJlbGF0ZWQgaW1hZ2VzIGZvciB0aGUgY3VycmVudCB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5zaG93SW1hZ2VzKGUuZGF0YS52YWwsIHRoaXMudmFscyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIGJhc2VkIG9uIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgdmFyaWF0aW9uIGF0dHJpYnV0ZSB2YWx1ZXMsIHRyeSB0byBmaW5kIGEgbWF0Y2hpbmcgdmFyaWFudFxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRWYXIgPSB0aGlzLmZpbmRWYXJpYXRpb24odGhpcy5zZWxlY3RlZFZhckF0dHJpYnMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBsZXRzIGZpcmUgcmVmcmVzaCB2aWV3IGV2ZW50IHRvIGVuYWJsZS9kaXNhYmxlIHZhcmlhdGlvbnMgYXR0cnNcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFZpZXcoKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogZ28gdGhydSBhbGwgdmFyaWF0aW9ucyBhdHRyIGFuZCBkaXNhYmxlIHdoaWNoIGFyZSBub3QgYXZhaWxhYmxlXG4gICAgICAgICAqL1xuICAgICAgICByZXNldFZhcmlhdGlvbnM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChpc0xvYWRpbmdWYXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47IC8vIHdlIGRvbid0IGhhdmUgdGhlIGNvbXBsZXRlIGRhdGEgeWV0XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgdmFsaWRWYXJpYW50cyA9IG1vZGVsLnZhcmlhdGlvbnMudmFyaWFudHM7XG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFZhckF0dHJpYnMpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBzZWxlY3RlZFZhckF0dHIgaW4gdGhpcy5zZWxlY3RlZFZhckF0dHJpYnMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRWYXJBdHRyaWJzW3NlbGVjdGVkVmFyQXR0cl0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkVmFyaWFudHMgPSB0aGF0LmZpbmRWYXJpYXRpb25zKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogc2VsZWN0ZWRWYXJBdHRyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbDogdGhpcy5zZWxlY3RlZFZhckF0dHJpYnNbc2VsZWN0ZWRWYXJBdHRyXVxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgdmFsaWRWYXJpYW50cyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGpRdWVyeSh0aGlzLmNvbnRhaW5lcklkICsgJyAudmFyaWF0aW9uYXR0cmlidXRlcyAuc3dhdGNoZXMnKS5ub3QoJy5jdXJyZW50Jykubm90KCcuc2VsZWN0ZWQnKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YWEgPSBqUXVlcnkodGhpcykuZGF0YSgnZGF0YScpOyAvLyBkYXRhIGlzIGlkIHNldCB2aWEgYXBwLmhpZGRlbkRhdGEgYXBpXG4gICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMpLmZpbmQoJ2Euc3dhdGNoYW5jaG9yJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGZpbmQgQSB2YXJpYXRpb24gd2l0aCB0aGlzIHZhbFxuICAgICAgICAgICAgICAgICAgICB2YXIgZmlsdGVyZWRWYXJpYW50cyA9IHRoYXQuZmluZFZhcmlhdGlvbnMoe2lkOiBkYXRhYSwgdmFsOiB0aGlzLnRpdGxlfSwgdmFsaWRWYXJpYW50cyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWx0ZXJlZFZhcmlhbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZvdW5kIGF0IGxlYXN0IDEgc28ga2VlcCBpdCBlbmFibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcykucGFyZW50KCkucmVtb3ZlQ2xhc3MoJ3Vuc2VsZWN0YWJsZScpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMpLnBhcmVudCgpLmFkZENsYXNzKCd1bnNlbGVjdGFibGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzKS5wYXJlbnQoKS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBqUXVlcnkodGhpcy5jb250YWluZXJJZCArICcgLnZhcmlhdGlvbmF0dHJpYnV0ZXMgLnZhcmlhbnRkcm9wZG93biBzZWxlY3QnKS5ub3QoJy5jdXJyZW50IHNlbGVjdCcpLm5vdCgnLnNlbGVjdGVkIHNlbGVjdCcpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciAkc2VsZWN0ID0galF1ZXJ5KHRoaXMpO1xuICAgICAgICAgICAgICAgIHZhciB2YUlkID0gJHNlbGVjdC5kYXRhKCdkYXRhJykuaWQ7ICAvLyBkYXRhIGlzIGlkIHNldCB2aWEgYXBwLmhpZGRlbkRhdGEgYXBpXG4gICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSAkc2VsZWN0LmRhdGEoJ29wdGlvbnMnKTtcbiAgICAgICAgICAgICAgICBpZiAoIW9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAkc2VsZWN0LmZpbmQoJ29wdGlvbicpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRvcHRpb24gPSBqUXVlcnkodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnB1c2goe3ZhbHVlOiAkb3B0aW9uLnZhbCgpLCB0ZXh0OiAkb3B0aW9uLnRleHQoKSwgc2VsZWN0ZWQ6IGZhbHNlfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAkc2VsZWN0LmRhdGEoJ29wdGlvbnMnLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGxlbiA9IG9wdGlvbnMubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZFZhbCA9ICRzZWxlY3QudmFsKCk7XG4gICAgICAgICAgICAgICAgJHNlbGVjdC5lbXB0eSgpO1xuICAgICAgICAgICAgICAgIGpRdWVyeS5lYWNoKG9wdGlvbnMsIGZ1bmN0aW9uIChpbmRleCwgdmFsdWUpIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAobGVuID4gMSAmJiBpbmRleCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2VsZWN0LmFwcGVuZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkoJzxvcHRpb24+PC9vcHRpb24+JykudGV4dCh2YWx1ZS50ZXh0KS52YWwodmFsdWUudmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOyAvLyB2ZXJ5IGZpcnN0IG9wdGlvbiB3aGVuIHRoZSBsZW5ndGggaXMgZ3JlYXRlciB0aGFuIDEgaXMgJ1NlbGVjdCAuLi4nIG1lc3NhZ2Ugc28gc2tpcCBpdFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBmaWx0ZXJlZFZhcmlhbnRzID0gdGhhdC5maW5kVmFyaWF0aW9ucyh7aWQ6IHZhSWQsIHZhbDogdmFsdWUudmFsdWV9LCB2YWxpZFZhcmlhbnRzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbHRlcmVkVmFyaWFudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9hZGQgaXRcbiAgICAgICAgICAgICAgICAgICAgICAgICRzZWxlY3QuYXBwZW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSgnPG9wdGlvbj48L29wdGlvbj4nKS50ZXh0KHZhbHVlLnRleHQpLnZhbCh2YWx1ZS52YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBubyB2YXJpYW50IGZvdW5kIHdpdGggdGhpcyB2YWx1ZSBjb21iaW5hdGlvbiBzbyBkaXNhYmxlIGl0XG4gICAgICAgICAgICAgICAgICAgICAgICAvL3RoaXMuZGlzYWJsZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvKippZiAodGhpcy5zZWxlY3RlZCkge1xuXHRcdFx0XHRcdFx0XHRcdC8vIHJlbW92ZSB0aGUgY3VycmVudGx5IHNlbGVjdGVkIHZhbHVlIGlmIHRoZSB2YWx1ZSBpcyBub3Qgc2VsZWN0YWJsZVxuXHRcdFx0XHRcdFx0XHRcdHRoYXQuc2hvd1NlbGVjdGVkVmFyQXR0clZhbChhdHRySWQsIFwiXCIpO1xuXHRcdFx0XHRcdFx0XHRcdHRoYXQuc2VsZWN0ZWRWYXJBdHRyaWJzW2F0dHJJZF0gPSBudWxsO1xuXHRcdFx0XHRcdFx0XHR9Ki9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBjdXJyZW50IHNlbGVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgLy90aGlzLnNlbGVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICRzZWxlY3QudmFsKHNlbGVjdGVkVmFsKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBnaXZlbiBhIHZhcmlhdGlvbiBhdHRyaWJ1dGUgaWQgYW5kIHZhbGlkIHZhcmlhbnRzLCBpdCB3b3VsZCBhZGp1c3QgdGhlIHVpIGkuZS4gZW5hYmxlL2Rpc2FibGVcbiAgICAgICAgICogYXBwcm9wcmlhdGUgYXR0cmlidXRlIHZhbHVlcy5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIGF0dHJJZCAtIFN0cmluZywgaWQgb2YgdGhlIHZhcmlhdGlvbiBhdHRyaWJ1dGVcbiAgICAgICAgICogQHBhcmFtIHZhbGlkVmFyaWFudHMgLSBBcnJheSBvZiBqc29uIG9iamVjdHMgb2YgdmFsaWQgdmFyaWFudHMgZm9yIHRoZSBnaXZlbiBhdHRyaWJ1dGUgaWRcbiAgICAgICAgICogKi9cbiAgICAgICAgdmFyQXR0ckRpc3BsYXlIYW5kbGVyOiBmdW5jdGlvbiAoYXR0cklkLCB2YWxpZFZhcmlhbnRzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7IC8vIHByZXNlcnZlIHRoaXMgaW5zdGFuY2VcbiAgICAgICAgICAgIHZhciBmdXR1cmVWYXJpYW50cyA9IHZhbGlkVmFyaWFudHM7XG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFZhckF0dHJpYnMpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBzZWxlY3RlZFZhckF0dHIgaW4gdGhpcy5zZWxlY3RlZFZhckF0dHJpYnMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRWYXJBdHRyaWJzW3NlbGVjdGVkVmFyQXR0cl0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1dHVyZVZhcmlhbnRzID0gdGhhdC5maW5kVmFyaWF0aW9ucyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHNlbGVjdGVkVmFyQXR0cixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWw6IHRoaXMuc2VsZWN0ZWRWYXJBdHRyaWJzW3NlbGVjdGVkVmFyQXR0cl1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1dHVyZVZhcmlhbnRzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGxvb3AgdGhydSBhbGwgbm9uLWRyb3Bkb3duIHVpIGVsZW1lbnRzIGkuZS4gc3dhdGNoZXMgZS5nLiBjb2xvciwgd2lkdGgsIGxlbmd0aCBldGMuXG4gICAgICAgICAgICBqUXVlcnkodGhpcy5jb250YWluZXJJZCArICcgLnZhcmlhdGlvbmF0dHJpYnV0ZXMgLnN3YXRjaGVzLmZ1dHVyZSwgJyArIHRoaXMuY29udGFpbmVySWQgKyAnIC52YXJpYXRpb25hdHRyaWJ1dGVzIC5zd2F0Y2hlcy5jdXJyZW50JykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyICRzd2F0Y2ggPSBqUXVlcnkodGhpcyk7XG4gICAgICAgICAgICAgICAgdmFyIHN3YXRjaElkID0gJHN3YXRjaC5kYXRhKCdkYXRhJyk7ICAvLyBkYXRhIGlzIGlkIHNldCB2aWEgYXBwLmhpZGRlbkRhdGEgYXBpXG5cbiAgICAgICAgICAgICAgICBpZiAoc3dhdGNoSWQgPT09IGF0dHJJZCAmJiB2YWxpZFZhcmlhbnRzKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgJHN3YXRjaC5maW5kKCdhLnN3YXRjaGFuY2hvcicpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyICR0aGlzID0galF1ZXJ5KHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudExpID0gJHRoaXMucGFyZW50KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZpbmQgQSB2YXJpYXRpb24gd2l0aCB0aGlzIHZhbFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpbHRlcmVkVmFyaWFudHMgPSAkc3dhdGNoLmhhc0NsYXNzKCdmdXR1cmUnKSA/IHRoYXQuZmluZFZhcmlhdGlvbnMoe2lkOiBhdHRySWQsIHZhbDogdGhpcy50aXRsZX0sIGZ1dHVyZVZhcmlhbnRzKSA6IHRoYXQuZmluZFZhcmlhdGlvbnMoe2lkOiBhdHRySWQsIHZhbDogdGhpcy50aXRsZX0sIHZhbGlkVmFyaWFudHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbHRlcmVkVmFyaWFudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZvdW5kIGF0IGxlYXN0IDEgc28ga2VlcCBpdCBlbmFibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50TGkucmVtb3ZlQ2xhc3MoJ3Vuc2VsZWN0YWJsZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc3dhdGNoLmhhc0NsYXNzKCdjb2xvcicpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZ2V0QXZhaWxhYmlsaXR5KGZpbHRlcmVkVmFyaWFudHMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHRoaXMuZmluZCgnLm91dC1vZi1zdG9jaycpLnNpemUoKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLnByZXBlbmQoJzxzcGFuIGNsYXNzPVxcJ291dC1vZi1zdG9ja1xcJz48L3NwYW4+Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy5maW5kKCcub3V0LW9mLXN0b2NrJykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWdldEF2YWlsYWJpbGl0eShmaWx0ZXJlZFZhcmlhbnRzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCR0aGlzLmZpbmQoJ3NwYW4nKS50ZXh0KCkuaW5kZXhPZignT3V0IG9mIFN0b2NrJykgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCR0aGlzLmZpbmQoJ3NwYW4nKS50ZXh0KCkuaW5kZXhPZignTmV3JykgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoJ3NwYW4nKS50ZXh0KCR0aGlzLmZpbmQoJ3NwYW4nKS50ZXh0KCkgKyAnIC8gT3V0IG9mIFN0b2NrJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMuZmluZCgnc3BhbicpLnRleHQoJ091dCBvZiBTdG9jaycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkdGhpcy5maW5kKCdzcGFuJykudGV4dCgpLmluZGV4T2YoJ05ldycpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoJ3NwYW4nKS50ZXh0KCR0aGlzLmZpbmQoJ3NwYW4nKS50ZXh0KCkucmVwbGFjZSgnIC8gT3V0IG9mIFN0b2NrJywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMuZmluZCgnc3BhbicpLnRleHQoJHRoaXMuZmluZCgnc3BhbicpLnRleHQoKS5yZXBsYWNlKCdPdXQgb2YgU3RvY2snLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBubyB2YXJpYW50IGZvdW5kIHdpdGggdGhpcyB2YWx1ZSBjb21iaW5hdGlvbiBzbyBkaXNhYmxlIGl0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50TGkuYWRkQ2xhc3MoJ3Vuc2VsZWN0YWJsZScpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudExpLmhhc0NsYXNzKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSB0aGUgY3VycmVudGx5IHNlbGVjdGVkIHZhbHVlIGlmIHRoZSB2YWx1ZSBpcyBub3Qgc2VsZWN0YWJsZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LnNob3dTZWxlY3RlZFZhckF0dHJWYWwoYXR0cklkLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuc2VsZWN0ZWRWYXJBdHRyaWJzW2F0dHJJZF0gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgY3VycmVudCBzZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRMaS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIGxvb3AgdGhydSBhbGwgdGhlIG5vbi1zd2F0Y2hlcyhkcm9wIGRvd24pIGF0dHJpYnV0ZXNcbiAgICAgICAgICAgIGpRdWVyeSh0aGlzLmNvbnRhaW5lcklkICsgJyAudmFyaWF0aW9uYXR0cmlidXRlcyAudmFyaWFudGRyb3Bkb3duLmZ1dHVyZSBzZWxlY3QsICcgKyB0aGlzLmNvbnRhaW5lcklkICsgJyAudmFyaWF0aW9uYXR0cmlidXRlcyAudmFyaWFudGRyb3Bkb3duLmN1cnJlbnQgc2VsZWN0JykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyICRzZWxlY3QgPSBqUXVlcnkodGhpcyk7XG4gICAgICAgICAgICAgICAgdmFyIHZhSWQgPSAkc2VsZWN0LmRhdGEoJ2RhdGEnKS5pZDsgIC8vIGRhdGEgaXMgaWQgc2V0IHZpYSBhcHAuaGlkZGVuRGF0YSBhcGlcbiAgICAgICAgICAgICAgICBpZiAodmFJZCA9PT0gYXR0cklkICYmIHZhbGlkVmFyaWFudHMpIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgb3B0aW9ucyA9ICRzZWxlY3QuZGF0YSgnb3B0aW9ucycpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIW9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzZWxlY3QuZmluZCgnb3B0aW9uJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRvcHRpb24gPSBqUXVlcnkodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5wdXNoKHt2YWx1ZTogJG9wdGlvbi52YWwoKSwgdGV4dDogJG9wdGlvbi50ZXh0KCksIHNlbGVjdGVkOiBmYWxzZX0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2VsZWN0LmRhdGEoJ29wdGlvbnMnLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgbGVuID0gb3B0aW9ucy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZFZhbCA9ICRzZWxlY3QudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgICRzZWxlY3QuZW1wdHkoKTtcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5LmVhY2gob3B0aW9ucywgZnVuY3Rpb24gKGluZGV4LCB2YWx1ZSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGVuID4gMSAmJiBpbmRleCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNlbGVjdC5hcHBlbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSgnPG9wdGlvbj48L29wdGlvbj4nKS50ZXh0KHZhbHVlLnRleHQpLnZhbCh2YWx1ZS52YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsgLy8gdmVyeSBmaXJzdCBvcHRpb24gd2hlbiB0aGUgbGVuZ3RoIGlzIGdyZWF0ZXIgdGhhbiAxIGlzICdTZWxlY3QgLi4uJyBtZXNzYWdlIHNvIHNraXAgaXRcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmluZCBBIHZhcmlhdGlvbiB3aXRoIHRoaXMgdmFsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmlsdGVyZWRWYXJpYW50cyA9ICRzZWxlY3QuY2xvc2VzdCgnLnZhcmlhbnRkcm9wZG93bicpLmhhc0NsYXNzKCdmdXR1cmUnKSA/IHRoYXQuZmluZFZhcmlhdGlvbnMoe2lkOiBhdHRySWQsIHZhbDogdmFsdWUudmFsdWV9LCBmdXR1cmVWYXJpYW50cykgOiB0aGF0LmZpbmRWYXJpYXRpb25zKHtpZDogYXR0cklkLCB2YWw6IHZhbHVlLnZhbHVlfSwgdmFsaWRWYXJpYW50cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlsdGVyZWRWYXJpYW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZm91bmQgYXQgbGVhc3QgMSBzbyBrZWVwIGl0IGVuYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb29zID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFnZXRBdmFpbGFiaWxpdHkoZmlsdGVyZWRWYXJpYW50cykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb29zID0gJyAtIE91dCBvZiBTdG9jayc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYWRkIGl0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNlbGVjdC5hcHBlbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSgnPG9wdGlvbj48L29wdGlvbj4nKS50ZXh0KHZhbHVlLnRleHQgKyBvb3MpLnZhbCh2YWx1ZS52YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBubyB2YXJpYW50IGZvdW5kIHdpdGggdGhpcyB2YWx1ZSBjb21iaW5hdGlvbiBzbyBkaXNhYmxlIGl0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy90aGlzLmRpc2FibGVkID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKmlmICh0aGlzLnNlbGVjdGVkKSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gcmVtb3ZlIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgdmFsdWUgaWYgdGhlIHZhbHVlIGlzIG5vdCBzZWxlY3RhYmxlXG5cdFx0XHRcdFx0XHRcdFx0dGhhdC5zaG93U2VsZWN0ZWRWYXJBdHRyVmFsKGF0dHJJZCwgXCJcIik7XG5cdFx0XHRcdFx0XHRcdFx0dGhhdC5zZWxlY3RlZFZhckF0dHJpYnNbYXR0cklkXSA9IG51bGw7XG5cdFx0XHRcdFx0XHRcdH0qL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBjdXJyZW50IHNlbGVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdGhpcy5zZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgJHNlbGVjdC52YWwoc2VsZWN0ZWRWYWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHJlZnJlc2ggdGhlIFVJIGkuZS4gYXZhaWxhYmlsaXR5LCBwcmljZSwgQTJDIGJ1dHRvbiBhbmQgdmFyaWF0aW9uIGF0dHJpYnV0ZXMgZGlzcGxheVxuICAgICAgICAgKi9cbiAgICAgICAgcmVmcmVzaFZpZXc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0aGlzUHJvZHVjdCA9IHRoaXM7XG5cbiAgICAgICAgICAgIGlmICghaXNMb2FkaW5nVmFyICYmIHRoaXMuc2VsZWN0ZWRWYXIgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIC8vIGlmIHdlIGhhdmUgbG9hZGVkIHRoZSB2YXJpYXRpb25zIGRhdGEgdGhlbiBsZXRzIGlmIHRoZSB1c2VyIGhhcyBhbHJlYWR5IHNlbGVjdGVkIHNvbWUgdmFsdWVzXG4gICAgICAgICAgICAgICAgLy8gZmluZCBhIG1hdGNoaW5nIHZhcmlhdGlvblxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRWYXIgPSB0aGlzLmZpbmRWYXJpYXRpb24odGhpcy5zZWxlY3RlZFZhckF0dHJpYnMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIWlzTG9hZGluZ1ZhciAmJiB0aGlzLnNlbGVjdGVkVmFyICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAvL0ZhY2Vib29rIFBpeGVsIENvZGUgZm9yIHZhcmlhbnQgdmlld1xuICAgICAgICAgICAgICAgIGZicSgndHJhY2snLCAnVmlld0NvbnRlbnQnLCB7XG4gICAgICAgICAgICAgICAgICAgICdjb250ZW50X2lkcyc6IFt0aGlzUHJvZHVjdC5zZWxlY3RlZFZhci5pZF0sXG4gICAgICAgICAgICAgICAgICAgICdjb250ZW50X3R5cGUnOiAncHJvZHVjdCdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgYXZhaWxhYmlsaXR5XG4gICAgICAgICAgICAgICAgcmVsb2FkQXZhaWxhYmlsaXR5KHRoaXNQcm9kdWN0LCB0aGlzUHJvZHVjdC5zZWxlY3RlZE9wdGlvbnMuUXVhbnRpdHkpO1xuICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBwcmljZVxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd1VwZGF0ZWRQcmljZShjb21wdXRlUHJpY2UodGhpc1Byb2R1Y3QpLCB0aGlzLnNlbGVjdGVkVmFyLnByaWNpbmcuc3RhbmRhcmQpO1xuXG4gICAgICAgICAgICAgICAgaWYgKCEoIXRoaXMuc2VsZWN0ZWRWYXIuaW5TdG9jayAmJiB0aGlzLnNlbGVjdGVkVmFyLmF2U3RhdHVzID09PSBDb25zdGFudHMuQVZBSUxfU1RBVFVTX05PVF9BVkFJTEFCTEUpICYmICh0aGlzLmdldFByaWNlKCkgPiAwIHx8IHRoaXMuaXNQcm9tb1ByaWNlKCkpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFJlcGxhY2UgdGhlIGhlcm8gc2hvdCB3aXRoIHRoZSBzcGVjaWZpYyB2YXJpYW50IGNob3NlblxuICAgICAgICAgICAgICAgICAgICB2YXIgdmFySUQgPSB0aGlzLnNlbGVjdGVkVmFyLmlkO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaW1hZ2VVcmwgPSBtb2RlbC5pbWFnZXMudmFyaWFudHNbdmFySURdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgem9vbUltYWdlVXJsID0gbW9kZWwuaW1hZ2VzLnpvb212YXJpYW50c1t2YXJJRF07XG4gICAgICAgICAgICAgICAgICAgIC8vIGxvYWQgdGhlIGZ1bGx5IHF1YWxpZmllZCB2YXJpYXRpb24gaW1hZ2VcbiAgICAgICAgICAgICAgICAgICAgaWYgKGltYWdlVXJsICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8valF1ZXJ5KCcucHJvZHVjdGRldGFpbGNvbHVtbiAucHJvZHVjdGltYWdlIGltZywgLnByb2R1Y3RkZXRhaWxjb2x1bW4gLnF1aWNrdmlld3Byb2R1Y3RpbWFnZSBpbWcnKS5hdHRyKCdzcmMnLGltYWdlVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSgnLk1hZ2ljWm9vbScpLmF0dHIoJ2hyZWYnLCB6b29tSW1hZ2VVcmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnYm9keScpLmZpbmQoJy5NYWdpY1pvb20gaW1nJykuYXR0cignc3JjJywgem9vbUltYWdlVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hZ2ljWm9vbS51cGRhdGUoJ3Byb2R1Y3QtaW1hZ2UnLCB6b29tSW1hZ2VVcmwsIHpvb21JbWFnZVVybCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dJdGVtTm8oKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93QXZhaWxhYmlsaXR5KCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVuYWJsZSBhZGQgdG8gY2FydCBidXR0b25cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmFibGVBMkNCdXR0b24oKTtcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMpLnRyaWdnZXIoJ0FkZHRvQ2FydEVuYWJsZWQnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0ZWRWYXIuZWFybHlCaXJkTWVzc2FnZSAhPSAnJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dJdGVtTm8oKTtcbiAgICAgICAgICAgICAgICAgICAgLy90aGlzLmhpZGVBdmFpbGFiaWxpdHkoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNhYmxlQTJDQnV0dG9uKCk7XG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzKS50cmlnZ2VyKCdBZGR0b0NhcnREaXNhYmxlZCcpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vdGhpcy5yZW1vdmVJdGVtTm8oKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93SXRlbU5vKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0F2YWlsYWJpbGl0eSgpO1xuICAgICAgICAgICAgICAgICAgICAvL3RoaXMucmV2ZXJ0UHJpY2UoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNhYmxlQTJDQnV0dG9uKCk7XG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzKS50cmlnZ2VyKCdBZGR0b0NhcnREaXNhYmxlZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFZhci5hdlN0YXR1cyA9PT0gQ29uc3RhbnRzLkFWQUlMX1NUQVRVU19OT1RfQVZBSUxBQkxFKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vdGhpcy5yZW1vdmVBMkNCdXR0b24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChpc0xvYWRpbmdWYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gdXBkYXRlIGF2YWlsYWJpbGl0eVxuICAgICAgICAgICAgICAgICAgICBzZXRBdmFpbGFiaWxpdHlNc2cocHJvZ3Jlc3Muc2hvdygncHJvZHVjdGxvYWRlcicpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzZXRBdmFpbGFiaWxpdHlNc2coUmVzb3VyY2VzLk5PTl9TRUxFQ1RFRCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlSXRlbU5vKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93QXZhaWxhYmlsaXR5KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXZlcnRQcmljZSgpO1xuICAgICAgICAgICAgICAgIC8vIGRpc2FibGUgYWRkIHRvIGNhcnQgYnV0dG9uXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNhYmxlQTJDQnV0dG9uKCk7XG4gICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMpLnRyaWdnZXIoJ0FkZHRvQ2FydERpc2FibGVkJyk7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIG5vblNlbGVjdGVkVmFycyA9IFtdO1xuXG4gICAgICAgICAgICB2YXIgdmFsaWRWYXJpYW50cyA9IG51bGw7XG5cbiAgICAgICAgICAgIGZvciAodmFyIHNlbGVjdGVkVmFyIGluIHRoaXMuc2VsZWN0ZWRWYXJBdHRyaWJzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRWYXJBdHRyaWJzW3NlbGVjdGVkVmFyXSkge1xuICAgICAgICAgICAgICAgICAgICB2YWxpZFZhcmlhbnRzID0gdGhpcy5maW5kVmFyaWF0aW9ucyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogc2VsZWN0ZWRWYXIsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWw6IHRoaXMuc2VsZWN0ZWRWYXJBdHRyaWJzW3NlbGVjdGVkVmFyXVxuICAgICAgICAgICAgICAgICAgICB9LCB2YWxpZFZhcmlhbnRzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHVwZGF0ZSBzZWxlY3RlZCB2YXIgYXR0ciB2YWxzIGFuZCByZWZyZXNoIHRoZWlyIGRpc3BsYXlcbiAgICAgICAgICAgIGpRdWVyeS5lYWNoKG1vZGVsLnZhcmlhdGlvbnMuYXR0cmlidXRlcywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LnNob3dTZWxlY3RlZFZhckF0dHJWYWwodGhpcy5pZCwgdGhpc1Byb2R1Y3Quc2VsZWN0ZWRWYXJBdHRyaWJzW3RoaXMuaWRdKTtcblxuICAgICAgICAgICAgICAgIGlmICghdGhpc1Byb2R1Y3Quc2VsZWN0ZWRWYXJBdHRyaWJzW3RoaXMuaWRdIHx8IHRoaXNQcm9kdWN0LnNlbGVjdGVkVmFyQXR0cmlic1t0aGlzLmlkXSA9PSAnJykge1xuICAgICAgICAgICAgICAgICAgICBub25TZWxlY3RlZFZhcnMucHVzaCh0aGlzLm5hbWUpO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LnZhckF0dHJEaXNwbGF5SGFuZGxlcih0aGlzLmlkLCB2YWxpZFZhcmlhbnRzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gcHJvY2VzcyBub24tc2VsZWN0ZWQgdmFscyBhbmQgc2hvdyB1cGRhdGVkIHRvb2x0aXAgZm9yIEEyQyBidXR0b24gYXMgYSByZW1pbmRlclxuICAgICAgICAgICAgLy8gYW5kIHNob3cgaXQgYWxvbmcgYXZhaWxhYmlsaXR5XG4gICAgICAgICAgICB2YXIgdG9vbHRpcFN0ciA9IGdldE5vblNlbGVjdGVkVG9vbHRpcChub25TZWxlY3RlZFZhcnMpO1xuICAgICAgICAgICAgLy92YXIgbWlzc2luZ3ZhbHVlID0gJChcIi5taXNzaW5ndmFsdWVcIikudmFsKCk7XG4gICAgICAgICAgICBpZiAobm9uU2VsZWN0ZWRWYXJzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgYXZhaWxNc2cgPSAkLnZhbGlkYXRvci5mb3JtYXQoUmVzb3VyY2VzLk1JU1NJTkdfVkFMLCB0b29sdGlwU3RyKTtcbiAgICAgICAgICAgICAgICBzZXRBdmFpbGFiaWxpdHlNc2coYXZhaWxNc2cpO1xuICAgICAgICAgICAgICAgIC8valF1ZXJ5KHRoaXNQcm9kdWN0LmNvbnRhaW5lcklkK1wiIC5hZGR0b2NhcnRidXR0b246bGFzdFwiKS5hdHRyKFwidGl0bGVcIiwgYXZhaWxNc2cpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiByZW5kZXJzIHByaWNpbmcgZGl2IGdpdmVuIGEgc2FsZSBwcmljZSBhbmQgb3B0aW9uYWwgc3RhbmRhcmQgcHJpY2VcbiAgICAgICAgICogVG8gZm9ybWF0IHRoZSBwcmljZSBkaXNwbGF5LCBpdCBnb2VzIHRvIHNlcnZlciB2aWEgYW4gYWpheCBjYWxsLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gc2FsZSAtIHNhbGUgcHJpY2VcbiAgICAgICAgICogQHBhcmFtIHN0YW5kYXJkIC0gc3RhbmRhcmQgcHJpY2VcbiAgICAgICAgICovXG4gICAgICAgIHNob3dVcGRhdGVkUHJpY2U6IGZ1bmN0aW9uIChzYWxlLCBzdGFuZGFyZCkge1xuICAgICAgICAgICAgdmFyIHN0YW5kYXJkUHJpY2UgPSBOdW1iZXIoc3RhbmRhcmQgfHwgMCk7XG4gICAgICAgICAgICB2YXIgc2FsZVByaWNlID0gTnVtYmVyKHNhbGUgfHwgMCk7XG4gICAgICAgICAgICB2YXIgcHJpY2VIdG1sID0gJyc7XG4gICAgICAgICAgICB2YXIgZm9ybWF0dGVkUHJpY2VzID0geydzYWxlUHJpY2UnOiBzYWxlUHJpY2UsICdzdGFuZGFyZFByaWNlJzogc3RhbmRhcmRQcmljZX07XG5cbiAgICAgICAgICAgIC8vIHNlbmQgc2VydmVyIHJlcXVlc3QgdG8gZm9ybWF0IHRoZSBtb25leSBiYWVkIG9uIHNpdGUgc2V0dGluZ3MgdXNpbmcgTW9uZXkgYXBpXG4gICAgICAgICAgICBhamF4LmdldEpzb24oe1xuICAgICAgICAgICAgICAgIHVybDogVXJscy5mb3JtYXRNb25leSxcbiAgICAgICAgICAgICAgICBjYWNoZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBhc3luYzogZmFsc2UsXG4gICAgICAgICAgICAgICAgZGF0YTogeydzYWxlUHJpY2UnOiBzYWxlUHJpY2UsICdzdGFuZGFyZFByaWNlJzogc3RhbmRhcmRQcmljZX0sXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZFByaWNlcyA9IGRhdGE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIGluIGNhc2UgaXQgaXMgYSBwcm9tb3Rpb25hbCBwcmljZSB0aGVuIHdlIGRvIG5vdCBjYXJlIGlmIGl0IGlzIDBcbiAgICAgICAgICAgIHByaWNlSHRtbCA9IChzYWxlUHJpY2UgPiAwIHx8IHRoaXMuaXNQcm9tb1ByaWNlKCkpID8gJzxkaXYgY2xhc3M9XCJzYWxlc3ByaWNlXCI+JyArIGZvcm1hdHRlZFByaWNlcy5zYWxlUHJpY2UgKyAnPC9kaXY+JyA6ICcgPGRpdiBjbGFzcz1cInNhbGVzcHJpY2VcIj5OL0E8L2Rpdj4nO1xuXG4gICAgICAgICAgICBpZiAoc3RhbmRhcmRQcmljZSA+IDAgJiYgc3RhbmRhcmRQcmljZSA+IHNhbGVQcmljZSkge1xuICAgICAgICAgICAgICAgIC8vIHNob3cgYm90aCBwcmljZXNcbiAgICAgICAgICAgICAgICBwcmljZUh0bWwgPSAnPGRpdiBjbGFzcz1cInN0YW5kYXJkcHJpY2VcIj4nICsgZm9ybWF0dGVkUHJpY2VzLnN0YW5kYXJkUHJpY2UgKyAnPC9kaXY+JyArIHByaWNlSHRtbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzdGFuZGFyZFByaWNlID09PSAwICYmIHNhbGVQcmljZSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkVmFyLmVhcmx5QmlyZE1lc3NhZ2UgIT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJpY2VIdG1sID0gJzxkaXYgY2xhc3M9XCJzYWxlc3ByaWNlXCI+JyArIHRoaXMuc2VsZWN0ZWRWYXIuZWFybHlCaXJkTWVzc2FnZSArICc8L2Rpdj4nO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHByaWNlSHRtbCA9ICc8ZGl2IGNsYXNzPVwic2FsZXNwcmljZVwiPjwvZGl2Pic7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgJHByaWNlID0galF1ZXJ5KHRoaXMuY29udGFpbmVySWQgKyAnIC5wcm9kdWN0aW5mbyAucHJpY2U6Zmlyc3QnKTtcbiAgICAgICAgICAgIGlmICghJHByaWNlLmRhdGEoJ29yaWdpbmFsUHJpY2UnKSkge1xuICAgICAgICAgICAgICAgICRwcmljZS5kYXRhKCdvcmlnaW5hbFByaWNlJywgJHByaWNlLmh0bWwoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkcHJpY2UuaHRtbChwcmljZUh0bWwpO1xuICAgICAgICAgICAgLy8gY29udGFpbmVySWQgY29udGFpbnMgIywgZ2V0IHJpZCBvZiBpdCBiZWZvcmUgZmluZGluZyB0aGUgcmlnaHQgcHJpY2UgZGl2XG4gICAgICAgICAgICBqUXVlcnkodGhpcy5jb250YWluZXJJZCArICcgI3BkcEFUQ0RpdicgKyB0aGlzLmNvbnRhaW5lcklkLnN1YnN0cmluZygxKSArICcgLnByaWNlJykuaHRtbChwcmljZUh0bWwpO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiByZXR1cm5zIGEgY29tcHV0ZWQgcHJpY2UgZm9yIHRoaXMgcHJvZHVjdFxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0UHJpY2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBjb21wdXRlUHJpY2UodGhpcyk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERldGVybWluZXMgaWYgdGhlIHNlbGVjdGVkIHByb2R1Y3QgaGFzIHByb21vdGlvbmFsIHByaWNlLlxuICAgICAgICAgKiAgICAgICAgICAgICAqXG4gICAgICAgICAqIEByZXR1cm4gYm9vbGVhbiB0cnVlIGlmIHByb21vdGlvbmFsIHByaWNlIGlzIHByZXNlbnQgb3RoZXJ3aXNlIGZhbHNlXG4gICAgICAgICAqL1xuICAgICAgICBpc1Byb21vUHJpY2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAodGhpcy5zZWxlY3RlZFZhciAhPSBudWxsID8gdGhpcy5zZWxlY3RlZFZhci5wcmljaW5nLmlzUHJvbW9QcmljZSA6IG1vZGVsLnByaWNpbmcuaXNQcm9tb1ByaWNlKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogcmVjZWl2ZXMgMiBvciAxIHZhcmlhdGlvbiBhdHRyaWJ1dGUgdmFsdWVzIGFuZCB0cmllcyB0byBmaWd1cmUgb3V0IGlmIHRoZXJlIGlzIGEgdmFyaWFudCB3aXRoIHRoZXNlIHZhbHVlcy5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHZhbDEgLSB2YXJpYXRpb24gYXR0cmlidXRlIHZhbHVlXG4gICAgICAgICAqIEBwYXJhbSB2YWwyIC0gdmFyaWF0aW9uIGF0dHJpYnV0ZSB2YWx1ZVxuICAgICAgICAgKiBAcmV0dXJuIGJvb2xlYW4gLSB0cnVlIGlmIGEgdmFyaWFudCBleGlzdHMgb3RoZXJ3aXNlIGZhbHNlXG4gICAgICAgICAqL1xuICAgICAgICBpc1ZhcmlhdGlvbjogZnVuY3Rpb24gKHZhbDEsIHZhbDIpIHtcbiAgICAgICAgICAgIHZhciB2YXJpYW50ID0gbnVsbDtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtb2RlbC52YXJpYXRpb25zLnZhcmlhbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyaWFudCA9IG1vZGVsLnZhcmlhdGlvbnMudmFyaWFudHNbaV07XG4gICAgICAgICAgICAgICAgaWYgKHZhcmlhbnQuYXR0cmlidXRlc1t2YWwxLmlkXSA9PSB2YWwxLnZhbCAmJiAodmFsMiA9PSB1bmRlZmluZWQgfHwgdmFyaWFudC5hdHRyaWJ1dGVzW3ZhbDIuaWRdID09IHZhbDIudmFsKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIGFwcGFyZW50bHkgdGhlcmUgaXMgbm8gd2F5IHRvIGJyZWFrIG91dCBvZiBqUXVlcnkuZWFjaCBoYWxmIHdheSA6KFxuICAgICAgICAgICAgIGpRdWVyeS5lYWNoKG1vZGVsLnZhcmlhdGlvbnMudmFyaWFudHMsIGZ1bmN0aW9uKCl7XG5cdFx0XHRcdGlmICghZm91bmQgJiYgdGhpcy5hdHRyaWJ1dGVzW3ZhbDEuaWRdID09IHZhbDEudmFsICYmIHRoaXMuYXR0cmlidXRlc1t2YWwyLmlkXSA9PSB2YWwyLnZhbCkge1xuXHRcdFx0XHRcdGZvdW5kID0gdHJ1ZTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdH0pOyovXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGZpbmQgMCBvciBtb3JlIHZhcmlhbnRzIG1hdGNoaW5nIHRoZSBnaXZlbiBhdHRyaWJzIG9iamVjdChzKSBhbmQgaW4gc3RvY2tcbiAgICAgICAgICogcmV0dXJuIG51bGwgb3IgZm91bmQgdmFyaWFudHNcbiAgICAgICAgICovXG4gICAgICAgIGZpbmRWYXJpYXRpb25zOiBmdW5jdGlvbiAoYXR0ciwgdmFyaWFudHMpIHtcbiAgICAgICAgICAgIHZhciBmb3VuZFZhcmlhbnRzID0gbmV3IEFycmF5KCk7XG4gICAgICAgICAgICB2YXJpYW50cyA9IHZhcmlhbnRzIHx8IG1vZGVsLnZhcmlhdGlvbnMudmFyaWFudHM7XG5cbiAgICAgICAgICAgIHZhciB2YXJpYW50ID0gbnVsbDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFyaWFudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXJpYW50ID0gdmFyaWFudHNbaV07XG4gICAgICAgICAgICAgICAgaWYgKCh2YXJpYW50LmF0dHJpYnV0ZXNbYXR0ci5pZF0gPT09IGF0dHIudmFsKSAvKiYmXG5cdFx0XHRcdFx0XHQvLyh2YXJpYW50LmluU3RvY2sgfHwgKHZhcmlhbnQuYXZTdGF0dXMgPT09IGFwcC5jb25zdGFudHMuQVZBSUxfU1RBVFVTX0JBQ0tPUkRFUiAmJiB2YXJpYW50LkFUUyA+IDApIHx8ICh2YXJpYW50LmF2U3RhdHVzID09PSBhcHAuY29uc3RhbnRzLkFWQUlMX1NUQVRVU19QUkVPUkRFUiAmJiB2YXJpYW50LkFUUyA+IDApKSovXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvdW5kVmFyaWFudHMucHVzaCh2YXJpYW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBmb3VuZFZhcmlhbnRzO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBmaW5kIGEgdmFyaWFudCB3aXRoIHRoZSBnaXZlbiBhdHRyaWJzIG9iamVjdFxuICAgICAgICAgKiByZXR1cm4gbnVsbCBvciBmb3VuZCB2YXJpYXRpb24ganNvblxuICAgICAgICAgKi9cbiAgICAgICAgZmluZFZhcmlhdGlvbjogZnVuY3Rpb24gKGF0dHJzKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuY2hlY2tBdHRycyhhdHRycykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGF0dHJUb1N0ciA9IGZ1bmN0aW9uIChhdHRyT2JqKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9ICcnO1xuICAgICAgICAgICAgICAgIGpRdWVyeS5lYWNoKG1vZGVsLnZhcmlhdGlvbnMuYXR0cmlidXRlcywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gYXR0ck9ialt0aGlzLmlkXTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIGF0dHJzU3RyID0gYXR0clRvU3RyKGF0dHJzKTtcbiAgICAgICAgICAgIHZhciB2YXJpYW50ID0gbnVsbDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbW9kZWwudmFyaWF0aW9ucy52YXJpYW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhcmlhbnQgPSBtb2RlbC52YXJpYXRpb25zLnZhcmlhbnRzW2ldO1xuICAgICAgICAgICAgICAgIGlmIChhdHRyVG9TdHIodmFyaWFudC5hdHRyaWJ1dGVzKSA9PT0gYXR0cnNTdHIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhcmlhbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8gZmluZCBhIHZhcmlhdGlvbiB3aXRoIHRoZSBnaXZlIGlkIG90aGVyd2lzZSBlbXB0eSBvYmplY3RcbiAgICAgICAgZmluZFZhcmlhdGlvbkJ5SWQ6IGZ1bmN0aW9uIChpZCkge1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1vZGVsLnZhcmlhdGlvbnMudmFyaWFudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAvLyBJRTcgZG9lcyBOT1Qgc3VwcG9ydCB0aGlzISEhXG4gICAgICAgICAgICAgICAgLy9mb3IgZWFjaCh2YXIgdmFyaWF0aW9uIGluIG1vZGVsLnZhcmlhdGlvbnMudmFyaWFudHMpIHtcbiAgICAgICAgICAgICAgICB2YXIgdmFyaWF0aW9uID0gbW9kZWwudmFyaWF0aW9ucy52YXJpYW50c1tpXTtcbiAgICAgICAgICAgICAgICBpZiAodmFyaWF0aW9uICYmIHZhcmlhdGlvbi5pZCA9PT0gaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhcmlhdGlvbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogc2VlIGlmIHRoZSBzcGVjaWZpZWQgYXR0cnMgb2JqZWN0IGhhcyBhbGwgdGhlIHZhcmlhdGlvbiBhdHRyaWJ1dGVzIHByZXNlbnQgaW4gaXRcbiAgICAgICAgICogcmV0dXJuIHRydWUvZmFsc2VcbiAgICAgICAgICovXG4gICAgICAgIGNoZWNrQXR0cnM6IGZ1bmN0aW9uIChhdHRycykge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtb2RlbC52YXJpYXRpb25zLmF0dHJpYnV0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoYXR0cnNbbW9kZWwudmFyaWF0aW9ucy5hdHRyaWJ1dGVzW2ldLmlkXSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSxcblxuICAgICAgICAvLyBnaXZlbiBhbiBpZCwgcmV0dXJuIGF0dHIgZGVmaW5pdGlvbiBmcm9tIG1vZGVsLnZhcmlhdGlvbnMuYXR0cmlidXRlc1xuICAgICAgICBnZXRBdHRyQnlJRDogZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1vZGVsLnZhcmlhdGlvbnMuYXR0cmlidXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChtb2RlbC52YXJpYXRpb25zLmF0dHJpYnV0ZXNbaV0uaWQgPT09IGlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtb2RlbC52YXJpYXRpb25zLmF0dHJpYnV0ZXNbaV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICB9LFxuXG4gICAgICAgIC8vIHJldHVybnMgY3VycmVudCBhdmFpbGFiaWxpdHkgc3RhdHVzIGUuZy4gaW5fc3RvY2ssIHByZW9yZGVyIGV0Yy5cbiAgICAgICAgZ2V0QXZTdGF0dXM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICgodGhpcy52YXJpYW50IHx8IHRoaXMubWFzdGVyKSAmJiB0aGlzLnNlbGVjdGVkVmFyICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZFZhci5hdlN0YXR1cztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1vZGVsLmF2U3RhdHVzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIC8vIHJldHVybiBhdmFpbGFibGUgdG8gc2VsbCBxdHlcbiAgICAgICAgZ2V0QVRTOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoKHRoaXMudmFyaWFudCB8fCB0aGlzLm1hc3RlcikgJiYgdGhpcy5zZWxlY3RlZFZhciAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0ZWRWYXIuQVRTO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbW9kZWwuQVRTO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIC8vIHJldHVybiBub24tY2xvc2VvdXQgbG93IHF0eSB0aHJlc2hvbGRcbiAgICAgICAgZ2V0Tm9uQ2xvc2VvdXRMb3dRdHlUaHJlc2hvbGQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICgodGhpcy52YXJpYW50IHx8IHRoaXMubWFzdGVyKSAmJiB0aGlzLnNlbGVjdGVkVmFyICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZFZhci5ub25DbG9zZW91dExvd1F0eVRocmVzaG9sZDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1vZGVsLm5vbkNsb3Nlb3V0TG93UXR5VGhyZXNob2xkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIC8vIHJldHVybiB0aGUgcXVhbnRpdHkgdGhhdCB3YXMgdXNlZCB0byBjYWxjdWxhdGUgYXZhaWxhYmlsaXR5XG4gICAgICAgIGdldEF2YWlsYWJpbGl0eVF0eTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCh0aGlzLnZhcmlhbnQgfHwgdGhpcy5tYXN0ZXIpICYmIHRoaXMuc2VsZWN0ZWRWYXIgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkVmFyLmF2U3RhdHVzUXVhbnRpdHk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBtb2RlbC5hdlN0YXR1c1F1YW50aXR5O1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIC8vIHJldHVybiB0aGUgYXZhaWxhYmlsaXR5IGxldmVsc1xuICAgICAgICBnZXRBdkxldmVsczogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCh0aGlzLnZhcmlhbnQgfHwgdGhpcy5tYXN0ZXIpICYmIHRoaXMuc2VsZWN0ZWRWYXIgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkVmFyLmF2TGV2ZWxzO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbW9kZWwuYXZMZXZlbHM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8gcmV0dXJucyBpbiBzdG9jayBkYXRlXG4gICAgICAgIGdldEluU3RvY2tEYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoKHRoaXMudmFyaWFudCB8fCB0aGlzLm1hc3RlcikgJiYgdGhpcy5zZWxlY3RlZFZhciAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0ZWRWYXIuaW5TdG9ja0RhdGU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBtb2RlbC5pblN0b2NrRGF0ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICAvLyBzZXQgdGhlIGFkZCB0byBjYXJ0IGJ1dHRvbiBhbmQgYmluZCBoYW5kbGVycyBmb3IgYnVuZGxlL3Byb2R1Y3Qgc2V0XG4gICAgICAgIGdldFN1YlByb2R1Y3RzQmluZGluZzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRoaXNQcm9kdWN0ID0gdGhpcztcblxuICAgICAgICAgICAgLy8gRm9yIGJ1bmRsZXMgYW5kIHByb2R1Y3Qtc2V0cywgZW5hYmxlIG9yIGRpc2FibGUgdGhlIGFkZC10by1jYXJ0IGJ1dHRvbi5cbiAgICAgICAgICAgIC8vIFRoZSBidXR0b24gc2hvdWxkIGJlIGRpc2FibGVkIGlmIHRoZSBhZGQtdG8tY2FydCBidXR0b24gb2YgYW55IHN1YnByb2R1Y3QgaXMgZGlzYWJsZWQsIGVuYWJsZWQgb3RoZXJ3aXNlLlxuICAgICAgICAgICAgLy8gRm9yIHByb2R1Y3Qtc2V0cywgZGlzcGxheSBhIHByaWNlIHdoaWNoIGlzIHRoZSBzdW0gb2YgdGhlIHNldC1wcm9kdWN0cyBwcmljZXMgYXMgbG9uZyBhcyB0aGUgYWRkLXRvLWNhcnQgYnV0dG9uIGlzIGVuYWJsZWQuXG4gICAgICAgICAgICBpZiAobW9kZWwuYnVuZGxlIHx8IG1vZGVsLnByb2R1Y3RTZXQpIHtcblxuICAgICAgICAgICAgICAgIHZhciBidW5kbGVBMkNFbmFibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdmFyIHByaWNlID0gbmV3IE51bWJlcigpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpc1Byb2R1Y3Quc3ViUHJvZHVjdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN1YlByb2R1Y3QgPSB0aGlzUHJvZHVjdC5zdWJQcm9kdWN0c1tpXTtcbiAgICAgICAgICAgICAgICAgICAgYnVuZGxlQTJDRW5hYmxlZCA9IHN1YlByb2R1Y3QuaXNBMkNFbmFibGVkKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghYnVuZGxlQTJDRW5hYmxlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBjb2xsZWN0IHByaWNlIGluZm9cbiAgICAgICAgICAgICAgICAgICAgcHJpY2UgKz0gbmV3IE51bWJlcihzdWJQcm9kdWN0LmdldFByaWNlKCkpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIGlmIGFueSBvZiB0aGUgYnVuZGxlZCBwcm9kdWN0IGhhcyBpdHMgQTJDIGJ1dHRvbiBkaXNhYmxlZCB0aGVuIHRoZSBidW5kbGUgaXMgbm90IG9yZGVyYWJsZVxuICAgICAgICAgICAgICAgIGlmICghYnVuZGxlQTJDRW5hYmxlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc2FibGVBMkNCdXR0b24oKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuYWJsZUEyQ0J1dHRvbigpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIHNob3cgdG90YWwgcHJpY2UgZXhjZXB0IGZvciBhIGJ1bmRsZVxuICAgICAgICAgICAgICAgICAgICBpZiAoIW1vZGVsLmJ1bmRsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3Quc2hvd1VwZGF0ZWRQcmljZShwcmljZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGJpbmQgQWRkdG9DYXJ0RGlzYWJsZWQgZXZlbnQgZm9yIGVhY2ggc3VicHJvZHVjdCAoYnVuZGxlIG9yIHByb2R1Y3Qgc2V0KVxuICAgICAgICAgICAgalF1ZXJ5LmVhY2godGhpc1Byb2R1Y3Quc3ViUHJvZHVjdHMsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBqUXVlcnkodGhpcykuYmluZCgnQWRkdG9DYXJ0RGlzYWJsZWQnLCB7fSxcbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIEV2ZW50IGhhbmRsZXIgd2hlbiBhIHN1YnByb2R1Y3Qgb2YgYSBwcm9kdWN0IHNldCBvciBhIGJ1bmRsZSBpcyBzZWxlY3RlZC5cbiAgICAgICAgICAgICAgICAgICAgICogZGlzYWJsZSB0aGUgYWRkIHRvIGNhcnQgYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzUHJvZHVjdC5kaXNhYmxlQTJDQnV0dG9uKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIHNlZSBpZiBoYXZlIGFueSBzdWItcHJvZHVjdHMgYW5kIGJpbmQgQWRkdG9DYXJ0RW5hYmxlZCBldmVudFxuICAgICAgICAgICAgalF1ZXJ5LmVhY2godGhpc1Byb2R1Y3Quc3ViUHJvZHVjdHMsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBqUXVlcnkodGhpcykuYmluZCgnQWRkdG9DYXJ0RW5hYmxlZCcsIHt9LFxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogRXZlbnQgaGFuZGxlciB3aGVuIGEgc3VicHJvZHVjdCBvZiBhIHByb2R1Y3Qgc2V0IG9yIGEgYnVuZGxlIGlzIHNlbGVjdGVkLlxuICAgICAgICAgICAgICAgICAgICAgKiBCYXNpY2FsbHkgZW5hYmxlIHRoZSBhZGQgdG8gY2FydCBidXR0b24gb3IgZG8gb3RoZXIgIHJlZnJlc2ggaWYgbmVlZGVkIGxpa2UgcHJpY2UgZXRjLlxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZW5hYmxlIEFkZCB0byBjYXJ0IGJ1dHRvbiBpZiBhbGwgdGhlIHN1YiBwcm9kdWN0cyBoYXZlIGJlZW4gc2VsZWN0ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFuZCBzaG93IHRoZSB1cGRhdGVkIHByaWNlXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW5hYmxlQWRkVG9DYXJ0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdWJQcm9kdWN0cyA9IHRoaXNQcm9kdWN0LnN1YlByb2R1Y3RzO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByaWNlID0gbmV3IE51bWJlcigpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN1YlByb2R1Y3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCgoc3ViUHJvZHVjdHNbaV0udmFyaWFudCB8fCBzdWJQcm9kdWN0c1tpXS5tYXN0ZXIpICYmIHN1YlByb2R1Y3RzW2ldLnNlbGVjdGVkVmFyID09IG51bGwpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICghc3ViUHJvZHVjdHNbaV0uYnVuZGxlZCAmJiAoc3ViUHJvZHVjdHNbaV0uc2VsZWN0ZWRPcHRpb25zLlF1YW50aXR5ID09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViUHJvZHVjdHNbaV0uc2VsZWN0ZWRPcHRpb25zLlF1YW50aXR5IDw9IDApKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmFibGVBZGRUb0NhcnQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YlByb2R1Y3RzW2ldLnNlbGVjdGVkVmFyICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YlByb2R1Y3RzW2ldLnNlbGVjdGVkT3B0aW9ucy5waWQgPSBzdWJQcm9kdWN0c1tpXS5zZWxlY3RlZFZhci5waWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJQcm9kdWN0c1tpXS5zZWxlY3RlZE9wdGlvbnMucGlkID0gc3ViUHJvZHVjdHNbaV0ucGlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTXVsdGlwbHkgdGhlIHN1YnByb2R1Y3QgcXVhbnRpdHktb25lIHByaWNlIGJ5IHRoZSBlbnRlcmVkIHF1YW50aXR5LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbXBvcnRhbnQgbm90ZTogIFRoaXMgdmFsdWUgd2lsbCBiZSBpbmNvcnJlY3QgaWYgc3VicHJvZHVjdCB1c2VzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRpZXJlZCBwcmljaW5nICEhISEhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdWJwcm9kdWN0UXVhbnRpdHkgPSBzdWJQcm9kdWN0c1tpXS5zZWxlY3RlZE9wdGlvbnMuUXVhbnRpdHk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdWJwcm9kdWN0UXVhbnRpdHkgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJwcm9kdWN0UXVhbnRpdHkgPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlICs9IG5ldyBOdW1iZXIoc3VicHJvZHVjdFF1YW50aXR5ICogc3ViUHJvZHVjdHNbaV0uZ2V0UHJpY2UoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW5hYmxlQWRkVG9DYXJ0ICYmIChtb2RlbC5wcm9kdWN0U2V0IHx8IG1vZGVsLmluU3RvY2spICYmIChwcmljZSA+IDAgfHwgdGhpc1Byb2R1Y3QuaXNQcm9tb1ByaWNlKCkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3QuZW5hYmxlQTJDQnV0dG9uKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzaG93IHRvdGFsIHByaWNlIGV4Y2VwdCBmb3IgYSBidW5kbGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1vZGVsLmJ1bmRsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzUHJvZHVjdC5zaG93VXBkYXRlZFByaWNlKHByaWNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LmRpc2FibGVBMkNCdXR0b24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICAvLyBkZXRlcm1pbmUgaWYgQTJDIGJ1dHRvbiBpcyBlbmFibGVkIG9yIGRpc2FibGVkXG4gICAgICAgIC8vIHRydWUgaWYgZW5hYmxlZCwgZmFsc2Ugb3RoZXJ3aXNlXG4gICAgICAgIGlzQTJDRW5hYmxlZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMudmFyaWFudCB8fCB0aGlzLm1hc3Rlcikge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkVmFyICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICh0aGlzLnNlbGVjdGVkVmFyLmF2U3RhdHVzID09PSBDb25zdGFudHMuQVZBSUxfU1RBVFVTX0lOX1NUT0NLIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkVmFyLmF2U3RhdHVzID09PSBDb25zdGFudHMuQVZBSUxfU1RBVFVTX0JBQ0tPUkRFUiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFZhci5hdlN0YXR1cyA9PT0gQ29uc3RhbnRzLkFWQUlMX1NUQVRVU19QUkVPUkRFUik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChtb2RlbC5hdlN0YXR1cyA9PT0gQ29uc3RhbnRzLkFWQUlMX1NUQVRVU19JTl9TVE9DSyB8fFxuICAgICAgICAgICAgICAgICAgICBtb2RlbC5hdlN0YXR1cyA9PT0gQ29uc3RhbnRzLkFWQUlMX1NUQVRVU19CQUNLT1JERVIgfHxcbiAgICAgICAgICAgICAgICAgICAgbW9kZWwuYXZTdGF0dXMgPT09IENvbnN0YW50cy5BVkFJTF9TVEFUVVNfUFJFT1JERVIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiB3b3JrIGhvcnNlIG9mIHRoZSBwcm9kdWN0IGRldGFpbCBwYWdlIGdldHRpbmcgZXZlcnl0aGluZyB0aWVkIHRvZ2V0aGVyIGkuZS4gYWxsIHRoZSBkeW5hbWljIHN0dWZmXG4gICAgICAgICAqIGFuZCBvbmUgdGltZSBpbml0aWFsaXphdGlvbi4gY2FsbGVkIG9ubHkgT05DRVxuICAgICAgICAgKiBiaW5kIGFsbCB0aGUgcHJvZHVjdCBkaXNwbGF5IGV2ZW50cyBhbmQgaGFuZGxlcnNcbiAgICAgICAgICogbG9hZCB2YXJpYW50cyBpbiBjYXNlIHRoaXMgaXMgYSB2YXJpYXRpb24gcHJvZHVjdFxuICAgICAgICAgKiBiaW5kIHN1YnByb2R1Y3RzIGEyYyBidXR0b24gZW5hYmxlIGV2ZW50IGhhbmRsZXJcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMuY290YWluZXJJZCAtIGlkIG9mIHRoZSBjb250YWluaW5nIGRpdlxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucy5zb3VyY2UgLSBzb3VyY2Ugb2YgdGhpcyBwcm9kdWN0IHNob3cgcmVxdWVzdCwgbWFpbmx5IHF1aWNrdmlld1xuICAgICAgICAgKi9cbiAgICAgICAgc2hvdzogZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIC8vIHByZXNlcnZlIHRoaXMgaW5zdGFuY2VcbiAgICAgICAgICAgIHZhciB0aGlzUHJvZHVjdCA9IHRoaXM7XG5cbiAgICAgICAgICAgIC8vIGJpbmQgVmFyaWF0aW9uc0xvYWRlZCB3aGljaCBnZXRzIGZpcmVkIHdoZW4gdGhlIHZhcmlhdGlvbiBkYXRhIGlzIHJlY2VpdmVkIGZyb20gdGhlIHNlcnZlclxuICAgICAgICAgICAgLy8gYW5kIHdlIG5lZWQgdG8gcmVmcmVzaCB0aGUgdWlcbiAgICAgICAgICAgIGpRdWVyeSh0aGlzKS5iaW5kKCdWYXJpYXRpb25zTG9hZGVkJywge30sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAvLyBlbmFibGUvZGlzYWJsZSB1bmF2YWlsYWJsZSB2YWx1ZXNcbiAgICAgICAgICAgICAgICAvLyBhbmQgc2V0IHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgdmFsdWVzXG4gICAgICAgICAgICAgICAgLy8gcmVzZXQgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCB2YXJpYXRpb24gYXR0cmlidXRlcyBpLmUuIHJlc2V0IHRoZSB1aVxuICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LnJlc2V0VmFyaWF0aW9ucygpO1xuXG4gICAgICAgICAgICAgICAgLy8gY3JlYXRlIHRoZSBkZWZhdWx0IGF2YWlsYWJpbGl0eSBtZXNzYWdlIGJhc2VkIG9uIEFUUyBjb3VudFxuICAgICAgICAgICAgICAgIC8vIGZyb20gdGhlIHZhcmlhbnRzXG4gICAgICAgICAgICAgICAgdmFyIGF0c0NvdW50ID0gZ2V0QVRTKG1vZGVsLnZhcmlhdGlvbnMudmFyaWFudHMpO1xuICAgICAgICAgICAgICAgIGlmIChhdHNDb3VudCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldEF2YWlsYWJpbGl0eU1zZygnPHNwYW4gY2xhc3M9XFwnb3V0LW9mLXN0b2NrXFwnPicgKyBSZXNvdXJjZXNbQ29uc3RhbnRzLkFWQUlMX1NUQVRVU19OT1RfQVZBSUxBQkxFXSArICc8L3NwYW4+Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFdlIHdpbGwgdXNlIHRoaXMgaW4gdGhlIDJuZCBvZiB0aGUgdHdvIGZvbGxvd2luZyBsb29wc1xuICAgICAgICAgICAgICAgIHZhciBzb21lQXJlTm90U2VsZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAvLyBEZXRlcm1pbmUgdGhlIHNlbGVjdGVkIHN0YXRlIG9mIGVhY2ggb3B0aW9uXG4gICAgICAgICAgICAgICAgdmFyICRhdHRyaWJ1dGVzID0galF1ZXJ5KHRoaXNQcm9kdWN0LmNvbnRhaW5lcklkICsgJyAudmFyaWF0aW9uYXR0cmlidXRlcyAuc3dhdGNoZXMsJyArIHRoaXNQcm9kdWN0LmNvbnRhaW5lcklkICsgJyAudmFyaWF0aW9uYXR0cmlidXRlcyAudmFyaWFudGRyb3Bkb3duJyk7XG4gICAgICAgICAgICAgICAgJGF0dHJpYnV0ZXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciAkdGhpcyA9IGpRdWVyeSh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCR0aGlzLmhhc0NsYXNzKCdzd2F0Y2hlcycpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL2lmIGl0IGlzIHN3YXRjaGVzLCBmaW5kIHRoZSBzZWxlY3RlZCBzd2F0Y2hcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkdGhpcy5maW5kKCcuc2VsZWN0ZWQnKS5zaXplKCkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdEJveCA9ICR0aGlzLmZpbmQoJ3NlbGVjdCcpLmdldCgwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKHNlbGVjdEJveCkuZmluZCgnb3B0aW9uJykubGVuZ3RoID09IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHNlbGVjdEJveCkuZmluZCgnb3B0aW9uJykuZXEoMSkucHJvcCgnc2VsZWN0ZWQnLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RCb3guc2VsZWN0ZWRJbmRleCA+PSAwICYmIHNlbGVjdEJveC5vcHRpb25zW3NlbGVjdEJveC5zZWxlY3RlZEluZGV4XS52YWx1ZSAhPSAnJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSkuZWFjaChmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyICR0aGlzID0galF1ZXJ5KHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc29tZUFyZU5vdFNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKS5hZGRDbGFzcygnZnV0dXJlJykuZmluZCgnLnNlbGVjdGVkJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy5maW5kKCcub3B0aW9ud3JhcHBlcicpLnNsaWRlVXAoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoISR0aGlzLmhhc0NsYXNzKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNvbWVBcmVOb3RTZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLmFkZENsYXNzKCdjdXJyZW50Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc29tZUFyZU5vdFNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGl0J3Mgbm90IHRoZSBsYXN0IGl0ZW0sIGhpZGUgdGhlIHNlbGVjdGlvbnMgYW5kIGxlYXZlIHRoZSBidXR0b24gZW5hYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRhdHRyaWJ1dGVzLnNpemUoKSAtIDEgIT0gaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy5maW5kKCcub3B0aW9ud3JhcHBlcicpLnNsaWRlVXAoKS5maW5kKCdidXR0b24nKS5yZW1vdmVDbGFzcygnbm9uLXNlbGVjdGFibGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9pdCBpcyB0aGUgbGFzdCBpdGVtLCBhbmQgaXQncyBzZWxlY3RlZCwgc28gaXQncyBjdXJyZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJykuYWRkQ2xhc3MoJ2N1cnJlbnQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8gR3JhYiB0aGUgY3VycmVudGx5IHNlbGVjdGVkIHZhbHVlcyBhbmQgdXBkYXRlIHRoZSBVSVxuICAgICAgICAgICAgICAgIC8vIHN3YXRjaCB2YXJpYXRpb24gYXR0cmlidXRlc1xuICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzUHJvZHVjdC5jb250YWluZXJJZCArICcgLnZhcmlhdGlvbmF0dHJpYnV0ZXMgLnN3YXRjaGVzLCAnICsgdGhpc1Byb2R1Y3QuY29udGFpbmVySWQgKyAnIC52YXJpYXRpb25hdHRyaWJ1dGVzIC52YXJpYW50ZHJvcGRvd24gc2VsZWN0JykuZWFjaChmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgJHN3YXRjaCA9IGpRdWVyeSh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzd2F0Y2hJZCA9ICRzd2F0Y2guZGF0YSgnZGF0YScpOyAgLy8gZGF0YSBpcyBpZCBzZXQgdmlhIGFwcC5oaWRkZW5EYXRhIGFwaVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobW9kZWwudmFyaWF0aW9ucy52YXJpYW50cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5zZWxlY3RlZEluZGV4ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc3dhdGNoLmZpbmQoJ2Euc3dhdGNoYW5jaG9yJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSBqUXVlcnkodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3ZhciBwYXJlbnRMaSA9ICR0aGlzLnBhcmVudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmluZCBBIHZhcmlhdGlvbiB3aXRoIHRoaXMgdmFsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmlsdGVyZWRWYXJpYW50cyA9IHRoaXNQcm9kdWN0LmZpbmRWYXJpYXRpb25zKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogc3dhdGNoSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsOiB0aGlzLnRpdGxlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBtb2RlbC52YXJpYXRpb25zLnZhcmlhbnRzKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzd2F0Y2guaGFzQ2xhc3MoJ2NvbG9yJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWdldEF2YWlsYWJpbGl0eShmaWx0ZXJlZFZhcmlhbnRzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHRoaXMuZmluZCgnLm91dC1vZi1zdG9jaycpLnNpemUoKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMucHJlcGVuZCgnPHNwYW4gY2xhc3M9XFwnb3V0LW9mLXN0b2NrXFwnPjwvc3Bhbj4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoJy5vdXQtb2Ytc3RvY2snKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZ2V0QXZhaWxhYmlsaXR5KGZpbHRlcmVkVmFyaWFudHMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkdGhpcy5maW5kKCdzcGFuJykudGV4dCgpLmluZGV4T2YoJ091dCBvZiBTdG9jaycpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCR0aGlzLmZpbmQoJ3NwYW4nKS50ZXh0KCkuaW5kZXhPZignTmV3JykgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMuZmluZCgnc3BhbicpLmFkZENsYXNzKCdvdXRvZnN0b2NrcGRwJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMuZmluZCgnc3BhbicpLnRleHQoJHRoaXMuZmluZCgnc3BhbicpLnRleHQoKSArICcgLyBPdXQgb2YgU3RvY2snKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMuZmluZCgnc3BhbicpLmFkZENsYXNzKCdvdXRvZnN0b2NrcGRwJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMuZmluZCgnc3BhbicpLnRleHQoJ091dCBvZiBTdG9jaycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCR0aGlzLmZpbmQoJ3NwYW4nKS50ZXh0KCkuaW5kZXhPZignTmV3JykgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy5maW5kKCdzcGFuJykudGV4dCgkdGhpcy5maW5kKCdzcGFuJykudGV4dCgpLnJlcGxhY2UoJyAvIE91dCBvZiBTdG9jaycsICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoJ3NwYW4nKS50ZXh0KCR0aGlzLmZpbmQoJ3NwYW4nKS50ZXh0KCkucmVwbGFjZSgnT3V0IG9mIFN0b2NrJywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc3dhdGNoLmZpbmQoJ29wdGlvbicpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpbHRlcmVkVmFyaWFudHMgPSB0aGlzUHJvZHVjdC5maW5kVmFyaWF0aW9ucyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBzd2F0Y2hJZC5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsOiB0aGlzLnZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgbW9kZWwudmFyaWF0aW9ucy52YXJpYW50cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFnZXRBdmFpbGFiaWxpdHkoZmlsdGVyZWRWYXJpYW50cykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50ZXh0ID0gdGhpcy50ZXh0ICsgJyAtIE91dCBvZiBTdG9jayc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuc2VsZWN0ZWRJbmRleCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0aGlzU3dhdGNoID0galF1ZXJ5KHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBkcFZhcklkID0gdGhpc1N3YXRjaC5kYXRhKCdkYXRhJyk7IC8vIGRhdGEgaXMgaWQgd2hpY2ggaXMgc2V0IHZpYSBhcHAuaGlkZGVuRGF0YSBvbmxvYWRcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ3JhYiB0aGUgY3VycmVudGx5IHNlbGVjdGVkIHZhcmlhdGlvbiBhdHRyaWJ1dGUgdmFsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzU3dhdGNoLmZpbmQoJy5zZWxlY3RlZCBhJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3QudmFyQXR0clNlbGVjdGVkKHtkYXRhOiB7aWQ6IHBkcFZhcklkLCB2YWw6IHRoaXMudGl0bGV9fSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vbi1zd2F0Y2ggdmFyaWF0aW9uIGF0dHJpYnV0ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkSW5kZXggPj0gMCAmJiB0aGlzLm9wdGlvbnNbdGhpcy5zZWxlY3RlZEluZGV4XS52YWx1ZSAhPSAnJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGdyYWIgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCB2YWwgYnkgZmlyaW5nIHVwZGF0ZSB1aSBhcGlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3aGVuIGRlYWxpbmcgd2l0aCBhIHNlbGVjdCBlbGVtZW50LCBkYXRhIHJldHVybnMgYW4gb2JqZWN0IHNvIHdlIG11c3QgYXNrIGZvciBpZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LnZhckF0dHJTZWxlY3RlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBqUXVlcnkodGhpcykuZGF0YSgnZGF0YScpLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsOiB0aGlzLm9wdGlvbnNbdGhpcy5zZWxlY3RlZEluZGV4XS52YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgLy8gbG9vcCB0aHJ1IGFsbCBub24tZHJvcGRvd24gdWkgZWxlbWVudHMgaS5lLiBzd2F0Y2hlcyBlLmcuIGNvbG9yLCB3aWR0aCwgbGVuZ3RoIGV0Yy5cbiAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMuY29udGFpbmVySWQgKyBcIiAudmFyaWF0aW9uYXR0cmlidXRlcyAuc3dhdGNoZXNcIikuZWFjaChmdW5jdGlvbigpe1xuXG5cdFx0XHRcdH0pOyovXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5jb250YWluZXJJZCA9ICcjJyArIG9wdGlvbnMuY29udGFpbmVySWQ7XG4gICAgICAgICAgICB2YXIgaXNRdWlja1ZpZXcgPSBmYWxzZTtcblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuc291cmNlICYmIG9wdGlvbnMuc291cmNlID09ICdxdWlja3ZpZXcnKSB7XG4gICAgICAgICAgICAgICAgaXNRdWlja1ZpZXcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVySWQgPSAnLnVpLWRpYWxvZyAjJyArIG9wdGlvbnMuY29udGFpbmVySWQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG15Q29udGFpbmVySWQgPSB0aGlzLmNvbnRhaW5lcklkO1xuXG4gICAgICAgICAgICAvLyBiaW5kIGNsaWNrIGhhbmRsZXJzIGZvciBwcmV2L25leHQgbGlua3NcbiAgICAgICAgICAgIGdldE5hdkxpbmtzKCk7XG5cbiAgICAgICAgICAgIC8vIHNpemUgY2hhcnQgY2xpY2sgYmluZGluZ1xuICAgICAgICAgICAgZ2V0U2l6ZUNoYXJ0KCk7XG5cbiAgICAgICAgICAgIC8vIHZhcmlhdGlvbiBhdHRyaWJ1dGVzIGhhbmRsaW5nIGluIGNhc2UgaXQgaXMgYSBtYXN0ZXIgb3IgYSB2YXJpYW50IHByb2R1Y3RcbiAgICAgICAgICAgIGlmIChtb2RlbC5tYXN0ZXIgfHwgbW9kZWwudmFyaWFudCkge1xuICAgICAgICAgICAgICAgIGxvYWRWYXJpYW50cyh0aGlzKTsgLy8gbWFrZSBhIHNlcnZlciBjYWxsIHRvIGxvYWQgdGhlIHZhcmlhbnRzLCB0aGlzIGlzIGR1ZSB0byB0aGUgcGVyZm9ybWFuY2UgcmVhc29uc1xuICAgICAgICAgICAgICAgIC8vIG1lYW53aGlsZSBkaXNwbGF5IHRoZSBhdmFpbGFibGUgdmFyaWF0aW9uIGF0dHJpYnV0ZXNcblxuICAgICAgICAgICAgICAgIC8vIGJpbmQgdGhlIFwibmV4dFwiIGJ1dHRvbnMgaW4gdGhlIHBpY2tlclxuICAgICAgICAgICAgICAgIGpRdWVyeSgnYnV0dG9uLm5leHQnKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIC8qKnZhciAkdGhpcyA9IGpRdWVyeSh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgIGlmKCEkdGhpcy5oYXNDbGFzcyhcIm5vbi1zZWxlY3RhYmxlXCIpKSB7XG5cdFx0XHRcdFx0JHRoaXMuY2xvc2VzdChcIi5zd2F0Y2hlcywgLnZhcmlhbnRkcm9wZG93blwiKS5maW5kKFwiLm9wdGlvbndyYXBwZXJcIikuc2xpZGVVcCg0MDAsZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRcdGpRdWVyeSh0aGlzKS5jbG9zZXN0KFwiLnN3YXRjaGVzLCAudmFyaWFudGRyb3Bkb3duXCIpXG5cdFx0XHRcdFx0XHRcdC5yZW1vdmVDbGFzcyhcImN1cnJlbnRcIikuYWRkQ2xhc3MoXCJzZWxlY3RlZFwiKVxuXHRcdFx0XHRcdFx0XHQubmV4dFVudGlsKFwiLnN3YXRjaGVzLCAudmFyaWFudGRyb3Bkb3duXCIpLm5leHQoKVxuXHRcdFx0XHRcdFx0XHRcdC5hZGRDbGFzcyhcImN1cnJlbnRcIikucmVtb3ZlQ2xhc3MoXCJmdXR1cmVcIilcblx0XHRcdFx0XHRcdFx0XHRcdC5maW5kKFwiLm9wdGlvbndyYXBwZXJcIikuc2xpZGVEb3duKCkuZmluZCgnc2VsZWN0JykuY2hhbmdlKCk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSovXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvL2JpbmQgdGhlIFwicHJldmlvdXNcIiBidXR0b25zIGluIHRoZSBwaWNrZXJcbiAgICAgICAgICAgICAgICBqUXVlcnkoJ2EucHJldmlvdXMnKS5jbGljayhmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNsb3Nlc3QoJy5zd2F0Y2hlcywgLnZhcmlhbnRkcm9wZG93bicpXG4gICAgICAgICAgICAgICAgICAgICAgICAucHJldlVudGlsKCcuc3dhdGNoZXMsIC52YXJpYW50ZHJvcGRvd24nKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnByZXYoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQoJ2EuZmlsdGVyJykuY2xpY2soKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAkKCcuTWFnaWNab29tIGltZy5wcmltYXJ5LWltYWdlJykuYmluZCgnY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJy5uZXctc3dpbSwub2xkLXN3aW0nKS5hZGRDbGFzcygnc3dpbUhpZGUnKTtcblxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vdmFyIHpvb21lZENvbnRlbnQgPSAkKCcubXotZXhwYW5kLXN0YWdlJykuaHRtbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLm16LWJ1dHRvbi1jbG9zZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcubmV3LXN3aW0sLm9sZC1zd2ltJykucmVtb3ZlQ2xhc3MoJ3N3aW1IaWRlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyBjbGlja2luZyBvbiBhIHByZXZpb3VzIHN0ZXBcbiAgICAgICAgICAgICAgICBqUXVlcnkoJy52YXJpYXRpb25hdHRyaWJ1dGVzJykuZGVsZWdhdGUoJy5zZWxlY3RlZCBhLmZpbHRlcicsICdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyICR0aGlzID0galF1ZXJ5KHRoaXMpLmNsb3Nlc3QoJy5zZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgICAgICBqUXVlcnkoJy52YXJpYXRpb25hdHRyaWJ1dGVzIC5zd2F0Y2hlcywudmFyaWF0aW9uYXR0cmlidXRlcyAudmFyaWFudGRyb3Bkb3duJykucmVtb3ZlQ2xhc3MoJ2N1cnJlbnQnKTtcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJykuYWRkQ2xhc3MoJ2N1cnJlbnQnKTtcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMubmV4dEFsbCgnLnN3YXRjaGVzLCAudmFyaWFudGRyb3Bkb3duJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgJHZhcmlhbnQgPSBqUXVlcnkodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkdmFyaWFudC5hZGRDbGFzcygnZnV0dXJlJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHZhcmlhbnQuaGFzQ2xhc3MoJ3N3YXRjaGVzJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdmFyaWFudC5maW5kKCcuc2VsZWN0ZWQgYScpLmNsaWNrKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCR2YXJpYW50Lmhhc0NsYXNzKCd2YXJpYW50ZHJvcGRvd24nKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkc2VsZWN0ID0gJHZhcmlhbnQuZmluZCgnc2VsZWN0Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzZWxlY3QuZmluZCgnb3B0aW9uJykuc2l6ZSgpID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2VsZWN0LnZhbCgnJykuY2hhbmdlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5maW5kKCcuc3dhdGNoZXNkaXNwbGF5IC5zZWxlY3RlZCBhJykuY2xpY2soKTtcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5maW5kKCdzZWxlY3QnKS52YWwoJycpO1xuXG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeSgnLnZhcmlhdGlvbmF0dHJpYnV0ZXMnKS5maW5kKCcuZnV0dXJlIC5vcHRpb253cmFwcGVyJykuc2xpZGVVcCg0MDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSgnLmN1cnJlbnQgLm9wdGlvbndyYXBwZXInKS5zbGlkZURvd24oNDAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuZmlsdGVyIC52YWx1ZScpLnRleHQoJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBqUXVlcnkoJy52YXJpYXRpb25hdHRyaWJ1dGVzJykuZmluZCgnLmN1cnJlbnQgLm9wdGlvbndyYXBwZXInKS5zbGlkZURvd24oNDAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5jdXJyZW50JykuZmluZCgnLmZpbHRlciAudmFsdWUnKS50ZXh0KCcnKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBiaW5kIHRoZSBcImxlYXJuIG1vcmVcIiBsaW5rc1xuICAgICAgICAgICAgICAgIGpRdWVyeSgnc3Bhbi5sZWFybm1vcmUgYScpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gYWRkIGxlYXJuIG1vcmUgZGlhbG9nIGNvbnRhaW5lciBkaXYgaWYgaXRzIG5vdCBhZGRlZCB5ZXRcbiAgICAgICAgICAgICAgICAgICAgLy8gb25seSBhZGRlZCBvbmNlXG4gICAgICAgICAgICAgICAgICAgIGlmIChqUXVlcnkoJyNsZWFybk1vcmVEaWFsb2cnKS5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KCc8ZGl2PjwvZGl2PicpLmF0dHIoJ2lkJywgJ2xlYXJuTW9yZURpYWxvZycpLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGxlYXJuTW9yZURpYWxvZyA9IGRpYWxvZy5jcmVhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICdsZWFybk1vcmVEaWFsb2cnLCBvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiA1MzAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDgwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogUmVzb3VyY2VzLlNJWkVDSEFSVF9USVRMRVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBsZWFybk1vcmVEaWFsb2cuZGlhbG9nKCdvcGVuJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gbWFrZSB0aGUgc2VydmVyIGNhbGwgdG8gbG9hZCB0aGUgbGVhcm4gbW9yZSBodG1sXG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeSgnI2xlYXJuTW9yZURpYWxvZycpLmxvYWQodGhpcy5ocmVmKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIGxvb3AgdGhydSBhbGwgdGhlIHN3YXRjaGVzIGFuZCBiaW5kIGV2ZW50cyBldGMuXG4gICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXNQcm9kdWN0LmNvbnRhaW5lcklkICsgJyAudmFyaWF0aW9uYXR0cmlidXRlcyAuc3dhdGNoZXMnKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRoaXNTd2F0Y2ggPSBqUXVlcnkodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwZHBWYXJJZCA9IHRoaXNTd2F0Y2guZGF0YSgnZGF0YScpOyAvLyBkYXRhIGlzIGlkIHdoaWNoIGlzIHNldCB2aWEgYXBwLmhpZGRlbkRhdGEgb25sb2FkXG4gICAgICAgICAgICAgICAgICAgIHZhciBhdHRyRGVmID0gdGhpc1Byb2R1Y3QuZ2V0QXR0ckJ5SUQocGRwVmFySWQpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICghYXR0ckRlZikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gY2xpY2sgaGFuZGxlciBmb3Igc3dhdGNoZXMgbGlua3NcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhckV2ZW50SGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGhpc09iaiA9IGpRdWVyeSh0aGlzKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZS5kYXRhID0ge2lkOiBwZHBWYXJJZCwgdmFsOiB0aGlzLnRpdGxlfTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXNPYmoucGFyZW50KCkuaGFzQ2xhc3MoJ3Vuc2VsZWN0YWJsZScpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzT2JqLnBhcmVudCgpLmhhc0NsYXNzKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVzZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmRhdGEgPSB7aWQ6IHBkcFZhcklkLCB2YWw6IG51bGx9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNPYmoucGFyZW50KCkucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2xlYXIgdGhlIGN1cnJlbnQgc2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3QudmFyQXR0clNlbGVjdGVkKGUpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3QucmVzZXRWYXJpYXRpb25zKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlbGVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuZGF0YSA9IHtpZDogcGRwVmFySWQsIHZhbDogdGhpcy50aXRsZX07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIHRoZSBjdXJyZW50IHNlbGVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNTd2F0Y2guZmluZCgnLnNlbGVjdGVkJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXNPYmouY2xvc2VzdCgnLnN3YXRjaGVzJykubmV4dFVudGlsKCcuc3dhdGNoZXMsIC52YXJpYW50ZHJvcGRvd24nKS5uZXh0KCkuc2l6ZSgpID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzT2JqLnBhcmVudCgpLmFkZENsYXNzKCdzZWxlY3RlZCcpLmNsb3Nlc3QoJy5zd2F0Y2hlcycpLmZpbmQoJ2J1dHRvbicpLnJlbW92ZUNsYXNzKCdub24tc2VsZWN0YWJsZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSBqUXVlcnkodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghJHRoaXMuaGFzQ2xhc3MoJ25vbi1zZWxlY3RhYmxlJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLmNsb3Nlc3QoJy5zd2F0Y2hlcycpLmZpbmQoJy5vcHRpb253cmFwcGVyJykuc2xpZGVVcCg0MDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcykuY2xvc2VzdCgnLnN3YXRjaGVzJykucmVtb3ZlQ2xhc3MoJ2N1cnJlbnQnKS5hZGRDbGFzcygnc2VsZWN0ZWQnKS5uZXh0VW50aWwoJy5zd2F0Y2hlcycpLm5leHQoKS5ub3QoJy5jbGVhcicpLmZpcnN0KClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKCdjdXJyZW50JykucmVtb3ZlQ2xhc3MoJ2Z1dHVyZScpLmZpbmQoJy5vcHRpb253cmFwcGVyJykuc2xpZGVEb3duKDQwMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMpLmZpbmQoJ3NlbGVjdCBvcHRpb24nKS5lYWNoKGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmNsb3Nlc3QoJ3NlbGVjdCcpLmZpbmQoJ29wdGlvbicpLmxlbmd0aCA9PSAyICYmIGluZGV4ID09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5wcm9wKCdzZWxlY3RlZCcsIHRydWUpLnRyaWdnZXIoJ2NoYW5nZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyQodGhpcykuYXR0cignc2VsZWN0ZWQnLCdzZWxlY3RlZCcpLnRyaWdnZXIoJ2NoYW5nZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5maW5kKCdzZWxlY3QnKS5jaGFuZ2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc09iai5wYXJlbnQoKS5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3QudmFyQXR0clNlbGVjdGVkKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gYWxsIHN3dGFjaCBhbmNob3JzXG4gICAgICAgICAgICAgICAgICAgIHZhciB2YXJKcXJ5T2JqcyA9IHRoaXNTd2F0Y2guZmluZCgnYS5zd2F0Y2hhbmNob3InKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBpZiBpdHMgYSBjb2xvciBhdHRyIHRoZW4gcmVuZGVyIGl0cyBzd2F0Y2hlcyBhbmQgaW1hZ2VzXG4gICAgICAgICAgICAgICAgICAgIGlmIChwZHBWYXJJZCA9PT0gJ2NvbG9yJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbG9yQXR0ckRlZiA9IHRoaXNQcm9kdWN0LmdldEF0dHJCeUlEKCdjb2xvcicpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXJKcXJ5T2Jqcy5lYWNoKGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGdpdmVuIGEgdmFyaWF0aW9uIGF0dHIgdmFsdWUsIGZpbmQgaXRzIHN3YXRjaCBpbWFnZSB1cmxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmluZFN3YXRjaCA9IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb2xvckF0dHJEZWYudmFscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbG9yQXR0ckRlZi52YWxzW2ldLnZhbCA9PT0gdmFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbG9yQXR0ckRlZi52YWxzW2ldLmltYWdlcy5zd2F0Y2g7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcnOyAvLyBubyBzd2F0Y2ggaW1hZ2UgZm91bmRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN3YXRjaFVybCA9IChmaW5kU3dhdGNoKHRoaXMudGl0bGUpKS51cmw7IC8vIGZpbmQgc3dhdGNoIHVybFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN3YXRjaFVybCAmJiBzd2F0Y2hVcmwgIT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9qUXVlcnkodGhpcykuY3NzKFwiY29sb3JcIiwgXCJ0cmFuc3BhcmVudFwiKS5wYXJlbnQoKS5jc3MoXCJiYWNrZ3JvdW5kXCIsIFwidXJsKFwiICsgc3dhdGNoVXJsICsgXCIpXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcykuY3NzKCd0ZXh0LWluZGVudCcsICctOTk5OXB4JykucHJlcGVuZCgnPGltZyBhbHQ9XCInICsgdGhpcy50aXRsZSArICdcIiBzcmM9XCInICsgc3dhdGNoVXJsICsgJ1wiLz4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcykuY3NzKCdjb2xvcicsICd0cmFuc3BhcmVudCcpOyAvLyBubyBzd2F0Y2ggaW1hZ2UgZm91bmRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3dhdGNoZXMgY2xpY2ssIGhvdmVyIGFuZCBtb3VzZWxlYXZlIGV2ZW50IGhhbmRsZXJzXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXJKcXJ5T2Jqcy5kYXRhKCdkYXRhJywge2lkOiBwZHBWYXJJZH0pLmNsaWNrKHZhckV2ZW50SGFuZGxlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPiAxMDI0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFySnFyeU9ianMuZGF0YSgnZGF0YScsIHtpZDogcGRwVmFySWR9KS5tb3VzZWVudGVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3Quc2hvd1NlbGVjdGVkVmFyQXR0clZhbCgnY29sb3InLCB0aGlzLnRpdGxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3Quc2hvd0ltYWdlcyh0aGlzLnRpdGxlLCBjb2xvckF0dHJEZWYudmFscyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkubW91c2VsZWF2ZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzUHJvZHVjdC5zZWxlY3RlZFZhcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3Quc2hvd0ltYWdlcyh0aGlzUHJvZHVjdC5zZWxlY3RlZFZhci5pZCwgW3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAndmFsJzogdGhpc1Byb2R1Y3Quc2VsZWN0ZWRWYXIuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2ltYWdlcyc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ29yaWdpbmFsJzogW3sndXJsJzogbW9kZWwuaW1hZ2VzLnpvb212YXJpYW50c1t0aGlzUHJvZHVjdC5zZWxlY3RlZFZhci5pZF19XSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3NtYWxsJzogW3sndXJsJzogbW9kZWwuaW1hZ2VzLnZhcmlhbnRzW3RoaXNQcm9kdWN0LnNlbGVjdGVkVmFyLmlkXX1dLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbGFyZ2UnOiBbeyd1cmwnOiBtb2RlbC5pbWFnZXMudmFyaWFudHNbdGhpc1Byb2R1Y3Quc2VsZWN0ZWRWYXIuaWRdfV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpc1Byb2R1Y3Quc2VsZWN0ZWRWYXJBdHRyaWJzLmNvbG9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzUHJvZHVjdC5zaG93SW1hZ2VzKHRoaXNQcm9kdWN0LnNlbGVjdGVkVmFyQXR0cmlicy5jb2xvciwgY29sb3JBdHRyRGVmLnZhbHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1Byb2R1Y3Quc2hvd0ltYWdlcygnJywgW3t2YWw6ICcnLCBpbWFnZXM6IG1vZGVsLmltYWdlc31dKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LnNob3dTZWxlY3RlZFZhckF0dHJWYWwoJ2NvbG9yJywgdGhpc1Byb2R1Y3Quc2VsZWN0ZWRWYXJBdHRyaWJzLmNvbG9yIHx8ICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm90IGEgY29sb3Igc3dhdGNoLCB3ZSBvbmx5IGhhdmUgY2xpY2sgaGFuZGxlciBmb3IgdGhpcyB0eXBlIG9mIHZhcmlhdGlvbiBhdHRyaWJ1dGUgZS5nLiB3aWR0aCwgbGVuZ3RoIGV0Yy5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhckpxcnlPYmpzLmRhdGEoJ2RhdGEnLCB7aWQ6IHBkcFZhcklkfSkuY2xpY2sodmFyRXZlbnRIYW5kbGVyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXNQcm9kdWN0LmNvbnRhaW5lcklkICsgJyAudmFyaWF0aW9uYXR0cmlidXRlcyAudmFyaWFudGRyb3Bkb3duIHNlbGVjdCBvcHRpb24nKS5lYWNoKGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoalF1ZXJ5KHRoaXNQcm9kdWN0LmNvbnRhaW5lcklkICsgJyAudmFyaWF0aW9uYXR0cmlidXRlcyAudmFyaWFudGRyb3Bkb3duIHNlbGVjdCBvcHRpb24nKS5sZW5ndGggPT0gMiAmJiBpbmRleCA9PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnByb3AoJ3NlbGVjdGVkJywgdHJ1ZSkudHJpZ2dlcignY2hhbmdlJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIGxvb3AgdGhydSBhbGwgdGhlIG5vbi1zd2F0Y2hlcyBhdHRyaWJ1dGVzIGFuZCBiaW5kIGV2ZW50cyBldGMuXG4gICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXNQcm9kdWN0LmNvbnRhaW5lcklkICsgJyAudmFyaWF0aW9uYXR0cmlidXRlcyAudmFyaWFudGRyb3Bkb3duIHNlbGVjdCcpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBkZWZhdWx0IHVpIGkuZS4gZHJvcCBkb3dueVxuICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcykuZGF0YSgnZGF0YScsIHtpZDogalF1ZXJ5KHRoaXMpLmRhdGEoJ2RhdGEnKSwgdmFsOiAnJ30pLmNoYW5nZShmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlcmUgaXMgb25seSAxIHZhbHVlIHRvIGJlIHNlbGVjdGVkIHRoZW4gcmV0dXJuIGkuZS4gbm8gZGVzZWxlY3Rpb24gYXZhaWxhYmxlXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2lmICh0aGlzLnNlbGVjdGVkSW5kZXggPT0gMCAmJiB0aGlzLm9wdGlvbnMubGVuZ3RoID09IDEpIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGUuZGF0YSA9IGpRdWVyeSh0aGlzKS5kYXRhKCdkYXRhJyk7IC8vIGRhdGEgaXMgaWRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuc2VsZWN0ZWRJbmRleCA9PSAwLCBpdCBpcyBkZXNlbGVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgZS5kYXRhLnZhbCA9ICh0aGlzLnNlbGVjdGVkSW5kZXggPT0gMCAmJiB0aGlzLm9wdGlvbnMubGVuZ3RoID4gMSkgPyBudWxsIDogdGhpcy5vcHRpb25zW3RoaXMuc2VsZWN0ZWRJbmRleF0udmFsdWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkSW5kZXggPT0gMCAmJiB0aGlzLm9wdGlvbnMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlc2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9qUXVlcnkodGhpcykuY2xvc2VzdChcIi52YXJpYW50ZHJvcGRvd25cIikuZmluZChcImJ1dHRvblwiKS5hZGRDbGFzcyhcIm5vbi1zZWxlY3RhYmxlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2pRdWVyeSh0aGlzKS5jbG9zZXN0KFwiLnZhcmlhbnRkcm9wZG93blwiKS5maW5kKFwiYnV0dG9uXCIpLnJlbW92ZUNsYXNzKFwibm9uLXNlbGVjdGFibGVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMpLmNsb3Nlc3QoJy52YXJpYW50ZHJvcGRvd24nKS5maW5kKCcub3B0aW9ud3JhcHBlcicpLnNsaWRlVXAoNDAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzKS5jbG9zZXN0KCcudmFyaWFudGRyb3Bkb3duJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcygnY3VycmVudCcpLmFkZENsYXNzKCdzZWxlY3RlZCcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubmV4dFVudGlsKCcuZnV0dXJlJykubmV4dCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ2N1cnJlbnQnKS5yZW1vdmVDbGFzcygnZnV0dXJlJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKCcub3B0aW9ud3JhcHBlcicpLnNsaWRlRG93big0MDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcykuZmluZCgnc2VsZWN0IG9wdGlvbicpLmVhY2goZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmNsb3Nlc3QoJ3NlbGVjdCcpLmZpbmQoJ29wdGlvbicpLmxlbmd0aCA9PSAyICYmIGluZGV4ID09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykucHJvcCgnc2VsZWN0ZWQnLCB0cnVlKS50cmlnZ2VyKCdjaGFuZ2UnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vJCh0aGlzKS5hdHRyKCdzZWxlY3RlZCcsJ3NlbGVjdGVkJykudHJpZ2dlcignY2hhbmdlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmZpbmQoJ3NlbGVjdCcpLmNoYW5nZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzUHJvZHVjdC52YXJBdHRyU2VsZWN0ZWQoZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZEluZGV4ID09IDAgJiYgdGhpcy5vcHRpb25zLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjbGVhciB0aGUgY3VycmVudCBzZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzUHJvZHVjdC5yZXNldFZhcmlhdGlvbnMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpc1Byb2R1Y3Quc2VsZWN0ZWRWYXJBdHRyaWJzLmNvbG9yKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHNob3cgc3dhdGNoIHJlbGF0ZWQgaW1hZ2VzIGZvciB0aGUgY3VycmVudCB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICB0aGlzUHJvZHVjdC5zaG93SW1hZ2VzKHRoaXNQcm9kdWN0LnNlbGVjdGVkVmFyQXR0cmlicy5jb2xvciwgdGhpc1Byb2R1Y3QuZ2V0QXR0ckJ5SUQoJ2NvbG9yJykudmFscyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gc2hvdyBpbWFnZXMgYW5kIGJpbmQgaG92ZXIgZXZlbnQgaGFuZGxlcnMgZm9yIHNtYWxsL3RodW1ibmFpbHMgdG8gdG9nZ2xlIGxhcmdlIGltYWdlXG4gICAgICAgICAgICAgICAgICAgIHRoaXNQcm9kdWN0LnNob3dJbWFnZXMoJycsIFt7dmFsOiAnJywgaW1hZ2VzOiBtb2RlbC5pbWFnZXN9XSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBzaG93IGltYWdlcyBhbmQgYmluZCBob3ZlciBldmVudCBoYW5kbGVycyBmb3Igc21hbGwvdGh1bWJuYWlscyB0byB0b2dnbGUgbGFyZ2UgaW1hZ2VcbiAgICAgICAgICAgICAgICB0aGlzUHJvZHVjdC5zaG93SW1hZ2VzKCcnLCBbe3ZhbDogJycsIGltYWdlczogbW9kZWwuaW1hZ2VzfV0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBiaW5kIHByb2R1Y3Qgb3B0aW9ucyBldmVudChzKVxuICAgICAgICAgICAgZ2V0T3B0aW9uc0Rpdih0aGlzKTtcblxuICAgICAgICAgICAgaWYgKCFtb2RlbC5wcm9kdWN0U2V0KSB7XG4gICAgICAgICAgICAgICAgLy8gcXVhbnRpdHkgYm94XG4gICAgICAgICAgICAgICAgaWYgKCFtb2RlbC5idW5kbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2V0UXR5Qm94KHRoaXMpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobW9kZWwuYnVuZGxlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBhdmFpYWJpbGl0eSBmb3IgYSBidW5kbGUgcHJvZHVjdCwgZm9yIGV2ZXJ5dGhpbmcgZWxzZSBpdHMgZG9uZSBpbnNpZGUgZ2V0UXR5Qm94XG4gICAgICAgICAgICAgICAgICAgIHNldEF2YWlsYWJpbGl0eU1zZyhjcmVhdGVBdk1lc3NhZ2UodGhpcywgMSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQWRkIHRvIGNhcnQgYnV0dG9uIGNsaWNrIGJpbmRpbmdcbiAgICAgICAgICAgIGdldEFkZFRvQ2FydEJ0bih0aGlzKTtcbiAgICAgICAgICAgIC8vIGludGlhbCBkaXNwbGF5IG9mIEEyQyBidXR0b25cbiAgICAgICAgICAgIC8vIGlmIHRoZSBwcmljZSBpcyAwIG9yIG5vdCBhdmFpbGFibGUsIGl0cyBkaXNhYmxlZFxuICAgICAgICAgICAgLy8gaWYgbm90IGluIHN0b2NrLCBpdHMgZGlzYWJsZWRcbiAgICAgICAgICAgIC8vIGlzUHJvbW9QcmljZSB3b3VsZCBiZSB0cnVlIGluIGNhc2UgaWYgYSBwcm9kdWN0IGhhcyBhIHByb21vdGlvbmFsIHByaWNlIHdoaWNoIGNvdWxkIG1ha2UgcHJvZHVjdCdzIHByaWNlIDBcbiAgICAgICAgICAgIGlmICghKHRoaXMuZ2V0UHJpY2UoKSA+IDAgfHwgdGhpcy5pc1Byb21vUHJpY2UoKSkgfHxcbiAgICAgICAgICAgICAgICBtb2RlbC5tYXN0ZXIgfHwgbW9kZWwudmFyaWFudCB8fCBtb2RlbC5wcm9kdWN0U2V0IHx8IG1vZGVsLmJ1bmRsZSB8fFxuICAgICAgICAgICAgICAgICghbW9kZWwuaW5TdG9jayAmJiBtb2RlbC5hdlN0YXR1cyA9PT0gQ29uc3RhbnRzLkFWQUlMX1NUQVRVU19OT1RfQVZBSUxBQkxFICYmICFtb2RlbC5wcm9kdWN0U2V0KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzYWJsZUEyQ0J1dHRvbigpO1xuICAgICAgICAgICAgICAgIC8qKiBpZigodGhpcy5nZXRQcmljZSgpID09IDAgJiYgIXRoaXMuaXNQcm9tb1ByaWNlKCkpKSB7XG5cdFx0XHRcdFx0dGhpcy5oaWRlQXZhaWxhYmlsaXR5KCk7XG5cdFx0XHRcdH0qL1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1vZGVsLmF2U3RhdHVzID09PSBDb25zdGFudHMuQVZBSUxfU1RBVFVTX05PVF9BVkFJTEFCTEUpIHtcbiAgICAgICAgICAgICAgICAvL3RoaXMucmVtb3ZlQTJDQnV0dG9uKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGN1c3RvbWVyIHJhdGluZyBzZWN0aW9uIG9ubHkgZGlzcGxheWVkIGZvciB0aGUgbWFpbiBwcm9kdWN0XG4gICAgICAgICAgICBpZiAoIW1vZGVsLnByb2R1Y3RTZXRQcm9kdWN0ICYmICFtb2RlbC5idW5kbGVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFtb2RlbC5wcm9kdWN0U2V0ICYmICFpc1F1aWNrVmlldyAmJiAhbW9kZWwuYnVuZGxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGdldFJhdGluZ1NlY3Rpb24odGhpcy5jb250YWluZXJJZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyB3aXNoIGxpc3QsIHNlbnQgdG8gZnJpZW5kLCBhZGQgdG8gZ2lmdFxuICAgICAgICAgICAgZ2V0TWlzY0xpbmtzKHRoaXMpO1xuXG4gICAgICAgICAgICAvLyBwcm9kdWN0IHRhYnNcbiAgICAgICAgICAgIGdldFRhYnModGhpcy5jb250YWluZXJJZCk7XG5cbiAgICAgICAgICAgIC8vIHNldHVwIGJ1bmRsZS9wcm9kdWN0IHNldFxuICAgICAgICAgICAgdGhpcy5nZXRTdWJQcm9kdWN0c0JpbmRpbmcoKTtcblxuICAgICAgICB9LFxuICAgICAgICB0b1N0cmluZzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubW9kZWw7XG4gICAgICAgIH1cbiAgICB9O1xufTsgLy8gUHJvZHVjdCBkZWZpbnRpb24gZW5kXG52YXIgUHJvZHVjdENhY2hlID0gbnVsbDtcbnZhciBxdWlja3ZpZXdTaG93ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICB2YXIgdXJsID0gb3B0aW9ucy51cmw7XG4gICAgdXJsID0gdXJsID0gdXRpbC5hcHBlbmRQYXJhbVRvVVJMKHVybCwgJ3NvdXJjZScsIG9wdGlvbnMuc291cmNlKTtcbiAgICAkKCcjUXVpY2tWaWV3RGlhbG9nJykuaHRtbCgnJyk7XG4gICAgdmFyIHF1aWNrVmlld0RpYWxvZyA9IGRpYWxvZy5jcmVhdGUoe1xuICAgICAgICB0YXJnZXQ6ICcjUXVpY2tWaWV3RGlhbG9nJyxcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgaGVpZ2h0OiA1MzAsXG4gICAgICAgICAgICB3aWR0aDogNzYwLFxuICAgICAgICAgICAgZGlhbG9nQ2xhc3M6ICdxdWlja3ZpZXcnLFxuICAgICAgICAgICAgdGl0bGU6IFJlc291cmNlcy5RVUlDS19WSUVXX1BPUFVQXG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBxdWlja1ZpZXdEaWFsb2cuZGlhbG9nKCdvcGVuJyk7XG4gICAgcHJvZ3Jlc3Muc2hvdygnI1F1aWNrVmlld0RpYWxvZycpO1xuXG4gICAgJC5hamF4KHtcbiAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAkKHF1aWNrVmlld0RpYWxvZykuaHRtbCgnJykuYXBwZW5kKGRhdGEpO1xuICAgICAgICAgICAgdXRpbC5oaWRkZW5EYXRhKCk7XG4gICAgICAgICAgICB2YXIgUHJvZHVjdENhY2hlID0gbnVsbDtcbiAgICAgICAgICAgIHZhciBwcm9kdWNKc29uID0gJCgnI1F1aWNrVmlld0RpYWxvZyAucHJvZHVjdGpzb24nKS5kYXRhKCdwcm9kdWN0anNvbicpO1xuICAgICAgICAgICAgUHJvZHVjdENhY2hlID0gcHJvZHVjdChwcm9kdWNKc29uKTtcbiAgICAgICAgICAgIFByb2R1Y3RDYWNoZS5zaG93KHtjb250YWluZXJJZDogJ3BkcE1haW4nLCBhcHBlbmQ6IGZhbHNlLCBzb3VyY2U6IG9wdGlvbnMuc291cmNlfSk7XG4gICAgICAgICAgICBhZGRUb0NhcnQuaW5pdCgpO1xuICAgICAgICAgICAgJCgnYm9keScpLmZpbmQoJy5xdWFudGl0eWlucHV0Jykub2ZmKCdrZXlkb3duJykub24oJ2tleWRvd24nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT0gMTMpIHtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcHJvZ3Jlc3MuaGlkZSgpO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xudmFyIHBkcEV2ZW50cyA9IHtcbiAgICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHV0aWwuaGlkZGVuRGF0YSgpO1xuICAgICAgICB2YXIgcHJvZHVjSnNvbiA9ICQoJ2JvZHknKS5maW5kKCcucHJvZHVjdGpzb24nKS5kYXRhKCdwcm9kdWN0anNvbicpO1xuICAgICAgICB2YXIgc291cmNlVmFsdWUgPSAkKCdib2R5JykuZmluZCgnLmh0dHAtc291cmNlJykudmFsKCk7XG4gICAgICAgIFByb2R1Y3RDYWNoZSA9IHByb2R1Y3QocHJvZHVjSnNvbik7XG4gICAgICAgIFByb2R1Y3RDYWNoZS5zaG93KHtjb250YWluZXJJZDogJ3BkcE1haW4nLCBhcHBlbmQ6IGZhbHNlLCBzb3VyY2U6IHNvdXJjZVZhbHVlfSk7XG4gICAgICAgICQoJyN0YWJzJykuZmluZCgnYVtocmVmPVwiI3BkcFRhYjFcIl0nKS50cmlnZ2VyKCdjbGljaycpO1xuICAgICAgICAvL3ZhciBnZXREYXRhT3B0aW9uID0gJCgnLnByb2R1Y3QtcHJpbWFyeS1pbWFnZScpLmZpbmQoJ2EnKS5hdHRyKCdkYXRhLW9wdGlvbnMnKTtcbiAgICAgICAgJCgnYm9keScpLmZpbmQoJy5xdWFudGl0eWlucHV0Jykub24oJ2tleWRvd24nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PSAxMykge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcueW91dHViZS1saXN0LXZpZGVvIGEnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPiA0ODAgJiYgJCh3aW5kb3cpLndpZHRoKCkgPCA5NTkpIHtcbiAgICAgICAgICAgICAgICB1dGlsLnNjcm9sbEJyb3dzZXIoJCgnLnRhYi1zZWMnKS5vZmZzZXQoKS50b3ApO1xuICAgICAgICAgICAgfSBlbHNlIGlmICgkKHdpbmRvdykud2lkdGgoKSA8IDQ4MSkge1xuICAgICAgICAgICAgICAgIHV0aWwuc2Nyb2xsQnJvd3NlcigkKCcubW9iaWxlLXRhYnMtc2VjdGlvbiAudGFic0hlYWRlci52aWRlb1RhYicpLm9mZnNldCgpLnRvcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLnZpZGVvLWxpbmsnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPiA0ODApIHtcbiAgICAgICAgICAgICAgICB1dGlsLnNjcm9sbEJyb3dzZXIoJCgnLnRhYi1zZWMnKS5vZmZzZXQoKS50b3ApO1xuICAgICAgICAgICAgICAgICQoJyN0YWJzICN2aWRlb1RhYicpLmZpbmQoJ2FbaHJlZj1cIiNwZHBWaWRlb1RhYlwiXScpLnRyaWdnZXIoJ2NsaWNrJyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCQod2luZG93KS53aWR0aCgpIDwgNDgxKSB7XG4gICAgICAgICAgICAgICAgdXRpbC5zY3JvbGxCcm93c2VyKCQoJy5tb2JpbGUtdGFicy1zZWN0aW9uIC50YWJzSGVhZGVyLnZpZGVvVGFiJykub2Zmc2V0KCkudG9wKTtcbiAgICAgICAgICAgICAgICAkKCcudGFic0hlYWRlci52aWRlb1RhYicpLnBhcmVudCgnLm1vYmlsZS10YWJzLXNlY3Rpb24gJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgIGlmICgkKCcudmlkZW9UYWInKS5oYXNDbGFzcygnbG9hZGVkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkKCcudmlkZW9UYWInKS5hZGRDbGFzcygnbG9hZGVkJyk7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9ICQoJyNwZHBWaWRlb1RhYicpO1xuICAgICAgICAgICAgICAgIHZhciB1cmwgPSAkKCcjcHJvZHVjdFVSTCcpLnZhbCgpO1xuICAgICAgICAgICAgICAgIGFqYXgubG9hZCh7XG4gICAgICAgICAgICAgICAgICAgIHVybDogdXJsLFxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2h0bWwnLFxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5odG1sKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAkKCcjYWRkLXRvLWNhcnQnKS5iaW5kKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQoJy5hZGRlZHRvLWNhcnRvdmVybGF5JykuYWRkQ2xhc3MoJ2FkZGVkLW92ZXJsYXknKTtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICQoJy5hZGRlZHRvLWNhcnRvdmVybGF5JykucmVtb3ZlQ2xhc3MoJ2FkZGVkLW92ZXJsYXknKTtcbiAgICAgICAgICAgIH0sIDIwMDApO1xuICAgICAgICB9KTtcbiAgICAgICAgJCgnI1F1aWNrVmlld0RpYWxvZyAucHJvZHVjdC1wcmltYXJ5LWltYWdlJykuZmluZCgnLnByb2R1Y3QtaW1hZ2UnKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoKCQoJy5wcm92aWRlby1zcGVjLWxpbmsnKS5sZW5ndGggPiAwKSkge1xuICAgICAgICAgICAgaWYgKCEoJCgnLnZpZGVvLWxpbmsnKS5sZW5ndGggPiAwKSkge1xuICAgICAgICAgICAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA+IDQ4MCkge1xuICAgICAgICAgICAgICAgICAgICAkKCcucHJvZHVjdG5hbWUuaC1vbmUtdGFnJykuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICd3aWR0aCc6ICdhdXRvJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdtYXJnaW4tYm90dG9tJzogJy0yNnB4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdmbG9hdCc6ICdsZWZ0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdwYWRkaW5nLWJvdHRvbSc6ICc4cHgnXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA+IDQ4MCkge1xuICAgICAgICAgICAgICAgICQoJy5wcm9kdWN0bmFtZS5oLW9uZS10YWcnKS5jc3MoeydwYWRkaW5nLWJvdHRvbSc6ICc0cHgnfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5zcGVjQ2hhcnQtbGluaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA+IDQ4MCkge1xuICAgICAgICAgICAgICAgIHV0aWwuc2Nyb2xsQnJvd3NlcigkKCcudGFiLXNlYycpLm9mZnNldCgpLnRvcCk7XG4gICAgICAgICAgICAgICAgJCgnI3RhYnMnKS5maW5kKCdhW2hyZWY9XCIjc3BlY0NoYXJ0VGFiXCJdJykudHJpZ2dlcignY2xpY2snKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPCA0ODEpIHtcbiAgICAgICAgICAgICAgICB1dGlsLnNjcm9sbEJyb3dzZXIoJCgnLm1vYmlsZS10YWJzLXNlY3Rpb24gLnRhYnNIZWFkZXIuc3BlY1RhYicpLm9mZnNldCgpLnRvcCk7XG4gICAgICAgICAgICAgICAgJCgnLnRhYnNIZWFkZXIuc3BlY1RhYicpLnBhcmVudCgnLm1vYmlsZS10YWJzLXNlY3Rpb24gJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdmFyIHBkcFJlY29tZW5kYXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcGRwUmVjb21lbmRhdGlvbkNhcm91c2VsID0gJCgnLnB0X3Byb2R1Y3QtZGV0YWlscyAuamNhcm91c2VsY29udCAucmVjb21tZW5kYXRpb25zJykuZmluZCgnLnBkcHJlY29tby1vd2wnKTtcbiAgICAgICAgICAgIHBkcFJlY29tZW5kYXRpb25DYXJvdXNlbC5vd2xDYXJvdXNlbCh7XG4gICAgICAgICAgICAgICAgbmF2OiB0cnVlLFxuICAgICAgICAgICAgICAgIGRvdHM6IHRydWUsXG4gICAgICAgICAgICAgICAgbmF2aWdhdGlvbjogZmFsc2UsXG4gICAgICAgICAgICAgICAgbmF2UmV3aW5kOiBmYWxzZSxcbiAgICAgICAgICAgICAgICByZXdpbmQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGxvb3A6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGl0ZW1zOiA1LFxuICAgICAgICAgICAgICAgIHJlc3BvbnNpdmVDbGFzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICByZXNwb25zaXZlOiB7XG4gICAgICAgICAgICAgICAgICAgIDA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zOiAyLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVCeTogMlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICA3Njc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zOiAyLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVCeTogMlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICA3Njg6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zOiA1LFxuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVCeTogNVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YXIgdmlld3BvcnQgPSBqUXVlcnkod2luZG93KS53aWR0aCgpO1xuICAgICAgICAgICAgdmFyIGl0ZW1Db3VudCA9IGpRdWVyeSgnLm93bC1jYXJvdXNlbCAuaXRlbScpLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAodmlld3BvcnQgPj0gOTU5ICYmIGl0ZW1Db3VudCA+IDUpIC8vZGVza3RvcFxuICAgICAgICAgICAgICAgIHx8ICgodmlld3BvcnQgPj0gNDgxICYmIHZpZXdwb3J0IDwgNjAwKSAmJiBpdGVtQ291bnQgPiAzKSAvL3RhYmxldFxuICAgICAgICAgICAgICAgIHx8ICh2aWV3cG9ydCA8IDQ4MCAmJiBpdGVtQ291bnQgPiAyKSAvL21vYmlsZVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgJCgnLnBkcHJlY29tby1vd2wnKS5maW5kKCcub3dsLXByZXYsIC5vd2wtbmV4dCcpLnNob3coKTtcbiAgICAgICAgICAgICAgICAkKCcucGRwcmVjb21vLW93bCcpLmZpbmQoJy5vd2wtZG90cycpLnNob3coKTtcblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKCcucGRwcmVjb21vLW93bCcpLmZpbmQoJy5vd2wtcHJldiwgLm93bC1uZXh0JykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICQoJy5wZHByZWNvbW8tb3dsJykuZmluZCgnLm93bC1kb3RzJykuaGlkZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJCgnLnByb2R1Y3QtbGlzdGluZycpLmZpbmQoJ2gyLmhpZGUnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgICAgICAgdmFyIGhlaWdodCA9ICQoJy5vd2wtaXRlbScpLmhlaWdodCgpO1xuICAgICAgICAgICAgJCgnLnBkcHJlY29tby1vd2wnKS5maW5kKCcub3dsLWl0ZW0nKS5maW5kKCcucHJvZHVjdC10aWxlLml0ZW0nKS5oZWlnaHQoaGVpZ2h0IC0gMTAwKTtcbiAgICAgICAgICAgICQoJy5wdF9wcm9kdWN0LWRldGFpbHMgLnByb2R1Y3QtdGlsZSAucHJvZHVjdC1pbWFnZScpLm9uKCdtb3VzZWVudGVyJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciAkcXZCdXR0b24gPSAkKCcjcXVpY2t2aWV3YnV0dG9uJyk7XG4gICAgICAgICAgICAgICAgaWYgKCRxdkJ1dHRvbi5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgJHF2QnV0dG9uID0gJCgnPGEgaWQ9XCJxdWlja3ZpZXdidXR0b25cIiBjbGFzcz1cInF1aWNrdmlld1wiPicgKyBSZXNvdXJjZXMuUVVJQ0tfVklFVyArICc8aSBjbGFzcz1cImZhIGZhLWFycm93cy1hbHRcIj48L2k+PC9hPicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgJGxpbmsgPSAkKHRoaXMpLmZpbmQoJy50aHVtYi1saW5rJyk7XG4gICAgICAgICAgICAgICAgJHF2QnV0dG9uLmF0dHIoe1xuICAgICAgICAgICAgICAgICAgICAnaHJlZic6ICRsaW5rLmF0dHIoJ2hyZWYnKSxcbiAgICAgICAgICAgICAgICAgICAgJ3RpdGxlJzogJGxpbmsuYXR0cigndGl0bGUnKVxuICAgICAgICAgICAgICAgIH0pLmFwcGVuZFRvKHRoaXMpO1xuICAgICAgICAgICAgICAgICRxdkJ1dHRvbi5vZmYoJ2NsaWNrJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogJCh0aGlzKS5hdHRyKCdocmVmJyksIC8vUFJFViBKSVJBIFBSRVYtMjU1IDpQTFA6IE9uIENsaWNrIFF1aWNrIHZpZXcgbmF2aWdhdGluZyB0byBhIHdyb25nIHBhZ2Ugd2hlbiB1c2VyIGZpcnN0IGNoYW5nZXMgdGhlIHN3YXRjaGVzLiBUYWtpbmcgb25seSBocmVmLlxuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlOiAncXVpY2t2aWV3J1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBxdWlja3ZpZXdTaG93KG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHNldFRpbWVvdXQocGRwUmVjb21lbmRhdGlvbiwgNTUwMCk7XG4gICAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBwZHBFdmVudHM7XG4iLCIndXNlIHN0cmljdCc7XG52YXIgcHJvZ3Jlc3MgPSByZXF1aXJlKCcuLi9wcm9ncmVzcycpLFxuICAgIHVpZXZlbnRzID0gcmVxdWlyZSgnLi4vdWlldmVudHMnKSxcbiAgICB0b29sdGlwID0gcmVxdWlyZSgnLi4vdG9vbHRpcCcpLFxuICAgIHZhbGlkYXRvciA9IHJlcXVpcmUoJy4uL3ZhbGlkYXRvcicpLFxuICAgIGFqYXggPSByZXF1aXJlKCcuLi9hamF4JyksXG4gICAgdXRpbCA9IHJlcXVpcmUoJy4uL3V0aWwnKTtcblxudmFyIHJhcGFsYWluc2lkZXIgPSB7XG4gICAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgICAgICB0b29sdGlwLmluaXQoKTtcbiAgICAgICAgdmFsaWRhdG9yLmluaXQoKTtcbiAgICAgICAgdWlldmVudHMuaW5pdCgpO1xuICAgICAgICBpZiAoalF1ZXJ5KCcjZGlhbG9nY29udGFpbmVyMTIzJykubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIGpRdWVyeShkb2N1bWVudC5ib2R5KS5hcHBlbmQoJzxkaXYgaWQ9XFwnZGlhbG9nY29udGFpbmVyMTIzXFwnIGNsYXNzPVxcJ3ZpcGluc2lkZXItY29udGFpbmVyXFwnPjwvZGl2PicpO1xuICAgICAgICB9XG4gICAgICAgIGpRdWVyeS5lYWNoKGpRdWVyeSgnZm9ybTpub3QoLnN1cHByZXNzKScpLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBqUXVlcnkodGhpcykudmFsaWRhdGUodmFsaWRhdG9yLnNldHRpbmdzKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyICR2aXBpbnNpZGVyID0gJCgnLnZpcGluc2lkZXItY29udGFpbmVyJyk7XG4gICAgICAgICAgICAvL3ZpcGZvcm0gPSAkKCcuVmlwaW5zaWRlckZvcm0nKTtcbiAgICAgICAgLy92YXIgdmFsaWRhdG9yaW5pdCA9ICQodGhpcykuY2xvc2VzdCgnZm9ybScpLnZhbGlkYXRlKCk7XG4gICAgICAgICQoJyNQYXNzd29yZFJlc2V0MTIzJykuY2xpY2soZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICR2aXBpbnNpZGVyLmxvYWQoVXJscy52aXBJbnNpZGVyLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJHZpcGluc2lkZXIuZGlhbG9nKHtcbiAgICAgICAgICAgICAgICAgICAgYmdpZnJhbWU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGF1dG9PcGVuOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbW9kYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG92ZXJsYXk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuNSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICd3aGl0ZSdcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDM1OCxcbiAgICAgICAgICAgICAgICAgICAgZGlhbG9nQ2xhc3M6ICd2aXBJbnNpZGVyLWRsZycsXG4gICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIG9wZW46IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2x0aXAuaW5pdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdG9yLmluaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVpZXZlbnRzLmluaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhcGFsYWluc2lkZXIuZGlhbG9nRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByYXBhbGFpbnNpZGVyLmZvcm1QcmVwYXJlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtU2VsZWN0b3I6ICcjVmlwaW5zaWRlckZvcm0nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlU2VsZWN0b3I6ICcjVklQSW5zaWRlci1mb3JtLXNibXQtaWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdvcGFjaXR5J1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByYXBhbGFpbnNpZGVyLnZpcGluc2lkZXJldmVudHMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA+IDEyMDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYXBhbGFpbnNpZGVyLmN1c3RvbXNlbGVjdGV2ZW50c2IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJhcGFsYWluc2lkZXIudGV4dGFyZWFyYXBhbGEoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhcGFsYWluc2lkZXIuY2xlYXJidXR0b25mdW5jdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnJlbW92ZScpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaWxlbmFtZSA9ICQodGhpcykuYXR0cignZGF0YS1maWxlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZvcm0gPSAkKHRoaXMpLmNsb3Nlc3QoJ2Zvcm0nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gZm9ybS5hdHRyKCdhY3Rpb24nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmluYWxVUkwgPSB1dGlsLmFwcGVuZFBhcmFtVG9VUkwodXJsLCAnZmlsZW5hbWUnLCBmaWxlbmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWpheC5sb2FkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBmaW5hbFVSTCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBqUXVlcnkoJyNkaWFsb2djb250YWluZXIxMjMnKS5kaWFsb2coJ29wZW4nKTtcbiAgICAgICAgICAgICAgICAkKHdpbmRvdykuc2Nyb2xsVG9wKDApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgZGlhbG9nRXZlbnRzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciAkdmlwaW5zaWRlciA9ICQoJy52aXBpbnNpZGVyLWNvbnRhaW5lcicpO1xuICAgICAgICAgICAgLy92aXBmb3JtID0gJCgnLlZpcGluc2lkZXJGb3JtJyk7XG4gICAgICAgIHJhcGFsYWluc2lkZXIuY2xlYXJidXR0b25mdW5jdCgpO1xuICAgICAgICAkdmlwaW5zaWRlci5maW5kKCcjVklQSW5zaWRlci1mb3JtLXNibXQtaWQnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdmFyIHByb2RpZCA9ICQoJy5maWVsZHN0YWZmIGZvcm0gLmR5bi1jYXQtc2VsZWN0IHNlbGVjdCcpLmZpbmQoJzpzZWxlY3RlZCcpLnZhbCgpO1xuICAgICAgICAgICAgaWYgKCQoJy50cmlnZ2VyX3NpbmdsZXVwbG9hZCcpLmlzKCc6dmlzaWJsZScpICYmIHByb2RpZCAhPSAnZG9uYXRpb24nKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEoJCgnLnZpcC11cGxvYWRmb3JtLWhvbGRlciAuZmlsZWxpc3QnKS5maW5kKCcudXBkYXRldGV4dCcpLmxlbmd0aCAhPSAwKSkge1xuICAgICAgICAgICAgICAgICAgICAkKCcudmlwLXVwbG9hZGZvcm0taG9sZGVyJykuZmluZCgnLmVtcHR5LWF0dGFjaG1lbnQtZXJyb3InKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoISQodGhpcykuY2xvc2VzdCgnZm9ybScpLnZhbGlkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCEkKHRoaXMpLmNsb3Nlc3QoJ2Zvcm0nKS52YWxpZCgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJCgnLnZpcC11cGxvYWRmb3JtLWhvbGRlcicpLmZpbmQoJy5lbXB0eS1hdHRhY2htZW50LWVycm9yJykuYWRkQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgICAgIHZhciB2aXBVUkwgPSAkKHRoaXMpLmNsb3Nlc3QoJ2Zvcm0nKS5hdHRyKCdhY3Rpb24nKTtcbiAgICAgICAgICAgIHZhciB2aXBEYXRhID0gJCh0aGlzKS5jbG9zZXN0KCdmb3JtJykuc2VyaWFsaXplKCk7XG4gICAgICAgICAgICBwcm9ncmVzcy5zaG93KCQoJy5maWVsZHN0YWZmIGZvcm0nKSk7XG4gICAgICAgICAgICBqUXVlcnkoJyNtc2djb250aWFuZXInKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICQoJzxkaXYvPicpLmF0dHIoJ2lkJywgJ21zZ2NvbnRpYW5lcicpLmh0bWwoJyAnKS5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KTtcbiAgICAgICAgICAgIGFqYXgubG9hZCh7XG4gICAgICAgICAgICAgICAgdXJsOiB2aXBVUkwsXG4gICAgICAgICAgICAgICAgZGF0YTogdmlwRGF0YSxcbiAgICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uICh2aXBEYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJ2JvZHknKS5maW5kKCcudmlwSW5zaWRlci1kbGcgLnVpLWRpYWxvZy10aXRsZWJhci1jbG9zZScpLnRyaWdnZXIoJ2NsaWNrJyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwcmVzZW50ID0gJCh2aXBEYXRhKS5maW5kKCcuZXhpdGluZ191c2VyJykubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGggPSBwcmVzZW50ID4gMCA/ICczMTZweCcgOiAnMzU4cHgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0ID0gcHJlc2VudCA+IDAgPyAnYXV0bycgOiAnMTg0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRsZ0NsYXNzID0gcHJlc2VudCA+IDAgPyAnZXhpc3Rpbmd1c2VyZGxnJyA6ICduZXd1c2VyZGxnJztcbiAgICAgICAgICAgICAgICAgICAgJCgnI21zZ2NvbnRpYW5lcicpLmZpbmQoJy5yZWdjaGVjaycpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICBqUXVlcnkoJyNtc2djb250aWFuZXInKS5hcHBlbmQodmlwRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeSgnI21zZ2NvbnRpYW5lcicpLmRpYWxvZyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBiZ2lmcmFtZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9PcGVuOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFsOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmxheToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuNSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAnd2hpdGUnXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHdpZHRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBoZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgICAgICBkaWFsb2dDbGFzczogJ3ZpcEluc2lkZXItZGxnICcgKyBkbGdDbGFzcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBvcGVuOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBqUXVlcnkoJyNtc2djb250aWFuZXInKS5kaWFsb2coJ29wZW4nKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLnZpcEluc2lkZXItZGxnLnVpLWRpYWxvZy5leGlzdGluZ3VzZXJkbGcgYnV0dG9uLmNsb3NlLCAudmlwSW5zaWRlci1kbGcudWktZGlhbG9nLm5ld3VzZXJkbGcgYnV0dG9uLmNsb3NlJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLnVpLWRpYWxvZycpLmZpbmQoJy51aS1kaWFsb2ctdGl0bGViYXItY2xvc2UnKS50cmlnZ2VyKCdjbGljaycpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgICQoJy52aXBJbnNpZGVyLWRsZy51aS1kaWFsb2cuZXhpc3Rpbmd1c2VyZGxnIGJ1dHRvbi5jbG9zZSwgLnZpcEluc2lkZXItZGxnLnVpLWRpYWxvZy5uZXd1c2VyZGxnIGJ1dHRvbi5jbG9zZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy51aS1kaWFsb2cnKS5maW5kKCcudWktZGlhbG9nLXRpdGxlYmFyLWNsb3NlJykudHJpZ2dlcignY2xpY2snKTtcbiAgICAgICAgfSk7XG4gICAgICAgICR2aXBpbnNpZGVyLmZpbmQoJy50cmlnZ2VyX3NpbmdsZXVwbG9hZCBpbnB1dFt0eXBlPVwiZmlsZVwiXScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmNsb3Nlc3QoJy52aXAtdXBsb2FkZm9ybS1ob2xkZXInKS5maW5kKCcuZW1wdHktYXR0YWNobWVudC1lcnJvcicpLmlzKCc6dmlzaWJsZScpKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcudmlwLXVwbG9hZGZvcm0taG9sZGVyJykuZmluZCgnLmVtcHR5LWF0dGFjaG1lbnQtZXJyb3InKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy9WSVAgaW5zaWRlciBkcm9wZG93biBjaGFuZ2VcbiAgICAgICAgJCgnLmZpZWxkc3RhZmYgZm9ybScpLmZpbmQoJy5keW4tY2F0LXNlbGVjdCBzZWxlY3QnKS5vZmYoJ2NoYW5nZScpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdmFyICRjdXJPYmogPSAkKHRoaXMpO1xuICAgICAgICAgICAgdmFyIHByb2RpZCA9ICcnO1xuICAgICAgICAgICAgaWYgKCQodGhpcykuY2xvc2VzdCgnLmR5bi1jYXQtc2VsZWN0JykuZmluZCgnLnNiSG9sZGVyJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZFRleHQgPSAkKHRoaXMpLmNsb3Nlc3QoJy5keW4tY2F0LXNlbGVjdCcpLmZpbmQoJy5zYlNlbGVjdG9yJykudGV4dCgpO1xuICAgICAgICAgICAgICAgIHByb2RpZCA9ICQodGhpcykuZmluZCgnb3B0aW9uW2xhYmVsPVwiJyArIHNlbGVjdGVkVGV4dCArICdcIl0nKS5hdHRyKCd2YWx1ZScpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwcm9kaWQgPSAkKHRoaXMpLmZpbmQoJzpzZWxlY3RlZCcpLnZhbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy9hbGVydCgkKHRoaXMpLmZpbmQoJzpzZWxlY3RlZCcpLnZhbCgpKTtcbiAgICAgICAgICAgIHZhciB1cmwgPSBVcmxzLnZpcEluc2lkZXJEeW5hbWljRm9ybXM7XG5cbiAgICAgICAgICAgIGlmIChwcm9kaWQgPT0gJ2ZpZWxkJyB8fCBwcm9kaWQgPT0gJ3Nwb3J0cycgfHwgcHJvZGlkID09ICdpbmR1c3RyeScgfHwgcHJvZGlkID09ICdkb25hdGlvbicpIHtcbiAgICAgICAgICAgICAgICBpZiAocHJvZGlkID09ICdzcG9ydHMnKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJy52aXAtdXBsb2FkZm9ybS1ob2xkZXInKS5maW5kKCdzcGFuLnRleHQtaG9sZGVyLXVwbG9hZCcpLnJlcGxhY2VXaXRoKCc8c3BhbiBjbGFzcz1cInRleHQtaG9sZGVyLXVwbG9hZFwiPipVcGxvYWQgQnVzaW5lc3MgQ2FyZCBvciBQYXkgU3R1Yjwvc3Bhbj4nKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLnZpcC11cGxvYWRmb3JtLWhvbGRlcicpLmZpbmQoJy50cmlnZ2VyX3NpbmdsZXVwbG9hZCAuZW1wdHktYXR0YWNobWVudC1lcnJvcicpLnRleHQoJ1BsZWFzZSB1cGxvYWQgQnVzaW5lc3MgY2FyZCBvciBQYXkgU3R1YicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocHJvZGlkID09ICdmaWVsZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnLnZpcC11cGxvYWRmb3JtLWhvbGRlcicpLmZpbmQoJ3NwYW4udGV4dC1ob2xkZXItdXBsb2FkJykucmVwbGFjZVdpdGgoJzxzcGFuIGNsYXNzPVwidGV4dC1ob2xkZXItdXBsb2FkXCI+KkF0dGFjaCBSZXN1bWU8L3NwYW4+Jyk7XG4gICAgICAgICAgICAgICAgICAgICQoJy52aXAtdXBsb2FkZm9ybS1ob2xkZXInKS5maW5kKCcudHJpZ2dlcl9zaW5nbGV1cGxvYWQgLmVtcHR5LWF0dGFjaG1lbnQtZXJyb3InKS50ZXh0KCdQbGVhc2UgdXBsb2FkIHlvdXIgUmVzdW1lJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwcm9kaWQgPT0gJ2luZHVzdHJ5Jykge1xuICAgICAgICAgICAgICAgICAgICAkKCcudmlwLXVwbG9hZGZvcm0taG9sZGVyJykuZmluZCgnc3Bhbi50ZXh0LWhvbGRlci11cGxvYWQnKS5yZXBsYWNlV2l0aCgnPHNwYW4gY2xhc3M9XCJ0ZXh0LWhvbGRlci11cGxvYWRcIj4qVXBsb2FkIEJ1c2luZXNzIENhcmQ8L3NwYW4+Jyk7XG4gICAgICAgICAgICAgICAgICAgICQoJy52aXAtdXBsb2FkZm9ybS1ob2xkZXInKS5maW5kKCcudHJpZ2dlcl9zaW5nbGV1cGxvYWQgLmVtcHR5LWF0dGFjaG1lbnQtZXJyb3InKS50ZXh0KCdQbGVhc2UgdXBsb2FkIGEgQnVzaW5lc3MgQ2FyZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocHJvZGlkID09ICdkb25hdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnLnZpcC11cGxvYWRmb3JtLWhvbGRlcicpLmZpbmQoJ3NwYW4udGV4dC1ob2xkZXItdXBsb2FkJykucmVwbGFjZVdpdGgoJzxzcGFuIGNsYXNzPVwidGV4dC1ob2xkZXItdXBsb2FkXCI+VXBsb2FkIEZseWVyPC9zcGFuPicpO1xuICAgICAgICAgICAgICAgICAgICAvLyQoJy52aXAtdXBsb2FkZm9ybS1ob2xkZXInKS5maW5kKCcudHJpZ2dlcl9zaW5nbGV1cGxvYWQgLmVtcHR5LWF0dGFjaG1lbnQtZXJyb3InKS50ZXh0KCdQbGVhc2UgdXBsb2FkIGEgRmx5ZXInKTtcbiAgICAgICAgICAgICAgICAgICAgLy8kKCcudmlwLXVwbG9hZGZvcm0taG9sZGVyJykuZmluZCgnc3Bhbi50ZXh0LWhvbGRlci11cGxvYWQnKS5jbG9zZXN0KCdmb3JtJykucmVtb3ZlQ2xhc3MoJ3RyaWdnZXJfc2luZ2xldXBsb2FkJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICQoJy52aXAtdXBsb2FkZm9ybS1ob2xkZXInKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKCcudmlwLXVwbG9hZGZvcm0taG9sZGVyJykuYWRkQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHByb2RpZCAhPSB1bmRlZmluZWQgJiYgcHJvZGlkICE9IG51bGwgJiYgcHJvZGlkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB1cmwgPSB1cmwgKyAnP3Byb2RpZD0nICsgcHJvZGlkO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHByb2dyZXNzLnNob3coJCgnLmZpZWxkc3RhZmYgZm9ybScpKTtcbiAgICAgICAgICAgIGFqYXgubG9hZCh7XG4gICAgICAgICAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgoJCgnLmZpZWxkc3RhZmYgZm9ybSAuZHluYW1pYy1jb250ZW50LWhvbGRlci12aXAnKSAhPSB1bmRlZmluZWQgJiYgJCgnLmZpZWxkc3RhZmYgZm9ybSAuZHluYW1pYy1jb250ZW50LWhvbGRlci12aXAnKS5sZW5ndGggPiAwKSAmJiAoJChkYXRhKS5maWx0ZXIoJy52aXBpbnNpZGVyLW9ubG9hZC1kYXRhLWhvbGRlcicpICE9IHVuZGVmaW5lZCAmJiAkKGRhdGEpLmZpbHRlcignLnZpcGluc2lkZXItb25sb2FkLWRhdGEtaG9sZGVyJykubGVuZ3RoID4gMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5maWVsZHN0YWZmIGZvcm0gLmR5bmFtaWMtY29udGVudC1ob2xkZXItdmlwJykuaHRtbCgkKGRhdGEpLmZpbHRlcignLnZpcGluc2lkZXItb25sb2FkLWRhdGEtaG9sZGVyJykuaHRtbCgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy50cmlnZ2VyX3NpbmdsZXVwbG9hZCAucHJvX2lkJykudmFsKHByb2RpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0ZU9iaiA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlT2JqLnNldFRpbWUoZGF0ZU9iai5nZXRUaW1lKCkgKyAoNjAgKiA2MCAqIDEwMDApKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmNvb2tpZSA9ICdwcm9nY29va2llPScgKyBwcm9kaWQgKyAnOyBleHBpcmVzPScgKyBkYXRlT2JqLnRvVVRDU3RyaW5nKCkgKyAnOyBwYXRoPS8nO1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpID4gMTIwMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhcGFsYWluc2lkZXIuY3VzdG9tc2VsZWN0ZXZlbnRzYigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmFwYWxhaW5zaWRlci50ZXh0YXJlYXJhcGFsYSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmFwYWxhaW5zaWRlci5jbGVhcmJ1dHRvbmZ1bmN0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByYXBhbGFpbnNpZGVyLmZvcm1QcmVwYXJlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtU2VsZWN0b3I6ICcjVmlwaW5zaWRlckZvcm0nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlU2VsZWN0b3I6ICcjVklQSW5zaWRlci1mb3JtLXNibXQtaWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdvcGFjaXR5J1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJGN1ck9iai5jbG9zZXN0KCcuZHluLWNhdC1zZWxlY3QnKS5maW5kKCcuc2JIb2xkZXInKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkVGV4dCA9ICRjdXJPYmouY2xvc2VzdCgnLmR5bi1jYXQtc2VsZWN0JykuZmluZCgnLnNiU2VsZWN0b3InKS50ZXh0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZGlkID0gJGN1ck9iai5maW5kKCdvcHRpb25bbGFiZWw9XCInICsgc2VsZWN0ZWRUZXh0ICsgJ1wiXScpLmF0dHIoJ3ZhbHVlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2RpZCA9ICRjdXJPYmouZmluZCgnOnNlbGVjdGVkJykudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvZGlkICE9ICdTZWxlY3QgQSBQcm9ncmFtJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5keW4tY2F0LXNlbGVjdCcpLmZpbmQoJy5sYWJlbCcpLnJlbW92ZUNsYXNzKCdlcnJvcm9jY3VyZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuZHluLWNhdC1zZWxlY3QnKS5maW5kKCcubGFiZWwgc3Bhbi5lcnJvcmNsaWVudC5pbnB1dGxhYmVsJykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmR5bi1jYXQtc2VsZWN0JykuZmluZCgnLmxhYmVsIHNwYW4nKS5yZW1vdmVDbGFzcygnaW5wdXRsYWJlbCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5keW4tY2F0LXNlbGVjdCcpLmZpbmQoJ3NlbGVjdCcpLnJlbW92ZUNsYXNzKCdlcnJvcmNsaWVudCcpLmFkZENsYXNzKCd2YWxpZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCQoJy5maWxlbGlzdCcpLmZpbmQoJ3VsJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5maWxlbGlzdCcpLmZpbmQoJ3VsJykuY3NzKHsnZGlzcGxheSc6ICdub25lJ30pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgLy8gc3ViIG5hbWVzcGFjZSBhcHAuYWpheC4qIGNvbnRhaW5zIGFwcGxpY2F0aW9uIHNwZWNpZmljIGFqYXhcbiAgICAvLyBjb21wb25lbnRzXG4gICAgYWpheDoge1xuICAgICAgICBTdWNjZXNzOiAnc3VjY2VzcycsXG4gICAgICAgIGN1cnJlbnRSZXF1ZXN0czoge30sIC8vIHJlcXVlc3QgY2FjaGVcblxuICAgICAgICAvLyBhamF4IHJlcXVlc3QgdG8gZ2V0IGpzb24gcmVzcG9uc2VcbiAgICAgICAgLy8gQHBhcmFtIC0gcmVxTmFtZSAtIFN0cmluZyAtIG5hbWUgb2YgdGhlIHJlcXVlc3RcbiAgICAgICAgLy8gQHBhcmFtIC0gYXN5bmMgLSBib29sZWFuIC0gYXN5bmNocm9ub3VzIG9yIG5vdFxuICAgICAgICAvLyBAcGFyYW0gLSB1cmwgLSBTdHJpbmcgLSB1cmkgZm9yIHRoZSByZXF1ZXN0XG4gICAgICAgIC8vIEBwYXJhbSAtIGRhdGEgLSBuYW1lL3ZhbHVlIHBhaXIgZGF0YSByZXF1ZXN0XG4gICAgICAgIC8vIEBwYXJhbSAtIGNhbGxiYWNrIC0gZnVuY3Rpb24gLSBjYWxsYmFjayBmdW5jdGlvbiB0byBiZSBjYWxsZWRcbiAgICAgICAgZ2V0SnNvbjogZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciB0aGlzQWpheCA9IHRoaXM7XG5cbiAgICAgICAgICAgIC8vIGRvIG5vdCBib3RoZXIgaWYgdGhlIHJlcXVlc3QgaXMgYWxyZWFkeSBpbiBwcm9ncmVzc1xuICAgICAgICAgICAgLy8gYW5kIGxldCBnbyBudWxsIHJlcU5hbWVcbiAgICAgICAgICAgIGlmICghb3B0aW9ucy5yZXFOYW1lIHx8ICF0aGlzLmN1cnJlbnRSZXF1ZXN0c1tvcHRpb25zLnJlcU5hbWVdKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UmVxdWVzdHNbb3B0aW9ucy5yZXFOYW1lXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuYXN5bmMgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5hc3luYyA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIG1ha2UgdGhlIHNlcnZlciBjYWxsXG4gICAgICAgICAgICAgICAgalF1ZXJ5LmFqYXgoe1xuICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnLFxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgICAgICB1cmw6IG9wdGlvbnMudXJsLFxuICAgICAgICAgICAgICAgICAgICBjYWNoZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgYXN5bmM6IG9wdGlvbnMuYXN5bmMsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IG9wdGlvbnMuZGF0YSxcblxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzcG9uc2UsIHRleHRTdGF0dXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNBamF4LmN1cnJlbnRSZXF1ZXN0c1tvcHRpb25zLnJlcU5hbWVdID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2UuU3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGhhbmRsZSBmYWlsdXJlXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuY2FsbGJhY2socmVzcG9uc2UsIHRleHRTdGF0dXMpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAocmVxdWVzdCwgdGV4dFN0YXR1cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRleHRTdGF0dXMgPT09ICdwYXJzZXJlcnJvcicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydChSZXNvdXJjZXMuQkFEX1JFU1BPTlNFKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5jYWxsYmFjayh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgU3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge31cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8gYWpheCByZXF1ZXN0IHRvIGxvYWQgaHRtbCByZXNwb25zZSBpbiBhIGdpdmVuIGNvbnRhaW5lclxuICAgICAgICAvLyBAcGFyYW0gLSByZXFOYW1lIC0gU3RyaW5nIC0gbmFtZSBvZiB0aGUgcmVxdWVzdFxuICAgICAgICAvLyBAcGFyYW0gLSB1cmwgLSBTdHJpbmcgLSB1cmkgZm9yIHRoZSByZXF1ZXN0XG4gICAgICAgIC8vIEBwYXJhbSAtIGRhdGEgLSBuYW1lL3ZhbHVlIHBhaXIgZGF0YSByZXF1ZXN0XG4gICAgICAgIC8vIEBwYXJhbSAtIGNhbGxiYWNrIC0gZnVuY3Rpb24gLSBjYWxsYmFjayBmdW5jdGlvbiB0byBiZSBjYWxsZWRcbiAgICAgICAgLy8gQHBhcmFtIC0gc2VsZWN0b3IgLSBzdHJpbmcgLSBpZCBvZiB0aGUgY29udGFpbmVyIGRpdi9zcGFuXG4gICAgICAgIC8vICgjbXljb250YWluZXIpIC0gaXQgbXVzdCBzdGFydCB3aXRoICcjJ1xuICAgICAgICBsb2FkOiBmdW5jdGlvbiAob3B0aW9ucykge1xuXG4gICAgICAgICAgICB2YXIgdGhpc0FqYXggPSB0aGlzO1xuXG4gICAgICAgICAgICAvLyBkbyBub3QgYm90aGVyIGlmIHRoZSByZXF1ZXN0IGlzIGFscmVhZHkgaW4gcHJvZ3Jlc3NcbiAgICAgICAgICAgIC8vIGFuZCBsZXQgZ28gbnVsbCByZXFuYW1lXG4gICAgICAgICAgICBpZiAoIW9wdGlvbnMucmVxTmFtZSB8fCAhdGhpcy5jdXJyZW50UmVxdWVzdHNbb3B0aW9ucy5yZXFOYW1lXSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFJlcXVlc3RzW29wdGlvbnMucmVxTmFtZV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIC8vIG1ha2UgdGhlIHNlcnZlciBjYWxsXG4gICAgICAgICAgICAgICAgalF1ZXJ5LmFqYXgoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2h0bWwnLFxuICAgICAgICAgICAgICAgICAgICB1cmw6IG9wdGlvbnMudXJsLFxuICAgICAgICAgICAgICAgICAgICBjYWNoZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogb3B0aW9ucy5kYXRhLFxuXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXNwb25zZSwgdGV4dFN0YXR1cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc0FqYXguY3VycmVudFJlcXVlc3RzW29wdGlvbnMucmVxTmFtZV0gPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuc2VsZWN0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkob3B0aW9ucy5zZWxlY3RvcikuaHRtbChyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmNhbGxiYWNrICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuY2FsbGJhY2socmVzcG9uc2UsIHRleHRTdGF0dXMpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHJlcXVlc3QsIHRleHRTdGF0dXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZXh0U3RhdHVzID09PSAncGFyc2VyZXJyb3InKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoUmVzb3VyY2VzLkJBRF9SRVNQT05TRSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuY2FsbGJhY2sobnVsbCwgdGV4dFN0YXR1cyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICB2aXBpbnNpZGVyZXZlbnRzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciAkdmlwaW5zaWRlciA9ICQoJy52aXBpbnNpZGVyLWNvbnRhaW5lcicpO1xuICAgICAgICAgICAgLy92aXBmb3JtID0gJCgnLlZpcGluc2lkZXJGb3JtJyk7XG4gICAgICAgICR2aXBpbnNpZGVyLmZpbmQoJy50cmlnZ2VyX3NpbmdsZXVwbG9hZCBpbnB1dFt0eXBlPVwiZmlsZVwiXScpLnVuYmluZCgnY2hhbmdlJykuY2hhbmdlKGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpLFxuICAgICAgICAgICAgICAgIGRhdGEgPSBuZXcgRm9ybURhdGEoKSxcbiAgICAgICAgICAgICAgICBmaWxlcyA9ICQoJyNmaWxlaWQnKS5nZXQoMCkuZmlsZXMsXG4gICAgICAgICAgICAgICAgZm9ybSA9ICQodGhpcykuY2xvc2VzdCgnZm9ybScpO1xuICAgICAgICAgICAgLy9pZigkKHRoaXMpLmhhc0NsYXNzKCdlcnJvcmNsaWVudCcpKXsgJCh0aGlzKS50cmlnZ2VyKCdibHVyJyk7IH1cbiAgICAgICAgICAgIHZhciB0b3RhbHNpemUgPSAwO1xuICAgICAgICAgICAgdG90YWxzaXplID0gJCgnLnZpcC11cGxvYWRmb3JtLWhvbGRlciAucmVtb3ZlX3NpbmdsZXVwbG9hZCBzcGFuLnVwZGF0ZXRleHQnKS5lcSgwKS5hdHRyKCd2YWx1ZScpO1xuXG4gICAgICAgICAgICBpZiAoKHRoaXMuZmlsZXNbMF0uc2l6ZSAvIDEwMjQgLyAxMDI0KSA+IDIgfHwgdG90YWxzaXplID4gMikge1xuICAgICAgICAgICAgICAgICR2aXBpbnNpZGVyLmZpbmQoJy52aXAtdXBsb2FkZm9ybS1ob2xkZXIgLmZpbGUtc2l6ZS1leGNlZWQtZXJyb3InKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGV4dGVuc2lvbiA9IHRoaXMuZmlsZXNbMF0ubmFtZS5zcGxpdCgnLicpWzFdLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICBpZiAoKGV4dGVuc2lvbiAhPSAnanBnJykgJiYgKGV4dGVuc2lvbiAhPSAncG5nJykgJiYgKGV4dGVuc2lvbiAhPSAnUE5HJykgJiYgKGV4dGVuc2lvbiAhPSAnanBlZycpICYmIChleHRlbnNpb24gIT0gJ3BkZicpICYmIChleHRlbnNpb24gIT0gJ2dpZicpICYmIChleHRlbnNpb24gIT0gJ2RvYycpICYmIChleHRlbnNpb24gIT0gJ2RvY3gnKSAmJiAoZXh0ZW5zaW9uICE9ICdwYWdlcycpKSB7XG4gICAgICAgICAgICAgICAgJHZpcGluc2lkZXIuZmluZCgnLnZpcC11cGxvYWRmb3JtLWhvbGRlciAuZmlsZS1mb3JtYXQtZXhjZWVkLWVycm9yJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICR2aXBpbnNpZGVyLmZpbmQoJy52aXAtdXBsb2FkZm9ybS1ob2xkZXIgLmZpbGUtZm9ybWF0LWV4Y2VlZC1lcnJvcicpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgICAgICAgICAkdmlwaW5zaWRlci5maW5kKCcudmlwLXVwbG9hZGZvcm0taG9sZGVyIC5maWxlLXNpemUtZXhjZWVkLWVycm9yJykuYWRkQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgICAgIGZvcm0uZmluZCgnLnByb2dyZXNzYmFyJykuZmFkZUluKDUwMCk7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmlsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBkYXRhLmFwcGVuZChmaWxlc1tpXS5uYW1lLCBmaWxlc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB4aHIudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoJ3Byb2dyZXNzJywgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgICAgICAgIGlmIChldnQubGVuZ3RoQ29tcHV0YWJsZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcHJvZ3Jlc3MgPSBNYXRoLnJvdW5kKGV2dC5sb2FkZWQgKiAxMDAgLyBldnQudG90YWwpO1xuICAgICAgICAgICAgICAgICAgICBmb3JtLmZpbmQoJy5wcm9ncmVzc2JhciAuY291bnQnKS50ZXh0KHByb2dyZXNzICsgJyUgQ29tcGxldGUnKTtcbiAgICAgICAgICAgICAgICAgICAgZm9ybS5maW5kKCcucHJvZ3Jlc3NiYXIgLnByb2dyZXNzbG9hZCcpLndpZHRoKHByb2dyZXNzICsgJyUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBmYWxzZSk7XG4gICAgICAgICAgICB4aHIub3BlbignUE9TVCcsIGZvcm0uYXR0cignYWN0aW9uJykpO1xuICAgICAgICAgICAgeGhyLnNlbmQoZGF0YSk7XG5cbiAgICAgICAgICAgIHhoci51cGxvYWQuYWRkRXZlbnRMaXN0ZW5lcignbG9hZGVuZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBmb3JtLmZpbmQoJyNmaWxlaWQnKS52YWwoJycpO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBmb3JtLmZpbmQoJy5wcm9ncmVzc2JhcicpLmZhZGVPdXQoMTAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtLmZpbmQoJy5wcm9ncmVzc2JhciAuY291bnQnKS50ZXh0KCcwJScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybS5maW5kKCcucHJvZ3Jlc3NiYXIgLnByb2dyZXNzbG9hZCcpLndpZHRoKCcwJyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkKCcudmlwLXVwbG9hZGZvcm0taG9sZGVyIC5maWxlbGlzdCcpLmh0bWwoeGhyLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgICAgICAgcmFwYWxhaW5zaWRlci52aXBpbnNpZGVyZXZlbnRzKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPD0gNzY3KSB7XG4gICAgICAgICAgICAkKCcuaW5zaWRlcl9ib2R5LnJhcGFsYV9kZXZpY2UgW21heGxlbmd0aF0nKS5iaW5kKCdrZXlwcmVzcyBrZXl1cCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xuICAgICAgICAgICAgICAgIHZhciB2YWwgPSAkdGhpcy52YWwoKTtcbiAgICAgICAgICAgICAgICB2YXIgdmFsTGVuZ3RoID0gdmFsLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB2YXIgbWF4Q291bnQgPSAkdGhpcy5hdHRyKCdtYXhsZW5ndGgnKTtcbiAgICAgICAgICAgICAgICBpZiAodmFsTGVuZ3RoID4gbWF4Q291bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMudmFsKCR0aGlzLnZhbCgpLnN1YnN0cmluZygwLCBtYXhDb3VudCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgJHZpcGluc2lkZXIuZmluZCgnLnJlbW92ZScpLnVuYmluZCgnY2xpY2snKS5jbGljayhmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdmFyIGZpbGVuYW1lID0gJCh0aGlzKS5hdHRyKCdkYXRhLWZpbGUnKTtcbiAgICAgICAgICAgIHZhciBmb3JtID0gJCh0aGlzKS5jbG9zZXN0KCdmb3JtJyk7XG4gICAgICAgICAgICB2YXIgdXJsID0gZm9ybS5hdHRyKCdhY3Rpb24nKTtcbiAgICAgICAgICAgIHZhciBmaW5hbFVSTCA9IHV0aWwuYXBwZW5kUGFyYW1Ub1VSTCh1cmwsICdmaWxlbmFtZScsIGZpbGVuYW1lKTtcbiAgICAgICAgICAgIGFqYXgubG9hZCh7XG4gICAgICAgICAgICAgICAgdXJsOiBmaW5hbFVSTCxcbiAgICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJy52aXAtdXBsb2FkZm9ybS1ob2xkZXIgLmZpbGVsaXN0JykuaHRtbChkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgcmFwYWxhaW5zaWRlci52aXBpbnNpZGVyZXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgfSxcblxuICAgIGZvcm1QcmVwYXJlOiBmdW5jdGlvbiAob3B0cykge1xuXG4gICAgICAgIHZhciAkZm9ybSwgJGNvbnRpbnVlLCAkcmVxdWlyZWRJbnB1dHMsIHZhbGlkYXRvcjtcblxuICAgICAgICB2YXIgaGFzRW1wdHlSZXF1aXJlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIGZpbHRlciBvdXQgb25seSB0aGUgdmlzaWJsZSBmaWVsZHNcbiAgICAgICAgICAgIHZhciByZXF1aXJlZFZhbHVlcyA9ICRyZXF1aXJlZElucHV0cy5maWx0ZXIoJzp2aXNpYmxlJykubWFwKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJCh0aGlzKS52YWwoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuICQuaW5BcnJheSgnJywgcmVxdWlyZWRWYWx1ZXMpICE9IC0xO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciB2YWxpZGF0ZUZvcm0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBvbmx5IHZhbGlkYXRlIGZvcm0gd2hlbiBhbGwgcmVxdWlyZWQgZmllbGRzIGFyZSBmaWxsZWQgdG8gYXZvaWRcbiAgICAgICAgICAgIC8vIHRocm93aW5nIGVycm9ycyBvbiBlbXB0eSBmb3JtXG4gICAgICAgICAgICBpZiAoIWhhc0VtcHR5UmVxdWlyZWQoKSAmJiB2YWxpZGF0b3IuZm9ybSgpKSB7XG4gICAgICAgICAgICAgICAgJGNvbnRpbnVlLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJykucmVtb3ZlQ2xhc3MoJ2J1dHRvbl9pbnZpc2libGUnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdHMudHlwZSA9PSAnZGlzYWJsZScpIHtcbiAgICAgICAgICAgICAgICAgICAgJGNvbnRpbnVlLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJGNvbnRpbnVlLmFkZENsYXNzKCdidXR0b25faW52aXNpYmxlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciB2YWxpZGF0ZUVsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCQodGhpcykudmFsKCkgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdHMudHlwZSA9PSAnZGlzYWJsZScpIHtcbiAgICAgICAgICAgICAgICAgICAgJGNvbnRpbnVlLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJGNvbnRpbnVlLmFkZENsYXNzKCdidXR0b25faW52aXNpYmxlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBlbmFibGUgY29udGludWUgYnV0dG9uIG9uIGxhc3QgcmVxdWlyZWQgZmllbGQgdGhhdCBpcyB2YWxpZFxuICAgICAgICAgICAgICAgIC8vIG9ubHkgdmFsaWRhdGUgc2luZ2xlIGZpZWxkXG4gICAgICAgICAgICAgICAgaWYgKHZhbGlkYXRvci5lbGVtZW50KHRoaXMpICYmICFoYXNFbXB0eVJlcXVpcmVkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgJGNvbnRpbnVlLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJykucmVtb3ZlQ2xhc3MoJ2J1dHRvbl9pbnZpc2libGUnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAob3B0cy50eXBlID09ICdkaXNhYmxlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgJGNvbnRpbnVlLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkY29udGludWUuYWRkQ2xhc3MoJ2J1dHRvbl9pbnZpc2libGUnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLy90eXBlIG9wdGlvbmFsIHZhbHVlIGRpc2FibGUgb3Igb3BhY2l0eVxuICAgICAgICAkZm9ybSA9ICQob3B0cy5mb3JtU2VsZWN0b3IpO1xuICAgICAgICAkY29udGludWUgPSAkKG9wdHMuY29udGludWVTZWxlY3Rvcik7XG4gICAgICAgIHZhbGlkYXRvciA9ICRmb3JtLnZhbGlkYXRlKCk7XG4gICAgICAgICRyZXF1aXJlZElucHV0cyA9ICQoJy5yZXF1aXJlZCcsICRmb3JtKS5maWx0ZXIoJzppbnB1dCcpO1xuICAgICAgICB2YWxpZGF0ZUZvcm0oKTtcbiAgICAgICAgLy8gc3RhcnQgbGlzdGVuaW5nXG4gICAgICAgICRyZXF1aXJlZElucHV0cy5jaGFuZ2UodmFsaWRhdGVFbCk7XG4gICAgICAgICRyZXF1aXJlZElucHV0cy5maWx0ZXIoJ2lucHV0JykuYmx1cih2YWxpZGF0ZUVsKTtcbiAgICB9LFxuXG4gICAgY3VzdG9tc2VsZWN0ZXZlbnRzYjogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoISQoJ2JvZHknKS5oYXNDbGFzcygncmFwYWxhX2RldmljZScpKSB7XG4gICAgICAgICAgICB2YXIgJGNvbiA9ICQoJ2JvZHknKTtcbiAgICAgICAgICAgICRjb24uZmluZCgnLmN1c3RvbWl6ZWQtc2VsZWN0JykuZmluZCgnc2VsZWN0JykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCQodGhpcykuYXR0cignZGlzYWJsZWQnKSkge1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnNlbGVjdGJveCgnZGlzYWJsZScpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuc2VsZWN0Ym94KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICQoJy5zYk9wdGlvbnMgbGk6bGFzdCcpLmFkZENsYXNzKCdsYXN0Jyk7XG4gICAgICAgICAgICB9KS5mb2N1cyhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5uZXh0KCcuc2JIb2xkZXInKS50cmlnZ2VyKCdmb2N1cycpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfVxuXG4gICAgfSxcblxuICAgIHRleHRhcmVhcmFwYWxhOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJ3RleHRhcmVhW21heGxlbmd0aF0nKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNoYXJjb3VudCgkKHRoaXMpKTtcbiAgICAgICAgICAgIC8vIHRyaWdnZXIgdGhlIGtleWRvd24gZXZlbnQgc28gdGhhdCBhbnkgZXhpc3RpbmcgY2hhcmFjdGVyIGRhdGEgaXMgY2FsY3VsYXRlZFxuICAgICAgICB9KS5vbigna2V5dXAga2V5cHJlc3MnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjaGFyY291bnQoJCh0aGlzKSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZ1bmN0aW9uIGNoYXJjb3VudCgkdGhpcykge1xuICAgICAgICAgICAgdmFyIGNoYXJhY3RlckxpbWl0ID0gJzEyMDAnO1xuICAgICAgICAgICAgdmFyIGNoYXJSZW1haW5zID0gY2hhcmFjdGVyTGltaXQgLSAkdGhpcy52YWwoKS50cmltKCkubGVuZ3RoO1xuICAgICAgICAgICAgLy92YXIgY2hhckNvdW50Q29udGFpbmVyID0gJyc7XG4gICAgICAgICAgICB2YXIgY2hhckNvdW50SHRtbCA9ICdDaGFyYWN0ZXJzIFJlbWFpbmluZyAnICsgY2hhclJlbWFpbnM7XG4gICAgICAgICAgICBpZiAoJHRoaXMuaGFzQ2xhc3MoJ3ZpcC10ZXh0YXJlYScpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCR0aGlzLm5leHQoJ2Rpdi5jaGFyLWNvdW50JykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJzxkaXYgY2xhc3M9XCJjaGFyLWNvdW50XCIvPicpLmluc2VydEFmdGVyKCR0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJHRoaXMubmV4dCgnZGl2LmNoYXItY291bnQnKS5odG1sKGNoYXJDb3VudEh0bWwpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoJHRoaXMucHJldignZGl2LmNoYXItY291bnQnKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnPGRpdiBjbGFzcz1cImNoYXItY291bnRcIi8+JykuaW5zZXJ0QmVmb3JlKCR0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJHRoaXMucHJldignZGl2LmNoYXItY291bnQnKS5odG1sKGNoYXJDb3VudEh0bWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICB9LFxuXG4gICAgY2xlYXJidXR0b25mdW5jdDogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoJCgnI2RpYWxvZ2NvbnRhaW5lcjEyMycpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICQoJyNkaWFsb2djb250YWluZXIxMjMnKS5maW5kKCcuZm9ybWZpZWxkJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCQodGhpcykuZmluZCgnLmZpZWxkLXdyYXBwZXIgLmNsZWFyYnV0dG9uJykubGVuZ3RoID09IDAgJiYgJCh0aGlzKS5maW5kKCcuZmllbGQtd3JhcHBlciBpbnB1dFt0eXBlPVwidGV4dFwiXScpLmxlbmd0aCA+IDAgfHwgJCh0aGlzKS5maW5kKCcuZmllbGQtd3JhcHBlciBpbnB1dFt0eXBlPVwicGFzc3dvcmRcIl0nKS5sZW5ndGggPiAwIHx8ICQodGhpcykuZmluZCgnLmZpZWxkLXdyYXBwZXIgdGV4dGFyZWEnKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLmZpZWxkLXdyYXBwZXInKS5hcHBlbmQoJzxhIGNsYXNzPVwiY2xlYXJidXR0b25cIj48L2E+Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgJCgnYm9keScpLmZpbmQoJyNkaWFsb2djb250YWluZXIxMjMgLmZpZWxkLXdyYXBwZXIgaW5wdXQsIHRleHRhcmVhJykub24oJ2tleXVwIGlucHV0IGJsdXInLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoJCh0aGlzKS52YWwoKSAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS52YWwoKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJ2EuY2xlYXJidXR0b24nKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnYS5jbGVhcmJ1dHRvbicpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoJ2JvZHknKS5maW5kKCcjZGlhbG9nY29udGFpbmVyMTIzIC5maWVsZC13cmFwcGVyIGEuY2xlYXJidXR0b24nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY2hhcmFjdGVyTGltaXQgPSAnQ2hhcmFjdGVycyBSZW1haW5pbmcgMTIwMCc7XG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCdpbnB1dCcpLnZhbCgnJyk7XG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCd0ZXh0YXJlYScpLnZhbCgnJyk7XG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5maWVsZC13cmFwcGVyJykuZmluZCgnc3BhbicpLnJlbW92ZSgpO1xuICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZmllbGQtd3JhcHBlcicpLmZpbmQoJy5yZXF1aXJlZCcpLnJlbW92ZUNsYXNzKCdlcnJvcmNsaWVudCcpO1xuICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnYS5jbGVhcmJ1dHRvbicpLmhpZGUoKTtcbiAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCAnKS5maW5kKCcuZm9ybS1yb3cnKS5yZW1vdmVDbGFzcygnaW5wdXRsYWJlbCcpO1xuICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmZvcm0tcm93ICwgLmxhYmVsIHNwYW4nKS5yZW1vdmVDbGFzcygnaW5wdXRsYWJlbCcpO1xuICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnc3Bhbi5sb2dlcnJvciAsIC5leGlzdGluZ19yZWdpc3RlcicpLmhpZGUoKTtcbiAgICAgICAgICAgICQoJ2Rpdi5jaGFyLWNvdW50JykuaHRtbChjaGFyYWN0ZXJMaW1pdCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxufTtcbm1vZHVsZS5leHBvcnRzID0gcmFwYWxhaW5zaWRlcjtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGFkZFByb2R1Y3RUb0NhcnQgPSByZXF1aXJlKCcuL3Byb2R1Y3QvYWRkVG9DYXJ0JyksXG4gICAgYWpheCA9IHJlcXVpcmUoJy4uL2FqYXgnKSxcbiAgICBxdWlja3ZpZXcgPSByZXF1aXJlKCcuLi9xdWlja3ZpZXcnKSxcbiAgICBhY2NvdW50ID0gcmVxdWlyZSgnLi9hY2NvdW50JyksXG4gICAgdXRpbCA9IHJlcXVpcmUoJy4uL3V0aWwnKTtcblxuLyoqXG4gKiBAZnVuY3Rpb25cbiAqIEBkZXNjcmlwdGlvbiBMb2FkcyBhZGRyZXNzIGRldGFpbHMgdG8gYSBnaXZlbiBhZGRyZXNzIGFuZCBmaWxscyB0aGUgYWRkcmVzcyBmb3JtXG4gKiBAcGFyYW0ge1N0cmluZ30gYWRkcmVzc0lEIFRoZSBJRCBvZiB0aGUgYWRkcmVzcyB0byB3aGljaCBkYXRhIHdpbGwgYmUgbG9hZGVkXG4gKi9cbmZ1bmN0aW9uIHBvcHVsYXRlRm9ybShhZGRyZXNzSUQsICRmb3JtKSB7XG4gICAgLy8gbG9hZCBhZGRyZXNzIGRldGFpbHNcbiAgICB2YXIgdXJsID0gVXJscy5naWZ0UmVnQWRkICsgYWRkcmVzc0lEO1xuICAgIGFqYXguZ2V0SnNvbih7XG4gICAgICAgIHVybDogdXJsLFxuICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIGlmICghZGF0YSB8fCAhZGF0YS5hZGRyZXNzKSB7XG4gICAgICAgICAgICAgICAgd2luZG93LmFsZXJ0KFJlc291cmNlcy5SRUdfQUREUl9FUlJPUik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZmlsbCB0aGUgZm9ybVxuICAgICAgICAgICAgJGZvcm0uZmluZCgnW25hbWUkPVwiX2FkZHJlc3NpZFwiXScpLnZhbChkYXRhLmFkZHJlc3MuSUQpO1xuICAgICAgICAgICAgJGZvcm0uZmluZCgnW25hbWUkPVwiX2ZpcnN0bmFtZVwiXScpLnZhbChkYXRhLmFkZHJlc3MuZmlyc3ROYW1lKTtcbiAgICAgICAgICAgICRmb3JtLmZpbmQoJ1tuYW1lJD1cIl9sYXN0bmFtZVwiXScpLnZhbChkYXRhLmFkZHJlc3MubGFzdE5hbWUpO1xuICAgICAgICAgICAgJGZvcm0uZmluZCgnW25hbWUkPVwiX2FkZHJlc3MxXCJdJykudmFsKGRhdGEuYWRkcmVzcy5hZGRyZXNzMSk7XG4gICAgICAgICAgICAkZm9ybS5maW5kKCdbbmFtZSQ9XCJfYWRkcmVzczJcIl0nKS52YWwoZGF0YS5hZGRyZXNzLmFkZHJlc3MyKTtcbiAgICAgICAgICAgICRmb3JtLmZpbmQoJ1tuYW1lJD1cIl9jaXR5XCJdJykudmFsKGRhdGEuYWRkcmVzcy5jaXR5KTtcbiAgICAgICAgICAgICRmb3JtLmZpbmQoJ1tuYW1lJD1cIl9jb3VudHJ5XCJdJykudmFsKGRhdGEuYWRkcmVzcy5jb3VudHJ5Q29kZSkudHJpZ2dlcignY2hhbmdlJyk7XG4gICAgICAgICAgICAkZm9ybS5maW5kKCdbbmFtZSQ9XCJfcG9zdGFsXCJdJykudmFsKGRhdGEuYWRkcmVzcy5wb3N0YWxDb2RlKTtcbiAgICAgICAgICAgICRmb3JtLmZpbmQoJ1tuYW1lJD1cIl9zdGF0ZVwiXScpLnZhbChkYXRhLmFkZHJlc3Muc3RhdGVDb2RlKTtcbiAgICAgICAgICAgICRmb3JtLmZpbmQoJ1tuYW1lJD1cIl9waG9uZVwiXScpLnZhbChkYXRhLmFkZHJlc3MucGhvbmUpO1xuICAgICAgICAgICAgLy8gJGZvcm0ucGFyZW50KCdmb3JtJykudmFsaWRhdGUoKS5mb3JtKCk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuLyoqXG4gKiBAcHJpdmF0ZVxuICogQGZ1bmN0aW9uXG4gKiBAZGVzY3JpcHRpb24gSW5pdGlhbGl6ZXMgZXZlbnRzIGZvciB0aGUgZ2lmdCByZWdpc3RyYXRpb25cbiAqL1xuZnVuY3Rpb24gaW5pdGlhbGl6ZUV2ZW50cygpIHtcbiAgICB2YXIgJGV2ZW50QWRkcmVzc0Zvcm0gPSAkKCdmb3JtW25hbWUkPVwiX2dpZnRyZWdpc3RyeVwiXScpLFxuICAgICAgICAkYmVmb3JlQWRkcmVzcyA9ICRldmVudEFkZHJlc3NGb3JtLmZpbmQoJ2ZpZWxkc2V0W25hbWU9XCJhZGRyZXNzLWJlZm9yZVwiXScpLFxuICAgICAgICAkYWZ0ZXJBZGRyZXNzID0gJGV2ZW50QWRkcmVzc0Zvcm0uZmluZCgnZmllbGRzZXRbbmFtZT1cImFkZHJlc3MtYWZ0ZXJcIl0nKTtcblxuICAgICQoJy51c2VwcmVldmVudCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gZmlsdGVyIG91dCBzdG9yZWZyb250IHRvb2xraXRcbiAgICAgICAgJCgnOmlucHV0JywgJGJlZm9yZUFkZHJlc3MpLm5vdCgnW2lkXj1cImV4dFwiXScpLm5vdCgnc2VsZWN0W25hbWUkPVwiX2FkZHJlc3NCZWZvcmVMaXN0XCJdJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZmllbGROYW1lID0gJCh0aGlzKS5hdHRyKCduYW1lJyksXG4gICAgICAgICAgICAgICAgJGFmdGVyRmllbGQgPSAkYWZ0ZXJBZGRyZXNzLmZpbmQoJ1tuYW1lPVwiJyArIGZpZWxkTmFtZS5yZXBsYWNlKCdCZWZvcmUnLCAnQWZ0ZXInKSArICdcIl0nKTtcbiAgICAgICAgICAgICRhZnRlckZpZWxkLnZhbCgkKHRoaXMpLnZhbCgpKS50cmlnZ2VyKCdjaGFuZ2UnKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAkZXZlbnRBZGRyZXNzRm9ybS5vbignY2hhbmdlJywgJ3NlbGVjdFtuYW1lJD1cIl9hZGRyZXNzQmVmb3JlTGlzdFwiXScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGFkZHJlc3NJRCA9ICQodGhpcykudmFsKCk7XG4gICAgICAgIGlmIChhZGRyZXNzSUQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcG9wdWxhdGVGb3JtKGFkZHJlc3NJRCwgJGJlZm9yZUFkZHJlc3MpO1xuICAgIH0pXG4gICAgICAgIC5vbignY2hhbmdlJywgJ3NlbGVjdFtuYW1lJD1cIl9hZGRyZXNzQWZ0ZXJMaXN0XCJdJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGFkZHJlc3NJRCA9ICQodGhpcykudmFsKCk7XG4gICAgICAgICAgICBpZiAoYWRkcmVzc0lELmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBvcHVsYXRlRm9ybShhZGRyZXNzSUQsICRhZnRlckFkZHJlc3MpO1xuICAgICAgICB9KTtcblxuICAgICQoJ2Zvcm1bbmFtZSQ9XCJfZ2lmdHJlZ2lzdHJ5X2l0ZW1zXCJdJykub24oJ2NsaWNrJywgJy5pdGVtLWRldGFpbHMgYScsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdmFyIHByb2R1Y3RMaXN0SUQgPSAkKCdpbnB1dFtuYW1lPXByb2R1Y3RMaXN0SURdJykudmFsKCk7XG4gICAgICAgIHF1aWNrdmlldy5zaG93KHtcbiAgICAgICAgICAgIHVybDogZS50YXJnZXQuaHJlZixcbiAgICAgICAgICAgIHNvdXJjZTogJ2dpZnRyZWdpc3RyeScsXG4gICAgICAgICAgICBwcm9kdWN0bGlzdGlkOiBwcm9kdWN0TGlzdElEXG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuXG5leHBvcnRzLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgaW5pdGlhbGl6ZUV2ZW50cygpO1xuICAgIGFkZFByb2R1Y3RUb0NhcnQoKTtcbiAgICAvL1N0YXJ0IEpJUkEgUFJFVi0zMzMgOiBPbiBjbGljayBvZiBGb3Jnb3QgUGFzc3dvcmQgbGluayBuYXZpZ2F0ZXMgdG8gdGhlIHBhZ2UgaW5zdGVhZCBvZiBvdmVybGF5LlxuICAgIGFjY291bnQuaW5pdENhcnRMb2dpbigpO1xuICAgIHV0aWwuc2V0RGVsZXRlQ29uZmlybWF0aW9uKCcuaXRlbS1saXN0JywgU3RyaW5nLmZvcm1hdChSZXNvdXJjZXMuQ09ORklSTV9ERUxFVEUsIFJlc291cmNlcy5USVRMRV9HSUZUUkVHSVNUUlkpKTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBjb21wYXJlV2lkZ2V0ID0gcmVxdWlyZSgnLi4vY29tcGFyZS13aWRnZXQnKSxcbiAgICBwcm9kdWN0VGlsZSA9IHJlcXVpcmUoJy4uL3Byb2R1Y3QtdGlsZScpLFxuICAgIHByb2dyZXNzID0gcmVxdWlyZSgnLi4vcHJvZ3Jlc3MnKSxcbiAgICB1aWV2ZW50cyA9IHJlcXVpcmUoJy4uL3VpZXZlbnRzJyksXG4gICAgLy9pbWFnZXNMb2FkZWQgPSByZXF1aXJlKCdpbWFnZXNsb2FkZWQnKSxcbiAgICB1dGlsID0gcmVxdWlyZSgnLi4vdXRpbCcpO1xuXG5mdW5jdGlvbiBpbmZpbml0ZVNjcm9sbCgpIHtcbiAgICAvLyBnZXR0aW5nIHRoZSBoaWRkZW4gZGl2LCB3aGljaCBpcyB0aGUgcGxhY2Vob2xkZXIgZm9yIHRoZSBuZXh0IHBhZ2VcbiAgICB2YXIgbG9hZGluZ1BsYWNlSG9sZGVyID0gJCgnLmluZmluaXRlLXNjcm9sbC1wbGFjZWhvbGRlcltkYXRhLWxvYWRpbmctc3RhdGU9XCJ1bmxvYWRlZFwiXScpO1xuICAgIC8vIGdldCB1cmwgaGlkZGVuIGluIERPTVxuICAgIHZhciBncmlkVXJsID0gbG9hZGluZ1BsYWNlSG9sZGVyLmF0dHIoJ2RhdGEtZ3JpZC11cmwnKTtcbiAgICBpZiAobG9hZGluZ1BsYWNlSG9sZGVyLmxlbmd0aCA9PT0gMSAmJiB1dGlsLmVsZW1lbnRJblZpZXdwb3J0KGxvYWRpbmdQbGFjZUhvbGRlci5nZXQoMCksIDI1MCkpIHtcbiAgICAgICAgLy8gc3dpdGNoIHN0YXRlIHRvICdsb2FkaW5nJ1xuICAgICAgICAvLyAtIHN3aXRjaGVzIHN0YXRlLCBzbyB0aGUgYWJvdmUgc2VsZWN0b3IgaXMgb25seSBtYXRjaGluZyBvbmNlXG4gICAgICAgIC8vIC0gc2hvd3MgbG9hZGluZyBpbmRpY2F0b3JcbiAgICAgICAgbG9hZGluZ1BsYWNlSG9sZGVyLmF0dHIoJ2RhdGEtbG9hZGluZy1zdGF0ZScsICdsb2FkaW5nJyk7XG4gICAgICAgIGxvYWRpbmdQbGFjZUhvbGRlci5hZGRDbGFzcygnaW5maW5pdGUtc2Nyb2xsLWxvYWRpbmcnKTtcblxuICAgICAgICAvLyBuYW1lZCB3cmFwcGVyIGZ1bmN0aW9uLCB3aGljaCBjYW4gZWl0aGVyIGJlIGNhbGxlZCwgaWYgY2FjaGUgaXMgaGl0LCBvciBhamF4IHJlcHNvbnNlIGlzIHJlY2VpdmVkXG4gICAgICAgIHZhciBmaWxsRW5kbGVzc1Njcm9sbENodW5rID0gZnVuY3Rpb24gKGh0bWwpIHtcbiAgICAgICAgICAgIGxvYWRpbmdQbGFjZUhvbGRlci5yZW1vdmVDbGFzcygnaW5maW5pdGUtc2Nyb2xsLWxvYWRpbmcnKTtcbiAgICAgICAgICAgIGxvYWRpbmdQbGFjZUhvbGRlci5hdHRyKCdkYXRhLWxvYWRpbmctc3RhdGUnLCAnbG9hZGVkJyk7XG4gICAgICAgICAgICAkKCdkaXYuc2VhcmNoLXJlc3VsdC1jb250ZW50JykuYXBwZW5kKGh0bWwpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIG9sZCBjb25kaXRpb24gZm9yIGNhY2hpbmcgd2FzIGAnc2Vzc2lvblN0b3JhZ2UnIGluIHdpbmRvdyAmJiBzZXNzaW9uU3RvcmFnZVtcInNjcm9sbC1jYWNoZV9cIiArIGdyaWRVcmxdYFxuICAgICAgICAvLyBpdCB3YXMgcmVtb3ZlZCB0byB0ZW1wb3JhcmlseSBhZGRyZXNzIFJBUC0yNjQ5XG5cbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHR5cGU6ICdHRVQnLFxuICAgICAgICAgICAgZGF0YVR5cGU6ICdodG1sJyxcbiAgICAgICAgICAgIHVybDogZ3JpZFVybCxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIC8vIHB1dCByZXNwb25zZSBpbnRvIGNhY2hlXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2VbJ3Njcm9sbC1jYWNoZV8nICsgZ3JpZFVybF0gPSByZXNwb25zZTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIG5vdGhpbmcgdG8gY2F0Y2ggaW4gY2FzZSBvZiBvdXQgb2YgbWVtb3J5IG9mIHNlc3Npb24gc3RvcmFnZVxuICAgICAgICAgICAgICAgICAgICAvLyBpdCB3aWxsIGZhbGwgYmFjayB0byBsb2FkIHZpYSBhamF4XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBVSVxuICAgICAgICAgICAgICAgIGZpbGxFbmRsZXNzU2Nyb2xsQ2h1bmsocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIHByb2R1Y3RUaWxlLmluaXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKiBAZnVuY3Rpb25cbiAqIEBkZXNjcmlwdGlvbiByZXBsYWNlcyBicmVhZGNydW1icywgbGVmdGhhbmQgbmF2IGFuZCBwcm9kdWN0IGxpc3Rpbmcgd2l0aCBhamF4IGFuZCBwdXRzIGEgbG9hZGluZyBpbmRpY2F0b3Igb3ZlciB0aGUgcHJvZHVjdCBsaXN0aW5nXG4gKi9cbmZ1bmN0aW9uIHVwZGF0ZVByb2R1Y3RMaXN0aW5nKHVybCkge1xuICAgIGlmICh1cmwgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgICQoJyNtYWluJykuYWRkQ2xhc3MoJ2hpZGVjb250ZW50Jyk7XG4gICAgcHJvZ3Jlc3Muc2hvdygnI21haW4nKTtcbiAgICAkKCcjbWFpbicpLmxvYWQodXRpbC5hcHBlbmRQYXJhbVRvVVJMKHVybCwgJ2Zvcm1hdCcsICdhamF4JyksIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2VhcmNoUmVmaW5tZW50LnNlYXJjaFJlZmluZW1lbnRUb2dnbGUoKTtcbiAgICAgICAgdWlldmVudHMuaW5pdCgpO1xuICAgICAgICBjb21wYXJlV2lkZ2V0LmluaXQoKTtcbiAgICAgICAgcHJvZHVjdFRpbGUuaW5pdCgpO1xuICAgICAgICBvd2xjYXJvdXNlbCgpO1xuICAgICAgICAvKiAkKCcuc2Nyb2xsYWJsZScpLmVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAkKHRoaXMpLnNsaW1TY3JvbGwoe1xuICAgICAgICAgICAgICAgICBzaXplOiAnMTBweCcsXG4gICAgICAgICAgICAgICAgIGhlaWdodDogJzIwMHB4JyxcbiAgICAgICAgICAgICAgICAgcmFpbFZpc2libGU6IHRydWUsXG4gICAgICAgICAgICAgICAgIGFsd2F5c1Zpc2libGU6IHRydWVcbiAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgfSk7Ki9cblxuICAgICAgICBwcm9ncmVzcy5oaWRlKCk7XG4gICAgICAgICQoJyNtYWluJykucmVtb3ZlQ2xhc3MoJ2hpZGVjb250ZW50Jyk7XG4gICAgICAgIGhpc3RvcnkucHVzaFN0YXRlKHVuZGVmaW5lZCwgJycsIHVybCk7XG4gICAgICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtzY3JvbGxUb3A6IDB9LCAnZmFzdCcpO1xuICAgICAgICBpZiAoJCgnLnB0X3Byb2R1Y3Qtc2VhcmNoLXJlc3VsdCAuc2VhcmNoLWJsaycpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICQoJy5wdF9wcm9kdWN0LXNlYXJjaC1yZXN1bHQnKS5maW5kKCcjcHJpbWFyeScpLmFkZENsYXNzKCdzZWFyY2gtcmVzdWx0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCQoJy5yZWZpbmUtZGlzcGxheS5yZWZpbmUtdmFsdWVzIC5icmVhZGNydW1iLXJlZmluZW1lbnQnKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAkKCcucHRfcHJvZHVjdC1zZWFyY2gtcmVzdWx0LnNlYXJjaHJlc3VsdCcpLmZpbmQoJyNwcmltYXJ5JykuYWRkQ2xhc3MoJ3NlYXJjaC1yZXN1bHQnKTtcbiAgICAgICAgICAgICQoJy5wdF9wcm9kdWN0LXNlYXJjaC1yZXN1bHQuY2F0ZWdvcnlsYW5kaW5nJykuZmluZCgnI3ByaW1hcnknKS5hZGRDbGFzcygnc2VhcmNoLXJlc3VsdCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJCgnLnB0X3Byb2R1Y3Qtc2VhcmNoLXJlc3VsdC5zZWFyY2hyZXN1bHQnKS5maW5kKCcjcHJpbWFyeScpLmFkZENsYXNzKCdzZWFyY2gtcmVzdWx0Jyk7XG4gICAgICAgICAgICAkKCcucHRfcHJvZHVjdC1zZWFyY2gtcmVzdWx0LmNhdGVnb3J5bGFuZGluZycpLmZpbmQoJyNwcmltYXJ5JykucmVtb3ZlQ2xhc3MoJ3NlYXJjaC1yZXN1bHQnKTtcbiAgICAgICAgfVxuICAgICAgICBncmlkU3luY2hlaWdodCgpO1xuICAgICAgICAkKCcjc2Vjb25kYXJ5JykucmVtb3ZlQ2xhc3MoJ3Zpc2libGUtaGlkZGVuJykuYWRkQ2xhc3MoJ3NlY29uZGFyeS1oaWRlJyk7XG4gICAgfSk7XG59XG5cbi8vIHVwZGF0ZXMgdGhlIGdyaWQgdXNpbmcgdGhlICdwb3N0IGhhc2gnIHJlZmluZW1lbnQgdmFsdWVzXG5mdW5jdGlvbiBncmlkU3luY2hlaWdodCgpIHtcbiAgICAkKCcudGlsZXMtY29udGFpbmVyIC5wcm9kdWN0LXRpbGUnKS5zeW5jSGVpZ2h0KCk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUdyaWQoKSB7XG4gICAgaWYgKHV0aWwucmVhZENvb2tpZSgnc2VsZWN0ZWRPcHRpb24nKSAmJiB3aW5kb3cubG9jYXRpb24uaGFzaC5sZW5ndGggPT0gMCAmJiB3aW5kb3cubG9jYXRpb24uaHJlZi5pbmRleE9mKCdzcnVsZT0nKSA9PSAtMSAmJiAkKCcuc29ydGl0ZW0tYmxrJykuaXMoJzp2aXNpYmxlJykpIHtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSAnc3J1bGU9JyArIHV0aWwucmVhZENvb2tpZSgnc2VsZWN0ZWRPcHRpb24nKTtcbiAgICB9XG5cbiAgICBpZiAod2luZG93LmxvY2F0aW9uLmhhc2gpIHtcbiAgICAgICAgdmFyIHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xuICAgICAgICBpZiAoKHVybC5pbmRleE9mKCc/JykgIT0gLTEpICYmICh1cmwuaW5kZXhPZignIycpICE9IC0xKSkge1xuICAgICAgICAgICAgdXJsID0gdXJsLnJlcGxhY2UoJyMnLCAnJicpO1xuICAgICAgICB9IGVsc2UgaWYgKHVybC5pbmRleE9mKCc/JykgPT0gLTEpIHtcbiAgICAgICAgICAgIHVybCA9IHVybC5yZXBsYWNlKCcjJywgJz8nKTtcbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVQcm9kdWN0TGlzdGluZyh1cmwpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gb3dsY2Fyb3VzZWwoKSB7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBvd2wgPSAkKCcub3dsLWNhcm91c2VsJyk7XG4gICAgICAgIG93bC5vd2xDYXJvdXNlbCh7XG4gICAgICAgICAgICBpdGVtczogNSxcbiAgICAgICAgICAgIHNsaWRlQnk6IDUsXG4gICAgICAgICAgICByZXdpbmQ6IGZhbHNlLFxuICAgICAgICAgICAgbmF2OiB0cnVlLFxuICAgICAgICAgICAgbmF2UmV3aW5kOiBmYWxzZSxcbiAgICAgICAgICAgIGxvb3A6IGZhbHNlLFxuICAgICAgICAgICAgZG90czogdHJ1ZSxcbiAgICAgICAgICAgIHJlc3BvbnNpdmU6IHtcbiAgICAgICAgICAgICAgICAwOiB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zOiAyLFxuICAgICAgICAgICAgICAgICAgICBzbGlkZUJ5OiAyXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICA3Njc6IHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbXM6IDIsXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlQnk6IDJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIDc2ODoge1xuICAgICAgICAgICAgICAgICAgICBpdGVtczogNSxcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVCeTogNVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIHZpZXdwb3J0ID0galF1ZXJ5KHdpbmRvdykud2lkdGgoKTtcbiAgICAgICAgLy92YXIgY3VycmVudCA9ICQodGhpcyk7XG4gICAgICAgIHZhciBpdGVtQ291bnQgPSAkKCcucmVjb21tZW5kYXRpb25zLmNyb3NzLXNlbGwuUmVjb21tZW5kZWQuRm9yLllvdSAub3dsLWNhcm91c2VsIC5vd2wtaXRlbScpLmxlbmd0aDtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgKHZpZXdwb3J0ID49IDc2OCAmJiBpdGVtQ291bnQgPiA1KSB8fCAodmlld3BvcnQgPCA3NjggJiYgaXRlbUNvdW50ID4gMilcbiAgICAgICAgKSB7XG4gICAgICAgICAgICAkKCcucmVjb21tZW5kYXRpb25zLmNyb3NzLXNlbGwuUmVjb21tZW5kZWQuRm9yLllvdSAucGRwcmVjb21vLW93bCcpLmZpbmQoJy5vd2wtcHJldiwgLm93bC1uZXh0Jykuc2hvdygpO1xuICAgICAgICAgICAgJCgnLnJlY29tbWVuZGF0aW9ucy5jcm9zcy1zZWxsLlJlY29tbWVuZGVkLkZvci5Zb3UgLnBkcHJlY29tby1vd2wnKS5maW5kKCcub3dsLWRvdHMnKS5zaG93KCk7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoJy5yZWNvbW1lbmRhdGlvbnMuY3Jvc3Mtc2VsbC5SZWNvbW1lbmRlZC5Gb3IuWW91IC5wZHByZWNvbW8tb3dsJykuZmluZCgnLm93bC1wcmV2LCAub3dsLW5leHQnKS5oaWRlKCk7XG4gICAgICAgICAgICAkKCcucmVjb21tZW5kYXRpb25zLmNyb3NzLXNlbGwuUmVjb21tZW5kZWQuRm9yLllvdSAucGRwcmVjb21vLW93bCcpLmZpbmQoJy5vd2wtZG90cycpLmhpZGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vdmFyIHZpZXdwb3J0b25lID0galF1ZXJ5KHdpbmRvdykud2lkdGgoKTtcbiAgICAgICAgLy92YXIgY3VycmVudG9uZSA9ICQodGhpcyk7XG4gICAgICAgIHZhciBpdGVtQ291bnRvbmUgPSAkKCcucmVjb21tZW5kYXRpb25zLmNyb3NzLXNlbGwuUmVjZW50bHkuVmlld2VkIC5vd2wtY2Fyb3VzZWwgLm93bC1pdGVtJykubGVuZ3RoO1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICh2aWV3cG9ydCA+PSA3NjggJiYgaXRlbUNvdW50b25lID4gNSkgfHwgKHZpZXdwb3J0IDwgNzY4ICYmIGl0ZW1Db3VudG9uZSA+IDIpXG4gICAgICAgICkge1xuICAgICAgICAgICAgJCgnLnJlY29tbWVuZGF0aW9ucy5jcm9zcy1zZWxsLlJlY2VudGx5LlZpZXdlZCAucGRwcmVjb21vLW93bCcpLmZpbmQoJy5vd2wtcHJldiwgLm93bC1uZXh0Jykuc2hvdygpO1xuICAgICAgICAgICAgJCgnLnJlY29tbWVuZGF0aW9ucy5jcm9zcy1zZWxsLlJlY2VudGx5LlZpZXdlZCAucGRwcmVjb21vLW93bCcpLmZpbmQoJy5vd2wtZG90cycpLnNob3coKTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJCgnLnJlY29tbWVuZGF0aW9ucy5jcm9zcy1zZWxsLlJlY2VudGx5LlZpZXdlZCAucGRwcmVjb21vLW93bCcpLmZpbmQoJy5vd2wtcHJldiwgLm93bC1uZXh0JykuaGlkZSgpO1xuICAgICAgICAgICAgJCgnLnJlY29tbWVuZGF0aW9ucy5jcm9zcy1zZWxsLlJlY2VudGx5LlZpZXdlZCAucGRwcmVjb21vLW93bCcpLmZpbmQoJy5vd2wtZG90cycpLmhpZGUoKTtcbiAgICAgICAgfVxuICAgICAgICAkKCcucHJvZHVjdC1saXN0aW5nJykuZmluZCgnaDIuaGlkZScpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG5cbiAgICAgICAgcHJvZHVjdFRpbGUuaW5pdCgpO1xuICAgICAgICAkKCcucHRfcHJvZHVjdC1zZWFyY2gtcmVzdWx0IC5yZWNvbW1lbmRhdGlvbnMuY3Jvc3Mtc2VsbCAuc2VhcmNoLXJlc3VsdC1pdGVtcyAucHJvZHVjdC10aWxlLml0ZW0nKS5sYXN0KCkuYWRkQ2xhc3MoJ3JlY29tbGFzdCcpO1xuICAgIH0sIDU1MDApO1xuXG59XG5cbnZhciBzZWFyY2hSZWZpbm1lbnQgPSB7XG4gICAgc2VhcmNoUmVmaW5lbWVudFRvZ2dsZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyQoXCIjc2Vjb25kYXJ5XCIpLnJlbW92ZUF0dHIoXCJzdHlsZVwiKTtcbiAgICAgICAgJCgnLmpzLXNjcm9sbGJhcicpLmVhY2goZnVuY3Rpb24gKCRpKSB7XG4gICAgICAgICAgICAvL3ZhciBjdXJPYmogPSAkKHRoaXMpO1xuICAgICAgICAgICAgLy92YXIgdGhyZXNob2xkVmFsdWUgPSAkKGN1ck9iaikuY2xvc2VzdCgnLnJlZmluZW1lbnQnKS5maW5kKCcuZGV2aWNlLXJlZmluZScpLnZhbCgpO1xuICAgICAgICAgICAgaWYgKCQoJy5yYXBhbGFfZGV2aWNlJykubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5jbG9zZXN0KCcubmF2Z3JvdXAnKS5oYXNDbGFzcygncmVmaW5lbWVudCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmZpbmQoJ2xpJykubGVuZ3RoID4gOCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnanMtc2Nyb2xsYmFyLWhlaWdodCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcub3ZlcnZpZXcnKS5zbGltU2Nyb2xsKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYWlsVmlzaWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICcyMDBweCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZTogJzEwcHgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhaWxDb2xvcjogJ3RyYW5zcGFyZW50JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJyNhMGEwYTAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsd2F5c1Zpc2libGU6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8kKHRoaXMpLnRpbnlzY3JvbGxiYXIoe3RyYWNrU2l6ZSA6IDIwMH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcub3ZlcnZpZXcnKS5jc3MoJ3Bvc2l0aW9uJywgJ3N0YXRpYycpO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyQodGhpcykudGlueXNjcm9sbGJhcih7dHJhY2tTaXplIDogMjAwfSk7XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLm92ZXJ2aWV3Jykuc2xpbVNjcm9sbCh7XG4gICAgICAgICAgICAgICAgICAgICAgICByYWlsVmlzaWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogJzIwMHB4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpemU6ICcxMHB4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhaWxDb2xvcjogJ3RyYW5zcGFyZW50JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnI2EwYTBhMCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBhbHdheXNWaXNpYmxlOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvKmlmKCQodGhpcykuZmluZCgnbGknKS5sZW5ndGggPiB0aHJlc2hvbGRWYWx1ZSAmJiAkKHRoaXMpLmZpbmQoJy5zZWVNb3JlUmVmaW5lbWVudHMnKS5sZW5ndGggPT0gMCl7XG4gICAgICAgICAgICAgICAgICAgIGlmKCQodGhpcykuZmluZCgnLnNlZU5leHRSZWZpbmVtZW50cycpLmxlbmd0aCA9PSAwICYmICQodGhpcykuZmluZCgnLnNlZVByZXZSZWZpbmVtZW50cycpLmxlbmd0aCA9PSAwKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuYXBwZW5kKCc8YSBocmVmPVwiI1wiIGNsYXNzPVwic2VlTmV4dFJlZmluZW1lbnRzXCI+U2VlIE5leHQ8L2E+Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmFwcGVuZCgnPGEgaHJlZj1cIiNcIiBjbGFzcz1cInNlZVByZXZSZWZpbmVtZW50c1wiPlNlZSBQcmV2aW91czwvYT4nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aHJlc2hvbGRWYWx1ZSAtPSAxO1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ2xpJykuZXEodGhyZXNob2xkVmFsdWUpLm5leHRBbGwoJ2xpJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAkKCcuc2VlUHJldlJlZmluZW1lbnRzJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ2xpJykuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5zZWVOZXh0UmVmaW5lbWVudHMnKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgfSovXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICgkaSA9PSAoJCgnLmpzLXNjcm9sbGJhcicpLmxlbmd0aCAtIDEpKSB7XG4gICAgICAgICAgICAgICAgJCgnI3NlYXJjaHJlZmluZW1lbnRzIGRpdi5uYXZncm91cCcpLmVhY2goZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpIDwgOTYwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5maW5kKCdsaS5zZWxlY3RlZCcpLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCdkaXYucmVmaW5lYXR0cmlidXRlcycpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5maWx0ZXInKS5hZGRDbGFzcygnZXhwYW5kJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnY29sbGFwc2UtZXhwYW5kJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA+IDIgJiYgJCh0aGlzKS5maW5kKCdsaS5zZWxlY3RlZCcpLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCdkaXYucmVmaW5lYXR0cmlidXRlcycpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5maWx0ZXInKS5hZGRDbGFzcygnZXhwYW5kJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnY29sbGFwc2UtZXhwYW5kJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGkgPCAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCdkaXYucmVmaW5lYXR0cmlidXRlcycpLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5maWx0ZXInKS5yZW1vdmVDbGFzcygnZXhwYW5kJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnY29sbGFwc2UtZXhwYW5kJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBpbml0IHJlZmluZW1lbnQgdG9nZ2xpbmdcbiAgICAgICAgJCgnI3NlYXJjaHJlZmluZW1lbnRzIC5maWx0ZXInKS5vZmYoJ2NsaWNrJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGpRdWVyeSh0aGlzKS50b2dnbGVDbGFzcygnZXhwYW5kJyk7XG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5uYXZncm91cCcpLnRvZ2dsZUNsYXNzKCdjb2xsYXBzZS1leHBhbmQnKTtcbiAgICAgICAgICAgIGpRdWVyeSh0aGlzKS5jbG9zZXN0KCcubmF2Z3JvdXAnKS5maW5kKCdkaXYucmVmaW5lYXR0cmlidXRlcycpLnRvZ2dsZSgpO1xuICAgICAgICAgICAgLy9qUXVlcnkodGhpcykuY2xvc2VzdCgnLm5hdmdyb3VwJykuZmluZChcIi5qcy1zY3JvbGxiYXJcIikudGlueXNjcm9sbGJhcih7dHJhY2tTaXplIDogMjAwfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQod2luZG93KS5sb2FkKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQoJyNzZWNvbmRhcnknKS5yZW1vdmVDbGFzcygndmlzaWJsZS1oaWRkZW4nKS5hZGRDbGFzcygnc2Vjb25kYXJ5LWhpZGUnKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA+IDk1OSkge1xuICAgICAgICAgICAgJCgnLm1vYmlsZS1maWx0ZXItYnknKS5yZW1vdmVDbGFzcygnanMtZmlsdGVyLWFjdGl2ZScpO1xuICAgICAgICAgICAgJCgnI3NlY29uZGFyeScpLnJlbW92ZUNsYXNzKCcudmlzaWJsZS1oaWRkZW4nKS5yZW1vdmVBdHRyKCdzdHlsZScpO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICogQGZ1bmN0aW9uXG4gKiBAZGVzY3JpcHRpb24gSW5pdGlhbGl6ZXMgZXZlbnRzIGZvciB0aGUgZm9sbG93aW5nIGVsZW1lbnRzOjxici8+XG4gKiA8cD5yZWZpbmVtZW50IGJsb2NrczwvcD5cbiAqIDxwPnVwZGF0aW5nIGdyaWQ6IHJlZmluZW1lbnRzLCBwYWdpbmF0aW9uLCBicmVhZGNydW1iPC9wPlxuICogPHA+aXRlbSBjbGljazwvcD5cbiAqIDxwPnNvcnRpbmcgY2hhbmdlczwvcD5cbiAqL1xuZnVuY3Rpb24gaW5pdGlhbGl6ZUV2ZW50cygpIHtcbiAgICB1cGRhdGVHcmlkKCk7XG4gICAgb3dsY2Fyb3VzZWwoKTtcbiAgICBncmlkU3luY2hlaWdodCgpO1xuICAgIHByb2R1Y3RUaWxlLmluaXQoKTtcbiAgICB2YXIgJG1haW4gPSAkKCcjbWFpbicpO1xuICAgIC8vIGNvbXBhcmUgY2hlY2tlZFxuICAgICRtYWluLm9uKCdjbGljaycsICdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0uY29tcGFyZS1jaGVjaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNiID0gJCh0aGlzKTtcbiAgICAgICAgdmFyIHRpbGUgPSBjYi5jbG9zZXN0KCcucHJvZHVjdC10aWxlJyk7XG5cbiAgICAgICAgdmFyIGZ1bmMgPSB0aGlzLmNoZWNrZWQgPyBjb21wYXJlV2lkZ2V0LmFkZFByb2R1Y3QgOiBjb21wYXJlV2lkZ2V0LnJlbW92ZVByb2R1Y3Q7XG4gICAgICAgIHZhciBpdGVtSW1nID0gdGlsZS5maW5kKCcucHJvZHVjdC1pbWFnZSBhIGltZycpLmZpcnN0KCk7XG4gICAgICAgIGZ1bmMoe1xuICAgICAgICAgICAgaXRlbWlkOiB0aWxlLmRhdGEoJ2l0ZW1pZCcpLFxuICAgICAgICAgICAgdXVpZDogdGlsZVswXS5pZCxcbiAgICAgICAgICAgIGltZzogaXRlbUltZyxcbiAgICAgICAgICAgIGNiOiBjYlxuICAgICAgICB9KTtcblxuICAgIH0pO1xuXG4gICAgaWYgKCQoJy5jb250ZW50QXNzZXQtbmV3JykuZmluZCgnLmh0bWwtc2xvdC1jb250YWluZXInKS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHZhciBjdXJyZW50ID0gJCgnLmNvbnRlbnRBc3NldC1uZXcnKS5maW5kKCcuaHRtbC1zbG90LWNvbnRhaW5lcicpO1xuICAgICAgICBjdXJyZW50LnBhcmVudHMoJy5kZXNrdG9wJykucmVtb3ZlQ2xhc3MoJ3Byb21vaGlkZScpLmFkZENsYXNzKCdwcm9tb3Nob3cnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAkKCcuZGVza3RvcCcpLnJlbW92ZUNsYXNzKCdwcm9tb3Nob3cnKS5hZGRDbGFzcygncHJvbW9oaWRlJyk7XG4gICAgfVxuXG4gICAgJG1haW4ub24oJ2NsaWNrJywgJy5tb2JpbGUtZmlsdGVyLWJ5JywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoISQoJy5tb2JpbGUtZmlsdGVyLWJ5JykuaGFzQ2xhc3MoJ2pzLWZpbHRlci1hY3RpdmUnKSkge1xuICAgICAgICAgICAgJCgnLm1vYmlsZS1maWx0ZXItYnknKS5hZGRDbGFzcygnanMtZmlsdGVyLWFjdGl2ZScpO1xuICAgICAgICAgICAgJCgnI3NlY29uZGFyeScpLnNob3coKTtcbiAgICAgICAgICAgIC8vJChcIiNzZWNvbmRhcnlcIikuY3NzKFwidG9wXCIsc2Vjb25kYXJ5VG9wK1wicHhcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKCcubW9iaWxlLWZpbHRlci1ieScpLnJlbW92ZUNsYXNzKCdqcy1maWx0ZXItYWN0aXZlJyk7XG4gICAgICAgICAgICAkKCcjc2Vjb25kYXJ5JykuaGlkZSgpO1xuICAgICAgICAgICAgLy8kKFwiI3NlY29uZGFyeVwiKS5jc3MoXCJ0b3BcIixzZWNvbmRhcnlUb3ArXCJweFwiKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgICQoJyN0YWJzIGEnKS5jbGljayhmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICQodGhpcykucHJldignaW5wdXRbdHlwZT1cInJhZGlvXCJdJykucHJvcCgnY2hlY2tlZCcsIHRydWUpO1xuICAgICAgICB2YXIgaHJlZiA9ICQodGhpcykuYXR0cignaHJlZicpO1xuICAgICAgICB3aW5kb3cubG9jYXRpb24gPSBocmVmO1xuICAgIH0pO1xuXG4gICAgJG1haW4ub24oJ2NsaWNrJywgJyN0YWJzIGlucHV0W3R5cGU9XCJyYWRpb1wiXScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNoZWNrZWQgPSAkKHRoaXMpLnByb3AoJ2NoZWNrZWQnLCB0cnVlKTtcbiAgICAgICAgaWYgKGNoZWNrZWQpIHtcbiAgICAgICAgICAgICQodGhpcykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQodGhpcykucHJvcCgnY2hlY2tlZCcsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgICQodGhpcykubmV4dCgnYScpLnRyaWdnZXIoJ2NsaWNrJyk7XG4gICAgICAgICQodGhpcykucHJvcCgnY2hlY2tlZCcsIHRydWUpO1xuICAgIH0pO1xuXG4gICAgLy9zZWFyY2hjb250ZW50LXNlY3Rpb25cbiAgICAkbWFpbi5vbignY2xpY2snLCAnLm1vYmlsZS1maWx0ZXItYnkucmVzdWx0cy1jb250ZW50JywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoISQoJy5tb2JpbGUtZmlsdGVyLWJ5LnJlc3VsdHMtY29udGVudCcpLmhhc0NsYXNzKCdqcy1maWx0ZXItYWN0aXZlJykpIHtcbiAgICAgICAgICAgICQoJy5tb2JpbGUtZmlsdGVyLWJ5LnJlc3VsdHMtY29udGVudCcpLmFkZENsYXNzKCdqcy1maWx0ZXItYWN0aXZlJyk7XG4gICAgICAgICAgICAkKCcjc2Vjb25kYXJ5LnNlYXJjaFJlc3VsdC1yZWZpbmVtZW50Jykuc2hvdygpO1xuICAgICAgICAgICAgLy8kKFwiI3NlY29uZGFyeVwiKS5jc3MoXCJ0b3BcIixzZWNvbmRhcnlUb3ArXCJweFwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoJy5tb2JpbGUtZmlsdGVyLWJ5LnJlc3VsdHMtY29udGVudCcpLnJlbW92ZUNsYXNzKCdqcy1maWx0ZXItYWN0aXZlJyk7XG4gICAgICAgICAgICAkKCcjc2Vjb25kYXJ5LnNlYXJjaFJlc3VsdC1yZWZpbmVtZW50JykuaGlkZSgpO1xuICAgICAgICAgICAgLy8kKFwiI3NlY29uZGFyeVwiKS5jc3MoXCJ0b3BcIixzZWNvbmRhcnlUb3ArXCJweFwiKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKCQoJy5wdF9wcm9kdWN0LXNlYXJjaC1yZXN1bHQgLnNlYXJjaC1ibGsnKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICQoJy5wdF9wcm9kdWN0LXNlYXJjaC1yZXN1bHQnKS5maW5kKCcjcHJpbWFyeScpLmFkZENsYXNzKCdzZWFyY2gtcmVzdWx0Jyk7XG4gICAgfVxuXG4gICAgaWYgKCQoJy5wdF9jb250ZW50LXNlYXJjaC1yZXN1bHQgLmZvbGRlci1jb250ZW50LWxpc3QnKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICQoJy5wdF9jb250ZW50LXNlYXJjaC1yZXN1bHQnKS5maW5kKCcjdGFicyAjcHJvZHVjdHRhYicpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XG4gICAgICAgICQoJy5wdF9jb250ZW50LXNlYXJjaC1yZXN1bHQnKS5maW5kKCcjdGFicyAjY29udGVudHRhYicpLnByb3AoJ2NoZWNrZWQnLCB0cnVlKTtcbiAgICB9XG5cbiAgICAkbWFpbi5vbignY2xpY2snLCAnLnNvcnRieS1idXR0b24nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA+PSA0ODEgJiYgJCh3aW5kb3cpLndpZHRoKCkgPD0gOTU5KSB7XG4gICAgICAgICAgICBpZiAoISQoJy5zb3J0YnktYnV0dG9uJykuaGFzQ2xhc3MoJ2pzLXNvcnQtYWN0aXZlJykpIHtcbiAgICAgICAgICAgICAgICAkKCcuc29ydGJ5LWJ1dHRvbicpLmFkZENsYXNzKCdqcy1zb3J0LWFjdGl2ZScpO1xuICAgICAgICAgICAgICAgICQoJy5zZWFyY2gtcmVzdWx0LW9wdGlvbnMnKS5hZGRDbGFzcygnc2hvdy1zb3J0Jyk7XG4gICAgICAgICAgICAgICAgJCgnLm1vYmlsZS1zb3J0LWJ5LWNvbnRlbnQnKS5zaG93KCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQoJy5zb3J0YnktYnV0dG9uJykucmVtb3ZlQ2xhc3MoJ2pzLXNvcnQtYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgJCgnLnNlYXJjaC1yZXN1bHQtb3B0aW9ucycpLnJlbW92ZUNsYXNzKCdzaG93LXNvcnQnKTtcbiAgICAgICAgICAgICAgICAkKCcubW9iaWxlLXNvcnQtYnktY29udGVudCcpLmhpZGUoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBzZWFyY2hSZWZpbm1lbnQuc2VhcmNoUmVmaW5lbWVudFRvZ2dsZSgpO1xuXG4gICAgLyokKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uKCl7XG5cdFx0c2VhcmNoUmVmaW5tZW50LnNlYXJjaFJlZmluZW1lbnRUb2dnbGUoKTtcbiAgICB9KTsqL1xuXG4gICAgLyogJCgnLnNjcm9sbGFibGUnKS5lYWNoKGZ1bmN0aW9uKCl7XG4gICAgXHQkKHRoaXMpLnNsaW1TY3JvbGwoe1xuICAgICAgICAgICAgc2l6ZTogJzEwcHgnLFxuICAgICAgICAgICAgaGVpZ2h0OiAnMjAwcHgnLFxuICAgICAgICAgICAgcmFpbFZpc2libGU6IHRydWUsXG4gICAgICAgICAgICBhbHdheXNWaXNpYmxlOiB0cnVlXG4gICAgICAgIH0pO1xuXG4gICAgfSk7Ki9cbiAgICAvLyBoYW5kbGUgdG9nZ2xlIHJlZmluZW1lbnQgYmxvY2tzXG4gICAgLyogJG1haW4ub24oJ2NsaWNrJywgJy5yZWZpbmVtZW50IGgzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmKCAhJCh0aGlzKS5oYXNDbGFzcygnZXhwYW5kJykgKXtcbiAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnZXhwYW5kJykuY2xvc2VzdCgnLm5hdmdyb3VwJykuYWRkQ2xhc3MoJ2NvbGxhcHNlLWV4cGFuZCcpLmZpbmQoJy5zdWItcmVmaW5lbWVudCcpLmhpZGUoKTtcblxuICAgICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnZXhwYW5kJykuY2xvc2VzdCgnLm5hdmdyb3VwJykucmVtb3ZlQ2xhc3MoJ2NvbGxhcHNlLWV4cGFuZCcpLmZpbmQoJy5zdWItcmVmaW5lbWVudCcpLnNob3coKTtcbiAgICAgICAgICB9XG4gICAgIH0pOyovXG5cbiAgICAvLyBjb2xvciBzd2F0Y2hlcyBldmVudHMgLy9cbiAgICAkbWFpbi5vbignY2xpY2snLCAnLnByb2R1Y3Qtc3dhdGNoZXMgLnByb2R1Y3Qtc3dhdGNoZXMtYWxsJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnbG9hZGVkJykpIHtcbiAgICAgICAgICAgICQodGhpcykubmV4dCgnLnN3YXRjaC1saXN0LnN3YXRjaC10b2dnbGUnKS5zaG93KCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnbG9hZGVkJyk7XG4gICAgICAgIHZhciBjb250ID0gJCh0aGlzKS5wYXJlbnQoKS5maW5kKCd1bC5zd2F0Y2gtbGlzdC5zd2F0Y2gtdG9nZ2xlJyk7XG4gICAgICAgIGNvbnQuc2hvdygpLmZvY3VzKCk7XG4gICAgICAgICQodGhpcykucGFyZW50KCkuZmluZCgndWwuc3dhdGNoLXRvZ2dsZSBsaSA+IGEnKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmRhdGEoJ2hyZWYnKSkge1xuICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnaW1nJykuYXR0cignc3JjJywgJCh0aGlzKS5kYXRhKCdocmVmJykpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuICAgICAgICBjb250LnNob3coKS5mb2N1cygpO1xuICAgIH0pO1xuICAgIC8vIHByZXBhcmUgc3dhdGNoIHBhbGV0dGVzIGFuZCB0aHVtYm5haWxzXG4gICAgLy8gc2hvdyB0aGUgcGFsZXR0ZVxuXG4gICAgLy8gaGlkZSB0aGUgcGFsZXR0ZVxuICAgICQoJyNjb250ZW50IGRpdi5wcm9kdWN0LXN3YXRjaGVzIGRpdi5zd2F0Y2gtaW1hZ2UnKS5tb3VzZW91dChmdW5jdGlvbiAoZSkge1xuICAgICAgICAvLyBmaXggZm9yIGV2ZW50IGJ1YmJsaW5nIChodHRwOi8vd3d3LnF1aXJrc21vZGUub3JnL2pzL2V2ZW50c19tb3VzZS5odG1sKVxuICAgICAgICBpZiAoIWUpIHtcbiAgICAgICAgICAgIGUgPSB3aW5kb3cuZXZlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRnID0gKHdpbmRvdy5ldmVudCkgPyBlLnNyY0VsZW1lbnQgOiBlLnRhcmdldDtcbiAgICAgICAgaWYgKHRnLm5vZGVOYW1lICE9ICdESVYnKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlbHRnID0gKGUucmVsYXRlZFRhcmdldCkgPyBlLnJlbGF0ZWRUYXJnZXQgOiBlLnRvRWxlbWVudDtcbiAgICAgICAgd2hpbGUgKHJlbHRnICE9IHRnICYmIHJlbHRnLm5vZGVOYW1lICE9ICdCT0RZJykge1xuICAgICAgICAgICAgcmVsdGcgPSByZWx0Zy5wYXJlbnROb2RlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZWx0ZyA9PSB0Zykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gbW91c2VvdXQgdG9vayBwbGFjZSB3aGVuIG1vdXNlIGFjdHVhbGx5IGxlZnQgbGF5ZXJcbiAgICAgICAgLy8gaGFuZGxlIGV2ZW50IG5vd1xuICAgICAgICAkKHRoaXMpLmhpZGUoKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuXG4gICAgJCgnLnN3YXRjaC1saXN0LnN3YXRjaC10b2dnbGUnKS5tb3VzZWxlYXZlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnLnN3YXRjaC1saXN0LnN3YXRjaC10b2dnbGUnKS5oaWRlKCk7XG4gICAgfSk7XG5cbiAgICBqUXVlcnkoJyNjb250ZW50IC5wcm9kdWN0dGlsZSBkaXYuc3dhdGNoZXMgZGl2LmludmlzaWJsZScpLmhpZGUoKTtcbiAgICBqUXVlcnkoJyNjb250ZW50IC5wcm9kdWN0dGlsZSBkaXYuc3dhdGNoZXMgYS5zd2F0Y2ggaW1nLmhpZGRlbnRodW1ibmFpbCcpLmhpZGUoKTtcblxuICAgICQoJyNjb250ZW50LnByb2R1Y3Qtc3dhdGNoZXMgLnByb2R1Y3Qtc3dhdGNoZXMtYWxsLmxvYWRlZCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy92YXIgc3dhdGNoID0galF1ZXJ5KHRoaXMpO1xuICAgICAgICB1cGRhdGVQcm9kdWN0TGlzdGluZyh0aGlzLmhyZWYpO1xuICAgICAgICAvLyBvbWl0IGZvbGxvd2luZyB0aGUgc3dhdGNoIGxpbmtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuXG4gICAgJCgnYm9keScpLm1vdXNlbGVhdmUoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPiA5NjApIHtcbiAgICAgICAgICAgICQoJy5zd2F0Y2gtbGlzdC5zd2F0Y2gtdG9nZ2xlJykuaGlkZSgpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgJCgnYm9keScpLmJpbmQoJ2JsdXInLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJy5zd2F0Y2gtbGlzdC5zd2F0Y2gtdG9nZ2xlJykuaGlkZSgpO1xuXG4gICAgfSk7XG5cbiAgICAvLyBoYW5kbGUgZXZlbnRzIGZvciB1cGRhdGluZyBncmlkXG4gICAgJG1haW4ub24oJ2NsaWNrJywgJy5yZWZpbmVtZW50IGEsIC5zb3J0aGl0c2NvbnRhaW5lciAucGFnaW5hdGlvbiBhLCAuYnJlYWRjcnVtYi1yZWZpbmVtZW50LXZhbHVlIGEsIC5tb2JpbGUtc29ydC1ieS1jb250ZW50IGEnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAvLyBkb24ndCBpbnRlcmNlcHQgZm9yIGNhdGVnb3J5IGFuZCBmb2xkZXIgcmVmaW5lbWVudHMsIGFzIHdlbGwgYXMgdW5zZWxlY3RhYmxlXG4gICAgICAgIGlmICgkKHRoaXMpLnBhcmVudHMoJy5jYXRlZ29yeS1yZWZpbmVtZW50JykubGVuZ3RoID4gMCB8fCAkKHRoaXMpLnBhcmVudHMoJy5mb2xkZXItcmVmaW5lbWVudCcpLmxlbmd0aCA+IDAgfHwgJCh0aGlzKS5wYXJlbnQoKS5oYXNDbGFzcygndW5zZWxlY3RhYmxlJykpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHZhciBxdWVyeSA9IHV0aWwuZ2V0UXVlcnlTdHJpbmcodGhpcy5ocmVmKTtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSBxdWVyeTtcbiAgICAgICAgaWYgKHRoaXMuaHJlZiA9PT0gd2luZG93LmxvY2F0aW9uLmhyZWYpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVQcm9kdWN0TGlzdGluZyh0aGlzLmhyZWYpO1xuICAgIH0pO1xuXG4gICAgJCgnLnByb2R1Y3RsaXN0aW5nLnN1Yi1jYXQnKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCh0aGlzKS5maW5kKCcucHJvZHVjdC5wcm9kdWN0dGlsZS5jZWxsJykuZmlyc3QoKS5hZGRDbGFzcygnc3ViZmlyc3QnKTtcbiAgICB9KTtcblxuICAgIC8vIGhhbmRsZSBldmVudHMgaXRlbSBjbGljay4gYXBwZW5kIHBhcmFtcy5cbiAgICAkbWFpbi5vbignY2xpY2snLCAnLnByb2R1Y3QtdGlsZSBhOm5vdChcIiNxdWlja3ZpZXdidXR0b25cIiknLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhID0gJCh0aGlzKTtcbiAgICAgICAgLy8gZ2V0IGN1cnJlbnQgcGFnZSByZWZpbmVtZW50IHZhbHVlc1xuICAgICAgICB2YXIgd2wgPSB3aW5kb3cubG9jYXRpb247XG5cbiAgICAgICAgdmFyIHFzUGFyYW1zID0gKHdsLnNlYXJjaC5sZW5ndGggPiAxKSA/IHV0aWwuZ2V0UXVlcnlTdHJpbmdQYXJhbXMod2wuc2VhcmNoLnN1YnN0cigxKSkgOiB7fTtcbiAgICAgICAgdmFyIGhhc2hQYXJhbXMgPSAod2wuaGFzaC5sZW5ndGggPiAxKSA/IHV0aWwuZ2V0UXVlcnlTdHJpbmdQYXJhbXMod2wuaGFzaC5zdWJzdHIoMSkpIDoge307XG5cbiAgICAgICAgLy8gbWVyZ2UgaGFzaCBwYXJhbXMgd2l0aCBxdWVyeXN0cmluZyBwYXJhbXNcbiAgICAgICAgdmFyIHBhcmFtcyA9ICQuZXh0ZW5kKGhhc2hQYXJhbXMsIHFzUGFyYW1zKTtcbiAgICAgICAgaWYgKCFwYXJhbXMuc3RhcnQpIHtcbiAgICAgICAgICAgIHBhcmFtcy5zdGFydCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZ2V0IHRoZSBpbmRleCBvZiB0aGUgc2VsZWN0ZWQgaXRlbSBhbmQgc2F2ZSBhcyBzdGFydCBwYXJhbWV0ZXJcbiAgICAgICAgdmFyIHRpbGUgPSBhLmNsb3Nlc3QoJy5wcm9kdWN0LXRpbGUnKTtcbiAgICAgICAgdmFyIGlkeCA9IHRpbGUuZGF0YSgnaWR4JykgPyArdGlsZS5kYXRhKCdpZHgnKSA6IDA7XG5cbiAgICAgICAgLypTdGFydCBKSVJBIFBSRVYtNTAgOiBOZXh0IGFuZCBQcmV2aW91cyBsaW5rcyB3aWxsIG5vdCBiZSBkaXNwbGF5ZWQgb24gUERQIGlmIHVzZXIgbmF2aWdhdGUgZnJvbSBRdWljayBWaWV3LkFkZGVkIGNnaWQgdG8gaGFzaCovXG4gICAgICAgIGlmICghcGFyYW1zLmNnaWQgJiYgdGlsZS5kYXRhKCdjZ2lkJykgIT09IG51bGwgJiYgdGlsZS5kYXRhKCdjZ2lkJykgIT09ICcnKSB7XG4gICAgICAgICAgICBwYXJhbXMuY2dpZCA9IHRpbGUuZGF0YSgnY2dpZCcpO1xuICAgICAgICB9XG4gICAgICAgIC8qRW5kIEpJUkEgUFJFVi01MCovXG5cbiAgICAgICAgLy8gY29udmVydCBwYXJhbXMuc3RhcnQgdG8gaW50ZWdlciBhbmQgYWRkIGluZGV4XG4gICAgICAgIHBhcmFtcy5zdGFydCA9ICgrcGFyYW1zLnN0YXJ0KSArIChpZHggKyAxKTtcbiAgICAgICAgLy8gc2V0IHRoZSBoYXNoIGFuZCBhbGxvdyBub3JtYWwgYWN0aW9uIHRvIGNvbnRpbnVlXG4gICAgICAgIGFbMF0uaGFzaCA9ICQucGFyYW0ocGFyYW1zKTtcbiAgICB9KTtcblxuICAgIC8vIGhhbmRsZSBzb3J0aW5nIGNoYW5nZVxuICAgICRtYWluLm9uKCdjaGFuZ2UnLCAnLnNvcnQtYnkgc2VsZWN0JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdmFyIHNlbGVjdGVkT3B0aW9uID0gJCgnLnNvcnQtYnkgb3B0aW9uOnNlbGVjdGVkJykudmFsKCkuc3BsaXQoJz8nKVsxXS5zcGxpdCgnJicpO1xuICAgICAgICAvL3ZhciB1cmwgPSAkKHRoaXMpLnZhbCgpO1xuICAgICAgICB2YXIgc2VsZWN0ZWRPcHRpb252YWwgPSAnJztcbiAgICAgICAgJC5lYWNoKHNlbGVjdGVkT3B0aW9uLCBmdW5jdGlvbiAoaSwgdikge1xuICAgICAgICAgICAgaWYgKHYuaW5kZXhPZignc3J1bGUnKSAhPSAtMSkge1xuICAgICAgICAgICAgICAgIHNlbGVjdGVkT3B0aW9udmFsID0gdi5zcGxpdCgnPScpWzFdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoc2VsZWN0ZWRPcHRpb252YWwubGVuZ3RoICE9IDApIHtcbiAgICAgICAgICAgIHZhciBkYXRlT2JqID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgIGRhdGVPYmouc2V0VGltZShkYXRlT2JqLmdldFRpbWUoKSArICg2MCAqIDYwICogMTAwMCkpO1xuICAgICAgICAgICAgZG9jdW1lbnQuY29va2llID0gJ3NlbGVjdGVkT3B0aW9uPScgKyBzZWxlY3RlZE9wdGlvbnZhbCArICc7IGV4cGlyZXM9JyArIGRhdGVPYmoudG9VVENTdHJpbmcoKSArICc7IHBhdGg9Lyc7XG4gICAgICAgICAgICAvKlxuICAgICAgICAgICAgdmFyIHNvcnRSdWxlID0gdXJsLnNwbGl0KCc/JylbMV0uc3BsaXQoJyYnKTtcbiAgICAgICAgICAgIHZhciBzb3J0VHlwZSA9ICcnO1xuXG4gICAgICAgICAgICAkLmVhY2goc29ydFJ1bGUsIGZ1bmN0aW9uIChpLCB2KSB7XG4gICAgICAgICAgICAgICAgaWYgKHYuaW5kZXhPZignc3J1bGUnKSAhPSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBzb3J0VHlwZSA9IHYuc3BsaXQoJz0nKVsxXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICovXG4gICAgICAgIH1cbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB2YXIgcXVlcnkgPSB1dGlsLmdldFF1ZXJ5U3RyaW5nKCQodGhpcykuZmluZCgnb3B0aW9uOnNlbGVjdGVkJykudmFsKCkpO1xuICAgICAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9IHF1ZXJ5O1xuICAgICAgICBpZiAoJCh0aGlzKS5maW5kKCdvcHRpb246c2VsZWN0ZWQnKS52YWwoKSA9PT0gd2luZG93LmxvY2F0aW9uLmhyZWYpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVQcm9kdWN0TGlzdGluZygkKHRoaXMpLmZpbmQoJ29wdGlvbjpzZWxlY3RlZCcpLnZhbCgpKTtcbiAgICB9KS5vbignY2hhbmdlJywgJy5pdGVtcy1wZXItcGFnZSBzZWxlY3QnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByZWZpbmVVcmwgPSAkKHRoaXMpLmZpbmQoJ29wdGlvbjpzZWxlY3RlZCcpLnZhbCgpO1xuICAgICAgICBpZiAocmVmaW5lVXJsID09PSAnSU5GSU5JVEVfU0NST0xMJykge1xuICAgICAgICAgICAgJCgnaHRtbCcpLmFkZENsYXNzKCdpbmZpbml0ZS1zY3JvbGwnKS5yZW1vdmVDbGFzcygnZGlzYWJsZS1pbmZpbml0ZS1zY3JvbGwnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoJ2h0bWwnKS5hZGRDbGFzcygnZGlzYWJsZS1pbmZpbml0ZS1zY3JvbGwnKS5yZW1vdmVDbGFzcygnaW5maW5pdGUtc2Nyb2xsJyk7XG4gICAgICAgICAgICB2YXIgcXVlcnkgPSB1dGlsLmdldFF1ZXJ5U3RyaW5nKHJlZmluZVVybCk7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9IHF1ZXJ5O1xuICAgICAgICAgICAgaWYgKHJlZmluZVVybCA9PT0gd2luZG93LmxvY2F0aW9uLmhyZWYpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1cGRhdGVQcm9kdWN0TGlzdGluZyhyZWZpbmVVcmwpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICBjb21wYXJlV2lkZ2V0LmluaXQoKTtcbiAgICBpZiAoU2l0ZVByZWZlcmVuY2VzLkxJU1RJTkdfSU5GSU5JVEVfU0NST0xMKSB7XG4gICAgICAgICQod2luZG93KS5vbignc2Nyb2xsJywgaW5maW5pdGVTY3JvbGwpO1xuICAgIH1cbiAgICBwcm9kdWN0VGlsZS5pbml0KCk7XG4gICAgaW5pdGlhbGl6ZUV2ZW50cygpO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgb3dsID0gJCgnLm93bC1jYXJvdXNlbCcpO1xuICAgIG93bC5vd2xDYXJvdXNlbCh7XG4gICAgICAgIGl0ZW1zOiAxLFxuICAgICAgICBsb29wOiB0cnVlLFxuICAgICAgICBkb3RzOiB0cnVlLFxuICAgICAgICBhdXRvcGxheTogdHJ1ZSxcbiAgICAgICAgYXV0b3BsYXlUaW1lb3V0OiA3MDAwLFxuICAgICAgICBhdXRvcGxheUhvdmVyUGF1c2U6IHRydWUsXG4gICAgICAgIGFuaW1hdGVPdXQ6ICdmYWRlT3V0JyxcbiAgICAgICAgcmVzcG9uc2l2ZToge1xuICAgICAgICAgICAgMDoge1xuICAgICAgICAgICAgICAgIGl0ZW1zOiAxXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgNjAwOiB7XG4gICAgICAgICAgICAgICAgaXRlbXM6IDFcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAxMDAwOiB7XG4gICAgICAgICAgICAgICAgaXRlbXM6IDFcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBzdG9yZUxvY2F0b3IgPSByZXF1aXJlKCcuLi9zdG9yZS1sb2NhdG9yJyk7XG5cbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbG9jYXRvciA9IHdpbmRvdy5TY3JpcHRzLnN0b3JlTG9jYXRvcixcbiAgICAgICAgb3B0aW9ucyA9IGxvY2F0b3IudmFycyxcbiAgICAgICAgbWFya2VyICA9IG9wdGlvbnMubWFya2VydXJsO1xuXG4gICAgaWYgKCQoJyNzdG9yZWRldGFpbHMtd3JhcHBlcicpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgbWFya2VyID0gb3B0aW9ucy5tYXJrZXJkZXRhaWx1cmw7XG4gICAgfVxuXG4gICAgc3RvcmVMb2NhdG9yLmluaXQob3B0aW9ucy56b29tcmFkaXVzLCBvcHRpb25zLnN0b3JldXJsLCBtYXJrZXIsIG9wdGlvbnMucXVlcnl1cmwsIG9wdGlvbnMuY29va2lldXJsLCBvcHRpb25zLmNvb2tpZW5hbWUsIG9wdGlvbnMuZGVmYXVsdGxvY2F0aW9uLCBvcHRpb25zLm1hcHR5cGUpO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHBhZ2UgPSByZXF1aXJlKCcuLi9wYWdlJyksXG4gICAgYWNjb3VudCA9IHJlcXVpcmUoJy4vYWNjb3VudCcpLFxuICAgIHV0aWwgPSByZXF1aXJlKCcuLi91dGlsJyk7XG5cbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAvL1N0YXJ0IEpJUkEgUFJFVi00MTIgOiBTRyBJc3N1ZTogUGFzc3dvcmQgcmVzZXQgb3ZlcmxheSBkaXNwbGF5ZWQgYXMgYSBwYWdlXG4gICAgYWNjb3VudC5pbml0Q2FydExvZ2luKCk7XG4gICAgJCgnI2VkaXRBZGRyZXNzJykub24oJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcGFnZS5yZWRpcmVjdCh1dGlsLmFwcGVuZFBhcmFtVG9VUkwoVXJscy53aXNobGlzdEFkZHJlc3MsICdBZGRyZXNzSUQnLCAkKHRoaXMpLnZhbCgpKSk7XG4gICAgfSk7XG5cbiAgICAvL2FkZCBqcyBsb2dpYyB0byByZW1vdmUgdGhlICwgZnJvbSB0aGUgcXR5IGZlaWxkIHRvIHBhc3MgcmVnZXggZXhwcmVzc2lvbiBvbiBjbGllbnQgc2lkZVxuICAgICQoJy5vcHRpb24tcXVhbnRpdHktZGVzaXJlZCBpbnB1dCcpLm9uKCdmb2N1c291dCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCh0aGlzKS52YWwoJCh0aGlzKS52YWwoKS5yZXBsYWNlKCcsJywgJycpKTtcbiAgICB9KTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBpbWFnZXNMb2FkZWQgPSByZXF1aXJlKCdpbWFnZXNsb2FkZWQnKSxcbiAgICB1dGlsID0gcmVxdWlyZSgnLi91dGlsJyksXG4gICAgcXVpY2t2aWV3ID0gcmVxdWlyZSgnLi9xdWlja3ZpZXcnKTtcblxuZnVuY3Rpb24gaW5pdFF1aWNrVmlld0J1dHRvbnMoKSB7XG4gICAgJCgnLnByb2R1Y3QtdGlsZSAucHJvZHVjdC1pbWFnZScpLm9uKCdtb3VzZWVudGVyJywgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgJHF2QnV0dG9uID0gJCgnI3F1aWNrdmlld2J1dHRvbicpO1xuICAgICAgICBpZiAoJHF2QnV0dG9uLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgJHF2QnV0dG9uID0gJCgnPGEgaWQ9XCJxdWlja3ZpZXdidXR0b25cIiBjbGFzcz1cInF1aWNrdmlld1wiPicgKyBSZXNvdXJjZXMuUVVJQ0tfVklFVyArICc8aSBjbGFzcz1cImZhIGZhLWFycm93cy1hbHRcIj48L2k+PC9hPicpO1xuICAgICAgICB9XG4gICAgICAgIHZhciAkbGluayA9ICQodGhpcykuZmluZCgnLnRodW1iLWxpbmsnKTtcbiAgICAgICAgJHF2QnV0dG9uLmF0dHIoe1xuICAgICAgICAgICAgJ2hyZWYnOiAkbGluay5hdHRyKCdocmVmJyksXG4gICAgICAgICAgICAndGl0bGUnOiAkbGluay5hdHRyKCd0aXRsZScpXG4gICAgICAgIH0pLmFwcGVuZFRvKHRoaXMpO1xuICAgICAgICAkcXZCdXR0b24ub2ZmKCdjbGljaycpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBxdWlja3ZpZXcuc2hvdyh7XG4gICAgICAgICAgICAgICAgdXJsOiAkKHRoaXMpLmF0dHIoJ2hyZWYnKS5zcGxpdCgnIycpWzBdLCAvL1BSRVYgSklSQSBQUkVWLTI1NSA6UExQOiBPbiBDbGljayBRdWljayB2aWV3IG5hdmlnYXRpbmcgdG8gYSB3cm9uZyBwYWdlIHdoZW4gdXNlciBmaXJzdCBjaGFuZ2VzIHRoZSBzd2F0Y2hlcy4gVGFraW5nIG9ubHkgaHJlZi5cbiAgICAgICAgICAgICAgICBzb3VyY2U6ICdxdWlja3ZpZXcnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGdyaWRWaWV3VG9nZ2xlKCkge1xuICAgIHZhciBDb29raWVJbWFnZVZhbHVlID0gdXRpbC5yZWFkQ29va2llKCdJbWFnZVNpemUnKTtcbiAgICAvL1RoaXMgaXMgdXNlZCB0byBwZXJzaXN0IHRoZSBJbWFnZVNpemVzIG92ZXJhbGwgc2l0ZS5cbiAgICBpZiAoQ29va2llSW1hZ2VWYWx1ZSAhPSBudWxsKSB7XG4gICAgICAgIGlmIChDb29raWVJbWFnZVZhbHVlID09ICdsaXN0dmlldycpIHtcbiAgICAgICAgICAgIGpRdWVyeSgnLnNlYXJjaC1yZXN1bHQtY29udGVudCcpLmFkZENsYXNzKCd3aWRlLXRpbGVzJyk7XG4gICAgICAgICAgICBqUXVlcnkoJy5wcm9kdWN0LWltYWdlJykuYWRkQ2xhc3MoJ2dyaWQnKTtcbiAgICAgICAgICAgICQoJy50b2dnbGUtZ3JpZCBpJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgJCgnLnRvZ2dsZS1ncmlkIC5saXN0dmlldycpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICQoJy5zZWFyY2gtcmVzdWx0LWNvbnRlbnQud2lkZS10aWxlcyAucHJvZHVjdC10aWxlIC5wcm9kdWN0LWltYWdlIGltZycpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3JjID0gdGhpcy5zcmMucmVwbGFjZSgnc3c9MTMwJnNoPTkyJywgJ3N3PTM1MiZzaD0yNTEnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJCgnLnByb2R1Y3QtaW1nJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCdpbWcnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmFwcGVuZCgnPGltZyBzcmM9XCInICsgJCh0aGlzKS5hdHRyKCdkYXRhLWxhcmdlLXNyYycpICsgJ1wiIHRpdGxlPVwiJyArICQodGhpcykuYXR0cignZGF0YS10aXRsZScpICsgJ1wiIGFsdD1cIicgKyAkKHRoaXMpLmF0dHIoJ2RhdGEtYWx0JykgKyAnXCI+PC9pbWc+Jyk7XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBqUXVlcnkoJy5zZWFyY2gtcmVzdWx0LWNvbnRlbnQnKS5yZW1vdmVDbGFzcygnd2lkZS10aWxlcycpO1xuICAgICAgICAgICAgalF1ZXJ5KCcucHJvZHVjdC1pbWFnZScpLnJlbW92ZUNsYXNzKCdncmlkJyk7XG4gICAgICAgICAgICAkKCcudG9nZ2xlLWdyaWQgaScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICQoJy50b2dnbGUtZ3JpZCAuZ3JpZHZpZXcnKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAkKCcuc2VhcmNoLXJlc3VsdC1jb250ZW50LndpZGUtdGlsZXMgLnByb2R1Y3QtdGlsZSAucHJvZHVjdC1pbWFnZSBpbWcnKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNyYyA9IHRoaXMuc3JjLnJlcGxhY2UoJ3N3PTEzMCZzaD05MicsICdzdz0xMzAmc2g9OTInKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJCgnLnByb2R1Y3QtaW1nJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCdpbWcnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmFwcGVuZCgnPGltZyBzcmM9XCInICsgJCh0aGlzKS5hdHRyKCdkYXRhLXNtYWxsLXNyYycpICsgJ1wiIHRpdGxlPVwiJyArICQodGhpcykuYXR0cignZGF0YS10aXRsZScpICsgJ1wiIGFsdD1cIicgKyAkKHRoaXMpLmF0dHIoJ2RhdGEtYWx0JykgKyAnXCI+PC9pbWc+Jyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICgkKCcubGlzdHZpZXcuYWN0aXZlJykubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICAgICQoJy5wdF9wcm9kdWN0LXNlYXJjaC1yZXN1bHQnKS5hdHRyKCdkYXRhLXZpZXdUeXBlJywgJ2xpc3R2aWV3Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKCcucHRfcHJvZHVjdC1zZWFyY2gtcmVzdWx0JykuYXR0cignZGF0YS12aWV3VHlwZScsICdncmlkdmlldycpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgJCgnLnRvZ2dsZS1ncmlkIGknKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBkYXRlT2JqID0gbmV3IERhdGUoKTtcbiAgICAgICAgZGF0ZU9iai5zZXRUaW1lKGRhdGVPYmouZ2V0VGltZSgpICsgKDYwICogNjAgKiAxMDAwKSk7XG4gICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdncmlkdmlldycpKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSAnSW1hZ2VTaXplPScgKyAnZ3JpZHZpZXcnICsgJzsgZXhwaXJlcz0nICsgZGF0ZU9iai50b1VUQ1N0cmluZygpICsgJzsgcGF0aD0vJztcbiAgICAgICAgICAgICQoJy50b2dnbGUtZ3JpZCBpJykucGFyZW50KCcudG9nZ2xlLWdyaWQnKS5yZW1vdmVDbGFzcygnd2lkZScpO1xuICAgICAgICAgICAgJCgnLnRvZ2dsZS1ncmlkIGknKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgnLnRvZ2dsZS1ncmlkJykucmVtb3ZlQ2xhc3MoJ3dpZGUnKTtcbiAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgJCgnLnNlYXJjaC1yZXN1bHQtY29udGVudCcpLnJlbW92ZUNsYXNzKCd3aWRlLXRpbGVzJyk7XG4gICAgICAgICAgICAkKCcucHJvZHVjdC1pbWcnKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ2ltZycpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICQodGhpcykuYXBwZW5kKCc8aW1nIHNyYz1cIicgKyAkKHRoaXMpLmF0dHIoJ2RhdGEtbGFyZ2Utc3JjJykgKyAnXCIgdGl0bGU9XCInICsgJCh0aGlzKS5hdHRyKCdkYXRhLXRpdGxlJykgKyAnXCIgYWx0PVwiJyArICQodGhpcykuYXR0cignZGF0YS1hbHQnKSArICdcIj48L2ltZz4nKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ2xpc3R2aWV3JykpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmNvb2tpZSA9ICdJbWFnZVNpemU9JyArICdsaXN0dmlldycgKyAnOyBleHBpcmVzPScgKyBkYXRlT2JqLnRvVVRDU3RyaW5nKCkgKyAnOyBwYXRoPS8nO1xuICAgICAgICAgICAgJCgnLnRvZ2dsZS1ncmlkIGknKS5wYXJlbnQoJy50b2dnbGUtZ3JpZCcpLnJlbW92ZUNsYXNzKCd3aWRlJyk7XG4gICAgICAgICAgICAkKCcudG9nZ2xlLWdyaWQgaScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICQodGhpcykucGFyZW50KCcudG9nZ2xlLWdyaWQnKS5hZGRDbGFzcygnd2lkZScpO1xuICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAkKCcuc2VhcmNoLXJlc3VsdC1jb250ZW50JykuYWRkQ2xhc3MoJ3dpZGUtdGlsZXMnKTtcbiAgICAgICAgICAgICQoJy5zZWFyY2gtcmVzdWx0LWNvbnRlbnQud2lkZS10aWxlcyAucHJvZHVjdC10aWxlIC5wcm9kdWN0LWltYWdlIGltZycpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3JjID0gdGhpcy5zcmMucmVwbGFjZSgnc3c9MTMwJnNoPTkyJywgJ3N3PTM1MiZzaD0yNTEnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJCgnLnByb2R1Y3QtaW1nJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCdpbWcnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmFwcGVuZCgnPGltZyBzcmM9XCInICsgJCh0aGlzKS5hdHRyKCdkYXRhLXNtYWxsLXNyYycpICsgJ1wiIHRpdGxlPVwiJyArICQodGhpcykuYXR0cignZGF0YS10aXRsZScpICsgJ1wiIGFsdD1cIicgKyAkKHRoaXMpLmF0dHIoJ2RhdGEtYWx0JykgKyAnXCI+PC9pbWc+Jyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY3Vyck9iaiA9ICQodGhpcyk7XG4gICAgICAgIGpRdWVyeSgnLnRvZ2dsZS1ncmlkIC5mYScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgJChjdXJyT2JqKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIGlmICgkKCcubGFyZ2UuYWN0aXZlJykubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICAgICQoJy5wdF9wcm9kdWN0LXNlYXJjaC1yZXN1bHQnKS5hdHRyKCdkYXRhLXZpZXdUeXBlJywgJ2xpc3R2aWV3Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKCcucHRfcHJvZHVjdC1zZWFyY2gtcmVzdWx0JykuYXR0cignZGF0YS12aWV3VHlwZScsICdncmlkdmlldycpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbn1cblxuLyoqXG4gKiBAcHJpdmF0ZVxuICogQGZ1bmN0aW9uXG4gKiBAZGVzY3JpcHRpb24gSW5pdGlhbGl6ZXMgZXZlbnRzIG9uIHRoZSBwcm9kdWN0LXRpbGUgZm9yIHRoZSBmb2xsb3dpbmcgZWxlbWVudHM6XG4gKiAtIHN3YXRjaGVzXG4gKiAtIHRodW1ibmFpbHNcbiAqL1xuZnVuY3Rpb24gaW5pdGlhbGl6ZUV2ZW50cygpIHtcbiAgICBpbml0UXVpY2tWaWV3QnV0dG9ucygpO1xuICAgIGdyaWRWaWV3VG9nZ2xlKCk7XG4gICAgJCgnLnN3YXRjaC1saXN0Jykub24oJ21vdXNlbGVhdmUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIFJlc3RvcmUgY3VycmVudCB0aHVtYiBpbWFnZVxuICAgICAgICB2YXIgJHRpbGUgPSAkKHRoaXMpLmNsb3Nlc3QoJy5wcm9kdWN0LXRpbGUnKSxcbiAgICAgICAgICAgICR0aHVtYiA9ICR0aWxlLmZpbmQoJy5wcm9kdWN0LWltYWdlIC50aHVtYi1saW5rIGltZycpLmVxKDApLFxuICAgICAgICAgICAgZGF0YSA9ICR0aHVtYi5kYXRhKCdjdXJyZW50Jyk7XG4gICAgICAgICR0aHVtYi5hdHRyKHtcbiAgICAgICAgICAgIHNyYzogZGF0YS5zcmMsXG4gICAgICAgICAgICBhbHQ6IGRhdGEuYWx0LFxuICAgICAgICAgICAgdGl0bGU6IGRhdGEudGl0bGVcbiAgICAgICAgfSk7XG4gICAgICAgICQoJy5zZWFyY2gtcmVzdWx0LWNvbnRlbnQud2lkZS10aWxlcyAucHJvZHVjdC10aWxlIC5wcm9kdWN0LWltYWdlIGEudGh1bWItbGluay5jdXJyZW50aW1nIGltZycpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5zcmMgPSB0aGlzLnNyYy5yZXBsYWNlKCdzdz0xMzAmc2g9OTInLCAnc3c9MzUyJnNoPTI1MScpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICAkKCcuc3dhdGNoLWxpc3QgLnN3YXRjaCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ3NlbGVjdGVkJykpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciAkdGlsZSA9ICQodGhpcykuY2xvc2VzdCgnLnByb2R1Y3QtdGlsZScpO1xuICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5zd2F0Y2gtbGlzdCcpLmZpbmQoJy5zd2F0Y2guc2VsZWN0ZWQnKS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAgICAgJHRpbGUuZmluZCgnLnRodW1iLWxpbmsnKS5hdHRyKCdocmVmJywgJCh0aGlzKS5hdHRyKCdocmVmJykpO1xuICAgICAgICAkdGlsZS5maW5kKCduYW1lLWxpbmsnKS5hdHRyKCdocmVmJywgJCh0aGlzKS5hdHRyKCdocmVmJykpO1xuXG4gICAgICAgIHZhciBkYXRhID0gJCh0aGlzKS5jaGlsZHJlbignaW1nJykuZmlsdGVyKCc6Zmlyc3QnKS5kYXRhKCd0aHVtYicpO1xuICAgICAgICB2YXIgJHRodW1iID0gJHRpbGUuZmluZCgnLnByb2R1Y3QtaW1hZ2UgLnRodW1iLWxpbmsgaW1nJykuZXEoMCk7XG4gICAgICAgIHZhciBjdXJyZW50QXR0cnMgPSB7XG4gICAgICAgICAgICBzcmM6IGRhdGEuc3JjLFxuICAgICAgICAgICAgYWx0OiBkYXRhLmFsdCxcbiAgICAgICAgICAgIHRpdGxlOiBkYXRhLnRpdGxlXG4gICAgICAgIH07XG4gICAgICAgICR0aHVtYi5jbG9zZXN0KCcudGh1bWItbGluaycpLmFkZENsYXNzKCdjdXJyZW50aW1nJyk7XG4gICAgICAgICR0aHVtYi5hdHRyKGN1cnJlbnRBdHRycyk7XG4gICAgICAgICR0aHVtYi5kYXRhKCdjdXJyZW50JywgY3VycmVudEF0dHJzKTtcblxuICAgICAgICAvKlN0YXJ0IEpJUkEgUFJFVi00NjYgOiBQcm9kdWN0IGltYWdlcyBhcmUgbm90IHVwZGF0aW5nIGluIHRoZSBjb21wYXJlIHNlY3Rpb24gd2hlbiB0aGUgY29sb3Igc3dhdGNoZXMgYXJlIGNoYW5nZWQgaW4gUExQLiovXG4gICAgICAgIHZhciBwaWQgPSAkKHRoaXMpLmNsb3Nlc3QoJy5wcm9kdWN0LXRpbGUnKS5hdHRyKCdkYXRhLWl0ZW1pZCcpO1xuICAgICAgICAkKCcuY29tcGFyZS1pdGVtcy1wYW5lbCAuY29tcGFyZS1pdGVtJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY29tcGFyZWlkID0gJCh0aGlzKS5hdHRyKCdkYXRhLWl0ZW1pZCcpO1xuICAgICAgICAgICAgaWYgKHBpZCA9PT0gY29tcGFyZWlkKSB7XG4gICAgICAgICAgICAgICAgdmFyICRjb21wYXJlID0gJCh0aGlzKS5maW5kKCcuY29tcGFyZS1pdGVtLWltYWdlJykuZXEoMCk7XG4gICAgICAgICAgICAgICAgJGNvbXBhcmUuYXR0cihjdXJyZW50QXR0cnMpO1xuICAgICAgICAgICAgICAgICRjb21wYXJlLmRhdGEoJ2N1cnJlbnQnLCBjdXJyZW50QXR0cnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLypFbmQgSklSQSBQUkVWLTQ2NiovXG4gICAgfSkuYmluZCgnbW91c2VlbnRlciBjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gZ2V0IGN1cnJlbnQgdGh1bWIgZGV0YWlsc1xuICAgICAgICB2YXIgJHRpbGUgPSAkKHRoaXMpLmNsb3Nlc3QoJy5wcm9kdWN0LXRpbGUnKSxcbiAgICAgICAgICAgICR0aHVtYiA9ICR0aWxlLmZpbmQoJy5wcm9kdWN0LWltYWdlIC50aHVtYi1saW5rIGltZycpLmVxKDApLFxuICAgICAgICAgICAgZGF0YSA9ICQodGhpcykuY2hpbGRyZW4oJ2ltZycpLmZpbHRlcignOmZpcnN0JykuZGF0YSgndGh1bWInKSxcbiAgICAgICAgICAgIGN1cnJlbnQgPSAkdGh1bWIuZGF0YSgnY3VycmVudCcpO1xuXG4gICAgICAgIC8vIElmIHRoaXMgaXMgdGhlIGZpcnN0IHRpbWUsIHRoZW4gcmVjb3JkIHRoZSBjdXJyZW50IGltZ1xuICAgICAgICBpZiAoIWN1cnJlbnQpIHtcbiAgICAgICAgICAgICR0aHVtYi5kYXRhKCdjdXJyZW50Jywge1xuICAgICAgICAgICAgICAgIHNyYzogJHRodW1iWzBdLnNyYyxcbiAgICAgICAgICAgICAgICBhbHQ6ICR0aHVtYlswXS5hbHQsXG4gICAgICAgICAgICAgICAgdGl0bGU6ICR0aHVtYlswXS50aXRsZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZXQgdGhlIHRpbGUgaW1hZ2UgdG8gdGhlIHZhbHVlcyBwcm92aWRlZCBvbiB0aGUgc3dhdGNoIGRhdGEgYXR0cmlidXRlc1xuICAgICAgICAkdGh1bWIuYXR0cih7XG4gICAgICAgICAgICBzcmM6IGRhdGEuc3JjLFxuICAgICAgICAgICAgYWx0OiBkYXRhLmFsdCxcbiAgICAgICAgICAgIHRpdGxlOiBkYXRhLnRpdGxlXG4gICAgICAgIH0pO1xuICAgICAgICAkKCcuc2VhcmNoLXJlc3VsdC1jb250ZW50LndpZGUtdGlsZXMgLnByb2R1Y3QtdGlsZSAucHJvZHVjdC1pbWFnZSBhLnRodW1iLWxpbmsuY3VycmVudGltZyBpbWcnKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuc3JjID0gdGhpcy5zcmMucmVwbGFjZSgnc3c9MTMwJnNoPTkyJywgJ3N3PTM1MiZzaD0yNTEnKTtcbiAgICAgICAgfSk7XG5cbiAgICB9KTtcbn1cblxuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciAkdGlsZXMgPSAkKCcudGlsZXMtY29udGFpbmVyIC5wcm9kdWN0LXRpbGUnKTtcbiAgICBpZiAoJHRpbGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGltYWdlc0xvYWRlZCgnLnRpbGVzLWNvbnRhaW5lcicpLm9uKCdkb25lJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAkdGlsZXMuc3luY0hlaWdodCgpXG4gICAgICAgICAgICAuZWFjaChmdW5jdGlvbiAoaWR4KSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5kYXRhKCdpZHgnLCBpZHgpO1xuICAgICAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgaW5pdGlhbGl6ZUV2ZW50cygpO1xufTtcblxuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgJGxvYWRlcjtcblxuLyoqXG4gKiBAZnVuY3Rpb25cbiAqIEBkZXNjcmlwdGlvbiBTaG93cyBhbiBBSkFYLWxvYWRlciBvbiB0b3Agb2YgYSBnaXZlbiBjb250YWluZXJcbiAqIEBwYXJhbSB7RWxlbWVudH0gY29udGFpbmVyIFRoZSBFbGVtZW50IG9uIHRvcCBvZiB3aGljaCB0aGUgQUpBWC1Mb2FkZXIgd2lsbCBiZSBzaG93blxuICovXG52YXIgc2hvdyA9IGZ1bmN0aW9uIChjb250YWluZXIpIHtcbiAgICB2YXIgdGFyZ2V0ID0gKCFjb250YWluZXIgfHwgJChjb250YWluZXIpLmxlbmd0aCA9PT0gMCkgPyAkKCdib2R5JykgOiAkKGNvbnRhaW5lcik7XG4gICAgJGxvYWRlciA9ICRsb2FkZXIgfHwgJCgnLmxvYWRlcicpO1xuXG4gICAgaWYgKCRsb2FkZXIubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICRsb2FkZXIgPSAkKCc8ZGl2Lz4nKS5hZGRDbGFzcygnbG9hZGVyJylcbiAgICAgICAgICAgIC5hcHBlbmQoJCgnPGRpdi8+JykuYWRkQ2xhc3MoJ2xvYWRlci1pbmRpY2F0b3InKSwgJCgnPGRpdi8+JykuYWRkQ2xhc3MoJ2xvYWRlci1iZycpKTtcbiAgICB9XG4gICAgcmV0dXJuICRsb2FkZXIuYXBwZW5kVG8odGFyZ2V0KS5zaG93KCk7XG59O1xuLyoqXG4gKiBAZnVuY3Rpb25cbiAqIEBkZXNjcmlwdGlvbiBIaWRlcyBhbiBBSkFYLWxvYWRlclxuICovXG52YXIgaGlkZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoJGxvYWRlcikge1xuICAgICAgICAkbG9hZGVyLmhpZGUoKTtcbiAgICB9XG59O1xuXG5leHBvcnRzLnNob3cgPSBzaG93O1xuZXhwb3J0cy5oaWRlID0gaGlkZTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGRpYWxvZyA9IHJlcXVpcmUoJy4vZGlhbG9nJyksXG4gICAgcHJvZHVjdCA9IHJlcXVpcmUoJy4vcGFnZXMvcHJvZHVjdCcpLFxuICAgIHByb2dyZXNzID0gcmVxdWlyZSgnLi9wcm9ncmVzcycpLFxuICAgIHV0aWwgPSByZXF1aXJlKCcuL3V0aWwnKSxcbiAgICBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XG5cbnZhciBtYWtlVXJsID0gZnVuY3Rpb24gKHVybCwgc291cmNlLCBwcm9kdWN0TGlzdElEKSB7XG4gICAgaWYgKHNvdXJjZSkge1xuICAgICAgICB1cmwgPSB1dGlsLmFwcGVuZFBhcmFtVG9VUkwodXJsLCAnc291cmNlJywgc291cmNlKTtcbiAgICB9XG4gICAgaWYgKHByb2R1Y3RMaXN0SUQpIHtcbiAgICAgICAgdXJsID0gdXRpbC5hcHBlbmRQYXJhbVRvVVJMKHVybCwgJ3Byb2R1Y3RsaXN0aWQnLCBwcm9kdWN0TGlzdElEKTtcbiAgICB9XG4gICAgcmV0dXJuIHVybDtcbn07XG5cbnZhciByZW1vdmVQYXJhbSA9IGZ1bmN0aW9uICh1cmwpIHtcbiAgICBpZiAodXJsLmluZGV4T2YoJz8nKSAhPT0gLTEpIHtcbiAgICAgICAgcmV0dXJuIHVybC5zdWJzdHJpbmcoMCwgdXJsLmluZGV4T2YoJz8nKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHVybDtcbiAgICB9XG59O1xuXG52YXIgcXVpY2t2aWV3ID0ge1xuICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmV4aXN0cygpKSB7XG4gICAgICAgICAgICB0aGlzLiRjb250YWluZXIgPSAkKCc8ZGl2Lz4nKS5hdHRyKCdpZCcsICdRdWlja1ZpZXdEaWFsb2cnKS5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByb2R1Y3RMaW5rcyA9ICQoJyNzZWFyY2gtcmVzdWx0LWl0ZW1zIC50aHVtYi1saW5rJykubWFwKGZ1bmN0aW9uIChpbmRleCwgdGh1bWJMaW5rKSB7XG4gICAgICAgICAgICByZXR1cm4gJCh0aHVtYkxpbmspLmF0dHIoJ2hyZWYnKTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIHNldHVwOiBmdW5jdGlvbiAocXZVcmwpIHtcbiAgICAgICAgdmFyICRidG5OZXh0ID0gJCgnLnF1aWNrdmlldy1uZXh0JyksXG4gICAgICAgICAgICAkYnRuUHJldiA9ICQoJy5xdWlja3ZpZXctcHJldicpO1xuXG4gICAgICAgIHByb2R1Y3QuaW5pdCgpO1xuXG4gICAgICAgIHRoaXMucHJvZHVjdExpbmtJbmRleCA9IF8odGhpcy5wcm9kdWN0TGlua3MpLmZpbmRJbmRleChmdW5jdGlvbiAodXJsKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVtb3ZlUGFyYW0odXJsKSA9PT0gcmVtb3ZlUGFyYW0ocXZVcmwpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBoaWRlIHRoZSBidXR0b25zIG9uIHRoZSBjb21wYXJlIHBhZ2Ugb3Igd2hlbiB0aGVyZSBhcmUgbm8gb3RoZXIgcHJvZHVjdHNcbiAgICAgICAgaWYgKHRoaXMucHJvZHVjdExpbmtzLmxlbmd0aCA8PSAxIHx8ICQoJy5jb21wYXJlcmVtb3ZlY2VsbCcpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICRidG5OZXh0LmhpZGUoKTtcbiAgICAgICAgICAgICRidG5QcmV2LmhpZGUoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8qICBTdGFydCBKSVJBIFBSRVYtNTA6IE5leHQgYW5kIFByZXZpb3VzIGxpbmtzIHdpbGwgbm90IGJlIGRpc3BsYXllZCBvbiBQRFAgaWYgdXNlciBuYXZpZ2F0ZSBmcm9tIFF1aWNrIFZpZXcuXG4gICAgICAgICAgICAgIEFkZGVkIGN1cnJlbnQgVVJMIHBhcmFtZXRlcnMgYW5kIGluZGV4IHRvIHZpZXdmdWxsZGV0YWlscyBsaW5rXG4gICAgICAgICAgICAqL1xuICAgICAgICAgICAgdmFyIGEgPSAkKCcjdmlldy1mdWxsLWRldGFpbHMnKTtcbiAgICAgICAgICAgIHZhciB3bCA9IHdpbmRvdy5sb2NhdGlvbjtcbiAgICAgICAgICAgIHZhciBxc1BhcmFtcyA9ICh3bC5zZWFyY2gubGVuZ3RoID4gMSkgPyB1dGlsLmdldFF1ZXJ5U3RyaW5nUGFyYW1zKHdsLnNlYXJjaC5zdWJzdHIoMSkpIDoge307XG4gICAgICAgICAgICB2YXIgaGFzaFBhcmFtcyA9ICh3bC5oYXNoLmxlbmd0aCA+IDEpID8gdXRpbC5nZXRRdWVyeVN0cmluZ1BhcmFtcyh3bC5oYXNoLnN1YnN0cigxKSkgOiB7fTtcbiAgICAgICAgICAgIHZhciBwYXJhbXMgPSAkLmV4dGVuZChoYXNoUGFyYW1zLCBxc1BhcmFtcyk7XG4gICAgICAgICAgICBwYXJhbXMuc3RhcnQgPSBwYXJzZUludCh0aGlzLnByb2R1Y3RMaW5rSW5kZXgsIDEwKSArIDE7XG4gICAgICAgICAgICB2YXIgdGlsZSA9ICQoJyNzZWFyY2gtcmVzdWx0LWl0ZW1zIC5wcm9kdWN0LXRpbGUnKS5maXJzdCgpO1xuICAgICAgICAgICAgaWYgKCFwYXJhbXMuY2dpZCAmJiB0aWxlLmRhdGEoJ2NnaWQnKSAhPT0gbnVsbCAmJiB0aWxlLmRhdGEoJ2NnaWQnKSAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICBwYXJhbXMuY2dpZCA9IHRpbGUuZGF0YSgnY2dpZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYS5hdHRyKCdocmVmJywgYS5hdHRyKCdocmVmJykgKyAnIycgKyAkLnBhcmFtKHBhcmFtcykpO1xuICAgICAgICAgICAgLypFbmQgSklSQSBQUkVWLTUwKi9cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnByb2R1Y3RMaW5rSW5kZXggPT09IHRoaXMucHJvZHVjdExpbmtzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICRidG5OZXh0LmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucHJvZHVjdExpbmtJbmRleCA9PT0gMCkge1xuICAgICAgICAgICAgJGJ0blByZXYuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgICRidG5OZXh0Lm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzLm5hdmlnYXRlUXVpY2t2aWV3KDEpO1xuICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgICAgICAkYnRuUHJldi5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpcy5uYXZpZ2F0ZVF1aWNrdmlldygtMSk7XG4gICAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzdGVwIC0gSG93IG1hbnkgcHJvZHVjdHMgYXdheSBmcm9tIGN1cnJlbnQgcHJvZHVjdCB0byBuYXZpZ2F0ZSB0by4gTmVnYXRpdmUgbnVtYmVyIG1lYW5zIG5hdmlnYXRlIGJhY2t3YXJkXG4gICAgICovXG4gICAgbmF2aWdhdGVRdWlja3ZpZXc6IGZ1bmN0aW9uIChzdGVwKSB7XG4gICAgICAgIC8vIGRlZmF1bHQgc3RlcCB0byAwXG4gICAgICAgIHRoaXMucHJvZHVjdExpbmtJbmRleCArPSAoc3RlcCA/IHN0ZXAgOiAwKTtcbiAgICAgICAgdmFyIHVybCA9IG1ha2VVcmwodGhpcy5wcm9kdWN0TGlua3NbdGhpcy5wcm9kdWN0TGlua0luZGV4XSwgJ3F1aWNrdmlldycpO1xuICAgICAgICBkaWFsb2cucmVwbGFjZSh7XG4gICAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICAgIGNhbGxiYWNrOiB0aGlzLnNldHVwLmJpbmQodGhpcywgdXJsKVxuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQGRlc2NyaXB0aW9uIHNob3cgcXVpY2sgdmlldyBkaWFsb2dcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBvcHRpb25zLnVybCAtIHVybCBvZiB0aGUgcHJvZHVjdCBkZXRhaWxzXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG9wdGlvbnMuc291cmNlIC0gc291cmNlIG9mIHRoZSBkaWFsb2cgdG8gYmUgYXBwZW5kZWQgdG8gVVJMXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG9wdGlvbnMucHJvZHVjdGxpc3RpZCAtIHRvIGJlIGFwcGVuZGVkIHRvIFVSTFxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IG9wdGlvbnMuY2FsbGJhY2sgLSBjYWxsYmFjayBvbmNlIHRoZSBkaWFsb2cgaXMgb3BlbmVkXG4gICAgICovXG4gICAgc2hvdzogZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIHVybDtcbiAgICAgICAgaWYgKCF0aGlzLmV4aXN0cygpKSB7XG4gICAgICAgICAgICB0aGlzLmluaXQoKTtcbiAgICAgICAgfVxuICAgICAgICB1cmwgPSBtYWtlVXJsKG9wdGlvbnMudXJsLCBvcHRpb25zLnNvdXJjZSwgb3B0aW9ucy5wcm9kdWN0bGlzdGlkKTtcbiAgICAgICAgJCgnI1F1aWNrVmlld0RpYWxvZycpLmVtcHR5KCk7XG4gICAgICAgIHZhciBxdWlja1ZpZXdEaWFsb2cgPSBkaWFsb2cuY3JlYXRlKHtcbiAgICAgICAgICAgIHRhcmdldDogdGhpcy4kY29udGFpbmVyLFxuICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgIGhlaWdodDogNTMwLFxuICAgICAgICAgICAgICAgIHdpZHRoOiA3NjAsXG4gICAgICAgICAgICAgICAgZGlhbG9nQ2xhc3M6ICdxdWlja3ZpZXcnLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBSZXNvdXJjZXMuUVVJQ0tfVklFV19QT1BVUFxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcXVpY2tWaWV3RGlhbG9nLmRpYWxvZygnb3BlbicpO1xuICAgICAgICBwcm9ncmVzcy5zaG93KCcjUXVpY2tWaWV3RGlhbG9nJyk7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgJChxdWlja1ZpZXdEaWFsb2cpLmFwcGVuZChkYXRhKTtcbiAgICAgICAgICAgICAgICBwcm9kdWN0LmluaXQoKTtcbiAgICAgICAgICAgICAgICBwcm9ncmVzcy5oaWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAvL1BSRVZBSUwtQWRkZWQgZm9yIEdBIGludGVncmF0aW9uXG4gICAgICAgIC8vR0Fjb21tZW50ZWRcbiAgICAgICAgaWYgKGlzRXZlbnRUcmFja2luZ0VuYWJsZWQgJiYgaXNHb29nbGVBbmFseXRpY3NFbmFibGVkKSB7XG4gICAgICAgICAgICBnb29nbGVBbmFseXRpY3NFdmVudHMucXVpY2tWaWV3KCk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGV4aXN0czogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4kY29udGFpbmVyICYmICh0aGlzLiRjb250YWluZXIubGVuZ3RoID4gMCk7XG4gICAgfSxcbiAgICBjbG9zZTogZnVuY3Rpb24gKCkge1xuICAgICAgICBqUXVlcnkoJyNRdWlja1ZpZXdEaWFsb2cnKS5kaWFsb2coJ2Nsb3NlJyk7XG4gICAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBxdWlja3ZpZXc7XG4iLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQHByaXZhdGVcbiAqIEBmdW5jdGlvblxuICogQGRlc2NyaXB0aW9uIEJpbmRzIGV2ZW50IHRvIHRoZSBwbGFjZSBob2xkZXIgKC5ibHVyKVxuICovXG5mdW5jdGlvbiBpbml0aWFsaXplRXZlbnRzKCkge1xuICAgIC8qIFN0YXJ0IEpJUkEgUFJFVi01MzpObyBzZWFyY2ggcmVzdWx0IHBhZ2U6IFdoZW4gdGhlIHNlYXJjaCB0ZXh0IGZpZWxkIGlzXG4gICAgICBlbXB0eSxvbiBjbGlja2luZyBvZiBcIkdPXCIgYnV0dG9uIHVzZXIgaXMgbmF2aWdhdGluZyB0byBIb21lIHBhZ2UuXG4gICAgICBSZXBsYWNlZCAjcSB3aXRoICdpbnB1dFtuYW1lPXFdJyovXG4gICAgJCgnaW5wdXRbbmFtZT1xXScpLmZvY3VzKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGlucHV0ID0gJCh0aGlzKTtcbiAgICAgICAgaWYgKGlucHV0LnZhbCgpID09PSBpbnB1dC5hdHRyKCd2YWx1ZScpKSB7XG4gICAgICAgICAgICBpbnB1dC52YWwoJycpO1xuICAgICAgICB9XG4gICAgfSlcbiAgICAgICAgLmJsdXIoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGlucHV0ID0gJCh0aGlzKTtcbiAgICAgICAgICAgIC8qIFN0YXJ0IEpJUkEgUFJFVi01MzpObyBzZWFyY2ggcmVzdWx0IHBhZ2U6IFdoZW4gdGhlIHNlYXJjaCB0ZXh0IGZpZWxkIGlzIGVtcHR5LG9uIGNsaWNraW5nIG9mIFwiR09cIlxuICAgICAgICAgICAgICAgICBidXR0b24gdXNlciBpcyBuYXZpZ2F0aW5nIHRvIEhvbWUgcGFnZS5BZGRlZCAkLnRyaW0oaW5wdXQudmFsKCkpID09PSBcIlwiKi9cbiAgICAgICAgICAgIGlmICgkLnRyaW0oaW5wdXQudmFsKCkpID09PSAnJyB8fCBpbnB1dC52YWwoKSA9PT0gJycgfHwgaW5wdXQudmFsKCkgPT09IGlucHV0LmF0dHIoJ3ZhbHVlJykpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC52YWwoaW5wdXQuYXR0cigndmFsdWUnKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5ibHVyKCk7XG5cbiAgICAvKiBTdGFydCBKSVJBLVBSRVYtNTQ6R2VuZXJhbCBFcnJvciBwYWdlOiBXaGVuIHRoZSBuZXcgc2VhcmNoIGZpZWxkIGVtcHR5LCBvbiBjbGlja2luZyBvZiBcIkdPXCIgdXNlciBpcyBuYXZpZ2F0aW5nIHRvIEhvbWUgcGFnZS5cbiAgICAgICAgIEFkZGVkIGNvbmRpdGlvbiBmb3IgZGlzYWJsaW5nIHNlYXJjaCBidXR0b24gaW4gaGVhZGVyIGFuZCBObyBzZWFyY2ggcmVzdWx0cyBwYWdlIGFuZCBlcnJvciBwYWdlcy5cbiAgICAgICAgIFN0YXJ0IEpJUkEtUFJFVi01MzpObyBzZWFyY2ggcmVzdWx0IHBhZ2U6IFdoZW4gdGhlIHNlYXJjaCB0ZXh0IGZpZWxkIGlzIGVtcHR5LG9uIGNsaWNraW5nIG9mIFwiR09cIiBidXR0b24gdXNlciBpcyBuYXZpZ2F0aW5nIHRvIEhvbWUgcGFnZS4qL1xuICAgICQoJ2lucHV0W25hbWU9cV0nKS5jbG9zZXN0KCdmb3JtJykuc3VibWl0KGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciBpbnB1dCA9ICQodGhpcykuZmluZCgnaW5wdXRbbmFtZT1xXScpO1xuICAgICAgICBpZiAoJC50cmltKGlucHV0LnZhbCgpKSA9PT0gaW5wdXQuYXR0cigndmFsdWUnKSB8fCAkLnRyaW0oaW5wdXQudmFsKCkpID09PSAnJykge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAoJCgnLnB0X3Byb2R1Y3Qtc2VhcmNoLW5vcmVzdWx0IC5ub2hpdHMgLm5vcmVzdWx0LWJhbm5lcicpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgJCgnLnB0X3Byb2R1Y3Qtc2VhcmNoLW5vcmVzdWx0IC5ub2hpdHMnKS5jc3MoJ2hlaWdodCcsICdhdXRvJyk7XG4gICAgfVxuICAgIC8qRW5kIEpJUkEgUFJFVi01MyxQUkVWLTU0ICovXG59XG5cbmV4cG9ydHMuaW5pdCA9IGluaXRpYWxpemVFdmVudHM7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsID0gcmVxdWlyZSgnLi91dGlsJyk7XG5cbnZhciBjdXJyZW50UXVlcnkgPSBudWxsLFxuICAgIGxhc3RRdWVyeSA9IG51bGwsXG4gICAgcnVubmluZ1F1ZXJ5ID0gbnVsbCxcbiAgICBsaXN0VG90YWwgPSAtMSxcbiAgICBsaXN0Q3VycmVudCA9IC0xLFxuICAgIGRlbGF5ID0gMzAsXG4gICAgJHJlc3VsdHNDb250YWluZXI7XG5cbi8qKlxuICogQGZ1bmN0aW9uXG4gKiBAZGVzY3JpcHRpb24gSGFuZGxlcyBrZXlib2FyZCdzIGFycm93IGtleXNcbiAqIEBwYXJhbSBrZXlDb2RlIENvZGUgb2YgYW4gYXJyb3cga2V5IHRvIGJlIGhhbmRsZWRcbiAqL1xuZnVuY3Rpb24gaGFuZGxlQXJyb3dLZXlzKGtleUNvZGUpIHtcbiAgICBzd2l0Y2ggKGtleUNvZGUpIHtcbiAgICAgICAgY2FzZSAzODpcbiAgICAgICAgICAgIC8vIGtleVVwXG4gICAgICAgICAgICBsaXN0Q3VycmVudCA9IChsaXN0Q3VycmVudCA8PSAwKSA/IChsaXN0VG90YWwgLSAxKSA6IChsaXN0Q3VycmVudCAtIDEpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgNDA6XG4gICAgICAgICAgICAvLyBrZXlEb3duXG4gICAgICAgICAgICBsaXN0Q3VycmVudCA9IChsaXN0Q3VycmVudCA+PSBsaXN0VG90YWwgLSAxKSA/IDAgOiBsaXN0Q3VycmVudCArIDE7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIC8vIHJlc2V0XG4gICAgICAgICAgICBsaXN0Q3VycmVudCA9IC0xO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgICRyZXN1bHRzQ29udGFpbmVyLmNoaWxkcmVuKCkucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJykuZXEobGlzdEN1cnJlbnQpLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xuICAgICQoJ2lucHV0W25hbWU9XCJxXCJdJykudmFsKCRyZXN1bHRzQ29udGFpbmVyLmZpbmQoJy5zZWxlY3RlZCAuc3VnZ2VzdGlvbnRlcm0nKS5maXJzdCgpLnRleHQoKSk7XG4gICAgcmV0dXJuIHRydWU7XG59XG5cbnZhciBzZWFyY2hzdWdnZXN0ID0ge1xuICAgIC8qKlxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBkZXNjcmlwdGlvbiBDb25maWd1cmVzIHBhcmFtZXRlcnMgYW5kIHJlcXVpcmVkIG9iamVjdCBpbnN0YW5jZXNcbiAgICAgKi9cbiAgICBpbml0OiBmdW5jdGlvbiAoY29udGFpbmVyLCBkZWZhdWx0VmFsdWUpIHtcbiAgICAgICAgdmFyICRzZWFyY2hDb250YWluZXIgPSAkKGNvbnRhaW5lcik7XG4gICAgICAgIHZhciAkc2VhcmNoRm9ybSA9ICRzZWFyY2hDb250YWluZXIuZmluZCgnZm9ybVtuYW1lPVwic2ltcGxlU2VhcmNoXCJdJyk7XG4gICAgICAgIHZhciAkc2VhcmNoRmllbGQgPSAkc2VhcmNoRm9ybS5maW5kKCdpbnB1dFtuYW1lPVwicVwiXScpO1xuXG4gICAgICAgIC8vIGRpc2FibGUgYnJvd3NlciBhdXRvIGNvbXBsZXRlXG4gICAgICAgICRzZWFyY2hGaWVsZC5hdHRyKCdhdXRvY29tcGxldGUnLCAnb2ZmJyk7XG5cbiAgICAgICAgLy8gb24gZm9jdXMgbGlzdGVuZXIgKGNsZWFyIGRlZmF1bHQgdmFsdWUpXG4gICAgICAgICRzZWFyY2hGaWVsZC5mb2N1cyhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoISRyZXN1bHRzQ29udGFpbmVyKSB7XG4gICAgICAgICAgICAgICAgLy8gY3JlYXRlIHJlc3VsdHMgY29udGFpbmVyIGlmIG5lZWRlZFxuICAgICAgICAgICAgICAgIC8vJHJlc3VsdHNDb250YWluZXIgPSAkKCc8ZGl2Lz4nKS5hdHRyKCdpZCcsICdzZWFyY2gtc3VnZ2VzdGlvbnMnKS5hcHBlbmRUbygkc2VhcmNoQ29udGFpbmVyKTtcbiAgICAgICAgICAgICAgICAkcmVzdWx0c0NvbnRhaW5lciA9ICQoJzxkaXYvPicpLmF0dHIoJ2NsYXNzJywgJ3N1Z2dlc3Rpb25zJykuYXR0cignaWQnLCAnc3VnZ2VzdGlvbnMnKS5hcHBlbmRUbygkc2VhcmNoQ29udGFpbmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgkc2VhcmNoRmllbGQudmFsKCkgPT09IGRlZmF1bHRWYWx1ZSkge1xuICAgICAgICAgICAgICAgICRzZWFyY2hGaWVsZC52YWwoJycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgJHNlYXJjaEZpZWxkLmJsdXIoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRlbXAgPSAkc2VhcmNoRmllbGQudmFsKCk7XG4gICAgICAgICAgICBpZiAoJC50cmltKHRlbXApID09ICcnKSB7XG4gICAgICAgICAgICAgICAgJHNlYXJjaEZpZWxkLnZhbCgnU2VhcmNoIEVudGlyZSBTaXRlLi4uJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSk7XG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoISRzZWFyY2hDb250YWluZXIuaXMoZS50YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCh0aGlzLmNsZWFyUmVzdWx0cywgMjAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICAgICAgLy8gb24gc3VibWl0IHdlIGRvIG5vdCBzdWJtaXQgdGhlIGZvcm0sIGJ1dCBjaGFuZ2UgdGhlIHdpbmRvdyBsb2NhdGlvblxuICAgICAgICAvLyBpbiBvcmRlciB0byBhdm9pZCBodHRwcyB0byBodHRwIHdhcm5pbmdzIGluIHRoZSBicm93c2VyXG4gICAgICAgIC8vIG9ubHkgaWYgaXQncyBub3QgdGhlIGRlZmF1bHQgdmFsdWUgYW5kIGl0J3Mgbm90IGVtcHR5XG4gICAgICAgICRzZWFyY2hGb3JtLnN1Ym1pdChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc2VhcmNoVXJsID0gJHNlYXJjaEZvcm0uYXR0cignYWN0aW9uJyk7XG4gICAgICAgICAgICB2YXIgc2Vzc2lvbklkID0galF1ZXJ5KCcjZm9vdGVyaGlkZGVuaWQnKS50ZXh0KCk7XG4gICAgICAgICAgICB2YXIgayA9ICcnXG4gICAgICAgICAgICBpZiAoc2Vzc2lvbklkID09ICdyYXBhbGEnKSB7XG4gICAgICAgICAgICAgICAgayA9IHNlYXJjaFVybCArICc/aWQ9MSc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNlc3Npb25JZCA9PSAnc3VmaXgnKSB7XG4gICAgICAgICAgICAgICAgayA9IHNlYXJjaFVybCArICc/aWQ9Mic7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNlc3Npb25JZCA9PSAndHJpZ2dlcngnKSB7XG4gICAgICAgICAgICAgICAgayA9IHNlYXJjaFVybCArICc/aWQ9Myc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNlc3Npb25JZCA9PSAnc3Rvcm0nKSB7XG4gICAgICAgICAgICAgICAgayA9IHNlYXJjaFVybCArICc/aWQ9NCc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNlc3Npb25JZCA9PSAnbHVocmplbnNlbicpIHtcbiAgICAgICAgICAgICAgICBrID0gc2VhcmNoVXJsICsgJz9pZD01JztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2Vzc2lvbklkID09ICd2bWMnKSB7XG4gICAgICAgICAgICAgICAgayA9IHNlYXJjaFVybCArICc/aWQ9Nic7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNlc3Npb25JZCA9PSAndGVybWluYXRvcicpIHtcbiAgICAgICAgICAgICAgICBrID0gc2VhcmNoVXJsICsgJz9pZD03JztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2Vzc2lvbklkID09ICdibHVlZm94Jykge1xuICAgICAgICAgICAgICAgIGsgPSBzZWFyY2hVcmwgKyAnP2lkPTgnO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzZXNzaW9uSWQgPT0gJ3dpbGxpYW1zb24nKSB7XG4gICAgICAgICAgICAgICAgayA9IHNlYXJjaFVybCArICc/aWQ9OSc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNlc3Npb25JZCA9PSAnbWFyY3VtJykge1xuICAgICAgICAgICAgICAgIGsgPSBzZWFyY2hVcmwgKyAnP2lkPTEwJztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2Vzc2lvbklkID09ICdzdHJpa2VtYXN0ZXInKSB7XG4gICAgICAgICAgICAgICAgayA9IHNlYXJjaFVybCArICc/aWQ9MTEnO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzZXNzaW9uSWQgPT0gJ290dGVyJykge1xuICAgICAgICAgICAgICAgIGsgPSBzZWFyY2hVcmwgKyAnP2lkPTIxJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBzZWFyY2hUZXJtID0gJHNlYXJjaEZpZWxkLnZhbCgpO1xuICAgICAgICAgICAgaWYgKHNlYXJjaFRlcm0gIT0gZGVmYXVsdFZhbHVlICYmIHNlYXJjaFRlcm0gIT0gJycpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSB1dGlsLmFwcGVuZFBhcmFtVG9VUkwoaywgJ3EnLCBzZWFyY2hUZXJtKS5yZXBsYWNlKCdodHRwcycsICdodHRwJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBvbiBrZXkgdXAgbGlzdGVuZXJcbiAgICAgICAgJHNlYXJjaEZpZWxkLmtleXVwKGZ1bmN0aW9uIChlKSB7XG5cbiAgICAgICAgICAgIC8vIGdldCBrZXlDb2RlICh3aW5kb3cuZXZlbnQgaXMgZm9yIElFKVxuICAgICAgICAgICAgdmFyIGtleUNvZGUgPSBlLmtleUNvZGUgfHwgd2luZG93LmV2ZW50LmtleUNvZGU7XG5cbiAgICAgICAgICAgIC8vIGNoZWNrIGFuZCB0cmVhdCB1cCBhbmQgZG93biBhcnJvd3NcbiAgICAgICAgICAgIGlmIChoYW5kbGVBcnJvd0tleXMoa2V5Q29kZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBjaGVjayBmb3IgYW4gRU5URVIgb3IgRVNDXG4gICAgICAgICAgICBpZiAoa2V5Q29kZSA9PT0gMTMgfHwga2V5Q29kZSA9PT0gMjcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyUmVzdWx0cygpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY3VycmVudFF1ZXJ5ID0gJHNlYXJjaEZpZWxkLnZhbCgpLnRyaW0oKTtcblxuICAgICAgICAgICAgLy8gbm8gcXVlcnkgY3VycmVudGx5IHJ1bm5pbmcsIGluaXQgYW4gdXBkYXRlXG4gICAgICAgICAgICBpZiAoIXJ1bm5pbmdRdWVyeSkge1xuICAgICAgICAgICAgICAgIHJ1bm5pbmdRdWVyeSA9IGN1cnJlbnRRdWVyeTtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KHRoaXMuc3VnZ2VzdC5iaW5kKHRoaXMpLCBkZWxheSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBkZXNjcmlwdGlvbiB0cmlnZ2VyIHN1Z2dlc3QgYWN0aW9uXG4gICAgICovXG4gICAgc3VnZ2VzdDogZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBjaGVjayB3aGV0aGVyIHF1ZXJ5IHRvIGV4ZWN1dGUgKHJ1bm5pbmdRdWVyeSkgaXMgc3RpbGwgdXAgdG8gZGF0ZSBhbmQgaGFkIG5vdCBjaGFuZ2VkIGluIHRoZSBtZWFud2hpbGVcbiAgICAgICAgLy8gKHdlIGhhZCBhIGxpdHRsZSBkZWxheSlcbiAgICAgICAgaWYgKHJ1bm5pbmdRdWVyeSAhPT0gY3VycmVudFF1ZXJ5KSB7XG4gICAgICAgICAgICAvLyB1cGRhdGUgcnVubmluZyBxdWVyeSB0byB0aGUgbW9zdCByZWNlbnQgc2VhcmNoIHBocmFzZVxuICAgICAgICAgICAgcnVubmluZ1F1ZXJ5ID0gY3VycmVudFF1ZXJ5O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaWYgaXQncyBlbXB0eSBjbGVhciB0aGUgcmVzdWx0cyBib3ggYW5kIHJldHVyblxuICAgICAgICBpZiAocnVubmluZ1F1ZXJ5Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5jbGVhclJlc3VsdHMoKTtcbiAgICAgICAgICAgIHJ1bm5pbmdRdWVyeSA9IG51bGw7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBpZiB0aGUgY3VycmVudCBzZWFyY2ggcGhyYXNlIGlzIHRoZSBzYW1lIGFzIGZvciB0aGUgbGFzdCBzdWdnZXN0aW9uIGNhbGwsIGp1c3QgcmV0dXJuXG4gICAgICAgIGlmIChsYXN0UXVlcnkgPT09IHJ1bm5pbmdRdWVyeSkge1xuICAgICAgICAgICAgcnVubmluZ1F1ZXJ5ID0gbnVsbDtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGJ1aWxkIHRoZSByZXF1ZXN0IHVybFxuICAgICAgICB2YXIgcmVxVXJsID0gdXRpbC5hcHBlbmRQYXJhbVRvVVJMKFVybHMuc2VhcmNoc3VnZ2VzdCwgJ3EnLCBydW5uaW5nUXVlcnkpO1xuXG4gICAgICAgIC8vIGV4ZWN1dGUgc2VydmVyIGNhbGxcbiAgICAgICAgJC5nZXQocmVxVXJsLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgdmFyIHN1Z2dlc3Rpb25IVE1MID0gZGF0YSxcbiAgICAgICAgICAgICAgICBhbnNMZW5ndGggPSBzdWdnZXN0aW9uSFRNTC50cmltKCkubGVuZ3RoO1xuXG4gICAgICAgICAgICAvLyBpZiB0aGVyZSBhcmUgcmVzdWx0cyBwb3B1bGF0ZSB0aGUgcmVzdWx0cyBkaXZcbiAgICAgICAgICAgIGlmIChhbnNMZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyUmVzdWx0cygpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgdGhlIHJlc3VsdHMgZGl2XG4gICAgICAgICAgICAgICAgJHJlc3VsdHNDb250YWluZXIuaHRtbChzdWdnZXN0aW9uSFRNTCkuZmFkZUluKDIwMCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHJlY29yZCB0aGUgcXVlcnkgdGhhdCBoYXMgYmVlbiBleGVjdXRlZFxuICAgICAgICAgICAgbGFzdFF1ZXJ5ID0gcnVubmluZ1F1ZXJ5O1xuICAgICAgICAgICAgLy8gcmVzZXQgY3VycmVudGx5IHJ1bm5pbmcgcXVlcnlcbiAgICAgICAgICAgIHJ1bm5pbmdRdWVyeSA9IG51bGw7XG5cbiAgICAgICAgICAgIC8vIGNoZWNrIGZvciBhbm90aGVyIHJlcXVpcmVkIHVwZGF0ZSAoaWYgY3VycmVudCBzZWFyY2ggcGhyYXNlIGlzIGRpZmZlcmVudCBmcm9tIGp1c3QgZXhlY3V0ZWQgY2FsbClcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVlcnkgIT09IGxhc3RRdWVyeSkge1xuICAgICAgICAgICAgICAgIC8vIC4uLiBhbmQgZXhlY3V0ZSBpbW1lZGlhdGVseSBpZiBzZWFyY2ggaGFzIGNoYW5nZWQgd2hpbGUgdGhpcyBzZXJ2ZXIgY2FsbCB3YXMgaW4gdHJhbnNpdFxuICAgICAgICAgICAgICAgIHJ1bm5pbmdRdWVyeSA9IGN1cnJlbnRRdWVyeTtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KHRoaXMuc3VnZ2VzdC5iaW5kKHRoaXMpLCBkZWxheSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmhpZGVMZWZ0UGFuZWwoKTtcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqL1xuICAgIGNsZWFyUmVzdWx0czogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoISRyZXN1bHRzQ29udGFpbmVyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgJHJlc3VsdHNDb250YWluZXIuZmFkZU91dCgyMDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRyZXN1bHRzQ29udGFpbmVyLmVtcHR5KCk7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICovXG4gICAgaGlkZUxlZnRQYW5lbDogZnVuY3Rpb24gKCkge1xuICAgICAgICAvL2hpZGUgbGVmdCBwYW5lbCBpZiB0aGVyZSBpcyBvbmx5IGEgbWF0Y2hpbmcgc3VnZ2VzdGVkIGN1c3RvbSBwaHJhc2VcbiAgICAgICAgaWYgKCQoJy5zZWFyY2gtc3VnZ2VzdGlvbi1sZWZ0LXBhbmVsLWhpdCcpLmxlbmd0aCA9PT0gMSAmJiAkKCcuc2VhcmNoLXBocmFzZS1zdWdnZXN0aW9uIGEnKS50ZXh0KCkucmVwbGFjZSgvKF5bXFxzXSt8W1xcc10rJCkvZywgJycpLnRvVXBwZXJDYXNlKCkgPT09ICQoJy5zZWFyY2gtc3VnZ2VzdGlvbi1sZWZ0LXBhbmVsLWhpdCBhJykudGV4dCgpLnRvVXBwZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICQoJy5zZWFyY2gtc3VnZ2VzdGlvbi1sZWZ0LXBhbmVsJykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcbiAgICAgICAgICAgICQoJy5zZWFyY2gtc3VnZ2VzdGlvbi13cmFwcGVyLWZ1bGwnKS5hZGRDbGFzcygnc2VhcmNoLXN1Z2dlc3Rpb24td3JhcHBlcicpO1xuICAgICAgICAgICAgJCgnLnNlYXJjaC1zdWdnZXN0aW9uLXdyYXBwZXInKS5yZW1vdmVDbGFzcygnc2VhcmNoLXN1Z2dlc3Rpb24td3JhcHBlci1mdWxsJyk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHNlYXJjaHN1Z2dlc3Q7XG4iLCIvKlxuICogQWxsIGphdmEgc2NyaXB0IGxvZ2ljIGZvciBnb29nbGUgZHJpdmVuIHN0b3JlIGxvY2F0b3IuXG4gKlxuICogVGhlIGNvZGUgcmVsaWVzIG9uIHRoZSBqUXVlcnkgSlMgbGlicmFyeSB0b1xuICogYmUgYWxzbyBsb2FkZWQuXG4gKlxuICovXG5cbid1c2Ugc3RyaWN0Jztcbi8qZ2xvYmFsIGdvb2dsZSAqL1xuLyplc2xpbnQgYmxvY2stc2NvcGVkLXZhcjogMCAqL1xuXG52YXIgTWFya2VyV2l0aExhYmVsID0gcmVxdWlyZSgnLi9tYXJrZXItd2l0aC1sYWJlbCcpOyBcblxudmFyIFN0b3JlTG9jYXRvciA9IHtcbiAgICAvLyBjb25maWd1cmF0aW9uIHBhcmFtZXRlcnMgYW5kIHJlcXVpcmVkIG9iamVjdCBpbnN0YW5jZXNcbiAgICBpbml0aWFsTG9jYXRpb246ICAgICAgICBudWxsLFxuICAgIGJyb3dzZXJTdXBwb3J0RmxhZzogICAgIGZhbHNlLFxuICAgIHN0b3JldXJsOiAgICAgICAgICAgICAgIG51bGwsXG4gICAgbWFya2VydXJsOiAgICAgICAgICAgICAgbnVsbCxcbiAgICBxdWVyeXVybDogICAgICAgICAgICAgICBudWxsLFxuICAgIGNvb2tpZXVybDogICAgICAgICAgICAgIG51bGwsXG4gICAgY29va2llbmFtZTogICAgICAgICAgICAgbnVsbCxcbiAgICBkZWZhdWx0bG9jYXRpb246ICAgICAgICBudWxsLFxuICAgIHpvb21yYWRpdXM6ICAgICAgICAgICAgIHt9LFxuICAgIG1hcmtlcnM6ICAgICAgICAgICAgICAgIFtdLFxuICAgIGluZm93aW5kb3dzOiAgICAgICAgICAgIFtdLFxuICAgIHJhZGl1czogICAgICAgICAgICAgICAgIDUwLFxuICAgIG1hcDogICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgdW5pdDogICAgICAgICAgICAgICAgICAgJ21pJyxcbiAgICB0aW1lcjogICAgICAgICAgICAgICAgICBudWxsLFxuICAgIG1hcHR5cGU6ICAgICAgICAgICAgICAgIG51bGwsXG4gICAgTGF0TG5nTGlzdDogICAgICAgICAgICAgW10sXG4gICAgaXNEZXRhaWxzOiAgICAgICAgICAgICAgKCQoJy5wdF9zdG9yZS1sb2NhdG9yLWRldGFpbHMnKS5sZW5ndGgpID8gdHJ1ZSA6IGZhbHNlLFxuXG4gICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgICogaW5pdGlhbGl6ZSB0aGUgZ29vZ2xlIG1hcFxuICAgICogQHBhcmFtIC0gem9vbXJhZGl1cyA6IGpzb24gb2JqZWN0IHdpdGggcmFkaXVzIHNldHRpbmdzIGZvciBlYWNoIGdvb2dsZSB6b29tIGxldmVsICgwLTIwKVxuICAgICogQHBhcmFtIC0gc3RvcmV1cmwgOiB1cmwgZm9yIGRpc3BsYXlpbmcgc3RvcmUgZGV0YWlsc1xuICAgICogQHBhcmFtIC0gbWFya2VydXJsIDogdXJsIGZvciBtYXJrZXIgaW1hZ2VcbiAgICAqIEBwYXJhbSAtIHF1ZXJ5dXJsIDogdXJsIGZvciBxdWVyeWluZyBuZWFyZXN0IHN0b3Jlc1xuICAgICogQHBhcmFtIC0gY29va2lldXJsIDogdXJsIGZvciBzZXR0aW5nIHByZWZlcnJlZCBsb2NhdGlvbiBjb29raWVcbiAgICAqIEBwYXJhbSAtIGNvb2tpZW5hbWUgOiBuYW1lIGZvciBwcmVmZXJyZWQgbG9jYXRpb24gY29va2llXG4gICAgKiBAcGFyYW0gLSBkZWZhdWx0bG9jYXRpb24gOiBkZWZhdWx0IGFkZHJlc3MgZm9yIG1hcCBpZiB1c2VycyBnZW9sb2NhdGlvbiBjYW4gbm90IGJlIGRldGVjdGVkXG4gICAgKiBAcGFyYW0gLSBtYXB0eXBlIDogdHlwZSBvZiBnb29nbGUgbWFwIHRvIGRpc3BsYXlcbiAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gICAgaW5pdDogZnVuY3Rpb24gKHpvb21yYWRpdXMsIHN0b3JldXJsLCBtYXJrZXJ1cmwsIHF1ZXJ5dXJsLCBjb29raWV1cmwsIGNvb2tpZW5hbWUsIGRlZmF1bHRsb2NhdGlvbiwgbWFwdHlwZSkge1xuXG4gICAgICAgIHRoaXMuem9vbXJhZGl1cyA9IHpvb21yYWRpdXM7XG4gICAgICAgIHRoaXMuc3RvcmV1cmwgPSBzdG9yZXVybDtcbiAgICAgICAgdGhpcy5tYXJrZXJ1cmwgPSBtYXJrZXJ1cmw7XG4gICAgICAgIHRoaXMucXVlcnl1cmwgPSBxdWVyeXVybDtcbiAgICAgICAgdGhpcy5jb29raWV1cmwgPSBjb29raWV1cmw7XG4gICAgICAgIHRoaXMuY29va2llbmFtZSA9IGNvb2tpZW5hbWU7XG4gICAgICAgIHRoaXMuZGVmYXVsdGxvY2F0aW9uID0gZGVmYXVsdGxvY2F0aW9uO1xuICAgICAgICB0aGlzLm1hcHR5cGUgPSBtYXB0eXBlO1xuXG4gICAgICAgIC8vIERlZmluZSB0aGUgb3B0aW9ucyBmb3IgdGhlIEdvb2dsZSBNYXBzIG9iamVjdFxuICAgICAgICB2YXIgbXlPcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIHpvb206IDcsXG4gICAgICAgICAgICAgICAgbWFwVHlwZUlkOiBnb29nbGUubWFwcy5NYXBUeXBlSWRbbWFwdHlwZV0sXG4gICAgICAgICAgICAgICAgZGlzYWJsZURlZmF1bHRVSTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzY3JvbGx3aGVlbDogZmFsc2UsXG4gICAgICAgICAgICAgICAgem9vbUNvbnRyb2w6IHRydWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZWxmID0gdGhpcztcblxuICAgICAgICAvLyBDcmVhdGUgYSBuZXcgR29vZ2xlIE1hcHMgb2JqZWN0IHdpdGggdGhlIGdpdmVuIG9wdGlvbnNcbiAgICAgICAgdGhpcy5tYXAgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAtY2FudmFzJyksIG15T3B0aW9ucyk7XG5cbiAgICAgICAgLy8gUmVuZGVyIFN0b3JlIERldGFpbFxuICAgICAgICBpZiAoJCgnI3N0b3JlZGV0YWlscy13cmFwcGVyJykuc2l6ZSgpID4gMCkge1xuICAgICAgICAgICAgU3RvcmVMb2NhdG9yLmdldFNlYXJjaFBvc2l0aW9uKCdvbmVzdG9yZScpO1xuICAgICAgICAvLyBDaGVjayBmb3IgY29va2llIHByZWZlcmVuY2VcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmdldENvb2tpZUxhdExuZygpKSB7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxMb2NhdGlvbiA9IHRoaXMuZ2V0Q29va2llTGF0TG5nKCk7XG4gICAgICAgICAgICB0aGlzLm1hcC5zZXRDZW50ZXIodGhpcy5pbml0aWFsTG9jYXRpb24pO1xuICAgICAgICAvLyBUcnkgRGVtYW5kd2FyZSBHZW9sb2NhdGlvblxuICAgICAgICB9IGVsc2UgaWYgKHdpbmRvdy5Vc2VyLmdlb2xvY2F0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxMb2NhdGlvbiA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcod2luZG93LlVzZXIuZ2VvbG9jYXRpb24ubGF0aXR1ZGUsIHdpbmRvdy5Vc2VyLmdlb2xvY2F0aW9uLmxvbmdpdHVkZSk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlclN0b3Jlcyh3aW5kb3cuVXNlci5nZW9sb2NhdGlvbi5sYXRpdHVkZSwgd2luZG93LlVzZXIuZ2VvbG9jYXRpb24ubG9uZ2l0dWRlLCAkKCcjY291bnRyeScpLnZhbCgpLCAkKCcjZGlzdGFuY2V1bml0cHJlZicpLnZhbCgpLCA1MCwgZmFsc2UsIHRydWUpO1xuICAgICAgICAvLyBUcnkgVzNDIEdlb2xvY2F0aW9uIChwcmVmZXJyZWQgZm9yIGRldGVjdGlvbilcbiAgICAgICAgfSBlbHNlIGlmIChnb29nbGUubG9hZGVyLkNsaWVudExvY2F0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxMb2NhdGlvbiA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoZ29vZ2xlLmxvYWRlci5DbGllbnRMb2NhdGlvbi5sYXRpdHVkZSwgZ29vZ2xlLmxvYWRlci5DbGllbnRMb2NhdGlvbi5sb25naXR1ZGUpO1xuICAgICAgICAgICAgdGhpcy5tYXAuc2V0Q2VudGVyKHRoaXMuaW5pdGlhbExvY2F0aW9uKTtcbiAgICAgICAgLy8gVHJ5IEdvb2dsZSBHZWFycyBHZW9sb2NhdGlvblxuICAgICAgICB9IGVsc2UgaWYgKGdvb2dsZS5nZWFycykge1xuICAgICAgICAgICAgdGhpcy5icm93c2VyU3VwcG9ydEZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIGdlbyA9IGdvb2dsZS5nZWFycy5mYWN0b3J5LmNyZWF0ZSgnYmV0YS5nZW9sb2NhdGlvbicpO1xuICAgICAgICAgICAgZ2VvLmdldEN1cnJlbnRQb3NpdGlvbihmdW5jdGlvbiAocG9zaXRpb24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmluaXRpYWxMb2NhdGlvbiA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcocG9zaXRpb24ubGF0aXR1ZGUsIHBvc2l0aW9uLmxvbmdpdHVkZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXAuc2V0Q2VudGVyKHRoaXMuaW5pdGlhbExvY2F0aW9uKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZU5vR2VvTG9jYXRpb24odGhpcy5icm93c2VyU3VwcG9ydEZsYWcpO1xuICAgICAgICAgICAgICAgICQoJyNzdG9yZXMnKS5odG1sKCcnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAvLyBCcm93c2VyIGRvZXNuJ3Qgc3VwcG9ydCBHZW9sb2NhdGlvbiBzbyBnZW9sb2NhdGUgdGhlIGRlZmF1bHRcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYnJvd3NlclN1cHBvcnRGbGFnID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZU5vR2VvbG9jYXRpb24oKTtcbiAgICAgICAgICAgICQoJyNzdG9yZXMnKS5odG1sKCcnKTtcbiAgICAgICAgfVxuXG4gICAgICAgICQoJyNzdG9yZS1zZWFyY2gtZm9ybScpLm9uKCdzdWJtaXQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5hY3RpdmVFbGVtZW50LmJsdXIoKTtcbiAgICAgICAgICAgIFN0b3JlTG9jYXRvci5nZXRTZWFyY2hQb3NpdGlvbigpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcblxuICAgICAgICAkKCcjZGlzdGFuY2UnKS5jaGFuZ2UoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCQoJyNkaXN0YW5jZScpLnZhbCgpICE9PSAnJykge1xuICAgICAgICAgICAgICAgIFN0b3JlTG9jYXRvci5yYWRpdXMgPSAkKCcjZGlzdGFuY2UnKS52YWwoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgU3RvcmVMb2NhdG9yLnJhZGl1cyA9IFN0b3JlTG9jYXRvci56b29tcmFkaXVzW3NlbGYubWFwLmdldFpvb20oKV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgYm91bmRzIG9mIHRoZSBzdG9yZSBsb2NhdG9yIHdoZW4gdGhlIGJyb3dzZXIgaXMgcmVzaXplZFxuICAgICAgICB0aGlzLnNtYXJ0UmVzaXplKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChTdG9yZUxvY2F0b3IubWFya2Vycy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBTdG9yZUxvY2F0b3IudXBkYXRlQm91bmRzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgKiBmdW5jdGlvbiB0byBjbG9zZSBhbGwgb3BlbiBnb29nbGUgSW5mb1dpbmRvdyBvYmplY3RzXG4gICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAgIGNsb3NlSW5mb1dpbmRvd3M6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZm9yICh2YXIgaSBpbiB0aGlzLmluZm93aW5kb3dzKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuaW5mb3dpbmRvd3NbaV0gPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbmZvd2luZG93c1tpXS5jbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAqIGZ1bmN0aW9uIHRvIGNyZWF0ZSBhbmQgcG9zaXRpb24gZ29vZ2xlIE1hcmtlcnMgYW5kXG4gICAgKiBJbmZvV2luZG93cyBmb3IgYSByZXN1bHQgc2V0IG9mIFN0b3Jlc1xuICAgICogQHBhcmFtIC0gc3RvcmVzIDogYSBqc29uIG9iamVjdCBjb250YWluaW5nIHN0b3Jlc1xuICAgICogQHBhcmFtIC0gbWFwIDogdGhlIG1hcFxuICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4gICAgcG9wdWxhdGVTdG9yZXM6IGZ1bmN0aW9uIChzdG9yZXMsIG5vTG9jLCBsb2NhdGlvbiwgaW5pdExvYWQsIG1pbGVzQXJvdW5kLCBjdXN0b21lckFkZHJlc3Nlcykge1xuICAgICAgICB2YXIgbm9Mb2NhdGlvbiA9IG5vTG9jIHx8IGZhbHNlLFxuICAgICAgICAgICAgdGhpc0xvYyA9IGxvY2F0aW9uIHx8IG51bGwsXG4gICAgICAgICAgICBpbWFnZSA9IHRoaXMubWFya2VydXJsLFxuICAgICAgICAgICAgZGlzdGFuY2UgPSAwLFxuICAgICAgICAgICAgc3RvcmVDb3VudCA9IDAsXG4gICAgICAgICAgICBzdG9yZUxhdExuZyA9ICcnLFxuICAgICAgICAgICAgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgLy8gRnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgd2hlbiBhIG1hcCBtYXJrZXIgaXMgY2xpY2tlZFxuICAgICAgICBmdW5jdGlvbiBtYXJrZXJDbGljayAoc3RvcmVpZCkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBTdG9yZUxvY2F0b3IuY2xvc2VJbmZvV2luZG93cygpO1xuICAgICAgICAgICAgICAgIFN0b3JlTG9jYXRvci5pbmZvd2luZG93c1tzdG9yZWlkICsgJ0luZm8nXS5vcGVuKHNlbGYubWFwKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBGdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCB3aGVuIGEgc3RvcmUncyBsaW5rIGlzIGNsaWNrZWRcbiAgICAgICAgZnVuY3Rpb24gc3RvcmVDbGljayAoKSB7XG4gICAgICAgICAgICAvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqL1xuICAgICAgICAgICAgU3RvcmVMb2NhdG9yLmNsb3NlSW5mb1dpbmRvd3MoKTtcbiAgICAgICAgICAgIHZhciBzdG9yZWlkID0gJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5hdHRyKCdpZCcpLFxuICAgICAgICAgICAgICAgIGluZm93aW5kb3cgPSBTdG9yZUxvY2F0b3IuaW5mb3dpbmRvd3Nbc3RvcmVpZCArICdJbmZvJ107XG4gICAgICAgICAgICBpbmZvd2luZG93Lm9wZW4oc2VsZi5tYXApO1xuICAgICAgICAgICAgc2VsZi5tYXAuc2V0Q2VudGVyKGluZm93aW5kb3cucG9zaXRpb24pO1xuICAgICAgICAgICAgaWYgKHNjcmVlbi53aWR0aCA8IDEyMDApIHsgJCgnYm9keScpLnNjcm9sbFRvcCgkKCcjc3RvcmUtbG9jYXRvcicpLm9mZnNldCgpLnRvcCk7IH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLm1hcmtlcnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgZm9yICh2YXIgaiBpbiB0aGlzLm1hcmtlcnMpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMubWFya2Vyc1tqXSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXJrZXJzW2pdLnNldE1hcChudWxsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm1hcmtlcnMubGVuZ3RoID0gMDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNsb3NlSW5mb1dpbmRvd3MoKTtcbiAgICAgICAgdGhpcy5pbmZvd2luZG93cy5sZW5ndGggPSAwO1xuICAgICAgICB0aGlzLkxhdExuZ0xpc3QgPSBbXTtcbiAgICAgICAgJCgnI3N0b3JlcycpLmFkZENsYXNzKCdub1N0b3JlcycpLmh0bWwoJzxkaXYgY2xhc3M9XCJzdG9yZXMtY29udGFpbmVyXCI+PC9kaXY+Jyk7XG5cbiAgICAgICAgLy9jcmVhdGUgYXJyYXkgb2Ygc3RvcmUgSURzIGFuZCBhZGQgZGlzdGFuY2UgaWYgYXZhaWxhYmxlXG4gICAgICAgIHZhciBzdG9yZXNBcnJheSA9IFtdO1xuICAgICAgICBmb3IgKHZhciBzdG9yZSBpbiBzdG9yZXMpIHtcbiAgICAgICAgICAgIHZhciB0ZW1wQXJyYXkgPSBbc3RvcmVdO1xuICAgICAgICAgICAgaWYgKCFub0xvY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXNMb2MgJiYgc3RvcmVzW3N0b3JlXS5sYXRpdHVkZSAmJiBzdG9yZXNbc3RvcmVdLmxvbmdpdHVkZSkgeyAvL2NhbGN1bGF0ZSBkaXN0YW5jZSBmcm9tIHNlYXJjaCBsb2NhdGlvblxuICAgICAgICAgICAgICAgICAgICBzdG9yZUxhdExuZyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoc3RvcmVzW3N0b3JlXS5sYXRpdHVkZSwgc3RvcmVzW3N0b3JlXS5sb25naXR1ZGUpO1xuICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZSAgICA9IGdvb2dsZS5tYXBzLmdlb21ldHJ5LnNwaGVyaWNhbC5jb21wdXRlRGlzdGFuY2VCZXR3ZWVuKHRoaXNMb2MsIHN0b3JlTGF0TG5nLCAzOTU5KS50b0ZpeGVkKDEpO1xuICAgICAgICAgICAgICAgICAgICB0ZW1wQXJyYXkucHVzaChkaXN0YW5jZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3RvcmVzQXJyYXkucHVzaCh0ZW1wQXJyYXkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9pZiB3ZSBoYXZlIHN0b3JlcyB3aXRoIGRpc3RhbmNlcyB3ZSBzb3J0IHRoZSBhcnJheSBvZiBzdG9yZSBJRHNcbiAgICAgICAgaWYgKHN0b3Jlc0FycmF5Lmxlbmd0aCAmJiBzdG9yZXNBcnJheVswXS5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBzdG9yZXNBcnJheS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7cmV0dXJuIGFbMV0gLSBiWzFdO30pO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdG9yZXNBcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgc3RvcmUgPSBzdG9yZXNBcnJheVtpXVswXTtcblxuICAgICAgICAgICAgc3RvcmVDb3VudCsrO1xuXG4gICAgICAgICAgICAvL2Zvcm1hdCB0aGUgYWRkcmVzc1xuICAgICAgICAgICAgdmFyIGZvcm1hdHRlZEFkZHJlc3MgPSAnJztcbiAgICAgICAgICAgIGZvcm1hdHRlZEFkZHJlc3MgPSAoc3RvcmVzW3N0b3JlXS5hZGRyZXNzMSkgPyBmb3JtYXR0ZWRBZGRyZXNzICsgc3RvcmVzW3N0b3JlXS5hZGRyZXNzMSA6IGZvcm1hdHRlZEFkZHJlc3M7XG4gICAgICAgICAgICBmb3JtYXR0ZWRBZGRyZXNzID0gKHN0b3Jlc1tzdG9yZV0uY2l0eSkgPyBmb3JtYXR0ZWRBZGRyZXNzICsgJywgJyArIHN0b3Jlc1tzdG9yZV0uY2l0eSA6IGZvcm1hdHRlZEFkZHJlc3M7XG4gICAgICAgICAgICBmb3JtYXR0ZWRBZGRyZXNzID0gKHN0b3Jlc1tzdG9yZV0uc3RhdGVDb2RlKSAgPyBmb3JtYXR0ZWRBZGRyZXNzICsgJywgJyArIHN0b3Jlc1tzdG9yZV0uc3RhdGVDb2RlIDogZm9ybWF0dGVkQWRkcmVzcztcbiAgICAgICAgICAgIGZvcm1hdHRlZEFkZHJlc3MgPSAoc3RvcmVzW3N0b3JlXS5wb3N0YWxDb2RlKSA/IGZvcm1hdHRlZEFkZHJlc3MgKyAnICcgKyBzdG9yZXNbc3RvcmVdLnBvc3RhbENvZGUgOiBmb3JtYXR0ZWRBZGRyZXNzO1xuXG4gICAgICAgICAgICAvL1VSTCBlbmNvZGUgdGhlIGFkZHJlc3NcbiAgICAgICAgICAgIHZhciBlbmNvZGVkQWRkcmVzcyA9IGVuY29kZVVSSUNvbXBvbmVudChmb3JtYXR0ZWRBZGRyZXNzKTtcblxuICAgICAgICAgICAgaWYgKCFub0xvY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgLy8gYnVpbGQgdGhlIHN0b3JlIGluZm8gSFRNTCBmb3IgcmlnaHQgY29sdW1uXG4gICAgICAgICAgICAgICAgdmFyIHN0b3JlaW5mbyA9ICc8ZGl2IGNsYXNzPVwic3RvcmVcIiBpZD1cIicgKyBzdG9yZSArICdcIj4nO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzTG9jICYmIHN0b3Jlc1tzdG9yZV0ubGF0aXR1ZGUgJiYgc3RvcmVzW3N0b3JlXS5sb25naXR1ZGUpIHsgLy9jYWxjdWxhdGUgZGlzdGFuY2UgZnJvbSBzZWFyY2ggbG9jYXRpb25cbiAgICAgICAgICAgICAgICAgICAgc3RvcmVMYXRMbmcgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKHN0b3Jlc1tzdG9yZV0ubGF0aXR1ZGUsIHN0b3Jlc1tzdG9yZV0ubG9uZ2l0dWRlKTtcbiAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2UgICAgPSBnb29nbGUubWFwcy5nZW9tZXRyeS5zcGhlcmljYWwuY29tcHV0ZURpc3RhbmNlQmV0d2Vlbih0aGlzTG9jLCBzdG9yZUxhdExuZywgMzk1OSkudG9GaXhlZCgxKTtcbiAgICAgICAgICAgICAgICAgICAgc3RvcmVpbmZvICs9ICc8ZGl2IGNsYXNzPVwiZGlzdGFuY2VcIj4nICsgZGlzdGFuY2UgKyAnICcgKyAkKCcjZGlzdGFuY2V1bml0cHJlZicpLnZhbCgpICsgJyBhd2F5PC9kaXY+JztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgc2Vjb25kYXJ5TmFtZSA9IHN0b3Jlc1tzdG9yZV0uc3RvcmVTZWNvbmRhcnlOYW1lO1xuICAgICAgICAgICAgICAgIGlmIChzZWNvbmRhcnlOYW1lICE9PSAnJykge1xuICAgICAgICAgICAgICAgICAgICBzZWNvbmRhcnlOYW1lID0gJygnICsgc2Vjb25kYXJ5TmFtZSArICcpJztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBzdG9yZWluZm8gKz0gJzxkaXYgY2xhc3M9XCJzdG9yZW51bWJlclwiPjxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMClcIj4nICsgc3RvcmVDb3VudCArICc8L2E+PC9kaXY+ICc7XG4gICAgICAgICAgICAgICAgc3RvcmVpbmZvICs9ICc8ZGl2IGNsYXNzPVwic3RvcmVuYW1lXCI+PGEgaHJlZj1cIicgKyB0aGlzLnN0b3JldXJsICsgc3RvcmUgKyAnXCI+PHNwYW4gY2xhc3M9XCJwcmltYXJ5TmFtZVwiPicgKyBzdG9yZXNbc3RvcmVdLm5hbWUgKyAnPC9zcGFuPiA8c3BhbiBjbGFzcz1cInNlY29uZGFyeU5hbWVcIj4nICsgc2Vjb25kYXJ5TmFtZSArICc8L3NwYW4+PC9hPjwvZGl2Pic7XG4gICAgICAgICAgICAgICAgc3RvcmVpbmZvICs9ICc8ZGl2IGNsYXNzPVwiYWRkcmVzczFcIj4nICsgc3RvcmVzW3N0b3JlXS5hZGRyZXNzMSArICc8L2Rpdj4nO1xuICAgICAgICAgICAgICAgIHN0b3JlaW5mbyArPSAnPGRpdiBjbGFzcz1cImFkZHJlc3MyXCI+JyArIHN0b3Jlc1tzdG9yZV0uYWRkcmVzczIgKyAnPC9kaXY+JztcbiAgICAgICAgICAgICAgICBzdG9yZWluZm8gKz0gJzxkaXYgY2xhc3M9XCJjaXR5U3RhdGVaaXBcIj4nICsgc3RvcmVzW3N0b3JlXS5jaXR5ICsgJywgJyArIHN0b3Jlc1tzdG9yZV0uc3RhdGVDb2RlICsgJyAnICsgc3RvcmVzW3N0b3JlXS5wb3N0YWxDb2RlICsgJzwvZGl2Pic7XG4gICAgICAgICAgICAgICAgc3RvcmVpbmZvICs9ICc8ZGl2IGNsYXNzPVwicGhvbmVcIj4nICsgc3RvcmVzW3N0b3JlXS5waG9uZSArICc8L2Rpdj4nO1xuICAgICAgICAgICAgICAgIHN0b3JlaW5mbyArPSAnPGRpdiBjbGFzcz1cImhvdXJzXCI+JyArIHN0b3Jlc1tzdG9yZV0uc3RvcmVIb3VycyArICc8L2Rpdj4nO1xuICAgICAgICAgICAgICAgIHN0b3JlaW5mbyArPSAnPGRpdiBjbGFzcz1cImRpcmVjdGlvbnNcIj48YSBocmVmPVwiaHR0cHM6Ly9tYXBzLmdvb2dsZS5jb20vbWFwcz9kYWRkcj0nICsgZW5jb2RlZEFkZHJlc3MgKyAnXCIgY2xhc3M9XCJkaXJlY3Rpb25zbGlua1wiIHRhcmdldD1cIl9ibGFua1wiPicgKyBSZXNvdXJjZXMuU1RPUkVfRElSRUNUSU9OUyArICc8L2E+PC9kaXY+JztcbiAgICAgICAgICAgICAgICBzdG9yZWluZm8gKz0gJzwvZGl2Pic7XG4gICAgICAgICAgICAgICAgJCgnI3N0b3JlcyAuc3RvcmVzLWNvbnRhaW5lcicpLmFwcGVuZChzdG9yZWluZm8pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgbWFya2VyT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhzdG9yZXNbc3RvcmVdLmxhdGl0dWRlLCBzdG9yZXNbc3RvcmVdLmxvbmdpdHVkZSksXG4gICAgICAgICAgICAgICAgbWFwOiB0aGlzLm1hcCxcbiAgICAgICAgICAgICAgICB0aXRsZTogc3RvcmVzW3N0b3JlXS5uYW1lICsgJyAnICsgc3RvcmVzW3N0b3JlXS5hZGRyZXNzMSArICcgJyArIHN0b3Jlc1tzdG9yZV0uY2l0eSArICcsICcgKyBzdG9yZXNbc3RvcmVdLnN0YXRlQ29kZSArICcgJyArIHN0b3Jlc1tzdG9yZV0ucG9zdGFsQ29kZSArIHN0b3Jlc1tzdG9yZV0ucGhvbmUsXG4gICAgICAgICAgICAgICAgaWNvbjogaW1hZ2UsXG4gICAgICAgICAgICAgICAgc3RvcmVpZDogc3RvcmVcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGlmICghbm9Mb2NhdGlvbikge1xuICAgICAgICAgICAgICAgICQuZXh0ZW5kKG1hcmtlck9wdGlvbnMsIHtcbiAgICAgICAgICAgICAgICAgICAgbGFiZWxDb250ZW50OiBzdG9yZUNvdW50LFxuICAgICAgICAgICAgICAgICAgICBsYWJlbEFuY2hvcjogKHN0b3JlQ291bnQgPiA5KSA/IG5ldyBnb29nbGUubWFwcy5Qb2ludCg5LCAzMCkgOiBuZXcgZ29vZ2xlLm1hcHMuUG9pbnQoNSwgMzApLFxuICAgICAgICAgICAgICAgICAgICBsYWJlbENsYXNzOiAnbWFya2VyTGFiZWwnLFxuICAgICAgICAgICAgICAgICAgICBsYWJlbEluQmFja2dyb3VuZDogZmFsc2VcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9jcmVhdGUgbWFwIG1hcmtlciBvYmplY3RcbiAgICAgICAgICAgIHZhciBtYXJrZXIgPSBuZXcgTWFya2VyV2l0aExhYmVsKG1hcmtlck9wdGlvbnMpO1xuICAgICAgICAgICAgbWFya2VyLnNldE1hcCh0aGlzLm1hcCk7XG4gICAgICAgICAgICB0aGlzLm1hcmtlcnMucHVzaChtYXJrZXIpO1xuXG4gICAgICAgICAgICBpZiAoIW5vTG9jYXRpb24gfHwgKG5vTG9jYXRpb24gJiYgc3RvcmVzW3N0b3JlXS5jb3VudHJ5Q29kZSA9PT0gJCgnI2NvdW50cnknKS52YWwoKSkpIHtcbiAgICAgICAgICAgICAgICAvL2FkZCBzdG9yZSdzIGNvb3JkaW5hdGVzIHRvIGFycmF5IGZvciBzZXR0aW5nIHpvb20gYW5kIGNlbnRlcmluZyBtYXAgbGF0ZXJcbiAgICAgICAgICAgICAgICBTdG9yZUxvY2F0b3IuTGF0TG5nTGlzdC5wdXNoKG1hcmtlci5wb3NpdGlvbik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vYnVpbGQgdGhlIHN0b3JlIGluZm8gSFRNTCBmb3IgdG9vbHRpcFxuICAgICAgICAgICAgdmFyIGNvbnRlbnRTdHJpbmcgPSAnPGRpdiBjbGFzcz1cIm1hcENvbnRlbnRcIj4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICc8aDE+JyArIHN0b3Jlc1tzdG9yZV0ubmFtZSArICc8L2gxPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJjb250ZW50Qm9keVwiPjxkaXY+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9yZXNbc3RvcmVdLmFkZHJlc3MxICsgJzwvZGl2PjxkaXY+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9yZXNbc3RvcmVdLmFkZHJlc3MyICsgJzwvZGl2PjxkaXY+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9yZXNbc3RvcmVdLmNpdHkgKyAnLCAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3Jlc1tzdG9yZV0uc3RhdGVDb2RlICsgJyAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3Jlc1tzdG9yZV0ucG9zdGFsQ29kZSArXG4gICAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JztcblxuICAgICAgICAgICAgaWYgKFN0b3JlTG9jYXRvci5pc0RldGFpbHMpIHtcbiAgICAgICAgICAgICAgICBjb250ZW50U3RyaW5nICs9ICc8cD48YSBocmVmPVwiaHR0cHM6Ly9tYXBzLmdvb2dsZS5jb20vbWFwcz9kYWRkcj0nICsgZW5jb2RlZEFkZHJlc3MgKyAnXCI+JyArIFJlc291cmNlcy5TVE9SRV9ESVJFQ1RJT05TICsgJzwvYT48L3A+PC9kaXY+PC9kaXY+JztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29udGVudFN0cmluZyArPSAnPGRpdiBjbGFzcz1cInN0b3JlZGV0YWlsc2xpbmtcIj48YSBocmVmPVwiJyArIHRoaXMuc3RvcmV1cmwgKyBzdG9yZSArICdcIj4nICsgUmVzb3VyY2VzLlNUT1JFX0RFVEFJTFMgKyAnPC9hPjwvZGl2PjwvZGl2PjwvZGl2Pic7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBpbmZvd2luZG93UG9zaXRpb24gPSAtMzU7XG4gICAgICAgICAgICBpZiAoJCgnI3N0b3JlZGV0YWlscy13cmFwcGVyJykuc2l6ZSgpID4gMCkge1xuICAgICAgICAgICAgICAgIGluZm93aW5kb3dQb3NpdGlvbiA9IC01O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy9wb3B1bGF0ZSBzdG9yZSBpbmZvIGludG8gdG9vbHRpcCBvYmplY3RcbiAgICAgICAgICAgIFN0b3JlTG9jYXRvci5pbmZvd2luZG93c1tzdG9yZSArICdJbmZvJ10gPSBuZXcgZ29vZ2xlLm1hcHMuSW5mb1dpbmRvdyh7XG4gICAgICAgICAgICAgICAgY29udGVudDogY29udGVudFN0cmluZyxcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbWFya2VyLnBvc2l0aW9uLFxuICAgICAgICAgICAgICAgIG1heFdpZHRoOiAyNjUsXG4gICAgICAgICAgICAgICAgcGl4ZWxPZmZzZXQ6IG5ldyBnb29nbGUubWFwcy5TaXplKDAsIGluZm93aW5kb3dQb3NpdGlvbiwgJ3B4JywgJ3B4JylcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXJrZXIsICdjbGljaycsIG1hcmtlckNsaWNrKHN0b3JlKSk7XG5cbiAgICAgICAgICAgICQoJyMnICsgc3RvcmUgKyAnIC5zdG9yZW51bWJlciBhJykub24oJ2NsaWNrJywgc3RvcmVDbGljayk7XG5cbiAgICAgICAgICAgIGlmICgkKCcjc3RvcmVkZXRhaWxzLXdyYXBwZXInKS5zaXplKCkgPiAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN0b3JlSWQgPSAkKCcjc3RvcmVJZCcpLnZhbCgpO1xuICAgICAgICAgICAgICAgIFN0b3JlTG9jYXRvci5pbmZvd2luZG93c1tzdG9yZUlkICsgJ0luZm8nXS5vcGVuKHRoaXMubWFwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghbm9Mb2NhdGlvbiAmJiBzdG9yZUNvdW50ID4gMCkge1xuICAgICAgICAgICAgdmFyIGFkZHJlc3NNZXNzYWdlID0gbnVsbDtcbiAgICAgICAgICAgIGlmIChjdXN0b21lckFkZHJlc3Nlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpc05hTihjdXN0b21lckFkZHJlc3NlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkcmVzc01lc3NhZ2UgPSBSZXNvdXJjZXMuU1RPUkVfUkVTVUxUU19QT1NUQUxfQ09ERSAgKyAnICcgKyBjdXN0b21lckFkZHJlc3NlcztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhZGRyZXNzTWVzc2FnZSA9IGN1c3RvbWVyQWRkcmVzc2VzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RvcmVzW09iamVjdC5rZXlzKHN0b3JlcylbMF1dLnBvc3RhbENvZGUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGFkZHJlc3NNZXNzYWdlID0gUmVzb3VyY2VzLlNUT1JFX1JFU1VMVFNfUE9TVEFMX0NPREUgICsgJyAnICsgc3RvcmVzW09iamVjdC5rZXlzKHN0b3JlcylbMF1dLnBvc3RhbENvZGU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGFkZHJlc3NNZXNzYWdlID0gc3RvcmVzW09iamVjdC5rZXlzKHN0b3JlcylbMF1dLm5hbWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBzdG9yZXRleHQgPSAoc3RvcmVDb3VudCA+IDEpID8gUmVzb3VyY2VzLlNUT1JFX1JFU1VMVFNfTVVMVCA6IFJlc291cmNlcy5TVE9SRV9SRVNVTFRTX09ORTtcbiAgICAgICAgICAgIHN0b3JldGV4dCA9IHN0b3JldGV4dC50b1N0cmluZygpLnJlcGxhY2UoJ3tzdG9yZUNvdW50fScsIHN0b3JlQ291bnQsICdnJykucmVwbGFjZSgne21pbGVzQXJvdW5kfScsIG1pbGVzQXJvdW5kLCAnZycpLnJlcGxhY2UoJ3thZGRyZXNzTWVzc2FnZX0nLCBhZGRyZXNzTWVzc2FnZSwgJ2cnKTtcbiAgICAgICAgICAgIC8vdmFyIHN0b3JldGV4dCA9IChzdG9yZUNvdW50ID4gMSkgPyAnVGhlcmUgYXJlICcgKyBzdG9yZUNvdW50ICsgJyBzdG9yZXMgd2l0aGluICcgKyBtaWxlc0Fyb3VuZCArICcgbWlsZXMgb2YgJyArIGFkZHJlc3NNZXNzYWdlIDogJ1RoZXJlIGlzICcgKyBzdG9yZUNvdW50ICsgJyBzdG9yZSB3aXRoaW4gJyArIG1pbGVzQXJvdW5kICsgJyBtaWxlcyBvZiAnICsgYWRkcmVzc01lc3NhZ2U7XG5cbiAgICAgICAgICAgIHZhciB0aXRsZVN0cmluZyA9ICc8ZGl2IGNsYXNzPVwic3RvcmVzLWhlYWRlclwiPicgKyBzdG9yZXRleHQgKyAnPC9kaXY+JztcbiAgICAgICAgICAgICQoJyNzdG9yZXMnKS5yZW1vdmVDbGFzcygnbm9TdG9yZXMnKS5wcmVwZW5kKHRpdGxlU3RyaW5nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpbml0TG9hZCAmJiBzdG9yZUNvdW50IDwgMSkge1xuICAgICAgICAgICAgJCgnI3N0b3JlcycpLnJlbW92ZUNsYXNzKCdub1N0b3JlcycpLmh0bWwoJzxkaXYgY2xhc3M9XCJzdG9yZXMtaGVhZGVyIG5vLXN0b3Jlc1wiPicgKyBSZXNvdXJjZXMuU1RPUkVfTk9fUkVTVUxUU19HRU8gKyAnPC9kaXY+Jyk7XG4gICAgICAgICAgICB0aGlzLm1hcC5zZXRDZW50ZXIobG9jYXRpb24pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgU3RvcmVMb2NhdG9yLnVwZGF0ZUJvdW5kcygpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIHVwZGF0ZUJvdW5kczogZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyAgQ3JlYXRlIGEgbmV3IHZpZXdwb2ludCBib3VuZFxuICAgICAgICB2YXIgYm91bmRzID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZ0JvdW5kcygpO1xuICAgICAgICAvLyAgR28gdGhyb3VnaCBlYWNoLi4uXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBMdExnTGVuID0gU3RvcmVMb2NhdG9yLkxhdExuZ0xpc3QubGVuZ3RoOyBpIDwgTHRMZ0xlbjsgaSsrKSB7XG4gICAgICAgICAgICAvLyAgQW5kIGluY3JlYXNlIHRoZSBib3VuZHMgdG8gdGFrZSB0aGlzIHBvaW50XG4gICAgICAgICAgICBib3VuZHMuZXh0ZW5kKFN0b3JlTG9jYXRvci5MYXRMbmdMaXN0W2ldKTtcbiAgICAgICAgfVxuICAgICAgICAvLyAgRml0IHRoZXNlIGJvdW5kcyB0byB0aGUgbWFwXG4gICAgICAgIHRoaXMubWFwLmZpdEJvdW5kcyhib3VuZHMpO1xuICAgICAgICAvLyBTZXQgem9vbVxuICAgICAgICBpZiAodGhpcy5tYXAuZ2V0Wm9vbSgpID49IDE3KSB7IHRoaXMubWFwLnNldFpvb20oMTYpOyB9XG4gICAgfSxcblxuICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAqIGZ1bmN0aW9uIHRvIGNvbGxlY3Qgc2VhcmNoIGRhdGEgYW5kIHJldHJpZXZlIGEgcG9zaXRpb25cbiAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gICAgZ2V0U2VhcmNoUG9zaXRpb246IGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgIHZhciBhZGRyZXNzID0gJCgnI2FkZHJlc3MnKS52YWwoKSxcbiAgICAgICAgICAgIHJhZGl1cyAgPSAkKCcjZGlzdGFuY2UnKS52YWwoKTtcblxuICAgICAgICBpZiAoJC50cmltKGFkZHJlc3MpICE9PSAnJykge1xuICAgICAgICAgICAgdGhpcy5nZW9Db2RlKGFkZHJlc3MsIGZ1bmN0aW9uIChyZXN1bHRzLCBzdGF0dXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdHVzID09PSBnb29nbGUubWFwcy5HZW9jb2RlclN0YXR1cy5PSykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbG9jYXRpb24gPSByZXN1bHRzWzBdLmdlb21ldHJ5LmxvY2F0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGF0ICAgICAgICA9IGxvY2F0aW9uLmxhdCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbG5nICAgICAgICA9IGxvY2F0aW9uLmxuZygpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gJ29uZXN0b3JlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0b3JlSWQgPSAkKCcjc3RvcmVJZCcpLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgU3RvcmVMb2NhdG9yLnJlbmRlck9uZVN0b3JlKHN0b3JlSWQsIGxhdCwgbG5nLCAkKCcjY291bnRyeScpLnZhbCgpLCAkKCcjZGlzdGFuY2V1bml0cHJlZicpLnZhbCgpLCByYWRpdXMpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgU3RvcmVMb2NhdG9yLnJlbmRlclN0b3JlcyhsYXQsIGxuZywgJCgnI2NvdW50cnknKS52YWwoKSwgJCgnI2Rpc3RhbmNldW5pdHByZWYnKS52YWwoKSwgcmFkaXVzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdHVzID09PSBnb29nbGUubWFwcy5HZW9jb2RlclN0YXR1cy5aRVJPX1JFU1VMVFMpIHtcbiAgICAgICAgICAgICAgICAgICAgU3RvcmVMb2NhdG9yLmhhbmRsZU5vR2VvbG9jYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnI3N0b3JlLXJlc3VsdHMnKS5hZGRDbGFzcygnbm9TdG9yZXMnKS5odG1sKCc8ZGl2IGNsYXNzPVwic3RvcmVzLWhlYWRlciBuby1zdG9yZXNcIj4nICsgUmVzb3VyY2VzLlNUT1JFX05PX1JFU1VMVFMgKyAnPC9kaXY+Jyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygd2luZG93LmNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jb25zb2xlLmVycm9yKCdHZW9jb2RlIHdhcyBub3Qgc3VjY2Vzc2Z1bCBmb3IgdGhlIGZvbGxvd2luZyByZWFzb246ICcgKyBzdGF0dXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAqIGZ1bmN0aW9uIHRvIHBlcmZvcm0gYSBnb29nbGUgZ2VvY29kZSAoYWRkcmVzcyAtPiBMYXRMbmcpXG4gICAgKiBAcGFyYW0gLSBhZGRyZXNzIDogYW4gYWRkcmVzcyBzdHJpbmcgdG8gZ2VvY29kZVxuICAgICogQHBhcmFtIC0gY2FsbGJhY2sgOiBhIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIGhhbmRsZSB0aGUgcmVzdWx0XG4gICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAgIGdlb0NvZGU6IGZ1bmN0aW9uIChhZGRyZXNzLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgZ2VvY29kZXIgPSBuZXcgZ29vZ2xlLm1hcHMuR2VvY29kZXIoKTtcbiAgICAgICAgZ2VvY29kZXIuZ2VvY29kZSh7J2FkZHJlc3MnOiBhZGRyZXNzfSwgZnVuY3Rpb24gKHJlc3VsdHMsIHN0YXR1cykgeyBjYWxsYmFjayhyZXN1bHRzLCBzdGF0dXMpO30pO1xuICAgIH0sXG5cbiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgKiBmdW5jdGlvbiB0byBwZXJmb3JtIGEgbmVhcmVzdCBzdG9yZXMgcXVlcnlcbiAgICAqIEBwYXJhbSAtIHppcCA6IGEgcG9zdGFsIGNvZGVcbiAgICAqIEBwYXJhbSAtIGNvdW50cnkgOiBhIGNvdW50cnkgY29kZVxuICAgICogQHBhcmFtIC0gdW5pdCA6IGEgZGlzdGFuY2UgdW5pdCAobWkva20pXG4gICAgKiBAcGFyYW0gLSByYWRpdXMgOiB0aGUgcmFkaXVzIHRvIGRpc3BsYXkgc3RvcmVzIGZyb21cbiAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gICAgcmVuZGVyU3RvcmVzOiBmdW5jdGlvbiAobGF0aXR1ZGUsIGxvbmdpdHVkZSwgY291bnRyeSwgdW5pdCwgcmFkaXVzLCBub0xvYywgaW5pdExvYWQpIHtcbiAgICAgICAgdmFyIHhociA9ICQuZ2V0SlNPTihcbiAgICAgICAgICAgIHRoaXMucXVlcnl1cmwsXG4gICAgICAgICAgICB7J2xhdGl0dWRlJzogbGF0aXR1ZGUsICdsb25naXR1ZGUnOiBsb25naXR1ZGUsICdjb3VudHJ5Q29kZSc6IGNvdW50cnksICdkaXN0YW5jZVVuaXQnOiB1bml0LCAnbWF4ZGlzdGFuY2UnOiByYWRpdXN9LFxuICAgICAgICAgICAgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IDAsXG4gICAgICAgICAgICAgICAgICAgIGtleTtcbiAgICAgICAgICAgICAgICBmb3IgKGtleSBpbiBkYXRhLnN0b3Jlcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5zdG9yZXMuaGFzT3duUHJvcGVydHkoa2V5KSkgeyBzaXplKys7IH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoc2l6ZSA+IDAgfHwgaW5pdExvYWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxvY2F0aW9uID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhsYXRpdHVkZSwgbG9uZ2l0dWRlKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1pbGVzQXJvdW5kID0gJCgnI2Rpc3RhbmNlJykudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXN0b21lckFkZHJlc3NlcyA9ICQoJyNhZGRyZXNzJykudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIFN0b3JlTG9jYXRvci5wb3B1bGF0ZVN0b3JlcyhkYXRhLnN0b3Jlcywgbm9Mb2MsIGxvY2F0aW9uLCBpbml0TG9hZCwgbWlsZXNBcm91bmQsIGN1c3RvbWVyQWRkcmVzc2VzKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBTdG9yZUxvY2F0b3IuaGFuZGxlTm9HZW9sb2NhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAkKCcjc3RvcmVzJykuYWRkQ2xhc3MoJ25vU3RvcmVzJykuaHRtbCgnPGRpdiBjbGFzcz1cInN0b3Jlcy1oZWFkZXIgbm8tc3RvcmVzXCI+JyArIFJlc291cmNlcy5TVE9SRV9OT19SRVNVTFRTICsgJzwvZGl2PicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4geGhyO1xuICAgIH0sXG5cbiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgKiBmdW5jdGlvbiB0byBwZXJmb3JtIGEgbmVhcmVzdCBzdG9yZXMgcXVlcnlcbiAgICAqIEBwYXJhbSAtIHppcCA6IGEgcG9zdGFsIGNvZGVcbiAgICAqIEBwYXJhbSAtIGNvdW50cnkgOiBhIGNvdW50cnkgY29kZVxuICAgICogQHBhcmFtIC0gdW5pdCA6IGEgZGlzdGFuY2UgdW5pdCAobWkva20pXG4gICAgKiBAcGFyYW0gLSByYWRpdXMgOiB0aGUgcmFkaXVzIHRvIGRpc3BsYXkgc3RvcmVzIGZyb21cbiAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gICAgcmVuZGVyT25lU3RvcmU6IGZ1bmN0aW9uIChzdG9yZUlkLCBsYXRpdHVkZSwgbG9uZ2l0dWRlLCBjb3VudHJ5LCB1bml0LCByYWRpdXMsIG5vTG9jLCBpbml0TG9hZCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICB4aHIgPSAkLmdldEpTT04oXG4gICAgICAgICAgICB0aGlzLnF1ZXJ5dXJsLFxuICAgICAgICAgICAgeydsYXRpdHVkZSc6IGxhdGl0dWRlLCAnbG9uZ2l0dWRlJzogbG9uZ2l0dWRlLCAnY291bnRyeUNvZGUnOiBjb3VudHJ5LCAnZGlzdGFuY2VVbml0JzogdW5pdCwgJ21heGRpc3RhbmNlJzogcmFkaXVzfSxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNpemUgPSAwLFxuICAgICAgICAgICAgICAgICAgICBrZXk7XG4gICAgICAgICAgICAgICAgZm9yIChrZXkgaW4gZGF0YS5zdG9yZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuc3RvcmVzLmhhc093blByb3BlcnR5KGtleSkpIHsgc2l6ZSsrOyB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzaXplID4gMCB8fCBpbml0TG9hZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3RvcmUgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgc3RvcmVbc3RvcmVJZF0gPSBkYXRhLnN0b3Jlc1tzdG9yZUlkXTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgbG9jYXRpb24gPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKGxhdGl0dWRlLCBsb25naXR1ZGUpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWlsZXNBcm91bmQgPSAkKCcjZGlzdGFuY2UnKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1c3RvbWVyQWRkcmVzc2VzID0gJCgnI2FkZHJlc3MnKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgU3RvcmVMb2NhdG9yLnBvcHVsYXRlU3RvcmVzKHN0b3JlLCBub0xvYywgbG9jYXRpb24sIGluaXRMb2FkLCBtaWxlc0Fyb3VuZCwgY3VzdG9tZXJBZGRyZXNzZXMpO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLm1hcC5zZXRab29tKDE2KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBTdG9yZUxvY2F0b3IuaGFuZGxlTm9HZW9sb2NhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAkKCcjc3RvcmVzJykuaHRtbCgnJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiB4aHI7XG4gICAgfSxcblxuICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAqIGZ1bmN0aW9uIHRvIHBlcmZvcm0gYSByZXZlcnNlIGdlb2NvZGUgKExhdExuZyAtPiBhZGRyZXNzKVxuICAgICogQHBhcmFtIC0gcG9zaXRpb24gOiB0aGUgZ29vZ2xlIExhdExuZyBwb3NpdGlvblxuICAgICogQHBhcmFtIC0gY2FsbGJhY2sgOiBhIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIGhhbmRsZSB0aGUgcmVzdWx0c1xuICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgICByZXZlcnNlR2VvY29kZTogZnVuY3Rpb24gKHBvc2l0aW9uLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgZ2VvY29kZXIgPSBuZXcgZ29vZ2xlLm1hcHMuR2VvY29kZXIoKTtcbiAgICAgICAgdmFyIGxvY2F0aW9uID0gZ2VvY29kZXIuZ2VvY29kZSh7J2xhdExuZyc6IHBvc2l0aW9ufSwgZnVuY3Rpb24gKHJlc3VsdHMsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gZ29vZ2xlLm1hcHMuR2VvY29kZXJTdGF0dXMuT0spIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhyZXN1bHRzKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHdpbmRvdy5jb25zb2xlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIC8vIGRlYnVnIGdvb2dsZSByZXF1ZXN0c1xuICAgICAgICAgICAgICAgIHdpbmRvdy5jb25zb2xlLmVycm9yKCdHZW9jb2RlciBmYWlsZWQgZHVlIHRvOiAnICsgc3RhdHVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGxvY2F0aW9uO1xuICAgIH0sXG5cbiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgKiBmdW5jdGlvbiBoYW5kbGVzIGNhc2Ugd2hlcmUgZ2VvZGF0YSBjYW4ndCBiZSBmb3VuZFxuICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgICBoYW5kbGVOb0dlb2xvY2F0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLm1hcmtlcnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSBpbiB0aGlzLm1hcmtlcnMpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMubWFya2Vyc1tpXSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXJrZXJzW2ldLnNldE1hcChudWxsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm1hcmtlcnMubGVuZ3RoID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIFN0b3JlTG9jYXRvci5nZW9Db2RlKFN0b3JlTG9jYXRvci5kZWZhdWx0bG9jYXRpb24sIGZ1bmN0aW9uIChyZXN1bHRzLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgPT09IGdvb2dsZS5tYXBzLkdlb2NvZGVyU3RhdHVzLk9LICYmIHJlc3VsdHNbMF0uZ2VvbWV0cnkubG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgICBTdG9yZUxvY2F0b3IuaW5pdGlhbExvY2F0aW9uID0gcmVzdWx0c1swXS5nZW9tZXRyeS5sb2NhdGlvbjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgU3RvcmVMb2NhdG9yLmluaXRpYWxMb2NhdGlvbiA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoMzcuMDkwMjQsIC05NS43MTI4OTEwMDAwMDAwMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBTdG9yZUxvY2F0b3IucmVuZGVyU3RvcmVzKFN0b3JlTG9jYXRvci5pbml0aWFsTG9jYXRpb24ubGF0KCksIFN0b3JlTG9jYXRvci5pbml0aWFsTG9jYXRpb24ubG5nKCksICQoJyNjb3VudHJ5JykudmFsKCksICQoJyNkaXN0YW5jZXVuaXRwcmVmJykudmFsKCksIDE1MDAwLCB0cnVlKTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAqIGZ1bmN0aW9uIHRvIHBhcnNlIGNvb2tpZSB2YWx1ZSBhbmQgaW5zdGFudGlhdGUgTGF0TG5nIG9iamVjdFxuICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgICBnZXRDb29raWVMYXRMbmc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnJlYWRDb29raWUodGhpcy5jb29raWVuYW1lKSkgeyByZXR1cm4gbnVsbDsgfVxuICAgICAgICB2YXIgcG9zaXRpb24gPSB0aGlzLnJlYWRDb29raWUodGhpcy5jb29raWVuYW1lKS5zcGxpdCgnLCcpO1xuICAgICAgICB2YXIgbGF0bG5ncHJlZiA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcocG9zaXRpb25bMF0sIHBvc2l0aW9uWzFdKTtcbiAgICAgICAgcmV0dXJuIGxhdGxuZ3ByZWY7XG4gICAgfSxcblxuICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAqIGZ1bmN0aW9uIHJlYWQgY29va2llIHZhbHVlXG4gICAgKiBAcGFyYW0gLSBuYW1lIDogbmFtZSBvZiB0aGUgY29va2llIHRvIHJldHJpZXZlIHZhbHVlIGZvclxuICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgICByZWFkQ29va2llOiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICB2YXIgbmFtZUVRID0gbmFtZSArICc9JztcbiAgICAgICAgdmFyIGNhID0gZG9jdW1lbnQuY29va2llLnNwbGl0KCc7Jyk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2EubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBjID0gY2FbaV07XG4gICAgICAgICAgICB3aGlsZSAoYy5jaGFyQXQoMCkgPT09ICcgJykgeyBjID0gYy5zdWJzdHJpbmcoMSwgYy5sZW5ndGgpOyB9XG4gICAgICAgICAgICBpZiAoYy5pbmRleE9mKG5hbWVFUSkgPT09IDApIHsgcmV0dXJuIGMuc3Vic3RyaW5nKG5hbWVFUS5sZW5ndGggKyAxLCBjLmxlbmd0aCAtIDEpOyB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEV4ZWN1dGUgY2FsbGJhY2sgZnVuY3Rpb24gd2hlbiB0aGUgdXNlciBoYXMgc3RvcHBlZCByZXNpemluZyB0aGUgc2NyZWVuLlxuICAgICAqIEBwYXJhbSBjYWxsYmFjayB7RnVuY3Rpb259IFRoZSBjYWxsYmFjayBmdW5jdGlvbiB0byBleGVjdXRlLlxuICAgICAqL1xuXG4gICAgc21hcnRSZXNpemU6IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICB2YXIgdGltZW91dDtcblxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoY2FsbGJhY2ssIDEwMCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBjYWxsYmFjaztcbiAgICB9XG5cbn07IC8vIGVuZCBzdG9yZWxvY2F0b3JcblxubW9kdWxlLmV4cG9ydHMgPSBTdG9yZUxvY2F0b3I7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBpbnZlbnRvcnkgPSByZXF1aXJlKCcuLycpO1xuXG52YXIgY2FydEludmVudG9yeSA9IHtcbiAgICBzZXRTZWxlY3RlZFN0b3JlOiBmdW5jdGlvbiAoc3RvcmVJZCkge1xuICAgICAgICB2YXIgJHNlbGVjdGVkU3RvcmUgPSAkKCcuc3RvcmUtdGlsZS4nICsgc3RvcmVJZCksXG4gICAgICAgICAgICAkbGluZUl0ZW0gPSAkKCcuY2FydC1yb3dbZGF0YS11dWlkPVwiJyArIHRoaXMudXVpZCArICdcIl0nKSxcbiAgICAgICAgICAgIHN0b3JlQWRkcmVzcyA9ICRzZWxlY3RlZFN0b3JlLmZpbmQoJy5zdG9yZS1hZGRyZXNzJykuaHRtbCgpLFxuICAgICAgICAgICAgc3RvcmVTdGF0dXMgPSAkc2VsZWN0ZWRTdG9yZS5maW5kKCcuc3RvcmUtc3RhdHVzJykuZGF0YSgnc3RhdHVzJyksXG4gICAgICAgICAgICBzdG9yZVN0YXR1c1RleHQgPSAkc2VsZWN0ZWRTdG9yZS5maW5kKCcuc3RvcmUtc3RhdHVzJykudGV4dCgpO1xuICAgICAgICB0aGlzLnNlbGVjdGVkU3RvcmUgPSBzdG9yZUlkO1xuXG4gICAgICAgICRsaW5lSXRlbS5maW5kKCcuaW5zdG9yZS1kZWxpdmVyeSAuc2VsZWN0ZWQtc3RvcmUtYWRkcmVzcycpXG4gICAgICAgICAgICAuZGF0YSgnc3RvcmVJZCcsIHN0b3JlSWQpXG4gICAgICAgICAgICAuYXR0cignZGF0YS1zdG9yZS1pZCcsIHN0b3JlSWQpXG4gICAgICAgICAgICAuaHRtbChzdG9yZUFkZHJlc3MpO1xuICAgICAgICAkbGluZUl0ZW0uZmluZCgnLmluc3RvcmUtZGVsaXZlcnkgLnNlbGVjdGVkLXN0b3JlLWF2YWlsYWJpbGl0eScpXG4gICAgICAgICAgICAuZGF0YSgnc3RhdHVzJywgc3RvcmVTdGF0dXMpXG4gICAgICAgICAgICAuYXR0cignZGF0YS1zdGF0dXMnLCBzdG9yZVN0YXR1cylcbiAgICAgICAgICAgIC50ZXh0KHN0b3JlU3RhdHVzVGV4dCk7XG4gICAgICAgICRsaW5lSXRlbS5maW5kKCcuaW5zdG9yZS1kZWxpdmVyeSAuZGVsaXZlcnktb3B0aW9uJykucmVtb3ZlQXR0cignZGlzYWJsZWQnKS50cmlnZ2VyKCdjbGljaycpO1xuICAgIH0sXG4gICAgY2FydFNlbGVjdFN0b3JlOiBmdW5jdGlvbiAoc2VsZWN0ZWRTdG9yZSkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIGludmVudG9yeS5nZXRTdG9yZXNJbnZlbnRvcnkodGhpcy51dWlkKS50aGVuKGZ1bmN0aW9uIChzdG9yZXMpIHtcbiAgICAgICAgICAgIGludmVudG9yeS5zZWxlY3RTdG9yZURpYWxvZyh7XG4gICAgICAgICAgICAgICAgc3RvcmVzOiBzdG9yZXMsXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRTdG9yZUlkOiBzZWxlY3RlZFN0b3JlLFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkU3RvcmVUZXh0OiBSZXNvdXJjZXMuU0VMRUNURURfU1RPUkUsXG4gICAgICAgICAgICAgICAgY29udGludWVDYWxsYmFjazogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc2VsZWN0U3RvcmVDYWxsYmFjazogc2VsZi5zZXRTZWxlY3RlZFN0b3JlLmJpbmQoc2VsZilcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KS5kb25lKCk7XG4gICAgfSxcbiAgICBzZXREZWxpdmVyeU9wdGlvbjogZnVuY3Rpb24gKHZhbHVlLCBzdG9yZUlkKSB7XG4gICAgICAgIC8vIHNldCBsb2FkaW5nIHN0YXRlXG4gICAgICAgICQoJy5pdGVtLWRlbGl2ZXJ5LW9wdGlvbnMnKVxuICAgICAgICAgICAgLmFkZENsYXNzKCdsb2FkaW5nJylcbiAgICAgICAgICAgIC5jaGlsZHJlbigpLmhpZGUoKTtcblxuICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgIHBsaWQ6IHRoaXMudXVpZCxcbiAgICAgICAgICAgIHN0b3JlcGlja3VwOiAodmFsdWUgPT09ICdzdG9yZScgPyB0cnVlIDogZmFsc2UpXG4gICAgICAgIH07XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gJ3N0b3JlJykge1xuICAgICAgICAgICAgZGF0YS5zdG9yZXBpY2t1cCA9IHRydWU7XG4gICAgICAgICAgICBkYXRhLnN0b3JlaWQgPSBzdG9yZUlkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGF0YS5zdG9yZXBpY2t1cCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IFVybHMuc2V0U3RvcmVQaWNrdXAsXG4gICAgICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBsb2FkaW5nIHN0YXRlXG4gICAgICAgICAgICAgICAgJCgnLml0ZW0tZGVsaXZlcnktb3B0aW9ucycpXG4gICAgICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcygnbG9hZGluZycpXG4gICAgICAgICAgICAgICAgICAgIC5jaGlsZHJlbigpLnNob3coKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgJCgnLml0ZW0tZGVsaXZlcnktb3B0aW9ucyAuc2V0LXByZWZlcnJlZC1zdG9yZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBzZWxmLnV1aWQgPSAkKHRoaXMpLmRhdGEoJ3V1aWQnKTtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZFN0b3JlID0gJCh0aGlzKS5jbG9zZXN0KCcuaW5zdG9yZS1kZWxpdmVyeScpLmZpbmQoJy5zZWxlY3RlZC1zdG9yZS1hZGRyZXNzJykuZGF0YSgnc3RvcmVJZCcpO1xuICAgICAgICAgICAgaWYgKCFVc2VyLnppcCkge1xuICAgICAgICAgICAgICAgIGludmVudG9yeS56aXBQcm9tcHQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmNhcnRTZWxlY3RTdG9yZShzZWxlY3RlZFN0b3JlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2VsZi5jYXJ0U2VsZWN0U3RvcmUoc2VsZWN0ZWRTdG9yZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAkKCcuaXRlbS1kZWxpdmVyeS1vcHRpb25zIC5kZWxpdmVyeS1vcHRpb24nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyByZXNldCB0aGUgdXVpZFxuICAgICAgICAgICAgdmFyIHNlbGVjdGVkU3RvcmUgPSAkKHRoaXMpLmNsb3Nlc3QoJy5pbnN0b3JlLWRlbGl2ZXJ5JykuZmluZCgnLnNlbGVjdGVkLXN0b3JlLWFkZHJlc3MnKS5kYXRhKCdzdG9yZUlkJyk7XG4gICAgICAgICAgICBzZWxmLnV1aWQgPSAkKHRoaXMpLmNsb3Nlc3QoJy5jYXJ0LXJvdycpLmRhdGEoJ3V1aWQnKTtcbiAgICAgICAgICAgIHNlbGYuc2V0RGVsaXZlcnlPcHRpb24oJCh0aGlzKS52YWwoKSwgc2VsZWN0ZWRTdG9yZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gY2FydEludmVudG9yeTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gnKSxcbiAgICBkaWFsb2cgPSByZXF1aXJlKCcuLi9kaWFsb2cnKSxcbiAgICBUUHJvbWlzZSA9IHJlcXVpcmUoJ3Byb21pc2UnKSxcbiAgICB1dGlsID0gcmVxdWlyZSgnLi4vdXRpbCcpO1xuXG52YXIgbmV3TGluZSA9ICdcXG4nO1xudmFyIHN0b3JlVGVtcGxhdGUgPSBmdW5jdGlvbiAoc3RvcmUsIHNlbGVjdGVkU3RvcmVJZCwgc2VsZWN0ZWRTdG9yZVRleHQpIHtcbiAgICByZXR1cm4gW1xuICAgICAgICAnPGxpIGNsYXNzPVwic3RvcmUtdGlsZSAnICsgc3RvcmUuc3RvcmVJZCArIChzdG9yZS5zdG9yZUlkID09PSBzZWxlY3RlZFN0b3JlSWQgPyAnIHNlbGVjdGVkJyA6ICcnKSArICdcIj4nLFxuICAgICAgICAnXHQ8cCBjbGFzcz1cInN0b3JlLWFkZHJlc3NcIj4nLFxuICAgICAgICAnXHRcdCcgKyBzdG9yZS5hZGRyZXNzMSArICc8YnIvPicsXG4gICAgICAgICdcdFx0JyArIHN0b3JlLmNpdHkgKyAnLCAnICsgc3RvcmUuc3RhdGVDb2RlICsgJyAnICsgc3RvcmUucG9zdGFsQ29kZSxcbiAgICAgICAgJ1x0PC9wPicsXG4gICAgICAgICdcdDxwIGNsYXNzPVwic3RvcmUtc3RhdHVzXCIgZGF0YS1zdGF0dXM9XCInICsgc3RvcmUuc3RhdHVzY2xhc3MgKyAnXCI+JyArIHN0b3JlLnN0YXR1cyArICc8L3A+JyxcbiAgICAgICAgJ1x0PGJ1dHRvbiBjbGFzcz1cInNlbGVjdC1zdG9yZS1idXR0b25cIiBkYXRhLXN0b3JlLWlkPVwiJyArIHN0b3JlLnN0b3JlSWQgKyAnXCInICtcbiAgICAgICAgKHN0b3JlLnN0YXR1c2NsYXNzICE9PSAnc3RvcmUtaW4tc3RvY2snID8gJ2Rpc2FibGVkPVwiZGlzYWJsZWRcIicgOiAnJykgKyAnPicsXG4gICAgICAgICdcdFx0JyArIChzdG9yZS5zdG9yZUlkID09PSBzZWxlY3RlZFN0b3JlSWQgPyBzZWxlY3RlZFN0b3JlVGV4dCA6IFJlc291cmNlcy5TRUxFQ1RfU1RPUkUpLFxuICAgICAgICAnXHQ8L2J1dHRvbj4nLFxuICAgICAgICAnPC9saT4nXG4gICAgXS5qb2luKG5ld0xpbmUpO1xufTtcblxudmFyIHN0b3JlTGlzdFRlbXBsYXRlID0gZnVuY3Rpb24gKHN0b3Jlcywgc2VsZWN0ZWRTdG9yZUlkLCBzZWxlY3RlZFN0b3JlVGV4dCkge1xuICAgIGlmIChzdG9yZXMgJiYgc3RvcmVzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJzdG9yZS1saXN0LWNvbnRhaW5lclwiPicsXG4gICAgICAgICAgICAnPHVsIGNsYXNzPVwic3RvcmUtbGlzdFwiPicsXG4gICAgICAgICAgICBfLm1hcChzdG9yZXMsIGZ1bmN0aW9uIChzdG9yZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzdG9yZVRlbXBsYXRlKHN0b3JlLCBzZWxlY3RlZFN0b3JlSWQsIHNlbGVjdGVkU3RvcmVUZXh0KTtcbiAgICAgICAgICAgIH0pLmpvaW4obmV3TGluZSksXG4gICAgICAgICAgICAnPC91bD4nLFxuICAgICAgICAgICAgJzwvZGl2PicsXG4gICAgICAgICAgICAnPGRpdiBjbGFzcz1cInN0b3JlLWxpc3QtcGFnaW5hdGlvblwiPicsXG4gICAgICAgICAgICAnPC9kaXY+J1xuICAgICAgICBdLmpvaW4obmV3TGluZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuICc8ZGl2IGNsYXNzPVwibm8tcmVzdWx0c1wiPicgKyBSZXNvdXJjZXMuSU5WQUxJRF9aSVAgKyAnPC9kaXY+JztcbiAgICB9XG59O1xuXG52YXIgemlwUHJvbXB0VGVtcGxhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgICAgJzxkaXYgaWQ9XCJwcmVmZXJyZWQtc3RvcmUtcGFuZWxcIj4nLFxuICAgICAgICAnXHQ8aW5wdXQgdHlwZT1cInRleHRcIiBpZD1cInVzZXItemlwXCIgcGxhY2Vob2xkZXI9XCInICsgUmVzb3VyY2VzLkVOVEVSX1pJUCArICdcIiBuYW1lPVwiemlwQ29kZVwiLz4nLFxuICAgICAgICAnPC9kaXY+J1xuICAgIF0uam9pbihuZXdMaW5lKTtcbn07XG5cbi8qKlxuICogQGRlc2NyaXB0aW9uIHRlc3Qgd2hldGhlciB6aXBjb2RlIGlzIHZhbGlkIGZvciBlaXRoZXIgVVMgb3IgQ2FuYWRhXG4gKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlIGlmIHRoZSB6aXBjb2RlIGlzIHZhbGlkIGZvciBlaXRoZXIgY291bnRyeSwgZmFsc2UgaWYgaXQncyBpbnZhbGlkIGZvciBib3RoXG4gKiovXG52YXIgdmFsaWRhdGVaaXBDb2RlID0gZnVuY3Rpb24gKHppcENvZGUpIHtcbiAgICB2YXIgcmVnZXhlcyA9IHtcbiAgICAgICAgICAgIGNhbmFkYTogL15bQUJDRUdISktMTU5QUlNUVlhZXVxcZFtBQkNFR0hKS0xNTlBSU1RWV1hZWl0oICk/XFxkW0FCQ0VHSEpLTE1OUFJTVFZXWFlaXVxcZCQvaSxcbiAgICAgICAgICAgIHVzYTogL15cXGR7NX0oLVxcZHs0fSk/JC9cbiAgICAgICAgfSxcbiAgICAgICAgdmFsaWQgPSBmYWxzZTtcbiAgICBpZiAoIXppcENvZGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBfLmVhY2gocmVnZXhlcywgZnVuY3Rpb24gKHJlKSB7XG4gICAgICAgIHZhciByZWdleHAgPSBuZXcgUmVnRXhwKHJlKTtcbiAgICAgICAgdmFsaWQgPSByZWdleHAudGVzdCh6aXBDb2RlKTtcbiAgICB9KTtcbiAgICByZXR1cm4gdmFsaWQ7XG59O1xuXG52YXIgc3RvcmVpbnZlbnRvcnkgPSB7XG4gICAgemlwUHJvbXB0OiBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICBkaWFsb2cub3Blbih7XG4gICAgICAgICAgICBodG1sOiB6aXBQcm9tcHRUZW1wbGF0ZSgpLFxuICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgIHRpdGxlOiBSZXNvdXJjZXMuU1RPUkVfTkVBUl9ZT1UsXG4gICAgICAgICAgICAgICAgd2lkdGg6IDUwMCxcbiAgICAgICAgICAgICAgICBidXR0b25zOiBbe1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBSZXNvdXJjZXMuU0VBUkNILFxuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHppcENvZGUgPSAkKCcjdXNlci16aXAnKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWxpZGF0ZVppcENvZGUoemlwQ29kZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNldFVzZXJaaXAoemlwQ29kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHppcENvZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgICAgIG9wZW46IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnI3VzZXItemlwJykub24oJ2tleXByZXNzJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLndoaWNoID09PSAxMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyaWdnZXIgdGhlIHNlYXJjaCBidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcudWktZGlhbG9nLWJ1dHRvbnNldCAudWktYnV0dG9uJykudHJpZ2dlcignY2xpY2snKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9LFxuICAgIGdldFN0b3Jlc0ludmVudG9yeTogZnVuY3Rpb24gKHBpZCkge1xuICAgICAgICByZXR1cm4gVFByb21pc2UucmVzb2x2ZSgkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOiB1dGlsLmFwcGVuZFBhcmFtc1RvVXJsKFVybHMuc3RvcmVzSW52ZW50b3J5LCB7XG4gICAgICAgICAgICAgICAgcGlkOiBwaWQsXG4gICAgICAgICAgICAgICAgemlwQ29kZTogVXNlci56aXBcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJ1xuICAgICAgICB9KSk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAZGVzY3JpcHRpb24gb3BlbiB0aGUgZGlhbG9nIHRvIHNlbGVjdCBzdG9yZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IG9wdGlvbnMuc3RvcmVzXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG9wdGlvbnMuc2VsZWN0ZWRTdG9yZUlkXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG9wdGlvbnMuc2VsZWN0ZWRTdG9yZVRleHRcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcHRpb25zLmNvbnRpbnVlQ2FsbGJhY2tcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcHRpb25zLnNlbGVjdFN0b3JlQ2FsbGJhY2tcbiAgICAgKiovXG4gICAgc2VsZWN0U3RvcmVEaWFsb2c6IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcyxcbiAgICAgICAgICAgIHN0b3JlcyA9IG9wdGlvbnMuc3RvcmVzLFxuICAgICAgICAgICAgc2VsZWN0ZWRTdG9yZUlkID0gb3B0aW9ucy5zZWxlY3RlZFN0b3JlSWQsXG4gICAgICAgICAgICBzZWxlY3RlZFN0b3JlVGV4dCA9IG9wdGlvbnMuc2VsZWN0ZWRTdG9yZVRleHQsXG4gICAgICAgICAgICBzdG9yZUxpc3QgPSBzdG9yZUxpc3RUZW1wbGF0ZShzdG9yZXMsIHNlbGVjdGVkU3RvcmVJZCwgc2VsZWN0ZWRTdG9yZVRleHQpO1xuICAgICAgICBkaWFsb2cub3Blbih7XG4gICAgICAgICAgICBodG1sOiBzdG9yZUxpc3QsXG4gICAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgdGl0bGU6IFJlc291cmNlcy5TRUxFQ1RfU1RPUkUgKyAnIC0gJyArIFVzZXIuemlwLFxuICAgICAgICAgICAgICAgIGJ1dHRvbnM6IFt7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IFJlc291cmNlcy5DSEFOR0VfTE9DQVRJT04sXG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNldFVzZXJaaXAobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0cmlnZ2VyIHRoZSBldmVudCB0byBzdGFydCB0aGUgcHJvY2VzcyBhbGwgb3ZlciBhZ2FpblxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnNldC1wcmVmZXJyZWQtc3RvcmUnKS50cmlnZ2VyKCdjbGljaycpO1xuICAgICAgICAgICAgICAgICAgICB9LmJpbmQodGhpcylcbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IFJlc291cmNlcy5DT05USU5VRSxcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmNvbnRpbnVlQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmNvbnRpbnVlQ2FsbGJhY2soc3RvcmVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRpYWxvZy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICAgICAgb3BlbjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkKCcuc2VsZWN0LXN0b3JlLWJ1dHRvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RvcmVJZCA9ICQodGhpcykuZGF0YSgnc3RvcmVJZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlIHN0b3JlIGlzIGFscmVhZHkgc2VsZWN0ZWQsIGRvbid0IHNlbGVjdCBhZ2FpblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0b3JlSWQgPT09IHNlbGVjdGVkU3RvcmVJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5zdG9yZS1saXN0IC5zdG9yZS10aWxlLnNlbGVjdGVkJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmluZCgnLnNlbGVjdC1zdG9yZS1idXR0b24nKS50ZXh0KFJlc291cmNlcy5TRUxFQ1RfU1RPUkUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS50ZXh0KHNlbGVjdGVkU3RvcmVUZXh0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jbG9zZXN0KCcuc3RvcmUtdGlsZScpLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuc2VsZWN0U3RvcmVDYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuc2VsZWN0U3RvcmVDYWxsYmFjayhzdG9yZUlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9LFxuICAgIHNldFVzZXJaaXA6IGZ1bmN0aW9uICh6aXApIHtcbiAgICAgICAgVXNlci56aXAgPSB6aXA7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICB1cmw6IFVybHMuc2V0WmlwQ29kZSxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICB6aXBDb2RlOiB6aXBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBzaGlwcGluZ0xvYWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyICRjaGVja291dEZvcm0gPSAkKCcuYWRkcmVzcycpO1xuICAgICAgICAkY2hlY2tvdXRGb3JtLm9mZignY2xpY2snKTtcbiAgICAgICAgJGNoZWNrb3V0Rm9ybS5vbignY2xpY2snLCAnaW5wdXRbbmFtZSQ9XCJfc2hpcHBpbmdBZGRyZXNzX2lzR2lmdFwiXScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQodGhpcykucGFyZW50KCkuc2libGluZ3MoJy5naWZ0LW1lc3NhZ2UtdGV4dCcpLnRvZ2dsZUNsYXNzKCdoaWRkZW4nLCAkKCdpbnB1dFtuYW1lJD1cIl9zaGlwcGluZ0FkZHJlc3NfaXNHaWZ0XCJdOmNoZWNrZWQnKS52YWwoKSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gc3RvcmVpbnZlbnRvcnk7XG4iLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogRXZlbnRzIGFyZSBkaXZpZGVkIHVwIGJ5IG5hbWUgc3BhY2Ugc28gb25seSB0aGVcbiAqIGV2ZW50cyB0aGF0IGFyZSBuZWVkZWQgYXJlIGluaXRpYWxpemVkLlxuICovXG52YXIgZXZlbnRzID0ge1xuICAgIGFjY291bnQ6IGZ1bmN0aW9uICgpIHt9LFxuICAgIGNhcnQ6IGZ1bmN0aW9uICgpIHt9LFxuICAgIGNoZWNrb3V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJ1tuYW1lJD1fZGVsZXRlUHJvZHVjdF0nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZW1vdmVGcm9tQ2FydCgkLnBhcnNlSlNPTigkKHRoaXMpLmF0dHIoJ2RhdGEtZ3RtZGF0YScpKSwgMSk7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgY29tcGFyZTogZnVuY3Rpb24gKCkge30sXG4gICAgcHJvZHVjdDogZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcjYWRkLXRvLWNhcnQnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBhZGRUb0NhcnQoJC5wYXJzZUpTT04oJCh0aGlzKS5hdHRyKCdkYXRhLWd0bWRhdGEnKSksICQodGhpcykuY2xvc2VzdCgnZGl2JykuZmluZCgnW25hbWU9UXVhbnRpdHldJykudmFsKCkpO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIHNlYXJjaDogZnVuY3Rpb24gKCkge30sXG4gICAgc3RvcmVmcm9udDogZnVuY3Rpb24gKCkge30sXG4gICAgd2lzaGxpc3Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnW25hbWUkPV9hZGRUb0NhcnRdJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgYWRkVG9DYXJ0KCQucGFyc2VKU09OKCQodGhpcykuYXR0cignZGF0YS1ndG1kYXRhJykpLCAkKHRoaXMpLmNsb3Nlc3QoJ2RpdicpLmZpbmQoJ1tuYW1lPVF1YW50aXR5XScpLnZhbCgpKTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICAvLyBldmVudHMgdGhhdCBzaG91bGQgaGFwcGVuIG9uIGV2ZXJ5IHBhZ2VcbiAgICBhbGw6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnLm5hbWUtbGluaycpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHByb2R1Y3RDbGljaygkLnBhcnNlSlNPTigkKHRoaXMpLmF0dHIoJ2RhdGEtZ3RtZGF0YScpKSk7XG4gICAgICAgIH0pO1xuICAgICAgICAkKCcudGh1bWItbGluaycpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHByb2R1Y3RDbGljaygkLnBhcnNlSlNPTigkKHRoaXMpLmF0dHIoJ2RhdGEtZ3RtZGF0YScpKSk7XG4gICAgICAgIH0pO1xuICAgICAgICAkKCcuaGFzLXN1Yi1tZW51Jykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcHVzaEV2ZW50KCd0cmFja0V2ZW50JywgJ1VzZXIgQWN0aW9uJywgJ0hlYWRlciBDbGljaycsICQodGhpcykuaHRtbCgpKTtcbiAgICAgICAgfSk7XG4gICAgICAgICQoJy5wcmltYXJ5LWxvZ28nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBwdXNoRXZlbnQoJ3RyYWNrRXZlbnQnLCAnVXNlciBBY3Rpb24nLCAnSGVhZGVyIENsaWNrJywgJ0hvbWUgTGluaycpO1xuICAgICAgICB9KTtcbiAgICB9XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9kdWN0T2JqZWN0IFRoZSBwcm9kdWN0IGRhdGFcbiAqIEBkZXNjcmlwdGlvbiBnZXRzIHRoZSBkYXRhIGZvciBhIHByb2R1Y3QgY2xpY2tcbiAqL1xuZnVuY3Rpb24gcHJvZHVjdENsaWNrIChwcm9kdWN0T2JqZWN0KSB7XG4gICAgdmFyIG9iaiA9IHtcbiAgICAgICAgJ2V2ZW50JzogJ3Byb2R1Y3RDbGljaycsXG4gICAgICAgICdlY29tbWVyY2UnOiB7XG4gICAgICAgICAgICAnY2xpY2snOiB7XG4gICAgICAgICAgICAgICAgJ2FjdGlvbkZpZWxkJzogeydsaXN0JzogJ1NlYXJjaFJlc3VsdHMnfSxcbiAgICAgICAgICAgICAgICAncHJvZHVjdHMnOiBbXVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBvYmouZWNvbW1lcmNlLmNsaWNrLnByb2R1Y3RzLnB1c2gocHJvZHVjdE9iamVjdCk7XG4gICAgZGF0YUxheWVyLnB1c2gob2JqKTtcbn1cblxuLyoqXG4gKiBAZGVzY3JpcHRpb24gQ2xpY2sgZXZlbnQgZm9yIGFkZCBwcm9kdWN0IHRvIGNhcnRcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9kdWN0T2JqZWN0IFRoZSBwcm9kdWN0IGRhdGFcbiAqIEBwYXJhbSB7U3RyaW5nfSBxdWFudGl0eVxuICovXG5mdW5jdGlvbiBhZGRUb0NhcnQgKHByb2R1Y3RPYmplY3QsIHF1YW50aXR5KSB7XG4gICAgdmFyIHF1YW50aXR5T2JqID0geydxdWFudGl0eSc6IHF1YW50aXR5fSxcbiAgICAgICAgb2JqID0ge1xuICAgICAgICAgICAgJ2V2ZW50JzogJ2FkZFRvQ2FydCcsXG4gICAgICAgICAgICAnZWNvbW1lcmNlJzoge1xuICAgICAgICAgICAgICAgICdhZGQnOiB7XG4gICAgICAgICAgICAgICAgICAgICdwcm9kdWN0cyc6IFtdXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIG9iai5lY29tbWVyY2UuYWRkLnByb2R1Y3RzLnB1c2goJC5leHRlbmQocHJvZHVjdE9iamVjdCxxdWFudGl0eU9iaikpO1xuICAgIGRhdGFMYXllci5wdXNoKG9iaik7XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9kdWN0T2JqZWN0XG4gKiBAcGFyYW0ge1N0cmluZ3xOdW1iZXJ9IHF1YW50aXR5XG4gKi9cbmZ1bmN0aW9uIHJlbW92ZUZyb21DYXJ0IChwcm9kdWN0T2JqZWN0LCBxdWFudGl0eSkge1xuICAgIHZhciBxdWFudGl0eU9iaiA9IHsncXVhbnRpdHknOiBxdWFudGl0eX0sXG4gICAgICAgIG9iaiA9IHtcbiAgICAgICAgICAgICdldmVudCc6ICdyZW1vdmVGcm9tQ2FydCcsXG4gICAgICAgICAgICAnZWNvbW1lcmNlJzoge1xuICAgICAgICAgICAgICAgICdyZW1vdmUnOiB7XG4gICAgICAgICAgICAgICAgICAgICdwcm9kdWN0cyc6IFtdXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIG9iai5lY29tbWVyY2UuYWRkLnByb2R1Y3RzLnB1c2goJC5leHRlbmQocHJvZHVjdE9iamVjdCxxdWFudGl0eU9iaikpO1xuICAgIGRhdGFMYXllci5wdXNoKG9iaik7XG59XG5cbi8qKlxuICogQGRlc2NyaXB0aW9uIENvbnZlbmllbmNlIG1ldGhvZCBmb3IgY3JlYXRpbmcgYSBjbGljayBldmVudC5cbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50Q2F0ZWdvcnlcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudEFjdGlvblxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50TGFiZWxcbiAqL1xuZnVuY3Rpb24gcHVzaEV2ZW50IChldmVudCwgZXZlbnRDYXRlZ29yeSwgZXZlbnRBY3Rpb24sIGV2ZW50TGFiZWwpIHtcbiAgICBkYXRhTGF5ZXIucHVzaCh7XG4gICAgICAgICdldmVudCc6IGV2ZW50LFxuICAgICAgICAnZXZlbnRDYXRlZ29yeSc6IGV2ZW50Q2F0ZWdvcnksXG4gICAgICAgICdldmVudEFjdGlvbic6IGV2ZW50QWN0aW9uLFxuICAgICAgICAnZXZlbnRMYWJlbCc6IGV2ZW50TGFiZWxcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBAZGVzY3JpcHRpb24gSW5pdGlhbGl6ZSB0aGUgdGFnIG1hbmFnZXIgZnVuY3Rpb25hbGl0eVxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVTcGFjZSBUaGUgY3VycmVudCBuYW1lIHNwYWNlXG4gKi9cbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uIChuYW1lU3BhY2UpIHtcbiAgICBpZiAobmFtZVNwYWNlICYmIGV2ZW50c1tuYW1lU3BhY2VdKSB7XG4gICAgICAgIGV2ZW50c1tuYW1lU3BhY2VdKCk7XG4gICAgfVxuICAgIGV2ZW50cy5hbGwoKTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQ2hlY2tzIHRoZSBUTFMgYW5kIGRpc3BsYXlzIGEgd2FybmluZyBpZiBhcHByb3ByaWF0ZVxuICogQGZ1bmN0aW9uIGdldFVzZXJBZ2VudCBDaGVja3MgdGhlIFRMUyBhbmQgZGlzcGxheXMgYSB3YXJuaW5nIGlmIGFwcHJvcHJpYXRlXG4gKiovXG5mdW5jdGlvbiBnZXRVc2VyQWdlbnQoKSB7XG5cbiAgICB2YXIgdWEgPSBuYXZpZ2F0b3IudXNlckFnZW50LCB0ZW0sXG4gICAgICAgIE0gPSB1YS5tYXRjaCgvKG9wZXJhfGNocm9tZXxzYWZhcml8ZmlyZWZveHxtc2llfHRyaWRlbnQoPz1cXC8pKVxcLz9cXHMqKFxcZCspL2kpIHx8IFtdO1xuICAgIGlmICgvdHJpZGVudC9pLnRlc3QoTVsxXSkpIHtcbiAgICAgICAgdGVtID0gKC9cXGJydlsgOl0rKFxcZCspL2cpLmV4ZWModWEpIHx8IFtdO1xuICAgICAgICByZXR1cm4ge25hbWU6ICdJRScsIHZlcnNpb246ICh0ZW1bMV0gfHwgJycpfTtcbiAgICB9XG4gICAgaWYgKE1bMV0gPT09ICdDaHJvbWUnKSB7XG4gICAgICAgIHRlbSA9IHVhLm1hdGNoKC9cXGJPUFJcXC8oXFxkKykvKTtcbiAgICAgICAgaWYgKHRlbSAhPSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4ge25hbWU6ICdPcGVyYScsIHZlcnNpb246IHRlbVsxXX07XG4gICAgICAgIH1cbiAgICB9XG4gICAgTSA9IE1bMl0gPyBbTVsxXSwgTVsyXV0gOiBbbmF2aWdhdG9yLmFwcE5hbWUsIG5hdmlnYXRvci5hcHBWZXJzaW9uLCAnLT8nXTtcbiAgICBpZiAoKHRlbSA9IHVhLm1hdGNoKC92ZXJzaW9uXFwvKFxcZCspL2kpKSAhPSBudWxsKSB7XG4gICAgICAgIE0uc3BsaWNlKDEsIDEsIHRlbVsxXSk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IE1bMF0sXG4gICAgICAgIHZlcnNpb246IE1bMV1cbiAgICB9O1xuXG59XG5cbi8qKlxuICogRXhwb3J0IHRoZSBnZXRVc2VyQWdlbnQgZnVuY3Rpb25cbiAqL1xuXG5leHBvcnRzLmdldFVzZXJBZ2VudCA9IGdldFVzZXJBZ2VudDtcbiIsIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBAZnVuY3Rpb25cbiAqIEBkZXNjcmlwdGlvbiBJbml0aWFsaXplcyB0aGUgdG9vbHRpcC1jb250ZW50IGFuZCBsYXlvdXRcbiAqL1xudmFyIHNldHRpbmdzID0ge1xuICAgIGl0ZW1zOiAnLnRvb2x0aXAsIC5DdXN0b20tdG9vbHRpcCcsXG4gICAgZGVsYXk6IDAsXG4gICAgdHJhY2s6IGZhbHNlLFxuICAgIHNob3dVUkw6IGZhbHNlLFxuICAgIGV4dHJhQ2xhc3M6ICd0b29sdGlwc2hhZG93JyxcbiAgICB0b3A6IDUsXG4gICAgbGVmdDogLTE1MFxufTtcbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAkKGRvY3VtZW50KS50b29sdGlwKFxuICAgICAgICAkLmV4dGVuZCh7fSwgc2V0dGluZ3MsIHtcbiAgICAgICAgICAgIGNvbnRlbnQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJCh0aGlzKS5maW5kKCcudG9vbHRpcC1jb250ZW50ICwgLnRvb2x0aXAtYm9keScpLmh0bWwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgIC8qJCgnLkN1c3RvbS10b29sdGlwJykudG9vbHRpcHN0ZXIoe1xuICAgICAgICAgICAgY29udGVudDogalF1ZXJ5KHRoaXMpLmZpbmQoJy50b29sdGlwY29udGFpbmVyJykuaHRtbCgpLFxuICAgICAgICAgICAgY29udGVudEFzSFRNTDogdHJ1ZSxcbiAgICAgICAgICAgIG1heFdpZHRoOiAzMDAsXG4gICAgICAgICAgICB0b3VjaERldmljZXM6IHRydWUsXG4gICAgICAgICAgICB0cmlnZ2VyOiAnY2xpY2snXG4gICAgfSk7ICovXG4gICAgJCgnLnNoYXJlLWxpbmsnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHZhciB0YXJnZXQgPSAkKHRoaXMpLmRhdGEoJ3RhcmdldCcpO1xuICAgICAgICBpZiAoIXRhcmdldCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgICQodGFyZ2V0KS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XG4gICAgfSk7XG5cbiAgICAvKkpJUkEgUFJFVi0yODIgOiBERVYtMzI6IFNHIGlzc3VlLSAnV2hhdCBpcyB0aGlzJyBsaW5rIGluIGNoZWNrb3V0IGJpbGxpbmcgcGFnZSBzaG91bGQgbm90IGJlIGNsaWNrYWJsZS4gQWRkZWQgdGhlIGZvbGxvaXduZyBibG9jay4qL1xuICAgICQoJ2EudG9vbHRpcCcpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG52YXIgdXRpbCA9IHJlcXVpcmUoJy4vdXRpbCcpO1xuLypmdW5jdGlvbiBjaGFyY291bnQoJHRoaXMpe1xuXHR2YXIgY2hhcmFjdGVyTGltaXQgPSBwYXJzZUludCgkdGhpcy5kYXRhKFwiY2hhcmFjdGVyLWxpbWl0XCIpKTtcblx0dmFyIGNoYXJSZW1haW5zID0gY2hhcmFjdGVyTGltaXQgLSAkdGhpcy52YWwoKS50cmltKCkubGVuZ3RoO1xuXHR2YXIgY2hhckNvdW50SHRtbCA9ICdDaGFyYWN0ZXJzIFJlbWFpbmluZyAnICsgY2hhclJlbWFpbnNcblx0aWYoJHRoaXMuaGFzQ2xhc3MoXCJ2aXAtdGV4dGFyZWFcIikpe1xuXHRcdGlmICgkdGhpcy5uZXh0KCdkaXYuY2hhci1jb3VudCcpLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0Y2hhckNvdW50Q29udGFpbmVyID0gJCgnPGRpdiBjbGFzcz1cImNoYXItY291bnRcIi8+JykuaW5zZXJ0QWZ0ZXIoJHRoaXMpO1xuXHRcdH1cblx0XHQkdGhpcy5uZXh0KCdkaXYuY2hhci1jb3VudCcpLmh0bWwoY2hhckNvdW50SHRtbCk7XG5cdH1lbHNlIHtcblx0XHRpZiAoJHRoaXMucHJldignZGl2LmNoYXItY291bnQnKS5sZW5ndGggPT09IDApIHtcblx0XHRcdGNoYXJDb3VudENvbnRhaW5lciA9ICQoJzxkaXYgY2xhc3M9XCJjaGFyLWNvdW50XCIvPicpLmluc2VydEJlZm9yZSgkdGhpcyk7XG5cdFx0fVxuXHRcdCR0aGlzLnByZXYoJ2Rpdi5jaGFyLWNvdW50JykuaHRtbChjaGFyQ291bnRIdG1sKTtcblx0fVxufSovXG52YXIgdWlldmVudHMgPSB7XG4gICAgY3VzdG9tRmllbGRzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciAkY29uID0gJCgnYm9keScpO1xuICAgICAgICAkY29uLmZpbmQoJy5jdXN0b20tY2hlY2tib3gnKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChqUXVlcnkodGhpcykuZmluZCgnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJykuaXMoJzpjaGVja2VkJykpIHtcbiAgICAgICAgICAgICAgICBqUXVlcnkodGhpcykuZmluZCgnLmN1c3RvbS1saW5rJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAkY29uLmZpbmQoJy5jdXN0b20tY2hlY2tib3ggLmN1c3RvbS1saW5rJykub2ZmKCdjbGljaycpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciAkY3VzdG9tY2hlY2sgPSAkKHRoaXMpLmNsb3Nlc3QoJy5jdXN0b20tY2hlY2tib3gnKTtcbiAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2Vycm9yJyk7XG4gICAgICAgICAgICBpZiAoJGN1c3RvbWNoZWNrLmZpbmQoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScpLmlzKCc6Y2hlY2tlZCcpKSB7XG4gICAgICAgICAgICAgICAgJGN1c3RvbWNoZWNrLmZpbmQoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScpLmNsaWNrKCk7XG4gICAgICAgICAgICAgICAgJGN1c3RvbWNoZWNrLmZpbmQoJy5jdXN0b20tbGluaycpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJGN1c3RvbWNoZWNrLmZpbmQoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScpLmNsaWNrKCk7XG4gICAgICAgICAgICAgICAgJGN1c3RvbWNoZWNrLmZpbmQoJy5jdXN0b20tbGluaycpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIC8qaWYoJCgnYm9keScpLmhhc0NsYXNzKCdyYXBhbGFfZGV2aWNlJykpe1xuICAgICAgICAgICAgJGNvbi5maW5kKFwiLnVpLWRpYWxvZyAjZGlhbG9nY29udGFpbmVyMTIzICNWaXBpbnNpZGVyRm9ybSAuc2VsZWN0LXN0eWxlIC5zZWxlY3Rib3hcIikub2ZmKCdjbGljaycpLm9uKFwiY2xpY2tcIixmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdChcIi5maWVsZC13cmFwcGVyXCIpLmFkZENsYXNzKCdleHBhbmRlZCcpO1xuICAgICAgICAgICAgICAgIH0pLm9uKFwiYmx1ciBjaGFuZ2VcIiwgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KFwiLmZpZWxkLXdyYXBwZXJcIikucmVtb3ZlQ2xhc3MoJ2V4cGFuZGVkJyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0qL1xuXG4gICAgICAgIC8vIGN1c3RvbSBzZWxlY3QgaW1wbGVtZW50YXRpb24gaW4gVklQIGluc2lkZXJcbiAgICAgICAgLyppZighJCgnYm9keScpLmhhc0NsYXNzKCdyYXBhbGFfZGV2aWNlJykpe1xuICAgICAgICAgICAgJGNvbi5maW5kKFwiLmN1c3RvbWl6ZWQtc2VsZWN0XCIpLmZpbmQoXCJzZWxlY3RcIikuZWFjaChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIGlmKCQodGhpcykuYXR0cignZGlzYWJsZWQnKSl7XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuc2VsZWN0Ym94KCdkaXNhYmxlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgICAgICQodGhpcykuc2VsZWN0Ym94KCk7XG4gICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICQoJy5zYk9wdGlvbnMgbGk6bGFzdCcpLmFkZENsYXNzKCdsYXN0Jyk7XG4gICAgICAgICAgICB9KS5mb2N1cyhmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICQodGhpcykubmV4dCgnLnNiSG9sZGVyJykudHJpZ2dlcignZm9jdXMnKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH1cbiAgICAqL1xuICAgICAgICAkY29uLmZpbmQoJy5jdXN0b20tY2hlY2tib3ggaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJykub2ZmKCdjaGFuZ2UnKS5vbignY2hhbmdlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuY3VzdG9tLWNoZWNrYm94JykuZmluZCgnLmN1c3RvbS1saW5rJykucmVtb3ZlQ2xhc3MoJ2Vycm9yJyk7XG4gICAgICAgICAgICB2YXIgJGZvcm0gPSAkKCcuYWRkcmVzcycpO1xuICAgICAgICAgICAgaWYgKCQodGhpcykuaXMoJzpjaGVja2VkJykpIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5jdXN0b20tY2hlY2tib3gnKS5maW5kKCcuY3VzdG9tLWxpbmsnKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgaWYgKCQodGhpcykuaXMoJ1tuYW1lJD1fc2FtZWFzc2hpcHBpbmdhZGRyZXNzXScpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZEFkZHJlc3MgPSAkKHRoaXMpLmNsb3Nlc3QoJy5jdXN0b20tY2hlY2tib3gnKS5kYXRhKCdhZGRyZXNzJyk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5zZWxlY3RlZC1zaGlwcGluZy1hZGRyZXNzJykuZW1wdHkoKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLnNlbGVjdGVkLXNoaXBwaW5nLWFkZHJlc3MnKS5hcHBlbmQoc2VsZWN0ZWRBZGRyZXNzLmZpcnN0TmFtZSArICcgJyArIHNlbGVjdGVkQWRkcmVzcy5sYXN0TmFtZSArICc8YnIvPicgKyBzZWxlY3RlZEFkZHJlc3MuYWRkcmVzczEgKyAnICcgKyBzZWxlY3RlZEFkZHJlc3MuYWRkcmVzczIgKyAnPGJyLz4nICsgc2VsZWN0ZWRBZGRyZXNzLmNpdHkgKyAnICcgKyBzZWxlY3RlZEFkZHJlc3Muc3RhdGVDb2RlICsgJyAnICsgc2VsZWN0ZWRBZGRyZXNzLnBvc3RhbENvZGUgKyAnPGJyLz4nICsgc2VsZWN0ZWRBZGRyZXNzLnBob25lKTtcbiAgICAgICAgICAgICAgICAgICAgdXRpbC5maWxsQWRkcmVzc0ZpZWxkcyhzZWxlY3RlZEFkZHJlc3MsICRmb3JtKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmVkaXQtYWRkcmVzcy1maWVsZCcpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5zZWxlY3RlZC1zaGlwcGluZy1hZGRyZXNzLCAubmV3LWFkZHJlc3MtZmllbGQnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgICAgICAgICAgICAgICAkKCcuc2hpcHBpbmctYWRkcmVzcy1maWVsZC1zZWN0aW9uJykuYWRkQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgICAgICAgICAgICAgdWlldmVudHMuY3VzdG9tRmllbGRzKCk7XG4gICAgICAgICAgICAgICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuY3VzdG9tLWNoZWNrYm94JykuZmluZCgnLmN1c3RvbS1saW5rJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmlzKCdbbmFtZSQ9X3NhbWVhc3NoaXBwaW5nYWRkcmVzc10nKSkge1xuICAgICAgICAgICAgICAgICAgICAkKCcuYWRkcmVzc29wdGlvbnMtYWRkVG9BZGRyZXNzQm9vaywuYWRkcmVzc29wdGlvbnMtbWFrZWRlZmF1bHQgJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XFwnc2hpcHBpbmdBZGRyZXNzX3NlbGVjdGVkYWRkcmVzc1xcJ10nKS52YWwoJycpO1xuICAgICAgICAgICAgICAgICAgICAkKCcuc2VsZWN0ZWQtc2hpcHBpbmctYWRkcmVzcycpLmVtcHR5KCk7XG4gICAgICAgICAgICAgICAgICAgICQoJ2lucHV0W25hbWUkPVxcJ19hZGRyZXNzaWRcXCddJykudmFsKCcnKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XFwnX2FkZHJlc3NGaWVsZHNfZmlyc3ROYW1lXFwnXScpLnZhbCgnJyk7XG4gICAgICAgICAgICAgICAgICAgICQoJ2lucHV0W25hbWUkPVxcJ19hZGRyZXNzRmllbGRzX2xhc3ROYW1lXFwnXScpLnZhbCgnJyk7XG4gICAgICAgICAgICAgICAgICAgICQoJ2lucHV0W25hbWUkPVxcJ19hZGRyZXNzRmllbGRzX2FkZHJlc3MxXFwnXScpLnZhbCgnJyk7XG4gICAgICAgICAgICAgICAgICAgICQoJ2lucHV0W25hbWUkPVxcJ19hZGRyZXNzRmllbGRzX2FkZHJlc3MyXFwnXScpLnZhbCgnJyk7XG4gICAgICAgICAgICAgICAgICAgICQoJ2lucHV0W25hbWUkPVxcJ19hZGRyZXNzRmllbGRzX2NpdHlcXCddJykudmFsKCcnKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XFwnX2FkZHJlc3NGaWVsZHNfcG9zdGFsXFwnXScpLnZhbCgnJyk7XG4gICAgICAgICAgICAgICAgICAgICQoJ2lucHV0W25hbWUkPVxcJ19hZGRyZXNzRmllbGRzX3Bob25lXFwnXScpLnZhbCgnJyk7XG4gICAgICAgICAgICAgICAgICAgIHVpZXZlbnRzLmNoYW5nZUZvcm1TZWxlY3Rpb24oalF1ZXJ5KCdzZWxlY3RbbmFtZSQ9XFwnX2FkZHJlc3NGaWVsZHNfc3RhdGVzX3N0YXRlXFwnXScpWzBdLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgIHVpZXZlbnRzLmNoYW5nZUZvcm1TZWxlY3Rpb24oalF1ZXJ5KCdzZWxlY3QuYWRkcmVzcy1zZWxlY3QnKVswXSwgJycpO1xuICAgICAgICAgICAgICAgICAgICAkKCcuc2hpcHBpbmctYWRkcmVzcy1maWVsZC1zZWN0aW9uJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLnNlbGVjdGVkLXNoaXBwaW5nLWFkZHJlc3MsIC5uZXctYWRkcmVzcy1maWVsZCwgLmVkaXQtYWRkcmVzcy1maWVsZCcpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgICAgICAgICAgICAgICAgICQoJ2lucHV0W25hbWUkPVxcJ19hZGRyZXNzRmllbGRzX3Bob25lXFwnXScpLmNsb3Nlc3QoJ2Rpdi5waG9uZScpLmZpbmQoJ3NwYW4uZXJyb3JjbGllbnQnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XFwnX2FkZHJlc3NGaWVsZHNfcG9zdGFsXFwnXScpLmNsb3Nlc3QoJ2Rpdi56aXAnKS5maW5kKCdzcGFuLmVycm9yY2xpZW50JykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5hZGRyZXNzZm9ybSAuZm9ybS1yb3cuY3VzdG9tLXNlbGVjdCcpLnJlbW92ZUNsYXNzKCdjdXN0b21zZWxlY3QtZXJyb3InKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmN1c3RvbS1zZWxlY3QnKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RWYWwgPSAkKHRoaXMpLmZpbmQoJzpzZWxlY3RlZCcpLnRleHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLnNlbGVjdG9yT3V0JykudGV4dChzZWxlY3RWYWwpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgJCgnYS5jbGVhcmJ1dHRvbicpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLnNoaXBwaW5nLWFkZHJlc3MtZmllbGQtc2VjdGlvbiAuZm9ybS1yb3cnKS5maW5kKCdpbnB1dCcpLnJlbW92ZUNsYXNzKCdlcnJvcmNsaWVudCcpO1xuICAgICAgICAgICAgICAgICAgICB1aWV2ZW50cy5jdXN0b21GaWVsZHMoKTtcbiAgICAgICAgICAgICAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAkY29uLmZpbmQoJy5jdXN0b20tc2VsZWN0JykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ3NlbGVjdCcpLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XG4gICAgICAgICAgICB2YXIgc2VsV2lkdGggPSAkKHRoaXMpLmZpbmQoJ3NlbGVjdCcpLndpZHRoKCk7XG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5maW5kKCdzZWxlY3QnKS5oYXNDbGFzcygnaW5wdXQtbG9uZ2VyJykpIHtcbiAgICAgICAgICAgICAgICBzZWxXaWR0aCA9IHNlbFdpZHRoIC0gMTc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ3NlbGVjdCcpLmNzcyh7XG4gICAgICAgICAgICAgICAgJ3dpZHRoJzogc2VsV2lkdGggKyAyMCxcbiAgICAgICAgICAgICAgICAnbGVmdCc6ICcwcHgnLFxuICAgICAgICAgICAgICAgICdsaW5lLWhlaWdodCc6ICcyOHB4JyxcbiAgICAgICAgICAgICAgICAnei1pbmRleCc6ICc5OScsXG4gICAgICAgICAgICAgICAgJ3Bvc2l0aW9uJzogJ3JlbGF0aXZlJyxcbiAgICAgICAgICAgICAgICAnZmxvYXQnOiAnbGVmdCcsXG4gICAgICAgICAgICAgICAgJ3BhZGRpbmcnOiAnMHB4J1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5maWVsZC13cmFwcGVyJykuY3NzKHtcbiAgICAgICAgICAgICAgICAnYmFja2dyb3VuZC1wb3NpdGlvbic6IHNlbFdpZHRoLFxuICAgICAgICAgICAgICAgICd3aWR0aCc6IHNlbFdpZHRoICsgMjAsXG4gICAgICAgICAgICAgICAgJ3BhZGRpbmcnOiAnMHB4J1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoJCgnLmNyZWRpdENhcmQnKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAnYmFja2dyb3VuZC1wb3NpdGlvbic6IHNlbFdpZHRoLFxuICAgICAgICAgICAgICAgICAgICAnd2lkdGgnOiBzZWxXaWR0aCArIDE1LFxuICAgICAgICAgICAgICAgICAgICAncGFkZGluZyc6ICcwcHgnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmZpbmQoJy5zZWxlY3Rvck91dCcpLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCdzZWxlY3QnKS5hZnRlcignPGRpdiBjbGFzcz1cXCdzZWxlY3Rvck91dFxcJyBzdHlsZT1cXCdwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MHB4O3otaW5kZXg6MTtwYWRkaW5nOjAgMjBweCAwIDEwcHg7XFwnPjwvZGl2PicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCQodGhpcykuZmluZCgnLnNlbGVjdG9yRXJyb3InKS5sZW5ndGggPT0gMCAmJiAhJCh0aGlzKS5jbG9zZXN0KCdtb250aCcpICYmICEkKHRoaXMpLmNsb3Nlc3QoJ3llYXInKSkge1xuICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCAuZmllbGQtd3JhcHBlcicpLmFwcGVuZCgnPGRpdiBjbGFzcz1cXCdzZWxlY3RvckVycm9yIGVycm9yXFwnPjwvZGl2PicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuc2VsZWN0b3JPdXQnKS50ZXh0KCcnKS50ZXh0KCQodGhpcykuZmluZCgnOnNlbGVjdGVkJykudGV4dCgpKTtcblxuICAgICAgICB9KS5jaGFuZ2UoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHN0ciA9ICcnO1xuICAgICAgICAgICAgc3RyID0gJCh0aGlzKS5maW5kKCc6c2VsZWN0ZWQnKS50ZXh0KCk7XG4gICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5zZWxlY3Rvck91dCcpLnRleHQoJycpLnRleHQoc3RyKTtcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdhZGRyZXNzbGlzdCcpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCQodGhpcykuZmluZCgnLnNlbGVjdG9yT3V0Jykub3V0ZXJXaWR0aCgpID49IDI5OCkge1xuICAgICAgICAgICAgICAgICAgICBzdHIgPSBzdHIuc3Vic3RyKDAsIDM0KSArICcuLi4nO1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5zZWxlY3Rvck91dCcpLnRleHQoJycpLnRleHQoc3RyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgICRjb24uZmluZCgnLmN1c3RvbS1zZWxlY3Qgc2VsZWN0JykuYmluZCgnYmx1ciBjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygndmFsaWQnKSB8fCAkKHRoaXMpLnZhbCgpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5jdXN0b20tc2VsZWN0JykucmVtb3ZlQ2xhc3MoJ2N1c3RvbXNlbGVjdC1lcnJvcicpO1xuICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2Vycm9yY2xpZW50JykuYWRkQ2xhc3MoJ3ZhbGlkJyk7XG4gICAgICAgICAgICAgICAgLy8kKHRoaXMpLmZpbmQoXCJvcHRpb25bdmFsdWU9XCIrJCh0aGlzKS52YWwoKStcIl1cIikuYXR0cihcInNlbGVjdGVkXCIsXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgICAgICAgICBpZiAoalF1ZXJ5KHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5oYXNDbGFzcygnc3RhdGUnKSkge1xuICAgICAgICAgICAgICAgICAgICAkKCcuc3RhdGUtYmxrIC5zdGF0ZWVycm9yLmVycm9yJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuY3VzdG9tLXNlbGVjdCcpLmFkZENsYXNzKCdjdXN0b21zZWxlY3QtZXJyb3InKTtcbiAgICAgICAgICAgICAgICBpZiAoalF1ZXJ5KHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5oYXNDbGFzcygnc3RhdGUnKSAmJiAhalF1ZXJ5KHRoaXMpLmNsb3Nlc3QoJy5jdXN0b20tc2VsZWN0JykuaGFzQ2xhc3MoJ2JsdXJlZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeSgnLnN0YXRlLWJsayAuc3RhdGVlcnJvci5lcnJvcicpLnNob3coKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoalF1ZXJ5KHRoaXMpLmhhc0NsYXNzKCd5ZWFyc2VsZWN0JykgfHwgalF1ZXJ5KHRoaXMpLmhhc0NsYXNzKCdtb250aHNlbGVjdCcpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGpRdWVyeSgnLnllYXJzZWxlY3QnKS52YWxpZCgpID09IDEgJiYgalF1ZXJ5KCcubW9udGhzZWxlY3QnKS52YWxpZCgpID09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KCcuZXhwaXJhdGlvbmRhdGV2YWxpZC5lcnJvcicpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KCcuZXhwaXJhdGlvbmRhdGUuZXJyb3InKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9LFxuICAgIC8vY2hhbmdlcyB0aGUgc2VsZWN0aW9uIG9mIHRoZSBnaXZlbiBmb3JtIHNlbGVjdCB0byB0aGUgZ2l2ZW4gdmFsdWVcbiAgICBjaGFuZ2VGb3JtU2VsZWN0aW9uOiBmdW5jdGlvbiAoc2VsZWN0RWxlbSwgc2VsZWN0ZWRWYWx1ZSkge1xuICAgICAgICBpZiAoIXNlbGVjdEVsZW0pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb3B0aW9ucyA9IHNlbGVjdEVsZW0ub3B0aW9ucztcbiAgICAgICAgaWYgKG9wdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgLy8gZmluZCBpbmRleCBvZiB2YWx1ZSB0byBzZWxlY3RcbiAgICAgICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvcHRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnNbaV0udmFsdWUgIT0gc2VsZWN0ZWRWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWR4ID0gaTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlbGVjdEVsZW0uc2VsZWN0ZWRJbmRleCA9IGlkeDtcbiAgICAgICAgICAgICQoJy5jdXN0b20tc2VsZWN0JykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdFZhbCA9ICQodGhpcykuZmluZCgnOnNlbGVjdGVkJykudGV4dCgpO1xuICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLnNlbGVjdG9yT3V0JykudGV4dChzZWxlY3RWYWwpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGluaXQ6IGZ1bmN0aW9uICgkY29uKSB7XG5cbiAgICAgICAgaWYgKCRjb24gPT0gbnVsbCkge1xuICAgICAgICAgICAgJGNvbiA9ICQoJ2JvZHknKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHVpZXZlbnRzLmN1c3RvbUZpZWxkcygpO1xuICAgICAgICAvLyBEeW5hbWljYWx5IGdlbmVyYXRpbmcgdGFiaW5kZXggZm9yIFZJUFxuICAgICAgICBpZiAoJCgnLnVpLWRpYWxvZycpLmhhc0NsYXNzKCd2aXBJbnNpZGVyLWRsZycpKSB7XG4gICAgICAgICAgICAkKCcudmlwSW5zaWRlci1kbGcgLmZvcm1maWVsZCcpLmVhY2goZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJzppbnB1dDpub3QoOmhpZGRlbiknKS5hdHRyKCd0YWJpbmRleCcsIGkgKyAyMSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvKiQoZG9jdW1lbnQpLmFqYXhDb21wbGV0ZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZigkKCcucHRfcHJvZHVjdHNlYXJjaHJlc3VsdCcpLmxlbmd0aCA+IDApe2FwcC5zZWFyY2guc2VhcmNoUmVmaW5lbWVudFRvZ2dsZSgpO31cbiAgICAgICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcbiAgICAgICAgfSk7Ki9cbiAgICAgICAgJGNvbi5maW5kKCdhLmNsZWFyYnV0dG9uJykub24oJ2NsaWNrIHRvdWNoc3RhcnQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCdpbnB1dCcpLnZhbCgnJyk7XG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCd0ZXh0YXJlYScpLnZhbCgnJyk7XG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCdhLmNsZWFyYnV0dG9uJykuaGlkZSgpO1xuICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmNvcnJlY3RhZGRyZXNzJykuaGlkZSgpO1xuICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmZvcm0tcm93ICwgLmxhYmVsIHNwYW4nKS5yZW1vdmVDbGFzcygnaW5wdXRsYWJlbCcpO1xuICAgICAgICAgICAgdmFyIHRleHRhcmVNYXhMZW5ndGggPSAkKHRoaXMpLmNsb3Nlc3QoJy5maWVsZC13cmFwcGVyJykuZmluZCgndGV4dGFyZWEnKS5hdHRyKCdtYXhsZW5ndGgnKTtcbiAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZpZWxkLXdyYXBwZXInKS5maW5kKCcuY2hhci1jb3VudCcpLmh0bWwoJycpLmh0bWwoJ0NoYXJhY3RlcnMgUmVtYWluaW5nICcgKyB0ZXh0YXJlTWF4TGVuZ3RoKTtcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCdpbnB1dFtuYW1lJD1cIl9jcmVkaXRDYXJkX251bWJlclwiXScpLmxlbmd0aCA+IDAgJiYgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnaW5wdXRbbmFtZSQ9XCJfY3JlZGl0Q2FyZF9udW1iZXJcIl0nKS52YWwoKS5sZW5ndGggPCA0KSB7XG4gICAgICAgICAgICAgICAgJCgnLmNhcmR0eXBlaW1nID4gZGl2JykuaGlkZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5maWVsZC13cmFwcGVyIC5tYXhlbGVtZW50JykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5maWVsZC13cmFwcGVyIC5tYXhlbGVtZW50JykucmVtb3ZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAkY29uLmZpbmQoJy5wcm9tby1pbnB1dC1idXR0b24gLmZpZWxkLXdyYXBwZXInKS5vbigna2V5dXAgYmx1cicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmZpbmQoJ2lucHV0JykudmFsKCkgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKCQodGhpcykuZmluZCgnaW5wdXQnKS52YWwoKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnYS5jbGVhcmJ1dHRvbicpLnNob3coKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ2EuY2xlYXJidXR0b24nKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgJGNvbi5maW5kKCcuZ2lmdGNlcnRmaWVsZHMgLmZpZWxkLXdyYXBwZXInKS5vbigna2V5dXAgYmx1cicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmZpbmQoJ2lucHV0JykudmFsKCkgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCdpbnB1dCcpLnJlbW92ZUNsYXNzKCdlcnJvcmNsaWVudCcpO1xuICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmZpbmQoJ2lucHV0JykudmFsKCkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ2EuY2xlYXJidXR0b24nKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCdhLmNsZWFyYnV0dG9uJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCQoJy51aS1sb2dpbicpLmxlbmd0aCA+IDAgfHwgJCgnLnBhc3N3b3JkcmVzZXQnKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAkY29uLmZpbmQoJy51aS1sb2dpbiAuZm9ybWZpZWxkJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyICR2YWwgPSAkKHRoaXMpLmZpbmQoJ2lucHV0W3R5cGU9XCJ0ZXh0XCJdJykubGVuZ3RoID4gMCA/ICQodGhpcykuZmluZCgnaW5wdXRbdHlwZT1cInRleHRcIl0nKS52YWwoKSA6ICQodGhpcykuZmluZCgnaW5wdXRbdHlwZT1cInBhc3N3b3JkXCJdJykudmFsKCk7XG4gICAgICAgICAgICAgICAgaWYgKCQodGhpcykuZmluZCgnLmZpZWxkLXdyYXBwZXIgLmNsZWFyYnV0dG9uJykubGVuZ3RoID09IDAgJiYgJCh0aGlzKS5maW5kKCcuZmllbGQtd3JhcHBlciBpbnB1dFt0eXBlPVwidGV4dFwiXScpLmxlbmd0aCA+IDAgfHwgJCh0aGlzKS5maW5kKCcuZmllbGQtd3JhcHBlciBpbnB1dFt0eXBlPVwicGFzc3dvcmRcIl0nKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLmZpZWxkLXdyYXBwZXInKS5hcHBlbmQoJzxhIGNsYXNzPVwiY2xlYXJidXR0b25cIj48L2E+Jyk7XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLmNsZWFyYnV0dG9uJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoKCR2YWwgIT0gbnVsbCB8fCAkdmFsICE9IHVuZGVmaW5lZCkgJiYgJHZhbC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLmNsZWFyYnV0dG9uJykuc2hvdygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICgkKCcuYWNjb3VudC1zZWN0aW9uJykubGVuZ3RoID4gMCB8fCAkKCcucGFzc3dvcmRyZXNldCcpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICRjb24uZmluZCgnLmFjY291bnQtc2VjdGlvbiAuZm9ybWZpZWxkJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyICR2YWwgPSAkKHRoaXMpLmZpbmQoJ2lucHV0W3R5cGU9XCJ0ZXh0XCJdJykubGVuZ3RoID4gMCA/ICQodGhpcykuZmluZCgnaW5wdXRbdHlwZT1cInRleHRcIl0nKS52YWwoKSA6ICQodGhpcykuZmluZCgnaW5wdXRbdHlwZT1cInBhc3N3b3JkXCJdJykudmFsKCk7XG4gICAgICAgICAgICAgICAgaWYgKCQodGhpcykuZmluZCgnLmZpZWxkLXdyYXBwZXIgLmNsZWFyYnV0dG9uJykubGVuZ3RoID09IDAgJiYgJCh0aGlzKS5maW5kKCcuZmllbGQtd3JhcHBlciBpbnB1dFt0eXBlPVwidGV4dFwiXScpLmxlbmd0aCA+IDAgfHwgJCh0aGlzKS5maW5kKCcuZmllbGQtd3JhcHBlciBpbnB1dFt0eXBlPVwicGFzc3dvcmRcIl0nKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLmZpZWxkLXdyYXBwZXInKS5hcHBlbmQoJzxhIGNsYXNzPVwiY2xlYXJidXR0b25cIj48L2E+Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICgoJHZhbCAhPSBudWxsIHx8ICR2YWwgIT0gdW5kZWZpbmVkKSAmJiAkdmFsLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuY2xlYXJidXR0b24nKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAkY29uLmZpbmQoJy5mb3JtZmllbGQgLmZpZWxkLXdyYXBwZXIgaW5wdXQsLmZvcm1maWVsZCAuZmllbGQtd3JhcHBlciB0ZXh0YXJlYScpLm9uKCdrZXl1cCBpbnB1dCBibHVyJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCQodGhpcykudmFsKCkgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKCQodGhpcykudmFsKCkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCdhLmNsZWFyYnV0dG9uJykuc2hvdygpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJ2EuY2xlYXJidXR0b24nKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy92YXIgT1NOYW1lID0gJ1Vua25vd24gT1MnO1xuICAgICAgICBpZiAobmF2aWdhdG9yLmFwcFZlcnNpb24uaW5kZXhPZignTWFjJykgIT0gLTEpIHtcbiAgICAgICAgICAgICQoJy5wdF92aXBpbnNpZGVyJykuZmluZCgnc3Bhbi5yYXBhbGEtZW50aXR5LWhvbGRlciBpJykuYWRkQ2xhc3MoJ21hY2ZvbnQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgICQoJy5wYXltZW50bWV0aG9kc19jb250IC50b2dnbGUnKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB1aWV2ZW50cy5zeW5jY2hlY2tvdXRIKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoJ2J1dHRvbltuYW1lPVxcJ2R3ZnJtX2xvZ2luX2xvZ2luXFwnXScpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcbiAgICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgIH0pO1xuICAgICAgICAkKCdidXR0b25bbmFtZT1cXCdkd2ZybV9iaWxsaW5nZ2lmdGNlcnRfcmVkZWVtR2lmdENlcnRcXCddJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xuICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgfSk7XG4gICAgICAgICQoJ2J1dHRvbltuYW1lPVxcJ2R3ZnJtX2JpbGxpbmdjb3Vwb25fYXBwbHlDb3Vwb25cXCddJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xuICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgfSk7XG4gICAgICAgICQoJy5jaGVja2JhbGFuY2UgYScpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHVpZXZlbnRzLnN5bmNjaGVja291dEgoKTtcbiAgICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgIH0pO1xuICAgICAgICAkKCcuZ2lmdGNlcnRjb3Vwb25mb3JtIC5naWZ0LWhlYWRpbmcnKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoJCgnLnNob3ctY29udGVudCcpLmlzKCc6dmlzaWJsZScpID09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAkKCcuc2hvdy1jb250ZW50JykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmdpZnRjZXJ0ZmllbGQnKS5maW5kKCdzcGFuLmVycm9yJykuaGlkZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKCcuc2hvdy1jb250ZW50Jykuc2hvdygpO1xuICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmdpZnRjZXJ0ZmllbGQnKS5maW5kKCdzcGFuLmVycm9yJykuc2hvdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdWlldmVudHMuc3luY2NoZWNrb3V0SCgpO1xuICAgICAgICB9KTtcbiAgICAgICAgJCgnYm9keScpLm9uKCdrZXlwcmVzcyBrZXl1cCcsICdpbnB1dFtpZCQ9XCJfYWRkcmVzc2lkXCJdLGlucHV0W2lkJD1cIl9hZGRyZXNzRmllbGRzX2ZpcnN0TmFtZVwiXSxpbnB1dFtpZCQ9XCJfYWRkcmVzc0ZpZWxkc19sYXN0TmFtZVwiXSxpbnB1dFtpZCQ9XCJfYWRkcmVzc0ZpZWxkc19hZGRyZXNzMVwiXSxpbnB1dFtpZCQ9XCJfYWRkcmVzc0ZpZWxkc19hZGRyZXNzMlwiXSxpbnB1dFtpZCQ9XCJfYWRkcmVzc0ZpZWxkc19jaXR5XCJdLGlucHV0W2lkJD1cIl9hZGRyZXNzRmllbGRzX3Bob25lXCJdLGlucHV0W2lkJD1cIl9hZGRyZXNzRmllbGRzX3Bvc3RhbFwiXSxpbnB1dFtpZCQ9XCJfY29udGFjdHVzX3Bob25lXCJdJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBrZXljb2RlID0gZS5rZXlDb2RlID8gZS5rZXlDb2RlIDogZS53aGljaDtcbiAgICAgICAgICAgIHZhciBtYXhsZW5ndGggPSAkKHRoaXMpLmF0dHIoJ21heGxlbmd0aCcpO1xuICAgICAgICAgICAgdmFyIG1heGxtc2cgPSAnVGhpcyBmaWVsZCBpcyBsaW1pdGVkIHRvICcgKyBtYXhsZW5ndGggKyAnIGNoYXJhY3RlcnMuJztcbiAgICAgICAgICAgIGlmIChqUXVlcnkodGhpcykuaGFzQ2xhc3MoJ3Bob25lJykgfHwgalF1ZXJ5KHRoaXMpLmhhc0NsYXNzKCdwaG9uZUNEVVMnKSkge1xuICAgICAgICAgICAgICAgIG1heGxlbmd0aCA9IDE0O1xuICAgICAgICAgICAgICAgICQodGhpcykuYXR0cignbWF4bGVuZ3RoJywgbWF4bGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBtYXhsbXNnID0gJ1RoaXMgZmllbGQgaXMgbGltaXRlZCB0byAxMCBudW1iZXJzLic7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChqUXVlcnkodGhpcykuaGFzQ2xhc3MoJ3Bvc3RhbCcpKSB7XG4gICAgICAgICAgICAgICAgbWF4bGVuZ3RoID0gMTA7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdtYXhsZW5ndGgnLCBtYXhsZW5ndGgpO1xuICAgICAgICAgICAgICAgIG1heGxtc2cgPSAnVGhpcyBmaWVsZCBpcyBsaW1pdGVkIHRvIDkgbnVtYmVycy4nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGtleWNvZGUgIT0gODYpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWF4RWxlbWVudCA9ICc8ZGl2IGNsYXNzPVxcJ21heGVsZW1lbnQgaGlkZVxcJz4nICsgbWF4bG1zZyArICc8L2Rpdj4nO1xuICAgICAgICAgICAgICAgIGlmICgoJCh0aGlzKS52YWwoKS5sZW5ndGggPj0gbWF4bGVuZ3RoKSAmJiAoa2V5Y29kZSAhPSA5KSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5jbG9zZXN0KCcuZmllbGQtd3JhcHBlcicpLmZpbmQoJ3NwYW4uZXJyb3JjbGllbnQnKS5sZW5ndGggIT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZmllbGQtd3JhcHBlcicpLmZpbmQoJ3NwYW4uZXJyb3JjbGllbnQnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5jbG9zZXN0KCcuZmllbGQtd3JhcHBlcicpLmZpbmQoJy5tYXhlbGVtZW50JykubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZpZWxkLXdyYXBwZXInKS5hcHBlbmQobWF4RWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5maWVsZC13cmFwcGVyJykuZmluZCgnLm1heGVsZW1lbnQnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS52YWwoJCh0aGlzKS52YWwoKS5zdWJzdHIoMCwgbWF4bGVuZ3RoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5jbG9zZXN0KCcuZmllbGQtd3JhcHBlcicpLmZpbmQoJy5tYXhlbGVtZW50JykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZmllbGQtd3JhcHBlcicpLmZpbmQoJy5tYXhlbGVtZW50JykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSk7XG4gICAgICAgICQoJ2JvZHknKS5vbignYmx1cicsICdpbnB1dFtpZCQ9XCJfYWRkcmVzc2lkXCJdLGlucHV0W2lkJD1cIl9hZGRyZXNzRmllbGRzX2ZpcnN0TmFtZVwiXSxpbnB1dFtpZCQ9XCJfYWRkcmVzc0ZpZWxkc19sYXN0TmFtZVwiXSxpbnB1dFtpZCQ9XCJfYWRkcmVzc0ZpZWxkc19hZGRyZXNzMVwiXSxpbnB1dFtpZCQ9XCJfYWRkcmVzc0ZpZWxkc19hZGRyZXNzMlwiXSxpbnB1dFtpZCQ9XCJfYWRkcmVzc0ZpZWxkc19jaXR5XCJdLGlucHV0W2lkJD1cIl9hZGRyZXNzRmllbGRzX3Bob25lXCJdLGlucHV0W2lkJD1cIl9hZGRyZXNzRmllbGRzX3Bvc3RhbFwiXSxpbnB1dFtpZCQ9XCJfY29udGFjdHVzX3Bob25lXCJdJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCgnLm1heGVsZW1lbnQnKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICAgICAgICAgJCgnI2N1c3RvbWVyY29udGFjdHVzJykuZmluZCgnc3BhbicpLnJlbW92ZUNsYXNzKCdtYXhlbGVtZW50Jyk7XG4gICAgICAgIH0pO1xuICAgICAgICAvKiBpZigkKFwiLm9yZGVydG90YWxzYXZpbmdcIikubGVuZ3RoID4gMCApIHtcbiAgICAgICAgICAgICAkKFwiLm5ldy1zdW1tZXJ5XCIpLnJlbW92ZUNsYXNzKFwiZGlzY291bnQtYXZhaWxhYmxlXCIpO1xuICAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgICQoXCIubmV3LXN1bW1lcnlcIikuYWRkQ2xhc3MoXCJkaXNjb3VudC1hdmFpbGFibGVcIik7XG4gICAgICAgICB9Ki9cbiAgICAgICAgaWYgKCQoJy51aS1kaWFsb2cnKS5oYXNDbGFzcygndmlwSW5zaWRlci1kbGcnKSkge1xuICAgICAgICAgICAgJCgnLnZpcEluc2lkZXItZGxnIC5mb3JtZmllbGQnKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5maW5kKCcuZmllbGQtd3JhcHBlciAuY2xlYXJidXR0b24nKS5sZW5ndGggPT0gMCAmJiAkKHRoaXMpLmZpbmQoJy5maWVsZC13cmFwcGVyIGlucHV0W3R5cGU9XCJ0ZXh0XCJdJykubGVuZ3RoID4gMCB8fCAkKHRoaXMpLmZpbmQoJy5maWVsZC13cmFwcGVyIHRleHRhcmVhJykubGVuZ3RoID4gMCB8fCAkKHRoaXMpLmZpbmQoJy5maWVsZC13cmFwcGVyIGlucHV0W3R5cGU9XCJwYXNzd29yZFwiXScpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuZmllbGQtd3JhcHBlcicpLmFwcGVuZCgnPGEgY2xhc3M9XCJjbGVhcmJ1dHRvblwiPjwvYT4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuZmllbGQtd3JhcHBlciBpbnB1dC50ZXh0aW5wdXQsIC5maWVsZC13cmFwcGVyIHRleHRhcmVhJykudW5iaW5kKCdjaGFuZ2UnKS5iaW5kKCdjbGljayBjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdlcnJvcmNsaWVudCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdlcnJvcmNsaWVudCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxhYmVsJykuZmluZCgnc3Bhbi5lcnJvcmNsaWVudCcpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxhYmVsJykucmVtb3ZlQ2xhc3MoJ2Vycm9yb2NjdXJlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmZvcm0tcm93ICwgLmxhYmVsIHNwYW4nKS5yZW1vdmVDbGFzcygnaW5wdXRsYWJlbCcpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuZmllbGQtd3JhcHBlciBzZWxlY3QnKS51bmJpbmQoJ2NoYW5nZScpLmJpbmQoJ2ZvY3VzaW4gY2hhbmdlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnZXJyb3JjbGllbnQnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnZXJyb3JjbGllbnQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5sYWJlbCcpLmZpbmQoJ3NwYW4uZXJyb3JjbGllbnQnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5sYWJlbCcpLnJlbW92ZUNsYXNzKCdlcnJvcm9jY3VyZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5mb3JtLXJvdyAsIC5sYWJlbCBzcGFuJykucmVtb3ZlQ2xhc3MoJ2lucHV0bGFiZWwnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkKCcjVklQSW5zaWRlci1mb3JtLWNhbmNlbC1pZCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkKCcudWktZGlhbG9nLXRpdGxlYmFyLWNsb3NlJykudHJpZ2dlcignY2xpY2snKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqIHZpcCBwaG9uZSBhbmQgemlwIGVycm9yIGV4Y2VlZCBjb2RlICoqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gICAgICAgICAgICAkKCdpbnB1dFtpZCQ9XCJfdmlwaW5zaWRlcl9jdXN0b21lcl96aXBcIl0saW5wdXRbaWQkPVwiX3ZpcGluc2lkZXJfY3VzdG9tZXJfcGhvbmVcIl0nKS5iaW5kKCdrZXlwcmVzcyBrZXl1cCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGtleWNvZGUgPSBlLmtleUNvZGUgPyBlLmtleUNvZGUgOiBlLndoaWNoO1xuICAgICAgICAgICAgICAgIHZhciBtYXhsZW5ndGggPSAkKHRoaXMpLmF0dHIoJ21heGxlbmd0aCcpO1xuICAgICAgICAgICAgICAgIHZhciBtYXhsbXNnID0gJ1RoaXMgZmllbGQgaXMgbGltaXRlZCB0byAnICsgbWF4bGVuZ3RoICsgJyBjaGFyYWN0ZXJzLic7XG4gICAgICAgICAgICAgICAgaWYgKGpRdWVyeSh0aGlzKS5oYXNDbGFzcygndmlwLXBob25lJykpIHtcbiAgICAgICAgICAgICAgICAgICAgbWF4bGVuZ3RoID0gMTQ7XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuYXR0cignbWF4bGVuZ3RoJywgbWF4bGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgbWF4bG1zZyA9ICctVGhpcyBmaWVsZCBpcyBsaW1pdGVkIHRvIDEwIG51bWJlcnMuJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGpRdWVyeSh0aGlzKS5oYXNDbGFzcygndmlwLXppcCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIG1heGxlbmd0aCA9IDEwO1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ21heGxlbmd0aCcsIG1heGxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgIG1heGxtc2cgPSAnLVRoaXMgZmllbGQgaXMgbGltaXRlZCB0byA5IG51bWJlcnMuJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGtleWNvZGUgIT0gODYpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1heEVsZW1lbnQgPSAnPGRpdiBjbGFzcz1cXCdtYXhlbGVtZW50IGhpZGVcXCc+JyArIG1heGxtc2cgKyAnPC9kaXY+JztcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQodGhpcykudmFsKCkubGVuZ3RoID49IG1heGxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCQodGhpcykuY2xvc2VzdCgnLmZpZWxkLXdyYXBwZXInKS5maW5kKCdzcGFuLmVycm9yY2xpZW50JykubGVuZ3RoICE9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5maWVsZC13cmFwcGVyJykuZmluZCgnc3Bhbi5lcnJvcmNsaWVudCcpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5tYXhlbGVtZW50JykubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcubGFiZWwnKS5hcHBlbmQobWF4RWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoa2V5Y29kZSA+IDQ3ICYmIGtleWNvZGUgPCA1OCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLm1heGVsZW1lbnQnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcubGFiZWwnKS5hZGRDbGFzcygnZXJyb3JvY2N1cmVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykudmFsKCQodGhpcykudmFsKCkuc3Vic3RyKDAsIG1heGxlbmd0aCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5tYXhlbGVtZW50JykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5tYXhlbGVtZW50JykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxhYmVsJykucmVtb3ZlQ2xhc3MoJ2Vycm9yb2NjdXJlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvL3RoaXMgaXMgdXNlZCBhZnRlciB0byByZW1vdmUgdGhlIGV4Y2VlZGluZyBlcnJvciBtZXNzYWdlIG9uIGJsdXIgZm9yIDExNDMgdGlja2V0XG4gICAgICAgICAgICBqUXVlcnkoJ2lucHV0W2lkJD1cIl92aXBpbnNpZGVyX2N1c3RvbWVyX3ppcFwiXSxpbnB1dFtpZCQ9XCJfdmlwaW5zaWRlcl9jdXN0b21lcl9waG9uZVwiXScpLmJpbmQoJ2JsdXInLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5sYWJlbCcpLmZpbmQoJy5tYXhlbGVtZW50JykuaXMoJzp2aXNpYmxlJykpIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnLm1heGVsZW1lbnQnKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICAgICAgICAgICAgICAgICAkKCcjVmlwaW5zaWRlckZvcm0nKS5maW5kKCdzcGFuJykucmVtb3ZlQ2xhc3MoJ21heGVsZW1lbnQnKTtcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxhYmVsJykucmVtb3ZlQ2xhc3MoJ2Vycm9yb2NjdXJlZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8qKi0tLS0tLS0gbGVmdCBuYXYtLS0tLS0tLS0tLS0tLS0tKi9cbiAgICAgICAgJGNvbi5maW5kKCcuY2F0ZWdvcnltZW51c25ldyBsaS5hY3RpdmUnKS5jbG9zZXN0KCcuY2F0ZWdvcnktdG9wLWxldmVsJykuYWRkQ2xhc3MoJ2N1cnJlbnQnKTtcbiAgICAgICAgJGNvbi5maW5kKCcuY2F0ZWdvcnktdG9wLWxldmVsJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnY3VycmVudCcpKSB7XG4gICAgICAgICAgICAgICAgdmFyICR0aGlzID0gJCgnLmNhdGVnb3J5bWVudXNuZXcgbGkuYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICB2YXIgJG5vdHRoaXMgPSAkKCcuY2F0ZWdvcnltZW51c25ldyBsaScpLmZpbHRlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLm5vdCgnLmFjdGl2ZScpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5maW5kKCc+IHVsJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnPiBhIC5jb3VudC1wcm9kdWN0cycpLmFkZENsYXNzKCdzZWxlY3Rfc3VibGV2ZWxhcnJvdycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAkdGhpcy5maW5kKCc+IHVsJykuc2hvdygpO1xuICAgICAgICAgICAgICAgICR0aGlzLnBhcmVudHMoJ3VsJykuc2hvdygpO1xuICAgICAgICAgICAgICAgIGlmICgkdGhpcy5maW5kKCc+IHVsJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAkdGhpcy5maW5kKCc+IGEgLmNvdW50LXByb2R1Y3RzJykuYWRkQ2xhc3MoJ3N1YmxldmVsYXJyb3cnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJHRoaXMucGFyZW50cygnbGknKS5ub3QoJ2xpLmFjdGl2ZScpLmZpbmQoJz4gYSAuY291bnQtcHJvZHVjdHMnKS5hZGRDbGFzcygnc3VibGV2ZWxhcnJvdycpO1xuICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoJ2xpJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmZpbmQoJz4gdWwnKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJz4gYSAuY291bnQtcHJvZHVjdHMnKS5hZGRDbGFzcygnc2VsZWN0X3N1YmxldmVsYXJyb3cnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5maW5kKCc+IHVsJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJz4gYSAuY291bnQtcHJvZHVjdHMnKS5hZGRDbGFzcygnc2VsZWN0X3N1YmxldmVsYXJyb3cnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAvKiQoJ3RleHRhcmVhW2RhdGEtY2hhcmFjdGVyLWxpbWl0XScpLmVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGNoYXJjb3VudCgkKHRoaXMpKTtcbiAgICAgICAgICAgIC8vIHRyaWdnZXIgdGhlIGtleWRvd24gZXZlbnQgc28gdGhhdCBhbnkgZXhpc3RpbmcgY2hhcmFjdGVyIGRhdGEgaXMgY2FsY3VsYXRlZFxuICAgICAgICB9KS5vbigna2V5dXAga2V5cHJlc3MnLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgY2hhcmNvdW50KCQodGhpcykpO1xuICAgICAgICB9KTsqL1xuICAgIH0sXG4gICAgc3luY2NoZWNrb3V0SDogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoJCgnLnB0X2NoZWNrb3V0JykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgJCgnLml0ZW0tY2FydC1zY3JvbGxiYXInKS5yZW1vdmVBdHRyKCdzdHlsZScpO1xuICAgICAgICAgICAgJCgnLnB0X2NoZWNrb3V0IC5zdW1tYXJ5LXNlY3Rpb24gLnNsaW1TY3JvbGxEaXYnKS5yZW1vdmVBdHRyKCdzdHlsZScpO1xuICAgICAgICAgICAgJCgnLml0ZW0tY2FydC1zY3JvbGxiYXInKS5yZW1vdmVDbGFzcygnc2Nyb2xsYmFyLWFjdGl2ZScpO1xuICAgICAgICAgICAgJCgnLnB0X2NoZWNrb3V0ICAuYWpheC1jYXJ0c3VtbWFyeScpLmZpbmQoJy5zdW1tYXJ5LWNhcnR0YWJsZScpLnJlbW92ZUNsYXNzKCdzY3JvbGxiYXItaXMtYWN0aXZlJyk7XG4gICAgICAgICAgICAkKCcuaXRlbS1jYXJ0LXNjcm9sbGJhcicpLnNsaW1TY3JvbGwoe2Rlc3Ryb3k6IHRydWV9KTtcbiAgICAgICAgICAgIHZhciBjaGVja291dExlZnRIID0gJCgnLnB0X2NoZWNrb3V0IC5jaGVja291dF9jb250JykuaGVpZ2h0KCksXG4gICAgICAgICAgICAgICAgc3VtbWFyeUggPSAkKCcucHRfY2hlY2tvdXQgLnN1bW1hcnktc2VjdGlvbicpLmhlaWdodCgpLFxuICAgICAgICAgICAgICAgIG5ld3N1bW1hcnlIID0gJCgnLnB0X2NoZWNrb3V0ICAubmV3LXN1bW1lcnktY2FydCcpLm5vdCgnLm1vYmlsZS12aWV3JykuaGVpZ2h0KCk7XG5cbiAgICAgICAgICAgIHZhciBuZXdIZWlnaHRSaWdodCA9IHN1bW1hcnlIICsgbmV3c3VtbWFyeUg7XG4gICAgICAgICAgICBpZiAobmV3SGVpZ2h0UmlnaHQgPj0gY2hlY2tvdXRMZWZ0SCkge1xuICAgICAgICAgICAgICAgIHZhciBzdW1tYXJ5SGVpZ2h0ID0gY2hlY2tvdXRMZWZ0SCAtIG5ld3N1bW1hcnlIO1xuICAgICAgICAgICAgICAgIHZhciBzdW1tYXJ5SGVpZ2h0UmlnaHRCb3R0b20gPSBzdW1tYXJ5SGVpZ2h0IC0gOTk7XG4gICAgICAgICAgICAgICAgJCgnLnB0X2NoZWNrb3V0IC5zdW1tYXJ5LXNlY3Rpb24gLnNsaW1TY3JvbGxEaXYnKS5jc3MoeydoZWlnaHQnOiBzdW1tYXJ5SGVpZ2h0UmlnaHRCb3R0b219KTtcbiAgICAgICAgICAgICAgICAkKCcuaXRlbS1jYXJ0LXNjcm9sbGJhcicpLmFkZENsYXNzKCdzY3JvbGxiYXItYWN0aXZlJykuY3NzKHsnaGVpZ2h0Jzogc3VtbWFyeUhlaWdodFJpZ2h0Qm90dG9tfSk7XG4gICAgICAgICAgICAgICAgJCgnLml0ZW0tY2FydC1zY3JvbGxiYXInKS5zbGltU2Nyb2xsKHtcbiAgICAgICAgICAgICAgICAgICAgcmFpbFZpc2libGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnI2EwYTBhMCcsXG4gICAgICAgICAgICAgICAgICAgIGFsd2F5c1Zpc2libGU6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAkKCcucHRfY2hlY2tvdXQgIC5hamF4LWNhcnRzdW1tYXJ5JykuZmluZCgnLnN1bW1hcnktY2FydHRhYmxlJykuYWRkQ2xhc3MoJ3Njcm9sbGJhci1pcy1hY3RpdmUnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJCgnLml0ZW0tY2FydC1zY3JvbGxiYXInKS5jc3MoeydoZWlnaHQnOiAnYXV0byd9KTtcbiAgICAgICAgICAgICAgICAkKCcucHRfY2hlY2tvdXQgLnN1bW1hcnktc2VjdGlvbiAuc2xpbVNjcm9sbERpdicpLmNzcyh7J2hlaWdodCc6ICdhdXRvJywgJ292ZXJmbG93LXknOiAnYXV0byd9KTtcbiAgICAgICAgICAgICAgICAkKCcuaXRlbS1jYXJ0LXNjcm9sbGJhcicpLnJlbW92ZUNsYXNzKCdzY3JvbGxiYXItYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgJCgnLnB0X2NoZWNrb3V0ICAuYWpheC1jYXJ0c3VtbWFyeScpLmZpbmQoJy5zdW1tYXJ5LWNhcnR0YWJsZScpLnJlbW92ZUNsYXNzKCdzY3JvbGxiYXItaXMtYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgJCgnLml0ZW0tY2FydC1zY3JvbGxiYXInKS5zbGltU2Nyb2xsKHtkZXN0cm95OiB0cnVlfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5tb2R1bGUuZXhwb3J0cyA9IHVpZXZlbnRzO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xudmFyIGNhcmRyZWdleCA9IHtcbiAgICBtYXN0ZXJjYXJkOiAvXjVbMS01XVswLTldezIsMTR9JC8sXG4gICAgdmlzYTogL140WzAtOV17MywxNX0kLyxcbiAgICBhbWV4OiAvXjNbNDddKFswLTldezIsMTN9KSQvLFxuICAgIGRpc2NvdmVyOiAvXjYoPzowMTFbMC05XXswLDEyfXw1WzAtOV17MiwxNH0pJC9cbn07XG52YXIgdXRpbCA9IHtcbiAgICAvKipcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAZGVzY3JpcHRpb24gYXBwZW5kcyB0aGUgcGFyYW1ldGVyIHdpdGggdGhlIGdpdmVuIG5hbWUgYW5kIHZhbHVlIHRvIHRoZSBnaXZlbiB1cmwgYW5kIHJldHVybnMgdGhlIGNoYW5nZWQgdXJsXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHVybCB0aGUgdXJsIHRvIHdoaWNoIHRoZSBwYXJhbWV0ZXIgd2lsbCBiZSBhZGRlZFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIHRoZSBuYW1lIG9mIHRoZSBwYXJhbWV0ZXJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdmFsdWUgdGhlIHZhbHVlIG9mIHRoZSBwYXJhbWV0ZXJcbiAgICAgKi9cbiAgICBhcHBlbmRQYXJhbVRvVVJMOiBmdW5jdGlvbiAodXJsLCBuYW1lLCB2YWx1ZSkge1xuICAgICAgICAvLyBxdWl0IGlmIHRoZSBwYXJhbSBhbHJlYWR5IGV4aXN0c1xuICAgICAgICBpZiAodXJsLmluZGV4T2YobmFtZSArICc9JykgIT09IC0xKSB7XG4gICAgICAgICAgICByZXR1cm4gdXJsO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzZXBhcmF0b3IgPSB1cmwuaW5kZXhPZignPycpICE9PSAtMSA/ICcmJyA6ICc/JztcbiAgICAgICAgcmV0dXJuIHVybCArIHNlcGFyYXRvciArIG5hbWUgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpO1xuICAgIH0sXG4gICAgaGlkZGVuRGF0YTogZnVuY3Rpb24gKCkge1xuICAgICAgICBqUXVlcnkuZWFjaChqUXVlcnkoJy5oaWRkZW4nKSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGhpZGRlblN0ciA9IGpRdWVyeSh0aGlzKS5odG1sKCk7XG5cbiAgICAgICAgICAgIGlmIChoaWRkZW5TdHIgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBzZWUgaWYgaXRzIGEganNvbiBzdHJpbmdcbiAgICAgICAgICAgIGlmIChqUXVlcnkodGhpcykuaGFzQ2xhc3MoJ2pzb24nKSkge1xuICAgICAgICAgICAgICAgIC8vIHRyeSB0byBwYXJzZSBpdCBhcyBhIGpzb25cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBoaWRkZW5TdHIgPSB3aW5kb3cuZXZhbCgnKCcgKyBoaWRkZW5TdHIgKyAnKScpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRG8gTm90aGluZ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgalF1ZXJ5KHRoaXMpLnByZXYoKS5kYXRhKCdkYXRhJywgaGlkZGVuU3RyKTtcblxuICAgICAgICAgICAgalF1ZXJ5KHRoaXMpLnJlbW92ZSgpO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgLyoqKiogUmVhZCBjb29raWVlZSAgKioqKiovXG4gICAgcmVhZENvb2tpZTogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgdmFyIG5hbWVFUSA9IG5hbWUgKyAnPSc7XG4gICAgICAgIHZhciBjYSA9IGRvY3VtZW50LmNvb2tpZS5zcGxpdCgnOycpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgYyA9IGNhW2ldO1xuICAgICAgICAgICAgd2hpbGUgKGMuY2hhckF0KDApID09ICcgJykgYyA9IGMuc3Vic3RyaW5nKDEsIGMubGVuZ3RoKTtcbiAgICAgICAgICAgIGlmIChjLmluZGV4T2YobmFtZUVRKSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGMuc3Vic3RyaW5nKG5hbWVFUS5sZW5ndGgsIGMubGVuZ3RoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuXG4gICAgLyoqKiAgUmVhZCBjb29raWUgKioqL1xuICAgIC8qKlxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBkZXNjcmlwdGlvbiBhcHBlbmRzIHRoZSBwYXJhbWV0ZXJzIHRvIHRoZSBnaXZlbiB1cmwgYW5kIHJldHVybnMgdGhlIGNoYW5nZWQgdXJsXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHVybCB0aGUgdXJsIHRvIHdoaWNoIHRoZSBwYXJhbWV0ZXJzIHdpbGwgYmUgYWRkZWRcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zXG4gICAgICovXG4gICAgYXBwZW5kUGFyYW1zVG9Vcmw6IGZ1bmN0aW9uICh1cmwsIHBhcmFtcykge1xuICAgICAgICB2YXIgX3VybCA9IHVybDtcbiAgICAgICAgXy5lYWNoKHBhcmFtcywgZnVuY3Rpb24gKHZhbHVlLCBuYW1lKSB7XG4gICAgICAgICAgICBfdXJsID0gdGhpcy5hcHBlbmRQYXJhbVRvVVJMKF91cmwsIG5hbWUsIHZhbHVlKTtcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICAgICAgcmV0dXJuIF91cmw7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBkZXNjcmlwdGlvbiByZW1vdmUgdGhlIHBhcmFtZXRlciBhbmQgaXRzIHZhbHVlIGZyb20gdGhlIGdpdmVuIHVybCBhbmQgcmV0dXJucyB0aGUgY2hhbmdlZCB1cmxcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdXJsIHRoZSB1cmwgZnJvbSB3aGljaCB0aGUgcGFyYW1ldGVyIHdpbGwgYmUgcmVtb3ZlZFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIHRoZSBuYW1lIG9mIHBhcmFtZXRlciB0aGF0IHdpbGwgYmUgcmVtb3ZlZCBmcm9tIHVybFxuICAgICAqL1xuICAgIHJlbW92ZVBhcmFtRnJvbVVSTDogZnVuY3Rpb24gKHVybCwgbmFtZSkge1xuICAgICAgICBpZiAodXJsLmluZGV4T2YoJz8nKSA9PT0gLTEgfHwgdXJsLmluZGV4T2YobmFtZSArICc9JykgPT09IC0xKSB7XG4gICAgICAgICAgICByZXR1cm4gdXJsO1xuICAgICAgICB9XG4gICAgICAgIHZhciBoYXNoO1xuICAgICAgICB2YXIgcGFyYW1zO1xuICAgICAgICB2YXIgZG9tYWluID0gdXJsLnNwbGl0KCc/JylbMF07XG4gICAgICAgIHZhciBwYXJhbVVybCA9IHVybC5zcGxpdCgnPycpWzFdO1xuICAgICAgICB2YXIgbmV3UGFyYW1zID0gW107XG4gICAgICAgIC8vIGlmIHRoZXJlIGlzIGEgaGFzaCBhdCB0aGUgZW5kLCBzdG9yZSB0aGUgaGFzaFxuICAgICAgICBpZiAocGFyYW1VcmwuaW5kZXhPZignIycpID4gLTEpIHtcbiAgICAgICAgICAgIGhhc2ggPSBwYXJhbVVybC5zcGxpdCgnIycpWzFdIHx8ICcnO1xuICAgICAgICAgICAgcGFyYW1VcmwgPSBwYXJhbVVybC5zcGxpdCgnIycpWzBdO1xuICAgICAgICB9XG4gICAgICAgIHBhcmFtcyA9IHBhcmFtVXJsLnNwbGl0KCcmJyk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFyYW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAvLyBwdXQgYmFjayBwYXJhbSB0byBuZXdQYXJhbXMgYXJyYXkgaWYgaXQgaXMgbm90IHRoZSBvbmUgdG8gYmUgcmVtb3ZlZFxuICAgICAgICAgICAgaWYgKHBhcmFtc1tpXS5zcGxpdCgnPScpWzBdICE9PSBuYW1lKSB7XG4gICAgICAgICAgICAgICAgbmV3UGFyYW1zLnB1c2gocGFyYW1zW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZG9tYWluICsgJz8nICsgbmV3UGFyYW1zLmpvaW4oJyYnKSArIChoYXNoID8gJyMnICsgaGFzaCA6ICcnKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQGRlc2NyaXB0aW9uIGV4dHJhY3QgdGhlIHF1ZXJ5IHN0cmluZyBmcm9tIFVSTFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB1cmwgdGhlIHVybCB0byBleHRyYSBxdWVyeSBzdHJpbmcgZnJvbVxuICAgICAqKi9cbiAgICBnZXRRdWVyeVN0cmluZzogZnVuY3Rpb24gKHVybCkge1xuICAgICAgICB2YXIgcXM7XG4gICAgICAgIGlmICghXy5pc1N0cmluZyh1cmwpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICAgIGEuaHJlZiA9IHVybDtcbiAgICAgICAgaWYgKGEuc2VhcmNoKSB7XG4gICAgICAgICAgICBxcyA9IGEuc2VhcmNoLnN1YnN0cigxKTsgLy8gcmVtb3ZlIHRoZSBsZWFkaW5nID9cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcXM7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBAcGFyYW0ge1N0cmluZ31cbiAgICAgKiBAcGFyYW0ge1N0cmluZ31cbiAgICAgKi9cbiAgICBlbGVtZW50SW5WaWV3cG9ydDogZnVuY3Rpb24gKGVsLCBvZmZzZXRUb1RvcCkge1xuICAgICAgICB2YXIgdG9wID0gZWwub2Zmc2V0VG9wLFxuICAgICAgICAgICAgbGVmdCA9IGVsLm9mZnNldExlZnQsXG4gICAgICAgICAgICB3aWR0aCA9IGVsLm9mZnNldFdpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0ID0gZWwub2Zmc2V0SGVpZ2h0O1xuXG4gICAgICAgIHdoaWxlIChlbC5vZmZzZXRQYXJlbnQpIHtcbiAgICAgICAgICAgIGVsID0gZWwub2Zmc2V0UGFyZW50O1xuICAgICAgICAgICAgdG9wICs9IGVsLm9mZnNldFRvcDtcbiAgICAgICAgICAgIGxlZnQgKz0gZWwub2Zmc2V0TGVmdDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2Yob2Zmc2V0VG9Ub3ApICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdG9wIC09IG9mZnNldFRvVG9wO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHdpbmRvdy5wYWdlWE9mZnNldCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICB0b3AgPCAod2luZG93LnBhZ2VZT2Zmc2V0ICsgd2luZG93LmlubmVySGVpZ2h0KSAmJlxuICAgICAgICAgICAgICAgIGxlZnQgPCAod2luZG93LnBhZ2VYT2Zmc2V0ICsgd2luZG93LmlubmVyV2lkdGgpICYmXG4gICAgICAgICAgICAgICAgKHRvcCArIGhlaWdodCkgPiB3aW5kb3cucGFnZVlPZmZzZXQgJiZcbiAgICAgICAgICAgICAgICAobGVmdCArIHdpZHRoKSA+IHdpbmRvdy5wYWdlWE9mZnNldFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkb2N1bWVudC5jb21wYXRNb2RlID09PSAnQ1NTMUNvbXBhdCcpIHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgdG9wIDwgKHdpbmRvdy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wICsgd2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpICYmXG4gICAgICAgICAgICAgICAgbGVmdCA8ICh3aW5kb3cuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQgKyB3aW5kb3cuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoKSAmJlxuICAgICAgICAgICAgICAgICh0b3AgKyBoZWlnaHQpID4gd2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgJiZcbiAgICAgICAgICAgICAgICAobGVmdCArIHdpZHRoKSA+IHdpbmRvdy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAZGVzY3JpcHRpb24gQXBwZW5kcyB0aGUgcGFyYW1ldGVyICdmb3JtYXQ9YWpheCcgdG8gYSBnaXZlbiBwYXRoXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGggdGhlIHJlbGF0aXZlIHBhdGhcbiAgICAgKi9cbiAgICBhamF4VXJsOiBmdW5jdGlvbiAocGF0aCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcHBlbmRQYXJhbVRvVVJMKHBhdGgsICdmb3JtYXQnLCAnYWpheCcpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdXJsXG4gICAgICovXG4gICAgdG9BYnNvbHV0ZVVybDogZnVuY3Rpb24gKHVybCkge1xuICAgICAgICBpZiAodXJsLmluZGV4T2YoJ2h0dHAnKSAhPT0gMCAmJiB1cmwuY2hhckF0KDApICE9PSAnLycpIHtcbiAgICAgICAgICAgIHVybCA9ICcvJyArIHVybDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXJsO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQGRlc2NyaXB0aW9uIExvYWRzIGNzcyBkeW5hbWljYWxseSBmcm9tIGdpdmVuIHVybHNcbiAgICAgKiBAcGFyYW0ge0FycmF5fSB1cmxzIEFycmF5IG9mIHVybHMgZnJvbSB3aGljaCBjc3Mgd2lsbCBiZSBkeW5hbWljYWxseSBsb2FkZWQuXG4gICAgICovXG4gICAgbG9hZER5bmFtaWNDc3M6IGZ1bmN0aW9uICh1cmxzKSB7XG4gICAgICAgIHZhciBpLCBsZW4gPSB1cmxzLmxlbmd0aDtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLmxvYWRlZENzc0ZpbGVzLnB1c2godGhpcy5sb2FkQ3NzRmlsZSh1cmxzW2ldKSk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQGRlc2NyaXB0aW9uIExvYWRzIGNzcyBmaWxlIGR5bmFtaWNhbGx5IGZyb20gZ2l2ZW4gdXJsXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHVybCBUaGUgdXJsIGZyb20gd2hpY2ggY3NzIGZpbGUgd2lsbCBiZSBkeW5hbWljYWxseSBsb2FkZWQuXG4gICAgICovXG4gICAgbG9hZENzc0ZpbGU6IGZ1bmN0aW9uICh1cmwpIHtcbiAgICAgICAgcmV0dXJuICQoJzxsaW5rLz4nKS5hcHBlbmRUbygkKCdoZWFkJykpLmF0dHIoe1xuICAgICAgICAgICAgdHlwZTogJ3RleHQvY3NzJyxcbiAgICAgICAgICAgIHJlbDogJ3N0eWxlc2hlZXQnXG4gICAgICAgIH0pLmF0dHIoJ2hyZWYnLCB1cmwpOyAvLyBmb3IgaS5lLiA8OSwgaHJlZiBtdXN0IGJlIGFkZGVkIGFmdGVyIGxpbmsgaGFzIGJlZW4gYXBwZW5kZWQgdG8gaGVhZFxuICAgIH0sXG4gICAgLy8gYXJyYXkgdG8ga2VlcCB0cmFjayBvZiB0aGUgZHluYW1pY2FsbHkgbG9hZGVkIENTUyBmaWxlc1xuICAgIGxvYWRlZENzc0ZpbGVzOiBbXSxcblxuICAgIC8qKlxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBkZXNjcmlwdGlvbiBSZW1vdmVzIGFsbCBjc3MgZmlsZXMgd2hpY2ggd2VyZSBkeW5hbWljYWxseSBsb2FkZWRcbiAgICAgKi9cbiAgICBjbGVhckR5bmFtaWNDc3M6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGkgPSB0aGlzLmxvYWRlZENzc0ZpbGVzLmxlbmd0aDtcbiAgICAgICAgd2hpbGUgKDAgPiBpLS0pIHtcbiAgICAgICAgICAgICQodGhpcy5sb2FkZWRDc3NGaWxlc1tpXSkucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sb2FkZWRDc3NGaWxlcyA9IFtdO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQGRlc2NyaXB0aW9uIEV4dHJhY3RzIGFsbCBwYXJhbWV0ZXJzIGZyb20gYSBnaXZlbiBxdWVyeSBzdHJpbmcgaW50byBhbiBvYmplY3RcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcXMgVGhlIHF1ZXJ5IHN0cmluZyBmcm9tIHdoaWNoIHRoZSBwYXJhbWV0ZXJzIHdpbGwgYmUgZXh0cmFjdGVkXG4gICAgICovXG4gICAgZ2V0UXVlcnlTdHJpbmdQYXJhbXM6IGZ1bmN0aW9uIChxcykge1xuICAgICAgICBpZiAoIXFzIHx8IHFzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICB9XG4gICAgICAgIHZhciBwYXJhbXMgPSB7fSxcbiAgICAgICAgICAgIHVuZXNjYXBlZFFTID0gZGVjb2RlVVJJQ29tcG9uZW50KHFzKTtcbiAgICAgICAgLy8gVXNlIHRoZSBTdHJpbmc6OnJlcGxhY2UgbWV0aG9kIHRvIGl0ZXJhdGUgb3ZlciBlYWNoXG4gICAgICAgIC8vIG5hbWUtdmFsdWUgcGFpciBpbiB0aGUgc3RyaW5nLlxuICAgICAgICB1bmVzY2FwZWRRUy5yZXBsYWNlKG5ldyBSZWdFeHAoJyhbXj89Jl0rKSg9KFteJl0qKSk/JywgJ2cnKSxcbiAgICAgICAgICAgIGZ1bmN0aW9uICgkMCwgJDEsICQyLCAkMykge1xuICAgICAgICAgICAgICAgIHBhcmFtc1skMV0gPSAkMztcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHBhcmFtcztcbiAgICB9LFxuXG4gICAgZmlsbEFkZHJlc3NGaWVsZHM6IGZ1bmN0aW9uIChhZGRyZXNzLCAkZm9ybSkge1xuICAgICAgICBmb3IgKHZhciBmaWVsZCBpbiBhZGRyZXNzKSB7XG4gICAgICAgICAgICBpZiAoZmllbGQgPT09ICdJRCcgfHwgZmllbGQgPT09ICdVVUlEJyB8fCBmaWVsZCA9PT0gJ2tleScpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGlmIHRoZSBrZXkgaW4gYWRkcmVzcyBvYmplY3QgZW5kcyB3aXRoICdDb2RlJywgcmVtb3ZlIHRoYXQgc3VmZml4XG4gICAgICAgICAgICAvLyBrZXlzIHRoYXQgZW5kcyB3aXRoICdDb2RlJyBhcmUgcG9zdGFsQ29kZSwgc3RhdGVDb2RlIGFuZCBjb3VudHJ5Q29kZVxuICAgICAgICAgICAgJGZvcm0uZmluZCgnW25hbWUkPVwiJyArIGZpZWxkLnJlcGxhY2UoJ0NvZGUnLCAnJykgKyAnXCJdJykudmFsKGFkZHJlc3NbZmllbGRdKTtcbiAgICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgc3RhdGUgZmllbGRzXG4gICAgICAgICAgICBpZiAoZmllbGQgPT09ICdjb3VudHJ5Q29kZScpIHtcbiAgICAgICAgICAgICAgICAkZm9ybS5maW5kKCdbbmFtZSQ9XCJjb3VudHJ5XCJdJykudHJpZ2dlcignY2hhbmdlJyk7XG4gICAgICAgICAgICAgICAgLy8gcmV0cmlnZ2VyIHN0YXRlIHNlbGVjdGlvbiBhZnRlciBjb3VudHJ5IGhhcyBjaGFuZ2VkXG4gICAgICAgICAgICAgICAgLy8gdGhpcyByZXN1bHRzIGluIGR1cGxpY2F0aW9uIG9mIHRoZSBzdGF0ZSBjb2RlLCBidXQgaXMgYSBuZWNlc3NhcnkgZXZpbFxuICAgICAgICAgICAgICAgIC8vIGZvciBub3cgYmVjYXVzZSBzb21ldGltZXMgY291bnRyeUNvZGUgY29tZXMgYWZ0ZXIgc3RhdGVDb2RlXG4gICAgICAgICAgICAgICAgJGZvcm0uZmluZCgnW25hbWUkPVwic3RhdGVcIl0nKS52YWwoYWRkcmVzcy5zdGF0ZUNvZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAZGVzY3JpcHRpb24gVXBkYXRlcyB0aGUgbnVtYmVyIG9mIHRoZSByZW1haW5pbmcgY2hhcmFjdGVyXG4gICAgICogYmFzZWQgb24gdGhlIGNoYXJhY3RlciBsaW1pdCBpbiBhIHRleHQgYXJlYVxuICAgICAqL1xuICAgIGxpbWl0Q2hhcmFjdGVyczogZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCdmb3JtJykuZmluZCgndGV4dGFyZWFbZGF0YS1jaGFyYWN0ZXItbGltaXRdJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY2hhcmFjdGVyTGltaXQgPSAkKHRoaXMpLmRhdGEoJ2NoYXJhY3Rlci1saW1pdCcpO1xuICAgICAgICAgICAgdmFyIGNoYXJDb3VudEh0bWwgPSBTdHJpbmcuZm9ybWF0KFJlc291cmNlcy5DSEFSX0xJTUlUX01TRyxcbiAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9XCJjaGFyLXJlbWFpbi1jb3VudFwiPicgKyBjaGFyYWN0ZXJMaW1pdCArICc8L3NwYW4+JyxcbiAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9XCJjaGFyLWFsbG93ZWQtY291bnRcIj4nICsgY2hhcmFjdGVyTGltaXQgKyAnPC9zcGFuPicpO1xuICAgICAgICAgICAgdmFyIGNoYXJDb3VudENvbnRhaW5lciA9ICQodGhpcykubmV4dCgnZGl2LmNoYXItY291bnQnKTtcbiAgICAgICAgICAgIGlmIChjaGFyQ291bnRDb250YWluZXIubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgY2hhckNvdW50Q29udGFpbmVyID0gJCgnPGRpdiBjbGFzcz1cImNoYXItY291bnRcIi8+JykuaW5zZXJ0QWZ0ZXIoJCh0aGlzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjaGFyQ291bnRDb250YWluZXIuaHRtbChjaGFyQ291bnRIdG1sKTtcbiAgICAgICAgICAgIC8vIHRyaWdnZXIgdGhlIGtleWRvd24gZXZlbnQgc28gdGhhdCBhbnkgZXhpc3RpbmcgY2hhcmFjdGVyIGRhdGEgaXMgY2FsY3VsYXRlZFxuICAgICAgICAgICAgJCh0aGlzKS5jaGFuZ2UoKTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICB0cmltUHJlZml4OiBmdW5jdGlvbiAoc3RyLCBwcmVmaXgpIHtcbiAgICAgICAgcmV0dXJuIHN0ci5zdWJzdHJpbmcocHJlZml4Lmxlbmd0aCk7XG4gICAgfSxcbiAgICBjYXJkdHlwZToge1xuICAgICAgICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoJCgnI3BheW1lbnRtZXRob2RzJykuZmluZCgnLmNyZWRpdENhcmQtbnVtYmVyJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICQoJyNwYXltZW50bWV0aG9kcycpLmZpbmQoJy5jcmVkaXRDYXJkLW51bWJlcicpLmJpbmQoJ2tleXByZXNzIGtleXVwJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS52YWwoKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5jYXJkZXJyb3IuZXJyb3InKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCQodGhpcykudmFsKCkubGVuZ3RoIDwgNCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmNhcmR0eXBlaW1nID4gZGl2JykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgJCgnLmNyZWRpdENhcmQtbnVtYmVyLCAuY3JlZGl0Y2FyZF9jdm4nKS5vbigna2V5cHJlc3MnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICBlID0gKGUpID8gZSA6IHdpbmRvdy5ldmVudDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoYXJDb2RlID0gKGUud2hpY2gpID8gZS53aGljaCA6IGUua2V5Q29kZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoYXJDb2RlID4gMzEgJiYgKGNoYXJDb2RlIDwgNDggfHwgY2hhckNvZGUgPiA1NykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAkKCcjcGF5bWVudG1ldGhvZHMnKS5maW5kKCcuY3JlZGl0Q2FyZC1udW1iZXInKS5ibHVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbCA9ICQudHJpbSgkKHRoaXMpLnZhbCgpKTtcbiAgICAgICAgICAgICAgICAgICAgLy92YXIgcmVnZXggPSAvXlthLXpBLVpdKyQvO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZXJyb3JzcGFuID0gJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnc3Bhbi5jYXJkZXJyb3InKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yc3Bhbi5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKCcuY2FyZGVycm9yLmVycm9yJykubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5hcHBlbmQoJzxzcGFuIGNsYXNzPVwiY2FyZGVycm9yIGVycm9yXCI+Tm90IGEgdmFsaWQgQ3JlZGl0IENhcmQgTnVtYmVyLCBwbGVhc2UgdHJ5IGFnYWluLjwvc3Bhbj4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5jYXJkZXJyb3IuZXJyb3InKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2FyZFR5cGV2YWwgPSB1dGlsLnZhbGlkYXRlY2FyZHR5cGUodmFsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYXJkVHlwZXZhbCAhPSAnRXJyb3InKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JzcGFuLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjcGF5bWVudG1ldGhvZHMnKS5maW5kKCdzZWxlY3RbbmFtZSQ9XCJfcGF5bWVudE1ldGhvZHNfY3JlZGl0Q2FyZF90eXBlXCJdJykudmFsKGNhcmRUeXBldmFsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuY2FyZHR5cGVpbWcgPiBkaXYnKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmNhcmR0eXBlaW1nID4gZGl2LicgKyBjYXJkVHlwZXZhbCkuc2hvdygpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChjYXJkVHlwZXZhbCA9PSAnTWFzdGVyQ2FyZCcpIHx8IChjYXJkVHlwZXZhbCA9PSAnVmlzYScpIHx8IChjYXJkVHlwZXZhbCA9PSAnRGlzY292ZXInKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsLmxlbmd0aCA8IDE2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuY2FyZGVycm9yLmVycm9yJykuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnZXJyb3JjbGllbnQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2FyZFR5cGV2YWwgPT0gJ0FtZXgnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWwubGVuZ3RoIDwgMTUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5jYXJkZXJyb3IuZXJyb3InKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdlcnJvcmNsaWVudCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmNhcmRlcnJvci5lcnJvcicpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnZXJyb3JjbGllbnQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLnZhbCgpLmluZGV4T2YoJyonKSA9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsLmxlbmd0aCA8IDE2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuY2FyZGVycm9yLmVycm9yJykuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnZXJyb3JjbGllbnQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5jYXJkdHlwZWltZyA+IGRpdicpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoJCgnI3BheW1lbnRtZXRob2RzJykuZmluZCgnLmNyZWRpdENhcmQtbnVtYmVyJykudmFsKCkubGVuZ3RoIDwgNCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmNhcmR0eXBlaW1nID4gZGl2JykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuXG4gICAgfSxcbiAgICB2YWxpZGF0ZWNhcmR0eXBlOiBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSAnICcsXG4gICAgICAgICAgICBjYXJObyA9IHZhbDtcblxuICAgICAgICBpZiAoY2FyZHJlZ2V4Lm1hc3RlcmNhcmQudGVzdChjYXJObykpIHsvLyBmaXJzdCBjaGVjayBmb3IgTWFzdGVyQ2FyZFxuICAgICAgICAgICAgcmVzdWx0ID0gJ01hc3RlckNhcmQnO1xuICAgICAgICB9IGVsc2UgaWYgKGNhcmRyZWdleC52aXNhLnRlc3QoY2FyTm8pKSB7Ly8gdGhlbiBjaGVjayBmb3IgVmlzYVxuICAgICAgICAgICAgcmVzdWx0ID0gJ1Zpc2EnO1xuICAgICAgICB9IGVsc2UgaWYgKGNhcmRyZWdleC5hbWV4LnRlc3QoY2FyTm8pKSB7Ly8gdGhlbiBjaGVjayBmb3IgQW1FeFxuICAgICAgICAgICAgcmVzdWx0ID0gJ0FtZXgnO1xuICAgICAgICB9IGVsc2UgaWYgKGNhcmRyZWdleC5kaXNjb3Zlci50ZXN0KGNhck5vKSkge1xuICAgICAgICAgICAgcmVzdWx0ID0gJ0Rpc2NvdmVyJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdCA9ICdFcnJvcic7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBkZXNjcmlwdGlvbiBCaW5kcyB0aGUgb25jbGljay1ldmVudCB0byBhIGRlbGV0ZSBidXR0b24gb24gYSBnaXZlbiBjb250YWluZXIsXG4gICAgICogd2hpY2ggb3BlbnMgYSBjb25maXJtYXRpb24gYm94IHdpdGggYSBnaXZlbiBtZXNzYWdlXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGNvbnRhaW5lciBUaGUgbmFtZSBvZiBlbGVtZW50IHRvIHdoaWNoIHRoZSBmdW5jdGlvbiB3aWxsIGJlIGJpbmRcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBUaGUgbWVzc2FnZSB0aGUgd2lsbCBiZSBzaG93biB1cG9uIGEgY2xpY2tcbiAgICAgKi9cbiAgICBzZXREZWxldGVDb25maXJtYXRpb246IGZ1bmN0aW9uIChjb250YWluZXIsIG1lc3NhZ2UpIHtcbiAgICAgICAgJChjb250YWluZXIpLm9uKCdjbGljaycsICcuZGVsZXRlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5jb25maXJtKG1lc3NhZ2UpO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBkZXNjcmlwdGlvbiBTY3JvbGxzIGEgYnJvd3NlciB3aW5kb3cgdG8gYSBnaXZlbiB4IHBvaW50XG4gICAgICogQHBhcmFtIHtTdHJpbmd9IFRoZSB4IGNvb3JkaW5hdGVcbiAgICAgKi9cbiAgICBzY3JvbGxCcm93c2VyOiBmdW5jdGlvbiAoeExvY2F0aW9uKSB7XG4gICAgICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcbiAgICAgICAgICAgIHNjcm9sbFRvcDogeExvY2F0aW9uXG4gICAgICAgIH0sIDUwMCk7XG4gICAgfSxcblxuICAgIGlzTW9iaWxlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBtb2JpbGVBZ2VudEhhc2ggPSBbJ21vYmlsZScsICd0YWJsZXQnLCAncGhvbmUnLCAnaXBhZCcsICdpcG9kJywgJ2FuZHJvaWQnLCAnYmxhY2tiZXJyeScsICd3aW5kb3dzIGNlJywgJ29wZXJhIG1pbmknLCAncGFsbSddO1xuICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgdmFyIGlzTW9iaWxlID0gZmFsc2U7XG4gICAgICAgIHZhciB1c2VyQWdlbnQgPSAobmF2aWdhdG9yLnVzZXJBZ2VudCkudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICB3aGlsZSAobW9iaWxlQWdlbnRIYXNoW2lkeF0gJiYgIWlzTW9iaWxlKSB7XG4gICAgICAgICAgICBpc01vYmlsZSA9ICh1c2VyQWdlbnQuaW5kZXhPZihtb2JpbGVBZ2VudEhhc2hbaWR4XSkgPj0gMCk7XG4gICAgICAgICAgICBpZHgrKztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXNNb2JpbGU7XG4gICAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSB1dGlsO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgbmFQaG9uZSA9IC9eXFwoPyhbMi05XVswLThdWzAtOV0pXFwpP1tcXC1cXC4gXT8oWzItOV1bMC05XXsyfSlbXFwtXFwuIF0/KFswLTldezR9KShcXHMqeFswLTldKyk/JC87XG52YXIgcmVnZXggPSB7XG4gICAgcGhvbmU6IHtcbiAgICAgICAgdXM6IG5hUGhvbmUsXG4gICAgICAgIGNhOiBuYVBob25lLFxuICAgICAgICBmcjogL14wWzEtNl17MX0oKFswLTldezJ9KXs0fSl8KChcXHNbMC05XXsyfSl7NH0pfCgoLVswLTldezJ9KXs0fSkkLyxcbiAgICAgICAgaXQ6IC9eKChbMC05XXsyLDR9KShbLVxcc1xcL117MCwxfSkoWzAtOV17NCw4fSkpPyQvLFxuICAgICAgICBqcDogL14oMFxcZHsxLDR9LSA/KT9cXGR7MSw0fS1cXGR7NH0kLyxcbiAgICAgICAgY246IC8uKi8sXG4gICAgICAgIGdiOiAvXigoXFwoPzBcXGR7NH1cXCk/XFxzP1xcZHszfVxccz9cXGR7M30pfChcXCg/MFxcZHszfVxcKT9cXHM/XFxkezN9XFxzP1xcZHs0fSl8KFxcKD8wXFxkezJ9XFwpP1xccz9cXGR7NH1cXHM/XFxkezR9KSkoXFxzP1xcIyhcXGR7NH18XFxkezN9KSk/JC9cbiAgICB9LFxuICAgIHBvc3RhbDoge1xuICAgICAgICB1czogL15cXGR7NX0oLVxcZHs0fSk/JC8sXG4gICAgICAgIGNhOiAvXltBQkNFR0hKS0xNTlBSU1RWWFldezF9XFxkezF9W0EtWl17MX0gKlxcZHsxfVtBLVpdezF9XFxkezF9JC8sXG4gICAgICAgIGZyOiAvXihGLSk/KCgyW0F8Ql0pfFswLTldezJ9KVswLTldezN9JC8sXG4gICAgICAgIGl0OiAvXihbMC05XSl7NX0kLyxcbiAgICAgICAganA6IC9eKFswLTldKXszfVstXShbMC05XSl7NH0kLyxcbiAgICAgICAgY246IC9eKFswLTldKXs2fSQvLFxuICAgICAgICBnYjogL14oW0EtUFItVVdZWjAtOV1bQS1ISy1ZMC05XVtBRUhNTlBSVFZYWTAtOV0/W0FCRUhNTlBSVldYWTAtOV0/IHsxLDJ9WzAtOV1bQUJELUhKTE4tVVctWl17Mn18R0lSIDBBQSkkL1xuICAgIH0sXG4gICAgbm90Q0M6IC9eKD8hKChbMC05IC1dKXsxMywxOX0pKS4qJC9cbn07XG4vLyBnbG9iYWwgZm9ybSB2YWxpZGF0b3Igc2V0dGluZ3NcbnZhciBzZXR0aW5ncyA9IHtcbiAgICBlcnJvckNsYXNzOiAnZXJyb3JjbGllbnQnLFxuICAgIGVycm9yRWxlbWVudDogJ3NwYW4nLFxuICAgIGZvY3VzSW52YWxpZDogZmFsc2UsXG4gICAgb25rZXl1cDogZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNoZWNrYWJsZShlbGVtZW50KSkge1xuICAgICAgICAgICAgJChlbGVtZW50KS5hZGRDbGFzcygnc3RvcEtleXByZXNzJyk7XG4gICAgICAgICAgICBpZiAoJChlbGVtZW50KS52YWwoKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50KGVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCQoJy5hY2NvdW50LWxvZ3MnKS5sZW5ndGggPiAwIHx8ICQoJy5uZXctcmVnaXN0ZXInKS5sZW5ndGggPiAwIHx8ICQoJy53aXNoLWxvZ3MnKS5sZW5ndGggPiAwIHx8ICQoJy5mb3Jnb3Rfb2xkJykubGVuZ3RoID4gMCB8fCAkKCcuY3JlYXRlYW4tYWNjb3VudCcpLmxlbmd0aCA+IDAgfHwgJCgnLnByb21vLXNlYycpLmxlbmd0aCA+IDAgfHwgJCgnLmhlYWRlcmN1c3RvbWVyaW5mbycpLmxlbmd0aCA+IDAgfHwgJCgnLnVpLWxvZ2luJykubGVuZ3RoID4gMCB8fCAkKCcudmlwSW5zaWRlci1kbGcudWktZGlhbG9nICcpLmxlbmd0aCA+IDAgfHwgJCgnLnBhc3N3b3JkcmVzZXQnKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgJChlbGVtZW50KS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxhYmVsIHNwYW4nKS5yZW1vdmVDbGFzcygnaW5wdXRsYWJlbCcpO1xuICAgICAgICAgICAgICAgICQoJy5wcm9tby1zZWMnKS5maW5kKCcuY291cG9uaW5wdXQnKS5yZW1vdmVDbGFzcygnaW5wdXRsYWJlbCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcbiAgICAvL2ZvY3VzQ2xlYW51cDogZmFsc2UsXG4gICAgLy9vbmZvY3Vzb3V0OiBmYWxzZSxcblxuICAgIG9uZm9jdXNvdXQ6IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgIGlmICghdGhpcy5jaGVja2FibGUoZWxlbWVudCkpIHtcbiAgICAgICAgICAgICQoZWxlbWVudCkucmVtb3ZlQ2xhc3MoJ3N0b3BLZXlwcmVzcycpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50KGVsZW1lbnQpO1xuXG4gICAgICAgICAgICBpZiAoJCgnLmFjY291bnQtbG9ncycpLmxlbmd0aCA+IDAgfHwgJCgnLm5ldy1yZWdpc3RlcicpLmxlbmd0aCA+IDAgfHwgJCgnLndpc2gtbG9ncycpLmxlbmd0aCA+IDAgfHwgJCgnLmZvcmdvdF9vbGQnKS5sZW5ndGggPiAwIHx8ICQoJy5wYXNzd29yZHJlc2V0JykubGVuZ3RoID4gMCB8fCAkKCcudmlwSW5zaWRlci1kbGcudWktZGlhbG9nICcpLmxlbmd0aCA+IDAgfHwgJCgnLnByb21vLXNlYycpLmxlbmd0aCA+IDAgfHwgJCgnLnB0X2NoZWNrb3V0JykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGlmICgkKGVsZW1lbnQpLmhhc0NsYXNzKCdlcnJvcmNsaWVudCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICQoZWxlbWVudCkuY2xvc2VzdCgnLmZvcm0tcm93JykuYWRkQ2xhc3MoJ2lucHV0bGFiZWwnKTtcbiAgICAgICAgICAgICAgICAgICAgJChlbGVtZW50KS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuYWRkQ2xhc3MoJ2lucHV0bGFiZWwnKTtcbiAgICAgICAgICAgICAgICAgICAgJChlbGVtZW50KS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxhYmVsIHNwYW4nKS5hZGRDbGFzcygnaW5wdXRsYWJlbCcpO1xuICAgICAgICAgICAgICAgICAgICAkKGVsZW1lbnQpLmNsb3Nlc3QoJy5mb3JtLXJvdycpLmZpbmQoJy5sYWJlbCBzcGFuJykuYWRkQ2xhc3MoJ2lucHV0bGFiZWwnKTtcbiAgICAgICAgICAgICAgICAgICAgJChlbGVtZW50KS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxvZ2Vycm9yICwgLmV4aXN0aW5nX3JlZ2lzdGVyJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICQoZWxlbWVudCkuY2xvc2VzdCgnLmZvcm0tcm93JykucmVtb3ZlQ2xhc3MoJ2lucHV0bGFiZWwnKTtcbiAgICAgICAgICAgICAgICAgICAgJChlbGVtZW50KS5jbG9zZXN0KCcuZm9ybWZpZWxkJykucmVtb3ZlQ2xhc3MoJ2lucHV0bGFiZWwnKTtcbiAgICAgICAgICAgICAgICAgICAgJChlbGVtZW50KS5jbG9zZXN0KCcuZm9ybS1yb3cnKS5maW5kKCcubGFiZWwgc3BhbicpLnJlbW92ZUNsYXNzKCdpbnB1dGxhYmVsJyk7XG4gICAgICAgICAgICAgICAgICAgICQoZWxlbWVudCkuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5sYWJlbCBzcGFuJykucmVtb3ZlQ2xhc3MoJ2lucHV0bGFiZWwnKTtcbiAgICAgICAgICAgICAgICAgICAgJChlbGVtZW50KS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxvZ2Vycm9yICwgLmV4aXN0aW5nX3JlZ2lzdGVyJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKiogaWYoJChlbGVtZW50KS5jbG9zZXN0KCcudWktZGlhbG9nJykuaGFzQ2xhc3MoJ3ZpcEluc2lkZXItZGxnJykpIHtcblx0XHRcdFx0aWYoJChlbGVtZW50KS5oYXNDbGFzcyhcImVycm9yY2xpZW50XCIpKSB7XG5cdFx0XHRcdFx0aWYoJChlbGVtZW50KS5jbG9zZXN0KFwiLmZvcm1maWVsZFwiKS5maW5kKFwiLmxhYmVsIHNwYW4uZXJyb3JjbGllbnRcIikuaXMoJzp2aXNpYmxlJykpe1xuXHRcdFx0XHRcdFx0JChlbGVtZW50KS5jbG9zZXN0KFwiLmZvcm0tcm93XCIpLmFkZENsYXNzKFwiZXJyb3JvY2N1cmVkXCIpO1xuXHRcdFx0XHRcdH1lbHNlIHtcblx0XHRcdFx0XHRcdCQoZWxlbWVudCkuY2xvc2VzdChcIi5mb3JtLXJvd1wiKS5yZW1vdmVDbGFzcyhcImVycm9yb2NjdXJlZFwiKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0gKioqL1xuICAgICAgICB9XG4gICAgfSxcbiAgICBlcnJvclBsYWNlbWVudDogZnVuY3Rpb24gKGVycm9yLCBlbGVtZW50KSB7XG4gICAgICAgIGlmICgkKGVsZW1lbnQpLmhhc0NsYXNzKCdlcnJvcmNsaWVudCcpKSB7XG4gICAgICAgICAgICAkKGVsZW1lbnQpLmNsb3Nlc3QoJy5mb3JtLXJvdycpLmFkZENsYXNzKCdpbnB1dGxhYmVsJyk7XG4gICAgICAgICAgICAkKGVsZW1lbnQpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5hZGRDbGFzcygnaW5wdXRsYWJlbCcpO1xuICAgICAgICAgICAgJChlbGVtZW50KS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxhYmVsIHNwYW4nKS5hZGRDbGFzcygnaW5wdXRsYWJlbCcpO1xuICAgICAgICAgICAgJChlbGVtZW50KS5jbG9zZXN0KCcuZm9ybS1yb3cnKS5maW5kKCcubGFiZWwgc3BhbicpLmFkZENsYXNzKCdpbnB1dGxhYmVsJyk7XG4gICAgICAgICAgICAkKGVsZW1lbnQpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcubG9nZXJyb3IgLCAuZXhpc3RpbmdfcmVnaXN0ZXInKS5oaWRlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKGVsZW1lbnQpLmNsb3Nlc3QoJy5mb3JtLXJvdycpLnJlbW92ZUNsYXNzKCdpbnB1dGxhYmVsJyk7XG4gICAgICAgICAgICAkKGVsZW1lbnQpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5yZW1vdmVDbGFzcygnaW5wdXRsYWJlbCcpO1xuICAgICAgICAgICAgJChlbGVtZW50KS5jbG9zZXN0KCcuZm9ybS1yb3cnKS5maW5kKCcubGFiZWwgc3BhbicpLnJlbW92ZUNsYXNzKCdpbnB1dGxhYmVsJyk7XG4gICAgICAgICAgICAkKGVsZW1lbnQpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcubGFiZWwgc3BhbicpLnJlbW92ZUNsYXNzKCdpbnB1dGxhYmVsJyk7XG4gICAgICAgICAgICAkKGVsZW1lbnQpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcubG9nZXJyb3IgLCAuZXhpc3RpbmdfcmVnaXN0ZXInKS5oaWRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCQoZWxlbWVudCkuaGFzQ2xhc3MoJ2VtYWlsZm9vdGVyJykpIHtcbiAgICAgICAgICAgICQoZWxlbWVudCkuY2xvc2VzdCgnI2VtYWlsZm9vdGVyJykuYmVmb3JlKGVycm9yKTtcbiAgICAgICAgfSBlbHNlIGlmICgkKGVsZW1lbnQpLmNsb3Nlc3QoJy51aS1kaWFsb2cnKS5oYXNDbGFzcygndmlwSW5zaWRlci1kbGcnKSkge1xuICAgICAgICAgICAgJChlbGVtZW50KS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxhYmVsJykuYXBwZW5kKGVycm9yKTtcbiAgICAgICAgICAgIGlmICgkKGVsZW1lbnQpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcubGFiZWwgc3Bhbi5lcnJvcmNsaWVudCcpLmlzKCc6dmlzaWJsZScpICYmICEoJChlbGVtZW50KS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxhYmVsJykuaGFzQ2xhc3MoJ2Vycm9yb2NjdXJlZCcpKSkge1xuICAgICAgICAgICAgICAgICQoZWxlbWVudCkuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5sYWJlbCcpLmFkZENsYXNzKCdlcnJvcm9jY3VyZWQnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJChlbGVtZW50KS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxhYmVsJykucmVtb3ZlQ2xhc3MoJ2Vycm9yb2NjdXJlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKCQoJy5wYXNzd29yZHJlc2V0JykuZmluZCgnYnV0dG9uLnNlbmQuY2xpY2tlZEJ1dHRvbicpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAkKGVsZW1lbnQpLmFmdGVyKGVycm9yKTtcbiAgICAgICAgICAgICAgICAkKCcucGFzc3dvcmRyZXNldCcpLmZpbmQoJ2J1dHRvbi5zZW5kLmNsaWNrZWRCdXR0b24nKS5yZW1vdmVDbGFzcygnY2xpY2tlZEJ1dHRvbicpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoJCgnLmhlYWRlci1mb3Jnb3QtcHdkLmFjY291bnRjb250ZW50JykuY3NzKCdkaXNwbGF5JykgPT0gJ25vbmUnKSB7XG4gICAgICAgICAgICAgICAgICAgICQoZWxlbWVudCkuYWZ0ZXIoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJCgnLmhlYWRlci1mb3Jnb3QtcHdkLmFjY291bnRjb250ZW50JykuY3NzKCdkaXNwbGF5JykgPT0gJ2Jsb2NrJykge1xuICAgICAgICAgICAgICAgICAgICAvLyBEbyBOb3RoaW5nXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQoZWxlbWVudCkuaGFzQ2xhc3MoJ2N1c3RvbS1zZWxlY3Qtd3JhcCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKGVsZW1lbnQpLmNsb3Nlc3QoJy5maWVsZC13cmFwcGVyJykuYWZ0ZXIoZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgJChlbGVtZW50KS5hZnRlcihlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG4vL2ZpcnN0bmFtZSB2YWxpZGF0aW9uXG52YXIgY3RybCA9IGZhbHNlO1xudmFyIHNlbGVjdFRleHQgPSBmYWxzZTtcbiQoJ2lucHV0W2F0dHJpYnV0ZW1heGxlbmd0aF0sdGV4dGFyZWFbYXR0cmlidXRlbWF4bGVuZ3RoXScpLm9uKCdrZXlkb3duJywgZnVuY3Rpb24gKGUpIHtcbiAgICAvL3ZhciBqO1xuICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdmaXJzdG5hbWUnKSkge1xuICAgICAgICAvL2ogPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZHdmcm1fcHJvZmlsZV9jdXN0b21lcl9maXJzdG5hbWUnKTtcbiAgICB9IGVsc2UgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ2xhc3RuYW1lJykpIHtcbiAgICAgICAgLy9qID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2R3ZnJtX3Byb2ZpbGVfY3VzdG9tZXJfbGFzdG5hbWUnKTtcbiAgICB9XG4gICAgaWYgKGUua2V5Q29kZSA9PSAxNykge1xuICAgICAgICBjdHJsID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoKCQodGhpcykuaGFzQ2xhc3MoJ3ZpcC10ZXh0YXJlYScpICYmIGUua2V5Q29kZSAhPSA4ICYmIGUua2V5Q29kZSAhPSA0NiAmJiAhc2VsZWN0VGV4dCkgfHwgKCgoZS5rZXlDb2RlID49IDQ4ICYmIGUua2V5Q29kZSA8PSA5MCkgfHwgKGUua2V5Q29kZSA+PSA5NiAmJiBlLmtleUNvZGUgPD0gMTA1KSkgJiYgIWN0cmwgJiYgIXNlbGVjdFRleHQpKSB7XG4gICAgICAgIHZhciBjdXJyT2JqID0gJCh0aGlzKTtcbiAgICAgICAgdmFyIG1heGNoYXJzID0gJCh0aGlzKS5hdHRyKCdtYXhsZW5ndGgnKTtcbiAgICAgICAgdmFyIHRsZW5ndGggPSAkKHRoaXMpLnZhbCgpLmxlbmd0aDtcbiAgICAgICAgaWYgKHRsZW5ndGggPj0gbWF4Y2hhcnMpIHtcbiAgICAgICAgICAgICQodGhpcykudmFsKCQodGhpcykudmFsKCkuc3Vic3RyaW5nKDAsIG1heGNoYXJzKSk7XG4gICAgICAgICAgICBpZiAoJChjdXJyT2JqKS5jbG9zZXN0KCcuZmllbGQtd3JhcHBlcicpLmZpbmQoJy5tYXgtbGVuZ3RoLWVycm9yJykubGVuZ3RoID09IDAgJiYgJChjdXJyT2JqKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLm1heC1sZW5ndGgtZXJyb3InKS5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICc8ZGl2IGNsYXNzPVxcJ21heC1sZW5ndGgtZXJyb3JcXCc+IFRoaXMgZmllbGQgaXMgbGltaXRlZCB0byAzMCBjaGFyYWN0ZXJzLjwvZGl2Pic7XG4gICAgICAgICAgICAgICAgaWYgKCQoY3Vyck9iaikuaGFzQ2xhc3MoJ3ZpcC10ZXh0YXJlYScpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yID0gJzxkaXYgY2xhc3M9XFwnbWF4LWxlbmd0aC1lcnJvclxcJz4gLVRoaXMgZmllbGQgaXMgbGltaXRlZCB0byAxMjAwIGNoYXJhY3RlcnMuPC9kaXY+JztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCQoY3Vyck9iaikuaGFzQ2xhc3MoJ3ZpcC10ZXh0YXJlYTEnKSkge1xuICAgICAgICAgICAgICAgICAgICBlcnJvciA9ICc8ZGl2IGNsYXNzPVxcJ21heC1sZW5ndGgtZXJyb3JcXCc+IC1UaGlzIGZpZWxkIGlzIGxpbWl0ZWQgdG8gMzAgY2hhcmFjdGVycy48L2Rpdj4nO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJChjdXJyT2JqKS5jbG9zZXN0KCdmb3JtJykuaGFzQ2xhc3MoJ3ZpcGZpZWxkc3RhZmYnKSkge1xuICAgICAgICAgICAgICAgICAgICBlcnJvciA9ICc8ZGl2IGNsYXNzPVxcJ21heC1sZW5ndGgtZXJyb3JcXCc+IC1UaGlzIGZpZWxkIGlzIGxpbWl0ZWQgdG8gMzAgY2hhcmFjdGVycy48L2Rpdj4nO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmNsb3Nlc3QoJ2Zvcm0nKS5oYXNDbGFzcygndmlwZmllbGRzdGFmZicpID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcubGFiZWwnKS5hcHBlbmQoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZpZWxkLXdyYXBwZXInKS5hcHBlbmQoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5sYWJlbCBzcGFuJykuYWRkQ2xhc3MoJ2NvdW50bGFiZWxlcnJvcicpO1xuICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2NvdW50ZXJyb3InKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5rZXlDb2RlICE9IDkpIHtcbiAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5jbG9zZXN0KCdmb3JtJykuaGFzQ2xhc3MoJ3ZpcGZpZWxkc3RhZmYnKSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxhYmVsJykuZmluZCgnLm1heC1sZW5ndGgtZXJyb3InKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZpZWxkLXdyYXBwZXInKS5maW5kKCcubWF4LWxlbmd0aC1lcnJvcicpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2NvdW50ZXJyb3InKTtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcubGFiZWwgc3BhbicpLmFkZENsYXNzKCdjb3VudGxhYmVsZXJyb3InKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdjb3VudGVycm9yJyk7XG4gICAgICAgICAgICAkKCcubWF4LWxlbmd0aC1lcnJvcicpLnJlbW92ZSgpO1xuICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxhYmVsIHNwYW4nKS5yZW1vdmVDbGFzcygnY291bnRsYWJlbGVycm9yJyk7XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKChlLmtleUNvZGUgPj0gNDggJiYgZS5rZXlDb2RlIDw9IDU3KSB8fCAoZS5rZXlDb2RlID49IDk2ICYmIGUua2V5Q29kZSA8PSAxMDUpKSB7XG4gICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCd2aXBpbnNpZGVyZW1haWwnKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb3JtZmllbGQnKS5maW5kKCcubWF4LWxlbmd0aC1lcnJvcicpLnJlbW92ZSgpO1xuICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdjb3VudGVycm9yJyk7XG4gICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5sYWJlbCBzcGFuJykucmVtb3ZlQ2xhc3MoJ2NvdW50bGFiZWxlcnJvcicpO1xuICAgICAgICBzZWxlY3RUZXh0ID0gZmFsc2U7XG4gICAgfVxuXG59KS5vbigna2V5dXAnLCBmdW5jdGlvbiAoKSB7XG4gICAgY3RybCA9IGZhbHNlO1xuICAgIC8vdmFyIGN1cnJPYmogPSAkKHRoaXMpO1xuICAgIHZhciBtYXhjaGFycyA9ICQodGhpcykuYXR0cignbWF4bGVuZ3RoJyk7XG4gICAgdmFyIHRsZW5ndGggPSAkKHRoaXMpLnZhbCgpLmxlbmd0aDtcbiAgICBpZiAodGxlbmd0aCA8IG1heGNoYXJzKSB7XG4gICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2NvdW50ZXJyb3InKTtcbiAgICAgICAgJCgnLm1heC1sZW5ndGgtZXJyb3InKS5yZW1vdmUoKTtcbiAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxhYmVsIHNwYW4nKS5yZW1vdmVDbGFzcygnY291bnRsYWJlbGVycm9yJyk7XG4gICAgfVxufSkub24oJ3NlbGVjdCcsIGZ1bmN0aW9uICgpIHtcbiAgICBzZWxlY3RUZXh0ID0gdHJ1ZTtcbiAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdjb3VudGVycm9yJyk7XG4gICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxhYmVsIHNwYW4nKS5yZW1vdmVDbGFzcygnY291bnRsYWJlbGVycm9yJyk7XG59KTtcbiQoJ2lucHV0W2F0dHJpYnV0ZW1heGxlbmd0aF0sdGV4dGFyZWFbYXR0cmlidXRlbWF4bGVuZ3RoXScpLm9uKCdmb2N1c291dCcsIGZ1bmN0aW9uICgpIHtcbiAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdjb3VudGVycm9yJyk7XG4gICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLmxhYmVsIHNwYW4nKS5yZW1vdmVDbGFzcygnY291bnRsYWJlbGVycm9yJyk7XG4gICAgJCh0aGlzKS5jbG9zZXN0KCcuZmllbGQtd3JhcHBlcicpLmZpbmQoJy5tYXgtbGVuZ3RoLWVycm9yJykucmVtb3ZlKCk7XG4gICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9ybWZpZWxkJykuZmluZCgnLm1heC1sZW5ndGgtZXJyb3InKS5yZW1vdmUoKTtcbiAgICAvLyQodGhpcykuY2xvc2VzdCgnLmZvcm1maWVsZCcpLmZpbmQoJy5sYWJlbCBzcGFuJykucmVtb3ZlQ2xhc3MoJ2lucHV0bGFiZWwnKTtcbn0pO1xuaWYgKCQoJy5sb2dpbmZhaWxlZGNsYXNzOnZpc2libGUnKS5sZW5ndGggPiAwKSB7XG4gICAgJCgnLnJlZ2lzdHJhdGlvbiAuZm9ybWZpZWxkX2VtYWlsJykuZmluZCgnLmxhYmVsdGV4dCcpLnJlbW92ZUNsYXNzKCdpbnB1dGxhYmVsJyk7XG4gICAgJCgnLnJlZ2lzdHJhdGlvbiAuZm9ybWZpZWxkX2VtYWlsJykuZmluZCgnLnJlcXVpcmVkaW5kaWNhdG9yJykucmVtb3ZlQ2xhc3MoJ2lucHV0bGFiZWwnKTtcbiAgICAkKCcucmVnaXN0cmF0aW9uIC5mb3JtZmllbGRfZW1haWwnKS5maW5kKCcucmVxdWlyZWRpbmRpY2F0b3InKS5yZW1vdmVDbGFzcygnaW5wdXRsYWJlbCcpO1xuICAgICQoJy5yZWdpc3RyYXRpb24gLmZvcm1maWVsZF9lbWFpbCcpLmZpbmQoJy5leGlzdGluZ19yZWdpc3RlcicpLmhpZGUoKTtcbn1cblxuLy8kKFwiYm9keVwiKS5vbignY2hhbmdlIGlucHV0JyxcIi5hY2NvdW50ZW1haWwgLCAuZ3Vlc3RlbWFpbCwgLmVtYWlsQ01yYXBhbGEsIC5ndWVzdGVtYWlsY29uLCAudmlwaW5zaWRlcmVtYWlsLCAuZW1haWxmb290ZXIsIC5hY2NvdW50ZW1haWxjb25mLCAuYWNjb3VudEVtYWlsQ29uZmlybWF0aW9uLCAucmVzZXRlbWFpbCwgLmFjY2VtYWlsY29uLCAubG9nZ2VkZW1haWxcIiwgZnVuY3Rpb24gKGUpIHtcbi8vXHQvLyQodGhpcykudmFsKHRoaXMudmFsdWUucmVwbGFjZSgvW1xcc10vZywgJycpKTtcbi8vXG4vL30pO1xuJCgnLmFjY291bnRlbWFpbCAsIC5ndWVzdGVtYWlsLCAuZW1haWxDTXJhcGFsYSwgLmd1ZXN0ZW1haWxjb24sIC52aXBpbnNpZGVyZW1haWwsIC5lbWFpbGZvb3RlciwgLmFjY291bnRlbWFpbGNvbmYsIC5hY2NvdW50RW1haWxDb25maXJtYXRpb24sIC5yZXNldGVtYWlsLCAuYWNjZW1haWxjb24sIC5sb2dnZWRlbWFpbCcpLm9uKHtcbiAgICBrZXlkb3duOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICBpZiAoZS53aGljaCA9PT0gMzIpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgY2hhbmdlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnJlcGxhY2UoL1xccy9nLCAnJyk7XG4gICAgfVxufSk7XG4vL292ZXJyaWRlIGRlZmF1bHQgcmVxdWlyZWQgZmllbGQgbWVzc2FnZVxuJC52YWxpZGF0b3IubWVzc2FnZXMucmVxdWlyZWQgPSBmdW5jdGlvbiAoJDEsIGVsZSkge1xuICAgIHZhciByZXF1aXJlZFRleHQgPSAkKGVsZSkuY2xvc2VzdCgnLmZvcm0tcm93JykuYXR0cihcbiAgICAgICAgJ2RhdGEtcmVxdWlyZWQtdGV4dCcpO1xuICAgIHJldHVybiByZXF1aXJlZFRleHQgfHwgJyc7XG59O1xuXG4vKipcbiAqIEFkZCBwaG9uZSB2YWxpZGF0aW9uIG1ldGhvZCB0byAkIHZhbGlkYXRpb24gcGx1Z2luLiBUZXh0XG4gKiBmaWVsZHMgbXVzdCBoYXZlICdwaG9uZScgY3NzIGNsYXNzIHRvIGJlIHZhbGlkYXRlZCBhcyBwaG9uZVxuICogcGhvbmVVUyBpcyBjb3BpZWQgZnJvbVxuICogaHR0cDovL2RvY3MuJC5jb20vUGx1Z2lucy9WYWxpZGF0aW9uL0N1c3RvbU1ldGhvZHMvcGhvbmVVU1xuICovXG4kLnZhbGlkYXRvclxuICAgIC5hZGRNZXRob2QoXG4gICAgICAgICdwaG9uZScsXG4gICAgICAgIGZ1bmN0aW9uIChwaG9uZU51bWJlciwgZWxlbWVudCkge1xuICAgICAgICAgICAgaWYgKCQoZWxlbWVudCkuaGFzQ2xhc3MoJ3N0b3BLZXlwcmVzcycpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGZpbmQgb3V0IHRoZSBjb3VudHJ5IGNvZGVcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9ICQoZWxlbWVudCkuZGF0YSgnZGF0YScpO1xuICAgICAgICAgICAgICAgIHZhciBjb3VudHJ5ID0gKGRhdGEgJiYgZGF0YS5jb3VudHJ5ICYmIGRhdGEuY291bnRyeSAhPSAnJykgPyBkYXRhLmNvdW50cnkgOiAnVVMnOyAvLyBkZWZhdWx0IHRvIFVTIHBob25lXG4gICAgICAgICAgICAgICAgLy8gdmFsaWRhdGlvblxuXG4gICAgICAgICAgICAgICAgLy8gcHJlc2VydmUgdGhpcyBpbnN0YW5jZVxuICAgICAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcblxuICAgICAgICAgICAgICAgIC8vIGNvdW50cnkgc3BlY2lmaWMgcGhvbmUgdmFsaWRhdGlvbiBoYW5kbGVyc1xuICAgICAgICAgICAgICAgIC8vdmFyIHBob25lVVMsIHBob25lQ0E7XG5cbiAgICAgICAgICAgICAgICB2YXIgcGhvbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHBob25lTnVtYmVyID0gcGhvbmVOdW1iZXIucmVwbGFjZSgvXFxzKy9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGF0Lm9wdGlvbmFsKGVsZW1lbnQpIHx8IHBob25lTnVtYmVyLmxlbmd0aCA+IDkgJiYgcGhvbmVOdW1iZXIubWF0Y2goL14oXFxkezEwfXxcXGR7M30oLVxcZHszfSkoLVxcZHs0fSkkfF5cXGR7M30oXFxzXFxkezN9KT8oXFxzXFxkezR9KT8pJC8pO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgLy9waG9uZVVTID0gcGhvbmVDQTtcbiAgICAgICAgICAgICAgICAvL3dpbmRvdy5ldmFsKCd2YXIgcGhvbmVIYW5kbGVyID0gKHR5cGVvZiBwaG9uZScgKyBjb3VudHJ5ICsgJyAhPSBcXCd1bmRlZmluZWRcXCcpID8gcGhvbmUnICsgY291bnRyeSArICc6IG51bGw7Jyk7XG5cbiAgICAgICAgICAgICAgICAvLyBjYWxsIHRoZSBjb3VudHJ5IHNwZWNpZmljIHBob25lIHZhbGlkYXRpb25cbiAgICAgICAgICAgICAgICAvLyBoYW5kbGVyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvdW50cnkgPT09ICdVUycgfHwgY291bnRyeSA9PT0gJ0NBJyA/IHBob25lKCkgOiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBSZXNvdXJjZXMuSU5WQUxJRF9QSE9ORSk7XG5cbiQudmFsaWRhdG9yLmFkZE1ldGhvZCgncGhvbmVDRFVTJywgZnVuY3Rpb24gKHBob25lTnVtYmVyLCBlbGVtZW50KSB7XG4gICAgaWYgKCQoZWxlbWVudCkuaGFzQ2xhc3MoJ3N0b3BLZXlwcmVzcycpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHBob25lTnVtYmVyID0gcGhvbmVOdW1iZXIucmVwbGFjZSgvXFxzKy9nLCAnJyk7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbmFsKGVsZW1lbnQpIHx8IHBob25lTnVtYmVyLmxlbmd0aCA+IDkgJiYgcGhvbmVOdW1iZXJcbiAgICAgICAgICAgIC5tYXRjaCgvXlxcKD9bXFxkXXszfVxcKT9bXFxzLV0/W1xcZF17M31bXFxzLV0/W1xcZF17NH0kLyk7XG4gICAgfVxufSwgJ1BsZWFzZSBzcGVjaWZ5IGEgdmFsaWQgcGhvbmUgbnVtYmVyJyk7XG5cbiQudmFsaWRhdG9yLmFkZE1ldGhvZCgncGhvbmUnLCBmdW5jdGlvbiAocGhvbmVOdW1iZXIsIGVsZW1lbnQpIHtcbiAgICBpZiAoJChlbGVtZW50KS5oYXNDbGFzcygnc3RvcEtleXByZXNzJykpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcGhvbmVOdW1iZXIgPSBwaG9uZU51bWJlci5yZXBsYWNlKC9cXHMrL2csICcnKTtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9uYWwoZWxlbWVudCkgfHwgcGhvbmVOdW1iZXIubGVuZ3RoID4gOSAmJiBwaG9uZU51bWJlclxuICAgICAgICAgICAgLm1hdGNoKC9eXFwoP1tcXGRdezN9XFwpP1tcXHMtXT9bXFxkXXszfVtcXHMtXT9bXFxkXXs0fSQvKTtcbiAgICB9XG59LCAnUGxlYXNlIHNwZWNpZnkgYSB2YWxpZCBwaG9uZSBudW1iZXInKTtcblxuJC52YWxpZGF0b3IuYWRkTWV0aG9kKCdwaG9uZVVLJywgZnVuY3Rpb24gKHBob25lTnVtYmVyLCBlbGVtZW50KSB7XG4gICAgaWYgKCQoZWxlbWVudCkuaGFzQ2xhc3MoJ3N0b3BLZXlwcmVzcycpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbmFsKGVsZW1lbnQpIHx8IHBob25lTnVtYmVyLmxlbmd0aCA+IDkgJiYgcGhvbmVOdW1iZXJcbiAgICAgICAgICAgIC5tYXRjaCgvXihcXCg/KDB8XFwrNDQpWzEtOV17MX1cXGR7MSw0fT9cXCk/XFxzP1xcZHszLDR9XFxzP1xcZHszLDR9KSQvKTtcbiAgICB9XG59LCAnUGxlYXNlIHNwZWNpZnkgYSB2YWxpZCBwaG9uZSBudW1iZXInKTtcblxuJC52YWxpZGF0b3IuYWRkTWV0aG9kKCdwb3N0YWwnLCBmdW5jdGlvbiAodmFsdWUsIGVsZW1lbnQpIHtcbiAgICBpZiAoJChlbGVtZW50KS5oYXNDbGFzcygnc3RvcEtleXByZXNzJykpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHZhbHVlID09ICcnKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKC9eXFxkezV9KCgtXFxkezR9KXwoXFxkezR9KSk/JC8pLnRlc3QodmFsdWUpO1xuICAgIH1cbn0sICdQbGVhc2UgZW50ZXIgeW91ciA1IG9yIDkgZGlnaXQgWmlwIENvZGUgd2l0aCBvciB3aXRob3V0IGEgaHlwaGVuJyk7XG5cbiQudmFsaWRhdG9yLmFkZE1ldGhvZCgnemlwQ29kZUN1c3RvbScsIGZ1bmN0aW9uICh2YWx1ZSwgZWxlbWVudCkge1xuICAgIGlmICgkKGVsZW1lbnQpLmhhc0NsYXNzKCdzdG9wS2V5cHJlc3MnKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodmFsdWUgPT0gJycpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoL15cXGR7NX0oKC1cXGR7NH0pfChcXGR7NH0pKT8kLykudGVzdCh2YWx1ZSk7XG4gICAgfVxufSwgJy0gUGxlYXNlIGVudGVyIGEgdmFsaWQgWmlwQ29kZScpO1xuXG4kLnZhbGlkYXRvci5hZGRNZXRob2QoJ3Bob25lQ3VzdG9tJywgZnVuY3Rpb24gKHBob25lTnVtYmVyLCBlbGVtZW50KSB7XG4gICAgaWYgKCQoZWxlbWVudCkuaGFzQ2xhc3MoJ3N0b3BLZXlwcmVzcycpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHBob25lTnVtYmVyID0gcGhvbmVOdW1iZXIucmVwbGFjZSgvXFxzKy9nLCAnJyk7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbmFsKGVsZW1lbnQpIHx8IHBob25lTnVtYmVyLmxlbmd0aCA+IDkgJiYgcGhvbmVOdW1iZXJcbiAgICAgICAgICAgIC5tYXRjaCgvXlxcKD9bXFxkXXszfVxcKT9bXFxzLV0/W1xcZF17M31bXFxzLV0/W1xcZF17NH0kLyk7XG4gICAgfVxufSwgJy0gUGxlYXNlIHNwZWNpZnkgYSB2YWxpZCBwaG9uZSBudW1iZXInKTtcblxuJC52YWxpZGF0b3IuYWRkTWV0aG9kKCdlbWFpbENNJywgZnVuY3Rpb24gKHZhbHVlLCBlbGVtZW50KSB7XG4gICAgaWYgKCQoZWxlbWVudCkuaGFzQ2xhc3MoJ3N0b3BLZXlwcmVzcycpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh2YWx1ZSA9PSAnJykge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICgvXltcXHctXFwuXXsxLH1cXEAoW1xcZGEtekEtWi1dezEsfVxcLil7MSx9W1xcZGEtekEtWi1dezIsNH0kLykudGVzdCh2YWx1ZSk7XG4gICAgfVxufSwgJ1BsZWFzZSBzcGVjaWZ5IGEgdmFsaWQgRW1haWwgSWQnKTtcblxudmFyIGN1c3RvbUVycm9ybXNnID0gJyc7XG52YXIgY3VzdG9tRXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGN1c3RvbUVycm9ybXNnO1xufTtcblxuJC52YWxpZGF0b3IuYWRkTWV0aG9kKCdlbWFpbENNcmFwYWxhJywgZnVuY3Rpb24gKHZhbHVlLCBlbGVtZW50KSB7XG4gICAgaWYgKCQoZWxlbWVudCkuaGFzQ2xhc3MoJ3N0b3BLZXlwcmVzcycpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciB2SW5kZXggPSB2YWx1ZS5sZW5ndGg7XG4gICAgICAgIHZhciBmY2hhciA9IHZhbHVlLnN1YnN0cmluZygwLCAxKTtcbiAgICAgICAgdmFyIGxjaGFyID0gdmFsdWUuc3Vic3RyaW5nKHZJbmRleCAtIDEpO1xuICAgICAgICBpZiAodmFsdWUuaW5kZXhPZignQCcpICE9IC0xKSB7XG4gICAgICAgICAgICB2YXIgc3BsaXR2YWwgPSB2YWx1ZS5zcGxpdCgnQCcpO1xuICAgICAgICAgICAgZmNoYXIgPSBzcGxpdHZhbFswXS5zdWJzdHJpbmcoMCwgMSk7XG4gICAgICAgICAgICBsY2hhciA9IHNwbGl0dmFsWzBdLnN1YnN0cmluZyhzcGxpdHZhbFswXS5sZW5ndGggLSAxKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZmNoYXJTID0gKC9eW2EtekEtWjAtOV0kLykudGVzdChmY2hhcik7XG4gICAgICAgIHZhciBsY2hhclMgPSAoL15bYS16QS1aMC05XSQvKS50ZXN0KGxjaGFyKTtcbiAgICAgICAgdmFyIGVtYWlsQ2hlY2sgPSAoL15bLTAtOWEtekEtWi4tX10rQCgoXFxbWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcXSl8KChbYS16QS1aXFwtMC05XStcXC4pK1thLXpBLVpdezIsfSkpJC8pLnRlc3QodmFsdWUpO1xuICAgICAgICBpZiAoKGZjaGFyUyA9PSBmYWxzZSkgfHwgKGxjaGFyUyA9PSBmYWxzZSkpIHtcbiAgICAgICAgICAgIGN1c3RvbUVycm9ybXNnID0gJy1Tb21ldGhpbmcgZG9lc25cXCd0IGxvb2sgcmlnaHQsIHBsZWFzZSB0cnkgYWdhaW4uJztcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSBlbHNlIGlmIChlbWFpbENoZWNrID09IGZhbHNlKSB7XG4gICAgICAgICAgICBjdXN0b21FcnJvcm1zZyA9ICdPb3BzIC0gdGhlIGVtYWlsIGVudGVyZWQgaXMgbm90IGluIGEgdmFsaWQgZm9ybWF0Lic7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbn0sIGN1c3RvbUVycm9yKTtcblxuJC52YWxpZGF0b3IuYWRkTWV0aG9kKCdjcmVkaXRjYXJkX25hbWUnLCBmdW5jdGlvbiAodmFsdWUsIGVsZW1lbnQpIHtcbiAgICBpZiAoJChlbGVtZW50KS5oYXNDbGFzcygnc3RvcEtleXByZXNzJykpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHZhbHVlID09ICcnKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKC9eW2EtekEtWiBdKyQvKS50ZXN0KHZhbHVlKTtcbiAgICB9XG59LCAnT25seSBsZXR0ZXJzIGFyZSB2YWxpZCBmb3IgdGhpcyBmaWVsZCcpO1xuXG4kLnZhbGlkYXRvci5hZGRNZXRob2QoJ2NyZWRpdGNhcmRfY3ZuJywgZnVuY3Rpb24gKHZhbHVlLCBlbGVtZW50KSB7XG4gICAgaWYgKCQoZWxlbWVudCkuaGFzQ2xhc3MoJ3N0b3BLZXlwcmVzcycpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG5cbiAgICAgICAgdmFyIGNhcmR0eXBlID0gJCgnLnNlbGVjdC1jcmVkaXRDYXJkLXR5cGUnKS52YWwoKTtcbiAgICAgICAgdmFyIGN2dkxlbmd0aCA9IDM7XG4gICAgICAgIGlmICh2YWx1ZSA9PSAnJykge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNhcmR0eXBlID09ICdBbWV4Jykge1xuICAgICAgICAgICAgY3Z2TGVuZ3RoID0gNDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKHZhbHVlLmxlbmd0aCAhPSBjdnZMZW5ndGgpKSB7XG4gICAgICAgICAgICAkKCcuZXJyb3JLZXlwcmVzcycpLnJlbW92ZSgpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG59LCAnUGxlYXNlIGVudGVyIGEgdmFsaWQgU2VjdXJpdHkgQ29kZSBmb3IgdGhlIENyZWRpdCBDYXJkIGVudGVyZWQnKTtcblxuJC52YWxpZGF0b3IuYWRkTWV0aG9kKCdndWVzdGVtYWlsY29uJywgZnVuY3Rpb24gKHZhbHVlLCBlbGVtZW50KSB7XG4gICAgaWYgKCQoZWxlbWVudCkuaGFzQ2xhc3MoJ3N0b3BLZXlwcmVzcycpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSBpZiAoISQoJy5jaGVja291dGFzZ3Vlc3RidXR0b24nKS5pcygnOnZpc2libGUnKSkge1xuICAgICAgICB2YXIgdkluZGV4ID0gdmFsdWUubGVuZ3RoO1xuICAgICAgICB2YXIgZmNoYXIgPSB2YWx1ZS5zdWJzdHJpbmcoMCwgMSk7XG4gICAgICAgIHZhciBsY2hhciA9IHZhbHVlLnN1YnN0cmluZyh2SW5kZXggLSAxKTtcbiAgICAgICAgaWYgKHZhbHVlLmluZGV4T2YoJ0AnKSAhPSAtMSkge1xuICAgICAgICAgICAgdmFyIHNwbGl0dmFsID0gdmFsdWUuc3BsaXQoJ0AnKTtcbiAgICAgICAgICAgIGZjaGFyID0gc3BsaXR2YWxbMF0uc3Vic3RyaW5nKDAsIDEpO1xuICAgICAgICAgICAgbGNoYXIgPSBzcGxpdHZhbFswXS5zdWJzdHJpbmcoc3BsaXR2YWxbMF0ubGVuZ3RoIC0gMSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGZjaGFyUyA9ICgvXlthLXpBLVowLTldJC8pLnRlc3QoZmNoYXIpO1xuICAgICAgICB2YXIgbGNoYXJTID0gKC9eW2EtekEtWjAtOV0kLykudGVzdChsY2hhcik7XG4gICAgICAgIHZhciBlbWFpbENoZWNrID0gKC9eWy0wLTlhLXpBLVouLV9dK0AoKFxcW1swLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXF0pfCgoW2EtekEtWlxcLTAtOV0rXFwuKStbYS16QS1aXXsyLH0pKSQvKS50ZXN0KHZhbHVlKTtcbiAgICAgICAgdmFyIGVtYWlsVmFsID0gJChlbGVtZW50KS5jbG9zZXN0KCcuZm9ybWZpZWxkJykucHJldignLmZvcm1maWVsZCcpLmZpbmQoJy5ndWVzdGVtYWlsJykudmFsKCk7XG4gICAgICAgIGlmICgoZmNoYXJTID09IGZhbHNlKSB8fCAobGNoYXJTID09IGZhbHNlKSkge1xuICAgICAgICAgICAgY3VzdG9tRXJyb3Jtc2cgPSAnU29tZXRoaW5nIGRvZXNuXFwndCBsb29rIHJpZ2h0LCBwbGVhc2UgdHJ5IGFnYWluLic7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSBpZiAoZW1haWxDaGVjayA9PSBmYWxzZSkge1xuICAgICAgICAgICAgY3VzdG9tRXJyb3Jtc2cgPSAnT29wcyAtIHRoZSBlbWFpbCBlbnRlcmVkIGlzIG5vdCBpbiBhIHZhbGlkIGZvcm1hdC4nO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2UgaWYgKGVtYWlsVmFsICE9IHZhbHVlKSB7XG4gICAgICAgICAgICBjdXN0b21FcnJvcm1zZyA9ICdQbGVhc2UgbWFrZSBzdXJlIGVtYWlscyBtYXRjaC4nO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgIH1cbn0sIGN1c3RvbUVycm9yKTtcblxuJC52YWxpZGF0b3IuYWRkTWV0aG9kKCdndWVzdGVtYWlsJywgZnVuY3Rpb24gKHZhbHVlLCBlbGVtZW50KSB7XG4gICAgaWYgKCQoZWxlbWVudCkuaGFzQ2xhc3MoJ3N0b3BLZXlwcmVzcycpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSBpZiAoISQoJy5jaGVja291dGFzZ3Vlc3RidXR0b24nKS5pcygnOnZpc2libGUnKSkge1xuICAgICAgICB2YXIgdkluZGV4ID0gdmFsdWUubGVuZ3RoO1xuICAgICAgICB2YXIgZmNoYXIgPSB2YWx1ZS5zdWJzdHJpbmcoMCwgMSk7XG4gICAgICAgIHZhciBsY2hhciA9IHZhbHVlLnN1YnN0cmluZyh2SW5kZXggLSAxKTtcbiAgICAgICAgaWYgKHZhbHVlLmluZGV4T2YoJ0AnKSAhPSAtMSkge1xuICAgICAgICAgICAgdmFyIHNwbGl0dmFsID0gdmFsdWUuc3BsaXQoJ0AnKTtcbiAgICAgICAgICAgIGZjaGFyID0gc3BsaXR2YWxbMF0uc3Vic3RyaW5nKDAsIDEpO1xuICAgICAgICAgICAgbGNoYXIgPSBzcGxpdHZhbFswXS5zdWJzdHJpbmcoc3BsaXR2YWxbMF0ubGVuZ3RoIC0gMSk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZmNoYXJTID0gKC9eW2EtekEtWjAtOV0kLykudGVzdChmY2hhcik7XG4gICAgICAgIHZhciBsY2hhclMgPSAoL15bYS16QS1aMC05XSQvKS50ZXN0KGxjaGFyKTtcbiAgICAgICAgdmFyIGVtYWlsQ2hlY2sgPSAoL15bLTAtOWEtekEtWi4tX10rQCgoXFxbWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcXSl8KChbYS16QS1aXFwtMC05XStcXC4pK1thLXpBLVpdezIsfSkpJC8pLnRlc3QodmFsdWUpO1xuICAgICAgICBpZiAoKGZjaGFyUyA9PSBmYWxzZSkgfHwgKGxjaGFyUyA9PSBmYWxzZSkpIHtcbiAgICAgICAgICAgIGN1c3RvbUVycm9ybXNnID0gJ1NvbWV0aGluZyBkb2VzblxcJ3QgbG9vayByaWdodCwgcGxlYXNlIHRyeSBhZ2Fpbi4nO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2UgaWYgKGVtYWlsQ2hlY2sgPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGN1c3RvbUVycm9ybXNnID0gJ09vcHMgLSB0aGUgZW1haWwgZW50ZXJlZCBpcyBub3QgaW4gYSB2YWxpZCBmb3JtYXQuJztcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICB9XG59LCBjdXN0b21FcnJvcik7XG5cbiQudmFsaWRhdG9yLmFkZE1ldGhvZCgnbG9nZ2VkZW1haWwnLCBmdW5jdGlvbiAodmFsdWUsIGVsZW1lbnQpIHtcbiAgICBpZiAoJChlbGVtZW50KS5oYXNDbGFzcygnc3RvcEtleXByZXNzJykpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIGlmICghJCgnLnNpZ25pbnRvbXlhY2NvdW50YnV0dG9uJykuaXMoJzp2aXNpYmxlJykpIHtcbiAgICAgICAgdmFyIHZJbmRleCA9IHZhbHVlLmxlbmd0aDtcbiAgICAgICAgdmFyIGZjaGFyID0gdmFsdWUuc3Vic3RyaW5nKDAsIDEpO1xuICAgICAgICB2YXIgbGNoYXIgPSB2YWx1ZS5zdWJzdHJpbmcodkluZGV4IC0gMSk7XG4gICAgICAgIGlmICh2YWx1ZS5pbmRleE9mKCdAJykgIT0gLTEpIHtcbiAgICAgICAgICAgIHZhciBzcGxpdHZhbCA9IHZhbHVlLnNwbGl0KCdAJyk7XG4gICAgICAgICAgICBmY2hhciA9IHNwbGl0dmFsWzBdLnN1YnN0cmluZygwLCAxKTtcbiAgICAgICAgICAgIGxjaGFyID0gc3BsaXR2YWxbMF0uc3Vic3RyaW5nKHNwbGl0dmFsWzBdLmxlbmd0aCAtIDEpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBmY2hhclMgPSAoL15bYS16QS1aMC05XSQvKS50ZXN0KGZjaGFyKTtcbiAgICAgICAgdmFyIGxjaGFyUyA9ICgvXlthLXpBLVowLTldJC8pLnRlc3QobGNoYXIpO1xuICAgICAgICB2YXIgZW1haWxDaGVjayA9ICgvXlstMC05YS16QS1aLi1fXStAKChcXFtbMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFxdKXwoKFthLXpBLVpcXC0wLTldK1xcLikrW2EtekEtWl17Mix9KSkkLykudGVzdCh2YWx1ZSk7XG4gICAgICAgIC8vdmFyIGVtYWlsVmFsID0gJChlbGVtZW50KS5jbG9zZXN0KCcuZm9ybWZpZWxkJykucHJldignLmZvcm1maWVsZCcpLmZpbmQoJy5ndWVzdGVtYWlsJykudmFsKCk7XG4gICAgICAgIGlmICgoZmNoYXJTID09IGZhbHNlKSB8fCAobGNoYXJTID09IGZhbHNlKSkge1xuICAgICAgICAgICAgY3VzdG9tRXJyb3Jtc2cgPSAnU29tZXRoaW5nIGRvZXNuXFwndCBsb29rIHJpZ2h0LCBwbGVhc2UgdHJ5IGFnYWluLic7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSBpZiAoZW1haWxDaGVjayA9PSBmYWxzZSkge1xuICAgICAgICAgICAgY3VzdG9tRXJyb3Jtc2cgPSAnT29wcyAtIHRoZSBlbWFpbCBlbnRlcmVkIGlzIG5vdCBpbiBhIHZhbGlkIGZvcm1hdC4nO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgIH1cbn0sIGN1c3RvbUVycm9yKTtcblxuJC52YWxpZGF0b3IuYWRkTWV0aG9kKCdhY2NlbWFpbGNvbicsIGZ1bmN0aW9uICh2YWx1ZSwgZWxlbWVudCkge1xuICAgIGlmICgkKGVsZW1lbnQpLmhhc0NsYXNzKCdzdG9wS2V5cHJlc3MnKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKCEkKCcuY3JlYXRlYW5hY2NvdW50YnV0dG9uJykuaXMoJzp2aXNpYmxlJykpIHtcbiAgICAgICAgdmFyIHZJbmRleCA9IHZhbHVlLmxlbmd0aDtcbiAgICAgICAgdmFyIGZjaGFyID0gdmFsdWUuc3Vic3RyaW5nKDAsIDEpO1xuICAgICAgICB2YXIgbGNoYXIgPSB2YWx1ZS5zdWJzdHJpbmcodkluZGV4IC0gMSk7XG4gICAgICAgIGlmICh2YWx1ZS5pbmRleE9mKCdAJykgIT0gLTEpIHtcbiAgICAgICAgICAgIHZhciBzcGxpdHZhbCA9IHZhbHVlLnNwbGl0KCdAJyk7XG4gICAgICAgICAgICBmY2hhciA9IHNwbGl0dmFsWzBdLnN1YnN0cmluZygwLCAxKTtcbiAgICAgICAgICAgIGxjaGFyID0gc3BsaXR2YWxbMF0uc3Vic3RyaW5nKHNwbGl0dmFsWzBdLmxlbmd0aCAtIDEpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBmY2hhclMgPSAoL15bYS16QS1aMC05XSQvKS50ZXN0KGZjaGFyKTtcbiAgICAgICAgdmFyIGxjaGFyUyA9ICgvXlthLXpBLVowLTldJC8pLnRlc3QobGNoYXIpO1xuICAgICAgICB2YXIgZW1haWxDaGVjayA9ICgvXlstMC05YS16QS1aLi1fXStAKChcXFtbMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFxdKXwoKFthLXpBLVpcXC0wLTldK1xcLikrW2EtekEtWl17Mix9KSkkLykudGVzdCh2YWx1ZSk7XG4gICAgICAgIHZhciBlbWFpbFZhbCA9ICQoZWxlbWVudCkuY2xvc2VzdCgnLmZvcm1maWVsZCcpLnByZXYoJy5mb3JtZmllbGQnKS5maW5kKCcuYWNjZW1haWwnKS52YWwoKTtcbiAgICAgICAgaWYgKChmY2hhclMgPT0gZmFsc2UpIHx8IChsY2hhclMgPT0gZmFsc2UpKSB7XG4gICAgICAgICAgICBjdXN0b21FcnJvcm1zZyA9ICdTb21ldGhpbmcgZG9lc25cXCd0IGxvb2sgcmlnaHQsIHBsZWFzZSB0cnkgYWdhaW4uJztcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSBlbHNlIGlmIChlbWFpbENoZWNrID09IGZhbHNlKSB7XG4gICAgICAgICAgICBjdXN0b21FcnJvcm1zZyA9ICdPb3BzIC0gdGhlIGVtYWlsIGVudGVyZWQgaXMgbm90IGluIGEgdmFsaWQgZm9ybWF0Lic7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSBpZiAoZW1haWxWYWwgIT0gdmFsdWUpIHtcbiAgICAgICAgICAgIGN1c3RvbUVycm9ybXNnID0gJ1BsZWFzZSBtYWtlIHN1cmUgZW1haWxzIG1hdGNoLic7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbn0sIGN1c3RvbUVycm9yKTtcblxuJC52YWxpZGF0b3IuYWRkTWV0aG9kKCdhLXpBLVowLTknLCBmdW5jdGlvbiAodmFsdWUsIGVsZW1lbnQpIHtcbiAgICBpZiAoJChlbGVtZW50KS5oYXNDbGFzcygnc3RvcEtleXByZXNzJykpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIGlmICghJCgnLmNyZWF0ZWFuYWNjb3VudGJ1dHRvbicpLmlzKCc6dmlzaWJsZScpKSB7XG4gICAgICAgIHZhciB2SW5kZXggPSB2YWx1ZS5sZW5ndGg7XG4gICAgICAgIHZhciBmY2hhciA9IHZhbHVlLnN1YnN0cmluZygwLCAxKTtcbiAgICAgICAgdmFyIGxjaGFyID0gdmFsdWUuc3Vic3RyaW5nKHZJbmRleCAtIDEpO1xuICAgICAgICBpZiAodmFsdWUuaW5kZXhPZignQCcpICE9IC0xKSB7XG4gICAgICAgICAgICB2YXIgc3BsaXR2YWwgPSB2YWx1ZS5zcGxpdCgnQCcpO1xuICAgICAgICAgICAgZmNoYXIgPSBzcGxpdHZhbFswXS5zdWJzdHJpbmcoMCwgMSk7XG4gICAgICAgICAgICBsY2hhciA9IHNwbGl0dmFsWzBdLnN1YnN0cmluZyhzcGxpdHZhbFswXS5sZW5ndGggLSAxKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBmY2hhclMgPSAoL15bYS16QS1aXSQvKS50ZXN0KGZjaGFyKTtcbiAgICAgICAgdmFyIGxjaGFyUyA9ICgvXlthLXpBLVowLTldJC8pLnRlc3QobGNoYXIpO1xuICAgICAgICB2YXIgZW1haWxDaGVjayA9ICgvXlstMC05YS16QS1aLi1fXStAKChcXFtbMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFxdKXwoKFthLXpBLVpcXC0wLTldK1xcLikrW2EtekEtWl17Mix9KSkkLykudGVzdCh2YWx1ZSk7XG4gICAgICAgIC8vdmFyIGVtYWlsVmFsID0gJChlbGVtZW50KS5jbG9zZXN0KCcuZm9ybWZpZWxkJykucHJldignLmZvcm1maWVsZCcpLmZpbmQoJy5lbWFpbCcpLnZhbCgpO1xuXG4gICAgICAgIGlmICgoZmNoYXJTID09IGZhbHNlKSB8fCAobGNoYXJTID09IGZhbHNlKSkge1xuICAgICAgICAgICAgY3VzdG9tRXJyb3Jtc2cgPSAnU29tZXRoaW5nIGRvZXNuXFwndCBsb29rIHJpZ2h0LCBwbGVhc2UgdHJ5IGFnYWluLic7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSBpZiAoZW1haWxDaGVjayA9PSBmYWxzZSkge1xuICAgICAgICAgICAgY3VzdG9tRXJyb3Jtc2cgPSAnT29wcyAtIHRoZSBlbWFpbCBlbnRlcmVkIGlzIG5vdCBpbiBhIHZhbGlkIGZvcm1hdC4nO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG59LCBjdXN0b21FcnJvcik7XG5cbiQudmFsaWRhdG9yLmFkZE1ldGhvZCgnY21fcGFzc3dvcmQnLCBmdW5jdGlvbiAodmFsdWUsIGVsZW1lbnQpIHtcbiAgICBpZiAoJChlbGVtZW50KS5oYXNDbGFzcygnc3RvcEtleXByZXNzJykpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIGlmICghJCgnLmNyZWF0ZWFuYWNjb3VudGJ1dHRvbicpLmlzKCc6dmlzaWJsZScpICYmICQoZWxlbWVudCkuaGFzQ2xhc3MoJ3JlcXVpcmVkJykpIHtcbiAgICAgICAgdmFyIHBhc3N3b3JkVmFsID0gJCgnLmNfcGFzc3dvcmQnKS52YWwoKTtcbiAgICAgICAgaWYgKCQoZWxlbWVudCkuY2xvc2VzdCgnZm9ybScpLmxlbmd0aCA+IDAgJiYgJChlbGVtZW50KS5jbG9zZXN0KCdmb3JtJykuYXR0cignaWQnKSA9PSAnUmVnaXN0cmF0aW9uRm9ybScpIHtcbiAgICAgICAgICAgIHBhc3N3b3JkVmFsID0gJChlbGVtZW50KS5jbG9zZXN0KCdmb3JtJykuZmluZCgnLmNfcGFzc3dvcmQnKS52YWwoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh2YWx1ZS5sZW5ndGggPCA1KSB7XG4gICAgICAgICAgICBjdXN0b21FcnJvcm1zZyA9ICdQYXNzd29yZHMgbXVzdCBjb250YWluIGEgbWluaW11bSBvZiA1IGNoYXJhY3RlcnMgYW5kIGFyZSBDYVNlIFNlTnNJdEl2RS4nO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2UgaWYgKHBhc3N3b3JkVmFsICE9IHZhbHVlKSB7XG4gICAgICAgICAgICBjdXN0b21FcnJvcm1zZyA9ICdPb3BzIC0geW91ciBwYXNzd29yZHMgZG8gbm90IG1hdGNoLic7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn0sIGN1c3RvbUVycm9yKTtcblxuJC52YWxpZGF0b3IuYWRkTWV0aG9kKCdjb25maXJtX3Bhc3N3b3JkJywgZnVuY3Rpb24gKHZhbHVlLCBlbGVtZW50KSB7XG4gICAgaWYgKCQoZWxlbWVudCkuaGFzQ2xhc3MoJ3N0b3BLZXlwcmVzcycpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSBpZiAoJChlbGVtZW50KS5oYXNDbGFzcygncmVxdWlyZWQnKSkge1xuICAgICAgICB2YXIgcGFzc3dvcmRWYWwgPSAkKGVsZW1lbnQpLmNsb3Nlc3QoJ2Zvcm0nKS5maW5kKCcuY19wYXNzd29yZCcpLnZhbCgpO1xuICAgICAgICBpZiAodmFsdWUubGVuZ3RoIDwgNSkge1xuICAgICAgICAgICAgY3VzdG9tRXJyb3Jtc2cgPSAnUGFzc3dvcmRzIG11c3QgY29udGFpbiBhIG1pbmltdW0gb2YgNSBjaGFyYWN0ZXJzIGFuZCBhcmUgQ2FTZSBTZU5zSXRJdkUuJztcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSBlbHNlIGlmIChwYXNzd29yZFZhbCAhPSB2YWx1ZSkge1xuICAgICAgICAgICAgY3VzdG9tRXJyb3Jtc2cgPSAnT29wcyAtIHlvdXIgcGFzc3dvcmRzIGRvIG5vdCBtYXRjaC4nO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG59LCBjdXN0b21FcnJvcik7XG5cbiQudmFsaWRhdG9yLmFkZE1ldGhvZCgnY19wYXNzd29yZCcsIGZ1bmN0aW9uICh2YWx1ZSwgZWxlbWVudCkge1xuICAgIGlmICgkKGVsZW1lbnQpLmhhc0NsYXNzKCdzdG9wS2V5cHJlc3MnKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKCQoZWxlbWVudCkuaGFzQ2xhc3MoJ3JlcXVpcmVkJykgJiYgKHZhbHVlLmxlbmd0aCA8IDUpKSB7XG4gICAgICAgIGN1c3RvbUVycm9ybXNnID0gJ1Bhc3N3b3JkcyBtdXN0IGNvbnRhaW4gYSBtaW5pbXVtIG9mIDUgY2hhcmFjdGVycyBhbmQgYXJlIENhU2UgU2VOc0l0SXZFLic7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG59LCBjdXN0b21FcnJvcik7XG5cbiQudmFsaWRhdG9yLmFkZE1ldGhvZCgnbG9naW5fcGFzc3dvcmQnLCBmdW5jdGlvbiAodmFsdWUsIGVsZW1lbnQpIHtcbiAgICBpZiAoJChlbGVtZW50KS5oYXNDbGFzcygnc3RvcEtleXByZXNzJykpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIGlmICgkKGVsZW1lbnQpLmhhc0NsYXNzKCdyZXF1aXJlZCcpICYmICh2YWx1ZS5sZW5ndGggPCA1KSkge1xuICAgICAgICBjdXN0b21FcnJvcm1zZyA9ICdQYXNzd29yZHMgbXVzdCBjb250YWluIGEgbWluaW11bSBvZiA1IGNoYXJhY3RlcnMgYW5kIGFyZSBDYVNlIFNlTnNJdEl2RS4nO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxufSwgY3VzdG9tRXJyb3IpO1xuXG4kLnZhbGlkYXRvci5hZGRNZXRob2QoJ3Jlc2V0ZW1haWwnLCBmdW5jdGlvbiAodmFsdWUsIGVsZW1lbnQpIHtcbiAgICB2YXIgdkluZGV4ID0gdmFsdWUubGVuZ3RoO1xuICAgIHZhciBmY2hhciA9IHZhbHVlLnN1YnN0cmluZygwLCAxKTtcbiAgICB2YXIgbGNoYXIgPSB2YWx1ZS5zdWJzdHJpbmcodkluZGV4IC0gMSk7XG5cbiAgICBpZiAoJChlbGVtZW50KS5oYXNDbGFzcygnc3RvcEtleXByZXNzJykpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHZhbHVlLmluZGV4T2YoJ0AnKSAhPSAtMSkge1xuICAgICAgICAgICAgdmFyIHNwbGl0dmFsID0gdmFsdWUuc3BsaXQoJ0AnKTtcbiAgICAgICAgICAgIGZjaGFyID0gc3BsaXR2YWxbMF0uc3Vic3RyaW5nKDAsIDEpO1xuICAgICAgICAgICAgbGNoYXIgPSBzcGxpdHZhbFswXS5zdWJzdHJpbmcoc3BsaXR2YWxbMF0ubGVuZ3RoIC0gMSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGZjaGFyUyA9ICgvXlthLXpBLVowLTldJC8pLnRlc3QoZmNoYXIpO1xuICAgICAgICB2YXIgbGNoYXJTID0gKC9eW2EtekEtWjAtOV0kLykudGVzdChsY2hhcik7XG4gICAgICAgIHZhciBlbWFpbENoZWNrID0gKC9eWy0wLTlhLXpBLVouLV9dK0AoKFxcW1swLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXF0pfCgoW2EtekEtWlxcLTAtOV0rXFwuKStbYS16QS1aXXsyLH0pKSQvKS50ZXN0KHZhbHVlKTtcbiAgICAgICAgaWYgKChmY2hhclMgPT0gZmFsc2UpIHx8IChsY2hhclMgPT0gZmFsc2UpKSB7XG4gICAgICAgICAgICBjdXN0b21FcnJvcm1zZyA9ICdTb21ldGhpbmcgZG9lc25cXCd0IGxvb2sgcmlnaHQsIHBsZWFzZSB0cnkgYWdhaW4uJztcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSBlbHNlIGlmIChlbWFpbENoZWNrID09IGZhbHNlKSB7XG4gICAgICAgICAgICBjdXN0b21FcnJvcm1zZyA9ICdPb3BzIC0gdGhlIGVtYWlsIGVudGVyZWQgaXMgbm90IGluIGEgdmFsaWQgZm9ybWF0Lic7XG5cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxufSwgY3VzdG9tRXJyb3IpO1xuXG4kLnZhbGlkYXRvci5hZGRNZXRob2QoJ2FjY291bnRlbWFpbCcsIGZ1bmN0aW9uICh2YWx1ZSwgZWxlbWVudCkge1xuICAgIHZhciB2SW5kZXggPSB2YWx1ZS5sZW5ndGg7XG4gICAgdmFyIGZjaGFyID0gdmFsdWUuc3Vic3RyaW5nKDAsIDEpO1xuICAgIHZhciBsY2hhciA9IHZhbHVlLnN1YnN0cmluZyh2SW5kZXggLSAxKTtcbiAgICBpZiAoJChlbGVtZW50KS5oYXNDbGFzcygnc3RvcEtleXByZXNzJykpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHZhbHVlLmluZGV4T2YoJ0AnKSAhPSAtMSkge1xuICAgICAgICAgICAgdmFyIHNwbGl0dmFsID0gdmFsdWUuc3BsaXQoJ0AnKTtcbiAgICAgICAgICAgIGZjaGFyID0gc3BsaXR2YWxbMF0uc3Vic3RyaW5nKDAsIDEpO1xuICAgICAgICAgICAgbGNoYXIgPSBzcGxpdHZhbFswXS5zdWJzdHJpbmcoc3BsaXR2YWxbMF0ubGVuZ3RoIC0gMSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGZjaGFyUyA9ICgvXlthLXpBLVowLTldJC8pLnRlc3QoZmNoYXIpO1xuICAgICAgICB2YXIgbGNoYXJTID0gKC9eW2EtekEtWjAtOV0kLykudGVzdChsY2hhcik7XG4gICAgICAgIHZhciBlbWFpbENoZWNrID0gKC9eWy0wLTlhLXpBLVouLV9dK0AoKFxcW1swLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXF0pfCgoW2EtekEtWlxcLTAtOV0rXFwuKStbYS16QS1aXXsyLH0pKSQvKS50ZXN0KHZhbHVlKTtcbiAgICAgICAgaWYgKChmY2hhclMgPT0gZmFsc2UpIHx8IChsY2hhclMgPT0gZmFsc2UpKSB7XG4gICAgICAgICAgICBjdXN0b21FcnJvcm1zZyA9ICdTb21ldGhpbmcgZG9lc25cXCd0IGxvb2sgcmlnaHQsIHBsZWFzZSB0cnkgYWdhaW4uJztcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSBlbHNlIGlmIChlbWFpbENoZWNrID09IGZhbHNlKSB7XG4gICAgICAgICAgICBjdXN0b21FcnJvcm1zZyA9ICdPb3BzIC0gdGhlIGVtYWlsIGVudGVyZWQgaXMgbm90IGluIGEgdmFsaWQgZm9ybWF0Lic7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cblxufSwgY3VzdG9tRXJyb3IpO1xuXG4vL2VtYWlsIHZhbGlkYXRpb24gZm9yIHZpcGluc2lkZXJcblxuJC52YWxpZGF0b3IuYWRkTWV0aG9kKCd2aXBpbnNpZGVyZW1haWwnLCBmdW5jdGlvbiAodmFsdWUsIGVsZW1lbnQpIHtcbiAgICBpZiAoJChlbGVtZW50KS5oYXNDbGFzcygnc3RvcEtleXByZXNzJykpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHZJbmRleCA9IHZhbHVlLmxlbmd0aDtcbiAgICAgICAgdmFyIGZjaGFyID0gdmFsdWUuc3Vic3RyaW5nKDAsIDEpO1xuICAgICAgICB2YXIgbGNoYXIgPSB2YWx1ZS5zdWJzdHJpbmcodkluZGV4IC0gMSk7XG4gICAgICAgIGlmICh2YWx1ZS5pbmRleE9mKCdAJykgIT0gLTEpIHtcbiAgICAgICAgICAgIHZhciBzcGxpdHZhbCA9IHZhbHVlLnNwbGl0KCdAJyk7XG4gICAgICAgICAgICBmY2hhciA9IHNwbGl0dmFsWzBdLnN1YnN0cmluZygwLCAxKTtcbiAgICAgICAgICAgIGxjaGFyID0gc3BsaXR2YWxbMF0uc3Vic3RyaW5nKHNwbGl0dmFsWzBdLmxlbmd0aCAtIDEpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBmY2hhclMgPSAoL15bYS16QS1aMC05XSQvKS50ZXN0KGZjaGFyKTtcbiAgICAgICAgdmFyIGxjaGFyUyA9ICgvXlthLXpBLVowLTldJC8pLnRlc3QobGNoYXIpO1xuICAgICAgICB2YXIgZW1haWxDaGVjayA9ICgvXlstMC05YS16QS1aLi1fXStAKChcXFtbMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFxdKXwoKFthLXpBLVpcXC0wLTldK1xcLikrW2EtekEtWl17Mix9KSkkLykudGVzdCh2YWx1ZSk7XG4gICAgICAgIGlmICgoZmNoYXJTID09IGZhbHNlKSB8fCAobGNoYXJTID09IGZhbHNlKSkge1xuICAgICAgICAgICAgY3VzdG9tRXJyb3Jtc2cgPSAnLVNvbWV0aGluZyBkb2VzblxcJ3QgbG9vayByaWdodCwgcGxlYXNlIHRyeSBhZ2Fpbi4nO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2UgaWYgKGVtYWlsQ2hlY2sgPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGN1c3RvbUVycm9ybXNnID0gJ09vcHMgLSB0aGUgZW1haWwgZW50ZXJlZCBpcyBub3QgaW4gYSB2YWxpZCBmb3JtYXQuJztcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxufSwgY3VzdG9tRXJyb3IpO1xuXG4kLnZhbGlkYXRvci5hZGRNZXRob2QoJ2VtYWlsZm9vdGVyJywgZnVuY3Rpb24gKHZhbHVlLCBlbGVtZW50KSB7XG4gICAgaWYgKCQoZWxlbWVudCkuaGFzQ2xhc3MoJ3N0b3BLZXlwcmVzcycpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciB2SW5kZXggPSB2YWx1ZS5sZW5ndGg7XG4gICAgICAgIGlmICh2SW5kZXggPiAwKSB7XG4gICAgICAgICAgICB2YXIgZmNoYXIgPSB2YWx1ZS5zdWJzdHJpbmcoMCwgMSk7XG4gICAgICAgICAgICB2YXIgbGNoYXIgPSB2YWx1ZS5zdWJzdHJpbmcodkluZGV4IC0gMSk7XG4gICAgICAgICAgICBpZiAodmFsdWUuaW5kZXhPZignQCcpICE9IC0xKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNwbGl0dmFsID0gdmFsdWUuc3BsaXQoJ0AnKTtcbiAgICAgICAgICAgICAgICBmY2hhciA9IHNwbGl0dmFsWzBdLnN1YnN0cmluZygwLCAxKTtcbiAgICAgICAgICAgICAgICBsY2hhciA9IHNwbGl0dmFsWzBdLnN1YnN0cmluZyhzcGxpdHZhbFswXS5sZW5ndGggLSAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBmY2hhclMgPSAoL15bYS16QS1aMC05XSQvKS50ZXN0KGZjaGFyKTtcbiAgICAgICAgICAgIHZhciBsY2hhclMgPSAoL15bYS16QS1aMC05XSQvKS50ZXN0KGxjaGFyKTtcbiAgICAgICAgICAgIHZhciBlbWFpbENoZWNrID0gKC9eWy0wLTlhLXpBLVouLV9dK0AoKFxcW1swLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXF0pfCgoW2EtekEtWlxcLTAtOV0rXFwuKStbYS16QS1aXXsyLH0pKSQvKS50ZXN0KHZhbHVlKTtcbiAgICAgICAgICAgIGlmICgoZmNoYXJTID09IGZhbHNlKSB8fCAobGNoYXJTID09IGZhbHNlKSkge1xuICAgICAgICAgICAgICAgIGN1c3RvbUVycm9ybXNnID0gJ1NvbWV0aGluZyBkb2VzblxcJ3QgbG9vayByaWdodCwgcGxlYXNlIHRyeSBhZ2Fpbi4nO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZW1haWxDaGVjayA9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGN1c3RvbUVycm9ybXNnID0gJ09vcHMgLSB0aGUgZW1haWwgZW50ZXJlZCBpcyBub3QgaW4gYSB2YWxpZCBmb3JtYXQuJztcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY3VzdG9tRXJyb3Jtc2cgPSAnUGxlYXNlIGVudGVyIHlvdXIgZW1haWwgYWRkcmVzcy4nO1xuXG4gICAgICAgIH1cbiAgICB9XG59LCBjdXN0b21FcnJvcik7XG5cbiQudmFsaWRhdG9yLmFkZE1ldGhvZCgnYWNjb3VudGVtYWlsY29uZicsIGZ1bmN0aW9uICh2YWx1ZSwgZWxlbWVudCkge1xuICAgIGlmICgkKGVsZW1lbnQpLmhhc0NsYXNzKCdzdG9wS2V5cHJlc3MnKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgdkluZGV4ID0gdmFsdWUubGVuZ3RoO1xuICAgICAgICB2YXIgZmNoYXIgPSB2YWx1ZS5zdWJzdHJpbmcoMCwgMSk7XG4gICAgICAgIHZhciBsY2hhciA9IHZhbHVlLnN1YnN0cmluZyh2SW5kZXggLSAxKTtcbiAgICAgICAgaWYgKHZhbHVlLmluZGV4T2YoJ0AnKSAhPSAtMSkge1xuICAgICAgICAgICAgdmFyIHNwbGl0dmFsID0gdmFsdWUuc3BsaXQoJ0AnKTtcbiAgICAgICAgICAgIGZjaGFyID0gc3BsaXR2YWxbMF0uc3Vic3RyaW5nKDAsIDEpO1xuICAgICAgICAgICAgbGNoYXIgPSBzcGxpdHZhbFswXS5zdWJzdHJpbmcoc3BsaXR2YWxbMF0ubGVuZ3RoIC0gMSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGZjaGFyUyA9ICgvXlthLXpBLVowLTldJC8pLnRlc3QoZmNoYXIpO1xuICAgICAgICB2YXIgbGNoYXJTID0gKC9eW2EtekEtWjAtOV0kLykudGVzdChsY2hhcik7XG4gICAgICAgIHZhciBlbWFpbENoZWNrID0gKC9eWy0wLTlhLXpBLVouLV9dK0AoKFxcW1swLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXF0pfCgoW2EtekEtWlxcLTAtOV0rXFwuKStbYS16QS1aXXsyLH0pKSQvKS50ZXN0KHZhbHVlKTtcbiAgICAgICAgdmFyIGVtYWlsVmFsID0gJCgnLmFjY291bnRlbWFpbCcpLnZhbCgpO1xuICAgICAgICBpZiAoJChlbGVtZW50KS5jbG9zZXN0KCdmb3JtJykubGVuZ3RoID4gMCAmJiAkKGVsZW1lbnQpLmNsb3Nlc3QoJ2Zvcm0nKS5hdHRyKCdpZCcpID09ICdSZWdpc3RyYXRpb25Gb3JtJykge1xuICAgICAgICAgICAgZW1haWxWYWwgPSAkKGVsZW1lbnQpLmNsb3Nlc3QoJ2Zvcm0nKS5maW5kKCcuYWNjb3VudGVtYWlsJykudmFsKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChmY2hhclMgPT0gZmFsc2UpIHx8IChsY2hhclMgPT0gZmFsc2UpKSB7XG4gICAgICAgICAgICBjdXN0b21FcnJvcm1zZyA9ICdTb21ldGhpbmcgZG9lc25cXCd0IGxvb2sgcmlnaHQsIHBsZWFzZSB0cnkgYWdhaW4uJztcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSBlbHNlIGlmIChlbWFpbENoZWNrID09IGZhbHNlKSB7XG4gICAgICAgICAgICBjdXN0b21FcnJvcm1zZyA9ICdPb3BzIC0gdGhlIGVtYWlsIGVudGVyZWQgaXMgbm90IGluIGEgdmFsaWQgZm9ybWF0Lic7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSBpZiAoZW1haWxWYWwgIT0gdmFsdWUpIHtcbiAgICAgICAgICAgIGN1c3RvbUVycm9ybXNnID0gJ1BsZWFzZSBtYWtlIHN1cmUgZW1haWxzIG1hdGNoLic7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbn0sIGN1c3RvbUVycm9yKTtcblxuJC52YWxpZGF0b3IuYWRkTWV0aG9kKCdhY2NvdW50RW1haWxDb25maXJtYXRpb24nLCBmdW5jdGlvbiAodmFsdWUsIGVsZW1lbnQpIHtcbiAgICBpZiAoJChlbGVtZW50KS5oYXNDbGFzcygnc3RvcEtleXByZXNzJykpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHZJbmRleCA9IHZhbHVlLmxlbmd0aDtcbiAgICAgICAgdmFyIGZjaGFyID0gdmFsdWUuc3Vic3RyaW5nKDAsIDEpO1xuICAgICAgICB2YXIgbGNoYXIgPSB2YWx1ZS5zdWJzdHJpbmcodkluZGV4IC0gMSk7XG4gICAgICAgIGlmICh2YWx1ZS5pbmRleE9mKCdAJykgIT0gLTEpIHtcbiAgICAgICAgICAgIHZhciBzcGxpdHZhbCA9IHZhbHVlLnNwbGl0KCdAJyk7XG4gICAgICAgICAgICBmY2hhciA9IHNwbGl0dmFsWzBdLnN1YnN0cmluZygwLCAxKTtcbiAgICAgICAgICAgIGxjaGFyID0gc3BsaXR2YWxbMF0uc3Vic3RyaW5nKHNwbGl0dmFsWzBdLmxlbmd0aCAtIDEpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBmY2hhclMgPSAoL15bYS16QS1aMC05XSQvKS50ZXN0KGZjaGFyKTtcbiAgICAgICAgdmFyIGxjaGFyUyA9ICgvXlthLXpBLVowLTldJC8pLnRlc3QobGNoYXIpO1xuICAgICAgICB2YXIgZW1haWxDaGVjayA9ICgvXlstMC05YS16QS1aLi1fXStAKChcXFtbMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFxdKXwoKFthLXpBLVpcXC0wLTldK1xcLikrW2EtekEtWl17Mix9KSkkLykudGVzdCh2YWx1ZSk7XG4gICAgICAgIHZhciBlbWFpbFZhbCA9ICQoZWxlbWVudCkuY2xvc2VzdCgnZm9ybScpLmZpbmQoJy5hY2NvdW50ZW1haWwnKS52YWwoKTtcbiAgICAgICAgaWYgKChmY2hhclMgPT0gZmFsc2UpIHx8IChsY2hhclMgPT0gZmFsc2UpKSB7XG4gICAgICAgICAgICBjdXN0b21FcnJvcm1zZyA9ICdTb21ldGhpbmcgZG9lc25cXCd0IGxvb2sgcmlnaHQsIHBsZWFzZSB0cnkgYWdhaW4uJztcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSBlbHNlIGlmIChlbWFpbENoZWNrID09IGZhbHNlKSB7XG4gICAgICAgICAgICBjdXN0b21FcnJvcm1zZyA9ICdPb3BzIC0gdGhlIGVtYWlsIGVudGVyZWQgaXMgbm90IGluIGEgdmFsaWQgZm9ybWF0Lic7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSBpZiAoZW1haWxWYWwgIT0gdmFsdWUpIHtcbiAgICAgICAgICAgIGN1c3RvbUVycm9ybXNnID0gJ1BsZWFzZSBtYWtlIHN1cmUgZW1haWxzIG1hdGNoLic7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbn0sIGN1c3RvbUVycm9yKTtcbi8qKlxuICogQWRkIHBvc2l0aXZlIG51bWJlciB2YWxpZGF0aW9uIG1ldGhvZCB0byAkIHZhbGlkYXRpb25cbiAqIHBsdWdpbi4gVGV4dCBmaWVsZHMgbXVzdCBoYXZlICdwb3NpdGl2ZW51bWJlcicgY3NzIGNsYXNzIHRvIGJlXG4gKiB2YWxpZGF0ZWQgYXMgcG9zaXRpdmVudW1iZXIgaXQgdmFsaWRhdGVzIGEgbnVtYmVyIGFuZCB0aHJvd3NcbiAqIGVycm9yIGlmIGl0IGlzIGJlbG93IDAgb3IgaWYgaXQgaXMgbm90IGEgbnVtYmVyLlxuICovXG4kLnZhbGlkYXRvci5hZGRNZXRob2QoJ3Bvc2l0aXZlbnVtYmVyJywgZnVuY3Rpb24gKHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50KSB7XG4gICAgaWYgKCQoZWxlbWVudCkuaGFzQ2xhc3MoJ3N0b3BLZXlwcmVzcycpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh2YWx1ZSA9PSAnJykge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICgvXi0/KD86XFxkK3xcXGR7MSwzfSg/OixcXGR7M30pKykoPzpcXC5cXGQrKT8kLykudGVzdCh2YWx1ZSkgJiYgTnVtYmVyKHZhbHVlKSA+PSAwO1xuICAgIH1cbn0sICcnKTsgLy8gXCJcIiBzaG91bGQgYmUgcmVwbGFjZWQgd2l0aCBlcnJvciBtZXNzYWdlIGlmIG5lZWRlZFxuXG4kLnZhbGlkYXRvci5hZGRNZXRob2QoJ21vbnRoc2VsZWN0JywgZnVuY3Rpb24gKHZhbHVlLCBlbGVtZW50KSB7XG4gICAgaWYgKCQoZWxlbWVudCkuaGFzQ2xhc3MoJ3N0b3BLZXlwcmVzcycpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBkID0gbmV3IERhdGUoKSxcbiAgICAgICAgICAgIG10aCA9IGQuZ2V0TW9udGgoKSArIDEsXG4gICAgICAgICAgICB5eSA9IGQuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgdmFyIHNlbGVjdGVkTXRoID0gJCgnLmN1c3RvbS1zZWxlY3Qgc2VsZWN0W2lkJD1cXCdfZXhwaXJhdGlvbl9tb250aFxcJ10nKS52YWwoKTtcblxuICAgICAgICB2YXIgc2VsZWN0ZWR5ZWFyID0gJCgnLmN1c3RvbS1zZWxlY3Qgc2VsZWN0W2lkJD1cXCdfZXhwaXJhdGlvbl95ZWFyXFwnXScpLnZhbCgpO1xuXG4gICAgICAgIGlmIChzZWxlY3RlZHllYXIpIHtcbiAgICAgICAgICAgIHNlbGVjdGVkeWVhciA9IHNlbGVjdGVkeWVhci5yZXBsYWNlKCcsJywgJycpO1xuICAgICAgICAgICAgaWYgKChzZWxlY3RlZHllYXIgPD0geXkpICYmIChzZWxlY3RlZE10aCA8IG10aCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSwgJycpO1xuXG4kLnZhbGlkYXRvci5hZGRNZXRob2QoJ3llYXJzZWxlY3QnLCBmdW5jdGlvbiAodmFsdWUsIGVsZW1lbnQpIHtcbiAgICBpZiAoJChlbGVtZW50KS5oYXNDbGFzcygnc3RvcEtleXByZXNzJykpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGQgPSBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgbXRoID0gZC5nZXRNb250aCgpICsgMSxcbiAgICAgICAgICAgIHl5ID0gZC5nZXRGdWxsWWVhcigpO1xuICAgICAgICB2YXIgc2VsZWN0ZWRNdGggPSAkKCcuY3VzdG9tLXNlbGVjdCBzZWxlY3RbaWQkPVxcJ19leHBpcmF0aW9uX21vbnRoXFwnXScpLnZhbCgpO1xuXG4gICAgICAgIHZhciBzZWxlY3RlZHllYXIgPSAkKCcuY3VzdG9tLXNlbGVjdCBzZWxlY3RbaWQkPVxcJ19leHBpcmF0aW9uX3llYXJcXCddJykudmFsKCk7XG5cbiAgICAgICAgaWYgKHNlbGVjdGVkeWVhcikge1xuICAgICAgICAgICAgc2VsZWN0ZWR5ZWFyID0gc2VsZWN0ZWR5ZWFyLnJlcGxhY2UoJywnLCAnJyk7XG4gICAgICAgICAgICBpZiAoKHNlbGVjdGVkeWVhciA8PSB5eSkgJiYgKHNlbGVjdGVkTXRoIDwgbXRoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59LCAnJyk7XG5cbi8vIHJlZ2lzdGVyIGZvcm0gdmFsaWRhdG9yIGZvciBmb3JtIGVsZW1lbnRzXG4vLyBleGNlcHQgZm9yIHRob3NlIHdoaWNoIGFyZSBtYXJrZWQgXCJzdXBwcmVzc1wiXG4kLmVhY2goJCgnZm9ybTpub3QoLnN1cHByZXNzKScpLCBmdW5jdGlvbiAoKSB7XG4gICAgJCh0aGlzKS52YWxpZGF0ZShzZXR0aW5ncyk7XG59KTtcbi8qKlxuICogQGZ1bmN0aW9uXG4gKiBAZGVzY3JpcHRpb24gVmFsaWRhdGVzIGEgZ2l2ZW4gcGhvbmUgbnVtYmVyIGFnYWluc3QgdGhlIGNvdW50cmllcyBwaG9uZSByZWdleFxuICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlIFRoZSBwaG9uZSBudW1iZXIgd2hpY2ggd2lsbCBiZSB2YWxpZGF0ZWRcbiAqIEBwYXJhbSB7U3RyaW5nfSBlbCBUaGUgaW5wdXQgZmllbGRcbiAqL1xuLyp2YXIgdmFsaWRhdGVQaG9uZSA9IGZ1bmN0aW9uICh2YWx1ZSwgZWwpIHtcbiAgICB2YXIgY291bnRyeSA9ICQoZWwpLmNsb3Nlc3QoJ2Zvcm0nKS5maW5kKCcuY291bnRyeScpO1xuICAgIGlmIChjb3VudHJ5Lmxlbmd0aCA9PT0gMCB8fCBjb3VudHJ5LnZhbCgpLmxlbmd0aCA9PT0gMCB8fCAhcmVnZXgucGhvbmVbY291bnRyeS52YWwoKS50b0xvd2VyQ2FzZSgpXSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICB2YXIgcmd4ID0gcmVnZXgucGhvbmVbY291bnRyeS52YWwoKS50b0xvd2VyQ2FzZSgpXTtcbiAgICB2YXIgaXNPcHRpb25hbCA9IHRoaXMub3B0aW9uYWwoZWwpO1xuICAgIHZhciBpc1ZhbGlkID0gcmd4LnRlc3QoJC50cmltKHZhbHVlKSk7XG5cbiAgICByZXR1cm4gaXNPcHRpb25hbCB8fCBpc1ZhbGlkO1xufTsqL1xuXG4vKipcbiAqIEBmdW5jdGlvblxuICogQGRlc2NyaXB0aW9uIFZhbGlkYXRlcyB0aGF0IGEgY3JlZGl0IGNhcmQgb3duZXIgaXMgbm90IGEgQ3JlZGl0IGNhcmQgbnVtYmVyXG4gKiBAcGFyYW0ge1N0cmluZ30gdmFsdWUgVGhlIG93bmVyIGZpZWxkIHdoaWNoIHdpbGwgYmUgdmFsaWRhdGVkXG4gKiBAcGFyYW0ge1N0cmluZ30gZWwgVGhlIGlucHV0IGZpZWxkXG4gKi9cbi8qdmFyIHZhbGlkYXRlT3duZXIgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB2YXIgaXNWYWxpZCA9IHJlZ2V4Lm5vdENDLnRlc3QoJC50cmltKHZhbHVlKSk7XG4gICAgcmV0dXJuIGlzVmFsaWQ7XG59O1xuKi9cbi8qKlxuICogQWRkIHBob25lIHZhbGlkYXRpb24gbWV0aG9kIHRvICQgdmFsaWRhdGlvbiBwbHVnaW4uXG4gKiBUZXh0IGZpZWxkcyBtdXN0IGhhdmUgJ3Bob25lJyBjc3MgY2xhc3MgdG8gYmUgdmFsaWRhdGVkIGFzIHBob25lXG4gKi9cbi8qJC52YWxpZGF0b3IuYWRkTWV0aG9kKCdwaG9uZScsIHZhbGlkYXRlUGhvbmUsIFJlc291cmNlcy5JTlZBTElEX1BIT05FKTsqL1xuXG4vKipcbiAqIEFkZCBDQ093bmVyIHZhbGlkYXRpb24gbWV0aG9kIHRvICQgdmFsaWRhdGlvbiBwbHVnaW4uXG4gKiBUZXh0IGZpZWxkcyBtdXN0IGhhdmUgJ293bmVyJyBjc3MgY2xhc3MgdG8gYmUgdmFsaWRhdGVkIGFzIG5vdCBhIGNyZWRpdCBjYXJkXG4gKi9cbi8qJC52YWxpZGF0b3IuYWRkTWV0aG9kKCdvd25lcicsIHZhbGlkYXRlT3duZXIsIFJlc291cmNlcy5JTlZBTElEX09XTkVSKTsqL1xuXG4vKipcbiAqIEFkZCBnaWZ0IGNlcnQgYW1vdW50IHZhbGlkYXRpb24gbWV0aG9kIHRvICQgdmFsaWRhdGlvbiBwbHVnaW4uXG4gKiBUZXh0IGZpZWxkcyBtdXN0IGhhdmUgJ2dpZnQtY2VydC1hbW9udCcgY3NzIGNsYXNzIHRvIGJlIHZhbGlkYXRlZFxuICovXG4kLnZhbGlkYXRvci5hZGRNZXRob2QoJ2dpZnQtY2VydC1hbW91bnQnLCBmdW5jdGlvbiAodmFsdWUsIGVsKSB7XG4gICAgdmFyIGlzT3B0aW9uYWwgPSB0aGlzLm9wdGlvbmFsKGVsKTtcbiAgICB2YXIgaXNWYWxpZCA9ICghaXNOYU4odmFsdWUpKSAmJiAocGFyc2VGbG9hdCh2YWx1ZSkgPj0gNSkgJiYgKHBhcnNlRmxvYXQodmFsdWUpIDw9IDUwMDApO1xuICAgIHJldHVybiBpc09wdGlvbmFsIHx8IGlzVmFsaWQ7XG59LCBSZXNvdXJjZXMuR0lGVF9DRVJUX0FNT1VOVF9JTlZBTElEKTtcblxuLyoqXG4gKiBBZGQgcG9zaXRpdmUgbnVtYmVyIHZhbGlkYXRpb24gbWV0aG9kIHRvICQgdmFsaWRhdGlvbiBwbHVnaW4uXG4gKiBUZXh0IGZpZWxkcyBtdXN0IGhhdmUgJ3Bvc2l0aXZlbnVtYmVyJyBjc3MgY2xhc3MgdG8gYmUgdmFsaWRhdGVkIGFzIHBvc2l0aXZlbnVtYmVyXG4gKi9cbi8qJC52YWxpZGF0b3IuYWRkTWV0aG9kKCdwb3NpdGl2ZW51bWJlcicsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIGlmICgkLnRyaW0odmFsdWUpLmxlbmd0aCA9PT0gMCkgeyByZXR1cm4gdHJ1ZTsgfVxuICAgIHJldHVybiAoIWlzTmFOKHZhbHVlKSAmJiBOdW1iZXIodmFsdWUpID49IDApO1xufSwgJycpOyAvLyAnJyBzaG91bGQgYmUgcmVwbGFjZWQgd2l0aCBlcnJvciBtZXNzYWdlIGlmIG5lZWRlZFxuKi9cbi8qU3RhcnQgSklSQSBQUkVWLTc3IDogWmlwIGNvZGUgdmFsaWRhdGlvbiBpcyBub3QgaGFwcGVuaW5nIHdpdGggcmVzcGVjdCB0byB0aGUgU3RhdGUvQ291bnRyeS4qL1xuLypmdW5jdGlvbiB2YWxpZGF0ZVppcCh2YWx1ZSwgZWwpIHtcbiAgICB2YXIgY291bnRyeSA9ICQoZWwpLmNsb3Nlc3QoJ2Zvcm0nKS5maW5kKCcuY291bnRyeScpO1xuICAgIGlmIChjb3VudHJ5Lmxlbmd0aCA9PT0gMCB8fCBjb3VudHJ5LnZhbCgpLmxlbmd0aCA9PT0gMCB8fCAhcmVnZXgucG9zdGFsW2NvdW50cnkudmFsKCkudG9Mb3dlckNhc2UoKV0pIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHZhciBpc09wdGlvbmFsID0gdGhpcy5vcHRpb25hbChlbCk7XG4gICAgdmFyIGlzVmFsaWQgPSByZWdleC5wb3N0YWxbY291bnRyeS52YWwoKS50b0xvd2VyQ2FzZSgpXS50ZXN0KCQudHJpbSh2YWx1ZSkpO1xuICAgIHJldHVybiBpc09wdGlvbmFsIHx8IGlzVmFsaWQ7XG59XG4kLnZhbGlkYXRvci5hZGRNZXRob2QoJ3Bvc3RhbCcsIHZhbGlkYXRlWmlwLCBSZXNvdXJjZXMuSU5WQUxJRF9aSVApOyovXG4vKkVuZCBKSVJBIFBSRVYtNzcqL1xuXG4kLmV4dGVuZCgkLnZhbGlkYXRvci5tZXNzYWdlcywge1xuICAgIC8vcmVxdWlyZWQ6IFJlc291cmNlcy5WQUxJREFURV9SRVFVSVJFRCxcbiAgICByZW1vdGU6IFJlc291cmNlcy5WQUxJREFURV9SRU1PVEUsXG4gICAgZW1haWw6IFJlc291cmNlcy5WQUxJREFURV9FTUFJTCxcbiAgICB1cmw6IFJlc291cmNlcy5WQUxJREFURV9VUkwsXG4gICAgZGF0ZTogUmVzb3VyY2VzLlZBTElEQVRFX0RBVEUsXG4gICAgZGF0ZUlTTzogUmVzb3VyY2VzLlZBTElEQVRFX0RBVEVJU08sXG4gICAgbnVtYmVyOiBSZXNvdXJjZXMuVkFMSURBVEVfTlVNQkVSLFxuICAgIGRpZ2l0czogUmVzb3VyY2VzLlZBTElEQVRFX0RJR0lUUyxcbiAgICBjcmVkaXRjYXJkOiBSZXNvdXJjZXMuVkFMSURBVEVfQ1JFRElUQ0FSRCxcbiAgICBlcXVhbFRvOiBSZXNvdXJjZXMuVkFMSURBVEVfRVFVQUxUTyxcbiAgICBtYXhsZW5ndGg6ICQudmFsaWRhdG9yLmZvcm1hdChSZXNvdXJjZXMuVkFMSURBVEVfTUFYTEVOR1RIKSxcbiAgICBtaW5sZW5ndGg6ICQudmFsaWRhdG9yLmZvcm1hdChSZXNvdXJjZXMuVkFMSURBVEVfTUlOTEVOR1RIKSxcbiAgICByYW5nZWxlbmd0aDogJC52YWxpZGF0b3IuZm9ybWF0KFJlc291cmNlcy5WQUxJREFURV9SQU5HRUxFTkdUSCksXG4gICAgcmFuZ2U6ICQudmFsaWRhdG9yLmZvcm1hdChSZXNvdXJjZXMuVkFMSURBVEVfUkFOR0UpLFxuICAgIG1heDogJC52YWxpZGF0b3IuZm9ybWF0KFJlc291cmNlcy5WQUxJREFURV9NQVgpLFxuICAgIG1pbjogJC52YWxpZGF0b3IuZm9ybWF0KFJlc291cmNlcy5WQUxJREFURV9NSU4pXG59KTtcblxudmFyIHZhbGlkYXRvciA9IHtcbiAgICByZWdleDogcmVnZXgsXG4gICAgc2V0dGluZ3M6IHNldHRpbmdzLFxuICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAkKCdmb3JtOm5vdCguc3VwcHJlc3MpJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKHRoaXMpLnZhbGlkYXRlKHNlbGYuc2V0dGluZ3MpO1xuICAgICAgICB9KTtcbiAgICAgICAgdmFsaWRhdG9yLnBob25lVmFsaWRhdGlvbigpO1xuICAgICAgICB2YWxpZGF0b3IuemlwRm9ybWF0dGVyKCk7XG4gICAgfSxcbiAgICBpbml0Rm9ybTogZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgJChmKS52YWxpZGF0ZSh0aGlzLnNldHRpbmdzKTtcbiAgICB9LFxuICAgIHBob25lVmFsaWRhdGlvbjogZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBwaG9uZSB2YWxpZGF0aW9uXG4gICAgICAgIHZhciBpc0ZpcmVmb3ggPSBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ0ZpcmVmb3gnKSA+IC0xO1xuICAgICAgICB2YXIgaXNFeHBsb3JlciA9IG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignTVNJRScpID4gLTE7XG4gICAgICAgIGlmIChpc0ZpcmVmb3ggfHwgaXNFeHBsb3Jlcikge1xuICAgICAgICAgICAgJCgnaW5wdXRbbmFtZSQ9XFwncGhvbmVcXCddJykuYmluZCgna2V5dXAga2V5ZG93bicsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGUuc2hpZnRLZXkgfHwgZS5jdHJsS2V5IHx8IGUuYWx0S2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gZS5rZXlDb2RlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoISgoa2V5ID09IDgpIHx8IChrZXkgPT0gOSkgfHwgKGtleSA9PSA0NikgfHwgKGtleSA+PSAzNSAmJiBrZXkgPD0gNDApIHx8IChrZXkgPj0gNDggJiYga2V5IDw9IDU3KSB8fCAoa2V5ID49IDk2ICYmIGtleSA8PSAxMDUpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vdmFyIGN1cmNociA9ICQodGhpcykudmFsKCkubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHZhciBjdXJ2YWwgPSAkKHRoaXMpLnZhbCgpO1xuXG4gICAgICAgICAgICAgICAgdmFyIGN1cnZhbDEgPSBjdXJ2YWwucmVwbGFjZSgvW0EtWmEtemAgfiFAIyQlXiYqKClffCtcXC09Pzs6J1wiLC48Plxce1xcfVxcW1xcXVxcXFxcXC9dL2dpLCAnJyk7XG4gICAgICAgICAgICAgICAgdmFyIHN0cjEgPSBjdXJ2YWwxLnN1YnN0cmluZygwLCAzKTtcbiAgICAgICAgICAgICAgICB2YXIgc3RyMiA9IGN1cnZhbDEuc3Vic3RyaW5nKDMsIDYpO1xuICAgICAgICAgICAgICAgIHZhciBzdHIzID0gY3VydmFsMS5zdWJzdHJpbmcoNiwgMTApO1xuXG4gICAgICAgICAgICAgICAgaWYgKGN1cnZhbC5pbmRleE9mKCcoJykgPT0gLTEgJiYgY3VydmFsLmluZGV4T2YoJyknKSA9PSAtMSAmJiBjdXJ2YWwxLmxlbmd0aCA9PSAzKSB7XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykudmFsKCcoJyArIHN0cjEgKyAnKSAnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnZhbC5pbmRleE9mKCcoJykgIT0gLTEgJiYgY3VydmFsLmluZGV4T2YoJyknKSA9PSAtMSAmJiBjdXJ2YWwxLmxlbmd0aCA9PSA0KSB7XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykudmFsKCcoJyArIHN0cjEgKyAnKSAnICsgc3RyMik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJ2YWwuaW5kZXhPZignKCcpICE9IC0xICYmIGN1cnZhbC5pbmRleE9mKCcpJykgIT0gLTEgJiYgY3VydmFsLmluZGV4T2YoJyAnKSA9PSAtMSAmJiBjdXJ2YWwxLmxlbmd0aCA9PSA2KSB7XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykudmFsKCcoJyArIHN0cjEgKyAnKSAnICsgc3RyMik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJ2YWwuaW5kZXhPZignKCcpICE9IC0xICYmIGN1cnZhbC5pbmRleE9mKCcpJykgIT0gLTEgJiYgY3VydmFsLmluZGV4T2YoJyAnKSAhPSAtMSAmJiBjdXJ2YWwuaW5kZXhPZignLScpID09IC0xICYmIGN1cnZhbDEubGVuZ3RoID4gNikge1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnZhbCgnKCcgKyBzdHIxICsgJykgJyArIHN0cjIgKyAnLScgKyBzdHIzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGN1cnZhbC5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnZhbCgnJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKCdib2R5Jykub24oJ2NoYW5nZSBpbnB1dCBrZXl1cCcsICdpbnB1dFtuYW1lJD1cXCdwaG9uZVxcJ10nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIC8vdmFyIGN1cmNociA9ICQodGhpcykudmFsKCkubGVuZ3RoO1xuICAgICAgICAgICAgICAgICQodGhpcykudmFsKHRoaXMudmFsdWUucmVwbGFjZSgvW15cXGRdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnZhbCA9ICQodGhpcykudmFsKCk7XG5cbiAgICAgICAgICAgICAgICB2YXIgY3VydmFsMSA9IGN1cnZhbDtcbiAgICAgICAgICAgICAgICB2YXIgc3RyMSA9IGN1cnZhbDEuc3Vic3RyaW5nKDAsIDMpO1xuICAgICAgICAgICAgICAgIHZhciBzdHIyID0gY3VydmFsMS5zdWJzdHJpbmcoMywgNik7XG4gICAgICAgICAgICAgICAgdmFyIHN0cjMgPSBjdXJ2YWwxLnN1YnN0cmluZyg2LCAxMCk7XG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IGV2ZW50LndoaWNoIHx8IGV2ZW50LmtleUNvZGUgfHwgZXZlbnQuY2hhckNvZGU7XG5cbiAgICAgICAgICAgICAgICBpZiAoa2V5ID09IDggfHwgZS5zaGlmdEtleSB8fCBlLmN0cmxLZXkgfHwgZS5hbHRLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3VydmFsMS5sZW5ndGggPT0gNCB8fCBjdXJ2YWwxLmxlbmd0aCA9PSA1IHx8IGN1cnZhbDEubGVuZ3RoID09IDYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykudmFsKCcoJyArIHN0cjEgKyAnKSAnICsgc3RyMik7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VydmFsMS5sZW5ndGggPiA2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnZhbCgnKCcgKyBzdHIxICsgJykgJyArIHN0cjIgKyAnLScgKyBzdHIzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJ2YWwxLmxlbmd0aCA9PSAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnZhbCgnKCcgKyBzdHIxICsgJykgJyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VydmFsMS5sZW5ndGggPT0gNCB8fCBjdXJ2YWwxLmxlbmd0aCA9PSA1IHx8IGN1cnZhbDEubGVuZ3RoID09IDYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykudmFsKCcoJyArIHN0cjEgKyAnKSAnICsgc3RyMik7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VydmFsMS5sZW5ndGggPiA2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnZhbCgnKCcgKyBzdHIxICsgJykgJyArIHN0cjIgKyAnLScgKyBzdHIzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VydmFsLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnZhbCgnJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qICQoXCJpbnB1dFtuYW1lJD0ncGhvbmUnXVwiKS5ibHVyKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgJCh0aGlzKS52YWwodGhpcy52YWx1ZS5yZXBsYWNlKC9bQS1aYS16YCB+IUAjJCVeJiooKV98K1xcLT0/OzonXCIsLjw+XFx7XFx9XFxbXFxdXFxcXFxcL10vZ2ksICcnKSk7XG4gICAgICAgICAgICAgICAgIHZhciBjdXJ2YWwgPSAkKHRoaXMpLnZhbCgpO1xuICAgICAgICAgICAgICAgICB2YXIgc3RyMSA9IGN1cnZhbC5zdWJzdHJpbmcoMCwgMyk7XG4gICAgICAgICAgICAgICAgIHZhciBzdHIyID0gY3VydmFsLnN1YnN0cmluZygzLCA2KTtcbiAgICAgICAgICAgICAgICAgdmFyIHN0cjMgPSBjdXJ2YWwuc3Vic3RyaW5nKDYsIDEwKTtcbiAgICAgICAgICAgICAgICAgaWYoY3VydmFsLmxlbmd0aCA8PSAzICYmIGN1cnZhbC5sZW5ndGggPiAwKXtcbiAgICAgICAgICAgICAgICAgICAgICQodGhpcykudmFsKCBcIihcIiArIHN0cjEgKyBcIikgXCIpO1xuICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgIGVsc2UgIGlmKGN1cnZhbC5sZW5ndGggPD0gNiAmJiBjdXJ2YWwubGVuZ3RoID4gMyl7XG4gICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnZhbCggXCIoXCIgKyBzdHIxICsgXCIpIFwiICsgc3RyMiApO1xuICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgIGVsc2UgIGlmKGN1cnZhbC5sZW5ndGggPD0gMTAgJiYgY3VydmFsLmxlbmd0aCA+IDYpe1xuICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS52YWwoIFwiKFwiICsgc3RyMSArIFwiKSBcIiArIHN0cjIgKyBcIi1cIiArIHN0cjMpO1xuICAgICAgICAgICAgICAgICB9XG4gICAgICAgICB9KTsqL1xuXG4gICAgfSxcbiAgICB6aXBGb3JtYXR0ZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnYm9keScpLm9uKCdjaGFuZ2UgaW5wdXQnLCAnaW5wdXRbbmFtZSQ9XFwncG9zdGFsXFwnXSwgaW5wdXRbbmFtZSQ9XFwnemlwXFwnXScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQodGhpcykudmFsKHRoaXMudmFsdWUucmVwbGFjZSgvW15cXGRdL2csICcnKSk7XG4gICAgICAgICAgICB2YXIgY3VydmFsID0gJCh0aGlzKS52YWwoKTtcbiAgICAgICAgICAgIGlmIChjdXJ2YWwubGVuZ3RoID4gNSkge1xuICAgICAgICAgICAgICAgICQodGhpcykudmFsKGN1cnZhbC5zdWJzdHJpbmcoMCwgNSkgKyAnLScgKyBjdXJ2YWwuc3Vic3RyaW5nKDUsIDkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufTtcbm1vZHVsZS5leHBvcnRzID0gdmFsaWRhdG9yO1xuIl19
